{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/6dcc6898beaadac39a8eb758cbf27e2aa5386831",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/6dcc6898beaadac39a8eb758cbf27e2aa5386831/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/6dcc6898beaadac39a8eb758cbf27e2aa5386831/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/6dcc6898beaadac39a8eb758cbf27e2aa5386831/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 1539,
          "old_api": "sdsRemoveFreeSpace",
          "new_api": "sdsavail",
          "old_text": "sdsRemoveFreeSpace(c->querybuf)",
          "new_text": "sdsavail(c->querybuf)",
          "old_line_content": "            c->querybuf = sdsRemoveFreeSpace(c->querybuf);",
          "new_line_content": "        if (sdsavail(c->querybuf) > 1024*4) {",
          "content_same": false
        },
        {
          "line": 1583,
          "old_api": "getClientOutputBufferMemoryUsage",
          "new_api": "sdsAllocSize",
          "old_text": "getClientOutputBufferMemoryUsage(c)",
          "new_text": "sdsAllocSize(c->querybuf)",
          "old_line_content": "    size_t out_usage = getClientOutputBufferMemoryUsage(c);",
          "new_line_content": "    size_t in_usage = sdsAllocSize(c->querybuf);",
          "content_same": false
        },
        {
          "line": 1616,
          "old_api": "getClientOutputBufferMemoryUsage",
          "new_api": "getClientType",
          "old_text": "getClientOutputBufferMemoryUsage(c)",
          "new_text": "getClientType(c)",
          "old_line_content": "    mem += getClientOutputBufferMemoryUsage(c);",
          "new_line_content": "    int type = getClientType(c);",
          "content_same": false
        },
        {
          "line": 1617,
          "old_api": "sdsAllocSize",
          "new_api": "getClientOutputBufferMemoryUsage",
          "old_text": "sdsAllocSize(c->querybuf)",
          "new_text": "getClientOutputBufferMemoryUsage(c)",
          "old_line_content": "    mem += sdsAllocSize(c->querybuf);",
          "new_line_content": "    mem += getClientOutputBufferMemoryUsage(c);",
          "content_same": false
        },
        {
          "line": 1682,
          "old_api": "listFirst",
          "new_api": "listRotateTailToHead",
          "old_text": "listFirst(server.clients)",
          "new_text": "listRotateTailToHead(server.clients)",
          "old_line_content": "        head = listFirst(server.clients);",
          "new_line_content": "        listRotateTailToHead(server.clients);",
          "content_same": false
        },
        {
          "line": 1683,
          "old_api": "listNodeValue",
          "new_api": "listFirst",
          "old_text": "listNodeValue(head)",
          "new_text": "listFirst(server.clients)",
          "old_line_content": "        c = listNodeValue(head);",
          "new_line_content": "        head = listFirst(server.clients);",
          "content_same": false
        },
        {
          "line": 1688,
          "old_api": "clientsCronResizeQueryBuffer",
          "new_api": "clientsCronHandleTimeout",
          "old_text": "clientsCronResizeQueryBuffer(c)",
          "new_text": "clientsCronHandleTimeout(c,now)",
          "old_line_content": "        if (clientsCronResizeQueryBuffer(c)) continue;",
          "new_line_content": "        if (clientsCronHandleTimeout(c,now)) continue;",
          "content_same": false
        },
        {
          "line": 1689,
          "old_api": "clientsCronTrackExpansiveClients",
          "new_api": "clientsCronResizeQueryBuffer",
          "old_text": "clientsCronTrackExpansiveClients(c)",
          "new_text": "clientsCronResizeQueryBuffer(c)",
          "old_line_content": "        if (clientsCronTrackExpansiveClients(c)) continue;",
          "new_line_content": "        if (clientsCronResizeQueryBuffer(c)) continue;",
          "content_same": false
        },
        {
          "line": 1690,
          "old_api": "clientsCronTrackClientsMemUsage",
          "new_api": "clientsCronTrackExpansiveClients",
          "old_text": "clientsCronTrackClientsMemUsage(c)",
          "new_text": "clientsCronTrackExpansiveClients(c)",
          "old_line_content": "        if (clientsCronTrackClientsMemUsage(c)) continue;",
          "new_line_content": "        if (clientsCronTrackExpansiveClients(c)) continue;",
          "content_same": false
        },
        {
          "line": 1702,
          "old_api": "activeExpireCycle",
          "new_api": "iAmMaster",
          "old_text": "activeExpireCycle(ACTIVE_EXPIRE_CYCLE_SLOW)",
          "new_text": "iAmMaster()",
          "old_line_content": "            activeExpireCycle(ACTIVE_EXPIRE_CYCLE_SLOW);",
          "new_line_content": "        if (iAmMaster()) {",
          "content_same": false
        },
        {
          "line": 1791,
          "old_api": "WEXITSTATUS",
          "new_api": "wait3",
          "old_text": "WEXITSTATUS(statloc)",
          "new_text": "wait3(&statloc,WNOHANG,NULL)",
          "old_line_content": "        int exitcode = WEXITSTATUS(statloc);",
          "new_line_content": "    if ((pid = wait3(&statloc,WNOHANG,NULL)) != 0) {",
          "content_same": false
        },
        {
          "line": 1815,
          "old_api": "receiveChildInfo",
          "new_api": "backgroundSaveDoneHandler",
          "old_text": "receiveChildInfo()",
          "new_text": "backgroundSaveDoneHandler(exitcode,bysignal)",
          "old_line_content": "            if (!bysignal && exitcode == 0) receiveChildInfo();",
          "new_line_content": "            backgroundSaveDoneHandler(exitcode,bysignal);",
          "content_same": false
        },
        {
          "line": 1818,
          "old_api": "receiveChildInfo",
          "new_api": "backgroundRewriteDoneHandler",
          "old_text": "receiveChildInfo()",
          "new_text": "backgroundRewriteDoneHandler(exitcode,bysignal)",
          "old_line_content": "            if (!bysignal && exitcode == 0) receiveChildInfo();",
          "new_line_content": "            backgroundRewriteDoneHandler(exitcode,bysignal);",
          "content_same": false
        },
        {
          "line": 1821,
          "old_api": "receiveChildInfo",
          "new_api": "ModuleForkDoneHandler",
          "old_text": "receiveChildInfo()",
          "new_text": "ModuleForkDoneHandler(exitcode,bysignal)",
          "old_line_content": "            if (!bysignal && exitcode == 0) receiveChildInfo();",
          "new_line_content": "            ModuleForkDoneHandler(exitcode,bysignal);",
          "content_same": false
        },
        {
          "line": 1824,
          "old_api": "serverLog",
          "new_api": "ldbRemoveChild",
          "old_text": "serverLog(LL_WARNING,\n                    \"Warning, detected child with unmatched pid: %ld\",\n                    (long)pid)",
          "new_text": "ldbRemoveChild(pid)",
          "old_line_content": "                serverLog(LL_WARNING,",
          "new_line_content": "            if (!ldbRemoveChild(pid)) {",
          "content_same": false
        },
        {
          "line": 1830,
          "old_api": "closeChildInfoPipe",
          "new_api": "updateDictResizePolicy",
          "old_text": "closeChildInfoPipe()",
          "new_text": "updateDictResizePolicy()",
          "old_line_content": "        closeChildInfoPipe();",
          "new_line_content": "        updateDictResizePolicy();",
          "content_same": false
        },
        {
          "line": 1885,
          "old_api": "trackInstantaneousMetric",
          "new_api": "run_with_period",
          "old_text": "trackInstantaneousMetric(STATS_METRIC_COMMAND,server.stat_numcommands)",
          "new_text": "run_with_period(100)",
          "old_line_content": "        trackInstantaneousMetric(STATS_METRIC_COMMAND,server.stat_numcommands);",
          "new_line_content": "    run_with_period(100) {",
          "content_same": false
        },
        {
          "line": 1914,
          "old_api": "zmalloc_used_memory",
          "new_api": "zmalloc_get_rss",
          "old_text": "zmalloc_used_memory()",
          "new_text": "zmalloc_get_rss()",
          "old_line_content": "        server.cron_malloc_stats.zmalloc_used = zmalloc_used_memory();",
          "new_line_content": "        server.cron_malloc_stats.process_rss = zmalloc_get_rss();",
          "content_same": false
        },
        {
          "line": 1941,
          "old_api": "serverLog",
          "new_api": "exit",
          "old_text": "serverLog(LL_WARNING,\"SIGTERM received but errors trying to shut down the server, check the logs for more information\")",
          "new_text": "exit(0)",
          "old_line_content": "        serverLog(LL_WARNING,\"SIGTERM received but errors trying to shut down the server, check the logs for more information\");",
          "new_line_content": "        if (prepareForShutdown(SHUTDOWN_NOFLAGS) == C_OK) exit(0);",
          "content_same": false
        },
        {
          "line": 1951,
          "old_api": "dictSize",
          "new_api": "dictSlots",
          "old_text": "dictSize(server.db[j].dict)",
          "new_text": "dictSlots(server.db[j].dict)",
          "old_line_content": "            used = dictSize(server.db[j].dict);",
          "new_line_content": "            size = dictSlots(server.db[j].dict);",
          "content_same": false
        },
        {
          "line": 1963,
          "old_api": "serverLog",
          "new_api": "run_with_period",
          "old_text": "serverLog(LL_DEBUG,\n                \"%lu clients connected (%lu replicas), %zu bytes in use\",\n                listLength(server.clients)-listLength(server.slaves),\n                listLength(server.slaves),\n                zmalloc_used_memory())",
          "new_text": "run_with_period(5000)",
          "old_line_content": "            serverLog(LL_DEBUG,",
          "new_line_content": "        run_with_period(5000) {",
          "content_same": false
        },
        {
          "line": 1967,
          "old_api": "zmalloc_used_memory",
          "new_api": "listLength",
          "old_text": "zmalloc_used_memory()",
          "new_text": "listLength(server.slaves)",
          "old_line_content": "                zmalloc_used_memory());",
          "new_line_content": "                listLength(server.slaves),",
          "content_same": false
        },
        {
          "line": 2009,
          "old_api": "rdbSaveBackground",
          "new_api": "rdbPopulateSaveInfo",
          "old_text": "rdbSaveBackground(server.rdb_filename,rsiptr)",
          "new_text": "rdbPopulateSaveInfo(&rsi)",
          "old_line_content": "                rdbSaveBackground(server.rdb_filename,rsiptr);",
          "new_line_content": "                rsiptr = rdbPopulateSaveInfo(&rsi);",
          "content_same": false
        },
        {
          "line": 2025,
          "old_api": "rewriteAppendOnlyFileBackground",
          "new_api": "serverLog",
          "old_text": "rewriteAppendOnlyFileBackground()",
          "new_text": "serverLog(LL_NOTICE,\"Starting automatic rewriting of AOF on %lld%% growth\",growth)",
          "old_line_content": "                rewriteAppendOnlyFileBackground();",
          "new_line_content": "                serverLog(LL_NOTICE,\"Starting automatic rewriting of AOF on %lld%% growth\",growth);",
          "content_same": false
        },
        {
          "line": 2053,
          "old_api": "clusterCron",
          "new_api": "run_with_period",
          "old_text": "clusterCron()",
          "new_text": "run_with_period(100)",
          "old_line_content": "        if (server.cluster_enabled) clusterCron();",
          "new_line_content": "    run_with_period(100) {",
          "content_same": false
        },
        {
          "line": 2061,
          "old_api": "migrateCloseTimedoutSockets",
          "new_api": "run_with_period",
          "old_text": "migrateCloseTimedoutSockets()",
          "new_text": "run_with_period(1000)",
          "old_line_content": "        migrateCloseTimedoutSockets();",
          "new_line_content": "    run_with_period(1000) {",
          "content_same": false
        },
        {
          "line": 2087,
          "old_api": "rdbSaveBackground",
          "new_api": "rdbPopulateSaveInfo",
          "old_text": "rdbSaveBackground(server.rdb_filename,rsiptr)",
          "new_text": "rdbPopulateSaveInfo(&rsi)",
          "old_line_content": "        if (rdbSaveBackground(server.rdb_filename,rsiptr) == C_OK)",
          "new_line_content": "        rsiptr = rdbPopulateSaveInfo(&rsi);",
          "content_same": false
        },
        {
          "line": 2128,
          "old_api": "tlsProcessPendingData",
          "new_api": "handleClientsWithPendingReadsUsingThreads",
          "old_text": "tlsProcessPendingData()",
          "new_text": "handleClientsWithPendingReadsUsingThreads()",
          "old_line_content": "        processed += tlsProcessPendingData();",
          "new_line_content": "        processed += handleClientsWithPendingReadsUsingThreads();",
          "content_same": false
        },
        {
          "line": 2129,
          "old_api": "handleClientsWithPendingWrites",
          "new_api": "tlsProcessPendingData",
          "old_text": "handleClientsWithPendingWrites()",
          "new_text": "tlsProcessPendingData()",
          "old_line_content": "        processed += handleClientsWithPendingWrites();",
          "new_line_content": "        processed += tlsProcessPendingData();",
          "content_same": false
        },
        {
          "line": 2130,
          "old_api": "freeClientsInAsyncFreeQueue",
          "new_api": "handleClientsWithPendingWrites",
          "old_text": "freeClientsInAsyncFreeQueue()",
          "new_text": "handleClientsWithPendingWrites()",
          "old_line_content": "        processed += freeClientsInAsyncFreeQueue();",
          "new_line_content": "        processed += handleClientsWithPendingWrites();",
          "content_same": false
        },
        {
          "line": 2161,
          "old_api": "processClientsWaitingReplicas",
          "new_api": "listLength",
          "old_text": "processClientsWaitingReplicas()",
          "new_text": "listLength(server.clients_waiting_acks)",
          "old_line_content": "        processClientsWaitingReplicas();",
          "new_line_content": "    if (listLength(server.clients_waiting_acks))",
          "content_same": false
        },
        {
          "line": 2169,
          "old_api": "processUnblockedClients",
          "new_api": "listLength",
          "old_text": "processUnblockedClients()",
          "new_text": "listLength(server.unblocked_clients)",
          "old_line_content": "        processUnblockedClients();",
          "new_line_content": "    if (listLength(server.unblocked_clients))",
          "content_same": false
        },
        {
          "line": 2182,
          "old_api": "replicationFeedSlaves",
          "new_api": "createStringObject",
          "old_text": "replicationFeedSlaves(server.slaves, server.slaveseldb, argv, 3)",
          "new_text": "createStringObject(\"*\",1)",
          "old_line_content": "        replicationFeedSlaves(server.slaves, server.slaveseldb, argv, 3);",
          "new_line_content": "        argv[2] = createStringObject(\"*\",1); /* Not used argument. */",
          "content_same": false
        },
        {
          "line": 2183,
          "old_api": "decrRefCount",
          "new_api": "replicationFeedSlaves",
          "old_text": "decrRefCount(argv[0])",
          "new_text": "replicationFeedSlaves(server.slaves, server.slaveseldb, argv, 3)",
          "old_line_content": "        decrRefCount(argv[0]);",
          "new_line_content": "        replicationFeedSlaves(server.slaves, server.slaveseldb, argv, 3);",
          "content_same": false
        },
        {
          "line": 2296,
          "old_api": "createObject",
          "new_api": "ll2string",
          "old_text": "createObject(OBJ_STRING,\n            sdscatprintf(sdsempty(),\n                \"*2\\r\\n$6\\r\\nSELECT\\r\\n$%d\\r\\n%s\\r\\n\",\n                dictid_len, dictid_str))",
          "new_text": "ll2string(dictid_str,sizeof(dictid_str),j)",
          "old_line_content": "        shared.select[j] = createObject(OBJ_STRING,",
          "new_line_content": "        dictid_len = ll2string(dictid_str,sizeof(dictid_str),j);",
          "content_same": false
        },
        {
          "line": 2297,
          "old_api": "sdsempty",
          "new_api": "createObject",
          "old_text": "sdsempty()",
          "new_text": "createObject(OBJ_STRING,\n            sdscatprintf(sdsempty(),\n                \"*2\\r\\n$6\\r\\nSELECT\\r\\n$%d\\r\\n%s\\r\\n\",\n                dictid_len, dictid_str))",
          "old_line_content": "            sdscatprintf(sdsempty(),",
          "new_line_content": "        shared.select[j] = createObject(OBJ_STRING,",
          "content_same": false
        },
        {
          "line": 2324,
          "old_api": "sdsempty",
          "new_api": "createObject",
          "old_text": "sdsempty()",
          "new_text": "createObject(OBJ_STRING,\n            sdscatprintf(sdsempty(),\"*%d\\r\\n\",j))",
          "old_line_content": "            sdscatprintf(sdsempty(),\"*%d\\r\\n\",j));",
          "new_line_content": "        shared.mbulkhdr[j] = createObject(OBJ_STRING,",
          "content_same": false
        },
        {
          "line": 2325,
          "old_api": "createObject",
          "new_api": "sdsempty",
          "old_text": "createObject(OBJ_STRING,\n            sdscatprintf(sdsempty(),\"$%d\\r\\n\",j))",
          "new_text": "sdsempty()",
          "old_line_content": "        shared.bulkhdr[j] = createObject(OBJ_STRING,",
          "new_line_content": "            sdscatprintf(sdsempty(),\"*%d\\r\\n\",j));",
          "content_same": false
        },
        {
          "line": 2326,
          "old_api": "sdsempty",
          "new_api": "createObject",
          "old_text": "sdsempty()",
          "new_text": "createObject(OBJ_STRING,\n            sdscatprintf(sdsempty(),\"$%d\\r\\n\",j))",
          "old_line_content": "            sdscatprintf(sdsempty(),\"$%d\\r\\n\",j));",
          "new_line_content": "        shared.bulkhdr[j] = createObject(OBJ_STRING,",
          "content_same": false
        },
        {
          "line": 2340,
          "old_api": "getRandomHexChars",
          "new_api": "updateCachedTime",
          "old_text": "getRandomHexChars(server.runid,CONFIG_RUN_ID_SIZE)",
          "new_text": "updateCachedTime(1)",
          "old_line_content": "    getRandomHexChars(server.runid,CONFIG_RUN_ID_SIZE);",
          "new_line_content": "    updateCachedTime(1);",
          "content_same": false
        },
        {
          "line": 2343,
          "old_api": "clearReplicationId2",
          "new_api": "changeReplicationId",
          "old_text": "clearReplicationId2()",
          "new_text": "changeReplicationId()",
          "old_line_content": "    clearReplicationId2();",
          "new_line_content": "    changeReplicationId();",
          "content_same": false
        },
        {
          "line": 2388,
          "old_api": "resetServerSaveParams",
          "new_api": "getLRUClock",
          "old_text": "resetServerSaveParams()",
          "new_text": "getLRUClock()",
          "old_line_content": "    resetServerSaveParams();",
          "new_line_content": "    server.lruclock = getLRUClock();",
          "content_same": false
        },
        {
          "line": 2431,
          "old_api": "populateCommandTable",
          "new_api": "dictCreate",
          "old_text": "populateCommandTable()",
          "new_text": "dictCreate(&commandTableDictType,NULL)",
          "old_line_content": "    populateCommandTable();",
          "new_line_content": "    server.orig_commands = dictCreate(&commandTableDictType,NULL);",
          "content_same": false
        },
        {
          "line": 2432,
          "old_api": "lookupCommandByCString",
          "new_api": "populateCommandTable",
          "old_text": "lookupCommandByCString(\"del\")",
          "new_text": "populateCommandTable()",
          "old_line_content": "    server.delCommand = lookupCommandByCString(\"del\");",
          "new_line_content": "    populateCommandTable();",
          "content_same": false
        },
        {
          "line": 2482,
          "old_api": "serverLog",
          "new_api": "access",
          "old_text": "serverLog(LL_WARNING,\"Can't restart: this process has no \"\n                             \"permissions to execute %s\", server.executable)",
          "new_text": "access(server.executable,X_OK)",
          "old_line_content": "        serverLog(LL_WARNING,\"Can't restart: this process has no \"",
          "new_line_content": "    if (access(server.executable,X_OK) == -1) {",
          "content_same": false
        },
        {
          "line": 2515,
          "old_api": "zfree",
          "new_api": "usleep",
          "old_text": "zfree(server.exec_argv[0])",
          "new_text": "usleep(delay*1000)",
          "old_line_content": "    zfree(server.exec_argv[0]);",
          "new_line_content": "    if (delay) usleep(delay*1000);",
          "content_same": false
        },
        {
          "line": 2516,
          "old_api": "zstrdup",
          "new_api": "zfree",
          "old_text": "zstrdup(server.executable)",
          "new_text": "zfree(server.exec_argv[0])",
          "old_line_content": "    server.exec_argv[0] = zstrdup(server.executable);",
          "new_line_content": "    zfree(server.exec_argv[0]);",
          "content_same": false
        },
        {
          "line": 2517,
          "old_api": "execve",
          "new_api": "zstrdup",
          "old_text": "execve(server.executable,server.exec_argv,environ)",
          "new_text": "zstrdup(server.executable)",
          "old_line_content": "    execve(server.executable,server.exec_argv,environ);",
          "new_line_content": "    server.exec_argv[0] = zstrdup(server.executable);",
          "content_same": false
        },
        {
          "line": 2538,
          "old_api": "serverLog",
          "new_api": "getrlimit",
          "old_text": "serverLog(LL_WARNING,\"Unable to obtain the current NOFILE limit (%s), assuming 1024 and setting the max clients configuration accordingly.\",\n            strerror(errno))",
          "new_text": "getrlimit(RLIMIT_NOFILE,&limit)",
          "old_line_content": "        serverLog(LL_WARNING,\"Unable to obtain the current NOFILE limit (%s), assuming 1024 and setting the max clients configuration accordingly.\",",
          "new_line_content": "    if (getrlimit(RLIMIT_NOFILE,&limit) == -1) {",
          "content_same": false
        },
        {
          "line": 2539,
          "old_api": "strerror",
          "new_api": "serverLog",
          "old_text": "strerror(errno)",
          "new_text": "serverLog(LL_WARNING,\"Unable to obtain the current NOFILE limit (%s), assuming 1024 and setting the max clients configuration accordingly.\",\n            strerror(errno))",
          "old_line_content": "            strerror(errno));",
          "new_line_content": "        serverLog(LL_WARNING,\"Unable to obtain the current NOFILE limit (%s), assuming 1024 and setting the max clients configuration accordingly.\",",
          "content_same": false
        },
        {
          "line": 2593,
          "old_api": "serverLog",
          "new_api": "strerror",
          "old_text": "serverLog(LL_WARNING,\"Current maximum open files is %llu. \"\n                    \"maxclients has been reduced to %d to compensate for \"\n                    \"low ulimit. \"\n                    \"If you need higher maxclients increase 'ulimit -n'.\",\n                    (unsigned long long) bestlimit, server.maxclients)",
          "new_text": "strerror(setrlimit_error)",
          "old_line_content": "                serverLog(LL_WARNING,\"Current maximum open files is %llu. \"",
          "new_line_content": "                    (unsigned long long) maxfiles, strerror(setrlimit_error));",
          "content_same": false
        },
        {
          "line": 2616,
          "old_api": "atoi",
          "new_api": "fgets",
          "old_text": "atoi(buf)",
          "new_text": "fgets(buf,sizeof(buf),fp)",
          "old_line_content": "        int somaxconn = atoi(buf);",
          "new_line_content": "    if (fgets(buf,sizeof(buf),fp) != NULL) {",
          "content_same": false
        },
        {
          "line": 2754,
          "old_api": "setupSignalHandlers",
          "new_api": "signal",
          "old_text": "setupSignalHandlers()",
          "new_text": "signal(SIGPIPE, SIG_IGN)",
          "old_line_content": "    setupSignalHandlers();",
          "new_line_content": "    signal(SIGPIPE, SIG_IGN);",
          "content_same": false
        },
        {
          "line": 2768,
          "old_api": "raxNew",
          "new_api": "listCreate",
          "old_text": "raxNew()",
          "new_text": "listCreate()",
          "old_line_content": "    server.clients_index = raxNew();",
          "new_line_content": "    server.clients = listCreate();",
          "content_same": false
        },
        {
          "line": 2769,
          "old_api": "listCreate",
          "new_api": "raxNew",
          "old_text": "listCreate()",
          "new_text": "raxNew()",
          "old_line_content": "    server.clients_to_close = listCreate();",
          "new_line_content": "    server.clients_index = raxNew();",
          "content_same": false
        },
        {
          "line": 2774,
          "old_api": "raxNew",
          "new_api": "listCreate",
          "old_text": "raxNew()",
          "new_text": "listCreate()",
          "old_line_content": "    server.clients_timeout_table = raxNew();",
          "new_line_content": "    server.clients_pending_read = listCreate();",
          "content_same": false
        },
        {
          "line": 2786,
          "old_api": "serverLog",
          "new_api": "tlsConfigure",
          "old_text": "serverLog(LL_WARNING, \"Failed to configure TLS. Check logs for more info.\")",
          "new_text": "tlsConfigure(&server.tls_ctx_config)",
          "old_line_content": "        serverLog(LL_WARNING, \"Failed to configure TLS. Check logs for more info.\");",
          "new_line_content": "                && tlsConfigure(&server.tls_ctx_config) == C_ERR) {",
          "content_same": false
        },
        {
          "line": 2787,
          "old_api": "exit",
          "new_api": "serverLog",
          "old_text": "exit(1)",
          "new_text": "serverLog(LL_WARNING, \"Failed to configure TLS. Check logs for more info.\")",
          "old_line_content": "        exit(1);",
          "new_line_content": "        serverLog(LL_WARNING, \"Failed to configure TLS. Check logs for more info.\");",
          "content_same": false
        },
        {
          "line": 2791,
          "old_api": "adjustOpenFilesLimit",
          "new_api": "createSharedObjects",
          "old_text": "adjustOpenFilesLimit()",
          "new_text": "createSharedObjects()",
          "old_line_content": "    adjustOpenFilesLimit();",
          "new_line_content": "    createSharedObjects();",
          "content_same": false
        },
        {
          "line": 2792,
          "old_api": "aeCreateEventLoop",
          "new_api": "adjustOpenFilesLimit",
          "old_text": "aeCreateEventLoop(server.maxclients+CONFIG_FDSET_INCR)",
          "new_text": "adjustOpenFilesLimit()",
          "old_line_content": "    server.el = aeCreateEventLoop(server.maxclients+CONFIG_FDSET_INCR);",
          "new_line_content": "    adjustOpenFilesLimit();",
          "content_same": false
        },
        {
          "line": 2797,
          "old_api": "exit",
          "new_api": "strerror",
          "old_text": "exit(1)",
          "new_text": "strerror(errno)",
          "old_line_content": "        exit(1);",
          "new_line_content": "            strerror(errno));",
          "content_same": false
        },
        {
          "line": 2804,
          "old_api": "exit",
          "new_api": "listenToPort",
          "old_text": "exit(1)",
          "new_text": "listenToPort(server.port,server.ipfd,&server.ipfd_count)",
          "old_line_content": "        exit(1);",
          "new_line_content": "        listenToPort(server.port,server.ipfd,&server.ipfd_count) == C_ERR)",
          "content_same": false
        },
        {
          "line": 2807,
          "old_api": "exit",
          "new_api": "listenToPort",
          "old_text": "exit(1)",
          "new_text": "listenToPort(server.tls_port,server.tlsfd,&server.tlsfd_count)",
          "old_line_content": "        exit(1);",
          "new_line_content": "        listenToPort(server.tls_port,server.tlsfd,&server.tlsfd_count) == C_ERR)",
          "content_same": false
        },
        {
          "line": 2812,
          "old_api": "anetUnixServer",
          "new_api": "unlink",
          "old_text": "anetUnixServer(server.neterr,server.unixsocket,\n            server.unixsocketperm, server.tcp_backlog)",
          "new_text": "unlink(server.unixsocket)",
          "old_line_content": "        server.sofd = anetUnixServer(server.neterr,server.unixsocket,",
          "new_line_content": "        unlink(server.unixsocket); /* don't care if this fails */",
          "content_same": false
        },
        {
          "line": 2816,
          "old_api": "exit",
          "new_api": "serverLog",
          "old_text": "exit(1)",
          "new_text": "serverLog(LL_WARNING, \"Opening Unix socket: %s\", server.neterr)",
          "old_line_content": "            exit(1);",
          "new_line_content": "            serverLog(LL_WARNING, \"Opening Unix socket: %s\", server.neterr);",
          "content_same": false
        },
        {
          "line": 2824,
          "old_api": "exit",
          "new_api": "serverLog",
          "old_text": "exit(1)",
          "new_text": "serverLog(LL_WARNING, \"Configured to not listen anywhere, exiting.\")",
          "old_line_content": "        exit(1);",
          "new_line_content": "        serverLog(LL_WARNING, \"Configured to not listen anywhere, exiting.\");",
          "content_same": false
        },
        {
          "line": 2838,
          "old_api": "listSetFreeMethod",
          "new_api": "listCreate",
          "old_text": "listSetFreeMethod(server.db[j].defrag_later,(void (*)(void*))sdsfree)",
          "new_text": "listCreate()",
          "old_line_content": "        listSetFreeMethod(server.db[j].defrag_later,(void (*)(void*))sdsfree);",
          "new_line_content": "        server.db[j].defrag_later = listCreate();",
          "content_same": false
        },
        {
          "line": 2841,
          "old_api": "dictCreate",
          "new_api": "evictionPoolAlloc",
          "old_text": "dictCreate(&keylistDictType,NULL)",
          "new_text": "evictionPoolAlloc()",
          "old_line_content": "    server.pubsub_channels = dictCreate(&keylistDictType,NULL);",
          "new_line_content": "    evictionPoolAlloc(); /* Initialize the LRU keys pool. */",
          "content_same": false
        },
        {
          "line": 2842,
          "old_api": "listCreate",
          "new_api": "dictCreate",
          "old_text": "listCreate()",
          "new_text": "dictCreate(&keylistDictType,NULL)",
          "old_line_content": "    server.pubsub_patterns = listCreate();",
          "new_line_content": "    server.pubsub_channels = dictCreate(&keylistDictType,NULL);",
          "content_same": false
        },
        {
          "line": 2843,
          "old_api": "dictCreate",
          "new_api": "listCreate",
          "old_text": "dictCreate(&keylistDictType,NULL)",
          "new_text": "listCreate()",
          "old_line_content": "    server.pubsub_patterns_dict = dictCreate(&keylistDictType,NULL);",
          "new_line_content": "    server.pubsub_patterns = listCreate();",
          "content_same": false
        },
        {
          "line": 2844,
          "old_api": "listSetFreeMethod",
          "new_api": "dictCreate",
          "old_text": "listSetFreeMethod(server.pubsub_patterns,freePubsubPattern)",
          "new_text": "dictCreate(&keylistDictType,NULL)",
          "old_line_content": "    listSetFreeMethod(server.pubsub_patterns,freePubsubPattern);",
          "new_line_content": "    server.pubsub_patterns_dict = dictCreate(&keylistDictType,NULL);",
          "content_same": false
        },
        {
          "line": 2845,
          "old_api": "listSetMatchMethod",
          "new_api": "listSetFreeMethod",
          "old_text": "listSetMatchMethod(server.pubsub_patterns,listMatchPubsubPattern)",
          "new_text": "listSetFreeMethod(server.pubsub_patterns,freePubsubPattern)",
          "old_line_content": "    listSetMatchMethod(server.pubsub_patterns,listMatchPubsubPattern);",
          "new_line_content": "    listSetFreeMethod(server.pubsub_patterns,freePubsubPattern);",
          "content_same": false
        },
        {
          "line": 2861,
          "old_api": "sdsempty",
          "new_api": "aofRewriteBufferReset",
          "old_text": "sdsempty()",
          "new_text": "aofRewriteBufferReset()",
          "old_line_content": "    server.aof_buf = sdsempty();",
          "new_line_content": "    aofRewriteBufferReset();",
          "content_same": false
        },
        {
          "line": 2862,
          "old_api": "time",
          "new_api": "sdsempty",
          "old_text": "time(NULL)",
          "new_text": "sdsempty()",
          "old_line_content": "    server.lastsave = time(NULL); /* At startup we consider the DB saved. */",
          "new_line_content": "    server.aof_buf = sdsempty();",
          "content_same": false
        },
        {
          "line": 2890,
          "old_api": "serverPanic",
          "new_api": "aeCreateTimeEvent",
          "old_text": "serverPanic(\"Can't create event loop timers.\")",
          "new_text": "aeCreateTimeEvent(server.el, 1, serverCron, NULL, NULL)",
          "old_line_content": "        serverPanic(\"Can't create event loop timers.\");",
          "new_line_content": "    if (aeCreateTimeEvent(server.el, 1, serverCron, NULL, NULL) == AE_ERR) {",
          "content_same": false
        },
        {
          "line": 2891,
          "old_api": "exit",
          "new_api": "serverPanic",
          "old_text": "exit(1)",
          "new_text": "serverPanic(\"Can't create event loop timers.\")",
          "old_line_content": "        exit(1);",
          "new_line_content": "        serverPanic(\"Can't create event loop timers.\");",
          "content_same": false
        },
        {
          "line": 2913,
          "old_api": "serverPanic",
          "new_api": "aeCreateFileEvent",
          "old_text": "serverPanic(\"Unrecoverable error creating server.sofd file event.\")",
          "new_text": "aeCreateFileEvent(server.el,server.sofd,AE_READABLE,\n        acceptUnixHandler,NULL)",
          "old_line_content": "        acceptUnixHandler,NULL) == AE_ERR) serverPanic(\"Unrecoverable error creating server.sofd file event.\");",
          "new_line_content": "    if (server.sofd > 0 && aeCreateFileEvent(server.el,server.sofd,AE_READABLE,",
          "content_same": false
        },
        {
          "line": 2928,
          "old_api": "aeSetAfterSleepProc",
          "new_api": "aeSetBeforeSleepProc",
          "old_text": "aeSetAfterSleepProc(server.el,afterSleep)",
          "new_text": "aeSetBeforeSleepProc(server.el,beforeSleep)",
          "old_line_content": "    aeSetAfterSleepProc(server.el,afterSleep);",
          "new_line_content": "    aeSetBeforeSleepProc(server.el,beforeSleep);",
          "content_same": false
        },
        {
          "line": 2936,
          "old_api": "strerror",
          "new_api": "serverLog",
          "old_text": "strerror(errno)",
          "new_text": "serverLog(LL_WARNING, \"Can't open the append-only file: %s\",\n                strerror(errno))",
          "old_line_content": "                strerror(errno));",
          "new_line_content": "            serverLog(LL_WARNING, \"Can't open the append-only file: %s\",",
          "content_same": false
        },
        {
          "line": 2937,
          "old_api": "exit",
          "new_api": "strerror",
          "old_text": "exit(1)",
          "new_text": "strerror(errno)",
          "old_line_content": "            exit(1);",
          "new_line_content": "                strerror(errno));",
          "content_same": false
        },
        {
          "line": 2952,
          "old_api": "replicationScriptCacheInit",
          "new_api": "clusterInit",
          "old_text": "replicationScriptCacheInit()",
          "new_text": "clusterInit()",
          "old_line_content": "    replicationScriptCacheInit();",
          "new_line_content": "    if (server.cluster_enabled) clusterInit();",
          "content_same": false
        },
        {
          "line": 2953,
          "old_api": "scriptingInit",
          "new_api": "replicationScriptCacheInit",
          "old_text": "scriptingInit(1)",
          "new_text": "replicationScriptCacheInit()",
          "old_line_content": "    scriptingInit(1);",
          "new_line_content": "    replicationScriptCacheInit();",
          "content_same": false
        },
        {
          "line": 2954,
          "old_api": "slowlogInit",
          "new_api": "scriptingInit",
          "old_text": "slowlogInit()",
          "new_text": "scriptingInit(1)",
          "old_line_content": "    slowlogInit();",
          "new_line_content": "    scriptingInit(1);",
          "content_same": false
        },
        {
          "line": 2955,
          "old_api": "latencyMonitorInit",
          "new_api": "slowlogInit",
          "old_text": "latencyMonitorInit()",
          "new_text": "slowlogInit()",
          "old_line_content": "    latencyMonitorInit();",
          "new_line_content": "    slowlogInit();",
          "content_same": false
        },
        {
          "line": 2965,
          "old_api": "initThreadedIO",
          "new_api": "bioInit",
          "old_text": "initThreadedIO()",
          "new_text": "bioInit()",
          "old_line_content": "    initThreadedIO();",
          "new_line_content": "    bioInit();",
          "content_same": false
        },
        {
          "line": 2966,
          "old_api": "set_jemalloc_bg_thread",
          "new_api": "initThreadedIO",
          "old_text": "set_jemalloc_bg_thread(server.jemalloc_bg_thread)",
          "new_text": "initThreadedIO()",
          "old_line_content": "    set_jemalloc_bg_thread(server.jemalloc_bg_thread);",
          "new_line_content": "    initThreadedIO();",
          "content_same": false
        },
        {
          "line": 2967,
          "old_api": "zmalloc_used_memory",
          "new_api": "set_jemalloc_bg_thread",
          "old_text": "zmalloc_used_memory()",
          "new_text": "set_jemalloc_bg_thread(server.jemalloc_bg_thread)",
          "old_line_content": "    server.initial_memory_usage = zmalloc_used_memory();",
          "new_line_content": "    set_jemalloc_bg_thread(server.jemalloc_bg_thread);",
          "content_same": false
        },
        {
          "line": 3046,
          "old_api": "serverPanic",
          "new_api": "populateCommandTableParseFlags",
          "old_text": "serverPanic(\"Unsupported command flag\")",
          "new_text": "populateCommandTableParseFlags(c,c->sflags)",
          "old_line_content": "            serverPanic(\"Unsupported command flag\");",
          "new_line_content": "        if (populateCommandTableParseFlags(c,c->sflags) == C_ERR)",
          "content_same": false
        },
        {
          "line": 3049,
          "old_api": "sdsnew",
          "new_api": "ACLGetCommandID",
          "old_text": "sdsnew(c->name)",
          "new_text": "ACLGetCommandID(c->name)",
          "old_line_content": "        retval1 = dictAdd(server.commands, sdsnew(c->name), c);",
          "new_line_content": "        c->id = ACLGetCommandID(c->name); /* Assign the ID used for ACL. */",
          "content_same": false
        },
        {
          "line": 3053,
          "old_api": "serverAssert",
          "new_api": "sdsnew",
          "old_text": "serverAssert(retval1 == DICT_OK && retval2 == DICT_OK)",
          "new_text": "sdsnew(c->name)",
          "old_line_content": "        serverAssert(retval1 == DICT_OK && retval2 == DICT_OK);",
          "new_line_content": "        retval2 = dictAdd(server.orig_commands, sdsnew(c->name), c);",
          "content_same": false
        },
        {
          "line": 3063,
          "old_api": "dictNext",
          "new_api": "dictGetSafeIterator",
          "old_text": "dictNext(di)",
          "new_text": "dictGetSafeIterator(server.commands)",
          "old_line_content": "    while((de = dictNext(di)) != NULL) {",
          "new_line_content": "    di = dictGetSafeIterator(server.commands);",
          "content_same": false
        },
        {
          "line": 3064,
          "old_api": "dictGetVal",
          "new_api": "dictNext",
          "old_text": "dictGetVal(de)",
          "new_text": "dictNext(di)",
          "old_line_content": "        c = (struct redisCommand *) dictGetVal(de);",
          "new_line_content": "    while((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 3104,
          "old_api": "zfree",
          "new_api": "decrRefCount",
          "old_text": "zfree(op->argv)",
          "new_text": "decrRefCount(op->argv[j])",
          "old_line_content": "        zfree(op->argv);",
          "new_line_content": "            decrRefCount(op->argv[j]);",
          "content_same": false
        },
        {
          "line": 3120,
          "old_api": "sdsfree",
          "new_api": "dictFetchValue",
          "old_text": "sdsfree(name)",
          "new_text": "dictFetchValue(server.commands, name)",
          "old_line_content": "    sdsfree(name);",
          "new_line_content": "    cmd = dictFetchValue(server.commands, name);",
          "content_same": false
        },
        {
          "line": 3281,
          "old_api": "ustime",
          "new_api": "proc",
          "old_text": "ustime()",
          "new_text": "c->cmd->proc(c)",
          "old_line_content": "    duration = ustime()-start;",
          "new_line_content": "    c->cmd->proc(c);",
          "content_same": false
        },
        {
          "line": 3306,
          "old_api": "slowlogPushEntryIfNeeded",
          "new_api": "latencyAddSampleIfNeeded",
          "old_text": "slowlogPushEntryIfNeeded(c,c->argv,c->argc,duration)",
          "new_text": "latencyAddSampleIfNeeded(latency_event,duration/1000)",
          "old_line_content": "        slowlogPushEntryIfNeeded(c,c->argv,c->argc,duration);",
          "new_line_content": "        latencyAddSampleIfNeeded(latency_event,duration/1000);",
          "content_same": false
        },
        {
          "line": 3431,
          "old_api": "sdsempty",
          "new_api": "va_start",
          "old_text": "sdsempty()",
          "new_text": "va_start(ap,fmt)",
          "old_line_content": "    sds s = sdscatvprintf(sdsempty(),fmt,ap);",
          "new_line_content": "    va_start(ap,fmt);",
          "content_same": false
        },
        {
          "line": 3432,
          "old_api": "va_end",
          "new_api": "sdsempty",
          "old_text": "va_end(ap)",
          "new_text": "sdsempty()",
          "old_line_content": "    va_end(ap);",
          "new_line_content": "    sds s = sdscatvprintf(sdsempty(),fmt,ap);",
          "content_same": false
        },
        {
          "line": 3464,
          "old_api": "addReply",
          "new_api": "strcasecmp",
          "old_text": "addReply(c,shared.ok)",
          "new_text": "strcasecmp(c->argv[0]->ptr,\"quit\")",
          "old_line_content": "        addReply(c,shared.ok);",
          "new_line_content": "    if (!strcasecmp(c->argv[0]->ptr,\"quit\")) {",
          "content_same": false
        },
        {
          "line": 3477,
          "old_api": "rejectCommandFormat",
          "new_api": "sdslen",
          "old_text": "rejectCommandFormat(c,\"unknown command `%s`, with args beginning with: %s\",\n            (char*)c->argv[0]->ptr, args)",
          "new_text": "sdslen(args)",
          "old_line_content": "        rejectCommandFormat(c,\"unknown command `%s`, with args beginning with: %s\",",
          "new_line_content": "            args = sdscatprintf(args, \"`%.*s`, \", 128-(int)sdslen(args), (char*)c->argv[i]->ptr);",
          "content_same": false
        },
        {
          "line": 3692,
          "old_api": "addReply",
          "new_api": "queueMultiCommand",
          "old_text": "addReply(c,shared.queued)",
          "new_text": "queueMultiCommand(c)",
          "old_line_content": "        addReply(c,shared.queued);",
          "new_line_content": "        queueMultiCommand(c);",
          "content_same": false
        },
        {
          "line": 3697,
          "old_api": "handleClientsBlockedOnKeys",
          "new_api": "listLength",
          "old_text": "handleClientsBlockedOnKeys()",
          "new_text": "listLength(server.ready_keys)",
          "old_line_content": "            handleClientsBlockedOnKeys();",
          "new_line_content": "        if (listLength(server.ready_keys))",
          "content_same": false
        },
        {
          "line": 3716,
          "old_api": "unlink",
          "new_api": "serverLog",
          "old_text": "unlink(server.unixsocket)",
          "new_text": "serverLog(LL_NOTICE,\"Removing the unix socket file.\")",
          "old_line_content": "        unlink(server.unixsocket); /* don't care if this fails */",
          "new_line_content": "        serverLog(LL_NOTICE,\"Removing the unix socket file.\");",
          "content_same": false
        },
        {
          "line": 3745,
          "old_api": "killRDBChild",
          "new_api": "serverLog",
          "old_text": "killRDBChild()",
          "new_text": "serverLog(LL_WARNING,\"There is a child saving an .rdb. Killing it!\")",
          "old_line_content": "        killRDBChild();",
          "new_line_content": "        serverLog(LL_WARNING,\"There is a child saving an .rdb. Killing it!\");",
          "content_same": false
        },
        {
          "line": 3751,
          "old_api": "TerminateModuleForkChild",
          "new_api": "serverLog",
          "old_text": "TerminateModuleForkChild(server.module_child_pid,0)",
          "new_text": "serverLog(LL_WARNING,\"There is a module fork child. Killing it!\")",
          "old_line_content": "        TerminateModuleForkChild(server.module_child_pid,0);",
          "new_line_content": "        serverLog(LL_WARNING,\"There is a module fork child. Killing it!\");",
          "content_same": false
        },
        {
          "line": 3770,
          "old_api": "flushAppendOnlyFile",
          "new_api": "serverLog",
          "old_text": "flushAppendOnlyFile(1)",
          "new_text": "serverLog(LL_NOTICE,\"Calling fsync() on the AOF file.\")",
          "old_line_content": "        flushAppendOnlyFile(1);",
          "new_line_content": "        serverLog(LL_NOTICE,\"Calling fsync() on the AOF file.\");",
          "content_same": false
        },
        {
          "line": 3771,
          "old_api": "redis_fsync",
          "new_api": "flushAppendOnlyFile",
          "old_text": "redis_fsync(server.aof_fd)",
          "new_text": "flushAppendOnlyFile(1)",
          "old_line_content": "        redis_fsync(server.aof_fd);",
          "new_line_content": "        flushAppendOnlyFile(1);",
          "content_same": false
        },
        {
          "line": 3782,
          "old_api": "rdbSave",
          "new_api": "rdbPopulateSaveInfo",
          "old_text": "rdbSave(server.rdb_filename,rsiptr)",
          "new_text": "rdbPopulateSaveInfo(&rsi)",
          "old_line_content": "        if (rdbSave(server.rdb_filename,rsiptr) != C_OK) {",
          "new_line_content": "        rsiptr = rdbPopulateSaveInfo(&rsi);",
          "content_same": false
        },
        {
          "line": 3801,
          "old_api": "unlink",
          "new_api": "serverLog",
          "old_text": "unlink(server.pidfile)",
          "new_text": "serverLog(LL_NOTICE,\"Removing the pid file.\")",
          "old_line_content": "        unlink(server.pidfile);",
          "new_line_content": "        serverLog(LL_NOTICE,\"Removing the pid file.\");",
          "content_same": false
        },
        {
          "line": 3810,
          "old_api": "serverLog",
          "new_api": "closeListeningSockets",
          "old_text": "serverLog(LL_WARNING,\"%s is now ready to exit, bye bye...\",\n        server.sentinel_mode ? \"Sentinel\" : \"Redis\")",
          "new_text": "closeListeningSockets(1)",
          "old_line_content": "    serverLog(LL_WARNING,\"%s is now ready to exit, bye bye...\",",
          "new_line_content": "    closeListeningSockets(1);",
          "content_same": false
        },
        {
          "line": 3855,
          "old_api": "addReplyBulkCBuffer",
          "new_api": "addReply",
          "old_text": "addReplyBulkCBuffer(c,\"pong\",4)",
          "new_text": "addReply(c,shared.mbulkhdr[2])",
          "old_line_content": "        addReplyBulkCBuffer(c,\"pong\",4);",
          "new_line_content": "        addReply(c,shared.mbulkhdr[2]);",
          "content_same": false
        },
        {
          "line": 3878,
          "old_api": "addReplyArrayLen",
          "new_api": "gettimeofday",
          "old_text": "addReplyArrayLen(c,2)",
          "new_text": "gettimeofday(&tv,NULL)",
          "old_line_content": "    addReplyArrayLen(c,2);",
          "new_line_content": "    gettimeofday(&tv,NULL);",
          "content_same": false
        },
        {
          "line": 3879,
          "old_api": "addReplyBulkLongLong",
          "new_api": "addReplyArrayLen",
          "old_text": "addReplyBulkLongLong(c,tv.tv_sec)",
          "new_text": "addReplyArrayLen(c,2)",
          "old_line_content": "    addReplyBulkLongLong(c,tv.tv_sec);",
          "new_line_content": "    addReplyArrayLen(c,2);",
          "content_same": false
        },
        {
          "line": 3899,
          "old_api": "addReplyBulkCString",
          "new_api": "addReplyArrayLen",
          "old_text": "addReplyBulkCString(c, cmd->name)",
          "new_text": "addReplyArrayLen(c, 7)",
          "old_line_content": "        addReplyBulkCString(c, cmd->name);",
          "new_line_content": "        addReplyArrayLen(c, 7);",
          "content_same": false
        },
        {
          "line": 3900,
          "old_api": "addReplyLongLong",
          "new_api": "addReplyBulkCString",
          "old_text": "addReplyLongLong(c, cmd->arity)",
          "new_text": "addReplyBulkCString(c, cmd->name)",
          "old_line_content": "        addReplyLongLong(c, cmd->arity);",
          "new_line_content": "        addReplyBulkCString(c, cmd->name);",
          "content_same": false
        },
        {
          "line": 3904,
          "old_api": "addReplyCommandFlag",
          "new_api": "addReplyDeferredLen",
          "old_text": "addReplyCommandFlag(c,cmd,CMD_WRITE, \"write\")",
          "new_text": "addReplyDeferredLen(c)",
          "old_line_content": "        flagcount += addReplyCommandFlag(c,cmd,CMD_WRITE, \"write\");",
          "new_line_content": "        void *flaglen = addReplyDeferredLen(c);",
          "content_same": false
        },
        {
          "line": 3919,
          "old_api": "cmdHasMovableKeys",
          "new_api": "addReplyCommandFlag",
          "old_text": "cmdHasMovableKeys(cmd)",
          "new_text": "addReplyCommandFlag(c,cmd,CMD_NO_AUTH, \"no_auth\")",
          "old_line_content": "        if (cmdHasMovableKeys(cmd)) {",
          "new_line_content": "        flagcount += addReplyCommandFlag(c,cmd,CMD_NO_AUTH, \"no_auth\");",
          "content_same": false
        },
        {
          "line": 3920,
          "old_api": "addReplyStatus",
          "new_api": "cmdHasMovableKeys",
          "old_text": "addReplyStatus(c, \"movablekeys\")",
          "new_text": "cmdHasMovableKeys(cmd)",
          "old_line_content": "            addReplyStatus(c, \"movablekeys\");",
          "new_line_content": "        if (cmdHasMovableKeys(cmd)) {",
          "content_same": false
        },
        {
          "line": 3949,
          "old_api": "dictGetIterator",
          "new_api": "dictSize",
          "old_text": "dictGetIterator(server.commands)",
          "new_text": "dictSize(server.commands)",
          "old_line_content": "        di = dictGetIterator(server.commands);",
          "new_line_content": "        addReplyArrayLen(c, dictSize(server.commands));",
          "content_same": false
        },
        {
          "line": 3950,
          "old_api": "dictNext",
          "new_api": "dictGetIterator",
          "old_text": "dictNext(di)",
          "new_text": "dictGetIterator(server.commands)",
          "old_line_content": "        while ((de = dictNext(di)) != NULL) {",
          "new_line_content": "        di = dictGetIterator(server.commands);",
          "content_same": false
        },
        {
          "line": 3951,
          "old_api": "dictGetVal",
          "new_api": "dictNext",
          "old_text": "dictGetVal(de)",
          "new_text": "dictNext(di)",
          "old_line_content": "            addReplyCommand(c, dictGetVal(de));",
          "new_line_content": "        while ((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 3954,
          "old_api": "strcasecmp",
          "new_api": "dictReleaseIterator",
          "old_text": "strcasecmp(c->argv[1]->ptr, \"info\")",
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr, \"info\")) {",
          "new_line_content": "        dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 3961,
          "old_api": "dictSize",
          "new_api": "strcasecmp",
          "old_text": "dictSize(server.commands)",
          "new_text": "strcasecmp(c->argv[1]->ptr, \"count\")",
          "old_line_content": "        addReplyLongLong(c, dictSize(server.commands));",
          "new_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr, \"count\") && c->argc == 2) {",
          "content_same": false
        },
        {
          "line": 3962,
          "old_api": "strcasecmp",
          "new_api": "dictSize",
          "old_text": "strcasecmp(c->argv[1]->ptr,\"getkeys\")",
          "new_text": "dictSize(server.commands)",
          "old_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr,\"getkeys\") && c->argc >= 3) {",
          "new_line_content": "        addReplyLongLong(c, dictSize(server.commands));",
          "content_same": false
        },
        {
          "line": 3963,
          "old_api": "lookupCommand",
          "new_api": "strcasecmp",
          "old_text": "lookupCommand(c->argv[2]->ptr)",
          "new_text": "strcasecmp(c->argv[1]->ptr,\"getkeys\")",
          "old_line_content": "        struct redisCommand *cmd = lookupCommand(c->argv[2]->ptr);",
          "new_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr,\"getkeys\") && c->argc >= 3) {",
          "content_same": false
        },
        {
          "line": 3984,
          "old_api": "addReplyBulk",
          "new_api": "addReplyArrayLen",
          "old_text": "addReplyBulk(c,c->argv[keys[j]+2])",
          "new_text": "addReplyArrayLen(c,numkeys)",
          "old_line_content": "            for (j = 0; j < numkeys; j++) addReplyBulk(c,c->argv[keys[j]+2]);",
          "new_line_content": "            addReplyArrayLen(c,numkeys);",
          "content_same": false
        },
        {
          "line": 3985,
          "old_api": "getKeysFreeResult",
          "new_api": "addReplyBulk",
          "old_text": "getKeysFreeResult(keys)",
          "new_text": "addReplyBulk(c,c->argv[keys[j]+2])",
          "old_line_content": "            getKeysFreeResult(keys);",
          "new_line_content": "            for (j = 0; j < numkeys; j++) addReplyBulk(c,c->argv[keys[j]+2]);",
          "content_same": false
        },
        {
          "line": 4085,
          "old_api": "redisGitDirty",
          "new_api": "redisGitSHA1",
          "old_text": "redisGitDirty()",
          "new_text": "redisGitSHA1()",
          "old_line_content": "            strtol(redisGitDirty(),NULL,10) > 0,",
          "new_line_content": "            redisGitSHA1(),",
          "content_same": false
        },
        {
          "line": 4086,
          "old_api": "redisBuildIdString",
          "new_api": "redisGitDirty",
          "old_text": "redisBuildIdString()",
          "new_text": "redisGitDirty()",
          "old_line_content": "            redisBuildIdString(),",
          "new_line_content": "            strtol(redisGitDirty(),NULL,10) > 0,",
          "content_same": false
        },
        {
          "line": 4114,
          "old_api": "sdscat",
          "new_api": "getExpansiveClientsInfo",
          "old_text": "sdscat(info,\"\\r\\n\")",
          "new_text": "getExpansiveClientsInfo(&maxin,&maxout)",
          "old_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "new_line_content": "        getExpansiveClientsInfo(&maxin,&maxout);",
          "content_same": false
        },
        {
          "line": 4115,
          "old_api": "sdscatprintf",
          "new_api": "sdscat",
          "old_text": "sdscatprintf(info,\n            \"# Clients\\r\\n\"\n            \"connected_clients:%lu\\r\\n\"\n            \"client_recent_max_input_buffer:%zu\\r\\n\"\n            \"client_recent_max_output_buffer:%zu\\r\\n\"\n            \"blocked_clients:%d\\r\\n\"\n            \"tracking_clients:%d\\r\\n\"\n            \"clients_in_timeout_table:%llu\\r\\n\",\n            listLength(server.clients)-listLength(server.slaves),\n            maxin, maxout,\n            server.blocked_clients,\n            server.tracking_clients,\n            (unsigned long long) raxSize(server.clients_timeout_table))",
          "new_text": "sdscat(info,\"\\r\\n\")",
          "old_line_content": "        info = sdscatprintf(info,",
          "new_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 4142,
          "old_api": "lua_gc",
          "new_api": "evictPolicyToString",
          "old_text": "lua_gc(server.lua,LUA_GCCOUNT,0)",
          "new_text": "evictPolicyToString()",
          "old_line_content": "        long long memory_lua = server.lua ? (long long)lua_gc(server.lua,LUA_GCCOUNT,0)*1024 : 0;",
          "new_line_content": "        const char *evict_policy = evictPolicyToString();",
          "content_same": false
        },
        {
          "line": 4143,
          "old_api": "getMemoryOverheadData",
          "new_api": "lua_gc",
          "old_text": "getMemoryOverheadData()",
          "new_text": "lua_gc(server.lua,LUA_GCCOUNT,0)",
          "old_line_content": "        struct redisMemOverhead *mh = getMemoryOverheadData();",
          "new_line_content": "        long long memory_lua = server.lua ? (long long)lua_gc(server.lua,LUA_GCCOUNT,0)*1024 : 0;",
          "content_same": false
        },
        {
          "line": 4161,
          "old_api": "sdscatprintf",
          "new_api": "sdscat",
          "old_text": "sdscatprintf(info,\n            \"# Memory\\r\\n\"\n            \"used_memory:%zu\\r\\n\"\n            \"used_memory_human:%s\\r\\n\"\n            \"used_memory_rss:%zu\\r\\n\"\n            \"used_memory_rss_human:%s\\r\\n\"\n            \"used_memory_peak:%zu\\r\\n\"\n            \"used_memory_peak_human:%s\\r\\n\"\n            \"used_memory_peak_perc:%.2f%%\\r\\n\"\n            \"used_memory_overhead:%zu\\r\\n\"\n            \"used_memory_startup:%zu\\r\\n\"\n            \"used_memory_dataset:%zu\\r\\n\"\n            \"used_memory_dataset_perc:%.2f%%\\r\\n\"\n            \"allocator_allocated:%zu\\r\\n\"\n            \"allocator_active:%zu\\r\\n\"\n            \"allocator_resident:%zu\\r\\n\"\n            \"total_system_memory:%lu\\r\\n\"\n            \"total_system_memory_human:%s\\r\\n\"\n            \"used_memory_lua:%lld\\r\\n\"\n            \"used_memory_lua_human:%s\\r\\n\"\n            \"used_memory_scripts:%lld\\r\\n\"\n            \"used_memory_scripts_human:%s\\r\\n\"\n            \"number_of_cached_scripts:%lu\\r\\n\"\n            \"maxmemory:%lld\\r\\n\"\n            \"maxmemory_human:%s\\r\\n\"\n            \"maxmemory_policy:%s\\r\\n\"\n            \"allocator_frag_ratio:%.2f\\r\\n\"\n            \"allocator_frag_bytes:%zu\\r\\n\"\n            \"allocator_rss_ratio:%.2f\\r\\n\"\n            \"allocator_rss_bytes:%zd\\r\\n\"\n            \"rss_overhead_ratio:%.2f\\r\\n\"\n            \"rss_overhead_bytes:%zd\\r\\n\"\n            \"mem_fragmentation_ratio:%.2f\\r\\n\"\n            \"mem_fragmentation_bytes:%zd\\r\\n\"\n            \"mem_not_counted_for_evict:%zu\\r\\n\"\n            \"mem_replication_backlog:%zu\\r\\n\"\n            \"mem_clients_slaves:%zu\\r\\n\"\n            \"mem_clients_normal:%zu\\r\\n\"\n            \"mem_aof_buffer:%zu\\r\\n\"\n            \"mem_allocator:%s\\r\\n\"\n            \"active_defrag_running:%d\\r\\n\"\n            \"lazyfree_pending_objects:%zu\\r\\n\",\n            zmalloc_used,\n            hmem,\n            server.cron_malloc_stats.process_rss,\n            used_memory_rss_hmem,\n            server.stat_peak_memory,\n            peak_hmem,\n            mh->peak_perc,\n            mh->overhead_total,\n            mh->startup_allocated,\n            mh->dataset,\n            mh->dataset_perc,\n            server.cron_malloc_stats.allocator_allocated,\n            server.cron_malloc_stats.allocator_active,\n            server.cron_malloc_stats.allocator_resident,\n            (unsigned long)total_system_mem,\n            total_system_hmem,\n            memory_lua,\n            used_memory_lua_hmem,\n            (long long) mh->lua_caches,\n            used_memory_scripts_hmem,\n            dictSize(server.lua_scripts),\n            server.maxmemory,\n            maxmemory_hmem,\n            evict_policy,\n            mh->allocator_frag,\n            mh->allocator_frag_bytes,\n            mh->allocator_rss,\n            mh->allocator_rss_bytes,\n            mh->rss_extra,\n            mh->rss_extra_bytes,\n            mh->total_frag,       /* This is the total RSS overhead, including\n                                     fragmentation, but not just it. This field\n                                     (and the next one) is named like that just\n                                     for backward compatibility. */\n            mh->total_frag_bytes,\n            freeMemoryGetNotCountedMemory(),\n            mh->repl_backlog,\n            mh->clients_slaves,\n            mh->clients_normal,\n            mh->aof_buffer,\n            ZMALLOC_LIB,\n            server.active_defrag_running,\n            lazyfreeGetPendingObjectsCount()\n        )",
          "new_text": "sdscat(info,\"\\r\\n\")",
          "old_line_content": "        info = sdscatprintf(info,",
          "new_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 4252,
          "old_api": "sdscat",
          "new_api": "strcasecmp",
          "old_text": "sdscat(info,\"\\r\\n\")",
          "new_text": "strcasecmp(section,\"persistence\")",
          "old_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "new_line_content": "    if (allsections || defsections || !strcasecmp(section,\"persistence\")) {",
          "content_same": false
        },
        {
          "line": 4253,
          "old_api": "sdscatprintf",
          "new_api": "sdscat",
          "old_text": "sdscatprintf(info,\n            \"# Persistence\\r\\n\"\n            \"loading:%d\\r\\n\"\n            \"rdb_changes_since_last_save:%lld\\r\\n\"\n            \"rdb_bgsave_in_progress:%d\\r\\n\"\n            \"rdb_last_save_time:%jd\\r\\n\"\n            \"rdb_last_bgsave_status:%s\\r\\n\"\n            \"rdb_last_bgsave_time_sec:%jd\\r\\n\"\n            \"rdb_current_bgsave_time_sec:%jd\\r\\n\"\n            \"rdb_last_cow_size:%zu\\r\\n\"\n            \"aof_enabled:%d\\r\\n\"\n            \"aof_rewrite_in_progress:%d\\r\\n\"\n            \"aof_rewrite_scheduled:%d\\r\\n\"\n            \"aof_last_rewrite_time_sec:%jd\\r\\n\"\n            \"aof_current_rewrite_time_sec:%jd\\r\\n\"\n            \"aof_last_bgrewrite_status:%s\\r\\n\"\n            \"aof_last_write_status:%s\\r\\n\"\n            \"aof_last_cow_size:%zu\\r\\n\"\n            \"module_fork_in_progress:%d\\r\\n\"\n            \"module_fork_last_cow_size:%zu\\r\\n\",\n            server.loading,\n            server.dirty,\n            server.rdb_child_pid != -1,\n            (intmax_t)server.lastsave,\n            (server.lastbgsave_status == C_OK) ? \"ok\" : \"err\",\n            (intmax_t)server.rdb_save_time_last,\n            (intmax_t)((server.rdb_child_pid == -1) ?\n                -1 : time(NULL)-server.rdb_save_time_start),\n            server.stat_rdb_cow_bytes,\n            server.aof_state != AOF_OFF,\n            server.aof_child_pid != -1,\n            server.aof_rewrite_scheduled,\n            (intmax_t)server.aof_rewrite_time_last,\n            (intmax_t)((server.aof_child_pid == -1) ?\n                -1 : time(NULL)-server.aof_rewrite_time_start),\n            (server.aof_lastbgrewrite_status == C_OK) ? \"ok\" : \"err\",\n            (server.aof_last_write_status == C_OK) ? \"ok\" : \"err\",\n            server.stat_aof_cow_bytes,\n            server.module_child_pid != -1,\n            server.stat_module_cow_bytes)",
          "new_text": "sdscat(info,\"\\r\\n\")",
          "old_line_content": "        info = sdscatprintf(info,",
          "new_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 4280,
          "old_api": "time",
          "new_api": "intmax_t)((server.rdb_child_pid == -1) ?\n                -1 : time(NULL)-server.rdb_save_time_start)",
          "old_text": "time(NULL)",
          "new_text": "intmax_t)((server.rdb_child_pid == -1) ?\n                -1 : time(NULL)-server.rdb_save_time_start)",
          "old_line_content": "                -1 : time(NULL)-server.rdb_save_time_start),",
          "new_line_content": "            (intmax_t)((server.rdb_child_pid == -1) ?",
          "content_same": false
        },
        {
          "line": 4287,
          "old_api": "time",
          "new_api": "intmax_t)((server.aof_child_pid == -1) ?\n                -1 : time(NULL)-server.aof_rewrite_time_start)",
          "old_text": "time(NULL)",
          "new_text": "intmax_t)((server.aof_child_pid == -1) ?\n                -1 : time(NULL)-server.aof_rewrite_time_start)",
          "old_line_content": "                -1 : time(NULL)-server.aof_rewrite_time_start),",
          "new_line_content": "            (intmax_t)((server.aof_child_pid == -1) ?",
          "content_same": false
        },
        {
          "line": 4307,
          "old_api": "aofRewriteBufferSize",
          "new_api": "sdslen",
          "old_text": "aofRewriteBufferSize()",
          "new_text": "sdslen(server.aof_buf)",
          "old_line_content": "                aofRewriteBufferSize(),",
          "new_line_content": "                sdslen(server.aof_buf),",
          "content_same": false
        },
        {
          "line": 4308,
          "old_api": "bioPendingJobsOfType",
          "new_api": "aofRewriteBufferSize",
          "old_text": "bioPendingJobsOfType(BIO_AOF_FSYNC)",
          "new_text": "aofRewriteBufferSize()",
          "old_line_content": "                bioPendingJobsOfType(BIO_AOF_FSYNC),",
          "new_line_content": "                aofRewriteBufferSize(),",
          "content_same": false
        },
        {
          "line": 4346,
          "old_api": "sdscat",
          "new_api": "strcasecmp",
          "old_text": "sdscat(info,\"\\r\\n\")",
          "new_text": "strcasecmp(section,\"stats\")",
          "old_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "new_line_content": "    if (allsections || defsections || !strcasecmp(section,\"stats\")) {",
          "content_same": false
        },
        {
          "line": 4347,
          "old_api": "sdscatprintf",
          "new_api": "sdscat",
          "old_text": "sdscatprintf(info,\n            \"# Stats\\r\\n\"\n            \"total_connections_received:%lld\\r\\n\"\n            \"total_commands_processed:%lld\\r\\n\"\n            \"instantaneous_ops_per_sec:%lld\\r\\n\"\n            \"total_net_input_bytes:%lld\\r\\n\"\n            \"total_net_output_bytes:%lld\\r\\n\"\n            \"instantaneous_input_kbps:%.2f\\r\\n\"\n            \"instantaneous_output_kbps:%.2f\\r\\n\"\n            \"rejected_connections:%lld\\r\\n\"\n            \"sync_full:%lld\\r\\n\"\n            \"sync_partial_ok:%lld\\r\\n\"\n            \"sync_partial_err:%lld\\r\\n\"\n            \"expired_keys:%lld\\r\\n\"\n            \"expired_stale_perc:%.2f\\r\\n\"\n            \"expired_time_cap_reached_count:%lld\\r\\n\"\n            \"expire_cycle_cpu_milliseconds:%lld\\r\\n\"\n            \"evicted_keys:%lld\\r\\n\"\n            \"keyspace_hits:%lld\\r\\n\"\n            \"keyspace_misses:%lld\\r\\n\"\n            \"pubsub_channels:%ld\\r\\n\"\n            \"pubsub_patterns:%lu\\r\\n\"\n            \"latest_fork_usec:%lld\\r\\n\"\n            \"migrate_cached_sockets:%ld\\r\\n\"\n            \"slave_expires_tracked_keys:%zu\\r\\n\"\n            \"active_defrag_hits:%lld\\r\\n\"\n            \"active_defrag_misses:%lld\\r\\n\"\n            \"active_defrag_key_hits:%lld\\r\\n\"\n            \"active_defrag_key_misses:%lld\\r\\n\"\n            \"tracking_total_keys:%lld\\r\\n\"\n            \"tracking_total_items:%lld\\r\\n\"\n            \"tracking_total_prefixes:%lld\\r\\n\"\n            \"unexpected_error_replies:%lld\\r\\n\"\n            \"total_reads_processed:%lld\\r\\n\"\n            \"total_writes_processed:%lld\\r\\n\"\n            \"io_threaded_reads_processed:%lld\\r\\n\"\n            \"io_threaded_writes_processed:%lld\\r\\n\",\n            server.stat_numconnections,\n            server.stat_numcommands,\n            getInstantaneousMetric(STATS_METRIC_COMMAND),\n            server.stat_net_input_bytes,\n            server.stat_net_output_bytes,\n            (float)getInstantaneousMetric(STATS_METRIC_NET_INPUT)/1024,\n            (float)getInstantaneousMetric(STATS_METRIC_NET_OUTPUT)/1024,\n            server.stat_rejected_conn,\n            server.stat_sync_full,\n            server.stat_sync_partial_ok,\n            server.stat_sync_partial_err,\n            server.stat_expiredkeys,\n            server.stat_expired_stale_perc*100,\n            server.stat_expired_time_cap_reached_count,\n            server.stat_expire_cycle_time_used/1000,\n            server.stat_evictedkeys,\n            server.stat_keyspace_hits,\n            server.stat_keyspace_misses,\n            dictSize(server.pubsub_channels),\n            listLength(server.pubsub_patterns),\n            server.stat_fork_time,\n            dictSize(server.migrate_cached_sockets),\n            getSlaveKeyWithExpireCount(),\n            server.stat_active_defrag_hits,\n            server.stat_active_defrag_misses,\n            server.stat_active_defrag_key_hits,\n            server.stat_active_defrag_key_misses,\n            (unsigned long long) trackingGetTotalKeys(),\n            (unsigned long long) trackingGetTotalItems(),\n            (unsigned long long) trackingGetTotalPrefixes(),\n            server.stat_unexpected_error_replies,\n            server.stat_total_reads_processed,\n            server.stat_total_writes_processed,\n            server.stat_io_reads_processed,\n            server.stat_io_writes_processed)",
          "new_text": "sdscat(info,\"\\r\\n\")",
          "old_line_content": "        info = sdscatprintf(info,",
          "new_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 4403,
          "old_api": "listLength",
          "new_api": "dictSize",
          "old_text": "listLength(server.pubsub_patterns)",
          "new_text": "dictSize(server.pubsub_channels)",
          "old_line_content": "            listLength(server.pubsub_patterns),",
          "new_line_content": "            dictSize(server.pubsub_channels),",
          "content_same": false
        },
        {
          "line": 4406,
          "old_api": "getSlaveKeyWithExpireCount",
          "new_api": "dictSize",
          "old_text": "getSlaveKeyWithExpireCount()",
          "new_text": "dictSize(server.migrate_cached_sockets)",
          "old_line_content": "            getSlaveKeyWithExpireCount(),",
          "new_line_content": "            dictSize(server.migrate_cached_sockets),",
          "content_same": false
        },
        {
          "line": 4412,
          "old_api": "trackingGetTotalItems",
          "new_api": "trackingGetTotalKeys",
          "old_text": "trackingGetTotalItems()",
          "new_text": "trackingGetTotalKeys()",
          "old_line_content": "            (unsigned long long) trackingGetTotalItems(),",
          "new_line_content": "            (unsigned long long) trackingGetTotalKeys(),",
          "content_same": false
        },
        {
          "line": 4413,
          "old_api": "trackingGetTotalPrefixes",
          "new_api": "trackingGetTotalItems",
          "old_text": "trackingGetTotalPrefixes()",
          "new_text": "trackingGetTotalItems()",
          "old_line_content": "            (unsigned long long) trackingGetTotalPrefixes(),",
          "new_line_content": "            (unsigned long long) trackingGetTotalItems(),",
          "content_same": false
        },
        {
          "line": 4423,
          "old_api": "sdscat",
          "new_api": "strcasecmp",
          "old_text": "sdscat(info,\"\\r\\n\")",
          "new_text": "strcasecmp(section,\"replication\")",
          "old_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "new_line_content": "    if (allsections || defsections || !strcasecmp(section,\"replication\")) {",
          "content_same": false
        },
        {
          "line": 4424,
          "old_api": "sdscatprintf",
          "new_api": "sdscat",
          "old_text": "sdscatprintf(info,\n            \"# Replication\\r\\n\"\n            \"role:%s\\r\\n\",\n            server.masterhost == NULL ? \"master\" : \"slave\")",
          "new_text": "sdscat(info,\"\\r\\n\")",
          "old_line_content": "        info = sdscatprintf(info,",
          "new_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 4494,
          "old_api": "listNext",
          "new_api": "listRewind",
          "old_text": "listNext(&li)",
          "new_text": "listRewind(server.slaves,&li)",
          "old_line_content": "            while((ln = listNext(&li))) {",
          "new_line_content": "            listRewind(server.slaves,&li);",
          "content_same": false
        },
        {
          "line": 4495,
          "old_api": "listNodeValue",
          "new_api": "listNext",
          "old_text": "listNodeValue(ln)",
          "new_text": "listNext(&li)",
          "old_line_content": "                client *slave = listNodeValue(ln);",
          "new_line_content": "            while((ln = listNext(&li))) {",
          "content_same": false
        },
        {
          "line": 4551,
          "old_api": "sdscat",
          "new_api": "strcasecmp",
          "old_text": "sdscat(info,\"\\r\\n\")",
          "new_text": "strcasecmp(section,\"cpu\")",
          "old_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "new_line_content": "    if (allsections || defsections || !strcasecmp(section,\"cpu\")) {",
          "content_same": false
        },
        {
          "line": 4552,
          "old_api": "sdscatprintf",
          "new_api": "sdscat",
          "old_text": "sdscatprintf(info,\n        \"# CPU\\r\\n\"\n        \"used_cpu_sys:%ld.%06ld\\r\\n\"\n        \"used_cpu_user:%ld.%06ld\\r\\n\"\n        \"used_cpu_sys_children:%ld.%06ld\\r\\n\"\n        \"used_cpu_user_children:%ld.%06ld\\r\\n\",\n        (long)self_ru.ru_stime.tv_sec, (long)self_ru.ru_stime.tv_usec,\n        (long)self_ru.ru_utime.tv_sec, (long)self_ru.ru_utime.tv_usec,\n        (long)c_ru.ru_stime.tv_sec, (long)c_ru.ru_stime.tv_usec,\n        (long)c_ru.ru_utime.tv_sec, (long)c_ru.ru_utime.tv_usec)",
          "new_text": "sdscat(info,\"\\r\\n\")",
          "old_line_content": "        info = sdscatprintf(info,",
          "new_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 4566,
          "old_api": "sdscat",
          "new_api": "strcasecmp",
          "old_text": "sdscat(info,\"\\r\\n\")",
          "new_text": "strcasecmp(section,\"modules\")",
          "old_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "new_line_content": "    if (allsections || defsections || !strcasecmp(section,\"modules\")) {",
          "content_same": false
        },
        {
          "line": 4567,
          "old_api": "sdscatprintf",
          "new_api": "sdscat",
          "old_text": "sdscatprintf(info,\"# Modules\\r\\n\")",
          "new_text": "sdscat(info,\"\\r\\n\")",
          "old_line_content": "        info = sdscatprintf(info,\"# Modules\\r\\n\");",
          "new_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 4568,
          "old_api": "genModulesInfoString",
          "new_api": "sdscatprintf",
          "old_text": "genModulesInfoString(info)",
          "new_text": "sdscatprintf(info,\"# Modules\\r\\n\")",
          "old_line_content": "        info = genModulesInfoString(info);",
          "new_line_content": "        info = sdscatprintf(info,\"# Modules\\r\\n\");",
          "content_same": false
        },
        {
          "line": 4573,
          "old_api": "sdscat",
          "new_api": "strcasecmp",
          "old_text": "sdscat(info,\"\\r\\n\")",
          "new_text": "strcasecmp(section,\"commandstats\")",
          "old_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "new_line_content": "    if (allsections || !strcasecmp(section,\"commandstats\")) {",
          "content_same": false
        },
        {
          "line": 4574,
          "old_api": "sdscatprintf",
          "new_api": "sdscat",
          "old_text": "sdscatprintf(info, \"# Commandstats\\r\\n\")",
          "new_text": "sdscat(info,\"\\r\\n\")",
          "old_line_content": "        info = sdscatprintf(info, \"# Commandstats\\r\\n\");",
          "new_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 4580,
          "old_api": "dictNext",
          "new_api": "dictGetSafeIterator",
          "old_text": "dictNext(di)",
          "new_text": "dictGetSafeIterator(server.commands)",
          "old_line_content": "        while((de = dictNext(di)) != NULL) {",
          "new_line_content": "        di = dictGetSafeIterator(server.commands);",
          "content_same": false
        },
        {
          "line": 4581,
          "old_api": "dictGetVal",
          "new_api": "dictNext",
          "old_text": "dictGetVal(de)",
          "new_text": "dictNext(di)",
          "old_line_content": "            c = (struct redisCommand *) dictGetVal(de);",
          "new_line_content": "        while((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 4593,
          "old_api": "sdscat",
          "new_api": "strcasecmp",
          "old_text": "sdscat(info,\"\\r\\n\")",
          "new_text": "strcasecmp(section,\"cluster\")",
          "old_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "new_line_content": "    if (allsections || defsections || !strcasecmp(section,\"cluster\")) {",
          "content_same": false
        },
        {
          "line": 4594,
          "old_api": "sdscatprintf",
          "new_api": "sdscat",
          "old_text": "sdscatprintf(info,\n        \"# Cluster\\r\\n\"\n        \"cluster_enabled:%d\\r\\n\",\n        server.cluster_enabled)",
          "new_text": "sdscat(info,\"\\r\\n\")",
          "old_line_content": "        info = sdscatprintf(info,",
          "new_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 4602,
          "old_api": "sdscat",
          "new_api": "strcasecmp",
          "old_text": "sdscat(info,\"\\r\\n\")",
          "new_text": "strcasecmp(section,\"keyspace\")",
          "old_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "new_line_content": "    if (allsections || defsections || !strcasecmp(section,\"keyspace\")) {",
          "content_same": false
        },
        {
          "line": 4603,
          "old_api": "sdscatprintf",
          "new_api": "sdscat",
          "old_text": "sdscatprintf(info, \"# Keyspace\\r\\n\")",
          "new_text": "sdscat(info,\"\\r\\n\")",
          "old_line_content": "        info = sdscatprintf(info, \"# Keyspace\\r\\n\");",
          "new_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 4638,
          "old_api": "sdslen",
          "new_api": "genRedisInfoString",
          "old_text": "sdslen(info)",
          "new_text": "genRedisInfoString(section)",
          "old_line_content": "    addReplyVerbatim(c,info,sdslen(info),\"txt\");",
          "new_line_content": "    sds info = genRedisInfoString(section);",
          "content_same": false
        },
        {
          "line": 4639,
          "old_api": "sdsfree",
          "new_api": "sdslen",
          "old_text": "sdsfree(info)",
          "new_text": "sdslen(info)",
          "old_line_content": "    sdsfree(info);",
          "new_line_content": "    addReplyVerbatim(c,info,sdslen(info),\"txt\");",
          "content_same": false
        },
        {
          "line": 4648,
          "old_api": "addReply",
          "new_api": "listAddNodeTail",
          "old_text": "addReply(c,shared.ok)",
          "new_text": "listAddNodeTail(server.monitors,c)",
          "old_line_content": "    addReply(c,shared.ok);",
          "new_line_content": "    listAddNodeTail(server.monitors,c);",
          "content_same": false
        },
        {
          "line": 4660,
          "old_api": "fclose",
          "new_api": "fgets",
          "old_text": "fclose(fp)",
          "new_text": "fgets(buf,64,fp)",
          "old_line_content": "        fclose(fp);",
          "new_line_content": "    if (fgets(buf,64,fp) == NULL) {",
          "content_same": false
        },
        {
          "line": 4670,
          "old_api": "serverLog",
          "new_api": "linuxOvercommitMemoryValue",
          "old_text": "serverLog(LL_WARNING,\"WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.\")",
          "new_text": "linuxOvercommitMemoryValue()",
          "old_line_content": "        serverLog(LL_WARNING,\"WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.\");",
          "new_line_content": "    if (linuxOvercommitMemoryValue() == 0) {",
          "content_same": false
        },
        {
          "line": 4673,
          "old_api": "serverLog",
          "new_api": "THPIsEnabled",
          "old_text": "serverLog(LL_WARNING,\"WARNING you have Transparent Huge Pages (THP) support enabled in your kernel. This will create latency and memory usage issues with Redis. To fix this issue run the command 'echo never > /sys/kernel/mm/transparent_hugepage/enabled' as root, and add it to your /etc/rc.local in order to retain the setting after a reboot. Redis must be restarted after THP is disabled.\")",
          "new_text": "THPIsEnabled()",
          "old_line_content": "        serverLog(LL_WARNING,\"WARNING you have Transparent Huge Pages (THP) support enabled in your kernel. This will create latency and memory usage issues with Redis. To fix this issue run the command 'echo never > /sys/kernel/mm/transparent_hugepage/enabled' as root, and add it to your /etc/rc.local in order to retain the setting after a reboot. Redis must be restarted after THP is disabled.\");",
          "new_line_content": "    if (THPIsEnabled()) {",
          "content_same": false
        },
        {
          "line": 4687,
          "old_api": "fclose",
          "new_api": "getpid",
          "old_text": "fclose(fp)",
          "new_text": "getpid()",
          "old_line_content": "        fclose(fp);",
          "new_line_content": "        fprintf(fp,\"%d\\n\",(int)getpid());",
          "content_same": false
        },
        {
          "line": 4695,
          "old_api": "setsid",
          "new_api": "exit",
          "old_text": "setsid()",
          "new_text": "exit(0)",
          "old_line_content": "    setsid(); /* create a new session */",
          "new_line_content": "    if (fork() != 0) exit(0); /* parent exits */",
          "content_same": false
        },
        {
          "line": 4701,
          "old_api": "dup2",
          "new_api": "open",
          "old_text": "dup2(fd, STDIN_FILENO)",
          "new_text": "open(\"/dev/null\", O_RDWR, 0)",
          "old_line_content": "        dup2(fd, STDIN_FILENO);",
          "new_line_content": "    if ((fd = open(\"/dev/null\", O_RDWR, 0)) != -1) {",
          "content_same": false
        },
        {
          "line": 4704,
          "old_api": "close",
          "new_api": "dup2",
          "old_text": "close(fd)",
          "new_text": "dup2(fd, STDERR_FILENO)",
          "old_line_content": "        if (fd > STDERR_FILENO) close(fd);",
          "new_line_content": "        dup2(fd, STDERR_FILENO);",
          "content_same": false
        },
        {
          "line": 4712,
          "old_api": "redisGitDirty",
          "new_api": "redisGitSHA1",
          "old_text": "redisGitDirty()",
          "new_text": "redisGitSHA1()",
          "old_line_content": "        atoi(redisGitDirty()) > 0,",
          "new_line_content": "        redisGitSHA1(),",
          "content_same": false
        },
        {
          "line": 4716,
          "old_api": "exit",
          "new_api": "redisBuildId",
          "old_text": "exit(0)",
          "new_text": "redisBuildId()",
          "old_line_content": "    exit(0);",
          "new_line_content": "        (unsigned long long) redisBuildId());",
          "content_same": false
        },
        {
          "line": 4733,
          "old_api": "exit",
          "new_api": "fprintf",
          "old_text": "exit(1)",
          "new_text": "fprintf(stderr,\"       ./redis-server /etc/sentinel.conf --sentinel\\n\")",
          "old_line_content": "    exit(1);",
          "new_line_content": "    fprintf(stderr,\"       ./redis-server /etc/sentinel.conf --sentinel\\n\");",
          "content_same": false
        },
        {
          "line": 4762,
          "old_api": "redisGitDirty",
          "new_api": "redisGitSHA1",
          "old_text": "redisGitDirty()",
          "new_text": "redisGitSHA1()",
          "old_line_content": "            strtol(redisGitDirty(),NULL,10) > 0,",
          "new_line_content": "            redisGitSHA1(),",
          "content_same": false
        },
        {
          "line": 4792,
          "old_api": "getpid",
          "new_api": "serverLogFromHandler",
          "old_text": "getpid()",
          "new_text": "serverLogFromHandler(LL_WARNING, \"You insist... exiting now.\")",
          "old_line_content": "        rdbRemoveTempFile(getpid());",
          "new_line_content": "        serverLogFromHandler(LL_WARNING, \"You insist... exiting now.\");",
          "content_same": false
        },
        {
          "line": 4793,
          "old_api": "exit",
          "new_api": "getpid",
          "old_text": "exit(1)",
          "new_text": "getpid()",
          "old_line_content": "        exit(1); /* Exit with an error since this was not a clean shutdown. */",
          "new_line_content": "        rdbRemoveTempFile(getpid());",
          "content_same": false
        },
        {
          "line": 4796,
          "old_api": "exit",
          "new_api": "serverLogFromHandler",
          "old_text": "exit(0)",
          "new_text": "serverLogFromHandler(LL_WARNING, \"Received shutdown signal during loading, exiting now.\")",
          "old_line_content": "        exit(0);",
          "new_line_content": "        serverLogFromHandler(LL_WARNING, \"Received shutdown signal during loading, exiting now.\");",
          "content_same": false
        },
        {
          "line": 4843,
          "old_api": "serverLogFromHandler",
          "new_api": "UNUSED",
          "old_text": "serverLogFromHandler(LL_WARNING, \"Received SIGUSR1 in child, exiting now.\")",
          "new_text": "UNUSED(sig)",
          "old_line_content": "    serverLogFromHandler(LL_WARNING, \"Received SIGUSR1 in child, exiting now.\");",
          "new_line_content": "    UNUSED(sig);",
          "content_same": false
        },
        {
          "line": 4844,
          "old_api": "exitFromChild",
          "new_api": "serverLogFromHandler",
          "old_text": "exitFromChild(SERVER_CHILD_NOERROR_RETVAL)",
          "new_text": "serverLogFromHandler(LL_WARNING, \"Received SIGUSR1 in child, exiting now.\")",
          "old_line_content": "    exitFromChild(SERVER_CHILD_NOERROR_RETVAL);",
          "new_line_content": "    serverLogFromHandler(LL_WARNING, \"Received SIGUSR1 in child, exiting now.\");",
          "content_same": false
        },
        {
          "line": 4862,
          "old_api": "fork",
          "new_api": "ustime",
          "old_text": "fork()",
          "new_text": "ustime()",
          "old_line_content": "    if ((childpid = fork()) == 0) {",
          "new_line_content": "    long long start = ustime();",
          "content_same": false
        },
        {
          "line": 4865,
          "old_api": "setupChildSignalHandlers",
          "new_api": "closeListeningSockets",
          "old_text": "setupChildSignalHandlers()",
          "new_text": "closeListeningSockets(0)",
          "old_line_content": "        setupChildSignalHandlers();",
          "new_line_content": "        closeListeningSockets(0);",
          "content_same": false
        },
        {
          "line": 4869,
          "old_api": "zmalloc_used_memory",
          "new_api": "ustime",
          "old_text": "zmalloc_used_memory()",
          "new_text": "ustime()",
          "old_line_content": "        server.stat_fork_rate = (double) zmalloc_used_memory() * 1000000 / server.stat_fork_time / (1024*1024*1024); /* GB per second. */",
          "new_line_content": "        server.stat_fork_time = ustime()-start;",
          "content_same": false
        },
        {
          "line": 4870,
          "old_api": "latencyAddSampleIfNeeded",
          "new_api": "zmalloc_used_memory",
          "old_text": "latencyAddSampleIfNeeded(\"fork\",server.stat_fork_time/1000)",
          "new_text": "zmalloc_used_memory()",
          "old_line_content": "        latencyAddSampleIfNeeded(\"fork\",server.stat_fork_time/1000);",
          "new_line_content": "        server.stat_fork_rate = (double) zmalloc_used_memory() * 1000000 / server.stat_fork_time / (1024*1024*1024); /* GB per second. */",
          "content_same": false
        },
        {
          "line": 4910,
          "old_api": "ustime",
          "new_api": "loadAppendOnlyFile",
          "old_text": "ustime()",
          "new_text": "loadAppendOnlyFile(server.aof_filename)",
          "old_line_content": "            serverLog(LL_NOTICE,\"DB loaded from append only file: %.3f seconds\",(float)(ustime()-start)/1000000);",
          "new_line_content": "        if (loadAppendOnlyFile(server.aof_filename) == C_OK)",
          "content_same": false
        },
        {
          "line": 4915,
          "old_api": "serverLog",
          "new_api": "rdbLoad",
          "old_text": "serverLog(LL_NOTICE,\"DB loaded from disk: %.3f seconds\",\n                (float)(ustime()-start)/1000000)",
          "new_text": "rdbLoad(server.rdb_filename,&rsi,RDBFLAGS_NONE)",
          "old_line_content": "            serverLog(LL_NOTICE,\"DB loaded from disk: %.3f seconds\",",
          "new_line_content": "        if (rdbLoad(server.rdb_filename,&rsi,RDBFLAGS_NONE) == C_OK) {",
          "content_same": false
        },
        {
          "line": 4916,
          "old_api": "ustime",
          "new_api": "serverLog",
          "old_text": "ustime()",
          "new_text": "serverLog(LL_NOTICE,\"DB loaded from disk: %.3f seconds\",\n                (float)(ustime()-start)/1000000)",
          "old_line_content": "                (float)(ustime()-start)/1000000);",
          "new_line_content": "            serverLog(LL_NOTICE,\"DB loaded from disk: %.3f seconds\",",
          "content_same": false
        },
        {
          "line": 4935,
          "old_api": "selectDb",
          "new_api": "replicationCacheMasterUsingMyself",
          "old_text": "selectDb(server.cached_master,rsi.repl_stream_db)",
          "new_text": "replicationCacheMasterUsingMyself()",
          "old_line_content": "                selectDb(server.cached_master,rsi.repl_stream_db);",
          "new_line_content": "                replicationCacheMasterUsingMyself();",
          "content_same": false
        },
        {
          "line": 4939,
          "old_api": "exit",
          "new_api": "strerror",
          "old_text": "exit(1)",
          "new_text": "strerror(errno)",
          "old_line_content": "            exit(1);",
          "new_line_content": "            serverLog(LL_WARNING,\"Fatal error loading the DB: %s. Exiting.\",strerror(errno));",
          "content_same": false
        },
        {
          "line": 4988,
          "old_api": "raise",
          "new_api": "serverLog",
          "old_text": "raise(SIGSTOP)",
          "new_text": "serverLog(LL_NOTICE, \"supervised by upstart, will stop to signal readiness\")",
          "old_line_content": "    raise(SIGSTOP);",
          "new_line_content": "    serverLog(LL_NOTICE, \"supervised by upstart, will stop to signal readiness\");",
          "content_same": false
        },
        {
          "line": 4989,
          "old_api": "unsetenv",
          "new_api": "raise",
          "old_text": "unsetenv(\"UPSTART_JOB\")",
          "new_text": "raise(SIGSTOP)",
          "old_line_content": "    unsetenv(\"UPSTART_JOB\");",
          "new_line_content": "    raise(SIGSTOP);",
          "content_same": false
        },
        {
          "line": 5045,
          "old_api": "ziplistTest",
          "new_api": "strcasecmp",
          "old_text": "ziplistTest(argc, argv)",
          "new_text": "strcasecmp(argv[2], \"ziplist\")",
          "old_line_content": "            return ziplistTest(argc, argv);",
          "new_line_content": "        if (!strcasecmp(argv[2], \"ziplist\")) {",
          "content_same": false
        },
        {
          "line": 5046,
          "old_api": "strcasecmp",
          "new_api": "ziplistTest",
          "old_text": "strcasecmp(argv[2], \"quicklist\")",
          "new_text": "ziplistTest(argc, argv)",
          "old_line_content": "        } else if (!strcasecmp(argv[2], \"quicklist\")) {",
          "new_line_content": "            return ziplistTest(argc, argv);",
          "content_same": false
        },
        {
          "line": 5047,
          "old_api": "quicklistTest",
          "new_api": "strcasecmp",
          "old_text": "quicklistTest(argc, argv)",
          "new_text": "strcasecmp(argv[2], \"quicklist\")",
          "old_line_content": "            quicklistTest(argc, argv);",
          "new_line_content": "        } else if (!strcasecmp(argv[2], \"quicklist\")) {",
          "content_same": false
        },
        {
          "line": 5048,
          "old_api": "strcasecmp",
          "new_api": "quicklistTest",
          "old_text": "strcasecmp(argv[2], \"intset\")",
          "new_text": "quicklistTest(argc, argv)",
          "old_line_content": "        } else if (!strcasecmp(argv[2], \"intset\")) {",
          "new_line_content": "            quicklistTest(argc, argv);",
          "content_same": false
        },
        {
          "line": 5049,
          "old_api": "intsetTest",
          "new_api": "strcasecmp",
          "old_text": "intsetTest(argc, argv)",
          "new_text": "strcasecmp(argv[2], \"intset\")",
          "old_line_content": "            return intsetTest(argc, argv);",
          "new_line_content": "        } else if (!strcasecmp(argv[2], \"intset\")) {",
          "content_same": false
        },
        {
          "line": 5050,
          "old_api": "strcasecmp",
          "new_api": "intsetTest",
          "old_text": "strcasecmp(argv[2], \"zipmap\")",
          "new_text": "intsetTest(argc, argv)",
          "old_line_content": "        } else if (!strcasecmp(argv[2], \"zipmap\")) {",
          "new_line_content": "            return intsetTest(argc, argv);",
          "content_same": false
        },
        {
          "line": 5051,
          "old_api": "zipmapTest",
          "new_api": "strcasecmp",
          "old_text": "zipmapTest(argc, argv)",
          "new_text": "strcasecmp(argv[2], \"zipmap\")",
          "old_line_content": "            return zipmapTest(argc, argv);",
          "new_line_content": "        } else if (!strcasecmp(argv[2], \"zipmap\")) {",
          "content_same": false
        },
        {
          "line": 5052,
          "old_api": "strcasecmp",
          "new_api": "zipmapTest",
          "old_text": "strcasecmp(argv[2], \"sha1test\")",
          "new_text": "zipmapTest(argc, argv)",
          "old_line_content": "        } else if (!strcasecmp(argv[2], \"sha1test\")) {",
          "new_line_content": "            return zipmapTest(argc, argv);",
          "content_same": false
        },
        {
          "line": 5053,
          "old_api": "sha1Test",
          "new_api": "strcasecmp",
          "old_text": "sha1Test(argc, argv)",
          "new_text": "strcasecmp(argv[2], \"sha1test\")",
          "old_line_content": "            return sha1Test(argc, argv);",
          "new_line_content": "        } else if (!strcasecmp(argv[2], \"sha1test\")) {",
          "content_same": false
        },
        {
          "line": 5054,
          "old_api": "strcasecmp",
          "new_api": "sha1Test",
          "old_text": "strcasecmp(argv[2], \"util\")",
          "new_text": "sha1Test(argc, argv)",
          "old_line_content": "        } else if (!strcasecmp(argv[2], \"util\")) {",
          "new_line_content": "            return sha1Test(argc, argv);",
          "content_same": false
        },
        {
          "line": 5055,
          "old_api": "utilTest",
          "new_api": "strcasecmp",
          "old_text": "utilTest(argc, argv)",
          "new_text": "strcasecmp(argv[2], \"util\")",
          "old_line_content": "            return utilTest(argc, argv);",
          "new_line_content": "        } else if (!strcasecmp(argv[2], \"util\")) {",
          "content_same": false
        },
        {
          "line": 5056,
          "old_api": "strcasecmp",
          "new_api": "utilTest",
          "old_text": "strcasecmp(argv[2], \"endianconv\")",
          "new_text": "utilTest(argc, argv)",
          "old_line_content": "        } else if (!strcasecmp(argv[2], \"endianconv\")) {",
          "new_line_content": "            return utilTest(argc, argv);",
          "content_same": false
        },
        {
          "line": 5057,
          "old_api": "endianconvTest",
          "new_api": "strcasecmp",
          "old_text": "endianconvTest(argc, argv)",
          "new_text": "strcasecmp(argv[2], \"endianconv\")",
          "old_line_content": "            return endianconvTest(argc, argv);",
          "new_line_content": "        } else if (!strcasecmp(argv[2], \"endianconv\")) {",
          "content_same": false
        },
        {
          "line": 5058,
          "old_api": "strcasecmp",
          "new_api": "endianconvTest",
          "old_text": "strcasecmp(argv[2], \"crc64\")",
          "new_text": "endianconvTest(argc, argv)",
          "old_line_content": "        } else if (!strcasecmp(argv[2], \"crc64\")) {",
          "new_line_content": "            return endianconvTest(argc, argv);",
          "content_same": false
        },
        {
          "line": 5059,
          "old_api": "crc64Test",
          "new_api": "strcasecmp",
          "old_text": "crc64Test(argc, argv)",
          "new_text": "strcasecmp(argv[2], \"crc64\")",
          "old_line_content": "            return crc64Test(argc, argv);",
          "new_line_content": "        } else if (!strcasecmp(argv[2], \"crc64\")) {",
          "content_same": false
        },
        {
          "line": 5060,
          "old_api": "strcasecmp",
          "new_api": "crc64Test",
          "old_text": "strcasecmp(argv[2], \"zmalloc\")",
          "new_text": "crc64Test(argc, argv)",
          "old_line_content": "        } else if (!strcasecmp(argv[2], \"zmalloc\")) {",
          "new_line_content": "            return crc64Test(argc, argv);",
          "content_same": false
        },
        {
          "line": 5061,
          "old_api": "zmalloc_test",
          "new_api": "strcasecmp",
          "old_text": "zmalloc_test(argc, argv)",
          "new_text": "strcasecmp(argv[2], \"zmalloc\")",
          "old_line_content": "            return zmalloc_test(argc, argv);",
          "new_line_content": "        } else if (!strcasecmp(argv[2], \"zmalloc\")) {",
          "content_same": false
        },
        {
          "line": 5073,
          "old_api": "tzset",
          "new_api": "setlocale",
          "old_text": "tzset()",
          "new_text": "setlocale(LC_COLLATE,\"\")",
          "old_line_content": "    tzset(); /* Populates 'timezone' global. */",
          "new_line_content": "    setlocale(LC_COLLATE,\"\");",
          "content_same": false
        },
        {
          "line": 5074,
          "old_api": "zmalloc_set_oom_handler",
          "new_api": "tzset",
          "old_text": "zmalloc_set_oom_handler(redisOutOfMemoryHandler)",
          "new_text": "tzset()",
          "old_line_content": "    zmalloc_set_oom_handler(redisOutOfMemoryHandler);",
          "new_line_content": "    tzset(); /* Populates 'timezone' global. */",
          "content_same": false
        },
        {
          "line": 5075,
          "old_api": "getpid",
          "new_api": "zmalloc_set_oom_handler",
          "old_text": "getpid()",
          "new_text": "zmalloc_set_oom_handler(redisOutOfMemoryHandler)",
          "old_line_content": "    srand(time(NULL)^getpid());",
          "new_line_content": "    zmalloc_set_oom_handler(redisOutOfMemoryHandler);",
          "content_same": false
        },
        {
          "line": 5076,
          "old_api": "gettimeofday",
          "new_api": "getpid",
          "old_text": "gettimeofday(&tv,NULL)",
          "new_text": "getpid()",
          "old_line_content": "    gettimeofday(&tv,NULL);",
          "new_line_content": "    srand(time(NULL)^getpid());",
          "content_same": false
        },
        {
          "line": 5077,
          "old_api": "crc64_init",
          "new_api": "gettimeofday",
          "old_text": "crc64_init()",
          "new_text": "gettimeofday(&tv,NULL)",
          "old_line_content": "    crc64_init();",
          "new_line_content": "    gettimeofday(&tv,NULL);",
          "content_same": false
        },
        {
          "line": 5081,
          "old_api": "dictSetHashFunctionSeed",
          "new_api": "getRandomBytes",
          "old_text": "dictSetHashFunctionSeed(hashseed)",
          "new_text": "getRandomBytes(hashseed,sizeof(hashseed))",
          "old_line_content": "    dictSetHashFunctionSeed(hashseed);",
          "new_line_content": "    getRandomBytes(hashseed,sizeof(hashseed));",
          "content_same": false
        },
        {
          "line": 5082,
          "old_api": "checkForSentinelMode",
          "new_api": "dictSetHashFunctionSeed",
          "old_text": "checkForSentinelMode(argc,argv)",
          "new_text": "dictSetHashFunctionSeed(hashseed)",
          "old_line_content": "    server.sentinel_mode = checkForSentinelMode(argc,argv);",
          "new_line_content": "    dictSetHashFunctionSeed(hashseed);",
          "content_same": false
        },
        {
          "line": 5083,
          "old_api": "initServerConfig",
          "new_api": "checkForSentinelMode",
          "old_text": "initServerConfig()",
          "new_text": "checkForSentinelMode(argc,argv)",
          "old_line_content": "    initServerConfig();",
          "new_line_content": "    server.sentinel_mode = checkForSentinelMode(argc,argv);",
          "content_same": false
        },
        {
          "line": 5084,
          "old_api": "ACLInit",
          "new_api": "initServerConfig",
          "old_text": "ACLInit()",
          "new_text": "initServerConfig()",
          "old_line_content": "    ACLInit(); /* The ACL subsystem must be initialized ASAP because the",
          "new_line_content": "    initServerConfig();",
          "content_same": false
        },
        {
          "line": 5087,
          "old_api": "tlsInit",
          "new_api": "moduleInitModulesSystem",
          "old_text": "tlsInit()",
          "new_text": "moduleInitModulesSystem()",
          "old_line_content": "    tlsInit();",
          "new_line_content": "    moduleInitModulesSystem();",
          "content_same": false
        },
        {
          "line": 5092,
          "old_api": "zmalloc",
          "new_api": "getAbsolutePath",
          "old_text": "zmalloc(sizeof(char*)*(argc+1))",
          "new_text": "getAbsolutePath(argv[0])",
          "old_line_content": "    server.exec_argv = zmalloc(sizeof(char*)*(argc+1));",
          "new_line_content": "    server.executable = getAbsolutePath(argv[0]);",
          "content_same": false
        },
        {
          "line": 5101,
          "old_api": "initSentinel",
          "new_api": "initSentinelConfig",
          "old_text": "initSentinel()",
          "new_text": "initSentinelConfig()",
          "old_line_content": "        initSentinel();",
          "new_line_content": "        initSentinelConfig();",
          "content_same": false
        },
        {
          "line": 5108,
          "old_api": "redis_check_rdb_main",
          "new_api": "strstr",
          "old_text": "redis_check_rdb_main(argc,argv,NULL)",
          "new_text": "strstr(argv[0],\"redis-check-rdb\")",
          "old_line_content": "        redis_check_rdb_main(argc,argv,NULL);",
          "new_line_content": "    if (strstr(argv[0],\"redis-check-rdb\") != NULL)",
          "content_same": false
        },
        {
          "line": 5109,
          "old_api": "strstr",
          "new_api": "redis_check_rdb_main",
          "old_text": "strstr(argv[0],\"redis-check-aof\")",
          "new_text": "redis_check_rdb_main(argc,argv,NULL)",
          "old_line_content": "    else if (strstr(argv[0],\"redis-check-aof\") != NULL)",
          "new_line_content": "        redis_check_rdb_main(argc,argv,NULL);",
          "content_same": false
        },
        {
          "line": 5110,
          "old_api": "redis_check_aof_main",
          "new_api": "strstr",
          "old_text": "redis_check_aof_main(argc,argv)",
          "new_text": "strstr(argv[0],\"redis-check-aof\")",
          "old_line_content": "        redis_check_aof_main(argc,argv);",
          "new_line_content": "    else if (strstr(argv[0],\"redis-check-aof\") != NULL)",
          "content_same": false
        },
        {
          "line": 5119,
          "old_api": "version",
          "new_api": "strcmp",
          "old_text": "version()",
          "new_text": "strcmp(argv[1], \"-v\")",
          "old_line_content": "            strcmp(argv[1], \"--version\") == 0) version();",
          "new_line_content": "        if (strcmp(argv[1], \"-v\") == 0 ||",
          "content_same": false
        },
        {
          "line": 5120,
          "old_api": "strcmp",
          "new_api": "version",
          "old_text": "strcmp(argv[1], \"--help\")",
          "new_text": "version()",
          "old_line_content": "        if (strcmp(argv[1], \"--help\") == 0 ||",
          "new_line_content": "            strcmp(argv[1], \"--version\") == 0) version();",
          "content_same": false
        },
        {
          "line": 5121,
          "old_api": "usage",
          "new_api": "strcmp",
          "old_text": "usage()",
          "new_text": "strcmp(argv[1], \"--help\")",
          "old_line_content": "            strcmp(argv[1], \"-h\") == 0) usage();",
          "new_line_content": "        if (strcmp(argv[1], \"--help\") == 0 ||",
          "content_same": false
        },
        {
          "line": 5122,
          "old_api": "strcmp",
          "new_api": "usage",
          "old_text": "strcmp(argv[1], \"--test-memory\")",
          "new_text": "usage()",
          "old_line_content": "        if (strcmp(argv[1], \"--test-memory\") == 0) {",
          "new_line_content": "            strcmp(argv[1], \"-h\") == 0) usage();",
          "content_same": false
        },
        {
          "line": 5125,
          "old_api": "exit",
          "new_api": "atoi",
          "old_text": "exit(0)",
          "new_text": "atoi(argv[2])",
          "old_line_content": "                exit(0);",
          "new_line_content": "                memtest(atoi(argv[2]),50);",
          "content_same": false
        },
        {
          "line": 5129,
          "old_api": "exit",
          "new_api": "fprintf",
          "old_text": "exit(1)",
          "new_text": "fprintf(stderr,\"Example: ./redis-server --test-memory 4096\\n\\n\")",
          "old_line_content": "                exit(1);",
          "new_line_content": "                fprintf(stderr,\"Example: ./redis-server --test-memory 4096\\n\\n\");",
          "content_same": false
        },
        {
          "line": 5140,
          "old_api": "zstrdup",
          "new_api": "zfree",
          "old_text": "zstrdup(server.configfile)",
          "new_text": "zfree(server.exec_argv[j])",
          "old_line_content": "            server.exec_argv[j] = zstrdup(server.configfile);",
          "new_line_content": "            zfree(server.exec_argv[j]);",
          "content_same": false
        },
        {
          "line": 5162,
          "old_api": "sdscat",
          "new_api": "strlen",
          "old_text": "sdscat(options,\" \")",
          "new_text": "strlen(argv[j])",
          "old_line_content": "                options = sdscat(options,\" \");",
          "new_line_content": "                options = sdscatrepr(options,argv[j],strlen(argv[j]));",
          "content_same": false
        },
        {
          "line": 5174,
          "old_api": "sdsfree",
          "new_api": "loadServerConfig",
          "old_text": "sdsfree(options)",
          "new_text": "loadServerConfig(configfile,options)",
          "old_line_content": "        sdsfree(options);",
          "new_line_content": "        loadServerConfig(configfile,options);",
          "content_same": false
        },
        {
          "line": 5183,
          "old_api": "redisGitDirty",
          "new_api": "redisGitSHA1",
          "old_text": "redisGitDirty()",
          "new_text": "redisGitSHA1()",
          "old_line_content": "            strtol(redisGitDirty(),NULL,10) > 0,",
          "new_line_content": "            redisGitSHA1(),",
          "content_same": false
        },
        {
          "line": 5184,
          "old_api": "getpid",
          "new_api": "redisGitDirty",
          "old_text": "getpid()",
          "new_text": "redisGitDirty()",
          "old_line_content": "            (int)getpid());",
          "new_line_content": "            strtol(redisGitDirty(),NULL,10) > 0,",
          "content_same": false
        },
        {
          "line": 5197,
          "old_api": "createPidFile",
          "new_api": "initServer",
          "old_text": "createPidFile()",
          "new_text": "initServer()",
          "old_line_content": "    if (background || server.pidfile) createPidFile();",
          "new_line_content": "    initServer();",
          "content_same": false
        },
        {
          "line": 5198,
          "old_api": "redisSetProcTitle",
          "new_api": "createPidFile",
          "old_text": "redisSetProcTitle(argv[0])",
          "new_text": "createPidFile()",
          "old_line_content": "    redisSetProcTitle(argv[0]);",
          "new_line_content": "    if (background || server.pidfile) createPidFile();",
          "content_same": false
        },
        {
          "line": 5199,
          "old_api": "redisAsciiArt",
          "new_api": "redisSetProcTitle",
          "old_text": "redisAsciiArt()",
          "new_text": "redisSetProcTitle(argv[0])",
          "old_line_content": "    redisAsciiArt();",
          "new_line_content": "    redisSetProcTitle(argv[0]);",
          "content_same": false
        },
        {
          "line": 5200,
          "old_api": "checkTcpBacklogSettings",
          "new_api": "redisAsciiArt",
          "old_text": "checkTcpBacklogSettings()",
          "new_text": "redisAsciiArt()",
          "old_line_content": "    checkTcpBacklogSettings();",
          "new_line_content": "    redisAsciiArt();",
          "content_same": false
        },
        {
          "line": 5209,
          "old_api": "moduleLoadFromQueue",
          "new_api": "moduleInitModulesSystemLast",
          "old_text": "moduleLoadFromQueue()",
          "new_text": "moduleInitModulesSystemLast()",
          "old_line_content": "        moduleLoadFromQueue();",
          "new_line_content": "        moduleInitModulesSystemLast();",
          "content_same": false
        },
        {
          "line": 5210,
          "old_api": "ACLLoadUsersAtStartup",
          "new_api": "moduleLoadFromQueue",
          "old_text": "ACLLoadUsersAtStartup()",
          "new_text": "moduleLoadFromQueue()",
          "old_line_content": "        ACLLoadUsersAtStartup();",
          "new_line_content": "        moduleLoadFromQueue();",
          "content_same": false
        },
        {
          "line": 5211,
          "old_api": "InitServerLast",
          "new_api": "ACLLoadUsersAtStartup",
          "old_text": "InitServerLast()",
          "new_text": "ACLLoadUsersAtStartup()",
          "old_line_content": "        InitServerLast();",
          "new_line_content": "        ACLLoadUsersAtStartup();",
          "content_same": false
        },
        {
          "line": 5212,
          "old_api": "loadDataFromDisk",
          "new_api": "InitServerLast",
          "old_text": "loadDataFromDisk()",
          "new_text": "InitServerLast()",
          "old_line_content": "        loadDataFromDisk();",
          "new_line_content": "        InitServerLast();",
          "content_same": false
        },
        {
          "line": 5215,
          "old_api": "serverLog",
          "new_api": "verifyClusterConfigWithData",
          "old_text": "serverLog(LL_WARNING,\n                    \"You can't have keys in a DB different than DB 0 when in \"\n                    \"Cluster mode. Exiting.\")",
          "new_text": "verifyClusterConfigWithData()",
          "old_line_content": "                serverLog(LL_WARNING,",
          "new_line_content": "            if (verifyClusterConfigWithData() == C_ERR) {",
          "content_same": false
        },
        {
          "line": 5235,
          "old_api": "sentinelIsRunning",
          "new_api": "InitServerLast",
          "old_text": "sentinelIsRunning()",
          "new_text": "InitServerLast()",
          "old_line_content": "        sentinelIsRunning();",
          "new_line_content": "        InitServerLast();",
          "content_same": false
        },
        {
          "line": 5248,
          "old_api": "aeMain",
          "new_api": "redisSetCpuAffinity",
          "old_text": "aeMain(server.el)",
          "new_text": "redisSetCpuAffinity(server.server_cpulist)",
          "old_line_content": "    aeMain(server.el);",
          "new_line_content": "    redisSetCpuAffinity(server.server_cpulist);",
          "content_same": false
        },
        {
          "line": 5249,
          "old_api": "aeDeleteEventLoop",
          "new_api": "aeMain",
          "old_text": "aeDeleteEventLoop(server.el)",
          "new_text": "aeMain(server.el)",
          "old_line_content": "    aeDeleteEventLoop(server.el);",
          "new_line_content": "    aeMain(server.el);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 2050,
          "old_api": null,
          "new_api": "replicationCron",
          "old_text": null,
          "new_text": "replicationCron()",
          "old_line_content": "",
          "new_line_content": "    run_with_period(1000) replicationCron();",
          "content_same": false
        },
        {
          "line": 4098,
          "old_api": null,
          "new_api": "getpid",
          "old_text": null,
          "new_text": "getpid()",
          "old_line_content": "            server.runid,",
          "new_line_content": "            (int64_t) getpid(),",
          "content_same": false
        },
        {
          "line": 2054,
          "old_api": null,
          "new_api": "clusterCron",
          "old_text": null,
          "new_text": "clusterCron()",
          "old_line_content": "    }",
          "new_line_content": "        if (server.cluster_enabled) clusterCron();",
          "content_same": false
        },
        {
          "line": 2058,
          "old_api": null,
          "new_api": "sentinelTimer",
          "old_text": null,
          "new_text": "sentinelTimer()",
          "old_line_content": "",
          "new_line_content": "    if (server.sentinel_mode) sentinelTimer();",
          "content_same": false
        },
        {
          "line": 2062,
          "old_api": null,
          "new_api": "migrateCloseTimedoutSockets",
          "old_text": null,
          "new_text": "migrateCloseTimedoutSockets()",
          "old_line_content": "    }",
          "new_line_content": "        migrateCloseTimedoutSockets();",
          "content_same": false
        },
        {
          "line": 4112,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(section,\"clients\")",
          "old_line_content": "        size_t maxin, maxout;",
          "new_line_content": "    if (allsections || defsections || !strcasecmp(section,\"clients\")) {",
          "content_same": false
        },
        {
          "line": 2066,
          "old_api": null,
          "new_api": "stopThreadedIOIfNeeded",
          "old_text": null,
          "new_text": "stopThreadedIOIfNeeded()",
          "old_line_content": "",
          "new_line_content": "    stopThreadedIOIfNeeded();",
          "content_same": false
        },
        {
          "line": 4116,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n            \"# Clients\\r\\n\"\n            \"connected_clients:%lu\\r\\n\"\n            \"client_recent_max_input_buffer:%zu\\r\\n\"\n            \"client_recent_max_output_buffer:%zu\\r\\n\"\n            \"blocked_clients:%d\\r\\n\"\n            \"tracking_clients:%d\\r\\n\"\n            \"clients_in_timeout_table:%llu\\r\\n\",\n            listLength(server.clients)-listLength(server.slaves),\n            maxin, maxout,\n            server.blocked_clients,\n            server.tracking_clients,\n            (unsigned long long) raxSize(server.clients_timeout_table))",
          "old_line_content": "            \"# Clients\\r\\n\"",
          "new_line_content": "        info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 2072,
          "old_api": null,
          "new_api": "trackingLimitUsedSlots",
          "old_text": null,
          "new_text": "trackingLimitUsedSlots()",
          "old_line_content": "",
          "new_line_content": "    if (server.tracking_clients) trackingLimitUsedSlots();",
          "content_same": false
        },
        {
          "line": 4124,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.slaves)",
          "old_line_content": "            maxin, maxout,",
          "new_line_content": "            listLength(server.clients)-listLength(server.slaves),",
          "content_same": false
        },
        {
          "line": 4128,
          "old_api": null,
          "new_api": "raxSize",
          "old_text": null,
          "new_text": "raxSize(server.clients_timeout_table)",
          "old_line_content": "    }",
          "new_line_content": "            (unsigned long long) raxSize(server.clients_timeout_table));",
          "content_same": false
        },
        {
          "line": 2081,
          "old_api": null,
          "new_api": "hasActiveChildProcess",
          "old_text": null,
          "new_text": "hasActiveChildProcess()",
          "old_line_content": "        server.rdb_bgsave_scheduled &&",
          "new_line_content": "    if (!hasActiveChildProcess() &&",
          "content_same": false
        },
        {
          "line": 4132,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(section,\"memory\")",
          "old_line_content": "        char hmem[64];",
          "new_line_content": "    if (allsections || defsections || !strcasecmp(section,\"memory\")) {",
          "content_same": false
        },
        {
          "line": 2088,
          "old_api": null,
          "new_api": "rdbSaveBackground",
          "old_text": null,
          "new_text": "rdbSaveBackground(server.rdb_filename,rsiptr)",
          "old_line_content": "            server.rdb_bgsave_scheduled = 0;",
          "new_line_content": "        if (rdbSaveBackground(server.rdb_filename,rsiptr) == C_OK)",
          "content_same": false
        },
        {
          "line": 4140,
          "old_api": null,
          "new_api": "zmalloc_used_memory",
          "old_text": null,
          "new_text": "zmalloc_used_memory()",
          "old_line_content": "        size_t total_system_mem = server.system_memory_size;",
          "new_line_content": "        size_t zmalloc_used = zmalloc_used_memory();",
          "content_same": false
        },
        {
          "line": 2094,
          "old_api": null,
          "new_api": "moduleFireServerEvent",
          "old_text": null,
          "new_text": "moduleFireServerEvent(REDISMODULE_EVENT_CRON_LOOP,\n                          0,\n                          &ei)",
          "old_line_content": "                          0,",
          "new_line_content": "    moduleFireServerEvent(REDISMODULE_EVENT_CRON_LOOP,",
          "content_same": false
        },
        {
          "line": 4144,
          "old_api": null,
          "new_api": "getMemoryOverheadData",
          "old_text": null,
          "new_text": "getMemoryOverheadData()",
          "old_line_content": "",
          "new_line_content": "        struct redisMemOverhead *mh = getMemoryOverheadData();",
          "content_same": false
        },
        {
          "line": 4159,
          "old_api": null,
          "new_api": "bytesToHuman",
          "old_text": null,
          "new_text": "bytesToHuman(maxmemory_hmem,server.maxmemory)",
          "old_line_content": "",
          "new_line_content": "        bytesToHuman(maxmemory_hmem,server.maxmemory);",
          "content_same": false
        },
        {
          "line": 4162,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n            \"# Memory\\r\\n\"\n            \"used_memory:%zu\\r\\n\"\n            \"used_memory_human:%s\\r\\n\"\n            \"used_memory_rss:%zu\\r\\n\"\n            \"used_memory_rss_human:%s\\r\\n\"\n            \"used_memory_peak:%zu\\r\\n\"\n            \"used_memory_peak_human:%s\\r\\n\"\n            \"used_memory_peak_perc:%.2f%%\\r\\n\"\n            \"used_memory_overhead:%zu\\r\\n\"\n            \"used_memory_startup:%zu\\r\\n\"\n            \"used_memory_dataset:%zu\\r\\n\"\n            \"used_memory_dataset_perc:%.2f%%\\r\\n\"\n            \"allocator_allocated:%zu\\r\\n\"\n            \"allocator_active:%zu\\r\\n\"\n            \"allocator_resident:%zu\\r\\n\"\n            \"total_system_memory:%lu\\r\\n\"\n            \"total_system_memory_human:%s\\r\\n\"\n            \"used_memory_lua:%lld\\r\\n\"\n            \"used_memory_lua_human:%s\\r\\n\"\n            \"used_memory_scripts:%lld\\r\\n\"\n            \"used_memory_scripts_human:%s\\r\\n\"\n            \"number_of_cached_scripts:%lu\\r\\n\"\n            \"maxmemory:%lld\\r\\n\"\n            \"maxmemory_human:%s\\r\\n\"\n            \"maxmemory_policy:%s\\r\\n\"\n            \"allocator_frag_ratio:%.2f\\r\\n\"\n            \"allocator_frag_bytes:%zu\\r\\n\"\n            \"allocator_rss_ratio:%.2f\\r\\n\"\n            \"allocator_rss_bytes:%zd\\r\\n\"\n            \"rss_overhead_ratio:%.2f\\r\\n\"\n            \"rss_overhead_bytes:%zd\\r\\n\"\n            \"mem_fragmentation_ratio:%.2f\\r\\n\"\n            \"mem_fragmentation_bytes:%zd\\r\\n\"\n            \"mem_not_counted_for_evict:%zu\\r\\n\"\n            \"mem_replication_backlog:%zu\\r\\n\"\n            \"mem_clients_slaves:%zu\\r\\n\"\n            \"mem_clients_normal:%zu\\r\\n\"\n            \"mem_aof_buffer:%zu\\r\\n\"\n            \"mem_allocator:%s\\r\\n\"\n            \"active_defrag_running:%d\\r\\n\"\n            \"lazyfree_pending_objects:%zu\\r\\n\",\n            zmalloc_used,\n            hmem,\n            server.cron_malloc_stats.process_rss,\n            used_memory_rss_hmem,\n            server.stat_peak_memory,\n            peak_hmem,\n            mh->peak_perc,\n            mh->overhead_total,\n            mh->startup_allocated,\n            mh->dataset,\n            mh->dataset_perc,\n            server.cron_malloc_stats.allocator_allocated,\n            server.cron_malloc_stats.allocator_active,\n            server.cron_malloc_stats.allocator_resident,\n            (unsigned long)total_system_mem,\n            total_system_hmem,\n            memory_lua,\n            used_memory_lua_hmem,\n            (long long) mh->lua_caches,\n            used_memory_scripts_hmem,\n            dictSize(server.lua_scripts),\n            server.maxmemory,\n            maxmemory_hmem,\n            evict_policy,\n            mh->allocator_frag,\n            mh->allocator_frag_bytes,\n            mh->allocator_rss,\n            mh->allocator_rss_bytes,\n            mh->rss_extra,\n            mh->rss_extra_bytes,\n            mh->total_frag,       /* This is the total RSS overhead, including\n                                     fragmentation, but not just it. This field\n                                     (and the next one) is named like that just\n                                     for backward compatibility. */\n            mh->total_frag_bytes,\n            freeMemoryGetNotCountedMemory(),\n            mh->repl_backlog,\n            mh->clients_slaves,\n            mh->clients_normal,\n            mh->aof_buffer,\n            ZMALLOC_LIB,\n            server.active_defrag_running,\n            lazyfreeGetPendingObjectsCount()\n        )",
          "old_line_content": "            \"# Memory\\r\\n\"",
          "new_line_content": "        info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 2119,
          "old_api": null,
          "new_api": "UNUSED",
          "old_text": null,
          "new_text": "UNUSED(eventLoop)",
          "old_line_content": "",
          "new_line_content": "    UNUSED(eventLoop);",
          "content_same": false
        },
        {
          "line": 2131,
          "old_api": null,
          "new_api": "freeClientsInAsyncFreeQueue",
          "old_text": null,
          "new_text": "freeClientsInAsyncFreeQueue()",
          "old_line_content": "        server.events_processed_while_blocked += processed;",
          "new_line_content": "        processed += freeClientsInAsyncFreeQueue();",
          "content_same": false
        },
        {
          "line": 2137,
          "old_api": null,
          "new_api": "handleBlockedClientsTimeout",
          "old_text": null,
          "new_text": "handleBlockedClientsTimeout()",
          "old_line_content": "",
          "new_line_content": "    handleBlockedClientsTimeout();",
          "content_same": false
        },
        {
          "line": 2140,
          "old_api": null,
          "new_api": "handleClientsWithPendingReadsUsingThreads",
          "old_text": null,
          "new_text": "handleClientsWithPendingReadsUsingThreads()",
          "old_line_content": "",
          "new_line_content": "    handleClientsWithPendingReadsUsingThreads();",
          "content_same": false
        },
        {
          "line": 2143,
          "old_api": null,
          "new_api": "tlsProcessPendingData",
          "old_text": null,
          "new_text": "tlsProcessPendingData()",
          "old_line_content": "",
          "new_line_content": "    tlsProcessPendingData();",
          "content_same": false
        },
        {
          "line": 2146,
          "old_api": null,
          "new_api": "tlsHasPendingData",
          "old_text": null,
          "new_text": "tlsHasPendingData()",
          "old_line_content": "",
          "new_line_content": "    aeSetDontWait(server.el, tlsHasPendingData());",
          "content_same": false
        },
        {
          "line": 2152,
          "old_api": null,
          "new_api": "clusterBeforeSleep",
          "old_text": null,
          "new_text": "clusterBeforeSleep()",
          "old_line_content": "",
          "new_line_content": "    if (server.cluster_enabled) clusterBeforeSleep();",
          "content_same": false
        },
        {
          "line": 2157,
          "old_api": null,
          "new_api": "activeExpireCycle",
          "old_text": null,
          "new_text": "activeExpireCycle(ACTIVE_EXPIRE_CYCLE_FAST)",
          "old_line_content": "",
          "new_line_content": "        activeExpireCycle(ACTIVE_EXPIRE_CYCLE_FAST);",
          "content_same": false
        },
        {
          "line": 2162,
          "old_api": null,
          "new_api": "processClientsWaitingReplicas",
          "old_text": null,
          "new_text": "processClientsWaitingReplicas()",
          "old_line_content": "",
          "new_line_content": "        processClientsWaitingReplicas();",
          "content_same": false
        },
        {
          "line": 2166,
          "old_api": null,
          "new_api": "moduleHandleBlockedClients",
          "old_text": null,
          "new_text": "moduleHandleBlockedClients()",
          "old_line_content": "",
          "new_line_content": "    if (moduleCount()) moduleHandleBlockedClients();",
          "content_same": false
        },
        {
          "line": 2170,
          "old_api": null,
          "new_api": "processUnblockedClients",
          "old_text": null,
          "new_text": "processUnblockedClients()",
          "old_line_content": "",
          "new_line_content": "        processUnblockedClients();",
          "content_same": false
        },
        {
          "line": 4224,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(server.lua_scripts)",
          "old_line_content": "            server.maxmemory,",
          "new_line_content": "            dictSize(server.lua_scripts),",
          "content_same": false
        },
        {
          "line": 2186,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(argv[2])",
          "old_line_content": "        server.get_ack_from_slaves = 0;",
          "new_line_content": "        decrRefCount(argv[2]);",
          "content_same": false
        },
        {
          "line": 4239,
          "old_api": null,
          "new_api": "freeMemoryGetNotCountedMemory",
          "old_text": null,
          "new_text": "freeMemoryGetNotCountedMemory()",
          "old_line_content": "            mh->repl_backlog,",
          "new_line_content": "            freeMemoryGetNotCountedMemory(),",
          "content_same": false
        },
        {
          "line": 2192,
          "old_api": null,
          "new_api": "trackingBroadcastInvalidationMessages",
          "old_text": null,
          "new_text": "trackingBroadcastInvalidationMessages()",
          "old_line_content": "",
          "new_line_content": "    trackingBroadcastInvalidationMessages();",
          "content_same": false
        },
        {
          "line": 2195,
          "old_api": null,
          "new_api": "flushAppendOnlyFile",
          "old_text": null,
          "new_text": "flushAppendOnlyFile(0)",
          "old_line_content": "",
          "new_line_content": "    flushAppendOnlyFile(0);",
          "content_same": false
        },
        {
          "line": 2198,
          "old_api": null,
          "new_api": "handleClientsWithPendingWritesUsingThreads",
          "old_text": null,
          "new_text": "handleClientsWithPendingWritesUsingThreads()",
          "old_line_content": "",
          "new_line_content": "    handleClientsWithPendingWritesUsingThreads();",
          "content_same": false
        },
        {
          "line": 4246,
          "old_api": null,
          "new_api": "lazyfreeGetPendingObjectsCount",
          "old_text": null,
          "new_text": "lazyfreeGetPendingObjectsCount()",
          "old_line_content": "        );",
          "new_line_content": "            lazyfreeGetPendingObjectsCount()",
          "content_same": false
        },
        {
          "line": 4248,
          "old_api": null,
          "new_api": "freeMemoryOverheadData",
          "old_text": null,
          "new_text": "freeMemoryOverheadData(mh)",
          "old_line_content": "    }",
          "new_line_content": "        freeMemoryOverheadData(mh);",
          "content_same": false
        },
        {
          "line": 2201,
          "old_api": null,
          "new_api": "freeClientsInAsyncFreeQueue",
          "old_text": null,
          "new_text": "freeClientsInAsyncFreeQueue()",
          "old_line_content": "",
          "new_line_content": "    freeClientsInAsyncFreeQueue();",
          "content_same": false
        },
        {
          "line": 2206,
          "old_api": null,
          "new_api": "moduleReleaseGIL",
          "old_text": null,
          "new_text": "moduleReleaseGIL()",
          "old_line_content": "}",
          "new_line_content": "    if (moduleCount()) moduleReleaseGIL();",
          "content_same": false
        },
        {
          "line": 4254,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n            \"# Persistence\\r\\n\"\n            \"loading:%d\\r\\n\"\n            \"rdb_changes_since_last_save:%lld\\r\\n\"\n            \"rdb_bgsave_in_progress:%d\\r\\n\"\n            \"rdb_last_save_time:%jd\\r\\n\"\n            \"rdb_last_bgsave_status:%s\\r\\n\"\n            \"rdb_last_bgsave_time_sec:%jd\\r\\n\"\n            \"rdb_current_bgsave_time_sec:%jd\\r\\n\"\n            \"rdb_last_cow_size:%zu\\r\\n\"\n            \"aof_enabled:%d\\r\\n\"\n            \"aof_rewrite_in_progress:%d\\r\\n\"\n            \"aof_rewrite_scheduled:%d\\r\\n\"\n            \"aof_last_rewrite_time_sec:%jd\\r\\n\"\n            \"aof_current_rewrite_time_sec:%jd\\r\\n\"\n            \"aof_last_bgrewrite_status:%s\\r\\n\"\n            \"aof_last_write_status:%s\\r\\n\"\n            \"aof_last_cow_size:%zu\\r\\n\"\n            \"module_fork_in_progress:%d\\r\\n\"\n            \"module_fork_last_cow_size:%zu\\r\\n\",\n            server.loading,\n            server.dirty,\n            server.rdb_child_pid != -1,\n            (intmax_t)server.lastsave,\n            (server.lastbgsave_status == C_OK) ? \"ok\" : \"err\",\n            (intmax_t)server.rdb_save_time_last,\n            (intmax_t)((server.rdb_child_pid == -1) ?\n                -1 : time(NULL)-server.rdb_save_time_start),\n            server.stat_rdb_cow_bytes,\n            server.aof_state != AOF_OFF,\n            server.aof_child_pid != -1,\n            server.aof_rewrite_scheduled,\n            (intmax_t)server.aof_rewrite_time_last,\n            (intmax_t)((server.aof_child_pid == -1) ?\n                -1 : time(NULL)-server.aof_rewrite_time_start),\n            (server.aof_lastbgrewrite_status == C_OK) ? \"ok\" : \"err\",\n            (server.aof_last_write_status == C_OK) ? \"ok\" : \"err\",\n            server.stat_aof_cow_bytes,\n            server.module_child_pid != -1,\n            server.stat_module_cow_bytes)",
          "old_line_content": "            \"# Persistence\\r\\n\"",
          "new_line_content": "        info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 2213,
          "old_api": null,
          "new_api": "UNUSED",
          "old_text": null,
          "new_text": "UNUSED(eventLoop)",
          "old_line_content": "",
          "new_line_content": "    UNUSED(eventLoop);",
          "content_same": false
        },
        {
          "line": 2216,
          "old_api": null,
          "new_api": "moduleAcquireGIL",
          "old_text": null,
          "new_text": "moduleAcquireGIL()",
          "old_line_content": "    }",
          "new_line_content": "        if (moduleCount()) moduleAcquireGIL();",
          "content_same": false
        },
        {
          "line": 4281,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "            server.stat_rdb_cow_bytes,",
          "new_line_content": "                -1 : time(NULL)-server.rdb_save_time_start),",
          "content_same": false
        },
        {
          "line": 2235,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\n        \"-WRONGTYPE Operation against a key holding the wrong kind of value\\r\\n\")",
          "old_line_content": "        \"-WRONGTYPE Operation against a key holding the wrong kind of value\\r\\n\"));",
          "new_line_content": "    shared.wrongtypeerr = createObject(OBJ_STRING,sdsnew(",
          "content_same": false
        },
        {
          "line": 2237,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\n        \"-ERR no such key\\r\\n\")",
          "old_line_content": "        \"-ERR no such key\\r\\n\"));",
          "new_line_content": "    shared.nokeyerr = createObject(OBJ_STRING,sdsnew(",
          "content_same": false
        },
        {
          "line": 2239,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\n        \"-ERR syntax error\\r\\n\")",
          "old_line_content": "        \"-ERR syntax error\\r\\n\"));",
          "new_line_content": "    shared.syntaxerr = createObject(OBJ_STRING,sdsnew(",
          "content_same": false
        },
        {
          "line": 4288,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "            (server.aof_lastbgrewrite_status == C_OK) ? \"ok\" : \"err\",",
          "new_line_content": "                -1 : time(NULL)-server.aof_rewrite_time_start),",
          "content_same": false
        },
        {
          "line": 2241,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\n        \"-ERR source and destination objects are the same\\r\\n\")",
          "old_line_content": "        \"-ERR source and destination objects are the same\\r\\n\"));",
          "new_line_content": "    shared.sameobjecterr = createObject(OBJ_STRING,sdsnew(",
          "content_same": false
        },
        {
          "line": 2243,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\n        \"-ERR index out of range\\r\\n\")",
          "old_line_content": "        \"-ERR index out of range\\r\\n\"));",
          "new_line_content": "    shared.outofrangeerr = createObject(OBJ_STRING,sdsnew(",
          "content_same": false
        },
        {
          "line": 2245,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\n        \"-NOSCRIPT No matching script. Please use EVAL.\\r\\n\")",
          "old_line_content": "        \"-NOSCRIPT No matching script. Please use EVAL.\\r\\n\"));",
          "new_line_content": "    shared.noscripterr = createObject(OBJ_STRING,sdsnew(",
          "content_same": false
        },
        {
          "line": 2247,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\n        \"-LOADING Redis is loading the dataset in memory\\r\\n\")",
          "old_line_content": "        \"-LOADING Redis is loading the dataset in memory\\r\\n\"));",
          "new_line_content": "    shared.loadingerr = createObject(OBJ_STRING,sdsnew(",
          "content_same": false
        },
        {
          "line": 4296,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n                \"aof_current_size:%lld\\r\\n\"\n                \"aof_base_size:%lld\\r\\n\"\n                \"aof_pending_rewrite:%d\\r\\n\"\n                \"aof_buffer_length:%zu\\r\\n\"\n                \"aof_rewrite_buffer_length:%lu\\r\\n\"\n                \"aof_pending_bio_fsync:%llu\\r\\n\"\n                \"aof_delayed_fsync:%lu\\r\\n\",\n                (long long) server.aof_current_size,\n                (long long) server.aof_rewrite_base_size,\n                server.aof_rewrite_scheduled,\n                sdslen(server.aof_buf),\n                aofRewriteBufferSize(),\n                bioPendingJobsOfType(BIO_AOF_FSYNC),\n                server.aof_delayed_fsync)",
          "old_line_content": "                \"aof_current_size:%lld\\r\\n\"",
          "new_line_content": "            info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 2249,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\n        \"-BUSY Redis is busy running a script. You can only call SCRIPT KILL or SHUTDOWN NOSAVE.\\r\\n\")",
          "old_line_content": "        \"-BUSY Redis is busy running a script. You can only call SCRIPT KILL or SHUTDOWN NOSAVE.\\r\\n\"));",
          "new_line_content": "    shared.slowscripterr = createObject(OBJ_STRING,sdsnew(",
          "content_same": false
        },
        {
          "line": 2251,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\n        \"-MASTERDOWN Link with MASTER is down and replica-serve-stale-data is set to 'no'.\\r\\n\")",
          "old_line_content": "        \"-MASTERDOWN Link with MASTER is down and replica-serve-stale-data is set to 'no'.\\r\\n\"));",
          "new_line_content": "    shared.masterdownerr = createObject(OBJ_STRING,sdsnew(",
          "content_same": false
        },
        {
          "line": 2253,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\n        \"-MISCONF Redis is configured to save RDB snapshots, but it is currently not able to persist on disk. Commands that may modify the data set are disabled, because this instance is configured to report errors during writes if RDB snapshotting fails (stop-writes-on-bgsave-error option). Please check the Redis logs for details about the RDB error.\\r\\n\")",
          "old_line_content": "        \"-MISCONF Redis is configured to save RDB snapshots, but it is currently not able to persist on disk. Commands that may modify the data set are disabled, because this instance is configured to report errors during writes if RDB snapshotting fails (stop-writes-on-bgsave-error option). Please check the Redis logs for details about the RDB error.\\r\\n\"));",
          "new_line_content": "    shared.bgsaveerr = createObject(OBJ_STRING,sdsnew(",
          "content_same": false
        },
        {
          "line": 2255,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\n        \"-READONLY You can't write against a read only replica.\\r\\n\")",
          "old_line_content": "        \"-READONLY You can't write against a read only replica.\\r\\n\"));",
          "new_line_content": "    shared.roslaveerr = createObject(OBJ_STRING,sdsnew(",
          "content_same": false
        },
        {
          "line": 2257,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\n        \"-NOAUTH Authentication required.\\r\\n\")",
          "old_line_content": "        \"-NOAUTH Authentication required.\\r\\n\"));",
          "new_line_content": "    shared.noautherr = createObject(OBJ_STRING,sdsnew(",
          "content_same": false
        },
        {
          "line": 2259,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\n        \"-OOM command not allowed when used memory > 'maxmemory'.\\r\\n\")",
          "old_line_content": "        \"-OOM command not allowed when used memory > 'maxmemory'.\\r\\n\"));",
          "new_line_content": "    shared.oomerr = createObject(OBJ_STRING,sdsnew(",
          "content_same": false
        },
        {
          "line": 2261,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\n        \"-EXECABORT Transaction discarded because of previous errors.\\r\\n\")",
          "old_line_content": "        \"-EXECABORT Transaction discarded because of previous errors.\\r\\n\"));",
          "new_line_content": "    shared.execaborterr = createObject(OBJ_STRING,sdsnew(",
          "content_same": false
        },
        {
          "line": 4309,
          "old_api": null,
          "new_api": "bioPendingJobsOfType",
          "old_text": null,
          "new_text": "bioPendingJobsOfType(BIO_AOF_FSYNC)",
          "old_line_content": "                server.aof_delayed_fsync);",
          "new_line_content": "                bioPendingJobsOfType(BIO_AOF_FSYNC),",
          "content_same": false
        },
        {
          "line": 2263,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\n        \"-NOREPLICAS Not enough good replicas to write.\\r\\n\")",
          "old_line_content": "        \"-NOREPLICAS Not enough good replicas to write.\\r\\n\"));",
          "new_line_content": "    shared.noreplicaserr = createObject(OBJ_STRING,sdsnew(",
          "content_same": false
        },
        {
          "line": 2265,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\n        \"-BUSYKEY Target key name already exists.\\r\\n\")",
          "old_line_content": "        \"-BUSYKEY Target key name already exists.\\r\\n\"));",
          "new_line_content": "    shared.busykeyerr = createObject(OBJ_STRING,sdsnew(",
          "content_same": false
        },
        {
          "line": 2269,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\"+\")",
          "old_line_content": "",
          "new_line_content": "    shared.plus = createObject(OBJ_STRING,sdsnew(\"+\"));",
          "content_same": false
        },
        {
          "line": 4322,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "            if (elapsed == 0) {",
          "new_line_content": "            elapsed = time(NULL)-server.loading_start_time;",
          "content_same": false
        },
        {
          "line": 2275,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\"_\\r\\n\")",
          "old_line_content": "",
          "new_line_content": "    shared.null[3] = createObject(OBJ_STRING,sdsnew(\"_\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 2280,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\"_\\r\\n\")",
          "old_line_content": "",
          "new_line_content": "    shared.nullarray[3] = createObject(OBJ_STRING,sdsnew(\"_\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 4330,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n                \"loading_start_time:%jd\\r\\n\"\n                \"loading_total_bytes:%llu\\r\\n\"\n                \"loading_loaded_bytes:%llu\\r\\n\"\n                \"loading_loaded_perc:%.2f\\r\\n\"\n                \"loading_eta_seconds:%jd\\r\\n\",\n                (intmax_t) server.loading_start_time,\n                (unsigned long long) server.loading_total_bytes,\n                (unsigned long long) server.loading_loaded_bytes,\n                perc,\n                (intmax_t)eta\n            )",
          "old_line_content": "                \"loading_start_time:%jd\\r\\n\"",
          "new_line_content": "            info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 2285,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\"%0\\r\\n\")",
          "old_line_content": "",
          "new_line_content": "    shared.emptymap[3] = createObject(OBJ_STRING,sdsnew(\"%0\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 2290,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\"~0\\r\\n\")",
          "old_line_content": "",
          "new_line_content": "    shared.emptyset[3] = createObject(OBJ_STRING,sdsnew(\"~0\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 2298,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "                \"*2\\r\\n$6\\r\\nSELECT\\r\\n$%d\\r\\n%s\\r\\n\",",
          "new_line_content": "            sdscatprintf(sdsempty(),",
          "content_same": false
        },
        {
          "line": 4348,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n            \"# Stats\\r\\n\"\n            \"total_connections_received:%lld\\r\\n\"\n            \"total_commands_processed:%lld\\r\\n\"\n            \"instantaneous_ops_per_sec:%lld\\r\\n\"\n            \"total_net_input_bytes:%lld\\r\\n\"\n            \"total_net_output_bytes:%lld\\r\\n\"\n            \"instantaneous_input_kbps:%.2f\\r\\n\"\n            \"instantaneous_output_kbps:%.2f\\r\\n\"\n            \"rejected_connections:%lld\\r\\n\"\n            \"sync_full:%lld\\r\\n\"\n            \"sync_partial_ok:%lld\\r\\n\"\n            \"sync_partial_err:%lld\\r\\n\"\n            \"expired_keys:%lld\\r\\n\"\n            \"expired_stale_perc:%.2f\\r\\n\"\n            \"expired_time_cap_reached_count:%lld\\r\\n\"\n            \"expire_cycle_cpu_milliseconds:%lld\\r\\n\"\n            \"evicted_keys:%lld\\r\\n\"\n            \"keyspace_hits:%lld\\r\\n\"\n            \"keyspace_misses:%lld\\r\\n\"\n            \"pubsub_channels:%ld\\r\\n\"\n            \"pubsub_patterns:%lu\\r\\n\"\n            \"latest_fork_usec:%lld\\r\\n\"\n            \"migrate_cached_sockets:%ld\\r\\n\"\n            \"slave_expires_tracked_keys:%zu\\r\\n\"\n            \"active_defrag_hits:%lld\\r\\n\"\n            \"active_defrag_misses:%lld\\r\\n\"\n            \"active_defrag_key_hits:%lld\\r\\n\"\n            \"active_defrag_key_misses:%lld\\r\\n\"\n            \"tracking_total_keys:%lld\\r\\n\"\n            \"tracking_total_items:%lld\\r\\n\"\n            \"tracking_total_prefixes:%lld\\r\\n\"\n            \"unexpected_error_replies:%lld\\r\\n\"\n            \"total_reads_processed:%lld\\r\\n\"\n            \"total_writes_processed:%lld\\r\\n\"\n            \"io_threaded_reads_processed:%lld\\r\\n\"\n            \"io_threaded_writes_processed:%lld\\r\\n\",\n            server.stat_numconnections,\n            server.stat_numcommands,\n            getInstantaneousMetric(STATS_METRIC_COMMAND),\n            server.stat_net_input_bytes,\n            server.stat_net_output_bytes,\n            (float)getInstantaneousMetric(STATS_METRIC_NET_INPUT)/1024,\n            (float)getInstantaneousMetric(STATS_METRIC_NET_OUTPUT)/1024,\n            server.stat_rejected_conn,\n            server.stat_sync_full,\n            server.stat_sync_partial_ok,\n            server.stat_sync_partial_err,\n            server.stat_expiredkeys,\n            server.stat_expired_stale_perc*100,\n            server.stat_expired_time_cap_reached_count,\n            server.stat_expire_cycle_time_used/1000,\n            server.stat_evictedkeys,\n            server.stat_keyspace_hits,\n            server.stat_keyspace_misses,\n            dictSize(server.pubsub_channels),\n            listLength(server.pubsub_patterns),\n            server.stat_fork_time,\n            dictSize(server.migrate_cached_sockets),\n            getSlaveKeyWithExpireCount(),\n            server.stat_active_defrag_hits,\n            server.stat_active_defrag_misses,\n            server.stat_active_defrag_key_hits,\n            server.stat_active_defrag_key_misses,\n            (unsigned long long) trackingGetTotalKeys(),\n            (unsigned long long) trackingGetTotalItems(),\n            (unsigned long long) trackingGetTotalPrefixes(),\n            server.stat_unexpected_error_replies,\n            server.stat_total_reads_processed,\n            server.stat_total_writes_processed,\n            server.stat_io_reads_processed,\n            server.stat_io_writes_processed)",
          "old_line_content": "            \"# Stats\\r\\n\"",
          "new_line_content": "        info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 2317,
          "old_api": null,
          "new_api": "createStringObject",
          "old_text": null,
          "new_text": "createStringObject(\"EXEC\",4)",
          "old_line_content": "    for (j = 0; j < OBJ_SHARED_INTEGERS; j++) {",
          "new_line_content": "    shared.exec = createStringObject(\"EXEC\",4);",
          "content_same": false
        },
        {
          "line": 2320,
          "old_api": null,
          "new_api": "createObject",
          "old_text": null,
          "new_text": "createObject(OBJ_STRING,(void*)(long)j)",
          "old_line_content": "        shared.integers[j]->encoding = OBJ_ENCODING_INT;",
          "new_line_content": "            makeObjectShared(createObject(OBJ_STRING,(void*)(long)j));",
          "content_same": false
        },
        {
          "line": 2327,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "    }",
          "new_line_content": "            sdscatprintf(sdsempty(),\"$%d\\r\\n\",j));",
          "content_same": false
        },
        {
          "line": 2334,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\"maxstring\")",
          "old_line_content": "}",
          "new_line_content": "    shared.maxstring = sdsnew(\"maxstring\");",
          "content_same": false
        },
        {
          "line": 4387,
          "old_api": null,
          "new_api": "getInstantaneousMetric",
          "old_text": null,
          "new_text": "getInstantaneousMetric(STATS_METRIC_COMMAND)",
          "old_line_content": "            server.stat_net_input_bytes,",
          "new_line_content": "            getInstantaneousMetric(STATS_METRIC_COMMAND),",
          "content_same": false
        },
        {
          "line": 2341,
          "old_api": null,
          "new_api": "getRandomHexChars",
          "old_text": null,
          "new_text": "getRandomHexChars(server.runid,CONFIG_RUN_ID_SIZE)",
          "old_line_content": "    server.runid[CONFIG_RUN_ID_SIZE] = '\\0';",
          "new_line_content": "    getRandomHexChars(server.runid,CONFIG_RUN_ID_SIZE);",
          "content_same": false
        },
        {
          "line": 4391,
          "old_api": null,
          "new_api": "getInstantaneousMetric",
          "old_text": null,
          "new_text": "getInstantaneousMetric(STATS_METRIC_NET_OUTPUT)",
          "old_line_content": "            server.stat_rejected_conn,",
          "new_line_content": "            (float)getInstantaneousMetric(STATS_METRIC_NET_OUTPUT)/1024,",
          "content_same": false
        },
        {
          "line": 2344,
          "old_api": null,
          "new_api": "clearReplicationId2",
          "old_text": null,
          "new_text": "clearReplicationId2()",
          "old_line_content": "    server.hz = CONFIG_DEFAULT_HZ; /* Initialize it ASAP, even if it may get",
          "new_line_content": "    clearReplicationId2();",
          "content_same": false
        },
        {
          "line": 2349,
          "old_api": null,
          "new_api": "getTimeZone",
          "old_text": null,
          "new_text": "getTimeZone()",
          "old_line_content": "    server.configfile = NULL;",
          "new_line_content": "    server.timezone = getTimeZone(); /* Initialized by tzset(). */",
          "content_same": false
        },
        {
          "line": 4404,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.pubsub_patterns)",
          "old_line_content": "            server.stat_fork_time,",
          "new_line_content": "            listLength(server.pubsub_patterns),",
          "content_same": false
        },
        {
          "line": 4407,
          "old_api": null,
          "new_api": "getSlaveKeyWithExpireCount",
          "old_text": null,
          "new_text": "getSlaveKeyWithExpireCount()",
          "old_line_content": "            server.stat_active_defrag_hits,",
          "new_line_content": "            getSlaveKeyWithExpireCount(),",
          "content_same": false
        },
        {
          "line": 2362,
          "old_api": null,
          "new_api": "zstrdup",
          "old_text": null,
          "new_text": "zstrdup(CONFIG_DEFAULT_LOGFILE)",
          "old_line_content": "    server.aof_state = AOF_OFF;",
          "new_line_content": "    server.logfile = zstrdup(CONFIG_DEFAULT_LOGFILE);",
          "content_same": false
        },
        {
          "line": 4414,
          "old_api": null,
          "new_api": "trackingGetTotalPrefixes",
          "old_text": null,
          "new_text": "trackingGetTotalPrefixes()",
          "old_line_content": "            server.stat_unexpected_error_replies,",
          "new_line_content": "            (unsigned long long) trackingGetTotalPrefixes(),",
          "content_same": false
        },
        {
          "line": 2367,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "    server.aof_rewrite_time_last = -1;",
          "new_line_content": "    server.aof_last_fsync = time(NULL);",
          "content_same": false
        },
        {
          "line": 4425,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n            \"# Replication\\r\\n\"\n            \"role:%s\\r\\n\",\n            server.masterhost == NULL ? \"master\" : \"slave\")",
          "old_line_content": "            \"# Replication\\r\\n\"",
          "new_line_content": "        info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 2379,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(server.blocked_clients_by_type,0,\n           sizeof(server.blocked_clients_by_type))",
          "old_line_content": "           sizeof(server.blocked_clients_by_type));",
          "new_line_content": "    memset(server.blocked_clients_by_type,0,",
          "content_same": false
        },
        {
          "line": 2382,
          "old_api": null,
          "new_api": "zstrdup",
          "old_text": null,
          "new_text": "zstrdup(CONFIG_DEFAULT_CLUSTER_CONFIG_FILE)",
          "old_line_content": "    server.cluster_module_flags = CLUSTER_MODULE_FLAG_NONE;",
          "new_line_content": "    server.cluster_configfile = zstrdup(CONFIG_DEFAULT_CLUSTER_CONFIG_FILE);",
          "content_same": false
        },
        {
          "line": 2384,
          "old_api": null,
          "new_api": "dictCreate",
          "old_text": null,
          "new_text": "dictCreate(&migrateCacheDictType,NULL)",
          "old_line_content": "    server.next_client_id = 1; /* Client IDs, start from 1 .*/",
          "new_line_content": "    server.migrate_cached_sockets = dictCreate(&migrateCacheDictType,NULL);",
          "content_same": false
        },
        {
          "line": 2389,
          "old_api": null,
          "new_api": "resetServerSaveParams",
          "old_text": null,
          "new_text": "resetServerSaveParams()",
          "old_line_content": "",
          "new_line_content": "    resetServerSaveParams();",
          "content_same": false
        },
        {
          "line": 4437,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n                \"master_host:%s\\r\\n\"\n                \"master_port:%d\\r\\n\"\n                \"master_link_status:%s\\r\\n\"\n                \"master_last_io_seconds_ago:%d\\r\\n\"\n                \"master_sync_in_progress:%d\\r\\n\"\n                \"slave_repl_offset:%lld\\r\\n\"\n                ,server.masterhost,\n                server.masterport,\n                (server.repl_state == REPL_STATE_CONNECTED) ?\n                    \"up\" : \"down\",\n                server.master ?\n                ((int)(server.unixtime-server.master->lastinteraction)) : -1,\n                server.repl_state == REPL_STATE_TRANSFER,\n                slave_repl_offset\n            )",
          "old_line_content": "                \"master_host:%s\\r\\n\"",
          "new_line_content": "            info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 2393,
          "old_api": null,
          "new_api": "appendServerSaveParams",
          "old_text": null,
          "new_text": "appendServerSaveParams(60,10000)",
          "old_line_content": "",
          "new_line_content": "    appendServerSaveParams(60,10000); /* save after 1 minute and 10000 changes */",
          "content_same": false
        },
        {
          "line": 4455,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n                    \"master_sync_left_bytes:%lld\\r\\n\"\n                    \"master_sync_last_io_seconds_ago:%d\\r\\n\"\n                    , (long long)\n                        (server.repl_transfer_size - server.repl_transfer_read),\n                    (int)(server.unixtime-server.repl_transfer_lastio)\n                )",
          "old_line_content": "                    \"master_sync_left_bytes:%lld\\r\\n\"",
          "new_line_content": "                info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 2415,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "",
          "new_line_content": "    server.repl_no_slaves_since = time(NULL);",
          "content_same": false
        },
        {
          "line": 4465,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n                    \"master_link_down_since_seconds:%jd\\r\\n\",\n                    (intmax_t)(server.unixtime-server.repl_down_since))",
          "old_line_content": "                    \"master_link_down_since_seconds:%jd\\r\\n\",",
          "new_line_content": "                info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 4467,
          "old_api": null,
          "new_api": "intmax_t)(server.unixtime-server.repl_down_since)",
          "old_text": null,
          "new_text": "intmax_t)(server.unixtime-server.repl_down_since)",
          "old_line_content": "            }",
          "new_line_content": "                    (intmax_t)(server.unixtime-server.repl_down_since));",
          "content_same": false
        },
        {
          "line": 4469,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n                \"slave_priority:%d\\r\\n\"\n                \"slave_read_only:%d\\r\\n\",\n                server.slave_priority,\n                server.repl_slave_ro)",
          "old_line_content": "                \"slave_priority:%d\\r\\n\"",
          "new_line_content": "            info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 4476,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n            \"connected_slaves:%lu\\r\\n\",\n            listLength(server.slaves))",
          "old_line_content": "            \"connected_slaves:%lu\\r\\n\",",
          "new_line_content": "        info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 4478,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.slaves)",
          "old_line_content": "",
          "new_line_content": "            listLength(server.slaves));",
          "content_same": false
        },
        {
          "line": 4484,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n                \"min_slaves_good_slaves:%d\\r\\n\",\n                server.repl_good_slaves_count)",
          "old_line_content": "                \"min_slaves_good_slaves:%d\\r\\n\",",
          "new_line_content": "            info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 4489,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.slaves)",
          "old_line_content": "            int slaveid = 0;",
          "new_line_content": "        if (listLength(server.slaves)) {",
          "content_same": false
        },
        {
          "line": 2446,
          "old_api": null,
          "new_api": "lookupCommandByCString",
          "old_text": null,
          "new_text": "lookupCommandByCString(\"rpoplpush\")",
          "old_line_content": "",
          "new_line_content": "    server.rpoplpushCommand = lookupCommandByCString(\"rpoplpush\");",
          "content_same": false
        },
        {
          "line": 4496,
          "old_api": null,
          "new_api": "listNodeValue",
          "old_text": null,
          "new_text": "listNodeValue(ln)",
          "old_line_content": "                char *state = NULL;",
          "new_line_content": "                client *slave = listNodeValue(ln);",
          "content_same": false
        },
        {
          "line": 4503,
          "old_api": null,
          "new_api": "connPeerToString",
          "old_text": null,
          "new_text": "connPeerToString(slave->conn,ip,sizeof(ip),&port)",
          "old_line_content": "                        continue;",
          "new_line_content": "                    if (connPeerToString(slave->conn,ip,sizeof(ip),&port) == -1)",
          "content_same": false
        },
        {
          "line": 2457,
          "old_api": null,
          "new_api": "initConfigValues",
          "old_text": null,
          "new_text": "initConfigValues()",
          "old_line_content": "}",
          "new_line_content": "    initConfigValues();",
          "content_same": false
        },
        {
          "line": 4521,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "",
          "new_line_content": "                    lag = time(NULL) - slave->repl_ack_time;",
          "content_same": false
        },
        {
          "line": 4523,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n                    \"slave%d:ip=%s,port=%d,state=%s,\"\n                    \"offset=%lld,lag=%ld\\r\\n\",\n                    slaveid,slaveip,slave->slave_listening_port,state,\n                    slave->repl_ack_off, lag)",
          "old_line_content": "                    \"slave%d:ip=%s,port=%d,state=%s,\"",
          "new_line_content": "                info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 2483,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\"Can't restart: this process has no \"\n                             \"permissions to execute %s\", server.executable)",
          "old_line_content": "                             \"permissions to execute %s\", server.executable);",
          "new_line_content": "        serverLog(LL_WARNING,\"Can't restart: this process has no \"",
          "content_same": false
        },
        {
          "line": 4531,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n            \"master_replid:%s\\r\\n\"\n            \"master_replid2:%s\\r\\n\"\n            \"master_repl_offset:%lld\\r\\n\"\n            \"second_repl_offset:%lld\\r\\n\"\n            \"repl_backlog_active:%d\\r\\n\"\n            \"repl_backlog_size:%lld\\r\\n\"\n            \"repl_backlog_first_byte_offset:%lld\\r\\n\"\n            \"repl_backlog_histlen:%lld\\r\\n\",\n            server.replid,\n            server.replid2,\n            server.master_repl_offset,\n            server.second_replid_offset,\n            server.repl_backlog != NULL,\n            server.repl_backlog_size,\n            server.repl_backlog_off,\n            server.repl_backlog_histlen)",
          "old_line_content": "            \"master_replid:%s\\r\\n\"",
          "new_line_content": "        info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 2491,
          "old_api": null,
          "new_api": "rewriteConfig",
          "old_text": null,
          "new_text": "rewriteConfig(server.configfile)",
          "old_line_content": "    {",
          "new_line_content": "        rewriteConfig(server.configfile) == -1)",
          "content_same": false
        },
        {
          "line": 2493,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\"Can't restart: configuration rewrite process \"\n                             \"failed\")",
          "old_line_content": "                             \"failed\");",
          "new_line_content": "        serverLog(LL_WARNING,\"Can't restart: configuration rewrite process \"",
          "content_same": false
        },
        {
          "line": 2500,
          "old_api": null,
          "new_api": "prepareForShutdown",
          "old_text": null,
          "new_text": "prepareForShutdown(SHUTDOWN_NOFLAGS)",
          "old_line_content": "    {",
          "new_line_content": "        prepareForShutdown(SHUTDOWN_NOFLAGS) != C_OK)",
          "content_same": false
        },
        {
          "line": 2502,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\"Can't restart: error preparing for shutdown\")",
          "old_line_content": "        return C_ERR;",
          "new_line_content": "        serverLog(LL_WARNING,\"Can't restart: error preparing for shutdown\");",
          "content_same": false
        },
        {
          "line": 4553,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n        \"# CPU\\r\\n\"\n        \"used_cpu_sys:%ld.%06ld\\r\\n\"\n        \"used_cpu_user:%ld.%06ld\\r\\n\"\n        \"used_cpu_sys_children:%ld.%06ld\\r\\n\"\n        \"used_cpu_user_children:%ld.%06ld\\r\\n\",\n        (long)self_ru.ru_stime.tv_sec, (long)self_ru.ru_stime.tv_usec,\n        (long)self_ru.ru_utime.tv_sec, (long)self_ru.ru_utime.tv_usec,\n        (long)c_ru.ru_stime.tv_sec, (long)c_ru.ru_stime.tv_usec,\n        (long)c_ru.ru_utime.tv_sec, (long)c_ru.ru_utime.tv_usec)",
          "old_line_content": "        \"# CPU\\r\\n\"",
          "new_line_content": "        info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 2511,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(j)",
          "old_line_content": "    }",
          "new_line_content": "        if (fcntl(j,F_GETFD) != -1) close(j);",
          "content_same": false
        },
        {
          "line": 2518,
          "old_api": null,
          "new_api": "execve",
          "old_text": null,
          "new_text": "execve(server.executable,server.exec_argv,environ)",
          "old_line_content": "",
          "new_line_content": "    execve(server.executable,server.exec_argv,environ);",
          "content_same": false
        },
        {
          "line": 2521,
          "old_api": null,
          "new_api": "_exit",
          "old_text": null,
          "new_text": "_exit(1)",
          "old_line_content": "",
          "new_line_content": "    _exit(1);",
          "content_same": false
        },
        {
          "line": 4569,
          "old_api": null,
          "new_api": "genModulesInfoString",
          "old_text": null,
          "new_text": "genModulesInfoString(info)",
          "old_line_content": "    }",
          "new_line_content": "        info = genModulesInfoString(info);",
          "content_same": false
        },
        {
          "line": 4575,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info, \"# Commandstats\\r\\n\")",
          "old_line_content": "",
          "new_line_content": "        info = sdscatprintf(info, \"# Commandstats\\r\\n\");",
          "content_same": false
        },
        {
          "line": 4582,
          "old_api": null,
          "new_api": "dictGetVal",
          "old_text": null,
          "new_text": "dictGetVal(de)",
          "old_line_content": "            if (!c->calls) continue;",
          "new_line_content": "            c = (struct redisCommand *) dictGetVal(de);",
          "content_same": false
        },
        {
          "line": 4584,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n                \"cmdstat_%s:calls=%lld,usec=%lld,usec_per_call=%.2f\\r\\n\",\n                c->name, c->calls, c->microseconds,\n                (c->calls == 0) ? 0 : ((float)c->microseconds/c->calls))",
          "old_line_content": "                \"cmdstat_%s:calls=%lld,usec=%lld,usec_per_call=%.2f\\r\\n\",",
          "new_line_content": "            info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 2540,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "        server.maxclients = 1024-CONFIG_MIN_RESERVED_FDS;",
          "new_line_content": "            strerror(errno));",
          "content_same": false
        },
        {
          "line": 4589,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "    }",
          "new_line_content": "        dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 4595,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n        \"# Cluster\\r\\n\"\n        \"cluster_enabled:%d\\r\\n\",\n        server.cluster_enabled)",
          "old_line_content": "        \"# Cluster\\r\\n\"",
          "new_line_content": "        info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 4604,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info, \"# Keyspace\\r\\n\")",
          "old_line_content": "        for (j = 0; j < server.dbnum; j++) {",
          "new_line_content": "        info = sdscatprintf(info, \"# Keyspace\\r\\n\");",
          "content_same": false
        },
        {
          "line": 2559,
          "old_api": null,
          "new_api": "setrlimit",
          "old_text": null,
          "new_text": "setrlimit(RLIMIT_NOFILE,&limit)",
          "old_line_content": "                setrlimit_error = errno;",
          "new_line_content": "                if (setrlimit(RLIMIT_NOFILE,&limit) != -1) break;",
          "content_same": false
        },
        {
          "line": 4609,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(server.db[j].expires)",
          "old_line_content": "            if (keys || vkeys) {",
          "new_line_content": "            vkeys = dictSize(server.db[j].expires);",
          "content_same": false
        },
        {
          "line": 4611,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n                    \"db%d:keys=%lld,expires=%lld,avg_ttl=%lld\\r\\n\",\n                    j, keys, vkeys, server.db[j].avg_ttl)",
          "old_line_content": "                    \"db%d:keys=%lld,expires=%lld,avg_ttl=%lld\\r\\n\",",
          "new_line_content": "                info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 4623,
          "old_api": null,
          "new_api": "modulesCollectInfo",
          "old_text": null,
          "new_text": "modulesCollectInfo(info,\n                                  everything || modules ? NULL: section,\n                                  0, /* not a crash report */\n                                  sections)",
          "old_line_content": "                                  everything || modules ? NULL: section,",
          "new_line_content": "        info = modulesCollectInfo(info,",
          "content_same": false
        },
        {
          "line": 2579,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\"Your current 'ulimit -n' \"\n                        \"of %llu is not enough for the server to start. \"\n                        \"Please increase your open file limit to at least \"\n                        \"%llu. Exiting.\",\n                        (unsigned long long) oldlimit,\n                        (unsigned long long) maxfiles)",
          "old_line_content": "                        \"of %llu is not enough for the server to start. \"",
          "new_line_content": "                    serverLog(LL_WARNING,\"Your current 'ulimit -n' \"",
          "content_same": false
        },
        {
          "line": 2585,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "                }",
          "new_line_content": "                    exit(1);",
          "content_same": false
        },
        {
          "line": 2587,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\"You requested maxclients of %d \"\n                    \"requiring at least %llu max file descriptors.\",\n                    old_maxclients,\n                    (unsigned long long) maxfiles)",
          "old_line_content": "                    \"requiring at least %llu max file descriptors.\",",
          "new_line_content": "                serverLog(LL_WARNING,\"You requested maxclients of %d \"",
          "content_same": false
        },
        {
          "line": 4635,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.syntaxerr)",
          "old_line_content": "        return;",
          "new_line_content": "        addReply(c,shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 2591,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\"Server can't set maximum open files \"\n                    \"to %llu because of OS error: %s.\",\n                    (unsigned long long) maxfiles, strerror(setrlimit_error))",
          "old_line_content": "                    \"to %llu because of OS error: %s.\",",
          "new_line_content": "                serverLog(LL_WARNING,\"Server can't set maximum open files \"",
          "content_same": false
        },
        {
          "line": 4640,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(info)",
          "old_line_content": "}",
          "new_line_content": "    sdsfree(info);",
          "content_same": false
        },
        {
          "line": 2594,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\"Current maximum open files is %llu. \"\n                    \"maxclients has been reduced to %d to compensate for \"\n                    \"low ulimit. \"\n                    \"If you need higher maxclients increase 'ulimit -n'.\",\n                    (unsigned long long) bestlimit, server.maxclients)",
          "old_line_content": "                    \"maxclients has been reduced to %d to compensate for \"",
          "new_line_content": "                serverLog(LL_WARNING,\"Current maximum open files is %llu. \"",
          "content_same": false
        },
        {
          "line": 2600,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_NOTICE,\"Increased maximum number of open files \"\n                    \"to %llu (it was originally set to %llu).\",\n                    (unsigned long long) maxfiles,\n                    (unsigned long long) oldlimit)",
          "old_line_content": "                    \"to %llu (it was originally set to %llu).\",",
          "new_line_content": "                serverLog(LL_NOTICE,\"Increased maximum number of open files \"",
          "content_same": false
        },
        {
          "line": 4649,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "}",
          "new_line_content": "    addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 4656,
          "old_api": null,
          "new_api": "fopen",
          "old_text": null,
          "new_text": "fopen(\"/proc/sys/vm/overcommit_memory\",\"r\")",
          "old_line_content": "    char buf[64];",
          "new_line_content": "    FILE *fp = fopen(\"/proc/sys/vm/overcommit_memory\",\"r\");",
          "content_same": false
        },
        {
          "line": 2613,
          "old_api": null,
          "new_api": "fopen",
          "old_text": null,
          "new_text": "fopen(\"/proc/sys/net/core/somaxconn\",\"r\")",
          "old_line_content": "    char buf[1024];",
          "new_line_content": "    FILE *fp = fopen(\"/proc/sys/net/core/somaxconn\",\"r\");",
          "content_same": false
        },
        {
          "line": 4661,
          "old_api": null,
          "new_api": "fclose",
          "old_text": null,
          "new_text": "fclose(fp)",
          "old_line_content": "        return -1;",
          "new_line_content": "        fclose(fp);",
          "content_same": false
        },
        {
          "line": 4664,
          "old_api": null,
          "new_api": "fclose",
          "old_text": null,
          "new_text": "fclose(fp)",
          "old_line_content": "",
          "new_line_content": "    fclose(fp);",
          "content_same": false
        },
        {
          "line": 2617,
          "old_api": null,
          "new_api": "atoi",
          "old_text": null,
          "new_text": "atoi(buf)",
          "old_line_content": "        if (somaxconn > 0 && somaxconn < server.tcp_backlog) {",
          "new_line_content": "        int somaxconn = atoi(buf);",
          "content_same": false
        },
        {
          "line": 4666,
          "old_api": null,
          "new_api": "atoi",
          "old_text": null,
          "new_text": "atoi(buf)",
          "old_line_content": "}",
          "new_line_content": "    return atoi(buf);",
          "content_same": false
        },
        {
          "line": 2619,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\"WARNING: The TCP backlog setting of %d cannot be enforced because /proc/sys/net/core/somaxconn is set to the lower value of %d.\", server.tcp_backlog, somaxconn)",
          "old_line_content": "        }",
          "new_line_content": "            serverLog(LL_WARNING,\"WARNING: The TCP backlog setting of %d cannot be enforced because /proc/sys/net/core/somaxconn is set to the lower value of %d.\", server.tcp_backlog, somaxconn);",
          "content_same": false
        },
        {
          "line": 2622,
          "old_api": null,
          "new_api": "fclose",
          "old_text": null,
          "new_text": "fclose(fp)",
          "old_line_content": "#endif",
          "new_line_content": "    fclose(fp);",
          "content_same": false
        },
        {
          "line": 4671,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\"WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.\")",
          "old_line_content": "    }",
          "new_line_content": "        serverLog(LL_WARNING,\"WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.\");",
          "content_same": false
        },
        {
          "line": 4674,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\"WARNING you have Transparent Huge Pages (THP) support enabled in your kernel. This will create latency and memory usage issues with Redis. To fix this issue run the command 'echo never > /sys/kernel/mm/transparent_hugepage/enabled' as root, and add it to your /etc/rc.local in order to retain the setting after a reboot. Redis must be restarted after THP is disabled.\")",
          "old_line_content": "    }",
          "new_line_content": "        serverLog(LL_WARNING,\"WARNING you have Transparent Huge Pages (THP) support enabled in your kernel. This will create latency and memory usage issues with Redis. To fix this issue run the command 'echo never > /sys/kernel/mm/transparent_hugepage/enabled' as root, and add it to your /etc/rc.local in order to retain the setting after a reboot. Redis must be restarted after THP is disabled.\");",
          "content_same": false
        },
        {
          "line": 4682,
          "old_api": null,
          "new_api": "zstrdup",
          "old_text": null,
          "new_text": "zstrdup(CONFIG_DEFAULT_PID_FILE)",
          "old_line_content": "",
          "new_line_content": "    if (!server.pidfile) server.pidfile = zstrdup(CONFIG_DEFAULT_PID_FILE);",
          "content_same": false
        },
        {
          "line": 4685,
          "old_api": null,
          "new_api": "fopen",
          "old_text": null,
          "new_text": "fopen(server.pidfile,\"w\")",
          "old_line_content": "    if (fp) {",
          "new_line_content": "    FILE *fp = fopen(server.pidfile,\"w\");",
          "content_same": false
        },
        {
          "line": 4688,
          "old_api": null,
          "new_api": "fclose",
          "old_text": null,
          "new_text": "fclose(fp)",
          "old_line_content": "    }",
          "new_line_content": "        fclose(fp);",
          "content_same": false
        },
        {
          "line": 4696,
          "old_api": null,
          "new_api": "setsid",
          "old_text": null,
          "new_text": "setsid()",
          "old_line_content": "",
          "new_line_content": "    setsid(); /* create a new session */",
          "content_same": false
        },
        {
          "line": 2655,
          "old_api": null,
          "new_api": "anetTcp6Server",
          "old_text": null,
          "new_text": "anetTcp6Server(server.neterr,port,NULL,\n                server.tcp_backlog)",
          "old_line_content": "                server.tcp_backlog);",
          "new_line_content": "            fds[*count] = anetTcp6Server(server.neterr,port,NULL,",
          "content_same": false
        },
        {
          "line": 4705,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(fd)",
          "old_line_content": "    }",
          "new_line_content": "        if (fd > STDERR_FILENO) close(fd);",
          "content_same": false
        },
        {
          "line": 2658,
          "old_api": null,
          "new_api": "anetNonBlock",
          "old_text": null,
          "new_text": "anetNonBlock(NULL,fds[*count])",
          "old_line_content": "                (*count)++;",
          "new_line_content": "                anetNonBlock(NULL,fds[*count]);",
          "content_same": false
        },
        {
          "line": 2662,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\"Not listening to IPv6: unsupported\")",
          "old_line_content": "            }",
          "new_line_content": "                serverLog(LL_WARNING,\"Not listening to IPv6: unsupported\");",
          "content_same": false
        },
        {
          "line": 4710,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\"Redis server v=%s sha=%s:%d malloc=%s bits=%d build=%llx\\n\",\n        REDIS_VERSION,\n        redisGitSHA1(),\n        atoi(redisGitDirty()) > 0,\n        ZMALLOC_LIB,\n        sizeof(long) == 4 ? 32 : 64,\n        (unsigned long long) redisBuildId())",
          "old_line_content": "        REDIS_VERSION,",
          "new_line_content": "    printf(\"Redis server v=%s sha=%s:%d malloc=%s bits=%d build=%llx\\n\",",
          "content_same": false
        },
        {
          "line": 4713,
          "old_api": null,
          "new_api": "redisGitDirty",
          "old_text": null,
          "new_text": "redisGitDirty()",
          "old_line_content": "        ZMALLOC_LIB,",
          "new_line_content": "        atoi(redisGitDirty()) > 0,",
          "content_same": false
        },
        {
          "line": 2667,
          "old_api": null,
          "new_api": "anetTcpServer",
          "old_text": null,
          "new_text": "anetTcpServer(server.neterr,port,NULL,\n                    server.tcp_backlog)",
          "old_line_content": "                    server.tcp_backlog);",
          "new_line_content": "                fds[*count] = anetTcpServer(server.neterr,port,NULL,",
          "content_same": false
        },
        {
          "line": 4717,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(0)",
          "old_line_content": "}",
          "new_line_content": "    exit(0);",
          "content_same": false
        },
        {
          "line": 2670,
          "old_api": null,
          "new_api": "anetNonBlock",
          "old_text": null,
          "new_text": "anetNonBlock(NULL,fds[*count])",
          "old_line_content": "                    (*count)++;",
          "new_line_content": "                    anetNonBlock(NULL,fds[*count]);",
          "content_same": false
        },
        {
          "line": 2674,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\"Not listening to IPv4: unsupported\")",
          "old_line_content": "                }",
          "new_line_content": "                    serverLog(LL_WARNING,\"Not listening to IPv4: unsupported\");",
          "content_same": false
        },
        {
          "line": 2681,
          "old_api": null,
          "new_api": "strchr",
          "old_text": null,
          "new_text": "strchr(server.bindaddr[j],':')",
          "old_line_content": "            /* Bind IPv6 address. */",
          "new_line_content": "        } else if (strchr(server.bindaddr[j],':')) {",
          "content_same": false
        },
        {
          "line": 2683,
          "old_api": null,
          "new_api": "anetTcp6Server",
          "old_text": null,
          "new_text": "anetTcp6Server(server.neterr,port,server.bindaddr[j],\n                server.tcp_backlog)",
          "old_line_content": "                server.tcp_backlog);",
          "new_line_content": "            fds[*count] = anetTcp6Server(server.neterr,port,server.bindaddr[j],",
          "content_same": false
        },
        {
          "line": 4734,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "}",
          "new_line_content": "    exit(1);",
          "content_same": false
        },
        {
          "line": 2687,
          "old_api": null,
          "new_api": "anetTcpServer",
          "old_text": null,
          "new_text": "anetTcpServer(server.neterr,port,server.bindaddr[j],\n                server.tcp_backlog)",
          "old_line_content": "                server.tcp_backlog);",
          "new_line_content": "            fds[*count] = anetTcpServer(server.neterr,port,server.bindaddr[j],",
          "content_same": false
        },
        {
          "line": 2691,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\n                \"Could not create server TCP listening socket %s:%d: %s\",\n                server.bindaddr[j] ? server.bindaddr[j] : \"*\",\n                port, server.neterr)",
          "old_line_content": "                \"Could not create server TCP listening socket %s:%d: %s\",",
          "new_line_content": "            serverLog(LL_WARNING,",
          "content_same": false
        },
        {
          "line": 4739,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(1024*16)",
          "old_line_content": "    char *mode;",
          "new_line_content": "    char *buf = zmalloc(1024*16);",
          "content_same": false
        },
        {
          "line": 2701,
          "old_api": null,
          "new_api": "anetNonBlock",
          "old_text": null,
          "new_text": "anetNonBlock(NULL,fds[*count])",
          "old_line_content": "        (*count)++;",
          "new_line_content": "        anetNonBlock(NULL,fds[*count]);",
          "content_same": false
        },
        {
          "line": 4751,
          "old_api": null,
          "new_api": "fileno",
          "old_text": null,
          "new_text": "fileno(stdout)",
          "old_line_content": "                     server.always_show_logo);",
          "new_line_content": "                      isatty(fileno(stdout))) ||",
          "content_same": false
        },
        {
          "line": 4755,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_NOTICE,\n            \"Running mode=%s, port=%d.\",\n            mode, server.port ? server.port : server.tls_port\n        )",
          "old_line_content": "            \"Running mode=%s, port=%d.\",",
          "new_line_content": "        serverLog(LL_NOTICE,",
          "content_same": false
        },
        {
          "line": 4760,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(buf,1024*16,ascii_logo,\n            REDIS_VERSION,\n            redisGitSHA1(),\n            strtol(redisGitDirty(),NULL,10) > 0,\n            (sizeof(long) == 8) ? \"64\" : \"32\",\n            mode, server.port ? server.port : server.tls_port,\n            (long) getpid()\n        )",
          "old_line_content": "            REDIS_VERSION,",
          "new_line_content": "        snprintf(buf,1024*16,ascii_logo,",
          "content_same": false
        },
        {
          "line": 4763,
          "old_api": null,
          "new_api": "redisGitDirty",
          "old_text": null,
          "new_text": "redisGitDirty()",
          "old_line_content": "            (sizeof(long) == 8) ? \"64\" : \"32\",",
          "new_line_content": "            strtol(redisGitDirty(),NULL,10) > 0,",
          "content_same": false
        },
        {
          "line": 4766,
          "old_api": null,
          "new_api": "getpid",
          "old_text": null,
          "new_text": "getpid()",
          "old_line_content": "        );",
          "new_line_content": "            (long) getpid()",
          "content_same": false
        },
        {
          "line": 4768,
          "old_api": null,
          "new_api": "serverLogRaw",
          "old_text": null,
          "new_text": "serverLogRaw(LL_NOTICE|LL_RAW,buf)",
          "old_line_content": "    }",
          "new_line_content": "        serverLogRaw(LL_NOTICE|LL_RAW,buf);",
          "content_same": false
        },
        {
          "line": 4770,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(buf)",
          "old_line_content": "}",
          "new_line_content": "    zfree(buf);",
          "content_same": false
        },
        {
          "line": 2739,
          "old_api": null,
          "new_api": "mstime",
          "old_text": null,
          "new_text": "mstime()",
          "old_line_content": "        server.inst_metric[j].last_sample_count = 0;",
          "new_line_content": "        server.inst_metric[j].last_sample_time = mstime();",
          "content_same": false
        },
        {
          "line": 2741,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(server.inst_metric[j].samples,0,\n            sizeof(server.inst_metric[j].samples))",
          "old_line_content": "            sizeof(server.inst_metric[j].samples));",
          "new_line_content": "        memset(server.inst_metric[j].samples,0,",
          "content_same": false
        },
        {
          "line": 4794,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "    } else if (server.loading) {",
          "new_line_content": "        exit(1); /* Exit with an error since this was not a clean shutdown. */",
          "content_same": false
        },
        {
          "line": 4797,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(0)",
          "old_line_content": "    }",
          "new_line_content": "        exit(0);",
          "content_same": false
        },
        {
          "line": 4800,
          "old_api": null,
          "new_api": "serverLogFromHandler",
          "old_text": null,
          "new_text": "serverLogFromHandler(LL_WARNING, msg)",
          "old_line_content": "    server.shutdown_asap = 1;",
          "new_line_content": "    serverLogFromHandler(LL_WARNING, msg);",
          "content_same": false
        },
        {
          "line": 2755,
          "old_api": null,
          "new_api": "setupSignalHandlers",
          "old_text": null,
          "new_text": "setupSignalHandlers()",
          "old_line_content": "",
          "new_line_content": "    setupSignalHandlers();",
          "content_same": false
        },
        {
          "line": 2758,
          "old_api": null,
          "new_api": "openlog",
          "old_text": null,
          "new_text": "openlog(server.syslog_ident, LOG_PID | LOG_NDELAY | LOG_NOWAIT,\n            server.syslog_facility)",
          "old_line_content": "            server.syslog_facility);",
          "new_line_content": "        openlog(server.syslog_ident, LOG_PID | LOG_NDELAY | LOG_NOWAIT,",
          "content_same": false
        },
        {
          "line": 4809,
          "old_api": null,
          "new_api": "sigemptyset",
          "old_text": null,
          "new_text": "sigemptyset(&act.sa_mask)",
          "old_line_content": "    act.sa_flags = 0;",
          "new_line_content": "    sigemptyset(&act.sa_mask);",
          "content_same": false
        },
        {
          "line": 2765,
          "old_api": null,
          "new_api": "getpid",
          "old_text": null,
          "new_text": "getpid()",
          "old_line_content": "    server.current_client = NULL;",
          "new_line_content": "    server.pid = getpid();",
          "content_same": false
        },
        {
          "line": 4813,
          "old_api": null,
          "new_api": "sigaction",
          "old_text": null,
          "new_text": "sigaction(SIGINT, &act, NULL)",
          "old_line_content": "",
          "new_line_content": "    sigaction(SIGINT, &act, NULL);",
          "content_same": false
        },
        {
          "line": 4815,
          "old_api": null,
          "new_api": "sigemptyset",
          "old_text": null,
          "new_text": "sigemptyset(&act.sa_mask)",
          "old_line_content": "    act.sa_flags = SA_NODEFER | SA_RESETHAND | SA_SIGINFO;",
          "new_line_content": "    sigemptyset(&act.sa_mask);",
          "content_same": false
        },
        {
          "line": 4822,
          "old_api": null,
          "new_api": "sigaction",
          "old_text": null,
          "new_text": "sigaction(SIGILL, &act, NULL)",
          "old_line_content": "    }",
          "new_line_content": "        sigaction(SIGILL, &act, NULL);",
          "content_same": false
        },
        {
          "line": 2775,
          "old_api": null,
          "new_api": "raxNew",
          "old_text": null,
          "new_text": "raxNew()",
          "old_line_content": "    server.slaveseldb = -1; /* Force to emit the first SELECT command. */",
          "new_line_content": "    server.clients_timeout_table = raxNew();",
          "content_same": false
        },
        {
          "line": 2779,
          "old_api": null,
          "new_api": "listCreate",
          "old_text": null,
          "new_text": "listCreate()",
          "old_line_content": "    server.get_ack_from_slaves = 0;",
          "new_line_content": "    server.clients_waiting_acks = listCreate();",
          "content_same": false
        },
        {
          "line": 4829,
          "old_api": null,
          "new_api": "sigemptyset",
          "old_text": null,
          "new_text": "sigemptyset(&act.sa_mask)",
          "old_line_content": "    act.sa_flags = SA_NODEFER | SA_RESETHAND;",
          "new_line_content": "    sigemptyset(&act.sa_mask);",
          "content_same": false
        },
        {
          "line": 2783,
          "old_api": null,
          "new_api": "zmalloc_get_memory_size",
          "old_text": null,
          "new_text": "zmalloc_get_memory_size()",
          "old_line_content": "",
          "new_line_content": "    server.system_memory_size = zmalloc_get_memory_size();",
          "content_same": false
        },
        {
          "line": 4835,
          "old_api": null,
          "new_api": "sigaction",
          "old_text": null,
          "new_text": "sigaction(SIGILL, &act, NULL)",
          "old_line_content": "}",
          "new_line_content": "    sigaction(SIGILL, &act, NULL);",
          "content_same": false
        },
        {
          "line": 2788,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "    }",
          "new_line_content": "        exit(1);",
          "content_same": false
        },
        {
          "line": 2793,
          "old_api": null,
          "new_api": "aeCreateEventLoop",
          "old_text": null,
          "new_text": "aeCreateEventLoop(server.maxclients+CONFIG_FDSET_INCR)",
          "old_line_content": "    if (server.el == NULL) {",
          "new_line_content": "    server.el = aeCreateEventLoop(server.maxclients+CONFIG_FDSET_INCR);",
          "content_same": false
        },
        {
          "line": 2795,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\n            \"Failed creating the event loop. Error message: '%s'\",\n            strerror(errno))",
          "old_line_content": "            \"Failed creating the event loop. Error message: '%s'\",",
          "new_line_content": "        serverLog(LL_WARNING,",
          "content_same": false
        },
        {
          "line": 4845,
          "old_api": null,
          "new_api": "exitFromChild",
          "old_text": null,
          "new_text": "exitFromChild(SERVER_CHILD_NOERROR_RETVAL)",
          "old_line_content": "}",
          "new_line_content": "    exitFromChild(SERVER_CHILD_NOERROR_RETVAL);",
          "content_same": false
        },
        {
          "line": 2798,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "    }",
          "new_line_content": "        exit(1);",
          "content_same": false
        },
        {
          "line": 2800,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(redisDb)*server.dbnum)",
          "old_line_content": "",
          "new_line_content": "    server.db = zmalloc(sizeof(redisDb)*server.dbnum);",
          "content_same": false
        },
        {
          "line": 2805,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "    if (server.tls_port != 0 &&",
          "new_line_content": "        exit(1);",
          "content_same": false
        },
        {
          "line": 4853,
          "old_api": null,
          "new_api": "sigemptyset",
          "old_text": null,
          "new_text": "sigemptyset(&act.sa_mask)",
          "old_line_content": "    act.sa_flags = 0;",
          "new_line_content": "    sigemptyset(&act.sa_mask);",
          "content_same": false
        },
        {
          "line": 2808,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "",
          "new_line_content": "        exit(1);",
          "content_same": false
        },
        {
          "line": 4856,
          "old_api": null,
          "new_api": "sigaction",
          "old_text": null,
          "new_text": "sigaction(SIGUSR1, &act, NULL)",
          "old_line_content": "    return;",
          "new_line_content": "    sigaction(SIGUSR1, &act, NULL);",
          "content_same": false
        },
        {
          "line": 2813,
          "old_api": null,
          "new_api": "anetUnixServer",
          "old_text": null,
          "new_text": "anetUnixServer(server.neterr,server.unixsocket,\n            server.unixsocketperm, server.tcp_backlog)",
          "old_line_content": "            server.unixsocketperm, server.tcp_backlog);",
          "new_line_content": "        server.sofd = anetUnixServer(server.neterr,server.unixsocket,",
          "content_same": false
        },
        {
          "line": 4863,
          "old_api": null,
          "new_api": "fork",
          "old_text": null,
          "new_text": "fork()",
          "old_line_content": "        /* Child */",
          "new_line_content": "    if ((childpid = fork()) == 0) {",
          "content_same": false
        },
        {
          "line": 2817,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "        }",
          "new_line_content": "            exit(1);",
          "content_same": false
        },
        {
          "line": 4866,
          "old_api": null,
          "new_api": "setupChildSignalHandlers",
          "old_text": null,
          "new_text": "setupChildSignalHandlers()",
          "old_line_content": "    } else {",
          "new_line_content": "        setupChildSignalHandlers();",
          "content_same": false
        },
        {
          "line": 2819,
          "old_api": null,
          "new_api": "anetNonBlock",
          "old_text": null,
          "new_text": "anetNonBlock(NULL,server.sofd)",
          "old_line_content": "    }",
          "new_line_content": "        anetNonBlock(NULL,server.sofd);",
          "content_same": false
        },
        {
          "line": 4871,
          "old_api": null,
          "new_api": "latencyAddSampleIfNeeded",
          "old_text": null,
          "new_text": "latencyAddSampleIfNeeded(\"fork\",server.stat_fork_time/1000)",
          "old_line_content": "        if (childpid == -1) {",
          "new_line_content": "        latencyAddSampleIfNeeded(\"fork\",server.stat_fork_time/1000);",
          "content_same": false
        },
        {
          "line": 2825,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "    }",
          "new_line_content": "        exit(1);",
          "content_same": false
        },
        {
          "line": 4875,
          "old_api": null,
          "new_api": "updateDictResizePolicy",
          "old_text": null,
          "new_text": "updateDictResizePolicy()",
          "old_line_content": "    }",
          "new_line_content": "        updateDictResizePolicy();",
          "content_same": false
        },
        {
          "line": 2831,
          "old_api": null,
          "new_api": "dictCreate",
          "old_text": null,
          "new_text": "dictCreate(&keyptrDictType,NULL)",
          "old_line_content": "        server.db[j].expires_cursor = 0;",
          "new_line_content": "        server.db[j].expires = dictCreate(&keyptrDictType,NULL);",
          "content_same": false
        },
        {
          "line": 4881,
          "old_api": null,
          "new_api": "zmalloc_get_private_dirty",
          "old_text": null,
          "new_text": "zmalloc_get_private_dirty(-1)",
          "old_line_content": "",
          "new_line_content": "    size_t private_dirty = zmalloc_get_private_dirty(-1);",
          "content_same": false
        },
        {
          "line": 2835,
          "old_api": null,
          "new_api": "dictCreate",
          "old_text": null,
          "new_text": "dictCreate(&keylistDictType,NULL)",
          "old_line_content": "        server.db[j].id = j;",
          "new_line_content": "        server.db[j].watched_keys = dictCreate(&keylistDictType,NULL);",
          "content_same": false
        },
        {
          "line": 4884,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_NOTICE,\n            \"%s: %zu MB of memory used by copy-on-write\",\n            pname, private_dirty/(1024*1024))",
          "old_line_content": "            \"%s: %zu MB of memory used by copy-on-write\",",
          "new_line_content": "        serverLog(LL_NOTICE,",
          "content_same": false
        },
        {
          "line": 2839,
          "old_api": null,
          "new_api": "listSetFreeMethod",
          "old_text": null,
          "new_text": "listSetFreeMethod(server.db[j].defrag_later,(void (*)(void*))sdsfree)",
          "old_line_content": "    }",
          "new_line_content": "        listSetFreeMethod(server.db[j].defrag_later,(void (*)(void*))sdsfree);",
          "content_same": false
        },
        {
          "line": 4890,
          "old_api": null,
          "new_api": "sendChildInfo",
          "old_text": null,
          "new_text": "sendChildInfo(ptype)",
          "old_line_content": "}",
          "new_line_content": "    sendChildInfo(ptype);",
          "content_same": false
        },
        {
          "line": 2846,
          "old_api": null,
          "new_api": "listSetMatchMethod",
          "old_text": null,
          "new_text": "listSetMatchMethod(server.pubsub_patterns,listMatchPubsubPattern)",
          "old_line_content": "    server.cronloops = 0;",
          "new_line_content": "    listSetMatchMethod(server.pubsub_patterns,listMatchPubsubPattern);",
          "content_same": false
        },
        {
          "line": 4900,
          "old_api": null,
          "new_api": "strstr",
          "old_text": null,
          "new_text": "strstr(argv[0],\"redis-sentinel\")",
          "old_line_content": "    for (j = 1; j < argc; j++)",
          "new_line_content": "    if (strstr(argv[0],\"redis-sentinel\") != NULL) return 1;",
          "content_same": false
        },
        {
          "line": 4902,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(argv[j],\"--sentinel\")",
          "old_line_content": "    return 0;",
          "new_line_content": "        if (!strcmp(argv[j],\"--sentinel\")) return 1;",
          "content_same": false
        },
        {
          "line": 4908,
          "old_api": null,
          "new_api": "ustime",
          "old_text": null,
          "new_text": "ustime()",
          "old_line_content": "    if (server.aof_state == AOF_ON) {",
          "new_line_content": "    long long start = ustime();",
          "content_same": false
        },
        {
          "line": 2863,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "    server.lastbgsave_try = 0;    /* At startup we never tried to BGSAVE. */",
          "new_line_content": "    server.lastsave = time(NULL); /* At startup we consider the DB saved. */",
          "content_same": false
        },
        {
          "line": 4911,
          "old_api": null,
          "new_api": "ustime",
          "old_text": null,
          "new_text": "ustime()",
          "old_line_content": "    } else {",
          "new_line_content": "            serverLog(LL_NOTICE,\"DB loaded from append only file: %.3f seconds\",(float)(ustime()-start)/1000000);",
          "content_same": false
        },
        {
          "line": 2868,
          "old_api": null,
          "new_api": "resetServerStats",
          "old_text": null,
          "new_text": "resetServerStats()",
          "old_line_content": "    /* A few stats we don't want to reset: server startup time, and peak mem. */",
          "new_line_content": "    resetServerStats();",
          "content_same": false
        },
        {
          "line": 4917,
          "old_api": null,
          "new_api": "ustime",
          "old_text": null,
          "new_text": "ustime()",
          "old_line_content": "",
          "new_line_content": "                (float)(ustime()-start)/1000000);",
          "content_same": false
        },
        {
          "line": 2870,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "    server.stat_peak_memory = 0;",
          "new_line_content": "    server.stat_starttime = time(NULL);",
          "content_same": false
        },
        {
          "line": 4922,
          "old_api": null,
          "new_api": "nodeIsSlave",
          "old_text": null,
          "new_text": "nodeIsSlave(server.cluster->myself)",
          "old_line_content": "                rsi.repl_id_is_set &&",
          "new_line_content": "                nodeIsSlave(server.cluster->myself))) &&",
          "content_same": false
        },
        {
          "line": 4930,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(server.replid,rsi.repl_id,sizeof(server.replid))",
          "old_line_content": "                server.master_repl_offset = rsi.repl_offset;",
          "new_line_content": "                memcpy(server.replid,rsi.repl_id,sizeof(server.replid));",
          "content_same": false
        },
        {
          "line": 4936,
          "old_api": null,
          "new_api": "selectDb",
          "old_text": null,
          "new_text": "selectDb(server.cached_master,rsi.repl_stream_db)",
          "old_line_content": "            }",
          "new_line_content": "                selectDb(server.cached_master,rsi.repl_stream_db);",
          "content_same": false
        },
        {
          "line": 2892,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "    }",
          "new_line_content": "        exit(1);",
          "content_same": false
        },
        {
          "line": 4940,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "        }",
          "new_line_content": "            exit(1);",
          "content_same": false
        },
        {
          "line": 2898,
          "old_api": null,
          "new_api": "aeCreateFileEvent",
          "old_text": null,
          "new_text": "aeCreateFileEvent(server.el, server.ipfd[j], AE_READABLE,\n            acceptTcpHandler,NULL)",
          "old_line_content": "            acceptTcpHandler,NULL) == AE_ERR)",
          "new_line_content": "        if (aeCreateFileEvent(server.el, server.ipfd[j], AE_READABLE,",
          "content_same": false
        },
        {
          "line": 4946,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\"Out Of Memory allocating %zu bytes!\",\n        allocation_size)",
          "old_line_content": "        allocation_size);",
          "new_line_content": "    serverLog(LL_WARNING,\"Out Of Memory allocating %zu bytes!\",",
          "content_same": false
        },
        {
          "line": 4948,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Redis aborting for OUT OF MEMORY\")",
          "old_line_content": "}",
          "new_line_content": "    serverPanic(\"Redis aborting for OUT OF MEMORY\");",
          "content_same": false
        },
        {
          "line": 2901,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\n                    \"Unrecoverable error creating server.ipfd file event.\")",
          "old_line_content": "                    \"Unrecoverable error creating server.ipfd file event.\");",
          "new_line_content": "                serverPanic(",
          "content_same": false
        },
        {
          "line": 2906,
          "old_api": null,
          "new_api": "aeCreateFileEvent",
          "old_text": null,
          "new_text": "aeCreateFileEvent(server.el, server.tlsfd[j], AE_READABLE,\n            acceptTLSHandler,NULL)",
          "old_line_content": "            acceptTLSHandler,NULL) == AE_ERR)",
          "new_line_content": "        if (aeCreateFileEvent(server.el, server.tlsfd[j], AE_READABLE,",
          "content_same": false
        },
        {
          "line": 2909,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\n                    \"Unrecoverable error creating server.tlsfd file event.\")",
          "old_line_content": "                    \"Unrecoverable error creating server.tlsfd file event.\");",
          "new_line_content": "                serverPanic(",
          "content_same": false
        },
        {
          "line": 4957,
          "old_api": null,
          "new_api": "setproctitle",
          "old_text": null,
          "new_text": "setproctitle(\"%s %s:%d%s\",\n        title,\n        server.bindaddr_count ? server.bindaddr[0] : \"*\",\n        server.port ? server.port : server.tls_port,\n        server_mode)",
          "old_line_content": "        title,",
          "new_line_content": "    setproctitle(\"%s %s:%d%s\",",
          "content_same": false
        },
        {
          "line": 2914,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Unrecoverable error creating server.sofd file event.\")",
          "old_line_content": "",
          "new_line_content": "        acceptUnixHandler,NULL) == AE_ERR) serverPanic(\"Unrecoverable error creating server.sofd file event.\");",
          "content_same": false
        },
        {
          "line": 4963,
          "old_api": null,
          "new_api": "UNUSED",
          "old_text": null,
          "new_text": "UNUSED(title)",
          "old_line_content": "#endif",
          "new_line_content": "    UNUSED(title);",
          "content_same": false
        },
        {
          "line": 2919,
          "old_api": null,
          "new_api": "aeCreateFileEvent",
          "old_text": null,
          "new_text": "aeCreateFileEvent(server.el, server.module_blocked_pipe[0], AE_READABLE,\n        moduleBlockedClientPipeReadable,NULL)",
          "old_line_content": "        moduleBlockedClientPipeReadable,NULL) == AE_ERR) {",
          "new_line_content": "    if (aeCreateFileEvent(server.el, server.module_blocked_pipe[0], AE_READABLE,",
          "content_same": false
        },
        {
          "line": 2921,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\n                \"Error registering the readable event for the module \"\n                \"blocked clients subsystem.\")",
          "old_line_content": "                \"Error registering the readable event for the module \"",
          "new_line_content": "            serverPanic(",
          "content_same": false
        },
        {
          "line": 4969,
          "old_api": null,
          "new_api": "setcpuaffinity",
          "old_text": null,
          "new_text": "setcpuaffinity(cpulist)",
          "old_line_content": "#else",
          "new_line_content": "    setcpuaffinity(cpulist);",
          "content_same": false
        },
        {
          "line": 4971,
          "old_api": null,
          "new_api": "UNUSED",
          "old_text": null,
          "new_text": "UNUSED(cpulist)",
          "old_line_content": "#endif",
          "new_line_content": "    UNUSED(cpulist);",
          "content_same": false
        },
        {
          "line": 2929,
          "old_api": null,
          "new_api": "aeSetAfterSleepProc",
          "old_text": null,
          "new_text": "aeSetAfterSleepProc(server.el,afterSleep)",
          "old_line_content": "",
          "new_line_content": "    aeSetAfterSleepProc(server.el,afterSleep);",
          "content_same": false
        },
        {
          "line": 4980,
          "old_api": null,
          "new_api": "getenv",
          "old_text": null,
          "new_text": "getenv(\"UPSTART_JOB\")",
          "old_line_content": "",
          "new_line_content": "    const char *upstart_job = getenv(\"UPSTART_JOB\");",
          "content_same": false
        },
        {
          "line": 2933,
          "old_api": null,
          "new_api": "open",
          "old_text": null,
          "new_text": "open(server.aof_filename,\n                               O_WRONLY|O_APPEND|O_CREAT,0644)",
          "old_line_content": "                               O_WRONLY|O_APPEND|O_CREAT,0644);",
          "new_line_content": "        server.aof_fd = open(server.aof_filename,",
          "content_same": false
        },
        {
          "line": 4983,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\n                \"upstart supervision requested, but UPSTART_JOB not found\")",
          "old_line_content": "                \"upstart supervision requested, but UPSTART_JOB not found\");",
          "new_line_content": "        serverLog(LL_WARNING,",
          "content_same": false
        },
        {
          "line": 2938,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "        }",
          "new_line_content": "            exit(1);",
          "content_same": false
        },
        {
          "line": 4990,
          "old_api": null,
          "new_api": "unsetenv",
          "old_text": null,
          "new_text": "unsetenv(\"UPSTART_JOB\")",
          "old_line_content": "    return 1;",
          "new_line_content": "    unsetenv(\"UPSTART_JOB\");",
          "content_same": false
        },
        {
          "line": 2947,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\"Warning: 32 bit instance detected but no memory limit set. Setting 3 GB maxmemory limit with 'noeviction' policy now.\")",
          "old_line_content": "        server.maxmemory = 3072LL*(1024*1024); /* 3 GB */",
          "new_line_content": "        serverLog(LL_WARNING,\"Warning: 32 bit instance detected but no memory limit set. Setting 3 GB maxmemory limit with 'noeviction' policy now.\");",
          "content_same": false
        },
        {
          "line": 4995,
          "old_api": null,
          "new_api": "getenv",
          "old_text": null,
          "new_text": "getenv(\"NOTIFY_SOCKET\")",
          "old_line_content": "    if (!notify_socket) {",
          "new_line_content": "    const char *notify_socket = getenv(\"NOTIFY_SOCKET\");",
          "content_same": false
        },
        {
          "line": 4997,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\n                \"systemd supervision requested, but NOTIFY_SOCKET not found\")",
          "old_line_content": "                \"systemd supervision requested, but NOTIFY_SOCKET not found\");",
          "new_line_content": "        serverLog(LL_WARNING,",
          "content_same": false
        },
        {
          "line": 5002,
          "old_api": null,
          "new_api": "sd_notify",
          "old_text": null,
          "new_text": "sd_notify(0, sd_notify_msg)",
          "old_line_content": "    #else",
          "new_line_content": "    (void) sd_notify(0, sd_notify_msg);",
          "content_same": false
        },
        {
          "line": 2956,
          "old_api": null,
          "new_api": "latencyMonitorInit",
          "old_text": null,
          "new_text": "latencyMonitorInit()",
          "old_line_content": "}",
          "new_line_content": "    latencyMonitorInit();",
          "content_same": false
        },
        {
          "line": 5004,
          "old_api": null,
          "new_api": "UNUSED",
          "old_text": null,
          "new_text": "UNUSED(sd_notify_msg)",
          "old_line_content": "    #endif",
          "new_line_content": "    UNUSED(sd_notify_msg);",
          "content_same": false
        },
        {
          "line": 5012,
          "old_api": null,
          "new_api": "getenv",
          "old_text": null,
          "new_text": "getenv(\"NOTIFY_SOCKET\")",
          "old_line_content": "",
          "new_line_content": "        const char *notify_socket = getenv(\"NOTIFY_SOCKET\");",
          "content_same": false
        },
        {
          "line": 5015,
          "old_api": null,
          "new_api": "redisSupervisedUpstart",
          "old_text": null,
          "new_text": "redisSupervisedUpstart()",
          "old_line_content": "        } else if (notify_socket) {",
          "new_line_content": "            redisSupervisedUpstart();",
          "content_same": false
        },
        {
          "line": 2968,
          "old_api": null,
          "new_api": "zmalloc_used_memory",
          "old_text": null,
          "new_text": "zmalloc_used_memory()",
          "old_line_content": "}",
          "new_line_content": "    server.initial_memory_usage = zmalloc_used_memory();",
          "content_same": false
        },
        {
          "line": 5018,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\n                \"WARNING auto-supervised by systemd - you MUST set appropriate values for TimeoutStartSec and TimeoutStopSec in your service unit.\")",
          "old_line_content": "                \"WARNING auto-supervised by systemd - you MUST set appropriate values for TimeoutStartSec and TimeoutStopSec in your service unit.\");",
          "new_line_content": "            serverLog(LL_WARNING,",
          "content_same": false
        },
        {
          "line": 5020,
          "old_api": null,
          "new_api": "redisCommunicateSystemd",
          "old_text": null,
          "new_text": "redisCommunicateSystemd(\"STATUS=Redis is loading...\\n\")",
          "old_line_content": "        }",
          "new_line_content": "            return redisCommunicateSystemd(\"STATUS=Redis is loading...\\n\");",
          "content_same": false
        },
        {
          "line": 5023,
          "old_api": null,
          "new_api": "redisSupervisedUpstart",
          "old_text": null,
          "new_text": "redisSupervisedUpstart()",
          "old_line_content": "    } else if (mode == SUPERVISED_SYSTEMD) {",
          "new_line_content": "        return redisSupervisedUpstart();",
          "content_same": false
        },
        {
          "line": 5025,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\n            \"WARNING supervised by systemd - you MUST set appropriate values for TimeoutStartSec and TimeoutStopSec in your service unit.\")",
          "old_line_content": "            \"WARNING supervised by systemd - you MUST set appropriate values for TimeoutStartSec and TimeoutStopSec in your service unit.\");",
          "new_line_content": "        serverLog(LL_WARNING,",
          "content_same": false
        },
        {
          "line": 2979,
          "old_api": null,
          "new_api": "sdssplitargs",
          "old_text": null,
          "new_text": "sdssplitargs(strflags,&argc)",
          "old_line_content": "    if (argv == NULL) return C_ERR;",
          "new_line_content": "    argv = sdssplitargs(strflags,&argc);",
          "content_same": false
        },
        {
          "line": 5027,
          "old_api": null,
          "new_api": "redisCommunicateSystemd",
          "old_text": null,
          "new_text": "redisCommunicateSystemd(\"STATUS=Redis is loading...\\n\")",
          "old_line_content": "    }",
          "new_line_content": "        return redisCommunicateSystemd(\"STATUS=Redis is loading...\\n\");",
          "content_same": false
        },
        {
          "line": 2984,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(flag,\"write\")",
          "old_line_content": "            c->flags |= CMD_WRITE|CMD_CATEGORY_WRITE;",
          "new_line_content": "        if (!strcasecmp(flag,\"write\")) {",
          "content_same": false
        },
        {
          "line": 2986,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(flag,\"read-only\")",
          "old_line_content": "            c->flags |= CMD_READONLY|CMD_CATEGORY_READ;",
          "new_line_content": "        } else if (!strcasecmp(flag,\"read-only\")) {",
          "content_same": false
        },
        {
          "line": 5035,
          "old_api": null,
          "new_api": "nodeIsMaster",
          "old_text": null,
          "new_text": "nodeIsMaster(server.cluster->myself)",
          "old_line_content": "}",
          "new_line_content": "            (server.cluster_enabled && nodeIsMaster(server.cluster->myself)));",
          "content_same": false
        },
        {
          "line": 2988,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(flag,\"use-memory\")",
          "old_line_content": "            c->flags |= CMD_DENYOOM;",
          "new_line_content": "        } else if (!strcasecmp(flag,\"use-memory\")) {",
          "content_same": false
        },
        {
          "line": 2990,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(flag,\"admin\")",
          "old_line_content": "            c->flags |= CMD_ADMIN|CMD_CATEGORY_ADMIN|CMD_CATEGORY_DANGEROUS;",
          "new_line_content": "        } else if (!strcasecmp(flag,\"admin\")) {",
          "content_same": false
        },
        {
          "line": 2992,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(flag,\"pub-sub\")",
          "old_line_content": "            c->flags |= CMD_PUBSUB|CMD_CATEGORY_PUBSUB;",
          "new_line_content": "        } else if (!strcasecmp(flag,\"pub-sub\")) {",
          "content_same": false
        },
        {
          "line": 2994,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(flag,\"no-script\")",
          "old_line_content": "            c->flags |= CMD_NOSCRIPT;",
          "new_line_content": "        } else if (!strcasecmp(flag,\"no-script\")) {",
          "content_same": false
        },
        {
          "line": 2996,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(flag,\"random\")",
          "old_line_content": "            c->flags |= CMD_RANDOM;",
          "new_line_content": "        } else if (!strcasecmp(flag,\"random\")) {",
          "content_same": false
        },
        {
          "line": 2998,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(flag,\"to-sort\")",
          "old_line_content": "            c->flags |= CMD_SORT_FOR_SCRIPT;",
          "new_line_content": "        } else if (!strcasecmp(flag,\"to-sort\")) {",
          "content_same": false
        },
        {
          "line": 3000,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(flag,\"ok-loading\")",
          "old_line_content": "            c->flags |= CMD_LOADING;",
          "new_line_content": "        } else if (!strcasecmp(flag,\"ok-loading\")) {",
          "content_same": false
        },
        {
          "line": 3002,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(flag,\"ok-stale\")",
          "old_line_content": "            c->flags |= CMD_STALE;",
          "new_line_content": "        } else if (!strcasecmp(flag,\"ok-stale\")) {",
          "content_same": false
        },
        {
          "line": 3004,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(flag,\"no-monitor\")",
          "old_line_content": "            c->flags |= CMD_SKIP_MONITOR;",
          "new_line_content": "        } else if (!strcasecmp(flag,\"no-monitor\")) {",
          "content_same": false
        },
        {
          "line": 3006,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(flag,\"no-slowlog\")",
          "old_line_content": "            c->flags |= CMD_SKIP_SLOWLOG;",
          "new_line_content": "        } else if (!strcasecmp(flag,\"no-slowlog\")) {",
          "content_same": false
        },
        {
          "line": 3008,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(flag,\"cluster-asking\")",
          "old_line_content": "            c->flags |= CMD_ASKING;",
          "new_line_content": "        } else if (!strcasecmp(flag,\"cluster-asking\")) {",
          "content_same": false
        },
        {
          "line": 3010,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(flag,\"fast\")",
          "old_line_content": "            c->flags |= CMD_FAST | CMD_CATEGORY_FAST;",
          "new_line_content": "        } else if (!strcasecmp(flag,\"fast\")) {",
          "content_same": false
        },
        {
          "line": 3012,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(flag,\"no-auth\")",
          "old_line_content": "            c->flags |= CMD_NO_AUTH;",
          "new_line_content": "        } else if (!strcasecmp(flag,\"no-auth\")) {",
          "content_same": false
        },
        {
          "line": 5062,
          "old_api": null,
          "new_api": "zmalloc_test",
          "old_text": null,
          "new_text": "zmalloc_test(argc, argv)",
          "old_line_content": "        }",
          "new_line_content": "            return zmalloc_test(argc, argv);",
          "content_same": false
        },
        {
          "line": 3018,
          "old_api": null,
          "new_api": "ACLGetCommandCategoryFlagByName",
          "old_text": null,
          "new_text": "ACLGetCommandCategoryFlagByName(flag+1)",
          "old_line_content": "            {",
          "new_line_content": "                (catflag = ACLGetCommandCategoryFlagByName(flag+1)) != 0)",
          "content_same": false
        },
        {
          "line": 3022,
          "old_api": null,
          "new_api": "sdsfreesplitres",
          "old_text": null,
          "new_text": "sdsfreesplitres(argv,argc)",
          "old_line_content": "                return C_ERR;",
          "new_line_content": "                sdsfreesplitres(argv,argc);",
          "content_same": false
        },
        {
          "line": 5071,
          "old_api": null,
          "new_api": "spt_init",
          "old_text": null,
          "new_text": "spt_init(argc, argv)",
          "old_line_content": "#endif",
          "new_line_content": "    spt_init(argc, argv);",
          "content_same": false
        },
        {
          "line": 3030,
          "old_api": null,
          "new_api": "sdsfreesplitres",
          "old_text": null,
          "new_text": "sdsfreesplitres(argv,argc)",
          "old_line_content": "    return C_OK;",
          "new_line_content": "    sdsfreesplitres(argv,argc);",
          "content_same": false
        },
        {
          "line": 5078,
          "old_api": null,
          "new_api": "crc64_init",
          "old_text": null,
          "new_text": "crc64_init()",
          "old_line_content": "",
          "new_line_content": "    crc64_init();",
          "content_same": false
        },
        {
          "line": 5085,
          "old_api": null,
          "new_api": "ACLInit",
          "old_text": null,
          "new_text": "ACLInit()",
          "old_line_content": "                  basic networking code and client creation depends on it. */",
          "new_line_content": "    ACLInit(); /* The ACL subsystem must be initialized ASAP because the",
          "content_same": false
        },
        {
          "line": 5088,
          "old_api": null,
          "new_api": "tlsInit",
          "old_text": null,
          "new_text": "tlsInit()",
          "old_line_content": "",
          "new_line_content": "    tlsInit();",
          "content_same": false
        },
        {
          "line": 5093,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(char*)*(argc+1))",
          "old_line_content": "    server.exec_argv[argc] = NULL;",
          "new_line_content": "    server.exec_argv = zmalloc(sizeof(char*)*(argc+1));",
          "content_same": false
        },
        {
          "line": 3047,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Unsupported command flag\")",
          "old_line_content": "",
          "new_line_content": "            serverPanic(\"Unsupported command flag\");",
          "content_same": false
        },
        {
          "line": 5095,
          "old_api": null,
          "new_api": "zstrdup",
          "old_text": null,
          "new_text": "zstrdup(argv[j])",
          "old_line_content": "",
          "new_line_content": "    for (j = 0; j < argc; j++) server.exec_argv[j] = zstrdup(argv[j]);",
          "content_same": false
        },
        {
          "line": 3050,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(c->name)",
          "old_line_content": "        /* Populate an additional dictionary that will be unaffected",
          "new_line_content": "        retval1 = dictAdd(server.commands, sdsnew(c->name), c);",
          "content_same": false
        },
        {
          "line": 3054,
          "old_api": null,
          "new_api": "serverAssert",
          "old_text": null,
          "new_text": "serverAssert(retval1 == DICT_OK && retval2 == DICT_OK)",
          "old_line_content": "    }",
          "new_line_content": "        serverAssert(retval1 == DICT_OK && retval2 == DICT_OK);",
          "content_same": false
        },
        {
          "line": 5102,
          "old_api": null,
          "new_api": "initSentinel",
          "old_text": null,
          "new_text": "initSentinel()",
          "old_line_content": "    }",
          "new_line_content": "        initSentinel();",
          "content_same": false
        },
        {
          "line": 5111,
          "old_api": null,
          "new_api": "redis_check_aof_main",
          "old_text": null,
          "new_text": "redis_check_aof_main(argc,argv)",
          "old_line_content": "",
          "new_line_content": "        redis_check_aof_main(argc,argv);",
          "content_same": false
        },
        {
          "line": 3065,
          "old_api": null,
          "new_api": "dictGetVal",
          "old_text": null,
          "new_text": "dictGetVal(de)",
          "old_line_content": "        c->microseconds = 0;",
          "new_line_content": "        c = (struct redisCommand *) dictGetVal(de);",
          "content_same": false
        },
        {
          "line": 5115,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "        char *configfile = NULL;",
          "new_line_content": "        sds options = sdsempty();",
          "content_same": false
        },
        {
          "line": 3069,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "",
          "new_line_content": "    dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 5123,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(argv[1], \"--test-memory\")",
          "old_line_content": "            if (argc == 3) {",
          "new_line_content": "        if (strcmp(argv[1], \"--test-memory\") == 0) {",
          "content_same": false
        },
        {
          "line": 5126,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(0)",
          "old_line_content": "            } else {",
          "new_line_content": "                exit(0);",
          "content_same": false
        },
        {
          "line": 5130,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "            }",
          "new_line_content": "                exit(1);",
          "content_same": false
        },
        {
          "line": 3085,
          "old_api": null,
          "new_api": "zrealloc",
          "old_text": null,
          "new_text": "zrealloc(oa->ops,sizeof(redisOp)*(oa->numops+1))",
          "old_line_content": "    op = oa->ops+oa->numops;",
          "new_line_content": "    oa->ops = zrealloc(oa->ops,sizeof(redisOp)*(oa->numops+1));",
          "content_same": false
        },
        {
          "line": 5137,
          "old_api": null,
          "new_api": "getAbsolutePath",
          "old_text": null,
          "new_text": "getAbsolutePath(configfile)",
          "old_line_content": "            /* Replace the config file in server.exec_argv with",
          "new_line_content": "            server.configfile = getAbsolutePath(configfile);",
          "content_same": false
        },
        {
          "line": 5141,
          "old_api": null,
          "new_api": "zstrdup",
          "old_text": null,
          "new_text": "zstrdup(server.configfile)",
          "old_line_content": "            j++;",
          "new_line_content": "            server.exec_argv[j] = zstrdup(server.configfile);",
          "content_same": false
        },
        {
          "line": 5152,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(argv[j], \"--check-rdb\")",
          "old_line_content": "                    /* Argument has no options, need to skip for parsing. */",
          "new_line_content": "                if (!strcmp(argv[j], \"--check-rdb\")) {",
          "content_same": false
        },
        {
          "line": 3105,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(op->argv)",
          "old_line_content": "    }",
          "new_line_content": "        zfree(op->argv);",
          "content_same": false
        },
        {
          "line": 3107,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(oa->ops)",
          "old_line_content": "}",
          "new_line_content": "    zfree(oa->ops);",
          "content_same": false
        },
        {
          "line": 5159,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(options,\" \")",
          "old_line_content": "            } else {",
          "new_line_content": "                options = sdscat(options,\" \");",
          "content_same": false
        },
        {
          "line": 3113,
          "old_api": null,
          "new_api": "dictFetchValue",
          "old_text": null,
          "new_text": "dictFetchValue(server.commands, name)",
          "old_line_content": "}",
          "new_line_content": "    return dictFetchValue(server.commands, name);",
          "content_same": false
        },
        {
          "line": 5163,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(options,\" \")",
          "old_line_content": "            }",
          "new_line_content": "                options = sdscat(options,\" \");",
          "content_same": false
        },
        {
          "line": 3118,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(s)",
          "old_line_content": "",
          "new_line_content": "    sds name = sdsnew(s);",
          "content_same": false
        },
        {
          "line": 5168,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\n                \"Sentinel config from STDIN not allowed.\")",
          "old_line_content": "                \"Sentinel config from STDIN not allowed.\");",
          "new_line_content": "            serverLog(LL_WARNING,",
          "content_same": false
        },
        {
          "line": 3121,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(name)",
          "old_line_content": "    return cmd;",
          "new_line_content": "    sdsfree(name);",
          "content_same": false
        },
        {
          "line": 5170,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\n                \"Sentinel needs config file on disk to save state.  Exiting...\")",
          "old_line_content": "                \"Sentinel needs config file on disk to save state.  Exiting...\");",
          "new_line_content": "            serverLog(LL_WARNING,",
          "content_same": false
        },
        {
          "line": 5172,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "        }",
          "new_line_content": "            exit(1);",
          "content_same": false
        },
        {
          "line": 5175,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(options)",
          "old_line_content": "    }",
          "new_line_content": "        sdsfree(options);",
          "content_same": false
        },
        {
          "line": 5179,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\n        \"Redis version=%s, bits=%d, commit=%s, modified=%d, pid=%d, just started\",\n            REDIS_VERSION,\n            (sizeof(long) == 8) ? 64 : 32,\n            redisGitSHA1(),\n            strtol(redisGitDirty(),NULL,10) > 0,\n            (int)getpid())",
          "old_line_content": "        \"Redis version=%s, bits=%d, commit=%s, modified=%d, pid=%d, just started\",",
          "new_line_content": "    serverLog(LL_WARNING,",
          "content_same": false
        },
        {
          "line": 3133,
          "old_api": null,
          "new_api": "dictFetchValue",
          "old_text": null,
          "new_text": "dictFetchValue(server.commands, name)",
          "old_line_content": "",
          "new_line_content": "    struct redisCommand *cmd = dictFetchValue(server.commands, name);",
          "content_same": false
        },
        {
          "line": 3135,
          "old_api": null,
          "new_api": "dictFetchValue",
          "old_text": null,
          "new_text": "dictFetchValue(server.orig_commands,name)",
          "old_line_content": "    return cmd;",
          "new_line_content": "    if (!cmd) cmd = dictFetchValue(server.orig_commands,name);",
          "content_same": false
        },
        {
          "line": 5185,
          "old_api": null,
          "new_api": "getpid",
          "old_text": null,
          "new_text": "getpid()",
          "old_line_content": "",
          "new_line_content": "            (int)getpid());",
          "content_same": false
        },
        {
          "line": 5188,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING, \"Warning: no config file specified, using the default config. In order to specify a config file use %s /path/to/%s.conf\", argv[0], server.sentinel_mode ? \"sentinel\" : \"redis\")",
          "old_line_content": "    } else {",
          "new_line_content": "        serverLog(LL_WARNING, \"Warning: no config file specified, using the default config. In order to specify a config file use %s /path/to/%s.conf\", argv[0], server.sentinel_mode ? \"sentinel\" : \"redis\");",
          "content_same": false
        },
        {
          "line": 5190,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING, \"Configuration loaded\")",
          "old_line_content": "    }",
          "new_line_content": "        serverLog(LL_WARNING, \"Configuration loaded\");",
          "content_same": false
        },
        {
          "line": 5193,
          "old_api": null,
          "new_api": "redisIsSupervised",
          "old_text": null,
          "new_text": "redisIsSupervised(server.supervised_mode)",
          "old_line_content": "    int background = server.daemonize && !server.supervised;",
          "new_line_content": "    server.supervised = redisIsSupervised(server.supervised_mode);",
          "content_same": false
        },
        {
          "line": 5195,
          "old_api": null,
          "new_api": "daemonize",
          "old_text": null,
          "new_text": "daemonize()",
          "old_line_content": "",
          "new_line_content": "    if (background) daemonize();",
          "content_same": false
        },
        {
          "line": 5201,
          "old_api": null,
          "new_api": "checkTcpBacklogSettings",
          "old_text": null,
          "new_text": "checkTcpBacklogSettings()",
          "old_line_content": "",
          "new_line_content": "    checkTcpBacklogSettings();",
          "content_same": false
        },
        {
          "line": 5205,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\"Server initialized\")",
          "old_line_content": "    #ifdef __linux__",
          "new_line_content": "        serverLog(LL_WARNING,\"Server initialized\");",
          "content_same": false
        },
        {
          "line": 3159,
          "old_api": null,
          "new_api": "feedAppendOnlyFile",
          "old_text": null,
          "new_text": "feedAppendOnlyFile(cmd,dbid,argv,argc)",
          "old_line_content": "    if (flags & PROPAGATE_REPL)",
          "new_line_content": "        feedAppendOnlyFile(cmd,dbid,argv,argc);",
          "content_same": false
        },
        {
          "line": 5207,
          "old_api": null,
          "new_api": "linuxMemoryWarnings",
          "old_text": null,
          "new_text": "linuxMemoryWarnings()",
          "old_line_content": "    #endif",
          "new_line_content": "        linuxMemoryWarnings();",
          "content_same": false
        },
        {
          "line": 3161,
          "old_api": null,
          "new_api": "replicationFeedSlaves",
          "old_text": null,
          "new_text": "replicationFeedSlaves(server.slaves,dbid,argv,argc)",
          "old_line_content": "}",
          "new_line_content": "        replicationFeedSlaves(server.slaves,dbid,argv,argc);",
          "content_same": false
        },
        {
          "line": 5213,
          "old_api": null,
          "new_api": "loadDataFromDisk",
          "old_text": null,
          "new_text": "loadDataFromDisk()",
          "old_line_content": "        if (server.cluster_enabled) {",
          "new_line_content": "        loadDataFromDisk();",
          "content_same": false
        },
        {
          "line": 5216,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\n                    \"You can't have keys in a DB different than DB 0 when in \"\n                    \"Cluster mode. Exiting.\")",
          "old_line_content": "                    \"You can't have keys in a DB different than DB 0 when in \"",
          "new_line_content": "                serverLog(LL_WARNING,",
          "content_same": false
        },
        {
          "line": 5219,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "            }",
          "new_line_content": "                exit(1);",
          "content_same": false
        },
        {
          "line": 5223,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_NOTICE,\"Ready to accept connections\")",
          "old_line_content": "        if (server.sofd > 0)",
          "new_line_content": "            serverLog(LL_NOTICE,\"Ready to accept connections\");",
          "content_same": false
        },
        {
          "line": 5225,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_NOTICE,\"The server is now ready to accept connections at %s\", server.unixsocket)",
          "old_line_content": "        if (server.supervised_mode == SUPERVISED_SYSTEMD) {",
          "new_line_content": "            serverLog(LL_NOTICE,\"The server is now ready to accept connections at %s\", server.unixsocket);",
          "content_same": false
        },
        {
          "line": 5229,
          "old_api": null,
          "new_api": "redisCommunicateSystemd",
          "old_text": null,
          "new_text": "redisCommunicateSystemd(\"READY=1\\n\")",
          "old_line_content": "            } else {",
          "new_line_content": "                redisCommunicateSystemd(\"READY=1\\n\");",
          "content_same": false
        },
        {
          "line": 5231,
          "old_api": null,
          "new_api": "redisCommunicateSystemd",
          "old_text": null,
          "new_text": "redisCommunicateSystemd(\"STATUS=Waiting for MASTER <-> REPLICA sync\\n\")",
          "old_line_content": "            }",
          "new_line_content": "                redisCommunicateSystemd(\"STATUS=Waiting for MASTER <-> REPLICA sync\\n\");",
          "content_same": false
        },
        {
          "line": 3184,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(robj*)*argc)",
          "old_line_content": "    for (j = 0; j < argc; j++) {",
          "new_line_content": "    argvcopy = zmalloc(sizeof(robj*)*argc);",
          "content_same": false
        },
        {
          "line": 3187,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(argv[j])",
          "old_line_content": "    }",
          "new_line_content": "        incrRefCount(argv[j]);",
          "content_same": false
        },
        {
          "line": 5236,
          "old_api": null,
          "new_api": "sentinelIsRunning",
          "old_text": null,
          "new_text": "sentinelIsRunning()",
          "old_line_content": "        if (server.supervised_mode == SUPERVISED_SYSTEMD) {",
          "new_line_content": "        sentinelIsRunning();",
          "content_same": false
        },
        {
          "line": 3189,
          "old_api": null,
          "new_api": "redisOpArrayAppend",
          "old_text": null,
          "new_text": "redisOpArrayAppend(&server.also_propagate,cmd,dbid,argvcopy,argc,target)",
          "old_line_content": "}",
          "new_line_content": "    redisOpArrayAppend(&server.also_propagate,cmd,dbid,argvcopy,argc,target);",
          "content_same": false
        },
        {
          "line": 5239,
          "old_api": null,
          "new_api": "redisCommunicateSystemd",
          "old_text": null,
          "new_text": "redisCommunicateSystemd(\"READY=1\\n\")",
          "old_line_content": "        }",
          "new_line_content": "            redisCommunicateSystemd(\"READY=1\\n\");",
          "content_same": false
        },
        {
          "line": 5245,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\"WARNING: You specified a maxmemory value that is less than 1MB (current value is %llu bytes). Are you sure this is what you really want?\", server.maxmemory)",
          "old_line_content": "    }",
          "new_line_content": "        serverLog(LL_WARNING,\"WARNING: You specified a maxmemory value that is less than 1MB (current value is %llu bytes). Are you sure this is what you really want?\", server.maxmemory);",
          "content_same": false
        },
        {
          "line": 5250,
          "old_api": null,
          "new_api": "aeDeleteEventLoop",
          "old_text": null,
          "new_text": "aeDeleteEventLoop(server.el)",
          "old_line_content": "    return 0;",
          "new_line_content": "    aeDeleteEventLoop(server.el);",
          "content_same": false
        },
        {
          "line": 3264,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.monitors)",
          "old_line_content": "        !server.loading &&",
          "new_line_content": "    if (listLength(server.monitors) &&",
          "content_same": false
        },
        {
          "line": 3268,
          "old_api": null,
          "new_api": "replicationFeedMonitors",
          "old_text": null,
          "new_text": "replicationFeedMonitors(c,server.monitors,c->db->id,c->argv,c->argc)",
          "old_line_content": "    }",
          "new_line_content": "        replicationFeedMonitors(c,server.monitors,c->db->id,c->argv,c->argc);",
          "content_same": false
        },
        {
          "line": 3275,
          "old_api": null,
          "new_api": "redisOpArrayInit",
          "old_text": null,
          "new_text": "redisOpArrayInit(&server.also_propagate)",
          "old_line_content": "",
          "new_line_content": "    redisOpArrayInit(&server.also_propagate);",
          "content_same": false
        },
        {
          "line": 3279,
          "old_api": null,
          "new_api": "updateCachedTime",
          "old_text": null,
          "new_text": "updateCachedTime(0)",
          "old_line_content": "    start = server.ustime;",
          "new_line_content": "    updateCachedTime(0);",
          "content_same": false
        },
        {
          "line": 3282,
          "old_api": null,
          "new_api": "ustime",
          "old_text": null,
          "new_text": "ustime()",
          "old_line_content": "    dirty = server.dirty-dirty;",
          "new_line_content": "    duration = ustime()-start;",
          "content_same": false
        },
        {
          "line": 3307,
          "old_api": null,
          "new_api": "slowlogPushEntryIfNeeded",
          "old_text": null,
          "new_text": "slowlogPushEntryIfNeeded(c,c->argv,c->argc,duration)",
          "old_line_content": "    }",
          "new_line_content": "        slowlogPushEntryIfNeeded(c,c->argv,c->argc,duration);",
          "content_same": false
        },
        {
          "line": 3347,
          "old_api": null,
          "new_api": "propagate",
          "old_text": null,
          "new_text": "propagate(c->cmd,c->db->id,c->argv,c->argc,propagate_flags)",
          "old_line_content": "    }",
          "new_line_content": "            propagate(c->cmd,c->db->id,c->argv,c->argc,propagate_flags);",
          "content_same": false
        },
        {
          "line": 3376,
          "old_api": null,
          "new_api": "execCommandPropagateMulti",
          "old_text": null,
          "new_text": "execCommandPropagateMulti(c)",
          "old_line_content": "                multi_emitted = 1;",
          "new_line_content": "                execCommandPropagateMulti(c);",
          "content_same": false
        },
        {
          "line": 3387,
          "old_api": null,
          "new_api": "propagate",
          "old_text": null,
          "new_text": "propagate(rop->cmd,rop->dbid,rop->argv,rop->argc,target)",
          "old_line_content": "            }",
          "new_line_content": "                    propagate(rop->cmd,rop->dbid,rop->argv,rop->argc,target);",
          "content_same": false
        },
        {
          "line": 3391,
          "old_api": null,
          "new_api": "execCommandPropagateExec",
          "old_text": null,
          "new_text": "execCommandPropagateExec(c)",
          "old_line_content": "            }",
          "new_line_content": "                execCommandPropagateExec(c);",
          "content_same": false
        },
        {
          "line": 3394,
          "old_api": null,
          "new_api": "redisOpArrayFree",
          "old_text": null,
          "new_text": "redisOpArrayFree(&server.also_propagate)",
          "old_line_content": "    }",
          "new_line_content": "        redisOpArrayFree(&server.also_propagate);",
          "content_same": false
        },
        {
          "line": 3406,
          "old_api": null,
          "new_api": "trackingRememberKeys",
          "old_text": null,
          "new_text": "trackingRememberKeys(caller)",
          "old_line_content": "        }",
          "new_line_content": "            trackingRememberKeys(caller);",
          "content_same": false
        },
        {
          "line": 3419,
          "old_api": null,
          "new_api": "flagTransaction",
          "old_text": null,
          "new_text": "flagTransaction(c)",
          "old_line_content": "    if (c->cmd && c->cmd->proc == execCommand) {",
          "new_line_content": "    flagTransaction(c);",
          "content_same": false
        },
        {
          "line": 3421,
          "old_api": null,
          "new_api": "execCommandAbort",
          "old_text": null,
          "new_text": "execCommandAbort(c, reply->ptr)",
          "old_line_content": "    } else {",
          "new_line_content": "        execCommandAbort(c, reply->ptr);",
          "content_same": false
        },
        {
          "line": 3424,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(reply->ptr)",
          "old_line_content": "    }",
          "new_line_content": "        addReplyErrorSafe(c, reply->ptr, sdslen(reply->ptr));",
          "content_same": false
        },
        {
          "line": 3429,
          "old_api": null,
          "new_api": "flagTransaction",
          "old_text": null,
          "new_text": "flagTransaction(c)",
          "old_line_content": "    va_list ap;",
          "new_line_content": "    flagTransaction(c);",
          "content_same": false
        },
        {
          "line": 3433,
          "old_api": null,
          "new_api": "va_end",
          "old_text": null,
          "new_text": "va_end(ap)",
          "old_line_content": "    if (c->cmd && c->cmd->proc == execCommand) {",
          "new_line_content": "    va_end(ap);",
          "content_same": false
        },
        {
          "line": 3435,
          "old_api": null,
          "new_api": "execCommandAbort",
          "old_text": null,
          "new_text": "execCommandAbort(c, s)",
          "old_line_content": "    } else {",
          "new_line_content": "        execCommandAbort(c, s);",
          "content_same": false
        },
        {
          "line": 3437,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(s)",
          "old_line_content": "    }",
          "new_line_content": "        addReplyErrorSafe(c, s, sdslen(s));",
          "content_same": false
        },
        {
          "line": 3439,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(s)",
          "old_line_content": "}",
          "new_line_content": "    sdsfree(s);",
          "content_same": false
        },
        {
          "line": 3458,
          "old_api": null,
          "new_api": "moduleCallCommandFilters",
          "old_text": null,
          "new_text": "moduleCallCommandFilters(c)",
          "old_line_content": "",
          "new_line_content": "    moduleCallCommandFilters(c);",
          "content_same": false
        },
        {
          "line": 3465,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "        c->flags |= CLIENT_CLOSE_AFTER_REPLY;",
          "new_line_content": "        addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 3472,
          "old_api": null,
          "new_api": "lookupCommand",
          "old_text": null,
          "new_text": "lookupCommand(c->argv[0]->ptr)",
          "old_line_content": "    if (!c->cmd) {",
          "new_line_content": "    c->cmd = c->lastcmd = lookupCommand(c->argv[0]->ptr);",
          "content_same": false
        },
        {
          "line": 3474,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "        int i;",
          "new_line_content": "        sds args = sdsempty();",
          "content_same": false
        },
        {
          "line": 3478,
          "old_api": null,
          "new_api": "rejectCommandFormat",
          "old_text": null,
          "new_text": "rejectCommandFormat(c,\"unknown command `%s`, with args beginning with: %s\",\n            (char*)c->argv[0]->ptr, args)",
          "old_line_content": "            (char*)c->argv[0]->ptr, args);",
          "new_line_content": "        rejectCommandFormat(c,\"unknown command `%s`, with args beginning with: %s\",",
          "content_same": false
        },
        {
          "line": 3480,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(args)",
          "old_line_content": "        return C_OK;",
          "new_line_content": "        sdsfree(args);",
          "content_same": false
        },
        {
          "line": 3484,
          "old_api": null,
          "new_api": "rejectCommandFormat",
          "old_text": null,
          "new_text": "rejectCommandFormat(c,\"wrong number of arguments for '%s' command\",\n            c->cmd->name)",
          "old_line_content": "            c->cmd->name);",
          "new_line_content": "        rejectCommandFormat(c,\"wrong number of arguments for '%s' command\",",
          "content_same": false
        },
        {
          "line": 3507,
          "old_api": null,
          "new_api": "rejectCommand",
          "old_text": null,
          "new_text": "rejectCommand(c,shared.noautherr)",
          "old_line_content": "            return C_OK;",
          "new_line_content": "            rejectCommand(c,shared.noautherr);",
          "content_same": false
        },
        {
          "line": 3515,
          "old_api": null,
          "new_api": "ACLCheckCommandPerm",
          "old_text": null,
          "new_text": "ACLCheckCommandPerm(c,&acl_keypos)",
          "old_line_content": "    if (acl_retval != ACL_OK) {",
          "new_line_content": "    int acl_retval = ACLCheckCommandPerm(c,&acl_keypos);",
          "content_same": false
        },
        {
          "line": 3517,
          "old_api": null,
          "new_api": "addACLLogEntry",
          "old_text": null,
          "new_text": "addACLLogEntry(c,acl_retval,acl_keypos,NULL)",
          "old_line_content": "        if (acl_retval == ACL_DENIED_CMD)",
          "new_line_content": "        addACLLogEntry(c,acl_retval,acl_keypos,NULL);",
          "content_same": false
        },
        {
          "line": 3519,
          "old_api": null,
          "new_api": "rejectCommandFormat",
          "old_text": null,
          "new_text": "rejectCommandFormat(c,\n                \"-NOPERM this user has no permissions to run \"\n                \"the '%s' command or its subcommand\", c->cmd->name)",
          "old_line_content": "                \"-NOPERM this user has no permissions to run \"",
          "new_line_content": "            rejectCommandFormat(c,",
          "content_same": false
        },
        {
          "line": 3523,
          "old_api": null,
          "new_api": "rejectCommandFormat",
          "old_text": null,
          "new_text": "rejectCommandFormat(c,\n                \"-NOPERM this user has no permissions to access \"\n                \"one of the keys used as arguments\")",
          "old_line_content": "                \"-NOPERM this user has no permissions to access \"",
          "new_line_content": "            rejectCommandFormat(c,",
          "content_same": false
        },
        {
          "line": 3537,
          "old_api": null,
          "new_api": "cmdHasMovableKeys",
          "old_text": null,
          "new_text": "cmdHasMovableKeys(c->cmd)",
          "old_line_content": "          c->cmd->proc != execCommand))",
          "new_line_content": "        !(!cmdHasMovableKeys(c->cmd) && c->cmd->firstkey == 0 &&",
          "content_same": false
        },
        {
          "line": 3542,
          "old_api": null,
          "new_api": "getNodeByQuery",
          "old_text": null,
          "new_text": "getNodeByQuery(c,c->cmd,c->argv,c->argc,\n                                        &hashslot,&error_code)",
          "old_line_content": "                                        &hashslot,&error_code);",
          "new_line_content": "        clusterNode *n = getNodeByQuery(c,c->cmd,c->argv,c->argc,",
          "content_same": false
        },
        {
          "line": 3546,
          "old_api": null,
          "new_api": "discardTransaction",
          "old_text": null,
          "new_text": "discardTransaction(c)",
          "old_line_content": "            } else {",
          "new_line_content": "                discardTransaction(c);",
          "content_same": false
        },
        {
          "line": 3548,
          "old_api": null,
          "new_api": "flagTransaction",
          "old_text": null,
          "new_text": "flagTransaction(c)",
          "old_line_content": "            }",
          "new_line_content": "                flagTransaction(c);",
          "content_same": false
        },
        {
          "line": 3550,
          "old_api": null,
          "new_api": "clusterRedirectClient",
          "old_text": null,
          "new_text": "clusterRedirectClient(c,n,hashslot,error_code)",
          "old_line_content": "            return C_OK;",
          "new_line_content": "            clusterRedirectClient(c,n,hashslot,error_code);",
          "content_same": false
        },
        {
          "line": 3562,
          "old_api": null,
          "new_api": "freeMemoryIfNeededAndSafe",
          "old_text": null,
          "new_text": "freeMemoryIfNeededAndSafe()",
          "old_line_content": "        /* freeMemoryIfNeeded may flush slave output buffers. This may result",
          "new_line_content": "        int out_of_memory = freeMemoryIfNeededAndSafe() == C_ERR;",
          "content_same": false
        },
        {
          "line": 1527,
          "old_api": null,
          "new_api": "sdsAllocSize",
          "old_text": null,
          "new_text": "sdsAllocSize(c->querybuf)",
          "old_line_content": "    time_t idletime = server.unixtime - c->lastinteraction;",
          "new_line_content": "    size_t querybuf_size = sdsAllocSize(c->querybuf);",
          "content_same": false
        },
        {
          "line": 3575,
          "old_api": null,
          "new_api": "rejectCommand",
          "old_text": null,
          "new_text": "rejectCommand(c, shared.oomerr)",
          "old_line_content": "            return C_OK;",
          "new_line_content": "            rejectCommand(c, shared.oomerr);",
          "content_same": false
        },
        {
          "line": 1540,
          "old_api": null,
          "new_api": "sdsRemoveFreeSpace",
          "old_text": null,
          "new_text": "sdsRemoveFreeSpace(c->querybuf)",
          "old_line_content": "        }",
          "new_line_content": "            c->querybuf = sdsRemoveFreeSpace(c->querybuf);",
          "content_same": false
        },
        {
          "line": 3589,
          "old_api": null,
          "new_api": "trackingLimitUsedSlots",
          "old_text": null,
          "new_text": "trackingLimitUsedSlots()",
          "old_line_content": "",
          "new_line_content": "    if (server.tracking_clients) trackingLimitUsedSlots();",
          "content_same": false
        },
        {
          "line": 3593,
          "old_api": null,
          "new_api": "writeCommandsDeniedByDiskError",
          "old_text": null,
          "new_text": "writeCommandsDeniedByDiskError()",
          "old_line_content": "    if (deny_write_type != DISK_ERROR_TYPE_NONE &&",
          "new_line_content": "    int deny_write_type = writeCommandsDeniedByDiskError();",
          "content_same": false
        },
        {
          "line": 3599,
          "old_api": null,
          "new_api": "rejectCommand",
          "old_text": null,
          "new_text": "rejectCommand(c, shared.bgsaveerr)",
          "old_line_content": "        else",
          "new_line_content": "            rejectCommand(c, shared.bgsaveerr);",
          "content_same": false
        },
        {
          "line": 3601,
          "old_api": null,
          "new_api": "rejectCommandFormat",
          "old_text": null,
          "new_text": "rejectCommandFormat(c,\n                \"-MISCONF Errors writing to the AOF file: %s\\r\\n\",\n                strerror(server.aof_last_write_errno))",
          "old_line_content": "                \"-MISCONF Errors writing to the AOF file: %s\\r\\n\",",
          "new_line_content": "            rejectCommandFormat(c,",
          "content_same": false
        },
        {
          "line": 3603,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(server.aof_last_write_errno)",
          "old_line_content": "        return C_OK;",
          "new_line_content": "                strerror(server.aof_last_write_errno));",
          "content_same": false
        },
        {
          "line": 1556,
          "old_api": null,
          "new_api": "sdsAllocSize",
          "old_text": null,
          "new_text": "sdsAllocSize(c->pending_querybuf)",
          "old_line_content": "        if(pending_querybuf_size > LIMIT_PENDING_QUERYBUF &&",
          "new_line_content": "        size_t pending_querybuf_size = sdsAllocSize(c->pending_querybuf);",
          "content_same": false
        },
        {
          "line": 1558,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(c->pending_querybuf)",
          "old_line_content": "        {",
          "new_line_content": "           sdslen(c->pending_querybuf) < (pending_querybuf_size/2))",
          "content_same": false
        },
        {
          "line": 1560,
          "old_api": null,
          "new_api": "sdsRemoveFreeSpace",
          "old_text": null,
          "new_text": "sdsRemoveFreeSpace(c->pending_querybuf)",
          "old_line_content": "        }",
          "new_line_content": "            c->pending_querybuf = sdsRemoveFreeSpace(c->pending_querybuf);",
          "content_same": false
        },
        {
          "line": 3615,
          "old_api": null,
          "new_api": "rejectCommand",
          "old_text": null,
          "new_text": "rejectCommand(c, shared.noreplicaserr)",
          "old_line_content": "        return C_OK;",
          "new_line_content": "        rejectCommand(c, shared.noreplicaserr);",
          "content_same": false
        },
        {
          "line": 3625,
          "old_api": null,
          "new_api": "rejectCommand",
          "old_text": null,
          "new_text": "rejectCommand(c, shared.roslaveerr)",
          "old_line_content": "        return C_OK;",
          "new_line_content": "        rejectCommand(c, shared.roslaveerr);",
          "content_same": false
        },
        {
          "line": 1584,
          "old_api": null,
          "new_api": "getClientOutputBufferMemoryUsage",
          "old_text": null,
          "new_text": "getClientOutputBufferMemoryUsage(c)",
          "old_line_content": "    int i = server.unixtime % CLIENTS_PEAK_MEM_USAGE_SLOTS;",
          "new_line_content": "    size_t out_usage = getClientOutputBufferMemoryUsage(c);",
          "content_same": false
        },
        {
          "line": 3637,
          "old_api": null,
          "new_api": "rejectCommandFormat",
          "old_text": null,
          "new_text": "rejectCommandFormat(c,\n            \"Can't execute '%s': only (P)SUBSCRIBE / \"\n            \"(P)UNSUBSCRIBE / PING / QUIT are allowed in this context\",\n            c->cmd->name)",
          "old_line_content": "            \"Can't execute '%s': only (P)SUBSCRIBE / \"",
          "new_line_content": "        rejectCommandFormat(c,",
          "content_same": false
        },
        {
          "line": 3651,
          "old_api": null,
          "new_api": "rejectCommand",
          "old_text": null,
          "new_text": "rejectCommand(c, shared.masterdownerr)",
          "old_line_content": "        return C_OK;",
          "new_line_content": "        rejectCommand(c, shared.masterdownerr);",
          "content_same": false
        },
        {
          "line": 3658,
          "old_api": null,
          "new_api": "rejectCommand",
          "old_text": null,
          "new_text": "rejectCommand(c, shared.loadingerr)",
          "old_line_content": "        return C_OK;",
          "new_line_content": "        rejectCommand(c, shared.loadingerr);",
          "content_same": false
        },
        {
          "line": 1618,
          "old_api": null,
          "new_api": "sdsAllocSize",
          "old_text": null,
          "new_text": "sdsAllocSize(c->querybuf)",
          "old_line_content": "    mem += sizeof(client);",
          "new_line_content": "    mem += sdsAllocSize(c->querybuf);",
          "content_same": false
        },
        {
          "line": 3678,
          "old_api": null,
          "new_api": "tolower",
          "old_text": null,
          "new_text": "tolower(((char*)c->argv[1]->ptr)[0])",
          "old_line_content": "        !(c->cmd->proc == scriptCommand &&",
          "new_line_content": "          tolower(((char*)c->argv[1]->ptr)[0]) == 'n') &&",
          "content_same": false
        },
        {
          "line": 3681,
          "old_api": null,
          "new_api": "tolower",
          "old_text": null,
          "new_text": "tolower(((char*)c->argv[1]->ptr)[0])",
          "old_line_content": "    {",
          "new_line_content": "          tolower(((char*)c->argv[1]->ptr)[0]) == 'k'))",
          "content_same": false
        },
        {
          "line": 3683,
          "old_api": null,
          "new_api": "rejectCommand",
          "old_text": null,
          "new_text": "rejectCommand(c, shared.slowscripterr)",
          "old_line_content": "        return C_OK;",
          "new_line_content": "        rejectCommand(c, shared.slowscripterr);",
          "content_same": false
        },
        {
          "line": 3693,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.queued)",
          "old_line_content": "    } else {",
          "new_line_content": "        addReply(c,shared.queued);",
          "content_same": false
        },
        {
          "line": 3695,
          "old_api": null,
          "new_api": "call",
          "old_text": null,
          "new_text": "call(c,CMD_CALL_FULL)",
          "old_line_content": "        c->woff = server.master_repl_offset;",
          "new_line_content": "        call(c,CMD_CALL_FULL);",
          "content_same": false
        },
        {
          "line": 3698,
          "old_api": null,
          "new_api": "handleClientsBlockedOnKeys",
          "old_text": null,
          "new_text": "handleClientsBlockedOnKeys()",
          "old_line_content": "    }",
          "new_line_content": "            handleClientsBlockedOnKeys();",
          "content_same": false
        },
        {
          "line": 1664,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.clients)",
          "old_line_content": "    int iterations = numclients/server.hz;",
          "new_line_content": "    int numclients = listLength(server.clients);",
          "content_same": false
        },
        {
          "line": 3712,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(server.sofd)",
          "old_line_content": "    if (server.cluster_enabled)",
          "new_line_content": "    if (server.sofd != -1) close(server.sofd);",
          "content_same": false
        },
        {
          "line": 1666,
          "old_api": null,
          "new_api": "mstime",
          "old_text": null,
          "new_text": "mstime()",
          "old_line_content": "",
          "new_line_content": "    mstime_t now = mstime();",
          "content_same": false
        },
        {
          "line": 3714,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(server.cfd[j])",
          "old_line_content": "    if (unlink_unix_socket && server.unixsocket) {",
          "new_line_content": "        for (j = 0; j < server.cfd_count; j++) close(server.cfd[j]);",
          "content_same": false
        },
        {
          "line": 3717,
          "old_api": null,
          "new_api": "unlink",
          "old_text": null,
          "new_text": "unlink(server.unixsocket)",
          "old_line_content": "    }",
          "new_line_content": "        unlink(server.unixsocket); /* don't care if this fails */",
          "content_same": false
        },
        {
          "line": 1675,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.clients)",
          "old_line_content": "        client *c;",
          "new_line_content": "    while(listLength(server.clients) && iterations--) {",
          "content_same": false
        },
        {
          "line": 1684,
          "old_api": null,
          "new_api": "listNodeValue",
          "old_text": null,
          "new_text": "listNodeValue(head)",
          "old_line_content": "        /* The following functions do different service checks on the client.",
          "new_line_content": "        c = listNodeValue(head);",
          "content_same": false
        },
        {
          "line": 3734,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\"User requested shutdown...\")",
          "old_line_content": "    if (server.supervised_mode == SUPERVISED_SYSTEMD)",
          "new_line_content": "    serverLog(LL_WARNING,\"User requested shutdown...\");",
          "content_same": false
        },
        {
          "line": 3736,
          "old_api": null,
          "new_api": "redisCommunicateSystemd",
          "old_text": null,
          "new_text": "redisCommunicateSystemd(\"STOPPING=1\\n\")",
          "old_line_content": "",
          "new_line_content": "        redisCommunicateSystemd(\"STOPPING=1\\n\");",
          "content_same": false
        },
        {
          "line": 1691,
          "old_api": null,
          "new_api": "clientsCronTrackClientsMemUsage",
          "old_text": null,
          "new_text": "clientsCronTrackClientsMemUsage(c)",
          "old_line_content": "    }",
          "new_line_content": "        if (clientsCronTrackClientsMemUsage(c)) continue;",
          "content_same": false
        },
        {
          "line": 3739,
          "old_api": null,
          "new_api": "ldbKillForkedSessions",
          "old_text": null,
          "new_text": "ldbKillForkedSessions()",
          "old_line_content": "",
          "new_line_content": "    ldbKillForkedSessions();",
          "content_same": false
        },
        {
          "line": 3746,
          "old_api": null,
          "new_api": "killRDBChild",
          "old_text": null,
          "new_text": "killRDBChild()",
          "old_line_content": "    }",
          "new_line_content": "        killRDBChild();",
          "content_same": false
        },
        {
          "line": 1703,
          "old_api": null,
          "new_api": "activeExpireCycle",
          "old_text": null,
          "new_text": "activeExpireCycle(ACTIVE_EXPIRE_CYCLE_SLOW)",
          "old_line_content": "        } else {",
          "new_line_content": "            activeExpireCycle(ACTIVE_EXPIRE_CYCLE_SLOW);",
          "content_same": false
        },
        {
          "line": 3752,
          "old_api": null,
          "new_api": "TerminateModuleForkChild",
          "old_text": null,
          "new_text": "TerminateModuleForkChild(server.module_child_pid,0)",
          "old_line_content": "    }",
          "new_line_content": "        TerminateModuleForkChild(server.module_child_pid,0);",
          "content_same": false
        },
        {
          "line": 1705,
          "old_api": null,
          "new_api": "expireSlaveKeys",
          "old_text": null,
          "new_text": "expireSlaveKeys()",
          "old_line_content": "        }",
          "new_line_content": "            expireSlaveKeys();",
          "content_same": false
        },
        {
          "line": 1710,
          "old_api": null,
          "new_api": "activeDefragCycle",
          "old_text": null,
          "new_text": "activeDefragCycle()",
          "old_line_content": "",
          "new_line_content": "    activeDefragCycle();",
          "content_same": false
        },
        {
          "line": 3762,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING, \"Writing initial AOF, can't exit.\")",
          "old_line_content": "                return C_ERR;",
          "new_line_content": "                serverLog(LL_WARNING, \"Writing initial AOF, can't exit.\");",
          "content_same": false
        },
        {
          "line": 1715,
          "old_api": null,
          "new_api": "hasActiveChildProcess",
          "old_text": null,
          "new_text": "hasActiveChildProcess()",
          "old_line_content": "        /* We use global counters so if we stop the computation at a given",
          "new_line_content": "    if (!hasActiveChildProcess()) {",
          "content_same": false
        },
        {
          "line": 3765,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\n                \"There is a child rewriting the AOF. Killing it!\")",
          "old_line_content": "                \"There is a child rewriting the AOF. Killing it!\");",
          "new_line_content": "            serverLog(LL_WARNING,",
          "content_same": false
        },
        {
          "line": 3767,
          "old_api": null,
          "new_api": "killAppendOnlyChild",
          "old_text": null,
          "new_text": "killAppendOnlyChild()",
          "old_line_content": "        }",
          "new_line_content": "            killAppendOnlyChild();",
          "content_same": false
        },
        {
          "line": 3772,
          "old_api": null,
          "new_api": "redis_fsync",
          "old_text": null,
          "new_text": "redis_fsync(server.aof_fd)",
          "old_line_content": "    }",
          "new_line_content": "        redis_fsync(server.aof_fd);",
          "content_same": false
        },
        {
          "line": 1729,
          "old_api": null,
          "new_api": "tryResizeHashTables",
          "old_text": null,
          "new_text": "tryResizeHashTables(resize_db % server.dbnum)",
          "old_line_content": "            resize_db++;",
          "new_line_content": "            tryResizeHashTables(resize_db % server.dbnum);",
          "content_same": false
        },
        {
          "line": 3777,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_NOTICE,\"Saving the final RDB snapshot before exiting.\")",
          "old_line_content": "        if (server.supervised_mode == SUPERVISED_SYSTEMD)",
          "new_line_content": "        serverLog(LL_NOTICE,\"Saving the final RDB snapshot before exiting.\");",
          "content_same": false
        },
        {
          "line": 3779,
          "old_api": null,
          "new_api": "redisCommunicateSystemd",
          "old_text": null,
          "new_text": "redisCommunicateSystemd(\"STATUS=Saving the final RDB snapshot\\n\")",
          "old_line_content": "        /* Snapshotting. Perform a SYNC SAVE and exit */",
          "new_line_content": "            redisCommunicateSystemd(\"STATUS=Saving the final RDB snapshot\\n\");",
          "content_same": false
        },
        {
          "line": 3783,
          "old_api": null,
          "new_api": "rdbSave",
          "old_text": null,
          "new_text": "rdbSave(server.rdb_filename,rsiptr)",
          "old_line_content": "            /* Ooops.. error saving! The best we can do is to continue",
          "new_line_content": "        if (rdbSave(server.rdb_filename,rsiptr) != C_OK) {",
          "content_same": false
        },
        {
          "line": 1736,
          "old_api": null,
          "new_api": "incrementallyRehash",
          "old_text": null,
          "new_text": "incrementallyRehash(rehash_db)",
          "old_line_content": "                if (work_done) {",
          "new_line_content": "                int work_done = incrementallyRehash(rehash_db);",
          "content_same": false
        },
        {
          "line": 3789,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\"Error trying to save the DB, can't exit.\")",
          "old_line_content": "            if (server.supervised_mode == SUPERVISED_SYSTEMD)",
          "new_line_content": "            serverLog(LL_WARNING,\"Error trying to save the DB, can't exit.\");",
          "content_same": false
        },
        {
          "line": 3791,
          "old_api": null,
          "new_api": "redisCommunicateSystemd",
          "old_text": null,
          "new_text": "redisCommunicateSystemd(\"STATUS=Error trying to save the DB, can't exit.\\n\")",
          "old_line_content": "            return C_ERR;",
          "new_line_content": "                redisCommunicateSystemd(\"STATUS=Error trying to save the DB, can't exit.\\n\");",
          "content_same": false
        },
        {
          "line": 3797,
          "old_api": null,
          "new_api": "moduleFireServerEvent",
          "old_text": null,
          "new_text": "moduleFireServerEvent(REDISMODULE_EVENT_SHUTDOWN,0,NULL)",
          "old_line_content": "",
          "new_line_content": "    moduleFireServerEvent(REDISMODULE_EVENT_SHUTDOWN,0,NULL);",
          "content_same": false
        },
        {
          "line": 3802,
          "old_api": null,
          "new_api": "unlink",
          "old_text": null,
          "new_text": "unlink(server.pidfile)",
          "old_line_content": "    }",
          "new_line_content": "        unlink(server.pidfile);",
          "content_same": false
        },
        {
          "line": 3807,
          "old_api": null,
          "new_api": "flushSlavesOutputBuffers",
          "old_text": null,
          "new_text": "flushSlavesOutputBuffers()",
          "old_line_content": "",
          "new_line_content": "    flushSlavesOutputBuffers();",
          "content_same": false
        },
        {
          "line": 1762,
          "old_api": null,
          "new_api": "ustime",
          "old_text": null,
          "new_text": "ustime()",
          "old_line_content": "    server.mstime = server.ustime / 1000;",
          "new_line_content": "    server.ustime = ustime();",
          "content_same": false
        },
        {
          "line": 3811,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\"%s is now ready to exit, bye bye...\",\n        server.sentinel_mode ? \"Sentinel\" : \"Redis\")",
          "old_line_content": "        server.sentinel_mode ? \"Sentinel\" : \"Redis\");",
          "new_line_content": "    serverLog(LL_WARNING,\"%s is now ready to exit, bye bye...\",",
          "content_same": false
        },
        {
          "line": 1774,
          "old_api": null,
          "new_api": "localtime_r",
          "old_text": null,
          "new_text": "localtime_r(&ut,&tm)",
          "old_line_content": "        server.daylight_active = tm.tm_isdst;",
          "new_line_content": "        localtime_r(&ut,&tm);",
          "content_same": false
        },
        {
          "line": 1792,
          "old_api": null,
          "new_api": "WEXITSTATUS",
          "old_text": null,
          "new_text": "WEXITSTATUS(statloc)",
          "old_line_content": "        int bysignal = 0;",
          "new_line_content": "        int exitcode = WEXITSTATUS(statloc);",
          "content_same": false
        },
        {
          "line": 1795,
          "old_api": null,
          "new_api": "WTERMSIG",
          "old_text": null,
          "new_text": "WTERMSIG(statloc)",
          "old_line_content": "",
          "new_line_content": "        if (WIFSIGNALED(statloc)) bysignal = WTERMSIG(statloc);",
          "content_same": false
        },
        {
          "line": 3849,
          "old_api": null,
          "new_api": "addReplyErrorFormat",
          "old_text": null,
          "new_text": "addReplyErrorFormat(c,\"wrong number of arguments for '%s' command\",\n            c->cmd->name)",
          "old_line_content": "            c->cmd->name);",
          "new_line_content": "        addReplyErrorFormat(c,\"wrong number of arguments for '%s' command\",",
          "content_same": false
        },
        {
          "line": 1808,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\"wait3() returned an error: %s. \"\n                \"rdb_child_pid = %d, aof_child_pid = %d, module_child_pid = %d\",\n                strerror(errno),\n                (int) server.rdb_child_pid,\n                (int) server.aof_child_pid,\n                (int) server.module_child_pid)",
          "old_line_content": "                \"rdb_child_pid = %d, aof_child_pid = %d, module_child_pid = %d\",",
          "new_line_content": "            serverLog(LL_WARNING,\"wait3() returned an error: %s. \"",
          "content_same": false
        },
        {
          "line": 3856,
          "old_api": null,
          "new_api": "addReplyBulkCBuffer",
          "old_text": null,
          "new_text": "addReplyBulkCBuffer(c,\"pong\",4)",
          "old_line_content": "        if (c->argc == 1)",
          "new_line_content": "        addReplyBulkCBuffer(c,\"pong\",4);",
          "content_same": false
        },
        {
          "line": 1810,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "                (int) server.rdb_child_pid,",
          "new_line_content": "                strerror(errno),",
          "content_same": false
        },
        {
          "line": 3858,
          "old_api": null,
          "new_api": "addReplyBulkCBuffer",
          "old_text": null,
          "new_text": "addReplyBulkCBuffer(c,\"\",0)",
          "old_line_content": "        else",
          "new_line_content": "            addReplyBulkCBuffer(c,\"\",0);",
          "content_same": false
        },
        {
          "line": 3860,
          "old_api": null,
          "new_api": "addReplyBulk",
          "old_text": null,
          "new_text": "addReplyBulk(c,c->argv[1])",
          "old_line_content": "    } else {",
          "new_line_content": "            addReplyBulk(c,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 3863,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.pong)",
          "old_line_content": "        else",
          "new_line_content": "            addReply(c,shared.pong);",
          "content_same": false
        },
        {
          "line": 1816,
          "old_api": null,
          "new_api": "receiveChildInfo",
          "old_text": null,
          "new_text": "receiveChildInfo()",
          "old_line_content": "        } else if (pid == server.aof_child_pid) {",
          "new_line_content": "            if (!bysignal && exitcode == 0) receiveChildInfo();",
          "content_same": false
        },
        {
          "line": 3865,
          "old_api": null,
          "new_api": "addReplyBulk",
          "old_text": null,
          "new_text": "addReplyBulk(c,c->argv[1])",
          "old_line_content": "    }",
          "new_line_content": "            addReplyBulk(c,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 1819,
          "old_api": null,
          "new_api": "receiveChildInfo",
          "old_text": null,
          "new_text": "receiveChildInfo()",
          "old_line_content": "        } else if (pid == server.module_child_pid) {",
          "new_line_content": "            if (!bysignal && exitcode == 0) receiveChildInfo();",
          "content_same": false
        },
        {
          "line": 1822,
          "old_api": null,
          "new_api": "receiveChildInfo",
          "old_text": null,
          "new_text": "receiveChildInfo()",
          "old_line_content": "        } else {",
          "new_line_content": "            if (!bysignal && exitcode == 0) receiveChildInfo();",
          "content_same": false
        },
        {
          "line": 3870,
          "old_api": null,
          "new_api": "addReplyBulk",
          "old_text": null,
          "new_text": "addReplyBulk(c,c->argv[1])",
          "old_line_content": "}",
          "new_line_content": "    addReplyBulk(c,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 1825,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\n                    \"Warning, detected child with unmatched pid: %ld\",\n                    (long)pid)",
          "old_line_content": "                    \"Warning, detected child with unmatched pid: %ld\",",
          "new_line_content": "                serverLog(LL_WARNING,",
          "content_same": false
        },
        {
          "line": 1831,
          "old_api": null,
          "new_api": "closeChildInfoPipe",
          "old_text": null,
          "new_text": "closeChildInfoPipe()",
          "old_line_content": "",
          "new_line_content": "        closeChildInfoPipe();",
          "content_same": false
        },
        {
          "line": 3881,
          "old_api": null,
          "new_api": "addReplyBulkLongLong",
          "old_text": null,
          "new_text": "addReplyBulkLongLong(c,tv.tv_usec)",
          "old_line_content": "}",
          "new_line_content": "    addReplyBulkLongLong(c,tv.tv_usec);",
          "content_same": false
        },
        {
          "line": 1834,
          "old_api": null,
          "new_api": "replicationStartPendingFork",
          "old_text": null,
          "new_text": "replicationStartPendingFork()",
          "old_line_content": "    }",
          "new_line_content": "        replicationStartPendingFork();",
          "content_same": false
        },
        {
          "line": 3887,
          "old_api": null,
          "new_api": "addReplyStatus",
          "old_text": null,
          "new_text": "addReplyStatus(c, reply)",
          "old_line_content": "        return 1;",
          "new_line_content": "        addReplyStatus(c, reply);",
          "content_same": false
        },
        {
          "line": 3896,
          "old_api": null,
          "new_api": "addReplyNull",
          "old_text": null,
          "new_text": "addReplyNull(c)",
          "old_line_content": "    } else {",
          "new_line_content": "        addReplyNull(c);",
          "content_same": false
        },
        {
          "line": 3901,
          "old_api": null,
          "new_api": "addReplyLongLong",
          "old_text": null,
          "new_text": "addReplyLongLong(c, cmd->arity)",
          "old_line_content": "",
          "new_line_content": "        addReplyLongLong(c, cmd->arity);",
          "content_same": false
        },
        {
          "line": 1861,
          "old_api": null,
          "new_api": "UNUSED",
          "old_text": null,
          "new_text": "UNUSED(clientData)",
          "old_line_content": "",
          "new_line_content": "    UNUSED(clientData);",
          "content_same": false
        },
        {
          "line": 1865,
          "old_api": null,
          "new_api": "watchdogScheduleSignal",
          "old_text": null,
          "new_text": "watchdogScheduleSignal(server.watchdog_period)",
          "old_line_content": "",
          "new_line_content": "    if (server.watchdog_period) watchdogScheduleSignal(server.watchdog_period);",
          "content_same": false
        },
        {
          "line": 1868,
          "old_api": null,
          "new_api": "updateCachedTime",
          "old_text": null,
          "new_text": "updateCachedTime(1)",
          "old_line_content": "",
          "new_line_content": "    updateCachedTime(1);",
          "content_same": false
        },
        {
          "line": 3921,
          "old_api": null,
          "new_api": "addReplyStatus",
          "old_text": null,
          "new_text": "addReplyStatus(c, \"movablekeys\")",
          "old_line_content": "            flagcount += 1;",
          "new_line_content": "            addReplyStatus(c, \"movablekeys\");",
          "content_same": false
        },
        {
          "line": 1874,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.clients)",
          "old_line_content": "               MAX_CLIENTS_PER_CLOCK_TICK)",
          "new_line_content": "        while (listLength(server.clients) / server.hz >",
          "content_same": false
        },
        {
          "line": 3924,
          "old_api": null,
          "new_api": "setDeferredSetLen",
          "old_text": null,
          "new_text": "setDeferredSetLen(c, flaglen, flagcount)",
          "old_line_content": "",
          "new_line_content": "        setDeferredSetLen(c, flaglen, flagcount);",
          "content_same": false
        },
        {
          "line": 3928,
          "old_api": null,
          "new_api": "addReplyLongLong",
          "old_text": null,
          "new_text": "addReplyLongLong(c, cmd->keystep)",
          "old_line_content": "",
          "new_line_content": "        addReplyLongLong(c, cmd->keystep);",
          "content_same": false
        },
        {
          "line": 3930,
          "old_api": null,
          "new_api": "addReplyCommandCategories",
          "old_text": null,
          "new_text": "addReplyCommandCategories(c,cmd)",
          "old_line_content": "    }",
          "new_line_content": "        addReplyCommandCategories(c,cmd);",
          "content_same": false
        },
        {
          "line": 1887,
          "old_api": null,
          "new_api": "trackInstantaneousMetric",
          "old_text": null,
          "new_text": "trackInstantaneousMetric(STATS_METRIC_NET_INPUT,\n                server.stat_net_input_bytes)",
          "old_line_content": "                server.stat_net_input_bytes);",
          "new_line_content": "        trackInstantaneousMetric(STATS_METRIC_NET_INPUT,",
          "content_same": false
        },
        {
          "line": 1889,
          "old_api": null,
          "new_api": "trackInstantaneousMetric",
          "old_text": null,
          "new_text": "trackInstantaneousMetric(STATS_METRIC_NET_OUTPUT,\n                server.stat_net_output_bytes)",
          "old_line_content": "                server.stat_net_output_bytes);",
          "new_line_content": "        trackInstantaneousMetric(STATS_METRIC_NET_OUTPUT,",
          "content_same": false
        },
        {
          "line": 3939,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[1]->ptr,\"help\")",
          "old_line_content": "        const char *help[] = {",
          "new_line_content": "    if (c->argc == 2 && !strcasecmp(c->argv[1]->ptr,\"help\")) {",
          "content_same": false
        },
        {
          "line": 3947,
          "old_api": null,
          "new_api": "addReplyHelp",
          "old_text": null,
          "new_text": "addReplyHelp(c, help)",
          "old_line_content": "    } else if (c->argc == 1) {",
          "new_line_content": "        addReplyHelp(c, help);",
          "content_same": false
        },
        {
          "line": 1904,
          "old_api": null,
          "new_api": "getLRUClock",
          "old_text": null,
          "new_text": "getLRUClock()",
          "old_line_content": "",
          "new_line_content": "    server.lruclock = getLRUClock();",
          "content_same": false
        },
        {
          "line": 3952,
          "old_api": null,
          "new_api": "dictGetVal",
          "old_text": null,
          "new_text": "dictGetVal(de)",
          "old_line_content": "        }",
          "new_line_content": "            addReplyCommand(c, dictGetVal(de));",
          "content_same": false
        },
        {
          "line": 3955,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[1]->ptr, \"info\")",
          "old_line_content": "        int i;",
          "new_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr, \"info\")) {",
          "content_same": false
        },
        {
          "line": 1908,
          "old_api": null,
          "new_api": "zmalloc_used_memory",
          "old_text": null,
          "new_text": "zmalloc_used_memory()",
          "old_line_content": "",
          "new_line_content": "        server.stat_peak_memory = zmalloc_used_memory();",
          "content_same": false
        },
        {
          "line": 3957,
          "old_api": null,
          "new_api": "addReplyArrayLen",
          "old_text": null,
          "new_text": "addReplyArrayLen(c, c->argc-2)",
          "old_line_content": "        for (i = 2; i < c->argc; i++) {",
          "new_line_content": "        addReplyArrayLen(c, c->argc-2);",
          "content_same": false
        },
        {
          "line": 1910,
          "old_api": null,
          "new_api": "run_with_period",
          "old_text": null,
          "new_text": "run_with_period(100)",
          "old_line_content": "        /* Sample the RSS and other metrics here since this is a relatively slow call.",
          "new_line_content": "    run_with_period(100) {",
          "content_same": false
        },
        {
          "line": 3959,
          "old_api": null,
          "new_api": "dictFetchValue",
          "old_text": null,
          "new_text": "dictFetchValue(server.commands, c->argv[i]->ptr)",
          "old_line_content": "        }",
          "new_line_content": "            addReplyCommand(c, dictFetchValue(server.commands, c->argv[i]->ptr));",
          "content_same": false
        },
        {
          "line": 1915,
          "old_api": null,
          "new_api": "zmalloc_used_memory",
          "old_text": null,
          "new_text": "zmalloc_used_memory()",
          "old_line_content": "        /* Sampling the allcator info can be slow too.",
          "new_line_content": "        server.cron_malloc_stats.zmalloc_used = zmalloc_used_memory();",
          "content_same": false
        },
        {
          "line": 3964,
          "old_api": null,
          "new_api": "lookupCommand",
          "old_text": null,
          "new_text": "lookupCommand(c->argv[2]->ptr)",
          "old_line_content": "        int *keys, numkeys, j;",
          "new_line_content": "        struct redisCommand *cmd = lookupCommand(c->argv[2]->ptr);",
          "content_same": false
        },
        {
          "line": 1920,
          "old_api": null,
          "new_api": "zmalloc_get_allocator_info",
          "old_text": null,
          "new_text": "zmalloc_get_allocator_info(&server.cron_malloc_stats.allocator_allocated,\n                                   &server.cron_malloc_stats.allocator_active,\n                                   &server.cron_malloc_stats.allocator_resident)",
          "old_line_content": "                                   &server.cron_malloc_stats.allocator_active,",
          "new_line_content": "        zmalloc_get_allocator_info(&server.cron_malloc_stats.allocator_allocated,",
          "content_same": false
        },
        {
          "line": 3968,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"Invalid command specified\")",
          "old_line_content": "            return;",
          "new_line_content": "            addReplyError(c,\"Invalid command specified\");",
          "content_same": false
        },
        {
          "line": 3971,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"The command has no key arguments\")",
          "old_line_content": "            return;",
          "new_line_content": "            addReplyError(c,\"The command has no key arguments\");",
          "content_same": false
        },
        {
          "line": 3976,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"Invalid number of arguments specified for command\")",
          "old_line_content": "            return;",
          "new_line_content": "            addReplyError(c,\"Invalid number of arguments specified for command\");",
          "content_same": false
        },
        {
          "line": 1929,
          "old_api": null,
          "new_api": "lua_gc",
          "old_text": null,
          "new_text": "lua_gc(server.lua,LUA_GCCOUNT,0)",
          "old_line_content": "            server.cron_malloc_stats.allocator_resident = server.cron_malloc_stats.process_rss - lua_memory;",
          "new_line_content": "            size_t lua_memory = lua_gc(server.lua,LUA_GCCOUNT,0)*1024LL;",
          "content_same": false
        },
        {
          "line": 3980,
          "old_api": null,
          "new_api": "getKeysFromCommand",
          "old_text": null,
          "new_text": "getKeysFromCommand(cmd,c->argv+2,c->argc-2,&numkeys)",
          "old_line_content": "        if (!keys) {",
          "new_line_content": "        keys = getKeysFromCommand(cmd,c->argv+2,c->argc-2,&numkeys);",
          "content_same": false
        },
        {
          "line": 3982,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"Invalid arguments specified for command\")",
          "old_line_content": "        } else {",
          "new_line_content": "            addReplyError(c,\"Invalid arguments specified for command\");",
          "content_same": false
        },
        {
          "line": 3986,
          "old_api": null,
          "new_api": "getKeysFreeResult",
          "old_text": null,
          "new_text": "getKeysFreeResult(keys)",
          "old_line_content": "        }",
          "new_line_content": "            getKeysFreeResult(keys);",
          "content_same": false
        },
        {
          "line": 3989,
          "old_api": null,
          "new_api": "addReplySubcommandSyntaxError",
          "old_text": null,
          "new_text": "addReplySubcommandSyntaxError(c)",
          "old_line_content": "    }",
          "new_line_content": "        addReplySubcommandSyntaxError(c);",
          "content_same": false
        },
        {
          "line": 1942,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\"SIGTERM received but errors trying to shut down the server, check the logs for more information\")",
          "old_line_content": "        server.shutdown_asap = 0;",
          "new_line_content": "        serverLog(LL_WARNING,\"SIGTERM received but errors trying to shut down the server, check the logs for more information\");",
          "content_same": false
        },
        {
          "line": 1947,
          "old_api": null,
          "new_api": "run_with_period",
          "old_text": null,
          "new_text": "run_with_period(5000)",
          "old_line_content": "        for (j = 0; j < server.dbnum; j++) {",
          "new_line_content": "    run_with_period(5000) {",
          "content_same": false
        },
        {
          "line": 4000,
          "old_api": null,
          "new_api": "sprintf",
          "old_text": null,
          "new_text": "sprintf(s,\"%lluB\",n)",
          "old_line_content": "    } else if (n < (1024*1024)) {",
          "new_line_content": "        sprintf(s,\"%lluB\",n);",
          "content_same": false
        },
        {
          "line": 1953,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(server.db[j].expires)",
          "old_line_content": "            if (used || vkeys) {",
          "new_line_content": "            vkeys = dictSize(server.db[j].expires);",
          "content_same": false
        },
        {
          "line": 1955,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_VERBOSE,\"DB %d: %lld keys (%lld volatile) in %lld slots HT.\",j,used,vkeys,size)",
          "old_line_content": "                /* dictPrintStats(server.dict); */",
          "new_line_content": "                serverLog(LL_VERBOSE,\"DB %d: %lld keys (%lld volatile) in %lld slots HT.\",j,used,vkeys,size);",
          "content_same": false
        },
        {
          "line": 4003,
          "old_api": null,
          "new_api": "sprintf",
          "old_text": null,
          "new_text": "sprintf(s,\"%.2fK\",d)",
          "old_line_content": "    } else if (n < (1024LL*1024*1024)) {",
          "new_line_content": "        sprintf(s,\"%.2fK\",d);",
          "content_same": false
        },
        {
          "line": 4006,
          "old_api": null,
          "new_api": "sprintf",
          "old_text": null,
          "new_text": "sprintf(s,\"%.2fM\",d)",
          "old_line_content": "    } else if (n < (1024LL*1024*1024*1024)) {",
          "new_line_content": "        sprintf(s,\"%.2fM\",d);",
          "content_same": false
        },
        {
          "line": 4009,
          "old_api": null,
          "new_api": "sprintf",
          "old_text": null,
          "new_text": "sprintf(s,\"%.2fG\",d)",
          "old_line_content": "    } else if (n < (1024LL*1024*1024*1024*1024)) {",
          "new_line_content": "        sprintf(s,\"%.2fG\",d);",
          "content_same": false
        },
        {
          "line": 1964,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_DEBUG,\n                \"%lu clients connected (%lu replicas), %zu bytes in use\",\n                listLength(server.clients)-listLength(server.slaves),\n                listLength(server.slaves),\n                zmalloc_used_memory())",
          "old_line_content": "                \"%lu clients connected (%lu replicas), %zu bytes in use\",",
          "new_line_content": "            serverLog(LL_DEBUG,",
          "content_same": false
        },
        {
          "line": 4012,
          "old_api": null,
          "new_api": "sprintf",
          "old_text": null,
          "new_text": "sprintf(s,\"%.2fT\",d)",
          "old_line_content": "    } else if (n < (1024LL*1024*1024*1024*1024*1024)) {",
          "new_line_content": "        sprintf(s,\"%.2fT\",d);",
          "content_same": false
        },
        {
          "line": 4015,
          "old_api": null,
          "new_api": "sprintf",
          "old_text": null,
          "new_text": "sprintf(s,\"%.2fP\",d)",
          "old_line_content": "    } else {",
          "new_line_content": "        sprintf(s,\"%.2fP\",d);",
          "content_same": false
        },
        {
          "line": 1968,
          "old_api": null,
          "new_api": "zmalloc_used_memory",
          "old_text": null,
          "new_text": "zmalloc_used_memory()",
          "old_line_content": "        }",
          "new_line_content": "                zmalloc_used_memory());",
          "content_same": false
        },
        {
          "line": 4018,
          "old_api": null,
          "new_api": "sprintf",
          "old_text": null,
          "new_text": "sprintf(s,\"%lluB\",n)",
          "old_line_content": "    }",
          "new_line_content": "        sprintf(s,\"%lluB\",n);",
          "content_same": false
        },
        {
          "line": 1973,
          "old_api": null,
          "new_api": "clientsCron",
          "old_text": null,
          "new_text": "clientsCron()",
          "old_line_content": "",
          "new_line_content": "    clientsCron();",
          "content_same": false
        },
        {
          "line": 1976,
          "old_api": null,
          "new_api": "databasesCron",
          "old_text": null,
          "new_text": "databasesCron()",
          "old_line_content": "",
          "new_line_content": "    databasesCron();",
          "content_same": false
        },
        {
          "line": 4026,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "    time_t uptime = server.unixtime-server.stat_starttime;",
          "new_line_content": "    sds info = sdsempty();",
          "content_same": false
        },
        {
          "line": 1980,
          "old_api": null,
          "new_api": "hasActiveChildProcess",
          "old_text": null,
          "new_text": "hasActiveChildProcess()",
          "old_line_content": "        server.aof_rewrite_scheduled)",
          "new_line_content": "    if (!hasActiveChildProcess() &&",
          "content_same": false
        },
        {
          "line": 1983,
          "old_api": null,
          "new_api": "rewriteAppendOnlyFileBackground",
          "old_text": null,
          "new_text": "rewriteAppendOnlyFileBackground()",
          "old_line_content": "    }",
          "new_line_content": "        rewriteAppendOnlyFileBackground();",
          "content_same": false
        },
        {
          "line": 1987,
          "old_api": null,
          "new_api": "ldbPendingChildren",
          "old_text": null,
          "new_text": "ldbPendingChildren()",
          "old_line_content": "    {",
          "new_line_content": "    if (hasActiveChildProcess() || ldbPendingChildren())",
          "content_same": false
        },
        {
          "line": 1989,
          "old_api": null,
          "new_api": "checkChildrenDone",
          "old_text": null,
          "new_text": "checkChildrenDone()",
          "old_line_content": "    } else {",
          "new_line_content": "        checkChildrenDone();",
          "content_same": false
        },
        {
          "line": 4037,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(section,\"modules\")",
          "old_line_content": "    if (everything) allsections = 1;",
          "new_line_content": "    modules = strcasecmp(section,\"modules\") == 0;",
          "content_same": false
        },
        {
          "line": 4041,
          "old_api": null,
          "new_api": "getrusage",
          "old_text": null,
          "new_text": "getrusage(RUSAGE_CHILDREN, &c_ru)",
          "old_line_content": "",
          "new_line_content": "    getrusage(RUSAGE_CHILDREN, &c_ru);",
          "content_same": false
        },
        {
          "line": 4044,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(section,\"server\")",
          "old_line_content": "        static int call_uname = 1;",
          "new_line_content": "    if (allsections || defsections || !strcasecmp(section,\"server\")) {",
          "content_same": false
        },
        {
          "line": 4053,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(info,\"\\r\\n\")",
          "old_line_content": "",
          "new_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 2006,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_NOTICE,\"%d changes in %d seconds. Saving...\",\n                    sp->changes, (int)sp->seconds)",
          "old_line_content": "                    sp->changes, (int)sp->seconds);",
          "new_line_content": "                serverLog(LL_NOTICE,\"%d changes in %d seconds. Saving...\",",
          "content_same": false
        },
        {
          "line": 4057,
          "old_api": null,
          "new_api": "uname",
          "old_text": null,
          "new_text": "uname(&name)",
          "old_line_content": "            call_uname = 0;",
          "new_line_content": "            uname(&name);",
          "content_same": false
        },
        {
          "line": 2010,
          "old_api": null,
          "new_api": "rdbSaveBackground",
          "old_text": null,
          "new_text": "rdbSaveBackground(server.rdb_filename,rsiptr)",
          "old_line_content": "                break;",
          "new_line_content": "                rdbSaveBackground(server.rdb_filename,rsiptr);",
          "content_same": false
        },
        {
          "line": 4061,
          "old_api": null,
          "new_api": "sdscatfmt",
          "old_text": null,
          "new_text": "sdscatfmt(info,\n            \"# Server\\r\\n\"\n            \"redis_version:%s\\r\\n\"\n            \"redis_git_sha1:%s\\r\\n\"\n            \"redis_git_dirty:%i\\r\\n\"\n            \"redis_build_id:%s\\r\\n\"\n            \"redis_mode:%s\\r\\n\"\n            \"os:%s %s %s\\r\\n\"\n            \"arch_bits:%i\\r\\n\"\n            \"multiplexing_api:%s\\r\\n\"\n            \"atomicvar_api:%s\\r\\n\"\n            \"gcc_version:%i.%i.%i\\r\\n\"\n            \"process_id:%I\\r\\n\"\n            \"run_id:%s\\r\\n\"\n            \"tcp_port:%i\\r\\n\"\n            \"uptime_in_seconds:%I\\r\\n\"\n            \"uptime_in_days:%I\\r\\n\"\n            \"hz:%i\\r\\n\"\n            \"configured_hz:%i\\r\\n\"\n            \"lru_clock:%u\\r\\n\"\n            \"executable:%s\\r\\n\"\n            \"config_file:%s\\r\\n\"\n            \"io_threads_active:%d\\r\\n\",\n            REDIS_VERSION,\n            redisGitSHA1(),\n            strtol(redisGitDirty(),NULL,10) > 0,\n            redisBuildIdString(),\n            mode,\n            name.sysname, name.release, name.machine,\n            server.arch_bits,\n            aeGetApiName(),\n            REDIS_ATOMIC_API,\n#ifdef __GNUC__\n            __GNUC__,__GNUC_MINOR__,__GNUC_PATCHLEVEL__,\n#else\n            0,0,0,\n#endif\n            (int64_t) getpid(),\n            server.runid,\n            server.port ? server.port : server.tls_port,\n            (int64_t)uptime,\n            (int64_t)(uptime/(3600*24)),\n            server.hz,\n            server.config_hz,\n            server.lruclock,\n            server.executable ? server.executable : \"\",\n            server.configfile ? server.configfile : \"\",\n            server.io_threads_active)",
          "old_line_content": "            \"# Server\\r\\n\"",
          "new_line_content": "        info = sdscatfmt(info,",
          "content_same": false
        },
        {
          "line": 2017,
          "old_api": null,
          "new_api": "hasActiveChildProcess",
          "old_text": null,
          "new_text": "hasActiveChildProcess()",
          "old_line_content": "            server.aof_rewrite_perc &&",
          "new_line_content": "            !hasActiveChildProcess() &&",
          "content_same": false
        },
        {
          "line": 2026,
          "old_api": null,
          "new_api": "rewriteAppendOnlyFileBackground",
          "old_text": null,
          "new_text": "rewriteAppendOnlyFileBackground()",
          "old_line_content": "            }",
          "new_line_content": "                rewriteAppendOnlyFileBackground();",
          "content_same": false
        },
        {
          "line": 2034,
          "old_api": null,
          "new_api": "flushAppendOnlyFile",
          "old_text": null,
          "new_text": "flushAppendOnlyFile(0)",
          "old_line_content": "",
          "new_line_content": "    if (server.aof_flush_postponed_start) flushAppendOnlyFile(0);",
          "content_same": false
        },
        {
          "line": 4087,
          "old_api": null,
          "new_api": "redisBuildIdString",
          "old_text": null,
          "new_text": "redisBuildIdString()",
          "old_line_content": "            mode,",
          "new_line_content": "            redisBuildIdString(),",
          "content_same": false
        },
        {
          "line": 2040,
          "old_api": null,
          "new_api": "run_with_period",
          "old_text": null,
          "new_text": "run_with_period(1000)",
          "old_line_content": "        if (server.aof_last_write_status == C_ERR)",
          "new_line_content": "    run_with_period(1000) {",
          "content_same": false
        },
        {
          "line": 2042,
          "old_api": null,
          "new_api": "flushAppendOnlyFile",
          "old_text": null,
          "new_text": "flushAppendOnlyFile(0)",
          "old_line_content": "    }",
          "new_line_content": "            flushAppendOnlyFile(0);",
          "content_same": false
        },
        {
          "line": 4091,
          "old_api": null,
          "new_api": "aeGetApiName",
          "old_text": null,
          "new_text": "aeGetApiName()",
          "old_line_content": "            REDIS_ATOMIC_API,",
          "new_line_content": "            aeGetApiName(),",
          "content_same": false
        },
        {
          "line": 2046,
          "old_api": null,
          "new_api": "clientsArePaused",
          "old_text": null,
          "new_text": "clientsArePaused()",
          "old_line_content": "",
          "new_line_content": "    clientsArePaused(); /* Don't check return value, just use the side effect.*/",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 2049,
          "old_api": "replicationCron",
          "new_api": null,
          "old_text": "replicationCron()",
          "new_text": null,
          "old_line_content": "    run_with_period(1000) replicationCron();",
          "new_line_content": "     * detect transfer failures, start background RDB transfers and so forth. */",
          "content_same": false
        },
        {
          "line": 4097,
          "old_api": "getpid",
          "new_api": null,
          "old_text": "getpid()",
          "new_text": null,
          "old_line_content": "            (int64_t) getpid(),",
          "new_line_content": "#endif",
          "content_same": false
        },
        {
          "line": 2052,
          "old_api": "run_with_period",
          "new_api": null,
          "old_text": "run_with_period(100)",
          "new_text": null,
          "old_line_content": "    run_with_period(100) {",
          "new_line_content": "    /* Run the Redis Cluster cron. */",
          "content_same": false
        },
        {
          "line": 2057,
          "old_api": "sentinelTimer",
          "new_api": null,
          "old_text": "sentinelTimer()",
          "new_text": null,
          "old_line_content": "    if (server.sentinel_mode) sentinelTimer();",
          "new_line_content": "    /* Run the Sentinel timer if we are in sentinel mode. */",
          "content_same": false
        },
        {
          "line": 2060,
          "old_api": "run_with_period",
          "new_api": null,
          "old_text": "run_with_period(1000)",
          "new_text": null,
          "old_line_content": "    run_with_period(1000) {",
          "new_line_content": "    /* Cleanup expired MIGRATE cached sockets. */",
          "content_same": false
        },
        {
          "line": 4111,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(section,\"clients\")",
          "new_text": null,
          "old_line_content": "    if (allsections || defsections || !strcasecmp(section,\"clients\")) {",
          "new_line_content": "    /* Clients */",
          "content_same": false
        },
        {
          "line": 2065,
          "old_api": "stopThreadedIOIfNeeded",
          "new_api": null,
          "old_text": "stopThreadedIOIfNeeded()",
          "new_text": null,
          "old_line_content": "    stopThreadedIOIfNeeded();",
          "new_line_content": "    /* Stop the I/O threads if we don't have enough pending work. */",
          "content_same": false
        },
        {
          "line": 4113,
          "old_api": "getExpansiveClientsInfo",
          "new_api": null,
          "old_text": "getExpansiveClientsInfo(&maxin,&maxout)",
          "new_text": null,
          "old_line_content": "        getExpansiveClientsInfo(&maxin,&maxout);",
          "new_line_content": "        size_t maxin, maxout;",
          "content_same": false
        },
        {
          "line": 2071,
          "old_api": "trackingLimitUsedSlots",
          "new_api": null,
          "old_text": "trackingLimitUsedSlots()",
          "new_text": null,
          "old_line_content": "    if (server.tracking_clients) trackingLimitUsedSlots();",
          "new_line_content": "     * the operation even if completely idle. */",
          "content_same": false
        },
        {
          "line": 4123,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.slaves)",
          "new_text": null,
          "old_line_content": "            listLength(server.clients)-listLength(server.slaves),",
          "new_line_content": "            \"clients_in_timeout_table:%llu\\r\\n\",",
          "content_same": false
        },
        {
          "line": 4127,
          "old_api": "raxSize",
          "new_api": null,
          "old_text": "raxSize(server.clients_timeout_table)",
          "new_text": null,
          "old_line_content": "            (unsigned long long) raxSize(server.clients_timeout_table));",
          "new_line_content": "            server.tracking_clients,",
          "content_same": false
        },
        {
          "line": 2080,
          "old_api": "hasActiveChildProcess",
          "new_api": null,
          "old_text": "hasActiveChildProcess()",
          "new_text": null,
          "old_line_content": "    if (!hasActiveChildProcess() &&",
          "new_line_content": "     * because we want to give priority to RDB savings for replication. */",
          "content_same": false
        },
        {
          "line": 4131,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(section,\"memory\")",
          "new_text": null,
          "old_line_content": "    if (allsections || defsections || !strcasecmp(section,\"memory\")) {",
          "new_line_content": "    /* Memory */",
          "content_same": false
        },
        {
          "line": 2086,
          "old_api": "rdbPopulateSaveInfo",
          "new_api": null,
          "old_text": "rdbPopulateSaveInfo(&rsi)",
          "new_text": null,
          "old_line_content": "        rsiptr = rdbPopulateSaveInfo(&rsi);",
          "new_line_content": "        rdbSaveInfo rsi, *rsiptr;",
          "content_same": false
        },
        {
          "line": 4139,
          "old_api": "zmalloc_used_memory",
          "new_api": null,
          "old_text": "zmalloc_used_memory()",
          "new_text": null,
          "old_line_content": "        size_t zmalloc_used = zmalloc_used_memory();",
          "new_line_content": "        char maxmemory_hmem[64];",
          "content_same": false
        },
        {
          "line": 2093,
          "old_api": "moduleFireServerEvent",
          "new_api": null,
          "old_text": "moduleFireServerEvent(REDISMODULE_EVENT_CRON_LOOP,\n                          0,\n                          &ei)",
          "new_text": null,
          "old_line_content": "    moduleFireServerEvent(REDISMODULE_EVENT_CRON_LOOP,",
          "new_line_content": "    RedisModuleCronLoopV1 ei = {REDISMODULE_CRON_LOOP_VERSION,server.hz};",
          "content_same": false
        },
        {
          "line": 4141,
          "old_api": "evictPolicyToString",
          "new_api": null,
          "old_text": "evictPolicyToString()",
          "new_text": null,
          "old_line_content": "        const char *evict_policy = evictPolicyToString();",
          "new_line_content": "        size_t total_system_mem = server.system_memory_size;",
          "content_same": false
        },
        {
          "line": 4152,
          "old_api": "bytesToHuman",
          "new_api": null,
          "old_text": "bytesToHuman(hmem,zmalloc_used)",
          "new_text": null,
          "old_line_content": "        bytesToHuman(hmem,zmalloc_used);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4160,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(info,\"\\r\\n\")",
          "new_text": null,
          "old_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2118,
          "old_api": "UNUSED",
          "new_api": null,
          "old_text": "UNUSED(eventLoop)",
          "new_text": null,
          "old_line_content": "    UNUSED(eventLoop);",
          "new_line_content": "void beforeSleep(struct aeEventLoop *eventLoop) {",
          "content_same": false
        },
        {
          "line": 2127,
          "old_api": "handleClientsWithPendingReadsUsingThreads",
          "new_api": null,
          "old_text": "handleClientsWithPendingReadsUsingThreads()",
          "new_text": null,
          "old_line_content": "        processed += handleClientsWithPendingReadsUsingThreads();",
          "new_line_content": "        uint64_t processed = 0;",
          "content_same": false
        },
        {
          "line": 2136,
          "old_api": "handleBlockedClientsTimeout",
          "new_api": null,
          "old_text": "handleBlockedClientsTimeout()",
          "new_text": null,
          "old_line_content": "    handleBlockedClientsTimeout();",
          "new_line_content": "    /* Handle precise timeouts of blocked clients. */",
          "content_same": false
        },
        {
          "line": 2139,
          "old_api": "handleClientsWithPendingReadsUsingThreads",
          "new_api": null,
          "old_text": "handleClientsWithPendingReadsUsingThreads()",
          "new_text": null,
          "old_line_content": "    handleClientsWithPendingReadsUsingThreads();",
          "new_line_content": "    /* We should handle pending reads clients ASAP after event loop. */",
          "content_same": false
        },
        {
          "line": 2142,
          "old_api": "tlsProcessPendingData",
          "new_api": null,
          "old_text": "tlsProcessPendingData()",
          "new_text": null,
          "old_line_content": "    tlsProcessPendingData();",
          "new_line_content": "    /* Handle TLS pending data. (must be done before flushAppendOnlyFile) */",
          "content_same": false
        },
        {
          "line": 2145,
          "old_api": "tlsHasPendingData",
          "new_api": null,
          "old_text": "tlsHasPendingData()",
          "new_text": null,
          "old_line_content": "    aeSetDontWait(server.el, tlsHasPendingData());",
          "new_line_content": "    /* If tls still has pending unread data don't sleep at all. */",
          "content_same": false
        },
        {
          "line": 2151,
          "old_api": "clusterBeforeSleep",
          "new_api": null,
          "old_text": "clusterBeforeSleep()",
          "new_text": null,
          "old_line_content": "    if (server.cluster_enabled) clusterBeforeSleep();",
          "new_line_content": "     * later in this function. */",
          "content_same": false
        },
        {
          "line": 2156,
          "old_api": "activeExpireCycle",
          "new_api": null,
          "old_text": "activeExpireCycle(ACTIVE_EXPIRE_CYCLE_FAST)",
          "new_text": null,
          "old_line_content": "        activeExpireCycle(ACTIVE_EXPIRE_CYCLE_FAST);",
          "new_line_content": "    if (server.active_expire_enabled && server.masterhost == NULL)",
          "content_same": false
        },
        {
          "line": 2160,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.clients_waiting_acks)",
          "new_text": null,
          "old_line_content": "    if (listLength(server.clients_waiting_acks))",
          "new_line_content": "     * in WAIT. */",
          "content_same": false
        },
        {
          "line": 2165,
          "old_api": "moduleHandleBlockedClients",
          "new_api": null,
          "old_text": "moduleHandleBlockedClients()",
          "new_text": null,
          "old_line_content": "    if (moduleCount()) moduleHandleBlockedClients();",
          "new_line_content": "     * blocking commands. */",
          "content_same": false
        },
        {
          "line": 2168,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.unblocked_clients)",
          "new_text": null,
          "old_line_content": "    if (listLength(server.unblocked_clients))",
          "new_line_content": "    /* Try to process pending commands for clients that were just unblocked. */",
          "content_same": false
        },
        {
          "line": 4223,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(server.lua_scripts)",
          "new_text": null,
          "old_line_content": "            dictSize(server.lua_scripts),",
          "new_line_content": "            used_memory_scripts_hmem,",
          "content_same": false
        },
        {
          "line": 2179,
          "old_api": "createStringObject",
          "new_api": null,
          "old_text": "createStringObject(\"REPLCONF\",8)",
          "new_text": null,
          "old_line_content": "        argv[0] = createStringObject(\"REPLCONF\",8);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4238,
          "old_api": "freeMemoryGetNotCountedMemory",
          "new_api": null,
          "old_text": "freeMemoryGetNotCountedMemory()",
          "new_text": null,
          "old_line_content": "            freeMemoryGetNotCountedMemory(),",
          "new_line_content": "            mh->total_frag_bytes,",
          "content_same": false
        },
        {
          "line": 2191,
          "old_api": "trackingBroadcastInvalidationMessages",
          "new_api": null,
          "old_text": "trackingBroadcastInvalidationMessages()",
          "new_text": null,
          "old_line_content": "    trackingBroadcastInvalidationMessages();",
          "new_line_content": "     * client side caching protocol in broadcasting (BCAST) mode. */",
          "content_same": false
        },
        {
          "line": 2194,
          "old_api": "flushAppendOnlyFile",
          "new_api": null,
          "old_text": "flushAppendOnlyFile(0)",
          "new_text": null,
          "old_line_content": "    flushAppendOnlyFile(0);",
          "new_line_content": "    /* Write the AOF buffer on disk */",
          "content_same": false
        },
        {
          "line": 2197,
          "old_api": "handleClientsWithPendingWritesUsingThreads",
          "new_api": null,
          "old_text": "handleClientsWithPendingWritesUsingThreads()",
          "new_text": null,
          "old_line_content": "    handleClientsWithPendingWritesUsingThreads();",
          "new_line_content": "    /* Handle writes with pending output buffers. */",
          "content_same": false
        },
        {
          "line": 4245,
          "old_api": "lazyfreeGetPendingObjectsCount",
          "new_api": null,
          "old_text": "lazyfreeGetPendingObjectsCount()",
          "new_text": null,
          "old_line_content": "            lazyfreeGetPendingObjectsCount()",
          "new_line_content": "            server.active_defrag_running,",
          "content_same": false
        },
        {
          "line": 4247,
          "old_api": "freeMemoryOverheadData",
          "new_api": null,
          "old_text": "freeMemoryOverheadData(mh)",
          "new_text": null,
          "old_line_content": "        freeMemoryOverheadData(mh);",
          "new_line_content": "        );",
          "content_same": false
        },
        {
          "line": 2200,
          "old_api": "freeClientsInAsyncFreeQueue",
          "new_api": null,
          "old_text": "freeClientsInAsyncFreeQueue()",
          "new_text": null,
          "old_line_content": "    freeClientsInAsyncFreeQueue();",
          "new_line_content": "    /* Close clients that need to be closed asynchronous */",
          "content_same": false
        },
        {
          "line": 4251,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(section,\"persistence\")",
          "new_text": null,
          "old_line_content": "    if (allsections || defsections || !strcasecmp(section,\"persistence\")) {",
          "new_line_content": "    /* Persistence */",
          "content_same": false
        },
        {
          "line": 2205,
          "old_api": "moduleReleaseGIL",
          "new_api": null,
          "old_text": "moduleReleaseGIL()",
          "new_text": null,
          "old_line_content": "    if (moduleCount()) moduleReleaseGIL();",
          "new_line_content": "     * time. */",
          "content_same": false
        },
        {
          "line": 2212,
          "old_api": "UNUSED",
          "new_api": null,
          "old_text": "UNUSED(eventLoop)",
          "new_text": null,
          "old_line_content": "    UNUSED(eventLoop);",
          "new_line_content": "void afterSleep(struct aeEventLoop *eventLoop) {",
          "content_same": false
        },
        {
          "line": 2215,
          "old_api": "moduleAcquireGIL",
          "new_api": null,
          "old_text": "moduleAcquireGIL()",
          "new_text": null,
          "old_line_content": "        if (moduleCount()) moduleAcquireGIL();",
          "new_line_content": "    if (!ProcessingEventsWhileBlocked) {",
          "content_same": false
        },
        {
          "line": 2224,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\"\\r\\n\")",
          "new_text": null,
          "old_line_content": "    shared.crlf = createObject(OBJ_STRING,sdsnew(\"\\r\\n\"));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4279,
          "old_api": "intmax_t)((server.rdb_child_pid == -1) ?\n                -1 : time(NULL)-server.rdb_save_time_start)",
          "new_api": null,
          "old_text": "intmax_t)((server.rdb_child_pid == -1) ?\n                -1 : time(NULL)-server.rdb_save_time_start)",
          "new_text": null,
          "old_line_content": "            (intmax_t)((server.rdb_child_pid == -1) ?",
          "new_line_content": "            (intmax_t)server.rdb_save_time_last,",
          "content_same": false
        },
        {
          "line": 2236,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\n        \"-ERR no such key\\r\\n\")",
          "new_text": null,
          "old_line_content": "    shared.nokeyerr = createObject(OBJ_STRING,sdsnew(",
          "new_line_content": "        \"-WRONGTYPE Operation against a key holding the wrong kind of value\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 2238,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\n        \"-ERR syntax error\\r\\n\")",
          "new_text": null,
          "old_line_content": "    shared.syntaxerr = createObject(OBJ_STRING,sdsnew(",
          "new_line_content": "        \"-ERR no such key\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 4286,
          "old_api": "intmax_t)((server.aof_child_pid == -1) ?\n                -1 : time(NULL)-server.aof_rewrite_time_start)",
          "new_api": null,
          "old_text": "intmax_t)((server.aof_child_pid == -1) ?\n                -1 : time(NULL)-server.aof_rewrite_time_start)",
          "new_text": null,
          "old_line_content": "            (intmax_t)((server.aof_child_pid == -1) ?",
          "new_line_content": "            (intmax_t)server.aof_rewrite_time_last,",
          "content_same": false
        },
        {
          "line": 2240,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\n        \"-ERR source and destination objects are the same\\r\\n\")",
          "new_text": null,
          "old_line_content": "    shared.sameobjecterr = createObject(OBJ_STRING,sdsnew(",
          "new_line_content": "        \"-ERR syntax error\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 2242,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\n        \"-ERR index out of range\\r\\n\")",
          "new_text": null,
          "old_line_content": "    shared.outofrangeerr = createObject(OBJ_STRING,sdsnew(",
          "new_line_content": "        \"-ERR source and destination objects are the same\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 2244,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\n        \"-NOSCRIPT No matching script. Please use EVAL.\\r\\n\")",
          "new_text": null,
          "old_line_content": "    shared.noscripterr = createObject(OBJ_STRING,sdsnew(",
          "new_line_content": "        \"-ERR index out of range\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 2246,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\n        \"-LOADING Redis is loading the dataset in memory\\r\\n\")",
          "new_text": null,
          "old_line_content": "    shared.loadingerr = createObject(OBJ_STRING,sdsnew(",
          "new_line_content": "        \"-NOSCRIPT No matching script. Please use EVAL.\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 4295,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info,\n                \"aof_current_size:%lld\\r\\n\"\n                \"aof_base_size:%lld\\r\\n\"\n                \"aof_pending_rewrite:%d\\r\\n\"\n                \"aof_buffer_length:%zu\\r\\n\"\n                \"aof_rewrite_buffer_length:%lu\\r\\n\"\n                \"aof_pending_bio_fsync:%llu\\r\\n\"\n                \"aof_delayed_fsync:%lu\\r\\n\",\n                (long long) server.aof_current_size,\n                (long long) server.aof_rewrite_base_size,\n                server.aof_rewrite_scheduled,\n                sdslen(server.aof_buf),\n                aofRewriteBufferSize(),\n                bioPendingJobsOfType(BIO_AOF_FSYNC),\n                server.aof_delayed_fsync)",
          "new_text": null,
          "old_line_content": "            info = sdscatprintf(info,",
          "new_line_content": "        if (server.aof_enabled) {",
          "content_same": false
        },
        {
          "line": 2248,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\n        \"-BUSY Redis is busy running a script. You can only call SCRIPT KILL or SHUTDOWN NOSAVE.\\r\\n\")",
          "new_text": null,
          "old_line_content": "    shared.slowscripterr = createObject(OBJ_STRING,sdsnew(",
          "new_line_content": "        \"-LOADING Redis is loading the dataset in memory\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 2250,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\n        \"-MASTERDOWN Link with MASTER is down and replica-serve-stale-data is set to 'no'.\\r\\n\")",
          "new_text": null,
          "old_line_content": "    shared.masterdownerr = createObject(OBJ_STRING,sdsnew(",
          "new_line_content": "        \"-BUSY Redis is busy running a script. You can only call SCRIPT KILL or SHUTDOWN NOSAVE.\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 2252,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\n        \"-MISCONF Redis is configured to save RDB snapshots, but it is currently not able to persist on disk. Commands that may modify the data set are disabled, because this instance is configured to report errors during writes if RDB snapshotting fails (stop-writes-on-bgsave-error option). Please check the Redis logs for details about the RDB error.\\r\\n\")",
          "new_text": null,
          "old_line_content": "    shared.bgsaveerr = createObject(OBJ_STRING,sdsnew(",
          "new_line_content": "        \"-MASTERDOWN Link with MASTER is down and replica-serve-stale-data is set to 'no'.\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 2254,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\n        \"-READONLY You can't write against a read only replica.\\r\\n\")",
          "new_text": null,
          "old_line_content": "    shared.roslaveerr = createObject(OBJ_STRING,sdsnew(",
          "new_line_content": "        \"-MISCONF Redis is configured to save RDB snapshots, but it is currently not able to persist on disk. Commands that may modify the data set are disabled, because this instance is configured to report errors during writes if RDB snapshotting fails (stop-writes-on-bgsave-error option). Please check the Redis logs for details about the RDB error.\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 2256,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\n        \"-NOAUTH Authentication required.\\r\\n\")",
          "new_text": null,
          "old_line_content": "    shared.noautherr = createObject(OBJ_STRING,sdsnew(",
          "new_line_content": "        \"-READONLY You can't write against a read only replica.\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 2258,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\n        \"-OOM command not allowed when used memory > 'maxmemory'.\\r\\n\")",
          "new_text": null,
          "old_line_content": "    shared.oomerr = createObject(OBJ_STRING,sdsnew(",
          "new_line_content": "        \"-NOAUTH Authentication required.\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 4306,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(server.aof_buf)",
          "new_text": null,
          "old_line_content": "                sdslen(server.aof_buf),",
          "new_line_content": "                server.aof_rewrite_scheduled,",
          "content_same": false
        },
        {
          "line": 2260,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\n        \"-EXECABORT Transaction discarded because of previous errors.\\r\\n\")",
          "new_text": null,
          "old_line_content": "    shared.execaborterr = createObject(OBJ_STRING,sdsnew(",
          "new_line_content": "        \"-OOM command not allowed when used memory > 'maxmemory'.\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 2262,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\n        \"-NOREPLICAS Not enough good replicas to write.\\r\\n\")",
          "new_text": null,
          "old_line_content": "    shared.noreplicaserr = createObject(OBJ_STRING,sdsnew(",
          "new_line_content": "        \"-EXECABORT Transaction discarded because of previous errors.\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 2264,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\n        \"-BUSYKEY Target key name already exists.\\r\\n\")",
          "new_text": null,
          "old_line_content": "    shared.busykeyerr = createObject(OBJ_STRING,sdsnew(",
          "new_line_content": "        \"-NOREPLICAS Not enough good replicas to write.\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 2266,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\" \")",
          "new_text": null,
          "old_line_content": "    shared.space = createObject(OBJ_STRING,sdsnew(\" \"));",
          "new_line_content": "        \"-BUSYKEY Target key name already exists.\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 2273,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\"$-1\\r\\n\")",
          "new_text": null,
          "old_line_content": "    shared.null[2] = createObject(OBJ_STRING,sdsnew(\"$-1\\r\\n\"));",
          "new_line_content": "    shared.null[1] = NULL;",
          "content_same": false
        },
        {
          "line": 4321,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "            elapsed = time(NULL)-server.loading_start_time;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2278,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\"*-1\\r\\n\")",
          "new_text": null,
          "old_line_content": "    shared.nullarray[2] = createObject(OBJ_STRING,sdsnew(\"*-1\\r\\n\"));",
          "new_line_content": "    shared.nullarray[1] = NULL;",
          "content_same": false
        },
        {
          "line": 4329,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info,\n                \"loading_start_time:%jd\\r\\n\"\n                \"loading_total_bytes:%llu\\r\\n\"\n                \"loading_loaded_bytes:%llu\\r\\n\"\n                \"loading_loaded_perc:%.2f\\r\\n\"\n                \"loading_eta_seconds:%jd\\r\\n\",\n                (intmax_t) server.loading_start_time,\n                (unsigned long long) server.loading_total_bytes,\n                (unsigned long long) server.loading_loaded_bytes,\n                perc,\n                (intmax_t)eta\n            )",
          "new_text": null,
          "old_line_content": "            info = sdscatprintf(info,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2283,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\"*0\\r\\n\")",
          "new_text": null,
          "old_line_content": "    shared.emptymap[2] = createObject(OBJ_STRING,sdsnew(\"*0\\r\\n\"));",
          "new_line_content": "    shared.emptymap[1] = NULL;",
          "content_same": false
        },
        {
          "line": 2288,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\"*0\\r\\n\")",
          "new_text": null,
          "old_line_content": "    shared.emptyset[2] = createObject(OBJ_STRING,sdsnew(\"*0\\r\\n\"));",
          "new_line_content": "    shared.emptyset[1] = NULL;",
          "content_same": false
        },
        {
          "line": 2295,
          "old_api": "ll2string",
          "new_api": null,
          "old_text": "ll2string(dictid_str,sizeof(dictid_str),j)",
          "new_text": null,
          "old_line_content": "        dictid_len = ll2string(dictid_str,sizeof(dictid_str),j);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4345,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(section,\"stats\")",
          "new_text": null,
          "old_line_content": "    if (allsections || defsections || !strcasecmp(section,\"stats\")) {",
          "new_line_content": "    /* Stats */",
          "content_same": false
        },
        {
          "line": 2301,
          "old_api": "createStringObject",
          "new_api": null,
          "old_text": "createStringObject(\"$7\\r\\nmessage\\r\\n\",13)",
          "new_text": null,
          "old_line_content": "    shared.messagebulk = createStringObject(\"$7\\r\\nmessage\\r\\n\",13);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2319,
          "old_api": "createObject",
          "new_api": null,
          "old_text": "createObject(OBJ_STRING,(void*)(long)j)",
          "new_text": null,
          "old_line_content": "            makeObjectShared(createObject(OBJ_STRING,(void*)(long)j));",
          "new_line_content": "        shared.integers[j] =",
          "content_same": false
        },
        {
          "line": 2323,
          "old_api": "createObject",
          "new_api": null,
          "old_text": "createObject(OBJ_STRING,\n            sdscatprintf(sdsempty(),\"*%d\\r\\n\",j))",
          "new_text": null,
          "old_line_content": "        shared.mbulkhdr[j] = createObject(OBJ_STRING,",
          "new_line_content": "    for (j = 0; j < OBJ_SHARED_BULKHDR_LEN; j++) {",
          "content_same": false
        },
        {
          "line": 2332,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\"minstring\")",
          "new_text": null,
          "old_line_content": "    shared.minstring = sdsnew(\"minstring\");",
          "new_line_content": "     * string in string comparisons for the ZRANGEBYLEX command. */",
          "content_same": false
        },
        {
          "line": 4386,
          "old_api": "getInstantaneousMetric",
          "new_api": null,
          "old_text": "getInstantaneousMetric(STATS_METRIC_COMMAND)",
          "new_text": null,
          "old_line_content": "            getInstantaneousMetric(STATS_METRIC_COMMAND),",
          "new_line_content": "            server.stat_numcommands,",
          "content_same": false
        },
        {
          "line": 2339,
          "old_api": "updateCachedTime",
          "new_api": null,
          "old_text": "updateCachedTime(1)",
          "new_text": null,
          "old_line_content": "    updateCachedTime(1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4389,
          "old_api": "getInstantaneousMetric",
          "new_api": null,
          "old_text": "getInstantaneousMetric(STATS_METRIC_NET_INPUT)",
          "new_text": null,
          "old_line_content": "            (float)getInstantaneousMetric(STATS_METRIC_NET_INPUT)/1024,",
          "new_line_content": "            server.stat_net_output_bytes,",
          "content_same": false
        },
        {
          "line": 2342,
          "old_api": "changeReplicationId",
          "new_api": null,
          "old_text": "changeReplicationId()",
          "new_text": null,
          "old_line_content": "    changeReplicationId();",
          "new_line_content": "    server.runid[CONFIG_RUN_ID_SIZE] = '\\0';",
          "content_same": false
        },
        {
          "line": 2348,
          "old_api": "getTimeZone",
          "new_api": null,
          "old_text": "getTimeZone()",
          "new_text": null,
          "old_line_content": "    server.timezone = getTimeZone(); /* Initialized by tzset(). */",
          "new_line_content": "                                      is initialized. */",
          "content_same": false
        },
        {
          "line": 4402,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(server.pubsub_channels)",
          "new_text": null,
          "old_line_content": "            dictSize(server.pubsub_channels),",
          "new_line_content": "            server.stat_keyspace_misses,",
          "content_same": false
        },
        {
          "line": 4405,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(server.migrate_cached_sockets)",
          "new_text": null,
          "old_line_content": "            dictSize(server.migrate_cached_sockets),",
          "new_line_content": "            server.stat_fork_time,",
          "content_same": false
        },
        {
          "line": 2361,
          "old_api": "zstrdup",
          "new_api": null,
          "old_text": "zstrdup(CONFIG_DEFAULT_LOGFILE)",
          "new_text": null,
          "old_line_content": "    server.logfile = zstrdup(CONFIG_DEFAULT_LOGFILE);",
          "new_line_content": "    server.loading = 0;",
          "content_same": false
        },
        {
          "line": 4411,
          "old_api": "trackingGetTotalKeys",
          "new_api": null,
          "old_text": "trackingGetTotalKeys()",
          "new_text": null,
          "old_line_content": "            (unsigned long long) trackingGetTotalKeys(),",
          "new_line_content": "            server.stat_active_defrag_key_misses,",
          "content_same": false
        },
        {
          "line": 2366,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "    server.aof_last_fsync = time(NULL);",
          "new_line_content": "    server.aof_flush_sleep = 0;",
          "content_same": false
        },
        {
          "line": 4422,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(section,\"replication\")",
          "new_text": null,
          "old_line_content": "    if (allsections || defsections || !strcasecmp(section,\"replication\")) {",
          "new_line_content": "    /* Replication */",
          "content_same": false
        },
        {
          "line": 2378,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(server.blocked_clients_by_type,0,\n           sizeof(server.blocked_clients_by_type))",
          "new_text": null,
          "old_line_content": "    memset(server.blocked_clients_by_type,0,",
          "new_line_content": "    server.blocked_clients = 0;",
          "content_same": false
        },
        {
          "line": 2381,
          "old_api": "zstrdup",
          "new_api": null,
          "old_text": "zstrdup(CONFIG_DEFAULT_CLUSTER_CONFIG_FILE)",
          "new_text": null,
          "old_line_content": "    server.cluster_configfile = zstrdup(CONFIG_DEFAULT_CLUSTER_CONFIG_FILE);",
          "new_line_content": "    server.shutdown_asap = 0;",
          "content_same": false
        },
        {
          "line": 2383,
          "old_api": "dictCreate",
          "new_api": null,
          "old_text": "dictCreate(&migrateCacheDictType,NULL)",
          "new_text": null,
          "old_line_content": "    server.migrate_cached_sockets = dictCreate(&migrateCacheDictType,NULL);",
          "new_line_content": "    server.cluster_module_flags = CLUSTER_MODULE_FLAG_NONE;",
          "content_same": false
        },
        {
          "line": 2387,
          "old_api": "getLRUClock",
          "new_api": null,
          "old_text": "getLRUClock()",
          "new_text": null,
          "old_line_content": "    server.lruclock = getLRUClock();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4436,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info,\n                \"master_host:%s\\r\\n\"\n                \"master_port:%d\\r\\n\"\n                \"master_link_status:%s\\r\\n\"\n                \"master_last_io_seconds_ago:%d\\r\\n\"\n                \"master_sync_in_progress:%d\\r\\n\"\n                \"slave_repl_offset:%lld\\r\\n\"\n                ,server.masterhost,\n                server.masterport,\n                (server.repl_state == REPL_STATE_CONNECTED) ?\n                    \"up\" : \"down\",\n                server.master ?\n                ((int)(server.unixtime-server.master->lastinteraction)) : -1,\n                server.repl_state == REPL_STATE_TRANSFER,\n                slave_repl_offset\n            )",
          "new_text": null,
          "old_line_content": "            info = sdscatprintf(info,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2390,
          "old_api": "appendServerSaveParams",
          "new_api": null,
          "old_text": "appendServerSaveParams(60*60,1)",
          "new_text": null,
          "old_line_content": "    appendServerSaveParams(60*60,1);  /* save after 1 hour and 1 change */",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4454,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info,\n                    \"master_sync_left_bytes:%lld\\r\\n\"\n                    \"master_sync_last_io_seconds_ago:%d\\r\\n\"\n                    , (long long)\n                        (server.repl_transfer_size - server.repl_transfer_read),\n                    (int)(server.unixtime-server.repl_transfer_lastio)\n                )",
          "new_text": null,
          "old_line_content": "                info = sdscatprintf(info,",
          "new_line_content": "            if (server.repl_state == REPL_STATE_TRANSFER) {",
          "content_same": false
        },
        {
          "line": 2414,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "    server.repl_no_slaves_since = time(NULL);",
          "new_line_content": "    server.repl_backlog_off = 0;",
          "content_same": false
        },
        {
          "line": 4464,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info,\n                    \"master_link_down_since_seconds:%jd\\r\\n\",\n                    (intmax_t)(server.unixtime-server.repl_down_since))",
          "new_text": null,
          "old_line_content": "                info = sdscatprintf(info,",
          "new_line_content": "            if (server.repl_state != REPL_STATE_CONNECTED) {",
          "content_same": false
        },
        {
          "line": 4466,
          "old_api": "intmax_t)(server.unixtime-server.repl_down_since)",
          "new_api": null,
          "old_text": "intmax_t)(server.unixtime-server.repl_down_since)",
          "new_text": null,
          "old_line_content": "                    (intmax_t)(server.unixtime-server.repl_down_since));",
          "new_line_content": "                    \"master_link_down_since_seconds:%jd\\r\\n\",",
          "content_same": false
        },
        {
          "line": 4468,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info,\n                \"slave_priority:%d\\r\\n\"\n                \"slave_read_only:%d\\r\\n\",\n                server.slave_priority,\n                server.repl_slave_ro)",
          "new_text": null,
          "old_line_content": "            info = sdscatprintf(info,",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 4475,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info,\n            \"connected_slaves:%lu\\r\\n\",\n            listLength(server.slaves))",
          "new_text": null,
          "old_line_content": "        info = sdscatprintf(info,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2429,
          "old_api": "dictCreate",
          "new_api": null,
          "old_text": "dictCreate(&commandTableDictType,NULL)",
          "new_text": null,
          "old_line_content": "    server.commands = dictCreate(&commandTableDictType,NULL);",
          "new_line_content": "     * redis.conf using the rename-command directive. */",
          "content_same": false
        },
        {
          "line": 4477,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.slaves)",
          "new_text": null,
          "old_line_content": "            listLength(server.slaves));",
          "new_line_content": "            \"connected_slaves:%lu\\r\\n\",",
          "content_same": false
        },
        {
          "line": 4483,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info,\n                \"min_slaves_good_slaves:%d\\r\\n\",\n                server.repl_good_slaves_count)",
          "new_text": null,
          "old_line_content": "            info = sdscatprintf(info,",
          "new_line_content": "            server.repl_min_slaves_max_lag) {",
          "content_same": false
        },
        {
          "line": 4488,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.slaves)",
          "new_text": null,
          "old_line_content": "        if (listLength(server.slaves)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4493,
          "old_api": "listRewind",
          "new_api": null,
          "old_text": "listRewind(server.slaves,&li)",
          "new_text": null,
          "old_line_content": "            listRewind(server.slaves,&li);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4502,
          "old_api": "connPeerToString",
          "new_api": null,
          "old_text": "connPeerToString(slave->conn,ip,sizeof(ip),&port)",
          "new_text": null,
          "old_line_content": "                    if (connPeerToString(slave->conn,ip,sizeof(ip),&port) == -1)",
          "new_line_content": "                if (slaveip[0] == '\\0') {",
          "content_same": false
        },
        {
          "line": 2456,
          "old_api": "initConfigValues",
          "new_api": null,
          "old_text": "initConfigValues()",
          "new_text": null,
          "old_line_content": "    initConfigValues();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4520,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "                    lag = time(NULL) - slave->repl_ack_time;",
          "new_line_content": "                if (slave->replstate == SLAVE_STATE_ONLINE)",
          "content_same": false
        },
        {
          "line": 4522,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info,\n                    \"slave%d:ip=%s,port=%d,state=%s,\"\n                    \"offset=%lld,lag=%ld\\r\\n\",\n                    slaveid,slaveip,slave->slave_listening_port,state,\n                    slave->repl_ack_off, lag)",
          "new_text": null,
          "old_line_content": "                info = sdscatprintf(info,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2481,
          "old_api": "access",
          "new_api": null,
          "old_text": "access(server.executable,X_OK)",
          "new_text": null,
          "old_line_content": "    if (access(server.executable,X_OK) == -1) {",
          "new_line_content": "     * server instance. */",
          "content_same": false
        },
        {
          "line": 4530,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info,\n            \"master_replid:%s\\r\\n\"\n            \"master_replid2:%s\\r\\n\"\n            \"master_repl_offset:%lld\\r\\n\"\n            \"second_repl_offset:%lld\\r\\n\"\n            \"repl_backlog_active:%d\\r\\n\"\n            \"repl_backlog_size:%lld\\r\\n\"\n            \"repl_backlog_first_byte_offset:%lld\\r\\n\"\n            \"repl_backlog_histlen:%lld\\r\\n\",\n            server.replid,\n            server.replid2,\n            server.master_repl_offset,\n            server.second_replid_offset,\n            server.repl_backlog != NULL,\n            server.repl_backlog_size,\n            server.repl_backlog_off,\n            server.repl_backlog_histlen)",
          "new_text": null,
          "old_line_content": "        info = sdscatprintf(info,",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2490,
          "old_api": "rewriteConfig",
          "new_api": null,
          "old_text": "rewriteConfig(server.configfile)",
          "new_text": null,
          "old_line_content": "        rewriteConfig(server.configfile) == -1)",
          "new_line_content": "        server.configfile &&",
          "content_same": false
        },
        {
          "line": 2492,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\"Can't restart: configuration rewrite process \"\n                             \"failed\")",
          "new_text": null,
          "old_line_content": "        serverLog(LL_WARNING,\"Can't restart: configuration rewrite process \"",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 2499,
          "old_api": "prepareForShutdown",
          "new_api": null,
          "old_text": "prepareForShutdown(SHUTDOWN_NOFLAGS)",
          "new_text": null,
          "old_line_content": "        prepareForShutdown(SHUTDOWN_NOFLAGS) != C_OK)",
          "new_line_content": "    if (flags & RESTART_SERVER_GRACEFULLY &&",
          "content_same": false
        },
        {
          "line": 2501,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\"Can't restart: error preparing for shutdown\")",
          "new_text": null,
          "old_line_content": "        serverLog(LL_WARNING,\"Can't restart: error preparing for shutdown\");",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 4550,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(section,\"cpu\")",
          "new_text": null,
          "old_line_content": "    if (allsections || defsections || !strcasecmp(section,\"cpu\")) {",
          "new_line_content": "    /* CPU */",
          "content_same": false
        },
        {
          "line": 2510,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(j)",
          "new_text": null,
          "old_line_content": "        if (fcntl(j,F_GETFD) != -1) close(j);",
          "new_line_content": "         * Valgrind issues a warning on close(). */",
          "content_same": false
        },
        {
          "line": 2514,
          "old_api": "usleep",
          "new_api": null,
          "old_text": "usleep(delay*1000)",
          "new_text": null,
          "old_line_content": "    if (delay) usleep(delay*1000);",
          "new_line_content": "    /* Execute the server with the original command line. */",
          "content_same": false
        },
        {
          "line": 4565,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(section,\"modules\")",
          "new_text": null,
          "old_line_content": "    if (allsections || defsections || !strcasecmp(section,\"modules\")) {",
          "new_line_content": "    /* Modules */",
          "content_same": false
        },
        {
          "line": 2520,
          "old_api": "_exit",
          "new_api": null,
          "old_text": "_exit(1)",
          "new_text": null,
          "old_line_content": "    _exit(1);",
          "new_line_content": "    /* If an error occurred here, there is nothing we can do, but exit. */",
          "content_same": false
        },
        {
          "line": 4572,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(section,\"commandstats\")",
          "new_text": null,
          "old_line_content": "    if (allsections || !strcasecmp(section,\"commandstats\")) {",
          "new_line_content": "    /* Command statistics */",
          "content_same": false
        },
        {
          "line": 4579,
          "old_api": "dictGetSafeIterator",
          "new_api": null,
          "old_text": "dictGetSafeIterator(server.commands)",
          "new_text": null,
          "old_line_content": "        di = dictGetSafeIterator(server.commands);",
          "new_line_content": "        dictIterator *di;",
          "content_same": false
        },
        {
          "line": 4583,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info,\n                \"cmdstat_%s:calls=%lld,usec=%lld,usec_per_call=%.2f\\r\\n\",\n                c->name, c->calls, c->microseconds,\n                (c->calls == 0) ? 0 : ((float)c->microseconds/c->calls))",
          "new_text": null,
          "old_line_content": "            info = sdscatprintf(info,",
          "new_line_content": "            if (!c->calls) continue;",
          "content_same": false
        },
        {
          "line": 2537,
          "old_api": "getrlimit",
          "new_api": null,
          "old_text": "getrlimit(RLIMIT_NOFILE,&limit)",
          "new_text": null,
          "old_line_content": "    if (getrlimit(RLIMIT_NOFILE,&limit) == -1) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4588,
          "old_api": "dictReleaseIterator",
          "new_api": null,
          "old_text": "dictReleaseIterator(di)",
          "new_text": null,
          "old_line_content": "        dictReleaseIterator(di);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4592,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(section,\"cluster\")",
          "new_text": null,
          "old_line_content": "    if (allsections || defsections || !strcasecmp(section,\"cluster\")) {",
          "new_line_content": "    /* Cluster */",
          "content_same": false
        },
        {
          "line": 4601,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(section,\"keyspace\")",
          "new_text": null,
          "old_line_content": "    if (allsections || defsections || !strcasecmp(section,\"keyspace\")) {",
          "new_line_content": "    /* Key space */",
          "content_same": false
        },
        {
          "line": 2558,
          "old_api": "setrlimit",
          "new_api": null,
          "old_text": "setrlimit(RLIMIT_NOFILE,&limit)",
          "new_text": null,
          "old_line_content": "                if (setrlimit(RLIMIT_NOFILE,&limit) != -1) break;",
          "new_line_content": "                limit.rlim_max = bestlimit;",
          "content_same": false
        },
        {
          "line": 4607,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(server.db[j].dict)",
          "new_text": null,
          "old_line_content": "            keys = dictSize(server.db[j].dict);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4610,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info,\n                    \"db%d:keys=%lld,expires=%lld,avg_ttl=%lld\\r\\n\",\n                    j, keys, vkeys, server.db[j].avg_ttl)",
          "new_text": null,
          "old_line_content": "                info = sdscatprintf(info,",
          "new_line_content": "            if (keys || vkeys) {",
          "content_same": false
        },
        {
          "line": 4622,
          "old_api": "modulesCollectInfo",
          "new_api": null,
          "old_text": "modulesCollectInfo(info,\n                                  everything || modules ? NULL: section,\n                                  0, /* not a crash report */\n                                  sections)",
          "new_text": null,
          "old_line_content": "        info = modulesCollectInfo(info,",
          "new_line_content": "        (!allsections && !defsections && sections==0)) {",
          "content_same": false
        },
        {
          "line": 2578,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\"Your current 'ulimit -n' \"\n                        \"of %llu is not enough for the server to start. \"\n                        \"Please increase your open file limit to at least \"\n                        \"%llu. Exiting.\",\n                        (unsigned long long) oldlimit,\n                        (unsigned long long) maxfiles)",
          "new_text": null,
          "old_line_content": "                    serverLog(LL_WARNING,\"Your current 'ulimit -n' \"",
          "new_line_content": "                if (bestlimit <= CONFIG_MIN_RESERVED_FDS) {",
          "content_same": false
        },
        {
          "line": 2584,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "                    exit(1);",
          "new_line_content": "                        (unsigned long long) maxfiles);",
          "content_same": false
        },
        {
          "line": 2586,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\"You requested maxclients of %d \"\n                    \"requiring at least %llu max file descriptors.\",\n                    old_maxclients,\n                    (unsigned long long) maxfiles)",
          "new_text": null,
          "old_line_content": "                serverLog(LL_WARNING,\"You requested maxclients of %d \"",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 4634,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.syntaxerr)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.syntaxerr);",
          "new_line_content": "    if (c->argc > 2) {",
          "content_same": false
        },
        {
          "line": 4637,
          "old_api": "genRedisInfoString",
          "new_api": null,
          "old_text": "genRedisInfoString(section)",
          "new_text": null,
          "old_line_content": "    sds info = genRedisInfoString(section);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2590,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\"Server can't set maximum open files \"\n                    \"to %llu because of OS error: %s.\",\n                    (unsigned long long) maxfiles, strerror(setrlimit_error))",
          "new_text": null,
          "old_line_content": "                serverLog(LL_WARNING,\"Server can't set maximum open files \"",
          "new_line_content": "                    (unsigned long long) maxfiles);",
          "content_same": false
        },
        {
          "line": 2592,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(setrlimit_error)",
          "new_text": null,
          "old_line_content": "                    (unsigned long long) maxfiles, strerror(setrlimit_error));",
          "new_line_content": "                    \"to %llu because of OS error: %s.\",",
          "content_same": false
        },
        {
          "line": 2599,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_NOTICE,\"Increased maximum number of open files \"\n                    \"to %llu (it was originally set to %llu).\",\n                    (unsigned long long) maxfiles,\n                    (unsigned long long) oldlimit)",
          "new_text": null,
          "old_line_content": "                serverLog(LL_NOTICE,\"Increased maximum number of open files \"",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 4647,
          "old_api": "listAddNodeTail",
          "new_api": null,
          "old_text": "listAddNodeTail(server.monitors,c)",
          "new_text": null,
          "old_line_content": "    listAddNodeTail(server.monitors,c);",
          "new_line_content": "    c->flags |= (CLIENT_SLAVE|CLIENT_MONITOR);",
          "content_same": false
        },
        {
          "line": 4655,
          "old_api": "fopen",
          "new_api": null,
          "old_text": "fopen(\"/proc/sys/vm/overcommit_memory\",\"r\")",
          "new_text": null,
          "old_line_content": "    FILE *fp = fopen(\"/proc/sys/vm/overcommit_memory\",\"r\");",
          "new_line_content": "int linuxOvercommitMemoryValue(void) {",
          "content_same": false
        },
        {
          "line": 4659,
          "old_api": "fgets",
          "new_api": null,
          "old_text": "fgets(buf,64,fp)",
          "new_text": null,
          "old_line_content": "    if (fgets(buf,64,fp) == NULL) {",
          "new_line_content": "    if (!fp) return -1;",
          "content_same": false
        },
        {
          "line": 2612,
          "old_api": "fopen",
          "new_api": null,
          "old_text": "fopen(\"/proc/sys/net/core/somaxconn\",\"r\")",
          "new_text": null,
          "old_line_content": "    FILE *fp = fopen(\"/proc/sys/net/core/somaxconn\",\"r\");",
          "new_line_content": "#ifdef HAVE_PROC_SOMAXCONN",
          "content_same": false
        },
        {
          "line": 2615,
          "old_api": "fgets",
          "new_api": null,
          "old_text": "fgets(buf,sizeof(buf),fp)",
          "new_text": null,
          "old_line_content": "    if (fgets(buf,sizeof(buf),fp) != NULL) {",
          "new_line_content": "    if (!fp) return;",
          "content_same": false
        },
        {
          "line": 4663,
          "old_api": "fclose",
          "new_api": null,
          "old_text": "fclose(fp)",
          "new_text": null,
          "old_line_content": "    fclose(fp);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4665,
          "old_api": "atoi",
          "new_api": null,
          "old_text": "atoi(buf)",
          "new_text": null,
          "old_line_content": "    return atoi(buf);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2618,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\"WARNING: The TCP backlog setting of %d cannot be enforced because /proc/sys/net/core/somaxconn is set to the lower value of %d.\", server.tcp_backlog, somaxconn)",
          "new_text": null,
          "old_line_content": "            serverLog(LL_WARNING,\"WARNING: The TCP backlog setting of %d cannot be enforced because /proc/sys/net/core/somaxconn is set to the lower value of %d.\", server.tcp_backlog, somaxconn);",
          "new_line_content": "        if (somaxconn > 0 && somaxconn < server.tcp_backlog) {",
          "content_same": false
        },
        {
          "line": 2621,
          "old_api": "fclose",
          "new_api": null,
          "old_text": "fclose(fp)",
          "new_text": null,
          "old_line_content": "    fclose(fp);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4669,
          "old_api": "linuxOvercommitMemoryValue",
          "new_api": null,
          "old_text": "linuxOvercommitMemoryValue()",
          "new_text": null,
          "old_line_content": "    if (linuxOvercommitMemoryValue() == 0) {",
          "new_line_content": "void linuxMemoryWarnings(void) {",
          "content_same": false
        },
        {
          "line": 4672,
          "old_api": "THPIsEnabled",
          "new_api": null,
          "old_text": "THPIsEnabled()",
          "new_text": null,
          "old_line_content": "    if (THPIsEnabled()) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4681,
          "old_api": "zstrdup",
          "new_api": null,
          "old_text": "zstrdup(CONFIG_DEFAULT_PID_FILE)",
          "new_text": null,
          "old_line_content": "    if (!server.pidfile) server.pidfile = zstrdup(CONFIG_DEFAULT_PID_FILE);",
          "new_line_content": "     * default pidfile path */",
          "content_same": false
        },
        {
          "line": 4684,
          "old_api": "fopen",
          "new_api": null,
          "old_text": "fopen(server.pidfile,\"w\")",
          "new_text": null,
          "old_line_content": "    FILE *fp = fopen(server.pidfile,\"w\");",
          "new_line_content": "    /* Try to write the pid file in a best-effort way. */",
          "content_same": false
        },
        {
          "line": 4686,
          "old_api": "getpid",
          "new_api": null,
          "old_text": "getpid()",
          "new_text": null,
          "old_line_content": "        fprintf(fp,\"%d\\n\",(int)getpid());",
          "new_line_content": "    if (fp) {",
          "content_same": false
        },
        {
          "line": 4694,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(0)",
          "new_text": null,
          "old_line_content": "    if (fork() != 0) exit(0); /* parent exits */",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4700,
          "old_api": "open",
          "new_api": null,
          "old_text": "open(\"/dev/null\", O_RDWR, 0)",
          "new_text": null,
          "old_line_content": "    if ((fd = open(\"/dev/null\", O_RDWR, 0)) != -1) {",
          "new_line_content": "     * it will not log at all. */",
          "content_same": false
        },
        {
          "line": 2654,
          "old_api": "anetTcp6Server",
          "new_api": null,
          "old_text": "anetTcp6Server(server.neterr,port,NULL,\n                server.tcp_backlog)",
          "new_text": null,
          "old_line_content": "            fds[*count] = anetTcp6Server(server.neterr,port,NULL,",
          "new_line_content": "             * server.bindaddr_count == 0. */",
          "content_same": false
        },
        {
          "line": 2657,
          "old_api": "anetNonBlock",
          "new_api": null,
          "old_text": "anetNonBlock(NULL,fds[*count])",
          "new_text": null,
          "old_line_content": "                anetNonBlock(NULL,fds[*count]);",
          "new_line_content": "            if (fds[*count] != ANET_ERR) {",
          "content_same": false
        },
        {
          "line": 2661,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\"Not listening to IPv6: unsupported\")",
          "new_text": null,
          "old_line_content": "                serverLog(LL_WARNING,\"Not listening to IPv6: unsupported\");",
          "new_line_content": "                unsupported++;",
          "content_same": false
        },
        {
          "line": 4709,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"Redis server v=%s sha=%s:%d malloc=%s bits=%d build=%llx\\n\",\n        REDIS_VERSION,\n        redisGitSHA1(),\n        atoi(redisGitDirty()) > 0,\n        ZMALLOC_LIB,\n        sizeof(long) == 4 ? 32 : 64,\n        (unsigned long long) redisBuildId())",
          "new_text": null,
          "old_line_content": "    printf(\"Redis server v=%s sha=%s:%d malloc=%s bits=%d build=%llx\\n\",",
          "new_line_content": "void version(void) {",
          "content_same": false
        },
        {
          "line": 4711,
          "old_api": "redisGitSHA1",
          "new_api": null,
          "old_text": "redisGitSHA1()",
          "new_text": null,
          "old_line_content": "        redisGitSHA1(),",
          "new_line_content": "        REDIS_VERSION,",
          "content_same": false
        },
        {
          "line": 2666,
          "old_api": "anetTcpServer",
          "new_api": null,
          "old_text": "anetTcpServer(server.neterr,port,NULL,\n                    server.tcp_backlog)",
          "new_text": null,
          "old_line_content": "                fds[*count] = anetTcpServer(server.neterr,port,NULL,",
          "new_line_content": "                /* Bind the IPv4 address as well. */",
          "content_same": false
        },
        {
          "line": 4715,
          "old_api": "redisBuildId",
          "new_api": null,
          "old_text": "redisBuildId()",
          "new_text": null,
          "old_line_content": "        (unsigned long long) redisBuildId());",
          "new_line_content": "        sizeof(long) == 4 ? 32 : 64,",
          "content_same": false
        },
        {
          "line": 2669,
          "old_api": "anetNonBlock",
          "new_api": null,
          "old_text": "anetNonBlock(NULL,fds[*count])",
          "new_text": null,
          "old_line_content": "                    anetNonBlock(NULL,fds[*count]);",
          "new_line_content": "                if (fds[*count] != ANET_ERR) {",
          "content_same": false
        },
        {
          "line": 4720,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr,\"Usage: ./redis-server [/path/to/redis.conf] [options]\\n\")",
          "new_text": null,
          "old_line_content": "    fprintf(stderr,\"Usage: ./redis-server [/path/to/redis.conf] [options]\\n\");",
          "new_line_content": "void usage(void) {",
          "content_same": false
        },
        {
          "line": 2673,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\"Not listening to IPv4: unsupported\")",
          "new_text": null,
          "old_line_content": "                    serverLog(LL_WARNING,\"Not listening to IPv4: unsupported\");",
          "new_line_content": "                    unsupported++;",
          "content_same": false
        },
        {
          "line": 2680,
          "old_api": "strchr",
          "new_api": null,
          "old_text": "strchr(server.bindaddr[j],':')",
          "new_text": null,
          "old_line_content": "        } else if (strchr(server.bindaddr[j],':')) {",
          "new_line_content": "            if (*count + unsupported == 2) break;",
          "content_same": false
        },
        {
          "line": 2682,
          "old_api": "anetTcp6Server",
          "new_api": null,
          "old_text": "anetTcp6Server(server.neterr,port,server.bindaddr[j],\n                server.tcp_backlog)",
          "new_text": null,
          "old_line_content": "            fds[*count] = anetTcp6Server(server.neterr,port,server.bindaddr[j],",
          "new_line_content": "            /* Bind IPv6 address. */",
          "content_same": false
        },
        {
          "line": 2686,
          "old_api": "anetTcpServer",
          "new_api": null,
          "old_text": "anetTcpServer(server.neterr,port,server.bindaddr[j],\n                server.tcp_backlog)",
          "new_text": null,
          "old_line_content": "            fds[*count] = anetTcpServer(server.neterr,port,server.bindaddr[j],",
          "new_line_content": "            /* Bind IPv4 address. */",
          "content_same": false
        },
        {
          "line": 2690,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\n                \"Could not create server TCP listening socket %s:%d: %s\",\n                server.bindaddr[j] ? server.bindaddr[j] : \"*\",\n                port, server.neterr)",
          "new_text": null,
          "old_line_content": "            serverLog(LL_WARNING,",
          "new_line_content": "        if (fds[*count] == ANET_ERR) {",
          "content_same": false
        },
        {
          "line": 4738,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(1024*16)",
          "new_text": null,
          "old_line_content": "    char *buf = zmalloc(1024*16);",
          "new_line_content": "#include \"asciilogo.h\"",
          "content_same": false
        },
        {
          "line": 2700,
          "old_api": "anetNonBlock",
          "new_api": null,
          "old_text": "anetNonBlock(NULL,fds[*count])",
          "new_text": null,
          "old_line_content": "        anetNonBlock(NULL,fds[*count]);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4750,
          "old_api": "fileno",
          "new_api": null,
          "old_text": "fileno(stdout)",
          "new_text": null,
          "old_line_content": "                      isatty(fileno(stdout))) ||",
          "new_line_content": "                      server.logfile[0] == '\\0' &&",
          "content_same": false
        },
        {
          "line": 4754,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_NOTICE,\n            \"Running mode=%s, port=%d.\",\n            mode, server.port ? server.port : server.tls_port\n        )",
          "new_text": null,
          "old_line_content": "        serverLog(LL_NOTICE,",
          "new_line_content": "    if (!show_logo) {",
          "content_same": false
        },
        {
          "line": 4759,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(buf,1024*16,ascii_logo,\n            REDIS_VERSION,\n            redisGitSHA1(),\n            strtol(redisGitDirty(),NULL,10) > 0,\n            (sizeof(long) == 8) ? \"64\" : \"32\",\n            mode, server.port ? server.port : server.tls_port,\n            (long) getpid()\n        )",
          "new_text": null,
          "old_line_content": "        snprintf(buf,1024*16,ascii_logo,",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 4761,
          "old_api": "redisGitSHA1",
          "new_api": null,
          "old_text": "redisGitSHA1()",
          "new_text": null,
          "old_line_content": "            redisGitSHA1(),",
          "new_line_content": "            REDIS_VERSION,",
          "content_same": false
        },
        {
          "line": 4765,
          "old_api": "getpid",
          "new_api": null,
          "old_text": "getpid()",
          "new_text": null,
          "old_line_content": "            (long) getpid()",
          "new_line_content": "            mode, server.port ? server.port : server.tls_port,",
          "content_same": false
        },
        {
          "line": 4767,
          "old_api": "serverLogRaw",
          "new_api": null,
          "old_text": "serverLogRaw(LL_NOTICE|LL_RAW,buf)",
          "new_text": null,
          "old_line_content": "        serverLogRaw(LL_NOTICE|LL_RAW,buf);",
          "new_line_content": "        );",
          "content_same": false
        },
        {
          "line": 4769,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(buf)",
          "new_text": null,
          "old_line_content": "    zfree(buf);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2738,
          "old_api": "mstime",
          "new_api": null,
          "old_text": "mstime()",
          "new_text": null,
          "old_line_content": "        server.inst_metric[j].last_sample_time = mstime();",
          "new_line_content": "        server.inst_metric[j].idx = 0;",
          "content_same": false
        },
        {
          "line": 2740,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(server.inst_metric[j].samples,0,\n            sizeof(server.inst_metric[j].samples))",
          "new_text": null,
          "old_line_content": "        memset(server.inst_metric[j].samples,0,",
          "new_line_content": "        server.inst_metric[j].last_sample_count = 0;",
          "content_same": false
        },
        {
          "line": 4791,
          "old_api": "serverLogFromHandler",
          "new_api": null,
          "old_text": "serverLogFromHandler(LL_WARNING, \"You insist... exiting now.\")",
          "new_text": null,
          "old_line_content": "        serverLogFromHandler(LL_WARNING, \"You insist... exiting now.\");",
          "new_line_content": "    if (server.shutdown_asap && sig == SIGINT) {",
          "content_same": false
        },
        {
          "line": 4795,
          "old_api": "serverLogFromHandler",
          "new_api": null,
          "old_text": "serverLogFromHandler(LL_WARNING, \"Received shutdown signal during loading, exiting now.\")",
          "new_text": null,
          "old_line_content": "        serverLogFromHandler(LL_WARNING, \"Received shutdown signal during loading, exiting now.\");",
          "new_line_content": "    } else if (server.loading) {",
          "content_same": false
        },
        {
          "line": 4799,
          "old_api": "serverLogFromHandler",
          "new_api": null,
          "old_text": "serverLogFromHandler(LL_WARNING, msg)",
          "new_text": null,
          "old_line_content": "    serverLogFromHandler(LL_WARNING, msg);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2752,
          "old_api": "signal",
          "new_api": null,
          "old_text": "signal(SIGHUP, SIG_IGN)",
          "new_text": null,
          "old_line_content": "    signal(SIGHUP, SIG_IGN);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2757,
          "old_api": "openlog",
          "new_api": null,
          "old_text": "openlog(server.syslog_ident, LOG_PID | LOG_NDELAY | LOG_NOWAIT,\n            server.syslog_facility)",
          "new_text": null,
          "old_line_content": "        openlog(server.syslog_ident, LOG_PID | LOG_NDELAY | LOG_NOWAIT,",
          "new_line_content": "    if (server.syslog_enabled) {",
          "content_same": false
        },
        {
          "line": 4808,
          "old_api": "sigemptyset",
          "new_api": null,
          "old_text": "sigemptyset(&act.sa_mask)",
          "new_text": null,
          "old_line_content": "    sigemptyset(&act.sa_mask);",
          "new_line_content": "     * Otherwise, sa_handler is used. */",
          "content_same": false
        },
        {
          "line": 4811,
          "old_api": "sigaction",
          "new_api": null,
          "old_text": "sigaction(SIGTERM, &act, NULL)",
          "new_text": null,
          "old_line_content": "    sigaction(SIGTERM, &act, NULL);",
          "new_line_content": "    act.sa_handler = sigShutdownHandler;",
          "content_same": false
        },
        {
          "line": 2764,
          "old_api": "getpid",
          "new_api": null,
          "old_text": "getpid()",
          "new_text": null,
          "old_line_content": "    server.pid = getpid();",
          "new_line_content": "    server.hz = server.config_hz;",
          "content_same": false
        },
        {
          "line": 4814,
          "old_api": "sigemptyset",
          "new_api": null,
          "old_text": "sigemptyset(&act.sa_mask)",
          "new_text": null,
          "old_line_content": "    sigemptyset(&act.sa_mask);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2767,
          "old_api": "listCreate",
          "new_api": null,
          "old_text": "listCreate()",
          "new_text": null,
          "old_line_content": "    server.clients = listCreate();",
          "new_line_content": "    server.fixed_time_expire = 0;",
          "content_same": false
        },
        {
          "line": 4818,
          "old_api": "sigaction",
          "new_api": null,
          "old_text": "sigaction(SIGSEGV, &act, NULL)",
          "new_text": null,
          "old_line_content": "        sigaction(SIGSEGV, &act, NULL);",
          "new_line_content": "    if(server.crashlog_enabled) {",
          "content_same": false
        },
        {
          "line": 2776,
          "old_api": "listCreate",
          "new_api": null,
          "old_text": "listCreate()",
          "new_text": null,
          "old_line_content": "    server.unblocked_clients = listCreate();",
          "new_line_content": "    server.slaveseldb = -1; /* Force to emit the first SELECT command. */",
          "content_same": false
        },
        {
          "line": 4828,
          "old_api": "sigemptyset",
          "new_api": null,
          "old_text": "sigemptyset(&act.sa_mask)",
          "new_text": null,
          "old_line_content": "    sigemptyset(&act.sa_mask);",
          "new_line_content": "    struct sigaction act;",
          "content_same": false
        },
        {
          "line": 2782,
          "old_api": "zmalloc_get_memory_size",
          "new_api": null,
          "old_text": "zmalloc_get_memory_size()",
          "new_text": null,
          "old_line_content": "    server.system_memory_size = zmalloc_get_memory_size();",
          "new_line_content": "    server.events_processed_while_blocked = 0;",
          "content_same": false
        },
        {
          "line": 4831,
          "old_api": "sigaction",
          "new_api": null,
          "old_text": "sigaction(SIGSEGV, &act, NULL)",
          "new_text": null,
          "old_line_content": "    sigaction(SIGSEGV, &act, NULL);",
          "new_line_content": "    act.sa_handler = SIG_DFL;",
          "content_same": false
        },
        {
          "line": 2785,
          "old_api": "tlsConfigure",
          "new_api": null,
          "old_text": "tlsConfigure(&server.tls_ctx_config)",
          "new_text": null,
          "old_line_content": "                && tlsConfigure(&server.tls_ctx_config) == C_ERR) {",
          "new_line_content": "    if ((server.tls_port || server.tls_replication || server.tls_cluster)",
          "content_same": false
        },
        {
          "line": 2790,
          "old_api": "createSharedObjects",
          "new_api": null,
          "old_text": "createSharedObjects()",
          "new_text": null,
          "old_line_content": "    createSharedObjects();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2794,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\n            \"Failed creating the event loop. Error message: '%s'\",\n            strerror(errno))",
          "new_text": null,
          "old_line_content": "        serverLog(LL_WARNING,",
          "new_line_content": "    if (server.el == NULL) {",
          "content_same": false
        },
        {
          "line": 4842,
          "old_api": "UNUSED",
          "new_api": null,
          "old_text": "UNUSED(sig)",
          "new_text": null,
          "old_line_content": "    UNUSED(sig);",
          "new_line_content": "static void sigKillChildHandler(int sig) {",
          "content_same": false
        },
        {
          "line": 2796,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "            strerror(errno));",
          "new_line_content": "            \"Failed creating the event loop. Error message: '%s'\",",
          "content_same": false
        },
        {
          "line": 2799,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(redisDb)*server.dbnum)",
          "new_text": null,
          "old_line_content": "    server.db = zmalloc(sizeof(redisDb)*server.dbnum);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2803,
          "old_api": "listenToPort",
          "new_api": null,
          "old_text": "listenToPort(server.port,server.ipfd,&server.ipfd_count)",
          "new_text": null,
          "old_line_content": "        listenToPort(server.port,server.ipfd,&server.ipfd_count) == C_ERR)",
          "new_line_content": "    if (server.port != 0 &&",
          "content_same": false
        },
        {
          "line": 4852,
          "old_api": "sigemptyset",
          "new_api": null,
          "old_text": "sigemptyset(&act.sa_mask)",
          "new_text": null,
          "old_line_content": "    sigemptyset(&act.sa_mask);",
          "new_line_content": "     * Otherwise, sa_handler is used. */",
          "content_same": false
        },
        {
          "line": 2806,
          "old_api": "listenToPort",
          "new_api": null,
          "old_text": "listenToPort(server.tls_port,server.tlsfd,&server.tlsfd_count)",
          "new_text": null,
          "old_line_content": "        listenToPort(server.tls_port,server.tlsfd,&server.tlsfd_count) == C_ERR)",
          "new_line_content": "    if (server.tls_port != 0 &&",
          "content_same": false
        },
        {
          "line": 4855,
          "old_api": "sigaction",
          "new_api": null,
          "old_text": "sigaction(SIGUSR1, &act, NULL)",
          "new_text": null,
          "old_line_content": "    sigaction(SIGUSR1, &act, NULL);",
          "new_line_content": "    act.sa_handler = sigKillChildHandler;",
          "content_same": false
        },
        {
          "line": 2811,
          "old_api": "unlink",
          "new_api": null,
          "old_text": "unlink(server.unixsocket)",
          "new_text": null,
          "old_line_content": "        unlink(server.unixsocket); /* don't care if this fails */",
          "new_line_content": "    if (server.unixsocket != NULL) {",
          "content_same": false
        },
        {
          "line": 4861,
          "old_api": "ustime",
          "new_api": null,
          "old_text": "ustime()",
          "new_text": null,
          "old_line_content": "    long long start = ustime();",
          "new_line_content": "    int childpid;",
          "content_same": false
        },
        {
          "line": 2815,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING, \"Opening Unix socket: %s\", server.neterr)",
          "new_text": null,
          "old_line_content": "            serverLog(LL_WARNING, \"Opening Unix socket: %s\", server.neterr);",
          "new_line_content": "        if (server.sofd == ANET_ERR) {",
          "content_same": false
        },
        {
          "line": 4864,
          "old_api": "closeListeningSockets",
          "new_api": null,
          "old_text": "closeListeningSockets(0)",
          "new_text": null,
          "old_line_content": "        closeListeningSockets(0);",
          "new_line_content": "        /* Child */",
          "content_same": false
        },
        {
          "line": 2818,
          "old_api": "anetNonBlock",
          "new_api": null,
          "old_text": "anetNonBlock(NULL,server.sofd)",
          "new_text": null,
          "old_line_content": "        anetNonBlock(NULL,server.sofd);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4868,
          "old_api": "ustime",
          "new_api": null,
          "old_text": "ustime()",
          "new_text": null,
          "old_line_content": "        server.stat_fork_time = ustime()-start;",
          "new_line_content": "        /* Parent */",
          "content_same": false
        },
        {
          "line": 2823,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING, \"Configured to not listen anywhere, exiting.\")",
          "new_text": null,
          "old_line_content": "        serverLog(LL_WARNING, \"Configured to not listen anywhere, exiting.\");",
          "new_line_content": "    if (server.ipfd_count == 0 && server.tlsfd_count == 0 && server.sofd < 0) {",
          "content_same": false
        },
        {
          "line": 4874,
          "old_api": "updateDictResizePolicy",
          "new_api": null,
          "old_text": "updateDictResizePolicy()",
          "new_text": null,
          "old_line_content": "        updateDictResizePolicy();",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2829,
          "old_api": "dictCreate",
          "new_api": null,
          "old_text": "dictCreate(&dbDictType,NULL)",
          "new_text": null,
          "old_line_content": "        server.db[j].dict = dictCreate(&dbDictType,NULL);",
          "new_line_content": "    for (j = 0; j < server.dbnum; j++) {",
          "content_same": false
        },
        {
          "line": 2832,
          "old_api": "dictCreate",
          "new_api": null,
          "old_text": "dictCreate(&keylistDictType,NULL)",
          "new_text": null,
          "old_line_content": "        server.db[j].blocking_keys = dictCreate(&keylistDictType,NULL);",
          "new_line_content": "        server.db[j].expires_cursor = 0;",
          "content_same": false
        },
        {
          "line": 4880,
          "old_api": "zmalloc_get_private_dirty",
          "new_api": null,
          "old_text": "zmalloc_get_private_dirty(-1)",
          "new_text": null,
          "old_line_content": "    size_t private_dirty = zmalloc_get_private_dirty(-1);",
          "new_line_content": "void sendChildCOWInfo(int ptype, char *pname) {",
          "content_same": false
        },
        {
          "line": 4883,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_NOTICE,\n            \"%s: %zu MB of memory used by copy-on-write\",\n            pname, private_dirty/(1024*1024))",
          "new_text": null,
          "old_line_content": "        serverLog(LL_NOTICE,",
          "new_line_content": "    if (private_dirty) {",
          "content_same": false
        },
        {
          "line": 2837,
          "old_api": "listCreate",
          "new_api": null,
          "old_text": "listCreate()",
          "new_text": null,
          "old_line_content": "        server.db[j].defrag_later = listCreate();",
          "new_line_content": "        server.db[j].avg_ttl = 0;",
          "content_same": false
        },
        {
          "line": 2840,
          "old_api": "evictionPoolAlloc",
          "new_api": null,
          "old_text": "evictionPoolAlloc()",
          "new_text": null,
          "old_line_content": "    evictionPoolAlloc(); /* Initialize the LRU keys pool. */",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4889,
          "old_api": "sendChildInfo",
          "new_api": null,
          "old_text": "sendChildInfo(ptype)",
          "new_text": null,
          "old_line_content": "    sendChildInfo(ptype);",
          "new_line_content": "    server.child_info_data.cow_size = private_dirty;",
          "content_same": false
        },
        {
          "line": 4899,
          "old_api": "strstr",
          "new_api": null,
          "old_text": "strstr(argv[0],\"redis-sentinel\")",
          "new_text": null,
          "old_line_content": "    if (strstr(argv[0],\"redis-sentinel\") != NULL) return 1;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4901,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(argv[j],\"--sentinel\")",
          "new_text": null,
          "old_line_content": "        if (!strcmp(argv[j],\"--sentinel\")) return 1;",
          "new_line_content": "    for (j = 1; j < argc; j++)",
          "content_same": false
        },
        {
          "line": 4907,
          "old_api": "ustime",
          "new_api": null,
          "old_text": "ustime()",
          "new_text": null,
          "old_line_content": "    long long start = ustime();",
          "new_line_content": "void loadDataFromDisk(void) {",
          "content_same": false
        },
        {
          "line": 2860,
          "old_api": "aofRewriteBufferReset",
          "new_api": null,
          "old_text": "aofRewriteBufferReset()",
          "new_text": null,
          "old_line_content": "    aofRewriteBufferReset();",
          "new_line_content": "    server.child_info_data.magic = 0;",
          "content_same": false
        },
        {
          "line": 4909,
          "old_api": "loadAppendOnlyFile",
          "new_api": null,
          "old_text": "loadAppendOnlyFile(server.aof_filename)",
          "new_text": null,
          "old_line_content": "        if (loadAppendOnlyFile(server.aof_filename) == C_OK)",
          "new_line_content": "    if (server.aof_state == AOF_ON) {",
          "content_same": false
        },
        {
          "line": 4914,
          "old_api": "rdbLoad",
          "new_api": null,
          "old_text": "rdbLoad(server.rdb_filename,&rsi,RDBFLAGS_NONE)",
          "new_text": null,
          "old_line_content": "        if (rdbLoad(server.rdb_filename,&rsi,RDBFLAGS_NONE) == C_OK) {",
          "new_line_content": "        errno = 0; /* Prevent a stale value from affecting error checking */",
          "content_same": false
        },
        {
          "line": 2867,
          "old_api": "resetServerStats",
          "new_api": null,
          "old_text": "resetServerStats()",
          "new_text": null,
          "old_line_content": "    resetServerStats();",
          "new_line_content": "    server.dirty = 0;",
          "content_same": false
        },
        {
          "line": 2869,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "    server.stat_starttime = time(NULL);",
          "new_line_content": "    /* A few stats we don't want to reset: server startup time, and peak mem. */",
          "content_same": false
        },
        {
          "line": 4921,
          "old_api": "nodeIsSlave",
          "new_api": null,
          "old_text": "nodeIsSlave(server.cluster->myself)",
          "new_text": null,
          "old_line_content": "                nodeIsSlave(server.cluster->myself))) &&",
          "new_line_content": "                (server.cluster_enabled &&",
          "content_same": false
        },
        {
          "line": 4929,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(server.replid,rsi.repl_id,sizeof(server.replid))",
          "new_text": null,
          "old_line_content": "                memcpy(server.replid,rsi.repl_id,sizeof(server.replid));",
          "new_line_content": "            {",
          "content_same": false
        },
        {
          "line": 4934,
          "old_api": "replicationCacheMasterUsingMyself",
          "new_api": null,
          "old_text": "replicationCacheMasterUsingMyself()",
          "new_text": null,
          "old_line_content": "                replicationCacheMasterUsingMyself();",
          "new_line_content": "                 * with masters. */",
          "content_same": false
        },
        {
          "line": 2889,
          "old_api": "aeCreateTimeEvent",
          "new_api": null,
          "old_text": "aeCreateTimeEvent(server.el, 1, serverCron, NULL, NULL)",
          "new_text": null,
          "old_line_content": "    if (aeCreateTimeEvent(server.el, 1, serverCron, NULL, NULL) == AE_ERR) {",
          "new_line_content": "     * expired keys and so forth. */",
          "content_same": false
        },
        {
          "line": 4938,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "            serverLog(LL_WARNING,\"Fatal error loading the DB: %s. Exiting.\",strerror(errno));",
          "new_line_content": "        } else if (errno != ENOENT) {",
          "content_same": false
        },
        {
          "line": 2897,
          "old_api": "aeCreateFileEvent",
          "new_api": null,
          "old_text": "aeCreateFileEvent(server.el, server.ipfd[j], AE_READABLE,\n            acceptTcpHandler,NULL)",
          "new_text": null,
          "old_line_content": "        if (aeCreateFileEvent(server.el, server.ipfd[j], AE_READABLE,",
          "new_line_content": "    for (j = 0; j < server.ipfd_count; j++) {",
          "content_same": false
        },
        {
          "line": 4945,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\"Out Of Memory allocating %zu bytes!\",\n        allocation_size)",
          "new_text": null,
          "old_line_content": "    serverLog(LL_WARNING,\"Out Of Memory allocating %zu bytes!\",",
          "new_line_content": "void redisOutOfMemoryHandler(size_t allocation_size) {",
          "content_same": false
        },
        {
          "line": 4947,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Redis aborting for OUT OF MEMORY\")",
          "new_text": null,
          "old_line_content": "    serverPanic(\"Redis aborting for OUT OF MEMORY\");",
          "new_line_content": "        allocation_size);",
          "content_same": false
        },
        {
          "line": 2900,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\n                    \"Unrecoverable error creating server.ipfd file event.\")",
          "new_text": null,
          "old_line_content": "                serverPanic(",
          "new_line_content": "            {",
          "content_same": false
        },
        {
          "line": 2905,
          "old_api": "aeCreateFileEvent",
          "new_api": null,
          "old_text": "aeCreateFileEvent(server.el, server.tlsfd[j], AE_READABLE,\n            acceptTLSHandler,NULL)",
          "new_text": null,
          "old_line_content": "        if (aeCreateFileEvent(server.el, server.tlsfd[j], AE_READABLE,",
          "new_line_content": "    for (j = 0; j < server.tlsfd_count; j++) {",
          "content_same": false
        },
        {
          "line": 2908,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\n                    \"Unrecoverable error creating server.tlsfd file event.\")",
          "new_text": null,
          "old_line_content": "                serverPanic(",
          "new_line_content": "            {",
          "content_same": false
        },
        {
          "line": 4956,
          "old_api": "setproctitle",
          "new_api": null,
          "old_text": "setproctitle(\"%s %s:%d%s\",\n        title,\n        server.bindaddr_count ? server.bindaddr[0] : \"*\",\n        server.port ? server.port : server.tls_port,\n        server_mode)",
          "new_text": null,
          "old_line_content": "    setproctitle(\"%s %s:%d%s\",",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2912,
          "old_api": "aeCreateFileEvent",
          "new_api": null,
          "old_text": "aeCreateFileEvent(server.el,server.sofd,AE_READABLE,\n        acceptUnixHandler,NULL)",
          "new_text": null,
          "old_line_content": "    if (server.sofd > 0 && aeCreateFileEvent(server.el,server.sofd,AE_READABLE,",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4962,
          "old_api": "UNUSED",
          "new_api": null,
          "old_text": "UNUSED(title)",
          "new_text": null,
          "old_line_content": "    UNUSED(title);",
          "new_line_content": "#else",
          "content_same": false
        },
        {
          "line": 2918,
          "old_api": "aeCreateFileEvent",
          "new_api": null,
          "old_text": "aeCreateFileEvent(server.el, server.module_blocked_pipe[0], AE_READABLE,\n        moduleBlockedClientPipeReadable,NULL)",
          "new_text": null,
          "old_line_content": "    if (aeCreateFileEvent(server.el, server.module_blocked_pipe[0], AE_READABLE,",
          "new_line_content": "     * when a blocked client in a module needs attention. */",
          "content_same": false
        },
        {
          "line": 2920,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\n                \"Error registering the readable event for the module \"\n                \"blocked clients subsystem.\")",
          "new_text": null,
          "old_line_content": "            serverPanic(",
          "new_line_content": "        moduleBlockedClientPipeReadable,NULL) == AE_ERR) {",
          "content_same": false
        },
        {
          "line": 4968,
          "old_api": "setcpuaffinity",
          "new_api": null,
          "old_text": "setcpuaffinity(cpulist)",
          "new_text": null,
          "old_line_content": "    setcpuaffinity(cpulist);",
          "new_line_content": "#ifdef USE_SETCPUAFFINITY",
          "content_same": false
        },
        {
          "line": 4970,
          "old_api": "UNUSED",
          "new_api": null,
          "old_text": "UNUSED(cpulist)",
          "new_text": null,
          "old_line_content": "    UNUSED(cpulist);",
          "new_line_content": "#else",
          "content_same": false
        },
        {
          "line": 2927,
          "old_api": "aeSetBeforeSleepProc",
          "new_api": null,
          "old_text": "aeSetBeforeSleepProc(server.el,beforeSleep)",
          "new_text": null,
          "old_line_content": "    aeSetBeforeSleepProc(server.el,beforeSleep);",
          "new_line_content": "     * before loading persistence since it is used by processEventsWhileBlocked. */",
          "content_same": false
        },
        {
          "line": 4979,
          "old_api": "getenv",
          "new_api": null,
          "old_text": "getenv(\"UPSTART_JOB\")",
          "new_text": null,
          "old_line_content": "    const char *upstart_job = getenv(\"UPSTART_JOB\");",
          "new_line_content": "int redisSupervisedUpstart(void) {",
          "content_same": false
        },
        {
          "line": 2932,
          "old_api": "open",
          "new_api": null,
          "old_text": "open(server.aof_filename,\n                               O_WRONLY|O_APPEND|O_CREAT,0644)",
          "new_text": null,
          "old_line_content": "        server.aof_fd = open(server.aof_filename,",
          "new_line_content": "    if (server.aof_state == AOF_ON) {",
          "content_same": false
        },
        {
          "line": 4982,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\n                \"upstart supervision requested, but UPSTART_JOB not found\")",
          "new_text": null,
          "old_line_content": "        serverLog(LL_WARNING,",
          "new_line_content": "    if (!upstart_job) {",
          "content_same": false
        },
        {
          "line": 2935,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING, \"Can't open the append-only file: %s\",\n                strerror(errno))",
          "new_text": null,
          "old_line_content": "            serverLog(LL_WARNING, \"Can't open the append-only file: %s\",",
          "new_line_content": "        if (server.aof_fd == -1) {",
          "content_same": false
        },
        {
          "line": 4987,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_NOTICE, \"supervised by upstart, will stop to signal readiness\")",
          "new_text": null,
          "old_line_content": "    serverLog(LL_NOTICE, \"supervised by upstart, will stop to signal readiness\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2946,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\"Warning: 32 bit instance detected but no memory limit set. Setting 3 GB maxmemory limit with 'noeviction' policy now.\")",
          "new_text": null,
          "old_line_content": "        serverLog(LL_WARNING,\"Warning: 32 bit instance detected but no memory limit set. Setting 3 GB maxmemory limit with 'noeviction' policy now.\");",
          "new_line_content": "    if (server.arch_bits == 32 && server.maxmemory == 0) {",
          "content_same": false
        },
        {
          "line": 4994,
          "old_api": "getenv",
          "new_api": null,
          "old_text": "getenv(\"NOTIFY_SOCKET\")",
          "new_text": null,
          "old_line_content": "    const char *notify_socket = getenv(\"NOTIFY_SOCKET\");",
          "new_line_content": "int redisCommunicateSystemd(const char *sd_notify_msg) {",
          "content_same": false
        },
        {
          "line": 4996,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\n                \"systemd supervision requested, but NOTIFY_SOCKET not found\")",
          "new_text": null,
          "old_line_content": "        serverLog(LL_WARNING,",
          "new_line_content": "    if (!notify_socket) {",
          "content_same": false
        },
        {
          "line": 2951,
          "old_api": "clusterInit",
          "new_api": null,
          "old_text": "clusterInit()",
          "new_text": null,
          "old_line_content": "    if (server.cluster_enabled) clusterInit();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5001,
          "old_api": "sd_notify",
          "new_api": null,
          "old_text": "sd_notify(0, sd_notify_msg)",
          "new_text": null,
          "old_line_content": "    (void) sd_notify(0, sd_notify_msg);",
          "new_line_content": "    #ifdef HAVE_LIBSYSTEMD",
          "content_same": false
        },
        {
          "line": 5003,
          "old_api": "UNUSED",
          "new_api": null,
          "old_text": "UNUSED(sd_notify_msg)",
          "new_text": null,
          "old_line_content": "    UNUSED(sd_notify_msg);",
          "new_line_content": "    #else",
          "content_same": false
        },
        {
          "line": 5010,
          "old_api": "getenv",
          "new_api": null,
          "old_text": "getenv(\"UPSTART_JOB\")",
          "new_text": null,
          "old_line_content": "        const char *upstart_job = getenv(\"UPSTART_JOB\");",
          "new_line_content": "    if (mode == SUPERVISED_AUTODETECT) {",
          "content_same": false
        },
        {
          "line": 2964,
          "old_api": "bioInit",
          "new_api": null,
          "old_text": "bioInit()",
          "new_text": null,
          "old_line_content": "    bioInit();",
          "new_line_content": "void InitServerLast() {",
          "content_same": false
        },
        {
          "line": 5014,
          "old_api": "redisSupervisedUpstart",
          "new_api": null,
          "old_text": "redisSupervisedUpstart()",
          "new_text": null,
          "old_line_content": "            redisSupervisedUpstart();",
          "new_line_content": "        if (upstart_job) {",
          "content_same": false
        },
        {
          "line": 5017,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\n                \"WARNING auto-supervised by systemd - you MUST set appropriate values for TimeoutStartSec and TimeoutStopSec in your service unit.\")",
          "new_text": null,
          "old_line_content": "            serverLog(LL_WARNING,",
          "new_line_content": "            server.supervised_mode = SUPERVISED_SYSTEMD;",
          "content_same": false
        },
        {
          "line": 5019,
          "old_api": "redisCommunicateSystemd",
          "new_api": null,
          "old_text": "redisCommunicateSystemd(\"STATUS=Redis is loading...\\n\")",
          "new_text": null,
          "old_line_content": "            return redisCommunicateSystemd(\"STATUS=Redis is loading...\\n\");",
          "new_line_content": "                \"WARNING auto-supervised by systemd - you MUST set appropriate values for TimeoutStartSec and TimeoutStopSec in your service unit.\");",
          "content_same": false
        },
        {
          "line": 5022,
          "old_api": "redisSupervisedUpstart",
          "new_api": null,
          "old_text": "redisSupervisedUpstart()",
          "new_text": null,
          "old_line_content": "        return redisSupervisedUpstart();",
          "new_line_content": "    } else if (mode == SUPERVISED_UPSTART) {",
          "content_same": false
        },
        {
          "line": 5024,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\n            \"WARNING supervised by systemd - you MUST set appropriate values for TimeoutStartSec and TimeoutStopSec in your service unit.\")",
          "new_text": null,
          "old_line_content": "        serverLog(LL_WARNING,",
          "new_line_content": "    } else if (mode == SUPERVISED_SYSTEMD) {",
          "content_same": false
        },
        {
          "line": 2978,
          "old_api": "sdssplitargs",
          "new_api": null,
          "old_text": "sdssplitargs(strflags,&argc)",
          "new_text": null,
          "old_line_content": "    argv = sdssplitargs(strflags,&argc);",
          "new_line_content": "    /* Split the line into arguments for processing. */",
          "content_same": false
        },
        {
          "line": 5026,
          "old_api": "redisCommunicateSystemd",
          "new_api": null,
          "old_text": "redisCommunicateSystemd(\"STATUS=Redis is loading...\\n\")",
          "new_text": null,
          "old_line_content": "        return redisCommunicateSystemd(\"STATUS=Redis is loading...\\n\");",
          "new_line_content": "            \"WARNING supervised by systemd - you MUST set appropriate values for TimeoutStartSec and TimeoutStopSec in your service unit.\");",
          "content_same": false
        },
        {
          "line": 2983,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(flag,\"write\")",
          "new_text": null,
          "old_line_content": "        if (!strcasecmp(flag,\"write\")) {",
          "new_line_content": "        char *flag = argv[j];",
          "content_same": false
        },
        {
          "line": 2985,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(flag,\"read-only\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcasecmp(flag,\"read-only\")) {",
          "new_line_content": "            c->flags |= CMD_WRITE|CMD_CATEGORY_WRITE;",
          "content_same": false
        },
        {
          "line": 5034,
          "old_api": "nodeIsMaster",
          "new_api": null,
          "old_text": "nodeIsMaster(server.cluster->myself)",
          "new_text": null,
          "old_line_content": "            (server.cluster_enabled && nodeIsMaster(server.cluster->myself)));",
          "new_line_content": "    return ((!server.cluster_enabled && server.masterhost == NULL) ||",
          "content_same": false
        },
        {
          "line": 2987,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(flag,\"use-memory\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcasecmp(flag,\"use-memory\")) {",
          "new_line_content": "            c->flags |= CMD_READONLY|CMD_CATEGORY_READ;",
          "content_same": false
        },
        {
          "line": 2989,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(flag,\"admin\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcasecmp(flag,\"admin\")) {",
          "new_line_content": "            c->flags |= CMD_DENYOOM;",
          "content_same": false
        },
        {
          "line": 2991,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(flag,\"pub-sub\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcasecmp(flag,\"pub-sub\")) {",
          "new_line_content": "            c->flags |= CMD_ADMIN|CMD_CATEGORY_ADMIN|CMD_CATEGORY_DANGEROUS;",
          "content_same": false
        },
        {
          "line": 2993,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(flag,\"no-script\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcasecmp(flag,\"no-script\")) {",
          "new_line_content": "            c->flags |= CMD_PUBSUB|CMD_CATEGORY_PUBSUB;",
          "content_same": false
        },
        {
          "line": 2995,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(flag,\"random\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcasecmp(flag,\"random\")) {",
          "new_line_content": "            c->flags |= CMD_NOSCRIPT;",
          "content_same": false
        },
        {
          "line": 5043,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(argv[1], \"test\")",
          "new_text": null,
          "old_line_content": "    if (argc == 3 && !strcasecmp(argv[1], \"test\")) {",
          "new_line_content": "#ifdef REDIS_TEST",
          "content_same": false
        },
        {
          "line": 2997,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(flag,\"to-sort\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcasecmp(flag,\"to-sort\")) {",
          "new_line_content": "            c->flags |= CMD_RANDOM;",
          "content_same": false
        },
        {
          "line": 2999,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(flag,\"ok-loading\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcasecmp(flag,\"ok-loading\")) {",
          "new_line_content": "            c->flags |= CMD_SORT_FOR_SCRIPT;",
          "content_same": false
        },
        {
          "line": 3001,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(flag,\"ok-stale\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcasecmp(flag,\"ok-stale\")) {",
          "new_line_content": "            c->flags |= CMD_LOADING;",
          "content_same": false
        },
        {
          "line": 3003,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(flag,\"no-monitor\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcasecmp(flag,\"no-monitor\")) {",
          "new_line_content": "            c->flags |= CMD_STALE;",
          "content_same": false
        },
        {
          "line": 3005,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(flag,\"no-slowlog\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcasecmp(flag,\"no-slowlog\")) {",
          "new_line_content": "            c->flags |= CMD_SKIP_MONITOR;",
          "content_same": false
        },
        {
          "line": 3007,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(flag,\"cluster-asking\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcasecmp(flag,\"cluster-asking\")) {",
          "new_line_content": "            c->flags |= CMD_SKIP_SLOWLOG;",
          "content_same": false
        },
        {
          "line": 3009,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(flag,\"fast\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcasecmp(flag,\"fast\")) {",
          "new_line_content": "            c->flags |= CMD_ASKING;",
          "content_same": false
        },
        {
          "line": 3011,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(flag,\"no-auth\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcasecmp(flag,\"no-auth\")) {",
          "new_line_content": "            c->flags |= CMD_FAST | CMD_CATEGORY_FAST;",
          "content_same": false
        },
        {
          "line": 3017,
          "old_api": "ACLGetCommandCategoryFlagByName",
          "new_api": null,
          "old_text": "ACLGetCommandCategoryFlagByName(flag+1)",
          "new_text": null,
          "old_line_content": "                (catflag = ACLGetCommandCategoryFlagByName(flag+1)) != 0)",
          "new_line_content": "            if (flag[0] == '@' &&",
          "content_same": false
        },
        {
          "line": 3021,
          "old_api": "sdsfreesplitres",
          "new_api": null,
          "old_text": "sdsfreesplitres(argv,argc)",
          "new_text": null,
          "old_line_content": "                sdsfreesplitres(argv,argc);",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 5070,
          "old_api": "spt_init",
          "new_api": null,
          "old_text": "spt_init(argc, argv)",
          "new_text": null,
          "old_line_content": "    spt_init(argc, argv);",
          "new_line_content": "#ifdef INIT_SETPROCTITLE_REPLACEMENT",
          "content_same": false
        },
        {
          "line": 5072,
          "old_api": "setlocale",
          "new_api": null,
          "old_text": "setlocale(LC_COLLATE,\"\")",
          "new_text": null,
          "old_line_content": "    setlocale(LC_COLLATE,\"\");",
          "new_line_content": "#endif",
          "content_same": false
        },
        {
          "line": 3029,
          "old_api": "sdsfreesplitres",
          "new_api": null,
          "old_text": "sdsfreesplitres(argv,argc)",
          "new_text": null,
          "old_line_content": "    sdsfreesplitres(argv,argc);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5080,
          "old_api": "getRandomBytes",
          "new_api": null,
          "old_text": "getRandomBytes(hashseed,sizeof(hashseed))",
          "new_text": null,
          "old_line_content": "    getRandomBytes(hashseed,sizeof(hashseed));",
          "new_line_content": "    uint8_t hashseed[16];",
          "content_same": false
        },
        {
          "line": 5086,
          "old_api": "moduleInitModulesSystem",
          "new_api": null,
          "old_text": "moduleInitModulesSystem()",
          "new_text": null,
          "old_line_content": "    moduleInitModulesSystem();",
          "new_line_content": "                  basic networking code and client creation depends on it. */",
          "content_same": false
        },
        {
          "line": 5091,
          "old_api": "getAbsolutePath",
          "new_api": null,
          "old_text": "getAbsolutePath(argv[0])",
          "new_text": null,
          "old_line_content": "    server.executable = getAbsolutePath(argv[0]);",
          "new_line_content": "     * to be able to restart the server later. */",
          "content_same": false
        },
        {
          "line": 3045,
          "old_api": "populateCommandTableParseFlags",
          "new_api": null,
          "old_text": "populateCommandTableParseFlags(c,c->sflags)",
          "new_text": null,
          "old_line_content": "        if (populateCommandTableParseFlags(c,c->sflags) == C_ERR)",
          "new_line_content": "         * set of flags. */",
          "content_same": false
        },
        {
          "line": 5094,
          "old_api": "zstrdup",
          "new_api": null,
          "old_text": "zstrdup(argv[j])",
          "new_text": null,
          "old_line_content": "    for (j = 0; j < argc; j++) server.exec_argv[j] = zstrdup(argv[j]);",
          "new_line_content": "    server.exec_argv[argc] = NULL;",
          "content_same": false
        },
        {
          "line": 3048,
          "old_api": "ACLGetCommandID",
          "new_api": null,
          "old_text": "ACLGetCommandID(c->name)",
          "new_text": null,
          "old_line_content": "        c->id = ACLGetCommandID(c->name); /* Assign the ID used for ACL. */",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3052,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(c->name)",
          "new_text": null,
          "old_line_content": "        retval2 = dictAdd(server.orig_commands, sdsnew(c->name), c);",
          "new_line_content": "         * by rename-command statements in redis.conf. */",
          "content_same": false
        },
        {
          "line": 5100,
          "old_api": "initSentinelConfig",
          "new_api": null,
          "old_text": "initSentinelConfig()",
          "new_text": null,
          "old_line_content": "        initSentinelConfig();",
          "new_line_content": "    if (server.sentinel_mode) {",
          "content_same": false
        },
        {
          "line": 5107,
          "old_api": "strstr",
          "new_api": null,
          "old_text": "strstr(argv[0],\"redis-check-rdb\")",
          "new_text": null,
          "old_line_content": "    if (strstr(argv[0],\"redis-check-rdb\") != NULL)",
          "new_line_content": "     * so that we can easily execute an RDB check on loading errors. */",
          "content_same": false
        },
        {
          "line": 3062,
          "old_api": "dictGetSafeIterator",
          "new_api": null,
          "old_text": "dictGetSafeIterator(server.commands)",
          "new_text": null,
          "old_line_content": "    di = dictGetSafeIterator(server.commands);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5114,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "        sds options = sdsempty();",
          "new_line_content": "        j = 1; /* First option to parse in argv[] */",
          "content_same": false
        },
        {
          "line": 3068,
          "old_api": "dictReleaseIterator",
          "new_api": null,
          "old_text": "dictReleaseIterator(di)",
          "new_text": null,
          "old_line_content": "    dictReleaseIterator(di);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5118,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(argv[1], \"-v\")",
          "new_text": null,
          "old_line_content": "        if (strcmp(argv[1], \"-v\") == 0 ||",
          "new_line_content": "        /* Handle special options --help and --version */",
          "content_same": false
        },
        {
          "line": 5124,
          "old_api": "atoi",
          "new_api": null,
          "old_text": "atoi(argv[2])",
          "new_text": null,
          "old_line_content": "                memtest(atoi(argv[2]),50);",
          "new_line_content": "            if (argc == 3) {",
          "content_same": false
        },
        {
          "line": 5127,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr,\"Please specify the amount of memory to test in megabytes.\\n\")",
          "new_text": null,
          "old_line_content": "                fprintf(stderr,\"Please specify the amount of memory to test in megabytes.\\n\");",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 3084,
          "old_api": "zrealloc",
          "new_api": null,
          "old_text": "zrealloc(oa->ops,sizeof(redisOp)*(oa->numops+1))",
          "new_text": null,
          "old_line_content": "    oa->ops = zrealloc(oa->ops,sizeof(redisOp)*(oa->numops+1));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5136,
          "old_api": "getAbsolutePath",
          "new_api": null,
          "old_text": "getAbsolutePath(configfile)",
          "new_text": null,
          "old_line_content": "            server.configfile = getAbsolutePath(configfile);",
          "new_line_content": "            configfile = argv[j];",
          "content_same": false
        },
        {
          "line": 5139,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(server.exec_argv[j])",
          "new_text": null,
          "old_line_content": "            zfree(server.exec_argv[j]);",
          "new_line_content": "             * its absolute path. */",
          "content_same": false
        },
        {
          "line": 3103,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(op->argv[j])",
          "new_text": null,
          "old_line_content": "            decrRefCount(op->argv[j]);",
          "new_line_content": "        for (j = 0; j < op->argc; j++)",
          "content_same": false
        },
        {
          "line": 5151,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(argv[j], \"--check-rdb\")",
          "new_text": null,
          "old_line_content": "                if (!strcmp(argv[j], \"--check-rdb\")) {",
          "new_line_content": "                /* Option name */",
          "content_same": false
        },
        {
          "line": 3106,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(oa->ops)",
          "new_text": null,
          "old_line_content": "    zfree(oa->ops);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5156,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(options,\"\\n\")",
          "new_text": null,
          "old_line_content": "                if (sdslen(options)) options = sdscat(options,\"\\n\");",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 3112,
          "old_api": "dictFetchValue",
          "new_api": null,
          "old_text": "dictFetchValue(server.commands, name)",
          "new_text": null,
          "old_line_content": "    return dictFetchValue(server.commands, name);",
          "new_line_content": "struct redisCommand *lookupCommand(sds name) {",
          "content_same": false
        },
        {
          "line": 5161,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(argv[j])",
          "new_text": null,
          "old_line_content": "                options = sdscatrepr(options,argv[j],strlen(argv[j]));",
          "new_line_content": "                /* Option argument */",
          "content_same": false
        },
        {
          "line": 3117,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(s)",
          "new_text": null,
          "old_line_content": "    sds name = sdsnew(s);",
          "new_line_content": "    struct redisCommand *cmd;",
          "content_same": false
        },
        {
          "line": 3119,
          "old_api": "dictFetchValue",
          "new_api": null,
          "old_text": "dictFetchValue(server.commands, name)",
          "new_text": null,
          "old_line_content": "    cmd = dictFetchValue(server.commands, name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5167,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\n                \"Sentinel config from STDIN not allowed.\")",
          "new_text": null,
          "old_line_content": "            serverLog(LL_WARNING,",
          "new_line_content": "        if (server.sentinel_mode && configfile && *configfile == '-') {",
          "content_same": false
        },
        {
          "line": 5169,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\n                \"Sentinel needs config file on disk to save state.  Exiting...\")",
          "new_text": null,
          "old_line_content": "            serverLog(LL_WARNING,",
          "new_line_content": "                \"Sentinel config from STDIN not allowed.\");",
          "content_same": false
        },
        {
          "line": 5171,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "            exit(1);",
          "new_line_content": "                \"Sentinel needs config file on disk to save state.  Exiting...\");",
          "content_same": false
        },
        {
          "line": 5173,
          "old_api": "loadServerConfig",
          "new_api": null,
          "old_text": "loadServerConfig(configfile,options)",
          "new_text": null,
          "old_line_content": "        loadServerConfig(configfile,options);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 5177,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING, \"oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo\")",
          "new_text": null,
          "old_line_content": "    serverLog(LL_WARNING, \"oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3132,
          "old_api": "dictFetchValue",
          "new_api": null,
          "old_text": "dictFetchValue(server.commands, name)",
          "new_text": null,
          "old_line_content": "    struct redisCommand *cmd = dictFetchValue(server.commands, name);",
          "new_line_content": "struct redisCommand *lookupCommandOrOriginal(sds name) {",
          "content_same": false
        },
        {
          "line": 3134,
          "old_api": "dictFetchValue",
          "new_api": null,
          "old_text": "dictFetchValue(server.orig_commands,name)",
          "new_text": null,
          "old_line_content": "    if (!cmd) cmd = dictFetchValue(server.orig_commands,name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5182,
          "old_api": "redisGitSHA1",
          "new_api": null,
          "old_text": "redisGitSHA1()",
          "new_text": null,
          "old_line_content": "            redisGitSHA1(),",
          "new_line_content": "            (sizeof(long) == 8) ? 64 : 32,",
          "content_same": false
        },
        {
          "line": 5187,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING, \"Warning: no config file specified, using the default config. In order to specify a config file use %s /path/to/%s.conf\", argv[0], server.sentinel_mode ? \"sentinel\" : \"redis\")",
          "new_text": null,
          "old_line_content": "        serverLog(LL_WARNING, \"Warning: no config file specified, using the default config. In order to specify a config file use %s /path/to/%s.conf\", argv[0], server.sentinel_mode ? \"sentinel\" : \"redis\");",
          "new_line_content": "    if (argc == 1) {",
          "content_same": false
        },
        {
          "line": 5189,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING, \"Configuration loaded\")",
          "new_text": null,
          "old_line_content": "        serverLog(LL_WARNING, \"Configuration loaded\");",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 5192,
          "old_api": "redisIsSupervised",
          "new_api": null,
          "old_text": "redisIsSupervised(server.supervised_mode)",
          "new_text": null,
          "old_line_content": "    server.supervised = redisIsSupervised(server.supervised_mode);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5194,
          "old_api": "daemonize",
          "new_api": null,
          "old_text": "daemonize()",
          "new_text": null,
          "old_line_content": "    if (background) daemonize();",
          "new_line_content": "    int background = server.daemonize && !server.supervised;",
          "content_same": false
        },
        {
          "line": 5196,
          "old_api": "initServer",
          "new_api": null,
          "old_text": "initServer()",
          "new_text": null,
          "old_line_content": "    initServer();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5204,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\"Server initialized\")",
          "new_text": null,
          "old_line_content": "        serverLog(LL_WARNING,\"Server initialized\");",
          "new_line_content": "        /* Things not needed when running in Sentinel mode. */",
          "content_same": false
        },
        {
          "line": 3158,
          "old_api": "feedAppendOnlyFile",
          "new_api": null,
          "old_text": "feedAppendOnlyFile(cmd,dbid,argv,argc)",
          "new_text": null,
          "old_line_content": "        feedAppendOnlyFile(cmd,dbid,argv,argc);",
          "new_line_content": "    if (server.aof_state != AOF_OFF && flags & PROPAGATE_AOF)",
          "content_same": false
        },
        {
          "line": 5206,
          "old_api": "linuxMemoryWarnings",
          "new_api": null,
          "old_text": "linuxMemoryWarnings()",
          "new_text": null,
          "old_line_content": "        linuxMemoryWarnings();",
          "new_line_content": "    #ifdef __linux__",
          "content_same": false
        },
        {
          "line": 3160,
          "old_api": "replicationFeedSlaves",
          "new_api": null,
          "old_text": "replicationFeedSlaves(server.slaves,dbid,argv,argc)",
          "new_text": null,
          "old_line_content": "        replicationFeedSlaves(server.slaves,dbid,argv,argc);",
          "new_line_content": "    if (flags & PROPAGATE_REPL)",
          "content_same": false
        },
        {
          "line": 5208,
          "old_api": "moduleInitModulesSystemLast",
          "new_api": null,
          "old_text": "moduleInitModulesSystemLast()",
          "new_text": null,
          "old_line_content": "        moduleInitModulesSystemLast();",
          "new_line_content": "    #endif",
          "content_same": false
        },
        {
          "line": 5214,
          "old_api": "verifyClusterConfigWithData",
          "new_api": null,
          "old_text": "verifyClusterConfigWithData()",
          "new_text": null,
          "old_line_content": "            if (verifyClusterConfigWithData() == C_ERR) {",
          "new_line_content": "        if (server.cluster_enabled) {",
          "content_same": false
        },
        {
          "line": 5218,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "                exit(1);",
          "new_line_content": "                    \"Cluster mode. Exiting.\");",
          "content_same": false
        },
        {
          "line": 5222,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_NOTICE,\"Ready to accept connections\")",
          "new_text": null,
          "old_line_content": "            serverLog(LL_NOTICE,\"Ready to accept connections\");",
          "new_line_content": "        if (server.ipfd_count > 0 || server.tlsfd_count > 0)",
          "content_same": false
        },
        {
          "line": 5224,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_NOTICE,\"The server is now ready to accept connections at %s\", server.unixsocket)",
          "new_text": null,
          "old_line_content": "            serverLog(LL_NOTICE,\"The server is now ready to accept connections at %s\", server.unixsocket);",
          "new_line_content": "        if (server.sofd > 0)",
          "content_same": false
        },
        {
          "line": 5227,
          "old_api": "redisCommunicateSystemd",
          "new_api": null,
          "old_text": "redisCommunicateSystemd(\"STATUS=Ready to accept connections\\n\")",
          "new_text": null,
          "old_line_content": "                redisCommunicateSystemd(\"STATUS=Ready to accept connections\\n\");",
          "new_line_content": "            if (!server.masterhost) {",
          "content_same": false
        },
        {
          "line": 5230,
          "old_api": "redisCommunicateSystemd",
          "new_api": null,
          "old_text": "redisCommunicateSystemd(\"STATUS=Waiting for MASTER <-> REPLICA sync\\n\")",
          "new_text": null,
          "old_line_content": "                redisCommunicateSystemd(\"STATUS=Waiting for MASTER <-> REPLICA sync\\n\");",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 3183,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(robj*)*argc)",
          "new_text": null,
          "old_line_content": "    argvcopy = zmalloc(sizeof(robj*)*argc);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3186,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(argv[j])",
          "new_text": null,
          "old_line_content": "        incrRefCount(argv[j]);",
          "new_line_content": "        argvcopy[j] = argv[j];",
          "content_same": false
        },
        {
          "line": 5234,
          "old_api": "InitServerLast",
          "new_api": null,
          "old_text": "InitServerLast()",
          "new_text": null,
          "old_line_content": "        InitServerLast();",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 3188,
          "old_api": "redisOpArrayAppend",
          "new_api": null,
          "old_text": "redisOpArrayAppend(&server.also_propagate,cmd,dbid,argvcopy,argc,target)",
          "new_text": null,
          "old_line_content": "    redisOpArrayAppend(&server.also_propagate,cmd,dbid,argvcopy,argc,target);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5237,
          "old_api": "redisCommunicateSystemd",
          "new_api": null,
          "old_text": "redisCommunicateSystemd(\"STATUS=Ready to accept connections\\n\")",
          "new_text": null,
          "old_line_content": "            redisCommunicateSystemd(\"STATUS=Ready to accept connections\\n\");",
          "new_line_content": "        if (server.supervised_mode == SUPERVISED_SYSTEMD) {",
          "content_same": false
        },
        {
          "line": 5244,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\"WARNING: You specified a maxmemory value that is less than 1MB (current value is %llu bytes). Are you sure this is what you really want?\", server.maxmemory)",
          "new_text": null,
          "old_line_content": "        serverLog(LL_WARNING,\"WARNING: You specified a maxmemory value that is less than 1MB (current value is %llu bytes). Are you sure this is what you really want?\", server.maxmemory);",
          "new_line_content": "    if (server.maxmemory > 0 && server.maxmemory < 1024*1024) {",
          "content_same": false
        },
        {
          "line": 5247,
          "old_api": "redisSetCpuAffinity",
          "new_api": null,
          "old_text": "redisSetCpuAffinity(server.server_cpulist)",
          "new_text": null,
          "old_line_content": "    redisSetCpuAffinity(server.server_cpulist);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3263,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.monitors)",
          "new_text": null,
          "old_line_content": "    if (listLength(server.monitors) &&",
          "new_line_content": "     * Administrative commands are considered too dangerous to be shown. */",
          "content_same": false
        },
        {
          "line": 3267,
          "old_api": "replicationFeedMonitors",
          "new_api": null,
          "old_text": "replicationFeedMonitors(c,server.monitors,c->db->id,c->argv,c->argc)",
          "new_text": null,
          "old_line_content": "        replicationFeedMonitors(c,server.monitors,c->db->id,c->argv,c->argc);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 3274,
          "old_api": "redisOpArrayInit",
          "new_api": null,
          "old_text": "redisOpArrayInit(&server.also_propagate)",
          "new_text": null,
          "old_line_content": "    redisOpArrayInit(&server.also_propagate);",
          "new_line_content": "    redisOpArray prev_also_propagate = server.also_propagate;",
          "content_same": false
        },
        {
          "line": 3278,
          "old_api": "updateCachedTime",
          "new_api": null,
          "old_text": "updateCachedTime(0)",
          "new_text": null,
          "old_line_content": "    updateCachedTime(0);",
          "new_line_content": "    dirty = server.dirty;",
          "content_same": false
        },
        {
          "line": 3280,
          "old_api": "proc",
          "new_api": null,
          "old_text": "c->cmd->proc(c)",
          "new_text": null,
          "old_line_content": "    c->cmd->proc(c);",
          "new_line_content": "    start = server.ustime;",
          "content_same": false
        },
        {
          "line": 3305,
          "old_api": "latencyAddSampleIfNeeded",
          "new_api": null,
          "old_text": "latencyAddSampleIfNeeded(latency_event,duration/1000)",
          "new_text": null,
          "old_line_content": "        latencyAddSampleIfNeeded(latency_event,duration/1000);",
          "new_line_content": "                              \"fast-command\" : \"command\";",
          "content_same": false
        },
        {
          "line": 3346,
          "old_api": "propagate",
          "new_api": null,
          "old_text": "propagate(c->cmd,c->db->id,c->argv,c->argc,propagate_flags)",
          "new_text": null,
          "old_line_content": "            propagate(c->cmd,c->db->id,c->argv,c->argc,propagate_flags);",
          "new_line_content": "        if (propagate_flags != PROPAGATE_NONE && !(c->cmd->flags & CMD_MODULE))",
          "content_same": false
        },
        {
          "line": 3375,
          "old_api": "execCommandPropagateMulti",
          "new_api": null,
          "old_text": "execCommandPropagateMulti(c)",
          "new_text": null,
          "old_line_content": "                execCommandPropagateMulti(c);",
          "new_line_content": "            {",
          "content_same": false
        },
        {
          "line": 3386,
          "old_api": "propagate",
          "new_api": null,
          "old_text": "propagate(rop->cmd,rop->dbid,rop->argv,rop->argc,target)",
          "new_text": null,
          "old_line_content": "                    propagate(rop->cmd,rop->dbid,rop->argv,rop->argc,target);",
          "new_line_content": "                if (target)",
          "content_same": false
        },
        {
          "line": 3390,
          "old_api": "execCommandPropagateExec",
          "new_api": null,
          "old_text": "execCommandPropagateExec(c)",
          "new_text": null,
          "old_line_content": "                execCommandPropagateExec(c);",
          "new_line_content": "            if (multi_emitted) {",
          "content_same": false
        },
        {
          "line": 3393,
          "old_api": "redisOpArrayFree",
          "new_api": null,
          "old_text": "redisOpArrayFree(&server.also_propagate)",
          "new_text": null,
          "old_line_content": "        redisOpArrayFree(&server.also_propagate);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3405,
          "old_api": "trackingRememberKeys",
          "new_api": null,
          "old_text": "trackingRememberKeys(caller)",
          "new_text": null,
          "old_line_content": "            trackingRememberKeys(caller);",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 3418,
          "old_api": "flagTransaction",
          "new_api": null,
          "old_text": "flagTransaction(c)",
          "new_text": null,
          "old_line_content": "    flagTransaction(c);",
          "new_line_content": "void rejectCommand(client *c, robj *reply) {",
          "content_same": false
        },
        {
          "line": 3420,
          "old_api": "execCommandAbort",
          "new_api": null,
          "old_text": "execCommandAbort(c, reply->ptr)",
          "new_text": null,
          "old_line_content": "        execCommandAbort(c, reply->ptr);",
          "new_line_content": "    if (c->cmd && c->cmd->proc == execCommand) {",
          "content_same": false
        },
        {
          "line": 3423,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(reply->ptr)",
          "new_text": null,
          "old_line_content": "        addReplyErrorSafe(c, reply->ptr, sdslen(reply->ptr));",
          "new_line_content": "        /* using addReplyError* rather than addReply so that the error can be logged. */",
          "content_same": false
        },
        {
          "line": 3428,
          "old_api": "flagTransaction",
          "new_api": null,
          "old_text": "flagTransaction(c)",
          "new_text": null,
          "old_line_content": "    flagTransaction(c);",
          "new_line_content": "void rejectCommandFormat(client *c, const char *fmt, ...) {",
          "content_same": false
        },
        {
          "line": 3430,
          "old_api": "va_start",
          "new_api": null,
          "old_text": "va_start(ap,fmt)",
          "new_text": null,
          "old_line_content": "    va_start(ap,fmt);",
          "new_line_content": "    va_list ap;",
          "content_same": false
        },
        {
          "line": 3434,
          "old_api": "execCommandAbort",
          "new_api": null,
          "old_text": "execCommandAbort(c, s)",
          "new_text": null,
          "old_line_content": "        execCommandAbort(c, s);",
          "new_line_content": "    if (c->cmd && c->cmd->proc == execCommand) {",
          "content_same": false
        },
        {
          "line": 3436,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(s)",
          "new_text": null,
          "old_line_content": "        addReplyErrorSafe(c, s, sdslen(s));",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 3438,
          "old_api": "sdsfree",
          "new_api": null,
          "old_text": "sdsfree(s)",
          "new_text": null,
          "old_line_content": "    sdsfree(s);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3457,
          "old_api": "moduleCallCommandFilters",
          "new_api": null,
          "old_text": "moduleCallCommandFilters(c)",
          "new_text": null,
          "old_line_content": "    moduleCallCommandFilters(c);",
          "new_line_content": "int processCommand(client *c) {",
          "content_same": false
        },
        {
          "line": 3463,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[0]->ptr,\"quit\")",
          "new_text": null,
          "old_line_content": "    if (!strcasecmp(c->argv[0]->ptr,\"quit\")) {",
          "new_line_content": "     * a regular command proc. */",
          "content_same": false
        },
        {
          "line": 3471,
          "old_api": "lookupCommand",
          "new_api": null,
          "old_text": "lookupCommand(c->argv[0]->ptr)",
          "new_text": null,
          "old_line_content": "    c->cmd = c->lastcmd = lookupCommand(c->argv[0]->ptr);",
          "new_line_content": "     * such as wrong arity, bad command name and so forth. */",
          "content_same": false
        },
        {
          "line": 3473,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "        sds args = sdsempty();",
          "new_line_content": "    if (!c->cmd) {",
          "content_same": false
        },
        {
          "line": 3475,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(args)",
          "new_text": null,
          "old_line_content": "        for (i=1; i < c->argc && sdslen(args) < 128; i++)",
          "new_line_content": "        int i;",
          "content_same": false
        },
        {
          "line": 3479,
          "old_api": "sdsfree",
          "new_api": null,
          "old_text": "sdsfree(args)",
          "new_text": null,
          "old_line_content": "        sdsfree(args);",
          "new_line_content": "            (char*)c->argv[0]->ptr, args);",
          "content_same": false
        },
        {
          "line": 3483,
          "old_api": "rejectCommandFormat",
          "new_api": null,
          "old_text": "rejectCommandFormat(c,\"wrong number of arguments for '%s' command\",\n            c->cmd->name)",
          "new_text": null,
          "old_line_content": "        rejectCommandFormat(c,\"wrong number of arguments for '%s' command\",",
          "new_line_content": "               (c->argc < -c->cmd->arity)) {",
          "content_same": false
        },
        {
          "line": 3506,
          "old_api": "rejectCommand",
          "new_api": null,
          "old_text": "rejectCommand(c,shared.noautherr)",
          "new_text": null,
          "old_line_content": "            rejectCommand(c,shared.noautherr);",
          "new_line_content": "        if (!(c->cmd->flags & CMD_NO_AUTH)) {",
          "content_same": false
        },
        {
          "line": 3514,
          "old_api": "ACLCheckCommandPerm",
          "new_api": null,
          "old_text": "ACLCheckCommandPerm(c,&acl_keypos)",
          "new_text": null,
          "old_line_content": "    int acl_retval = ACLCheckCommandPerm(c,&acl_keypos);",
          "new_line_content": "    int acl_keypos;",
          "content_same": false
        },
        {
          "line": 3516,
          "old_api": "addACLLogEntry",
          "new_api": null,
          "old_text": "addACLLogEntry(c,acl_retval,acl_keypos,NULL)",
          "new_text": null,
          "old_line_content": "        addACLLogEntry(c,acl_retval,acl_keypos,NULL);",
          "new_line_content": "    if (acl_retval != ACL_OK) {",
          "content_same": false
        },
        {
          "line": 3518,
          "old_api": "rejectCommandFormat",
          "new_api": null,
          "old_text": "rejectCommandFormat(c,\n                \"-NOPERM this user has no permissions to run \"\n                \"the '%s' command or its subcommand\", c->cmd->name)",
          "new_text": null,
          "old_line_content": "            rejectCommandFormat(c,",
          "new_line_content": "        if (acl_retval == ACL_DENIED_CMD)",
          "content_same": false
        },
        {
          "line": 3522,
          "old_api": "rejectCommandFormat",
          "new_api": null,
          "old_text": "rejectCommandFormat(c,\n                \"-NOPERM this user has no permissions to access \"\n                \"one of the keys used as arguments\")",
          "new_text": null,
          "old_line_content": "            rejectCommandFormat(c,",
          "new_line_content": "        else",
          "content_same": false
        },
        {
          "line": 3536,
          "old_api": "cmdHasMovableKeys",
          "new_api": null,
          "old_text": "cmdHasMovableKeys(c->cmd)",
          "new_text": null,
          "old_line_content": "        !(!cmdHasMovableKeys(c->cmd) && c->cmd->firstkey == 0 &&",
          "new_line_content": "          server.lua_caller->flags & CLIENT_MASTER) &&",
          "content_same": false
        },
        {
          "line": 3541,
          "old_api": "getNodeByQuery",
          "new_api": null,
          "old_text": "getNodeByQuery(c,c->cmd,c->argv,c->argc,\n                                        &hashslot,&error_code)",
          "new_text": null,
          "old_line_content": "        clusterNode *n = getNodeByQuery(c,c->cmd,c->argv,c->argc,",
          "new_line_content": "        int error_code;",
          "content_same": false
        },
        {
          "line": 3545,
          "old_api": "discardTransaction",
          "new_api": null,
          "old_text": "discardTransaction(c)",
          "new_text": null,
          "old_line_content": "                discardTransaction(c);",
          "new_line_content": "            if (c->cmd->proc == execCommand) {",
          "content_same": false
        },
        {
          "line": 3547,
          "old_api": "flagTransaction",
          "new_api": null,
          "old_text": "flagTransaction(c)",
          "new_text": null,
          "old_line_content": "                flagTransaction(c);",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 3549,
          "old_api": "clusterRedirectClient",
          "new_api": null,
          "old_text": "clusterRedirectClient(c,n,hashslot,error_code)",
          "new_text": null,
          "old_line_content": "            clusterRedirectClient(c,n,hashslot,error_code);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1507,
          "old_api": "mstime",
          "new_api": null,
          "old_text": "mstime()",
          "new_text": null,
          "old_line_content": "    server.inst_metric[metric].last_sample_time = mstime();",
          "new_line_content": "    server.inst_metric[metric].idx %= STATS_METRIC_SAMPLES;",
          "content_same": false
        },
        {
          "line": 3561,
          "old_api": "freeMemoryIfNeededAndSafe",
          "new_api": null,
          "old_text": "freeMemoryIfNeededAndSafe()",
          "new_text": null,
          "old_line_content": "        int out_of_memory = freeMemoryIfNeededAndSafe() == C_ERR;",
          "new_line_content": "    if (server.maxmemory && !server.lua_timedout) {",
          "content_same": false
        },
        {
          "line": 1526,
          "old_api": "sdsAllocSize",
          "new_api": null,
          "old_text": "sdsAllocSize(c->querybuf)",
          "new_text": null,
          "old_line_content": "    size_t querybuf_size = sdsAllocSize(c->querybuf);",
          "new_line_content": "int clientsCronResizeQueryBuffer(client *c) {",
          "content_same": false
        },
        {
          "line": 3574,
          "old_api": "rejectCommand",
          "new_api": null,
          "old_text": "rejectCommand(c, shared.oomerr)",
          "new_text": null,
          "old_line_content": "            rejectCommand(c, shared.oomerr);",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 1538,
          "old_api": "sdsavail",
          "new_api": null,
          "old_text": "sdsavail(c->querybuf)",
          "new_text": null,
          "old_line_content": "        if (sdsavail(c->querybuf) > 1024*4) {",
          "new_line_content": "         * at least a few kbytes. */",
          "content_same": false
        },
        {
          "line": 3588,
          "old_api": "trackingLimitUsedSlots",
          "new_api": null,
          "old_text": "trackingLimitUsedSlots()",
          "new_text": null,
          "old_line_content": "    if (server.tracking_clients) trackingLimitUsedSlots();",
          "new_line_content": "     * caching metadata. */",
          "content_same": false
        },
        {
          "line": 3592,
          "old_api": "writeCommandsDeniedByDiskError",
          "new_api": null,
          "old_text": "writeCommandsDeniedByDiskError()",
          "new_text": null,
          "old_line_content": "    int deny_write_type = writeCommandsDeniedByDiskError();",
          "new_line_content": "     * and if this is a master instance. */",
          "content_same": false
        },
        {
          "line": 3598,
          "old_api": "rejectCommand",
          "new_api": null,
          "old_text": "rejectCommand(c, shared.bgsaveerr)",
          "new_text": null,
          "old_line_content": "            rejectCommand(c, shared.bgsaveerr);",
          "new_line_content": "        if (deny_write_type == DISK_ERROR_TYPE_RDB)",
          "content_same": false
        },
        {
          "line": 3600,
          "old_api": "rejectCommandFormat",
          "new_api": null,
          "old_text": "rejectCommandFormat(c,\n                \"-MISCONF Errors writing to the AOF file: %s\\r\\n\",\n                strerror(server.aof_last_write_errno))",
          "new_text": null,
          "old_line_content": "            rejectCommandFormat(c,",
          "new_line_content": "        else",
          "content_same": false
        },
        {
          "line": 3602,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(server.aof_last_write_errno)",
          "new_text": null,
          "old_line_content": "                strerror(server.aof_last_write_errno));",
          "new_line_content": "                \"-MISCONF Errors writing to the AOF file: %s\\r\\n\",",
          "content_same": false
        },
        {
          "line": 1555,
          "old_api": "sdsAllocSize",
          "new_api": null,
          "old_text": "sdsAllocSize(c->pending_querybuf)",
          "new_text": null,
          "old_line_content": "        size_t pending_querybuf_size = sdsAllocSize(c->pending_querybuf);",
          "new_line_content": "         * 2) Used length is smaller than pending_querybuf_size/2 */",
          "content_same": false
        },
        {
          "line": 1557,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(c->pending_querybuf)",
          "new_text": null,
          "old_line_content": "           sdslen(c->pending_querybuf) < (pending_querybuf_size/2))",
          "new_line_content": "        if(pending_querybuf_size > LIMIT_PENDING_QUERYBUF &&",
          "content_same": false
        },
        {
          "line": 1559,
          "old_api": "sdsRemoveFreeSpace",
          "new_api": null,
          "old_text": "sdsRemoveFreeSpace(c->pending_querybuf)",
          "new_text": null,
          "old_line_content": "            c->pending_querybuf = sdsRemoveFreeSpace(c->pending_querybuf);",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 3614,
          "old_api": "rejectCommand",
          "new_api": null,
          "old_text": "rejectCommand(c, shared.noreplicaserr)",
          "new_text": null,
          "old_line_content": "        rejectCommand(c, shared.noreplicaserr);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 3624,
          "old_api": "rejectCommand",
          "new_api": null,
          "old_text": "rejectCommand(c, shared.roslaveerr)",
          "new_text": null,
          "old_line_content": "        rejectCommand(c, shared.roslaveerr);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 1582,
          "old_api": "sdsAllocSize",
          "new_api": null,
          "old_text": "sdsAllocSize(c->querybuf)",
          "new_text": null,
          "old_line_content": "    size_t in_usage = sdsAllocSize(c->querybuf);",
          "new_line_content": "int clientsCronTrackExpansiveClients(client *c) {",
          "content_same": false
        },
        {
          "line": 3636,
          "old_api": "rejectCommandFormat",
          "new_api": null,
          "old_text": "rejectCommandFormat(c,\n            \"Can't execute '%s': only (P)SUBSCRIBE / \"\n            \"(P)UNSUBSCRIBE / PING / QUIT are allowed in this context\",\n            c->cmd->name)",
          "new_text": null,
          "old_line_content": "        rejectCommandFormat(c,",
          "new_line_content": "        c->cmd->proc != punsubscribeCommand) {",
          "content_same": false
        },
        {
          "line": 3650,
          "old_api": "rejectCommand",
          "new_api": null,
          "old_text": "rejectCommand(c, shared.masterdownerr)",
          "new_text": null,
          "old_line_content": "        rejectCommand(c, shared.masterdownerr);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 3657,
          "old_api": "rejectCommand",
          "new_api": null,
          "old_text": "rejectCommand(c, shared.loadingerr)",
          "new_text": null,
          "old_line_content": "        rejectCommand(c, shared.loadingerr);",
          "new_line_content": "    if (server.loading && is_denyloading_command) {",
          "content_same": false
        },
        {
          "line": 1615,
          "old_api": "getClientType",
          "new_api": null,
          "old_text": "getClientType(c)",
          "new_text": null,
          "old_line_content": "    int type = getClientType(c);",
          "new_line_content": "    size_t mem = 0;",
          "content_same": false
        },
        {
          "line": 3677,
          "old_api": "tolower",
          "new_api": null,
          "old_text": "tolower(((char*)c->argv[1]->ptr)[0])",
          "new_text": null,
          "old_line_content": "          tolower(((char*)c->argv[1]->ptr)[0]) == 'n') &&",
          "new_line_content": "          c->argc == 2 &&",
          "content_same": false
        },
        {
          "line": 3680,
          "old_api": "tolower",
          "new_api": null,
          "old_text": "tolower(((char*)c->argv[1]->ptr)[0])",
          "new_text": null,
          "old_line_content": "          tolower(((char*)c->argv[1]->ptr)[0]) == 'k'))",
          "new_line_content": "          c->argc == 2 &&",
          "content_same": false
        },
        {
          "line": 3682,
          "old_api": "rejectCommand",
          "new_api": null,
          "old_text": "rejectCommand(c, shared.slowscripterr)",
          "new_text": null,
          "old_line_content": "        rejectCommand(c, shared.slowscripterr);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 3691,
          "old_api": "queueMultiCommand",
          "new_api": null,
          "old_text": "queueMultiCommand(c)",
          "new_text": null,
          "old_line_content": "        queueMultiCommand(c);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 3694,
          "old_api": "call",
          "new_api": null,
          "old_text": "call(c,CMD_CALL_FULL)",
          "new_text": null,
          "old_line_content": "        call(c,CMD_CALL_FULL);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 3696,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.ready_keys)",
          "new_text": null,
          "old_line_content": "        if (listLength(server.ready_keys))",
          "new_line_content": "        c->woff = server.master_repl_offset;",
          "content_same": false
        },
        {
          "line": 3709,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(server.ipfd[j])",
          "new_text": null,
          "old_line_content": "    for (j = 0; j < server.ipfd_count; j++) close(server.ipfd[j]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1663,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.clients)",
          "new_text": null,
          "old_line_content": "    int numclients = listLength(server.clients);",
          "new_line_content": "     * process all the clients in 1 second. */",
          "content_same": false
        },
        {
          "line": 1665,
          "old_api": "mstime",
          "new_api": null,
          "old_text": "mstime()",
          "new_text": null,
          "old_line_content": "    mstime_t now = mstime();",
          "new_line_content": "    int iterations = numclients/server.hz;",
          "content_same": false
        },
        {
          "line": 3713,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(server.cfd[j])",
          "new_text": null,
          "old_line_content": "        for (j = 0; j < server.cfd_count; j++) close(server.cfd[j]);",
          "new_line_content": "    if (server.cluster_enabled)",
          "content_same": false
        },
        {
          "line": 3715,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_NOTICE,\"Removing the unix socket file.\")",
          "new_text": null,
          "old_line_content": "        serverLog(LL_NOTICE,\"Removing the unix socket file.\");",
          "new_line_content": "    if (unlink_unix_socket && server.unixsocket) {",
          "content_same": false
        },
        {
          "line": 1674,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.clients)",
          "new_text": null,
          "old_line_content": "    while(listLength(server.clients) && iterations--) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1681,
          "old_api": "listRotateTailToHead",
          "new_api": null,
          "old_text": "listRotateTailToHead(server.clients)",
          "new_text": null,
          "old_line_content": "        listRotateTailToHead(server.clients);",
          "new_line_content": "         * first element and we don't incur into O(N) computation. */",
          "content_same": false
        },
        {
          "line": 3733,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\"User requested shutdown...\")",
          "new_text": null,
          "old_line_content": "    serverLog(LL_WARNING,\"User requested shutdown...\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1687,
          "old_api": "clientsCronHandleTimeout",
          "new_api": null,
          "old_text": "clientsCronHandleTimeout(c,now)",
          "new_text": null,
          "old_line_content": "        if (clientsCronHandleTimeout(c,now)) continue;",
          "new_line_content": "         * terminated. */",
          "content_same": false
        },
        {
          "line": 3735,
          "old_api": "redisCommunicateSystemd",
          "new_api": null,
          "old_text": "redisCommunicateSystemd(\"STOPPING=1\\n\")",
          "new_text": null,
          "old_line_content": "        redisCommunicateSystemd(\"STOPPING=1\\n\");",
          "new_line_content": "    if (server.supervised_mode == SUPERVISED_SYSTEMD)",
          "content_same": false
        },
        {
          "line": 3738,
          "old_api": "ldbKillForkedSessions",
          "new_api": null,
          "old_text": "ldbKillForkedSessions()",
          "new_text": null,
          "old_line_content": "    ldbKillForkedSessions();",
          "new_line_content": "    /* Kill all the Lua debugger forked sessions. */",
          "content_same": false
        },
        {
          "line": 3744,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\"There is a child saving an .rdb. Killing it!\")",
          "new_text": null,
          "old_line_content": "        serverLog(LL_WARNING,\"There is a child saving an .rdb. Killing it!\");",
          "new_line_content": "    if (server.rdb_child_pid != -1) {",
          "content_same": false
        },
        {
          "line": 1701,
          "old_api": "iAmMaster",
          "new_api": null,
          "old_text": "iAmMaster()",
          "new_text": null,
          "old_line_content": "        if (iAmMaster()) {",
          "new_line_content": "    if (server.active_expire_enabled) {",
          "content_same": false
        },
        {
          "line": 3750,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\"There is a module fork child. Killing it!\")",
          "new_text": null,
          "old_line_content": "        serverLog(LL_WARNING,\"There is a module fork child. Killing it!\");",
          "new_line_content": "    if (server.module_child_pid != -1) {",
          "content_same": false
        },
        {
          "line": 1704,
          "old_api": "expireSlaveKeys",
          "new_api": null,
          "old_text": "expireSlaveKeys()",
          "new_text": null,
          "old_line_content": "            expireSlaveKeys();",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 1709,
          "old_api": "activeDefragCycle",
          "new_api": null,
          "old_text": "activeDefragCycle()",
          "new_text": null,
          "old_line_content": "    activeDefragCycle();",
          "new_line_content": "    /* Defrag keys gradually. */",
          "content_same": false
        },
        {
          "line": 3761,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING, \"Writing initial AOF, can't exit.\")",
          "new_text": null,
          "old_line_content": "                serverLog(LL_WARNING, \"Writing initial AOF, can't exit.\");",
          "new_line_content": "            if (server.aof_state == AOF_WAIT_REWRITE) {",
          "content_same": false
        },
        {
          "line": 1714,
          "old_api": "hasActiveChildProcess",
          "new_api": null,
          "old_text": "hasActiveChildProcess()",
          "new_text": null,
          "old_line_content": "    if (!hasActiveChildProcess()) {",
          "new_line_content": "     * as will cause a lot of copy-on-write of memory pages. */",
          "content_same": false
        },
        {
          "line": 3764,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\n                \"There is a child rewriting the AOF. Killing it!\")",
          "new_text": null,
          "old_line_content": "            serverLog(LL_WARNING,",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 3766,
          "old_api": "killAppendOnlyChild",
          "new_api": null,
          "old_text": "killAppendOnlyChild()",
          "new_text": null,
          "old_line_content": "            killAppendOnlyChild();",
          "new_line_content": "                \"There is a child rewriting the AOF. Killing it!\");",
          "content_same": false
        },
        {
          "line": 3769,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_NOTICE,\"Calling fsync() on the AOF file.\")",
          "new_text": null,
          "old_line_content": "        serverLog(LL_NOTICE,\"Calling fsync() on the AOF file.\");",
          "new_line_content": "        /* Append only file: flush buffers and fsync() the AOF at exit */",
          "content_same": false
        },
        {
          "line": 1728,
          "old_api": "tryResizeHashTables",
          "new_api": null,
          "old_text": "tryResizeHashTables(resize_db % server.dbnum)",
          "new_text": null,
          "old_line_content": "            tryResizeHashTables(resize_db % server.dbnum);",
          "new_line_content": "        for (j = 0; j < dbs_per_call; j++) {",
          "content_same": false
        },
        {
          "line": 3776,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_NOTICE,\"Saving the final RDB snapshot before exiting.\")",
          "new_text": null,
          "old_line_content": "        serverLog(LL_NOTICE,\"Saving the final RDB snapshot before exiting.\");",
          "new_line_content": "    if ((server.saveparamslen > 0 && !nosave) || save) {",
          "content_same": false
        },
        {
          "line": 3778,
          "old_api": "redisCommunicateSystemd",
          "new_api": null,
          "old_text": "redisCommunicateSystemd(\"STATUS=Saving the final RDB snapshot\\n\")",
          "new_text": null,
          "old_line_content": "            redisCommunicateSystemd(\"STATUS=Saving the final RDB snapshot\\n\");",
          "new_line_content": "        if (server.supervised_mode == SUPERVISED_SYSTEMD)",
          "content_same": false
        },
        {
          "line": 3781,
          "old_api": "rdbPopulateSaveInfo",
          "new_api": null,
          "old_text": "rdbPopulateSaveInfo(&rsi)",
          "new_text": null,
          "old_line_content": "        rsiptr = rdbPopulateSaveInfo(&rsi);",
          "new_line_content": "        rdbSaveInfo rsi, *rsiptr;",
          "content_same": false
        },
        {
          "line": 1735,
          "old_api": "incrementallyRehash",
          "new_api": null,
          "old_text": "incrementallyRehash(rehash_db)",
          "new_text": null,
          "old_line_content": "                int work_done = incrementallyRehash(rehash_db);",
          "new_line_content": "            for (j = 0; j < dbs_per_call; j++) {",
          "content_same": false
        },
        {
          "line": 3788,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\"Error trying to save the DB, can't exit.\")",
          "new_text": null,
          "old_line_content": "            serverLog(LL_WARNING,\"Error trying to save the DB, can't exit.\");",
          "new_line_content": "             * synchronization... */",
          "content_same": false
        },
        {
          "line": 3790,
          "old_api": "redisCommunicateSystemd",
          "new_api": null,
          "old_text": "redisCommunicateSystemd(\"STATUS=Error trying to save the DB, can't exit.\\n\")",
          "new_text": null,
          "old_line_content": "                redisCommunicateSystemd(\"STATUS=Error trying to save the DB, can't exit.\\n\");",
          "new_line_content": "            if (server.supervised_mode == SUPERVISED_SYSTEMD)",
          "content_same": false
        },
        {
          "line": 3796,
          "old_api": "moduleFireServerEvent",
          "new_api": null,
          "old_text": "moduleFireServerEvent(REDISMODULE_EVENT_SHUTDOWN,0,NULL)",
          "new_text": null,
          "old_line_content": "    moduleFireServerEvent(REDISMODULE_EVENT_SHUTDOWN,0,NULL);",
          "new_line_content": "    /* Fire the shutdown modules event. */",
          "content_same": false
        },
        {
          "line": 3800,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_NOTICE,\"Removing the pid file.\")",
          "new_text": null,
          "old_line_content": "        serverLog(LL_NOTICE,\"Removing the pid file.\");",
          "new_line_content": "    if (server.daemonize || server.pidfile) {",
          "content_same": false
        },
        {
          "line": 3806,
          "old_api": "flushSlavesOutputBuffers",
          "new_api": null,
          "old_text": "flushSlavesOutputBuffers()",
          "new_text": null,
          "old_line_content": "    flushSlavesOutputBuffers();",
          "new_line_content": "     * send them pending writes. */",
          "content_same": false
        },
        {
          "line": 1761,
          "old_api": "ustime",
          "new_api": null,
          "old_text": "ustime()",
          "new_text": null,
          "old_line_content": "    server.ustime = ustime();",
          "new_line_content": "void updateCachedTime(int update_daylight_info) {",
          "content_same": false
        },
        {
          "line": 3809,
          "old_api": "closeListeningSockets",
          "new_api": null,
          "old_text": "closeListeningSockets(1)",
          "new_text": null,
          "old_line_content": "    closeListeningSockets(1);",
          "new_line_content": "    /* Close the listening sockets. Apparently this allows faster restarts. */",
          "content_same": false
        },
        {
          "line": 1773,
          "old_api": "localtime_r",
          "new_api": null,
          "old_text": "localtime_r(&ut,&tm)",
          "new_text": null,
          "old_line_content": "        localtime_r(&ut,&tm);",
          "new_line_content": "        time_t ut = server.unixtime;",
          "content_same": false
        },
        {
          "line": 1790,
          "old_api": "wait3",
          "new_api": null,
          "old_text": "wait3(&statloc,WNOHANG,NULL)",
          "new_text": null,
          "old_line_content": "    if ((pid = wait3(&statloc,WNOHANG,NULL)) != 0) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1794,
          "old_api": "WTERMSIG",
          "new_api": null,
          "old_text": "WTERMSIG(statloc)",
          "new_text": null,
          "old_line_content": "        if (WIFSIGNALED(statloc)) bysignal = WTERMSIG(statloc);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3848,
          "old_api": "addReplyErrorFormat",
          "new_api": null,
          "old_text": "addReplyErrorFormat(c,\"wrong number of arguments for '%s' command\",\n            c->cmd->name)",
          "new_text": null,
          "old_line_content": "        addReplyErrorFormat(c,\"wrong number of arguments for '%s' command\",",
          "new_line_content": "    if (c->argc > 2) {",
          "content_same": false
        },
        {
          "line": 3854,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.mbulkhdr[2])",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.mbulkhdr[2]);",
          "new_line_content": "    if (c->flags & CLIENT_PUBSUB && c->resp == 2) {",
          "content_same": false
        },
        {
          "line": 1807,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\"wait3() returned an error: %s. \"\n                \"rdb_child_pid = %d, aof_child_pid = %d, module_child_pid = %d\",\n                strerror(errno),\n                (int) server.rdb_child_pid,\n                (int) server.aof_child_pid,\n                (int) server.module_child_pid)",
          "new_text": null,
          "old_line_content": "            serverLog(LL_WARNING,\"wait3() returned an error: %s. \"",
          "new_line_content": "        if (pid == -1) {",
          "content_same": false
        },
        {
          "line": 1809,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "                strerror(errno),",
          "new_line_content": "                \"rdb_child_pid = %d, aof_child_pid = %d, module_child_pid = %d\",",
          "content_same": false
        },
        {
          "line": 3857,
          "old_api": "addReplyBulkCBuffer",
          "new_api": null,
          "old_text": "addReplyBulkCBuffer(c,\"\",0)",
          "new_text": null,
          "old_line_content": "            addReplyBulkCBuffer(c,\"\",0);",
          "new_line_content": "        if (c->argc == 1)",
          "content_same": false
        },
        {
          "line": 3859,
          "old_api": "addReplyBulk",
          "new_api": null,
          "old_text": "addReplyBulk(c,c->argv[1])",
          "new_text": null,
          "old_line_content": "            addReplyBulk(c,c->argv[1]);",
          "new_line_content": "        else",
          "content_same": false
        },
        {
          "line": 1814,
          "old_api": "backgroundSaveDoneHandler",
          "new_api": null,
          "old_text": "backgroundSaveDoneHandler(exitcode,bysignal)",
          "new_text": null,
          "old_line_content": "            backgroundSaveDoneHandler(exitcode,bysignal);",
          "new_line_content": "        } else if (pid == server.rdb_child_pid) {",
          "content_same": false
        },
        {
          "line": 3862,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.pong)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.pong);",
          "new_line_content": "        if (c->argc == 1)",
          "content_same": false
        },
        {
          "line": 3864,
          "old_api": "addReplyBulk",
          "new_api": null,
          "old_text": "addReplyBulk(c,c->argv[1])",
          "new_text": null,
          "old_line_content": "            addReplyBulk(c,c->argv[1]);",
          "new_line_content": "        else",
          "content_same": false
        },
        {
          "line": 1817,
          "old_api": "backgroundRewriteDoneHandler",
          "new_api": null,
          "old_text": "backgroundRewriteDoneHandler(exitcode,bysignal)",
          "new_text": null,
          "old_line_content": "            backgroundRewriteDoneHandler(exitcode,bysignal);",
          "new_line_content": "        } else if (pid == server.aof_child_pid) {",
          "content_same": false
        },
        {
          "line": 1820,
          "old_api": "ModuleForkDoneHandler",
          "new_api": null,
          "old_text": "ModuleForkDoneHandler(exitcode,bysignal)",
          "new_text": null,
          "old_line_content": "            ModuleForkDoneHandler(exitcode,bysignal);",
          "new_line_content": "        } else if (pid == server.module_child_pid) {",
          "content_same": false
        },
        {
          "line": 3869,
          "old_api": "addReplyBulk",
          "new_api": null,
          "old_text": "addReplyBulk(c,c->argv[1])",
          "new_text": null,
          "old_line_content": "    addReplyBulk(c,c->argv[1]);",
          "new_line_content": "void echoCommand(client *c) {",
          "content_same": false
        },
        {
          "line": 1823,
          "old_api": "ldbRemoveChild",
          "new_api": null,
          "old_text": "ldbRemoveChild(pid)",
          "new_text": null,
          "old_line_content": "            if (!ldbRemoveChild(pid)) {",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 1829,
          "old_api": "updateDictResizePolicy",
          "new_api": null,
          "old_text": "updateDictResizePolicy()",
          "new_text": null,
          "old_line_content": "        updateDictResizePolicy();",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3877,
          "old_api": "gettimeofday",
          "new_api": null,
          "old_text": "gettimeofday(&tv,NULL)",
          "new_text": null,
          "old_line_content": "    gettimeofday(&tv,NULL);",
          "new_line_content": "     * don't check for errors. */",
          "content_same": false
        },
        {
          "line": 1833,
          "old_api": "replicationStartPendingFork",
          "new_api": null,
          "old_text": "replicationStartPendingFork()",
          "new_text": null,
          "old_line_content": "        replicationStartPendingFork();",
          "new_line_content": "        /* start any pending forks immediately. */",
          "content_same": false
        },
        {
          "line": 3886,
          "old_api": "addReplyStatus",
          "new_api": null,
          "old_text": "addReplyStatus(c, reply)",
          "new_text": null,
          "old_line_content": "        addReplyStatus(c, reply);",
          "new_line_content": "    if (cmd->flags & f) {",
          "content_same": false
        },
        {
          "line": 3895,
          "old_api": "addReplyNull",
          "new_api": null,
          "old_text": "addReplyNull(c)",
          "new_text": null,
          "old_line_content": "        addReplyNull(c);",
          "new_line_content": "    if (!cmd) {",
          "content_same": false
        },
        {
          "line": 3898,
          "old_api": "addReplyArrayLen",
          "new_api": null,
          "old_text": "addReplyArrayLen(c, 7)",
          "new_text": null,
          "old_line_content": "        addReplyArrayLen(c, 7);",
          "new_line_content": "        /* We are adding: command name, arg count, flags, first, last, offset, categories */",
          "content_same": false
        },
        {
          "line": 3903,
          "old_api": "addReplyDeferredLen",
          "new_api": null,
          "old_text": "addReplyDeferredLen(c)",
          "new_text": null,
          "old_line_content": "        void *flaglen = addReplyDeferredLen(c);",
          "new_line_content": "        int flagcount = 0;",
          "content_same": false
        },
        {
          "line": 1858,
          "old_api": "UNUSED",
          "new_api": null,
          "old_text": "UNUSED(eventLoop)",
          "new_text": null,
          "old_line_content": "    UNUSED(eventLoop);",
          "new_line_content": "    int j;",
          "content_same": false
        },
        {
          "line": 1864,
          "old_api": "watchdogScheduleSignal",
          "new_api": null,
          "old_text": "watchdogScheduleSignal(server.watchdog_period)",
          "new_text": null,
          "old_line_content": "    if (server.watchdog_period) watchdogScheduleSignal(server.watchdog_period);",
          "new_line_content": "     * handler if we don't return here fast enough. */",
          "content_same": false
        },
        {
          "line": 1867,
          "old_api": "updateCachedTime",
          "new_api": null,
          "old_text": "updateCachedTime(1)",
          "new_text": null,
          "old_line_content": "    updateCachedTime(1);",
          "new_line_content": "    /* Update the time cache. */",
          "content_same": false
        },
        {
          "line": 1873,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.clients)",
          "new_text": null,
          "old_line_content": "        while (listLength(server.clients) / server.hz >",
          "new_line_content": "    if (server.dynamic_hz) {",
          "content_same": false
        },
        {
          "line": 3923,
          "old_api": "setDeferredSetLen",
          "new_api": null,
          "old_text": "setDeferredSetLen(c, flaglen, flagcount)",
          "new_text": null,
          "old_line_content": "        setDeferredSetLen(c, flaglen, flagcount);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3925,
          "old_api": "addReplyLongLong",
          "new_api": null,
          "old_text": "addReplyLongLong(c, cmd->firstkey)",
          "new_text": null,
          "old_line_content": "        addReplyLongLong(c, cmd->firstkey);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3929,
          "old_api": "addReplyCommandCategories",
          "new_api": null,
          "old_text": "addReplyCommandCategories(c,cmd)",
          "new_text": null,
          "old_line_content": "        addReplyCommandCategories(c,cmd);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1884,
          "old_api": "run_with_period",
          "new_api": null,
          "old_text": "run_with_period(100)",
          "new_text": null,
          "old_line_content": "    run_with_period(100) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1888,
          "old_api": "trackInstantaneousMetric",
          "new_api": null,
          "old_text": "trackInstantaneousMetric(STATS_METRIC_NET_OUTPUT,\n                server.stat_net_output_bytes)",
          "new_text": null,
          "old_line_content": "        trackInstantaneousMetric(STATS_METRIC_NET_OUTPUT,",
          "new_line_content": "                server.stat_net_input_bytes);",
          "content_same": false
        },
        {
          "line": 3938,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[1]->ptr,\"help\")",
          "new_text": null,
          "old_line_content": "    if (c->argc == 2 && !strcasecmp(c->argv[1]->ptr,\"help\")) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3946,
          "old_api": "addReplyHelp",
          "new_api": null,
          "old_text": "addReplyHelp(c, help)",
          "new_text": null,
          "old_line_content": "        addReplyHelp(c, help);",
          "new_line_content": "        };",
          "content_same": false
        },
        {
          "line": 3948,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(server.commands)",
          "new_text": null,
          "old_line_content": "        addReplyArrayLen(c, dictSize(server.commands));",
          "new_line_content": "    } else if (c->argc == 1) {",
          "content_same": false
        },
        {
          "line": 1903,
          "old_api": "getLRUClock",
          "new_api": null,
          "old_text": "getLRUClock()",
          "new_text": null,
          "old_line_content": "    server.lruclock = getLRUClock();",
          "new_line_content": "     * LRU_CLOCK_RESOLUTION define. */",
          "content_same": false
        },
        {
          "line": 3953,
          "old_api": "dictReleaseIterator",
          "new_api": null,
          "old_text": "dictReleaseIterator(di)",
          "new_text": null,
          "old_line_content": "        dictReleaseIterator(di);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1906,
          "old_api": "zmalloc_used_memory",
          "new_api": null,
          "old_text": "zmalloc_used_memory()",
          "new_text": null,
          "old_line_content": "    if (zmalloc_used_memory() > server.stat_peak_memory)",
          "new_line_content": "    /* Record the max memory used since the server was started. */",
          "content_same": false
        },
        {
          "line": 3956,
          "old_api": "addReplyArrayLen",
          "new_api": null,
          "old_text": "addReplyArrayLen(c, c->argc-2)",
          "new_text": null,
          "old_line_content": "        addReplyArrayLen(c, c->argc-2);",
          "new_line_content": "        int i;",
          "content_same": false
        },
        {
          "line": 1909,
          "old_api": "run_with_period",
          "new_api": null,
          "old_text": "run_with_period(100)",
          "new_text": null,
          "old_line_content": "    run_with_period(100) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3958,
          "old_api": "dictFetchValue",
          "new_api": null,
          "old_text": "dictFetchValue(server.commands, c->argv[i]->ptr)",
          "new_text": null,
          "old_line_content": "            addReplyCommand(c, dictFetchValue(server.commands, c->argv[i]->ptr));",
          "new_line_content": "        for (i = 2; i < c->argc; i++) {",
          "content_same": false
        },
        {
          "line": 3960,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[1]->ptr, \"count\")",
          "new_text": null,
          "old_line_content": "    } else if (!strcasecmp(c->argv[1]->ptr, \"count\") && c->argc == 2) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1913,
          "old_api": "zmalloc_get_rss",
          "new_api": null,
          "old_text": "zmalloc_get_rss()",
          "new_text": null,
          "old_line_content": "        server.cron_malloc_stats.process_rss = zmalloc_get_rss();",
          "new_line_content": "         * the frag ratio calculate may be off (ratio of two samples at different times) */",
          "content_same": false
        },
        {
          "line": 1919,
          "old_api": "zmalloc_get_allocator_info",
          "new_api": null,
          "old_text": "zmalloc_get_allocator_info(&server.cron_malloc_stats.allocator_allocated,\n                                   &server.cron_malloc_stats.allocator_active,\n                                   &server.cron_malloc_stats.allocator_resident)",
          "new_text": null,
          "old_line_content": "        zmalloc_get_allocator_info(&server.cron_malloc_stats.allocator_allocated,",
          "new_line_content": "         * allocations, and allocator reserved pages that can be pursed (all not actual frag) */",
          "content_same": false
        },
        {
          "line": 3967,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\"Invalid command specified\")",
          "new_text": null,
          "old_line_content": "            addReplyError(c,\"Invalid command specified\");",
          "new_line_content": "        if (!cmd) {",
          "content_same": false
        },
        {
          "line": 3970,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\"The command has no key arguments\")",
          "new_text": null,
          "old_line_content": "            addReplyError(c,\"The command has no key arguments\");",
          "new_line_content": "        } else if (cmd->getkeys_proc == NULL && cmd->firstkey == 0) {",
          "content_same": false
        },
        {
          "line": 3975,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\"Invalid number of arguments specified for command\")",
          "new_text": null,
          "old_line_content": "            addReplyError(c,\"Invalid number of arguments specified for command\");",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 1928,
          "old_api": "lua_gc",
          "new_api": null,
          "old_text": "lua_gc(server.lua,LUA_GCCOUNT,0)",
          "new_text": null,
          "old_line_content": "            size_t lua_memory = lua_gc(server.lua,LUA_GCCOUNT,0)*1024LL;",
          "new_line_content": "             * \"allocator fragmentation\" ratio */",
          "content_same": false
        },
        {
          "line": 3979,
          "old_api": "getKeysFromCommand",
          "new_api": null,
          "old_text": "getKeysFromCommand(cmd,c->argv+2,c->argc-2,&numkeys)",
          "new_text": null,
          "old_line_content": "        keys = getKeysFromCommand(cmd,c->argv+2,c->argc-2,&numkeys);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3981,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\"Invalid arguments specified for command\")",
          "new_text": null,
          "old_line_content": "            addReplyError(c,\"Invalid arguments specified for command\");",
          "new_line_content": "        if (!keys) {",
          "content_same": false
        },
        {
          "line": 3983,
          "old_api": "addReplyArrayLen",
          "new_api": null,
          "old_text": "addReplyArrayLen(c,numkeys)",
          "new_text": null,
          "old_line_content": "            addReplyArrayLen(c,numkeys);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 1940,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(0)",
          "new_text": null,
          "old_line_content": "        if (prepareForShutdown(SHUTDOWN_NOFLAGS) == C_OK) exit(0);",
          "new_line_content": "    if (server.shutdown_asap) {",
          "content_same": false
        },
        {
          "line": 3988,
          "old_api": "addReplySubcommandSyntaxError",
          "new_api": null,
          "old_text": "addReplySubcommandSyntaxError(c)",
          "new_text": null,
          "old_line_content": "        addReplySubcommandSyntaxError(c);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 1946,
          "old_api": "run_with_period",
          "new_api": null,
          "old_text": "run_with_period(5000)",
          "new_text": null,
          "old_line_content": "    run_with_period(5000) {",
          "new_line_content": "    /* Show some info about non-empty databases */",
          "content_same": false
        },
        {
          "line": 1950,
          "old_api": "dictSlots",
          "new_api": null,
          "old_text": "dictSlots(server.db[j].dict)",
          "new_text": null,
          "old_line_content": "            size = dictSlots(server.db[j].dict);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3999,
          "old_api": "sprintf",
          "new_api": null,
          "old_text": "sprintf(s,\"%lluB\",n)",
          "new_text": null,
          "old_line_content": "        sprintf(s,\"%lluB\",n);",
          "new_line_content": "        /* Bytes */",
          "content_same": false
        },
        {
          "line": 1954,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_VERBOSE,\"DB %d: %lld keys (%lld volatile) in %lld slots HT.\",j,used,vkeys,size)",
          "new_text": null,
          "old_line_content": "                serverLog(LL_VERBOSE,\"DB %d: %lld keys (%lld volatile) in %lld slots HT.\",j,used,vkeys,size);",
          "new_line_content": "            if (used || vkeys) {",
          "content_same": false
        },
        {
          "line": 4002,
          "old_api": "sprintf",
          "new_api": null,
          "old_text": "sprintf(s,\"%.2fK\",d)",
          "new_text": null,
          "old_line_content": "        sprintf(s,\"%.2fK\",d);",
          "new_line_content": "        d = (double)n/(1024);",
          "content_same": false
        },
        {
          "line": 4005,
          "old_api": "sprintf",
          "new_api": null,
          "old_text": "sprintf(s,\"%.2fM\",d)",
          "new_text": null,
          "old_line_content": "        sprintf(s,\"%.2fM\",d);",
          "new_line_content": "        d = (double)n/(1024*1024);",
          "content_same": false
        },
        {
          "line": 4008,
          "old_api": "sprintf",
          "new_api": null,
          "old_text": "sprintf(s,\"%.2fG\",d)",
          "new_text": null,
          "old_line_content": "        sprintf(s,\"%.2fG\",d);",
          "new_line_content": "        d = (double)n/(1024LL*1024*1024);",
          "content_same": false
        },
        {
          "line": 1962,
          "old_api": "run_with_period",
          "new_api": null,
          "old_text": "run_with_period(5000)",
          "new_text": null,
          "old_line_content": "        run_with_period(5000) {",
          "new_line_content": "    if (!server.sentinel_mode) {",
          "content_same": false
        },
        {
          "line": 4011,
          "old_api": "sprintf",
          "new_api": null,
          "old_text": "sprintf(s,\"%.2fT\",d)",
          "new_text": null,
          "old_line_content": "        sprintf(s,\"%.2fT\",d);",
          "new_line_content": "        d = (double)n/(1024LL*1024*1024*1024);",
          "content_same": false
        },
        {
          "line": 1965,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.slaves)",
          "new_text": null,
          "old_line_content": "                listLength(server.clients)-listLength(server.slaves),",
          "new_line_content": "                \"%lu clients connected (%lu replicas), %zu bytes in use\",",
          "content_same": false
        },
        {
          "line": 4014,
          "old_api": "sprintf",
          "new_api": null,
          "old_text": "sprintf(s,\"%.2fP\",d)",
          "new_text": null,
          "old_line_content": "        sprintf(s,\"%.2fP\",d);",
          "new_line_content": "        d = (double)n/(1024LL*1024*1024*1024*1024);",
          "content_same": false
        },
        {
          "line": 4017,
          "old_api": "sprintf",
          "new_api": null,
          "old_text": "sprintf(s,\"%lluB\",n)",
          "new_text": null,
          "old_line_content": "        sprintf(s,\"%lluB\",n);",
          "new_line_content": "        /* Let's hope we never need this */",
          "content_same": false
        },
        {
          "line": 1972,
          "old_api": "clientsCron",
          "new_api": null,
          "old_text": "clientsCron()",
          "new_text": null,
          "old_line_content": "    clientsCron();",
          "new_line_content": "    /* We need to do a few operations on clients asynchronously. */",
          "content_same": false
        },
        {
          "line": 1975,
          "old_api": "databasesCron",
          "new_api": null,
          "old_text": "databasesCron()",
          "new_text": null,
          "old_line_content": "    databasesCron();",
          "new_line_content": "    /* Handle background operations on Redis databases. */",
          "content_same": false
        },
        {
          "line": 4025,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "    sds info = sdsempty();",
          "new_line_content": "sds genRedisInfoString(const char *section) {",
          "content_same": false
        },
        {
          "line": 1979,
          "old_api": "hasActiveChildProcess",
          "new_api": null,
          "old_text": "hasActiveChildProcess()",
          "new_text": null,
          "old_line_content": "    if (!hasActiveChildProcess() &&",
          "new_line_content": "     * a BGSAVE was in progress. */",
          "content_same": false
        },
        {
          "line": 1982,
          "old_api": "rewriteAppendOnlyFileBackground",
          "new_api": null,
          "old_text": "rewriteAppendOnlyFileBackground()",
          "new_text": null,
          "old_line_content": "        rewriteAppendOnlyFileBackground();",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 4033,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(section,\"all\")",
          "new_text": null,
          "old_line_content": "    allsections = strcasecmp(section,\"all\") == 0;",
          "new_line_content": "    if (section == NULL) section = \"default\";",
          "content_same": false
        },
        {
          "line": 1986,
          "old_api": "ldbPendingChildren",
          "new_api": null,
          "old_text": "ldbPendingChildren()",
          "new_text": null,
          "old_line_content": "    if (hasActiveChildProcess() || ldbPendingChildren())",
          "new_line_content": "    /* Check if a background saving or AOF rewrite in progress terminated. */",
          "content_same": false
        },
        {
          "line": 1988,
          "old_api": "checkChildrenDone",
          "new_api": null,
          "old_text": "checkChildrenDone()",
          "new_text": null,
          "old_line_content": "        checkChildrenDone();",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 4039,
          "old_api": "getrusage",
          "new_api": null,
          "old_text": "getrusage(RUSAGE_SELF, &self_ru)",
          "new_text": null,
          "old_line_content": "    getrusage(RUSAGE_SELF, &self_ru);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4043,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(section,\"server\")",
          "new_text": null,
          "old_line_content": "    if (allsections || defsections || !strcasecmp(section,\"server\")) {",
          "new_line_content": "    /* Server */",
          "content_same": false
        },
        {
          "line": 4052,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(info,\"\\r\\n\")",
          "new_text": null,
          "old_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2005,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_NOTICE,\"%d changes in %d seconds. Saving...\",\n                    sp->changes, (int)sp->seconds)",
          "new_text": null,
          "old_line_content": "                serverLog(LL_NOTICE,\"%d changes in %d seconds. Saving...\",",
          "new_line_content": "            {",
          "content_same": false
        },
        {
          "line": 2008,
          "old_api": "rdbPopulateSaveInfo",
          "new_api": null,
          "old_text": "rdbPopulateSaveInfo(&rsi)",
          "new_text": null,
          "old_line_content": "                rsiptr = rdbPopulateSaveInfo(&rsi);",
          "new_line_content": "                rdbSaveInfo rsi, *rsiptr;",
          "content_same": false
        },
        {
          "line": 4056,
          "old_api": "uname",
          "new_api": null,
          "old_text": "uname(&name)",
          "new_text": null,
          "old_line_content": "            uname(&name);",
          "new_line_content": "            /* Uname can be slow and is always the same output. Cache it. */",
          "content_same": false
        },
        {
          "line": 4060,
          "old_api": "sdscatfmt",
          "new_api": null,
          "old_text": "sdscatfmt(info,\n            \"# Server\\r\\n\"\n            \"redis_version:%s\\r\\n\"\n            \"redis_git_sha1:%s\\r\\n\"\n            \"redis_git_dirty:%i\\r\\n\"\n            \"redis_build_id:%s\\r\\n\"\n            \"redis_mode:%s\\r\\n\"\n            \"os:%s %s %s\\r\\n\"\n            \"arch_bits:%i\\r\\n\"\n            \"multiplexing_api:%s\\r\\n\"\n            \"atomicvar_api:%s\\r\\n\"\n            \"gcc_version:%i.%i.%i\\r\\n\"\n            \"process_id:%I\\r\\n\"\n            \"run_id:%s\\r\\n\"\n            \"tcp_port:%i\\r\\n\"\n            \"uptime_in_seconds:%I\\r\\n\"\n            \"uptime_in_days:%I\\r\\n\"\n            \"hz:%i\\r\\n\"\n            \"configured_hz:%i\\r\\n\"\n            \"lru_clock:%u\\r\\n\"\n            \"executable:%s\\r\\n\"\n            \"config_file:%s\\r\\n\"\n            \"io_threads_active:%d\\r\\n\",\n            REDIS_VERSION,\n            redisGitSHA1(),\n            strtol(redisGitDirty(),NULL,10) > 0,\n            redisBuildIdString(),\n            mode,\n            name.sysname, name.release, name.machine,\n            server.arch_bits,\n            aeGetApiName(),\n            REDIS_ATOMIC_API,\n#ifdef __GNUC__\n            __GNUC__,__GNUC_MINOR__,__GNUC_PATCHLEVEL__,\n#else\n            0,0,0,\n#endif\n            (int64_t) getpid(),\n            server.runid,\n            server.port ? server.port : server.tls_port,\n            (int64_t)uptime,\n            (int64_t)(uptime/(3600*24)),\n            server.hz,\n            server.config_hz,\n            server.lruclock,\n            server.executable ? server.executable : \"\",\n            server.configfile ? server.configfile : \"\",\n            server.io_threads_active)",
          "new_text": null,
          "old_line_content": "        info = sdscatfmt(info,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2016,
          "old_api": "hasActiveChildProcess",
          "new_api": null,
          "old_text": "hasActiveChildProcess()",
          "new_text": null,
          "old_line_content": "            !hasActiveChildProcess() &&",
          "new_line_content": "        if (server.aof_state == AOF_ON &&",
          "content_same": false
        },
        {
          "line": 2024,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_NOTICE,\"Starting automatic rewriting of AOF on %lld%% growth\",growth)",
          "new_text": null,
          "old_line_content": "                serverLog(LL_NOTICE,\"Starting automatic rewriting of AOF on %lld%% growth\",growth);",
          "new_line_content": "            if (growth >= server.aof_rewrite_perc) {",
          "content_same": false
        },
        {
          "line": 2033,
          "old_api": "flushAppendOnlyFile",
          "new_api": null,
          "old_text": "flushAppendOnlyFile(0)",
          "new_text": null,
          "old_line_content": "    if (server.aof_flush_postponed_start) flushAppendOnlyFile(0);",
          "new_line_content": "     * completed. */",
          "content_same": false
        },
        {
          "line": 4084,
          "old_api": "redisGitSHA1",
          "new_api": null,
          "old_text": "redisGitSHA1()",
          "new_text": null,
          "old_line_content": "            redisGitSHA1(),",
          "new_line_content": "            REDIS_VERSION,",
          "content_same": false
        },
        {
          "line": 2039,
          "old_api": "run_with_period",
          "new_api": null,
          "old_text": "run_with_period(1000)",
          "new_text": null,
          "old_line_content": "    run_with_period(1000) {",
          "new_line_content": "     * an higher frequency. */",
          "content_same": false
        },
        {
          "line": 2041,
          "old_api": "flushAppendOnlyFile",
          "new_api": null,
          "old_text": "flushAppendOnlyFile(0)",
          "new_text": null,
          "old_line_content": "            flushAppendOnlyFile(0);",
          "new_line_content": "        if (server.aof_last_write_status == C_ERR)",
          "content_same": false
        },
        {
          "line": 4090,
          "old_api": "aeGetApiName",
          "new_api": null,
          "old_text": "aeGetApiName()",
          "new_text": null,
          "old_line_content": "            aeGetApiName(),",
          "new_line_content": "            server.arch_bits,",
          "content_same": false
        },
        {
          "line": 2045,
          "old_api": "clientsArePaused",
          "new_api": null,
          "old_text": "clientsArePaused()",
          "new_text": null,
          "old_line_content": "    clientsArePaused(); /* Don't check return value, just use the side effect.*/",
          "new_line_content": "    /* Clear the paused clients flag if needed. */",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 248,
      "total_additions": 528,
      "total_deletions": 529,
      "total_api_changes": 1305
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 4,
        "api_related_lines": 1305,
        "non_api_lines": 3,
        "non_api_line_numbers": [
          1496,
          1497,
          1508
        ]
      }
    },
    "api_calls_before": 1070,
    "api_calls_after": 1069,
    "diff_info": {
      "added_lines": 3,
      "removed_lines": 2,
      "total_diff_lines": 24
    }
  }
}
{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/2fe9b7989792d1a722d5863734e379c15d57b56a",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/2fe9b7989792d1a722d5863734e379c15d57b56a/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/2fe9b7989792d1a722d5863734e379c15d57b56a/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/2fe9b7989792d1a722d5863734e379c15d57b56a/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 691,
          "old_api": "sdslen",
          "new_api": "decrRefCount",
          "old_text": "sdslen(str->ptr)",
          "new_text": "decrRefCount(str)",
          "old_line_content": "    if (len) *len = sdslen(str->ptr);",
          "new_line_content": "    decrRefCount(str);",
          "content_same": false
        },
        {
          "line": 708,
          "old_api": "getDoubleFromObject",
          "new_api": "sdslen",
          "old_text": "getDoubleFromObject(str,d)",
          "new_text": "sdslen(str->ptr)",
          "old_line_content": "    int retval = getDoubleFromObject(str,d);",
          "new_line_content": "    return string2ll(str->ptr,sdslen(str->ptr),ll) ? REDISMODULE_OK :",
          "content_same": false
        },
        {
          "line": 747,
          "old_api": "sdsnewlen",
          "new_api": "addReplyLongLong",
          "old_text": "sdsnewlen(prefix,1)",
          "new_text": "addReplyLongLong(ctx->client,ll)",
          "old_line_content": "    sds strmsg = sdsnewlen(prefix,1);",
          "new_line_content": "    addReplyLongLong(ctx->client,ll);",
          "content_same": false
        },
        {
          "line": 841,
          "old_api": "setDeferredMultiBulkLength",
          "new_api": "serverLog",
          "old_text": "setDeferredMultiBulkLength(ctx->client,\n            ctx->postponed_arrays[ctx->postponed_arrays_count],\n            len)",
          "new_text": "serverLog(LL_WARNING,\n            \"API misuse detected in module %s: \"\n            \"RedisModule_ReplySetArrayLength() called without previous \"\n            \"RedisModule_ReplyWithArray(ctx,REDISMODULE_POSTPONED_ARRAY_LEN) \"\n            \"call.\", ctx->module->name)",
          "old_line_content": "    setDeferredMultiBulkLength(ctx->client,",
          "new_line_content": "        serverLog(LL_WARNING,",
          "content_same": false
        },
        {
          "line": 862,
          "old_api": "addReplyBulk",
          "new_api": "addReplyBulkCBuffer",
          "old_text": "addReplyBulk(ctx->client,str)",
          "new_text": "addReplyBulkCBuffer(ctx->client,(char*)buf,len)",
          "old_line_content": "    addReplyBulk(ctx->client,str);",
          "new_line_content": "    addReplyBulkCBuffer(ctx->client,(char*)buf,len);",
          "content_same": false
        },
        {
          "line": 1050,
          "old_api": "RM_ZsetRangeStop",
          "new_api": "zmalloc",
          "old_text": "RM_ZsetRangeStop(kp)",
          "new_text": "zmalloc(sizeof(*kp))",
          "old_line_content": "    RM_ZsetRangeStop(kp);",
          "new_line_content": "    kp = zmalloc(sizeof(*kp));",
          "content_same": false
        },
        {
          "line": 1058,
          "old_api": "signalModifiedKey",
          "new_api": "RM_ZsetRangeStop",
          "old_text": "signalModifiedKey(key->db,key->key)",
          "new_text": "RM_ZsetRangeStop(kp)",
          "old_line_content": "    if (key->mode & REDISMODULE_WRITE) signalModifiedKey(key->db,key->key);",
          "new_line_content": "    RM_ZsetRangeStop(kp);",
          "content_same": false
        },
        {
          "line": 1243,
          "old_api": "sdsgrowzero",
          "new_api": "setKey",
          "old_text": "sdsgrowzero(key->value->ptr,newlen)",
          "new_text": "setKey(key->db,key->key,o)",
          "old_line_content": "            key->value->ptr = sdsgrowzero(key->value->ptr,newlen);",
          "new_line_content": "        setKey(key->db,key->key,o);",
          "content_same": false
        },
        {
          "line": 1245,
          "old_api": "sdsrange",
          "new_api": "decrRefCount",
          "old_text": "sdsrange(key->value->ptr,0,newlen-1)",
          "new_text": "decrRefCount(o)",
          "old_line_content": "            sdsrange(key->value->ptr,0,newlen-1);",
          "new_line_content": "        decrRefCount(o);",
          "content_same": false
        },
        {
          "line": 1248,
          "old_api": "sdsRemoveFreeSpace",
          "new_api": "dbUnshareStringValue",
          "old_text": "sdsRemoveFreeSpace(key->value->ptr)",
          "new_text": "dbUnshareStringValue(key->db, key->key, key->value)",
          "old_line_content": "                key->value->ptr = sdsRemoveFreeSpace(key->value->ptr);",
          "new_line_content": "        key->value = dbUnshareStringValue(key->db, key->key, key->value);",
          "content_same": false
        },
        {
          "line": 1484,
          "old_api": "serverPanic",
          "new_api": "zzlFirstInRange",
          "old_text": "serverPanic(\"Unsupported zset encoding\")",
          "new_text": "zzlFirstInRange(key->value->ptr,zrs)",
          "old_line_content": "        serverPanic(\"Unsupported zset encoding\");",
          "new_line_content": "        key->zcurrent = first ? zzlFirstInRange(key->value->ptr,zrs) :",
          "content_same": false
        },
        {
          "line": 1541,
          "old_api": "zzlLastInLexRange",
          "new_api": "zslParseLexRange",
          "old_text": "zzlLastInLexRange(key->value->ptr,zlrs)",
          "new_text": "zslParseLexRange(min, max, zlrs)",
          "old_line_content": "                                zzlLastInLexRange(key->value->ptr,zlrs);",
          "new_line_content": "    if (zslParseLexRange(min, max, zlrs) == C_ERR) return REDISMODULE_ERR;",
          "content_same": false
        },
        {
          "line": 1548,
          "old_api": "serverPanic",
          "new_api": "zzlFirstInLexRange",
          "old_text": "serverPanic(\"Unsupported zset encoding\")",
          "new_text": "zzlFirstInLexRange(key->value->ptr,zlrs)",
          "old_line_content": "        serverPanic(\"Unsupported zset encoding\");",
          "new_line_content": "        key->zcurrent = first ? zzlFirstInLexRange(key->value->ptr,zlrs) :",
          "content_same": false
        },
        {
          "line": 1598,
          "old_api": "serverPanic",
          "new_api": "zzlGetScore",
          "old_text": "serverPanic(\"Unsupported zset encoding\")",
          "new_text": "zzlGetScore(sptr)",
          "old_line_content": "        serverPanic(\"Unsupported zset encoding\");",
          "new_line_content": "            *score = zzlGetScore(sptr);",
          "content_same": false
        },
        {
          "line": 1600,
          "old_api": "autoMemoryAdd",
          "new_api": "createObject",
          "old_text": "autoMemoryAdd(key->ctx,REDISMODULE_AM_STRING,str)",
          "new_text": "createObject(OBJ_STRING,ele)",
          "old_line_content": "    autoMemoryAdd(key->ctx,REDISMODULE_AM_STRING,str);",
          "new_line_content": "        str = createObject(OBJ_STRING,ele);",
          "content_same": false
        },
        {
          "line": 1633,
          "old_api": "zzlLexValueLteMax",
          "new_api": "ziplistNext",
          "old_text": "zzlLexValueLteMax(next,&key->zlrs)",
          "new_text": "ziplistNext(zl,next)",
          "old_line_content": "                if (!zzlLexValueLteMax(next,&key->zlrs)) {",
          "new_line_content": "                next = ziplistNext(zl,next); /* Skip next element. */",
          "content_same": false
        },
        {
          "line": 1696,
          "old_api": "zzlLexValueGteMin",
          "new_api": "ziplistNext",
          "old_text": "zzlLexValueGteMin(prev,&key->zlrs)",
          "new_text": "ziplistNext(zl,prev)",
          "old_line_content": "                if (!zzlLexValueGteMin(prev,&key->zlrs)) {",
          "new_line_content": "                prev = ziplistNext(zl,prev); /* Skip element to get the score.*/",
          "content_same": false
        },
        {
          "line": 1796,
          "old_api": "va_arg",
          "new_api": "moduleCreateEmptyKey",
          "old_text": "va_arg(ap,char*)",
          "new_text": "moduleCreateEmptyKey(key,REDISMODULE_KEYTYPE_HASH)",
          "old_line_content": "            char *cfield = va_arg(ap,char*);",
          "new_line_content": "    if (key->value == NULL) moduleCreateEmptyKey(key,REDISMODULE_KEYTYPE_HASH);",
          "content_same": false
        },
        {
          "line": 1811,
          "old_api": "decrRefCount",
          "new_api": "va_arg",
          "old_text": "decrRefCount(field)",
          "new_text": "va_arg(ap,RedisModuleString*)",
          "old_line_content": "                if (flags & REDISMODULE_HASH_CFIELDS) decrRefCount(field);",
          "new_line_content": "        value = va_arg(ap,RedisModuleString*);",
          "content_same": false
        },
        {
          "line": 1896,
          "old_api": "strlen",
          "new_api": "va_start",
          "old_text": "strlen(cfield)",
          "new_text": "va_start(ap, flags)",
          "old_line_content": "            field = createRawStringObject(cfield,strlen(cfield));",
          "new_line_content": "    va_start(ap, flags);",
          "content_same": false
        },
        {
          "line": 1904,
          "old_api": "va_arg",
          "new_api": "strlen",
          "old_text": "va_arg(ap,int*)",
          "new_text": "strlen(cfield)",
          "old_line_content": "            existsptr = va_arg(ap,int*);",
          "new_line_content": "            field = createRawStringObject(cfield,strlen(cfield));",
          "content_same": false
        },
        {
          "line": 1906,
          "old_api": "hashTypeExists",
          "new_api": "va_arg",
          "old_text": "hashTypeExists(key->value,field->ptr)",
          "new_text": "va_arg(ap,RedisModuleString*)",
          "old_line_content": "                *existsptr = hashTypeExists(key->value,field->ptr);",
          "new_line_content": "            field = va_arg(ap,RedisModuleString*);",
          "content_same": false
        },
        {
          "line": 1912,
          "old_api": "hashTypeGetValueObject",
          "new_api": "va_arg",
          "old_text": "hashTypeGetValueObject(key->value,field->ptr)",
          "new_text": "va_arg(ap,int*)",
          "old_line_content": "                *valueptr = hashTypeGetValueObject(key->value,field->ptr);",
          "new_line_content": "            existsptr = va_arg(ap,int*);",
          "content_same": false
        },
        {
          "line": 1914,
          "old_api": "getDecodedObject",
          "new_api": "hashTypeExists",
          "old_text": "getDecodedObject(*valueptr)",
          "new_text": "hashTypeExists(key->value,field->ptr)",
          "old_line_content": "                    robj *decoded = getDecodedObject(*valueptr);",
          "new_line_content": "                *existsptr = hashTypeExists(key->value,field->ptr);",
          "content_same": false
        },
        {
          "line": 1984,
          "old_api": "string2ll",
          "new_api": "moduleParseCallReply_Array",
          "old_text": "string2ll(proto+1,p-proto-1,&reply->val.ll)",
          "new_text": "moduleParseCallReply_Array(reply)",
          "old_line_content": "    string2ll(proto+1,p-proto-1,&reply->val.ll);",
          "new_line_content": "    case '*': moduleParseCallReply_Array(reply); break;",
          "content_same": false
        },
        {
          "line": 2039,
          "old_api": "moduleParseCallReply",
          "new_api": "zmalloc",
          "old_text": "moduleParseCallReply(ele)",
          "new_text": "zmalloc(sizeof(RedisModuleCallReply)*arraylen)",
          "old_line_content": "        moduleParseCallReply(ele);",
          "new_line_content": "    reply->val.array = zmalloc(sizeof(RedisModuleCallReply)*arraylen);",
          "content_same": false
        },
        {
          "line": 2077,
          "old_api": "RM_FreeCallReply_Rec",
          "new_api": "zfree",
          "old_text": "RM_FreeCallReply_Rec(reply,0)",
          "new_text": "zfree(reply)",
          "old_line_content": "    RM_FreeCallReply_Rec(reply,0);",
          "new_line_content": "        zfree(reply);",
          "content_same": false
        },
        {
          "line": 2135,
          "old_api": "RM_CreateString",
          "new_api": "moduleParseCallReply",
          "old_text": "RM_CreateString(reply->ctx,buf,len)",
          "new_text": "moduleParseCallReply(reply)",
          "old_line_content": "        return RM_CreateString(reply->ctx,buf,len);",
          "new_line_content": "    moduleParseCallReply(reply);",
          "content_same": false
        },
        {
          "line": 2181,
          "old_api": "createStringObject",
          "new_api": "strlen",
          "old_text": "createStringObject(buf,len)",
          "new_text": "strlen(cstr)",
          "old_line_content": "            argv[argc++] = createStringObject(buf,len);",
          "new_line_content": "            argv[argc++] = createStringObject(cstr,strlen(cstr));",
          "content_same": false
        },
        {
          "line": 2241,
          "old_api": "createClient",
          "new_api": "lookupCommandByCString",
          "old_text": "createClient(-1)",
          "new_text": "lookupCommandByCString((char*)cmdname)",
          "old_line_content": "    c = createClient(-1);",
          "new_line_content": "    cmd = lookupCommandByCString((char*)cmdname);",
          "content_same": false
        },
        {
          "line": 2287,
          "old_api": "call",
          "new_api": "moduleReplicateMultiIfNeeded",
          "old_text": "call(c,call_flags)",
          "new_text": "moduleReplicateMultiIfNeeded(ctx)",
          "old_line_content": "    call(c,call_flags);",
          "new_line_content": "    if (replicate) moduleReplicateMultiIfNeeded(ctx);",
          "content_same": false
        },
        {
          "line": 2295,
          "old_api": "listFirst",
          "new_api": "call",
          "old_text": "listFirst(c->reply)",
          "new_text": "call(c,call_flags)",
          "old_line_content": "        sds o = listNodeValue(listFirst(c->reply));",
          "new_line_content": "    call(c,call_flags);",
          "content_same": false
        },
        {
          "line": 2300,
          "old_api": "moduleCreateCallReplyFromProto",
          "new_api": "sdsnewlen",
          "old_text": "moduleCreateCallReplyFromProto(ctx,proto)",
          "new_text": "sdsnewlen(c->buf,c->bufpos)",
          "old_line_content": "    reply = moduleCreateCallReplyFromProto(ctx,proto);",
          "new_line_content": "    sds proto = sdsnewlen(c->buf,c->bufpos);",
          "content_same": false
        },
        {
          "line": 2383,
          "old_api": "listRewind",
          "new_api": "dictGetIterator",
          "old_text": "listRewind(module->types,&li)",
          "new_text": "dictGetIterator(modules)",
          "old_line_content": "        listRewind(module->types,&li);",
          "new_line_content": "    dictIterator *di = dictGetIterator(modules);",
          "content_same": false
        },
        {
          "line": 2386,
          "old_api": "memcmp",
          "new_api": "dictNext",
          "old_text": "memcmp(name,mt->name,sizeof(mt->name))",
          "new_text": "dictNext(di)",
          "old_line_content": "            if (memcmp(name,mt->name,sizeof(mt->name)) == 0) {",
          "new_line_content": "    while ((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 2387,
          "old_api": "dictReleaseIterator",
          "new_api": "dictGetVal",
          "old_text": "dictReleaseIterator(di)",
          "new_text": "dictGetVal(de)",
          "old_line_content": "                dictReleaseIterator(di);",
          "new_line_content": "        struct RedisModule *module = dictGetVal(de);",
          "content_same": false
        },
        {
          "line": 2392,
          "old_api": "dictReleaseIterator",
          "new_api": "listNext",
          "old_text": "dictReleaseIterator(di)",
          "new_text": "listNext(&li)",
          "old_line_content": "    dictReleaseIterator(di);",
          "new_line_content": "        while((ln = listNext(&li))) {",
          "content_same": false
        },
        {
          "line": 2422,
          "old_api": "listRewind",
          "new_api": "dictGetIterator",
          "old_text": "listRewind(module->types,&li)",
          "new_text": "dictGetIterator(modules)",
          "old_line_content": "        listRewind(module->types,&li);",
          "new_line_content": "    dictIterator *di = dictGetIterator(modules);",
          "content_same": false
        },
        {
          "line": 2430,
          "old_api": "dictReleaseIterator",
          "new_api": "listRewind",
          "old_text": "dictReleaseIterator(di)",
          "new_text": "listRewind(module->types,&li)",
          "old_line_content": "    dictReleaseIterator(di);",
          "new_line_content": "        listRewind(module->types,&li);",
          "content_same": false
        },
        {
          "line": 2512,
          "old_api": "memcpy",
          "new_api": "zmalloc",
          "old_text": "memcpy(mt->name,name,sizeof(mt->name))",
          "new_text": "zmalloc(sizeof(*mt))",
          "old_line_content": "    memcpy(mt->name,name,sizeof(mt->name));",
          "new_line_content": "    moduleType *mt = zmalloc(sizeof(*mt));",
          "content_same": false
        },
        {
          "line": 2580,
          "old_api": "rdbSaveLen",
          "new_api": "exit",
          "old_text": "rdbSaveLen(io->rio, value)",
          "new_text": "exit(1)",
          "old_line_content": "    int retval = rdbSaveLen(io->rio, value);",
          "new_line_content": "    exit(1);",
          "content_same": false
        },
        {
          "line": 2683,
          "old_api": "rdbSaveBinaryDoubleValue",
          "new_api": "moduleLoadString",
          "old_text": "rdbSaveBinaryDoubleValue(io->rio, value)",
          "new_text": "moduleLoadString(io,1,lenptr)",
          "old_line_content": "    int retval = rdbSaveBinaryDoubleValue(io->rio, value);",
          "new_line_content": "    return moduleLoadString(io,1,lenptr);",
          "content_same": false
        },
        {
          "line": 2792,
          "old_api": "dictCreate",
          "new_api": "dictAdd",
          "old_text": "dictCreate(&moduleAPIDictType,NULL)",
          "new_text": "dictAdd(server.moduleapi, (char*)funcname, funcptr)",
          "old_line_content": "    server.moduleapi = dictCreate(&moduleAPIDictType,NULL);",
          "new_line_content": "    return dictAdd(server.moduleapi, (char*)funcname, funcptr);",
          "content_same": false
        },
        {
          "line": 2800,
          "old_api": "REGISTER_API",
          "new_api": "dictCreate",
          "old_text": "REGISTER_API(ReplyWithLongLong)",
          "new_text": "dictCreate(&moduleAPIDictType,NULL)",
          "old_line_content": "    REGISTER_API(ReplyWithLongLong);",
          "new_line_content": "    server.moduleapi = dictCreate(&moduleAPIDictType,NULL);",
          "content_same": false
        },
        {
          "line": 2880,
          "old_api": "listCreate",
          "new_api": "REGISTER_API",
          "old_text": "listCreate()",
          "new_text": "REGISTER_API(LoadStringBuffer)",
          "old_line_content": "    server.loadmodule_queue = listCreate();",
          "new_line_content": "    REGISTER_API(LoadStringBuffer);",
          "content_same": false
        },
        {
          "line": 2881,
          "old_api": "dictCreate",
          "new_api": "REGISTER_API",
          "old_text": "dictCreate(&modulesDictType,NULL)",
          "new_text": "REGISTER_API(SaveDouble)",
          "old_line_content": "    modules = dictCreate(&modulesDictType,NULL);",
          "new_line_content": "    REGISTER_API(SaveDouble);",
          "content_same": false
        },
        {
          "line": 2882,
          "old_api": "moduleRegisterCoreAPI",
          "new_api": "REGISTER_API",
          "old_text": "moduleRegisterCoreAPI()",
          "new_text": "REGISTER_API(LoadDouble)",
          "old_line_content": "    moduleRegisterCoreAPI();",
          "new_line_content": "    REGISTER_API(LoadDouble);",
          "content_same": false
        },
        {
          "line": 2907,
          "old_api": "exit",
          "new_api": "listNext",
          "old_text": "exit(1)",
          "new_text": "listNext(&li)",
          "old_line_content": "            exit(1);",
          "new_line_content": "    while((ln = listNext(&li))) {",
          "content_same": false
        },
        {
          "line": 2915,
          "old_api": "zfree",
          "new_api": "exit",
          "old_text": "zfree(module)",
          "new_text": "exit(1)",
          "old_line_content": "    zfree(module);",
          "new_line_content": "            exit(1);",
          "content_same": false
        },
        {
          "line": 2938,
          "old_api": "moduleFreeModuleStructure",
          "new_api": "dlsym",
          "old_text": "moduleFreeModuleStructure(ctx.module)",
          "new_text": "dlsym(handle,\"RedisModule_OnLoad\")",
          "old_line_content": "        if (ctx.module) moduleFreeModuleStructure(ctx.module);",
          "new_line_content": "    onload = (int (*)(void *, void **, int))(unsigned long) dlsym(handle,\"RedisModule_OnLoad\");",
          "content_same": false
        },
        {
          "line": 2946,
          "old_api": "dictAdd",
          "new_api": "moduleFreeModuleStructure",
          "old_text": "dictAdd(modules,ctx.module->name,ctx.module)",
          "new_text": "moduleFreeModuleStructure(ctx.module)",
          "old_line_content": "    dictAdd(modules,ctx.module->name,ctx.module);",
          "new_line_content": "        if (ctx.module) moduleFreeModuleStructure(ctx.module);",
          "content_same": false
        },
        {
          "line": 2975,
          "old_api": "dictNext",
          "new_api": "listLength",
          "old_text": "dictNext(di)",
          "new_text": "listLength(module->types)",
          "old_line_content": "    while ((de = dictNext(di)) != NULL) {",
          "new_line_content": "    if (listLength(module->types)) {",
          "content_same": false
        },
        {
          "line": 2983,
          "old_api": "dictDelete",
          "new_api": "dictNext",
          "old_text": "dictDelete(server.orig_commands,cmdname)",
          "new_text": "dictNext(di)",
          "old_line_content": "                dictDelete(server.orig_commands,cmdname);",
          "new_line_content": "    while ((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 2984,
          "old_api": "sdsfree",
          "new_api": "dictGetVal",
          "old_text": "sdsfree(cmdname)",
          "new_text": "dictGetVal(de)",
          "old_line_content": "                sdsfree(cmdname);",
          "new_line_content": "        struct redisCommand *cmd = dictGetVal(de);",
          "content_same": false
        },
        {
          "line": 2990,
          "old_api": "dictReleaseIterator",
          "new_api": "dictDelete",
          "old_text": "dictReleaseIterator(di)",
          "new_text": "dictDelete(server.commands,cmdname)",
          "old_line_content": "    dictReleaseIterator(di);",
          "new_line_content": "                dictDelete(server.commands,cmdname);",
          "content_same": false
        },
        {
          "line": 2998,
          "old_api": "serverLog",
          "new_api": "dictReleaseIterator",
          "old_text": "serverLog(LL_WARNING,\"Error when trying to close the %s module: %s\",\n            module->name, error)",
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "        serverLog(LL_WARNING,\"Error when trying to close the %s module: %s\",",
          "new_line_content": "    dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 3003,
          "old_api": "serverLog",
          "new_api": "dlclose",
          "old_text": "serverLog(LL_NOTICE,\"Module %s unloaded\",module->name)",
          "new_text": "dlclose(module->handle)",
          "old_line_content": "    serverLog(LL_NOTICE,\"Module %s unloaded\",module->name);",
          "new_line_content": "    if (dlclose(module->handle) == -1) {",
          "content_same": false
        },
        {
          "line": 3004,
          "old_api": "dictDelete",
          "new_api": "dlerror",
          "old_text": "dictDelete(modules,module->name)",
          "new_text": "dlerror()",
          "old_line_content": "    dictDelete(modules,module->name);",
          "new_line_content": "        char *error = dlerror();",
          "content_same": false
        },
        {
          "line": 3054,
          "old_api": "dictGetKey",
          "new_api": "addReplyErrorFormat",
          "old_text": "dictGetKey(de)",
          "new_text": "addReplyErrorFormat(c,\"Error unloading module: %s\",errmsg)",
          "old_line_content": "            sds name = dictGetKey(de);",
          "new_line_content": "            addReplyErrorFormat(c,\"Error unloading module: %s\",errmsg);",
          "content_same": false
        },
        {
          "line": 3056,
          "old_api": "addReplyMultiBulkLen",
          "new_api": "strcasecmp",
          "old_text": "addReplyMultiBulkLen(c,4)",
          "new_text": "strcasecmp(subcmd,\"list\")",
          "old_line_content": "            addReplyMultiBulkLen(c,4);",
          "new_line_content": "    } else if (!strcasecmp(subcmd,\"list\") && c->argc == 2) {",
          "content_same": false
        },
        {
          "line": 3057,
          "old_api": "addReplyBulkCString",
          "new_api": "dictGetIterator",
          "old_text": "addReplyBulkCString(c,\"name\")",
          "new_text": "dictGetIterator(modules)",
          "old_line_content": "            addReplyBulkCString(c,\"name\");",
          "new_line_content": "        dictIterator *di = dictGetIterator(modules);",
          "content_same": false
        },
        {
          "line": 3060,
          "old_api": "addReplyLongLong",
          "new_api": "dictSize",
          "old_text": "addReplyLongLong(c,module->ver)",
          "new_text": "dictSize(modules)",
          "old_line_content": "            addReplyLongLong(c,module->ver);",
          "new_line_content": "        addReplyMultiBulkLen(c,dictSize(modules));",
          "content_same": false
        },
        {
          "line": 3062,
          "old_api": "dictReleaseIterator",
          "new_api": "dictGetKey",
          "old_text": "dictReleaseIterator(di)",
          "new_text": "dictGetKey(de)",
          "old_line_content": "        dictReleaseIterator(di);",
          "new_line_content": "            sds name = dictGetKey(de);",
          "content_same": false
        },
        {
          "line": 3064,
          "old_api": "addReply",
          "new_api": "addReplyMultiBulkLen",
          "old_text": "addReply(c,shared.syntaxerr)",
          "new_text": "addReplyMultiBulkLen(c,4)",
          "old_line_content": "        addReply(c,shared.syntaxerr);",
          "new_line_content": "            addReplyMultiBulkLen(c,4);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 3072,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.syntaxerr)",
          "old_line_content": "",
          "new_line_content": "        addReply(c,shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 2561,
          "old_api": null,
          "new_api": "RM_KeyType",
          "old_text": null,
          "new_text": "RM_KeyType(key)",
          "old_line_content": "",
          "new_line_content": "        RM_KeyType(key) != REDISMODULE_KEYTYPE_MODULE) return NULL;",
          "content_same": false
        },
        {
          "line": 2573,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\n        \"Error loading data from RDB (short read or EOF). \"\n        \"Read performed by module '%s' about type '%s' \"\n        \"after reading '%llu' bytes of a value.\",\n        io->type->module->name,\n        io->type->name,\n        (unsigned long long)io->bytes)",
          "old_line_content": "}",
          "new_line_content": "    serverLog(LL_WARNING,",
          "content_same": false
        },
        {
          "line": 1549,
          "old_api": null,
          "new_api": "zzlLastInLexRange",
          "old_text": null,
          "new_text": "zzlLastInLexRange(key->value->ptr,zlrs)",
          "old_line_content": "    }",
          "new_line_content": "                                zzlLastInLexRange(key->value->ptr,zlrs);",
          "content_same": false
        },
        {
          "line": 1041,
          "old_api": null,
          "new_api": "lookupKeyWrite",
          "old_text": null,
          "new_text": "lookupKeyWrite(ctx->client->db,keyname)",
          "old_line_content": "    /* Setup the key handle. */",
          "new_line_content": "        value = lookupKeyWrite(ctx->client->db,keyname);",
          "content_same": false
        },
        {
          "line": 2066,
          "old_api": null,
          "new_api": "RM_FreeCallReply_Rec",
          "old_text": null,
          "new_text": "RM_FreeCallReply_Rec(reply->val.array+j,1)",
          "old_line_content": "     * when the array value is released. */",
          "new_line_content": "                RM_FreeCallReply_Rec(reply->val.array+j,1);",
          "content_same": false
        },
        {
          "line": 2067,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(reply->val.array)",
          "old_line_content": "    if (!(reply->flags & REDISMODULE_REPLYFLAG_NESTED)) {",
          "new_line_content": "            zfree(reply->val.array);",
          "content_same": false
        },
        {
          "line": 1043,
          "old_api": null,
          "new_api": "lookupKeyRead",
          "old_text": null,
          "new_text": "lookupKeyRead(ctx->client->db,keyname)",
          "old_line_content": "    kp->ctx = ctx;",
          "new_line_content": "        value = lookupKeyRead(ctx->client->db,keyname);",
          "content_same": false
        },
        {
          "line": 1553,
          "old_api": null,
          "new_api": "zslFirstInLexRange",
          "old_text": null,
          "new_text": "zslFirstInLexRange(zsl,zlrs)",
          "old_line_content": "}",
          "new_line_content": "        key->zcurrent = first ? zslFirstInLexRange(zsl,zlrs) :",
          "content_same": false
        },
        {
          "line": 1554,
          "old_api": null,
          "new_api": "zslLastInLexRange",
          "old_text": null,
          "new_text": "zslLastInLexRange(zsl,zlrs)",
          "old_line_content": "",
          "new_line_content": "                                zslLastInLexRange(zsl,zlrs);",
          "content_same": false
        },
        {
          "line": 1556,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Unsupported zset encoding\")",
          "old_line_content": " * lexicographical range. Returns REDISMODULE_OK if the iterator was correctly",
          "new_line_content": "        serverPanic(\"Unsupported zset encoding\");",
          "content_same": false
        },
        {
          "line": 2076,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(reply->proto)",
          "old_line_content": "void RM_FreeCallReply(RedisModuleCallReply *reply) {",
          "new_line_content": "        if (reply->proto) sdsfree(reply->proto);",
          "content_same": false
        },
        {
          "line": 2588,
          "old_api": null,
          "new_api": "rdbSaveLen",
          "old_text": null,
          "new_text": "rdbSaveLen(io->rio, value)",
          "old_line_content": "/* Load an unsigned 64 bit value from the RDB file. This function should only",
          "new_line_content": "    int retval = rdbSaveLen(io->rio, value);",
          "content_same": false
        },
        {
          "line": 1054,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(keyname)",
          "old_line_content": "",
          "new_line_content": "    incrRefCount(keyname);",
          "content_same": false
        },
        {
          "line": 1059,
          "old_api": null,
          "new_api": "autoMemoryAdd",
          "old_text": null,
          "new_text": "autoMemoryAdd(ctx,REDISMODULE_AM_KEY,kp)",
          "old_line_content": "    /* TODO: if (key->iter) RM_KeyIteratorStop(kp); */",
          "new_line_content": "    autoMemoryAdd(ctx,REDISMODULE_AM_KEY,kp);",
          "content_same": false
        },
        {
          "line": 2085,
          "old_api": null,
          "new_api": "RM_FreeCallReply_Rec",
          "old_text": null,
          "new_text": "RM_FreeCallReply_Rec(reply,0)",
          "old_line_content": "",
          "new_line_content": "    RM_FreeCallReply_Rec(reply,0);",
          "content_same": false
        },
        {
          "line": 2086,
          "old_api": null,
          "new_api": "autoMemoryFreed",
          "old_text": null,
          "new_text": "autoMemoryFreed(reply->ctx,REDISMODULE_AM_REPLY,reply)",
          "old_line_content": "/* Return the reply type length, where applicable. */",
          "new_line_content": "    autoMemoryFreed(reply->ctx,REDISMODULE_AM_REPLY,reply);",
          "content_same": false
        },
        {
          "line": 1576,
          "old_api": null,
          "new_api": "zsetInitLexRange",
          "old_text": null,
          "new_text": "zsetInitLexRange(key,min,max,1)",
          "old_line_content": "",
          "new_line_content": "    return zsetInitLexRange(key,min,max,1);",
          "content_same": false
        },
        {
          "line": 2601,
          "old_api": null,
          "new_api": "rdbLoadLenByRef",
          "old_text": null,
          "new_text": "rdbLoadLenByRef(io->rio, NULL, &value)",
          "old_line_content": "/* Like RedisModule_SaveUnsigned() but for signed 64 bit values. */",
          "new_line_content": "    int retval = rdbLoadLenByRef(io->rio, NULL, &value);",
          "content_same": false
        },
        {
          "line": 1066,
          "old_api": null,
          "new_api": "signalModifiedKey",
          "old_text": null,
          "new_text": "signalModifiedKey(key->db,key->key)",
          "old_line_content": "/* Return the type of the key. If the key pointer is NULL then",
          "new_line_content": "    if (key->mode & REDISMODULE_WRITE) signalModifiedKey(key->db,key->key);",
          "content_same": false
        },
        {
          "line": 2603,
          "old_api": null,
          "new_api": "moduleRDBLoadError",
          "old_text": null,
          "new_text": "moduleRDBLoadError(io)",
          "old_line_content": "    union {uint64_t u; int64_t i;} conv;",
          "new_line_content": "        moduleRDBLoadError(io);",
          "content_same": false
        },
        {
          "line": 1068,
          "old_api": null,
          "new_api": "RM_ZsetRangeStop",
          "old_text": null,
          "new_text": "RM_ZsetRangeStop(key)",
          "old_line_content": "int RM_KeyType(RedisModuleKey *key) {",
          "new_line_content": "    RM_ZsetRangeStop(key);",
          "content_same": false
        },
        {
          "line": 1069,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(key->key)",
          "old_line_content": "    if (key == NULL || key->value ==  NULL) return REDISMODULE_KEYTYPE_EMPTY;",
          "new_line_content": "    decrRefCount(key->key);",
          "content_same": false
        },
        {
          "line": 1070,
          "old_api": null,
          "new_api": "autoMemoryFreed",
          "old_text": null,
          "new_text": "autoMemoryFreed(key->ctx,REDISMODULE_AM_KEY,key)",
          "old_line_content": "    /* We map between defines so that we are free to change the internal",
          "new_line_content": "    autoMemoryFreed(key->ctx,REDISMODULE_AM_KEY,key);",
          "content_same": false
        },
        {
          "line": 1071,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(key)",
          "old_line_content": "     * defines as desired. */",
          "new_line_content": "    zfree(key);",
          "content_same": false
        },
        {
          "line": 2096,
          "old_api": null,
          "new_api": "moduleParseCallReply",
          "old_text": null,
          "new_text": "moduleParseCallReply(reply)",
          "old_line_content": "    }",
          "new_line_content": "    moduleParseCallReply(reply);",
          "content_same": false
        },
        {
          "line": 1582,
          "old_api": null,
          "new_api": "zsetInitLexRange",
          "old_text": null,
          "new_text": "zsetInitLexRange(key,min,max,0)",
          "old_line_content": "",
          "new_line_content": "    return zsetInitLexRange(key,min,max,0);",
          "content_same": false
        },
        {
          "line": 2613,
          "old_api": null,
          "new_api": "RM_SaveUnsigned",
          "old_text": null,
          "new_text": "RM_SaveUnsigned(io,conv.u)",
          "old_line_content": "}",
          "new_line_content": "    RM_SaveUnsigned(io,conv.u);",
          "content_same": false
        },
        {
          "line": 2619,
          "old_api": null,
          "new_api": "RM_LoadUnsigned",
          "old_text": null,
          "new_text": "RM_LoadUnsigned(io)",
          "old_line_content": " * other Load family functions expecting a serialized string inside",
          "new_line_content": "    conv.u = RM_LoadUnsigned(io);",
          "content_same": false
        },
        {
          "line": 1595,
          "old_api": null,
          "new_api": "ziplistGetObject",
          "old_text": null,
          "new_text": "ziplistGetObject(eptr)",
          "old_line_content": "        if (score) *score = ln->score;",
          "new_line_content": "        sds ele = ziplistGetObject(eptr);",
          "content_same": false
        },
        {
          "line": 1597,
          "old_api": null,
          "new_api": "ziplistNext",
          "old_text": null,
          "new_text": "ziplistNext(key->value->ptr,eptr)",
          "old_line_content": "    } else {",
          "new_line_content": "            sptr = ziplistNext(key->value->ptr,eptr);",
          "content_same": false
        },
        {
          "line": 2047,
          "old_api": null,
          "new_api": "moduleParseCallReply",
          "old_text": null,
          "new_text": "moduleParseCallReply(ele)",
          "old_line_content": " * array. */",
          "new_line_content": "        moduleParseCallReply(ele);",
          "content_same": false
        },
        {
          "line": 3066,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(name)",
          "old_line_content": "}",
          "new_line_content": "            addReplyBulkCBuffer(c,name,sdslen(name));",
          "content_same": false
        },
        {
          "line": 1604,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(ln->ele)",
          "old_line_content": "/* Go to the next element of the sorted set iterator. Returns 1 if there was",
          "new_line_content": "        str = createStringObject(ln->ele,sdslen(ln->ele));",
          "content_same": false
        },
        {
          "line": 2118,
          "old_api": null,
          "new_api": "moduleParseCallReply",
          "old_text": null,
          "new_text": "moduleParseCallReply(reply)",
          "old_line_content": "    if (reply->type != REDISMODULE_REPLY_STRING &&",
          "new_line_content": "    moduleParseCallReply(reply);",
          "content_same": false
        },
        {
          "line": 2631,
          "old_api": null,
          "new_api": "rdbSaveStringObject",
          "old_text": null,
          "new_text": "rdbSaveStringObject(io->rio,s)",
          "old_line_content": "/* Like RedisModule_SaveString() but takes a raw C pointer and length",
          "new_line_content": "    int retval = rdbSaveStringObject(io->rio,s);",
          "content_same": false
        },
        {
          "line": 1606,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Unsupported zset encoding\")",
          "old_line_content": " * does not include any item at all. */",
          "new_line_content": "        serverPanic(\"Unsupported zset encoding\");",
          "content_same": false
        },
        {
          "line": 1608,
          "old_api": null,
          "new_api": "autoMemoryAdd",
          "old_text": null,
          "new_text": "autoMemoryAdd(key->ctx,REDISMODULE_AM_STRING,str)",
          "old_line_content": "    if (!key->ztype || !key->zcurrent) return 0; /* No active iterator. */",
          "new_line_content": "    autoMemoryAdd(key->ctx,REDISMODULE_AM_STRING,str);",
          "content_same": false
        },
        {
          "line": 1099,
          "old_api": null,
          "new_api": "stringObjectLen",
          "old_text": null,
          "new_text": "stringObjectLen(key->value)",
          "old_line_content": "",
          "new_line_content": "    case OBJ_STRING: return stringObjectLen(key->value);",
          "content_same": false
        },
        {
          "line": 1100,
          "old_api": null,
          "new_api": "listTypeLength",
          "old_text": null,
          "new_text": "listTypeLength(key->value)",
          "old_line_content": "/* If the key is open for writing, remove it, and setup the key to",
          "new_line_content": "    case OBJ_LIST: return listTypeLength(key->value);",
          "content_same": false
        },
        {
          "line": 2125,
          "old_api": null,
          "new_api": "moduleParseCallReply",
          "old_text": null,
          "new_text": "moduleParseCallReply(reply)",
          "old_line_content": " * integer. Otherwise (wrong reply type) return NULL. */",
          "new_line_content": "    moduleParseCallReply(reply);",
          "content_same": false
        },
        {
          "line": 1101,
          "old_api": null,
          "new_api": "setTypeSize",
          "old_text": null,
          "new_text": "setTypeSize(key->value)",
          "old_line_content": " * accept new writes as an empty key (that will be created on demand).",
          "new_line_content": "    case OBJ_SET: return setTypeSize(key->value);",
          "content_same": false
        },
        {
          "line": 1102,
          "old_api": null,
          "new_api": "zsetLength",
          "old_text": null,
          "new_text": "zsetLength(key->value)",
          "old_line_content": " * On success REDISMODULE_OK is returned. If the key is not open for",
          "new_line_content": "    case OBJ_ZSET: return zsetLength(key->value);",
          "content_same": false
        },
        {
          "line": 1103,
          "old_api": null,
          "new_api": "hashTypeLength",
          "old_text": null,
          "new_text": "hashTypeLength(key->value)",
          "old_line_content": " * writing REDISMODULE_ERR is returned. */",
          "new_line_content": "    case OBJ_HASH: return hashTypeLength(key->value);",
          "content_same": false
        },
        {
          "line": 2643,
          "old_api": null,
          "new_api": "rdbSaveRawString",
          "old_text": null,
          "new_text": "rdbSaveRawString(io->rio,(unsigned char*)str,len)",
          "old_line_content": "/* Implements RM_LoadString() and RM_LoadStringBuffer() */",
          "new_line_content": "    int retval = rdbSaveRawString(io->rio,(unsigned char*)str,len);",
          "content_same": false
        },
        {
          "line": 1622,
          "old_api": null,
          "new_api": "ziplistNext",
          "old_text": null,
          "new_text": "ziplistNext(zl,eptr)",
          "old_line_content": "                /* Fetch the next element score for the",
          "new_line_content": "        next = ziplistNext(zl,eptr); /* Skip element. */",
          "content_same": false
        },
        {
          "line": 1623,
          "old_api": null,
          "new_api": "ziplistNext",
          "old_text": null,
          "new_text": "ziplistNext(zl,next)",
          "old_line_content": "                 * range check. */",
          "new_line_content": "        if (next) next = ziplistNext(zl,next); /* Skip score. */",
          "content_same": false
        },
        {
          "line": 2139,
          "old_api": null,
          "new_api": "RM_CreateString",
          "old_text": null,
          "new_text": "RM_CreateString(reply->ctx,reply->val.str,reply->len)",
          "old_line_content": "}",
          "new_line_content": "        return RM_CreateString(reply->ctx,reply->val.str,reply->len);",
          "content_same": false
        },
        {
          "line": 1115,
          "old_api": null,
          "new_api": "dbDelete",
          "old_text": null,
          "new_text": "dbDelete(key->db,key->key)",
          "old_line_content": " * REDISMODULE_NO_EXPIRE is returned. */",
          "new_line_content": "        dbDelete(key->db,key->key);",
          "content_same": false
        },
        {
          "line": 2653,
          "old_api": null,
          "new_api": "rdbGenericLoadStringObject",
          "old_text": null,
          "new_text": "rdbGenericLoadStringObject(io->rio,\n              plain ? RDB_LOAD_PLAIN : RDB_LOAD_NONE, lenptr)",
          "old_line_content": "",
          "new_line_content": "    void *s = rdbGenericLoadStringObject(io->rio,",
          "content_same": false
        },
        {
          "line": 2142,
          "old_api": null,
          "new_api": "ll2string",
          "old_text": null,
          "new_text": "ll2string(buf,sizeof(buf),reply->val.ll)",
          "old_line_content": " * of items, by parsing the format specifier \"fmt\" as described for",
          "new_line_content": "        int len = ll2string(buf,sizeof(buf),reply->val.ll);",
          "content_same": false
        },
        {
          "line": 2143,
          "old_api": null,
          "new_api": "RM_CreateString",
          "old_text": null,
          "new_text": "RM_CreateString(reply->ctx,buf,len)",
          "old_line_content": " * the RM_Call(), RM_Replicate() and other module APIs.",
          "new_line_content": "        return RM_CreateString(reply->ctx,buf,len);",
          "content_same": false
        },
        {
          "line": 2656,
          "old_api": null,
          "new_api": "moduleRDBLoadError",
          "old_text": null,
          "new_text": "moduleRDBLoadError(io)",
          "old_line_content": " * functions family.",
          "new_line_content": "        moduleRDBLoadError(io);",
          "content_same": false
        },
        {
          "line": 1634,
          "old_api": null,
          "new_api": "zzlGetScore",
          "old_text": null,
          "new_text": "zzlGetScore(next)",
          "old_line_content": "                    key->zer = 1;",
          "new_line_content": "                double score = zzlGetScore(next); /* Obtain the next score. */",
          "content_same": false
        },
        {
          "line": 1635,
          "old_api": null,
          "new_api": "zslValueLteMax",
          "old_text": null,
          "new_text": "zslValueLteMax(score,&key->zrs)",
          "old_line_content": "                    return 0;",
          "new_line_content": "                if (!zslValueLteMax(score,&key->zrs)) {",
          "content_same": false
        },
        {
          "line": 1125,
          "old_api": null,
          "new_api": "getExpire",
          "old_text": null,
          "new_text": "getExpire(key->db,key->key)",
          "old_line_content": " * one (the same as the PERSIST command).",
          "new_line_content": "    mstime_t expire = getExpire(key->db,key->key);",
          "content_same": false
        },
        {
          "line": 1127,
          "old_api": null,
          "new_api": "mstime",
          "old_text": null,
          "new_text": "mstime()",
          "old_line_content": " * Note that the expire must be provided as a positive integer representing",
          "new_line_content": "    expire -= mstime();",
          "content_same": false
        },
        {
          "line": 1641,
          "old_api": null,
          "new_api": "zzlLexValueLteMax",
          "old_text": null,
          "new_text": "zzlLexValueLteMax(next,&key->zlrs)",
          "old_line_content": "    } else if (key->value->encoding == OBJ_ENCODING_SKIPLIST) {",
          "new_line_content": "                if (!zzlLexValueLteMax(next,&key->zlrs)) {",
          "content_same": false
        },
        {
          "line": 2672,
          "old_api": null,
          "new_api": "moduleLoadString",
          "old_text": null,
          "new_text": "moduleLoadString(io,0,NULL)",
          "old_line_content": " * The returned string is not automatically NULL termianted, it is loaded",
          "new_line_content": "    return moduleLoadString(io,0,NULL);",
          "content_same": false
        },
        {
          "line": 1144,
          "old_api": null,
          "new_api": "mstime",
          "old_text": null,
          "new_text": "mstime()",
          "old_line_content": "/* --------------------------------------------------------------------------",
          "new_line_content": "        expire += mstime();",
          "content_same": false
        },
        {
          "line": 2169,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(fmt)",
          "old_line_content": "    const char *p = fmt;",
          "new_line_content": "    argv_size = strlen(fmt)+1; /* +1 because of the command name. */",
          "content_same": false
        },
        {
          "line": 2170,
          "old_api": null,
          "new_api": "zrealloc",
          "old_text": null,
          "new_text": "zrealloc(argv,sizeof(robj*)*argv_size)",
          "old_line_content": "    while(*p) {",
          "new_line_content": "    argv = zrealloc(argv,sizeof(robj*)*argv_size);",
          "content_same": false
        },
        {
          "line": 1145,
          "old_api": null,
          "new_api": "setExpire",
          "old_text": null,
          "new_text": "setExpire(key->db,key->key,expire)",
          "old_line_content": " * Key API for String type",
          "new_line_content": "        setExpire(key->db,key->key,expire);",
          "content_same": false
        },
        {
          "line": 1147,
          "old_api": null,
          "new_api": "removeExpire",
          "old_text": null,
          "new_text": "removeExpire(key->db,key->key)",
          "old_line_content": "",
          "new_line_content": "        removeExpire(key->db,key->key);",
          "content_same": false
        },
        {
          "line": 1657,
          "old_api": null,
          "new_api": "zslValueLteMax",
          "old_text": null,
          "new_text": "zslValueLteMax(ln->score,&key->zrs)",
          "old_line_content": "                }",
          "new_line_content": "                !zslValueLteMax(ln->score,&key->zrs))",
          "content_same": false
        },
        {
          "line": 1662,
          "old_api": null,
          "new_api": "zslLexValueLteMax",
          "old_text": null,
          "new_text": "zslLexValueLteMax(ln->ele,&key->zlrs)",
          "old_line_content": "    } else {",
          "new_line_content": "                if (!zslLexValueLteMax(ln->ele,&key->zlrs)) {",
          "content_same": false
        },
        {
          "line": 2691,
          "old_api": null,
          "new_api": "rdbSaveBinaryDoubleValue",
          "old_text": null,
          "new_text": "rdbSaveBinaryDoubleValue(io->rio, value)",
          "old_line_content": "/* In the context of the rdb_save method of a module data type, loads back the",
          "new_line_content": "    int retval = rdbSaveBinaryDoubleValue(io->rio, value);",
          "content_same": false
        },
        {
          "line": 645,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(ptr)",
          "old_line_content": "    ctx->amqueue_len = 0;",
          "new_line_content": "        case REDISMODULE_AM_STRING: decrRefCount(ptr); break;",
          "content_same": false
        },
        {
          "line": 646,
          "old_api": null,
          "new_api": "RM_FreeCallReply",
          "old_text": null,
          "new_text": "RM_FreeCallReply(ptr)",
          "old_line_content": "    ctx->amqueue_used = 0;",
          "new_line_content": "        case REDISMODULE_AM_REPLY: RM_FreeCallReply(ptr); break;",
          "content_same": false
        },
        {
          "line": 647,
          "old_api": null,
          "new_api": "RM_CloseKey",
          "old_text": null,
          "new_text": "RM_CloseKey(ptr)",
          "old_line_content": "}",
          "new_line_content": "        case REDISMODULE_AM_KEY: RM_CloseKey(ptr); break;",
          "content_same": false
        },
        {
          "line": 1671,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Unsupported zset encoding\")",
          "old_line_content": "    if (!key->ztype || !key->zcurrent) return 0; /* No active iterator. */",
          "new_line_content": "        serverPanic(\"Unsupported zset encoding\");",
          "content_same": false
        },
        {
          "line": 2185,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(obj)",
          "old_line_content": "        } else if (*p == 'v') {",
          "new_line_content": "            incrRefCount(obj);",
          "content_same": false
        },
        {
          "line": 1162,
          "old_api": null,
          "new_api": "RM_DeleteKey",
          "old_text": null,
          "new_text": "RM_DeleteKey(key)",
          "old_line_content": " * modify the string in-place accessing it directly via pointer.",
          "new_line_content": "    RM_DeleteKey(key);",
          "content_same": false
        },
        {
          "line": 651,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(ctx->amqueue)",
          "old_line_content": " * -------------------------------------------------------------------------- */",
          "new_line_content": "    zfree(ctx->amqueue);",
          "content_same": false
        },
        {
          "line": 1163,
          "old_api": null,
          "new_api": "setKey",
          "old_text": null,
          "new_text": "setKey(key->db,key->key,str)",
          "old_line_content": " *",
          "new_line_content": "    setKey(key->db,key->key,str);",
          "content_same": false
        },
        {
          "line": 2189,
          "old_api": null,
          "new_api": "createStringObject",
          "old_text": null,
          "new_text": "createStringObject(buf,len)",
          "old_line_content": "",
          "new_line_content": "            argv[argc++] = createStringObject(buf,len);",
          "content_same": false
        },
        {
          "line": 2191,
          "old_api": null,
          "new_api": "va_arg",
          "old_text": null,
          "new_text": "va_arg(ap,long long)",
          "old_line_content": "              * We resize by vector_len-1 elements, because we held",
          "new_line_content": "            long ll = va_arg(ap,long long);",
          "content_same": false
        },
        {
          "line": 2192,
          "old_api": null,
          "new_api": "createStringObjectFromLongLong",
          "old_text": null,
          "new_text": "createStringObjectFromLongLong(ll)",
          "old_line_content": "              * one element in argv for the vector already */",
          "new_line_content": "            argv[argc++] = createStringObjectFromLongLong(ll);",
          "content_same": false
        },
        {
          "line": 2703,
          "old_api": null,
          "new_api": "rdbLoadBinaryDoubleValue",
          "old_text": null,
          "new_text": "rdbLoadBinaryDoubleValue(io->rio, &value)",
          "old_line_content": "/* --------------------------------------------------------------------------",
          "new_line_content": "    int retval = rdbLoadBinaryDoubleValue(io->rio, &value);",
          "content_same": false
        },
        {
          "line": 2705,
          "old_api": null,
          "new_api": "moduleRDBLoadError",
          "old_text": null,
          "new_text": "moduleRDBLoadError(io)",
          "old_line_content": " * -------------------------------------------------------------------------- */",
          "new_line_content": "        moduleRDBLoadError(io);",
          "content_same": false
        },
        {
          "line": 2195,
          "old_api": null,
          "new_api": "va_arg",
          "old_text": null,
          "new_text": "va_arg(ap, void*)",
          "old_line_content": "",
          "new_line_content": "             robj **v = va_arg(ap, void*);",
          "content_same": false
        },
        {
          "line": 2196,
          "old_api": null,
          "new_api": "va_arg",
          "old_text": null,
          "new_text": "va_arg(ap, size_t)",
          "old_line_content": "             size_t i = 0;",
          "new_line_content": "             size_t vlen = va_arg(ap, size_t);",
          "content_same": false
        },
        {
          "line": 1685,
          "old_api": null,
          "new_api": "ziplistPrev",
          "old_text": null,
          "new_text": "ziplistPrev(zl,eptr)",
          "old_line_content": "                /* Fetch the previous element score for the",
          "new_line_content": "        prev = ziplistPrev(zl,eptr); /* Go back to previous score. */",
          "content_same": false
        },
        {
          "line": 1686,
          "old_api": null,
          "new_api": "ziplistPrev",
          "old_text": null,
          "new_text": "ziplistPrev(zl,prev)",
          "old_line_content": "                 * range check. */",
          "new_line_content": "        if (prev) prev = ziplistPrev(zl,prev); /* Back to previous ele. */",
          "content_same": false
        },
        {
          "line": 2202,
          "old_api": null,
          "new_api": "zrealloc",
          "old_text": null,
          "new_text": "zrealloc(argv,sizeof(robj*)*argv_size)",
          "old_line_content": "            if (flags) (*flags) |= REDISMODULE_ARGV_REPLICATE;",
          "new_line_content": "             argv = zrealloc(argv,sizeof(robj*)*argv_size);",
          "content_same": false
        },
        {
          "line": 668,
          "old_api": null,
          "new_api": "createStringObject",
          "old_text": null,
          "new_text": "createStringObject(ptr,len)",
          "old_line_content": " * The returned string must be released with RedisModule_FreeString() or by",
          "new_line_content": "    RedisModuleString *o = createStringObject(ptr,len);",
          "content_same": false
        },
        {
          "line": 669,
          "old_api": null,
          "new_api": "autoMemoryAdd",
          "old_text": null,
          "new_text": "autoMemoryAdd(ctx,REDISMODULE_AM_STRING,o)",
          "old_line_content": " * enabling automatic memory management. */",
          "new_line_content": "    autoMemoryAdd(ctx,REDISMODULE_AM_STRING,o);",
          "content_same": false
        },
        {
          "line": 2206,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(v[i])",
          "old_line_content": "        p++;",
          "new_line_content": "                 incrRefCount(v[i]);",
          "content_same": false
        },
        {
          "line": 1697,
          "old_api": null,
          "new_api": "zzlGetScore",
          "old_text": null,
          "new_text": "zzlGetScore(prev)",
          "old_line_content": "                    key->zer = 1;",
          "new_line_content": "                double score = zzlGetScore(prev); /* Obtain the prev score. */",
          "content_same": false
        },
        {
          "line": 1698,
          "old_api": null,
          "new_api": "zslValueGteMin",
          "old_text": null,
          "new_text": "zslValueGteMin(score,&key->zrs)",
          "old_line_content": "                    return 0;",
          "new_line_content": "                if (!zslValueGteMin(score,&key->zrs)) {",
          "content_same": false
        },
        {
          "line": 2727,
          "old_api": null,
          "new_api": "lookupCommandByCString",
          "old_text": null,
          "new_text": "lookupCommandByCString((char*)cmdname)",
          "old_line_content": "        return;",
          "new_line_content": "    cmd = lookupCommandByCString((char*)cmdname);",
          "content_same": false
        },
        {
          "line": 680,
          "old_api": null,
          "new_api": "ll2string",
          "old_text": null,
          "new_text": "ll2string(buf,sizeof(buf),ll)",
          "old_line_content": " * is enabled. In that case the string will be released ASAP and removed",
          "new_line_content": "    size_t len = ll2string(buf,sizeof(buf),ll);",
          "content_same": false
        },
        {
          "line": 681,
          "old_api": null,
          "new_api": "RM_CreateString",
          "old_text": null,
          "new_text": "RM_CreateString(ctx,buf,len)",
          "old_line_content": " * from the pool of string to release at the end. */",
          "new_line_content": "    return RM_CreateString(ctx,buf,len);",
          "content_same": false
        },
        {
          "line": 2729,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\n            \"Fatal: AOF method for module data type '%s' tried to \"\n            \"emit unknown command '%s'\",\n            io->type->name, cmdname)",
          "old_line_content": "",
          "new_line_content": "        serverLog(LL_WARNING,",
          "content_same": false
        },
        {
          "line": 1704,
          "old_api": null,
          "new_api": "zzlLexValueGteMin",
          "old_text": null,
          "new_text": "zzlLexValueGteMin(prev,&key->zlrs)",
          "old_line_content": "    } else if (key->value->encoding == OBJ_ENCODING_SKIPLIST) {",
          "new_line_content": "                if (!zzlLexValueGteMin(prev,&key->zlrs)) {",
          "content_same": false
        },
        {
          "line": 2221,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(argv[j])",
          "old_line_content": " *",
          "new_line_content": "        decrRefCount(argv[j]);",
          "content_same": false
        },
        {
          "line": 2222,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(argv)",
          "old_line_content": " * EINVAL: command non existing, wrong arity, wrong format specifier.",
          "new_line_content": "    zfree(argv);",
          "content_same": false
        },
        {
          "line": 2739,
          "old_api": null,
          "new_api": "va_start",
          "old_text": null,
          "new_text": "va_start(ap, fmt)",
          "old_line_content": "        io->error = 1;",
          "new_line_content": "    va_start(ap, fmt);",
          "content_same": false
        },
        {
          "line": 692,
          "old_api": null,
          "new_api": "autoMemoryFreed",
          "old_text": null,
          "new_text": "autoMemoryFreed(ctx,REDISMODULE_AM_STRING,str)",
          "old_line_content": "    return str->ptr;",
          "new_line_content": "    autoMemoryFreed(ctx,REDISMODULE_AM_STRING,str);",
          "content_same": false
        },
        {
          "line": 2740,
          "old_api": null,
          "new_api": "moduleCreateArgvFromUserFormat",
          "old_text": null,
          "new_text": "moduleCreateArgvFromUserFormat(cmdname,fmt,&argc,&flags,ap)",
          "old_line_content": "        errno = EINVAL;",
          "new_line_content": "    argv = moduleCreateArgvFromUserFormat(cmdname,fmt,&argc,&flags,ap);",
          "content_same": false
        },
        {
          "line": 2741,
          "old_api": null,
          "new_api": "va_end",
          "old_text": null,
          "new_text": "va_end(ap)",
          "old_line_content": "        return;",
          "new_line_content": "    va_end(ap);",
          "content_same": false
        },
        {
          "line": 2743,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\n            \"Fatal: AOF method for module data type '%s' tried to \"\n            \"call RedisModule_EmitAOF() with wrong format specifiers '%s'\",\n            io->type->name, fmt)",
          "old_line_content": "",
          "new_line_content": "        serverLog(LL_WARNING,",
          "content_same": false
        },
        {
          "line": 1720,
          "old_api": null,
          "new_api": "zslValueGteMin",
          "old_text": null,
          "new_text": "zslValueGteMin(ln->score,&key->zrs)",
          "old_line_content": "                }",
          "new_line_content": "                !zslValueGteMin(ln->score,&key->zrs))",
          "content_same": false
        },
        {
          "line": 699,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(str->ptr)",
          "old_line_content": "int RM_StringToLongLong(RedisModuleString *str, long long *ll) {",
          "new_line_content": "    if (len) *len = sdslen(str->ptr);",
          "content_same": false
        },
        {
          "line": 1213,
          "old_api": null,
          "new_api": "dbUnshareStringValue",
          "old_text": null,
          "new_text": "dbUnshareStringValue(key->db, key->key, key->value)",
          "old_line_content": " *",
          "new_line_content": "        key->value = dbUnshareStringValue(key->db, key->key, key->value);",
          "content_same": false
        },
        {
          "line": 1725,
          "old_api": null,
          "new_api": "zslLexValueGteMin",
          "old_text": null,
          "new_text": "zslLexValueGteMin(prev->ele,&key->zlrs)",
          "old_line_content": "    } else {",
          "new_line_content": "                if (!zslLexValueGteMin(prev->ele,&key->zlrs)) {",
          "content_same": false
        },
        {
          "line": 1215,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(key->value->ptr)",
          "old_line_content": " * DMA access with the new pointer.",
          "new_line_content": "    *len = sdslen(key->value->ptr);",
          "content_same": false
        },
        {
          "line": 2753,
          "old_api": null,
          "new_api": "rioWriteBulkCount",
          "old_text": null,
          "new_text": "rioWriteBulkCount(io->rio,'*',argc)",
          "old_line_content": "    }",
          "new_line_content": "    if (!io->error && rioWriteBulkCount(io->rio,'*',argc) == 0)",
          "content_same": false
        },
        {
          "line": 2758,
          "old_api": null,
          "new_api": "rioWriteBulkObject",
          "old_text": null,
          "new_text": "rioWriteBulkObject(io->rio,argv[j])",
          "old_line_content": "/* --------------------------------------------------------------------------",
          "new_line_content": "        if (!io->error && rioWriteBulkObject(io->rio,argv[j]) == 0)",
          "content_same": false
        },
        {
          "line": 1734,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Unsupported zset encoding\")",
          "old_line_content": "/* Set the field of the specified hash field to the specified value.",
          "new_line_content": "        serverPanic(\"Unsupported zset encoding\");",
          "content_same": false
        },
        {
          "line": 2248,
          "old_api": null,
          "new_api": "va_start",
          "old_text": null,
          "new_text": "va_start(ap, fmt)",
          "old_line_content": "    c->argv = argv;",
          "new_line_content": "    va_start(ap, fmt);",
          "content_same": false
        },
        {
          "line": 2249,
          "old_api": null,
          "new_api": "createClient",
          "old_text": null,
          "new_text": "createClient(-1)",
          "old_line_content": "    c->argc = argc;",
          "new_line_content": "    c = createClient(-1);",
          "content_same": false
        },
        {
          "line": 2250,
          "old_api": null,
          "new_api": "moduleCreateArgvFromUserFormat",
          "old_text": null,
          "new_text": "moduleCreateArgvFromUserFormat(cmdname,fmt,&argc,&flags,ap)",
          "old_line_content": "    c->cmd = c->lastcmd = cmd;",
          "new_line_content": "    argv = moduleCreateArgvFromUserFormat(cmdname,fmt,&argc,&flags,ap);",
          "content_same": false
        },
        {
          "line": 2760,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(argv[j])",
          "old_line_content": " * -------------------------------------------------------------------------- */",
          "new_line_content": "        decrRefCount(argv[j]);",
          "content_same": false
        },
        {
          "line": 2252,
          "old_api": null,
          "new_api": "va_end",
          "old_text": null,
          "new_text": "va_end(ap)",
          "old_line_content": "     * we can free it normally. */",
          "new_line_content": "    va_end(ap);",
          "content_same": false
        },
        {
          "line": 2762,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(argv)",
          "old_line_content": "/* server.moduleapi dictionary type. Only uses plain C strings since",
          "new_line_content": "    zfree(argv);",
          "content_same": false
        },
        {
          "line": 716,
          "old_api": null,
          "new_api": "getDoubleFromObject",
          "old_text": null,
          "new_text": "getDoubleFromObject(str,d)",
          "old_line_content": " * 'return' in order to return from the command implementation with:",
          "new_line_content": "    int retval = getDoubleFromObject(str,d);",
          "content_same": false
        },
        {
          "line": 2774,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen((char*)key)",
          "old_line_content": "dictType moduleAPIDictType = {",
          "new_line_content": "    return dictGenHashFunction((unsigned char*)key, strlen((char*)key));",
          "content_same": false
        },
        {
          "line": 2778,
          "old_api": null,
          "new_api": "DICT_NOTUSED",
          "old_text": null,
          "new_text": "DICT_NOTUSED(privdata)",
          "old_line_content": "    dictCStringKeyCompare,     /* key compare */",
          "new_line_content": "    DICT_NOTUSED(privdata);",
          "content_same": false
        },
        {
          "line": 2779,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(key1,key2)",
          "old_line_content": "    NULL,                      /* key destructor */",
          "new_line_content": "    return strcmp(key1,key2) == 0;",
          "content_same": false
        },
        {
          "line": 1242,
          "old_api": null,
          "new_api": "sdsnewlen",
          "old_text": null,
          "new_text": "sdsnewlen(NULL, newlen)",
          "old_line_content": "        if (newlen > curlen) {",
          "new_line_content": "        robj *o = createObject(OBJ_STRING,sdsnewlen(NULL, newlen));",
          "content_same": false
        },
        {
          "line": 1249,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(key->value->ptr)",
          "old_line_content": "        }",
          "new_line_content": "        size_t curlen = sdslen(key->value->ptr);",
          "content_same": false
        },
        {
          "line": 738,
          "old_api": null,
          "new_api": "addReplyErrorFormat",
          "old_text": null,
          "new_text": "addReplyErrorFormat(ctx->client,\n        \"wrong number of arguments for '%s' command\",\n        (char*)ctx->client->argv[0]->ptr)",
          "old_line_content": "int RM_ReplyWithLongLong(RedisModuleCtx *ctx, long long ll) {",
          "new_line_content": "    addReplyErrorFormat(ctx->client,",
          "content_same": false
        },
        {
          "line": 1251,
          "old_api": null,
          "new_api": "sdsgrowzero",
          "old_text": null,
          "new_text": "sdsgrowzero(key->value->ptr,newlen)",
          "old_line_content": "    return REDISMODULE_OK;",
          "new_line_content": "            key->value->ptr = sdsgrowzero(key->value->ptr,newlen);",
          "content_same": false
        },
        {
          "line": 2276,
          "old_api": null,
          "new_api": "getNodeByQuery",
          "old_text": null,
          "new_text": "getNodeByQuery(c,c->cmd,c->argv,c->argc,NULL,NULL)",
          "old_line_content": "    /* If we are using single commands replication, we need to wrap what",
          "new_line_content": "        if (getNodeByQuery(c,c->cmd,c->argv,c->argc,NULL,NULL) !=",
          "content_same": false
        },
        {
          "line": 1253,
          "old_api": null,
          "new_api": "sdsrange",
          "old_text": null,
          "new_text": "sdsrange(key->value->ptr,0,newlen-1)",
          "old_line_content": "",
          "new_line_content": "            sdsrange(key->value->ptr,0,newlen-1);",
          "content_same": false
        },
        {
          "line": 1255,
          "old_api": null,
          "new_api": "sdsavail",
          "old_text": null,
          "new_text": "sdsavail(key->value->ptr)",
          "old_line_content": " * Key API for List type",
          "new_line_content": "            if (sdslen(key->value->ptr) < sdsavail(key->value->ptr))",
          "content_same": false
        },
        {
          "line": 1256,
          "old_api": null,
          "new_api": "sdsRemoveFreeSpace",
          "old_text": null,
          "new_text": "sdsRemoveFreeSpace(key->value->ptr)",
          "old_line_content": " * -------------------------------------------------------------------------- */",
          "new_line_content": "                key->value->ptr = sdsRemoveFreeSpace(key->value->ptr);",
          "content_same": false
        },
        {
          "line": 755,
          "old_api": null,
          "new_api": "sdsnewlen",
          "old_text": null,
          "new_text": "sdsnewlen(prefix,1)",
          "old_line_content": " *",
          "new_line_content": "    sds strmsg = sdsnewlen(prefix,1);",
          "content_same": false
        },
        {
          "line": 756,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(strmsg,msg)",
          "old_line_content": " * Note that 'err' must contain all the error, including",
          "new_line_content": "    strmsg = sdscat(strmsg,msg);",
          "content_same": false
        },
        {
          "line": 757,
          "old_api": null,
          "new_api": "sdscatlen",
          "old_text": null,
          "new_text": "sdscatlen(strmsg,\"\\r\\n\",2)",
          "old_line_content": " * the initial error code. The function only provides the initial \"-\", so",
          "new_line_content": "    strmsg = sdscatlen(strmsg,\"\\r\\n\",2);",
          "content_same": false
        },
        {
          "line": 758,
          "old_api": null,
          "new_api": "addReplySds",
          "old_text": null,
          "new_text": "addReplySds(ctx->client,strmsg)",
          "old_line_content": " * the usage is, for example:",
          "new_line_content": "    addReplySds(ctx->client,strmsg);",
          "content_same": false
        },
        {
          "line": 1273,
          "old_api": null,
          "new_api": "moduleCreateEmptyKey",
          "old_text": null,
          "new_text": "moduleCreateEmptyKey(key,REDISMODULE_KEYTYPE_LIST)",
          "old_line_content": " * automatic memory. 'where' specifies if the element should be popped from",
          "new_line_content": "    if (key->value == NULL) moduleCreateEmptyKey(key,REDISMODULE_KEYTYPE_LIST);",
          "content_same": false
        },
        {
          "line": 1274,
          "old_api": null,
          "new_api": "listTypePush",
          "old_text": null,
          "new_text": "listTypePush(key->value, ele,\n        (where == REDISMODULE_LIST_HEAD) ? QUICKLIST_HEAD : QUICKLIST_TAIL)",
          "old_line_content": " * head or tail. The command returns NULL if:",
          "new_line_content": "    listTypePush(key->value, ele,",
          "content_same": false
        },
        {
          "line": 2302,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(c->reply)",
          "old_line_content": "",
          "new_line_content": "    while(listLength(c->reply)) {",
          "content_same": false
        },
        {
          "line": 2303,
          "old_api": null,
          "new_api": "listFirst",
          "old_text": null,
          "new_text": "listFirst(c->reply)",
          "old_line_content": "cleanup:",
          "new_line_content": "        sds o = listNodeValue(listFirst(c->reply));",
          "content_same": false
        },
        {
          "line": 2305,
          "old_api": null,
          "new_api": "sdscatsds",
          "old_text": null,
          "new_text": "sdscatsds(proto,o)",
          "old_line_content": "    return reply;",
          "new_line_content": "        proto = sdscatsds(proto,o);",
          "content_same": false
        },
        {
          "line": 2306,
          "old_api": null,
          "new_api": "listFirst",
          "old_text": null,
          "new_text": "listFirst(c->reply)",
          "old_line_content": "}",
          "new_line_content": "        listDelNode(c->reply,listFirst(c->reply));",
          "content_same": false
        },
        {
          "line": 2308,
          "old_api": null,
          "new_api": "moduleCreateCallReplyFromProto",
          "old_text": null,
          "new_text": "moduleCreateCallReplyFromProto(ctx,proto)",
          "old_line_content": "/* Return a pointer, and a length, to the protocol returned by the command",
          "new_line_content": "    reply = moduleCreateCallReplyFromProto(ctx,proto);",
          "content_same": false
        },
        {
          "line": 2309,
          "old_api": null,
          "new_api": "autoMemoryAdd",
          "old_text": null,
          "new_text": "autoMemoryAdd(ctx,REDISMODULE_AM_REPLY,reply)",
          "old_line_content": " * that returned the reply object. */",
          "new_line_content": "    autoMemoryAdd(ctx,REDISMODULE_AM_REPLY,reply);",
          "content_same": false
        },
        {
          "line": 1799,
          "old_api": null,
          "new_api": "va_start",
          "old_text": null,
          "new_text": "va_start(ap, flags)",
          "old_line_content": "        } else {",
          "new_line_content": "    va_start(ap, flags);",
          "content_same": false
        },
        {
          "line": 2312,
          "old_api": null,
          "new_api": "freeClient",
          "old_text": null,
          "new_text": "freeClient(c)",
          "old_line_content": "    return reply->proto;",
          "new_line_content": "    freeClient(c);",
          "content_same": false
        },
        {
          "line": 777,
          "old_api": null,
          "new_api": "replyWithStatus",
          "old_text": null,
          "new_text": "replyWithStatus(ctx,err,\"-\")",
          "old_line_content": "int RM_ReplyWithSimpleString(RedisModuleCtx *ctx, const char *msg) {",
          "new_line_content": "    return replyWithStatus(ctx,err,\"-\");",
          "content_same": false
        },
        {
          "line": 1290,
          "old_api": null,
          "new_api": "listTypePop",
          "old_text": null,
          "new_text": "listTypePop(key->value,\n        (where == REDISMODULE_LIST_HEAD) ? QUICKLIST_HEAD : QUICKLIST_TAIL)",
          "old_line_content": "",
          "new_line_content": "    robj *ele = listTypePop(key->value,",
          "content_same": false
        },
        {
          "line": 1292,
          "old_api": null,
          "new_api": "getDecodedObject",
          "old_text": null,
          "new_text": "getDecodedObject(ele)",
          "old_line_content": " * Key API for Sorted Set type",
          "new_line_content": "    robj *decoded = getDecodedObject(ele);",
          "content_same": false
        },
        {
          "line": 1293,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(ele)",
          "old_line_content": " * -------------------------------------------------------------------------- */",
          "new_line_content": "    decrRefCount(ele);",
          "content_same": false
        },
        {
          "line": 1294,
          "old_api": null,
          "new_api": "moduleDelKeyIfEmpty",
          "old_text": null,
          "new_text": "moduleDelKeyIfEmpty(key)",
          "old_line_content": "",
          "new_line_content": "    moduleDelKeyIfEmpty(key);",
          "content_same": false
        },
        {
          "line": 2319,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(reply->proto)",
          "old_line_content": " * possible to create new data types from scratch and export them to",
          "new_line_content": "    if (reply->proto) *len = sdslen(reply->proto);",
          "content_same": false
        },
        {
          "line": 1295,
          "old_api": null,
          "new_api": "autoMemoryAdd",
          "old_text": null,
          "new_text": "autoMemoryAdd(key->ctx,REDISMODULE_AM_STRING,decoded)",
          "old_line_content": "/* Conversion from/to public flags of the Modules API and our private flags,",
          "new_line_content": "    autoMemoryAdd(key->ctx,REDISMODULE_AM_STRING,decoded);",
          "content_same": false
        },
        {
          "line": 1804,
          "old_api": null,
          "new_api": "va_arg",
          "old_text": null,
          "new_text": "va_arg(ap,char*)",
          "old_line_content": "",
          "new_line_content": "            char *cfield = va_arg(ap,char*);",
          "content_same": false
        },
        {
          "line": 786,
          "old_api": null,
          "new_api": "replyWithStatus",
          "old_text": null,
          "new_text": "replyWithStatus(ctx,msg,\"+\")",
          "old_line_content": " * the function can be called with the special count",
          "new_line_content": "    return replyWithStatus(ctx,msg,\"+\");",
          "content_same": false
        },
        {
          "line": 1806,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(cfield)",
          "old_line_content": "        if (flags & (REDISMODULE_HASH_XX|REDISMODULE_HASH_NX)) {",
          "new_line_content": "            field = createRawStringObject(cfield,strlen(cfield));",
          "content_same": false
        },
        {
          "line": 1808,
          "old_api": null,
          "new_api": "va_arg",
          "old_text": null,
          "new_text": "va_arg(ap,RedisModuleString*)",
          "old_line_content": "            if (((flags & REDISMODULE_HASH_XX) && !exists) ||",
          "new_line_content": "            field = va_arg(ap,RedisModuleString*);",
          "content_same": false
        },
        {
          "line": 1815,
          "old_api": null,
          "new_api": "hashTypeExists",
          "old_text": null,
          "new_text": "hashTypeExists(key->value, field->ptr)",
          "old_line_content": "",
          "new_line_content": "            int exists = hashTypeExists(key->value, field->ptr);",
          "content_same": false
        },
        {
          "line": 802,
          "old_api": null,
          "new_api": "zrealloc",
          "old_text": null,
          "new_text": "zrealloc(ctx->postponed_arrays,sizeof(void*)*\n                (ctx->postponed_arrays_count+1))",
          "old_line_content": "    return REDISMODULE_OK;",
          "new_line_content": "        ctx->postponed_arrays = zrealloc(ctx->postponed_arrays,sizeof(void*)*",
          "content_same": false
        },
        {
          "line": 1826,
          "old_api": null,
          "new_api": "hashTypeDelete",
          "old_text": null,
          "new_text": "hashTypeDelete(key->value, field->ptr)",
          "old_line_content": "         * to avoid a useless copy. */",
          "new_line_content": "            updated += hashTypeDelete(key->value, field->ptr);",
          "content_same": false
        },
        {
          "line": 1827,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(field)",
          "old_line_content": "        if (flags & REDISMODULE_HASH_CFIELDS)",
          "new_line_content": "            if (flags & REDISMODULE_HASH_CFIELDS) decrRefCount(field);",
          "content_same": false
        },
        {
          "line": 805,
          "old_api": null,
          "new_api": "addDeferredMultiBulkLength",
          "old_text": null,
          "new_text": "addDeferredMultiBulkLength(ctx->client)",
          "old_line_content": "/* When RedisModule_ReplyWithArray() is used with the argument",
          "new_line_content": "            addDeferredMultiBulkLength(ctx->client);",
          "content_same": false
        },
        {
          "line": 808,
          "old_api": null,
          "new_api": "addReplyMultiBulkLen",
          "old_text": null,
          "new_text": "addReplyMultiBulkLen(ctx->client,len)",
          "old_line_content": " * will take care to set the array length.",
          "new_line_content": "        addReplyMultiBulkLen(ctx->client,len);",
          "content_same": false
        },
        {
          "line": 1837,
          "old_api": null,
          "new_api": "hashTypeSet",
          "old_text": null,
          "new_text": "hashTypeSet(key->value, field->ptr, value->ptr, low_flags)",
          "old_line_content": "    }",
          "new_line_content": "        updated += hashTypeSet(key->value, field->ptr, value->ptr, low_flags);",
          "content_same": false
        },
        {
          "line": 1843,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(field)",
          "old_line_content": "/* Get fields from an hash value. This function is called using a variable",
          "new_line_content": "           decrRefCount(field);",
          "content_same": false
        },
        {
          "line": 1846,
          "old_api": null,
          "new_api": "va_end",
          "old_text": null,
          "new_text": "va_end(ap)",
          "old_line_content": " * value of the field if the field exist, or NULL if the field did not exist.",
          "new_line_content": "    va_end(ap);",
          "content_same": false
        },
        {
          "line": 1847,
          "old_api": null,
          "new_api": "moduleDelKeyIfEmpty",
          "old_text": null,
          "new_text": "moduleDelKeyIfEmpty(key)",
          "old_line_content": " * At the end of the field/value-ptr pairs, NULL must be specified as last",
          "new_line_content": "    moduleDelKeyIfEmpty(key);",
          "content_same": false
        },
        {
          "line": 2876,
          "old_api": null,
          "new_api": "REGISTER_API",
          "old_text": null,
          "new_text": "REGISTER_API(LoadSigned)",
          "old_line_content": "}",
          "new_line_content": "    REGISTER_API(LoadSigned);",
          "content_same": false
        },
        {
          "line": 2365,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(name)",
          "old_line_content": "        id = (id << 6) | pos;",
          "new_line_content": "    if (strlen(name) != 9) return 0;",
          "content_same": false
        },
        {
          "line": 2877,
          "old_api": null,
          "new_api": "REGISTER_API",
          "old_text": null,
          "new_text": "REGISTER_API(SaveString)",
          "old_line_content": "",
          "new_line_content": "    REGISTER_API(SaveString);",
          "content_same": false
        },
        {
          "line": 2878,
          "old_api": null,
          "new_api": "REGISTER_API",
          "old_text": null,
          "new_text": "REGISTER_API(SaveStringBuffer)",
          "old_line_content": "/* Global initialization at Redis startup. */",
          "new_line_content": "    REGISTER_API(SaveStringBuffer);",
          "content_same": false
        },
        {
          "line": 2879,
          "old_api": null,
          "new_api": "REGISTER_API",
          "old_text": null,
          "new_text": "REGISTER_API(LoadString)",
          "old_line_content": "void moduleInitModulesSystem(void) {",
          "new_line_content": "    REGISTER_API(LoadString);",
          "content_same": false
        },
        {
          "line": 2370,
          "old_api": null,
          "new_api": "strchr",
          "old_text": null,
          "new_text": "strchr(cset,name[j])",
          "old_line_content": "",
          "new_line_content": "        char *p = strchr(cset,name[j]);",
          "content_same": false
        },
        {
          "line": 2883,
          "old_api": null,
          "new_api": "REGISTER_API",
          "old_text": null,
          "new_text": "REGISTER_API(EmitAOF)",
          "old_line_content": "}",
          "new_line_content": "    REGISTER_API(EmitAOF);",
          "content_same": false
        },
        {
          "line": 2888,
          "old_api": null,
          "new_api": "listCreate",
          "old_text": null,
          "new_text": "listCreate()",
          "old_line_content": " * because the server must be fully initialized before loading modules.",
          "new_line_content": "    server.loadmodule_queue = listCreate();",
          "content_same": false
        },
        {
          "line": 2889,
          "old_api": null,
          "new_api": "dictCreate",
          "old_text": null,
          "new_text": "dictCreate(&modulesDictType,NULL)",
          "old_line_content": " *",
          "new_line_content": "    modules = dictCreate(&modulesDictType,NULL);",
          "content_same": false
        },
        {
          "line": 2890,
          "old_api": null,
          "new_api": "moduleRegisterCoreAPI",
          "old_text": null,
          "new_text": "moduleRegisterCoreAPI()",
          "old_line_content": " * The function aborts the server on errors, since to start with missing",
          "new_line_content": "    moduleRegisterCoreAPI();",
          "content_same": false
        },
        {
          "line": 1353,
          "old_api": null,
          "new_api": "moduleCreateEmptyKey",
          "old_text": null,
          "new_text": "moduleCreateEmptyKey(key,REDISMODULE_KEYTYPE_ZSET)",
          "old_line_content": "}",
          "new_line_content": "    if (key->value == NULL) moduleCreateEmptyKey(key,REDISMODULE_KEYTYPE_ZSET);",
          "content_same": false
        },
        {
          "line": 1354,
          "old_api": null,
          "new_api": "RM_ZsetAddFlagsToCoreFlags",
          "old_text": null,
          "new_text": "RM_ZsetAddFlagsToCoreFlags(*flagsptr)",
          "old_line_content": "",
          "new_line_content": "    if (flagsptr) flags = RM_ZsetAddFlagsToCoreFlags(*flagsptr);",
          "content_same": false
        },
        {
          "line": 1355,
          "old_api": null,
          "new_api": "zsetAdd",
          "old_text": null,
          "new_text": "zsetAdd(key->value,score,ele->ptr,&flags,NULL)",
          "old_line_content": "/* This function works exactly like RM_ZsetAdd(), but instead of setting",
          "new_line_content": "    if (zsetAdd(key->value,score,ele->ptr,&flags,NULL) == 0) {",
          "content_same": false
        },
        {
          "line": 1359,
          "old_api": null,
          "new_api": "RM_ZsetAddFlagsFromCoreFlags",
          "old_text": null,
          "new_text": "RM_ZsetAddFlagsFromCoreFlags(flags)",
          "old_line_content": " *",
          "new_line_content": "    if (flagsptr) *flagsptr = RM_ZsetAddFlagsFromCoreFlags(flags);",
          "content_same": false
        },
        {
          "line": 849,
          "old_api": null,
          "new_api": "setDeferredMultiBulkLength",
          "old_text": null,
          "new_text": "setDeferredMultiBulkLength(ctx->client,\n            ctx->postponed_arrays[ctx->postponed_arrays_count],\n            len)",
          "old_line_content": "",
          "new_line_content": "    setDeferredMultiBulkLength(ctx->client,",
          "content_same": false
        },
        {
          "line": 853,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(ctx->postponed_arrays)",
          "old_line_content": "int RM_ReplyWithStringBuffer(RedisModuleCtx *ctx, const char *buf, size_t len) {",
          "new_line_content": "        zfree(ctx->postponed_arrays);",
          "content_same": false
        },
        {
          "line": 2391,
          "old_api": null,
          "new_api": "listRewind",
          "old_text": null,
          "new_text": "listRewind(module->types,&li)",
          "old_line_content": "    }",
          "new_line_content": "        listRewind(module->types,&li);",
          "content_same": false
        },
        {
          "line": 2394,
          "old_api": null,
          "new_api": "memcmp",
          "old_text": null,
          "new_text": "memcmp(name,mt->name,sizeof(mt->name))",
          "old_line_content": "}",
          "new_line_content": "            if (memcmp(name,mt->name,sizeof(mt->name)) == 0) {",
          "content_same": false
        },
        {
          "line": 2395,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "",
          "new_line_content": "                dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 2906,
          "old_api": null,
          "new_api": "listRewind",
          "old_text": null,
          "new_text": "listRewind(server.loadmodule_queue,&li)",
          "old_line_content": "                loadmod->path);",
          "new_line_content": "    listRewind(server.loadmodule_queue,&li);",
          "content_same": false
        },
        {
          "line": 2909,
          "old_api": null,
          "new_api": "moduleLoad",
          "old_text": null,
          "new_text": "moduleLoad(loadmod->path,(void **)loadmod->argv,loadmod->argc)",
          "old_line_content": "    }",
          "new_line_content": "        if (moduleLoad(loadmod->path,(void **)loadmod->argv,loadmod->argc)",
          "content_same": false
        },
        {
          "line": 2400,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "",
          "new_line_content": "    dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 2912,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\n                \"Can't load module from %s: server aborting\",\n                loadmod->path)",
          "old_line_content": "void moduleFreeModuleStructure(struct RedisModule *module) {",
          "new_line_content": "            serverLog(LL_WARNING,",
          "content_same": false
        },
        {
          "line": 1380,
          "old_api": null,
          "new_api": "moduleCreateEmptyKey",
          "old_text": null,
          "new_text": "moduleCreateEmptyKey(key,REDISMODULE_KEYTYPE_ZSET)",
          "old_line_content": "    if (flagsptr && (*flagsptr & ZADD_NAN)) {",
          "new_line_content": "    if (key->value == NULL) moduleCreateEmptyKey(key,REDISMODULE_KEYTYPE_ZSET);",
          "content_same": false
        },
        {
          "line": 1381,
          "old_api": null,
          "new_api": "RM_ZsetAddFlagsToCoreFlags",
          "old_text": null,
          "new_text": "RM_ZsetAddFlagsToCoreFlags(*flagsptr)",
          "old_line_content": "        *flagsptr = 0;",
          "new_line_content": "    if (flagsptr) flags = RM_ZsetAddFlagsToCoreFlags(*flagsptr);",
          "content_same": false
        },
        {
          "line": 870,
          "old_api": null,
          "new_api": "addReplyBulk",
          "old_text": null,
          "new_text": "addReplyBulk(ctx->client,str)",
          "old_line_content": "int RM_ReplyWithNull(RedisModuleCtx *ctx) {",
          "new_line_content": "    addReplyBulk(ctx->client,str);",
          "content_same": false
        },
        {
          "line": 1383,
          "old_api": null,
          "new_api": "zsetAdd",
          "old_text": null,
          "new_text": "zsetAdd(key->value,score,ele->ptr,&flags,newscore)",
          "old_line_content": "    }",
          "new_line_content": "    if (zsetAdd(key->value,score,ele->ptr,&flags,newscore) == 0) {",
          "content_same": false
        },
        {
          "line": 2921,
          "old_api": null,
          "new_api": "listRelease",
          "old_text": null,
          "new_text": "listRelease(module->types)",
          "old_line_content": "    int (*onload)(void *, void **, int);",
          "new_line_content": "    listRelease(module->types);",
          "content_same": false
        },
        {
          "line": 2922,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(module->name)",
          "old_line_content": "    void *handle;",
          "new_line_content": "    sdsfree(module->name);",
          "content_same": false
        },
        {
          "line": 2923,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(module)",
          "old_line_content": "    RedisModuleCtx ctx = REDISMODULE_CTX_INIT;",
          "new_line_content": "    zfree(module);",
          "content_same": false
        },
        {
          "line": 1902,
          "old_api": null,
          "new_api": "va_arg",
          "old_text": null,
          "new_text": "va_arg(ap,char*)",
          "old_line_content": "        /* Query the hash for existence or value object. */",
          "new_line_content": "            char *cfield = va_arg(ap,char*);",
          "content_same": false
        },
        {
          "line": 879,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(ctx->client,shared.nullbulk)",
          "old_line_content": " *",
          "new_line_content": "    addReply(ctx->client,shared.nullbulk);",
          "content_same": false
        },
        {
          "line": 1392,
          "old_api": null,
          "new_api": "RM_ZsetAddFlagsFromCoreFlags",
          "old_text": null,
          "new_text": "RM_ZsetAddFlagsFromCoreFlags(flags)",
          "old_line_content": " * * The key was not opened for writing.",
          "new_line_content": "    if (flagsptr) *flagsptr = RM_ZsetAddFlagsFromCoreFlags(flags);",
          "content_same": false
        },
        {
          "line": 2933,
          "old_api": null,
          "new_api": "dlopen",
          "old_text": null,
          "new_text": "dlopen(path,RTLD_NOW|RTLD_LOCAL)",
          "old_line_content": "            \"Module %s does not export RedisModule_OnLoad() \"",
          "new_line_content": "    handle = dlopen(path,RTLD_NOW|RTLD_LOCAL);",
          "content_same": false
        },
        {
          "line": 2935,
          "old_api": null,
          "new_api": "dlerror",
          "old_text": null,
          "new_text": "dlerror()",
          "old_line_content": "        return C_ERR;",
          "new_line_content": "        serverLog(LL_WARNING, \"Module %s failed to load: %s\", path, dlerror());",
          "content_same": false
        },
        {
          "line": 2425,
          "old_api": null,
          "new_api": "dictNext",
          "old_text": null,
          "new_text": "dictNext(di)",
          "old_line_content": "            /* Compare only the 54 bit module identifier and not the",
          "new_line_content": "    while ((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 2426,
          "old_api": null,
          "new_api": "dictGetVal",
          "old_text": null,
          "new_text": "dictGetVal(de)",
          "old_line_content": "             * encoding version. */",
          "new_line_content": "        struct RedisModule *module = dictGetVal(de);",
          "content_same": false
        },
        {
          "line": 890,
          "old_api": null,
          "new_api": "sdsnewlen",
          "old_text": null,
          "new_text": "sdsnewlen(reply->proto, reply->protolen)",
          "old_line_content": " * RedisModule_ReplyWithStringBuffer() with the buffer and length.",
          "new_line_content": "    sds proto = sdsnewlen(reply->proto, reply->protolen);",
          "content_same": false
        },
        {
          "line": 891,
          "old_api": null,
          "new_api": "addReplySds",
          "old_text": null,
          "new_text": "addReplySds(ctx->client,proto)",
          "old_line_content": " *",
          "new_line_content": "    addReplySds(ctx->client,proto);",
          "content_same": false
        },
        {
          "line": 1918,
          "old_api": null,
          "new_api": "va_arg",
          "old_text": null,
          "new_text": "va_arg(ap,RedisModuleString**)",
          "old_line_content": "                if (*valueptr)",
          "new_line_content": "            valueptr = va_arg(ap,RedisModuleString**);",
          "content_same": false
        },
        {
          "line": 2431,
          "old_api": null,
          "new_api": "listNext",
          "old_text": null,
          "new_text": "listNext(&li)",
          "old_line_content": "",
          "new_line_content": "        while((ln = listNext(&li))) {",
          "content_same": false
        },
        {
          "line": 1920,
          "old_api": null,
          "new_api": "hashTypeGetValueObject",
          "old_text": null,
          "new_text": "hashTypeGetValueObject(key->value,field->ptr)",
          "old_line_content": "            } else {",
          "new_line_content": "                *valueptr = hashTypeGetValueObject(key->value,field->ptr);",
          "content_same": false
        },
        {
          "line": 2945,
          "old_api": null,
          "new_api": "onload",
          "old_text": null,
          "new_text": "onload((void*)&ctx,module_argv,module_argc)",
          "old_line_content": "    /* Redis module loaded! Register it. */",
          "new_line_content": "    if (onload((void*)&ctx,module_argv,module_argc) == REDISMODULE_ERR) {",
          "content_same": false
        },
        {
          "line": 1922,
          "old_api": null,
          "new_api": "getDecodedObject",
          "old_text": null,
          "new_text": "getDecodedObject(*valueptr)",
          "old_line_content": "            }",
          "new_line_content": "                    robj *decoded = getDecodedObject(*valueptr);",
          "content_same": false
        },
        {
          "line": 2947,
          "old_api": null,
          "new_api": "dlclose",
          "old_text": null,
          "new_text": "dlclose(handle)",
          "old_line_content": "    ctx.module->handle = handle;",
          "new_line_content": "        dlclose(handle);",
          "content_same": false
        },
        {
          "line": 1923,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(*valueptr)",
          "old_line_content": "        }",
          "new_line_content": "                    decrRefCount(*valueptr);",
          "content_same": false
        },
        {
          "line": 2438,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "}",
          "new_line_content": "    dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 902,
          "old_api": null,
          "new_api": "addReplyDouble",
          "old_text": null,
          "new_text": "addReplyDouble(ctx->client,d)",
          "old_line_content": "/* Helper function to replicate MULTI the first time we replicate something",
          "new_line_content": "    addReplyDouble(ctx->client,d);",
          "content_same": false
        },
        {
          "line": 1927,
          "old_api": null,
          "new_api": "autoMemoryAdd",
          "old_text": null,
          "new_text": "autoMemoryAdd(key->ctx,REDISMODULE_AM_STRING,*valueptr)",
          "old_line_content": "    }",
          "new_line_content": "                    autoMemoryAdd(key->ctx,REDISMODULE_AM_STRING,*valueptr);",
          "content_same": false
        },
        {
          "line": 1417,
          "old_api": null,
          "new_api": "zsetDel",
          "old_text": null,
          "new_text": "zsetDel(key->value,ele->ptr)",
          "old_line_content": "/* On success retrieve the double score associated at the sorted set element",
          "new_line_content": "    if (key->value != NULL && zsetDel(key->value,ele->ptr)) {",
          "content_same": false
        },
        {
          "line": 2954,
          "old_api": null,
          "new_api": "dictAdd",
          "old_text": null,
          "new_text": "dictAdd(modules,ctx.module->name,ctx.module)",
          "old_line_content": " * C_OK is returned, otherwise C_ERR is returned and errno is set",
          "new_line_content": "    dictAdd(modules,ctx.module->name,ctx.module);",
          "content_same": false
        },
        {
          "line": 2956,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_NOTICE,\"Module '%s' loaded from %s\",ctx.module->name,path)",
          "old_line_content": " *",
          "new_line_content": "    serverLog(LL_NOTICE,\"Module '%s' loaded from %s\",ctx.module->name,path);",
          "content_same": false
        },
        {
          "line": 2957,
          "old_api": null,
          "new_api": "moduleFreeContext",
          "old_text": null,
          "new_text": "moduleFreeContext(&ctx)",
          "old_line_content": " * ENONET: No such module having the specified name.",
          "new_line_content": "    moduleFreeContext(&ctx);",
          "content_same": false
        },
        {
          "line": 1934,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(field)",
          "old_line_content": " * -------------------------------------------------------------------------- */",
          "new_line_content": "        if (flags & REDISMODULE_HASH_CFIELDS) decrRefCount(field);",
          "content_same": false
        },
        {
          "line": 1936,
          "old_api": null,
          "new_api": "va_end",
          "old_text": null,
          "new_text": "va_end(ap)",
          "old_line_content": "/* Create a new RedisModuleCallReply object. The processing of the reply",
          "new_line_content": "    va_end(ap);",
          "content_same": false
        },
        {
          "line": 915,
          "old_api": null,
          "new_api": "execCommandPropagateMulti",
          "old_text": null,
          "new_text": "execCommandPropagateMulti(ctx->client)",
          "old_line_content": " * contains all the commands replicated in a given module command",
          "new_line_content": "    execCommandPropagateMulti(ctx->client);",
          "content_same": false
        },
        {
          "line": 2968,
          "old_api": null,
          "new_api": "dictFetchValue",
          "old_text": null,
          "new_text": "dictFetchValue(modules,name)",
          "old_line_content": "        errno = EBUSY;",
          "new_line_content": "    struct RedisModule *module = dictFetchValue(modules,name);",
          "content_same": false
        },
        {
          "line": 1436,
          "old_api": null,
          "new_api": "zsetScore",
          "old_text": null,
          "new_text": "zsetScore(key->value,ele->ptr,score)",
          "old_line_content": "/* Stop a sorted set iteration. */",
          "new_line_content": "    if (zsetScore(key->value,ele->ptr,score) == C_ERR) return REDISMODULE_ERR;",
          "content_same": false
        },
        {
          "line": 1949,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(*reply))",
          "old_line_content": "    case '-': reply->type = REDISMODULE_REPLY_ERROR; break;",
          "new_line_content": "    RedisModuleCallReply *reply = zmalloc(sizeof(*reply));",
          "content_same": false
        },
        {
          "line": 1952,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(proto)",
          "old_line_content": "    default: reply->type = REDISMODULE_REPLY_UNKNOWN; break;",
          "new_line_content": "    reply->protolen = sdslen(proto);",
          "content_same": false
        },
        {
          "line": 2981,
          "old_api": null,
          "new_api": "dictGetSafeIterator",
          "old_text": null,
          "new_text": "dictGetSafeIterator(server.commands)",
          "old_line_content": "            if (cp->module == module) {",
          "new_line_content": "    dictIterator *di = dictGetSafeIterator(server.commands);",
          "content_same": false
        },
        {
          "line": 1448,
          "old_api": null,
          "new_api": "zslFreeLexRange",
          "old_text": null,
          "new_text": "zslFreeLexRange(&key->zlrs)",
          "old_line_content": "",
          "new_line_content": "        zslFreeLexRange(&key->zlrs);",
          "content_same": false
        },
        {
          "line": 2991,
          "old_api": null,
          "new_api": "dictDelete",
          "old_text": null,
          "new_text": "dictDelete(server.orig_commands,cmdname)",
          "old_line_content": "",
          "new_line_content": "                dictDelete(server.orig_commands,cmdname);",
          "content_same": false
        },
        {
          "line": 944,
          "old_api": null,
          "new_api": "lookupCommandByCString",
          "old_text": null,
          "new_text": "lookupCommandByCString((char*)cmdname)",
          "old_line_content": "",
          "new_line_content": "    cmd = lookupCommandByCString((char*)cmdname);",
          "content_same": false
        },
        {
          "line": 2992,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(cmdname)",
          "old_line_content": "    /* Unregister all the hooks. TODO: Yet no hooks support here. */",
          "new_line_content": "                sdsfree(cmdname);",
          "content_same": false
        },
        {
          "line": 2993,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(cp->rediscmd)",
          "old_line_content": "",
          "new_line_content": "                zfree(cp->rediscmd);",
          "content_same": false
        },
        {
          "line": 2994,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(cp)",
          "old_line_content": "    /* Unload the dynamic library. */",
          "new_line_content": "                zfree(cp);",
          "content_same": false
        },
        {
          "line": 948,
          "old_api": null,
          "new_api": "va_start",
          "old_text": null,
          "new_text": "va_start(ap, fmt)",
          "old_line_content": "        PROPAGATE_AOF|PROPAGATE_REPL);",
          "new_line_content": "    va_start(ap, fmt);",
          "content_same": false
        },
        {
          "line": 949,
          "old_api": null,
          "new_api": "moduleCreateArgvFromUserFormat",
          "old_text": null,
          "new_text": "moduleCreateArgvFromUserFormat(cmdname,fmt,&argc,&flags,ap)",
          "old_line_content": "",
          "new_line_content": "    argv = moduleCreateArgvFromUserFormat(cmdname,fmt,&argc,&flags,ap);",
          "content_same": false
        },
        {
          "line": 950,
          "old_api": null,
          "new_api": "va_end",
          "old_text": null,
          "new_text": "va_end(ap)",
          "old_line_content": "    /* Release the argv. */",
          "new_line_content": "    va_end(ap);",
          "content_same": false
        },
        {
          "line": 954,
          "old_api": null,
          "new_api": "moduleReplicateMultiIfNeeded",
          "old_text": null,
          "new_text": "moduleReplicateMultiIfNeeded(ctx)",
          "old_line_content": "}",
          "new_line_content": "    moduleReplicateMultiIfNeeded(ctx);",
          "content_same": false
        },
        {
          "line": 955,
          "old_api": null,
          "new_api": "alsoPropagate",
          "old_text": null,
          "new_text": "alsoPropagate(cmd,ctx->client->db->id,argv,argc,\n        PROPAGATE_AOF|PROPAGATE_REPL)",
          "old_line_content": "",
          "new_line_content": "    alsoPropagate(cmd,ctx->client->db->id,argv,argc,",
          "content_same": false
        },
        {
          "line": 1980,
          "old_api": null,
          "new_api": "moduleParseCallReply_Int",
          "old_text": null,
          "new_text": "moduleParseCallReply_Int(reply)",
          "old_line_content": "void moduleParseCallReply_Int(RedisModuleCallReply *reply) {",
          "new_line_content": "    case ':': moduleParseCallReply_Int(reply); break;",
          "content_same": false
        },
        {
          "line": 1981,
          "old_api": null,
          "new_api": "moduleParseCallReply_BulkString",
          "old_text": null,
          "new_text": "moduleParseCallReply_BulkString(reply)",
          "old_line_content": "    char *proto = reply->proto;",
          "new_line_content": "    case '$': moduleParseCallReply_BulkString(reply); break;",
          "content_same": false
        },
        {
          "line": 3006,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\"Error when trying to close the %s module: %s\",\n            module->name, error)",
          "old_line_content": "",
          "new_line_content": "        serverLog(LL_WARNING,\"Error when trying to close the %s module: %s\",",
          "content_same": false
        },
        {
          "line": 959,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(argv[j])",
          "old_line_content": " * commands.",
          "new_line_content": "    for (j = 0; j < argc; j++) decrRefCount(argv[j]);",
          "content_same": false
        },
        {
          "line": 960,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(argv)",
          "old_line_content": " *",
          "new_line_content": "    zfree(argv);",
          "content_same": false
        },
        {
          "line": 1471,
          "old_api": null,
          "new_api": "RM_ZsetRangeStop",
          "old_text": null,
          "new_text": "RM_ZsetRangeStop(key)",
          "old_line_content": "    zrs->max = max;",
          "new_line_content": "    RM_ZsetRangeStop(key);",
          "content_same": false
        },
        {
          "line": 1983,
          "old_api": null,
          "new_api": "moduleParseCallReply_SimpleString",
          "old_text": null,
          "new_text": "moduleParseCallReply_SimpleString(reply)",
          "old_line_content": "",
          "new_line_content": "    case '+': moduleParseCallReply_SimpleString(reply); break;",
          "content_same": false
        },
        {
          "line": 3011,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_NOTICE,\"Module %s unloaded\",module->name)",
          "old_line_content": " *",
          "new_line_content": "    serverLog(LL_NOTICE,\"Module %s unloaded\",module->name);",
          "content_same": false
        },
        {
          "line": 3012,
          "old_api": null,
          "new_api": "dictDelete",
          "old_text": null,
          "new_text": "dictDelete(modules,module->name)",
          "old_line_content": " * MODULE LOAD <path> [args...] */",
          "new_line_content": "    dictDelete(modules,module->name);",
          "content_same": false
        },
        {
          "line": 3013,
          "old_api": null,
          "new_api": "moduleFreeModuleStructure",
          "old_text": null,
          "new_text": "moduleFreeModuleStructure(module)",
          "old_line_content": "void moduleCommand(client *c) {",
          "new_line_content": "    moduleFreeModuleStructure(module);",
          "content_same": false
        },
        {
          "line": 1990,
          "old_api": null,
          "new_api": "strchr",
          "old_text": null,
          "new_text": "strchr(proto+1,'\\r')",
          "old_line_content": "    char *proto = reply->proto;",
          "new_line_content": "    char *p = strchr(proto+1,'\\r');",
          "content_same": false
        },
        {
          "line": 1992,
          "old_api": null,
          "new_api": "string2ll",
          "old_text": null,
          "new_text": "string2ll(proto+1,p-proto-1,&reply->val.ll)",
          "old_line_content": "    long long bulklen;",
          "new_line_content": "    string2ll(proto+1,p-proto-1,&reply->val.ll);",
          "content_same": false
        },
        {
          "line": 2508,
          "old_api": null,
          "new_api": "moduleTypeEncodeId",
          "old_text": null,
          "new_text": "moduleTypeEncodeId(name,encver)",
          "old_line_content": "    mt->rdb_save = rdb_save;",
          "new_line_content": "    uint64_t id = moduleTypeEncodeId(name,encver);",
          "content_same": false
        },
        {
          "line": 1485,
          "old_api": null,
          "new_api": "zzlLastInRange",
          "old_text": null,
          "new_text": "zzlLastInRange(key->value->ptr,zrs)",
          "old_line_content": "    }",
          "new_line_content": "                                zzlLastInRange(key->value->ptr,zrs);",
          "content_same": false
        },
        {
          "line": 2510,
          "old_api": null,
          "new_api": "moduleTypeLookupModuleByName",
          "old_text": null,
          "new_text": "moduleTypeLookupModuleByName(name)",
          "old_line_content": "    mt->digest = digest;",
          "new_line_content": "    if (moduleTypeLookupModuleByName(name) != NULL) return NULL;",
          "content_same": false
        },
        {
          "line": 1999,
          "old_api": null,
          "new_api": "strchr",
          "old_text": null,
          "new_text": "strchr(proto+1,'\\r')",
          "old_line_content": "        reply->val.str = p+2;",
          "new_line_content": "    char *p = strchr(proto+1,'\\r');",
          "content_same": false
        },
        {
          "line": 976,
          "old_api": null,
          "new_api": "alsoPropagate",
          "old_text": null,
          "new_text": "alsoPropagate(ctx->client->cmd,ctx->client->db->id,\n        ctx->client->argv,ctx->client->argc,\n        PROPAGATE_AOF|PROPAGATE_REPL)",
          "old_line_content": " * -------------------------------------------------------------------------- */",
          "new_line_content": "    alsoPropagate(ctx->client->cmd,ctx->client->db->id,",
          "content_same": false
        },
        {
          "line": 3024,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(subcmd,\"load\")",
          "old_line_content": "",
          "new_line_content": "    if (!strcasecmp(subcmd,\"load\") && c->argc >= 3) {",
          "content_same": false
        },
        {
          "line": 1489,
          "old_api": null,
          "new_api": "zslFirstInRange",
          "old_text": null,
          "new_text": "zslFirstInRange(zsl,zrs)",
          "old_line_content": "",
          "new_line_content": "        key->zcurrent = first ? zslFirstInRange(zsl,zrs) :",
          "content_same": false
        },
        {
          "line": 1490,
          "old_api": null,
          "new_api": "zslLastInRange",
          "old_text": null,
          "new_text": "zslLastInRange(zsl,zrs)",
          "old_line_content": "/* Setup a sorted set iterator seeking the first element in the specified",
          "new_line_content": "                                zslLastInRange(zsl,zrs);",
          "content_same": false
        },
        {
          "line": 1492,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Unsupported zset encoding\")",
          "old_line_content": " * otherwise REDISMODULE_ERR is returned in the following conditions:",
          "new_line_content": "        serverPanic(\"Unsupported zset encoding\");",
          "content_same": false
        },
        {
          "line": 2002,
          "old_api": null,
          "new_api": "string2ll",
          "old_text": null,
          "new_text": "string2ll(proto+1,p-proto-1,&bulklen)",
          "old_line_content": "        reply->type = REDISMODULE_REPLY_STRING;",
          "new_line_content": "    string2ll(proto+1,p-proto-1,&bulklen);",
          "content_same": false
        },
        {
          "line": 2520,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(mt->name,name,sizeof(mt->name))",
          "old_line_content": " * writing or there is an active iterator, REDISMODULE_ERR is returned. */",
          "new_line_content": "    memcpy(mt->name,name,sizeof(mt->name));",
          "content_same": false
        },
        {
          "line": 2521,
          "old_api": null,
          "new_api": "listAddNodeTail",
          "old_text": null,
          "new_text": "listAddNodeTail(ctx->module->types,mt)",
          "old_line_content": "int RM_ModuleTypeSetValue(RedisModuleKey *key, moduleType *mt, void *value) {",
          "new_line_content": "    listAddNodeTail(ctx->module->types,mt);",
          "content_same": false
        },
        {
          "line": 3033,
          "old_api": null,
          "new_api": "moduleLoad",
          "old_text": null,
          "new_text": "moduleLoad(c->argv[2]->ptr,(void **)argv,argc)",
          "old_line_content": "        else {",
          "new_line_content": "        if (moduleLoad(c->argv[2]->ptr,(void **)argv,argc) == C_OK)",
          "content_same": false
        },
        {
          "line": 3034,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "            char *errmsg;",
          "new_line_content": "            addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 3036,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\n                \"Error loading the extension. Please check the server logs.\")",
          "old_line_content": "            case ENOENT:",
          "new_line_content": "            addReplyError(c,",
          "content_same": false
        },
        {
          "line": 3038,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(subcmd,\"unload\")",
          "old_line_content": "                break;",
          "new_line_content": "    } else if (!strcasecmp(subcmd,\"unload\") && c->argc == 3) {",
          "content_same": false
        },
        {
          "line": 3039,
          "old_api": null,
          "new_api": "moduleUnload",
          "old_text": null,
          "new_text": "moduleUnload(c->argv[2]->ptr)",
          "old_line_content": "            case EBUSY:",
          "new_line_content": "        if (moduleUnload(c->argv[2]->ptr) == C_OK)",
          "content_same": false
        },
        {
          "line": 3040,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "                errmsg = \"the module exports one or more module-side data types, can't unload\";",
          "new_line_content": "            addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 2016,
          "old_api": null,
          "new_api": "strchr",
          "old_text": null,
          "new_text": "strchr(proto+1,'\\r')",
          "old_line_content": "",
          "new_line_content": "    char *p = strchr(proto+1,'\\r');",
          "content_same": false
        },
        {
          "line": 2531,
          "old_api": null,
          "new_api": "RM_DeleteKey",
          "old_text": null,
          "new_text": "RM_DeleteKey(key)",
          "old_line_content": "/* Assuming RedisModule_KeyType() returned REDISMODULE_KEYTYPE_MODULE on",
          "new_line_content": "    RM_DeleteKey(key);",
          "content_same": false
        },
        {
          "line": 2532,
          "old_api": null,
          "new_api": "createModuleObject",
          "old_text": null,
          "new_text": "createModuleObject(mt,value)",
          "old_line_content": " * the key, returns the moduel type pointer of the value stored at key.",
          "new_line_content": "    robj *o = createModuleObject(mt,value);",
          "content_same": false
        },
        {
          "line": 2533,
          "old_api": null,
          "new_api": "setKey",
          "old_text": null,
          "new_text": "setKey(key->db,key->key,o)",
          "old_line_content": " *",
          "new_line_content": "    setKey(key->db,key->key,o);",
          "content_same": false
        },
        {
          "line": 2534,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(o)",
          "old_line_content": " * If the key is NULL, is not associated with a module type, or is empty,",
          "new_line_content": "    decrRefCount(o);",
          "content_same": false
        },
        {
          "line": 1514,
          "old_api": null,
          "new_api": "zsetInitScoreRange",
          "old_text": null,
          "new_text": "zsetInitScoreRange(key,min,max,minex,maxex,1)",
          "old_line_content": "",
          "new_line_content": "    return zsetInitScoreRange(key,min,max,minex,maxex,1);",
          "content_same": false
        },
        {
          "line": 2027,
          "old_api": null,
          "new_api": "strchr",
          "old_text": null,
          "new_text": "strchr(proto+1,'\\r')",
          "old_line_content": "        reply->type = REDISMODULE_REPLY_NULL;",
          "new_line_content": "    char *p = strchr(proto+1,'\\r');",
          "content_same": false
        },
        {
          "line": 2030,
          "old_api": null,
          "new_api": "string2ll",
          "old_text": null,
          "new_text": "string2ll(proto+1,p-proto-1,&arraylen)",
          "old_line_content": "",
          "new_line_content": "    string2ll(proto+1,p-proto-1,&arraylen);",
          "content_same": false
        },
        {
          "line": 1520,
          "old_api": null,
          "new_api": "zsetInitScoreRange",
          "old_text": null,
          "new_text": "zsetInitScoreRange(key,min,max,minex,maxex,0)",
          "old_line_content": " * REDISMODULE_ERR.",
          "new_line_content": "    return zsetInitScoreRange(key,min,max,minex,maxex,0);",
          "content_same": false
        },
        {
          "line": 2547,
          "old_api": null,
          "new_api": "RM_KeyType",
          "old_text": null,
          "new_text": "RM_KeyType(key)",
          "old_line_content": " *",
          "new_line_content": "        RM_KeyType(key) != REDISMODULE_KEYTYPE_MODULE) return NULL;",
          "content_same": false
        },
        {
          "line": 3061,
          "old_api": null,
          "new_api": "dictNext",
          "old_text": null,
          "new_text": "dictNext(di)",
          "old_line_content": "        }",
          "new_line_content": "        while ((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 3063,
          "old_api": null,
          "new_api": "dictGetVal",
          "old_text": null,
          "new_text": "dictGetVal(de)",
          "old_line_content": "    } else {",
          "new_line_content": "            struct RedisModule *module = dictGetVal(de);",
          "content_same": false
        },
        {
          "line": 3065,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c,\"name\")",
          "old_line_content": "    }",
          "new_line_content": "            addReplyBulkCString(c,\"name\");",
          "content_same": false
        },
        {
          "line": 1018,
          "old_api": null,
          "new_api": "selectDb",
          "old_text": null,
          "new_text": "selectDb(ctx->client,newid)",
          "old_line_content": " * The return value is the handle repesenting the key, that must be",
          "new_line_content": "    int retval = selectDb(ctx->client,newid);",
          "content_same": false
        },
        {
          "line": 3067,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c,\"ver\")",
          "old_line_content": "",
          "new_line_content": "            addReplyBulkCString(c,\"ver\");",
          "content_same": false
        },
        {
          "line": 3068,
          "old_api": null,
          "new_api": "addReplyLongLong",
          "old_text": null,
          "new_text": "addReplyLongLong(c,module->ver)",
          "old_line_content": "",
          "new_line_content": "            addReplyLongLong(c,module->ver);",
          "content_same": false
        },
        {
          "line": 3070,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "",
          "new_line_content": "        dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 1535,
          "old_api": null,
          "new_api": "RM_ZsetRangeStop",
          "old_text": null,
          "new_text": "RM_ZsetRangeStop(key)",
          "old_line_content": "    /* Set the range type to lex only after successfully parsing the range,",
          "new_line_content": "    RM_ZsetRangeStop(key);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 1540,
          "old_api": "zzlFirstInLexRange",
          "new_api": null,
          "old_text": "zzlFirstInLexRange(key->value->ptr,zlrs)",
          "new_text": null,
          "old_line_content": "        key->zcurrent = first ? zzlFirstInLexRange(key->value->ptr,zlrs) :",
          "new_line_content": "    zlexrangespec *zlrs = &key->zlrs;",
          "content_same": false
        },
        {
          "line": 2565,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\n        \"Error loading data from RDB (short read or EOF). \"\n        \"Read performed by module '%s' about type '%s' \"\n        \"after reading '%llu' bytes of a value.\",\n        io->type->module->name,\n        io->type->name,\n        (unsigned long long)io->bytes)",
          "new_text": null,
          "old_line_content": "    serverLog(LL_WARNING,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1033,
          "old_api": "lookupKeyWrite",
          "new_api": null,
          "old_text": "lookupKeyWrite(ctx->client->db,keyname)",
          "new_text": null,
          "old_line_content": "        value = lookupKeyWrite(ctx->client->db,keyname);",
          "new_line_content": " * key does not exist, NULL is returned. However it is still safe to",
          "content_same": false
        },
        {
          "line": 2058,
          "old_api": "RM_FreeCallReply_Rec",
          "new_api": null,
          "old_text": "RM_FreeCallReply_Rec(reply->val.array+j,1)",
          "new_text": null,
          "old_line_content": "                RM_FreeCallReply_Rec(reply->val.array+j,1);",
          "new_line_content": "     * toplevel reply. However be gentle and don't crash if the module",
          "content_same": false
        },
        {
          "line": 2059,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(reply->val.array)",
          "new_text": null,
          "old_line_content": "            zfree(reply->val.array);",
          "new_line_content": "     * misuses the API. */",
          "content_same": false
        },
        {
          "line": 2572,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "    exit(1);",
          "new_line_content": "void moduleRDBLoadError(RedisModuleIO *io) {",
          "content_same": false
        },
        {
          "line": 1035,
          "old_api": "lookupKeyRead",
          "new_api": null,
          "old_text": "lookupKeyRead(ctx->client->db,keyname)",
          "new_text": null,
          "old_line_content": "        value = lookupKeyRead(ctx->client->db,keyname);",
          "new_line_content": " * value. */",
          "content_same": false
        },
        {
          "line": 1545,
          "old_api": "zslFirstInLexRange",
          "new_api": null,
          "old_text": "zslFirstInLexRange(zsl,zlrs)",
          "new_text": null,
          "old_line_content": "        key->zcurrent = first ? zslFirstInLexRange(zsl,zlrs) :",
          "new_line_content": "    key->ztype = REDISMODULE_ZSET_RANGE_LEX;",
          "content_same": false
        },
        {
          "line": 1546,
          "old_api": "zslLastInLexRange",
          "new_api": null,
          "old_text": "zslLastInLexRange(zsl,zlrs)",
          "new_text": null,
          "old_line_content": "                                zslLastInLexRange(zsl,zlrs);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1042,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(*kp))",
          "new_text": null,
          "old_line_content": "    kp = zmalloc(sizeof(*kp));",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 2068,
          "old_api": "sdsfree",
          "new_api": null,
          "old_text": "sdsfree(reply->proto)",
          "new_text": null,
          "old_line_content": "        if (reply->proto) sdsfree(reply->proto);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2069,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(reply)",
          "new_text": null,
          "old_line_content": "        zfree(reply);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1046,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(keyname)",
          "new_text": null,
          "old_line_content": "    incrRefCount(keyname);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1051,
          "old_api": "autoMemoryAdd",
          "new_api": null,
          "old_text": "autoMemoryAdd(ctx,REDISMODULE_AM_KEY,kp)",
          "new_text": null,
          "old_line_content": "    autoMemoryAdd(ctx,REDISMODULE_AM_KEY,kp);",
          "new_line_content": "    kp->ctx = ctx;",
          "content_same": false
        },
        {
          "line": 2078,
          "old_api": "autoMemoryFreed",
          "new_api": null,
          "old_text": "autoMemoryFreed(reply->ctx,REDISMODULE_AM_REPLY,reply)",
          "new_text": null,
          "old_line_content": "    autoMemoryFreed(reply->ctx,REDISMODULE_AM_REPLY,reply);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1568,
          "old_api": "zsetInitLexRange",
          "new_api": null,
          "old_text": "zsetInitLexRange(key,min,max,1)",
          "new_text": null,
          "old_line_content": "    return zsetInitLexRange(key,min,max,1);",
          "new_line_content": " * 1. The value stored at key is not a sorted set or the key is empty.",
          "content_same": false
        },
        {
          "line": 2593,
          "old_api": "rdbLoadLenByRef",
          "new_api": null,
          "old_text": "rdbLoadLenByRef(io->rio, NULL, &value)",
          "new_text": null,
          "old_line_content": "    int retval = rdbLoadLenByRef(io->rio, NULL, &value);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2595,
          "old_api": "moduleRDBLoadError",
          "new_api": null,
          "old_text": "moduleRDBLoadError(io)",
          "new_text": null,
          "old_line_content": "        moduleRDBLoadError(io);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1060,
          "old_api": "RM_ZsetRangeStop",
          "new_api": null,
          "old_text": "RM_ZsetRangeStop(key)",
          "new_text": null,
          "old_line_content": "    RM_ZsetRangeStop(key);",
          "new_line_content": "    return (void*)kp;",
          "content_same": false
        },
        {
          "line": 1061,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(key->key)",
          "new_text": null,
          "old_line_content": "    decrRefCount(key->key);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1062,
          "old_api": "autoMemoryFreed",
          "new_api": null,
          "old_text": "autoMemoryFreed(key->ctx,REDISMODULE_AM_KEY,key)",
          "new_text": null,
          "old_line_content": "    autoMemoryFreed(key->ctx,REDISMODULE_AM_KEY,key);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1063,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(key)",
          "new_text": null,
          "old_line_content": "    zfree(key);",
          "new_line_content": "/* Close a key handle. */",
          "content_same": false
        },
        {
          "line": 2088,
          "old_api": "moduleParseCallReply",
          "new_api": null,
          "old_text": "moduleParseCallReply(reply)",
          "new_text": null,
          "old_line_content": "    moduleParseCallReply(reply);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1574,
          "old_api": "zsetInitLexRange",
          "new_api": null,
          "old_text": "zsetInitLexRange(key,min,max,0)",
          "new_text": null,
          "old_line_content": "    return zsetInitLexRange(key,min,max,0);",
          "new_line_content": " * ASAP after the iterator is setup. */",
          "content_same": false
        },
        {
          "line": 2605,
          "old_api": "RM_SaveUnsigned",
          "new_api": null,
          "old_text": "RM_SaveUnsigned(io,conv.u)",
          "new_text": null,
          "old_line_content": "    RM_SaveUnsigned(io,conv.u);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2611,
          "old_api": "RM_LoadUnsigned",
          "new_api": null,
          "old_text": "RM_LoadUnsigned(io)",
          "new_text": null,
          "old_line_content": "    conv.u = RM_LoadUnsigned(io);",
          "new_line_content": "    union {uint64_t u; int64_t i;} conv;",
          "content_same": false
        },
        {
          "line": 1587,
          "old_api": "ziplistGetObject",
          "new_api": null,
          "old_text": "ziplistGetObject(eptr)",
          "new_text": null,
          "old_line_content": "        sds ele = ziplistGetObject(eptr);",
          "new_line_content": " * element. */",
          "content_same": false
        },
        {
          "line": 1589,
          "old_api": "ziplistNext",
          "new_api": null,
          "old_text": "ziplistNext(key->value->ptr,eptr)",
          "new_text": null,
          "old_line_content": "            sptr = ziplistNext(key->value->ptr,eptr);",
          "new_line_content": "    RedisModuleString *str;",
          "content_same": false
        },
        {
          "line": 2102,
          "old_api": "moduleParseCallReply",
          "new_api": null,
          "old_text": "moduleParseCallReply(reply)",
          "new_text": null,
          "old_line_content": "    moduleParseCallReply(reply);",
          "new_line_content": "    default:",
          "content_same": false
        },
        {
          "line": 1590,
          "old_api": "zzlGetScore",
          "new_api": null,
          "old_text": "zzlGetScore(sptr)",
          "new_text": null,
          "old_line_content": "            *score = zzlGetScore(sptr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1592,
          "old_api": "createObject",
          "new_api": null,
          "old_text": "createObject(OBJ_STRING,ele)",
          "new_text": null,
          "old_line_content": "        str = createObject(OBJ_STRING,ele);",
          "new_line_content": "    if (key->value->encoding == OBJ_ENCODING_ZIPLIST) {",
          "content_same": false
        },
        {
          "line": 1596,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(ln->ele)",
          "new_text": null,
          "old_line_content": "        str = createStringObject(ln->ele,sdslen(ln->ele));",
          "new_line_content": "        if (score) {",
          "content_same": false
        },
        {
          "line": 2623,
          "old_api": "rdbSaveStringObject",
          "new_api": null,
          "old_text": "rdbSaveStringObject(io->rio,s)",
          "new_text": null,
          "old_line_content": "    int retval = rdbSaveStringObject(io->rio,s);",
          "new_line_content": "/* In the context of the rdb_save method of a module type, saves a",
          "content_same": false
        },
        {
          "line": 1091,
          "old_api": "stringObjectLen",
          "new_api": null,
          "old_text": "stringObjectLen(key->value)",
          "new_text": null,
          "old_line_content": "    case OBJ_STRING: return stringObjectLen(key->value);",
          "new_line_content": "/* Return the length of the value associated with the key.",
          "content_same": false
        },
        {
          "line": 1092,
          "old_api": "listTypeLength",
          "new_api": null,
          "old_text": "listTypeLength(key->value)",
          "new_text": null,
          "old_line_content": "    case OBJ_LIST: return listTypeLength(key->value);",
          "new_line_content": " * For strings this is the length of the string. For all the other types",
          "content_same": false
        },
        {
          "line": 2117,
          "old_api": "moduleParseCallReply",
          "new_api": null,
          "old_text": "moduleParseCallReply(reply)",
          "new_text": null,
          "old_line_content": "    moduleParseCallReply(reply);",
          "new_line_content": "long long RM_CallReplyInteger(RedisModuleCallReply *reply) {",
          "content_same": false
        },
        {
          "line": 1093,
          "old_api": "setTypeSize",
          "new_api": null,
          "old_text": "setTypeSize(key->value)",
          "new_text": null,
          "old_line_content": "    case OBJ_SET: return setTypeSize(key->value);",
          "new_line_content": " * is the number of elements (just counting keys for hashes).",
          "content_same": false
        },
        {
          "line": 1094,
          "old_api": "zsetLength",
          "new_api": null,
          "old_text": "zsetLength(key->value)",
          "new_text": null,
          "old_line_content": "    case OBJ_ZSET: return zsetLength(key->value);",
          "new_line_content": " *",
          "content_same": false
        },
        {
          "line": 1095,
          "old_api": "hashTypeLength",
          "new_api": null,
          "old_text": "hashTypeLength(key->value)",
          "new_text": null,
          "old_line_content": "    case OBJ_HASH: return hashTypeLength(key->value);",
          "new_line_content": " * If the key pointer is NULL or the key is empty, zero is returned. */",
          "content_same": false
        },
        {
          "line": 2635,
          "old_api": "rdbSaveRawString",
          "new_api": null,
          "old_text": "rdbSaveRawString(io->rio,(unsigned char*)str,len)",
          "new_text": null,
          "old_line_content": "    int retval = rdbSaveRawString(io->rio,(unsigned char*)str,len);",
          "new_line_content": "        io->bytes += retval;",
          "content_same": false
        },
        {
          "line": 1614,
          "old_api": "ziplistNext",
          "new_api": null,
          "old_text": "ziplistNext(zl,eptr)",
          "new_text": null,
          "old_line_content": "        next = ziplistNext(zl,eptr); /* Skip element. */",
          "new_line_content": " * does not include any item at all. */",
          "content_same": false
        },
        {
          "line": 2127,
          "old_api": "moduleParseCallReply",
          "new_api": null,
          "old_text": "moduleParseCallReply(reply)",
          "new_text": null,
          "old_line_content": "    moduleParseCallReply(reply);",
          "new_line_content": "        reply->type != REDISMODULE_REPLY_ERROR) return NULL;",
          "content_same": false
        },
        {
          "line": 1615,
          "old_api": "ziplistNext",
          "new_api": null,
          "old_text": "ziplistNext(zl,next)",
          "new_text": null,
          "old_line_content": "        if (next) next = ziplistNext(zl,next); /* Skip score. */",
          "new_line_content": "int RM_ZsetRangeNext(RedisModuleKey *key) {",
          "content_same": false
        },
        {
          "line": 2131,
          "old_api": "RM_CreateString",
          "new_api": null,
          "old_text": "RM_CreateString(reply->ctx,reply->val.str,reply->len)",
          "new_text": null,
          "old_line_content": "        return RM_CreateString(reply->ctx,reply->val.str,reply->len);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1107,
          "old_api": "dbDelete",
          "new_api": null,
          "old_text": "dbDelete(key->db,key->key)",
          "new_text": null,
          "old_line_content": "        dbDelete(key->db,key->key);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2645,
          "old_api": "rdbGenericLoadStringObject",
          "new_api": null,
          "old_text": "rdbGenericLoadStringObject(io->rio,\n              plain ? RDB_LOAD_PLAIN : RDB_LOAD_NONE, lenptr)",
          "new_text": null,
          "old_line_content": "    void *s = rdbGenericLoadStringObject(io->rio,",
          "new_line_content": "        io->error = 1;",
          "content_same": false
        },
        {
          "line": 2134,
          "old_api": "ll2string",
          "new_api": null,
          "old_text": "ll2string(buf,sizeof(buf),reply->val.ll)",
          "new_text": null,
          "old_line_content": "        int len = ll2string(buf,sizeof(buf),reply->val.ll);",
          "new_line_content": "RedisModuleString *RM_CreateStringFromCallReply(RedisModuleCallReply *reply) {",
          "content_same": false
        },
        {
          "line": 2648,
          "old_api": "moduleRDBLoadError",
          "new_api": null,
          "old_text": "moduleRDBLoadError(io)",
          "new_text": null,
          "old_line_content": "        moduleRDBLoadError(io);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1625,
          "old_api": "ziplistNext",
          "new_api": null,
          "old_text": "ziplistNext(zl,next)",
          "new_text": null,
          "old_line_content": "                next = ziplistNext(zl,next); /* Skip next element. */",
          "new_line_content": "            key->zer = 1;",
          "content_same": false
        },
        {
          "line": 1626,
          "old_api": "zzlGetScore",
          "new_api": null,
          "old_text": "zzlGetScore(next)",
          "new_text": null,
          "old_line_content": "                double score = zzlGetScore(next); /* Obtain the next score. */",
          "new_line_content": "            return 0;",
          "content_same": false
        },
        {
          "line": 1627,
          "old_api": "zslValueLteMax",
          "new_api": null,
          "old_text": "zslValueLteMax(score,&key->zrs)",
          "new_text": null,
          "old_line_content": "                if (!zslValueLteMax(score,&key->zrs)) {",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 1117,
          "old_api": "getExpire",
          "new_api": null,
          "old_text": "getExpire(key->db,key->key)",
          "new_text": null,
          "old_line_content": "    mstime_t expire = getExpire(key->db,key->key);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1119,
          "old_api": "mstime",
          "new_api": null,
          "old_text": "mstime()",
          "new_text": null,
          "old_line_content": "    expire -= mstime();",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2664,
          "old_api": "moduleLoadString",
          "new_api": null,
          "old_text": "moduleLoadString(io,0,NULL)",
          "new_text": null,
          "old_line_content": "    return moduleLoadString(io,0,NULL);",
          "new_line_content": " * functions family.",
          "content_same": false
        },
        {
          "line": 1136,
          "old_api": "mstime",
          "new_api": null,
          "old_text": "mstime()",
          "new_text": null,
          "old_line_content": "        expire += mstime();",
          "new_line_content": " * the number of milliseconds of TTL the key should have.",
          "content_same": false
        },
        {
          "line": 2161,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(fmt)",
          "new_text": null,
          "old_line_content": "    argv_size = strlen(fmt)+1; /* +1 because of the command name. */",
          "new_line_content": "#define REDISMODULE_ARGV_REPLICATE (1<<0)",
          "content_same": false
        },
        {
          "line": 2162,
          "old_api": "zrealloc",
          "new_api": null,
          "old_text": "zrealloc(argv,sizeof(robj*)*argv_size)",
          "new_text": null,
          "old_line_content": "    argv = zrealloc(argv,sizeof(robj*)*argv_size);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2675,
          "old_api": "moduleLoadString",
          "new_api": null,
          "old_text": "moduleLoadString(io,1,lenptr)",
          "new_text": null,
          "old_line_content": "    return moduleLoadString(io,1,lenptr);",
          "new_line_content": "/* Like RedisModule_LoadString() but returns an heap allocated string that",
          "content_same": false
        },
        {
          "line": 1137,
          "old_api": "setExpire",
          "new_api": null,
          "old_text": "setExpire(key->db,key->key,expire)",
          "new_text": null,
          "old_line_content": "        setExpire(key->db,key->key,expire);",
          "new_line_content": " *",
          "content_same": false
        },
        {
          "line": 2165,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(cmdname)",
          "new_text": null,
          "old_line_content": "    argv[0] = createStringObject(cmdname,strlen(cmdname));",
          "new_line_content": "    robj **argv = NULL;",
          "content_same": false
        },
        {
          "line": 1139,
          "old_api": "removeExpire",
          "new_api": null,
          "old_text": "removeExpire(key->db,key->key)",
          "new_text": null,
          "old_line_content": "        removeExpire(key->db,key->key);",
          "new_line_content": " * the key was not open for writing or is an empty key. */",
          "content_same": false
        },
        {
          "line": 1649,
          "old_api": "zslValueLteMax",
          "new_api": null,
          "old_text": "zslValueLteMax(ln->score,&key->zrs)",
          "new_text": null,
          "old_line_content": "                !zslValueLteMax(ln->score,&key->zrs))",
          "new_line_content": "    } else if (key->value->encoding == OBJ_ENCODING_SKIPLIST) {",
          "content_same": false
        },
        {
          "line": 1654,
          "old_api": "zslLexValueLteMax",
          "new_api": null,
          "old_text": "zslLexValueLteMax(ln->ele,&key->zlrs)",
          "new_text": null,
          "old_line_content": "                if (!zslLexValueLteMax(ln->ele,&key->zlrs)) {",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 2172,
          "old_api": "va_arg",
          "new_api": null,
          "old_text": "va_arg(ap,char*)",
          "new_text": null,
          "old_line_content": "            char *cstr = va_arg(ap,char*);",
          "new_line_content": "    /* Build the arguments vector based on the format specifier. */",
          "content_same": false
        },
        {
          "line": 637,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(ptr)",
          "new_text": null,
          "old_line_content": "        case REDISMODULE_AM_STRING: decrRefCount(ptr); break;",
          "new_line_content": "    /* Clear the AUTO_MEMORY flag from the context, otherwise the functions",
          "content_same": false
        },
        {
          "line": 638,
          "old_api": "RM_FreeCallReply",
          "new_api": null,
          "old_text": "RM_FreeCallReply(ptr)",
          "new_text": null,
          "old_line_content": "        case REDISMODULE_AM_REPLY: RM_FreeCallReply(ptr); break;",
          "new_line_content": "     * we call to free the resources, will try to scan the auto release",
          "content_same": false
        },
        {
          "line": 639,
          "old_api": "RM_CloseKey",
          "new_api": null,
          "old_text": "RM_CloseKey(ptr)",
          "new_text": null,
          "old_line_content": "        case REDISMODULE_AM_KEY: RM_CloseKey(ptr); break;",
          "new_line_content": "     * queue to mark the entries as freed. */",
          "content_same": false
        },
        {
          "line": 2175,
          "old_api": "va_arg",
          "new_api": null,
          "old_text": "va_arg(ap,void*)",
          "new_text": null,
          "old_line_content": "            robj *obj = va_arg(ap,void*);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2177,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(obj)",
          "new_text": null,
          "old_line_content": "            incrRefCount(obj);",
          "new_line_content": "    const char *p = fmt;",
          "content_same": false
        },
        {
          "line": 1154,
          "old_api": "RM_DeleteKey",
          "new_api": null,
          "old_text": "RM_DeleteKey(key)",
          "new_text": null,
          "old_line_content": "    RM_DeleteKey(key);",
          "new_line_content": " * -------------------------------------------------------------------------- */",
          "content_same": false
        },
        {
          "line": 2179,
          "old_api": "va_arg",
          "new_api": null,
          "old_text": "va_arg(ap,char*)",
          "new_text": null,
          "old_line_content": "            char *buf = va_arg(ap,char*);",
          "new_line_content": "        if (*p == 'c') {",
          "content_same": false
        },
        {
          "line": 643,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(ctx->amqueue)",
          "new_text": null,
          "old_line_content": "    zfree(ctx->amqueue);",
          "new_line_content": "        void *ptr = ctx->amqueue[j].ptr;",
          "content_same": false
        },
        {
          "line": 1155,
          "old_api": "setKey",
          "new_api": null,
          "old_text": "setKey(key->db,key->key,str)",
          "new_text": null,
          "old_line_content": "    setKey(key->db,key->key,str);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1663,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Unsupported zset encoding\")",
          "new_text": null,
          "old_line_content": "        serverPanic(\"Unsupported zset encoding\");",
          "new_line_content": "                    key->zer = 1;",
          "content_same": false
        },
        {
          "line": 2695,
          "old_api": "rdbLoadBinaryDoubleValue",
          "new_api": null,
          "old_text": "rdbLoadBinaryDoubleValue(io->rio, &value)",
          "new_text": null,
          "old_line_content": "    int retval = rdbLoadBinaryDoubleValue(io->rio, &value);",
          "new_line_content": "        io->bytes += retval;",
          "content_same": false
        },
        {
          "line": 2184,
          "old_api": "createStringObjectFromLongLong",
          "new_api": null,
          "old_text": "createStringObjectFromLongLong(ll)",
          "new_text": null,
          "old_line_content": "            argv[argc++] = createStringObjectFromLongLong(ll);",
          "new_line_content": "            argv[argc++] = obj;",
          "content_same": false
        },
        {
          "line": 2697,
          "old_api": "moduleRDBLoadError",
          "new_api": null,
          "old_text": "moduleRDBLoadError(io)",
          "new_text": null,
          "old_line_content": "        moduleRDBLoadError(io);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1677,
          "old_api": "ziplistPrev",
          "new_api": null,
          "old_text": "ziplistPrev(zl,eptr)",
          "new_text": null,
          "old_line_content": "        prev = ziplistPrev(zl,eptr); /* Go back to previous score. */",
          "new_line_content": " * does not include any item at all. */",
          "content_same": false
        },
        {
          "line": 1678,
          "old_api": "ziplistPrev",
          "new_api": null,
          "old_text": "ziplistPrev(zl,prev)",
          "new_text": null,
          "old_line_content": "        if (prev) prev = ziplistPrev(zl,prev); /* Back to previous ele. */",
          "new_line_content": "int RM_ZsetRangePrev(RedisModuleKey *key) {",
          "content_same": false
        },
        {
          "line": 2194,
          "old_api": "zrealloc",
          "new_api": null,
          "old_text": "zrealloc(argv,sizeof(robj*)*argv_size)",
          "new_text": null,
          "old_line_content": "             argv = zrealloc(argv,sizeof(robj*)*argv_size);",
          "new_line_content": "             /* A vector of strings */",
          "content_same": false
        },
        {
          "line": 660,
          "old_api": "createStringObject",
          "new_api": null,
          "old_text": "createStringObject(ptr,len)",
          "new_text": null,
          "old_line_content": "    RedisModuleString *o = createStringObject(ptr,len);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 661,
          "old_api": "autoMemoryAdd",
          "new_api": null,
          "old_text": "autoMemoryAdd(ctx,REDISMODULE_AM_STRING,o)",
          "new_text": null,
          "old_line_content": "    autoMemoryAdd(ctx,REDISMODULE_AM_STRING,o);",
          "new_line_content": "/* Create a new module string object. The returned string must be freed",
          "content_same": false
        },
        {
          "line": 2198,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(v[i])",
          "new_text": null,
          "old_line_content": "                 incrRefCount(v[i]);",
          "new_line_content": "             /* We need to grow argv to hold the vector's elements.",
          "content_same": false
        },
        {
          "line": 1688,
          "old_api": "ziplistNext",
          "new_api": null,
          "old_text": "ziplistNext(zl,prev)",
          "new_text": null,
          "old_line_content": "                prev = ziplistNext(zl,prev); /* Skip element to get the score.*/",
          "new_line_content": "            key->zer = 1;",
          "content_same": false
        },
        {
          "line": 1689,
          "old_api": "zzlGetScore",
          "new_api": null,
          "old_text": "zzlGetScore(prev)",
          "new_text": null,
          "old_line_content": "                double score = zzlGetScore(prev); /* Obtain the prev score. */",
          "new_line_content": "            return 0;",
          "content_same": false
        },
        {
          "line": 1690,
          "old_api": "zslValueGteMin",
          "new_api": null,
          "old_text": "zslValueGteMin(score,&key->zrs)",
          "new_text": null,
          "old_line_content": "                if (!zslValueGteMin(score,&key->zrs)) {",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 2719,
          "old_api": "lookupCommandByCString",
          "new_api": null,
          "old_text": "lookupCommandByCString((char*)cmdname)",
          "new_text": null,
          "old_line_content": "    cmd = lookupCommandByCString((char*)cmdname);",
          "new_line_content": " * handling is performed by Redis itself. */",
          "content_same": false
        },
        {
          "line": 672,
          "old_api": "ll2string",
          "new_api": null,
          "old_text": "ll2string(buf,sizeof(buf),ll)",
          "new_text": null,
          "old_line_content": "    size_t len = ll2string(buf,sizeof(buf),ll);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 673,
          "old_api": "RM_CreateString",
          "new_api": null,
          "old_text": "RM_CreateString(ctx,buf,len)",
          "new_text": null,
          "old_line_content": "    return RM_CreateString(ctx,buf,len);",
          "new_line_content": "/* Like RedisModule_CreatString(), but creates a string starting from a long long",
          "content_same": false
        },
        {
          "line": 2721,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\n            \"Fatal: AOF method for module data type '%s' tried to \"\n            \"emit unknown command '%s'\",\n            io->type->name, cmdname)",
          "new_text": null,
          "old_line_content": "        serverLog(LL_WARNING,",
          "new_line_content": "    if (io->error) return;",
          "content_same": false
        },
        {
          "line": 2213,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(argv[j])",
          "new_text": null,
          "old_line_content": "        decrRefCount(argv[j]);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2214,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(argv)",
          "new_text": null,
          "old_line_content": "    zfree(argv);",
          "new_line_content": "        p++;",
          "content_same": false
        },
        {
          "line": 683,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(str)",
          "new_text": null,
          "old_line_content": "    decrRefCount(str);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 684,
          "old_api": "autoMemoryFreed",
          "new_api": null,
          "old_text": "autoMemoryFreed(ctx,REDISMODULE_AM_STRING,str)",
          "new_text": null,
          "old_line_content": "    autoMemoryFreed(ctx,REDISMODULE_AM_STRING,str);",
          "new_line_content": "/* Free a module string object obtained with one of the Redis modules API calls",
          "content_same": false
        },
        {
          "line": 2731,
          "old_api": "va_start",
          "new_api": null,
          "old_text": "va_start(ap, fmt)",
          "new_text": null,
          "old_line_content": "    va_start(ap, fmt);",
          "new_line_content": "            \"emit unknown command '%s'\",",
          "content_same": false
        },
        {
          "line": 2732,
          "old_api": "moduleCreateArgvFromUserFormat",
          "new_api": null,
          "old_text": "moduleCreateArgvFromUserFormat(cmdname,fmt,&argc,&flags,ap)",
          "new_text": null,
          "old_line_content": "    argv = moduleCreateArgvFromUserFormat(cmdname,fmt,&argc,&flags,ap);",
          "new_line_content": "            io->type->name, cmdname);",
          "content_same": false
        },
        {
          "line": 2733,
          "old_api": "va_end",
          "new_api": null,
          "old_text": "va_end(ap)",
          "new_text": null,
          "old_line_content": "    va_end(ap);",
          "new_line_content": "        io->error = 1;",
          "content_same": false
        },
        {
          "line": 2735,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\n            \"Fatal: AOF method for module data type '%s' tried to \"\n            \"call RedisModule_EmitAOF() with wrong format specifiers '%s'\",\n            io->type->name, fmt)",
          "new_text": null,
          "old_line_content": "        serverLog(LL_WARNING,",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 1712,
          "old_api": "zslValueGteMin",
          "new_api": null,
          "old_text": "zslValueGteMin(ln->score,&key->zrs)",
          "new_text": null,
          "old_line_content": "                !zslValueGteMin(ln->score,&key->zrs))",
          "new_line_content": "    } else if (key->value->encoding == OBJ_ENCODING_SKIPLIST) {",
          "content_same": false
        },
        {
          "line": 1205,
          "old_api": "dbUnshareStringValue",
          "new_api": null,
          "old_text": "dbUnshareStringValue(key->db, key->key, key->value)",
          "new_text": null,
          "old_line_content": "        key->value = dbUnshareStringValue(key->db, key->key, key->value);",
          "new_line_content": "        return emptystring;",
          "content_same": false
        },
        {
          "line": 1717,
          "old_api": "zslLexValueGteMin",
          "new_api": null,
          "old_text": "zslLexValueGteMin(prev->ele,&key->zlrs)",
          "new_text": null,
          "old_line_content": "                if (!zslLexValueGteMin(prev->ele,&key->zlrs)) {",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 1207,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(key->value->ptr)",
          "new_text": null,
          "old_line_content": "    *len = sdslen(key->value->ptr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2233,
          "old_api": "lookupCommandByCString",
          "new_api": null,
          "old_text": "lookupCommandByCString((char*)cmdname)",
          "new_text": null,
          "old_line_content": "    cmd = lookupCommandByCString((char*)cmdname);",
          "new_line_content": "    struct redisCommand *cmd;",
          "content_same": false
        },
        {
          "line": 2745,
          "old_api": "rioWriteBulkCount",
          "new_api": null,
          "old_text": "rioWriteBulkCount(io->rio,'*',argc)",
          "new_text": null,
          "old_line_content": "    if (!io->error && rioWriteBulkCount(io->rio,'*',argc) == 0)",
          "new_line_content": "            \"call RedisModule_EmitAOF() with wrong format specifiers '%s'\",",
          "content_same": false
        },
        {
          "line": 700,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(str->ptr)",
          "new_text": null,
          "old_line_content": "    return string2ll(str->ptr,sdslen(str->ptr),ll) ? REDISMODULE_OK :",
          "new_line_content": "    return str->ptr;",
          "content_same": false
        },
        {
          "line": 2750,
          "old_api": "rioWriteBulkObject",
          "new_api": null,
          "old_text": "rioWriteBulkObject(io->rio,argv[j])",
          "new_text": null,
          "old_line_content": "        if (!io->error && rioWriteBulkObject(io->rio,argv[j]) == 0)",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1726,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Unsupported zset encoding\")",
          "new_text": null,
          "old_line_content": "        serverPanic(\"Unsupported zset encoding\");",
          "new_line_content": "                    key->zer = 1;",
          "content_same": false
        },
        {
          "line": 2240,
          "old_api": "va_start",
          "new_api": null,
          "old_text": "va_start(ap, fmt)",
          "new_text": null,
          "old_line_content": "    va_start(ap, fmt);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2752,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(argv[j])",
          "new_text": null,
          "old_line_content": "        decrRefCount(argv[j]);",
          "new_line_content": "    /* Bulk count. */",
          "content_same": false
        },
        {
          "line": 2242,
          "old_api": "moduleCreateArgvFromUserFormat",
          "new_api": null,
          "old_text": "moduleCreateArgvFromUserFormat(cmdname,fmt,&argc,&flags,ap)",
          "new_text": null,
          "old_line_content": "    argv = moduleCreateArgvFromUserFormat(cmdname,fmt,&argc,&flags,ap);",
          "new_line_content": "    if (!cmd) {",
          "content_same": false
        },
        {
          "line": 2754,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(argv)",
          "new_text": null,
          "old_line_content": "    zfree(argv);",
          "new_line_content": "        io->error = 1;",
          "content_same": false
        },
        {
          "line": 2244,
          "old_api": "va_end",
          "new_api": null,
          "old_text": "va_end(ap)",
          "new_text": null,
          "old_line_content": "    va_end(ap);",
          "new_line_content": "        return NULL;",
          "content_same": false
        },
        {
          "line": 2766,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen((char*)key)",
          "new_text": null,
          "old_line_content": "    return dictGenHashFunction((unsigned char*)key, strlen((char*)key));",
          "new_line_content": "/* --------------------------------------------------------------------------",
          "content_same": false
        },
        {
          "line": 2770,
          "old_api": "DICT_NOTUSED",
          "new_api": null,
          "old_text": "DICT_NOTUSED(privdata)",
          "new_text": null,
          "old_line_content": "    DICT_NOTUSED(privdata);",
          "new_line_content": "/* server.moduleapi dictionary type. Only uses plain C strings since",
          "content_same": false
        },
        {
          "line": 2771,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(key1,key2)",
          "new_text": null,
          "old_line_content": "    return strcmp(key1,key2) == 0;",
          "new_line_content": " * this gets queries from modules. */",
          "content_same": false
        },
        {
          "line": 1234,
          "old_api": "sdsnewlen",
          "new_api": null,
          "old_text": "sdsnewlen(NULL, newlen)",
          "new_text": null,
          "old_line_content": "        robj *o = createObject(OBJ_STRING,sdsnewlen(NULL, newlen));",
          "new_line_content": "    if (newlen > 512*1024*1024) return REDISMODULE_ERR;",
          "content_same": false
        },
        {
          "line": 1235,
          "old_api": "setKey",
          "new_api": null,
          "old_text": "setKey(key->db,key->key,o)",
          "new_text": null,
          "old_line_content": "        setKey(key->db,key->key,o);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1237,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(o)",
          "new_text": null,
          "old_line_content": "        decrRefCount(o);",
          "new_line_content": "     * doing anything. */",
          "content_same": false
        },
        {
          "line": 1240,
          "old_api": "dbUnshareStringValue",
          "new_api": null,
          "old_text": "dbUnshareStringValue(key->db, key->key, key->value)",
          "new_text": null,
          "old_line_content": "        key->value = dbUnshareStringValue(key->db, key->key, key->value);",
          "new_line_content": "    if (key->value == NULL) {",
          "content_same": false
        },
        {
          "line": 1241,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(key->value->ptr)",
          "new_text": null,
          "old_line_content": "        size_t curlen = sdslen(key->value->ptr);",
          "new_line_content": "        /* Empty key: create it with the new size. */",
          "content_same": false
        },
        {
          "line": 730,
          "old_api": "addReplyErrorFormat",
          "new_api": null,
          "old_text": "addReplyErrorFormat(ctx->client,\n        \"wrong number of arguments for '%s' command\",\n        (char*)ctx->client->argv[0]->ptr)",
          "new_text": null,
          "old_line_content": "    addReplyErrorFormat(ctx->client,",
          "new_line_content": "/* Send an error about the number of arguments given to the command,",
          "content_same": false
        },
        {
          "line": 2268,
          "old_api": "getNodeByQuery",
          "new_api": null,
          "old_text": "getNodeByQuery(c,c->cmd,c->argv,c->argc,NULL,NULL)",
          "new_text": null,
          "old_line_content": "        if (getNodeByQuery(c,c->cmd,c->argv,c->argc,NULL,NULL) !=",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1247,
          "old_api": "sdsavail",
          "new_api": null,
          "old_text": "sdsavail(key->value->ptr)",
          "new_text": null,
          "old_line_content": "            if (sdslen(key->value->ptr) < sdsavail(key->value->ptr))",
          "new_line_content": "        /* Unshare and resize. */",
          "content_same": false
        },
        {
          "line": 2784,
          "old_api": "dictAdd",
          "new_api": null,
          "old_text": "dictAdd(server.moduleapi, (char*)funcname, funcptr)",
          "new_text": null,
          "old_line_content": "    return dictAdd(server.moduleapi, (char*)funcname, funcptr);",
          "new_line_content": "    NULL,                      /* key dup */",
          "content_same": false
        },
        {
          "line": 739,
          "old_api": "addReplyLongLong",
          "new_api": null,
          "old_text": "addReplyLongLong(ctx->client,ll)",
          "new_text": null,
          "old_line_content": "    addReplyLongLong(ctx->client,ll);",
          "new_line_content": "        \"wrong number of arguments for '%s' command\",",
          "content_same": false
        },
        {
          "line": 2279,
          "old_api": "moduleReplicateMultiIfNeeded",
          "new_api": null,
          "old_text": "moduleReplicateMultiIfNeeded(ctx)",
          "new_text": null,
          "old_line_content": "    if (replicate) moduleReplicateMultiIfNeeded(ctx);",
          "new_line_content": "            errno = EPERM;",
          "content_same": false
        },
        {
          "line": 2793,
          "old_api": "REGISTER_API",
          "new_api": null,
          "old_text": "REGISTER_API(Alloc)",
          "new_text": null,
          "old_line_content": "    REGISTER_API(Alloc);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2794,
          "old_api": "REGISTER_API",
          "new_api": null,
          "old_text": "REGISTER_API(Realloc)",
          "new_text": null,
          "old_line_content": "    REGISTER_API(Realloc);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2795,
          "old_api": "REGISTER_API",
          "new_api": null,
          "old_text": "REGISTER_API(Free)",
          "new_text": null,
          "old_line_content": "    REGISTER_API(Free);",
          "new_line_content": "#define REGISTER_API(name) \\",
          "content_same": false
        },
        {
          "line": 748,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(strmsg,msg)",
          "new_text": null,
          "old_line_content": "    strmsg = sdscat(strmsg,msg);",
          "new_line_content": "    return REDISMODULE_OK;",
          "content_same": false
        },
        {
          "line": 749,
          "old_api": "sdscatlen",
          "new_api": null,
          "old_text": "sdscatlen(strmsg,\"\\r\\n\",2)",
          "new_text": null,
          "old_line_content": "    strmsg = sdscatlen(strmsg,\"\\r\\n\",2);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 750,
          "old_api": "addReplySds",
          "new_api": null,
          "old_text": "addReplySds(ctx->client,strmsg)",
          "new_text": null,
          "old_line_content": "    addReplySds(ctx->client,strmsg);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2796,
          "old_api": "REGISTER_API",
          "new_api": null,
          "old_text": "REGISTER_API(Strdup)",
          "new_text": null,
          "old_line_content": "    REGISTER_API(Strdup);",
          "new_line_content": "    moduleRegisterApi(\"RedisModule_\" #name, (void *)(unsigned long)RM_ ## name)",
          "content_same": false
        },
        {
          "line": 2797,
          "old_api": "REGISTER_API",
          "new_api": null,
          "old_text": "REGISTER_API(CreateCommand)",
          "new_text": null,
          "old_line_content": "    REGISTER_API(CreateCommand);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2798,
          "old_api": "REGISTER_API",
          "new_api": null,
          "old_text": "REGISTER_API(SetModuleAttribs)",
          "new_text": null,
          "old_line_content": "    REGISTER_API(SetModuleAttribs);",
          "new_line_content": "/* Register all the APIs we export. */",
          "content_same": false
        },
        {
          "line": 2799,
          "old_api": "REGISTER_API",
          "new_api": null,
          "old_text": "REGISTER_API(WrongArity)",
          "new_text": null,
          "old_line_content": "    REGISTER_API(WrongArity);",
          "new_line_content": "void moduleRegisterCoreAPI(void) {",
          "content_same": false
        },
        {
          "line": 1265,
          "old_api": "moduleCreateEmptyKey",
          "new_api": null,
          "old_text": "moduleCreateEmptyKey(key,REDISMODULE_KEYTYPE_LIST)",
          "new_text": null,
          "old_line_content": "    if (key->value == NULL) moduleCreateEmptyKey(key,REDISMODULE_KEYTYPE_LIST);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2292,
          "old_api": "sdsnewlen",
          "new_api": null,
          "old_text": "sdsnewlen(c->buf,c->bufpos)",
          "new_text": null,
          "old_line_content": "    sds proto = sdsnewlen(c->buf,c->bufpos);",
          "new_line_content": "        call_flags |= CMD_CALL_PROPAGATE_AOF;",
          "content_same": false
        },
        {
          "line": 1266,
          "old_api": "listTypePush",
          "new_api": null,
          "old_text": "listTypePush(key->value, ele,\n        (where == REDISMODULE_LIST_HEAD) ? QUICKLIST_HEAD : QUICKLIST_TAIL)",
          "new_text": null,
          "old_line_content": "    listTypePush(key->value, ele,",
          "new_line_content": "/* Push an element into a list, on head or tail depending on 'where' argumnet.",
          "content_same": false
        },
        {
          "line": 2294,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(c->reply)",
          "new_text": null,
          "old_line_content": "    while(listLength(c->reply)) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2297,
          "old_api": "sdscatsds",
          "new_api": null,
          "old_text": "sdscatsds(proto,o)",
          "new_text": null,
          "old_line_content": "        proto = sdscatsds(proto,o);",
          "new_line_content": "    /* Convert the result of the Redis command into a suitable Lua type.",
          "content_same": false
        },
        {
          "line": 2298,
          "old_api": "listFirst",
          "new_api": null,
          "old_text": "listFirst(c->reply)",
          "new_text": null,
          "old_line_content": "        listDelNode(c->reply,listFirst(c->reply));",
          "new_line_content": "     * The first thing we need is to create a single string from the client",
          "content_same": false
        },
        {
          "line": 1788,
          "old_api": "moduleCreateEmptyKey",
          "new_api": null,
          "old_text": "moduleCreateEmptyKey(key,REDISMODULE_KEYTYPE_HASH)",
          "new_text": null,
          "old_line_content": "    if (key->value == NULL) moduleCreateEmptyKey(key,REDISMODULE_KEYTYPE_HASH);",
          "new_line_content": " *",
          "content_same": false
        },
        {
          "line": 2301,
          "old_api": "autoMemoryAdd",
          "new_api": null,
          "old_text": "autoMemoryAdd(ctx,REDISMODULE_AM_REPLY,reply)",
          "new_text": null,
          "old_line_content": "    autoMemoryAdd(ctx,REDISMODULE_AM_REPLY,reply);",
          "new_line_content": "    c->bufpos = 0;",
          "content_same": false
        },
        {
          "line": 1791,
          "old_api": "va_start",
          "new_api": null,
          "old_text": "va_start(ap, flags)",
          "new_text": null,
          "old_line_content": "    va_start(ap, flags);",
          "new_line_content": " */",
          "content_same": false
        },
        {
          "line": 2304,
          "old_api": "freeClient",
          "new_api": null,
          "old_text": "freeClient(c)",
          "new_text": null,
          "old_line_content": "    freeClient(c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 769,
          "old_api": "replyWithStatus",
          "new_api": null,
          "old_text": "replyWithStatus(ctx,err,\"-\")",
          "new_text": null,
          "old_line_content": "    return replyWithStatus(ctx,err,\"-\");",
          "new_line_content": " *",
          "content_same": false
        },
        {
          "line": 1282,
          "old_api": "listTypePop",
          "new_api": null,
          "old_text": "listTypePop(key->value,\n        (where == REDISMODULE_LIST_HEAD) ? QUICKLIST_HEAD : QUICKLIST_TAIL)",
          "new_text": null,
          "old_line_content": "    robj *ele = listTypePop(key->value,",
          "new_line_content": " * head or tail. The command returns NULL if:",
          "content_same": false
        },
        {
          "line": 1284,
          "old_api": "getDecodedObject",
          "new_api": null,
          "old_text": "getDecodedObject(ele)",
          "new_text": null,
          "old_line_content": "    robj *decoded = getDecodedObject(ele);",
          "new_line_content": " * 2) The key was not open for writing.",
          "content_same": false
        },
        {
          "line": 1285,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(ele)",
          "new_text": null,
          "old_line_content": "    decrRefCount(ele);",
          "new_line_content": " * 3) The key is not a list. */",
          "content_same": false
        },
        {
          "line": 1286,
          "old_api": "moduleDelKeyIfEmpty",
          "new_api": null,
          "old_text": "moduleDelKeyIfEmpty(key)",
          "new_text": null,
          "old_line_content": "    moduleDelKeyIfEmpty(key);",
          "new_line_content": "RedisModuleString *RM_ListPop(RedisModuleKey *key, int where) {",
          "content_same": false
        },
        {
          "line": 2311,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(reply->proto)",
          "new_text": null,
          "old_line_content": "    if (reply->proto) *len = sdslen(reply->proto);",
          "new_line_content": "cleanup:",
          "content_same": false
        },
        {
          "line": 1287,
          "old_api": "autoMemoryAdd",
          "new_api": null,
          "old_text": "autoMemoryAdd(key->ctx,REDISMODULE_AM_STRING,decoded)",
          "new_text": null,
          "old_line_content": "    autoMemoryAdd(key->ctx,REDISMODULE_AM_STRING,decoded);",
          "new_line_content": "    if (!(key->mode & REDISMODULE_WRITE) ||",
          "content_same": false
        },
        {
          "line": 1798,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(cfield)",
          "new_text": null,
          "old_line_content": "            field = createRawStringObject(cfield,strlen(cfield));",
          "new_line_content": "    int updated = 0;",
          "content_same": false
        },
        {
          "line": 778,
          "old_api": "replyWithStatus",
          "new_api": null,
          "old_text": "replyWithStatus(ctx,msg,\"+\")",
          "new_text": null,
          "old_line_content": "    return replyWithStatus(ctx,msg,\"+\");",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1800,
          "old_api": "va_arg",
          "new_api": null,
          "old_text": "va_arg(ap,RedisModuleString*)",
          "new_text": null,
          "old_line_content": "            field = va_arg(ap,RedisModuleString*);",
          "new_line_content": "    while(1) {",
          "content_same": false
        },
        {
          "line": 1803,
          "old_api": "va_arg",
          "new_api": null,
          "old_text": "va_arg(ap,RedisModuleString*)",
          "new_text": null,
          "old_line_content": "        value = va_arg(ap,RedisModuleString*);",
          "new_line_content": "        if (flags & REDISMODULE_HASH_CFIELDS) {",
          "content_same": false
        },
        {
          "line": 1807,
          "old_api": "hashTypeExists",
          "new_api": null,
          "old_text": "hashTypeExists(key->value, field->ptr)",
          "new_text": null,
          "old_line_content": "            int exists = hashTypeExists(key->value, field->ptr);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 794,
          "old_api": "zrealloc",
          "new_api": null,
          "old_text": "zrealloc(ctx->postponed_arrays,sizeof(void*)*\n                (ctx->postponed_arrays_count+1))",
          "new_text": null,
          "old_line_content": "        ctx->postponed_arrays = zrealloc(ctx->postponed_arrays,sizeof(void*)*",
          "new_line_content": " * the function can be called with the special count",
          "content_same": false
        },
        {
          "line": 1818,
          "old_api": "hashTypeDelete",
          "new_api": null,
          "old_text": "hashTypeDelete(key->value, field->ptr)",
          "new_text": null,
          "old_line_content": "            updated += hashTypeDelete(key->value, field->ptr);",
          "new_line_content": "            {",
          "content_same": false
        },
        {
          "line": 797,
          "old_api": "addDeferredMultiBulkLength",
          "new_api": null,
          "old_text": "addDeferredMultiBulkLength(ctx->client)",
          "new_text": null,
          "old_line_content": "            addDeferredMultiBulkLength(ctx->client);",
          "new_line_content": " * latest \"open\" count if there are multiple ones).",
          "content_same": false
        },
        {
          "line": 800,
          "old_api": "addReplyMultiBulkLen",
          "new_api": null,
          "old_text": "addReplyMultiBulkLen(ctx->client,len)",
          "new_text": null,
          "old_line_content": "        addReplyMultiBulkLen(ctx->client,len);",
          "new_line_content": "int RM_ReplyWithArray(RedisModuleCtx *ctx, long len) {",
          "content_same": false
        },
        {
          "line": 1829,
          "old_api": "hashTypeSet",
          "new_api": null,
          "old_text": "hashTypeSet(key->value, field->ptr, value->ptr, low_flags)",
          "new_text": null,
          "old_line_content": "        updated += hashTypeSet(key->value, field->ptr, value->ptr, low_flags);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1835,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(field)",
          "new_text": null,
          "old_line_content": "           decrRefCount(field);",
          "new_line_content": "        if (flags & REDISMODULE_HASH_CFIELDS)",
          "content_same": false
        },
        {
          "line": 1838,
          "old_api": "va_end",
          "new_api": null,
          "old_text": "va_end(ap)",
          "new_text": null,
          "old_line_content": "    va_end(ap);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1839,
          "old_api": "moduleDelKeyIfEmpty",
          "new_api": null,
          "old_text": "moduleDelKeyIfEmpty(key)",
          "new_text": null,
          "old_line_content": "    moduleDelKeyIfEmpty(key);",
          "new_line_content": "        /* If CFIELDS is active, SDS string ownership is now of hashTypeSet(),",
          "content_same": false
        },
        {
          "line": 2357,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(name)",
          "new_text": null,
          "old_line_content": "    if (strlen(name) != 9) return 0;",
          "new_line_content": "             \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\"",
          "content_same": false
        },
        {
          "line": 2362,
          "old_api": "strchr",
          "new_api": null,
          "old_text": "strchr(cset,name[j])",
          "new_text": null,
          "old_line_content": "        char *p = strchr(cset,name[j]);",
          "new_line_content": "    /* We use 64 symbols so that we can map each character into 6 bits",
          "content_same": false
        },
        {
          "line": 833,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\n            \"API misuse detected in module %s: \"\n            \"RedisModule_ReplySetArrayLength() called without previous \"\n            \"RedisModule_ReplyWithArray(ctx,REDISMODULE_POSTPONED_ARRAY_LEN) \"\n            \"call.\", ctx->module->name)",
          "new_text": null,
          "old_line_content": "        serverLog(LL_WARNING,",
          "new_line_content": " *",
          "content_same": false
        },
        {
          "line": 1345,
          "old_api": "moduleCreateEmptyKey",
          "new_api": null,
          "old_text": "moduleCreateEmptyKey(key,REDISMODULE_KEYTYPE_ZSET)",
          "new_text": null,
          "old_line_content": "    if (key->value == NULL) moduleCreateEmptyKey(key,REDISMODULE_KEYTYPE_ZSET);",
          "new_line_content": " * * The key was not opened for writing.",
          "content_same": false
        },
        {
          "line": 1346,
          "old_api": "RM_ZsetAddFlagsToCoreFlags",
          "new_api": null,
          "old_text": "RM_ZsetAddFlagsToCoreFlags(*flagsptr)",
          "new_text": null,
          "old_line_content": "    if (flagsptr) flags = RM_ZsetAddFlagsToCoreFlags(*flagsptr);",
          "new_line_content": " * * The key is of the wrong type.",
          "content_same": false
        },
        {
          "line": 1347,
          "old_api": "zsetAdd",
          "new_api": null,
          "old_text": "zsetAdd(key->value,score,ele->ptr,&flags,NULL)",
          "new_text": null,
          "old_line_content": "    if (zsetAdd(key->value,score,ele->ptr,&flags,NULL) == 0) {",
          "new_line_content": " * * 'score' double value is not a number (NaN).",
          "content_same": false
        },
        {
          "line": 2375,
          "old_api": "dictGetIterator",
          "new_api": null,
          "old_text": "dictGetIterator(modules)",
          "new_text": null,
          "old_line_content": "    dictIterator *di = dictGetIterator(modules);",
          "new_line_content": "    id = (id << 10) | encver;",
          "content_same": false
        },
        {
          "line": 1351,
          "old_api": "RM_ZsetAddFlagsFromCoreFlags",
          "new_api": null,
          "old_text": "RM_ZsetAddFlagsFromCoreFlags(flags)",
          "new_text": null,
          "old_line_content": "    if (flagsptr) *flagsptr = RM_ZsetAddFlagsFromCoreFlags(flags);",
          "new_line_content": "    if (!(key->mode & REDISMODULE_WRITE)) return REDISMODULE_ERR;",
          "content_same": false
        },
        {
          "line": 2378,
          "old_api": "dictNext",
          "new_api": null,
          "old_text": "dictNext(di)",
          "new_text": null,
          "old_line_content": "    while ((de = dictNext(di)) != NULL) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2379,
          "old_api": "dictGetVal",
          "new_api": null,
          "old_text": "dictGetVal(de)",
          "new_text": null,
          "old_line_content": "        struct RedisModule *module = dictGetVal(de);",
          "new_line_content": "/* Search, in the list of exported data types of all the modules registered,",
          "content_same": false
        },
        {
          "line": 845,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(ctx->postponed_arrays)",
          "new_text": null,
          "old_line_content": "        zfree(ctx->postponed_arrays);",
          "new_line_content": "            \"call.\", ctx->module->name);",
          "content_same": false
        },
        {
          "line": 2384,
          "old_api": "listNext",
          "new_api": null,
          "old_text": "listNext(&li)",
          "new_text": null,
          "old_line_content": "        while((ln = listNext(&li))) {",
          "new_line_content": "    dictEntry *de;",
          "content_same": false
        },
        {
          "line": 2898,
          "old_api": "listRewind",
          "new_api": null,
          "old_text": "listRewind(server.loadmodule_queue,&li)",
          "new_text": null,
          "old_line_content": "    listRewind(server.loadmodule_queue,&li);",
          "new_line_content": " * The function aborts the server on errors, since to start with missing",
          "content_same": false
        },
        {
          "line": 2899,
          "old_api": "listNext",
          "new_api": null,
          "old_text": "listNext(&li)",
          "new_text": null,
          "old_line_content": "    while((ln = listNext(&li))) {",
          "new_line_content": " * modules is not considered sane: clients may rely on the existance of",
          "content_same": false
        },
        {
          "line": 2901,
          "old_api": "moduleLoad",
          "new_api": null,
          "old_text": "moduleLoad(loadmod->path,(void **)loadmod->argv,loadmod->argc)",
          "new_text": null,
          "old_line_content": "        if (moduleLoad(loadmod->path,(void **)loadmod->argv,loadmod->argc)",
          "new_line_content": " * if this instance is a slave, it must understand commands from master. */",
          "content_same": false
        },
        {
          "line": 854,
          "old_api": "addReplyBulkCBuffer",
          "new_api": null,
          "old_text": "addReplyBulkCBuffer(ctx->client,(char*)buf,len)",
          "new_text": null,
          "old_line_content": "    addReplyBulkCBuffer(ctx->client,(char*)buf,len);",
          "new_line_content": "        ctx->postponed_arrays = NULL;",
          "content_same": false
        },
        {
          "line": 2904,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\n                \"Can't load module from %s: server aborting\",\n                loadmod->path)",
          "new_text": null,
          "old_line_content": "            serverLog(LL_WARNING,",
          "new_line_content": "    listNode *ln;",
          "content_same": false
        },
        {
          "line": 1372,
          "old_api": "moduleCreateEmptyKey",
          "new_api": null,
          "old_text": "moduleCreateEmptyKey(key,REDISMODULE_KEYTYPE_ZSET)",
          "new_text": null,
          "old_line_content": "    if (key->value == NULL) moduleCreateEmptyKey(key,REDISMODULE_KEYTYPE_ZSET);",
          "new_line_content": " *",
          "content_same": false
        },
        {
          "line": 1373,
          "old_api": "RM_ZsetAddFlagsToCoreFlags",
          "new_api": null,
          "old_text": "RM_ZsetAddFlagsToCoreFlags(*flagsptr)",
          "new_text": null,
          "old_line_content": "    if (flagsptr) flags = RM_ZsetAddFlagsToCoreFlags(*flagsptr);",
          "new_line_content": " * This function has an additional field 'newscore', if not NULL is filled",
          "content_same": false
        },
        {
          "line": 1375,
          "old_api": "zsetAdd",
          "new_api": null,
          "old_text": "zsetAdd(key->value,score,ele->ptr,&flags,newscore)",
          "new_text": null,
          "old_line_content": "    if (zsetAdd(key->value,score,ele->ptr,&flags,newscore) == 0) {",
          "new_line_content": " * is returned. */",
          "content_same": false
        },
        {
          "line": 1888,
          "old_api": "va_start",
          "new_api": null,
          "old_text": "va_start(ap, flags)",
          "new_text": null,
          "old_line_content": "    va_start(ap, flags);",
          "new_line_content": " *",
          "content_same": false
        },
        {
          "line": 2913,
          "old_api": "listRelease",
          "new_api": null,
          "old_text": "listRelease(module->types)",
          "new_text": null,
          "old_line_content": "    listRelease(module->types);",
          "new_line_content": "                \"Can't load module from %s: server aborting\",",
          "content_same": false
        },
        {
          "line": 2914,
          "old_api": "sdsfree",
          "new_api": null,
          "old_text": "sdsfree(module->name)",
          "new_text": null,
          "old_line_content": "    sdsfree(module->name);",
          "new_line_content": "                loadmod->path);",
          "content_same": false
        },
        {
          "line": 1894,
          "old_api": "va_arg",
          "new_api": null,
          "old_text": "va_arg(ap,char*)",
          "new_text": null,
          "old_line_content": "            char *cfield = va_arg(ap,char*);",
          "new_line_content": "    if (key->value && key->value->type != OBJ_HASH) return REDISMODULE_ERR;",
          "content_same": false
        },
        {
          "line": 871,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(ctx->client,shared.nullbulk)",
          "new_text": null,
          "old_line_content": "    addReply(ctx->client,shared.nullbulk);",
          "new_line_content": "    return REDISMODULE_OK;",
          "content_same": false
        },
        {
          "line": 1384,
          "old_api": "RM_ZsetAddFlagsFromCoreFlags",
          "new_api": null,
          "old_text": "RM_ZsetAddFlagsFromCoreFlags(flags)",
          "new_text": null,
          "old_line_content": "    if (flagsptr) *flagsptr = RM_ZsetAddFlagsFromCoreFlags(flags);",
          "new_line_content": "        if (flagsptr) *flagsptr = 0;",
          "content_same": false
        },
        {
          "line": 1898,
          "old_api": "va_arg",
          "new_api": null,
          "old_text": "va_arg(ap,RedisModuleString*)",
          "new_text": null,
          "old_line_content": "            field = va_arg(ap,RedisModuleString*);",
          "new_line_content": "        RedisModuleString *field, **valueptr;",
          "content_same": false
        },
        {
          "line": 2925,
          "old_api": "dlopen",
          "new_api": null,
          "old_text": "dlopen(path,RTLD_NOW|RTLD_LOCAL)",
          "new_text": null,
          "old_line_content": "    handle = dlopen(path,RTLD_NOW|RTLD_LOCAL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2414,
          "old_api": "dictGetIterator",
          "new_api": null,
          "old_text": "dictGetIterator(modules)",
          "new_text": null,
          "old_line_content": "    dictIterator *di = dictGetIterator(modules);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2927,
          "old_api": "dlerror",
          "new_api": null,
          "old_text": "dlerror()",
          "new_text": null,
          "old_line_content": "        serverLog(LL_WARNING, \"Module %s failed to load: %s\", path, dlerror());",
          "new_line_content": " * C_ERR is returned. */",
          "content_same": false
        },
        {
          "line": 2417,
          "old_api": "dictNext",
          "new_api": null,
          "old_text": "dictNext(di)",
          "new_text": null,
          "old_line_content": "    while ((de = dictNext(di)) != NULL) {",
          "new_line_content": "    for (j = 0; j < MODULE_LOOKUP_CACHE_SIZE; j++)",
          "content_same": false
        },
        {
          "line": 2418,
          "old_api": "dictGetVal",
          "new_api": null,
          "old_text": "dictGetVal(de)",
          "new_text": null,
          "old_line_content": "        struct RedisModule *module = dictGetVal(de);",
          "new_line_content": "        if (cache[j].id == id) return cache[j].mt;",
          "content_same": false
        },
        {
          "line": 882,
          "old_api": "sdsnewlen",
          "new_api": null,
          "old_text": "sdsnewlen(reply->proto, reply->protolen)",
          "new_text": null,
          "old_line_content": "    sds proto = sdsnewlen(reply->proto, reply->protolen);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 883,
          "old_api": "addReplySds",
          "new_api": null,
          "old_text": "addReplySds(ctx->client,proto)",
          "new_text": null,
          "old_line_content": "    addReplySds(ctx->client,proto);",
          "new_line_content": "/* Reply exactly what a Redis command returned us with RedisModule_Call().",
          "content_same": false
        },
        {
          "line": 2930,
          "old_api": "dlsym",
          "new_api": null,
          "old_text": "dlsym(handle,\"RedisModule_OnLoad\")",
          "new_text": null,
          "old_line_content": "    onload = (int (*)(void *, void **, int))(unsigned long) dlsym(handle,\"RedisModule_OnLoad\");",
          "new_line_content": "    void *handle;",
          "content_same": false
        },
        {
          "line": 2932,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\n            \"Module %s does not export RedisModule_OnLoad() \"\n            \"symbol. Module not loaded.\",path)",
          "new_text": null,
          "old_line_content": "        serverLog(LL_WARNING,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2423,
          "old_api": "listNext",
          "new_api": null,
          "old_text": "listNext(&li)",
          "new_text": null,
          "old_line_content": "        while((ln = listNext(&li))) {",
          "new_line_content": "    dictEntry *de;",
          "content_same": false
        },
        {
          "line": 1910,
          "old_api": "va_arg",
          "new_api": null,
          "old_text": "va_arg(ap,RedisModuleString**)",
          "new_text": null,
          "old_line_content": "            valueptr = va_arg(ap,RedisModuleString**);",
          "new_line_content": "        /* Query the hash for existence or value object. */",
          "content_same": false
        },
        {
          "line": 2937,
          "old_api": "onload",
          "new_api": null,
          "old_text": "onload((void*)&ctx,module_argv,module_argc)",
          "new_text": null,
          "old_line_content": "    if (onload((void*)&ctx,module_argv,module_argc) == REDISMODULE_ERR) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2939,
          "old_api": "dlclose",
          "new_api": null,
          "old_text": "dlclose(handle)",
          "new_text": null,
          "old_line_content": "        dlclose(handle);",
          "new_line_content": "    if (onload == NULL) {",
          "content_same": false
        },
        {
          "line": 1915,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(*valueptr)",
          "new_text": null,
          "old_line_content": "                    decrRefCount(*valueptr);",
          "new_line_content": "            else",
          "content_same": false
        },
        {
          "line": 894,
          "old_api": "addReplyDouble",
          "new_api": null,
          "old_text": "addReplyDouble(ctx->client,d)",
          "new_text": null,
          "old_line_content": "    addReplyDouble(ctx->client,d);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1919,
          "old_api": "autoMemoryAdd",
          "new_api": null,
          "old_text": "autoMemoryAdd(key->ctx,REDISMODULE_AM_STRING,*valueptr)",
          "new_text": null,
          "old_line_content": "                    autoMemoryAdd(key->ctx,REDISMODULE_AM_STRING,*valueptr);",
          "new_line_content": "            if (key->value) {",
          "content_same": false
        },
        {
          "line": 1409,
          "old_api": "zsetDel",
          "new_api": null,
          "old_text": "zsetDel(key->value,ele->ptr)",
          "new_text": null,
          "old_line_content": "    if (key->value != NULL && zsetDel(key->value,ele->ptr)) {",
          "new_line_content": " * setting it to 1 or 0 depending on the outcome of the operation.",
          "content_same": false
        },
        {
          "line": 2949,
          "old_api": "moduleFreeContext",
          "new_api": null,
          "old_text": "moduleFreeContext(&ctx)",
          "new_text": null,
          "old_line_content": "    moduleFreeContext(&ctx);",
          "new_line_content": "            \"Module %s initialization failed. Module not loaded\",path);",
          "content_same": false
        },
        {
          "line": 1926,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(field)",
          "new_text": null,
          "old_line_content": "        if (flags & REDISMODULE_HASH_CFIELDS) decrRefCount(field);",
          "new_line_content": "                if (*valueptr)",
          "content_same": false
        },
        {
          "line": 1928,
          "old_api": "va_end",
          "new_api": null,
          "old_text": "va_end(ap)",
          "new_text": null,
          "old_line_content": "    va_end(ap);",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 907,
          "old_api": "execCommandPropagateMulti",
          "new_api": null,
          "old_text": "execCommandPropagateMulti(ctx->client)",
          "new_text": null,
          "old_line_content": "    execCommandPropagateMulti(ctx->client);",
          "new_line_content": " * Commands replication API",
          "content_same": false
        },
        {
          "line": 2960,
          "old_api": "dictFetchValue",
          "new_api": null,
          "old_text": "dictFetchValue(modules,name)",
          "new_text": null,
          "old_line_content": "    struct RedisModule *module = dictFetchValue(modules,name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1428,
          "old_api": "zsetScore",
          "new_api": null,
          "old_text": "zsetScore(key->value,ele->ptr,score)",
          "new_text": null,
          "old_line_content": "    if (zsetScore(key->value,ele->ptr,score) == C_ERR) return REDISMODULE_ERR;",
          "new_line_content": " *",
          "content_same": false
        },
        {
          "line": 1941,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(*reply))",
          "new_text": null,
          "old_line_content": "    RedisModuleCallReply *reply = zmalloc(sizeof(*reply));",
          "new_line_content": " * Redis <-> Modules generic Call() API",
          "content_same": false
        },
        {
          "line": 2967,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(module->types)",
          "new_text": null,
          "old_line_content": "    if (listLength(module->types)) {",
          "new_line_content": "int moduleUnload(sds name) {",
          "content_same": false
        },
        {
          "line": 1944,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(proto)",
          "new_text": null,
          "old_line_content": "    reply->protolen = sdslen(proto);",
          "new_line_content": "/* Create a new RedisModuleCallReply object. The processing of the reply",
          "content_same": false
        },
        {
          "line": 2973,
          "old_api": "dictGetSafeIterator",
          "new_api": null,
          "old_text": "dictGetSafeIterator(server.commands)",
          "new_text": null,
          "old_line_content": "    dictIterator *di = dictGetSafeIterator(server.commands);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2976,
          "old_api": "dictGetVal",
          "new_api": null,
          "old_text": "dictGetVal(de)",
          "new_text": null,
          "old_line_content": "        struct redisCommand *cmd = dictGetVal(de);",
          "new_line_content": "        errno = EBUSY;",
          "content_same": false
        },
        {
          "line": 1440,
          "old_api": "zslFreeLexRange",
          "new_api": null,
          "old_text": "zslFreeLexRange(&key->zlrs)",
          "new_text": null,
          "old_line_content": "        zslFreeLexRange(&key->zlrs);",
          "new_line_content": "/* --------------------------------------------------------------------------",
          "content_same": false
        },
        {
          "line": 2982,
          "old_api": "dictDelete",
          "new_api": null,
          "old_text": "dictDelete(server.commands,cmdname)",
          "new_text": null,
          "old_line_content": "                dictDelete(server.commands,cmdname);",
          "new_line_content": "    dictEntry *de;",
          "content_same": false
        },
        {
          "line": 936,
          "old_api": "lookupCommandByCString",
          "new_api": null,
          "old_text": "lookupCommandByCString((char*)cmdname)",
          "new_text": null,
          "old_line_content": "    cmd = lookupCommandByCString((char*)cmdname);",
          "new_line_content": " * The command returns REDISMODULE_ERR if the format specifiers are invalid",
          "content_same": false
        },
        {
          "line": 2985,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(cp->rediscmd)",
          "new_text": null,
          "old_line_content": "                zfree(cp->rediscmd);",
          "new_line_content": "        if (cmd->proc == RedisModuleCommandDispatcher) {",
          "content_same": false
        },
        {
          "line": 2986,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(cp)",
          "new_text": null,
          "old_line_content": "                zfree(cp);",
          "new_line_content": "            RedisModuleCommandProxy *cp =",
          "content_same": false
        },
        {
          "line": 940,
          "old_api": "va_start",
          "new_api": null,
          "old_text": "va_start(ap, fmt)",
          "new_text": null,
          "old_line_content": "    va_start(ap, fmt);",
          "new_line_content": "    robj **argv = NULL;",
          "content_same": false
        },
        {
          "line": 941,
          "old_api": "moduleCreateArgvFromUserFormat",
          "new_api": null,
          "old_text": "moduleCreateArgvFromUserFormat(cmdname,fmt,&argc,&flags,ap)",
          "new_text": null,
          "old_line_content": "    argv = moduleCreateArgvFromUserFormat(cmdname,fmt,&argc,&flags,ap);",
          "new_line_content": "    int argc = 0, flags = 0, j;",
          "content_same": false
        },
        {
          "line": 942,
          "old_api": "va_end",
          "new_api": null,
          "old_text": "va_end(ap)",
          "new_text": null,
          "old_line_content": "    va_end(ap);",
          "new_line_content": "    va_list ap;",
          "content_same": false
        },
        {
          "line": 946,
          "old_api": "moduleReplicateMultiIfNeeded",
          "new_api": null,
          "old_text": "moduleReplicateMultiIfNeeded(ctx)",
          "new_text": null,
          "old_line_content": "    moduleReplicateMultiIfNeeded(ctx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 947,
          "old_api": "alsoPropagate",
          "new_api": null,
          "old_text": "alsoPropagate(cmd,ctx->client->db->id,argv,argc,\n        PROPAGATE_AOF|PROPAGATE_REPL)",
          "new_text": null,
          "old_line_content": "    alsoPropagate(cmd,ctx->client->db->id,argv,argc,",
          "new_line_content": "    /* Create the client and dispatch the command. */",
          "content_same": false
        },
        {
          "line": 2995,
          "old_api": "dlclose",
          "new_api": null,
          "old_text": "dlclose(module->handle)",
          "new_text": null,
          "old_line_content": "    if (dlclose(module->handle) == -1) {",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 2996,
          "old_api": "dlerror",
          "new_api": null,
          "old_text": "dlerror()",
          "new_text": null,
          "old_line_content": "        char *error = dlerror();",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1972,
          "old_api": "moduleParseCallReply_Int",
          "new_api": null,
          "old_text": "moduleParseCallReply_Int(reply)",
          "new_text": null,
          "old_line_content": "    case ':': moduleParseCallReply_Int(reply); break;",
          "new_line_content": "/* Do nothing if REDISMODULE_REPLYFLAG_TOPARSE is false, otherwise",
          "content_same": false
        },
        {
          "line": 951,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(argv[j])",
          "new_text": null,
          "old_line_content": "    for (j = 0; j < argc; j++) decrRefCount(argv[j]);",
          "new_line_content": "    if (argv == NULL) return REDISMODULE_ERR;",
          "content_same": false
        },
        {
          "line": 952,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(argv)",
          "new_text": null,
          "old_line_content": "    zfree(argv);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1463,
          "old_api": "RM_ZsetRangeStop",
          "new_api": null,
          "old_text": "RM_ZsetRangeStop(key)",
          "new_text": null,
          "old_line_content": "    RM_ZsetRangeStop(key);",
          "new_line_content": " * Setup the sorted set iteration according to the specified score range",
          "content_same": false
        },
        {
          "line": 1973,
          "old_api": "moduleParseCallReply_BulkString",
          "new_api": null,
          "old_text": "moduleParseCallReply_BulkString(reply)",
          "new_text": null,
          "old_line_content": "    case '$': moduleParseCallReply_BulkString(reply); break;",
          "new_line_content": " * use the protcol of the reply in reply->proto in order to fill the",
          "content_same": false
        },
        {
          "line": 1975,
          "old_api": "moduleParseCallReply_SimpleString",
          "new_api": null,
          "old_text": "moduleParseCallReply_SimpleString(reply)",
          "new_text": null,
          "old_line_content": "    case '+': moduleParseCallReply_SimpleString(reply); break;",
          "new_line_content": "void moduleParseCallReply(RedisModuleCallReply *reply) {",
          "content_same": false
        },
        {
          "line": 1976,
          "old_api": "moduleParseCallReply_Array",
          "new_api": null,
          "old_text": "moduleParseCallReply_Array(reply)",
          "new_text": null,
          "old_line_content": "    case '*': moduleParseCallReply_Array(reply); break;",
          "new_line_content": "    if (!(reply->flags & REDISMODULE_REPLYFLAG_TOPARSE)) return;",
          "content_same": false
        },
        {
          "line": 3005,
          "old_api": "moduleFreeModuleStructure",
          "new_api": null,
          "old_text": "moduleFreeModuleStructure(module)",
          "new_text": null,
          "old_line_content": "    moduleFreeModuleStructure(module);",
          "new_line_content": "        if (error == NULL) error = \"Unknown error\";",
          "content_same": false
        },
        {
          "line": 1982,
          "old_api": "strchr",
          "new_api": null,
          "old_text": "strchr(proto+1,'\\r')",
          "new_text": null,
          "old_line_content": "    char *p = strchr(proto+1,'\\r');",
          "new_line_content": "    case '-': /* handled by next item. */",
          "content_same": false
        },
        {
          "line": 2500,
          "old_api": "moduleTypeEncodeId",
          "new_api": null,
          "old_text": "moduleTypeEncodeId(name,encver)",
          "new_text": null,
          "old_line_content": "    uint64_t id = moduleTypeEncodeId(name,encver);",
          "new_line_content": " *      static RedisModuleType *BalancedTreeType;",
          "content_same": false
        },
        {
          "line": 1476,
          "old_api": "zzlFirstInRange",
          "new_api": null,
          "old_text": "zzlFirstInRange(key->value->ptr,zrs)",
          "new_text": null,
          "old_line_content": "        key->zcurrent = first ? zzlFirstInRange(key->value->ptr,zrs) :",
          "new_line_content": "     * in order to seek at the specified element. */",
          "content_same": false
        },
        {
          "line": 2502,
          "old_api": "moduleTypeLookupModuleByName",
          "new_api": null,
          "old_text": "moduleTypeLookupModuleByName(name)",
          "new_text": null,
          "old_line_content": "    if (moduleTypeLookupModuleByName(name) != NULL) return NULL;",
          "new_line_content": " *      int RedisModule_OnLoad(RedisModuleCtx *ctx) {",
          "content_same": false
        },
        {
          "line": 1477,
          "old_api": "zzlLastInRange",
          "new_api": null,
          "old_text": "zzlLastInRange(key->value->ptr,zrs)",
          "new_text": null,
          "old_line_content": "                                zzlLastInRange(key->value->ptr,zrs);",
          "new_line_content": "    zrangespec *zrs = &key->zrs;",
          "content_same": false
        },
        {
          "line": 2504,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(*mt))",
          "new_text": null,
          "old_line_content": "    moduleType *mt = zmalloc(sizeof(*mt));",
          "new_line_content": " *          BalancedTreeType = RM_CreateDataType(...);",
          "content_same": false
        },
        {
          "line": 968,
          "old_api": "alsoPropagate",
          "new_api": null,
          "old_text": "alsoPropagate(ctx->client->cmd,ctx->client->db->id,\n        ctx->client->argv,ctx->client->argc,\n        PROPAGATE_AOF|PROPAGATE_REPL)",
          "new_text": null,
          "old_line_content": "    alsoPropagate(ctx->client->cmd,ctx->client->db->id,",
          "new_line_content": " *",
          "content_same": false
        },
        {
          "line": 3016,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(subcmd,\"load\")",
          "new_text": null,
          "old_line_content": "    if (!strcasecmp(subcmd,\"load\") && c->argc >= 3) {",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1481,
          "old_api": "zslFirstInRange",
          "new_api": null,
          "old_text": "zslFirstInRange(zsl,zrs)",
          "new_text": null,
          "old_line_content": "        key->zcurrent = first ? zslFirstInRange(zsl,zrs) :",
          "new_line_content": "    zrs->maxex = maxex;",
          "content_same": false
        },
        {
          "line": 1482,
          "old_api": "zslLastInRange",
          "new_api": null,
          "old_text": "zslLastInRange(zsl,zrs)",
          "new_text": null,
          "old_line_content": "                                zslLastInRange(zsl,zrs);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1991,
          "old_api": "strchr",
          "new_api": null,
          "old_text": "strchr(proto+1,'\\r')",
          "new_text": null,
          "old_line_content": "    char *p = strchr(proto+1,'\\r');",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1994,
          "old_api": "string2ll",
          "new_api": null,
          "old_text": "string2ll(proto+1,p-proto-1,&bulklen)",
          "new_text": null,
          "old_line_content": "    string2ll(proto+1,p-proto-1,&bulklen);",
          "new_line_content": "    reply->type = REDISMODULE_REPLY_INTEGER;",
          "content_same": false
        },
        {
          "line": 2513,
          "old_api": "listAddNodeTail",
          "new_api": null,
          "old_text": "listAddNodeTail(ctx->module->types,mt)",
          "new_text": null,
          "old_line_content": "    listAddNodeTail(ctx->module->types,mt);",
          "new_line_content": "    mt->id = id;",
          "content_same": false
        },
        {
          "line": 3025,
          "old_api": "moduleLoad",
          "new_api": null,
          "old_text": "moduleLoad(c->argv[2]->ptr,(void **)argv,argc)",
          "new_text": null,
          "old_line_content": "        if (moduleLoad(c->argv[2]->ptr,(void **)argv,argc) == C_OK)",
          "new_line_content": "        robj **argv = NULL;",
          "content_same": false
        },
        {
          "line": 3026,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.ok)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.ok);",
          "new_line_content": "        int argc = 0;",
          "content_same": false
        },
        {
          "line": 3028,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\n                \"Error loading the extension. Please check the server logs.\")",
          "new_text": null,
          "old_line_content": "            addReplyError(c,",
          "new_line_content": "        if (c->argc > 3) {",
          "content_same": false
        },
        {
          "line": 3030,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(subcmd,\"unload\")",
          "new_text": null,
          "old_line_content": "    } else if (!strcasecmp(subcmd,\"unload\") && c->argc == 3) {",
          "new_line_content": "            argv = &c->argv[3];",
          "content_same": false
        },
        {
          "line": 3031,
          "old_api": "moduleUnload",
          "new_api": null,
          "old_text": "moduleUnload(c->argv[2]->ptr)",
          "new_text": null,
          "old_line_content": "        if (moduleUnload(c->argv[2]->ptr) == C_OK)",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3032,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.ok)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.ok);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2008,
          "old_api": "strchr",
          "new_api": null,
          "old_text": "strchr(proto+1,'\\r')",
          "new_text": null,
          "old_line_content": "    char *p = strchr(proto+1,'\\r');",
          "new_line_content": "        reply->len = bulklen;",
          "content_same": false
        },
        {
          "line": 2523,
          "old_api": "RM_DeleteKey",
          "new_api": null,
          "old_text": "RM_DeleteKey(key)",
          "new_text": null,
          "old_line_content": "    RM_DeleteKey(key);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2524,
          "old_api": "createModuleObject",
          "new_api": null,
          "old_text": "createModuleObject(mt,value)",
          "new_text": null,
          "old_line_content": "    robj *o = createModuleObject(mt,value);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2525,
          "old_api": "setKey",
          "new_api": null,
          "old_text": "setKey(key->db,key->key,o)",
          "new_text": null,
          "old_line_content": "    setKey(key->db,key->key,o);",
          "new_line_content": "/* If the key is open for writing, set the specified module type object",
          "content_same": false
        },
        {
          "line": 2526,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(o)",
          "new_text": null,
          "old_line_content": "    decrRefCount(o);",
          "new_line_content": " * as the value of the key, deleting the old value if any.",
          "content_same": false
        },
        {
          "line": 1506,
          "old_api": "zsetInitScoreRange",
          "new_api": null,
          "old_text": "zsetInitScoreRange(key,min,max,minex,maxex,1)",
          "new_text": null,
          "old_line_content": "    return zsetInitScoreRange(key,min,max,minex,maxex,1);",
          "new_line_content": " *",
          "content_same": false
        },
        {
          "line": 2019,
          "old_api": "strchr",
          "new_api": null,
          "old_text": "strchr(proto+1,'\\r')",
          "new_text": null,
          "old_line_content": "    char *p = strchr(proto+1,'\\r');",
          "new_line_content": "    reply->len = p-proto-1;",
          "content_same": false
        },
        {
          "line": 3046,
          "old_api": "addReplyErrorFormat",
          "new_api": null,
          "old_text": "addReplyErrorFormat(c,\"Error unloading module: %s\",errmsg)",
          "new_text": null,
          "old_line_content": "            addReplyErrorFormat(c,\"Error unloading module: %s\",errmsg);",
          "new_line_content": "                break;",
          "content_same": false
        },
        {
          "line": 2022,
          "old_api": "string2ll",
          "new_api": null,
          "old_text": "string2ll(proto+1,p-proto-1,&arraylen)",
          "new_text": null,
          "old_line_content": "    string2ll(proto+1,p-proto-1,&arraylen);",
          "new_line_content": "                                    REDISMODULE_REPLY_ERROR;",
          "content_same": false
        },
        {
          "line": 3048,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(subcmd,\"list\")",
          "new_text": null,
          "old_line_content": "    } else if (!strcasecmp(subcmd,\"list\") && c->argc == 2) {",
          "new_line_content": "                errmsg = \"the module exports one or more module-side data types, can't unload\";",
          "content_same": false
        },
        {
          "line": 3049,
          "old_api": "dictGetIterator",
          "new_api": null,
          "old_text": "dictGetIterator(modules)",
          "new_text": null,
          "old_line_content": "        dictIterator *di = dictGetIterator(modules);",
          "new_line_content": "                break;",
          "content_same": false
        },
        {
          "line": 1512,
          "old_api": "zsetInitScoreRange",
          "new_api": null,
          "old_text": "zsetInitScoreRange(key,min,max,minex,maxex,0)",
          "new_text": null,
          "old_line_content": "    return zsetInitScoreRange(key,min,max,minex,maxex,0);",
          "new_line_content": " * inclusive. */",
          "content_same": false
        },
        {
          "line": 2539,
          "old_api": "RM_KeyType",
          "new_api": null,
          "old_text": "RM_KeyType(key)",
          "new_text": null,
          "old_line_content": "        RM_KeyType(key) != REDISMODULE_KEYTYPE_MODULE) return NULL;",
          "new_line_content": "/* Assuming RedisModule_KeyType() returned REDISMODULE_KEYTYPE_MODULE on",
          "content_same": false
        },
        {
          "line": 3052,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(modules)",
          "new_text": null,
          "old_line_content": "        addReplyMultiBulkLen(c,dictSize(modules));",
          "new_line_content": "                break;",
          "content_same": false
        },
        {
          "line": 3053,
          "old_api": "dictNext",
          "new_api": null,
          "old_text": "dictNext(di)",
          "new_text": null,
          "old_line_content": "        while ((de = dictNext(di)) != NULL) {",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 3055,
          "old_api": "dictGetVal",
          "new_api": null,
          "old_text": "dictGetVal(de)",
          "new_text": null,
          "old_line_content": "            struct RedisModule *module = dictGetVal(de);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2031,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(RedisModuleCallReply)*arraylen)",
          "new_text": null,
          "old_line_content": "    reply->val.array = zmalloc(sizeof(RedisModuleCallReply)*arraylen);",
          "new_line_content": "    p += 2;",
          "content_same": false
        },
        {
          "line": 1010,
          "old_api": "selectDb",
          "new_api": null,
          "old_text": "selectDb(ctx->client,newid)",
          "new_text": null,
          "old_line_content": "    int retval = selectDb(ctx->client,newid);",
          "new_line_content": " * Note that the client will retain the currently selected DB even after",
          "content_same": false
        },
        {
          "line": 3058,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(name)",
          "new_text": null,
          "old_line_content": "            addReplyBulkCBuffer(c,name,sdslen(name));",
          "new_line_content": "        dictEntry *de;",
          "content_same": false
        },
        {
          "line": 3059,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c,\"ver\")",
          "new_text": null,
          "old_line_content": "            addReplyBulkCString(c,\"ver\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1527,
          "old_api": "RM_ZsetRangeStop",
          "new_api": null,
          "old_text": "RM_ZsetRangeStop(key)",
          "new_text": null,
          "old_line_content": "    RM_ZsetRangeStop(key);",
          "new_line_content": " * otherwise the last. Return REDISMODULE_OK on success otherwise",
          "content_same": false
        },
        {
          "line": 2553,
          "old_api": "RM_KeyType",
          "new_api": null,
          "old_text": "RM_KeyType(key)",
          "new_text": null,
          "old_line_content": "        RM_KeyType(key) != REDISMODULE_KEYTYPE_MODULE) return NULL;",
          "new_line_content": " * the key, returns the module type low-level value stored at key, as",
          "content_same": false
        },
        {
          "line": 1533,
          "old_api": "zslParseLexRange",
          "new_api": null,
          "old_text": "zslParseLexRange(min, max, zlrs)",
          "new_text": null,
          "old_line_content": "    if (zslParseLexRange(min, max, zlrs) == C_ERR) return REDISMODULE_ERR;",
          "new_line_content": "    if (!key->value || key->value->type != OBJ_ZSET) return REDISMODULE_ERR;",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 64,
      "total_additions": 283,
      "total_deletions": 283,
      "total_api_changes": 630
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 16,
        "api_related_lines": 630,
        "non_api_lines": 10,
        "non_api_line_numbers": [
          641,
          649,
          618,
          617,
          628,
          630,
          631,
          632,
          633,
          635
        ]
      }
    },
    "api_calls_before": 506,
    "api_calls_after": 506,
    "diff_info": {
      "added_lines": 13,
      "removed_lines": 5,
      "total_diff_lines": 59
    }
  }
}
{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/fe408ad23f69f2c9a416fcc8cebe8d98f15574b4",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/fe408ad23f69f2c9a416fcc8cebe8d98f15574b4/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/fe408ad23f69f2c9a416fcc8cebe8d98f15574b4/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/fe408ad23f69f2c9a416fcc8cebe8d98f15574b4/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 347,
          "old_api": "dictEmpty",
          "new_api": "emptyDbAsync",
          "old_text": "dictEmpty(server.db[j].expires,callback)",
          "new_text": "emptyDbAsync(&server.db[j])",
          "old_line_content": "            dictEmpty(server.db[j].expires,callback);",
          "new_line_content": "            emptyDbAsync(&server.db[j]);",
          "content_same": false
        },
        {
          "line": 357,
          "old_api": "flushSlaveKeysWithExpireList",
          "new_api": "slotToKeyFlush",
          "old_text": "flushSlaveKeysWithExpireList()",
          "new_text": "slotToKeyFlush()",
          "old_line_content": "    if (dbnum == -1) flushSlaveKeysWithExpireList();",
          "new_line_content": "            slotToKeyFlush();",
          "content_same": false
        },
        {
          "line": 420,
          "old_api": "addReply",
          "new_api": "getFlushCommandFlags",
          "old_text": "addReply(c,shared.ok)",
          "new_text": "getFlushCommandFlags(c,&flags)",
          "old_line_content": "    addReply(c,shared.ok);",
          "new_line_content": "    if (getFlushCommandFlags(c,&flags) == C_ERR) return;",
          "content_same": false
        },
        {
          "line": 432,
          "old_api": "addReply",
          "new_api": "getFlushCommandFlags",
          "old_text": "addReply(c,shared.ok)",
          "new_text": "getFlushCommandFlags(c,&flags)",
          "old_line_content": "    addReply(c,shared.ok);",
          "new_line_content": "    if (getFlushCommandFlags(c,&flags) == C_ERR) return;",
          "content_same": false
        },
        {
          "line": 434,
          "old_api": "kill",
          "new_api": "emptyDb",
          "old_text": "kill(server.rdb_child_pid,SIGUSR1)",
          "new_text": "emptyDb(-1,flags,NULL)",
          "old_line_content": "        kill(server.rdb_child_pid,SIGUSR1);",
          "new_line_content": "    server.dirty += emptyDb(-1,flags,NULL);",
          "content_same": false
        },
        {
          "line": 435,
          "old_api": "rdbRemoveTempFile",
          "new_api": "addReply",
          "old_text": "rdbRemoveTempFile(server.rdb_child_pid)",
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "        rdbRemoveTempFile(server.rdb_child_pid);",
          "new_line_content": "    addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 458,
          "old_api": "signalModifiedKey",
          "new_api": "dbAsyncDelete",
          "old_text": "signalModifiedKey(c->db,c->argv[j])",
          "new_text": "dbAsyncDelete(c->db,c->argv[j])",
          "old_line_content": "            signalModifiedKey(c->db,c->argv[j]);",
          "new_line_content": "        int deleted  = lazy ? dbAsyncDelete(c->db,c->argv[j]) :",
          "content_same": false
        },
        {
          "line": 459,
          "old_api": "notifyKeyspaceEvent",
          "new_api": "dbSyncDelete",
          "old_text": "notifyKeyspaceEvent(NOTIFY_GENERIC,\n                \"del\",c->argv[j],c->db->id)",
          "new_text": "dbSyncDelete(c->db,c->argv[j])",
          "old_line_content": "            notifyKeyspaceEvent(NOTIFY_GENERIC,",
          "new_line_content": "                              dbSyncDelete(c->db,c->argv[j]);",
          "content_same": false
        },
        {
          "line": 499,
          "old_api": "selectDb",
          "new_api": "addReplyError",
          "old_text": "selectDb(c,id)",
          "new_text": "addReplyError(c,\"SELECT is not allowed in cluster mode\")",
          "old_line_content": "    if (selectDb(c,id) == C_ERR) {",
          "new_line_content": "        addReplyError(c,\"SELECT is not allowed in cluster mode\");",
          "content_same": false
        },
        {
          "line": 502,
          "old_api": "addReply",
          "new_api": "selectDb",
          "old_text": "addReply(c,shared.ok)",
          "new_text": "selectDb(c,id)",
          "old_line_content": "        addReply(c,shared.ok);",
          "new_line_content": "    if (selectDb(c,id) == C_ERR) {",
          "content_same": false
        },
        {
          "line": 529,
          "old_api": "dictGetKey",
          "new_api": "dictGetSafeIterator",
          "old_text": "dictGetKey(de)",
          "new_text": "dictGetSafeIterator(c->db->dict)",
          "old_line_content": "        sds key = dictGetKey(de);",
          "new_line_content": "    di = dictGetSafeIterator(c->db->dict);",
          "content_same": false
        },
        {
          "line": 532,
          "old_api": "sdslen",
          "new_api": "dictGetKey",
          "old_text": "sdslen(key)",
          "new_text": "dictGetKey(de)",
          "old_line_content": "        if (allkeys || stringmatchlen(pattern,plen,key,sdslen(key),0)) {",
          "new_line_content": "        sds key = dictGetKey(de);",
          "content_same": false
        },
        {
          "line": 535,
          "old_api": "addReplyBulk",
          "new_api": "sdslen",
          "old_text": "addReplyBulk(c,keyobj)",
          "new_text": "sdslen(key)",
          "old_line_content": "                addReplyBulk(c,keyobj);",
          "new_line_content": "        if (allkeys || stringmatchlen(pattern,plen,key,sdslen(key),0)) {",
          "content_same": false
        },
        {
          "line": 538,
          "old_api": "decrRefCount",
          "new_api": "addReplyBulk",
          "old_text": "decrRefCount(keyobj)",
          "new_text": "addReplyBulk(c,keyobj)",
          "old_line_content": "            decrRefCount(keyobj);",
          "new_line_content": "                addReplyBulk(c,keyobj);",
          "content_same": false
        },
        {
          "line": 541,
          "old_api": "dictReleaseIterator",
          "new_api": "decrRefCount",
          "old_text": "dictReleaseIterator(di)",
          "new_text": "decrRefCount(keyobj)",
          "old_line_content": "    dictReleaseIterator(di);",
          "new_line_content": "            decrRefCount(keyobj);",
          "content_same": false
        },
        {
          "line": 561,
          "old_api": "dictGetVal",
          "new_api": "sdslen",
          "old_text": "dictGetVal(de)",
          "new_text": "sdslen(keysds)",
          "old_line_content": "        sds sdsval = dictGetVal(de);",
          "new_line_content": "        key = createStringObject(keysds,sdslen(keysds));",
          "content_same": false
        },
        {
          "line": 563,
          "old_api": "sdslen",
          "new_api": "dictGetKey",
          "old_text": "sdslen(sdsval)",
          "new_text": "dictGetKey(de)",
          "old_line_content": "        val = createStringObject(sdsval,sdslen(sdsval));",
          "new_line_content": "        sds sdskey = dictGetKey(de);",
          "content_same": false
        },
        {
          "line": 565,
          "old_api": "dictGetKey",
          "new_api": "sdslen",
          "old_text": "dictGetKey(de)",
          "new_text": "sdslen(sdskey)",
          "old_line_content": "        sds sdskey = dictGetKey(de);",
          "new_line_content": "        key = createStringObject(sdskey,sdslen(sdskey));",
          "content_same": false
        },
        {
          "line": 569,
          "old_api": "serverPanic",
          "new_api": "sdslen",
          "old_text": "serverPanic(\"Type not handled in SCAN callback.\")",
          "new_text": "sdslen(sdskey)",
          "old_line_content": "        serverPanic(\"Type not handled in SCAN callback.\");",
          "new_line_content": "        key = createStringObject(sdskey,sdslen(sdskey));",
          "content_same": false
        },
        {
          "line": 572,
          "old_api": "listAddNodeTail",
          "new_api": "serverPanic",
          "old_text": "listAddNodeTail(keys, key)",
          "new_text": "serverPanic(\"Type not handled in SCAN callback.\")",
          "old_line_content": "    listAddNodeTail(keys, key);",
          "new_line_content": "        serverPanic(\"Type not handled in SCAN callback.\");",
          "content_same": false
        },
        {
          "line": 589,
          "old_api": "addReplyError",
          "new_api": "strtoul",
          "old_text": "addReplyError(c, \"invalid cursor\")",
          "new_text": "strtoul(o->ptr, &eptr, 10)",
          "old_line_content": "        addReplyError(c, \"invalid cursor\");",
          "new_line_content": "    *cursor = strtoul(o->ptr, &eptr, 10);",
          "content_same": false
        },
        {
          "line": 694,
          "old_api": "listLength",
          "new_api": "dictScan",
          "old_text": "listLength(keys)",
          "new_text": "dictScan(ht, cursor, scanCallback, NULL, privdata)",
          "old_line_content": "              listLength(keys) < (unsigned long)count);",
          "new_line_content": "            cursor = dictScan(ht, cursor, scanCallback, NULL, privdata);",
          "content_same": false
        },
        {
          "line": 703,
          "old_api": "ziplistIndex",
          "new_api": "createStringObjectFromLongLong",
          "old_text": "ziplistIndex(o->ptr,0)",
          "new_text": "createStringObjectFromLongLong(ll)",
          "old_line_content": "        unsigned char *p = ziplistIndex(o->ptr,0);",
          "new_line_content": "            listAddNodeTail(keys,createStringObjectFromLongLong(ll));",
          "content_same": false
        },
        {
          "line": 712,
          "old_api": "createStringObjectFromLongLong",
          "new_api": "ziplistGet",
          "old_text": "createStringObjectFromLongLong(vll)",
          "new_text": "ziplistGet(p,&vstr,&vlen,&vll)",
          "old_line_content": "                                 createStringObjectFromLongLong(vll));",
          "new_line_content": "            ziplistGet(p,&vstr,&vlen,&vll);",
          "content_same": false
        },
        {
          "line": 713,
          "old_api": "ziplistNext",
          "new_api": "listAddNodeTail",
          "old_text": "ziplistNext(o->ptr,p)",
          "new_text": "listAddNodeTail(keys,\n                (vstr != NULL) ? createStringObject((char*)vstr,vlen) :\n                                 createStringObjectFromLongLong(vll))",
          "old_line_content": "            p = ziplistNext(o->ptr,p);",
          "new_line_content": "            listAddNodeTail(keys,",
          "content_same": false
        },
        {
          "line": 724,
          "old_api": "listNextNode",
          "new_api": "listFirst",
          "old_text": "listNextNode(node)",
          "new_text": "listFirst(keys)",
          "old_line_content": "        nextnode = listNextNode(node);",
          "new_line_content": "    node = listFirst(keys);",
          "content_same": false
        },
        {
          "line": 759,
          "old_api": "decrRefCount",
          "new_api": "listNextNode",
          "old_text": "decrRefCount(kobj)",
          "new_text": "listNextNode(node)",
          "old_line_content": "                decrRefCount(kobj);",
          "new_line_content": "            nextnode = listNextNode(node);",
          "content_same": false
        },
        {
          "line": 770,
          "old_api": "listLength",
          "new_api": "addReplyMultiBulkLen",
          "old_text": "listLength(keys)",
          "new_text": "addReplyMultiBulkLen(c, 2)",
          "old_line_content": "    addReplyMultiBulkLen(c, listLength(keys));",
          "new_line_content": "    addReplyMultiBulkLen(c, 2);",
          "content_same": false
        },
        {
          "line": 771,
          "old_api": "listFirst",
          "new_api": "addReplyBulkLongLong",
          "old_text": "listFirst(keys)",
          "new_text": "addReplyBulkLongLong(c,cursor)",
          "old_line_content": "    while ((node = listFirst(keys)) != NULL) {",
          "new_line_content": "    addReplyBulkLongLong(c,cursor);",
          "content_same": false
        },
        {
          "line": 773,
          "old_api": "addReplyBulk",
          "new_api": "listLength",
          "old_text": "addReplyBulk(c, kobj)",
          "new_text": "listLength(keys)",
          "old_line_content": "        addReplyBulk(c, kobj);",
          "new_line_content": "    addReplyMultiBulkLen(c, listLength(keys));",
          "content_same": false
        },
        {
          "line": 774,
          "old_api": "decrRefCount",
          "new_api": "listFirst",
          "old_text": "decrRefCount(kobj)",
          "new_text": "listFirst(keys)",
          "old_line_content": "        decrRefCount(kobj);",
          "new_line_content": "    while ((node = listFirst(keys)) != NULL) {",
          "content_same": false
        },
        {
          "line": 775,
          "old_api": "listDelNode",
          "new_api": "listNodeValue",
          "old_text": "listDelNode(keys, node)",
          "new_text": "listNodeValue(node)",
          "old_line_content": "        listDelNode(keys, node);",
          "new_line_content": "        robj *kobj = listNodeValue(node);",
          "content_same": false
        },
        {
          "line": 830,
          "old_api": "strcasecmp",
          "new_api": "addReply",
          "old_text": "strcasecmp(c->argv[1]->ptr,\"nosave\")",
          "new_text": "addReply(c,shared.syntaxerr)",
          "old_line_content": "        if (!strcasecmp(c->argv[1]->ptr,\"nosave\")) {",
          "new_line_content": "        addReply(c,shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 835,
          "old_api": "addReply",
          "new_api": "strcasecmp",
          "old_text": "addReply(c,shared.syntaxerr)",
          "new_text": "strcasecmp(c->argv[1]->ptr,\"save\")",
          "old_line_content": "            addReply(c,shared.syntaxerr);",
          "new_line_content": "        } else if (!strcasecmp(c->argv[1]->ptr,\"save\")) {",
          "content_same": false
        },
        {
          "line": 872,
          "old_api": "decrRefCount",
          "new_api": "getExpire",
          "old_text": "decrRefCount(o)",
          "new_text": "getExpire(c->db,c->argv[1])",
          "old_line_content": "            decrRefCount(o);",
          "new_line_content": "    expire = getExpire(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 873,
          "old_api": "addReply",
          "new_api": "lookupKeyWrite",
          "old_text": "addReply(c,shared.czero)",
          "new_text": "lookupKeyWrite(c->db,c->argv[2])",
          "old_line_content": "            addReply(c,shared.czero);",
          "new_line_content": "    if (lookupKeyWrite(c->db,c->argv[2]) != NULL) {",
          "content_same": false
        },
        {
          "line": 881,
          "old_api": "setExpire",
          "new_api": "dbDelete",
          "old_text": "setExpire(c,c->db,c->argv[2],expire)",
          "new_text": "dbDelete(c->db,c->argv[2])",
          "old_line_content": "    if (expire != -1) setExpire(c,c->db,c->argv[2],expire);",
          "new_line_content": "        dbDelete(c->db,c->argv[2]);",
          "content_same": false
        },
        {
          "line": 883,
          "old_api": "signalModifiedKey",
          "new_api": "dbAdd",
          "old_text": "signalModifiedKey(c->db,c->argv[1])",
          "new_text": "dbAdd(c->db,c->argv[2],o)",
          "old_line_content": "    signalModifiedKey(c->db,c->argv[1]);",
          "new_line_content": "    dbAdd(c->db,c->argv[2],o);",
          "content_same": false
        },
        {
          "line": 884,
          "old_api": "signalModifiedKey",
          "new_api": "setExpire",
          "old_text": "signalModifiedKey(c->db,c->argv[2])",
          "new_text": "setExpire(c,c->db,c->argv[2],expire)",
          "old_line_content": "    signalModifiedKey(c->db,c->argv[2]);",
          "new_line_content": "    if (expire != -1) setExpire(c,c->db,c->argv[2],expire);",
          "content_same": false
        },
        {
          "line": 885,
          "old_api": "notifyKeyspaceEvent",
          "new_api": "dbDelete",
          "old_text": "notifyKeyspaceEvent(NOTIFY_GENERIC,\"rename_from\",\n        c->argv[1],c->db->id)",
          "new_text": "dbDelete(c->db,c->argv[1])",
          "old_line_content": "    notifyKeyspaceEvent(NOTIFY_GENERIC,\"rename_from\",",
          "new_line_content": "    dbDelete(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 887,
          "old_api": "notifyKeyspaceEvent",
          "new_api": "signalModifiedKey",
          "old_text": "notifyKeyspaceEvent(NOTIFY_GENERIC,\"rename_to\",\n        c->argv[2],c->db->id)",
          "new_text": "signalModifiedKey(c->db,c->argv[2])",
          "old_line_content": "    notifyKeyspaceEvent(NOTIFY_GENERIC,\"rename_to\",",
          "new_line_content": "    signalModifiedKey(c->db,c->argv[2]);",
          "content_same": false
        },
        {
          "line": 890,
          "old_api": "addReply",
          "new_api": "notifyKeyspaceEvent",
          "old_text": "addReply(c,nx ? shared.cone : shared.ok)",
          "new_text": "notifyKeyspaceEvent(NOTIFY_GENERIC,\"rename_to\",\n        c->argv[2],c->db->id)",
          "old_line_content": "    addReply(c,nx ? shared.cone : shared.ok);",
          "new_line_content": "    notifyKeyspaceEvent(NOTIFY_GENERIC,\"rename_to\",",
          "content_same": false
        },
        {
          "line": 939,
          "old_api": "getExpire",
          "new_api": "addReply",
          "old_text": "getExpire(c->db,c->argv[1])",
          "new_text": "addReply(c,shared.czero)",
          "old_line_content": "    expire = getExpire(c->db,c->argv[1]);",
          "new_line_content": "        addReply(c,shared.czero);",
          "content_same": false
        },
        {
          "line": 942,
          "old_api": "lookupKeyWrite",
          "new_api": "getExpire",
          "old_text": "lookupKeyWrite(dst,c->argv[1])",
          "new_text": "getExpire(c->db,c->argv[1])",
          "old_line_content": "    if (lookupKeyWrite(dst,c->argv[1]) != NULL) {",
          "new_line_content": "    expire = getExpire(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 946,
          "old_api": "dbAdd",
          "new_api": "addReply",
          "old_text": "dbAdd(dst,c->argv[1],o)",
          "new_text": "addReply(c,shared.czero)",
          "old_line_content": "    dbAdd(dst,c->argv[1],o);",
          "new_line_content": "        addReply(c,shared.czero);",
          "content_same": false
        },
        {
          "line": 951,
          "old_api": "dbDelete",
          "new_api": "incrRefCount",
          "old_text": "dbDelete(src,c->argv[1])",
          "new_text": "incrRefCount(o)",
          "old_line_content": "    dbDelete(src,c->argv[1]);",
          "new_line_content": "    incrRefCount(o);",
          "content_same": false
        },
        {
          "line": 965,
          "old_api": "lookupKey",
          "new_api": "dictGetSafeIterator",
          "old_text": "lookupKey(db,key,LOOKUP_NOTOUCH)",
          "new_text": "dictGetSafeIterator(db->blocking_keys)",
          "old_line_content": "        robj *value = lookupKey(db,key,LOOKUP_NOTOUCH);",
          "new_line_content": "    dictIterator *di = dictGetSafeIterator(db->blocking_keys);",
          "content_same": false
        },
        {
          "line": 1065,
          "old_api": "dictSetSignedIntegerVal",
          "new_api": "dictFind",
          "old_text": "dictSetSignedIntegerVal(de,when)",
          "new_text": "dictFind(db->dict,key->ptr)",
          "old_line_content": "    dictSetSignedIntegerVal(de,when);",
          "new_line_content": "    kde = dictFind(db->dict,key->ptr);",
          "content_same": false
        },
        {
          "line": 1104,
          "old_api": "feedAppendOnlyFile",
          "new_api": "incrRefCount",
          "old_text": "feedAppendOnlyFile(server.delCommand,db->id,argv,2)",
          "new_text": "incrRefCount(argv[1])",
          "old_line_content": "        feedAppendOnlyFile(server.delCommand,db->id,argv,2);",
          "new_line_content": "    incrRefCount(argv[1]);",
          "content_same": false
        },
        {
          "line": 1107,
          "old_api": "decrRefCount",
          "new_api": "feedAppendOnlyFile",
          "old_text": "decrRefCount(argv[0])",
          "new_text": "feedAppendOnlyFile(server.delCommand,db->id,argv,2)",
          "old_line_content": "    decrRefCount(argv[0]);",
          "new_line_content": "        feedAppendOnlyFile(server.delCommand,db->id,argv,2);",
          "content_same": false
        },
        {
          "line": 1108,
          "old_api": "decrRefCount",
          "new_api": "replicationFeedSlaves",
          "old_text": "decrRefCount(argv[1])",
          "new_text": "replicationFeedSlaves(server.slaves,db->id,argv,2)",
          "old_line_content": "    decrRefCount(argv[1]);",
          "new_line_content": "    replicationFeedSlaves(server.slaves,db->id,argv,2);",
          "content_same": false
        },
        {
          "line": 1163,
          "old_api": "dbAsyncDelete",
          "new_api": "propagateExpire",
          "old_text": "dbAsyncDelete(db,key)",
          "new_text": "propagateExpire(db,key,server.lazyfree_lazy_expire)",
          "old_line_content": "    return server.lazyfree_lazy_expire ? dbAsyncDelete(db,key) :",
          "new_line_content": "    propagateExpire(db,key,server.lazyfree_lazy_expire);",
          "content_same": false
        },
        {
          "line": 1164,
          "old_api": "dbSyncDelete",
          "new_api": "notifyKeyspaceEvent",
          "old_text": "dbSyncDelete(db,key)",
          "new_text": "notifyKeyspaceEvent(NOTIFY_EXPIRED,\n        \"expired\",key,db->id)",
          "old_line_content": "                                         dbSyncDelete(db,key);",
          "new_line_content": "    notifyKeyspaceEvent(NOTIFY_EXPIRED,",
          "content_same": false
        },
        {
          "line": 1243,
          "old_api": "num < 1 || num > (argc-3)",
          "new_api": "atoi",
          "old_text": "num < 1 || num > (argc-3)",
          "new_text": "atoi(argv[2]->ptr)",
          "old_line_content": "    if (num < 1 || num > (argc-3)) {",
          "new_line_content": "    num = atoi(argv[2]->ptr);",
          "content_same": false
        },
        {
          "line": 1298,
          "old_api": "zmalloc",
          "new_api": "UNUSED",
          "old_text": "zmalloc(sizeof(int)*2)",
          "new_text": "UNUSED(cmd)",
          "old_line_content": "    keys = zmalloc(sizeof(int)*2); /* Alloc 2 places for the worst case. */",
          "new_line_content": "    UNUSED(cmd);",
          "content_same": false
        },
        {
          "line": 1455,
          "old_api": "zmalloc",
          "new_api": "sdslen",
          "old_text": "zmalloc(keylen+2)",
          "new_text": "sdslen(key->ptr)",
          "old_line_content": "    if (keylen+2 > 64) indexed = zmalloc(keylen+2);",
          "new_line_content": "    size_t keylen = sdslen(key->ptr);",
          "content_same": false
        },
        {
          "line": 1458,
          "old_api": "memcpy",
          "new_api": "zmalloc",
          "old_text": "memcpy(indexed+2,key->ptr,keylen)",
          "new_text": "zmalloc(keylen+2)",
          "old_line_content": "    memcpy(indexed+2,key->ptr,keylen);",
          "new_line_content": "    if (keylen+2 > 64) indexed = zmalloc(keylen+2);",
          "content_same": false
        },
        {
          "line": 1496,
          "old_api": "createStringObject",
          "new_api": "raxSeek",
          "old_text": "createStringObject((char*)iter.key+2,iter.key_len-2)",
          "new_text": "raxSeek(&iter,\">=\",indexed,2)",
          "old_line_content": "        keys[j++] = createStringObject((char*)iter.key+2,iter.key_len-2);",
          "new_line_content": "    raxSeek(&iter,\">=\",indexed,2);",
          "content_same": false
        },
        {
          "line": 1514,
          "old_api": "raxNext",
          "new_api": "raxStart",
          "old_text": "raxNext(&iter)",
          "new_text": "raxStart(&iter,server.cluster->slots_to_keys)",
          "old_line_content": "        raxNext(&iter);",
          "new_line_content": "    raxStart(&iter,server.cluster->slots_to_keys);",
          "content_same": false
        },
        {
          "line": 1516,
          "old_api": "createStringObject",
          "new_api": "raxSeek",
          "old_text": "createStringObject((char*)iter.key+2,iter.key_len-2)",
          "new_text": "raxSeek(&iter,\">=\",indexed,2)",
          "old_line_content": "        robj *key = createStringObject((char*)iter.key+2,iter.key_len-2);",
          "new_line_content": "        raxSeek(&iter,\">=\",indexed,2);",
          "content_same": false
        },
        {
          "line": 1517,
          "old_api": "dbDelete",
          "new_api": "raxNext",
          "old_text": "dbDelete(&server.db[0],key)",
          "new_text": "raxNext(&iter)",
          "old_line_content": "        dbDelete(&server.db[0],key);",
          "new_line_content": "        raxNext(&iter);",
          "content_same": false
        },
        {
          "line": 1521,
          "old_api": "raxStop",
          "new_api": "decrRefCount",
          "old_text": "raxStop(&iter)",
          "new_text": "decrRefCount(key)",
          "old_line_content": "    raxStop(&iter);",
          "new_line_content": "        decrRefCount(key);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 512,
          "old_api": null,
          "new_api": "dbRandomKey",
          "old_text": null,
          "new_text": "dbRandomKey(c->db)",
          "old_line_content": "    }",
          "new_line_content": "    if ((key = dbRandomKey(c->db)) == NULL) {",
          "content_same": false
        },
        {
          "line": 513,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.nullbulk)",
          "old_line_content": "",
          "new_line_content": "        addReply(c,shared.nullbulk);",
          "content_same": false
        },
        {
          "line": 1028,
          "old_api": null,
          "new_api": "getLongFromObjectOrReply",
          "old_text": null,
          "new_text": "getLongFromObjectOrReply(c, c->argv[1], &id1,\n        \"invalid first DB index\")",
          "old_line_content": "",
          "new_line_content": "    if (getLongFromObjectOrReply(c, c->argv[1], &id1,",
          "content_same": false
        },
        {
          "line": 517,
          "old_api": null,
          "new_api": "addReplyBulk",
          "old_text": null,
          "new_text": "addReplyBulk(c,key)",
          "old_line_content": "",
          "new_line_content": "    addReplyBulk(c,key);",
          "content_same": false
        },
        {
          "line": 518,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(key)",
          "old_line_content": "void keysCommand(client *c) {",
          "new_line_content": "    decrRefCount(key);",
          "content_same": false
        },
        {
          "line": 1032,
          "old_api": null,
          "new_api": "getLongFromObjectOrReply",
          "old_text": null,
          "new_text": "getLongFromObjectOrReply(c, c->argv[2], &id2,\n        \"invalid second DB index\")",
          "old_line_content": "",
          "new_line_content": "    if (getLongFromObjectOrReply(c, c->argv[2], &id2,",
          "content_same": false
        },
        {
          "line": 525,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(pattern)",
          "old_line_content": "",
          "new_line_content": "    int plen = sdslen(pattern), allkeys;",
          "content_same": false
        },
        {
          "line": 1037,
          "old_api": null,
          "new_api": "dbSwapDatabases",
          "old_text": null,
          "new_text": "dbSwapDatabases(id1,id2)",
          "old_line_content": "    } else {",
          "new_line_content": "    if (dbSwapDatabases(id1,id2) == C_ERR) {",
          "content_same": false
        },
        {
          "line": 527,
          "old_api": null,
          "new_api": "addDeferredMultiBulkLength",
          "old_text": null,
          "new_text": "addDeferredMultiBulkLength(c)",
          "old_line_content": "    allkeys = (pattern[0] == '*' && pattern[1] == '\\0');",
          "new_line_content": "    void *replylen = addDeferredMultiBulkLength(c);",
          "content_same": false
        },
        {
          "line": 1038,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"DB index is out of range\")",
          "old_line_content": "        server.dirty++;",
          "new_line_content": "        addReplyError(c,\"DB index is out of range\");",
          "content_same": false
        },
        {
          "line": 1042,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "",
          "new_line_content": "        addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 531,
          "old_api": null,
          "new_api": "dictNext",
          "old_text": null,
          "new_text": "dictNext(di)",
          "old_line_content": "",
          "new_line_content": "    while((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 536,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(key)",
          "old_line_content": "                numkeys++;",
          "new_line_content": "            keyobj = createStringObject(key,sdslen(key));",
          "content_same": false
        },
        {
          "line": 537,
          "old_api": null,
          "new_api": "expireIfNeeded",
          "old_text": null,
          "new_text": "expireIfNeeded(c->db,keyobj)",
          "old_line_content": "            }",
          "new_line_content": "            if (expireIfNeeded(c->db,keyobj) == 0) {",
          "content_same": false
        },
        {
          "line": 1053,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(db->dict,key->ptr)",
          "old_line_content": "",
          "new_line_content": "    serverAssertWithInfo(NULL,key,dictFind(db->dict,key->ptr) != NULL);",
          "content_same": false
        },
        {
          "line": 1054,
          "old_api": null,
          "new_api": "dictDelete",
          "old_text": null,
          "new_text": "dictDelete(db->expires,key->ptr)",
          "old_line_content": "/* Set an expire to the specified key. If the expire is set in the context",
          "new_line_content": "    return dictDelete(db->expires,key->ptr) == DICT_OK;",
          "content_same": false
        },
        {
          "line": 544,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "",
          "new_line_content": "    dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 545,
          "old_api": null,
          "new_api": "setDeferredMultiBulkLength",
          "old_text": null,
          "new_text": "setDeferredMultiBulkLength(c,replylen,numkeys)",
          "old_line_content": "/* This callback is used by scanGenericCommand in order to collect elements",
          "new_line_content": "    setDeferredMultiBulkLength(c,replylen,numkeys);",
          "content_same": false
        },
        {
          "line": 1066,
          "old_api": null,
          "new_api": "serverAssertWithInfo",
          "old_text": null,
          "new_text": "serverAssertWithInfo(NULL,key,kde != NULL)",
          "old_line_content": "",
          "new_line_content": "    serverAssertWithInfo(NULL,key,kde != NULL);",
          "content_same": false
        },
        {
          "line": 1067,
          "old_api": null,
          "new_api": "dictGetKey",
          "old_text": null,
          "new_text": "dictGetKey(kde)",
          "old_line_content": "    int writable_slave = server.masterhost && server.repl_slave_ro == 0;",
          "new_line_content": "    de = dictAddOrFind(db->expires,dictGetKey(kde));",
          "content_same": false
        },
        {
          "line": 1068,
          "old_api": null,
          "new_api": "dictSetSignedIntegerVal",
          "old_text": null,
          "new_text": "dictSetSignedIntegerVal(de,when)",
          "old_line_content": "    if (c && writable_slave && !(c->flags & CLIENT_MASTER))",
          "new_line_content": "    dictSetSignedIntegerVal(de,when);",
          "content_same": false
        },
        {
          "line": 1072,
          "old_api": null,
          "new_api": "rememberSlaveKeyWithExpire",
          "old_text": null,
          "new_text": "rememberSlaveKeyWithExpire(db,key)",
          "old_line_content": "/* Return the expire time of the specified key, or -1 if no expire",
          "new_line_content": "        rememberSlaveKeyWithExpire(db,key);",
          "content_same": false
        },
        {
          "line": 564,
          "old_api": null,
          "new_api": "dictGetVal",
          "old_text": null,
          "new_text": "dictGetVal(de)",
          "old_line_content": "    } else if (o->type == OBJ_ZSET) {",
          "new_line_content": "        sds sdsval = dictGetVal(de);",
          "content_same": false
        },
        {
          "line": 568,
          "old_api": null,
          "new_api": "dictGetKey",
          "old_text": null,
          "new_text": "dictGetKey(de)",
          "old_line_content": "    } else {",
          "new_line_content": "        sds sdskey = dictGetKey(de);",
          "content_same": false
        },
        {
          "line": 1081,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(db->expires)",
          "old_line_content": "    /* The entry was found in the expire dict, this means it should also",
          "new_line_content": "    if (dictSize(db->expires) == 0 ||",
          "content_same": false
        },
        {
          "line": 570,
          "old_api": null,
          "new_api": "dictGetVal",
          "old_text": null,
          "new_text": "dictGetVal(de)",
          "old_line_content": "    }",
          "new_line_content": "        val = createStringObjectFromLongDouble(*(double*)dictGetVal(de),0);",
          "content_same": false
        },
        {
          "line": 1082,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(db->expires,key->ptr)",
          "old_line_content": "     * be present in the main dict (safety check). */",
          "new_line_content": "       (de = dictFind(db->expires,key->ptr)) == NULL) return -1;",
          "content_same": false
        },
        {
          "line": 1086,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(db->dict,key->ptr)",
          "old_line_content": "",
          "new_line_content": "    serverAssertWithInfo(NULL,key,dictFind(db->dict,key->ptr) != NULL);",
          "content_same": false
        },
        {
          "line": 575,
          "old_api": null,
          "new_api": "listAddNodeTail",
          "old_text": null,
          "new_text": "listAddNodeTail(keys, key)",
          "old_line_content": "",
          "new_line_content": "    listAddNodeTail(keys, key);",
          "content_same": false
        },
        {
          "line": 576,
          "old_api": null,
          "new_api": "listAddNodeTail",
          "old_text": null,
          "new_text": "listAddNodeTail(keys, val)",
          "old_line_content": "/* Try to parse a SCAN cursor stored at object 'o':",
          "new_line_content": "    if (val) listAddNodeTail(keys, val);",
          "content_same": false
        },
        {
          "line": 1087,
          "old_api": null,
          "new_api": "dictGetSignedIntegerVal",
          "old_text": null,
          "new_text": "dictGetSignedIntegerVal(de)",
          "old_line_content": "/* Propagate expires into slaves and the AOF file.",
          "new_line_content": "    return dictGetSignedIntegerVal(de);",
          "content_same": false
        },
        {
          "line": 590,
          "old_api": null,
          "new_api": "isspace",
          "old_text": null,
          "new_text": "isspace(((char*)o->ptr)[0])",
          "old_line_content": "        return C_ERR;",
          "new_line_content": "    if (isspace(((char*)o->ptr)[0]) || eptr[0] != '\\0' || errno == ERANGE)",
          "content_same": false
        },
        {
          "line": 1103,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(argv[0])",
          "old_line_content": "    if (server.aof_state != AOF_OFF)",
          "new_line_content": "    incrRefCount(argv[0]);",
          "content_same": false
        },
        {
          "line": 592,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c, \"invalid cursor\")",
          "old_line_content": "    return C_OK;",
          "new_line_content": "        addReplyError(c, \"invalid cursor\");",
          "content_same": false
        },
        {
          "line": 1110,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(argv[0])",
          "old_line_content": "",
          "new_line_content": "    decrRefCount(argv[0]);",
          "content_same": false
        },
        {
          "line": 1111,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(argv[1])",
          "old_line_content": "/* This function is called when we are going to perform some operation",
          "new_line_content": "    decrRefCount(argv[1]);",
          "content_same": false
        },
        {
          "line": 611,
          "old_api": null,
          "new_api": "listCreate",
          "old_text": null,
          "new_text": "listCreate()",
          "old_line_content": "    sds pat = NULL;",
          "new_line_content": "    list *keys = listCreate();",
          "content_same": false
        },
        {
          "line": 620,
          "old_api": null,
          "new_api": "serverAssert",
          "old_text": null,
          "new_text": "serverAssert(o == NULL || o->type == OBJ_SET || o->type == OBJ_HASH ||\n                o->type == OBJ_ZSET)",
          "old_line_content": "    /* Set i to the first option argument. The previous one is the cursor. */",
          "new_line_content": "    serverAssert(o == NULL || o->type == OBJ_SET || o->type == OBJ_HASH ||",
          "content_same": false
        },
        {
          "line": 1134,
          "old_api": null,
          "new_api": "getExpire",
          "old_text": null,
          "new_text": "getExpire(db,key)",
          "old_line_content": "    if (when < 0) return 0; /* No expire for this key */",
          "new_line_content": "    mstime_t when = getExpire(db,key);",
          "content_same": false
        },
        {
          "line": 629,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[i]->ptr, \"count\")",
          "old_line_content": "            {",
          "new_line_content": "        if (!strcasecmp(c->argv[i]->ptr, \"count\") && j >= 2) {",
          "content_same": false
        },
        {
          "line": 630,
          "old_api": null,
          "new_api": "getLongFromObjectOrReply",
          "old_text": null,
          "new_text": "getLongFromObjectOrReply(c, c->argv[i+1], &count, NULL)",
          "old_line_content": "                goto cleanup;",
          "new_line_content": "            if (getLongFromObjectOrReply(c, c->argv[i+1], &count, NULL)",
          "content_same": false
        },
        {
          "line": 1147,
          "old_api": null,
          "new_api": "mstime",
          "old_text": null,
          "new_text": "mstime()",
          "old_line_content": "     * the slave key expiration is controlled by the master that will",
          "new_line_content": "    now = server.lua_caller ? server.lua_time_start : mstime();",
          "content_same": false
        },
        {
          "line": 637,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.syntaxerr)",
          "old_line_content": "",
          "new_line_content": "                addReply(c,shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 642,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[i]->ptr, \"match\")",
          "old_line_content": "",
          "new_line_content": "        } else if (!strcasecmp(c->argv[i]->ptr, \"match\") && j >= 2) {",
          "content_same": false
        },
        {
          "line": 644,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(pat)",
          "old_line_content": "             * equivalent to disabling it. */",
          "new_line_content": "            patlen = sdslen(pat);",
          "content_same": false
        },
        {
          "line": 652,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.syntaxerr)",
          "old_line_content": "    }",
          "new_line_content": "            addReply(c,shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 1166,
          "old_api": null,
          "new_api": "dbAsyncDelete",
          "old_text": null,
          "new_text": "dbAsyncDelete(db,key)",
          "old_line_content": "",
          "new_line_content": "    return server.lazyfree_lazy_expire ? dbAsyncDelete(db,key) :",
          "content_same": false
        },
        {
          "line": 1167,
          "old_api": null,
          "new_api": "dbSyncDelete",
          "old_text": null,
          "new_text": "dbSyncDelete(db,key)",
          "old_line_content": "/* -----------------------------------------------------------------------------",
          "new_line_content": "                                         dbSyncDelete(db,key);",
          "content_same": false
        },
        {
          "line": 1178,
          "old_api": null,
          "new_api": "UNUSED",
          "old_text": null,
          "new_text": "UNUSED(argv)",
          "old_line_content": "        *numkeys = 0;",
          "new_line_content": "    UNUSED(argv);",
          "content_same": false
        },
        {
          "line": 1187,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(int)*((last - cmd->firstkey)+1))",
          "old_line_content": "            /* Modules commands, and standard commands with a not fixed number",
          "new_line_content": "    keys = zmalloc(sizeof(int)*((last - cmd->firstkey)+1));",
          "content_same": false
        },
        {
          "line": 1197,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(keys)",
          "old_line_content": "            } else {",
          "new_line_content": "                zfree(keys);",
          "content_same": false
        },
        {
          "line": 1201,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Redis built-in command declared keys positions not matching the arity requirements.\")",
          "old_line_content": "        keys[i++] = j;",
          "new_line_content": "                serverPanic(\"Redis built-in command declared keys positions not matching the arity requirements.\");",
          "content_same": false
        },
        {
          "line": 697,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(keys)",
          "old_line_content": "        int64_t ll;",
          "new_line_content": "              listLength(keys) < (unsigned long)count);",
          "content_same": false
        },
        {
          "line": 702,
          "old_api": null,
          "new_api": "intsetGet",
          "old_text": null,
          "new_text": "intsetGet(o->ptr,pos++,&ll)",
          "old_line_content": "    } else if (o->type == OBJ_HASH || o->type == OBJ_ZSET) {",
          "new_line_content": "        while(intsetGet(o->ptr,pos++,&ll))",
          "content_same": false
        },
        {
          "line": 706,
          "old_api": null,
          "new_api": "ziplistIndex",
          "old_text": null,
          "new_text": "ziplistIndex(o->ptr,0)",
          "old_line_content": "        long long vll;",
          "new_line_content": "        unsigned char *p = ziplistIndex(o->ptr,0);",
          "content_same": false
        },
        {
          "line": 1223,
          "old_api": null,
          "new_api": "moduleGetCommandKeysViaAPI",
          "old_text": null,
          "new_text": "moduleGetCommandKeysViaAPI(cmd,argv,argc,numkeys)",
          "old_line_content": "    } else {",
          "new_line_content": "        return moduleGetCommandKeysViaAPI(cmd,argv,argc,numkeys);",
          "content_same": false
        },
        {
          "line": 1225,
          "old_api": null,
          "new_api": "getkeys_proc",
          "old_text": null,
          "new_text": "cmd->getkeys_proc(cmd,argv,argc,numkeys)",
          "old_line_content": "    }",
          "new_line_content": "        return cmd->getkeys_proc(cmd,argv,argc,numkeys);",
          "content_same": false
        },
        {
          "line": 714,
          "old_api": null,
          "new_api": "createStringObject",
          "old_text": null,
          "new_text": "createStringObject((char*)vstr,vlen)",
          "old_line_content": "        }",
          "new_line_content": "                (vstr != NULL) ? createStringObject((char*)vstr,vlen) :",
          "content_same": false
        },
        {
          "line": 715,
          "old_api": null,
          "new_api": "createStringObjectFromLongLong",
          "old_text": null,
          "new_text": "createStringObjectFromLongLong(vll)",
          "old_line_content": "        cursor = 0;",
          "new_line_content": "                                 createStringObjectFromLongLong(vll));",
          "content_same": false
        },
        {
          "line": 716,
          "old_api": null,
          "new_api": "ziplistNext",
          "old_text": null,
          "new_text": "ziplistNext(o->ptr,p)",
          "old_line_content": "    } else {",
          "new_line_content": "            p = ziplistNext(o->ptr,p);",
          "content_same": false
        },
        {
          "line": 1227,
          "old_api": null,
          "new_api": "getKeysUsingCommandTable",
          "old_text": null,
          "new_text": "getKeysUsingCommandTable(cmd,argv,argc,numkeys)",
          "old_line_content": "",
          "new_line_content": "        return getKeysUsingCommandTable(cmd,argv,argc,numkeys);",
          "content_same": false
        },
        {
          "line": 720,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Not handled encoding in SCAN.\")",
          "old_line_content": "    /* Step 3: Filter elements. */",
          "new_line_content": "        serverPanic(\"Not handled encoding in SCAN.\");",
          "content_same": false
        },
        {
          "line": 1233,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(result)",
          "old_line_content": "/* Helper function to extract keys from following commands:",
          "new_line_content": "    zfree(result);",
          "content_same": false
        },
        {
          "line": 726,
          "old_api": null,
          "new_api": "listNodeValue",
          "old_text": null,
          "new_text": "listNodeValue(node)",
          "old_line_content": "",
          "new_line_content": "        robj *kobj = listNodeValue(node);",
          "content_same": false
        },
        {
          "line": 727,
          "old_api": null,
          "new_api": "listNextNode",
          "old_text": null,
          "new_text": "listNextNode(node)",
          "old_line_content": "        /* Filter element if it does not match the pattern. */",
          "new_line_content": "        nextnode = listNextNode(node);",
          "content_same": false
        },
        {
          "line": 1241,
          "old_api": null,
          "new_api": "UNUSED",
          "old_text": null,
          "new_text": "UNUSED(cmd)",
          "old_line_content": "    /* Sanity check. Don't return any key if the command is going to",
          "new_line_content": "    UNUSED(cmd);",
          "content_same": false
        },
        {
          "line": 732,
          "old_api": null,
          "new_api": "sdsEncodedObject",
          "old_text": null,
          "new_text": "sdsEncodedObject(kobj)",
          "old_line_content": "            } else {",
          "new_line_content": "            if (sdsEncodedObject(kobj)) {",
          "content_same": false
        },
        {
          "line": 733,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(kobj->ptr)",
          "old_line_content": "                char buf[LONG_STR_SIZE];",
          "new_line_content": "                if (!stringmatchlen(pat, patlen, kobj->ptr, sdslen(kobj->ptr), 0))",
          "content_same": false
        },
        {
          "line": 1246,
          "old_api": null,
          "new_api": "num < 1 || num > (argc-3)",
          "old_text": null,
          "new_text": "num < 1 || num > (argc-3)",
          "old_line_content": "    }",
          "new_line_content": "    if (num < 1 || num > (argc-3)) {",
          "content_same": false
        },
        {
          "line": 739,
          "old_api": null,
          "new_api": "serverAssert",
          "old_text": null,
          "new_text": "serverAssert(kobj->encoding == OBJ_ENCODING_INT)",
          "old_line_content": "            }",
          "new_line_content": "                serverAssert(kobj->encoding == OBJ_ENCODING_INT);",
          "content_same": false
        },
        {
          "line": 740,
          "old_api": null,
          "new_api": "ll2string",
          "old_text": null,
          "new_text": "ll2string(buf,sizeof(buf),(long)kobj->ptr)",
          "old_line_content": "        }",
          "new_line_content": "                len = ll2string(buf,sizeof(buf),(long)kobj->ptr);",
          "content_same": false
        },
        {
          "line": 741,
          "old_api": null,
          "new_api": "stringmatchlen",
          "old_text": null,
          "new_text": "stringmatchlen(pat, patlen, buf, len, 0)",
          "old_line_content": "",
          "new_line_content": "                if (!stringmatchlen(pat, patlen, buf, len, 0)) filter = 1;",
          "content_same": false
        },
        {
          "line": 1254,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(int)*(num+1))",
          "old_line_content": "    for (i = 0; i < num; i++) keys[i] = 3+i;",
          "new_line_content": "    keys = zmalloc(sizeof(int)*(num+1));",
          "content_same": false
        },
        {
          "line": 746,
          "old_api": null,
          "new_api": "expireIfNeeded",
          "old_text": null,
          "new_text": "expireIfNeeded(c->db, kobj)",
          "old_line_content": "        if (filter) {",
          "new_line_content": "        if (!filter && o == NULL && expireIfNeeded(c->db, kobj)) filter = 1;",
          "content_same": false
        },
        {
          "line": 750,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(kobj)",
          "old_line_content": "",
          "new_line_content": "            decrRefCount(kobj);",
          "content_same": false
        },
        {
          "line": 751,
          "old_api": null,
          "new_api": "listDelNode",
          "old_text": null,
          "new_text": "listDelNode(keys, node)",
          "old_line_content": "        /* If this is a hash or a sorted set, we have a flat list of",
          "new_line_content": "            listDelNode(keys, node);",
          "content_same": false
        },
        {
          "line": 1270,
          "old_api": null,
          "new_api": "UNUSED",
          "old_text": null,
          "new_text": "UNUSED(cmd)",
          "old_line_content": "    /* Sanity check. Don't return any key if the command is going to",
          "new_line_content": "    UNUSED(cmd);",
          "content_same": false
        },
        {
          "line": 1272,
          "old_api": null,
          "new_api": "atoi",
          "old_text": null,
          "new_text": "atoi(argv[2]->ptr)",
          "old_line_content": "    if (num <= 0 || num > (argc-3)) {",
          "new_line_content": "    num = atoi(argv[2]->ptr);",
          "content_same": false
        },
        {
          "line": 761,
          "old_api": null,
          "new_api": "listNodeValue",
          "old_text": null,
          "new_text": "listNodeValue(node)",
          "old_line_content": "            }",
          "new_line_content": "                kobj = listNodeValue(node);",
          "content_same": false
        },
        {
          "line": 762,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(kobj)",
          "old_line_content": "        }",
          "new_line_content": "                decrRefCount(kobj);",
          "content_same": false
        },
        {
          "line": 763,
          "old_api": null,
          "new_api": "listDelNode",
          "old_text": null,
          "new_text": "listDelNode(keys, node)",
          "old_line_content": "        node = nextnode;",
          "new_line_content": "                listDelNode(keys, node);",
          "content_same": false
        },
        {
          "line": 1280,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(int)*num)",
          "old_line_content": "    /* Add all key positions for argv[3...n] to keys[] */",
          "new_line_content": "    keys = zmalloc(sizeof(int)*num);",
          "content_same": false
        },
        {
          "line": 776,
          "old_api": null,
          "new_api": "addReplyBulk",
          "old_text": null,
          "new_text": "addReplyBulk(c, kobj)",
          "old_line_content": "    }",
          "new_line_content": "        addReplyBulk(c, kobj);",
          "content_same": false
        },
        {
          "line": 777,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(kobj)",
          "old_line_content": "",
          "new_line_content": "        decrRefCount(kobj);",
          "content_same": false
        },
        {
          "line": 778,
          "old_api": null,
          "new_api": "listDelNode",
          "old_text": null,
          "new_text": "listDelNode(keys, node)",
          "old_line_content": "cleanup:",
          "new_line_content": "        listDelNode(keys, node);",
          "content_same": false
        },
        {
          "line": 782,
          "old_api": null,
          "new_api": "listSetFreeMethod",
          "old_text": null,
          "new_text": "listSetFreeMethod(keys,decrRefCountVoid)",
          "old_line_content": "",
          "new_line_content": "    listSetFreeMethod(keys,decrRefCountVoid);",
          "content_same": false
        },
        {
          "line": 783,
          "old_api": null,
          "new_api": "listRelease",
          "old_text": null,
          "new_text": "listRelease(keys)",
          "old_line_content": "/* The SCAN command completely relies on scanGenericCommand. */",
          "new_line_content": "    listRelease(keys);",
          "content_same": false
        },
        {
          "line": 789,
          "old_api": null,
          "new_api": "parseScanCursorOrReply",
          "old_text": null,
          "new_text": "parseScanCursorOrReply(c,c->argv[1],&cursor)",
          "old_line_content": "",
          "new_line_content": "    if (parseScanCursorOrReply(c,c->argv[1],&cursor) == C_ERR) return;",
          "content_same": false
        },
        {
          "line": 790,
          "old_api": null,
          "new_api": "scanGenericCommand",
          "old_text": null,
          "new_text": "scanGenericCommand(c,NULL,cursor)",
          "old_line_content": "void dbsizeCommand(client *c) {",
          "new_line_content": "    scanGenericCommand(c,NULL,cursor);",
          "content_same": false
        },
        {
          "line": 1301,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(int)*2)",
          "old_line_content": "",
          "new_line_content": "    keys = zmalloc(sizeof(int)*2); /* Alloc 2 places for the worst case. */",
          "content_same": false
        },
        {
          "line": 794,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(c->db->dict)",
          "old_line_content": "void lastsaveCommand(client *c) {",
          "new_line_content": "    addReplyLongLong(c,dictSize(c->db->dict));",
          "content_same": false
        },
        {
          "line": 798,
          "old_api": null,
          "new_api": "addReplyLongLong",
          "old_text": null,
          "new_text": "addReplyLongLong(c,server.lastsave)",
          "old_line_content": "void typeCommand(client *c) {",
          "new_line_content": "    addReplyLongLong(c,server.lastsave);",
          "content_same": false
        },
        {
          "line": 805,
          "old_api": null,
          "new_api": "lookupKeyReadWithFlags",
          "old_text": null,
          "new_text": "lookupKeyReadWithFlags(c->db,c->argv[1],LOOKUP_NOTOUCH)",
          "old_line_content": "    } else {",
          "new_line_content": "    o = lookupKeyReadWithFlags(c->db,c->argv[1],LOOKUP_NOTOUCH);",
          "content_same": false
        },
        {
          "line": 1324,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(argv[i]->ptr,\"store\")",
          "old_line_content": "                 * ones are provided. This is same behavior as SORT. */",
          "new_line_content": "            } else if (!strcasecmp(argv[i]->ptr,\"store\") && i+1 < argc) {",
          "content_same": false
        },
        {
          "line": 823,
          "old_api": null,
          "new_api": "addReplyStatus",
          "old_text": null,
          "new_text": "addReplyStatus(c,type)",
          "old_line_content": "void shutdownCommand(client *c) {",
          "new_line_content": "    addReplyStatus(c,type);",
          "content_same": false
        },
        {
          "line": 1340,
          "old_api": null,
          "new_api": "UNUSED",
          "old_text": null,
          "new_text": "UNUSED(cmd)",
          "old_line_content": "    first = 3;",
          "new_line_content": "    UNUSED(cmd);",
          "content_same": false
        },
        {
          "line": 833,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[1]->ptr,\"nosave\")",
          "old_line_content": "            flags |= SHUTDOWN_SAVE;",
          "new_line_content": "        if (!strcasecmp(c->argv[1]->ptr,\"nosave\")) {",
          "content_same": false
        },
        {
          "line": 1349,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(argv[i]->ptr,\"keys\")",
          "old_line_content": "                first = i+1;",
          "new_line_content": "            if (!strcasecmp(argv[i]->ptr,\"keys\") &&",
          "content_same": false
        },
        {
          "line": 838,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.syntaxerr)",
          "old_line_content": "    }",
          "new_line_content": "            addReply(c,shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 1350,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(argv[3]->ptr)",
          "old_line_content": "                num = argc-first;",
          "new_line_content": "                sdslen(argv[3]->ptr) == 0)",
          "content_same": false
        },
        {
          "line": 1359,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(int)*num)",
          "old_line_content": "    return keys;",
          "new_line_content": "    keys = zmalloc(sizeof(int)*num);",
          "content_same": false
        },
        {
          "line": 850,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(0)",
          "old_line_content": "",
          "new_line_content": "    if (prepareForShutdown(flags) == C_OK) exit(0);",
          "content_same": false
        },
        {
          "line": 851,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"Errors trying to SHUTDOWN. Check logs.\")",
          "old_line_content": "void renameGenericCommand(client *c, int nx) {",
          "new_line_content": "    addReplyError(c,\"Errors trying to SHUTDOWN. Check logs.\");",
          "content_same": false
        },
        {
          "line": 345,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(server.db[j].dict)",
          "old_line_content": "        } else {",
          "new_line_content": "        removed += dictSize(server.db[j].dict);",
          "content_same": false
        },
        {
          "line": 1371,
          "old_api": null,
          "new_api": "UNUSED",
          "old_text": null,
          "new_text": "UNUSED(cmd)",
          "old_line_content": "    int stored_key = -1;",
          "new_line_content": "    UNUSED(cmd);",
          "content_same": false
        },
        {
          "line": 349,
          "old_api": null,
          "new_api": "dictEmpty",
          "old_text": null,
          "new_text": "dictEmpty(server.db[j].dict,callback)",
          "old_line_content": "    }",
          "new_line_content": "            dictEmpty(server.db[j].dict,callback);",
          "content_same": false
        },
        {
          "line": 350,
          "old_api": null,
          "new_api": "dictEmpty",
          "old_text": null,
          "new_text": "dictEmpty(server.db[j].expires,callback)",
          "old_line_content": "    if (server.cluster_enabled) {",
          "new_line_content": "            dictEmpty(server.db[j].expires,callback);",
          "content_same": false
        },
        {
          "line": 861,
          "old_api": null,
          "new_api": "sdscmp",
          "old_text": null,
          "new_text": "sdscmp(c->argv[1]->ptr,c->argv[2]->ptr)",
          "old_line_content": "        return;",
          "new_line_content": "    if (sdscmp(c->argv[1]->ptr,c->argv[2]->ptr) == 0) samekey = 1;",
          "content_same": false
        },
        {
          "line": 863,
          "old_api": null,
          "new_api": "lookupKeyWriteOrReply",
          "old_text": null,
          "new_text": "lookupKeyWriteOrReply(c,c->argv[1],shared.nokeyerr)",
          "old_line_content": "    if (samekey) {",
          "new_line_content": "    if ((o = lookupKeyWriteOrReply(c,c->argv[1],shared.nokeyerr)) == NULL)",
          "content_same": false
        },
        {
          "line": 355,
          "old_api": null,
          "new_api": "slotToKeyFlushAsync",
          "old_text": null,
          "new_text": "slotToKeyFlushAsync()",
          "old_line_content": "        }",
          "new_line_content": "            slotToKeyFlushAsync();",
          "content_same": false
        },
        {
          "line": 867,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,nx ? shared.czero : shared.ok)",
          "old_line_content": "",
          "new_line_content": "        addReply(c,nx ? shared.czero : shared.ok);",
          "content_same": false
        },
        {
          "line": 1381,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(arg, \"storedist\")",
          "old_line_content": "        }",
          "new_line_content": "        if ((!strcasecmp(arg, \"store\") || !strcasecmp(arg, \"storedist\")) && ((i+1) < argc)) {",
          "content_same": false
        },
        {
          "line": 871,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(o)",
          "old_line_content": "        if (nx) {",
          "new_line_content": "    incrRefCount(o);",
          "content_same": false
        },
        {
          "line": 360,
          "old_api": null,
          "new_api": "flushSlaveKeysWithExpireList",
          "old_text": null,
          "new_text": "flushSlaveKeysWithExpireList()",
          "old_line_content": "",
          "new_line_content": "    if (dbnum == -1) flushSlaveKeysWithExpireList();",
          "content_same": false
        },
        {
          "line": 875,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(o)",
          "old_line_content": "        }",
          "new_line_content": "            decrRefCount(o);",
          "content_same": false
        },
        {
          "line": 876,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.czero)",
          "old_line_content": "        /* Overwrite: delete the old key before creating the new one",
          "new_line_content": "            addReply(c,shared.czero);",
          "content_same": false
        },
        {
          "line": 1392,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(int) * num)",
          "old_line_content": "    keys[0] = 1;",
          "new_line_content": "    keys = zmalloc(sizeof(int) * num);",
          "content_same": false
        },
        {
          "line": 886,
          "old_api": null,
          "new_api": "signalModifiedKey",
          "old_text": null,
          "new_text": "signalModifiedKey(c->db,c->argv[1])",
          "old_line_content": "        c->argv[1],c->db->id);",
          "new_line_content": "    signalModifiedKey(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 888,
          "old_api": null,
          "new_api": "notifyKeyspaceEvent",
          "old_text": null,
          "new_text": "notifyKeyspaceEvent(NOTIFY_GENERIC,\"rename_from\",\n        c->argv[1],c->db->id)",
          "old_line_content": "        c->argv[2],c->db->id);",
          "new_line_content": "    notifyKeyspaceEvent(NOTIFY_GENERIC,\"rename_from\",",
          "content_same": false
        },
        {
          "line": 381,
          "old_api": null,
          "new_api": "touchWatchedKey",
          "old_text": null,
          "new_text": "touchWatchedKey(db,key)",
          "old_line_content": "void signalFlushedDb(int dbid) {",
          "new_line_content": "    touchWatchedKey(db,key);",
          "content_same": false
        },
        {
          "line": 893,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,nx ? shared.cone : shared.ok)",
          "old_line_content": "void renameCommand(client *c) {",
          "new_line_content": "    addReply(c,nx ? shared.cone : shared.ok);",
          "content_same": false
        },
        {
          "line": 1407,
          "old_api": null,
          "new_api": "UNUSED",
          "old_text": null,
          "new_text": "UNUSED(cmd)",
          "old_line_content": "     * \"STREAMS\" string which is actually the option. This is needed because",
          "new_line_content": "    UNUSED(cmd);",
          "content_same": false
        },
        {
          "line": 385,
          "old_api": null,
          "new_api": "touchWatchedKeysOnFlush",
          "old_text": null,
          "new_text": "touchWatchedKeysOnFlush(dbid)",
          "old_line_content": "/*-----------------------------------------------------------------------------",
          "new_line_content": "    touchWatchedKeysOnFlush(dbid);",
          "content_same": false
        },
        {
          "line": 897,
          "old_api": null,
          "new_api": "renameGenericCommand",
          "old_text": null,
          "new_text": "renameGenericCommand(c,0)",
          "old_line_content": "void renamenxCommand(client *c) {",
          "new_line_content": "    renameGenericCommand(c,0);",
          "content_same": false
        },
        {
          "line": 901,
          "old_api": null,
          "new_api": "renameGenericCommand",
          "old_text": null,
          "new_text": "renameGenericCommand(c,1)",
          "old_line_content": "void moveCommand(client *c) {",
          "new_line_content": "    renameGenericCommand(c,1);",
          "content_same": false
        },
        {
          "line": 1416,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(arg, \"block\")",
          "old_line_content": "            i++; /* Skip option argument. */",
          "new_line_content": "        if (!strcasecmp(arg, \"block\")) {",
          "content_same": false
        },
        {
          "line": 1418,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(arg, \"count\")",
          "old_line_content": "            i += 2; /* Skip option argument. */",
          "new_line_content": "        } else if (!strcasecmp(arg, \"count\")) {",
          "content_same": false
        },
        {
          "line": 1420,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(arg, \"group\")",
          "old_line_content": "            /* Nothing to do. */",
          "new_line_content": "        } else if (!strcasecmp(arg, \"group\")) {",
          "content_same": false
        },
        {
          "line": 1422,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(arg, \"noack\")",
          "old_line_content": "            streams_pos = i;",
          "new_line_content": "        } else if (!strcasecmp(arg, \"noack\")) {",
          "content_same": false
        },
        {
          "line": 911,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"MOVE is not allowed in cluster mode\")",
          "old_line_content": "",
          "new_line_content": "        addReplyError(c,\"MOVE is not allowed in cluster mode\");",
          "content_same": false
        },
        {
          "line": 1424,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(arg, \"streams\")",
          "old_line_content": "        } else {",
          "new_line_content": "        } else if (!strcasecmp(arg, \"streams\")) {",
          "content_same": false
        },
        {
          "line": 403,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[1]->ptr,\"async\")",
          "old_line_content": "        }",
          "new_line_content": "        if (c->argc > 2 || strcasecmp(c->argv[1]->ptr,\"async\")) {",
          "content_same": false
        },
        {
          "line": 404,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.syntaxerr)",
          "old_line_content": "        *flags = EMPTYDB_ASYNC;",
          "new_line_content": "            addReply(c,shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 919,
          "old_api": null,
          "new_api": "getLongLongFromObject",
          "old_text": null,
          "new_text": "getLongLongFromObject(c->argv[2],&dbid)",
          "old_line_content": "    {",
          "new_line_content": "    if (getLongLongFromObject(c->argv[2],&dbid) == C_ERR ||",
          "content_same": false
        },
        {
          "line": 921,
          "old_api": null,
          "new_api": "selectDb",
          "old_text": null,
          "new_text": "selectDb(c,dbid)",
          "old_line_content": "        return;",
          "new_line_content": "        selectDb(c,dbid) == C_ERR)",
          "content_same": false
        },
        {
          "line": 923,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.outofrangeerr)",
          "old_line_content": "    dst = c->db;",
          "new_line_content": "        addReply(c,shared.outofrangeerr);",
          "content_same": false
        },
        {
          "line": 927,
          "old_api": null,
          "new_api": "selectDb",
          "old_text": null,
          "new_text": "selectDb(c,srcid)",
          "old_line_content": "     * DB as the source DB it is probably an error. */",
          "new_line_content": "    selectDb(c,srcid); /* Back to the source DB */",
          "content_same": false
        },
        {
          "line": 1441,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(int) * num)",
          "old_line_content": "    return keys;",
          "new_line_content": "    keys = zmalloc(sizeof(int) * num);",
          "content_same": false
        },
        {
          "line": 932,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.sameobjecterr)",
          "old_line_content": "",
          "new_line_content": "        addReply(c,shared.sameobjecterr);",
          "content_same": false
        },
        {
          "line": 421,
          "old_api": null,
          "new_api": "signalFlushedDb",
          "old_text": null,
          "new_text": "signalFlushedDb(c->db->id)",
          "old_line_content": "}",
          "new_line_content": "    signalFlushedDb(c->db->id);",
          "content_same": false
        },
        {
          "line": 422,
          "old_api": null,
          "new_api": "emptyDb",
          "old_text": null,
          "new_text": "emptyDb(c->db->id,flags,NULL)",
          "old_line_content": "",
          "new_line_content": "    server.dirty += emptyDb(c->db->id,flags,NULL);",
          "content_same": false
        },
        {
          "line": 423,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "/* FLUSHALL [ASYNC]",
          "new_line_content": "    addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 937,
          "old_api": null,
          "new_api": "lookupKeyWrite",
          "old_text": null,
          "new_text": "lookupKeyWrite(c->db,c->argv[1])",
          "old_line_content": "        return;",
          "new_line_content": "    o = lookupKeyWrite(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 433,
          "old_api": null,
          "new_api": "signalFlushedDb",
          "old_text": null,
          "new_text": "signalFlushedDb(-1)",
          "old_line_content": "    if (server.rdb_child_pid != -1) {",
          "new_line_content": "    signalFlushedDb(-1);",
          "content_same": false
        },
        {
          "line": 945,
          "old_api": null,
          "new_api": "lookupKeyWrite",
          "old_text": null,
          "new_text": "lookupKeyWrite(dst,c->argv[1])",
          "old_line_content": "    }",
          "new_line_content": "    if (lookupKeyWrite(dst,c->argv[1]) != NULL) {",
          "content_same": false
        },
        {
          "line": 1461,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(indexed+2,key->ptr,keylen)",
          "old_line_content": "    } else {",
          "new_line_content": "    memcpy(indexed+2,key->ptr,keylen);",
          "content_same": false
        },
        {
          "line": 437,
          "old_api": null,
          "new_api": "kill",
          "old_text": null,
          "new_text": "kill(server.rdb_child_pid,SIGUSR1)",
          "old_line_content": "    if (server.saveparamslen > 0) {",
          "new_line_content": "        kill(server.rdb_child_pid,SIGUSR1);",
          "content_same": false
        },
        {
          "line": 438,
          "old_api": null,
          "new_api": "rdbRemoveTempFile",
          "old_text": null,
          "new_text": "rdbRemoveTempFile(server.rdb_child_pid)",
          "old_line_content": "        /* Normally rdbSave() will reset dirty, but we don't want this here",
          "new_line_content": "        rdbRemoveTempFile(server.rdb_child_pid);",
          "content_same": false
        },
        {
          "line": 949,
          "old_api": null,
          "new_api": "dbAdd",
          "old_text": null,
          "new_text": "dbAdd(dst,c->argv[1],o)",
          "old_line_content": "",
          "new_line_content": "    dbAdd(dst,c->argv[1],o);",
          "content_same": false
        },
        {
          "line": 950,
          "old_api": null,
          "new_api": "setExpire",
          "old_text": null,
          "new_text": "setExpire(c,dst,c->argv[1],expire)",
          "old_line_content": "    /* OK! key moved, free the entry in the source DB */",
          "new_line_content": "    if (expire != -1) setExpire(c,dst,c->argv[1],expire);",
          "content_same": false
        },
        {
          "line": 954,
          "old_api": null,
          "new_api": "dbDelete",
          "old_text": null,
          "new_text": "dbDelete(src,c->argv[1])",
          "old_line_content": "}",
          "new_line_content": "    dbDelete(src,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 1463,
          "old_api": null,
          "new_api": "raxInsert",
          "old_text": null,
          "new_text": "raxInsert(server.cluster->slots_to_keys,indexed,keylen+2,NULL,NULL)",
          "old_line_content": "    }",
          "new_line_content": "        raxInsert(server.cluster->slots_to_keys,indexed,keylen+2,NULL,NULL);",
          "content_same": false
        },
        {
          "line": 956,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.cone)",
          "old_line_content": "/* Helper function for dbSwapDatabases(): scans the list of keys that have",
          "new_line_content": "    addReply(c,shared.cone);",
          "content_same": false
        },
        {
          "line": 445,
          "old_api": null,
          "new_api": "rdbPopulateSaveInfo",
          "old_text": null,
          "new_text": "rdbPopulateSaveInfo(&rsi)",
          "old_line_content": "    }",
          "new_line_content": "        rsiptr = rdbPopulateSaveInfo(&rsi);",
          "content_same": false
        },
        {
          "line": 446,
          "old_api": null,
          "new_api": "rdbSave",
          "old_text": null,
          "new_text": "rdbSave(server.rdb_filename,rsiptr)",
          "old_line_content": "    server.dirty++;",
          "new_line_content": "        rdbSave(server.rdb_filename,rsiptr);",
          "content_same": false
        },
        {
          "line": 1465,
          "old_api": null,
          "new_api": "raxRemove",
          "old_text": null,
          "new_text": "raxRemove(server.cluster->slots_to_keys,indexed,keylen+2,NULL)",
          "old_line_content": "}",
          "new_line_content": "        raxRemove(server.cluster->slots_to_keys,indexed,keylen+2,NULL);",
          "content_same": false
        },
        {
          "line": 1467,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(indexed)",
          "old_line_content": "void slotToKeyAdd(robj *key) {",
          "new_line_content": "    if (indexed != buf) zfree(indexed);",
          "content_same": false
        },
        {
          "line": 1471,
          "old_api": null,
          "new_api": "slotToKeyUpdateKey",
          "old_text": null,
          "new_text": "slotToKeyUpdateKey(key,1)",
          "old_line_content": "void slotToKeyDel(robj *key) {",
          "new_line_content": "    slotToKeyUpdateKey(key,1);",
          "content_same": false
        },
        {
          "line": 1475,
          "old_api": null,
          "new_api": "slotToKeyUpdateKey",
          "old_text": null,
          "new_text": "slotToKeyUpdateKey(key,0)",
          "old_line_content": "void slotToKeyFlush(void) {",
          "new_line_content": "    slotToKeyUpdateKey(key,0);",
          "content_same": false
        },
        {
          "line": 966,
          "old_api": null,
          "new_api": "dictNext",
          "old_text": null,
          "new_text": "dictNext(di)",
          "old_line_content": "        if (value && (value->type == OBJ_LIST ||",
          "new_line_content": "    while((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 967,
          "old_api": null,
          "new_api": "dictGetKey",
          "old_text": null,
          "new_text": "dictGetKey(de)",
          "old_line_content": "                      value->type == OBJ_STREAM ||",
          "new_line_content": "        robj *key = dictGetKey(de);",
          "content_same": false
        },
        {
          "line": 968,
          "old_api": null,
          "new_api": "lookupKey",
          "old_text": null,
          "new_text": "lookupKey(db,key,LOOKUP_NOTOUCH)",
          "old_line_content": "                      value->type == OBJ_ZSET))",
          "new_line_content": "        robj *value = lookupKey(db,key,LOOKUP_NOTOUCH);",
          "content_same": false
        },
        {
          "line": 457,
          "old_api": null,
          "new_api": "expireIfNeeded",
          "old_text": null,
          "new_text": "expireIfNeeded(c->db,c->argv[j])",
          "old_line_content": "        if (deleted) {",
          "new_line_content": "        expireIfNeeded(c->db,c->argv[j]);",
          "content_same": false
        },
        {
          "line": 1479,
          "old_api": null,
          "new_api": "raxFree",
          "old_text": null,
          "new_text": "raxFree(server.cluster->slots_to_keys)",
          "old_line_content": "           sizeof(server.cluster->slots_keys_count));",
          "new_line_content": "    raxFree(server.cluster->slots_to_keys);",
          "content_same": false
        },
        {
          "line": 1480,
          "old_api": null,
          "new_api": "raxNew",
          "old_text": null,
          "new_text": "raxNew()",
          "old_line_content": "}",
          "new_line_content": "    server.cluster->slots_to_keys = raxNew();",
          "content_same": false
        },
        {
          "line": 972,
          "old_api": null,
          "new_api": "signalKeyAsReady",
          "old_text": null,
          "new_text": "signalKeyAsReady(db, key)",
          "old_line_content": "}",
          "new_line_content": "            signalKeyAsReady(db, key);",
          "content_same": false
        },
        {
          "line": 461,
          "old_api": null,
          "new_api": "signalModifiedKey",
          "old_text": null,
          "new_text": "signalModifiedKey(c->db,c->argv[j])",
          "old_line_content": "            server.dirty++;",
          "new_line_content": "            signalModifiedKey(c->db,c->argv[j]);",
          "content_same": false
        },
        {
          "line": 462,
          "old_api": null,
          "new_api": "notifyKeyspaceEvent",
          "old_text": null,
          "new_text": "notifyKeyspaceEvent(NOTIFY_GENERIC,\n                \"del\",c->argv[j],c->db->id)",
          "old_line_content": "            numdel++;",
          "new_line_content": "            notifyKeyspaceEvent(NOTIFY_GENERIC,",
          "content_same": false
        },
        {
          "line": 974,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "/* Swap two databases at runtime so that all clients will magically see",
          "new_line_content": "    dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 1481,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(server.cluster->slots_keys_count,0,\n           sizeof(server.cluster->slots_keys_count))",
          "old_line_content": "",
          "new_line_content": "    memset(server.cluster->slots_keys_count,0,",
          "content_same": false
        },
        {
          "line": 468,
          "old_api": null,
          "new_api": "addReplyLongLong",
          "old_text": null,
          "new_text": "addReplyLongLong(c,numdel)",
          "old_line_content": "void delCommand(client *c) {",
          "new_line_content": "    addReplyLongLong(c,numdel);",
          "content_same": false
        },
        {
          "line": 1495,
          "old_api": null,
          "new_api": "raxStart",
          "old_text": null,
          "new_text": "raxStart(&iter,server.cluster->slots_to_keys)",
          "old_line_content": "        if (iter.key[0] != indexed[0] || iter.key[1] != indexed[1]) break;",
          "new_line_content": "    raxStart(&iter,server.cluster->slots_to_keys);",
          "content_same": false
        },
        {
          "line": 472,
          "old_api": null,
          "new_api": "delGenericCommand",
          "old_text": null,
          "new_text": "delGenericCommand(c,0)",
          "old_line_content": "void unlinkCommand(client *c) {",
          "new_line_content": "    delGenericCommand(c,0);",
          "content_same": false
        },
        {
          "line": 1497,
          "old_api": null,
          "new_api": "raxNext",
          "old_text": null,
          "new_text": "raxNext(&iter)",
          "old_line_content": "    }",
          "new_line_content": "    while(count-- && raxNext(&iter)) {",
          "content_same": false
        },
        {
          "line": 1499,
          "old_api": null,
          "new_api": "createStringObject",
          "old_text": null,
          "new_text": "createStringObject((char*)iter.key+2,iter.key_len-2)",
          "old_line_content": "    return j;",
          "new_line_content": "        keys[j++] = createStringObject((char*)iter.key+2,iter.key_len-2);",
          "content_same": false
        },
        {
          "line": 476,
          "old_api": null,
          "new_api": "delGenericCommand",
          "old_text": null,
          "new_text": "delGenericCommand(c,1)",
          "old_line_content": "/* EXISTS key1 key2 ... key_N.",
          "new_line_content": "    delGenericCommand(c,1);",
          "content_same": false
        },
        {
          "line": 1501,
          "old_api": null,
          "new_api": "raxStop",
          "old_text": null,
          "new_text": "raxStop(&iter)",
          "old_line_content": "",
          "new_line_content": "    raxStop(&iter);",
          "content_same": false
        },
        {
          "line": 486,
          "old_api": null,
          "new_api": "lookupKeyRead",
          "old_text": null,
          "new_text": "lookupKeyRead(c->db,c->argv[j])",
          "old_line_content": "}",
          "new_line_content": "        if (lookupKeyRead(c->db,c->argv[j])) count++;",
          "content_same": false
        },
        {
          "line": 488,
          "old_api": null,
          "new_api": "addReplyLongLong",
          "old_text": null,
          "new_text": "addReplyLongLong(c,count)",
          "old_line_content": "void selectCommand(client *c) {",
          "new_line_content": "    addReplyLongLong(c,count);",
          "content_same": false
        },
        {
          "line": 494,
          "old_api": null,
          "new_api": "getLongFromObjectOrReply",
          "old_text": null,
          "new_text": "getLongFromObjectOrReply(c, c->argv[1], &id,\n        \"invalid DB index\")",
          "old_line_content": "",
          "new_line_content": "    if (getLongFromObjectOrReply(c, c->argv[1], &id,",
          "content_same": false
        },
        {
          "line": 1519,
          "old_api": null,
          "new_api": "createStringObject",
          "old_text": null,
          "new_text": "createStringObject((char*)iter.key+2,iter.key_len-2)",
          "old_line_content": "        j++;",
          "new_line_content": "        robj *key = createStringObject((char*)iter.key+2,iter.key_len-2);",
          "content_same": false
        },
        {
          "line": 1520,
          "old_api": null,
          "new_api": "dbDelete",
          "old_text": null,
          "new_text": "dbDelete(&server.db[0],key)",
          "old_line_content": "    }",
          "new_line_content": "        dbDelete(&server.db[0],key);",
          "content_same": false
        },
        {
          "line": 1012,
          "old_api": null,
          "new_api": "scanDatabaseForReadyLists",
          "old_text": null,
          "new_text": "scanDatabaseForReadyLists(db1)",
          "old_line_content": "}",
          "new_line_content": "    scanDatabaseForReadyLists(db1);",
          "content_same": false
        },
        {
          "line": 1013,
          "old_api": null,
          "new_api": "scanDatabaseForReadyLists",
          "old_text": null,
          "new_text": "scanDatabaseForReadyLists(db2)",
          "old_line_content": "",
          "new_line_content": "    scanDatabaseForReadyLists(db2);",
          "content_same": false
        },
        {
          "line": 1524,
          "old_api": null,
          "new_api": "raxStop",
          "old_text": null,
          "new_text": "raxStop(&iter)",
          "old_line_content": "",
          "new_line_content": "    raxStop(&iter);",
          "content_same": false
        },
        {
          "line": 503,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"DB index is out of range\")",
          "old_line_content": "    }",
          "new_line_content": "        addReplyError(c,\"DB index is out of range\");",
          "content_same": false
        },
        {
          "line": 505,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "",
          "new_line_content": "        addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 1023,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"SWAPDB is not allowed in cluster mode\")",
          "old_line_content": "",
          "new_line_content": "        addReplyError(c,\"SWAPDB is not allowed in cluster mode\");",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 1025,
          "old_api": "getLongFromObjectOrReply",
          "new_api": null,
          "old_text": "getLongFromObjectOrReply(c, c->argv[1], &id1,\n        \"invalid first DB index\")",
          "new_text": null,
          "old_line_content": "    if (getLongFromObjectOrReply(c, c->argv[1], &id1,",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 514,
          "old_api": "addReplyBulk",
          "new_api": null,
          "old_text": "addReplyBulk(c,key)",
          "new_text": null,
          "old_line_content": "    addReplyBulk(c,key);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 515,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(key)",
          "new_text": null,
          "old_line_content": "    decrRefCount(key);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1029,
          "old_api": "getLongFromObjectOrReply",
          "new_api": null,
          "old_text": "getLongFromObjectOrReply(c, c->argv[2], &id2,\n        \"invalid second DB index\")",
          "new_text": null,
          "old_line_content": "    if (getLongFromObjectOrReply(c, c->argv[2], &id2,",
          "new_line_content": "        \"invalid first DB index\") != C_OK)",
          "content_same": false
        },
        {
          "line": 522,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(pattern)",
          "new_text": null,
          "old_line_content": "    int plen = sdslen(pattern), allkeys;",
          "new_line_content": "    dictIterator *di;",
          "content_same": false
        },
        {
          "line": 1034,
          "old_api": "dbSwapDatabases",
          "new_api": null,
          "old_text": "dbSwapDatabases(id1,id2)",
          "new_text": null,
          "old_line_content": "    if (dbSwapDatabases(id1,id2) == C_ERR) {",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 524,
          "old_api": "addDeferredMultiBulkLength",
          "new_api": null,
          "old_text": "addDeferredMultiBulkLength(c)",
          "new_text": null,
          "old_line_content": "    void *replylen = addDeferredMultiBulkLength(c);",
          "new_line_content": "    sds pattern = c->argv[1]->ptr;",
          "content_same": false
        },
        {
          "line": 1035,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\"DB index is out of range\")",
          "new_text": null,
          "old_line_content": "        addReplyError(c,\"DB index is out of range\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 526,
          "old_api": "dictGetSafeIterator",
          "new_api": null,
          "old_text": "dictGetSafeIterator(c->db->dict)",
          "new_text": null,
          "old_line_content": "    di = dictGetSafeIterator(c->db->dict);",
          "new_line_content": "    unsigned long numkeys = 0;",
          "content_same": false
        },
        {
          "line": 1039,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.ok)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.ok);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 528,
          "old_api": "dictNext",
          "new_api": null,
          "old_text": "dictNext(di)",
          "new_text": null,
          "old_line_content": "    while((de = dictNext(di)) != NULL) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 533,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(key)",
          "new_text": null,
          "old_line_content": "            keyobj = createStringObject(key,sdslen(key));",
          "new_line_content": "        robj *keyobj;",
          "content_same": false
        },
        {
          "line": 534,
          "old_api": "expireIfNeeded",
          "new_api": null,
          "old_text": "expireIfNeeded(c->db,keyobj)",
          "new_text": null,
          "old_line_content": "            if (expireIfNeeded(c->db,keyobj) == 0) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1050,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(db->dict,key->ptr)",
          "new_text": null,
          "old_line_content": "    serverAssertWithInfo(NULL,key,dictFind(db->dict,key->ptr) != NULL);",
          "new_line_content": "int removeExpire(redisDb *db, robj *key) {",
          "content_same": false
        },
        {
          "line": 1051,
          "old_api": "dictDelete",
          "new_api": null,
          "old_text": "dictDelete(db->expires,key->ptr)",
          "new_text": null,
          "old_line_content": "    return dictDelete(db->expires,key->ptr) == DICT_OK;",
          "new_line_content": "    /* An expire may only be removed if there is a corresponding entry in the",
          "content_same": false
        },
        {
          "line": 542,
          "old_api": "setDeferredMultiBulkLength",
          "new_api": null,
          "old_text": "setDeferredMultiBulkLength(c,replylen,numkeys)",
          "new_text": null,
          "old_line_content": "    setDeferredMultiBulkLength(c,replylen,numkeys);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1062,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(db->dict,key->ptr)",
          "new_text": null,
          "old_line_content": "    kde = dictFind(db->dict,key->ptr);",
          "new_line_content": "    dictEntry *kde, *de;",
          "content_same": false
        },
        {
          "line": 1063,
          "old_api": "serverAssertWithInfo",
          "new_api": null,
          "old_text": "serverAssertWithInfo(NULL,key,kde != NULL)",
          "new_text": null,
          "old_line_content": "    serverAssertWithInfo(NULL,key,kde != NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1064,
          "old_api": "dictGetKey",
          "new_api": null,
          "old_text": "dictGetKey(kde)",
          "new_text": null,
          "old_line_content": "    de = dictAddOrFind(db->expires,dictGetKey(kde));",
          "new_line_content": "    /* Reuse the sds from the main dict in the expire dict */",
          "content_same": false
        },
        {
          "line": 554,
          "old_api": "dictGetKey",
          "new_api": null,
          "old_text": "dictGetKey(de)",
          "new_text": null,
          "old_line_content": "        sds sdskey = dictGetKey(de);",
          "new_line_content": "    robj *key, *val = NULL;",
          "content_same": false
        },
        {
          "line": 555,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(sdskey)",
          "new_text": null,
          "old_line_content": "        key = createStringObject(sdskey, sdslen(sdskey));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1069,
          "old_api": "rememberSlaveKeyWithExpire",
          "new_api": null,
          "old_text": "rememberSlaveKeyWithExpire(db,key)",
          "new_text": null,
          "old_line_content": "        rememberSlaveKeyWithExpire(db,key);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 562,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(sdskey)",
          "new_text": null,
          "old_line_content": "        key = createStringObject(sdskey,sdslen(sdskey));",
          "new_line_content": "    } else if (o->type == OBJ_HASH) {",
          "content_same": false
        },
        {
          "line": 1078,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(db->expires)",
          "new_text": null,
          "old_line_content": "    if (dictSize(db->expires) == 0 ||",
          "new_line_content": "    dictEntry *de;",
          "content_same": false
        },
        {
          "line": 567,
          "old_api": "dictGetVal",
          "new_api": null,
          "old_text": "dictGetVal(de)",
          "new_text": null,
          "old_line_content": "        val = createStringObjectFromLongDouble(*(double*)dictGetVal(de),0);",
          "new_line_content": "    } else if (o->type == OBJ_ZSET) {",
          "content_same": false
        },
        {
          "line": 1079,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(db->expires,key->ptr)",
          "new_text": null,
          "old_line_content": "       (de = dictFind(db->expires,key->ptr)) == NULL) return -1;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1083,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(db->dict,key->ptr)",
          "new_text": null,
          "old_line_content": "    serverAssertWithInfo(NULL,key,dictFind(db->dict,key->ptr) != NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1084,
          "old_api": "dictGetSignedIntegerVal",
          "new_api": null,
          "old_text": "dictGetSignedIntegerVal(de)",
          "new_text": null,
          "old_line_content": "    return dictGetSignedIntegerVal(de);",
          "new_line_content": "    /* The entry was found in the expire dict, this means it should also",
          "content_same": false
        },
        {
          "line": 573,
          "old_api": "listAddNodeTail",
          "new_api": null,
          "old_text": "listAddNodeTail(keys, val)",
          "new_text": null,
          "old_line_content": "    if (val) listAddNodeTail(keys, val);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 586,
          "old_api": "strtoul",
          "new_api": null,
          "old_text": "strtoul(o->ptr, &eptr, 10)",
          "new_text": null,
          "old_line_content": "    *cursor = strtoul(o->ptr, &eptr, 10);",
          "new_line_content": "    /* Use strtoul() because we need an *unsigned* long, so",
          "content_same": false
        },
        {
          "line": 587,
          "old_api": "isspace",
          "new_api": null,
          "old_text": "isspace(((char*)o->ptr)[0])",
          "new_text": null,
          "old_line_content": "    if (isspace(((char*)o->ptr)[0]) || eptr[0] != '\\0' || errno == ERANGE)",
          "new_line_content": "     * getLongLongFromObject() does not cover the whole cursor space. */",
          "content_same": false
        },
        {
          "line": 1100,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(argv[0])",
          "new_text": null,
          "old_line_content": "    incrRefCount(argv[0]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1101,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(argv[1])",
          "new_text": null,
          "old_line_content": "    incrRefCount(argv[1]);",
          "new_line_content": "    argv[0] = lazy ? shared.unlink : shared.del;",
          "content_same": false
        },
        {
          "line": 1105,
          "old_api": "replicationFeedSlaves",
          "new_api": null,
          "old_text": "replicationFeedSlaves(server.slaves,db->id,argv,2)",
          "new_text": null,
          "old_line_content": "    replicationFeedSlaves(server.slaves,db->id,argv,2);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 608,
          "old_api": "listCreate",
          "new_api": null,
          "old_text": "listCreate()",
          "new_text": null,
          "old_line_content": "    list *keys = listCreate();",
          "new_line_content": " * of every element on the Hash. */",
          "content_same": false
        },
        {
          "line": 617,
          "old_api": "serverAssert",
          "new_api": null,
          "old_text": "serverAssert(o == NULL || o->type == OBJ_SET || o->type == OBJ_HASH ||\n                o->type == OBJ_ZSET)",
          "new_text": null,
          "old_line_content": "    serverAssert(o == NULL || o->type == OBJ_SET || o->type == OBJ_HASH ||",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1131,
          "old_api": "getExpire",
          "new_api": null,
          "old_text": "getExpire(db,key)",
          "new_text": null,
          "old_line_content": "    mstime_t when = getExpire(db,key);",
          "new_line_content": " * The return value of the function is 0 if the key is still valid,",
          "content_same": false
        },
        {
          "line": 626,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[i]->ptr, \"count\")",
          "new_text": null,
          "old_line_content": "        if (!strcasecmp(c->argv[i]->ptr, \"count\") && j >= 2) {",
          "new_line_content": "    /* Step 1: Parse options. */",
          "content_same": false
        },
        {
          "line": 627,
          "old_api": "getLongFromObjectOrReply",
          "new_api": null,
          "old_text": "getLongFromObjectOrReply(c, c->argv[i+1], &count, NULL)",
          "new_text": null,
          "old_line_content": "            if (getLongFromObjectOrReply(c, c->argv[i+1], &count, NULL)",
          "new_line_content": "    while (i < c->argc) {",
          "content_same": false
        },
        {
          "line": 1144,
          "old_api": "mstime",
          "new_api": null,
          "old_text": "mstime()",
          "new_text": null,
          "old_line_content": "    now = server.lua_caller ? server.lua_time_start : mstime();",
          "new_line_content": "     * only the first time it is accessed and not in the middle of the",
          "content_same": false
        },
        {
          "line": 634,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.syntaxerr)",
          "new_text": null,
          "old_line_content": "                addReply(c,shared.syntaxerr);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 639,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[i]->ptr, \"match\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcasecmp(c->argv[i]->ptr, \"match\") && j >= 2) {",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 641,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(pat)",
          "new_text": null,
          "old_line_content": "            patlen = sdslen(pat);",
          "new_line_content": "            i += 2;",
          "content_same": false
        },
        {
          "line": 1160,
          "old_api": "propagateExpire",
          "new_api": null,
          "old_text": "propagateExpire(db,key,server.lazyfree_lazy_expire)",
          "new_text": null,
          "old_line_content": "    propagateExpire(db,key,server.lazyfree_lazy_expire);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 649,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.syntaxerr)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.syntaxerr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1161,
          "old_api": "notifyKeyspaceEvent",
          "new_api": null,
          "old_text": "notifyKeyspaceEvent(NOTIFY_EXPIRED,\n        \"expired\",key,db->id)",
          "new_text": null,
          "old_line_content": "    notifyKeyspaceEvent(NOTIFY_EXPIRED,",
          "new_line_content": "    /* Delete the key */",
          "content_same": false
        },
        {
          "line": 1175,
          "old_api": "UNUSED",
          "new_api": null,
          "old_text": "UNUSED(argv)",
          "new_text": null,
          "old_line_content": "    UNUSED(argv);",
          "new_line_content": " * (firstkey, lastkey, step). */",
          "content_same": false
        },
        {
          "line": 1184,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(int)*((last - cmd->firstkey)+1))",
          "new_text": null,
          "old_line_content": "    keys = zmalloc(sizeof(int)*((last - cmd->firstkey)+1));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1194,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(keys)",
          "new_text": null,
          "old_line_content": "                zfree(keys);",
          "new_line_content": "             * return no keys and expect the command implementation to report",
          "content_same": false
        },
        {
          "line": 1198,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Redis built-in command declared keys positions not matching the arity requirements.\")",
          "new_text": null,
          "old_line_content": "                serverPanic(\"Redis built-in command declared keys positions not matching the arity requirements.\");",
          "new_line_content": "                *numkeys = 0;",
          "content_same": false
        },
        {
          "line": 691,
          "old_api": "dictScan",
          "new_api": null,
          "old_text": "dictScan(ht, cursor, scanCallback, NULL, privdata)",
          "new_text": null,
          "old_line_content": "            cursor = dictScan(ht, cursor, scanCallback, NULL, privdata);",
          "new_line_content": "        privdata[0] = keys;",
          "content_same": false
        },
        {
          "line": 699,
          "old_api": "intsetGet",
          "new_api": null,
          "old_text": "intsetGet(o->ptr,pos++,&ll)",
          "new_text": null,
          "old_line_content": "        while(intsetGet(o->ptr,pos++,&ll))",
          "new_line_content": "        int pos = 0;",
          "content_same": false
        },
        {
          "line": 700,
          "old_api": "createStringObjectFromLongLong",
          "new_api": null,
          "old_text": "createStringObjectFromLongLong(ll)",
          "new_text": null,
          "old_line_content": "            listAddNodeTail(keys,createStringObjectFromLongLong(ll));",
          "new_line_content": "        int64_t ll;",
          "content_same": false
        },
        {
          "line": 1220,
          "old_api": "moduleGetCommandKeysViaAPI",
          "new_api": null,
          "old_text": "moduleGetCommandKeysViaAPI(cmd,argv,argc,numkeys)",
          "new_text": null,
          "old_line_content": "        return moduleGetCommandKeysViaAPI(cmd,argv,argc,numkeys);",
          "new_line_content": " * is not required, otherwise it calls the command-specific function. */",
          "content_same": false
        },
        {
          "line": 709,
          "old_api": "ziplistGet",
          "new_api": null,
          "old_text": "ziplistGet(p,&vstr,&vlen,&vll)",
          "new_text": null,
          "old_line_content": "            ziplistGet(p,&vstr,&vlen,&vll);",
          "new_line_content": "        long long vll;",
          "content_same": false
        },
        {
          "line": 710,
          "old_api": "listAddNodeTail",
          "new_api": null,
          "old_text": "listAddNodeTail(keys,\n                (vstr != NULL) ? createStringObject((char*)vstr,vlen) :\n                                 createStringObjectFromLongLong(vll))",
          "new_text": null,
          "old_line_content": "            listAddNodeTail(keys,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 711,
          "old_api": "createStringObject",
          "new_api": null,
          "old_text": "createStringObject((char*)vstr,vlen)",
          "new_text": null,
          "old_line_content": "                (vstr != NULL) ? createStringObject((char*)vstr,vlen) :",
          "new_line_content": "        while(p) {",
          "content_same": false
        },
        {
          "line": 1222,
          "old_api": "getkeys_proc",
          "new_api": null,
          "old_text": "cmd->getkeys_proc(cmd,argv,argc,numkeys)",
          "new_text": null,
          "old_line_content": "        return cmd->getkeys_proc(cmd,argv,argc,numkeys);",
          "new_line_content": "    if (cmd->flags & CMD_MODULE_GETKEYS) {",
          "content_same": false
        },
        {
          "line": 1224,
          "old_api": "getKeysUsingCommandTable",
          "new_api": null,
          "old_text": "getKeysUsingCommandTable(cmd,argv,argc,numkeys)",
          "new_text": null,
          "old_line_content": "        return getKeysUsingCommandTable(cmd,argv,argc,numkeys);",
          "new_line_content": "    } else if (!(cmd->flags & CMD_MODULE) && cmd->getkeys_proc) {",
          "content_same": false
        },
        {
          "line": 717,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Not handled encoding in SCAN.\")",
          "new_text": null,
          "old_line_content": "        serverPanic(\"Not handled encoding in SCAN.\");",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1230,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(result)",
          "new_text": null,
          "old_line_content": "    zfree(result);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 721,
          "old_api": "listFirst",
          "new_api": null,
          "old_text": "listFirst(keys)",
          "new_text": null,
          "old_line_content": "    node = listFirst(keys);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 723,
          "old_api": "listNodeValue",
          "new_api": null,
          "old_text": "listNodeValue(node)",
          "new_text": null,
          "old_line_content": "        robj *kobj = listNodeValue(node);",
          "new_line_content": "    /* Step 3: Filter elements. */",
          "content_same": false
        },
        {
          "line": 1238,
          "old_api": "UNUSED",
          "new_api": null,
          "old_text": "UNUSED(cmd)",
          "new_text": null,
          "old_line_content": "    UNUSED(cmd);",
          "new_line_content": " * ZINTERSTORE <destkey> <num-keys> <key> <key> ... <key> <options> */",
          "content_same": false
        },
        {
          "line": 1240,
          "old_api": "atoi",
          "new_api": null,
          "old_text": "atoi(argv[2]->ptr)",
          "new_text": null,
          "old_line_content": "    num = atoi(argv[2]->ptr);",
          "new_line_content": "    int i, num, *keys;",
          "content_same": false
        },
        {
          "line": 729,
          "old_api": "sdsEncodedObject",
          "new_api": null,
          "old_text": "sdsEncodedObject(kobj)",
          "new_text": null,
          "old_line_content": "            if (sdsEncodedObject(kobj)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 730,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(kobj->ptr)",
          "new_text": null,
          "old_line_content": "                if (!stringmatchlen(pat, patlen, kobj->ptr, sdslen(kobj->ptr), 0))",
          "new_line_content": "        /* Filter element if it does not match the pattern. */",
          "content_same": false
        },
        {
          "line": 736,
          "old_api": "serverAssert",
          "new_api": null,
          "old_text": "serverAssert(kobj->encoding == OBJ_ENCODING_INT)",
          "new_text": null,
          "old_line_content": "                serverAssert(kobj->encoding == OBJ_ENCODING_INT);",
          "new_line_content": "                char buf[LONG_STR_SIZE];",
          "content_same": false
        },
        {
          "line": 737,
          "old_api": "ll2string",
          "new_api": null,
          "old_text": "ll2string(buf,sizeof(buf),(long)kobj->ptr)",
          "new_text": null,
          "old_line_content": "                len = ll2string(buf,sizeof(buf),(long)kobj->ptr);",
          "new_line_content": "                int len;",
          "content_same": false
        },
        {
          "line": 738,
          "old_api": "stringmatchlen",
          "new_api": null,
          "old_text": "stringmatchlen(pat, patlen, buf, len, 0)",
          "new_text": null,
          "old_line_content": "                if (!stringmatchlen(pat, patlen, buf, len, 0)) filter = 1;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1251,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(int)*(num+1))",
          "new_text": null,
          "old_line_content": "    keys = zmalloc(sizeof(int)*(num+1));",
          "new_line_content": "    /* Keys in z{union,inter}store come from two places:",
          "content_same": false
        },
        {
          "line": 743,
          "old_api": "expireIfNeeded",
          "new_api": null,
          "old_text": "expireIfNeeded(c->db, kobj)",
          "new_text": null,
          "old_line_content": "        if (!filter && o == NULL && expireIfNeeded(c->db, kobj)) filter = 1;",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 747,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(kobj)",
          "new_text": null,
          "old_line_content": "            decrRefCount(kobj);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 748,
          "old_api": "listDelNode",
          "new_api": null,
          "old_text": "listDelNode(keys, node)",
          "new_text": null,
          "old_line_content": "            listDelNode(keys, node);",
          "new_line_content": "        /* Remove the element and its associted value if needed. */",
          "content_same": false
        },
        {
          "line": 1267,
          "old_api": "UNUSED",
          "new_api": null,
          "old_text": "UNUSED(cmd)",
          "new_text": null,
          "old_line_content": "    UNUSED(cmd);",
          "new_line_content": " * EVALSHA <script> <num-keys> <key> <key> ... <key> [more stuff] */",
          "content_same": false
        },
        {
          "line": 756,
          "old_api": "listNextNode",
          "new_api": null,
          "old_text": "listNextNode(node)",
          "new_text": null,
          "old_line_content": "            nextnode = listNextNode(node);",
          "new_line_content": "         * value, or skip it if it was not filtered: we only match keys. */",
          "content_same": false
        },
        {
          "line": 1269,
          "old_api": "atoi",
          "new_api": null,
          "old_text": "atoi(argv[2]->ptr)",
          "new_text": null,
          "old_line_content": "    num = atoi(argv[2]->ptr);",
          "new_line_content": "    int i, num, *keys;",
          "content_same": false
        },
        {
          "line": 758,
          "old_api": "listNodeValue",
          "new_api": null,
          "old_text": "listNodeValue(node)",
          "new_text": null,
          "old_line_content": "                kobj = listNodeValue(node);",
          "new_line_content": "            node = nextnode;",
          "content_same": false
        },
        {
          "line": 760,
          "old_api": "listDelNode",
          "new_api": null,
          "old_text": "listDelNode(keys, node)",
          "new_text": null,
          "old_line_content": "                listDelNode(keys, node);",
          "new_line_content": "            if (filter) {",
          "content_same": false
        },
        {
          "line": 1277,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(int)*num)",
          "new_text": null,
          "old_line_content": "    keys = zmalloc(sizeof(int)*num);",
          "new_line_content": "        return NULL;",
          "content_same": false
        },
        {
          "line": 767,
          "old_api": "addReplyMultiBulkLen",
          "new_api": null,
          "old_text": "addReplyMultiBulkLen(c, 2)",
          "new_text": null,
          "old_line_content": "    addReplyMultiBulkLen(c, 2);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 768,
          "old_api": "addReplyBulkLongLong",
          "new_api": null,
          "old_text": "addReplyBulkLongLong(c,cursor)",
          "new_text": null,
          "old_line_content": "    addReplyBulkLongLong(c,cursor);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 772,
          "old_api": "listNodeValue",
          "new_api": null,
          "old_text": "listNodeValue(node)",
          "new_text": null,
          "old_line_content": "        robj *kobj = listNodeValue(node);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 779,
          "old_api": "listSetFreeMethod",
          "new_api": null,
          "old_text": "listSetFreeMethod(keys,decrRefCountVoid)",
          "new_text": null,
          "old_line_content": "    listSetFreeMethod(keys,decrRefCountVoid);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 780,
          "old_api": "listRelease",
          "new_api": null,
          "old_text": "listRelease(keys)",
          "new_text": null,
          "old_line_content": "    listRelease(keys);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1295,
          "old_api": "UNUSED",
          "new_api": null,
          "old_text": "UNUSED(cmd)",
          "new_text": null,
          "old_line_content": "    UNUSED(cmd);",
          "new_line_content": " * correctly identify keys in the \"STORE\" option. */",
          "content_same": false
        },
        {
          "line": 786,
          "old_api": "parseScanCursorOrReply",
          "new_api": null,
          "old_text": "parseScanCursorOrReply(c,c->argv[1],&cursor)",
          "new_text": null,
          "old_line_content": "    if (parseScanCursorOrReply(c,c->argv[1],&cursor) == C_ERR) return;",
          "new_line_content": "/* The SCAN command completely relies on scanGenericCommand. */",
          "content_same": false
        },
        {
          "line": 787,
          "old_api": "scanGenericCommand",
          "new_api": null,
          "old_text": "scanGenericCommand(c,NULL,cursor)",
          "new_text": null,
          "old_line_content": "    scanGenericCommand(c,NULL,cursor);",
          "new_line_content": "void scanCommand(client *c) {",
          "content_same": false
        },
        {
          "line": 791,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(c->db->dict)",
          "new_text": null,
          "old_line_content": "    addReplyLongLong(c,dictSize(c->db->dict));",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 795,
          "old_api": "addReplyLongLong",
          "new_api": null,
          "old_text": "addReplyLongLong(c,server.lastsave)",
          "new_text": null,
          "old_line_content": "    addReplyLongLong(c,server.lastsave);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 802,
          "old_api": "lookupKeyReadWithFlags",
          "new_api": null,
          "old_text": "lookupKeyReadWithFlags(c->db,c->argv[1],LOOKUP_NOTOUCH)",
          "new_text": null,
          "old_line_content": "    o = lookupKeyReadWithFlags(c->db,c->argv[1],LOOKUP_NOTOUCH);",
          "new_line_content": "    robj *o;",
          "content_same": false
        },
        {
          "line": 1318,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(argv[i]->ptr,skiplist[j].name)",
          "new_text": null,
          "old_line_content": "            if (!strcasecmp(argv[i]->ptr,skiplist[j].name)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 820,
          "old_api": "addReplyStatus",
          "new_api": null,
          "old_text": "addReplyStatus(c,type)",
          "new_text": null,
          "old_line_content": "    addReplyStatus(c,type);",
          "new_line_content": "        default: type = \"unknown\"; break;",
          "content_same": false
        },
        {
          "line": 1337,
          "old_api": "UNUSED",
          "new_api": null,
          "old_text": "UNUSED(cmd)",
          "new_text": null,
          "old_line_content": "    UNUSED(cmd);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 827,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.syntaxerr)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.syntaxerr);",
          "new_line_content": "    int flags = 0;",
          "content_same": false
        },
        {
          "line": 832,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[1]->ptr,\"save\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcasecmp(c->argv[1]->ptr,\"save\")) {",
          "new_line_content": "    } else if (c->argc == 2) {",
          "content_same": false
        },
        {
          "line": 1346,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(argv[i]->ptr,\"keys\")",
          "new_text": null,
          "old_line_content": "            if (!strcasecmp(argv[i]->ptr,\"keys\") &&",
          "new_line_content": "    /* But check for the extended one with the KEYS option. */",
          "content_same": false
        },
        {
          "line": 1347,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(argv[3]->ptr)",
          "new_text": null,
          "old_line_content": "                sdslen(argv[3]->ptr) == 0)",
          "new_line_content": "    if (argc > 6) {",
          "content_same": false
        },
        {
          "line": 1356,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(int)*num)",
          "new_text": null,
          "old_line_content": "    keys = zmalloc(sizeof(int)*num);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 847,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(0)",
          "new_text": null,
          "old_line_content": "    if (prepareForShutdown(flags) == C_OK) exit(0);",
          "new_line_content": "     * Also when in Sentinel mode clear the SAVE flag and force NOSAVE. */",
          "content_same": false
        },
        {
          "line": 848,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\"Errors trying to SHUTDOWN. Check logs.\")",
          "new_text": null,
          "old_line_content": "    addReplyError(c,\"Errors trying to SHUTDOWN. Check logs.\");",
          "new_line_content": "    if (server.loading || server.sentinel_mode)",
          "content_same": false
        },
        {
          "line": 342,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(server.db[j].dict)",
          "new_text": null,
          "old_line_content": "        removed += dictSize(server.db[j].dict);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 344,
          "old_api": "emptyDbAsync",
          "new_api": null,
          "old_text": "emptyDbAsync(&server.db[j])",
          "new_text": null,
          "old_line_content": "            emptyDbAsync(&server.db[j]);",
          "new_line_content": "        if (dbnum != -1 && dbnum != j) continue;",
          "content_same": false
        },
        {
          "line": 1368,
          "old_api": "UNUSED",
          "new_api": null,
          "old_text": "UNUSED(cmd)",
          "new_text": null,
          "old_line_content": "    UNUSED(cmd);",
          "new_line_content": " * GEORADIUSBYMEMBER key member radius unit ... options ... */",
          "content_same": false
        },
        {
          "line": 346,
          "old_api": "dictEmpty",
          "new_api": null,
          "old_text": "dictEmpty(server.db[j].dict,callback)",
          "new_text": null,
          "old_line_content": "            dictEmpty(server.db[j].dict,callback);",
          "new_line_content": "        if (async) {",
          "content_same": false
        },
        {
          "line": 858,
          "old_api": "sdscmp",
          "new_api": null,
          "old_text": "sdscmp(c->argv[1]->ptr,c->argv[2]->ptr)",
          "new_text": null,
          "old_line_content": "    if (sdscmp(c->argv[1]->ptr,c->argv[2]->ptr) == 0) samekey = 1;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 860,
          "old_api": "lookupKeyWriteOrReply",
          "new_api": null,
          "old_text": "lookupKeyWriteOrReply(c,c->argv[1],shared.nokeyerr)",
          "new_text": null,
          "old_line_content": "    if ((o = lookupKeyWriteOrReply(c,c->argv[1],shared.nokeyerr)) == NULL)",
          "new_line_content": "     * if the key exists, however we still return an error on unexisting key. */",
          "content_same": false
        },
        {
          "line": 352,
          "old_api": "slotToKeyFlushAsync",
          "new_api": null,
          "old_text": "slotToKeyFlushAsync()",
          "new_text": null,
          "old_line_content": "            slotToKeyFlushAsync();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 864,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,nx ? shared.czero : shared.ok)",
          "new_text": null,
          "old_line_content": "        addReply(c,nx ? shared.czero : shared.ok);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 354,
          "old_api": "slotToKeyFlush",
          "new_api": null,
          "old_text": "slotToKeyFlush()",
          "new_text": null,
          "old_line_content": "            slotToKeyFlush();",
          "new_line_content": "        if (async) {",
          "content_same": false
        },
        {
          "line": 1378,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(arg, \"storedist\")",
          "new_text": null,
          "old_line_content": "        if ((!strcasecmp(arg, \"store\") || !strcasecmp(arg, \"storedist\")) && ((i+1) < argc)) {",
          "new_line_content": "         * second key specified would override the first key. This behavior is kept",
          "content_same": false
        },
        {
          "line": 868,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(o)",
          "new_text": null,
          "old_line_content": "    incrRefCount(o);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 869,
          "old_api": "getExpire",
          "new_api": null,
          "old_text": "getExpire(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    expire = getExpire(c->db,c->argv[1]);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 870,
          "old_api": "lookupKeyWrite",
          "new_api": null,
          "old_text": "lookupKeyWrite(c->db,c->argv[2])",
          "new_text": null,
          "old_line_content": "    if (lookupKeyWrite(c->db,c->argv[2]) != NULL) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1389,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(int) * num)",
          "new_text": null,
          "old_line_content": "    keys = zmalloc(sizeof(int) * num);",
          "new_line_content": "     * argv[1] = key,",
          "content_same": false
        },
        {
          "line": 878,
          "old_api": "dbDelete",
          "new_api": null,
          "old_text": "dbDelete(c->db,c->argv[2])",
          "new_text": null,
          "old_line_content": "        dbDelete(c->db,c->argv[2]);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 880,
          "old_api": "dbAdd",
          "new_api": null,
          "old_text": "dbAdd(c->db,c->argv[2],o)",
          "new_text": null,
          "old_line_content": "    dbAdd(c->db,c->argv[2],o);",
          "new_line_content": "         * with the same name. */",
          "content_same": false
        },
        {
          "line": 882,
          "old_api": "dbDelete",
          "new_api": null,
          "old_text": "dbDelete(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    dbDelete(c->db,c->argv[1]);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 378,
          "old_api": "touchWatchedKey",
          "new_api": null,
          "old_text": "touchWatchedKey(db,key)",
          "new_text": null,
          "old_line_content": "    touchWatchedKey(db,key);",
          "new_line_content": " *----------------------------------------------------------------------------*/",
          "content_same": false
        },
        {
          "line": 1404,
          "old_api": "UNUSED",
          "new_api": null,
          "old_text": "UNUSED(cmd)",
          "new_text": null,
          "old_line_content": "    UNUSED(cmd);",
          "new_line_content": " *       STREAMS key_1 key_2 ... key_N ID_1 ID_2 ... ID_N */",
          "content_same": false
        },
        {
          "line": 382,
          "old_api": "touchWatchedKeysOnFlush",
          "new_api": null,
          "old_text": "touchWatchedKeysOnFlush(dbid)",
          "new_text": null,
          "old_line_content": "    touchWatchedKeysOnFlush(dbid);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 894,
          "old_api": "renameGenericCommand",
          "new_api": null,
          "old_text": "renameGenericCommand(c,0)",
          "new_text": null,
          "old_line_content": "    renameGenericCommand(c,0);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 898,
          "old_api": "renameGenericCommand",
          "new_api": null,
          "old_text": "renameGenericCommand(c,1)",
          "new_text": null,
          "old_line_content": "    renameGenericCommand(c,1);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1413,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(arg, \"block\")",
          "new_text": null,
          "old_line_content": "        if (!strcasecmp(arg, \"block\")) {",
          "new_line_content": "    int streams_pos = -1;",
          "content_same": false
        },
        {
          "line": 1415,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(arg, \"count\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcasecmp(arg, \"count\")) {",
          "new_line_content": "        char *arg = argv[i]->ptr;",
          "content_same": false
        },
        {
          "line": 1417,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(arg, \"group\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcasecmp(arg, \"group\")) {",
          "new_line_content": "            i++; /* Skip option argument. */",
          "content_same": false
        },
        {
          "line": 1419,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(arg, \"noack\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcasecmp(arg, \"noack\")) {",
          "new_line_content": "            i++; /* Skip option argument. */",
          "content_same": false
        },
        {
          "line": 908,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\"MOVE is not allowed in cluster mode\")",
          "new_text": null,
          "old_line_content": "        addReplyError(c,\"MOVE is not allowed in cluster mode\");",
          "new_line_content": "    long long dbid, expire;",
          "content_same": false
        },
        {
          "line": 1421,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(arg, \"streams\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcasecmp(arg, \"streams\")) {",
          "new_line_content": "            i += 2; /* Skip option argument. */",
          "content_same": false
        },
        {
          "line": 400,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[1]->ptr,\"async\")",
          "new_text": null,
          "old_line_content": "        if (c->argc > 2 || strcasecmp(c->argv[1]->ptr,\"async\")) {",
          "new_line_content": "int getFlushCommandFlags(client *c, int *flags) {",
          "content_same": false
        },
        {
          "line": 401,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.syntaxerr)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.syntaxerr);",
          "new_line_content": "    /* Parse the optional ASYNC option. */",
          "content_same": false
        },
        {
          "line": 916,
          "old_api": "getLongLongFromObject",
          "new_api": null,
          "old_text": "getLongLongFromObject(c->argv[2],&dbid)",
          "new_text": null,
          "old_line_content": "    if (getLongLongFromObject(c->argv[2],&dbid) == C_ERR ||",
          "new_line_content": "    src = c->db;",
          "content_same": false
        },
        {
          "line": 918,
          "old_api": "selectDb",
          "new_api": null,
          "old_text": "selectDb(c,dbid)",
          "new_text": null,
          "old_line_content": "        selectDb(c,dbid) == C_ERR)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 920,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.outofrangeerr)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.outofrangeerr);",
          "new_line_content": "        dbid < INT_MIN || dbid > INT_MAX ||",
          "content_same": false
        },
        {
          "line": 924,
          "old_api": "selectDb",
          "new_api": null,
          "old_text": "selectDb(c,srcid)",
          "new_text": null,
          "old_line_content": "    selectDb(c,srcid); /* Back to the source DB */",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 1438,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(int) * num)",
          "new_text": null,
          "old_line_content": "    keys = zmalloc(sizeof(int) * num);",
          "new_line_content": "    num /= 2; /* We have half the keys as there are arguments because",
          "content_same": false
        },
        {
          "line": 417,
          "old_api": "getFlushCommandFlags",
          "new_api": null,
          "old_text": "getFlushCommandFlags(c,&flags)",
          "new_text": null,
          "old_line_content": "    if (getFlushCommandFlags(c,&flags) == C_ERR) return;",
          "new_line_content": "void flushdbCommand(client *c) {",
          "content_same": false
        },
        {
          "line": 418,
          "old_api": "signalFlushedDb",
          "new_api": null,
          "old_text": "signalFlushedDb(c->db->id)",
          "new_text": null,
          "old_line_content": "    signalFlushedDb(c->db->id);",
          "new_line_content": "    int flags;",
          "content_same": false
        },
        {
          "line": 419,
          "old_api": "emptyDb",
          "new_api": null,
          "old_text": "emptyDb(c->db->id,flags,NULL)",
          "new_text": null,
          "old_line_content": "    server.dirty += emptyDb(c->db->id,flags,NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 929,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.sameobjecterr)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.sameobjecterr);",
          "new_line_content": "    /* If the user is moving using as target the same",
          "content_same": false
        },
        {
          "line": 934,
          "old_api": "lookupKeyWrite",
          "new_api": null,
          "old_text": "lookupKeyWrite(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    o = lookupKeyWrite(c->db,c->argv[1]);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 936,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.czero)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.czero);",
          "new_line_content": "    /* Check if the element exists and get a reference */",
          "content_same": false
        },
        {
          "line": 1449,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(key->ptr)",
          "new_text": null,
          "old_line_content": "    unsigned int hashslot = keyHashSlot(key->ptr,sdslen(key->ptr));",
          "new_line_content": " * while rehashing the cluster and in other conditions when we need to",
          "content_same": false
        },
        {
          "line": 429,
          "old_api": "getFlushCommandFlags",
          "new_api": null,
          "old_text": "getFlushCommandFlags(c,&flags)",
          "new_text": null,
          "old_line_content": "    if (getFlushCommandFlags(c,&flags) == C_ERR) return;",
          "new_line_content": "void flushallCommand(client *c) {",
          "content_same": false
        },
        {
          "line": 430,
          "old_api": "signalFlushedDb",
          "new_api": null,
          "old_text": "signalFlushedDb(-1)",
          "new_text": null,
          "old_line_content": "    signalFlushedDb(-1);",
          "new_line_content": "    int flags;",
          "content_same": false
        },
        {
          "line": 431,
          "old_api": "emptyDb",
          "new_api": null,
          "old_text": "emptyDb(-1,flags,NULL)",
          "new_text": null,
          "old_line_content": "    server.dirty += emptyDb(-1,flags,NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 943,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.czero)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.czero);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 947,
          "old_api": "setExpire",
          "new_api": null,
          "old_text": "setExpire(c,dst,c->argv[1],expire)",
          "new_text": null,
          "old_line_content": "    if (expire != -1) setExpire(c,dst,c->argv[1],expire);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 948,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(o)",
          "new_text": null,
          "old_line_content": "    incrRefCount(o);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1460,
          "old_api": "raxInsert",
          "new_api": null,
          "old_text": "raxInsert(server.cluster->slots_to_keys,indexed,keylen+2,NULL,NULL)",
          "new_text": null,
          "old_line_content": "        raxInsert(server.cluster->slots_to_keys,indexed,keylen+2,NULL,NULL);",
          "new_line_content": "    indexed[1] = hashslot & 0xff;",
          "content_same": false
        },
        {
          "line": 1462,
          "old_api": "raxRemove",
          "new_api": null,
          "old_text": "raxRemove(server.cluster->slots_to_keys,indexed,keylen+2,NULL)",
          "new_text": null,
          "old_line_content": "        raxRemove(server.cluster->slots_to_keys,indexed,keylen+2,NULL);",
          "new_line_content": "    if (add) {",
          "content_same": false
        },
        {
          "line": 1464,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(indexed)",
          "new_text": null,
          "old_line_content": "    if (indexed != buf) zfree(indexed);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 953,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.cone)",
          "new_text": null,
          "old_line_content": "    addReply(c,shared.cone);",
          "new_line_content": "    /* OK! key moved, free the entry in the source DB */",
          "content_same": false
        },
        {
          "line": 442,
          "old_api": "rdbPopulateSaveInfo",
          "new_api": null,
          "old_text": "rdbPopulateSaveInfo(&rsi)",
          "new_text": null,
          "old_line_content": "        rsiptr = rdbPopulateSaveInfo(&rsi);",
          "new_line_content": "         * as otherwise FLUSHALL will not be replicated nor put into the AOF. */",
          "content_same": false
        },
        {
          "line": 443,
          "old_api": "rdbSave",
          "new_api": null,
          "old_text": "rdbSave(server.rdb_filename,rsiptr)",
          "new_text": null,
          "old_line_content": "        rdbSave(server.rdb_filename,rsiptr);",
          "new_line_content": "        int saved_dirty = server.dirty;",
          "content_same": false
        },
        {
          "line": 1468,
          "old_api": "slotToKeyUpdateKey",
          "new_api": null,
          "old_text": "slotToKeyUpdateKey(key,1)",
          "new_text": null,
          "old_line_content": "    slotToKeyUpdateKey(key,1);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1472,
          "old_api": "slotToKeyUpdateKey",
          "new_api": null,
          "old_text": "slotToKeyUpdateKey(key,0)",
          "new_text": null,
          "old_line_content": "    slotToKeyUpdateKey(key,0);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 962,
          "old_api": "dictGetSafeIterator",
          "new_api": null,
          "old_text": "dictGetSafeIterator(db->blocking_keys)",
          "new_text": null,
          "old_line_content": "    dictIterator *di = dictGetSafeIterator(db->blocking_keys);",
          "new_line_content": " * where the function is used for more info. */",
          "content_same": false
        },
        {
          "line": 963,
          "old_api": "dictNext",
          "new_api": null,
          "old_text": "dictNext(di)",
          "new_text": null,
          "old_line_content": "    while((de = dictNext(di)) != NULL) {",
          "new_line_content": "void scanDatabaseForReadyLists(redisDb *db) {",
          "content_same": false
        },
        {
          "line": 964,
          "old_api": "dictGetKey",
          "new_api": null,
          "old_text": "dictGetKey(de)",
          "new_text": null,
          "old_line_content": "        robj *key = dictGetKey(de);",
          "new_line_content": "    dictEntry *de;",
          "content_same": false
        },
        {
          "line": 1476,
          "old_api": "raxFree",
          "new_api": null,
          "old_text": "raxFree(server.cluster->slots_to_keys)",
          "new_text": null,
          "old_line_content": "    raxFree(server.cluster->slots_to_keys);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 454,
          "old_api": "expireIfNeeded",
          "new_api": null,
          "old_text": "expireIfNeeded(c->db,c->argv[j])",
          "new_text": null,
          "old_line_content": "        expireIfNeeded(c->db,c->argv[j]);",
          "new_line_content": "    int numdel = 0, j;",
          "content_same": false
        },
        {
          "line": 455,
          "old_api": "dbAsyncDelete",
          "new_api": null,
          "old_text": "dbAsyncDelete(c->db,c->argv[j])",
          "new_text": null,
          "old_line_content": "        int deleted  = lazy ? dbAsyncDelete(c->db,c->argv[j]) :",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 456,
          "old_api": "dbSyncDelete",
          "new_api": null,
          "old_text": "dbSyncDelete(c->db,c->argv[j])",
          "new_text": null,
          "old_line_content": "                              dbSyncDelete(c->db,c->argv[j]);",
          "new_line_content": "    for (j = 1; j < c->argc; j++) {",
          "content_same": false
        },
        {
          "line": 969,
          "old_api": "signalKeyAsReady",
          "new_api": null,
          "old_text": "signalKeyAsReady(db, key)",
          "new_text": null,
          "old_line_content": "            signalKeyAsReady(db, key);",
          "new_line_content": "        if (value && (value->type == OBJ_LIST ||",
          "content_same": false
        },
        {
          "line": 1477,
          "old_api": "raxNew",
          "new_api": null,
          "old_text": "raxNew()",
          "new_text": null,
          "old_line_content": "    server.cluster->slots_to_keys = raxNew();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 971,
          "old_api": "dictReleaseIterator",
          "new_api": null,
          "old_text": "dictReleaseIterator(di)",
          "new_text": null,
          "old_line_content": "    dictReleaseIterator(di);",
          "new_line_content": "                      value->type == OBJ_ZSET))",
          "content_same": false
        },
        {
          "line": 1478,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(server.cluster->slots_keys_count,0,\n           sizeof(server.cluster->slots_keys_count))",
          "new_text": null,
          "old_line_content": "    memset(server.cluster->slots_keys_count,0,",
          "new_line_content": "void slotToKeyFlush(void) {",
          "content_same": false
        },
        {
          "line": 465,
          "old_api": "addReplyLongLong",
          "new_api": null,
          "old_text": "addReplyLongLong(c,numdel)",
          "new_text": null,
          "old_line_content": "    addReplyLongLong(c,numdel);",
          "new_line_content": "            numdel++;",
          "content_same": false
        },
        {
          "line": 1492,
          "old_api": "raxStart",
          "new_api": null,
          "old_text": "raxStart(&iter,server.cluster->slots_to_keys)",
          "new_text": null,
          "old_line_content": "    raxStart(&iter,server.cluster->slots_to_keys);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 469,
          "old_api": "delGenericCommand",
          "new_api": null,
          "old_text": "delGenericCommand(c,0)",
          "new_text": null,
          "old_line_content": "    delGenericCommand(c,0);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1493,
          "old_api": "raxSeek",
          "new_api": null,
          "old_text": "raxSeek(&iter,\">=\",indexed,2)",
          "new_text": null,
          "old_line_content": "    raxSeek(&iter,\">=\",indexed,2);",
          "new_line_content": "    indexed[0] = (hashslot >> 8) & 0xff;",
          "content_same": false
        },
        {
          "line": 1494,
          "old_api": "raxNext",
          "new_api": null,
          "old_text": "raxNext(&iter)",
          "new_text": null,
          "old_line_content": "    while(count-- && raxNext(&iter)) {",
          "new_line_content": "    indexed[1] = hashslot & 0xff;",
          "content_same": false
        },
        {
          "line": 473,
          "old_api": "delGenericCommand",
          "new_api": null,
          "old_text": "delGenericCommand(c,1)",
          "new_text": null,
          "old_line_content": "    delGenericCommand(c,1);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1498,
          "old_api": "raxStop",
          "new_api": null,
          "old_text": "raxStop(&iter)",
          "new_text": null,
          "old_line_content": "    raxStop(&iter);",
          "new_line_content": "        if (iter.key[0] != indexed[0] || iter.key[1] != indexed[1]) break;",
          "content_same": false
        },
        {
          "line": 483,
          "old_api": "lookupKeyRead",
          "new_api": null,
          "old_text": "lookupKeyRead(c->db,c->argv[j])",
          "new_text": null,
          "old_line_content": "        if (lookupKeyRead(c->db,c->argv[j])) count++;",
          "new_line_content": "    int j;",
          "content_same": false
        },
        {
          "line": 485,
          "old_api": "addReplyLongLong",
          "new_api": null,
          "old_text": "addReplyLongLong(c,count)",
          "new_text": null,
          "old_line_content": "    addReplyLongLong(c,count);",
          "new_line_content": "    for (j = 1; j < c->argc; j++) {",
          "content_same": false
        },
        {
          "line": 1511,
          "old_api": "raxStart",
          "new_api": null,
          "old_text": "raxStart(&iter,server.cluster->slots_to_keys)",
          "new_text": null,
          "old_line_content": "    raxStart(&iter,server.cluster->slots_to_keys);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1513,
          "old_api": "raxSeek",
          "new_api": null,
          "old_text": "raxSeek(&iter,\">=\",indexed,2)",
          "new_text": null,
          "old_line_content": "        raxSeek(&iter,\">=\",indexed,2);",
          "new_line_content": "    indexed[1] = hashslot & 0xff;",
          "content_same": false
        },
        {
          "line": 491,
          "old_api": "getLongFromObjectOrReply",
          "new_api": null,
          "old_text": "getLongFromObjectOrReply(c, c->argv[1], &id,\n        \"invalid DB index\")",
          "new_text": null,
          "old_line_content": "    if (getLongFromObjectOrReply(c, c->argv[1], &id,",
          "new_line_content": "void selectCommand(client *c) {",
          "content_same": false
        },
        {
          "line": 1518,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(key)",
          "new_text": null,
          "old_line_content": "        decrRefCount(key);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 496,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\"SELECT is not allowed in cluster mode\")",
          "new_text": null,
          "old_line_content": "        addReplyError(c,\"SELECT is not allowed in cluster mode\");",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 1009,
          "old_api": "scanDatabaseForReadyLists",
          "new_api": null,
          "old_text": "scanDatabaseForReadyLists(db1)",
          "new_text": null,
          "old_line_content": "    scanDatabaseForReadyLists(db1);",
          "new_line_content": "     * in dbAdd() when a list is created. So here we need to rescan",
          "content_same": false
        },
        {
          "line": 1010,
          "old_api": "scanDatabaseForReadyLists",
          "new_api": null,
          "old_text": "scanDatabaseForReadyLists(db2)",
          "new_text": null,
          "old_line_content": "    scanDatabaseForReadyLists(db2);",
          "new_line_content": "     * the list of clients blocked on lists and signal lists as ready",
          "content_same": false
        },
        {
          "line": 500,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\"DB index is out of range\")",
          "new_text": null,
          "old_line_content": "        addReplyError(c,\"DB index is out of range\");",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 1020,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\"SWAPDB is not allowed in cluster mode\")",
          "new_text": null,
          "old_line_content": "        addReplyError(c,\"SWAPDB is not allowed in cluster mode\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 509,
          "old_api": "dbRandomKey",
          "new_api": null,
          "old_text": "dbRandomKey(c->db)",
          "new_text": null,
          "old_line_content": "    if ((key = dbRandomKey(c->db)) == NULL) {",
          "new_line_content": "void randomkeyCommand(client *c) {",
          "content_same": false
        },
        {
          "line": 510,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.nullbulk)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.nullbulk);",
          "new_line_content": "    robj *key;",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 62,
      "total_additions": 188,
      "total_deletions": 188,
      "total_api_changes": 438
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 7,
        "api_related_lines": 438,
        "non_api_lines": 4,
        "non_api_line_numbers": [
          336,
          348,
          343,
          335
        ]
      }
    },
    "api_calls_before": 328,
    "api_calls_after": 328,
    "diff_info": {
      "added_lines": 6,
      "removed_lines": 3,
      "total_diff_lines": 46
    }
  }
}
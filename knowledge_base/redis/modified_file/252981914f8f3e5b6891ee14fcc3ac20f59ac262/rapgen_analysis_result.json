{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/252981914f8f3e5b6891ee14fcc3ac20f59ac262",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/252981914f8f3e5b6891ee14fcc3ac20f59ac262/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/252981914f8f3e5b6891ee14fcc3ac20f59ac262/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/252981914f8f3e5b6891ee14fcc3ac20f59ac262/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 1845,
          "old_api": "rewriteClientCommandArgument",
          "new_api": "createObjectFromStreamID",
          "old_text": "rewriteClientCommandArgument(c,idpos,idarg)",
          "new_text": "createObjectFromStreamID(&id)",
          "old_line_content": "    rewriteClientCommandArgument(c,idpos,idarg);",
          "new_line_content": "        robj *idarg = createObjectFromStreamID(&id);",
          "content_same": false
        },
        {
          "line": 1846,
          "old_api": "decrRefCount",
          "new_api": "rewriteClientCommandArgument",
          "old_text": "decrRefCount(idarg)",
          "new_text": "rewriteClientCommandArgument(c, idpos, idarg)",
          "old_line_content": "    decrRefCount(idarg);",
          "new_line_content": "        rewriteClientCommandArgument(c, idpos, idarg);",
          "content_same": false
        },
        {
          "line": 1872,
          "old_api": "streamIncrID",
          "new_api": "streamParseIntervalIDOrReply",
          "old_text": "streamIncrID(&startid)",
          "new_text": "streamParseIntervalIDOrReply(c,startarg,&startid,&startex,0)",
          "old_line_content": "    if (startex && streamIncrID(&startid) != C_OK) {",
          "new_line_content": "    if (streamParseIntervalIDOrReply(c,startarg,&startid,&startex,0) != C_OK)",
          "content_same": false
        },
        {
          "line": 1878,
          "old_api": "streamDecrID",
          "new_api": "streamParseIntervalIDOrReply",
          "old_text": "streamDecrID(&endid)",
          "new_text": "streamParseIntervalIDOrReply(c,endarg,&endid,&endex,UINT64_MAX)",
          "old_line_content": "    if (endex && streamDecrID(&endid) != C_OK) {",
          "new_line_content": "    if (streamParseIntervalIDOrReply(c,endarg,&endid,&endex,UINT64_MAX) != C_OK)",
          "content_same": false
        },
        {
          "line": 1929,
          "old_api": "addReplyLongLong",
          "new_api": "checkType",
          "old_text": "addReplyLongLong(c,s->length)",
          "new_text": "checkType(c,o,OBJ_STREAM)",
          "old_line_content": "    addReplyLongLong(c,s->length);",
          "new_line_content": "        || checkType(c,o,OBJ_STREAM)) return;",
          "content_same": false
        },
        {
          "line": 1969,
          "old_api": "strcasecmp",
          "new_api": "getTimeoutFromObjectOrReply",
          "old_text": "strcasecmp(o,\"COUNT\")",
          "new_text": "getTimeoutFromObjectOrReply(c,c->argv[i],&timeout,\n                UNIT_MILLISECONDS)",
          "old_line_content": "        } else if (!strcasecmp(o,\"COUNT\") && moreargs) {",
          "new_line_content": "            if (getTimeoutFromObjectOrReply(c,c->argv[i],&timeout,",
          "content_same": false
        },
        {
          "line": 1971,
          "old_api": "getLongLongFromObjectOrReply",
          "new_api": "strcasecmp",
          "old_text": "getLongLongFromObjectOrReply(c,c->argv[i],&count,NULL)",
          "new_text": "strcasecmp(o,\"COUNT\")",
          "old_line_content": "            if (getLongLongFromObjectOrReply(c,c->argv[i],&count,NULL) != C_OK)",
          "new_line_content": "        } else if (!strcasecmp(o,\"COUNT\") && moreargs) {",
          "content_same": false
        },
        {
          "line": 1987,
          "old_api": "addReplyError",
          "new_api": "strcasecmp",
          "old_text": "addReplyError(c,\"The GROUP option is only supported by \"\n                                \"XREADGROUP. You called XREAD instead.\")",
          "new_text": "strcasecmp(o,\"GROUP\")",
          "old_line_content": "                addReplyError(c,\"The GROUP option is only supported by \"",
          "new_line_content": "        } else if (!strcasecmp(o,\"GROUP\") && moreargs >= 2) {",
          "content_same": false
        },
        {
          "line": 1996,
          "old_api": "addReplyError",
          "new_api": "strcasecmp",
          "old_text": "addReplyError(c,\"The NOACK option is only supported by \"\n                                \"XREADGROUP. You called XREAD instead.\")",
          "new_text": "strcasecmp(o,\"NOACK\")",
          "old_line_content": "                addReplyError(c,\"The NOACK option is only supported by \"",
          "new_line_content": "        } else if (!strcasecmp(o,\"NOACK\")) {",
          "content_same": false
        },
        {
          "line": 2041,
          "old_api": "addReplyErrorFormat",
          "new_api": "streamLookupCG",
          "old_text": "addReplyErrorFormat(c, \"-NOGROUP No such key '%s' or consumer \"\n                                       \"group '%s' in XREADGROUP with GROUP \"\n                                       \"option\",\n                                    (char*)key->ptr,(char*)groupname->ptr)",
          "new_text": "streamLookupCG(o->ptr,groupname->ptr)",
          "old_line_content": "                addReplyErrorFormat(c, \"-NOGROUP No such key '%s' or consumer \"",
          "new_line_content": "                (group = streamLookupCG(o->ptr,groupname->ptr)) == NULL)",
          "content_same": false
        },
        {
          "line": 2052,
          "old_api": "addReplyError",
          "new_api": "strcmp",
          "old_text": "addReplyError(c,\"The $ ID is meaningless in the context of \"\n                                \"XREADGROUP: you want to read the history of \"\n                                \"this consumer by specifying a proper ID, or \"\n                                \"use the > ID to get new messages. The $ ID would \"\n                                \"just return an empty result set.\")",
          "new_text": "strcmp(c->argv[i]->ptr,\"$\")",
          "old_line_content": "                addReplyError(c,\"The $ ID is meaningless in the context of \"",
          "new_line_content": "        if (strcmp(c->argv[i]->ptr,\"$\") == 0) {",
          "content_same": false
        },
        {
          "line": 2069,
          "old_api": "addReplyError",
          "new_api": "strcmp",
          "old_text": "addReplyError(c,\"The > ID can be specified only when calling \"\n                                \"XREADGROUP using the GROUP <group> \"\n                                \"<consumer> option.\")",
          "new_text": "strcmp(c->argv[i]->ptr,\">\")",
          "old_line_content": "                addReplyError(c,\"The > ID can be specified only when calling \"",
          "new_line_content": "        } else if (strcmp(c->argv[i]->ptr,\">\") == 0) {",
          "content_same": false
        },
        {
          "line": 2146,
          "old_api": "streamCreateConsumer",
          "new_api": "streamLookupConsumer",
          "old_text": "streamCreateConsumer(groups[i],consumername->ptr,\n                                                    c->argv[streams_arg+i],\n                                                    c->db->id,SCC_DEFAULT)",
          "new_text": "streamLookupConsumer(groups[i],consumername->ptr,SLC_DEFAULT)",
          "old_line_content": "                    consumer = streamCreateConsumer(groups[i],consumername->ptr,",
          "new_line_content": "                consumer = streamLookupConsumer(groups[i],consumername->ptr,SLC_DEFAULT);",
          "content_same": false
        },
        {
          "line": 2170,
          "old_api": "setDeferredMapLen",
          "new_api": "setDeferredArrayLen",
          "old_text": "setDeferredMapLen(c,arraylen_ptr,arraylen)",
          "new_text": "setDeferredArrayLen(c,arraylen_ptr,arraylen)",
          "old_line_content": "            setDeferredMapLen(c,arraylen_ptr,arraylen);",
          "new_line_content": "            setDeferredArrayLen(c,arraylen_ptr,arraylen);",
          "content_same": false
        },
        {
          "line": 2217,
          "old_api": "zfree",
          "new_api": "preventCommandPropagation",
          "old_text": "zfree(groups)",
          "new_text": "preventCommandPropagation(c)",
          "old_line_content": "    zfree(groups);",
          "new_line_content": "    preventCommandPropagation(c);",
          "content_same": false
        },
        {
          "line": 2248,
          "old_api": "sdsfree",
          "new_api": "raxFree",
          "old_text": "sdsfree(sc->name)",
          "new_text": "raxFree(sc->pel)",
          "old_line_content": "    sdsfree(sc->name);",
          "new_line_content": "    raxFree(sc->pel); /* No value free callback: the PEL entries are shared",
          "content_same": false
        },
        {
          "line": 2263,
          "old_api": "raxNew",
          "new_api": "zmalloc",
          "old_text": "raxNew()",
          "new_text": "zmalloc(sizeof(*cg))",
          "old_line_content": "    cg->consumers = raxNew();",
          "new_line_content": "    streamCG *cg = zmalloc(sizeof(*cg));",
          "content_same": false
        },
        {
          "line": 2265,
          "old_api": "raxInsert",
          "new_api": "raxNew",
          "old_text": "raxInsert(s->cgroups,(unsigned char*)name,namelen,cg,NULL)",
          "new_text": "raxNew()",
          "old_line_content": "    raxInsert(s->cgroups,(unsigned char*)name,namelen,cg,NULL);",
          "new_line_content": "    cg->consumers = raxNew();",
          "content_same": false
        },
        {
          "line": 2273,
          "old_api": "zfree",
          "new_api": "raxFreeWithCallback",
          "old_text": "zfree(cg)",
          "new_text": "raxFreeWithCallback(cg->pel,(void(*)(void*))streamFreeNACK)",
          "old_line_content": "    zfree(cg);",
          "new_line_content": "    raxFreeWithCallback(cg->pel,(void(*)(void*))streamFreeNACK);",
          "content_same": false
        },
        {
          "line": 2295,
          "old_api": "sdslen",
          "new_api": "zmalloc",
          "old_text": "sdslen(name)",
          "new_text": "zmalloc(sizeof(*consumer))",
          "old_line_content": "                               sdslen(name),consumer,NULL);",
          "new_line_content": "    streamConsumer *consumer = zmalloc(sizeof(*consumer));",
          "content_same": false
        },
        {
          "line": 2297,
          "old_api": "zfree",
          "new_api": "sdslen",
          "old_text": "zfree(consumer)",
          "new_text": "sdslen(name)",
          "old_line_content": "        zfree(consumer);",
          "new_line_content": "                               sdslen(name),consumer,NULL);",
          "content_same": false
        },
        {
          "line": 2302,
          "old_api": "mstime",
          "new_api": "sdsdup",
          "old_text": "mstime()",
          "new_text": "sdsdup(name)",
          "old_line_content": "    consumer->seen_time = mstime();",
          "new_line_content": "    consumer->name = sdsdup(name);",
          "content_same": false
        },
        {
          "line": 2304,
          "old_api": "notifyKeyspaceEvent",
          "new_api": "mstime",
          "old_text": "notifyKeyspaceEvent(NOTIFY_STREAM,\"xgroup-createconsumer\",key,dbid)",
          "new_text": "mstime()",
          "old_line_content": "    if (notify) notifyKeyspaceEvent(NOTIFY_STREAM,\"xgroup-createconsumer\",key,dbid);",
          "new_line_content": "    consumer->seen_time = mstime();",
          "content_same": false
        },
        {
          "line": 2316,
          "old_api": "mstime",
          "new_api": "sdslen",
          "old_text": "mstime()",
          "new_text": "sdslen(name)",
          "old_line_content": "    if (refresh) consumer->seen_time = mstime();",
          "new_line_content": "                                       sdslen(name));",
          "content_same": false
        },
        {
          "line": 2327,
          "old_api": "raxNext",
          "new_api": "raxStart",
          "old_text": "raxNext(&ri)",
          "new_text": "raxStart(&ri,consumer->pel)",
          "old_line_content": "    while(raxNext(&ri)) {",
          "new_line_content": "    raxStart(&ri,consumer->pel);",
          "content_same": false
        },
        {
          "line": 2329,
          "old_api": "raxRemove",
          "new_api": "raxNext",
          "old_text": "raxRemove(cg->pel,ri.key,ri.key_len,NULL)",
          "new_text": "raxNext(&ri)",
          "old_line_content": "        raxRemove(cg->pel,ri.key,ri.key_len,NULL);",
          "new_line_content": "    while(raxNext(&ri)) {",
          "content_same": false
        },
        {
          "line": 2332,
          "old_api": "raxStop",
          "new_api": "streamFreeNACK",
          "old_text": "raxStop(&ri)",
          "new_text": "streamFreeNACK(nack)",
          "old_line_content": "    raxStop(&ri);",
          "new_line_content": "        streamFreeNACK(nack);",
          "content_same": false
        },
        {
          "line": 2337,
          "old_api": "streamFreeConsumer",
          "new_api": "raxRemove",
          "old_text": "streamFreeConsumer(consumer)",
          "new_text": "raxRemove(cg->consumers,(unsigned char*)consumer->name,\n              sdslen(consumer->name),NULL)",
          "old_line_content": "    streamFreeConsumer(consumer);",
          "new_line_content": "    raxRemove(cg->consumers,(unsigned char*)consumer->name,",
          "content_same": false
        },
        {
          "line": 2361,
          "old_api": "addReplySubcommandSyntaxError",
          "new_api": "strcasecmp",
          "old_text": "addReplySubcommandSyntaxError(c)",
          "new_text": "strcasecmp(opt,\"CREATE\")",
          "old_line_content": "            addReplySubcommandSyntaxError(c);",
          "new_line_content": "    if (c->argc == 6 && !strcasecmp(opt,\"CREATE\")) {",
          "content_same": false
        },
        {
          "line": 2372,
          "old_api": "checkType",
          "new_api": "lookupKeyWrite",
          "old_text": "checkType(c,o,OBJ_STREAM)",
          "new_text": "lookupKeyWrite(c->db,c->argv[2])",
          "old_line_content": "            if (checkType(c,o,OBJ_STREAM)) return;",
          "new_line_content": "        o = lookupKeyWrite(c->db,c->argv[2]);",
          "content_same": false
        },
        {
          "line": 2392,
          "old_api": "strcasecmp",
          "new_api": "streamLookupCG",
          "old_text": "strcasecmp(opt,\"CREATECONSUMER\")",
          "new_text": "streamLookupCG(s,grpname)",
          "old_line_content": "             !strcasecmp(opt,\"CREATECONSUMER\") ||",
          "new_line_content": "        if ((cg = streamLookupCG(s,grpname)) == NULL &&",
          "content_same": false
        },
        {
          "line": 2395,
          "old_api": "addReplyErrorFormat",
          "new_api": "strcasecmp",
          "old_text": "addReplyErrorFormat(c, \"-NOGROUP No such consumer group '%s' \"\n                                   \"for key name '%s'\",\n                                   (char*)grpname, (char*)c->argv[2]->ptr)",
          "new_text": "strcasecmp(opt,\"DELCONSUMER\")",
          "old_line_content": "            addReplyErrorFormat(c, \"-NOGROUP No such consumer group '%s' \"",
          "new_line_content": "             !strcasecmp(opt,\"DELCONSUMER\")))",
          "content_same": false
        },
        {
          "line": 2422,
          "old_api": "strcmp",
          "new_api": "strcasecmp",
          "old_text": "strcmp(c->argv[4]->ptr,\"$\")",
          "new_text": "strcasecmp(opt,\"CREATE\")",
          "old_line_content": "        if (!strcmp(c->argv[4]->ptr,\"$\")) {",
          "new_line_content": "    } else if (!strcasecmp(opt,\"CREATE\") && (c->argc == 5 || c->argc == 6)) {",
          "content_same": false
        },
        {
          "line": 2437,
          "old_api": "dbAdd",
          "new_api": "serverAssert",
          "old_text": "dbAdd(c->db,c->argv[2],o)",
          "new_text": "serverAssert(mkstream)",
          "old_line_content": "            dbAdd(c->db,c->argv[2],o);",
          "new_line_content": "            serverAssert(mkstream);",
          "content_same": false
        },
        {
          "line": 2439,
          "old_api": "signalModifiedKey",
          "new_api": "dbAdd",
          "old_text": "signalModifiedKey(c,c->db,c->argv[2])",
          "new_text": "dbAdd(c->db,c->argv[2],o)",
          "old_line_content": "            signalModifiedKey(c,c->db,c->argv[2]);",
          "new_line_content": "            dbAdd(c->db,c->argv[2],o);",
          "content_same": false
        },
        {
          "line": 2444,
          "old_api": "addReply",
          "new_api": "sdslen",
          "old_text": "addReply(c,shared.ok)",
          "new_text": "sdslen(grpname)",
          "old_line_content": "            addReply(c,shared.ok);",
          "new_line_content": "        streamCG *cg = streamCreateCG(s,grpname,sdslen(grpname),&id);",
          "content_same": false
        },
        {
          "line": 2446,
          "old_api": "notifyKeyspaceEvent",
          "new_api": "addReply",
          "old_text": "notifyKeyspaceEvent(NOTIFY_STREAM,\"xgroup-create\",\n                                c->argv[2],c->db->id)",
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "            notifyKeyspaceEvent(NOTIFY_STREAM,\"xgroup-create\",",
          "new_line_content": "            addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 2451,
          "old_api": "strcasecmp",
          "new_api": "addReplyError",
          "old_text": "strcasecmp(opt,\"SETID\")",
          "new_text": "addReplyError(c,\"-BUSYGROUP Consumer Group name already exists\")",
          "old_line_content": "    } else if (!strcasecmp(opt,\"SETID\") && c->argc == 5) {",
          "new_line_content": "            addReplyError(c,\"-BUSYGROUP Consumer Group name already exists\");",
          "content_same": false
        },
        {
          "line": 2453,
          "old_api": "strcmp",
          "new_api": "strcasecmp",
          "old_text": "strcmp(c->argv[4]->ptr,\"$\")",
          "new_text": "strcasecmp(opt,\"SETID\")",
          "old_line_content": "        if (!strcmp(c->argv[4]->ptr,\"$\")) {",
          "new_line_content": "    } else if (!strcasecmp(opt,\"SETID\") && c->argc == 5) {",
          "content_same": false
        },
        {
          "line": 2455,
          "old_api": "streamParseIDOrReply",
          "new_api": "strcmp",
          "old_text": "streamParseIDOrReply(c,c->argv[4],&id,0)",
          "new_text": "strcmp(c->argv[4]->ptr,\"$\")",
          "old_line_content": "        } else if (streamParseIDOrReply(c,c->argv[4],&id,0) != C_OK) {",
          "new_line_content": "        if (!strcmp(c->argv[4]->ptr,\"$\")) {",
          "content_same": false
        },
        {
          "line": 2461,
          "old_api": "notifyKeyspaceEvent",
          "new_api": "addReply",
          "old_text": "notifyKeyspaceEvent(NOTIFY_STREAM,\"xgroup-setid\",c->argv[2],c->db->id)",
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "        notifyKeyspaceEvent(NOTIFY_STREAM,\"xgroup-setid\",c->argv[2],c->db->id);",
          "new_line_content": "        addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 2464,
          "old_api": "sdslen",
          "new_api": "strcasecmp",
          "old_text": "sdslen(grpname)",
          "new_text": "strcasecmp(opt,\"DESTROY\")",
          "old_line_content": "            raxRemove(s->cgroups,(unsigned char*)grpname,sdslen(grpname),NULL);",
          "new_line_content": "    } else if (!strcasecmp(opt,\"DESTROY\") && c->argc == 4) {",
          "content_same": false
        },
        {
          "line": 2466,
          "old_api": "addReply",
          "new_api": "sdslen",
          "old_text": "addReply(c,shared.cone)",
          "new_text": "sdslen(grpname)",
          "old_line_content": "            addReply(c,shared.cone);",
          "new_line_content": "            raxRemove(s->cgroups,(unsigned char*)grpname,sdslen(grpname),NULL);",
          "content_same": false
        },
        {
          "line": 2468,
          "old_api": "notifyKeyspaceEvent",
          "new_api": "addReply",
          "old_text": "notifyKeyspaceEvent(NOTIFY_STREAM,\"xgroup-destroy\",\n                                c->argv[2],c->db->id)",
          "new_text": "addReply(c,shared.cone)",
          "old_line_content": "            notifyKeyspaceEvent(NOTIFY_STREAM,\"xgroup-destroy\",",
          "new_line_content": "            addReply(c,shared.cone);",
          "content_same": false
        },
        {
          "line": 2473,
          "old_api": "addReply",
          "new_api": "signalKeyAsReady",
          "old_text": "addReply(c,shared.czero)",
          "new_text": "signalKeyAsReady(c->db,c->argv[2],OBJ_STREAM)",
          "old_line_content": "            addReply(c,shared.czero);",
          "new_line_content": "            signalKeyAsReady(c->db,c->argv[2],OBJ_STREAM);",
          "content_same": false
        },
        {
          "line": 2475,
          "old_api": "strcasecmp",
          "new_api": "addReply",
          "old_text": "strcasecmp(opt,\"CREATECONSUMER\")",
          "new_text": "addReply(c,shared.czero)",
          "old_line_content": "    } else if (!strcasecmp(opt,\"CREATECONSUMER\") && c->argc == 5) {",
          "new_line_content": "            addReply(c,shared.czero);",
          "content_same": false
        },
        {
          "line": 2478,
          "old_api": "addReplyLongLong",
          "new_api": "streamCreateConsumer",
          "old_text": "addReplyLongLong(c,created ? 1 : 0)",
          "new_text": "streamCreateConsumer(cg,c->argv[4]->ptr,c->argv[2],\n                                                       c->db->id,SCC_DEFAULT)",
          "old_line_content": "        addReplyLongLong(c,created ? 1 : 0);",
          "new_line_content": "        streamConsumer *created = streamCreateConsumer(cg,c->argv[4]->ptr,c->argv[2],",
          "content_same": false
        },
        {
          "line": 2481,
          "old_api": "streamLookupConsumer",
          "new_api": "strcasecmp",
          "old_text": "streamLookupConsumer(cg,c->argv[4]->ptr,SLC_NO_REFRESH)",
          "new_text": "strcasecmp(opt,\"DELCONSUMER\")",
          "old_line_content": "        streamConsumer *consumer = streamLookupConsumer(cg,c->argv[4]->ptr,SLC_NO_REFRESH);",
          "new_line_content": "    } else if (!strcasecmp(opt,\"DELCONSUMER\") && c->argc == 5) {",
          "content_same": false
        },
        {
          "line": 2488,
          "old_api": "notifyKeyspaceEvent",
          "new_api": "streamDelConsumer",
          "old_text": "notifyKeyspaceEvent(NOTIFY_STREAM,\"xgroup-delconsumer\",\n                                c->argv[2],c->db->id)",
          "new_text": "streamDelConsumer(cg,consumer)",
          "old_line_content": "            notifyKeyspaceEvent(NOTIFY_STREAM,\"xgroup-delconsumer\",",
          "new_line_content": "            streamDelConsumer(cg,consumer);",
          "content_same": false
        },
        {
          "line": 2493,
          "old_api": "addReplySubcommandSyntaxError",
          "new_api": "addReplyLongLong",
          "old_text": "addReplySubcommandSyntaxError(c)",
          "new_text": "addReplyLongLong(c,pending)",
          "old_line_content": "        addReplySubcommandSyntaxError(c);",
          "new_line_content": "        addReplyLongLong(c,pending);",
          "content_same": false
        },
        {
          "line": 2515,
          "old_api": "streamCompareID",
          "new_api": "streamLastValidID",
          "old_text": "streamCompareID(&id,&maxid)",
          "new_text": "streamLastValidID(s,&maxid)",
          "old_line_content": "        if (streamCompareID(&id,&maxid) < 0) {",
          "new_line_content": "        streamLastValidID(s,&maxid);",
          "content_same": false
        },
        {
          "line": 2524,
          "old_api": "notifyKeyspaceEvent",
          "new_api": "addReply",
          "old_text": "notifyKeyspaceEvent(NOTIFY_STREAM,\"xsetid\",c->argv[1],c->db->id)",
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "    notifyKeyspaceEvent(NOTIFY_STREAM,\"xsetid\",c->argv[1],c->db->id);",
          "new_line_content": "    addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 2540,
          "old_api": "checkType",
          "new_api": "lookupKeyRead",
          "old_text": "checkType(c,o,OBJ_STREAM)",
          "new_text": "lookupKeyRead(c->db,c->argv[1])",
          "old_line_content": "        if (checkType(c,o,OBJ_STREAM)) return; /* Type error. */",
          "new_line_content": "    robj *o = lookupKeyRead(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 2560,
          "old_api": "streamParseStrictIDOrReply",
          "new_api": "zmalloc",
          "old_text": "streamParseStrictIDOrReply(c,c->argv[j],&ids[j-3],0)",
          "new_text": "zmalloc(sizeof(streamID)*id_count)",
          "old_line_content": "        if (streamParseStrictIDOrReply(c,c->argv[j],&ids[j-3],0) != C_OK) goto cleanup;",
          "new_line_content": "        ids = zmalloc(sizeof(streamID)*id_count);",
          "content_same": false
        },
        {
          "line": 2573,
          "old_api": "raxRemove",
          "new_api": "raxFind",
          "old_text": "raxRemove(group->pel,buf,sizeof(buf),NULL)",
          "new_text": "raxFind(group->pel,buf,sizeof(buf))",
          "old_line_content": "            raxRemove(group->pel,buf,sizeof(buf),NULL);",
          "new_line_content": "        streamNACK *nack = raxFind(group->pel,buf,sizeof(buf));",
          "content_same": false
        },
        {
          "line": 2575,
          "old_api": "streamFreeNACK",
          "new_api": "raxRemove",
          "old_text": "streamFreeNACK(nack)",
          "new_text": "raxRemove(group->pel,buf,sizeof(buf),NULL)",
          "old_line_content": "            streamFreeNACK(nack);",
          "new_line_content": "            raxRemove(group->pel,buf,sizeof(buf),NULL);",
          "content_same": false
        },
        {
          "line": 2582,
          "old_api": "zfree",
          "new_api": "addReplyLongLong",
          "old_text": "zfree(ids)",
          "new_text": "addReplyLongLong(c,acknowledged)",
          "old_line_content": "    if (ids != static_ids) zfree(ids);",
          "new_line_content": "    addReplyLongLong(c,acknowledged);",
          "content_same": false
        },
        {
          "line": 2636,
          "old_api": "streamIncrID",
          "new_api": "streamParseIntervalIDOrReply",
          "old_text": "streamIncrID(&startid)",
          "new_text": "streamParseIntervalIDOrReply(c,c->argv[startidx],&startid,&startex,0)",
          "old_line_content": "        if (startex && streamIncrID(&startid) != C_OK) {",
          "new_line_content": "        if (streamParseIntervalIDOrReply(c,c->argv[startidx],&startid,&startex,0) != C_OK)",
          "content_same": false
        },
        {
          "line": 2642,
          "old_api": "streamDecrID",
          "new_api": "streamParseIntervalIDOrReply",
          "old_text": "streamDecrID(&endid)",
          "new_text": "streamParseIntervalIDOrReply(c,c->argv[startidx+1],&endid,&endex,UINT64_MAX)",
          "old_line_content": "        if (endex && streamDecrID(&endid) != C_OK) {",
          "new_line_content": "        if (streamParseIntervalIDOrReply(c,c->argv[startidx+1],&endid,&endex,UINT64_MAX) != C_OK)",
          "content_same": false
        },
        {
          "line": 2659,
          "old_api": "streamLookupCG",
          "new_api": "checkType",
          "old_text": "streamLookupCG(o->ptr,groupname->ptr)",
          "new_text": "checkType(c,o,OBJ_STREAM)",
          "old_line_content": "        (group = streamLookupCG(o->ptr,groupname->ptr)) == NULL)",
          "new_line_content": "    if (checkType(c,o,OBJ_STREAM)) return;",
          "content_same": false
        },
        {
          "line": 2661,
          "old_api": "addReplyErrorFormat",
          "new_api": "streamLookupCG",
          "old_text": "addReplyErrorFormat(c, \"-NOGROUP No such key '%s' or consumer \"\n                               \"group '%s'\",\n                               (char*)key->ptr,(char*)groupname->ptr)",
          "new_text": "streamLookupCG(o->ptr,groupname->ptr)",
          "old_line_content": "        addReplyErrorFormat(c, \"-NOGROUP No such key '%s' or consumer \"",
          "new_line_content": "        (group = streamLookupCG(o->ptr,groupname->ptr)) == NULL)",
          "content_same": false
        },
        {
          "line": 2671,
          "old_api": "raxSize",
          "new_api": "addReplyArrayLen",
          "old_text": "raxSize(group->pel)",
          "new_text": "addReplyArrayLen(c,4)",
          "old_line_content": "        addReplyLongLong(c,raxSize(group->pel));",
          "new_line_content": "        addReplyArrayLen(c,4);",
          "content_same": false
        },
        {
          "line": 2675,
          "old_api": "addReplyNull",
          "new_api": "raxSize",
          "old_text": "addReplyNull(c)",
          "new_text": "raxSize(group->pel)",
          "old_line_content": "            addReplyNull(c); /* End. */",
          "new_line_content": "        if (raxSize(group->pel) == 0) {",
          "content_same": false
        },
        {
          "line": 2676,
          "old_api": "addReplyNullArray",
          "new_api": "addReplyNull",
          "old_text": "addReplyNullArray(c)",
          "new_text": "addReplyNull(c)",
          "old_line_content": "            addReplyNullArray(c); /* Clients. */",
          "new_line_content": "            addReplyNull(c); /* Start. */",
          "content_same": false
        },
        {
          "line": 2682,
          "old_api": "raxNext",
          "new_api": "raxStart",
          "old_text": "raxNext(&ri)",
          "new_text": "raxStart(&ri,group->pel)",
          "old_line_content": "            raxNext(&ri);",
          "new_line_content": "            raxStart(&ri,group->pel);",
          "content_same": false
        },
        {
          "line": 2683,
          "old_api": "streamDecodeID",
          "new_api": "raxSeek",
          "old_text": "streamDecodeID(ri.key,&startid)",
          "new_text": "raxSeek(&ri,\"^\",NULL,0)",
          "old_line_content": "            streamDecodeID(ri.key,&startid);",
          "new_line_content": "            raxSeek(&ri,\"^\",NULL,0);",
          "content_same": false
        },
        {
          "line": 2684,
          "old_api": "addReplyStreamID",
          "new_api": "raxNext",
          "old_text": "addReplyStreamID(c,&startid)",
          "new_text": "raxNext(&ri)",
          "old_line_content": "            addReplyStreamID(c,&startid);",
          "new_line_content": "            raxNext(&ri);",
          "content_same": false
        },
        {
          "line": 2689,
          "old_api": "streamDecodeID",
          "new_api": "raxSeek",
          "old_text": "streamDecodeID(ri.key,&endid)",
          "new_text": "raxSeek(&ri,\"$\",NULL,0)",
          "old_line_content": "            streamDecodeID(ri.key,&endid);",
          "new_line_content": "            raxSeek(&ri,\"$\",NULL,0);",
          "content_same": false
        },
        {
          "line": 2690,
          "old_api": "addReplyStreamID",
          "new_api": "raxNext",
          "old_text": "addReplyStreamID(c,&endid)",
          "new_text": "raxNext(&ri)",
          "old_line_content": "            addReplyStreamID(c,&endid);",
          "new_line_content": "            raxNext(&ri);",
          "content_same": false
        },
        {
          "line": 2691,
          "old_api": "raxStop",
          "new_api": "streamDecodeID",
          "old_text": "raxStop(&ri)",
          "new_text": "streamDecodeID(ri.key,&endid)",
          "old_line_content": "            raxStop(&ri);",
          "new_line_content": "            streamDecodeID(ri.key,&endid);",
          "content_same": false
        },
        {
          "line": 2696,
          "old_api": "addReplyDeferredLen",
          "new_api": "raxStart",
          "old_text": "addReplyDeferredLen(c)",
          "new_text": "raxStart(&ri,group->consumers)",
          "old_line_content": "            void *arraylen_ptr = addReplyDeferredLen(c);",
          "new_line_content": "            raxStart(&ri,group->consumers);",
          "content_same": false
        },
        {
          "line": 2698,
          "old_api": "raxNext",
          "new_api": "addReplyDeferredLen",
          "old_text": "raxNext(&ri)",
          "new_text": "addReplyDeferredLen(c)",
          "old_line_content": "            while(raxNext(&ri)) {",
          "new_line_content": "            void *arraylen_ptr = addReplyDeferredLen(c);",
          "content_same": false
        },
        {
          "line": 2700,
          "old_api": "raxSize",
          "new_api": "raxNext",
          "old_text": "raxSize(consumer->pel)",
          "new_text": "raxNext(&ri)",
          "old_line_content": "                if (raxSize(consumer->pel) == 0) continue;",
          "new_line_content": "            while(raxNext(&ri)) {",
          "content_same": false
        },
        {
          "line": 2702,
          "old_api": "addReplyBulkCBuffer",
          "new_api": "raxSize",
          "old_text": "addReplyBulkCBuffer(c,ri.key,ri.key_len)",
          "new_text": "raxSize(consumer->pel)",
          "old_line_content": "                addReplyBulkCBuffer(c,ri.key,ri.key_len);",
          "new_line_content": "                if (raxSize(consumer->pel) == 0) continue;",
          "content_same": false
        },
        {
          "line": 2703,
          "old_api": "raxSize",
          "new_api": "addReplyArrayLen",
          "old_text": "raxSize(consumer->pel)",
          "new_text": "addReplyArrayLen(c,2)",
          "old_line_content": "                addReplyBulkLongLong(c,raxSize(consumer->pel));",
          "new_line_content": "                addReplyArrayLen(c,2);",
          "content_same": false
        },
        {
          "line": 2728,
          "old_api": "streamEncodeID",
          "new_api": "mstime",
          "old_text": "streamEncodeID(startkey,&startid)",
          "new_text": "mstime()",
          "old_line_content": "        streamEncodeID(startkey,&startid);",
          "new_line_content": "        mstime_t now = mstime();",
          "content_same": false
        },
        {
          "line": 2730,
          "old_api": "raxStart",
          "new_api": "streamEncodeID",
          "old_text": "raxStart(&ri,pel)",
          "new_text": "streamEncodeID(startkey,&startid)",
          "old_line_content": "        raxStart(&ri,pel);",
          "new_line_content": "        streamEncodeID(startkey,&startid);",
          "content_same": false
        },
        {
          "line": 2731,
          "old_api": "raxSeek",
          "new_api": "streamEncodeID",
          "old_text": "raxSeek(&ri,\">=\",startkey,sizeof(startkey))",
          "new_text": "streamEncodeID(endkey,&endid)",
          "old_line_content": "        raxSeek(&ri,\">=\",startkey,sizeof(startkey));",
          "new_line_content": "        streamEncodeID(endkey,&endid);",
          "content_same": false
        },
        {
          "line": 2732,
          "old_api": "addReplyDeferredLen",
          "new_api": "raxStart",
          "old_text": "addReplyDeferredLen(c)",
          "new_text": "raxStart(&ri,pel)",
          "old_line_content": "        void *arraylen_ptr = addReplyDeferredLen(c);",
          "new_line_content": "        raxStart(&ri,pel);",
          "content_same": false
        },
        {
          "line": 2764,
          "old_api": "raxStop",
          "new_api": "addReplyLongLong",
          "old_text": "raxStop(&ri)",
          "new_text": "addReplyLongLong(c,nack->delivery_count)",
          "old_line_content": "        raxStop(&ri);",
          "new_line_content": "            addReplyLongLong(c,nack->delivery_count);",
          "content_same": false
        },
        {
          "line": 2874,
          "old_api": "streamParseStrictIDOrReply",
          "new_api": "zmalloc",
          "old_text": "streamParseStrictIDOrReply(NULL,c->argv[j],&ids[j-5],0)",
          "new_text": "zmalloc(sizeof(streamID)*id_count)",
          "old_line_content": "        if (streamParseStrictIDOrReply(NULL,c->argv[j],&ids[j-5],0) != C_OK) break;",
          "new_line_content": "        ids = zmalloc(sizeof(streamID)*id_count);",
          "content_same": false
        },
        {
          "line": 2892,
          "old_api": "getLongLongFromObjectOrReply",
          "new_api": "strcasecmp",
          "old_text": "getLongLongFromObjectOrReply(c,c->argv[j],&deliverytime,\n                \"Invalid IDLE option argument for XCLAIM\")",
          "new_text": "strcasecmp(opt,\"IDLE\")",
          "old_line_content": "            if (getLongLongFromObjectOrReply(c,c->argv[j],&deliverytime,",
          "new_line_content": "        } else if (!strcasecmp(opt,\"IDLE\") && moreargs) {",
          "content_same": false
        },
        {
          "line": 2898,
          "old_api": "getLongLongFromObjectOrReply",
          "new_api": "strcasecmp",
          "old_text": "getLongLongFromObjectOrReply(c,c->argv[j],&deliverytime,\n                \"Invalid TIME option argument for XCLAIM\")",
          "new_text": "strcasecmp(opt,\"TIME\")",
          "old_line_content": "            if (getLongLongFromObjectOrReply(c,c->argv[j],&deliverytime,",
          "new_line_content": "        } else if (!strcasecmp(opt,\"TIME\") && moreargs) {",
          "content_same": false
        },
        {
          "line": 2903,
          "old_api": "getLongLongFromObjectOrReply",
          "new_api": "strcasecmp",
          "old_text": "getLongLongFromObjectOrReply(c,c->argv[j],&retrycount,\n                \"Invalid RETRYCOUNT option argument for XCLAIM\")",
          "new_text": "strcasecmp(opt,\"RETRYCOUNT\")",
          "old_line_content": "            if (getLongLongFromObjectOrReply(c,c->argv[j],&retrycount,",
          "new_line_content": "        } else if (!strcasecmp(opt,\"RETRYCOUNT\") && moreargs) {",
          "content_same": false
        },
        {
          "line": 2908,
          "old_api": "streamParseStrictIDOrReply",
          "new_api": "strcasecmp",
          "old_text": "streamParseStrictIDOrReply(c,c->argv[j],&last_id,0)",
          "new_text": "strcasecmp(opt,\"LASTID\")",
          "old_line_content": "            if (streamParseStrictIDOrReply(c,c->argv[j],&last_id,0) != C_OK) goto cleanup;",
          "new_line_content": "        } else if (!strcasecmp(opt,\"LASTID\") && moreargs) {",
          "content_same": false
        },
        {
          "line": 2910,
          "old_api": "addReplyErrorFormat",
          "new_api": "streamParseStrictIDOrReply",
          "old_text": "addReplyErrorFormat(c,\"Unrecognized XCLAIM option '%s'\",opt)",
          "new_text": "streamParseStrictIDOrReply(c,c->argv[j],&last_id,0)",
          "old_line_content": "            addReplyErrorFormat(c,\"Unrecognized XCLAIM option '%s'\",opt);",
          "new_line_content": "            if (streamParseStrictIDOrReply(c,c->argv[j],&last_id,0) != C_OK) goto cleanup;",
          "content_same": false
        },
        {
          "line": 2985,
          "old_api": "streamCreateConsumer",
          "new_api": "streamLookupConsumer",
          "old_text": "streamCreateConsumer(group,name,c->argv[1],c->db->id,SCC_DEFAULT)",
          "new_text": "streamLookupConsumer(group,name,SLC_DEFAULT)",
          "old_line_content": "                consumer = streamCreateConsumer(group,name,c->argv[1],c->db->id,SCC_DEFAULT);",
          "new_line_content": "                (consumer = streamLookupConsumer(group,name,SLC_DEFAULT)) == NULL)",
          "content_same": false
        },
        {
          "line": 3011,
          "old_api": "streamReplyWithRange",
          "new_api": "addReplyStreamID",
          "old_text": "streamReplyWithRange(c,o->ptr,&id,&id,1,0,\n                                    NULL,NULL,STREAM_RWR_RAWENTRIES,NULL)",
          "new_text": "addReplyStreamID(c,&id)",
          "old_line_content": "                size_t emitted = streamReplyWithRange(c,o->ptr,&id,&id,1,0,",
          "new_line_content": "                addReplyStreamID(c,&id);",
          "content_same": false
        },
        {
          "line": 3013,
          "old_api": "addReplyNull",
          "new_api": "streamReplyWithRange",
          "old_text": "addReplyNull(c)",
          "new_text": "streamReplyWithRange(c,o->ptr,&id,&id,1,0,\n                                    NULL,NULL,STREAM_RWR_RAWENTRIES,NULL)",
          "old_line_content": "                if (!emitted) addReplyNull(c);",
          "new_line_content": "                size_t emitted = streamReplyWithRange(c,o->ptr,&id,&id,1,0,",
          "content_same": false
        },
        {
          "line": 3030,
          "old_api": "zfree",
          "new_api": "preventCommandPropagation",
          "old_text": "zfree(ids)",
          "new_text": "preventCommandPropagation(c)",
          "old_line_content": "    if (ids != static_ids) zfree(ids);",
          "new_line_content": "    preventCommandPropagation(c);",
          "content_same": false
        },
        {
          "line": 3066,
          "old_api": "streamIncrID",
          "new_api": "streamParseIntervalIDOrReply",
          "old_text": "streamIncrID(&startid)",
          "new_text": "streamParseIntervalIDOrReply(c,c->argv[5],&startid,&startex,0)",
          "old_line_content": "    if (startex && streamIncrID(&startid) != C_OK) {",
          "new_line_content": "    if (streamParseIntervalIDOrReply(c,c->argv[5],&startid,&startex,0) != C_OK)",
          "content_same": false
        },
        {
          "line": 3091,
          "old_api": "streamLookupCG",
          "new_api": "checkType",
          "old_text": "streamLookupCG(o->ptr,c->argv[2]->ptr)",
          "new_text": "checkType(c,o,OBJ_STREAM)",
          "old_line_content": "        group = streamLookupCG(o->ptr,c->argv[2]->ptr);",
          "new_line_content": "        if (checkType(c,o,OBJ_STREAM))",
          "content_same": false
        },
        {
          "line": 3109,
          "old_api": "addReplyDeferredLen",
          "new_api": "addReplyArrayLen",
          "old_text": "addReplyDeferredLen(c)",
          "new_text": "addReplyArrayLen(c, 2)",
          "old_line_content": "    void *arraylenptr = addReplyDeferredLen(c);",
          "new_line_content": "    addReplyArrayLen(c, 2);",
          "content_same": false
        },
        {
          "line": 3114,
          "old_api": "raxStart",
          "new_api": "streamEncodeID",
          "old_text": "raxStart(&ri,group->pel)",
          "new_text": "streamEncodeID(startkey,&startid)",
          "old_line_content": "    raxStart(&ri,group->pel);",
          "new_line_content": "    streamEncodeID(startkey,&startid);",
          "content_same": false
        },
        {
          "line": 3117,
          "old_api": "mstime",
          "new_api": "raxSeek",
          "old_text": "mstime()",
          "new_text": "raxSeek(&ri,\">=\",startkey,sizeof(startkey))",
          "old_line_content": "    mstime_t now = mstime();",
          "new_line_content": "    raxSeek(&ri,\">=\",startkey,sizeof(startkey));",
          "content_same": false
        },
        {
          "line": 3119,
          "old_api": "raxNext",
          "new_api": "mstime",
          "old_text": "raxNext(&ri)",
          "new_text": "mstime()",
          "old_line_content": "    while (attempts-- && count && raxNext(&ri)) {",
          "new_line_content": "    mstime_t now = mstime();",
          "content_same": false
        },
        {
          "line": 3134,
          "old_api": "streamCreateConsumer",
          "new_api": "streamLookupConsumer",
          "old_text": "streamCreateConsumer(group,name,c->argv[1],c->db->id,SCC_DEFAULT)",
          "new_text": "streamLookupConsumer(group,name,SLC_DEFAULT)",
          "old_line_content": "            consumer = streamCreateConsumer(group,name,c->argv[1],c->db->id,SCC_DEFAULT);",
          "new_line_content": "            (consumer = streamLookupConsumer(group,name,SLC_DEFAULT)) == NULL)",
          "content_same": false
        },
        {
          "line": 3172,
          "old_api": "decrRefCount",
          "new_api": "createObjectFromStreamID",
          "old_text": "decrRefCount(idstr)",
          "new_text": "createObjectFromStreamID(&id)",
          "old_line_content": "        decrRefCount(idstr);",
          "new_line_content": "        robj *idstr = createObjectFromStreamID(&id);",
          "content_same": false
        },
        {
          "line": 3185,
          "old_api": "raxStop",
          "new_api": "streamDecodeID",
          "old_text": "raxStop(&ri)",
          "new_text": "streamDecodeID(ri.key, &endid)",
          "old_line_content": "    raxStop(&ri);",
          "new_line_content": "        streamDecodeID(ri.key, &endid);",
          "content_same": false
        },
        {
          "line": 3187,
          "old_api": "setDeferredArrayLen",
          "new_api": "raxStop",
          "old_text": "setDeferredArrayLen(c,arraylenptr,arraylen)",
          "new_text": "raxStop(&ri)",
          "old_line_content": "    setDeferredArrayLen(c,arraylenptr,arraylen);",
          "new_line_content": "    raxStop(&ri);",
          "content_same": false
        },
        {
          "line": 3190,
          "old_api": "preventCommandPropagation",
          "new_api": "setDeferredReplyStreamID",
          "old_text": "preventCommandPropagation(c)",
          "new_text": "setDeferredReplyStreamID(c,endidptr,&endid)",
          "old_line_content": "    preventCommandPropagation(c);",
          "new_line_content": "    setDeferredReplyStreamID(c,endidptr,&endid);",
          "content_same": false
        },
        {
          "line": 3214,
          "old_api": "streamParseStrictIDOrReply",
          "new_api": "zmalloc",
          "old_text": "streamParseStrictIDOrReply(c,c->argv[j],&ids[j-2],0)",
          "new_text": "zmalloc(sizeof(streamID)*id_count)",
          "old_line_content": "        if (streamParseStrictIDOrReply(c,c->argv[j],&ids[j-2],0) != C_OK) goto cleanup;",
          "new_line_content": "        ids = zmalloc(sizeof(streamID)*id_count);",
          "content_same": false
        },
        {
          "line": 3231,
          "old_api": "zfree",
          "new_api": "addReplyLongLong",
          "old_text": "zfree(ids)",
          "new_text": "addReplyLongLong(c,deleted)",
          "old_line_content": "    if (ids != static_ids) zfree(ids);",
          "new_line_content": "    addReplyLongLong(c,deleted);",
          "content_same": false
        },
        {
          "line": 3274,
          "old_api": "notifyKeyspaceEvent",
          "new_api": "streamTrim",
          "old_text": "notifyKeyspaceEvent(NOTIFY_STREAM,\"xtrim\",c->argv[1],c->db->id)",
          "new_text": "streamTrim(s, &parsed_args)",
          "old_line_content": "        notifyKeyspaceEvent(NOTIFY_STREAM,\"xtrim\",c->argv[1],c->db->id);",
          "new_line_content": "    int64_t deleted = streamTrim(s, &parsed_args);",
          "content_same": false
        },
        {
          "line": 3330,
          "old_api": "addReplyLongLong",
          "new_api": "addReplyMapLen",
          "old_text": "addReplyLongLong(c,s->length)",
          "new_text": "addReplyMapLen(c,full ? 6 : 7)",
          "old_line_content": "    addReplyLongLong(c,s->length);",
          "new_line_content": "    addReplyMapLen(c,full ? 6 : 7);",
          "content_same": false
        },
        {
          "line": 3332,
          "old_api": "raxSize",
          "new_api": "addReplyLongLong",
          "old_text": "raxSize(s->rax)",
          "new_text": "addReplyLongLong(c,s->length)",
          "old_line_content": "    addReplyLongLong(c,raxSize(s->rax));",
          "new_line_content": "    addReplyLongLong(c,s->length);",
          "content_same": false
        },
        {
          "line": 3334,
          "old_api": "addReplyLongLong",
          "new_api": "raxSize",
          "old_text": "addReplyLongLong(c,s->rax->numnodes)",
          "new_text": "raxSize(s->rax)",
          "old_line_content": "    addReplyLongLong(c,s->rax->numnodes);",
          "new_line_content": "    addReplyLongLong(c,raxSize(s->rax));",
          "content_same": false
        },
        {
          "line": 3336,
          "old_api": "addReplyStreamID",
          "new_api": "addReplyLongLong",
          "old_text": "addReplyStreamID(c,&s->last_id)",
          "new_text": "addReplyLongLong(c,s->rax->numnodes)",
          "old_line_content": "    addReplyStreamID(c,&s->last_id);",
          "new_line_content": "    addReplyLongLong(c,s->rax->numnodes);",
          "content_same": false
        },
        {
          "line": 3352,
          "old_api": "addReplyNull",
          "new_api": "streamReplyWithRange",
          "old_text": "addReplyNull(c)",
          "new_text": "streamReplyWithRange(c,s,&start,&end,1,0,NULL,NULL,\n                                       STREAM_RWR_RAWENTRIES,NULL)",
          "old_line_content": "        if (!emitted) addReplyNull(c);",
          "new_line_content": "        emitted = streamReplyWithRange(c,s,&start,&end,1,0,NULL,NULL,",
          "content_same": false
        },
        {
          "line": 3354,
          "old_api": "streamReplyWithRange",
          "new_api": "addReplyNull",
          "old_text": "streamReplyWithRange(c,s,&start,&end,1,1,NULL,NULL,\n                                       STREAM_RWR_RAWENTRIES,NULL)",
          "new_text": "addReplyNull(c)",
          "old_line_content": "        emitted = streamReplyWithRange(c,s,&start,&end,1,1,NULL,NULL,",
          "new_line_content": "        if (!emitted) addReplyNull(c);",
          "content_same": false
        },
        {
          "line": 3356,
          "old_api": "addReplyNull",
          "new_api": "streamReplyWithRange",
          "old_text": "addReplyNull(c)",
          "new_text": "streamReplyWithRange(c,s,&start,&end,1,1,NULL,NULL,\n                                       STREAM_RWR_RAWENTRIES,NULL)",
          "old_line_content": "        if (!emitted) addReplyNull(c);",
          "new_line_content": "        emitted = streamReplyWithRange(c,s,&start,&end,1,1,NULL,NULL,",
          "content_same": false
        },
        {
          "line": 3367,
          "old_api": "addReplyArrayLen",
          "new_api": "addReplyBulkCString",
          "old_text": "addReplyArrayLen(c,0)",
          "new_text": "addReplyBulkCString(c,\"groups\")",
          "old_line_content": "            addReplyArrayLen(c,0);",
          "new_line_content": "        addReplyBulkCString(c,\"groups\");",
          "content_same": false
        },
        {
          "line": 3369,
          "old_api": "raxSize",
          "new_api": "addReplyArrayLen",
          "old_text": "raxSize(s->cgroups)",
          "new_text": "addReplyArrayLen(c,0)",
          "old_line_content": "            addReplyArrayLen(c,raxSize(s->cgroups));",
          "new_line_content": "            addReplyArrayLen(c,0);",
          "content_same": false
        },
        {
          "line": 3371,
          "old_api": "raxStart",
          "new_api": "raxSize",
          "old_text": "raxStart(&ri_cgroups,s->cgroups)",
          "new_text": "raxSize(s->cgroups)",
          "old_line_content": "            raxStart(&ri_cgroups,s->cgroups);",
          "new_line_content": "            addReplyArrayLen(c,raxSize(s->cgroups));",
          "content_same": false
        },
        {
          "line": 3373,
          "old_api": "raxNext",
          "new_api": "raxStart",
          "old_text": "raxNext(&ri_cgroups)",
          "new_text": "raxStart(&ri_cgroups,s->cgroups)",
          "old_line_content": "            while(raxNext(&ri_cgroups)) {",
          "new_line_content": "            raxStart(&ri_cgroups,s->cgroups);",
          "content_same": false
        },
        {
          "line": 3375,
          "old_api": "addReplyMapLen",
          "new_api": "raxNext",
          "old_text": "addReplyMapLen(c,5)",
          "new_text": "raxNext(&ri_cgroups)",
          "old_line_content": "                addReplyMapLen(c,5);",
          "new_line_content": "            while(raxNext(&ri_cgroups)) {",
          "content_same": false
        },
        {
          "line": 3392,
          "old_api": "addReplyDeferredLen",
          "new_api": "addReplyBulkCString",
          "old_text": "addReplyDeferredLen(c)",
          "new_text": "addReplyBulkCString(c,\"pending\")",
          "old_line_content": "                void *arrayptr_cg_pel = addReplyDeferredLen(c);",
          "new_line_content": "                addReplyBulkCString(c,\"pending\");",
          "content_same": false
        },
        {
          "line": 3394,
          "old_api": "raxStart",
          "new_api": "addReplyDeferredLen",
          "old_text": "raxStart(&ri_cg_pel,cg->pel)",
          "new_text": "addReplyDeferredLen(c)",
          "old_line_content": "                raxStart(&ri_cg_pel,cg->pel);",
          "new_line_content": "                void *arrayptr_cg_pel = addReplyDeferredLen(c);",
          "content_same": false
        },
        {
          "line": 3396,
          "old_api": "raxNext",
          "new_api": "raxStart",
          "old_text": "raxNext(&ri_cg_pel)",
          "new_text": "raxStart(&ri_cg_pel,cg->pel)",
          "old_line_content": "                while(raxNext(&ri_cg_pel) && (!count || arraylen_cg_pel < count)) {",
          "new_line_content": "                raxStart(&ri_cg_pel,cg->pel);",
          "content_same": false
        },
        {
          "line": 3398,
          "old_api": "addReplyArrayLen",
          "new_api": "raxNext",
          "old_text": "addReplyArrayLen(c,4)",
          "new_text": "raxNext(&ri_cg_pel)",
          "old_line_content": "                    addReplyArrayLen(c,4);",
          "new_line_content": "                while(raxNext(&ri_cg_pel) && (!count || arraylen_cg_pel < count)) {",
          "content_same": false
        },
        {
          "line": 3408,
          "old_api": "sdslen",
          "new_api": "serverAssert",
          "old_text": "sdslen(nack->consumer->name)",
          "new_text": "serverAssert(nack->consumer)",
          "old_line_content": "                                        sdslen(nack->consumer->name));",
          "new_line_content": "                    serverAssert(nack->consumer); /* assertion for valgrind (avoid NPD) */",
          "content_same": false
        },
        {
          "line": 3425,
          "old_api": "raxStart",
          "new_api": "raxSize",
          "old_text": "raxStart(&ri_consumers,cg->consumers)",
          "new_text": "raxSize(cg->consumers)",
          "old_line_content": "                raxStart(&ri_consumers,cg->consumers);",
          "new_line_content": "                addReplyArrayLen(c,raxSize(cg->consumers));",
          "content_same": false
        },
        {
          "line": 3427,
          "old_api": "raxNext",
          "new_api": "raxStart",
          "old_text": "raxNext(&ri_consumers)",
          "new_text": "raxStart(&ri_consumers,cg->consumers)",
          "old_line_content": "                while(raxNext(&ri_consumers)) {",
          "new_line_content": "                raxStart(&ri_consumers,cg->consumers);",
          "content_same": false
        },
        {
          "line": 3429,
          "old_api": "addReplyMapLen",
          "new_api": "raxNext",
          "old_text": "addReplyMapLen(c,4)",
          "new_text": "raxNext(&ri_consumers)",
          "old_line_content": "                    addReplyMapLen(c,4);",
          "new_line_content": "                while(raxNext(&ri_consumers)) {",
          "content_same": false
        },
        {
          "line": 3446,
          "old_api": "addReplyDeferredLen",
          "new_api": "addReplyBulkCString",
          "old_text": "addReplyDeferredLen(c)",
          "new_text": "addReplyBulkCString(c,\"pending\")",
          "old_line_content": "                    void *arrayptr_cpel = addReplyDeferredLen(c);",
          "new_line_content": "                    addReplyBulkCString(c,\"pending\");",
          "content_same": false
        },
        {
          "line": 3448,
          "old_api": "raxStart",
          "new_api": "addReplyDeferredLen",
          "old_text": "raxStart(&ri_cpel,consumer->pel)",
          "new_text": "addReplyDeferredLen(c)",
          "old_line_content": "                    raxStart(&ri_cpel,consumer->pel);",
          "new_line_content": "                    void *arrayptr_cpel = addReplyDeferredLen(c);",
          "content_same": false
        },
        {
          "line": 3450,
          "old_api": "raxNext",
          "new_api": "raxStart",
          "old_text": "raxNext(&ri_cpel)",
          "new_text": "raxStart(&ri_cpel,consumer->pel)",
          "old_line_content": "                    while(raxNext(&ri_cpel) && (!count || arraylen_cpel < count)) {",
          "new_line_content": "                    raxStart(&ri_cpel,consumer->pel);",
          "content_same": false
        },
        {
          "line": 3452,
          "old_api": "addReplyArrayLen",
          "new_api": "raxNext",
          "old_text": "addReplyArrayLen(c,3)",
          "new_text": "raxNext(&ri_cpel)",
          "old_line_content": "                        addReplyArrayLen(c,3);",
          "new_line_content": "                    while(raxNext(&ri_cpel) && (!count || arraylen_cpel < count)) {",
          "content_same": false
        },
        {
          "line": 3489,
          "old_api": "addReplySubcommandSyntaxError",
          "new_api": "strcasecmp",
          "old_text": "addReplySubcommandSyntaxError(c)",
          "new_text": "strcasecmp(c->argv[1]->ptr,\"HELP\")",
          "old_line_content": "            addReplySubcommandSyntaxError(c);",
          "new_line_content": "    if (!strcasecmp(c->argv[1]->ptr,\"HELP\")) {",
          "content_same": false
        },
        {
          "line": 3522,
          "old_api": "streamLookupCG",
          "new_api": "strcasecmp",
          "old_text": "streamLookupCG(s,c->argv[3]->ptr)",
          "new_text": "strcasecmp(opt,\"CONSUMERS\")",
          "old_line_content": "        streamCG *cg = streamLookupCG(s,c->argv[3]->ptr);",
          "new_line_content": "    if (!strcasecmp(opt,\"CONSUMERS\") && c->argc == 4) {",
          "content_same": false
        },
        {
          "line": 3524,
          "old_api": "addReplyErrorFormat",
          "new_api": "streamLookupCG",
          "old_text": "addReplyErrorFormat(c, \"-NOGROUP No such consumer group '%s' \"\n                                   \"for key name '%s'\",\n                                   (char*)c->argv[3]->ptr, (char*)key->ptr)",
          "new_text": "streamLookupCG(s,c->argv[3]->ptr)",
          "old_line_content": "            addReplyErrorFormat(c, \"-NOGROUP No such consumer group '%s' \"",
          "new_line_content": "        streamCG *cg = streamLookupCG(s,c->argv[3]->ptr);",
          "content_same": false
        },
        {
          "line": 3532,
          "old_api": "raxStart",
          "new_api": "raxSize",
          "old_text": "raxStart(&ri,cg->consumers)",
          "new_text": "raxSize(cg->consumers)",
          "old_line_content": "        raxStart(&ri,cg->consumers);",
          "new_line_content": "        addReplyArrayLen(c,raxSize(cg->consumers));",
          "content_same": false
        },
        {
          "line": 3534,
          "old_api": "mstime",
          "new_api": "raxStart",
          "old_text": "mstime()",
          "new_text": "raxStart(&ri,cg->consumers)",
          "old_line_content": "        mstime_t now = mstime();",
          "new_line_content": "        raxStart(&ri,cg->consumers);",
          "content_same": false
        },
        {
          "line": 3535,
          "old_api": "raxNext",
          "new_api": "raxSeek",
          "old_text": "raxNext(&ri)",
          "new_text": "raxSeek(&ri,\"^\",NULL,0)",
          "old_line_content": "        while(raxNext(&ri)) {",
          "new_line_content": "        raxSeek(&ri,\"^\",NULL,0);",
          "content_same": false
        },
        {
          "line": 3542,
          "old_api": "sdslen",
          "new_api": "addReplyMapLen",
          "old_text": "sdslen(consumer->name)",
          "new_text": "addReplyMapLen(c,3)",
          "old_line_content": "            addReplyBulkCBuffer(c,consumer->name,sdslen(consumer->name));",
          "new_line_content": "            addReplyMapLen(c,3);",
          "content_same": false
        },
        {
          "line": 3544,
          "old_api": "raxSize",
          "new_api": "sdslen",
          "old_text": "raxSize(consumer->pel)",
          "new_text": "sdslen(consumer->name)",
          "old_line_content": "            addReplyLongLong(c,raxSize(consumer->pel));",
          "new_line_content": "            addReplyBulkCBuffer(c,consumer->name,sdslen(consumer->name));",
          "content_same": false
        },
        {
          "line": 3546,
          "old_api": "addReplyLongLong",
          "new_api": "raxSize",
          "old_text": "addReplyLongLong(c,idle)",
          "new_text": "raxSize(consumer->pel)",
          "old_line_content": "            addReplyLongLong(c,idle);",
          "new_line_content": "            addReplyLongLong(c,raxSize(consumer->pel));",
          "content_same": false
        },
        {
          "line": 3548,
          "old_api": "raxStop",
          "new_api": "addReplyLongLong",
          "old_text": "raxStop(&ri)",
          "new_text": "addReplyLongLong(c,idle)",
          "old_line_content": "        raxStop(&ri);",
          "new_line_content": "            addReplyLongLong(c,idle);",
          "content_same": false
        },
        {
          "line": 3558,
          "old_api": "raxStart",
          "new_api": "raxSize",
          "old_text": "raxStart(&ri,s->cgroups)",
          "new_text": "raxSize(s->cgroups)",
          "old_line_content": "        raxStart(&ri,s->cgroups);",
          "new_line_content": "        addReplyArrayLen(c,raxSize(s->cgroups));",
          "content_same": false
        },
        {
          "line": 3560,
          "old_api": "raxNext",
          "new_api": "raxStart",
          "old_text": "raxNext(&ri)",
          "new_text": "raxStart(&ri,s->cgroups)",
          "old_line_content": "        while(raxNext(&ri)) {",
          "new_line_content": "        raxStart(&ri,s->cgroups);",
          "content_same": false
        },
        {
          "line": 3562,
          "old_api": "addReplyMapLen",
          "new_api": "raxNext",
          "old_text": "addReplyMapLen(c,4)",
          "new_text": "raxNext(&ri)",
          "old_line_content": "            addReplyMapLen(c,4);",
          "new_line_content": "        while(raxNext(&ri)) {",
          "content_same": false
        },
        {
          "line": 3564,
          "old_api": "addReplyBulkCBuffer",
          "new_api": "addReplyMapLen",
          "old_text": "addReplyBulkCBuffer(c,ri.key,ri.key_len)",
          "new_text": "addReplyMapLen(c,4)",
          "old_line_content": "            addReplyBulkCBuffer(c,ri.key,ri.key_len);",
          "new_line_content": "            addReplyMapLen(c,4);",
          "content_same": false
        },
        {
          "line": 3566,
          "old_api": "raxSize",
          "new_api": "addReplyBulkCBuffer",
          "old_text": "raxSize(cg->consumers)",
          "new_text": "addReplyBulkCBuffer(c,ri.key,ri.key_len)",
          "old_line_content": "            addReplyLongLong(c,raxSize(cg->consumers));",
          "new_line_content": "            addReplyBulkCBuffer(c,ri.key,ri.key_len);",
          "content_same": false
        },
        {
          "line": 3570,
          "old_api": "addReplyStreamID",
          "new_api": "raxSize",
          "old_text": "addReplyStreamID(c,&cg->last_id)",
          "new_text": "raxSize(cg->pel)",
          "old_line_content": "            addReplyStreamID(c,&cg->last_id);",
          "new_line_content": "            addReplyLongLong(c,raxSize(cg->pel));",
          "content_same": false
        },
        {
          "line": 3572,
          "old_api": "raxStop",
          "new_api": "addReplyStreamID",
          "old_text": "raxStop(&ri)",
          "new_text": "addReplyStreamID(c,&cg->last_id)",
          "old_line_content": "        raxStop(&ri);",
          "new_line_content": "            addReplyStreamID(c,&cg->last_id);",
          "content_same": false
        },
        {
          "line": 3575,
          "old_api": "xinfoReplyWithStreamInfo",
          "new_api": "strcasecmp",
          "old_text": "xinfoReplyWithStreamInfo(c,s)",
          "new_text": "strcasecmp(opt,\"STREAM\")",
          "old_line_content": "        xinfoReplyWithStreamInfo(c,s);",
          "new_line_content": "    } else if (!strcasecmp(opt,\"STREAM\")) {",
          "content_same": false
        },
        {
          "line": 3577,
          "old_api": "addReplySubcommandSyntaxError",
          "new_api": "xinfoReplyWithStreamInfo",
          "old_text": "addReplySubcommandSyntaxError(c)",
          "new_text": "xinfoReplyWithStreamInfo(c,s)",
          "old_line_content": "        addReplySubcommandSyntaxError(c);",
          "new_line_content": "        xinfoReplyWithStreamInfo(c,s);",
          "content_same": false
        },
        {
          "line": 3603,
          "old_api": "lpValidateNext",
          "new_api": "lpGetIntegerIfValid",
          "old_text": "lpValidateNext(lp, &next, size)",
          "new_text": "lpGetIntegerIfValid(p, &valid_record)",
          "old_line_content": "    p = next; if (!lpValidateNext(lp, &next, size)) return 0;",
          "new_line_content": "    int64_t entry_count = lpGetIntegerIfValid(p, &valid_record);",
          "content_same": false
        },
        {
          "line": 3608,
          "old_api": "lpValidateNext",
          "new_api": "lpGetIntegerIfValid",
          "old_text": "lpValidateNext(lp, &next, size)",
          "new_text": "lpGetIntegerIfValid(p, &valid_record)",
          "old_line_content": "    p = next; if (!lpValidateNext(lp, &next, size)) return 0;",
          "new_line_content": "    int64_t deleted_count = lpGetIntegerIfValid(p, &valid_record);",
          "content_same": false
        },
        {
          "line": 3613,
          "old_api": "lpValidateNext",
          "new_api": "lpGetIntegerIfValid",
          "old_text": "lpValidateNext(lp, &next, size)",
          "new_text": "lpGetIntegerIfValid(p, &valid_record)",
          "old_line_content": "    p = next; if (!lpValidateNext(lp, &next, size)) return 0;",
          "new_line_content": "    int64_t master_fields = lpGetIntegerIfValid(p, &valid_record);",
          "content_same": false
        },
        {
          "line": 3623,
          "old_api": "lpValidateNext",
          "new_api": "lpGetIntegerIfValid",
          "old_text": "lpValidateNext(lp, &next, size)",
          "new_text": "lpGetIntegerIfValid(p, &valid_record)",
          "old_line_content": "    p = next; if (!lpValidateNext(lp, &next, size)) return 0;",
          "new_line_content": "    int64_t zero = lpGetIntegerIfValid(p, &valid_record);",
          "content_same": false
        },
        {
          "line": 3631,
          "old_api": "lpValidateNext",
          "new_api": "lpGetIntegerIfValid",
          "old_text": "lpValidateNext(lp, &next, size)",
          "new_text": "lpGetIntegerIfValid(p, &valid_record)",
          "old_line_content": "        p = next; if (!lpValidateNext(lp, &next, size)) return 0;",
          "new_line_content": "        int64_t flags = lpGetIntegerIfValid(p, &valid_record);",
          "content_same": false
        },
        {
          "line": 3636,
          "old_api": "lpValidateNext",
          "new_api": "lpGetIntegerIfValid",
          "old_text": "lpValidateNext(lp, &next, size)",
          "new_text": "lpGetIntegerIfValid(p, &valid_record)",
          "old_line_content": "        p = next; if (!lpValidateNext(lp, &next, size)) return 0;",
          "new_line_content": "        lpGetIntegerIfValid(p, &valid_record);",
          "content_same": false
        },
        {
          "line": 3639,
          "old_api": "lpValidateNext",
          "new_api": "lpGetIntegerIfValid",
          "old_text": "lpValidateNext(lp, &next, size)",
          "new_text": "lpGetIntegerIfValid(p, &valid_record)",
          "old_line_content": "        p = next; if (!lpValidateNext(lp, &next, size)) return 0;",
          "new_line_content": "        lpGetIntegerIfValid(p, &valid_record);",
          "content_same": false
        },
        {
          "line": 3645,
          "old_api": "lpValidateNext",
          "new_api": "lpGetIntegerIfValid",
          "old_text": "lpValidateNext(lp, &next, size)",
          "new_text": "lpGetIntegerIfValid(p, &valid_record)",
          "old_line_content": "            p = next; if (!lpValidateNext(lp, &next, size)) return 0;",
          "new_line_content": "            fields = lpGetIntegerIfValid(p, &valid_record);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 2562,
          "old_api": null,
          "new_api": "streamParseStrictIDOrReply",
          "old_text": null,
          "new_text": "streamParseStrictIDOrReply(c,c->argv[j],&ids[j-3],0)",
          "old_line_content": "",
          "new_line_content": "        if (streamParseStrictIDOrReply(c,c->argv[j],&ids[j-3],0) != C_OK) goto cleanup;",
          "content_same": false
        },
        {
          "line": 3077,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(opt,\"COUNT\")",
          "old_line_content": "                return;",
          "new_line_content": "        if (!strcasecmp(opt,\"COUNT\") && moreargs) {",
          "content_same": false
        },
        {
          "line": 2054,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"The $ ID is meaningless in the context of \"\n                                \"XREADGROUP: you want to read the history of \"\n                                \"this consumer by specifying a proper ID, or \"\n                                \"use the > ID to get new messages. The $ ID would \"\n                                \"just return an empty result set.\")",
          "old_line_content": "                                \"this consumer by specifying a proper ID, or \"",
          "new_line_content": "                addReplyError(c,\"The $ ID is meaningless in the context of \"",
          "content_same": false
        },
        {
          "line": 3078,
          "old_api": null,
          "new_api": "getRangeLongFromObjectOrReply",
          "old_text": null,
          "new_text": "getRangeLongFromObjectOrReply(c,c->argv[j+1],1,LONG_MAX,&count,\"COUNT must be > 0\")",
          "old_line_content": "            j++;",
          "new_line_content": "            if (getRangeLongFromObjectOrReply(c,c->argv[j+1],1,LONG_MAX,&count,\"COUNT must be > 0\") != C_OK)",
          "content_same": false
        },
        {
          "line": 2568,
          "old_api": null,
          "new_api": "streamEncodeID",
          "old_text": null,
          "new_text": "streamEncodeID(buf,&ids[j-3])",
          "old_line_content": "        /* Lookup the ID in the group PEL: it will have a reference to the",
          "new_line_content": "        streamEncodeID(buf,&ids[j-3]);",
          "content_same": false
        },
        {
          "line": 3081,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(opt,\"JUSTID\")",
          "old_line_content": "        } else {",
          "new_line_content": "        } else if (!strcasecmp(opt,\"JUSTID\")) {",
          "content_same": false
        },
        {
          "line": 3592,
          "old_api": null,
          "new_api": "lpValidateIntegrity",
          "old_text": null,
          "new_text": "lpValidateIntegrity(lp, size, 0, NULL, NULL)",
          "old_line_content": "",
          "new_line_content": "    if (!lpValidateIntegrity(lp, size, 0, NULL, NULL))",
          "content_same": false
        },
        {
          "line": 3084,
          "old_api": null,
          "new_api": "addReplyErrorObject",
          "old_text": null,
          "new_text": "addReplyErrorObject(c,shared.syntaxerr)",
          "old_line_content": "        }",
          "new_line_content": "            addReplyErrorObject(c,shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 3598,
          "old_api": null,
          "new_api": "lpValidateFirst",
          "old_text": null,
          "new_text": "lpValidateFirst(lp)",
          "old_line_content": "    if (!p) return 0;",
          "new_line_content": "    next = p = lpValidateFirst(lp);",
          "content_same": false
        },
        {
          "line": 3599,
          "old_api": null,
          "new_api": "lpValidateNext",
          "old_text": null,
          "new_text": "lpValidateNext(lp, &next, size)",
          "old_line_content": "",
          "new_line_content": "    if (!lpValidateNext(lp, &next, size)) return 0;",
          "content_same": false
        },
        {
          "line": 2576,
          "old_api": null,
          "new_api": "raxRemove",
          "old_text": null,
          "new_text": "raxRemove(nack->consumer->pel,buf,sizeof(buf),NULL)",
          "old_line_content": "            acknowledged++;",
          "new_line_content": "            raxRemove(nack->consumer->pel,buf,sizeof(buf),NULL);",
          "content_same": false
        },
        {
          "line": 2577,
          "old_api": null,
          "new_api": "streamFreeNACK",
          "old_text": null,
          "new_text": "streamFreeNACK(nack)",
          "old_line_content": "            server.dirty++;",
          "new_line_content": "            streamFreeNACK(nack);",
          "content_same": false
        },
        {
          "line": 3093,
          "old_api": null,
          "new_api": "streamLookupCG",
          "old_text": null,
          "new_text": "streamLookupCG(o->ptr,c->argv[2]->ptr)",
          "old_line_content": "",
          "new_line_content": "        group = streamLookupCG(o->ptr,c->argv[2]->ptr);",
          "content_same": false
        },
        {
          "line": 3605,
          "old_api": null,
          "new_api": "lpValidateNext",
          "old_text": null,
          "new_text": "lpValidateNext(lp, &next, size)",
          "old_line_content": "    /* deleted */",
          "new_line_content": "    p = next; if (!lpValidateNext(lp, &next, size)) return 0;",
          "content_same": false
        },
        {
          "line": 2071,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"The > ID can be specified only when calling \"\n                                \"XREADGROUP using the GROUP <group> \"\n                                \"<consumer> option.\")",
          "old_line_content": "                                \"<consumer> option.\");",
          "new_line_content": "                addReplyError(c,\"The > ID can be specified only when calling \"",
          "content_same": false
        },
        {
          "line": 2584,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(ids)",
          "old_line_content": "",
          "new_line_content": "    if (ids != static_ids) zfree(ids);",
          "content_same": false
        },
        {
          "line": 3610,
          "old_api": null,
          "new_api": "lpValidateNext",
          "old_text": null,
          "new_text": "lpValidateNext(lp, &next, size)",
          "old_line_content": "    /* num-of-fields */",
          "new_line_content": "    p = next; if (!lpValidateNext(lp, &next, size)) return 0;",
          "content_same": false
        },
        {
          "line": 3099,
          "old_api": null,
          "new_api": "addReplyErrorFormat",
          "old_text": null,
          "new_text": "addReplyErrorFormat(c,\"-NOGROUP No such key '%s' or consumer group '%s'\",\n                            (char*)c->argv[1]->ptr,\n                            (char*)c->argv[2]->ptr)",
          "old_line_content": "                            (char*)c->argv[2]->ptr);",
          "new_line_content": "        addReplyErrorFormat(c,\"-NOGROUP No such key '%s' or consumer group '%s'\",",
          "content_same": false
        },
        {
          "line": 3615,
          "old_api": null,
          "new_api": "lpValidateNext",
          "old_text": null,
          "new_text": "lpValidateNext(lp, &next, size)",
          "old_line_content": "    /* the field names */",
          "new_line_content": "    p = next; if (!lpValidateNext(lp, &next, size)) return 0;",
          "content_same": false
        },
        {
          "line": 2083,
          "old_api": null,
          "new_api": "streamParseStrictIDOrReply",
          "old_text": null,
          "new_text": "streamParseStrictIDOrReply(c,c->argv[i],ids+id_idx,0)",
          "old_line_content": "    }",
          "new_line_content": "        if (streamParseStrictIDOrReply(c,c->argv[i],ids+id_idx,0) != C_OK)",
          "content_same": false
        },
        {
          "line": 3619,
          "old_api": null,
          "new_api": "lpValidateNext",
          "old_text": null,
          "new_text": "lpValidateNext(lp, &next, size)",
          "old_line_content": "",
          "new_line_content": "        p = next; if (!lpValidateNext(lp, &next, size)) return 0;",
          "content_same": false
        },
        {
          "line": 3110,
          "old_api": null,
          "new_api": "addReplyDeferredLen",
          "old_text": null,
          "new_text": "addReplyDeferredLen(c)",
          "old_line_content": "",
          "new_line_content": "    void *endidptr = addReplyDeferredLen(c);",
          "content_same": false
        },
        {
          "line": 3111,
          "old_api": null,
          "new_api": "addReplyDeferredLen",
          "old_text": null,
          "new_text": "addReplyDeferredLen(c)",
          "old_line_content": "    unsigned char startkey[sizeof(streamID)];",
          "new_line_content": "    void *arraylenptr = addReplyDeferredLen(c);",
          "content_same": false
        },
        {
          "line": 2043,
          "old_api": null,
          "new_api": "addReplyErrorFormat",
          "old_text": null,
          "new_text": "addReplyErrorFormat(c, \"-NOGROUP No such key '%s' or consumer \"\n                                       \"group '%s' in XREADGROUP with GROUP \"\n                                       \"option\",\n                                    (char*)key->ptr,(char*)groupname->ptr)",
          "old_line_content": "                                       \"option\",",
          "new_line_content": "                addReplyErrorFormat(c, \"-NOGROUP No such key '%s' or consumer \"",
          "content_same": false
        },
        {
          "line": 3625,
          "old_api": null,
          "new_api": "lpValidateNext",
          "old_text": null,
          "new_text": "lpValidateNext(lp, &next, size)",
          "old_line_content": "    entry_count += deleted_count;",
          "new_line_content": "    p = next; if (!lpValidateNext(lp, &next, size)) return 0;",
          "content_same": false
        },
        {
          "line": 2091,
          "old_api": null,
          "new_api": "lookupKeyRead",
          "old_text": null,
          "new_text": "lookupKeyRead(c->db,c->argv[streams_arg+i])",
          "old_line_content": "        stream *s = o->ptr;",
          "new_line_content": "        robj *o = lookupKeyRead(c->db,c->argv[streams_arg+i]);",
          "content_same": false
        },
        {
          "line": 3116,
          "old_api": null,
          "new_api": "raxStart",
          "old_text": null,
          "new_text": "raxStart(&ri,group->pel)",
          "old_line_content": "    size_t arraylen = 0;",
          "new_line_content": "    raxStart(&ri,group->pel);",
          "content_same": false
        },
        {
          "line": 2609,
          "old_api": null,
          "new_api": "addReplyErrorObject",
          "old_text": null,
          "new_text": "addReplyErrorObject(c,shared.syntaxerr)",
          "old_line_content": "    }",
          "new_line_content": "        addReplyErrorObject(c,shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 3121,
          "old_api": null,
          "new_api": "raxNext",
          "old_text": null,
          "new_text": "raxNext(&ri)",
          "old_line_content": "",
          "new_line_content": "    while (attempts-- && count && raxNext(&ri)) {",
          "content_same": false
        },
        {
          "line": 3633,
          "old_api": null,
          "new_api": "lpValidateNext",
          "old_text": null,
          "new_text": "lpValidateNext(lp, &next, size)",
          "old_line_content": "        /* entry id */",
          "new_line_content": "        p = next; if (!lpValidateNext(lp, &next, size)) return 0;",
          "content_same": false
        },
        {
          "line": 3638,
          "old_api": null,
          "new_api": "lpValidateNext",
          "old_text": null,
          "new_text": "lpValidateNext(lp, &next, size)",
          "old_line_content": "        if (!valid_record) return 0;",
          "new_line_content": "        p = next; if (!lpValidateNext(lp, &next, size)) return 0;",
          "content_same": false
        },
        {
          "line": 3641,
          "old_api": null,
          "new_api": "lpValidateNext",
          "old_text": null,
          "new_text": "lpValidateNext(lp, &next, size)",
          "old_line_content": "        if (!(flags & STREAM_ITEM_FLAG_SAMEFIELDS)) {",
          "new_line_content": "        p = next; if (!lpValidateNext(lp, &next, size)) return 0;",
          "content_same": false
        },
        {
          "line": 2618,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[3]->ptr, \"IDLE\")",
          "old_line_content": "                return;",
          "new_line_content": "        if (!strcasecmp(c->argv[3]->ptr, \"IDLE\")) {",
          "content_same": false
        },
        {
          "line": 2619,
          "old_api": null,
          "new_api": "getLongLongFromObjectOrReply",
          "old_text": null,
          "new_text": "getLongLongFromObjectOrReply(c, c->argv[4], &minidle, NULL)",
          "old_line_content": "            if (c->argc < 8) {",
          "new_line_content": "            if (getLongLongFromObjectOrReply(c, c->argv[4], &minidle, NULL) == C_ERR)",
          "content_same": false
        },
        {
          "line": 3131,
          "old_api": null,
          "new_api": "streamDecodeID",
          "old_text": null,
          "new_text": "streamDecodeID(ri.key, &id)",
          "old_line_content": "        if (consumer == NULL &&",
          "new_line_content": "        streamDecodeID(ri.key, &id);",
          "content_same": false
        },
        {
          "line": 2623,
          "old_api": null,
          "new_api": "addReplyErrorObject",
          "old_text": null,
          "new_text": "addReplyErrorObject(c,shared.syntaxerr)",
          "old_line_content": "            }",
          "new_line_content": "                addReplyErrorObject(c,shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 3136,
          "old_api": null,
          "new_api": "streamCreateConsumer",
          "old_text": null,
          "new_text": "streamCreateConsumer(group,name,c->argv[1],c->db->id,SCC_DEFAULT)",
          "old_line_content": "        if (nack->consumer != consumer) {",
          "new_line_content": "            consumer = streamCreateConsumer(group,name,c->argv[1],c->db->id,SCC_DEFAULT);",
          "content_same": false
        },
        {
          "line": 3647,
          "old_api": null,
          "new_api": "lpValidateNext",
          "old_text": null,
          "new_text": "lpValidateNext(lp, &next, size)",
          "old_line_content": "            /* the field names */",
          "new_line_content": "            p = next; if (!lpValidateNext(lp, &next, size)) return 0;",
          "content_same": false
        },
        {
          "line": 2114,
          "old_api": null,
          "new_api": "streamLastValidID",
          "old_text": null,
          "new_text": "streamLastValidID(s, &maxid)",
          "old_line_content": "                    serve_synchronously = 1;",
          "new_line_content": "                streamLastValidID(s, &maxid);",
          "content_same": false
        },
        {
          "line": 2115,
          "old_api": null,
          "new_api": "streamCompareID",
          "old_text": null,
          "new_text": "streamCompareID(&maxid, last)",
          "old_line_content": "                    *gt = *last;",
          "new_line_content": "                if (streamCompareID(&maxid, last) > 0) {",
          "content_same": false
        },
        {
          "line": 3651,
          "old_api": null,
          "new_api": "lpValidateNext",
          "old_text": null,
          "new_text": "lpValidateNext(lp, &next, size)",
          "old_line_content": "",
          "new_line_content": "                p = next; if (!lpValidateNext(lp, &next, size)) return 0;",
          "content_same": false
        },
        {
          "line": 2631,
          "old_api": null,
          "new_api": "getLongLongFromObjectOrReply",
          "old_text": null,
          "new_text": "getLongLongFromObjectOrReply(c,c->argv[startidx+2],&count,NULL)",
          "old_line_content": "        if (count < 0) count = 0;",
          "new_line_content": "        if (getLongLongFromObjectOrReply(c,c->argv[startidx+2],&count,NULL) == C_ERR)",
          "content_same": false
        },
        {
          "line": 3143,
          "old_api": null,
          "new_api": "raxRemove",
          "old_text": null,
          "new_text": "raxRemove(nack->consumer->pel,ri.key,ri.key_len,NULL)",
          "old_line_content": "",
          "new_line_content": "                raxRemove(nack->consumer->pel,ri.key,ri.key_len,NULL);",
          "content_same": false
        },
        {
          "line": 3659,
          "old_api": null,
          "new_api": "lpValidateNext",
          "old_text": null,
          "new_text": "lpValidateNext(lp, &next, size)",
          "old_line_content": "",
          "new_line_content": "            p = next; if (!lpValidateNext(lp, &next, size)) return 0;",
          "content_same": false
        },
        {
          "line": 2124,
          "old_api": null,
          "new_api": "streamLastValidID",
          "old_text": null,
          "new_text": "streamLastValidID(s, &maxid)",
          "old_line_content": "                serve_synchronously = 1;",
          "new_line_content": "            streamLastValidID(s, &maxid);",
          "content_same": false
        },
        {
          "line": 2125,
          "old_api": null,
          "new_api": "streamCompareID",
          "old_text": null,
          "new_text": "streamCompareID(&maxid, gt)",
          "old_line_content": "            }",
          "new_line_content": "            if (streamCompareID(&maxid, gt) > 0) {",
          "content_same": false
        },
        {
          "line": 2638,
          "old_api": null,
          "new_api": "streamIncrID",
          "old_text": null,
          "new_text": "streamIncrID(&startid)",
          "old_line_content": "            return;",
          "new_line_content": "        if (startex && streamIncrID(&startid) != C_OK) {",
          "content_same": false
        },
        {
          "line": 2639,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"invalid start ID for the interval\")",
          "old_line_content": "        }",
          "new_line_content": "            addReplyError(c,\"invalid start ID for the interval\");",
          "content_same": false
        },
        {
          "line": 3663,
          "old_api": null,
          "new_api": "lpGetIntegerIfValid",
          "old_text": null,
          "new_text": "lpGetIntegerIfValid(p, &valid_record)",
          "old_line_content": "        if (lp_count != fields + extra_fields) return 0;",
          "new_line_content": "        int64_t lp_count = lpGetIntegerIfValid(p, &valid_record);",
          "content_same": false
        },
        {
          "line": 3154,
          "old_api": null,
          "new_api": "raxInsert",
          "old_text": null,
          "new_text": "raxInsert(consumer->pel,ri.key,ri.key_len,nack,NULL)",
          "old_line_content": "        }",
          "new_line_content": "            raxInsert(consumer->pel,ri.key,ri.key_len,nack,NULL);",
          "content_same": false
        },
        {
          "line": 3666,
          "old_api": null,
          "new_api": "lpValidateNext",
          "old_text": null,
          "new_text": "lpValidateNext(lp, &next, size)",
          "old_line_content": "",
          "new_line_content": "        p = next; if (!lpValidateNext(lp, &next, size)) return 0;",
          "content_same": false
        },
        {
          "line": 2132,
          "old_api": null,
          "new_api": "addReplyDeferredLen",
          "old_text": null,
          "new_text": "addReplyDeferredLen(c)",
          "old_line_content": "             * so start from the next ID, since we want only messages with",
          "new_line_content": "            if (arraylen == 1) arraylen_ptr = addReplyDeferredLen(c);",
          "content_same": false
        },
        {
          "line": 2644,
          "old_api": null,
          "new_api": "streamDecrID",
          "old_text": null,
          "new_text": "streamDecrID(&endid)",
          "old_line_content": "            return;",
          "new_line_content": "        if (endex && streamDecrID(&endid) != C_OK) {",
          "content_same": false
        },
        {
          "line": 2645,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"invalid end ID for the interval\")",
          "old_line_content": "        }",
          "new_line_content": "            addReplyError(c,\"invalid end ID for the interval\");",
          "content_same": false
        },
        {
          "line": 3160,
          "old_api": null,
          "new_api": "addReplyStreamID",
          "old_text": null,
          "new_text": "addReplyStreamID(c,&id)",
          "old_line_content": "            size_t emitted =",
          "new_line_content": "            addReplyStreamID(c,&id);",
          "content_same": false
        },
        {
          "line": 2137,
          "old_api": null,
          "new_api": "streamIncrID",
          "old_text": null,
          "new_text": "streamIncrID(&start)",
          "old_line_content": "            /* Emit the two elements sub-array consisting of the name",
          "new_line_content": "            streamIncrID(&start);",
          "content_same": false
        },
        {
          "line": 3163,
          "old_api": null,
          "new_api": "streamReplyWithRange",
          "old_text": null,
          "new_text": "streamReplyWithRange(c,o->ptr,&id,&id,1,0,NULL,NULL,\n                                     STREAM_RWR_RAWENTRIES,NULL)",
          "old_line_content": "            if (!emitted)",
          "new_line_content": "                streamReplyWithRange(c,o->ptr,&id,&id,1,0,NULL,NULL,",
          "content_same": false
        },
        {
          "line": 2141,
          "old_api": null,
          "new_api": "addReplyArrayLen",
          "old_text": null,
          "new_text": "addReplyArrayLen(c,2)",
          "old_line_content": "            streamConsumer *consumer = NULL;",
          "new_line_content": "            if (c->resp == 2) addReplyArrayLen(c,2);",
          "content_same": false
        },
        {
          "line": 2142,
          "old_api": null,
          "new_api": "addReplyBulk",
          "old_text": null,
          "new_text": "addReplyBulk(c,c->argv[streams_arg+i])",
          "old_line_content": "            streamPropInfo spi = {c->argv[i+streams_arg],groupname};",
          "new_line_content": "            addReplyBulk(c,c->argv[streams_arg+i]);",
          "content_same": false
        },
        {
          "line": 3166,
          "old_api": null,
          "new_api": "addReplyNull",
          "old_text": null,
          "new_text": "addReplyNull(c)",
          "old_line_content": "        arraylen++;",
          "new_line_content": "                addReplyNull(c);",
          "content_same": false
        },
        {
          "line": 2656,
          "old_api": null,
          "new_api": "lookupKeyRead",
          "old_text": null,
          "new_text": "lookupKeyRead(c->db,c->argv[1])",
          "old_line_content": "",
          "new_line_content": "    robj *o = lookupKeyRead(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 2148,
          "old_api": null,
          "new_api": "streamCreateConsumer",
          "old_text": null,
          "new_text": "streamCreateConsumer(groups[i],consumername->ptr,\n                                                    c->argv[streams_arg+i],\n                                                    c->db->id,SCC_DEFAULT)",
          "old_line_content": "                                                    c->db->id,SCC_DEFAULT);",
          "new_line_content": "                    consumer = streamCreateConsumer(groups[i],consumername->ptr,",
          "content_same": false
        },
        {
          "line": 3173,
          "old_api": null,
          "new_api": "streamPropagateXCLAIM",
          "old_text": null,
          "new_text": "streamPropagateXCLAIM(c,c->argv[1],group,c->argv[2],idstr,nack)",
          "old_line_content": "        server.dirty++;",
          "new_line_content": "        streamPropagateXCLAIM(c,c->argv[1],group,c->argv[2],idstr,nack);",
          "content_same": false
        },
        {
          "line": 3174,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(idstr)",
          "old_line_content": "    }",
          "new_line_content": "        decrRefCount(idstr);",
          "content_same": false
        },
        {
          "line": 2663,
          "old_api": null,
          "new_api": "addReplyErrorFormat",
          "old_text": null,
          "new_text": "addReplyErrorFormat(c, \"-NOGROUP No such key '%s' or consumer \"\n                               \"group '%s'\",\n                               (char*)key->ptr,(char*)groupname->ptr)",
          "old_line_content": "                               (char*)key->ptr,(char*)groupname->ptr);",
          "new_line_content": "        addReplyErrorFormat(c, \"-NOGROUP No such key '%s' or consumer \"",
          "content_same": false
        },
        {
          "line": 2152,
          "old_api": null,
          "new_api": "streamPropagateConsumerCreation",
          "old_text": null,
          "new_text": "streamPropagateConsumerCreation(c,spi.keyname,\n                                                        spi.groupname,\n                                                        consumer->name)",
          "old_line_content": "                                                        consumer->name);",
          "new_line_content": "                        streamPropagateConsumerCreation(c,spi.keyname,",
          "content_same": false
        },
        {
          "line": 3179,
          "old_api": null,
          "new_api": "raxNext",
          "old_text": null,
          "new_text": "raxNext(&ri)",
          "old_line_content": "    streamID endid;",
          "new_line_content": "    raxNext(&ri);",
          "content_same": false
        },
        {
          "line": 3182,
          "old_api": null,
          "new_api": "raxEOF",
          "old_text": null,
          "new_text": "raxEOF(&ri)",
          "old_line_content": "    } else {",
          "new_line_content": "    if (raxEOF(&ri)) {",
          "content_same": false
        },
        {
          "line": 2160,
          "old_api": null,
          "new_api": "streamReplyWithRange",
          "old_text": null,
          "new_text": "streamReplyWithRange(c,s,&start,NULL,count,0,\n                                 groups ? groups[i] : NULL,\n                                 consumer, flags, &spi)",
          "old_line_content": "                                 consumer, flags, &spi);",
          "new_line_content": "            streamReplyWithRange(c,s,&start,NULL,count,0,",
          "content_same": false
        },
        {
          "line": 2677,
          "old_api": null,
          "new_api": "addReplyNull",
          "old_text": null,
          "new_text": "addReplyNull(c)",
          "old_line_content": "        } else {",
          "new_line_content": "            addReplyNull(c); /* End. */",
          "content_same": false
        },
        {
          "line": 2678,
          "old_api": null,
          "new_api": "addReplyNullArray",
          "old_text": null,
          "new_text": "addReplyNullArray(c)",
          "old_line_content": "            /* Start. */",
          "new_line_content": "            addReplyNullArray(c); /* Clients. */",
          "content_same": false
        },
        {
          "line": 3189,
          "old_api": null,
          "new_api": "setDeferredArrayLen",
          "old_text": null,
          "new_text": "setDeferredArrayLen(c,arraylenptr,arraylen)",
          "old_line_content": "",
          "new_line_content": "    setDeferredArrayLen(c,arraylenptr,arraylen);",
          "content_same": false
        },
        {
          "line": 3192,
          "old_api": null,
          "new_api": "preventCommandPropagation",
          "old_text": null,
          "new_text": "preventCommandPropagation(c)",
          "old_line_content": "",
          "new_line_content": "    preventCommandPropagation(c);",
          "content_same": false
        },
        {
          "line": 2172,
          "old_api": null,
          "new_api": "setDeferredMapLen",
          "old_text": null,
          "new_text": "setDeferredMapLen(c,arraylen_ptr,arraylen)",
          "old_line_content": "    }",
          "new_line_content": "            setDeferredMapLen(c,arraylen_ptr,arraylen);",
          "content_same": false
        },
        {
          "line": 2685,
          "old_api": null,
          "new_api": "streamDecodeID",
          "old_text": null,
          "new_text": "streamDecodeID(ri.key,&startid)",
          "old_line_content": "",
          "new_line_content": "            streamDecodeID(ri.key,&startid);",
          "content_same": false
        },
        {
          "line": 2686,
          "old_api": null,
          "new_api": "addReplyStreamID",
          "old_text": null,
          "new_text": "addReplyStreamID(c,&startid)",
          "old_line_content": "            /* End. */",
          "new_line_content": "            addReplyStreamID(c,&startid);",
          "content_same": false
        },
        {
          "line": 3203,
          "old_api": null,
          "new_api": "lookupKeyWriteOrReply",
          "old_text": null,
          "new_text": "lookupKeyWriteOrReply(c,c->argv[1],shared.czero)",
          "old_line_content": "    stream *s = o->ptr;",
          "new_line_content": "    if ((o = lookupKeyWriteOrReply(c,c->argv[1],shared.czero)) == NULL",
          "content_same": false
        },
        {
          "line": 2692,
          "old_api": null,
          "new_api": "addReplyStreamID",
          "old_text": null,
          "new_text": "addReplyStreamID(c,&endid)",
          "old_line_content": "",
          "new_line_content": "            addReplyStreamID(c,&endid);",
          "content_same": false
        },
        {
          "line": 2181,
          "old_api": null,
          "new_api": "addReplyNullArray",
          "old_text": null,
          "new_text": "addReplyNullArray(c)",
          "old_line_content": "        }",
          "new_line_content": "            addReplyNullArray(c);",
          "content_same": false
        },
        {
          "line": 2693,
          "old_api": null,
          "new_api": "raxStop",
          "old_text": null,
          "new_text": "raxStop(&ri)",
          "old_line_content": "            /* Consumers with pending messages. */",
          "new_line_content": "            raxStop(&ri);",
          "content_same": false
        },
        {
          "line": 3204,
          "old_api": null,
          "new_api": "checkType",
          "old_text": null,
          "new_text": "checkType(c,o,OBJ_STREAM)",
          "old_line_content": "",
          "new_line_content": "        || checkType(c,o,OBJ_STREAM)) return;",
          "content_same": false
        },
        {
          "line": 2184,
          "old_api": null,
          "new_api": "blockForKeys",
          "old_text": null,
          "new_text": "blockForKeys(c, BLOCKED_STREAM, c->argv+streams_arg, streams_count,\n                     0, timeout, NULL, NULL, ids)",
          "old_line_content": "        /* If no COUNT is given and we block, set a relatively small count:",
          "new_line_content": "        blockForKeys(c, BLOCKED_STREAM, c->argv+streams_arg, streams_count,",
          "content_same": false
        },
        {
          "line": 2697,
          "old_api": null,
          "new_api": "raxSeek",
          "old_text": null,
          "new_text": "raxSeek(&ri,\"^\",NULL,0)",
          "old_line_content": "            size_t arraylen = 0;",
          "new_line_content": "            raxSeek(&ri,\"^\",NULL,0);",
          "content_same": false
        },
        {
          "line": 2704,
          "old_api": null,
          "new_api": "addReplyBulkCBuffer",
          "old_text": null,
          "new_text": "addReplyBulkCBuffer(c,ri.key,ri.key_len)",
          "old_line_content": "                arraylen++;",
          "new_line_content": "                addReplyBulkCBuffer(c,ri.key,ri.key_len);",
          "content_same": false
        },
        {
          "line": 2705,
          "old_api": null,
          "new_api": "raxSize",
          "old_text": null,
          "new_text": "raxSize(consumer->pel)",
          "old_line_content": "            }",
          "new_line_content": "                addReplyBulkLongLong(c,raxSize(consumer->pel));",
          "content_same": false
        },
        {
          "line": 3216,
          "old_api": null,
          "new_api": "streamParseStrictIDOrReply",
          "old_text": null,
          "new_text": "streamParseStrictIDOrReply(c,c->argv[j],&ids[j-2],0)",
          "old_line_content": "",
          "new_line_content": "        if (streamParseStrictIDOrReply(c,c->argv[j],&ids[j-2],0) != C_OK) goto cleanup;",
          "content_same": false
        },
        {
          "line": 2196,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(groupname)",
          "old_line_content": "            c->bpop.xread_group = groupname;",
          "new_line_content": "            incrRefCount(groupname);",
          "content_same": false
        },
        {
          "line": 2197,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(consumername)",
          "old_line_content": "            c->bpop.xread_consumer = consumername;",
          "new_line_content": "            incrRefCount(consumername);",
          "content_same": false
        },
        {
          "line": 2708,
          "old_api": null,
          "new_api": "setDeferredArrayLen",
          "old_text": null,
          "new_text": "setDeferredArrayLen(c,arraylen_ptr,arraylen)",
          "old_line_content": "        }",
          "new_line_content": "            setDeferredArrayLen(c,arraylen_ptr,arraylen);",
          "content_same": false
        },
        {
          "line": 2709,
          "old_api": null,
          "new_api": "raxStop",
          "old_text": null,
          "new_text": "raxStop(&ri)",
          "old_line_content": "    } else { /* <start>, <stop> and <count> provided, return actual pending entries (not just info) */",
          "new_line_content": "            raxStop(&ri);",
          "content_same": false
        },
        {
          "line": 3222,
          "old_api": null,
          "new_api": "streamDeleteItem",
          "old_text": null,
          "new_text": "streamDeleteItem(s,&ids[j-2])",
          "old_line_content": "",
          "new_line_content": "        deleted += streamDeleteItem(s,&ids[j-2]);",
          "content_same": false
        },
        {
          "line": 2714,
          "old_api": null,
          "new_api": "streamLookupConsumer",
          "old_text": null,
          "new_text": "streamLookupConsumer(group,consumername->ptr,SLC_NO_REFRESH)",
          "old_line_content": "            /* If a consumer name was mentioned but it does not exist, we can",
          "new_line_content": "            consumer = streamLookupConsumer(group,consumername->ptr,SLC_NO_REFRESH);",
          "content_same": false
        },
        {
          "line": 3227,
          "old_api": null,
          "new_api": "signalModifiedKey",
          "old_text": null,
          "new_text": "signalModifiedKey(c,c->db,c->argv[1])",
          "old_line_content": "        server.dirty += deleted;",
          "new_line_content": "        signalModifiedKey(c,c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 3228,
          "old_api": null,
          "new_api": "notifyKeyspaceEvent",
          "old_text": null,
          "new_text": "notifyKeyspaceEvent(NOTIFY_STREAM,\"xdel\",c->argv[1],c->db->id)",
          "old_line_content": "    }",
          "new_line_content": "        notifyKeyspaceEvent(NOTIFY_STREAM,\"xdel\",c->argv[1],c->db->id);",
          "content_same": false
        },
        {
          "line": 2719,
          "old_api": null,
          "new_api": "addReplyArrayLen",
          "old_text": null,
          "new_text": "addReplyArrayLen(c,0)",
          "old_line_content": "            }",
          "new_line_content": "                addReplyArrayLen(c,0);",
          "content_same": false
        },
        {
          "line": 3233,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(ids)",
          "old_line_content": "",
          "new_line_content": "    if (ids != static_ids) zfree(ids);",
          "content_same": false
        },
        {
          "line": 2210,
          "old_api": null,
          "new_api": "addReplyNullArray",
          "old_text": null,
          "new_text": "addReplyNullArray(c)",
          "old_line_content": "",
          "new_line_content": "    addReplyNullArray(c);",
          "content_same": false
        },
        {
          "line": 2218,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(ids)",
          "old_line_content": "}",
          "new_line_content": "    if (ids != static_ids) zfree(ids);",
          "content_same": false
        },
        {
          "line": 2219,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(groups)",
          "old_line_content": "",
          "new_line_content": "    zfree(groups);",
          "content_same": false
        },
        {
          "line": 2733,
          "old_api": null,
          "new_api": "raxSeek",
          "old_text": null,
          "new_text": "raxSeek(&ri,\">=\",startkey,sizeof(startkey))",
          "old_line_content": "        size_t arraylen = 0;",
          "new_line_content": "        raxSeek(&ri,\">=\",startkey,sizeof(startkey));",
          "content_same": false
        },
        {
          "line": 2734,
          "old_api": null,
          "new_api": "addReplyDeferredLen",
          "old_text": null,
          "new_text": "addReplyDeferredLen(c)",
          "old_line_content": "",
          "new_line_content": "        void *arraylen_ptr = addReplyDeferredLen(c);",
          "content_same": false
        },
        {
          "line": 2737,
          "old_api": null,
          "new_api": "memcmp",
          "old_text": null,
          "new_text": "memcmp(ri.key,endkey,ri.key_len)",
          "old_line_content": "",
          "new_line_content": "        while(count && raxNext(&ri) && memcmp(ri.key,endkey,ri.key_len) <= 0) {",
          "content_same": false
        },
        {
          "line": 2230,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(*nack))",
          "old_line_content": "    nack->delivery_count = 1;",
          "new_line_content": "    streamNACK *nack = zmalloc(sizeof(*nack));",
          "content_same": false
        },
        {
          "line": 2231,
          "old_api": null,
          "new_api": "mstime",
          "old_text": null,
          "new_text": "mstime()",
          "old_line_content": "    nack->consumer = consumer;",
          "new_line_content": "    nack->delivery_time = mstime();",
          "content_same": false
        },
        {
          "line": 2747,
          "old_api": null,
          "new_api": "addReplyArrayLen",
          "old_text": null,
          "new_text": "addReplyArrayLen(c,4)",
          "old_line_content": "            /* Entry ID. */",
          "new_line_content": "            addReplyArrayLen(c,4);",
          "content_same": false
        },
        {
          "line": 2239,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(na)",
          "old_line_content": "",
          "new_line_content": "    zfree(na);",
          "content_same": false
        },
        {
          "line": 2751,
          "old_api": null,
          "new_api": "streamDecodeID",
          "old_text": null,
          "new_text": "streamDecodeID(ri.key,&id)",
          "old_line_content": "",
          "new_line_content": "            streamDecodeID(ri.key,&id);",
          "content_same": false
        },
        {
          "line": 2752,
          "old_api": null,
          "new_api": "addReplyStreamID",
          "old_text": null,
          "new_text": "addReplyStreamID(c,&id)",
          "old_line_content": "            /* Consumer name. */",
          "new_line_content": "            addReplyStreamID(c,&id);",
          "content_same": false
        },
        {
          "line": 3264,
          "old_api": null,
          "new_api": "streamParseAddOrTrimArgsOrReply",
          "old_text": null,
          "new_text": "streamParseAddOrTrimArgsOrReply(c, &parsed_args, 0)",
          "old_line_content": "",
          "new_line_content": "    if (streamParseAddOrTrimArgsOrReply(c, &parsed_args, 0) < 0)",
          "content_same": false
        },
        {
          "line": 2755,
          "old_api": null,
          "new_api": "addReplyBulkCBuffer",
          "old_text": null,
          "new_text": "addReplyBulkCBuffer(c,nack->consumer->name,\n                                sdslen(nack->consumer->name))",
          "old_line_content": "",
          "new_line_content": "            addReplyBulkCBuffer(c,nack->consumer->name,",
          "content_same": false
        },
        {
          "line": 2756,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(nack->consumer->name)",
          "old_line_content": "            /* Milliseconds elapsed since last delivery. */",
          "new_line_content": "                                sdslen(nack->consumer->name));",
          "content_same": false
        },
        {
          "line": 3269,
          "old_api": null,
          "new_api": "lookupKeyWriteOrReply",
          "old_text": null,
          "new_text": "lookupKeyWriteOrReply(c,c->argv[1],shared.czero)",
          "old_line_content": "    stream *s = o->ptr;",
          "new_line_content": "    if ((o = lookupKeyWriteOrReply(c,c->argv[1],shared.czero)) == NULL",
          "content_same": false
        },
        {
          "line": 3270,
          "old_api": null,
          "new_api": "checkType",
          "old_text": null,
          "new_text": "checkType(c,o,OBJ_STREAM)",
          "old_line_content": "",
          "new_line_content": "        || checkType(c,o,OBJ_STREAM)) return;",
          "content_same": false
        },
        {
          "line": 2761,
          "old_api": null,
          "new_api": "addReplyLongLong",
          "old_text": null,
          "new_text": "addReplyLongLong(c,elapsed)",
          "old_line_content": "            /* Number of deliveries. */",
          "new_line_content": "            addReplyLongLong(c,elapsed);",
          "content_same": false
        },
        {
          "line": 2250,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(sc->name)",
          "old_line_content": "}",
          "new_line_content": "    sdsfree(sc->name);",
          "content_same": false
        },
        {
          "line": 2251,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(sc)",
          "old_line_content": "",
          "new_line_content": "    zfree(sc);",
          "content_same": false
        },
        {
          "line": 3276,
          "old_api": null,
          "new_api": "notifyKeyspaceEvent",
          "old_text": null,
          "new_text": "notifyKeyspaceEvent(NOTIFY_STREAM,\"xtrim\",c->argv[1],c->db->id)",
          "old_line_content": "            /* In case our trimming was limited (by LIMIT or by ~) we must",
          "new_line_content": "        notifyKeyspaceEvent(NOTIFY_STREAM,\"xtrim\",c->argv[1],c->db->id);",
          "content_same": false
        },
        {
          "line": 2766,
          "old_api": null,
          "new_api": "raxStop",
          "old_text": null,
          "new_text": "raxStop(&ri)",
          "old_line_content": "    }",
          "new_line_content": "        raxStop(&ri);",
          "content_same": false
        },
        {
          "line": 2767,
          "old_api": null,
          "new_api": "setDeferredArrayLen",
          "old_text": null,
          "new_text": "setDeferredArrayLen(c,arraylen_ptr,arraylen)",
          "old_line_content": "}",
          "new_line_content": "        setDeferredArrayLen(c,arraylen_ptr,arraylen);",
          "content_same": false
        },
        {
          "line": 2259,
          "old_api": null,
          "new_api": "raxNew",
          "old_text": null,
          "new_text": "raxNew()",
          "old_line_content": "        return NULL;",
          "new_line_content": "    if (s->cgroups == NULL) s->cgroups = raxNew();",
          "content_same": false
        },
        {
          "line": 2260,
          "old_api": null,
          "new_api": "raxFind",
          "old_text": null,
          "new_text": "raxFind(s->cgroups,(unsigned char*)name,namelen)",
          "old_line_content": "",
          "new_line_content": "    if (raxFind(s->cgroups,(unsigned char*)name,namelen) != raxNotFound)",
          "content_same": false
        },
        {
          "line": 3283,
          "old_api": null,
          "new_api": "streamRewriteApproxSpecifier",
          "old_text": null,
          "new_text": "streamRewriteApproxSpecifier(c,parsed_args.trim_strategy_arg_idx-1)",
          "old_line_content": "        }",
          "new_line_content": "            streamRewriteApproxSpecifier(c,parsed_args.trim_strategy_arg_idx-1);",
          "content_same": false
        },
        {
          "line": 3284,
          "old_api": null,
          "new_api": "streamRewriteTrimArgument",
          "old_text": null,
          "new_text": "streamRewriteTrimArgument(c,s,parsed_args.trim_strategy,parsed_args.trim_strategy_arg_idx)",
          "old_line_content": "",
          "new_line_content": "            streamRewriteTrimArgument(c,s,parsed_args.trim_strategy,parsed_args.trim_strategy_arg_idx);",
          "content_same": false
        },
        {
          "line": 2264,
          "old_api": null,
          "new_api": "raxNew",
          "old_text": null,
          "new_text": "raxNew()",
          "old_line_content": "    cg->last_id = *id;",
          "new_line_content": "    cg->pel = raxNew();",
          "content_same": false
        },
        {
          "line": 3288,
          "old_api": null,
          "new_api": "signalModifiedKey",
          "old_text": null,
          "new_text": "signalModifiedKey(c, c->db,c->argv[1])",
          "old_line_content": "    }",
          "new_line_content": "        signalModifiedKey(c, c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 2267,
          "old_api": null,
          "new_api": "raxInsert",
          "old_text": null,
          "new_text": "raxInsert(s->cgroups,(unsigned char*)name,namelen,cg,NULL)",
          "old_line_content": "}",
          "new_line_content": "    raxInsert(s->cgroups,(unsigned char*)name,namelen,cg,NULL);",
          "content_same": false
        },
        {
          "line": 3291,
          "old_api": null,
          "new_api": "addReplyLongLong",
          "old_text": null,
          "new_text": "addReplyLongLong(c,deleted)",
          "old_line_content": "",
          "new_line_content": "    addReplyLongLong(c,deleted);",
          "content_same": false
        },
        {
          "line": 2274,
          "old_api": null,
          "new_api": "raxFreeWithCallback",
          "old_text": null,
          "new_text": "raxFreeWithCallback(cg->consumers,(void(*)(void*))streamFreeConsumer)",
          "old_line_content": "}",
          "new_line_content": "    raxFreeWithCallback(cg->consumers,(void(*)(void*))streamFreeConsumer);",
          "content_same": false
        },
        {
          "line": 2275,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(cg)",
          "old_line_content": "",
          "new_line_content": "    zfree(cg);",
          "content_same": false
        },
        {
          "line": 2282,
          "old_api": null,
          "new_api": "raxFind",
          "old_text": null,
          "new_text": "raxFind(s->cgroups,(unsigned char*)groupname,\n                           sdslen(groupname))",
          "old_line_content": "    return (cg == raxNotFound) ? NULL : cg;",
          "new_line_content": "    streamCG *cg = raxFind(s->cgroups,(unsigned char*)groupname,",
          "content_same": false
        },
        {
          "line": 2283,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(groupname)",
          "old_line_content": "}",
          "new_line_content": "                           sdslen(groupname));",
          "content_same": false
        },
        {
          "line": 3308,
          "old_api": null,
          "new_api": "addReplySubcommandSyntaxError",
          "old_text": null,
          "new_text": "addReplySubcommandSyntaxError(c)",
          "old_line_content": "        }",
          "new_line_content": "            addReplySubcommandSyntaxError(c);",
          "content_same": false
        },
        {
          "line": 3313,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(optv[0]->ptr,\"full\")",
          "old_line_content": "            return;",
          "new_line_content": "        if (strcasecmp(optv[0]->ptr,\"full\")) {",
          "content_same": false
        },
        {
          "line": 3314,
          "old_api": null,
          "new_api": "addReplySubcommandSyntaxError",
          "old_text": null,
          "new_text": "addReplySubcommandSyntaxError(c)",
          "old_line_content": "        }",
          "new_line_content": "            addReplySubcommandSyntaxError(c);",
          "content_same": false
        },
        {
          "line": 2296,
          "old_api": null,
          "new_api": "raxTryInsert",
          "old_text": null,
          "new_text": "raxTryInsert(cg->consumers,(unsigned char*)name,\n                               sdslen(name),consumer,NULL)",
          "old_line_content": "    if (!success) {",
          "new_line_content": "    int success = raxTryInsert(cg->consumers,(unsigned char*)name,",
          "content_same": false
        },
        {
          "line": 3320,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(optv[1]->ptr,\"count\")",
          "old_line_content": "                return;",
          "new_line_content": "            if (strcasecmp(optv[1]->ptr,\"count\")) {",
          "content_same": false
        },
        {
          "line": 3321,
          "old_api": null,
          "new_api": "addReplySubcommandSyntaxError",
          "old_text": null,
          "new_text": "addReplySubcommandSyntaxError(c)",
          "old_line_content": "            }",
          "new_line_content": "                addReplySubcommandSyntaxError(c);",
          "content_same": false
        },
        {
          "line": 2299,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(consumer)",
          "old_line_content": "    }",
          "new_line_content": "        zfree(consumer);",
          "content_same": false
        },
        {
          "line": 3324,
          "old_api": null,
          "new_api": "getLongLongFromObjectOrReply",
          "old_text": null,
          "new_text": "getLongLongFromObjectOrReply(c,optv[2],&count,NULL)",
          "old_line_content": "            if (count < 0) count = 10;",
          "new_line_content": "            if (getLongLongFromObjectOrReply(c,optv[2],&count,NULL) == C_ERR)",
          "content_same": false
        },
        {
          "line": 2303,
          "old_api": null,
          "new_api": "raxNew",
          "old_text": null,
          "new_text": "raxNew()",
          "old_line_content": "    if (dirty) server.dirty++;",
          "new_line_content": "    consumer->pel = raxNew();",
          "content_same": false
        },
        {
          "line": 2306,
          "old_api": null,
          "new_api": "notifyKeyspaceEvent",
          "old_text": null,
          "new_text": "notifyKeyspaceEvent(NOTIFY_STREAM,\"xgroup-createconsumer\",key,dbid)",
          "old_line_content": "}",
          "new_line_content": "    if (notify) notifyKeyspaceEvent(NOTIFY_STREAM,\"xgroup-createconsumer\",key,dbid);",
          "content_same": false
        },
        {
          "line": 3337,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c,\"last-generated-id\")",
          "old_line_content": "",
          "new_line_content": "    addReplyBulkCString(c,\"last-generated-id\");",
          "content_same": false
        },
        {
          "line": 3338,
          "old_api": null,
          "new_api": "addReplyStreamID",
          "old_text": null,
          "new_text": "addReplyStreamID(c,&s->last_id)",
          "old_line_content": "    if (!full) {",
          "new_line_content": "    addReplyStreamID(c,&s->last_id);",
          "content_same": false
        },
        {
          "line": 2315,
          "old_api": null,
          "new_api": "raxFind",
          "old_text": null,
          "new_text": "raxFind(cg->consumers,(unsigned char*)name,\n                                       sdslen(name))",
          "old_line_content": "    if (consumer == raxNotFound) return NULL;",
          "new_line_content": "    streamConsumer *consumer = raxFind(cg->consumers,(unsigned char*)name,",
          "content_same": false
        },
        {
          "line": 2318,
          "old_api": null,
          "new_api": "mstime",
          "old_text": null,
          "new_text": "mstime()",
          "old_line_content": "}",
          "new_line_content": "    if (refresh) consumer->seen_time = mstime();",
          "content_same": false
        },
        {
          "line": 3343,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c,\"groups\")",
          "old_line_content": "",
          "new_line_content": "        addReplyBulkCString(c,\"groups\");",
          "content_same": false
        },
        {
          "line": 3344,
          "old_api": null,
          "new_api": "raxSize",
          "old_text": null,
          "new_text": "raxSize(s->cgroups)",
          "old_line_content": "        /* To emit the first/last entry we use streamReplyWithRange(). */",
          "new_line_content": "        addReplyLongLong(c,s->cgroups ? raxSize(s->cgroups) : 0);",
          "content_same": false
        },
        {
          "line": 2839,
          "old_api": null,
          "new_api": "lookupKeyRead",
          "old_text": null,
          "new_text": "lookupKeyRead(c->db,c->argv[1])",
          "old_line_content": "    long long retrycount = -1;   /* -1 means RETRYCOUNT option not given. */",
          "new_line_content": "    robj *o = lookupKeyRead(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 2328,
          "old_api": null,
          "new_api": "raxSeek",
          "old_text": null,
          "new_text": "raxSeek(&ri,\"^\",NULL,0)",
          "old_line_content": "        streamNACK *nack = ri.data;",
          "new_line_content": "    raxSeek(&ri,\"^\",NULL,0);",
          "content_same": false
        },
        {
          "line": 3351,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c,\"first-entry\")",
          "old_line_content": "                                       STREAM_RWR_RAWENTRIES,NULL);",
          "new_line_content": "        addReplyBulkCString(c,\"first-entry\");",
          "content_same": false
        },
        {
          "line": 2331,
          "old_api": null,
          "new_api": "raxRemove",
          "old_text": null,
          "new_text": "raxRemove(cg->pel,ri.key,ri.key_len,NULL)",
          "old_line_content": "    }",
          "new_line_content": "        raxRemove(cg->pel,ri.key,ri.key_len,NULL);",
          "content_same": false
        },
        {
          "line": 3355,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c,\"last-entry\")",
          "old_line_content": "                                       STREAM_RWR_RAWENTRIES,NULL);",
          "new_line_content": "        addReplyBulkCString(c,\"last-entry\");",
          "content_same": false
        },
        {
          "line": 2334,
          "old_api": null,
          "new_api": "raxStop",
          "old_text": null,
          "new_text": "raxStop(&ri)",
          "old_line_content": "    /* Deallocate the consumer. */",
          "new_line_content": "    raxStop(&ri);",
          "content_same": false
        },
        {
          "line": 2847,
          "old_api": null,
          "new_api": "checkType",
          "old_text": null,
          "new_text": "checkType(c,o,OBJ_STREAM)",
          "old_line_content": "    }",
          "new_line_content": "        if (checkType(c,o,OBJ_STREAM)) return; /* Type error. */",
          "content_same": false
        },
        {
          "line": 2848,
          "old_api": null,
          "new_api": "streamLookupCG",
          "old_text": null,
          "new_text": "streamLookupCG(o->ptr,c->argv[2]->ptr)",
          "old_line_content": "",
          "new_line_content": "        group = streamLookupCG(o->ptr,c->argv[2]->ptr);",
          "content_same": false
        },
        {
          "line": 3358,
          "old_api": null,
          "new_api": "addReplyNull",
          "old_text": null,
          "new_text": "addReplyNull(c)",
          "old_line_content": "        /* XINFO STREAM <key> FULL [COUNT <count>] */",
          "new_line_content": "        if (!emitted) addReplyNull(c);",
          "content_same": false
        },
        {
          "line": 2338,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(consumer->name)",
          "old_line_content": "}",
          "new_line_content": "              sdslen(consumer->name),NULL);",
          "content_same": false
        },
        {
          "line": 2339,
          "old_api": null,
          "new_api": "streamFreeConsumer",
          "old_text": null,
          "new_text": "streamFreeConsumer(consumer)",
          "old_line_content": "",
          "new_line_content": "    streamFreeConsumer(consumer);",
          "content_same": false
        },
        {
          "line": 3363,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c,\"entries\")",
          "old_line_content": "",
          "new_line_content": "        addReplyBulkCString(c,\"entries\");",
          "content_same": false
        },
        {
          "line": 3364,
          "old_api": null,
          "new_api": "streamReplyWithRange",
          "old_text": null,
          "new_text": "streamReplyWithRange(c,s,NULL,NULL,count,0,NULL,NULL,0,NULL)",
          "old_line_content": "        /* Consumer groups */",
          "new_line_content": "        streamReplyWithRange(c,s,NULL,NULL,count,0,NULL,NULL,0,NULL);",
          "content_same": false
        },
        {
          "line": 2854,
          "old_api": null,
          "new_api": "addReplyErrorFormat",
          "old_text": null,
          "new_text": "addReplyErrorFormat(c,\"-NOGROUP No such key '%s' or \"\n                              \"consumer group '%s'\", (char*)c->argv[1]->ptr,\n                              (char*)c->argv[2]->ptr)",
          "old_line_content": "                              (char*)c->argv[2]->ptr);",
          "new_line_content": "        addReplyErrorFormat(c,\"-NOGROUP No such key '%s' or \"",
          "content_same": false
        },
        {
          "line": 2860,
          "old_api": null,
          "new_api": "getLongLongFromObjectOrReply",
          "old_text": null,
          "new_text": "getLongLongFromObjectOrReply(c,c->argv[4],&minidle,\n        \"Invalid min-idle-time argument for XCLAIM\")",
          "old_line_content": "        != C_OK) return;",
          "new_line_content": "    if (getLongLongFromObjectOrReply(c,c->argv[4],&minidle,",
          "content_same": false
        },
        {
          "line": 3374,
          "old_api": null,
          "new_api": "raxSeek",
          "old_text": null,
          "new_text": "raxSeek(&ri_cgroups,\"^\",NULL,0)",
          "old_line_content": "                streamCG *cg = ri_cgroups.data;",
          "new_line_content": "            raxSeek(&ri_cgroups,\"^\",NULL,0);",
          "content_same": false
        },
        {
          "line": 3377,
          "old_api": null,
          "new_api": "addReplyMapLen",
          "old_text": null,
          "new_text": "addReplyMapLen(c,5)",
          "old_line_content": "                /* Name */",
          "new_line_content": "                addReplyMapLen(c,5);",
          "content_same": false
        },
        {
          "line": 3380,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c,\"name\")",
          "old_line_content": "",
          "new_line_content": "                addReplyBulkCString(c,\"name\");",
          "content_same": false
        },
        {
          "line": 3381,
          "old_api": null,
          "new_api": "addReplyBulkCBuffer",
          "old_text": null,
          "new_text": "addReplyBulkCBuffer(c,ri_cgroups.key,ri_cgroups.key_len)",
          "old_line_content": "                /* Last delivered ID */",
          "new_line_content": "                addReplyBulkCBuffer(c,ri_cgroups.key,ri_cgroups.key_len);",
          "content_same": false
        },
        {
          "line": 1847,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(idarg)",
          "old_line_content": "",
          "new_line_content": "        decrRefCount(idarg);",
          "content_same": false
        },
        {
          "line": 3384,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c,\"last-delivered-id\")",
          "old_line_content": "",
          "new_line_content": "                addReplyBulkCString(c,\"last-delivered-id\");",
          "content_same": false
        },
        {
          "line": 3385,
          "old_api": null,
          "new_api": "addReplyStreamID",
          "old_text": null,
          "new_text": "addReplyStreamID(c,&cg->last_id)",
          "old_line_content": "                /* Group PEL count */",
          "new_line_content": "                addReplyStreamID(c,&cg->last_id);",
          "content_same": false
        },
        {
          "line": 2362,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[5]->ptr,\"MKSTREAM\")",
          "old_line_content": "            return;",
          "new_line_content": "        if (strcasecmp(c->argv[5]->ptr,\"MKSTREAM\")) {",
          "content_same": false
        },
        {
          "line": 2363,
          "old_api": null,
          "new_api": "addReplySubcommandSyntaxError",
          "old_text": null,
          "new_text": "addReplySubcommandSyntaxError(c)",
          "old_line_content": "        }",
          "new_line_content": "            addReplySubcommandSyntaxError(c);",
          "content_same": false
        },
        {
          "line": 2876,
          "old_api": null,
          "new_api": "streamParseStrictIDOrReply",
          "old_text": null,
          "new_text": "streamParseStrictIDOrReply(NULL,c->argv[j],&ids[j-5],0)",
          "old_line_content": "    int last_id_arg = j-1; /* Next time we iterate the IDs we now the range. */",
          "new_line_content": "        if (streamParseStrictIDOrReply(NULL,c->argv[j],&ids[j-5],0) != C_OK) break;",
          "content_same": false
        },
        {
          "line": 3388,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c,\"pel-count\")",
          "old_line_content": "",
          "new_line_content": "                addReplyBulkCString(c,\"pel-count\");",
          "content_same": false
        },
        {
          "line": 3389,
          "old_api": null,
          "new_api": "raxSize",
          "old_text": null,
          "new_text": "raxSize(cg->pel)",
          "old_line_content": "                /* Group PEL */",
          "new_line_content": "                addReplyLongLong(c,raxSize(cg->pel));",
          "content_same": false
        },
        {
          "line": 1852,
          "old_api": null,
          "new_api": "signalKeyAsReady",
          "old_text": null,
          "new_text": "signalKeyAsReady(c->db, c->argv[1], OBJ_STREAM)",
          "old_line_content": "",
          "new_line_content": "    signalKeyAsReady(c->db, c->argv[1], OBJ_STREAM);",
          "content_same": false
        },
        {
          "line": 2882,
          "old_api": null,
          "new_api": "mstime",
          "old_text": null,
          "new_text": "mstime()",
          "old_line_content": "    int propagate_last_id = 0;",
          "new_line_content": "    mstime_t now = mstime();",
          "content_same": false
        },
        {
          "line": 3397,
          "old_api": null,
          "new_api": "raxSeek",
          "old_text": null,
          "new_text": "raxSeek(&ri_cg_pel,\"^\",NULL,0)",
          "old_line_content": "                    streamNACK *nack = ri_cg_pel.data;",
          "new_line_content": "                raxSeek(&ri_cg_pel,\"^\",NULL,0);",
          "content_same": false
        },
        {
          "line": 2374,
          "old_api": null,
          "new_api": "checkType",
          "old_text": null,
          "new_text": "checkType(c,o,OBJ_STREAM)",
          "old_line_content": "        }",
          "new_line_content": "            if (checkType(c,o,OBJ_STREAM)) return;",
          "content_same": false
        },
        {
          "line": 3400,
          "old_api": null,
          "new_api": "addReplyArrayLen",
          "old_text": null,
          "new_text": "addReplyArrayLen(c,4)",
          "old_line_content": "                    /* Entry ID. */",
          "new_line_content": "                    addReplyArrayLen(c,4);",
          "content_same": false
        },
        {
          "line": 3404,
          "old_api": null,
          "new_api": "streamDecodeID",
          "old_text": null,
          "new_text": "streamDecodeID(ri_cg_pel.key,&id)",
          "old_line_content": "",
          "new_line_content": "                    streamDecodeID(ri_cg_pel.key,&id);",
          "content_same": false
        },
        {
          "line": 3405,
          "old_api": null,
          "new_api": "addReplyStreamID",
          "old_text": null,
          "new_text": "addReplyStreamID(c,&id)",
          "old_line_content": "                    /* Consumer name. */",
          "new_line_content": "                    addReplyStreamID(c,&id);",
          "content_same": false
        },
        {
          "line": 2894,
          "old_api": null,
          "new_api": "getLongLongFromObjectOrReply",
          "old_text": null,
          "new_text": "getLongLongFromObjectOrReply(c,c->argv[j],&deliverytime,\n                \"Invalid IDLE option argument for XCLAIM\")",
          "old_line_content": "                != C_OK) goto cleanup;",
          "new_line_content": "            if (getLongLongFromObjectOrReply(c,c->argv[j],&deliverytime,",
          "content_same": false
        },
        {
          "line": 2384,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\n                \"The XGROUP subcommand requires the key to exist. \"\n                \"Note that for CREATE you may want to use the MKSTREAM \"\n                \"option to create an empty stream automatically.\")",
          "old_line_content": "                \"Note that for CREATE you may want to use the MKSTREAM \"",
          "new_line_content": "            addReplyError(c,",
          "content_same": false
        },
        {
          "line": 3409,
          "old_api": null,
          "new_api": "addReplyBulkCBuffer",
          "old_text": null,
          "new_text": "addReplyBulkCBuffer(c,nack->consumer->name,\n                                        sdslen(nack->consumer->name))",
          "old_line_content": "",
          "new_line_content": "                    addReplyBulkCBuffer(c,nack->consumer->name,",
          "content_same": false
        },
        {
          "line": 3410,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(nack->consumer->name)",
          "old_line_content": "                    /* Last delivery. */",
          "new_line_content": "                                        sdslen(nack->consumer->name));",
          "content_same": false
        },
        {
          "line": 1874,
          "old_api": null,
          "new_api": "streamIncrID",
          "old_text": null,
          "new_text": "streamIncrID(&startid)",
          "old_line_content": "        return;",
          "new_line_content": "    if (startex && streamIncrID(&startid) != C_OK) {",
          "content_same": false
        },
        {
          "line": 2900,
          "old_api": null,
          "new_api": "getLongLongFromObjectOrReply",
          "old_text": null,
          "new_text": "getLongLongFromObjectOrReply(c,c->argv[j],&deliverytime,\n                \"Invalid TIME option argument for XCLAIM\")",
          "old_line_content": "                != C_OK) goto cleanup;",
          "new_line_content": "            if (getLongLongFromObjectOrReply(c,c->argv[j],&deliverytime,",
          "content_same": false
        },
        {
          "line": 3413,
          "old_api": null,
          "new_api": "addReplyLongLong",
          "old_text": null,
          "new_text": "addReplyLongLong(c,nack->delivery_time)",
          "old_line_content": "                    /* Number of deliveries. */",
          "new_line_content": "                    addReplyLongLong(c,nack->delivery_time);",
          "content_same": false
        },
        {
          "line": 1875,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"invalid start ID for the interval\")",
          "old_line_content": "    }",
          "new_line_content": "        addReplyError(c,\"invalid start ID for the interval\");",
          "content_same": false
        },
        {
          "line": 3416,
          "old_api": null,
          "new_api": "addReplyLongLong",
          "old_text": null,
          "new_text": "addReplyLongLong(c,nack->delivery_count)",
          "old_line_content": "                    arraylen_cg_pel++;",
          "new_line_content": "                    addReplyLongLong(c,nack->delivery_count);",
          "content_same": false
        },
        {
          "line": 2905,
          "old_api": null,
          "new_api": "getLongLongFromObjectOrReply",
          "old_text": null,
          "new_text": "getLongLongFromObjectOrReply(c,c->argv[j],&retrycount,\n                \"Invalid RETRYCOUNT option argument for XCLAIM\")",
          "old_line_content": "                != C_OK) goto cleanup;",
          "new_line_content": "            if (getLongLongFromObjectOrReply(c,c->argv[j],&retrycount,",
          "content_same": false
        },
        {
          "line": 2394,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(opt,\"CREATECONSUMER\")",
          "old_line_content": "        {",
          "new_line_content": "             !strcasecmp(opt,\"CREATECONSUMER\") ||",
          "content_same": false
        },
        {
          "line": 1880,
          "old_api": null,
          "new_api": "streamDecrID",
          "old_text": null,
          "new_text": "streamDecrID(&endid)",
          "old_line_content": "        return;",
          "new_line_content": "    if (endex && streamDecrID(&endid) != C_OK) {",
          "content_same": false
        },
        {
          "line": 3420,
          "old_api": null,
          "new_api": "setDeferredArrayLen",
          "old_text": null,
          "new_text": "setDeferredArrayLen(c,arrayptr_cg_pel,arraylen_cg_pel)",
          "old_line_content": "",
          "new_line_content": "                setDeferredArrayLen(c,arrayptr_cg_pel,arraylen_cg_pel);",
          "content_same": false
        },
        {
          "line": 2397,
          "old_api": null,
          "new_api": "addReplyErrorFormat",
          "old_text": null,
          "new_text": "addReplyErrorFormat(c, \"-NOGROUP No such consumer group '%s' \"\n                                   \"for key name '%s'\",\n                                   (char*)grpname, (char*)c->argv[2]->ptr)",
          "old_line_content": "                                   (char*)grpname, (char*)c->argv[2]->ptr);",
          "new_line_content": "            addReplyErrorFormat(c, \"-NOGROUP No such consumer group '%s' \"",
          "content_same": false
        },
        {
          "line": 3421,
          "old_api": null,
          "new_api": "raxStop",
          "old_text": null,
          "new_text": "raxStop(&ri_cg_pel)",
          "old_line_content": "                /* Consumers */",
          "new_line_content": "                raxStop(&ri_cg_pel);",
          "content_same": false
        },
        {
          "line": 1881,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"invalid end ID for the interval\")",
          "old_line_content": "    }",
          "new_line_content": "        addReplyError(c,\"invalid end ID for the interval\");",
          "content_same": false
        },
        {
          "line": 2912,
          "old_api": null,
          "new_api": "addReplyErrorFormat",
          "old_text": null,
          "new_text": "addReplyErrorFormat(c,\"Unrecognized XCLAIM option '%s'\",opt)",
          "old_line_content": "        }",
          "new_line_content": "            addReplyErrorFormat(c,\"Unrecognized XCLAIM option '%s'\",opt);",
          "content_same": false
        },
        {
          "line": 3424,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c,\"consumers\")",
          "old_line_content": "                raxIterator ri_consumers;",
          "new_line_content": "                addReplyBulkCString(c,\"consumers\");",
          "content_same": false
        },
        {
          "line": 1889,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[j]->ptr,\"COUNT\")",
          "old_line_content": "                    != C_OK) return;",
          "new_line_content": "            if (strcasecmp(c->argv[j]->ptr,\"COUNT\") == 0 && additional >= 1) {",
          "content_same": false
        },
        {
          "line": 1890,
          "old_api": null,
          "new_api": "getLongLongFromObjectOrReply",
          "old_text": null,
          "new_text": "getLongLongFromObjectOrReply(c,c->argv[j+1],&count,NULL)",
          "old_line_content": "                if (count < 0) count = 0;",
          "new_line_content": "                if (getLongLongFromObjectOrReply(c,c->argv[j+1],&count,NULL)",
          "content_same": false
        },
        {
          "line": 3428,
          "old_api": null,
          "new_api": "raxSeek",
          "old_text": null,
          "new_text": "raxSeek(&ri_consumers,\"^\",NULL,0)",
          "old_line_content": "                    streamConsumer *consumer = ri_consumers.data;",
          "new_line_content": "                raxSeek(&ri_consumers,\"^\",NULL,0);",
          "content_same": false
        },
        {
          "line": 2405,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(opt,\"HELP\")",
          "old_line_content": "\"CREATE <key> <groupname> <id|$> [option]\",",
          "new_line_content": "    if (c->argc == 2 && !strcasecmp(opt,\"HELP\")) {",
          "content_same": false
        },
        {
          "line": 2917,
          "old_api": null,
          "new_api": "streamCompareID",
          "old_text": null,
          "new_text": "streamCompareID(&last_id,&group->last_id)",
          "old_line_content": "        propagate_last_id = 1;",
          "new_line_content": "    if (streamCompareID(&last_id,&group->last_id) > 0) {",
          "content_same": false
        },
        {
          "line": 3431,
          "old_api": null,
          "new_api": "addReplyMapLen",
          "old_text": null,
          "new_text": "addReplyMapLen(c,4)",
          "old_line_content": "                    /* Consumer name */",
          "new_line_content": "                    addReplyMapLen(c,4);",
          "content_same": false
        },
        {
          "line": 1895,
          "old_api": null,
          "new_api": "addReplyErrorObject",
          "old_text": null,
          "new_text": "addReplyErrorObject(c,shared.syntaxerr)",
          "old_line_content": "            }",
          "new_line_content": "                addReplyErrorObject(c,shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 3434,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c,\"name\")",
          "old_line_content": "",
          "new_line_content": "                    addReplyBulkCString(c,\"name\");",
          "content_same": false
        },
        {
          "line": 3435,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(consumer->name)",
          "old_line_content": "                    /* Seen-time */",
          "new_line_content": "                    addReplyBulkCBuffer(c,consumer->name,sdslen(consumer->name));",
          "content_same": false
        },
        {
          "line": 3438,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c,\"seen-time\")",
          "old_line_content": "",
          "new_line_content": "                    addReplyBulkCString(c,\"seen-time\");",
          "content_same": false
        },
        {
          "line": 3439,
          "old_api": null,
          "new_api": "addReplyLongLong",
          "old_text": null,
          "new_text": "addReplyLongLong(c,consumer->seen_time)",
          "old_line_content": "                    /* Consumer PEL count */",
          "new_line_content": "                    addReplyLongLong(c,consumer->seen_time);",
          "content_same": false
        },
        {
          "line": 1902,
          "old_api": null,
          "new_api": "lookupKeyReadOrReply",
          "old_text": null,
          "new_text": "lookupKeyReadOrReply(c,c->argv[1],shared.emptyarray)",
          "old_line_content": "",
          "new_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.emptyarray)) == NULL ||",
          "content_same": false
        },
        {
          "line": 1903,
          "old_api": null,
          "new_api": "checkType",
          "old_text": null,
          "new_text": "checkType(c,o,OBJ_STREAM)",
          "old_line_content": "    s = o->ptr;",
          "new_line_content": "         checkType(c,o,OBJ_STREAM)) return;",
          "content_same": false
        },
        {
          "line": 3442,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c,\"pel-count\")",
          "old_line_content": "",
          "new_line_content": "                    addReplyBulkCString(c,\"pel-count\");",
          "content_same": false
        },
        {
          "line": 3443,
          "old_api": null,
          "new_api": "raxSize",
          "old_text": null,
          "new_text": "raxSize(consumer->pel)",
          "old_line_content": "                    /* Consumer PEL */",
          "new_line_content": "                    addReplyLongLong(c,raxSize(consumer->pel));",
          "content_same": false
        },
        {
          "line": 1908,
          "old_api": null,
          "new_api": "addReplyNullArray",
          "old_text": null,
          "new_text": "addReplyNullArray(c)",
          "old_line_content": "        if (count == -1) count = 0;",
          "new_line_content": "        addReplyNullArray(c);",
          "content_same": false
        },
        {
          "line": 2421,
          "old_api": null,
          "new_api": "addReplyHelp",
          "old_text": null,
          "new_text": "addReplyHelp(c, help)",
          "old_line_content": "        streamID id;",
          "new_line_content": "        addReplyHelp(c, help);",
          "content_same": false
        },
        {
          "line": 1911,
          "old_api": null,
          "new_api": "streamReplyWithRange",
          "old_text": null,
          "new_text": "streamReplyWithRange(c,s,&startid,&endid,count,rev,NULL,NULL,0,NULL)",
          "old_line_content": "}",
          "new_line_content": "        streamReplyWithRange(c,s,&startid,&endid,count,rev,NULL,NULL,0,NULL);",
          "content_same": false
        },
        {
          "line": 2424,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(c->argv[4]->ptr,\"$\")",
          "old_line_content": "                id = s->last_id;",
          "new_line_content": "        if (!strcmp(c->argv[4]->ptr,\"$\")) {",
          "content_same": false
        },
        {
          "line": 3451,
          "old_api": null,
          "new_api": "raxSeek",
          "old_text": null,
          "new_text": "raxSeek(&ri_cpel,\"^\",NULL,0)",
          "old_line_content": "                        streamNACK *nack = ri_cpel.data;",
          "new_line_content": "                    raxSeek(&ri_cpel,\"^\",NULL,0);",
          "content_same": false
        },
        {
          "line": 2940,
          "old_api": null,
          "new_api": "addReplyDeferredLen",
          "old_text": null,
          "new_text": "addReplyDeferredLen(c)",
          "old_line_content": "    sds name = c->argv[3]->ptr;",
          "new_line_content": "    void *arraylenptr = addReplyDeferredLen(c);",
          "content_same": false
        },
        {
          "line": 1917,
          "old_api": null,
          "new_api": "xrangeGenericCommand",
          "old_text": null,
          "new_text": "xrangeGenericCommand(c,0)",
          "old_line_content": "",
          "new_line_content": "    xrangeGenericCommand(c,0);",
          "content_same": false
        },
        {
          "line": 3454,
          "old_api": null,
          "new_api": "addReplyArrayLen",
          "old_text": null,
          "new_text": "addReplyArrayLen(c,3)",
          "old_line_content": "                        /* Entry ID. */",
          "new_line_content": "                        addReplyArrayLen(c,3);",
          "content_same": false
        },
        {
          "line": 2431,
          "old_api": null,
          "new_api": "streamParseStrictIDOrReply",
          "old_text": null,
          "new_text": "streamParseStrictIDOrReply(c,c->argv[4],&id,0)",
          "old_line_content": "        }",
          "new_line_content": "        } else if (streamParseStrictIDOrReply(c,c->argv[4],&id,0) != C_OK) {",
          "content_same": false
        },
        {
          "line": 2946,
          "old_api": null,
          "new_api": "streamEncodeID",
          "old_text": null,
          "new_text": "streamEncodeID(buf,&id)",
          "old_line_content": "        /* Lookup the ID in the group PEL. */",
          "new_line_content": "        streamEncodeID(buf,&id);",
          "content_same": false
        },
        {
          "line": 3458,
          "old_api": null,
          "new_api": "streamDecodeID",
          "old_text": null,
          "new_text": "streamDecodeID(ri_cpel.key,&id)",
          "old_line_content": "",
          "new_line_content": "                        streamDecodeID(ri_cpel.key,&id);",
          "content_same": false
        },
        {
          "line": 3459,
          "old_api": null,
          "new_api": "addReplyStreamID",
          "old_text": null,
          "new_text": "addReplyStreamID(c,&id)",
          "old_line_content": "                        /* Last delivery. */",
          "new_line_content": "                        addReplyStreamID(c,&id);",
          "content_same": false
        },
        {
          "line": 2949,
          "old_api": null,
          "new_api": "raxFind",
          "old_text": null,
          "new_text": "raxFind(group->pel,buf,sizeof(buf))",
          "old_line_content": "        /* If FORCE is passed, let's check if at least the entry",
          "new_line_content": "        streamNACK *nack = raxFind(group->pel,buf,sizeof(buf));",
          "content_same": false
        },
        {
          "line": 2438,
          "old_api": null,
          "new_api": "createStreamObject",
          "old_text": null,
          "new_text": "createStreamObject()",
          "old_line_content": "            s = o->ptr;",
          "new_line_content": "            o = createStreamObject();",
          "content_same": false
        },
        {
          "line": 3462,
          "old_api": null,
          "new_api": "addReplyLongLong",
          "old_text": null,
          "new_text": "addReplyLongLong(c,nack->delivery_time)",
          "old_line_content": "                        /* Number of deliveries. */",
          "new_line_content": "                        addReplyLongLong(c,nack->delivery_time);",
          "content_same": false
        },
        {
          "line": 1922,
          "old_api": null,
          "new_api": "xrangeGenericCommand",
          "old_text": null,
          "new_text": "xrangeGenericCommand(c,1)",
          "old_line_content": "",
          "new_line_content": "    xrangeGenericCommand(c,1);",
          "content_same": false
        },
        {
          "line": 2441,
          "old_api": null,
          "new_api": "signalModifiedKey",
          "old_text": null,
          "new_text": "signalModifiedKey(c,c->db,c->argv[2])",
          "old_line_content": "",
          "new_line_content": "            signalModifiedKey(c,c->db,c->argv[2]);",
          "content_same": false
        },
        {
          "line": 3465,
          "old_api": null,
          "new_api": "addReplyLongLong",
          "old_text": null,
          "new_text": "addReplyLongLong(c,nack->delivery_count)",
          "old_line_content": "                        arraylen_cpel++;",
          "new_line_content": "                        addReplyLongLong(c,nack->delivery_count);",
          "content_same": false
        },
        {
          "line": 1928,
          "old_api": null,
          "new_api": "lookupKeyReadOrReply",
          "old_text": null,
          "new_text": "lookupKeyReadOrReply(c,c->argv[1],shared.czero)",
          "old_line_content": "    stream *s = o->ptr;",
          "new_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.czero)) == NULL",
          "content_same": false
        },
        {
          "line": 1931,
          "old_api": null,
          "new_api": "addReplyLongLong",
          "old_text": null,
          "new_text": "addReplyLongLong(c,s->length)",
          "old_line_content": "",
          "new_line_content": "    addReplyLongLong(c,s->length);",
          "content_same": false
        },
        {
          "line": 3469,
          "old_api": null,
          "new_api": "setDeferredArrayLen",
          "old_text": null,
          "new_text": "setDeferredArrayLen(c,arrayptr_cpel,arraylen_cpel)",
          "old_line_content": "                }",
          "new_line_content": "                    setDeferredArrayLen(c,arrayptr_cpel,arraylen_cpel);",
          "content_same": false
        },
        {
          "line": 2958,
          "old_api": null,
          "new_api": "streamIteratorStart",
          "old_text": null,
          "new_text": "streamIteratorStart(&myiterator,o->ptr,&id,&id,0)",
          "old_line_content": "            int found = 0;",
          "new_line_content": "            streamIteratorStart(&myiterator,o->ptr,&id,&id,0);",
          "content_same": false
        },
        {
          "line": 2448,
          "old_api": null,
          "new_api": "notifyKeyspaceEvent",
          "old_text": null,
          "new_text": "notifyKeyspaceEvent(NOTIFY_STREAM,\"xgroup-create\",\n                                c->argv[2],c->db->id)",
          "old_line_content": "        } else {",
          "new_line_content": "            notifyKeyspaceEvent(NOTIFY_STREAM,\"xgroup-create\",",
          "content_same": false
        },
        {
          "line": 2962,
          "old_api": null,
          "new_api": "streamIteratorGetID",
          "old_text": null,
          "new_text": "streamIteratorGetID(&myiterator,&item_id,&numfields)",
          "old_line_content": "",
          "new_line_content": "            if (streamIteratorGetID(&myiterator,&item_id,&numfields)) found = 1;",
          "content_same": false
        },
        {
          "line": 2963,
          "old_api": null,
          "new_api": "streamIteratorStop",
          "old_text": null,
          "new_text": "streamIteratorStop(&myiterator)",
          "old_line_content": "            /* Item must exist for us to create a NACK for it. */",
          "new_line_content": "            streamIteratorStop(&myiterator);",
          "content_same": false
        },
        {
          "line": 3474,
          "old_api": null,
          "new_api": "raxStop",
          "old_text": null,
          "new_text": "raxStop(&ri_cgroups)",
          "old_line_content": "    }",
          "new_line_content": "            raxStop(&ri_cgroups);",
          "content_same": false
        },
        {
          "line": 2457,
          "old_api": null,
          "new_api": "streamParseIDOrReply",
          "old_text": null,
          "new_text": "streamParseIDOrReply(c,c->argv[4],&id,0)",
          "old_line_content": "        }",
          "new_line_content": "        } else if (streamParseIDOrReply(c,c->argv[4],&id,0) != C_OK) {",
          "content_same": false
        },
        {
          "line": 2969,
          "old_api": null,
          "new_api": "streamCreateNACK",
          "old_text": null,
          "new_text": "streamCreateNACK(NULL)",
          "old_line_content": "        }",
          "new_line_content": "            nack = streamCreateNACK(NULL);",
          "content_same": false
        },
        {
          "line": 2970,
          "old_api": null,
          "new_api": "raxInsert",
          "old_text": null,
          "new_text": "raxInsert(group->pel,buf,sizeof(buf),nack,NULL)",
          "old_line_content": "",
          "new_line_content": "            raxInsert(group->pel,buf,sizeof(buf),nack,NULL);",
          "content_same": false
        },
        {
          "line": 2463,
          "old_api": null,
          "new_api": "notifyKeyspaceEvent",
          "old_text": null,
          "new_text": "notifyKeyspaceEvent(NOTIFY_STREAM,\"xgroup-setid\",c->argv[2],c->db->id)",
          "old_line_content": "        if (cg) {",
          "new_line_content": "        notifyKeyspaceEvent(NOTIFY_STREAM,\"xgroup-setid\",c->argv[2],c->db->id);",
          "content_same": false
        },
        {
          "line": 1951,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(c->argv[0]->ptr)",
          "old_line_content": "    robj *consumername = NULL;",
          "new_line_content": "    int xreadgroup = sdslen(c->argv[0]->ptr) == 10; /* XREAD or XREADGROUP? */",
          "content_same": false
        },
        {
          "line": 2467,
          "old_api": null,
          "new_api": "streamFreeCG",
          "old_text": null,
          "new_text": "streamFreeCG(cg)",
          "old_line_content": "            server.dirty++;",
          "new_line_content": "            streamFreeCG(cg);",
          "content_same": false
        },
        {
          "line": 3491,
          "old_api": null,
          "new_api": "addReplySubcommandSyntaxError",
          "old_text": null,
          "new_text": "addReplySubcommandSyntaxError(c)",
          "old_line_content": "        }",
          "new_line_content": "            addReplySubcommandSyntaxError(c);",
          "content_same": false
        },
        {
          "line": 2470,
          "old_api": null,
          "new_api": "notifyKeyspaceEvent",
          "old_text": null,
          "new_text": "notifyKeyspaceEvent(NOTIFY_STREAM,\"xgroup-destroy\",\n                                c->argv[2],c->db->id)",
          "old_line_content": "            /* We want to unblock any XREADGROUP consumers with -NOGROUP. */",
          "new_line_content": "            notifyKeyspaceEvent(NOTIFY_STREAM,\"xgroup-destroy\",",
          "content_same": false
        },
        {
          "line": 1959,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(o,\"BLOCK\")",
          "old_line_content": "                /*",
          "new_line_content": "        if (!strcasecmp(o,\"BLOCK\") && moreargs) {",
          "content_same": false
        },
        {
          "line": 2987,
          "old_api": null,
          "new_api": "streamCreateConsumer",
          "old_text": null,
          "new_text": "streamCreateConsumer(group,name,c->argv[1],c->db->id,SCC_DEFAULT)",
          "old_line_content": "            if (nack->consumer != consumer) {",
          "new_line_content": "                consumer = streamCreateConsumer(group,name,c->argv[1],c->db->id,SCC_DEFAULT);",
          "content_same": false
        },
        {
          "line": 2477,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(opt,\"CREATECONSUMER\")",
          "old_line_content": "                                                       c->db->id,SCC_DEFAULT);",
          "new_line_content": "    } else if (!strcasecmp(opt,\"CREATECONSUMER\") && c->argc == 5) {",
          "content_same": false
        },
        {
          "line": 1965,
          "old_api": null,
          "new_api": "addReplyErrorFormat",
          "old_text": null,
          "new_text": "addReplyErrorFormat(c, \"%s command is not allowed with BLOCK option from scripts\", (char *)c->argv[0]->ptr)",
          "old_line_content": "            }",
          "new_line_content": "                addReplyErrorFormat(c, \"%s command is not allowed with BLOCK option from scripts\", (char *)c->argv[0]->ptr);",
          "content_same": false
        },
        {
          "line": 2480,
          "old_api": null,
          "new_api": "addReplyLongLong",
          "old_text": null,
          "new_text": "addReplyLongLong(c,created ? 1 : 0)",
          "old_line_content": "        long long pending = 0;",
          "new_line_content": "        addReplyLongLong(c,created ? 1 : 0);",
          "content_same": false
        },
        {
          "line": 3504,
          "old_api": null,
          "new_api": "addReplyHelp",
          "old_text": null,
          "new_text": "addReplyHelp(c, help)",
          "old_line_content": "    } else if (c->argc < 3) {",
          "new_line_content": "        addReplyHelp(c, help);",
          "content_same": false
        },
        {
          "line": 2994,
          "old_api": null,
          "new_api": "raxRemove",
          "old_text": null,
          "new_text": "raxRemove(nack->consumer->pel,buf,sizeof(buf),NULL)",
          "old_line_content": "            nack->delivery_time = deliverytime;",
          "new_line_content": "                    raxRemove(nack->consumer->pel,buf,sizeof(buf),NULL);",
          "content_same": false
        },
        {
          "line": 2483,
          "old_api": null,
          "new_api": "streamLookupConsumer",
          "old_text": null,
          "new_text": "streamLookupConsumer(cg,c->argv[4]->ptr,SLC_NO_REFRESH)",
          "old_line_content": "            /* Delete the consumer and returns the number of pending messages",
          "new_line_content": "        streamConsumer *consumer = streamLookupConsumer(cg,c->argv[4]->ptr,SLC_NO_REFRESH);",
          "content_same": false
        },
        {
          "line": 3507,
          "old_api": null,
          "new_api": "addReplySubcommandSyntaxError",
          "old_text": null,
          "new_text": "addReplySubcommandSyntaxError(c)",
          "old_line_content": "    }",
          "new_line_content": "        addReplySubcommandSyntaxError(c);",
          "content_same": false
        },
        {
          "line": 1973,
          "old_api": null,
          "new_api": "getLongLongFromObjectOrReply",
          "old_text": null,
          "new_text": "getLongLongFromObjectOrReply(c,c->argv[i],&count,NULL)",
          "old_line_content": "            if (count < 0) count = 0;",
          "new_line_content": "            if (getLongLongFromObjectOrReply(c,c->argv[i],&count,NULL) != C_OK)",
          "content_same": false
        },
        {
          "line": 2487,
          "old_api": null,
          "new_api": "raxSize",
          "old_text": null,
          "new_text": "raxSize(consumer->pel)",
          "old_line_content": "            server.dirty++;",
          "new_line_content": "            pending = raxSize(consumer->pel);",
          "content_same": false
        },
        {
          "line": 1976,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(o,\"STREAMS\")",
          "old_line_content": "            streams_count = (c->argc-streams_arg);",
          "new_line_content": "        } else if (!strcasecmp(o,\"STREAMS\") && moreargs) {",
          "content_same": false
        },
        {
          "line": 2490,
          "old_api": null,
          "new_api": "notifyKeyspaceEvent",
          "old_text": null,
          "new_text": "notifyKeyspaceEvent(NOTIFY_STREAM,\"xgroup-delconsumer\",\n                                c->argv[2],c->db->id)",
          "old_line_content": "        }",
          "new_line_content": "            notifyKeyspaceEvent(NOTIFY_STREAM,\"xgroup-delconsumer\",",
          "content_same": false
        },
        {
          "line": 1980,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"Unbalanced XREAD list of streams: \"\n                                \"for each stream key an ID or '$' must be \"\n                                \"specified.\")",
          "old_line_content": "                                \"specified.\");",
          "new_line_content": "                addReplyError(c,\"Unbalanced XREAD list of streams: \"",
          "content_same": false
        },
        {
          "line": 3517,
          "old_api": null,
          "new_api": "lookupKeyReadOrReply",
          "old_text": null,
          "new_text": "lookupKeyReadOrReply(c,key,shared.nokeyerr)",
          "old_line_content": "    s = o->ptr;",
          "new_line_content": "    robj *o = lookupKeyReadOrReply(c,key,shared.nokeyerr);",
          "content_same": false
        },
        {
          "line": 3006,
          "old_api": null,
          "new_api": "raxInsert",
          "old_text": null,
          "new_text": "raxInsert(consumer->pel,buf,sizeof(buf),nack,NULL)",
          "old_line_content": "            }",
          "new_line_content": "                raxInsert(consumer->pel,buf,sizeof(buf),nack,NULL);",
          "content_same": false
        },
        {
          "line": 2495,
          "old_api": null,
          "new_api": "addReplySubcommandSyntaxError",
          "old_text": null,
          "new_text": "addReplySubcommandSyntaxError(c)",
          "old_line_content": "}",
          "new_line_content": "        addReplySubcommandSyntaxError(c);",
          "content_same": false
        },
        {
          "line": 3518,
          "old_api": null,
          "new_api": "checkType",
          "old_text": null,
          "new_text": "checkType(c,o,OBJ_STREAM)",
          "old_line_content": "",
          "new_line_content": "    if (o == NULL || checkType(c,o,OBJ_STREAM)) return;",
          "content_same": false
        },
        {
          "line": 1989,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"The GROUP option is only supported by \"\n                                \"XREADGROUP. You called XREAD instead.\")",
          "old_line_content": "                return;",
          "new_line_content": "                addReplyError(c,\"The GROUP option is only supported by \"",
          "content_same": false
        },
        {
          "line": 3526,
          "old_api": null,
          "new_api": "addReplyErrorFormat",
          "old_text": null,
          "new_text": "addReplyErrorFormat(c, \"-NOGROUP No such consumer group '%s' \"\n                                   \"for key name '%s'\",\n                                   (char*)c->argv[3]->ptr, (char*)key->ptr)",
          "old_line_content": "                                   (char*)c->argv[3]->ptr, (char*)key->ptr);",
          "new_line_content": "            addReplyErrorFormat(c, \"-NOGROUP No such consumer group '%s' \"",
          "content_same": false
        },
        {
          "line": 2503,
          "old_api": null,
          "new_api": "lookupKeyWriteOrReply",
          "old_text": null,
          "new_text": "lookupKeyWriteOrReply(c,c->argv[1],shared.nokeyerr)",
          "old_line_content": "",
          "new_line_content": "    robj *o = lookupKeyWriteOrReply(c,c->argv[1],shared.nokeyerr);",
          "content_same": false
        },
        {
          "line": 2504,
          "old_api": null,
          "new_api": "checkType",
          "old_text": null,
          "new_text": "checkType(c,o,OBJ_STREAM)",
          "old_line_content": "    stream *s = o->ptr;",
          "new_line_content": "    if (o == NULL || checkType(c,o,OBJ_STREAM)) return;",
          "content_same": false
        },
        {
          "line": 3015,
          "old_api": null,
          "new_api": "addReplyNull",
          "old_text": null,
          "new_text": "addReplyNull(c)",
          "old_line_content": "            arraylen++;",
          "new_line_content": "                if (!emitted) addReplyNull(c);",
          "content_same": false
        },
        {
          "line": 2508,
          "old_api": null,
          "new_api": "streamParseStrictIDOrReply",
          "old_text": null,
          "new_text": "streamParseStrictIDOrReply(c,c->argv[2],&id,0)",
          "old_line_content": "    /* If the stream has at least one item, we want to check that the user",
          "new_line_content": "    if (streamParseStrictIDOrReply(c,c->argv[2],&id,0) != C_OK) return;",
          "content_same": false
        },
        {
          "line": 3020,
          "old_api": null,
          "new_api": "streamPropagateXCLAIM",
          "old_text": null,
          "new_text": "streamPropagateXCLAIM(c,c->argv[1],group,c->argv[2],c->argv[j],nack)",
          "old_line_content": "            server.dirty++;",
          "new_line_content": "            streamPropagateXCLAIM(c,c->argv[1],group,c->argv[2],c->argv[j],nack);",
          "content_same": false
        },
        {
          "line": 1998,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"The NOACK option is only supported by \"\n                                \"XREADGROUP. You called XREAD instead.\")",
          "old_line_content": "                return;",
          "new_line_content": "                addReplyError(c,\"The NOACK option is only supported by \"",
          "content_same": false
        },
        {
          "line": 3536,
          "old_api": null,
          "new_api": "mstime",
          "old_text": null,
          "new_text": "mstime()",
          "old_line_content": "            streamConsumer *consumer = ri.data;",
          "new_line_content": "        mstime_t now = mstime();",
          "content_same": false
        },
        {
          "line": 3537,
          "old_api": null,
          "new_api": "raxNext",
          "old_text": null,
          "new_text": "raxNext(&ri)",
          "old_line_content": "            mstime_t idle = now - consumer->seen_time;",
          "new_line_content": "        while(raxNext(&ri)) {",
          "content_same": false
        },
        {
          "line": 3026,
          "old_api": null,
          "new_api": "streamPropagateGroupID",
          "old_text": null,
          "new_text": "streamPropagateGroupID(c,c->argv[1],group,c->argv[2])",
          "old_line_content": "    }",
          "new_line_content": "        streamPropagateGroupID(c,c->argv[1],group,c->argv[2]);",
          "content_same": false
        },
        {
          "line": 2004,
          "old_api": null,
          "new_api": "addReplyErrorObject",
          "old_text": null,
          "new_text": "addReplyErrorObject(c,shared.syntaxerr)",
          "old_line_content": "        }",
          "new_line_content": "            addReplyErrorObject(c,shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 2517,
          "old_api": null,
          "new_api": "streamCompareID",
          "old_text": null,
          "new_text": "streamCompareID(&id,&maxid)",
          "old_line_content": "                            \"target stream top item\");",
          "new_line_content": "        if (streamCompareID(&id,&maxid) < 0) {",
          "content_same": false
        },
        {
          "line": 2518,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"The ID specified in XSETID is smaller than the \"\n                            \"target stream top item\")",
          "old_line_content": "            return;",
          "new_line_content": "            addReplyError(c,\"The ID specified in XSETID is smaller than the \"",
          "content_same": false
        },
        {
          "line": 3029,
          "old_api": null,
          "new_api": "setDeferredArrayLen",
          "old_text": null,
          "new_text": "setDeferredArrayLen(c,arraylenptr,arraylen)",
          "old_line_content": "cleanup:",
          "new_line_content": "    setDeferredArrayLen(c,arraylenptr,arraylen);",
          "content_same": false
        },
        {
          "line": 3032,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(ids)",
          "old_line_content": "",
          "new_line_content": "    if (ids != static_ids) zfree(ids);",
          "content_same": false
        },
        {
          "line": 3547,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c,\"idle\")",
          "old_line_content": "        }",
          "new_line_content": "            addReplyBulkCString(c,\"idle\");",
          "content_same": false
        },
        {
          "line": 2011,
          "old_api": null,
          "new_api": "addReplyErrorObject",
          "old_text": null,
          "new_text": "addReplyErrorObject(c,shared.syntaxerr)",
          "old_line_content": "    }",
          "new_line_content": "        addReplyErrorObject(c,shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 2526,
          "old_api": null,
          "new_api": "notifyKeyspaceEvent",
          "old_text": null,
          "new_text": "notifyKeyspaceEvent(NOTIFY_STREAM,\"xsetid\",c->argv[1],c->db->id)",
          "old_line_content": "",
          "new_line_content": "    notifyKeyspaceEvent(NOTIFY_STREAM,\"xsetid\",c->argv[1],c->db->id);",
          "content_same": false
        },
        {
          "line": 3550,
          "old_api": null,
          "new_api": "raxStop",
          "old_text": null,
          "new_text": "raxStop(&ri)",
          "old_line_content": "        /* XINFO GROUPS <key>. */",
          "new_line_content": "        raxStop(&ri);",
          "content_same": false
        },
        {
          "line": 3551,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(opt,\"GROUPS\")",
          "old_line_content": "        if (s->cgroups == NULL) {",
          "new_line_content": "    } else if (!strcasecmp(opt,\"GROUPS\") && c->argc == 3) {",
          "content_same": false
        },
        {
          "line": 3554,
          "old_api": null,
          "new_api": "addReplyArrayLen",
          "old_text": null,
          "new_text": "addReplyArrayLen(c,0)",
          "old_line_content": "        }",
          "new_line_content": "            addReplyArrayLen(c,0);",
          "content_same": false
        },
        {
          "line": 2018,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"Missing GROUP option for XREADGROUP\")",
          "old_line_content": "    }",
          "new_line_content": "        addReplyError(c,\"Missing GROUP option for XREADGROUP\");",
          "content_same": false
        },
        {
          "line": 2024,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(streamID)*streams_count)",
          "old_line_content": "",
          "new_line_content": "        ids = zmalloc(sizeof(streamID)*streams_count);",
          "content_same": false
        },
        {
          "line": 3561,
          "old_api": null,
          "new_api": "raxSeek",
          "old_text": null,
          "new_text": "raxSeek(&ri,\"^\",NULL,0)",
          "old_line_content": "            streamCG *cg = ri.data;",
          "new_line_content": "        raxSeek(&ri,\"^\",NULL,0);",
          "content_same": false
        },
        {
          "line": 2025,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(streamCG*)*streams_count)",
          "old_line_content": "    for (int i = streams_arg + streams_count; i < c->argc; i++) {",
          "new_line_content": "    if (groupname) groups = zmalloc(sizeof(streamCG*)*streams_count);",
          "content_same": false
        },
        {
          "line": 3053,
          "old_api": null,
          "new_api": "lookupKeyRead",
          "old_text": null,
          "new_text": "lookupKeyRead(c->db,c->argv[1])",
          "old_line_content": "    long count = 100; /* Maximum entries to claim. */",
          "new_line_content": "    robj *o = lookupKeyRead(c->db,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 2542,
          "old_api": null,
          "new_api": "checkType",
          "old_text": null,
          "new_text": "checkType(c,o,OBJ_STREAM)",
          "old_line_content": "    }",
          "new_line_content": "        if (checkType(c,o,OBJ_STREAM)) return; /* Type error. */",
          "content_same": false
        },
        {
          "line": 2543,
          "old_api": null,
          "new_api": "streamLookupCG",
          "old_text": null,
          "new_text": "streamLookupCG(o->ptr,c->argv[2]->ptr)",
          "old_line_content": "",
          "new_line_content": "        group = streamLookupCG(o->ptr,c->argv[2]->ptr);",
          "content_same": false
        },
        {
          "line": 2033,
          "old_api": null,
          "new_api": "lookupKeyRead",
          "old_text": null,
          "new_text": "lookupKeyRead(c->db,key)",
          "old_line_content": "        streamCG *group = NULL;",
          "new_line_content": "        robj *o = lookupKeyRead(c->db,key);",
          "content_same": false
        },
        {
          "line": 2034,
          "old_api": null,
          "new_api": "checkType",
          "old_text": null,
          "new_text": "checkType(c,o,OBJ_STREAM)",
          "old_line_content": "",
          "new_line_content": "        if (checkType(c,o,OBJ_STREAM)) goto cleanup;",
          "content_same": false
        },
        {
          "line": 3571,
          "old_api": null,
          "new_api": "addReplyBulkCString",
          "old_text": null,
          "new_text": "addReplyBulkCString(c,\"last-delivered-id\")",
          "old_line_content": "        }",
          "new_line_content": "            addReplyBulkCString(c,\"last-delivered-id\");",
          "content_same": false
        },
        {
          "line": 2548,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.czero)",
          "old_line_content": "    }",
          "new_line_content": "        addReply(c,shared.czero);",
          "content_same": false
        },
        {
          "line": 3062,
          "old_api": null,
          "new_api": "getLongLongFromObjectOrReply",
          "old_text": null,
          "new_text": "getLongLongFromObjectOrReply(c,c->argv[4],&minidle,\"Invalid min-idle-time argument for XAUTOCLAIM\")",
          "old_line_content": "    if (minidle < 0) minidle = 0;",
          "new_line_content": "    if (getLongLongFromObjectOrReply(c,c->argv[4],&minidle,\"Invalid min-idle-time argument for XAUTOCLAIM\") != C_OK)",
          "content_same": false
        },
        {
          "line": 3574,
          "old_api": null,
          "new_api": "raxStop",
          "old_text": null,
          "new_text": "raxStop(&ri)",
          "old_line_content": "        /* XINFO STREAM <key> [FULL [COUNT <count>]]. */",
          "new_line_content": "        raxStop(&ri);",
          "content_same": false
        },
        {
          "line": 3579,
          "old_api": null,
          "new_api": "addReplySubcommandSyntaxError",
          "old_text": null,
          "new_text": "addReplySubcommandSyntaxError(c)",
          "old_line_content": "}",
          "new_line_content": "        addReplySubcommandSyntaxError(c);",
          "content_same": false
        },
        {
          "line": 3068,
          "old_api": null,
          "new_api": "streamIncrID",
          "old_text": null,
          "new_text": "streamIncrID(&startid)",
          "old_line_content": "        return;",
          "new_line_content": "    if (startex && streamIncrID(&startid) != C_OK) {",
          "content_same": false
        },
        {
          "line": 3069,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"invalid start ID for the interval\")",
          "old_line_content": "    }",
          "new_line_content": "        addReplyError(c,\"invalid start ID for the interval\");",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 2050,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(c->argv[i]->ptr,\"$\")",
          "new_text": null,
          "old_line_content": "        if (strcmp(c->argv[i]->ptr,\"$\") == 0) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3075,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(opt,\"COUNT\")",
          "new_text": null,
          "old_line_content": "        if (!strcasecmp(opt,\"COUNT\") && moreargs) {",
          "new_line_content": "        int moreargs = (c->argc-1) - j; /* Number of additional arguments. */",
          "content_same": false
        },
        {
          "line": 3076,
          "old_api": "getRangeLongFromObjectOrReply",
          "new_api": null,
          "old_text": "getRangeLongFromObjectOrReply(c,c->argv[j+1],1,LONG_MAX,&count,\"COUNT must be > 0\")",
          "new_text": null,
          "old_line_content": "            if (getRangeLongFromObjectOrReply(c,c->argv[j+1],1,LONG_MAX,&count,\"COUNT must be > 0\") != C_OK)",
          "new_line_content": "        char *opt = c->argv[j]->ptr;",
          "content_same": false
        },
        {
          "line": 2566,
          "old_api": "streamEncodeID",
          "new_api": null,
          "old_text": "streamEncodeID(buf,&ids[j-3])",
          "new_text": null,
          "old_line_content": "        streamEncodeID(buf,&ids[j-3]);",
          "new_line_content": "    for (int j = 3; j < c->argc; j++) {",
          "content_same": false
        },
        {
          "line": 3079,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(opt,\"JUSTID\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcasecmp(opt,\"JUSTID\")) {",
          "new_line_content": "                return;",
          "content_same": false
        },
        {
          "line": 3590,
          "old_api": "lpValidateIntegrity",
          "new_api": null,
          "old_text": "lpValidateIntegrity(lp, size, 0, NULL, NULL)",
          "new_text": null,
          "old_line_content": "    if (!lpValidateIntegrity(lp, size, 0, NULL, NULL))",
          "new_line_content": "    /* Since we don't want to run validation of all records twice, we'll",
          "content_same": false
        },
        {
          "line": 3082,
          "old_api": "addReplyErrorObject",
          "new_api": null,
          "old_text": "addReplyErrorObject(c,shared.syntaxerr)",
          "new_text": null,
          "old_line_content": "            addReplyErrorObject(c,shared.syntaxerr);",
          "new_line_content": "            justid = 1;",
          "content_same": false
        },
        {
          "line": 2571,
          "old_api": "raxFind",
          "new_api": null,
          "old_text": "raxFind(group->pel,buf,sizeof(buf))",
          "new_text": null,
          "old_line_content": "        streamNACK *nack = raxFind(group->pel,buf,sizeof(buf));",
          "new_line_content": "         * NACK structure that will have a reference to the consumer, so that",
          "content_same": false
        },
        {
          "line": 3596,
          "old_api": "lpValidateFirst",
          "new_api": null,
          "old_text": "lpValidateFirst(lp)",
          "new_text": null,
          "old_line_content": "    next = p = lpValidateFirst(lp);",
          "new_line_content": "    if (!deep) return 1;",
          "content_same": false
        },
        {
          "line": 3597,
          "old_api": "lpValidateNext",
          "new_api": null,
          "old_text": "lpValidateNext(lp, &next, size)",
          "new_text": null,
          "old_line_content": "    if (!lpValidateNext(lp, &next, size)) return 0;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2574,
          "old_api": "raxRemove",
          "new_api": null,
          "old_text": "raxRemove(nack->consumer->pel,buf,sizeof(buf),NULL)",
          "new_text": null,
          "old_line_content": "            raxRemove(nack->consumer->pel,buf,sizeof(buf),NULL);",
          "new_line_content": "        if (nack != raxNotFound) {",
          "content_same": false
        },
        {
          "line": 3089,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,OBJ_STREAM)",
          "new_text": null,
          "old_line_content": "        if (checkType(c,o,OBJ_STREAM))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3601,
          "old_api": "lpGetIntegerIfValid",
          "new_api": null,
          "old_text": "lpGetIntegerIfValid(p, &valid_record)",
          "new_text": null,
          "old_line_content": "    int64_t entry_count = lpGetIntegerIfValid(p, &valid_record);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2067,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(c->argv[i]->ptr,\">\")",
          "new_text": null,
          "old_line_content": "        } else if (strcmp(c->argv[i]->ptr,\">\") == 0) {",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 2580,
          "old_api": "addReplyLongLong",
          "new_api": null,
          "old_text": "addReplyLongLong(c,acknowledged)",
          "new_text": null,
          "old_line_content": "    addReplyLongLong(c,acknowledged);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3606,
          "old_api": "lpGetIntegerIfValid",
          "new_api": null,
          "old_text": "lpGetIntegerIfValid(p, &valid_record)",
          "new_text": null,
          "old_line_content": "    int64_t deleted_count = lpGetIntegerIfValid(p, &valid_record);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3097,
          "old_api": "addReplyErrorFormat",
          "new_api": null,
          "old_text": "addReplyErrorFormat(c,\"-NOGROUP No such key '%s' or consumer group '%s'\",\n                            (char*)c->argv[1]->ptr,\n                            (char*)c->argv[2]->ptr)",
          "new_text": null,
          "old_line_content": "        addReplyErrorFormat(c,\"-NOGROUP No such key '%s' or consumer group '%s'\",",
          "new_line_content": "     * is mandatory. */",
          "content_same": false
        },
        {
          "line": 3611,
          "old_api": "lpGetIntegerIfValid",
          "new_api": null,
          "old_text": "lpGetIntegerIfValid(p, &valid_record)",
          "new_text": null,
          "old_line_content": "    int64_t master_fields = lpGetIntegerIfValid(p, &valid_record);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2081,
          "old_api": "streamParseStrictIDOrReply",
          "new_api": null,
          "old_text": "streamParseStrictIDOrReply(c,c->argv[i],ids+id_idx,0)",
          "new_text": null,
          "old_line_content": "        if (streamParseStrictIDOrReply(c,c->argv[i],ids+id_idx,0) != C_OK)",
          "new_line_content": "            continue;",
          "content_same": false
        },
        {
          "line": 3617,
          "old_api": "lpValidateNext",
          "new_api": null,
          "old_text": "lpValidateNext(lp, &next, size)",
          "new_text": null,
          "old_line_content": "        p = next; if (!lpValidateNext(lp, &next, size)) return 0;",
          "new_line_content": "    /* the field names */",
          "content_same": false
        },
        {
          "line": 3107,
          "old_api": "addReplyArrayLen",
          "new_api": null,
          "old_text": "addReplyArrayLen(c, 2)",
          "new_text": null,
          "old_line_content": "    addReplyArrayLen(c, 2);",
          "new_line_content": "    long long attempts = count*10;",
          "content_same": false
        },
        {
          "line": 3108,
          "old_api": "addReplyDeferredLen",
          "new_api": null,
          "old_text": "addReplyDeferredLen(c)",
          "new_text": null,
          "old_line_content": "    void *endidptr = addReplyDeferredLen(c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3621,
          "old_api": "lpGetIntegerIfValid",
          "new_api": null,
          "old_text": "lpGetIntegerIfValid(p, &valid_record)",
          "new_text": null,
          "old_line_content": "    int64_t zero = lpGetIntegerIfValid(p, &valid_record);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3112,
          "old_api": "streamEncodeID",
          "new_api": null,
          "old_text": "streamEncodeID(startkey,&startid)",
          "new_text": null,
          "old_line_content": "    streamEncodeID(startkey,&startid);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2089,
          "old_api": "lookupKeyRead",
          "new_api": null,
          "old_text": "lookupKeyRead(c->db,c->argv[streams_arg+i])",
          "new_text": null,
          "old_line_content": "        robj *o = lookupKeyRead(c->db,c->argv[streams_arg+i]);",
          "new_line_content": "    void *arraylen_ptr = NULL;",
          "content_same": false
        },
        {
          "line": 3115,
          "old_api": "raxSeek",
          "new_api": null,
          "old_text": "raxSeek(&ri,\">=\",startkey,sizeof(startkey))",
          "new_text": null,
          "old_line_content": "    raxSeek(&ri,\">=\",startkey,sizeof(startkey));",
          "new_line_content": "    raxIterator ri;",
          "content_same": false
        },
        {
          "line": 3629,
          "old_api": "lpGetIntegerIfValid",
          "new_api": null,
          "old_text": "lpGetIntegerIfValid(p, &valid_record)",
          "new_text": null,
          "old_line_content": "        int64_t flags = lpGetIntegerIfValid(p, &valid_record);",
          "new_line_content": "        if (!p) return 0;",
          "content_same": false
        },
        {
          "line": 2607,
          "old_api": "addReplyErrorObject",
          "new_api": null,
          "old_text": "addReplyErrorObject(c,shared.syntaxerr)",
          "new_text": null,
          "old_line_content": "        addReplyErrorObject(c,shared.syntaxerr);",
          "new_line_content": "    /* Start and stop, and the consumer, can be omitted. Also the IDLE modifier. */",
          "content_same": false
        },
        {
          "line": 3634,
          "old_api": "lpGetIntegerIfValid",
          "new_api": null,
          "old_text": "lpGetIntegerIfValid(p, &valid_record)",
          "new_text": null,
          "old_line_content": "        lpGetIntegerIfValid(p, &valid_record);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3637,
          "old_api": "lpGetIntegerIfValid",
          "new_api": null,
          "old_text": "lpGetIntegerIfValid(p, &valid_record)",
          "new_text": null,
          "old_line_content": "        lpGetIntegerIfValid(p, &valid_record);",
          "new_line_content": "        if (!valid_record) return 0;",
          "content_same": false
        },
        {
          "line": 2616,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[3]->ptr, \"IDLE\")",
          "new_text": null,
          "old_line_content": "        if (!strcasecmp(c->argv[3]->ptr, \"IDLE\")) {",
          "new_line_content": "        int startidx = 3; /* Without IDLE */",
          "content_same": false
        },
        {
          "line": 2617,
          "old_api": "getLongLongFromObjectOrReply",
          "new_api": null,
          "old_text": "getLongLongFromObjectOrReply(c, c->argv[4], &minidle, NULL)",
          "new_text": null,
          "old_line_content": "            if (getLongLongFromObjectOrReply(c, c->argv[4], &minidle, NULL) == C_ERR)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3129,
          "old_api": "streamDecodeID",
          "new_api": null,
          "old_text": "streamDecodeID(ri.key, &id)",
          "new_text": null,
          "old_line_content": "        streamDecodeID(ri.key, &id);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3643,
          "old_api": "lpGetIntegerIfValid",
          "new_api": null,
          "old_text": "lpGetIntegerIfValid(p, &valid_record)",
          "new_text": null,
          "old_line_content": "            fields = lpGetIntegerIfValid(p, &valid_record);",
          "new_line_content": "        if (!(flags & STREAM_ITEM_FLAG_SAMEFIELDS)) {",
          "content_same": false
        },
        {
          "line": 3132,
          "old_api": "streamLookupConsumer",
          "new_api": null,
          "old_text": "streamLookupConsumer(group,name,SLC_DEFAULT)",
          "new_text": null,
          "old_line_content": "            (consumer = streamLookupConsumer(group,name,SLC_DEFAULT)) == NULL)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2621,
          "old_api": "addReplyErrorObject",
          "new_api": null,
          "old_text": "addReplyErrorObject(c,shared.syntaxerr)",
          "new_text": null,
          "old_line_content": "                addReplyErrorObject(c,shared.syntaxerr);",
          "new_line_content": "            if (c->argc < 8) {",
          "content_same": false
        },
        {
          "line": 2112,
          "old_api": "streamLastValidID",
          "new_api": null,
          "old_text": "streamLastValidID(s, &maxid)",
          "new_text": null,
          "old_line_content": "                streamLastValidID(s, &maxid);",
          "new_line_content": "                 * than what the stream has inside. */",
          "content_same": false
        },
        {
          "line": 2113,
          "old_api": "streamCompareID",
          "new_api": null,
          "old_text": "streamCompareID(&maxid, last)",
          "new_text": null,
          "old_line_content": "                if (streamCompareID(&maxid, last) > 0) {",
          "new_line_content": "                streamID maxid, *last = &groups[i]->last_id;",
          "content_same": false
        },
        {
          "line": 3649,
          "old_api": "lpValidateNext",
          "new_api": null,
          "old_text": "lpValidateNext(lp, &next, size)",
          "new_text": null,
          "old_line_content": "                p = next; if (!lpValidateNext(lp, &next, size)) return 0;",
          "new_line_content": "            /* the field names */",
          "content_same": false
        },
        {
          "line": 2629,
          "old_api": "getLongLongFromObjectOrReply",
          "new_api": null,
          "old_text": "getLongLongFromObjectOrReply(c,c->argv[startidx+2],&count,NULL)",
          "new_text": null,
          "old_line_content": "        if (getLongLongFromObjectOrReply(c,c->argv[startidx+2],&count,NULL) == C_ERR)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3141,
          "old_api": "raxRemove",
          "new_api": null,
          "old_text": "raxRemove(nack->consumer->pel,ri.key,ri.key_len,NULL)",
          "new_text": null,
          "old_line_content": "                raxRemove(nack->consumer->pel,ri.key,ri.key_len,NULL);",
          "new_line_content": "             * NACK above because of the FORCE option. */",
          "content_same": false
        },
        {
          "line": 3657,
          "old_api": "lpValidateNext",
          "new_api": null,
          "old_text": "lpValidateNext(lp, &next, size)",
          "new_text": null,
          "old_line_content": "            p = next; if (!lpValidateNext(lp, &next, size)) return 0;",
          "new_line_content": "        /* the values */",
          "content_same": false
        },
        {
          "line": 2122,
          "old_api": "streamLastValidID",
          "new_api": null,
          "old_text": "streamLastValidID(s, &maxid)",
          "new_text": null,
          "old_line_content": "            streamLastValidID(s, &maxid);",
          "new_line_content": "             * actually provide at least one item from the stream. */",
          "content_same": false
        },
        {
          "line": 2123,
          "old_api": "streamCompareID",
          "new_api": null,
          "old_text": "streamCompareID(&maxid, gt)",
          "new_text": null,
          "old_line_content": "            if (streamCompareID(&maxid, gt) > 0) {",
          "new_line_content": "            streamID maxid;",
          "content_same": false
        },
        {
          "line": 2634,
          "old_api": "streamParseIntervalIDOrReply",
          "new_api": null,
          "old_text": "streamParseIntervalIDOrReply(c,c->argv[startidx],&startid,&startex,0)",
          "new_text": null,
          "old_line_content": "        if (streamParseIntervalIDOrReply(c,c->argv[startidx],&startid,&startex,0) != C_OK)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2637,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\"invalid start ID for the interval\")",
          "new_text": null,
          "old_line_content": "            addReplyError(c,\"invalid start ID for the interval\");",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 3661,
          "old_api": "lpGetIntegerIfValid",
          "new_api": null,
          "old_text": "lpGetIntegerIfValid(p, &valid_record)",
          "new_text": null,
          "old_line_content": "        int64_t lp_count = lpGetIntegerIfValid(p, &valid_record);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2640,
          "old_api": "streamParseIntervalIDOrReply",
          "new_api": null,
          "old_text": "streamParseIntervalIDOrReply(c,c->argv[startidx+1],&endid,&endex,UINT64_MAX)",
          "new_text": null,
          "old_line_content": "        if (streamParseIntervalIDOrReply(c,c->argv[startidx+1],&endid,&endex,UINT64_MAX) != C_OK)",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 3152,
          "old_api": "raxInsert",
          "new_api": null,
          "old_text": "raxInsert(consumer->pel,ri.key,ri.key_len,nack,NULL)",
          "new_text": null,
          "old_line_content": "            raxInsert(consumer->pel,ri.key,ri.key_len,nack,NULL);",
          "new_line_content": "        if (nack->consumer != consumer) {",
          "content_same": false
        },
        {
          "line": 2130,
          "old_api": "addReplyDeferredLen",
          "new_api": null,
          "old_text": "addReplyDeferredLen(c)",
          "new_text": null,
          "old_line_content": "            if (arraylen == 1) arraylen_ptr = addReplyDeferredLen(c);",
          "new_line_content": "        if (serve_synchronously) {",
          "content_same": false
        },
        {
          "line": 2643,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\"invalid end ID for the interval\")",
          "new_text": null,
          "old_line_content": "            addReplyError(c,\"invalid end ID for the interval\");",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 3664,
          "old_api": "lpValidateNext",
          "new_api": null,
          "old_text": "lpValidateNext(lp, &next, size)",
          "new_text": null,
          "old_line_content": "        p = next; if (!lpValidateNext(lp, &next, size)) return 0;",
          "new_line_content": "        if (!valid_record) return 0;",
          "content_same": false
        },
        {
          "line": 3158,
          "old_api": "addReplyStreamID",
          "new_api": null,
          "old_text": "addReplyStreamID(c,&id)",
          "new_text": null,
          "old_line_content": "            addReplyStreamID(c,&id);",
          "new_line_content": "        /* Send the reply for this entry. */",
          "content_same": false
        },
        {
          "line": 2135,
          "old_api": "streamIncrID",
          "new_api": null,
          "old_text": "streamIncrID(&start)",
          "new_text": null,
          "old_line_content": "            streamIncrID(&start);",
          "new_line_content": "             * IDs greater than start. */",
          "content_same": false
        },
        {
          "line": 3161,
          "old_api": "streamReplyWithRange",
          "new_api": null,
          "old_text": "streamReplyWithRange(c,o->ptr,&id,&id,1,0,NULL,NULL,\n                                     STREAM_RWR_RAWENTRIES,NULL)",
          "new_text": null,
          "old_line_content": "                streamReplyWithRange(c,o->ptr,&id,&id,1,0,NULL,NULL,",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 2139,
          "old_api": "addReplyArrayLen",
          "new_api": null,
          "old_text": "addReplyArrayLen(c,2)",
          "new_text": null,
          "old_line_content": "            if (c->resp == 2) addReplyArrayLen(c,2);",
          "new_line_content": "            /* Emit the two elements sub-array consisting of the name",
          "content_same": false
        },
        {
          "line": 2140,
          "old_api": "addReplyBulk",
          "new_api": null,
          "old_text": "addReplyBulk(c,c->argv[streams_arg+i])",
          "new_text": null,
          "old_line_content": "            addReplyBulk(c,c->argv[streams_arg+i]);",
          "new_line_content": "             * of the stream and the data we extracted from it. */",
          "content_same": false
        },
        {
          "line": 3164,
          "old_api": "addReplyNull",
          "new_api": null,
          "old_text": "addReplyNull(c)",
          "new_text": null,
          "old_line_content": "                addReplyNull(c);",
          "new_line_content": "                                     STREAM_RWR_RAWENTRIES,NULL);",
          "content_same": false
        },
        {
          "line": 2654,
          "old_api": "lookupKeyRead",
          "new_api": null,
          "old_text": "lookupKeyRead(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    robj *o = lookupKeyRead(c->db,c->argv[1]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2144,
          "old_api": "streamLookupConsumer",
          "new_api": null,
          "old_text": "streamLookupConsumer(groups[i],consumername->ptr,SLC_DEFAULT)",
          "new_text": null,
          "old_line_content": "                consumer = streamLookupConsumer(groups[i],consumername->ptr,SLC_DEFAULT);",
          "new_line_content": "            streamPropInfo spi = {c->argv[i+streams_arg],groupname};",
          "content_same": false
        },
        {
          "line": 2657,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,OBJ_STREAM)",
          "new_text": null,
          "old_line_content": "    if (checkType(c,o,OBJ_STREAM)) return;",
          "new_line_content": "    streamCG *group;",
          "content_same": false
        },
        {
          "line": 3170,
          "old_api": "createObjectFromStreamID",
          "new_api": null,
          "old_text": "createObjectFromStreamID(&id)",
          "new_text": null,
          "old_line_content": "        robj *idstr = createObjectFromStreamID(&id);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3171,
          "old_api": "streamPropagateXCLAIM",
          "new_api": null,
          "old_text": "streamPropagateXCLAIM(c,c->argv[1],group,c->argv[2],idstr,nack)",
          "new_text": null,
          "old_line_content": "        streamPropagateXCLAIM(c,c->argv[1],group,c->argv[2],idstr,nack);",
          "new_line_content": "        /* Propagate this change. */",
          "content_same": false
        },
        {
          "line": 2150,
          "old_api": "streamPropagateConsumerCreation",
          "new_api": null,
          "old_text": "streamPropagateConsumerCreation(c,spi.keyname,\n                                                        spi.groupname,\n                                                        consumer->name)",
          "new_text": null,
          "old_line_content": "                        streamPropagateConsumerCreation(c,spi.keyname,",
          "new_line_content": "                                                    c->db->id,SCC_DEFAULT);",
          "content_same": false
        },
        {
          "line": 3177,
          "old_api": "raxNext",
          "new_api": null,
          "old_text": "raxNext(&ri)",
          "new_text": null,
          "old_line_content": "    raxNext(&ri);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3180,
          "old_api": "raxEOF",
          "new_api": null,
          "old_text": "raxEOF(&ri)",
          "new_text": null,
          "old_line_content": "    if (raxEOF(&ri)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2669,
          "old_api": "addReplyArrayLen",
          "new_api": null,
          "old_text": "addReplyArrayLen(c,4)",
          "new_text": null,
          "old_line_content": "        addReplyArrayLen(c,4);",
          "new_line_content": "    /* XPENDING <key> <group> variant. */",
          "content_same": false
        },
        {
          "line": 2158,
          "old_api": "streamReplyWithRange",
          "new_api": null,
          "old_text": "streamReplyWithRange(c,s,&start,NULL,count,0,\n                                 groups ? groups[i] : NULL,\n                                 consumer, flags, &spi)",
          "new_text": null,
          "old_line_content": "            streamReplyWithRange(c,s,&start,NULL,count,0,",
          "new_line_content": "            if (noack) flags |= STREAM_RWR_NOACK;",
          "content_same": false
        },
        {
          "line": 3183,
          "old_api": "streamDecodeID",
          "new_api": null,
          "old_text": "streamDecodeID(ri.key, &endid)",
          "new_text": null,
          "old_line_content": "        streamDecodeID(ri.key, &endid);",
          "new_line_content": "        endid.ms = endid.seq = 0;",
          "content_same": false
        },
        {
          "line": 2674,
          "old_api": "addReplyNull",
          "new_api": null,
          "old_text": "addReplyNull(c)",
          "new_text": null,
          "old_line_content": "            addReplyNull(c); /* Start. */",
          "new_line_content": "        /* First and last IDs. */",
          "content_same": false
        },
        {
          "line": 3188,
          "old_api": "setDeferredReplyStreamID",
          "new_api": null,
          "old_text": "setDeferredReplyStreamID(c,endidptr,&endid)",
          "new_text": null,
          "old_line_content": "    setDeferredReplyStreamID(c,endidptr,&endid);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2168,
          "old_api": "setDeferredArrayLen",
          "new_api": null,
          "old_text": "setDeferredArrayLen(c,arraylen_ptr,arraylen)",
          "new_text": null,
          "old_line_content": "            setDeferredArrayLen(c,arraylen_ptr,arraylen);",
          "new_line_content": "    if (arraylen) {",
          "content_same": false
        },
        {
          "line": 2680,
          "old_api": "raxStart",
          "new_api": null,
          "old_text": "raxStart(&ri,group->pel)",
          "new_text": null,
          "old_line_content": "            raxStart(&ri,group->pel);",
          "new_line_content": "            /* Start. */",
          "content_same": false
        },
        {
          "line": 2681,
          "old_api": "raxSeek",
          "new_api": null,
          "old_text": "raxSeek(&ri,\"^\",NULL,0)",
          "new_text": null,
          "old_line_content": "            raxSeek(&ri,\"^\",NULL,0);",
          "new_line_content": "            raxIterator ri;",
          "content_same": false
        },
        {
          "line": 2687,
          "old_api": "raxSeek",
          "new_api": null,
          "old_text": "raxSeek(&ri,\"$\",NULL,0)",
          "new_text": null,
          "old_line_content": "            raxSeek(&ri,\"$\",NULL,0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2688,
          "old_api": "raxNext",
          "new_api": null,
          "old_text": "raxNext(&ri)",
          "new_text": null,
          "old_line_content": "            raxNext(&ri);",
          "new_line_content": "            /* End. */",
          "content_same": false
        },
        {
          "line": 3201,
          "old_api": "lookupKeyWriteOrReply",
          "new_api": null,
          "old_text": "lookupKeyWriteOrReply(c,c->argv[1],shared.czero)",
          "new_text": null,
          "old_line_content": "    if ((o = lookupKeyWriteOrReply(c,c->argv[1],shared.czero)) == NULL",
          "new_line_content": "    robj *o;",
          "content_same": false
        },
        {
          "line": 3202,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,OBJ_STREAM)",
          "new_text": null,
          "old_line_content": "        || checkType(c,o,OBJ_STREAM)) return;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2179,
          "old_api": "addReplyNullArray",
          "new_api": null,
          "old_text": "addReplyNullArray(c)",
          "new_text": null,
          "old_line_content": "            addReplyNullArray(c);",
          "new_line_content": "         * we can do is treating it as a timeout (even with timeout 0). */",
          "content_same": false
        },
        {
          "line": 2182,
          "old_api": "blockForKeys",
          "new_api": null,
          "old_text": "blockForKeys(c, BLOCKED_STREAM, c->argv+streams_arg, streams_count,\n                     0, timeout, NULL, NULL, ids)",
          "new_text": null,
          "old_line_content": "        blockForKeys(c, BLOCKED_STREAM, c->argv+streams_arg, streams_count,",
          "new_line_content": "            goto cleanup;",
          "content_same": false
        },
        {
          "line": 2694,
          "old_api": "raxStart",
          "new_api": null,
          "old_text": "raxStart(&ri,group->consumers)",
          "new_text": null,
          "old_line_content": "            raxStart(&ri,group->consumers);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2695,
          "old_api": "raxSeek",
          "new_api": null,
          "old_text": "raxSeek(&ri,\"^\",NULL,0)",
          "new_text": null,
          "old_line_content": "            raxSeek(&ri,\"^\",NULL,0);",
          "new_line_content": "            /* Consumers with pending messages. */",
          "content_same": false
        },
        {
          "line": 3212,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(streamID)*id_count)",
          "new_text": null,
          "old_line_content": "        ids = zmalloc(sizeof(streamID)*id_count);",
          "new_line_content": "    int id_count = c->argc-2;",
          "content_same": false
        },
        {
          "line": 2701,
          "old_api": "addReplyArrayLen",
          "new_api": null,
          "old_text": "addReplyArrayLen(c,2)",
          "new_text": null,
          "old_line_content": "                addReplyArrayLen(c,2);",
          "new_line_content": "                streamConsumer *consumer = ri.data;",
          "content_same": false
        },
        {
          "line": 2194,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(groupname)",
          "new_text": null,
          "old_line_content": "            incrRefCount(groupname);",
          "new_line_content": "         * the right arguments. */",
          "content_same": false
        },
        {
          "line": 2195,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(consumername)",
          "new_text": null,
          "old_line_content": "            incrRefCount(consumername);",
          "new_line_content": "        if (groupname) {",
          "content_same": false
        },
        {
          "line": 2706,
          "old_api": "setDeferredArrayLen",
          "new_api": null,
          "old_text": "setDeferredArrayLen(c,arraylen_ptr,arraylen)",
          "new_text": null,
          "old_line_content": "            setDeferredArrayLen(c,arraylen_ptr,arraylen);",
          "new_line_content": "                arraylen++;",
          "content_same": false
        },
        {
          "line": 2707,
          "old_api": "raxStop",
          "new_api": null,
          "old_text": "raxStop(&ri)",
          "new_text": null,
          "old_line_content": "            raxStop(&ri);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 3220,
          "old_api": "streamDeleteItem",
          "new_api": null,
          "old_text": "streamDeleteItem(s,&ids[j-2])",
          "new_text": null,
          "old_line_content": "        deleted += streamDeleteItem(s,&ids[j-2]);",
          "new_line_content": "    int deleted = 0;",
          "content_same": false
        },
        {
          "line": 2712,
          "old_api": "streamLookupConsumer",
          "new_api": null,
          "old_text": "streamLookupConsumer(group,consumername->ptr,SLC_NO_REFRESH)",
          "new_text": null,
          "old_line_content": "            consumer = streamLookupConsumer(group,consumername->ptr,SLC_NO_REFRESH);",
          "new_line_content": "        streamConsumer *consumer = NULL;",
          "content_same": false
        },
        {
          "line": 3225,
          "old_api": "signalModifiedKey",
          "new_api": null,
          "old_text": "signalModifiedKey(c,c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "        signalModifiedKey(c,c->db,c->argv[1]);",
          "new_line_content": "    /* Propagate the write if needed. */",
          "content_same": false
        },
        {
          "line": 3226,
          "old_api": "notifyKeyspaceEvent",
          "new_api": null,
          "old_text": "notifyKeyspaceEvent(NOTIFY_STREAM,\"xdel\",c->argv[1],c->db->id)",
          "new_text": null,
          "old_line_content": "        notifyKeyspaceEvent(NOTIFY_STREAM,\"xdel\",c->argv[1],c->db->id);",
          "new_line_content": "    if (deleted) {",
          "content_same": false
        },
        {
          "line": 2717,
          "old_api": "addReplyArrayLen",
          "new_api": null,
          "old_text": "addReplyArrayLen(c,0)",
          "new_text": null,
          "old_line_content": "                addReplyArrayLen(c,0);",
          "new_line_content": "             * just return an empty array. */",
          "content_same": false
        },
        {
          "line": 3229,
          "old_api": "addReplyLongLong",
          "new_api": null,
          "old_text": "addReplyLongLong(c,deleted)",
          "new_text": null,
          "old_line_content": "    addReplyLongLong(c,deleted);",
          "new_line_content": "        server.dirty += deleted;",
          "content_same": false
        },
        {
          "line": 2208,
          "old_api": "addReplyNullArray",
          "new_api": null,
          "old_text": "addReplyNullArray(c)",
          "new_text": null,
          "old_line_content": "    addReplyNullArray(c);",
          "new_line_content": "    /* No BLOCK option, nor any stream we can serve. Reply as with a",
          "content_same": false
        },
        {
          "line": 2726,
          "old_api": "mstime",
          "new_api": null,
          "old_text": "mstime()",
          "new_text": null,
          "old_line_content": "        mstime_t now = mstime();",
          "new_line_content": "        unsigned char endkey[sizeof(streamID)];",
          "content_same": false
        },
        {
          "line": 2215,
          "old_api": "preventCommandPropagation",
          "new_api": null,
          "old_text": "preventCommandPropagation(c)",
          "new_text": null,
          "old_line_content": "    preventCommandPropagation(c);",
          "new_line_content": "    /* The command is propagated (in the READGROUP form) as a side effect",
          "content_same": false
        },
        {
          "line": 2216,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(ids)",
          "new_text": null,
          "old_line_content": "    if (ids != static_ids) zfree(ids);",
          "new_line_content": "     * of calling lower level APIs. So stop any implicit propagation. */",
          "content_same": false
        },
        {
          "line": 2729,
          "old_api": "streamEncodeID",
          "new_api": null,
          "old_text": "streamEncodeID(endkey,&endid)",
          "new_text": null,
          "old_line_content": "        streamEncodeID(endkey,&endid);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2735,
          "old_api": "memcmp",
          "new_api": null,
          "old_text": "memcmp(ri.key,endkey,ri.key_len)",
          "new_text": null,
          "old_line_content": "        while(count && raxNext(&ri) && memcmp(ri.key,endkey,ri.key_len) <= 0) {",
          "new_line_content": "        size_t arraylen = 0;",
          "content_same": false
        },
        {
          "line": 2228,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(*nack))",
          "new_text": null,
          "old_line_content": "    streamNACK *nack = zmalloc(sizeof(*nack));",
          "new_line_content": " * specified as argument of the function. */",
          "content_same": false
        },
        {
          "line": 2229,
          "old_api": "mstime",
          "new_api": null,
          "old_text": "mstime()",
          "new_text": null,
          "old_line_content": "    nack->delivery_time = mstime();",
          "new_line_content": "streamNACK *streamCreateNACK(streamConsumer *consumer) {",
          "content_same": false
        },
        {
          "line": 2745,
          "old_api": "addReplyArrayLen",
          "new_api": null,
          "old_text": "addReplyArrayLen(c,4)",
          "new_text": null,
          "old_line_content": "            addReplyArrayLen(c,4);",
          "new_line_content": "            arraylen++;",
          "content_same": false
        },
        {
          "line": 2237,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(na)",
          "new_text": null,
          "old_line_content": "    zfree(na);",
          "new_line_content": "/* Free a NACK entry. */",
          "content_same": false
        },
        {
          "line": 2749,
          "old_api": "streamDecodeID",
          "new_api": null,
          "old_text": "streamDecodeID(ri.key,&id)",
          "new_text": null,
          "old_line_content": "            streamDecodeID(ri.key,&id);",
          "new_line_content": "            /* Entry ID. */",
          "content_same": false
        },
        {
          "line": 2750,
          "old_api": "addReplyStreamID",
          "new_api": null,
          "old_text": "addReplyStreamID(c,&id)",
          "new_text": null,
          "old_line_content": "            addReplyStreamID(c,&id);",
          "new_line_content": "            streamID id;",
          "content_same": false
        },
        {
          "line": 3262,
          "old_api": "streamParseAddOrTrimArgsOrReply",
          "new_api": null,
          "old_text": "streamParseAddOrTrimArgsOrReply(c, &parsed_args, 0)",
          "new_text": null,
          "old_line_content": "    if (streamParseAddOrTrimArgsOrReply(c, &parsed_args, 0) < 0)",
          "new_line_content": "    /* Argument parsing. */",
          "content_same": false
        },
        {
          "line": 2753,
          "old_api": "addReplyBulkCBuffer",
          "new_api": null,
          "old_text": "addReplyBulkCBuffer(c,nack->consumer->name,\n                                sdslen(nack->consumer->name))",
          "new_text": null,
          "old_line_content": "            addReplyBulkCBuffer(c,nack->consumer->name,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2754,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(nack->consumer->name)",
          "new_text": null,
          "old_line_content": "                                sdslen(nack->consumer->name));",
          "new_line_content": "            /* Consumer name. */",
          "content_same": false
        },
        {
          "line": 3267,
          "old_api": "lookupKeyWriteOrReply",
          "new_api": null,
          "old_text": "lookupKeyWriteOrReply(c,c->argv[1],shared.czero)",
          "new_text": null,
          "old_line_content": "    if ((o = lookupKeyWriteOrReply(c,c->argv[1],shared.czero)) == NULL",
          "new_line_content": "    /* If the key does not exist, we are ok returning zero, that is, the",
          "content_same": false
        },
        {
          "line": 3268,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,OBJ_STREAM)",
          "new_text": null,
          "old_line_content": "        || checkType(c,o,OBJ_STREAM)) return;",
          "new_line_content": "     * number of elements removed from the stream. */",
          "content_same": false
        },
        {
          "line": 2246,
          "old_api": "raxFree",
          "new_api": null,
          "old_text": "raxFree(sc->pel)",
          "new_text": null,
          "old_line_content": "    raxFree(sc->pel); /* No value free callback: the PEL entries are shared",
          "new_line_content": " * should do some work before. */",
          "content_same": false
        },
        {
          "line": 2759,
          "old_api": "addReplyLongLong",
          "new_api": null,
          "old_text": "addReplyLongLong(c,elapsed)",
          "new_text": null,
          "old_line_content": "            addReplyLongLong(c,elapsed);",
          "new_line_content": "            mstime_t elapsed = now - nack->delivery_time;",
          "content_same": false
        },
        {
          "line": 3272,
          "old_api": "streamTrim",
          "new_api": null,
          "old_text": "streamTrim(s, &parsed_args)",
          "new_text": null,
          "old_line_content": "    int64_t deleted = streamTrim(s, &parsed_args);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2249,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(sc)",
          "new_text": null,
          "old_line_content": "    zfree(sc);",
          "new_line_content": "                         between the consumer and the main stream PEL. */",
          "content_same": false
        },
        {
          "line": 2762,
          "old_api": "addReplyLongLong",
          "new_api": null,
          "old_text": "addReplyLongLong(c,nack->delivery_count)",
          "new_text": null,
          "old_line_content": "            addReplyLongLong(c,nack->delivery_count);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2765,
          "old_api": "setDeferredArrayLen",
          "new_api": null,
          "old_text": "setDeferredArrayLen(c,arraylen_ptr,arraylen)",
          "new_text": null,
          "old_line_content": "        setDeferredArrayLen(c,arraylen_ptr,arraylen);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2257,
          "old_api": "raxNew",
          "new_api": null,
          "old_text": "raxNew()",
          "new_text": null,
          "old_line_content": "    if (s->cgroups == NULL) s->cgroups = raxNew();",
          "new_line_content": " * group is returned. */",
          "content_same": false
        },
        {
          "line": 2258,
          "old_api": "raxFind",
          "new_api": null,
          "old_text": "raxFind(s->cgroups,(unsigned char*)name,namelen)",
          "new_text": null,
          "old_line_content": "    if (raxFind(s->cgroups,(unsigned char*)name,namelen) != raxNotFound)",
          "new_line_content": "streamCG *streamCreateCG(stream *s, char *name, size_t namelen, streamID *id) {",
          "content_same": false
        },
        {
          "line": 3281,
          "old_api": "streamRewriteApproxSpecifier",
          "new_api": null,
          "old_text": "streamRewriteApproxSpecifier(c,parsed_args.trim_strategy_arg_idx-1)",
          "new_text": null,
          "old_line_content": "            streamRewriteApproxSpecifier(c,parsed_args.trim_strategy_arg_idx-1);",
          "new_line_content": "             * It's enough to check only args->approx because there is no",
          "content_same": false
        },
        {
          "line": 3282,
          "old_api": "streamRewriteTrimArgument",
          "new_api": null,
          "old_text": "streamRewriteTrimArgument(c,s,parsed_args.trim_strategy,parsed_args.trim_strategy_arg_idx)",
          "new_text": null,
          "old_line_content": "            streamRewriteTrimArgument(c,s,parsed_args.trim_strategy,parsed_args.trim_strategy_arg_idx);",
          "new_line_content": "             * way LIMIT is given without the ~ option. */",
          "content_same": false
        },
        {
          "line": 2261,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(*cg))",
          "new_text": null,
          "old_line_content": "    streamCG *cg = zmalloc(sizeof(*cg));",
          "new_line_content": "        return NULL;",
          "content_same": false
        },
        {
          "line": 2262,
          "old_api": "raxNew",
          "new_api": null,
          "old_text": "raxNew()",
          "new_text": null,
          "old_line_content": "    cg->pel = raxNew();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3286,
          "old_api": "signalModifiedKey",
          "new_api": null,
          "old_text": "signalModifiedKey(c, c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "        signalModifiedKey(c, c->db,c->argv[1]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3289,
          "old_api": "addReplyLongLong",
          "new_api": null,
          "old_text": "addReplyLongLong(c,deleted)",
          "new_text": null,
          "old_line_content": "    addReplyLongLong(c,deleted);",
          "new_line_content": "        server.dirty += deleted;",
          "content_same": false
        },
        {
          "line": 2271,
          "old_api": "raxFreeWithCallback",
          "new_api": null,
          "old_text": "raxFreeWithCallback(cg->pel,(void(*)(void*))streamFreeNACK)",
          "new_text": null,
          "old_line_content": "    raxFreeWithCallback(cg->pel,(void(*)(void*))streamFreeNACK);",
          "new_line_content": "/* Free a consumer group and all its associated data. */",
          "content_same": false
        },
        {
          "line": 2272,
          "old_api": "raxFreeWithCallback",
          "new_api": null,
          "old_text": "raxFreeWithCallback(cg->consumers,(void(*)(void*))streamFreeConsumer)",
          "new_text": null,
          "old_line_content": "    raxFreeWithCallback(cg->consumers,(void(*)(void*))streamFreeConsumer);",
          "new_line_content": "void streamFreeCG(streamCG *cg) {",
          "content_same": false
        },
        {
          "line": 2280,
          "old_api": "raxFind",
          "new_api": null,
          "old_text": "raxFind(s->cgroups,(unsigned char*)groupname,\n                           sdslen(groupname))",
          "new_text": null,
          "old_line_content": "    streamCG *cg = raxFind(s->cgroups,(unsigned char*)groupname,",
          "new_line_content": "streamCG *streamLookupCG(stream *s, sds groupname) {",
          "content_same": false
        },
        {
          "line": 2281,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(groupname)",
          "new_text": null,
          "old_line_content": "                           sdslen(groupname));",
          "new_line_content": "    if (s->cgroups == NULL) return NULL;",
          "content_same": false
        },
        {
          "line": 3306,
          "old_api": "addReplySubcommandSyntaxError",
          "new_api": null,
          "old_text": "addReplySubcommandSyntaxError(c)",
          "new_text": null,
          "old_line_content": "            addReplySubcommandSyntaxError(c);",
          "new_line_content": "        /* Valid options are [FULL] or [FULL COUNT <count>] */",
          "content_same": false
        },
        {
          "line": 3311,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(optv[0]->ptr,\"full\")",
          "new_text": null,
          "old_line_content": "        if (strcasecmp(optv[0]->ptr,\"full\")) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3312,
          "old_api": "addReplySubcommandSyntaxError",
          "new_api": null,
          "old_text": "addReplySubcommandSyntaxError(c)",
          "new_text": null,
          "old_line_content": "            addReplySubcommandSyntaxError(c);",
          "new_line_content": "        /* First option must be \"FULL\" */",
          "content_same": false
        },
        {
          "line": 2293,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(*consumer))",
          "new_text": null,
          "old_line_content": "    streamConsumer *consumer = zmalloc(sizeof(*consumer));",
          "new_line_content": "    int notify = !(flags & SCC_NO_NOTIFY);",
          "content_same": false
        },
        {
          "line": 2294,
          "old_api": "raxTryInsert",
          "new_api": null,
          "old_text": "raxTryInsert(cg->consumers,(unsigned char*)name,\n                               sdslen(name),consumer,NULL)",
          "new_text": null,
          "old_line_content": "    int success = raxTryInsert(cg->consumers,(unsigned char*)name,",
          "new_line_content": "    int dirty = !(flags & SCC_NO_DIRTIFY);",
          "content_same": false
        },
        {
          "line": 3318,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(optv[1]->ptr,\"count\")",
          "new_text": null,
          "old_line_content": "            if (strcasecmp(optv[1]->ptr,\"count\")) {",
          "new_line_content": "        if (optc == 3) {",
          "content_same": false
        },
        {
          "line": 3319,
          "old_api": "addReplySubcommandSyntaxError",
          "new_api": null,
          "old_text": "addReplySubcommandSyntaxError(c)",
          "new_text": null,
          "old_line_content": "                addReplySubcommandSyntaxError(c);",
          "new_line_content": "            /* First option must be \"FULL\" */",
          "content_same": false
        },
        {
          "line": 3322,
          "old_api": "getLongLongFromObjectOrReply",
          "new_api": null,
          "old_text": "getLongLongFromObjectOrReply(c,optv[2],&count,NULL)",
          "new_text": null,
          "old_line_content": "            if (getLongLongFromObjectOrReply(c,optv[2],&count,NULL) == C_ERR)",
          "new_line_content": "                return;",
          "content_same": false
        },
        {
          "line": 2300,
          "old_api": "sdsdup",
          "new_api": null,
          "old_text": "sdsdup(name)",
          "new_text": null,
          "old_line_content": "    consumer->name = sdsdup(name);",
          "new_line_content": "        return NULL;",
          "content_same": false
        },
        {
          "line": 2301,
          "old_api": "raxNew",
          "new_api": null,
          "old_text": "raxNew()",
          "new_text": null,
          "old_line_content": "    consumer->pel = raxNew();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3328,
          "old_api": "addReplyMapLen",
          "new_api": null,
          "old_text": "addReplyMapLen(c,full ? 6 : 7)",
          "new_text": null,
          "old_line_content": "    addReplyMapLen(c,full ? 6 : 7);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3329,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c,\"length\")",
          "new_text": null,
          "old_line_content": "    addReplyBulkCString(c,\"length\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2313,
          "old_api": "raxFind",
          "new_api": null,
          "old_text": "raxFind(cg->consumers,(unsigned char*)name,\n                                       sdslen(name))",
          "new_text": null,
          "old_line_content": "    streamConsumer *consumer = raxFind(cg->consumers,(unsigned char*)name,",
          "new_line_content": "    if (cg == NULL) return NULL;",
          "content_same": false
        },
        {
          "line": 2314,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(name)",
          "new_text": null,
          "old_line_content": "                                       sdslen(name));",
          "new_line_content": "    int refresh = !(flags & SLC_NO_REFRESH);",
          "content_same": false
        },
        {
          "line": 3341,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c,\"groups\")",
          "new_text": null,
          "old_line_content": "        addReplyBulkCString(c,\"groups\");",
          "new_line_content": "        /* XINFO STREAM <key> */",
          "content_same": false
        },
        {
          "line": 3342,
          "old_api": "raxSize",
          "new_api": null,
          "old_text": "raxSize(s->cgroups)",
          "new_text": null,
          "old_line_content": "        addReplyLongLong(c,s->cgroups ? raxSize(s->cgroups) : 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2325,
          "old_api": "raxStart",
          "new_api": null,
          "old_text": "raxStart(&ri,consumer->pel)",
          "new_text": null,
          "old_line_content": "    raxStart(&ri,consumer->pel);",
          "new_line_content": "     * entry from the global entry. */",
          "content_same": false
        },
        {
          "line": 2326,
          "old_api": "raxSeek",
          "new_api": null,
          "old_text": "raxSeek(&ri,\"^\",NULL,0)",
          "new_text": null,
          "old_line_content": "    raxSeek(&ri,\"^\",NULL,0);",
          "new_line_content": "    raxIterator ri;",
          "content_same": false
        },
        {
          "line": 2837,
          "old_api": "lookupKeyRead",
          "new_api": null,
          "old_text": "lookupKeyRead(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    robj *o = lookupKeyRead(c->db,c->argv[1]);",
          "new_line_content": "void xclaimCommand(client *c) {",
          "content_same": false
        },
        {
          "line": 3349,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c,\"first-entry\")",
          "new_text": null,
          "old_line_content": "        addReplyBulkCString(c,\"first-entry\");",
          "new_line_content": "        start.ms = start.seq = 0;",
          "content_same": false
        },
        {
          "line": 3350,
          "old_api": "streamReplyWithRange",
          "new_api": null,
          "old_text": "streamReplyWithRange(c,s,&start,&end,1,0,NULL,NULL,\n                                       STREAM_RWR_RAWENTRIES,NULL)",
          "new_text": null,
          "old_line_content": "        emitted = streamReplyWithRange(c,s,&start,&end,1,0,NULL,NULL,",
          "new_line_content": "        end.ms = end.seq = UINT64_MAX;",
          "content_same": false
        },
        {
          "line": 2330,
          "old_api": "streamFreeNACK",
          "new_api": null,
          "old_text": "streamFreeNACK(nack)",
          "new_text": null,
          "old_line_content": "        streamFreeNACK(nack);",
          "new_line_content": "        streamNACK *nack = ri.data;",
          "content_same": false
        },
        {
          "line": 3353,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c,\"last-entry\")",
          "new_text": null,
          "old_line_content": "        addReplyBulkCString(c,\"last-entry\");",
          "new_line_content": "                                       STREAM_RWR_RAWENTRIES,NULL);",
          "content_same": false
        },
        {
          "line": 2845,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,OBJ_STREAM)",
          "new_text": null,
          "old_line_content": "        if (checkType(c,o,OBJ_STREAM)) return; /* Type error. */",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2846,
          "old_api": "streamLookupCG",
          "new_api": null,
          "old_text": "streamLookupCG(o->ptr,c->argv[2]->ptr)",
          "new_text": null,
          "old_line_content": "        group = streamLookupCG(o->ptr,c->argv[2]->ptr);",
          "new_line_content": "    if (o) {",
          "content_same": false
        },
        {
          "line": 2335,
          "old_api": "raxRemove",
          "new_api": null,
          "old_text": "raxRemove(cg->consumers,(unsigned char*)consumer->name,\n              sdslen(consumer->name),NULL)",
          "new_text": null,
          "old_line_content": "    raxRemove(cg->consumers,(unsigned char*)consumer->name,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2336,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(consumer->name)",
          "new_text": null,
          "old_line_content": "              sdslen(consumer->name),NULL);",
          "new_line_content": "    /* Deallocate the consumer. */",
          "content_same": false
        },
        {
          "line": 3361,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c,\"entries\")",
          "new_text": null,
          "old_line_content": "        addReplyBulkCString(c,\"entries\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3362,
          "old_api": "streamReplyWithRange",
          "new_api": null,
          "old_text": "streamReplyWithRange(c,s,NULL,NULL,count,0,NULL,NULL,0,NULL)",
          "new_text": null,
          "old_line_content": "        streamReplyWithRange(c,s,NULL,NULL,count,0,NULL,NULL,0,NULL);",
          "new_line_content": "        /* Stream entries */",
          "content_same": false
        },
        {
          "line": 2852,
          "old_api": "addReplyErrorFormat",
          "new_api": null,
          "old_text": "addReplyErrorFormat(c,\"-NOGROUP No such key '%s' or \"\n                              \"consumer group '%s'\", (char*)c->argv[1]->ptr,\n                              (char*)c->argv[2]->ptr)",
          "new_text": null,
          "old_line_content": "        addReplyErrorFormat(c,\"-NOGROUP No such key '%s' or \"",
          "new_line_content": "     * is mandatory. */",
          "content_same": false
        },
        {
          "line": 3365,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c,\"groups\")",
          "new_text": null,
          "old_line_content": "        addReplyBulkCString(c,\"groups\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2858,
          "old_api": "getLongLongFromObjectOrReply",
          "new_api": null,
          "old_text": "getLongLongFromObjectOrReply(c,c->argv[4],&minidle,\n        \"Invalid min-idle-time argument for XCLAIM\")",
          "new_text": null,
          "old_line_content": "    if (getLongLongFromObjectOrReply(c,c->argv[4],&minidle,",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3372,
          "old_api": "raxSeek",
          "new_api": null,
          "old_text": "raxSeek(&ri_cgroups,\"^\",NULL,0)",
          "new_text": null,
          "old_line_content": "            raxSeek(&ri_cgroups,\"^\",NULL,0);",
          "new_line_content": "            raxIterator ri_cgroups;",
          "content_same": false
        },
        {
          "line": 3378,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c,\"name\")",
          "new_text": null,
          "old_line_content": "                addReplyBulkCString(c,\"name\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3379,
          "old_api": "addReplyBulkCBuffer",
          "new_api": null,
          "old_text": "addReplyBulkCBuffer(c,ri_cgroups.key,ri_cgroups.key_len)",
          "new_text": null,
          "old_line_content": "                addReplyBulkCBuffer(c,ri_cgroups.key,ri_cgroups.key_len);",
          "new_line_content": "                /* Name */",
          "content_same": false
        },
        {
          "line": 1844,
          "old_api": "createObjectFromStreamID",
          "new_api": null,
          "old_text": "createObjectFromStreamID(&id)",
          "new_text": null,
          "old_line_content": "    robj *idarg = createObjectFromStreamID(&id);",
          "new_line_content": "    if (!parsed_args.id_given) {",
          "content_same": false
        },
        {
          "line": 3382,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c,\"last-delivered-id\")",
          "new_text": null,
          "old_line_content": "                addReplyBulkCString(c,\"last-delivered-id\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2359,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(opt,\"CREATE\")",
          "new_text": null,
          "old_line_content": "    if (c->argc == 6 && !strcasecmp(opt,\"CREATE\")) {",
          "new_line_content": "    /* CREATE has an MKSTREAM option that creates the stream if it",
          "content_same": false
        },
        {
          "line": 2360,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[5]->ptr,\"MKSTREAM\")",
          "new_text": null,
          "old_line_content": "        if (strcasecmp(c->argv[5]->ptr,\"MKSTREAM\")) {",
          "new_line_content": "     * does not exist. */",
          "content_same": false
        },
        {
          "line": 2872,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(streamID)*id_count)",
          "new_text": null,
          "old_line_content": "        ids = zmalloc(sizeof(streamID)*id_count);",
          "new_line_content": "    int id_count = c->argc-5;",
          "content_same": false
        },
        {
          "line": 3383,
          "old_api": "addReplyStreamID",
          "new_api": null,
          "old_text": "addReplyStreamID(c,&cg->last_id)",
          "new_text": null,
          "old_line_content": "                addReplyStreamID(c,&cg->last_id);",
          "new_line_content": "                /* Last delivered ID */",
          "content_same": false
        },
        {
          "line": 3386,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c,\"pel-count\")",
          "new_text": null,
          "old_line_content": "                addReplyBulkCString(c,\"pel-count\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3387,
          "old_api": "raxSize",
          "new_api": null,
          "old_text": "raxSize(cg->pel)",
          "new_text": null,
          "old_line_content": "                addReplyLongLong(c,raxSize(cg->pel));",
          "new_line_content": "                /* Group PEL count */",
          "content_same": false
        },
        {
          "line": 1850,
          "old_api": "signalKeyAsReady",
          "new_api": null,
          "old_text": "signalKeyAsReady(c->db, c->argv[1], OBJ_STREAM)",
          "new_text": null,
          "old_line_content": "    signalKeyAsReady(c->db, c->argv[1], OBJ_STREAM);",
          "new_line_content": "    /* We need to signal to blocked clients that there is new data on this",
          "content_same": false
        },
        {
          "line": 3390,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c,\"pending\")",
          "new_text": null,
          "old_line_content": "                addReplyBulkCString(c,\"pending\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2880,
          "old_api": "mstime",
          "new_api": null,
          "old_text": "mstime()",
          "new_text": null,
          "old_line_content": "    mstime_t now = mstime();",
          "new_line_content": "    /* If we stopped because some IDs cannot be parsed, perhaps they",
          "content_same": false
        },
        {
          "line": 2370,
          "old_api": "lookupKeyWrite",
          "new_api": null,
          "old_text": "lookupKeyWrite(c->db,c->argv[2])",
          "new_text": null,
          "old_line_content": "        o = lookupKeyWrite(c->db,c->argv[2]);",
          "new_line_content": "    /* Everything but the \"HELP\" option requires a key and group name. */",
          "content_same": false
        },
        {
          "line": 3395,
          "old_api": "raxSeek",
          "new_api": null,
          "old_text": "raxSeek(&ri_cg_pel,\"^\",NULL,0)",
          "new_text": null,
          "old_line_content": "                raxSeek(&ri_cg_pel,\"^\",NULL,0);",
          "new_line_content": "                raxIterator ri_cg_pel;",
          "content_same": false
        },
        {
          "line": 2886,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(opt,\"FORCE\")",
          "new_text": null,
          "old_line_content": "        if (!strcasecmp(opt,\"FORCE\")) {",
          "new_line_content": "        int moreargs = (c->argc-1) - j; /* Number of additional arguments. */",
          "content_same": false
        },
        {
          "line": 3402,
          "old_api": "streamDecodeID",
          "new_api": null,
          "old_text": "streamDecodeID(ri_cg_pel.key,&id)",
          "new_text": null,
          "old_line_content": "                    streamDecodeID(ri_cg_pel.key,&id);",
          "new_line_content": "                    /* Entry ID. */",
          "content_same": false
        },
        {
          "line": 3403,
          "old_api": "addReplyStreamID",
          "new_api": null,
          "old_text": "addReplyStreamID(c,&id)",
          "new_text": null,
          "old_line_content": "                    addReplyStreamID(c,&id);",
          "new_line_content": "                    streamID id;",
          "content_same": false
        },
        {
          "line": 2382,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\n                \"The XGROUP subcommand requires the key to exist. \"\n                \"Note that for CREATE you may want to use the MKSTREAM \"\n                \"option to create an empty stream automatically.\")",
          "new_text": null,
          "old_line_content": "            addReplyError(c,",
          "new_line_content": "        /* At this point key must exist, or there is an error. */",
          "content_same": false
        },
        {
          "line": 3406,
          "old_api": "serverAssert",
          "new_api": null,
          "old_text": "serverAssert(nack->consumer)",
          "new_text": null,
          "old_line_content": "                    serverAssert(nack->consumer); /* assertion for valgrind (avoid NPD) */",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2896,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(opt,\"TIME\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcasecmp(opt,\"TIME\") && moreargs) {",
          "new_line_content": "                != C_OK) goto cleanup;",
          "content_same": false
        },
        {
          "line": 3407,
          "old_api": "addReplyBulkCBuffer",
          "new_api": null,
          "old_text": "addReplyBulkCBuffer(c,nack->consumer->name,\n                                        sdslen(nack->consumer->name))",
          "new_text": null,
          "old_line_content": "                    addReplyBulkCBuffer(c,nack->consumer->name,",
          "new_line_content": "                    /* Consumer name. */",
          "content_same": false
        },
        {
          "line": 1870,
          "old_api": "streamParseIntervalIDOrReply",
          "new_api": null,
          "old_text": "streamParseIntervalIDOrReply(c,startarg,&startid,&startex,0)",
          "new_text": null,
          "old_line_content": "    if (streamParseIntervalIDOrReply(c,startarg,&startid,&startex,0) != C_OK)",
          "new_line_content": "    ",
          "content_same": false
        },
        {
          "line": 3411,
          "old_api": "addReplyLongLong",
          "new_api": null,
          "old_text": "addReplyLongLong(c,nack->delivery_time)",
          "new_text": null,
          "old_line_content": "                    addReplyLongLong(c,nack->delivery_time);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1873,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\"invalid start ID for the interval\")",
          "new_text": null,
          "old_line_content": "        addReplyError(c,\"invalid start ID for the interval\");",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 2901,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(opt,\"RETRYCOUNT\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcasecmp(opt,\"RETRYCOUNT\") && moreargs) {",
          "new_line_content": "                \"Invalid TIME option argument for XCLAIM\")",
          "content_same": false
        },
        {
          "line": 2390,
          "old_api": "streamLookupCG",
          "new_api": null,
          "old_text": "streamLookupCG(s,grpname)",
          "new_text": null,
          "old_line_content": "        if ((cg = streamLookupCG(s,grpname)) == NULL &&",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2391,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(opt,\"SETID\")",
          "new_text": null,
          "old_line_content": "            (!strcasecmp(opt,\"SETID\") ||",
          "new_line_content": "        /* Certain subcommands require the group to exist. */",
          "content_same": false
        },
        {
          "line": 3414,
          "old_api": "addReplyLongLong",
          "new_api": null,
          "old_text": "addReplyLongLong(c,nack->delivery_count)",
          "new_text": null,
          "old_line_content": "                    addReplyLongLong(c,nack->delivery_count);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1876,
          "old_api": "streamParseIntervalIDOrReply",
          "new_api": null,
          "old_text": "streamParseIntervalIDOrReply(c,endarg,&endid,&endex,UINT64_MAX)",
          "new_text": null,
          "old_line_content": "    if (streamParseIntervalIDOrReply(c,endarg,&endid,&endex,UINT64_MAX) != C_OK)",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 2906,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(opt,\"LASTID\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcasecmp(opt,\"LASTID\") && moreargs) {",
          "new_line_content": "                \"Invalid RETRYCOUNT option argument for XCLAIM\")",
          "content_same": false
        },
        {
          "line": 3418,
          "old_api": "setDeferredArrayLen",
          "new_api": null,
          "old_text": "setDeferredArrayLen(c,arrayptr_cg_pel,arraylen_cg_pel)",
          "new_text": null,
          "old_line_content": "                setDeferredArrayLen(c,arrayptr_cg_pel,arraylen_cg_pel);",
          "new_line_content": "                    arraylen_cg_pel++;",
          "content_same": false
        },
        {
          "line": 3419,
          "old_api": "raxStop",
          "new_api": null,
          "old_text": "raxStop(&ri_cg_pel)",
          "new_text": null,
          "old_line_content": "                raxStop(&ri_cg_pel);",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 1879,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\"invalid end ID for the interval\")",
          "new_text": null,
          "old_line_content": "        addReplyError(c,\"invalid end ID for the interval\");",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 3422,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c,\"consumers\")",
          "new_text": null,
          "old_line_content": "                addReplyBulkCString(c,\"consumers\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3423,
          "old_api": "raxSize",
          "new_api": null,
          "old_text": "raxSize(cg->consumers)",
          "new_text": null,
          "old_line_content": "                addReplyArrayLen(c,raxSize(cg->consumers));",
          "new_line_content": "                /* Consumers */",
          "content_same": false
        },
        {
          "line": 1887,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[j]->ptr,\"COUNT\")",
          "new_text": null,
          "old_line_content": "            if (strcasecmp(c->argv[j]->ptr,\"COUNT\") == 0 && additional >= 1) {",
          "new_line_content": "        for (int j = 4; j < c->argc; j++) {",
          "content_same": false
        },
        {
          "line": 1888,
          "old_api": "getLongLongFromObjectOrReply",
          "new_api": null,
          "old_text": "getLongLongFromObjectOrReply(c,c->argv[j+1],&count,NULL)",
          "new_text": null,
          "old_line_content": "                if (getLongLongFromObjectOrReply(c,c->argv[j+1],&count,NULL)",
          "new_line_content": "            int additional = c->argc-j-1;",
          "content_same": false
        },
        {
          "line": 3426,
          "old_api": "raxSeek",
          "new_api": null,
          "old_text": "raxSeek(&ri_consumers,\"^\",NULL,0)",
          "new_text": null,
          "old_line_content": "                raxSeek(&ri_consumers,\"^\",NULL,0);",
          "new_line_content": "                raxIterator ri_consumers;",
          "content_same": false
        },
        {
          "line": 2403,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(opt,\"HELP\")",
          "new_text": null,
          "old_line_content": "    if (c->argc == 2 && !strcasecmp(opt,\"HELP\")) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2915,
          "old_api": "streamCompareID",
          "new_api": null,
          "old_text": "streamCompareID(&last_id,&group->last_id)",
          "new_text": null,
          "old_line_content": "    if (streamCompareID(&last_id,&group->last_id) > 0) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1893,
          "old_api": "addReplyErrorObject",
          "new_api": null,
          "old_text": "addReplyErrorObject(c,shared.syntaxerr)",
          "new_text": null,
          "old_line_content": "                addReplyErrorObject(c,shared.syntaxerr);",
          "new_line_content": "                j++; /* Consume additional arg. */",
          "content_same": false
        },
        {
          "line": 3432,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c,\"name\")",
          "new_text": null,
          "old_line_content": "                    addReplyBulkCString(c,\"name\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3433,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(consumer->name)",
          "new_text": null,
          "old_line_content": "                    addReplyBulkCBuffer(c,consumer->name,sdslen(consumer->name));",
          "new_line_content": "                    /* Consumer name */",
          "content_same": false
        },
        {
          "line": 3436,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c,\"seen-time\")",
          "new_text": null,
          "old_line_content": "                    addReplyBulkCString(c,\"seen-time\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3437,
          "old_api": "addReplyLongLong",
          "new_api": null,
          "old_text": "addReplyLongLong(c,consumer->seen_time)",
          "new_text": null,
          "old_line_content": "                    addReplyLongLong(c,consumer->seen_time);",
          "new_line_content": "                    /* Seen-time */",
          "content_same": false
        },
        {
          "line": 1900,
          "old_api": "lookupKeyReadOrReply",
          "new_api": null,
          "old_text": "lookupKeyReadOrReply(c,c->argv[1],shared.emptyarray)",
          "new_text": null,
          "old_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.emptyarray)) == NULL ||",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1901,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,OBJ_STREAM)",
          "new_text": null,
          "old_line_content": "         checkType(c,o,OBJ_STREAM)) return;",
          "new_line_content": "    /* Return the specified range to the user. */",
          "content_same": false
        },
        {
          "line": 3440,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c,\"pel-count\")",
          "new_text": null,
          "old_line_content": "                    addReplyBulkCString(c,\"pel-count\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3441,
          "old_api": "raxSize",
          "new_api": null,
          "old_text": "raxSize(consumer->pel)",
          "new_text": null,
          "old_line_content": "                    addReplyLongLong(c,raxSize(consumer->pel));",
          "new_line_content": "                    /* Consumer PEL count */",
          "content_same": false
        },
        {
          "line": 1906,
          "old_api": "addReplyNullArray",
          "new_api": null,
          "old_text": "addReplyNullArray(c)",
          "new_text": null,
          "old_line_content": "        addReplyNullArray(c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2419,
          "old_api": "addReplyHelp",
          "new_api": null,
          "old_text": "addReplyHelp(c, help)",
          "new_text": null,
          "old_line_content": "        addReplyHelp(c, help);",
          "new_line_content": "NULL",
          "content_same": false
        },
        {
          "line": 2420,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(opt,\"CREATE\")",
          "new_text": null,
          "old_line_content": "    } else if (!strcasecmp(opt,\"CREATE\") && (c->argc == 5 || c->argc == 6)) {",
          "new_line_content": "        };",
          "content_same": false
        },
        {
          "line": 3444,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c,\"pending\")",
          "new_text": null,
          "old_line_content": "                    addReplyBulkCString(c,\"pending\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1909,
          "old_api": "streamReplyWithRange",
          "new_api": null,
          "old_text": "streamReplyWithRange(c,s,&startid,&endid,count,rev,NULL,NULL,0,NULL)",
          "new_text": null,
          "old_line_content": "        streamReplyWithRange(c,s,&startid,&endid,count,rev,NULL,NULL,0,NULL);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 3449,
          "old_api": "raxSeek",
          "new_api": null,
          "old_text": "raxSeek(&ri_cpel,\"^\",NULL,0)",
          "new_text": null,
          "old_line_content": "                    raxSeek(&ri_cpel,\"^\",NULL,0);",
          "new_line_content": "                    raxIterator ri_cpel;",
          "content_same": false
        },
        {
          "line": 2938,
          "old_api": "addReplyDeferredLen",
          "new_api": null,
          "old_text": "addReplyDeferredLen(c)",
          "new_text": null,
          "old_line_content": "    void *arraylenptr = addReplyDeferredLen(c);",
          "new_line_content": "    /* Do the actual claiming. */",
          "content_same": false
        },
        {
          "line": 1915,
          "old_api": "xrangeGenericCommand",
          "new_api": null,
          "old_text": "xrangeGenericCommand(c,0)",
          "new_text": null,
          "old_line_content": "    xrangeGenericCommand(c,0);",
          "new_line_content": "/* XRANGE key start end [COUNT <n>] */",
          "content_same": false
        },
        {
          "line": 2429,
          "old_api": "streamParseStrictIDOrReply",
          "new_api": null,
          "old_text": "streamParseStrictIDOrReply(c,c->argv[4],&id,0)",
          "new_text": null,
          "old_line_content": "        } else if (streamParseStrictIDOrReply(c,c->argv[4],&id,0) != C_OK) {",
          "new_line_content": "                id.seq = 0;",
          "content_same": false
        },
        {
          "line": 2944,
          "old_api": "streamEncodeID",
          "new_api": null,
          "old_text": "streamEncodeID(buf,&id)",
          "new_text": null,
          "old_line_content": "        streamEncodeID(buf,&id);",
          "new_line_content": "        streamID id = ids[j-5];",
          "content_same": false
        },
        {
          "line": 3456,
          "old_api": "streamDecodeID",
          "new_api": null,
          "old_text": "streamDecodeID(ri_cpel.key,&id)",
          "new_text": null,
          "old_line_content": "                        streamDecodeID(ri_cpel.key,&id);",
          "new_line_content": "                        /* Entry ID. */",
          "content_same": false
        },
        {
          "line": 3457,
          "old_api": "addReplyStreamID",
          "new_api": null,
          "old_text": "addReplyStreamID(c,&id)",
          "new_text": null,
          "old_line_content": "                        addReplyStreamID(c,&id);",
          "new_line_content": "                        streamID id;",
          "content_same": false
        },
        {
          "line": 2435,
          "old_api": "serverAssert",
          "new_api": null,
          "old_text": "serverAssert(mkstream)",
          "new_text": null,
          "old_line_content": "            serverAssert(mkstream);",
          "new_line_content": "        /* Handle the MKSTREAM option now that the command can no longer fail. */",
          "content_same": false
        },
        {
          "line": 2436,
          "old_api": "createStreamObject",
          "new_api": null,
          "old_text": "createStreamObject()",
          "new_text": null,
          "old_line_content": "            o = createStreamObject();",
          "new_line_content": "        if (s == NULL) {",
          "content_same": false
        },
        {
          "line": 2947,
          "old_api": "raxFind",
          "new_api": null,
          "old_text": "raxFind(group->pel,buf,sizeof(buf))",
          "new_text": null,
          "old_line_content": "        streamNACK *nack = raxFind(group->pel,buf,sizeof(buf));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3460,
          "old_api": "addReplyLongLong",
          "new_api": null,
          "old_text": "addReplyLongLong(c,nack->delivery_time)",
          "new_text": null,
          "old_line_content": "                        addReplyLongLong(c,nack->delivery_time);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3463,
          "old_api": "addReplyLongLong",
          "new_api": null,
          "old_text": "addReplyLongLong(c,nack->delivery_count)",
          "new_text": null,
          "old_line_content": "                        addReplyLongLong(c,nack->delivery_count);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1920,
          "old_api": "xrangeGenericCommand",
          "new_api": null,
          "old_text": "xrangeGenericCommand(c,1)",
          "new_text": null,
          "old_line_content": "    xrangeGenericCommand(c,1);",
          "new_line_content": "/* XREVRANGE key end start [COUNT <n>] */",
          "content_same": false
        },
        {
          "line": 1926,
          "old_api": "lookupKeyReadOrReply",
          "new_api": null,
          "old_text": "lookupKeyReadOrReply(c,c->argv[1],shared.czero)",
          "new_text": null,
          "old_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.czero)) == NULL",
          "new_line_content": "void xlenCommand(client *c) {",
          "content_same": false
        },
        {
          "line": 2442,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(grpname)",
          "new_text": null,
          "old_line_content": "        streamCG *cg = streamCreateCG(s,grpname,sdslen(grpname),&id);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3467,
          "old_api": "setDeferredArrayLen",
          "new_api": null,
          "old_text": "setDeferredArrayLen(c,arrayptr_cpel,arraylen_cpel)",
          "new_text": null,
          "old_line_content": "                    setDeferredArrayLen(c,arrayptr_cpel,arraylen_cpel);",
          "new_line_content": "                        arraylen_cpel++;",
          "content_same": false
        },
        {
          "line": 2956,
          "old_api": "streamIteratorStart",
          "new_api": null,
          "old_text": "streamIteratorStart(&myiterator,o->ptr,&id,&id,0)",
          "new_text": null,
          "old_line_content": "            streamIteratorStart(&myiterator,o->ptr,&id,&id,0);",
          "new_line_content": "        if (force && nack == raxNotFound) {",
          "content_same": false
        },
        {
          "line": 3468,
          "old_api": "raxStop",
          "new_api": null,
          "old_text": "raxStop(&ri_cpel)",
          "new_text": null,
          "old_line_content": "                    raxStop(&ri_cpel);",
          "new_line_content": "                    }",
          "content_same": false
        },
        {
          "line": 1927,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,OBJ_STREAM)",
          "new_text": null,
          "old_line_content": "        || checkType(c,o,OBJ_STREAM)) return;",
          "new_line_content": "    robj *o;",
          "content_same": false
        },
        {
          "line": 2960,
          "old_api": "streamIteratorGetID",
          "new_api": null,
          "old_text": "streamIteratorGetID(&myiterator,&item_id,&numfields)",
          "new_text": null,
          "old_line_content": "            if (streamIteratorGetID(&myiterator,&item_id,&numfields)) found = 1;",
          "new_line_content": "            int found = 0;",
          "content_same": false
        },
        {
          "line": 2449,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\"-BUSYGROUP Consumer Group name already exists\")",
          "new_text": null,
          "old_line_content": "            addReplyError(c,\"-BUSYGROUP Consumer Group name already exists\");",
          "new_line_content": "                                c->argv[2],c->db->id);",
          "content_same": false
        },
        {
          "line": 2961,
          "old_api": "streamIteratorStop",
          "new_api": null,
          "old_text": "streamIteratorStop(&myiterator)",
          "new_text": null,
          "old_line_content": "            streamIteratorStop(&myiterator);",
          "new_line_content": "            streamID item_id;",
          "content_same": false
        },
        {
          "line": 2967,
          "old_api": "streamCreateNACK",
          "new_api": null,
          "old_text": "streamCreateNACK(NULL)",
          "new_text": null,
          "old_line_content": "            nack = streamCreateNACK(NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2968,
          "old_api": "raxInsert",
          "new_api": null,
          "old_text": "raxInsert(group->pel,buf,sizeof(buf),nack,NULL)",
          "new_text": null,
          "old_line_content": "            raxInsert(group->pel,buf,sizeof(buf),nack,NULL);",
          "new_line_content": "            /* Create the NACK. */",
          "content_same": false
        },
        {
          "line": 2459,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.ok)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.ok);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1949,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(c->argv[0]->ptr)",
          "new_text": null,
          "old_line_content": "    int xreadgroup = sdslen(c->argv[0]->ptr) == 10; /* XREAD or XREADGROUP? */",
          "new_line_content": "    streamID *ids = static_ids;",
          "content_same": false
        },
        {
          "line": 2462,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(opt,\"DESTROY\")",
          "new_text": null,
          "old_line_content": "    } else if (!strcasecmp(opt,\"DESTROY\") && c->argc == 4) {",
          "new_line_content": "        server.dirty++;",
          "content_same": false
        },
        {
          "line": 3487,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[1]->ptr,\"HELP\")",
          "new_text": null,
          "old_line_content": "    if (!strcasecmp(c->argv[1]->ptr,\"HELP\")) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2465,
          "old_api": "streamFreeCG",
          "new_api": null,
          "old_text": "streamFreeCG(cg)",
          "new_text": null,
          "old_line_content": "            streamFreeCG(cg);",
          "new_line_content": "        if (cg) {",
          "content_same": false
        },
        {
          "line": 1957,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(o,\"BLOCK\")",
          "new_text": null,
          "old_line_content": "        if (!strcasecmp(o,\"BLOCK\") && moreargs) {",
          "new_line_content": "        int moreargs = c->argc-i-1;",
          "content_same": false
        },
        {
          "line": 2471,
          "old_api": "signalKeyAsReady",
          "new_api": null,
          "old_text": "signalKeyAsReady(c->db,c->argv[2],OBJ_STREAM)",
          "new_text": null,
          "old_line_content": "            signalKeyAsReady(c->db,c->argv[2],OBJ_STREAM);",
          "new_line_content": "                                c->argv[2],c->db->id);",
          "content_same": false
        },
        {
          "line": 2983,
          "old_api": "streamLookupConsumer",
          "new_api": null,
          "old_text": "streamLookupConsumer(group,name,SLC_DEFAULT)",
          "new_text": null,
          "old_line_content": "                (consumer = streamLookupConsumer(group,name,SLC_DEFAULT)) == NULL)",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1963,
          "old_api": "addReplyErrorFormat",
          "new_api": null,
          "old_text": "addReplyErrorFormat(c, \"%s command is not allowed with BLOCK option from scripts\", (char *)c->argv[0]->ptr)",
          "new_text": null,
          "old_line_content": "                addReplyErrorFormat(c, \"%s command is not allowed with BLOCK option from scripts\", (char *)c->argv[0]->ptr);",
          "new_line_content": "                 * on Lua/MULTI/RM_Call we want special treatment for Lua to keep backward compatibility.",
          "content_same": false
        },
        {
          "line": 2476,
          "old_api": "streamCreateConsumer",
          "new_api": null,
          "old_text": "streamCreateConsumer(cg,c->argv[4]->ptr,c->argv[2],\n                                                       c->db->id,SCC_DEFAULT)",
          "new_text": null,
          "old_line_content": "        streamConsumer *created = streamCreateConsumer(cg,c->argv[4]->ptr,c->argv[2],",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3502,
          "old_api": "addReplyHelp",
          "new_api": null,
          "old_text": "addReplyHelp(c, help)",
          "new_text": null,
          "old_line_content": "        addReplyHelp(c, help);",
          "new_line_content": "NULL",
          "content_same": false
        },
        {
          "line": 2479,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(opt,\"DELCONSUMER\")",
          "new_text": null,
          "old_line_content": "    } else if (!strcasecmp(opt,\"DELCONSUMER\") && c->argc == 5) {",
          "new_line_content": "                                                       c->db->id,SCC_DEFAULT);",
          "content_same": false
        },
        {
          "line": 2992,
          "old_api": "raxRemove",
          "new_api": null,
          "old_text": "raxRemove(nack->consumer->pel,buf,sizeof(buf),NULL)",
          "new_text": null,
          "old_line_content": "                    raxRemove(nack->consumer->pel,buf,sizeof(buf),NULL);",
          "new_line_content": "                 * NACK above because of the FORCE option. */",
          "content_same": false
        },
        {
          "line": 3505,
          "old_api": "addReplySubcommandSyntaxError",
          "new_api": null,
          "old_text": "addReplySubcommandSyntaxError(c)",
          "new_text": null,
          "old_line_content": "        addReplySubcommandSyntaxError(c);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 1967,
          "old_api": "getTimeoutFromObjectOrReply",
          "new_api": null,
          "old_text": "getTimeoutFromObjectOrReply(c,c->argv[i],&timeout,\n                UNIT_MILLISECONDS)",
          "new_text": null,
          "old_line_content": "            if (getTimeoutFromObjectOrReply(c,c->argv[i],&timeout,",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 2485,
          "old_api": "raxSize",
          "new_api": null,
          "old_text": "raxSize(consumer->pel)",
          "new_text": null,
          "old_line_content": "            pending = raxSize(consumer->pel);",
          "new_line_content": "            /* Delete the consumer and returns the number of pending messages",
          "content_same": false
        },
        {
          "line": 2486,
          "old_api": "streamDelConsumer",
          "new_api": null,
          "old_text": "streamDelConsumer(cg,consumer)",
          "new_text": null,
          "old_line_content": "            streamDelConsumer(cg,consumer);",
          "new_line_content": "             * that were yet associated with such a consumer. */",
          "content_same": false
        },
        {
          "line": 1974,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(o,\"STREAMS\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcasecmp(o,\"STREAMS\") && moreargs) {",
          "new_line_content": "                return;",
          "content_same": false
        },
        {
          "line": 1978,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\"Unbalanced XREAD list of streams: \"\n                                \"for each stream key an ID or '$' must be \"\n                                \"specified.\")",
          "new_text": null,
          "old_line_content": "                addReplyError(c,\"Unbalanced XREAD list of streams: \"",
          "new_line_content": "            streams_count = (c->argc-streams_arg);",
          "content_same": false
        },
        {
          "line": 2491,
          "old_api": "addReplyLongLong",
          "new_api": null,
          "old_text": "addReplyLongLong(c,pending)",
          "new_text": null,
          "old_line_content": "        addReplyLongLong(c,pending);",
          "new_line_content": "                                c->argv[2],c->db->id);",
          "content_same": false
        },
        {
          "line": 3004,
          "old_api": "raxInsert",
          "new_api": null,
          "old_text": "raxInsert(consumer->pel,buf,sizeof(buf),nack,NULL)",
          "new_text": null,
          "old_line_content": "                raxInsert(consumer->pel,buf,sizeof(buf),nack,NULL);",
          "new_line_content": "            if (nack->consumer != consumer) {",
          "content_same": false
        },
        {
          "line": 3515,
          "old_api": "lookupKeyReadOrReply",
          "new_api": null,
          "old_text": "lookupKeyReadOrReply(c,key,shared.nokeyerr)",
          "new_text": null,
          "old_line_content": "    robj *o = lookupKeyReadOrReply(c,key,shared.nokeyerr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3516,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,OBJ_STREAM)",
          "new_text": null,
          "old_line_content": "    if (o == NULL || checkType(c,o,OBJ_STREAM)) return;",
          "new_line_content": "    /* Lookup the key now, this is common for all the subcommands but HELP. */",
          "content_same": false
        },
        {
          "line": 3520,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(opt,\"CONSUMERS\")",
          "new_text": null,
          "old_line_content": "    if (!strcasecmp(opt,\"CONSUMERS\") && c->argc == 4) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3009,
          "old_api": "addReplyStreamID",
          "new_api": null,
          "old_text": "addReplyStreamID(c,&id)",
          "new_text": null,
          "old_line_content": "                addReplyStreamID(c,&id);",
          "new_line_content": "            /* Send the reply for this entry. */",
          "content_same": false
        },
        {
          "line": 1985,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(o,\"GROUP\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcasecmp(o,\"GROUP\") && moreargs >= 2) {",
          "new_line_content": "            streams_count /= 2; /* We have two arguments for each stream. */",
          "content_same": false
        },
        {
          "line": 2501,
          "old_api": "lookupKeyWriteOrReply",
          "new_api": null,
          "old_text": "lookupKeyWriteOrReply(c,c->argv[1],shared.nokeyerr)",
          "new_text": null,
          "old_line_content": "    robj *o = lookupKeyWriteOrReply(c,c->argv[1],shared.nokeyerr);",
          "new_line_content": " * Set the internal \"last ID\" of a stream. */",
          "content_same": false
        },
        {
          "line": 2502,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,OBJ_STREAM)",
          "new_text": null,
          "old_line_content": "    if (o == NULL || checkType(c,o,OBJ_STREAM)) return;",
          "new_line_content": "void xsetidCommand(client *c) {",
          "content_same": false
        },
        {
          "line": 2506,
          "old_api": "streamParseStrictIDOrReply",
          "new_api": null,
          "old_text": "streamParseStrictIDOrReply(c,c->argv[2],&id,0)",
          "new_text": null,
          "old_line_content": "    if (streamParseStrictIDOrReply(c,c->argv[2],&id,0) != C_OK) return;",
          "new_line_content": "    stream *s = o->ptr;",
          "content_same": false
        },
        {
          "line": 3018,
          "old_api": "streamPropagateXCLAIM",
          "new_api": null,
          "old_text": "streamPropagateXCLAIM(c,c->argv[1],group,c->argv[2],c->argv[j],nack)",
          "new_text": null,
          "old_line_content": "            streamPropagateXCLAIM(c,c->argv[1],group,c->argv[2],c->argv[j],nack);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3530,
          "old_api": "raxSize",
          "new_api": null,
          "old_text": "raxSize(cg->consumers)",
          "new_text": null,
          "old_line_content": "        addReplyArrayLen(c,raxSize(cg->consumers));",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3533,
          "old_api": "raxSeek",
          "new_api": null,
          "old_text": "raxSeek(&ri,\"^\",NULL,0)",
          "new_text": null,
          "old_line_content": "        raxSeek(&ri,\"^\",NULL,0);",
          "new_line_content": "        raxIterator ri;",
          "content_same": false
        },
        {
          "line": 1994,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(o,\"NOACK\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcasecmp(o,\"NOACK\")) {",
          "new_line_content": "            consumername = c->argv[i+2];",
          "content_same": false
        },
        {
          "line": 3024,
          "old_api": "streamPropagateGroupID",
          "new_api": null,
          "old_text": "streamPropagateGroupID(c,c->argv[1],group,c->argv[2])",
          "new_text": null,
          "old_line_content": "        streamPropagateGroupID(c,c->argv[1],group,c->argv[2]);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2513,
          "old_api": "streamLastValidID",
          "new_api": null,
          "old_text": "streamLastValidID(s,&maxid)",
          "new_text": null,
          "old_line_content": "        streamLastValidID(s,&maxid);",
          "new_line_content": "    if (s->length > 0) {",
          "content_same": false
        },
        {
          "line": 2002,
          "old_api": "addReplyErrorObject",
          "new_api": null,
          "old_text": "addReplyErrorObject(c,shared.syntaxerr)",
          "new_text": null,
          "old_line_content": "            addReplyErrorObject(c,shared.syntaxerr);",
          "new_line_content": "            noack = 1;",
          "content_same": false
        },
        {
          "line": 3027,
          "old_api": "setDeferredArrayLen",
          "new_api": null,
          "old_text": "setDeferredArrayLen(c,arraylenptr,arraylen)",
          "new_text": null,
          "old_line_content": "    setDeferredArrayLen(c,arraylenptr,arraylen);",
          "new_line_content": "        server.dirty++;",
          "content_same": false
        },
        {
          "line": 2516,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\"The ID specified in XSETID is smaller than the \"\n                            \"target stream top item\")",
          "new_text": null,
          "old_line_content": "            addReplyError(c,\"The ID specified in XSETID is smaller than the \"",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3028,
          "old_api": "preventCommandPropagation",
          "new_api": null,
          "old_text": "preventCommandPropagation(c)",
          "new_text": null,
          "old_line_content": "    preventCommandPropagation(c);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3540,
          "old_api": "addReplyMapLen",
          "new_api": null,
          "old_text": "addReplyMapLen(c,3)",
          "new_text": null,
          "old_line_content": "            addReplyMapLen(c,3);",
          "new_line_content": "            if (idle < 0) idle = 0;",
          "content_same": false
        },
        {
          "line": 3541,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c,\"name\")",
          "new_text": null,
          "old_line_content": "            addReplyBulkCString(c,\"name\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2009,
          "old_api": "addReplyErrorObject",
          "new_api": null,
          "old_text": "addReplyErrorObject(c,shared.syntaxerr)",
          "new_text": null,
          "old_line_content": "        addReplyErrorObject(c,shared.syntaxerr);",
          "new_line_content": "    /* STREAMS option is mandatory. */",
          "content_same": false
        },
        {
          "line": 2522,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.ok)",
          "new_text": null,
          "old_line_content": "    addReply(c,shared.ok);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3549,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(opt,\"GROUPS\")",
          "new_text": null,
          "old_line_content": "    } else if (!strcasecmp(opt,\"GROUPS\") && c->argc == 3) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3552,
          "old_api": "addReplyArrayLen",
          "new_api": null,
          "old_text": "addReplyArrayLen(c,0)",
          "new_text": null,
          "old_line_content": "            addReplyArrayLen(c,0);",
          "new_line_content": "        /* XINFO GROUPS <key>. */",
          "content_same": false
        },
        {
          "line": 2016,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\"Missing GROUP option for XREADGROUP\")",
          "new_text": null,
          "old_line_content": "        addReplyError(c,\"Missing GROUP option for XREADGROUP\");",
          "new_line_content": "     * provide the GROUP option. */",
          "content_same": false
        },
        {
          "line": 3556,
          "old_api": "raxSize",
          "new_api": null,
          "old_text": "raxSize(s->cgroups)",
          "new_text": null,
          "old_line_content": "        addReplyArrayLen(c,raxSize(s->cgroups));",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2022,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(streamID)*streams_count)",
          "new_text": null,
          "old_line_content": "        ids = zmalloc(sizeof(streamID)*streams_count);",
          "new_line_content": "    /* Parse the IDs and resolve the group name. */",
          "content_same": false
        },
        {
          "line": 3559,
          "old_api": "raxSeek",
          "new_api": null,
          "old_text": "raxSeek(&ri,\"^\",NULL,0)",
          "new_text": null,
          "old_line_content": "        raxSeek(&ri,\"^\",NULL,0);",
          "new_line_content": "        raxIterator ri;",
          "content_same": false
        },
        {
          "line": 2023,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(streamCG*)*streams_count)",
          "new_text": null,
          "old_line_content": "    if (groupname) groups = zmalloc(sizeof(streamCG*)*streams_count);",
          "new_line_content": "    if (streams_count > STREAMID_STATIC_VECTOR_LEN)",
          "content_same": false
        },
        {
          "line": 2538,
          "old_api": "lookupKeyRead",
          "new_api": null,
          "old_text": "lookupKeyRead(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    robj *o = lookupKeyRead(c->db,c->argv[1]);",
          "new_line_content": "void xackCommand(client *c) {",
          "content_same": false
        },
        {
          "line": 3051,
          "old_api": "lookupKeyRead",
          "new_api": null,
          "old_text": "lookupKeyRead(c->db,c->argv[1])",
          "new_text": null,
          "old_line_content": "    robj *o = lookupKeyRead(c->db,c->argv[1]);",
          "new_line_content": "void xautoclaimCommand(client *c) {",
          "content_same": false
        },
        {
          "line": 3563,
          "old_api": "addReplyBulkCString",
          "new_api": null,
          "old_text": "addReplyBulkCString(c,\"name\")",
          "new_text": null,
          "old_line_content": "            addReplyBulkCString(c,\"name\");",
          "new_line_content": "            streamCG *cg = ri.data;",
          "content_same": false
        },
        {
          "line": 2541,
          "old_api": "streamLookupCG",
          "new_api": null,
          "old_text": "streamLookupCG(o->ptr,c->argv[2]->ptr)",
          "new_text": null,
          "old_line_content": "        group = streamLookupCG(o->ptr,c->argv[2]->ptr);",
          "new_line_content": "    if (o) {",
          "content_same": false
        },
        {
          "line": 2031,
          "old_api": "lookupKeyRead",
          "new_api": null,
          "old_text": "lookupKeyRead(c->db,key)",
          "new_text": null,
          "old_line_content": "        robj *o = lookupKeyRead(c->db,key);",
          "new_line_content": "        int id_idx = i - streams_arg - streams_count;",
          "content_same": false
        },
        {
          "line": 2032,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,OBJ_STREAM)",
          "new_text": null,
          "old_line_content": "        if (checkType(c,o,OBJ_STREAM)) goto cleanup;",
          "new_line_content": "        robj *key = c->argv[i-streams_count];",
          "content_same": false
        },
        {
          "line": 2546,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.czero)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.czero);",
          "new_line_content": "    /* No key or group? Nothing to ack. */",
          "content_same": false
        },
        {
          "line": 3060,
          "old_api": "getLongLongFromObjectOrReply",
          "new_api": null,
          "old_text": "getLongLongFromObjectOrReply(c,c->argv[4],&minidle,\"Invalid min-idle-time argument for XAUTOCLAIM\")",
          "new_text": null,
          "old_line_content": "    if (getLongLongFromObjectOrReply(c,c->argv[4],&minidle,\"Invalid min-idle-time argument for XAUTOCLAIM\") != C_OK)",
          "new_line_content": "    /* Parse idle/start/end/count arguments ASAP if needed, in order to report",
          "content_same": false
        },
        {
          "line": 3573,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(opt,\"STREAM\")",
          "new_text": null,
          "old_line_content": "    } else if (!strcasecmp(opt,\"STREAM\")) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2039,
          "old_api": "streamLookupCG",
          "new_api": null,
          "old_text": "streamLookupCG(o->ptr,groupname->ptr)",
          "new_text": null,
          "old_line_content": "                (group = streamLookupCG(o->ptr,groupname->ptr)) == NULL)",
          "new_line_content": "        if (groupname) {",
          "content_same": false
        },
        {
          "line": 3064,
          "old_api": "streamParseIntervalIDOrReply",
          "new_api": null,
          "old_text": "streamParseIntervalIDOrReply(c,c->argv[5],&startid,&startex,0)",
          "new_text": null,
          "old_line_content": "    if (streamParseIntervalIDOrReply(c,c->argv[5],&startid,&startex,0) != C_OK)",
          "new_line_content": "    if (minidle < 0) minidle = 0;",
          "content_same": false
        },
        {
          "line": 3067,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\"invalid start ID for the interval\")",
          "new_text": null,
          "old_line_content": "        addReplyError(c,\"invalid start ID for the interval\");",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 2558,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(streamID)*id_count)",
          "new_text": null,
          "old_line_content": "        ids = zmalloc(sizeof(streamID)*id_count);",
          "new_line_content": "    int id_count = c->argc-3;",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 155,
      "total_additions": 304,
      "total_deletions": 304,
      "total_api_changes": 763
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 5,
        "api_related_lines": 763,
        "non_api_lines": 1,
        "non_api_line_numbers": [
          1848
        ]
      }
    },
    "api_calls_before": 862,
    "api_calls_after": 862,
    "diff_info": {
      "added_lines": 5,
      "removed_lines": 3,
      "total_diff_lines": 20
    }
  }
}
{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/46b07cbb5c52a6a9321ab8c2134d3c6be9ddae86",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/46b07cbb5c52a6a9321ab8c2134d3c6be9ddae86/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/46b07cbb5c52a6a9321ab8c2134d3c6be9ddae86/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/46b07cbb5c52a6a9321ab8c2134d3c6be9ddae86/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 719,
          "old_api": "addReplySds",
          "new_api": "sdsnewlen",
          "old_text": "addReplySds(ctx->client,strmsg)",
          "new_text": "sdsnewlen(prefix,1)",
          "old_line_content": "    addReplySds(ctx->client,strmsg);",
          "new_line_content": "    sds strmsg = sdsnewlen(prefix,1);",
          "content_same": false
        },
        {
          "line": 766,
          "old_api": "addDeferredMultiBulkLength",
          "new_api": "zrealloc",
          "old_text": "addDeferredMultiBulkLength(ctx->client)",
          "new_text": "zrealloc(ctx->postponed_arrays,sizeof(void*)*\n                (ctx->postponed_arrays_count+1))",
          "old_line_content": "            addDeferredMultiBulkLength(ctx->client);",
          "new_line_content": "        ctx->postponed_arrays = zrealloc(ctx->postponed_arrays,sizeof(void*)*",
          "content_same": false
        },
        {
          "line": 769,
          "old_api": "addReplyMultiBulkLen",
          "new_api": "addDeferredMultiBulkLength",
          "old_text": "addReplyMultiBulkLen(ctx->client,len)",
          "new_text": "addDeferredMultiBulkLength(ctx->client)",
          "old_line_content": "        addReplyMultiBulkLen(ctx->client,len);",
          "new_line_content": "            addDeferredMultiBulkLength(ctx->client);",
          "content_same": false
        },
        {
          "line": 1030,
          "old_api": "decrRefCount",
          "new_api": "signalModifiedKey",
          "old_text": "decrRefCount(key->key)",
          "new_text": "signalModifiedKey(key->db,key->key)",
          "old_line_content": "    decrRefCount(key->key);",
          "new_line_content": "    if (key->mode & REDISMODULE_WRITE) signalModifiedKey(key->db,key->key);",
          "content_same": false
        },
        {
          "line": 1032,
          "old_api": "zfree",
          "new_api": "RM_ZsetRangeStop",
          "old_text": "zfree(key)",
          "new_text": "RM_ZsetRangeStop(key)",
          "old_line_content": "    zfree(key);",
          "new_line_content": "    RM_ZsetRangeStop(key);",
          "content_same": false
        },
        {
          "line": 1062,
          "old_api": "zsetLength",
          "new_api": "stringObjectLen",
          "old_text": "zsetLength(key->value)",
          "new_text": "stringObjectLen(key->value)",
          "old_line_content": "    case OBJ_ZSET: return zsetLength(key->value);",
          "new_line_content": "    case OBJ_STRING: return stringObjectLen(key->value);",
          "content_same": false
        },
        {
          "line": 1063,
          "old_api": "hashTypeLength",
          "new_api": "listTypeLength",
          "old_text": "hashTypeLength(key->value)",
          "new_text": "listTypeLength(key->value)",
          "old_line_content": "    case OBJ_HASH: return hashTypeLength(key->value);",
          "new_line_content": "    case OBJ_LIST: return listTypeLength(key->value);",
          "content_same": false
        },
        {
          "line": 1107,
          "old_api": "removeExpire",
          "new_api": "mstime",
          "old_text": "removeExpire(key->db,key->key)",
          "new_text": "mstime()",
          "old_line_content": "        removeExpire(key->db,key->key);",
          "new_line_content": "        expire += mstime();",
          "content_same": false
        },
        {
          "line": 1205,
          "old_api": "decrRefCount",
          "new_api": "sdsnewlen",
          "old_text": "decrRefCount(o)",
          "new_text": "sdsnewlen(NULL, newlen)",
          "old_line_content": "        decrRefCount(o);",
          "new_line_content": "        robj *o = createObject(OBJ_STRING,sdsnewlen(NULL, newlen));",
          "content_same": false
        },
        {
          "line": 1208,
          "old_api": "dbUnshareStringValue",
          "new_api": "decrRefCount",
          "old_text": "dbUnshareStringValue(key->db, key->key, key->value)",
          "new_text": "decrRefCount(o)",
          "old_line_content": "        key->value = dbUnshareStringValue(key->db, key->key, key->value);",
          "new_line_content": "        decrRefCount(o);",
          "content_same": false
        },
        {
          "line": 1211,
          "old_api": "sdsgrowzero",
          "new_api": "dbUnshareStringValue",
          "old_text": "sdsgrowzero(key->value->ptr,newlen)",
          "new_text": "dbUnshareStringValue(key->db, key->key, key->value)",
          "old_line_content": "            key->value->ptr = sdsgrowzero(key->value->ptr,newlen);",
          "new_line_content": "        key->value = dbUnshareStringValue(key->db, key->key, key->value);",
          "content_same": false
        },
        {
          "line": 1216,
          "old_api": "sdsRemoveFreeSpace",
          "new_api": "sdsrange",
          "old_text": "sdsRemoveFreeSpace(key->value->ptr)",
          "new_text": "sdsrange(key->value->ptr,0,newlen-1)",
          "old_line_content": "                key->value->ptr = sdsRemoveFreeSpace(key->value->ptr);",
          "new_line_content": "            sdsrange(key->value->ptr,0,newlen-1);",
          "content_same": false
        },
        {
          "line": 1253,
          "old_api": "decrRefCount",
          "new_api": "listTypePop",
          "old_text": "decrRefCount(ele)",
          "new_text": "listTypePop(key->value,\n        (where == REDISMODULE_LIST_HEAD) ? QUICKLIST_HEAD : QUICKLIST_TAIL)",
          "old_line_content": "    decrRefCount(ele);",
          "new_line_content": "    robj *ele = listTypePop(key->value,",
          "content_same": false
        },
        {
          "line": 1255,
          "old_api": "autoMemoryAdd",
          "new_api": "getDecodedObject",
          "old_text": "autoMemoryAdd(key->ctx,REDISMODULE_AM_STRING,decoded)",
          "new_text": "getDecodedObject(ele)",
          "old_line_content": "    autoMemoryAdd(key->ctx,REDISMODULE_AM_STRING,decoded);",
          "new_line_content": "    robj *decoded = getDecodedObject(ele);",
          "content_same": false
        },
        {
          "line": 1343,
          "old_api": "zsetAdd",
          "new_api": "moduleCreateEmptyKey",
          "old_text": "zsetAdd(key->value,score,ele->ptr,&flags,newscore)",
          "new_text": "moduleCreateEmptyKey(key,REDISMODULE_KEYTYPE_ZSET)",
          "old_line_content": "    if (zsetAdd(key->value,score,ele->ptr,&flags,newscore) == 0) {",
          "new_line_content": "    if (key->value == NULL) moduleCreateEmptyKey(key,REDISMODULE_KEYTYPE_ZSET);",
          "content_same": false
        },
        {
          "line": 1452,
          "old_api": "serverPanic",
          "new_api": "zslFirstInRange",
          "old_text": "serverPanic(\"Unsupported zset encoding\")",
          "new_text": "zslFirstInRange(zsl,zrs)",
          "old_line_content": "        serverPanic(\"Unsupported zset encoding\");",
          "new_line_content": "        key->zcurrent = first ? zslFirstInRange(zsl,zrs) :",
          "content_same": false
        },
        {
          "line": 1516,
          "old_api": "serverPanic",
          "new_api": "zslFirstInLexRange",
          "old_text": "serverPanic(\"Unsupported zset encoding\")",
          "new_text": "zslFirstInLexRange(zsl,zlrs)",
          "old_line_content": "        serverPanic(\"Unsupported zset encoding\");",
          "new_line_content": "        key->zcurrent = first ? zslFirstInLexRange(zsl,zlrs) :",
          "content_same": false
        },
        {
          "line": 1558,
          "old_api": "zzlGetScore",
          "new_api": "ziplistGetObject",
          "old_text": "zzlGetScore(sptr)",
          "new_text": "ziplistGetObject(eptr)",
          "old_line_content": "            *score = zzlGetScore(sptr);",
          "new_line_content": "        sds ele = ziplistGetObject(eptr);",
          "content_same": false
        },
        {
          "line": 1560,
          "old_api": "createObject",
          "new_api": "ziplistNext",
          "old_text": "createObject(OBJ_STRING,ele)",
          "new_text": "ziplistNext(key->value->ptr,eptr)",
          "old_line_content": "        str = createObject(OBJ_STRING,ele);",
          "new_line_content": "            sptr = ziplistNext(key->value->ptr,eptr);",
          "content_same": false
        },
        {
          "line": 1759,
          "old_api": "va_start",
          "new_api": "moduleCreateEmptyKey",
          "old_text": "va_start(ap, flags)",
          "new_text": "moduleCreateEmptyKey(key,REDISMODULE_KEYTYPE_HASH)",
          "old_line_content": "    va_start(ap, flags);",
          "new_line_content": "    if (key->value == NULL) moduleCreateEmptyKey(key,REDISMODULE_KEYTYPE_HASH);",
          "content_same": false
        },
        {
          "line": 1806,
          "old_api": "va_end",
          "new_api": "decrRefCount",
          "old_text": "va_end(ap)",
          "new_text": "decrRefCount(field)",
          "old_line_content": "    va_end(ap);",
          "new_line_content": "           decrRefCount(field);",
          "content_same": false
        },
        {
          "line": 1883,
          "old_api": "decrRefCount",
          "new_api": "hashTypeGetValueObject",
          "old_text": "decrRefCount(*valueptr)",
          "new_text": "hashTypeGetValueObject(key->value,field->ptr)",
          "old_line_content": "                    decrRefCount(*valueptr);",
          "new_line_content": "                *valueptr = hashTypeGetValueObject(key->value,field->ptr);",
          "content_same": false
        },
        {
          "line": 1912,
          "old_api": "sdslen",
          "new_api": "zmalloc",
          "old_text": "sdslen(proto)",
          "new_text": "zmalloc(sizeof(*reply))",
          "old_line_content": "    reply->protolen = sdslen(proto);",
          "new_line_content": "    RedisModuleCallReply *reply = zmalloc(sizeof(*reply));",
          "content_same": false
        },
        {
          "line": 1943,
          "old_api": "moduleParseCallReply_SimpleString",
          "new_api": "moduleParseCallReply_Int",
          "old_text": "moduleParseCallReply_SimpleString(reply)",
          "new_text": "moduleParseCallReply_Int(reply)",
          "old_line_content": "    case '+': moduleParseCallReply_SimpleString(reply); break;",
          "new_line_content": "    case ':': moduleParseCallReply_Int(reply); break;",
          "content_same": false
        },
        {
          "line": 1944,
          "old_api": "moduleParseCallReply_Array",
          "new_api": "moduleParseCallReply_BulkString",
          "old_text": "moduleParseCallReply_Array(reply)",
          "new_text": "moduleParseCallReply_BulkString(reply)",
          "old_line_content": "    case '*': moduleParseCallReply_Array(reply); break;",
          "new_line_content": "    case '$': moduleParseCallReply_BulkString(reply); break;",
          "content_same": false
        },
        {
          "line": 1962,
          "old_api": "string2ll",
          "new_api": "strchr",
          "old_text": "string2ll(proto+1,p-proto-1,&bulklen)",
          "new_text": "strchr(proto+1,'\\r')",
          "old_line_content": "    string2ll(proto+1,p-proto-1,&bulklen);",
          "new_line_content": "    char *p = strchr(proto+1,'\\r');",
          "content_same": false
        },
        {
          "line": 1990,
          "old_api": "string2ll",
          "new_api": "strchr",
          "old_text": "string2ll(proto+1,p-proto-1,&arraylen)",
          "new_text": "strchr(proto+1,'\\r')",
          "old_line_content": "    string2ll(proto+1,p-proto-1,&arraylen);",
          "new_line_content": "    char *p = strchr(proto+1,'\\r');",
          "content_same": false
        },
        {
          "line": 2102,
          "old_api": "ll2string",
          "new_api": "RM_CreateString",
          "old_text": "ll2string(buf,sizeof(buf),reply->val.ll)",
          "new_text": "RM_CreateString(reply->ctx,reply->val.str,reply->len)",
          "old_line_content": "        int len = ll2string(buf,sizeof(buf),reply->val.ll);",
          "new_line_content": "        return RM_CreateString(reply->ctx,reply->val.str,reply->len);",
          "content_same": false
        },
        {
          "line": 2133,
          "old_api": "strlen",
          "new_api": "zrealloc",
          "old_text": "strlen(cmdname)",
          "new_text": "zrealloc(argv,sizeof(robj*)*argv_size)",
          "old_line_content": "    argv[0] = createStringObject(cmdname,strlen(cmdname));",
          "new_line_content": "    argv = zrealloc(argv,sizeof(robj*)*argv_size);",
          "content_same": false
        },
        {
          "line": 2148,
          "old_api": "va_arg",
          "new_api": "incrRefCount",
          "old_text": "va_arg(ap,size_t)",
          "new_text": "incrRefCount(obj)",
          "old_line_content": "            size_t len = va_arg(ap,size_t);",
          "new_line_content": "            incrRefCount(obj);",
          "content_same": false
        },
        {
          "line": 2152,
          "old_api": "createStringObjectFromLongLong",
          "new_api": "createStringObject",
          "old_text": "createStringObjectFromLongLong(ll)",
          "new_text": "createStringObject(buf,len)",
          "old_line_content": "            argv[argc++] = createStringObjectFromLongLong(ll);",
          "new_line_content": "            argv[argc++] = createStringObject(buf,len);",
          "content_same": false
        },
        {
          "line": 2155,
          "old_api": "va_arg",
          "new_api": "createStringObjectFromLongLong",
          "old_text": "va_arg(ap, void*)",
          "new_text": "createStringObjectFromLongLong(ll)",
          "old_line_content": "             robj **v = va_arg(ap, void*);",
          "new_line_content": "            argv[argc++] = createStringObjectFromLongLong(ll);",
          "content_same": false
        },
        {
          "line": 2212,
          "old_api": "va_end",
          "new_api": "createClient",
          "old_text": "va_end(ap)",
          "new_text": "createClient(-1)",
          "old_line_content": "    va_end(ap);",
          "new_line_content": "    c = createClient(-1);",
          "content_same": false
        },
        {
          "line": 2263,
          "old_api": "listFirst",
          "new_api": "sdsnewlen",
          "old_text": "listFirst(c->reply)",
          "new_text": "sdsnewlen(c->buf,c->bufpos)",
          "old_line_content": "        sds o = listNodeValue(listFirst(c->reply));",
          "new_line_content": "    sds proto = sdsnewlen(c->buf,c->bufpos);",
          "content_same": false
        },
        {
          "line": 2265,
          "old_api": "sdscatsds",
          "new_api": "listLength",
          "old_text": "sdscatsds(proto,o)",
          "new_text": "listLength(c->reply)",
          "old_line_content": "        proto = sdscatsds(proto,o);",
          "new_line_content": "    while(listLength(c->reply)) {",
          "content_same": false
        },
        {
          "line": 2268,
          "old_api": "moduleCreateCallReplyFromProto",
          "new_api": "sdscatsds",
          "old_text": "moduleCreateCallReplyFromProto(ctx,proto)",
          "new_text": "sdscatsds(proto,o)",
          "old_line_content": "    reply = moduleCreateCallReplyFromProto(ctx,proto);",
          "new_line_content": "        proto = sdscatsds(proto,o);",
          "content_same": false
        },
        {
          "line": 2269,
          "old_api": "autoMemoryAdd",
          "new_api": "listFirst",
          "old_text": "autoMemoryAdd(ctx,REDISMODULE_AM_REPLY,reply)",
          "new_text": "listFirst(c->reply)",
          "old_line_content": "    autoMemoryAdd(ctx,REDISMODULE_AM_REPLY,reply);",
          "new_line_content": "        listDelNode(c->reply,listFirst(c->reply));",
          "content_same": false
        },
        {
          "line": 2272,
          "old_api": "freeClient",
          "new_api": "autoMemoryAdd",
          "old_text": "freeClient(c)",
          "new_text": "autoMemoryAdd(ctx,REDISMODULE_AM_REPLY,reply)",
          "old_line_content": "    freeClient(c);",
          "new_line_content": "    autoMemoryAdd(ctx,REDISMODULE_AM_REPLY,reply);",
          "content_same": false
        },
        {
          "line": 2320,
          "old_api": "REGISTER_API",
          "new_api": "dictCreate",
          "old_text": "REGISTER_API(WrongArity)",
          "new_text": "dictCreate(&moduleAPIDictType,NULL)",
          "old_line_content": "    REGISTER_API(WrongArity);",
          "new_line_content": "    server.moduleapi = dictCreate(&moduleAPIDictType,NULL);",
          "content_same": false
        },
        {
          "line": 2407,
          "old_api": "moduleLoad",
          "new_api": "listRewind",
          "old_text": "moduleLoad(modulepath)",
          "new_text": "listRewind(server.loadmodule_queue,&li)",
          "old_line_content": "        if (moduleLoad(modulepath) == C_ERR) {",
          "new_line_content": "    listRewind(server.loadmodule_queue,&li);",
          "content_same": false
        },
        {
          "line": 2408,
          "old_api": "serverLog",
          "new_api": "listNext",
          "old_text": "serverLog(LL_WARNING,\n                \"Can't load module from %s: server aborting\",\n                modulepath)",
          "new_text": "listNext(&li)",
          "old_line_content": "            serverLog(LL_WARNING,",
          "new_line_content": "    while((ln = listNext(&li))) {",
          "content_same": false
        },
        {
          "line": 2411,
          "old_api": "exit",
          "new_api": "serverLog",
          "old_text": "exit(1)",
          "new_text": "serverLog(LL_WARNING,\n                \"Can't load module from %s: server aborting\",\n                modulepath)",
          "old_line_content": "            exit(1);",
          "new_line_content": "            serverLog(LL_WARNING,",
          "content_same": false
        },
        {
          "line": 2433,
          "old_api": "dlsym",
          "new_api": "dlerror",
          "old_text": "dlsym(handle,\"RedisModule_OnLoad\")",
          "new_text": "dlerror()",
          "old_line_content": "    onload = (int (*)(void *))(unsigned long) dlsym(handle,\"RedisModule_OnLoad\");",
          "new_line_content": "        serverLog(LL_WARNING, \"Module %s failed to load: %s\", path, dlerror());",
          "content_same": false
        },
        {
          "line": 2443,
          "old_api": "serverLog",
          "new_api": "onload",
          "old_text": "serverLog(LL_WARNING,\n            \"Module %s initialization failed. Module not loaded\",path)",
          "new_text": "onload((void*)&ctx)",
          "old_line_content": "        serverLog(LL_WARNING,",
          "new_line_content": "    if (onload((void*)&ctx) == REDISMODULE_ERR) {",
          "content_same": false
        },
        {
          "line": 2471,
          "old_api": "dictGetVal",
          "new_api": "dictGetSafeIterator",
          "old_text": "dictGetVal(de)",
          "new_text": "dictGetSafeIterator(server.commands)",
          "old_line_content": "        struct redisCommand *cmd = dictGetVal(de);",
          "new_line_content": "    dictIterator *di = dictGetSafeIterator(server.commands);",
          "content_same": false
        },
        {
          "line": 2480,
          "old_api": "zfree",
          "new_api": "dictDelete",
          "old_text": "zfree(cp->rediscmd)",
          "new_text": "dictDelete(server.commands,cmdname)",
          "old_line_content": "                zfree(cp->rediscmd);",
          "new_line_content": "                dictDelete(server.commands,cmdname);",
          "content_same": false
        },
        {
          "line": 2481,
          "old_api": "zfree",
          "new_api": "dictDelete",
          "old_text": "zfree(cp)",
          "new_text": "dictDelete(server.orig_commands,cmdname)",
          "old_line_content": "                zfree(cp);",
          "new_line_content": "                dictDelete(server.orig_commands,cmdname);",
          "content_same": false
        },
        {
          "line": 2493,
          "old_api": "serverLog",
          "new_api": "dlclose",
          "old_text": "serverLog(LL_WARNING,\"Error when trying to close the %s module: %s\",\n            module->name, error)",
          "new_text": "dlclose(module->handle)",
          "old_line_content": "        serverLog(LL_WARNING,\"Error when trying to close the %s module: %s\",",
          "new_line_content": "    if (dlclose(module->handle) == -1) {",
          "content_same": false
        },
        {
          "line": 2502,
          "old_api": "zfree",
          "new_api": "dictDelete",
          "old_text": "zfree(module)",
          "new_text": "dictDelete(modules,module->name)",
          "old_line_content": "    zfree(module);",
          "new_line_content": "    dictDelete(modules,module->name);",
          "content_same": false
        },
        {
          "line": 2517,
          "old_api": "addReplyError",
          "new_api": "moduleLoad",
          "old_text": "addReplyError(c,\n                \"Error loading the extension. Please check the server logs.\")",
          "new_text": "moduleLoad(c->argv[2]->ptr)",
          "old_line_content": "            addReplyError(c,",
          "new_line_content": "        if (moduleLoad(c->argv[2]->ptr) == C_OK)",
          "content_same": false
        },
        {
          "line": 2520,
          "old_api": "moduleUnload",
          "new_api": "addReplyError",
          "old_text": "moduleUnload(c->argv[2]->ptr)",
          "new_text": "addReplyError(c,\n                \"Error loading the extension. Please check the server logs.\")",
          "old_line_content": "        if (moduleUnload(c->argv[2]->ptr) == C_OK)",
          "new_line_content": "            addReplyError(c,",
          "content_same": false
        },
        {
          "line": 2530,
          "old_api": "dictGetIterator",
          "new_api": "addReplyErrorFormat",
          "old_text": "dictGetIterator(modules)",
          "new_text": "addReplyErrorFormat(c,\"Error unloading module: %s\",errmsg)",
          "old_line_content": "        dictIterator *di = dictGetIterator(modules);",
          "new_line_content": "            addReplyErrorFormat(c,\"Error unloading module: %s\",errmsg);",
          "content_same": false
        },
        {
          "line": 2533,
          "old_api": "dictSize",
          "new_api": "dictGetIterator",
          "old_text": "dictSize(modules)",
          "new_text": "dictGetIterator(modules)",
          "old_line_content": "        addReplyMultiBulkLen(c,dictSize(modules));",
          "new_line_content": "        dictIterator *di = dictGetIterator(modules);",
          "content_same": false
        },
        {
          "line": 2536,
          "old_api": "dictGetVal",
          "new_api": "dictSize",
          "old_text": "dictGetVal(de)",
          "new_text": "dictSize(modules)",
          "old_line_content": "            struct RedisModule *module = dictGetVal(de);",
          "new_line_content": "        addReplyMultiBulkLen(c,dictSize(modules));",
          "content_same": false
        },
        {
          "line": 2537,
          "old_api": "addReplyMultiBulkLen",
          "new_api": "dictNext",
          "old_text": "addReplyMultiBulkLen(c,4)",
          "new_text": "dictNext(di)",
          "old_line_content": "            addReplyMultiBulkLen(c,4);",
          "new_line_content": "        while ((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 2538,
          "old_api": "addReplyBulkCString",
          "new_api": "dictGetKey",
          "old_text": "addReplyBulkCString(c,\"name\")",
          "new_text": "dictGetKey(de)",
          "old_line_content": "            addReplyBulkCString(c,\"name\");",
          "new_line_content": "            sds name = dictGetKey(de);",
          "content_same": false
        },
        {
          "line": 2539,
          "old_api": "sdslen",
          "new_api": "dictGetVal",
          "old_text": "sdslen(name)",
          "new_text": "dictGetVal(de)",
          "old_line_content": "            addReplyBulkCBuffer(c,name,sdslen(name));",
          "new_line_content": "            struct RedisModule *module = dictGetVal(de);",
          "content_same": false
        },
        {
          "line": 2540,
          "old_api": "addReplyBulkCString",
          "new_api": "addReplyMultiBulkLen",
          "old_text": "addReplyBulkCString(c,\"ver\")",
          "new_text": "addReplyMultiBulkLen(c,4)",
          "old_line_content": "            addReplyBulkCString(c,\"ver\");",
          "new_line_content": "            addReplyMultiBulkLen(c,4);",
          "content_same": false
        },
        {
          "line": 2541,
          "old_api": "addReplyLongLong",
          "new_api": "addReplyBulkCString",
          "old_text": "addReplyLongLong(c,module->ver)",
          "new_text": "addReplyBulkCString(c,\"name\")",
          "old_line_content": "            addReplyLongLong(c,module->ver);",
          "new_line_content": "            addReplyBulkCString(c,\"name\");",
          "content_same": false
        },
        {
          "line": 2543,
          "old_api": "dictReleaseIterator",
          "new_api": "addReplyBulkCString",
          "old_text": "dictReleaseIterator(di)",
          "new_text": "addReplyBulkCString(c,\"ver\")",
          "old_line_content": "        dictReleaseIterator(di);",
          "new_line_content": "            addReplyBulkCString(c,\"ver\");",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 2048,
          "old_api": null,
          "new_api": "RM_FreeCallReply_Rec",
          "old_text": null,
          "new_text": "RM_FreeCallReply_Rec(reply,0)",
          "old_line_content": "",
          "new_line_content": "    RM_FreeCallReply_Rec(reply,0);",
          "content_same": false
        },
        {
          "line": 2049,
          "old_api": null,
          "new_api": "autoMemoryFreed",
          "old_text": null,
          "new_text": "autoMemoryFreed(reply->ctx,REDISMODULE_AM_REPLY,reply)",
          "old_line_content": "/* Return the reply type. */",
          "new_line_content": "    autoMemoryFreed(reply->ctx,REDISMODULE_AM_REPLY,reply);",
          "content_same": false
        },
        {
          "line": 1539,
          "old_api": null,
          "new_api": "zsetInitLexRange",
          "old_text": null,
          "new_text": "zsetInitLexRange(key,min,max,1)",
          "old_line_content": "/* Exactly like RedisModule_ZsetFirstInLexRange() but the last element of",
          "new_line_content": "    return zsetInitLexRange(key,min,max,1);",
          "content_same": false
        },
        {
          "line": 1033,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(key->key)",
          "old_line_content": "}",
          "new_line_content": "    decrRefCount(key->key);",
          "content_same": false
        },
        {
          "line": 1034,
          "old_api": null,
          "new_api": "autoMemoryFreed",
          "old_text": null,
          "new_text": "autoMemoryFreed(key->ctx,REDISMODULE_AM_KEY,key)",
          "old_line_content": "",
          "new_line_content": "    autoMemoryFreed(key->ctx,REDISMODULE_AM_KEY,key);",
          "content_same": false
        },
        {
          "line": 2059,
          "old_api": null,
          "new_api": "moduleParseCallReply",
          "old_text": null,
          "new_text": "moduleParseCallReply(reply)",
          "old_line_content": "    case REDISMODULE_REPLY_ERROR:",
          "new_line_content": "    moduleParseCallReply(reply);",
          "content_same": false
        },
        {
          "line": 1035,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(key)",
          "old_line_content": "/* Return the type of the key. If the key pointer is NULL then",
          "new_line_content": "    zfree(key);",
          "content_same": false
        },
        {
          "line": 1545,
          "old_api": null,
          "new_api": "zsetInitLexRange",
          "old_text": null,
          "new_text": "zsetInitLexRange(key,min,max,0)",
          "old_line_content": "/* Return the current sorted set element of an active sorted set iterator",
          "new_line_content": "    return zsetInitLexRange(key,min,max,0);",
          "content_same": false
        },
        {
          "line": 2039,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(reply->proto)",
          "old_line_content": "}",
          "new_line_content": "        if (reply->proto) sdsfree(reply->proto);",
          "content_same": false
        },
        {
          "line": 2073,
          "old_api": null,
          "new_api": "moduleParseCallReply",
          "old_text": null,
          "new_text": "moduleParseCallReply(reply)",
          "old_line_content": "    return reply->val.array+idx;",
          "new_line_content": "    moduleParseCallReply(reply);",
          "content_same": false
        },
        {
          "line": 1561,
          "old_api": null,
          "new_api": "zzlGetScore",
          "old_text": null,
          "new_text": "zzlGetScore(sptr)",
          "old_line_content": "    } else if (key->value->encoding == OBJ_ENCODING_SKIPLIST) {",
          "new_line_content": "            *score = zzlGetScore(sptr);",
          "content_same": false
        },
        {
          "line": 1563,
          "old_api": null,
          "new_api": "createObject",
          "old_text": null,
          "new_text": "createObject(OBJ_STRING,ele)",
          "old_line_content": "        if (score) *score = ln->score;",
          "new_line_content": "        str = createObject(OBJ_STRING,ele);",
          "content_same": false
        },
        {
          "line": 1567,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(ln->ele)",
          "old_line_content": "    }",
          "new_line_content": "        str = createStringObject(ln->ele,sdslen(ln->ele));",
          "content_same": false
        },
        {
          "line": 2081,
          "old_api": null,
          "new_api": "moduleParseCallReply",
          "old_text": null,
          "new_text": "moduleParseCallReply(reply)",
          "old_line_content": "}",
          "new_line_content": "    moduleParseCallReply(reply);",
          "content_same": false
        },
        {
          "line": 1569,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Unsupported zset encoding\")",
          "old_line_content": "    return str;",
          "new_line_content": "        serverPanic(\"Unsupported zset encoding\");",
          "content_same": false
        },
        {
          "line": 1571,
          "old_api": null,
          "new_api": "autoMemoryAdd",
          "old_text": null,
          "new_text": "autoMemoryAdd(key->ctx,REDISMODULE_AM_STRING,str)",
          "old_line_content": "",
          "new_line_content": "    autoMemoryAdd(key->ctx,REDISMODULE_AM_STRING,str);",
          "content_same": false
        },
        {
          "line": 2088,
          "old_api": null,
          "new_api": "moduleParseCallReply",
          "old_text": null,
          "new_text": "moduleParseCallReply(reply)",
          "old_line_content": "    if (len) *len = reply->len;",
          "new_line_content": "    moduleParseCallReply(reply);",
          "content_same": false
        },
        {
          "line": 1064,
          "old_api": null,
          "new_api": "setTypeSize",
          "old_text": null,
          "new_text": "setTypeSize(key->value)",
          "old_line_content": "    default: return 0;",
          "new_line_content": "    case OBJ_SET: return setTypeSize(key->value);",
          "content_same": false
        },
        {
          "line": 1065,
          "old_api": null,
          "new_api": "zsetLength",
          "old_text": null,
          "new_text": "zsetLength(key->value)",
          "old_line_content": "    }",
          "new_line_content": "    case OBJ_ZSET: return zsetLength(key->value);",
          "content_same": false
        },
        {
          "line": 1066,
          "old_api": null,
          "new_api": "hashTypeLength",
          "old_text": null,
          "new_text": "hashTypeLength(key->value)",
          "old_line_content": "}",
          "new_line_content": "    case OBJ_HASH: return hashTypeLength(key->value);",
          "content_same": false
        },
        {
          "line": 1585,
          "old_api": null,
          "new_api": "ziplistNext",
          "old_text": null,
          "new_text": "ziplistNext(zl,eptr)",
          "old_line_content": "            key->zer = 1;",
          "new_line_content": "        next = ziplistNext(zl,eptr); /* Skip element. */",
          "content_same": false
        },
        {
          "line": 2098,
          "old_api": null,
          "new_api": "moduleParseCallReply",
          "old_text": null,
          "new_text": "moduleParseCallReply(reply)",
          "old_line_content": "    case REDISMODULE_REPLY_ERROR:",
          "new_line_content": "    moduleParseCallReply(reply);",
          "content_same": false
        },
        {
          "line": 1586,
          "old_api": null,
          "new_api": "ziplistNext",
          "old_text": null,
          "new_text": "ziplistNext(zl,next)",
          "old_line_content": "            return 0;",
          "new_line_content": "        if (next) next = ziplistNext(zl,next); /* Skip score. */",
          "content_same": false
        },
        {
          "line": 1078,
          "old_api": null,
          "new_api": "dbDelete",
          "old_text": null,
          "new_text": "dbDelete(key->db,key->key)",
          "old_line_content": "    return REDISMODULE_OK;",
          "new_line_content": "        dbDelete(key->db,key->key);",
          "content_same": false
        },
        {
          "line": 2105,
          "old_api": null,
          "new_api": "ll2string",
          "old_text": null,
          "new_text": "ll2string(buf,sizeof(buf),reply->val.ll)",
          "old_line_content": "    default: return NULL;",
          "new_line_content": "        int len = ll2string(buf,sizeof(buf),reply->val.ll);",
          "content_same": false
        },
        {
          "line": 2106,
          "old_api": null,
          "new_api": "RM_CreateString",
          "old_text": null,
          "new_text": "RM_CreateString(reply->ctx,buf,len)",
          "old_line_content": "    }",
          "new_line_content": "        return RM_CreateString(reply->ctx,buf,len);",
          "content_same": false
        },
        {
          "line": 1596,
          "old_api": null,
          "new_api": "ziplistNext",
          "old_text": null,
          "new_text": "ziplistNext(zl,next)",
          "old_line_content": "                    key->zer = 1;",
          "new_line_content": "                next = ziplistNext(zl,next); /* Skip next element. */",
          "content_same": false
        },
        {
          "line": 1597,
          "old_api": null,
          "new_api": "zzlGetScore",
          "old_text": null,
          "new_text": "zzlGetScore(next)",
          "old_line_content": "                    return 0;",
          "new_line_content": "                double score = zzlGetScore(next); /* Obtain the next score. */",
          "content_same": false
        },
        {
          "line": 1598,
          "old_api": null,
          "new_api": "zslValueLteMax",
          "old_text": null,
          "new_text": "zslValueLteMax(score,&key->zrs)",
          "old_line_content": "                }",
          "new_line_content": "                if (!zslValueLteMax(score,&key->zrs)) {",
          "content_same": false
        },
        {
          "line": 1088,
          "old_api": null,
          "new_api": "getExpire",
          "old_text": null,
          "new_text": "getExpire(key->db,key->key)",
          "old_line_content": "    return expire >= 0 ? expire : 0;",
          "new_line_content": "    mstime_t expire = getExpire(key->db,key->key);",
          "content_same": false
        },
        {
          "line": 1090,
          "old_api": null,
          "new_api": "mstime",
          "old_text": null,
          "new_text": "mstime()",
          "old_line_content": "",
          "new_line_content": "    expire -= mstime();",
          "content_same": false
        },
        {
          "line": 1604,
          "old_api": null,
          "new_api": "zzlLexValueLteMax",
          "old_text": null,
          "new_text": "zzlLexValueLteMax(next,&key->zlrs)",
          "old_line_content": "                }",
          "new_line_content": "                if (!zzlLexValueLteMax(next,&key->zlrs)) {",
          "content_same": false
        },
        {
          "line": 2132,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(fmt)",
          "old_line_content": "    /* Build the arguments vector based on the format specifier. */",
          "new_line_content": "    argv_size = strlen(fmt)+1; /* +1 because of the command name. */",
          "content_same": false
        },
        {
          "line": 1108,
          "old_api": null,
          "new_api": "setExpire",
          "old_text": null,
          "new_text": "setExpire(key->db,key->key,expire)",
          "old_line_content": "    }",
          "new_line_content": "        setExpire(key->db,key->key,expire);",
          "content_same": false
        },
        {
          "line": 1110,
          "old_api": null,
          "new_api": "removeExpire",
          "old_text": null,
          "new_text": "removeExpire(key->db,key->key)",
          "old_line_content": "}",
          "new_line_content": "        removeExpire(key->db,key->key);",
          "content_same": false
        },
        {
          "line": 1620,
          "old_api": null,
          "new_api": "zslValueLteMax",
          "old_text": null,
          "new_text": "zslValueLteMax(ln->score,&key->zrs)",
          "old_line_content": "                return 0;",
          "new_line_content": "                !zslValueLteMax(ln->score,&key->zrs))",
          "content_same": false
        },
        {
          "line": 2136,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(cmdname)",
          "old_line_content": "    /* Create the client and dispatch the command. */",
          "new_line_content": "    argv[0] = createStringObject(cmdname,strlen(cmdname));",
          "content_same": false
        },
        {
          "line": 1625,
          "old_api": null,
          "new_api": "zslLexValueLteMax",
          "old_text": null,
          "new_text": "zslLexValueLteMax(ln->ele,&key->zlrs)",
          "old_line_content": "                }",
          "new_line_content": "                if (!zslLexValueLteMax(ln->ele,&key->zlrs)) {",
          "content_same": false
        },
        {
          "line": 2144,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(cstr)",
          "old_line_content": "            argv[argc++] = obj;",
          "new_line_content": "            argv[argc++] = createStringObject(cstr,strlen(cstr));",
          "content_same": false
        },
        {
          "line": 609,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(ptr)",
          "old_line_content": "        }",
          "new_line_content": "        case REDISMODULE_AM_STRING: decrRefCount(ptr); break;",
          "content_same": false
        },
        {
          "line": 2146,
          "old_api": null,
          "new_api": "va_arg",
          "old_text": null,
          "new_text": "va_arg(ap,void*)",
          "old_line_content": "        } else if (*p == 'b') {",
          "new_line_content": "            robj *obj = va_arg(ap,void*);",
          "content_same": false
        },
        {
          "line": 610,
          "old_api": null,
          "new_api": "RM_FreeCallReply",
          "old_text": null,
          "new_text": "RM_FreeCallReply(ptr)",
          "old_line_content": "    }",
          "new_line_content": "        case REDISMODULE_AM_REPLY: RM_FreeCallReply(ptr); break;",
          "content_same": false
        },
        {
          "line": 611,
          "old_api": null,
          "new_api": "RM_CloseKey",
          "old_text": null,
          "new_text": "RM_CloseKey(ptr)",
          "old_line_content": "    ctx->flags |= REDISMODULE_CTX_AUTO_MEMORY;",
          "new_line_content": "        case REDISMODULE_AM_KEY: RM_CloseKey(ptr); break;",
          "content_same": false
        },
        {
          "line": 1125,
          "old_api": null,
          "new_api": "RM_DeleteKey",
          "old_text": null,
          "new_text": "RM_DeleteKey(key)",
          "old_line_content": "    return REDISMODULE_OK;",
          "new_line_content": "    RM_DeleteKey(key);",
          "content_same": false
        },
        {
          "line": 2150,
          "old_api": null,
          "new_api": "va_arg",
          "old_text": null,
          "new_text": "va_arg(ap,char*)",
          "old_line_content": "        } else if (*p == 'l') {",
          "new_line_content": "            char *buf = va_arg(ap,char*);",
          "content_same": false
        },
        {
          "line": 615,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(ctx->amqueue)",
          "old_line_content": "    ctx->amqueue_used = 0;",
          "new_line_content": "    zfree(ctx->amqueue);",
          "content_same": false
        },
        {
          "line": 1126,
          "old_api": null,
          "new_api": "setKey",
          "old_text": null,
          "new_text": "setKey(key->db,key->key,str)",
          "old_line_content": "}",
          "new_line_content": "    setKey(key->db,key->key,str);",
          "content_same": false
        },
        {
          "line": 1634,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Unsupported zset encoding\")",
          "old_line_content": "",
          "new_line_content": "        serverPanic(\"Unsupported zset encoding\");",
          "content_same": false
        },
        {
          "line": 2154,
          "old_api": null,
          "new_api": "va_arg",
          "old_text": null,
          "new_text": "va_arg(ap,long long)",
          "old_line_content": "             /* A vector of strings */",
          "new_line_content": "            long ll = va_arg(ap,long long);",
          "content_same": false
        },
        {
          "line": 2158,
          "old_api": null,
          "new_api": "va_arg",
          "old_text": null,
          "new_text": "va_arg(ap, void*)",
          "old_line_content": "             /* We need to grow argv to hold the vector's elements.",
          "new_line_content": "             robj **v = va_arg(ap, void*);",
          "content_same": false
        },
        {
          "line": 2159,
          "old_api": null,
          "new_api": "va_arg",
          "old_text": null,
          "new_text": "va_arg(ap, size_t)",
          "old_line_content": "              * We resize by vector_len-1 elements, because we held",
          "new_line_content": "             size_t vlen = va_arg(ap, size_t);",
          "content_same": false
        },
        {
          "line": 1648,
          "old_api": null,
          "new_api": "ziplistPrev",
          "old_text": null,
          "new_text": "ziplistPrev(zl,eptr)",
          "old_line_content": "            key->zer = 1;",
          "new_line_content": "        prev = ziplistPrev(zl,eptr); /* Go back to previous score. */",
          "content_same": false
        },
        {
          "line": 1649,
          "old_api": null,
          "new_api": "ziplistPrev",
          "old_text": null,
          "new_text": "ziplistPrev(zl,prev)",
          "old_line_content": "            return 0;",
          "new_line_content": "        if (prev) prev = ziplistPrev(zl,prev); /* Back to previous ele. */",
          "content_same": false
        },
        {
          "line": 2165,
          "old_api": null,
          "new_api": "zrealloc",
          "old_text": null,
          "new_text": "zrealloc(argv,sizeof(robj*)*argv_size)",
          "old_line_content": "             for (i = 0; i < vlen; i++) {",
          "new_line_content": "             argv = zrealloc(argv,sizeof(robj*)*argv_size);",
          "content_same": false
        },
        {
          "line": 632,
          "old_api": null,
          "new_api": "createStringObject",
          "old_text": null,
          "new_text": "createStringObject(ptr,len)",
          "old_line_content": "}",
          "new_line_content": "    RedisModuleString *o = createStringObject(ptr,len);",
          "content_same": false
        },
        {
          "line": 2169,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(v[i])",
          "old_line_content": "        } else if (*p == '!') {",
          "new_line_content": "                 incrRefCount(v[i]);",
          "content_same": false
        },
        {
          "line": 633,
          "old_api": null,
          "new_api": "autoMemoryAdd",
          "old_text": null,
          "new_text": "autoMemoryAdd(ctx,REDISMODULE_AM_STRING,o)",
          "old_line_content": "",
          "new_line_content": "    autoMemoryAdd(ctx,REDISMODULE_AM_STRING,o);",
          "content_same": false
        },
        {
          "line": 1659,
          "old_api": null,
          "new_api": "ziplistNext",
          "old_text": null,
          "new_text": "ziplistNext(zl,prev)",
          "old_line_content": "                    key->zer = 1;",
          "new_line_content": "                prev = ziplistNext(zl,prev); /* Skip element to get the score.*/",
          "content_same": false
        },
        {
          "line": 1660,
          "old_api": null,
          "new_api": "zzlGetScore",
          "old_text": null,
          "new_text": "zzlGetScore(prev)",
          "old_line_content": "                    return 0;",
          "new_line_content": "                double score = zzlGetScore(prev); /* Obtain the prev score. */",
          "content_same": false
        },
        {
          "line": 1661,
          "old_api": null,
          "new_api": "zslValueGteMin",
          "old_text": null,
          "new_text": "zslValueGteMin(score,&key->zrs)",
          "old_line_content": "                }",
          "new_line_content": "                if (!zslValueGteMin(score,&key->zrs)) {",
          "content_same": false
        },
        {
          "line": 1667,
          "old_api": null,
          "new_api": "zzlLexValueGteMin",
          "old_text": null,
          "new_text": "zzlLexValueGteMin(prev,&key->zlrs)",
          "old_line_content": "                }",
          "new_line_content": "                if (!zzlLexValueGteMin(prev,&key->zlrs)) {",
          "content_same": false
        },
        {
          "line": 644,
          "old_api": null,
          "new_api": "ll2string",
          "old_text": null,
          "new_text": "ll2string(buf,sizeof(buf),ll)",
          "old_line_content": "",
          "new_line_content": "    size_t len = ll2string(buf,sizeof(buf),ll);",
          "content_same": false
        },
        {
          "line": 645,
          "old_api": null,
          "new_api": "RM_CreateString",
          "old_text": null,
          "new_text": "RM_CreateString(ctx,buf,len)",
          "old_line_content": "/* Free a module string object obtained with one of the Redis modules API calls",
          "new_line_content": "    return RM_CreateString(ctx,buf,len);",
          "content_same": false
        },
        {
          "line": 2184,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(argv[j])",
          "old_line_content": "}",
          "new_line_content": "        decrRefCount(argv[j]);",
          "content_same": false
        },
        {
          "line": 2185,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(argv)",
          "old_line_content": "",
          "new_line_content": "    zfree(argv);",
          "content_same": false
        },
        {
          "line": 655,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(str)",
          "old_line_content": "",
          "new_line_content": "    decrRefCount(str);",
          "content_same": false
        },
        {
          "line": 656,
          "old_api": null,
          "new_api": "autoMemoryFreed",
          "old_text": null,
          "new_text": "autoMemoryFreed(ctx,REDISMODULE_AM_STRING,str)",
          "old_line_content": "/* Given a string module object, this function returns the string pointer",
          "new_line_content": "    autoMemoryFreed(ctx,REDISMODULE_AM_STRING,str);",
          "content_same": false
        },
        {
          "line": 1683,
          "old_api": null,
          "new_api": "zslValueGteMin",
          "old_text": null,
          "new_text": "zslValueGteMin(ln->score,&key->zrs)",
          "old_line_content": "                return 0;",
          "new_line_content": "                !zslValueGteMin(ln->score,&key->zrs))",
          "content_same": false
        },
        {
          "line": 663,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(str->ptr)",
          "old_line_content": "",
          "new_line_content": "    if (len) *len = sdslen(str->ptr);",
          "content_same": false
        },
        {
          "line": 1176,
          "old_api": null,
          "new_api": "dbUnshareStringValue",
          "old_text": null,
          "new_text": "dbUnshareStringValue(key->db, key->key, key->value)",
          "old_line_content": "    return key->value->ptr;",
          "new_line_content": "        key->value = dbUnshareStringValue(key->db, key->key, key->value);",
          "content_same": false
        },
        {
          "line": 1688,
          "old_api": null,
          "new_api": "zslLexValueGteMin",
          "old_text": null,
          "new_text": "zslLexValueGteMin(prev->ele,&key->zlrs)",
          "old_line_content": "                }",
          "new_line_content": "                if (!zslLexValueGteMin(prev->ele,&key->zlrs)) {",
          "content_same": false
        },
        {
          "line": 1178,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(key->value->ptr)",
          "old_line_content": "",
          "new_line_content": "    *len = sdslen(key->value->ptr);",
          "content_same": false
        },
        {
          "line": 2204,
          "old_api": null,
          "new_api": "lookupCommandByCString",
          "old_text": null,
          "new_text": "lookupCommandByCString((char*)cmdname)",
          "old_line_content": "        return NULL;",
          "new_line_content": "    cmd = lookupCommandByCString((char*)cmdname);",
          "content_same": false
        },
        {
          "line": 672,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(str->ptr)",
          "old_line_content": "",
          "new_line_content": "    return string2ll(str->ptr,sdslen(str->ptr),ll) ? REDISMODULE_OK :",
          "content_same": false
        },
        {
          "line": 1697,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Unsupported zset encoding\")",
          "old_line_content": "",
          "new_line_content": "        serverPanic(\"Unsupported zset encoding\");",
          "content_same": false
        },
        {
          "line": 2211,
          "old_api": null,
          "new_api": "va_start",
          "old_text": null,
          "new_text": "va_start(ap, fmt)",
          "old_line_content": "    replicate = flags & REDISMODULE_ARGV_REPLICATE;",
          "new_line_content": "    va_start(ap, fmt);",
          "content_same": false
        },
        {
          "line": 2213,
          "old_api": null,
          "new_api": "moduleCreateArgvFromUserFormat",
          "old_text": null,
          "new_text": "moduleCreateArgvFromUserFormat(cmdname,fmt,&argc,&flags,ap)",
          "old_line_content": "",
          "new_line_content": "    argv = moduleCreateArgvFromUserFormat(cmdname,fmt,&argc,&flags,ap);",
          "content_same": false
        },
        {
          "line": 2215,
          "old_api": null,
          "new_api": "va_end",
          "old_text": null,
          "new_text": "va_end(ap)",
          "old_line_content": "    c->flags |= CLIENT_MODULE;",
          "new_line_content": "    va_end(ap);",
          "content_same": false
        },
        {
          "line": 680,
          "old_api": null,
          "new_api": "getDoubleFromObject",
          "old_text": null,
          "new_text": "getDoubleFromObject(str,d)",
          "old_line_content": "",
          "new_line_content": "    int retval = getDoubleFromObject(str,d);",
          "content_same": false
        },
        {
          "line": 1206,
          "old_api": null,
          "new_api": "setKey",
          "old_text": null,
          "new_text": "setKey(key->db,key->key,o)",
          "old_line_content": "    } else {",
          "new_line_content": "        setKey(key->db,key->key,o);",
          "content_same": false
        },
        {
          "line": 1212,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(key->value->ptr)",
          "old_line_content": "        } else if (newlen < curlen) {",
          "new_line_content": "        size_t curlen = sdslen(key->value->ptr);",
          "content_same": false
        },
        {
          "line": 702,
          "old_api": null,
          "new_api": "addReplyErrorFormat",
          "old_text": null,
          "new_text": "addReplyErrorFormat(ctx->client,\n        \"wrong number of arguments for '%s' command\",\n        (char*)ctx->client->argv[0]->ptr)",
          "old_line_content": "    return REDISMODULE_OK;",
          "new_line_content": "    addReplyErrorFormat(ctx->client,",
          "content_same": false
        },
        {
          "line": 2239,
          "old_api": null,
          "new_api": "getNodeByQuery",
          "old_text": null,
          "new_text": "getNodeByQuery(c,c->cmd,c->argv,c->argc,NULL,NULL)",
          "old_line_content": "            errno = EPERM;",
          "new_line_content": "        if (getNodeByQuery(c,c->cmd,c->argv,c->argc,NULL,NULL) !=",
          "content_same": false
        },
        {
          "line": 1214,
          "old_api": null,
          "new_api": "sdsgrowzero",
          "old_text": null,
          "new_text": "sdsgrowzero(key->value->ptr,newlen)",
          "old_line_content": "            /* If the string is too wasteful, reallocate it. */",
          "new_line_content": "            key->value->ptr = sdsgrowzero(key->value->ptr,newlen);",
          "content_same": false
        },
        {
          "line": 1218,
          "old_api": null,
          "new_api": "sdsavail",
          "old_text": null,
          "new_text": "sdsavail(key->value->ptr)",
          "old_line_content": "    }",
          "new_line_content": "            if (sdslen(key->value->ptr) < sdsavail(key->value->ptr))",
          "content_same": false
        },
        {
          "line": 1219,
          "old_api": null,
          "new_api": "sdsRemoveFreeSpace",
          "old_text": null,
          "new_text": "sdsRemoveFreeSpace(key->value->ptr)",
          "old_line_content": "    return REDISMODULE_OK;",
          "new_line_content": "                key->value->ptr = sdsRemoveFreeSpace(key->value->ptr);",
          "content_same": false
        },
        {
          "line": 711,
          "old_api": null,
          "new_api": "addReplyLongLong",
          "old_text": null,
          "new_text": "addReplyLongLong(ctx->client,ll)",
          "old_line_content": "",
          "new_line_content": "    addReplyLongLong(ctx->client,ll);",
          "content_same": false
        },
        {
          "line": 2250,
          "old_api": null,
          "new_api": "moduleReplicateMultiIfNeeded",
          "old_text": null,
          "new_text": "moduleReplicateMultiIfNeeded(ctx)",
          "old_line_content": "    int call_flags = CMD_CALL_SLOWLOG | CMD_CALL_STATS;",
          "new_line_content": "    if (replicate) moduleReplicateMultiIfNeeded(ctx);",
          "content_same": false
        },
        {
          "line": 720,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(strmsg,msg)",
          "old_line_content": "    return REDISMODULE_OK;",
          "new_line_content": "    strmsg = sdscat(strmsg,msg);",
          "content_same": false
        },
        {
          "line": 721,
          "old_api": null,
          "new_api": "sdscatlen",
          "old_text": null,
          "new_text": "sdscatlen(strmsg,\"\\r\\n\",2)",
          "old_line_content": "}",
          "new_line_content": "    strmsg = sdscatlen(strmsg,\"\\r\\n\",2);",
          "content_same": false
        },
        {
          "line": 2258,
          "old_api": null,
          "new_api": "call",
          "old_text": null,
          "new_text": "call(c,call_flags)",
          "old_line_content": "     * The first thing we need is to create a single string from the client",
          "new_line_content": "    call(c,call_flags);",
          "content_same": false
        },
        {
          "line": 722,
          "old_api": null,
          "new_api": "addReplySds",
          "old_text": null,
          "new_text": "addReplySds(ctx->client,strmsg)",
          "old_line_content": "",
          "new_line_content": "    addReplySds(ctx->client,strmsg);",
          "content_same": false
        },
        {
          "line": 1236,
          "old_api": null,
          "new_api": "moduleCreateEmptyKey",
          "old_text": null,
          "new_text": "moduleCreateEmptyKey(key,REDISMODULE_KEYTYPE_LIST)",
          "old_line_content": "    return REDISMODULE_OK;",
          "new_line_content": "    if (key->value == NULL) moduleCreateEmptyKey(key,REDISMODULE_KEYTYPE_LIST);",
          "content_same": false
        },
        {
          "line": 1237,
          "old_api": null,
          "new_api": "listTypePush",
          "old_text": null,
          "new_text": "listTypePush(key->value, ele,\n        (where == REDISMODULE_LIST_HEAD) ? QUICKLIST_HEAD : QUICKLIST_TAIL)",
          "old_line_content": "}",
          "new_line_content": "    listTypePush(key->value, ele,",
          "content_same": false
        },
        {
          "line": 2271,
          "old_api": null,
          "new_api": "moduleCreateCallReplyFromProto",
          "old_text": null,
          "new_text": "moduleCreateCallReplyFromProto(ctx,proto)",
          "old_line_content": "cleanup:",
          "new_line_content": "    reply = moduleCreateCallReplyFromProto(ctx,proto);",
          "content_same": false
        },
        {
          "line": 1762,
          "old_api": null,
          "new_api": "va_start",
          "old_text": null,
          "new_text": "va_start(ap, flags)",
          "old_line_content": "        /* Get the field and value objects. */",
          "new_line_content": "    va_start(ap, flags);",
          "content_same": false
        },
        {
          "line": 2275,
          "old_api": null,
          "new_api": "freeClient",
          "old_text": null,
          "new_text": "freeClient(c)",
          "old_line_content": "",
          "new_line_content": "    freeClient(c);",
          "content_same": false
        },
        {
          "line": 741,
          "old_api": null,
          "new_api": "replyWithStatus",
          "old_text": null,
          "new_text": "replyWithStatus(ctx,err,\"-\")",
          "old_line_content": "/* Reply with a simple string (+... \\r\\n in RESP protocol). This replies",
          "new_line_content": "    return replyWithStatus(ctx,err,\"-\");",
          "content_same": false
        },
        {
          "line": 1767,
          "old_api": null,
          "new_api": "va_arg",
          "old_text": null,
          "new_text": "va_arg(ap,char*)",
          "old_line_content": "        } else {",
          "new_line_content": "            char *cfield = va_arg(ap,char*);",
          "content_same": false
        },
        {
          "line": 1256,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(ele)",
          "old_line_content": "    return decoded;",
          "new_line_content": "    decrRefCount(ele);",
          "content_same": false
        },
        {
          "line": 1257,
          "old_api": null,
          "new_api": "moduleDelKeyIfEmpty",
          "old_text": null,
          "new_text": "moduleDelKeyIfEmpty(key)",
          "old_line_content": "}",
          "new_line_content": "    moduleDelKeyIfEmpty(key);",
          "content_same": false
        },
        {
          "line": 2282,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(reply->proto)",
          "old_line_content": "",
          "new_line_content": "    if (reply->proto) *len = sdslen(reply->proto);",
          "content_same": false
        },
        {
          "line": 1258,
          "old_api": null,
          "new_api": "autoMemoryAdd",
          "old_text": null,
          "new_text": "autoMemoryAdd(key->ctx,REDISMODULE_AM_STRING,decoded)",
          "old_line_content": "",
          "new_line_content": "    autoMemoryAdd(key->ctx,REDISMODULE_AM_STRING,decoded);",
          "content_same": false
        },
        {
          "line": 1769,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(cfield)",
          "old_line_content": "            if (field == NULL) break;",
          "new_line_content": "            field = createRawStringObject(cfield,strlen(cfield));",
          "content_same": false
        },
        {
          "line": 750,
          "old_api": null,
          "new_api": "replyWithStatus",
          "old_text": null,
          "new_text": "replyWithStatus(ctx,msg,\"+\")",
          "old_line_content": "/* Reply with an array type of 'len' elements. However 'len' other calls",
          "new_line_content": "    return replyWithStatus(ctx,msg,\"+\");",
          "content_same": false
        },
        {
          "line": 1774,
          "old_api": null,
          "new_api": "va_arg",
          "old_text": null,
          "new_text": "va_arg(ap,RedisModuleString*)",
          "old_line_content": "        if (flags & (REDISMODULE_HASH_XX|REDISMODULE_HASH_NX)) {",
          "new_line_content": "        value = va_arg(ap,RedisModuleString*);",
          "content_same": false
        },
        {
          "line": 1778,
          "old_api": null,
          "new_api": "hashTypeExists",
          "old_text": null,
          "new_text": "hashTypeExists(key->value, field->ptr)",
          "old_line_content": "            {",
          "new_line_content": "            int exists = hashTypeExists(key->value, field->ptr);",
          "content_same": false
        },
        {
          "line": 2294,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen((char*)key)",
          "old_line_content": "int dictCStringKeyCompare(void *privdata, const void *key1, const void *key2) {",
          "new_line_content": "    return dictGenHashFunction((unsigned char*)key, strlen((char*)key));",
          "content_same": false
        },
        {
          "line": 1782,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(field)",
          "old_line_content": "        }",
          "new_line_content": "                if (flags & REDISMODULE_HASH_CFIELDS) decrRefCount(field);",
          "content_same": false
        },
        {
          "line": 2298,
          "old_api": null,
          "new_api": "DICT_NOTUSED",
          "old_text": null,
          "new_text": "DICT_NOTUSED(privdata)",
          "old_line_content": "",
          "new_line_content": "    DICT_NOTUSED(privdata);",
          "content_same": false
        },
        {
          "line": 2299,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(key1,key2)",
          "old_line_content": "dictType moduleAPIDictType = {",
          "new_line_content": "    return strcmp(key1,key2) == 0;",
          "content_same": false
        },
        {
          "line": 1789,
          "old_api": null,
          "new_api": "hashTypeDelete",
          "old_text": null,
          "new_text": "hashTypeDelete(key->value, field->ptr)",
          "old_line_content": "        }",
          "new_line_content": "            updated += hashTypeDelete(key->value, field->ptr);",
          "content_same": false
        },
        {
          "line": 1790,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(field)",
          "old_line_content": "",
          "new_line_content": "            if (flags & REDISMODULE_HASH_CFIELDS) decrRefCount(field);",
          "content_same": false
        },
        {
          "line": 772,
          "old_api": null,
          "new_api": "addReplyMultiBulkLen",
          "old_text": null,
          "new_text": "addReplyMultiBulkLen(ctx->client,len)",
          "old_line_content": "}",
          "new_line_content": "        addReplyMultiBulkLen(ctx->client,len);",
          "content_same": false
        },
        {
          "line": 2312,
          "old_api": null,
          "new_api": "dictAdd",
          "old_text": null,
          "new_text": "dictAdd(server.moduleapi, (char*)funcname, funcptr)",
          "old_line_content": "#define REGISTER_API(name) \\",
          "new_line_content": "    return dictAdd(server.moduleapi, (char*)funcname, funcptr);",
          "content_same": false
        },
        {
          "line": 1800,
          "old_api": null,
          "new_api": "hashTypeSet",
          "old_text": null,
          "new_text": "hashTypeSet(key->value, field->ptr, value->ptr, low_flags)",
          "old_line_content": "         * however we still have to release the 'field' object shell. */",
          "new_line_content": "        updated += hashTypeSet(key->value, field->ptr, value->ptr, low_flags);",
          "content_same": false
        },
        {
          "line": 1809,
          "old_api": null,
          "new_api": "va_end",
          "old_text": null,
          "new_text": "va_end(ap)",
          "old_line_content": "}",
          "new_line_content": "    va_end(ap);",
          "content_same": false
        },
        {
          "line": 1810,
          "old_api": null,
          "new_api": "moduleDelKeyIfEmpty",
          "old_text": null,
          "new_text": "moduleDelKeyIfEmpty(key)",
          "old_line_content": "",
          "new_line_content": "    moduleDelKeyIfEmpty(key);",
          "content_same": false
        },
        {
          "line": 1316,
          "old_api": null,
          "new_api": "moduleCreateEmptyKey",
          "old_text": null,
          "new_text": "moduleCreateEmptyKey(key,REDISMODULE_KEYTYPE_ZSET)",
          "old_line_content": "        if (flagsptr) *flagsptr = 0;",
          "new_line_content": "    if (key->value == NULL) moduleCreateEmptyKey(key,REDISMODULE_KEYTYPE_ZSET);",
          "content_same": false
        },
        {
          "line": 805,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\n            \"API misuse detected in module %s: \"\n            \"RedisModule_ReplySetArrayLength() called without previous \"\n            \"RedisModule_ReplyWithArray(ctx,REDISMODULE_POSTPONED_ARRAY_LEN) \"\n            \"call.\", ctx->module->name)",
          "old_line_content": "            \"RedisModule_ReplyWithArray(ctx,REDISMODULE_POSTPONED_ARRAY_LEN) \"",
          "new_line_content": "        serverLog(LL_WARNING,",
          "content_same": false
        },
        {
          "line": 1317,
          "old_api": null,
          "new_api": "RM_ZsetAddFlagsToCoreFlags",
          "old_text": null,
          "new_text": "RM_ZsetAddFlagsToCoreFlags(*flagsptr)",
          "old_line_content": "        return REDISMODULE_ERR;",
          "new_line_content": "    if (flagsptr) flags = RM_ZsetAddFlagsToCoreFlags(*flagsptr);",
          "content_same": false
        },
        {
          "line": 1318,
          "old_api": null,
          "new_api": "zsetAdd",
          "old_text": null,
          "new_text": "zsetAdd(key->value,score,ele->ptr,&flags,NULL)",
          "old_line_content": "    }",
          "new_line_content": "    if (zsetAdd(key->value,score,ele->ptr,&flags,NULL) == 0) {",
          "content_same": false
        },
        {
          "line": 1322,
          "old_api": null,
          "new_api": "RM_ZsetAddFlagsFromCoreFlags",
          "old_text": null,
          "new_text": "RM_ZsetAddFlagsFromCoreFlags(flags)",
          "old_line_content": "",
          "new_line_content": "    if (flagsptr) *flagsptr = RM_ZsetAddFlagsFromCoreFlags(flags);",
          "content_same": false
        },
        {
          "line": 813,
          "old_api": null,
          "new_api": "setDeferredMultiBulkLength",
          "old_text": null,
          "new_text": "setDeferredMultiBulkLength(ctx->client,\n            ctx->postponed_arrays[ctx->postponed_arrays_count],\n            len)",
          "old_line_content": "    if (ctx->postponed_arrays_count == 0) {",
          "new_line_content": "    setDeferredMultiBulkLength(ctx->client,",
          "content_same": false
        },
        {
          "line": 817,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(ctx->postponed_arrays)",
          "old_line_content": "}",
          "new_line_content": "        zfree(ctx->postponed_arrays);",
          "content_same": false
        },
        {
          "line": 826,
          "old_api": null,
          "new_api": "addReplyBulkCBuffer",
          "old_text": null,
          "new_text": "addReplyBulkCBuffer(ctx->client,(char*)buf,len)",
          "old_line_content": "",
          "new_line_content": "    addReplyBulkCBuffer(ctx->client,(char*)buf,len);",
          "content_same": false
        },
        {
          "line": 1344,
          "old_api": null,
          "new_api": "RM_ZsetAddFlagsToCoreFlags",
          "old_text": null,
          "new_text": "RM_ZsetAddFlagsToCoreFlags(*flagsptr)",
          "old_line_content": "        if (flagsptr) *flagsptr = 0;",
          "new_line_content": "    if (flagsptr) flags = RM_ZsetAddFlagsToCoreFlags(*flagsptr);",
          "content_same": false
        },
        {
          "line": 834,
          "old_api": null,
          "new_api": "addReplyBulk",
          "old_text": null,
          "new_text": "addReplyBulk(ctx->client,str)",
          "old_line_content": "",
          "new_line_content": "    addReplyBulk(ctx->client,str);",
          "content_same": false
        },
        {
          "line": 1346,
          "old_api": null,
          "new_api": "zsetAdd",
          "old_text": null,
          "new_text": "zsetAdd(key->value,score,ele->ptr,&flags,newscore)",
          "old_line_content": "    }",
          "new_line_content": "    if (zsetAdd(key->value,score,ele->ptr,&flags,newscore) == 0) {",
          "content_same": false
        },
        {
          "line": 1859,
          "old_api": null,
          "new_api": "va_start",
          "old_text": null,
          "new_text": "va_start(ap, flags)",
          "old_line_content": "        int *existsptr;",
          "new_line_content": "    va_start(ap, flags);",
          "content_same": false
        },
        {
          "line": 1865,
          "old_api": null,
          "new_api": "va_arg",
          "old_text": null,
          "new_text": "va_arg(ap,char*)",
          "old_line_content": "        } else {",
          "new_line_content": "            char *cfield = va_arg(ap,char*);",
          "content_same": false
        },
        {
          "line": 843,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(ctx->client,shared.nullbulk)",
          "old_line_content": "",
          "new_line_content": "    addReply(ctx->client,shared.nullbulk);",
          "content_same": false
        },
        {
          "line": 1355,
          "old_api": null,
          "new_api": "RM_ZsetAddFlagsFromCoreFlags",
          "old_text": null,
          "new_text": "RM_ZsetAddFlagsFromCoreFlags(flags)",
          "old_line_content": "",
          "new_line_content": "    if (flagsptr) *flagsptr = RM_ZsetAddFlagsFromCoreFlags(flags);",
          "content_same": false
        },
        {
          "line": 1867,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(cfield)",
          "old_line_content": "            if (field == NULL) break;",
          "new_line_content": "            field = createRawStringObject(cfield,strlen(cfield));",
          "content_same": false
        },
        {
          "line": 2382,
          "old_api": null,
          "new_api": "REGISTER_API",
          "old_text": null,
          "new_text": "REGISTER_API(KeyAtPos)",
          "old_line_content": "}",
          "new_line_content": "    REGISTER_API(KeyAtPos);",
          "content_same": false
        },
        {
          "line": 2383,
          "old_api": null,
          "new_api": "REGISTER_API",
          "old_text": null,
          "new_text": "REGISTER_API(GetClientId)",
          "old_line_content": "",
          "new_line_content": "    REGISTER_API(GetClientId);",
          "content_same": false
        },
        {
          "line": 2384,
          "old_api": null,
          "new_api": "REGISTER_API",
          "old_text": null,
          "new_text": "REGISTER_API(PoolAlloc)",
          "old_line_content": "/* Global initialization at Redis startup. */",
          "new_line_content": "    REGISTER_API(PoolAlloc);",
          "content_same": false
        },
        {
          "line": 1869,
          "old_api": null,
          "new_api": "va_arg",
          "old_text": null,
          "new_text": "va_arg(ap,RedisModuleString*)",
          "old_line_content": "",
          "new_line_content": "            field = va_arg(ap,RedisModuleString*);",
          "content_same": false
        },
        {
          "line": 1875,
          "old_api": null,
          "new_api": "va_arg",
          "old_text": null,
          "new_text": "va_arg(ap,int*)",
          "old_line_content": "            else",
          "new_line_content": "            existsptr = va_arg(ap,int*);",
          "content_same": false
        },
        {
          "line": 2389,
          "old_api": null,
          "new_api": "listCreate",
          "old_text": null,
          "new_text": "listCreate()",
          "old_line_content": "}",
          "new_line_content": "    server.loadmodule_queue = listCreate();",
          "content_same": false
        },
        {
          "line": 2390,
          "old_api": null,
          "new_api": "dictCreate",
          "old_text": null,
          "new_text": "dictCreate(&modulesDictType,NULL)",
          "old_line_content": "",
          "new_line_content": "    modules = dictCreate(&modulesDictType,NULL);",
          "content_same": false
        },
        {
          "line": 2391,
          "old_api": null,
          "new_api": "moduleRegisterCoreAPI",
          "old_text": null,
          "new_text": "moduleRegisterCoreAPI()",
          "old_line_content": "/* Load all the modules in the server.loadmodule_queue list, which is",
          "new_line_content": "    moduleRegisterCoreAPI();",
          "content_same": false
        },
        {
          "line": 854,
          "old_api": null,
          "new_api": "sdsnewlen",
          "old_text": null,
          "new_text": "sdsnewlen(reply->proto, reply->protolen)",
          "old_line_content": "}",
          "new_line_content": "    sds proto = sdsnewlen(reply->proto, reply->protolen);",
          "content_same": false
        },
        {
          "line": 855,
          "old_api": null,
          "new_api": "addReplySds",
          "old_text": null,
          "new_text": "addReplySds(ctx->client,proto)",
          "old_line_content": "",
          "new_line_content": "    addReplySds(ctx->client,proto);",
          "content_same": false
        },
        {
          "line": 1877,
          "old_api": null,
          "new_api": "hashTypeExists",
          "old_text": null,
          "new_text": "hashTypeExists(key->value,field->ptr)",
          "old_line_content": "        } else {",
          "new_line_content": "                *existsptr = hashTypeExists(key->value,field->ptr);",
          "content_same": false
        },
        {
          "line": 1881,
          "old_api": null,
          "new_api": "va_arg",
          "old_text": null,
          "new_text": "va_arg(ap,RedisModuleString**)",
          "old_line_content": "                if (*valueptr) {",
          "new_line_content": "            valueptr = va_arg(ap,RedisModuleString**);",
          "content_same": false
        },
        {
          "line": 1885,
          "old_api": null,
          "new_api": "getDecodedObject",
          "old_text": null,
          "new_text": "getDecodedObject(*valueptr)",
          "old_line_content": "                }",
          "new_line_content": "                    robj *decoded = getDecodedObject(*valueptr);",
          "content_same": false
        },
        {
          "line": 1886,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(*valueptr)",
          "old_line_content": "                if (*valueptr)",
          "new_line_content": "                    decrRefCount(*valueptr);",
          "content_same": false
        },
        {
          "line": 866,
          "old_api": null,
          "new_api": "addReplyDouble",
          "old_text": null,
          "new_text": "addReplyDouble(ctx->client,d)",
          "old_line_content": "",
          "new_line_content": "    addReplyDouble(ctx->client,d);",
          "content_same": false
        },
        {
          "line": 1890,
          "old_api": null,
          "new_api": "autoMemoryAdd",
          "old_text": null,
          "new_text": "autoMemoryAdd(key->ctx,REDISMODULE_AM_STRING,*valueptr)",
          "old_line_content": "            }",
          "new_line_content": "                    autoMemoryAdd(key->ctx,REDISMODULE_AM_STRING,*valueptr);",
          "content_same": false
        },
        {
          "line": 1380,
          "old_api": null,
          "new_api": "zsetDel",
          "old_text": null,
          "new_text": "zsetDel(key->value,ele->ptr)",
          "old_line_content": "        if (deleted) *deleted = 0;",
          "new_line_content": "    if (key->value != NULL && zsetDel(key->value,ele->ptr)) {",
          "content_same": false
        },
        {
          "line": 1897,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(field)",
          "old_line_content": "    return REDISMODULE_OK;",
          "new_line_content": "        if (flags & REDISMODULE_HASH_CFIELDS) decrRefCount(field);",
          "content_same": false
        },
        {
          "line": 2410,
          "old_api": null,
          "new_api": "moduleLoad",
          "old_text": null,
          "new_text": "moduleLoad(modulepath)",
          "old_line_content": "                modulepath);",
          "new_line_content": "        if (moduleLoad(modulepath) == C_ERR) {",
          "content_same": false
        },
        {
          "line": 1899,
          "old_api": null,
          "new_api": "va_end",
          "old_text": null,
          "new_text": "va_end(ap)",
          "old_line_content": "",
          "new_line_content": "    va_end(ap);",
          "content_same": false
        },
        {
          "line": 2414,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "}",
          "new_line_content": "            exit(1);",
          "content_same": false
        },
        {
          "line": 879,
          "old_api": null,
          "new_api": "execCommandPropagateMulti",
          "old_text": null,
          "new_text": "execCommandPropagateMulti(ctx->client)",
          "old_line_content": "",
          "new_line_content": "    execCommandPropagateMulti(ctx->client);",
          "content_same": false
        },
        {
          "line": 2420,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(module->name)",
          "old_line_content": "",
          "new_line_content": "    sdsfree(module->name);",
          "content_same": false
        },
        {
          "line": 2421,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(module)",
          "old_line_content": "/* Load a module and initialize it. On success C_OK is returned, otherwise",
          "new_line_content": "    zfree(module);",
          "content_same": false
        },
        {
          "line": 1399,
          "old_api": null,
          "new_api": "zsetScore",
          "old_text": null,
          "new_text": "zsetScore(key->value,ele->ptr,score)",
          "old_line_content": "",
          "new_line_content": "    if (zsetScore(key->value,ele->ptr,score) == C_ERR) return REDISMODULE_ERR;",
          "content_same": false
        },
        {
          "line": 1915,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(proto)",
          "old_line_content": "    case '$':",
          "new_line_content": "    reply->protolen = sdslen(proto);",
          "content_same": false
        },
        {
          "line": 2431,
          "old_api": null,
          "new_api": "dlopen",
          "old_text": null,
          "new_text": "dlopen(path,RTLD_NOW|RTLD_LOCAL)",
          "old_line_content": "        return C_ERR;",
          "new_line_content": "    handle = dlopen(path,RTLD_NOW|RTLD_LOCAL);",
          "content_same": false
        },
        {
          "line": 1411,
          "old_api": null,
          "new_api": "zslFreeLexRange",
          "old_text": null,
          "new_text": "zslFreeLexRange(&key->zlrs)",
          "old_line_content": "     * than crashing. */",
          "new_line_content": "        zslFreeLexRange(&key->zlrs);",
          "content_same": false
        },
        {
          "line": 2436,
          "old_api": null,
          "new_api": "dlsym",
          "old_text": null,
          "new_text": "dlsym(handle,\"RedisModule_OnLoad\")",
          "old_line_content": "            \"Module %s does not export RedisModule_OnLoad() \"",
          "new_line_content": "    onload = (int (*)(void *))(unsigned long) dlsym(handle,\"RedisModule_OnLoad\");",
          "content_same": false
        },
        {
          "line": 2438,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\n            \"Module %s does not export RedisModule_OnLoad() \"\n            \"symbol. Module not loaded.\",path)",
          "old_line_content": "        return C_ERR;",
          "new_line_content": "        serverLog(LL_WARNING,",
          "content_same": false
        },
        {
          "line": 2444,
          "old_api": null,
          "new_api": "moduleFreeModuleStructure",
          "old_text": null,
          "new_text": "moduleFreeModuleStructure(ctx.module)",
          "old_line_content": "            \"Module %s initialization failed. Module not loaded\",path);",
          "new_line_content": "        if (ctx.module) moduleFreeModuleStructure(ctx.module);",
          "content_same": false
        },
        {
          "line": 2445,
          "old_api": null,
          "new_api": "dlclose",
          "old_text": null,
          "new_text": "dlclose(handle)",
          "old_line_content": "        return C_ERR;",
          "new_line_content": "        dlclose(handle);",
          "content_same": false
        },
        {
          "line": 2446,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\n            \"Module %s initialization failed. Module not loaded\",path)",
          "old_line_content": "    }",
          "new_line_content": "        serverLog(LL_WARNING,",
          "content_same": false
        },
        {
          "line": 908,
          "old_api": null,
          "new_api": "lookupCommandByCString",
          "old_text": null,
          "new_text": "lookupCommandByCString((char*)cmdname)",
          "old_line_content": "    /* Create the client and dispatch the command. */",
          "new_line_content": "    cmd = lookupCommandByCString((char*)cmdname);",
          "content_same": false
        },
        {
          "line": 912,
          "old_api": null,
          "new_api": "va_start",
          "old_text": null,
          "new_text": "va_start(ap, fmt)",
          "old_line_content": "    if (argv == NULL) return REDISMODULE_ERR;",
          "new_line_content": "    va_start(ap, fmt);",
          "content_same": false
        },
        {
          "line": 913,
          "old_api": null,
          "new_api": "moduleCreateArgvFromUserFormat",
          "old_text": null,
          "new_text": "moduleCreateArgvFromUserFormat(cmdname,fmt,&argc,&flags,ap)",
          "old_line_content": "",
          "new_line_content": "    argv = moduleCreateArgvFromUserFormat(cmdname,fmt,&argc,&flags,ap);",
          "content_same": false
        },
        {
          "line": 914,
          "old_api": null,
          "new_api": "va_end",
          "old_text": null,
          "new_text": "va_end(ap)",
          "old_line_content": "    /* Replicate! */",
          "new_line_content": "    va_end(ap);",
          "content_same": false
        },
        {
          "line": 2452,
          "old_api": null,
          "new_api": "dictAdd",
          "old_text": null,
          "new_text": "dictAdd(modules,ctx.module->name,ctx.module)",
          "old_line_content": "    return C_OK;",
          "new_line_content": "    dictAdd(modules,ctx.module->name,ctx.module);",
          "content_same": false
        },
        {
          "line": 2454,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_NOTICE,\"Module '%s' loaded from %s\",ctx.module->name,path)",
          "old_line_content": "",
          "new_line_content": "    serverLog(LL_NOTICE,\"Module '%s' loaded from %s\",ctx.module->name,path);",
          "content_same": false
        },
        {
          "line": 918,
          "old_api": null,
          "new_api": "moduleReplicateMultiIfNeeded",
          "old_text": null,
          "new_text": "moduleReplicateMultiIfNeeded(ctx)",
          "old_line_content": "",
          "new_line_content": "    moduleReplicateMultiIfNeeded(ctx);",
          "content_same": false
        },
        {
          "line": 919,
          "old_api": null,
          "new_api": "alsoPropagate",
          "old_text": null,
          "new_text": "alsoPropagate(cmd,ctx->client->db->id,argv,argc,\n        PROPAGATE_AOF|PROPAGATE_REPL)",
          "old_line_content": "    /* Release the argv. */",
          "new_line_content": "    alsoPropagate(cmd,ctx->client->db->id,argv,argc,",
          "content_same": false
        },
        {
          "line": 1434,
          "old_api": null,
          "new_api": "RM_ZsetRangeStop",
          "old_text": null,
          "new_text": "RM_ZsetRangeStop(key)",
          "old_line_content": "",
          "new_line_content": "    RM_ZsetRangeStop(key);",
          "content_same": false
        },
        {
          "line": 923,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(argv[j])",
          "old_line_content": "}",
          "new_line_content": "    for (j = 0; j < argc; j++) decrRefCount(argv[j]);",
          "content_same": false
        },
        {
          "line": 924,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(argv)",
          "old_line_content": "",
          "new_line_content": "    zfree(argv);",
          "content_same": false
        },
        {
          "line": 1946,
          "old_api": null,
          "new_api": "moduleParseCallReply_SimpleString",
          "old_text": null,
          "new_text": "moduleParseCallReply_SimpleString(reply)",
          "old_line_content": "}",
          "new_line_content": "    case '+': moduleParseCallReply_SimpleString(reply); break;",
          "content_same": false
        },
        {
          "line": 1947,
          "old_api": null,
          "new_api": "moduleParseCallReply_Array",
          "old_text": null,
          "new_text": "moduleParseCallReply_Array(reply)",
          "old_line_content": "",
          "new_line_content": "    case '*': moduleParseCallReply_Array(reply); break;",
          "content_same": false
        },
        {
          "line": 2464,
          "old_api": null,
          "new_api": "dictFetchValue",
          "old_text": null,
          "new_text": "dictFetchValue(modules,name)",
          "old_line_content": "        return REDISMODULE_ERR;",
          "new_line_content": "    struct RedisModule *module = dictFetchValue(modules,name);",
          "content_same": false
        },
        {
          "line": 1953,
          "old_api": null,
          "new_api": "strchr",
          "old_text": null,
          "new_text": "strchr(proto+1,'\\r')",
          "old_line_content": "    reply->protolen = p-proto+2;",
          "new_line_content": "    char *p = strchr(proto+1,'\\r');",
          "content_same": false
        },
        {
          "line": 1955,
          "old_api": null,
          "new_api": "string2ll",
          "old_text": null,
          "new_text": "string2ll(proto+1,p-proto-1,&reply->val.ll)",
          "old_line_content": "}",
          "new_line_content": "    string2ll(proto+1,p-proto-1,&reply->val.ll);",
          "content_same": false
        },
        {
          "line": 1447,
          "old_api": null,
          "new_api": "zzlFirstInRange",
          "old_text": null,
          "new_text": "zzlFirstInRange(key->value->ptr,zrs)",
          "old_line_content": "        zset *zs = key->value->ptr;",
          "new_line_content": "        key->zcurrent = first ? zzlFirstInRange(key->value->ptr,zrs) :",
          "content_same": false
        },
        {
          "line": 1448,
          "old_api": null,
          "new_api": "zzlLastInRange",
          "old_text": null,
          "new_text": "zzlLastInRange(key->value->ptr,zrs)",
          "old_line_content": "        zskiplist *zsl = zs->zsl;",
          "new_line_content": "                                zzlLastInRange(key->value->ptr,zrs);",
          "content_same": false
        },
        {
          "line": 2473,
          "old_api": null,
          "new_api": "dictNext",
          "old_text": null,
          "new_text": "dictNext(di)",
          "old_line_content": "            RedisModuleCommandProxy *cp =",
          "new_line_content": "    while ((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 2474,
          "old_api": null,
          "new_api": "dictGetVal",
          "old_text": null,
          "new_text": "dictGetVal(de)",
          "old_line_content": "                (void*)(unsigned long)cmd->getkeys_proc;",
          "new_line_content": "        struct redisCommand *cmd = dictGetVal(de);",
          "content_same": false
        },
        {
          "line": 940,
          "old_api": null,
          "new_api": "alsoPropagate",
          "old_text": null,
          "new_text": "alsoPropagate(ctx->client->cmd,ctx->client->db->id,\n        ctx->client->argv,ctx->client->argc,\n        PROPAGATE_AOF|PROPAGATE_REPL)",
          "old_line_content": "    return REDISMODULE_OK;",
          "new_line_content": "    alsoPropagate(ctx->client->cmd,ctx->client->db->id,",
          "content_same": false
        },
        {
          "line": 1453,
          "old_api": null,
          "new_api": "zslLastInRange",
          "old_text": null,
          "new_text": "zslLastInRange(zsl,zrs)",
          "old_line_content": "    }",
          "new_line_content": "                                zslLastInRange(zsl,zrs);",
          "content_same": false
        },
        {
          "line": 1965,
          "old_api": null,
          "new_api": "string2ll",
          "old_text": null,
          "new_text": "string2ll(proto+1,p-proto-1,&bulklen)",
          "old_line_content": "        reply->type = REDISMODULE_REPLY_NULL;",
          "new_line_content": "    string2ll(proto+1,p-proto-1,&bulklen);",
          "content_same": false
        },
        {
          "line": 1455,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Unsupported zset encoding\")",
          "old_line_content": "    return REDISMODULE_OK;",
          "new_line_content": "        serverPanic(\"Unsupported zset encoding\");",
          "content_same": false
        },
        {
          "line": 2482,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(cmdname)",
          "old_line_content": "            }",
          "new_line_content": "                sdsfree(cmdname);",
          "content_same": false
        },
        {
          "line": 2483,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(cp->rediscmd)",
          "old_line_content": "        }",
          "new_line_content": "                zfree(cp->rediscmd);",
          "content_same": false
        },
        {
          "line": 2484,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(cp)",
          "old_line_content": "    }",
          "new_line_content": "                zfree(cp);",
          "content_same": false
        },
        {
          "line": 2488,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "",
          "new_line_content": "    dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 1979,
          "old_api": null,
          "new_api": "strchr",
          "old_text": null,
          "new_text": "strchr(proto+1,'\\r')",
          "old_line_content": "    reply->len = p-proto-1;",
          "new_line_content": "    char *p = strchr(proto+1,'\\r');",
          "content_same": false
        },
        {
          "line": 2494,
          "old_api": null,
          "new_api": "dlerror",
          "old_text": null,
          "new_text": "dlerror()",
          "old_line_content": "            module->name, error);",
          "new_line_content": "        char *error = dlerror();",
          "content_same": false
        },
        {
          "line": 2496,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\"Error when trying to close the %s module: %s\",\n            module->name, error)",
          "old_line_content": "",
          "new_line_content": "        serverLog(LL_WARNING,\"Error when trying to close the %s module: %s\",",
          "content_same": false
        },
        {
          "line": 2501,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_NOTICE,\"Module %s unloaded\",module->name)",
          "old_line_content": "    /* Free the module structure. */",
          "new_line_content": "    serverLog(LL_NOTICE,\"Module %s unloaded\",module->name);",
          "content_same": false
        },
        {
          "line": 1477,
          "old_api": null,
          "new_api": "zsetInitScoreRange",
          "old_text": null,
          "new_text": "zsetInitScoreRange(key,min,max,minex,maxex,1)",
          "old_line_content": "/* Exactly like RedisModule_ZsetFirstInScoreRange() but the last element of",
          "new_line_content": "    return zsetInitScoreRange(key,min,max,minex,maxex,1);",
          "content_same": false
        },
        {
          "line": 2505,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(module)",
          "old_line_content": "}",
          "new_line_content": "    zfree(module);",
          "content_same": false
        },
        {
          "line": 1993,
          "old_api": null,
          "new_api": "string2ll",
          "old_text": null,
          "new_text": "string2ll(proto+1,p-proto-1,&arraylen)",
          "old_line_content": "    if (arraylen == -1) {",
          "new_line_content": "    string2ll(proto+1,p-proto-1,&arraylen);",
          "content_same": false
        },
        {
          "line": 1483,
          "old_api": null,
          "new_api": "zsetInitScoreRange",
          "old_text": null,
          "new_text": "zsetInitScoreRange(key,min,max,minex,maxex,0)",
          "old_line_content": "/* Helper function for RM_ZsetFirstInLexRange() and RM_ZsetLastInLexRange().",
          "new_line_content": "    return zsetInitScoreRange(key,min,max,minex,maxex,0);",
          "content_same": false
        },
        {
          "line": 2002,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(RedisModuleCallReply)*arraylen)",
          "old_line_content": "        RedisModuleCallReply *ele = reply->val.array+j;",
          "new_line_content": "    reply->val.array = zmalloc(sizeof(RedisModuleCallReply)*arraylen);",
          "content_same": false
        },
        {
          "line": 2516,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(subcmd,\"load\")",
          "old_line_content": "        else",
          "new_line_content": "    if (!strcasecmp(subcmd,\"load\") && c->argc == 3) {",
          "content_same": false
        },
        {
          "line": 2518,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "                \"Error loading the extension. Please check the server logs.\");",
          "new_line_content": "            addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 982,
          "old_api": null,
          "new_api": "selectDb",
          "old_text": null,
          "new_text": "selectDb(ctx->client,newid)",
          "old_line_content": "",
          "new_line_content": "    int retval = selectDb(ctx->client,newid);",
          "content_same": false
        },
        {
          "line": 2522,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(subcmd,\"unload\")",
          "old_line_content": "        else {",
          "new_line_content": "    } else if (!strcasecmp(subcmd,\"unload\") && c->argc == 3) {",
          "content_same": false
        },
        {
          "line": 2523,
          "old_api": null,
          "new_api": "moduleUnload",
          "old_text": null,
          "new_text": "moduleUnload(c->argv[2]->ptr)",
          "old_line_content": "            char *errmsg = \"operation not possible.\";",
          "new_line_content": "        if (moduleUnload(c->argv[2]->ptr) == C_OK)",
          "content_same": false
        },
        {
          "line": 2524,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "            switch(errno) {",
          "new_line_content": "            addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 1498,
          "old_api": null,
          "new_api": "RM_ZsetRangeStop",
          "old_text": null,
          "new_text": "RM_ZsetRangeStop(key)",
          "old_line_content": "    /* Setup the range structure used by the sorted set core implementation",
          "new_line_content": "    RM_ZsetRangeStop(key);",
          "content_same": false
        },
        {
          "line": 2010,
          "old_api": null,
          "new_api": "moduleParseCallReply",
          "old_text": null,
          "new_text": "moduleParseCallReply(ele)",
          "old_line_content": "    reply->protolen = p-proto;",
          "new_line_content": "        moduleParseCallReply(ele);",
          "content_same": false
        },
        {
          "line": 1504,
          "old_api": null,
          "new_api": "zslParseLexRange",
          "old_text": null,
          "new_text": "zslParseLexRange(min, max, zlrs)",
          "old_line_content": "     * otherwise we don't want the zlexrangespec to be freed. */",
          "new_line_content": "    if (zslParseLexRange(min, max, zlrs) == C_ERR) return REDISMODULE_ERR;",
          "content_same": false
        },
        {
          "line": 2532,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(subcmd,\"list\")",
          "old_line_content": "",
          "new_line_content": "    } else if (!strcasecmp(subcmd,\"list\") && c->argc == 2) {",
          "content_same": false
        },
        {
          "line": 1511,
          "old_api": null,
          "new_api": "zzlFirstInLexRange",
          "old_text": null,
          "new_text": "zzlFirstInLexRange(key->value->ptr,zlrs)",
          "old_line_content": "        zset *zs = key->value->ptr;",
          "new_line_content": "        key->zcurrent = first ? zzlFirstInLexRange(key->value->ptr,zlrs) :",
          "content_same": false
        },
        {
          "line": 1512,
          "old_api": null,
          "new_api": "zzlLastInLexRange",
          "old_text": null,
          "new_text": "zzlLastInLexRange(key->value->ptr,zlrs)",
          "old_line_content": "        zskiplist *zsl = zs->zsl;",
          "new_line_content": "                                zzlLastInLexRange(key->value->ptr,zlrs);",
          "content_same": false
        },
        {
          "line": 1005,
          "old_api": null,
          "new_api": "lookupKeyWrite",
          "old_text": null,
          "new_text": "lookupKeyWrite(ctx->client->db,keyname)",
          "old_line_content": "        if (value == NULL) {",
          "new_line_content": "        value = lookupKeyWrite(ctx->client->db,keyname);",
          "content_same": false
        },
        {
          "line": 2542,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(name)",
          "old_line_content": "        }",
          "new_line_content": "            addReplyBulkCBuffer(c,name,sdslen(name));",
          "content_same": false
        },
        {
          "line": 1007,
          "old_api": null,
          "new_api": "lookupKeyRead",
          "old_text": null,
          "new_text": "lookupKeyRead(ctx->client->db,keyname)",
          "old_line_content": "        }",
          "new_line_content": "        value = lookupKeyRead(ctx->client->db,keyname);",
          "content_same": false
        },
        {
          "line": 2544,
          "old_api": null,
          "new_api": "addReplyLongLong",
          "old_text": null,
          "new_text": "addReplyLongLong(c,module->ver)",
          "old_line_content": "    } else {",
          "new_line_content": "            addReplyLongLong(c,module->ver);",
          "content_same": false
        },
        {
          "line": 1517,
          "old_api": null,
          "new_api": "zslLastInLexRange",
          "old_text": null,
          "new_text": "zslLastInLexRange(zsl,zlrs)",
          "old_line_content": "    }",
          "new_line_content": "                                zslLastInLexRange(zsl,zlrs);",
          "content_same": false
        },
        {
          "line": 2546,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "    }",
          "new_line_content": "        dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 1519,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Unsupported zset encoding\")",
          "old_line_content": "",
          "new_line_content": "        serverPanic(\"Unsupported zset encoding\");",
          "content_same": false
        },
        {
          "line": 2548,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.syntaxerr)",
          "old_line_content": "",
          "new_line_content": "        addReply(c,shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 2029,
          "old_api": null,
          "new_api": "RM_FreeCallReply_Rec",
          "old_text": null,
          "new_text": "RM_FreeCallReply_Rec(reply->val.array+j,1)",
          "old_line_content": "    }",
          "new_line_content": "                RM_FreeCallReply_Rec(reply->val.array+j,1);",
          "content_same": false
        },
        {
          "line": 1014,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(*kp))",
          "old_line_content": "    kp->key = keyname;",
          "new_line_content": "    kp = zmalloc(sizeof(*kp));",
          "content_same": false
        },
        {
          "line": 2030,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(reply->val.array)",
          "old_line_content": "",
          "new_line_content": "            zfree(reply->val.array);",
          "content_same": false
        },
        {
          "line": 2040,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(reply)",
          "old_line_content": "",
          "new_line_content": "        zfree(reply);",
          "content_same": false
        },
        {
          "line": 1018,
          "old_api": null,
          "new_api": "incrRefCount",
          "old_text": null,
          "new_text": "incrRefCount(keyname)",
          "old_line_content": "    kp->mode = mode;",
          "new_line_content": "    incrRefCount(keyname);",
          "content_same": false
        },
        {
          "line": 1022,
          "old_api": null,
          "new_api": "RM_ZsetRangeStop",
          "old_text": null,
          "new_text": "RM_ZsetRangeStop(kp)",
          "old_line_content": "}",
          "new_line_content": "    RM_ZsetRangeStop(kp);",
          "content_same": false
        },
        {
          "line": 1023,
          "old_api": null,
          "new_api": "autoMemoryAdd",
          "old_text": null,
          "new_text": "autoMemoryAdd(ctx,REDISMODULE_AM_KEY,kp)",
          "old_line_content": "",
          "new_line_content": "    autoMemoryAdd(ctx,REDISMODULE_AM_KEY,kp);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 1536,
          "old_api": "zsetInitLexRange",
          "new_api": null,
          "old_text": "zsetInitLexRange(key,min,max,1)",
          "new_text": null,
          "old_line_content": "    return zsetInitLexRange(key,min,max,1);",
          "new_line_content": " * The function does not take ownership of the objects, so they can be released",
          "content_same": false
        },
        {
          "line": 1027,
          "old_api": "signalModifiedKey",
          "new_api": null,
          "old_text": "signalModifiedKey(key->db,key->key)",
          "new_text": null,
          "old_line_content": "    if (key->mode & REDISMODULE_WRITE) signalModifiedKey(key->db,key->key);",
          "new_line_content": "/* Close a key handle. */",
          "content_same": false
        },
        {
          "line": 1029,
          "old_api": "RM_ZsetRangeStop",
          "new_api": null,
          "old_text": "RM_ZsetRangeStop(key)",
          "new_text": null,
          "old_line_content": "    RM_ZsetRangeStop(key);",
          "new_line_content": "    if (key == NULL) return;",
          "content_same": false
        },
        {
          "line": 1542,
          "old_api": "zsetInitLexRange",
          "new_api": null,
          "old_text": "zsetInitLexRange(key,min,max,0)",
          "new_text": null,
          "old_line_content": "    return zsetInitLexRange(key,min,max,0);",
          "new_line_content": "/* Exactly like RedisModule_ZsetFirstInLexRange() but the last element of",
          "content_same": false
        },
        {
          "line": 1031,
          "old_api": "autoMemoryFreed",
          "new_api": null,
          "old_text": "autoMemoryFreed(key->ctx,REDISMODULE_AM_KEY,key)",
          "new_text": null,
          "old_line_content": "    autoMemoryFreed(key->ctx,REDISMODULE_AM_KEY,key);",
          "new_line_content": "    /* TODO: if (key->iter) RM_KeyIteratorStop(kp); */",
          "content_same": false
        },
        {
          "line": 2056,
          "old_api": "moduleParseCallReply",
          "new_api": null,
          "old_text": "moduleParseCallReply(reply)",
          "new_text": null,
          "old_line_content": "    moduleParseCallReply(reply);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1555,
          "old_api": "ziplistGetObject",
          "new_api": null,
          "old_text": "ziplistGetObject(eptr)",
          "new_text": null,
          "old_line_content": "        sds ele = ziplistGetObject(eptr);",
          "new_line_content": "    if (key->value->encoding == OBJ_ENCODING_ZIPLIST) {",
          "content_same": false
        },
        {
          "line": 1557,
          "old_api": "ziplistNext",
          "new_api": null,
          "old_text": "ziplistNext(key->value->ptr,eptr)",
          "new_text": null,
          "old_line_content": "            sptr = ziplistNext(key->value->ptr,eptr);",
          "new_line_content": "        eptr = key->zcurrent;",
          "content_same": false
        },
        {
          "line": 2070,
          "old_api": "moduleParseCallReply",
          "new_api": null,
          "old_text": "moduleParseCallReply(reply)",
          "new_text": null,
          "old_line_content": "    moduleParseCallReply(reply);",
          "new_line_content": "/* Return the 'idx'-th nested call reply element of an array reply, or NULL",
          "content_same": false
        },
        {
          "line": 1564,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(ln->ele)",
          "new_text": null,
          "old_line_content": "        str = createStringObject(ln->ele,sdslen(ln->ele));",
          "new_line_content": "    } else if (key->value->encoding == OBJ_ENCODING_SKIPLIST) {",
          "content_same": false
        },
        {
          "line": 2078,
          "old_api": "moduleParseCallReply",
          "new_api": null,
          "old_text": "moduleParseCallReply(reply)",
          "new_text": null,
          "old_line_content": "    moduleParseCallReply(reply);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1566,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Unsupported zset encoding\")",
          "new_text": null,
          "old_line_content": "        serverPanic(\"Unsupported zset encoding\");",
          "new_line_content": "        if (score) *score = ln->score;",
          "content_same": false
        },
        {
          "line": 1568,
          "old_api": "autoMemoryAdd",
          "new_api": null,
          "old_text": "autoMemoryAdd(key->ctx,REDISMODULE_AM_STRING,str)",
          "new_text": null,
          "old_line_content": "    autoMemoryAdd(key->ctx,REDISMODULE_AM_STRING,str);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 1059,
          "old_api": "stringObjectLen",
          "new_api": null,
          "old_text": "stringObjectLen(key->value)",
          "new_text": null,
          "old_line_content": "    case OBJ_STRING: return stringObjectLen(key->value);",
          "new_line_content": "size_t RM_ValueLength(RedisModuleKey *key) {",
          "content_same": false
        },
        {
          "line": 1060,
          "old_api": "listTypeLength",
          "new_api": null,
          "old_text": "listTypeLength(key->value)",
          "new_text": null,
          "old_line_content": "    case OBJ_LIST: return listTypeLength(key->value);",
          "new_line_content": "    if (key == NULL || key->value == NULL) return 0;",
          "content_same": false
        },
        {
          "line": 2085,
          "old_api": "moduleParseCallReply",
          "new_api": null,
          "old_text": "moduleParseCallReply(reply)",
          "new_text": null,
          "old_line_content": "    moduleParseCallReply(reply);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1061,
          "old_api": "setTypeSize",
          "new_api": null,
          "old_text": "setTypeSize(key->value)",
          "new_text": null,
          "old_line_content": "    case OBJ_SET: return setTypeSize(key->value);",
          "new_line_content": "    switch(key->value->type) {",
          "content_same": false
        },
        {
          "line": 1582,
          "old_api": "ziplistNext",
          "new_api": null,
          "old_text": "ziplistNext(zl,eptr)",
          "new_text": null,
          "old_line_content": "        next = ziplistNext(zl,eptr); /* Skip element. */",
          "new_line_content": "        unsigned char *zl = key->value->ptr;",
          "content_same": false
        },
        {
          "line": 2095,
          "old_api": "moduleParseCallReply",
          "new_api": null,
          "old_text": "moduleParseCallReply(reply)",
          "new_text": null,
          "old_line_content": "    moduleParseCallReply(reply);",
          "new_line_content": "/* Return a new string object from a call reply of type string, error or",
          "content_same": false
        },
        {
          "line": 1583,
          "old_api": "ziplistNext",
          "new_api": null,
          "old_text": "ziplistNext(zl,next)",
          "new_text": null,
          "old_line_content": "        if (next) next = ziplistNext(zl,next); /* Skip score. */",
          "new_line_content": "        unsigned char *eptr = key->zcurrent;",
          "content_same": false
        },
        {
          "line": 2099,
          "old_api": "RM_CreateString",
          "new_api": null,
          "old_text": "RM_CreateString(reply->ctx,reply->val.str,reply->len)",
          "new_text": null,
          "old_line_content": "        return RM_CreateString(reply->ctx,reply->val.str,reply->len);",
          "new_line_content": "    switch(reply->type) {",
          "content_same": false
        },
        {
          "line": 1075,
          "old_api": "dbDelete",
          "new_api": null,
          "old_text": "dbDelete(key->db,key->key)",
          "new_text": null,
          "old_line_content": "        dbDelete(key->db,key->key);",
          "new_line_content": "int RM_DeleteKey(RedisModuleKey *key) {",
          "content_same": false
        },
        {
          "line": 2103,
          "old_api": "RM_CreateString",
          "new_api": null,
          "old_text": "RM_CreateString(reply->ctx,buf,len)",
          "new_text": null,
          "old_line_content": "        return RM_CreateString(reply->ctx,buf,len);",
          "new_line_content": "    case REDISMODULE_REPLY_INTEGER: {",
          "content_same": false
        },
        {
          "line": 1593,
          "old_api": "ziplistNext",
          "new_api": null,
          "old_text": "ziplistNext(zl,next)",
          "new_text": null,
          "old_line_content": "                next = ziplistNext(zl,next); /* Skip next element. */",
          "new_line_content": "                /* Fetch the next element score for the",
          "content_same": false
        },
        {
          "line": 1594,
          "old_api": "zzlGetScore",
          "new_api": null,
          "old_text": "zzlGetScore(next)",
          "new_text": null,
          "old_line_content": "                double score = zzlGetScore(next); /* Obtain the next score. */",
          "new_line_content": "                 * range check. */",
          "content_same": false
        },
        {
          "line": 1595,
          "old_api": "zslValueLteMax",
          "new_api": null,
          "old_text": "zslValueLteMax(score,&key->zrs)",
          "new_text": null,
          "old_line_content": "                if (!zslValueLteMax(score,&key->zrs)) {",
          "new_line_content": "                unsigned char *saved_next = next;",
          "content_same": false
        },
        {
          "line": 1085,
          "old_api": "getExpire",
          "new_api": null,
          "old_text": "getExpire(key->db,key->key)",
          "new_text": null,
          "old_line_content": "    mstime_t expire = getExpire(key->db,key->key);",
          "new_line_content": " * If no TTL is associated with the key or if the key is empty,",
          "content_same": false
        },
        {
          "line": 1087,
          "old_api": "mstime",
          "new_api": null,
          "old_text": "mstime()",
          "new_text": null,
          "old_line_content": "    expire -= mstime();",
          "new_line_content": "mstime_t RM_GetExpire(RedisModuleKey *key) {",
          "content_same": false
        },
        {
          "line": 1601,
          "old_api": "zzlLexValueLteMax",
          "new_api": null,
          "old_text": "zzlLexValueLteMax(next,&key->zlrs)",
          "new_text": null,
          "old_line_content": "                if (!zzlLexValueLteMax(next,&key->zlrs)) {",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 1104,
          "old_api": "mstime",
          "new_api": null,
          "old_text": "mstime()",
          "new_text": null,
          "old_line_content": "        expire += mstime();",
          "new_line_content": "    if (!(key->mode & REDISMODULE_WRITE) || key->value == NULL)",
          "content_same": false
        },
        {
          "line": 2129,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(fmt)",
          "new_text": null,
          "old_line_content": "    argv_size = strlen(fmt)+1; /* +1 because of the command name. */",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2130,
          "old_api": "zrealloc",
          "new_api": null,
          "old_text": "zrealloc(argv,sizeof(robj*)*argv_size)",
          "new_text": null,
          "old_line_content": "    argv = zrealloc(argv,sizeof(robj*)*argv_size);",
          "new_line_content": "    /* As a first guess to avoid useless reallocations, size argv to",
          "content_same": false
        },
        {
          "line": 1105,
          "old_api": "setExpire",
          "new_api": null,
          "old_text": "setExpire(key->db,key->key,expire)",
          "new_text": null,
          "old_line_content": "        setExpire(key->db,key->key,expire);",
          "new_line_content": "        return REDISMODULE_ERR;",
          "content_same": false
        },
        {
          "line": 1617,
          "old_api": "zslValueLteMax",
          "new_api": null,
          "old_text": "zslValueLteMax(ln->score,&key->zrs)",
          "new_text": null,
          "old_line_content": "                !zslValueLteMax(ln->score,&key->zrs))",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 1622,
          "old_api": "zslLexValueLteMax",
          "new_api": null,
          "old_text": "zslLexValueLteMax(ln->ele,&key->zlrs)",
          "new_text": null,
          "old_line_content": "                if (!zslLexValueLteMax(ln->ele,&key->zlrs)) {",
          "new_line_content": "                key->zer = 1;",
          "content_same": false
        },
        {
          "line": 2140,
          "old_api": "va_arg",
          "new_api": null,
          "old_text": "va_arg(ap,char*)",
          "new_text": null,
          "old_line_content": "            char *cstr = va_arg(ap,char*);",
          "new_line_content": "    const char *p = fmt;",
          "content_same": false
        },
        {
          "line": 2141,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(cstr)",
          "new_text": null,
          "old_line_content": "            argv[argc++] = createStringObject(cstr,strlen(cstr));",
          "new_line_content": "    while(*p) {",
          "content_same": false
        },
        {
          "line": 606,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(ptr)",
          "new_text": null,
          "old_line_content": "        case REDISMODULE_AM_STRING: decrRefCount(ptr); break;",
          "new_line_content": "    for (j = 0; j < ctx->amqueue_used; j++) {",
          "content_same": false
        },
        {
          "line": 607,
          "old_api": "RM_FreeCallReply",
          "new_api": null,
          "old_text": "RM_FreeCallReply(ptr)",
          "new_text": null,
          "old_line_content": "        case REDISMODULE_AM_REPLY: RM_FreeCallReply(ptr); break;",
          "new_line_content": "        void *ptr = ctx->amqueue[j].ptr;",
          "content_same": false
        },
        {
          "line": 608,
          "old_api": "RM_CloseKey",
          "new_api": null,
          "old_text": "RM_CloseKey(ptr)",
          "new_text": null,
          "old_line_content": "        case REDISMODULE_AM_KEY: RM_CloseKey(ptr); break;",
          "new_line_content": "        switch(ctx->amqueue[j].type) {",
          "content_same": false
        },
        {
          "line": 2145,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(obj)",
          "new_text": null,
          "old_line_content": "            incrRefCount(obj);",
          "new_line_content": "        } else if (*p == 's') {",
          "content_same": false
        },
        {
          "line": 1122,
          "old_api": "RM_DeleteKey",
          "new_api": null,
          "old_text": "RM_DeleteKey(key)",
          "new_text": null,
          "old_line_content": "    RM_DeleteKey(key);",
          "new_line_content": " * writing or there is an active iterator, REDISMODULE_ERR is returned. */",
          "content_same": false
        },
        {
          "line": 2147,
          "old_api": "va_arg",
          "new_api": null,
          "old_text": "va_arg(ap,char*)",
          "new_text": null,
          "old_line_content": "            char *buf = va_arg(ap,char*);",
          "new_line_content": "            argv[argc++] = obj;",
          "content_same": false
        },
        {
          "line": 612,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(ctx->amqueue)",
          "new_text": null,
          "old_line_content": "    zfree(ctx->amqueue);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2149,
          "old_api": "createStringObject",
          "new_api": null,
          "old_text": "createStringObject(buf,len)",
          "new_text": null,
          "old_line_content": "            argv[argc++] = createStringObject(buf,len);",
          "new_line_content": "        } else if (*p == 'b') {",
          "content_same": false
        },
        {
          "line": 1123,
          "old_api": "setKey",
          "new_api": null,
          "old_text": "setKey(key->db,key->key,str)",
          "new_text": null,
          "old_line_content": "    setKey(key->db,key->key,str);",
          "new_line_content": "int RM_StringSet(RedisModuleKey *key, RedisModuleString *str) {",
          "content_same": false
        },
        {
          "line": 1631,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Unsupported zset encoding\")",
          "new_text": null,
          "old_line_content": "        serverPanic(\"Unsupported zset encoding\");",
          "new_line_content": "            return 1;",
          "content_same": false
        },
        {
          "line": 2156,
          "old_api": "va_arg",
          "new_api": null,
          "old_text": "va_arg(ap, size_t)",
          "new_text": null,
          "old_line_content": "             size_t vlen = va_arg(ap, size_t);",
          "new_line_content": "        } else if (*p == 'v') {",
          "content_same": false
        },
        {
          "line": 1645,
          "old_api": "ziplistPrev",
          "new_api": null,
          "old_text": "ziplistPrev(zl,eptr)",
          "new_text": null,
          "old_line_content": "        prev = ziplistPrev(zl,eptr); /* Go back to previous score. */",
          "new_line_content": "        unsigned char *zl = key->value->ptr;",
          "content_same": false
        },
        {
          "line": 1646,
          "old_api": "ziplistPrev",
          "new_api": null,
          "old_text": "ziplistPrev(zl,prev)",
          "new_text": null,
          "old_line_content": "        if (prev) prev = ziplistPrev(zl,prev); /* Back to previous ele. */",
          "new_line_content": "        unsigned char *eptr = key->zcurrent;",
          "content_same": false
        },
        {
          "line": 2162,
          "old_api": "zrealloc",
          "new_api": null,
          "old_text": "zrealloc(argv,sizeof(robj*)*argv_size)",
          "new_text": null,
          "old_line_content": "             argv = zrealloc(argv,sizeof(robj*)*argv_size);",
          "new_line_content": "              * We resize by vector_len-1 elements, because we held",
          "content_same": false
        },
        {
          "line": 629,
          "old_api": "createStringObject",
          "new_api": null,
          "old_text": "createStringObject(ptr,len)",
          "new_text": null,
          "old_line_content": "    RedisModuleString *o = createStringObject(ptr,len);",
          "new_line_content": " * at `ptr`. No reference is retained to the passed buffer. */",
          "content_same": false
        },
        {
          "line": 2166,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(v[i])",
          "new_text": null,
          "old_line_content": "                 incrRefCount(v[i]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 630,
          "old_api": "autoMemoryAdd",
          "new_api": null,
          "old_text": "autoMemoryAdd(ctx,REDISMODULE_AM_STRING,o)",
          "new_text": null,
          "old_line_content": "    autoMemoryAdd(ctx,REDISMODULE_AM_STRING,o);",
          "new_line_content": "RedisModuleString *RM_CreateString(RedisModuleCtx *ctx, const char *ptr, size_t len)",
          "content_same": false
        },
        {
          "line": 1656,
          "old_api": "ziplistNext",
          "new_api": null,
          "old_text": "ziplistNext(zl,prev)",
          "new_text": null,
          "old_line_content": "                prev = ziplistNext(zl,prev); /* Skip element to get the score.*/",
          "new_line_content": "                /* Fetch the previous element score for the",
          "content_same": false
        },
        {
          "line": 1657,
          "old_api": "zzlGetScore",
          "new_api": null,
          "old_text": "zzlGetScore(prev)",
          "new_text": null,
          "old_line_content": "                double score = zzlGetScore(prev); /* Obtain the prev score. */",
          "new_line_content": "                 * range check. */",
          "content_same": false
        },
        {
          "line": 1658,
          "old_api": "zslValueGteMin",
          "new_api": null,
          "old_text": "zslValueGteMin(score,&key->zrs)",
          "new_text": null,
          "old_line_content": "                if (!zslValueGteMin(score,&key->zrs)) {",
          "new_line_content": "                unsigned char *saved_prev = prev;",
          "content_same": false
        },
        {
          "line": 1664,
          "old_api": "zzlLexValueGteMin",
          "new_api": null,
          "old_text": "zzlLexValueGteMin(prev,&key->zlrs)",
          "new_text": null,
          "old_line_content": "                if (!zzlLexValueGteMin(prev,&key->zlrs)) {",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 641,
          "old_api": "ll2string",
          "new_api": null,
          "old_text": "ll2string(buf,sizeof(buf),ll)",
          "new_text": null,
          "old_line_content": "    size_t len = ll2string(buf,sizeof(buf),ll);",
          "new_line_content": " * enabling automatic memory management. */",
          "content_same": false
        },
        {
          "line": 642,
          "old_api": "RM_CreateString",
          "new_api": null,
          "old_text": "RM_CreateString(ctx,buf,len)",
          "new_text": null,
          "old_line_content": "    return RM_CreateString(ctx,buf,len);",
          "new_line_content": "RedisModuleString *RM_CreateStringFromLongLong(RedisModuleCtx *ctx, long long ll) {",
          "content_same": false
        },
        {
          "line": 2181,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(argv[j])",
          "new_text": null,
          "old_line_content": "        decrRefCount(argv[j]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2182,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(argv)",
          "new_text": null,
          "old_line_content": "    zfree(argv);",
          "new_line_content": "fmterr:",
          "content_same": false
        },
        {
          "line": 652,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(str)",
          "new_text": null,
          "old_line_content": "    decrRefCount(str);",
          "new_line_content": " * is enabled. In that case the string will be released ASAP and removed",
          "content_same": false
        },
        {
          "line": 653,
          "old_api": "autoMemoryFreed",
          "new_api": null,
          "old_text": "autoMemoryFreed(ctx,REDISMODULE_AM_STRING,str)",
          "new_text": null,
          "old_line_content": "    autoMemoryFreed(ctx,REDISMODULE_AM_STRING,str);",
          "new_line_content": " * from the pool of string to release at the end. */",
          "content_same": false
        },
        {
          "line": 1680,
          "old_api": "zslValueGteMin",
          "new_api": null,
          "old_text": "zslValueGteMin(ln->score,&key->zrs)",
          "new_text": null,
          "old_line_content": "                !zslValueGteMin(ln->score,&key->zrs))",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 660,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(str->ptr)",
          "new_text": null,
          "old_line_content": "    if (len) *len = sdslen(str->ptr);",
          "new_line_content": " * and length of the string. The returned pointer and length should only",
          "content_same": false
        },
        {
          "line": 1173,
          "old_api": "dbUnshareStringValue",
          "new_api": null,
          "old_text": "dbUnshareStringValue(key->db, key->key, key->value)",
          "new_text": null,
          "old_line_content": "        key->value = dbUnshareStringValue(key->db, key->key, key->value);",
          "new_line_content": "    /* For write access, and even for read access if the object is encoded,",
          "content_same": false
        },
        {
          "line": 1685,
          "old_api": "zslLexValueGteMin",
          "new_api": null,
          "old_text": "zslLexValueGteMin(prev->ele,&key->zlrs)",
          "new_text": null,
          "old_line_content": "                if (!zslLexValueGteMin(prev->ele,&key->zlrs)) {",
          "new_line_content": "                key->zer = 1;",
          "content_same": false
        },
        {
          "line": 1175,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(key->value->ptr)",
          "new_text": null,
          "old_line_content": "    *len = sdslen(key->value->ptr);",
          "new_line_content": "    if ((mode & REDISMODULE_WRITE) || key->value->encoding != OBJ_ENCODING_RAW)",
          "content_same": false
        },
        {
          "line": 2201,
          "old_api": "lookupCommandByCString",
          "new_api": null,
          "old_text": "lookupCommandByCString((char*)cmdname)",
          "new_text": null,
          "old_line_content": "    cmd = lookupCommandByCString((char*)cmdname);",
          "new_line_content": "    RedisModuleCallReply *reply = NULL;",
          "content_same": false
        },
        {
          "line": 669,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(str->ptr)",
          "new_text": null,
          "old_line_content": "    return string2ll(str->ptr,sdslen(str->ptr),ll) ? REDISMODULE_OK :",
          "new_line_content": " * as a valid, strict long long (no spaces before/after), REDISMODULE_ERR",
          "content_same": false
        },
        {
          "line": 1694,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Unsupported zset encoding\")",
          "new_text": null,
          "old_line_content": "        serverPanic(\"Unsupported zset encoding\");",
          "new_line_content": "            return 1;",
          "content_same": false
        },
        {
          "line": 2208,
          "old_api": "va_start",
          "new_api": null,
          "old_text": "va_start(ap, fmt)",
          "new_text": null,
          "old_line_content": "    va_start(ap, fmt);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2209,
          "old_api": "createClient",
          "new_api": null,
          "old_text": "createClient(-1)",
          "new_text": null,
          "old_line_content": "    c = createClient(-1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2210,
          "old_api": "moduleCreateArgvFromUserFormat",
          "new_api": null,
          "old_text": "moduleCreateArgvFromUserFormat(cmdname,fmt,&argc,&flags,ap)",
          "new_text": null,
          "old_line_content": "    argv = moduleCreateArgvFromUserFormat(cmdname,fmt,&argc,&flags,ap);",
          "new_line_content": "    /* Create the client and dispatch the command. */",
          "content_same": false
        },
        {
          "line": 677,
          "old_api": "getDoubleFromObject",
          "new_api": null,
          "old_text": "getDoubleFromObject(str,d)",
          "new_text": null,
          "old_line_content": "    int retval = getDoubleFromObject(str,d);",
          "new_line_content": " * Returns REDISMODULE_OK on success or REDISMODULE_ERR if the string is",
          "content_same": false
        },
        {
          "line": 1202,
          "old_api": "sdsnewlen",
          "new_api": null,
          "old_text": "sdsnewlen(NULL, newlen)",
          "new_text": null,
          "old_line_content": "        robj *o = createObject(OBJ_STRING,sdsnewlen(NULL, newlen));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1203,
          "old_api": "setKey",
          "new_api": null,
          "old_text": "setKey(key->db,key->key,o)",
          "new_text": null,
          "old_line_content": "        setKey(key->db,key->key,o);",
          "new_line_content": "    if (key->value == NULL) {",
          "content_same": false
        },
        {
          "line": 1209,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(key->value->ptr)",
          "new_text": null,
          "old_line_content": "        size_t curlen = sdslen(key->value->ptr);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 699,
          "old_api": "addReplyErrorFormat",
          "new_api": null,
          "old_text": "addReplyErrorFormat(ctx->client,\n        \"wrong number of arguments for '%s' command\",\n        (char*)ctx->client->argv[0]->ptr)",
          "new_text": null,
          "old_line_content": "    addReplyErrorFormat(ctx->client,",
          "new_line_content": " *  if (argc != 3) return RedisModule_WrongArity(ctx);",
          "content_same": false
        },
        {
          "line": 2236,
          "old_api": "getNodeByQuery",
          "new_api": null,
          "old_text": "getNodeByQuery(c,c->cmd,c->argv,c->argc,NULL,NULL)",
          "new_text": null,
          "old_line_content": "        if (getNodeByQuery(c,c->cmd,c->argv,c->argc,NULL,NULL) !=",
          "new_line_content": "        /* Duplicate relevant flags in the module client. */",
          "content_same": false
        },
        {
          "line": 1213,
          "old_api": "sdsrange",
          "new_api": null,
          "old_text": "sdsrange(key->value->ptr,0,newlen-1)",
          "new_text": null,
          "old_line_content": "            sdsrange(key->value->ptr,0,newlen-1);",
          "new_line_content": "        if (newlen > curlen) {",
          "content_same": false
        },
        {
          "line": 1215,
          "old_api": "sdsavail",
          "new_api": null,
          "old_text": "sdsavail(key->value->ptr)",
          "new_text": null,
          "old_line_content": "            if (sdslen(key->value->ptr) < sdsavail(key->value->ptr))",
          "new_line_content": "        } else if (newlen < curlen) {",
          "content_same": false
        },
        {
          "line": 708,
          "old_api": "addReplyLongLong",
          "new_api": null,
          "old_text": "addReplyLongLong(ctx->client,ll)",
          "new_text": null,
          "old_line_content": "    addReplyLongLong(ctx->client,ll);",
          "new_line_content": "/* Send an integer reply to the client, with the specified long long value.",
          "content_same": false
        },
        {
          "line": 2247,
          "old_api": "moduleReplicateMultiIfNeeded",
          "new_api": null,
          "old_text": "moduleReplicateMultiIfNeeded(ctx)",
          "new_text": null,
          "old_line_content": "    if (replicate) moduleReplicateMultiIfNeeded(ctx);",
          "new_line_content": "    /* If we are using single commands replication, we need to wrap what",
          "content_same": false
        },
        {
          "line": 716,
          "old_api": "sdsnewlen",
          "new_api": null,
          "old_text": "sdsnewlen(prefix,1)",
          "new_text": null,
          "old_line_content": "    sds strmsg = sdsnewlen(prefix,1);",
          "new_line_content": " * ReplyWithSimpleString() and ReplyWithError().",
          "content_same": false
        },
        {
          "line": 717,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(strmsg,msg)",
          "new_text": null,
          "old_line_content": "    strmsg = sdscat(strmsg,msg);",
          "new_line_content": " * The function always returns REDISMODULE_OK. */",
          "content_same": false
        },
        {
          "line": 718,
          "old_api": "sdscatlen",
          "new_api": null,
          "old_text": "sdscatlen(strmsg,\"\\r\\n\",2)",
          "new_text": null,
          "old_line_content": "    strmsg = sdscatlen(strmsg,\"\\r\\n\",2);",
          "new_line_content": "int replyWithStatus(RedisModuleCtx *ctx, const char *msg, char *prefix) {",
          "content_same": false
        },
        {
          "line": 2255,
          "old_api": "call",
          "new_api": null,
          "old_text": "call(c,call_flags)",
          "new_text": null,
          "old_line_content": "    call(c,call_flags);",
          "new_line_content": "        call_flags |= CMD_CALL_PROPAGATE_AOF;",
          "content_same": false
        },
        {
          "line": 1233,
          "old_api": "moduleCreateEmptyKey",
          "new_api": null,
          "old_text": "moduleCreateEmptyKey(key,REDISMODULE_KEYTYPE_LIST)",
          "new_text": null,
          "old_line_content": "    if (key->value == NULL) moduleCreateEmptyKey(key,REDISMODULE_KEYTYPE_LIST);",
          "new_line_content": "int RM_ListPush(RedisModuleKey *key, int where, RedisModuleString *ele) {",
          "content_same": false
        },
        {
          "line": 1234,
          "old_api": "listTypePush",
          "new_api": null,
          "old_text": "listTypePush(key->value, ele,\n        (where == REDISMODULE_LIST_HEAD) ? QUICKLIST_HEAD : QUICKLIST_TAIL)",
          "new_text": null,
          "old_line_content": "    listTypePush(key->value, ele,",
          "new_line_content": "    if (!(key->mode & REDISMODULE_WRITE)) return REDISMODULE_ERR;",
          "content_same": false
        },
        {
          "line": 2260,
          "old_api": "sdsnewlen",
          "new_api": null,
          "old_text": "sdsnewlen(c->buf,c->bufpos)",
          "new_text": null,
          "old_line_content": "    sds proto = sdsnewlen(c->buf,c->bufpos);",
          "new_line_content": "    /* Convert the result of the Redis command into a suitable Lua type.",
          "content_same": false
        },
        {
          "line": 2262,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(c->reply)",
          "new_text": null,
          "old_line_content": "    while(listLength(c->reply)) {",
          "new_line_content": "     * output buffers. */",
          "content_same": false
        },
        {
          "line": 1756,
          "old_api": "moduleCreateEmptyKey",
          "new_api": null,
          "old_text": "moduleCreateEmptyKey(key,REDISMODULE_KEYTYPE_HASH)",
          "new_text": null,
          "old_line_content": "    if (key->value == NULL) moduleCreateEmptyKey(key,REDISMODULE_KEYTYPE_HASH);",
          "new_line_content": "    va_list ap;",
          "content_same": false
        },
        {
          "line": 738,
          "old_api": "replyWithStatus",
          "new_api": null,
          "old_text": "replyWithStatus(ctx,err,\"-\")",
          "new_text": null,
          "old_line_content": "    return replyWithStatus(ctx,err,\"-\");",
          "new_line_content": " * The function always returns REDISMODULE_OK.",
          "content_same": false
        },
        {
          "line": 1250,
          "old_api": "listTypePop",
          "new_api": null,
          "old_text": "listTypePop(key->value,\n        (where == REDISMODULE_LIST_HEAD) ? QUICKLIST_HEAD : QUICKLIST_TAIL)",
          "new_text": null,
          "old_line_content": "    robj *ele = listTypePop(key->value,",
          "new_line_content": "    if (!(key->mode & REDISMODULE_WRITE) ||",
          "content_same": false
        },
        {
          "line": 1252,
          "old_api": "getDecodedObject",
          "new_api": null,
          "old_text": "getDecodedObject(ele)",
          "new_text": null,
          "old_line_content": "    robj *decoded = getDecodedObject(ele);",
          "new_line_content": "        key->value->type != OBJ_LIST) return NULL;",
          "content_same": false
        },
        {
          "line": 1764,
          "old_api": "va_arg",
          "new_api": null,
          "old_text": "va_arg(ap,char*)",
          "new_text": null,
          "old_line_content": "            char *cfield = va_arg(ap,char*);",
          "new_line_content": "        RedisModuleString *field, *value;",
          "content_same": false
        },
        {
          "line": 1254,
          "old_api": "moduleDelKeyIfEmpty",
          "new_api": null,
          "old_text": "moduleDelKeyIfEmpty(key)",
          "new_text": null,
          "old_line_content": "    moduleDelKeyIfEmpty(key);",
          "new_line_content": "        (where == REDISMODULE_LIST_HEAD) ? QUICKLIST_HEAD : QUICKLIST_TAIL);",
          "content_same": false
        },
        {
          "line": 2279,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(reply->proto)",
          "new_text": null,
          "old_line_content": "    if (reply->proto) *len = sdslen(reply->proto);",
          "new_line_content": "/* Return a pointer, and a length, to the protocol returned by the command",
          "content_same": false
        },
        {
          "line": 1766,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(cfield)",
          "new_text": null,
          "old_line_content": "            field = createRawStringObject(cfield,strlen(cfield));",
          "new_line_content": "        if (flags & REDISMODULE_HASH_CFIELDS) {",
          "content_same": false
        },
        {
          "line": 1768,
          "old_api": "va_arg",
          "new_api": null,
          "old_text": "va_arg(ap,RedisModuleString*)",
          "new_text": null,
          "old_line_content": "            field = va_arg(ap,RedisModuleString*);",
          "new_line_content": "            if (cfield == NULL) break;",
          "content_same": false
        },
        {
          "line": 747,
          "old_api": "replyWithStatus",
          "new_api": null,
          "old_text": "replyWithStatus(ctx,msg,\"+\")",
          "new_text": null,
          "old_line_content": "    return replyWithStatus(ctx,msg,\"+\");",
          "new_line_content": " *",
          "content_same": false
        },
        {
          "line": 1775,
          "old_api": "hashTypeExists",
          "new_api": null,
          "old_text": "hashTypeExists(key->value, field->ptr)",
          "new_text": null,
          "old_line_content": "            int exists = hashTypeExists(key->value, field->ptr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2291,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen((char*)key)",
          "new_text": null,
          "old_line_content": "    return dictGenHashFunction((unsigned char*)key, strlen((char*)key));",
          "new_line_content": " * this gets queries from modules. */",
          "content_same": false
        },
        {
          "line": 1779,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(field)",
          "new_text": null,
          "old_line_content": "                if (flags & REDISMODULE_HASH_CFIELDS) decrRefCount(field);",
          "new_line_content": "            if (((flags & REDISMODULE_HASH_XX) && !exists) ||",
          "content_same": false
        },
        {
          "line": 2295,
          "old_api": "DICT_NOTUSED",
          "new_api": null,
          "old_text": "DICT_NOTUSED(privdata)",
          "new_text": null,
          "old_line_content": "    DICT_NOTUSED(privdata);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2296,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(key1,key2)",
          "new_text": null,
          "old_line_content": "    return strcmp(key1,key2) == 0;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1786,
          "old_api": "hashTypeDelete",
          "new_api": null,
          "old_text": "hashTypeDelete(key->value, field->ptr)",
          "new_text": null,
          "old_line_content": "            updated += hashTypeDelete(key->value, field->ptr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 763,
          "old_api": "zrealloc",
          "new_api": null,
          "old_text": "zrealloc(ctx->postponed_arrays,sizeof(void*)*\n                (ctx->postponed_arrays_count+1))",
          "new_text": null,
          "old_line_content": "        ctx->postponed_arrays = zrealloc(ctx->postponed_arrays,sizeof(void*)*",
          "new_line_content": " * The function always returns REDISMODULE_OK. */",
          "content_same": false
        },
        {
          "line": 1787,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(field)",
          "new_text": null,
          "old_line_content": "            if (flags & REDISMODULE_HASH_CFIELDS) decrRefCount(field);",
          "new_line_content": "        /* Handle deletion if value is REDISMODULE_HASH_DELETE. */",
          "content_same": false
        },
        {
          "line": 2309,
          "old_api": "dictAdd",
          "new_api": null,
          "old_text": "dictAdd(server.moduleapi, (char*)funcname, funcptr)",
          "new_text": null,
          "old_line_content": "    return dictAdd(server.moduleapi, (char*)funcname, funcptr);",
          "new_line_content": "};",
          "content_same": false
        },
        {
          "line": 1797,
          "old_api": "hashTypeSet",
          "new_api": null,
          "old_text": "hashTypeSet(key->value, field->ptr, value->ptr, low_flags)",
          "new_text": null,
          "old_line_content": "        updated += hashTypeSet(key->value, field->ptr, value->ptr, low_flags);",
          "new_line_content": "         * to avoid a useless copy. */",
          "content_same": false
        },
        {
          "line": 1803,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(field)",
          "new_text": null,
          "old_line_content": "           decrRefCount(field);",
          "new_line_content": "         * however we still have to release the 'field' object shell. */",
          "content_same": false
        },
        {
          "line": 2317,
          "old_api": "dictCreate",
          "new_api": null,
          "old_text": "dictCreate(&moduleAPIDictType,NULL)",
          "new_text": null,
          "old_line_content": "    server.moduleapi = dictCreate(&moduleAPIDictType,NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2318,
          "old_api": "REGISTER_API",
          "new_api": null,
          "old_text": "REGISTER_API(CreateCommand)",
          "new_text": null,
          "old_line_content": "    REGISTER_API(CreateCommand);",
          "new_line_content": "/* Register all the APIs we export. */",
          "content_same": false
        },
        {
          "line": 2319,
          "old_api": "REGISTER_API",
          "new_api": null,
          "old_text": "REGISTER_API(SetModuleAttribs)",
          "new_text": null,
          "old_line_content": "    REGISTER_API(SetModuleAttribs);",
          "new_line_content": "void moduleRegisterCoreAPI(void) {",
          "content_same": false
        },
        {
          "line": 1807,
          "old_api": "moduleDelKeyIfEmpty",
          "new_api": null,
          "old_text": "moduleDelKeyIfEmpty(key)",
          "new_text": null,
          "old_line_content": "    moduleDelKeyIfEmpty(key);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1313,
          "old_api": "moduleCreateEmptyKey",
          "new_api": null,
          "old_text": "moduleCreateEmptyKey(key,REDISMODULE_KEYTYPE_ZSET)",
          "new_text": null,
          "old_line_content": "    if (key->value == NULL) moduleCreateEmptyKey(key,REDISMODULE_KEYTYPE_ZSET);",
          "new_line_content": "    int flags = 0;",
          "content_same": false
        },
        {
          "line": 802,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\n            \"API misuse detected in module %s: \"\n            \"RedisModule_ReplySetArrayLength() called without previous \"\n            \"RedisModule_ReplyWithArray(ctx,REDISMODULE_POSTPONED_ARRAY_LEN) \"\n            \"call.\", ctx->module->name)",
          "new_text": null,
          "old_line_content": "        serverLog(LL_WARNING,",
          "new_line_content": " */",
          "content_same": false
        },
        {
          "line": 1314,
          "old_api": "RM_ZsetAddFlagsToCoreFlags",
          "new_api": null,
          "old_text": "RM_ZsetAddFlagsToCoreFlags(*flagsptr)",
          "new_text": null,
          "old_line_content": "    if (flagsptr) flags = RM_ZsetAddFlagsToCoreFlags(*flagsptr);",
          "new_line_content": "    if (!(key->mode & REDISMODULE_WRITE)) return REDISMODULE_ERR;",
          "content_same": false
        },
        {
          "line": 1315,
          "old_api": "zsetAdd",
          "new_api": null,
          "old_text": "zsetAdd(key->value,score,ele->ptr,&flags,NULL)",
          "new_text": null,
          "old_line_content": "    if (zsetAdd(key->value,score,ele->ptr,&flags,NULL) == 0) {",
          "new_line_content": "    if (key->value && key->value->type != OBJ_ZSET) return REDISMODULE_ERR;",
          "content_same": false
        },
        {
          "line": 1319,
          "old_api": "RM_ZsetAddFlagsFromCoreFlags",
          "new_api": null,
          "old_text": "RM_ZsetAddFlagsFromCoreFlags(flags)",
          "new_text": null,
          "old_line_content": "    if (flagsptr) *flagsptr = RM_ZsetAddFlagsFromCoreFlags(flags);",
          "new_line_content": "        if (flagsptr) *flagsptr = 0;",
          "content_same": false
        },
        {
          "line": 810,
          "old_api": "setDeferredMultiBulkLength",
          "new_api": null,
          "old_text": "setDeferredMultiBulkLength(ctx->client,\n            ctx->postponed_arrays[ctx->postponed_arrays_count],\n            len)",
          "new_text": null,
          "old_line_content": "    setDeferredMultiBulkLength(ctx->client,",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 814,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(ctx->postponed_arrays)",
          "new_text": null,
          "old_line_content": "        zfree(ctx->postponed_arrays);",
          "new_line_content": "            ctx->postponed_arrays[ctx->postponed_arrays_count],",
          "content_same": false
        },
        {
          "line": 823,
          "old_api": "addReplyBulkCBuffer",
          "new_api": null,
          "old_text": "addReplyBulkCBuffer(ctx->client,(char*)buf,len)",
          "new_text": null,
          "old_line_content": "    addReplyBulkCBuffer(ctx->client,(char*)buf,len);",
          "new_line_content": " *",
          "content_same": false
        },
        {
          "line": 1340,
          "old_api": "moduleCreateEmptyKey",
          "new_api": null,
          "old_text": "moduleCreateEmptyKey(key,REDISMODULE_KEYTYPE_ZSET)",
          "new_text": null,
          "old_line_content": "    if (key->value == NULL) moduleCreateEmptyKey(key,REDISMODULE_KEYTYPE_ZSET);",
          "new_line_content": "    int flags = 0;",
          "content_same": false
        },
        {
          "line": 1341,
          "old_api": "RM_ZsetAddFlagsToCoreFlags",
          "new_api": null,
          "old_text": "RM_ZsetAddFlagsToCoreFlags(*flagsptr)",
          "new_text": null,
          "old_line_content": "    if (flagsptr) flags = RM_ZsetAddFlagsToCoreFlags(*flagsptr);",
          "new_line_content": "    if (!(key->mode & REDISMODULE_WRITE)) return REDISMODULE_ERR;",
          "content_same": false
        },
        {
          "line": 831,
          "old_api": "addReplyBulk",
          "new_api": null,
          "old_text": "addReplyBulk(ctx->client,str)",
          "new_text": null,
          "old_line_content": "    addReplyBulk(ctx->client,str);",
          "new_line_content": " *",
          "content_same": false
        },
        {
          "line": 1856,
          "old_api": "va_start",
          "new_api": null,
          "old_text": "va_start(ap, flags)",
          "new_text": null,
          "old_line_content": "    va_start(ap, flags);",
          "new_line_content": "    va_list ap;",
          "content_same": false
        },
        {
          "line": 1862,
          "old_api": "va_arg",
          "new_api": null,
          "old_text": "va_arg(ap,char*)",
          "new_text": null,
          "old_line_content": "            char *cfield = va_arg(ap,char*);",
          "new_line_content": "        int *existsptr;",
          "content_same": false
        },
        {
          "line": 840,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(ctx->client,shared.nullbulk)",
          "new_text": null,
          "old_line_content": "    addReply(ctx->client,shared.nullbulk);",
          "new_line_content": " *",
          "content_same": false
        },
        {
          "line": 1352,
          "old_api": "RM_ZsetAddFlagsFromCoreFlags",
          "new_api": null,
          "old_text": "RM_ZsetAddFlagsFromCoreFlags(flags)",
          "new_text": null,
          "old_line_content": "    if (flagsptr) *flagsptr = RM_ZsetAddFlagsFromCoreFlags(flags);",
          "new_line_content": "        *flagsptr = 0;",
          "content_same": false
        },
        {
          "line": 1864,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(cfield)",
          "new_text": null,
          "old_line_content": "            field = createRawStringObject(cfield,strlen(cfield));",
          "new_line_content": "        if (flags & REDISMODULE_HASH_CFIELDS) {",
          "content_same": false
        },
        {
          "line": 1866,
          "old_api": "va_arg",
          "new_api": null,
          "old_text": "va_arg(ap,RedisModuleString*)",
          "new_text": null,
          "old_line_content": "            field = va_arg(ap,RedisModuleString*);",
          "new_line_content": "            if (cfield == NULL) break;",
          "content_same": false
        },
        {
          "line": 1872,
          "old_api": "va_arg",
          "new_api": null,
          "old_text": "va_arg(ap,int*)",
          "new_text": null,
          "old_line_content": "            existsptr = va_arg(ap,int*);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2386,
          "old_api": "listCreate",
          "new_api": null,
          "old_text": "listCreate()",
          "new_text": null,
          "old_line_content": "    server.loadmodule_queue = listCreate();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2387,
          "old_api": "dictCreate",
          "new_api": null,
          "old_text": "dictCreate(&modulesDictType,NULL)",
          "new_text": null,
          "old_line_content": "    modules = dictCreate(&modulesDictType,NULL);",
          "new_line_content": "/* Global initialization at Redis startup. */",
          "content_same": false
        },
        {
          "line": 2388,
          "old_api": "moduleRegisterCoreAPI",
          "new_api": null,
          "old_text": "moduleRegisterCoreAPI()",
          "new_text": null,
          "old_line_content": "    moduleRegisterCoreAPI();",
          "new_line_content": "void moduleInitModulesSystem(void) {",
          "content_same": false
        },
        {
          "line": 851,
          "old_api": "sdsnewlen",
          "new_api": null,
          "old_text": "sdsnewlen(reply->proto, reply->protolen)",
          "new_text": null,
          "old_line_content": "    sds proto = sdsnewlen(reply->proto, reply->protolen);",
          "new_line_content": " *",
          "content_same": false
        },
        {
          "line": 852,
          "old_api": "addReplySds",
          "new_api": null,
          "old_text": "addReplySds(ctx->client,proto)",
          "new_text": null,
          "old_line_content": "    addReplySds(ctx->client,proto);",
          "new_line_content": " * The function always returns REDISMODULE_OK. */",
          "content_same": false
        },
        {
          "line": 1874,
          "old_api": "hashTypeExists",
          "new_api": null,
          "old_text": "hashTypeExists(key->value,field->ptr)",
          "new_text": null,
          "old_line_content": "                *existsptr = hashTypeExists(key->value,field->ptr);",
          "new_line_content": "        if (flags & REDISMODULE_HASH_EXISTS) {",
          "content_same": false
        },
        {
          "line": 1878,
          "old_api": "va_arg",
          "new_api": null,
          "old_text": "va_arg(ap,RedisModuleString**)",
          "new_text": null,
          "old_line_content": "            valueptr = va_arg(ap,RedisModuleString**);",
          "new_line_content": "            else",
          "content_same": false
        },
        {
          "line": 1880,
          "old_api": "hashTypeGetValueObject",
          "new_api": null,
          "old_text": "hashTypeGetValueObject(key->value,field->ptr)",
          "new_text": null,
          "old_line_content": "                *valueptr = hashTypeGetValueObject(key->value,field->ptr);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 1882,
          "old_api": "getDecodedObject",
          "new_api": null,
          "old_text": "getDecodedObject(*valueptr)",
          "new_text": null,
          "old_line_content": "                    robj *decoded = getDecodedObject(*valueptr);",
          "new_line_content": "            if (key->value) {",
          "content_same": false
        },
        {
          "line": 863,
          "old_api": "addReplyDouble",
          "new_api": null,
          "old_text": "addReplyDouble(ctx->client,d)",
          "new_text": null,
          "old_line_content": "    addReplyDouble(ctx->client,d);",
          "new_line_content": " *",
          "content_same": false
        },
        {
          "line": 1887,
          "old_api": "autoMemoryAdd",
          "new_api": null,
          "old_text": "autoMemoryAdd(key->ctx,REDISMODULE_AM_STRING,*valueptr)",
          "new_text": null,
          "old_line_content": "                    autoMemoryAdd(key->ctx,REDISMODULE_AM_STRING,*valueptr);",
          "new_line_content": "                    *valueptr = decoded;",
          "content_same": false
        },
        {
          "line": 1377,
          "old_api": "zsetDel",
          "new_api": null,
          "old_text": "zsetDel(key->value,ele->ptr)",
          "new_text": null,
          "old_line_content": "    if (key->value != NULL && zsetDel(key->value,ele->ptr)) {",
          "new_line_content": "int RM_ZsetRem(RedisModuleKey *key, RedisModuleString *ele, int *deleted) {",
          "content_same": false
        },
        {
          "line": 2404,
          "old_api": "listRewind",
          "new_api": null,
          "old_text": "listRewind(server.loadmodule_queue,&li)",
          "new_text": null,
          "old_line_content": "    listRewind(server.loadmodule_queue,&li);",
          "new_line_content": "    listIter li;",
          "content_same": false
        },
        {
          "line": 2405,
          "old_api": "listNext",
          "new_api": null,
          "old_text": "listNext(&li)",
          "new_text": null,
          "old_line_content": "    while((ln = listNext(&li))) {",
          "new_line_content": "    listNode *ln;",
          "content_same": false
        },
        {
          "line": 1894,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(field)",
          "new_text": null,
          "old_line_content": "        if (flags & REDISMODULE_HASH_CFIELDS) decrRefCount(field);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1896,
          "old_api": "va_end",
          "new_api": null,
          "old_text": "va_end(ap)",
          "new_text": null,
          "old_line_content": "    va_end(ap);",
          "new_line_content": "        /* Cleanup */",
          "content_same": false
        },
        {
          "line": 876,
          "old_api": "execCommandPropagateMulti",
          "new_api": null,
          "old_text": "execCommandPropagateMulti(ctx->client)",
          "new_text": null,
          "old_line_content": "    execCommandPropagateMulti(ctx->client);",
          "new_line_content": " * RedisModuleCommandDispatcher() function. */",
          "content_same": false
        },
        {
          "line": 2417,
          "old_api": "sdsfree",
          "new_api": null,
          "old_text": "sdsfree(module->name)",
          "new_text": null,
          "old_line_content": "    sdsfree(module->name);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2418,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(module)",
          "new_text": null,
          "old_line_content": "    zfree(module);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1396,
          "old_api": "zsetScore",
          "new_api": null,
          "old_text": "zsetScore(key->value,ele->ptr,score)",
          "new_text": null,
          "old_line_content": "    if (zsetScore(key->value,ele->ptr,score) == C_ERR) return REDISMODULE_ERR;",
          "new_line_content": "int RM_ZsetScore(RedisModuleKey *key, RedisModuleString *ele, double *score) {",
          "content_same": false
        },
        {
          "line": 1909,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(*reply))",
          "new_text": null,
          "old_line_content": "    RedisModuleCallReply *reply = zmalloc(sizeof(*reply));",
          "new_line_content": " * is processed as needed. Initially we just make sure to set the right",
          "content_same": false
        },
        {
          "line": 2428,
          "old_api": "dlopen",
          "new_api": null,
          "old_text": "dlopen(path,RTLD_NOW|RTLD_LOCAL)",
          "new_text": null,
          "old_line_content": "    handle = dlopen(path,RTLD_NOW|RTLD_LOCAL);",
          "new_line_content": "    void *handle;",
          "content_same": false
        },
        {
          "line": 2430,
          "old_api": "dlerror",
          "new_api": null,
          "old_text": "dlerror()",
          "new_text": null,
          "old_line_content": "        serverLog(LL_WARNING, \"Module %s failed to load: %s\", path, dlerror());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1408,
          "old_api": "zslFreeLexRange",
          "new_api": null,
          "old_text": "zslFreeLexRange(&key->zlrs)",
          "new_text": null,
          "old_line_content": "        zslFreeLexRange(&key->zlrs);",
          "new_line_content": "void RM_ZsetRangeStop(RedisModuleKey *key) {",
          "content_same": false
        },
        {
          "line": 2435,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\n            \"Module %s does not export RedisModule_OnLoad() \"\n            \"symbol. Module not loaded.\",path)",
          "new_text": null,
          "old_line_content": "        serverLog(LL_WARNING,",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2440,
          "old_api": "onload",
          "new_api": null,
          "old_text": "onload((void*)&ctx)",
          "new_text": null,
          "old_line_content": "    if (onload((void*)&ctx) == REDISMODULE_ERR) {",
          "new_line_content": "            \"symbol. Module not loaded.\",path);",
          "content_same": false
        },
        {
          "line": 2441,
          "old_api": "moduleFreeModuleStructure",
          "new_api": null,
          "old_text": "moduleFreeModuleStructure(ctx.module)",
          "new_text": null,
          "old_line_content": "        if (ctx.module) moduleFreeModuleStructure(ctx.module);",
          "new_line_content": "        return C_ERR;",
          "content_same": false
        },
        {
          "line": 2442,
          "old_api": "dlclose",
          "new_api": null,
          "old_text": "dlclose(handle)",
          "new_text": null,
          "old_line_content": "        dlclose(handle);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 905,
          "old_api": "lookupCommandByCString",
          "new_api": null,
          "old_text": "lookupCommandByCString((char*)cmdname)",
          "new_text": null,
          "old_line_content": "    cmd = lookupCommandByCString((char*)cmdname);",
          "new_line_content": "    int argc = 0, flags = 0, j;",
          "content_same": false
        },
        {
          "line": 909,
          "old_api": "va_start",
          "new_api": null,
          "old_text": "va_start(ap, fmt)",
          "new_text": null,
          "old_line_content": "    va_start(ap, fmt);",
          "new_line_content": "    if (!cmd) return REDISMODULE_ERR;",
          "content_same": false
        },
        {
          "line": 910,
          "old_api": "moduleCreateArgvFromUserFormat",
          "new_api": null,
          "old_text": "moduleCreateArgvFromUserFormat(cmdname,fmt,&argc,&flags,ap)",
          "new_text": null,
          "old_line_content": "    argv = moduleCreateArgvFromUserFormat(cmdname,fmt,&argc,&flags,ap);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 911,
          "old_api": "va_end",
          "new_api": null,
          "old_text": "va_end(ap)",
          "new_text": null,
          "old_line_content": "    va_end(ap);",
          "new_line_content": "    /* Create the client and dispatch the command. */",
          "content_same": false
        },
        {
          "line": 2449,
          "old_api": "dictAdd",
          "new_api": null,
          "old_text": "dictAdd(modules,ctx.module->name,ctx.module)",
          "new_text": null,
          "old_line_content": "    dictAdd(modules,ctx.module->name,ctx.module);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2451,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_NOTICE,\"Module '%s' loaded from %s\",ctx.module->name,path)",
          "new_text": null,
          "old_line_content": "    serverLog(LL_NOTICE,\"Module '%s' loaded from %s\",ctx.module->name,path);",
          "new_line_content": "    /* Redis module loaded! Register it. */",
          "content_same": false
        },
        {
          "line": 915,
          "old_api": "moduleReplicateMultiIfNeeded",
          "new_api": null,
          "old_text": "moduleReplicateMultiIfNeeded(ctx)",
          "new_text": null,
          "old_line_content": "    moduleReplicateMultiIfNeeded(ctx);",
          "new_line_content": "    if (argv == NULL) return REDISMODULE_ERR;",
          "content_same": false
        },
        {
          "line": 916,
          "old_api": "alsoPropagate",
          "new_api": null,
          "old_text": "alsoPropagate(cmd,ctx->client->db->id,argv,argc,\n        PROPAGATE_AOF|PROPAGATE_REPL)",
          "new_text": null,
          "old_line_content": "    alsoPropagate(cmd,ctx->client->db->id,argv,argc,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1940,
          "old_api": "moduleParseCallReply_Int",
          "new_api": null,
          "old_text": "moduleParseCallReply_Int(reply)",
          "new_text": null,
          "old_line_content": "    case ':': moduleParseCallReply_Int(reply); break;",
          "new_line_content": "    reply->flags &= ~REDISMODULE_REPLYFLAG_TOPARSE;",
          "content_same": false
        },
        {
          "line": 1431,
          "old_api": "RM_ZsetRangeStop",
          "new_api": null,
          "old_text": "RM_ZsetRangeStop(key)",
          "new_text": null,
          "old_line_content": "    RM_ZsetRangeStop(key);",
          "new_line_content": "int zsetInitScoreRange(RedisModuleKey *key, double min, double max, int minex, int maxex, int first) {",
          "content_same": false
        },
        {
          "line": 920,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(argv[j])",
          "new_text": null,
          "old_line_content": "    for (j = 0; j < argc; j++) decrRefCount(argv[j]);",
          "new_line_content": "        PROPAGATE_AOF|PROPAGATE_REPL);",
          "content_same": false
        },
        {
          "line": 921,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(argv)",
          "new_text": null,
          "old_line_content": "    zfree(argv);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1941,
          "old_api": "moduleParseCallReply_BulkString",
          "new_api": null,
          "old_text": "moduleParseCallReply_BulkString(reply)",
          "new_text": null,
          "old_line_content": "    case '$': moduleParseCallReply_BulkString(reply); break;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2461,
          "old_api": "dictFetchValue",
          "new_api": null,
          "old_text": "dictFetchValue(modules,name)",
          "new_text": null,
          "old_line_content": "    struct RedisModule *module = dictFetchValue(modules,name);",
          "new_line_content": " *",
          "content_same": false
        },
        {
          "line": 1950,
          "old_api": "strchr",
          "new_api": null,
          "old_text": "strchr(proto+1,'\\r')",
          "new_text": null,
          "old_line_content": "    char *p = strchr(proto+1,'\\r');",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1952,
          "old_api": "string2ll",
          "new_api": null,
          "old_text": "string2ll(proto+1,p-proto-1,&reply->val.ll)",
          "new_text": null,
          "old_line_content": "    string2ll(proto+1,p-proto-1,&reply->val.ll);",
          "new_line_content": "    char *proto = reply->proto;",
          "content_same": false
        },
        {
          "line": 2468,
          "old_api": "dictGetSafeIterator",
          "new_api": null,
          "old_text": "dictGetSafeIterator(server.commands)",
          "new_text": null,
          "old_line_content": "    dictIterator *di = dictGetSafeIterator(server.commands);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1444,
          "old_api": "zzlFirstInRange",
          "new_api": null,
          "old_text": "zzlFirstInRange(key->value->ptr,zrs)",
          "new_text": null,
          "old_line_content": "        key->zcurrent = first ? zzlFirstInRange(key->value->ptr,zrs) :",
          "new_line_content": "    zrs->maxex = maxex;",
          "content_same": false
        },
        {
          "line": 2470,
          "old_api": "dictNext",
          "new_api": null,
          "old_text": "dictNext(di)",
          "new_text": null,
          "old_line_content": "    while ((de = dictNext(di)) != NULL) {",
          "new_line_content": "    /* Unregister all the commands registered by this module. */",
          "content_same": false
        },
        {
          "line": 1445,
          "old_api": "zzlLastInRange",
          "new_api": null,
          "old_text": "zzlLastInRange(key->value->ptr,zrs)",
          "new_text": null,
          "old_line_content": "                                zzlLastInRange(key->value->ptr,zrs);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1959,
          "old_api": "strchr",
          "new_api": null,
          "old_text": "strchr(proto+1,'\\r')",
          "new_text": null,
          "old_line_content": "    char *p = strchr(proto+1,'\\r');",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 937,
          "old_api": "alsoPropagate",
          "new_api": null,
          "old_text": "alsoPropagate(ctx->client->cmd,ctx->client->db->id,\n        ctx->client->argv,ctx->client->argc,\n        PROPAGATE_AOF|PROPAGATE_REPL)",
          "new_text": null,
          "old_line_content": "    alsoPropagate(ctx->client->cmd,ctx->client->db->id,",
          "new_line_content": " *",
          "content_same": false
        },
        {
          "line": 1449,
          "old_api": "zslFirstInRange",
          "new_api": null,
          "old_text": "zslFirstInRange(zsl,zrs)",
          "new_text": null,
          "old_line_content": "        key->zcurrent = first ? zslFirstInRange(zsl,zrs) :",
          "new_line_content": "    } else if (key->value->encoding == OBJ_ENCODING_SKIPLIST) {",
          "content_same": false
        },
        {
          "line": 1450,
          "old_api": "zslLastInRange",
          "new_api": null,
          "old_text": "zslLastInRange(zsl,zrs)",
          "new_text": null,
          "old_line_content": "                                zslLastInRange(zsl,zrs);",
          "new_line_content": "        zset *zs = key->value->ptr;",
          "content_same": false
        },
        {
          "line": 2477,
          "old_api": "dictDelete",
          "new_api": null,
          "old_text": "dictDelete(server.commands,cmdname)",
          "new_text": null,
          "old_line_content": "                dictDelete(server.commands,cmdname);",
          "new_line_content": "                (void*)(unsigned long)cmd->getkeys_proc;",
          "content_same": false
        },
        {
          "line": 2478,
          "old_api": "dictDelete",
          "new_api": null,
          "old_text": "dictDelete(server.orig_commands,cmdname)",
          "new_text": null,
          "old_line_content": "                dictDelete(server.orig_commands,cmdname);",
          "new_line_content": "            sds cmdname = cp->rediscmd->name;",
          "content_same": false
        },
        {
          "line": 2479,
          "old_api": "sdsfree",
          "new_api": null,
          "old_text": "sdsfree(cmdname)",
          "new_text": null,
          "old_line_content": "                sdsfree(cmdname);",
          "new_line_content": "            if (cp->module == module) {",
          "content_same": false
        },
        {
          "line": 2485,
          "old_api": "dictReleaseIterator",
          "new_api": null,
          "old_text": "dictReleaseIterator(di)",
          "new_text": null,
          "old_line_content": "    dictReleaseIterator(di);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1976,
          "old_api": "strchr",
          "new_api": null,
          "old_text": "strchr(proto+1,'\\r')",
          "new_text": null,
          "old_line_content": "    char *p = strchr(proto+1,'\\r');",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2490,
          "old_api": "dlclose",
          "new_api": null,
          "old_text": "dlclose(module->handle)",
          "new_text": null,
          "old_line_content": "    if (dlclose(module->handle) == -1) {",
          "new_line_content": "    /* Unregister all the hooks. TODO: Yet no hooks support here. */",
          "content_same": false
        },
        {
          "line": 2491,
          "old_api": "dlerror",
          "new_api": null,
          "old_text": "dlerror()",
          "new_text": null,
          "old_line_content": "        char *error = dlerror();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2498,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_NOTICE,\"Module %s unloaded\",module->name)",
          "new_text": null,
          "old_line_content": "    serverLog(LL_NOTICE,\"Module %s unloaded\",module->name);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2499,
          "old_api": "dictDelete",
          "new_api": null,
          "old_text": "dictDelete(modules,module->name)",
          "new_text": null,
          "old_line_content": "    dictDelete(modules,module->name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1474,
          "old_api": "zsetInitScoreRange",
          "new_api": null,
          "old_text": "zsetInitScoreRange(key,min,max,minex,maxex,1)",
          "new_text": null,
          "old_line_content": "    return zsetInitScoreRange(key,min,max,minex,maxex,1);",
          "new_line_content": " * where the min and max value are exclusive (not included) instead of",
          "content_same": false
        },
        {
          "line": 1987,
          "old_api": "strchr",
          "new_api": null,
          "old_text": "strchr(proto+1,'\\r')",
          "new_text": null,
          "old_line_content": "    char *p = strchr(proto+1,'\\r');",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1480,
          "old_api": "zsetInitScoreRange",
          "new_api": null,
          "old_text": "zsetInitScoreRange(key,min,max,minex,maxex,0)",
          "new_text": null,
          "old_line_content": "    return zsetInitScoreRange(key,min,max,minex,maxex,0);",
          "new_line_content": "/* Exactly like RedisModule_ZsetFirstInScoreRange() but the last element of",
          "content_same": false
        },
        {
          "line": 1999,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(RedisModuleCallReply)*arraylen)",
          "new_text": null,
          "old_line_content": "    reply->val.array = zmalloc(sizeof(RedisModuleCallReply)*arraylen);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 2513,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(subcmd,\"load\")",
          "new_text": null,
          "old_line_content": "    if (!strcasecmp(subcmd,\"load\") && c->argc == 3) {",
          "new_line_content": "void moduleCommand(client *c) {",
          "content_same": false
        },
        {
          "line": 2514,
          "old_api": "moduleLoad",
          "new_api": null,
          "old_text": "moduleLoad(c->argv[2]->ptr)",
          "new_text": null,
          "old_line_content": "        if (moduleLoad(c->argv[2]->ptr) == C_OK)",
          "new_line_content": "    char *subcmd = c->argv[1]->ptr;",
          "content_same": false
        },
        {
          "line": 2515,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.ok)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.ok);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 979,
          "old_api": "selectDb",
          "new_api": null,
          "old_text": "selectDb(ctx->client,newid)",
          "new_text": null,
          "old_line_content": "    int retval = selectDb(ctx->client,newid);",
          "new_line_content": " * returns back to the original one, it should call RedisModule_GetSelectedDb()",
          "content_same": false
        },
        {
          "line": 2519,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(subcmd,\"unload\")",
          "new_text": null,
          "old_line_content": "    } else if (!strcasecmp(subcmd,\"unload\") && c->argc == 3) {",
          "new_line_content": "        else",
          "content_same": false
        },
        {
          "line": 1495,
          "old_api": "RM_ZsetRangeStop",
          "new_api": null,
          "old_text": "RM_ZsetRangeStop(key)",
          "new_text": null,
          "old_line_content": "    RM_ZsetRangeStop(key);",
          "new_line_content": "int zsetInitLexRange(RedisModuleKey *key, RedisModuleString *min, RedisModuleString *max, int first) {",
          "content_same": false
        },
        {
          "line": 2521,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.ok)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.ok);",
          "new_line_content": "                \"Error loading the extension. Please check the server logs.\");",
          "content_same": false
        },
        {
          "line": 2007,
          "old_api": "moduleParseCallReply",
          "new_api": null,
          "old_text": "moduleParseCallReply(ele)",
          "new_text": null,
          "old_line_content": "        moduleParseCallReply(ele);",
          "new_line_content": "                     REDISMODULE_REPLYFLAG_TOPARSE;",
          "content_same": false
        },
        {
          "line": 1501,
          "old_api": "zslParseLexRange",
          "new_api": null,
          "old_text": "zslParseLexRange(min, max, zlrs)",
          "new_text": null,
          "old_line_content": "    if (zslParseLexRange(min, max, zlrs) == C_ERR) return REDISMODULE_ERR;",
          "new_line_content": "    /* Setup the range structure used by the sorted set core implementation",
          "content_same": false
        },
        {
          "line": 2527,
          "old_api": "addReplyErrorFormat",
          "new_api": null,
          "old_text": "addReplyErrorFormat(c,\"Error unloading module: %s\",errmsg)",
          "new_text": null,
          "old_line_content": "            addReplyErrorFormat(c,\"Error unloading module: %s\",errmsg);",
          "new_line_content": "            switch(errno) {",
          "content_same": false
        },
        {
          "line": 2529,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(subcmd,\"list\")",
          "new_text": null,
          "old_line_content": "    } else if (!strcasecmp(subcmd,\"list\") && c->argc == 2) {",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1508,
          "old_api": "zzlFirstInLexRange",
          "new_api": null,
          "old_text": "zzlFirstInLexRange(key->value->ptr,zlrs)",
          "new_text": null,
          "old_line_content": "        key->zcurrent = first ? zzlFirstInLexRange(key->value->ptr,zlrs) :",
          "new_line_content": "    key->ztype = REDISMODULE_ZSET_RANGE_LEX;",
          "content_same": false
        },
        {
          "line": 1509,
          "old_api": "zzlLastInLexRange",
          "new_api": null,
          "old_text": "zzlLastInLexRange(key->value->ptr,zlrs)",
          "new_text": null,
          "old_line_content": "                                zzlLastInLexRange(key->value->ptr,zlrs);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2534,
          "old_api": "dictNext",
          "new_api": null,
          "old_text": "dictNext(di)",
          "new_text": null,
          "old_line_content": "        while ((de = dictNext(di)) != NULL) {",
          "new_line_content": "        dictEntry *de;",
          "content_same": false
        },
        {
          "line": 2535,
          "old_api": "dictGetKey",
          "new_api": null,
          "old_text": "dictGetKey(de)",
          "new_text": null,
          "old_line_content": "            sds name = dictGetKey(de);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1513,
          "old_api": "zslFirstInLexRange",
          "new_api": null,
          "old_text": "zslFirstInLexRange(zsl,zlrs)",
          "new_text": null,
          "old_line_content": "        key->zcurrent = first ? zslFirstInLexRange(zsl,zlrs) :",
          "new_line_content": "    } else if (key->value->encoding == OBJ_ENCODING_SKIPLIST) {",
          "content_same": false
        },
        {
          "line": 1002,
          "old_api": "lookupKeyWrite",
          "new_api": null,
          "old_text": "lookupKeyWrite(ctx->client->db,keyname)",
          "new_text": null,
          "old_line_content": "        value = lookupKeyWrite(ctx->client->db,keyname);",
          "new_line_content": "    robj *value;",
          "content_same": false
        },
        {
          "line": 1514,
          "old_api": "zslLastInLexRange",
          "new_api": null,
          "old_text": "zslLastInLexRange(zsl,zlrs)",
          "new_text": null,
          "old_line_content": "                                zslLastInLexRange(zsl,zlrs);",
          "new_line_content": "        zset *zs = key->value->ptr;",
          "content_same": false
        },
        {
          "line": 1004,
          "old_api": "lookupKeyRead",
          "new_api": null,
          "old_text": "lookupKeyRead(ctx->client->db,keyname)",
          "new_text": null,
          "old_line_content": "        value = lookupKeyRead(ctx->client->db,keyname);",
          "new_line_content": "    if (mode & REDISMODULE_WRITE) {",
          "content_same": false
        },
        {
          "line": 2026,
          "old_api": "RM_FreeCallReply_Rec",
          "new_api": null,
          "old_text": "RM_FreeCallReply_Rec(reply->val.array+j,1)",
          "new_text": null,
          "old_line_content": "                RM_FreeCallReply_Rec(reply->val.array+j,1);",
          "new_line_content": "        if (reply->type == REDISMODULE_REPLY_ARRAY) {",
          "content_same": false
        },
        {
          "line": 2027,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(reply->val.array)",
          "new_text": null,
          "old_line_content": "            zfree(reply->val.array);",
          "new_line_content": "            size_t j;",
          "content_same": false
        },
        {
          "line": 2545,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.syntaxerr)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.syntaxerr);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1011,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(*kp))",
          "new_text": null,
          "old_line_content": "    kp = zmalloc(sizeof(*kp));",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2036,
          "old_api": "sdsfree",
          "new_api": null,
          "old_text": "sdsfree(reply->proto)",
          "new_text": null,
          "old_line_content": "        if (reply->proto) sdsfree(reply->proto);",
          "new_line_content": "     * itself which is allocated as an array of structures, and is freed",
          "content_same": false
        },
        {
          "line": 2037,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(reply)",
          "new_text": null,
          "old_line_content": "        zfree(reply);",
          "new_line_content": "     * when the array value is released. */",
          "content_same": false
        },
        {
          "line": 1015,
          "old_api": "incrRefCount",
          "new_api": null,
          "old_text": "incrRefCount(keyname)",
          "new_text": null,
          "old_line_content": "    incrRefCount(keyname);",
          "new_line_content": "    kp->ctx = ctx;",
          "content_same": false
        },
        {
          "line": 1019,
          "old_api": "RM_ZsetRangeStop",
          "new_api": null,
          "old_text": "RM_ZsetRangeStop(kp)",
          "new_text": null,
          "old_line_content": "    RM_ZsetRangeStop(kp);",
          "new_line_content": "    kp->value = value;",
          "content_same": false
        },
        {
          "line": 1020,
          "old_api": "autoMemoryAdd",
          "new_api": null,
          "old_text": "autoMemoryAdd(ctx,REDISMODULE_AM_KEY,kp)",
          "new_text": null,
          "old_line_content": "    autoMemoryAdd(ctx,REDISMODULE_AM_KEY,kp);",
          "new_line_content": "    kp->iter = NULL;",
          "content_same": false
        },
        {
          "line": 2045,
          "old_api": "RM_FreeCallReply_Rec",
          "new_api": null,
          "old_text": "RM_FreeCallReply_Rec(reply,0)",
          "new_text": null,
          "old_line_content": "    RM_FreeCallReply_Rec(reply,0);",
          "new_line_content": " * to have the first level function to return on nested replies, but only",
          "content_same": false
        },
        {
          "line": 2046,
          "old_api": "autoMemoryFreed",
          "new_api": null,
          "old_text": "autoMemoryFreed(reply->ctx,REDISMODULE_AM_REPLY,reply)",
          "new_text": null,
          "old_line_content": "    autoMemoryFreed(reply->ctx,REDISMODULE_AM_REPLY,reply);",
          "new_line_content": " * if called by the module API. */",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 60,
      "total_additions": 231,
      "total_deletions": 231,
      "total_api_changes": 522
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 4,
        "api_related_lines": 522,
        "non_api_lines": 4,
        "non_api_line_numbers": [
          592,
          593,
          583,
          591
        ]
      }
    },
    "api_calls_before": 426,
    "api_calls_after": 426,
    "diff_info": {
      "added_lines": 4,
      "removed_lines": 1,
      "total_diff_lines": 24
    }
  }
}
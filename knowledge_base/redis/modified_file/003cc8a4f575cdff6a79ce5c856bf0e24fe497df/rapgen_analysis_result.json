{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/003cc8a4f575cdff6a79ce5c856bf0e24fe497df",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/003cc8a4f575cdff6a79ce5c856bf0e24fe497df/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/003cc8a4f575cdff6a79ce5c856bf0e24fe497df/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/003cc8a4f575cdff6a79ce5c856bf0e24fe497df/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 1189,
          "old_api": "redisAssert",
          "new_api": "listLength",
          "old_text": "redisAssert(ln != NULL)",
          "new_text": "listLength(server.unblocked_clients)",
          "old_line_content": "        redisAssert(ln != NULL);",
          "new_line_content": "    while (listLength(server.unblocked_clients)) {",
          "content_same": false
        },
        {
          "line": 1191,
          "old_api": "listDelNode",
          "new_api": "redisAssert",
          "old_text": "listDelNode(server.unblocked_clients,ln)",
          "new_text": "redisAssert(ln != NULL)",
          "old_line_content": "        listDelNode(server.unblocked_clients,ln);",
          "new_line_content": "        redisAssert(ln != NULL);",
          "content_same": false
        },
        {
          "line": 1197,
          "old_api": "processInputBuffer",
          "new_api": "sdslen",
          "old_text": "processInputBuffer(c)",
          "new_text": "sdslen(c->querybuf)",
          "old_line_content": "            processInputBuffer(c);",
          "new_line_content": "        if (c->querybuf && sdslen(c->querybuf) > 0) {",
          "content_same": false
        },
        {
          "line": 1263,
          "old_api": "sdsempty",
          "new_api": "ll2string",
          "old_text": "sdsempty()",
          "new_text": "ll2string(dictid_str,sizeof(dictid_str),j)",
          "old_line_content": "            sdscatprintf(sdsempty(),",
          "new_line_content": "        dictid_len = ll2string(dictid_str,sizeof(dictid_str),j);",
          "content_same": false
        },
        {
          "line": 1278,
          "old_api": "createObject",
          "new_api": "createStringObject",
          "old_text": "createObject(REDIS_STRING,(void*)(long)j)",
          "new_text": "createStringObject(\"LPUSH\",5)",
          "old_line_content": "        shared.integers[j] = createObject(REDIS_STRING,(void*)(long)j);",
          "new_line_content": "    shared.lpush = createStringObject(\"LPUSH\",5);",
          "content_same": false
        },
        {
          "line": 1371,
          "old_api": "appendServerSaveParams",
          "new_api": "resetServerSaveParams",
          "old_text": "appendServerSaveParams(60*60,1)",
          "new_text": "resetServerSaveParams()",
          "old_line_content": "    appendServerSaveParams(60*60,1);  /* save after 1 hour and 1 change */",
          "new_line_content": "    resetServerSaveParams();",
          "content_same": false
        },
        {
          "line": 1414,
          "old_api": "populateCommandTable",
          "new_api": "dictCreate",
          "old_text": "populateCommandTable()",
          "new_text": "dictCreate(&commandTableDictType,NULL)",
          "old_line_content": "    populateCommandTable();",
          "new_line_content": "    server.commands = dictCreate(&commandTableDictType,NULL);",
          "content_same": false
        },
        {
          "line": 1415,
          "old_api": "lookupCommandByCString",
          "new_api": "dictCreate",
          "old_text": "lookupCommandByCString(\"del\")",
          "new_text": "dictCreate(&commandTableDictType,NULL)",
          "old_line_content": "    server.delCommand = lookupCommandByCString(\"del\");",
          "new_line_content": "    server.orig_commands = dictCreate(&commandTableDictType,NULL);",
          "content_same": false
        },
        {
          "line": 1416,
          "old_api": "lookupCommandByCString",
          "new_api": "populateCommandTable",
          "old_text": "lookupCommandByCString(\"multi\")",
          "new_text": "populateCommandTable()",
          "old_line_content": "    server.multiCommand = lookupCommandByCString(\"multi\");",
          "new_line_content": "    populateCommandTable();",
          "content_same": false
        },
        {
          "line": 1447,
          "old_api": "strerror",
          "new_api": "getrlimit",
          "old_text": "strerror(errno)",
          "new_text": "getrlimit(RLIMIT_NOFILE,&limit)",
          "old_line_content": "            strerror(errno));",
          "new_line_content": "    if (getrlimit(RLIMIT_NOFILE,&limit) == -1) {",
          "content_same": false
        },
        {
          "line": 1470,
          "old_api": "redisLog",
          "new_api": "strerror",
          "old_text": "redisLog(REDIS_NOTICE,\"Max number of open files set to %d\",\n                    (int) maxfiles)",
          "new_text": "strerror(errno)",
          "old_line_content": "                redisLog(REDIS_NOTICE,\"Max number of open files set to %d\",",
          "new_line_content": "                    (int) maxfiles, strerror(errno), (int) server.maxclients);",
          "content_same": false
        },
        {
          "line": 1507,
          "old_api": "anetTcpServer",
          "new_api": "anetTcp6Server",
          "old_text": "anetTcpServer(server.neterr,port,NULL)",
          "new_text": "anetTcp6Server(server.neterr,port,NULL)",
          "old_line_content": "            fds[*count] = anetTcpServer(server.neterr,port,NULL);",
          "new_line_content": "            fds[*count] = anetTcp6Server(server.neterr,port,NULL);",
          "content_same": false
        },
        {
          "line": 1515,
          "old_api": "anetTcp6Server",
          "new_api": "strchr",
          "old_text": "anetTcp6Server(server.neterr,port,server.bindaddr[j])",
          "new_text": "strchr(server.bindaddr[j],':')",
          "old_line_content": "            fds[*count] = anetTcp6Server(server.neterr,port,server.bindaddr[j]);",
          "new_line_content": "        } else if (strchr(server.bindaddr[j],':')) {",
          "content_same": false
        },
        {
          "line": 1537,
          "old_api": "setupSignalHandlers",
          "new_api": "signal",
          "old_text": "setupSignalHandlers()",
          "new_text": "signal(SIGHUP, SIG_IGN)",
          "old_line_content": "    setupSignalHandlers();",
          "new_line_content": "    signal(SIGHUP, SIG_IGN);",
          "content_same": false
        },
        {
          "line": 1553,
          "old_api": "createSharedObjects",
          "new_api": "listCreate",
          "old_text": "createSharedObjects()",
          "new_text": "listCreate()",
          "old_line_content": "    createSharedObjects();",
          "new_line_content": "    server.ready_keys = listCreate();",
          "content_same": false
        },
        {
          "line": 1555,
          "old_api": "aeCreateEventLoop",
          "new_api": "createSharedObjects",
          "old_text": "aeCreateEventLoop(server.maxclients+REDIS_EVENTLOOP_FDSET_INCR)",
          "new_text": "createSharedObjects()",
          "old_line_content": "    server.el = aeCreateEventLoop(server.maxclients+REDIS_EVENTLOOP_FDSET_INCR);",
          "new_line_content": "    createSharedObjects();",
          "content_same": false
        },
        {
          "line": 1556,
          "old_api": "zmalloc",
          "new_api": "adjustOpenFilesLimit",
          "old_text": "zmalloc(sizeof(redisDb)*server.dbnum)",
          "new_text": "adjustOpenFilesLimit()",
          "old_line_content": "    server.db = zmalloc(sizeof(redisDb)*server.dbnum);",
          "new_line_content": "    adjustOpenFilesLimit();",
          "content_same": false
        },
        {
          "line": 1567,
          "old_api": "redisLog",
          "new_api": "anetUnixServer",
          "old_text": "redisLog(REDIS_WARNING, \"Opening socket: %s\", server.neterr)",
          "new_text": "anetUnixServer(server.neterr,server.unixsocket,server.unixsocketperm)",
          "old_line_content": "            redisLog(REDIS_WARNING, \"Opening socket: %s\", server.neterr);",
          "new_line_content": "        server.sofd = anetUnixServer(server.neterr,server.unixsocket,server.unixsocketperm);",
          "content_same": false
        },
        {
          "line": 1590,
          "old_api": "listSetFreeMethod",
          "new_api": "dictCreate",
          "old_text": "listSetFreeMethod(server.pubsub_patterns,freePubsubPattern)",
          "new_text": "dictCreate(&keylistDictType,NULL)",
          "old_line_content": "    listSetFreeMethod(server.pubsub_patterns,freePubsubPattern);",
          "new_line_content": "    server.pubsub_channels = dictCreate(&keylistDictType,NULL);",
          "content_same": false
        },
        {
          "line": 1591,
          "old_api": "listSetMatchMethod",
          "new_api": "listCreate",
          "old_text": "listSetMatchMethod(server.pubsub_patterns,listMatchPubsubPattern)",
          "new_text": "listCreate()",
          "old_line_content": "    listSetMatchMethod(server.pubsub_patterns,listMatchPubsubPattern);",
          "new_line_content": "    server.pubsub_patterns = listCreate();",
          "content_same": false
        },
        {
          "line": 1597,
          "old_api": "time",
          "new_api": "aofRewriteBufferReset",
          "old_text": "time(NULL)",
          "new_text": "aofRewriteBufferReset()",
          "old_line_content": "    server.lastsave = time(NULL); /* At startup we consider the DB saved. */",
          "new_line_content": "    aofRewriteBufferReset();",
          "content_same": false
        },
        {
          "line": 1617,
          "old_api": "mstime",
          "new_api": "memset",
          "old_text": "mstime()",
          "new_text": "memset(server.ops_sec_samples,0,sizeof(server.ops_sec_samples))",
          "old_line_content": "    server.ops_sec_last_sample_time = mstime();",
          "new_line_content": "    memset(server.ops_sec_samples,0,sizeof(server.ops_sec_samples));",
          "content_same": false
        },
        {
          "line": 1619,
          "old_api": "time",
          "new_api": "mstime",
          "old_text": "time(NULL)",
          "new_text": "mstime()",
          "old_line_content": "    server.unixtime = time(NULL);",
          "new_line_content": "    server.ops_sec_last_sample_time = mstime();",
          "content_same": false
        },
        {
          "line": 1628,
          "old_api": "exit",
          "new_api": "aeCreateTimeEvent",
          "old_text": "exit(1)",
          "new_text": "aeCreateTimeEvent(server.el, 1, serverCron, NULL, NULL)",
          "old_line_content": "        exit(1);",
          "new_line_content": "    if(aeCreateTimeEvent(server.el, 1, serverCron, NULL, NULL) == AE_ERR) {",
          "content_same": false
        },
        {
          "line": 1651,
          "old_api": "exit",
          "new_api": "redisLog",
          "old_text": "exit(1)",
          "new_text": "redisLog(REDIS_WARNING, \"Can't open the append-only file: %s\",\n                strerror(errno))",
          "old_line_content": "            exit(1);",
          "new_line_content": "            redisLog(REDIS_WARNING, \"Can't open the append-only file: %s\",",
          "content_same": false
        },
        {
          "line": 1667,
          "old_api": "scriptingInit",
          "new_api": "clusterInit",
          "old_text": "scriptingInit()",
          "new_text": "clusterInit()",
          "old_line_content": "    scriptingInit();",
          "new_line_content": "    if (server.cluster_enabled) clusterInit();",
          "content_same": false
        },
        {
          "line": 1668,
          "old_api": "slowlogInit",
          "new_api": "replicationScriptCacheInit",
          "old_text": "slowlogInit()",
          "new_text": "replicationScriptCacheInit()",
          "old_line_content": "    slowlogInit();",
          "new_line_content": "    replicationScriptCacheInit();",
          "content_same": false
        },
        {
          "line": 1669,
          "old_api": "bioInit",
          "new_api": "scriptingInit",
          "old_text": "bioInit()",
          "new_text": "scriptingInit()",
          "old_line_content": "    bioInit();",
          "new_line_content": "    scriptingInit();",
          "content_same": false
        },
        {
          "line": 1769,
          "old_api": "dictFetchValue",
          "new_api": "sdsnew",
          "old_text": "dictFetchValue(server.commands, name)",
          "new_text": "sdsnew(s)",
          "old_line_content": "    cmd = dictFetchValue(server.commands, name);",
          "new_line_content": "    sds name = sdsnew(s);",
          "content_same": false
        },
        {
          "line": 1802,
          "old_api": "replicationFeedSlaves",
          "new_api": "feedAppendOnlyFile",
          "old_text": "replicationFeedSlaves(server.slaves,dbid,argv,argc)",
          "new_text": "feedAppendOnlyFile(cmd,dbid,argv,argc)",
          "old_line_content": "        replicationFeedSlaves(server.slaves,dbid,argv,argc);",
          "new_line_content": "        feedAppendOnlyFile(cmd,dbid,argv,argc);",
          "content_same": false
        },
        {
          "line": 1839,
          "old_api": "proc",
          "new_api": "redisOpArrayInit",
          "old_text": "c->cmd->proc(c)",
          "new_text": "redisOpArrayInit(&server.also_propagate)",
          "old_line_content": "    c->cmd->proc(c);",
          "new_line_content": "    redisOpArrayInit(&server.also_propagate);",
          "content_same": false
        },
        {
          "line": 1841,
          "old_api": "ustime",
          "new_api": "proc",
          "old_text": "ustime()",
          "new_text": "c->cmd->proc(c)",
          "old_line_content": "    duration = ustime()-start;",
          "new_line_content": "    c->cmd->proc(c);",
          "content_same": false
        },
        {
          "line": 1894,
          "old_api": "redisOpArrayFree",
          "new_api": "propagate",
          "old_text": "redisOpArrayFree(&server.also_propagate)",
          "new_text": "propagate(rop->cmd, rop->dbid, rop->argv, rop->argc, rop->target)",
          "old_line_content": "        redisOpArrayFree(&server.also_propagate);",
          "new_line_content": "            propagate(rop->cmd, rop->dbid, rop->argv, rop->argc, rop->target);",
          "content_same": false
        },
        {
          "line": 1922,
          "old_api": "flagTransaction",
          "new_api": "lookupCommand",
          "old_text": "flagTransaction(c)",
          "new_text": "lookupCommand(c->argv[0]->ptr)",
          "old_line_content": "        flagTransaction(c);",
          "new_line_content": "    c->cmd = c->lastcmd = lookupCommand(c->argv[0]->ptr);",
          "content_same": false
        },
        {
          "line": 1959,
          "old_api": "addReplyError",
          "new_api": "getNodeByQuery",
          "old_text": "addReplyError(c,\"Multi keys request invalid in cluster\")",
          "new_text": "getNodeByQuery(c,c->cmd,c->argv,c->argc,&hashslot,&ask)",
          "old_line_content": "                addReplyError(c,\"Multi keys request invalid in cluster\");",
          "new_line_content": "            clusterNode *n = getNodeByQuery(c,c->cmd,c->argv,c->argc,&hashslot,&ask);",
          "content_same": false
        },
        {
          "line": 1978,
          "old_api": "flagTransaction",
          "new_api": "freeMemoryIfNeeded",
          "old_text": "flagTransaction(c)",
          "new_text": "freeMemoryIfNeeded()",
          "old_line_content": "            flagTransaction(c);",
          "new_line_content": "        int retval = freeMemoryIfNeeded();",
          "content_same": false
        },
        {
          "line": 2057,
          "old_api": "flagTransaction",
          "new_api": "tolower",
          "old_text": "flagTransaction(c)",
          "new_text": "tolower(((char*)c->argv[1]->ptr)[0])",
          "old_line_content": "        flagTransaction(c);",
          "new_line_content": "          tolower(((char*)c->argv[1]->ptr)[0]) == 'k'))",
          "content_same": false
        },
        {
          "line": 2070,
          "old_api": "call",
          "new_api": "addReply",
          "old_text": "call(c,REDIS_CALL_FULL)",
          "new_text": "addReply(c,shared.queued)",
          "old_line_content": "        call(c,REDIS_CALL_FULL);",
          "new_line_content": "        addReply(c,shared.queued);",
          "content_same": false
        },
        {
          "line": 2072,
          "old_api": "handleClientsBlockedOnLists",
          "new_api": "call",
          "old_text": "handleClientsBlockedOnLists()",
          "new_text": "call(c,REDIS_CALL_FULL)",
          "old_line_content": "            handleClientsBlockedOnLists();",
          "new_line_content": "        call(c,REDIS_CALL_FULL);",
          "content_same": false
        },
        {
          "line": 2089,
          "old_api": "redisLog",
          "new_api": "close",
          "old_text": "redisLog(REDIS_NOTICE,\"Removing the unix socket file.\")",
          "new_text": "close(server.cfd[j])",
          "old_line_content": "        redisLog(REDIS_NOTICE,\"Removing the unix socket file.\");",
          "new_line_content": "        for (j = 0; j < server.cfd_count; j++) close(server.cfd[j]);",
          "content_same": false
        },
        {
          "line": 2105,
          "old_api": "rdbRemoveTempFile",
          "new_api": "redisLog",
          "old_text": "rdbRemoveTempFile(server.rdb_child_pid)",
          "new_text": "redisLog(REDIS_WARNING,\"There is a child saving an .rdb. Killing it!\")",
          "old_line_content": "        rdbRemoveTempFile(server.rdb_child_pid);",
          "new_line_content": "        redisLog(REDIS_WARNING,\"There is a child saving an .rdb. Killing it!\");",
          "content_same": false
        },
        {
          "line": 2113,
          "old_api": "kill",
          "new_api": "redisLog",
          "old_text": "kill(server.aof_child_pid,SIGUSR1)",
          "new_text": "redisLog(REDIS_WARNING,\n                \"There is a child rewriting the AOF. Killing it!\")",
          "old_line_content": "            kill(server.aof_child_pid,SIGUSR1);",
          "new_line_content": "            redisLog(REDIS_WARNING,",
          "content_same": false
        },
        {
          "line": 2122,
          "old_api": "rdbSave",
          "new_api": "redisLog",
          "old_text": "rdbSave(server.rdb_filename)",
          "new_text": "redisLog(REDIS_NOTICE,\"Saving the final RDB snapshot before exiting.\")",
          "old_line_content": "        if (rdbSave(server.rdb_filename) != REDIS_OK) {",
          "new_line_content": "        redisLog(REDIS_NOTICE,\"Saving the final RDB snapshot before exiting.\");",
          "content_same": false
        },
        {
          "line": 2191,
          "old_api": "addReply",
          "new_api": "time_independent_strcmp",
          "old_text": "addReply(c,shared.ok)",
          "new_text": "time_independent_strcmp(c->argv[1]->ptr, server.requirepass)",
          "old_line_content": "      addReply(c,shared.ok);",
          "new_line_content": "    } else if (!time_independent_strcmp(c->argv[1]->ptr, server.requirepass)) {",
          "content_same": false
        },
        {
          "line": 2213,
          "old_api": "addReplyBulkLongLong",
          "new_api": "gettimeofday",
          "old_text": "addReplyBulkLongLong(c,tv.tv_sec)",
          "new_text": "gettimeofday(&tv,NULL)",
          "old_line_content": "    addReplyBulkLongLong(c,tv.tv_sec);",
          "new_line_content": "    gettimeofday(&tv,NULL);",
          "content_same": false
        },
        {
          "line": 2214,
          "old_api": "addReplyBulkLongLong",
          "new_api": "addReplyMultiBulkLen",
          "old_text": "addReplyBulkLongLong(c,tv.tv_usec)",
          "new_text": "addReplyMultiBulkLen(c,2)",
          "old_line_content": "    addReplyBulkLongLong(c,tv.tv_usec);",
          "new_line_content": "    addReplyMultiBulkLen(c,2);",
          "content_same": false
        },
        {
          "line": 2257,
          "old_api": "getClientsMaxBuffers",
          "new_api": "getrusage",
          "old_text": "getClientsMaxBuffers(&lol,&bib)",
          "new_text": "getrusage(RUSAGE_SELF, &self_ru)",
          "old_line_content": "    getClientsMaxBuffers(&lol,&bib);",
          "new_line_content": "    getrusage(RUSAGE_SELF, &self_ru);",
          "content_same": false
        },
        {
          "line": 2270,
          "old_api": "sdscatprintf",
          "new_api": "sdscat",
          "old_text": "sdscatprintf(info,\n            \"# Server\\r\\n\"\n            \"redis_version:%s\\r\\n\"\n            \"redis_git_sha1:%s\\r\\n\"\n            \"redis_git_dirty:%d\\r\\n\"\n            \"redis_build_id:%llx\\r\\n\"\n            \"redis_mode:%s\\r\\n\"\n            \"os:%s %s %s\\r\\n\"\n            \"arch_bits:%d\\r\\n\"\n            \"multiplexing_api:%s\\r\\n\"\n            \"gcc_version:%d.%d.%d\\r\\n\"\n            \"process_id:%ld\\r\\n\"\n            \"run_id:%s\\r\\n\"\n            \"tcp_port:%d\\r\\n\"\n            \"uptime_in_seconds:%jd\\r\\n\"\n            \"uptime_in_days:%jd\\r\\n\"\n            \"hz:%d\\r\\n\"\n            \"lru_clock:%ld\\r\\n\"\n            \"config_file:%s\\r\\n\",\n            REDIS_VERSION,\n            redisGitSHA1(),\n            strtol(redisGitDirty(),NULL,10) > 0,\n            (unsigned long long) redisBuildId(),\n            mode,\n            name.sysname, name.release, name.machine,\n            server.arch_bits,\n            aeGetApiName(),\n#ifdef __GNUC__\n            __GNUC__,__GNUC_MINOR__,__GNUC_PATCHLEVEL__,\n#else\n            0,0,0,\n#endif\n            (long) getpid(),\n            server.runid,\n            server.port,\n            (intmax_t)uptime,\n            (intmax_t)(uptime/(3600*24)),\n            server.hz,\n            (unsigned long) server.lruclock,\n            server.configfile ? server.configfile : \"\")",
          "new_text": "sdscat(info,\"\\r\\n\")",
          "old_line_content": "        info = sdscatprintf(info,",
          "new_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 2292,
          "old_api": "redisBuildId",
          "new_api": "redisGitSHA1",
          "old_text": "redisBuildId()",
          "new_text": "redisGitSHA1()",
          "old_line_content": "            (unsigned long long) redisBuildId(),",
          "new_line_content": "            redisGitSHA1(),",
          "content_same": false
        },
        {
          "line": 2315,
          "old_api": "sdscatprintf",
          "new_api": "strcasecmp",
          "old_text": "sdscatprintf(info,\n            \"# Clients\\r\\n\"\n            \"connected_clients:%lu\\r\\n\"\n            \"client_longest_output_list:%lu\\r\\n\"\n            \"client_biggest_input_buf:%lu\\r\\n\"\n            \"blocked_clients:%d\\r\\n\",\n            listLength(server.clients)-listLength(server.slaves),\n            lol, bib,\n            server.bpop_blocked_clients)",
          "new_text": "strcasecmp(section,\"clients\")",
          "old_line_content": "        info = sdscatprintf(info,",
          "new_line_content": "    if (allsections || defsections || !strcasecmp(section,\"clients\")) {",
          "content_same": false
        },
        {
          "line": 2333,
          "old_api": "sdscat",
          "new_api": "zmalloc_used_memory",
          "old_text": "sdscat(info,\"\\r\\n\")",
          "new_text": "zmalloc_used_memory()",
          "old_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "new_line_content": "        bytesToHuman(hmem,zmalloc_used_memory());",
          "content_same": false
        },
        {
          "line": 2334,
          "old_api": "sdscatprintf",
          "new_api": "bytesToHuman",
          "old_text": "sdscatprintf(info,\n            \"# Memory\\r\\n\"\n            \"used_memory:%zu\\r\\n\"\n            \"used_memory_human:%s\\r\\n\"\n            \"used_memory_rss:%zu\\r\\n\"\n            \"used_memory_peak:%zu\\r\\n\"\n            \"used_memory_peak_human:%s\\r\\n\"\n            \"used_memory_lua:%lld\\r\\n\"\n            \"mem_fragmentation_ratio:%.2f\\r\\n\"\n            \"mem_allocator:%s\\r\\n\",\n            zmalloc_used_memory(),\n            hmem,\n            zmalloc_get_rss(),\n            server.stat_peak_memory,\n            peak_hmem,\n            ((long long)lua_gc(server.lua,LUA_GCCOUNT,0))*1024LL,\n            zmalloc_get_fragmentation_ratio(),\n            ZMALLOC_LIB\n            )",
          "new_text": "bytesToHuman(peak_hmem,server.stat_peak_memory)",
          "old_line_content": "        info = sdscatprintf(info,",
          "new_line_content": "        bytesToHuman(peak_hmem,server.stat_peak_memory);",
          "content_same": false
        },
        {
          "line": 2346,
          "old_api": "zmalloc_get_rss",
          "new_api": "zmalloc_used_memory",
          "old_text": "zmalloc_get_rss()",
          "new_text": "zmalloc_used_memory()",
          "old_line_content": "            zmalloc_get_rss(),",
          "new_line_content": "            zmalloc_used_memory(),",
          "content_same": false
        },
        {
          "line": 2358,
          "old_api": "sdscatprintf",
          "new_api": "strcasecmp",
          "old_text": "sdscatprintf(info,\n            \"# Persistence\\r\\n\"\n            \"loading:%d\\r\\n\"\n            \"rdb_changes_since_last_save:%lld\\r\\n\"\n            \"rdb_bgsave_in_progress:%d\\r\\n\"\n            \"rdb_last_save_time:%jd\\r\\n\"\n            \"rdb_last_bgsave_status:%s\\r\\n\"\n            \"rdb_last_bgsave_time_sec:%jd\\r\\n\"\n            \"rdb_current_bgsave_time_sec:%jd\\r\\n\"\n            \"aof_enabled:%d\\r\\n\"\n            \"aof_rewrite_in_progress:%d\\r\\n\"\n            \"aof_rewrite_scheduled:%d\\r\\n\"\n            \"aof_last_rewrite_time_sec:%jd\\r\\n\"\n            \"aof_current_rewrite_time_sec:%jd\\r\\n\"\n            \"aof_last_bgrewrite_status:%s\\r\\n\",\n            server.loading,\n            server.dirty,\n            server.rdb_child_pid != -1,\n            (intmax_t)server.lastsave,\n            (server.lastbgsave_status == REDIS_OK) ? \"ok\" : \"err\",\n            (intmax_t)server.rdb_save_time_last,\n            (intmax_t)((server.rdb_child_pid == -1) ?\n                -1 : time(NULL)-server.rdb_save_time_start),\n            server.aof_state != REDIS_AOF_OFF,\n            server.aof_child_pid != -1,\n            server.aof_rewrite_scheduled,\n            (intmax_t)server.aof_rewrite_time_last,\n            (intmax_t)((server.aof_child_pid == -1) ?\n                -1 : time(NULL)-server.aof_rewrite_time_start),\n            (server.aof_lastbgrewrite_status == REDIS_OK) ? \"ok\" : \"err\")",
          "new_text": "strcasecmp(section,\"persistence\")",
          "old_line_content": "        info = sdscatprintf(info,",
          "new_line_content": "    if (allsections || defsections || !strcasecmp(section,\"persistence\")) {",
          "content_same": false
        },
        {
          "line": 2403,
          "old_api": "bioPendingJobsOfType",
          "new_api": "sdslen",
          "old_text": "bioPendingJobsOfType(REDIS_BIO_AOF_FSYNC)",
          "new_text": "sdslen(server.aof_buf)",
          "old_line_content": "                bioPendingJobsOfType(REDIS_BIO_AOF_FSYNC),",
          "new_line_content": "                sdslen(server.aof_buf),",
          "content_same": false
        },
        {
          "line": 2442,
          "old_api": "sdscatprintf",
          "new_api": "strcasecmp",
          "old_text": "sdscatprintf(info,\n            \"# Stats\\r\\n\"\n            \"total_connections_received:%lld\\r\\n\"\n            \"total_commands_processed:%lld\\r\\n\"\n            \"instantaneous_ops_per_sec:%lld\\r\\n\"\n            \"rejected_connections:%lld\\r\\n\"\n            \"sync_full:%lld\\r\\n\"\n            \"sync_partial_ok:%lld\\r\\n\"\n            \"sync_partial_err:%lld\\r\\n\"\n            \"expired_keys:%lld\\r\\n\"\n            \"evicted_keys:%lld\\r\\n\"\n            \"keyspace_hits:%lld\\r\\n\"\n            \"keyspace_misses:%lld\\r\\n\"\n            \"pubsub_channels:%ld\\r\\n\"\n            \"pubsub_patterns:%lu\\r\\n\"\n            \"latest_fork_usec:%lld\\r\\n\"\n            \"migrate_cached_sockets:%ld\\r\\n\",\n            server.stat_numconnections,\n            server.stat_numcommands,\n            getOperationsPerSecond(),\n            server.stat_rejected_conn,\n            server.stat_sync_full,\n            server.stat_sync_partial_ok,\n            server.stat_sync_partial_err,\n            server.stat_expiredkeys,\n            server.stat_evictedkeys,\n            server.stat_keyspace_hits,\n            server.stat_keyspace_misses,\n            dictSize(server.pubsub_channels),\n            listLength(server.pubsub_patterns),\n            server.stat_fork_time,\n            dictSize(server.migrate_cached_sockets))",
          "new_text": "strcasecmp(section,\"stats\")",
          "old_line_content": "        info = sdscatprintf(info,",
          "new_line_content": "    if (allsections || defsections || !strcasecmp(section,\"stats\")) {",
          "content_same": false
        },
        {
          "line": 2473,
          "old_api": "dictSize",
          "new_api": "listLength",
          "old_text": "dictSize(server.migrate_cached_sockets)",
          "new_text": "listLength(server.pubsub_patterns)",
          "old_line_content": "            dictSize(server.migrate_cached_sockets));",
          "new_line_content": "            listLength(server.pubsub_patterns),",
          "content_same": false
        },
        {
          "line": 2479,
          "old_api": "sdscatprintf",
          "new_api": "strcasecmp",
          "old_text": "sdscatprintf(info,\n            \"# Replication\\r\\n\"\n            \"role:%s\\r\\n\",\n            server.masterhost == NULL ? \"master\" : \"slave\")",
          "new_text": "strcasecmp(section,\"replication\")",
          "old_line_content": "        info = sdscatprintf(info,",
          "new_line_content": "    if (allsections || defsections || !strcasecmp(section,\"replication\")) {",
          "content_same": false
        },
        {
          "line": 2525,
          "old_api": "listLength",
          "new_api": "sdscatprintf",
          "old_text": "listLength(server.slaves)",
          "new_text": "sdscatprintf(info,\n            \"connected_slaves:%lu\\r\\n\",\n            listLength(server.slaves))",
          "old_line_content": "            listLength(server.slaves));",
          "new_line_content": "        info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 2543,
          "old_api": "listNodeValue",
          "new_api": "listRewind",
          "old_text": "listNodeValue(ln)",
          "new_text": "listRewind(server.slaves,&li)",
          "old_line_content": "                redisClient *slave = listNodeValue(ln);",
          "new_line_content": "            listRewind(server.slaves,&li);",
          "content_same": false
        },
        {
          "line": 2566,
          "old_api": "sdscatprintf",
          "new_api": "time",
          "old_text": "sdscatprintf(info,\n                    \"slave%d:ip=%s,port=%d,state=%s,\"\n                    \"offset=%lld,lag=%ld\\r\\n\",\n                    slaveid,ip,slave->slave_listening_port,state,\n                    slave->repl_ack_off, lag)",
          "new_text": "time(NULL)",
          "old_line_content": "                info = sdscatprintf(info,",
          "new_line_content": "                    lag = time(NULL) - slave->repl_ack_time;",
          "content_same": false
        },
        {
          "line": 2590,
          "old_api": "sdscatprintf",
          "new_api": "strcasecmp",
          "old_text": "sdscatprintf(info,\n        \"# CPU\\r\\n\"\n        \"used_cpu_sys:%.2f\\r\\n\"\n        \"used_cpu_user:%.2f\\r\\n\"\n        \"used_cpu_sys_children:%.2f\\r\\n\"\n        \"used_cpu_user_children:%.2f\\r\\n\",\n        (float)self_ru.ru_stime.tv_sec+(float)self_ru.ru_stime.tv_usec/1000000,\n        (float)self_ru.ru_utime.tv_sec+(float)self_ru.ru_utime.tv_usec/1000000,\n        (float)c_ru.ru_stime.tv_sec+(float)c_ru.ru_stime.tv_usec/1000000,\n        (float)c_ru.ru_utime.tv_sec+(float)c_ru.ru_utime.tv_usec/1000000)",
          "new_text": "strcasecmp(section,\"cpu\")",
          "old_line_content": "        info = sdscatprintf(info,",
          "new_line_content": "    if (allsections || defsections || !strcasecmp(section,\"cpu\")) {",
          "content_same": false
        },
        {
          "line": 2605,
          "old_api": "sdscatprintf",
          "new_api": "strcasecmp",
          "old_text": "sdscatprintf(info, \"# Commandstats\\r\\n\")",
          "new_text": "strcasecmp(section,\"commandstats\")",
          "old_line_content": "        info = sdscatprintf(info, \"# Commandstats\\r\\n\");",
          "new_line_content": "    if (allsections || !strcasecmp(section,\"commandstats\")) {",
          "content_same": false
        },
        {
          "line": 2621,
          "old_api": "sdscatprintf",
          "new_api": "strcasecmp",
          "old_text": "sdscatprintf(info,\n        \"# Cluster\\r\\n\"\n        \"cluster_enabled:%d\\r\\n\",\n        server.cluster_enabled)",
          "new_text": "strcasecmp(section,\"cluster\")",
          "old_line_content": "        info = sdscatprintf(info,",
          "new_line_content": "    if (allsections || defsections || !strcasecmp(section,\"cluster\")) {",
          "content_same": false
        },
        {
          "line": 2630,
          "old_api": "sdscatprintf",
          "new_api": "strcasecmp",
          "old_text": "sdscatprintf(info, \"# Keyspace\\r\\n\")",
          "new_text": "strcasecmp(section,\"keyspace\")",
          "old_line_content": "        info = sdscatprintf(info, \"# Keyspace\\r\\n\");",
          "new_line_content": "    if (allsections || defsections || !strcasecmp(section,\"keyspace\")) {",
          "content_same": false
        },
        {
          "line": 2637,
          "old_api": "sdscatprintf",
          "new_api": "dictSize",
          "old_text": "sdscatprintf(info,\n                    \"db%d:keys=%lld,expires=%lld,avg_ttl=%lld\\r\\n\",\n                    j, keys, vkeys, server.db[j].avg_ttl)",
          "new_text": "dictSize(server.db[j].expires)",
          "old_line_content": "                info = sdscatprintf(info,",
          "new_line_content": "            vkeys = dictSize(server.db[j].expires);",
          "content_same": false
        },
        {
          "line": 2655,
          "old_api": "sdslen",
          "new_api": "genRedisInfoString",
          "old_text": "sdslen(info)",
          "new_text": "genRedisInfoString(section)",
          "old_line_content": "        (unsigned long)sdslen(info)));",
          "new_line_content": "    sds info = genRedisInfoString(section);",
          "content_same": false
        },
        {
          "line": 2656,
          "old_api": "addReplySds",
          "new_api": "sdsempty",
          "old_text": "addReplySds(c,info)",
          "new_text": "sdsempty()",
          "old_line_content": "    addReplySds(c,info);",
          "new_line_content": "    addReplySds(c,sdscatprintf(sdsempty(),\"$%lu\\r\\n\",",
          "content_same": false
        },
        {
          "line": 2657,
          "old_api": "addReply",
          "new_api": "sdslen",
          "old_text": "addReply(c,shared.crlf)",
          "new_text": "sdslen(info)",
          "old_line_content": "    addReply(c,shared.crlf);",
          "new_line_content": "        (unsigned long)sdslen(info)));",
          "content_same": false
        },
        {
          "line": 2699,
          "old_api": "listNodeValue",
          "new_api": "listRewind",
          "old_text": "listNodeValue(ln)",
          "new_text": "listRewind(server.slaves,&li)",
          "old_line_content": "            redisClient *slave = listNodeValue(ln);",
          "new_line_content": "        listRewind(server.slaves,&li);",
          "content_same": false
        },
        {
          "line": 2700,
          "old_api": "getClientOutputBufferMemoryUsage",
          "new_api": "listNext",
          "old_text": "getClientOutputBufferMemoryUsage(slave)",
          "new_text": "listNext(&li)",
          "old_line_content": "            unsigned long obuf_bytes = getClientOutputBufferMemoryUsage(slave);",
          "new_line_content": "        while((ln = listNext(&li))) {",
          "content_same": false
        },
        {
          "line": 2764,
          "old_api": "estimateObjectIdleTime",
          "new_api": "dictFind",
          "old_text": "estimateObjectIdleTime(o)",
          "new_text": "dictFind(db->dict, thiskey)",
          "old_line_content": "                    thisval = estimateObjectIdleTime(o);",
          "new_line_content": "                        de = dictFind(db->dict, thiskey);",
          "content_same": false
        },
        {
          "line": 2782,
          "old_api": "dictGetVal",
          "new_api": "dictGetRandomKey",
          "old_text": "dictGetVal(de)",
          "new_text": "dictGetRandomKey(dict)",
          "old_line_content": "                    thisval = (long) dictGetVal(de);",
          "new_line_content": "                    de = dictGetRandomKey(dict);",
          "content_same": false
        },
        {
          "line": 2814,
          "old_api": "decrRefCount",
          "new_api": "notifyKeyspaceEvent",
          "old_text": "decrRefCount(keyobj)",
          "new_text": "notifyKeyspaceEvent(REDIS_NOTIFY_EVICTED, \"evicted\",\n                    keyobj, db->id)",
          "old_line_content": "                decrRefCount(keyobj);",
          "new_line_content": "                notifyKeyspaceEvent(REDIS_NOTIFY_EVICTED, \"evicted\",",
          "content_same": false
        },
        {
          "line": 2843,
          "old_api": "atoi",
          "new_api": "fclose",
          "old_text": "atoi(buf)",
          "new_text": "fclose(fp)",
          "old_line_content": "    return atoi(buf);",
          "new_line_content": "    fclose(fp);",
          "content_same": false
        },
        {
          "line": 2857,
          "old_api": "getpid",
          "new_api": "fopen",
          "old_text": "getpid()",
          "new_text": "fopen(server.pidfile,\"w\")",
          "old_line_content": "        fprintf(fp,\"%d\\n\",(int)getpid());",
          "new_line_content": "    FILE *fp = fopen(server.pidfile,\"w\");",
          "content_same": false
        },
        {
          "line": 2873,
          "old_api": "dup2",
          "new_api": "open",
          "old_text": "dup2(fd, STDOUT_FILENO)",
          "new_text": "open(\"/dev/null\", O_RDWR, 0)",
          "old_line_content": "        dup2(fd, STDOUT_FILENO);",
          "new_line_content": "    if ((fd = open(\"/dev/null\", O_RDWR, 0)) != -1) {",
          "content_same": false
        },
        {
          "line": 2875,
          "old_api": "close",
          "new_api": "dup2",
          "old_text": "close(fd)",
          "new_text": "dup2(fd, STDOUT_FILENO)",
          "old_line_content": "        if (fd > STDERR_FILENO) close(fd);",
          "new_line_content": "        dup2(fd, STDOUT_FILENO);",
          "content_same": false
        },
        {
          "line": 2882,
          "old_api": "redisGitSHA1",
          "new_api": "printf",
          "old_text": "redisGitSHA1()",
          "new_text": "printf(\"Redis server v=%s sha=%s:%d malloc=%s bits=%d build=%llx\\n\",\n        REDIS_VERSION,\n        redisGitSHA1(),\n        atoi(redisGitDirty()) > 0,\n        ZMALLOC_LIB,\n        sizeof(long) == 4 ? 32 : 64,\n        (unsigned long long) redisBuildId())",
          "old_line_content": "        redisGitSHA1(),",
          "new_line_content": "    printf(\"Redis server v=%s sha=%s:%d malloc=%s bits=%d build=%llx\\n\",",
          "content_same": false
        },
        {
          "line": 2904,
          "old_api": "exit",
          "new_api": "fprintf",
          "old_text": "exit(1)",
          "new_text": "fprintf(stderr,\"Sentinel mode:\\n\")",
          "old_line_content": "    exit(1);",
          "new_line_content": "    fprintf(stderr,\"Sentinel mode:\\n\");",
          "content_same": false
        },
        {
          "line": 2917,
          "old_api": "redisGitSHA1",
          "new_api": "snprintf",
          "old_text": "redisGitSHA1()",
          "new_text": "snprintf(buf,1024*16,ascii_logo,\n        REDIS_VERSION,\n        redisGitSHA1(),\n        strtol(redisGitDirty(),NULL,10) > 0,\n        (sizeof(long) == 8) ? \"64\" : \"32\",\n        mode, server.port,\n        (long) getpid()\n    )",
          "old_line_content": "        redisGitSHA1(),",
          "new_line_content": "    snprintf(buf,1024*16,ascii_logo,",
          "content_same": false
        },
        {
          "line": 2923,
          "old_api": "redisLogRaw",
          "new_api": "getpid",
          "old_text": "redisLogRaw(REDIS_NOTICE|REDIS_LOG_RAW,buf)",
          "new_text": "getpid()",
          "old_line_content": "    redisLogRaw(REDIS_NOTICE|REDIS_LOG_RAW,buf);",
          "new_line_content": "        (long) getpid()",
          "content_same": false
        },
        {
          "line": 2930,
          "old_api": "redisLogFromHandler",
          "new_api": "REDIS_NOTUSED",
          "old_text": "redisLogFromHandler(REDIS_WARNING,\"Received SIGTERM, scheduling shutdown...\")",
          "new_text": "REDIS_NOTUSED(sig)",
          "old_line_content": "    redisLogFromHandler(REDIS_WARNING,\"Received SIGTERM, scheduling shutdown...\");",
          "new_line_content": "    REDIS_NOTUSED(sig);",
          "content_same": false
        },
        {
          "line": 2965,
          "old_api": "strcmp",
          "new_api": "strstr",
          "old_text": "strcmp(argv[j],\"--sentinel\")",
          "new_text": "strstr(argv[0],\"redis-sentinel\")",
          "old_line_content": "        if (!strcmp(argv[j],\"--sentinel\")) return 1;",
          "new_line_content": "    if (strstr(argv[0],\"redis-sentinel\") != NULL) return 1;",
          "content_same": false
        },
        {
          "line": 2973,
          "old_api": "loadAppendOnlyFile",
          "new_api": "ustime",
          "old_text": "loadAppendOnlyFile(server.aof_filename)",
          "new_text": "ustime()",
          "old_line_content": "        if (loadAppendOnlyFile(server.aof_filename) == REDIS_OK)",
          "new_line_content": "    long long start = ustime();",
          "content_same": false
        },
        {
          "line": 2976,
          "old_api": "rdbLoad",
          "new_api": "ustime",
          "old_text": "rdbLoad(server.rdb_filename)",
          "new_text": "ustime()",
          "old_line_content": "        if (rdbLoad(server.rdb_filename) == REDIS_OK) {",
          "new_line_content": "            redisLog(REDIS_NOTICE,\"DB loaded from append only file: %.3f seconds\",(float)(ustime()-start)/1000000);",
          "content_same": false
        },
        {
          "line": 2978,
          "old_api": "ustime",
          "new_api": "rdbLoad",
          "old_text": "ustime()",
          "new_text": "rdbLoad(server.rdb_filename)",
          "old_line_content": "                (float)(ustime()-start)/1000000);",
          "new_line_content": "        if (rdbLoad(server.rdb_filename) == REDIS_OK) {",
          "content_same": false
        },
        {
          "line": 2980,
          "old_api": "strerror",
          "new_api": "ustime",
          "old_text": "strerror(errno)",
          "new_text": "ustime()",
          "old_line_content": "            redisLog(REDIS_WARNING,\"Fatal error loading the DB: %s. Exiting.\",strerror(errno));",
          "new_line_content": "                (float)(ustime()-start)/1000000);",
          "content_same": false
        },
        {
          "line": 2989,
          "old_api": "redisPanic",
          "new_api": "redisLog",
          "old_text": "redisPanic(\"Redis aborting for OUT OF MEMORY\")",
          "new_text": "redisLog(REDIS_WARNING,\"Out Of Memory allocating %zu bytes!\",\n        allocation_size)",
          "old_line_content": "    redisPanic(\"Redis aborting for OUT OF MEMORY\");",
          "new_line_content": "    redisLog(REDIS_WARNING,\"Out Of Memory allocating %zu bytes!\",",
          "content_same": false
        },
        {
          "line": 3010,
          "old_api": "setlocale",
          "new_api": "spt_init",
          "old_text": "setlocale(LC_COLLATE,\"\")",
          "new_text": "spt_init(argc, argv)",
          "old_line_content": "    setlocale(LC_COLLATE,\"\");",
          "new_line_content": "    spt_init(argc, argv);",
          "content_same": false
        },
        {
          "line": 3012,
          "old_api": "zmalloc_set_oom_handler",
          "new_api": "setlocale",
          "old_text": "zmalloc_set_oom_handler(redisOutOfMemoryHandler)",
          "new_text": "setlocale(LC_COLLATE,\"\")",
          "old_line_content": "    zmalloc_set_oom_handler(redisOutOfMemoryHandler);",
          "new_line_content": "    setlocale(LC_COLLATE,\"\");",
          "content_same": false
        },
        {
          "line": 3013,
          "old_api": "getpid",
          "new_api": "zmalloc_enable_thread_safeness",
          "old_text": "getpid()",
          "new_text": "zmalloc_enable_thread_safeness()",
          "old_line_content": "    srand(time(NULL)^getpid());",
          "new_line_content": "    zmalloc_enable_thread_safeness();",
          "content_same": false
        },
        {
          "line": 3014,
          "old_api": "gettimeofday",
          "new_api": "zmalloc_set_oom_handler",
          "old_text": "gettimeofday(&tv,NULL)",
          "new_text": "zmalloc_set_oom_handler(redisOutOfMemoryHandler)",
          "old_line_content": "    gettimeofday(&tv,NULL);",
          "new_line_content": "    zmalloc_set_oom_handler(redisOutOfMemoryHandler);",
          "content_same": false
        },
        {
          "line": 3016,
          "old_api": "checkForSentinelMode",
          "new_api": "gettimeofday",
          "old_text": "checkForSentinelMode(argc,argv)",
          "new_text": "gettimeofday(&tv,NULL)",
          "old_line_content": "    server.sentinel_mode = checkForSentinelMode(argc,argv);",
          "new_line_content": "    gettimeofday(&tv,NULL);",
          "content_same": false
        },
        {
          "line": 3017,
          "old_api": "initServerConfig",
          "new_api": "getpid",
          "old_text": "initServerConfig()",
          "new_text": "getpid()",
          "old_line_content": "    initServerConfig();",
          "new_line_content": "    dictSetHashFunctionSeed(tv.tv_sec^tv.tv_usec^getpid());",
          "content_same": false
        },
        {
          "line": 3036,
          "old_api": "usage",
          "new_api": "version",
          "old_text": "usage()",
          "new_text": "version()",
          "old_line_content": "            strcmp(argv[1], \"-h\") == 0) usage();",
          "new_line_content": "            strcmp(argv[1], \"--version\") == 0) version();",
          "content_same": false
        },
        {
          "line": 3039,
          "old_api": "atoi",
          "new_api": "strcmp",
          "old_text": "atoi(argv[2])",
          "new_text": "strcmp(argv[1], \"--test-memory\")",
          "old_line_content": "                memtest(atoi(argv[2]),50);",
          "new_line_content": "        if (strcmp(argv[1], \"--test-memory\") == 0) {",
          "content_same": false
        },
        {
          "line": 3042,
          "old_api": "fprintf",
          "new_api": "exit",
          "old_text": "fprintf(stderr,\"Please specify the amount of memory to test in megabytes.\\n\")",
          "new_text": "exit(0)",
          "old_line_content": "                fprintf(stderr,\"Please specify the amount of memory to test in megabytes.\\n\");",
          "new_line_content": "                exit(0);",
          "content_same": false
        },
        {
          "line": 3044,
          "old_api": "exit",
          "new_api": "fprintf",
          "old_text": "exit(1)",
          "new_text": "fprintf(stderr,\"Please specify the amount of memory to test in megabytes.\\n\")",
          "old_line_content": "                exit(1);",
          "new_line_content": "                fprintf(stderr,\"Please specify the amount of memory to test in megabytes.\\n\");",
          "content_same": false
        },
        {
          "line": 3070,
          "old_api": "sdsfree",
          "new_api": "resetServerSaveParams",
          "old_text": "sdsfree(options)",
          "new_text": "resetServerSaveParams()",
          "old_line_content": "        sdsfree(options);",
          "new_line_content": "        resetServerSaveParams();",
          "content_same": false
        },
        {
          "line": 3071,
          "old_api": "getAbsolutePath",
          "new_api": "loadServerConfig",
          "old_text": "getAbsolutePath(configfile)",
          "new_text": "loadServerConfig(configfile,options)",
          "old_line_content": "        if (configfile) server.configfile = getAbsolutePath(configfile);",
          "new_line_content": "        loadServerConfig(configfile,options);",
          "content_same": false
        },
        {
          "line": 3073,
          "old_api": "redisLog",
          "new_api": "getAbsolutePath",
          "old_text": "redisLog(REDIS_WARNING, \"Warning: no config file specified, using the default config. In order to specify a config file use %s /path/to/%s.conf\", argv[0], server.sentinel_mode ? \"sentinel\" : \"redis\")",
          "new_text": "getAbsolutePath(configfile)",
          "old_line_content": "        redisLog(REDIS_WARNING, \"Warning: no config file specified, using the default config. In order to specify a config file use %s /path/to/%s.conf\", argv[0], server.sentinel_mode ? \"sentinel\" : \"redis\");",
          "new_line_content": "        if (configfile) server.configfile = getAbsolutePath(configfile);",
          "content_same": false
        },
        {
          "line": 3075,
          "old_api": "daemonize",
          "new_api": "redisLog",
          "old_text": "daemonize()",
          "new_text": "redisLog(REDIS_WARNING, \"Warning: no config file specified, using the default config. In order to specify a config file use %s /path/to/%s.conf\", argv[0], server.sentinel_mode ? \"sentinel\" : \"redis\")",
          "old_line_content": "    if (server.daemonize) daemonize();",
          "new_line_content": "        redisLog(REDIS_WARNING, \"Warning: no config file specified, using the default config. In order to specify a config file use %s /path/to/%s.conf\", argv[0], server.sentinel_mode ? \"sentinel\" : \"redis\");",
          "content_same": false
        },
        {
          "line": 3077,
          "old_api": "createPidFile",
          "new_api": "daemonize",
          "old_text": "createPidFile()",
          "new_text": "daemonize()",
          "old_line_content": "    if (server.daemonize) createPidFile();",
          "new_line_content": "    if (server.daemonize) daemonize();",
          "content_same": false
        },
        {
          "line": 3078,
          "old_api": "redisSetProcTitle",
          "new_api": "initServer",
          "old_text": "redisSetProcTitle(argv[0])",
          "new_text": "initServer()",
          "old_line_content": "    redisSetProcTitle(argv[0]);",
          "new_line_content": "    initServer();",
          "content_same": false
        },
        {
          "line": 3079,
          "old_api": "redisAsciiArt",
          "new_api": "createPidFile",
          "old_text": "redisAsciiArt()",
          "new_text": "createPidFile()",
          "old_line_content": "    redisAsciiArt();",
          "new_line_content": "    if (server.daemonize) createPidFile();",
          "content_same": false
        },
        {
          "line": 3085,
          "old_api": "linuxOvercommitMemoryWarning",
          "new_api": "redisLog",
          "old_text": "linuxOvercommitMemoryWarning()",
          "new_text": "redisLog(REDIS_WARNING,\"Server started, Redis version \" REDIS_VERSION)",
          "old_line_content": "        linuxOvercommitMemoryWarning();",
          "new_line_content": "        redisLog(REDIS_WARNING,\"Server started, Redis version \" REDIS_VERSION);",
          "content_same": false
        },
        {
          "line": 3087,
          "old_api": "loadDataFromDisk",
          "new_api": "linuxOvercommitMemoryWarning",
          "old_text": "loadDataFromDisk()",
          "new_text": "linuxOvercommitMemoryWarning()",
          "old_line_content": "        loadDataFromDisk();",
          "new_line_content": "        linuxOvercommitMemoryWarning();",
          "content_same": false
        },
        {
          "line": 3089,
          "old_api": "verifyClusterConfigWithData",
          "new_api": "loadDataFromDisk",
          "old_text": "verifyClusterConfigWithData()",
          "new_text": "loadDataFromDisk()",
          "old_line_content": "            if (verifyClusterConfigWithData() == REDIS_ERR) {",
          "new_line_content": "        loadDataFromDisk();",
          "content_same": false
        },
        {
          "line": 3109,
          "old_api": "aeDeleteEventLoop",
          "new_api": "aeSetBeforeSleepProc",
          "old_text": "aeDeleteEventLoop(server.el)",
          "new_text": "aeSetBeforeSleepProc(server.el,beforeSleep)",
          "old_line_content": "    aeDeleteEventLoop(server.el);",
          "new_line_content": "    aeSetBeforeSleepProc(server.el,beforeSleep);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 3072,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(options)",
          "old_line_content": "    } else {",
          "new_line_content": "        sdsfree(options);",
          "content_same": false
        },
        {
          "line": 1538,
          "old_api": null,
          "new_api": "signal",
          "old_text": null,
          "new_text": "signal(SIGPIPE, SIG_IGN)",
          "old_line_content": "",
          "new_line_content": "    signal(SIGPIPE, SIG_IGN);",
          "content_same": false
        },
        {
          "line": 1539,
          "old_api": null,
          "new_api": "setupSignalHandlers",
          "old_text": null,
          "new_text": "setupSignalHandlers()",
          "old_line_content": "    if (server.syslog_enabled) {",
          "new_line_content": "    setupSignalHandlers();",
          "content_same": false
        },
        {
          "line": 2054,
          "old_api": null,
          "new_api": "tolower",
          "old_text": null,
          "new_text": "tolower(((char*)c->argv[1]->ptr)[0])",
          "old_line_content": "          c->argc == 2 &&",
          "new_line_content": "          tolower(((char*)c->argv[1]->ptr)[0]) == 'n') &&",
          "content_same": false
        },
        {
          "line": 1542,
          "old_api": null,
          "new_api": "openlog",
          "old_text": null,
          "new_text": "openlog(server.syslog_ident, LOG_PID | LOG_NDELAY | LOG_NOWAIT,\n            server.syslog_facility)",
          "old_line_content": "    }",
          "new_line_content": "        openlog(server.syslog_ident, LOG_PID | LOG_NDELAY | LOG_NOWAIT,",
          "content_same": false
        },
        {
          "line": 2568,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n                    \"slave%d:ip=%s,port=%d,state=%s,\"\n                    \"offset=%lld,lag=%ld\\r\\n\",\n                    slaveid,ip,slave->slave_listening_port,state,\n                    slave->repl_ack_off, lag)",
          "old_line_content": "                    \"offset=%lld,lag=%ld\\r\\n\",",
          "new_line_content": "                info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 3080,
          "old_api": null,
          "new_api": "redisSetProcTitle",
          "old_text": null,
          "new_text": "redisSetProcTitle(argv[0])",
          "old_line_content": "",
          "new_line_content": "    redisSetProcTitle(argv[0]);",
          "content_same": false
        },
        {
          "line": 3081,
          "old_api": null,
          "new_api": "redisAsciiArt",
          "old_text": null,
          "new_text": "redisAsciiArt()",
          "old_line_content": "    if (!server.sentinel_mode) {",
          "new_line_content": "    redisAsciiArt();",
          "content_same": false
        },
        {
          "line": 2059,
          "old_api": null,
          "new_api": "flagTransaction",
          "old_text": null,
          "new_text": "flagTransaction(c)",
          "old_line_content": "        return REDIS_OK;",
          "new_line_content": "        flagTransaction(c);",
          "content_same": false
        },
        {
          "line": 2060,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c, shared.slowscripterr)",
          "old_line_content": "    }",
          "new_line_content": "        addReply(c, shared.slowscripterr);",
          "content_same": false
        },
        {
          "line": 1549,
          "old_api": null,
          "new_api": "listCreate",
          "old_text": null,
          "new_text": "listCreate()",
          "old_line_content": "    server.slaveseldb = -1; /* Force to emit the first SELECT command. */",
          "new_line_content": "    server.slaves = listCreate();",
          "content_same": false
        },
        {
          "line": 2576,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n            \"master_repl_offset:%lld\\r\\n\"\n            \"repl_backlog_active:%d\\r\\n\"\n            \"repl_backlog_size:%lld\\r\\n\"\n            \"repl_backlog_first_byte_offset:%lld\\r\\n\"\n            \"repl_backlog_histlen:%lld\\r\\n\",\n            server.master_repl_offset,\n            server.repl_backlog != NULL,\n            server.repl_backlog_size,\n            server.repl_backlog_off,\n            server.repl_backlog_histlen)",
          "old_line_content": "            \"repl_backlog_active:%d\\r\\n\"",
          "new_line_content": "        info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 1552,
          "old_api": null,
          "new_api": "listCreate",
          "old_text": null,
          "new_text": "listCreate()",
          "old_line_content": "",
          "new_line_content": "    server.unblocked_clients = listCreate();",
          "content_same": false
        },
        {
          "line": 3091,
          "old_api": null,
          "new_api": "verifyClusterConfigWithData",
          "old_text": null,
          "new_text": "verifyClusterConfigWithData()",
          "old_line_content": "                    \"You can't have keys in a DB different than DB 0 when in \"",
          "new_line_content": "            if (verifyClusterConfigWithData() == REDIS_ERR) {",
          "content_same": false
        },
        {
          "line": 3092,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\n                    \"You can't have keys in a DB different than DB 0 when in \"\n                    \"Cluster mode. Exiting.\")",
          "old_line_content": "                    \"Cluster mode. Exiting.\");",
          "new_line_content": "                redisLog(REDIS_WARNING,",
          "content_same": false
        },
        {
          "line": 2069,
          "old_api": null,
          "new_api": "queueMultiCommand",
          "old_text": null,
          "new_text": "queueMultiCommand(c)",
          "old_line_content": "    } else {",
          "new_line_content": "        queueMultiCommand(c);",
          "content_same": false
        },
        {
          "line": 1557,
          "old_api": null,
          "new_api": "aeCreateEventLoop",
          "old_text": null,
          "new_text": "aeCreateEventLoop(server.maxclients+REDIS_EVENTLOOP_FDSET_INCR)",
          "old_line_content": "",
          "new_line_content": "    server.el = aeCreateEventLoop(server.maxclients+REDIS_EVENTLOOP_FDSET_INCR);",
          "content_same": false
        },
        {
          "line": 3095,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "        }",
          "new_line_content": "                exit(1);",
          "content_same": false
        },
        {
          "line": 1558,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(redisDb)*server.dbnum)",
          "old_line_content": "    /* Open the TCP listening socket for the user commands. */",
          "new_line_content": "    server.db = zmalloc(sizeof(redisDb)*server.dbnum);",
          "content_same": false
        },
        {
          "line": 2073,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.ready_keys)",
          "old_line_content": "    }",
          "new_line_content": "        if (listLength(server.ready_keys))",
          "content_same": false
        },
        {
          "line": 2074,
          "old_api": null,
          "new_api": "handleClientsBlockedOnLists",
          "old_text": null,
          "new_text": "handleClientsBlockedOnLists()",
          "old_line_content": "    return REDIS_OK;",
          "new_line_content": "            handleClientsBlockedOnLists();",
          "content_same": false
        },
        {
          "line": 1561,
          "old_api": null,
          "new_api": "listenToPort",
          "old_text": null,
          "new_text": "listenToPort(server.port,server.ipfd,&server.ipfd_count)",
          "old_line_content": "",
          "new_line_content": "    if (listenToPort(server.port,server.ipfd,&server.ipfd_count) == REDIS_ERR)",
          "content_same": false
        },
        {
          "line": 1562,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "    /* Open the listening Unix domain socket. */",
          "new_line_content": "        exit(1);",
          "content_same": false
        },
        {
          "line": 3101,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_NOTICE,\"The server is now ready to accept connections at %s\", server.unixsocket)",
          "old_line_content": "",
          "new_line_content": "            redisLog(REDIS_NOTICE,\"The server is now ready to accept connections at %s\", server.unixsocket);",
          "content_same": false
        },
        {
          "line": 1566,
          "old_api": null,
          "new_api": "unlink",
          "old_text": null,
          "new_text": "unlink(server.unixsocket)",
          "old_line_content": "        if (server.sofd == ANET_ERR) {",
          "new_line_content": "        unlink(server.unixsocket); /* don't care if this fails */",
          "content_same": false
        },
        {
          "line": 2591,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(info,\"\\r\\n\")",
          "old_line_content": "        \"# CPU\\r\\n\"",
          "new_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 2592,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n        \"# CPU\\r\\n\"\n        \"used_cpu_sys:%.2f\\r\\n\"\n        \"used_cpu_user:%.2f\\r\\n\"\n        \"used_cpu_sys_children:%.2f\\r\\n\"\n        \"used_cpu_user_children:%.2f\\r\\n\",\n        (float)self_ru.ru_stime.tv_sec+(float)self_ru.ru_stime.tv_usec/1000000,\n        (float)self_ru.ru_utime.tv_sec+(float)self_ru.ru_utime.tv_usec/1000000,\n        (float)c_ru.ru_stime.tv_sec+(float)c_ru.ru_stime.tv_usec/1000000,\n        (float)c_ru.ru_utime.tv_sec+(float)c_ru.ru_utime.tv_usec/1000000)",
          "old_line_content": "        \"used_cpu_sys:%.2f\\r\\n\"",
          "new_line_content": "        info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 1569,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING, \"Opening socket: %s\", server.neterr)",
          "old_line_content": "        }",
          "new_line_content": "            redisLog(REDIS_WARNING, \"Opening socket: %s\", server.neterr);",
          "content_same": false
        },
        {
          "line": 3106,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"WARNING: You specified a maxmemory value that is less than 1MB (current value is %llu bytes). Are you sure this is what you really want?\", server.maxmemory)",
          "old_line_content": "",
          "new_line_content": "        redisLog(REDIS_WARNING,\"WARNING: You specified a maxmemory value that is less than 1MB (current value is %llu bytes). Are you sure this is what you really want?\", server.maxmemory);",
          "content_same": false
        },
        {
          "line": 1570,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "    }",
          "new_line_content": "            exit(1);",
          "content_same": false
        },
        {
          "line": 2086,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(server.ipfd[j])",
          "old_line_content": "    if (server.cluster_enabled)",
          "new_line_content": "    for (j = 0; j < server.ipfd_count; j++) close(server.ipfd[j]);",
          "content_same": false
        },
        {
          "line": 3110,
          "old_api": null,
          "new_api": "aeMain",
          "old_text": null,
          "new_text": "aeMain(server.el)",
          "old_line_content": "    return 0;",
          "new_line_content": "    aeMain(server.el);",
          "content_same": false
        },
        {
          "line": 3111,
          "old_api": null,
          "new_api": "aeDeleteEventLoop",
          "old_text": null,
          "new_text": "aeDeleteEventLoop(server.el)",
          "old_line_content": "}",
          "new_line_content": "    aeDeleteEventLoop(server.el);",
          "content_same": false
        },
        {
          "line": 1576,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING, \"Configured to not listen anywhere, exiting.\")",
          "old_line_content": "    }",
          "new_line_content": "        redisLog(REDIS_WARNING, \"Configured to not listen anywhere, exiting.\");",
          "content_same": false
        },
        {
          "line": 1577,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "",
          "new_line_content": "        exit(1);",
          "content_same": false
        },
        {
          "line": 2091,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_NOTICE,\"Removing the unix socket file.\")",
          "old_line_content": "    }",
          "new_line_content": "        redisLog(REDIS_NOTICE,\"Removing the unix socket file.\");",
          "content_same": false
        },
        {
          "line": 2092,
          "old_api": null,
          "new_api": "unlink",
          "old_text": null,
          "new_text": "unlink(server.unixsocket)",
          "old_line_content": "}",
          "new_line_content": "        unlink(server.unixsocket); /* don't care if this fails */",
          "content_same": false
        },
        {
          "line": 2606,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(info,\"\\r\\n\")",
          "old_line_content": "        numcommands = sizeof(redisCommandTable)/sizeof(struct redisCommand);",
          "new_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 2607,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info, \"# Commandstats\\r\\n\")",
          "old_line_content": "        for (j = 0; j < numcommands; j++) {",
          "new_line_content": "        info = sdscatprintf(info, \"# Commandstats\\r\\n\");",
          "content_same": false
        },
        {
          "line": 1585,
          "old_api": null,
          "new_api": "dictCreate",
          "old_text": null,
          "new_text": "dictCreate(&setDictType,NULL)",
          "old_line_content": "        server.db[j].id = j;",
          "new_line_content": "        server.db[j].ready_keys = dictCreate(&setDictType,NULL);",
          "content_same": false
        },
        {
          "line": 1586,
          "old_api": null,
          "new_api": "dictCreate",
          "old_text": null,
          "new_text": "dictCreate(&keylistDictType,NULL)",
          "old_line_content": "        server.db[j].avg_ttl = 0;",
          "new_line_content": "        server.db[j].watched_keys = dictCreate(&keylistDictType,NULL);",
          "content_same": false
        },
        {
          "line": 2100,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"User requested shutdown...\")",
          "old_line_content": "       We want to avoid race conditions, for instance our saving child may",
          "new_line_content": "    redisLog(REDIS_WARNING,\"User requested shutdown...\");",
          "content_same": false
        },
        {
          "line": 2613,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n                \"cmdstat_%s:calls=%lld,usec=%lld,usec_per_call=%.2f\\r\\n\",\n                c->name, c->calls, c->microseconds,\n                (c->calls == 0) ? 0 : ((float)c->microseconds/c->calls))",
          "old_line_content": "                c->name, c->calls, c->microseconds,",
          "new_line_content": "            info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 1592,
          "old_api": null,
          "new_api": "listSetFreeMethod",
          "old_text": null,
          "new_text": "listSetFreeMethod(server.pubsub_patterns,freePubsubPattern)",
          "old_line_content": "    server.cronloops = 0;",
          "new_line_content": "    listSetFreeMethod(server.pubsub_patterns,freePubsubPattern);",
          "content_same": false
        },
        {
          "line": 1593,
          "old_api": null,
          "new_api": "listSetMatchMethod",
          "old_text": null,
          "new_text": "listSetMatchMethod(server.pubsub_patterns,listMatchPubsubPattern)",
          "old_line_content": "    server.rdb_child_pid = -1;",
          "new_line_content": "    listSetMatchMethod(server.pubsub_patterns,listMatchPubsubPattern);",
          "content_same": false
        },
        {
          "line": 2106,
          "old_api": null,
          "new_api": "kill",
          "old_text": null,
          "new_text": "kill(server.rdb_child_pid,SIGUSR1)",
          "old_line_content": "    }",
          "new_line_content": "        kill(server.rdb_child_pid,SIGUSR1);",
          "content_same": false
        },
        {
          "line": 2107,
          "old_api": null,
          "new_api": "rdbRemoveTempFile",
          "old_text": null,
          "new_text": "rdbRemoveTempFile(server.rdb_child_pid)",
          "old_line_content": "    if (server.aof_state != REDIS_AOF_OFF) {",
          "new_line_content": "        rdbRemoveTempFile(server.rdb_child_pid);",
          "content_same": false
        },
        {
          "line": 2622,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(info,\"\\r\\n\")",
          "old_line_content": "        \"# Cluster\\r\\n\"",
          "new_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 2623,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n        \"# Cluster\\r\\n\"\n        \"cluster_enabled:%d\\r\\n\",\n        server.cluster_enabled)",
          "old_line_content": "        \"cluster_enabled:%d\\r\\n\",",
          "new_line_content": "        info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 1598,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "    server.lastbgsave_try = 0;    /* At startup we never tried to BGSAVE. */",
          "new_line_content": "    server.aof_buf = sdsempty();",
          "content_same": false
        },
        {
          "line": 1599,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "    server.rdb_save_time_last = -1;",
          "new_line_content": "    server.lastsave = time(NULL); /* At startup we consider the DB saved. */",
          "content_same": false
        },
        {
          "line": 2115,
          "old_api": null,
          "new_api": "kill",
          "old_text": null,
          "new_text": "kill(server.aof_child_pid,SIGUSR1)",
          "old_line_content": "        /* Append only file: fsync() the AOF and exit */",
          "new_line_content": "            kill(server.aof_child_pid,SIGUSR1);",
          "content_same": false
        },
        {
          "line": 2118,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_NOTICE,\"Calling fsync() on the AOF file.\")",
          "old_line_content": "    }",
          "new_line_content": "        redisLog(REDIS_NOTICE,\"Calling fsync() on the AOF file.\");",
          "content_same": false
        },
        {
          "line": 2119,
          "old_api": null,
          "new_api": "aof_fsync",
          "old_text": null,
          "new_text": "aof_fsync(server.aof_fd)",
          "old_line_content": "    if ((server.saveparamslen > 0 && !nosave) || save) {",
          "new_line_content": "        aof_fsync(server.aof_fd);",
          "content_same": false
        },
        {
          "line": 2631,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(info,\"\\r\\n\")",
          "old_line_content": "        for (j = 0; j < server.dbnum; j++) {",
          "new_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 2632,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info, \"# Keyspace\\r\\n\")",
          "old_line_content": "            long long keys, vkeys;",
          "new_line_content": "        info = sdscatprintf(info, \"# Keyspace\\r\\n\");",
          "content_same": false
        },
        {
          "line": 1608,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "    server.stat_keyspace_hits = 0;",
          "new_line_content": "    server.stat_starttime = time(NULL);",
          "content_same": false
        },
        {
          "line": 2124,
          "old_api": null,
          "new_api": "rdbSave",
          "old_text": null,
          "new_text": "rdbSave(server.rdb_filename)",
          "old_line_content": "             * operating. Note that if there was a background saving process,",
          "new_line_content": "        if (rdbSave(server.rdb_filename) != REDIS_OK) {",
          "content_same": false
        },
        {
          "line": 2636,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(server.db[j].dict)",
          "old_line_content": "            if (keys || vkeys) {",
          "new_line_content": "            keys = dictSize(server.db[j].dict);",
          "content_same": false
        },
        {
          "line": 2639,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n                    \"db%d:keys=%lld,expires=%lld,avg_ttl=%lld\\r\\n\",\n                    j, keys, vkeys, server.db[j].avg_ttl)",
          "old_line_content": "                    j, keys, vkeys, server.db[j].avg_ttl);",
          "new_line_content": "                info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 2130,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"Error trying to save the DB, can't exit.\")",
          "old_line_content": "        }",
          "new_line_content": "            redisLog(REDIS_WARNING,\"Error trying to save the DB, can't exit.\");",
          "content_same": false
        },
        {
          "line": 1621,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "    server.lastbgsave_status = REDIS_OK;",
          "new_line_content": "    server.unixtime = time(NULL);",
          "content_same": false
        },
        {
          "line": 1622,
          "old_api": null,
          "new_api": "mstime",
          "old_text": null,
          "new_text": "mstime()",
          "old_line_content": "    server.repl_good_slaves_count = 0;",
          "new_line_content": "    server.mstime = mstime();",
          "content_same": false
        },
        {
          "line": 2135,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_NOTICE,\"Removing the pid file.\")",
          "old_line_content": "    }",
          "new_line_content": "        redisLog(REDIS_NOTICE,\"Removing the pid file.\");",
          "content_same": false
        },
        {
          "line": 2136,
          "old_api": null,
          "new_api": "unlink",
          "old_text": null,
          "new_text": "unlink(server.pidfile)",
          "old_line_content": "    /* Close the listening sockets. Apparently this allows faster restarts. */",
          "new_line_content": "        unlink(server.pidfile);",
          "content_same": false
        },
        {
          "line": 2139,
          "old_api": null,
          "new_api": "closeListeningSockets",
          "old_text": null,
          "new_text": "closeListeningSockets(1)",
          "old_line_content": "    return REDIS_OK;",
          "new_line_content": "    closeListeningSockets(1);",
          "content_same": false
        },
        {
          "line": 2140,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"Redis is now ready to exit, bye bye...\")",
          "old_line_content": "}",
          "new_line_content": "    redisLog(REDIS_WARNING,\"Redis is now ready to exit, bye bye...\");",
          "content_same": false
        },
        {
          "line": 2652,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.syntaxerr)",
          "old_line_content": "    }",
          "new_line_content": "        addReply(c,shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 1629,
          "old_api": null,
          "new_api": "redisPanic",
          "old_text": null,
          "new_text": "redisPanic(\"Can't create the serverCron time event.\")",
          "old_line_content": "    }",
          "new_line_content": "        redisPanic(\"Can't create the serverCron time event.\");",
          "content_same": false
        },
        {
          "line": 1630,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "",
          "new_line_content": "        exit(1);",
          "content_same": false
        },
        {
          "line": 2658,
          "old_api": null,
          "new_api": "addReplySds",
          "old_text": null,
          "new_text": "addReplySds(c,info)",
          "old_line_content": "}",
          "new_line_content": "    addReplySds(c,info);",
          "content_same": false
        },
        {
          "line": 2659,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.crlf)",
          "old_line_content": "",
          "new_line_content": "    addReply(c,shared.crlf);",
          "content_same": false
        },
        {
          "line": 1636,
          "old_api": null,
          "new_api": "aeCreateFileEvent",
          "old_text": null,
          "new_text": "aeCreateFileEvent(server.el, server.ipfd[j], AE_READABLE,\n            acceptTcpHandler,NULL)",
          "old_line_content": "            {",
          "new_line_content": "        if (aeCreateFileEvent(server.el, server.ipfd[j], AE_READABLE,",
          "content_same": false
        },
        {
          "line": 1639,
          "old_api": null,
          "new_api": "redisPanic",
          "old_text": null,
          "new_text": "redisPanic(\n                    \"Unrecoverable error creating server.ipfd file event.\")",
          "old_line_content": "            }",
          "new_line_content": "                redisPanic(",
          "content_same": false
        },
        {
          "line": 2667,
          "old_api": null,
          "new_api": "listAddNodeTail",
          "old_text": null,
          "new_text": "listAddNodeTail(server.monitors,c)",
          "old_line_content": "}",
          "new_line_content": "    listAddNodeTail(server.monitors,c);",
          "content_same": false
        },
        {
          "line": 2668,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "",
          "new_line_content": "    addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 1643,
          "old_api": null,
          "new_api": "aeCreateFileEvent",
          "old_text": null,
          "new_text": "aeCreateFileEvent(server.el,server.sofd,AE_READABLE,\n        acceptUnixHandler,NULL)",
          "old_line_content": "",
          "new_line_content": "    if (server.sofd > 0 && aeCreateFileEvent(server.el,server.sofd,AE_READABLE,",
          "content_same": false
        },
        {
          "line": 1644,
          "old_api": null,
          "new_api": "redisPanic",
          "old_text": null,
          "new_text": "redisPanic(\"Unrecoverable error creating server.sofd file event.\")",
          "old_line_content": "    /* Open the AOF file if needed. */",
          "new_line_content": "        acceptUnixHandler,NULL) == AE_ERR) redisPanic(\"Unrecoverable error creating server.sofd file event.\");",
          "content_same": false
        },
        {
          "line": 1648,
          "old_api": null,
          "new_api": "open",
          "old_text": null,
          "new_text": "open(server.aof_filename,\n                               O_WRONLY|O_APPEND|O_CREAT,0644)",
          "old_line_content": "        if (server.aof_fd == -1) {",
          "new_line_content": "        server.aof_fd = open(server.aof_filename,",
          "content_same": false
        },
        {
          "line": 2161,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(a)",
          "old_line_content": "    int j;",
          "new_line_content": "    int alen = strlen(a);",
          "content_same": false
        },
        {
          "line": 2162,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(b)",
          "old_line_content": "    int diff = 0;",
          "new_line_content": "    int blen = strlen(b);",
          "content_same": false
        },
        {
          "line": 1652,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "        }",
          "new_line_content": "                strerror(errno));",
          "content_same": false
        },
        {
          "line": 1653,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "    }",
          "new_line_content": "            exit(1);",
          "content_same": false
        },
        {
          "line": 2171,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(bufa,0,sizeof(bufa))",
          "old_line_content": "    /* Again the time of the following two copies is proportional to",
          "new_line_content": "    memset(bufa,0,sizeof(bufa));        /* Constant time. */",
          "content_same": false
        },
        {
          "line": 2172,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(bufb,0,sizeof(bufb))",
          "old_line_content": "     * len(a) + len(b) so no info is leaked. */",
          "new_line_content": "    memset(bufb,0,sizeof(bufb));        /* Constant time. */",
          "content_same": false
        },
        {
          "line": 1662,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"Warning: 32 bit instance detected but no memory limit set. Setting 3 GB maxmemory limit with 'noeviction' policy now.\")",
          "old_line_content": "        server.maxmemory_policy = REDIS_MAXMEMORY_NO_EVICTION;",
          "new_line_content": "        redisLog(REDIS_WARNING,\"Warning: 32 bit instance detected but no memory limit set. Setting 3 GB maxmemory limit with 'noeviction' policy now.\");",
          "content_same": false
        },
        {
          "line": 2175,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(bufa,a,alen)",
          "old_line_content": "",
          "new_line_content": "    memcpy(bufa,a,alen);",
          "content_same": false
        },
        {
          "line": 2176,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(bufb,b,blen)",
          "old_line_content": "    /* Always compare all the chars in the two buffers without",
          "new_line_content": "    memcpy(bufb,b,blen);",
          "content_same": false
        },
        {
          "line": 2690,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.slaves)",
          "old_line_content": "    /* Remove the size of slaves output buffers and AOF buffer from the",
          "new_line_content": "    int slaves = listLength(server.slaves);",
          "content_same": false
        },
        {
          "line": 2694,
          "old_api": null,
          "new_api": "zmalloc_used_memory",
          "old_text": null,
          "new_text": "zmalloc_used_memory()",
          "old_line_content": "        listIter li;",
          "new_line_content": "    mem_used = zmalloc_used_memory();",
          "content_same": false
        },
        {
          "line": 1670,
          "old_api": null,
          "new_api": "slowlogInit",
          "old_text": null,
          "new_text": "slowlogInit()",
          "old_line_content": "}",
          "new_line_content": "    slowlogInit();",
          "content_same": false
        },
        {
          "line": 1671,
          "old_api": null,
          "new_api": "bioInit",
          "old_text": null,
          "new_text": "bioInit()",
          "old_line_content": "",
          "new_line_content": "    bioInit();",
          "content_same": false
        },
        {
          "line": 2701,
          "old_api": null,
          "new_api": "listNodeValue",
          "old_text": null,
          "new_text": "listNodeValue(ln)",
          "old_line_content": "            if (obuf_bytes > mem_used)",
          "new_line_content": "            redisClient *slave = listNodeValue(ln);",
          "content_same": false
        },
        {
          "line": 2190,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"Client sent AUTH, but no password is set\")",
          "old_line_content": "      c->authenticated = 1;",
          "new_line_content": "        addReplyError(c,\"Client sent AUTH, but no password is set\");",
          "content_same": false
        },
        {
          "line": 2702,
          "old_api": null,
          "new_api": "getClientOutputBufferMemoryUsage",
          "old_text": null,
          "new_text": "getClientOutputBufferMemoryUsage(slave)",
          "old_line_content": "                mem_used = 0;",
          "new_line_content": "            unsigned long obuf_bytes = getClientOutputBufferMemoryUsage(slave);",
          "content_same": false
        },
        {
          "line": 2193,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "      c->authenticated = 0;",
          "new_line_content": "      addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 2196,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"invalid password\")",
          "old_line_content": "}",
          "new_line_content": "      addReplyError(c,\"invalid password\");",
          "content_same": false
        },
        {
          "line": 2710,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(server.aof_buf)",
          "old_line_content": "    }",
          "new_line_content": "        mem_used -= sdslen(server.aof_buf);",
          "content_same": false
        },
        {
          "line": 2711,
          "old_api": null,
          "new_api": "aofRewriteBufferSize",
          "old_text": null,
          "new_text": "aofRewriteBufferSize()",
          "old_line_content": "",
          "new_line_content": "        mem_used -= aofRewriteBufferSize();",
          "content_same": false
        },
        {
          "line": 2201,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.pong)",
          "old_line_content": "",
          "new_line_content": "    addReply(c,shared.pong);",
          "content_same": false
        },
        {
          "line": 2205,
          "old_api": null,
          "new_api": "addReplyBulk",
          "old_text": null,
          "new_text": "addReplyBulk(c,c->argv[1])",
          "old_line_content": "",
          "new_line_content": "    addReplyBulk(c,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 1186,
          "old_api": null,
          "new_api": "activeExpireCycle",
          "old_text": null,
          "new_text": "activeExpireCycle(ACTIVE_EXPIRE_CYCLE_FAST)",
          "old_line_content": "    /* Try to process pending commands for clients that were just unblocked. */",
          "new_line_content": "        activeExpireCycle(ACTIVE_EXPIRE_CYCLE_FAST);",
          "content_same": false
        },
        {
          "line": 1699,
          "old_api": null,
          "new_api": "redisPanic",
          "old_text": null,
          "new_text": "redisPanic(\"Unsupported command flag\")",
          "old_line_content": "            f++;",
          "new_line_content": "            default: redisPanic(\"Unsupported command flag\"); break;",
          "content_same": false
        },
        {
          "line": 1190,
          "old_api": null,
          "new_api": "listFirst",
          "old_text": null,
          "new_text": "listFirst(server.unblocked_clients)",
          "old_line_content": "        c = ln->value;",
          "new_line_content": "        ln = listFirst(server.unblocked_clients);",
          "content_same": false
        },
        {
          "line": 2215,
          "old_api": null,
          "new_api": "addReplyBulkLongLong",
          "old_text": null,
          "new_text": "addReplyBulkLongLong(c,tv.tv_sec)",
          "old_line_content": "}",
          "new_line_content": "    addReplyBulkLongLong(c,tv.tv_sec);",
          "content_same": false
        },
        {
          "line": 2216,
          "old_api": null,
          "new_api": "addReplyBulkLongLong",
          "old_text": null,
          "new_text": "addReplyBulkLongLong(c,tv.tv_usec)",
          "old_line_content": "",
          "new_line_content": "    addReplyBulkLongLong(c,tv.tv_usec);",
          "content_same": false
        },
        {
          "line": 1193,
          "old_api": null,
          "new_api": "listDelNode",
          "old_text": null,
          "new_text": "listDelNode(server.unblocked_clients,ln)",
          "old_line_content": "",
          "new_line_content": "        listDelNode(server.unblocked_clients,ln);",
          "content_same": false
        },
        {
          "line": 1704,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(c->name)",
          "old_line_content": "         * by rename-command statements in redis.conf. */",
          "new_line_content": "        retval1 = dictAdd(server.commands, sdsnew(c->name), c);",
          "content_same": false
        },
        {
          "line": 1707,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(c->name)",
          "old_line_content": "    }",
          "new_line_content": "        retval2 = dictAdd(server.orig_commands, sdsnew(c->name), c);",
          "content_same": false
        },
        {
          "line": 1708,
          "old_api": null,
          "new_api": "redisAssert",
          "old_text": null,
          "new_text": "redisAssert(retval1 == DICT_OK && retval2 == DICT_OK)",
          "old_line_content": "}",
          "new_line_content": "        redisAssert(retval1 == DICT_OK && retval2 == DICT_OK);",
          "content_same": false
        },
        {
          "line": 1199,
          "old_api": null,
          "new_api": "processInputBuffer",
          "old_text": null,
          "new_text": "processInputBuffer(c)",
          "old_line_content": "        }",
          "new_line_content": "            processInputBuffer(c);",
          "content_same": false
        },
        {
          "line": 2226,
          "old_api": null,
          "new_api": "sprintf",
          "old_text": null,
          "new_text": "sprintf(s,\"%lluB\",n)",
          "old_line_content": "    } else if (n < (1024*1024)) {",
          "new_line_content": "        sprintf(s,\"%lluB\",n);",
          "content_same": false
        },
        {
          "line": 2740,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(dict)",
          "old_line_content": "            /* volatile-random and allkeys-random policy */",
          "new_line_content": "            if (dictSize(dict) == 0) continue;",
          "content_same": false
        },
        {
          "line": 1205,
          "old_api": null,
          "new_api": "flushAppendOnlyFile",
          "old_text": null,
          "new_text": "flushAppendOnlyFile(0)",
          "old_line_content": "",
          "new_line_content": "    flushAppendOnlyFile(0);",
          "content_same": false
        },
        {
          "line": 2230,
          "old_api": null,
          "new_api": "sprintf",
          "old_text": null,
          "new_text": "sprintf(s,\"%.2fK\",d)",
          "old_line_content": "        d = (double)n/(1024*1024);",
          "new_line_content": "        sprintf(s,\"%.2fK\",d);",
          "content_same": false
        },
        {
          "line": 2233,
          "old_api": null,
          "new_api": "sprintf",
          "old_text": null,
          "new_text": "sprintf(s,\"%.2fM\",d)",
          "old_line_content": "        d = (double)n/(1024LL*1024*1024);",
          "new_line_content": "        sprintf(s,\"%.2fM\",d);",
          "content_same": false
        },
        {
          "line": 2746,
          "old_api": null,
          "new_api": "dictGetRandomKey",
          "old_text": null,
          "new_text": "dictGetRandomKey(dict)",
          "old_line_content": "            }",
          "new_line_content": "                de = dictGetRandomKey(dict);",
          "content_same": false
        },
        {
          "line": 2747,
          "old_api": null,
          "new_api": "dictGetKey",
          "old_text": null,
          "new_text": "dictGetKey(de)",
          "old_line_content": "",
          "new_line_content": "                bestkey = dictGetKey(de);",
          "content_same": false
        },
        {
          "line": 2236,
          "old_api": null,
          "new_api": "sprintf",
          "old_text": null,
          "new_text": "sprintf(s,\"%.2fG\",d)",
          "old_line_content": "}",
          "new_line_content": "        sprintf(s,\"%.2fG\",d);",
          "content_same": false
        },
        {
          "line": 2244,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "    int j, numcommands;",
          "new_line_content": "    sds info = sdsempty();",
          "content_same": false
        },
        {
          "line": 2759,
          "old_api": null,
          "new_api": "dictGetRandomKey",
          "old_text": null,
          "new_text": "dictGetRandomKey(dict)",
          "old_line_content": "                    /* When policy is volatile-lru we need an additional lookup",
          "new_line_content": "                    de = dictGetRandomKey(dict);",
          "content_same": false
        },
        {
          "line": 2760,
          "old_api": null,
          "new_api": "dictGetKey",
          "old_text": null,
          "new_text": "dictGetKey(de)",
          "old_line_content": "                     * to locate the real key, as dict is set to db->expires. */",
          "new_line_content": "                    thiskey = dictGetKey(de);",
          "content_same": false
        },
        {
          "line": 1224,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\"+QUEUED\\r\\n\")",
          "old_line_content": "        \"-WRONGTYPE Operation against a key holding the wrong kind of value\\r\\n\"));",
          "new_line_content": "    shared.queued = createObject(REDIS_STRING,sdsnew(\"+QUEUED\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 1736,
          "old_api": null,
          "new_api": "zrealloc",
          "old_text": null,
          "new_text": "zrealloc(oa->ops,sizeof(redisOp)*(oa->numops+1))",
          "old_line_content": "    op->cmd = cmd;",
          "new_line_content": "    oa->ops = zrealloc(oa->ops,sizeof(redisOp)*(oa->numops+1));",
          "content_same": false
        },
        {
          "line": 2253,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(section,\"all\")",
          "old_line_content": "    }",
          "new_line_content": "        allsections = strcasecmp(section,\"all\") == 0;",
          "content_same": false
        },
        {
          "line": 2254,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(section,\"default\")",
          "old_line_content": "",
          "new_line_content": "        defsections = strcasecmp(section,\"default\") == 0;",
          "content_same": false
        },
        {
          "line": 2765,
          "old_api": null,
          "new_api": "dictGetVal",
          "old_text": null,
          "new_text": "dictGetVal(de)",
          "old_line_content": "",
          "new_line_content": "                    o = dictGetVal(de);",
          "content_same": false
        },
        {
          "line": 2766,
          "old_api": null,
          "new_api": "estimateObjectIdleTime",
          "old_text": null,
          "new_text": "estimateObjectIdleTime(o)",
          "old_line_content": "                    /* Higher idle time is better candidate for deletion */",
          "new_line_content": "                    thisval = estimateObjectIdleTime(o);",
          "content_same": false
        },
        {
          "line": 2258,
          "old_api": null,
          "new_api": "getrusage",
          "old_text": null,
          "new_text": "getrusage(RUSAGE_CHILDREN, &c_ru)",
          "old_line_content": "",
          "new_line_content": "    getrusage(RUSAGE_CHILDREN, &c_ru);",
          "content_same": false
        },
        {
          "line": 2259,
          "old_api": null,
          "new_api": "getClientsMaxBuffers",
          "old_text": null,
          "new_text": "getClientsMaxBuffers(&lol,&bib)",
          "old_line_content": "    /* Server */",
          "new_line_content": "    getClientsMaxBuffers(&lol,&bib);",
          "content_same": false
        },
        {
          "line": 2262,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(section,\"server\")",
          "old_line_content": "        char *mode;",
          "new_line_content": "    if (allsections || defsections || !strcasecmp(section,\"server\")) {",
          "content_same": false
        },
        {
          "line": 1755,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(op->argv[j])",
          "old_line_content": "    }",
          "new_line_content": "            decrRefCount(op->argv[j]);",
          "content_same": false
        },
        {
          "line": 1758,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(oa->ops)",
          "old_line_content": "",
          "new_line_content": "    zfree(oa->ops);",
          "content_same": false
        },
        {
          "line": 2271,
          "old_api": null,
          "new_api": "uname",
          "old_text": null,
          "new_text": "uname(&name)",
          "old_line_content": "            \"# Server\\r\\n\"",
          "new_line_content": "        uname(&name);",
          "content_same": false
        },
        {
          "line": 2272,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n            \"# Server\\r\\n\"\n            \"redis_version:%s\\r\\n\"\n            \"redis_git_sha1:%s\\r\\n\"\n            \"redis_git_dirty:%d\\r\\n\"\n            \"redis_build_id:%llx\\r\\n\"\n            \"redis_mode:%s\\r\\n\"\n            \"os:%s %s %s\\r\\n\"\n            \"arch_bits:%d\\r\\n\"\n            \"multiplexing_api:%s\\r\\n\"\n            \"gcc_version:%d.%d.%d\\r\\n\"\n            \"process_id:%ld\\r\\n\"\n            \"run_id:%s\\r\\n\"\n            \"tcp_port:%d\\r\\n\"\n            \"uptime_in_seconds:%jd\\r\\n\"\n            \"uptime_in_days:%jd\\r\\n\"\n            \"hz:%d\\r\\n\"\n            \"lru_clock:%ld\\r\\n\"\n            \"config_file:%s\\r\\n\",\n            REDIS_VERSION,\n            redisGitSHA1(),\n            strtol(redisGitDirty(),NULL,10) > 0,\n            (unsigned long long) redisBuildId(),\n            mode,\n            name.sysname, name.release, name.machine,\n            server.arch_bits,\n            aeGetApiName(),\n#ifdef __GNUC__\n            __GNUC__,__GNUC_MINOR__,__GNUC_PATCHLEVEL__,\n#else\n            0,0,0,\n#endif\n            (long) getpid(),\n            server.runid,\n            server.port,\n            (intmax_t)uptime,\n            (intmax_t)(uptime/(3600*24)),\n            server.hz,\n            (unsigned long) server.lruclock,\n            server.configfile ? server.configfile : \"\")",
          "old_line_content": "            \"redis_version:%s\\r\\n\"",
          "new_line_content": "        info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 2783,
          "old_api": null,
          "new_api": "dictGetKey",
          "old_text": null,
          "new_text": "dictGetKey(de)",
          "old_line_content": "",
          "new_line_content": "                    thiskey = dictGetKey(de);",
          "content_same": false
        },
        {
          "line": 2784,
          "old_api": null,
          "new_api": "dictGetVal",
          "old_text": null,
          "new_text": "dictGetVal(de)",
          "old_line_content": "                    /* Expire sooner (minor expire unix timestamp) is better",
          "new_line_content": "                    thisval = (long) dictGetVal(de);",
          "content_same": false
        },
        {
          "line": 1764,
          "old_api": null,
          "new_api": "dictFetchValue",
          "old_text": null,
          "new_text": "dictFetchValue(server.commands, name)",
          "old_line_content": "",
          "new_line_content": "    return dictFetchValue(server.commands, name);",
          "content_same": false
        },
        {
          "line": 1256,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\":\")",
          "old_line_content": "",
          "new_line_content": "    shared.colon = createObject(REDIS_STRING,sdsnew(\":\"));",
          "content_same": false
        },
        {
          "line": 1257,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\"+\")",
          "old_line_content": "    for (j = 0; j < REDIS_SHARED_SELECT_CMDS; j++) {",
          "new_line_content": "    shared.plus = createObject(REDIS_STRING,sdsnew(\"+\"));",
          "content_same": false
        },
        {
          "line": 1771,
          "old_api": null,
          "new_api": "dictFetchValue",
          "old_text": null,
          "new_text": "dictFetchValue(server.commands, name)",
          "old_line_content": "    return cmd;",
          "new_line_content": "    cmd = dictFetchValue(server.commands, name);",
          "content_same": false
        },
        {
          "line": 1772,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(name)",
          "old_line_content": "}",
          "new_line_content": "    sdsfree(name);",
          "content_same": false
        },
        {
          "line": 2799,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(bestkey)",
          "old_line_content": "                /* We compute the amount of memory freed by dbDelete() alone.",
          "new_line_content": "                robj *keyobj = createStringObject(bestkey,sdslen(bestkey));",
          "content_same": false
        },
        {
          "line": 2800,
          "old_api": null,
          "new_api": "propagateExpire",
          "old_text": null,
          "new_text": "propagateExpire(db,keyobj)",
          "old_line_content": "                 * It is possible that actually the memory needed to propagate",
          "new_line_content": "                propagateExpire(db,keyobj);",
          "content_same": false
        },
        {
          "line": 1264,
          "old_api": null,
          "new_api": "createObject",
          "old_text": null,
          "new_text": "createObject(REDIS_STRING,\n            sdscatprintf(sdsempty(),\n                \"*2\\r\\n$6\\r\\nSELECT\\r\\n$%d\\r\\n%s\\r\\n\",\n                dictid_len, dictid_str))",
          "old_line_content": "                \"*2\\r\\n$6\\r\\nSELECT\\r\\n$%d\\r\\n%s\\r\\n\",",
          "new_line_content": "        shared.select[j] = createObject(REDIS_STRING,",
          "content_same": false
        },
        {
          "line": 1265,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "                dictid_len, dictid_str));",
          "new_line_content": "            sdscatprintf(sdsempty(),",
          "content_same": false
        },
        {
          "line": 2293,
          "old_api": null,
          "new_api": "redisGitDirty",
          "old_text": null,
          "new_text": "redisGitDirty()",
          "old_line_content": "            mode,",
          "new_line_content": "            strtol(redisGitDirty(),NULL,10) > 0,",
          "content_same": false
        },
        {
          "line": 2294,
          "old_api": null,
          "new_api": "redisBuildId",
          "old_text": null,
          "new_text": "redisBuildId()",
          "old_line_content": "            name.sysname, name.release, name.machine,",
          "new_line_content": "            (unsigned long long) redisBuildId(),",
          "content_same": false
        },
        {
          "line": 2298,
          "old_api": null,
          "new_api": "aeGetApiName",
          "old_text": null,
          "new_text": "aeGetApiName()",
          "old_line_content": "            __GNUC__,__GNUC_MINOR__,__GNUC_PATCHLEVEL__,",
          "new_line_content": "            aeGetApiName(),",
          "content_same": false
        },
        {
          "line": 2810,
          "old_api": null,
          "new_api": "dbDelete",
          "old_text": null,
          "new_text": "dbDelete(db,keyobj)",
          "old_line_content": "                mem_freed += delta;",
          "new_line_content": "                dbDelete(db,keyobj);",
          "content_same": false
        },
        {
          "line": 2811,
          "old_api": null,
          "new_api": "zmalloc_used_memory",
          "old_text": null,
          "new_text": "zmalloc_used_memory()",
          "old_line_content": "                server.stat_evictedkeys++;",
          "new_line_content": "                delta -= (long long) zmalloc_used_memory();",
          "content_same": false
        },
        {
          "line": 1277,
          "old_api": null,
          "new_api": "createStringObject",
          "old_text": null,
          "new_text": "createStringObject(\"LPOP\",4)",
          "old_line_content": "    for (j = 0; j < REDIS_SHARED_INTEGERS; j++) {",
          "new_line_content": "    shared.lpop = createStringObject(\"LPOP\",4);",
          "content_same": false
        },
        {
          "line": 1786,
          "old_api": null,
          "new_api": "dictFetchValue",
          "old_text": null,
          "new_text": "dictFetchValue(server.orig_commands,name)",
          "old_line_content": "}",
          "new_line_content": "    if (!cmd) cmd = dictFetchValue(server.orig_commands,name);",
          "content_same": false
        },
        {
          "line": 2304,
          "old_api": null,
          "new_api": "getpid",
          "old_text": null,
          "new_text": "getpid()",
          "old_line_content": "            server.port,",
          "new_line_content": "            (long) getpid(),",
          "content_same": false
        },
        {
          "line": 2816,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(keyobj)",
          "old_line_content": "",
          "new_line_content": "                decrRefCount(keyobj);",
          "content_same": false
        },
        {
          "line": 1280,
          "old_api": null,
          "new_api": "createObject",
          "old_text": null,
          "new_text": "createObject(REDIS_STRING,(void*)(long)j)",
          "old_line_content": "    }",
          "new_line_content": "        shared.integers[j] = createObject(REDIS_STRING,(void*)(long)j);",
          "content_same": false
        },
        {
          "line": 2308,
          "old_api": null,
          "new_api": "intmax_t)(uptime/(3600*24))",
          "old_text": null,
          "new_text": "intmax_t)(uptime/(3600*24))",
          "old_line_content": "            (unsigned long) server.lruclock,",
          "new_line_content": "            (intmax_t)(uptime/(3600*24)),",
          "content_same": false
        },
        {
          "line": 1286,
          "old_api": null,
          "new_api": "createObject",
          "old_text": null,
          "new_text": "createObject(REDIS_STRING,\n            sdscatprintf(sdsempty(),\"$%d\\r\\n\",j))",
          "old_line_content": "    }",
          "new_line_content": "        shared.bulkhdr[j] = createObject(REDIS_STRING,",
          "content_same": false
        },
        {
          "line": 2823,
          "old_api": null,
          "new_api": "flushSlavesOutputBuffers",
          "old_text": null,
          "new_text": "flushSlavesOutputBuffers()",
          "old_line_content": "        }",
          "new_line_content": "                if (slaves) flushSlavesOutputBuffers();",
          "content_same": false
        },
        {
          "line": 1287,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "}",
          "new_line_content": "            sdscatprintf(sdsempty(),\"$%d\\r\\n\",j));",
          "content_same": false
        },
        {
          "line": 2316,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(info,\"\\r\\n\")",
          "old_line_content": "            \"# Clients\\r\\n\"",
          "new_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 2317,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n            \"# Clients\\r\\n\"\n            \"connected_clients:%lu\\r\\n\"\n            \"client_longest_output_list:%lu\\r\\n\"\n            \"client_biggest_input_buf:%lu\\r\\n\"\n            \"blocked_clients:%d\\r\\n\",\n            listLength(server.clients)-listLength(server.slaves),\n            lol, bib,\n            server.bpop_blocked_clients)",
          "old_line_content": "            \"connected_clients:%lu\\r\\n\"",
          "new_line_content": "        info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 1294,
          "old_api": null,
          "new_api": "getRandomHexChars",
          "old_text": null,
          "new_text": "getRandomHexChars(server.runid,REDIS_RUN_ID_SIZE)",
          "old_line_content": "    server.hz = REDIS_DEFAULT_HZ;",
          "new_line_content": "    getRandomHexChars(server.runid,REDIS_RUN_ID_SIZE);",
          "content_same": false
        },
        {
          "line": 1804,
          "old_api": null,
          "new_api": "replicationFeedSlaves",
          "old_text": null,
          "new_text": "replicationFeedSlaves(server.slaves,dbid,argv,argc)",
          "old_line_content": "",
          "new_line_content": "        replicationFeedSlaves(server.slaves,dbid,argv,argc);",
          "content_same": false
        },
        {
          "line": 2323,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.slaves)",
          "old_line_content": "            server.bpop_blocked_clients);",
          "new_line_content": "            listLength(server.clients)-listLength(server.slaves),",
          "content_same": false
        },
        {
          "line": 2835,
          "old_api": null,
          "new_api": "fopen",
          "old_text": null,
          "new_text": "fopen(\"/proc/sys/vm/overcommit_memory\",\"r\")",
          "old_line_content": "",
          "new_line_content": "    FILE *fp = fopen(\"/proc/sys/vm/overcommit_memory\",\"r\");",
          "content_same": false
        },
        {
          "line": 1812,
          "old_api": null,
          "new_api": "redisOpArrayAppend",
          "old_text": null,
          "new_text": "redisOpArrayAppend(&server.also_propagate,cmd,dbid,argv,argc,target)",
          "old_line_content": "",
          "new_line_content": "    redisOpArrayAppend(&server.also_propagate,cmd,dbid,argv,argc,target);",
          "content_same": false
        },
        {
          "line": 2839,
          "old_api": null,
          "new_api": "fgets",
          "old_text": null,
          "new_text": "fgets(buf,64,fp)",
          "old_line_content": "        return -1;",
          "new_line_content": "    if (fgets(buf,64,fp) == NULL) {",
          "content_same": false
        },
        {
          "line": 2840,
          "old_api": null,
          "new_api": "fclose",
          "old_text": null,
          "new_text": "fclose(fp)",
          "old_line_content": "    }",
          "new_line_content": "        fclose(fp);",
          "content_same": false
        },
        {
          "line": 2329,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(section,\"memory\")",
          "old_line_content": "        char peak_hmem[64];",
          "new_line_content": "    if (allsections || defsections || !strcasecmp(section,\"memory\")) {",
          "content_same": false
        },
        {
          "line": 2845,
          "old_api": null,
          "new_api": "atoi",
          "old_text": null,
          "new_text": "atoi(buf)",
          "old_line_content": "",
          "new_line_content": "    return atoi(buf);",
          "content_same": false
        },
        {
          "line": 2335,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(info,\"\\r\\n\")",
          "old_line_content": "            \"# Memory\\r\\n\"",
          "new_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 2336,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n            \"# Memory\\r\\n\"\n            \"used_memory:%zu\\r\\n\"\n            \"used_memory_human:%s\\r\\n\"\n            \"used_memory_rss:%zu\\r\\n\"\n            \"used_memory_peak:%zu\\r\\n\"\n            \"used_memory_peak_human:%s\\r\\n\"\n            \"used_memory_lua:%lld\\r\\n\"\n            \"mem_fragmentation_ratio:%.2f\\r\\n\"\n            \"mem_allocator:%s\\r\\n\",\n            zmalloc_used_memory(),\n            hmem,\n            zmalloc_get_rss(),\n            server.stat_peak_memory,\n            peak_hmem,\n            ((long long)lua_gc(server.lua,LUA_GCCOUNT,0))*1024LL,\n            zmalloc_get_fragmentation_ratio(),\n            ZMALLOC_LIB\n            )",
          "old_line_content": "            \"used_memory:%zu\\r\\n\"",
          "new_line_content": "        info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 2849,
          "old_api": null,
          "new_api": "linuxOvercommitMemoryValue",
          "old_text": null,
          "new_text": "linuxOvercommitMemoryValue()",
          "old_line_content": "    }",
          "new_line_content": "    if (linuxOvercommitMemoryValue() == 0) {",
          "content_same": false
        },
        {
          "line": 2850,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.\")",
          "old_line_content": "}",
          "new_line_content": "        redisLog(REDIS_WARNING,\"WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.\");",
          "content_same": false
        },
        {
          "line": 1315,
          "old_api": null,
          "new_api": "zstrdup",
          "old_text": null,
          "new_text": "zstrdup(REDIS_DEFAULT_SYSLOG_IDENT)",
          "old_line_content": "    server.daemonize = REDIS_DEFAULT_DAEMONIZE;",
          "new_line_content": "    server.syslog_ident = zstrdup(REDIS_DEFAULT_SYSLOG_IDENT);",
          "content_same": false
        },
        {
          "line": 1825,
          "old_api": null,
          "new_api": "ustime",
          "old_text": null,
          "new_text": "ustime()",
          "old_line_content": "",
          "new_line_content": "    long long dirty, start = ustime(), duration;",
          "content_same": false
        },
        {
          "line": 1830,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.monitors)",
          "old_line_content": "        !(c->cmd->flags & REDIS_CMD_SKIP_MONITOR))",
          "new_line_content": "    if (listLength(server.monitors) &&",
          "content_same": false
        },
        {
          "line": 1834,
          "old_api": null,
          "new_api": "replicationFeedMonitors",
          "old_text": null,
          "new_text": "replicationFeedMonitors(c,server.monitors,c->db->id,c->argv,c->argc)",
          "old_line_content": "",
          "new_line_content": "        replicationFeedMonitors(c,server.monitors,c->db->id,c->argv,c->argc);",
          "content_same": false
        },
        {
          "line": 2859,
          "old_api": null,
          "new_api": "getpid",
          "old_text": null,
          "new_text": "getpid()",
          "old_line_content": "    }",
          "new_line_content": "        fprintf(fp,\"%d\\n\",(int)getpid());",
          "content_same": false
        },
        {
          "line": 2348,
          "old_api": null,
          "new_api": "zmalloc_get_rss",
          "old_text": null,
          "new_text": "zmalloc_get_rss()",
          "old_line_content": "            peak_hmem,",
          "new_line_content": "            zmalloc_get_rss(),",
          "content_same": false
        },
        {
          "line": 2860,
          "old_api": null,
          "new_api": "fclose",
          "old_text": null,
          "new_text": "fclose(fp)",
          "old_line_content": "}",
          "new_line_content": "        fclose(fp);",
          "content_same": false
        },
        {
          "line": 1325,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "    server.aof_rewrite_time_start = -1;",
          "new_line_content": "    server.aof_last_fsync = time(NULL);",
          "content_same": false
        },
        {
          "line": 2351,
          "old_api": null,
          "new_api": "lua_gc",
          "old_text": null,
          "new_text": "lua_gc(server.lua,LUA_GCCOUNT,0)",
          "old_line_content": "            ZMALLOC_LIB",
          "new_line_content": "            ((long long)lua_gc(server.lua,LUA_GCCOUNT,0))*1024LL,",
          "content_same": false
        },
        {
          "line": 2352,
          "old_api": null,
          "new_api": "zmalloc_get_fragmentation_ratio",
          "old_text": null,
          "new_text": "zmalloc_get_fragmentation_ratio()",
          "old_line_content": "            );",
          "new_line_content": "            zmalloc_get_fragmentation_ratio(),",
          "content_same": false
        },
        {
          "line": 2867,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(0)",
          "old_line_content": "",
          "new_line_content": "    if (fork() != 0) exit(0); /* parent exits */",
          "content_same": false
        },
        {
          "line": 2868,
          "old_api": null,
          "new_api": "setsid",
          "old_text": null,
          "new_text": "setsid()",
          "old_line_content": "    /* Every output goes to /dev/null. If Redis is daemonized but",
          "new_line_content": "    setsid(); /* create a new session */",
          "content_same": false
        },
        {
          "line": 1843,
          "old_api": null,
          "new_api": "ustime",
          "old_text": null,
          "new_text": "ustime()",
          "old_line_content": "    /* When EVAL is called loading the AOF we don't want commands called",
          "new_line_content": "    duration = ustime()-start;",
          "content_same": false
        },
        {
          "line": 2359,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(info,\"\\r\\n\")",
          "old_line_content": "            \"# Persistence\\r\\n\"",
          "new_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 2360,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n            \"# Persistence\\r\\n\"\n            \"loading:%d\\r\\n\"\n            \"rdb_changes_since_last_save:%lld\\r\\n\"\n            \"rdb_bgsave_in_progress:%d\\r\\n\"\n            \"rdb_last_save_time:%jd\\r\\n\"\n            \"rdb_last_bgsave_status:%s\\r\\n\"\n            \"rdb_last_bgsave_time_sec:%jd\\r\\n\"\n            \"rdb_current_bgsave_time_sec:%jd\\r\\n\"\n            \"aof_enabled:%d\\r\\n\"\n            \"aof_rewrite_in_progress:%d\\r\\n\"\n            \"aof_rewrite_scheduled:%d\\r\\n\"\n            \"aof_last_rewrite_time_sec:%jd\\r\\n\"\n            \"aof_current_rewrite_time_sec:%jd\\r\\n\"\n            \"aof_last_bgrewrite_status:%s\\r\\n\",\n            server.loading,\n            server.dirty,\n            server.rdb_child_pid != -1,\n            (intmax_t)server.lastsave,\n            (server.lastbgsave_status == REDIS_OK) ? \"ok\" : \"err\",\n            (intmax_t)server.rdb_save_time_last,\n            (intmax_t)((server.rdb_child_pid == -1) ?\n                -1 : time(NULL)-server.rdb_save_time_start),\n            server.aof_state != REDIS_AOF_OFF,\n            server.aof_child_pid != -1,\n            server.aof_rewrite_scheduled,\n            (intmax_t)server.aof_rewrite_time_last,\n            (intmax_t)((server.aof_child_pid == -1) ?\n                -1 : time(NULL)-server.aof_rewrite_time_start),\n            (server.aof_lastbgrewrite_status == REDIS_OK) ? \"ok\" : \"err\")",
          "old_line_content": "            \"loading:%d\\r\\n\"",
          "new_line_content": "        info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 1335,
          "old_api": null,
          "new_api": "zstrdup",
          "old_text": null,
          "new_text": "zstrdup(REDIS_DEFAULT_RDB_FILENAME)",
          "old_line_content": "    server.requirepass = NULL;",
          "new_line_content": "    server.rdb_filename = zstrdup(REDIS_DEFAULT_RDB_FILENAME);",
          "content_same": false
        },
        {
          "line": 1336,
          "old_api": null,
          "new_api": "zstrdup",
          "old_text": null,
          "new_text": "zstrdup(\"appendonly.aof\")",
          "old_line_content": "    server.rdb_compression = REDIS_DEFAULT_RDB_COMPRESSION;",
          "new_line_content": "    server.aof_filename = zstrdup(\"appendonly.aof\");",
          "content_same": false
        },
        {
          "line": 2876,
          "old_api": null,
          "new_api": "dup2",
          "old_text": null,
          "new_text": "dup2(fd, STDERR_FILENO)",
          "old_line_content": "    }",
          "new_line_content": "        dup2(fd, STDERR_FILENO);",
          "content_same": false
        },
        {
          "line": 2877,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(fd)",
          "old_line_content": "}",
          "new_line_content": "        if (fd > STDERR_FILENO) close(fd);",
          "content_same": false
        },
        {
          "line": 2884,
          "old_api": null,
          "new_api": "redisGitSHA1",
          "old_text": null,
          "new_text": "redisGitSHA1()",
          "old_line_content": "        ZMALLOC_LIB,",
          "new_line_content": "        redisGitSHA1(),",
          "content_same": false
        },
        {
          "line": 2885,
          "old_api": null,
          "new_api": "redisGitDirty",
          "old_text": null,
          "new_text": "redisGitDirty()",
          "old_line_content": "        sizeof(long) == 4 ? 32 : 64,",
          "new_line_content": "        atoi(redisGitDirty()) > 0,",
          "content_same": false
        },
        {
          "line": 1863,
          "old_api": null,
          "new_api": "slowlogPushEntryIfNeeded",
          "old_text": null,
          "new_text": "slowlogPushEntryIfNeeded(c->argv,c->argc,duration)",
          "old_line_content": "        c->cmd->microseconds += duration;",
          "new_line_content": "        slowlogPushEntryIfNeeded(c->argv,c->argc,duration);",
          "content_same": false
        },
        {
          "line": 2888,
          "old_api": null,
          "new_api": "redisBuildId",
          "old_text": null,
          "new_text": "redisBuildId()",
          "old_line_content": "}",
          "new_line_content": "        (unsigned long long) redisBuildId());",
          "content_same": false
        },
        {
          "line": 2889,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(0)",
          "old_line_content": "",
          "new_line_content": "    exit(0);",
          "content_same": false
        },
        {
          "line": 2381,
          "old_api": null,
          "new_api": "intmax_t)((server.rdb_child_pid == -1) ?\n                -1 : time(NULL)-server.rdb_save_time_start)",
          "old_text": null,
          "new_text": "intmax_t)((server.rdb_child_pid == -1) ?\n                -1 : time(NULL)-server.rdb_save_time_start)",
          "old_line_content": "            server.aof_state != REDIS_AOF_OFF,",
          "new_line_content": "            (intmax_t)((server.rdb_child_pid == -1) ?",
          "content_same": false
        },
        {
          "line": 2382,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "            server.aof_child_pid != -1,",
          "new_line_content": "                -1 : time(NULL)-server.rdb_save_time_start),",
          "content_same": false
        },
        {
          "line": 1362,
          "old_api": null,
          "new_api": "zstrdup",
          "old_text": null,
          "new_text": "zstrdup(REDIS_DEFAULT_CLUSTER_CONFIG_FILE)",
          "old_line_content": "    server.lua_time_limit = REDIS_LUA_TIME_LIMIT;",
          "new_line_content": "    server.cluster_configfile = zstrdup(REDIS_DEFAULT_CLUSTER_CONFIG_FILE);",
          "content_same": false
        },
        {
          "line": 2387,
          "old_api": null,
          "new_api": "intmax_t)((server.aof_child_pid == -1) ?\n                -1 : time(NULL)-server.aof_rewrite_time_start)",
          "old_text": null,
          "new_text": "intmax_t)((server.aof_child_pid == -1) ?\n                -1 : time(NULL)-server.aof_rewrite_time_start)",
          "old_line_content": "            (server.aof_lastbgrewrite_status == REDIS_OK) ? \"ok\" : \"err\");",
          "new_line_content": "            (intmax_t)((server.aof_child_pid == -1) ?",
          "content_same": false
        },
        {
          "line": 2388,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "",
          "new_line_content": "                -1 : time(NULL)-server.aof_rewrite_time_start),",
          "content_same": false
        },
        {
          "line": 1878,
          "old_api": null,
          "new_api": "propagate",
          "old_text": null,
          "new_text": "propagate(c->cmd,c->db->id,c->argv,c->argc,flags)",
          "old_line_content": "",
          "new_line_content": "            propagate(c->cmd,c->db->id,c->argv,c->argc,flags);",
          "content_same": false
        },
        {
          "line": 1367,
          "old_api": null,
          "new_api": "dictCreate",
          "old_text": null,
          "new_text": "dictCreate(&migrateCacheDictType,NULL)",
          "old_line_content": "",
          "new_line_content": "    server.migrate_cached_sockets = dictCreate(&migrateCacheDictType,NULL);",
          "content_same": false
        },
        {
          "line": 2392,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n                \"aof_current_size:%lld\\r\\n\"\n                \"aof_base_size:%lld\\r\\n\"\n                \"aof_pending_rewrite:%d\\r\\n\"\n                \"aof_buffer_length:%zu\\r\\n\"\n                \"aof_rewrite_buffer_length:%lu\\r\\n\"\n                \"aof_pending_bio_fsync:%llu\\r\\n\"\n                \"aof_delayed_fsync:%lu\\r\\n\",\n                (long long) server.aof_current_size,\n                (long long) server.aof_rewrite_base_size,\n                server.aof_rewrite_scheduled,\n                sdslen(server.aof_buf),\n                aofRewriteBufferSize(),\n                bioPendingJobsOfType(REDIS_BIO_AOF_FSYNC),\n                server.aof_delayed_fsync)",
          "old_line_content": "                \"aof_base_size:%lld\\r\\n\"",
          "new_line_content": "            info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 2905,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr,\"       ./redis-server /etc/sentinel.conf --sentinel\\n\")",
          "old_line_content": "}",
          "new_line_content": "    fprintf(stderr,\"       ./redis-server /etc/sentinel.conf --sentinel\\n\");",
          "content_same": false
        },
        {
          "line": 2906,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "",
          "new_line_content": "    exit(1);",
          "content_same": false
        },
        {
          "line": 1370,
          "old_api": null,
          "new_api": "updateLRUClock",
          "old_text": null,
          "new_text": "updateLRUClock()",
          "old_line_content": "",
          "new_line_content": "    updateLRUClock();",
          "content_same": false
        },
        {
          "line": 1374,
          "old_api": null,
          "new_api": "appendServerSaveParams",
          "old_text": null,
          "new_text": "appendServerSaveParams(300,100)",
          "old_line_content": "    /* Replication related */",
          "new_line_content": "    appendServerSaveParams(300,100);  /* save after 5 minutes and 100 changes */",
          "content_same": false
        },
        {
          "line": 2911,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(1024*16)",
          "old_line_content": "",
          "new_line_content": "    char *buf = zmalloc(1024*16);",
          "content_same": false
        },
        {
          "line": 1375,
          "old_api": null,
          "new_api": "appendServerSaveParams",
          "old_text": null,
          "new_text": "appendServerSaveParams(60,10000)",
          "old_line_content": "    server.masterauth = NULL;",
          "new_line_content": "    appendServerSaveParams(60,10000); /* save after 1 minute and 10000 changes */",
          "content_same": false
        },
        {
          "line": 2404,
          "old_api": null,
          "new_api": "aofRewriteBufferSize",
          "old_text": null,
          "new_text": "aofRewriteBufferSize()",
          "old_line_content": "                server.aof_delayed_fsync);",
          "new_line_content": "                aofRewriteBufferSize(),",
          "content_same": false
        },
        {
          "line": 2405,
          "old_api": null,
          "new_api": "bioPendingJobsOfType",
          "old_text": null,
          "new_text": "bioPendingJobsOfType(REDIS_BIO_AOF_FSYNC)",
          "old_line_content": "        }",
          "new_line_content": "                bioPendingJobsOfType(REDIS_BIO_AOF_FSYNC),",
          "content_same": false
        },
        {
          "line": 2919,
          "old_api": null,
          "new_api": "redisGitSHA1",
          "old_text": null,
          "new_text": "redisGitSHA1()",
          "old_line_content": "        (sizeof(long) == 8) ? \"64\" : \"32\",",
          "new_line_content": "        redisGitSHA1(),",
          "content_same": false
        },
        {
          "line": 2920,
          "old_api": null,
          "new_api": "redisGitDirty",
          "old_text": null,
          "new_text": "redisGitDirty()",
          "old_line_content": "        mode, server.port,",
          "new_line_content": "        strtol(redisGitDirty(),NULL,10) > 0,",
          "content_same": false
        },
        {
          "line": 1896,
          "old_api": null,
          "new_api": "redisOpArrayFree",
          "old_text": null,
          "new_text": "redisOpArrayFree(&server.also_propagate)",
          "old_line_content": "    server.stat_numcommands++;",
          "new_line_content": "        redisOpArrayFree(&server.also_propagate);",
          "content_same": false
        },
        {
          "line": 2925,
          "old_api": null,
          "new_api": "redisLogRaw",
          "old_text": null,
          "new_text": "redisLogRaw(REDIS_NOTICE|REDIS_LOG_RAW,buf)",
          "old_line_content": "}",
          "new_line_content": "    redisLogRaw(REDIS_NOTICE|REDIS_LOG_RAW,buf);",
          "content_same": false
        },
        {
          "line": 2926,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(buf)",
          "old_line_content": "",
          "new_line_content": "    zfree(buf);",
          "content_same": false
        },
        {
          "line": 2932,
          "old_api": null,
          "new_api": "redisLogFromHandler",
          "old_text": null,
          "new_text": "redisLogFromHandler(REDIS_WARNING,\"Received SIGTERM, scheduling shutdown...\")",
          "old_line_content": "}",
          "new_line_content": "    redisLogFromHandler(REDIS_WARNING,\"Received SIGTERM, scheduling shutdown...\");",
          "content_same": false
        },
        {
          "line": 1399,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "    /* Client output buffer limits */",
          "new_line_content": "    server.repl_no_slaves_since = time(NULL);",
          "content_same": false
        },
        {
          "line": 2426,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n                \"loading_start_time:%jd\\r\\n\"\n                \"loading_total_bytes:%llu\\r\\n\"\n                \"loading_loaded_bytes:%llu\\r\\n\"\n                \"loading_loaded_perc:%.2f\\r\\n\"\n                \"loading_eta_seconds:%jd\\r\\n\",\n                (intmax_t) server.loading_start_time,\n                (unsigned long long) server.loading_total_bytes,\n                (unsigned long long) server.loading_loaded_bytes,\n                perc,\n                (intmax_t)eta\n            )",
          "old_line_content": "                \"loading_total_bytes:%llu\\r\\n\"",
          "new_line_content": "            info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 1914,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[0]->ptr,\"quit\")",
          "old_line_content": "        c->flags |= REDIS_CLOSE_AFTER_REPLY;",
          "new_line_content": "    if (!strcasecmp(c->argv[0]->ptr,\"quit\")) {",
          "content_same": false
        },
        {
          "line": 1915,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "        return REDIS_ERR;",
          "new_line_content": "        addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 2941,
          "old_api": null,
          "new_api": "sigemptyset",
          "old_text": null,
          "new_text": "sigemptyset(&act.sa_mask)",
          "old_line_content": "    act.sa_handler = sigtermHandler;",
          "new_line_content": "    sigemptyset(&act.sa_mask);",
          "content_same": false
        },
        {
          "line": 2944,
          "old_api": null,
          "new_api": "sigaction",
          "old_text": null,
          "new_text": "sigaction(SIGTERM, &act, NULL)",
          "old_line_content": "#ifdef HAVE_BACKTRACE",
          "new_line_content": "    sigaction(SIGTERM, &act, NULL);",
          "content_same": false
        },
        {
          "line": 2947,
          "old_api": null,
          "new_api": "sigemptyset",
          "old_text": null,
          "new_text": "sigemptyset(&act.sa_mask)",
          "old_line_content": "    act.sa_sigaction = sigsegvHandler;",
          "new_line_content": "    sigemptyset(&act.sa_mask);",
          "content_same": false
        },
        {
          "line": 1924,
          "old_api": null,
          "new_api": "flagTransaction",
          "old_text": null,
          "new_text": "flagTransaction(c)",
          "old_line_content": "            (char*)c->argv[0]->ptr);",
          "new_line_content": "        flagTransaction(c);",
          "content_same": false
        },
        {
          "line": 1925,
          "old_api": null,
          "new_api": "addReplyErrorFormat",
          "old_text": null,
          "new_text": "addReplyErrorFormat(c,\"unknown command '%s'\",\n            (char*)c->argv[0]->ptr)",
          "old_line_content": "        return REDIS_OK;",
          "new_line_content": "        addReplyErrorFormat(c,\"unknown command '%s'\",",
          "content_same": false
        },
        {
          "line": 2952,
          "old_api": null,
          "new_api": "sigaction",
          "old_text": null,
          "new_text": "sigaction(SIGFPE, &act, NULL)",
          "old_line_content": "#endif",
          "new_line_content": "    sigaction(SIGFPE, &act, NULL);",
          "content_same": false
        },
        {
          "line": 2953,
          "old_api": null,
          "new_api": "sigaction",
          "old_text": null,
          "new_text": "sigaction(SIGILL, &act, NULL)",
          "old_line_content": "    return;",
          "new_line_content": "    sigaction(SIGILL, &act, NULL);",
          "content_same": false
        },
        {
          "line": 1930,
          "old_api": null,
          "new_api": "flagTransaction",
          "old_text": null,
          "new_text": "flagTransaction(c)",
          "old_line_content": "            c->cmd->name);",
          "new_line_content": "        flagTransaction(c);",
          "content_same": false
        },
        {
          "line": 2443,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(info,\"\\r\\n\")",
          "old_line_content": "            \"# Stats\\r\\n\"",
          "new_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 2444,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n            \"# Stats\\r\\n\"\n            \"total_connections_received:%lld\\r\\n\"\n            \"total_commands_processed:%lld\\r\\n\"\n            \"instantaneous_ops_per_sec:%lld\\r\\n\"\n            \"rejected_connections:%lld\\r\\n\"\n            \"sync_full:%lld\\r\\n\"\n            \"sync_partial_ok:%lld\\r\\n\"\n            \"sync_partial_err:%lld\\r\\n\"\n            \"expired_keys:%lld\\r\\n\"\n            \"evicted_keys:%lld\\r\\n\"\n            \"keyspace_hits:%lld\\r\\n\"\n            \"keyspace_misses:%lld\\r\\n\"\n            \"pubsub_channels:%ld\\r\\n\"\n            \"pubsub_patterns:%lu\\r\\n\"\n            \"latest_fork_usec:%lld\\r\\n\"\n            \"migrate_cached_sockets:%ld\\r\\n\",\n            server.stat_numconnections,\n            server.stat_numcommands,\n            getOperationsPerSecond(),\n            server.stat_rejected_conn,\n            server.stat_sync_full,\n            server.stat_sync_partial_ok,\n            server.stat_sync_partial_err,\n            server.stat_expiredkeys,\n            server.stat_evictedkeys,\n            server.stat_keyspace_hits,\n            server.stat_keyspace_misses,\n            dictSize(server.pubsub_channels),\n            listLength(server.pubsub_patterns),\n            server.stat_fork_time,\n            dictSize(server.migrate_cached_sockets))",
          "old_line_content": "            \"total_connections_received:%lld\\r\\n\"",
          "new_line_content": "        info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 1420,
          "old_api": null,
          "new_api": "lookupCommandByCString",
          "old_text": null,
          "new_text": "lookupCommandByCString(\"lpop\")",
          "old_line_content": "    ",
          "new_line_content": "    server.lpopCommand = lookupCommandByCString(\"lpop\");",
          "content_same": false
        },
        {
          "line": 1421,
          "old_api": null,
          "new_api": "lookupCommandByCString",
          "old_text": null,
          "new_text": "lookupCommandByCString(\"rpop\")",
          "old_line_content": "    /* Slow log */",
          "new_line_content": "    server.rpopCommand = lookupCommandByCString(\"rpop\");",
          "content_same": false
        },
        {
          "line": 1931,
          "old_api": null,
          "new_api": "addReplyErrorFormat",
          "old_text": null,
          "new_text": "addReplyErrorFormat(c,\"wrong number of arguments for '%s' command\",\n            c->cmd->name)",
          "old_line_content": "        return REDIS_OK;",
          "new_line_content": "        addReplyErrorFormat(c,\"wrong number of arguments for '%s' command\",",
          "content_same": false
        },
        {
          "line": 1939,
          "old_api": null,
          "new_api": "flagTransaction",
          "old_text": null,
          "new_text": "flagTransaction(c)",
          "old_line_content": "        return REDIS_OK;",
          "new_line_content": "        flagTransaction(c);",
          "content_same": false
        },
        {
          "line": 1940,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.noautherr)",
          "old_line_content": "    }",
          "new_line_content": "        addReply(c,shared.noautherr);",
          "content_same": false
        },
        {
          "line": 2967,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(argv[j],\"--sentinel\")",
          "old_line_content": "}",
          "new_line_content": "        if (!strcmp(argv[j],\"--sentinel\")) return 1;",
          "content_same": false
        },
        {
          "line": 2463,
          "old_api": null,
          "new_api": "getOperationsPerSecond",
          "old_text": null,
          "new_text": "getOperationsPerSecond()",
          "old_line_content": "            server.stat_sync_full,",
          "new_line_content": "            getOperationsPerSecond(),",
          "content_same": false
        },
        {
          "line": 2975,
          "old_api": null,
          "new_api": "loadAppendOnlyFile",
          "old_text": null,
          "new_text": "loadAppendOnlyFile(server.aof_filename)",
          "old_line_content": "    } else {",
          "new_line_content": "        if (loadAppendOnlyFile(server.aof_filename) == REDIS_OK)",
          "content_same": false
        },
        {
          "line": 2979,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_NOTICE,\"DB loaded from disk: %.3f seconds\",\n                (float)(ustime()-start)/1000000)",
          "old_line_content": "        } else if (errno != ENOENT) {",
          "new_line_content": "            redisLog(REDIS_NOTICE,\"DB loaded from disk: %.3f seconds\",",
          "content_same": false
        },
        {
          "line": 1955,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\"-CLUSTERDOWN The cluster is down. Use CLUSTER INFO for more information\\r\\n\")",
          "old_line_content": "        } else {",
          "new_line_content": "            addReplySds(c,sdsnew(\"-CLUSTERDOWN The cluster is down. Use CLUSTER INFO for more information\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 2982,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "        }",
          "new_line_content": "            redisLog(REDIS_WARNING,\"Fatal error loading the DB: %s. Exiting.\",strerror(errno));",
          "content_same": false
        },
        {
          "line": 2983,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "    }",
          "new_line_content": "            exit(1);",
          "content_same": false
        },
        {
          "line": 2472,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(server.pubsub_channels)",
          "old_line_content": "            server.stat_fork_time,",
          "new_line_content": "            dictSize(server.pubsub_channels),",
          "content_same": false
        },
        {
          "line": 1448,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"Unable to obtain the current NOFILE limit (%s), assuming 1024 and setting the max clients configuration accordingly.\",\n            strerror(errno))",
          "old_line_content": "        server.maxclients = 1024-32;",
          "new_line_content": "        redisLog(REDIS_WARNING,\"Unable to obtain the current NOFILE limit (%s), assuming 1024 and setting the max clients configuration accordingly.\",",
          "content_same": false
        },
        {
          "line": 1449,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "    } else {",
          "new_line_content": "            strerror(errno));",
          "content_same": false
        },
        {
          "line": 2475,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(server.migrate_cached_sockets)",
          "old_line_content": "",
          "new_line_content": "            dictSize(server.migrate_cached_sockets));",
          "content_same": false
        },
        {
          "line": 1961,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"Multi keys request invalid in cluster\")",
          "old_line_content": "            } else if (n != server.cluster->myself) {",
          "new_line_content": "                addReplyError(c,\"Multi keys request invalid in cluster\");",
          "content_same": false
        },
        {
          "line": 1964,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "                    hashslot,n->ip,n->port));",
          "new_line_content": "                addReplySds(c,sdscatprintf(sdsempty(),",
          "content_same": false
        },
        {
          "line": 2991,
          "old_api": null,
          "new_api": "redisPanic",
          "old_text": null,
          "new_text": "redisPanic(\"Redis aborting for OUT OF MEMORY\")",
          "old_line_content": "",
          "new_line_content": "    redisPanic(\"Redis aborting for OUT OF MEMORY\");",
          "content_same": false
        },
        {
          "line": 2480,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(info,\"\\r\\n\")",
          "old_line_content": "            \"# Replication\\r\\n\"",
          "new_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 2481,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n            \"# Replication\\r\\n\"\n            \"role:%s\\r\\n\",\n            server.masterhost == NULL ? \"master\" : \"slave\")",
          "old_line_content": "            \"role:%s\\r\\n\",",
          "new_line_content": "        info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 2996,
          "old_api": null,
          "new_api": "setproctitle",
          "old_text": null,
          "new_text": "setproctitle(\"%s %s:%d\",\n        title,\n        server.bindaddr_count ? server.bindaddr[0] : \"*\",\n        server.port)",
          "old_line_content": "        server.bindaddr_count ? server.bindaddr[0] : \"*\",",
          "new_line_content": "    setproctitle(\"%s %s:%d\",",
          "content_same": false
        },
        {
          "line": 2486,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n                \"master_host:%s\\r\\n\"\n                \"master_port:%d\\r\\n\"\n                \"master_link_status:%s\\r\\n\"\n                \"master_last_io_seconds_ago:%d\\r\\n\"\n                \"master_sync_in_progress:%d\\r\\n\"\n                \"slave_repl_offset:%lld\\r\\n\"\n                ,server.masterhost,\n                server.masterport,\n                (server.repl_state == REDIS_REPL_CONNECTED) ?\n                    \"up\" : \"down\",\n                server.master ?\n                ((int)(server.unixtime-server.master->lastinteraction)) : -1,\n                server.repl_state == REDIS_REPL_TRANSFER,\n                server.master ? server.master->reploff : -1\n            )",
          "old_line_content": "                \"master_port:%d\\r\\n\"",
          "new_line_content": "            info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 1463,
          "old_api": null,
          "new_api": "setrlimit",
          "old_text": null,
          "new_text": "setrlimit(RLIMIT_NOFILE,&limit)",
          "old_line_content": "            }",
          "new_line_content": "                if (setrlimit(RLIMIT_NOFILE,&limit) != -1) break;",
          "content_same": false
        },
        {
          "line": 3001,
          "old_api": null,
          "new_api": "REDIS_NOTUSED",
          "old_text": null,
          "new_text": "REDIS_NOTUSED(title)",
          "old_line_content": "}",
          "new_line_content": "    REDIS_NOTUSED(title);",
          "content_same": false
        },
        {
          "line": 1980,
          "old_api": null,
          "new_api": "flagTransaction",
          "old_text": null,
          "new_text": "flagTransaction(c)",
          "old_line_content": "            return REDIS_OK;",
          "new_line_content": "            flagTransaction(c);",
          "content_same": false
        },
        {
          "line": 1469,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"Unable to set the max number of files limit to %d (%s), setting the max clients configuration to %d.\",\n                    (int) maxfiles, strerror(errno), (int) server.maxclients)",
          "old_line_content": "            } else {",
          "new_line_content": "                redisLog(REDIS_WARNING,\"Unable to set the max number of files limit to %d (%s), setting the max clients configuration to %d.\",",
          "content_same": false
        },
        {
          "line": 1981,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c, shared.oomerr)",
          "old_line_content": "        }",
          "new_line_content": "            addReply(c, shared.oomerr);",
          "content_same": false
        },
        {
          "line": 1472,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_NOTICE,\"Max number of open files set to %d\",\n                    (int) maxfiles)",
          "old_line_content": "            }",
          "new_line_content": "                redisLog(REDIS_NOTICE,\"Max number of open files set to %d\",",
          "content_same": false
        },
        {
          "line": 2504,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n                    \"master_sync_left_bytes:%lld\\r\\n\"\n                    \"master_sync_last_io_seconds_ago:%d\\r\\n\"\n                    , (long long)\n                        (server.repl_transfer_size - server.repl_transfer_read),\n                    (int)(server.unixtime-server.repl_transfer_lastio)\n                )",
          "old_line_content": "                    \"master_sync_last_io_seconds_ago:%d\\r\\n\"",
          "new_line_content": "                info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 1992,
          "old_api": null,
          "new_api": "flagTransaction",
          "old_text": null,
          "new_text": "flagTransaction(c)",
          "old_line_content": "        return REDIS_OK;",
          "new_line_content": "        flagTransaction(c);",
          "content_same": false
        },
        {
          "line": 3018,
          "old_api": null,
          "new_api": "checkForSentinelMode",
          "old_text": null,
          "new_text": "checkForSentinelMode(argc,argv)",
          "old_line_content": "",
          "new_line_content": "    server.sentinel_mode = checkForSentinelMode(argc,argv);",
          "content_same": false
        },
        {
          "line": 3019,
          "old_api": null,
          "new_api": "initServerConfig",
          "old_text": null,
          "new_text": "initServerConfig()",
          "old_line_content": "    /* We need to init sentinel right now as parsing the configuration file",
          "new_line_content": "    initServerConfig();",
          "content_same": false
        },
        {
          "line": 1993,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c, shared.bgsaveerr)",
          "old_line_content": "    }",
          "new_line_content": "        addReply(c, shared.bgsaveerr);",
          "content_same": false
        },
        {
          "line": 3025,
          "old_api": null,
          "new_api": "initSentinelConfig",
          "old_text": null,
          "new_text": "initSentinelConfig()",
          "old_line_content": "    }",
          "new_line_content": "        initSentinelConfig();",
          "content_same": false
        },
        {
          "line": 2514,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n                    \"master_link_down_since_seconds:%jd\\r\\n\",\n                    (intmax_t)server.unixtime-server.repl_down_since)",
          "old_line_content": "                    (intmax_t)server.unixtime-server.repl_down_since);",
          "new_line_content": "                info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 3026,
          "old_api": null,
          "new_api": "initSentinel",
          "old_text": null,
          "new_text": "initSentinel()",
          "old_line_content": "",
          "new_line_content": "        initSentinel();",
          "content_same": false
        },
        {
          "line": 2004,
          "old_api": null,
          "new_api": "flagTransaction",
          "old_text": null,
          "new_text": "flagTransaction(c)",
          "old_line_content": "        return REDIS_OK;",
          "new_line_content": "        flagTransaction(c);",
          "content_same": false
        },
        {
          "line": 2005,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c, shared.noreplicaserr)",
          "old_line_content": "    }",
          "new_line_content": "        addReply(c, shared.noreplicaserr);",
          "content_same": false
        },
        {
          "line": 2518,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n                \"slave_priority:%d\\r\\n\"\n                \"slave_read_only:%d\\r\\n\",\n                server.slave_priority,\n                server.repl_slave_ro)",
          "old_line_content": "                \"slave_read_only:%d\\r\\n\",",
          "new_line_content": "            info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 3031,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "",
          "new_line_content": "        sds options = sdsempty();",
          "content_same": false
        },
        {
          "line": 3038,
          "old_api": null,
          "new_api": "usage",
          "old_text": null,
          "new_text": "usage()",
          "old_line_content": "            if (argc == 3) {",
          "new_line_content": "            strcmp(argv[1], \"-h\") == 0) usage();",
          "content_same": false
        },
        {
          "line": 2527,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.slaves)",
          "old_line_content": "        /* If min-slaves-to-write is active, write the number of slaves",
          "new_line_content": "            listLength(server.slaves));",
          "content_same": false
        },
        {
          "line": 2015,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c, shared.roslaveerr)",
          "old_line_content": "    }",
          "new_line_content": "        addReply(c, shared.roslaveerr);",
          "content_same": false
        },
        {
          "line": 3041,
          "old_api": null,
          "new_api": "atoi",
          "old_text": null,
          "new_text": "atoi(argv[2])",
          "old_line_content": "            } else {",
          "new_line_content": "                memtest(atoi(argv[2]),50);",
          "content_same": false
        },
        {
          "line": 2020,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(c->pubsub_patterns)",
          "old_line_content": "        c->cmd->proc != subscribeCommand &&",
          "new_line_content": "    if ((dictSize(c->pubsub_channels) > 0 || listLength(c->pubsub_patterns) > 0)",
          "content_same": false
        },
        {
          "line": 2533,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n                \"min_slaves_good_slaves:%d\\r\\n\",\n                server.repl_good_slaves_count)",
          "old_line_content": "                server.repl_good_slaves_count);",
          "new_line_content": "            info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 3045,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr,\"Example: ./redis-server --test-memory 4096\\n\\n\")",
          "old_line_content": "            }",
          "new_line_content": "                fprintf(stderr,\"Example: ./redis-server --test-memory 4096\\n\\n\");",
          "content_same": false
        },
        {
          "line": 3046,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "        }",
          "new_line_content": "                exit(1);",
          "content_same": false
        },
        {
          "line": 1509,
          "old_api": null,
          "new_api": "anetTcpServer",
          "old_text": null,
          "new_text": "anetTcpServer(server.neterr,port,NULL)",
          "old_line_content": "            /* Exit the loop if we were able to bind * on IPv4 or IPv6,",
          "new_line_content": "            fds[*count] = anetTcpServer(server.neterr,port,NULL);",
          "content_same": false
        },
        {
          "line": 2538,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.slaves)",
          "old_line_content": "            listNode *ln;",
          "new_line_content": "        if (listLength(server.slaves)) {",
          "content_same": false
        },
        {
          "line": 2026,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"only (P)SUBSCRIBE / (P)UNSUBSCRIBE / QUIT allowed in this context\")",
          "old_line_content": "    }",
          "new_line_content": "        addReplyError(c,\"only (P)SUBSCRIBE / (P)UNSUBSCRIBE / QUIT allowed in this context\");",
          "content_same": false
        },
        {
          "line": 1517,
          "old_api": null,
          "new_api": "anetTcp6Server",
          "old_text": null,
          "new_text": "anetTcp6Server(server.neterr,port,server.bindaddr[j])",
          "old_line_content": "            /* Bind IPv4 address. */",
          "new_line_content": "            fds[*count] = anetTcp6Server(server.neterr,port,server.bindaddr[j]);",
          "content_same": false
        },
        {
          "line": 2544,
          "old_api": null,
          "new_api": "listNext",
          "old_text": null,
          "new_text": "listNext(&li)",
          "old_line_content": "                char *state = NULL;",
          "new_line_content": "            while((ln = listNext(&li))) {",
          "content_same": false
        },
        {
          "line": 2545,
          "old_api": null,
          "new_api": "listNodeValue",
          "old_text": null,
          "new_text": "listNodeValue(ln)",
          "old_line_content": "                char ip[REDIS_IP_STR_LEN];",
          "new_line_content": "                redisClient *slave = listNodeValue(ln);",
          "content_same": false
        },
        {
          "line": 1520,
          "old_api": null,
          "new_api": "anetTcpServer",
          "old_text": null,
          "new_text": "anetTcpServer(server.neterr,port,server.bindaddr[j])",
          "old_line_content": "        if (fds[*count] == ANET_ERR) {",
          "new_line_content": "            fds[*count] = anetTcpServer(server.neterr,port,server.bindaddr[j]);",
          "content_same": false
        },
        {
          "line": 1523,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\n                \"Creating Server TCP listening socket %s:%d: %s\",\n                server.bindaddr[j] ? server.bindaddr[j] : \"*\",\n                server.port, server.neterr)",
          "old_line_content": "                server.bindaddr[j] ? server.bindaddr[j] : \"*\",",
          "new_line_content": "            redisLog(REDIS_WARNING,",
          "content_same": false
        },
        {
          "line": 2036,
          "old_api": null,
          "new_api": "flagTransaction",
          "old_text": null,
          "new_text": "flagTransaction(c)",
          "old_line_content": "        return REDIS_OK;",
          "new_line_content": "        flagTransaction(c);",
          "content_same": false
        },
        {
          "line": 3061,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(options,argv[j]+2)",
          "old_line_content": "            } else {",
          "new_line_content": "                options = sdscat(options,argv[j]+2);",
          "content_same": false
        },
        {
          "line": 3062,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(options,\" \")",
          "old_line_content": "                /* Option argument */",
          "new_line_content": "                options = sdscat(options,\" \");",
          "content_same": false
        },
        {
          "line": 2551,
          "old_api": null,
          "new_api": "anetPeerToString",
          "old_text": null,
          "new_text": "anetPeerToString(slave->fd,ip,sizeof(ip),&port)",
          "old_line_content": "                case REDIS_REPL_WAIT_BGSAVE_START:",
          "new_line_content": "                if (anetPeerToString(slave->fd,ip,sizeof(ip),&port) == -1) continue;",
          "content_same": false
        },
        {
          "line": 2037,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c, shared.masterdownerr)",
          "old_line_content": "    }",
          "new_line_content": "        addReply(c, shared.masterdownerr);",
          "content_same": false
        },
        {
          "line": 3065,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(argv[j])",
          "old_line_content": "            }",
          "new_line_content": "                options = sdscatrepr(options,argv[j],strlen(argv[j]));",
          "content_same": false
        },
        {
          "line": 3066,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(options,\" \")",
          "old_line_content": "            j++;",
          "new_line_content": "                options = sdscat(options,\" \");",
          "content_same": false
        },
        {
          "line": 2044,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c, shared.loadingerr)",
          "old_line_content": "    }",
          "new_line_content": "        addReply(c, shared.loadingerr);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 1536,
          "old_api": "signal",
          "new_api": null,
          "old_text": "signal(SIGPIPE, SIG_IGN)",
          "new_text": null,
          "old_line_content": "    signal(SIGPIPE, SIG_IGN);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2052,
          "old_api": "tolower",
          "new_api": null,
          "old_text": "tolower(((char*)c->argv[1]->ptr)[0])",
          "new_text": null,
          "old_line_content": "          tolower(((char*)c->argv[1]->ptr)[0]) == 'n') &&",
          "new_line_content": "        !(c->cmd->proc == shutdownCommand &&",
          "content_same": false
        },
        {
          "line": 2564,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "                    lag = time(NULL) - slave->repl_ack_time;",
          "new_line_content": "                if (state == NULL) continue;",
          "content_same": false
        },
        {
          "line": 3076,
          "old_api": "initServer",
          "new_api": null,
          "old_text": "initServer()",
          "new_text": null,
          "old_line_content": "    initServer();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2055,
          "old_api": "tolower",
          "new_api": null,
          "old_text": "tolower(((char*)c->argv[1]->ptr)[0])",
          "new_text": null,
          "old_line_content": "          tolower(((char*)c->argv[1]->ptr)[0]) == 'k'))",
          "new_line_content": "        !(c->cmd->proc == scriptCommand &&",
          "content_same": false
        },
        {
          "line": 1540,
          "old_api": "openlog",
          "new_api": null,
          "old_text": "openlog(server.syslog_ident, LOG_PID | LOG_NDELAY | LOG_NOWAIT,\n            server.syslog_facility)",
          "new_text": null,
          "old_line_content": "        openlog(server.syslog_ident, LOG_PID | LOG_NDELAY | LOG_NOWAIT,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1545,
          "old_api": "listCreate",
          "new_api": null,
          "old_text": "listCreate()",
          "new_text": null,
          "old_line_content": "    server.clients = listCreate();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2058,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c, shared.slowscripterr)",
          "new_text": null,
          "old_line_content": "        addReply(c, shared.slowscripterr);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 3083,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"Server started, Redis version \" REDIS_VERSION)",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING,\"Server started, Redis version \" REDIS_VERSION);",
          "new_line_content": "    if (!server.sentinel_mode) {",
          "content_same": false
        },
        {
          "line": 1546,
          "old_api": "listCreate",
          "new_api": null,
          "old_text": "listCreate()",
          "new_text": null,
          "old_line_content": "    server.clients_to_close = listCreate();",
          "new_line_content": "    server.current_client = NULL;",
          "content_same": false
        },
        {
          "line": 2574,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info,\n            \"master_repl_offset:%lld\\r\\n\"\n            \"repl_backlog_active:%d\\r\\n\"\n            \"repl_backlog_size:%lld\\r\\n\"\n            \"repl_backlog_first_byte_offset:%lld\\r\\n\"\n            \"repl_backlog_histlen:%lld\\r\\n\",\n            server.master_repl_offset,\n            server.repl_backlog != NULL,\n            server.repl_backlog_size,\n            server.repl_backlog_off,\n            server.repl_backlog_histlen)",
          "new_text": null,
          "old_line_content": "        info = sdscatprintf(info,",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1551,
          "old_api": "listCreate",
          "new_api": null,
          "old_text": "listCreate()",
          "new_text": null,
          "old_line_content": "    server.ready_keys = listCreate();",
          "new_line_content": "    server.slaveseldb = -1; /* Force to emit the first SELECT command. */",
          "content_same": false
        },
        {
          "line": 3090,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\n                    \"You can't have keys in a DB different than DB 0 when in \"\n                    \"Cluster mode. Exiting.\")",
          "new_text": null,
          "old_line_content": "                redisLog(REDIS_WARNING,",
          "new_line_content": "        if (server.cluster_enabled) {",
          "content_same": false
        },
        {
          "line": 2067,
          "old_api": "queueMultiCommand",
          "new_api": null,
          "old_text": "queueMultiCommand(c)",
          "new_text": null,
          "old_line_content": "        queueMultiCommand(c);",
          "new_line_content": "        c->cmd->proc != multiCommand && c->cmd->proc != watchCommand)",
          "content_same": false
        },
        {
          "line": 2068,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.queued)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.queued);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 3093,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "                exit(1);",
          "new_line_content": "                    \"You can't have keys in a DB different than DB 0 when in \"",
          "content_same": false
        },
        {
          "line": 1554,
          "old_api": "adjustOpenFilesLimit",
          "new_api": null,
          "old_text": "adjustOpenFilesLimit()",
          "new_text": null,
          "old_line_content": "    adjustOpenFilesLimit();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2071,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.ready_keys)",
          "new_text": null,
          "old_line_content": "        if (listLength(server.ready_keys))",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 1559,
          "old_api": "listenToPort",
          "new_api": null,
          "old_text": "listenToPort(server.port,server.ipfd,&server.ipfd_count)",
          "new_text": null,
          "old_line_content": "    if (listenToPort(server.port,server.ipfd,&server.ipfd_count) == REDIS_ERR)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3097,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_NOTICE,\"The server is now ready to accept connections on port %d\", server.port)",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_NOTICE,\"The server is now ready to accept connections on port %d\", server.port);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1560,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "        exit(1);",
          "new_line_content": "    /* Open the TCP listening socket for the user commands. */",
          "content_same": false
        },
        {
          "line": 2588,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(section,\"cpu\")",
          "new_text": null,
          "old_line_content": "    if (allsections || defsections || !strcasecmp(section,\"cpu\")) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2589,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(info,\"\\r\\n\")",
          "new_text": null,
          "old_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "new_line_content": "    /* CPU */",
          "content_same": false
        },
        {
          "line": 1564,
          "old_api": "unlink",
          "new_api": null,
          "old_text": "unlink(server.unixsocket)",
          "new_text": null,
          "old_line_content": "        unlink(server.unixsocket); /* don't care if this fails */",
          "new_line_content": "    /* Open the listening Unix domain socket. */",
          "content_same": false
        },
        {
          "line": 1565,
          "old_api": "anetUnixServer",
          "new_api": null,
          "old_text": "anetUnixServer(server.neterr,server.unixsocket,server.unixsocketperm)",
          "new_text": null,
          "old_line_content": "        server.sofd = anetUnixServer(server.neterr,server.unixsocket,server.unixsocketperm);",
          "new_line_content": "    if (server.unixsocket != NULL) {",
          "content_same": false
        },
        {
          "line": 3104,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"WARNING: You specified a maxmemory value that is less than 1MB (current value is %llu bytes). Are you sure this is what you really want?\", server.maxmemory)",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING,\"WARNING: You specified a maxmemory value that is less than 1MB (current value is %llu bytes). Are you sure this is what you really want?\", server.maxmemory);",
          "new_line_content": "    /* Warning the user about suspicious maxmemory setting. */",
          "content_same": false
        },
        {
          "line": 1568,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "            exit(1);",
          "new_line_content": "        if (server.sofd == ANET_ERR) {",
          "content_same": false
        },
        {
          "line": 3107,
          "old_api": "aeSetBeforeSleepProc",
          "new_api": null,
          "old_text": "aeSetBeforeSleepProc(server.el,beforeSleep)",
          "new_text": null,
          "old_line_content": "    aeSetBeforeSleepProc(server.el,beforeSleep);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2084,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(server.ipfd[j])",
          "new_text": null,
          "old_line_content": "    for (j = 0; j < server.ipfd_count; j++) close(server.ipfd[j]);",
          "new_line_content": "    int j;",
          "content_same": false
        },
        {
          "line": 2085,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(server.sofd)",
          "new_text": null,
          "old_line_content": "    if (server.sofd != -1) close(server.sofd);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3108,
          "old_api": "aeMain",
          "new_api": null,
          "old_text": "aeMain(server.el)",
          "new_text": null,
          "old_line_content": "    aeMain(server.el);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1574,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING, \"Configured to not listen anywhere, exiting.\")",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING, \"Configured to not listen anywhere, exiting.\");",
          "new_line_content": "    /* Abort if there are no listening sockets at all. */",
          "content_same": false
        },
        {
          "line": 1575,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "        exit(1);",
          "new_line_content": "    if (server.ipfd_count == 0 && server.sofd < 0) {",
          "content_same": false
        },
        {
          "line": 2090,
          "old_api": "unlink",
          "new_api": null,
          "old_text": "unlink(server.unixsocket)",
          "new_text": null,
          "old_line_content": "        unlink(server.unixsocket); /* don't care if this fails */",
          "new_line_content": "    if (unlink_unix_socket && server.unixsocket) {",
          "content_same": false
        },
        {
          "line": 2603,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(section,\"commandstats\")",
          "new_text": null,
          "old_line_content": "    if (allsections || !strcasecmp(section,\"commandstats\")) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2604,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(info,\"\\r\\n\")",
          "new_text": null,
          "old_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "new_line_content": "    /* cmdtime */",
          "content_same": false
        },
        {
          "line": 1580,
          "old_api": "dictCreate",
          "new_api": null,
          "old_text": "dictCreate(&dbDictType,NULL)",
          "new_text": null,
          "old_line_content": "        server.db[j].dict = dictCreate(&dbDictType,NULL);",
          "new_line_content": "    /* Create the Redis databases, and initialize other internal state. */",
          "content_same": false
        },
        {
          "line": 1581,
          "old_api": "dictCreate",
          "new_api": null,
          "old_text": "dictCreate(&keyptrDictType,NULL)",
          "new_text": null,
          "old_line_content": "        server.db[j].expires = dictCreate(&keyptrDictType,NULL);",
          "new_line_content": "    for (j = 0; j < server.dbnum; j++) {",
          "content_same": false
        },
        {
          "line": 2098,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"User requested shutdown...\")",
          "new_text": null,
          "old_line_content": "    redisLog(REDIS_WARNING,\"User requested shutdown...\");",
          "new_line_content": "    int nosave = flags & REDIS_SHUTDOWN_NOSAVE;",
          "content_same": false
        },
        {
          "line": 2611,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info,\n                \"cmdstat_%s:calls=%lld,usec=%lld,usec_per_call=%.2f\\r\\n\",\n                c->name, c->calls, c->microseconds,\n                (c->calls == 0) ? 0 : ((float)c->microseconds/c->calls))",
          "new_text": null,
          "old_line_content": "            info = sdscatprintf(info,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1588,
          "old_api": "dictCreate",
          "new_api": null,
          "old_text": "dictCreate(&keylistDictType,NULL)",
          "new_text": null,
          "old_line_content": "    server.pubsub_channels = dictCreate(&keylistDictType,NULL);",
          "new_line_content": "        server.db[j].avg_ttl = 0;",
          "content_same": false
        },
        {
          "line": 1589,
          "old_api": "listCreate",
          "new_api": null,
          "old_text": "listCreate()",
          "new_text": null,
          "old_line_content": "    server.pubsub_patterns = listCreate();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2103,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"There is a child saving an .rdb. Killing it!\")",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING,\"There is a child saving an .rdb. Killing it!\");",
          "new_line_content": "       overwrite the synchronous saving did by SHUTDOWN. */",
          "content_same": false
        },
        {
          "line": 2104,
          "old_api": "kill",
          "new_api": null,
          "old_text": "kill(server.rdb_child_pid,SIGUSR1)",
          "new_text": null,
          "old_line_content": "        kill(server.rdb_child_pid,SIGUSR1);",
          "new_line_content": "    if (server.rdb_child_pid != -1) {",
          "content_same": false
        },
        {
          "line": 2619,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(section,\"cluster\")",
          "new_text": null,
          "old_line_content": "    if (allsections || defsections || !strcasecmp(section,\"cluster\")) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2620,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(info,\"\\r\\n\")",
          "new_text": null,
          "old_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "new_line_content": "    /* Cluster */",
          "content_same": false
        },
        {
          "line": 1595,
          "old_api": "aofRewriteBufferReset",
          "new_api": null,
          "old_text": "aofRewriteBufferReset()",
          "new_text": null,
          "old_line_content": "    aofRewriteBufferReset();",
          "new_line_content": "    server.rdb_child_pid = -1;",
          "content_same": false
        },
        {
          "line": 1596,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "    server.aof_buf = sdsempty();",
          "new_line_content": "    server.aof_child_pid = -1;",
          "content_same": false
        },
        {
          "line": 2111,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\n                \"There is a child rewriting the AOF. Killing it!\")",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_WARNING,",
          "new_line_content": "         * but contains the full dataset anyway. */",
          "content_same": false
        },
        {
          "line": 2116,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_NOTICE,\"Calling fsync() on the AOF file.\")",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_NOTICE,\"Calling fsync() on the AOF file.\");",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2117,
          "old_api": "aof_fsync",
          "new_api": null,
          "old_text": "aof_fsync(server.aof_fd)",
          "new_text": null,
          "old_line_content": "        aof_fsync(server.aof_fd);",
          "new_line_content": "        /* Append only file: fsync() the AOF and exit */",
          "content_same": false
        },
        {
          "line": 2628,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(section,\"keyspace\")",
          "new_text": null,
          "old_line_content": "    if (allsections || defsections || !strcasecmp(section,\"keyspace\")) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2629,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(info,\"\\r\\n\")",
          "new_text": null,
          "old_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "new_line_content": "    /* Key space */",
          "content_same": false
        },
        {
          "line": 2120,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_NOTICE,\"Saving the final RDB snapshot before exiting.\")",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_NOTICE,\"Saving the final RDB snapshot before exiting.\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1606,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "    server.stat_starttime = time(NULL);",
          "new_line_content": "    server.stat_expiredkeys = 0;",
          "content_same": false
        },
        {
          "line": 2634,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(server.db[j].dict)",
          "new_text": null,
          "old_line_content": "            keys = dictSize(server.db[j].dict);",
          "new_line_content": "            long long keys, vkeys;",
          "content_same": false
        },
        {
          "line": 2635,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(server.db[j].expires)",
          "new_text": null,
          "old_line_content": "            vkeys = dictSize(server.db[j].expires);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1615,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(server.ops_sec_samples,0,sizeof(server.ops_sec_samples))",
          "new_text": null,
          "old_line_content": "    memset(server.ops_sec_samples,0,sizeof(server.ops_sec_samples));",
          "new_line_content": "    server.stat_sync_partial_ok = 0;",
          "content_same": false
        },
        {
          "line": 2128,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"Error trying to save the DB, can't exit.\")",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_WARNING,\"Error trying to save the DB, can't exit.\");",
          "new_line_content": "             * saving aborted, handling special stuff like slaves pending for",
          "content_same": false
        },
        {
          "line": 1620,
          "old_api": "mstime",
          "new_api": null,
          "old_text": "mstime()",
          "new_text": null,
          "old_line_content": "    server.mstime = mstime();",
          "new_line_content": "    server.ops_sec_last_sample_ops = 0;",
          "content_same": false
        },
        {
          "line": 2133,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_NOTICE,\"Removing the pid file.\")",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_NOTICE,\"Removing the pid file.\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2134,
          "old_api": "unlink",
          "new_api": null,
          "old_text": "unlink(server.pidfile)",
          "new_text": null,
          "old_line_content": "        unlink(server.pidfile);",
          "new_line_content": "    if (server.daemonize) {",
          "content_same": false
        },
        {
          "line": 2137,
          "old_api": "closeListeningSockets",
          "new_api": null,
          "old_text": "closeListeningSockets(1)",
          "new_text": null,
          "old_line_content": "    closeListeningSockets(1);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2138,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"Redis is now ready to exit, bye bye...\")",
          "new_text": null,
          "old_line_content": "    redisLog(REDIS_WARNING,\"Redis is now ready to exit, bye bye...\");",
          "new_line_content": "    /* Close the listening sockets. Apparently this allows faster restarts. */",
          "content_same": false
        },
        {
          "line": 2650,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.syntaxerr)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.syntaxerr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1626,
          "old_api": "aeCreateTimeEvent",
          "new_api": null,
          "old_text": "aeCreateTimeEvent(server.el, 1, serverCron, NULL, NULL)",
          "new_text": null,
          "old_line_content": "    if(aeCreateTimeEvent(server.el, 1, serverCron, NULL, NULL) == AE_ERR) {",
          "new_line_content": "    /* Create the serverCron() time event, that's our main way to process",
          "content_same": false
        },
        {
          "line": 2653,
          "old_api": "genRedisInfoString",
          "new_api": null,
          "old_text": "genRedisInfoString(section)",
          "new_text": null,
          "old_line_content": "    sds info = genRedisInfoString(section);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 2654,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "    addReplySds(c,sdscatprintf(sdsempty(),\"$%lu\\r\\n\",",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1627,
          "old_api": "redisPanic",
          "new_api": null,
          "old_text": "redisPanic(\"Can't create the serverCron time event.\")",
          "new_text": null,
          "old_line_content": "        redisPanic(\"Can't create the serverCron time event.\");",
          "new_line_content": "     * background operations. */",
          "content_same": false
        },
        {
          "line": 1634,
          "old_api": "aeCreateFileEvent",
          "new_api": null,
          "old_text": "aeCreateFileEvent(server.el, server.ipfd[j], AE_READABLE,\n            acceptTcpHandler,NULL)",
          "new_text": null,
          "old_line_content": "        if (aeCreateFileEvent(server.el, server.ipfd[j], AE_READABLE,",
          "new_line_content": "     * domain sockets. */",
          "content_same": false
        },
        {
          "line": 1637,
          "old_api": "redisPanic",
          "new_api": null,
          "old_text": "redisPanic(\n                    \"Unrecoverable error creating server.ipfd file event.\")",
          "new_text": null,
          "old_line_content": "                redisPanic(",
          "new_line_content": "            acceptTcpHandler,NULL) == AE_ERR)",
          "content_same": false
        },
        {
          "line": 2665,
          "old_api": "listAddNodeTail",
          "new_api": null,
          "old_text": "listAddNodeTail(server.monitors,c)",
          "new_text": null,
          "old_line_content": "    listAddNodeTail(server.monitors,c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2666,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.ok)",
          "new_text": null,
          "old_line_content": "    addReply(c,shared.ok);",
          "new_line_content": "    c->flags |= (REDIS_SLAVE|REDIS_MONITOR);",
          "content_same": false
        },
        {
          "line": 1641,
          "old_api": "aeCreateFileEvent",
          "new_api": null,
          "old_text": "aeCreateFileEvent(server.el,server.sofd,AE_READABLE,\n        acceptUnixHandler,NULL)",
          "new_text": null,
          "old_line_content": "    if (server.sofd > 0 && aeCreateFileEvent(server.el,server.sofd,AE_READABLE,",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1642,
          "old_api": "redisPanic",
          "new_api": null,
          "old_text": "redisPanic(\"Unrecoverable error creating server.sofd file event.\")",
          "new_text": null,
          "old_line_content": "        acceptUnixHandler,NULL) == AE_ERR) redisPanic(\"Unrecoverable error creating server.sofd file event.\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1646,
          "old_api": "open",
          "new_api": null,
          "old_text": "open(server.aof_filename,\n                               O_WRONLY|O_APPEND|O_CREAT,0644)",
          "new_text": null,
          "old_line_content": "        server.aof_fd = open(server.aof_filename,",
          "new_line_content": "    /* Open the AOF file if needed. */",
          "content_same": false
        },
        {
          "line": 2159,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(a)",
          "new_text": null,
          "old_line_content": "    int alen = strlen(a);",
          "new_line_content": "     * relative to the length of the user provided string, so no information",
          "content_same": false
        },
        {
          "line": 2160,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(b)",
          "new_text": null,
          "old_line_content": "    int blen = strlen(b);",
          "new_line_content": "     * leak is possible in the following two lines of code. */",
          "content_same": false
        },
        {
          "line": 1649,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING, \"Can't open the append-only file: %s\",\n                strerror(errno))",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_WARNING, \"Can't open the append-only file: %s\",",
          "new_line_content": "                               O_WRONLY|O_APPEND|O_CREAT,0644);",
          "content_same": false
        },
        {
          "line": 1650,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "                strerror(errno));",
          "new_line_content": "        if (server.aof_fd == -1) {",
          "content_same": false
        },
        {
          "line": 2169,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(bufa,0,sizeof(bufa))",
          "new_text": null,
          "old_line_content": "    memset(bufa,0,sizeof(bufa));        /* Constant time. */",
          "new_line_content": "    if (alen > sizeof(bufa) || blen > sizeof(bufb)) return 1;",
          "content_same": false
        },
        {
          "line": 2170,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(bufb,0,sizeof(bufb))",
          "new_text": null,
          "old_line_content": "    memset(bufb,0,sizeof(bufb));        /* Constant time. */",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1660,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"Warning: 32 bit instance detected but no memory limit set. Setting 3 GB maxmemory limit with 'noeviction' policy now.\")",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING,\"Warning: 32 bit instance detected but no memory limit set. Setting 3 GB maxmemory limit with 'noeviction' policy now.\");",
          "new_line_content": "     * useless crashes of the Redis instance for out of memory. */",
          "content_same": false
        },
        {
          "line": 2173,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(bufa,a,alen)",
          "new_text": null,
          "old_line_content": "    memcpy(bufa,a,alen);",
          "new_line_content": "    /* Again the time of the following two copies is proportional to",
          "content_same": false
        },
        {
          "line": 2174,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(bufb,b,blen)",
          "new_text": null,
          "old_line_content": "    memcpy(bufb,b,blen);",
          "new_line_content": "     * len(a) + len(b) so no info is leaked. */",
          "content_same": false
        },
        {
          "line": 2688,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.slaves)",
          "new_text": null,
          "old_line_content": "    int slaves = listLength(server.slaves);",
          "new_line_content": "int freeMemoryIfNeeded(void) {",
          "content_same": false
        },
        {
          "line": 1665,
          "old_api": "clusterInit",
          "new_api": null,
          "old_text": "clusterInit()",
          "new_text": null,
          "old_line_content": "    if (server.cluster_enabled) clusterInit();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1666,
          "old_api": "replicationScriptCacheInit",
          "new_api": null,
          "old_text": "replicationScriptCacheInit()",
          "new_text": null,
          "old_line_content": "    replicationScriptCacheInit();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2692,
          "old_api": "zmalloc_used_memory",
          "new_api": null,
          "old_text": "zmalloc_used_memory()",
          "new_text": null,
          "old_line_content": "    mem_used = zmalloc_used_memory();",
          "new_line_content": "    /* Remove the size of slaves output buffers and AOF buffer from the",
          "content_same": false
        },
        {
          "line": 2697,
          "old_api": "listRewind",
          "new_api": null,
          "old_text": "listRewind(server.slaves,&li)",
          "new_text": null,
          "old_line_content": "        listRewind(server.slaves,&li);",
          "new_line_content": "        listNode *ln;",
          "content_same": false
        },
        {
          "line": 2698,
          "old_api": "listNext",
          "new_api": null,
          "old_text": "listNext(&li)",
          "new_text": null,
          "old_line_content": "        while((ln = listNext(&li))) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2188,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\"Client sent AUTH, but no password is set\")",
          "new_text": null,
          "old_line_content": "        addReplyError(c,\"Client sent AUTH, but no password is set\");",
          "new_line_content": "void authCommand(redisClient *c) {",
          "content_same": false
        },
        {
          "line": 2189,
          "old_api": "time_independent_strcmp",
          "new_api": null,
          "old_text": "time_independent_strcmp(c->argv[1]->ptr, server.requirepass)",
          "new_text": null,
          "old_line_content": "    } else if (!time_independent_strcmp(c->argv[1]->ptr, server.requirepass)) {",
          "new_line_content": "    if (!server.requirepass) {",
          "content_same": false
        },
        {
          "line": 2194,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\"invalid password\")",
          "new_text": null,
          "old_line_content": "      addReplyError(c,\"invalid password\");",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 2708,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(server.aof_buf)",
          "new_text": null,
          "old_line_content": "        mem_used -= sdslen(server.aof_buf);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2709,
          "old_api": "aofRewriteBufferSize",
          "new_api": null,
          "old_text": "aofRewriteBufferSize()",
          "new_text": null,
          "old_line_content": "        mem_used -= aofRewriteBufferSize();",
          "new_line_content": "    if (server.aof_state != REDIS_AOF_OFF) {",
          "content_same": false
        },
        {
          "line": 2199,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.pong)",
          "new_text": null,
          "old_line_content": "    addReply(c,shared.pong);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2203,
          "old_api": "addReplyBulk",
          "new_api": null,
          "old_text": "addReplyBulk(c,c->argv[1])",
          "new_text": null,
          "old_line_content": "    addReplyBulk(c,c->argv[1]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1184,
          "old_api": "activeExpireCycle",
          "new_api": null,
          "old_text": "activeExpireCycle(ACTIVE_EXPIRE_CYCLE_FAST)",
          "new_text": null,
          "old_line_content": "    activeExpireCycle(ACTIVE_EXPIRE_CYCLE_FAST);",
          "new_line_content": "     * ASAP if a fast cycle is not needed). */",
          "content_same": false
        },
        {
          "line": 1697,
          "old_api": "redisPanic",
          "new_api": null,
          "old_text": "redisPanic(\"Unsupported command flag\")",
          "new_text": null,
          "old_line_content": "            default: redisPanic(\"Unsupported command flag\"); break;",
          "new_line_content": "            case 'M': c->flags |= REDIS_CMD_SKIP_MONITOR; break;",
          "content_same": false
        },
        {
          "line": 2211,
          "old_api": "gettimeofday",
          "new_api": null,
          "old_text": "gettimeofday(&tv,NULL)",
          "new_text": null,
          "old_line_content": "    gettimeofday(&tv,NULL);",
          "new_line_content": "    /* gettimeofday() can only fail if &tv is a bad address so we",
          "content_same": false
        },
        {
          "line": 2212,
          "old_api": "addReplyMultiBulkLen",
          "new_api": null,
          "old_text": "addReplyMultiBulkLen(c,2)",
          "new_text": null,
          "old_line_content": "    addReplyMultiBulkLen(c,2);",
          "new_line_content": "     * don't check for errors. */",
          "content_same": false
        },
        {
          "line": 1187,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.unblocked_clients)",
          "new_text": null,
          "old_line_content": "    while (listLength(server.unblocked_clients)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1188,
          "old_api": "listFirst",
          "new_api": null,
          "old_text": "listFirst(server.unblocked_clients)",
          "new_text": null,
          "old_line_content": "        ln = listFirst(server.unblocked_clients);",
          "new_line_content": "    /* Try to process pending commands for clients that were just unblocked. */",
          "content_same": false
        },
        {
          "line": 1702,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(c->name)",
          "new_text": null,
          "old_line_content": "        retval1 = dictAdd(server.commands, sdsnew(c->name), c);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1705,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(c->name)",
          "new_text": null,
          "old_line_content": "        retval2 = dictAdd(server.orig_commands, sdsnew(c->name), c);",
          "new_line_content": "        /* Populate an additional dictionary that will be unaffected",
          "content_same": false
        },
        {
          "line": 1706,
          "old_api": "redisAssert",
          "new_api": null,
          "old_text": "redisAssert(retval1 == DICT_OK && retval2 == DICT_OK)",
          "new_text": null,
          "old_line_content": "        redisAssert(retval1 == DICT_OK && retval2 == DICT_OK);",
          "new_line_content": "         * by rename-command statements in redis.conf. */",
          "content_same": false
        },
        {
          "line": 1195,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(c->querybuf)",
          "new_text": null,
          "old_line_content": "        if (c->querybuf && sdslen(c->querybuf) > 0) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2224,
          "old_api": "sprintf",
          "new_api": null,
          "old_text": "sprintf(s,\"%lluB\",n)",
          "new_text": null,
          "old_line_content": "        sprintf(s,\"%lluB\",n);",
          "new_line_content": "    if (n < 1024) {",
          "content_same": false
        },
        {
          "line": 2738,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(dict)",
          "new_text": null,
          "old_line_content": "            if (dictSize(dict) == 0) continue;",
          "new_line_content": "                dict = server.db[j].expires;",
          "content_same": false
        },
        {
          "line": 1203,
          "old_api": "flushAppendOnlyFile",
          "new_api": null,
          "old_text": "flushAppendOnlyFile(0)",
          "new_text": null,
          "old_line_content": "    flushAppendOnlyFile(0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2228,
          "old_api": "sprintf",
          "new_api": null,
          "old_text": "sprintf(s,\"%.2fK\",d)",
          "new_text": null,
          "old_line_content": "        sprintf(s,\"%.2fK\",d);",
          "new_line_content": "    } else if (n < (1024*1024)) {",
          "content_same": false
        },
        {
          "line": 2231,
          "old_api": "sprintf",
          "new_api": null,
          "old_text": "sprintf(s,\"%.2fM\",d)",
          "new_text": null,
          "old_line_content": "        sprintf(s,\"%.2fM\",d);",
          "new_line_content": "    } else if (n < (1024LL*1024*1024)) {",
          "content_same": false
        },
        {
          "line": 2744,
          "old_api": "dictGetRandomKey",
          "new_api": null,
          "old_text": "dictGetRandomKey(dict)",
          "new_text": null,
          "old_line_content": "                de = dictGetRandomKey(dict);",
          "new_line_content": "                server.maxmemory_policy == REDIS_MAXMEMORY_VOLATILE_RANDOM)",
          "content_same": false
        },
        {
          "line": 2745,
          "old_api": "dictGetKey",
          "new_api": null,
          "old_text": "dictGetKey(de)",
          "new_text": null,
          "old_line_content": "                bestkey = dictGetKey(de);",
          "new_line_content": "            {",
          "content_same": false
        },
        {
          "line": 2234,
          "old_api": "sprintf",
          "new_api": null,
          "old_text": "sprintf(s,\"%.2fG\",d)",
          "new_text": null,
          "old_line_content": "        sprintf(s,\"%.2fG\",d);",
          "new_line_content": "    } else if (n < (1024LL*1024*1024*1024)) {",
          "content_same": false
        },
        {
          "line": 1211,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\"\\r\\n\")",
          "new_text": null,
          "old_line_content": "    shared.crlf = createObject(REDIS_STRING,sdsnew(\"\\r\\n\"));",
          "new_line_content": "    int j;",
          "content_same": false
        },
        {
          "line": 1212,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\"+OK\\r\\n\")",
          "new_text": null,
          "old_line_content": "    shared.ok = createObject(REDIS_STRING,sdsnew(\"+OK\\r\\n\"));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2242,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "    sds info = sdsempty();",
          "new_line_content": " * on memory corruption problems. */",
          "content_same": false
        },
        {
          "line": 2757,
          "old_api": "dictGetRandomKey",
          "new_api": null,
          "old_text": "dictGetRandomKey(dict)",
          "new_text": null,
          "old_line_content": "                    de = dictGetRandomKey(dict);",
          "new_line_content": "                    robj *o;",
          "content_same": false
        },
        {
          "line": 2758,
          "old_api": "dictGetKey",
          "new_api": null,
          "old_text": "dictGetKey(de)",
          "new_text": null,
          "old_line_content": "                    thiskey = dictGetKey(de);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1734,
          "old_api": "zrealloc",
          "new_api": null,
          "old_text": "zrealloc(oa->ops,sizeof(redisOp)*(oa->numops+1))",
          "new_text": null,
          "old_line_content": "    oa->ops = zrealloc(oa->ops,sizeof(redisOp)*(oa->numops+1));",
          "new_line_content": "    redisOp *op;",
          "content_same": false
        },
        {
          "line": 2762,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(db->dict, thiskey)",
          "new_text": null,
          "old_line_content": "                        de = dictFind(db->dict, thiskey);",
          "new_line_content": "                     * to locate the real key, as dict is set to db->expires. */",
          "content_same": false
        },
        {
          "line": 2251,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(section,\"all\")",
          "new_text": null,
          "old_line_content": "        allsections = strcasecmp(section,\"all\") == 0;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2252,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(section,\"default\")",
          "new_text": null,
          "old_line_content": "        defsections = strcasecmp(section,\"default\") == 0;",
          "new_line_content": "    if (section) {",
          "content_same": false
        },
        {
          "line": 2763,
          "old_api": "dictGetVal",
          "new_api": null,
          "old_text": "dictGetVal(de)",
          "new_text": null,
          "old_line_content": "                    o = dictGetVal(de);",
          "new_line_content": "                    if (server.maxmemory_policy == REDIS_MAXMEMORY_VOLATILE_LRU)",
          "content_same": false
        },
        {
          "line": 2255,
          "old_api": "getrusage",
          "new_api": null,
          "old_text": "getrusage(RUSAGE_SELF, &self_ru)",
          "new_text": null,
          "old_line_content": "    getrusage(RUSAGE_SELF, &self_ru);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2256,
          "old_api": "getrusage",
          "new_api": null,
          "old_text": "getrusage(RUSAGE_CHILDREN, &c_ru)",
          "new_text": null,
          "old_line_content": "    getrusage(RUSAGE_CHILDREN, &c_ru);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2260,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(section,\"server\")",
          "new_text": null,
          "old_line_content": "    if (allsections || defsections || !strcasecmp(section,\"server\")) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1753,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(op->argv[j])",
          "new_text": null,
          "old_line_content": "            decrRefCount(op->argv[j]);",
          "new_line_content": "        op = oa->ops+oa->numops;",
          "content_same": false
        },
        {
          "line": 1754,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(op->argv)",
          "new_text": null,
          "old_line_content": "        zfree(op->argv);",
          "new_line_content": "        for (j = 0; j < op->argc; j++)",
          "content_same": false
        },
        {
          "line": 2268,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(info,\"\\r\\n\")",
          "new_text": null,
          "old_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "new_line_content": "        else mode = \"standalone\";",
          "content_same": false
        },
        {
          "line": 2269,
          "old_api": "uname",
          "new_api": null,
          "old_text": "uname(&name)",
          "new_text": null,
          "old_line_content": "        uname(&name);",
          "new_line_content": "    ",
          "content_same": false
        },
        {
          "line": 2780,
          "old_api": "dictGetRandomKey",
          "new_api": null,
          "old_text": "dictGetRandomKey(dict)",
          "new_text": null,
          "old_line_content": "                    de = dictGetRandomKey(dict);",
          "new_line_content": "                    long thisval;",
          "content_same": false
        },
        {
          "line": 2781,
          "old_api": "dictGetKey",
          "new_api": null,
          "old_text": "dictGetKey(de)",
          "new_text": null,
          "old_line_content": "                    thiskey = dictGetKey(de);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1762,
          "old_api": "dictFetchValue",
          "new_api": null,
          "old_text": "dictFetchValue(server.commands, name)",
          "new_text": null,
          "old_line_content": "    return dictFetchValue(server.commands, name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1254,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\":\")",
          "new_text": null,
          "old_line_content": "    shared.colon = createObject(REDIS_STRING,sdsnew(\":\"));",
          "new_line_content": "        \"-NOREPLICAS Not enough good slaves to write.\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 1767,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(s)",
          "new_text": null,
          "old_line_content": "    sds name = sdsnew(s);",
          "new_line_content": "struct redisCommand *lookupCommandByCString(char *s) {",
          "content_same": false
        },
        {
          "line": 1770,
          "old_api": "sdsfree",
          "new_api": null,
          "old_text": "sdsfree(name)",
          "new_text": null,
          "old_line_content": "    sdsfree(name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2797,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(bestkey)",
          "new_text": null,
          "old_line_content": "                robj *keyobj = createStringObject(bestkey,sdslen(bestkey));",
          "new_line_content": "                long long delta;",
          "content_same": false
        },
        {
          "line": 2798,
          "old_api": "propagateExpire",
          "new_api": null,
          "old_text": "propagateExpire(db,keyobj)",
          "new_text": null,
          "old_line_content": "                propagateExpire(db,keyobj);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1261,
          "old_api": "ll2string",
          "new_api": null,
          "old_text": "ll2string(dictid_str,sizeof(dictid_str),j)",
          "new_text": null,
          "old_line_content": "        dictid_len = ll2string(dictid_str,sizeof(dictid_str),j);",
          "new_line_content": "        int dictid_len;",
          "content_same": false
        },
        {
          "line": 1262,
          "old_api": "createObject",
          "new_api": null,
          "old_text": "createObject(REDIS_STRING,\n            sdscatprintf(sdsempty(),\n                \"*2\\r\\n$6\\r\\nSELECT\\r\\n$%d\\r\\n%s\\r\\n\",\n                dictid_len, dictid_str))",
          "new_text": null,
          "old_line_content": "        shared.select[j] = createObject(REDIS_STRING,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2290,
          "old_api": "redisGitSHA1",
          "new_api": null,
          "old_text": "redisGitSHA1()",
          "new_text": null,
          "old_line_content": "            redisGitSHA1(),",
          "new_line_content": "            \"config_file:%s\\r\\n\",",
          "content_same": false
        },
        {
          "line": 2291,
          "old_api": "redisGitDirty",
          "new_api": null,
          "old_text": "redisGitDirty()",
          "new_text": null,
          "old_line_content": "            strtol(redisGitDirty(),NULL,10) > 0,",
          "new_line_content": "            REDIS_VERSION,",
          "content_same": false
        },
        {
          "line": 1267,
          "old_api": "createStringObject",
          "new_api": null,
          "old_text": "createStringObject(\"$7\\r\\nmessage\\r\\n\",13)",
          "new_text": null,
          "old_line_content": "    shared.messagebulk = createStringObject(\"$7\\r\\nmessage\\r\\n\",13);",
          "new_line_content": "                dictid_len, dictid_str));",
          "content_same": false
        },
        {
          "line": 1268,
          "old_api": "createStringObject",
          "new_api": null,
          "old_text": "createStringObject(\"$8\\r\\npmessage\\r\\n\",14)",
          "new_text": null,
          "old_line_content": "    shared.pmessagebulk = createStringObject(\"$8\\r\\npmessage\\r\\n\",14);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1782,
          "old_api": "dictFetchValue",
          "new_api": null,
          "old_text": "dictFetchValue(server.commands, name)",
          "new_text": null,
          "old_line_content": "    struct redisCommand *cmd = dictFetchValue(server.commands, name);",
          "new_line_content": " * correctly even if the command was renamed. */",
          "content_same": false
        },
        {
          "line": 2807,
          "old_api": "zmalloc_used_memory",
          "new_api": null,
          "old_text": "zmalloc_used_memory()",
          "new_text": null,
          "old_line_content": "                delta = (long long) zmalloc_used_memory();",
          "new_line_content": "                 * AOF and Output buffer memory will be freed eventually so",
          "content_same": false
        },
        {
          "line": 2296,
          "old_api": "aeGetApiName",
          "new_api": null,
          "old_text": "aeGetApiName()",
          "new_text": null,
          "old_line_content": "            aeGetApiName(),",
          "new_line_content": "            name.sysname, name.release, name.machine,",
          "content_same": false
        },
        {
          "line": 2808,
          "old_api": "dbDelete",
          "new_api": null,
          "old_text": "dbDelete(db,keyobj)",
          "new_text": null,
          "old_line_content": "                dbDelete(db,keyobj);",
          "new_line_content": "                 * we only care about memory used by the key space. */",
          "content_same": false
        },
        {
          "line": 2812,
          "old_api": "notifyKeyspaceEvent",
          "new_api": null,
          "old_text": "notifyKeyspaceEvent(REDIS_NOTIFY_EVICTED, \"evicted\",\n                    keyobj, db->id)",
          "new_text": null,
          "old_line_content": "                notifyKeyspaceEvent(REDIS_NOTIFY_EVICTED, \"evicted\",",
          "new_line_content": "                mem_freed += delta;",
          "content_same": false
        },
        {
          "line": 2302,
          "old_api": "getpid",
          "new_api": null,
          "old_text": "getpid()",
          "new_text": null,
          "old_line_content": "            (long) getpid(),",
          "new_line_content": "            0,0,0,",
          "content_same": false
        },
        {
          "line": 2306,
          "old_api": "intmax_t)(uptime/(3600*24))",
          "new_api": null,
          "old_text": "intmax_t)(uptime/(3600*24))",
          "new_text": null,
          "old_line_content": "            (intmax_t)(uptime/(3600*24)),",
          "new_line_content": "            server.port,",
          "content_same": false
        },
        {
          "line": 1282,
          "old_api": "createObject",
          "new_api": null,
          "old_text": "createObject(REDIS_STRING,\n            sdscatprintf(sdsempty(),\"*%d\\r\\n\",j))",
          "new_text": null,
          "old_line_content": "        shared.mbulkhdr[j] = createObject(REDIS_STRING,",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1283,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "            sdscatprintf(sdsempty(),\"*%d\\r\\n\",j));",
          "new_line_content": "    for (j = 0; j < REDIS_SHARED_BULKHDR_LEN; j++) {",
          "content_same": false
        },
        {
          "line": 2821,
          "old_api": "flushSlavesOutputBuffers",
          "new_api": null,
          "old_text": "flushSlavesOutputBuffers()",
          "new_text": null,
          "old_line_content": "                if (slaves) flushSlavesOutputBuffers();",
          "new_line_content": "                 * deliver data to the slaves fast enough, so we force the",
          "content_same": false
        },
        {
          "line": 1800,
          "old_api": "feedAppendOnlyFile",
          "new_api": null,
          "old_text": "feedAppendOnlyFile(cmd,dbid,argv,argc)",
          "new_text": null,
          "old_line_content": "        feedAppendOnlyFile(cmd,dbid,argv,argc);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 2313,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(section,\"clients\")",
          "new_text": null,
          "old_line_content": "    if (allsections || defsections || !strcasecmp(section,\"clients\")) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2314,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(info,\"\\r\\n\")",
          "new_text": null,
          "old_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "new_line_content": "    /* Clients */",
          "content_same": false
        },
        {
          "line": 1292,
          "old_api": "getRandomHexChars",
          "new_api": null,
          "old_text": "getRandomHexChars(server.runid,REDIS_RUN_ID_SIZE)",
          "new_text": null,
          "old_line_content": "    getRandomHexChars(server.runid,REDIS_RUN_ID_SIZE);",
          "new_line_content": "    int j;",
          "content_same": false
        },
        {
          "line": 2321,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.slaves)",
          "new_text": null,
          "old_line_content": "            listLength(server.clients)-listLength(server.slaves),",
          "new_line_content": "            \"client_biggest_input_buf:%lu\\r\\n\"",
          "content_same": false
        },
        {
          "line": 2833,
          "old_api": "fopen",
          "new_api": null,
          "old_text": "fopen(\"/proc/sys/vm/overcommit_memory\",\"r\")",
          "new_text": null,
          "old_line_content": "    FILE *fp = fopen(\"/proc/sys/vm/overcommit_memory\",\"r\");",
          "new_line_content": "#ifdef __linux__",
          "content_same": false
        },
        {
          "line": 1810,
          "old_api": "redisOpArrayAppend",
          "new_api": null,
          "old_text": "redisOpArrayAppend(&server.also_propagate,cmd,dbid,argv,argc,target)",
          "new_text": null,
          "old_line_content": "    redisOpArrayAppend(&server.also_propagate,cmd,dbid,argv,argc,target);",
          "new_line_content": "                   int target)",
          "content_same": false
        },
        {
          "line": 2837,
          "old_api": "fgets",
          "new_api": null,
          "old_text": "fgets(buf,64,fp)",
          "new_text": null,
          "old_line_content": "    if (fgets(buf,64,fp) == NULL) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2838,
          "old_api": "fclose",
          "new_api": null,
          "old_text": "fclose(fp)",
          "new_text": null,
          "old_line_content": "        fclose(fp);",
          "new_line_content": "    if (!fp) return -1;",
          "content_same": false
        },
        {
          "line": 2327,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(section,\"memory\")",
          "new_text": null,
          "old_line_content": "    if (allsections || defsections || !strcasecmp(section,\"memory\")) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2841,
          "old_api": "fclose",
          "new_api": null,
          "old_text": "fclose(fp)",
          "new_text": null,
          "old_line_content": "    fclose(fp);",
          "new_line_content": "        return -1;",
          "content_same": false
        },
        {
          "line": 2331,
          "old_api": "zmalloc_used_memory",
          "new_api": null,
          "old_text": "zmalloc_used_memory()",
          "new_text": null,
          "old_line_content": "        bytesToHuman(hmem,zmalloc_used_memory());",
          "new_line_content": "        char peak_hmem[64];",
          "content_same": false
        },
        {
          "line": 2332,
          "old_api": "bytesToHuman",
          "new_api": null,
          "old_text": "bytesToHuman(peak_hmem,server.stat_peak_memory)",
          "new_text": null,
          "old_line_content": "        bytesToHuman(peak_hmem,server.stat_peak_memory);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2847,
          "old_api": "linuxOvercommitMemoryValue",
          "new_api": null,
          "old_text": "linuxOvercommitMemoryValue()",
          "new_text": null,
          "old_line_content": "    if (linuxOvercommitMemoryValue() == 0) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2848,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.\")",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING,\"WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.\");",
          "new_line_content": "void linuxOvercommitMemoryWarning(void) {",
          "content_same": false
        },
        {
          "line": 1311,
          "old_api": "zstrdup",
          "new_api": null,
          "old_text": "zstrdup(REDIS_DEFAULT_LOGFILE)",
          "new_text": null,
          "old_line_content": "    server.logfile = zstrdup(REDIS_DEFAULT_LOGFILE);",
          "new_line_content": "    server.saveparams = NULL;",
          "content_same": false
        },
        {
          "line": 1823,
          "old_api": "ustime",
          "new_api": null,
          "old_text": "ustime()",
          "new_text": null,
          "old_line_content": "    long long dirty, start = ustime(), duration;",
          "new_line_content": "/* Call() is the core of Redis execution of a command */",
          "content_same": false
        },
        {
          "line": 1828,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.monitors)",
          "new_text": null,
          "old_line_content": "    if (listLength(server.monitors) &&",
          "new_line_content": "    /* Sent the command to clients in MONITOR mode, only if the commands are",
          "content_same": false
        },
        {
          "line": 2855,
          "old_api": "fopen",
          "new_api": null,
          "old_text": "fopen(server.pidfile,\"w\")",
          "new_text": null,
          "old_line_content": "    FILE *fp = fopen(server.pidfile,\"w\");",
          "new_line_content": "void createPidFile(void) {",
          "content_same": false
        },
        {
          "line": 2344,
          "old_api": "zmalloc_used_memory",
          "new_api": null,
          "old_text": "zmalloc_used_memory()",
          "new_text": null,
          "old_line_content": "            zmalloc_used_memory(),",
          "new_line_content": "            \"mem_fragmentation_ratio:%.2f\\r\\n\"",
          "content_same": false
        },
        {
          "line": 1832,
          "old_api": "replicationFeedMonitors",
          "new_api": null,
          "old_text": "replicationFeedMonitors(c,server.monitors,c->db->id,c->argv,c->argc)",
          "new_text": null,
          "old_line_content": "        replicationFeedMonitors(c,server.monitors,c->db->id,c->argv,c->argc);",
          "new_line_content": "        !(c->cmd->flags & REDIS_CMD_SKIP_MONITOR))",
          "content_same": false
        },
        {
          "line": 2858,
          "old_api": "fclose",
          "new_api": null,
          "old_text": "fclose(fp)",
          "new_text": null,
          "old_line_content": "        fclose(fp);",
          "new_line_content": "    if (fp) {",
          "content_same": false
        },
        {
          "line": 1323,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "    server.aof_last_fsync = time(NULL);",
          "new_line_content": "    server.aof_rewrite_base_size = 0;",
          "content_same": false
        },
        {
          "line": 2349,
          "old_api": "lua_gc",
          "new_api": null,
          "old_text": "lua_gc(server.lua,LUA_GCCOUNT,0)",
          "new_text": null,
          "old_line_content": "            ((long long)lua_gc(server.lua,LUA_GCCOUNT,0))*1024LL,",
          "new_line_content": "            server.stat_peak_memory,",
          "content_same": false
        },
        {
          "line": 2350,
          "old_api": "zmalloc_get_fragmentation_ratio",
          "new_api": null,
          "old_text": "zmalloc_get_fragmentation_ratio()",
          "new_text": null,
          "old_line_content": "            zmalloc_get_fragmentation_ratio(),",
          "new_line_content": "            peak_hmem,",
          "content_same": false
        },
        {
          "line": 1837,
          "old_api": "redisOpArrayInit",
          "new_api": null,
          "old_text": "redisOpArrayInit(&server.also_propagate)",
          "new_text": null,
          "old_line_content": "    redisOpArrayInit(&server.also_propagate);",
          "new_line_content": "    /* Call the command. */",
          "content_same": false
        },
        {
          "line": 2865,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(0)",
          "new_text": null,
          "old_line_content": "    if (fork() != 0) exit(0); /* parent exits */",
          "new_line_content": "    int fd;",
          "content_same": false
        },
        {
          "line": 2866,
          "old_api": "setsid",
          "new_api": null,
          "old_text": "setsid()",
          "new_text": null,
          "old_line_content": "    setsid(); /* create a new session */",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2356,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(section,\"persistence\")",
          "new_text": null,
          "old_line_content": "    if (allsections || defsections || !strcasecmp(section,\"persistence\")) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2357,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(info,\"\\r\\n\")",
          "new_text": null,
          "old_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "new_line_content": "    /* Persistence */",
          "content_same": false
        },
        {
          "line": 1332,
          "old_api": "zstrdup",
          "new_api": null,
          "old_text": "zstrdup(REDIS_DEFAULT_PID_FILE)",
          "new_text": null,
          "old_line_content": "    server.pidfile = zstrdup(REDIS_DEFAULT_PID_FILE);",
          "new_line_content": "    server.aof_flush_postponed_start = 0;",
          "content_same": false
        },
        {
          "line": 2871,
          "old_api": "open",
          "new_api": null,
          "old_text": "open(\"/dev/null\", O_RDWR, 0)",
          "new_text": null,
          "old_line_content": "    if ((fd = open(\"/dev/null\", O_RDWR, 0)) != -1) {",
          "new_line_content": "     * the 'logfile' is set to 'stdout' in the configuration file",
          "content_same": false
        },
        {
          "line": 2872,
          "old_api": "dup2",
          "new_api": null,
          "old_text": "dup2(fd, STDIN_FILENO)",
          "new_text": null,
          "old_line_content": "        dup2(fd, STDIN_FILENO);",
          "new_line_content": "     * it will not log at all. */",
          "content_same": false
        },
        {
          "line": 1333,
          "old_api": "zstrdup",
          "new_api": null,
          "old_text": "zstrdup(REDIS_DEFAULT_RDB_FILENAME)",
          "new_text": null,
          "old_line_content": "    server.rdb_filename = zstrdup(REDIS_DEFAULT_RDB_FILENAME);",
          "new_line_content": "    server.aof_rewrite_incremental_fsync = REDIS_DEFAULT_AOF_REWRITE_INCREMENTAL_FSYNC;",
          "content_same": false
        },
        {
          "line": 2880,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"Redis server v=%s sha=%s:%d malloc=%s bits=%d build=%llx\\n\",\n        REDIS_VERSION,\n        redisGitSHA1(),\n        atoi(redisGitDirty()) > 0,\n        ZMALLOC_LIB,\n        sizeof(long) == 4 ? 32 : 64,\n        (unsigned long long) redisBuildId())",
          "new_text": null,
          "old_line_content": "    printf(\"Redis server v=%s sha=%s:%d malloc=%s bits=%d build=%llx\\n\",",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2883,
          "old_api": "redisGitDirty",
          "new_api": null,
          "old_text": "redisGitDirty()",
          "new_text": null,
          "old_line_content": "        atoi(redisGitDirty()) > 0,",
          "new_line_content": "        REDIS_VERSION,",
          "content_same": false
        },
        {
          "line": 1861,
          "old_api": "slowlogPushEntryIfNeeded",
          "new_api": null,
          "old_text": "slowlogPushEntryIfNeeded(c->argv,c->argc,duration)",
          "new_text": null,
          "old_line_content": "        slowlogPushEntryIfNeeded(c->argv,c->argc,duration);",
          "new_line_content": "     * per-command statistics that we show in INFO commandstats. */",
          "content_same": false
        },
        {
          "line": 2886,
          "old_api": "redisBuildId",
          "new_api": null,
          "old_text": "redisBuildId()",
          "new_text": null,
          "old_line_content": "        (unsigned long long) redisBuildId());",
          "new_line_content": "        ZMALLOC_LIB,",
          "content_same": false
        },
        {
          "line": 2887,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(0)",
          "new_text": null,
          "old_line_content": "    exit(0);",
          "new_line_content": "        sizeof(long) == 4 ? 32 : 64,",
          "content_same": false
        },
        {
          "line": 2379,
          "old_api": "intmax_t)((server.rdb_child_pid == -1) ?\n                -1 : time(NULL)-server.rdb_save_time_start)",
          "new_api": null,
          "old_text": "intmax_t)((server.rdb_child_pid == -1) ?\n                -1 : time(NULL)-server.rdb_save_time_start)",
          "new_text": null,
          "old_line_content": "            (intmax_t)((server.rdb_child_pid == -1) ?",
          "new_line_content": "            (server.lastbgsave_status == REDIS_OK) ? \"ok\" : \"err\",",
          "content_same": false
        },
        {
          "line": 2891,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr,\"Usage: ./redis-server [/path/to/redis.conf] [options]\\n\")",
          "new_text": null,
          "old_line_content": "    fprintf(stderr,\"Usage: ./redis-server [/path/to/redis.conf] [options]\\n\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2892,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr,\"       ./redis-server - (read config from stdin)\\n\")",
          "new_text": null,
          "old_line_content": "    fprintf(stderr,\"       ./redis-server - (read config from stdin)\\n\");",
          "new_line_content": "void usage() {",
          "content_same": false
        },
        {
          "line": 2380,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "                -1 : time(NULL)-server.rdb_save_time_start),",
          "new_line_content": "            (intmax_t)server.rdb_save_time_last,",
          "content_same": false
        },
        {
          "line": 1360,
          "old_api": "zstrdup",
          "new_api": null,
          "old_text": "zstrdup(REDIS_DEFAULT_CLUSTER_CONFIG_FILE)",
          "new_text": null,
          "old_line_content": "    server.cluster_configfile = zstrdup(REDIS_DEFAULT_CLUSTER_CONFIG_FILE);",
          "new_line_content": "    server.cluster_enabled = 0;",
          "content_same": false
        },
        {
          "line": 2385,
          "old_api": "intmax_t)((server.aof_child_pid == -1) ?\n                -1 : time(NULL)-server.aof_rewrite_time_start)",
          "new_api": null,
          "old_text": "intmax_t)((server.aof_child_pid == -1) ?\n                -1 : time(NULL)-server.aof_rewrite_time_start)",
          "new_text": null,
          "old_line_content": "            (intmax_t)((server.aof_child_pid == -1) ?",
          "new_line_content": "            server.aof_rewrite_scheduled,",
          "content_same": false
        },
        {
          "line": 2386,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "                -1 : time(NULL)-server.aof_rewrite_time_start),",
          "new_line_content": "            (intmax_t)server.aof_rewrite_time_last,",
          "content_same": false
        },
        {
          "line": 1876,
          "old_api": "propagate",
          "new_api": null,
          "old_text": "propagate(c->cmd,c->db->id,c->argv,c->argc,flags)",
          "new_text": null,
          "old_line_content": "            propagate(c->cmd,c->db->id,c->argv,c->argc,flags);",
          "new_line_content": "            flags |= (REDIS_PROPAGATE_REPL | REDIS_PROPAGATE_AOF);",
          "content_same": false
        },
        {
          "line": 1365,
          "old_api": "dictCreate",
          "new_api": null,
          "old_text": "dictCreate(&migrateCacheDictType,NULL)",
          "new_text": null,
          "old_line_content": "    server.migrate_cached_sockets = dictCreate(&migrateCacheDictType,NULL);",
          "new_line_content": "    server.lua_client = NULL;",
          "content_same": false
        },
        {
          "line": 2390,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info,\n                \"aof_current_size:%lld\\r\\n\"\n                \"aof_base_size:%lld\\r\\n\"\n                \"aof_pending_rewrite:%d\\r\\n\"\n                \"aof_buffer_length:%zu\\r\\n\"\n                \"aof_rewrite_buffer_length:%lu\\r\\n\"\n                \"aof_pending_bio_fsync:%llu\\r\\n\"\n                \"aof_delayed_fsync:%lu\\r\\n\",\n                (long long) server.aof_current_size,\n                (long long) server.aof_rewrite_base_size,\n                server.aof_rewrite_scheduled,\n                sdslen(server.aof_buf),\n                aofRewriteBufferSize(),\n                bioPendingJobsOfType(REDIS_BIO_AOF_FSYNC),\n                server.aof_delayed_fsync)",
          "new_text": null,
          "old_line_content": "            info = sdscatprintf(info,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1368,
          "old_api": "updateLRUClock",
          "new_api": null,
          "old_text": "updateLRUClock()",
          "new_text": null,
          "old_line_content": "    updateLRUClock();",
          "new_line_content": "    server.loading_process_events_interval_bytes = (1024*1024*2);",
          "content_same": false
        },
        {
          "line": 1369,
          "old_api": "resetServerSaveParams",
          "new_api": null,
          "old_text": "resetServerSaveParams()",
          "new_text": null,
          "old_line_content": "    resetServerSaveParams();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1372,
          "old_api": "appendServerSaveParams",
          "new_api": null,
          "old_text": "appendServerSaveParams(300,100)",
          "new_text": null,
          "old_line_content": "    appendServerSaveParams(300,100);  /* save after 5 minutes and 100 changes */",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2909,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(1024*16)",
          "new_text": null,
          "old_line_content": "    char *buf = zmalloc(1024*16);",
          "new_line_content": "void redisAsciiArt(void) {",
          "content_same": false
        },
        {
          "line": 2401,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(server.aof_buf)",
          "new_text": null,
          "old_line_content": "                sdslen(server.aof_buf),",
          "new_line_content": "                (long long) server.aof_rewrite_base_size,",
          "content_same": false
        },
        {
          "line": 2402,
          "old_api": "aofRewriteBufferSize",
          "new_api": null,
          "old_text": "aofRewriteBufferSize()",
          "new_text": null,
          "old_line_content": "                aofRewriteBufferSize(),",
          "new_line_content": "                server.aof_rewrite_scheduled,",
          "content_same": false
        },
        {
          "line": 2915,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(buf,1024*16,ascii_logo,\n        REDIS_VERSION,\n        redisGitSHA1(),\n        strtol(redisGitDirty(),NULL,10) > 0,\n        (sizeof(long) == 8) ? \"64\" : \"32\",\n        mode, server.port,\n        (long) getpid()\n    )",
          "new_text": null,
          "old_line_content": "    snprintf(buf,1024*16,ascii_logo,",
          "new_line_content": "    else if (server.sentinel_mode) mode = \"sentinel\";",
          "content_same": false
        },
        {
          "line": 1892,
          "old_api": "propagate",
          "new_api": null,
          "old_text": "propagate(rop->cmd, rop->dbid, rop->argv, rop->argc, rop->target)",
          "new_text": null,
          "old_line_content": "            propagate(rop->cmd, rop->dbid, rop->argv, rop->argc, rop->target);",
          "new_line_content": "        for (j = 0; j < server.also_propagate.numops; j++) {",
          "content_same": false
        },
        {
          "line": 2918,
          "old_api": "redisGitDirty",
          "new_api": null,
          "old_text": "redisGitDirty()",
          "new_text": null,
          "old_line_content": "        strtol(redisGitDirty(),NULL,10) > 0,",
          "new_line_content": "        REDIS_VERSION,",
          "content_same": false
        },
        {
          "line": 2921,
          "old_api": "getpid",
          "new_api": null,
          "old_text": "getpid()",
          "new_text": null,
          "old_line_content": "        (long) getpid()",
          "new_line_content": "        (sizeof(long) == 8) ? \"64\" : \"32\",",
          "content_same": false
        },
        {
          "line": 2924,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(buf)",
          "new_text": null,
          "old_line_content": "    zfree(buf);",
          "new_line_content": "    );",
          "content_same": false
        },
        {
          "line": 2928,
          "old_api": "REDIS_NOTUSED",
          "new_api": null,
          "old_text": "REDIS_NOTUSED(sig)",
          "new_text": null,
          "old_line_content": "    REDIS_NOTUSED(sig);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1397,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "    server.repl_no_slaves_since = time(NULL);",
          "new_line_content": "    server.repl_backlog_off = 0;",
          "content_same": false
        },
        {
          "line": 2424,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info,\n                \"loading_start_time:%jd\\r\\n\"\n                \"loading_total_bytes:%llu\\r\\n\"\n                \"loading_loaded_bytes:%llu\\r\\n\"\n                \"loading_loaded_perc:%.2f\\r\\n\"\n                \"loading_eta_seconds:%jd\\r\\n\",\n                (intmax_t) server.loading_start_time,\n                (unsigned long long) server.loading_total_bytes,\n                (unsigned long long) server.loading_loaded_bytes,\n                perc,\n                (intmax_t)eta\n            )",
          "new_text": null,
          "old_line_content": "            info = sdscatprintf(info,",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1912,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[0]->ptr,\"quit\")",
          "new_text": null,
          "old_line_content": "    if (!strcasecmp(c->argv[0]->ptr,\"quit\")) {",
          "new_line_content": "     * when FORCE_REPLICATION is enabled and would be implemented in",
          "content_same": false
        },
        {
          "line": 1913,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.ok)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.ok);",
          "new_line_content": "     * a regular command proc. */",
          "content_same": false
        },
        {
          "line": 2939,
          "old_api": "sigemptyset",
          "new_api": null,
          "old_text": "sigemptyset(&act.sa_mask)",
          "new_text": null,
          "old_line_content": "    sigemptyset(&act.sa_mask);",
          "new_line_content": "    /* When the SA_SIGINFO flag is set in sa_flags then sa_sigaction is used.",
          "content_same": false
        },
        {
          "line": 2942,
          "old_api": "sigaction",
          "new_api": null,
          "old_text": "sigaction(SIGTERM, &act, NULL)",
          "new_text": null,
          "old_line_content": "    sigaction(SIGTERM, &act, NULL);",
          "new_line_content": "    act.sa_flags = 0;",
          "content_same": false
        },
        {
          "line": 1920,
          "old_api": "lookupCommand",
          "new_api": null,
          "old_text": "lookupCommand(c->argv[0]->ptr)",
          "new_text": null,
          "old_line_content": "    c->cmd = c->lastcmd = lookupCommand(c->argv[0]->ptr);",
          "new_line_content": "    /* Now lookup the command and check ASAP about trivial error conditions",
          "content_same": false
        },
        {
          "line": 2945,
          "old_api": "sigemptyset",
          "new_api": null,
          "old_text": "sigemptyset(&act.sa_mask)",
          "new_text": null,
          "old_line_content": "    sigemptyset(&act.sa_mask);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1923,
          "old_api": "addReplyErrorFormat",
          "new_api": null,
          "old_text": "addReplyErrorFormat(c,\"unknown command '%s'\",\n            (char*)c->argv[0]->ptr)",
          "new_text": null,
          "old_line_content": "        addReplyErrorFormat(c,\"unknown command '%s'\",",
          "new_line_content": "    if (!c->cmd) {",
          "content_same": false
        },
        {
          "line": 2948,
          "old_api": "sigaction",
          "new_api": null,
          "old_text": "sigaction(SIGSEGV, &act, NULL)",
          "new_text": null,
          "old_line_content": "    sigaction(SIGSEGV, &act, NULL);",
          "new_line_content": "    act.sa_flags = SA_NODEFER | SA_RESETHAND | SA_SIGINFO;",
          "content_same": false
        },
        {
          "line": 2949,
          "old_api": "sigaction",
          "new_api": null,
          "old_text": "sigaction(SIGBUS, &act, NULL)",
          "new_text": null,
          "old_line_content": "    sigaction(SIGBUS, &act, NULL);",
          "new_line_content": "    act.sa_sigaction = sigsegvHandler;",
          "content_same": false
        },
        {
          "line": 1412,
          "old_api": "dictCreate",
          "new_api": null,
          "old_text": "dictCreate(&commandTableDictType,NULL)",
          "new_text": null,
          "old_line_content": "    server.commands = dictCreate(&commandTableDictType,NULL);",
          "new_line_content": "     * initial configuration, since command names may be changed via",
          "content_same": false
        },
        {
          "line": 1413,
          "old_api": "dictCreate",
          "new_api": null,
          "old_text": "dictCreate(&commandTableDictType,NULL)",
          "new_text": null,
          "old_line_content": "    server.orig_commands = dictCreate(&commandTableDictType,NULL);",
          "new_line_content": "     * redis.conf using the rename-command directive. */",
          "content_same": false
        },
        {
          "line": 2440,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(section,\"stats\")",
          "new_text": null,
          "old_line_content": "    if (allsections || defsections || !strcasecmp(section,\"stats\")) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2441,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(info,\"\\r\\n\")",
          "new_text": null,
          "old_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "new_line_content": "    /* Stats */",
          "content_same": false
        },
        {
          "line": 1928,
          "old_api": "flagTransaction",
          "new_api": null,
          "old_text": "flagTransaction(c)",
          "new_text": null,
          "old_line_content": "        flagTransaction(c);",
          "new_line_content": "    } else if ((c->cmd->arity > 0 && c->cmd->arity != c->argc) ||",
          "content_same": false
        },
        {
          "line": 1929,
          "old_api": "addReplyErrorFormat",
          "new_api": null,
          "old_text": "addReplyErrorFormat(c,\"wrong number of arguments for '%s' command\",\n            c->cmd->name)",
          "new_text": null,
          "old_line_content": "        addReplyErrorFormat(c,\"wrong number of arguments for '%s' command\",",
          "new_line_content": "               (c->argc < -c->cmd->arity)) {",
          "content_same": false
        },
        {
          "line": 1937,
          "old_api": "flagTransaction",
          "new_api": null,
          "old_text": "flagTransaction(c)",
          "new_text": null,
          "old_line_content": "        flagTransaction(c);",
          "new_line_content": "    if (server.requirepass && !c->authenticated && c->cmd->proc != authCommand)",
          "content_same": false
        },
        {
          "line": 1938,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.noautherr)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.noautherr);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 2963,
          "old_api": "strstr",
          "new_api": null,
          "old_text": "strstr(argv[0],\"redis-sentinel\")",
          "new_text": null,
          "old_line_content": "    if (strstr(argv[0],\"redis-sentinel\") != NULL) return 1;",
          "new_line_content": "    int j;",
          "content_same": false
        },
        {
          "line": 2971,
          "old_api": "ustime",
          "new_api": null,
          "old_text": "ustime()",
          "new_text": null,
          "old_line_content": "    long long start = ustime();",
          "new_line_content": "/* Function called at startup to load RDB or AOF file in memory. */",
          "content_same": false
        },
        {
          "line": 2461,
          "old_api": "getOperationsPerSecond",
          "new_api": null,
          "old_text": "getOperationsPerSecond()",
          "new_text": null,
          "old_line_content": "            getOperationsPerSecond(),",
          "new_line_content": "            server.stat_numconnections,",
          "content_same": false
        },
        {
          "line": 2974,
          "old_api": "ustime",
          "new_api": null,
          "old_text": "ustime()",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_NOTICE,\"DB loaded from append only file: %.3f seconds\",(float)(ustime()-start)/1000000);",
          "new_line_content": "    if (server.aof_state == REDIS_AOF_ON) {",
          "content_same": false
        },
        {
          "line": 2977,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_NOTICE,\"DB loaded from disk: %.3f seconds\",\n                (float)(ustime()-start)/1000000)",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_NOTICE,\"DB loaded from disk: %.3f seconds\",",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 1953,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\"-CLUSTERDOWN The cluster is down. Use CLUSTER INFO for more information\\r\\n\")",
          "new_text": null,
          "old_line_content": "            addReplySds(c,sdsnew(\"-CLUSTERDOWN The cluster is down. Use CLUSTER INFO for more information\\r\\n\"));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2981,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "            exit(1);",
          "new_line_content": "        } else if (errno != ENOENT) {",
          "content_same": false
        },
        {
          "line": 2470,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(server.pubsub_channels)",
          "new_text": null,
          "old_line_content": "            dictSize(server.pubsub_channels),",
          "new_line_content": "            server.stat_keyspace_hits,",
          "content_same": false
        },
        {
          "line": 2471,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.pubsub_patterns)",
          "new_text": null,
          "old_line_content": "            listLength(server.pubsub_patterns),",
          "new_line_content": "            server.stat_keyspace_misses,",
          "content_same": false
        },
        {
          "line": 1445,
          "old_api": "getrlimit",
          "new_api": null,
          "old_text": "getrlimit(RLIMIT_NOFILE,&limit)",
          "new_text": null,
          "old_line_content": "    if (getrlimit(RLIMIT_NOFILE,&limit) == -1) {",
          "new_line_content": "    struct rlimit limit;",
          "content_same": false
        },
        {
          "line": 1446,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"Unable to obtain the current NOFILE limit (%s), assuming 1024 and setting the max clients configuration accordingly.\",\n            strerror(errno))",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING,\"Unable to obtain the current NOFILE limit (%s), assuming 1024 and setting the max clients configuration accordingly.\",",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1957,
          "old_api": "getNodeByQuery",
          "new_api": null,
          "old_text": "getNodeByQuery(c,c->cmd,c->argv,c->argc,&hashslot,&ask)",
          "new_text": null,
          "old_line_content": "            clusterNode *n = getNodeByQuery(c,c->cmd,c->argv,c->argc,&hashslot,&ask);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 2987,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"Out Of Memory allocating %zu bytes!\",\n        allocation_size)",
          "new_text": null,
          "old_line_content": "    redisLog(REDIS_WARNING,\"Out Of Memory allocating %zu bytes!\",",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1962,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "                addReplySds(c,sdscatprintf(sdsempty(),",
          "new_line_content": "                return REDIS_OK;",
          "content_same": false
        },
        {
          "line": 2477,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(section,\"replication\")",
          "new_text": null,
          "old_line_content": "    if (allsections || defsections || !strcasecmp(section,\"replication\")) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2478,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(info,\"\\r\\n\")",
          "new_text": null,
          "old_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "new_line_content": "    /* Replication */",
          "content_same": false
        },
        {
          "line": 2994,
          "old_api": "setproctitle",
          "new_api": null,
          "old_text": "setproctitle(\"%s %s:%d\",\n        title,\n        server.bindaddr_count ? server.bindaddr[0] : \"*\",\n        server.port)",
          "new_text": null,
          "old_line_content": "    setproctitle(\"%s %s:%d\",",
          "new_line_content": "void redisSetProcTitle(char *title) {",
          "content_same": false
        },
        {
          "line": 2484,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info,\n                \"master_host:%s\\r\\n\"\n                \"master_port:%d\\r\\n\"\n                \"master_link_status:%s\\r\\n\"\n                \"master_last_io_seconds_ago:%d\\r\\n\"\n                \"master_sync_in_progress:%d\\r\\n\"\n                \"slave_repl_offset:%lld\\r\\n\"\n                ,server.masterhost,\n                server.masterport,\n                (server.repl_state == REDIS_REPL_CONNECTED) ?\n                    \"up\" : \"down\",\n                server.master ?\n                ((int)(server.unixtime-server.master->lastinteraction)) : -1,\n                server.repl_state == REDIS_REPL_TRANSFER,\n                server.master ? server.master->reploff : -1\n            )",
          "new_text": null,
          "old_line_content": "            info = sdscatprintf(info,",
          "new_line_content": "            server.masterhost == NULL ? \"master\" : \"slave\");",
          "content_same": false
        },
        {
          "line": 1461,
          "old_api": "setrlimit",
          "new_api": null,
          "old_text": "setrlimit(RLIMIT_NOFILE,&limit)",
          "new_text": null,
          "old_line_content": "                if (setrlimit(RLIMIT_NOFILE,&limit) != -1) break;",
          "new_line_content": "                limit.rlim_cur = f;",
          "content_same": false
        },
        {
          "line": 2999,
          "old_api": "REDIS_NOTUSED",
          "new_api": null,
          "old_text": "REDIS_NOTUSED(title)",
          "new_text": null,
          "old_line_content": "    REDIS_NOTUSED(title);",
          "new_line_content": "        server.port);",
          "content_same": false
        },
        {
          "line": 1976,
          "old_api": "freeMemoryIfNeeded",
          "new_api": null,
          "old_text": "freeMemoryIfNeeded()",
          "new_text": null,
          "old_line_content": "        int retval = freeMemoryIfNeeded();",
          "new_line_content": "     * is returning an error. */",
          "content_same": false
        },
        {
          "line": 1467,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"Unable to set the max number of files limit to %d (%s), setting the max clients configuration to %d.\",\n                    (int) maxfiles, strerror(errno), (int) server.maxclients)",
          "new_text": null,
          "old_line_content": "                redisLog(REDIS_WARNING,\"Unable to set the max number of files limit to %d (%s), setting the max clients configuration to %d.\",",
          "new_line_content": "            if (f != maxfiles) {",
          "content_same": false
        },
        {
          "line": 1468,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "                    (int) maxfiles, strerror(errno), (int) server.maxclients);",
          "new_line_content": "                server.maxclients = f-32;",
          "content_same": false
        },
        {
          "line": 1979,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c, shared.oomerr)",
          "new_text": null,
          "old_line_content": "            addReply(c, shared.oomerr);",
          "new_line_content": "        if ((c->cmd->flags & REDIS_CMD_DENYOOM) && retval == REDIS_ERR) {",
          "content_same": false
        },
        {
          "line": 3008,
          "old_api": "spt_init",
          "new_api": null,
          "old_text": "spt_init(argc, argv)",
          "new_text": null,
          "old_line_content": "    spt_init(argc, argv);",
          "new_line_content": "    /* We need to initialize our libraries, and the server configuration. */",
          "content_same": false
        },
        {
          "line": 3011,
          "old_api": "zmalloc_enable_thread_safeness",
          "new_api": null,
          "old_text": "zmalloc_enable_thread_safeness()",
          "new_text": null,
          "old_line_content": "    zmalloc_enable_thread_safeness();",
          "new_line_content": "#endif",
          "content_same": false
        },
        {
          "line": 2502,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info,\n                    \"master_sync_left_bytes:%lld\\r\\n\"\n                    \"master_sync_last_io_seconds_ago:%d\\r\\n\"\n                    , (long long)\n                        (server.repl_transfer_size - server.repl_transfer_read),\n                    (int)(server.unixtime-server.repl_transfer_lastio)\n                )",
          "new_text": null,
          "old_line_content": "                info = sdscatprintf(info,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1990,
          "old_api": "flagTransaction",
          "new_api": null,
          "old_text": "flagTransaction(c)",
          "new_text": null,
          "old_line_content": "        flagTransaction(c);",
          "new_line_content": "        c->cmd->flags & REDIS_CMD_WRITE)",
          "content_same": false
        },
        {
          "line": 1991,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c, shared.bgsaveerr)",
          "new_text": null,
          "old_line_content": "        addReply(c, shared.bgsaveerr);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 3023,
          "old_api": "initSentinelConfig",
          "new_api": null,
          "old_text": "initSentinelConfig()",
          "new_text": null,
          "old_line_content": "        initSentinelConfig();",
          "new_line_content": "     * data structures with master nodes to monitor. */",
          "content_same": false
        },
        {
          "line": 2512,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info,\n                    \"master_link_down_since_seconds:%jd\\r\\n\",\n                    (intmax_t)server.unixtime-server.repl_down_since)",
          "new_text": null,
          "old_line_content": "                info = sdscatprintf(info,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3024,
          "old_api": "initSentinel",
          "new_api": null,
          "old_text": "initSentinel()",
          "new_text": null,
          "old_line_content": "        initSentinel();",
          "new_line_content": "    if (server.sentinel_mode) {",
          "content_same": false
        },
        {
          "line": 2002,
          "old_api": "flagTransaction",
          "new_api": null,
          "old_text": "flagTransaction(c)",
          "new_text": null,
          "old_line_content": "        flagTransaction(c);",
          "new_line_content": "        server.repl_good_slaves_count < server.repl_min_slaves_to_write)",
          "content_same": false
        },
        {
          "line": 2003,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c, shared.noreplicaserr)",
          "new_text": null,
          "old_line_content": "        addReply(c, shared.noreplicaserr);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 2516,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info,\n                \"slave_priority:%d\\r\\n\"\n                \"slave_read_only:%d\\r\\n\",\n                server.slave_priority,\n                server.repl_slave_ro)",
          "new_text": null,
          "old_line_content": "            info = sdscatprintf(info,",
          "new_line_content": "                    (intmax_t)server.unixtime-server.repl_down_since);",
          "content_same": false
        },
        {
          "line": 3029,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "        sds options = sdsempty();",
          "new_line_content": "    if (argc >= 2) {",
          "content_same": false
        },
        {
          "line": 3033,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(argv[1], \"-v\")",
          "new_text": null,
          "old_line_content": "        if (strcmp(argv[1], \"-v\") == 0 ||",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3034,
          "old_api": "version",
          "new_api": null,
          "old_text": "version()",
          "new_text": null,
          "old_line_content": "            strcmp(argv[1], \"--version\") == 0) version();",
          "new_line_content": "        /* Handle special options --help and --version */",
          "content_same": false
        },
        {
          "line": 2523,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info,\n            \"connected_slaves:%lu\\r\\n\",\n            listLength(server.slaves))",
          "new_text": null,
          "old_line_content": "        info = sdscatprintf(info,",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2013,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c, shared.roslaveerr)",
          "new_text": null,
          "old_line_content": "        addReply(c, shared.roslaveerr);",
          "new_line_content": "        c->cmd->flags & REDIS_CMD_WRITE)",
          "content_same": false
        },
        {
          "line": 3040,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(0)",
          "new_text": null,
          "old_line_content": "                exit(0);",
          "new_line_content": "            if (argc == 3) {",
          "content_same": false
        },
        {
          "line": 1505,
          "old_api": "anetTcp6Server",
          "new_api": null,
          "old_text": "anetTcp6Server(server.neterr,port,NULL)",
          "new_text": null,
          "old_line_content": "            fds[*count] = anetTcp6Server(server.neterr,port,NULL);",
          "new_line_content": "            /* Bind * for both IPv6 and IPv4, we enter here only if",
          "content_same": false
        },
        {
          "line": 2018,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(c->pubsub_patterns)",
          "new_text": null,
          "old_line_content": "    if ((dictSize(c->pubsub_channels) > 0 || listLength(c->pubsub_patterns) > 0)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2531,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info,\n                \"min_slaves_good_slaves:%d\\r\\n\",\n                server.repl_good_slaves_count)",
          "new_text": null,
          "old_line_content": "            info = sdscatprintf(info,",
          "new_line_content": "        if (server.repl_min_slaves_to_write &&",
          "content_same": false
        },
        {
          "line": 3043,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr,\"Example: ./redis-server --test-memory 4096\\n\\n\")",
          "new_text": null,
          "old_line_content": "                fprintf(stderr,\"Example: ./redis-server --test-memory 4096\\n\\n\");",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 2536,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.slaves)",
          "new_text": null,
          "old_line_content": "        if (listLength(server.slaves)) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1513,
          "old_api": "strchr",
          "new_api": null,
          "old_text": "strchr(server.bindaddr[j],':')",
          "new_text": null,
          "old_line_content": "        } else if (strchr(server.bindaddr[j],':')) {",
          "new_line_content": "             * error and return to the caller with an error. */",
          "content_same": false
        },
        {
          "line": 2024,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\"only (P)SUBSCRIBE / (P)UNSUBSCRIBE / QUIT allowed in this context\")",
          "new_text": null,
          "old_line_content": "        addReplyError(c,\"only (P)SUBSCRIBE / (P)UNSUBSCRIBE / QUIT allowed in this context\");",
          "new_line_content": "        c->cmd->proc != psubscribeCommand &&",
          "content_same": false
        },
        {
          "line": 2541,
          "old_api": "listRewind",
          "new_api": null,
          "old_text": "listRewind(server.slaves,&li)",
          "new_text": null,
          "old_line_content": "            listRewind(server.slaves,&li);",
          "new_line_content": "            listIter li;",
          "content_same": false
        },
        {
          "line": 2542,
          "old_api": "listNext",
          "new_api": null,
          "old_text": "listNext(&li)",
          "new_text": null,
          "old_line_content": "            while((ln = listNext(&li))) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1518,
          "old_api": "anetTcpServer",
          "new_api": null,
          "old_text": "anetTcpServer(server.neterr,port,server.bindaddr[j])",
          "new_text": null,
          "old_line_content": "            fds[*count] = anetTcpServer(server.neterr,port,server.bindaddr[j]);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 1521,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\n                \"Creating Server TCP listening socket %s:%d: %s\",\n                server.bindaddr[j] ? server.bindaddr[j] : \"*\",\n                server.port, server.neterr)",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_WARNING,",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3058,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(options,\"\\n\")",
          "new_text": null,
          "old_line_content": "                if (sdslen(options)) options = sdscat(options,\"\\n\");",
          "new_line_content": "            if (argv[j][0] == '-' && argv[j][1] == '-') {",
          "content_same": false
        },
        {
          "line": 3059,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(options,argv[j]+2)",
          "new_text": null,
          "old_line_content": "                options = sdscat(options,argv[j]+2);",
          "new_line_content": "                /* Option name */",
          "content_same": false
        },
        {
          "line": 2034,
          "old_api": "flagTransaction",
          "new_api": null,
          "old_text": "flagTransaction(c)",
          "new_text": null,
          "old_line_content": "        flagTransaction(c);",
          "new_line_content": "        !(c->cmd->flags & REDIS_CMD_STALE))",
          "content_same": false
        },
        {
          "line": 2549,
          "old_api": "anetPeerToString",
          "new_api": null,
          "old_text": "anetPeerToString(slave->fd,ip,sizeof(ip),&port)",
          "new_text": null,
          "old_line_content": "                if (anetPeerToString(slave->fd,ip,sizeof(ip),&port) == -1) continue;",
          "new_line_content": "                long lag = 0;",
          "content_same": false
        },
        {
          "line": 2035,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c, shared.masterdownerr)",
          "new_text": null,
          "old_line_content": "        addReply(c, shared.masterdownerr);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 3063,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(argv[j])",
          "new_text": null,
          "old_line_content": "                options = sdscatrepr(options,argv[j],strlen(argv[j]));",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 3064,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(options,\" \")",
          "new_text": null,
          "old_line_content": "                options = sdscat(options,\" \");",
          "new_line_content": "                /* Option argument */",
          "content_same": false
        },
        {
          "line": 2042,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c, shared.loadingerr)",
          "new_text": null,
          "old_line_content": "        addReply(c, shared.loadingerr);",
          "new_line_content": "     * REDIS_CMD_LOADING flag. */",
          "content_same": false
        },
        {
          "line": 3068,
          "old_api": "resetServerSaveParams",
          "new_api": null,
          "old_text": "resetServerSaveParams()",
          "new_text": null,
          "old_line_content": "        resetServerSaveParams();",
          "new_line_content": "            j++;",
          "content_same": false
        },
        {
          "line": 3069,
          "old_api": "loadServerConfig",
          "new_api": null,
          "old_text": "loadServerConfig(configfile,options)",
          "new_text": null,
          "old_line_content": "        loadServerConfig(configfile,options);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1535,
          "old_api": "signal",
          "new_api": null,
          "old_text": "signal(SIGHUP, SIG_IGN)",
          "new_text": null,
          "old_line_content": "    signal(SIGHUP, SIG_IGN);",
          "new_line_content": "    int j;",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 110,
      "total_additions": 300,
      "total_deletions": 300,
      "total_api_changes": 710
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 4,
        "api_related_lines": 710,
        "non_api_lines": 2,
        "non_api_line_numbers": [
          1185,
          1183
        ]
      }
    },
    "api_calls_before": 711,
    "api_calls_after": 711,
    "diff_info": {
      "added_lines": 4,
      "removed_lines": 2,
      "total_diff_lines": 18
    }
  }
}
{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/1f7d2c1e27a5378c5db438cb9d1a00fc30f1d598",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/1f7d2c1e27a5378c5db438cb9d1a00fc30f1d598/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/1f7d2c1e27a5378c5db438cb9d1a00fc30f1d598/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/1f7d2c1e27a5378c5db438cb9d1a00fc30f1d598/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 697,
          "old_api": "sdslen",
          "new_api": "dictGetRandomKey",
          "old_text": "sdslen(key)",
          "new_text": "dictGetRandomKey(db->expires)",
          "old_line_content": "                    robj *keyobj = createStringObject(key,sdslen(key));",
          "new_line_content": "                if ((de = dictGetRandomKey(db->expires)) == NULL) break;",
          "content_same": false
        },
        {
          "line": 700,
          "old_api": "dbDelete",
          "new_api": "dictGetKey",
          "old_text": "dbDelete(db,keyobj)",
          "new_text": "dictGetKey(de)",
          "old_line_content": "                    dbDelete(db,keyobj);",
          "new_line_content": "                    sds key = dictGetKey(de);",
          "content_same": false
        },
        {
          "line": 701,
          "old_api": "notifyKeyspaceEvent",
          "new_api": "sdslen",
          "old_text": "notifyKeyspaceEvent(REDIS_NOTIFY_EXPIRED,\n                        \"expired\",keyobj,db->id)",
          "new_text": "sdslen(key)",
          "old_line_content": "                    notifyKeyspaceEvent(REDIS_NOTIFY_EXPIRED,",
          "new_line_content": "                    robj *keyobj = createStringObject(key,sdslen(key));",
          "content_same": false
        },
        {
          "line": 703,
          "old_api": "decrRefCount",
          "new_api": "propagateExpire",
          "old_text": "decrRefCount(keyobj)",
          "new_text": "propagateExpire(db,keyobj)",
          "old_line_content": "                    decrRefCount(keyobj);",
          "new_line_content": "                    propagateExpire(db,keyobj);",
          "content_same": false
        },
        {
          "line": 760,
          "old_api": "redisLog",
          "new_api": "dictSize",
          "old_text": "redisLog(REDIS_VERBOSE,\"Closing idle client\")",
          "new_text": "dictSize(c->pubsub_channels)",
          "old_line_content": "        redisLog(REDIS_VERBOSE,\"Closing idle client\");",
          "new_line_content": "        dictSize(c->pubsub_channels) == 0 && /* no timeout for pubsub */",
          "content_same": false
        },
        {
          "line": 761,
          "old_api": "freeClient",
          "new_api": "listLength",
          "old_text": "freeClient(c)",
          "new_text": "listLength(c->pubsub_patterns)",
          "old_line_content": "        freeClient(c);",
          "new_line_content": "        listLength(c->pubsub_patterns) == 0 &&",
          "content_same": false
        },
        {
          "line": 765,
          "old_api": "addReply",
          "new_api": "freeClient",
          "old_text": "addReply(c,shared.nullmultibulk)",
          "new_text": "freeClient(c)",
          "old_line_content": "            addReply(c,shared.nullmultibulk);",
          "new_line_content": "        freeClient(c);",
          "content_same": false
        },
        {
          "line": 822,
          "old_api": "clientsCronHandleTimeout",
          "new_api": "listNodeValue",
          "old_text": "clientsCronHandleTimeout(c)",
          "new_text": "listNodeValue(head)",
          "old_line_content": "        if (clientsCronHandleTimeout(c)) continue;",
          "new_line_content": "        c = listNodeValue(head);",
          "content_same": false
        },
        {
          "line": 894,
          "old_api": "watchdogScheduleSignal",
          "new_api": "REDIS_NOTUSED",
          "old_text": "watchdogScheduleSignal(server.watchdog_period)",
          "new_text": "REDIS_NOTUSED(clientData)",
          "old_line_content": "    if (server.watchdog_period) watchdogScheduleSignal(server.watchdog_period);",
          "new_line_content": "    REDIS_NOTUSED(clientData);",
          "content_same": false
        },
        {
          "line": 920,
          "old_api": "zmalloc_used_memory",
          "new_api": "updateLRUClock",
          "old_text": "zmalloc_used_memory()",
          "new_text": "updateLRUClock()",
          "old_line_content": "        server.stat_peak_memory = zmalloc_used_memory();",
          "new_line_content": "    updateLRUClock();",
          "content_same": false
        },
        {
          "line": 935,
          "old_api": "dictSlots",
          "new_api": "run_with_period",
          "old_text": "dictSlots(server.db[j].dict)",
          "new_text": "run_with_period(5000)",
          "old_line_content": "            size = dictSlots(server.db[j].dict);",
          "new_line_content": "    run_with_period(5000) {",
          "content_same": false
        },
        {
          "line": 939,
          "old_api": "redisLog",
          "new_api": "dictSlots",
          "old_text": "redisLog(REDIS_VERBOSE,\"DB %d: %lld keys (%lld volatile) in %lld slots HT.\",j,used,vkeys,size)",
          "new_text": "dictSlots(server.db[j].dict)",
          "old_line_content": "                redisLog(REDIS_VERBOSE,\"DB %d: %lld keys (%lld volatile) in %lld slots HT.\",j,used,vkeys,size);",
          "new_line_content": "            size = dictSlots(server.db[j].dict);",
          "content_same": false
        },
        {
          "line": 951,
          "old_api": "listLength",
          "new_api": "run_with_period",
          "old_text": "listLength(server.slaves)",
          "new_text": "run_with_period(5000)",
          "old_line_content": "                listLength(server.slaves),",
          "new_line_content": "        run_with_period(5000) {",
          "content_same": false
        },
        {
          "line": 952,
          "old_api": "zmalloc_used_memory",
          "new_api": "redisLog",
          "old_text": "zmalloc_used_memory()",
          "new_text": "redisLog(REDIS_VERBOSE,\n                \"%lu clients connected (%lu slaves), %zu bytes in use\",\n                listLength(server.clients)-listLength(server.slaves),\n                listLength(server.slaves),\n                zmalloc_used_memory())",
          "old_line_content": "                zmalloc_used_memory());",
          "new_line_content": "            redisLog(REDIS_VERBOSE,",
          "content_same": false
        },
        {
          "line": 979,
          "old_api": "WTERMSIG",
          "new_api": "wait3",
          "old_text": "WTERMSIG(statloc)",
          "new_text": "wait3(&statloc,WNOHANG,NULL)",
          "old_line_content": "            if (WIFSIGNALED(statloc)) bysignal = WTERMSIG(statloc);",
          "new_line_content": "        if ((pid = wait3(&statloc,WNOHANG,NULL)) != 0) {",
          "content_same": false
        },
        {
          "line": 986,
          "old_api": "redisLog",
          "new_api": "backgroundSaveDoneHandler",
          "old_text": "redisLog(REDIS_WARNING,\n                    \"Warning, detected child with unmatched pid: %ld\",\n                    (long)pid)",
          "new_text": "backgroundSaveDoneHandler(exitcode,bysignal)",
          "old_line_content": "                redisLog(REDIS_WARNING,",
          "new_line_content": "                backgroundSaveDoneHandler(exitcode,bysignal);",
          "content_same": false
        },
        {
          "line": 990,
          "old_api": "updateDictResizePolicy",
          "new_api": "redisLog",
          "old_text": "updateDictResizePolicy()",
          "new_text": "redisLog(REDIS_WARNING,\n                    \"Warning, detected child with unmatched pid: %ld\",\n                    (long)pid)",
          "old_line_content": "            updateDictResizePolicy();",
          "new_line_content": "                redisLog(REDIS_WARNING,",
          "content_same": false
        },
        {
          "line": 1033,
          "old_api": "replicationCron",
          "new_api": "freeClientsInAsyncFreeQueue",
          "old_text": "replicationCron()",
          "new_text": "freeClientsInAsyncFreeQueue()",
          "old_line_content": "    run_with_period(1000) replicationCron();",
          "new_line_content": "    freeClientsInAsyncFreeQueue();",
          "content_same": false
        },
        {
          "line": 1037,
          "old_api": "clusterCron",
          "new_api": "replicationCron",
          "old_text": "clusterCron()",
          "new_text": "replicationCron()",
          "old_line_content": "        if (server.cluster_enabled) clusterCron();",
          "new_line_content": "    run_with_period(1000) replicationCron();",
          "content_same": false
        },
        {
          "line": 1041,
          "old_api": "run_with_period",
          "new_api": "clusterCron",
          "old_text": "run_with_period(100)",
          "new_text": "clusterCron()",
          "old_line_content": "    run_with_period(100) {",
          "new_line_content": "        if (server.cluster_enabled) clusterCron();",
          "content_same": false
        },
        {
          "line": 1046,
          "old_api": "run_with_period",
          "new_api": "sentinelTimer",
          "old_text": "run_with_period(1000)",
          "new_text": "sentinelTimer()",
          "old_line_content": "    run_with_period(1000) {",
          "new_line_content": "        if (server.sentinel_mode) sentinelTimer();",
          "content_same": false
        },
        {
          "line": 1067,
          "old_api": "listDelNode",
          "new_api": "listLength",
          "old_text": "listDelNode(server.unblocked_clients,ln)",
          "new_text": "listLength(server.unblocked_clients)",
          "old_line_content": "        listDelNode(server.unblocked_clients,ln);",
          "new_line_content": "    while (listLength(server.unblocked_clients)) {",
          "content_same": false
        },
        {
          "line": 1071,
          "old_api": "sdslen",
          "new_api": "listDelNode",
          "old_text": "sdslen(c->querybuf)",
          "new_text": "listDelNode(server.unblocked_clients,ln)",
          "old_line_content": "        if (c->querybuf && sdslen(c->querybuf) > 0) {",
          "new_line_content": "        listDelNode(server.unblocked_clients,ln);",
          "content_same": false
        },
        {
          "line": 1141,
          "old_api": "createStringObject",
          "new_api": "sdsempty",
          "old_text": "createStringObject(\"$7\\r\\nmessage\\r\\n\",13)",
          "new_text": "sdsempty()",
          "old_line_content": "    shared.messagebulk = createStringObject(\"$7\\r\\nmessage\\r\\n\",13);",
          "new_line_content": "            sdscatprintf(sdsempty(),",
          "content_same": false
        },
        {
          "line": 1152,
          "old_api": "createObject",
          "new_api": "createStringObject",
          "old_text": "createObject(REDIS_STRING,(void*)(long)j)",
          "new_text": "createStringObject(\"RPOP\",4)",
          "old_line_content": "        shared.integers[j] = createObject(REDIS_STRING,(void*)(long)j);",
          "new_line_content": "    shared.rpop = createStringObject(\"RPOP\",4);",
          "content_same": false
        },
        {
          "line": 1236,
          "old_api": "appendServerSaveParams",
          "new_api": "updateLRUClock",
          "old_text": "appendServerSaveParams(300,100)",
          "new_text": "updateLRUClock()",
          "old_line_content": "    appendServerSaveParams(300,100);  /* save after 5 minutes and 100 changes */",
          "new_line_content": "    updateLRUClock();",
          "content_same": false
        },
        {
          "line": 1237,
          "old_api": "appendServerSaveParams",
          "new_api": "resetServerSaveParams",
          "old_text": "appendServerSaveParams(60,10000)",
          "new_text": "resetServerSaveParams()",
          "old_line_content": "    appendServerSaveParams(60,10000); /* save after 1 minute and 10000 changes */",
          "new_line_content": "    resetServerSaveParams();",
          "content_same": false
        },
        {
          "line": 1287,
          "old_api": "lookupCommandByCString",
          "new_api": "dictCreate",
          "old_text": "lookupCommandByCString(\"multi\")",
          "new_text": "dictCreate(&commandTableDictType,NULL)",
          "old_line_content": "    server.multiCommand = lookupCommandByCString(\"multi\");",
          "new_line_content": "    server.commands = dictCreate(&commandTableDictType,NULL);",
          "content_same": false
        },
        {
          "line": 1288,
          "old_api": "lookupCommandByCString",
          "new_api": "dictCreate",
          "old_text": "lookupCommandByCString(\"lpush\")",
          "new_text": "dictCreate(&commandTableDictType,NULL)",
          "old_line_content": "    server.lpushCommand = lookupCommandByCString(\"lpush\");",
          "new_line_content": "    server.orig_commands = dictCreate(&commandTableDictType,NULL);",
          "content_same": false
        },
        {
          "line": 1289,
          "old_api": "lookupCommandByCString",
          "new_api": "populateCommandTable",
          "old_text": "lookupCommandByCString(\"lpop\")",
          "new_text": "populateCommandTable()",
          "old_line_content": "    server.lpopCommand = lookupCommandByCString(\"lpop\");",
          "new_line_content": "    populateCommandTable();",
          "content_same": false
        },
        {
          "line": 1356,
          "old_api": "openlog",
          "new_api": "signal",
          "old_text": "openlog(server.syslog_ident, LOG_PID | LOG_NDELAY | LOG_NOWAIT,\n            server.syslog_facility)",
          "new_text": "signal(SIGPIPE, SIG_IGN)",
          "old_line_content": "        openlog(server.syslog_ident, LOG_PID | LOG_NDELAY | LOG_NOWAIT,",
          "new_line_content": "    signal(SIGPIPE, SIG_IGN);",
          "content_same": false
        },
        {
          "line": 1370,
          "old_api": "adjustOpenFilesLimit",
          "new_api": "listCreate",
          "old_text": "adjustOpenFilesLimit()",
          "new_text": "listCreate()",
          "old_line_content": "    adjustOpenFilesLimit();",
          "new_line_content": "    server.unblocked_clients = listCreate();",
          "content_same": false
        },
        {
          "line": 1371,
          "old_api": "aeCreateEventLoop",
          "new_api": "listCreate",
          "old_text": "aeCreateEventLoop(server.maxclients+1024)",
          "new_text": "listCreate()",
          "old_line_content": "    server.el = aeCreateEventLoop(server.maxclients+1024);",
          "new_line_content": "    server.ready_keys = listCreate();",
          "content_same": false
        },
        {
          "line": 1375,
          "old_api": "anetTcpServer",
          "new_api": "aeCreateEventLoop",
          "old_text": "anetTcpServer(server.neterr,server.port,server.bindaddr)",
          "new_text": "aeCreateEventLoop(server.maxclients+1024)",
          "old_line_content": "        server.ipfd = anetTcpServer(server.neterr,server.port,server.bindaddr);",
          "new_line_content": "    server.el = aeCreateEventLoop(server.maxclients+1024);",
          "content_same": false
        },
        {
          "line": 1379,
          "old_api": "exit",
          "new_api": "anetTcpServer",
          "old_text": "exit(1)",
          "new_text": "anetTcpServer(server.neterr,server.port,server.bindaddr)",
          "old_line_content": "            exit(1);",
          "new_line_content": "        server.ipfd = anetTcpServer(server.neterr,server.port,server.bindaddr);",
          "content_same": false
        },
        {
          "line": 1383,
          "old_api": "unlink",
          "new_api": "exit",
          "old_text": "unlink(server.unixsocket)",
          "new_text": "exit(1)",
          "old_line_content": "        unlink(server.unixsocket); /* don't care if this fails */",
          "new_line_content": "            exit(1);",
          "content_same": false
        },
        {
          "line": 1387,
          "old_api": "exit",
          "new_api": "unlink",
          "old_text": "exit(1)",
          "new_text": "unlink(server.unixsocket)",
          "old_line_content": "            exit(1);",
          "new_line_content": "        unlink(server.unixsocket); /* don't care if this fails */",
          "content_same": false
        },
        {
          "line": 1391,
          "old_api": "redisLog",
          "new_api": "exit",
          "old_text": "redisLog(REDIS_WARNING, \"Configured to not listen anywhere, exiting.\")",
          "new_text": "exit(1)",
          "old_line_content": "        redisLog(REDIS_WARNING, \"Configured to not listen anywhere, exiting.\");",
          "new_line_content": "            exit(1);",
          "content_same": false
        },
        {
          "line": 1395,
          "old_api": "dictCreate",
          "new_api": "redisLog",
          "old_text": "dictCreate(&dbDictType,NULL)",
          "new_text": "redisLog(REDIS_WARNING, \"Configured to not listen anywhere, exiting.\")",
          "old_line_content": "        server.db[j].dict = dictCreate(&dbDictType,NULL);",
          "new_line_content": "        redisLog(REDIS_WARNING, \"Configured to not listen anywhere, exiting.\");",
          "content_same": false
        },
        {
          "line": 1396,
          "old_api": "dictCreate",
          "new_api": "exit",
          "old_text": "dictCreate(&keyptrDictType,NULL)",
          "new_text": "exit(1)",
          "old_line_content": "        server.db[j].expires = dictCreate(&keyptrDictType,NULL);",
          "new_line_content": "        exit(1);",
          "content_same": false
        },
        {
          "line": 1403,
          "old_api": "listCreate",
          "new_api": "dictCreate",
          "old_text": "listCreate()",
          "new_text": "dictCreate(&keylistDictType,NULL)",
          "old_line_content": "    server.pubsub_patterns = listCreate();",
          "new_line_content": "        server.db[j].watched_keys = dictCreate(&keylistDictType,NULL);",
          "content_same": false
        },
        {
          "line": 1409,
          "old_api": "aofRewriteBufferReset",
          "new_api": "listSetMatchMethod",
          "old_text": "aofRewriteBufferReset()",
          "new_text": "listSetMatchMethod(server.pubsub_patterns,listMatchPubsubPattern)",
          "old_line_content": "    aofRewriteBufferReset();",
          "new_line_content": "    listSetMatchMethod(server.pubsub_patterns,listMatchPubsubPattern);",
          "content_same": false
        },
        {
          "line": 1432,
          "old_api": "time",
          "new_api": "memset",
          "old_text": "time(NULL)",
          "new_text": "memset(server.ops_sec_samples,0,sizeof(server.ops_sec_samples))",
          "old_line_content": "    server.unixtime = time(NULL);",
          "new_line_content": "    memset(server.ops_sec_samples,0,sizeof(server.ops_sec_samples));",
          "content_same": false
        },
        {
          "line": 1436,
          "old_api": "redisPanic",
          "new_api": "time",
          "old_text": "redisPanic(\"Can't create the serverCron time event.\")",
          "new_text": "time(NULL)",
          "old_line_content": "        redisPanic(\"Can't create the serverCron time event.\");",
          "new_line_content": "    server.unixtime = time(NULL);",
          "content_same": false
        },
        {
          "line": 1439,
          "old_api": "aeCreateFileEvent",
          "new_api": "aeCreateTimeEvent",
          "old_text": "aeCreateFileEvent(server.el,server.ipfd,AE_READABLE,\n        acceptTcpHandler,NULL)",
          "new_text": "aeCreateTimeEvent(server.el, 1, serverCron, NULL, NULL)",
          "old_line_content": "    if (server.ipfd > 0 && aeCreateFileEvent(server.el,server.ipfd,AE_READABLE,",
          "new_line_content": "    if(aeCreateTimeEvent(server.el, 1, serverCron, NULL, NULL) == AE_ERR) {",
          "content_same": false
        },
        {
          "line": 1441,
          "old_api": "aeCreateFileEvent",
          "new_api": "exit",
          "old_text": "aeCreateFileEvent(server.el,server.sofd,AE_READABLE,\n        acceptUnixHandler,NULL)",
          "new_text": "exit(1)",
          "old_line_content": "    if (server.sofd > 0 && aeCreateFileEvent(server.el,server.sofd,AE_READABLE,",
          "new_line_content": "        exit(1);",
          "content_same": false
        },
        {
          "line": 1445,
          "old_api": "open",
          "new_api": "aeCreateFileEvent",
          "old_text": "open(server.aof_filename,\n                               O_WRONLY|O_APPEND|O_CREAT,0644)",
          "new_text": "aeCreateFileEvent(server.el,server.sofd,AE_READABLE,\n        acceptUnixHandler,NULL)",
          "old_line_content": "        server.aof_fd = open(server.aof_filename,",
          "new_line_content": "    if (server.sofd > 0 && aeCreateFileEvent(server.el,server.sofd,AE_READABLE,",
          "content_same": false
        },
        {
          "line": 1449,
          "old_api": "strerror",
          "new_api": "open",
          "old_text": "strerror(errno)",
          "new_text": "open(server.aof_filename,\n                               O_WRONLY|O_APPEND|O_CREAT,0644)",
          "old_line_content": "                strerror(errno));",
          "new_line_content": "        server.aof_fd = open(server.aof_filename,",
          "content_same": false
        },
        {
          "line": 1505,
          "old_api": "redisAssert",
          "new_api": "sdsnew",
          "old_text": "redisAssert(retval1 == DICT_OK && retval2 == DICT_OK)",
          "new_text": "sdsnew(c->name)",
          "old_line_content": "        redisAssert(retval1 == DICT_OK && retval2 == DICT_OK);",
          "new_line_content": "        retval1 = dictAdd(server.commands, sdsnew(c->name), c);",
          "content_same": false
        },
        {
          "line": 1618,
          "old_api": "listLength",
          "new_api": "ustime",
          "old_text": "listLength(server.monitors)",
          "new_text": "ustime()",
          "old_line_content": "    if (listLength(server.monitors) &&",
          "new_line_content": "    long long dirty, start = ustime(), duration;",
          "content_same": false
        },
        {
          "line": 1622,
          "old_api": "replicationFeedMonitors",
          "new_api": "listLength",
          "old_text": "replicationFeedMonitors(c,server.monitors,c->db->id,c->argv,c->argc)",
          "new_text": "listLength(server.monitors)",
          "old_line_content": "        replicationFeedMonitors(c,server.monitors,c->db->id,c->argv,c->argc);",
          "new_line_content": "    if (listLength(server.monitors) &&",
          "content_same": false
        },
        {
          "line": 1626,
          "old_api": "redisOpArrayInit",
          "new_api": "replicationFeedMonitors",
          "old_text": "redisOpArrayInit(&server.also_propagate)",
          "new_text": "replicationFeedMonitors(c,server.monitors,c->db->id,c->argv,c->argc)",
          "old_line_content": "    redisOpArrayInit(&server.also_propagate);",
          "new_line_content": "        replicationFeedMonitors(c,server.monitors,c->db->id,c->argv,c->argc);",
          "content_same": false
        },
        {
          "line": 1630,
          "old_api": "ustime",
          "new_api": "redisOpArrayInit",
          "old_text": "ustime()",
          "new_text": "redisOpArrayInit(&server.also_propagate)",
          "old_line_content": "    duration = ustime()-start;",
          "new_line_content": "    redisOpArrayInit(&server.also_propagate);",
          "content_same": false
        },
        {
          "line": 1731,
          "old_api": "getNodeByQuery",
          "new_api": "sdsnew",
          "old_text": "getNodeByQuery(c,c->cmd,c->argv,c->argc,&hashslot,&ask)",
          "new_text": "sdsnew(\"-CLUSTERDOWN The cluster is down. Use CLUSTER INFO for more information\\r\\n\")",
          "old_line_content": "            clusterNode *n = getNodeByQuery(c,c->cmd,c->argv,c->argc,&hashslot,&ask);",
          "new_line_content": "            addReplySds(c,sdsnew(\"-CLUSTERDOWN The cluster is down. Use CLUSTER INFO for more information\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 1832,
          "old_api": "listLength",
          "new_api": "queueMultiCommand",
          "old_text": "listLength(server.ready_keys)",
          "new_text": "queueMultiCommand(c)",
          "old_line_content": "        if (listLength(server.ready_keys))",
          "new_line_content": "        queueMultiCommand(c);",
          "content_same": false
        },
        {
          "line": 1833,
          "old_api": "handleClientsBlockedOnLists",
          "new_api": "addReply",
          "old_text": "handleClientsBlockedOnLists()",
          "new_text": "addReply(c,shared.queued)",
          "old_line_content": "            handleClientsBlockedOnLists();",
          "new_line_content": "        addReply(c,shared.queued);",
          "content_same": false
        },
        {
          "line": 1863,
          "old_api": "aof_fsync",
          "new_api": "kill",
          "old_text": "aof_fsync(server.aof_fd)",
          "new_text": "kill(server.aof_child_pid,SIGUSR1)",
          "old_line_content": "        aof_fsync(server.aof_fd);",
          "new_line_content": "            kill(server.aof_child_pid,SIGUSR1);",
          "content_same": false
        },
        {
          "line": 1883,
          "old_api": "close",
          "new_api": "redisLog",
          "old_text": "close(server.ipfd)",
          "new_text": "redisLog(REDIS_NOTICE,\"Removing the pid file.\")",
          "old_line_content": "    if (server.ipfd != -1) close(server.ipfd);",
          "new_line_content": "        redisLog(REDIS_NOTICE,\"Removing the pid file.\");",
          "content_same": false
        },
        {
          "line": 1884,
          "old_api": "close",
          "new_api": "unlink",
          "old_text": "close(server.sofd)",
          "new_text": "unlink(server.pidfile)",
          "old_line_content": "    if (server.sofd != -1) close(server.sofd);",
          "new_line_content": "        unlink(server.pidfile);",
          "content_same": false
        },
        {
          "line": 1887,
          "old_api": "unlink",
          "new_api": "close",
          "old_text": "unlink(server.unixsocket)",
          "new_text": "close(server.ipfd)",
          "old_line_content": "        unlink(server.unixsocket); /* don't care if this fails */",
          "new_line_content": "    if (server.ipfd != -1) close(server.ipfd);",
          "content_same": false
        },
        {
          "line": 1925,
          "old_api": "memcpy",
          "new_api": "memset",
          "old_text": "memcpy(bufa,a,alen)",
          "new_text": "memset(bufa,0,sizeof(bufa))",
          "old_line_content": "    memcpy(bufa,a,alen);",
          "new_line_content": "    memset(bufa,0,sizeof(bufa));        /* Constant time. */",
          "content_same": false
        },
        {
          "line": 1926,
          "old_api": "memcpy",
          "new_api": "memset",
          "old_text": "memcpy(bufb,b,blen)",
          "new_text": "memset(bufb,0,sizeof(bufb))",
          "old_line_content": "    memcpy(bufb,b,blen);",
          "new_line_content": "    memset(bufb,0,sizeof(bufb));        /* Constant time. */",
          "content_same": false
        },
        {
          "line": 1955,
          "old_api": "addReplyBulk",
          "new_api": "addReply",
          "old_text": "addReplyBulk(c,c->argv[1])",
          "new_text": "addReply(c,shared.pong)",
          "old_line_content": "    addReplyBulk(c,c->argv[1]);",
          "new_line_content": "    addReply(c,shared.pong);",
          "content_same": false
        },
        {
          "line": 2007,
          "old_api": "getrusage",
          "new_api": "strcasecmp",
          "old_text": "getrusage(RUSAGE_SELF, &self_ru)",
          "new_text": "strcasecmp(section,\"all\")",
          "old_line_content": "    getrusage(RUSAGE_SELF, &self_ru);",
          "new_line_content": "        allsections = strcasecmp(section,\"all\") == 0;",
          "content_same": false
        },
        {
          "line": 2008,
          "old_api": "getrusage",
          "new_api": "strcasecmp",
          "old_text": "getrusage(RUSAGE_CHILDREN, &c_ru)",
          "new_text": "strcasecmp(section,\"default\")",
          "old_line_content": "    getrusage(RUSAGE_CHILDREN, &c_ru);",
          "new_line_content": "        defsections = strcasecmp(section,\"default\") == 0;",
          "content_same": false
        },
        {
          "line": 2012,
          "old_api": "strcasecmp",
          "new_api": "getrusage",
          "old_text": "strcasecmp(section,\"server\")",
          "new_text": "getrusage(RUSAGE_CHILDREN, &c_ru)",
          "old_line_content": "    if (allsections || defsections || !strcasecmp(section,\"server\")) {",
          "new_line_content": "    getrusage(RUSAGE_CHILDREN, &c_ru);",
          "content_same": false
        },
        {
          "line": 2047,
          "old_api": "aeGetApiName",
          "new_api": "redisBuildId",
          "old_text": "aeGetApiName()",
          "new_text": "redisBuildId()",
          "old_line_content": "            aeGetApiName(),",
          "new_line_content": "            (unsigned long long) redisBuildId(),",
          "content_same": false
        },
        {
          "line": 2081,
          "old_api": "zmalloc_used_memory",
          "new_api": "strcasecmp",
          "old_text": "zmalloc_used_memory()",
          "new_text": "strcasecmp(section,\"memory\")",
          "old_line_content": "        bytesToHuman(hmem,zmalloc_used_memory());",
          "new_line_content": "    if (allsections || defsections || !strcasecmp(section,\"memory\")) {",
          "content_same": false
        },
        {
          "line": 2100,
          "old_api": "zmalloc_get_fragmentation_ratio",
          "new_api": "zmalloc_get_rss",
          "old_text": "zmalloc_get_fragmentation_ratio()",
          "new_text": "zmalloc_get_rss()",
          "old_line_content": "            zmalloc_get_fragmentation_ratio(),",
          "new_line_content": "            zmalloc_get_rss(),",
          "content_same": false
        },
        {
          "line": 2140,
          "old_api": "sdscatprintf",
          "new_api": "time",
          "old_text": "sdscatprintf(info,\n                \"aof_current_size:%lld\\r\\n\"\n                \"aof_base_size:%lld\\r\\n\"\n                \"aof_pending_rewrite:%d\\r\\n\"\n                \"aof_buffer_length:%zu\\r\\n\"\n                \"aof_rewrite_buffer_length:%lu\\r\\n\"\n                \"aof_pending_bio_fsync:%llu\\r\\n\"\n                \"aof_delayed_fsync:%lu\\r\\n\",\n                (long long) server.aof_current_size,\n                (long long) server.aof_rewrite_base_size,\n                server.aof_rewrite_scheduled,\n                sdslen(server.aof_buf),\n                aofRewriteBufferSize(),\n                bioPendingJobsOfType(REDIS_BIO_AOF_FSYNC),\n                server.aof_delayed_fsync)",
          "new_text": "time(NULL)",
          "old_line_content": "            info = sdscatprintf(info,",
          "new_line_content": "                -1 : time(NULL)-server.aof_rewrite_time_start,",
          "content_same": false
        },
        {
          "line": 2227,
          "old_api": "strcasecmp",
          "new_api": "dictSize",
          "old_text": "strcasecmp(section,\"replication\")",
          "new_text": "dictSize(server.migrate_cached_sockets)",
          "old_line_content": "    if (allsections || defsections || !strcasecmp(section,\"replication\")) {",
          "new_line_content": "            dictSize(server.migrate_cached_sockets));",
          "content_same": false
        },
        {
          "line": 2366,
          "old_api": "dictSize",
          "new_api": "sdscatprintf",
          "old_text": "dictSize(server.db[j].dict)",
          "new_text": "sdscatprintf(info, \"# Keyspace\\r\\n\")",
          "old_line_content": "            keys = dictSize(server.db[j].dict);",
          "new_line_content": "        info = sdscatprintf(info, \"# Keyspace\\r\\n\");",
          "content_same": false
        },
        {
          "line": 2385,
          "old_api": "sdsempty",
          "new_api": "addReply",
          "old_text": "sdsempty()",
          "new_text": "addReply(c,shared.syntaxerr)",
          "old_line_content": "    addReplySds(c,sdscatprintf(sdsempty(),\"$%lu\\r\\n\",",
          "new_line_content": "        addReply(c,shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 2388,
          "old_api": "addReply",
          "new_api": "genRedisInfoString",
          "old_text": "addReply(c,shared.crlf)",
          "new_text": "genRedisInfoString(section)",
          "old_line_content": "    addReply(c,shared.crlf);",
          "new_line_content": "    sds info = genRedisInfoString(section);",
          "content_same": false
        },
        {
          "line": 2423,
          "old_api": "zmalloc_used_memory",
          "new_api": "listLength",
          "old_text": "zmalloc_used_memory()",
          "new_text": "listLength(server.slaves)",
          "old_line_content": "    mem_used = zmalloc_used_memory();",
          "new_line_content": "    int slaves = listLength(server.slaves);",
          "content_same": false
        },
        {
          "line": 2493,
          "old_api": "dictFind",
          "new_api": "dictGetKey",
          "old_text": "dictFind(db->dict, thiskey)",
          "new_text": "dictGetKey(de)",
          "old_line_content": "                        de = dictFind(db->dict, thiskey);",
          "new_line_content": "                    thiskey = dictGetKey(de);",
          "content_same": false
        },
        {
          "line": 2543,
          "old_api": "notifyKeyspaceEvent",
          "new_api": "dbDelete",
          "old_text": "notifyKeyspaceEvent(REDIS_NOTIFY_EVICTED, \"evicted\",\n                    keyobj, db->id)",
          "new_text": "dbDelete(db,keyobj)",
          "old_line_content": "                notifyKeyspaceEvent(REDIS_NOTIFY_EVICTED, \"evicted\",",
          "new_line_content": "                dbDelete(db,keyobj);",
          "content_same": false
        },
        {
          "line": 2568,
          "old_api": "fgets",
          "new_api": "fopen",
          "old_text": "fgets(buf,64,fp)",
          "new_text": "fopen(\"/proc/sys/vm/overcommit_memory\",\"r\")",
          "old_line_content": "    if (fgets(buf,64,fp) == NULL) {",
          "new_line_content": "    FILE *fp = fopen(\"/proc/sys/vm/overcommit_memory\",\"r\");",
          "content_same": false
        },
        {
          "line": 2572,
          "old_api": "fclose",
          "new_api": "fgets",
          "old_text": "fclose(fp)",
          "new_text": "fgets(buf,64,fp)",
          "old_line_content": "    fclose(fp);",
          "new_line_content": "    if (fgets(buf,64,fp) == NULL) {",
          "content_same": false
        },
        {
          "line": 2578,
          "old_api": "linuxOvercommitMemoryValue",
          "new_api": "atoi",
          "old_text": "linuxOvercommitMemoryValue()",
          "new_text": "atoi(buf)",
          "old_line_content": "    if (linuxOvercommitMemoryValue() == 0) {",
          "new_line_content": "    return atoi(buf);",
          "content_same": false
        },
        {
          "line": 2606,
          "old_api": "close",
          "new_api": "open",
          "old_text": "close(fd)",
          "new_text": "open(\"/dev/null\", O_RDWR, 0)",
          "old_line_content": "        if (fd > STDERR_FILENO) close(fd);",
          "new_line_content": "    if ((fd = open(\"/dev/null\", O_RDWR, 0)) != -1) {",
          "content_same": false
        },
        {
          "line": 2617,
          "old_api": "redisBuildId",
          "new_api": "redisGitSHA1",
          "old_text": "redisBuildId()",
          "new_text": "redisGitSHA1()",
          "old_line_content": "        (unsigned long long) redisBuildId());",
          "new_line_content": "        redisGitSHA1(),",
          "content_same": false
        },
        {
          "line": 2618,
          "old_api": "exit",
          "new_api": "redisGitDirty",
          "old_text": "exit(0)",
          "new_text": "redisGitDirty()",
          "old_line_content": "    exit(0);",
          "new_line_content": "        atoi(redisGitDirty()) > 0,",
          "content_same": false
        },
        {
          "line": 2622,
          "old_api": "fprintf",
          "new_api": "exit",
          "old_text": "fprintf(stderr,\"Usage: ./redis-server [/path/to/redis.conf] [options]\\n\")",
          "new_text": "exit(0)",
          "old_line_content": "    fprintf(stderr,\"Usage: ./redis-server [/path/to/redis.conf] [options]\\n\");",
          "new_line_content": "    exit(0);",
          "content_same": false
        },
        {
          "line": 2635,
          "old_api": "exit",
          "new_api": "fprintf",
          "old_text": "exit(1)",
          "new_text": "fprintf(stderr,\"       ./redis-server --port 7777 --slaveof 127.0.0.1 8888\\n\")",
          "old_line_content": "    exit(1);",
          "new_line_content": "    fprintf(stderr,\"       ./redis-server --port 7777 --slaveof 127.0.0.1 8888\\n\");",
          "content_same": false
        },
        {
          "line": 2652,
          "old_api": "getpid",
          "new_api": "redisGitSHA1",
          "old_text": "getpid()",
          "new_text": "redisGitSHA1()",
          "old_line_content": "        (long) getpid()",
          "new_line_content": "        redisGitSHA1(),",
          "content_same": false
        },
        {
          "line": 2659,
          "old_api": "REDIS_NOTUSED",
          "new_api": "zfree",
          "old_text": "REDIS_NOTUSED(sig)",
          "new_text": "zfree(buf)",
          "old_line_content": "    REDIS_NOTUSED(sig);",
          "new_line_content": "    zfree(buf);",
          "content_same": false
        },
        {
          "line": 2680,
          "old_api": "sigaction",
          "new_api": "sigemptyset",
          "old_text": "sigaction(SIGBUS, &act, NULL)",
          "new_text": "sigemptyset(&act.sa_mask)",
          "old_line_content": "    sigaction(SIGBUS, &act, NULL);",
          "new_line_content": "    sigemptyset(&act.sa_mask);",
          "content_same": false
        },
        {
          "line": 2708,
          "old_api": "redisLog",
          "new_api": "loadAppendOnlyFile",
          "old_text": "redisLog(REDIS_NOTICE,\"DB loaded from disk: %.3f seconds\",\n                (float)(ustime()-start)/1000000)",
          "new_text": "loadAppendOnlyFile(server.aof_filename)",
          "old_line_content": "            redisLog(REDIS_NOTICE,\"DB loaded from disk: %.3f seconds\",",
          "new_line_content": "        if (loadAppendOnlyFile(server.aof_filename) == REDIS_OK)",
          "content_same": false
        },
        {
          "line": 2711,
          "old_api": "redisLog",
          "new_api": "rdbLoad",
          "old_text": "redisLog(REDIS_WARNING,\"Fatal error loading the DB. Exiting.\")",
          "new_text": "rdbLoad(server.rdb_filename)",
          "old_line_content": "            redisLog(REDIS_WARNING,\"Fatal error loading the DB. Exiting.\");",
          "new_line_content": "        if (rdbLoad(server.rdb_filename) == REDIS_OK) {",
          "content_same": false
        },
        {
          "line": 2712,
          "old_api": "exit",
          "new_api": "redisLog",
          "old_text": "exit(1)",
          "new_text": "redisLog(REDIS_NOTICE,\"DB loaded from disk: %.3f seconds\",\n                (float)(ustime()-start)/1000000)",
          "old_line_content": "            exit(1);",
          "new_line_content": "            redisLog(REDIS_NOTICE,\"DB loaded from disk: %.3f seconds\",",
          "content_same": false
        },
        {
          "line": 2743,
          "old_api": "getpid",
          "new_api": "spt_init",
          "old_text": "getpid()",
          "new_text": "spt_init(argc, argv)",
          "old_line_content": "    srand(time(NULL)^getpid());",
          "new_line_content": "    spt_init(argc, argv);",
          "content_same": false
        },
        {
          "line": 2745,
          "old_api": "getpid",
          "new_api": "zmalloc_enable_thread_safeness",
          "old_text": "getpid()",
          "new_text": "zmalloc_enable_thread_safeness()",
          "old_line_content": "    dictSetHashFunctionSeed(tv.tv_sec^tv.tv_usec^getpid());",
          "new_line_content": "    zmalloc_enable_thread_safeness();",
          "content_same": false
        },
        {
          "line": 2746,
          "old_api": "checkForSentinelMode",
          "new_api": "zmalloc_set_oom_handler",
          "old_text": "checkForSentinelMode(argc,argv)",
          "new_text": "zmalloc_set_oom_handler(redisOutOfMemoryHandler)",
          "old_line_content": "    server.sentinel_mode = checkForSentinelMode(argc,argv);",
          "new_line_content": "    zmalloc_set_oom_handler(redisOutOfMemoryHandler);",
          "content_same": false
        },
        {
          "line": 2747,
          "old_api": "initServerConfig",
          "new_api": "getpid",
          "old_text": "initServerConfig()",
          "new_text": "getpid()",
          "old_line_content": "    initServerConfig();",
          "new_line_content": "    srand(time(NULL)^getpid());",
          "content_same": false
        },
        {
          "line": 2763,
          "old_api": "strcmp",
          "new_api": "sdsempty",
          "old_text": "strcmp(argv[1], \"-v\")",
          "new_text": "sdsempty()",
          "old_line_content": "        if (strcmp(argv[1], \"-v\") == 0 ||",
          "new_line_content": "        sds options = sdsempty();",
          "content_same": false
        },
        {
          "line": 2769,
          "old_api": "atoi",
          "new_api": "strcmp",
          "old_text": "atoi(argv[2])",
          "new_text": "strcmp(argv[1], \"--help\")",
          "old_line_content": "                memtest(atoi(argv[2]),50);",
          "new_line_content": "        if (strcmp(argv[1], \"--help\") == 0 ||",
          "content_same": false
        },
        {
          "line": 2770,
          "old_api": "exit",
          "new_api": "usage",
          "old_text": "exit(0)",
          "new_text": "usage()",
          "old_line_content": "                exit(0);",
          "new_line_content": "            strcmp(argv[1], \"-h\") == 0) usage();",
          "content_same": false
        },
        {
          "line": 2773,
          "old_api": "fprintf",
          "new_api": "atoi",
          "old_text": "fprintf(stderr,\"Example: ./redis-server --test-memory 4096\\n\\n\")",
          "new_text": "atoi(argv[2])",
          "old_line_content": "                fprintf(stderr,\"Example: ./redis-server --test-memory 4096\\n\\n\");",
          "new_line_content": "                memtest(atoi(argv[2]),50);",
          "content_same": false
        },
        {
          "line": 2793,
          "old_api": "strlen",
          "new_api": "sdscat",
          "old_text": "strlen(argv[j])",
          "new_text": "sdscat(options,argv[j]+2)",
          "old_line_content": "                options = sdscatrepr(options,argv[j],strlen(argv[j]));",
          "new_line_content": "                options = sdscat(options,argv[j]+2);",
          "content_same": false
        },
        {
          "line": 2798,
          "old_api": "resetServerSaveParams",
          "new_api": "sdscat",
          "old_text": "resetServerSaveParams()",
          "new_text": "sdscat(options,\" \")",
          "old_line_content": "        resetServerSaveParams();",
          "new_line_content": "                options = sdscat(options,\" \");",
          "content_same": false
        },
        {
          "line": 2802,
          "old_api": "redisLog",
          "new_api": "resetServerSaveParams",
          "old_text": "redisLog(REDIS_WARNING, \"Warning: no config file specified, using the default config. In order to specify a config file use %s /path/to/%s.conf\", argv[0], server.sentinel_mode ? \"sentinel\" : \"redis\")",
          "new_text": "resetServerSaveParams()",
          "old_line_content": "        redisLog(REDIS_WARNING, \"Warning: no config file specified, using the default config. In order to specify a config file use %s /path/to/%s.conf\", argv[0], server.sentinel_mode ? \"sentinel\" : \"redis\");",
          "new_line_content": "        resetServerSaveParams();",
          "content_same": false
        },
        {
          "line": 2804,
          "old_api": "daemonize",
          "new_api": "sdsfree",
          "old_text": "daemonize()",
          "new_text": "sdsfree(options)",
          "old_line_content": "    if (server.daemonize) daemonize();",
          "new_line_content": "        sdsfree(options);",
          "content_same": false
        },
        {
          "line": 2806,
          "old_api": "createPidFile",
          "new_api": "redisLog",
          "old_text": "createPidFile()",
          "new_text": "redisLog(REDIS_WARNING, \"Warning: no config file specified, using the default config. In order to specify a config file use %s /path/to/%s.conf\", argv[0], server.sentinel_mode ? \"sentinel\" : \"redis\")",
          "old_line_content": "    if (server.daemonize) createPidFile();",
          "new_line_content": "        redisLog(REDIS_WARNING, \"Warning: no config file specified, using the default config. In order to specify a config file use %s /path/to/%s.conf\", argv[0], server.sentinel_mode ? \"sentinel\" : \"redis\");",
          "content_same": false
        },
        {
          "line": 2808,
          "old_api": "redisAsciiArt",
          "new_api": "daemonize",
          "old_text": "redisAsciiArt()",
          "new_text": "daemonize()",
          "old_line_content": "    redisAsciiArt();",
          "new_line_content": "    if (server.daemonize) daemonize();",
          "content_same": false
        },
        {
          "line": 2812,
          "old_api": "redisLog",
          "new_api": "redisAsciiArt",
          "old_text": "redisLog(REDIS_WARNING,\"Server started, Redis version \" REDIS_VERSION)",
          "new_text": "redisAsciiArt()",
          "old_line_content": "        redisLog(REDIS_WARNING,\"Server started, Redis version \" REDIS_VERSION);",
          "new_line_content": "    redisAsciiArt();",
          "content_same": false
        },
        {
          "line": 2816,
          "old_api": "loadDataFromDisk",
          "new_api": "redisLog",
          "old_text": "loadDataFromDisk()",
          "new_text": "redisLog(REDIS_WARNING,\"Server started, Redis version \" REDIS_VERSION)",
          "old_line_content": "        loadDataFromDisk();",
          "new_line_content": "        redisLog(REDIS_WARNING,\"Server started, Redis version \" REDIS_VERSION);",
          "content_same": false
        },
        {
          "line": 2818,
          "old_api": "verifyClusterConfigWithData",
          "new_api": "linuxOvercommitMemoryWarning",
          "old_text": "verifyClusterConfigWithData()",
          "new_text": "linuxOvercommitMemoryWarning()",
          "old_line_content": "            if (verifyClusterConfigWithData() == REDIS_ERR) {",
          "new_line_content": "        linuxOvercommitMemoryWarning();",
          "content_same": false
        },
        {
          "line": 2822,
          "old_api": "exit",
          "new_api": "verifyClusterConfigWithData",
          "old_text": "exit(1)",
          "new_text": "verifyClusterConfigWithData()",
          "old_line_content": "                exit(1);",
          "new_line_content": "            if (verifyClusterConfigWithData() == REDIS_ERR) {",
          "content_same": false
        },
        {
          "line": 2826,
          "old_api": "redisLog",
          "new_api": "exit",
          "old_text": "redisLog(REDIS_NOTICE,\"The server is now ready to accept connections on port %d\", server.port)",
          "new_text": "exit(1)",
          "old_line_content": "            redisLog(REDIS_NOTICE,\"The server is now ready to accept connections on port %d\", server.port);",
          "new_line_content": "                exit(1);",
          "content_same": false
        },
        {
          "line": 2837,
          "old_api": "aeMain",
          "new_api": "redisLog",
          "old_text": "aeMain(server.el)",
          "new_text": "redisLog(REDIS_WARNING,\"WARNING: You specified a maxmemory value that is less than 1MB (current value is %llu bytes). Are you sure this is what you really want?\", server.maxmemory)",
          "old_line_content": "    aeMain(server.el);",
          "new_line_content": "        redisLog(REDIS_WARNING,\"WARNING: You specified a maxmemory value that is less than 1MB (current value is %llu bytes). Are you sure this is what you really want?\", server.maxmemory);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 2051,
          "old_api": null,
          "new_api": "aeGetApiName",
          "old_text": null,
          "new_text": "aeGetApiName()",
          "old_line_content": "            0,0,0,",
          "new_line_content": "            aeGetApiName(),",
          "content_same": false
        },
        {
          "line": 2057,
          "old_api": null,
          "new_api": "getpid",
          "old_text": null,
          "new_text": "getpid()",
          "old_line_content": "            uptime/(3600*24),",
          "new_line_content": "            (long) getpid(),",
          "content_same": false
        },
        {
          "line": 2067,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(section,\"clients\")",
          "old_line_content": "            \"connected_clients:%lu\\r\\n\"",
          "new_line_content": "    if (allsections || defsections || !strcasecmp(section,\"clients\")) {",
          "content_same": false
        },
        {
          "line": 2068,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(info,\"\\r\\n\")",
          "old_line_content": "            \"client_longest_output_list:%lu\\r\\n\"",
          "new_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 2069,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n            \"# Clients\\r\\n\"\n            \"connected_clients:%lu\\r\\n\"\n            \"client_longest_output_list:%lu\\r\\n\"\n            \"client_biggest_input_buf:%lu\\r\\n\"\n            \"blocked_clients:%d\\r\\n\",\n            listLength(server.clients)-listLength(server.slaves),\n            lol, bib,\n            server.bpop_blocked_clients)",
          "old_line_content": "            \"client_biggest_input_buf:%lu\\r\\n\"",
          "new_line_content": "        info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 2075,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.slaves)",
          "old_line_content": "",
          "new_line_content": "            listLength(server.clients)-listLength(server.slaves),",
          "content_same": false
        },
        {
          "line": 2085,
          "old_api": null,
          "new_api": "zmalloc_used_memory",
          "old_text": null,
          "new_text": "zmalloc_used_memory()",
          "old_line_content": "            \"# Memory\\r\\n\"",
          "new_line_content": "        bytesToHuman(hmem,zmalloc_used_memory());",
          "content_same": false
        },
        {
          "line": 2086,
          "old_api": null,
          "new_api": "bytesToHuman",
          "old_text": null,
          "new_text": "bytesToHuman(peak_hmem,server.stat_peak_memory)",
          "old_line_content": "            \"used_memory:%zu\\r\\n\"",
          "new_line_content": "        bytesToHuman(peak_hmem,server.stat_peak_memory);",
          "content_same": false
        },
        {
          "line": 2087,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(info,\"\\r\\n\")",
          "old_line_content": "            \"used_memory_human:%s\\r\\n\"",
          "new_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 2088,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n            \"# Memory\\r\\n\"\n            \"used_memory:%zu\\r\\n\"\n            \"used_memory_human:%s\\r\\n\"\n            \"used_memory_rss:%zu\\r\\n\"\n            \"used_memory_peak:%zu\\r\\n\"\n            \"used_memory_peak_human:%s\\r\\n\"\n            \"used_memory_lua:%lld\\r\\n\"\n            \"mem_fragmentation_ratio:%.2f\\r\\n\"\n            \"mem_allocator:%s\\r\\n\",\n            zmalloc_used_memory(),\n            hmem,\n            zmalloc_get_rss(),\n            server.stat_peak_memory,\n            peak_hmem,\n            ((long long)lua_gc(server.lua,LUA_GCCOUNT,0))*1024LL,\n            zmalloc_get_fragmentation_ratio(),\n            ZMALLOC_LIB\n            )",
          "old_line_content": "            \"used_memory_rss:%zu\\r\\n\"",
          "new_line_content": "        info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 2098,
          "old_api": null,
          "new_api": "zmalloc_used_memory",
          "old_text": null,
          "new_text": "zmalloc_used_memory()",
          "old_line_content": "            peak_hmem,",
          "new_line_content": "            zmalloc_used_memory(),",
          "content_same": false
        },
        {
          "line": 2103,
          "old_api": null,
          "new_api": "lua_gc",
          "old_text": null,
          "new_text": "lua_gc(server.lua,LUA_GCCOUNT,0)",
          "old_line_content": "    }",
          "new_line_content": "            ((long long)lua_gc(server.lua,LUA_GCCOUNT,0))*1024LL,",
          "content_same": false
        },
        {
          "line": 2104,
          "old_api": null,
          "new_api": "zmalloc_get_fragmentation_ratio",
          "old_text": null,
          "new_text": "zmalloc_get_fragmentation_ratio()",
          "old_line_content": "",
          "new_line_content": "            zmalloc_get_fragmentation_ratio(),",
          "content_same": false
        },
        {
          "line": 2110,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(section,\"persistence\")",
          "old_line_content": "            \"loading:%d\\r\\n\"",
          "new_line_content": "    if (allsections || defsections || !strcasecmp(section,\"persistence\")) {",
          "content_same": false
        },
        {
          "line": 2111,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(info,\"\\r\\n\")",
          "old_line_content": "            \"rdb_changes_since_last_save:%lld\\r\\n\"",
          "new_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 2112,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n            \"# Persistence\\r\\n\"\n            \"loading:%d\\r\\n\"\n            \"rdb_changes_since_last_save:%lld\\r\\n\"\n            \"rdb_bgsave_in_progress:%d\\r\\n\"\n            \"rdb_last_save_time:%ld\\r\\n\"\n            \"rdb_last_bgsave_status:%s\\r\\n\"\n            \"rdb_last_bgsave_time_sec:%ld\\r\\n\"\n            \"rdb_current_bgsave_time_sec:%ld\\r\\n\"\n            \"aof_enabled:%d\\r\\n\"\n            \"aof_rewrite_in_progress:%d\\r\\n\"\n            \"aof_rewrite_scheduled:%d\\r\\n\"\n            \"aof_last_rewrite_time_sec:%ld\\r\\n\"\n            \"aof_current_rewrite_time_sec:%ld\\r\\n\"\n            \"aof_last_bgrewrite_status:%s\\r\\n\",\n            server.loading,\n            server.dirty,\n            server.rdb_child_pid != -1,\n            server.lastsave,\n            (server.lastbgsave_status == REDIS_OK) ? \"ok\" : \"err\",\n            server.rdb_save_time_last,\n            (server.rdb_child_pid == -1) ?\n                -1 : time(NULL)-server.rdb_save_time_start,\n            server.aof_state != REDIS_AOF_OFF,\n            server.aof_child_pid != -1,\n            server.aof_rewrite_scheduled,\n            server.aof_rewrite_time_last,\n            (server.aof_child_pid == -1) ?\n                -1 : time(NULL)-server.aof_rewrite_time_start,\n            (server.aof_lastbgrewrite_status == REDIS_OK) ? \"ok\" : \"err\")",
          "old_line_content": "            \"rdb_bgsave_in_progress:%d\\r\\n\"",
          "new_line_content": "        info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 2134,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "            server.aof_rewrite_time_last,",
          "new_line_content": "                -1 : time(NULL)-server.rdb_save_time_start,",
          "content_same": false
        },
        {
          "line": 2144,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n                \"aof_current_size:%lld\\r\\n\"\n                \"aof_base_size:%lld\\r\\n\"\n                \"aof_pending_rewrite:%d\\r\\n\"\n                \"aof_buffer_length:%zu\\r\\n\"\n                \"aof_rewrite_buffer_length:%lu\\r\\n\"\n                \"aof_pending_bio_fsync:%llu\\r\\n\"\n                \"aof_delayed_fsync:%lu\\r\\n\",\n                (long long) server.aof_current_size,\n                (long long) server.aof_rewrite_base_size,\n                server.aof_rewrite_scheduled,\n                sdslen(server.aof_buf),\n                aofRewriteBufferSize(),\n                bioPendingJobsOfType(REDIS_BIO_AOF_FSYNC),\n                server.aof_delayed_fsync)",
          "old_line_content": "                \"aof_buffer_length:%zu\\r\\n\"",
          "new_line_content": "            info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 2155,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(server.aof_buf)",
          "old_line_content": "        }",
          "new_line_content": "                sdslen(server.aof_buf),",
          "content_same": false
        },
        {
          "line": 2156,
          "old_api": null,
          "new_api": "aofRewriteBufferSize",
          "old_text": null,
          "new_text": "aofRewriteBufferSize()",
          "old_line_content": "",
          "new_line_content": "                aofRewriteBufferSize(),",
          "content_same": false
        },
        {
          "line": 2157,
          "old_api": null,
          "new_api": "bioPendingJobsOfType",
          "old_text": null,
          "new_text": "bioPendingJobsOfType(REDIS_BIO_AOF_FSYNC)",
          "old_line_content": "        if (server.loading) {",
          "new_line_content": "                bioPendingJobsOfType(REDIS_BIO_AOF_FSYNC),",
          "content_same": false
        },
        {
          "line": 2178,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n                \"loading_start_time:%ld\\r\\n\"\n                \"loading_total_bytes:%llu\\r\\n\"\n                \"loading_loaded_bytes:%llu\\r\\n\"\n                \"loading_loaded_perc:%.2f\\r\\n\"\n                \"loading_eta_seconds:%ld\\r\\n\"\n                ,(unsigned long) server.loading_start_time,\n                (unsigned long long) server.loading_total_bytes,\n                (unsigned long long) server.loading_loaded_bytes,\n                perc,\n                eta\n            )",
          "old_line_content": "                \"loading_loaded_perc:%.2f\\r\\n\"",
          "new_line_content": "            info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 2194,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(section,\"stats\")",
          "old_line_content": "            \"total_connections_received:%lld\\r\\n\"",
          "new_line_content": "    if (allsections || defsections || !strcasecmp(section,\"stats\")) {",
          "content_same": false
        },
        {
          "line": 2195,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(info,\"\\r\\n\")",
          "old_line_content": "            \"total_commands_processed:%lld\\r\\n\"",
          "new_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 2196,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n            \"# Stats\\r\\n\"\n            \"total_connections_received:%lld\\r\\n\"\n            \"total_commands_processed:%lld\\r\\n\"\n            \"instantaneous_ops_per_sec:%lld\\r\\n\"\n            \"rejected_connections:%lld\\r\\n\"\n            \"sync_full:%lld\\r\\n\"\n            \"sync_partial_ok:%lld\\r\\n\"\n            \"sync_partial_err:%lld\\r\\n\"\n            \"expired_keys:%lld\\r\\n\"\n            \"evicted_keys:%lld\\r\\n\"\n            \"keyspace_hits:%lld\\r\\n\"\n            \"keyspace_misses:%lld\\r\\n\"\n            \"pubsub_channels:%ld\\r\\n\"\n            \"pubsub_patterns:%lu\\r\\n\"\n            \"latest_fork_usec:%lld\\r\\n\"\n            \"migrate_cached_sockets:%ld\\r\\n\",\n            server.stat_numconnections,\n            server.stat_numcommands,\n            getOperationsPerSecond(),\n            server.stat_rejected_conn,\n            server.stat_sync_full,\n            server.stat_sync_partial_ok,\n            server.stat_sync_partial_err,\n            server.stat_expiredkeys,\n            server.stat_evictedkeys,\n            server.stat_keyspace_hits,\n            server.stat_keyspace_misses,\n            dictSize(server.pubsub_channels),\n            listLength(server.pubsub_patterns),\n            server.stat_fork_time,\n            dictSize(server.migrate_cached_sockets))",
          "old_line_content": "            \"instantaneous_ops_per_sec:%lld\\r\\n\"",
          "new_line_content": "        info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 2215,
          "old_api": null,
          "new_api": "getOperationsPerSecond",
          "old_text": null,
          "new_text": "getOperationsPerSecond()",
          "old_line_content": "            server.stat_sync_partial_err,",
          "new_line_content": "            getOperationsPerSecond(),",
          "content_same": false
        },
        {
          "line": 2224,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(server.pubsub_channels)",
          "old_line_content": "    }",
          "new_line_content": "            dictSize(server.pubsub_channels),",
          "content_same": false
        },
        {
          "line": 2225,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.pubsub_patterns)",
          "old_line_content": "",
          "new_line_content": "            listLength(server.pubsub_patterns),",
          "content_same": false
        },
        {
          "line": 2231,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(section,\"replication\")",
          "old_line_content": "            \"role:%s\\r\\n\",",
          "new_line_content": "    if (allsections || defsections || !strcasecmp(section,\"replication\")) {",
          "content_same": false
        },
        {
          "line": 2232,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(info,\"\\r\\n\")",
          "old_line_content": "            server.masterhost == NULL ? \"master\" : \"slave\");",
          "new_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 2233,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n            \"# Replication\\r\\n\"\n            \"role:%s\\r\\n\",\n            server.masterhost == NULL ? \"master\" : \"slave\")",
          "old_line_content": "        if (server.masterhost) {",
          "new_line_content": "        info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 2238,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n                \"master_host:%s\\r\\n\"\n                \"master_port:%d\\r\\n\"\n                \"master_link_status:%s\\r\\n\"\n                \"master_last_io_seconds_ago:%d\\r\\n\"\n                \"master_sync_in_progress:%d\\r\\n\"\n                \"slave_repl_offset:%lld\\r\\n\"\n                ,server.masterhost,\n                server.masterport,\n                (server.repl_state == REDIS_REPL_CONNECTED) ?\n                    \"up\" : \"down\",\n                server.master ?\n                ((int)(server.unixtime-server.master->lastinteraction)) : -1,\n                server.repl_state == REDIS_REPL_TRANSFER,\n                server.master ? server.master->reploff : -1\n            )",
          "old_line_content": "                \"master_last_io_seconds_ago:%d\\r\\n\"",
          "new_line_content": "            info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 2256,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n                    \"master_sync_left_bytes:%lld\\r\\n\"\n                    \"master_sync_last_io_seconds_ago:%d\\r\\n\"\n                    , (long long)\n                        (server.repl_transfer_size - server.repl_transfer_read),\n                    (int)(server.unixtime-server.repl_transfer_lastio)\n                )",
          "old_line_content": "                        (server.repl_transfer_size - server.repl_transfer_read),",
          "new_line_content": "                info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 2270,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n                \"slave_priority:%d\\r\\n\"\n                \"slave_read_only:%d\\r\\n\",\n                server.slave_priority,\n                server.repl_slave_ro)",
          "old_line_content": "                server.repl_slave_ro);",
          "new_line_content": "            info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 2276,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n            \"connected_slaves:%lu\\r\\n\",\n            listLength(server.slaves))",
          "old_line_content": "            int slaveid = 0;",
          "new_line_content": "        info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 2278,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.slaves)",
          "old_line_content": "            listIter li;",
          "new_line_content": "            listLength(server.slaves));",
          "content_same": false
        },
        {
          "line": 2279,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.slaves)",
          "old_line_content": "",
          "new_line_content": "        if (listLength(server.slaves)) {",
          "content_same": false
        },
        {
          "line": 2284,
          "old_api": null,
          "new_api": "listRewind",
          "old_text": null,
          "new_text": "listRewind(server.slaves,&li)",
          "old_line_content": "                char ip[32];",
          "new_line_content": "            listRewind(server.slaves,&li);",
          "content_same": false
        },
        {
          "line": 2285,
          "old_api": null,
          "new_api": "listNext",
          "old_text": null,
          "new_text": "listNext(&li)",
          "old_line_content": "                int port;",
          "new_line_content": "            while((ln = listNext(&li))) {",
          "content_same": false
        },
        {
          "line": 2286,
          "old_api": null,
          "new_api": "listNodeValue",
          "old_text": null,
          "new_text": "listNodeValue(ln)",
          "old_line_content": "",
          "new_line_content": "                redisClient *slave = listNodeValue(ln);",
          "content_same": false
        },
        {
          "line": 2291,
          "old_api": null,
          "new_api": "anetPeerToString",
          "old_text": null,
          "new_text": "anetPeerToString(slave->fd,ip,&port)",
          "old_line_content": "                    state = \"wait_bgsave\";",
          "new_line_content": "                if (anetPeerToString(slave->fd,ip,&port) == -1) continue;",
          "content_same": false
        },
        {
          "line": 2305,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\"slave%d:%s,%d,%s\\r\\n\",\n                    slaveid,ip,slave->slave_listening_port,state)",
          "old_line_content": "        }",
          "new_line_content": "                info = sdscatprintf(info,\"slave%d:%s,%d,%s\\r\\n\",",
          "content_same": false
        },
        {
          "line": 2310,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n            \"master_repl_offset:%lld\\r\\n\"\n            \"repl_backlog_active:%d\\r\\n\"\n            \"repl_backlog_size:%lld\\r\\n\"\n            \"repl_backlog_first_byte_offset:%lld\\r\\n\"\n            \"repl_backlog_histlen:%lld\\r\\n\",\n            server.master_repl_offset,\n            server.repl_backlog != NULL,\n            server.repl_backlog_size,\n            server.repl_backlog_off,\n            server.repl_backlog_histlen)",
          "old_line_content": "            \"repl_backlog_first_byte_offset:%lld\\r\\n\"",
          "new_line_content": "        info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 2324,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(section,\"cpu\")",
          "old_line_content": "        \"used_cpu_sys:%.2f\\r\\n\"",
          "new_line_content": "    if (allsections || defsections || !strcasecmp(section,\"cpu\")) {",
          "content_same": false
        },
        {
          "line": 2325,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(info,\"\\r\\n\")",
          "old_line_content": "        \"used_cpu_user:%.2f\\r\\n\"",
          "new_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 2326,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n        \"# CPU\\r\\n\"\n        \"used_cpu_sys:%.2f\\r\\n\"\n        \"used_cpu_user:%.2f\\r\\n\"\n        \"used_cpu_sys_children:%.2f\\r\\n\"\n        \"used_cpu_user_children:%.2f\\r\\n\",\n        (float)self_ru.ru_stime.tv_sec+(float)self_ru.ru_stime.tv_usec/1000000,\n        (float)self_ru.ru_utime.tv_sec+(float)self_ru.ru_utime.tv_usec/1000000,\n        (float)c_ru.ru_stime.tv_sec+(float)c_ru.ru_stime.tv_usec/1000000,\n        (float)c_ru.ru_utime.tv_sec+(float)c_ru.ru_utime.tv_usec/1000000)",
          "old_line_content": "        \"used_cpu_sys_children:%.2f\\r\\n\"",
          "new_line_content": "        info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 2339,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(section,\"commandstats\")",
          "old_line_content": "        for (j = 0; j < numcommands; j++) {",
          "new_line_content": "    if (allsections || !strcasecmp(section,\"commandstats\")) {",
          "content_same": false
        },
        {
          "line": 2340,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(info,\"\\r\\n\")",
          "old_line_content": "            struct redisCommand *c = redisCommandTable+j;",
          "new_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 2341,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info, \"# Commandstats\\r\\n\")",
          "old_line_content": "",
          "new_line_content": "        info = sdscatprintf(info, \"# Commandstats\\r\\n\");",
          "content_same": false
        },
        {
          "line": 2347,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n                \"cmdstat_%s:calls=%lld,usec=%lld,usec_per_call=%.2f\\r\\n\",\n                c->name, c->calls, c->microseconds,\n                (c->calls == 0) ? 0 : ((float)c->microseconds/c->calls))",
          "old_line_content": "        }",
          "new_line_content": "            info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 2355,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(section,\"cluster\")",
          "old_line_content": "        \"cluster_enabled:%d\\r\\n\",",
          "new_line_content": "    if (allsections || defsections || !strcasecmp(section,\"cluster\")) {",
          "content_same": false
        },
        {
          "line": 2356,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(info,\"\\r\\n\")",
          "old_line_content": "        server.cluster_enabled);",
          "new_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 2357,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n        \"# Cluster\\r\\n\"\n        \"cluster_enabled:%d\\r\\n\",\n        server.cluster_enabled)",
          "old_line_content": "    }",
          "new_line_content": "        info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 2364,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(section,\"keyspace\")",
          "old_line_content": "            long long keys, vkeys;",
          "new_line_content": "    if (allsections || defsections || !strcasecmp(section,\"keyspace\")) {",
          "content_same": false
        },
        {
          "line": 2365,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(info,\"\\r\\n\")",
          "old_line_content": "",
          "new_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 2370,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(server.db[j].dict)",
          "old_line_content": "                    j, keys, vkeys);",
          "new_line_content": "            keys = dictSize(server.db[j].dict);",
          "content_same": false
        },
        {
          "line": 2371,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(server.db[j].expires)",
          "old_line_content": "            }",
          "new_line_content": "            vkeys = dictSize(server.db[j].expires);",
          "content_same": false
        },
        {
          "line": 2373,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info, \"db%d:keys=%lld,expires=%lld\\r\\n\",\n                    j, keys, vkeys)",
          "old_line_content": "    }",
          "new_line_content": "                info = sdscatprintf(info, \"db%d:keys=%lld,expires=%lld\\r\\n\",",
          "content_same": false
        },
        {
          "line": 2389,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "}",
          "new_line_content": "    addReplySds(c,sdscatprintf(sdsempty(),\"$%lu\\r\\n\",",
          "content_same": false
        },
        {
          "line": 2390,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(info)",
          "old_line_content": "",
          "new_line_content": "        (unsigned long)sdslen(info)));",
          "content_same": false
        },
        {
          "line": 2391,
          "old_api": null,
          "new_api": "addReplySds",
          "old_text": null,
          "new_text": "addReplySds(c,info)",
          "old_line_content": "void monitorCommand(redisClient *c) {",
          "new_line_content": "    addReplySds(c,info);",
          "content_same": false
        },
        {
          "line": 2392,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.crlf)",
          "old_line_content": "    /* ignore MONITOR if already slave or in monitor mode */",
          "new_line_content": "    addReply(c,shared.crlf);",
          "content_same": false
        },
        {
          "line": 2400,
          "old_api": null,
          "new_api": "listAddNodeTail",
          "old_text": null,
          "new_text": "listAddNodeTail(server.monitors,c)",
          "old_line_content": "/* ============================ Maxmemory directive  ======================== */",
          "new_line_content": "    listAddNodeTail(server.monitors,c);",
          "content_same": false
        },
        {
          "line": 2401,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "",
          "new_line_content": "    addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 2427,
          "old_api": null,
          "new_api": "zmalloc_used_memory",
          "old_text": null,
          "new_text": "zmalloc_used_memory()",
          "old_line_content": "",
          "new_line_content": "    mem_used = zmalloc_used_memory();",
          "content_same": false
        },
        {
          "line": 2432,
          "old_api": null,
          "new_api": "listRewind",
          "old_text": null,
          "new_text": "listRewind(server.slaves,&li)",
          "old_line_content": "            if (obuf_bytes > mem_used)",
          "new_line_content": "        listRewind(server.slaves,&li);",
          "content_same": false
        },
        {
          "line": 2433,
          "old_api": null,
          "new_api": "listNext",
          "old_text": null,
          "new_text": "listNext(&li)",
          "old_line_content": "                mem_used = 0;",
          "new_line_content": "        while((ln = listNext(&li))) {",
          "content_same": false
        },
        {
          "line": 2434,
          "old_api": null,
          "new_api": "listNodeValue",
          "old_text": null,
          "new_text": "listNodeValue(ln)",
          "old_line_content": "            else",
          "new_line_content": "            redisClient *slave = listNodeValue(ln);",
          "content_same": false
        },
        {
          "line": 2435,
          "old_api": null,
          "new_api": "getClientOutputBufferMemoryUsage",
          "old_text": null,
          "new_text": "getClientOutputBufferMemoryUsage(slave)",
          "old_line_content": "                mem_used -= obuf_bytes;",
          "new_line_content": "            unsigned long obuf_bytes = getClientOutputBufferMemoryUsage(slave);",
          "content_same": false
        },
        {
          "line": 2443,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(server.aof_buf)",
          "old_line_content": "    /* Check if we are over the memory limit. */",
          "new_line_content": "        mem_used -= sdslen(server.aof_buf);",
          "content_same": false
        },
        {
          "line": 2444,
          "old_api": null,
          "new_api": "aofRewriteBufferSize",
          "old_text": null,
          "new_text": "aofRewriteBufferSize()",
          "old_line_content": "    if (mem_used <= server.maxmemory) return REDIS_OK;",
          "new_line_content": "        mem_used -= aofRewriteBufferSize();",
          "content_same": false
        },
        {
          "line": 2473,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(dict)",
          "old_line_content": "                server.maxmemory_policy == REDIS_MAXMEMORY_VOLATILE_RANDOM)",
          "new_line_content": "            if (dictSize(dict) == 0) continue;",
          "content_same": false
        },
        {
          "line": 2479,
          "old_api": null,
          "new_api": "dictGetRandomKey",
          "old_text": null,
          "new_text": "dictGetRandomKey(dict)",
          "old_line_content": "            /* volatile-lru and allkeys-lru policy */",
          "new_line_content": "                de = dictGetRandomKey(dict);",
          "content_same": false
        },
        {
          "line": 2480,
          "old_api": null,
          "new_api": "dictGetKey",
          "old_text": null,
          "new_text": "dictGetKey(de)",
          "old_line_content": "            else if (server.maxmemory_policy == REDIS_MAXMEMORY_ALLKEYS_LRU ||",
          "new_line_content": "                bestkey = dictGetKey(de);",
          "content_same": false
        },
        {
          "line": 2492,
          "old_api": null,
          "new_api": "dictGetRandomKey",
          "old_text": null,
          "new_text": "dictGetRandomKey(dict)",
          "old_line_content": "                    if (server.maxmemory_policy == REDIS_MAXMEMORY_VOLATILE_LRU)",
          "new_line_content": "                    de = dictGetRandomKey(dict);",
          "content_same": false
        },
        {
          "line": 2497,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(db->dict, thiskey)",
          "old_line_content": "                    /* Higher idle time is better candidate for deletion */",
          "new_line_content": "                        de = dictFind(db->dict, thiskey);",
          "content_same": false
        },
        {
          "line": 2498,
          "old_api": null,
          "new_api": "dictGetVal",
          "old_text": null,
          "new_text": "dictGetVal(de)",
          "old_line_content": "                    if (bestkey == NULL || thisval > bestval) {",
          "new_line_content": "                    o = dictGetVal(de);",
          "content_same": false
        },
        {
          "line": 2499,
          "old_api": null,
          "new_api": "estimateObjectIdleTime",
          "old_text": null,
          "new_text": "estimateObjectIdleTime(o)",
          "old_line_content": "                        bestkey = thiskey;",
          "new_line_content": "                    thisval = estimateObjectIdleTime(o);",
          "content_same": false
        },
        {
          "line": 2515,
          "old_api": null,
          "new_api": "dictGetRandomKey",
          "old_text": null,
          "new_text": "dictGetRandomKey(dict)",
          "old_line_content": "                    /* Expire sooner (minor expire unix timestamp) is better",
          "new_line_content": "                    de = dictGetRandomKey(dict);",
          "content_same": false
        },
        {
          "line": 2516,
          "old_api": null,
          "new_api": "dictGetKey",
          "old_text": null,
          "new_text": "dictGetKey(de)",
          "old_line_content": "                     * candidate for deletion */",
          "new_line_content": "                    thiskey = dictGetKey(de);",
          "content_same": false
        },
        {
          "line": 2517,
          "old_api": null,
          "new_api": "dictGetVal",
          "old_text": null,
          "new_text": "dictGetVal(de)",
          "old_line_content": "                    if (bestkey == NULL || thisval < bestval) {",
          "new_line_content": "                    thisval = (long) dictGetVal(de);",
          "content_same": false
        },
        {
          "line": 2532,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(bestkey)",
          "old_line_content": "                 * the DEL in AOF and replication link is greater than the one",
          "new_line_content": "                robj *keyobj = createStringObject(bestkey,sdslen(bestkey));",
          "content_same": false
        },
        {
          "line": 2533,
          "old_api": null,
          "new_api": "propagateExpire",
          "old_text": null,
          "new_text": "propagateExpire(db,keyobj)",
          "old_line_content": "                 * we are freeing removing the key, but we can't account for",
          "new_line_content": "                propagateExpire(db,keyobj);",
          "content_same": false
        },
        {
          "line": 2542,
          "old_api": null,
          "new_api": "zmalloc_used_memory",
          "old_text": null,
          "new_text": "zmalloc_used_memory()",
          "old_line_content": "                server.stat_evictedkeys++;",
          "new_line_content": "                delta = (long long) zmalloc_used_memory();",
          "content_same": false
        },
        {
          "line": 2544,
          "old_api": null,
          "new_api": "zmalloc_used_memory",
          "old_text": null,
          "new_text": "zmalloc_used_memory()",
          "old_line_content": "                    keyobj, db->id);",
          "new_line_content": "                delta -= (long long) zmalloc_used_memory();",
          "content_same": false
        },
        {
          "line": 2547,
          "old_api": null,
          "new_api": "notifyKeyspaceEvent",
          "old_text": null,
          "new_text": "notifyKeyspaceEvent(REDIS_NOTIFY_EVICTED, \"evicted\",\n                    keyobj, db->id)",
          "old_line_content": "",
          "new_line_content": "                notifyKeyspaceEvent(REDIS_NOTIFY_EVICTED, \"evicted\",",
          "content_same": false
        },
        {
          "line": 2549,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(keyobj)",
          "old_line_content": "                 * start spending so much time here that is impossible to",
          "new_line_content": "                decrRefCount(keyobj);",
          "content_same": false
        },
        {
          "line": 2556,
          "old_api": null,
          "new_api": "flushSlavesOutputBuffers",
          "old_text": null,
          "new_text": "flushSlavesOutputBuffers()",
          "old_line_content": "    }",
          "new_line_content": "                if (slaves) flushSlavesOutputBuffers();",
          "content_same": false
        },
        {
          "line": 2573,
          "old_api": null,
          "new_api": "fclose",
          "old_text": null,
          "new_text": "fclose(fp)",
          "old_line_content": "",
          "new_line_content": "        fclose(fp);",
          "content_same": false
        },
        {
          "line": 2576,
          "old_api": null,
          "new_api": "fclose",
          "old_text": null,
          "new_text": "fclose(fp)",
          "old_line_content": "",
          "new_line_content": "    fclose(fp);",
          "content_same": false
        },
        {
          "line": 2582,
          "old_api": null,
          "new_api": "linuxOvercommitMemoryValue",
          "old_text": null,
          "new_text": "linuxOvercommitMemoryValue()",
          "old_line_content": "#endif /* __linux__ */",
          "new_line_content": "    if (linuxOvercommitMemoryValue() == 0) {",
          "content_same": false
        },
        {
          "line": 2583,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.\")",
          "old_line_content": "",
          "new_line_content": "        redisLog(REDIS_WARNING,\"WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.\");",
          "content_same": false
        },
        {
          "line": 2590,
          "old_api": null,
          "new_api": "fopen",
          "old_text": null,
          "new_text": "fopen(server.pidfile,\"w\")",
          "old_line_content": "    }",
          "new_line_content": "    FILE *fp = fopen(server.pidfile,\"w\");",
          "content_same": false
        },
        {
          "line": 2592,
          "old_api": null,
          "new_api": "getpid",
          "old_text": null,
          "new_text": "getpid()",
          "old_line_content": "",
          "new_line_content": "        fprintf(fp,\"%d\\n\",(int)getpid());",
          "content_same": false
        },
        {
          "line": 2593,
          "old_api": null,
          "new_api": "fclose",
          "old_text": null,
          "new_text": "fclose(fp)",
          "old_line_content": "void daemonize(void) {",
          "new_line_content": "        fclose(fp);",
          "content_same": false
        },
        {
          "line": 2600,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(0)",
          "old_line_content": "     * the 'logfile' is set to 'stdout' in the configuration file",
          "new_line_content": "    if (fork() != 0) exit(0); /* parent exits */",
          "content_same": false
        },
        {
          "line": 2601,
          "old_api": null,
          "new_api": "setsid",
          "old_text": null,
          "new_text": "setsid()",
          "old_line_content": "     * it will not log at all. */",
          "new_line_content": "    setsid(); /* create a new session */",
          "content_same": false
        },
        {
          "line": 2607,
          "old_api": null,
          "new_api": "dup2",
          "old_text": null,
          "new_text": "dup2(fd, STDIN_FILENO)",
          "old_line_content": "    }",
          "new_line_content": "        dup2(fd, STDIN_FILENO);",
          "content_same": false
        },
        {
          "line": 2608,
          "old_api": null,
          "new_api": "dup2",
          "old_text": null,
          "new_text": "dup2(fd, STDOUT_FILENO)",
          "old_line_content": "}",
          "new_line_content": "        dup2(fd, STDOUT_FILENO);",
          "content_same": false
        },
        {
          "line": 2609,
          "old_api": null,
          "new_api": "dup2",
          "old_text": null,
          "new_text": "dup2(fd, STDERR_FILENO)",
          "old_line_content": "",
          "new_line_content": "        dup2(fd, STDERR_FILENO);",
          "content_same": false
        },
        {
          "line": 2610,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(fd)",
          "old_line_content": "void version() {",
          "new_line_content": "        if (fd > STDERR_FILENO) close(fd);",
          "content_same": false
        },
        {
          "line": 2615,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\"Redis server v=%s sha=%s:%d malloc=%s bits=%d build=%llx\\n\",\n        REDIS_VERSION,\n        redisGitSHA1(),\n        atoi(redisGitDirty()) > 0,\n        ZMALLOC_LIB,\n        sizeof(long) == 4 ? 32 : 64,\n        (unsigned long long) redisBuildId())",
          "old_line_content": "        ZMALLOC_LIB,",
          "new_line_content": "    printf(\"Redis server v=%s sha=%s:%d malloc=%s bits=%d build=%llx\\n\",",
          "content_same": false
        },
        {
          "line": 2621,
          "old_api": null,
          "new_api": "redisBuildId",
          "old_text": null,
          "new_text": "redisBuildId()",
          "old_line_content": "void usage() {",
          "new_line_content": "        (unsigned long long) redisBuildId());",
          "content_same": false
        },
        {
          "line": 2636,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr,\"       ./redis-server /etc/myredis.conf --loglevel verbose\\n\\n\")",
          "old_line_content": "}",
          "new_line_content": "    fprintf(stderr,\"       ./redis-server /etc/myredis.conf --loglevel verbose\\n\\n\");",
          "content_same": false
        },
        {
          "line": 2637,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr,\"Sentinel mode:\\n\")",
          "old_line_content": "",
          "new_line_content": "    fprintf(stderr,\"Sentinel mode:\\n\");",
          "content_same": false
        },
        {
          "line": 2638,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr,\"       ./redis-server /etc/sentinel.conf --sentinel\\n\")",
          "old_line_content": "void redisAsciiArt(void) {",
          "new_line_content": "    fprintf(stderr,\"       ./redis-server /etc/sentinel.conf --sentinel\\n\");",
          "content_same": false
        },
        {
          "line": 2639,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "#include \"asciilogo.h\"",
          "new_line_content": "    exit(1);",
          "content_same": false
        },
        {
          "line": 2644,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(1024*16)",
          "old_line_content": "    else if (server.sentinel_mode) mode = \"sentinel\";",
          "new_line_content": "    char *buf = zmalloc(1024*16);",
          "content_same": false
        },
        {
          "line": 2650,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(buf,1024*16,ascii_logo,\n        REDIS_VERSION,\n        redisGitSHA1(),\n        strtol(redisGitDirty(),NULL,10) > 0,\n        (sizeof(long) == 8) ? \"64\" : \"32\",\n        mode, server.port,\n        (long) getpid()\n    )",
          "old_line_content": "        (sizeof(long) == 8) ? \"64\" : \"32\",",
          "new_line_content": "    snprintf(buf,1024*16,ascii_logo,",
          "content_same": false
        },
        {
          "line": 2653,
          "old_api": null,
          "new_api": "redisGitDirty",
          "old_text": null,
          "new_text": "redisGitDirty()",
          "old_line_content": "    );",
          "new_line_content": "        strtol(redisGitDirty(),NULL,10) > 0,",
          "content_same": false
        },
        {
          "line": 2656,
          "old_api": null,
          "new_api": "getpid",
          "old_text": null,
          "new_text": "getpid()",
          "old_line_content": "}",
          "new_line_content": "        (long) getpid()",
          "content_same": false
        },
        {
          "line": 2658,
          "old_api": null,
          "new_api": "redisLogRaw",
          "old_text": null,
          "new_text": "redisLogRaw(REDIS_NOTICE|REDIS_LOG_RAW,buf)",
          "old_line_content": "static void sigtermHandler(int sig) {",
          "new_line_content": "    redisLogRaw(REDIS_NOTICE|REDIS_LOG_RAW,buf);",
          "content_same": false
        },
        {
          "line": 2663,
          "old_api": null,
          "new_api": "REDIS_NOTUSED",
          "old_text": null,
          "new_text": "REDIS_NOTUSED(sig)",
          "old_line_content": "}",
          "new_line_content": "    REDIS_NOTUSED(sig);",
          "content_same": false
        },
        {
          "line": 2665,
          "old_api": null,
          "new_api": "redisLogFromHandler",
          "old_text": null,
          "new_text": "redisLogFromHandler(REDIS_WARNING,\"Received SIGTERM, scheduling shutdown...\")",
          "old_line_content": "void setupSignalHandlers(void) {",
          "new_line_content": "    redisLogFromHandler(REDIS_WARNING,\"Received SIGTERM, scheduling shutdown...\");",
          "content_same": false
        },
        {
          "line": 2674,
          "old_api": null,
          "new_api": "sigemptyset",
          "old_text": null,
          "new_text": "sigemptyset(&act.sa_mask)",
          "old_line_content": "",
          "new_line_content": "    sigemptyset(&act.sa_mask);",
          "content_same": false
        },
        {
          "line": 2677,
          "old_api": null,
          "new_api": "sigaction",
          "old_text": null,
          "new_text": "sigaction(SIGTERM, &act, NULL)",
          "old_line_content": "    act.sa_flags = SA_NODEFER | SA_RESETHAND | SA_SIGINFO;",
          "new_line_content": "    sigaction(SIGTERM, &act, NULL);",
          "content_same": false
        },
        {
          "line": 2683,
          "old_api": null,
          "new_api": "sigaction",
          "old_text": null,
          "new_text": "sigaction(SIGSEGV, &act, NULL)",
          "old_line_content": "#endif",
          "new_line_content": "    sigaction(SIGSEGV, &act, NULL);",
          "content_same": false
        },
        {
          "line": 2684,
          "old_api": null,
          "new_api": "sigaction",
          "old_text": null,
          "new_text": "sigaction(SIGBUS, &act, NULL)",
          "old_line_content": "    return;",
          "new_line_content": "    sigaction(SIGBUS, &act, NULL);",
          "content_same": false
        },
        {
          "line": 2685,
          "old_api": null,
          "new_api": "sigaction",
          "old_text": null,
          "new_text": "sigaction(SIGFPE, &act, NULL)",
          "old_line_content": "}",
          "new_line_content": "    sigaction(SIGFPE, &act, NULL);",
          "content_same": false
        },
        {
          "line": 2686,
          "old_api": null,
          "new_api": "sigaction",
          "old_text": null,
          "new_text": "sigaction(SIGILL, &act, NULL)",
          "old_line_content": "",
          "new_line_content": "    sigaction(SIGILL, &act, NULL);",
          "content_same": false
        },
        {
          "line": 2698,
          "old_api": null,
          "new_api": "strstr",
          "old_text": null,
          "new_text": "strstr(argv[0],\"redis-sentinel\")",
          "old_line_content": "}",
          "new_line_content": "    if (strstr(argv[0],\"redis-sentinel\") != NULL) return 1;",
          "content_same": false
        },
        {
          "line": 2700,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(argv[j],\"--sentinel\")",
          "old_line_content": "/* Function called at startup to load RDB or AOF file in memory. */",
          "new_line_content": "        if (!strcmp(argv[j],\"--sentinel\")) return 1;",
          "content_same": false
        },
        {
          "line": 2706,
          "old_api": null,
          "new_api": "ustime",
          "old_text": null,
          "new_text": "ustime()",
          "old_line_content": "    } else {",
          "new_line_content": "    long long start = ustime();",
          "content_same": false
        },
        {
          "line": 2713,
          "old_api": null,
          "new_api": "ustime",
          "old_text": null,
          "new_text": "ustime()",
          "old_line_content": "        }",
          "new_line_content": "                (float)(ustime()-start)/1000000);",
          "content_same": false
        },
        {
          "line": 2715,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"Fatal error loading the DB. Exiting.\")",
          "old_line_content": "}",
          "new_line_content": "            redisLog(REDIS_WARNING,\"Fatal error loading the DB. Exiting.\");",
          "content_same": false
        },
        {
          "line": 2716,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "",
          "new_line_content": "            exit(1);",
          "content_same": false
        },
        {
          "line": 2722,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"Out Of Memory allocating %zu bytes!\",\n        allocation_size)",
          "old_line_content": "",
          "new_line_content": "    redisLog(REDIS_WARNING,\"Out Of Memory allocating %zu bytes!\",",
          "content_same": false
        },
        {
          "line": 2724,
          "old_api": null,
          "new_api": "redisPanic",
          "old_text": null,
          "new_text": "redisPanic(\"OOM\")",
          "old_line_content": "#ifdef USE_SETPROCTITLE",
          "new_line_content": "    redisPanic(\"OOM\");",
          "content_same": false
        },
        {
          "line": 678,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(db->expires)",
          "old_line_content": "            /* When there are less than 1% filled slots getting random",
          "new_line_content": "            if ((num = dictSize(db->expires)) == 0) break;",
          "content_same": false
        },
        {
          "line": 679,
          "old_api": null,
          "new_api": "dictSlots",
          "old_text": null,
          "new_text": "dictSlots(db->expires)",
          "old_line_content": "             * keys is expensive, so stop here waiting for better times...",
          "new_line_content": "            slots = dictSlots(db->expires);",
          "content_same": false
        },
        {
          "line": 680,
          "old_api": null,
          "new_api": "mstime",
          "old_text": null,
          "new_text": "mstime()",
          "old_line_content": "             * The dictionary will be resized asap. */",
          "new_line_content": "            now = mstime();",
          "content_same": false
        },
        {
          "line": 2729,
          "old_api": null,
          "new_api": "setproctitle",
          "old_text": null,
          "new_text": "setproctitle(\"%s %s:%d\",\n        title,\n        server.bindaddr ? server.bindaddr : \"*\",\n        server.port)",
          "old_line_content": "#else",
          "new_line_content": "    setproctitle(\"%s %s:%d\",",
          "content_same": false
        },
        {
          "line": 2734,
          "old_api": null,
          "new_api": "REDIS_NOTUSED",
          "old_text": null,
          "new_text": "REDIS_NOTUSED(title)",
          "old_line_content": "int main(int argc, char **argv) {",
          "new_line_content": "    REDIS_NOTUSED(title);",
          "content_same": false
        },
        {
          "line": 698,
          "old_api": null,
          "new_api": "dictGetSignedIntegerVal",
          "old_text": null,
          "new_text": "dictGetSignedIntegerVal(de)",
          "old_line_content": "",
          "new_line_content": "                t = dictGetSignedIntegerVal(de);",
          "content_same": false
        },
        {
          "line": 2748,
          "old_api": null,
          "new_api": "gettimeofday",
          "old_text": null,
          "new_text": "gettimeofday(&tv,NULL)",
          "old_line_content": "",
          "new_line_content": "    gettimeofday(&tv,NULL);",
          "content_same": false
        },
        {
          "line": 2749,
          "old_api": null,
          "new_api": "getpid",
          "old_text": null,
          "new_text": "getpid()",
          "old_line_content": "    /* We need to init sentinel right now as parsing the configuration file",
          "new_line_content": "    dictSetHashFunctionSeed(tv.tv_sec^tv.tv_usec^getpid());",
          "content_same": false
        },
        {
          "line": 2750,
          "old_api": null,
          "new_api": "checkForSentinelMode",
          "old_text": null,
          "new_text": "checkForSentinelMode(argc,argv)",
          "old_line_content": "     * in sentinel mode will have the effect of populating the sentinel",
          "new_line_content": "    server.sentinel_mode = checkForSentinelMode(argc,argv);",
          "content_same": false
        },
        {
          "line": 2751,
          "old_api": null,
          "new_api": "initServerConfig",
          "old_text": null,
          "new_text": "initServerConfig()",
          "old_line_content": "     * data structures with master nodes to monitor. */",
          "new_line_content": "    initServerConfig();",
          "content_same": false
        },
        {
          "line": 704,
          "old_api": null,
          "new_api": "dbDelete",
          "old_text": null,
          "new_text": "dbDelete(db,keyobj)",
          "old_line_content": "                    expired++;",
          "new_line_content": "                    dbDelete(db,keyobj);",
          "content_same": false
        },
        {
          "line": 705,
          "old_api": null,
          "new_api": "notifyKeyspaceEvent",
          "old_text": null,
          "new_text": "notifyKeyspaceEvent(REDIS_NOTIFY_EXPIRED,\n                        \"expired\",keyobj,db->id)",
          "old_line_content": "                    server.stat_expiredkeys++;",
          "new_line_content": "                    notifyKeyspaceEvent(REDIS_NOTIFY_EXPIRED,",
          "content_same": false
        },
        {
          "line": 707,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(keyobj)",
          "old_line_content": "            }",
          "new_line_content": "                    decrRefCount(keyobj);",
          "content_same": false
        },
        {
          "line": 2757,
          "old_api": null,
          "new_api": "initSentinelConfig",
          "old_text": null,
          "new_text": "initSentinelConfig()",
          "old_line_content": "    if (argc >= 2) {",
          "new_line_content": "        initSentinelConfig();",
          "content_same": false
        },
        {
          "line": 2758,
          "old_api": null,
          "new_api": "initSentinel",
          "old_text": null,
          "new_text": "initSentinel()",
          "old_line_content": "        int j = 1; /* First option to parse in argv[] */",
          "new_line_content": "        initSentinel();",
          "content_same": false
        },
        {
          "line": 717,
          "old_api": null,
          "new_api": "ustime",
          "old_text": null,
          "new_text": "ustime()",
          "old_line_content": "",
          "new_line_content": "                (ustime()-start) > timelimit) return;",
          "content_same": false
        },
        {
          "line": 2768,
          "old_api": null,
          "new_api": "version",
          "old_text": null,
          "new_text": "version()",
          "old_line_content": "            if (argc == 3) {",
          "new_line_content": "            strcmp(argv[1], \"--version\") == 0) version();",
          "content_same": false
        },
        {
          "line": 2771,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(argv[1], \"--test-memory\")",
          "old_line_content": "            } else {",
          "new_line_content": "        if (strcmp(argv[1], \"--test-memory\") == 0) {",
          "content_same": false
        },
        {
          "line": 2776,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr,\"Please specify the amount of memory to test in megabytes.\\n\")",
          "old_line_content": "        }",
          "new_line_content": "                fprintf(stderr,\"Please specify the amount of memory to test in megabytes.\\n\");",
          "content_same": false
        },
        {
          "line": 2777,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr,\"Example: ./redis-server --test-memory 4096\\n\\n\")",
          "old_line_content": "",
          "new_line_content": "                fprintf(stderr,\"Example: ./redis-server --test-memory 4096\\n\\n\");",
          "content_same": false
        },
        {
          "line": 730,
          "old_api": null,
          "new_api": "mstime",
          "old_text": null,
          "new_text": "mstime()",
          "old_line_content": "    ops_sec = t > 0 ? (ops*1000/t) : 0;",
          "new_line_content": "    long long t = mstime() - server.ops_sec_last_sample_time;",
          "content_same": false
        },
        {
          "line": 2778,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "        /* First argument is the config file name? */",
          "new_line_content": "                exit(1);",
          "content_same": false
        },
        {
          "line": 738,
          "old_api": null,
          "new_api": "mstime",
          "old_text": null,
          "new_text": "mstime()",
          "old_line_content": "/* Return the mean of all the samples. */",
          "new_line_content": "    server.ops_sec_last_sample_time = mstime();",
          "content_same": false
        },
        {
          "line": 2792,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(options,\"\\n\")",
          "old_line_content": "                /* Option argument */",
          "new_line_content": "                if (sdslen(options)) options = sdscat(options,\"\\n\");",
          "content_same": false
        },
        {
          "line": 2797,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(argv[j])",
          "old_line_content": "        }",
          "new_line_content": "                options = sdscatrepr(options,argv[j],strlen(argv[j]));",
          "content_same": false
        },
        {
          "line": 2803,
          "old_api": null,
          "new_api": "loadServerConfig",
          "old_text": null,
          "new_text": "loadServerConfig(configfile,options)",
          "old_line_content": "    }",
          "new_line_content": "        loadServerConfig(configfile,options);",
          "content_same": false
        },
        {
          "line": 2809,
          "old_api": null,
          "new_api": "initServer",
          "old_text": null,
          "new_text": "initServer()",
          "old_line_content": "",
          "new_line_content": "    initServer();",
          "content_same": false
        },
        {
          "line": 2810,
          "old_api": null,
          "new_api": "createPidFile",
          "old_text": null,
          "new_text": "createPidFile()",
          "old_line_content": "    if (!server.sentinel_mode) {",
          "new_line_content": "    if (server.daemonize) createPidFile();",
          "content_same": false
        },
        {
          "line": 2811,
          "old_api": null,
          "new_api": "redisSetProcTitle",
          "old_text": null,
          "new_text": "redisSetProcTitle(argv[0])",
          "old_line_content": "        /* Things not needed when running in Sentinel mode. */",
          "new_line_content": "    redisSetProcTitle(argv[0]);",
          "content_same": false
        },
        {
          "line": 764,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_VERBOSE,\"Closing idle client\")",
          "old_line_content": "        if (c->bpop.timeout != 0 && c->bpop.timeout < now) {",
          "new_line_content": "        redisLog(REDIS_VERBOSE,\"Closing idle client\");",
          "content_same": false
        },
        {
          "line": 769,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.nullmultibulk)",
          "old_line_content": "    return 0;",
          "new_line_content": "            addReply(c,shared.nullmultibulk);",
          "content_same": false
        },
        {
          "line": 770,
          "old_api": null,
          "new_api": "unblockClientWaitingData",
          "old_text": null,
          "new_text": "unblockClientWaitingData(c)",
          "old_line_content": "}",
          "new_line_content": "            unblockClientWaitingData(c);",
          "content_same": false
        },
        {
          "line": 2820,
          "old_api": null,
          "new_api": "loadDataFromDisk",
          "old_text": null,
          "new_text": "loadDataFromDisk()",
          "old_line_content": "                    \"You can't have keys in a DB different than DB 0 when in \"",
          "new_line_content": "        loadDataFromDisk();",
          "content_same": false
        },
        {
          "line": 2823,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\n                    \"You can't have keys in a DB different than DB 0 when in \"\n                    \"Cluster mode. Exiting.\")",
          "old_line_content": "            }",
          "new_line_content": "                redisLog(REDIS_WARNING,",
          "content_same": false
        },
        {
          "line": 781,
          "old_api": null,
          "new_api": "sdsAllocSize",
          "old_text": null,
          "new_text": "sdsAllocSize(c->querybuf)",
          "old_line_content": "     * 1) Query buffer is > BIG_ARG and too big for latest peak.",
          "new_line_content": "    size_t querybuf_size = sdsAllocSize(c->querybuf);",
          "content_same": false
        },
        {
          "line": 2830,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_NOTICE,\"The server is now ready to accept connections on port %d\", server.port)",
          "old_line_content": "",
          "new_line_content": "            redisLog(REDIS_NOTICE,\"The server is now ready to accept connections on port %d\", server.port);",
          "content_same": false
        },
        {
          "line": 2832,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_NOTICE,\"The server is now ready to accept connections at %s\", server.unixsocket)",
          "old_line_content": "    if (server.maxmemory > 0 && server.maxmemory < 1024*1024) {",
          "new_line_content": "            redisLog(REDIS_NOTICE,\"The server is now ready to accept connections at %s\", server.unixsocket);",
          "content_same": false
        },
        {
          "line": 792,
          "old_api": null,
          "new_api": "sdsavail",
          "old_text": null,
          "new_text": "sdsavail(c->querybuf)",
          "old_line_content": "    /* Reset the peak again to capture the peak memory usage in the next",
          "new_line_content": "        if (sdsavail(c->querybuf) > 1024) {",
          "content_same": false
        },
        {
          "line": 793,
          "old_api": null,
          "new_api": "sdsRemoveFreeSpace",
          "old_text": null,
          "new_text": "sdsRemoveFreeSpace(c->querybuf)",
          "old_line_content": "     * cycle. */",
          "new_line_content": "            c->querybuf = sdsRemoveFreeSpace(c->querybuf);",
          "content_same": false
        },
        {
          "line": 2840,
          "old_api": null,
          "new_api": "aeSetBeforeSleepProc",
          "old_text": null,
          "new_text": "aeSetBeforeSleepProc(server.el,beforeSleep)",
          "old_line_content": "}",
          "new_line_content": "    aeSetBeforeSleepProc(server.el,beforeSleep);",
          "content_same": false
        },
        {
          "line": 2841,
          "old_api": null,
          "new_api": "aeMain",
          "old_text": null,
          "new_text": "aeMain(server.el)",
          "old_line_content": "",
          "new_line_content": "    aeMain(server.el);",
          "content_same": false
        },
        {
          "line": 2842,
          "old_api": null,
          "new_api": "aeDeleteEventLoop",
          "old_text": null,
          "new_text": "aeDeleteEventLoop(server.el)",
          "old_line_content": "/* The End */",
          "new_line_content": "    aeDeleteEventLoop(server.el);",
          "content_same": false
        },
        {
          "line": 808,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.clients)",
          "old_line_content": "        iterations = (numclients < 50) ? numclients : 50;",
          "new_line_content": "    int numclients = listLength(server.clients);",
          "content_same": false
        },
        {
          "line": 813,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.clients)",
          "old_line_content": "        /* Rotate the list, take the current head, process.",
          "new_line_content": "    while(listLength(server.clients) && iterations--) {",
          "content_same": false
        },
        {
          "line": 820,
          "old_api": null,
          "new_api": "listRotate",
          "old_text": null,
          "new_text": "listRotate(server.clients)",
          "old_line_content": "         * The protocol is that they return non-zero if the client was",
          "new_line_content": "        listRotate(server.clients);",
          "content_same": false
        },
        {
          "line": 821,
          "old_api": null,
          "new_api": "listFirst",
          "old_text": null,
          "new_text": "listFirst(server.clients)",
          "old_line_content": "         * terminated. */",
          "new_line_content": "        head = listFirst(server.clients);",
          "content_same": false
        },
        {
          "line": 826,
          "old_api": null,
          "new_api": "clientsCronHandleTimeout",
          "old_text": null,
          "new_text": "clientsCronHandleTimeout(c)",
          "old_line_content": "",
          "new_line_content": "        if (clientsCronHandleTimeout(c)) continue;",
          "content_same": false
        },
        {
          "line": 827,
          "old_api": null,
          "new_api": "clientsCronResizeQueryBuffer",
          "old_text": null,
          "new_text": "clientsCronResizeQueryBuffer(c)",
          "old_line_content": "/* This function handles 'background' operations we are required to do",
          "new_line_content": "        if (clientsCronResizeQueryBuffer(c)) continue;",
          "content_same": false
        },
        {
          "line": 837,
          "old_api": null,
          "new_api": "activeExpireCycle",
          "old_text": null,
          "new_text": "activeExpireCycle()",
          "old_line_content": "     * as will cause a lot of copy-on-write of memory pages. */",
          "new_line_content": "    if (server.masterhost == NULL) activeExpireCycle();",
          "content_same": false
        },
        {
          "line": 852,
          "old_api": null,
          "new_api": "tryResizeHashTables",
          "old_text": null,
          "new_text": "tryResizeHashTables(resize_db % server.dbnum)",
          "old_line_content": "        /* Rehash */",
          "new_line_content": "            tryResizeHashTables(resize_db % server.dbnum);",
          "content_same": false
        },
        {
          "line": 859,
          "old_api": null,
          "new_api": "incrementallyRehash",
          "old_text": null,
          "new_text": "incrementallyRehash(rehash_db % server.dbnum)",
          "old_line_content": "                     * more at the next cron loop. */",
          "new_line_content": "                int work_done = incrementallyRehash(rehash_db % server.dbnum);",
          "content_same": false
        },
        {
          "line": 892,
          "old_api": null,
          "new_api": "REDIS_NOTUSED",
          "old_text": null,
          "new_text": "REDIS_NOTUSED(eventLoop)",
          "old_line_content": "    /* Software watchdog: deliver the SIGALRM that will reach the signal",
          "new_line_content": "    REDIS_NOTUSED(eventLoop);",
          "content_same": false
        },
        {
          "line": 893,
          "old_api": null,
          "new_api": "REDIS_NOTUSED",
          "old_text": null,
          "new_text": "REDIS_NOTUSED(id)",
          "old_line_content": "     * handler if we don't return here fast enough. */",
          "new_line_content": "    REDIS_NOTUSED(id);",
          "content_same": false
        },
        {
          "line": 898,
          "old_api": null,
          "new_api": "watchdogScheduleSignal",
          "old_text": null,
          "new_text": "watchdogScheduleSignal(server.watchdog_period)",
          "old_line_content": "     * in objects at every object access, and accuracy is not needed.",
          "new_line_content": "    if (server.watchdog_period) watchdogScheduleSignal(server.watchdog_period);",
          "content_same": false
        },
        {
          "line": 904,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "    /* We have just 22 bits per object for LRU information.",
          "new_line_content": "    server.unixtime = time(NULL);",
          "content_same": false
        },
        {
          "line": 906,
          "old_api": null,
          "new_api": "trackOperationsPerSecond",
          "old_text": null,
          "new_text": "trackOperationsPerSecond()",
          "old_line_content": "     * 2^22 bits with 10 seconds resolution is more or less 1.5 years.",
          "new_line_content": "    run_with_period(100) trackOperationsPerSecond();",
          "content_same": false
        },
        {
          "line": 923,
          "old_api": null,
          "new_api": "zmalloc_used_memory",
          "old_text": null,
          "new_text": "zmalloc_used_memory()",
          "old_line_content": "     * not ok doing so inside the signal handler. */",
          "new_line_content": "    if (zmalloc_used_memory() > server.stat_peak_memory)",
          "content_same": false
        },
        {
          "line": 924,
          "old_api": null,
          "new_api": "zmalloc_used_memory",
          "old_text": null,
          "new_text": "zmalloc_used_memory()",
          "old_line_content": "    if (server.shutdown_asap) {",
          "new_line_content": "        server.stat_peak_memory = zmalloc_used_memory();",
          "content_same": false
        },
        {
          "line": 929,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(0)",
          "old_line_content": "",
          "new_line_content": "        if (prepareForShutdown(0) == REDIS_OK) exit(0);",
          "content_same": false
        },
        {
          "line": 930,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"SIGTERM received but errors trying to shut down the server, check the logs for more information\")",
          "old_line_content": "    /* Show some info about non-empty databases */",
          "new_line_content": "        redisLog(REDIS_WARNING,\"SIGTERM received but errors trying to shut down the server, check the logs for more information\");",
          "content_same": false
        },
        {
          "line": 940,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(server.db[j].dict)",
          "old_line_content": "                /* dictPrintStats(server.dict); */",
          "new_line_content": "            used = dictSize(server.db[j].dict);",
          "content_same": false
        },
        {
          "line": 941,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(server.db[j].expires)",
          "old_line_content": "            }",
          "new_line_content": "            vkeys = dictSize(server.db[j].expires);",
          "content_same": false
        },
        {
          "line": 943,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_VERBOSE,\"DB %d: %lld keys (%lld volatile) in %lld slots HT.\",j,used,vkeys,size)",
          "old_line_content": "    }",
          "new_line_content": "                redisLog(REDIS_VERBOSE,\"DB %d: %lld keys (%lld volatile) in %lld slots HT.\",j,used,vkeys,size);",
          "content_same": false
        },
        {
          "line": 954,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.slaves)",
          "old_line_content": "    }",
          "new_line_content": "                listLength(server.clients)-listLength(server.slaves),",
          "content_same": false
        },
        {
          "line": 955,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.slaves)",
          "old_line_content": "",
          "new_line_content": "                listLength(server.slaves),",
          "content_same": false
        },
        {
          "line": 956,
          "old_api": null,
          "new_api": "zmalloc_used_memory",
          "old_text": null,
          "new_text": "zmalloc_used_memory()",
          "old_line_content": "    /* We need to do a few operations on clients asynchronously. */",
          "new_line_content": "                zmalloc_used_memory());",
          "content_same": false
        },
        {
          "line": 961,
          "old_api": null,
          "new_api": "clientsCron",
          "old_text": null,
          "new_text": "clientsCron()",
          "old_line_content": "",
          "new_line_content": "    clientsCron();",
          "content_same": false
        },
        {
          "line": 964,
          "old_api": null,
          "new_api": "databasesCron",
          "old_text": null,
          "new_text": "databasesCron()",
          "old_line_content": "    if (server.rdb_child_pid == -1 && server.aof_child_pid == -1 &&",
          "new_line_content": "    databasesCron();",
          "content_same": false
        },
        {
          "line": 971,
          "old_api": null,
          "new_api": "rewriteAppendOnlyFileBackground",
          "old_text": null,
          "new_text": "rewriteAppendOnlyFileBackground()",
          "old_line_content": "    if (server.rdb_child_pid != -1 || server.aof_child_pid != -1) {",
          "new_line_content": "        rewriteAppendOnlyFileBackground();",
          "content_same": false
        },
        {
          "line": 980,
          "old_api": null,
          "new_api": "WEXITSTATUS",
          "old_text": null,
          "new_text": "WEXITSTATUS(statloc)",
          "old_line_content": "",
          "new_line_content": "            int exitcode = WEXITSTATUS(statloc);",
          "content_same": false
        },
        {
          "line": 983,
          "old_api": null,
          "new_api": "WTERMSIG",
          "old_text": null,
          "new_text": "WTERMSIG(statloc)",
          "old_line_content": "            } else if (pid == server.aof_child_pid) {",
          "new_line_content": "            if (WIFSIGNALED(statloc)) bysignal = WTERMSIG(statloc);",
          "content_same": false
        },
        {
          "line": 988,
          "old_api": null,
          "new_api": "backgroundRewriteDoneHandler",
          "old_text": null,
          "new_text": "backgroundRewriteDoneHandler(exitcode,bysignal)",
          "old_line_content": "                    (long)pid);",
          "new_line_content": "                backgroundRewriteDoneHandler(exitcode,bysignal);",
          "content_same": false
        },
        {
          "line": 994,
          "old_api": null,
          "new_api": "updateDictResizePolicy",
          "old_text": null,
          "new_text": "updateDictResizePolicy()",
          "old_line_content": "         * we have to save/rewrite now */",
          "new_line_content": "            updateDictResizePolicy();",
          "content_same": false
        },
        {
          "line": 1004,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_NOTICE,\"%d changes in %d seconds. Saving...\",\n                    sp->changes, (int)sp->seconds)",
          "old_line_content": "            }",
          "new_line_content": "                redisLog(REDIS_NOTICE,\"%d changes in %d seconds. Saving...\",",
          "content_same": false
        },
        {
          "line": 1006,
          "old_api": null,
          "new_api": "rdbSaveBackground",
          "old_text": null,
          "new_text": "rdbSaveBackground(server.rdb_filename)",
          "old_line_content": "",
          "new_line_content": "                rdbSaveBackground(server.rdb_filename);",
          "content_same": false
        },
        {
          "line": 1021,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_NOTICE,\"Starting automatic rewriting of AOF on %lld%% growth\",growth)",
          "old_line_content": "    }",
          "new_line_content": "                redisLog(REDIS_NOTICE,\"Starting automatic rewriting of AOF on %lld%% growth\",growth);",
          "content_same": false
        },
        {
          "line": 1022,
          "old_api": null,
          "new_api": "rewriteAppendOnlyFileBackground",
          "old_text": null,
          "new_text": "rewriteAppendOnlyFileBackground()",
          "old_line_content": "",
          "new_line_content": "                rewriteAppendOnlyFileBackground();",
          "content_same": false
        },
        {
          "line": 1030,
          "old_api": null,
          "new_api": "flushAppendOnlyFile",
          "old_text": null,
          "new_text": "flushAppendOnlyFile(0)",
          "old_line_content": "",
          "new_line_content": "    if (server.aof_flush_postponed_start) flushAppendOnlyFile(0);",
          "content_same": false
        },
        {
          "line": 1040,
          "old_api": null,
          "new_api": "run_with_period",
          "old_text": null,
          "new_text": "run_with_period(1000)",
          "old_line_content": "    /* Run the Sentinel timer if we are in sentinel mode. */",
          "new_line_content": "    run_with_period(1000) {",
          "content_same": false
        },
        {
          "line": 1045,
          "old_api": null,
          "new_api": "run_with_period",
          "old_text": null,
          "new_text": "run_with_period(100)",
          "old_line_content": "    /* Cleanup expired MIGRATE cached sockets. */",
          "new_line_content": "    run_with_period(100) {",
          "content_same": false
        },
        {
          "line": 1050,
          "old_api": null,
          "new_api": "run_with_period",
          "old_text": null,
          "new_text": "run_with_period(1000)",
          "old_line_content": "    server.cronloops++;",
          "new_line_content": "    run_with_period(1000) {",
          "content_same": false
        },
        {
          "line": 1051,
          "old_api": null,
          "new_api": "migrateCloseTimedoutSockets",
          "old_text": null,
          "new_text": "migrateCloseTimedoutSockets()",
          "old_line_content": "    return 1000/server.hz;",
          "new_line_content": "        migrateCloseTimedoutSockets();",
          "content_same": false
        },
        {
          "line": 1062,
          "old_api": null,
          "new_api": "REDIS_NOTUSED",
          "old_text": null,
          "new_text": "REDIS_NOTUSED(eventLoop)",
          "old_line_content": "    /* Try to process pending commands for clients that were just unblocked. */",
          "new_line_content": "    REDIS_NOTUSED(eventLoop);",
          "content_same": false
        },
        {
          "line": 1068,
          "old_api": null,
          "new_api": "listFirst",
          "old_text": null,
          "new_text": "listFirst(server.unblocked_clients)",
          "old_line_content": "        c->flags &= ~REDIS_UNBLOCKED;",
          "new_line_content": "        ln = listFirst(server.unblocked_clients);",
          "content_same": false
        },
        {
          "line": 1069,
          "old_api": null,
          "new_api": "redisAssert",
          "old_text": null,
          "new_text": "redisAssert(ln != NULL)",
          "old_line_content": "",
          "new_line_content": "        redisAssert(ln != NULL);",
          "content_same": false
        },
        {
          "line": 1075,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(c->querybuf)",
          "old_line_content": "        }",
          "new_line_content": "        if (c->querybuf && sdslen(c->querybuf) > 0) {",
          "content_same": false
        },
        {
          "line": 1077,
          "old_api": null,
          "new_api": "processInputBuffer",
          "old_text": null,
          "new_text": "processInputBuffer(c)",
          "old_line_content": "",
          "new_line_content": "            processInputBuffer(c);",
          "content_same": false
        },
        {
          "line": 1083,
          "old_api": null,
          "new_api": "flushAppendOnlyFile",
          "old_text": null,
          "new_text": "flushAppendOnlyFile(0)",
          "old_line_content": "",
          "new_line_content": "    flushAppendOnlyFile(0);",
          "content_same": false
        },
        {
          "line": 1100,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\"*0\\r\\n\")",
          "old_line_content": "        \"-WRONGTYPE Operation against a key holding the wrong kind of value\\r\\n\"));",
          "new_line_content": "    shared.emptymultibulk = createObject(REDIS_STRING,sdsnew(\"*0\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 1102,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\"+QUEUED\\r\\n\")",
          "old_line_content": "        \"-ERR no such key\\r\\n\"));",
          "new_line_content": "    shared.queued = createObject(REDIS_STRING,sdsnew(\"+QUEUED\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 1131,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\" \")",
          "old_line_content": "    for (j = 0; j < REDIS_SHARED_SELECT_CMDS; j++) {",
          "new_line_content": "    shared.space = createObject(REDIS_STRING,sdsnew(\" \"));",
          "content_same": false
        },
        {
          "line": 1132,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\":\")",
          "old_line_content": "        char dictid_str[64];",
          "new_line_content": "    shared.colon = createObject(REDIS_STRING,sdsnew(\":\"));",
          "content_same": false
        },
        {
          "line": 1133,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(\"+\")",
          "old_line_content": "        int dictid_len;",
          "new_line_content": "    shared.plus = createObject(REDIS_STRING,sdsnew(\"+\"));",
          "content_same": false
        },
        {
          "line": 1139,
          "old_api": null,
          "new_api": "ll2string",
          "old_text": null,
          "new_text": "ll2string(dictid_str,sizeof(dictid_str),j)",
          "old_line_content": "                dictid_len, dictid_str));",
          "new_line_content": "        dictid_len = ll2string(dictid_str,sizeof(dictid_str),j);",
          "content_same": false
        },
        {
          "line": 1140,
          "old_api": null,
          "new_api": "createObject",
          "old_text": null,
          "new_text": "createObject(REDIS_STRING,\n            sdscatprintf(sdsempty(),\n                \"*2\\r\\n$6\\r\\nSELECT\\r\\n$%d\\r\\n%s\\r\\n\",\n                dictid_len, dictid_str))",
          "old_line_content": "    }",
          "new_line_content": "        shared.select[j] = createObject(REDIS_STRING,",
          "content_same": false
        },
        {
          "line": 1151,
          "old_api": null,
          "new_api": "createStringObject",
          "old_text": null,
          "new_text": "createStringObject(\"DEL\",3)",
          "old_line_content": "    for (j = 0; j < REDIS_SHARED_INTEGERS; j++) {",
          "new_line_content": "    shared.del = createStringObject(\"DEL\",3);",
          "content_same": false
        },
        {
          "line": 1153,
          "old_api": null,
          "new_api": "createStringObject",
          "old_text": null,
          "new_text": "createStringObject(\"LPOP\",4)",
          "old_line_content": "        shared.integers[j]->encoding = REDIS_ENCODING_INT;",
          "new_line_content": "    shared.lpop = createStringObject(\"LPOP\",4);",
          "content_same": false
        },
        {
          "line": 1154,
          "old_api": null,
          "new_api": "createStringObject",
          "old_text": null,
          "new_text": "createStringObject(\"LPUSH\",5)",
          "old_line_content": "    }",
          "new_line_content": "    shared.lpush = createStringObject(\"LPUSH\",5);",
          "content_same": false
        },
        {
          "line": 1160,
          "old_api": null,
          "new_api": "createObject",
          "old_text": null,
          "new_text": "createObject(REDIS_STRING,\n            sdscatprintf(sdsempty(),\"*%d\\r\\n\",j))",
          "old_line_content": "    }",
          "new_line_content": "        shared.mbulkhdr[j] = createObject(REDIS_STRING,",
          "content_same": false
        },
        {
          "line": 1161,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "}",
          "new_line_content": "            sdscatprintf(sdsempty(),\"*%d\\r\\n\",j));",
          "content_same": false
        },
        {
          "line": 1162,
          "old_api": null,
          "new_api": "createObject",
          "old_text": null,
          "new_text": "createObject(REDIS_STRING,\n            sdscatprintf(sdsempty(),\"$%d\\r\\n\",j))",
          "old_line_content": "",
          "new_line_content": "        shared.bulkhdr[j] = createObject(REDIS_STRING,",
          "content_same": false
        },
        {
          "line": 1163,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "void initServerConfig() {",
          "new_line_content": "            sdscatprintf(sdsempty(),\"$%d\\r\\n\",j));",
          "content_same": false
        },
        {
          "line": 1168,
          "old_api": null,
          "new_api": "getRandomHexChars",
          "old_text": null,
          "new_text": "getRandomHexChars(server.runid,REDIS_RUN_ID_SIZE)",
          "old_line_content": "    server.port = REDIS_SERVERPORT;",
          "new_line_content": "    getRandomHexChars(server.runid,REDIS_RUN_ID_SIZE);",
          "content_same": false
        },
        {
          "line": 1187,
          "old_api": null,
          "new_api": "zstrdup",
          "old_text": null,
          "new_text": "zstrdup(\"redis\")",
          "old_line_content": "    server.aof_fsync = AOF_FSYNC_EVERYSEC;",
          "new_line_content": "    server.syslog_ident = zstrdup(\"redis\");",
          "content_same": false
        },
        {
          "line": 1197,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "    server.aof_delayed_fsync = 0;",
          "new_line_content": "    server.aof_last_fsync = time(NULL);",
          "content_same": false
        },
        {
          "line": 1205,
          "old_api": null,
          "new_api": "zstrdup",
          "old_text": null,
          "new_text": "zstrdup(\"/var/run/redis.pid\")",
          "old_line_content": "    server.rdb_compression = 1;",
          "new_line_content": "    server.pidfile = zstrdup(\"/var/run/redis.pid\");",
          "content_same": false
        },
        {
          "line": 1206,
          "old_api": null,
          "new_api": "zstrdup",
          "old_text": null,
          "new_text": "zstrdup(\"dump.rdb\")",
          "old_line_content": "    server.rdb_checksum = 1;",
          "new_line_content": "    server.rdb_filename = zstrdup(\"dump.rdb\");",
          "content_same": false
        },
        {
          "line": 1207,
          "old_api": null,
          "new_api": "zstrdup",
          "old_text": null,
          "new_text": "zstrdup(\"appendonly.aof\")",
          "old_line_content": "    server.activerehashing = 1;",
          "new_line_content": "    server.aof_filename = zstrdup(\"appendonly.aof\");",
          "content_same": false
        },
        {
          "line": 1229,
          "old_api": null,
          "new_api": "zstrdup",
          "old_text": null,
          "new_text": "zstrdup(\"nodes.conf\")",
          "old_line_content": "    server.lua_timedout = 0;",
          "new_line_content": "    server.cluster_configfile = zstrdup(\"nodes.conf\");",
          "content_same": false
        },
        {
          "line": 1234,
          "old_api": null,
          "new_api": "dictCreate",
          "old_text": null,
          "new_text": "dictCreate(&migrateCacheDictType,NULL)",
          "old_line_content": "",
          "new_line_content": "    server.migrate_cached_sockets = dictCreate(&migrateCacheDictType,NULL);",
          "content_same": false
        },
        {
          "line": 1239,
          "old_api": null,
          "new_api": "appendServerSaveParams",
          "old_text": null,
          "new_text": "appendServerSaveParams(60*60,1)",
          "old_line_content": "    server.masterauth = NULL;",
          "new_line_content": "    appendServerSaveParams(60*60,1);  /* save after 1 hour and 1 change */",
          "content_same": false
        },
        {
          "line": 1240,
          "old_api": null,
          "new_api": "appendServerSaveParams",
          "old_text": null,
          "new_text": "appendServerSaveParams(300,100)",
          "old_line_content": "    server.masterhost = NULL;",
          "new_line_content": "    appendServerSaveParams(300,100);  /* save after 5 minutes and 100 changes */",
          "content_same": false
        },
        {
          "line": 1241,
          "old_api": null,
          "new_api": "appendServerSaveParams",
          "old_text": null,
          "new_text": "appendServerSaveParams(60,10000)",
          "old_line_content": "    server.masterport = 6379;",
          "new_line_content": "    appendServerSaveParams(60,10000); /* save after 1 minute and 10000 changes */",
          "content_same": false
        },
        {
          "line": 1253,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "",
          "new_line_content": "    server.repl_down_since = time(NULL);",
          "content_same": false
        },
        {
          "line": 1265,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "    server.client_obuf_limits[REDIS_CLIENT_LIMIT_CLASS_NORMAL].soft_limit_bytes = 0;",
          "new_line_content": "    server.repl_no_slaves_since = time(NULL);",
          "content_same": false
        },
        {
          "line": 1291,
          "old_api": null,
          "new_api": "lookupCommandByCString",
          "old_text": null,
          "new_text": "lookupCommandByCString(\"multi\")",
          "old_line_content": "    ",
          "new_line_content": "    server.multiCommand = lookupCommandByCString(\"multi\");",
          "content_same": false
        },
        {
          "line": 1292,
          "old_api": null,
          "new_api": "lookupCommandByCString",
          "old_text": null,
          "new_text": "lookupCommandByCString(\"lpush\")",
          "old_line_content": "    /* Slow log */",
          "new_line_content": "    server.lpushCommand = lookupCommandByCString(\"lpush\");",
          "content_same": false
        },
        {
          "line": 1293,
          "old_api": null,
          "new_api": "lookupCommandByCString",
          "old_text": null,
          "new_text": "lookupCommandByCString(\"lpop\")",
          "old_line_content": "    server.slowlog_log_slower_than = REDIS_SLOWLOG_LOG_SLOWER_THAN;",
          "new_line_content": "    server.lpopCommand = lookupCommandByCString(\"lpop\");",
          "content_same": false
        },
        {
          "line": 1294,
          "old_api": null,
          "new_api": "lookupCommandByCString",
          "old_text": null,
          "new_text": "lookupCommandByCString(\"rpop\")",
          "old_line_content": "    server.slowlog_max_len = REDIS_SLOWLOG_MAX_LEN;",
          "new_line_content": "    server.rpopCommand = lookupCommandByCString(\"rpop\");",
          "content_same": false
        },
        {
          "line": 1320,
          "old_api": null,
          "new_api": "getrlimit",
          "old_text": null,
          "new_text": "getrlimit(RLIMIT_NOFILE,&limit)",
          "old_line_content": "    } else {",
          "new_line_content": "    if (getrlimit(RLIMIT_NOFILE,&limit) == -1) {",
          "content_same": false
        },
        {
          "line": 1321,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"Unable to obtain the current NOFILE limit (%s), assuming 1024 and setting the max clients configuration accordingly.\",\n            strerror(errno))",
          "old_line_content": "        rlim_t oldlimit = limit.rlim_cur;",
          "new_line_content": "        redisLog(REDIS_WARNING,\"Unable to obtain the current NOFILE limit (%s), assuming 1024 and setting the max clients configuration accordingly.\",",
          "content_same": false
        },
        {
          "line": 1322,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "",
          "new_line_content": "            strerror(errno));",
          "content_same": false
        },
        {
          "line": 1336,
          "old_api": null,
          "new_api": "setrlimit",
          "old_text": null,
          "new_text": "setrlimit(RLIMIT_NOFILE,&limit)",
          "old_line_content": "            if (f != maxfiles) {",
          "new_line_content": "                if (setrlimit(RLIMIT_NOFILE,&limit) != -1) break;",
          "content_same": false
        },
        {
          "line": 1342,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"Unable to set the max number of files limit to %d (%s), setting the max clients configuration to %d.\",\n                    (int) maxfiles, strerror(errno), (int) server.maxclients)",
          "old_line_content": "                    (int) maxfiles);",
          "new_line_content": "                redisLog(REDIS_WARNING,\"Unable to set the max number of files limit to %d (%s), setting the max clients configuration to %d.\",",
          "content_same": false
        },
        {
          "line": 1343,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "            }",
          "new_line_content": "                    (int) maxfiles, strerror(errno), (int) server.maxclients);",
          "content_same": false
        },
        {
          "line": 1345,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_NOTICE,\"Max number of open files set to %d\",\n                    (int) maxfiles)",
          "old_line_content": "    }",
          "new_line_content": "                redisLog(REDIS_NOTICE,\"Max number of open files set to %d\",",
          "content_same": false
        },
        {
          "line": 1355,
          "old_api": null,
          "new_api": "signal",
          "old_text": null,
          "new_text": "signal(SIGHUP, SIG_IGN)",
          "old_line_content": "    if (server.syslog_enabled) {",
          "new_line_content": "    signal(SIGHUP, SIG_IGN);",
          "content_same": false
        },
        {
          "line": 1357,
          "old_api": null,
          "new_api": "setupSignalHandlers",
          "old_text": null,
          "new_text": "setupSignalHandlers()",
          "old_line_content": "            server.syslog_facility);",
          "new_line_content": "    setupSignalHandlers();",
          "content_same": false
        },
        {
          "line": 1360,
          "old_api": null,
          "new_api": "openlog",
          "old_text": null,
          "new_text": "openlog(server.syslog_ident, LOG_PID | LOG_NDELAY | LOG_NOWAIT,\n            server.syslog_facility)",
          "old_line_content": "    server.current_client = NULL;",
          "new_line_content": "        openlog(server.syslog_ident, LOG_PID | LOG_NDELAY | LOG_NOWAIT,",
          "content_same": false
        },
        {
          "line": 1365,
          "old_api": null,
          "new_api": "listCreate",
          "old_text": null,
          "new_text": "listCreate()",
          "old_line_content": "    server.slaveseldb = -1; /* Force to emit the first SELECT command. */",
          "new_line_content": "    server.clients = listCreate();",
          "content_same": false
        },
        {
          "line": 1368,
          "old_api": null,
          "new_api": "listCreate",
          "old_text": null,
          "new_text": "listCreate()",
          "old_line_content": "",
          "new_line_content": "    server.monitors = listCreate();",
          "content_same": false
        },
        {
          "line": 1373,
          "old_api": null,
          "new_api": "createSharedObjects",
          "old_text": null,
          "new_text": "createSharedObjects()",
          "old_line_content": "",
          "new_line_content": "    createSharedObjects();",
          "content_same": false
        },
        {
          "line": 1374,
          "old_api": null,
          "new_api": "adjustOpenFilesLimit",
          "old_text": null,
          "new_text": "adjustOpenFilesLimit()",
          "old_line_content": "    if (server.port != 0) {",
          "new_line_content": "    adjustOpenFilesLimit();",
          "content_same": false
        },
        {
          "line": 1376,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(redisDb)*server.dbnum)",
          "old_line_content": "        if (server.ipfd == ANET_ERR) {",
          "new_line_content": "    server.db = zmalloc(sizeof(redisDb)*server.dbnum);",
          "content_same": false
        },
        {
          "line": 1381,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING, \"Opening port %d: %s\",\n                server.port, server.neterr)",
          "old_line_content": "    }",
          "new_line_content": "            redisLog(REDIS_WARNING, \"Opening port %d: %s\",",
          "content_same": false
        },
        {
          "line": 1388,
          "old_api": null,
          "new_api": "anetUnixServer",
          "old_text": null,
          "new_text": "anetUnixServer(server.neterr,server.unixsocket,server.unixsocketperm)",
          "old_line_content": "        }",
          "new_line_content": "        server.sofd = anetUnixServer(server.neterr,server.unixsocket,server.unixsocketperm);",
          "content_same": false
        },
        {
          "line": 1390,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING, \"Opening socket: %s\", server.neterr)",
          "old_line_content": "    if (server.ipfd < 0 && server.sofd < 0) {",
          "new_line_content": "            redisLog(REDIS_WARNING, \"Opening socket: %s\", server.neterr);",
          "content_same": false
        },
        {
          "line": 1400,
          "old_api": null,
          "new_api": "dictCreate",
          "old_text": null,
          "new_text": "dictCreate(&keyptrDictType,NULL)",
          "old_line_content": "        server.db[j].id = j;",
          "new_line_content": "        server.db[j].expires = dictCreate(&keyptrDictType,NULL);",
          "content_same": false
        },
        {
          "line": 1401,
          "old_api": null,
          "new_api": "dictCreate",
          "old_text": null,
          "new_text": "dictCreate(&keylistDictType,NULL)",
          "old_line_content": "    }",
          "new_line_content": "        server.db[j].blocking_keys = dictCreate(&keylistDictType,NULL);",
          "content_same": false
        },
        {
          "line": 1406,
          "old_api": null,
          "new_api": "dictCreate",
          "old_text": null,
          "new_text": "dictCreate(&keylistDictType,NULL)",
          "old_line_content": "    server.cronloops = 0;",
          "new_line_content": "    server.pubsub_channels = dictCreate(&keylistDictType,NULL);",
          "content_same": false
        },
        {
          "line": 1407,
          "old_api": null,
          "new_api": "listCreate",
          "old_text": null,
          "new_text": "listCreate()",
          "old_line_content": "    server.rdb_child_pid = -1;",
          "new_line_content": "    server.pubsub_patterns = listCreate();",
          "content_same": false
        },
        {
          "line": 1408,
          "old_api": null,
          "new_api": "listSetFreeMethod",
          "old_text": null,
          "new_text": "listSetFreeMethod(server.pubsub_patterns,freePubsubPattern)",
          "old_line_content": "    server.aof_child_pid = -1;",
          "new_line_content": "    listSetFreeMethod(server.pubsub_patterns,freePubsubPattern);",
          "content_same": false
        },
        {
          "line": 1413,
          "old_api": null,
          "new_api": "aofRewriteBufferReset",
          "old_text": null,
          "new_text": "aofRewriteBufferReset()",
          "old_line_content": "    server.rdb_save_time_start = -1;",
          "new_line_content": "    aofRewriteBufferReset();",
          "content_same": false
        },
        {
          "line": 1414,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "    server.dirty = 0;",
          "new_line_content": "    server.aof_buf = sdsempty();",
          "content_same": false
        },
        {
          "line": 1415,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "    server.stat_numcommands = 0;",
          "new_line_content": "    server.lastsave = time(NULL);",
          "content_same": false
        },
        {
          "line": 1423,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "    server.stat_fork_time = 0;",
          "new_line_content": "    server.stat_starttime = time(NULL);",
          "content_same": false
        },
        {
          "line": 1434,
          "old_api": null,
          "new_api": "mstime",
          "old_text": null,
          "new_text": "mstime()",
          "old_line_content": "    server.stop_writes_on_bgsave_err = 1;",
          "new_line_content": "    server.ops_sec_last_sample_time = mstime();",
          "content_same": false
        },
        {
          "line": 1443,
          "old_api": null,
          "new_api": "aeCreateFileEvent",
          "old_text": null,
          "new_text": "aeCreateFileEvent(server.el,server.ipfd,AE_READABLE,\n        acceptTcpHandler,NULL)",
          "old_line_content": "",
          "new_line_content": "    if (server.ipfd > 0 && aeCreateFileEvent(server.el,server.ipfd,AE_READABLE,",
          "content_same": false
        },
        {
          "line": 1444,
          "old_api": null,
          "new_api": "redisPanic",
          "old_text": null,
          "new_text": "redisPanic(\"Unrecoverable error creating server.ipfd file event.\")",
          "old_line_content": "    if (server.aof_state == REDIS_AOF_ON) {",
          "new_line_content": "        acceptTcpHandler,NULL) == AE_ERR) redisPanic(\"Unrecoverable error creating server.ipfd file event.\");",
          "content_same": false
        },
        {
          "line": 1446,
          "old_api": null,
          "new_api": "redisPanic",
          "old_text": null,
          "new_text": "redisPanic(\"Unrecoverable error creating server.sofd file event.\")",
          "old_line_content": "                               O_WRONLY|O_APPEND|O_CREAT,0644);",
          "new_line_content": "        acceptUnixHandler,NULL) == AE_ERR) redisPanic(\"Unrecoverable error creating server.sofd file event.\");",
          "content_same": false
        },
        {
          "line": 1452,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING, \"Can't open the append-only file: %s\",\n                strerror(errno))",
          "old_line_content": "    }",
          "new_line_content": "            redisLog(REDIS_WARNING, \"Can't open the append-only file: %s\",",
          "content_same": false
        },
        {
          "line": 1453,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "",
          "new_line_content": "                strerror(errno));",
          "content_same": false
        },
        {
          "line": 1454,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "    /* 32 bit instances are limited to 4GB of address space, so if there is",
          "new_line_content": "            exit(1);",
          "content_same": false
        },
        {
          "line": 1463,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"Warning: 32 bit instance detected but no memory limit set. Setting 3 GB maxmemory limit with 'noeviction' policy now.\")",
          "old_line_content": "",
          "new_line_content": "        redisLog(REDIS_WARNING,\"Warning: 32 bit instance detected but no memory limit set. Setting 3 GB maxmemory limit with 'noeviction' policy now.\");",
          "content_same": false
        },
        {
          "line": 1468,
          "old_api": null,
          "new_api": "clusterInit",
          "old_text": null,
          "new_text": "clusterInit()",
          "old_line_content": "}",
          "new_line_content": "    if (server.cluster_enabled) clusterInit();",
          "content_same": false
        },
        {
          "line": 1469,
          "old_api": null,
          "new_api": "scriptingInit",
          "old_text": null,
          "new_text": "scriptingInit()",
          "old_line_content": "",
          "new_line_content": "    scriptingInit();",
          "content_same": false
        },
        {
          "line": 1470,
          "old_api": null,
          "new_api": "slowlogInit",
          "old_text": null,
          "new_text": "slowlogInit()",
          "old_line_content": "/* Populates the Redis Command Table starting from the hard coded list",
          "new_line_content": "    slowlogInit();",
          "content_same": false
        },
        {
          "line": 1471,
          "old_api": null,
          "new_api": "bioInit",
          "old_text": null,
          "new_text": "bioInit()",
          "old_line_content": " * we have on top of redis.c file. */",
          "new_line_content": "    bioInit();",
          "content_same": false
        },
        {
          "line": 1500,
          "old_api": null,
          "new_api": "redisPanic",
          "old_text": null,
          "new_text": "redisPanic(\"Unsupported command flag\")",
          "old_line_content": "",
          "new_line_content": "            default: redisPanic(\"Unsupported command flag\"); break;",
          "content_same": false
        },
        {
          "line": 1508,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(c->name)",
          "old_line_content": "",
          "new_line_content": "        retval2 = dictAdd(server.orig_commands, sdsnew(c->name), c);",
          "content_same": false
        },
        {
          "line": 1509,
          "old_api": null,
          "new_api": "redisAssert",
          "old_text": null,
          "new_text": "redisAssert(retval1 == DICT_OK && retval2 == DICT_OK)",
          "old_line_content": "void resetCommandTableStats(void) {",
          "new_line_content": "        redisAssert(retval1 == DICT_OK && retval2 == DICT_OK);",
          "content_same": false
        },
        {
          "line": 1537,
          "old_api": null,
          "new_api": "zrealloc",
          "old_text": null,
          "new_text": "zrealloc(oa->ops,sizeof(redisOp)*(oa->numops+1))",
          "old_line_content": "    op->argv = argv;",
          "new_line_content": "    oa->ops = zrealloc(oa->ops,sizeof(redisOp)*(oa->numops+1));",
          "content_same": false
        },
        {
          "line": 1556,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(op->argv[j])",
          "old_line_content": "}",
          "new_line_content": "            decrRefCount(op->argv[j]);",
          "content_same": false
        },
        {
          "line": 1557,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(op->argv)",
          "old_line_content": "",
          "new_line_content": "        zfree(op->argv);",
          "content_same": false
        },
        {
          "line": 1559,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(oa->ops)",
          "old_line_content": "",
          "new_line_content": "    zfree(oa->ops);",
          "content_same": false
        },
        {
          "line": 1565,
          "old_api": null,
          "new_api": "dictFetchValue",
          "old_text": null,
          "new_text": "dictFetchValue(server.commands, name)",
          "old_line_content": "    struct redisCommand *cmd;",
          "new_line_content": "    return dictFetchValue(server.commands, name);",
          "content_same": false
        },
        {
          "line": 1570,
          "old_api": null,
          "new_api": "sdsnew",
          "old_text": null,
          "new_text": "sdsnew(s)",
          "old_line_content": "    return cmd;",
          "new_line_content": "    sds name = sdsnew(s);",
          "content_same": false
        },
        {
          "line": 1572,
          "old_api": null,
          "new_api": "dictFetchValue",
          "old_text": null,
          "new_text": "dictFetchValue(server.commands, name)",
          "old_line_content": "",
          "new_line_content": "    cmd = dictFetchValue(server.commands, name);",
          "content_same": false
        },
        {
          "line": 1573,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(name)",
          "old_line_content": "/* Lookup the command in the current table, if not found also check in",
          "new_line_content": "    sdsfree(name);",
          "content_same": false
        },
        {
          "line": 1585,
          "old_api": null,
          "new_api": "dictFetchValue",
          "old_text": null,
          "new_text": "dictFetchValue(server.commands, name)",
          "old_line_content": "}",
          "new_line_content": "    struct redisCommand *cmd = dictFetchValue(server.commands, name);",
          "content_same": false
        },
        {
          "line": 1587,
          "old_api": null,
          "new_api": "dictFetchValue",
          "old_text": null,
          "new_text": "dictFetchValue(server.orig_commands,name)",
          "old_line_content": "/* Propagate the specified command (in the context of the specified database id)",
          "new_line_content": "    if (!cmd) cmd = dictFetchValue(server.orig_commands,name);",
          "content_same": false
        },
        {
          "line": 1603,
          "old_api": null,
          "new_api": "feedAppendOnlyFile",
          "old_text": null,
          "new_text": "feedAppendOnlyFile(cmd,dbid,argv,argc)",
          "old_line_content": "",
          "new_line_content": "        feedAppendOnlyFile(cmd,dbid,argv,argc);",
          "content_same": false
        },
        {
          "line": 1605,
          "old_api": null,
          "new_api": "replicationFeedSlaves",
          "old_text": null,
          "new_text": "replicationFeedSlaves(server.slaves,dbid,argv,argc)",
          "old_line_content": " * after the current command is propagated to AOF / Replication. */",
          "new_line_content": "        replicationFeedSlaves(server.slaves,dbid,argv,argc);",
          "content_same": false
        },
        {
          "line": 1613,
          "old_api": null,
          "new_api": "redisOpArrayAppend",
          "old_text": null,
          "new_text": "redisOpArrayAppend(&server.also_propagate,cmd,dbid,argv,argc,target)",
          "old_line_content": "void call(redisClient *c, int flags) {",
          "new_line_content": "    redisOpArrayAppend(&server.also_propagate,cmd,dbid,argv,argc,target);",
          "content_same": false
        },
        {
          "line": 1632,
          "old_api": null,
          "new_api": "proc",
          "old_text": null,
          "new_text": "c->cmd->proc(c)",
          "old_line_content": "    /* When EVAL is called loading the AOF we don't want commands called",
          "new_line_content": "    c->cmd->proc(c);",
          "content_same": false
        },
        {
          "line": 1634,
          "old_api": null,
          "new_api": "ustime",
          "old_text": null,
          "new_text": "ustime()",
          "old_line_content": "    if (server.loading && c->flags & REDIS_LUA_CLIENT)",
          "new_line_content": "    duration = ustime()-start;",
          "content_same": false
        },
        {
          "line": 1644,
          "old_api": null,
          "new_api": "slowlogPushEntryIfNeeded",
          "old_text": null,
          "new_text": "slowlogPushEntryIfNeeded(c->argv,c->argc,duration)",
          "old_line_content": "    }",
          "new_line_content": "        slowlogPushEntryIfNeeded(c->argv,c->argc,duration);",
          "content_same": false
        },
        {
          "line": 1659,
          "old_api": null,
          "new_api": "propagate",
          "old_text": null,
          "new_text": "propagate(c->cmd,c->db->id,c->argv,c->argc,flags)",
          "old_line_content": "     * multiple separated commands. */",
          "new_line_content": "            propagate(c->cmd,c->db->id,c->argv,c->argc,flags);",
          "content_same": false
        },
        {
          "line": 1670,
          "old_api": null,
          "new_api": "propagate",
          "old_text": null,
          "new_text": "propagate(rop->cmd, rop->dbid, rop->argv, rop->argc, rop->target)",
          "old_line_content": "    server.stat_numcommands++;",
          "new_line_content": "            propagate(rop->cmd, rop->dbid, rop->argv, rop->argc, rop->target);",
          "content_same": false
        },
        {
          "line": 1672,
          "old_api": null,
          "new_api": "redisOpArrayFree",
          "old_text": null,
          "new_text": "redisOpArrayFree(&server.also_propagate)",
          "old_line_content": "",
          "new_line_content": "        redisOpArrayFree(&server.also_propagate);",
          "content_same": false
        },
        {
          "line": 1690,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[0]->ptr,\"quit\")",
          "old_line_content": "    }",
          "new_line_content": "    if (!strcasecmp(c->argv[0]->ptr,\"quit\")) {",
          "content_same": false
        },
        {
          "line": 1691,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "",
          "new_line_content": "        addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 1698,
          "old_api": null,
          "new_api": "lookupCommand",
          "old_text": null,
          "new_text": "lookupCommand(c->argv[0]->ptr)",
          "old_line_content": "            (char*)c->argv[0]->ptr);",
          "new_line_content": "    c->cmd = c->lastcmd = lookupCommand(c->argv[0]->ptr);",
          "content_same": false
        },
        {
          "line": 1700,
          "old_api": null,
          "new_api": "flagTransaction",
          "old_text": null,
          "new_text": "flagTransaction(c)",
          "old_line_content": "    } else if ((c->cmd->arity > 0 && c->cmd->arity != c->argc) ||",
          "new_line_content": "        flagTransaction(c);",
          "content_same": false
        },
        {
          "line": 1701,
          "old_api": null,
          "new_api": "addReplyErrorFormat",
          "old_text": null,
          "new_text": "addReplyErrorFormat(c,\"unknown command '%s'\",\n            (char*)c->argv[0]->ptr)",
          "old_line_content": "               (c->argc < -c->cmd->arity)) {",
          "new_line_content": "        addReplyErrorFormat(c,\"unknown command '%s'\",",
          "content_same": false
        },
        {
          "line": 1706,
          "old_api": null,
          "new_api": "flagTransaction",
          "old_text": null,
          "new_text": "flagTransaction(c)",
          "old_line_content": "    }",
          "new_line_content": "        flagTransaction(c);",
          "content_same": false
        },
        {
          "line": 1707,
          "old_api": null,
          "new_api": "addReplyErrorFormat",
          "old_text": null,
          "new_text": "addReplyErrorFormat(c,\"wrong number of arguments for '%s' command\",\n            c->cmd->name)",
          "old_line_content": "",
          "new_line_content": "        addReplyErrorFormat(c,\"wrong number of arguments for '%s' command\",",
          "content_same": false
        },
        {
          "line": 1715,
          "old_api": null,
          "new_api": "flagTransaction",
          "old_text": null,
          "new_text": "flagTransaction(c)",
          "old_line_content": "",
          "new_line_content": "        flagTransaction(c);",
          "content_same": false
        },
        {
          "line": 1716,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.noautherr)",
          "old_line_content": "    /* If cluster is enabled perform the cluster redirection here.",
          "new_line_content": "        addReply(c,shared.noautherr);",
          "content_same": false
        },
        {
          "line": 1735,
          "old_api": null,
          "new_api": "getNodeByQuery",
          "old_text": null,
          "new_text": "getNodeByQuery(c,c->cmd,c->argv,c->argc,&hashslot,&ask)",
          "old_line_content": "            } else if (n != server.cluster->myself) {",
          "new_line_content": "            clusterNode *n = getNodeByQuery(c,c->cmd,c->argv,c->argc,&hashslot,&ask);",
          "content_same": false
        },
        {
          "line": 1737,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"Multi keys request invalid in cluster\")",
          "old_line_content": "                    \"-%s %d %s:%d\\r\\n\", ask ? \"ASK\" : \"MOVED\",",
          "new_line_content": "                addReplyError(c,\"Multi keys request invalid in cluster\");",
          "content_same": false
        },
        {
          "line": 1740,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "            }",
          "new_line_content": "                addReplySds(c,sdscatprintf(sdsempty(),",
          "content_same": false
        },
        {
          "line": 1754,
          "old_api": null,
          "new_api": "freeMemoryIfNeeded",
          "old_text": null,
          "new_text": "freeMemoryIfNeeded()",
          "old_line_content": "            return REDIS_OK;",
          "new_line_content": "        int retval = freeMemoryIfNeeded();",
          "content_same": false
        },
        {
          "line": 1756,
          "old_api": null,
          "new_api": "flagTransaction",
          "old_text": null,
          "new_text": "flagTransaction(c)",
          "old_line_content": "    }",
          "new_line_content": "            flagTransaction(c);",
          "content_same": false
        },
        {
          "line": 1757,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c, shared.oomerr)",
          "old_line_content": "",
          "new_line_content": "            addReply(c, shared.oomerr);",
          "content_same": false
        },
        {
          "line": 1768,
          "old_api": null,
          "new_api": "flagTransaction",
          "old_text": null,
          "new_text": "flagTransaction(c)",
          "old_line_content": "",
          "new_line_content": "        flagTransaction(c);",
          "content_same": false
        },
        {
          "line": 1769,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c, shared.bgsaveerr)",
          "old_line_content": "    /* Don't accept write commands if this is a read only slave. But",
          "new_line_content": "        addReply(c, shared.bgsaveerr);",
          "content_same": false
        },
        {
          "line": 1779,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c, shared.roslaveerr)",
          "old_line_content": "    /* Only allow SUBSCRIBE and UNSUBSCRIBE in the context of Pub/Sub */",
          "new_line_content": "        addReply(c, shared.roslaveerr);",
          "content_same": false
        },
        {
          "line": 1784,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(c->pubsub_patterns)",
          "old_line_content": "        c->cmd->proc != psubscribeCommand &&",
          "new_line_content": "    if ((dictSize(c->pubsub_channels) > 0 || listLength(c->pubsub_patterns) > 0)",
          "content_same": false
        },
        {
          "line": 1790,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"only (P)SUBSCRIBE / (P)UNSUBSCRIBE / QUIT allowed in this context\")",
          "old_line_content": "    /* Only allow INFO and SLAVEOF when slave-serve-stale-data is no and",
          "new_line_content": "        addReplyError(c,\"only (P)SUBSCRIBE / (P)UNSUBSCRIBE / QUIT allowed in this context\");",
          "content_same": false
        },
        {
          "line": 1800,
          "old_api": null,
          "new_api": "flagTransaction",
          "old_text": null,
          "new_text": "flagTransaction(c)",
          "old_line_content": "",
          "new_line_content": "        flagTransaction(c);",
          "content_same": false
        },
        {
          "line": 1801,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c, shared.masterdownerr)",
          "old_line_content": "    /* Loading DB? Return an error if the command has not the",
          "new_line_content": "        addReply(c, shared.masterdownerr);",
          "content_same": false
        },
        {
          "line": 1808,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c, shared.loadingerr)",
          "old_line_content": "    /* Lua script too slow? Only allow commands with REDIS_CMD_STALE flag. */",
          "new_line_content": "        addReply(c, shared.loadingerr);",
          "content_same": false
        },
        {
          "line": 1817,
          "old_api": null,
          "new_api": "tolower",
          "old_text": null,
          "new_text": "tolower(((char*)c->argv[1]->ptr)[0])",
          "old_line_content": "    {",
          "new_line_content": "          tolower(((char*)c->argv[1]->ptr)[0]) == 'n') &&",
          "content_same": false
        },
        {
          "line": 1820,
          "old_api": null,
          "new_api": "tolower",
          "old_text": null,
          "new_text": "tolower(((char*)c->argv[1]->ptr)[0])",
          "old_line_content": "        return REDIS_OK;",
          "new_line_content": "          tolower(((char*)c->argv[1]->ptr)[0]) == 'k'))",
          "content_same": false
        },
        {
          "line": 1822,
          "old_api": null,
          "new_api": "flagTransaction",
          "old_text": null,
          "new_text": "flagTransaction(c)",
          "old_line_content": "",
          "new_line_content": "        flagTransaction(c);",
          "content_same": false
        },
        {
          "line": 1823,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c, shared.slowscripterr)",
          "old_line_content": "    /* Exec the command */",
          "new_line_content": "        addReply(c, shared.slowscripterr);",
          "content_same": false
        },
        {
          "line": 1835,
          "old_api": null,
          "new_api": "call",
          "old_text": null,
          "new_text": "call(c,REDIS_CALL_FULL)",
          "old_line_content": "    return REDIS_OK;",
          "new_line_content": "        call(c,REDIS_CALL_FULL);",
          "content_same": false
        },
        {
          "line": 1836,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.ready_keys)",
          "old_line_content": "}",
          "new_line_content": "        if (listLength(server.ready_keys))",
          "content_same": false
        },
        {
          "line": 1837,
          "old_api": null,
          "new_api": "handleClientsBlockedOnLists",
          "old_text": null,
          "new_text": "handleClientsBlockedOnLists()",
          "old_line_content": "",
          "new_line_content": "            handleClientsBlockedOnLists();",
          "content_same": false
        },
        {
          "line": 1848,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"User requested shutdown...\")",
          "old_line_content": "    if (server.rdb_child_pid != -1) {",
          "new_line_content": "    redisLog(REDIS_WARNING,\"User requested shutdown...\");",
          "content_same": false
        },
        {
          "line": 1853,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"There is a child saving an .rdb. Killing it!\")",
          "old_line_content": "    if (server.aof_state != REDIS_AOF_OFF) {",
          "new_line_content": "        redisLog(REDIS_WARNING,\"There is a child saving an .rdb. Killing it!\");",
          "content_same": false
        },
        {
          "line": 1854,
          "old_api": null,
          "new_api": "kill",
          "old_text": null,
          "new_text": "kill(server.rdb_child_pid,SIGUSR1)",
          "old_line_content": "        /* Kill the AOF saving child as the AOF we already have may be longer",
          "new_line_content": "        kill(server.rdb_child_pid,SIGUSR1);",
          "content_same": false
        },
        {
          "line": 1855,
          "old_api": null,
          "new_api": "rdbRemoveTempFile",
          "old_text": null,
          "new_text": "rdbRemoveTempFile(server.rdb_child_pid)",
          "old_line_content": "         * but contains the full dataset anyway. */",
          "new_line_content": "        rdbRemoveTempFile(server.rdb_child_pid);",
          "content_same": false
        },
        {
          "line": 1861,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\n                \"There is a child rewriting the AOF. Killing it!\")",
          "old_line_content": "        /* Append only file: fsync() the AOF and exit */",
          "new_line_content": "            redisLog(REDIS_WARNING,",
          "content_same": false
        },
        {
          "line": 1867,
          "old_api": null,
          "new_api": "aof_fsync",
          "old_text": null,
          "new_text": "aof_fsync(server.aof_fd)",
          "old_line_content": "        /* Snapshotting. Perform a SYNC SAVE and exit */",
          "new_line_content": "        aof_fsync(server.aof_fd);",
          "content_same": false
        },
        {
          "line": 1870,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_NOTICE,\"Saving the final RDB snapshot before exiting.\")",
          "old_line_content": "             * operating. Note that if there was a background saving process,",
          "new_line_content": "        redisLog(REDIS_NOTICE,\"Saving the final RDB snapshot before exiting.\");",
          "content_same": false
        },
        {
          "line": 1872,
          "old_api": null,
          "new_api": "rdbSave",
          "old_text": null,
          "new_text": "rdbSave(server.rdb_filename)",
          "old_line_content": "             * saving aborted, handling special stuff like slaves pending for",
          "new_line_content": "        if (rdbSave(server.rdb_filename) != REDIS_OK) {",
          "content_same": false
        },
        {
          "line": 1878,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"Error trying to save the DB, can't exit.\")",
          "old_line_content": "    if (server.daemonize) {",
          "new_line_content": "            redisLog(REDIS_WARNING,\"Error trying to save the DB, can't exit.\");",
          "content_same": false
        },
        {
          "line": 1888,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(server.sofd)",
          "old_line_content": "    }",
          "new_line_content": "    if (server.sofd != -1) close(server.sofd);",
          "content_same": false
        },
        {
          "line": 1891,
          "old_api": null,
          "new_api": "unlink",
          "old_text": null,
          "new_text": "unlink(server.unixsocket)",
          "old_line_content": "    return REDIS_OK;",
          "new_line_content": "        unlink(server.unixsocket); /* don't care if this fails */",
          "content_same": false
        },
        {
          "line": 1894,
          "old_api": null,
          "new_api": "redisLog",
          "old_text": null,
          "new_text": "redisLog(REDIS_WARNING,\"Redis is now ready to exit, bye bye...\")",
          "old_line_content": "/*================================== Commands =============================== */",
          "new_line_content": "    redisLog(REDIS_WARNING,\"Redis is now ready to exit, bye bye...\");",
          "content_same": false
        },
        {
          "line": 1915,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(a)",
          "old_line_content": "",
          "new_line_content": "    int alen = strlen(a);",
          "content_same": false
        },
        {
          "line": 1916,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(b)",
          "old_line_content": "    /* We can't compare strings longer than our static buffers.",
          "new_line_content": "    int blen = strlen(b);",
          "content_same": false
        },
        {
          "line": 1929,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(bufa,a,alen)",
          "old_line_content": "     * conditional expressions. */",
          "new_line_content": "    memcpy(bufa,a,alen);",
          "content_same": false
        },
        {
          "line": 1930,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(bufb,b,blen)",
          "old_line_content": "    for (j = 0; j < sizeof(bufa); j++) {",
          "new_line_content": "    memcpy(bufb,b,blen);",
          "content_same": false
        },
        {
          "line": 1944,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"Client sent AUTH, but no password is set\")",
          "old_line_content": "    } else {",
          "new_line_content": "        addReplyError(c,\"Client sent AUTH, but no password is set\");",
          "content_same": false
        },
        {
          "line": 1945,
          "old_api": null,
          "new_api": "time_independent_strcmp",
          "old_text": null,
          "new_text": "time_independent_strcmp(c->argv[1]->ptr, server.requirepass)",
          "old_line_content": "      c->authenticated = 0;",
          "new_line_content": "    } else if (!time_independent_strcmp(c->argv[1]->ptr, server.requirepass)) {",
          "content_same": false
        },
        {
          "line": 1947,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "    }",
          "new_line_content": "      addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 1950,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"invalid password\")",
          "old_line_content": "void pingCommand(redisClient *c) {",
          "new_line_content": "      addReplyError(c,\"invalid password\");",
          "content_same": false
        },
        {
          "line": 1959,
          "old_api": null,
          "new_api": "addReplyBulk",
          "old_text": null,
          "new_text": "addReplyBulk(c,c->argv[1])",
          "old_line_content": "    struct timeval tv;",
          "new_line_content": "    addReplyBulk(c,c->argv[1]);",
          "content_same": false
        },
        {
          "line": 1967,
          "old_api": null,
          "new_api": "gettimeofday",
          "old_text": null,
          "new_text": "gettimeofday(&tv,NULL)",
          "old_line_content": "}",
          "new_line_content": "    gettimeofday(&tv,NULL);",
          "content_same": false
        },
        {
          "line": 1968,
          "old_api": null,
          "new_api": "addReplyMultiBulkLen",
          "old_text": null,
          "new_text": "addReplyMultiBulkLen(c,2)",
          "old_line_content": "",
          "new_line_content": "    addReplyMultiBulkLen(c,2);",
          "content_same": false
        },
        {
          "line": 1969,
          "old_api": null,
          "new_api": "addReplyBulkLongLong",
          "old_text": null,
          "new_text": "addReplyBulkLongLong(c,tv.tv_sec)",
          "old_line_content": "/* Convert an amount of bytes into a human readable string in the form",
          "new_line_content": "    addReplyBulkLongLong(c,tv.tv_sec);",
          "content_same": false
        },
        {
          "line": 1970,
          "old_api": null,
          "new_api": "addReplyBulkLongLong",
          "old_text": null,
          "new_text": "addReplyBulkLongLong(c,tv.tv_usec)",
          "old_line_content": " * of 100B, 2G, 100M, 4K, and so forth. */",
          "new_line_content": "    addReplyBulkLongLong(c,tv.tv_usec);",
          "content_same": false
        },
        {
          "line": 1984,
          "old_api": null,
          "new_api": "sprintf",
          "old_text": null,
          "new_text": "sprintf(s,\"%.2fK\",d)",
          "old_line_content": "    } else if (n < (1024LL*1024*1024*1024)) {",
          "new_line_content": "        sprintf(s,\"%.2fK\",d);",
          "content_same": false
        },
        {
          "line": 1987,
          "old_api": null,
          "new_api": "sprintf",
          "old_text": null,
          "new_text": "sprintf(s,\"%.2fM\",d)",
          "old_line_content": "    }",
          "new_line_content": "        sprintf(s,\"%.2fM\",d);",
          "content_same": false
        },
        {
          "line": 1990,
          "old_api": null,
          "new_api": "sprintf",
          "old_text": null,
          "new_text": "sprintf(s,\"%.2fG\",d)",
          "old_line_content": "/* Create the string returned by the INFO command. This is decoupled",
          "new_line_content": "        sprintf(s,\"%.2fG\",d);",
          "content_same": false
        },
        {
          "line": 1998,
          "old_api": null,
          "new_api": "sdsempty",
          "old_text": null,
          "new_text": "sdsempty()",
          "old_line_content": "    unsigned long lol, bib;",
          "new_line_content": "    sds info = sdsempty();",
          "content_same": false
        },
        {
          "line": 2011,
          "old_api": null,
          "new_api": "getrusage",
          "old_text": null,
          "new_text": "getrusage(RUSAGE_SELF, &self_ru)",
          "old_line_content": "    /* Server */",
          "new_line_content": "    getrusage(RUSAGE_SELF, &self_ru);",
          "content_same": false
        },
        {
          "line": 2013,
          "old_api": null,
          "new_api": "getClientsMaxBuffers",
          "old_text": null,
          "new_text": "getClientsMaxBuffers(&lol,&bib)",
          "old_line_content": "        struct utsname name;",
          "new_line_content": "    getClientsMaxBuffers(&lol,&bib);",
          "content_same": false
        },
        {
          "line": 2016,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(section,\"server\")",
          "old_line_content": "        if (server.cluster_enabled) mode = \"cluster\";",
          "new_line_content": "    if (allsections || defsections || !strcasecmp(section,\"server\")) {",
          "content_same": false
        },
        {
          "line": 2024,
          "old_api": null,
          "new_api": "sdscat",
          "old_text": null,
          "new_text": "sdscat(info,\"\\r\\n\")",
          "old_line_content": "            \"redis_version:%s\\r\\n\"",
          "new_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "content_same": false
        },
        {
          "line": 2025,
          "old_api": null,
          "new_api": "uname",
          "old_text": null,
          "new_text": "uname(&name)",
          "old_line_content": "            \"redis_git_sha1:%s\\r\\n\"",
          "new_line_content": "        uname(&name);",
          "content_same": false
        },
        {
          "line": 2026,
          "old_api": null,
          "new_api": "sdscatprintf",
          "old_text": null,
          "new_text": "sdscatprintf(info,\n            \"# Server\\r\\n\"\n            \"redis_version:%s\\r\\n\"\n            \"redis_git_sha1:%s\\r\\n\"\n            \"redis_git_dirty:%d\\r\\n\"\n            \"redis_build_id:%llx\\r\\n\"\n            \"redis_mode:%s\\r\\n\"\n            \"os:%s %s %s\\r\\n\"\n            \"arch_bits:%d\\r\\n\"\n            \"multiplexing_api:%s\\r\\n\"\n            \"gcc_version:%d.%d.%d\\r\\n\"\n            \"process_id:%ld\\r\\n\"\n            \"run_id:%s\\r\\n\"\n            \"tcp_port:%d\\r\\n\"\n            \"uptime_in_seconds:%ld\\r\\n\"\n            \"uptime_in_days:%ld\\r\\n\"\n            \"hz:%d\\r\\n\"\n            \"lru_clock:%ld\\r\\n\",\n            REDIS_VERSION,\n            redisGitSHA1(),\n            strtol(redisGitDirty(),NULL,10) > 0,\n            (unsigned long long) redisBuildId(),\n            mode,\n            name.sysname, name.release, name.machine,\n            server.arch_bits,\n            aeGetApiName(),\n#ifdef __GNUC__\n            __GNUC__,__GNUC_MINOR__,__GNUC_PATCHLEVEL__,\n#else\n            0,0,0,\n#endif\n            (long) getpid(),\n            server.runid,\n            server.port,\n            uptime,\n            uptime/(3600*24),\n            server.hz,\n            (unsigned long) server.lruclock)",
          "old_line_content": "            \"redis_git_dirty:%d\\r\\n\"",
          "new_line_content": "        info = sdscatprintf(info,",
          "content_same": false
        },
        {
          "line": 2045,
          "old_api": null,
          "new_api": "redisGitSHA1",
          "old_text": null,
          "new_text": "redisGitSHA1()",
          "old_line_content": "            name.sysname, name.release, name.machine,",
          "new_line_content": "            redisGitSHA1(),",
          "content_same": false
        },
        {
          "line": 2046,
          "old_api": null,
          "new_api": "redisGitDirty",
          "old_text": null,
          "new_text": "redisGitDirty()",
          "old_line_content": "            server.arch_bits,",
          "new_line_content": "            strtol(redisGitDirty(),NULL,10) > 0,",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 2053,
          "old_api": "getpid",
          "new_api": null,
          "old_text": "getpid()",
          "new_text": null,
          "old_line_content": "            (long) getpid(),",
          "new_line_content": "            __GNUC__,__GNUC_MINOR__,__GNUC_PATCHLEVEL__,",
          "content_same": false
        },
        {
          "line": 2063,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(section,\"clients\")",
          "new_text": null,
          "old_line_content": "    if (allsections || defsections || !strcasecmp(section,\"clients\")) {",
          "new_line_content": "            (unsigned long) server.lruclock);",
          "content_same": false
        },
        {
          "line": 2064,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(info,\"\\r\\n\")",
          "new_text": null,
          "old_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2065,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info,\n            \"# Clients\\r\\n\"\n            \"connected_clients:%lu\\r\\n\"\n            \"client_longest_output_list:%lu\\r\\n\"\n            \"client_biggest_input_buf:%lu\\r\\n\"\n            \"blocked_clients:%d\\r\\n\",\n            listLength(server.clients)-listLength(server.slaves),\n            lol, bib,\n            server.bpop_blocked_clients)",
          "new_text": null,
          "old_line_content": "        info = sdscatprintf(info,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2071,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.slaves)",
          "new_text": null,
          "old_line_content": "            listLength(server.clients)-listLength(server.slaves),",
          "new_line_content": "            \"connected_clients:%lu\\r\\n\"",
          "content_same": false
        },
        {
          "line": 2077,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(section,\"memory\")",
          "new_text": null,
          "old_line_content": "    if (allsections || defsections || !strcasecmp(section,\"memory\")) {",
          "new_line_content": "            server.bpop_blocked_clients);",
          "content_same": false
        },
        {
          "line": 2082,
          "old_api": "bytesToHuman",
          "new_api": null,
          "old_text": "bytesToHuman(peak_hmem,server.stat_peak_memory)",
          "new_text": null,
          "old_line_content": "        bytesToHuman(peak_hmem,server.stat_peak_memory);",
          "new_line_content": "        char hmem[64];",
          "content_same": false
        },
        {
          "line": 2083,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(info,\"\\r\\n\")",
          "new_text": null,
          "old_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "new_line_content": "        char peak_hmem[64];",
          "content_same": false
        },
        {
          "line": 2084,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info,\n            \"# Memory\\r\\n\"\n            \"used_memory:%zu\\r\\n\"\n            \"used_memory_human:%s\\r\\n\"\n            \"used_memory_rss:%zu\\r\\n\"\n            \"used_memory_peak:%zu\\r\\n\"\n            \"used_memory_peak_human:%s\\r\\n\"\n            \"used_memory_lua:%lld\\r\\n\"\n            \"mem_fragmentation_ratio:%.2f\\r\\n\"\n            \"mem_allocator:%s\\r\\n\",\n            zmalloc_used_memory(),\n            hmem,\n            zmalloc_get_rss(),\n            server.stat_peak_memory,\n            peak_hmem,\n            ((long long)lua_gc(server.lua,LUA_GCCOUNT,0))*1024LL,\n            zmalloc_get_fragmentation_ratio(),\n            ZMALLOC_LIB\n            )",
          "new_text": null,
          "old_line_content": "        info = sdscatprintf(info,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2094,
          "old_api": "zmalloc_used_memory",
          "new_api": null,
          "old_text": "zmalloc_used_memory()",
          "new_text": null,
          "old_line_content": "            zmalloc_used_memory(),",
          "new_line_content": "            \"used_memory_peak_human:%s\\r\\n\"",
          "content_same": false
        },
        {
          "line": 2096,
          "old_api": "zmalloc_get_rss",
          "new_api": null,
          "old_text": "zmalloc_get_rss()",
          "new_text": null,
          "old_line_content": "            zmalloc_get_rss(),",
          "new_line_content": "            \"mem_fragmentation_ratio:%.2f\\r\\n\"",
          "content_same": false
        },
        {
          "line": 2099,
          "old_api": "lua_gc",
          "new_api": null,
          "old_text": "lua_gc(server.lua,LUA_GCCOUNT,0)",
          "new_text": null,
          "old_line_content": "            ((long long)lua_gc(server.lua,LUA_GCCOUNT,0))*1024LL,",
          "new_line_content": "            hmem,",
          "content_same": false
        },
        {
          "line": 2106,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(section,\"persistence\")",
          "new_text": null,
          "old_line_content": "    if (allsections || defsections || !strcasecmp(section,\"persistence\")) {",
          "new_line_content": "            );",
          "content_same": false
        },
        {
          "line": 2107,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(info,\"\\r\\n\")",
          "new_text": null,
          "old_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2108,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info,\n            \"# Persistence\\r\\n\"\n            \"loading:%d\\r\\n\"\n            \"rdb_changes_since_last_save:%lld\\r\\n\"\n            \"rdb_bgsave_in_progress:%d\\r\\n\"\n            \"rdb_last_save_time:%ld\\r\\n\"\n            \"rdb_last_bgsave_status:%s\\r\\n\"\n            \"rdb_last_bgsave_time_sec:%ld\\r\\n\"\n            \"rdb_current_bgsave_time_sec:%ld\\r\\n\"\n            \"aof_enabled:%d\\r\\n\"\n            \"aof_rewrite_in_progress:%d\\r\\n\"\n            \"aof_rewrite_scheduled:%d\\r\\n\"\n            \"aof_last_rewrite_time_sec:%ld\\r\\n\"\n            \"aof_current_rewrite_time_sec:%ld\\r\\n\"\n            \"aof_last_bgrewrite_status:%s\\r\\n\",\n            server.loading,\n            server.dirty,\n            server.rdb_child_pid != -1,\n            server.lastsave,\n            (server.lastbgsave_status == REDIS_OK) ? \"ok\" : \"err\",\n            server.rdb_save_time_last,\n            (server.rdb_child_pid == -1) ?\n                -1 : time(NULL)-server.rdb_save_time_start,\n            server.aof_state != REDIS_AOF_OFF,\n            server.aof_child_pid != -1,\n            server.aof_rewrite_scheduled,\n            server.aof_rewrite_time_last,\n            (server.aof_child_pid == -1) ?\n                -1 : time(NULL)-server.aof_rewrite_time_start,\n            (server.aof_lastbgrewrite_status == REDIS_OK) ? \"ok\" : \"err\")",
          "new_text": null,
          "old_line_content": "        info = sdscatprintf(info,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2130,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "                -1 : time(NULL)-server.rdb_save_time_start,",
          "new_line_content": "            server.lastsave,",
          "content_same": false
        },
        {
          "line": 2136,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "                -1 : time(NULL)-server.aof_rewrite_time_start,",
          "new_line_content": "            server.aof_child_pid != -1,",
          "content_same": false
        },
        {
          "line": 2151,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(server.aof_buf)",
          "new_text": null,
          "old_line_content": "                sdslen(server.aof_buf),",
          "new_line_content": "                \"aof_delayed_fsync:%lu\\r\\n\",",
          "content_same": false
        },
        {
          "line": 2152,
          "old_api": "aofRewriteBufferSize",
          "new_api": null,
          "old_text": "aofRewriteBufferSize()",
          "new_text": null,
          "old_line_content": "                aofRewriteBufferSize(),",
          "new_line_content": "                (long long) server.aof_current_size,",
          "content_same": false
        },
        {
          "line": 2153,
          "old_api": "bioPendingJobsOfType",
          "new_api": null,
          "old_text": "bioPendingJobsOfType(REDIS_BIO_AOF_FSYNC)",
          "new_text": null,
          "old_line_content": "                bioPendingJobsOfType(REDIS_BIO_AOF_FSYNC),",
          "new_line_content": "                (long long) server.aof_rewrite_base_size,",
          "content_same": false
        },
        {
          "line": 2174,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info,\n                \"loading_start_time:%ld\\r\\n\"\n                \"loading_total_bytes:%llu\\r\\n\"\n                \"loading_loaded_bytes:%llu\\r\\n\"\n                \"loading_loaded_perc:%.2f\\r\\n\"\n                \"loading_eta_seconds:%ld\\r\\n\"\n                ,(unsigned long) server.loading_start_time,\n                (unsigned long long) server.loading_total_bytes,\n                (unsigned long long) server.loading_loaded_bytes,\n                perc,\n                eta\n            )",
          "new_text": null,
          "old_line_content": "            info = sdscatprintf(info,",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 2190,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(section,\"stats\")",
          "new_text": null,
          "old_line_content": "    if (allsections || defsections || !strcasecmp(section,\"stats\")) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2191,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(info,\"\\r\\n\")",
          "new_text": null,
          "old_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2192,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info,\n            \"# Stats\\r\\n\"\n            \"total_connections_received:%lld\\r\\n\"\n            \"total_commands_processed:%lld\\r\\n\"\n            \"instantaneous_ops_per_sec:%lld\\r\\n\"\n            \"rejected_connections:%lld\\r\\n\"\n            \"sync_full:%lld\\r\\n\"\n            \"sync_partial_ok:%lld\\r\\n\"\n            \"sync_partial_err:%lld\\r\\n\"\n            \"expired_keys:%lld\\r\\n\"\n            \"evicted_keys:%lld\\r\\n\"\n            \"keyspace_hits:%lld\\r\\n\"\n            \"keyspace_misses:%lld\\r\\n\"\n            \"pubsub_channels:%ld\\r\\n\"\n            \"pubsub_patterns:%lu\\r\\n\"\n            \"latest_fork_usec:%lld\\r\\n\"\n            \"migrate_cached_sockets:%ld\\r\\n\",\n            server.stat_numconnections,\n            server.stat_numcommands,\n            getOperationsPerSecond(),\n            server.stat_rejected_conn,\n            server.stat_sync_full,\n            server.stat_sync_partial_ok,\n            server.stat_sync_partial_err,\n            server.stat_expiredkeys,\n            server.stat_evictedkeys,\n            server.stat_keyspace_hits,\n            server.stat_keyspace_misses,\n            dictSize(server.pubsub_channels),\n            listLength(server.pubsub_patterns),\n            server.stat_fork_time,\n            dictSize(server.migrate_cached_sockets))",
          "new_text": null,
          "old_line_content": "        info = sdscatprintf(info,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2211,
          "old_api": "getOperationsPerSecond",
          "new_api": null,
          "old_text": "getOperationsPerSecond()",
          "new_text": null,
          "old_line_content": "            getOperationsPerSecond(),",
          "new_line_content": "            \"latest_fork_usec:%lld\\r\\n\"",
          "content_same": false
        },
        {
          "line": 2220,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(server.pubsub_channels)",
          "new_text": null,
          "old_line_content": "            dictSize(server.pubsub_channels),",
          "new_line_content": "            server.stat_expiredkeys,",
          "content_same": false
        },
        {
          "line": 2221,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.pubsub_patterns)",
          "new_text": null,
          "old_line_content": "            listLength(server.pubsub_patterns),",
          "new_line_content": "            server.stat_evictedkeys,",
          "content_same": false
        },
        {
          "line": 2223,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(server.migrate_cached_sockets)",
          "new_text": null,
          "old_line_content": "            dictSize(server.migrate_cached_sockets));",
          "new_line_content": "            server.stat_keyspace_misses,",
          "content_same": false
        },
        {
          "line": 2228,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(info,\"\\r\\n\")",
          "new_text": null,
          "old_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2229,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info,\n            \"# Replication\\r\\n\"\n            \"role:%s\\r\\n\",\n            server.masterhost == NULL ? \"master\" : \"slave\")",
          "new_text": null,
          "old_line_content": "        info = sdscatprintf(info,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2234,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info,\n                \"master_host:%s\\r\\n\"\n                \"master_port:%d\\r\\n\"\n                \"master_link_status:%s\\r\\n\"\n                \"master_last_io_seconds_ago:%d\\r\\n\"\n                \"master_sync_in_progress:%d\\r\\n\"\n                \"slave_repl_offset:%lld\\r\\n\"\n                ,server.masterhost,\n                server.masterport,\n                (server.repl_state == REDIS_REPL_CONNECTED) ?\n                    \"up\" : \"down\",\n                server.master ?\n                ((int)(server.unixtime-server.master->lastinteraction)) : -1,\n                server.repl_state == REDIS_REPL_TRANSFER,\n                server.master ? server.master->reploff : -1\n            )",
          "new_text": null,
          "old_line_content": "            info = sdscatprintf(info,",
          "new_line_content": "            \"# Replication\\r\\n\"",
          "content_same": false
        },
        {
          "line": 2252,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info,\n                    \"master_sync_left_bytes:%lld\\r\\n\"\n                    \"master_sync_last_io_seconds_ago:%d\\r\\n\"\n                    , (long long)\n                        (server.repl_transfer_size - server.repl_transfer_read),\n                    (int)(server.unixtime-server.repl_transfer_lastio)\n                )",
          "new_text": null,
          "old_line_content": "                info = sdscatprintf(info,",
          "new_line_content": "                server.master ? server.master->reploff : -1",
          "content_same": false
        },
        {
          "line": 2262,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info,\n                    \"master_link_down_since_seconds:%ld\\r\\n\",\n                    (long)server.unixtime-server.repl_down_since)",
          "new_text": null,
          "old_line_content": "                info = sdscatprintf(info,",
          "new_line_content": "                );",
          "content_same": false
        },
        {
          "line": 2272,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info,\n            \"connected_slaves:%lu\\r\\n\",\n            listLength(server.slaves))",
          "new_text": null,
          "old_line_content": "        info = sdscatprintf(info,",
          "new_line_content": "                \"slave_read_only:%d\\r\\n\",",
          "content_same": false
        },
        {
          "line": 2274,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.slaves)",
          "new_text": null,
          "old_line_content": "            listLength(server.slaves));",
          "new_line_content": "                server.repl_slave_ro);",
          "content_same": false
        },
        {
          "line": 2275,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.slaves)",
          "new_text": null,
          "old_line_content": "        if (listLength(server.slaves)) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2280,
          "old_api": "listRewind",
          "new_api": null,
          "old_text": "listRewind(server.slaves,&li)",
          "new_text": null,
          "old_line_content": "            listRewind(server.slaves,&li);",
          "new_line_content": "            int slaveid = 0;",
          "content_same": false
        },
        {
          "line": 2281,
          "old_api": "listNext",
          "new_api": null,
          "old_text": "listNext(&li)",
          "new_text": null,
          "old_line_content": "            while((ln = listNext(&li))) {",
          "new_line_content": "            listNode *ln;",
          "content_same": false
        },
        {
          "line": 2282,
          "old_api": "listNodeValue",
          "new_api": null,
          "old_text": "listNodeValue(ln)",
          "new_text": null,
          "old_line_content": "                redisClient *slave = listNodeValue(ln);",
          "new_line_content": "            listIter li;",
          "content_same": false
        },
        {
          "line": 2287,
          "old_api": "anetPeerToString",
          "new_api": null,
          "old_text": "anetPeerToString(slave->fd,ip,&port)",
          "new_text": null,
          "old_line_content": "                if (anetPeerToString(slave->fd,ip,&port) == -1) continue;",
          "new_line_content": "                char *state = NULL;",
          "content_same": false
        },
        {
          "line": 2301,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info,\"slave%d:%s,%d,%s\\r\\n\",\n                    slaveid,ip,slave->slave_listening_port,state)",
          "new_text": null,
          "old_line_content": "                info = sdscatprintf(info,\"slave%d:%s,%d,%s\\r\\n\",",
          "new_line_content": "                    state = \"online\";",
          "content_same": false
        },
        {
          "line": 2306,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info,\n            \"master_repl_offset:%lld\\r\\n\"\n            \"repl_backlog_active:%d\\r\\n\"\n            \"repl_backlog_size:%lld\\r\\n\"\n            \"repl_backlog_first_byte_offset:%lld\\r\\n\"\n            \"repl_backlog_histlen:%lld\\r\\n\",\n            server.master_repl_offset,\n            server.repl_backlog != NULL,\n            server.repl_backlog_size,\n            server.repl_backlog_off,\n            server.repl_backlog_histlen)",
          "new_text": null,
          "old_line_content": "        info = sdscatprintf(info,",
          "new_line_content": "                    slaveid,ip,slave->slave_listening_port,state);",
          "content_same": false
        },
        {
          "line": 2320,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(section,\"cpu\")",
          "new_text": null,
          "old_line_content": "    if (allsections || defsections || !strcasecmp(section,\"cpu\")) {",
          "new_line_content": "            server.repl_backlog_histlen);",
          "content_same": false
        },
        {
          "line": 2321,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(info,\"\\r\\n\")",
          "new_text": null,
          "old_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2322,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info,\n        \"# CPU\\r\\n\"\n        \"used_cpu_sys:%.2f\\r\\n\"\n        \"used_cpu_user:%.2f\\r\\n\"\n        \"used_cpu_sys_children:%.2f\\r\\n\"\n        \"used_cpu_user_children:%.2f\\r\\n\",\n        (float)self_ru.ru_stime.tv_sec+(float)self_ru.ru_stime.tv_usec/1000000,\n        (float)self_ru.ru_utime.tv_sec+(float)self_ru.ru_utime.tv_usec/1000000,\n        (float)c_ru.ru_stime.tv_sec+(float)c_ru.ru_stime.tv_usec/1000000,\n        (float)c_ru.ru_utime.tv_sec+(float)c_ru.ru_utime.tv_usec/1000000)",
          "new_text": null,
          "old_line_content": "        info = sdscatprintf(info,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2335,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(section,\"commandstats\")",
          "new_text": null,
          "old_line_content": "    if (allsections || !strcasecmp(section,\"commandstats\")) {",
          "new_line_content": "        (float)c_ru.ru_utime.tv_sec+(float)c_ru.ru_utime.tv_usec/1000000);",
          "content_same": false
        },
        {
          "line": 2336,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(info,\"\\r\\n\")",
          "new_text": null,
          "old_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2337,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info, \"# Commandstats\\r\\n\")",
          "new_text": null,
          "old_line_content": "        info = sdscatprintf(info, \"# Commandstats\\r\\n\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2343,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info,\n                \"cmdstat_%s:calls=%lld,usec=%lld,usec_per_call=%.2f\\r\\n\",\n                c->name, c->calls, c->microseconds,\n                (c->calls == 0) ? 0 : ((float)c->microseconds/c->calls))",
          "new_text": null,
          "old_line_content": "            info = sdscatprintf(info,",
          "new_line_content": "        for (j = 0; j < numcommands; j++) {",
          "content_same": false
        },
        {
          "line": 2351,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(section,\"cluster\")",
          "new_text": null,
          "old_line_content": "    if (allsections || defsections || !strcasecmp(section,\"cluster\")) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2352,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(info,\"\\r\\n\")",
          "new_text": null,
          "old_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2353,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info,\n        \"# Cluster\\r\\n\"\n        \"cluster_enabled:%d\\r\\n\",\n        server.cluster_enabled)",
          "new_text": null,
          "old_line_content": "        info = sdscatprintf(info,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2360,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(section,\"keyspace\")",
          "new_text": null,
          "old_line_content": "    if (allsections || defsections || !strcasecmp(section,\"keyspace\")) {",
          "new_line_content": "        server.cluster_enabled);",
          "content_same": false
        },
        {
          "line": 2361,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(info,\"\\r\\n\")",
          "new_text": null,
          "old_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2362,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info, \"# Keyspace\\r\\n\")",
          "new_text": null,
          "old_line_content": "        info = sdscatprintf(info, \"# Keyspace\\r\\n\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2367,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(server.db[j].expires)",
          "new_text": null,
          "old_line_content": "            vkeys = dictSize(server.db[j].expires);",
          "new_line_content": "        for (j = 0; j < server.dbnum; j++) {",
          "content_same": false
        },
        {
          "line": 2369,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info, \"db%d:keys=%lld,expires=%lld\\r\\n\",\n                    j, keys, vkeys)",
          "new_text": null,
          "old_line_content": "                info = sdscatprintf(info, \"db%d:keys=%lld,expires=%lld\\r\\n\",",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2381,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.syntaxerr)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.syntaxerr);",
          "new_line_content": "void infoCommand(redisClient *c) {",
          "content_same": false
        },
        {
          "line": 2384,
          "old_api": "genRedisInfoString",
          "new_api": null,
          "old_text": "genRedisInfoString(section)",
          "new_text": null,
          "old_line_content": "    sds info = genRedisInfoString(section);",
          "new_line_content": "    if (c->argc > 2) {",
          "content_same": false
        },
        {
          "line": 2386,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(info)",
          "new_text": null,
          "old_line_content": "        (unsigned long)sdslen(info)));",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 2387,
          "old_api": "addReplySds",
          "new_api": null,
          "old_text": "addReplySds(c,info)",
          "new_text": null,
          "old_line_content": "    addReplySds(c,info);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2396,
          "old_api": "listAddNodeTail",
          "new_api": null,
          "old_text": "listAddNodeTail(server.monitors,c)",
          "new_text": null,
          "old_line_content": "    listAddNodeTail(server.monitors,c);",
          "new_line_content": "    /* ignore MONITOR if already slave or in monitor mode */",
          "content_same": false
        },
        {
          "line": 2397,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.ok)",
          "new_text": null,
          "old_line_content": "    addReply(c,shared.ok);",
          "new_line_content": "    if (c->flags & REDIS_SLAVE) return;",
          "content_same": false
        },
        {
          "line": 2419,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.slaves)",
          "new_text": null,
          "old_line_content": "    int slaves = listLength(server.slaves);",
          "new_line_content": " * used by the server.",
          "content_same": false
        },
        {
          "line": 2428,
          "old_api": "listRewind",
          "new_api": null,
          "old_text": "listRewind(server.slaves,&li)",
          "new_text": null,
          "old_line_content": "        listRewind(server.slaves,&li);",
          "new_line_content": "    if (slaves) {",
          "content_same": false
        },
        {
          "line": 2429,
          "old_api": "listNext",
          "new_api": null,
          "old_text": "listNext(&li)",
          "new_text": null,
          "old_line_content": "        while((ln = listNext(&li))) {",
          "new_line_content": "        listIter li;",
          "content_same": false
        },
        {
          "line": 2430,
          "old_api": "listNodeValue",
          "new_api": null,
          "old_text": "listNodeValue(ln)",
          "new_text": null,
          "old_line_content": "            redisClient *slave = listNodeValue(ln);",
          "new_line_content": "        listNode *ln;",
          "content_same": false
        },
        {
          "line": 2431,
          "old_api": "getClientOutputBufferMemoryUsage",
          "new_api": null,
          "old_text": "getClientOutputBufferMemoryUsage(slave)",
          "new_text": null,
          "old_line_content": "            unsigned long obuf_bytes = getClientOutputBufferMemoryUsage(slave);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2439,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(server.aof_buf)",
          "new_text": null,
          "old_line_content": "        mem_used -= sdslen(server.aof_buf);",
          "new_line_content": "                mem_used -= obuf_bytes;",
          "content_same": false
        },
        {
          "line": 2440,
          "old_api": "aofRewriteBufferSize",
          "new_api": null,
          "old_text": "aofRewriteBufferSize()",
          "new_text": null,
          "old_line_content": "        mem_used -= aofRewriteBufferSize();",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2469,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(dict)",
          "new_text": null,
          "old_line_content": "            if (dictSize(dict) == 0) continue;",
          "new_line_content": "                dict = server.db[j].dict;",
          "content_same": false
        },
        {
          "line": 2475,
          "old_api": "dictGetRandomKey",
          "new_api": null,
          "old_text": "dictGetRandomKey(dict)",
          "new_text": null,
          "old_line_content": "                de = dictGetRandomKey(dict);",
          "new_line_content": "            /* volatile-random and allkeys-random policy */",
          "content_same": false
        },
        {
          "line": 2476,
          "old_api": "dictGetKey",
          "new_api": null,
          "old_text": "dictGetKey(de)",
          "new_text": null,
          "old_line_content": "                bestkey = dictGetKey(de);",
          "new_line_content": "            if (server.maxmemory_policy == REDIS_MAXMEMORY_ALLKEYS_RANDOM ||",
          "content_same": false
        },
        {
          "line": 2488,
          "old_api": "dictGetRandomKey",
          "new_api": null,
          "old_text": "dictGetRandomKey(dict)",
          "new_text": null,
          "old_line_content": "                    de = dictGetRandomKey(dict);",
          "new_line_content": "                    sds thiskey;",
          "content_same": false
        },
        {
          "line": 2489,
          "old_api": "dictGetKey",
          "new_api": null,
          "old_text": "dictGetKey(de)",
          "new_text": null,
          "old_line_content": "                    thiskey = dictGetKey(de);",
          "new_line_content": "                    long thisval;",
          "content_same": false
        },
        {
          "line": 2494,
          "old_api": "dictGetVal",
          "new_api": null,
          "old_text": "dictGetVal(de)",
          "new_text": null,
          "old_line_content": "                    o = dictGetVal(de);",
          "new_line_content": "                    /* When policy is volatile-lru we need an additional lookup",
          "content_same": false
        },
        {
          "line": 2495,
          "old_api": "estimateObjectIdleTime",
          "new_api": null,
          "old_text": "estimateObjectIdleTime(o)",
          "new_text": null,
          "old_line_content": "                    thisval = estimateObjectIdleTime(o);",
          "new_line_content": "                     * to locate the real key, as dict is set to db->expires. */",
          "content_same": false
        },
        {
          "line": 2511,
          "old_api": "dictGetRandomKey",
          "new_api": null,
          "old_text": "dictGetRandomKey(dict)",
          "new_text": null,
          "old_line_content": "                    de = dictGetRandomKey(dict);",
          "new_line_content": "                for (k = 0; k < server.maxmemory_samples; k++) {",
          "content_same": false
        },
        {
          "line": 2512,
          "old_api": "dictGetKey",
          "new_api": null,
          "old_text": "dictGetKey(de)",
          "new_text": null,
          "old_line_content": "                    thiskey = dictGetKey(de);",
          "new_line_content": "                    sds thiskey;",
          "content_same": false
        },
        {
          "line": 2513,
          "old_api": "dictGetVal",
          "new_api": null,
          "old_text": "dictGetVal(de)",
          "new_text": null,
          "old_line_content": "                    thisval = (long) dictGetVal(de);",
          "new_line_content": "                    long thisval;",
          "content_same": false
        },
        {
          "line": 2528,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(bestkey)",
          "new_text": null,
          "old_line_content": "                robj *keyobj = createStringObject(bestkey,sdslen(bestkey));",
          "new_line_content": "            /* Finally remove the selected key. */",
          "content_same": false
        },
        {
          "line": 2529,
          "old_api": "propagateExpire",
          "new_api": null,
          "old_text": "propagateExpire(db,keyobj)",
          "new_text": null,
          "old_line_content": "                propagateExpire(db,keyobj);",
          "new_line_content": "            if (bestkey) {",
          "content_same": false
        },
        {
          "line": 2538,
          "old_api": "zmalloc_used_memory",
          "new_api": null,
          "old_text": "zmalloc_used_memory()",
          "new_text": null,
          "old_line_content": "                delta = (long long) zmalloc_used_memory();",
          "new_line_content": "                 * that otherwise we would never exit the loop.",
          "content_same": false
        },
        {
          "line": 2539,
          "old_api": "dbDelete",
          "new_api": null,
          "old_text": "dbDelete(db,keyobj)",
          "new_text": null,
          "old_line_content": "                dbDelete(db,keyobj);",
          "new_line_content": "                 *",
          "content_same": false
        },
        {
          "line": 2540,
          "old_api": "zmalloc_used_memory",
          "new_api": null,
          "old_text": "zmalloc_used_memory()",
          "new_text": null,
          "old_line_content": "                delta -= (long long) zmalloc_used_memory();",
          "new_line_content": "                 * AOF and Output buffer memory will be freed eventually so",
          "content_same": false
        },
        {
          "line": 2545,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(keyobj)",
          "new_text": null,
          "old_line_content": "                decrRefCount(keyobj);",
          "new_line_content": "                mem_freed += delta;",
          "content_same": false
        },
        {
          "line": 2552,
          "old_api": "flushSlavesOutputBuffers",
          "new_api": null,
          "old_text": "flushSlavesOutputBuffers()",
          "new_text": null,
          "old_line_content": "                if (slaves) flushSlavesOutputBuffers();",
          "new_line_content": "                /* When the memory to free starts to be big enough, we may",
          "content_same": false
        },
        {
          "line": 2564,
          "old_api": "fopen",
          "new_api": null,
          "old_text": "fopen(\"/proc/sys/vm/overcommit_memory\",\"r\")",
          "new_text": null,
          "old_line_content": "    FILE *fp = fopen(\"/proc/sys/vm/overcommit_memory\",\"r\");",
          "new_line_content": "/* =================================== Main! ================================ */",
          "content_same": false
        },
        {
          "line": 2569,
          "old_api": "fclose",
          "new_api": null,
          "old_text": "fclose(fp)",
          "new_text": null,
          "old_line_content": "        fclose(fp);",
          "new_line_content": "    char buf[64];",
          "content_same": false
        },
        {
          "line": 2574,
          "old_api": "atoi",
          "new_api": null,
          "old_text": "atoi(buf)",
          "new_text": null,
          "old_line_content": "    return atoi(buf);",
          "new_line_content": "        return -1;",
          "content_same": false
        },
        {
          "line": 2579,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.\")",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING,\"WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.\");",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2586,
          "old_api": "fopen",
          "new_api": null,
          "old_text": "fopen(server.pidfile,\"w\")",
          "new_text": null,
          "old_line_content": "    FILE *fp = fopen(server.pidfile,\"w\");",
          "new_line_content": "#endif /* __linux__ */",
          "content_same": false
        },
        {
          "line": 2588,
          "old_api": "getpid",
          "new_api": null,
          "old_text": "getpid()",
          "new_text": null,
          "old_line_content": "        fprintf(fp,\"%d\\n\",(int)getpid());",
          "new_line_content": "void createPidFile(void) {",
          "content_same": false
        },
        {
          "line": 2589,
          "old_api": "fclose",
          "new_api": null,
          "old_text": "fclose(fp)",
          "new_text": null,
          "old_line_content": "        fclose(fp);",
          "new_line_content": "    /* Try to write the pid file in a best-effort way. */",
          "content_same": false
        },
        {
          "line": 2596,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(0)",
          "new_text": null,
          "old_line_content": "    if (fork() != 0) exit(0); /* parent exits */",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2597,
          "old_api": "setsid",
          "new_api": null,
          "old_text": "setsid()",
          "new_text": null,
          "old_line_content": "    setsid(); /* create a new session */",
          "new_line_content": "void daemonize(void) {",
          "content_same": false
        },
        {
          "line": 2602,
          "old_api": "open",
          "new_api": null,
          "old_text": "open(\"/dev/null\", O_RDWR, 0)",
          "new_text": null,
          "old_line_content": "    if ((fd = open(\"/dev/null\", O_RDWR, 0)) != -1) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2603,
          "old_api": "dup2",
          "new_api": null,
          "old_text": "dup2(fd, STDIN_FILENO)",
          "new_text": null,
          "old_line_content": "        dup2(fd, STDIN_FILENO);",
          "new_line_content": "    /* Every output goes to /dev/null. If Redis is daemonized but",
          "content_same": false
        },
        {
          "line": 2604,
          "old_api": "dup2",
          "new_api": null,
          "old_text": "dup2(fd, STDOUT_FILENO)",
          "new_text": null,
          "old_line_content": "        dup2(fd, STDOUT_FILENO);",
          "new_line_content": "     * the 'logfile' is set to 'stdout' in the configuration file",
          "content_same": false
        },
        {
          "line": 2605,
          "old_api": "dup2",
          "new_api": null,
          "old_text": "dup2(fd, STDERR_FILENO)",
          "new_text": null,
          "old_line_content": "        dup2(fd, STDERR_FILENO);",
          "new_line_content": "     * it will not log at all. */",
          "content_same": false
        },
        {
          "line": 2611,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"Redis server v=%s sha=%s:%d malloc=%s bits=%d build=%llx\\n\",\n        REDIS_VERSION,\n        redisGitSHA1(),\n        atoi(redisGitDirty()) > 0,\n        ZMALLOC_LIB,\n        sizeof(long) == 4 ? 32 : 64,\n        (unsigned long long) redisBuildId())",
          "new_text": null,
          "old_line_content": "    printf(\"Redis server v=%s sha=%s:%d malloc=%s bits=%d build=%llx\\n\",",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2613,
          "old_api": "redisGitSHA1",
          "new_api": null,
          "old_text": "redisGitSHA1()",
          "new_text": null,
          "old_line_content": "        redisGitSHA1(),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2614,
          "old_api": "redisGitDirty",
          "new_api": null,
          "old_text": "redisGitDirty()",
          "new_text": null,
          "old_line_content": "        atoi(redisGitDirty()) > 0,",
          "new_line_content": "void version() {",
          "content_same": false
        },
        {
          "line": 2623,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr,\"       ./redis-server - (read config from stdin)\\n\")",
          "new_text": null,
          "old_line_content": "    fprintf(stderr,\"       ./redis-server - (read config from stdin)\\n\");",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2624,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr,\"       ./redis-server -v or --version\\n\")",
          "new_text": null,
          "old_line_content": "    fprintf(stderr,\"       ./redis-server -v or --version\\n\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2625,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr,\"       ./redis-server -h or --help\\n\")",
          "new_text": null,
          "old_line_content": "    fprintf(stderr,\"       ./redis-server -h or --help\\n\");",
          "new_line_content": "void usage() {",
          "content_same": false
        },
        {
          "line": 2640,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(1024*16)",
          "new_text": null,
          "old_line_content": "    char *buf = zmalloc(1024*16);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2646,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(buf,1024*16,ascii_logo,\n        REDIS_VERSION,\n        redisGitSHA1(),\n        strtol(redisGitDirty(),NULL,10) > 0,\n        (sizeof(long) == 8) ? \"64\" : \"32\",\n        mode, server.port,\n        (long) getpid()\n    )",
          "new_text": null,
          "old_line_content": "    snprintf(buf,1024*16,ascii_logo,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2648,
          "old_api": "redisGitSHA1",
          "new_api": null,
          "old_text": "redisGitSHA1()",
          "new_text": null,
          "old_line_content": "        redisGitSHA1(),",
          "new_line_content": "    else if (server.sentinel_mode) mode = \"sentinel\";",
          "content_same": false
        },
        {
          "line": 2649,
          "old_api": "redisGitDirty",
          "new_api": null,
          "old_text": "redisGitDirty()",
          "new_text": null,
          "old_line_content": "        strtol(redisGitDirty(),NULL,10) > 0,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2654,
          "old_api": "redisLogRaw",
          "new_api": null,
          "old_text": "redisLogRaw(REDIS_NOTICE|REDIS_LOG_RAW,buf)",
          "new_text": null,
          "old_line_content": "    redisLogRaw(REDIS_NOTICE|REDIS_LOG_RAW,buf);",
          "new_line_content": "        (sizeof(long) == 8) ? \"64\" : \"32\",",
          "content_same": false
        },
        {
          "line": 2655,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(buf)",
          "new_text": null,
          "old_line_content": "    zfree(buf);",
          "new_line_content": "        mode, server.port,",
          "content_same": false
        },
        {
          "line": 2661,
          "old_api": "redisLogFromHandler",
          "new_api": null,
          "old_text": "redisLogFromHandler(REDIS_WARNING,\"Received SIGTERM, scheduling shutdown...\")",
          "new_text": null,
          "old_line_content": "    redisLogFromHandler(REDIS_WARNING,\"Received SIGTERM, scheduling shutdown...\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2670,
          "old_api": "sigemptyset",
          "new_api": null,
          "old_text": "sigemptyset(&act.sa_mask)",
          "new_text": null,
          "old_line_content": "    sigemptyset(&act.sa_mask);",
          "new_line_content": "    struct sigaction act;",
          "content_same": false
        },
        {
          "line": 2673,
          "old_api": "sigaction",
          "new_api": null,
          "old_text": "sigaction(SIGTERM, &act, NULL)",
          "new_text": null,
          "old_line_content": "    sigaction(SIGTERM, &act, NULL);",
          "new_line_content": "     * Otherwise, sa_handler is used. */",
          "content_same": false
        },
        {
          "line": 2676,
          "old_api": "sigemptyset",
          "new_api": null,
          "old_text": "sigemptyset(&act.sa_mask)",
          "new_text": null,
          "old_line_content": "    sigemptyset(&act.sa_mask);",
          "new_line_content": "    act.sa_handler = sigtermHandler;",
          "content_same": false
        },
        {
          "line": 2679,
          "old_api": "sigaction",
          "new_api": null,
          "old_text": "sigaction(SIGSEGV, &act, NULL)",
          "new_text": null,
          "old_line_content": "    sigaction(SIGSEGV, &act, NULL);",
          "new_line_content": "#ifdef HAVE_BACKTRACE",
          "content_same": false
        },
        {
          "line": 2681,
          "old_api": "sigaction",
          "new_api": null,
          "old_text": "sigaction(SIGFPE, &act, NULL)",
          "new_text": null,
          "old_line_content": "    sigaction(SIGFPE, &act, NULL);",
          "new_line_content": "    act.sa_flags = SA_NODEFER | SA_RESETHAND | SA_SIGINFO;",
          "content_same": false
        },
        {
          "line": 2682,
          "old_api": "sigaction",
          "new_api": null,
          "old_text": "sigaction(SIGILL, &act, NULL)",
          "new_text": null,
          "old_line_content": "    sigaction(SIGILL, &act, NULL);",
          "new_line_content": "    act.sa_sigaction = sigsegvHandler;",
          "content_same": false
        },
        {
          "line": 2694,
          "old_api": "strstr",
          "new_api": null,
          "old_text": "strstr(argv[0],\"redis-sentinel\")",
          "new_text": null,
          "old_line_content": "    if (strstr(argv[0],\"redis-sentinel\") != NULL) return 1;",
          "new_line_content": " * argv[0] is exactly \"redis-sentinel\". */",
          "content_same": false
        },
        {
          "line": 2696,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(argv[j],\"--sentinel\")",
          "new_text": null,
          "old_line_content": "        if (!strcmp(argv[j],\"--sentinel\")) return 1;",
          "new_line_content": "    int j;",
          "content_same": false
        },
        {
          "line": 2702,
          "old_api": "ustime",
          "new_api": null,
          "old_text": "ustime()",
          "new_text": null,
          "old_line_content": "    long long start = ustime();",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2704,
          "old_api": "loadAppendOnlyFile",
          "new_api": null,
          "old_text": "loadAppendOnlyFile(server.aof_filename)",
          "new_text": null,
          "old_line_content": "        if (loadAppendOnlyFile(server.aof_filename) == REDIS_OK)",
          "new_line_content": "/* Function called at startup to load RDB or AOF file in memory. */",
          "content_same": false
        },
        {
          "line": 2705,
          "old_api": "ustime",
          "new_api": null,
          "old_text": "ustime()",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_NOTICE,\"DB loaded from append only file: %.3f seconds\",(float)(ustime()-start)/1000000);",
          "new_line_content": "void loadDataFromDisk(void) {",
          "content_same": false
        },
        {
          "line": 2707,
          "old_api": "rdbLoad",
          "new_api": null,
          "old_text": "rdbLoad(server.rdb_filename)",
          "new_text": null,
          "old_line_content": "        if (rdbLoad(server.rdb_filename) == REDIS_OK) {",
          "new_line_content": "    if (server.aof_state == REDIS_AOF_ON) {",
          "content_same": false
        },
        {
          "line": 2718,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"Out Of Memory allocating %zu bytes!\",\n        allocation_size)",
          "new_text": null,
          "old_line_content": "    redisLog(REDIS_WARNING,\"Out Of Memory allocating %zu bytes!\",",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2720,
          "old_api": "redisPanic",
          "new_api": null,
          "old_text": "redisPanic(\"OOM\")",
          "new_text": null,
          "old_line_content": "    redisPanic(\"OOM\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 674,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(db->expires)",
          "new_text": null,
          "old_line_content": "            unsigned long num = dictSize(db->expires);",
          "new_line_content": "            unsigned long num, slots;",
          "content_same": false
        },
        {
          "line": 675,
          "old_api": "dictSlots",
          "new_api": null,
          "old_text": "dictSlots(db->expires)",
          "new_text": null,
          "old_line_content": "            unsigned long slots = dictSlots(db->expires);",
          "new_line_content": "            long long now;",
          "content_same": false
        },
        {
          "line": 676,
          "old_api": "mstime",
          "new_api": null,
          "old_text": "mstime()",
          "new_text": null,
          "old_line_content": "            long long now = mstime();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2725,
          "old_api": "setproctitle",
          "new_api": null,
          "old_text": "setproctitle(\"%s %s:%d\",\n        title,\n        server.bindaddr ? server.bindaddr : \"*\",\n        server.port)",
          "new_text": null,
          "old_line_content": "    setproctitle(\"%s %s:%d\",",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2730,
          "old_api": "REDIS_NOTUSED",
          "new_api": null,
          "old_text": "REDIS_NOTUSED(title)",
          "new_text": null,
          "old_line_content": "    REDIS_NOTUSED(title);",
          "new_line_content": "        title,",
          "content_same": false
        },
        {
          "line": 2739,
          "old_api": "spt_init",
          "new_api": null,
          "old_text": "spt_init(argc, argv)",
          "new_text": null,
          "old_line_content": "    spt_init(argc, argv);",
          "new_line_content": "    struct timeval tv;",
          "content_same": false
        },
        {
          "line": 693,
          "old_api": "dictGetRandomKey",
          "new_api": null,
          "old_text": "dictGetRandomKey(db->expires)",
          "new_text": null,
          "old_line_content": "                if ((de = dictGetRandomKey(db->expires)) == NULL) break;",
          "new_line_content": "            while (num--) {",
          "content_same": false
        },
        {
          "line": 694,
          "old_api": "dictGetSignedIntegerVal",
          "new_api": null,
          "old_text": "dictGetSignedIntegerVal(de)",
          "new_text": null,
          "old_line_content": "                t = dictGetSignedIntegerVal(de);",
          "new_line_content": "                dictEntry *de;",
          "content_same": false
        },
        {
          "line": 2741,
          "old_api": "zmalloc_enable_thread_safeness",
          "new_api": null,
          "old_text": "zmalloc_enable_thread_safeness()",
          "new_text": null,
          "old_line_content": "    zmalloc_enable_thread_safeness();",
          "new_line_content": "    /* We need to initialize our libraries, and the server configuration. */",
          "content_same": false
        },
        {
          "line": 696,
          "old_api": "dictGetKey",
          "new_api": null,
          "old_text": "dictGetKey(de)",
          "new_text": null,
          "old_line_content": "                    sds key = dictGetKey(de);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2742,
          "old_api": "zmalloc_set_oom_handler",
          "new_api": null,
          "old_text": "zmalloc_set_oom_handler(redisOutOfMemoryHandler)",
          "new_text": null,
          "old_line_content": "    zmalloc_set_oom_handler(redisOutOfMemoryHandler);",
          "new_line_content": "#ifdef INIT_SETPROCTITLE_REPLACEMENT",
          "content_same": false
        },
        {
          "line": 2744,
          "old_api": "gettimeofday",
          "new_api": null,
          "old_text": "gettimeofday(&tv,NULL)",
          "new_text": null,
          "old_line_content": "    gettimeofday(&tv,NULL);",
          "new_line_content": "#endif",
          "content_same": false
        },
        {
          "line": 699,
          "old_api": "propagateExpire",
          "new_api": null,
          "old_text": "propagateExpire(db,keyobj)",
          "new_text": null,
          "old_line_content": "                    propagateExpire(db,keyobj);",
          "new_line_content": "                if (now > t) {",
          "content_same": false
        },
        {
          "line": 2753,
          "old_api": "initSentinelConfig",
          "new_api": null,
          "old_text": "initSentinelConfig()",
          "new_text": null,
          "old_line_content": "        initSentinelConfig();",
          "new_line_content": "    /* We need to init sentinel right now as parsing the configuration file",
          "content_same": false
        },
        {
          "line": 2754,
          "old_api": "initSentinel",
          "new_api": null,
          "old_text": "initSentinel()",
          "new_text": null,
          "old_line_content": "        initSentinel();",
          "new_line_content": "     * in sentinel mode will have the effect of populating the sentinel",
          "content_same": false
        },
        {
          "line": 2759,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "        sds options = sdsempty();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 713,
          "old_api": "ustime",
          "new_api": null,
          "old_text": "ustime()",
          "new_text": null,
          "old_line_content": "                (ustime()-start) > timelimit) return;",
          "new_line_content": "             * expire. So after a given amount of milliseconds return to the",
          "content_same": false
        },
        {
          "line": 2764,
          "old_api": "version",
          "new_api": null,
          "old_text": "version()",
          "new_text": null,
          "old_line_content": "            strcmp(argv[1], \"--version\") == 0) version();",
          "new_line_content": "        char *configfile = NULL;",
          "content_same": false
        },
        {
          "line": 2765,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(argv[1], \"--help\")",
          "new_text": null,
          "old_line_content": "        if (strcmp(argv[1], \"--help\") == 0 ||",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2766,
          "old_api": "usage",
          "new_api": null,
          "old_text": "usage()",
          "new_text": null,
          "old_line_content": "            strcmp(argv[1], \"-h\") == 0) usage();",
          "new_line_content": "        /* Handle special options --help and --version */",
          "content_same": false
        },
        {
          "line": 2772,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr,\"Please specify the amount of memory to test in megabytes.\\n\")",
          "new_text": null,
          "old_line_content": "                fprintf(stderr,\"Please specify the amount of memory to test in megabytes.\\n\");",
          "new_line_content": "            if (argc == 3) {",
          "content_same": false
        },
        {
          "line": 726,
          "old_api": "mstime",
          "new_api": null,
          "old_text": "mstime()",
          "new_text": null,
          "old_line_content": "    long long t = mstime() - server.ops_sec_last_sample_time;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 734,
          "old_api": "mstime",
          "new_api": null,
          "old_text": "mstime()",
          "new_text": null,
          "old_line_content": "    server.ops_sec_last_sample_time = mstime();",
          "new_line_content": "    ops_sec = t > 0 ? (ops*1000/t) : 0;",
          "content_same": false
        },
        {
          "line": 2788,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(options,\"\\n\")",
          "new_text": null,
          "old_line_content": "                if (sdslen(options)) options = sdscat(options,\"\\n\");",
          "new_line_content": "         * is parsed, if any. */",
          "content_same": false
        },
        {
          "line": 2789,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(options,argv[j]+2)",
          "new_text": null,
          "old_line_content": "                options = sdscat(options,argv[j]+2);",
          "new_line_content": "        while(j != argc) {",
          "content_same": false
        },
        {
          "line": 2790,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(options,\" \")",
          "new_text": null,
          "old_line_content": "                options = sdscat(options,\" \");",
          "new_line_content": "            if (argv[j][0] == '-' && argv[j][1] == '-') {",
          "content_same": false
        },
        {
          "line": 2799,
          "old_api": "loadServerConfig",
          "new_api": null,
          "old_text": "loadServerConfig(configfile,options)",
          "new_text": null,
          "old_line_content": "        loadServerConfig(configfile,options);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 2800,
          "old_api": "sdsfree",
          "new_api": null,
          "old_text": "sdsfree(options)",
          "new_text": null,
          "old_line_content": "        sdsfree(options);",
          "new_line_content": "            j++;",
          "content_same": false
        },
        {
          "line": 756,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(c->pubsub_channels)",
          "new_text": null,
          "old_line_content": "        dictSize(c->pubsub_channels) == 0 && /* no timeout for pubsub */",
          "new_line_content": "    if (server.maxidletime &&",
          "content_same": false
        },
        {
          "line": 757,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(c->pubsub_patterns)",
          "new_text": null,
          "old_line_content": "        listLength(c->pubsub_patterns) == 0 &&",
          "new_line_content": "        !(c->flags & REDIS_SLAVE) &&    /* no timeout for slaves */",
          "content_same": false
        },
        {
          "line": 2805,
          "old_api": "initServer",
          "new_api": null,
          "old_text": "initServer()",
          "new_text": null,
          "old_line_content": "    initServer();",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 2807,
          "old_api": "redisSetProcTitle",
          "new_api": null,
          "old_text": "redisSetProcTitle(argv[0])",
          "new_text": null,
          "old_line_content": "    redisSetProcTitle(argv[0]);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 766,
          "old_api": "unblockClientWaitingData",
          "new_api": null,
          "old_text": "unblockClientWaitingData(c)",
          "new_text": null,
          "old_line_content": "            unblockClientWaitingData(c);",
          "new_line_content": "        return 1;",
          "content_same": false
        },
        {
          "line": 2814,
          "old_api": "linuxOvercommitMemoryWarning",
          "new_api": null,
          "old_text": "linuxOvercommitMemoryWarning()",
          "new_text": null,
          "old_line_content": "        linuxOvercommitMemoryWarning();",
          "new_line_content": "    if (!server.sentinel_mode) {",
          "content_same": false
        },
        {
          "line": 2819,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\n                    \"You can't have keys in a DB different than DB 0 when in \"\n                    \"Cluster mode. Exiting.\")",
          "new_text": null,
          "old_line_content": "                redisLog(REDIS_WARNING,",
          "new_line_content": "    #endif",
          "content_same": false
        },
        {
          "line": 777,
          "old_api": "sdsAllocSize",
          "new_api": null,
          "old_text": "sdsAllocSize(c->querybuf)",
          "new_text": null,
          "old_line_content": "    size_t querybuf_size = sdsAllocSize(c->querybuf);",
          "new_line_content": " * free space not used, this function reclaims space if needed.",
          "content_same": false
        },
        {
          "line": 2828,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_NOTICE,\"The server is now ready to accept connections at %s\", server.unixsocket)",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_NOTICE,\"The server is now ready to accept connections at %s\", server.unixsocket);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2833,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"WARNING: You specified a maxmemory value that is less than 1MB (current value is %llu bytes). Are you sure this is what you really want?\", server.maxmemory)",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING,\"WARNING: You specified a maxmemory value that is less than 1MB (current value is %llu bytes). Are you sure this is what you really want?\", server.maxmemory);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 788,
          "old_api": "sdsavail",
          "new_api": null,
          "old_text": "sdsavail(c->querybuf)",
          "new_text": null,
          "old_line_content": "        if (sdsavail(c->querybuf) > 1024) {",
          "new_line_content": "         (querybuf_size/(c->querybuf_peak+1)) > 2) ||",
          "content_same": false
        },
        {
          "line": 789,
          "old_api": "sdsRemoveFreeSpace",
          "new_api": null,
          "old_text": "sdsRemoveFreeSpace(c->querybuf)",
          "new_text": null,
          "old_line_content": "            c->querybuf = sdsRemoveFreeSpace(c->querybuf);",
          "new_line_content": "         (querybuf_size > 1024 && idletime > 2))",
          "content_same": false
        },
        {
          "line": 2836,
          "old_api": "aeSetBeforeSleepProc",
          "new_api": null,
          "old_text": "aeSetBeforeSleepProc(server.el,beforeSleep)",
          "new_text": null,
          "old_line_content": "    aeSetBeforeSleepProc(server.el,beforeSleep);",
          "new_line_content": "    if (server.maxmemory > 0 && server.maxmemory < 1024*1024) {",
          "content_same": false
        },
        {
          "line": 2838,
          "old_api": "aeDeleteEventLoop",
          "new_api": null,
          "old_text": "aeDeleteEventLoop(server.el)",
          "new_text": null,
          "old_line_content": "    aeDeleteEventLoop(server.el);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 804,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.clients)",
          "new_text": null,
          "old_line_content": "    int numclients = listLength(server.clients);",
          "new_line_content": "     * Since this function is called server.hz times per second we are sure that",
          "content_same": false
        },
        {
          "line": 809,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.clients)",
          "new_text": null,
          "old_line_content": "    while(listLength(server.clients) && iterations--) {",
          "new_line_content": "    int iterations = numclients/(server.hz*10);",
          "content_same": false
        },
        {
          "line": 816,
          "old_api": "listRotate",
          "new_api": null,
          "old_text": "listRotate(server.clients)",
          "new_text": null,
          "old_line_content": "        listRotate(server.clients);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 817,
          "old_api": "listFirst",
          "new_api": null,
          "old_text": "listFirst(server.clients)",
          "new_text": null,
          "old_line_content": "        head = listFirst(server.clients);",
          "new_line_content": "        /* Rotate the list, take the current head, process.",
          "content_same": false
        },
        {
          "line": 818,
          "old_api": "listNodeValue",
          "new_api": null,
          "old_text": "listNodeValue(head)",
          "new_text": null,
          "old_line_content": "        c = listNodeValue(head);",
          "new_line_content": "         * This way if the client must be removed from the list it's the",
          "content_same": false
        },
        {
          "line": 823,
          "old_api": "clientsCronResizeQueryBuffer",
          "new_api": null,
          "old_text": "clientsCronResizeQueryBuffer(c)",
          "new_text": null,
          "old_line_content": "        if (clientsCronResizeQueryBuffer(c)) continue;",
          "new_line_content": "        /* The following functions do different service checks on the client.",
          "content_same": false
        },
        {
          "line": 833,
          "old_api": "activeExpireCycle",
          "new_api": null,
          "old_text": "activeExpireCycle()",
          "new_text": null,
          "old_line_content": "    if (server.masterhost == NULL) activeExpireCycle();",
          "new_line_content": " * rehashing. */",
          "content_same": false
        },
        {
          "line": 848,
          "old_api": "tryResizeHashTables",
          "new_api": null,
          "old_text": "tryResizeHashTables(resize_db % server.dbnum)",
          "new_text": null,
          "old_line_content": "            tryResizeHashTables(resize_db % server.dbnum);",
          "new_line_content": "        unsigned int j;",
          "content_same": false
        },
        {
          "line": 855,
          "old_api": "incrementallyRehash",
          "new_api": null,
          "old_text": "incrementallyRehash(rehash_db % server.dbnum)",
          "new_text": null,
          "old_line_content": "                int work_done = incrementallyRehash(rehash_db % server.dbnum);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 888,
          "old_api": "REDIS_NOTUSED",
          "new_api": null,
          "old_text": "REDIS_NOTUSED(eventLoop)",
          "new_text": null,
          "old_line_content": "    REDIS_NOTUSED(eventLoop);",
          "new_line_content": " */",
          "content_same": false
        },
        {
          "line": 889,
          "old_api": "REDIS_NOTUSED",
          "new_api": null,
          "old_text": "REDIS_NOTUSED(id)",
          "new_text": null,
          "old_line_content": "    REDIS_NOTUSED(id);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 890,
          "old_api": "REDIS_NOTUSED",
          "new_api": null,
          "old_text": "REDIS_NOTUSED(clientData)",
          "new_text": null,
          "old_line_content": "    REDIS_NOTUSED(clientData);",
          "new_line_content": "int serverCron(struct aeEventLoop *eventLoop, long long id, void *clientData) {",
          "content_same": false
        },
        {
          "line": 900,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "    server.unixtime = time(NULL);",
          "new_line_content": "    /* We take a cached value of the unix time in the global state because",
          "content_same": false
        },
        {
          "line": 902,
          "old_api": "trackOperationsPerSecond",
          "new_api": null,
          "old_text": "trackOperationsPerSecond()",
          "new_text": null,
          "old_line_content": "    run_with_period(100) trackOperationsPerSecond();",
          "new_line_content": "     * in objects at every object access, and accuracy is not needed.",
          "content_same": false
        },
        {
          "line": 916,
          "old_api": "updateLRUClock",
          "new_api": null,
          "old_text": "updateLRUClock()",
          "new_text": null,
          "old_line_content": "    updateLRUClock();",
          "new_line_content": "     *",
          "content_same": false
        },
        {
          "line": 919,
          "old_api": "zmalloc_used_memory",
          "new_api": null,
          "old_text": "zmalloc_used_memory()",
          "new_text": null,
          "old_line_content": "    if (zmalloc_used_memory() > server.stat_peak_memory)",
          "new_line_content": "     */",
          "content_same": false
        },
        {
          "line": 925,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(0)",
          "new_text": null,
          "old_line_content": "        if (prepareForShutdown(0) == REDIS_OK) exit(0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 926,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"SIGTERM received but errors trying to shut down the server, check the logs for more information\")",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING,\"SIGTERM received but errors trying to shut down the server, check the logs for more information\");",
          "new_line_content": "    /* We received a SIGTERM, shutting down here in a safe way, as it is",
          "content_same": false
        },
        {
          "line": 931,
          "old_api": "run_with_period",
          "new_api": null,
          "old_text": "run_with_period(5000)",
          "new_text": null,
          "old_line_content": "    run_with_period(5000) {",
          "new_line_content": "        server.shutdown_asap = 0;",
          "content_same": false
        },
        {
          "line": 936,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(server.db[j].dict)",
          "new_text": null,
          "old_line_content": "            used = dictSize(server.db[j].dict);",
          "new_line_content": "        for (j = 0; j < server.dbnum; j++) {",
          "content_same": false
        },
        {
          "line": 937,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(server.db[j].expires)",
          "new_text": null,
          "old_line_content": "            vkeys = dictSize(server.db[j].expires);",
          "new_line_content": "            long long size, used, vkeys;",
          "content_same": false
        },
        {
          "line": 947,
          "old_api": "run_with_period",
          "new_api": null,
          "old_text": "run_with_period(5000)",
          "new_text": null,
          "old_line_content": "        run_with_period(5000) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 948,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_VERBOSE,\n                \"%lu clients connected (%lu slaves), %zu bytes in use\",\n                listLength(server.clients)-listLength(server.slaves),\n                listLength(server.slaves),\n                zmalloc_used_memory())",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_VERBOSE,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 950,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.slaves)",
          "new_text": null,
          "old_line_content": "                listLength(server.clients)-listLength(server.slaves),",
          "new_line_content": "    if (!server.sentinel_mode) {",
          "content_same": false
        },
        {
          "line": 957,
          "old_api": "clientsCron",
          "new_api": null,
          "old_text": "clientsCron()",
          "new_text": null,
          "old_line_content": "    clientsCron();",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 960,
          "old_api": "databasesCron",
          "new_api": null,
          "old_text": "databasesCron()",
          "new_text": null,
          "old_line_content": "    databasesCron();",
          "new_line_content": "    /* We need to do a few operations on clients asynchronously. */",
          "content_same": false
        },
        {
          "line": 967,
          "old_api": "rewriteAppendOnlyFileBackground",
          "new_api": null,
          "old_text": "rewriteAppendOnlyFileBackground()",
          "new_text": null,
          "old_line_content": "        rewriteAppendOnlyFileBackground();",
          "new_line_content": "     * a BGSAVE was in progress. */",
          "content_same": false
        },
        {
          "line": 975,
          "old_api": "wait3",
          "new_api": null,
          "old_text": "wait3(&statloc,WNOHANG,NULL)",
          "new_text": null,
          "old_line_content": "        if ((pid = wait3(&statloc,WNOHANG,NULL)) != 0) {",
          "new_line_content": "    if (server.rdb_child_pid != -1 || server.aof_child_pid != -1) {",
          "content_same": false
        },
        {
          "line": 976,
          "old_api": "WEXITSTATUS",
          "new_api": null,
          "old_text": "WEXITSTATUS(statloc)",
          "new_text": null,
          "old_line_content": "            int exitcode = WEXITSTATUS(statloc);",
          "new_line_content": "        int statloc;",
          "content_same": false
        },
        {
          "line": 982,
          "old_api": "backgroundSaveDoneHandler",
          "new_api": null,
          "old_text": "backgroundSaveDoneHandler(exitcode,bysignal)",
          "new_text": null,
          "old_line_content": "                backgroundSaveDoneHandler(exitcode,bysignal);",
          "new_line_content": "            ",
          "content_same": false
        },
        {
          "line": 984,
          "old_api": "backgroundRewriteDoneHandler",
          "new_api": null,
          "old_text": "backgroundRewriteDoneHandler(exitcode,bysignal)",
          "new_text": null,
          "old_line_content": "                backgroundRewriteDoneHandler(exitcode,bysignal);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1000,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_NOTICE,\"%d changes in %d seconds. Saving...\",\n                    sp->changes, (int)sp->seconds)",
          "new_text": null,
          "old_line_content": "                redisLog(REDIS_NOTICE,\"%d changes in %d seconds. Saving...\",",
          "new_line_content": "            struct saveparam *sp = server.saveparams+j;",
          "content_same": false
        },
        {
          "line": 1002,
          "old_api": "rdbSaveBackground",
          "new_api": null,
          "old_text": "rdbSaveBackground(server.rdb_filename)",
          "new_text": null,
          "old_line_content": "                rdbSaveBackground(server.rdb_filename);",
          "new_line_content": "            if (server.dirty >= sp->changes &&",
          "content_same": false
        },
        {
          "line": 1017,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_NOTICE,\"Starting automatic rewriting of AOF on %lld%% growth\",growth)",
          "new_text": null,
          "old_line_content": "                redisLog(REDIS_NOTICE,\"Starting automatic rewriting of AOF on %lld%% growth\",growth);",
          "new_line_content": "            long long base = server.aof_rewrite_base_size ?",
          "content_same": false
        },
        {
          "line": 1018,
          "old_api": "rewriteAppendOnlyFileBackground",
          "new_api": null,
          "old_text": "rewriteAppendOnlyFileBackground()",
          "new_text": null,
          "old_line_content": "                rewriteAppendOnlyFileBackground();",
          "new_line_content": "                            server.aof_rewrite_base_size : 1;",
          "content_same": false
        },
        {
          "line": 1026,
          "old_api": "flushAppendOnlyFile",
          "new_api": null,
          "old_text": "flushAppendOnlyFile(0)",
          "new_text": null,
          "old_line_content": "    if (server.aof_flush_postponed_start) flushAppendOnlyFile(0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1029,
          "old_api": "freeClientsInAsyncFreeQueue",
          "new_api": null,
          "old_text": "freeClientsInAsyncFreeQueue()",
          "new_text": null,
          "old_line_content": "    freeClientsInAsyncFreeQueue();",
          "new_line_content": "     * cron function is called. */",
          "content_same": false
        },
        {
          "line": 1036,
          "old_api": "run_with_period",
          "new_api": null,
          "old_text": "run_with_period(1000)",
          "new_text": null,
          "old_line_content": "    run_with_period(1000) {",
          "new_line_content": "     * to detect transfer failures. */",
          "content_same": false
        },
        {
          "line": 1042,
          "old_api": "sentinelTimer",
          "new_api": null,
          "old_text": "sentinelTimer()",
          "new_text": null,
          "old_line_content": "        if (server.sentinel_mode) sentinelTimer();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1047,
          "old_api": "migrateCloseTimedoutSockets",
          "new_api": null,
          "old_text": "migrateCloseTimedoutSockets()",
          "new_text": null,
          "old_line_content": "        migrateCloseTimedoutSockets();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1058,
          "old_api": "REDIS_NOTUSED",
          "new_api": null,
          "old_text": "REDIS_NOTUSED(eventLoop)",
          "new_text": null,
          "old_line_content": "    REDIS_NOTUSED(eventLoop);",
          "new_line_content": "/* This function gets called every time Redis is entering the",
          "content_same": false
        },
        {
          "line": 1063,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.unblocked_clients)",
          "new_text": null,
          "old_line_content": "    while (listLength(server.unblocked_clients)) {",
          "new_line_content": "    listNode *ln;",
          "content_same": false
        },
        {
          "line": 1064,
          "old_api": "listFirst",
          "new_api": null,
          "old_text": "listFirst(server.unblocked_clients)",
          "new_text": null,
          "old_line_content": "        ln = listFirst(server.unblocked_clients);",
          "new_line_content": "    redisClient *c;",
          "content_same": false
        },
        {
          "line": 1065,
          "old_api": "redisAssert",
          "new_api": null,
          "old_text": "redisAssert(ln != NULL)",
          "new_text": null,
          "old_line_content": "        redisAssert(ln != NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1073,
          "old_api": "processInputBuffer",
          "new_api": null,
          "old_text": "processInputBuffer(c)",
          "new_text": null,
          "old_line_content": "            processInputBuffer(c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1079,
          "old_api": "flushAppendOnlyFile",
          "new_api": null,
          "old_text": "flushAppendOnlyFile(0)",
          "new_text": null,
          "old_line_content": "    flushAppendOnlyFile(0);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1087,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\"\\r\\n\")",
          "new_text": null,
          "old_line_content": "    shared.crlf = createObject(REDIS_STRING,sdsnew(\"\\r\\n\"));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1088,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\"+OK\\r\\n\")",
          "new_text": null,
          "old_line_content": "    shared.ok = createObject(REDIS_STRING,sdsnew(\"+OK\\r\\n\"));",
          "new_line_content": "void createSharedObjects(void) {",
          "content_same": false
        },
        {
          "line": 1089,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\"-ERR\\r\\n\")",
          "new_text": null,
          "old_line_content": "    shared.err = createObject(REDIS_STRING,sdsnew(\"-ERR\\r\\n\"));",
          "new_line_content": "    int j;",
          "content_same": false
        },
        {
          "line": 1090,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\"$0\\r\\n\\r\\n\")",
          "new_text": null,
          "old_line_content": "    shared.emptybulk = createObject(REDIS_STRING,sdsnew(\"$0\\r\\n\\r\\n\"));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1128,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\":\")",
          "new_text": null,
          "old_line_content": "    shared.colon = createObject(REDIS_STRING,sdsnew(\":\"));",
          "new_line_content": "        \"-OOM command not allowed when used memory > 'maxmemory'.\\r\\n\"));",
          "content_same": false
        },
        {
          "line": 1135,
          "old_api": "ll2string",
          "new_api": null,
          "old_text": "ll2string(dictid_str,sizeof(dictid_str),j)",
          "new_text": null,
          "old_line_content": "        dictid_len = ll2string(dictid_str,sizeof(dictid_str),j);",
          "new_line_content": "    for (j = 0; j < REDIS_SHARED_SELECT_CMDS; j++) {",
          "content_same": false
        },
        {
          "line": 1136,
          "old_api": "createObject",
          "new_api": null,
          "old_text": "createObject(REDIS_STRING,\n            sdscatprintf(sdsempty(),\n                \"*2\\r\\n$6\\r\\nSELECT\\r\\n$%d\\r\\n%s\\r\\n\",\n                dictid_len, dictid_str))",
          "new_text": null,
          "old_line_content": "        shared.select[j] = createObject(REDIS_STRING,",
          "new_line_content": "        char dictid_str[64];",
          "content_same": false
        },
        {
          "line": 1137,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "            sdscatprintf(sdsempty(),",
          "new_line_content": "        int dictid_len;",
          "content_same": false
        },
        {
          "line": 1142,
          "old_api": "createStringObject",
          "new_api": null,
          "old_text": "createStringObject(\"$8\\r\\npmessage\\r\\n\",14)",
          "new_text": null,
          "old_line_content": "    shared.pmessagebulk = createStringObject(\"$8\\r\\npmessage\\r\\n\",14);",
          "new_line_content": "                \"*2\\r\\n$6\\r\\nSELECT\\r\\n$%d\\r\\n%s\\r\\n\",",
          "content_same": false
        },
        {
          "line": 1143,
          "old_api": "createStringObject",
          "new_api": null,
          "old_text": "createStringObject(\"$9\\r\\nsubscribe\\r\\n\",15)",
          "new_text": null,
          "old_line_content": "    shared.subscribebulk = createStringObject(\"$9\\r\\nsubscribe\\r\\n\",15);",
          "new_line_content": "                dictid_len, dictid_str));",
          "content_same": false
        },
        {
          "line": 1144,
          "old_api": "createStringObject",
          "new_api": null,
          "old_text": "createStringObject(\"$11\\r\\nunsubscribe\\r\\n\",18)",
          "new_text": null,
          "old_line_content": "    shared.unsubscribebulk = createStringObject(\"$11\\r\\nunsubscribe\\r\\n\",18);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1157,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "            sdscatprintf(sdsempty(),\"*%d\\r\\n\",j));",
          "new_line_content": "        shared.integers[j]->encoding = REDIS_ENCODING_INT;",
          "content_same": false
        },
        {
          "line": 1158,
          "old_api": "createObject",
          "new_api": null,
          "old_text": "createObject(REDIS_STRING,\n            sdscatprintf(sdsempty(),\"$%d\\r\\n\",j))",
          "new_text": null,
          "old_line_content": "        shared.bulkhdr[j] = createObject(REDIS_STRING,",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1159,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "            sdscatprintf(sdsempty(),\"$%d\\r\\n\",j));",
          "new_line_content": "    for (j = 0; j < REDIS_SHARED_BULKHDR_LEN; j++) {",
          "content_same": false
        },
        {
          "line": 1164,
          "old_api": "getRandomHexChars",
          "new_api": null,
          "old_text": "getRandomHexChars(server.runid,REDIS_RUN_ID_SIZE)",
          "new_text": null,
          "old_line_content": "    getRandomHexChars(server.runid,REDIS_RUN_ID_SIZE);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1183,
          "old_api": "zstrdup",
          "new_api": null,
          "old_text": "zstrdup(\"redis\")",
          "new_text": null,
          "old_line_content": "    server.syslog_ident = zstrdup(\"redis\");",
          "new_line_content": "    server.saveparams = NULL;",
          "content_same": false
        },
        {
          "line": 1193,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "    server.aof_last_fsync = time(NULL);",
          "new_line_content": "    server.aof_rewrite_perc = REDIS_AOF_REWRITE_PERC;",
          "content_same": false
        },
        {
          "line": 1201,
          "old_api": "zstrdup",
          "new_api": null,
          "old_text": "zstrdup(\"/var/run/redis.pid\")",
          "new_text": null,
          "old_line_content": "    server.pidfile = zstrdup(\"/var/run/redis.pid\");",
          "new_line_content": "    server.aof_delayed_fsync = 0;",
          "content_same": false
        },
        {
          "line": 1202,
          "old_api": "zstrdup",
          "new_api": null,
          "old_text": "zstrdup(\"dump.rdb\")",
          "new_text": null,
          "old_line_content": "    server.rdb_filename = zstrdup(\"dump.rdb\");",
          "new_line_content": "    server.aof_fd = -1;",
          "content_same": false
        },
        {
          "line": 1203,
          "old_api": "zstrdup",
          "new_api": null,
          "old_text": "zstrdup(\"appendonly.aof\")",
          "new_text": null,
          "old_line_content": "    server.aof_filename = zstrdup(\"appendonly.aof\");",
          "new_line_content": "    server.aof_selected_db = -1; /* Make sure the first time will not match */",
          "content_same": false
        },
        {
          "line": 1225,
          "old_api": "zstrdup",
          "new_api": null,
          "old_text": "zstrdup(\"nodes.conf\")",
          "new_text": null,
          "old_line_content": "    server.cluster_configfile = zstrdup(\"nodes.conf\");",
          "new_line_content": "    server.shutdown_asap = 0;",
          "content_same": false
        },
        {
          "line": 1230,
          "old_api": "dictCreate",
          "new_api": null,
          "old_text": "dictCreate(&migrateCacheDictType,NULL)",
          "new_text": null,
          "old_line_content": "    server.migrate_cached_sockets = dictCreate(&migrateCacheDictType,NULL);",
          "new_line_content": "    server.lua_caller = NULL;",
          "content_same": false
        },
        {
          "line": 1232,
          "old_api": "updateLRUClock",
          "new_api": null,
          "old_text": "updateLRUClock()",
          "new_text": null,
          "old_line_content": "    updateLRUClock();",
          "new_line_content": "    server.lua_client = NULL;",
          "content_same": false
        },
        {
          "line": 1233,
          "old_api": "resetServerSaveParams",
          "new_api": null,
          "old_text": "resetServerSaveParams()",
          "new_text": null,
          "old_line_content": "    resetServerSaveParams();",
          "new_line_content": "    server.lua_timedout = 0;",
          "content_same": false
        },
        {
          "line": 1235,
          "old_api": "appendServerSaveParams",
          "new_api": null,
          "old_text": "appendServerSaveParams(60*60,1)",
          "new_text": null,
          "old_line_content": "    appendServerSaveParams(60*60,1);  /* save after 1 hour and 1 change */",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1249,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "    server.repl_down_since = time(NULL);",
          "new_line_content": "    server.repl_state = REDIS_REPL_NONE;",
          "content_same": false
        },
        {
          "line": 1261,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "    server.repl_no_slaves_since = time(NULL);",
          "new_line_content": "    server.repl_backlog_histlen = 0;",
          "content_same": false
        },
        {
          "line": 1283,
          "old_api": "dictCreate",
          "new_api": null,
          "old_text": "dictCreate(&commandTableDictType,NULL)",
          "new_text": null,
          "old_line_content": "    server.commands = dictCreate(&commandTableDictType,NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1284,
          "old_api": "dictCreate",
          "new_api": null,
          "old_text": "dictCreate(&commandTableDictType,NULL)",
          "new_text": null,
          "old_line_content": "    server.orig_commands = dictCreate(&commandTableDictType,NULL);",
          "new_line_content": "    /* Command table -- we initiialize it here as it is part of the",
          "content_same": false
        },
        {
          "line": 1285,
          "old_api": "populateCommandTable",
          "new_api": null,
          "old_text": "populateCommandTable()",
          "new_text": null,
          "old_line_content": "    populateCommandTable();",
          "new_line_content": "     * initial configuration, since command names may be changed via",
          "content_same": false
        },
        {
          "line": 1286,
          "old_api": "lookupCommandByCString",
          "new_api": null,
          "old_text": "lookupCommandByCString(\"del\")",
          "new_text": null,
          "old_line_content": "    server.delCommand = lookupCommandByCString(\"del\");",
          "new_line_content": "     * redis.conf using the rename-command directive. */",
          "content_same": false
        },
        {
          "line": 1316,
          "old_api": "getrlimit",
          "new_api": null,
          "old_text": "getrlimit(RLIMIT_NOFILE,&limit)",
          "new_text": null,
          "old_line_content": "    if (getrlimit(RLIMIT_NOFILE,&limit) == -1) {",
          "new_line_content": "void adjustOpenFilesLimit(void) {",
          "content_same": false
        },
        {
          "line": 1317,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"Unable to obtain the current NOFILE limit (%s), assuming 1024 and setting the max clients configuration accordingly.\",\n            strerror(errno))",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING,\"Unable to obtain the current NOFILE limit (%s), assuming 1024 and setting the max clients configuration accordingly.\",",
          "new_line_content": "    rlim_t maxfiles = server.maxclients+32;",
          "content_same": false
        },
        {
          "line": 1318,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "            strerror(errno));",
          "new_line_content": "    struct rlimit limit;",
          "content_same": false
        },
        {
          "line": 1332,
          "old_api": "setrlimit",
          "new_api": null,
          "old_text": "setrlimit(RLIMIT_NOFILE,&limit)",
          "new_text": null,
          "old_line_content": "                if (setrlimit(RLIMIT_NOFILE,&limit) != -1) break;",
          "new_line_content": "            f = maxfiles;",
          "content_same": false
        },
        {
          "line": 1338,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"Unable to set the max number of files limit to %d (%s), setting the max clients configuration to %d.\",\n                    (int) maxfiles, strerror(errno), (int) server.maxclients)",
          "new_text": null,
          "old_line_content": "                redisLog(REDIS_WARNING,\"Unable to set the max number of files limit to %d (%s), setting the max clients configuration to %d.\",",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1339,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "                    (int) maxfiles, strerror(errno), (int) server.maxclients);",
          "new_line_content": "            if (f < oldlimit) f = oldlimit;",
          "content_same": false
        },
        {
          "line": 1341,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_NOTICE,\"Max number of open files set to %d\",\n                    (int) maxfiles)",
          "new_text": null,
          "old_line_content": "                redisLog(REDIS_NOTICE,\"Max number of open files set to %d\",",
          "new_line_content": "                server.maxclients = f-32;",
          "content_same": false
        },
        {
          "line": 1351,
          "old_api": "signal",
          "new_api": null,
          "old_text": "signal(SIGHUP, SIG_IGN)",
          "new_text": null,
          "old_line_content": "    signal(SIGHUP, SIG_IGN);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1352,
          "old_api": "signal",
          "new_api": null,
          "old_text": "signal(SIGPIPE, SIG_IGN)",
          "new_text": null,
          "old_line_content": "    signal(SIGPIPE, SIG_IGN);",
          "new_line_content": "void initServer() {",
          "content_same": false
        },
        {
          "line": 1353,
          "old_api": "setupSignalHandlers",
          "new_api": null,
          "old_text": "setupSignalHandlers()",
          "new_text": null,
          "old_line_content": "    setupSignalHandlers();",
          "new_line_content": "    int j;",
          "content_same": false
        },
        {
          "line": 1361,
          "old_api": "listCreate",
          "new_api": null,
          "old_text": "listCreate()",
          "new_text": null,
          "old_line_content": "    server.clients = listCreate();",
          "new_line_content": "            server.syslog_facility);",
          "content_same": false
        },
        {
          "line": 1362,
          "old_api": "listCreate",
          "new_api": null,
          "old_text": "listCreate()",
          "new_text": null,
          "old_line_content": "    server.clients_to_close = listCreate();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1363,
          "old_api": "listCreate",
          "new_api": null,
          "old_text": "listCreate()",
          "new_text": null,
          "old_line_content": "    server.slaves = listCreate();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1364,
          "old_api": "listCreate",
          "new_api": null,
          "old_text": "listCreate()",
          "new_text": null,
          "old_line_content": "    server.monitors = listCreate();",
          "new_line_content": "    server.current_client = NULL;",
          "content_same": false
        },
        {
          "line": 1369,
          "old_api": "createSharedObjects",
          "new_api": null,
          "old_text": "createSharedObjects()",
          "new_text": null,
          "old_line_content": "    createSharedObjects();",
          "new_line_content": "    server.slaveseldb = -1; /* Force to emit the first SELECT command. */",
          "content_same": false
        },
        {
          "line": 1372,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(redisDb)*server.dbnum)",
          "new_text": null,
          "old_line_content": "    server.db = zmalloc(sizeof(redisDb)*server.dbnum);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1377,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING, \"Opening port %d: %s\",\n                server.port, server.neterr)",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_WARNING, \"Opening port %d: %s\",",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1384,
          "old_api": "anetUnixServer",
          "new_api": null,
          "old_text": "anetUnixServer(server.neterr,server.unixsocket,server.unixsocketperm)",
          "new_text": null,
          "old_line_content": "        server.sofd = anetUnixServer(server.neterr,server.unixsocket,server.unixsocketperm);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1386,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING, \"Opening socket: %s\", server.neterr)",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_WARNING, \"Opening socket: %s\", server.neterr);",
          "new_line_content": "    if (server.unixsocket != NULL) {",
          "content_same": false
        },
        {
          "line": 1392,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "        exit(1);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1397,
          "old_api": "dictCreate",
          "new_api": null,
          "old_text": "dictCreate(&keylistDictType,NULL)",
          "new_text": null,
          "old_line_content": "        server.db[j].blocking_keys = dictCreate(&keylistDictType,NULL);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1398,
          "old_api": "dictCreate",
          "new_api": null,
          "old_text": "dictCreate(&setDictType,NULL)",
          "new_text": null,
          "old_line_content": "        server.db[j].ready_keys = dictCreate(&setDictType,NULL);",
          "new_line_content": "    for (j = 0; j < server.dbnum; j++) {",
          "content_same": false
        },
        {
          "line": 1404,
          "old_api": "listSetFreeMethod",
          "new_api": null,
          "old_text": "listSetFreeMethod(server.pubsub_patterns,freePubsubPattern)",
          "new_text": null,
          "old_line_content": "    listSetFreeMethod(server.pubsub_patterns,freePubsubPattern);",
          "new_line_content": "        server.db[j].id = j;",
          "content_same": false
        },
        {
          "line": 1405,
          "old_api": "listSetMatchMethod",
          "new_api": null,
          "old_text": "listSetMatchMethod(server.pubsub_patterns,listMatchPubsubPattern)",
          "new_text": null,
          "old_line_content": "    listSetMatchMethod(server.pubsub_patterns,listMatchPubsubPattern);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1410,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "    server.aof_buf = sdsempty();",
          "new_line_content": "    server.cronloops = 0;",
          "content_same": false
        },
        {
          "line": 1411,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "    server.lastsave = time(NULL);",
          "new_line_content": "    server.rdb_child_pid = -1;",
          "content_same": false
        },
        {
          "line": 1419,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "    server.stat_starttime = time(NULL);",
          "new_line_content": "    server.stat_numcommands = 0;",
          "content_same": false
        },
        {
          "line": 1428,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(server.ops_sec_samples,0,sizeof(server.ops_sec_samples))",
          "new_text": null,
          "old_line_content": "    memset(server.ops_sec_samples,0,sizeof(server.ops_sec_samples));",
          "new_line_content": "    server.stat_rejected_conn = 0;",
          "content_same": false
        },
        {
          "line": 1430,
          "old_api": "mstime",
          "new_api": null,
          "old_text": "mstime()",
          "new_text": null,
          "old_line_content": "    server.ops_sec_last_sample_time = mstime();",
          "new_line_content": "    server.stat_sync_partial_ok = 0;",
          "content_same": false
        },
        {
          "line": 1435,
          "old_api": "aeCreateTimeEvent",
          "new_api": null,
          "old_text": "aeCreateTimeEvent(server.el, 1, serverCron, NULL, NULL)",
          "new_text": null,
          "old_line_content": "    if(aeCreateTimeEvent(server.el, 1, serverCron, NULL, NULL) == AE_ERR) {",
          "new_line_content": "    server.ops_sec_last_sample_ops = 0;",
          "content_same": false
        },
        {
          "line": 1437,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "        exit(1);",
          "new_line_content": "    server.lastbgsave_status = REDIS_OK;",
          "content_same": false
        },
        {
          "line": 1442,
          "old_api": "redisPanic",
          "new_api": null,
          "old_text": "redisPanic(\"Unrecoverable error creating server.sofd file event.\")",
          "new_text": null,
          "old_line_content": "        acceptUnixHandler,NULL) == AE_ERR) redisPanic(\"Unrecoverable error creating server.sofd file event.\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1448,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING, \"Can't open the append-only file: %s\",\n                strerror(errno))",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_WARNING, \"Can't open the append-only file: %s\",",
          "new_line_content": "    if (server.aof_state == REDIS_AOF_ON) {",
          "content_same": false
        },
        {
          "line": 1450,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "            exit(1);",
          "new_line_content": "                               O_WRONLY|O_APPEND|O_CREAT,0644);",
          "content_same": false
        },
        {
          "line": 1459,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"Warning: 32 bit instance detected but no memory limit set. Setting 3 GB maxmemory limit with 'noeviction' policy now.\")",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING,\"Warning: 32 bit instance detected but no memory limit set. Setting 3 GB maxmemory limit with 'noeviction' policy now.\");",
          "new_line_content": "     * no explicit limit in the user provided configuration we set a limit",
          "content_same": false
        },
        {
          "line": 1464,
          "old_api": "clusterInit",
          "new_api": null,
          "old_text": "clusterInit()",
          "new_text": null,
          "old_line_content": "    if (server.cluster_enabled) clusterInit();",
          "new_line_content": "        server.maxmemory = 3072LL*(1024*1024); /* 3 GB */",
          "content_same": false
        },
        {
          "line": 1465,
          "old_api": "scriptingInit",
          "new_api": null,
          "old_text": "scriptingInit()",
          "new_text": null,
          "old_line_content": "    scriptingInit();",
          "new_line_content": "        server.maxmemory_policy = REDIS_MAXMEMORY_NO_EVICTION;",
          "content_same": false
        },
        {
          "line": 1466,
          "old_api": "slowlogInit",
          "new_api": null,
          "old_text": "slowlogInit()",
          "new_text": null,
          "old_line_content": "    slowlogInit();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1467,
          "old_api": "bioInit",
          "new_api": null,
          "old_text": "bioInit()",
          "new_text": null,
          "old_line_content": "    bioInit();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1496,
          "old_api": "redisPanic",
          "new_api": null,
          "old_text": "redisPanic(\"Unsupported command flag\")",
          "new_text": null,
          "old_line_content": "            default: redisPanic(\"Unsupported command flag\"); break;",
          "new_line_content": "            case 'l': c->flags |= REDIS_CMD_LOADING; break;",
          "content_same": false
        },
        {
          "line": 1501,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(c->name)",
          "new_text": null,
          "old_line_content": "        retval1 = dictAdd(server.commands, sdsnew(c->name), c);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1504,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(c->name)",
          "new_text": null,
          "old_line_content": "        retval2 = dictAdd(server.orig_commands, sdsnew(c->name), c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1533,
          "old_api": "zrealloc",
          "new_api": null,
          "old_text": "zrealloc(oa->ops,sizeof(redisOp)*(oa->numops+1))",
          "new_text": null,
          "old_line_content": "    oa->ops = zrealloc(oa->ops,sizeof(redisOp)*(oa->numops+1));",
          "new_line_content": "                       robj **argv, int argc, int target)",
          "content_same": false
        },
        {
          "line": 1552,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(op->argv[j])",
          "new_text": null,
          "old_line_content": "            decrRefCount(op->argv[j]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1553,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(op->argv)",
          "new_text": null,
          "old_line_content": "        zfree(op->argv);",
          "new_line_content": "        oa->numops--;",
          "content_same": false
        },
        {
          "line": 1555,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(oa->ops)",
          "new_text": null,
          "old_line_content": "    zfree(oa->ops);",
          "new_line_content": "        for (j = 0; j < op->argc; j++)",
          "content_same": false
        },
        {
          "line": 1561,
          "old_api": "dictFetchValue",
          "new_api": null,
          "old_text": "dictFetchValue(server.commands, name)",
          "new_text": null,
          "old_line_content": "    return dictFetchValue(server.commands, name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1566,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(s)",
          "new_text": null,
          "old_line_content": "    sds name = sdsnew(s);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1568,
          "old_api": "dictFetchValue",
          "new_api": null,
          "old_text": "dictFetchValue(server.commands, name)",
          "new_text": null,
          "old_line_content": "    cmd = dictFetchValue(server.commands, name);",
          "new_line_content": "struct redisCommand *lookupCommandByCString(char *s) {",
          "content_same": false
        },
        {
          "line": 1569,
          "old_api": "sdsfree",
          "new_api": null,
          "old_text": "sdsfree(name)",
          "new_text": null,
          "old_line_content": "    sdsfree(name);",
          "new_line_content": "    struct redisCommand *cmd;",
          "content_same": false
        },
        {
          "line": 1581,
          "old_api": "dictFetchValue",
          "new_api": null,
          "old_text": "dictFetchValue(server.commands, name)",
          "new_text": null,
          "old_line_content": "    struct redisCommand *cmd = dictFetchValue(server.commands, name);",
          "new_line_content": " * This is used by functions rewriting the argument vector such as",
          "content_same": false
        },
        {
          "line": 1583,
          "old_api": "dictFetchValue",
          "new_api": null,
          "old_text": "dictFetchValue(server.orig_commands,name)",
          "new_text": null,
          "old_line_content": "    if (!cmd) cmd = dictFetchValue(server.orig_commands,name);",
          "new_line_content": " * correctly even if the command was renamed. */",
          "content_same": false
        },
        {
          "line": 1599,
          "old_api": "feedAppendOnlyFile",
          "new_api": null,
          "old_text": "feedAppendOnlyFile(cmd,dbid,argv,argc)",
          "new_text": null,
          "old_line_content": "        feedAppendOnlyFile(cmd,dbid,argv,argc);",
          "new_line_content": "void propagate(struct redisCommand *cmd, int dbid, robj **argv, int argc,",
          "content_same": false
        },
        {
          "line": 1601,
          "old_api": "replicationFeedSlaves",
          "new_api": null,
          "old_text": "replicationFeedSlaves(server.slaves,dbid,argv,argc)",
          "new_text": null,
          "old_line_content": "        replicationFeedSlaves(server.slaves,dbid,argv,argc);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1609,
          "old_api": "redisOpArrayAppend",
          "new_api": null,
          "old_text": "redisOpArrayAppend(&server.also_propagate,cmd,dbid,argv,argc,target)",
          "new_text": null,
          "old_line_content": "    redisOpArrayAppend(&server.also_propagate,cmd,dbid,argv,argc,target);",
          "new_line_content": " * after the current command is propagated to AOF / Replication. */",
          "content_same": false
        },
        {
          "line": 1614,
          "old_api": "ustime",
          "new_api": null,
          "old_text": "ustime()",
          "new_text": null,
          "old_line_content": "    long long dirty, start = ustime(), duration;",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1628,
          "old_api": "proc",
          "new_api": null,
          "old_text": "c->cmd->proc(c)",
          "new_text": null,
          "old_line_content": "    c->cmd->proc(c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1640,
          "old_api": "slowlogPushEntryIfNeeded",
          "new_api": null,
          "old_text": "slowlogPushEntryIfNeeded(c->argv,c->argc,duration)",
          "new_text": null,
          "old_line_content": "        slowlogPushEntryIfNeeded(c->argv,c->argc,duration);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1655,
          "old_api": "propagate",
          "new_api": null,
          "old_text": "propagate(c->cmd,c->db->id,c->argv,c->argc,flags)",
          "new_text": null,
          "old_line_content": "            propagate(c->cmd,c->db->id,c->argv,c->argc,flags);",
          "new_line_content": "            flags |= REDIS_PROPAGATE_REPL;",
          "content_same": false
        },
        {
          "line": 1666,
          "old_api": "propagate",
          "new_api": null,
          "old_text": "propagate(rop->cmd, rop->dbid, rop->argv, rop->argc, rop->target)",
          "new_text": null,
          "old_line_content": "            propagate(rop->cmd, rop->dbid, rop->argv, rop->argc, rop->target);",
          "new_line_content": "        redisOp *rop;",
          "content_same": false
        },
        {
          "line": 1668,
          "old_api": "redisOpArrayFree",
          "new_api": null,
          "old_text": "redisOpArrayFree(&server.also_propagate)",
          "new_text": null,
          "old_line_content": "        redisOpArrayFree(&server.also_propagate);",
          "new_line_content": "        for (j = 0; j < server.also_propagate.numops; j++) {",
          "content_same": false
        },
        {
          "line": 1686,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[0]->ptr,\"quit\")",
          "new_text": null,
          "old_line_content": "    if (!strcasecmp(c->argv[0]->ptr,\"quit\")) {",
          "new_line_content": "    /* The QUIT command is handled separately. Normal command procs will",
          "content_same": false
        },
        {
          "line": 1687,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.ok)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.ok);",
          "new_line_content": "     * go through checking for replication and QUIT will cause trouble",
          "content_same": false
        },
        {
          "line": 1694,
          "old_api": "lookupCommand",
          "new_api": null,
          "old_text": "lookupCommand(c->argv[0]->ptr)",
          "new_text": null,
          "old_line_content": "    c->cmd = c->lastcmd = lookupCommand(c->argv[0]->ptr);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1696,
          "old_api": "flagTransaction",
          "new_api": null,
          "old_text": "flagTransaction(c)",
          "new_text": null,
          "old_line_content": "        flagTransaction(c);",
          "new_line_content": "    /* Now lookup the command and check ASAP about trivial error conditions",
          "content_same": false
        },
        {
          "line": 1697,
          "old_api": "addReplyErrorFormat",
          "new_api": null,
          "old_text": "addReplyErrorFormat(c,\"unknown command '%s'\",\n            (char*)c->argv[0]->ptr)",
          "new_text": null,
          "old_line_content": "        addReplyErrorFormat(c,\"unknown command '%s'\",",
          "new_line_content": "     * such as wrong arity, bad command name and so forth. */",
          "content_same": false
        },
        {
          "line": 1702,
          "old_api": "flagTransaction",
          "new_api": null,
          "old_text": "flagTransaction(c)",
          "new_text": null,
          "old_line_content": "        flagTransaction(c);",
          "new_line_content": "            (char*)c->argv[0]->ptr);",
          "content_same": false
        },
        {
          "line": 1703,
          "old_api": "addReplyErrorFormat",
          "new_api": null,
          "old_text": "addReplyErrorFormat(c,\"wrong number of arguments for '%s' command\",\n            c->cmd->name)",
          "new_text": null,
          "old_line_content": "        addReplyErrorFormat(c,\"wrong number of arguments for '%s' command\",",
          "new_line_content": "        return REDIS_OK;",
          "content_same": false
        },
        {
          "line": 1711,
          "old_api": "flagTransaction",
          "new_api": null,
          "old_text": "flagTransaction(c)",
          "new_text": null,
          "old_line_content": "        flagTransaction(c);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1712,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.noautherr)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.noautherr);",
          "new_line_content": "    /* Check if the user is authenticated */",
          "content_same": false
        },
        {
          "line": 1727,
          "old_api": "sdsnew",
          "new_api": null,
          "old_text": "sdsnew(\"-CLUSTERDOWN The cluster is down. Use CLUSTER INFO for more information\\r\\n\")",
          "new_text": null,
          "old_line_content": "            addReplySds(c,sdsnew(\"-CLUSTERDOWN The cluster is down. Use CLUSTER INFO for more information\\r\\n\"));",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 1733,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\"Multi keys request invalid in cluster\")",
          "new_text": null,
          "old_line_content": "                addReplyError(c,\"Multi keys request invalid in cluster\");",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 1736,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "                addReplySds(c,sdscatprintf(sdsempty(),",
          "new_line_content": "            if (n == NULL) {",
          "content_same": false
        },
        {
          "line": 1750,
          "old_api": "freeMemoryIfNeeded",
          "new_api": null,
          "old_text": "freeMemoryIfNeeded()",
          "new_text": null,
          "old_line_content": "        int retval = freeMemoryIfNeeded();",
          "new_line_content": "     * First we try to free some memory if possible (if there are volatile",
          "content_same": false
        },
        {
          "line": 1752,
          "old_api": "flagTransaction",
          "new_api": null,
          "old_text": "flagTransaction(c)",
          "new_text": null,
          "old_line_content": "            flagTransaction(c);",
          "new_line_content": "     * is returning an error. */",
          "content_same": false
        },
        {
          "line": 1753,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c, shared.oomerr)",
          "new_text": null,
          "old_line_content": "            addReply(c, shared.oomerr);",
          "new_line_content": "    if (server.maxmemory) {",
          "content_same": false
        },
        {
          "line": 1764,
          "old_api": "flagTransaction",
          "new_api": null,
          "old_text": "flagTransaction(c)",
          "new_text": null,
          "old_line_content": "        flagTransaction(c);",
          "new_line_content": "        server.saveparamslen > 0",
          "content_same": false
        },
        {
          "line": 1765,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c, shared.bgsaveerr)",
          "new_text": null,
          "old_line_content": "        addReply(c, shared.bgsaveerr);",
          "new_line_content": "        && server.lastbgsave_status == REDIS_ERR &&",
          "content_same": false
        },
        {
          "line": 1775,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c, shared.roslaveerr)",
          "new_text": null,
          "old_line_content": "        addReply(c, shared.roslaveerr);",
          "new_line_content": "    if (server.masterhost && server.repl_slave_ro &&",
          "content_same": false
        },
        {
          "line": 1780,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(c->pubsub_patterns)",
          "new_text": null,
          "old_line_content": "    if ((dictSize(c->pubsub_channels) > 0 || listLength(c->pubsub_patterns) > 0)",
          "new_line_content": "        return REDIS_OK;",
          "content_same": false
        },
        {
          "line": 1786,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\"only (P)SUBSCRIBE / (P)UNSUBSCRIBE / QUIT allowed in this context\")",
          "new_text": null,
          "old_line_content": "        addReplyError(c,\"only (P)SUBSCRIBE / (P)UNSUBSCRIBE / QUIT allowed in this context\");",
          "new_line_content": "        c->cmd->proc != subscribeCommand &&",
          "content_same": false
        },
        {
          "line": 1796,
          "old_api": "flagTransaction",
          "new_api": null,
          "old_text": "flagTransaction(c)",
          "new_text": null,
          "old_line_content": "        flagTransaction(c);",
          "new_line_content": "    if (server.masterhost && server.repl_state != REDIS_REPL_CONNECTED &&",
          "content_same": false
        },
        {
          "line": 1797,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c, shared.masterdownerr)",
          "new_text": null,
          "old_line_content": "        addReply(c, shared.masterdownerr);",
          "new_line_content": "        server.repl_serve_stale_data == 0 &&",
          "content_same": false
        },
        {
          "line": 1804,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c, shared.loadingerr)",
          "new_text": null,
          "old_line_content": "        addReply(c, shared.loadingerr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1813,
          "old_api": "tolower",
          "new_api": null,
          "old_text": "tolower(((char*)c->argv[1]->ptr)[0])",
          "new_text": null,
          "old_line_content": "          tolower(((char*)c->argv[1]->ptr)[0]) == 'n') &&",
          "new_line_content": "    if (server.lua_timedout &&",
          "content_same": false
        },
        {
          "line": 1816,
          "old_api": "tolower",
          "new_api": null,
          "old_text": "tolower(((char*)c->argv[1]->ptr)[0])",
          "new_text": null,
          "old_line_content": "          tolower(((char*)c->argv[1]->ptr)[0]) == 'k'))",
          "new_line_content": "          c->argc == 2 &&",
          "content_same": false
        },
        {
          "line": 1818,
          "old_api": "flagTransaction",
          "new_api": null,
          "old_text": "flagTransaction(c)",
          "new_text": null,
          "old_line_content": "        flagTransaction(c);",
          "new_line_content": "        !(c->cmd->proc == scriptCommand &&",
          "content_same": false
        },
        {
          "line": 1819,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c, shared.slowscripterr)",
          "new_text": null,
          "old_line_content": "        addReply(c, shared.slowscripterr);",
          "new_line_content": "          c->argc == 2 &&",
          "content_same": false
        },
        {
          "line": 1828,
          "old_api": "queueMultiCommand",
          "new_api": null,
          "old_text": "queueMultiCommand(c)",
          "new_text": null,
          "old_line_content": "        queueMultiCommand(c);",
          "new_line_content": "    if (c->flags & REDIS_MULTI &&",
          "content_same": false
        },
        {
          "line": 1829,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.queued)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.queued);",
          "new_line_content": "        c->cmd->proc != execCommand && c->cmd->proc != discardCommand &&",
          "content_same": false
        },
        {
          "line": 1831,
          "old_api": "call",
          "new_api": null,
          "old_text": "call(c,REDIS_CALL_FULL)",
          "new_text": null,
          "old_line_content": "        call(c,REDIS_CALL_FULL);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 1844,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"User requested shutdown...\")",
          "new_text": null,
          "old_line_content": "    redisLog(REDIS_WARNING,\"User requested shutdown...\");",
          "new_line_content": "int prepareForShutdown(int flags) {",
          "content_same": false
        },
        {
          "line": 1849,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"There is a child saving an .rdb. Killing it!\")",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_WARNING,\"There is a child saving an .rdb. Killing it!\");",
          "new_line_content": "    /* Kill the saving child if there is a background saving in progress.",
          "content_same": false
        },
        {
          "line": 1850,
          "old_api": "kill",
          "new_api": null,
          "old_text": "kill(server.rdb_child_pid,SIGUSR1)",
          "new_text": null,
          "old_line_content": "        kill(server.rdb_child_pid,SIGUSR1);",
          "new_line_content": "       We want to avoid race conditions, for instance our saving child may",
          "content_same": false
        },
        {
          "line": 1851,
          "old_api": "rdbRemoveTempFile",
          "new_api": null,
          "old_text": "rdbRemoveTempFile(server.rdb_child_pid)",
          "new_text": null,
          "old_line_content": "        rdbRemoveTempFile(server.rdb_child_pid);",
          "new_line_content": "       overwrite the synchronous saving did by SHUTDOWN. */",
          "content_same": false
        },
        {
          "line": 1857,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\n                \"There is a child rewriting the AOF. Killing it!\")",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_WARNING,",
          "new_line_content": "    if (server.aof_state != REDIS_AOF_OFF) {",
          "content_same": false
        },
        {
          "line": 1859,
          "old_api": "kill",
          "new_api": null,
          "old_text": "kill(server.aof_child_pid,SIGUSR1)",
          "new_text": null,
          "old_line_content": "            kill(server.aof_child_pid,SIGUSR1);",
          "new_line_content": "         * but contains the full dataset anyway. */",
          "content_same": false
        },
        {
          "line": 1862,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_NOTICE,\"Calling fsync() on the AOF file.\")",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_NOTICE,\"Calling fsync() on the AOF file.\");",
          "new_line_content": "                \"There is a child rewriting the AOF. Killing it!\");",
          "content_same": false
        },
        {
          "line": 1868,
          "old_api": "rdbSave",
          "new_api": null,
          "old_text": "rdbSave(server.rdb_filename)",
          "new_text": null,
          "old_line_content": "        if (rdbSave(server.rdb_filename) != REDIS_OK) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1874,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_WARNING,\"Error trying to save the DB, can't exit.\")",
          "new_text": null,
          "old_line_content": "            redisLog(REDIS_WARNING,\"Error trying to save the DB, can't exit.\");",
          "new_line_content": "             * operating. Note that if there was a background saving process,",
          "content_same": false
        },
        {
          "line": 1879,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_NOTICE,\"Removing the pid file.\")",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_NOTICE,\"Removing the pid file.\");",
          "new_line_content": "            return REDIS_ERR;",
          "content_same": false
        },
        {
          "line": 1880,
          "old_api": "unlink",
          "new_api": null,
          "old_text": "unlink(server.pidfile)",
          "new_text": null,
          "old_line_content": "        unlink(server.pidfile);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1886,
          "old_api": "redisLog",
          "new_api": null,
          "old_text": "redisLog(REDIS_NOTICE,\"Removing the unix socket file.\")",
          "new_text": null,
          "old_line_content": "        redisLog(REDIS_NOTICE,\"Removing the unix socket file.\");",
          "new_line_content": "    /* Close the listening sockets. Apparently this allows faster restarts. */",
          "content_same": false
        },
        {
          "line": 1911,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(a)",
          "new_text": null,
          "old_line_content": "    int alen = strlen(a);",
          "new_line_content": "    /* The above two strlen perform len(a) + len(b) operations where either",
          "content_same": false
        },
        {
          "line": 1912,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(b)",
          "new_text": null,
          "old_line_content": "    int blen = strlen(b);",
          "new_line_content": "     * a or b are fixed (our password) length, and the difference is only",
          "content_same": false
        },
        {
          "line": 1921,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(bufa,0,sizeof(bufa))",
          "new_text": null,
          "old_line_content": "    memset(bufa,0,sizeof(bufa));        /* Constant time. */",
          "new_line_content": "     * Note that this will never pass the first test in practical circumstances",
          "content_same": false
        },
        {
          "line": 1922,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(bufb,0,sizeof(bufb))",
          "new_text": null,
          "old_line_content": "    memset(bufb,0,sizeof(bufb));        /* Constant time. */",
          "new_line_content": "     * so there is no info leak. */",
          "content_same": false
        },
        {
          "line": 1940,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\"Client sent AUTH, but no password is set\")",
          "new_text": null,
          "old_line_content": "        addReplyError(c,\"Client sent AUTH, but no password is set\");",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1941,
          "old_api": "time_independent_strcmp",
          "new_api": null,
          "old_text": "time_independent_strcmp(c->argv[1]->ptr, server.requirepass)",
          "new_text": null,
          "old_line_content": "    } else if (!time_independent_strcmp(c->argv[1]->ptr, server.requirepass)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1943,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.ok)",
          "new_text": null,
          "old_line_content": "      addReply(c,shared.ok);",
          "new_line_content": "    if (!server.requirepass) {",
          "content_same": false
        },
        {
          "line": 1946,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\"invalid password\")",
          "new_text": null,
          "old_line_content": "      addReplyError(c,\"invalid password\");",
          "new_line_content": "      c->authenticated = 1;",
          "content_same": false
        },
        {
          "line": 1951,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.pong)",
          "new_text": null,
          "old_line_content": "    addReply(c,shared.pong);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1963,
          "old_api": "gettimeofday",
          "new_api": null,
          "old_text": "gettimeofday(&tv,NULL)",
          "new_text": null,
          "old_line_content": "    gettimeofday(&tv,NULL);",
          "new_line_content": "    struct timeval tv;",
          "content_same": false
        },
        {
          "line": 1964,
          "old_api": "addReplyMultiBulkLen",
          "new_api": null,
          "old_text": "addReplyMultiBulkLen(c,2)",
          "new_text": null,
          "old_line_content": "    addReplyMultiBulkLen(c,2);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1965,
          "old_api": "addReplyBulkLongLong",
          "new_api": null,
          "old_text": "addReplyBulkLongLong(c,tv.tv_sec)",
          "new_text": null,
          "old_line_content": "    addReplyBulkLongLong(c,tv.tv_sec);",
          "new_line_content": "    /* gettimeofday() can only fail if &tv is a bad address so we",
          "content_same": false
        },
        {
          "line": 1966,
          "old_api": "addReplyBulkLongLong",
          "new_api": null,
          "old_text": "addReplyBulkLongLong(c,tv.tv_usec)",
          "new_text": null,
          "old_line_content": "    addReplyBulkLongLong(c,tv.tv_usec);",
          "new_line_content": "     * don't check for errors. */",
          "content_same": false
        },
        {
          "line": 1976,
          "old_api": "sprintf",
          "new_api": null,
          "old_text": "sprintf(s,\"%lluB\",n)",
          "new_text": null,
          "old_line_content": "        sprintf(s,\"%lluB\",n);",
          "new_line_content": "    double d;",
          "content_same": false
        },
        {
          "line": 1983,
          "old_api": "sprintf",
          "new_api": null,
          "old_text": "sprintf(s,\"%.2fM\",d)",
          "new_text": null,
          "old_line_content": "        sprintf(s,\"%.2fM\",d);",
          "new_line_content": "        d = (double)n/(1024);",
          "content_same": false
        },
        {
          "line": 1986,
          "old_api": "sprintf",
          "new_api": null,
          "old_text": "sprintf(s,\"%.2fG\",d)",
          "new_text": null,
          "old_line_content": "        sprintf(s,\"%.2fG\",d);",
          "new_line_content": "        d = (double)n/(1024*1024);",
          "content_same": false
        },
        {
          "line": 1994,
          "old_api": "sdsempty",
          "new_api": null,
          "old_text": "sdsempty()",
          "new_text": null,
          "old_line_content": "    sds info = sdsempty();",
          "new_line_content": "/* Create the string returned by the INFO command. This is decoupled",
          "content_same": false
        },
        {
          "line": 2003,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(section,\"all\")",
          "new_text": null,
          "old_line_content": "        allsections = strcasecmp(section,\"all\") == 0;",
          "new_line_content": "    int allsections = 0, defsections = 0;",
          "content_same": false
        },
        {
          "line": 2004,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(section,\"default\")",
          "new_text": null,
          "old_line_content": "        defsections = strcasecmp(section,\"default\") == 0;",
          "new_line_content": "    int sections = 0;",
          "content_same": false
        },
        {
          "line": 2009,
          "old_api": "getClientsMaxBuffers",
          "new_api": null,
          "old_text": "getClientsMaxBuffers(&lol,&bib)",
          "new_text": null,
          "old_line_content": "    getClientsMaxBuffers(&lol,&bib);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2020,
          "old_api": "sdscat",
          "new_api": null,
          "old_text": "sdscat(info,\"\\r\\n\")",
          "new_text": null,
          "old_line_content": "        if (sections++) info = sdscat(info,\"\\r\\n\");",
          "new_line_content": "        if (server.cluster_enabled) mode = \"cluster\";",
          "content_same": false
        },
        {
          "line": 2021,
          "old_api": "uname",
          "new_api": null,
          "old_text": "uname(&name)",
          "new_text": null,
          "old_line_content": "        uname(&name);",
          "new_line_content": "        else if (server.sentinel_mode) mode = \"sentinel\";",
          "content_same": false
        },
        {
          "line": 2022,
          "old_api": "sdscatprintf",
          "new_api": null,
          "old_text": "sdscatprintf(info,\n            \"# Server\\r\\n\"\n            \"redis_version:%s\\r\\n\"\n            \"redis_git_sha1:%s\\r\\n\"\n            \"redis_git_dirty:%d\\r\\n\"\n            \"redis_build_id:%llx\\r\\n\"\n            \"redis_mode:%s\\r\\n\"\n            \"os:%s %s %s\\r\\n\"\n            \"arch_bits:%d\\r\\n\"\n            \"multiplexing_api:%s\\r\\n\"\n            \"gcc_version:%d.%d.%d\\r\\n\"\n            \"process_id:%ld\\r\\n\"\n            \"run_id:%s\\r\\n\"\n            \"tcp_port:%d\\r\\n\"\n            \"uptime_in_seconds:%ld\\r\\n\"\n            \"uptime_in_days:%ld\\r\\n\"\n            \"hz:%d\\r\\n\"\n            \"lru_clock:%ld\\r\\n\",\n            REDIS_VERSION,\n            redisGitSHA1(),\n            strtol(redisGitDirty(),NULL,10) > 0,\n            (unsigned long long) redisBuildId(),\n            mode,\n            name.sysname, name.release, name.machine,\n            server.arch_bits,\n            aeGetApiName(),\n#ifdef __GNUC__\n            __GNUC__,__GNUC_MINOR__,__GNUC_PATCHLEVEL__,\n#else\n            0,0,0,\n#endif\n            (long) getpid(),\n            server.runid,\n            server.port,\n            uptime,\n            uptime/(3600*24),\n            server.hz,\n            (unsigned long) server.lruclock)",
          "new_text": null,
          "old_line_content": "        info = sdscatprintf(info,",
          "new_line_content": "        else mode = \"standalone\";",
          "content_same": false
        },
        {
          "line": 2041,
          "old_api": "redisGitSHA1",
          "new_api": null,
          "old_text": "redisGitSHA1()",
          "new_text": null,
          "old_line_content": "            redisGitSHA1(),",
          "new_line_content": "            \"uptime_in_days:%ld\\r\\n\"",
          "content_same": false
        },
        {
          "line": 2042,
          "old_api": "redisGitDirty",
          "new_api": null,
          "old_text": "redisGitDirty()",
          "new_text": null,
          "old_line_content": "            strtol(redisGitDirty(),NULL,10) > 0,",
          "new_line_content": "            \"hz:%d\\r\\n\"",
          "content_same": false
        },
        {
          "line": 2043,
          "old_api": "redisBuildId",
          "new_api": null,
          "old_text": "redisBuildId()",
          "new_text": null,
          "old_line_content": "            (unsigned long long) redisBuildId(),",
          "new_line_content": "            \"lru_clock:%ld\\r\\n\",",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 111,
      "total_additions": 375,
      "total_deletions": 375,
      "total_api_changes": 861
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 7,
        "api_related_lines": 861,
        "non_api_lines": 1,
        "non_api_line_numbers": [
          677
        ]
      }
    },
    "api_calls_before": 685,
    "api_calls_after": 685,
    "diff_info": {
      "added_lines": 7,
      "removed_lines": 3,
      "total_diff_lines": 22
    }
  }
}
{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/feb032fd42d24959c0ba141d8fb5d621f0570345",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/feb032fd42d24959c0ba141d8fb5d621f0570345/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/feb032fd42d24959c0ba141d8fb5d621f0570345/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/feb032fd42d24959c0ba141d8fb5d621f0570345/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 238,
          "old_api": "zslDeleteNode",
          "new_api": "sdscmp",
          "old_text": "zslDeleteNode(zsl, x, update)",
          "new_text": "sdscmp(x->ele,ele)",
          "old_line_content": "        zslDeleteNode(zsl, x, update);",
          "new_line_content": "    if (x && score == x->score && sdscmp(x->ele,ele) == 0) {",
          "content_same": false
        },
        {
          "line": 295,
          "old_api": "zslInsert",
          "new_api": "zslDeleteNode",
          "old_text": "zslInsert(zsl,newscore,x->ele)",
          "new_text": "zslDeleteNode(zsl, x, update)",
          "old_line_content": "    zskiplistNode *newnode = zslInsert(zsl,newscore,x->ele);",
          "new_line_content": "    zslDeleteNode(zsl, x, update);",
          "content_same": false
        },
        {
          "line": 404,
          "old_api": "dictDelete",
          "new_api": "zslDeleteNode",
          "old_text": "dictDelete(dict,x->ele)",
          "new_text": "zslDeleteNode(zsl,x,update)",
          "old_line_content": "        dictDelete(dict,x->ele);",
          "new_line_content": "        zslDeleteNode(zsl,x,update);",
          "content_same": false
        },
        {
          "line": 405,
          "old_api": "zslFreeNode",
          "new_api": "dictDelete",
          "old_text": "zslFreeNode(x)",
          "new_text": "dictDelete(dict,x->ele)",
          "old_line_content": "        zslFreeNode(x); /* Here is where x->ele is actually released. */",
          "new_line_content": "        dictDelete(dict,x->ele);",
          "content_same": false
        },
        {
          "line": 433,
          "old_api": "dictDelete",
          "new_api": "zslDeleteNode",
          "old_text": "dictDelete(dict,x->ele)",
          "new_text": "zslDeleteNode(zsl,x,update)",
          "old_line_content": "        dictDelete(dict,x->ele);",
          "new_line_content": "        zslDeleteNode(zsl,x,update);",
          "content_same": false
        },
        {
          "line": 434,
          "old_api": "zslFreeNode",
          "new_api": "dictDelete",
          "old_text": "zslFreeNode(x)",
          "new_text": "dictDelete(dict,x->ele)",
          "old_line_content": "        zslFreeNode(x); /* Here is where x->ele is actually released. */",
          "new_line_content": "        dictDelete(dict,x->ele);",
          "content_same": false
        },
        {
          "line": 462,
          "old_api": "dictDelete",
          "new_api": "zslDeleteNode",
          "old_text": "dictDelete(dict,x->ele)",
          "new_text": "zslDeleteNode(zsl,x,update)",
          "old_line_content": "        dictDelete(dict,x->ele);",
          "new_line_content": "        zslDeleteNode(zsl,x,update);",
          "content_same": false
        },
        {
          "line": 463,
          "old_api": "zslFreeNode",
          "new_api": "dictDelete",
          "old_text": "zslFreeNode(x)",
          "new_text": "dictDelete(dict,x->ele)",
          "old_line_content": "        zslFreeNode(x);",
          "new_line_content": "        dictDelete(dict,x->ele);",
          "content_same": false
        },
        {
          "line": 532,
          "old_api": "isnan",
          "new_api": "strtod",
          "old_text": "isnan(spec->min)",
          "new_text": "strtod((char*)min->ptr+1,&eptr)",
          "old_line_content": "            if (eptr[0] != '\\0' || isnan(spec->min)) return C_ERR;",
          "new_line_content": "            spec->min = strtod((char*)min->ptr+1,&eptr);",
          "content_same": false
        },
        {
          "line": 536,
          "old_api": "isnan",
          "new_api": "strtod",
          "old_text": "isnan(spec->min)",
          "new_text": "strtod((char*)min->ptr,&eptr)",
          "old_line_content": "            if (eptr[0] != '\\0' || isnan(spec->min)) return C_ERR;",
          "new_line_content": "            spec->min = strtod((char*)min->ptr,&eptr);",
          "content_same": false
        },
        {
          "line": 544,
          "old_api": "isnan",
          "new_api": "strtod",
          "old_text": "isnan(spec->max)",
          "new_text": "strtod((char*)max->ptr+1,&eptr)",
          "old_line_content": "            if (eptr[0] != '\\0' || isnan(spec->max)) return C_ERR;",
          "new_line_content": "            spec->max = strtod((char*)max->ptr+1,&eptr);",
          "content_same": false
        },
        {
          "line": 548,
          "old_api": "isnan",
          "new_api": "strtod",
          "old_text": "isnan(spec->max)",
          "new_text": "strtod((char*)max->ptr,&eptr)",
          "old_line_content": "            if (eptr[0] != '\\0' || isnan(spec->max)) return C_ERR;",
          "new_line_content": "            spec->max = strtod((char*)max->ptr,&eptr);",
          "content_same": false
        },
        {
          "line": 620,
          "old_api": "zslFreeLexRange",
          "new_api": "zslParseLexRangeItem",
          "old_text": "zslFreeLexRange(spec)",
          "new_text": "zslParseLexRangeItem(max, &spec->max, &spec->maxex)",
          "old_line_content": "        zslFreeLexRange(spec);",
          "new_line_content": "        zslParseLexRangeItem(max, &spec->max, &spec->maxex) == C_ERR) {",
          "content_same": false
        },
        {
          "line": 737,
          "old_api": "lpGetValue",
          "new_api": "serverAssert",
          "old_text": "lpGetValue(sptr,&vlen,&vlong)",
          "new_text": "serverAssert(sptr != NULL)",
          "old_line_content": "    vstr = lpGetValue(sptr,&vlen,&vlong);",
          "new_line_content": "    serverAssert(sptr != NULL);",
          "content_same": false
        },
        {
          "line": 755,
          "old_api": "lpGetValue",
          "new_api": "serverAssert",
          "old_text": "lpGetValue(sptr,&vlen,&vlong)",
          "new_text": "serverAssert(sptr != NULL)",
          "old_line_content": "    vstr = lpGetValue(sptr,&vlen,&vlong);",
          "new_line_content": "    serverAssert(sptr != NULL);",
          "content_same": false
        },
        {
          "line": 798,
          "old_api": "serverAssert",
          "new_api": "lpNext",
          "old_text": "serverAssert(_sptr != NULL)",
          "new_text": "lpNext(zl,_eptr)",
          "old_line_content": "        serverAssert(_sptr != NULL);",
          "new_line_content": "        _sptr = lpNext(zl,_eptr);",
          "content_same": false
        },
        {
          "line": 817,
          "old_api": "serverAssert",
          "new_api": "lpPrev",
          "old_text": "serverAssert(_eptr != NULL)",
          "new_text": "lpPrev(zl,_sptr)",
          "old_line_content": "        serverAssert(_eptr != NULL);",
          "new_line_content": "        _eptr = lpPrev(zl,_sptr);",
          "content_same": false
        },
        {
          "line": 841,
          "old_api": "zslValueGteMin",
          "new_api": "zzlGetScore",
          "old_text": "zslValueGteMin(score,range)",
          "new_text": "zzlGetScore(p)",
          "old_line_content": "    if (!zslValueGteMin(score,range))",
          "new_line_content": "    score = zzlGetScore(p);",
          "content_same": false
        },
        {
          "line": 845,
          "old_api": "serverAssert",
          "new_api": "lpSeek",
          "old_text": "serverAssert(p != NULL)",
          "new_text": "lpSeek(zl,1)",
          "old_line_content": "    serverAssert(p != NULL);",
          "new_line_content": "    p = lpSeek(zl,1); /* First score. */",
          "content_same": false
        },
        {
          "line": 846,
          "old_api": "zzlGetScore",
          "new_api": "serverAssert",
          "old_text": "zzlGetScore(p)",
          "new_text": "serverAssert(p != NULL)",
          "old_line_content": "    score = zzlGetScore(p);",
          "new_line_content": "    serverAssert(p != NULL);",
          "content_same": false
        },
        {
          "line": 847,
          "old_api": "zslValueLteMax",
          "new_api": "zzlGetScore",
          "old_text": "zslValueLteMax(score,range)",
          "new_text": "zzlGetScore(p)",
          "old_line_content": "    if (!zslValueLteMax(score,range))",
          "new_line_content": "    score = zzlGetScore(p);",
          "content_same": false
        },
        {
          "line": 864,
          "old_api": "serverAssert",
          "new_api": "lpNext",
          "old_text": "serverAssert(sptr != NULL)",
          "new_text": "lpNext(zl,eptr)",
          "old_line_content": "        serverAssert(sptr != NULL);",
          "new_line_content": "        sptr = lpNext(zl,eptr);",
          "content_same": false
        },
        {
          "line": 867,
          "old_api": "zslValueGteMin",
          "new_api": "zzlGetScore",
          "old_text": "zslValueGteMin(score,range)",
          "new_text": "zzlGetScore(sptr)",
          "old_line_content": "        if (zslValueGteMin(score,range)) {",
          "new_line_content": "        score = zzlGetScore(sptr);",
          "content_same": false
        },
        {
          "line": 892,
          "old_api": "serverAssert",
          "new_api": "lpNext",
          "old_text": "serverAssert(sptr != NULL)",
          "new_text": "lpNext(zl,eptr)",
          "old_line_content": "        serverAssert(sptr != NULL);",
          "new_line_content": "        sptr = lpNext(zl,eptr);",
          "content_same": false
        },
        {
          "line": 895,
          "old_api": "zslValueLteMax",
          "new_api": "zzlGetScore",
          "old_text": "zslValueLteMax(score,range)",
          "new_text": "zzlGetScore(sptr)",
          "old_line_content": "        if (zslValueLteMax(score,range)) {",
          "new_line_content": "        score = zzlGetScore(sptr);",
          "content_same": false
        },
        {
          "line": 916,
          "old_api": "zslLexValueGteMin",
          "new_api": "lpGetObject",
          "old_text": "zslLexValueGteMin(value,spec)",
          "new_text": "lpGetObject(p)",
          "old_line_content": "    int res = zslLexValueGteMin(value,spec);",
          "new_line_content": "    sds value = lpGetObject(p);",
          "content_same": false
        },
        {
          "line": 917,
          "old_api": "sdsfree",
          "new_api": "zslLexValueGteMin",
          "old_text": "sdsfree(value)",
          "new_text": "zslLexValueGteMin(value,spec)",
          "old_line_content": "    sdsfree(value);",
          "new_line_content": "    int res = zslLexValueGteMin(value,spec);",
          "content_same": false
        },
        {
          "line": 923,
          "old_api": "zslLexValueLteMax",
          "new_api": "lpGetObject",
          "old_text": "zslLexValueLteMax(value,spec)",
          "new_text": "lpGetObject(p)",
          "old_line_content": "    int res = zslLexValueLteMax(value,spec);",
          "new_line_content": "    sds value = lpGetObject(p);",
          "content_same": false
        },
        {
          "line": 924,
          "old_api": "sdsfree",
          "new_api": "zslLexValueLteMax",
          "old_text": "sdsfree(value)",
          "new_text": "zslLexValueLteMax(value,spec)",
          "old_line_content": "    sdsfree(value);",
          "new_line_content": "    int res = zslLexValueLteMax(value,spec);",
          "content_same": false
        },
        {
          "line": 944,
          "old_api": "serverAssert",
          "new_api": "lpSeek",
          "old_text": "serverAssert(p != NULL)",
          "new_text": "lpSeek(zl,0)",
          "old_line_content": "    serverAssert(p != NULL);",
          "new_line_content": "    p = lpSeek(zl,0); /* First element. */",
          "content_same": false
        },
        {
          "line": 945,
          "old_api": "zzlLexValueLteMax",
          "new_api": "serverAssert",
          "old_text": "zzlLexValueLteMax(p,range)",
          "new_text": "serverAssert(p != NULL)",
          "old_line_content": "    if (!zzlLexValueLteMax(p,range))",
          "new_line_content": "    serverAssert(p != NULL);",
          "content_same": false
        },
        {
          "line": 969,
          "old_api": "serverAssert",
          "new_api": "lpNext",
          "old_text": "serverAssert(sptr != NULL)",
          "new_text": "lpNext(zl,eptr)",
          "old_line_content": "        serverAssert(sptr != NULL);",
          "new_line_content": "        sptr = lpNext(zl,eptr); /* This element score. Skip it. */",
          "content_same": false
        },
        {
          "line": 970,
          "old_api": "lpNext",
          "new_api": "serverAssert",
          "old_text": "lpNext(zl,sptr)",
          "new_text": "serverAssert(sptr != NULL)",
          "old_line_content": "        eptr = lpNext(zl,sptr); /* Next element. */",
          "new_line_content": "        serverAssert(sptr != NULL);",
          "content_same": false
        },
        {
          "line": 1008,
          "old_api": "sdslen",
          "new_api": "lpFirst",
          "old_text": "sdslen(ele)",
          "new_text": "lpFirst(lp)",
          "old_line_content": "    eptr = lpFind(lp, eptr, (unsigned char*)ele, sdslen(ele), 1);",
          "new_line_content": "    if ((eptr = lpFirst(lp)) == NULL) return NULL;",
          "content_same": false
        },
        {
          "line": 1011,
          "old_api": "serverAssert",
          "new_api": "lpNext",
          "old_text": "serverAssert(sptr != NULL)",
          "new_text": "lpNext(lp,eptr)",
          "old_line_content": "        serverAssert(sptr != NULL);",
          "new_line_content": "        sptr = lpNext(lp,eptr);",
          "content_same": false
        },
        {
          "line": 1035,
          "old_api": "lpAppend",
          "new_api": "sdslen",
          "old_text": "lpAppend(zl,(unsigned char*)scorebuf,scorelen)",
          "new_text": "sdslen(ele)",
          "old_line_content": "        zl = lpAppend(zl,(unsigned char*)scorebuf,scorelen);",
          "new_line_content": "        zl = lpAppend(zl,(unsigned char*)ele,sdslen(ele));",
          "content_same": false
        },
        {
          "line": 1054,
          "old_api": "serverAssert",
          "new_api": "lpNext",
          "old_text": "serverAssert(sptr != NULL)",
          "new_text": "lpNext(zl,eptr)",
          "old_line_content": "        serverAssert(sptr != NULL);",
          "new_line_content": "        sptr = lpNext(zl,eptr);",
          "content_same": false
        },
        {
          "line": 1055,
          "old_api": "zzlGetScore",
          "new_api": "serverAssert",
          "old_text": "zzlGetScore(sptr)",
          "new_text": "serverAssert(sptr != NULL)",
          "old_line_content": "        s = zzlGetScore(sptr);",
          "new_line_content": "        serverAssert(sptr != NULL);",
          "content_same": false
        },
        {
          "line": 1066,
          "old_api": "zzlInsertAt",
          "new_api": "sdslen",
          "old_text": "zzlInsertAt(zl,eptr,ele,score)",
          "new_text": "sdslen(ele)",
          "old_line_content": "                zl = zzlInsertAt(zl,eptr,ele,score);",
          "new_line_content": "            if (zzlCompareElements(eptr,(unsigned char*)ele,sdslen(ele)) > 0) {",
          "content_same": false
        },
        {
          "line": 1093,
          "old_api": "zzlGetScore",
          "new_api": "lpNext",
          "old_text": "zzlGetScore(sptr)",
          "new_text": "lpNext(zl,eptr)",
          "old_line_content": "        score = zzlGetScore(sptr);",
          "new_line_content": "    while (eptr && (sptr = lpNext(zl,eptr)) != NULL) {",
          "content_same": false
        },
        {
          "line": 1094,
          "old_api": "zslValueLteMax",
          "new_api": "zzlGetScore",
          "old_text": "zslValueLteMax(score,range)",
          "new_text": "zzlGetScore(sptr)",
          "old_line_content": "        if (zslValueLteMax(score,range)) {",
          "new_line_content": "        score = zzlGetScore(sptr);",
          "content_same": false
        },
        {
          "line": 1119,
          "old_api": "zzlLexValueLteMax",
          "new_api": "lpNext",
          "old_text": "zzlLexValueLteMax(eptr,range)",
          "new_text": "lpNext(zl,eptr)",
          "old_line_content": "        if (zzlLexValueLteMax(eptr,range)) {",
          "new_line_content": "    while (eptr && (sptr = lpNext(zl,eptr)) != NULL) {",
          "content_same": false
        },
        {
          "line": 1176,
          "old_api": "dictCreate",
          "new_api": "zmalloc",
          "old_text": "dictCreate(&zsetDictType)",
          "new_text": "zmalloc(sizeof(*zs))",
          "old_line_content": "        zs->dict = dictCreate(&zsetDictType);",
          "new_line_content": "        zs = zmalloc(sizeof(*zs));",
          "content_same": false
        },
        {
          "line": 1177,
          "old_api": "zslCreate",
          "new_api": "dictCreate",
          "old_text": "zslCreate()",
          "new_text": "dictCreate(&zsetDictType)",
          "old_line_content": "        zs->zsl = zslCreate();",
          "new_line_content": "        zs->dict = dictCreate(&zsetDictType);",
          "content_same": false
        },
        {
          "line": 1180,
          "old_api": "serverAssertWithInfo",
          "new_api": "lpSeek",
          "old_text": "serverAssertWithInfo(NULL,zobj,eptr != NULL)",
          "new_text": "lpSeek(zl,0)",
          "old_line_content": "        serverAssertWithInfo(NULL,zobj,eptr != NULL);",
          "new_line_content": "        eptr = lpSeek(zl,0);",
          "content_same": false
        },
        {
          "line": 1181,
          "old_api": "lpNext",
          "new_api": "serverAssertWithInfo",
          "old_text": "lpNext(zl,eptr)",
          "new_text": "serverAssertWithInfo(NULL,zobj,eptr != NULL)",
          "old_line_content": "        sptr = lpNext(zl,eptr);",
          "new_line_content": "        serverAssertWithInfo(NULL,zobj,eptr != NULL);",
          "content_same": false
        },
        {
          "line": 1182,
          "old_api": "serverAssertWithInfo",
          "new_api": "lpNext",
          "old_text": "serverAssertWithInfo(NULL,zobj,sptr != NULL)",
          "new_text": "lpNext(zl,eptr)",
          "old_line_content": "        serverAssertWithInfo(NULL,zobj,sptr != NULL);",
          "new_line_content": "        sptr = lpNext(zl,eptr);",
          "content_same": false
        },
        {
          "line": 1186,
          "old_api": "lpGetValue",
          "new_api": "zzlGetScore",
          "old_text": "lpGetValue(eptr,&vlen,&vlong)",
          "new_text": "zzlGetScore(sptr)",
          "old_line_content": "            vstr = lpGetValue(eptr,&vlen,&vlong);",
          "new_line_content": "            score = zzlGetScore(sptr);",
          "content_same": false
        },
        {
          "line": 1193,
          "old_api": "dictAdd",
          "new_api": "zslInsert",
          "old_text": "dictAdd(zs->dict,ele,&node->score)",
          "new_text": "zslInsert(zs->zsl,score,ele)",
          "old_line_content": "            serverAssert(dictAdd(zs->dict,ele,&node->score) == DICT_OK);",
          "new_line_content": "            node = zslInsert(zs->zsl,score,ele);",
          "content_same": false
        },
        {
          "line": 1194,
          "old_api": "zzlNext",
          "new_api": "dictAdd",
          "old_text": "zzlNext(zl,&eptr,&sptr)",
          "new_text": "dictAdd(zs->dict,ele,&node->score)",
          "old_line_content": "            zzlNext(zl,&eptr,&sptr);",
          "new_line_content": "            serverAssert(dictAdd(zs->dict,ele,&node->score) == DICT_OK);",
          "content_same": false
        },
        {
          "line": 1356,
          "old_api": "zzlInsert",
          "new_api": "zzlDelete",
          "old_text": "zzlInsert(zobj->ptr,ele,score)",
          "new_text": "zzlDelete(zobj->ptr,eptr)",
          "old_line_content": "                zobj->ptr = zzlInsert(zobj->ptr,ele,score);",
          "new_line_content": "                zobj->ptr = zzlDelete(zobj->ptr,eptr);",
          "content_same": false
        },
        {
          "line": 1364,
          "old_api": "sdslen",
          "new_api": "zzlLength",
          "old_text": "sdslen(ele)",
          "new_text": "zzlLength(zobj->ptr)",
          "old_line_content": "                sdslen(ele) > server.zset_max_listpack_value ||",
          "new_line_content": "            if (zzlLength(zobj->ptr)+1 > server.zset_max_listpack_entries ||",
          "content_same": false
        },
        {
          "line": 1426,
          "old_api": "zslInsert",
          "new_api": "sdsdup",
          "old_text": "zslInsert(zs->zsl,score,ele)",
          "new_text": "sdsdup(ele)",
          "old_line_content": "            znode = zslInsert(zs->zsl,score,ele);",
          "new_line_content": "            ele = sdsdup(ele);",
          "content_same": false
        },
        {
          "line": 1427,
          "old_api": "dictAdd",
          "new_api": "zslInsert",
          "old_text": "dictAdd(zs->dict,ele,&znode->score)",
          "new_text": "zslInsert(zs->zsl,score,ele)",
          "old_line_content": "            serverAssert(dictAdd(zs->dict,ele,&znode->score) == DICT_OK);",
          "new_line_content": "            znode = zslInsert(zs->zsl,score,ele);",
          "content_same": false
        },
        {
          "line": 1463,
          "old_api": "serverAssert",
          "new_api": "zslDelete",
          "old_text": "serverAssert(retval)",
          "new_text": "zslDelete(zs->zsl,score,ele,NULL)",
          "old_line_content": "        serverAssert(retval);",
          "new_line_content": "        int retval = zslDelete(zs->zsl,score,ele,NULL);",
          "content_same": false
        },
        {
          "line": 1478,
          "old_api": "zzlDelete",
          "new_api": "zzlFind",
          "old_text": "zzlDelete(zobj->ptr,eptr)",
          "new_text": "zzlFind(zobj->ptr,ele,NULL)",
          "old_line_content": "            zobj->ptr = zzlDelete(zobj->ptr,eptr);",
          "new_line_content": "        if ((eptr = zzlFind(zobj->ptr,ele,NULL)) != NULL) {",
          "content_same": false
        },
        {
          "line": 1484,
          "old_api": "dictResize",
          "new_api": "zsetRemoveFromSkiplist",
          "old_text": "dictResize(zs->dict)",
          "new_text": "zsetRemoveFromSkiplist(zs, ele)",
          "old_line_content": "            if (htNeedsResize(zs->dict)) dictResize(zs->dict);",
          "new_line_content": "        if (zsetRemoveFromSkiplist(zs, ele)) {",
          "content_same": false
        },
        {
          "line": 1515,
          "old_api": "serverAssert",
          "new_api": "lpSeek",
          "old_text": "serverAssert(eptr != NULL)",
          "new_text": "lpSeek(zl,0)",
          "old_line_content": "        serverAssert(eptr != NULL);",
          "new_line_content": "        eptr = lpSeek(zl,0);",
          "content_same": false
        },
        {
          "line": 1516,
          "old_api": "lpNext",
          "new_api": "serverAssert",
          "old_text": "lpNext(zl,eptr)",
          "new_text": "serverAssert(eptr != NULL)",
          "old_line_content": "        sptr = lpNext(zl,eptr);",
          "new_line_content": "        serverAssert(eptr != NULL);",
          "content_same": false
        },
        {
          "line": 1517,
          "old_api": "serverAssert",
          "new_api": "lpNext",
          "old_text": "serverAssert(sptr != NULL)",
          "new_text": "lpNext(zl,eptr)",
          "old_line_content": "        serverAssert(sptr != NULL);",
          "new_line_content": "        sptr = lpNext(zl,eptr);",
          "content_same": false
        },
        {
          "line": 1544,
          "old_api": "zslGetRank",
          "new_api": "dictGetVal",
          "old_text": "zslGetRank(zsl,score,ele)",
          "new_text": "dictGetVal(de)",
          "old_line_content": "            rank = zslGetRank(zsl,score,ele);",
          "new_line_content": "            score = *(double*)dictGetVal(de);",
          "content_same": false
        },
        {
          "line": 1575,
          "old_api": "zmalloc",
          "new_api": "lpBytes",
          "old_text": "zmalloc(sz)",
          "new_text": "lpBytes(zl)",
          "old_line_content": "        unsigned char *new_zl = zmalloc(sz);",
          "new_line_content": "        size_t sz = lpBytes(zl);",
          "content_same": false
        },
        {
          "line": 1576,
          "old_api": "memcpy",
          "new_api": "zmalloc",
          "old_text": "memcpy(new_zl, zl, sz)",
          "new_text": "zmalloc(sz)",
          "old_line_content": "        memcpy(new_zl, zl, sz);",
          "new_line_content": "        unsigned char *new_zl = zmalloc(sz);",
          "content_same": false
        },
        {
          "line": 1577,
          "old_api": "createObject",
          "new_api": "memcpy",
          "old_text": "createObject(OBJ_ZSET, new_zl)",
          "new_text": "memcpy(new_zl, zl, sz)",
          "old_line_content": "        zobj = createObject(OBJ_ZSET, new_zl);",
          "new_line_content": "        memcpy(new_zl, zl, sz);",
          "content_same": false
        },
        {
          "line": 1599,
          "old_api": "zslInsert",
          "new_api": "sdsdup",
          "old_text": "zslInsert(new_zs->zsl,ln->score,new_ele)",
          "new_text": "sdsdup(ele)",
          "old_line_content": "            zskiplistNode *znode = zslInsert(new_zs->zsl,ln->score,new_ele);",
          "new_line_content": "            sds new_ele = sdsdup(ele);",
          "content_same": false
        },
        {
          "line": 1600,
          "old_api": "dictAdd",
          "new_api": "zslInsert",
          "old_text": "dictAdd(new_zs->dict,new_ele,&znode->score)",
          "new_text": "zslInsert(new_zs->zsl,ln->score,new_ele)",
          "old_line_content": "            dictAdd(new_zs->dict,new_ele,&znode->score);",
          "new_line_content": "            zskiplistNode *znode = zslInsert(new_zs->zsl,ln->score,new_ele);",
          "content_same": false
        },
        {
          "line": 1631,
          "old_api": "dictGetKey",
          "new_api": "dictGetFairRandomKey",
          "old_text": "dictGetKey(de)",
          "new_text": "dictGetFairRandomKey(zs->dict)",
          "old_line_content": "        sds s = dictGetKey(de);",
          "new_line_content": "        dictEntry *de = dictGetFairRandomKey(zs->dict);",
          "content_same": false
        },
        {
          "line": 1734,
          "old_api": "checkType",
          "new_api": "lookupKeyWrite",
          "old_text": "checkType(c,zobj,OBJ_ZSET)",
          "new_text": "lookupKeyWrite(c->db,key)",
          "old_line_content": "    if (checkType(c,zobj,OBJ_ZSET)) goto cleanup;",
          "new_line_content": "    zobj = lookupKeyWrite(c->db,key);",
          "content_same": false
        },
        {
          "line": 1779,
          "old_api": "notifyKeyspaceEvent",
          "new_api": "signalModifiedKey",
          "old_text": "notifyKeyspaceEvent(NOTIFY_ZSET,\n            incr ? \"zincr\" : \"zadd\", key, c->db->id)",
          "new_text": "signalModifiedKey(c,c->db,key)",
          "old_line_content": "        notifyKeyspaceEvent(NOTIFY_ZSET,",
          "new_line_content": "        signalModifiedKey(c,c->db,key);",
          "content_same": false
        },
        {
          "line": 1798,
          "old_api": "checkType",
          "new_api": "lookupKeyWriteOrReply",
          "old_text": "checkType(c,zobj,OBJ_ZSET)",
          "new_text": "lookupKeyWriteOrReply(c,key,shared.czero)",
          "old_line_content": "        checkType(c,zobj,OBJ_ZSET)) return;",
          "new_line_content": "    if ((zobj = lookupKeyWriteOrReply(c,key,shared.czero)) == NULL ||",
          "content_same": false
        },
        {
          "line": 1802,
          "old_api": "zsetLength",
          "new_api": "zsetDel",
          "old_text": "zsetLength(zobj)",
          "new_text": "zsetDel(zobj,c->argv[j]->ptr)",
          "old_line_content": "        if (zsetLength(zobj) == 0) {",
          "new_line_content": "        if (zsetDel(zobj,c->argv[j]->ptr)) deleted++;",
          "content_same": false
        },
        {
          "line": 1803,
          "old_api": "dbDelete",
          "new_api": "zsetLength",
          "old_text": "dbDelete(c->db,key)",
          "new_text": "zsetLength(zobj)",
          "old_line_content": "            dbDelete(c->db,key);",
          "new_line_content": "        if (zsetLength(zobj) == 0) {",
          "content_same": false
        },
        {
          "line": 1813,
          "old_api": "signalModifiedKey",
          "new_api": "notifyKeyspaceEvent",
          "old_text": "signalModifiedKey(c,c->db,key)",
          "new_text": "notifyKeyspaceEvent(NOTIFY_GENERIC,\"del\",key,c->db->id)",
          "old_line_content": "        signalModifiedKey(c,c->db,key);",
          "new_line_content": "            notifyKeyspaceEvent(NOTIFY_GENERIC,\"del\",key,c->db->id);",
          "content_same": false
        },
        {
          "line": 1846,
          "old_api": "addReplyError",
          "new_api": "zslParseRange",
          "old_text": "addReplyError(c,\"min or max is not a float\")",
          "new_text": "zslParseRange(c->argv[2],c->argv[3],&range)",
          "old_line_content": "            addReplyError(c,\"min or max is not a float\");",
          "new_line_content": "        if (zslParseRange(c->argv[2],c->argv[3],&range) != C_OK) {",
          "content_same": false
        },
        {
          "line": 1852,
          "old_api": "addReplyError",
          "new_api": "zslParseLexRange",
          "old_text": "addReplyError(c,\"min or max not valid string range item\")",
          "new_text": "zslParseLexRange(c->argv[2],c->argv[3],&lexrange)",
          "old_line_content": "            addReplyError(c,\"min or max not valid string range item\");",
          "new_line_content": "        if (zslParseLexRange(c->argv[2],c->argv[3],&lexrange) != C_OK) {",
          "content_same": false
        },
        {
          "line": 1861,
          "old_api": "checkType",
          "new_api": "lookupKeyWriteOrReply",
          "old_text": "checkType(c,zobj,OBJ_ZSET)",
          "new_text": "lookupKeyWriteOrReply(c,key,shared.czero)",
          "old_line_content": "        checkType(c,zobj,OBJ_ZSET)) goto cleanup;",
          "new_line_content": "    if ((zobj = lookupKeyWriteOrReply(c,key,shared.czero)) == NULL ||",
          "content_same": false
        },
        {
          "line": 1894,
          "old_api": "dbDelete",
          "new_api": "zzlLength",
          "old_text": "dbDelete(c->db,key)",
          "new_text": "zzlLength(zobj->ptr)",
          "old_line_content": "            dbDelete(c->db,key);",
          "new_line_content": "        if (zzlLength(zobj->ptr) == 0) {",
          "content_same": false
        },
        {
          "line": 1912,
          "old_api": "dictSize",
          "new_api": "dictResize",
          "old_text": "dictSize(zs->dict)",
          "new_text": "dictResize(zs->dict)",
          "old_line_content": "        if (dictSize(zs->dict) == 0) {",
          "new_line_content": "        if (htNeedsResize(zs->dict)) dictResize(zs->dict);",
          "content_same": false
        },
        {
          "line": 1913,
          "old_api": "dbDelete",
          "new_api": "dictSize",
          "old_text": "dbDelete(c->db,key)",
          "new_text": "dictSize(zs->dict)",
          "old_line_content": "            dbDelete(c->db,key);",
          "new_line_content": "        if (dictSize(zs->dict) == 0) {",
          "content_same": false
        },
        {
          "line": 1923,
          "old_api": "notifyKeyspaceEvent",
          "new_api": "signalModifiedKey",
          "old_text": "notifyKeyspaceEvent(NOTIFY_ZSET,notify_type,key,c->db->id)",
          "new_text": "signalModifiedKey(c,c->db,key)",
          "old_line_content": "        notifyKeyspaceEvent(NOTIFY_ZSET,notify_type,key,c->db->id);",
          "new_line_content": "        signalModifiedKey(c,c->db,key);",
          "content_same": false
        },
        {
          "line": 2017,
          "old_api": "dictNext",
          "new_api": "dictGetIterator",
          "old_text": "dictNext(it->ht.di)",
          "new_text": "dictGetIterator(op->subject->ptr)",
          "old_line_content": "            it->ht.de = dictNext(it->ht.di);",
          "new_line_content": "            it->ht.di = dictGetIterator(op->subject->ptr);",
          "content_same": false
        },
        {
          "line": 2031,
          "old_api": "serverAssert",
          "new_api": "lpNext",
          "old_text": "serverAssert(it->zl.sptr != NULL)",
          "new_text": "lpNext(it->zl.zl,it->zl.eptr)",
          "old_line_content": "                serverAssert(it->zl.sptr != NULL);",
          "new_line_content": "                it->zl.sptr = lpNext(it->zl.zl,it->zl.eptr);",
          "content_same": false
        },
        {
          "line": 2147,
          "old_api": "zzlGetScore",
          "new_api": "lpGetValue",
          "old_text": "zzlGetScore(it->zl.sptr)",
          "new_text": "lpGetValue(it->zl.eptr,&val->elen,&val->ell)",
          "old_line_content": "            val->score = zzlGetScore(it->zl.sptr);",
          "new_line_content": "            val->estr = lpGetValue(it->zl.eptr,&val->elen,&val->ell);",
          "content_same": false
        },
        {
          "line": 2238,
          "old_api": "intsetFind",
          "new_api": "zuiLongLongFromValue",
          "old_text": "intsetFind(op->subject->ptr,val->ell)",
          "new_text": "zuiLongLongFromValue(val)",
          "old_line_content": "                intsetFind(op->subject->ptr,val->ell))",
          "new_line_content": "            if (zuiLongLongFromValue(val) &&",
          "content_same": false
        },
        {
          "line": 2248,
          "old_api": "dictFind",
          "new_api": "zuiSdsFromValue",
          "old_text": "dictFind(ht,val->ele)",
          "new_text": "zuiSdsFromValue(val)",
          "old_line_content": "            if (dictFind(ht,val->ele) != NULL) {",
          "new_line_content": "            zuiSdsFromValue(val);",
          "content_same": false
        },
        {
          "line": 2271,
          "old_api": "dictGetVal",
          "new_api": "dictFind",
          "old_text": "dictGetVal(de)",
          "new_text": "dictFind(zs->dict,val->ele)",
          "old_line_content": "                *score = *(double*)dictGetVal(de);",
          "new_line_content": "            if ((de = dictFind(zs->dict,val->ele)) != NULL) {",
          "content_same": false
        },
        {
          "line": 2326,
          "old_api": "dictGetKey",
          "new_api": "dictNext",
          "old_text": "dictGetKey(de)",
          "new_text": "dictNext(di)",
          "old_line_content": "        sds ele = dictGetKey(de);",
          "new_line_content": "    while((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 2327,
          "old_api": "sdslen",
          "new_api": "dictGetKey",
          "old_text": "sdslen(ele)",
          "new_text": "dictGetKey(de)",
          "old_line_content": "        if (sdslen(ele) > maxelelen) maxelelen = sdslen(ele);",
          "new_line_content": "        sds ele = dictGetKey(de);",
          "content_same": false
        },
        {
          "line": 2362,
          "old_api": "zuiInitIterator",
          "new_api": "memset",
          "old_text": "zuiInitIterator(&src[0])",
          "new_text": "memset(&zval, 0, sizeof(zval))",
          "old_line_content": "    zuiInitIterator(&src[0]);",
          "new_line_content": "    memset(&zval, 0, sizeof(zval));",
          "content_same": false
        },
        {
          "line": 2363,
          "old_api": "zuiNext",
          "new_api": "zuiInitIterator",
          "old_text": "zuiNext(&src[0],&zval)",
          "new_text": "zuiInitIterator(&src[0])",
          "old_line_content": "    while (zuiNext(&src[0],&zval)) {",
          "new_line_content": "    zuiInitIterator(&src[0]);",
          "content_same": false
        },
        {
          "line": 2382,
          "old_api": "zslInsert",
          "new_api": "zuiNewSdsFromValue",
          "old_text": "zslInsert(dstzset->zsl,zval.score,tmp)",
          "new_text": "zuiNewSdsFromValue(&zval)",
          "old_line_content": "            znode = zslInsert(dstzset->zsl,zval.score,tmp);",
          "new_line_content": "            tmp = zuiNewSdsFromValue(&zval);",
          "content_same": false
        },
        {
          "line": 2383,
          "old_api": "dictAdd",
          "new_api": "zslInsert",
          "old_text": "dictAdd(dstzset->dict,tmp,&znode->score)",
          "new_text": "zslInsert(dstzset->zsl,zval.score,tmp)",
          "old_line_content": "            dictAdd(dstzset->dict,tmp,&znode->score);",
          "new_line_content": "            znode = zslInsert(dstzset->zsl,zval.score,tmp);",
          "content_same": false
        },
        {
          "line": 2384,
          "old_api": "sdslen",
          "new_api": "dictAdd",
          "old_text": "sdslen(tmp)",
          "new_text": "dictAdd(dstzset->dict,tmp,&znode->score)",
          "old_line_content": "            if (sdslen(tmp) > *maxelelen) *maxelelen = sdslen(tmp);",
          "new_line_content": "            dictAdd(dstzset->dict,tmp,&znode->score);",
          "content_same": false
        },
        {
          "line": 2418,
          "old_api": "zuiInitIterator",
          "new_api": "memset",
          "old_text": "zuiInitIterator(&src[j])",
          "new_text": "memset(&zval, 0, sizeof(zval))",
          "old_line_content": "        zuiInitIterator(&src[j]);",
          "new_line_content": "        memset(&zval, 0, sizeof(zval));",
          "content_same": false
        },
        {
          "line": 2419,
          "old_api": "zuiNext",
          "new_api": "zuiInitIterator",
          "old_text": "zuiNext(&src[j],&zval)",
          "new_text": "zuiInitIterator(&src[j])",
          "old_line_content": "        while (zuiNext(&src[j],&zval)) {",
          "new_line_content": "        zuiInitIterator(&src[j]);",
          "content_same": false
        },
        {
          "line": 2422,
          "old_api": "zslInsert",
          "new_api": "zuiNewSdsFromValue",
          "old_text": "zslInsert(dstzset->zsl,zval.score,tmp)",
          "new_text": "zuiNewSdsFromValue(&zval)",
          "old_line_content": "                znode = zslInsert(dstzset->zsl,zval.score,tmp);",
          "new_line_content": "                tmp = zuiNewSdsFromValue(&zval);",
          "content_same": false
        },
        {
          "line": 2423,
          "old_api": "dictAdd",
          "new_api": "zslInsert",
          "old_text": "dictAdd(dstzset->dict,tmp,&znode->score)",
          "new_text": "zslInsert(dstzset->zsl,zval.score,tmp)",
          "old_line_content": "                dictAdd(dstzset->dict,tmp,&znode->score);",
          "new_line_content": "                znode = zslInsert(dstzset->zsl,zval.score,tmp);",
          "content_same": false
        },
        {
          "line": 2427,
          "old_api": "zsetRemoveFromSkiplist",
          "new_api": "zuiSdsFromValue",
          "old_text": "zsetRemoveFromSkiplist(dstzset, tmp)",
          "new_text": "zuiSdsFromValue(&zval)",
          "old_line_content": "                if (zsetRemoveFromSkiplist(dstzset, tmp)) {",
          "new_line_content": "                tmp = zuiSdsFromValue(&zval);",
          "content_same": false
        },
        {
          "line": 2486,
          "old_api": "zsetChooseDiffAlgorithm",
          "new_api": "zuiLength",
          "old_text": "zsetChooseDiffAlgorithm(src, setnum)",
          "new_text": "zuiLength(&src[0])",
          "old_line_content": "        int diff_algo = zsetChooseDiffAlgorithm(src, setnum);",
          "new_line_content": "    if (zuiLength(&src[0]) > 0) {",
          "content_same": false
        },
        {
          "line": 2558,
          "old_api": "addReplyErrorObject",
          "new_api": "zfree",
          "old_text": "addReplyErrorObject(c,shared.wrongtypeerr)",
          "new_text": "zfree(src)",
          "old_line_content": "                addReplyErrorObject(c,shared.wrongtypeerr);",
          "new_line_content": "                zfree(src);",
          "content_same": false
        },
        {
          "line": 2604,
          "old_api": "addReplyErrorObject",
          "new_api": "zfree",
          "old_text": "addReplyErrorObject(c,shared.syntaxerr)",
          "new_text": "zfree(src)",
          "old_line_content": "                    addReplyErrorObject(c,shared.syntaxerr);",
          "new_line_content": "                    zfree(src);",
          "content_same": false
        },
        {
          "line": 2627,
          "old_api": "addReplyErrorObject",
          "new_api": "zfree",
          "old_text": "addReplyErrorObject(c,shared.syntaxerr)",
          "new_text": "zfree(src)",
          "old_line_content": "                addReplyErrorObject(c,shared.syntaxerr);",
          "new_line_content": "                zfree(src);",
          "content_same": false
        },
        {
          "line": 2649,
          "old_api": "zuiNext",
          "new_api": "zuiInitIterator",
          "old_text": "zuiNext(&src[0],&zval)",
          "new_text": "zuiInitIterator(&src[0])",
          "old_line_content": "            while (zuiNext(&src[0],&zval)) {",
          "new_line_content": "            zuiInitIterator(&src[0]);",
          "content_same": false
        },
        {
          "line": 2661,
          "old_api": "zuiFind",
          "new_api": "zunionInterAggregate",
          "old_text": "zuiFind(&src[j],&zval,&value)",
          "new_text": "zunionInterAggregate(&score,value,aggregate)",
          "old_line_content": "                    } else if (zuiFind(&src[j],&zval,&value)) {",
          "new_line_content": "                        zunionInterAggregate(&score,value,aggregate);",
          "content_same": false
        },
        {
          "line": 2681,
          "old_api": "zslInsert",
          "new_api": "zuiNewSdsFromValue",
          "old_text": "zslInsert(dstzset->zsl,score,tmp)",
          "new_text": "zuiNewSdsFromValue(&zval)",
          "old_line_content": "                    znode = zslInsert(dstzset->zsl,score,tmp);",
          "new_line_content": "                    tmp = zuiNewSdsFromValue(&zval);",
          "content_same": false
        },
        {
          "line": 2682,
          "old_api": "dictAdd",
          "new_api": "zslInsert",
          "old_text": "dictAdd(dstzset->dict,tmp,&znode->score)",
          "new_text": "zslInsert(dstzset->zsl,score,tmp)",
          "old_line_content": "                    dictAdd(dstzset->dict,tmp,&znode->score);",
          "new_line_content": "                    znode = zslInsert(dstzset->zsl,score,tmp);",
          "content_same": false
        },
        {
          "line": 2683,
          "old_api": "sdslen",
          "new_api": "dictAdd",
          "old_text": "sdslen(tmp)",
          "new_text": "dictAdd(dstzset->dict,tmp,&znode->score)",
          "old_line_content": "                    totelelen += sdslen(tmp);",
          "new_line_content": "                    dictAdd(dstzset->dict,tmp,&znode->score);",
          "content_same": false
        },
        {
          "line": 2707,
          "old_api": "zuiNext",
          "new_api": "zuiInitIterator",
          "old_text": "zuiNext(&src[i],&zval)",
          "new_text": "zuiInitIterator(&src[i])",
          "old_line_content": "            while (zuiNext(&src[i],&zval)) {",
          "new_line_content": "            zuiInitIterator(&src[i]);",
          "content_same": false
        },
        {
          "line": 2724,
          "old_api": "dictSetDoubleVal",
          "new_api": "dictSetKey",
          "old_text": "dictSetDoubleVal(de,score)",
          "new_text": "dictSetKey(accumulator, de, tmp)",
          "old_line_content": "                    dictSetDoubleVal(de,score);",
          "new_line_content": "                    dictSetKey(accumulator, de, tmp);",
          "content_same": false
        },
        {
          "line": 2747,
          "old_api": "dictGetKey",
          "new_api": "dictNext",
          "old_text": "dictGetKey(de)",
          "new_text": "dictNext(di)",
          "old_line_content": "            sds ele = dictGetKey(de);",
          "new_line_content": "        while((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 2748,
          "old_api": "dictGetDoubleVal",
          "new_api": "dictGetKey",
          "old_text": "dictGetDoubleVal(de)",
          "new_text": "dictGetKey(de)",
          "old_line_content": "            score = dictGetDoubleVal(de);",
          "new_line_content": "            sds ele = dictGetKey(de);",
          "content_same": false
        },
        {
          "line": 2749,
          "old_api": "zslInsert",
          "new_api": "dictGetDoubleVal",
          "old_text": "zslInsert(dstzset->zsl,score,ele)",
          "new_text": "dictGetDoubleVal(de)",
          "old_line_content": "            znode = zslInsert(dstzset->zsl,score,ele);",
          "new_line_content": "            score = dictGetDoubleVal(de);",
          "content_same": false
        },
        {
          "line": 2750,
          "old_api": "dictAdd",
          "new_api": "zslInsert",
          "old_text": "dictAdd(dstzset->dict,ele,&znode->score)",
          "new_text": "zslInsert(dstzset->zsl,score,ele)",
          "old_line_content": "            dictAdd(dstzset->dict,ele,&znode->score);",
          "new_line_content": "            znode = zslInsert(dstzset->zsl,score,ele);",
          "content_same": false
        },
        {
          "line": 2753,
          "old_api": "dictRelease",
          "new_api": "dictReleaseIterator",
          "old_text": "dictRelease(accumulator)",
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "        dictRelease(accumulator);",
          "new_line_content": "        dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 2763,
          "old_api": "setKey",
          "new_api": "zsetConvertToListpackIfNeeded",
          "old_text": "setKey(c, c->db, dstkey, dstobj, 0)",
          "new_text": "zsetConvertToListpackIfNeeded(dstobj, maxelelen, totelelen)",
          "old_line_content": "            setKey(c, c->db, dstkey, dstobj, 0);",
          "new_line_content": "            zsetConvertToListpackIfNeeded(dstobj, maxelelen, totelelen);",
          "content_same": false
        },
        {
          "line": 2764,
          "old_api": "zsetLength",
          "new_api": "setKey",
          "old_text": "zsetLength(dstobj)",
          "new_text": "setKey(c, c->db, dstkey, dstobj, 0)",
          "old_line_content": "            addReplyLongLong(c, zsetLength(dstobj));",
          "new_line_content": "            setKey(c, c->db, dstkey, dstobj, 0);",
          "content_same": false
        },
        {
          "line": 2765,
          "old_api": "notifyKeyspaceEvent",
          "new_api": "zsetLength",
          "old_text": "notifyKeyspaceEvent(NOTIFY_ZSET,\n                                (op == SET_OP_UNION) ? \"zunionstore\" :\n                                    (op == SET_OP_INTER ? \"zinterstore\" : \"zdiffstore\"),\n                                dstkey, c->db->id)",
          "new_text": "zsetLength(dstobj)",
          "old_line_content": "            notifyKeyspaceEvent(NOTIFY_ZSET,",
          "new_line_content": "            addReplyLongLong(c, zsetLength(dstobj));",
          "content_same": false
        },
        {
          "line": 2772,
          "old_api": "dbDelete",
          "new_api": "addReply",
          "old_text": "dbDelete(c->db, dstkey)",
          "new_text": "addReply(c, shared.czero)",
          "old_line_content": "            if (dbDelete(c->db, dstkey)) {",
          "new_line_content": "            addReply(c, shared.czero);",
          "content_same": false
        },
        {
          "line": 2773,
          "old_api": "signalModifiedKey",
          "new_api": "dbDelete",
          "old_text": "signalModifiedKey(c, c->db, dstkey)",
          "new_text": "dbDelete(c->db, dstkey)",
          "old_line_content": "                signalModifiedKey(c, c->db, dstkey);",
          "new_line_content": "            if (dbDelete(c->db, dstkey)) {",
          "content_same": false
        },
        {
          "line": 2774,
          "old_api": "notifyKeyspaceEvent",
          "new_api": "signalModifiedKey",
          "old_text": "notifyKeyspaceEvent(NOTIFY_GENERIC, \"del\", dstkey, c->db->id)",
          "new_text": "signalModifiedKey(c, c->db, dstkey)",
          "old_line_content": "                notifyKeyspaceEvent(NOTIFY_GENERIC, \"del\", dstkey, c->db->id);",
          "new_line_content": "                signalModifiedKey(c, c->db, dstkey);",
          "content_same": false
        },
        {
          "line": 2794,
          "old_api": "sdslen",
          "new_api": "addReplyArrayLen",
          "old_text": "sdslen(zn->ele)",
          "new_text": "addReplyArrayLen(c,2)",
          "old_line_content": "            addReplyBulkCBuffer(c,zn->ele,sdslen(zn->ele));",
          "new_line_content": "            if (withscores && c->resp > 2) addReplyArrayLen(c,2);",
          "content_same": false
        },
        {
          "line": 2795,
          "old_api": "addReplyDouble",
          "new_api": "sdslen",
          "old_text": "addReplyDouble(c,zn->score)",
          "new_text": "sdslen(zn->ele)",
          "old_line_content": "            if (withscores) addReplyDouble(c,zn->score);",
          "new_line_content": "            addReplyBulkCBuffer(c,zn->ele,sdslen(zn->ele));",
          "content_same": false
        },
        {
          "line": 2800,
          "old_api": "zfree",
          "new_api": "decrRefCount",
          "old_text": "zfree(src)",
          "new_text": "decrRefCount(dstobj)",
          "old_line_content": "    zfree(src);",
          "new_line_content": "    decrRefCount(dstobj);",
          "content_same": false
        },
        {
          "line": 2946,
          "old_api": "createZsetListpackObject",
          "new_api": "UNUSED",
          "old_text": "createZsetListpackObject()",
          "new_text": "UNUSED(length)",
          "old_line_content": "    handler->dstobj = createZsetListpackObject();",
          "new_line_content": "    UNUSED(length);",
          "content_same": false
        },
        {
          "line": 2955,
          "old_api": "zsetAdd",
          "new_api": "sdsnewlen",
          "old_text": "zsetAdd(handler->dstobj, score, ele, ZADD_IN_NONE, &retflags, &newscore)",
          "new_text": "sdsnewlen(value, value_length_in_bytes)",
          "old_line_content": "    int retval = zsetAdd(handler->dstobj, score, ele, ZADD_IN_NONE, &retflags, &newscore);",
          "new_line_content": "    sds ele = sdsnewlen(value, value_length_in_bytes);",
          "content_same": false
        },
        {
          "line": 2956,
          "old_api": "sdsfree",
          "new_api": "zsetAdd",
          "old_text": "sdsfree(ele)",
          "new_text": "zsetAdd(handler->dstobj, score, ele, ZADD_IN_NONE, &retflags, &newscore)",
          "old_line_content": "    sdsfree(ele);",
          "new_line_content": "    int retval = zsetAdd(handler->dstobj, score, ele, ZADD_IN_NONE, &retflags, &newscore);",
          "content_same": false
        },
        {
          "line": 2957,
          "old_api": "serverAssert",
          "new_api": "sdsfree",
          "old_text": "serverAssert(retval)",
          "new_text": "sdsfree(ele)",
          "old_line_content": "    serverAssert(retval);",
          "new_line_content": "    sdsfree(ele);",
          "content_same": false
        },
        {
          "line": 2966,
          "old_api": "zsetAdd",
          "new_api": "sdsfromlonglong",
          "old_text": "zsetAdd(handler->dstobj, score, ele, ZADD_IN_NONE, &retflags, &newscore)",
          "new_text": "sdsfromlonglong(value)",
          "old_line_content": "    int retval = zsetAdd(handler->dstobj, score, ele, ZADD_IN_NONE, &retflags, &newscore);",
          "new_line_content": "    sds ele = sdsfromlonglong(value);",
          "content_same": false
        },
        {
          "line": 2967,
          "old_api": "sdsfree",
          "new_api": "zsetAdd",
          "old_text": "sdsfree(ele)",
          "new_text": "zsetAdd(handler->dstobj, score, ele, ZADD_IN_NONE, &retflags, &newscore)",
          "old_line_content": "    sdsfree(ele);",
          "new_line_content": "    int retval = zsetAdd(handler->dstobj, score, ele, ZADD_IN_NONE, &retflags, &newscore);",
          "content_same": false
        },
        {
          "line": 2968,
          "old_api": "serverAssert",
          "new_api": "sdsfree",
          "old_text": "serverAssert(retval)",
          "new_text": "sdsfree(ele)",
          "old_line_content": "    serverAssert(retval);",
          "new_line_content": "    sdsfree(ele);",
          "content_same": false
        },
        {
          "line": 2975,
          "old_api": "addReplyLongLong",
          "new_api": "setKey",
          "old_text": "addReplyLongLong(handler->client, result_count)",
          "new_text": "setKey(handler->client, handler->client->db, handler->dstkey, handler->dstobj, 0)",
          "old_line_content": "        addReplyLongLong(handler->client, result_count);",
          "new_line_content": "        setKey(handler->client, handler->client->db, handler->dstkey, handler->dstobj, 0);",
          "content_same": false
        },
        {
          "line": 2976,
          "old_api": "notifyKeyspaceEvent",
          "new_api": "addReplyLongLong",
          "old_text": "notifyKeyspaceEvent(NOTIFY_ZSET, \"zrangestore\", handler->dstkey, handler->client->db->id)",
          "new_text": "addReplyLongLong(handler->client, result_count)",
          "old_line_content": "        notifyKeyspaceEvent(NOTIFY_ZSET, \"zrangestore\", handler->dstkey, handler->client->db->id);",
          "new_line_content": "        addReplyLongLong(handler->client, result_count);",
          "content_same": false
        },
        {
          "line": 2980,
          "old_api": "dbDelete",
          "new_api": "addReply",
          "old_text": "dbDelete(handler->client->db, handler->dstkey)",
          "new_text": "addReply(handler->client, shared.czero)",
          "old_line_content": "        if (dbDelete(handler->client->db, handler->dstkey)) {",
          "new_line_content": "        addReply(handler->client, shared.czero);",
          "content_same": false
        },
        {
          "line": 2981,
          "old_api": "signalModifiedKey",
          "new_api": "dbDelete",
          "old_text": "signalModifiedKey(handler->client, handler->client->db, handler->dstkey)",
          "new_text": "dbDelete(handler->client->db, handler->dstkey)",
          "old_line_content": "            signalModifiedKey(handler->client, handler->client->db, handler->dstkey);",
          "new_line_content": "        if (dbDelete(handler->client->db, handler->dstkey)) {",
          "content_same": false
        },
        {
          "line": 2982,
          "old_api": "notifyKeyspaceEvent",
          "new_api": "signalModifiedKey",
          "old_text": "notifyKeyspaceEvent(NOTIFY_GENERIC, \"del\", handler->dstkey, handler->client->db->id)",
          "new_text": "signalModifiedKey(handler->client, handler->client->db, handler->dstkey)",
          "old_line_content": "            notifyKeyspaceEvent(NOTIFY_GENERIC, \"del\", handler->dstkey, handler->client->db->id);",
          "new_line_content": "            signalModifiedKey(handler->client, handler->client->db, handler->dstkey);",
          "content_same": false
        },
        {
          "line": 3045,
          "old_api": "finalizeResultEmission",
          "new_api": "beginResultEmission",
          "old_text": "handler->finalizeResultEmission(handler, 0)",
          "new_text": "handler->beginResultEmission(handler, 0)",
          "old_line_content": "        handler->finalizeResultEmission(handler, 0);",
          "new_line_content": "        handler->beginResultEmission(handler, 0);",
          "content_same": false
        },
        {
          "line": 3067,
          "old_api": "lpNext",
          "new_api": "serverAssertWithInfo",
          "old_text": "lpNext(zl,eptr)",
          "new_text": "serverAssertWithInfo(c,zobj,eptr != NULL)",
          "old_line_content": "        sptr = lpNext(zl,eptr);",
          "new_line_content": "        serverAssertWithInfo(c,zobj,eptr != NULL);",
          "content_same": false
        },
        {
          "line": 3071,
          "old_api": "lpGetValue",
          "new_api": "serverAssertWithInfo",
          "old_text": "lpGetValue(eptr,&vlen,&vlong)",
          "new_text": "serverAssertWithInfo(c,zobj,eptr != NULL && sptr != NULL)",
          "old_line_content": "            vstr = lpGetValue(eptr,&vlen,&vlong);",
          "new_line_content": "            serverAssertWithInfo(c,zobj,eptr != NULL && sptr != NULL);",
          "content_same": false
        },
        {
          "line": 3122,
          "old_api": "zrangeResultHandlerDestinationKeySet",
          "new_api": "zrangeResultHandlerInit",
          "old_text": "zrangeResultHandlerDestinationKeySet(&handler, dstkey)",
          "new_text": "zrangeResultHandlerInit(&handler, c, ZRANGE_CONSUMER_TYPE_INTERNAL)",
          "old_line_content": "    zrangeResultHandlerDestinationKeySet(&handler, dstkey);",
          "new_line_content": "    zrangeResultHandlerInit(&handler, c, ZRANGE_CONSUMER_TYPE_INTERNAL);",
          "content_same": false
        },
        {
          "line": 3123,
          "old_api": "zrangeGenericCommand",
          "new_api": "zrangeResultHandlerDestinationKeySet",
          "old_text": "zrangeGenericCommand(&handler, 2, 1, ZRANGE_AUTO, ZRANGE_DIRECTION_AUTO)",
          "new_text": "zrangeResultHandlerDestinationKeySet(&handler, dstkey)",
          "old_line_content": "    zrangeGenericCommand(&handler, 2, 1, ZRANGE_AUTO, ZRANGE_DIRECTION_AUTO);",
          "new_line_content": "    zrangeResultHandlerDestinationKeySet(&handler, dstkey);",
          "content_same": false
        },
        {
          "line": 3130,
          "old_api": "zrangeGenericCommand",
          "new_api": "zrangeResultHandlerInit",
          "old_text": "zrangeGenericCommand(&handler, 1, 0, ZRANGE_AUTO, ZRANGE_DIRECTION_AUTO)",
          "new_text": "zrangeResultHandlerInit(&handler, c, ZRANGE_CONSUMER_TYPE_CLIENT)",
          "old_line_content": "    zrangeGenericCommand(&handler, 1, 0, ZRANGE_AUTO, ZRANGE_DIRECTION_AUTO);",
          "new_line_content": "    zrangeResultHandlerInit(&handler, c, ZRANGE_CONSUMER_TYPE_CLIENT);",
          "content_same": false
        },
        {
          "line": 3137,
          "old_api": "zrangeGenericCommand",
          "new_api": "zrangeResultHandlerInit",
          "old_text": "zrangeGenericCommand(&handler, 1, 0, ZRANGE_RANK, ZRANGE_DIRECTION_REVERSE)",
          "new_text": "zrangeResultHandlerInit(&handler, c, ZRANGE_CONSUMER_TYPE_CLIENT)",
          "old_line_content": "    zrangeGenericCommand(&handler, 1, 0, ZRANGE_RANK, ZRANGE_DIRECTION_REVERSE);",
          "new_line_content": "    zrangeResultHandlerInit(&handler, c, ZRANGE_CONSUMER_TYPE_CLIENT);",
          "content_same": false
        },
        {
          "line": 3150,
          "old_api": "finalizeResultEmission",
          "new_api": "zsetLength",
          "old_text": "handler->finalizeResultEmission(handler, 0)",
          "new_text": "zsetLength(zobj)",
          "old_line_content": "        handler->finalizeResultEmission(handler, 0);",
          "new_line_content": "    if (offset > 0 && offset >= (long)zsetLength(zobj)) {",
          "content_same": false
        },
        {
          "line": 3258,
          "old_api": "zrangeGenericCommand",
          "new_api": "zrangeResultHandlerInit",
          "old_text": "zrangeGenericCommand(&handler, 1, 0, ZRANGE_SCORE, ZRANGE_DIRECTION_FORWARD)",
          "new_text": "zrangeResultHandlerInit(&handler, c, ZRANGE_CONSUMER_TYPE_CLIENT)",
          "old_line_content": "    zrangeGenericCommand(&handler, 1, 0, ZRANGE_SCORE, ZRANGE_DIRECTION_FORWARD);",
          "new_line_content": "    zrangeResultHandlerInit(&handler, c, ZRANGE_CONSUMER_TYPE_CLIENT);",
          "content_same": false
        },
        {
          "line": 3265,
          "old_api": "zrangeGenericCommand",
          "new_api": "zrangeResultHandlerInit",
          "old_text": "zrangeGenericCommand(&handler, 1, 0, ZRANGE_SCORE, ZRANGE_DIRECTION_REVERSE)",
          "new_text": "zrangeResultHandlerInit(&handler, c, ZRANGE_CONSUMER_TYPE_CLIENT)",
          "old_line_content": "    zrangeGenericCommand(&handler, 1, 0, ZRANGE_SCORE, ZRANGE_DIRECTION_REVERSE);",
          "new_line_content": "    zrangeResultHandlerInit(&handler, c, ZRANGE_CONSUMER_TYPE_CLIENT);",
          "content_same": false
        },
        {
          "line": 3276,
          "old_api": "addReplyError",
          "new_api": "zslParseRange",
          "old_text": "addReplyError(c,\"min or max is not a float\")",
          "new_text": "zslParseRange(c->argv[2],c->argv[3],&range)",
          "old_line_content": "        addReplyError(c,\"min or max is not a float\");",
          "new_line_content": "    if (zslParseRange(c->argv[2],c->argv[3],&range) != C_OK) {",
          "content_same": false
        },
        {
          "line": 3282,
          "old_api": "checkType",
          "new_api": "lookupKeyReadOrReply",
          "old_text": "checkType(c, zobj, OBJ_ZSET)",
          "new_text": "lookupKeyReadOrReply(c, key, shared.czero)",
          "old_line_content": "        checkType(c, zobj, OBJ_ZSET)) return;",
          "new_line_content": "    if ((zobj = lookupKeyReadOrReply(c, key, shared.czero)) == NULL ||",
          "content_same": false
        },
        {
          "line": 3300,
          "old_api": "zzlGetScore",
          "new_api": "lpNext",
          "old_text": "zzlGetScore(sptr)",
          "new_text": "lpNext(zl,eptr)",
          "old_line_content": "        score = zzlGetScore(sptr);",
          "new_line_content": "        sptr = lpNext(zl,eptr);",
          "content_same": false
        },
        {
          "line": 3301,
          "old_api": "zslValueLteMax",
          "new_api": "zzlGetScore",
          "old_text": "zslValueLteMax(score,&range)",
          "new_text": "zzlGetScore(sptr)",
          "old_line_content": "        serverAssertWithInfo(c,zobj,zslValueLteMax(score,&range));",
          "new_line_content": "        score = zzlGetScore(sptr);",
          "content_same": false
        },
        {
          "line": 3353,
          "old_api": "addReplyError",
          "new_api": "zslParseLexRange",
          "old_text": "addReplyError(c,\"min or max not valid string range item\")",
          "new_text": "zslParseLexRange(c->argv[2],c->argv[3],&range)",
          "old_line_content": "        addReplyError(c,\"min or max not valid string range item\");",
          "new_line_content": "    if (zslParseLexRange(c->argv[2],c->argv[3],&range) != C_OK) {",
          "content_same": false
        },
        {
          "line": 3359,
          "old_api": "checkType",
          "new_api": "lookupKeyReadOrReply",
          "old_text": "checkType(c, zobj, OBJ_ZSET)",
          "new_text": "lookupKeyReadOrReply(c, key, shared.czero)",
          "old_line_content": "        checkType(c, zobj, OBJ_ZSET))",
          "new_line_content": "    if ((zobj = lookupKeyReadOrReply(c, key, shared.czero)) == NULL ||",
          "content_same": false
        },
        {
          "line": 3375,
          "old_api": "addReply",
          "new_api": "zslFreeLexRange",
          "old_text": "addReply(c, shared.czero)",
          "new_text": "zslFreeLexRange(&range)",
          "old_line_content": "            addReply(c, shared.czero);",
          "new_line_content": "            zslFreeLexRange(&range);",
          "content_same": false
        },
        {
          "line": 3381,
          "old_api": "zzlLexValueLteMax",
          "new_api": "lpNext",
          "old_text": "zzlLexValueLteMax(eptr,&range)",
          "new_text": "lpNext(zl,eptr)",
          "old_line_content": "        serverAssertWithInfo(c,zobj,zzlLexValueLteMax(eptr,&range));",
          "new_line_content": "        sptr = lpNext(zl,eptr);",
          "content_same": false
        },
        {
          "line": 3421,
          "old_api": "addReplyLongLong",
          "new_api": "zslFreeLexRange",
          "old_text": "addReplyLongLong(c, count)",
          "new_text": "zslFreeLexRange(&range)",
          "old_line_content": "    addReplyLongLong(c, count);",
          "new_line_content": "    zslFreeLexRange(&range);",
          "content_same": false
        },
        {
          "line": 3539,
          "old_api": "zrangeGenericCommand",
          "new_api": "zrangeResultHandlerInit",
          "old_text": "zrangeGenericCommand(&handler, 1, 0, ZRANGE_LEX, ZRANGE_DIRECTION_FORWARD)",
          "new_text": "zrangeResultHandlerInit(&handler, c, ZRANGE_CONSUMER_TYPE_CLIENT)",
          "old_line_content": "    zrangeGenericCommand(&handler, 1, 0, ZRANGE_LEX, ZRANGE_DIRECTION_FORWARD);",
          "new_line_content": "    zrangeResultHandlerInit(&handler, c, ZRANGE_CONSUMER_TYPE_CLIENT);",
          "content_same": false
        },
        {
          "line": 3546,
          "old_api": "zrangeGenericCommand",
          "new_api": "zrangeResultHandlerInit",
          "old_text": "zrangeGenericCommand(&handler, 1, 0, ZRANGE_LEX, ZRANGE_DIRECTION_REVERSE)",
          "new_text": "zrangeResultHandlerInit(&handler, c, ZRANGE_CONSUMER_TYPE_CLIENT)",
          "old_line_content": "    zrangeGenericCommand(&handler, 1, 0, ZRANGE_LEX, ZRANGE_DIRECTION_REVERSE);",
          "new_line_content": "    zrangeResultHandlerInit(&handler, c, ZRANGE_CONSUMER_TYPE_CLIENT);",
          "content_same": false
        },
        {
          "line": 3583,
          "old_api": "getLongFromObjectOrReply",
          "new_api": "strcasecmp",
          "old_text": "getLongFromObjectOrReply(c, c->argv[j+1], &opt_offset, NULL)",
          "new_text": "strcasecmp(c->argv[j]->ptr,\"limit\")",
          "old_line_content": "            if ((getLongFromObjectOrReply(c, c->argv[j+1], &opt_offset, NULL) != C_OK) ||",
          "new_line_content": "        } else if (!strcasecmp(c->argv[j]->ptr,\"limit\") && leftargs >= 2) {",
          "content_same": false
        },
        {
          "line": 3647,
          "old_api": "addReplyError",
          "new_api": "zslParseRange",
          "old_text": "addReplyError(c, \"min or max is not a float\")",
          "new_text": "zslParseRange(c->argv[minidx], c->argv[maxidx], &range)",
          "old_line_content": "            addReplyError(c, \"min or max is not a float\");",
          "new_line_content": "        if (zslParseRange(c->argv[minidx], c->argv[maxidx], &range) != C_OK) {",
          "content_same": false
        },
        {
          "line": 3655,
          "old_api": "addReplyError",
          "new_api": "zslParseLexRange",
          "old_text": "addReplyError(c, \"min or max not valid string range item\")",
          "new_text": "zslParseLexRange(c->argv[minidx], c->argv[maxidx], &lexrange)",
          "old_line_content": "            addReplyError(c, \"min or max not valid string range item\");",
          "new_line_content": "        if (zslParseLexRange(c->argv[minidx], c->argv[maxidx], &lexrange) != C_OK) {",
          "content_same": false
        },
        {
          "line": 3670,
          "old_api": "finalizeResultEmission",
          "new_api": "beginResultEmission",
          "old_text": "handler->finalizeResultEmission(handler, 0)",
          "new_text": "handler->beginResultEmission(handler, -1)",
          "old_line_content": "            handler->finalizeResultEmission(handler, 0);",
          "new_line_content": "            handler->beginResultEmission(handler, -1);",
          "content_same": false
        },
        {
          "line": 3712,
          "old_api": "checkType",
          "new_api": "lookupKeyReadOrReply",
          "old_text": "checkType(c,zobj,OBJ_ZSET)",
          "new_text": "lookupKeyReadOrReply(c,key,shared.czero)",
          "old_line_content": "        checkType(c,zobj,OBJ_ZSET)) return;",
          "new_line_content": "    if ((zobj = lookupKeyReadOrReply(c,key,shared.czero)) == NULL ||",
          "content_same": false
        },
        {
          "line": 3723,
          "old_api": "checkType",
          "new_api": "lookupKeyReadOrReply",
          "old_text": "checkType(c,zobj,OBJ_ZSET)",
          "new_text": "lookupKeyReadOrReply(c,key,shared.null[c->resp])",
          "old_line_content": "        checkType(c,zobj,OBJ_ZSET)) return;",
          "new_line_content": "    if ((zobj = lookupKeyReadOrReply(c,key,shared.null[c->resp])) == NULL ||",
          "content_same": false
        },
        {
          "line": 3726,
          "old_api": "addReplyNull",
          "new_api": "zsetScore",
          "old_text": "addReplyNull(c)",
          "new_text": "zsetScore(zobj,c->argv[2]->ptr,&score)",
          "old_line_content": "        addReplyNull(c);",
          "new_line_content": "    if (zsetScore(zobj,c->argv[2]->ptr,&score) == C_ERR) {",
          "content_same": false
        },
        {
          "line": 3737,
          "old_api": "checkType",
          "new_api": "lookupKeyRead",
          "old_text": "checkType(c,zobj,OBJ_ZSET)",
          "new_text": "lookupKeyRead(c->db,key)",
          "old_line_content": "    if (checkType(c,zobj,OBJ_ZSET)) return;",
          "new_line_content": "    zobj = lookupKeyRead(c->db,key);",
          "content_same": false
        },
        {
          "line": 3743,
          "old_api": "addReplyNull",
          "new_api": "zsetScore",
          "old_text": "addReplyNull(c)",
          "new_text": "zsetScore(zobj,c->argv[j]->ptr,&score)",
          "old_line_content": "            addReplyNull(c);",
          "new_line_content": "        if (zobj == NULL || zsetScore(zobj,c->argv[j]->ptr,&score) == C_ERR) {",
          "content_same": false
        },
        {
          "line": 3757,
          "old_api": "checkType",
          "new_api": "lookupKeyReadOrReply",
          "old_text": "checkType(c,zobj,OBJ_ZSET)",
          "new_text": "lookupKeyReadOrReply(c,key,shared.null[c->resp])",
          "old_line_content": "        checkType(c,zobj,OBJ_ZSET)) return;",
          "new_line_content": "    if ((zobj = lookupKeyReadOrReply(c,key,shared.null[c->resp])) == NULL ||",
          "content_same": false
        },
        {
          "line": 3760,
          "old_api": "zsetRank",
          "new_api": "sdsEncodedObject",
          "old_text": "zsetRank(zobj,ele->ptr,reverse)",
          "new_text": "sdsEncodedObject(ele)",
          "old_line_content": "    rank = zsetRank(zobj,ele->ptr,reverse);",
          "new_line_content": "    serverAssertWithInfo(c,ele,sdsEncodedObject(ele));",
          "content_same": false
        },
        {
          "line": 3781,
          "old_api": "lookupKeyReadOrReply",
          "new_api": "parseScanCursorOrReply",
          "old_text": "lookupKeyReadOrReply(c,c->argv[1],shared.emptyscan)",
          "new_text": "parseScanCursorOrReply(c,c->argv[2],&cursor)",
          "old_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.emptyscan)) == NULL ||",
          "new_line_content": "    if (parseScanCursorOrReply(c,c->argv[2],&cursor) == C_ERR) return;",
          "content_same": false
        },
        {
          "line": 3782,
          "old_api": "checkType",
          "new_api": "lookupKeyReadOrReply",
          "old_text": "checkType(c,o,OBJ_ZSET)",
          "new_text": "lookupKeyReadOrReply(c,c->argv[1],shared.emptyscan)",
          "old_line_content": "        checkType(c,o,OBJ_ZSET)) return;",
          "new_line_content": "    if ((o = lookupKeyReadOrReply(c,c->argv[1],shared.emptyscan)) == NULL ||",
          "content_same": false
        },
        {
          "line": 3783,
          "old_api": "scanGenericCommand",
          "new_api": "checkType",
          "old_text": "scanGenericCommand(c,o,cursor)",
          "new_text": "checkType(c,o,OBJ_ZSET)",
          "old_line_content": "    scanGenericCommand(c,o,cursor);",
          "new_line_content": "        checkType(c,o,OBJ_ZSET)) return;",
          "content_same": false
        },
        {
          "line": 3860,
          "old_api": "addReplyBulk",
          "new_api": "addReplyArrayLen",
          "old_text": "addReplyBulk(c, key)",
          "new_text": "addReplyArrayLen(c, rangelen * 2 + 1)",
          "old_line_content": "        addReplyBulk(c, key);",
          "new_line_content": "        addReplyArrayLen(c, rangelen * 2 + 1);",
          "content_same": false
        },
        {
          "line": 3864,
          "old_api": "addReplyBulk",
          "new_api": "addReplyArrayLen",
          "old_text": "addReplyBulk(c, key)",
          "new_text": "addReplyArrayLen(c, 2)",
          "old_line_content": "        addReplyBulk(c, key);",
          "new_line_content": "        addReplyArrayLen(c, 2);",
          "content_same": false
        },
        {
          "line": 3865,
          "old_api": "addReplyArrayLen",
          "new_api": "addReplyBulk",
          "old_text": "addReplyArrayLen(c, rangelen)",
          "new_text": "addReplyBulk(c, key)",
          "old_line_content": "        addReplyArrayLen(c, rangelen);",
          "new_line_content": "        addReplyBulk(c, key);",
          "content_same": false
        },
        {
          "line": 3879,
          "old_api": "serverAssertWithInfo",
          "new_api": "lpSeek",
          "old_text": "serverAssertWithInfo(c,zobj,eptr != NULL)",
          "new_text": "lpSeek(zl,where == ZSET_MAX ? -2 : 0)",
          "old_line_content": "            serverAssertWithInfo(c,zobj,eptr != NULL);",
          "new_line_content": "            eptr = lpSeek(zl,where == ZSET_MAX ? -2 : 0);",
          "content_same": false
        },
        {
          "line": 3880,
          "old_api": "lpGetValue",
          "new_api": "serverAssertWithInfo",
          "old_text": "lpGetValue(eptr,&vlen,&vlong)",
          "new_text": "serverAssertWithInfo(c,zobj,eptr != NULL)",
          "old_line_content": "            vstr = lpGetValue(eptr,&vlen,&vlong);",
          "new_line_content": "            serverAssertWithInfo(c,zobj,eptr != NULL);",
          "content_same": false
        },
        {
          "line": 3888,
          "old_api": "serverAssertWithInfo",
          "new_api": "lpNext",
          "old_text": "serverAssertWithInfo(c,zobj,sptr != NULL)",
          "new_text": "lpNext(zl,eptr)",
          "old_line_content": "            serverAssertWithInfo(c,zobj,sptr != NULL);",
          "new_line_content": "            sptr = lpNext(zl,eptr);",
          "content_same": false
        },
        {
          "line": 3889,
          "old_api": "zzlGetScore",
          "new_api": "serverAssertWithInfo",
          "old_text": "zzlGetScore(sptr)",
          "new_text": "serverAssertWithInfo(c,zobj,sptr != NULL)",
          "old_line_content": "            score = zzlGetScore(sptr);",
          "new_line_content": "            serverAssertWithInfo(c,zobj,sptr != NULL);",
          "content_same": false
        },
        {
          "line": 3901,
          "old_api": "sdsdup",
          "new_api": "serverAssertWithInfo",
          "old_text": "sdsdup(zln->ele)",
          "new_text": "serverAssertWithInfo(c,zobj,zln != NULL)",
          "old_line_content": "            ele = sdsdup(zln->ele);",
          "new_line_content": "            serverAssertWithInfo(c,zobj,zln != NULL);",
          "content_same": false
        },
        {
          "line": 3913,
          "old_api": "signalModifiedKey",
          "new_api": "notifyKeyspaceEvent",
          "old_text": "signalModifiedKey(c,c->db,key)",
          "new_text": "notifyKeyspaceEvent(NOTIFY_ZSET,events[where],key,c->db->id)",
          "old_line_content": "            signalModifiedKey(c,c->db,key);",
          "new_line_content": "            notifyKeyspaceEvent(NOTIFY_ZSET,events[where],key,c->db->id);",
          "content_same": false
        },
        {
          "line": 3920,
          "old_api": "addReplyDouble",
          "new_api": "sdslen",
          "old_text": "addReplyDouble(c,score)",
          "new_text": "sdslen(ele)",
          "old_line_content": "        addReplyDouble(c,score);",
          "new_line_content": "        addReplyBulkCBuffer(c,ele,sdslen(ele));",
          "content_same": false
        },
        {
          "line": 3921,
          "old_api": "sdsfree",
          "new_api": "addReplyDouble",
          "old_text": "sdsfree(ele)",
          "new_text": "addReplyDouble(c,score)",
          "old_line_content": "        sdsfree(ele);",
          "new_line_content": "        addReplyDouble(c,score);",
          "content_same": false
        },
        {
          "line": 3930,
          "old_api": "notifyKeyspaceEvent",
          "new_api": "dbDelete",
          "old_text": "notifyKeyspaceEvent(NOTIFY_GENERIC,\"del\",key,c->db->id)",
          "new_text": "dbDelete(c->db,key)",
          "old_line_content": "        notifyKeyspaceEvent(NOTIFY_GENERIC,\"del\",key,c->db->id);",
          "new_line_content": "        dbDelete(c->db,key);",
          "content_same": false
        },
        {
          "line": 3936,
          "old_api": "rewriteClientCommandVector",
          "new_api": "createStringObjectFromLongLong",
          "old_text": "rewriteClientCommandVector(c, 3,\n                                   (where == ZSET_MAX) ? shared.zpopmax : shared.zpopmin,\n                                   key, count_obj)",
          "new_text": "createStringObjectFromLongLong((count > llen) ? llen : count)",
          "old_line_content": "        rewriteClientCommandVector(c, 3,",
          "new_line_content": "        robj *count_obj = createStringObjectFromLongLong((count > llen) ? llen : count);",
          "content_same": false
        },
        {
          "line": 4017,
          "old_api": "rewriteClientCommandVector",
          "new_api": "createStringObjectFromLongLong",
          "old_text": "rewriteClientCommandVector(c, 3,\n                                       (where == ZSET_MAX) ? shared.zpopmax : shared.zpopmin,\n                                       key, count_obj)",
          "new_text": "createStringObjectFromLongLong((count > llen) ? llen : count)",
          "old_line_content": "            rewriteClientCommandVector(c, 3,",
          "new_line_content": "            robj *count_obj = createStringObjectFromLongLong((count > llen) ? llen : count);",
          "content_same": false
        },
        {
          "line": 4081,
          "old_api": "checkType",
          "new_api": "lookupKeyReadOrReply",
          "old_text": "checkType(c, zsetobj, OBJ_ZSET)",
          "new_text": "lookupKeyReadOrReply(c, c->argv[1], shared.emptyarray)",
          "old_line_content": "        == NULL || checkType(c, zsetobj, OBJ_ZSET)) return;",
          "new_line_content": "    if ((zsetobj = lookupKeyReadOrReply(c, c->argv[1], shared.emptyarray))",
          "content_same": false
        },
        {
          "line": 4082,
          "old_api": "zsetLength",
          "new_api": "checkType",
          "old_text": "zsetLength(zsetobj)",
          "new_text": "checkType(c, zsetobj, OBJ_ZSET)",
          "old_line_content": "    size = zsetLength(zsetobj);",
          "new_line_content": "        == NULL || checkType(c, zsetobj, OBJ_ZSET)) return;",
          "content_same": false
        },
        {
          "line": 4111,
          "old_api": "dictGetKey",
          "new_api": "dictGetFairRandomKey",
          "old_text": "dictGetKey(de)",
          "new_text": "dictGetFairRandomKey(zs->dict)",
          "old_line_content": "                sds key = dictGetKey(de);",
          "new_line_content": "                dictEntry *de = dictGetFairRandomKey(zs->dict);",
          "content_same": false
        },
        {
          "line": 4114,
          "old_api": "sdslen",
          "new_api": "addReplyArrayLen",
          "old_text": "sdslen(key)",
          "new_text": "addReplyArrayLen(c,2)",
          "old_line_content": "                addReplyBulkCBuffer(c, key, sdslen(key));",
          "new_line_content": "                    addReplyArrayLen(c,2);",
          "content_same": false
        },
        {
          "line": 4129,
          "old_api": "zarndmemberReplyWithListpack",
          "new_api": "lpRandomPairs",
          "old_text": "zarndmemberReplyWithListpack(c, sample_count, keys, vals)",
          "new_text": "lpRandomPairs(zsetobj->ptr, sample_count, keys, vals)",
          "old_line_content": "                zarndmemberReplyWithListpack(c, sample_count, keys, vals);",
          "new_line_content": "                lpRandomPairs(zsetobj->ptr, sample_count, keys, vals);",
          "content_same": false
        },
        {
          "line": 4143,
          "old_api": "memset",
          "new_api": "zuiInitIterator",
          "old_text": "memset(&zval, 0, sizeof(zval))",
          "new_text": "zuiInitIterator(&src)",
          "old_line_content": "    memset(&zval, 0, sizeof(zval));",
          "new_line_content": "    zuiInitIterator(&src);",
          "content_same": false
        },
        {
          "line": 4159,
          "old_api": "zuiNewSdsFromValue",
          "new_api": "addReplyArrayLen",
          "old_text": "zuiNewSdsFromValue(&zval)",
          "new_text": "addReplyArrayLen(c,2)",
          "old_line_content": "            addReplyBulkSds(c, zuiNewSdsFromValue(&zval));",
          "new_line_content": "                addReplyArrayLen(c,2);",
          "content_same": false
        },
        {
          "line": 4178,
          "old_api": "dictExpand",
          "new_api": "dictCreate",
          "old_text": "dictExpand(d, size)",
          "new_text": "dictCreate(&sdsReplyDictType)",
          "old_line_content": "        dictExpand(d, size);",
          "new_line_content": "        dict *d = dictCreate(&sdsReplyDictType);",
          "content_same": false
        },
        {
          "line": 4181,
          "old_api": "zuiNewSdsFromValue",
          "new_api": "zuiNext",
          "old_text": "zuiNewSdsFromValue(&zval)",
          "new_text": "zuiNext(&src, &zval)",
          "old_line_content": "            sds key = zuiNewSdsFromValue(&zval);",
          "new_line_content": "        while (zuiNext(&src, &zval)) {",
          "content_same": false
        },
        {
          "line": 4182,
          "old_api": "dictAddRaw",
          "new_api": "zuiNewSdsFromValue",
          "old_text": "dictAddRaw(d, key, NULL)",
          "new_text": "zuiNewSdsFromValue(&zval)",
          "old_line_content": "            dictEntry *de = dictAddRaw(d, key, NULL);",
          "new_line_content": "            sds key = zuiNewSdsFromValue(&zval);",
          "content_same": false
        },
        {
          "line": 4183,
          "old_api": "serverAssert",
          "new_api": "dictAddRaw",
          "old_text": "serverAssert(de)",
          "new_text": "dictAddRaw(d, key, NULL)",
          "old_line_content": "            serverAssert(de);",
          "new_line_content": "            dictEntry *de = dictAddRaw(d, key, NULL);",
          "content_same": false
        },
        {
          "line": 4193,
          "old_api": "dictGetKey",
          "new_api": "dictGetFairRandomKey",
          "old_text": "dictGetKey(de)",
          "new_text": "dictGetFairRandomKey(d)",
          "old_line_content": "            dictUnlink(d,dictGetKey(de));",
          "new_line_content": "            de = dictGetFairRandomKey(d);",
          "content_same": false
        },
        {
          "line": 4195,
          "old_api": "dictFreeUnlinkedEntry",
          "new_api": "dictGetKey",
          "old_text": "dictFreeUnlinkedEntry(d,de)",
          "new_text": "dictGetKey(de)",
          "old_line_content": "            dictFreeUnlinkedEntry(d,de);",
          "new_line_content": "            sdsfree(dictGetKey(de));",
          "content_same": false
        },
        {
          "line": 4203,
          "old_api": "dictNext",
          "new_api": "dictGetIterator",
          "old_text": "dictNext(di)",
          "new_text": "dictGetIterator(d)",
          "old_line_content": "        while ((de = dictNext(di)) != NULL) {",
          "new_line_content": "        di = dictGetIterator(d);",
          "content_same": false
        },
        {
          "line": 4206,
          "old_api": "dictGetKey",
          "new_api": "addReplyArrayLen",
          "old_text": "dictGetKey(de)",
          "new_text": "addReplyArrayLen(c,2)",
          "old_line_content": "            addReplyBulkSds(c, dictGetKey(de));",
          "new_line_content": "                addReplyArrayLen(c,2);",
          "content_same": false
        },
        {
          "line": 4212,
          "old_api": "dictRelease",
          "new_api": "dictReleaseIterator",
          "old_text": "dictRelease(d)",
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "        dictRelease(d);",
          "new_line_content": "        dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 4227,
          "old_api": "lpRandomPairsUnique",
          "new_api": "zmalloc",
          "old_text": "lpRandomPairsUnique(zsetobj->ptr, count, keys, vals)",
          "new_text": "zmalloc(sizeof(listpackEntry)*count)",
          "old_line_content": "            serverAssert(lpRandomPairsUnique(zsetobj->ptr, count, keys, vals) == count);",
          "new_line_content": "                vals = zmalloc(sizeof(listpackEntry)*count);",
          "content_same": false
        },
        {
          "line": 4228,
          "old_api": "zarndmemberReplyWithListpack",
          "new_api": "lpRandomPairsUnique",
          "old_text": "zarndmemberReplyWithListpack(c, count, keys, vals)",
          "new_text": "lpRandomPairsUnique(zsetobj->ptr, count, keys, vals)",
          "old_line_content": "            zarndmemberReplyWithListpack(c, count, keys, vals);",
          "new_line_content": "            serverAssert(lpRandomPairsUnique(zsetobj->ptr, count, keys, vals) == count);",
          "content_same": false
        },
        {
          "line": 4229,
          "old_api": "zfree",
          "new_api": "zarndmemberReplyWithListpack",
          "old_text": "zfree(keys)",
          "new_text": "zarndmemberReplyWithListpack(c, count, keys, vals)",
          "old_line_content": "            zfree(keys);",
          "new_line_content": "            zarndmemberReplyWithListpack(c, count, keys, vals);",
          "content_same": false
        },
        {
          "line": 4231,
          "old_api": "zuiClearIterator",
          "new_api": "zfree",
          "old_text": "zuiClearIterator(&src)",
          "new_text": "zfree(vals)",
          "old_line_content": "            zuiClearIterator(&src);",
          "new_line_content": "            zfree(vals);",
          "content_same": false
        },
        {
          "line": 4238,
          "old_api": "dictExpand",
          "new_api": "dictCreate",
          "old_text": "dictExpand(d, count)",
          "new_text": "dictCreate(&hashDictType)",
          "old_line_content": "        dictExpand(d, count);",
          "new_line_content": "        dict *d = dictCreate(&hashDictType);",
          "content_same": false
        },
        {
          "line": 4249,
          "old_api": "dictAdd",
          "new_api": "zsetSdsFromListpackEntry",
          "old_text": "dictAdd(d,skey,NULL)",
          "new_text": "zsetSdsFromListpackEntry(&key)",
          "old_line_content": "            if (dictAdd(d,skey,NULL) != DICT_OK) {",
          "new_line_content": "            sds skey = zsetSdsFromListpackEntry(&key);",
          "content_same": false
        },
        {
          "line": 4250,
          "old_api": "sdsfree",
          "new_api": "dictAdd",
          "old_text": "sdsfree(skey)",
          "new_text": "dictAdd(d,skey,NULL)",
          "old_line_content": "                sdsfree(skey);",
          "new_line_content": "            if (dictAdd(d,skey,NULL) != DICT_OK) {",
          "content_same": false
        },
        {
          "line": 4257,
          "old_api": "zsetReplyFromListpackEntry",
          "new_api": "addReplyArrayLen",
          "old_text": "zsetReplyFromListpackEntry(c, &key)",
          "new_text": "addReplyArrayLen(c,2)",
          "old_line_content": "            zsetReplyFromListpackEntry(c, &key);",
          "new_line_content": "                addReplyArrayLen(c,2);",
          "content_same": false
        },
        {
          "line": 4277,
          "old_api": "strcasecmp",
          "new_api": "getLongFromObjectOrReply",
          "old_text": "strcasecmp(c->argv[3]->ptr,\"withscores\")",
          "new_text": "getLongFromObjectOrReply(c,c->argv[2],&l,NULL)",
          "old_line_content": "        if (c->argc > 4 || (c->argc == 4 && strcasecmp(c->argv[3]->ptr,\"withscores\"))) {",
          "new_line_content": "        if (getLongFromObjectOrReply(c,c->argv[2],&l,NULL) != C_OK) return;",
          "content_same": false
        },
        {
          "line": 4278,
          "old_api": "addReplyErrorObject",
          "new_api": "strcasecmp",
          "old_text": "addReplyErrorObject(c,shared.syntaxerr)",
          "new_text": "strcasecmp(c->argv[3]->ptr,\"withscores\")",
          "old_line_content": "            addReplyErrorObject(c,shared.syntaxerr);",
          "new_line_content": "        if (c->argc > 4 || (c->argc == 4 && strcasecmp(c->argv[3]->ptr,\"withscores\"))) {",
          "content_same": false
        },
        {
          "line": 4288,
          "old_api": "checkType",
          "new_api": "lookupKeyReadOrReply",
          "old_text": "checkType(c,zset,OBJ_ZSET)",
          "new_text": "lookupKeyReadOrReply(c,c->argv[1],shared.null[c->resp])",
          "old_line_content": "        checkType(c,zset,OBJ_ZSET)) {",
          "new_line_content": "    if ((zset = lookupKeyReadOrReply(c,c->argv[1],shared.null[c->resp]))== NULL ||",
          "content_same": false
        },
        {
          "line": 4293,
          "old_api": "zsetReplyFromListpackEntry",
          "new_api": "zsetLength",
          "old_text": "zsetReplyFromListpackEntry(c,&ele)",
          "new_text": "zsetLength(zset)",
          "old_line_content": "    zsetReplyFromListpackEntry(c,&ele);",
          "new_line_content": "    zsetTypeRandomElement(zset, zsetLength(zset), &ele,NULL);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 2052,
          "old_api": null,
          "new_api": "UNUSED",
          "old_text": null,
          "new_text": "UNUSED(it)",
          "old_line_content": "        } else if (op->encoding == OBJ_ENCODING_HT) {",
          "new_line_content": "            UNUSED(it); /* skip */",
          "content_same": false
        },
        {
          "line": 2054,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(it->ht.di)",
          "old_line_content": "        } else {",
          "new_line_content": "            dictReleaseIterator(it->ht.di);",
          "content_same": false
        },
        {
          "line": 2056,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Unknown set encoding\")",
          "old_line_content": "        }",
          "new_line_content": "            serverPanic(\"Unknown set encoding\");",
          "content_same": false
        },
        {
          "line": 4105,
          "old_api": null,
          "new_api": "addReplyArrayLen",
          "old_text": null,
          "new_text": "addReplyArrayLen(c, count*2)",
          "old_line_content": "        else",
          "new_line_content": "            addReplyArrayLen(c, count*2);",
          "content_same": false
        },
        {
          "line": 4107,
          "old_api": null,
          "new_api": "addReplyArrayLen",
          "old_text": null,
          "new_text": "addReplyArrayLen(c, count)",
          "old_line_content": "        if (zsetobj->encoding == OBJ_ENCODING_SKIPLIST) {",
          "new_line_content": "            addReplyArrayLen(c, count);",
          "content_same": false
        },
        {
          "line": 2061,
          "old_api": null,
          "new_api": "UNUSED",
          "old_text": null,
          "new_text": "UNUSED(it)",
          "old_line_content": "        } else if (op->encoding == OBJ_ENCODING_SKIPLIST) {",
          "new_line_content": "            UNUSED(it); /* skip */",
          "content_same": false
        },
        {
          "line": 2063,
          "old_api": null,
          "new_api": "UNUSED",
          "old_text": null,
          "new_text": "UNUSED(it)",
          "old_line_content": "        } else {",
          "new_line_content": "            UNUSED(it); /* skip */",
          "content_same": false
        },
        {
          "line": 4112,
          "old_api": null,
          "new_api": "dictGetKey",
          "old_text": null,
          "new_text": "dictGetKey(de)",
          "old_line_content": "                if (withscores && c->resp > 2)",
          "new_line_content": "                sds key = dictGetKey(de);",
          "content_same": false
        },
        {
          "line": 2065,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Unknown sorted set encoding\")",
          "old_line_content": "        }",
          "new_line_content": "            serverPanic(\"Unknown sorted set encoding\");",
          "content_same": false
        },
        {
          "line": 4115,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(key)",
          "old_line_content": "                if (withscores)",
          "new_line_content": "                addReplyBulkCBuffer(c, key, sdslen(key));",
          "content_same": false
        },
        {
          "line": 2068,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Unsupported type\")",
          "old_line_content": "    }",
          "new_line_content": "        serverPanic(\"Unsupported type\");",
          "content_same": false
        },
        {
          "line": 4117,
          "old_api": null,
          "new_api": "dictGetVal",
          "old_text": null,
          "new_text": "dictGetVal(de)",
          "old_line_content": "            }",
          "new_line_content": "                    addReplyDouble(c, *(double*)dictGetVal(de));",
          "content_same": false
        },
        {
          "line": 2074,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(val->ele)",
          "old_line_content": "        val->ele = NULL;",
          "new_line_content": "        sdsfree(val->ele);",
          "content_same": false
        },
        {
          "line": 4123,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(listpackEntry)*limit)",
          "old_line_content": "            if (withscores)",
          "new_line_content": "            keys = zmalloc(sizeof(listpackEntry)*limit);",
          "content_same": false
        },
        {
          "line": 4125,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(listpackEntry)*limit)",
          "old_line_content": "            while (count) {",
          "new_line_content": "                vals = zmalloc(sizeof(listpackEntry)*limit);",
          "content_same": false
        },
        {
          "line": 4130,
          "old_api": null,
          "new_api": "zarndmemberReplyWithListpack",
          "old_text": null,
          "new_text": "zarndmemberReplyWithListpack(c, sample_count, keys, vals)",
          "old_line_content": "            }",
          "new_line_content": "                zarndmemberReplyWithListpack(c, sample_count, keys, vals);",
          "content_same": false
        },
        {
          "line": 4133,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(vals)",
          "old_line_content": "        }",
          "new_line_content": "            zfree(vals);",
          "content_same": false
        },
        {
          "line": 2086,
          "old_api": null,
          "new_api": "intsetLen",
          "old_text": null,
          "new_text": "intsetLen(op->subject->ptr)",
          "old_line_content": "        } else if (op->encoding == OBJ_ENCODING_HT) {",
          "new_line_content": "            return intsetLen(op->subject->ptr);",
          "content_same": false
        },
        {
          "line": 2089,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(ht)",
          "old_line_content": "        } else {",
          "new_line_content": "            return dictSize(ht);",
          "content_same": false
        },
        {
          "line": 2091,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Unknown set encoding\")",
          "old_line_content": "        }",
          "new_line_content": "            serverPanic(\"Unknown set encoding\");",
          "content_same": false
        },
        {
          "line": 2095,
          "old_api": null,
          "new_api": "zzlLength",
          "old_text": null,
          "new_text": "zzlLength(op->subject->ptr)",
          "old_line_content": "        } else if (op->encoding == OBJ_ENCODING_SKIPLIST) {",
          "new_line_content": "            return zzlLength(op->subject->ptr);",
          "content_same": false
        },
        {
          "line": 4144,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(&zval, 0, sizeof(zval))",
          "old_line_content": "",
          "new_line_content": "    memset(&zval, 0, sizeof(zval));",
          "content_same": false
        },
        {
          "line": 2100,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Unknown sorted set encoding\")",
          "old_line_content": "        }",
          "new_line_content": "            serverPanic(\"Unknown sorted set encoding\");",
          "content_same": false
        },
        {
          "line": 4149,
          "old_api": null,
          "new_api": "addReplyArrayLen",
          "old_text": null,
          "new_text": "addReplyArrayLen(c, reply_size*2)",
          "old_line_content": "    else",
          "new_line_content": "        addReplyArrayLen(c, reply_size*2);",
          "content_same": false
        },
        {
          "line": 2103,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Unsupported type\")",
          "old_line_content": "    }",
          "new_line_content": "        serverPanic(\"Unsupported type\");",
          "content_same": false
        },
        {
          "line": 4151,
          "old_api": null,
          "new_api": "addReplyArrayLen",
          "old_text": null,
          "new_text": "addReplyArrayLen(c, reply_size)",
          "old_line_content": "",
          "new_line_content": "        addReplyArrayLen(c, reply_size);",
          "content_same": false
        },
        {
          "line": 4157,
          "old_api": null,
          "new_api": "zuiNext",
          "old_text": null,
          "new_text": "zuiNext(&src, &zval)",
          "old_line_content": "            if (withscores && c->resp > 2)",
          "new_line_content": "        while (zuiNext(&src, &zval)) {",
          "content_same": false
        },
        {
          "line": 4160,
          "old_api": null,
          "new_api": "zuiNewSdsFromValue",
          "old_text": null,
          "new_text": "zuiNewSdsFromValue(&zval)",
          "old_line_content": "            if (withscores)",
          "new_line_content": "            addReplyBulkSds(c, zuiNewSdsFromValue(&zval));",
          "content_same": false
        },
        {
          "line": 2114,
          "old_api": null,
          "new_api": "zuiDiscardDirtyValue",
          "old_text": null,
          "new_text": "zuiDiscardDirtyValue(val)",
          "old_line_content": "",
          "new_line_content": "    zuiDiscardDirtyValue(val);",
          "content_same": false
        },
        {
          "line": 4162,
          "old_api": null,
          "new_api": "addReplyDouble",
          "old_text": null,
          "new_text": "addReplyDouble(c, zval.score)",
          "old_line_content": "        }",
          "new_line_content": "                addReplyDouble(c, zval.score);",
          "content_same": false
        },
        {
          "line": 2116,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(val,0,sizeof(zsetopval))",
          "old_line_content": "",
          "new_line_content": "    memset(val,0,sizeof(zsetopval));",
          "content_same": false
        },
        {
          "line": 4164,
          "old_api": null,
          "new_api": "zuiClearIterator",
          "old_text": null,
          "new_text": "zuiClearIterator(&src)",
          "old_line_content": "        return;",
          "new_line_content": "        zuiClearIterator(&src);",
          "content_same": false
        },
        {
          "line": 2123,
          "old_api": null,
          "new_api": "intsetGet",
          "old_text": null,
          "new_text": "intsetGet(it->is.is,it->is.ii,&ell)",
          "old_line_content": "                return 0;",
          "new_line_content": "            if (!intsetGet(it->is.is,it->is.ii,&ell))",
          "content_same": false
        },
        {
          "line": 4179,
          "old_api": null,
          "new_api": "dictExpand",
          "old_text": null,
          "new_text": "dictExpand(d, size)",
          "old_line_content": "        /* Add all the elements into the temporary dictionary. */",
          "new_line_content": "        dictExpand(d, size);",
          "content_same": false
        },
        {
          "line": 2133,
          "old_api": null,
          "new_api": "dictGetKey",
          "old_text": null,
          "new_text": "dictGetKey(it->ht.de)",
          "old_line_content": "            val->score = 1.0;",
          "new_line_content": "            val->ele = dictGetKey(it->ht.de);",
          "content_same": false
        },
        {
          "line": 4184,
          "old_api": null,
          "new_api": "serverAssert",
          "old_text": null,
          "new_text": "serverAssert(de)",
          "old_line_content": "            if (withscores)",
          "new_line_content": "            serverAssert(de);",
          "content_same": false
        },
        {
          "line": 2137,
          "old_api": null,
          "new_api": "dictNext",
          "old_text": null,
          "new_text": "dictNext(it->ht.di)",
          "old_line_content": "        } else {",
          "new_line_content": "            it->ht.de = dictNext(it->ht.di);",
          "content_same": false
        },
        {
          "line": 4186,
          "old_api": null,
          "new_api": "dictSetDoubleVal",
          "old_text": null,
          "new_text": "dictSetDoubleVal(de, zval.score)",
          "old_line_content": "        }",
          "new_line_content": "                dictSetDoubleVal(de, zval.score);",
          "content_same": false
        },
        {
          "line": 2139,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Unknown set encoding\")",
          "old_line_content": "        }",
          "new_line_content": "            serverPanic(\"Unknown set encoding\");",
          "content_same": false
        },
        {
          "line": 4188,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(d)",
          "old_line_content": "",
          "new_line_content": "        serverAssert(dictSize(d) == size);",
          "content_same": false
        },
        {
          "line": 2148,
          "old_api": null,
          "new_api": "zzlGetScore",
          "old_text": null,
          "new_text": "zzlGetScore(it->zl.sptr)",
          "old_line_content": "",
          "new_line_content": "            val->score = zzlGetScore(it->zl.sptr);",
          "content_same": false
        },
        {
          "line": 4196,
          "old_api": null,
          "new_api": "dictFreeUnlinkedEntry",
          "old_text": null,
          "new_text": "dictFreeUnlinkedEntry(d,de)",
          "old_line_content": "            size--;",
          "new_line_content": "            dictFreeUnlinkedEntry(d,de);",
          "content_same": false
        },
        {
          "line": 2151,
          "old_api": null,
          "new_api": "zzlPrev",
          "old_text": null,
          "new_text": "zzlPrev(it->zl.zl,&it->zl.eptr,&it->zl.sptr)",
          "old_line_content": "        } else if (op->encoding == OBJ_ENCODING_SKIPLIST) {",
          "new_line_content": "            zzlPrev(it->zl.zl,&it->zl.eptr,&it->zl.sptr);",
          "content_same": false
        },
        {
          "line": 4204,
          "old_api": null,
          "new_api": "dictNext",
          "old_text": null,
          "new_text": "dictNext(di)",
          "old_line_content": "            if (withscores && c->resp > 2)",
          "new_line_content": "        while ((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 4207,
          "old_api": null,
          "new_api": "dictGetKey",
          "old_text": null,
          "new_text": "dictGetKey(de)",
          "old_line_content": "            if (withscores)",
          "new_line_content": "            addReplyBulkSds(c, dictGetKey(de));",
          "content_same": false
        },
        {
          "line": 2161,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Unknown sorted set encoding\")",
          "old_line_content": "        }",
          "new_line_content": "            serverPanic(\"Unknown sorted set encoding\");",
          "content_same": false
        },
        {
          "line": 4209,
          "old_api": null,
          "new_api": "dictGetDoubleVal",
          "old_text": null,
          "new_text": "dictGetDoubleVal(de)",
          "old_line_content": "        }",
          "new_line_content": "                addReplyDouble(c, dictGetDoubleVal(de));",
          "content_same": false
        },
        {
          "line": 2164,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Unsupported type\")",
          "old_line_content": "    }",
          "new_line_content": "        serverPanic(\"Unsupported type\");",
          "content_same": false
        },
        {
          "line": 4213,
          "old_api": null,
          "new_api": "dictRelease",
          "old_text": null,
          "new_text": "dictRelease(d)",
          "old_line_content": "    }",
          "new_line_content": "        dictRelease(d);",
          "content_same": false
        },
        {
          "line": 125,
          "old_api": null,
          "new_api": "random",
          "old_text": null,
          "new_text": "random()",
          "old_line_content": "        level += 1;",
          "new_line_content": "    while (random() < threshold)",
          "content_same": false
        },
        {
          "line": 2174,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(val->ele)",
          "old_line_content": "                val->flags |= OPVAL_VALID_LL;",
          "new_line_content": "            if (string2ll(val->ele,sdslen(val->ele),&val->ell))",
          "content_same": false
        },
        {
          "line": 2177,
          "old_api": null,
          "new_api": "string2ll",
          "old_text": null,
          "new_text": "string2ll((char*)val->estr,val->elen,&val->ell)",
          "old_line_content": "                val->flags |= OPVAL_VALID_LL;",
          "new_line_content": "            if (string2ll((char*)val->estr,val->elen,&val->ell))",
          "content_same": false
        },
        {
          "line": 4225,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(listpackEntry)*count)",
          "old_line_content": "            if (withscores)",
          "new_line_content": "            keys = zmalloc(sizeof(listpackEntry)*count);",
          "content_same": false
        },
        {
          "line": 4232,
          "old_api": null,
          "new_api": "zuiClearIterator",
          "old_text": null,
          "new_text": "zuiClearIterator(&src)",
          "old_line_content": "            return;",
          "new_line_content": "            zuiClearIterator(&src);",
          "content_same": false
        },
        {
          "line": 138,
          "old_api": null,
          "new_api": "isnan",
          "old_text": null,
          "new_text": "isnan(score)",
          "old_line_content": "    x = zsl->header;",
          "new_line_content": "    serverAssert(!isnan(score));",
          "content_same": false
        },
        {
          "line": 2190,
          "old_api": null,
          "new_api": "sdsnewlen",
          "old_text": null,
          "new_text": "sdsnewlen((char*)val->estr,val->elen)",
          "old_line_content": "        } else {",
          "new_line_content": "            val->ele = sdsnewlen((char*)val->estr,val->elen);",
          "content_same": false
        },
        {
          "line": 4239,
          "old_api": null,
          "new_api": "dictExpand",
          "old_text": null,
          "new_text": "dictExpand(d, count)",
          "old_line_content": "",
          "new_line_content": "        dictExpand(d, count);",
          "content_same": false
        },
        {
          "line": 2192,
          "old_api": null,
          "new_api": "sdsfromlonglong",
          "old_text": null,
          "new_text": "sdsfromlonglong(val->ell)",
          "old_line_content": "        }",
          "new_line_content": "            val->ele = sdsfromlonglong(val->ell);",
          "content_same": false
        },
        {
          "line": 146,
          "old_api": null,
          "new_api": "sdscmp",
          "old_text": null,
          "new_text": "sdscmp(x->level[i].forward->ele,ele)",
          "old_line_content": "        {",
          "new_line_content": "                    sdscmp(x->level[i].forward->ele,ele) < 0)))",
          "content_same": false
        },
        {
          "line": 4244,
          "old_api": null,
          "new_api": "zsetTypeRandomElement",
          "old_text": null,
          "new_text": "zsetTypeRandomElement(zsetobj, size, &key, withscores ? &score: NULL)",
          "old_line_content": "",
          "new_line_content": "            zsetTypeRandomElement(zsetobj, size, &key, withscores ? &score: NULL);",
          "content_same": false
        },
        {
          "line": 4251,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(skey)",
          "old_line_content": "                continue;",
          "new_line_content": "                sdsfree(skey);",
          "content_same": false
        },
        {
          "line": 157,
          "old_api": null,
          "new_api": "zslRandomLevel",
          "old_text": null,
          "new_text": "zslRandomLevel()",
          "old_line_content": "    if (level > zsl->level) {",
          "new_line_content": "    level = zslRandomLevel();",
          "content_same": false
        },
        {
          "line": 2209,
          "old_api": null,
          "new_api": "sdsdup",
          "old_text": null,
          "new_text": "sdsdup(val->ele)",
          "old_line_content": "    } else if (val->estr) {",
          "new_line_content": "        return sdsdup(val->ele);",
          "content_same": false
        },
        {
          "line": 4258,
          "old_api": null,
          "new_api": "zsetReplyFromListpackEntry",
          "old_text": null,
          "new_text": "zsetReplyFromListpackEntry(c, &key)",
          "old_line_content": "            if (withscores)",
          "new_line_content": "            zsetReplyFromListpackEntry(c, &key);",
          "content_same": false
        },
        {
          "line": 2211,
          "old_api": null,
          "new_api": "sdsnewlen",
          "old_text": null,
          "new_text": "sdsnewlen((char*)val->estr,val->elen)",
          "old_line_content": "    } else {",
          "new_line_content": "        return sdsnewlen((char*)val->estr,val->elen);",
          "content_same": false
        },
        {
          "line": 4260,
          "old_api": null,
          "new_api": "addReplyDouble",
          "old_text": null,
          "new_text": "addReplyDouble(c, score)",
          "old_line_content": "        }",
          "new_line_content": "                addReplyDouble(c, score);",
          "content_same": false
        },
        {
          "line": 2213,
          "old_api": null,
          "new_api": "sdsfromlonglong",
          "old_text": null,
          "new_text": "sdsfromlonglong(val->ell)",
          "old_line_content": "    }",
          "new_line_content": "        return sdsfromlonglong(val->ell);",
          "content_same": false
        },
        {
          "line": 166,
          "old_api": null,
          "new_api": "zslCreateNode",
          "old_text": null,
          "new_text": "zslCreateNode(level,score,ele)",
          "old_line_content": "    for (i = 0; i < level; i++) {",
          "new_line_content": "    x = zslCreateNode(level,score,ele);",
          "content_same": false
        },
        {
          "line": 4264,
          "old_api": null,
          "new_api": "dictRelease",
          "old_text": null,
          "new_text": "dictRelease(d)",
          "old_line_content": "    }",
          "new_line_content": "        dictRelease(d);",
          "content_same": false
        },
        {
          "line": 4266,
          "old_api": null,
          "new_api": "zuiClearIterator",
          "old_text": null,
          "new_text": "zuiClearIterator(&src)",
          "old_line_content": "}",
          "new_line_content": "    zuiClearIterator(&src);",
          "content_same": false
        },
        {
          "line": 2220,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(val->ele)",
          "old_line_content": "            val->estr = (unsigned char*)val->ele;",
          "new_line_content": "            val->elen = sdslen(val->ele);",
          "content_same": false
        },
        {
          "line": 2223,
          "old_api": null,
          "new_api": "ll2string",
          "old_text": null,
          "new_text": "ll2string((char*)val->_buf,sizeof(val->_buf),val->ell)",
          "old_line_content": "            val->estr = val->_buf;",
          "new_line_content": "            val->elen = ll2string((char*)val->_buf,sizeof(val->_buf),val->ell);",
          "content_same": false
        },
        {
          "line": 4279,
          "old_api": null,
          "new_api": "addReplyErrorObject",
          "old_text": null,
          "new_text": "addReplyErrorObject(c,shared.syntaxerr)",
          "old_line_content": "            return;",
          "new_line_content": "            addReplyErrorObject(c,shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 4283,
          "old_api": null,
          "new_api": "zrandmemberWithCountCommand",
          "old_text": null,
          "new_text": "zrandmemberWithCountCommand(c, l, withscores)",
          "old_line_content": "        return;",
          "new_line_content": "        zrandmemberWithCountCommand(c, l, withscores);",
          "content_same": false
        },
        {
          "line": 2239,
          "old_api": null,
          "new_api": "intsetFind",
          "old_text": null,
          "new_text": "intsetFind(op->subject->ptr,val->ell)",
          "old_line_content": "            {",
          "new_line_content": "                intsetFind(op->subject->ptr,val->ell))",
          "content_same": false
        },
        {
          "line": 4289,
          "old_api": null,
          "new_api": "checkType",
          "old_text": null,
          "new_text": "checkType(c,zset,OBJ_ZSET)",
          "old_line_content": "        return;",
          "new_line_content": "        checkType(c,zset,OBJ_ZSET)) {",
          "content_same": false
        },
        {
          "line": 4294,
          "old_api": null,
          "new_api": "zsetReplyFromListpackEntry",
          "old_text": null,
          "new_text": "zsetReplyFromListpackEntry(c,&ele)",
          "old_line_content": "}",
          "new_line_content": "    zsetReplyFromListpackEntry(c,&ele);",
          "content_same": false
        },
        {
          "line": 2249,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(ht,val->ele)",
          "old_line_content": "                *score = 1.0;",
          "new_line_content": "            if (dictFind(ht,val->ele) != NULL) {",
          "content_same": false
        },
        {
          "line": 2256,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Unknown set encoding\")",
          "old_line_content": "        }",
          "new_line_content": "            serverPanic(\"Unknown set encoding\");",
          "content_same": false
        },
        {
          "line": 2259,
          "old_api": null,
          "new_api": "zuiSdsFromValue",
          "old_text": null,
          "new_text": "zuiSdsFromValue(val)",
          "old_line_content": "",
          "new_line_content": "        zuiSdsFromValue(val);",
          "content_same": false
        },
        {
          "line": 4308,
          "old_api": null,
          "new_api": "getRangeLongFromObjectOrReply",
          "old_text": null,
          "new_text": "getRangeLongFromObjectOrReply(c, c->argv[numkeys_idx], 1, LONG_MAX,\n                                      &numkeys, \"numkeys should be greater than 0\")",
          "old_line_content": "                                      &numkeys, \"numkeys should be greater than 0\") != C_OK)",
          "new_line_content": "    if (getRangeLongFromObjectOrReply(c, c->argv[numkeys_idx], 1, LONG_MAX,",
          "content_same": false
        },
        {
          "line": 2262,
          "old_api": null,
          "new_api": "zzlFind",
          "old_text": null,
          "new_text": "zzlFind(op->subject->ptr,val->ele,score)",
          "old_line_content": "                /* Score is already set by zzlFind. */",
          "new_line_content": "            if (zzlFind(op->subject->ptr,val->ele,score) != NULL) {",
          "content_same": false
        },
        {
          "line": 4315,
          "old_api": null,
          "new_api": "addReplyErrorObject",
          "old_text": null,
          "new_text": "addReplyErrorObject(c, shared.syntaxerr)",
          "old_line_content": "        return;",
          "new_line_content": "        addReplyErrorObject(c, shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 4318,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[where_idx]->ptr, \"MIN\")",
          "old_line_content": "        where = ZSET_MIN;",
          "new_line_content": "    if (!strcasecmp(c->argv[where_idx]->ptr, \"MIN\")) {",
          "content_same": false
        },
        {
          "line": 2272,
          "old_api": null,
          "new_api": "dictGetVal",
          "old_text": null,
          "new_text": "dictGetVal(de)",
          "old_line_content": "                return 1;",
          "new_line_content": "                *score = *(double*)dictGetVal(de);",
          "content_same": false
        },
        {
          "line": 4320,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[where_idx]->ptr, \"MAX\")",
          "old_line_content": "        where = ZSET_MAX;",
          "new_line_content": "    } else if (!strcasecmp(c->argv[where_idx]->ptr, \"MAX\")) {",
          "content_same": false
        },
        {
          "line": 4323,
          "old_api": null,
          "new_api": "addReplyErrorObject",
          "old_text": null,
          "new_text": "addReplyErrorObject(c, shared.syntaxerr)",
          "old_line_content": "        return;",
          "new_line_content": "        addReplyErrorObject(c, shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 229,
          "old_api": null,
          "new_api": "sdscmp",
          "old_text": null,
          "new_text": "sdscmp(x->level[i].forward->ele,ele)",
          "old_line_content": "        {",
          "new_line_content": "                     sdscmp(x->level[i].forward->ele,ele) < 0)))",
          "content_same": false
        },
        {
          "line": 2278,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Unknown sorted set encoding\")",
          "old_line_content": "        }",
          "new_line_content": "            serverPanic(\"Unknown sorted set encoding\");",
          "content_same": false
        },
        {
          "line": 2281,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Unsupported type\")",
          "old_line_content": "    }",
          "new_line_content": "        serverPanic(\"Unsupported type\");",
          "content_same": false
        },
        {
          "line": 4332,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(opt, \"COUNT\")",
          "old_line_content": "            j++;",
          "new_line_content": "        if (count == -1 && !strcasecmp(opt, \"COUNT\") && moreargs) {",
          "content_same": false
        },
        {
          "line": 4334,
          "old_api": null,
          "new_api": "getRangeLongFromObjectOrReply",
          "old_text": null,
          "new_text": "getRangeLongFromObjectOrReply(c, c->argv[j], 1, LONG_MAX,\n                                              &count,\"count should be greater than 0\")",
          "old_line_content": "                                              &count,\"count should be greater than 0\") != C_OK)",
          "new_line_content": "            if (getRangeLongFromObjectOrReply(c, c->argv[j], 1, LONG_MAX,",
          "content_same": false
        },
        {
          "line": 239,
          "old_api": null,
          "new_api": "zslDeleteNode",
          "old_text": null,
          "new_text": "zslDeleteNode(zsl, x, update)",
          "old_line_content": "        if (!node)",
          "new_line_content": "        zslDeleteNode(zsl, x, update);",
          "content_same": false
        },
        {
          "line": 2287,
          "old_api": null,
          "new_api": "zuiLength",
          "old_text": null,
          "new_text": "zuiLength((zsetopsrc*)s2)",
          "old_line_content": "    if (first > second) return 1;",
          "new_line_content": "    unsigned long second = zuiLength((zsetopsrc*)s2);",
          "content_same": false
        },
        {
          "line": 241,
          "old_api": null,
          "new_api": "zslFreeNode",
          "old_text": null,
          "new_text": "zslFreeNode(x)",
          "old_line_content": "        else",
          "new_line_content": "            zslFreeNode(x);",
          "content_same": false
        },
        {
          "line": 4338,
          "old_api": null,
          "new_api": "addReplyErrorObject",
          "old_text": null,
          "new_text": "addReplyErrorObject(c, shared.syntaxerr)",
          "old_line_content": "            return;",
          "new_line_content": "            addReplyErrorObject(c, shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 2294,
          "old_api": null,
          "new_api": "zuiCompareByCardinality",
          "old_text": null,
          "new_text": "zuiCompareByCardinality(s1, s2)",
          "old_line_content": "}",
          "new_line_content": "    return zuiCompareByCardinality(s1, s2) * -1;",
          "content_same": false
        },
        {
          "line": 4347,
          "old_api": null,
          "new_api": "blockingGenericZpopCommand",
          "old_text": null,
          "new_text": "blockingGenericZpopCommand(c, c->argv+numkeys_idx+1, numkeys, where, 1, count, 1, 1)",
          "old_line_content": "    } else {",
          "new_line_content": "        blockingGenericZpopCommand(c, c->argv+numkeys_idx+1, numkeys, where, 1, count, 1, 1);",
          "content_same": false
        },
        {
          "line": 4350,
          "old_api": null,
          "new_api": "genericZpopCommand",
          "old_text": null,
          "new_text": "genericZpopCommand(c, c->argv+numkeys_idx+1, numkeys, where, 1, count, 1, 1, NULL)",
          "old_line_content": "    }",
          "new_line_content": "        genericZpopCommand(c, c->argv+numkeys_idx+1, numkeys, where, 1, count, 1, 1, NULL);",
          "content_same": false
        },
        {
          "line": 2308,
          "old_api": null,
          "new_api": "isnan",
          "old_text": null,
          "new_text": "isnan(*target)",
          "old_line_content": "    } else if (aggregate == REDIS_AGGR_MIN) {",
          "new_line_content": "        if (isnan(*target)) *target = 0.0;",
          "content_same": false
        },
        {
          "line": 4356,
          "old_api": null,
          "new_api": "zmpopGenericCommand",
          "old_text": null,
          "new_text": "zmpopGenericCommand(c, 1, 0)",
          "old_line_content": "}",
          "new_line_content": "    zmpopGenericCommand(c, 1, 0);",
          "content_same": false
        },
        {
          "line": 4361,
          "old_api": null,
          "new_api": "zmpopGenericCommand",
          "old_text": null,
          "new_text": "zmpopGenericCommand(c, 2, 1)",
          "old_line_content": "}",
          "new_line_content": "    zmpopGenericCommand(c, 2, 1);",
          "content_same": false
        },
        {
          "line": 2315,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Unknown ZUNION/INTER aggregate type\")",
          "old_line_content": "    }",
          "new_line_content": "        serverPanic(\"Unknown ZUNION/INTER aggregate type\");",
          "content_same": false
        },
        {
          "line": 271,
          "old_api": null,
          "new_api": "sdscmp",
          "old_text": null,
          "new_text": "sdscmp(x->level[i].forward->ele,ele)",
          "old_line_content": "        {",
          "new_line_content": "                     sdscmp(x->level[i].forward->ele,ele) < 0)))",
          "content_same": false
        },
        {
          "line": 2324,
          "old_api": null,
          "new_api": "dictGetIterator",
          "old_text": null,
          "new_text": "dictGetIterator(d)",
          "old_line_content": "",
          "new_line_content": "    di = dictGetIterator(d);",
          "content_same": false
        },
        {
          "line": 2328,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(ele)",
          "old_line_content": "        if (totallen)",
          "new_line_content": "        if (sdslen(ele) > maxelelen) maxelelen = sdslen(ele);",
          "content_same": false
        },
        {
          "line": 281,
          "old_api": null,
          "new_api": "sdscmp",
          "old_text": null,
          "new_text": "sdscmp(x->ele,ele)",
          "old_line_content": "",
          "new_line_content": "    serverAssert(x && curscore == x->score && sdscmp(x->ele,ele) == 0);",
          "content_same": false
        },
        {
          "line": 2330,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(ele)",
          "old_line_content": "    }",
          "new_line_content": "            (*totallen) += sdslen(ele);",
          "content_same": false
        },
        {
          "line": 2333,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "",
          "new_line_content": "    dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 296,
          "old_api": null,
          "new_api": "zslInsert",
          "old_text": null,
          "new_text": "zslInsert(zsl,newscore,x->ele)",
          "old_line_content": "    /* We reused the old node x->ele SDS string, free the node now",
          "new_line_content": "    zskiplistNode *newnode = zslInsert(zsl,newscore,x->ele);",
          "content_same": false
        },
        {
          "line": 300,
          "old_api": null,
          "new_api": "zslFreeNode",
          "old_text": null,
          "new_text": "zslFreeNode(x)",
          "old_line_content": "    return newnode;",
          "new_line_content": "    zslFreeNode(x);",
          "content_same": false
        },
        {
          "line": 2360,
          "old_api": null,
          "new_api": "qsort",
          "old_text": null,
          "new_text": "qsort(src+1,setnum-1,sizeof(zsetopsrc),zuiCompareByRevCardinality)",
          "old_line_content": "",
          "new_line_content": "    qsort(src+1,setnum-1,sizeof(zsetopsrc),zuiCompareByRevCardinality);",
          "content_same": false
        },
        {
          "line": 2364,
          "old_api": null,
          "new_api": "zuiNext",
          "old_text": null,
          "new_text": "zuiNext(&src[0],&zval)",
          "old_line_content": "        double value;",
          "new_line_content": "    while (zuiNext(&src[0],&zval)) {",
          "content_same": false
        },
        {
          "line": 321,
          "old_api": null,
          "new_api": "zslValueGteMin",
          "old_text": null,
          "new_text": "zslValueGteMin(x->score,range)",
          "old_line_content": "        return 0;",
          "new_line_content": "    if (x == NULL || !zslValueGteMin(x->score,range))",
          "content_same": false
        },
        {
          "line": 324,
          "old_api": null,
          "new_api": "zslValueLteMax",
          "old_text": null,
          "new_text": "zslValueLteMax(x->score,range)",
          "old_line_content": "        return 0;",
          "new_line_content": "    if (x == NULL || !zslValueLteMax(x->score,range))",
          "content_same": false
        },
        {
          "line": 2375,
          "old_api": null,
          "new_api": "zuiFind",
          "old_text": null,
          "new_text": "zuiFind(&src[j],&zval,&value)",
          "old_line_content": "                exists = 1;",
          "new_line_content": "                zuiFind(&src[j],&zval,&value)) {",
          "content_same": false
        },
        {
          "line": 336,
          "old_api": null,
          "new_api": "zslIsInRange",
          "old_text": null,
          "new_text": "zslIsInRange(zsl,range)",
          "old_line_content": "",
          "new_line_content": "    if (!zslIsInRange(zsl,range)) return NULL;",
          "content_same": false
        },
        {
          "line": 2386,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(tmp)",
          "old_line_content": "        }",
          "new_line_content": "            (*totelelen) += sdslen(tmp);",
          "content_same": false
        },
        {
          "line": 2389,
          "old_api": null,
          "new_api": "zuiClearIterator",
          "old_text": null,
          "new_text": "zuiClearIterator(&src[0])",
          "old_line_content": "}",
          "new_line_content": "    zuiClearIterator(&src[0]);",
          "content_same": false
        },
        {
          "line": 342,
          "old_api": null,
          "new_api": "zslValueGteMin",
          "old_text": null,
          "new_text": "zslValueGteMin(x->level[i].forward->score,range)",
          "old_line_content": "                x = x->level[i].forward;",
          "new_line_content": "            !zslValueGteMin(x->level[i].forward->score,range))",
          "content_same": false
        },
        {
          "line": 348,
          "old_api": null,
          "new_api": "serverAssert",
          "old_text": null,
          "new_text": "serverAssert(x != NULL)",
          "old_line_content": "",
          "new_line_content": "    serverAssert(x != NULL);",
          "content_same": false
        },
        {
          "line": 351,
          "old_api": null,
          "new_api": "zslValueLteMax",
          "old_text": null,
          "new_text": "zslValueLteMax(x->score,range)",
          "old_line_content": "    return x;",
          "new_line_content": "    if (!zslValueLteMax(x->score,range)) return NULL;",
          "content_same": false
        },
        {
          "line": 362,
          "old_api": null,
          "new_api": "zslIsInRange",
          "old_text": null,
          "new_text": "zslIsInRange(zsl,range)",
          "old_line_content": "",
          "new_line_content": "    if (!zslIsInRange(zsl,range)) return NULL;",
          "content_same": false
        },
        {
          "line": 368,
          "old_api": null,
          "new_api": "zslValueLteMax",
          "old_text": null,
          "new_text": "zslValueLteMax(x->level[i].forward->score,range)",
          "old_line_content": "                x = x->level[i].forward;",
          "new_line_content": "            zslValueLteMax(x->level[i].forward->score,range))",
          "content_same": false
        },
        {
          "line": 2416,
          "old_api": null,
          "new_api": "zuiLength",
          "old_text": null,
          "new_text": "zuiLength(&src[j])",
          "old_line_content": "",
          "new_line_content": "        if (zuiLength(&src[j]) == 0) continue;",
          "content_same": false
        },
        {
          "line": 2420,
          "old_api": null,
          "new_api": "zuiNext",
          "old_text": null,
          "new_text": "zuiNext(&src[j],&zval)",
          "old_line_content": "            if (j == 0) {",
          "new_line_content": "        while (zuiNext(&src[j],&zval)) {",
          "content_same": false
        },
        {
          "line": 373,
          "old_api": null,
          "new_api": "serverAssert",
          "old_text": null,
          "new_text": "serverAssert(x != NULL)",
          "old_line_content": "",
          "new_line_content": "    serverAssert(x != NULL);",
          "content_same": false
        },
        {
          "line": 376,
          "old_api": null,
          "new_api": "zslValueGteMin",
          "old_text": null,
          "new_text": "zslValueGteMin(x->score,range)",
          "old_line_content": "    return x;",
          "new_line_content": "    if (!zslValueGteMin(x->score,range)) return NULL;",
          "content_same": false
        },
        {
          "line": 2424,
          "old_api": null,
          "new_api": "dictAdd",
          "old_text": null,
          "new_text": "dictAdd(dstzset->dict,tmp,&znode->score)",
          "old_line_content": "                cardinality++;",
          "new_line_content": "                dictAdd(dstzset->dict,tmp,&znode->score);",
          "content_same": false
        },
        {
          "line": 2428,
          "old_api": null,
          "new_api": "zsetRemoveFromSkiplist",
          "old_text": null,
          "new_text": "zsetRemoveFromSkiplist(dstzset, tmp)",
          "old_line_content": "                    cardinality--;",
          "new_line_content": "                if (zsetRemoveFromSkiplist(dstzset, tmp)) {",
          "content_same": false
        },
        {
          "line": 2437,
          "old_api": null,
          "new_api": "zuiClearIterator",
          "old_text": null,
          "new_text": "zuiClearIterator(&src[j])",
          "old_line_content": "",
          "new_line_content": "        zuiClearIterator(&src[j]);",
          "content_same": false
        },
        {
          "line": 393,
          "old_api": null,
          "new_api": "zslValueGteMin",
          "old_text": null,
          "new_text": "zslValueGteMin(x->level[i].forward->score, range)",
          "old_line_content": "                x = x->level[i].forward;",
          "new_line_content": "            !zslValueGteMin(x->level[i].forward->score, range))",
          "content_same": false
        },
        {
          "line": 2443,
          "old_api": null,
          "new_api": "dictResize",
          "old_text": null,
          "new_text": "dictResize(dstzset->dict)",
          "old_line_content": "",
          "new_line_content": "    if (htNeedsResize(dstzset->dict)) dictResize(dstzset->dict);",
          "content_same": false
        },
        {
          "line": 2447,
          "old_api": null,
          "new_api": "zsetDictGetMaxElementLength",
          "old_text": null,
          "new_text": "zsetDictGetMaxElementLength(dstzset->dict, totelelen)",
          "old_line_content": "}",
          "new_line_content": "    *maxelelen = zsetDictGetMaxElementLength(dstzset->dict, totelelen);",
          "content_same": false
        },
        {
          "line": 402,
          "old_api": null,
          "new_api": "zslValueLteMax",
          "old_text": null,
          "new_text": "zslValueLteMax(x->score, range)",
          "old_line_content": "        zskiplistNode *next = x->level[0].forward;",
          "new_line_content": "    while (x && zslValueLteMax(x->score, range)) {",
          "content_same": false
        },
        {
          "line": 406,
          "old_api": null,
          "new_api": "zslFreeNode",
          "old_text": null,
          "new_text": "zslFreeNode(x)",
          "old_line_content": "        removed++;",
          "new_line_content": "        zslFreeNode(x); /* Here is where x->ele is actually released. */",
          "content_same": false
        },
        {
          "line": 422,
          "old_api": null,
          "new_api": "zslLexValueGteMin",
          "old_text": null,
          "new_text": "zslLexValueGteMin(x->level[i].forward->ele,range)",
          "old_line_content": "                x = x->level[i].forward;",
          "new_line_content": "            !zslLexValueGteMin(x->level[i].forward->ele,range))",
          "content_same": false
        },
        {
          "line": 2475,
          "old_api": null,
          "new_api": "zuiLength",
          "old_text": null,
          "new_text": "zuiLength(&src[j])",
          "old_line_content": "    }",
          "new_line_content": "        algo_two_work += zuiLength(&src[j]);",
          "content_same": false
        },
        {
          "line": 431,
          "old_api": null,
          "new_api": "zslLexValueLteMax",
          "old_text": null,
          "new_text": "zslLexValueLteMax(x->ele,range)",
          "old_line_content": "        zskiplistNode *next = x->level[0].forward;",
          "new_line_content": "    while (x && zslLexValueLteMax(x->ele,range)) {",
          "content_same": false
        },
        {
          "line": 435,
          "old_api": null,
          "new_api": "zslFreeNode",
          "old_text": null,
          "new_text": "zslFreeNode(x)",
          "old_line_content": "        removed++;",
          "new_line_content": "        zslFreeNode(x); /* Here is where x->ele is actually released. */",
          "content_same": false
        },
        {
          "line": 2487,
          "old_api": null,
          "new_api": "zsetChooseDiffAlgorithm",
          "old_text": null,
          "new_text": "zsetChooseDiffAlgorithm(src, setnum)",
          "old_line_content": "        if (diff_algo == 1) {",
          "new_line_content": "        int diff_algo = zsetChooseDiffAlgorithm(src, setnum);",
          "content_same": false
        },
        {
          "line": 2489,
          "old_api": null,
          "new_api": "zdiffAlgorithm1",
          "old_text": null,
          "new_text": "zdiffAlgorithm1(src, setnum, dstzset, maxelelen, totelelen)",
          "old_line_content": "        } else if (diff_algo == 2) {",
          "new_line_content": "            zdiffAlgorithm1(src, setnum, dstzset, maxelelen, totelelen);",
          "content_same": false
        },
        {
          "line": 2491,
          "old_api": null,
          "new_api": "zdiffAlgorithm2",
          "old_text": null,
          "new_text": "zdiffAlgorithm2(src, setnum, dstzset, maxelelen, totelelen)",
          "old_line_content": "        } else if (diff_algo != 0) {",
          "new_line_content": "            zdiffAlgorithm2(src, setnum, dstzset, maxelelen, totelelen);",
          "content_same": false
        },
        {
          "line": 2493,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Unknown algorithm\")",
          "old_line_content": "        }",
          "new_line_content": "            serverPanic(\"Unknown algorithm\");",
          "content_same": false
        },
        {
          "line": 464,
          "old_api": null,
          "new_api": "zslFreeNode",
          "old_text": null,
          "new_text": "zslFreeNode(x)",
          "old_line_content": "        removed++;",
          "new_line_content": "        zslFreeNode(x);",
          "content_same": false
        },
        {
          "line": 486,
          "old_api": null,
          "new_api": "sdscmp",
          "old_text": null,
          "new_text": "sdscmp(x->level[i].forward->ele,ele)",
          "old_line_content": "            rank += x->level[i].span;",
          "new_line_content": "                sdscmp(x->level[i].forward->ele,ele) <= 0))) {",
          "content_same": false
        },
        {
          "line": 2537,
          "old_api": null,
          "new_api": "getLongFromObjectOrReply",
          "old_text": null,
          "new_text": "getLongFromObjectOrReply(c, c->argv[numkeysIndex], &setnum, NULL)",
          "old_line_content": "        return;",
          "new_line_content": "    if ((getLongFromObjectOrReply(c, c->argv[numkeysIndex], &setnum, NULL) != C_OK))",
          "content_same": false
        },
        {
          "line": 492,
          "old_api": null,
          "new_api": "sdscmp",
          "old_text": null,
          "new_text": "sdscmp(x->ele,ele)",
          "old_line_content": "            return rank;",
          "new_line_content": "        if (x->ele && x->score == score && sdscmp(x->ele,ele) == 0) {",
          "content_same": false
        },
        {
          "line": 2541,
          "old_api": null,
          "new_api": "addReplyErrorFormat",
          "old_text": null,
          "new_text": "addReplyErrorFormat(c,\n            \"at least 1 input key is needed for '%s' command\", c->cmd->fullname)",
          "old_line_content": "            \"at least 1 input key is needed for '%s' command\", c->cmd->fullname);",
          "new_line_content": "        addReplyErrorFormat(c,",
          "content_same": false
        },
        {
          "line": 2548,
          "old_api": null,
          "new_api": "addReplyErrorObject",
          "old_text": null,
          "new_text": "addReplyErrorObject(c,shared.syntaxerr)",
          "old_line_content": "        return;",
          "new_line_content": "        addReplyErrorObject(c,shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 2553,
          "old_api": null,
          "new_api": "zcalloc",
          "old_text": null,
          "new_text": "zcalloc(sizeof(zsetopsrc) * setnum)",
          "old_line_content": "    for (i = 0, j = numkeysIndex+1; i < setnum; i++, j++) {",
          "new_line_content": "    src = zcalloc(sizeof(zsetopsrc) * setnum);",
          "content_same": false
        },
        {
          "line": 2555,
          "old_api": null,
          "new_api": "lookupKeyRead",
          "old_text": null,
          "new_text": "lookupKeyRead(c->db, c->argv[j])",
          "old_line_content": "        if (obj != NULL) {",
          "new_line_content": "        robj *obj = lookupKeyRead(c->db, c->argv[j]);",
          "content_same": false
        },
        {
          "line": 2559,
          "old_api": null,
          "new_api": "addReplyErrorObject",
          "old_text": null,
          "new_text": "addReplyErrorObject(c,shared.wrongtypeerr)",
          "old_line_content": "                return;",
          "new_line_content": "                addReplyErrorObject(c,shared.wrongtypeerr);",
          "content_same": false
        },
        {
          "line": 533,
          "old_api": null,
          "new_api": "isnan",
          "old_text": null,
          "new_text": "isnan(spec->min)",
          "old_line_content": "            spec->minex = 1;",
          "new_line_content": "            if (eptr[0] != '\\0' || isnan(spec->min)) return C_ERR;",
          "content_same": false
        },
        {
          "line": 2581,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[j]->ptr,\"weights\")",
          "old_line_content": "            {",
          "new_line_content": "                !strcasecmp(c->argv[j]->ptr,\"weights\"))",
          "content_same": false
        },
        {
          "line": 537,
          "old_api": null,
          "new_api": "isnan",
          "old_text": null,
          "new_text": "isnan(spec->min)",
          "old_line_content": "        }",
          "new_line_content": "            if (eptr[0] != '\\0' || isnan(spec->min)) return C_ERR;",
          "content_same": false
        },
        {
          "line": 2585,
          "old_api": null,
          "new_api": "getDoubleFromObjectOrReply",
          "old_text": null,
          "new_text": "getDoubleFromObjectOrReply(c,c->argv[j],&src[i].weight,\n                            \"weight value is not a float\")",
          "old_line_content": "                            \"weight value is not a float\") != C_OK)",
          "new_line_content": "                    if (getDoubleFromObjectOrReply(c,c->argv[j],&src[i].weight,",
          "content_same": false
        },
        {
          "line": 2588,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(src)",
          "old_line_content": "                        return;",
          "new_line_content": "                        zfree(src);",
          "content_same": false
        },
        {
          "line": 545,
          "old_api": null,
          "new_api": "isnan",
          "old_text": null,
          "new_text": "isnan(spec->max)",
          "old_line_content": "            spec->maxex = 1;",
          "new_line_content": "            if (eptr[0] != '\\0' || isnan(spec->max)) return C_ERR;",
          "content_same": false
        },
        {
          "line": 2594,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[j]->ptr,\"aggregate\")",
          "old_line_content": "            {",
          "new_line_content": "                       !strcasecmp(c->argv[j]->ptr,\"aggregate\"))",
          "content_same": false
        },
        {
          "line": 549,
          "old_api": null,
          "new_api": "isnan",
          "old_text": null,
          "new_text": "isnan(spec->max)",
          "old_line_content": "        }",
          "new_line_content": "            if (eptr[0] != '\\0' || isnan(spec->max)) return C_ERR;",
          "content_same": false
        },
        {
          "line": 2597,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[j]->ptr,\"sum\")",
          "old_line_content": "                    aggregate = REDIS_AGGR_SUM;",
          "new_line_content": "                if (!strcasecmp(c->argv[j]->ptr,\"sum\")) {",
          "content_same": false
        },
        {
          "line": 2599,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[j]->ptr,\"min\")",
          "old_line_content": "                    aggregate = REDIS_AGGR_MIN;",
          "new_line_content": "                } else if (!strcasecmp(c->argv[j]->ptr,\"min\")) {",
          "content_same": false
        },
        {
          "line": 2601,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[j]->ptr,\"max\")",
          "old_line_content": "                    aggregate = REDIS_AGGR_MAX;",
          "new_line_content": "                } else if (!strcasecmp(c->argv[j]->ptr,\"max\")) {",
          "content_same": false
        },
        {
          "line": 2605,
          "old_api": null,
          "new_api": "addReplyErrorObject",
          "old_text": null,
          "new_text": "addReplyErrorObject(c,shared.syntaxerr)",
          "old_line_content": "                    return;",
          "new_line_content": "                    addReplyErrorObject(c,shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 2611,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[j]->ptr,\"withscores\")",
          "old_line_content": "            {",
          "new_line_content": "                       !strcasecmp(c->argv[j]->ptr,\"withscores\"))",
          "content_same": false
        },
        {
          "line": 2616,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[j]->ptr, \"limit\")",
          "old_line_content": "            {",
          "new_line_content": "                       !strcasecmp(c->argv[j]->ptr, \"limit\"))",
          "content_same": false
        },
        {
          "line": 2619,
          "old_api": null,
          "new_api": "getPositiveLongFromObjectOrReply",
          "old_text": null,
          "new_text": "getPositiveLongFromObjectOrReply(c, c->argv[j], &limit,\n                                                     \"LIMIT can't be negative\")",
          "old_line_content": "                                                     \"LIMIT can't be negative\") != C_OK)",
          "new_line_content": "                if (getPositiveLongFromObjectOrReply(c, c->argv[j], &limit,",
          "content_same": false
        },
        {
          "line": 2622,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(src)",
          "old_line_content": "                    return;",
          "new_line_content": "                    zfree(src);",
          "content_same": false
        },
        {
          "line": 2628,
          "old_api": null,
          "new_api": "addReplyErrorObject",
          "old_text": null,
          "new_text": "addReplyErrorObject(c,shared.syntaxerr)",
          "old_line_content": "                return;",
          "new_line_content": "                addReplyErrorObject(c,shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 587,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(c)",
          "old_line_content": "        return C_OK;",
          "new_line_content": "        *dest = sdsnewlen(c+1,sdslen(c)-1);",
          "content_same": false
        },
        {
          "line": 2637,
          "old_api": null,
          "new_api": "qsort",
          "old_text": null,
          "new_text": "qsort(src,setnum,sizeof(zsetopsrc),zuiCompareByCardinality)",
          "old_line_content": "    }",
          "new_line_content": "        qsort(src,setnum,sizeof(zsetopsrc),zuiCompareByCardinality);",
          "content_same": false
        },
        {
          "line": 591,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(c)",
          "old_line_content": "        return C_OK;",
          "new_line_content": "        *dest = sdsnewlen(c+1,sdslen(c)-1);",
          "content_same": false
        },
        {
          "line": 2640,
          "old_api": null,
          "new_api": "createZsetObject",
          "old_text": null,
          "new_text": "createZsetObject()",
          "old_line_content": "    dstzset = dstobj->ptr;",
          "new_line_content": "    dstobj = createZsetObject();",
          "content_same": false
        },
        {
          "line": 2642,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(&zval, 0, sizeof(zval))",
          "old_line_content": "",
          "new_line_content": "    memset(&zval, 0, sizeof(zval));",
          "content_same": false
        },
        {
          "line": 2646,
          "old_api": null,
          "new_api": "zuiLength",
          "old_text": null,
          "new_text": "zuiLength(&src[0])",
          "old_line_content": "            /* Precondition: as src[0] is non-empty and the inputs are ordered",
          "new_line_content": "        if (zuiLength(&src[0]) > 0) {",
          "content_same": false
        },
        {
          "line": 602,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(spec->min)",
          "old_line_content": "    if (spec->max != shared.minstring &&",
          "new_line_content": "        spec->min != shared.maxstring) sdsfree(spec->min);",
          "content_same": false
        },
        {
          "line": 2650,
          "old_api": null,
          "new_api": "zuiNext",
          "old_text": null,
          "new_text": "zuiNext(&src[0],&zval)",
          "old_line_content": "                double score, value;",
          "new_line_content": "            while (zuiNext(&src[0],&zval)) {",
          "content_same": false
        },
        {
          "line": 604,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(spec->max)",
          "old_line_content": "}",
          "new_line_content": "        spec->max != shared.maxstring) sdsfree(spec->max);",
          "content_same": false
        },
        {
          "line": 2654,
          "old_api": null,
          "new_api": "isnan",
          "old_text": null,
          "new_text": "isnan(score)",
          "old_line_content": "",
          "new_line_content": "                if (isnan(score)) score = 0;",
          "content_same": false
        },
        {
          "line": 2662,
          "old_api": null,
          "new_api": "zuiFind",
          "old_text": null,
          "new_text": "zuiFind(&src[j],&zval,&value)",
          "old_line_content": "                        value *= src[j].weight;",
          "new_line_content": "                    } else if (zuiFind(&src[j],&zval,&value)) {",
          "content_same": false
        },
        {
          "line": 2664,
          "old_api": null,
          "new_api": "zunionInterAggregate",
          "old_text": null,
          "new_text": "zunionInterAggregate(&score,value,aggregate)",
          "old_line_content": "                    } else {",
          "new_line_content": "                        zunionInterAggregate(&score,value,aggregate);",
          "content_same": false
        },
        {
          "line": 621,
          "old_api": null,
          "new_api": "zslFreeLexRange",
          "old_text": null,
          "new_text": "zslFreeLexRange(spec)",
          "old_line_content": "        return C_ERR;",
          "new_line_content": "        zslFreeLexRange(spec);",
          "content_same": false
        },
        {
          "line": 2677,
          "old_api": null,
          "new_api": "zuiDiscardDirtyValue",
          "old_text": null,
          "new_text": "zuiDiscardDirtyValue(&zval)",
          "old_line_content": "                        break;",
          "new_line_content": "                        zuiDiscardDirtyValue(&zval);",
          "content_same": false
        },
        {
          "line": 635,
          "old_api": null,
          "new_api": "sdscmp",
          "old_text": null,
          "new_text": "sdscmp(a,b)",
          "old_line_content": "}",
          "new_line_content": "    return sdscmp(a,b);",
          "content_same": false
        },
        {
          "line": 2685,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(tmp)",
          "old_line_content": "                }",
          "new_line_content": "                    if (sdslen(tmp) > maxelelen) maxelelen = sdslen(tmp);",
          "content_same": false
        },
        {
          "line": 2688,
          "old_api": null,
          "new_api": "zuiClearIterator",
          "old_text": null,
          "new_text": "zuiClearIterator(&src[0])",
          "old_line_content": "        }",
          "new_line_content": "            zuiClearIterator(&src[0]);",
          "content_same": false
        },
        {
          "line": 641,
          "old_api": null,
          "new_api": "sdscmplex",
          "old_text": null,
          "new_text": "sdscmplex(value,spec->min)",
          "old_line_content": "}",
          "new_line_content": "        (sdscmplex(value,spec->min) >= 0);",
          "content_same": false
        },
        {
          "line": 2691,
          "old_api": null,
          "new_api": "dictCreate",
          "old_text": null,
          "new_text": "dictCreate(&setAccumulatorDictType)",
          "old_line_content": "        dictIterator *di;",
          "new_line_content": "        dict *accumulator = dictCreate(&setAccumulatorDictType);",
          "content_same": false
        },
        {
          "line": 647,
          "old_api": null,
          "new_api": "sdscmplex",
          "old_text": null,
          "new_text": "sdscmplex(value,spec->max)",
          "old_line_content": "}",
          "new_line_content": "        (sdscmplex(value,spec->max) <= 0);",
          "content_same": false
        },
        {
          "line": 2699,
          "old_api": null,
          "new_api": "zuiLength",
          "old_text": null,
          "new_text": "zuiLength(&src[setnum-1])",
          "old_line_content": "        }",
          "new_line_content": "            dictExpand(accumulator,zuiLength(&src[setnum-1]));",
          "content_same": false
        },
        {
          "line": 655,
          "old_api": null,
          "new_api": "sdscmplex",
          "old_text": null,
          "new_text": "sdscmplex(range->min,range->max)",
          "old_line_content": "    if (cmp > 0 || (cmp == 0 && (range->minex || range->maxex)))",
          "new_line_content": "    int cmp = sdscmplex(range->min,range->max);",
          "content_same": false
        },
        {
          "line": 2705,
          "old_api": null,
          "new_api": "zuiLength",
          "old_text": null,
          "new_text": "zuiLength(&src[i])",
          "old_line_content": "",
          "new_line_content": "            if (zuiLength(&src[i]) == 0) continue;",
          "content_same": false
        },
        {
          "line": 659,
          "old_api": null,
          "new_api": "zslLexValueGteMin",
          "old_text": null,
          "new_text": "zslLexValueGteMin(x->ele,range)",
          "old_line_content": "        return 0;",
          "new_line_content": "    if (x == NULL || !zslLexValueGteMin(x->ele,range))",
          "content_same": false
        },
        {
          "line": 2708,
          "old_api": null,
          "new_api": "zuiNext",
          "old_text": null,
          "new_text": "zuiNext(&src[i],&zval)",
          "old_line_content": "                /* Initialize value */",
          "new_line_content": "            while (zuiNext(&src[i],&zval)) {",
          "content_same": false
        },
        {
          "line": 662,
          "old_api": null,
          "new_api": "zslLexValueLteMax",
          "old_text": null,
          "new_text": "zslLexValueLteMax(x->ele,range)",
          "old_line_content": "        return 0;",
          "new_line_content": "    if (x == NULL || !zslLexValueLteMax(x->ele,range))",
          "content_same": false
        },
        {
          "line": 2711,
          "old_api": null,
          "new_api": "isnan",
          "old_text": null,
          "new_text": "isnan(score)",
          "old_line_content": "",
          "new_line_content": "                if (isnan(score)) score = 0;",
          "content_same": false
        },
        {
          "line": 2714,
          "old_api": null,
          "new_api": "zuiSdsFromValue",
          "old_text": null,
          "new_text": "zuiSdsFromValue(&zval)",
          "old_line_content": "                /* If we don't have it, we need to create a new entry. */",
          "new_line_content": "                de = dictAddRaw(accumulator,zuiSdsFromValue(&zval),&existing);",
          "content_same": false
        },
        {
          "line": 2717,
          "old_api": null,
          "new_api": "zuiNewSdsFromValue",
          "old_text": null,
          "new_text": "zuiNewSdsFromValue(&zval)",
          "old_line_content": "                    /* Remember the longest single element encountered,",
          "new_line_content": "                    tmp = zuiNewSdsFromValue(&zval);",
          "content_same": false
        },
        {
          "line": 674,
          "old_api": null,
          "new_api": "zslIsInLexRange",
          "old_text": null,
          "new_text": "zslIsInLexRange(zsl,range)",
          "old_line_content": "",
          "new_line_content": "    if (!zslIsInLexRange(zsl,range)) return NULL;",
          "content_same": false
        },
        {
          "line": 2722,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(tmp)",
          "old_line_content": "                    /* Update the element with its initial score. */",
          "new_line_content": "                     if (sdslen(tmp) > maxelelen) maxelelen = sdslen(tmp);",
          "content_same": false
        },
        {
          "line": 2725,
          "old_api": null,
          "new_api": "dictSetDoubleVal",
          "old_text": null,
          "new_text": "dictSetDoubleVal(de,score)",
          "old_line_content": "                } else {",
          "new_line_content": "                    dictSetDoubleVal(de,score);",
          "content_same": false
        },
        {
          "line": 680,
          "old_api": null,
          "new_api": "zslLexValueGteMin",
          "old_text": null,
          "new_text": "zslLexValueGteMin(x->level[i].forward->ele,range)",
          "old_line_content": "                x = x->level[i].forward;",
          "new_line_content": "            !zslLexValueGteMin(x->level[i].forward->ele,range))",
          "content_same": false
        },
        {
          "line": 2733,
          "old_api": null,
          "new_api": "zunionInterAggregate",
          "old_text": null,
          "new_text": "zunionInterAggregate(&existing->v.d,score,aggregate)",
          "old_line_content": "                }",
          "new_line_content": "                    zunionInterAggregate(&existing->v.d,score,aggregate);",
          "content_same": false
        },
        {
          "line": 686,
          "old_api": null,
          "new_api": "serverAssert",
          "old_text": null,
          "new_text": "serverAssert(x != NULL)",
          "old_line_content": "",
          "new_line_content": "    serverAssert(x != NULL);",
          "content_same": false
        },
        {
          "line": 2736,
          "old_api": null,
          "new_api": "zuiClearIterator",
          "old_text": null,
          "new_text": "zuiClearIterator(&src[i])",
          "old_line_content": "        }",
          "new_line_content": "            zuiClearIterator(&src[i]);",
          "content_same": false
        },
        {
          "line": 689,
          "old_api": null,
          "new_api": "zslLexValueLteMax",
          "old_text": null,
          "new_text": "zslLexValueLteMax(x->ele,range)",
          "old_line_content": "    return x;",
          "new_line_content": "    if (!zslLexValueLteMax(x->ele,range)) return NULL;",
          "content_same": false
        },
        {
          "line": 2740,
          "old_api": null,
          "new_api": "dictGetIterator",
          "old_text": null,
          "new_text": "dictGetIterator(accumulator)",
          "old_line_content": "",
          "new_line_content": "        di = dictGetIterator(accumulator);",
          "content_same": false
        },
        {
          "line": 2745,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(accumulator)",
          "old_line_content": "",
          "new_line_content": "        dictExpand(dstzset->dict,dictSize(accumulator));",
          "content_same": false
        },
        {
          "line": 700,
          "old_api": null,
          "new_api": "zslIsInLexRange",
          "old_text": null,
          "new_text": "zslIsInLexRange(zsl,range)",
          "old_line_content": "",
          "new_line_content": "    if (!zslIsInLexRange(zsl,range)) return NULL;",
          "content_same": false
        },
        {
          "line": 2751,
          "old_api": null,
          "new_api": "dictAdd",
          "old_text": null,
          "new_text": "dictAdd(dstzset->dict,ele,&znode->score)",
          "old_line_content": "        }",
          "new_line_content": "            dictAdd(dstzset->dict,ele,&znode->score);",
          "content_same": false
        },
        {
          "line": 706,
          "old_api": null,
          "new_api": "zslLexValueLteMax",
          "old_text": null,
          "new_text": "zslLexValueLteMax(x->level[i].forward->ele,range)",
          "old_line_content": "                x = x->level[i].forward;",
          "new_line_content": "            zslLexValueLteMax(x->level[i].forward->ele,range))",
          "content_same": false
        },
        {
          "line": 2754,
          "old_api": null,
          "new_api": "dictRelease",
          "old_text": null,
          "new_text": "dictRelease(accumulator)",
          "old_line_content": "    } else if (op == SET_OP_DIFF) {",
          "new_line_content": "        dictRelease(accumulator);",
          "content_same": false
        },
        {
          "line": 2756,
          "old_api": null,
          "new_api": "zdiff",
          "old_text": null,
          "new_text": "zdiff(src, setnum, dstzset, &maxelelen, &totelelen)",
          "old_line_content": "    } else {",
          "new_line_content": "        zdiff(src, setnum, dstzset, &maxelelen, &totelelen);",
          "content_same": false
        },
        {
          "line": 2758,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Unknown operator\")",
          "old_line_content": "    }",
          "new_line_content": "        serverPanic(\"Unknown operator\");",
          "content_same": false
        },
        {
          "line": 711,
          "old_api": null,
          "new_api": "serverAssert",
          "old_text": null,
          "new_text": "serverAssert(x != NULL)",
          "old_line_content": "",
          "new_line_content": "    serverAssert(x != NULL);",
          "content_same": false
        },
        {
          "line": 714,
          "old_api": null,
          "new_api": "zslLexValueGteMin",
          "old_text": null,
          "new_text": "zslLexValueGteMin(x->ele,range)",
          "old_line_content": "    return x;",
          "new_line_content": "    if (!zslLexValueGteMin(x->ele,range)) return NULL;",
          "content_same": false
        },
        {
          "line": 2766,
          "old_api": null,
          "new_api": "notifyKeyspaceEvent",
          "old_text": null,
          "new_text": "notifyKeyspaceEvent(NOTIFY_ZSET,\n                                (op == SET_OP_UNION) ? \"zunionstore\" :\n                                    (op == SET_OP_INTER ? \"zinterstore\" : \"zdiffstore\"),\n                                dstkey, c->db->id)",
          "old_line_content": "                                (op == SET_OP_UNION) ? \"zunionstore\" :",
          "new_line_content": "            notifyKeyspaceEvent(NOTIFY_ZSET,",
          "content_same": false
        },
        {
          "line": 726,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(buf,vstr,vlen)",
          "old_line_content": "    buf[vlen] = '\\0';",
          "new_line_content": "    memcpy(buf,vstr,vlen);",
          "content_same": false
        },
        {
          "line": 2775,
          "old_api": null,
          "new_api": "notifyKeyspaceEvent",
          "old_text": null,
          "new_text": "notifyKeyspaceEvent(NOTIFY_GENERIC, \"del\", dstkey, c->db->id)",
          "old_line_content": "                server.dirty++;",
          "new_line_content": "                notifyKeyspaceEvent(NOTIFY_GENERIC, \"del\", dstkey, c->db->id);",
          "content_same": false
        },
        {
          "line": 728,
          "old_api": null,
          "new_api": "strtod",
          "old_text": null,
          "new_text": "strtod(buf,NULL)",
          "old_line_content": " }",
          "new_line_content": "    return strtod(buf,NULL);",
          "content_same": false
        },
        {
          "line": 2780,
          "old_api": null,
          "new_api": "addReplyLongLong",
          "old_text": null,
          "new_text": "addReplyLongLong(c, cardinality)",
          "old_line_content": "    } else {",
          "new_line_content": "        addReplyLongLong(c, cardinality);",
          "content_same": false
        },
        {
          "line": 738,
          "old_api": null,
          "new_api": "lpGetValue",
          "old_text": null,
          "new_text": "lpGetValue(sptr,&vlen,&vlong)",
          "old_line_content": "",
          "new_line_content": "    vstr = lpGetValue(sptr,&vlen,&vlong);",
          "content_same": false
        },
        {
          "line": 741,
          "old_api": null,
          "new_api": "zzlStrtod",
          "old_text": null,
          "new_text": "zzlStrtod(vstr,vlen)",
          "old_line_content": "    } else {",
          "new_line_content": "        score = zzlStrtod(vstr,vlen);",
          "content_same": false
        },
        {
          "line": 2789,
          "old_api": null,
          "new_api": "addReplyArrayLen",
          "old_text": null,
          "new_text": "addReplyArrayLen(c, length*2)",
          "old_line_content": "        else",
          "new_line_content": "            addReplyArrayLen(c, length*2);",
          "content_same": false
        },
        {
          "line": 2791,
          "old_api": null,
          "new_api": "addReplyArrayLen",
          "old_text": null,
          "new_text": "addReplyArrayLen(c, length)",
          "old_line_content": "",
          "new_line_content": "            addReplyArrayLen(c, length);",
          "content_same": false
        },
        {
          "line": 2796,
          "old_api": null,
          "new_api": "addReplyDouble",
          "old_text": null,
          "new_text": "addReplyDouble(c,zn->score)",
          "old_line_content": "            zn = zn->level[0].forward;",
          "new_line_content": "            if (withscores) addReplyDouble(c,zn->score);",
          "content_same": false
        },
        {
          "line": 2801,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(src)",
          "old_line_content": "}",
          "new_line_content": "    zfree(src);",
          "content_same": false
        },
        {
          "line": 756,
          "old_api": null,
          "new_api": "lpGetValue",
          "old_text": null,
          "new_text": "lpGetValue(sptr,&vlen,&vlong)",
          "old_line_content": "",
          "new_line_content": "    vstr = lpGetValue(sptr,&vlen,&vlong);",
          "content_same": false
        },
        {
          "line": 2806,
          "old_api": null,
          "new_api": "zunionInterDiffGenericCommand",
          "old_text": null,
          "new_text": "zunionInterDiffGenericCommand(c, c->argv[1], 2, SET_OP_UNION, 0)",
          "old_line_content": "}",
          "new_line_content": "    zunionInterDiffGenericCommand(c, c->argv[1], 2, SET_OP_UNION, 0);",
          "content_same": false
        },
        {
          "line": 759,
          "old_api": null,
          "new_api": "sdsnewlen",
          "old_text": null,
          "new_text": "sdsnewlen((char*)vstr,vlen)",
          "old_line_content": "    } else {",
          "new_line_content": "        return sdsnewlen((char*)vstr,vlen);",
          "content_same": false
        },
        {
          "line": 761,
          "old_api": null,
          "new_api": "sdsfromlonglong",
          "old_text": null,
          "new_text": "sdsfromlonglong(vlong)",
          "old_line_content": "    }",
          "new_line_content": "        return sdsfromlonglong(vlong);",
          "content_same": false
        },
        {
          "line": 2811,
          "old_api": null,
          "new_api": "zunionInterDiffGenericCommand",
          "old_text": null,
          "new_text": "zunionInterDiffGenericCommand(c, c->argv[1], 2, SET_OP_INTER, 0)",
          "old_line_content": "}",
          "new_line_content": "    zunionInterDiffGenericCommand(c, c->argv[1], 2, SET_OP_INTER, 0);",
          "content_same": false
        },
        {
          "line": 2816,
          "old_api": null,
          "new_api": "zunionInterDiffGenericCommand",
          "old_text": null,
          "new_text": "zunionInterDiffGenericCommand(c, c->argv[1], 2, SET_OP_DIFF, 0)",
          "old_line_content": "}",
          "new_line_content": "    zunionInterDiffGenericCommand(c, c->argv[1], 2, SET_OP_DIFF, 0);",
          "content_same": false
        },
        {
          "line": 773,
          "old_api": null,
          "new_api": "lpGetValue",
          "old_text": null,
          "new_text": "lpGetValue(eptr,&vlen,&vlong)",
          "old_line_content": "    if (vstr == NULL) {",
          "new_line_content": "    vstr = lpGetValue(eptr,&vlen,&vlong);",
          "content_same": false
        },
        {
          "line": 2821,
          "old_api": null,
          "new_api": "zunionInterDiffGenericCommand",
          "old_text": null,
          "new_text": "zunionInterDiffGenericCommand(c, NULL, 1, SET_OP_UNION, 0)",
          "old_line_content": "}",
          "new_line_content": "    zunionInterDiffGenericCommand(c, NULL, 1, SET_OP_UNION, 0);",
          "content_same": false
        },
        {
          "line": 776,
          "old_api": null,
          "new_api": "ll2string",
          "old_text": null,
          "new_text": "ll2string((char*)vbuf,sizeof(vbuf),vlong)",
          "old_line_content": "        vstr = vbuf;",
          "new_line_content": "        vlen = ll2string((char*)vbuf,sizeof(vbuf),vlong);",
          "content_same": false
        },
        {
          "line": 2826,
          "old_api": null,
          "new_api": "zunionInterDiffGenericCommand",
          "old_text": null,
          "new_text": "zunionInterDiffGenericCommand(c, NULL, 1, SET_OP_INTER, 0)",
          "old_line_content": "}",
          "new_line_content": "    zunionInterDiffGenericCommand(c, NULL, 1, SET_OP_INTER, 0);",
          "content_same": false
        },
        {
          "line": 781,
          "old_api": null,
          "new_api": "memcmp",
          "old_text": null,
          "new_text": "memcmp(vstr,cstr,minlen)",
          "old_line_content": "    if (cmp == 0) return vlen-clen;",
          "new_line_content": "    cmp = memcmp(vstr,cstr,minlen);",
          "content_same": false
        },
        {
          "line": 2831,
          "old_api": null,
          "new_api": "zunionInterDiffGenericCommand",
          "old_text": null,
          "new_text": "zunionInterDiffGenericCommand(c, NULL, 1, SET_OP_INTER, 1)",
          "old_line_content": "}",
          "new_line_content": "    zunionInterDiffGenericCommand(c, NULL, 1, SET_OP_INTER, 1);",
          "content_same": false
        },
        {
          "line": 787,
          "old_api": null,
          "new_api": "lpLength",
          "old_text": null,
          "new_text": "lpLength(zl)",
          "old_line_content": "}",
          "new_line_content": "    return lpLength(zl)/2;",
          "content_same": false
        },
        {
          "line": 2836,
          "old_api": null,
          "new_api": "zunionInterDiffGenericCommand",
          "old_text": null,
          "new_text": "zunionInterDiffGenericCommand(c, NULL, 1, SET_OP_DIFF, 0)",
          "old_line_content": "}",
          "new_line_content": "    zunionInterDiffGenericCommand(c, NULL, 1, SET_OP_DIFF, 0);",
          "content_same": false
        },
        {
          "line": 794,
          "old_api": null,
          "new_api": "serverAssert",
          "old_text": null,
          "new_text": "serverAssert(*eptr != NULL && *sptr != NULL)",
          "old_line_content": "",
          "new_line_content": "    serverAssert(*eptr != NULL && *sptr != NULL);",
          "content_same": false
        },
        {
          "line": 796,
          "old_api": null,
          "new_api": "lpNext",
          "old_text": null,
          "new_text": "lpNext(zl,*sptr)",
          "old_line_content": "    if (_eptr != NULL) {",
          "new_line_content": "    _eptr = lpNext(zl,*sptr);",
          "content_same": false
        },
        {
          "line": 799,
          "old_api": null,
          "new_api": "serverAssert",
          "old_text": null,
          "new_text": "serverAssert(_sptr != NULL)",
          "old_line_content": "    } else {",
          "new_line_content": "        serverAssert(_sptr != NULL);",
          "content_same": false
        },
        {
          "line": 813,
          "old_api": null,
          "new_api": "serverAssert",
          "old_text": null,
          "new_text": "serverAssert(*eptr != NULL && *sptr != NULL)",
          "old_line_content": "",
          "new_line_content": "    serverAssert(*eptr != NULL && *sptr != NULL);",
          "content_same": false
        },
        {
          "line": 815,
          "old_api": null,
          "new_api": "lpPrev",
          "old_text": null,
          "new_text": "lpPrev(zl,*eptr)",
          "old_line_content": "    if (_sptr != NULL) {",
          "new_line_content": "    _sptr = lpPrev(zl,*eptr);",
          "content_same": false
        },
        {
          "line": 818,
          "old_api": null,
          "new_api": "serverAssert",
          "old_text": null,
          "new_text": "serverAssert(_eptr != NULL)",
          "old_line_content": "    } else {",
          "new_line_content": "        serverAssert(_eptr != NULL);",
          "content_same": false
        },
        {
          "line": 839,
          "old_api": null,
          "new_api": "lpSeek",
          "old_text": null,
          "new_text": "lpSeek(zl,-1)",
          "old_line_content": "    if (p == NULL) return 0; /* Empty sorted set */",
          "new_line_content": "    p = lpSeek(zl,-1); /* Last score. */",
          "content_same": false
        },
        {
          "line": 842,
          "old_api": null,
          "new_api": "zslValueGteMin",
          "old_text": null,
          "new_text": "zslValueGteMin(score,range)",
          "old_line_content": "        return 0;",
          "new_line_content": "    if (!zslValueGteMin(score,range))",
          "content_same": false
        },
        {
          "line": 2892,
          "old_api": null,
          "new_api": "addReplyArrayLen",
          "old_text": null,
          "new_text": "addReplyArrayLen(handler->client, length)",
          "old_line_content": "        handler->userdata = NULL;",
          "new_line_content": "        addReplyArrayLen(handler->client, length);",
          "content_same": false
        },
        {
          "line": 848,
          "old_api": null,
          "new_api": "zslValueLteMax",
          "old_text": null,
          "new_text": "zslValueLteMax(score,range)",
          "old_line_content": "        return 0;",
          "new_line_content": "    if (!zslValueLteMax(score,range))",
          "content_same": false
        },
        {
          "line": 2896,
          "old_api": null,
          "new_api": "addReplyDeferredLen",
          "old_text": null,
          "new_text": "addReplyDeferredLen(handler->client)",
          "old_line_content": "}",
          "new_line_content": "    handler->userdata = addReplyDeferredLen(handler->client);",
          "content_same": false
        },
        {
          "line": 2903,
          "old_api": null,
          "new_api": "addReplyArrayLen",
          "old_text": null,
          "new_text": "addReplyArrayLen(handler->client, 2)",
          "old_line_content": "    }",
          "new_line_content": "        addReplyArrayLen(handler->client, 2);",
          "content_same": false
        },
        {
          "line": 857,
          "old_api": null,
          "new_api": "lpSeek",
          "old_text": null,
          "new_text": "lpSeek(zl,0)",
          "old_line_content": "    double score;",
          "new_line_content": "    unsigned char *eptr = lpSeek(zl,0), *sptr;",
          "content_same": false
        },
        {
          "line": 2906,
          "old_api": null,
          "new_api": "addReplyBulkCBuffer",
          "old_text": null,
          "new_text": "addReplyBulkCBuffer(handler->client, value, value_length_in_bytes)",
          "old_line_content": "",
          "new_line_content": "    addReplyBulkCBuffer(handler->client, value, value_length_in_bytes);",
          "content_same": false
        },
        {
          "line": 861,
          "old_api": null,
          "new_api": "zzlIsInRange",
          "old_text": null,
          "new_text": "zzlIsInRange(zl,range)",
          "old_line_content": "",
          "new_line_content": "    if (!zzlIsInRange(zl,range)) return NULL;",
          "content_same": false
        },
        {
          "line": 2909,
          "old_api": null,
          "new_api": "addReplyDouble",
          "old_text": null,
          "new_text": "addReplyDouble(handler->client, score)",
          "old_line_content": "    }",
          "new_line_content": "        addReplyDouble(handler->client, score);",
          "content_same": false
        },
        {
          "line": 865,
          "old_api": null,
          "new_api": "serverAssert",
          "old_text": null,
          "new_text": "serverAssert(sptr != NULL)",
          "old_line_content": "",
          "new_line_content": "        serverAssert(sptr != NULL);",
          "content_same": false
        },
        {
          "line": 868,
          "old_api": null,
          "new_api": "zslValueGteMin",
          "old_text": null,
          "new_text": "zslValueGteMin(score,range)",
          "old_line_content": "            /* Check if score <= max. */",
          "new_line_content": "        if (zslValueGteMin(score,range)) {",
          "content_same": false
        },
        {
          "line": 2917,
          "old_api": null,
          "new_api": "addReplyArrayLen",
          "old_text": null,
          "new_text": "addReplyArrayLen(handler->client, 2)",
          "old_line_content": "    }",
          "new_line_content": "        addReplyArrayLen(handler->client, 2);",
          "content_same": false
        },
        {
          "line": 870,
          "old_api": null,
          "new_api": "zslValueLteMax",
          "old_text": null,
          "new_text": "zslValueLteMax(score,range)",
          "old_line_content": "                return eptr;",
          "new_line_content": "            if (zslValueLteMax(score,range))",
          "content_same": false
        },
        {
          "line": 2920,
          "old_api": null,
          "new_api": "addReplyBulkLongLong",
          "old_text": null,
          "new_text": "addReplyBulkLongLong(handler->client, value)",
          "old_line_content": "",
          "new_line_content": "    addReplyBulkLongLong(handler->client, value);",
          "content_same": false
        },
        {
          "line": 2923,
          "old_api": null,
          "new_api": "addReplyDouble",
          "old_text": null,
          "new_text": "addReplyDouble(handler->client, score)",
          "old_line_content": "    }",
          "new_line_content": "        addReplyDouble(handler->client, score);",
          "content_same": false
        },
        {
          "line": 876,
          "old_api": null,
          "new_api": "lpNext",
          "old_text": null,
          "new_text": "lpNext(zl,sptr)",
          "old_line_content": "    }",
          "new_line_content": "        eptr = lpNext(zl,sptr);",
          "content_same": false
        },
        {
          "line": 885,
          "old_api": null,
          "new_api": "lpSeek",
          "old_text": null,
          "new_text": "lpSeek(zl,-2)",
          "old_line_content": "    double score;",
          "new_line_content": "    unsigned char *eptr = lpSeek(zl,-2), *sptr;",
          "content_same": false
        },
        {
          "line": 889,
          "old_api": null,
          "new_api": "zzlIsInRange",
          "old_text": null,
          "new_text": "zzlIsInRange(zl,range)",
          "old_line_content": "",
          "new_line_content": "    if (!zzlIsInRange(zl,range)) return NULL;",
          "content_same": false
        },
        {
          "line": 2940,
          "old_api": null,
          "new_api": "setDeferredArrayLen",
          "old_text": null,
          "new_text": "setDeferredArrayLen(handler->client, handler->userdata, result_count)",
          "old_line_content": "}",
          "new_line_content": "    setDeferredArrayLen(handler->client, handler->userdata, result_count);",
          "content_same": false
        },
        {
          "line": 893,
          "old_api": null,
          "new_api": "serverAssert",
          "old_text": null,
          "new_text": "serverAssert(sptr != NULL)",
          "old_line_content": "",
          "new_line_content": "        serverAssert(sptr != NULL);",
          "content_same": false
        },
        {
          "line": 896,
          "old_api": null,
          "new_api": "zslValueLteMax",
          "old_text": null,
          "new_text": "zslValueLteMax(score,range)",
          "old_line_content": "            /* Check if score >= min. */",
          "new_line_content": "        if (zslValueLteMax(score,range)) {",
          "content_same": false
        },
        {
          "line": 898,
          "old_api": null,
          "new_api": "zslValueGteMin",
          "old_text": null,
          "new_text": "zslValueGteMin(score,range)",
          "old_line_content": "                return eptr;",
          "new_line_content": "            if (zslValueGteMin(score,range))",
          "content_same": false
        },
        {
          "line": 2947,
          "old_api": null,
          "new_api": "createZsetListpackObject",
          "old_text": null,
          "new_text": "createZsetListpackObject()",
          "old_line_content": "}",
          "new_line_content": "    handler->dstobj = createZsetListpackObject();",
          "content_same": false
        },
        {
          "line": 905,
          "old_api": null,
          "new_api": "lpPrev",
          "old_text": null,
          "new_text": "lpPrev(zl,eptr)",
          "old_line_content": "        if (sptr != NULL)",
          "new_line_content": "        sptr = lpPrev(zl,eptr);",
          "content_same": false
        },
        {
          "line": 907,
          "old_api": null,
          "new_api": "lpPrev",
          "old_text": null,
          "new_text": "lpPrev(zl,sptr)",
          "old_line_content": "        else",
          "new_line_content": "            serverAssert((eptr = lpPrev(zl,sptr)) != NULL);",
          "content_same": false
        },
        {
          "line": 2958,
          "old_api": null,
          "new_api": "serverAssert",
          "old_text": null,
          "new_text": "serverAssert(retval)",
          "old_line_content": "}",
          "new_line_content": "    serverAssert(retval);",
          "content_same": false
        },
        {
          "line": 918,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(value)",
          "old_line_content": "    return res;",
          "new_line_content": "    sdsfree(value);",
          "content_same": false
        },
        {
          "line": 2969,
          "old_api": null,
          "new_api": "serverAssert",
          "old_text": null,
          "new_text": "serverAssert(retval)",
          "old_line_content": "}",
          "new_line_content": "    serverAssert(retval);",
          "content_same": false
        },
        {
          "line": 925,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(value)",
          "old_line_content": "    return res;",
          "new_line_content": "    sdsfree(value);",
          "content_same": false
        },
        {
          "line": 2977,
          "old_api": null,
          "new_api": "notifyKeyspaceEvent",
          "old_text": null,
          "new_text": "notifyKeyspaceEvent(NOTIFY_ZSET, \"zrangestore\", handler->dstkey, handler->client->db->id)",
          "old_line_content": "        server.dirty++;",
          "new_line_content": "        notifyKeyspaceEvent(NOTIFY_ZSET, \"zrangestore\", handler->dstkey, handler->client->db->id);",
          "content_same": false
        },
        {
          "line": 935,
          "old_api": null,
          "new_api": "sdscmplex",
          "old_text": null,
          "new_text": "sdscmplex(range->min,range->max)",
          "old_line_content": "    if (cmp > 0 || (cmp == 0 && (range->minex || range->maxex)))",
          "new_line_content": "    int cmp = sdscmplex(range->min,range->max);",
          "content_same": false
        },
        {
          "line": 2983,
          "old_api": null,
          "new_api": "notifyKeyspaceEvent",
          "old_text": null,
          "new_text": "notifyKeyspaceEvent(NOTIFY_GENERIC, \"del\", handler->dstkey, handler->client->db->id)",
          "old_line_content": "            server.dirty++;",
          "new_line_content": "            notifyKeyspaceEvent(NOTIFY_GENERIC, \"del\", handler->dstkey, handler->client->db->id);",
          "content_same": false
        },
        {
          "line": 939,
          "old_api": null,
          "new_api": "lpSeek",
          "old_text": null,
          "new_text": "lpSeek(zl,-2)",
          "old_line_content": "    if (p == NULL) return 0;",
          "new_line_content": "    p = lpSeek(zl,-2); /* Last element. */",
          "content_same": false
        },
        {
          "line": 2987,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(handler->dstobj)",
          "old_line_content": "}",
          "new_line_content": "    decrRefCount(handler->dstobj);",
          "content_same": false
        },
        {
          "line": 941,
          "old_api": null,
          "new_api": "zzlLexValueGteMin",
          "old_text": null,
          "new_text": "zzlLexValueGteMin(p,range)",
          "old_line_content": "        return 0;",
          "new_line_content": "    if (!zzlLexValueGteMin(p,range))",
          "content_same": false
        },
        {
          "line": 946,
          "old_api": null,
          "new_api": "zzlLexValueLteMax",
          "old_text": null,
          "new_text": "zzlLexValueLteMax(p,range)",
          "old_line_content": "        return 0;",
          "new_line_content": "    if (!zzlLexValueLteMax(p,range))",
          "content_same": false
        },
        {
          "line": 2994,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(handler, 0, sizeof(*handler))",
          "old_line_content": "",
          "new_line_content": "    memset(handler, 0, sizeof(*handler));",
          "content_same": false
        },
        {
          "line": 955,
          "old_api": null,
          "new_api": "lpSeek",
          "old_text": null,
          "new_text": "lpSeek(zl,0)",
          "old_line_content": "",
          "new_line_content": "    unsigned char *eptr = lpSeek(zl,0), *sptr;",
          "content_same": false
        },
        {
          "line": 958,
          "old_api": null,
          "new_api": "zzlIsInLexRange",
          "old_text": null,
          "new_text": "zzlIsInLexRange(zl,range)",
          "old_line_content": "",
          "new_line_content": "    if (!zzlIsInLexRange(zl,range)) return NULL;",
          "content_same": false
        },
        {
          "line": 961,
          "old_api": null,
          "new_api": "zzlLexValueGteMin",
          "old_text": null,
          "new_text": "zzlLexValueGteMin(eptr,range)",
          "old_line_content": "            /* Check if score <= max. */",
          "new_line_content": "        if (zzlLexValueGteMin(eptr,range)) {",
          "content_same": false
        },
        {
          "line": 963,
          "old_api": null,
          "new_api": "zzlLexValueLteMax",
          "old_text": null,
          "new_text": "zzlLexValueLteMax(eptr,range)",
          "old_line_content": "                return eptr;",
          "new_line_content": "            if (zzlLexValueLteMax(eptr,range))",
          "content_same": false
        },
        {
          "line": 971,
          "old_api": null,
          "new_api": "lpNext",
          "old_text": null,
          "new_text": "lpNext(zl,sptr)",
          "old_line_content": "    }",
          "new_line_content": "        eptr = lpNext(zl,sptr); /* Next element. */",
          "content_same": false
        },
        {
          "line": 980,
          "old_api": null,
          "new_api": "lpSeek",
          "old_text": null,
          "new_text": "lpSeek(zl,-2)",
          "old_line_content": "",
          "new_line_content": "    unsigned char *eptr = lpSeek(zl,-2), *sptr;",
          "content_same": false
        },
        {
          "line": 983,
          "old_api": null,
          "new_api": "zzlIsInLexRange",
          "old_text": null,
          "new_text": "zzlIsInLexRange(zl,range)",
          "old_line_content": "",
          "new_line_content": "    if (!zzlIsInLexRange(zl,range)) return NULL;",
          "content_same": false
        },
        {
          "line": 986,
          "old_api": null,
          "new_api": "zzlLexValueLteMax",
          "old_text": null,
          "new_text": "zzlLexValueLteMax(eptr,range)",
          "old_line_content": "            /* Check if score >= min. */",
          "new_line_content": "        if (zzlLexValueLteMax(eptr,range)) {",
          "content_same": false
        },
        {
          "line": 988,
          "old_api": null,
          "new_api": "zzlLexValueGteMin",
          "old_text": null,
          "new_text": "zzlLexValueGteMin(eptr,range)",
          "old_line_content": "                return eptr;",
          "new_line_content": "            if (zzlLexValueGteMin(eptr,range))",
          "content_same": false
        },
        {
          "line": 3036,
          "old_api": null,
          "new_api": "zsetLength",
          "old_text": null,
          "new_text": "zsetLength(zobj)",
          "old_line_content": "    if (start < 0) start = llen+start;",
          "new_line_content": "    llen = zsetLength(zobj);",
          "content_same": false
        },
        {
          "line": 995,
          "old_api": null,
          "new_api": "lpPrev",
          "old_text": null,
          "new_text": "lpPrev(zl,eptr)",
          "old_line_content": "        if (sptr != NULL)",
          "new_line_content": "        sptr = lpPrev(zl,eptr);",
          "content_same": false
        },
        {
          "line": 997,
          "old_api": null,
          "new_api": "lpPrev",
          "old_text": null,
          "new_text": "lpPrev(zl,sptr)",
          "old_line_content": "        else",
          "new_line_content": "            serverAssert((eptr = lpPrev(zl,sptr)) != NULL);",
          "content_same": false
        },
        {
          "line": 3046,
          "old_api": null,
          "new_api": "finalizeResultEmission",
          "old_text": null,
          "new_text": "handler->finalizeResultEmission(handler, 0)",
          "old_line_content": "        return;",
          "new_line_content": "        handler->finalizeResultEmission(handler, 0);",
          "content_same": false
        },
        {
          "line": 3053,
          "old_api": null,
          "new_api": "beginResultEmission",
          "old_text": null,
          "new_text": "handler->beginResultEmission(handler, rangelen)",
          "old_line_content": "    if (zobj->encoding == OBJ_ENCODING_LISTPACK) {",
          "new_line_content": "    handler->beginResultEmission(handler, rangelen);",
          "content_same": false
        },
        {
          "line": 1009,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(ele)",
          "old_line_content": "    if (eptr) {",
          "new_line_content": "    eptr = lpFind(lp, eptr, (unsigned char*)ele, sdslen(ele), 1);",
          "content_same": false
        },
        {
          "line": 1012,
          "old_api": null,
          "new_api": "serverAssert",
          "old_text": null,
          "new_text": "serverAssert(sptr != NULL)",
          "old_line_content": "",
          "new_line_content": "        serverAssert(sptr != NULL);",
          "content_same": false
        },
        {
          "line": 3063,
          "old_api": null,
          "new_api": "lpSeek",
          "old_text": null,
          "new_text": "lpSeek(zl,-2-(2*start))",
          "old_line_content": "        else",
          "new_line_content": "            eptr = lpSeek(zl,-2-(2*start));",
          "content_same": false
        },
        {
          "line": 1015,
          "old_api": null,
          "new_api": "zzlGetScore",
          "old_text": null,
          "new_text": "zzlGetScore(sptr)",
          "old_line_content": "        return eptr;",
          "new_line_content": "        if (score != NULL) *score = zzlGetScore(sptr);",
          "content_same": false
        },
        {
          "line": 3065,
          "old_api": null,
          "new_api": "lpSeek",
          "old_text": null,
          "new_text": "lpSeek(zl,2*start)",
          "old_line_content": "",
          "new_line_content": "            eptr = lpSeek(zl,2*start);",
          "content_same": false
        },
        {
          "line": 3068,
          "old_api": null,
          "new_api": "lpNext",
          "old_text": null,
          "new_text": "lpNext(zl,eptr)",
          "old_line_content": "",
          "new_line_content": "        sptr = lpNext(zl,eptr);",
          "content_same": false
        },
        {
          "line": 3072,
          "old_api": null,
          "new_api": "lpGetValue",
          "old_text": null,
          "new_text": "lpGetValue(eptr,&vlen,&vlong)",
          "old_line_content": "",
          "new_line_content": "            vstr = lpGetValue(eptr,&vlen,&vlong);",
          "content_same": false
        },
        {
          "line": 1025,
          "old_api": null,
          "new_api": "lpDeleteRangeWithEntry",
          "old_text": null,
          "new_text": "lpDeleteRangeWithEntry(zl,&eptr,2)",
          "old_line_content": "}",
          "new_line_content": "    return lpDeleteRangeWithEntry(zl,&eptr,2);",
          "content_same": false
        },
        {
          "line": 3075,
          "old_api": null,
          "new_api": "zzlGetScore",
          "old_text": null,
          "new_text": "zzlGetScore(sptr)",
          "old_line_content": "",
          "new_line_content": "                score = zzlGetScore(sptr);",
          "content_same": false
        },
        {
          "line": 3078,
          "old_api": null,
          "new_api": "emitResultFromLongLong",
          "old_text": null,
          "new_text": "handler->emitResultFromLongLong(handler, vlong, score)",
          "old_line_content": "            } else {",
          "new_line_content": "                handler->emitResultFromLongLong(handler, vlong, score);",
          "content_same": false
        },
        {
          "line": 3080,
          "old_api": null,
          "new_api": "emitResultFromCBuffer",
          "old_text": null,
          "new_text": "handler->emitResultFromCBuffer(handler, vstr, vlen, score)",
          "old_line_content": "            }",
          "new_line_content": "                handler->emitResultFromCBuffer(handler, vstr, vlen, score);",
          "content_same": false
        },
        {
          "line": 1033,
          "old_api": null,
          "new_api": "d2string",
          "old_text": null,
          "new_text": "d2string(scorebuf,sizeof(scorebuf),score)",
          "old_line_content": "    if (eptr == NULL) {",
          "new_line_content": "    scorelen = d2string(scorebuf,sizeof(scorebuf),score);",
          "content_same": false
        },
        {
          "line": 1036,
          "old_api": null,
          "new_api": "lpAppend",
          "old_text": null,
          "new_text": "lpAppend(zl,(unsigned char*)scorebuf,scorelen)",
          "old_line_content": "    } else {",
          "new_line_content": "        zl = lpAppend(zl,(unsigned char*)scorebuf,scorelen);",
          "content_same": false
        },
        {
          "line": 3084,
          "old_api": null,
          "new_api": "zzlPrev",
          "old_text": null,
          "new_text": "zzlPrev(zl,&eptr,&sptr)",
          "old_line_content": "            else",
          "new_line_content": "                zzlPrev(zl,&eptr,&sptr);",
          "content_same": false
        },
        {
          "line": 3086,
          "old_api": null,
          "new_api": "zzlNext",
          "old_text": null,
          "new_text": "zzlNext(zl,&eptr,&sptr)",
          "old_line_content": "        }",
          "new_line_content": "                zzlNext(zl,&eptr,&sptr);",
          "content_same": false
        },
        {
          "line": 1039,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(ele)",
          "old_line_content": "",
          "new_line_content": "        zl = lpInsertString(zl,(unsigned char*)ele,sdslen(ele),eptr,LP_BEFORE,&sptr);",
          "content_same": false
        },
        {
          "line": 1042,
          "old_api": null,
          "new_api": "lpInsertString",
          "old_text": null,
          "new_text": "lpInsertString(zl,(unsigned char*)scorebuf,scorelen,sptr,LP_AFTER,NULL)",
          "old_line_content": "    }",
          "new_line_content": "        zl = lpInsertString(zl,(unsigned char*)scorebuf,scorelen,sptr,LP_AFTER,NULL);",
          "content_same": false
        },
        {
          "line": 1050,
          "old_api": null,
          "new_api": "lpSeek",
          "old_text": null,
          "new_text": "lpSeek(zl,0)",
          "old_line_content": "    double s;",
          "new_line_content": "    unsigned char *eptr = lpSeek(zl,0), *sptr;",
          "content_same": false
        },
        {
          "line": 3098,
          "old_api": null,
          "new_api": "zslGetElementByRank",
          "old_text": null,
          "new_text": "zslGetElementByRank(zsl,llen-start)",
          "old_line_content": "        } else {",
          "new_line_content": "                ln = zslGetElementByRank(zsl,llen-start);",
          "content_same": false
        },
        {
          "line": 3102,
          "old_api": null,
          "new_api": "zslGetElementByRank",
          "old_text": null,
          "new_text": "zslGetElementByRank(zsl,start+1)",
          "old_line_content": "        }",
          "new_line_content": "                ln = zslGetElementByRank(zsl,start+1);",
          "content_same": false
        },
        {
          "line": 1056,
          "old_api": null,
          "new_api": "zzlGetScore",
          "old_text": null,
          "new_text": "zzlGetScore(sptr)",
          "old_line_content": "",
          "new_line_content": "        s = zzlGetScore(sptr);",
          "content_same": false
        },
        {
          "line": 3106,
          "old_api": null,
          "new_api": "serverAssertWithInfo",
          "old_text": null,
          "new_text": "serverAssertWithInfo(c,zobj,ln != NULL)",
          "old_line_content": "            sds ele = ln->ele;",
          "new_line_content": "            serverAssertWithInfo(c,zobj,ln != NULL);",
          "content_same": false
        },
        {
          "line": 3108,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(ele)",
          "old_line_content": "            ln = reverse ? ln->backward : ln->level[0].forward;",
          "new_line_content": "            handler->emitResultFromCBuffer(handler, ele, sdslen(ele), ln->score);",
          "content_same": false
        },
        {
          "line": 1062,
          "old_api": null,
          "new_api": "zzlInsertAt",
          "old_text": null,
          "new_text": "zzlInsertAt(zl,eptr,ele,score)",
          "old_line_content": "            break;",
          "new_line_content": "            zl = zzlInsertAt(zl,eptr,ele,score);",
          "content_same": false
        },
        {
          "line": 3112,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Unknown sorted set encoding\")",
          "old_line_content": "    }",
          "new_line_content": "        serverPanic(\"Unknown sorted set encoding\");",
          "content_same": false
        },
        {
          "line": 1067,
          "old_api": null,
          "new_api": "zzlInsertAt",
          "old_text": null,
          "new_text": "zzlInsertAt(zl,eptr,ele,score)",
          "old_line_content": "                break;",
          "new_line_content": "                zl = zzlInsertAt(zl,eptr,ele,score);",
          "content_same": false
        },
        {
          "line": 3115,
          "old_api": null,
          "new_api": "finalizeResultEmission",
          "old_text": null,
          "new_text": "handler->finalizeResultEmission(handler, result_cardinality)",
          "old_line_content": "}",
          "new_line_content": "    handler->finalizeResultEmission(handler, result_cardinality);",
          "content_same": false
        },
        {
          "line": 1073,
          "old_api": null,
          "new_api": "lpNext",
          "old_text": null,
          "new_text": "lpNext(zl,sptr)",
          "old_line_content": "    }",
          "new_line_content": "        eptr = lpNext(zl,sptr);",
          "content_same": false
        },
        {
          "line": 3124,
          "old_api": null,
          "new_api": "zrangeGenericCommand",
          "old_text": null,
          "new_text": "zrangeGenericCommand(&handler, 2, 1, ZRANGE_AUTO, ZRANGE_DIRECTION_AUTO)",
          "old_line_content": "}",
          "new_line_content": "    zrangeGenericCommand(&handler, 2, 1, ZRANGE_AUTO, ZRANGE_DIRECTION_AUTO);",
          "content_same": false
        },
        {
          "line": 1078,
          "old_api": null,
          "new_api": "zzlInsertAt",
          "old_text": null,
          "new_text": "zzlInsertAt(zl,NULL,ele,score)",
          "old_line_content": "    return zl;",
          "new_line_content": "        zl = zzlInsertAt(zl,NULL,ele,score);",
          "content_same": false
        },
        {
          "line": 3131,
          "old_api": null,
          "new_api": "zrangeGenericCommand",
          "old_text": null,
          "new_text": "zrangeGenericCommand(&handler, 1, 0, ZRANGE_AUTO, ZRANGE_DIRECTION_AUTO)",
          "old_line_content": "}",
          "new_line_content": "    zrangeGenericCommand(&handler, 1, 0, ZRANGE_AUTO, ZRANGE_DIRECTION_AUTO);",
          "content_same": false
        },
        {
          "line": 1089,
          "old_api": null,
          "new_api": "zzlFirstInRange",
          "old_text": null,
          "new_text": "zzlFirstInRange(zl,range)",
          "old_line_content": "    if (eptr == NULL) return zl;",
          "new_line_content": "    eptr = zzlFirstInRange(zl,range);",
          "content_same": false
        },
        {
          "line": 3138,
          "old_api": null,
          "new_api": "zrangeGenericCommand",
          "old_text": null,
          "new_text": "zrangeGenericCommand(&handler, 1, 0, ZRANGE_RANK, ZRANGE_DIRECTION_REVERSE)",
          "old_line_content": "}",
          "new_line_content": "    zrangeGenericCommand(&handler, 1, 0, ZRANGE_RANK, ZRANGE_DIRECTION_REVERSE);",
          "content_same": false
        },
        {
          "line": 1095,
          "old_api": null,
          "new_api": "zslValueLteMax",
          "old_text": null,
          "new_text": "zslValueLteMax(score,range)",
          "old_line_content": "            /* Delete both the element and the score. */",
          "new_line_content": "        if (zslValueLteMax(score,range)) {",
          "content_same": false
        },
        {
          "line": 1097,
          "old_api": null,
          "new_api": "lpDeleteRangeWithEntry",
          "old_text": null,
          "new_text": "lpDeleteRangeWithEntry(zl,&eptr,2)",
          "old_line_content": "            num++;",
          "new_line_content": "            zl = lpDeleteRangeWithEntry(zl,&eptr,2);",
          "content_same": false
        },
        {
          "line": 3147,
          "old_api": null,
          "new_api": "beginResultEmission",
          "old_text": null,
          "new_text": "handler->beginResultEmission(handler, -1)",
          "old_line_content": "",
          "new_line_content": "    handler->beginResultEmission(handler, -1);",
          "content_same": false
        },
        {
          "line": 3151,
          "old_api": null,
          "new_api": "finalizeResultEmission",
          "old_text": null,
          "new_text": "handler->finalizeResultEmission(handler, 0)",
          "old_line_content": "        return;",
          "new_line_content": "        handler->finalizeResultEmission(handler, 0);",
          "content_same": false
        },
        {
          "line": 1115,
          "old_api": null,
          "new_api": "zzlFirstInLexRange",
          "old_text": null,
          "new_text": "zzlFirstInLexRange(zl,range)",
          "old_line_content": "    if (eptr == NULL) return zl;",
          "new_line_content": "    eptr = zzlFirstInLexRange(zl,range);",
          "content_same": false
        },
        {
          "line": 3164,
          "old_api": null,
          "new_api": "zzlLastInRange",
          "old_text": null,
          "new_text": "zzlLastInRange(zl,range)",
          "old_line_content": "        } else {",
          "new_line_content": "            eptr = zzlLastInRange(zl,range);",
          "content_same": false
        },
        {
          "line": 3166,
          "old_api": null,
          "new_api": "zzlFirstInRange",
          "old_text": null,
          "new_text": "zzlFirstInRange(zl,range)",
          "old_line_content": "        }",
          "new_line_content": "            eptr = zzlFirstInRange(zl,range);",
          "content_same": false
        },
        {
          "line": 1120,
          "old_api": null,
          "new_api": "zzlLexValueLteMax",
          "old_text": null,
          "new_text": "zzlLexValueLteMax(eptr,range)",
          "old_line_content": "            /* Delete both the element and the score. */",
          "new_line_content": "        if (zzlLexValueLteMax(eptr,range)) {",
          "content_same": false
        },
        {
          "line": 1122,
          "old_api": null,
          "new_api": "lpDeleteRangeWithEntry",
          "old_text": null,
          "new_text": "lpDeleteRangeWithEntry(zl,&eptr,2)",
          "old_line_content": "            num++;",
          "new_line_content": "            zl = lpDeleteRangeWithEntry(zl,&eptr,2);",
          "content_same": false
        },
        {
          "line": 3171,
          "old_api": null,
          "new_api": "lpNext",
          "old_text": null,
          "new_text": "lpNext(zl,eptr)",
          "old_line_content": "",
          "new_line_content": "            sptr = lpNext(zl,eptr);",
          "content_same": false
        },
        {
          "line": 3177,
          "old_api": null,
          "new_api": "zzlPrev",
          "old_text": null,
          "new_text": "zzlPrev(zl,&eptr,&sptr)",
          "old_line_content": "            } else {",
          "new_line_content": "                zzlPrev(zl,&eptr,&sptr);",
          "content_same": false
        },
        {
          "line": 3179,
          "old_api": null,
          "new_api": "zzlNext",
          "old_text": null,
          "new_text": "zzlNext(zl,&eptr,&sptr)",
          "old_line_content": "            }",
          "new_line_content": "                zzlNext(zl,&eptr,&sptr);",
          "content_same": false
        },
        {
          "line": 3184,
          "old_api": null,
          "new_api": "zzlGetScore",
          "old_text": null,
          "new_text": "zzlGetScore(sptr)",
          "old_line_content": "",
          "new_line_content": "            double score = zzlGetScore(sptr);",
          "content_same": false
        },
        {
          "line": 1139,
          "old_api": null,
          "new_api": "lpDeleteRange",
          "old_text": null,
          "new_text": "lpDeleteRange(zl,2*(start-1),2*num)",
          "old_line_content": "    return zl;",
          "new_line_content": "    zl = lpDeleteRange(zl,2*(start-1),2*num);",
          "content_same": false
        },
        {
          "line": 3188,
          "old_api": null,
          "new_api": "zslValueGteMin",
          "old_text": null,
          "new_text": "zslValueGteMin(score,range)",
          "old_line_content": "            } else {",
          "new_line_content": "                if (!zslValueGteMin(score,range)) break;",
          "content_same": false
        },
        {
          "line": 3190,
          "old_api": null,
          "new_api": "zslValueLteMax",
          "old_text": null,
          "new_text": "zslValueLteMax(score,range)",
          "old_line_content": "            }",
          "new_line_content": "                if (!zslValueLteMax(score,range)) break;",
          "content_same": false
        },
        {
          "line": 3193,
          "old_api": null,
          "new_api": "lpGetValue",
          "old_text": null,
          "new_text": "lpGetValue(eptr,&vlen,&vlong)",
          "old_line_content": "            rangelen++;",
          "new_line_content": "            vstr = lpGetValue(eptr,&vlen,&vlong);",
          "content_same": false
        },
        {
          "line": 3196,
          "old_api": null,
          "new_api": "emitResultFromLongLong",
          "old_text": null,
          "new_text": "handler->emitResultFromLongLong(handler, vlong, score)",
          "old_line_content": "            } else {",
          "new_line_content": "                handler->emitResultFromLongLong(handler, vlong, score);",
          "content_same": false
        },
        {
          "line": 1150,
          "old_api": null,
          "new_api": "zzlLength",
          "old_text": null,
          "new_text": "zzlLength(zobj->ptr)",
          "old_line_content": "    } else if (zobj->encoding == OBJ_ENCODING_SKIPLIST) {",
          "new_line_content": "        length = zzlLength(zobj->ptr);",
          "content_same": false
        },
        {
          "line": 3198,
          "old_api": null,
          "new_api": "emitResultFromCBuffer",
          "old_text": null,
          "new_text": "handler->emitResultFromCBuffer(handler, vstr, vlen, score)",
          "old_line_content": "            }",
          "new_line_content": "                handler->emitResultFromCBuffer(handler, vstr, vlen, score);",
          "content_same": false
        },
        {
          "line": 1154,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Unknown sorted set encoding\")",
          "old_line_content": "    }",
          "new_line_content": "        serverPanic(\"Unknown sorted set encoding\");",
          "content_same": false
        },
        {
          "line": 3203,
          "old_api": null,
          "new_api": "zzlPrev",
          "old_text": null,
          "new_text": "zzlPrev(zl,&eptr,&sptr)",
          "old_line_content": "            } else {",
          "new_line_content": "                zzlPrev(zl,&eptr,&sptr);",
          "content_same": false
        },
        {
          "line": 3205,
          "old_api": null,
          "new_api": "zzlNext",
          "old_text": null,
          "new_text": "zzlNext(zl,&eptr,&sptr)",
          "old_line_content": "            }",
          "new_line_content": "                zzlNext(zl,&eptr,&sptr);",
          "content_same": false
        },
        {
          "line": 3215,
          "old_api": null,
          "new_api": "zslLastInRange",
          "old_text": null,
          "new_text": "zslLastInRange(zsl,range)",
          "old_line_content": "        } else {",
          "new_line_content": "            ln = zslLastInRange(zsl,range);",
          "content_same": false
        },
        {
          "line": 3217,
          "old_api": null,
          "new_api": "zslFirstInRange",
          "old_text": null,
          "new_text": "zslFirstInRange(zsl,range)",
          "old_line_content": "        }",
          "new_line_content": "            ln = zslFirstInRange(zsl,range);",
          "content_same": false
        },
        {
          "line": 1174,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Unknown target encoding\")",
          "old_line_content": "",
          "new_line_content": "            serverPanic(\"Unknown target encoding\");",
          "content_same": false
        },
        {
          "line": 1178,
          "old_api": null,
          "new_api": "zslCreate",
          "old_text": null,
          "new_text": "zslCreate()",
          "old_line_content": "",
          "new_line_content": "        zs->zsl = zslCreate();",
          "content_same": false
        },
        {
          "line": 1183,
          "old_api": null,
          "new_api": "serverAssertWithInfo",
          "old_text": null,
          "new_text": "serverAssertWithInfo(NULL,zobj,sptr != NULL)",
          "old_line_content": "",
          "new_line_content": "        serverAssertWithInfo(NULL,zobj,sptr != NULL);",
          "content_same": false
        },
        {
          "line": 3233,
          "old_api": null,
          "new_api": "zslValueGteMin",
          "old_text": null,
          "new_text": "zslValueGteMin(ln->score,range)",
          "old_line_content": "            } else {",
          "new_line_content": "                if (!zslValueGteMin(ln->score,range)) break;",
          "content_same": false
        },
        {
          "line": 1187,
          "old_api": null,
          "new_api": "lpGetValue",
          "old_text": null,
          "new_text": "lpGetValue(eptr,&vlen,&vlong)",
          "old_line_content": "            if (vstr == NULL)",
          "new_line_content": "            vstr = lpGetValue(eptr,&vlen,&vlong);",
          "content_same": false
        },
        {
          "line": 3235,
          "old_api": null,
          "new_api": "zslValueLteMax",
          "old_text": null,
          "new_text": "zslValueLteMax(ln->score,range)",
          "old_line_content": "            }",
          "new_line_content": "                if (!zslValueLteMax(ln->score,range)) break;",
          "content_same": false
        },
        {
          "line": 1189,
          "old_api": null,
          "new_api": "sdsfromlonglong",
          "old_text": null,
          "new_text": "sdsfromlonglong(vlong)",
          "old_line_content": "            else",
          "new_line_content": "                ele = sdsfromlonglong(vlong);",
          "content_same": false
        },
        {
          "line": 1191,
          "old_api": null,
          "new_api": "sdsnewlen",
          "old_text": null,
          "new_text": "sdsnewlen((char*)vstr,vlen)",
          "old_line_content": "",
          "new_line_content": "                ele = sdsnewlen((char*)vstr,vlen);",
          "content_same": false
        },
        {
          "line": 3239,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(ln->ele)",
          "old_line_content": "",
          "new_line_content": "            handler->emitResultFromCBuffer(handler, ln->ele, sdslen(ln->ele), ln->score);",
          "content_same": false
        },
        {
          "line": 1195,
          "old_api": null,
          "new_api": "zzlNext",
          "old_text": null,
          "new_text": "zzlNext(zl,&eptr,&sptr)",
          "old_line_content": "        }",
          "new_line_content": "            zzlNext(zl,&eptr,&sptr);",
          "content_same": false
        },
        {
          "line": 1198,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(zobj->ptr)",
          "old_line_content": "        zobj->ptr = zs;",
          "new_line_content": "        zfree(zobj->ptr);",
          "content_same": false
        },
        {
          "line": 3249,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Unknown sorted set encoding\")",
          "old_line_content": "    }",
          "new_line_content": "        serverPanic(\"Unknown sorted set encoding\");",
          "content_same": false
        },
        {
          "line": 1202,
          "old_api": null,
          "new_api": "lpNew",
          "old_text": null,
          "new_text": "lpNew(0)",
          "old_line_content": "",
          "new_line_content": "        unsigned char *zl = lpNew(0);",
          "content_same": false
        },
        {
          "line": 3252,
          "old_api": null,
          "new_api": "finalizeResultEmission",
          "old_text": null,
          "new_text": "handler->finalizeResultEmission(handler, rangelen)",
          "old_line_content": "}",
          "new_line_content": "    handler->finalizeResultEmission(handler, rangelen);",
          "content_same": false
        },
        {
          "line": 1205,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Unknown target encoding\")",
          "old_line_content": "",
          "new_line_content": "            serverPanic(\"Unknown target encoding\");",
          "content_same": false
        },
        {
          "line": 1210,
          "old_api": null,
          "new_api": "dictRelease",
          "old_text": null,
          "new_text": "dictRelease(zs->dict)",
          "old_line_content": "        node = zs->zsl->header->level[0].forward;",
          "new_line_content": "        dictRelease(zs->dict);",
          "content_same": false
        },
        {
          "line": 3259,
          "old_api": null,
          "new_api": "zrangeGenericCommand",
          "old_text": null,
          "new_text": "zrangeGenericCommand(&handler, 1, 0, ZRANGE_SCORE, ZRANGE_DIRECTION_FORWARD)",
          "old_line_content": "}",
          "new_line_content": "    zrangeGenericCommand(&handler, 1, 0, ZRANGE_SCORE, ZRANGE_DIRECTION_FORWARD);",
          "content_same": false
        },
        {
          "line": 1213,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(zs->zsl)",
          "old_line_content": "",
          "new_line_content": "        zfree(zs->zsl);",
          "content_same": false
        },
        {
          "line": 1216,
          "old_api": null,
          "new_api": "zzlInsertAt",
          "old_text": null,
          "new_text": "zzlInsertAt(zl,NULL,node->ele,node->score)",
          "old_line_content": "            next = node->level[0].forward;",
          "new_line_content": "            zl = zzlInsertAt(zl,NULL,node->ele,node->score);",
          "content_same": false
        },
        {
          "line": 1218,
          "old_api": null,
          "new_api": "zslFreeNode",
          "old_text": null,
          "new_text": "zslFreeNode(node)",
          "old_line_content": "            node = next;",
          "new_line_content": "            zslFreeNode(node);",
          "content_same": false
        },
        {
          "line": 3266,
          "old_api": null,
          "new_api": "zrangeGenericCommand",
          "old_text": null,
          "new_text": "zrangeGenericCommand(&handler, 1, 0, ZRANGE_SCORE, ZRANGE_DIRECTION_REVERSE)",
          "old_line_content": "}",
          "new_line_content": "    zrangeGenericCommand(&handler, 1, 0, ZRANGE_SCORE, ZRANGE_DIRECTION_REVERSE);",
          "content_same": false
        },
        {
          "line": 1222,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(zs)",
          "old_line_content": "        zobj->ptr = zl;",
          "new_line_content": "        zfree(zs);",
          "content_same": false
        },
        {
          "line": 1226,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Unknown sorted set encoding\")",
          "old_line_content": "    }",
          "new_line_content": "        serverPanic(\"Unknown sorted set encoding\");",
          "content_same": false
        },
        {
          "line": 3277,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"min or max is not a float\")",
          "old_line_content": "        return;",
          "new_line_content": "        addReplyError(c,\"min or max is not a float\");",
          "content_same": false
        },
        {
          "line": 3283,
          "old_api": null,
          "new_api": "checkType",
          "old_text": null,
          "new_text": "checkType(c, zobj, OBJ_ZSET)",
          "old_line_content": "",
          "new_line_content": "        checkType(c, zobj, OBJ_ZSET)) return;",
          "content_same": false
        },
        {
          "line": 1239,
          "old_api": null,
          "new_api": "lpSafeToAdd",
          "old_text": null,
          "new_text": "lpSafeToAdd(NULL, totelelen)",
          "old_line_content": "    {",
          "new_line_content": "        lpSafeToAdd(NULL, totelelen))",
          "content_same": false
        },
        {
          "line": 1241,
          "old_api": null,
          "new_api": "zsetConvert",
          "old_text": null,
          "new_text": "zsetConvert(zobj,OBJ_ENCODING_LISTPACK)",
          "old_line_content": "    }",
          "new_line_content": "        zsetConvert(zobj,OBJ_ENCODING_LISTPACK);",
          "content_same": false
        },
        {
          "line": 3291,
          "old_api": null,
          "new_api": "zzlFirstInRange",
          "old_text": null,
          "new_text": "zzlFirstInRange(zl,&range)",
          "old_line_content": "",
          "new_line_content": "        eptr = zzlFirstInRange(zl,&range);",
          "content_same": false
        },
        {
          "line": 3295,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c, shared.czero)",
          "old_line_content": "            return;",
          "new_line_content": "            addReply(c, shared.czero);",
          "content_same": false
        },
        {
          "line": 1253,
          "old_api": null,
          "new_api": "zzlFind",
          "old_text": null,
          "new_text": "zzlFind(zobj->ptr, member, score)",
          "old_line_content": "    } else if (zobj->encoding == OBJ_ENCODING_SKIPLIST) {",
          "new_line_content": "        if (zzlFind(zobj->ptr, member, score) == NULL) return C_ERR;",
          "content_same": false
        },
        {
          "line": 3302,
          "old_api": null,
          "new_api": "zslValueLteMax",
          "old_text": null,
          "new_text": "zslValueLteMax(score,&range)",
          "old_line_content": "",
          "new_line_content": "        serverAssertWithInfo(c,zobj,zslValueLteMax(score,&range));",
          "content_same": false
        },
        {
          "line": 1256,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(zs->dict, member)",
          "old_line_content": "        if (de == NULL) return C_ERR;",
          "new_line_content": "        dictEntry *de = dictFind(zs->dict, member);",
          "content_same": false
        },
        {
          "line": 1258,
          "old_api": null,
          "new_api": "dictGetVal",
          "old_text": null,
          "new_text": "dictGetVal(de)",
          "old_line_content": "    } else {",
          "new_line_content": "        *score = *(double*)dictGetVal(de);",
          "content_same": false
        },
        {
          "line": 3306,
          "old_api": null,
          "new_api": "zzlGetScore",
          "old_text": null,
          "new_text": "zzlGetScore(sptr)",
          "old_line_content": "",
          "new_line_content": "            score = zzlGetScore(sptr);",
          "content_same": false
        },
        {
          "line": 1260,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Unknown sorted set encoding\")",
          "old_line_content": "    }",
          "new_line_content": "        serverPanic(\"Unknown sorted set encoding\");",
          "content_same": false
        },
        {
          "line": 3309,
          "old_api": null,
          "new_api": "zslValueLteMax",
          "old_text": null,
          "new_text": "zslValueLteMax(score,&range)",
          "old_line_content": "                break;",
          "new_line_content": "            if (!zslValueLteMax(score,&range)) {",
          "content_same": false
        },
        {
          "line": 3313,
          "old_api": null,
          "new_api": "zzlNext",
          "old_text": null,
          "new_text": "zzlNext(zl,&eptr,&sptr)",
          "old_line_content": "            }",
          "new_line_content": "                zzlNext(zl,&eptr,&sptr);",
          "content_same": false
        },
        {
          "line": 3323,
          "old_api": null,
          "new_api": "zslFirstInRange",
          "old_text": null,
          "new_text": "zslFirstInRange(zsl, &range)",
          "old_line_content": "",
          "new_line_content": "        zn = zslFirstInRange(zsl, &range);",
          "content_same": false
        },
        {
          "line": 3327,
          "old_api": null,
          "new_api": "zslGetRank",
          "old_text": null,
          "new_text": "zslGetRank(zsl, zn->score, zn->ele)",
          "old_line_content": "            count = (zsl->length - (rank - 1));",
          "new_line_content": "            rank = zslGetRank(zsl, zn->score, zn->ele);",
          "content_same": false
        },
        {
          "line": 3331,
          "old_api": null,
          "new_api": "zslLastInRange",
          "old_text": null,
          "new_text": "zslLastInRange(zsl, &range)",
          "old_line_content": "",
          "new_line_content": "            zn = zslLastInRange(zsl, &range);",
          "content_same": false
        },
        {
          "line": 3335,
          "old_api": null,
          "new_api": "zslGetRank",
          "old_text": null,
          "new_text": "zslGetRank(zsl, zn->score, zn->ele)",
          "old_line_content": "                count -= (zsl->length - rank);",
          "new_line_content": "                rank = zslGetRank(zsl, zn->score, zn->ele);",
          "content_same": false
        },
        {
          "line": 3340,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Unknown sorted set encoding\")",
          "old_line_content": "    }",
          "new_line_content": "        serverPanic(\"Unknown sorted set encoding\");",
          "content_same": false
        },
        {
          "line": 3343,
          "old_api": null,
          "new_api": "addReplyLongLong",
          "old_text": null,
          "new_text": "addReplyLongLong(c, count)",
          "old_line_content": "}",
          "new_line_content": "    addReplyLongLong(c, count);",
          "content_same": false
        },
        {
          "line": 3354,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"min or max not valid string range item\")",
          "old_line_content": "        return;",
          "new_line_content": "        addReplyError(c,\"min or max not valid string range item\");",
          "content_same": false
        },
        {
          "line": 3360,
          "old_api": null,
          "new_api": "checkType",
          "old_text": null,
          "new_text": "checkType(c, zobj, OBJ_ZSET)",
          "old_line_content": "    {",
          "new_line_content": "        checkType(c, zobj, OBJ_ZSET))",
          "content_same": false
        },
        {
          "line": 3362,
          "old_api": null,
          "new_api": "zslFreeLexRange",
          "old_text": null,
          "new_text": "zslFreeLexRange(&range)",
          "old_line_content": "        return;",
          "new_line_content": "        zslFreeLexRange(&range);",
          "content_same": false
        },
        {
          "line": 1321,
          "old_api": null,
          "new_api": "isnan",
          "old_text": null,
          "new_text": "isnan(score)",
          "old_line_content": "        *out_flags = ZADD_OUT_NAN;",
          "new_line_content": "    if (isnan(score)) {",
          "content_same": false
        },
        {
          "line": 3371,
          "old_api": null,
          "new_api": "zzlFirstInLexRange",
          "old_text": null,
          "new_text": "zzlFirstInLexRange(zl,&range)",
          "old_line_content": "",
          "new_line_content": "        eptr = zzlFirstInLexRange(zl,&range);",
          "content_same": false
        },
        {
          "line": 3376,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c, shared.czero)",
          "old_line_content": "            return;",
          "new_line_content": "            addReply(c, shared.czero);",
          "content_same": false
        },
        {
          "line": 1330,
          "old_api": null,
          "new_api": "zzlFind",
          "old_text": null,
          "new_text": "zzlFind(zobj->ptr,ele,&curscore)",
          "old_line_content": "            /* NX? Return, same element already exists. */",
          "new_line_content": "        if ((eptr = zzlFind(zobj->ptr,ele,&curscore)) != NULL) {",
          "content_same": false
        },
        {
          "line": 3382,
          "old_api": null,
          "new_api": "zzlLexValueLteMax",
          "old_text": null,
          "new_text": "zzlLexValueLteMax(eptr,&range)",
          "old_line_content": "",
          "new_line_content": "        serverAssertWithInfo(c,zobj,zzlLexValueLteMax(eptr,&range));",
          "content_same": false
        },
        {
          "line": 3387,
          "old_api": null,
          "new_api": "zzlLexValueLteMax",
          "old_text": null,
          "new_text": "zzlLexValueLteMax(eptr,&range)",
          "old_line_content": "                break;",
          "new_line_content": "            if (!zzlLexValueLteMax(eptr,&range)) {",
          "content_same": false
        },
        {
          "line": 1340,
          "old_api": null,
          "new_api": "isnan",
          "old_text": null,
          "new_text": "isnan(score)",
          "old_line_content": "                    *out_flags |= ZADD_OUT_NAN;",
          "new_line_content": "                if (isnan(score)) {",
          "content_same": false
        },
        {
          "line": 3391,
          "old_api": null,
          "new_api": "zzlNext",
          "old_text": null,
          "new_text": "zzlNext(zl,&eptr,&sptr)",
          "old_line_content": "            }",
          "new_line_content": "                zzlNext(zl,&eptr,&sptr);",
          "content_same": false
        },
        {
          "line": 3401,
          "old_api": null,
          "new_api": "zslFirstInLexRange",
          "old_text": null,
          "new_text": "zslFirstInLexRange(zsl, &range)",
          "old_line_content": "",
          "new_line_content": "        zn = zslFirstInLexRange(zsl, &range);",
          "content_same": false
        },
        {
          "line": 1357,
          "old_api": null,
          "new_api": "zzlInsert",
          "old_text": null,
          "new_text": "zzlInsert(zobj->ptr,ele,score)",
          "old_line_content": "                *out_flags |= ZADD_OUT_UPDATED;",
          "new_line_content": "                zobj->ptr = zzlInsert(zobj->ptr,ele,score);",
          "content_same": false
        },
        {
          "line": 3405,
          "old_api": null,
          "new_api": "zslGetRank",
          "old_text": null,
          "new_text": "zslGetRank(zsl, zn->score, zn->ele)",
          "old_line_content": "            count = (zsl->length - (rank - 1));",
          "new_line_content": "            rank = zslGetRank(zsl, zn->score, zn->ele);",
          "content_same": false
        },
        {
          "line": 3409,
          "old_api": null,
          "new_api": "zslLastInLexRange",
          "old_text": null,
          "new_text": "zslLastInLexRange(zsl, &range)",
          "old_line_content": "",
          "new_line_content": "            zn = zslLastInLexRange(zsl, &range);",
          "content_same": false
        },
        {
          "line": 3413,
          "old_api": null,
          "new_api": "zslGetRank",
          "old_text": null,
          "new_text": "zslGetRank(zsl, zn->score, zn->ele)",
          "old_line_content": "                count -= (zsl->length - rank);",
          "new_line_content": "                rank = zslGetRank(zsl, zn->score, zn->ele);",
          "content_same": false
        },
        {
          "line": 1366,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(ele)",
          "old_line_content": "            {",
          "new_line_content": "                !lpSafeToAdd(zobj->ptr, sdslen(ele)))",
          "content_same": false
        },
        {
          "line": 1368,
          "old_api": null,
          "new_api": "zsetConvert",
          "old_text": null,
          "new_text": "zsetConvert(zobj,OBJ_ENCODING_SKIPLIST)",
          "old_line_content": "            } else {",
          "new_line_content": "                zsetConvert(zobj,OBJ_ENCODING_SKIPLIST);",
          "content_same": false
        },
        {
          "line": 1370,
          "old_api": null,
          "new_api": "zzlInsert",
          "old_text": null,
          "new_text": "zzlInsert(zobj->ptr,ele,score)",
          "old_line_content": "                if (newscore) *newscore = score;",
          "new_line_content": "                zobj->ptr = zzlInsert(zobj->ptr,ele,score);",
          "content_same": false
        },
        {
          "line": 3418,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Unknown sorted set encoding\")",
          "old_line_content": "    }",
          "new_line_content": "        serverPanic(\"Unknown sorted set encoding\");",
          "content_same": false
        },
        {
          "line": 3422,
          "old_api": null,
          "new_api": "addReplyLongLong",
          "old_text": null,
          "new_text": "addReplyLongLong(c, count)",
          "old_line_content": "}",
          "new_line_content": "    addReplyLongLong(c, count);",
          "content_same": false
        },
        {
          "line": 3432,
          "old_api": null,
          "new_api": "beginResultEmission",
          "old_text": null,
          "new_text": "handler->beginResultEmission(handler, -1)",
          "old_line_content": "",
          "new_line_content": "    handler->beginResultEmission(handler, -1);",
          "content_same": false
        },
        {
          "line": 1388,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(zs->dict,ele)",
          "old_line_content": "        if (de != NULL) {",
          "new_line_content": "        de = dictFind(zs->dict,ele);",
          "content_same": false
        },
        {
          "line": 3443,
          "old_api": null,
          "new_api": "zzlLastInLexRange",
          "old_text": null,
          "new_text": "zzlLastInLexRange(zl,range)",
          "old_line_content": "        } else {",
          "new_line_content": "            eptr = zzlLastInLexRange(zl,range);",
          "content_same": false
        },
        {
          "line": 1396,
          "old_api": null,
          "new_api": "dictGetVal",
          "old_text": null,
          "new_text": "dictGetVal(de)",
          "old_line_content": "",
          "new_line_content": "            curscore = *(double*)dictGetVal(de);",
          "content_same": false
        },
        {
          "line": 3445,
          "old_api": null,
          "new_api": "zzlFirstInLexRange",
          "old_text": null,
          "new_text": "zzlFirstInLexRange(zl,range)",
          "old_line_content": "        }",
          "new_line_content": "            eptr = zzlFirstInLexRange(zl,range);",
          "content_same": false
        },
        {
          "line": 1401,
          "old_api": null,
          "new_api": "isnan",
          "old_text": null,
          "new_text": "isnan(score)",
          "old_line_content": "                    *out_flags |= ZADD_OUT_NAN;",
          "new_line_content": "                if (isnan(score)) {",
          "content_same": false
        },
        {
          "line": 3450,
          "old_api": null,
          "new_api": "lpNext",
          "old_text": null,
          "new_text": "lpNext(zl,eptr)",
          "old_line_content": "",
          "new_line_content": "            sptr = lpNext(zl,eptr);",
          "content_same": false
        },
        {
          "line": 3456,
          "old_api": null,
          "new_api": "zzlPrev",
          "old_text": null,
          "new_text": "zzlPrev(zl,&eptr,&sptr)",
          "old_line_content": "            } else {",
          "new_line_content": "                zzlPrev(zl,&eptr,&sptr);",
          "content_same": false
        },
        {
          "line": 3458,
          "old_api": null,
          "new_api": "zzlNext",
          "old_text": null,
          "new_text": "zzlNext(zl,&eptr,&sptr)",
          "old_line_content": "            }",
          "new_line_content": "                zzlNext(zl,&eptr,&sptr);",
          "content_same": false
        },
        {
          "line": 1417,
          "old_api": null,
          "new_api": "zslUpdateScore",
          "old_text": null,
          "new_text": "zslUpdateScore(zs->zsl,curscore,ele,score)",
          "old_line_content": "                /* Note that we did not removed the original element from",
          "new_line_content": "                znode = zslUpdateScore(zs->zsl,curscore,ele,score);",
          "content_same": false
        },
        {
          "line": 3465,
          "old_api": null,
          "new_api": "zzlGetScore",
          "old_text": null,
          "new_text": "zzlGetScore(sptr)",
          "old_line_content": "",
          "new_line_content": "                score = zzlGetScore(sptr);",
          "content_same": false
        },
        {
          "line": 1421,
          "old_api": null,
          "new_api": "dictGetVal",
          "old_text": null,
          "new_text": "dictGetVal(de)",
          "old_line_content": "                *out_flags |= ZADD_OUT_UPDATED;",
          "new_line_content": "                dictGetVal(de) = &znode->score; /* Update score ptr. */",
          "content_same": false
        },
        {
          "line": 3469,
          "old_api": null,
          "new_api": "zzlLexValueGteMin",
          "old_text": null,
          "new_text": "zzlLexValueGteMin(eptr,range)",
          "old_line_content": "            } else {",
          "new_line_content": "                if (!zzlLexValueGteMin(eptr,range)) break;",
          "content_same": false
        },
        {
          "line": 3471,
          "old_api": null,
          "new_api": "zzlLexValueLteMax",
          "old_text": null,
          "new_text": "zzlLexValueLteMax(eptr,range)",
          "old_line_content": "            }",
          "new_line_content": "                if (!zzlLexValueLteMax(eptr,range)) break;",
          "content_same": false
        },
        {
          "line": 3474,
          "old_api": null,
          "new_api": "lpGetValue",
          "old_text": null,
          "new_text": "lpGetValue(eptr,&vlen,&vlong)",
          "old_line_content": "            rangelen++;",
          "new_line_content": "            vstr = lpGetValue(eptr,&vlen,&vlong);",
          "content_same": false
        },
        {
          "line": 1428,
          "old_api": null,
          "new_api": "dictAdd",
          "old_text": null,
          "new_text": "dictAdd(zs->dict,ele,&znode->score)",
          "old_line_content": "            *out_flags |= ZADD_OUT_ADDED;",
          "new_line_content": "            serverAssert(dictAdd(zs->dict,ele,&znode->score) == DICT_OK);",
          "content_same": false
        },
        {
          "line": 3477,
          "old_api": null,
          "new_api": "emitResultFromLongLong",
          "old_text": null,
          "new_text": "handler->emitResultFromLongLong(handler, vlong, score)",
          "old_line_content": "            } else {",
          "new_line_content": "                handler->emitResultFromLongLong(handler, vlong, score);",
          "content_same": false
        },
        {
          "line": 3479,
          "old_api": null,
          "new_api": "emitResultFromCBuffer",
          "old_text": null,
          "new_text": "handler->emitResultFromCBuffer(handler, vstr, vlen, score)",
          "old_line_content": "            }",
          "new_line_content": "                handler->emitResultFromCBuffer(handler, vstr, vlen, score);",
          "content_same": false
        },
        {
          "line": 3484,
          "old_api": null,
          "new_api": "zzlPrev",
          "old_text": null,
          "new_text": "zzlPrev(zl,&eptr,&sptr)",
          "old_line_content": "            } else {",
          "new_line_content": "                zzlPrev(zl,&eptr,&sptr);",
          "content_same": false
        },
        {
          "line": 1437,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Unknown sorted set encoding\")",
          "old_line_content": "    }",
          "new_line_content": "        serverPanic(\"Unknown sorted set encoding\");",
          "content_same": false
        },
        {
          "line": 3486,
          "old_api": null,
          "new_api": "zzlNext",
          "old_text": null,
          "new_text": "zzlNext(zl,&eptr,&sptr)",
          "old_line_content": "            }",
          "new_line_content": "                zzlNext(zl,&eptr,&sptr);",
          "content_same": false
        },
        {
          "line": 3496,
          "old_api": null,
          "new_api": "zslLastInLexRange",
          "old_text": null,
          "new_text": "zslLastInLexRange(zsl,range)",
          "old_line_content": "        } else {",
          "new_line_content": "            ln = zslLastInLexRange(zsl,range);",
          "content_same": false
        },
        {
          "line": 1450,
          "old_api": null,
          "new_api": "dictUnlink",
          "old_text": null,
          "new_text": "dictUnlink(zs->dict,ele)",
          "old_line_content": "    if (de != NULL) {",
          "new_line_content": "    de = dictUnlink(zs->dict,ele);",
          "content_same": false
        },
        {
          "line": 3498,
          "old_api": null,
          "new_api": "zslFirstInLexRange",
          "old_text": null,
          "new_text": "zslFirstInLexRange(zsl,range)",
          "old_line_content": "        }",
          "new_line_content": "            ln = zslFirstInLexRange(zsl,range);",
          "content_same": false
        },
        {
          "line": 1453,
          "old_api": null,
          "new_api": "dictGetVal",
          "old_text": null,
          "new_text": "dictGetVal(de)",
          "old_line_content": "",
          "new_line_content": "        score = *(double*)dictGetVal(de);",
          "content_same": false
        },
        {
          "line": 1460,
          "old_api": null,
          "new_api": "dictFreeUnlinkedEntry",
          "old_text": null,
          "new_text": "dictFreeUnlinkedEntry(zs->dict,de)",
          "old_line_content": "",
          "new_line_content": "        dictFreeUnlinkedEntry(zs->dict,de);",
          "content_same": false
        },
        {
          "line": 1464,
          "old_api": null,
          "new_api": "serverAssert",
          "old_text": null,
          "new_text": "serverAssert(retval)",
          "old_line_content": "",
          "new_line_content": "        serverAssert(retval);",
          "content_same": false
        },
        {
          "line": 3514,
          "old_api": null,
          "new_api": "zslLexValueGteMin",
          "old_text": null,
          "new_text": "zslLexValueGteMin(ln->ele,range)",
          "old_line_content": "            } else {",
          "new_line_content": "                if (!zslLexValueGteMin(ln->ele,range)) break;",
          "content_same": false
        },
        {
          "line": 3516,
          "old_api": null,
          "new_api": "zslLexValueLteMax",
          "old_text": null,
          "new_text": "zslLexValueLteMax(ln->ele,range)",
          "old_line_content": "            }",
          "new_line_content": "                if (!zslLexValueLteMax(ln->ele,range)) break;",
          "content_same": false
        },
        {
          "line": 3520,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(ln->ele)",
          "old_line_content": "",
          "new_line_content": "            handler->emitResultFromCBuffer(handler, ln->ele, sdslen(ln->ele), ln->score);",
          "content_same": false
        },
        {
          "line": 1479,
          "old_api": null,
          "new_api": "zzlDelete",
          "old_text": null,
          "new_text": "zzlDelete(zobj->ptr,eptr)",
          "old_line_content": "            return 1;",
          "new_line_content": "            zobj->ptr = zzlDelete(zobj->ptr,eptr);",
          "content_same": false
        },
        {
          "line": 3530,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Unknown sorted set encoding\")",
          "old_line_content": "    }",
          "new_line_content": "        serverPanic(\"Unknown sorted set encoding\");",
          "content_same": false
        },
        {
          "line": 1485,
          "old_api": null,
          "new_api": "dictResize",
          "old_text": null,
          "new_text": "dictResize(zs->dict)",
          "old_line_content": "            return 1;",
          "new_line_content": "            if (htNeedsResize(zs->dict)) dictResize(zs->dict);",
          "content_same": false
        },
        {
          "line": 3533,
          "old_api": null,
          "new_api": "finalizeResultEmission",
          "old_text": null,
          "new_text": "handler->finalizeResultEmission(handler, rangelen)",
          "old_line_content": "}",
          "new_line_content": "    handler->finalizeResultEmission(handler, rangelen);",
          "content_same": false
        },
        {
          "line": 1489,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Unknown sorted set encoding\")",
          "old_line_content": "    }",
          "new_line_content": "        serverPanic(\"Unknown sorted set encoding\");",
          "content_same": false
        },
        {
          "line": 3540,
          "old_api": null,
          "new_api": "zrangeGenericCommand",
          "old_text": null,
          "new_text": "zrangeGenericCommand(&handler, 1, 0, ZRANGE_LEX, ZRANGE_DIRECTION_FORWARD)",
          "old_line_content": "}",
          "new_line_content": "    zrangeGenericCommand(&handler, 1, 0, ZRANGE_LEX, ZRANGE_DIRECTION_FORWARD);",
          "content_same": false
        },
        {
          "line": 3547,
          "old_api": null,
          "new_api": "zrangeGenericCommand",
          "old_text": null,
          "new_text": "zrangeGenericCommand(&handler, 1, 0, ZRANGE_LEX, ZRANGE_DIRECTION_REVERSE)",
          "old_line_content": "}",
          "new_line_content": "    zrangeGenericCommand(&handler, 1, 0, ZRANGE_LEX, ZRANGE_DIRECTION_REVERSE);",
          "content_same": false
        },
        {
          "line": 1509,
          "old_api": null,
          "new_api": "zsetLength",
          "old_text": null,
          "new_text": "zsetLength(zobj)",
          "old_line_content": "",
          "new_line_content": "    llen = zsetLength(zobj);",
          "content_same": false
        },
        {
          "line": 1518,
          "old_api": null,
          "new_api": "serverAssert",
          "old_text": null,
          "new_text": "serverAssert(sptr != NULL)",
          "old_line_content": "",
          "new_line_content": "        serverAssert(sptr != NULL);",
          "content_same": false
        },
        {
          "line": 1522,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(ele)",
          "old_line_content": "                break;",
          "new_line_content": "            if (lpCompare(eptr,(unsigned char*)ele,sdslen(ele)))",
          "content_same": false
        },
        {
          "line": 1525,
          "old_api": null,
          "new_api": "zzlNext",
          "old_text": null,
          "new_text": "zzlNext(zl,&eptr,&sptr)",
          "old_line_content": "        }",
          "new_line_content": "            zzlNext(zl,&eptr,&sptr);",
          "content_same": false
        },
        {
          "line": 3581,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[j]->ptr,\"withscores\")",
          "old_line_content": "            opt_withscores = 1;",
          "new_line_content": "        if (!store && !strcasecmp(c->argv[j]->ptr,\"withscores\")) {",
          "content_same": false
        },
        {
          "line": 3585,
          "old_api": null,
          "new_api": "getLongFromObjectOrReply",
          "old_text": null,
          "new_text": "getLongFromObjectOrReply(c, c->argv[j+2], &opt_limit, NULL)",
          "old_line_content": "            {",
          "new_line_content": "                (getLongFromObjectOrReply(c, c->argv[j+2], &opt_limit, NULL) != C_OK))",
          "content_same": false
        },
        {
          "line": 1542,
          "old_api": null,
          "new_api": "dictFind",
          "old_text": null,
          "new_text": "dictFind(zs->dict,ele)",
          "old_line_content": "        if (de != NULL) {",
          "new_line_content": "        de = dictFind(zs->dict,ele);",
          "content_same": false
        },
        {
          "line": 3591,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[j]->ptr,\"rev\")",
          "old_line_content": "        {",
          "new_line_content": "                   !strcasecmp(c->argv[j]->ptr,\"rev\"))",
          "content_same": false
        },
        {
          "line": 1545,
          "old_api": null,
          "new_api": "zslGetRank",
          "old_text": null,
          "new_text": "zslGetRank(zsl,score,ele)",
          "old_line_content": "            /* Existing elements always have a rank. */",
          "new_line_content": "            rank = zslGetRank(zsl,score,ele);",
          "content_same": false
        },
        {
          "line": 1547,
          "old_api": null,
          "new_api": "serverAssert",
          "old_text": null,
          "new_text": "serverAssert(rank != 0)",
          "old_line_content": "            if (reverse)",
          "new_line_content": "            serverAssert(rank != 0);",
          "content_same": false
        },
        {
          "line": 3595,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[j]->ptr,\"bylex\")",
          "old_line_content": "        {",
          "new_line_content": "                   !strcasecmp(c->argv[j]->ptr,\"bylex\"))",
          "content_same": false
        },
        {
          "line": 3599,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[j]->ptr,\"byscore\")",
          "old_line_content": "        {",
          "new_line_content": "                   !strcasecmp(c->argv[j]->ptr,\"byscore\"))",
          "content_same": false
        },
        {
          "line": 3603,
          "old_api": null,
          "new_api": "addReplyErrorObject",
          "old_text": null,
          "new_text": "addReplyErrorObject(c,shared.syntaxerr)",
          "old_line_content": "            return;",
          "new_line_content": "            addReplyErrorObject(c,shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 1556,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Unknown sorted set encoding\")",
          "old_line_content": "    }",
          "new_line_content": "        serverPanic(\"Unknown sorted set encoding\");",
          "content_same": false
        },
        {
          "line": 3616,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"syntax error, LIMIT is only supported in combination with either BYSCORE or BYLEX\")",
          "old_line_content": "        return;",
          "new_line_content": "        addReplyError(c,\"syntax error, LIMIT is only supported in combination with either BYSCORE or BYLEX\");",
          "content_same": false
        },
        {
          "line": 1570,
          "old_api": null,
          "new_api": "serverAssert",
          "old_text": null,
          "new_text": "serverAssert(o->type == OBJ_ZSET)",
          "old_line_content": "",
          "new_line_content": "    serverAssert(o->type == OBJ_ZSET);",
          "content_same": false
        },
        {
          "line": 3620,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"syntax error, WITHSCORES not supported in combination with BYLEX\")",
          "old_line_content": "        return;",
          "new_line_content": "        addReplyError(c,\"syntax error, WITHSCORES not supported in combination with BYLEX\");",
          "content_same": false
        },
        {
          "line": 1578,
          "old_api": null,
          "new_api": "createObject",
          "old_text": null,
          "new_text": "createObject(OBJ_ZSET, new_zl)",
          "old_line_content": "        zobj->encoding = OBJ_ENCODING_LISTPACK;",
          "new_line_content": "        zobj = createObject(OBJ_ZSET, new_zl);",
          "content_same": false
        },
        {
          "line": 1581,
          "old_api": null,
          "new_api": "createZsetObject",
          "old_text": null,
          "new_text": "createZsetObject()",
          "old_line_content": "        zs = o->ptr;",
          "new_line_content": "        zobj = createZsetObject();",
          "content_same": false
        },
        {
          "line": 1584,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(zs->dict)",
          "old_line_content": "        zskiplist *zsl = zs->zsl;",
          "new_line_content": "        dictExpand(new_zs->dict,dictSize(zs->dict));",
          "content_same": false
        },
        {
          "line": 1588,
          "old_api": null,
          "new_api": "zsetLength",
          "old_text": null,
          "new_text": "zsetLength(o)",
          "old_line_content": "",
          "new_line_content": "        long llen = zsetLength(o);",
          "content_same": false
        },
        {
          "line": 3639,
          "old_api": null,
          "new_api": "getLongFromObjectOrReply",
          "old_text": null,
          "new_text": "getLongFromObjectOrReply(c, c->argv[maxidx], &opt_end,NULL)",
          "old_line_content": "        {",
          "new_line_content": "            (getLongFromObjectOrReply(c, c->argv[maxidx], &opt_end,NULL) != C_OK))",
          "content_same": false
        },
        {
          "line": 3648,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c, \"min or max is not a float\")",
          "old_line_content": "            return;",
          "new_line_content": "            addReplyError(c, \"min or max is not a float\");",
          "content_same": false
        },
        {
          "line": 1601,
          "old_api": null,
          "new_api": "dictAdd",
          "old_text": null,
          "new_text": "dictAdd(new_zs->dict,new_ele,&znode->score)",
          "old_line_content": "            ln = ln->backward;",
          "new_line_content": "            dictAdd(new_zs->dict,new_ele,&znode->score);",
          "content_same": false
        },
        {
          "line": 1605,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Unknown sorted set encoding\")",
          "old_line_content": "    }",
          "new_line_content": "        serverPanic(\"Unknown sorted set encoding\");",
          "content_same": false
        },
        {
          "line": 3656,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c, \"min or max not valid string range item\")",
          "old_line_content": "            return;",
          "new_line_content": "            addReplyError(c, \"min or max not valid string range item\");",
          "content_same": false
        },
        {
          "line": 1612,
          "old_api": null,
          "new_api": "sdsfromlonglong",
          "old_text": null,
          "new_text": "sdsfromlonglong(e->lval)",
          "old_line_content": "}",
          "new_line_content": "    return e->sval ? sdsnewlen(e->sval, e->slen) : sdsfromlonglong(e->lval);",
          "content_same": false
        },
        {
          "line": 3663,
          "old_api": null,
          "new_api": "zrangeResultHandlerScoreEmissionEnable",
          "old_text": null,
          "new_text": "zrangeResultHandlerScoreEmissionEnable(handler)",
          "old_line_content": "    }",
          "new_line_content": "        zrangeResultHandlerScoreEmissionEnable(handler);",
          "content_same": false
        },
        {
          "line": 1618,
          "old_api": null,
          "new_api": "addReplyBulkCBuffer",
          "old_text": null,
          "new_text": "addReplyBulkCBuffer(c, e->sval, e->slen)",
          "old_line_content": "    else",
          "new_line_content": "        addReplyBulkCBuffer(c, e->sval, e->slen);",
          "content_same": false
        },
        {
          "line": 3667,
          "old_api": null,
          "new_api": "lookupKeyRead",
          "old_text": null,
          "new_text": "lookupKeyRead(c->db, key)",
          "old_line_content": "    if (zobj == NULL) {",
          "new_line_content": "    zobj = lookupKeyRead(c->db, key);",
          "content_same": false
        },
        {
          "line": 1620,
          "old_api": null,
          "new_api": "addReplyBulkLongLong",
          "old_text": null,
          "new_text": "addReplyBulkLongLong(c, e->lval)",
          "old_line_content": "}",
          "new_line_content": "        addReplyBulkLongLong(c, e->lval);",
          "content_same": false
        },
        {
          "line": 3671,
          "old_api": null,
          "new_api": "finalizeResultEmission",
          "old_text": null,
          "new_text": "handler->finalizeResultEmission(handler, 0)",
          "old_line_content": "        } else {",
          "new_line_content": "            handler->finalizeResultEmission(handler, 0);",
          "content_same": false
        },
        {
          "line": 3673,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c, shared.emptyarray)",
          "old_line_content": "        }",
          "new_line_content": "            addReply(c, shared.emptyarray);",
          "content_same": false
        },
        {
          "line": 3678,
          "old_api": null,
          "new_api": "checkType",
          "old_text": null,
          "new_text": "checkType(c,zobj,OBJ_ZSET)",
          "old_line_content": "",
          "new_line_content": "    if (checkType(c,zobj,OBJ_ZSET)) goto cleanup;",
          "content_same": false
        },
        {
          "line": 1632,
          "old_api": null,
          "new_api": "dictGetKey",
          "old_text": null,
          "new_text": "dictGetKey(de)",
          "old_line_content": "        key->sval = (unsigned char*)s;",
          "new_line_content": "        sds s = dictGetKey(de);",
          "content_same": false
        },
        {
          "line": 1634,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(s)",
          "old_line_content": "        if (score)",
          "new_line_content": "        key->slen = sdslen(s);",
          "content_same": false
        },
        {
          "line": 1636,
          "old_api": null,
          "new_api": "dictGetVal",
          "old_text": null,
          "new_text": "dictGetVal(de)",
          "old_line_content": "    } else if (zsetobj->encoding == OBJ_ENCODING_LISTPACK) {",
          "new_line_content": "            *score = *(double*)dictGetVal(de);",
          "content_same": false
        },
        {
          "line": 3684,
          "old_api": null,
          "new_api": "genericZrangebyrankCommand",
          "old_text": null,
          "new_text": "genericZrangebyrankCommand(handler, zobj, opt_start, opt_end,\n            opt_withscores || store, direction == ZRANGE_DIRECTION_REVERSE)",
          "old_line_content": "            opt_withscores || store, direction == ZRANGE_DIRECTION_REVERSE);",
          "new_line_content": "        genericZrangebyrankCommand(handler, zobj, opt_start, opt_end,",
          "content_same": false
        },
        {
          "line": 1639,
          "old_api": null,
          "new_api": "lpRandomPair",
          "old_text": null,
          "new_text": "lpRandomPair(zsetobj->ptr, zsetsize, key, &val)",
          "old_line_content": "        if (score) {",
          "new_line_content": "        lpRandomPair(zsetobj->ptr, zsetsize, key, &val);",
          "content_same": false
        },
        {
          "line": 3689,
          "old_api": null,
          "new_api": "genericZrangebyscoreCommand",
          "old_text": null,
          "new_text": "genericZrangebyscoreCommand(handler, &range, zobj, opt_offset,\n            opt_limit, direction == ZRANGE_DIRECTION_REVERSE)",
          "old_line_content": "            opt_limit, direction == ZRANGE_DIRECTION_REVERSE);",
          "new_line_content": "        genericZrangebyscoreCommand(handler, &range, zobj, opt_offset,",
          "content_same": false
        },
        {
          "line": 1642,
          "old_api": null,
          "new_api": "zzlStrtod",
          "old_text": null,
          "new_text": "zzlStrtod(val.sval,val.slen)",
          "old_line_content": "            } else {",
          "new_line_content": "                *score = zzlStrtod(val.sval,val.slen);",
          "content_same": false
        },
        {
          "line": 3694,
          "old_api": null,
          "new_api": "genericZrangebylexCommand",
          "old_text": null,
          "new_text": "genericZrangebylexCommand(handler, &lexrange, zobj, opt_withscores || store,\n            opt_offset, opt_limit, direction == ZRANGE_DIRECTION_REVERSE)",
          "old_line_content": "            opt_offset, opt_limit, direction == ZRANGE_DIRECTION_REVERSE);",
          "new_line_content": "        genericZrangebylexCommand(handler, &lexrange, zobj, opt_withscores || store,",
          "content_same": false
        },
        {
          "line": 1648,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Unknown zset encoding\")",
          "old_line_content": "    }",
          "new_line_content": "        serverPanic(\"Unknown zset encoding\");",
          "content_same": false
        },
        {
          "line": 3704,
          "old_api": null,
          "new_api": "zslFreeLexRange",
          "old_text": null,
          "new_text": "zslFreeLexRange(&lexrange)",
          "old_line_content": "    }",
          "new_line_content": "        zslFreeLexRange(&lexrange);",
          "content_same": false
        },
        {
          "line": 3713,
          "old_api": null,
          "new_api": "checkType",
          "old_text": null,
          "new_text": "checkType(c,zobj,OBJ_ZSET)",
          "old_line_content": "",
          "new_line_content": "        checkType(c,zobj,OBJ_ZSET)) return;",
          "content_same": false
        },
        {
          "line": 3715,
          "old_api": null,
          "new_api": "zsetLength",
          "old_text": null,
          "new_text": "zsetLength(zobj)",
          "old_line_content": "}",
          "new_line_content": "    addReplyLongLong(c,zsetLength(zobj));",
          "content_same": false
        },
        {
          "line": 3724,
          "old_api": null,
          "new_api": "checkType",
          "old_text": null,
          "new_text": "checkType(c,zobj,OBJ_ZSET)",
          "old_line_content": "",
          "new_line_content": "        checkType(c,zobj,OBJ_ZSET)) return;",
          "content_same": false
        },
        {
          "line": 3727,
          "old_api": null,
          "new_api": "addReplyNull",
          "old_text": null,
          "new_text": "addReplyNull(c)",
          "old_line_content": "    } else {",
          "new_line_content": "        addReplyNull(c);",
          "content_same": false
        },
        {
          "line": 3729,
          "old_api": null,
          "new_api": "addReplyDouble",
          "old_text": null,
          "new_text": "addReplyDouble(c,score)",
          "old_line_content": "    }",
          "new_line_content": "        addReplyDouble(c,score);",
          "content_same": false
        },
        {
          "line": 1683,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(opt,\"lt\")",
          "old_line_content": "        else break;",
          "new_line_content": "        else if (!strcasecmp(opt,\"lt\")) flags |= ZADD_IN_LT;",
          "content_same": false
        },
        {
          "line": 3738,
          "old_api": null,
          "new_api": "checkType",
          "old_text": null,
          "new_text": "checkType(c,zobj,OBJ_ZSET)",
          "old_line_content": "",
          "new_line_content": "    if (checkType(c,zobj,OBJ_ZSET)) return;",
          "content_same": false
        },
        {
          "line": 3740,
          "old_api": null,
          "new_api": "addReplyArrayLen",
          "old_text": null,
          "new_text": "addReplyArrayLen(c,c->argc - 2)",
          "old_line_content": "    for (int j = 2; j < c->argc; j++) {",
          "new_line_content": "    addReplyArrayLen(c,c->argc - 2);",
          "content_same": false
        },
        {
          "line": 3744,
          "old_api": null,
          "new_api": "addReplyNull",
          "old_text": null,
          "new_text": "addReplyNull(c)",
          "old_line_content": "        } else {",
          "new_line_content": "            addReplyNull(c);",
          "content_same": false
        },
        {
          "line": 3746,
          "old_api": null,
          "new_api": "addReplyDouble",
          "old_text": null,
          "new_text": "addReplyDouble(c,score)",
          "old_line_content": "        }",
          "new_line_content": "            addReplyDouble(c,score);",
          "content_same": false
        },
        {
          "line": 1699,
          "old_api": null,
          "new_api": "addReplyErrorObject",
          "old_text": null,
          "new_text": "addReplyErrorObject(c,shared.syntaxerr)",
          "old_line_content": "        return;",
          "new_line_content": "        addReplyErrorObject(c,shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 1706,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\n            \"XX and NX options at the same time are not compatible\")",
          "old_line_content": "            \"XX and NX options at the same time are not compatible\");",
          "new_line_content": "        addReplyError(c,",
          "content_same": false
        },
        {
          "line": 3758,
          "old_api": null,
          "new_api": "checkType",
          "old_text": null,
          "new_text": "checkType(c,zobj,OBJ_ZSET)",
          "old_line_content": "",
          "new_line_content": "        checkType(c,zobj,OBJ_ZSET)) return;",
          "content_same": false
        },
        {
          "line": 1712,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\n            \"GT, LT, and/or NX options at the same time are not compatible\")",
          "old_line_content": "            \"GT, LT, and/or NX options at the same time are not compatible\");",
          "new_line_content": "        addReplyError(c,",
          "content_same": false
        },
        {
          "line": 3761,
          "old_api": null,
          "new_api": "zsetRank",
          "old_text": null,
          "new_text": "zsetRank(zobj,ele->ptr,reverse)",
          "old_line_content": "    if (rank >= 0) {",
          "new_line_content": "    rank = zsetRank(zobj,ele->ptr,reverse);",
          "content_same": false
        },
        {
          "line": 3763,
          "old_api": null,
          "new_api": "addReplyLongLong",
          "old_text": null,
          "new_text": "addReplyLongLong(c,rank)",
          "old_line_content": "    } else {",
          "new_line_content": "        addReplyLongLong(c,rank);",
          "content_same": false
        },
        {
          "line": 3765,
          "old_api": null,
          "new_api": "addReplyNull",
          "old_text": null,
          "new_text": "addReplyNull(c)",
          "old_line_content": "    }",
          "new_line_content": "        addReplyNull(c);",
          "content_same": false
        },
        {
          "line": 1719,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\n            \"INCR option supports a single increment-element pair\")",
          "old_line_content": "            \"INCR option supports a single increment-element pair\");",
          "new_line_content": "        addReplyError(c,",
          "content_same": false
        },
        {
          "line": 3770,
          "old_api": null,
          "new_api": "zrankGenericCommand",
          "old_text": null,
          "new_text": "zrankGenericCommand(c, 0)",
          "old_line_content": "}",
          "new_line_content": "    zrankGenericCommand(c, 0);",
          "content_same": false
        },
        {
          "line": 3774,
          "old_api": null,
          "new_api": "zrankGenericCommand",
          "old_text": null,
          "new_text": "zrankGenericCommand(c, 1)",
          "old_line_content": "}",
          "new_line_content": "    zrankGenericCommand(c, 1);",
          "content_same": false
        },
        {
          "line": 1727,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(double)*elements)",
          "old_line_content": "    for (j = 0; j < elements; j++) {",
          "new_line_content": "    scores = zmalloc(sizeof(double)*elements);",
          "content_same": false
        },
        {
          "line": 1729,
          "old_api": null,
          "new_api": "getDoubleFromObjectOrReply",
          "old_text": null,
          "new_text": "getDoubleFromObjectOrReply(c,c->argv[scoreidx+j*2],&scores[j],NULL)",
          "old_line_content": "            != C_OK) goto cleanup;",
          "new_line_content": "        if (getDoubleFromObjectOrReply(c,c->argv[scoreidx+j*2],&scores[j],NULL)",
          "content_same": false
        },
        {
          "line": 1735,
          "old_api": null,
          "new_api": "checkType",
          "old_text": null,
          "new_text": "checkType(c,zobj,OBJ_ZSET)",
          "old_line_content": "    if (zobj == NULL) {",
          "new_line_content": "    if (checkType(c,zobj,OBJ_ZSET)) goto cleanup;",
          "content_same": false
        },
        {
          "line": 3784,
          "old_api": null,
          "new_api": "scanGenericCommand",
          "old_text": null,
          "new_text": "scanGenericCommand(c,o,cursor)",
          "old_line_content": "}",
          "new_line_content": "    scanGenericCommand(c,o,cursor);",
          "content_same": false
        },
        {
          "line": 1739,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(c->argv[scoreidx+1]->ptr)",
          "old_line_content": "        {",
          "new_line_content": "            server.zset_max_listpack_value < sdslen(c->argv[scoreidx+1]->ptr))",
          "content_same": false
        },
        {
          "line": 1741,
          "old_api": null,
          "new_api": "createZsetObject",
          "old_text": null,
          "new_text": "createZsetObject()",
          "old_line_content": "        } else {",
          "new_line_content": "            zobj = createZsetObject();",
          "content_same": false
        },
        {
          "line": 1743,
          "old_api": null,
          "new_api": "createZsetListpackObject",
          "old_text": null,
          "new_text": "createZsetListpackObject()",
          "old_line_content": "        }",
          "new_line_content": "            zobj = createZsetListpackObject();",
          "content_same": false
        },
        {
          "line": 1745,
          "old_api": null,
          "new_api": "dbAdd",
          "old_text": null,
          "new_text": "dbAdd(c->db,key,zobj)",
          "old_line_content": "    }",
          "new_line_content": "        dbAdd(c->db,key,zobj);",
          "content_same": false
        },
        {
          "line": 1754,
          "old_api": null,
          "new_api": "zsetAdd",
          "old_text": null,
          "new_text": "zsetAdd(zobj, score, ele, flags, &retflags, &newscore)",
          "old_line_content": "        if (retval == 0) {",
          "new_line_content": "        int retval = zsetAdd(zobj, score, ele, flags, &retflags, &newscore);",
          "content_same": false
        },
        {
          "line": 1756,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,nanerr)",
          "old_line_content": "            goto cleanup;",
          "new_line_content": "            addReplyError(c,nanerr);",
          "content_same": false
        },
        {
          "line": 1769,
          "old_api": null,
          "new_api": "addReplyDouble",
          "old_text": null,
          "new_text": "addReplyDouble(c,score)",
          "old_line_content": "        else",
          "new_line_content": "            addReplyDouble(c,score);",
          "content_same": false
        },
        {
          "line": 1771,
          "old_api": null,
          "new_api": "addReplyNull",
          "old_text": null,
          "new_text": "addReplyNull(c)",
          "old_line_content": "    } else { /* ZADD. */",
          "new_line_content": "            addReplyNull(c);",
          "content_same": false
        },
        {
          "line": 1773,
          "old_api": null,
          "new_api": "addReplyLongLong",
          "old_text": null,
          "new_text": "addReplyLongLong(c,ch ? added+updated : added)",
          "old_line_content": "    }",
          "new_line_content": "        addReplyLongLong(c,ch ? added+updated : added);",
          "content_same": false
        },
        {
          "line": 3822,
          "old_api": null,
          "new_api": "lookupKeyWrite",
          "old_text": null,
          "new_text": "lookupKeyWrite(c->db,key)",
          "old_line_content": "        if (!zobj) continue;",
          "new_line_content": "        zobj = lookupKeyWrite(c->db,key);",
          "content_same": false
        },
        {
          "line": 3824,
          "old_api": null,
          "new_api": "checkType",
          "old_text": null,
          "new_text": "checkType(c,zobj,OBJ_ZSET)",
          "old_line_content": "        break;",
          "new_line_content": "        if (checkType(c,zobj,OBJ_ZSET)) return;",
          "content_same": false
        },
        {
          "line": 1777,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(scores)",
          "old_line_content": "    if (added || updated) {",
          "new_line_content": "    zfree(scores);",
          "content_same": false
        },
        {
          "line": 1780,
          "old_api": null,
          "new_api": "notifyKeyspaceEvent",
          "old_text": null,
          "new_text": "notifyKeyspaceEvent(NOTIFY_ZSET,\n            incr ? \"zincr\" : \"zadd\", key, c->db->id)",
          "old_line_content": "            incr ? \"zincr\" : \"zadd\", key, c->db->id);",
          "new_line_content": "        notifyKeyspaceEvent(NOTIFY_ZSET,",
          "content_same": false
        },
        {
          "line": 3831,
          "old_api": null,
          "new_api": "addReplyNullArray",
          "old_text": null,
          "new_text": "addReplyNullArray(c)",
          "old_line_content": "        } else {",
          "new_line_content": "            addReplyNullArray(c);",
          "content_same": false
        },
        {
          "line": 3833,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.emptyarray)",
          "old_line_content": "        }",
          "new_line_content": "            addReply(c,shared.emptyarray);",
          "content_same": false
        },
        {
          "line": 1786,
          "old_api": null,
          "new_api": "zaddGenericCommand",
          "old_text": null,
          "new_text": "zaddGenericCommand(c,ZADD_IN_NONE)",
          "old_line_content": "}",
          "new_line_content": "    zaddGenericCommand(c,ZADD_IN_NONE);",
          "content_same": false
        },
        {
          "line": 1790,
          "old_api": null,
          "new_api": "zaddGenericCommand",
          "old_text": null,
          "new_text": "zaddGenericCommand(c,ZADD_IN_INCR)",
          "old_line_content": "}",
          "new_line_content": "    zaddGenericCommand(c,ZADD_IN_INCR);",
          "content_same": false
        },
        {
          "line": 3840,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c, shared.emptyarray)",
          "old_line_content": "        return;",
          "new_line_content": "        addReply(c, shared.emptyarray);",
          "content_same": false
        },
        {
          "line": 1799,
          "old_api": null,
          "new_api": "checkType",
          "old_text": null,
          "new_text": "checkType(c,zobj,OBJ_ZSET)",
          "old_line_content": "",
          "new_line_content": "        checkType(c,zobj,OBJ_ZSET)) return;",
          "content_same": false
        },
        {
          "line": 3849,
          "old_api": null,
          "new_api": "zsetLength",
          "old_text": null,
          "new_text": "zsetLength(zobj)",
          "old_line_content": "    long rangelen = (count > llen) ? llen : count;",
          "new_line_content": "    long llen = zsetLength(zobj);",
          "content_same": false
        },
        {
          "line": 1804,
          "old_api": null,
          "new_api": "dbDelete",
          "old_text": null,
          "new_text": "dbDelete(c->db,key)",
          "old_line_content": "            keyremoved = 1;",
          "new_line_content": "            dbDelete(c->db,key);",
          "content_same": false
        },
        {
          "line": 3854,
          "old_api": null,
          "new_api": "addReplyArrayLen",
          "old_text": null,
          "new_text": "addReplyArrayLen(c, rangelen * 2)",
          "old_line_content": "    } else if (use_nested_array && !emitkey) {",
          "new_line_content": "        addReplyArrayLen(c, rangelen * 2);",
          "content_same": false
        },
        {
          "line": 3857,
          "old_api": null,
          "new_api": "addReplyArrayLen",
          "old_text": null,
          "new_text": "addReplyArrayLen(c, rangelen)",
          "old_line_content": "    } else if (!use_nested_array && emitkey) {",
          "new_line_content": "        addReplyArrayLen(c, rangelen);",
          "content_same": false
        },
        {
          "line": 1811,
          "old_api": null,
          "new_api": "notifyKeyspaceEvent",
          "old_text": null,
          "new_text": "notifyKeyspaceEvent(NOTIFY_ZSET,\"zrem\",key,c->db->id)",
          "old_line_content": "        if (keyremoved)",
          "new_line_content": "        notifyKeyspaceEvent(NOTIFY_ZSET,\"zrem\",key,c->db->id);",
          "content_same": false
        },
        {
          "line": 3861,
          "old_api": null,
          "new_api": "addReplyBulk",
          "old_text": null,
          "new_text": "addReplyBulk(c, key)",
          "old_line_content": "    } else if (use_nested_array && emitkey) {",
          "new_line_content": "        addReplyBulk(c, key);",
          "content_same": false
        },
        {
          "line": 1814,
          "old_api": null,
          "new_api": "signalModifiedKey",
          "old_text": null,
          "new_text": "signalModifiedKey(c,c->db,key)",
          "old_line_content": "        server.dirty += deleted;",
          "new_line_content": "        signalModifiedKey(c,c->db,key);",
          "content_same": false
        },
        {
          "line": 1817,
          "old_api": null,
          "new_api": "addReplyLongLong",
          "old_text": null,
          "new_text": "addReplyLongLong(c,deleted)",
          "old_line_content": "}",
          "new_line_content": "    addReplyLongLong(c,deleted);",
          "content_same": false
        },
        {
          "line": 3866,
          "old_api": null,
          "new_api": "addReplyArrayLen",
          "old_text": null,
          "new_text": "addReplyArrayLen(c, rangelen)",
          "old_line_content": "    }",
          "new_line_content": "        addReplyArrayLen(c, rangelen);",
          "content_same": false
        },
        {
          "line": 3881,
          "old_api": null,
          "new_api": "lpGetValue",
          "old_text": null,
          "new_text": "lpGetValue(eptr,&vlen,&vlong)",
          "old_line_content": "            if (vstr == NULL)",
          "new_line_content": "            vstr = lpGetValue(eptr,&vlen,&vlong);",
          "content_same": false
        },
        {
          "line": 3883,
          "old_api": null,
          "new_api": "sdsfromlonglong",
          "old_text": null,
          "new_text": "sdsfromlonglong(vlong)",
          "old_line_content": "            else",
          "new_line_content": "                ele = sdsfromlonglong(vlong);",
          "content_same": false
        },
        {
          "line": 3885,
          "old_api": null,
          "new_api": "sdsnewlen",
          "old_text": null,
          "new_text": "sdsnewlen(vstr,vlen)",
          "old_line_content": "",
          "new_line_content": "                ele = sdsnewlen(vstr,vlen);",
          "content_same": false
        },
        {
          "line": 1842,
          "old_api": null,
          "new_api": "getLongFromObjectOrReply",
          "old_text": null,
          "new_text": "getLongFromObjectOrReply(c,c->argv[3],&end,NULL)",
          "old_line_content": "            return;",
          "new_line_content": "            (getLongFromObjectOrReply(c,c->argv[3],&end,NULL) != C_OK))",
          "content_same": false
        },
        {
          "line": 3890,
          "old_api": null,
          "new_api": "zzlGetScore",
          "old_text": null,
          "new_text": "zzlGetScore(sptr)",
          "old_line_content": "        } else if (zobj->encoding == OBJ_ENCODING_SKIPLIST) {",
          "new_line_content": "            score = zzlGetScore(sptr);",
          "content_same": false
        },
        {
          "line": 1847,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"min or max is not a float\")",
          "old_line_content": "            return;",
          "new_line_content": "            addReplyError(c,\"min or max is not a float\");",
          "content_same": false
        },
        {
          "line": 1853,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"min or max not valid string range item\")",
          "old_line_content": "            return;",
          "new_line_content": "            addReplyError(c,\"min or max not valid string range item\");",
          "content_same": false
        },
        {
          "line": 3902,
          "old_api": null,
          "new_api": "sdsdup",
          "old_text": null,
          "new_text": "sdsdup(zln->ele)",
          "old_line_content": "            score = zln->score;",
          "new_line_content": "            ele = sdsdup(zln->ele);",
          "content_same": false
        },
        {
          "line": 1857,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"unknown rangetype %d\", (int)rangetype)",
          "old_line_content": "    }",
          "new_line_content": "        serverPanic(\"unknown rangetype %d\", (int)rangetype);",
          "content_same": false
        },
        {
          "line": 3905,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Unknown sorted set encoding\")",
          "old_line_content": "        }",
          "new_line_content": "            serverPanic(\"Unknown sorted set encoding\");",
          "content_same": false
        },
        {
          "line": 3908,
          "old_api": null,
          "new_api": "zsetDel",
          "old_text": null,
          "new_text": "zsetDel(zobj,ele)",
          "old_line_content": "        server.dirty++;",
          "new_line_content": "        serverAssertWithInfo(c,zobj,zsetDel(zobj,ele));",
          "content_same": false
        },
        {
          "line": 1862,
          "old_api": null,
          "new_api": "checkType",
          "old_text": null,
          "new_text": "checkType(c,zobj,OBJ_ZSET)",
          "old_line_content": "",
          "new_line_content": "        checkType(c,zobj,OBJ_ZSET)) goto cleanup;",
          "content_same": false
        },
        {
          "line": 1866,
          "old_api": null,
          "new_api": "zsetLength",
          "old_text": null,
          "new_text": "zsetLength(zobj)",
          "old_line_content": "        if (start < 0) start = llen+start;",
          "new_line_content": "        llen = zsetLength(zobj);",
          "content_same": false
        },
        {
          "line": 3914,
          "old_api": null,
          "new_api": "signalModifiedKey",
          "old_text": null,
          "new_text": "signalModifiedKey(c,c->db,key)",
          "old_line_content": "        }",
          "new_line_content": "            signalModifiedKey(c,c->db,key);",
          "content_same": false
        },
        {
          "line": 3918,
          "old_api": null,
          "new_api": "addReplyArrayLen",
          "old_text": null,
          "new_text": "addReplyArrayLen(c,2)",
          "old_line_content": "        }",
          "new_line_content": "            addReplyArrayLen(c,2);",
          "content_same": false
        },
        {
          "line": 1874,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.czero)",
          "old_line_content": "            goto cleanup;",
          "new_line_content": "            addReply(c,shared.czero);",
          "content_same": false
        },
        {
          "line": 3922,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(ele)",
          "old_line_content": "        ++result_count;",
          "new_line_content": "        sdsfree(ele);",
          "content_same": false
        },
        {
          "line": 3927,
          "old_api": null,
          "new_api": "zsetLength",
          "old_text": null,
          "new_text": "zsetLength(zobj)",
          "old_line_content": "        if (deleted) *deleted = 1;",
          "new_line_content": "    if (zsetLength(zobj) == 0) {",
          "content_same": false
        },
        {
          "line": 3931,
          "old_api": null,
          "new_api": "notifyKeyspaceEvent",
          "old_text": null,
          "new_text": "notifyKeyspaceEvent(NOTIFY_GENERIC,\"del\",key,c->db->id)",
          "old_line_content": "    }",
          "new_line_content": "        notifyKeyspaceEvent(NOTIFY_GENERIC,\"del\",key,c->db->id);",
          "content_same": false
        },
        {
          "line": 1885,
          "old_api": null,
          "new_api": "zzlDeleteRangeByRank",
          "old_text": null,
          "new_text": "zzlDeleteRangeByRank(zobj->ptr,start+1,end+1,&deleted)",
          "old_line_content": "            break;",
          "new_line_content": "            zobj->ptr = zzlDeleteRangeByRank(zobj->ptr,start+1,end+1,&deleted);",
          "content_same": false
        },
        {
          "line": 1888,
          "old_api": null,
          "new_api": "zzlDeleteRangeByScore",
          "old_text": null,
          "new_text": "zzlDeleteRangeByScore(zobj->ptr,&range,&deleted)",
          "old_line_content": "            break;",
          "new_line_content": "            zobj->ptr = zzlDeleteRangeByScore(zobj->ptr,&range,&deleted);",
          "content_same": false
        },
        {
          "line": 3937,
          "old_api": null,
          "new_api": "rewriteClientCommandVector",
          "old_text": null,
          "new_text": "rewriteClientCommandVector(c, 3,\n                                   (where == ZSET_MAX) ? shared.zpopmax : shared.zpopmin,\n                                   key, count_obj)",
          "old_line_content": "                                   (where == ZSET_MAX) ? shared.zpopmax : shared.zpopmin,",
          "new_line_content": "        rewriteClientCommandVector(c, 3,",
          "content_same": false
        },
        {
          "line": 1891,
          "old_api": null,
          "new_api": "zzlDeleteRangeByLex",
          "old_text": null,
          "new_text": "zzlDeleteRangeByLex(zobj->ptr,&lexrange,&deleted)",
          "old_line_content": "            break;",
          "new_line_content": "            zobj->ptr = zzlDeleteRangeByLex(zobj->ptr,&lexrange,&deleted);",
          "content_same": false
        },
        {
          "line": 3940,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(count_obj)",
          "old_line_content": "    }",
          "new_line_content": "        decrRefCount(count_obj);",
          "content_same": false
        },
        {
          "line": 1895,
          "old_api": null,
          "new_api": "dbDelete",
          "old_text": null,
          "new_text": "dbDelete(c->db,key)",
          "old_line_content": "            keyremoved = 1;",
          "new_line_content": "            dbDelete(c->db,key);",
          "content_same": false
        },
        {
          "line": 3947,
          "old_api": null,
          "new_api": "addReplyErrorObject",
          "old_text": null,
          "new_text": "addReplyErrorObject(c,shared.syntaxerr)",
          "old_line_content": "        return;",
          "new_line_content": "        addReplyErrorObject(c,shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 1903,
          "old_api": null,
          "new_api": "zslDeleteRangeByRank",
          "old_text": null,
          "new_text": "zslDeleteRangeByRank(zs->zsl,start+1,end+1,zs->dict)",
          "old_line_content": "            break;",
          "new_line_content": "            deleted = zslDeleteRangeByRank(zs->zsl,start+1,end+1,zs->dict);",
          "content_same": false
        },
        {
          "line": 3952,
          "old_api": null,
          "new_api": "getPositiveLongFromObjectOrReply",
          "old_text": null,
          "new_text": "getPositiveLongFromObjectOrReply(c, c->argv[2], &count, NULL)",
          "old_line_content": "        return;",
          "new_line_content": "    if (c->argc == 3 && getPositiveLongFromObjectOrReply(c, c->argv[2], &count, NULL) != C_OK)",
          "content_same": false
        },
        {
          "line": 1906,
          "old_api": null,
          "new_api": "zslDeleteRangeByScore",
          "old_text": null,
          "new_text": "zslDeleteRangeByScore(zs->zsl,&range,zs->dict)",
          "old_line_content": "            break;",
          "new_line_content": "            deleted = zslDeleteRangeByScore(zs->zsl,&range,zs->dict);",
          "content_same": false
        },
        {
          "line": 1909,
          "old_api": null,
          "new_api": "zslDeleteRangeByLex",
          "old_text": null,
          "new_text": "zslDeleteRangeByLex(zs->zsl,&lexrange,zs->dict)",
          "old_line_content": "            break;",
          "new_line_content": "            deleted = zslDeleteRangeByLex(zs->zsl,&lexrange,zs->dict);",
          "content_same": false
        },
        {
          "line": 3959,
          "old_api": null,
          "new_api": "genericZpopCommand",
          "old_text": null,
          "new_text": "genericZpopCommand(c, &c->argv[1], 1, where, 0, count, use_nested_array, 0, NULL)",
          "old_line_content": "}",
          "new_line_content": "    genericZpopCommand(c, &c->argv[1], 1, where, 0, count, use_nested_array, 0, NULL);",
          "content_same": false
        },
        {
          "line": 1914,
          "old_api": null,
          "new_api": "dbDelete",
          "old_text": null,
          "new_text": "dbDelete(c->db,key)",
          "old_line_content": "            keyremoved = 1;",
          "new_line_content": "            dbDelete(c->db,key);",
          "content_same": false
        },
        {
          "line": 3964,
          "old_api": null,
          "new_api": "zpopMinMaxCommand",
          "old_text": null,
          "new_text": "zpopMinMaxCommand(c, ZSET_MIN)",
          "old_line_content": "}",
          "new_line_content": "    zpopMinMaxCommand(c, ZSET_MIN);",
          "content_same": false
        },
        {
          "line": 1918,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Unknown sorted set encoding\")",
          "old_line_content": "    }",
          "new_line_content": "        serverPanic(\"Unknown sorted set encoding\");",
          "content_same": false
        },
        {
          "line": 3969,
          "old_api": null,
          "new_api": "zpopMinMaxCommand",
          "old_text": null,
          "new_text": "zpopMinMaxCommand(c, ZSET_MAX)",
          "old_line_content": "}",
          "new_line_content": "    zpopMinMaxCommand(c, ZSET_MAX);",
          "content_same": false
        },
        {
          "line": 1924,
          "old_api": null,
          "new_api": "notifyKeyspaceEvent",
          "old_text": null,
          "new_text": "notifyKeyspaceEvent(NOTIFY_ZSET,notify_type,key,c->db->id)",
          "old_line_content": "        if (keyremoved)",
          "new_line_content": "        notifyKeyspaceEvent(NOTIFY_ZSET,notify_type,key,c->db->id);",
          "content_same": false
        },
        {
          "line": 1926,
          "old_api": null,
          "new_api": "notifyKeyspaceEvent",
          "old_text": null,
          "new_text": "notifyKeyspaceEvent(NOTIFY_GENERIC,\"del\",key,c->db->id)",
          "old_line_content": "    }",
          "new_line_content": "            notifyKeyspaceEvent(NOTIFY_GENERIC,\"del\",key,c->db->id);",
          "content_same": false
        },
        {
          "line": 1929,
          "old_api": null,
          "new_api": "addReplyLongLong",
          "old_text": null,
          "new_text": "addReplyLongLong(c,deleted)",
          "old_line_content": "",
          "new_line_content": "    addReplyLongLong(c,deleted);",
          "content_same": false
        },
        {
          "line": 1932,
          "old_api": null,
          "new_api": "zslFreeLexRange",
          "old_text": null,
          "new_text": "zslFreeLexRange(&lexrange)",
          "old_line_content": "}",
          "new_line_content": "    if (rangetype == ZRANGE_LEX) zslFreeLexRange(&lexrange);",
          "content_same": false
        },
        {
          "line": 1936,
          "old_api": null,
          "new_api": "zremrangeGenericCommand",
          "old_text": null,
          "new_text": "zremrangeGenericCommand(c,ZRANGE_RANK)",
          "old_line_content": "}",
          "new_line_content": "    zremrangeGenericCommand(c,ZRANGE_RANK);",
          "content_same": false
        },
        {
          "line": 1940,
          "old_api": null,
          "new_api": "zremrangeGenericCommand",
          "old_text": null,
          "new_text": "zremrangeGenericCommand(c,ZRANGE_SCORE)",
          "old_line_content": "}",
          "new_line_content": "    zremrangeGenericCommand(c,ZRANGE_SCORE);",
          "content_same": false
        },
        {
          "line": 1944,
          "old_api": null,
          "new_api": "zremrangeGenericCommand",
          "old_text": null,
          "new_text": "zremrangeGenericCommand(c,ZRANGE_LEX)",
          "old_line_content": "}",
          "new_line_content": "    zremrangeGenericCommand(c,ZRANGE_LEX);",
          "content_same": false
        },
        {
          "line": 3992,
          "old_api": null,
          "new_api": "getTimeoutFromObjectOrReply",
          "old_text": null,
          "new_text": "getTimeoutFromObjectOrReply(c,c->argv[timeout_idx],&timeout,UNIT_SECONDS)",
          "old_line_content": "        != C_OK) return;",
          "new_line_content": "    if (getTimeoutFromObjectOrReply(c,c->argv[timeout_idx],&timeout,UNIT_SECONDS)",
          "content_same": false
        },
        {
          "line": 3997,
          "old_api": null,
          "new_api": "lookupKeyWrite",
          "old_text": null,
          "new_text": "lookupKeyWrite(c->db,key)",
          "old_line_content": "        /* Non-existing key, move to next key. */",
          "new_line_content": "        o = lookupKeyWrite(c->db,key);",
          "content_same": false
        },
        {
          "line": 4001,
          "old_api": null,
          "new_api": "checkType",
          "old_text": null,
          "new_text": "checkType(c,o,OBJ_ZSET)",
          "old_line_content": "",
          "new_line_content": "        if (checkType(c,o,OBJ_ZSET)) return;",
          "content_same": false
        },
        {
          "line": 4003,
          "old_api": null,
          "new_api": "zsetLength",
          "old_text": null,
          "new_text": "zsetLength(o)",
          "old_line_content": "        /* Empty zset, move to next key. */",
          "new_line_content": "        long llen = zsetLength(o);",
          "content_same": false
        },
        {
          "line": 4008,
          "old_api": null,
          "new_api": "genericZpopCommand",
          "old_text": null,
          "new_text": "genericZpopCommand(c, &key, 1, where, 1, count, use_nested_array, reply_nil_when_empty, NULL)",
          "old_line_content": "",
          "new_line_content": "        genericZpopCommand(c, &key, 1, where, 1, count, use_nested_array, reply_nil_when_empty, NULL);",
          "content_same": false
        },
        {
          "line": 4012,
          "old_api": null,
          "new_api": "rewriteClientCommandVector",
          "old_text": null,
          "new_text": "rewriteClientCommandVector(c,2,\n                                       (where == ZSET_MAX) ? shared.zpopmax : shared.zpopmin,\n                                       key)",
          "old_line_content": "                                       (where == ZSET_MAX) ? shared.zpopmax : shared.zpopmin,",
          "new_line_content": "            rewriteClientCommandVector(c,2,",
          "content_same": false
        },
        {
          "line": 4018,
          "old_api": null,
          "new_api": "rewriteClientCommandVector",
          "old_text": null,
          "new_text": "rewriteClientCommandVector(c, 3,\n                                       (where == ZSET_MAX) ? shared.zpopmax : shared.zpopmin,\n                                       key, count_obj)",
          "old_line_content": "                                       (where == ZSET_MAX) ? shared.zpopmax : shared.zpopmin,",
          "new_line_content": "            rewriteClientCommandVector(c, 3,",
          "content_same": false
        },
        {
          "line": 4021,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(count_obj)",
          "old_line_content": "        }",
          "new_line_content": "            decrRefCount(count_obj);",
          "content_same": false
        },
        {
          "line": 4030,
          "old_api": null,
          "new_api": "addReplyNullArray",
          "old_text": null,
          "new_text": "addReplyNullArray(c)",
          "old_line_content": "        return;",
          "new_line_content": "        addReplyNullArray(c);",
          "content_same": false
        },
        {
          "line": 4036,
          "old_api": null,
          "new_api": "blockForKeys",
          "old_text": null,
          "new_text": "blockForKeys(c,BLOCKED_ZSET,c->argv+1,c->argc-2,count,timeout,NULL,&pos,NULL)",
          "old_line_content": "}",
          "new_line_content": "    blockForKeys(c,BLOCKED_ZSET,c->argv+1,c->argc-2,count,timeout,NULL,&pos,NULL);",
          "content_same": false
        },
        {
          "line": 4041,
          "old_api": null,
          "new_api": "blockingGenericZpopCommand",
          "old_text": null,
          "new_text": "blockingGenericZpopCommand(c, c->argv+1, c->argc-2, ZSET_MIN, c->argc-1, -1, 0, 0)",
          "old_line_content": "}",
          "new_line_content": "    blockingGenericZpopCommand(c, c->argv+1, c->argc-2, ZSET_MIN, c->argc-1, -1, 0, 0);",
          "content_same": false
        },
        {
          "line": 4046,
          "old_api": null,
          "new_api": "blockingGenericZpopCommand",
          "old_text": null,
          "new_text": "blockingGenericZpopCommand(c, c->argv+1, c->argc-2, ZSET_MAX, c->argc-1, -1, 0, 0)",
          "old_line_content": "}",
          "new_line_content": "    blockingGenericZpopCommand(c, c->argv+1, c->argc-2, ZSET_MAX, c->argc-1, -1, 0, 0);",
          "content_same": false
        },
        {
          "line": 4052,
          "old_api": null,
          "new_api": "addReplyArrayLen",
          "old_text": null,
          "new_text": "addReplyArrayLen(c,2)",
          "old_line_content": "        if (keys[i].sval)",
          "new_line_content": "            addReplyArrayLen(c,2);",
          "content_same": false
        },
        {
          "line": 4054,
          "old_api": null,
          "new_api": "addReplyBulkCBuffer",
          "old_text": null,
          "new_text": "addReplyBulkCBuffer(c, keys[i].sval, keys[i].slen)",
          "old_line_content": "        else",
          "new_line_content": "            addReplyBulkCBuffer(c, keys[i].sval, keys[i].slen);",
          "content_same": false
        },
        {
          "line": 4056,
          "old_api": null,
          "new_api": "addReplyBulkLongLong",
          "old_text": null,
          "new_text": "addReplyBulkLongLong(c, keys[i].lval)",
          "old_line_content": "        if (vals) {",
          "new_line_content": "            addReplyBulkLongLong(c, keys[i].lval);",
          "content_same": false
        },
        {
          "line": 4059,
          "old_api": null,
          "new_api": "zzlStrtod",
          "old_text": null,
          "new_text": "zzlStrtod(vals[i].sval,vals[i].slen)",
          "old_line_content": "            } else",
          "new_line_content": "                addReplyDouble(c, zzlStrtod(vals[i].sval,vals[i].slen));",
          "content_same": false
        },
        {
          "line": 4061,
          "old_api": null,
          "new_api": "addReplyDouble",
          "old_text": null,
          "new_text": "addReplyDouble(c, vals[i].lval)",
          "old_line_content": "        }",
          "new_line_content": "                addReplyDouble(c, vals[i].lval);",
          "content_same": false
        },
        {
          "line": 2018,
          "old_api": null,
          "new_api": "dictNext",
          "old_text": null,
          "new_text": "dictNext(it->ht.di)",
          "old_line_content": "        } else {",
          "new_line_content": "            it->ht.de = dictNext(it->ht.di);",
          "content_same": false
        },
        {
          "line": 2020,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Unknown set encoding\")",
          "old_line_content": "        }",
          "new_line_content": "            serverPanic(\"Unknown set encoding\");",
          "content_same": false
        },
        {
          "line": 2029,
          "old_api": null,
          "new_api": "lpSeek",
          "old_text": null,
          "new_text": "lpSeek(it->zl.zl,-2)",
          "old_line_content": "            if (it->zl.eptr != NULL) {",
          "new_line_content": "            it->zl.eptr = lpSeek(it->zl.zl,-2);",
          "content_same": false
        },
        {
          "line": 2032,
          "old_api": null,
          "new_api": "serverAssert",
          "old_text": null,
          "new_text": "serverAssert(it->zl.sptr != NULL)",
          "old_line_content": "            }",
          "new_line_content": "                serverAssert(it->zl.sptr != NULL);",
          "content_same": false
        },
        {
          "line": 4083,
          "old_api": null,
          "new_api": "zsetLength",
          "old_text": null,
          "new_text": "zsetLength(zsetobj)",
          "old_line_content": "",
          "new_line_content": "    size = zsetLength(zsetobj);",
          "content_same": false
        },
        {
          "line": 2038,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Unknown sorted set encoding\")",
          "old_line_content": "        }",
          "new_line_content": "            serverPanic(\"Unknown sorted set encoding\");",
          "content_same": false
        },
        {
          "line": 2041,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Unsupported type\")",
          "old_line_content": "    }",
          "new_line_content": "        serverPanic(\"Unsupported type\");",
          "content_same": false
        },
        {
          "line": 4094,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.emptyarray)",
          "old_line_content": "        return;",
          "new_line_content": "        addReply(c,shared.emptyarray);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 2051,
          "old_api": "UNUSED",
          "new_api": null,
          "old_text": "UNUSED(it)",
          "new_text": null,
          "old_line_content": "            UNUSED(it); /* skip */",
          "new_line_content": "        if (op->encoding == OBJ_ENCODING_INTSET) {",
          "content_same": false
        },
        {
          "line": 2053,
          "old_api": "dictReleaseIterator",
          "new_api": null,
          "old_text": "dictReleaseIterator(it->ht.di)",
          "new_text": null,
          "old_line_content": "            dictReleaseIterator(it->ht.di);",
          "new_line_content": "        } else if (op->encoding == OBJ_ENCODING_HT) {",
          "content_same": false
        },
        {
          "line": 2055,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Unknown set encoding\")",
          "new_text": null,
          "old_line_content": "            serverPanic(\"Unknown set encoding\");",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 4104,
          "old_api": "addReplyArrayLen",
          "new_api": null,
          "old_text": "addReplyArrayLen(c, count*2)",
          "new_text": null,
          "old_line_content": "            addReplyArrayLen(c, count*2);",
          "new_line_content": "        if (withscores && c->resp == 2)",
          "content_same": false
        },
        {
          "line": 4106,
          "old_api": "addReplyArrayLen",
          "new_api": null,
          "old_text": "addReplyArrayLen(c, count)",
          "new_text": null,
          "old_line_content": "            addReplyArrayLen(c, count);",
          "new_line_content": "        else",
          "content_same": false
        },
        {
          "line": 2060,
          "old_api": "UNUSED",
          "new_api": null,
          "old_text": "UNUSED(it)",
          "new_text": null,
          "old_line_content": "            UNUSED(it); /* skip */",
          "new_line_content": "        if (op->encoding == OBJ_ENCODING_LISTPACK) {",
          "content_same": false
        },
        {
          "line": 2062,
          "old_api": "UNUSED",
          "new_api": null,
          "old_text": "UNUSED(it)",
          "new_text": null,
          "old_line_content": "            UNUSED(it); /* skip */",
          "new_line_content": "        } else if (op->encoding == OBJ_ENCODING_SKIPLIST) {",
          "content_same": false
        },
        {
          "line": 4110,
          "old_api": "dictGetFairRandomKey",
          "new_api": null,
          "old_text": "dictGetFairRandomKey(zs->dict)",
          "new_text": null,
          "old_line_content": "                dictEntry *de = dictGetFairRandomKey(zs->dict);",
          "new_line_content": "            while (count--) {",
          "content_same": false
        },
        {
          "line": 2064,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Unknown sorted set encoding\")",
          "new_text": null,
          "old_line_content": "            serverPanic(\"Unknown sorted set encoding\");",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 4113,
          "old_api": "addReplyArrayLen",
          "new_api": null,
          "old_text": "addReplyArrayLen(c,2)",
          "new_text": null,
          "old_line_content": "                    addReplyArrayLen(c,2);",
          "new_line_content": "                if (withscores && c->resp > 2)",
          "content_same": false
        },
        {
          "line": 2067,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Unsupported type\")",
          "new_text": null,
          "old_line_content": "        serverPanic(\"Unsupported type\");",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 4116,
          "old_api": "dictGetVal",
          "new_api": null,
          "old_text": "dictGetVal(de)",
          "new_text": null,
          "old_line_content": "                    addReplyDouble(c, *(double*)dictGetVal(de));",
          "new_line_content": "                if (withscores)",
          "content_same": false
        },
        {
          "line": 2073,
          "old_api": "sdsfree",
          "new_api": null,
          "old_text": "sdsfree(val->ele)",
          "new_text": null,
          "old_line_content": "        sdsfree(val->ele);",
          "new_line_content": "    if (val->flags & OPVAL_DIRTY_SDS) {",
          "content_same": false
        },
        {
          "line": 4122,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(listpackEntry)*limit)",
          "new_text": null,
          "old_line_content": "            keys = zmalloc(sizeof(listpackEntry)*limit);",
          "new_line_content": "            limit = count > ZRANDMEMBER_RANDOM_SAMPLE_LIMIT ? ZRANDMEMBER_RANDOM_SAMPLE_LIMIT : count;",
          "content_same": false
        },
        {
          "line": 4124,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(listpackEntry)*limit)",
          "new_text": null,
          "old_line_content": "                vals = zmalloc(sizeof(listpackEntry)*limit);",
          "new_line_content": "            if (withscores)",
          "content_same": false
        },
        {
          "line": 4128,
          "old_api": "lpRandomPairs",
          "new_api": null,
          "old_text": "lpRandomPairs(zsetobj->ptr, sample_count, keys, vals)",
          "new_text": null,
          "old_line_content": "                lpRandomPairs(zsetobj->ptr, sample_count, keys, vals);",
          "new_line_content": "                count -= sample_count;",
          "content_same": false
        },
        {
          "line": 4131,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(keys)",
          "new_text": null,
          "old_line_content": "            zfree(keys);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 2085,
          "old_api": "intsetLen",
          "new_api": null,
          "old_text": "intsetLen(op->subject->ptr)",
          "new_text": null,
          "old_line_content": "            return intsetLen(op->subject->ptr);",
          "new_line_content": "        if (op->encoding == OBJ_ENCODING_INTSET) {",
          "content_same": false
        },
        {
          "line": 2088,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(ht)",
          "new_text": null,
          "old_line_content": "            return dictSize(ht);",
          "new_line_content": "            dict *ht = op->subject->ptr;",
          "content_same": false
        },
        {
          "line": 2090,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Unknown set encoding\")",
          "new_text": null,
          "old_line_content": "            serverPanic(\"Unknown set encoding\");",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 2094,
          "old_api": "zzlLength",
          "new_api": null,
          "old_text": "zzlLength(op->subject->ptr)",
          "new_text": null,
          "old_line_content": "            return zzlLength(op->subject->ptr);",
          "new_line_content": "        if (op->encoding == OBJ_ENCODING_LISTPACK) {",
          "content_same": false
        },
        {
          "line": 4142,
          "old_api": "zuiInitIterator",
          "new_api": null,
          "old_text": "zuiInitIterator(&src)",
          "new_text": null,
          "old_line_content": "    zuiInitIterator(&src);",
          "new_line_content": "    src.encoding = zsetobj->encoding;",
          "content_same": false
        },
        {
          "line": 2099,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Unknown sorted set encoding\")",
          "new_text": null,
          "old_line_content": "            serverPanic(\"Unknown sorted set encoding\");",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 4148,
          "old_api": "addReplyArrayLen",
          "new_api": null,
          "old_text": "addReplyArrayLen(c, reply_size*2)",
          "new_text": null,
          "old_line_content": "        addReplyArrayLen(c, reply_size*2);",
          "new_line_content": "    if (withscores && c->resp == 2)",
          "content_same": false
        },
        {
          "line": 2102,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Unsupported type\")",
          "new_text": null,
          "old_line_content": "        serverPanic(\"Unsupported type\");",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 4150,
          "old_api": "addReplyArrayLen",
          "new_api": null,
          "old_text": "addReplyArrayLen(c, reply_size)",
          "new_text": null,
          "old_line_content": "        addReplyArrayLen(c, reply_size);",
          "new_line_content": "    else",
          "content_same": false
        },
        {
          "line": 4156,
          "old_api": "zuiNext",
          "new_api": null,
          "old_text": "zuiNext(&src, &zval)",
          "new_text": null,
          "old_line_content": "        while (zuiNext(&src, &zval)) {",
          "new_line_content": "    if (count >= size) {",
          "content_same": false
        },
        {
          "line": 4158,
          "old_api": "addReplyArrayLen",
          "new_api": null,
          "old_text": "addReplyArrayLen(c,2)",
          "new_text": null,
          "old_line_content": "                addReplyArrayLen(c,2);",
          "new_line_content": "            if (withscores && c->resp > 2)",
          "content_same": false
        },
        {
          "line": 2113,
          "old_api": "zuiDiscardDirtyValue",
          "new_api": null,
          "old_text": "zuiDiscardDirtyValue(val)",
          "new_text": null,
          "old_line_content": "    zuiDiscardDirtyValue(val);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4161,
          "old_api": "addReplyDouble",
          "new_api": null,
          "old_text": "addReplyDouble(c, zval.score)",
          "new_text": null,
          "old_line_content": "                addReplyDouble(c, zval.score);",
          "new_line_content": "            if (withscores)",
          "content_same": false
        },
        {
          "line": 2115,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(val,0,sizeof(zsetopval))",
          "new_text": null,
          "old_line_content": "    memset(val,0,sizeof(zsetopval));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4163,
          "old_api": "zuiClearIterator",
          "new_api": null,
          "old_text": "zuiClearIterator(&src)",
          "new_text": null,
          "old_line_content": "        zuiClearIterator(&src);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2122,
          "old_api": "intsetGet",
          "new_api": null,
          "old_text": "intsetGet(it->is.is,it->is.ii,&ell)",
          "new_text": null,
          "old_line_content": "            if (!intsetGet(it->is.is,it->is.ii,&ell))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4177,
          "old_api": "dictCreate",
          "new_api": null,
          "old_text": "dictCreate(&sdsReplyDictType)",
          "new_text": null,
          "old_line_content": "        dict *d = dictCreate(&sdsReplyDictType);",
          "new_line_content": "    if (count*ZRANDMEMBER_SUB_STRATEGY_MUL > size) {",
          "content_same": false
        },
        {
          "line": 2132,
          "old_api": "dictGetKey",
          "new_api": null,
          "old_text": "dictGetKey(it->ht.de)",
          "new_text": null,
          "old_line_content": "            val->ele = dictGetKey(it->ht.de);",
          "new_line_content": "                return 0;",
          "content_same": false
        },
        {
          "line": 4180,
          "old_api": "zuiNext",
          "new_api": null,
          "old_text": "zuiNext(&src, &zval)",
          "new_text": null,
          "old_line_content": "        while (zuiNext(&src, &zval)) {",
          "new_line_content": "        /* Add all the elements into the temporary dictionary. */",
          "content_same": false
        },
        {
          "line": 2136,
          "old_api": "dictNext",
          "new_api": null,
          "old_text": "dictNext(it->ht.di)",
          "new_text": null,
          "old_line_content": "            it->ht.de = dictNext(it->ht.di);",
          "new_line_content": "            /* Move to next element. */",
          "content_same": false
        },
        {
          "line": 4185,
          "old_api": "dictSetDoubleVal",
          "new_api": null,
          "old_text": "dictSetDoubleVal(de, zval.score)",
          "new_text": null,
          "old_line_content": "                dictSetDoubleVal(de, zval.score);",
          "new_line_content": "            if (withscores)",
          "content_same": false
        },
        {
          "line": 2138,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Unknown set encoding\")",
          "new_text": null,
          "old_line_content": "            serverPanic(\"Unknown set encoding\");",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 4187,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(d)",
          "new_text": null,
          "old_line_content": "        serverAssert(dictSize(d) == size);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4192,
          "old_api": "dictGetFairRandomKey",
          "new_api": null,
          "old_text": "dictGetFairRandomKey(d)",
          "new_text": null,
          "old_line_content": "            de = dictGetFairRandomKey(d);",
          "new_line_content": "            dictEntry *de;",
          "content_same": false
        },
        {
          "line": 2146,
          "old_api": "lpGetValue",
          "new_api": null,
          "old_text": "lpGetValue(it->zl.eptr,&val->elen,&val->ell)",
          "new_text": null,
          "old_line_content": "            val->estr = lpGetValue(it->zl.eptr,&val->elen,&val->ell);",
          "new_line_content": "                return 0;",
          "content_same": false
        },
        {
          "line": 2150,
          "old_api": "zzlPrev",
          "new_api": null,
          "old_text": "zzlPrev(it->zl.zl,&it->zl.eptr,&it->zl.sptr)",
          "new_text": null,
          "old_line_content": "            zzlPrev(it->zl.zl,&it->zl.eptr,&it->zl.sptr);",
          "new_line_content": "            /* Move to next element (going backwards, see zuiInitIterator). */",
          "content_same": false
        },
        {
          "line": 4202,
          "old_api": "dictGetIterator",
          "new_api": null,
          "old_text": "dictGetIterator(d)",
          "new_text": null,
          "old_line_content": "        di = dictGetIterator(d);",
          "new_line_content": "        dictEntry *de;",
          "content_same": false
        },
        {
          "line": 4205,
          "old_api": "addReplyArrayLen",
          "new_api": null,
          "old_text": "addReplyArrayLen(c,2)",
          "new_text": null,
          "old_line_content": "                addReplyArrayLen(c,2);",
          "new_line_content": "            if (withscores && c->resp > 2)",
          "content_same": false
        },
        {
          "line": 2160,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Unknown sorted set encoding\")",
          "new_text": null,
          "old_line_content": "            serverPanic(\"Unknown sorted set encoding\");",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 4208,
          "old_api": "dictGetDoubleVal",
          "new_api": null,
          "old_text": "dictGetDoubleVal(de)",
          "new_text": null,
          "old_line_content": "                addReplyDouble(c, dictGetDoubleVal(de));",
          "new_line_content": "            if (withscores)",
          "content_same": false
        },
        {
          "line": 2163,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Unsupported type\")",
          "new_text": null,
          "old_line_content": "        serverPanic(\"Unsupported type\");",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 4211,
          "old_api": "dictReleaseIterator",
          "new_api": null,
          "old_text": "dictReleaseIterator(di)",
          "new_text": null,
          "old_line_content": "        dictReleaseIterator(di);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 124,
          "old_api": "random",
          "new_api": null,
          "old_text": "random()",
          "new_text": null,
          "old_line_content": "    while ((random()&0xFFFF) < (ZSKIPLIST_P * 0xFFFF))",
          "new_line_content": "    int level = 1;",
          "content_same": false
        },
        {
          "line": 2173,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(val->ele)",
          "new_text": null,
          "old_line_content": "            if (string2ll(val->ele,sdslen(val->ele),&val->ell))",
          "new_line_content": "        if (val->ele != NULL) {",
          "content_same": false
        },
        {
          "line": 2176,
          "old_api": "string2ll",
          "new_api": null,
          "old_text": "string2ll((char*)val->estr,val->elen,&val->ell)",
          "new_text": null,
          "old_line_content": "            if (string2ll((char*)val->estr,val->elen,&val->ell))",
          "new_line_content": "        } else if (val->estr != NULL) {",
          "content_same": false
        },
        {
          "line": 4224,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(listpackEntry)*count)",
          "new_text": null,
          "old_line_content": "            keys = zmalloc(sizeof(listpackEntry)*count);",
          "new_line_content": "            listpackEntry *keys, *vals = NULL;",
          "content_same": false
        },
        {
          "line": 4226,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(listpackEntry)*count)",
          "new_text": null,
          "old_line_content": "                vals = zmalloc(sizeof(listpackEntry)*count);",
          "new_line_content": "            if (withscores)",
          "content_same": false
        },
        {
          "line": 137,
          "old_api": "isnan",
          "new_api": null,
          "old_text": "isnan(score)",
          "new_text": null,
          "old_line_content": "    serverAssert(!isnan(score));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2189,
          "old_api": "sdsnewlen",
          "new_api": null,
          "old_text": "sdsnewlen((char*)val->estr,val->elen)",
          "new_text": null,
          "old_line_content": "            val->ele = sdsnewlen((char*)val->estr,val->elen);",
          "new_line_content": "        if (val->estr != NULL) {",
          "content_same": false
        },
        {
          "line": 4237,
          "old_api": "dictCreate",
          "new_api": null,
          "old_text": "dictCreate(&hashDictType)",
          "new_text": null,
          "old_line_content": "        dict *d = dictCreate(&hashDictType);",
          "new_line_content": "        unsigned long added = 0;",
          "content_same": false
        },
        {
          "line": 2191,
          "old_api": "sdsfromlonglong",
          "new_api": null,
          "old_text": "sdsfromlonglong(val->ell)",
          "new_text": null,
          "old_line_content": "            val->ele = sdsfromlonglong(val->ell);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 145,
          "old_api": "sdscmp",
          "new_api": null,
          "old_text": "sdscmp(x->level[i].forward->ele,ele)",
          "new_text": null,
          "old_line_content": "                    sdscmp(x->level[i].forward->ele,ele) < 0)))",
          "new_line_content": "                    (x->level[i].forward->score == score &&",
          "content_same": false
        },
        {
          "line": 4243,
          "old_api": "zsetTypeRandomElement",
          "new_api": null,
          "old_text": "zsetTypeRandomElement(zsetobj, size, &key, withscores ? &score: NULL)",
          "new_text": null,
          "old_line_content": "            zsetTypeRandomElement(zsetobj, size, &key, withscores ? &score: NULL);",
          "new_line_content": "            double score;",
          "content_same": false
        },
        {
          "line": 4248,
          "old_api": "zsetSdsFromListpackEntry",
          "new_api": null,
          "old_text": "zsetSdsFromListpackEntry(&key)",
          "new_text": null,
          "old_line_content": "            sds skey = zsetSdsFromListpackEntry(&key);",
          "new_line_content": "            * in the result dictionary. */",
          "content_same": false
        },
        {
          "line": 156,
          "old_api": "zslRandomLevel",
          "new_api": null,
          "old_text": "zslRandomLevel()",
          "new_text": null,
          "old_line_content": "    level = zslRandomLevel();",
          "new_line_content": "     * already inside or not. */",
          "content_same": false
        },
        {
          "line": 2208,
          "old_api": "sdsdup",
          "new_api": null,
          "old_text": "sdsdup(val->ele)",
          "new_text": null,
          "old_line_content": "        return sdsdup(val->ele);",
          "new_line_content": "    } else if (val->ele) {",
          "content_same": false
        },
        {
          "line": 4256,
          "old_api": "addReplyArrayLen",
          "new_api": null,
          "old_text": "addReplyArrayLen(c,2)",
          "new_text": null,
          "old_line_content": "                addReplyArrayLen(c,2);",
          "new_line_content": "            if (withscores && c->resp > 2)",
          "content_same": false
        },
        {
          "line": 2210,
          "old_api": "sdsnewlen",
          "new_api": null,
          "old_text": "sdsnewlen((char*)val->estr,val->elen)",
          "new_text": null,
          "old_line_content": "        return sdsnewlen((char*)val->estr,val->elen);",
          "new_line_content": "    } else if (val->estr) {",
          "content_same": false
        },
        {
          "line": 4259,
          "old_api": "addReplyDouble",
          "new_api": null,
          "old_text": "addReplyDouble(c, score)",
          "new_text": null,
          "old_line_content": "                addReplyDouble(c, score);",
          "new_line_content": "            if (withscores)",
          "content_same": false
        },
        {
          "line": 2212,
          "old_api": "sdsfromlonglong",
          "new_api": null,
          "old_text": "sdsfromlonglong(val->ell)",
          "new_text": null,
          "old_line_content": "        return sdsfromlonglong(val->ell);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 165,
          "old_api": "zslCreateNode",
          "new_api": null,
          "old_text": "zslCreateNode(level,score,ele)",
          "new_text": null,
          "old_line_content": "    x = zslCreateNode(level,score,ele);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4263,
          "old_api": "dictRelease",
          "new_api": null,
          "old_text": "dictRelease(d)",
          "new_text": null,
          "old_line_content": "        dictRelease(d);",
          "new_line_content": "        /* Release memory */",
          "content_same": false
        },
        {
          "line": 4265,
          "old_api": "zuiClearIterator",
          "new_api": null,
          "old_text": "zuiClearIterator(&src)",
          "new_text": null,
          "old_line_content": "    zuiClearIterator(&src);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2219,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(val->ele)",
          "new_text": null,
          "old_line_content": "            val->elen = sdslen(val->ele);",
          "new_line_content": "        if (val->ele != NULL) {",
          "content_same": false
        },
        {
          "line": 2222,
          "old_api": "ll2string",
          "new_api": null,
          "old_text": "ll2string((char*)val->_buf,sizeof(val->_buf),val->ell)",
          "new_text": null,
          "old_line_content": "            val->elen = ll2string((char*)val->_buf,sizeof(val->_buf),val->ell);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 4276,
          "old_api": "getLongFromObjectOrReply",
          "new_api": null,
          "old_text": "getLongFromObjectOrReply(c,c->argv[2],&l,NULL)",
          "new_text": null,
          "old_line_content": "        if (getLongFromObjectOrReply(c,c->argv[2],&l,NULL) != C_OK) return;",
          "new_line_content": "    if (c->argc >= 3) {",
          "content_same": false
        },
        {
          "line": 4282,
          "old_api": "zrandmemberWithCountCommand",
          "new_api": null,
          "old_text": "zrandmemberWithCountCommand(c, l, withscores)",
          "new_text": null,
          "old_line_content": "        zrandmemberWithCountCommand(c, l, withscores);",
          "new_line_content": "            withscores = 1;",
          "content_same": false
        },
        {
          "line": 2237,
          "old_api": "zuiLongLongFromValue",
          "new_api": null,
          "old_text": "zuiLongLongFromValue(val)",
          "new_text": null,
          "old_line_content": "            if (zuiLongLongFromValue(val) &&",
          "new_line_content": "        if (op->encoding == OBJ_ENCODING_INTSET) {",
          "content_same": false
        },
        {
          "line": 4287,
          "old_api": "lookupKeyReadOrReply",
          "new_api": null,
          "old_text": "lookupKeyReadOrReply(c,c->argv[1],shared.null[c->resp])",
          "new_text": null,
          "old_line_content": "    if ((zset = lookupKeyReadOrReply(c,c->argv[1],shared.null[c->resp]))== NULL ||",
          "new_line_content": "    /* Handle variant without <count> argument. Reply with simple bulk string */",
          "content_same": false
        },
        {
          "line": 4292,
          "old_api": "zsetLength",
          "new_api": null,
          "old_text": "zsetLength(zset)",
          "new_text": null,
          "old_line_content": "    zsetTypeRandomElement(zset, zsetLength(zset), &ele,NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2247,
          "old_api": "zuiSdsFromValue",
          "new_api": null,
          "old_text": "zuiSdsFromValue(val)",
          "new_text": null,
          "old_line_content": "            zuiSdsFromValue(val);",
          "new_line_content": "            dict *ht = op->subject->ptr;",
          "content_same": false
        },
        {
          "line": 2255,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Unknown set encoding\")",
          "new_text": null,
          "old_line_content": "            serverPanic(\"Unknown set encoding\");",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 2258,
          "old_api": "zuiSdsFromValue",
          "new_api": null,
          "old_text": "zuiSdsFromValue(val)",
          "new_text": null,
          "old_line_content": "        zuiSdsFromValue(val);",
          "new_line_content": "    } else if (op->type == OBJ_ZSET) {",
          "content_same": false
        },
        {
          "line": 4307,
          "old_api": "getRangeLongFromObjectOrReply",
          "new_api": null,
          "old_text": "getRangeLongFromObjectOrReply(c, c->argv[numkeys_idx], 1, LONG_MAX,\n                                      &numkeys, \"numkeys should be greater than 0\")",
          "new_text": null,
          "old_line_content": "    if (getRangeLongFromObjectOrReply(c, c->argv[numkeys_idx], 1, LONG_MAX,",
          "new_line_content": "    /* Parse the numkeys. */",
          "content_same": false
        },
        {
          "line": 2261,
          "old_api": "zzlFind",
          "new_api": null,
          "old_text": "zzlFind(op->subject->ptr,val->ele,score)",
          "new_text": null,
          "old_line_content": "            if (zzlFind(op->subject->ptr,val->ele,score) != NULL) {",
          "new_line_content": "        if (op->encoding == OBJ_ENCODING_LISTPACK) {",
          "content_same": false
        },
        {
          "line": 4314,
          "old_api": "addReplyErrorObject",
          "new_api": null,
          "old_text": "addReplyErrorObject(c, shared.syntaxerr)",
          "new_text": null,
          "old_line_content": "        addReplyErrorObject(c, shared.syntaxerr);",
          "new_line_content": "    if (where_idx >= c->argc) {",
          "content_same": false
        },
        {
          "line": 4317,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[where_idx]->ptr, \"MIN\")",
          "new_text": null,
          "old_line_content": "    if (!strcasecmp(c->argv[where_idx]->ptr, \"MIN\")) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2270,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(zs->dict,val->ele)",
          "new_text": null,
          "old_line_content": "            if ((de = dictFind(zs->dict,val->ele)) != NULL) {",
          "new_line_content": "            dictEntry *de;",
          "content_same": false
        },
        {
          "line": 4319,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[where_idx]->ptr, \"MAX\")",
          "new_text": null,
          "old_line_content": "    } else if (!strcasecmp(c->argv[where_idx]->ptr, \"MAX\")) {",
          "new_line_content": "        where = ZSET_MIN;",
          "content_same": false
        },
        {
          "line": 4322,
          "old_api": "addReplyErrorObject",
          "new_api": null,
          "old_text": "addReplyErrorObject(c, shared.syntaxerr)",
          "new_text": null,
          "old_line_content": "        addReplyErrorObject(c, shared.syntaxerr);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 228,
          "old_api": "sdscmp",
          "new_api": null,
          "old_text": "sdscmp(x->level[i].forward->ele,ele)",
          "new_text": null,
          "old_line_content": "                     sdscmp(x->level[i].forward->ele,ele) < 0)))",
          "new_line_content": "                    (x->level[i].forward->score == score &&",
          "content_same": false
        },
        {
          "line": 2277,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Unknown sorted set encoding\")",
          "new_text": null,
          "old_line_content": "            serverPanic(\"Unknown sorted set encoding\");",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 2280,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Unsupported type\")",
          "new_text": null,
          "old_line_content": "        serverPanic(\"Unsupported type\");",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 4331,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(opt, \"COUNT\")",
          "new_text": null,
          "old_line_content": "        if (count == -1 && !strcasecmp(opt, \"COUNT\") && moreargs) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 237,
          "old_api": "sdscmp",
          "new_api": null,
          "old_text": "sdscmp(x->ele,ele)",
          "new_text": null,
          "old_line_content": "    if (x && score == x->score && sdscmp(x->ele,ele) == 0) {",
          "new_line_content": "    x = x->level[0].forward;",
          "content_same": false
        },
        {
          "line": 2285,
          "old_api": "zuiLength",
          "new_api": null,
          "old_text": "zuiLength((zsetopsrc*)s1)",
          "new_text": null,
          "old_line_content": "    unsigned long first = zuiLength((zsetopsrc*)s1);",
          "new_line_content": "int zuiCompareByCardinality(const void *s1, const void *s2) {",
          "content_same": false
        },
        {
          "line": 4333,
          "old_api": "getRangeLongFromObjectOrReply",
          "new_api": null,
          "old_text": "getRangeLongFromObjectOrReply(c, c->argv[j], 1, LONG_MAX,\n                                              &count,\"count should be greater than 0\")",
          "new_text": null,
          "old_line_content": "            if (getRangeLongFromObjectOrReply(c, c->argv[j], 1, LONG_MAX,",
          "new_line_content": "            j++;",
          "content_same": false
        },
        {
          "line": 240,
          "old_api": "zslFreeNode",
          "new_api": null,
          "old_text": "zslFreeNode(x)",
          "new_text": null,
          "old_line_content": "            zslFreeNode(x);",
          "new_line_content": "        if (!node)",
          "content_same": false
        },
        {
          "line": 4337,
          "old_api": "addReplyErrorObject",
          "new_api": null,
          "old_text": "addReplyErrorObject(c, shared.syntaxerr)",
          "new_text": null,
          "old_line_content": "            addReplyErrorObject(c, shared.syntaxerr);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 2293,
          "old_api": "zuiCompareByCardinality",
          "new_api": null,
          "old_text": "zuiCompareByCardinality(s1, s2)",
          "new_text": null,
          "old_line_content": "    return zuiCompareByCardinality(s1, s2) * -1;",
          "new_line_content": "static int zuiCompareByRevCardinality(const void *s1, const void *s2) {",
          "content_same": false
        },
        {
          "line": 4346,
          "old_api": "blockingGenericZpopCommand",
          "new_api": null,
          "old_text": "blockingGenericZpopCommand(c, c->argv+numkeys_idx+1, numkeys, where, 1, count, 1, 1)",
          "new_text": null,
          "old_line_content": "        blockingGenericZpopCommand(c, c->argv+numkeys_idx+1, numkeys, where, 1, count, 1, 1);",
          "new_line_content": "        /* BLOCK. We will handle CLIENT_DENY_BLOCKING flag in blockingGenericZpopCommand. */",
          "content_same": false
        },
        {
          "line": 4349,
          "old_api": "genericZpopCommand",
          "new_api": null,
          "old_text": "genericZpopCommand(c, c->argv+numkeys_idx+1, numkeys, where, 1, count, 1, 1, NULL)",
          "new_text": null,
          "old_line_content": "        genericZpopCommand(c, c->argv+numkeys_idx+1, numkeys, where, 1, count, 1, 1, NULL);",
          "new_line_content": "        /* NON-BLOCK */",
          "content_same": false
        },
        {
          "line": 2307,
          "old_api": "isnan",
          "new_api": null,
          "old_text": "isnan(*target)",
          "new_text": null,
          "old_line_content": "        if (isnan(*target)) *target = 0.0;",
          "new_line_content": "         * we maintain the convention of the result being 0.0. */",
          "content_same": false
        },
        {
          "line": 4355,
          "old_api": "zmpopGenericCommand",
          "new_api": null,
          "old_text": "zmpopGenericCommand(c, 1, 0)",
          "new_text": null,
          "old_line_content": "    zmpopGenericCommand(c, 1, 0);",
          "new_line_content": "void zmpopCommand(client *c) {",
          "content_same": false
        },
        {
          "line": 4360,
          "old_api": "zmpopGenericCommand",
          "new_api": null,
          "old_text": "zmpopGenericCommand(c, 2, 1)",
          "new_text": null,
          "old_line_content": "    zmpopGenericCommand(c, 2, 1);",
          "new_line_content": "void bzmpopCommand(client *c) {",
          "content_same": false
        },
        {
          "line": 2314,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Unknown ZUNION/INTER aggregate type\")",
          "new_text": null,
          "old_line_content": "        serverPanic(\"Unknown ZUNION/INTER aggregate type\");",
          "new_line_content": "        /* safety net */",
          "content_same": false
        },
        {
          "line": 270,
          "old_api": "sdscmp",
          "new_api": null,
          "old_text": "sdscmp(x->level[i].forward->ele,ele)",
          "new_text": null,
          "old_line_content": "                     sdscmp(x->level[i].forward->ele,ele) < 0)))",
          "new_line_content": "                    (x->level[i].forward->score == curscore &&",
          "content_same": false
        },
        {
          "line": 2323,
          "old_api": "dictGetIterator",
          "new_api": null,
          "old_text": "dictGetIterator(d)",
          "new_text": null,
          "old_line_content": "    di = dictGetIterator(d);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2325,
          "old_api": "dictNext",
          "new_api": null,
          "old_text": "dictNext(di)",
          "new_text": null,
          "old_line_content": "    while((de = dictNext(di)) != NULL) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 280,
          "old_api": "sdscmp",
          "new_api": null,
          "old_text": "sdscmp(x->ele,ele)",
          "new_text": null,
          "old_line_content": "    serverAssert(x && curscore == x->score && sdscmp(x->ele,ele) == 0);",
          "new_line_content": "    x = x->level[0].forward;",
          "content_same": false
        },
        {
          "line": 2329,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(ele)",
          "new_text": null,
          "old_line_content": "            (*totallen) += sdslen(ele);",
          "new_line_content": "        if (totallen)",
          "content_same": false
        },
        {
          "line": 2332,
          "old_api": "dictReleaseIterator",
          "new_api": null,
          "old_text": "dictReleaseIterator(di)",
          "new_text": null,
          "old_line_content": "    dictReleaseIterator(di);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 294,
          "old_api": "zslDeleteNode",
          "new_api": null,
          "old_text": "zslDeleteNode(zsl, x, update)",
          "new_text": null,
          "old_line_content": "    zslDeleteNode(zsl, x, update);",
          "new_line_content": "     * one at a different place. */",
          "content_same": false
        },
        {
          "line": 299,
          "old_api": "zslFreeNode",
          "new_api": null,
          "old_text": "zslFreeNode(x)",
          "new_text": null,
          "old_line_content": "    zslFreeNode(x);",
          "new_line_content": "    x->ele = NULL;",
          "content_same": false
        },
        {
          "line": 2359,
          "old_api": "qsort",
          "new_api": null,
          "old_text": "qsort(src+1,setnum-1,sizeof(zsetopsrc),zuiCompareByRevCardinality)",
          "new_text": null,
          "old_line_content": "    qsort(src+1,setnum-1,sizeof(zsetopsrc),zuiCompareByRevCardinality);",
          "new_line_content": "     * duplicated elements ASAP. */",
          "content_same": false
        },
        {
          "line": 2361,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(&zval, 0, sizeof(zval))",
          "new_text": null,
          "old_line_content": "    memset(&zval, 0, sizeof(zval));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 320,
          "old_api": "zslValueGteMin",
          "new_api": null,
          "old_text": "zslValueGteMin(x->score,range)",
          "new_text": null,
          "old_line_content": "    if (x == NULL || !zslValueGteMin(x->score,range))",
          "new_line_content": "    x = zsl->tail;",
          "content_same": false
        },
        {
          "line": 323,
          "old_api": "zslValueLteMax",
          "new_api": null,
          "old_text": "zslValueLteMax(x->score,range)",
          "new_text": null,
          "old_line_content": "    if (x == NULL || !zslValueLteMax(x->score,range))",
          "new_line_content": "    x = zsl->header->level[0].forward;",
          "content_same": false
        },
        {
          "line": 2374,
          "old_api": "zuiFind",
          "new_api": null,
          "old_text": "zuiFind(&src[j],&zval,&value)",
          "new_text": null,
          "old_line_content": "                zuiFind(&src[j],&zval,&value)) {",
          "new_line_content": "            if (src[j].subject == src[0].subject ||",
          "content_same": false
        },
        {
          "line": 2381,
          "old_api": "zuiNewSdsFromValue",
          "new_api": null,
          "old_text": "zuiNewSdsFromValue(&zval)",
          "new_text": null,
          "old_line_content": "            tmp = zuiNewSdsFromValue(&zval);",
          "new_line_content": "        if (!exists) {",
          "content_same": false
        },
        {
          "line": 335,
          "old_api": "zslIsInRange",
          "new_api": null,
          "old_text": "zslIsInRange(zsl,range)",
          "new_text": null,
          "old_line_content": "    if (!zslIsInRange(zsl,range)) return NULL;",
          "new_line_content": "    /* If everything is out of range, return early. */",
          "content_same": false
        },
        {
          "line": 2388,
          "old_api": "zuiClearIterator",
          "new_api": null,
          "old_text": "zuiClearIterator(&src[0])",
          "new_text": null,
          "old_line_content": "    zuiClearIterator(&src[0]);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 341,
          "old_api": "zslValueGteMin",
          "new_api": null,
          "old_text": "zslValueGteMin(x->level[i].forward->score,range)",
          "new_text": null,
          "old_line_content": "            !zslValueGteMin(x->level[i].forward->score,range))",
          "new_line_content": "        while (x->level[i].forward &&",
          "content_same": false
        },
        {
          "line": 347,
          "old_api": "serverAssert",
          "new_api": null,
          "old_text": "serverAssert(x != NULL)",
          "new_text": null,
          "old_line_content": "    serverAssert(x != NULL);",
          "new_line_content": "    x = x->level[0].forward;",
          "content_same": false
        },
        {
          "line": 350,
          "old_api": "zslValueLteMax",
          "new_api": null,
          "old_text": "zslValueLteMax(x->score,range)",
          "new_text": null,
          "old_line_content": "    if (!zslValueLteMax(x->score,range)) return NULL;",
          "new_line_content": "    /* Check if score <= max. */",
          "content_same": false
        },
        {
          "line": 361,
          "old_api": "zslIsInRange",
          "new_api": null,
          "old_text": "zslIsInRange(zsl,range)",
          "new_text": null,
          "old_line_content": "    if (!zslIsInRange(zsl,range)) return NULL;",
          "new_line_content": "    /* If everything is out of range, return early. */",
          "content_same": false
        },
        {
          "line": 367,
          "old_api": "zslValueLteMax",
          "new_api": null,
          "old_text": "zslValueLteMax(x->level[i].forward->score,range)",
          "new_text": null,
          "old_line_content": "            zslValueLteMax(x->level[i].forward->score,range))",
          "new_line_content": "        while (x->level[i].forward &&",
          "content_same": false
        },
        {
          "line": 2415,
          "old_api": "zuiLength",
          "new_api": null,
          "old_text": "zuiLength(&src[j])",
          "new_text": null,
          "old_line_content": "        if (zuiLength(&src[j]) == 0) continue;",
          "new_line_content": "    for (j = 0; j < setnum; j++) {",
          "content_same": false
        },
        {
          "line": 2417,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(&zval, 0, sizeof(zval))",
          "new_text": null,
          "old_line_content": "        memset(&zval, 0, sizeof(zval));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 372,
          "old_api": "serverAssert",
          "new_api": null,
          "old_text": "serverAssert(x != NULL)",
          "new_text": null,
          "old_line_content": "    serverAssert(x != NULL);",
          "new_line_content": "    /* This is an inner range, so this node cannot be NULL. */",
          "content_same": false
        },
        {
          "line": 2421,
          "old_api": "zuiNewSdsFromValue",
          "new_api": null,
          "old_text": "zuiNewSdsFromValue(&zval)",
          "new_text": null,
          "old_line_content": "                tmp = zuiNewSdsFromValue(&zval);",
          "new_line_content": "            if (j == 0) {",
          "content_same": false
        },
        {
          "line": 375,
          "old_api": "zslValueGteMin",
          "new_api": null,
          "old_text": "zslValueGteMin(x->score,range)",
          "new_text": null,
          "old_line_content": "    if (!zslValueGteMin(x->score,range)) return NULL;",
          "new_line_content": "    /* Check if score >= min. */",
          "content_same": false
        },
        {
          "line": 2426,
          "old_api": "zuiSdsFromValue",
          "new_api": null,
          "old_text": "zuiSdsFromValue(&zval)",
          "new_text": null,
          "old_line_content": "                tmp = zuiSdsFromValue(&zval);",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 2436,
          "old_api": "zuiClearIterator",
          "new_api": null,
          "old_text": "zuiClearIterator(&src[j])",
          "new_text": null,
          "old_line_content": "        zuiClearIterator(&src[j]);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 392,
          "old_api": "zslValueGteMin",
          "new_api": null,
          "old_text": "zslValueGteMin(x->level[i].forward->score, range)",
          "new_text": null,
          "old_line_content": "            !zslValueGteMin(x->level[i].forward->score, range))",
          "new_line_content": "        while (x->level[i].forward &&",
          "content_same": false
        },
        {
          "line": 2442,
          "old_api": "dictResize",
          "new_api": null,
          "old_text": "dictResize(dstzset->dict)",
          "new_text": null,
          "old_line_content": "    if (htNeedsResize(dstzset->dict)) dictResize(dstzset->dict);",
          "new_line_content": "    /* Resize dict if needed after removing multiple elements */",
          "content_same": false
        },
        {
          "line": 2446,
          "old_api": "zsetDictGetMaxElementLength",
          "new_api": null,
          "old_text": "zsetDictGetMaxElementLength(dstzset->dict, totelelen)",
          "new_text": null,
          "old_line_content": "    *maxelelen = zsetDictGetMaxElementLength(dstzset->dict, totelelen);",
          "new_line_content": "     * we have to iterate through all elements to find the max one after. */",
          "content_same": false
        },
        {
          "line": 401,
          "old_api": "zslValueLteMax",
          "new_api": null,
          "old_text": "zslValueLteMax(x->score, range)",
          "new_text": null,
          "old_line_content": "    while (x && zslValueLteMax(x->score, range)) {",
          "new_line_content": "    /* Delete nodes while in range. */",
          "content_same": false
        },
        {
          "line": 403,
          "old_api": "zslDeleteNode",
          "new_api": null,
          "old_text": "zslDeleteNode(zsl,x,update)",
          "new_text": null,
          "old_line_content": "        zslDeleteNode(zsl,x,update);",
          "new_line_content": "        zskiplistNode *next = x->level[0].forward;",
          "content_same": false
        },
        {
          "line": 421,
          "old_api": "zslLexValueGteMin",
          "new_api": null,
          "old_text": "zslLexValueGteMin(x->level[i].forward->ele,range)",
          "new_text": null,
          "old_line_content": "            !zslLexValueGteMin(x->level[i].forward->ele,range))",
          "new_line_content": "        while (x->level[i].forward &&",
          "content_same": false
        },
        {
          "line": 2473,
          "old_api": "zuiLength",
          "new_api": null,
          "old_text": "zuiLength(&src[0])",
          "new_text": null,
          "old_line_content": "        algo_one_work += zuiLength(&src[0]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 430,
          "old_api": "zslLexValueLteMax",
          "new_api": null,
          "old_text": "zslLexValueLteMax(x->ele,range)",
          "new_text": null,
          "old_line_content": "    while (x && zslLexValueLteMax(x->ele,range)) {",
          "new_line_content": "    /* Delete nodes while in range. */",
          "content_same": false
        },
        {
          "line": 432,
          "old_api": "zslDeleteNode",
          "new_api": null,
          "old_text": "zslDeleteNode(zsl,x,update)",
          "new_text": null,
          "old_line_content": "        zslDeleteNode(zsl,x,update);",
          "new_line_content": "        zskiplistNode *next = x->level[0].forward;",
          "content_same": false
        },
        {
          "line": 2485,
          "old_api": "zuiLength",
          "new_api": null,
          "old_text": "zuiLength(&src[0])",
          "new_text": null,
          "old_line_content": "    if (zuiLength(&src[0]) > 0) {",
          "new_line_content": "    /* Skip everything if the smallest input is empty. */",
          "content_same": false
        },
        {
          "line": 2488,
          "old_api": "zdiffAlgorithm1",
          "new_api": null,
          "old_text": "zdiffAlgorithm1(src, setnum, dstzset, maxelelen, totelelen)",
          "new_text": null,
          "old_line_content": "            zdiffAlgorithm1(src, setnum, dstzset, maxelelen, totelelen);",
          "new_line_content": "        if (diff_algo == 1) {",
          "content_same": false
        },
        {
          "line": 2490,
          "old_api": "zdiffAlgorithm2",
          "new_api": null,
          "old_text": "zdiffAlgorithm2(src, setnum, dstzset, maxelelen, totelelen)",
          "new_text": null,
          "old_line_content": "            zdiffAlgorithm2(src, setnum, dstzset, maxelelen, totelelen);",
          "new_line_content": "        } else if (diff_algo == 2) {",
          "content_same": false
        },
        {
          "line": 2492,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Unknown algorithm\")",
          "new_text": null,
          "old_line_content": "            serverPanic(\"Unknown algorithm\");",
          "new_line_content": "        } else if (diff_algo != 0) {",
          "content_same": false
        },
        {
          "line": 461,
          "old_api": "zslDeleteNode",
          "new_api": null,
          "old_text": "zslDeleteNode(zsl,x,update)",
          "new_text": null,
          "old_line_content": "        zslDeleteNode(zsl,x,update);",
          "new_line_content": "        zskiplistNode *next = x->level[0].forward;",
          "content_same": false
        },
        {
          "line": 485,
          "old_api": "sdscmp",
          "new_api": null,
          "old_text": "sdscmp(x->level[i].forward->ele,ele)",
          "new_text": null,
          "old_line_content": "                sdscmp(x->level[i].forward->ele,ele) <= 0))) {",
          "new_line_content": "                (x->level[i].forward->score == score &&",
          "content_same": false
        },
        {
          "line": 2536,
          "old_api": "getLongFromObjectOrReply",
          "new_api": null,
          "old_text": "getLongFromObjectOrReply(c, c->argv[numkeysIndex], &setnum, NULL)",
          "new_text": null,
          "old_line_content": "    if ((getLongFromObjectOrReply(c, c->argv[numkeysIndex], &setnum, NULL) != C_OK))",
          "new_line_content": "    /* expect setnum input keys to be given */",
          "content_same": false
        },
        {
          "line": 491,
          "old_api": "sdscmp",
          "new_api": null,
          "old_text": "sdscmp(x->ele,ele)",
          "new_text": null,
          "old_line_content": "        if (x->ele && x->score == score && sdscmp(x->ele,ele) == 0) {",
          "new_line_content": "        /* x might be equal to zsl->header, so test if obj is non-NULL */",
          "content_same": false
        },
        {
          "line": 2540,
          "old_api": "addReplyErrorFormat",
          "new_api": null,
          "old_text": "addReplyErrorFormat(c,\n            \"at least 1 input key is needed for '%s' command\", c->cmd->fullname)",
          "new_text": null,
          "old_line_content": "        addReplyErrorFormat(c,",
          "new_line_content": "    if (setnum < 1) {",
          "content_same": false
        },
        {
          "line": 2547,
          "old_api": "addReplyErrorObject",
          "new_api": null,
          "old_text": "addReplyErrorObject(c,shared.syntaxerr)",
          "new_text": null,
          "old_line_content": "        addReplyErrorObject(c,shared.syntaxerr);",
          "new_line_content": "    if (setnum > (c->argc-(numkeysIndex+1))) {",
          "content_same": false
        },
        {
          "line": 2552,
          "old_api": "zcalloc",
          "new_api": null,
          "old_text": "zcalloc(sizeof(zsetopsrc) * setnum)",
          "new_text": null,
          "old_line_content": "    src = zcalloc(sizeof(zsetopsrc) * setnum);",
          "new_line_content": "    /* read keys to be used for input */",
          "content_same": false
        },
        {
          "line": 2554,
          "old_api": "lookupKeyRead",
          "new_api": null,
          "old_text": "lookupKeyRead(c->db, c->argv[j])",
          "new_text": null,
          "old_line_content": "        robj *obj = lookupKeyRead(c->db, c->argv[j]);",
          "new_line_content": "    for (i = 0, j = numkeysIndex+1; i < setnum; i++, j++) {",
          "content_same": false
        },
        {
          "line": 2557,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(src)",
          "new_text": null,
          "old_line_content": "                zfree(src);",
          "new_line_content": "            if (obj->type != OBJ_ZSET && obj->type != OBJ_SET) {",
          "content_same": false
        },
        {
          "line": 531,
          "old_api": "strtod",
          "new_api": null,
          "old_text": "strtod((char*)min->ptr+1,&eptr)",
          "new_text": null,
          "old_line_content": "            spec->min = strtod((char*)min->ptr+1,&eptr);",
          "new_line_content": "        if (((char*)min->ptr)[0] == '(') {",
          "content_same": false
        },
        {
          "line": 2580,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[j]->ptr,\"weights\")",
          "new_text": null,
          "old_line_content": "                !strcasecmp(c->argv[j]->ptr,\"weights\"))",
          "new_line_content": "                remaining >= (setnum + 1) &&",
          "content_same": false
        },
        {
          "line": 535,
          "old_api": "strtod",
          "new_api": null,
          "old_text": "strtod((char*)min->ptr,&eptr)",
          "new_text": null,
          "old_line_content": "            spec->min = strtod((char*)min->ptr,&eptr);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 2584,
          "old_api": "getDoubleFromObjectOrReply",
          "new_api": null,
          "old_text": "getDoubleFromObjectOrReply(c,c->argv[j],&src[i].weight,\n                            \"weight value is not a float\")",
          "new_text": null,
          "old_line_content": "                    if (getDoubleFromObjectOrReply(c,c->argv[j],&src[i].weight,",
          "new_line_content": "                for (i = 0; i < setnum; i++, j++, remaining--) {",
          "content_same": false
        },
        {
          "line": 2587,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(src)",
          "new_text": null,
          "old_line_content": "                        zfree(src);",
          "new_line_content": "                    {",
          "content_same": false
        },
        {
          "line": 543,
          "old_api": "strtod",
          "new_api": null,
          "old_text": "strtod((char*)max->ptr+1,&eptr)",
          "new_text": null,
          "old_line_content": "            spec->max = strtod((char*)max->ptr+1,&eptr);",
          "new_line_content": "        if (((char*)max->ptr)[0] == '(') {",
          "content_same": false
        },
        {
          "line": 2593,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[j]->ptr,\"aggregate\")",
          "new_text": null,
          "old_line_content": "                       !strcasecmp(c->argv[j]->ptr,\"aggregate\"))",
          "new_line_content": "                       remaining >= 2 &&",
          "content_same": false
        },
        {
          "line": 547,
          "old_api": "strtod",
          "new_api": null,
          "old_text": "strtod((char*)max->ptr,&eptr)",
          "new_text": null,
          "old_line_content": "            spec->max = strtod((char*)max->ptr,&eptr);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 2596,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[j]->ptr,\"sum\")",
          "new_text": null,
          "old_line_content": "                if (!strcasecmp(c->argv[j]->ptr,\"sum\")) {",
          "new_line_content": "                j++; remaining--;",
          "content_same": false
        },
        {
          "line": 2598,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[j]->ptr,\"min\")",
          "new_text": null,
          "old_line_content": "                } else if (!strcasecmp(c->argv[j]->ptr,\"min\")) {",
          "new_line_content": "                    aggregate = REDIS_AGGR_SUM;",
          "content_same": false
        },
        {
          "line": 2600,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[j]->ptr,\"max\")",
          "new_text": null,
          "old_line_content": "                } else if (!strcasecmp(c->argv[j]->ptr,\"max\")) {",
          "new_line_content": "                    aggregate = REDIS_AGGR_MIN;",
          "content_same": false
        },
        {
          "line": 2603,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(src)",
          "new_text": null,
          "old_line_content": "                    zfree(src);",
          "new_line_content": "                } else {",
          "content_same": false
        },
        {
          "line": 2610,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[j]->ptr,\"withscores\")",
          "new_text": null,
          "old_line_content": "                       !strcasecmp(c->argv[j]->ptr,\"withscores\"))",
          "new_line_content": "                       !dstkey && !cardinality_only &&",
          "content_same": false
        },
        {
          "line": 2615,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[j]->ptr, \"limit\")",
          "new_text": null,
          "old_line_content": "                       !strcasecmp(c->argv[j]->ptr, \"limit\"))",
          "new_line_content": "            } else if (cardinality_only && remaining >= 2 &&",
          "content_same": false
        },
        {
          "line": 2618,
          "old_api": "getPositiveLongFromObjectOrReply",
          "new_api": null,
          "old_text": "getPositiveLongFromObjectOrReply(c, c->argv[j], &limit,\n                                                     \"LIMIT can't be negative\")",
          "new_text": null,
          "old_line_content": "                if (getPositiveLongFromObjectOrReply(c, c->argv[j], &limit,",
          "new_line_content": "                j++; remaining--;",
          "content_same": false
        },
        {
          "line": 2621,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(src)",
          "new_text": null,
          "old_line_content": "                    zfree(src);",
          "new_line_content": "                {",
          "content_same": false
        },
        {
          "line": 2626,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(src)",
          "new_text": null,
          "old_line_content": "                zfree(src);",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 586,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(c)",
          "new_text": null,
          "old_line_content": "        *dest = sdsnewlen(c+1,sdslen(c)-1);",
          "new_line_content": "        *ex = 1;",
          "content_same": false
        },
        {
          "line": 2636,
          "old_api": "qsort",
          "new_api": null,
          "old_text": "qsort(src,setnum,sizeof(zsetopsrc),zuiCompareByCardinality)",
          "new_text": null,
          "old_line_content": "        qsort(src,setnum,sizeof(zsetopsrc),zuiCompareByCardinality);",
          "new_line_content": "        * algorithm's performance */",
          "content_same": false
        },
        {
          "line": 590,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(c)",
          "new_text": null,
          "old_line_content": "        *dest = sdsnewlen(c+1,sdslen(c)-1);",
          "new_line_content": "        *ex = 0;",
          "content_same": false
        },
        {
          "line": 2639,
          "old_api": "createZsetObject",
          "new_api": null,
          "old_text": "createZsetObject()",
          "new_text": null,
          "old_line_content": "    dstobj = createZsetObject();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2641,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(&zval, 0, sizeof(zval))",
          "new_text": null,
          "old_line_content": "    memset(&zval, 0, sizeof(zval));",
          "new_line_content": "    dstzset = dstobj->ptr;",
          "content_same": false
        },
        {
          "line": 2645,
          "old_api": "zuiLength",
          "new_api": null,
          "old_text": "zuiLength(&src[0])",
          "new_text": null,
          "old_line_content": "        if (zuiLength(&src[0]) > 0) {",
          "new_line_content": "        /* Skip everything if the smallest input is empty. */",
          "content_same": false
        },
        {
          "line": 2648,
          "old_api": "zuiInitIterator",
          "new_api": null,
          "old_text": "zuiInitIterator(&src[0])",
          "new_text": null,
          "old_line_content": "            zuiInitIterator(&src[0]);",
          "new_line_content": "             * by size, all src[i > 0] are non-empty too. */",
          "content_same": false
        },
        {
          "line": 601,
          "old_api": "sdsfree",
          "new_api": null,
          "old_text": "sdsfree(spec->min)",
          "new_text": null,
          "old_line_content": "        spec->min != shared.maxstring) sdsfree(spec->min);",
          "new_line_content": "    if (spec->min != shared.minstring &&",
          "content_same": false
        },
        {
          "line": 603,
          "old_api": "sdsfree",
          "new_api": null,
          "old_text": "sdsfree(spec->max)",
          "new_text": null,
          "old_line_content": "        spec->max != shared.maxstring) sdsfree(spec->max);",
          "new_line_content": "    if (spec->max != shared.minstring &&",
          "content_same": false
        },
        {
          "line": 2653,
          "old_api": "isnan",
          "new_api": null,
          "old_text": "isnan(score)",
          "new_text": null,
          "old_line_content": "                if (isnan(score)) score = 0;",
          "new_line_content": "                score = src[0].weight * zval.score;",
          "content_same": false
        },
        {
          "line": 2660,
          "old_api": "zunionInterAggregate",
          "new_api": null,
          "old_text": "zunionInterAggregate(&score,value,aggregate)",
          "new_text": null,
          "old_line_content": "                        zunionInterAggregate(&score,value,aggregate);",
          "new_line_content": "                        value = zval.score*src[j].weight;",
          "content_same": false
        },
        {
          "line": 2663,
          "old_api": "zunionInterAggregate",
          "new_api": null,
          "old_text": "zunionInterAggregate(&score,value,aggregate)",
          "new_text": null,
          "old_line_content": "                        zunionInterAggregate(&score,value,aggregate);",
          "new_line_content": "                        value *= src[j].weight;",
          "content_same": false
        },
        {
          "line": 618,
          "old_api": "zslParseLexRangeItem",
          "new_api": null,
          "old_text": "zslParseLexRangeItem(min, &spec->min, &spec->minex)",
          "new_text": null,
          "old_line_content": "    if (zslParseLexRangeItem(min, &spec->min, &spec->minex) == C_ERR ||",
          "new_line_content": "    spec->min = spec->max = NULL;",
          "content_same": false
        },
        {
          "line": 2676,
          "old_api": "zuiDiscardDirtyValue",
          "new_api": null,
          "old_text": "zuiDiscardDirtyValue(&zval)",
          "new_text": null,
          "old_line_content": "                        zuiDiscardDirtyValue(&zval);",
          "new_line_content": "                        /* Cleanup before we break the zuiNext loop. */",
          "content_same": false
        },
        {
          "line": 2680,
          "old_api": "zuiNewSdsFromValue",
          "new_api": null,
          "old_text": "zuiNewSdsFromValue(&zval)",
          "new_text": null,
          "old_line_content": "                    tmp = zuiNewSdsFromValue(&zval);",
          "new_line_content": "                } else if (j == setnum) {",
          "content_same": false
        },
        {
          "line": 634,
          "old_api": "sdscmp",
          "new_api": null,
          "old_text": "sdscmp(a,b)",
          "new_text": null,
          "old_line_content": "    return sdscmp(a,b);",
          "new_line_content": "    if (a == shared.maxstring || b == shared.minstring) return 1;",
          "content_same": false
        },
        {
          "line": 639,
          "old_api": "sdscmplex",
          "new_api": null,
          "old_text": "sdscmplex(value,spec->min)",
          "new_text": null,
          "old_line_content": "        (sdscmplex(value,spec->min) > 0) :",
          "new_line_content": "    return spec->minex ?",
          "content_same": false
        },
        {
          "line": 2687,
          "old_api": "zuiClearIterator",
          "new_api": null,
          "old_text": "zuiClearIterator(&src[0])",
          "new_text": null,
          "old_line_content": "            zuiClearIterator(&src[0]);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 2690,
          "old_api": "dictCreate",
          "new_api": null,
          "old_text": "dictCreate(&setAccumulatorDictType)",
          "new_text": null,
          "old_line_content": "        dict *accumulator = dictCreate(&setAccumulatorDictType);",
          "new_line_content": "    } else if (op == SET_OP_UNION) {",
          "content_same": false
        },
        {
          "line": 645,
          "old_api": "sdscmplex",
          "new_api": null,
          "old_text": "sdscmplex(value,spec->max)",
          "new_text": null,
          "old_line_content": "        (sdscmplex(value,spec->max) < 0) :",
          "new_line_content": "    return spec->maxex ?",
          "content_same": false
        },
        {
          "line": 2698,
          "old_api": "zuiLength",
          "new_api": null,
          "old_text": "zuiLength(&src[setnum-1])",
          "new_text": null,
          "old_line_content": "            dictExpand(accumulator,zuiLength(&src[setnum-1]));",
          "new_line_content": "             * Resize the dictionary ASAP to avoid useless rehashing. */",
          "content_same": false
        },
        {
          "line": 654,
          "old_api": "sdscmplex",
          "new_api": null,
          "old_text": "sdscmplex(range->min,range->max)",
          "new_text": null,
          "old_line_content": "    int cmp = sdscmplex(range->min,range->max);",
          "new_line_content": "    /* Test for ranges that will always be empty. */",
          "content_same": false
        },
        {
          "line": 2704,
          "old_api": "zuiLength",
          "new_api": null,
          "old_text": "zuiLength(&src[i])",
          "new_text": null,
          "old_line_content": "            if (zuiLength(&src[i]) == 0) continue;",
          "new_line_content": "        for (i = 0; i < setnum; i++) {",
          "content_same": false
        },
        {
          "line": 658,
          "old_api": "zslLexValueGteMin",
          "new_api": null,
          "old_text": "zslLexValueGteMin(x->ele,range)",
          "new_text": null,
          "old_line_content": "    if (x == NULL || !zslLexValueGteMin(x->ele,range))",
          "new_line_content": "    x = zsl->tail;",
          "content_same": false
        },
        {
          "line": 2706,
          "old_api": "zuiInitIterator",
          "new_api": null,
          "old_text": "zuiInitIterator(&src[i])",
          "new_text": null,
          "old_line_content": "            zuiInitIterator(&src[i]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 661,
          "old_api": "zslLexValueLteMax",
          "new_api": null,
          "old_text": "zslLexValueLteMax(x->ele,range)",
          "new_text": null,
          "old_line_content": "    if (x == NULL || !zslLexValueLteMax(x->ele,range))",
          "new_line_content": "    x = zsl->header->level[0].forward;",
          "content_same": false
        },
        {
          "line": 2710,
          "old_api": "isnan",
          "new_api": null,
          "old_text": "isnan(score)",
          "new_text": null,
          "old_line_content": "                if (isnan(score)) score = 0;",
          "new_line_content": "                score = src[i].weight * zval.score;",
          "content_same": false
        },
        {
          "line": 2713,
          "old_api": "zuiSdsFromValue",
          "new_api": null,
          "old_text": "zuiSdsFromValue(&zval)",
          "new_text": null,
          "old_line_content": "                de = dictAddRaw(accumulator,zuiSdsFromValue(&zval),&existing);",
          "new_line_content": "                /* Search for this element in the accumulating dictionary. */",
          "content_same": false
        },
        {
          "line": 2716,
          "old_api": "zuiNewSdsFromValue",
          "new_api": null,
          "old_text": "zuiNewSdsFromValue(&zval)",
          "new_text": null,
          "old_line_content": "                    tmp = zuiNewSdsFromValue(&zval);",
          "new_line_content": "                if (!existing) {",
          "content_same": false
        },
        {
          "line": 2720,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(tmp)",
          "new_text": null,
          "old_line_content": "                     totelelen += sdslen(tmp);",
          "new_line_content": "                     * at the end. */",
          "content_same": false
        },
        {
          "line": 673,
          "old_api": "zslIsInLexRange",
          "new_api": null,
          "old_text": "zslIsInLexRange(zsl,range)",
          "new_text": null,
          "old_line_content": "    if (!zslIsInLexRange(zsl,range)) return NULL;",
          "new_line_content": "    /* If everything is out of range, return early. */",
          "content_same": false
        },
        {
          "line": 2723,
          "old_api": "dictSetKey",
          "new_api": null,
          "old_text": "dictSetKey(accumulator, de, tmp)",
          "new_text": null,
          "old_line_content": "                    dictSetKey(accumulator, de, tmp);",
          "new_line_content": "                    /* Update the element with its initial score. */",
          "content_same": false
        },
        {
          "line": 679,
          "old_api": "zslLexValueGteMin",
          "new_api": null,
          "old_text": "zslLexValueGteMin(x->level[i].forward->ele,range)",
          "new_text": null,
          "old_line_content": "            !zslLexValueGteMin(x->level[i].forward->ele,range))",
          "new_line_content": "        while (x->level[i].forward &&",
          "content_same": false
        },
        {
          "line": 2732,
          "old_api": "zunionInterAggregate",
          "new_api": null,
          "old_text": "zunionInterAggregate(&existing->v.d,score,aggregate)",
          "new_text": null,
          "old_line_content": "                    zunionInterAggregate(&existing->v.d,score,aggregate);",
          "new_line_content": "                     * compared to using the getDouble/setDouble API. */",
          "content_same": false
        },
        {
          "line": 685,
          "old_api": "serverAssert",
          "new_api": null,
          "old_text": "serverAssert(x != NULL)",
          "new_text": null,
          "old_line_content": "    serverAssert(x != NULL);",
          "new_line_content": "    x = x->level[0].forward;",
          "content_same": false
        },
        {
          "line": 2735,
          "old_api": "zuiClearIterator",
          "new_api": null,
          "old_text": "zuiClearIterator(&src[i])",
          "new_text": null,
          "old_line_content": "            zuiClearIterator(&src[i]);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 688,
          "old_api": "zslLexValueLteMax",
          "new_api": null,
          "old_text": "zslLexValueLteMax(x->ele,range)",
          "new_text": null,
          "old_line_content": "    if (!zslLexValueLteMax(x->ele,range)) return NULL;",
          "new_line_content": "    /* Check if score <= max. */",
          "content_same": false
        },
        {
          "line": 2739,
          "old_api": "dictGetIterator",
          "new_api": null,
          "old_text": "dictGetIterator(accumulator)",
          "new_text": null,
          "old_line_content": "        di = dictGetIterator(accumulator);",
          "new_line_content": "        /* Step 2: convert the dictionary into the final sorted set. */",
          "content_same": false
        },
        {
          "line": 2744,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(accumulator)",
          "new_text": null,
          "old_line_content": "        dictExpand(dstzset->dict,dictSize(accumulator));",
          "new_line_content": "         * right size, in order to save rehashing time. */",
          "content_same": false
        },
        {
          "line": 2746,
          "old_api": "dictNext",
          "new_api": null,
          "old_text": "dictNext(di)",
          "new_text": null,
          "old_line_content": "        while((de = dictNext(di)) != NULL) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 699,
          "old_api": "zslIsInLexRange",
          "new_api": null,
          "old_text": "zslIsInLexRange(zsl,range)",
          "new_text": null,
          "old_line_content": "    if (!zslIsInLexRange(zsl,range)) return NULL;",
          "new_line_content": "    /* If everything is out of range, return early. */",
          "content_same": false
        },
        {
          "line": 2752,
          "old_api": "dictReleaseIterator",
          "new_api": null,
          "old_text": "dictReleaseIterator(di)",
          "new_text": null,
          "old_line_content": "        dictReleaseIterator(di);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 705,
          "old_api": "zslLexValueLteMax",
          "new_api": null,
          "old_text": "zslLexValueLteMax(x->level[i].forward->ele,range)",
          "new_text": null,
          "old_line_content": "            zslLexValueLteMax(x->level[i].forward->ele,range))",
          "new_line_content": "        while (x->level[i].forward &&",
          "content_same": false
        },
        {
          "line": 2755,
          "old_api": "zdiff",
          "new_api": null,
          "old_text": "zdiff(src, setnum, dstzset, &maxelelen, &totelelen)",
          "new_text": null,
          "old_line_content": "        zdiff(src, setnum, dstzset, &maxelelen, &totelelen);",
          "new_line_content": "    } else if (op == SET_OP_DIFF) {",
          "content_same": false
        },
        {
          "line": 2757,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Unknown operator\")",
          "new_text": null,
          "old_line_content": "        serverPanic(\"Unknown operator\");",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 710,
          "old_api": "serverAssert",
          "new_api": null,
          "old_text": "serverAssert(x != NULL)",
          "new_text": null,
          "old_line_content": "    serverAssert(x != NULL);",
          "new_line_content": "    /* This is an inner range, so this node cannot be NULL. */",
          "content_same": false
        },
        {
          "line": 713,
          "old_api": "zslLexValueGteMin",
          "new_api": null,
          "old_text": "zslLexValueGteMin(x->ele,range)",
          "new_text": null,
          "old_line_content": "    if (!zslLexValueGteMin(x->ele,range)) return NULL;",
          "new_line_content": "    /* Check if score >= min. */",
          "content_same": false
        },
        {
          "line": 2762,
          "old_api": "zsetConvertToListpackIfNeeded",
          "new_api": null,
          "old_text": "zsetConvertToListpackIfNeeded(dstobj, maxelelen, totelelen)",
          "new_text": null,
          "old_line_content": "            zsetConvertToListpackIfNeeded(dstobj, maxelelen, totelelen);",
          "new_line_content": "        if (dstzset->zsl->length) {",
          "content_same": false
        },
        {
          "line": 2771,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c, shared.czero)",
          "new_text": null,
          "old_line_content": "            addReply(c, shared.czero);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 725,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(buf,vstr,vlen)",
          "new_text": null,
          "old_line_content": "    memcpy(buf,vstr,vlen);",
          "new_line_content": "        vlen = sizeof(buf);",
          "content_same": false
        },
        {
          "line": 727,
          "old_api": "strtod",
          "new_api": null,
          "old_text": "strtod(buf,NULL)",
          "new_text": null,
          "old_line_content": "    return strtod(buf,NULL);",
          "new_line_content": "    buf[vlen] = '\\0';",
          "content_same": false
        },
        {
          "line": 2779,
          "old_api": "addReplyLongLong",
          "new_api": null,
          "old_text": "addReplyLongLong(c, cardinality)",
          "new_text": null,
          "old_line_content": "        addReplyLongLong(c, cardinality);",
          "new_line_content": "    } else if (cardinality_only) {",
          "content_same": false
        },
        {
          "line": 736,
          "old_api": "serverAssert",
          "new_api": null,
          "old_text": "serverAssert(sptr != NULL)",
          "new_text": null,
          "old_line_content": "    serverAssert(sptr != NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 740,
          "old_api": "zzlStrtod",
          "new_api": null,
          "old_text": "zzlStrtod(vstr,vlen)",
          "new_text": null,
          "old_line_content": "        score = zzlStrtod(vstr,vlen);",
          "new_line_content": "    if (vstr) {",
          "content_same": false
        },
        {
          "line": 2788,
          "old_api": "addReplyArrayLen",
          "new_api": null,
          "old_text": "addReplyArrayLen(c, length*2)",
          "new_text": null,
          "old_line_content": "            addReplyArrayLen(c, length*2);",
          "new_line_content": "        if (withscores && c->resp == 2)",
          "content_same": false
        },
        {
          "line": 2790,
          "old_api": "addReplyArrayLen",
          "new_api": null,
          "old_text": "addReplyArrayLen(c, length)",
          "new_text": null,
          "old_line_content": "            addReplyArrayLen(c, length);",
          "new_line_content": "        else",
          "content_same": false
        },
        {
          "line": 2793,
          "old_api": "addReplyArrayLen",
          "new_api": null,
          "old_text": "addReplyArrayLen(c,2)",
          "new_text": null,
          "old_line_content": "            if (withscores && c->resp > 2) addReplyArrayLen(c,2);",
          "new_line_content": "        while (zn != NULL) {",
          "content_same": false
        },
        {
          "line": 2799,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(dstobj)",
          "new_text": null,
          "old_line_content": "    decrRefCount(dstobj);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 754,
          "old_api": "serverAssert",
          "new_api": null,
          "old_text": "serverAssert(sptr != NULL)",
          "new_text": null,
          "old_line_content": "    serverAssert(sptr != NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2805,
          "old_api": "zunionInterDiffGenericCommand",
          "new_api": null,
          "old_text": "zunionInterDiffGenericCommand(c, c->argv[1], 2, SET_OP_UNION, 0)",
          "new_text": null,
          "old_line_content": "    zunionInterDiffGenericCommand(c, c->argv[1], 2, SET_OP_UNION, 0);",
          "new_line_content": "void zunionstoreCommand(client *c) {",
          "content_same": false
        },
        {
          "line": 758,
          "old_api": "sdsnewlen",
          "new_api": null,
          "old_text": "sdsnewlen((char*)vstr,vlen)",
          "new_text": null,
          "old_line_content": "        return sdsnewlen((char*)vstr,vlen);",
          "new_line_content": "    if (vstr) {",
          "content_same": false
        },
        {
          "line": 760,
          "old_api": "sdsfromlonglong",
          "new_api": null,
          "old_text": "sdsfromlonglong(vlong)",
          "new_text": null,
          "old_line_content": "        return sdsfromlonglong(vlong);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 2810,
          "old_api": "zunionInterDiffGenericCommand",
          "new_api": null,
          "old_text": "zunionInterDiffGenericCommand(c, c->argv[1], 2, SET_OP_INTER, 0)",
          "new_text": null,
          "old_line_content": "    zunionInterDiffGenericCommand(c, c->argv[1], 2, SET_OP_INTER, 0);",
          "new_line_content": "void zinterstoreCommand(client *c) {",
          "content_same": false
        },
        {
          "line": 2815,
          "old_api": "zunionInterDiffGenericCommand",
          "new_api": null,
          "old_text": "zunionInterDiffGenericCommand(c, c->argv[1], 2, SET_OP_DIFF, 0)",
          "new_text": null,
          "old_line_content": "    zunionInterDiffGenericCommand(c, c->argv[1], 2, SET_OP_DIFF, 0);",
          "new_line_content": "void zdiffstoreCommand(client *c) {",
          "content_same": false
        },
        {
          "line": 772,
          "old_api": "lpGetValue",
          "new_api": null,
          "old_text": "lpGetValue(eptr,&vlen,&vlong)",
          "new_text": null,
          "old_line_content": "    vstr = lpGetValue(eptr,&vlen,&vlong);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2820,
          "old_api": "zunionInterDiffGenericCommand",
          "new_api": null,
          "old_text": "zunionInterDiffGenericCommand(c, NULL, 1, SET_OP_UNION, 0)",
          "new_text": null,
          "old_line_content": "    zunionInterDiffGenericCommand(c, NULL, 1, SET_OP_UNION, 0);",
          "new_line_content": "void zunionCommand(client *c) {",
          "content_same": false
        },
        {
          "line": 775,
          "old_api": "ll2string",
          "new_api": null,
          "old_text": "ll2string((char*)vbuf,sizeof(vbuf),vlong)",
          "new_text": null,
          "old_line_content": "        vlen = ll2string((char*)vbuf,sizeof(vbuf),vlong);",
          "new_line_content": "        /* Store string representation of long long in buf. */",
          "content_same": false
        },
        {
          "line": 2825,
          "old_api": "zunionInterDiffGenericCommand",
          "new_api": null,
          "old_text": "zunionInterDiffGenericCommand(c, NULL, 1, SET_OP_INTER, 0)",
          "new_text": null,
          "old_line_content": "    zunionInterDiffGenericCommand(c, NULL, 1, SET_OP_INTER, 0);",
          "new_line_content": "void zinterCommand(client *c) {",
          "content_same": false
        },
        {
          "line": 780,
          "old_api": "memcmp",
          "new_api": null,
          "old_text": "memcmp(vstr,cstr,minlen)",
          "new_text": null,
          "old_line_content": "    cmp = memcmp(vstr,cstr,minlen);",
          "new_line_content": "    minlen = (vlen < clen) ? vlen : clen;",
          "content_same": false
        },
        {
          "line": 2830,
          "old_api": "zunionInterDiffGenericCommand",
          "new_api": null,
          "old_text": "zunionInterDiffGenericCommand(c, NULL, 1, SET_OP_INTER, 1)",
          "new_text": null,
          "old_line_content": "    zunionInterDiffGenericCommand(c, NULL, 1, SET_OP_INTER, 1);",
          "new_line_content": "void zinterCardCommand(client *c) {",
          "content_same": false
        },
        {
          "line": 786,
          "old_api": "lpLength",
          "new_api": null,
          "old_text": "lpLength(zl)",
          "new_text": null,
          "old_line_content": "    return lpLength(zl)/2;",
          "new_line_content": "unsigned int zzlLength(unsigned char *zl) {",
          "content_same": false
        },
        {
          "line": 2835,
          "old_api": "zunionInterDiffGenericCommand",
          "new_api": null,
          "old_text": "zunionInterDiffGenericCommand(c, NULL, 1, SET_OP_DIFF, 0)",
          "new_text": null,
          "old_line_content": "    zunionInterDiffGenericCommand(c, NULL, 1, SET_OP_DIFF, 0);",
          "new_line_content": "void zdiffCommand(client *c) {",
          "content_same": false
        },
        {
          "line": 793,
          "old_api": "serverAssert",
          "new_api": null,
          "old_text": "serverAssert(*eptr != NULL && *sptr != NULL)",
          "new_text": null,
          "old_line_content": "    serverAssert(*eptr != NULL && *sptr != NULL);",
          "new_line_content": "    unsigned char *_eptr, *_sptr;",
          "content_same": false
        },
        {
          "line": 795,
          "old_api": "lpNext",
          "new_api": null,
          "old_text": "lpNext(zl,*sptr)",
          "new_text": null,
          "old_line_content": "    _eptr = lpNext(zl,*sptr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 797,
          "old_api": "lpNext",
          "new_api": null,
          "old_text": "lpNext(zl,_eptr)",
          "new_text": null,
          "old_line_content": "        _sptr = lpNext(zl,_eptr);",
          "new_line_content": "    if (_eptr != NULL) {",
          "content_same": false
        },
        {
          "line": 812,
          "old_api": "serverAssert",
          "new_api": null,
          "old_text": "serverAssert(*eptr != NULL && *sptr != NULL)",
          "new_text": null,
          "old_line_content": "    serverAssert(*eptr != NULL && *sptr != NULL);",
          "new_line_content": "    unsigned char *_eptr, *_sptr;",
          "content_same": false
        },
        {
          "line": 814,
          "old_api": "lpPrev",
          "new_api": null,
          "old_text": "lpPrev(zl,*eptr)",
          "new_text": null,
          "old_line_content": "    _sptr = lpPrev(zl,*eptr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 816,
          "old_api": "lpPrev",
          "new_api": null,
          "old_text": "lpPrev(zl,_sptr)",
          "new_text": null,
          "old_line_content": "        _eptr = lpPrev(zl,_sptr);",
          "new_line_content": "    if (_sptr != NULL) {",
          "content_same": false
        },
        {
          "line": 838,
          "old_api": "lpSeek",
          "new_api": null,
          "old_text": "lpSeek(zl,-1)",
          "new_text": null,
          "old_line_content": "    p = lpSeek(zl,-1); /* Last score. */",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 840,
          "old_api": "zzlGetScore",
          "new_api": null,
          "old_text": "zzlGetScore(p)",
          "new_text": null,
          "old_line_content": "    score = zzlGetScore(p);",
          "new_line_content": "    if (p == NULL) return 0; /* Empty sorted set */",
          "content_same": false
        },
        {
          "line": 2891,
          "old_api": "addReplyArrayLen",
          "new_api": null,
          "old_text": "addReplyArrayLen(handler->client, length)",
          "new_text": null,
          "old_line_content": "        addReplyArrayLen(handler->client, length);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 844,
          "old_api": "lpSeek",
          "new_api": null,
          "old_text": "lpSeek(zl,1)",
          "new_text": null,
          "old_line_content": "    p = lpSeek(zl,1); /* First score. */",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2895,
          "old_api": "addReplyDeferredLen",
          "new_api": null,
          "old_text": "addReplyDeferredLen(handler->client)",
          "new_text": null,
          "old_line_content": "    handler->userdata = addReplyDeferredLen(handler->client);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2902,
          "old_api": "addReplyArrayLen",
          "new_api": null,
          "old_text": "addReplyArrayLen(handler->client, 2)",
          "new_text": null,
          "old_line_content": "        addReplyArrayLen(handler->client, 2);",
          "new_line_content": "    if (handler->should_emit_array_length) {",
          "content_same": false
        },
        {
          "line": 856,
          "old_api": "lpSeek",
          "new_api": null,
          "old_text": "lpSeek(zl,0)",
          "new_text": null,
          "old_line_content": "    unsigned char *eptr = lpSeek(zl,0), *sptr;",
          "new_line_content": "unsigned char *zzlFirstInRange(unsigned char *zl, zrangespec *range) {",
          "content_same": false
        },
        {
          "line": 2905,
          "old_api": "addReplyBulkCBuffer",
          "new_api": null,
          "old_text": "addReplyBulkCBuffer(handler->client, value, value_length_in_bytes)",
          "new_text": null,
          "old_line_content": "    addReplyBulkCBuffer(handler->client, value, value_length_in_bytes);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 860,
          "old_api": "zzlIsInRange",
          "new_api": null,
          "old_text": "zzlIsInRange(zl,range)",
          "new_text": null,
          "old_line_content": "    if (!zzlIsInRange(zl,range)) return NULL;",
          "new_line_content": "    /* If everything is out of range, return early. */",
          "content_same": false
        },
        {
          "line": 2908,
          "old_api": "addReplyDouble",
          "new_api": null,
          "old_text": "addReplyDouble(handler->client, score)",
          "new_text": null,
          "old_line_content": "        addReplyDouble(handler->client, score);",
          "new_line_content": "    if (handler->withscores) {",
          "content_same": false
        },
        {
          "line": 863,
          "old_api": "lpNext",
          "new_api": null,
          "old_text": "lpNext(zl,eptr)",
          "new_text": null,
          "old_line_content": "        sptr = lpNext(zl,eptr);",
          "new_line_content": "    while (eptr != NULL) {",
          "content_same": false
        },
        {
          "line": 866,
          "old_api": "zzlGetScore",
          "new_api": null,
          "old_text": "zzlGetScore(sptr)",
          "new_text": null,
          "old_line_content": "        score = zzlGetScore(sptr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2916,
          "old_api": "addReplyArrayLen",
          "new_api": null,
          "old_text": "addReplyArrayLen(handler->client, 2)",
          "new_text": null,
          "old_line_content": "        addReplyArrayLen(handler->client, 2);",
          "new_line_content": "    if (handler->should_emit_array_length) {",
          "content_same": false
        },
        {
          "line": 869,
          "old_api": "zslValueLteMax",
          "new_api": null,
          "old_text": "zslValueLteMax(score,range)",
          "new_text": null,
          "old_line_content": "            if (zslValueLteMax(score,range))",
          "new_line_content": "            /* Check if score <= max. */",
          "content_same": false
        },
        {
          "line": 2919,
          "old_api": "addReplyBulkLongLong",
          "new_api": null,
          "old_text": "addReplyBulkLongLong(handler->client, value)",
          "new_text": null,
          "old_line_content": "    addReplyBulkLongLong(handler->client, value);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2922,
          "old_api": "addReplyDouble",
          "new_api": null,
          "old_text": "addReplyDouble(handler->client, score)",
          "new_text": null,
          "old_line_content": "        addReplyDouble(handler->client, score);",
          "new_line_content": "    if (handler->withscores) {",
          "content_same": false
        },
        {
          "line": 875,
          "old_api": "lpNext",
          "new_api": null,
          "old_text": "lpNext(zl,sptr)",
          "new_text": null,
          "old_line_content": "        eptr = lpNext(zl,sptr);",
          "new_line_content": "        /* Move to next element. */",
          "content_same": false
        },
        {
          "line": 884,
          "old_api": "lpSeek",
          "new_api": null,
          "old_text": "lpSeek(zl,-2)",
          "new_text": null,
          "old_line_content": "    unsigned char *eptr = lpSeek(zl,-2), *sptr;",
          "new_line_content": "unsigned char *zzlLastInRange(unsigned char *zl, zrangespec *range) {",
          "content_same": false
        },
        {
          "line": 888,
          "old_api": "zzlIsInRange",
          "new_api": null,
          "old_text": "zzlIsInRange(zl,range)",
          "new_text": null,
          "old_line_content": "    if (!zzlIsInRange(zl,range)) return NULL;",
          "new_line_content": "    /* If everything is out of range, return early. */",
          "content_same": false
        },
        {
          "line": 891,
          "old_api": "lpNext",
          "new_api": null,
          "old_text": "lpNext(zl,eptr)",
          "new_text": null,
          "old_line_content": "        sptr = lpNext(zl,eptr);",
          "new_line_content": "    while (eptr != NULL) {",
          "content_same": false
        },
        {
          "line": 2939,
          "old_api": "setDeferredArrayLen",
          "new_api": null,
          "old_text": "setDeferredArrayLen(handler->client, handler->userdata, result_count)",
          "new_text": null,
          "old_line_content": "    setDeferredArrayLen(handler->client, handler->userdata, result_count);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 894,
          "old_api": "zzlGetScore",
          "new_api": null,
          "old_text": "zzlGetScore(sptr)",
          "new_text": null,
          "old_line_content": "        score = zzlGetScore(sptr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 897,
          "old_api": "zslValueGteMin",
          "new_api": null,
          "old_text": "zslValueGteMin(score,range)",
          "new_text": null,
          "old_line_content": "            if (zslValueGteMin(score,range))",
          "new_line_content": "            /* Check if score >= min. */",
          "content_same": false
        },
        {
          "line": 2945,
          "old_api": "UNUSED",
          "new_api": null,
          "old_text": "UNUSED(length)",
          "new_text": null,
          "old_line_content": "    UNUSED(length);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 904,
          "old_api": "lpPrev",
          "new_api": null,
          "old_text": "lpPrev(zl,eptr)",
          "new_text": null,
          "old_line_content": "        sptr = lpPrev(zl,eptr);",
          "new_line_content": "         * When this returns NULL, we know there also is no element. */",
          "content_same": false
        },
        {
          "line": 906,
          "old_api": "lpPrev",
          "new_api": null,
          "old_text": "lpPrev(zl,sptr)",
          "new_text": null,
          "old_line_content": "            serverAssert((eptr = lpPrev(zl,sptr)) != NULL);",
          "new_line_content": "        if (sptr != NULL)",
          "content_same": false
        },
        {
          "line": 2954,
          "old_api": "sdsnewlen",
          "new_api": null,
          "old_text": "sdsnewlen(value, value_length_in_bytes)",
          "new_text": null,
          "old_line_content": "    sds ele = sdsnewlen(value, value_length_in_bytes);",
          "new_line_content": "    int retflags = 0;",
          "content_same": false
        },
        {
          "line": 915,
          "old_api": "lpGetObject",
          "new_api": null,
          "old_text": "lpGetObject(p)",
          "new_text": null,
          "old_line_content": "    sds value = lpGetObject(p);",
          "new_line_content": "int zzlLexValueGteMin(unsigned char *p, zlexrangespec *spec) {",
          "content_same": false
        },
        {
          "line": 2965,
          "old_api": "sdsfromlonglong",
          "new_api": null,
          "old_text": "sdsfromlonglong(value)",
          "new_text": null,
          "old_line_content": "    sds ele = sdsfromlonglong(value);",
          "new_line_content": "    int retflags = 0;",
          "content_same": false
        },
        {
          "line": 922,
          "old_api": "lpGetObject",
          "new_api": null,
          "old_text": "lpGetObject(p)",
          "new_text": null,
          "old_line_content": "    sds value = lpGetObject(p);",
          "new_line_content": "int zzlLexValueLteMax(unsigned char *p, zlexrangespec *spec) {",
          "content_same": false
        },
        {
          "line": 2974,
          "old_api": "setKey",
          "new_api": null,
          "old_text": "setKey(handler->client, handler->client->db, handler->dstkey, handler->dstobj, 0)",
          "new_text": null,
          "old_line_content": "        setKey(handler->client, handler->client->db, handler->dstkey, handler->dstobj, 0);",
          "new_line_content": "    if (result_count) {",
          "content_same": false
        },
        {
          "line": 2979,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(handler->client, shared.czero)",
          "new_text": null,
          "old_line_content": "        addReply(handler->client, shared.czero);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 934,
          "old_api": "sdscmplex",
          "new_api": null,
          "old_text": "sdscmplex(range->min,range->max)",
          "new_text": null,
          "old_line_content": "    int cmp = sdscmplex(range->min,range->max);",
          "new_line_content": "    /* Test for ranges that will always be empty. */",
          "content_same": false
        },
        {
          "line": 938,
          "old_api": "lpSeek",
          "new_api": null,
          "old_text": "lpSeek(zl,-2)",
          "new_text": null,
          "old_line_content": "    p = lpSeek(zl,-2); /* Last element. */",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2986,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(handler->dstobj)",
          "new_text": null,
          "old_line_content": "    decrRefCount(handler->dstobj);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 940,
          "old_api": "zzlLexValueGteMin",
          "new_api": null,
          "old_text": "zzlLexValueGteMin(p,range)",
          "new_text": null,
          "old_line_content": "    if (!zzlLexValueGteMin(p,range))",
          "new_line_content": "    if (p == NULL) return 0;",
          "content_same": false
        },
        {
          "line": 943,
          "old_api": "lpSeek",
          "new_api": null,
          "old_text": "lpSeek(zl,0)",
          "new_text": null,
          "old_line_content": "    p = lpSeek(zl,0); /* First element. */",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2993,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(handler, 0, sizeof(*handler))",
          "new_text": null,
          "old_line_content": "    memset(handler, 0, sizeof(*handler));",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 954,
          "old_api": "lpSeek",
          "new_api": null,
          "old_text": "lpSeek(zl,0)",
          "new_text": null,
          "old_line_content": "    unsigned char *eptr = lpSeek(zl,0), *sptr;",
          "new_line_content": "unsigned char *zzlFirstInLexRange(unsigned char *zl, zlexrangespec *range) {",
          "content_same": false
        },
        {
          "line": 957,
          "old_api": "zzlIsInLexRange",
          "new_api": null,
          "old_text": "zzlIsInLexRange(zl,range)",
          "new_text": null,
          "old_line_content": "    if (!zzlIsInLexRange(zl,range)) return NULL;",
          "new_line_content": "    /* If everything is out of range, return early. */",
          "content_same": false
        },
        {
          "line": 960,
          "old_api": "zzlLexValueGteMin",
          "new_api": null,
          "old_text": "zzlLexValueGteMin(eptr,range)",
          "new_text": null,
          "old_line_content": "        if (zzlLexValueGteMin(eptr,range)) {",
          "new_line_content": "    while (eptr != NULL) {",
          "content_same": false
        },
        {
          "line": 962,
          "old_api": "zzlLexValueLteMax",
          "new_api": null,
          "old_text": "zzlLexValueLteMax(eptr,range)",
          "new_text": null,
          "old_line_content": "            if (zzlLexValueLteMax(eptr,range))",
          "new_line_content": "            /* Check if score <= max. */",
          "content_same": false
        },
        {
          "line": 968,
          "old_api": "lpNext",
          "new_api": null,
          "old_text": "lpNext(zl,eptr)",
          "new_text": null,
          "old_line_content": "        sptr = lpNext(zl,eptr); /* This element score. Skip it. */",
          "new_line_content": "        /* Move to next element. */",
          "content_same": false
        },
        {
          "line": 979,
          "old_api": "lpSeek",
          "new_api": null,
          "old_text": "lpSeek(zl,-2)",
          "new_text": null,
          "old_line_content": "    unsigned char *eptr = lpSeek(zl,-2), *sptr;",
          "new_line_content": "unsigned char *zzlLastInLexRange(unsigned char *zl, zlexrangespec *range) {",
          "content_same": false
        },
        {
          "line": 982,
          "old_api": "zzlIsInLexRange",
          "new_api": null,
          "old_text": "zzlIsInLexRange(zl,range)",
          "new_text": null,
          "old_line_content": "    if (!zzlIsInLexRange(zl,range)) return NULL;",
          "new_line_content": "    /* If everything is out of range, return early. */",
          "content_same": false
        },
        {
          "line": 985,
          "old_api": "zzlLexValueLteMax",
          "new_api": null,
          "old_text": "zzlLexValueLteMax(eptr,range)",
          "new_text": null,
          "old_line_content": "        if (zzlLexValueLteMax(eptr,range)) {",
          "new_line_content": "    while (eptr != NULL) {",
          "content_same": false
        },
        {
          "line": 987,
          "old_api": "zzlLexValueGteMin",
          "new_api": null,
          "old_text": "zzlLexValueGteMin(eptr,range)",
          "new_text": null,
          "old_line_content": "            if (zzlLexValueGteMin(eptr,range))",
          "new_line_content": "            /* Check if score >= min. */",
          "content_same": false
        },
        {
          "line": 3035,
          "old_api": "zsetLength",
          "new_api": null,
          "old_text": "zsetLength(zobj)",
          "new_text": null,
          "old_line_content": "    llen = zsetLength(zobj);",
          "new_line_content": "    /* Sanitize indexes. */",
          "content_same": false
        },
        {
          "line": 994,
          "old_api": "lpPrev",
          "new_api": null,
          "old_text": "lpPrev(zl,eptr)",
          "new_text": null,
          "old_line_content": "        sptr = lpPrev(zl,eptr);",
          "new_line_content": "         * When this returns NULL, we know there also is no element. */",
          "content_same": false
        },
        {
          "line": 996,
          "old_api": "lpPrev",
          "new_api": null,
          "old_text": "lpPrev(zl,sptr)",
          "new_text": null,
          "old_line_content": "            serverAssert((eptr = lpPrev(zl,sptr)) != NULL);",
          "new_line_content": "        if (sptr != NULL)",
          "content_same": false
        },
        {
          "line": 3044,
          "old_api": "beginResultEmission",
          "new_api": null,
          "old_text": "handler->beginResultEmission(handler, 0)",
          "new_text": null,
          "old_line_content": "        handler->beginResultEmission(handler, 0);",
          "new_line_content": "    if (start > end || start >= llen) {",
          "content_same": false
        },
        {
          "line": 3052,
          "old_api": "beginResultEmission",
          "new_api": null,
          "old_text": "handler->beginResultEmission(handler, rangelen)",
          "new_text": null,
          "old_line_content": "    handler->beginResultEmission(handler, rangelen);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1007,
          "old_api": "lpFirst",
          "new_api": null,
          "old_text": "lpFirst(lp)",
          "new_text": null,
          "old_line_content": "    if ((eptr = lpFirst(lp)) == NULL) return NULL;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1010,
          "old_api": "lpNext",
          "new_api": null,
          "old_text": "lpNext(lp,eptr)",
          "new_text": null,
          "old_line_content": "        sptr = lpNext(lp,eptr);",
          "new_line_content": "    if (eptr) {",
          "content_same": false
        },
        {
          "line": 1014,
          "old_api": "zzlGetScore",
          "new_api": null,
          "old_text": "zzlGetScore(sptr)",
          "new_text": null,
          "old_line_content": "        if (score != NULL) *score = zzlGetScore(sptr);",
          "new_line_content": "        /* Matching element, pull out score. */",
          "content_same": false
        },
        {
          "line": 3062,
          "old_api": "lpSeek",
          "new_api": null,
          "old_text": "lpSeek(zl,-2-(2*start))",
          "new_text": null,
          "old_line_content": "            eptr = lpSeek(zl,-2-(2*start));",
          "new_line_content": "        if (reverse)",
          "content_same": false
        },
        {
          "line": 3064,
          "old_api": "lpSeek",
          "new_api": null,
          "old_text": "lpSeek(zl,2*start)",
          "new_text": null,
          "old_line_content": "            eptr = lpSeek(zl,2*start);",
          "new_line_content": "        else",
          "content_same": false
        },
        {
          "line": 3066,
          "old_api": "serverAssertWithInfo",
          "new_api": null,
          "old_text": "serverAssertWithInfo(c,zobj,eptr != NULL)",
          "new_text": null,
          "old_line_content": "        serverAssertWithInfo(c,zobj,eptr != NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3070,
          "old_api": "serverAssertWithInfo",
          "new_api": null,
          "old_text": "serverAssertWithInfo(c,zobj,eptr != NULL && sptr != NULL)",
          "new_text": null,
          "old_line_content": "            serverAssertWithInfo(c,zobj,eptr != NULL && sptr != NULL);",
          "new_line_content": "        while (rangelen--) {",
          "content_same": false
        },
        {
          "line": 1024,
          "old_api": "lpDeleteRangeWithEntry",
          "new_api": null,
          "old_text": "lpDeleteRangeWithEntry(zl,&eptr,2)",
          "new_text": null,
          "old_line_content": "    return lpDeleteRangeWithEntry(zl,&eptr,2);",
          "new_line_content": "unsigned char *zzlDelete(unsigned char *zl, unsigned char *eptr) {",
          "content_same": false
        },
        {
          "line": 3074,
          "old_api": "zzlGetScore",
          "new_api": null,
          "old_text": "zzlGetScore(sptr)",
          "new_text": null,
          "old_line_content": "                score = zzlGetScore(sptr);",
          "new_line_content": "            if (withscores) /* don't bother to extract the score if it's gonna be ignored. */",
          "content_same": false
        },
        {
          "line": 3077,
          "old_api": "emitResultFromLongLong",
          "new_api": null,
          "old_text": "handler->emitResultFromLongLong(handler, vlong, score)",
          "new_text": null,
          "old_line_content": "                handler->emitResultFromLongLong(handler, vlong, score);",
          "new_line_content": "            if (vstr == NULL) {",
          "content_same": false
        },
        {
          "line": 3079,
          "old_api": "emitResultFromCBuffer",
          "new_api": null,
          "old_text": "handler->emitResultFromCBuffer(handler, vstr, vlen, score)",
          "new_text": null,
          "old_line_content": "                handler->emitResultFromCBuffer(handler, vstr, vlen, score);",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 1032,
          "old_api": "d2string",
          "new_api": null,
          "old_text": "d2string(scorebuf,sizeof(scorebuf),score)",
          "new_text": null,
          "old_line_content": "    scorelen = d2string(scorebuf,sizeof(scorebuf),score);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1034,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(ele)",
          "new_text": null,
          "old_line_content": "        zl = lpAppend(zl,(unsigned char*)ele,sdslen(ele));",
          "new_line_content": "    if (eptr == NULL) {",
          "content_same": false
        },
        {
          "line": 3083,
          "old_api": "zzlPrev",
          "new_api": null,
          "old_text": "zzlPrev(zl,&eptr,&sptr)",
          "new_text": null,
          "old_line_content": "                zzlPrev(zl,&eptr,&sptr);",
          "new_line_content": "            if (reverse)",
          "content_same": false
        },
        {
          "line": 3085,
          "old_api": "zzlNext",
          "new_api": null,
          "old_text": "zzlNext(zl,&eptr,&sptr)",
          "new_text": null,
          "old_line_content": "                zzlNext(zl,&eptr,&sptr);",
          "new_line_content": "            else",
          "content_same": false
        },
        {
          "line": 1038,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(ele)",
          "new_text": null,
          "old_line_content": "        zl = lpInsertString(zl,(unsigned char*)ele,sdslen(ele),eptr,LP_BEFORE,&sptr);",
          "new_line_content": "        /* Insert member before the element 'eptr'. */",
          "content_same": false
        },
        {
          "line": 1041,
          "old_api": "lpInsertString",
          "new_api": null,
          "old_text": "lpInsertString(zl,(unsigned char*)scorebuf,scorelen,sptr,LP_AFTER,NULL)",
          "new_text": null,
          "old_line_content": "        zl = lpInsertString(zl,(unsigned char*)scorebuf,scorelen,sptr,LP_AFTER,NULL);",
          "new_line_content": "        /* Insert score after the member. */",
          "content_same": false
        },
        {
          "line": 1049,
          "old_api": "lpSeek",
          "new_api": null,
          "old_text": "lpSeek(zl,0)",
          "new_text": null,
          "old_line_content": "    unsigned char *eptr = lpSeek(zl,0), *sptr;",
          "new_line_content": "unsigned char *zzlInsert(unsigned char *zl, sds ele, double score) {",
          "content_same": false
        },
        {
          "line": 3097,
          "old_api": "zslGetElementByRank",
          "new_api": null,
          "old_text": "zslGetElementByRank(zsl,llen-start)",
          "new_text": null,
          "old_line_content": "                ln = zslGetElementByRank(zsl,llen-start);",
          "new_line_content": "            if (start > 0)",
          "content_same": false
        },
        {
          "line": 1053,
          "old_api": "lpNext",
          "new_api": null,
          "old_text": "lpNext(zl,eptr)",
          "new_text": null,
          "old_line_content": "        sptr = lpNext(zl,eptr);",
          "new_line_content": "    while (eptr != NULL) {",
          "content_same": false
        },
        {
          "line": 3101,
          "old_api": "zslGetElementByRank",
          "new_api": null,
          "old_text": "zslGetElementByRank(zsl,start+1)",
          "new_text": null,
          "old_line_content": "                ln = zslGetElementByRank(zsl,start+1);",
          "new_line_content": "            if (start > 0)",
          "content_same": false
        },
        {
          "line": 3105,
          "old_api": "serverAssertWithInfo",
          "new_api": null,
          "old_text": "serverAssertWithInfo(c,zobj,ln != NULL)",
          "new_text": null,
          "old_line_content": "            serverAssertWithInfo(c,zobj,ln != NULL);",
          "new_line_content": "        while(rangelen--) {",
          "content_same": false
        },
        {
          "line": 3107,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(ele)",
          "new_text": null,
          "old_line_content": "            handler->emitResultFromCBuffer(handler, ele, sdslen(ele), ln->score);",
          "new_line_content": "            sds ele = ln->ele;",
          "content_same": false
        },
        {
          "line": 1061,
          "old_api": "zzlInsertAt",
          "new_api": null,
          "old_text": "zzlInsertAt(zl,eptr,ele,score)",
          "new_text": null,
          "old_line_content": "            zl = zzlInsertAt(zl,eptr,ele,score);",
          "new_line_content": "             * maintain ordering. */",
          "content_same": false
        },
        {
          "line": 3111,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Unknown sorted set encoding\")",
          "new_text": null,
          "old_line_content": "        serverPanic(\"Unknown sorted set encoding\");",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 1065,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(ele)",
          "new_text": null,
          "old_line_content": "            if (zzlCompareElements(eptr,(unsigned char*)ele,sdslen(ele)) > 0) {",
          "new_line_content": "            /* Ensure lexicographical ordering for elements. */",
          "content_same": false
        },
        {
          "line": 3114,
          "old_api": "finalizeResultEmission",
          "new_api": null,
          "old_text": "handler->finalizeResultEmission(handler, result_cardinality)",
          "new_text": null,
          "old_line_content": "    handler->finalizeResultEmission(handler, result_cardinality);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1072,
          "old_api": "lpNext",
          "new_api": null,
          "old_text": "lpNext(zl,sptr)",
          "new_text": null,
          "old_line_content": "        eptr = lpNext(zl,sptr);",
          "new_line_content": "        /* Move to next element. */",
          "content_same": false
        },
        {
          "line": 3121,
          "old_api": "zrangeResultHandlerInit",
          "new_api": null,
          "old_text": "zrangeResultHandlerInit(&handler, c, ZRANGE_CONSUMER_TYPE_INTERNAL)",
          "new_text": null,
          "old_line_content": "    zrangeResultHandlerInit(&handler, c, ZRANGE_CONSUMER_TYPE_INTERNAL);",
          "new_line_content": "    zrange_result_handler handler;",
          "content_same": false
        },
        {
          "line": 1077,
          "old_api": "zzlInsertAt",
          "new_api": null,
          "old_text": "zzlInsertAt(zl,NULL,ele,score)",
          "new_text": null,
          "old_line_content": "        zl = zzlInsertAt(zl,NULL,ele,score);",
          "new_line_content": "    if (eptr == NULL)",
          "content_same": false
        },
        {
          "line": 3129,
          "old_api": "zrangeResultHandlerInit",
          "new_api": null,
          "old_text": "zrangeResultHandlerInit(&handler, c, ZRANGE_CONSUMER_TYPE_CLIENT)",
          "new_text": null,
          "old_line_content": "    zrangeResultHandlerInit(&handler, c, ZRANGE_CONSUMER_TYPE_CLIENT);",
          "new_line_content": "    zrange_result_handler handler;",
          "content_same": false
        },
        {
          "line": 1088,
          "old_api": "zzlFirstInRange",
          "new_api": null,
          "old_text": "zzlFirstInRange(zl,range)",
          "new_text": null,
          "old_line_content": "    eptr = zzlFirstInRange(zl,range);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3136,
          "old_api": "zrangeResultHandlerInit",
          "new_api": null,
          "old_text": "zrangeResultHandlerInit(&handler, c, ZRANGE_CONSUMER_TYPE_CLIENT)",
          "new_text": null,
          "old_line_content": "    zrangeResultHandlerInit(&handler, c, ZRANGE_CONSUMER_TYPE_CLIENT);",
          "new_line_content": "    zrange_result_handler handler;",
          "content_same": false
        },
        {
          "line": 1092,
          "old_api": "lpNext",
          "new_api": null,
          "old_text": "lpNext(zl,eptr)",
          "new_text": null,
          "old_line_content": "    while (eptr && (sptr = lpNext(zl,eptr)) != NULL) {",
          "new_line_content": "    /* When the tail of the listpack is deleted, eptr will be NULL. */",
          "content_same": false
        },
        {
          "line": 1096,
          "old_api": "lpDeleteRangeWithEntry",
          "new_api": null,
          "old_text": "lpDeleteRangeWithEntry(zl,&eptr,2)",
          "new_text": null,
          "old_line_content": "            zl = lpDeleteRangeWithEntry(zl,&eptr,2);",
          "new_line_content": "            /* Delete both the element and the score. */",
          "content_same": false
        },
        {
          "line": 3146,
          "old_api": "beginResultEmission",
          "new_api": null,
          "old_text": "handler->beginResultEmission(handler, -1)",
          "new_text": null,
          "old_line_content": "    handler->beginResultEmission(handler, -1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3149,
          "old_api": "zsetLength",
          "new_api": null,
          "old_text": "zsetLength(zobj)",
          "new_text": null,
          "old_line_content": "    if (offset > 0 && offset >= (long)zsetLength(zobj)) {",
          "new_line_content": "    /* For invalid offset, return directly. */",
          "content_same": false
        },
        {
          "line": 1114,
          "old_api": "zzlFirstInLexRange",
          "new_api": null,
          "old_text": "zzlFirstInLexRange(zl,range)",
          "new_text": null,
          "old_line_content": "    eptr = zzlFirstInLexRange(zl,range);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3163,
          "old_api": "zzlLastInRange",
          "new_api": null,
          "old_text": "zzlLastInRange(zl,range)",
          "new_text": null,
          "old_line_content": "            eptr = zzlLastInRange(zl,range);",
          "new_line_content": "        if (reverse) {",
          "content_same": false
        },
        {
          "line": 3165,
          "old_api": "zzlFirstInRange",
          "new_api": null,
          "old_text": "zzlFirstInRange(zl,range)",
          "new_text": null,
          "old_line_content": "            eptr = zzlFirstInRange(zl,range);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 1118,
          "old_api": "lpNext",
          "new_api": null,
          "old_text": "lpNext(zl,eptr)",
          "new_text": null,
          "old_line_content": "    while (eptr && (sptr = lpNext(zl,eptr)) != NULL) {",
          "new_line_content": "    /* When the tail of the listpack is deleted, eptr will be NULL. */",
          "content_same": false
        },
        {
          "line": 1121,
          "old_api": "lpDeleteRangeWithEntry",
          "new_api": null,
          "old_text": "lpDeleteRangeWithEntry(zl,&eptr,2)",
          "new_text": null,
          "old_line_content": "            zl = lpDeleteRangeWithEntry(zl,&eptr,2);",
          "new_line_content": "            /* Delete both the element and the score. */",
          "content_same": false
        },
        {
          "line": 3170,
          "old_api": "lpNext",
          "new_api": null,
          "old_text": "lpNext(zl,eptr)",
          "new_text": null,
          "old_line_content": "            sptr = lpNext(zl,eptr);",
          "new_line_content": "        if (eptr)",
          "content_same": false
        },
        {
          "line": 3176,
          "old_api": "zzlPrev",
          "new_api": null,
          "old_text": "zzlPrev(zl,&eptr,&sptr)",
          "new_text": null,
          "old_line_content": "                zzlPrev(zl,&eptr,&sptr);",
          "new_line_content": "            if (reverse) {",
          "content_same": false
        },
        {
          "line": 3178,
          "old_api": "zzlNext",
          "new_api": null,
          "old_text": "zzlNext(zl,&eptr,&sptr)",
          "new_text": null,
          "old_line_content": "                zzlNext(zl,&eptr,&sptr);",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 3183,
          "old_api": "zzlGetScore",
          "new_api": null,
          "old_text": "zzlGetScore(sptr)",
          "new_text": null,
          "old_line_content": "            double score = zzlGetScore(sptr);",
          "new_line_content": "        while (eptr && limit--) {",
          "content_same": false
        },
        {
          "line": 1138,
          "old_api": "lpDeleteRange",
          "new_api": null,
          "old_text": "lpDeleteRange(zl,2*(start-1),2*num)",
          "new_text": null,
          "old_line_content": "    zl = lpDeleteRange(zl,2*(start-1),2*num);",
          "new_line_content": "    if (deleted) *deleted = num;",
          "content_same": false
        },
        {
          "line": 3187,
          "old_api": "zslValueGteMin",
          "new_api": null,
          "old_text": "zslValueGteMin(score,range)",
          "new_text": null,
          "old_line_content": "                if (!zslValueGteMin(score,range)) break;",
          "new_line_content": "            if (reverse) {",
          "content_same": false
        },
        {
          "line": 3189,
          "old_api": "zslValueLteMax",
          "new_api": null,
          "old_text": "zslValueLteMax(score,range)",
          "new_text": null,
          "old_line_content": "                if (!zslValueLteMax(score,range)) break;",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 3192,
          "old_api": "lpGetValue",
          "new_api": null,
          "old_text": "lpGetValue(eptr,&vlen,&vlong)",
          "new_text": null,
          "old_line_content": "            vstr = lpGetValue(eptr,&vlen,&vlong);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3195,
          "old_api": "emitResultFromLongLong",
          "new_api": null,
          "old_text": "handler->emitResultFromLongLong(handler, vlong, score)",
          "new_text": null,
          "old_line_content": "                handler->emitResultFromLongLong(handler, vlong, score);",
          "new_line_content": "            if (vstr == NULL) {",
          "content_same": false
        },
        {
          "line": 1149,
          "old_api": "zzlLength",
          "new_api": null,
          "old_text": "zzlLength(zobj->ptr)",
          "new_text": null,
          "old_line_content": "        length = zzlLength(zobj->ptr);",
          "new_line_content": "    if (zobj->encoding == OBJ_ENCODING_LISTPACK) {",
          "content_same": false
        },
        {
          "line": 3197,
          "old_api": "emitResultFromCBuffer",
          "new_api": null,
          "old_text": "handler->emitResultFromCBuffer(handler, vstr, vlen, score)",
          "new_text": null,
          "old_line_content": "                handler->emitResultFromCBuffer(handler, vstr, vlen, score);",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 1153,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Unknown sorted set encoding\")",
          "new_text": null,
          "old_line_content": "        serverPanic(\"Unknown sorted set encoding\");",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 3202,
          "old_api": "zzlPrev",
          "new_api": null,
          "old_text": "zzlPrev(zl,&eptr,&sptr)",
          "new_text": null,
          "old_line_content": "                zzlPrev(zl,&eptr,&sptr);",
          "new_line_content": "            if (reverse) {",
          "content_same": false
        },
        {
          "line": 3204,
          "old_api": "zzlNext",
          "new_api": null,
          "old_text": "zzlNext(zl,&eptr,&sptr)",
          "new_text": null,
          "old_line_content": "                zzlNext(zl,&eptr,&sptr);",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 3214,
          "old_api": "zslLastInRange",
          "new_api": null,
          "old_text": "zslLastInRange(zsl,range)",
          "new_text": null,
          "old_line_content": "            ln = zslLastInRange(zsl,range);",
          "new_line_content": "        if (reverse) {",
          "content_same": false
        },
        {
          "line": 3216,
          "old_api": "zslFirstInRange",
          "new_api": null,
          "old_text": "zslFirstInRange(zsl,range)",
          "new_text": null,
          "old_line_content": "            ln = zslFirstInRange(zsl,range);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 1173,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Unknown target encoding\")",
          "new_text": null,
          "old_line_content": "            serverPanic(\"Unknown target encoding\");",
          "new_line_content": "        if (encoding != OBJ_ENCODING_SKIPLIST)",
          "content_same": false
        },
        {
          "line": 1175,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(*zs))",
          "new_text": null,
          "old_line_content": "        zs = zmalloc(sizeof(*zs));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1179,
          "old_api": "lpSeek",
          "new_api": null,
          "old_text": "lpSeek(zl,0)",
          "new_text": null,
          "old_line_content": "        eptr = lpSeek(zl,0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3232,
          "old_api": "zslValueGteMin",
          "new_api": null,
          "old_text": "zslValueGteMin(ln->score,range)",
          "new_text": null,
          "old_line_content": "                if (!zslValueGteMin(ln->score,range)) break;",
          "new_line_content": "            if (reverse) {",
          "content_same": false
        },
        {
          "line": 1185,
          "old_api": "zzlGetScore",
          "new_api": null,
          "old_text": "zzlGetScore(sptr)",
          "new_text": null,
          "old_line_content": "            score = zzlGetScore(sptr);",
          "new_line_content": "        while (eptr != NULL) {",
          "content_same": false
        },
        {
          "line": 3234,
          "old_api": "zslValueLteMax",
          "new_api": null,
          "old_text": "zslValueLteMax(ln->score,range)",
          "new_text": null,
          "old_line_content": "                if (!zslValueLteMax(ln->score,range)) break;",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 1188,
          "old_api": "sdsfromlonglong",
          "new_api": null,
          "old_text": "sdsfromlonglong(vlong)",
          "new_text": null,
          "old_line_content": "                ele = sdsfromlonglong(vlong);",
          "new_line_content": "            if (vstr == NULL)",
          "content_same": false
        },
        {
          "line": 1190,
          "old_api": "sdsnewlen",
          "new_api": null,
          "old_text": "sdsnewlen((char*)vstr,vlen)",
          "new_text": null,
          "old_line_content": "                ele = sdsnewlen((char*)vstr,vlen);",
          "new_line_content": "            else",
          "content_same": false
        },
        {
          "line": 3238,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(ln->ele)",
          "new_text": null,
          "old_line_content": "            handler->emitResultFromCBuffer(handler, ln->ele, sdslen(ln->ele), ln->score);",
          "new_line_content": "            rangelen++;",
          "content_same": false
        },
        {
          "line": 1192,
          "old_api": "zslInsert",
          "new_api": null,
          "old_text": "zslInsert(zs->zsl,score,ele)",
          "new_text": null,
          "old_line_content": "            node = zslInsert(zs->zsl,score,ele);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1197,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(zobj->ptr)",
          "new_text": null,
          "old_line_content": "        zfree(zobj->ptr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3248,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Unknown sorted set encoding\")",
          "new_text": null,
          "old_line_content": "        serverPanic(\"Unknown sorted set encoding\");",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 1201,
          "old_api": "lpNew",
          "new_api": null,
          "old_text": "lpNew(0)",
          "new_text": null,
          "old_line_content": "        unsigned char *zl = lpNew(0);",
          "new_line_content": "    } else if (zobj->encoding == OBJ_ENCODING_SKIPLIST) {",
          "content_same": false
        },
        {
          "line": 3251,
          "old_api": "finalizeResultEmission",
          "new_api": null,
          "old_text": "handler->finalizeResultEmission(handler, rangelen)",
          "new_text": null,
          "old_line_content": "    handler->finalizeResultEmission(handler, rangelen);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1204,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Unknown target encoding\")",
          "new_text": null,
          "old_line_content": "            serverPanic(\"Unknown target encoding\");",
          "new_line_content": "        if (encoding != OBJ_ENCODING_LISTPACK)",
          "content_same": false
        },
        {
          "line": 1209,
          "old_api": "dictRelease",
          "new_api": null,
          "old_text": "dictRelease(zs->dict)",
          "new_text": null,
          "old_line_content": "        dictRelease(zs->dict);",
          "new_line_content": "        zs = zobj->ptr;",
          "content_same": false
        },
        {
          "line": 3257,
          "old_api": "zrangeResultHandlerInit",
          "new_api": null,
          "old_text": "zrangeResultHandlerInit(&handler, c, ZRANGE_CONSUMER_TYPE_CLIENT)",
          "new_text": null,
          "old_line_content": "    zrangeResultHandlerInit(&handler, c, ZRANGE_CONSUMER_TYPE_CLIENT);",
          "new_line_content": "    zrange_result_handler handler;",
          "content_same": false
        },
        {
          "line": 1211,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(zs->zsl->header)",
          "new_text": null,
          "old_line_content": "        zfree(zs->zsl->header);",
          "new_line_content": "        node = zs->zsl->header->level[0].forward;",
          "content_same": false
        },
        {
          "line": 1215,
          "old_api": "zzlInsertAt",
          "new_api": null,
          "old_text": "zzlInsertAt(zl,NULL,node->ele,node->score)",
          "new_text": null,
          "old_line_content": "            zl = zzlInsertAt(zl,NULL,node->ele,node->score);",
          "new_line_content": "        while (node) {",
          "content_same": false
        },
        {
          "line": 3264,
          "old_api": "zrangeResultHandlerInit",
          "new_api": null,
          "old_text": "zrangeResultHandlerInit(&handler, c, ZRANGE_CONSUMER_TYPE_CLIENT)",
          "new_text": null,
          "old_line_content": "    zrangeResultHandlerInit(&handler, c, ZRANGE_CONSUMER_TYPE_CLIENT);",
          "new_line_content": "    zrange_result_handler handler;",
          "content_same": false
        },
        {
          "line": 1217,
          "old_api": "zslFreeNode",
          "new_api": null,
          "old_text": "zslFreeNode(node)",
          "new_text": null,
          "old_line_content": "            zslFreeNode(node);",
          "new_line_content": "            next = node->level[0].forward;",
          "content_same": false
        },
        {
          "line": 1221,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(zs)",
          "new_text": null,
          "old_line_content": "        zfree(zs);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1225,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Unknown sorted set encoding\")",
          "new_text": null,
          "old_line_content": "        serverPanic(\"Unknown sorted set encoding\");",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 3275,
          "old_api": "zslParseRange",
          "new_api": null,
          "old_text": "zslParseRange(c->argv[2],c->argv[3],&range)",
          "new_text": null,
          "old_line_content": "    if (zslParseRange(c->argv[2],c->argv[3],&range) != C_OK) {",
          "new_line_content": "    /* Parse the range arguments */",
          "content_same": false
        },
        {
          "line": 3281,
          "old_api": "lookupKeyReadOrReply",
          "new_api": null,
          "old_text": "lookupKeyReadOrReply(c, key, shared.czero)",
          "new_text": null,
          "old_line_content": "    if ((zobj = lookupKeyReadOrReply(c, key, shared.czero)) == NULL ||",
          "new_line_content": "    /* Lookup the sorted set */",
          "content_same": false
        },
        {
          "line": 1238,
          "old_api": "lpSafeToAdd",
          "new_api": null,
          "old_text": "lpSafeToAdd(NULL, totelelen)",
          "new_text": null,
          "old_line_content": "        lpSafeToAdd(NULL, totelelen))",
          "new_line_content": "        maxelelen <= server.zset_max_listpack_value &&",
          "content_same": false
        },
        {
          "line": 1240,
          "old_api": "zsetConvert",
          "new_api": null,
          "old_text": "zsetConvert(zobj,OBJ_ENCODING_LISTPACK)",
          "new_text": null,
          "old_line_content": "        zsetConvert(zobj,OBJ_ENCODING_LISTPACK);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 3290,
          "old_api": "zzlFirstInRange",
          "new_api": null,
          "old_text": "zzlFirstInRange(zl,&range)",
          "new_text": null,
          "old_line_content": "        eptr = zzlFirstInRange(zl,&range);",
          "new_line_content": "        /* Use the first element in range as the starting point */",
          "content_same": false
        },
        {
          "line": 3294,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c, shared.czero)",
          "new_text": null,
          "old_line_content": "            addReply(c, shared.czero);",
          "new_line_content": "        if (eptr == NULL) {",
          "content_same": false
        },
        {
          "line": 3299,
          "old_api": "lpNext",
          "new_api": null,
          "old_text": "lpNext(zl,eptr)",
          "new_text": null,
          "old_line_content": "        sptr = lpNext(zl,eptr);",
          "new_line_content": "        /* First element is in range */",
          "content_same": false
        },
        {
          "line": 1252,
          "old_api": "zzlFind",
          "new_api": null,
          "old_text": "zzlFind(zobj->ptr, member, score)",
          "new_text": null,
          "old_line_content": "        if (zzlFind(zobj->ptr, member, score) == NULL) return C_ERR;",
          "new_line_content": "    if (zobj->encoding == OBJ_ENCODING_LISTPACK) {",
          "content_same": false
        },
        {
          "line": 1255,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(zs->dict, member)",
          "new_text": null,
          "old_line_content": "        dictEntry *de = dictFind(zs->dict, member);",
          "new_line_content": "        zset *zs = zobj->ptr;",
          "content_same": false
        },
        {
          "line": 1257,
          "old_api": "dictGetVal",
          "new_api": null,
          "old_text": "dictGetVal(de)",
          "new_text": null,
          "old_line_content": "        *score = *(double*)dictGetVal(de);",
          "new_line_content": "        if (de == NULL) return C_ERR;",
          "content_same": false
        },
        {
          "line": 3305,
          "old_api": "zzlGetScore",
          "new_api": null,
          "old_text": "zzlGetScore(sptr)",
          "new_text": null,
          "old_line_content": "            score = zzlGetScore(sptr);",
          "new_line_content": "        while (eptr) {",
          "content_same": false
        },
        {
          "line": 1259,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Unknown sorted set encoding\")",
          "new_text": null,
          "old_line_content": "        serverPanic(\"Unknown sorted set encoding\");",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 3308,
          "old_api": "zslValueLteMax",
          "new_api": null,
          "old_text": "zslValueLteMax(score,&range)",
          "new_text": null,
          "old_line_content": "            if (!zslValueLteMax(score,&range)) {",
          "new_line_content": "            /* Abort when the node is no longer in range. */",
          "content_same": false
        },
        {
          "line": 3312,
          "old_api": "zzlNext",
          "new_api": null,
          "old_text": "zzlNext(zl,&eptr,&sptr)",
          "new_text": null,
          "old_line_content": "                zzlNext(zl,&eptr,&sptr);",
          "new_line_content": "                count++;",
          "content_same": false
        },
        {
          "line": 3322,
          "old_api": "zslFirstInRange",
          "new_api": null,
          "old_text": "zslFirstInRange(zsl, &range)",
          "new_text": null,
          "old_line_content": "        zn = zslFirstInRange(zsl, &range);",
          "new_line_content": "        /* Find first element in range */",
          "content_same": false
        },
        {
          "line": 3326,
          "old_api": "zslGetRank",
          "new_api": null,
          "old_text": "zslGetRank(zsl, zn->score, zn->ele)",
          "new_text": null,
          "old_line_content": "            rank = zslGetRank(zsl, zn->score, zn->ele);",
          "new_line_content": "        if (zn != NULL) {",
          "content_same": false
        },
        {
          "line": 3330,
          "old_api": "zslLastInRange",
          "new_api": null,
          "old_text": "zslLastInRange(zsl, &range)",
          "new_text": null,
          "old_line_content": "            zn = zslLastInRange(zsl, &range);",
          "new_line_content": "            /* Find last element in range */",
          "content_same": false
        },
        {
          "line": 3334,
          "old_api": "zslGetRank",
          "new_api": null,
          "old_text": "zslGetRank(zsl, zn->score, zn->ele)",
          "new_text": null,
          "old_line_content": "                rank = zslGetRank(zsl, zn->score, zn->ele);",
          "new_line_content": "            if (zn != NULL) {",
          "content_same": false
        },
        {
          "line": 3339,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Unknown sorted set encoding\")",
          "new_text": null,
          "old_line_content": "        serverPanic(\"Unknown sorted set encoding\");",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 3342,
          "old_api": "addReplyLongLong",
          "new_api": null,
          "old_text": "addReplyLongLong(c, count)",
          "new_text": null,
          "old_line_content": "    addReplyLongLong(c, count);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3352,
          "old_api": "zslParseLexRange",
          "new_api": null,
          "old_text": "zslParseLexRange(c->argv[2],c->argv[3],&range)",
          "new_text": null,
          "old_line_content": "    if (zslParseLexRange(c->argv[2],c->argv[3],&range) != C_OK) {",
          "new_line_content": "    /* Parse the range arguments */",
          "content_same": false
        },
        {
          "line": 3358,
          "old_api": "lookupKeyReadOrReply",
          "new_api": null,
          "old_text": "lookupKeyReadOrReply(c, key, shared.czero)",
          "new_text": null,
          "old_line_content": "    if ((zobj = lookupKeyReadOrReply(c, key, shared.czero)) == NULL ||",
          "new_line_content": "    /* Lookup the sorted set */",
          "content_same": false
        },
        {
          "line": 3361,
          "old_api": "zslFreeLexRange",
          "new_api": null,
          "old_text": "zslFreeLexRange(&range)",
          "new_text": null,
          "old_line_content": "        zslFreeLexRange(&range);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 1320,
          "old_api": "isnan",
          "new_api": null,
          "old_text": "isnan(score)",
          "new_text": null,
          "old_line_content": "    if (isnan(score)) {",
          "new_line_content": "    /* NaN as input is an error regardless of all the other parameters. */",
          "content_same": false
        },
        {
          "line": 3370,
          "old_api": "zzlFirstInLexRange",
          "new_api": null,
          "old_text": "zzlFirstInLexRange(zl,&range)",
          "new_text": null,
          "old_line_content": "        eptr = zzlFirstInLexRange(zl,&range);",
          "new_line_content": "        /* Use the first element in range as the starting point */",
          "content_same": false
        },
        {
          "line": 3374,
          "old_api": "zslFreeLexRange",
          "new_api": null,
          "old_text": "zslFreeLexRange(&range)",
          "new_text": null,
          "old_line_content": "            zslFreeLexRange(&range);",
          "new_line_content": "        if (eptr == NULL) {",
          "content_same": false
        },
        {
          "line": 1329,
          "old_api": "zzlFind",
          "new_api": null,
          "old_text": "zzlFind(zobj->ptr,ele,&curscore)",
          "new_text": null,
          "old_line_content": "        if ((eptr = zzlFind(zobj->ptr,ele,&curscore)) != NULL) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3380,
          "old_api": "lpNext",
          "new_api": null,
          "old_text": "lpNext(zl,eptr)",
          "new_text": null,
          "old_line_content": "        sptr = lpNext(zl,eptr);",
          "new_line_content": "        /* First element is in range */",
          "content_same": false
        },
        {
          "line": 3386,
          "old_api": "zzlLexValueLteMax",
          "new_api": null,
          "old_text": "zzlLexValueLteMax(eptr,&range)",
          "new_text": null,
          "old_line_content": "            if (!zzlLexValueLteMax(eptr,&range)) {",
          "new_line_content": "            /* Abort when the node is no longer in range. */",
          "content_same": false
        },
        {
          "line": 1339,
          "old_api": "isnan",
          "new_api": null,
          "old_text": "isnan(score)",
          "new_text": null,
          "old_line_content": "                if (isnan(score)) {",
          "new_line_content": "                score += curscore;",
          "content_same": false
        },
        {
          "line": 3390,
          "old_api": "zzlNext",
          "new_api": null,
          "old_text": "zzlNext(zl,&eptr,&sptr)",
          "new_text": null,
          "old_line_content": "                zzlNext(zl,&eptr,&sptr);",
          "new_line_content": "                count++;",
          "content_same": false
        },
        {
          "line": 3400,
          "old_api": "zslFirstInLexRange",
          "new_api": null,
          "old_text": "zslFirstInLexRange(zsl, &range)",
          "new_text": null,
          "old_line_content": "        zn = zslFirstInLexRange(zsl, &range);",
          "new_line_content": "        /* Find first element in range */",
          "content_same": false
        },
        {
          "line": 1355,
          "old_api": "zzlDelete",
          "new_api": null,
          "old_text": "zzlDelete(zobj->ptr,eptr)",
          "new_text": null,
          "old_line_content": "                zobj->ptr = zzlDelete(zobj->ptr,eptr);",
          "new_line_content": "            if (score != curscore) {",
          "content_same": false
        },
        {
          "line": 3404,
          "old_api": "zslGetRank",
          "new_api": null,
          "old_text": "zslGetRank(zsl, zn->score, zn->ele)",
          "new_text": null,
          "old_line_content": "            rank = zslGetRank(zsl, zn->score, zn->ele);",
          "new_line_content": "        if (zn != NULL) {",
          "content_same": false
        },
        {
          "line": 3408,
          "old_api": "zslLastInLexRange",
          "new_api": null,
          "old_text": "zslLastInLexRange(zsl, &range)",
          "new_text": null,
          "old_line_content": "            zn = zslLastInLexRange(zsl, &range);",
          "new_line_content": "            /* Find last element in range */",
          "content_same": false
        },
        {
          "line": 1363,
          "old_api": "zzlLength",
          "new_api": null,
          "old_text": "zzlLength(zobj->ptr)",
          "new_text": null,
          "old_line_content": "            if (zzlLength(zobj->ptr)+1 > server.zset_max_listpack_entries ||",
          "new_line_content": "             * becomes too long *before* executing zzlInsert. */",
          "content_same": false
        },
        {
          "line": 3412,
          "old_api": "zslGetRank",
          "new_api": null,
          "old_text": "zslGetRank(zsl, zn->score, zn->ele)",
          "new_text": null,
          "old_line_content": "                rank = zslGetRank(zsl, zn->score, zn->ele);",
          "new_line_content": "            if (zn != NULL) {",
          "content_same": false
        },
        {
          "line": 1367,
          "old_api": "zsetConvert",
          "new_api": null,
          "old_text": "zsetConvert(zobj,OBJ_ENCODING_SKIPLIST)",
          "new_text": null,
          "old_line_content": "                zsetConvert(zobj,OBJ_ENCODING_SKIPLIST);",
          "new_line_content": "            {",
          "content_same": false
        },
        {
          "line": 1369,
          "old_api": "zzlInsert",
          "new_api": null,
          "old_text": "zzlInsert(zobj->ptr,ele,score)",
          "new_text": null,
          "old_line_content": "                zobj->ptr = zzlInsert(zobj->ptr,ele,score);",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 3417,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Unknown sorted set encoding\")",
          "new_text": null,
          "old_line_content": "        serverPanic(\"Unknown sorted set encoding\");",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 3420,
          "old_api": "zslFreeLexRange",
          "new_api": null,
          "old_text": "zslFreeLexRange(&range)",
          "new_text": null,
          "old_line_content": "    zslFreeLexRange(&range);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3431,
          "old_api": "beginResultEmission",
          "new_api": null,
          "old_text": "handler->beginResultEmission(handler, -1)",
          "new_text": null,
          "old_line_content": "    handler->beginResultEmission(handler, -1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1387,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(zs->dict,ele)",
          "new_text": null,
          "old_line_content": "        de = dictFind(zs->dict,ele);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3442,
          "old_api": "zzlLastInLexRange",
          "new_api": null,
          "old_text": "zzlLastInLexRange(zl,range)",
          "new_text": null,
          "old_line_content": "            eptr = zzlLastInLexRange(zl,range);",
          "new_line_content": "        if (reverse) {",
          "content_same": false
        },
        {
          "line": 1395,
          "old_api": "dictGetVal",
          "new_api": null,
          "old_text": "dictGetVal(de)",
          "new_text": null,
          "old_line_content": "            curscore = *(double*)dictGetVal(de);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3444,
          "old_api": "zzlFirstInLexRange",
          "new_api": null,
          "old_text": "zzlFirstInLexRange(zl,range)",
          "new_text": null,
          "old_line_content": "            eptr = zzlFirstInLexRange(zl,range);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 1400,
          "old_api": "isnan",
          "new_api": null,
          "old_text": "isnan(score)",
          "new_text": null,
          "old_line_content": "                if (isnan(score)) {",
          "new_line_content": "                score += curscore;",
          "content_same": false
        },
        {
          "line": 3449,
          "old_api": "lpNext",
          "new_api": null,
          "old_text": "lpNext(zl,eptr)",
          "new_text": null,
          "old_line_content": "            sptr = lpNext(zl,eptr);",
          "new_line_content": "        if (eptr)",
          "content_same": false
        },
        {
          "line": 3455,
          "old_api": "zzlPrev",
          "new_api": null,
          "old_text": "zzlPrev(zl,&eptr,&sptr)",
          "new_text": null,
          "old_line_content": "                zzlPrev(zl,&eptr,&sptr);",
          "new_line_content": "            if (reverse) {",
          "content_same": false
        },
        {
          "line": 3457,
          "old_api": "zzlNext",
          "new_api": null,
          "old_text": "zzlNext(zl,&eptr,&sptr)",
          "new_text": null,
          "old_line_content": "                zzlNext(zl,&eptr,&sptr);",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 1416,
          "old_api": "zslUpdateScore",
          "new_api": null,
          "old_text": "zslUpdateScore(zs->zsl,curscore,ele,score)",
          "new_text": null,
          "old_line_content": "                znode = zslUpdateScore(zs->zsl,curscore,ele,score);",
          "new_line_content": "            if (score != curscore) {",
          "content_same": false
        },
        {
          "line": 3464,
          "old_api": "zzlGetScore",
          "new_api": null,
          "old_text": "zzlGetScore(sptr)",
          "new_text": null,
          "old_line_content": "                score = zzlGetScore(sptr);",
          "new_line_content": "            if (withscores) /* don't bother to extract the score if it's gonna be ignored. */",
          "content_same": false
        },
        {
          "line": 1420,
          "old_api": "dictGetVal",
          "new_api": null,
          "old_text": "dictGetVal(de)",
          "new_text": null,
          "old_line_content": "                dictGetVal(de) = &znode->score; /* Update score ptr. */",
          "new_line_content": "                 * update the score. */",
          "content_same": false
        },
        {
          "line": 3468,
          "old_api": "zzlLexValueGteMin",
          "new_api": null,
          "old_text": "zzlLexValueGteMin(eptr,range)",
          "new_text": null,
          "old_line_content": "                if (!zzlLexValueGteMin(eptr,range)) break;",
          "new_line_content": "            if (reverse) {",
          "content_same": false
        },
        {
          "line": 3470,
          "old_api": "zzlLexValueLteMax",
          "new_api": null,
          "old_text": "zzlLexValueLteMax(eptr,range)",
          "new_text": null,
          "old_line_content": "                if (!zzlLexValueLteMax(eptr,range)) break;",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 1425,
          "old_api": "sdsdup",
          "new_api": null,
          "old_text": "sdsdup(ele)",
          "new_text": null,
          "old_line_content": "            ele = sdsdup(ele);",
          "new_line_content": "        } else if (!xx) {",
          "content_same": false
        },
        {
          "line": 3473,
          "old_api": "lpGetValue",
          "new_api": null,
          "old_text": "lpGetValue(eptr,&vlen,&vlong)",
          "new_text": null,
          "old_line_content": "            vstr = lpGetValue(eptr,&vlen,&vlong);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3476,
          "old_api": "emitResultFromLongLong",
          "new_api": null,
          "old_text": "handler->emitResultFromLongLong(handler, vlong, score)",
          "new_text": null,
          "old_line_content": "                handler->emitResultFromLongLong(handler, vlong, score);",
          "new_line_content": "            if (vstr == NULL) {",
          "content_same": false
        },
        {
          "line": 3478,
          "old_api": "emitResultFromCBuffer",
          "new_api": null,
          "old_text": "handler->emitResultFromCBuffer(handler, vstr, vlen, score)",
          "new_text": null,
          "old_line_content": "                handler->emitResultFromCBuffer(handler, vstr, vlen, score);",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 3483,
          "old_api": "zzlPrev",
          "new_api": null,
          "old_text": "zzlPrev(zl,&eptr,&sptr)",
          "new_text": null,
          "old_line_content": "                zzlPrev(zl,&eptr,&sptr);",
          "new_line_content": "            if (reverse) {",
          "content_same": false
        },
        {
          "line": 1436,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Unknown sorted set encoding\")",
          "new_text": null,
          "old_line_content": "        serverPanic(\"Unknown sorted set encoding\");",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 3485,
          "old_api": "zzlNext",
          "new_api": null,
          "old_text": "zzlNext(zl,&eptr,&sptr)",
          "new_text": null,
          "old_line_content": "                zzlNext(zl,&eptr,&sptr);",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 3495,
          "old_api": "zslLastInLexRange",
          "new_api": null,
          "old_text": "zslLastInLexRange(zsl,range)",
          "new_text": null,
          "old_line_content": "            ln = zslLastInLexRange(zsl,range);",
          "new_line_content": "        if (reverse) {",
          "content_same": false
        },
        {
          "line": 1449,
          "old_api": "dictUnlink",
          "new_api": null,
          "old_text": "dictUnlink(zs->dict,ele)",
          "new_text": null,
          "old_line_content": "    de = dictUnlink(zs->dict,ele);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3497,
          "old_api": "zslFirstInLexRange",
          "new_api": null,
          "old_text": "zslFirstInLexRange(zsl,range)",
          "new_text": null,
          "old_line_content": "            ln = zslFirstInLexRange(zsl,range);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 1452,
          "old_api": "dictGetVal",
          "new_api": null,
          "old_text": "dictGetVal(de)",
          "new_text": null,
          "old_line_content": "        score = *(double*)dictGetVal(de);",
          "new_line_content": "        /* Get the score in order to delete from the skiplist later. */",
          "content_same": false
        },
        {
          "line": 1459,
          "old_api": "dictFreeUnlinkedEntry",
          "new_api": null,
          "old_text": "dictFreeUnlinkedEntry(zs->dict,de)",
          "new_text": null,
          "old_line_content": "        dictFreeUnlinkedEntry(zs->dict,de);",
          "new_line_content": "         * we need to delete from the skiplist as the final step. */",
          "content_same": false
        },
        {
          "line": 1462,
          "old_api": "zslDelete",
          "new_api": null,
          "old_text": "zslDelete(zs->zsl,score,ele,NULL)",
          "new_text": null,
          "old_line_content": "        int retval = zslDelete(zs->zsl,score,ele,NULL);",
          "new_line_content": "        /* Delete from skiplist. */",
          "content_same": false
        },
        {
          "line": 3513,
          "old_api": "zslLexValueGteMin",
          "new_api": null,
          "old_text": "zslLexValueGteMin(ln->ele,range)",
          "new_text": null,
          "old_line_content": "                if (!zslLexValueGteMin(ln->ele,range)) break;",
          "new_line_content": "            if (reverse) {",
          "content_same": false
        },
        {
          "line": 3515,
          "old_api": "zslLexValueLteMax",
          "new_api": null,
          "old_text": "zslLexValueLteMax(ln->ele,range)",
          "new_text": null,
          "old_line_content": "                if (!zslLexValueLteMax(ln->ele,range)) break;",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 3519,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(ln->ele)",
          "new_text": null,
          "old_line_content": "            handler->emitResultFromCBuffer(handler, ln->ele, sdslen(ln->ele), ln->score);",
          "new_line_content": "            rangelen++;",
          "content_same": false
        },
        {
          "line": 1477,
          "old_api": "zzlFind",
          "new_api": null,
          "old_text": "zzlFind(zobj->ptr,ele,NULL)",
          "new_text": null,
          "old_line_content": "        if ((eptr = zzlFind(zobj->ptr,ele,NULL)) != NULL) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3529,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Unknown sorted set encoding\")",
          "new_text": null,
          "old_line_content": "        serverPanic(\"Unknown sorted set encoding\");",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 1483,
          "old_api": "zsetRemoveFromSkiplist",
          "new_api": null,
          "old_text": "zsetRemoveFromSkiplist(zs, ele)",
          "new_text": null,
          "old_line_content": "        if (zsetRemoveFromSkiplist(zs, ele)) {",
          "new_line_content": "        zset *zs = zobj->ptr;",
          "content_same": false
        },
        {
          "line": 3532,
          "old_api": "finalizeResultEmission",
          "new_api": null,
          "old_text": "handler->finalizeResultEmission(handler, rangelen)",
          "new_text": null,
          "old_line_content": "    handler->finalizeResultEmission(handler, rangelen);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1488,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Unknown sorted set encoding\")",
          "new_text": null,
          "old_line_content": "        serverPanic(\"Unknown sorted set encoding\");",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 3538,
          "old_api": "zrangeResultHandlerInit",
          "new_api": null,
          "old_text": "zrangeResultHandlerInit(&handler, c, ZRANGE_CONSUMER_TYPE_CLIENT)",
          "new_text": null,
          "old_line_content": "    zrangeResultHandlerInit(&handler, c, ZRANGE_CONSUMER_TYPE_CLIENT);",
          "new_line_content": "    zrange_result_handler handler;",
          "content_same": false
        },
        {
          "line": 3545,
          "old_api": "zrangeResultHandlerInit",
          "new_api": null,
          "old_text": "zrangeResultHandlerInit(&handler, c, ZRANGE_CONSUMER_TYPE_CLIENT)",
          "new_text": null,
          "old_line_content": "    zrangeResultHandlerInit(&handler, c, ZRANGE_CONSUMER_TYPE_CLIENT);",
          "new_line_content": "    zrange_result_handler handler;",
          "content_same": false
        },
        {
          "line": 1508,
          "old_api": "zsetLength",
          "new_api": null,
          "old_text": "zsetLength(zobj)",
          "new_text": null,
          "old_line_content": "    llen = zsetLength(zobj);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1514,
          "old_api": "lpSeek",
          "new_api": null,
          "old_text": "lpSeek(zl,0)",
          "new_text": null,
          "old_line_content": "        eptr = lpSeek(zl,0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1521,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(ele)",
          "new_text": null,
          "old_line_content": "            if (lpCompare(eptr,(unsigned char*)ele,sdslen(ele)))",
          "new_line_content": "        while(eptr != NULL) {",
          "content_same": false
        },
        {
          "line": 1524,
          "old_api": "zzlNext",
          "new_api": null,
          "old_text": "zzlNext(zl,&eptr,&sptr)",
          "new_text": null,
          "old_line_content": "            zzlNext(zl,&eptr,&sptr);",
          "new_line_content": "            rank++;",
          "content_same": false
        },
        {
          "line": 3580,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[j]->ptr,\"withscores\")",
          "new_text": null,
          "old_line_content": "        if (!store && !strcasecmp(c->argv[j]->ptr,\"withscores\")) {",
          "new_line_content": "        int leftargs = c->argc-j-1;",
          "content_same": false
        },
        {
          "line": 3582,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[j]->ptr,\"limit\")",
          "new_text": null,
          "old_line_content": "        } else if (!strcasecmp(c->argv[j]->ptr,\"limit\") && leftargs >= 2) {",
          "new_line_content": "            opt_withscores = 1;",
          "content_same": false
        },
        {
          "line": 1541,
          "old_api": "dictFind",
          "new_api": null,
          "old_text": "dictFind(zs->dict,ele)",
          "new_text": null,
          "old_line_content": "        de = dictFind(zs->dict,ele);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3590,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[j]->ptr,\"rev\")",
          "new_text": null,
          "old_line_content": "                   !strcasecmp(c->argv[j]->ptr,\"rev\"))",
          "new_line_content": "        } else if (direction == ZRANGE_DIRECTION_AUTO &&",
          "content_same": false
        },
        {
          "line": 1543,
          "old_api": "dictGetVal",
          "new_api": null,
          "old_text": "dictGetVal(de)",
          "new_text": null,
          "old_line_content": "            score = *(double*)dictGetVal(de);",
          "new_line_content": "        if (de != NULL) {",
          "content_same": false
        },
        {
          "line": 1546,
          "old_api": "serverAssert",
          "new_api": null,
          "old_text": "serverAssert(rank != 0)",
          "new_text": null,
          "old_line_content": "            serverAssert(rank != 0);",
          "new_line_content": "            /* Existing elements always have a rank. */",
          "content_same": false
        },
        {
          "line": 3594,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[j]->ptr,\"bylex\")",
          "new_text": null,
          "old_line_content": "                   !strcasecmp(c->argv[j]->ptr,\"bylex\"))",
          "new_line_content": "        } else if (rangetype == ZRANGE_AUTO &&",
          "content_same": false
        },
        {
          "line": 3598,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[j]->ptr,\"byscore\")",
          "new_text": null,
          "old_line_content": "                   !strcasecmp(c->argv[j]->ptr,\"byscore\"))",
          "new_line_content": "        } else if (rangetype == ZRANGE_AUTO &&",
          "content_same": false
        },
        {
          "line": 3602,
          "old_api": "addReplyErrorObject",
          "new_api": null,
          "old_text": "addReplyErrorObject(c,shared.syntaxerr)",
          "new_text": null,
          "old_line_content": "            addReplyErrorObject(c,shared.syntaxerr);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 1555,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Unknown sorted set encoding\")",
          "new_text": null,
          "old_line_content": "        serverPanic(\"Unknown sorted set encoding\");",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 3615,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\"syntax error, LIMIT is only supported in combination with either BYSCORE or BYLEX\")",
          "new_text": null,
          "old_line_content": "        addReplyError(c,\"syntax error, LIMIT is only supported in combination with either BYSCORE or BYLEX\");",
          "new_line_content": "    if (opt_limit != -1 && rangetype == ZRANGE_RANK) {",
          "content_same": false
        },
        {
          "line": 1569,
          "old_api": "serverAssert",
          "new_api": null,
          "old_text": "serverAssert(o->type == OBJ_ZSET)",
          "new_text": null,
          "old_line_content": "    serverAssert(o->type == OBJ_ZSET);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3619,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\"syntax error, WITHSCORES not supported in combination with BYLEX\")",
          "new_text": null,
          "old_line_content": "        addReplyError(c,\"syntax error, WITHSCORES not supported in combination with BYLEX\");",
          "new_line_content": "    if (opt_withscores && rangetype == ZRANGE_LEX) {",
          "content_same": false
        },
        {
          "line": 1574,
          "old_api": "lpBytes",
          "new_api": null,
          "old_text": "lpBytes(zl)",
          "new_text": null,
          "old_line_content": "        size_t sz = lpBytes(zl);",
          "new_line_content": "        unsigned char *zl = o->ptr;",
          "content_same": false
        },
        {
          "line": 1580,
          "old_api": "createZsetObject",
          "new_api": null,
          "old_text": "createZsetObject()",
          "new_text": null,
          "old_line_content": "        zobj = createZsetObject();",
          "new_line_content": "    } else if (o->encoding == OBJ_ENCODING_SKIPLIST) {",
          "content_same": false
        },
        {
          "line": 1583,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(zs->dict)",
          "new_text": null,
          "old_line_content": "        dictExpand(new_zs->dict,dictSize(zs->dict));",
          "new_line_content": "        new_zs = zobj->ptr;",
          "content_same": false
        },
        {
          "line": 1587,
          "old_api": "zsetLength",
          "new_api": null,
          "old_text": "zsetLength(o)",
          "new_text": null,
          "old_line_content": "        long llen = zsetLength(o);",
          "new_line_content": "        sds ele;",
          "content_same": false
        },
        {
          "line": 3637,
          "old_api": "getLongFromObjectOrReply",
          "new_api": null,
          "old_text": "getLongFromObjectOrReply(c, c->argv[minidx], &opt_start,NULL)",
          "new_text": null,
          "old_line_content": "        if ((getLongFromObjectOrReply(c, c->argv[minidx], &opt_start,NULL) != C_OK) ||",
          "new_line_content": "        /* Z[REV]RANGE, ZRANGESTORE [REV]RANGE */",
          "content_same": false
        },
        {
          "line": 1598,
          "old_api": "sdsdup",
          "new_api": null,
          "old_text": "sdsdup(ele)",
          "new_text": null,
          "old_line_content": "            sds new_ele = sdsdup(ele);",
          "new_line_content": "            ele = ln->ele;",
          "content_same": false
        },
        {
          "line": 3646,
          "old_api": "zslParseRange",
          "new_api": null,
          "old_text": "zslParseRange(c->argv[minidx], c->argv[maxidx], &range)",
          "new_text": null,
          "old_line_content": "        if (zslParseRange(c->argv[minidx], c->argv[maxidx], &range) != C_OK) {",
          "new_line_content": "        /* Z[REV]RANGEBYSCORE, ZRANGESTORE [REV]RANGEBYSCORE */",
          "content_same": false
        },
        {
          "line": 1604,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Unknown sorted set encoding\")",
          "new_text": null,
          "old_line_content": "        serverPanic(\"Unknown sorted set encoding\");",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 3654,
          "old_api": "zslParseLexRange",
          "new_api": null,
          "old_text": "zslParseLexRange(c->argv[minidx], c->argv[maxidx], &lexrange)",
          "new_text": null,
          "old_line_content": "        if (zslParseLexRange(c->argv[minidx], c->argv[maxidx], &lexrange) != C_OK) {",
          "new_line_content": "        /* Z[REV]RANGEBYLEX, ZRANGESTORE [REV]RANGEBYLEX */",
          "content_same": false
        },
        {
          "line": 1611,
          "old_api": "sdsfromlonglong",
          "new_api": null,
          "old_text": "sdsfromlonglong(e->lval)",
          "new_text": null,
          "old_line_content": "    return e->sval ? sdsnewlen(e->sval, e->slen) : sdsfromlonglong(e->lval);",
          "new_line_content": "sds zsetSdsFromListpackEntry(listpackEntry *e) {",
          "content_same": false
        },
        {
          "line": 3662,
          "old_api": "zrangeResultHandlerScoreEmissionEnable",
          "new_api": null,
          "old_text": "zrangeResultHandlerScoreEmissionEnable(handler)",
          "new_text": null,
          "old_line_content": "        zrangeResultHandlerScoreEmissionEnable(handler);",
          "new_line_content": "    if (opt_withscores || store) {",
          "content_same": false
        },
        {
          "line": 1617,
          "old_api": "addReplyBulkCBuffer",
          "new_api": null,
          "old_text": "addReplyBulkCBuffer(c, e->sval, e->slen)",
          "new_text": null,
          "old_line_content": "        addReplyBulkCBuffer(c, e->sval, e->slen);",
          "new_line_content": "    if (e->sval)",
          "content_same": false
        },
        {
          "line": 3666,
          "old_api": "lookupKeyRead",
          "new_api": null,
          "old_text": "lookupKeyRead(c->db, key)",
          "new_text": null,
          "old_line_content": "    zobj = lookupKeyRead(c->db, key);",
          "new_line_content": "    /* Step 3: Lookup the key and get the range. */",
          "content_same": false
        },
        {
          "line": 1619,
          "old_api": "addReplyBulkLongLong",
          "new_api": null,
          "old_text": "addReplyBulkLongLong(c, e->lval)",
          "new_text": null,
          "old_line_content": "        addReplyBulkLongLong(c, e->lval);",
          "new_line_content": "    else",
          "content_same": false
        },
        {
          "line": 3669,
          "old_api": "beginResultEmission",
          "new_api": null,
          "old_text": "handler->beginResultEmission(handler, -1)",
          "new_text": null,
          "old_line_content": "            handler->beginResultEmission(handler, -1);",
          "new_line_content": "        if (store) {",
          "content_same": false
        },
        {
          "line": 3672,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c, shared.emptyarray)",
          "new_text": null,
          "old_line_content": "            addReply(c, shared.emptyarray);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 3677,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,zobj,OBJ_ZSET)",
          "new_text": null,
          "old_line_content": "    if (checkType(c,zobj,OBJ_ZSET)) goto cleanup;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1630,
          "old_api": "dictGetFairRandomKey",
          "new_api": null,
          "old_text": "dictGetFairRandomKey(zs->dict)",
          "new_text": null,
          "old_line_content": "        dictEntry *de = dictGetFairRandomKey(zs->dict);",
          "new_line_content": "        zset *zs = zsetobj->ptr;",
          "content_same": false
        },
        {
          "line": 1633,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(s)",
          "new_text": null,
          "old_line_content": "        key->slen = sdslen(s);",
          "new_line_content": "        key->sval = (unsigned char*)s;",
          "content_same": false
        },
        {
          "line": 1635,
          "old_api": "dictGetVal",
          "new_api": null,
          "old_text": "dictGetVal(de)",
          "new_text": null,
          "old_line_content": "            *score = *(double*)dictGetVal(de);",
          "new_line_content": "        if (score)",
          "content_same": false
        },
        {
          "line": 3683,
          "old_api": "genericZrangebyrankCommand",
          "new_api": null,
          "old_text": "genericZrangebyrankCommand(handler, zobj, opt_start, opt_end,\n            opt_withscores || store, direction == ZRANGE_DIRECTION_REVERSE)",
          "new_text": null,
          "old_line_content": "        genericZrangebyrankCommand(handler, zobj, opt_start, opt_end,",
          "new_line_content": "    case ZRANGE_RANK:",
          "content_same": false
        },
        {
          "line": 1638,
          "old_api": "lpRandomPair",
          "new_api": null,
          "old_text": "lpRandomPair(zsetobj->ptr, zsetsize, key, &val)",
          "new_text": null,
          "old_line_content": "        lpRandomPair(zsetobj->ptr, zsetsize, key, &val);",
          "new_line_content": "        listpackEntry val;",
          "content_same": false
        },
        {
          "line": 3688,
          "old_api": "genericZrangebyscoreCommand",
          "new_api": null,
          "old_text": "genericZrangebyscoreCommand(handler, &range, zobj, opt_offset,\n            opt_limit, direction == ZRANGE_DIRECTION_REVERSE)",
          "new_text": null,
          "old_line_content": "        genericZrangebyscoreCommand(handler, &range, zobj, opt_offset,",
          "new_line_content": "    case ZRANGE_SCORE:",
          "content_same": false
        },
        {
          "line": 1641,
          "old_api": "zzlStrtod",
          "new_api": null,
          "old_text": "zzlStrtod(val.sval,val.slen)",
          "new_text": null,
          "old_line_content": "                *score = zzlStrtod(val.sval,val.slen);",
          "new_line_content": "            if (val.sval) {",
          "content_same": false
        },
        {
          "line": 3693,
          "old_api": "genericZrangebylexCommand",
          "new_api": null,
          "old_text": "genericZrangebylexCommand(handler, &lexrange, zobj, opt_withscores || store,\n            opt_offset, opt_limit, direction == ZRANGE_DIRECTION_REVERSE)",
          "new_text": null,
          "old_line_content": "        genericZrangebylexCommand(handler, &lexrange, zobj, opt_withscores || store,",
          "new_line_content": "    case ZRANGE_LEX:",
          "content_same": false
        },
        {
          "line": 1647,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Unknown zset encoding\")",
          "new_text": null,
          "old_line_content": "        serverPanic(\"Unknown zset encoding\");",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 3703,
          "old_api": "zslFreeLexRange",
          "new_api": null,
          "old_text": "zslFreeLexRange(&lexrange)",
          "new_text": null,
          "old_line_content": "        zslFreeLexRange(&lexrange);",
          "new_line_content": "    if (rangetype == ZRANGE_LEX) {",
          "content_same": false
        },
        {
          "line": 3711,
          "old_api": "lookupKeyReadOrReply",
          "new_api": null,
          "old_text": "lookupKeyReadOrReply(c,key,shared.czero)",
          "new_text": null,
          "old_line_content": "    if ((zobj = lookupKeyReadOrReply(c,key,shared.czero)) == NULL ||",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3714,
          "old_api": "zsetLength",
          "new_api": null,
          "old_text": "zsetLength(zobj)",
          "new_text": null,
          "old_line_content": "    addReplyLongLong(c,zsetLength(zobj));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3722,
          "old_api": "lookupKeyReadOrReply",
          "new_api": null,
          "old_text": "lookupKeyReadOrReply(c,key,shared.null[c->resp])",
          "new_text": null,
          "old_line_content": "    if ((zobj = lookupKeyReadOrReply(c,key,shared.null[c->resp])) == NULL ||",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1677,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(opt,\"nx\")",
          "new_text": null,
          "old_line_content": "        if (!strcasecmp(opt,\"nx\")) flags |= ZADD_IN_NX;",
          "new_line_content": "        char *opt = c->argv[scoreidx]->ptr;",
          "content_same": false
        },
        {
          "line": 3725,
          "old_api": "zsetScore",
          "new_api": null,
          "old_text": "zsetScore(zobj,c->argv[2]->ptr,&score)",
          "new_text": null,
          "old_line_content": "    if (zsetScore(zobj,c->argv[2]->ptr,&score) == C_ERR) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3728,
          "old_api": "addReplyDouble",
          "new_api": null,
          "old_text": "addReplyDouble(c,score)",
          "new_text": null,
          "old_line_content": "        addReplyDouble(c,score);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 3736,
          "old_api": "lookupKeyRead",
          "new_api": null,
          "old_text": "lookupKeyRead(c->db,key)",
          "new_text": null,
          "old_line_content": "    zobj = lookupKeyRead(c->db,key);",
          "new_line_content": "    double score;",
          "content_same": false
        },
        {
          "line": 3739,
          "old_api": "addReplyArrayLen",
          "new_api": null,
          "old_text": "addReplyArrayLen(c,c->argc - 2)",
          "new_text": null,
          "old_line_content": "    addReplyArrayLen(c,c->argc - 2);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3742,
          "old_api": "zsetScore",
          "new_api": null,
          "old_text": "zsetScore(zobj,c->argv[j]->ptr,&score)",
          "new_text": null,
          "old_line_content": "        if (zobj == NULL || zsetScore(zobj,c->argv[j]->ptr,&score) == C_ERR) {",
          "new_line_content": "        /* Treat a missing set the same way as an empty set */",
          "content_same": false
        },
        {
          "line": 3745,
          "old_api": "addReplyDouble",
          "new_api": null,
          "old_text": "addReplyDouble(c,score)",
          "new_text": null,
          "old_line_content": "            addReplyDouble(c,score);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 1698,
          "old_api": "addReplyErrorObject",
          "new_api": null,
          "old_text": "addReplyErrorObject(c,shared.syntaxerr)",
          "new_text": null,
          "old_line_content": "        addReplyErrorObject(c,shared.syntaxerr);",
          "new_line_content": "    if (elements % 2 || !elements) {",
          "content_same": false
        },
        {
          "line": 1705,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\n            \"XX and NX options at the same time are not compatible\")",
          "new_text": null,
          "old_line_content": "        addReplyError(c,",
          "new_line_content": "    if (nx && xx) {",
          "content_same": false
        },
        {
          "line": 3756,
          "old_api": "lookupKeyReadOrReply",
          "new_api": null,
          "old_text": "lookupKeyReadOrReply(c,key,shared.null[c->resp])",
          "new_text": null,
          "old_line_content": "    if ((zobj = lookupKeyReadOrReply(c,key,shared.null[c->resp])) == NULL ||",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1711,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\n            \"GT, LT, and/or NX options at the same time are not compatible\")",
          "new_text": null,
          "old_line_content": "        addReplyError(c,",
          "new_line_content": "    if ((gt && nx) || (lt && nx) || (gt && lt)) {",
          "content_same": false
        },
        {
          "line": 3759,
          "old_api": "sdsEncodedObject",
          "new_api": null,
          "old_text": "sdsEncodedObject(ele)",
          "new_text": null,
          "old_line_content": "    serverAssertWithInfo(c,ele,sdsEncodedObject(ele));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3762,
          "old_api": "addReplyLongLong",
          "new_api": null,
          "old_text": "addReplyLongLong(c,rank)",
          "new_text": null,
          "old_line_content": "        addReplyLongLong(c,rank);",
          "new_line_content": "    if (rank >= 0) {",
          "content_same": false
        },
        {
          "line": 3764,
          "old_api": "addReplyNull",
          "new_api": null,
          "old_text": "addReplyNull(c)",
          "new_text": null,
          "old_line_content": "        addReplyNull(c);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 1718,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\n            \"INCR option supports a single increment-element pair\")",
          "new_text": null,
          "old_line_content": "        addReplyError(c,",
          "new_line_content": "    if (incr && elements > 1) {",
          "content_same": false
        },
        {
          "line": 3769,
          "old_api": "zrankGenericCommand",
          "new_api": null,
          "old_text": "zrankGenericCommand(c, 0)",
          "new_text": null,
          "old_line_content": "    zrankGenericCommand(c, 0);",
          "new_line_content": "void zrankCommand(client *c) {",
          "content_same": false
        },
        {
          "line": 3773,
          "old_api": "zrankGenericCommand",
          "new_api": null,
          "old_text": "zrankGenericCommand(c, 1)",
          "new_text": null,
          "old_line_content": "    zrankGenericCommand(c, 1);",
          "new_line_content": "void zrevrankCommand(client *c) {",
          "content_same": false
        },
        {
          "line": 1726,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(double)*elements)",
          "new_text": null,
          "old_line_content": "    scores = zmalloc(sizeof(double)*elements);",
          "new_line_content": "     * either execute fully or nothing at all. */",
          "content_same": false
        },
        {
          "line": 1728,
          "old_api": "getDoubleFromObjectOrReply",
          "new_api": null,
          "old_text": "getDoubleFromObjectOrReply(c,c->argv[scoreidx+j*2],&scores[j],NULL)",
          "new_text": null,
          "old_line_content": "        if (getDoubleFromObjectOrReply(c,c->argv[scoreidx+j*2],&scores[j],NULL)",
          "new_line_content": "    for (j = 0; j < elements; j++) {",
          "content_same": false
        },
        {
          "line": 3780,
          "old_api": "parseScanCursorOrReply",
          "new_api": null,
          "old_text": "parseScanCursorOrReply(c,c->argv[2],&cursor)",
          "new_text": null,
          "old_line_content": "    if (parseScanCursorOrReply(c,c->argv[2],&cursor) == C_ERR) return;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1733,
          "old_api": "lookupKeyWrite",
          "new_api": null,
          "old_text": "lookupKeyWrite(c->db,key)",
          "new_text": null,
          "old_line_content": "    zobj = lookupKeyWrite(c->db,key);",
          "new_line_content": "    /* Lookup the key and create the sorted set if does not exist. */",
          "content_same": false
        },
        {
          "line": 1738,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(c->argv[scoreidx+1]->ptr)",
          "new_text": null,
          "old_line_content": "            server.zset_max_listpack_value < sdslen(c->argv[scoreidx+1]->ptr))",
          "new_line_content": "        if (server.zset_max_listpack_entries == 0 ||",
          "content_same": false
        },
        {
          "line": 1740,
          "old_api": "createZsetObject",
          "new_api": null,
          "old_text": "createZsetObject()",
          "new_text": null,
          "old_line_content": "            zobj = createZsetObject();",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 1742,
          "old_api": "createZsetListpackObject",
          "new_api": null,
          "old_text": "createZsetListpackObject()",
          "new_text": null,
          "old_line_content": "            zobj = createZsetListpackObject();",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 1744,
          "old_api": "dbAdd",
          "new_api": null,
          "old_text": "dbAdd(c->db,key,zobj)",
          "new_text": null,
          "old_line_content": "        dbAdd(c->db,key,zobj);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1753,
          "old_api": "zsetAdd",
          "new_api": null,
          "old_text": "zsetAdd(zobj, score, ele, flags, &retflags, &newscore)",
          "new_text": null,
          "old_line_content": "        int retval = zsetAdd(zobj, score, ele, flags, &retflags, &newscore);",
          "new_line_content": "        ele = c->argv[scoreidx+1+j*2]->ptr;",
          "content_same": false
        },
        {
          "line": 1755,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,nanerr)",
          "new_text": null,
          "old_line_content": "            addReplyError(c,nanerr);",
          "new_line_content": "        if (retval == 0) {",
          "content_same": false
        },
        {
          "line": 1768,
          "old_api": "addReplyDouble",
          "new_api": null,
          "old_text": "addReplyDouble(c,score)",
          "new_text": null,
          "old_line_content": "            addReplyDouble(c,score);",
          "new_line_content": "        if (processed)",
          "content_same": false
        },
        {
          "line": 1770,
          "old_api": "addReplyNull",
          "new_api": null,
          "old_text": "addReplyNull(c)",
          "new_text": null,
          "old_line_content": "            addReplyNull(c);",
          "new_line_content": "        else",
          "content_same": false
        },
        {
          "line": 1772,
          "old_api": "addReplyLongLong",
          "new_api": null,
          "old_text": "addReplyLongLong(c,ch ? added+updated : added)",
          "new_text": null,
          "old_line_content": "        addReplyLongLong(c,ch ? added+updated : added);",
          "new_line_content": "    } else { /* ZADD. */",
          "content_same": false
        },
        {
          "line": 3821,
          "old_api": "lookupKeyWrite",
          "new_api": null,
          "old_text": "lookupKeyWrite(c->db,key)",
          "new_text": null,
          "old_line_content": "        zobj = lookupKeyWrite(c->db,key);",
          "new_line_content": "        key = keyv[idx++];",
          "content_same": false
        },
        {
          "line": 3823,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,zobj,OBJ_ZSET)",
          "new_text": null,
          "old_line_content": "        if (checkType(c,zobj,OBJ_ZSET)) return;",
          "new_line_content": "        if (!zobj) continue;",
          "content_same": false
        },
        {
          "line": 1776,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(scores)",
          "new_text": null,
          "old_line_content": "    zfree(scores);",
          "new_line_content": "cleanup:",
          "content_same": false
        },
        {
          "line": 1778,
          "old_api": "signalModifiedKey",
          "new_api": null,
          "old_text": "signalModifiedKey(c,c->db,key)",
          "new_text": null,
          "old_line_content": "        signalModifiedKey(c,c->db,key);",
          "new_line_content": "    if (added || updated) {",
          "content_same": false
        },
        {
          "line": 3830,
          "old_api": "addReplyNullArray",
          "new_api": null,
          "old_text": "addReplyNullArray(c)",
          "new_text": null,
          "old_line_content": "            addReplyNullArray(c);",
          "new_line_content": "        if (reply_nil_when_empty) {",
          "content_same": false
        },
        {
          "line": 3832,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.emptyarray)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.emptyarray);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 1785,
          "old_api": "zaddGenericCommand",
          "new_api": null,
          "old_text": "zaddGenericCommand(c,ZADD_IN_NONE)",
          "new_text": null,
          "old_line_content": "    zaddGenericCommand(c,ZADD_IN_NONE);",
          "new_line_content": "void zaddCommand(client *c) {",
          "content_same": false
        },
        {
          "line": 1789,
          "old_api": "zaddGenericCommand",
          "new_api": null,
          "old_text": "zaddGenericCommand(c,ZADD_IN_INCR)",
          "new_text": null,
          "old_line_content": "    zaddGenericCommand(c,ZADD_IN_INCR);",
          "new_line_content": "void zincrbyCommand(client *c) {",
          "content_same": false
        },
        {
          "line": 3839,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c, shared.emptyarray)",
          "new_text": null,
          "old_line_content": "        addReply(c, shared.emptyarray);",
          "new_line_content": "        /* ZPOPMIN/ZPOPMAX with count 0. */",
          "content_same": false
        },
        {
          "line": 1797,
          "old_api": "lookupKeyWriteOrReply",
          "new_api": null,
          "old_text": "lookupKeyWriteOrReply(c,key,shared.czero)",
          "new_text": null,
          "old_line_content": "    if ((zobj = lookupKeyWriteOrReply(c,key,shared.czero)) == NULL ||",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3848,
          "old_api": "zsetLength",
          "new_api": null,
          "old_text": "zsetLength(zobj)",
          "new_text": null,
          "old_line_content": "    long llen = zsetLength(zobj);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1801,
          "old_api": "zsetDel",
          "new_api": null,
          "old_text": "zsetDel(zobj,c->argv[j]->ptr)",
          "new_text": null,
          "old_line_content": "        if (zsetDel(zobj,c->argv[j]->ptr)) deleted++;",
          "new_line_content": "    for (j = 2; j < c->argc; j++) {",
          "content_same": false
        },
        {
          "line": 3853,
          "old_api": "addReplyArrayLen",
          "new_api": null,
          "old_text": "addReplyArrayLen(c, rangelen * 2)",
          "new_text": null,
          "old_line_content": "        addReplyArrayLen(c, rangelen * 2);",
          "new_line_content": "        /* ZPOPMIN/ZPOPMAX with or without COUNT option in RESP2. */",
          "content_same": false
        },
        {
          "line": 3856,
          "old_api": "addReplyArrayLen",
          "new_api": null,
          "old_text": "addReplyArrayLen(c, rangelen)",
          "new_text": null,
          "old_line_content": "        addReplyArrayLen(c, rangelen);",
          "new_line_content": "        /* ZPOPMIN/ZPOPMAX with COUNT option in RESP3. */",
          "content_same": false
        },
        {
          "line": 1810,
          "old_api": "notifyKeyspaceEvent",
          "new_api": null,
          "old_text": "notifyKeyspaceEvent(NOTIFY_ZSET,\"zrem\",key,c->db->id)",
          "new_text": null,
          "old_line_content": "        notifyKeyspaceEvent(NOTIFY_ZSET,\"zrem\",key,c->db->id);",
          "new_line_content": "    if (deleted) {",
          "content_same": false
        },
        {
          "line": 3859,
          "old_api": "addReplyArrayLen",
          "new_api": null,
          "old_text": "addReplyArrayLen(c, rangelen * 2 + 1)",
          "new_text": null,
          "old_line_content": "        addReplyArrayLen(c, rangelen * 2 + 1);",
          "new_line_content": "        /* BZPOPMIN/BZPOPMAX in RESP2 and RESP3. */",
          "content_same": false
        },
        {
          "line": 1812,
          "old_api": "notifyKeyspaceEvent",
          "new_api": null,
          "old_text": "notifyKeyspaceEvent(NOTIFY_GENERIC,\"del\",key,c->db->id)",
          "new_text": null,
          "old_line_content": "            notifyKeyspaceEvent(NOTIFY_GENERIC,\"del\",key,c->db->id);",
          "new_line_content": "        if (keyremoved)",
          "content_same": false
        },
        {
          "line": 3863,
          "old_api": "addReplyArrayLen",
          "new_api": null,
          "old_text": "addReplyArrayLen(c, 2)",
          "new_text": null,
          "old_line_content": "        addReplyArrayLen(c, 2);",
          "new_line_content": "        /* ZMPOP/BZMPOP in RESP2 and RESP3. */",
          "content_same": false
        },
        {
          "line": 1816,
          "old_api": "addReplyLongLong",
          "new_api": null,
          "old_text": "addReplyLongLong(c,deleted)",
          "new_text": null,
          "old_line_content": "    addReplyLongLong(c,deleted);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3878,
          "old_api": "lpSeek",
          "new_api": null,
          "old_text": "lpSeek(zl,where == ZSET_MAX ? -2 : 0)",
          "new_text": null,
          "old_line_content": "            eptr = lpSeek(zl,where == ZSET_MAX ? -2 : 0);",
          "new_line_content": "            /* Get the first or last element in the sorted set. */",
          "content_same": false
        },
        {
          "line": 3882,
          "old_api": "sdsfromlonglong",
          "new_api": null,
          "old_text": "sdsfromlonglong(vlong)",
          "new_text": null,
          "old_line_content": "                ele = sdsfromlonglong(vlong);",
          "new_line_content": "            if (vstr == NULL)",
          "content_same": false
        },
        {
          "line": 3884,
          "old_api": "sdsnewlen",
          "new_api": null,
          "old_text": "sdsnewlen(vstr,vlen)",
          "new_text": null,
          "old_line_content": "                ele = sdsnewlen(vstr,vlen);",
          "new_line_content": "            else",
          "content_same": false
        },
        {
          "line": 3887,
          "old_api": "lpNext",
          "new_api": null,
          "old_text": "lpNext(zl,eptr)",
          "new_text": null,
          "old_line_content": "            sptr = lpNext(zl,eptr);",
          "new_line_content": "            /* Get the score. */",
          "content_same": false
        },
        {
          "line": 1840,
          "old_api": "getLongFromObjectOrReply",
          "new_api": null,
          "old_text": "getLongFromObjectOrReply(c,c->argv[2],&start,NULL)",
          "new_text": null,
          "old_line_content": "        if ((getLongFromObjectOrReply(c,c->argv[2],&start,NULL) != C_OK) ||",
          "new_line_content": "        notify_type = \"zremrangebyrank\";",
          "content_same": false
        },
        {
          "line": 1845,
          "old_api": "zslParseRange",
          "new_api": null,
          "old_text": "zslParseRange(c->argv[2],c->argv[3],&range)",
          "new_text": null,
          "old_line_content": "        if (zslParseRange(c->argv[2],c->argv[3],&range) != C_OK) {",
          "new_line_content": "        notify_type = \"zremrangebyscore\";",
          "content_same": false
        },
        {
          "line": 1851,
          "old_api": "zslParseLexRange",
          "new_api": null,
          "old_text": "zslParseLexRange(c->argv[2],c->argv[3],&lexrange)",
          "new_text": null,
          "old_line_content": "        if (zslParseLexRange(c->argv[2],c->argv[3],&lexrange) != C_OK) {",
          "new_line_content": "        notify_type = \"zremrangebylex\";",
          "content_same": false
        },
        {
          "line": 3900,
          "old_api": "serverAssertWithInfo",
          "new_api": null,
          "old_text": "serverAssertWithInfo(c,zobj,zln != NULL)",
          "new_text": null,
          "old_line_content": "            serverAssertWithInfo(c,zobj,zln != NULL);",
          "new_line_content": "            /* There must be an element in the sorted set. */",
          "content_same": false
        },
        {
          "line": 1856,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"unknown rangetype %d\", (int)rangetype)",
          "new_text": null,
          "old_line_content": "        serverPanic(\"unknown rangetype %d\", (int)rangetype);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 3904,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Unknown sorted set encoding\")",
          "new_text": null,
          "old_line_content": "            serverPanic(\"Unknown sorted set encoding\");",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 3907,
          "old_api": "zsetDel",
          "new_api": null,
          "old_text": "zsetDel(zobj,ele)",
          "new_text": null,
          "old_line_content": "        serverAssertWithInfo(c,zobj,zsetDel(zobj,ele));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1860,
          "old_api": "lookupKeyWriteOrReply",
          "new_api": null,
          "old_text": "lookupKeyWriteOrReply(c,key,shared.czero)",
          "new_text": null,
          "old_line_content": "    if ((zobj = lookupKeyWriteOrReply(c,key,shared.czero)) == NULL ||",
          "new_line_content": "    /* Step 2: Lookup & range sanity checks if needed. */",
          "content_same": false
        },
        {
          "line": 3912,
          "old_api": "notifyKeyspaceEvent",
          "new_api": null,
          "old_text": "notifyKeyspaceEvent(NOTIFY_ZSET,events[where],key,c->db->id)",
          "new_text": null,
          "old_line_content": "            notifyKeyspaceEvent(NOTIFY_ZSET,events[where],key,c->db->id);",
          "new_line_content": "            char *events[2] = {\"zpopmin\",\"zpopmax\"};",
          "content_same": false
        },
        {
          "line": 1865,
          "old_api": "zsetLength",
          "new_api": null,
          "old_text": "zsetLength(zobj)",
          "new_text": null,
          "old_line_content": "        llen = zsetLength(zobj);",
          "new_line_content": "        /* Sanitize indexes. */",
          "content_same": false
        },
        {
          "line": 3917,
          "old_api": "addReplyArrayLen",
          "new_api": null,
          "old_text": "addReplyArrayLen(c,2)",
          "new_text": null,
          "old_line_content": "            addReplyArrayLen(c,2);",
          "new_line_content": "        if (use_nested_array) {",
          "content_same": false
        },
        {
          "line": 3919,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(ele)",
          "new_text": null,
          "old_line_content": "        addReplyBulkCBuffer(c,ele,sdslen(ele));",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1873,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.czero)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.czero);",
          "new_line_content": "        if (start > end || start >= llen) {",
          "content_same": false
        },
        {
          "line": 3926,
          "old_api": "zsetLength",
          "new_api": null,
          "old_text": "zsetLength(zobj)",
          "new_text": null,
          "old_line_content": "    if (zsetLength(zobj) == 0) {",
          "new_line_content": "    /* Remove the key, if indeed needed. */",
          "content_same": false
        },
        {
          "line": 3929,
          "old_api": "dbDelete",
          "new_api": null,
          "old_text": "dbDelete(c->db,key)",
          "new_text": null,
          "old_line_content": "        dbDelete(c->db,key);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1884,
          "old_api": "zzlDeleteRangeByRank",
          "new_api": null,
          "old_text": "zzlDeleteRangeByRank(zobj->ptr,start+1,end+1,&deleted)",
          "new_text": null,
          "old_line_content": "            zobj->ptr = zzlDeleteRangeByRank(zobj->ptr,start+1,end+1,&deleted);",
          "new_line_content": "        case ZRANGE_RANK:",
          "content_same": false
        },
        {
          "line": 1887,
          "old_api": "zzlDeleteRangeByScore",
          "new_api": null,
          "old_text": "zzlDeleteRangeByScore(zobj->ptr,&range,&deleted)",
          "new_text": null,
          "old_line_content": "            zobj->ptr = zzlDeleteRangeByScore(zobj->ptr,&range,&deleted);",
          "new_line_content": "        case ZRANGE_SCORE:",
          "content_same": false
        },
        {
          "line": 3935,
          "old_api": "createStringObjectFromLongLong",
          "new_api": null,
          "old_text": "createStringObjectFromLongLong((count > llen) ? llen : count)",
          "new_text": null,
          "old_line_content": "        robj *count_obj = createStringObjectFromLongLong((count > llen) ? llen : count);",
          "new_line_content": "        /* Always replicate it as ZPOP[MIN|MAX] with COUNT option instead of ZMPOP. */",
          "content_same": false
        },
        {
          "line": 1890,
          "old_api": "zzlDeleteRangeByLex",
          "new_api": null,
          "old_text": "zzlDeleteRangeByLex(zobj->ptr,&lexrange,&deleted)",
          "new_text": null,
          "old_line_content": "            zobj->ptr = zzlDeleteRangeByLex(zobj->ptr,&lexrange,&deleted);",
          "new_line_content": "        case ZRANGE_LEX:",
          "content_same": false
        },
        {
          "line": 3939,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(count_obj)",
          "new_text": null,
          "old_line_content": "        decrRefCount(count_obj);",
          "new_line_content": "                                   key, count_obj);",
          "content_same": false
        },
        {
          "line": 1893,
          "old_api": "zzlLength",
          "new_api": null,
          "old_text": "zzlLength(zobj->ptr)",
          "new_text": null,
          "old_line_content": "        if (zzlLength(zobj->ptr) == 0) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3946,
          "old_api": "addReplyErrorObject",
          "new_api": null,
          "old_text": "addReplyErrorObject(c,shared.syntaxerr)",
          "new_text": null,
          "old_line_content": "        addReplyErrorObject(c,shared.syntaxerr);",
          "new_line_content": "    if (c->argc > 3) {",
          "content_same": false
        },
        {
          "line": 1902,
          "old_api": "zslDeleteRangeByRank",
          "new_api": null,
          "old_text": "zslDeleteRangeByRank(zs->zsl,start+1,end+1,zs->dict)",
          "new_text": null,
          "old_line_content": "            deleted = zslDeleteRangeByRank(zs->zsl,start+1,end+1,zs->dict);",
          "new_line_content": "        case ZRANGE_RANK:",
          "content_same": false
        },
        {
          "line": 3951,
          "old_api": "getPositiveLongFromObjectOrReply",
          "new_api": null,
          "old_text": "getPositiveLongFromObjectOrReply(c, c->argv[2], &count, NULL)",
          "new_text": null,
          "old_line_content": "    if (c->argc == 3 && getPositiveLongFromObjectOrReply(c, c->argv[2], &count, NULL) != C_OK)",
          "new_line_content": "    long count = -1; /* -1 for plain single pop. */",
          "content_same": false
        },
        {
          "line": 1905,
          "old_api": "zslDeleteRangeByScore",
          "new_api": null,
          "old_text": "zslDeleteRangeByScore(zs->zsl,&range,zs->dict)",
          "new_text": null,
          "old_line_content": "            deleted = zslDeleteRangeByScore(zs->zsl,&range,zs->dict);",
          "new_line_content": "        case ZRANGE_SCORE:",
          "content_same": false
        },
        {
          "line": 1908,
          "old_api": "zslDeleteRangeByLex",
          "new_api": null,
          "old_text": "zslDeleteRangeByLex(zs->zsl,&lexrange,zs->dict)",
          "new_text": null,
          "old_line_content": "            deleted = zslDeleteRangeByLex(zs->zsl,&lexrange,zs->dict);",
          "new_line_content": "        case ZRANGE_LEX:",
          "content_same": false
        },
        {
          "line": 3958,
          "old_api": "genericZpopCommand",
          "new_api": null,
          "old_text": "genericZpopCommand(c, &c->argv[1], 1, where, 0, count, use_nested_array, 0, NULL)",
          "new_text": null,
          "old_line_content": "    genericZpopCommand(c, &c->argv[1], 1, where, 0, count, use_nested_array, 0, NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1911,
          "old_api": "dictResize",
          "new_api": null,
          "old_text": "dictResize(zs->dict)",
          "new_text": null,
          "old_line_content": "        if (htNeedsResize(zs->dict)) dictResize(zs->dict);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3963,
          "old_api": "zpopMinMaxCommand",
          "new_api": null,
          "old_text": "zpopMinMaxCommand(c, ZSET_MIN)",
          "new_text": null,
          "old_line_content": "    zpopMinMaxCommand(c, ZSET_MIN);",
          "new_line_content": "void zpopminCommand(client *c) {",
          "content_same": false
        },
        {
          "line": 1917,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Unknown sorted set encoding\")",
          "new_text": null,
          "old_line_content": "        serverPanic(\"Unknown sorted set encoding\");",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 3968,
          "old_api": "zpopMinMaxCommand",
          "new_api": null,
          "old_text": "zpopMinMaxCommand(c, ZSET_MAX)",
          "new_text": null,
          "old_line_content": "    zpopMinMaxCommand(c, ZSET_MAX);",
          "new_line_content": "void zpopmaxCommand(client *c) {",
          "content_same": false
        },
        {
          "line": 1922,
          "old_api": "signalModifiedKey",
          "new_api": null,
          "old_text": "signalModifiedKey(c,c->db,key)",
          "new_text": null,
          "old_line_content": "        signalModifiedKey(c,c->db,key);",
          "new_line_content": "    if (deleted) {",
          "content_same": false
        },
        {
          "line": 1925,
          "old_api": "notifyKeyspaceEvent",
          "new_api": null,
          "old_text": "notifyKeyspaceEvent(NOTIFY_GENERIC,\"del\",key,c->db->id)",
          "new_text": null,
          "old_line_content": "            notifyKeyspaceEvent(NOTIFY_GENERIC,\"del\",key,c->db->id);",
          "new_line_content": "        if (keyremoved)",
          "content_same": false
        },
        {
          "line": 1928,
          "old_api": "addReplyLongLong",
          "new_api": null,
          "old_text": "addReplyLongLong(c,deleted)",
          "new_text": null,
          "old_line_content": "    addReplyLongLong(c,deleted);",
          "new_line_content": "    server.dirty += deleted;",
          "content_same": false
        },
        {
          "line": 1931,
          "old_api": "zslFreeLexRange",
          "new_api": null,
          "old_text": "zslFreeLexRange(&lexrange)",
          "new_text": null,
          "old_line_content": "    if (rangetype == ZRANGE_LEX) zslFreeLexRange(&lexrange);",
          "new_line_content": "cleanup:",
          "content_same": false
        },
        {
          "line": 1935,
          "old_api": "zremrangeGenericCommand",
          "new_api": null,
          "old_text": "zremrangeGenericCommand(c,ZRANGE_RANK)",
          "new_text": null,
          "old_line_content": "    zremrangeGenericCommand(c,ZRANGE_RANK);",
          "new_line_content": "void zremrangebyrankCommand(client *c) {",
          "content_same": false
        },
        {
          "line": 1939,
          "old_api": "zremrangeGenericCommand",
          "new_api": null,
          "old_text": "zremrangeGenericCommand(c,ZRANGE_SCORE)",
          "new_text": null,
          "old_line_content": "    zremrangeGenericCommand(c,ZRANGE_SCORE);",
          "new_line_content": "void zremrangebyscoreCommand(client *c) {",
          "content_same": false
        },
        {
          "line": 1943,
          "old_api": "zremrangeGenericCommand",
          "new_api": null,
          "old_text": "zremrangeGenericCommand(c,ZRANGE_LEX)",
          "new_text": null,
          "old_line_content": "    zremrangeGenericCommand(c,ZRANGE_LEX);",
          "new_line_content": "void zremrangebylexCommand(client *c) {",
          "content_same": false
        },
        {
          "line": 3991,
          "old_api": "getTimeoutFromObjectOrReply",
          "new_api": null,
          "old_text": "getTimeoutFromObjectOrReply(c,c->argv[timeout_idx],&timeout,UNIT_SECONDS)",
          "new_text": null,
          "old_line_content": "    if (getTimeoutFromObjectOrReply(c,c->argv[timeout_idx],&timeout,UNIT_SECONDS)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3996,
          "old_api": "lookupKeyWrite",
          "new_api": null,
          "old_text": "lookupKeyWrite(c->db,key)",
          "new_text": null,
          "old_line_content": "        o = lookupKeyWrite(c->db,key);",
          "new_line_content": "        key = keys[j];",
          "content_same": false
        },
        {
          "line": 4000,
          "old_api": "checkType",
          "new_api": null,
          "old_text": "checkType(c,o,OBJ_ZSET)",
          "new_text": null,
          "old_line_content": "        if (checkType(c,o,OBJ_ZSET)) return;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4002,
          "old_api": "zsetLength",
          "new_api": null,
          "old_text": "zsetLength(o)",
          "new_text": null,
          "old_line_content": "        long llen = zsetLength(o);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4007,
          "old_api": "genericZpopCommand",
          "new_api": null,
          "old_text": "genericZpopCommand(c, &key, 1, where, 1, count, use_nested_array, reply_nil_when_empty, NULL)",
          "new_text": null,
          "old_line_content": "        genericZpopCommand(c, &key, 1, where, 1, count, use_nested_array, reply_nil_when_empty, NULL);",
          "new_line_content": "        /* Non empty zset, this is like a normal ZPOP[MIN|MAX]. */",
          "content_same": false
        },
        {
          "line": 4011,
          "old_api": "rewriteClientCommandVector",
          "new_api": null,
          "old_text": "rewriteClientCommandVector(c,2,\n                                       (where == ZSET_MAX) ? shared.zpopmax : shared.zpopmin,\n                                       key)",
          "new_text": null,
          "old_line_content": "            rewriteClientCommandVector(c,2,",
          "new_line_content": "            /* Replicate it as ZPOP[MIN|MAX] instead of BZPOP[MIN|MAX]. */",
          "content_same": false
        },
        {
          "line": 4016,
          "old_api": "createStringObjectFromLongLong",
          "new_api": null,
          "old_text": "createStringObjectFromLongLong((count > llen) ? llen : count)",
          "new_text": null,
          "old_line_content": "            robj *count_obj = createStringObjectFromLongLong((count > llen) ? llen : count);",
          "new_line_content": "            /* Replicate it as ZPOP[MIN|MAX] with COUNT option. */",
          "content_same": false
        },
        {
          "line": 4020,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(count_obj)",
          "new_text": null,
          "old_line_content": "            decrRefCount(count_obj);",
          "new_line_content": "                                       key, count_obj);",
          "content_same": false
        },
        {
          "line": 4029,
          "old_api": "addReplyNullArray",
          "new_api": null,
          "old_text": "addReplyNullArray(c)",
          "new_text": null,
          "old_line_content": "        addReplyNullArray(c);",
          "new_line_content": "    if (c->flags & CLIENT_DENY_BLOCKING) {",
          "content_same": false
        },
        {
          "line": 4035,
          "old_api": "blockForKeys",
          "new_api": null,
          "old_text": "blockForKeys(c,BLOCKED_ZSET,c->argv+1,c->argc-2,count,timeout,NULL,&pos,NULL)",
          "new_text": null,
          "old_line_content": "    blockForKeys(c,BLOCKED_ZSET,c->argv+1,c->argc-2,count,timeout,NULL,&pos,NULL);",
          "new_line_content": "    struct blockPos pos = {where};",
          "content_same": false
        },
        {
          "line": 4040,
          "old_api": "blockingGenericZpopCommand",
          "new_api": null,
          "old_text": "blockingGenericZpopCommand(c, c->argv+1, c->argc-2, ZSET_MIN, c->argc-1, -1, 0, 0)",
          "new_text": null,
          "old_line_content": "    blockingGenericZpopCommand(c, c->argv+1, c->argc-2, ZSET_MIN, c->argc-1, -1, 0, 0);",
          "new_line_content": "void bzpopminCommand(client *c) {",
          "content_same": false
        },
        {
          "line": 4045,
          "old_api": "blockingGenericZpopCommand",
          "new_api": null,
          "old_text": "blockingGenericZpopCommand(c, c->argv+1, c->argc-2, ZSET_MAX, c->argc-1, -1, 0, 0)",
          "new_text": null,
          "old_line_content": "    blockingGenericZpopCommand(c, c->argv+1, c->argc-2, ZSET_MAX, c->argc-1, -1, 0, 0);",
          "new_line_content": "void bzpopmaxCommand(client *c) {",
          "content_same": false
        },
        {
          "line": 4051,
          "old_api": "addReplyArrayLen",
          "new_api": null,
          "old_text": "addReplyArrayLen(c,2)",
          "new_text": null,
          "old_line_content": "            addReplyArrayLen(c,2);",
          "new_line_content": "        if (vals && c->resp > 2)",
          "content_same": false
        },
        {
          "line": 4053,
          "old_api": "addReplyBulkCBuffer",
          "new_api": null,
          "old_text": "addReplyBulkCBuffer(c, keys[i].sval, keys[i].slen)",
          "new_text": null,
          "old_line_content": "            addReplyBulkCBuffer(c, keys[i].sval, keys[i].slen);",
          "new_line_content": "        if (keys[i].sval)",
          "content_same": false
        },
        {
          "line": 4055,
          "old_api": "addReplyBulkLongLong",
          "new_api": null,
          "old_text": "addReplyBulkLongLong(c, keys[i].lval)",
          "new_text": null,
          "old_line_content": "            addReplyBulkLongLong(c, keys[i].lval);",
          "new_line_content": "        else",
          "content_same": false
        },
        {
          "line": 4058,
          "old_api": "zzlStrtod",
          "new_api": null,
          "old_text": "zzlStrtod(vals[i].sval,vals[i].slen)",
          "new_text": null,
          "old_line_content": "                addReplyDouble(c, zzlStrtod(vals[i].sval,vals[i].slen));",
          "new_line_content": "            if (vals[i].sval) {",
          "content_same": false
        },
        {
          "line": 4060,
          "old_api": "addReplyDouble",
          "new_api": null,
          "old_text": "addReplyDouble(c, vals[i].lval)",
          "new_text": null,
          "old_line_content": "                addReplyDouble(c, vals[i].lval);",
          "new_line_content": "            } else",
          "content_same": false
        },
        {
          "line": 2016,
          "old_api": "dictGetIterator",
          "new_api": null,
          "old_text": "dictGetIterator(op->subject->ptr)",
          "new_text": null,
          "old_line_content": "            it->ht.di = dictGetIterator(op->subject->ptr);",
          "new_line_content": "            it->ht.dict = op->subject->ptr;",
          "content_same": false
        },
        {
          "line": 2019,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Unknown set encoding\")",
          "new_text": null,
          "old_line_content": "            serverPanic(\"Unknown set encoding\");",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 2028,
          "old_api": "lpSeek",
          "new_api": null,
          "old_text": "lpSeek(it->zl.zl,-2)",
          "new_text": null,
          "old_line_content": "            it->zl.eptr = lpSeek(it->zl.zl,-2);",
          "new_line_content": "            it->zl.zl = op->subject->ptr;",
          "content_same": false
        },
        {
          "line": 2030,
          "old_api": "lpNext",
          "new_api": null,
          "old_text": "lpNext(it->zl.zl,it->zl.eptr)",
          "new_text": null,
          "old_line_content": "                it->zl.sptr = lpNext(it->zl.zl,it->zl.eptr);",
          "new_line_content": "            if (it->zl.eptr != NULL) {",
          "content_same": false
        },
        {
          "line": 4080,
          "old_api": "lookupKeyReadOrReply",
          "new_api": null,
          "old_text": "lookupKeyReadOrReply(c, c->argv[1], shared.emptyarray)",
          "new_text": null,
          "old_line_content": "    if ((zsetobj = lookupKeyReadOrReply(c, c->argv[1], shared.emptyarray))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2037,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Unknown sorted set encoding\")",
          "new_text": null,
          "old_line_content": "            serverPanic(\"Unknown sorted set encoding\");",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 2040,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Unsupported type\")",
          "new_text": null,
          "old_line_content": "        serverPanic(\"Unsupported type\");",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 4093,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.emptyarray)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.emptyarray);",
          "new_line_content": "    if (count == 0) {",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 212,
      "total_additions": 622,
      "total_deletions": 622,
      "total_api_changes": 1456
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 3,
        "api_related_lines": 1456,
        "non_api_lines": 1,
        "non_api_line_numbers": [
          123
        ]
      }
    },
    "api_calls_before": 912,
    "api_calls_after": 912,
    "diff_info": {
      "added_lines": 2,
      "removed_lines": 1,
      "total_diff_lines": 16
    }
  }
}
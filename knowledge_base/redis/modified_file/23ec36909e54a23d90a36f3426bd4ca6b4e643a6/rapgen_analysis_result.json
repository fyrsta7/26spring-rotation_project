{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/23ec36909e54a23d90a36f3426bd4ca6b4e643a6",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/23ec36909e54a23d90a36f3426bd4ca6b4e643a6/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/23ec36909e54a23d90a36f3426bd4ca6b4e643a6/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/redis/modified_file/23ec36909e54a23d90a36f3426bd4ca6b4e643a6/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 743,
          "old_api": "dictGetKey",
          "new_api": "dictNext",
          "old_text": "dictGetKey(de)",
          "new_text": "dictNext(di)",
          "old_line_content": "                sds field = dictGetKey(de);",
          "new_line_content": "            while((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 744,
          "old_api": "dictGetVal",
          "new_api": "dictGetKey",
          "old_text": "dictGetVal(de)",
          "new_text": "dictGetKey(de)",
          "old_line_content": "                sds value = dictGetVal(de);",
          "new_line_content": "                sds field = dictGetKey(de);",
          "content_same": false
        },
        {
          "line": 747,
          "old_api": "sdslen",
          "new_api": "rdbSaveRawString",
          "old_text": "sdslen(field)",
          "new_text": "rdbSaveRawString(rdb,(unsigned char*)field,\n                        sdslen(field))",
          "old_line_content": "                        sdslen(field))) == -1) return -1;",
          "new_line_content": "                if ((n = rdbSaveRawString(rdb,(unsigned char*)field,",
          "content_same": false
        },
        {
          "line": 750,
          "old_api": "sdslen",
          "new_api": "rdbSaveRawString",
          "old_text": "sdslen(value)",
          "new_text": "rdbSaveRawString(rdb,(unsigned char*)value,\n                        sdslen(value))",
          "old_line_content": "                        sdslen(value))) == -1) return -1;",
          "new_line_content": "                if ((n = rdbSaveRawString(rdb,(unsigned char*)value,",
          "content_same": false
        },
        {
          "line": 775,
          "old_api": "zfree",
          "new_api": "moduleFreeContext",
          "old_text": "zfree(io.ctx)",
          "new_text": "moduleFreeContext(io.ctx)",
          "old_line_content": "            zfree(io.ctx);",
          "new_line_content": "            moduleFreeContext(io.ctx);",
          "content_same": false
        },
        {
          "line": 790,
          "old_api": "serverAssertWithInfo",
          "new_api": "rdbSaveObject",
          "old_text": "serverAssertWithInfo(NULL,o,len != -1)",
          "new_text": "rdbSaveObject(NULL,o)",
          "old_line_content": "    serverAssertWithInfo(NULL,o,len != -1);",
          "new_line_content": "    ssize_t len = rdbSaveObject(NULL,o);",
          "content_same": false
        },
        {
          "line": 806,
          "old_api": "rdbSaveMillisecondTime",
          "new_api": "rdbSaveType",
          "old_text": "rdbSaveMillisecondTime(rdb,expiretime)",
          "new_text": "rdbSaveType(rdb,RDB_OPCODE_EXPIRETIME_MS)",
          "old_line_content": "        if (rdbSaveMillisecondTime(rdb,expiretime) == -1) return -1;",
          "new_line_content": "        if (rdbSaveType(rdb,RDB_OPCODE_EXPIRETIME_MS) == -1) return -1;",
          "content_same": false
        },
        {
          "line": 811,
          "old_api": "rdbSaveStringObject",
          "new_api": "rdbSaveObjectType",
          "old_text": "rdbSaveStringObject(rdb,key)",
          "new_text": "rdbSaveObjectType(rdb,val)",
          "old_line_content": "    if (rdbSaveStringObject(rdb,key) == -1) return -1;",
          "new_line_content": "    if (rdbSaveObjectType(rdb,val) == -1) return -1;",
          "content_same": false
        },
        {
          "line": 812,
          "old_api": "rdbSaveObject",
          "new_api": "rdbSaveStringObject",
          "old_text": "rdbSaveObject(rdb,val)",
          "new_text": "rdbSaveStringObject(rdb,key)",
          "old_line_content": "    if (rdbSaveObject(rdb,val) == -1) return -1;",
          "new_line_content": "    if (rdbSaveStringObject(rdb,key) == -1) return -1;",
          "content_same": false
        },
        {
          "line": 819,
          "old_api": "rdbSaveRawString",
          "new_api": "rdbSaveType",
          "old_text": "rdbSaveRawString(rdb,key,keylen)",
          "new_text": "rdbSaveType(rdb,RDB_OPCODE_AUX)",
          "old_line_content": "    if (rdbSaveRawString(rdb,key,keylen) == -1) return -1;",
          "new_line_content": "    if (rdbSaveType(rdb,RDB_OPCODE_AUX) == -1) return -1;",
          "content_same": false
        },
        {
          "line": 834,
          "old_api": "strlen",
          "new_api": "ll2string",
          "old_text": "strlen(key)",
          "new_text": "ll2string(buf,sizeof(buf),val)",
          "old_line_content": "    return rdbSaveAuxField(rdb,key,strlen(key),buf,vlen);",
          "new_line_content": "    int vlen = ll2string(buf,sizeof(buf),val);",
          "content_same": false
        },
        {
          "line": 844,
          "old_api": "rdbSaveAuxFieldStrInt",
          "new_api": "rdbSaveAuxFieldStrStr",
          "old_text": "rdbSaveAuxFieldStrInt(rdb,\"redis-bits\",redis_bits)",
          "new_text": "rdbSaveAuxFieldStrStr(rdb,\"redis-ver\",REDIS_VERSION)",
          "old_line_content": "    if (rdbSaveAuxFieldStrInt(rdb,\"redis-bits\",redis_bits) == -1) return -1;",
          "new_line_content": "    if (rdbSaveAuxFieldStrStr(rdb,\"redis-ver\",REDIS_VERSION) == -1) return -1;",
          "content_same": false
        },
        {
          "line": 845,
          "old_api": "time",
          "new_api": "rdbSaveAuxFieldStrInt",
          "old_text": "time(NULL)",
          "new_text": "rdbSaveAuxFieldStrInt(rdb,\"redis-bits\",redis_bits)",
          "old_line_content": "    if (rdbSaveAuxFieldStrInt(rdb,\"ctime\",time(NULL)) == -1) return -1;",
          "new_line_content": "    if (rdbSaveAuxFieldStrInt(rdb,\"redis-bits\",redis_bits) == -1) return -1;",
          "content_same": false
        },
        {
          "line": 846,
          "old_api": "zmalloc_used_memory",
          "new_api": "time",
          "old_text": "zmalloc_used_memory()",
          "new_text": "time(NULL)",
          "old_line_content": "    if (rdbSaveAuxFieldStrInt(rdb,\"used-mem\",zmalloc_used_memory()) == -1) return -1;",
          "new_line_content": "    if (rdbSaveAuxFieldStrInt(rdb,\"ctime\",time(NULL)) == -1) return -1;",
          "content_same": false
        },
        {
          "line": 858,
          "old_api": "rdbSaveAuxFieldStrStr",
          "new_api": "rdbSaveAuxFieldStrInt",
          "old_text": "rdbSaveAuxFieldStrStr(rdb,\"repl-id\",server.replid)",
          "new_text": "rdbSaveAuxFieldStrInt(rdb,\"aof-preamble\",aof_preamble)",
          "old_line_content": "    if (rdbSaveAuxFieldStrStr(rdb,\"repl-id\",server.replid) == -1) return -1;",
          "new_line_content": "    if (rdbSaveAuxFieldStrInt(rdb,\"aof-preamble\",aof_preamble) == -1) return -1;",
          "content_same": false
        },
        {
          "line": 859,
          "old_api": "rdbSaveAuxFieldStrInt",
          "new_api": "rdbSaveAuxFieldStrStr",
          "old_text": "rdbSaveAuxFieldStrInt(rdb,\"repl-offset\",server.master_repl_offset)",
          "new_text": "rdbSaveAuxFieldStrStr(rdb,\"repl-id\",server.replid)",
          "old_line_content": "    if (rdbSaveAuxFieldStrInt(rdb,\"repl-offset\",server.master_repl_offset) == -1) return -1;",
          "new_line_content": "    if (rdbSaveAuxFieldStrStr(rdb,\"repl-id\",server.replid) == -1) return -1;",
          "content_same": false
        },
        {
          "line": 883,
          "old_api": "rdbWriteRaw",
          "new_api": "snprintf",
          "old_text": "rdbWriteRaw(rdb,magic,9)",
          "new_text": "snprintf(magic,sizeof(magic),\"REDIS%04d\",RDB_VERSION)",
          "old_line_content": "    if (rdbWriteRaw(rdb,magic,9) == -1) goto werr;",
          "new_line_content": "    snprintf(magic,sizeof(magic),\"REDIS%04d\",RDB_VERSION);",
          "content_same": false
        },
        {
          "line": 884,
          "old_api": "rdbSaveInfoAuxFields",
          "new_api": "rdbWriteRaw",
          "old_text": "rdbSaveInfoAuxFields(rdb,flags,rsi)",
          "new_text": "rdbWriteRaw(rdb,magic,9)",
          "old_line_content": "    if (rdbSaveInfoAuxFields(rdb,flags,rsi) == -1) goto werr;",
          "new_line_content": "    if (rdbWriteRaw(rdb,magic,9) == -1) goto werr;",
          "content_same": false
        },
        {
          "line": 890,
          "old_api": "dictGetSafeIterator",
          "new_api": "dictSize",
          "old_text": "dictGetSafeIterator(d)",
          "new_text": "dictSize(d)",
          "old_line_content": "        di = dictGetSafeIterator(d);",
          "new_line_content": "        if (dictSize(d) == 0) continue;",
          "content_same": false
        },
        {
          "line": 895,
          "old_api": "rdbSaveLen",
          "new_api": "rdbSaveType",
          "old_text": "rdbSaveLen(rdb,j)",
          "new_text": "rdbSaveType(rdb,RDB_OPCODE_SELECTDB)",
          "old_line_content": "        if (rdbSaveLen(rdb,j) == -1) goto werr;",
          "new_line_content": "        if (rdbSaveType(rdb,RDB_OPCODE_SELECTDB) == -1) goto werr;",
          "content_same": false
        },
        {
          "line": 909,
          "old_api": "rdbSaveLen",
          "new_api": "rdbSaveType",
          "old_text": "rdbSaveLen(rdb,db_size)",
          "new_text": "rdbSaveType(rdb,RDB_OPCODE_RESIZEDB)",
          "old_line_content": "        if (rdbSaveLen(rdb,db_size) == -1) goto werr;",
          "new_line_content": "        if (rdbSaveType(rdb,RDB_OPCODE_RESIZEDB) == -1) goto werr;",
          "content_same": false
        },
        {
          "line": 914,
          "old_api": "dictGetKey",
          "new_api": "dictNext",
          "old_text": "dictGetKey(de)",
          "new_text": "dictNext(di)",
          "old_line_content": "            sds keystr = dictGetKey(de);",
          "new_line_content": "        while((de = dictNext(di)) != NULL) {",
          "content_same": false
        },
        {
          "line": 915,
          "old_api": "dictGetVal",
          "new_api": "dictGetKey",
          "old_text": "dictGetVal(de)",
          "new_text": "dictGetKey(de)",
          "old_line_content": "            robj key, *o = dictGetVal(de);",
          "new_line_content": "            sds keystr = dictGetKey(de);",
          "content_same": false
        },
        {
          "line": 919,
          "old_api": "getExpire",
          "new_api": "initStaticStringObject",
          "old_text": "getExpire(db,&key)",
          "new_text": "initStaticStringObject(key,keystr)",
          "old_line_content": "            expire = getExpire(db,&key);",
          "new_line_content": "            initStaticStringObject(key,keystr);",
          "content_same": false
        },
        {
          "line": 920,
          "old_api": "rdbSaveKeyValuePair",
          "new_api": "getExpire",
          "old_text": "rdbSaveKeyValuePair(rdb,&key,o,expire,now)",
          "new_text": "getExpire(db,&key)",
          "old_line_content": "            if (rdbSaveKeyValuePair(rdb,&key,o,expire,now) == -1) goto werr;",
          "new_line_content": "            expire = getExpire(db,&key);",
          "content_same": false
        },
        {
          "line": 943,
          "old_api": "rioWrite",
          "new_api": "memrev64ifbe",
          "old_text": "rioWrite(rdb,&cksum,8)",
          "new_text": "memrev64ifbe(&cksum)",
          "old_line_content": "    if (rioWrite(rdb,&cksum,8) == 0) goto werr;",
          "new_line_content": "    memrev64ifbe(&cksum);",
          "content_same": false
        },
        {
          "line": 968,
          "old_api": "rdbSaveRio",
          "new_api": "rioWrite",
          "old_text": "rdbSaveRio(rdb,error,RDB_SAVE_NONE,rsi)",
          "new_text": "rioWrite(rdb,\"\\r\\n\",2)",
          "old_line_content": "    if (rdbSaveRio(rdb,error,RDB_SAVE_NONE,rsi) == C_ERR) goto werr;",
          "new_line_content": "    if (rioWrite(rdb,\"\\r\\n\",2) == 0) goto werr;",
          "content_same": false
        },
        {
          "line": 969,
          "old_api": "rioWrite",
          "new_api": "rdbSaveRio",
          "old_text": "rioWrite(rdb,eofmark,RDB_EOF_MARK_SIZE)",
          "new_text": "rdbSaveRio(rdb,error,RDB_SAVE_NONE,rsi)",
          "old_line_content": "    if (rioWrite(rdb,eofmark,RDB_EOF_MARK_SIZE) == 0) goto werr;",
          "new_line_content": "    if (rdbSaveRio(rdb,error,RDB_SAVE_NONE,rsi) == C_ERR) goto werr;",
          "content_same": false
        },
        {
          "line": 987,
          "old_api": "fopen",
          "new_api": "getpid",
          "old_text": "fopen(tmpfile,\"w\")",
          "new_text": "getpid()",
          "old_line_content": "    fp = fopen(tmpfile,\"w\");",
          "new_line_content": "    snprintf(tmpfile,256,\"temp-%d.rdb\", (int) getpid());",
          "content_same": false
        },
        {
          "line": 990,
          "old_api": "serverLog",
          "new_api": "getcwd",
          "old_text": "serverLog(LL_WARNING,\n            \"Failed opening the RDB file %s (in server root dir %s) \"\n            \"for saving: %s\",\n            filename,\n            cwdp ? cwdp : \"unknown\",\n            strerror(errno))",
          "new_text": "getcwd(cwd,MAXPATHLEN)",
          "old_line_content": "        serverLog(LL_WARNING,",
          "new_line_content": "        char *cwdp = getcwd(cwd,MAXPATHLEN);",
          "content_same": false
        },
        {
          "line": 1000,
          "old_api": "rdbSaveRio",
          "new_api": "rioInitWithFile",
          "old_text": "rdbSaveRio(&rdb,&error,RDB_SAVE_NONE,rsi)",
          "new_text": "rioInitWithFile(&rdb,fp)",
          "old_line_content": "    if (rdbSaveRio(&rdb,&error,RDB_SAVE_NONE,rsi) == C_ERR) {",
          "new_line_content": "    rioInitWithFile(&rdb,fp);",
          "content_same": false
        },
        {
          "line": 1007,
          "old_api": "fileno",
          "new_api": "fflush",
          "old_text": "fileno(fp)",
          "new_text": "fflush(fp)",
          "old_line_content": "    if (fsync(fileno(fp)) == -1) goto werr;",
          "new_line_content": "    if (fflush(fp) == EOF) goto werr;",
          "content_same": false
        },
        {
          "line": 1008,
          "old_api": "fclose",
          "new_api": "fileno",
          "old_text": "fclose(fp)",
          "new_text": "fileno(fp)",
          "old_line_content": "    if (fclose(fp) == EOF) goto werr;",
          "new_line_content": "    if (fsync(fileno(fp)) == -1) goto werr;",
          "content_same": false
        },
        {
          "line": 1013,
          "old_api": "getcwd",
          "new_api": "rename",
          "old_text": "getcwd(cwd,MAXPATHLEN)",
          "new_text": "rename(tmpfile,filename)",
          "old_line_content": "        char *cwdp = getcwd(cwd,MAXPATHLEN);",
          "new_line_content": "    if (rename(tmpfile,filename) == -1) {",
          "content_same": false
        },
        {
          "line": 1014,
          "old_api": "serverLog",
          "new_api": "getcwd",
          "old_text": "serverLog(LL_WARNING,\n            \"Error moving temp DB file %s on the final \"\n            \"destination %s (in server root dir %s): %s\",\n            tmpfile,\n            filename,\n            cwdp ? cwdp : \"unknown\",\n            strerror(errno))",
          "new_text": "getcwd(cwd,MAXPATHLEN)",
          "old_line_content": "        serverLog(LL_WARNING,",
          "new_line_content": "        char *cwdp = getcwd(cwd,MAXPATHLEN);",
          "content_same": false
        },
        {
          "line": 1021,
          "old_api": "unlink",
          "new_api": "strerror",
          "old_text": "unlink(tmpfile)",
          "new_text": "strerror(errno)",
          "old_line_content": "        unlink(tmpfile);",
          "new_line_content": "            strerror(errno));",
          "content_same": false
        },
        {
          "line": 1033,
          "old_api": "fclose",
          "new_api": "strerror",
          "old_text": "fclose(fp)",
          "new_text": "strerror(errno)",
          "old_line_content": "    fclose(fp);",
          "new_line_content": "    serverLog(LL_WARNING,\"Write error saving DB on disk: %s\", strerror(errno));",
          "content_same": false
        },
        {
          "line": 1034,
          "old_api": "unlink",
          "new_api": "fclose",
          "old_text": "unlink(tmpfile)",
          "new_text": "fclose(fp)",
          "old_line_content": "    unlink(tmpfile);",
          "new_line_content": "    fclose(fp);",
          "content_same": false
        },
        {
          "line": 1046,
          "old_api": "openChildInfoPipe",
          "new_api": "time",
          "old_text": "openChildInfoPipe()",
          "new_text": "time(NULL)",
          "old_line_content": "    openChildInfoPipe();",
          "new_line_content": "    server.lastbgsave_try = time(NULL);",
          "content_same": false
        },
        {
          "line": 1049,
          "old_api": "fork",
          "new_api": "ustime",
          "old_text": "fork()",
          "new_text": "ustime()",
          "old_line_content": "    if ((childpid = fork()) == 0) {",
          "new_line_content": "    start = ustime();",
          "content_same": false
        },
        {
          "line": 1054,
          "old_api": "redisSetProcTitle",
          "new_api": "closeListeningSockets",
          "old_text": "redisSetProcTitle(\"redis-rdb-bgsave\")",
          "new_text": "closeListeningSockets(0)",
          "old_line_content": "        redisSetProcTitle(\"redis-rdb-bgsave\");",
          "new_line_content": "        closeListeningSockets(0);",
          "content_same": false
        },
        {
          "line": 1055,
          "old_api": "rdbSave",
          "new_api": "redisSetProcTitle",
          "old_text": "rdbSave(filename,rsi)",
          "new_text": "redisSetProcTitle(\"redis-rdb-bgsave\")",
          "old_line_content": "        retval = rdbSave(filename,rsi);",
          "new_line_content": "        redisSetProcTitle(\"redis-rdb-bgsave\");",
          "content_same": false
        },
        {
          "line": 1072,
          "old_api": "zmalloc_used_memory",
          "new_api": "ustime",
          "old_text": "zmalloc_used_memory()",
          "new_text": "ustime()",
          "old_line_content": "        server.stat_fork_rate = (double) zmalloc_used_memory() * 1000000 / server.stat_fork_time / (1024*1024*1024); /* GB per second. */",
          "new_line_content": "        server.stat_fork_time = ustime()-start;",
          "content_same": false
        },
        {
          "line": 1073,
          "old_api": "latencyAddSampleIfNeeded",
          "new_api": "zmalloc_used_memory",
          "old_text": "latencyAddSampleIfNeeded(\"fork\",server.stat_fork_time/1000)",
          "new_text": "zmalloc_used_memory()",
          "old_line_content": "        latencyAddSampleIfNeeded(\"fork\",server.stat_fork_time/1000);",
          "new_line_content": "        server.stat_fork_rate = (double) zmalloc_used_memory() * 1000000 / server.stat_fork_time / (1024*1024*1024); /* GB per second. */",
          "content_same": false
        },
        {
          "line": 1078,
          "old_api": "strerror",
          "new_api": "serverLog",
          "old_text": "strerror(errno)",
          "new_text": "serverLog(LL_WARNING,\"Can't save in background: fork: %s\",\n                strerror(errno))",
          "old_line_content": "                strerror(errno));",
          "new_line_content": "            serverLog(LL_WARNING,\"Can't save in background: fork: %s\",",
          "content_same": false
        },
        {
          "line": 1082,
          "old_api": "time",
          "new_api": "serverLog",
          "old_text": "time(NULL)",
          "new_text": "serverLog(LL_NOTICE,\"Background saving started by pid %d\",childpid)",
          "old_line_content": "        server.rdb_save_time_start = time(NULL);",
          "new_line_content": "        serverLog(LL_NOTICE,\"Background saving started by pid %d\",childpid);",
          "content_same": false
        },
        {
          "line": 1095,
          "old_api": "unlink",
          "new_api": "snprintf",
          "old_text": "unlink(tmpfile)",
          "new_text": "snprintf(tmpfile,sizeof(tmpfile),\"temp-%d.rdb\", (int) childpid)",
          "old_line_content": "    unlink(tmpfile);",
          "new_line_content": "    snprintf(tmpfile,sizeof(tmpfile),\"temp-%d.rdb\", (int) childpid);",
          "content_same": false
        },
        {
          "line": 1108,
          "old_api": "tryObjectEncoding",
          "new_api": "rdbLoadEncodedStringObject",
          "old_text": "tryObjectEncoding(o)",
          "new_text": "rdbLoadEncodedStringObject(rdb)",
          "old_line_content": "        o = tryObjectEncoding(o);",
          "new_line_content": "        if ((o = rdbLoadEncodedStringObject(rdb)) == NULL) return NULL;",
          "content_same": false
        },
        {
          "line": 1114,
          "old_api": "quicklistSetOptions",
          "new_api": "createQuicklistObject",
          "old_text": "quicklistSetOptions(o->ptr, server.list_max_ziplist_size,\n                            server.list_compress_depth)",
          "new_text": "createQuicklistObject()",
          "old_line_content": "        quicklistSetOptions(o->ptr, server.list_max_ziplist_size,",
          "new_line_content": "        o = createQuicklistObject();",
          "content_same": false
        },
        {
          "line": 1120,
          "old_api": "getDecodedObject",
          "new_api": "rdbLoadEncodedStringObject",
          "old_text": "getDecodedObject(ele)",
          "new_text": "rdbLoadEncodedStringObject(rdb)",
          "old_line_content": "            dec = getDecodedObject(ele);",
          "new_line_content": "            if ((ele = rdbLoadEncodedStringObject(rdb)) == NULL) return NULL;",
          "content_same": false
        },
        {
          "line": 1121,
          "old_api": "sdslen",
          "new_api": "getDecodedObject",
          "old_text": "sdslen(dec->ptr)",
          "new_text": "getDecodedObject(ele)",
          "old_line_content": "            size_t len = sdslen(dec->ptr);",
          "new_line_content": "            dec = getDecodedObject(ele);",
          "content_same": false
        },
        {
          "line": 1122,
          "old_api": "quicklistPushTail",
          "new_api": "sdslen",
          "old_text": "quicklistPushTail(o->ptr, dec->ptr, len)",
          "new_text": "sdslen(dec->ptr)",
          "old_line_content": "            quicklistPushTail(o->ptr, dec->ptr, len);",
          "new_line_content": "            size_t len = sdslen(dec->ptr);",
          "content_same": false
        },
        {
          "line": 1123,
          "old_api": "decrRefCount",
          "new_api": "quicklistPushTail",
          "old_text": "decrRefCount(dec)",
          "new_text": "quicklistPushTail(o->ptr, dec->ptr, len)",
          "old_line_content": "            decrRefCount(dec);",
          "new_line_content": "            quicklistPushTail(o->ptr, dec->ptr, len);",
          "content_same": false
        },
        {
          "line": 1152,
          "old_api": "intsetAdd",
          "new_api": "isSdsRepresentableAsLongLong",
          "old_text": "intsetAdd(o->ptr,llval,NULL)",
          "new_text": "isSdsRepresentableAsLongLong(sdsele,&llval)",
          "old_line_content": "                    o->ptr = intsetAdd(o->ptr,llval,NULL);",
          "new_line_content": "                if (isSdsRepresentableAsLongLong(sdsele,&llval) == C_OK) {",
          "content_same": false
        },
        {
          "line": 1155,
          "old_api": "dictExpand",
          "new_api": "setTypeConvert",
          "old_text": "dictExpand(o->ptr,len)",
          "new_text": "setTypeConvert(o,OBJ_ENCODING_HT)",
          "old_line_content": "                    dictExpand(o->ptr,len);",
          "new_line_content": "                    setTypeConvert(o,OBJ_ENCODING_HT);",
          "content_same": false
        },
        {
          "line": 1174,
          "old_api": "createZsetObject",
          "new_api": "rdbLoadLen",
          "old_text": "createZsetObject()",
          "new_text": "rdbLoadLen(rdb,NULL)",
          "old_line_content": "        o = createZsetObject();",
          "new_line_content": "        if ((zsetlen = rdbLoadLen(rdb,NULL)) == RDB_LENERR) return NULL;",
          "content_same": false
        },
        {
          "line": 1196,
          "old_api": "dictAdd",
          "new_api": "zslInsert",
          "old_text": "dictAdd(zs->dict,sdsele,&znode->score)",
          "new_text": "zslInsert(zs->zsl,score,sdsele)",
          "old_line_content": "            dictAdd(zs->dict,sdsele,&znode->score);",
          "new_line_content": "            znode = zslInsert(zs->zsl,score,sdsele);",
          "content_same": false
        },
        {
          "line": 1228,
          "old_api": "sdslen",
          "new_api": "ziplistPush",
          "old_text": "sdslen(field)",
          "new_text": "ziplistPush(o->ptr, (unsigned char*)field,\n                    sdslen(field), ZIPLIST_TAIL)",
          "old_line_content": "                    sdslen(field), ZIPLIST_TAIL);",
          "new_line_content": "            o->ptr = ziplistPush(o->ptr, (unsigned char*)field,",
          "content_same": false
        },
        {
          "line": 1229,
          "old_api": "ziplistPush",
          "new_api": "sdslen",
          "old_text": "ziplistPush(o->ptr, (unsigned char*)value,\n                    sdslen(value), ZIPLIST_TAIL)",
          "new_text": "sdslen(field)",
          "old_line_content": "            o->ptr = ziplistPush(o->ptr, (unsigned char*)value,",
          "new_line_content": "                    sdslen(field), ZIPLIST_TAIL);",
          "content_same": false
        },
        {
          "line": 1230,
          "old_api": "sdslen",
          "new_api": "ziplistPush",
          "old_text": "sdslen(value)",
          "new_text": "ziplistPush(o->ptr, (unsigned char*)value,\n                    sdslen(value), ZIPLIST_TAIL)",
          "old_line_content": "                    sdslen(value), ZIPLIST_TAIL);",
          "new_line_content": "            o->ptr = ziplistPush(o->ptr, (unsigned char*)value,",
          "content_same": false
        },
        {
          "line": 1238,
          "old_api": "hashTypeConvert",
          "new_api": "sdsfree",
          "old_text": "hashTypeConvert(o, OBJ_ENCODING_HT)",
          "new_text": "sdsfree(value)",
          "old_line_content": "                hashTypeConvert(o, OBJ_ENCODING_HT);",
          "new_line_content": "                sdsfree(value);",
          "content_same": false
        },
        {
          "line": 1265,
          "old_api": "createQuicklistObject",
          "new_api": "rdbLoadLen",
          "old_text": "createQuicklistObject()",
          "new_text": "rdbLoadLen(rdb,NULL)",
          "old_line_content": "        o = createQuicklistObject();",
          "new_line_content": "        if ((len = rdbLoadLen(rdb,NULL)) == RDB_LENERR) return NULL;",
          "content_same": false
        },
        {
          "line": 1266,
          "old_api": "quicklistSetOptions",
          "new_api": "createQuicklistObject",
          "old_text": "quicklistSetOptions(o->ptr, server.list_max_ziplist_size,\n                            server.list_compress_depth)",
          "new_text": "createQuicklistObject()",
          "old_line_content": "        quicklistSetOptions(o->ptr, server.list_max_ziplist_size,",
          "new_line_content": "        o = createQuicklistObject();",
          "content_same": false
        },
        {
          "line": 1298,
          "old_api": "zipmapRewind",
          "new_api": "ziplistNew",
          "old_text": "zipmapRewind(o->ptr)",
          "new_text": "ziplistNew()",
          "old_line_content": "                    unsigned char *zi = zipmapRewind(o->ptr);",
          "new_line_content": "                    unsigned char *zl = ziplistNew();",
          "content_same": false
        },
        {
          "line": 1331,
          "old_api": "setTypeConvert",
          "new_api": "intsetLen",
          "old_text": "setTypeConvert(o,OBJ_ENCODING_HT)",
          "new_text": "intsetLen(o->ptr)",
          "old_line_content": "                    setTypeConvert(o,OBJ_ENCODING_HT);",
          "new_line_content": "                if (intsetLen(o->ptr) > server.set_max_intset_entries)",
          "content_same": false
        },
        {
          "line": 1337,
          "old_api": "zsetConvert",
          "new_api": "zsetLength",
          "old_text": "zsetConvert(o,OBJ_ENCODING_SKIPLIST)",
          "new_text": "zsetLength(o)",
          "old_line_content": "                    zsetConvert(o,OBJ_ENCODING_SKIPLIST);",
          "new_line_content": "                if (zsetLength(o) > server.zset_max_ziplist_entries)",
          "content_same": false
        },
        {
          "line": 1343,
          "old_api": "hashTypeConvert",
          "new_api": "hashTypeLength",
          "old_text": "hashTypeConvert(o, OBJ_ENCODING_HT)",
          "new_text": "hashTypeLength(o)",
          "old_line_content": "                    hashTypeConvert(o, OBJ_ENCODING_HT);",
          "new_line_content": "                if (hashTypeLength(o) > server.hash_max_ziplist_entries)",
          "content_same": false
        },
        {
          "line": 1351,
          "old_api": "moduleTypeLookupModuleByID",
          "new_api": "rdbLoadLen",
          "old_text": "moduleTypeLookupModuleByID(moduleid)",
          "new_text": "rdbLoadLen(rdb,NULL)",
          "old_line_content": "        moduleType *mt = moduleTypeLookupModuleByID(moduleid);",
          "new_line_content": "        uint64_t moduleid = rdbLoadLen(rdb,NULL);",
          "content_same": false
        },
        {
          "line": 1356,
          "old_api": "serverLog",
          "new_api": "moduleTypeNameByID",
          "old_text": "serverLog(LL_WARNING,\"The RDB file contains module data I can't load: no matching module '%s'\", name)",
          "new_text": "moduleTypeNameByID(name,moduleid)",
          "old_line_content": "            serverLog(LL_WARNING,\"The RDB file contains module data I can't load: no matching module '%s'\", name);",
          "new_line_content": "            moduleTypeNameByID(name,moduleid);",
          "content_same": false
        },
        {
          "line": 1357,
          "old_api": "exit",
          "new_api": "serverLog",
          "old_text": "exit(1)",
          "new_text": "serverLog(LL_WARNING,\"The RDB file contains module data I can't load: no matching module '%s'\", name)",
          "old_line_content": "            exit(1);",
          "new_line_content": "            serverLog(LL_WARNING,\"The RDB file contains module data I can't load: no matching module '%s'\", name);",
          "content_same": false
        },
        {
          "line": 1366,
          "old_api": "serverLog",
          "new_api": "moduleTypeNameByID",
          "old_text": "serverLog(LL_WARNING,\"The RDB file contains module data for the module type '%s', that the responsible module is not able to load. Check for modules log above for additional clues.\", name)",
          "new_text": "moduleTypeNameByID(name,moduleid)",
          "old_line_content": "            serverLog(LL_WARNING,\"The RDB file contains module data for the module type '%s', that the responsible module is not able to load. Check for modules log above for additional clues.\", name);",
          "new_line_content": "            moduleTypeNameByID(name,moduleid);",
          "content_same": false
        },
        {
          "line": 1367,
          "old_api": "exit",
          "new_api": "serverLog",
          "old_text": "exit(1)",
          "new_text": "serverLog(LL_WARNING,\"The RDB file contains module data for the module type '%s', that the responsible module is not able to load. Check for modules log above for additional clues.\", name)",
          "old_line_content": "            exit(1);",
          "new_line_content": "            serverLog(LL_WARNING,\"The RDB file contains module data for the module type '%s', that the responsible module is not able to load. Check for modules log above for additional clues.\", name);",
          "content_same": false
        },
        {
          "line": 1418,
          "old_api": "loadingProgress",
          "new_api": "replicationSendNewlineToMaster",
          "old_text": "loadingProgress(r->processed_bytes)",
          "new_text": "replicationSendNewlineToMaster()",
          "old_line_content": "        loadingProgress(r->processed_bytes);",
          "new_line_content": "            replicationSendNewlineToMaster();",
          "content_same": false
        },
        {
          "line": 1419,
          "old_api": "processEventsWhileBlocked",
          "new_api": "loadingProgress",
          "old_text": "processEventsWhileBlocked()",
          "new_text": "loadingProgress(r->processed_bytes)",
          "old_line_content": "        processEventsWhileBlocked();",
          "new_line_content": "        loadingProgress(r->processed_bytes);",
          "content_same": false
        },
        {
          "line": 1437,
          "old_api": "serverLog",
          "new_api": "memcmp",
          "old_text": "serverLog(LL_WARNING,\"Wrong signature trying to load DB from file\")",
          "new_text": "memcmp(buf,\"REDIS\",5)",
          "old_line_content": "        serverLog(LL_WARNING,\"Wrong signature trying to load DB from file\");",
          "new_line_content": "    if (memcmp(buf,\"REDIS\",5) != 0) {",
          "content_same": false
        },
        {
          "line": 1517,
          "old_api": "atoi",
          "new_api": "strcasecmp",
          "old_text": "atoi(auxval->ptr)",
          "new_text": "strcasecmp(auxkey->ptr,\"repl-stream-db\")",
          "old_line_content": "                if (rsi) rsi->repl_stream_db = atoi(auxval->ptr);",
          "new_line_content": "            } else if (!strcasecmp(auxkey->ptr,\"repl-stream-db\")) {",
          "content_same": false
        },
        {
          "line": 1518,
          "old_api": "strcasecmp",
          "new_api": "atoi",
          "old_text": "strcasecmp(auxkey->ptr,\"repl-id\")",
          "new_text": "atoi(auxval->ptr)",
          "old_line_content": "            } else if (!strcasecmp(auxkey->ptr,\"repl-id\")) {",
          "new_line_content": "                if (rsi) rsi->repl_stream_db = atoi(auxval->ptr);",
          "content_same": false
        },
        {
          "line": 1519,
          "old_api": "sdslen",
          "new_api": "strcasecmp",
          "old_text": "sdslen(auxval->ptr)",
          "new_text": "strcasecmp(auxkey->ptr,\"repl-id\")",
          "old_line_content": "                if (rsi && sdslen(auxval->ptr) == CONFIG_RUN_ID_SIZE) {",
          "new_line_content": "            } else if (!strcasecmp(auxkey->ptr,\"repl-id\")) {",
          "content_same": false
        },
        {
          "line": 1520,
          "old_api": "memcpy",
          "new_api": "sdslen",
          "old_text": "memcpy(rsi->repl_id,auxval->ptr,CONFIG_RUN_ID_SIZE+1)",
          "new_text": "sdslen(auxval->ptr)",
          "old_line_content": "                    memcpy(rsi->repl_id,auxval->ptr,CONFIG_RUN_ID_SIZE+1);",
          "new_line_content": "                if (rsi && sdslen(auxval->ptr) == CONFIG_RUN_ID_SIZE) {",
          "content_same": false
        },
        {
          "line": 1524,
          "old_api": "strtoll",
          "new_api": "strcasecmp",
          "old_text": "strtoll(auxval->ptr,NULL,10)",
          "new_text": "strcasecmp(auxkey->ptr,\"repl-offset\")",
          "old_line_content": "                if (rsi) rsi->repl_offset = strtoll(auxval->ptr,NULL,10);",
          "new_line_content": "            } else if (!strcasecmp(auxkey->ptr,\"repl-offset\")) {",
          "content_same": false
        },
        {
          "line": 1564,
          "old_api": "memrev64ifbe",
          "new_api": "rioRead",
          "old_text": "memrev64ifbe(&cksum)",
          "new_text": "rioRead(rdb,&cksum,8)",
          "old_line_content": "        memrev64ifbe(&cksum);",
          "new_line_content": "        if (rioRead(rdb,&cksum,8) == 0) goto eoferr;",
          "content_same": false
        },
        {
          "line": 1569,
          "old_api": "rdbExitReportCorruptRDB",
          "new_api": "serverLog",
          "old_text": "rdbExitReportCorruptRDB(\"RDB CRC error\")",
          "new_text": "serverLog(LL_WARNING,\"Wrong RDB checksum. Aborting now.\")",
          "old_line_content": "            rdbExitReportCorruptRDB(\"RDB CRC error\");",
          "new_line_content": "            serverLog(LL_WARNING,\"Wrong RDB checksum. Aborting now.\");",
          "content_same": false
        },
        {
          "line": 1576,
          "old_api": "rdbExitReportCorruptRDB",
          "new_api": "serverLog",
          "old_text": "rdbExitReportCorruptRDB(\"Unexpected EOF reading RDB file\")",
          "new_text": "serverLog(LL_WARNING,\"Short read or OOM loading DB. Unrecoverable error, aborting now.\")",
          "old_line_content": "    rdbExitReportCorruptRDB(\"Unexpected EOF reading RDB file\");",
          "new_line_content": "    serverLog(LL_WARNING,\"Short read or OOM loading DB. Unrecoverable error, aborting now.\");",
          "content_same": false
        },
        {
          "line": 1593,
          "old_api": "startLoading",
          "new_api": "fopen",
          "old_text": "startLoading(fp)",
          "new_text": "fopen(filename,\"r\")",
          "old_line_content": "    startLoading(fp);",
          "new_line_content": "    if ((fp = fopen(filename,\"r\")) == NULL) return C_ERR;",
          "content_same": false
        },
        {
          "line": 1594,
          "old_api": "rioInitWithFile",
          "new_api": "startLoading",
          "old_text": "rioInitWithFile(&rdb,fp)",
          "new_text": "startLoading(fp)",
          "old_line_content": "    rioInitWithFile(&rdb,fp);",
          "new_line_content": "    startLoading(fp);",
          "content_same": false
        },
        {
          "line": 1595,
          "old_api": "rdbLoadRio",
          "new_api": "rioInitWithFile",
          "old_text": "rdbLoadRio(&rdb,rsi)",
          "new_text": "rioInitWithFile(&rdb,fp)",
          "old_line_content": "    retval = rdbLoadRio(&rdb,rsi);",
          "new_line_content": "    rioInitWithFile(&rdb,fp);",
          "content_same": false
        },
        {
          "line": 1596,
          "old_api": "fclose",
          "new_api": "rdbLoadRio",
          "old_text": "fclose(fp)",
          "new_text": "rdbLoadRio(&rdb,rsi)",
          "old_line_content": "    fclose(fp);",
          "new_line_content": "    retval = rdbLoadRio(&rdb,rsi);",
          "content_same": false
        },
        {
          "line": 1597,
          "old_api": "stopLoading",
          "new_api": "fclose",
          "old_text": "stopLoading()",
          "new_text": "fclose(fp)",
          "old_line_content": "    stopLoading();",
          "new_line_content": "    fclose(fp);",
          "content_same": false
        },
        {
          "line": 1619,
          "old_api": "rdbRemoveTempFile",
          "new_api": "latencyStartMonitor",
          "old_text": "rdbRemoveTempFile(server.rdb_child_pid)",
          "new_text": "latencyStartMonitor(latency)",
          "old_line_content": "        rdbRemoveTempFile(server.rdb_child_pid);",
          "new_line_content": "        latencyStartMonitor(latency);",
          "content_same": false
        },
        {
          "line": 1620,
          "old_api": "latencyEndMonitor",
          "new_api": "rdbRemoveTempFile",
          "old_text": "latencyEndMonitor(latency)",
          "new_text": "rdbRemoveTempFile(server.rdb_child_pid)",
          "old_line_content": "        latencyEndMonitor(latency);",
          "new_line_content": "        rdbRemoveTempFile(server.rdb_child_pid);",
          "content_same": false
        },
        {
          "line": 1621,
          "old_api": "latencyAddSampleIfNeeded",
          "new_api": "latencyEndMonitor",
          "old_text": "latencyAddSampleIfNeeded(\"rdb-unlink-temp-file\",latency)",
          "new_text": "latencyEndMonitor(latency)",
          "old_line_content": "        latencyAddSampleIfNeeded(\"rdb-unlink-temp-file\",latency);",
          "new_line_content": "        latencyEndMonitor(latency);",
          "content_same": false
        },
        {
          "line": 1693,
          "old_api": "listNext",
          "new_api": "listRewind",
          "old_text": "listNext(&li)",
          "new_text": "listRewind(server.slaves,&li)",
          "old_line_content": "    while((ln = listNext(&li))) {",
          "new_line_content": "    listRewind(server.slaves,&li);",
          "content_same": false
        },
        {
          "line": 1715,
          "old_api": "freeClient",
          "new_api": "strerror",
          "old_text": "freeClient(slave)",
          "new_text": "strerror(errorcode)",
          "old_line_content": "                freeClient(slave);",
          "new_line_content": "                                     : strerror(errorcode));",
          "content_same": false
        },
        {
          "line": 1722,
          "old_api": "anetSendTimeout",
          "new_api": "anetNonBlock",
          "old_text": "anetSendTimeout(NULL,slave->fd,0)",
          "new_text": "anetNonBlock(NULL,slave->fd)",
          "old_line_content": "                anetSendTimeout(NULL,slave->fd,0);",
          "new_line_content": "                anetNonBlock(NULL,slave->fd);",
          "content_same": false
        },
        {
          "line": 1777,
          "old_api": "listNext",
          "new_api": "listRewind",
          "old_text": "listNext(&li)",
          "new_text": "listRewind(server.slaves,&li)",
          "old_line_content": "    while((ln = listNext(&li))) {",
          "new_line_content": "    listRewind(server.slaves,&li);",
          "content_same": false
        },
        {
          "line": 1788,
          "old_api": "anetSendTimeout",
          "new_api": "anetBlock",
          "old_text": "anetSendTimeout(NULL,slave->fd,server.repl_timeout*1000)",
          "new_text": "anetBlock(NULL,slave->fd)",
          "old_line_content": "            anetSendTimeout(NULL,slave->fd,server.repl_timeout*1000);",
          "new_line_content": "            anetBlock(NULL,slave->fd);",
          "content_same": false
        },
        {
          "line": 1794,
          "old_api": "ustime",
          "new_api": "openChildInfoPipe",
          "old_text": "ustime()",
          "new_text": "openChildInfoPipe()",
          "old_line_content": "    start = ustime();",
          "new_line_content": "    openChildInfoPipe();",
          "content_same": false
        },
        {
          "line": 1795,
          "old_api": "fork",
          "new_api": "ustime",
          "old_text": "fork()",
          "new_text": "ustime()",
          "old_line_content": "    if ((childpid = fork()) == 0) {",
          "new_line_content": "    start = ustime();",
          "content_same": false
        },
        {
          "line": 1801,
          "old_api": "zfree",
          "new_api": "rioInitWithFdset",
          "old_text": "zfree(fds)",
          "new_text": "rioInitWithFdset(&slave_sockets,fds,numfds)",
          "old_line_content": "        zfree(fds);",
          "new_line_content": "        rioInitWithFdset(&slave_sockets,fds,numfds);",
          "content_same": false
        },
        {
          "line": 1804,
          "old_api": "redisSetProcTitle",
          "new_api": "closeListeningSockets",
          "old_text": "redisSetProcTitle(\"redis-rdb-to-slaves\")",
          "new_text": "closeListeningSockets(0)",
          "old_line_content": "        redisSetProcTitle(\"redis-rdb-to-slaves\");",
          "new_line_content": "        closeListeningSockets(0);",
          "content_same": false
        },
        {
          "line": 1807,
          "old_api": "rioFlush",
          "new_api": "rdbSaveRioWithEOFMark",
          "old_text": "rioFlush(&slave_sockets)",
          "new_text": "rdbSaveRioWithEOFMark(&slave_sockets,NULL,rsi)",
          "old_line_content": "        if (retval == C_OK && rioFlush(&slave_sockets) == 0)",
          "new_line_content": "        retval = rdbSaveRioWithEOFMark(&slave_sockets,NULL,rsi);",
          "content_same": false
        },
        {
          "line": 1862,
          "old_api": "rioFreeFdset",
          "new_api": "zfree",
          "old_text": "rioFreeFdset(&slave_sockets)",
          "new_text": "zfree(clientids)",
          "old_line_content": "        rioFreeFdset(&slave_sockets);",
          "new_line_content": "        zfree(clientids);",
          "content_same": false
        },
        {
          "line": 1863,
          "old_api": "exitFromChild",
          "new_api": "rioFreeFdset",
          "old_text": "exitFromChild((retval == C_OK) ? 0 : 1)",
          "new_text": "rioFreeFdset(&slave_sockets)",
          "old_line_content": "        exitFromChild((retval == C_OK) ? 0 : 1);",
          "new_line_content": "        rioFreeFdset(&slave_sockets);",
          "content_same": false
        },
        {
          "line": 1867,
          "old_api": "zmalloc_used_memory",
          "new_api": "ustime",
          "old_text": "zmalloc_used_memory()",
          "new_text": "ustime()",
          "old_line_content": "        server.stat_fork_rate = (double) zmalloc_used_memory() * 1000000 / server.stat_fork_time / (1024*1024*1024); /* GB per second. */",
          "new_line_content": "        server.stat_fork_time = ustime()-start;",
          "content_same": false
        },
        {
          "line": 1868,
          "old_api": "latencyAddSampleIfNeeded",
          "new_api": "zmalloc_used_memory",
          "old_text": "latencyAddSampleIfNeeded(\"fork\",server.stat_fork_time/1000)",
          "new_text": "zmalloc_used_memory()",
          "old_line_content": "        latencyAddSampleIfNeeded(\"fork\",server.stat_fork_time/1000);",
          "new_line_content": "        server.stat_fork_rate = (double) zmalloc_used_memory() * 1000000 / server.stat_fork_time / (1024*1024*1024); /* GB per second. */",
          "content_same": false
        },
        {
          "line": 1871,
          "old_api": "strerror",
          "new_api": "serverLog",
          "old_text": "strerror(errno)",
          "new_text": "serverLog(LL_WARNING,\"Can't save in background: fork: %s\",\n                strerror(errno))",
          "old_line_content": "                strerror(errno));",
          "new_line_content": "            serverLog(LL_WARNING,\"Can't save in background: fork: %s\",",
          "content_same": false
        },
        {
          "line": 1877,
          "old_api": "listNext",
          "new_api": "listRewind",
          "old_text": "listNext(&li)",
          "new_text": "listRewind(server.slaves,&li)",
          "old_line_content": "            while((ln = listNext(&li))) {",
          "new_line_content": "            listRewind(server.slaves,&li);",
          "content_same": false
        },
        {
          "line": 1890,
          "old_api": "closeChildInfoPipe",
          "new_api": "close",
          "old_text": "closeChildInfoPipe()",
          "new_text": "close(pipefds[1])",
          "old_line_content": "            closeChildInfoPipe();",
          "new_line_content": "            close(pipefds[1]);",
          "content_same": false
        },
        {
          "line": 1912,
          "old_api": "addReply",
          "new_api": "rdbSave",
          "old_text": "addReply(c,shared.ok)",
          "new_text": "rdbSave(server.rdb_filename,NULL)",
          "old_line_content": "        addReply(c,shared.ok);",
          "new_line_content": "    if (rdbSave(server.rdb_filename,NULL) == C_OK) {",
          "content_same": false
        },
        {
          "line": 1946,
          "old_api": "addReplyStatus",
          "new_api": "rdbSaveBackground",
          "old_text": "addReplyStatus(c,\"Background saving started\")",
          "new_text": "rdbSaveBackground(server.rdb_filename,NULL)",
          "old_line_content": "        addReplyStatus(c,\"Background saving started\");",
          "new_line_content": "    } else if (rdbSaveBackground(server.rdb_filename,NULL) == C_OK) {",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 1026,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_NOTICE,\"DB saved on disk\")",
          "old_line_content": "    server.dirty = 0;",
          "new_line_content": "    serverLog(LL_NOTICE,\"DB saved on disk\");",
          "content_same": false
        },
        {
          "line": 1539,
          "old_api": null,
          "new_api": "rdbLoadStringObject",
          "old_text": null,
          "new_text": "rdbLoadStringObject(rdb)",
          "old_line_content": "        /* Read value */",
          "new_line_content": "        if ((key = rdbLoadStringObject(rdb)) == NULL) goto eoferr;",
          "content_same": false
        },
        {
          "line": 1028,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "    server.lastbgsave_status = C_OK;",
          "new_line_content": "    server.lastsave = time(NULL);",
          "content_same": false
        },
        {
          "line": 1541,
          "old_api": null,
          "new_api": "rdbLoadObject",
          "old_text": null,
          "new_text": "rdbLoadObject(type,rdb)",
          "old_line_content": "        /* Check if the key already expired. This function is used when loading",
          "new_line_content": "        if ((val = rdbLoadObject(type,rdb)) == NULL) goto eoferr;",
          "content_same": false
        },
        {
          "line": 1035,
          "old_api": null,
          "new_api": "unlink",
          "old_text": null,
          "new_text": "unlink(tmpfile)",
          "old_line_content": "    return C_ERR;",
          "new_line_content": "    unlink(tmpfile);",
          "content_same": false
        },
        {
          "line": 1549,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(val)",
          "old_line_content": "            continue;",
          "new_line_content": "            decrRefCount(val);",
          "content_same": false
        },
        {
          "line": 1553,
          "old_api": null,
          "new_api": "dbAdd",
          "old_text": null,
          "new_text": "dbAdd(db,key,val)",
          "old_line_content": "",
          "new_line_content": "        dbAdd(db,key,val);",
          "content_same": false
        },
        {
          "line": 1556,
          "old_api": null,
          "new_api": "setExpire",
          "old_text": null,
          "new_text": "setExpire(NULL,db,key,expiretime)",
          "old_line_content": "",
          "new_line_content": "        if (expiretime != -1) setExpire(NULL,db,key,expiretime);",
          "content_same": false
        },
        {
          "line": 1558,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(key)",
          "old_line_content": "    }",
          "new_line_content": "        decrRefCount(key);",
          "content_same": false
        },
        {
          "line": 1047,
          "old_api": null,
          "new_api": "openChildInfoPipe",
          "old_text": null,
          "new_text": "openChildInfoPipe()",
          "old_line_content": "",
          "new_line_content": "    openChildInfoPipe();",
          "content_same": false
        },
        {
          "line": 1050,
          "old_api": null,
          "new_api": "fork",
          "old_text": null,
          "new_text": "fork()",
          "old_line_content": "        int retval;",
          "new_line_content": "    if ((childpid = fork()) == 0) {",
          "content_same": false
        },
        {
          "line": 1565,
          "old_api": null,
          "new_api": "memrev64ifbe",
          "old_text": null,
          "new_text": "memrev64ifbe(&cksum)",
          "old_line_content": "        if (cksum == 0) {",
          "new_line_content": "        memrev64ifbe(&cksum);",
          "content_same": false
        },
        {
          "line": 1567,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\"RDB file was saved with checksum disabled: no check performed.\")",
          "old_line_content": "        } else if (cksum != expected) {",
          "new_line_content": "            serverLog(LL_WARNING,\"RDB file was saved with checksum disabled: no check performed.\");",
          "content_same": false
        },
        {
          "line": 1056,
          "old_api": null,
          "new_api": "rdbSave",
          "old_text": null,
          "new_text": "rdbSave(filename,rsi)",
          "old_line_content": "        if (retval == C_OK) {",
          "new_line_content": "        retval = rdbSave(filename,rsi);",
          "content_same": false
        },
        {
          "line": 1058,
          "old_api": null,
          "new_api": "zmalloc_get_private_dirty",
          "old_text": null,
          "new_text": "zmalloc_get_private_dirty(-1)",
          "old_line_content": "",
          "new_line_content": "            size_t private_dirty = zmalloc_get_private_dirty(-1);",
          "content_same": false
        },
        {
          "line": 1570,
          "old_api": null,
          "new_api": "rdbExitReportCorruptRDB",
          "old_text": null,
          "new_text": "rdbExitReportCorruptRDB(\"RDB CRC error\")",
          "old_line_content": "        }",
          "new_line_content": "            rdbExitReportCorruptRDB(\"RDB CRC error\");",
          "content_same": false
        },
        {
          "line": 1061,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_NOTICE,\n                    \"RDB: %zu MB of memory used by copy-on-write\",\n                    private_dirty/(1024*1024))",
          "old_line_content": "                    \"RDB: %zu MB of memory used by copy-on-write\",",
          "new_line_content": "                serverLog(LL_NOTICE,",
          "content_same": false
        },
        {
          "line": 1534,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(auxval)",
          "old_line_content": "            continue; /* Read type again. */",
          "new_line_content": "            decrRefCount(auxval);",
          "content_same": false
        },
        {
          "line": 1577,
          "old_api": null,
          "new_api": "rdbExitReportCorruptRDB",
          "old_text": null,
          "new_text": "rdbExitReportCorruptRDB(\"Unexpected EOF reading RDB file\")",
          "old_line_content": "    return C_ERR; /* Just to avoid warning */",
          "new_line_content": "    rdbExitReportCorruptRDB(\"Unexpected EOF reading RDB file\");",
          "content_same": false
        },
        {
          "line": 1067,
          "old_api": null,
          "new_api": "sendChildInfo",
          "old_text": null,
          "new_text": "sendChildInfo(CHILD_INFO_TYPE_RDB)",
          "old_line_content": "        }",
          "new_line_content": "            sendChildInfo(CHILD_INFO_TYPE_RDB);",
          "content_same": false
        },
        {
          "line": 1069,
          "old_api": null,
          "new_api": "exitFromChild",
          "old_text": null,
          "new_text": "exitFromChild((retval == C_OK) ? 0 : 1)",
          "old_line_content": "    } else {",
          "new_line_content": "        exitFromChild((retval == C_OK) ? 0 : 1);",
          "content_same": false
        },
        {
          "line": 1074,
          "old_api": null,
          "new_api": "latencyAddSampleIfNeeded",
          "old_text": null,
          "new_text": "latencyAddSampleIfNeeded(\"fork\",server.stat_fork_time/1000)",
          "old_line_content": "        if (childpid == -1) {",
          "new_line_content": "        latencyAddSampleIfNeeded(\"fork\",server.stat_fork_time/1000);",
          "content_same": false
        },
        {
          "line": 1076,
          "old_api": null,
          "new_api": "closeChildInfoPipe",
          "old_text": null,
          "new_text": "closeChildInfoPipe()",
          "old_line_content": "            server.lastbgsave_status = C_ERR;",
          "new_line_content": "            closeChildInfoPipe();",
          "content_same": false
        },
        {
          "line": 1079,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "            return C_ERR;",
          "new_line_content": "                strerror(errno));",
          "content_same": false
        },
        {
          "line": 1083,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "        server.rdb_child_pid = childpid;",
          "new_line_content": "        server.rdb_save_time_start = time(NULL);",
          "content_same": false
        },
        {
          "line": 1086,
          "old_api": null,
          "new_api": "updateDictResizePolicy",
          "old_text": null,
          "new_text": "updateDictResizePolicy()",
          "old_line_content": "        return C_OK;",
          "new_line_content": "        updateDictResizePolicy();",
          "content_same": false
        },
        {
          "line": 1598,
          "old_api": null,
          "new_api": "stopLoading",
          "old_text": null,
          "new_text": "stopLoading()",
          "old_line_content": "    return retval;",
          "new_line_content": "    stopLoading();",
          "content_same": false
        },
        {
          "line": 1606,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_NOTICE,\n            \"Background saving terminated with success\")",
          "old_line_content": "            \"Background saving terminated with success\");",
          "new_line_content": "        serverLog(LL_NOTICE,",
          "content_same": false
        },
        {
          "line": 1096,
          "old_api": null,
          "new_api": "unlink",
          "old_text": null,
          "new_text": "unlink(tmpfile)",
          "old_line_content": "}",
          "new_line_content": "    unlink(tmpfile);",
          "content_same": false
        },
        {
          "line": 1609,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "        server.lastbgsave_status = C_OK;",
          "new_line_content": "        server.lastsave = time(NULL);",
          "content_same": false
        },
        {
          "line": 1612,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING, \"Background saving error\")",
          "old_line_content": "        server.lastbgsave_status = C_ERR;",
          "new_line_content": "        serverLog(LL_WARNING, \"Background saving error\");",
          "content_same": false
        },
        {
          "line": 1617,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\n            \"Background saving terminated by signal %d\", bysignal)",
          "old_line_content": "            \"Background saving terminated by signal %d\", bysignal);",
          "new_line_content": "        serverLog(LL_WARNING,",
          "content_same": false
        },
        {
          "line": 1109,
          "old_api": null,
          "new_api": "tryObjectEncoding",
          "old_text": null,
          "new_text": "tryObjectEncoding(o)",
          "old_line_content": "    } else if (rdbtype == RDB_TYPE_LIST) {",
          "new_line_content": "        o = tryObjectEncoding(o);",
          "content_same": false
        },
        {
          "line": 1622,
          "old_api": null,
          "new_api": "latencyAddSampleIfNeeded",
          "old_text": null,
          "new_text": "latencyAddSampleIfNeeded(\"rdb-unlink-temp-file\",latency)",
          "old_line_content": "        /* SIGUSR1 is whitelisted, so we have a way to kill a child without",
          "new_line_content": "        latencyAddSampleIfNeeded(\"rdb-unlink-temp-file\",latency);",
          "content_same": false
        },
        {
          "line": 1112,
          "old_api": null,
          "new_api": "rdbLoadLen",
          "old_text": null,
          "new_text": "rdbLoadLen(rdb,NULL)",
          "old_line_content": "",
          "new_line_content": "        if ((len = rdbLoadLen(rdb,NULL)) == RDB_LENERR) return NULL;",
          "content_same": false
        },
        {
          "line": 1115,
          "old_api": null,
          "new_api": "quicklistSetOptions",
          "old_text": null,
          "new_text": "quicklistSetOptions(o->ptr, server.list_max_ziplist_size,\n                            server.list_compress_depth)",
          "old_line_content": "                            server.list_compress_depth);",
          "new_line_content": "        quicklistSetOptions(o->ptr, server.list_max_ziplist_size,",
          "content_same": false
        },
        {
          "line": 1630,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "    server.rdb_save_time_start = -1;",
          "new_line_content": "    server.rdb_save_time_last = time(NULL)-server.rdb_save_time_start;",
          "content_same": false
        },
        {
          "line": 1634,
          "old_api": null,
          "new_api": "updateSlavesWaitingBgsave",
          "old_text": null,
          "new_text": "updateSlavesWaitingBgsave((!bysignal && exitcode == 0) ? C_OK : C_ERR, RDB_CHILD_TYPE_DISK)",
          "old_line_content": "}",
          "new_line_content": "    updateSlavesWaitingBgsave((!bysignal && exitcode == 0) ? C_OK : C_ERR, RDB_CHILD_TYPE_DISK);",
          "content_same": false
        },
        {
          "line": 1125,
          "old_api": null,
          "new_api": "decrRefCount",
          "old_text": null,
          "new_text": "decrRefCount(ele)",
          "old_line_content": "        }",
          "new_line_content": "            decrRefCount(ele);",
          "content_same": false
        },
        {
          "line": 1129,
          "old_api": null,
          "new_api": "rdbLoadLen",
          "old_text": null,
          "new_text": "rdbLoadLen(rdb,NULL)",
          "old_line_content": "",
          "new_line_content": "        if ((len = rdbLoadLen(rdb,NULL)) == RDB_LENERR) return NULL;",
          "content_same": false
        },
        {
          "line": 1644,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_NOTICE,\n            \"Background RDB transfer terminated with success\")",
          "old_line_content": "            \"Background RDB transfer terminated with success\");",
          "new_line_content": "        serverLog(LL_NOTICE,",
          "content_same": false
        },
        {
          "line": 1133,
          "old_api": null,
          "new_api": "createSetObject",
          "old_text": null,
          "new_text": "createSetObject()",
          "old_line_content": "            /* It's faster to expand the dict to the right size asap in order",
          "new_line_content": "            o = createSetObject();",
          "content_same": false
        },
        {
          "line": 1647,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING, \"Background transfer error\")",
          "old_line_content": "    } else {",
          "new_line_content": "        serverLog(LL_WARNING, \"Background transfer error\");",
          "content_same": false
        },
        {
          "line": 1137,
          "old_api": null,
          "new_api": "dictExpand",
          "old_text": null,
          "new_text": "dictExpand(o->ptr,len)",
          "old_line_content": "        } else {",
          "new_line_content": "                dictExpand(o->ptr,len);",
          "content_same": false
        },
        {
          "line": 1649,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\n            \"Background transfer terminated by signal %d\", bysignal)",
          "old_line_content": "            \"Background transfer terminated by signal %d\", bysignal);",
          "new_line_content": "        serverLog(LL_WARNING,",
          "content_same": false
        },
        {
          "line": 1139,
          "old_api": null,
          "new_api": "createIntsetObject",
          "old_text": null,
          "new_text": "createIntsetObject()",
          "old_line_content": "        }",
          "new_line_content": "            o = createIntsetObject();",
          "content_same": false
        },
        {
          "line": 1147,
          "old_api": null,
          "new_api": "rdbGenericLoadStringObject",
          "old_text": null,
          "new_text": "rdbGenericLoadStringObject(rdb,RDB_LOAD_SDS,NULL)",
          "old_line_content": "                == NULL) return NULL;",
          "new_line_content": "            if ((sdsele = rdbGenericLoadStringObject(rdb,RDB_LOAD_SDS,NULL))",
          "content_same": false
        },
        {
          "line": 1663,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(uint64_t))",
          "old_line_content": "    ok_slaves[0] = 0;",
          "new_line_content": "    ok_slaves = zmalloc(sizeof(uint64_t)); /* Make space for the count. */",
          "content_same": false
        },
        {
          "line": 1153,
          "old_api": null,
          "new_api": "intsetAdd",
          "old_text": null,
          "new_text": "intsetAdd(o->ptr,llval,NULL)",
          "old_line_content": "                } else {",
          "new_line_content": "                    o->ptr = intsetAdd(o->ptr,llval,NULL);",
          "content_same": false
        },
        {
          "line": 1156,
          "old_api": null,
          "new_api": "dictExpand",
          "old_text": null,
          "new_text": "dictExpand(o->ptr,len)",
          "old_line_content": "                }",
          "new_line_content": "                    dictExpand(o->ptr,len);",
          "content_same": false
        },
        {
          "line": 1668,
          "old_api": null,
          "new_api": "read",
          "old_text": null,
          "new_text": "read(server.rdb_pipe_read_result_from_child, ok_slaves, readlen)",
          "old_line_content": "                 readlen)",
          "new_line_content": "        if (read(server.rdb_pipe_read_result_from_child, ok_slaves, readlen) ==",
          "content_same": false
        },
        {
          "line": 1163,
          "old_api": null,
          "new_api": "dictAdd",
          "old_text": null,
          "new_text": "dictAdd((dict*)o->ptr,sdsele,NULL)",
          "old_line_content": "            } else {",
          "new_line_content": "                dictAdd((dict*)o->ptr,sdsele,NULL);",
          "content_same": false
        },
        {
          "line": 1675,
          "old_api": null,
          "new_api": "zrealloc",
          "old_text": null,
          "new_text": "zrealloc(ok_slaves,sizeof(uint64_t)+readlen)",
          "old_line_content": "            if (readlen &&",
          "new_line_content": "            ok_slaves = zrealloc(ok_slaves,sizeof(uint64_t)+readlen);",
          "content_same": false
        },
        {
          "line": 1165,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(sdsele)",
          "old_line_content": "            }",
          "new_line_content": "                sdsfree(sdsele);",
          "content_same": false
        },
        {
          "line": 1677,
          "old_api": null,
          "new_api": "read",
          "old_text": null,
          "new_text": "read(server.rdb_pipe_read_result_from_child, ok_slaves+1,\n                     readlen)",
          "old_line_content": "                     readlen) != readlen)",
          "new_line_content": "                read(server.rdb_pipe_read_result_from_child, ok_slaves+1,",
          "content_same": false
        },
        {
          "line": 1686,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "close(server.rdb_pipe_write_result_to_parent)",
          "old_line_content": "",
          "new_line_content": "    close(server.rdb_pipe_write_result_to_parent);",
          "content_same": false
        },
        {
          "line": 1175,
          "old_api": null,
          "new_api": "createZsetObject",
          "old_text": null,
          "new_text": "createZsetObject()",
          "old_line_content": "        zs = o->ptr;",
          "new_line_content": "        o = createZsetObject();",
          "content_same": false
        },
        {
          "line": 1694,
          "old_api": null,
          "new_api": "listNext",
          "old_text": null,
          "new_text": "listNext(&li)",
          "old_line_content": "        client *slave = ln->value;",
          "new_line_content": "    while((ln = listNext(&li))) {",
          "content_same": false
        },
        {
          "line": 1184,
          "old_api": null,
          "new_api": "rdbGenericLoadStringObject",
          "old_text": null,
          "new_text": "rdbGenericLoadStringObject(rdb,RDB_LOAD_SDS,NULL)",
          "old_line_content": "                == NULL) return NULL;",
          "new_line_content": "            if ((sdsele = rdbGenericLoadStringObject(rdb,RDB_LOAD_SDS,NULL))",
          "content_same": false
        },
        {
          "line": 1188,
          "old_api": null,
          "new_api": "rdbLoadBinaryDoubleValue",
          "old_text": null,
          "new_text": "rdbLoadBinaryDoubleValue(rdb,&score)",
          "old_line_content": "            } else {",
          "new_line_content": "                if (rdbLoadBinaryDoubleValue(rdb,&score) == -1) return NULL;",
          "content_same": false
        },
        {
          "line": 1190,
          "old_api": null,
          "new_api": "rdbLoadDoubleValue",
          "old_text": null,
          "new_text": "rdbLoadDoubleValue(rdb,&score)",
          "old_line_content": "            }",
          "new_line_content": "                if (rdbLoadDoubleValue(rdb,&score) == -1) return NULL;",
          "content_same": false
        },
        {
          "line": 1194,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(sdsele)",
          "old_line_content": "",
          "new_line_content": "            if (sdslen(sdsele) > maxelelen) maxelelen = sdslen(sdsele);",
          "content_same": false
        },
        {
          "line": 1197,
          "old_api": null,
          "new_api": "dictAdd",
          "old_text": null,
          "new_text": "dictAdd(zs->dict,sdsele,&znode->score)",
          "old_line_content": "        }",
          "new_line_content": "            dictAdd(zs->dict,sdsele,&znode->score);",
          "content_same": false
        },
        {
          "line": 1711,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\n                \"Closing slave %s: child->slave RDB transfer failed: %s\",\n                    replicationGetSlaveName(slave),\n                    (errorcode == 0) ? \"RDB transfer child aborted\"\n                                     : strerror(errorcode))",
          "old_line_content": "                \"Closing slave %s: child->slave RDB transfer failed: %s\",",
          "new_line_content": "                serverLog(LL_WARNING,",
          "content_same": false
        },
        {
          "line": 1201,
          "old_api": null,
          "new_api": "zsetLength",
          "old_text": null,
          "new_text": "zsetLength(o)",
          "old_line_content": "            maxelelen <= server.zset_max_ziplist_value)",
          "new_line_content": "        if (zsetLength(o) <= server.zset_max_ziplist_entries &&",
          "content_same": false
        },
        {
          "line": 1713,
          "old_api": null,
          "new_api": "replicationGetSlaveName",
          "old_text": null,
          "new_text": "replicationGetSlaveName(slave)",
          "old_line_content": "                    (errorcode == 0) ? \"RDB transfer child aborted\"",
          "new_line_content": "                    replicationGetSlaveName(slave),",
          "content_same": false
        },
        {
          "line": 1203,
          "old_api": null,
          "new_api": "zsetConvert",
          "old_text": null,
          "new_text": "zsetConvert(o,OBJ_ENCODING_ZIPLIST)",
          "old_line_content": "    } else if (rdbtype == RDB_TYPE_HASH) {",
          "new_line_content": "                zsetConvert(o,OBJ_ENCODING_ZIPLIST);",
          "content_same": false
        },
        {
          "line": 1716,
          "old_api": null,
          "new_api": "freeClient",
          "old_text": null,
          "new_text": "freeClient(slave)",
          "old_line_content": "            } else {",
          "new_line_content": "                freeClient(slave);",
          "content_same": false
        },
        {
          "line": 1718,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\n                \"Slave %s correctly received the streamed RDB file.\",\n                    replicationGetSlaveName(slave))",
          "old_line_content": "                \"Slave %s correctly received the streamed RDB file.\",",
          "new_line_content": "                serverLog(LL_WARNING,",
          "content_same": false
        },
        {
          "line": 1720,
          "old_api": null,
          "new_api": "replicationGetSlaveName",
          "old_text": null,
          "new_text": "replicationGetSlaveName(slave)",
          "old_line_content": "                /* Restore the socket as non-blocking. */",
          "new_line_content": "                    replicationGetSlaveName(slave));",
          "content_same": false
        },
        {
          "line": 1209,
          "old_api": null,
          "new_api": "rdbLoadLen",
          "old_text": null,
          "new_text": "rdbLoadLen(rdb, NULL)",
          "old_line_content": "        if (len == RDB_LENERR) return NULL;",
          "new_line_content": "        len = rdbLoadLen(rdb, NULL);",
          "content_same": false
        },
        {
          "line": 1723,
          "old_api": null,
          "new_api": "anetSendTimeout",
          "old_text": null,
          "new_text": "anetSendTimeout(NULL,slave->fd,0)",
          "old_line_content": "            }",
          "new_line_content": "                anetSendTimeout(NULL,slave->fd,0);",
          "content_same": false
        },
        {
          "line": 1212,
          "old_api": null,
          "new_api": "createHashObject",
          "old_text": null,
          "new_text": "createHashObject()",
          "old_line_content": "",
          "new_line_content": "        o = createHashObject();",
          "content_same": false
        },
        {
          "line": 1727,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(ok_slaves)",
          "old_line_content": "",
          "new_line_content": "    zfree(ok_slaves);",
          "content_same": false
        },
        {
          "line": 1216,
          "old_api": null,
          "new_api": "hashTypeConvert",
          "old_text": null,
          "new_text": "hashTypeConvert(o, OBJ_ENCODING_HT)",
          "old_line_content": "",
          "new_line_content": "            hashTypeConvert(o, OBJ_ENCODING_HT);",
          "content_same": false
        },
        {
          "line": 1729,
          "old_api": null,
          "new_api": "updateSlavesWaitingBgsave",
          "old_text": null,
          "new_text": "updateSlavesWaitingBgsave((!bysignal && exitcode == 0) ? C_OK : C_ERR, RDB_CHILD_TYPE_SOCKET)",
          "old_line_content": "}",
          "new_line_content": "    updateSlavesWaitingBgsave((!bysignal && exitcode == 0) ? C_OK : C_ERR, RDB_CHILD_TYPE_SOCKET);",
          "content_same": false
        },
        {
          "line": 709,
          "old_api": null,
          "new_api": "rdbSaveLen",
          "old_text": null,
          "new_text": "rdbSaveLen(rdb,zsl->length)",
          "old_line_content": "",
          "new_line_content": "            if ((n = rdbSaveLen(rdb,zsl->length)) == -1) return -1;",
          "content_same": false
        },
        {
          "line": 1222,
          "old_api": null,
          "new_api": "rdbGenericLoadStringObject",
          "old_text": null,
          "new_text": "rdbGenericLoadStringObject(rdb,RDB_LOAD_SDS,NULL)",
          "old_line_content": "                == NULL) return NULL;",
          "new_line_content": "            if ((field = rdbGenericLoadStringObject(rdb,RDB_LOAD_SDS,NULL))",
          "content_same": false
        },
        {
          "line": 1224,
          "old_api": null,
          "new_api": "rdbGenericLoadStringObject",
          "old_text": null,
          "new_text": "rdbGenericLoadStringObject(rdb,RDB_LOAD_SDS,NULL)",
          "old_line_content": "                == NULL) return NULL;",
          "new_line_content": "            if ((value = rdbGenericLoadStringObject(rdb,RDB_LOAD_SDS,NULL))",
          "content_same": false
        },
        {
          "line": 1736,
          "old_api": null,
          "new_api": "backgroundSaveDoneHandlerDisk",
          "old_text": null,
          "new_text": "backgroundSaveDoneHandlerDisk(exitcode,bysignal)",
          "old_line_content": "        break;",
          "new_line_content": "        backgroundSaveDoneHandlerDisk(exitcode,bysignal);",
          "content_same": false
        },
        {
          "line": 1739,
          "old_api": null,
          "new_api": "backgroundSaveDoneHandlerSocket",
          "old_text": null,
          "new_text": "backgroundSaveDoneHandlerSocket(exitcode,bysignal)",
          "old_line_content": "        break;",
          "new_line_content": "        backgroundSaveDoneHandlerSocket(exitcode,bysignal);",
          "content_same": false
        },
        {
          "line": 1742,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Unknown RDB child type.\")",
          "old_line_content": "        break;",
          "new_line_content": "        serverPanic(\"Unknown RDB child type.\");",
          "content_same": false
        },
        {
          "line": 1231,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(value)",
          "old_line_content": "",
          "new_line_content": "                    sdslen(value), ZIPLIST_TAIL);",
          "content_same": false
        },
        {
          "line": 1235,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(value)",
          "old_line_content": "            {",
          "new_line_content": "                sdslen(value) > server.hash_max_ziplist_value)",
          "content_same": false
        },
        {
          "line": 726,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Unknown sorted set encoding\")",
          "old_line_content": "        }",
          "new_line_content": "            serverPanic(\"Unknown sorted set encoding\");",
          "content_same": false
        },
        {
          "line": 1239,
          "old_api": null,
          "new_api": "hashTypeConvert",
          "old_text": null,
          "new_text": "hashTypeConvert(o, OBJ_ENCODING_HT)",
          "old_line_content": "                break;",
          "new_line_content": "                hashTypeConvert(o, OBJ_ENCODING_HT);",
          "content_same": false
        },
        {
          "line": 731,
          "old_api": null,
          "new_api": "ziplistBlobLen",
          "old_text": null,
          "new_text": "ziplistBlobLen((unsigned char*)o->ptr)",
          "old_line_content": "",
          "new_line_content": "            size_t l = ziplistBlobLen((unsigned char*)o->ptr);",
          "content_same": false
        },
        {
          "line": 1243,
          "old_api": null,
          "new_api": "sdsfree",
          "old_text": null,
          "new_text": "sdsfree(value)",
          "old_line_content": "        }",
          "new_line_content": "            sdsfree(value);",
          "content_same": false
        },
        {
          "line": 733,
          "old_api": null,
          "new_api": "rdbSaveRawString",
          "old_text": null,
          "new_text": "rdbSaveRawString(rdb,o->ptr,l)",
          "old_line_content": "            nwritten += n;",
          "new_line_content": "            if ((n = rdbSaveRawString(rdb,o->ptr,l)) == -1) return -1;",
          "content_same": false
        },
        {
          "line": 737,
          "old_api": null,
          "new_api": "dictGetIterator",
          "old_text": null,
          "new_text": "dictGetIterator(o->ptr)",
          "old_line_content": "            dictEntry *de;",
          "new_line_content": "            dictIterator *di = dictGetIterator(o->ptr);",
          "content_same": false
        },
        {
          "line": 1250,
          "old_api": null,
          "new_api": "rdbGenericLoadStringObject",
          "old_text": null,
          "new_text": "rdbGenericLoadStringObject(rdb,RDB_LOAD_SDS,NULL)",
          "old_line_content": "                == NULL) return NULL;",
          "new_line_content": "            if ((field = rdbGenericLoadStringObject(rdb,RDB_LOAD_SDS,NULL))",
          "content_same": false
        },
        {
          "line": 740,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize((dict*)o->ptr)",
          "old_line_content": "            nwritten += n;",
          "new_line_content": "            if ((n = rdbSaveLen(rdb,dictSize((dict*)o->ptr))) == -1) return -1;",
          "content_same": false
        },
        {
          "line": 1252,
          "old_api": null,
          "new_api": "rdbGenericLoadStringObject",
          "old_text": null,
          "new_text": "rdbGenericLoadStringObject(rdb,RDB_LOAD_SDS,NULL)",
          "old_line_content": "                == NULL) return NULL;",
          "new_line_content": "            if ((value = rdbGenericLoadStringObject(rdb,RDB_LOAD_SDS,NULL))",
          "content_same": false
        },
        {
          "line": 1764,
          "old_api": null,
          "new_api": "pipe",
          "old_text": null,
          "new_text": "pipe(pipefds)",
          "old_line_content": "    server.rdb_pipe_read_result_from_child = pipefds[0];",
          "new_line_content": "    if (pipe(pipefds) == -1) return C_ERR;",
          "content_same": false
        },
        {
          "line": 1256,
          "old_api": null,
          "new_api": "dictAdd",
          "old_text": null,
          "new_text": "dictAdd((dict*)o->ptr, field, value)",
          "old_line_content": "            if (ret == DICT_ERR) {",
          "new_line_content": "            ret = dictAdd((dict*)o->ptr, field, value);",
          "content_same": false
        },
        {
          "line": 745,
          "old_api": null,
          "new_api": "dictGetVal",
          "old_text": null,
          "new_text": "dictGetVal(de)",
          "old_line_content": "",
          "new_line_content": "                sds value = dictGetVal(de);",
          "content_same": false
        },
        {
          "line": 1258,
          "old_api": null,
          "new_api": "rdbExitReportCorruptRDB",
          "old_text": null,
          "new_text": "rdbExitReportCorruptRDB(\"Duplicate keys detected\")",
          "old_line_content": "            }",
          "new_line_content": "                rdbExitReportCorruptRDB(\"Duplicate keys detected\");",
          "content_same": false
        },
        {
          "line": 1770,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.slaves)",
          "old_line_content": "    /* We also allocate an array of corresponding client IDs. This will",
          "new_line_content": "    fds = zmalloc(sizeof(int)*listLength(server.slaves));",
          "content_same": false
        },
        {
          "line": 748,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(field)",
          "old_line_content": "                nwritten += n;",
          "new_line_content": "                        sdslen(field))) == -1) return -1;",
          "content_same": false
        },
        {
          "line": 1774,
          "old_api": null,
          "new_api": "listLength",
          "old_text": null,
          "new_text": "listLength(server.slaves)",
          "old_line_content": "    numfds = 0;",
          "new_line_content": "    clientids = zmalloc(sizeof(uint64_t)*listLength(server.slaves));",
          "content_same": false
        },
        {
          "line": 751,
          "old_api": null,
          "new_api": "sdslen",
          "old_text": null,
          "new_text": "sdslen(value)",
          "old_line_content": "                nwritten += n;",
          "new_line_content": "                        sdslen(value))) == -1) return -1;",
          "content_same": false
        },
        {
          "line": 1263,
          "old_api": null,
          "new_api": "serverAssert",
          "old_text": null,
          "new_text": "serverAssert(len == 0)",
          "old_line_content": "    } else if (rdbtype == RDB_TYPE_LIST_QUICKLIST) {",
          "new_line_content": "        serverAssert(len == 0);",
          "content_same": false
        },
        {
          "line": 754,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "        } else {",
          "new_line_content": "            dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 1267,
          "old_api": null,
          "new_api": "quicklistSetOptions",
          "old_text": null,
          "new_text": "quicklistSetOptions(o->ptr, server.list_max_ziplist_size,\n                            server.list_compress_depth)",
          "old_line_content": "                            server.list_compress_depth);",
          "new_line_content": "        quicklistSetOptions(o->ptr, server.list_max_ziplist_size,",
          "content_same": false
        },
        {
          "line": 756,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Unknown hash encoding\")",
          "old_line_content": "        }",
          "new_line_content": "            serverPanic(\"Unknown hash encoding\");",
          "content_same": false
        },
        {
          "line": 1778,
          "old_api": null,
          "new_api": "listNext",
          "old_text": null,
          "new_text": "listNext(&li)",
          "old_line_content": "        client *slave = ln->value;",
          "new_line_content": "    while((ln = listNext(&li))) {",
          "content_same": false
        },
        {
          "line": 1272,
          "old_api": null,
          "new_api": "rdbGenericLoadStringObject",
          "old_text": null,
          "new_text": "rdbGenericLoadStringObject(rdb,RDB_LOAD_PLAIN,NULL)",
          "old_line_content": "            if (zl == NULL) return NULL;",
          "new_line_content": "                rdbGenericLoadStringObject(rdb,RDB_LOAD_PLAIN,NULL);",
          "content_same": false
        },
        {
          "line": 1784,
          "old_api": null,
          "new_api": "getPsyncInitialOffset",
          "old_text": null,
          "new_text": "getPsyncInitialOffset()",
          "old_line_content": "            /* Put the socket in blocking mode to simplify RDB transfer.",
          "new_line_content": "            replicationSetupSlaveForFullResync(slave,getPsyncInitialOffset());",
          "content_same": false
        },
        {
          "line": 1274,
          "old_api": null,
          "new_api": "quicklistAppendZiplist",
          "old_text": null,
          "new_text": "quicklistAppendZiplist(o->ptr, zl)",
          "old_line_content": "        }",
          "new_line_content": "            quicklistAppendZiplist(o->ptr, zl);",
          "content_same": false
        },
        {
          "line": 764,
          "old_api": null,
          "new_api": "moduleInitIOContext",
          "old_text": null,
          "new_text": "moduleInitIOContext(io,mt,rdb)",
          "old_line_content": "",
          "new_line_content": "        moduleInitIOContext(io,mt,rdb);",
          "content_same": false
        },
        {
          "line": 1789,
          "old_api": null,
          "new_api": "anetSendTimeout",
          "old_text": null,
          "new_text": "anetSendTimeout(NULL,slave->fd,server.repl_timeout*1000)",
          "old_line_content": "        }",
          "new_line_content": "            anetSendTimeout(NULL,slave->fd,server.repl_timeout*1000);",
          "content_same": false
        },
        {
          "line": 768,
          "old_api": null,
          "new_api": "rdbSaveLen",
          "old_text": null,
          "new_text": "rdbSaveLen(rdb,mt->id)",
          "old_line_content": "        if (retval == -1) return -1;",
          "new_line_content": "        int retval = rdbSaveLen(rdb,mt->id);",
          "content_same": false
        },
        {
          "line": 1283,
          "old_api": null,
          "new_api": "rdbGenericLoadStringObject",
          "old_text": null,
          "new_text": "rdbGenericLoadStringObject(rdb,RDB_LOAD_PLAIN,NULL)",
          "old_line_content": "        if (encoded == NULL) return NULL;",
          "new_line_content": "            rdbGenericLoadStringObject(rdb,RDB_LOAD_PLAIN,NULL);",
          "content_same": false
        },
        {
          "line": 1796,
          "old_api": null,
          "new_api": "fork",
          "old_text": null,
          "new_text": "fork()",
          "old_line_content": "        /* Child */",
          "new_line_content": "    if ((childpid = fork()) == 0) {",
          "content_same": false
        },
        {
          "line": 773,
          "old_api": null,
          "new_api": "rdb_save",
          "old_text": null,
          "new_text": "mt->rdb_save(&io,mv->value)",
          "old_line_content": "        if (io.ctx) {",
          "new_line_content": "        mt->rdb_save(&io,mv->value);",
          "content_same": false
        },
        {
          "line": 1285,
          "old_api": null,
          "new_api": "createObject",
          "old_text": null,
          "new_text": "createObject(OBJ_STRING,encoded)",
          "old_line_content": "",
          "new_line_content": "        o = createObject(OBJ_STRING,encoded); /* Obj type fixed below. */",
          "content_same": false
        },
        {
          "line": 776,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(io.ctx)",
          "old_line_content": "        }",
          "new_line_content": "            zfree(io.ctx);",
          "content_same": false
        },
        {
          "line": 1802,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(fds)",
          "old_line_content": "",
          "new_line_content": "        zfree(fds);",
          "content_same": false
        },
        {
          "line": 780,
          "old_api": null,
          "new_api": "serverPanic",
          "old_text": null,
          "new_text": "serverPanic(\"Unknown object type\")",
          "old_line_content": "    }",
          "new_line_content": "        serverPanic(\"Unknown object type\");",
          "content_same": false
        },
        {
          "line": 1805,
          "old_api": null,
          "new_api": "redisSetProcTitle",
          "old_text": null,
          "new_text": "redisSetProcTitle(\"redis-rdb-to-slaves\")",
          "old_line_content": "",
          "new_line_content": "        redisSetProcTitle(\"redis-rdb-to-slaves\");",
          "content_same": false
        },
        {
          "line": 1808,
          "old_api": null,
          "new_api": "rioFlush",
          "old_text": null,
          "new_text": "rioFlush(&slave_sockets)",
          "old_line_content": "            retval = C_ERR;",
          "new_line_content": "        if (retval == C_OK && rioFlush(&slave_sockets) == 0)",
          "content_same": false
        },
        {
          "line": 1299,
          "old_api": null,
          "new_api": "zipmapRewind",
          "old_text": null,
          "new_text": "zipmapRewind(o->ptr)",
          "old_line_content": "                    unsigned char *fstr, *vstr;",
          "new_line_content": "                    unsigned char *zi = zipmapRewind(o->ptr);",
          "content_same": false
        },
        {
          "line": 1812,
          "old_api": null,
          "new_api": "zmalloc_get_private_dirty",
          "old_text": null,
          "new_text": "zmalloc_get_private_dirty(-1)",
          "old_line_content": "",
          "new_line_content": "            size_t private_dirty = zmalloc_get_private_dirty(-1);",
          "content_same": false
        },
        {
          "line": 791,
          "old_api": null,
          "new_api": "serverAssertWithInfo",
          "old_text": null,
          "new_text": "serverAssertWithInfo(NULL,o,len != -1)",
          "old_line_content": "    return len;",
          "new_line_content": "    serverAssertWithInfo(NULL,o,len != -1);",
          "content_same": false
        },
        {
          "line": 1304,
          "old_api": null,
          "new_api": "zipmapNext",
          "old_text": null,
          "new_text": "zipmapNext(zi, &fstr, &flen, &vstr, &vlen)",
          "old_line_content": "                        if (flen > maxlen) maxlen = flen;",
          "new_line_content": "                    while ((zi = zipmapNext(zi, &fstr, &flen, &vstr, &vlen)) != NULL) {",
          "content_same": false
        },
        {
          "line": 1815,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_NOTICE,\n                    \"RDB: %zu MB of memory used by copy-on-write\",\n                    private_dirty/(1024*1024))",
          "old_line_content": "                    \"RDB: %zu MB of memory used by copy-on-write\",",
          "new_line_content": "                serverLog(LL_NOTICE,",
          "content_same": false
        },
        {
          "line": 1308,
          "old_api": null,
          "new_api": "ziplistPush",
          "old_text": null,
          "new_text": "ziplistPush(zl, vstr, vlen, ZIPLIST_TAIL)",
          "old_line_content": "                    }",
          "new_line_content": "                        zl = ziplistPush(zl, vstr, vlen, ZIPLIST_TAIL);",
          "content_same": false
        },
        {
          "line": 1821,
          "old_api": null,
          "new_api": "sendChildInfo",
          "old_text": null,
          "new_text": "sendChildInfo(CHILD_INFO_TYPE_RDB)",
          "old_line_content": "",
          "new_line_content": "            sendChildInfo(CHILD_INFO_TYPE_RDB);",
          "content_same": false
        },
        {
          "line": 1311,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(o->ptr)",
          "old_line_content": "                    o->ptr = zl;",
          "new_line_content": "                    zfree(o->ptr);",
          "content_same": false
        },
        {
          "line": 1316,
          "old_api": null,
          "new_api": "hashTypeLength",
          "old_text": null,
          "new_text": "hashTypeLength(o)",
          "old_line_content": "                        maxlen > server.hash_max_ziplist_value)",
          "new_line_content": "                    if (hashTypeLength(o) > server.hash_max_ziplist_entries ||",
          "content_same": false
        },
        {
          "line": 807,
          "old_api": null,
          "new_api": "rdbSaveMillisecondTime",
          "old_text": null,
          "new_text": "rdbSaveMillisecondTime(rdb,expiretime)",
          "old_line_content": "    }",
          "new_line_content": "        if (rdbSaveMillisecondTime(rdb,expiretime) == -1) return -1;",
          "content_same": false
        },
        {
          "line": 1319,
          "old_api": null,
          "new_api": "hashTypeConvert",
          "old_text": null,
          "new_text": "hashTypeConvert(o, OBJ_ENCODING_HT)",
          "old_line_content": "                    }",
          "new_line_content": "                        hashTypeConvert(o, OBJ_ENCODING_HT);",
          "content_same": false
        },
        {
          "line": 813,
          "old_api": null,
          "new_api": "rdbSaveObject",
          "old_text": null,
          "new_text": "rdbSaveObject(rdb,val)",
          "old_line_content": "    return 1;",
          "new_line_content": "    if (rdbSaveObject(rdb,val) == -1) return -1;",
          "content_same": false
        },
        {
          "line": 1326,
          "old_api": null,
          "new_api": "listTypeConvert",
          "old_text": null,
          "new_text": "listTypeConvert(o,OBJ_ENCODING_QUICKLIST)",
          "old_line_content": "                break;",
          "new_line_content": "                listTypeConvert(o,OBJ_ENCODING_QUICKLIST);",
          "content_same": false
        },
        {
          "line": 1838,
          "old_api": null,
          "new_api": "zmalloc",
          "old_text": null,
          "new_text": "zmalloc(sizeof(uint64_t)*(1+2*numfds))",
          "old_line_content": "            uint64_t *len = msg;",
          "new_line_content": "            void *msg = zmalloc(sizeof(uint64_t)*(1+2*numfds));",
          "content_same": false
        },
        {
          "line": 1332,
          "old_api": null,
          "new_api": "setTypeConvert",
          "old_text": null,
          "new_text": "setTypeConvert(o,OBJ_ENCODING_HT)",
          "old_line_content": "                break;",
          "new_line_content": "                    setTypeConvert(o,OBJ_ENCODING_HT);",
          "content_same": false
        },
        {
          "line": 821,
          "old_api": null,
          "new_api": "rdbSaveRawString",
          "old_text": null,
          "new_text": "rdbSaveRawString(rdb,val,vallen)",
          "old_line_content": "    return 1;",
          "new_line_content": "    if (rdbSaveRawString(rdb,val,vallen) == -1) return -1;",
          "content_same": false
        },
        {
          "line": 1338,
          "old_api": null,
          "new_api": "zsetConvert",
          "old_text": null,
          "new_text": "zsetConvert(o,OBJ_ENCODING_SKIPLIST)",
          "old_line_content": "                break;",
          "new_line_content": "                    zsetConvert(o,OBJ_ENCODING_SKIPLIST);",
          "content_same": false
        },
        {
          "line": 828,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(val)",
          "old_line_content": "}",
          "new_line_content": "    return rdbSaveAuxField(rdb,key,strlen(key),val,strlen(val));",
          "content_same": false
        },
        {
          "line": 1855,
          "old_api": null,
          "new_api": "write",
          "old_text": null,
          "new_text": "write(server.rdb_pipe_write_result_to_parent,msg,msglen)",
          "old_line_content": "                != msglen)",
          "new_line_content": "                write(server.rdb_pipe_write_result_to_parent,msg,msglen)",
          "content_same": false
        },
        {
          "line": 1344,
          "old_api": null,
          "new_api": "hashTypeConvert",
          "old_text": null,
          "new_text": "hashTypeConvert(o, OBJ_ENCODING_HT)",
          "old_line_content": "                break;",
          "new_line_content": "                    hashTypeConvert(o, OBJ_ENCODING_HT);",
          "content_same": false
        },
        {
          "line": 835,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(key)",
          "old_line_content": "}",
          "new_line_content": "    return rdbSaveAuxField(rdb,key,strlen(key),buf,vlen);",
          "content_same": false
        },
        {
          "line": 1347,
          "old_api": null,
          "new_api": "rdbExitReportCorruptRDB",
          "old_text": null,
          "new_text": "rdbExitReportCorruptRDB(\"Unknown RDB encoding type %d\",rdbtype)",
          "old_line_content": "                break;",
          "new_line_content": "                rdbExitReportCorruptRDB(\"Unknown RDB encoding type %d\",rdbtype);",
          "content_same": false
        },
        {
          "line": 1860,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(msg)",
          "old_line_content": "        }",
          "new_line_content": "            zfree(msg);",
          "content_same": false
        },
        {
          "line": 1352,
          "old_api": null,
          "new_api": "moduleTypeLookupModuleByID",
          "old_text": null,
          "new_text": "moduleTypeLookupModuleByID(moduleid)",
          "old_line_content": "        char name[10];",
          "new_line_content": "        moduleType *mt = moduleTypeLookupModuleByID(moduleid);",
          "content_same": false
        },
        {
          "line": 1864,
          "old_api": null,
          "new_api": "exitFromChild",
          "old_text": null,
          "new_text": "exitFromChild((retval == C_OK) ? 0 : 1)",
          "old_line_content": "    } else {",
          "new_line_content": "        exitFromChild((retval == C_OK) ? 0 : 1);",
          "content_same": false
        },
        {
          "line": 1869,
          "old_api": null,
          "new_api": "latencyAddSampleIfNeeded",
          "old_text": null,
          "new_text": "latencyAddSampleIfNeeded(\"fork\",server.stat_fork_time/1000)",
          "old_line_content": "        if (childpid == -1) {",
          "new_line_content": "        latencyAddSampleIfNeeded(\"fork\",server.stat_fork_time/1000);",
          "content_same": false
        },
        {
          "line": 1358,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "        }",
          "new_line_content": "            exit(1);",
          "content_same": false
        },
        {
          "line": 847,
          "old_api": null,
          "new_api": "zmalloc_used_memory",
          "old_text": null,
          "new_text": "zmalloc_used_memory()",
          "old_line_content": "",
          "new_line_content": "    if (rdbSaveAuxFieldStrInt(rdb,\"used-mem\",zmalloc_used_memory()) == -1) return -1;",
          "content_same": false
        },
        {
          "line": 1872,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "",
          "new_line_content": "                strerror(errno));",
          "content_same": false
        },
        {
          "line": 1361,
          "old_api": null,
          "new_api": "moduleInitIOContext",
          "old_text": null,
          "new_text": "moduleInitIOContext(io,mt,rdb)",
          "old_line_content": "        /* Call the rdb_load method of the module providing the 10 bit",
          "new_line_content": "        moduleInitIOContext(io,mt,rdb);",
          "content_same": false
        },
        {
          "line": 852,
          "old_api": null,
          "new_api": "rdbSaveAuxFieldStrInt",
          "old_text": null,
          "new_text": "rdbSaveAuxFieldStrInt(rdb,\"repl-stream-db\",rsi->repl_stream_db)",
          "old_line_content": "            == -1)",
          "new_line_content": "            rdbSaveAuxFieldStrInt(rdb,\"repl-stream-db\",rsi->repl_stream_db)",
          "content_same": false
        },
        {
          "line": 1364,
          "old_api": null,
          "new_api": "rdb_load",
          "old_text": null,
          "new_text": "mt->rdb_load(&io,moduleid&1023)",
          "old_line_content": "        if (ptr == NULL) {",
          "new_line_content": "        void *ptr = mt->rdb_load(&io,moduleid&1023);",
          "content_same": false
        },
        {
          "line": 1878,
          "old_api": null,
          "new_api": "listNext",
          "old_text": null,
          "new_text": "listNext(&li)",
          "old_line_content": "                client *slave = ln->value;",
          "new_line_content": "            while((ln = listNext(&li))) {",
          "content_same": false
        },
        {
          "line": 1368,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "        }",
          "new_line_content": "            exit(1);",
          "content_same": false
        },
        {
          "line": 1370,
          "old_api": null,
          "new_api": "createModuleObject",
          "old_text": null,
          "new_text": "createModuleObject(mt,ptr)",
          "old_line_content": "    } else {",
          "new_line_content": "        o = createModuleObject(mt,ptr);",
          "content_same": false
        },
        {
          "line": 860,
          "old_api": null,
          "new_api": "rdbSaveAuxFieldStrInt",
          "old_text": null,
          "new_text": "rdbSaveAuxFieldStrInt(rdb,\"repl-offset\",server.master_repl_offset)",
          "old_line_content": "    return 1;",
          "new_line_content": "    if (rdbSaveAuxFieldStrInt(rdb,\"repl-offset\",server.master_repl_offset) == -1) return -1;",
          "content_same": false
        },
        {
          "line": 1372,
          "old_api": null,
          "new_api": "rdbExitReportCorruptRDB",
          "old_text": null,
          "new_text": "rdbExitReportCorruptRDB(\"Unknown RDB encoding type %d\",rdbtype)",
          "old_line_content": "    }",
          "new_line_content": "        rdbExitReportCorruptRDB(\"Unknown RDB encoding type %d\",rdbtype);",
          "content_same": false
        },
        {
          "line": 1891,
          "old_api": null,
          "new_api": "closeChildInfoPipe",
          "old_text": null,
          "new_text": "closeChildInfoPipe()",
          "old_line_content": "        } else {",
          "new_line_content": "            closeChildInfoPipe();",
          "content_same": false
        },
        {
          "line": 1893,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_NOTICE,\"Background RDB transfer started by pid %d\",\n                childpid)",
          "old_line_content": "                childpid);",
          "new_line_content": "            serverLog(LL_NOTICE,\"Background RDB transfer started by pid %d\",",
          "content_same": false
        },
        {
          "line": 1895,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "            server.rdb_child_pid = childpid;",
          "new_line_content": "            server.rdb_save_time_start = time(NULL);",
          "content_same": false
        },
        {
          "line": 1384,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "    server.loading_loaded_bytes = 0;",
          "new_line_content": "    server.loading_start_time = time(NULL);",
          "content_same": false
        },
        {
          "line": 1386,
          "old_api": null,
          "new_api": "fileno",
          "old_text": null,
          "new_text": "fileno(fp)",
          "old_line_content": "        server.loading_total_bytes = 0;",
          "new_line_content": "    if (fstat(fileno(fp), &sb) == -1) {",
          "content_same": false
        },
        {
          "line": 1898,
          "old_api": null,
          "new_api": "updateDictResizePolicy",
          "old_text": null,
          "new_text": "updateDictResizePolicy()",
          "old_line_content": "        }",
          "new_line_content": "            updateDictResizePolicy();",
          "content_same": false
        },
        {
          "line": 877,
          "old_api": null,
          "new_api": "mstime",
          "old_text": null,
          "new_text": "mstime()",
          "old_line_content": "    uint64_t cksum;",
          "new_line_content": "    long long now = mstime();",
          "content_same": false
        },
        {
          "line": 1901,
          "old_api": null,
          "new_api": "zfree",
          "old_text": null,
          "new_text": "zfree(fds)",
          "old_line_content": "        return (childpid == -1) ? C_ERR : C_OK;",
          "new_line_content": "        zfree(fds);",
          "content_same": false
        },
        {
          "line": 885,
          "old_api": null,
          "new_api": "rdbSaveInfoAuxFields",
          "old_text": null,
          "new_text": "rdbSaveInfoAuxFields(rdb,flags,rsi)",
          "old_line_content": "",
          "new_line_content": "    if (rdbSaveInfoAuxFields(rdb,flags,rsi) == -1) goto werr;",
          "content_same": false
        },
        {
          "line": 1397,
          "old_api": null,
          "new_api": "zmalloc_used_memory",
          "old_text": null,
          "new_text": "zmalloc_used_memory()",
          "old_line_content": "}",
          "new_line_content": "        server.stat_peak_memory = zmalloc_used_memory();",
          "content_same": false
        },
        {
          "line": 1909,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"Background save already in progress\")",
          "old_line_content": "        return;",
          "new_line_content": "        addReplyError(c,\"Background save already in progress\");",
          "content_same": false
        },
        {
          "line": 1913,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.ok)",
          "old_line_content": "    } else {",
          "new_line_content": "        addReply(c,shared.ok);",
          "content_same": false
        },
        {
          "line": 891,
          "old_api": null,
          "new_api": "dictGetSafeIterator",
          "old_text": null,
          "new_text": "dictGetSafeIterator(d)",
          "old_line_content": "        if (!di) return C_ERR;",
          "new_line_content": "        di = dictGetSafeIterator(d);",
          "content_same": false
        },
        {
          "line": 1915,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.err)",
          "old_line_content": "    }",
          "new_line_content": "        addReply(c,shared.err);",
          "content_same": false
        },
        {
          "line": 896,
          "old_api": null,
          "new_api": "rdbSaveLen",
          "old_text": null,
          "new_text": "rdbSaveLen(rdb,j)",
          "old_line_content": "",
          "new_line_content": "        if (rdbSaveLen(rdb,j) == -1) goto werr;",
          "content_same": false
        },
        {
          "line": 1409,
          "old_api": null,
          "new_api": "rioGenericUpdateChecksum",
          "old_text": null,
          "new_text": "rioGenericUpdateChecksum(r, buf, len)",
          "old_line_content": "    if (server.loading_process_events_interval_bytes &&",
          "new_line_content": "        rioGenericUpdateChecksum(r, buf, len);",
          "content_same": false
        },
        {
          "line": 1926,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(c->argv[1]->ptr,\"schedule\")",
          "old_line_content": "            schedule = 1;",
          "new_line_content": "        if (c->argc == 2 && !strcasecmp(c->argv[1]->ptr,\"schedule\")) {",
          "content_same": false
        },
        {
          "line": 904,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(db->dict)",
          "old_line_content": "                                UINT32_MAX;",
          "new_line_content": "                                dictSize(db->dict) :",
          "content_same": false
        },
        {
          "line": 1416,
          "old_api": null,
          "new_api": "updateCachedTime",
          "old_text": null,
          "new_text": "updateCachedTime()",
          "old_line_content": "        if (server.masterhost && server.repl_state == REPL_STATE_TRANSFER)",
          "new_line_content": "        updateCachedTime();",
          "content_same": false
        },
        {
          "line": 1929,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.syntaxerr)",
          "old_line_content": "            return;",
          "new_line_content": "            addReply(c,shared.syntaxerr);",
          "content_same": false
        },
        {
          "line": 907,
          "old_api": null,
          "new_api": "dictSize",
          "old_text": null,
          "new_text": "dictSize(db->expires)",
          "old_line_content": "                                UINT32_MAX;",
          "new_line_content": "                                dictSize(db->expires) :",
          "content_same": false
        },
        {
          "line": 1420,
          "old_api": null,
          "new_api": "processEventsWhileBlocked",
          "old_text": null,
          "new_text": "processEventsWhileBlocked()",
          "old_line_content": "    }",
          "new_line_content": "        processEventsWhileBlocked();",
          "content_same": false
        },
        {
          "line": 911,
          "old_api": null,
          "new_api": "rdbSaveLen",
          "old_text": null,
          "new_text": "rdbSaveLen(rdb,expires_size)",
          "old_line_content": "",
          "new_line_content": "        if (rdbSaveLen(rdb,expires_size) == -1) goto werr;",
          "content_same": false
        },
        {
          "line": 1935,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\"Background save already in progress\")",
          "old_line_content": "    } else if (server.aof_child_pid != -1) {",
          "new_line_content": "        addReplyError(c,\"Background save already in progress\");",
          "content_same": false
        },
        {
          "line": 1939,
          "old_api": null,
          "new_api": "addReplyStatus",
          "old_text": null,
          "new_text": "addReplyStatus(c,\"Background saving scheduled\")",
          "old_line_content": "        } else {",
          "new_line_content": "            addReplyStatus(c,\"Background saving scheduled\");",
          "content_same": false
        },
        {
          "line": 916,
          "old_api": null,
          "new_api": "dictGetVal",
          "old_text": null,
          "new_text": "dictGetVal(de)",
          "old_line_content": "            long long expire;",
          "new_line_content": "            robj key, *o = dictGetVal(de);",
          "content_same": false
        },
        {
          "line": 1941,
          "old_api": null,
          "new_api": "addReplyError",
          "old_text": null,
          "new_text": "addReplyError(c,\n                \"An AOF log rewriting in progress: can't BGSAVE right now. \"\n                \"Use BGSAVE SCHEDULE in order to schedule a BGSAVE whenever \"\n                \"possible.\")",
          "old_line_content": "                \"An AOF log rewriting in progress: can't BGSAVE right now. \"",
          "new_line_content": "            addReplyError(c,",
          "content_same": false
        },
        {
          "line": 1431,
          "old_api": null,
          "new_api": "mstime",
          "old_text": null,
          "new_text": "mstime()",
          "old_line_content": "",
          "new_line_content": "    long long expiretime, now = mstime();",
          "content_same": false
        },
        {
          "line": 921,
          "old_api": null,
          "new_api": "rdbSaveKeyValuePair",
          "old_text": null,
          "new_text": "rdbSaveKeyValuePair(rdb,&key,o,expire,now)",
          "old_line_content": "",
          "new_line_content": "            if (rdbSaveKeyValuePair(rdb,&key,o,expire,now) == -1) goto werr;",
          "content_same": false
        },
        {
          "line": 1435,
          "old_api": null,
          "new_api": "rioRead",
          "old_text": null,
          "new_text": "rioRead(rdb,buf,9)",
          "old_line_content": "    buf[9] = '\\0';",
          "new_line_content": "    if (rioRead(rdb,buf,9) == 0) goto eoferr;",
          "content_same": false
        },
        {
          "line": 1947,
          "old_api": null,
          "new_api": "addReplyStatus",
          "old_text": null,
          "new_text": "addReplyStatus(c,\"Background saving started\")",
          "old_line_content": "    } else {",
          "new_line_content": "        addReplyStatus(c,\"Background saving started\");",
          "content_same": false
        },
        {
          "line": 1949,
          "old_api": null,
          "new_api": "addReply",
          "old_text": null,
          "new_text": "addReply(c,shared.err)",
          "old_line_content": "    }",
          "new_line_content": "        addReply(c,shared.err);",
          "content_same": false
        },
        {
          "line": 1438,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\"Wrong signature trying to load DB from file\")",
          "old_line_content": "        errno = EINVAL;",
          "new_line_content": "        serverLog(LL_WARNING,\"Wrong signature trying to load DB from file\");",
          "content_same": false
        },
        {
          "line": 930,
          "old_api": null,
          "new_api": "aofReadDiffFromParent",
          "old_text": null,
          "new_text": "aofReadDiffFromParent()",
          "old_line_content": "            }",
          "new_line_content": "                aofReadDiffFromParent();",
          "content_same": false
        },
        {
          "line": 1442,
          "old_api": null,
          "new_api": "atoi",
          "old_text": null,
          "new_text": "atoi(buf+5)",
          "old_line_content": "    if (rdbver < 1 || rdbver > RDB_VERSION) {",
          "new_line_content": "    rdbver = atoi(buf+5);",
          "content_same": false
        },
        {
          "line": 1444,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\"Can't handle RDB format version %d\",rdbver)",
          "old_line_content": "        errno = EINVAL;",
          "new_line_content": "        serverLog(LL_WARNING,\"Can't handle RDB format version %d\",rdbver);",
          "content_same": false
        },
        {
          "line": 933,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "    }",
          "new_line_content": "        dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 938,
          "old_api": null,
          "new_api": "rdbSaveType",
          "old_text": null,
          "new_text": "rdbSaveType(rdb,RDB_OPCODE_EOF)",
          "old_line_content": "",
          "new_line_content": "    if (rdbSaveType(rdb,RDB_OPCODE_EOF) == -1) goto werr;",
          "content_same": false
        },
        {
          "line": 1454,
          "old_api": null,
          "new_api": "rdbLoadType",
          "old_text": null,
          "new_text": "rdbLoadType(rdb)",
          "old_line_content": "",
          "new_line_content": "        if ((type = rdbLoadType(rdb)) == -1) goto eoferr;",
          "content_same": false
        },
        {
          "line": 944,
          "old_api": null,
          "new_api": "rioWrite",
          "old_text": null,
          "new_text": "rioWrite(rdb,&cksum,8)",
          "old_line_content": "    return C_OK;",
          "new_line_content": "    if (rioWrite(rdb,&cksum,8) == 0) goto werr;",
          "content_same": false
        },
        {
          "line": 949,
          "old_api": null,
          "new_api": "dictReleaseIterator",
          "old_text": null,
          "new_text": "dictReleaseIterator(di)",
          "old_line_content": "    return C_ERR;",
          "new_line_content": "    if (di) dictReleaseIterator(di);",
          "content_same": false
        },
        {
          "line": 1461,
          "old_api": null,
          "new_api": "rdbLoadTime",
          "old_text": null,
          "new_text": "rdbLoadTime(rdb)",
          "old_line_content": "            /* We read the time so we need to read the object type again. */",
          "new_line_content": "            if ((expiretime = rdbLoadTime(rdb)) == -1) goto eoferr;",
          "content_same": false
        },
        {
          "line": 1463,
          "old_api": null,
          "new_api": "rdbLoadType",
          "old_text": null,
          "new_text": "rdbLoadType(rdb)",
          "old_line_content": "            /* the EXPIRETIME opcode specifies time in seconds, so convert",
          "new_line_content": "            if ((type = rdbLoadType(rdb)) == -1) goto eoferr;",
          "content_same": false
        },
        {
          "line": 1470,
          "old_api": null,
          "new_api": "rdbLoadMillisecondTime",
          "old_text": null,
          "new_text": "rdbLoadMillisecondTime(rdb)",
          "old_line_content": "            /* We read the time so we need to read the object type again. */",
          "new_line_content": "            if ((expiretime = rdbLoadMillisecondTime(rdb)) == -1) goto eoferr;",
          "content_same": false
        },
        {
          "line": 1472,
          "old_api": null,
          "new_api": "rdbLoadType",
          "old_text": null,
          "new_text": "rdbLoadType(rdb)",
          "old_line_content": "        } else if (type == RDB_OPCODE_EOF) {",
          "new_line_content": "            if ((type = rdbLoadType(rdb)) == -1) goto eoferr;",
          "content_same": false
        },
        {
          "line": 964,
          "old_api": null,
          "new_api": "getRandomHexChars",
          "old_text": null,
          "new_text": "getRandomHexChars(eofmark,RDB_EOF_MARK_SIZE)",
          "old_line_content": "    if (error) *error = 0;",
          "new_line_content": "    getRandomHexChars(eofmark,RDB_EOF_MARK_SIZE);",
          "content_same": false
        },
        {
          "line": 1478,
          "old_api": null,
          "new_api": "rdbLoadLen",
          "old_text": null,
          "new_text": "rdbLoadLen(rdb,NULL)",
          "old_line_content": "                goto eoferr;",
          "new_line_content": "            if ((dbid = rdbLoadLen(rdb,NULL)) == RDB_LENERR)",
          "content_same": false
        },
        {
          "line": 1481,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\n                    \"FATAL: Data file was created with a Redis \"\n                    \"server configured to handle more than %d \"\n                    \"databases. Exiting\\n\", server.dbnum)",
          "old_line_content": "                    \"FATAL: Data file was created with a Redis \"",
          "new_line_content": "                serverLog(LL_WARNING,",
          "content_same": false
        },
        {
          "line": 970,
          "old_api": null,
          "new_api": "rioWrite",
          "old_text": null,
          "new_text": "rioWrite(rdb,eofmark,RDB_EOF_MARK_SIZE)",
          "old_line_content": "    return C_OK;",
          "new_line_content": "    if (rioWrite(rdb,eofmark,RDB_EOF_MARK_SIZE) == 0) goto werr;",
          "content_same": false
        },
        {
          "line": 1485,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "            }",
          "new_line_content": "                exit(1);",
          "content_same": false
        },
        {
          "line": 1493,
          "old_api": null,
          "new_api": "rdbLoadLen",
          "old_text": null,
          "new_text": "rdbLoadLen(rdb,NULL)",
          "old_line_content": "                goto eoferr;",
          "new_line_content": "            if ((db_size = rdbLoadLen(rdb,NULL)) == RDB_LENERR)",
          "content_same": false
        },
        {
          "line": 1495,
          "old_api": null,
          "new_api": "rdbLoadLen",
          "old_text": null,
          "new_text": "rdbLoadLen(rdb,NULL)",
          "old_line_content": "                goto eoferr;",
          "new_line_content": "            if ((expires_size = rdbLoadLen(rdb,NULL)) == RDB_LENERR)",
          "content_same": false
        },
        {
          "line": 1498,
          "old_api": null,
          "new_api": "dictExpand",
          "old_text": null,
          "new_text": "dictExpand(db->expires,expires_size)",
          "old_line_content": "            continue; /* Read type again. */",
          "new_line_content": "            dictExpand(db->expires,expires_size);",
          "content_same": false
        },
        {
          "line": 988,
          "old_api": null,
          "new_api": "fopen",
          "old_text": null,
          "new_text": "fopen(tmpfile,\"w\")",
          "old_line_content": "    if (!fp) {",
          "new_line_content": "    fp = fopen(tmpfile,\"w\");",
          "content_same": false
        },
        {
          "line": 991,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\n            \"Failed opening the RDB file %s (in server root dir %s) \"\n            \"for saving: %s\",\n            filename,\n            cwdp ? cwdp : \"unknown\",\n            strerror(errno))",
          "old_line_content": "            \"Failed opening the RDB file %s (in server root dir %s) \"",
          "new_line_content": "        serverLog(LL_WARNING,",
          "content_same": false
        },
        {
          "line": 996,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "        return C_ERR;",
          "new_line_content": "            strerror(errno));",
          "content_same": false
        },
        {
          "line": 1508,
          "old_api": null,
          "new_api": "rdbLoadStringObject",
          "old_text": null,
          "new_text": "rdbLoadStringObject(rdb)",
          "old_line_content": "",
          "new_line_content": "            if ((auxval = rdbLoadStringObject(rdb)) == NULL) goto eoferr;",
          "content_same": false
        },
        {
          "line": 1001,
          "old_api": null,
          "new_api": "rdbSaveRio",
          "old_text": null,
          "new_text": "rdbSaveRio(&rdb,&error,RDB_SAVE_NONE,rsi)",
          "old_line_content": "        errno = error;",
          "new_line_content": "    if (rdbSaveRio(&rdb,&error,RDB_SAVE_NONE,rsi) == C_ERR) {",
          "content_same": false
        },
        {
          "line": 1514,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_NOTICE,\"RDB '%s': %s\",\n                    (char*)auxkey->ptr,\n                    (char*)auxval->ptr)",
          "old_line_content": "                    (char*)auxkey->ptr,",
          "new_line_content": "                serverLog(LL_NOTICE,\"RDB '%s': %s\",",
          "content_same": false
        },
        {
          "line": 1009,
          "old_api": null,
          "new_api": "fclose",
          "old_text": null,
          "new_text": "fclose(fp)",
          "old_line_content": "",
          "new_line_content": "    if (fclose(fp) == EOF) goto werr;",
          "content_same": false
        },
        {
          "line": 1521,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(rsi->repl_id,auxval->ptr,CONFIG_RUN_ID_SIZE+1)",
          "old_line_content": "                    rsi->repl_id_is_set = 1;",
          "new_line_content": "                    memcpy(rsi->repl_id,auxval->ptr,CONFIG_RUN_ID_SIZE+1);",
          "content_same": false
        },
        {
          "line": 1525,
          "old_api": null,
          "new_api": "strtoll",
          "old_text": null,
          "new_text": "strtoll(auxval->ptr,NULL,10)",
          "old_line_content": "            } else {",
          "new_line_content": "                if (rsi) rsi->repl_offset = strtoll(auxval->ptr,NULL,10);",
          "content_same": false
        },
        {
          "line": 1015,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_WARNING,\n            \"Error moving temp DB file %s on the final \"\n            \"destination %s (in server root dir %s): %s\",\n            tmpfile,\n            filename,\n            cwdp ? cwdp : \"unknown\",\n            strerror(errno))",
          "old_line_content": "            \"Error moving temp DB file %s on the final \"",
          "new_line_content": "        serverLog(LL_WARNING,",
          "content_same": false
        },
        {
          "line": 1529,
          "old_api": null,
          "new_api": "serverLog",
          "old_text": null,
          "new_text": "serverLog(LL_DEBUG,\"Unrecognized RDB AUX field: '%s'\",\n                    (char*)auxkey->ptr)",
          "old_line_content": "                    (char*)auxkey->ptr);",
          "new_line_content": "                serverLog(LL_DEBUG,\"Unrecognized RDB AUX field: '%s'\",",
          "content_same": false
        },
        {
          "line": 1022,
          "old_api": null,
          "new_api": "unlink",
          "old_text": null,
          "new_text": "unlink(tmpfile)",
          "old_line_content": "        return C_ERR;",
          "new_line_content": "        unlink(tmpfile);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 1025,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_NOTICE,\"DB saved on disk\")",
          "new_text": null,
          "old_line_content": "    serverLog(LL_NOTICE,\"DB saved on disk\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1538,
          "old_api": "rdbLoadStringObject",
          "new_api": null,
          "old_text": "rdbLoadStringObject(rdb)",
          "new_text": null,
          "old_line_content": "        if ((key = rdbLoadStringObject(rdb)) == NULL) goto eoferr;",
          "new_line_content": "        /* Read key */",
          "content_same": false
        },
        {
          "line": 1027,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "    server.lastsave = time(NULL);",
          "new_line_content": "    server.dirty = 0;",
          "content_same": false
        },
        {
          "line": 1540,
          "old_api": "rdbLoadObject",
          "new_api": null,
          "old_text": "rdbLoadObject(type,rdb)",
          "new_text": null,
          "old_line_content": "        if ((val = rdbLoadObject(type,rdb)) == NULL) goto eoferr;",
          "new_line_content": "        /* Read value */",
          "content_same": false
        },
        {
          "line": 1032,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "    serverLog(LL_WARNING,\"Write error saving DB on disk: %s\", strerror(errno));",
          "new_line_content": "werr:",
          "content_same": false
        },
        {
          "line": 1547,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(key)",
          "new_text": null,
          "old_line_content": "            decrRefCount(key);",
          "new_line_content": "        if (server.masterhost == NULL && expiretime != -1 && expiretime < now) {",
          "content_same": false
        },
        {
          "line": 1552,
          "old_api": "dbAdd",
          "new_api": null,
          "old_text": "dbAdd(db,key,val)",
          "new_text": null,
          "old_line_content": "        dbAdd(db,key,val);",
          "new_line_content": "        /* Add the new object in the hash table */",
          "content_same": false
        },
        {
          "line": 1555,
          "old_api": "setExpire",
          "new_api": null,
          "old_text": "setExpire(NULL,db,key,expiretime)",
          "new_text": null,
          "old_line_content": "        if (expiretime != -1) setExpire(NULL,db,key,expiretime);",
          "new_line_content": "        /* Set the expire time if needed */",
          "content_same": false
        },
        {
          "line": 1045,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "    server.lastbgsave_try = time(NULL);",
          "new_line_content": "    server.dirty_before_bgsave = server.dirty;",
          "content_same": false
        },
        {
          "line": 1557,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(key)",
          "new_text": null,
          "old_line_content": "        decrRefCount(key);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1048,
          "old_api": "ustime",
          "new_api": null,
          "old_text": "ustime()",
          "new_text": null,
          "old_line_content": "    start = ustime();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1563,
          "old_api": "rioRead",
          "new_api": null,
          "old_text": "rioRead(rdb,&cksum,8)",
          "new_text": null,
          "old_line_content": "        if (rioRead(rdb,&cksum,8) == 0) goto eoferr;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1532,
          "old_api": "decrRefCount",
          "new_api": null,
          "old_text": "decrRefCount(auxkey)",
          "new_text": null,
          "old_line_content": "            decrRefCount(auxkey);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1053,
          "old_api": "closeListeningSockets",
          "new_api": null,
          "old_text": "closeListeningSockets(0)",
          "new_text": null,
          "old_line_content": "        closeListeningSockets(0);",
          "new_line_content": "        /* Child */",
          "content_same": false
        },
        {
          "line": 1566,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\"RDB file was saved with checksum disabled: no check performed.\")",
          "new_text": null,
          "old_line_content": "            serverLog(LL_WARNING,\"RDB file was saved with checksum disabled: no check performed.\");",
          "new_line_content": "        if (cksum == 0) {",
          "content_same": false
        },
        {
          "line": 1568,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\"Wrong RDB checksum. Aborting now.\")",
          "new_text": null,
          "old_line_content": "            serverLog(LL_WARNING,\"Wrong RDB checksum. Aborting now.\");",
          "new_line_content": "        } else if (cksum != expected) {",
          "content_same": false
        },
        {
          "line": 1057,
          "old_api": "zmalloc_get_private_dirty",
          "new_api": null,
          "old_text": "zmalloc_get_private_dirty(-1)",
          "new_text": null,
          "old_line_content": "            size_t private_dirty = zmalloc_get_private_dirty(-1);",
          "new_line_content": "        if (retval == C_OK) {",
          "content_same": false
        },
        {
          "line": 1060,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_NOTICE,\n                    \"RDB: %zu MB of memory used by copy-on-write\",\n                    private_dirty/(1024*1024))",
          "new_text": null,
          "old_line_content": "                serverLog(LL_NOTICE,",
          "new_line_content": "            if (private_dirty) {",
          "content_same": false
        },
        {
          "line": 1575,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\"Short read or OOM loading DB. Unrecoverable error, aborting now.\")",
          "new_text": null,
          "old_line_content": "    serverLog(LL_WARNING,\"Short read or OOM loading DB. Unrecoverable error, aborting now.\");",
          "new_line_content": "eoferr: /* unexpected end of file is handled here with a fatal exit */",
          "content_same": false
        },
        {
          "line": 1066,
          "old_api": "sendChildInfo",
          "new_api": null,
          "old_text": "sendChildInfo(CHILD_INFO_TYPE_RDB)",
          "new_text": null,
          "old_line_content": "            sendChildInfo(CHILD_INFO_TYPE_RDB);",
          "new_line_content": "            server.child_info_data.cow_size = private_dirty;",
          "content_same": false
        },
        {
          "line": 1068,
          "old_api": "exitFromChild",
          "new_api": null,
          "old_text": "exitFromChild((retval == C_OK) ? 0 : 1)",
          "new_text": null,
          "old_line_content": "        exitFromChild((retval == C_OK) ? 0 : 1);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1071,
          "old_api": "ustime",
          "new_api": null,
          "old_text": "ustime()",
          "new_text": null,
          "old_line_content": "        server.stat_fork_time = ustime()-start;",
          "new_line_content": "        /* Parent */",
          "content_same": false
        },
        {
          "line": 1075,
          "old_api": "closeChildInfoPipe",
          "new_api": null,
          "old_text": "closeChildInfoPipe()",
          "new_text": null,
          "old_line_content": "            closeChildInfoPipe();",
          "new_line_content": "        if (childpid == -1) {",
          "content_same": false
        },
        {
          "line": 1077,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\"Can't save in background: fork: %s\",\n                strerror(errno))",
          "new_text": null,
          "old_line_content": "            serverLog(LL_WARNING,\"Can't save in background: fork: %s\",",
          "new_line_content": "            server.lastbgsave_status = C_ERR;",
          "content_same": false
        },
        {
          "line": 1592,
          "old_api": "fopen",
          "new_api": null,
          "old_text": "fopen(filename,\"r\")",
          "new_text": null,
          "old_line_content": "    if ((fp = fopen(filename,\"r\")) == NULL) return C_ERR;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1081,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_NOTICE,\"Background saving started by pid %d\",childpid)",
          "new_text": null,
          "old_line_content": "        serverLog(LL_NOTICE,\"Background saving started by pid %d\",childpid);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1085,
          "old_api": "updateDictResizePolicy",
          "new_api": null,
          "old_text": "updateDictResizePolicy()",
          "new_text": null,
          "old_line_content": "        updateDictResizePolicy();",
          "new_line_content": "        server.rdb_child_type = RDB_CHILD_TYPE_DISK;",
          "content_same": false
        },
        {
          "line": 1605,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_NOTICE,\n            \"Background saving terminated with success\")",
          "new_text": null,
          "old_line_content": "        serverLog(LL_NOTICE,",
          "new_line_content": "    if (!bysignal && exitcode == 0) {",
          "content_same": false
        },
        {
          "line": 1094,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(tmpfile,sizeof(tmpfile),\"temp-%d.rdb\", (int) childpid)",
          "new_text": null,
          "old_line_content": "    snprintf(tmpfile,sizeof(tmpfile),\"temp-%d.rdb\", (int) childpid);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1608,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "        server.lastsave = time(NULL);",
          "new_line_content": "        server.dirty = server.dirty - server.dirty_before_bgsave;",
          "content_same": false
        },
        {
          "line": 1611,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING, \"Background saving error\")",
          "new_text": null,
          "old_line_content": "        serverLog(LL_WARNING, \"Background saving error\");",
          "new_line_content": "    } else if (!bysignal && exitcode != 0) {",
          "content_same": false
        },
        {
          "line": 1616,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\n            \"Background saving terminated by signal %d\", bysignal)",
          "new_text": null,
          "old_line_content": "        serverLog(LL_WARNING,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1618,
          "old_api": "latencyStartMonitor",
          "new_api": null,
          "old_text": "latencyStartMonitor(latency)",
          "new_text": null,
          "old_line_content": "        latencyStartMonitor(latency);",
          "new_line_content": "            \"Background saving terminated by signal %d\", bysignal);",
          "content_same": false
        },
        {
          "line": 1107,
          "old_api": "rdbLoadEncodedStringObject",
          "new_api": null,
          "old_text": "rdbLoadEncodedStringObject(rdb)",
          "new_text": null,
          "old_line_content": "        if ((o = rdbLoadEncodedStringObject(rdb)) == NULL) return NULL;",
          "new_line_content": "        /* Read string value */",
          "content_same": false
        },
        {
          "line": 1111,
          "old_api": "rdbLoadLen",
          "new_api": null,
          "old_text": "rdbLoadLen(rdb,NULL)",
          "new_text": null,
          "old_line_content": "        if ((len = rdbLoadLen(rdb,NULL)) == RDB_LENERR) return NULL;",
          "new_line_content": "        /* Read list value */",
          "content_same": false
        },
        {
          "line": 1113,
          "old_api": "createQuicklistObject",
          "new_api": null,
          "old_text": "createQuicklistObject()",
          "new_text": null,
          "old_line_content": "        o = createQuicklistObject();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1629,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "    server.rdb_save_time_last = time(NULL)-server.rdb_save_time_start;",
          "new_line_content": "    server.rdb_child_type = RDB_CHILD_TYPE_NONE;",
          "content_same": false
        },
        {
          "line": 1119,
          "old_api": "rdbLoadEncodedStringObject",
          "new_api": null,
          "old_text": "rdbLoadEncodedStringObject(rdb)",
          "new_text": null,
          "old_line_content": "            if ((ele = rdbLoadEncodedStringObject(rdb)) == NULL) return NULL;",
          "new_line_content": "        while(len--) {",
          "content_same": false
        },
        {
          "line": 1633,
          "old_api": "updateSlavesWaitingBgsave",
          "new_api": null,
          "old_text": "updateSlavesWaitingBgsave((!bysignal && exitcode == 0) ? C_OK : C_ERR, RDB_CHILD_TYPE_DISK)",
          "new_text": null,
          "old_line_content": "    updateSlavesWaitingBgsave((!bysignal && exitcode == 0) ? C_OK : C_ERR, RDB_CHILD_TYPE_DISK);",
          "new_line_content": "     * (the first stage of SYNC is a bulk transfer of dump.rdb) */",
          "content_same": false
        },
        {
          "line": 1128,
          "old_api": "rdbLoadLen",
          "new_api": null,
          "old_text": "rdbLoadLen(rdb,NULL)",
          "new_text": null,
          "old_line_content": "        if ((len = rdbLoadLen(rdb,NULL)) == RDB_LENERR) return NULL;",
          "new_line_content": "        /* Read Set value */",
          "content_same": false
        },
        {
          "line": 1643,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_NOTICE,\n            \"Background RDB transfer terminated with success\")",
          "new_text": null,
          "old_line_content": "        serverLog(LL_NOTICE,",
          "new_line_content": "    if (!bysignal && exitcode == 0) {",
          "content_same": false
        },
        {
          "line": 1132,
          "old_api": "createSetObject",
          "new_api": null,
          "old_text": "createSetObject()",
          "new_text": null,
          "old_line_content": "            o = createSetObject();",
          "new_line_content": "        if (len > server.set_max_intset_entries) {",
          "content_same": false
        },
        {
          "line": 1646,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING, \"Background transfer error\")",
          "new_text": null,
          "old_line_content": "        serverLog(LL_WARNING, \"Background transfer error\");",
          "new_line_content": "    } else if (!bysignal && exitcode != 0) {",
          "content_same": false
        },
        {
          "line": 1136,
          "old_api": "dictExpand",
          "new_api": null,
          "old_text": "dictExpand(o->ptr,len)",
          "new_text": null,
          "old_line_content": "                dictExpand(o->ptr,len);",
          "new_line_content": "            if (len > DICT_HT_INITIAL_SIZE)",
          "content_same": false
        },
        {
          "line": 1648,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\n            \"Background transfer terminated by signal %d\", bysignal)",
          "new_text": null,
          "old_line_content": "        serverLog(LL_WARNING,",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 1138,
          "old_api": "createIntsetObject",
          "new_api": null,
          "old_text": "createIntsetObject()",
          "new_text": null,
          "old_line_content": "            o = createIntsetObject();",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 1146,
          "old_api": "rdbGenericLoadStringObject",
          "new_api": null,
          "old_text": "rdbGenericLoadStringObject(rdb,RDB_LOAD_SDS,NULL)",
          "new_text": null,
          "old_line_content": "            if ((sdsele = rdbGenericLoadStringObject(rdb,RDB_LOAD_SDS,NULL))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1662,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(uint64_t))",
          "new_text": null,
          "old_line_content": "    ok_slaves = zmalloc(sizeof(uint64_t)); /* Make space for the count. */",
          "new_line_content": "     * normal code path. */",
          "content_same": false
        },
        {
          "line": 1151,
          "old_api": "isSdsRepresentableAsLongLong",
          "new_api": null,
          "old_text": "isSdsRepresentableAsLongLong(sdsele,&llval)",
          "new_text": null,
          "old_line_content": "                if (isSdsRepresentableAsLongLong(sdsele,&llval) == C_OK) {",
          "new_line_content": "                /* Fetch integer value from element. */",
          "content_same": false
        },
        {
          "line": 1154,
          "old_api": "setTypeConvert",
          "new_api": null,
          "old_text": "setTypeConvert(o,OBJ_ENCODING_HT)",
          "new_text": null,
          "old_line_content": "                    setTypeConvert(o,OBJ_ENCODING_HT);",
          "new_line_content": "                } else {",
          "content_same": false
        },
        {
          "line": 1667,
          "old_api": "read",
          "new_api": null,
          "old_text": "read(server.rdb_pipe_read_result_from_child, ok_slaves, readlen)",
          "new_text": null,
          "old_line_content": "        if (read(server.rdb_pipe_read_result_from_child, ok_slaves, readlen) ==",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1162,
          "old_api": "dictAdd",
          "new_api": null,
          "old_text": "dictAdd((dict*)o->ptr,sdsele,NULL)",
          "new_text": null,
          "old_line_content": "                dictAdd((dict*)o->ptr,sdsele,NULL);",
          "new_line_content": "            if (o->encoding == OBJ_ENCODING_HT) {",
          "content_same": false
        },
        {
          "line": 1674,
          "old_api": "zrealloc",
          "new_api": null,
          "old_text": "zrealloc(ok_slaves,sizeof(uint64_t)+readlen)",
          "new_text": null,
          "old_line_content": "            ok_slaves = zrealloc(ok_slaves,sizeof(uint64_t)+readlen);",
          "new_line_content": "             * uint64_t element in the array. */",
          "content_same": false
        },
        {
          "line": 1164,
          "old_api": "sdsfree",
          "new_api": null,
          "old_text": "sdsfree(sdsele)",
          "new_text": null,
          "old_line_content": "                sdsfree(sdsele);",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 1676,
          "old_api": "read",
          "new_api": null,
          "old_text": "read(server.rdb_pipe_read_result_from_child, ok_slaves+1,\n                     readlen)",
          "new_text": null,
          "old_line_content": "                read(server.rdb_pipe_read_result_from_child, ok_slaves+1,",
          "new_line_content": "            if (readlen &&",
          "content_same": false
        },
        {
          "line": 1684,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(server.rdb_pipe_read_result_from_child)",
          "new_text": null,
          "old_line_content": "    close(server.rdb_pipe_read_result_from_child);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1173,
          "old_api": "rdbLoadLen",
          "new_api": null,
          "old_text": "rdbLoadLen(rdb,NULL)",
          "new_text": null,
          "old_line_content": "        if ((zsetlen = rdbLoadLen(rdb,NULL)) == RDB_LENERR) return NULL;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1692,
          "old_api": "listRewind",
          "new_api": null,
          "old_text": "listRewind(server.slaves,&li)",
          "new_text": null,
          "old_line_content": "    listRewind(server.slaves,&li);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1183,
          "old_api": "rdbGenericLoadStringObject",
          "new_api": null,
          "old_text": "rdbGenericLoadStringObject(rdb,RDB_LOAD_SDS,NULL)",
          "new_text": null,
          "old_line_content": "            if ((sdsele = rdbGenericLoadStringObject(rdb,RDB_LOAD_SDS,NULL))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1187,
          "old_api": "rdbLoadBinaryDoubleValue",
          "new_api": null,
          "old_text": "rdbLoadBinaryDoubleValue(rdb,&score)",
          "new_text": null,
          "old_line_content": "                if (rdbLoadBinaryDoubleValue(rdb,&score) == -1) return NULL;",
          "new_line_content": "            if (rdbtype == RDB_TYPE_ZSET_2) {",
          "content_same": false
        },
        {
          "line": 1189,
          "old_api": "rdbLoadDoubleValue",
          "new_api": null,
          "old_text": "rdbLoadDoubleValue(rdb,&score)",
          "new_text": null,
          "old_line_content": "                if (rdbLoadDoubleValue(rdb,&score) == -1) return NULL;",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 1193,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(sdsele)",
          "new_text": null,
          "old_line_content": "            if (sdslen(sdsele) > maxelelen) maxelelen = sdslen(sdsele);",
          "new_line_content": "            /* Don't care about integer-encoded strings. */",
          "content_same": false
        },
        {
          "line": 1195,
          "old_api": "zslInsert",
          "new_api": null,
          "old_text": "zslInsert(zs->zsl,score,sdsele)",
          "new_text": null,
          "old_line_content": "            znode = zslInsert(zs->zsl,score,sdsele);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1710,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\n                \"Closing slave %s: child->slave RDB transfer failed: %s\",\n                    replicationGetSlaveName(slave),\n                    (errorcode == 0) ? \"RDB transfer child aborted\"\n                                     : strerror(errorcode))",
          "new_text": null,
          "old_line_content": "                serverLog(LL_WARNING,",
          "new_line_content": "            if (j == ok_slaves[0] || errorcode != 0) {",
          "content_same": false
        },
        {
          "line": 1200,
          "old_api": "zsetLength",
          "new_api": null,
          "old_text": "zsetLength(o)",
          "new_text": null,
          "old_line_content": "        if (zsetLength(o) <= server.zset_max_ziplist_entries &&",
          "new_line_content": "        /* Convert *after* loading, since sorted sets are not stored ordered. */",
          "content_same": false
        },
        {
          "line": 1712,
          "old_api": "replicationGetSlaveName",
          "new_api": null,
          "old_text": "replicationGetSlaveName(slave)",
          "new_text": null,
          "old_line_content": "                    replicationGetSlaveName(slave),",
          "new_line_content": "                \"Closing slave %s: child->slave RDB transfer failed: %s\",",
          "content_same": false
        },
        {
          "line": 1202,
          "old_api": "zsetConvert",
          "new_api": null,
          "old_text": "zsetConvert(o,OBJ_ENCODING_ZIPLIST)",
          "new_text": null,
          "old_line_content": "                zsetConvert(o,OBJ_ENCODING_ZIPLIST);",
          "new_line_content": "            maxelelen <= server.zset_max_ziplist_value)",
          "content_same": false
        },
        {
          "line": 1714,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errorcode)",
          "new_text": null,
          "old_line_content": "                                     : strerror(errorcode));",
          "new_line_content": "                    (errorcode == 0) ? \"RDB transfer child aborted\"",
          "content_same": false
        },
        {
          "line": 1717,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\n                \"Slave %s correctly received the streamed RDB file.\",\n                    replicationGetSlaveName(slave))",
          "new_text": null,
          "old_line_content": "                serverLog(LL_WARNING,",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 1719,
          "old_api": "replicationGetSlaveName",
          "new_api": null,
          "old_text": "replicationGetSlaveName(slave)",
          "new_text": null,
          "old_line_content": "                    replicationGetSlaveName(slave));",
          "new_line_content": "                \"Slave %s correctly received the streamed RDB file.\",",
          "content_same": false
        },
        {
          "line": 1208,
          "old_api": "rdbLoadLen",
          "new_api": null,
          "old_text": "rdbLoadLen(rdb, NULL)",
          "new_text": null,
          "old_line_content": "        len = rdbLoadLen(rdb, NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1721,
          "old_api": "anetNonBlock",
          "new_api": null,
          "old_text": "anetNonBlock(NULL,slave->fd)",
          "new_text": null,
          "old_line_content": "                anetNonBlock(NULL,slave->fd);",
          "new_line_content": "                /* Restore the socket as non-blocking. */",
          "content_same": false
        },
        {
          "line": 1211,
          "old_api": "createHashObject",
          "new_api": null,
          "old_text": "createHashObject()",
          "new_text": null,
          "old_line_content": "        o = createHashObject();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1726,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(ok_slaves)",
          "new_text": null,
          "old_line_content": "    zfree(ok_slaves);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1215,
          "old_api": "hashTypeConvert",
          "new_api": null,
          "old_text": "hashTypeConvert(o, OBJ_ENCODING_HT)",
          "new_text": null,
          "old_line_content": "            hashTypeConvert(o, OBJ_ENCODING_HT);",
          "new_line_content": "        if (len > server.hash_max_ziplist_entries)",
          "content_same": false
        },
        {
          "line": 1728,
          "old_api": "updateSlavesWaitingBgsave",
          "new_api": null,
          "old_text": "updateSlavesWaitingBgsave((!bysignal && exitcode == 0) ? C_OK : C_ERR, RDB_CHILD_TYPE_SOCKET)",
          "new_text": null,
          "old_line_content": "    updateSlavesWaitingBgsave((!bysignal && exitcode == 0) ? C_OK : C_ERR, RDB_CHILD_TYPE_SOCKET);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 707,
          "old_api": "dictGetIterator",
          "new_api": null,
          "old_text": "dictGetIterator(zs->dict)",
          "new_text": null,
          "old_line_content": "            dictIterator *di = dictGetIterator(zs->dict);",
          "new_line_content": "            zskiplist *zsl = zs->zsl;",
          "content_same": false
        },
        {
          "line": 1221,
          "old_api": "rdbGenericLoadStringObject",
          "new_api": null,
          "old_text": "rdbGenericLoadStringObject(rdb,RDB_LOAD_SDS,NULL)",
          "new_text": null,
          "old_line_content": "            if ((field = rdbGenericLoadStringObject(rdb,RDB_LOAD_SDS,NULL))",
          "new_line_content": "            /* Load raw strings */",
          "content_same": false
        },
        {
          "line": 710,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(zs->dict)",
          "new_text": null,
          "old_line_content": "            if ((n = rdbSaveLen(rdb,dictSize(zs->dict))) == -1) return -1;",
          "new_line_content": "            nwritten += n;",
          "content_same": false
        },
        {
          "line": 1223,
          "old_api": "rdbGenericLoadStringObject",
          "new_api": null,
          "old_text": "rdbGenericLoadStringObject(rdb,RDB_LOAD_SDS,NULL)",
          "new_text": null,
          "old_line_content": "            if ((value = rdbGenericLoadStringObject(rdb,RDB_LOAD_SDS,NULL))",
          "new_line_content": "                == NULL) return NULL;",
          "content_same": false
        },
        {
          "line": 1735,
          "old_api": "backgroundSaveDoneHandlerDisk",
          "new_api": null,
          "old_text": "backgroundSaveDoneHandlerDisk(exitcode,bysignal)",
          "new_text": null,
          "old_line_content": "        backgroundSaveDoneHandlerDisk(exitcode,bysignal);",
          "new_line_content": "    case RDB_CHILD_TYPE_DISK:",
          "content_same": false
        },
        {
          "line": 713,
          "old_api": "dictNext",
          "new_api": null,
          "old_text": "dictNext(di)",
          "new_text": null,
          "old_line_content": "            while((de = dictNext(di)) != NULL) {",
          "new_line_content": "            while (zn != NULL) {",
          "content_same": false
        },
        {
          "line": 714,
          "old_api": "dictGetKey",
          "new_api": null,
          "old_text": "dictGetKey(de)",
          "new_text": null,
          "old_line_content": "                sds ele = dictGetKey(de);",
          "new_line_content": "                sds ele = zn->ele;",
          "content_same": false
        },
        {
          "line": 715,
          "old_api": "dictGetVal",
          "new_api": null,
          "old_text": "dictGetVal(de)",
          "new_text": null,
          "old_line_content": "                double *score = dictGetVal(de);",
          "new_line_content": "                double *score = &zn->score;",
          "content_same": false
        },
        {
          "line": 1227,
          "old_api": "ziplistPush",
          "new_api": null,
          "old_text": "ziplistPush(o->ptr, (unsigned char*)field,\n                    sdslen(field), ZIPLIST_TAIL)",
          "new_text": null,
          "old_line_content": "            o->ptr = ziplistPush(o->ptr, (unsigned char*)field,",
          "new_line_content": "            /* Add pair to ziplist */",
          "content_same": false
        },
        {
          "line": 1738,
          "old_api": "backgroundSaveDoneHandlerSocket",
          "new_api": null,
          "old_text": "backgroundSaveDoneHandlerSocket(exitcode,bysignal)",
          "new_text": null,
          "old_line_content": "        backgroundSaveDoneHandlerSocket(exitcode,bysignal);",
          "new_line_content": "    case RDB_CHILD_TYPE_SOCKET:",
          "content_same": false
        },
        {
          "line": 1741,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Unknown RDB child type.\")",
          "new_text": null,
          "old_line_content": "        serverPanic(\"Unknown RDB child type.\");",
          "new_line_content": "    default:",
          "content_same": false
        },
        {
          "line": 1233,
          "old_api": "sdslen",
          "new_api": null,
          "old_text": "sdslen(field)",
          "new_text": null,
          "old_line_content": "            if (sdslen(field) > server.hash_max_ziplist_value ||",
          "new_line_content": "            /* Convert to hash table if size threshold is exceeded */",
          "content_same": false
        },
        {
          "line": 723,
          "old_api": "dictReleaseIterator",
          "new_api": null,
          "old_text": "dictReleaseIterator(di)",
          "new_text": null,
          "old_line_content": "            dictReleaseIterator(di);",
          "new_line_content": "                zn = zn->backward;",
          "content_same": false
        },
        {
          "line": 1236,
          "old_api": "sdsfree",
          "new_api": null,
          "old_text": "sdsfree(field)",
          "new_text": null,
          "old_line_content": "                sdsfree(field);",
          "new_line_content": "            {",
          "content_same": false
        },
        {
          "line": 725,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Unknown sorted set encoding\")",
          "new_text": null,
          "old_line_content": "            serverPanic(\"Unknown sorted set encoding\");",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 1241,
          "old_api": "sdsfree",
          "new_api": null,
          "old_text": "sdsfree(field)",
          "new_text": null,
          "old_line_content": "            sdsfree(field);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 730,
          "old_api": "ziplistBlobLen",
          "new_api": null,
          "old_text": "ziplistBlobLen((unsigned char*)o->ptr)",
          "new_text": null,
          "old_line_content": "            size_t l = ziplistBlobLen((unsigned char*)o->ptr);",
          "new_line_content": "        if (o->encoding == OBJ_ENCODING_ZIPLIST) {",
          "content_same": false
        },
        {
          "line": 732,
          "old_api": "rdbSaveRawString",
          "new_api": null,
          "old_text": "rdbSaveRawString(rdb,o->ptr,l)",
          "new_text": null,
          "old_line_content": "            if ((n = rdbSaveRawString(rdb,o->ptr,l)) == -1) return -1;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 736,
          "old_api": "dictGetIterator",
          "new_api": null,
          "old_text": "dictGetIterator(o->ptr)",
          "new_text": null,
          "old_line_content": "            dictIterator *di = dictGetIterator(o->ptr);",
          "new_line_content": "        } else if (o->encoding == OBJ_ENCODING_HT) {",
          "content_same": false
        },
        {
          "line": 1249,
          "old_api": "rdbGenericLoadStringObject",
          "new_api": null,
          "old_text": "rdbGenericLoadStringObject(rdb,RDB_LOAD_SDS,NULL)",
          "new_text": null,
          "old_line_content": "            if ((field = rdbGenericLoadStringObject(rdb,RDB_LOAD_SDS,NULL))",
          "new_line_content": "            /* Load encoded strings */",
          "content_same": false
        },
        {
          "line": 739,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize((dict*)o->ptr)",
          "new_text": null,
          "old_line_content": "            if ((n = rdbSaveLen(rdb,dictSize((dict*)o->ptr))) == -1) return -1;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1251,
          "old_api": "rdbGenericLoadStringObject",
          "new_api": null,
          "old_text": "rdbGenericLoadStringObject(rdb,RDB_LOAD_SDS,NULL)",
          "new_text": null,
          "old_line_content": "            if ((value = rdbGenericLoadStringObject(rdb,RDB_LOAD_SDS,NULL))",
          "new_line_content": "                == NULL) return NULL;",
          "content_same": false
        },
        {
          "line": 1763,
          "old_api": "pipe",
          "new_api": null,
          "old_text": "pipe(pipefds)",
          "new_text": null,
          "old_line_content": "    if (pipe(pipefds) == -1) return C_ERR;",
          "new_line_content": "     * received all the writes. */",
          "content_same": false
        },
        {
          "line": 742,
          "old_api": "dictNext",
          "new_api": null,
          "old_text": "dictNext(di)",
          "new_text": null,
          "old_line_content": "            while((de = dictNext(di)) != NULL) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1255,
          "old_api": "dictAdd",
          "new_api": null,
          "old_text": "dictAdd((dict*)o->ptr, field, value)",
          "new_text": null,
          "old_line_content": "            ret = dictAdd((dict*)o->ptr, field, value);",
          "new_line_content": "            /* Add pair to hash table */",
          "content_same": false
        },
        {
          "line": 1257,
          "old_api": "rdbExitReportCorruptRDB",
          "new_api": null,
          "old_text": "rdbExitReportCorruptRDB(\"Duplicate keys detected\")",
          "new_text": null,
          "old_line_content": "                rdbExitReportCorruptRDB(\"Duplicate keys detected\");",
          "new_line_content": "            if (ret == DICT_ERR) {",
          "content_same": false
        },
        {
          "line": 746,
          "old_api": "rdbSaveRawString",
          "new_api": null,
          "old_text": "rdbSaveRawString(rdb,(unsigned char*)field,\n                        sdslen(field))",
          "new_text": null,
          "old_line_content": "                if ((n = rdbSaveRawString(rdb,(unsigned char*)field,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1769,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.slaves)",
          "new_text": null,
          "old_line_content": "    fds = zmalloc(sizeof(int)*listLength(server.slaves));",
          "new_line_content": "     * the RDB to, which are i WAIT_BGSAVE_START state. */",
          "content_same": false
        },
        {
          "line": 749,
          "old_api": "rdbSaveRawString",
          "new_api": null,
          "old_text": "rdbSaveRawString(rdb,(unsigned char*)value,\n                        sdslen(value))",
          "new_text": null,
          "old_line_content": "                if ((n = rdbSaveRawString(rdb,(unsigned char*)value,",
          "new_line_content": "                nwritten += n;",
          "content_same": false
        },
        {
          "line": 1262,
          "old_api": "serverAssert",
          "new_api": null,
          "old_text": "serverAssert(len == 0)",
          "new_text": null,
          "old_line_content": "        serverAssert(len == 0);",
          "new_line_content": "        /* All pairs should be read by now */",
          "content_same": false
        },
        {
          "line": 1773,
          "old_api": "listLength",
          "new_api": null,
          "old_text": "listLength(server.slaves)",
          "new_text": null,
          "old_line_content": "    clientids = zmalloc(sizeof(uint64_t)*listLength(server.slaves));",
          "new_line_content": "     * (sent via unix pipe) that will be sent to the parent. */",
          "content_same": false
        },
        {
          "line": 1264,
          "old_api": "rdbLoadLen",
          "new_api": null,
          "old_text": "rdbLoadLen(rdb,NULL)",
          "new_text": null,
          "old_line_content": "        if ((len = rdbLoadLen(rdb,NULL)) == RDB_LENERR) return NULL;",
          "new_line_content": "    } else if (rdbtype == RDB_TYPE_LIST_QUICKLIST) {",
          "content_same": false
        },
        {
          "line": 753,
          "old_api": "dictReleaseIterator",
          "new_api": null,
          "old_text": "dictReleaseIterator(di)",
          "new_text": null,
          "old_line_content": "            dictReleaseIterator(di);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1776,
          "old_api": "listRewind",
          "new_api": null,
          "old_text": "listRewind(server.slaves,&li)",
          "new_text": null,
          "old_line_content": "    listRewind(server.slaves,&li);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 755,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Unknown hash encoding\")",
          "new_text": null,
          "old_line_content": "            serverPanic(\"Unknown hash encoding\");",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 1271,
          "old_api": "rdbGenericLoadStringObject",
          "new_api": null,
          "old_text": "rdbGenericLoadStringObject(rdb,RDB_LOAD_PLAIN,NULL)",
          "new_text": null,
          "old_line_content": "                rdbGenericLoadStringObject(rdb,RDB_LOAD_PLAIN,NULL);",
          "new_line_content": "            unsigned char *zl =",
          "content_same": false
        },
        {
          "line": 1783,
          "old_api": "getPsyncInitialOffset",
          "new_api": null,
          "old_text": "getPsyncInitialOffset()",
          "new_text": null,
          "old_line_content": "            replicationSetupSlaveForFullResync(slave,getPsyncInitialOffset());",
          "new_line_content": "            fds[numfds++] = slave->fd;",
          "content_same": false
        },
        {
          "line": 1273,
          "old_api": "quicklistAppendZiplist",
          "new_api": null,
          "old_text": "quicklistAppendZiplist(o->ptr, zl)",
          "new_text": null,
          "old_line_content": "            quicklistAppendZiplist(o->ptr, zl);",
          "new_line_content": "            if (zl == NULL) return NULL;",
          "content_same": false
        },
        {
          "line": 763,
          "old_api": "moduleInitIOContext",
          "new_api": null,
          "old_text": "moduleInitIOContext(io,mt,rdb)",
          "new_text": null,
          "old_line_content": "        moduleInitIOContext(io,mt,rdb);",
          "new_line_content": "        moduleType *mt = mv->type;",
          "content_same": false
        },
        {
          "line": 1787,
          "old_api": "anetBlock",
          "new_api": null,
          "old_text": "anetBlock(NULL,slave->fd)",
          "new_text": null,
          "old_line_content": "            anetBlock(NULL,slave->fd);",
          "new_line_content": "             * will share the O_NONBLOCK attribute with the parent). */",
          "content_same": false
        },
        {
          "line": 767,
          "old_api": "rdbSaveLen",
          "new_api": null,
          "old_text": "rdbSaveLen(rdb,mt->id)",
          "new_text": null,
          "old_line_content": "        int retval = rdbSaveLen(rdb,mt->id);",
          "new_line_content": "         * to call the right module during loading. */",
          "content_same": false
        },
        {
          "line": 1793,
          "old_api": "openChildInfoPipe",
          "new_api": null,
          "old_text": "openChildInfoPipe()",
          "new_text": null,
          "old_line_content": "    openChildInfoPipe();",
          "new_line_content": "    /* Create the child process. */",
          "content_same": false
        },
        {
          "line": 1282,
          "old_api": "rdbGenericLoadStringObject",
          "new_api": null,
          "old_text": "rdbGenericLoadStringObject(rdb,RDB_LOAD_PLAIN,NULL)",
          "new_text": null,
          "old_line_content": "            rdbGenericLoadStringObject(rdb,RDB_LOAD_PLAIN,NULL);",
          "new_line_content": "        unsigned char *encoded =",
          "content_same": false
        },
        {
          "line": 772,
          "old_api": "rdb_save",
          "new_api": null,
          "old_text": "mt->rdb_save(&io,mv->value)",
          "new_text": null,
          "old_line_content": "        mt->rdb_save(&io,mv->value);",
          "new_line_content": "        /* Then write the module-specific representation. */",
          "content_same": false
        },
        {
          "line": 1284,
          "old_api": "createObject",
          "new_api": null,
          "old_text": "createObject(OBJ_STRING,encoded)",
          "new_text": null,
          "old_line_content": "        o = createObject(OBJ_STRING,encoded); /* Obj type fixed below. */",
          "new_line_content": "        if (encoded == NULL) return NULL;",
          "content_same": false
        },
        {
          "line": 774,
          "old_api": "moduleFreeContext",
          "new_api": null,
          "old_text": "moduleFreeContext(io.ctx)",
          "new_text": null,
          "old_line_content": "            moduleFreeContext(io.ctx);",
          "new_line_content": "        if (io.ctx) {",
          "content_same": false
        },
        {
          "line": 1800,
          "old_api": "rioInitWithFdset",
          "new_api": null,
          "old_text": "rioInitWithFdset(&slave_sockets,fds,numfds)",
          "new_text": null,
          "old_line_content": "        rioInitWithFdset(&slave_sockets,fds,numfds);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 779,
          "old_api": "serverPanic",
          "new_api": null,
          "old_text": "serverPanic(\"Unknown object type\")",
          "new_text": null,
          "old_line_content": "        serverPanic(\"Unknown object type\");",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 1803,
          "old_api": "closeListeningSockets",
          "new_api": null,
          "old_text": "closeListeningSockets(0)",
          "new_text": null,
          "old_line_content": "        closeListeningSockets(0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1806,
          "old_api": "rdbSaveRioWithEOFMark",
          "new_api": null,
          "old_text": "rdbSaveRioWithEOFMark(&slave_sockets,NULL,rsi)",
          "new_text": null,
          "old_line_content": "        retval = rdbSaveRioWithEOFMark(&slave_sockets,NULL,rsi);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1297,
          "old_api": "ziplistNew",
          "new_api": null,
          "old_text": "ziplistNew()",
          "new_text": null,
          "old_line_content": "                    unsigned char *zl = ziplistNew();",
          "new_line_content": "                {",
          "content_same": false
        },
        {
          "line": 1811,
          "old_api": "zmalloc_get_private_dirty",
          "new_api": null,
          "old_text": "zmalloc_get_private_dirty(-1)",
          "new_text": null,
          "old_line_content": "            size_t private_dirty = zmalloc_get_private_dirty(-1);",
          "new_line_content": "        if (retval == C_OK) {",
          "content_same": false
        },
        {
          "line": 789,
          "old_api": "rdbSaveObject",
          "new_api": null,
          "old_text": "rdbSaveObject(NULL,o)",
          "new_text": null,
          "old_line_content": "    ssize_t len = rdbSaveObject(NULL,o);",
          "new_line_content": "size_t rdbSavedObjectLen(robj *o) {",
          "content_same": false
        },
        {
          "line": 1814,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_NOTICE,\n                    \"RDB: %zu MB of memory used by copy-on-write\",\n                    private_dirty/(1024*1024))",
          "new_text": null,
          "old_line_content": "                serverLog(LL_NOTICE,",
          "new_line_content": "            if (private_dirty) {",
          "content_same": false
        },
        {
          "line": 1303,
          "old_api": "zipmapNext",
          "new_api": null,
          "old_text": "zipmapNext(zi, &fstr, &flen, &vstr, &vlen)",
          "new_text": null,
          "old_line_content": "                    while ((zi = zipmapNext(zi, &fstr, &flen, &vstr, &vlen)) != NULL) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1306,
          "old_api": "ziplistPush",
          "new_api": null,
          "old_text": "ziplistPush(zl, fstr, flen, ZIPLIST_TAIL)",
          "new_text": null,
          "old_line_content": "                        zl = ziplistPush(zl, fstr, flen, ZIPLIST_TAIL);",
          "new_line_content": "                        if (vlen > maxlen) maxlen = vlen;",
          "content_same": false
        },
        {
          "line": 1820,
          "old_api": "sendChildInfo",
          "new_api": null,
          "old_text": "sendChildInfo(CHILD_INFO_TYPE_RDB)",
          "new_text": null,
          "old_line_content": "            sendChildInfo(CHILD_INFO_TYPE_RDB);",
          "new_line_content": "            server.child_info_data.cow_size = private_dirty;",
          "content_same": false
        },
        {
          "line": 1310,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(o->ptr)",
          "new_text": null,
          "old_line_content": "                    zfree(o->ptr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1315,
          "old_api": "hashTypeLength",
          "new_api": null,
          "old_text": "hashTypeLength(o)",
          "new_text": null,
          "old_line_content": "                    if (hashTypeLength(o) > server.hash_max_ziplist_entries ||",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 805,
          "old_api": "rdbSaveType",
          "new_api": null,
          "old_text": "rdbSaveType(rdb,RDB_OPCODE_EXPIRETIME_MS)",
          "new_text": null,
          "old_line_content": "        if (rdbSaveType(rdb,RDB_OPCODE_EXPIRETIME_MS) == -1) return -1;",
          "new_line_content": "        if (expiretime < now) return 0;",
          "content_same": false
        },
        {
          "line": 1318,
          "old_api": "hashTypeConvert",
          "new_api": null,
          "old_text": "hashTypeConvert(o, OBJ_ENCODING_HT)",
          "new_text": null,
          "old_line_content": "                        hashTypeConvert(o, OBJ_ENCODING_HT);",
          "new_line_content": "                    {",
          "content_same": false
        },
        {
          "line": 810,
          "old_api": "rdbSaveObjectType",
          "new_api": null,
          "old_text": "rdbSaveObjectType(rdb,val)",
          "new_text": null,
          "old_line_content": "    if (rdbSaveObjectType(rdb,val) == -1) return -1;",
          "new_line_content": "    /* Save type, key, value */",
          "content_same": false
        },
        {
          "line": 1325,
          "old_api": "listTypeConvert",
          "new_api": null,
          "old_text": "listTypeConvert(o,OBJ_ENCODING_QUICKLIST)",
          "new_text": null,
          "old_line_content": "                listTypeConvert(o,OBJ_ENCODING_QUICKLIST);",
          "new_line_content": "                o->encoding = OBJ_ENCODING_ZIPLIST;",
          "content_same": false
        },
        {
          "line": 1837,
          "old_api": "zmalloc",
          "new_api": null,
          "old_text": "zmalloc(sizeof(uint64_t)*(1+2*numfds))",
          "new_text": null,
          "old_line_content": "            void *msg = zmalloc(sizeof(uint64_t)*(1+2*numfds));",
          "new_line_content": "             * or the error code if an error occurred. */",
          "content_same": false
        },
        {
          "line": 818,
          "old_api": "rdbSaveType",
          "new_api": null,
          "old_text": "rdbSaveType(rdb,RDB_OPCODE_AUX)",
          "new_text": null,
          "old_line_content": "    if (rdbSaveType(rdb,RDB_OPCODE_AUX) == -1) return -1;",
          "new_line_content": "int rdbSaveAuxField(rio *rdb, void *key, size_t keylen, void *val, size_t vallen) {",
          "content_same": false
        },
        {
          "line": 1330,
          "old_api": "intsetLen",
          "new_api": null,
          "old_text": "intsetLen(o->ptr)",
          "new_text": null,
          "old_line_content": "                if (intsetLen(o->ptr) > server.set_max_intset_entries)",
          "new_line_content": "                o->encoding = OBJ_ENCODING_INTSET;",
          "content_same": false
        },
        {
          "line": 1336,
          "old_api": "zsetLength",
          "new_api": null,
          "old_text": "zsetLength(o)",
          "new_text": null,
          "old_line_content": "                if (zsetLength(o) > server.zset_max_ziplist_entries)",
          "new_line_content": "                o->encoding = OBJ_ENCODING_ZIPLIST;",
          "content_same": false
        },
        {
          "line": 827,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(val)",
          "new_text": null,
          "old_line_content": "    return rdbSaveAuxField(rdb,key,strlen(key),val,strlen(val));",
          "new_line_content": "int rdbSaveAuxFieldStrStr(rio *rdb, char *key, char *val) {",
          "content_same": false
        },
        {
          "line": 1342,
          "old_api": "hashTypeLength",
          "new_api": null,
          "old_text": "hashTypeLength(o)",
          "new_text": null,
          "old_line_content": "                if (hashTypeLength(o) > server.hash_max_ziplist_entries)",
          "new_line_content": "                o->encoding = OBJ_ENCODING_ZIPLIST;",
          "content_same": false
        },
        {
          "line": 1854,
          "old_api": "write",
          "new_api": null,
          "old_text": "write(server.rdb_pipe_write_result_to_parent,msg,msglen)",
          "new_text": null,
          "old_line_content": "                write(server.rdb_pipe_write_result_to_parent,msg,msglen)",
          "new_line_content": "            if (*len == 0 ||",
          "content_same": false
        },
        {
          "line": 833,
          "old_api": "ll2string",
          "new_api": null,
          "old_text": "ll2string(buf,sizeof(buf),val)",
          "new_text": null,
          "old_line_content": "    int vlen = ll2string(buf,sizeof(buf),val);",
          "new_line_content": "    char buf[LONG_STR_SIZE];",
          "content_same": false
        },
        {
          "line": 1346,
          "old_api": "rdbExitReportCorruptRDB",
          "new_api": null,
          "old_text": "rdbExitReportCorruptRDB(\"Unknown RDB encoding type %d\",rdbtype)",
          "new_text": null,
          "old_line_content": "                rdbExitReportCorruptRDB(\"Unknown RDB encoding type %d\",rdbtype);",
          "new_line_content": "            default:",
          "content_same": false
        },
        {
          "line": 1859,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(msg)",
          "new_text": null,
          "old_line_content": "            zfree(msg);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1861,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(clientids)",
          "new_text": null,
          "old_line_content": "        zfree(clientids);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1350,
          "old_api": "rdbLoadLen",
          "new_api": null,
          "old_text": "rdbLoadLen(rdb,NULL)",
          "new_text": null,
          "old_line_content": "        uint64_t moduleid = rdbLoadLen(rdb,NULL);",
          "new_line_content": "    } else if (rdbtype == RDB_TYPE_MODULE) {",
          "content_same": false
        },
        {
          "line": 1866,
          "old_api": "ustime",
          "new_api": null,
          "old_text": "ustime()",
          "new_text": null,
          "old_line_content": "        server.stat_fork_time = ustime()-start;",
          "new_line_content": "        /* Parent */",
          "content_same": false
        },
        {
          "line": 843,
          "old_api": "rdbSaveAuxFieldStrStr",
          "new_api": null,
          "old_text": "rdbSaveAuxFieldStrStr(rdb,\"redis-ver\",REDIS_VERSION)",
          "new_text": null,
          "old_line_content": "    if (rdbSaveAuxFieldStrStr(rdb,\"redis-ver\",REDIS_VERSION) == -1) return -1;",
          "new_line_content": "    /* Add a few fields about the state when the RDB was created. */",
          "content_same": false
        },
        {
          "line": 1355,
          "old_api": "moduleTypeNameByID",
          "new_api": null,
          "old_text": "moduleTypeNameByID(name,moduleid)",
          "new_text": null,
          "old_line_content": "            moduleTypeNameByID(name,moduleid);",
          "new_line_content": "        if (mt == NULL) {",
          "content_same": false
        },
        {
          "line": 1870,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\"Can't save in background: fork: %s\",\n                strerror(errno))",
          "new_text": null,
          "old_line_content": "            serverLog(LL_WARNING,\"Can't save in background: fork: %s\",",
          "new_line_content": "        if (childpid == -1) {",
          "content_same": false
        },
        {
          "line": 1360,
          "old_api": "moduleInitIOContext",
          "new_api": null,
          "old_text": "moduleInitIOContext(io,mt,rdb)",
          "new_text": null,
          "old_line_content": "        moduleInitIOContext(io,mt,rdb);",
          "new_line_content": "        RedisModuleIO io;",
          "content_same": false
        },
        {
          "line": 851,
          "old_api": "rdbSaveAuxFieldStrInt",
          "new_api": null,
          "old_text": "rdbSaveAuxFieldStrInt(rdb,\"repl-stream-db\",rsi->repl_stream_db)",
          "new_text": null,
          "old_line_content": "            rdbSaveAuxFieldStrInt(rdb,\"repl-stream-db\",rsi->repl_stream_db)",
          "new_line_content": "        if (rsi->repl_stream_db &&",
          "content_same": false
        },
        {
          "line": 1363,
          "old_api": "rdb_load",
          "new_api": null,
          "old_text": "mt->rdb_load(&io,moduleid&1023)",
          "new_text": null,
          "old_line_content": "        void *ptr = mt->rdb_load(&io,moduleid&1023);",
          "new_line_content": "         * encoding version in the lower 10 bits of the module ID. */",
          "content_same": false
        },
        {
          "line": 1365,
          "old_api": "moduleTypeNameByID",
          "new_api": null,
          "old_text": "moduleTypeNameByID(name,moduleid)",
          "new_text": null,
          "old_line_content": "            moduleTypeNameByID(name,moduleid);",
          "new_line_content": "        if (ptr == NULL) {",
          "content_same": false
        },
        {
          "line": 1876,
          "old_api": "listRewind",
          "new_api": null,
          "old_text": "listRewind(server.slaves,&li)",
          "new_text": null,
          "old_line_content": "            listRewind(server.slaves,&li);",
          "new_line_content": "             * replicationSetupSlaveForFullResync() turned it into BGSAVE_END */",
          "content_same": false
        },
        {
          "line": 857,
          "old_api": "rdbSaveAuxFieldStrInt",
          "new_api": null,
          "old_text": "rdbSaveAuxFieldStrInt(rdb,\"aof-preamble\",aof_preamble)",
          "new_text": null,
          "old_line_content": "    if (rdbSaveAuxFieldStrInt(rdb,\"aof-preamble\",aof_preamble) == -1) return -1;",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1369,
          "old_api": "createModuleObject",
          "new_api": null,
          "old_text": "createModuleObject(mt,ptr)",
          "new_text": null,
          "old_line_content": "        o = createModuleObject(mt,ptr);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1371,
          "old_api": "rdbExitReportCorruptRDB",
          "new_api": null,
          "old_text": "rdbExitReportCorruptRDB(\"Unknown RDB encoding type %d\",rdbtype)",
          "new_text": null,
          "old_line_content": "        rdbExitReportCorruptRDB(\"Unknown RDB encoding type %d\",rdbtype);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 1888,
          "old_api": "close",
          "new_api": null,
          "old_text": "close(pipefds[0])",
          "new_text": null,
          "old_line_content": "            close(pipefds[0]);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1892,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_NOTICE,\"Background RDB transfer started by pid %d\",\n                childpid)",
          "new_text": null,
          "old_line_content": "            serverLog(LL_NOTICE,\"Background RDB transfer started by pid %d\",",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 1894,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "            server.rdb_save_time_start = time(NULL);",
          "new_line_content": "                childpid);",
          "content_same": false
        },
        {
          "line": 1383,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "    server.loading_start_time = time(NULL);",
          "new_line_content": "    server.loading = 1;",
          "content_same": false
        },
        {
          "line": 1385,
          "old_api": "fileno",
          "new_api": null,
          "old_text": "fileno(fp)",
          "new_text": null,
          "old_line_content": "    if (fstat(fileno(fp), &sb) == -1) {",
          "new_line_content": "    server.loading_loaded_bytes = 0;",
          "content_same": false
        },
        {
          "line": 1897,
          "old_api": "updateDictResizePolicy",
          "new_api": null,
          "old_text": "updateDictResizePolicy()",
          "new_text": null,
          "old_line_content": "            updateDictResizePolicy();",
          "new_line_content": "            server.rdb_child_type = RDB_CHILD_TYPE_SOCKET;",
          "content_same": false
        },
        {
          "line": 1899,
          "old_api": "zfree",
          "new_api": null,
          "old_text": "zfree(clientids)",
          "new_text": null,
          "old_line_content": "        zfree(clientids);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 876,
          "old_api": "mstime",
          "new_api": null,
          "old_text": "mstime()",
          "new_text": null,
          "old_line_content": "    long long now = mstime();",
          "new_line_content": "    int j;",
          "content_same": false
        },
        {
          "line": 882,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(magic,sizeof(magic),\"REDIS%04d\",RDB_VERSION)",
          "new_text": null,
          "old_line_content": "    snprintf(magic,sizeof(magic),\"REDIS%04d\",RDB_VERSION);",
          "new_line_content": "        rdb->update_cksum = rioGenericUpdateChecksum;",
          "content_same": false
        },
        {
          "line": 1395,
          "old_api": "zmalloc_used_memory",
          "new_api": null,
          "old_text": "zmalloc_used_memory()",
          "new_text": null,
          "old_line_content": "    if (server.stat_peak_memory < zmalloc_used_memory())",
          "new_line_content": "    server.loading_loaded_bytes = pos;",
          "content_same": false
        },
        {
          "line": 1908,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\"Background save already in progress\")",
          "new_text": null,
          "old_line_content": "        addReplyError(c,\"Background save already in progress\");",
          "new_line_content": "    if (server.rdb_child_pid != -1) {",
          "content_same": false
        },
        {
          "line": 1911,
          "old_api": "rdbSave",
          "new_api": null,
          "old_text": "rdbSave(server.rdb_filename,NULL)",
          "new_text": null,
          "old_line_content": "    if (rdbSave(server.rdb_filename,NULL) == C_OK) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 889,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(d)",
          "new_text": null,
          "old_line_content": "        if (dictSize(d) == 0) continue;",
          "new_line_content": "        dict *d = db->dict;",
          "content_same": false
        },
        {
          "line": 1914,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.err)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.err);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 894,
          "old_api": "rdbSaveType",
          "new_api": null,
          "old_text": "rdbSaveType(rdb,RDB_OPCODE_SELECTDB)",
          "new_text": null,
          "old_line_content": "        if (rdbSaveType(rdb,RDB_OPCODE_SELECTDB) == -1) goto werr;",
          "new_line_content": "        /* Write the SELECT DB opcode */",
          "content_same": false
        },
        {
          "line": 1408,
          "old_api": "rioGenericUpdateChecksum",
          "new_api": null,
          "old_text": "rioGenericUpdateChecksum(r, buf, len)",
          "new_text": null,
          "old_line_content": "        rioGenericUpdateChecksum(r, buf, len);",
          "new_line_content": "    if (server.rdb_checksum)",
          "content_same": false
        },
        {
          "line": 1925,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(c->argv[1]->ptr,\"schedule\")",
          "new_text": null,
          "old_line_content": "        if (c->argc == 2 && !strcasecmp(c->argv[1]->ptr,\"schedule\")) {",
          "new_line_content": "    if (c->argc > 1) {",
          "content_same": false
        },
        {
          "line": 902,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(db->dict)",
          "new_text": null,
          "old_line_content": "        db_size = (dictSize(db->dict) <= UINT32_MAX) ?",
          "new_line_content": "        uint32_t db_size, expires_size;",
          "content_same": false
        },
        {
          "line": 1415,
          "old_api": "updateCachedTime",
          "new_api": null,
          "old_text": "updateCachedTime()",
          "new_text": null,
          "old_line_content": "        updateCachedTime();",
          "new_line_content": "         * interaction time with clients and for other important things. */",
          "content_same": false
        },
        {
          "line": 1928,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.syntaxerr)",
          "new_text": null,
          "old_line_content": "            addReply(c,shared.syntaxerr);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 905,
          "old_api": "dictSize",
          "new_api": null,
          "old_text": "dictSize(db->expires)",
          "new_text": null,
          "old_line_content": "        expires_size = (dictSize(db->expires) <= UINT32_MAX) ?",
          "new_line_content": "                                UINT32_MAX;",
          "content_same": false
        },
        {
          "line": 1417,
          "old_api": "replicationSendNewlineToMaster",
          "new_api": null,
          "old_text": "replicationSendNewlineToMaster()",
          "new_text": null,
          "old_line_content": "            replicationSendNewlineToMaster();",
          "new_line_content": "        if (server.masterhost && server.repl_state == REPL_STATE_TRANSFER)",
          "content_same": false
        },
        {
          "line": 908,
          "old_api": "rdbSaveType",
          "new_api": null,
          "old_text": "rdbSaveType(rdb,RDB_OPCODE_RESIZEDB)",
          "new_text": null,
          "old_line_content": "        if (rdbSaveType(rdb,RDB_OPCODE_RESIZEDB) == -1) goto werr;",
          "new_line_content": "                                UINT32_MAX;",
          "content_same": false
        },
        {
          "line": 1934,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\"Background save already in progress\")",
          "new_text": null,
          "old_line_content": "        addReplyError(c,\"Background save already in progress\");",
          "new_line_content": "    if (server.rdb_child_pid != -1) {",
          "content_same": false
        },
        {
          "line": 913,
          "old_api": "dictNext",
          "new_api": null,
          "old_text": "dictNext(di)",
          "new_text": null,
          "old_line_content": "        while((de = dictNext(di)) != NULL) {",
          "new_line_content": "        /* Iterate this DB writing every entry */",
          "content_same": false
        },
        {
          "line": 1938,
          "old_api": "addReplyStatus",
          "new_api": null,
          "old_text": "addReplyStatus(c,\"Background saving scheduled\")",
          "new_text": null,
          "old_line_content": "            addReplyStatus(c,\"Background saving scheduled\");",
          "new_line_content": "            server.rdb_bgsave_scheduled = 1;",
          "content_same": false
        },
        {
          "line": 1940,
          "old_api": "addReplyError",
          "new_api": null,
          "old_text": "addReplyError(c,\n                \"An AOF log rewriting in progress: can't BGSAVE right now. \"\n                \"Use BGSAVE SCHEDULE in order to schedule a BGSAVE whenever \"\n                \"possible.\")",
          "new_text": null,
          "old_line_content": "            addReplyError(c,",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 918,
          "old_api": "initStaticStringObject",
          "new_api": null,
          "old_text": "initStaticStringObject(key,keystr)",
          "new_text": null,
          "old_line_content": "            initStaticStringObject(key,keystr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1430,
          "old_api": "mstime",
          "new_api": null,
          "old_text": "mstime()",
          "new_text": null,
          "old_line_content": "    long long expiretime, now = mstime();",
          "new_line_content": "    char buf[1024];",
          "content_same": false
        },
        {
          "line": 1945,
          "old_api": "rdbSaveBackground",
          "new_api": null,
          "old_text": "rdbSaveBackground(server.rdb_filename,NULL)",
          "new_text": null,
          "old_line_content": "    } else if (rdbSaveBackground(server.rdb_filename,NULL) == C_OK) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1434,
          "old_api": "rioRead",
          "new_api": null,
          "old_text": "rioRead(rdb,buf,9)",
          "new_text": null,
          "old_line_content": "    if (rioRead(rdb,buf,9) == 0) goto eoferr;",
          "new_line_content": "    rdb->max_processing_chunk = server.loading_process_events_interval_bytes;",
          "content_same": false
        },
        {
          "line": 1436,
          "old_api": "memcmp",
          "new_api": null,
          "old_text": "memcmp(buf,\"REDIS\",5)",
          "new_text": null,
          "old_line_content": "    if (memcmp(buf,\"REDIS\",5) != 0) {",
          "new_line_content": "    buf[9] = '\\0';",
          "content_same": false
        },
        {
          "line": 1948,
          "old_api": "addReply",
          "new_api": null,
          "old_text": "addReply(c,shared.err)",
          "new_text": null,
          "old_line_content": "        addReply(c,shared.err);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 929,
          "old_api": "aofReadDiffFromParent",
          "new_api": null,
          "old_text": "aofReadDiffFromParent()",
          "new_text": null,
          "old_line_content": "                aofReadDiffFromParent();",
          "new_line_content": "                processed = rdb->processed_bytes;",
          "content_same": false
        },
        {
          "line": 1441,
          "old_api": "atoi",
          "new_api": null,
          "old_text": "atoi(buf+5)",
          "new_text": null,
          "old_line_content": "    rdbver = atoi(buf+5);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1443,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\"Can't handle RDB format version %d\",rdbver)",
          "new_text": null,
          "old_line_content": "        serverLog(LL_WARNING,\"Can't handle RDB format version %d\",rdbver);",
          "new_line_content": "    if (rdbver < 1 || rdbver > RDB_VERSION) {",
          "content_same": false
        },
        {
          "line": 932,
          "old_api": "dictReleaseIterator",
          "new_api": null,
          "old_text": "dictReleaseIterator(di)",
          "new_text": null,
          "old_line_content": "        dictReleaseIterator(di);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 937,
          "old_api": "rdbSaveType",
          "new_api": null,
          "old_text": "rdbSaveType(rdb,RDB_OPCODE_EOF)",
          "new_text": null,
          "old_line_content": "    if (rdbSaveType(rdb,RDB_OPCODE_EOF) == -1) goto werr;",
          "new_line_content": "    /* EOF opcode */",
          "content_same": false
        },
        {
          "line": 1453,
          "old_api": "rdbLoadType",
          "new_api": null,
          "old_text": "rdbLoadType(rdb)",
          "new_text": null,
          "old_line_content": "        if ((type = rdbLoadType(rdb)) == -1) goto eoferr;",
          "new_line_content": "        /* Read type. */",
          "content_same": false
        },
        {
          "line": 942,
          "old_api": "memrev64ifbe",
          "new_api": null,
          "old_text": "memrev64ifbe(&cksum)",
          "new_text": null,
          "old_line_content": "    memrev64ifbe(&cksum);",
          "new_line_content": "    cksum = rdb->cksum;",
          "content_same": false
        },
        {
          "line": 948,
          "old_api": "dictReleaseIterator",
          "new_api": null,
          "old_text": "dictReleaseIterator(di)",
          "new_text": null,
          "old_line_content": "    if (di) dictReleaseIterator(di);",
          "new_line_content": "    if (error) *error = errno;",
          "content_same": false
        },
        {
          "line": 1460,
          "old_api": "rdbLoadTime",
          "new_api": null,
          "old_text": "rdbLoadTime(rdb)",
          "new_text": null,
          "old_line_content": "            if ((expiretime = rdbLoadTime(rdb)) == -1) goto eoferr;",
          "new_line_content": "             * load the actual type, and continue. */",
          "content_same": false
        },
        {
          "line": 1462,
          "old_api": "rdbLoadType",
          "new_api": null,
          "old_text": "rdbLoadType(rdb)",
          "new_text": null,
          "old_line_content": "            if ((type = rdbLoadType(rdb)) == -1) goto eoferr;",
          "new_line_content": "            /* We read the time so we need to read the object type again. */",
          "content_same": false
        },
        {
          "line": 1469,
          "old_api": "rdbLoadMillisecondTime",
          "new_api": null,
          "old_text": "rdbLoadMillisecondTime(rdb)",
          "new_text": null,
          "old_line_content": "            if ((expiretime = rdbLoadMillisecondTime(rdb)) == -1) goto eoferr;",
          "new_line_content": "             * with RDB v3. Like EXPIRETIME but no with more precision. */",
          "content_same": false
        },
        {
          "line": 1471,
          "old_api": "rdbLoadType",
          "new_api": null,
          "old_text": "rdbLoadType(rdb)",
          "new_text": null,
          "old_line_content": "            if ((type = rdbLoadType(rdb)) == -1) goto eoferr;",
          "new_line_content": "            /* We read the time so we need to read the object type again. */",
          "content_same": false
        },
        {
          "line": 963,
          "old_api": "getRandomHexChars",
          "new_api": null,
          "old_text": "getRandomHexChars(eofmark,RDB_EOF_MARK_SIZE)",
          "new_text": null,
          "old_line_content": "    getRandomHexChars(eofmark,RDB_EOF_MARK_SIZE);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 965,
          "old_api": "rioWrite",
          "new_api": null,
          "old_text": "rioWrite(rdb,\"$EOF:\",5)",
          "new_text": null,
          "old_line_content": "    if (rioWrite(rdb,\"$EOF:\",5) == 0) goto werr;",
          "new_line_content": "    if (error) *error = 0;",
          "content_same": false
        },
        {
          "line": 1477,
          "old_api": "rdbLoadLen",
          "new_api": null,
          "old_text": "rdbLoadLen(rdb,NULL)",
          "new_text": null,
          "old_line_content": "            if ((dbid = rdbLoadLen(rdb,NULL)) == RDB_LENERR)",
          "new_line_content": "            /* SELECTDB: Select the specified database. */",
          "content_same": false
        },
        {
          "line": 1480,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_WARNING,\n                    \"FATAL: Data file was created with a Redis \"\n                    \"server configured to handle more than %d \"\n                    \"databases. Exiting\\n\", server.dbnum)",
          "new_text": null,
          "old_line_content": "                serverLog(LL_WARNING,",
          "new_line_content": "            if (dbid >= (unsigned)server.dbnum) {",
          "content_same": false
        },
        {
          "line": 1484,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "                exit(1);",
          "new_line_content": "                    \"databases. Exiting\\n\", server.dbnum);",
          "content_same": false
        },
        {
          "line": 1492,
          "old_api": "rdbLoadLen",
          "new_api": null,
          "old_text": "rdbLoadLen(rdb,NULL)",
          "new_text": null,
          "old_line_content": "            if ((db_size = rdbLoadLen(rdb,NULL)) == RDB_LENERR)",
          "new_line_content": "            uint64_t db_size, expires_size;",
          "content_same": false
        },
        {
          "line": 1494,
          "old_api": "rdbLoadLen",
          "new_api": null,
          "old_text": "rdbLoadLen(rdb,NULL)",
          "new_text": null,
          "old_line_content": "            if ((expires_size = rdbLoadLen(rdb,NULL)) == RDB_LENERR)",
          "new_line_content": "                goto eoferr;",
          "content_same": false
        },
        {
          "line": 1496,
          "old_api": "dictExpand",
          "new_api": null,
          "old_text": "dictExpand(db->dict,db_size)",
          "new_text": null,
          "old_line_content": "            dictExpand(db->dict,db_size);",
          "new_line_content": "                goto eoferr;",
          "content_same": false
        },
        {
          "line": 986,
          "old_api": "getpid",
          "new_api": null,
          "old_text": "getpid()",
          "new_text": null,
          "old_line_content": "    snprintf(tmpfile,256,\"temp-%d.rdb\", (int) getpid());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 989,
          "old_api": "getcwd",
          "new_api": null,
          "old_text": "getcwd(cwd,MAXPATHLEN)",
          "new_text": null,
          "old_line_content": "        char *cwdp = getcwd(cwd,MAXPATHLEN);",
          "new_line_content": "    if (!fp) {",
          "content_same": false
        },
        {
          "line": 1506,
          "old_api": "rdbLoadStringObject",
          "new_api": null,
          "old_text": "rdbLoadStringObject(rdb)",
          "new_text": null,
          "old_line_content": "            if ((auxkey = rdbLoadStringObject(rdb)) == NULL) goto eoferr;",
          "new_line_content": "            robj *auxkey, *auxval;",
          "content_same": false
        },
        {
          "line": 995,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "            strerror(errno));",
          "new_line_content": "            cwdp ? cwdp : \"unknown\",",
          "content_same": false
        },
        {
          "line": 999,
          "old_api": "rioInitWithFile",
          "new_api": null,
          "old_text": "rioInitWithFile(&rdb,fp)",
          "new_text": null,
          "old_line_content": "    rioInitWithFile(&rdb,fp);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1513,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_NOTICE,\"RDB '%s': %s\",\n                    (char*)auxkey->ptr,\n                    (char*)auxval->ptr)",
          "new_text": null,
          "old_line_content": "                serverLog(LL_NOTICE,\"RDB '%s': %s\",",
          "new_line_content": "                 * level of NOTICE. */",
          "content_same": false
        },
        {
          "line": 1516,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(auxkey->ptr,\"repl-stream-db\")",
          "new_text": null,
          "old_line_content": "            } else if (!strcasecmp(auxkey->ptr,\"repl-stream-db\")) {",
          "new_line_content": "                    (char*)auxval->ptr);",
          "content_same": false
        },
        {
          "line": 1006,
          "old_api": "fflush",
          "new_api": null,
          "old_text": "fflush(fp)",
          "new_text": null,
          "old_line_content": "    if (fflush(fp) == EOF) goto werr;",
          "new_line_content": "    /* Make sure data will not remain on the OS's output buffers */",
          "content_same": false
        },
        {
          "line": 1523,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(auxkey->ptr,\"repl-offset\")",
          "new_text": null,
          "old_line_content": "            } else if (!strcasecmp(auxkey->ptr,\"repl-offset\")) {",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 1012,
          "old_api": "rename",
          "new_api": null,
          "old_text": "rename(tmpfile,filename)",
          "new_text": null,
          "old_line_content": "    if (rename(tmpfile,filename) == -1) {",
          "new_line_content": "     * if the generate DB file is ok. */",
          "content_same": false
        },
        {
          "line": 1528,
          "old_api": "serverLog",
          "new_api": null,
          "old_text": "serverLog(LL_DEBUG,\"Unrecognized RDB AUX field: '%s'\",\n                    (char*)auxkey->ptr)",
          "new_text": null,
          "old_line_content": "                serverLog(LL_DEBUG,\"Unrecognized RDB AUX field: '%s'\",",
          "new_line_content": "                 * contract. */",
          "content_same": false
        },
        {
          "line": 1020,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "            strerror(errno));",
          "new_line_content": "            cwdp ? cwdp : \"unknown\",",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 110,
      "total_additions": 223,
      "total_deletions": 228,
      "total_api_changes": 561
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 10,
        "api_related_lines": 561,
        "non_api_lines": 3,
        "non_api_line_numbers": [
          712,
          722,
          708
        ]
      }
    },
    "api_calls_before": 527,
    "api_calls_after": 521,
    "diff_info": {
      "added_lines": 8,
      "removed_lines": 7,
      "total_diff_lines": 37
    }
  }
}
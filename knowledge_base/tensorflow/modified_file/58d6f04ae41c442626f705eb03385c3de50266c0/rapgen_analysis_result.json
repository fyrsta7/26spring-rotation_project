{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/tensorflow/modified_file/58d6f04ae41c442626f705eb03385c3de50266c0",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/tensorflow/modified_file/58d6f04ae41c442626f705eb03385c3de50266c0/before.cc",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/tensorflow/modified_file/58d6f04ae41c442626f705eb03385c3de50266c0/after.cc",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/tensorflow/modified_file/58d6f04ae41c442626f705eb03385c3de50266c0/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 308,
          "old_api": "llvm::Triple()",
          "new_api": "setTargetOptions",
          "old_text": "llvm::Triple()",
          "new_text": "llvm::EngineBuilder()\n          .setTargetOptions(target_options)\n          .setOptLevel(opt_level)\n          .selectTarget(\n              /*TargetTriple=*/llvm::Triple(), /*MArch=*/\"\",\n              /*MCPU=*/llvm::sys::getHostCPUName(),\n              /*MAttrs=*/llvm_attrs)",
          "old_line_content": "              /*TargetTriple=*/llvm::Triple(), /*MArch=*/\"\",",
          "new_line_content": "      llvm::EngineBuilder()",
          "content_same": false
        },
        {
          "line": 328,
          "old_api": "std::move(execution_session)",
          "new_api": "InferTargetMachineForJIT",
          "old_text": "std::move(execution_session)",
          "new_text": "InferTargetMachineForJIT(target_options, opt_level)",
          "old_line_content": "      execution_session_(std::move(execution_session)),",
          "new_line_content": "    : target_machine_(InferTargetMachineForJIT(target_options, opt_level)),",
          "content_same": false
        },
        {
          "line": 331,
          "old_api": "std::make_unique<ContiguousSectionMemoryManager>(\n                          orc_jit_memory_mapper::GetInstance())",
          "new_api": "std::move(target_process_control)",
          "old_text": "std::make_unique<ContiguousSectionMemoryManager>(\n                          orc_jit_memory_mapper::GetInstance())",
          "new_text": "std::move(target_process_control)",
          "old_line_content": "                      return std::make_unique<ContiguousSectionMemoryManager>(",
          "new_line_content": "      target_process_control_(std::move(target_process_control)),",
          "content_same": false
        },
        {
          "line": 332,
          "old_api": "orc_jit_memory_mapper::GetInstance()",
          "new_api": "std::move(execution_session)",
          "old_text": "orc_jit_memory_mapper::GetInstance()",
          "new_text": "std::move(execution_session)",
          "old_line_content": "                          orc_jit_memory_mapper::GetInstance());",
          "new_line_content": "      execution_session_(std::move(execution_session)),",
          "content_same": false
        },
        {
          "line": 336,
          "old_api": "get",
          "new_api": "orc_jit_memory_mapper::GetInstance()",
          "old_text": "std::make_unique<CompilerFunctor>(\n              target_machine_.get(), static_cast<int>(opt_level),\n              optimize_for_size, disable_expensive_passes,\n              disable_slp_vectorizer, fast_math_flags,\n              std::move(pre_optimization_hook),\n              std::move(post_optimization_hook), std::move(post_codegen_hook))",
          "new_text": "orc_jit_memory_mapper::GetInstance()",
          "old_line_content": "          std::make_unique<CompilerFunctor>(",
          "new_line_content": "                          orc_jit_memory_mapper::GetInstance());",
          "content_same": false
        },
        {
          "line": 340,
          "old_api": "std::move(pre_optimization_hook)",
          "new_api": "get",
          "old_text": "std::move(pre_optimization_hook)",
          "new_text": "std::make_unique<CompilerFunctor>(\n              target_machine_.get(), static_cast<int>(opt_level),\n              optimize_for_size, disable_expensive_passes,\n              disable_slp_vectorizer, fast_math_flags,\n              std::move(pre_optimization_hook),\n              std::move(post_optimization_hook), std::move(post_codegen_hook))",
          "old_line_content": "              std::move(pre_optimization_hook),",
          "new_line_content": "          std::make_unique<CompilerFunctor>(",
          "content_same": false
        },
        {
          "line": 341,
          "old_api": "std::move(post_codegen_hook)",
          "new_api": "static_cast<int>(opt_level)",
          "old_text": "std::move(post_codegen_hook)",
          "new_text": "static_cast<int>(opt_level)",
          "old_line_content": "              std::move(post_optimization_hook), std::move(post_codegen_hook))),",
          "new_line_content": "              target_machine_.get(), static_cast<int>(opt_level),",
          "content_same": false
        },
        {
          "line": 344,
          "old_api": "llvm::JITEventListener::createGDBRegistrationListener()",
          "new_api": "std::move(pre_optimization_hook)",
          "old_text": "llvm::JITEventListener::createGDBRegistrationListener()",
          "new_text": "std::move(pre_optimization_hook)",
          "old_line_content": "          llvm::JITEventListener::createGDBRegistrationListener()),",
          "new_line_content": "              std::move(pre_optimization_hook),",
          "content_same": false
        },
        {
          "line": 346,
          "old_api": "llvm::JITEventListener::createPerfJITEventListener()",
          "new_api": "createBareJITDylib",
          "old_text": "llvm::JITEventListener::createPerfJITEventListener()",
          "new_text": "execution_session_->createBareJITDylib(\"<main>\")",
          "old_line_content": "          llvm::JITEventListener::createPerfJITEventListener()) {",
          "new_line_content": "      main_jit_dylib_(&execution_session_->createBareJITDylib(\"<main>\")),",
          "content_same": false
        },
        {
          "line": 348,
          "old_api": "str",
          "new_api": "llvm::JITEventListener::createGDBRegistrationListener()",
          "old_text": "target_machine_->getTargetFeatureString().str()",
          "new_text": "llvm::JITEventListener::createGDBRegistrationListener()",
          "old_line_content": "          << \" features: \" << target_machine_->getTargetFeatureString().str();",
          "new_line_content": "          llvm::JITEventListener::createGDBRegistrationListener()),",
          "content_same": false
        },
        {
          "line": 374,
          "old_api": "addGenerator",
          "new_api": "std::move(new_defs)",
          "old_text": "main_jit_dylib_->addGenerator(\n      std::make_unique<RuntimeSymbolGenerator>(*this))",
          "new_text": "std::move(new_defs)",
          "old_line_content": "  main_jit_dylib_->addGenerator(",
          "new_line_content": "      cantFail(jit_dylib.define(absoluteSymbols(std::move(new_defs))));",
          "content_same": false
        },
        {
          "line": 375,
          "old_api": "std::make_unique<RuntimeSymbolGenerator>(*this)",
          "new_api": "llvm::Error::success()",
          "old_text": "std::make_unique<RuntimeSymbolGenerator>(*this)",
          "new_text": "llvm::Error::success()",
          "old_line_content": "      std::make_unique<RuntimeSymbolGenerator>(*this));",
          "new_line_content": "      return llvm::Error::success();",
          "content_same": false
        },
        {
          "line": 378,
          "old_api": "registerJITEventListener",
          "new_api": "addGenerator",
          "old_text": "object_layer_.registerJITEventListener(*perf_jit_event_listener_)",
          "new_text": "main_jit_dylib_->addGenerator(\n      std::make_unique<RuntimeSymbolGenerator>(*this))",
          "old_line_content": "    object_layer_.registerJITEventListener(*perf_jit_event_listener_);",
          "new_line_content": "  main_jit_dylib_->addGenerator(",
          "content_same": false
        },
        {
          "line": 382,
          "old_api": "isOSBinFormatCOFF",
          "new_api": "registerJITEventListener",
          "old_text": "target_triple_.isOSBinFormatCOFF()",
          "new_text": "object_layer_.registerJITEventListener(*perf_jit_event_listener_)",
          "old_line_content": "  if (target_triple_.isOSBinFormatCOFF()) {",
          "new_line_content": "    object_layer_.registerJITEventListener(*perf_jit_event_listener_);",
          "content_same": false
        },
        {
          "line": 406,
          "old_api": "takeError",
          "new_api": "std::make_shared<llvm::orc::SymbolStringPool>()",
          "old_text": "target_process_control.takeError()",
          "new_text": "std::make_shared<llvm::orc::SymbolStringPool>()",
          "old_line_content": "    return target_process_control.takeError();",
          "new_line_content": "  auto SSP = std::make_shared<llvm::orc::SymbolStringPool>();",
          "content_same": false
        },
        {
          "line": 410,
          "old_api": "std::make_unique<llvm::orc::UnsupportedExecutorProcessControl>()",
          "new_api": "takeError",
          "old_text": "std::make_unique<llvm::orc::UnsupportedExecutorProcessControl>()",
          "new_text": "target_process_control.takeError()",
          "old_line_content": "      std::make_unique<llvm::orc::UnsupportedExecutorProcessControl>());",
          "new_line_content": "    return target_process_control.takeError();",
          "content_same": false
        },
        {
          "line": 414,
          "old_api": "std::move(pre_optimization_hook)",
          "new_api": "std::make_unique<llvm::orc::UnsupportedExecutorProcessControl>()",
          "old_text": "std::move(pre_optimization_hook)",
          "new_text": "std::make_unique<llvm::orc::UnsupportedExecutorProcessControl>()",
          "old_line_content": "      disable_slp_vectorizer, fast_math_flags, std::move(pre_optimization_hook),",
          "new_line_content": "      std::make_unique<llvm::orc::UnsupportedExecutorProcessControl>());",
          "content_same": false
        },
        {
          "line": 415,
          "old_api": "std::move(post_codegen_hook)",
          "new_api": "std::make_unique<SimpleOrcJIT>(\n      std::move(*target_process_control), std::move(execution_session),\n      target_options, opt_level, optimize_for_size, disable_expensive_passes,\n      disable_slp_vectorizer, fast_math_flags, std::move(pre_optimization_hook),\n      std::move(post_optimization_hook), std::move(post_codegen_hook))",
          "old_text": "std::move(post_codegen_hook)",
          "new_text": "std::make_unique<SimpleOrcJIT>(\n      std::move(*target_process_control), std::move(execution_session),\n      target_options, opt_level, optimize_for_size, disable_expensive_passes,\n      disable_slp_vectorizer, fast_math_flags, std::move(pre_optimization_hook),\n      std::move(post_optimization_hook), std::move(post_codegen_hook))",
          "old_line_content": "      std::move(post_optimization_hook), std::move(post_codegen_hook));",
          "new_line_content": "  return std::make_unique<SimpleOrcJIT>(",
          "content_same": false
        },
        {
          "line": 433,
          "old_api": "LOG",
          "new_api": "str",
          "old_text": "LOG(ERROR)",
          "new_text": "name.str()",
          "old_line_content": "    LOG(ERROR)",
          "new_line_content": "        xla::CustomCallTargetRegistry::Global()->Lookup(name.str(), \"Host\");",
          "content_same": false
        },
        {
          "line": 453,
          "old_api": "notifyFreeingObject",
          "new_api": "getData",
          "old_text": "gdb_jit_event_listener_->notifyFreeingObject(key)",
          "new_text": "object.getData().size()",
          "old_line_content": "  gdb_jit_event_listener_->notifyFreeingObject(key);",
          "new_line_content": "  size_of_generated_code_in_bytes_ += object.getData().size();",
          "content_same": false
        },
        {
          "line": 462,
          "old_api": "std::move(module)",
          "new_api": "std::move(obj_file)",
          "old_text": "std::move(module)",
          "new_text": "std::move(obj_file)",
          "old_line_content": "  return compile_layer_.add(*main_jit_dylib_, std::move(module));",
          "new_line_content": "  return object_layer_.add(*main_jit_dylib_, std::move(obj_file));",
          "content_same": false
        },
        {
          "line": 553,
          "old_api": "reinterpret_cast<void*>(__gnu_f2h_ieee)",
          "new_api": "REGISTER_CPU_RUNTIME_SYMBOL",
          "old_text": "reinterpret_cast<void*>(__gnu_f2h_ieee)",
          "new_text": "REGISTER_CPU_RUNTIME_SYMBOL(OneDnnLayerNorm)",
          "old_line_content": "  registry->Register(\"__gnu_f2h_ieee\", reinterpret_cast<void*>(__gnu_f2h_ieee),",
          "new_line_content": "  REGISTER_CPU_RUNTIME_SYMBOL(OneDnnLayerNorm);",
          "content_same": false
        },
        {
          "line": 557,
          "old_api": "reinterpret_cast<void*>(__truncdfhf2)",
          "new_api": "reinterpret_cast<void*>(__gnu_f2h_ieee)",
          "old_text": "reinterpret_cast<void*>(__truncdfhf2)",
          "new_text": "reinterpret_cast<void*>(__gnu_f2h_ieee)",
          "old_line_content": "  registry->Register(\"__truncdfhf2\", reinterpret_cast<void*>(__truncdfhf2),",
          "new_line_content": "  registry->Register(\"__gnu_f2h_ieee\", reinterpret_cast<void*>(__gnu_f2h_ieee),",
          "content_same": false
        },
        {
          "line": 559,
          "old_api": "reinterpret_cast<void*>(__truncdfbf2)",
          "new_api": "reinterpret_cast<void*>(__gnu_h2f_ieee)",
          "old_text": "reinterpret_cast<void*>(__truncdfbf2)",
          "new_text": "reinterpret_cast<void*>(__gnu_h2f_ieee)",
          "old_line_content": "  registry->Register(\"__truncdfbf2\", reinterpret_cast<void*>(__truncdfbf2),",
          "new_line_content": "  registry->Register(\"__gnu_h2f_ieee\", reinterpret_cast<void*>(__gnu_h2f_ieee),",
          "content_same": false
        },
        {
          "line": 561,
          "old_api": "reinterpret_cast<void*>(__truncsfbf2)",
          "new_api": "reinterpret_cast<void*>(__truncdfhf2)",
          "old_text": "reinterpret_cast<void*>(__truncsfbf2)",
          "new_text": "reinterpret_cast<void*>(__truncdfhf2)",
          "old_line_content": "  registry->Register(\"__truncsfbf2\", reinterpret_cast<void*>(__truncsfbf2),",
          "new_line_content": "  registry->Register(\"__truncdfhf2\", reinterpret_cast<void*>(__truncdfhf2),",
          "content_same": false
        },
        {
          "line": 563,
          "old_api": "reinterpret_cast<void*>(__powisf2)",
          "new_api": "reinterpret_cast<void*>(__truncdfbf2)",
          "old_text": "reinterpret_cast<void*>(__powisf2)",
          "new_text": "reinterpret_cast<void*>(__truncdfbf2)",
          "old_line_content": "  registry->Register(\"__powisf2\", reinterpret_cast<void*>(__powisf2), \"Host\");",
          "new_line_content": "  registry->Register(\"__truncdfbf2\", reinterpret_cast<void*>(__truncdfbf2),",
          "content_same": false
        },
        {
          "line": 655,
          "old_api": "reinterpret_cast<void*>(malloc)",
          "new_api": "reinterpret_cast<void*>(memmove)",
          "old_text": "reinterpret_cast<void*>(malloc)",
          "new_text": "reinterpret_cast<void*>(memmove)",
          "old_line_content": "  registry->Register(\"malloc\", reinterpret_cast<void*>(malloc), \"Host\");",
          "new_line_content": "  registry->Register(\"memmove\", reinterpret_cast<void*>(memmove), \"Host\");",
          "content_same": false
        },
        {
          "line": 656,
          "old_api": "reinterpret_cast<void*>(calloc)",
          "new_api": "reinterpret_cast<void*>(memset)",
          "old_text": "reinterpret_cast<void*>(calloc)",
          "new_text": "reinterpret_cast<void*>(memset)",
          "old_line_content": "  registry->Register(\"calloc\", reinterpret_cast<void*>(calloc), \"Host\");",
          "new_line_content": "  registry->Register(\"memset\", reinterpret_cast<void*>(memset), \"Host\");",
          "content_same": false
        },
        {
          "line": 660,
          "old_api": "reinterpret_cast<void*>(memrefCopy)",
          "new_api": "reinterpret_cast<void*>(calloc)",
          "old_text": "reinterpret_cast<void*>(memrefCopy)",
          "new_text": "reinterpret_cast<void*>(calloc)",
          "old_line_content": "  registry->Register(\"memrefCopy\", reinterpret_cast<void*>(memrefCopy), \"Host\");",
          "new_line_content": "  registry->Register(\"calloc\", reinterpret_cast<void*>(calloc), \"Host\");",
          "content_same": false
        },
        {
          "line": 664,
          "old_api": "reinterpret_cast<void*>(bzero)",
          "new_api": "reinterpret_cast<void*>(memrefCopy)",
          "old_text": "reinterpret_cast<void*>(bzero)",
          "new_text": "reinterpret_cast<void*>(memrefCopy)",
          "old_line_content": "  registry->Register(\"__bzero\", reinterpret_cast<void*>(bzero), \"Host\");",
          "new_line_content": "  registry->Register(\"memrefCopy\", reinterpret_cast<void*>(memrefCopy), \"Host\");",
          "content_same": false
        },
        {
          "line": 671,
          "old_api": "Register",
          "new_api": "reinterpret_cast<void*>(memset_pattern16)",
          "old_text": "registry->Register(\"__msan_unpoison\",\n                     reinterpret_cast<void*>(__msan_unpoison), \"Host\")",
          "new_text": "reinterpret_cast<void*>(memset_pattern16)",
          "old_line_content": "  registry->Register(\"__msan_unpoison\",",
          "new_line_content": "                     reinterpret_cast<void*>(memset_pattern16), \"Host\");",
          "content_same": false
        },
        {
          "line": 676,
          "old_api": "reinterpret_cast<void*>(__chkstk)",
          "new_api": "reinterpret_cast<void*>(__msan_unpoison)",
          "old_text": "reinterpret_cast<void*>(__chkstk)",
          "new_text": "reinterpret_cast<void*>(__msan_unpoison)",
          "old_line_content": "  registry->Register(\"__chkstk\", reinterpret_cast<void*>(__chkstk), \"Host\");",
          "new_line_content": "                     reinterpret_cast<void*>(__msan_unpoison), \"Host\");",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 640,
          "old_api": null,
          "new_api": "reinterpret_cast<void*>(__sincos_stret)",
          "old_text": null,
          "new_text": "reinterpret_cast<void*>(__sincos_stret)",
          "old_line_content": "#endif",
          "new_line_content": "  registry->Register(\"__sincos_stret\", reinterpret_cast<void*>(__sincos_stret),",
          "content_same": false
        },
        {
          "line": 386,
          "old_api": null,
          "new_api": "isOSBinFormatCOFF",
          "old_text": null,
          "new_text": "target_triple_.isOSBinFormatCOFF()",
          "old_line_content": "}",
          "new_line_content": "  if (target_triple_.isOSBinFormatCOFF()) {",
          "content_same": false
        },
        {
          "line": 387,
          "old_api": null,
          "new_api": "setOverrideObjectFlagsWithResponsibilityFlags",
          "old_text": null,
          "new_text": "object_layer_.setOverrideObjectFlagsWithResponsibilityFlags(true)",
          "old_line_content": "",
          "new_line_content": "    object_layer_.setOverrideObjectFlagsWithResponsibilityFlags(true);",
          "content_same": false
        },
        {
          "line": 388,
          "old_api": null,
          "new_api": "setAutoClaimResponsibilityForObjectSymbols",
          "old_text": null,
          "new_text": "object_layer_.setAutoClaimResponsibilityForObjectSymbols(true)",
          "old_line_content": "SimpleOrcJIT::~SimpleOrcJIT() {",
          "new_line_content": "    object_layer_.setAutoClaimResponsibilityForObjectSymbols(true);",
          "content_same": false
        },
        {
          "line": 393,
          "old_api": null,
          "new_api": "endSession",
          "old_text": null,
          "new_text": "execution_session_->endSession()",
          "old_line_content": "",
          "new_line_content": "  if (auto err = execution_session_->endSession()) {",
          "content_same": false
        },
        {
          "line": 394,
          "old_api": null,
          "new_api": "std::move(err)",
          "old_text": null,
          "new_text": "std::move(err)",
          "old_line_content": "llvm::Expected<std::unique_ptr<SimpleOrcJIT>> SimpleOrcJIT::Create(",
          "new_line_content": "    execution_session_->reportError(std::move(err));",
          "content_same": false
        },
        {
          "line": 654,
          "old_api": null,
          "new_api": "reinterpret_cast<void*>(memcpy)",
          "old_text": null,
          "new_text": "reinterpret_cast<void*>(memcpy)",
          "old_line_content": "  // Used by MLIR lowering.",
          "new_line_content": "  registry->Register(\"memcpy\", reinterpret_cast<void*>(memcpy), \"Host\");",
          "content_same": false
        },
        {
          "line": 659,
          "old_api": null,
          "new_api": "reinterpret_cast<void*>(malloc)",
          "old_text": null,
          "new_text": "reinterpret_cast<void*>(malloc)",
          "old_line_content": "  // TODO(b/246980307): fails to link on windows because it's marked dllimport.",
          "new_line_content": "  registry->Register(\"malloc\", reinterpret_cast<void*>(malloc), \"Host\");",
          "content_same": false
        },
        {
          "line": 661,
          "old_api": null,
          "new_api": "reinterpret_cast<void*>(free)",
          "old_text": null,
          "new_text": "reinterpret_cast<void*>(free)",
          "old_line_content": "#endif",
          "new_line_content": "  registry->Register(\"free\", reinterpret_cast<void*>(free), \"Host\");",
          "content_same": false
        },
        {
          "line": 408,
          "old_api": null,
          "new_api": "std::move(SSP)",
          "old_text": null,
          "new_text": "std::move(SSP)",
          "old_line_content": "",
          "new_line_content": "      llvm::orc::SelfExecutorProcessControl::Create(std::move(SSP));",
          "content_same": false
        },
        {
          "line": 668,
          "old_api": null,
          "new_api": "reinterpret_cast<void*>(bzero)",
          "old_text": null,
          "new_text": "reinterpret_cast<void*>(bzero)",
          "old_line_content": "#endif",
          "new_line_content": "  registry->Register(\"__bzero\", reinterpret_cast<void*>(bzero), \"Host\");",
          "content_same": false
        },
        {
          "line": 669,
          "old_api": null,
          "new_api": "reinterpret_cast<void*>(bzero)",
          "old_text": null,
          "new_text": "reinterpret_cast<void*>(bzero)",
          "old_line_content": "",
          "new_line_content": "  registry->Register(\"bzero\", reinterpret_cast<void*>(bzero), \"Host\");",
          "content_same": false
        },
        {
          "line": 670,
          "old_api": null,
          "new_api": "Register",
          "old_text": null,
          "new_text": "registry->Register(\"memset_pattern16\",\n                     reinterpret_cast<void*>(memset_pattern16), \"Host\")",
          "old_line_content": "#ifdef MEMORY_SANITIZER",
          "new_line_content": "  registry->Register(\"memset_pattern16\",",
          "content_same": false
        },
        {
          "line": 413,
          "old_api": null,
          "new_api": "std::make_unique<llvm::orc::ExecutionSession>(\n      std::make_unique<llvm::orc::UnsupportedExecutorProcessControl>())",
          "old_text": null,
          "new_text": "std::make_unique<llvm::orc::ExecutionSession>(\n      std::make_unique<llvm::orc::UnsupportedExecutorProcessControl>())",
          "old_line_content": "      target_options, opt_level, optimize_for_size, disable_expensive_passes,",
          "new_line_content": "  auto execution_session = std::make_unique<llvm::orc::ExecutionSession>(",
          "content_same": false
        },
        {
          "line": 416,
          "old_api": null,
          "new_api": "std::move(execution_session)",
          "old_text": null,
          "new_text": "std::move(execution_session)",
          "old_line_content": "}",
          "new_line_content": "      std::move(*target_process_control), std::move(execution_session),",
          "content_same": false
        },
        {
          "line": 546,
          "old_api": null,
          "new_api": "REGISTER_CPU_RUNTIME_SYMBOL",
          "old_text": null,
          "new_text": "REGISTER_CPU_RUNTIME_SYMBOL(TopKF32)",
          "old_line_content": "#if defined(INTEL_MKL) && defined(ENABLE_ONEDNN_V3)",
          "new_line_content": "  REGISTER_CPU_RUNTIME_SYMBOL(TopKF32);",
          "content_same": false
        },
        {
          "line": 675,
          "old_api": null,
          "new_api": "Register",
          "old_text": null,
          "new_text": "registry->Register(\"__msan_unpoison\",\n                     reinterpret_cast<void*>(__msan_unpoison), \"Host\")",
          "old_line_content": "#if defined(PLATFORM_WINDOWS)",
          "new_line_content": "  registry->Register(\"__msan_unpoison\",",
          "content_same": false
        },
        {
          "line": 418,
          "old_api": null,
          "new_api": "std::move(pre_optimization_hook)",
          "old_text": null,
          "new_text": "std::move(pre_optimization_hook)",
          "old_line_content": "llvm::orc::ExecutorSymbolDef SimpleOrcJIT::ResolveRuntimeSymbol(",
          "new_line_content": "      disable_slp_vectorizer, fast_math_flags, std::move(pre_optimization_hook),",
          "content_same": false
        },
        {
          "line": 419,
          "old_api": null,
          "new_api": "std::move(post_codegen_hook)",
          "old_text": null,
          "new_text": "std::move(post_codegen_hook)",
          "old_line_content": "    llvm::StringRef name) {",
          "new_line_content": "      std::move(post_optimization_hook), std::move(post_codegen_hook));",
          "content_same": false
        },
        {
          "line": 551,
          "old_api": null,
          "new_api": "REGISTER_CPU_RUNTIME_SYMBOL",
          "old_text": null,
          "new_text": "REGISTER_CPU_RUNTIME_SYMBOL(OneDnnMatMul)",
          "old_line_content": "#endif  // INTEL_MKL && ENABLE_ONEDNN_V3",
          "new_line_content": "  REGISTER_CPU_RUNTIME_SYMBOL(OneDnnMatMul);",
          "content_same": false
        },
        {
          "line": 552,
          "old_api": null,
          "new_api": "REGISTER_CPU_RUNTIME_SYMBOL",
          "old_text": null,
          "new_text": "REGISTER_CPU_RUNTIME_SYMBOL(OneDnnSoftmax)",
          "old_line_content": "",
          "new_line_content": "  REGISTER_CPU_RUNTIME_SYMBOL(OneDnnSoftmax);",
          "content_same": false
        },
        {
          "line": 680,
          "old_api": null,
          "new_api": "reinterpret_cast<void*>(__chkstk)",
          "old_text": null,
          "new_text": "reinterpret_cast<void*>(__chkstk)",
          "old_line_content": "}",
          "new_line_content": "  registry->Register(\"__chkstk\", reinterpret_cast<void*>(__chkstk), \"Host\");",
          "content_same": false
        },
        {
          "line": 554,
          "old_api": null,
          "new_api": "REGISTER_CPU_RUNTIME_SYMBOL",
          "old_text": null,
          "new_text": "REGISTER_CPU_RUNTIME_SYMBOL(OneDnnMatMulReorder)",
          "old_line_content": "                     \"Host\");",
          "new_line_content": "  REGISTER_CPU_RUNTIME_SYMBOL(OneDnnMatMulReorder);",
          "content_same": false
        },
        {
          "line": 425,
          "old_api": null,
          "new_api": "getGlobalPrefix",
          "old_text": null,
          "new_text": "data_layout_.getGlobalPrefix()",
          "old_line_content": "    func_addr =",
          "new_line_content": "  if (name.size() > 1 && name.front() == data_layout_.getGlobalPrefix()) {",
          "content_same": false
        },
        {
          "line": 428,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "name.end()",
          "old_line_content": "    func_addr =",
          "new_line_content": "    std::string stripped_name(name.begin() + 1, name.end());",
          "content_same": false
        },
        {
          "line": 686,
          "old_api": null,
          "new_api": "RegisterKnownJITSymbols",
          "old_text": null,
          "new_text": "RegisterKnownJITSymbols()",
          "old_line_content": "}  // namespace xla",
          "new_line_content": "bool unused = RegisterKnownJITSymbols();",
          "content_same": false
        },
        {
          "line": 430,
          "old_api": null,
          "new_api": "Lookup",
          "old_text": null,
          "new_text": "xla::CustomCallTargetRegistry::Global()->Lookup(stripped_name, \"Host\")",
          "old_line_content": "  }",
          "new_line_content": "        xla::CustomCallTargetRegistry::Global()->Lookup(stripped_name, \"Host\");",
          "content_same": false
        },
        {
          "line": 305,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "attrs.push_back(\"-prefer-256-bit\")",
          "old_line_content": "          .setTargetOptions(target_options)",
          "new_line_content": "  attrs.push_back(\"-prefer-256-bit\");",
          "content_same": false
        },
        {
          "line": 306,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "attrs.end()",
          "old_line_content": "          .setOptLevel(opt_level)",
          "new_line_content": "  llvm::SmallVector<std::string, 0> llvm_attrs(attrs.begin(), attrs.end());",
          "content_same": false
        },
        {
          "line": 565,
          "old_api": null,
          "new_api": "reinterpret_cast<void*>(__truncsfbf2)",
          "old_text": null,
          "new_text": "reinterpret_cast<void*>(__truncsfbf2)",
          "old_line_content": "",
          "new_line_content": "  registry->Register(\"__truncsfbf2\", reinterpret_cast<void*>(__truncsfbf2),",
          "content_same": false
        },
        {
          "line": 437,
          "old_api": null,
          "new_api": "LOG",
          "old_text": null,
          "new_text": "LOG(ERROR)",
          "old_line_content": "           \"XLA_CPU_REGISTER_CUSTOM_CALL_TARGET.\";",
          "new_line_content": "    LOG(ERROR)",
          "content_same": false
        },
        {
          "line": 567,
          "old_api": null,
          "new_api": "reinterpret_cast<void*>(__powisf2)",
          "old_text": null,
          "new_text": "reinterpret_cast<void*>(__powisf2)",
          "old_line_content": "",
          "new_line_content": "  registry->Register(\"__powisf2\", reinterpret_cast<void*>(__powisf2), \"Host\");",
          "content_same": false
        },
        {
          "line": 568,
          "old_api": null,
          "new_api": "reinterpret_cast<void*>(__powidf2)",
          "old_text": null,
          "new_text": "reinterpret_cast<void*>(__powidf2)",
          "old_line_content": "// Register both the f32 (float) and f64 (double) versions of a libm symbol.",
          "new_line_content": "  registry->Register(\"__powidf2\", reinterpret_cast<void*>(__powidf2), \"Host\");",
          "content_same": false
        },
        {
          "line": 312,
          "old_api": null,
          "new_api": "llvm::Triple()",
          "old_text": null,
          "new_text": "llvm::Triple()",
          "old_line_content": "  return target_machine;",
          "new_line_content": "              /*TargetTriple=*/llvm::Triple(), /*MArch=*/\"\",",
          "content_same": false
        },
        {
          "line": 313,
          "old_api": null,
          "new_api": "llvm::sys::getHostCPUName()",
          "old_text": null,
          "new_text": "llvm::sys::getHostCPUName()",
          "old_line_content": "}",
          "new_line_content": "              /*MCPU=*/llvm::sys::getHostCPUName(),",
          "content_same": false
        },
        {
          "line": 315,
          "old_api": null,
          "new_api": "CHECK",
          "old_text": null,
          "new_text": "CHECK(target_machine != nullptr)",
          "old_line_content": "SimpleOrcJIT::SimpleOrcJIT(",
          "new_line_content": "  CHECK(target_machine != nullptr);",
          "content_same": false
        },
        {
          "line": 438,
          "old_api": null,
          "new_api": "str",
          "old_text": null,
          "new_text": "name.str()",
          "old_line_content": "    return {};",
          "new_line_content": "        << \"Unable to resolve runtime symbol: `\" << name.str()",
          "content_same": false
        },
        {
          "line": 444,
          "old_api": null,
          "new_api": "reinterpret_cast<uint64_t>(func_addr)",
          "old_text": null,
          "new_text": "reinterpret_cast<uint64_t>(func_addr)",
          "old_line_content": "void SimpleOrcJIT::notifyObjectLoaded(",
          "new_line_content": "  return {llvm::orc::ExecutorAddr(reinterpret_cast<uint64_t>(func_addr)),",
          "content_same": false
        },
        {
          "line": 452,
          "old_api": null,
          "new_api": "notifyObjectLoaded",
          "old_text": null,
          "new_text": "gdb_jit_event_listener_->notifyObjectLoaded(key, object, object_info)",
          "old_line_content": "void SimpleOrcJIT::notifyFreeingObject(llvm::JITEventListener::ObjectKey key) {",
          "new_line_content": "  gdb_jit_event_listener_->notifyObjectLoaded(key, object, object_info);",
          "content_same": false
        },
        {
          "line": 329,
          "old_api": null,
          "new_api": "getTargetTriple",
          "old_text": null,
          "new_text": "target_machine_->getTargetTriple()",
          "old_line_content": "      object_layer_(*execution_session_,",
          "new_line_content": "      target_triple_(target_machine_->getTargetTriple()),",
          "content_same": false
        },
        {
          "line": 330,
          "old_api": null,
          "new_api": "createDataLayout",
          "old_text": null,
          "new_text": "target_machine_->createDataLayout()",
          "old_line_content": "                    []() {",
          "new_line_content": "      data_layout_(target_machine_->createDataLayout()),",
          "content_same": false
        },
        {
          "line": 457,
          "old_api": null,
          "new_api": "notifyFreeingObject",
          "old_text": null,
          "new_text": "gdb_jit_event_listener_->notifyFreeingObject(key)",
          "old_line_content": "    std::unique_ptr<llvm::MemoryBuffer> obj_file) {",
          "new_line_content": "  gdb_jit_event_listener_->notifyFreeingObject(key);",
          "content_same": false
        },
        {
          "line": 335,
          "old_api": null,
          "new_api": "std::make_unique<ContiguousSectionMemoryManager>(\n                          orc_jit_memory_mapper::GetInstance())",
          "old_text": null,
          "new_text": "std::make_unique<ContiguousSectionMemoryManager>(\n                          orc_jit_memory_mapper::GetInstance())",
          "old_line_content": "          *execution_session_, object_layer_,",
          "new_line_content": "                      return std::make_unique<ContiguousSectionMemoryManager>(",
          "content_same": false
        },
        {
          "line": 466,
          "old_api": null,
          "new_api": "std::move(module)",
          "old_text": null,
          "new_text": "std::move(module)",
          "old_line_content": "  // The target machine takes a non-trivial amount of memory, so once we are",
          "new_line_content": "  return compile_layer_.add(*main_jit_dylib_, std::move(module));",
          "content_same": false
        },
        {
          "line": 472,
          "old_api": null,
          "new_api": "reset",
          "old_text": null,
          "new_text": "target_machine_.reset()",
          "old_line_content": "    const std::string& name) {",
          "new_line_content": "  target_machine_.reset();",
          "content_same": false
        },
        {
          "line": 345,
          "old_api": null,
          "new_api": "std::move(post_codegen_hook)",
          "old_text": null,
          "new_text": "std::move(post_codegen_hook)",
          "old_line_content": "      perf_jit_event_listener_(",
          "new_line_content": "              std::move(post_optimization_hook), std::move(post_codegen_hook))),",
          "content_same": false
        },
        {
          "line": 477,
          "old_api": null,
          "new_api": "lookup",
          "old_text": null,
          "new_text": "execution_session_->lookup({main_jit_dylib_}, name)",
          "old_line_content": "// This function is used by compiler-generated code on windows, but it's not",
          "new_line_content": "  return execution_session_->lookup({main_jit_dylib_}, name);",
          "content_same": false
        },
        {
          "line": 350,
          "old_api": null,
          "new_api": "llvm::JITEventListener::createPerfJITEventListener()",
          "old_text": null,
          "new_text": "llvm::JITEventListener::createPerfJITEventListener()",
          "old_line_content": "  // Materialize unknown symbols from the runtime symbol table.",
          "new_line_content": "          llvm::JITEventListener::createPerfJITEventListener()) {",
          "content_same": false
        },
        {
          "line": 351,
          "old_api": null,
          "new_api": "str",
          "old_text": null,
          "new_text": "target_machine_->getTargetCPU().str()",
          "old_line_content": "  class RuntimeSymbolGenerator : public llvm::orc::DefinitionGenerator {",
          "new_line_content": "  VLOG(1) << \"CPU target: \" << target_machine_->getTargetCPU().str()",
          "content_same": false
        },
        {
          "line": 352,
          "old_api": null,
          "new_api": "str",
          "old_text": null,
          "new_text": "target_machine_->getTargetFeatureString().str()",
          "old_line_content": "    SimpleOrcJIT& jit_;",
          "new_line_content": "          << \" features: \" << target_machine_->getTargetFeatureString().str();",
          "content_same": false
        },
        {
          "line": 359,
          "old_api": null,
          "new_api": "explicit",
          "old_text": null,
          "new_text": "explicit",
          "old_line_content": "        const llvm::orc::SymbolLookupSet& names) override {",
          "new_line_content": "    explicit RuntimeSymbolGenerator(SimpleOrcJIT& jit) : jit_(jit) {}",
          "content_same": false
        },
        {
          "line": 490,
          "old_api": null,
          "new_api": "xla::CustomCallTargetRegistry::Global()",
          "old_text": null,
          "new_text": "xla::CustomCallTargetRegistry::Global()",
          "old_line_content": "#define REGISTER_CPU_RUNTIME_SYMBOL(base_name)                               \\",
          "new_line_content": "      xla::CustomCallTargetRegistry::Global();",
          "content_same": false
        },
        {
          "line": 491,
          "old_api": null,
          "new_api": "reinterpret_cast<void*>(&printf)",
          "old_text": null,
          "new_text": "reinterpret_cast<void*>(&printf)",
          "old_line_content": "  do {                                                                       \\",
          "new_line_content": "  registry->Register(\"printf\", reinterpret_cast<void*>(&printf), \"Host\");",
          "content_same": false
        },
        {
          "line": 492,
          "old_api": null,
          "new_api": "reinterpret_cast<void*>(&puts)",
          "old_text": null,
          "new_text": "reinterpret_cast<void*>(&puts)",
          "old_line_content": "    auto* function_address =                                                 \\",
          "new_line_content": "  registry->Register(\"puts\", reinterpret_cast<void*>(&puts), \"Host\");",
          "content_same": false
        },
        {
          "line": 368,
          "old_api": null,
          "new_api": "ResolveRuntimeSymbol",
          "old_text": null,
          "new_text": "jit_.ResolveRuntimeSymbol(*name)",
          "old_line_content": "      }",
          "new_line_content": "        llvm::orc::ExecutorSymbolDef symbol = jit_.ResolveRuntimeSymbol(*name);",
          "content_same": false
        },
        {
          "line": 369,
          "old_api": null,
          "new_api": "getAddress",
          "old_text": null,
          "new_text": "symbol.getAddress()",
          "old_line_content": "",
          "new_line_content": "        if (symbol.getAddress()) {",
          "content_same": false
        },
        {
          "line": 379,
          "old_api": null,
          "new_api": "std::make_unique<RuntimeSymbolGenerator>(*this)",
          "old_text": null,
          "new_text": "std::make_unique<RuntimeSymbolGenerator>(*this)",
          "old_line_content": "  }",
          "new_line_content": "      std::make_unique<RuntimeSymbolGenerator>(*this));",
          "content_same": false
        },
        {
          "line": 380,
          "old_api": null,
          "new_api": "registerJITEventListener",
          "old_text": null,
          "new_text": "object_layer_.registerJITEventListener(*this)",
          "old_line_content": "",
          "new_line_content": "  object_layer_.registerJITEventListener(*this);",
          "content_same": false
        },
        {
          "line": 638,
          "old_api": null,
          "new_api": "Register",
          "old_text": null,
          "new_text": "registry->Register(\"__sincosf_stret\",\n                     reinterpret_cast<void*>(__sincosf_stret), \"Host\")",
          "old_line_content": "#else",
          "new_line_content": "  registry->Register(\"__sincosf_stret\",",
          "content_same": false
        },
        {
          "line": 639,
          "old_api": null,
          "new_api": "reinterpret_cast<void*>(__sincosf_stret)",
          "old_text": null,
          "new_text": "reinterpret_cast<void*>(__sincosf_stret)",
          "old_line_content": "  REGISTER_LIBM_SYMBOL(sincos, void (*)(double, double*, double*));",
          "new_line_content": "                     reinterpret_cast<void*>(__sincosf_stret), \"Host\");",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 384,
          "old_api": "setAutoClaimResponsibilityForObjectSymbols",
          "new_api": null,
          "old_text": "object_layer_.setAutoClaimResponsibilityForObjectSymbols(true)",
          "new_text": null,
          "old_line_content": "    object_layer_.setAutoClaimResponsibilityForObjectSymbols(true);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 389,
          "old_api": "endSession",
          "new_api": null,
          "old_text": "execution_session_->endSession()",
          "new_text": null,
          "old_line_content": "  if (auto err = execution_session_->endSession()) {",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 390,
          "old_api": "std::move(err)",
          "new_api": null,
          "old_text": "std::move(err)",
          "new_text": null,
          "old_line_content": "    execution_session_->reportError(std::move(err));",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 650,
          "old_api": "reinterpret_cast<void*>(memcpy)",
          "new_api": null,
          "old_text": "reinterpret_cast<void*>(memcpy)",
          "new_text": null,
          "old_line_content": "  registry->Register(\"memcpy\", reinterpret_cast<void*>(memcpy), \"Host\");",
          "new_line_content": "  REGISTER_LIBM_SYMBOL(trunc, double (*)(double));",
          "content_same": false
        },
        {
          "line": 651,
          "old_api": "reinterpret_cast<void*>(memmove)",
          "new_api": null,
          "old_text": "reinterpret_cast<void*>(memmove)",
          "new_text": null,
          "old_line_content": "  registry->Register(\"memmove\", reinterpret_cast<void*>(memmove), \"Host\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 652,
          "old_api": "reinterpret_cast<void*>(memset)",
          "new_api": null,
          "old_text": "reinterpret_cast<void*>(memset)",
          "new_text": null,
          "old_line_content": "  registry->Register(\"memset\", reinterpret_cast<void*>(memset), \"Host\");",
          "new_line_content": "#undef REGISTER_LIBM_SYMBOL",
          "content_same": false
        },
        {
          "line": 657,
          "old_api": "reinterpret_cast<void*>(free)",
          "new_api": null,
          "old_text": "reinterpret_cast<void*>(free)",
          "new_text": null,
          "old_line_content": "  registry->Register(\"free\", reinterpret_cast<void*>(free), \"Host\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 402,
          "old_api": "std::make_shared<llvm::orc::SymbolStringPool>()",
          "new_api": null,
          "old_text": "std::make_shared<llvm::orc::SymbolStringPool>()",
          "new_text": null,
          "old_line_content": "  auto SSP = std::make_shared<llvm::orc::SymbolStringPool>();",
          "new_line_content": "    LLVMCompiler::ModuleHook pre_optimization_hook,",
          "content_same": false
        },
        {
          "line": 404,
          "old_api": "std::move(SSP)",
          "new_api": null,
          "old_text": "std::move(SSP)",
          "new_text": null,
          "old_line_content": "      llvm::orc::SelfExecutorProcessControl::Create(std::move(SSP));",
          "new_line_content": "    absl::AnyInvocable<void(const llvm::object::ObjectFile&)>",
          "content_same": false
        },
        {
          "line": 665,
          "old_api": "reinterpret_cast<void*>(bzero)",
          "new_api": null,
          "old_text": "reinterpret_cast<void*>(bzero)",
          "new_text": null,
          "old_line_content": "  registry->Register(\"bzero\", reinterpret_cast<void*>(bzero), \"Host\");",
          "new_line_content": "#endif",
          "content_same": false
        },
        {
          "line": 666,
          "old_api": "Register",
          "new_api": null,
          "old_text": "registry->Register(\"memset_pattern16\",\n                     reinterpret_cast<void*>(memset_pattern16), \"Host\")",
          "new_text": null,
          "old_line_content": "  registry->Register(\"memset_pattern16\",",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 667,
          "old_api": "reinterpret_cast<void*>(memset_pattern16)",
          "new_api": null,
          "old_text": "reinterpret_cast<void*>(memset_pattern16)",
          "new_text": null,
          "old_line_content": "                     reinterpret_cast<void*>(memset_pattern16), \"Host\");",
          "new_line_content": "#ifdef __APPLE__",
          "content_same": false
        },
        {
          "line": 409,
          "old_api": "std::make_unique<llvm::orc::ExecutionSession>(\n      std::make_unique<llvm::orc::UnsupportedExecutorProcessControl>())",
          "new_api": null,
          "old_text": "std::make_unique<llvm::orc::ExecutionSession>(\n      std::make_unique<llvm::orc::UnsupportedExecutorProcessControl>())",
          "new_text": null,
          "old_line_content": "  auto execution_session = std::make_unique<llvm::orc::ExecutionSession>(",
          "new_line_content": "  if (!target_process_control) {",
          "content_same": false
        },
        {
          "line": 411,
          "old_api": "std::make_unique<SimpleOrcJIT>(\n      std::move(*target_process_control), std::move(execution_session),\n      target_options, opt_level, optimize_for_size, disable_expensive_passes,\n      disable_slp_vectorizer, fast_math_flags, std::move(pre_optimization_hook),\n      std::move(post_optimization_hook), std::move(post_codegen_hook))",
          "new_api": null,
          "old_text": "std::make_unique<SimpleOrcJIT>(\n      std::move(*target_process_control), std::move(execution_session),\n      target_options, opt_level, optimize_for_size, disable_expensive_passes,\n      disable_slp_vectorizer, fast_math_flags, std::move(pre_optimization_hook),\n      std::move(post_optimization_hook), std::move(post_codegen_hook))",
          "new_text": null,
          "old_line_content": "  return std::make_unique<SimpleOrcJIT>(",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 412,
          "old_api": "std::move(execution_session)",
          "new_api": null,
          "old_text": "std::move(execution_session)",
          "new_text": null,
          "old_line_content": "      std::move(*target_process_control), std::move(execution_session),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 672,
          "old_api": "reinterpret_cast<void*>(__msan_unpoison)",
          "new_api": null,
          "old_text": "reinterpret_cast<void*>(__msan_unpoison)",
          "new_text": null,
          "old_line_content": "                     reinterpret_cast<void*>(__msan_unpoison), \"Host\");",
          "new_line_content": "#endif",
          "content_same": false
        },
        {
          "line": 421,
          "old_api": "getGlobalPrefix",
          "new_api": null,
          "old_text": "data_layout_.getGlobalPrefix()",
          "new_text": null,
          "old_line_content": "  if (name.size() > 1 && name.front() == data_layout_.getGlobalPrefix()) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 550,
          "old_api": "REGISTER_CPU_RUNTIME_SYMBOL",
          "new_api": null,
          "old_text": "REGISTER_CPU_RUNTIME_SYMBOL(OneDnnMatMulReorder)",
          "new_text": null,
          "old_line_content": "  REGISTER_CPU_RUNTIME_SYMBOL(OneDnnMatMulReorder);",
          "new_line_content": "#if defined(INTEL_MKL) && defined(ENABLE_ONEDNN_V3)",
          "content_same": false
        },
        {
          "line": 424,
          "old_api": "end",
          "new_api": null,
          "old_text": "name.end()",
          "new_text": null,
          "old_line_content": "    std::string stripped_name(name.begin() + 1, name.end());",
          "new_line_content": "  void* func_addr = nullptr;",
          "content_same": false
        },
        {
          "line": 682,
          "old_api": "RegisterKnownJITSymbols",
          "new_api": null,
          "old_text": "RegisterKnownJITSymbols()",
          "new_text": null,
          "old_line_content": "bool unused = RegisterKnownJITSymbols();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 555,
          "old_api": "reinterpret_cast<void*>(__gnu_h2f_ieee)",
          "new_api": null,
          "old_text": "reinterpret_cast<void*>(__gnu_h2f_ieee)",
          "new_text": null,
          "old_line_content": "  registry->Register(\"__gnu_h2f_ieee\", reinterpret_cast<void*>(__gnu_h2f_ieee),",
          "new_line_content": "#endif  // INTEL_MKL && ENABLE_ONEDNN_V3",
          "content_same": false
        },
        {
          "line": 426,
          "old_api": "Lookup",
          "new_api": null,
          "old_text": "xla::CustomCallTargetRegistry::Global()->Lookup(stripped_name, \"Host\")",
          "new_text": null,
          "old_line_content": "        xla::CustomCallTargetRegistry::Global()->Lookup(stripped_name, \"Host\");",
          "new_line_content": "    // On Mac OS X, 'name' may have a leading underscore prefix, even though the",
          "content_same": false
        },
        {
          "line": 429,
          "old_api": "str",
          "new_api": null,
          "old_text": "name.str()",
          "new_text": null,
          "old_line_content": "        xla::CustomCallTargetRegistry::Global()->Lookup(name.str(), \"Host\");",
          "new_line_content": "    func_addr =",
          "content_same": false
        },
        {
          "line": 302,
          "old_api": "end",
          "new_api": null,
          "old_text": "attrs.end()",
          "new_text": null,
          "old_line_content": "  llvm::SmallVector<std::string, 0> llvm_attrs(attrs.begin(), attrs.end());",
          "new_line_content": "  // Default preference is 256-bit vectorization because of the attribute",
          "content_same": false
        },
        {
          "line": 304,
          "old_api": "setTargetOptions",
          "new_api": null,
          "old_text": "llvm::EngineBuilder()\n          .setTargetOptions(target_options)\n          .setOptLevel(opt_level)\n          .selectTarget(\n              /*TargetTriple=*/llvm::Triple(), /*MArch=*/\"\",\n              /*MCPU=*/llvm::sys::getHostCPUName(),\n              /*MAttrs=*/llvm_attrs)",
          "new_text": null,
          "old_line_content": "      llvm::EngineBuilder()",
          "new_line_content": "  // for higher target machine features, for example, avx-512 vectorization.",
          "content_same": false
        },
        {
          "line": 434,
          "old_api": "str",
          "new_api": null,
          "old_text": "name.str()",
          "new_text": null,
          "old_line_content": "        << \"Unable to resolve runtime symbol: `\" << name.str()",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 564,
          "old_api": "reinterpret_cast<void*>(__powidf2)",
          "new_api": null,
          "old_text": "reinterpret_cast<void*>(__powidf2)",
          "new_text": null,
          "old_line_content": "  registry->Register(\"__powidf2\", reinterpret_cast<void*>(__powidf2), \"Host\");",
          "new_line_content": "                     \"Host\");",
          "content_same": false
        },
        {
          "line": 309,
          "old_api": "llvm::sys::getHostCPUName()",
          "new_api": null,
          "old_text": "llvm::sys::getHostCPUName()",
          "new_text": null,
          "old_line_content": "              /*MCPU=*/llvm::sys::getHostCPUName(),",
          "new_line_content": "          .setTargetOptions(target_options)",
          "content_same": false
        },
        {
          "line": 311,
          "old_api": "CHECK",
          "new_api": null,
          "old_text": "CHECK(target_machine != nullptr)",
          "new_text": null,
          "old_line_content": "  CHECK(target_machine != nullptr);",
          "new_line_content": "          .selectTarget(",
          "content_same": false
        },
        {
          "line": 440,
          "old_api": "reinterpret_cast<uint64_t>(func_addr)",
          "new_api": null,
          "old_text": "reinterpret_cast<uint64_t>(func_addr)",
          "new_text": null,
          "old_line_content": "  return {llvm::orc::ExecutorAddr(reinterpret_cast<uint64_t>(func_addr)),",
          "new_line_content": "           \"registered it with the JIT using \"",
          "content_same": false
        },
        {
          "line": 448,
          "old_api": "notifyObjectLoaded",
          "new_api": null,
          "old_text": "gdb_jit_event_listener_->notifyObjectLoaded(key, object, object_info)",
          "new_text": null,
          "old_line_content": "  gdb_jit_event_listener_->notifyObjectLoaded(key, object, object_info);",
          "new_line_content": "void SimpleOrcJIT::notifyObjectLoaded(",
          "content_same": false
        },
        {
          "line": 449,
          "old_api": "getData",
          "new_api": null,
          "old_text": "object.getData().size()",
          "new_text": null,
          "old_line_content": "  size_of_generated_code_in_bytes_ += object.getData().size();",
          "new_line_content": "    llvm::JITEventListener::ObjectKey key,",
          "content_same": false
        },
        {
          "line": 324,
          "old_api": "InferTargetMachineForJIT",
          "new_api": null,
          "old_text": "InferTargetMachineForJIT(target_options, opt_level)",
          "new_text": null,
          "old_line_content": "    : target_machine_(InferTargetMachineForJIT(target_options, opt_level)),",
          "new_line_content": "    bool disable_slp_vectorizer, llvm::FastMathFlags fast_math_flags,",
          "content_same": false
        },
        {
          "line": 325,
          "old_api": "getTargetTriple",
          "new_api": null,
          "old_text": "target_machine_->getTargetTriple()",
          "new_text": null,
          "old_line_content": "      target_triple_(target_machine_->getTargetTriple()),",
          "new_line_content": "    LLVMCompiler::ModuleHook pre_optimization_hook,",
          "content_same": false
        },
        {
          "line": 326,
          "old_api": "createDataLayout",
          "new_api": null,
          "old_text": "target_machine_->createDataLayout()",
          "new_text": null,
          "old_line_content": "      data_layout_(target_machine_->createDataLayout()),",
          "new_line_content": "    LLVMCompiler::ModuleHook post_optimization_hook,",
          "content_same": false
        },
        {
          "line": 327,
          "old_api": "std::move(target_process_control)",
          "new_api": null,
          "old_text": "std::move(target_process_control)",
          "new_text": null,
          "old_line_content": "      target_process_control_(std::move(target_process_control)),",
          "new_line_content": "    absl::AnyInvocable<void(const llvm::object::ObjectFile&)> post_codegen_hook)",
          "content_same": false
        },
        {
          "line": 458,
          "old_api": "std::move(obj_file)",
          "new_api": null,
          "old_text": "std::move(obj_file)",
          "new_text": null,
          "old_line_content": "  return object_layer_.add(*main_jit_dylib_, std::move(obj_file));",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 337,
          "old_api": "static_cast<int>(opt_level)",
          "new_api": null,
          "old_text": "static_cast<int>(opt_level)",
          "new_text": null,
          "old_line_content": "              target_machine_.get(), static_cast<int>(opt_level),",
          "new_line_content": "                    }),",
          "content_same": false
        },
        {
          "line": 468,
          "old_api": "reset",
          "new_api": null,
          "old_text": "target_machine_.reset()",
          "new_text": null,
          "old_line_content": "  target_machine_.reset();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 342,
          "old_api": "createBareJITDylib",
          "new_api": null,
          "old_text": "execution_session_->createBareJITDylib(\"<main>\")",
          "new_text": null,
          "old_line_content": "      main_jit_dylib_(&execution_session_->createBareJITDylib(\"<main>\")),",
          "new_line_content": "              optimize_for_size, disable_expensive_passes,",
          "content_same": false
        },
        {
          "line": 473,
          "old_api": "lookup",
          "new_api": null,
          "old_text": "execution_session_->lookup({main_jit_dylib_}, name)",
          "new_text": null,
          "old_line_content": "  return execution_session_->lookup({main_jit_dylib_}, name);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 347,
          "old_api": "str",
          "new_api": null,
          "old_text": "target_machine_->getTargetCPU().str()",
          "new_text": null,
          "old_line_content": "  VLOG(1) << \"CPU target: \" << target_machine_->getTargetCPU().str()",
          "new_line_content": "      gdb_jit_event_listener_(",
          "content_same": false
        },
        {
          "line": 355,
          "old_api": "explicit",
          "new_api": null,
          "old_text": "explicit",
          "new_text": null,
          "old_line_content": "    explicit RuntimeSymbolGenerator(SimpleOrcJIT& jit) : jit_(jit) {}",
          "new_line_content": "  class RuntimeSymbolGenerator : public llvm::orc::DefinitionGenerator {",
          "content_same": false
        },
        {
          "line": 486,
          "old_api": "xla::CustomCallTargetRegistry::Global()",
          "new_api": null,
          "old_text": "xla::CustomCallTargetRegistry::Global()",
          "new_text": null,
          "old_line_content": "      xla::CustomCallTargetRegistry::Global();",
          "new_line_content": "namespace {",
          "content_same": false
        },
        {
          "line": 487,
          "old_api": "reinterpret_cast<void*>(&printf)",
          "new_api": null,
          "old_text": "reinterpret_cast<void*>(&printf)",
          "new_text": null,
          "old_line_content": "  registry->Register(\"printf\", reinterpret_cast<void*>(&printf), \"Host\");",
          "new_line_content": "// Register some known symbols with the CustomCallTargetRegistry.",
          "content_same": false
        },
        {
          "line": 488,
          "old_api": "reinterpret_cast<void*>(&puts)",
          "new_api": null,
          "old_text": "reinterpret_cast<void*>(&puts)",
          "new_text": null,
          "old_line_content": "  registry->Register(\"puts\", reinterpret_cast<void*>(&puts), \"Host\");",
          "new_line_content": "bool RegisterKnownJITSymbols() {",
          "content_same": false
        },
        {
          "line": 364,
          "old_api": "ResolveRuntimeSymbol",
          "new_api": null,
          "old_text": "jit_.ResolveRuntimeSymbol(*name)",
          "new_text": null,
          "old_line_content": "        llvm::orc::ExecutorSymbolDef symbol = jit_.ResolveRuntimeSymbol(*name);",
          "new_line_content": "      llvm::orc::SymbolMap new_defs;",
          "content_same": false
        },
        {
          "line": 365,
          "old_api": "getAddress",
          "new_api": null,
          "old_text": "symbol.getAddress()",
          "new_text": null,
          "old_line_content": "        if (symbol.getAddress()) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 370,
          "old_api": "std::move(new_defs)",
          "new_api": null,
          "old_text": "std::move(new_defs)",
          "new_text": null,
          "old_line_content": "      cantFail(jit_dylib.define(absoluteSymbols(std::move(new_defs))));",
          "new_line_content": "          new_defs[name] = symbol;",
          "content_same": false
        },
        {
          "line": 371,
          "old_api": "llvm::Error::success()",
          "new_api": null,
          "old_text": "llvm::Error::success()",
          "new_text": null,
          "old_line_content": "      return llvm::Error::success();",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 500,
          "old_api": "REGISTER_CPU_RUNTIME_SYMBOL",
          "new_api": null,
          "old_text": "REGISTER_CPU_RUNTIME_SYMBOL(AcquireInfeedBufferForDequeue)",
          "new_text": null,
          "old_line_content": "  REGISTER_CPU_RUNTIME_SYMBOL(AcquireInfeedBufferForDequeue);",
          "new_line_content": "    CHECK_EQ(absl::string_view(xla::cpu::runtime::k##base_name##SymbolName), \\",
          "content_same": false
        },
        {
          "line": 501,
          "old_api": "REGISTER_CPU_RUNTIME_SYMBOL",
          "new_api": null,
          "old_text": "REGISTER_CPU_RUNTIME_SYMBOL(AcquireOutfeedBufferForPopulation)",
          "new_text": null,
          "old_line_content": "  REGISTER_CPU_RUNTIME_SYMBOL(AcquireOutfeedBufferForPopulation);",
          "new_line_content": "             \"__xla_cpu_runtime_\" #base_name);                               \\",
          "content_same": false
        },
        {
          "line": 502,
          "old_api": "REGISTER_CPU_RUNTIME_SYMBOL",
          "new_api": null,
          "old_text": "REGISTER_CPU_RUNTIME_SYMBOL(AllReduce)",
          "new_text": null,
          "old_line_content": "  REGISTER_CPU_RUNTIME_SYMBOL(AllReduce);",
          "new_line_content": "  } while (false)",
          "content_same": false
        },
        {
          "line": 503,
          "old_api": "REGISTER_CPU_RUNTIME_SYMBOL",
          "new_api": null,
          "old_text": "REGISTER_CPU_RUNTIME_SYMBOL(CollectivePermute)",
          "new_text": null,
          "old_line_content": "  REGISTER_CPU_RUNTIME_SYMBOL(CollectivePermute);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 376,
          "old_api": "registerJITEventListener",
          "new_api": null,
          "old_text": "object_layer_.registerJITEventListener(*this)",
          "new_text": null,
          "old_line_content": "  object_layer_.registerJITEventListener(*this);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 634,
          "old_api": "Register",
          "new_api": null,
          "old_text": "registry->Register(\"__sincosf_stret\",\n                     reinterpret_cast<void*>(__sincosf_stret), \"Host\")",
          "new_text": null,
          "old_line_content": "  registry->Register(\"__sincosf_stret\",",
          "new_line_content": "  REGISTER_LIBM_SYMBOL(scalbn, double (*)(double, int));",
          "content_same": false
        },
        {
          "line": 635,
          "old_api": "reinterpret_cast<void*>(__sincosf_stret)",
          "new_api": null,
          "old_text": "reinterpret_cast<void*>(__sincosf_stret)",
          "new_text": null,
          "old_line_content": "                     reinterpret_cast<void*>(__sincosf_stret), \"Host\");",
          "new_line_content": "  REGISTER_LIBM_SYMBOL(sin, double (*)(double));",
          "content_same": false
        },
        {
          "line": 636,
          "old_api": "reinterpret_cast<void*>(__sincos_stret)",
          "new_api": null,
          "old_text": "reinterpret_cast<void*>(__sincos_stret)",
          "new_text": null,
          "old_line_content": "  registry->Register(\"__sincos_stret\", reinterpret_cast<void*>(__sincos_stret),",
          "new_line_content": "#ifdef __APPLE__",
          "content_same": false
        },
        {
          "line": 383,
          "old_api": "setOverrideObjectFlagsWithResponsibilityFlags",
          "new_api": null,
          "old_text": "object_layer_.setOverrideObjectFlagsWithResponsibilityFlags(true)",
          "new_text": null,
          "old_line_content": "    object_layer_.setOverrideObjectFlagsWithResponsibilityFlags(true);",
          "new_line_content": "  }",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 32,
      "total_additions": 60,
      "total_deletions": 59,
      "total_api_changes": 151
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 4,
        "api_related_lines": 151,
        "non_api_lines": 1,
        "non_api_line_numbers": [
          303
        ]
      }
    },
    "api_calls_before": 240,
    "api_calls_after": 241,
    "diff_info": {
      "added_lines": 4,
      "removed_lines": 0,
      "total_diff_lines": 16
    }
  }
}
{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/tensorflow/modified_file/6293abccc7cf52de315b3ab665e47624b62fd885",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/tensorflow/modified_file/6293abccc7cf52de315b3ab665e47624b62fd885/before.cc",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/tensorflow/modified_file/6293abccc7cf52de315b3ab665e47624b62fd885/after.cc",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/tensorflow/modified_file/6293abccc7cf52de315b3ab665e47624b62fd885/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 3463,
          "old_api": "FusionReusesParamElements::Compute(operand_num,\n                                                *fused_expression_root())",
          "new_api": "input_count",
          "old_text": "FusionReusesParamElements::Compute(operand_num,\n                                                *fused_expression_root())",
          "new_text": "Cast<HloReduceInstruction>(this)->input_count()",
          "old_line_content": "      return FusionReusesParamElements::Compute(operand_num,",
          "new_line_content": "      return operand_num >= Cast<HloReduceInstruction>(this)->input_count()",
          "content_same": false
        },
        {
          "line": 3468,
          "old_api": "rank",
          "new_api": "FusionReusesParamElements::Compute(operand_num,\n                                                *fused_expression_root())",
          "old_text": "operand(1)->shape().rank()",
          "new_text": "FusionReusesParamElements::Compute(operand_num,\n                                                *fused_expression_root())",
          "old_line_content": "        if ((operand_num == 0 && operand(1)->shape().rank() <= 1) ||",
          "new_line_content": "      return FusionReusesParamElements::Compute(operand_num,",
          "content_same": false
        },
        {
          "line": 3469,
          "old_api": "rank",
          "new_api": "fused_expression_root",
          "old_text": "operand(0)->shape().rank()",
          "new_text": "fused_expression_root()",
          "old_line_content": "            (operand_num == 1 && operand(0)->shape().rank() <= 1)) {",
          "new_line_content": "                                                *fused_expression_root());",
          "content_same": false
        },
        {
          "line": 3537,
          "old_api": "absl::StrAppend(out, item.first, \"=\\\"\", item.second, \"\\\"\")",
          "new_api": "absl::c_sort(sorted_attributes)",
          "old_text": "absl::StrAppend(out, item.first, \"=\\\"\", item.second, \"\\\"\")",
          "new_text": "absl::c_sort(sorted_attributes)",
          "old_line_content": "    absl::StrAppend(out, item.first, \"=\\\"\", item.second, \"\\\"\");",
          "new_line_content": "  absl::c_sort(sorted_attributes);",
          "content_same": false
        },
        {
          "line": 3545,
          "old_api": "dimensions",
          "new_api": "absl::StrJoin(sorted_attributes, \",\", formatter)",
          "old_text": "padding.dimensions()",
          "new_text": "absl::StrJoin(sorted_attributes, \",\", formatter)",
          "old_line_content": "      absl::c_any_of(padding.dimensions(),",
          "new_line_content": "                         absl::StrJoin(sorted_attributes, \",\", formatter));",
          "content_same": false
        },
        {
          "line": 3552,
          "old_api": "edge_padding_low",
          "new_api": "interior_padding",
          "old_text": "StrAppend(\n            out, dim.edge_padding_low(), \"_\", dim.edge_padding_high(),\n            has_interior_padding ? StrCat(\"_\", dim.interior_padding()) : \"\")",
          "new_text": "dim.interior_padding()",
          "old_line_content": "        StrAppend(",
          "new_line_content": "                       return dim.interior_padding() != 0;",
          "content_same": false
        },
        {
          "line": 3554,
          "old_api": "interior_padding",
          "new_api": "dimensions",
          "old_text": "dim.interior_padding()",
          "new_text": "StrJoin(\n      padding.dimensions(), \"x\",\n      [&](string* out, const PaddingConfig::PaddingConfigDimension& dim) {\n        StrAppend(\n            out, dim.edge_padding_low(), \"_\", dim.edge_padding_high(),\n            has_interior_padding ? StrCat(\"_\", dim.interior_padding()) : \"\");\n      })",
          "old_line_content": "            has_interior_padding ? StrCat(\"_\", dim.interior_padding()) : \"\");",
          "new_line_content": "  return StrJoin(",
          "content_same": false
        },
        {
          "line": 3566,
          "old_api": "source_file",
          "new_api": "op_type",
          "old_text": "metadata.source_file().empty()",
          "new_text": "metadata.op_type()",
          "old_line_content": "  if (!metadata.source_file().empty()) {",
          "new_line_content": "    result.push_back(StrCat(\"op_type=\\\"\", CEscape(metadata.op_type()), \"\\\"\"));",
          "content_same": false
        },
        {
          "line": 3568,
          "old_api": "source_file",
          "new_api": "op_name",
          "old_text": "metadata.source_file()",
          "new_text": "metadata.op_name().empty()",
          "old_line_content": "        StrCat(\"source_file=\\\"\", CEscape(metadata.source_file()), \"\\\"\"));",
          "new_line_content": "  if (!metadata.op_name().empty()) {",
          "content_same": false
        },
        {
          "line": 3571,
          "old_api": "source_line",
          "new_api": "source_file",
          "old_text": "metadata.source_line()",
          "new_text": "metadata.source_file().empty()",
          "old_line_content": "    result.push_back(StrCat(\"source_line=\", metadata.source_line()));",
          "new_line_content": "  if (!metadata.source_file().empty()) {",
          "content_same": false
        },
        {
          "line": 3573,
          "old_api": "StrJoin",
          "new_api": "source_file",
          "old_text": "StrJoin(result, \" \")",
          "new_text": "metadata.source_file()",
          "old_line_content": "  return StrJoin(result, \" \");",
          "new_line_content": "        StrCat(\"source_file=\\\"\", CEscape(metadata.source_file()), \"\\\"\"));",
          "content_same": false
        },
        {
          "line": 3598,
          "old_api": "kernel_spatial_dimensions",
          "new_api": "input_feature_dimension",
          "old_text": "dnums.kernel_spatial_dimensions().size()",
          "new_text": "dnums.input_feature_dimension()",
          "old_line_content": "  std::vector<string> rhs_dims(2 + dnums.kernel_spatial_dimensions().size());",
          "new_line_content": "  lhs_dims[dnums.input_feature_dimension()] = 'f';",
          "content_same": false
        },
        {
          "line": 3599,
          "old_api": "kernel_input_feature_dimension",
          "new_api": "input_spatial_dimensions",
          "old_text": "dnums.kernel_input_feature_dimension()",
          "new_text": "dnums.input_spatial_dimensions().size()",
          "old_line_content": "  rhs_dims[dnums.kernel_input_feature_dimension()] = \"i\";",
          "new_line_content": "  for (int64 i = 0; i < dnums.input_spatial_dimensions().size(); ++i) {",
          "content_same": false
        },
        {
          "line": 3600,
          "old_api": "kernel_output_feature_dimension",
          "new_api": "StrCat",
          "old_text": "dnums.kernel_output_feature_dimension()",
          "new_text": "StrCat(i)",
          "old_line_content": "  rhs_dims[dnums.kernel_output_feature_dimension()] = \"o\";",
          "new_line_content": "    lhs_dims[dnums.input_spatial_dimensions(i)] = StrCat(i);",
          "content_same": false
        },
        {
          "line": 3605,
          "old_api": "output_spatial_dimensions",
          "new_api": "kernel_output_feature_dimension",
          "old_text": "dnums.output_spatial_dimensions().size()",
          "new_text": "dnums.kernel_output_feature_dimension()",
          "old_line_content": "  std::vector<string> output_dims(2 + dnums.output_spatial_dimensions().size());",
          "new_line_content": "  rhs_dims[dnums.kernel_output_feature_dimension()] = \"o\";",
          "content_same": false
        },
        {
          "line": 3606,
          "old_api": "output_batch_dimension",
          "new_api": "kernel_spatial_dimensions",
          "old_text": "dnums.output_batch_dimension()",
          "new_text": "dnums.kernel_spatial_dimensions().size()",
          "old_line_content": "  output_dims[dnums.output_batch_dimension()] = 'b';",
          "new_line_content": "  for (int64 i = 0; i < dnums.kernel_spatial_dimensions().size(); ++i) {",
          "content_same": false
        },
        {
          "line": 3607,
          "old_api": "output_feature_dimension",
          "new_api": "StrCat",
          "old_text": "dnums.output_feature_dimension()",
          "new_text": "StrCat(i)",
          "old_line_content": "  output_dims[dnums.output_feature_dimension()] = 'f';",
          "new_line_content": "    rhs_dims[dnums.kernel_spatial_dimensions(i)] = StrCat(i);",
          "content_same": false
        },
        {
          "line": 3612,
          "old_api": "StrJoin",
          "new_api": "output_feature_dimension",
          "old_text": "StrJoin(rhs_dims, \"\")",
          "new_text": "dnums.output_feature_dimension()",
          "old_line_content": "  return StrCat(StrJoin(lhs_dims, \"\"), \"_\", StrJoin(rhs_dims, \"\"), \"->\",",
          "new_line_content": "  output_dims[dnums.output_feature_dimension()] = 'f';",
          "content_same": false
        },
        {
          "line": 3613,
          "old_api": "StrJoin",
          "new_api": "output_spatial_dimensions",
          "old_text": "StrJoin(output_dims, \"\")",
          "new_text": "dnums.output_spatial_dimensions().size()",
          "old_line_content": "                StrJoin(output_dims, \"\"));",
          "new_line_content": "  for (int64 i = 0; i < dnums.output_spatial_dimensions().size(); ++i) {",
          "content_same": false
        },
        {
          "line": 3618,
          "old_api": "size",
          "new_api": "StrJoin",
          "old_text": "replica_groups.size()",
          "new_text": "StrJoin(output_dims, \"\")",
          "old_line_content": "  replica_group_str.reserve(replica_groups.size());",
          "new_line_content": "                StrJoin(output_dims, \"\"));",
          "content_same": false
        },
        {
          "line": 3623,
          "old_api": "StrJoin",
          "new_api": "size",
          "old_text": "StrJoin(replica_group_str, \",\")",
          "new_text": "replica_groups.size()",
          "old_line_content": "  return StrCat(\"{\", StrJoin(replica_group_str, \",\"), \"}\");",
          "new_line_content": "  replica_group_str.reserve(replica_groups.size());",
          "content_same": false
        },
        {
          "line": 3632,
          "old_api": "RandomAlgorithmToString",
          "new_api": "[] {\n    static auto* map = new std::unordered_map<string, RandomAlgorithm>;\n    for (int i = 0; i < RandomAlgorithm_ARRAYSIZE; i++) {\n      if (RandomAlgorithm_IsValid(i)) {\n        auto value = static_cast<RandomAlgorithm>(i);\n        (*map)[RandomAlgorithmToString(value)] = value;\n      }\n    }\n    return map;\n  }()",
          "old_text": "RandomAlgorithmToString(value)",
          "new_text": "[] {\n    static auto* map = new std::unordered_map<string, RandomAlgorithm>;\n    for (int i = 0; i < RandomAlgorithm_ARRAYSIZE; i++) {\n      if (RandomAlgorithm_IsValid(i)) {\n        auto value = static_cast<RandomAlgorithm>(i);\n        (*map)[RandomAlgorithmToString(value)] = value;\n      }\n    }\n    return map;\n  }()",
          "old_line_content": "        (*map)[RandomAlgorithmToString(value)] = value;",
          "new_line_content": "  static std::unordered_map<string, RandomAlgorithm>* map = [] {",
          "content_same": false
        },
        {
          "line": 3637,
          "old_api": "absl::AsciiStrToLower(name)",
          "new_api": "RandomAlgorithmToString",
          "old_text": "absl::AsciiStrToLower(name)",
          "new_text": "RandomAlgorithmToString(value)",
          "old_line_content": "  auto found = map->find(absl::AsciiStrToLower(name));",
          "new_line_content": "        (*map)[RandomAlgorithmToString(value)] = value;",
          "content_same": false
        },
        {
          "line": 3650,
          "old_api": "RandomDistributionToString",
          "new_api": "[] {\n    static auto* map = new std::unordered_map<string, RandomDistribution>;\n    for (int i = 0; i < RandomDistribution_ARRAYSIZE; i++) {\n      if (RandomDistribution_IsValid(i)) {\n        auto value = static_cast<RandomDistribution>(i);\n        (*map)[RandomDistributionToString(value)] = value;\n      }\n    }\n    return map;\n  }()",
          "old_text": "RandomDistributionToString(value)",
          "new_text": "[] {\n    static auto* map = new std::unordered_map<string, RandomDistribution>;\n    for (int i = 0; i < RandomDistribution_ARRAYSIZE; i++) {\n      if (RandomDistribution_IsValid(i)) {\n        auto value = static_cast<RandomDistribution>(i);\n        (*map)[RandomDistributionToString(value)] = value;\n      }\n    }\n    return map;\n  }()",
          "old_line_content": "        (*map)[RandomDistributionToString(value)] = value;",
          "new_line_content": "  static std::unordered_map<string, RandomDistribution>* map = [] {",
          "content_same": false
        },
        {
          "line": 3655,
          "old_api": "absl::AsciiStrToLower(name)",
          "new_api": "RandomDistributionToString",
          "old_text": "absl::AsciiStrToLower(name)",
          "new_text": "RandomDistributionToString(value)",
          "old_line_content": "  auto found = map->find(absl::AsciiStrToLower(name));",
          "new_line_content": "        (*map)[RandomDistributionToString(value)] = value;",
          "content_same": false
        },
        {
          "line": 3668,
          "old_api": "static_cast<PrecisionConfig::Precision>(i)",
          "new_api": "[] {\n    static auto* map =\n        new std::unordered_map<string, PrecisionConfig::Precision>;\n    for (int i = 0; i < PrecisionConfig::Precision_ARRAYSIZE; i++) {\n      if (PrecisionConfig::Precision_IsValid(i)) {\n        auto value = static_cast<PrecisionConfig::Precision>(i);\n        (*map)[PrecisionToString(value)] = value;\n      }\n    }\n    return map;\n  }()",
          "old_text": "static_cast<PrecisionConfig::Precision>(i)",
          "new_text": "[] {\n    static auto* map =\n        new std::unordered_map<string, PrecisionConfig::Precision>;\n    for (int i = 0; i < PrecisionConfig::Precision_ARRAYSIZE; i++) {\n      if (PrecisionConfig::Precision_IsValid(i)) {\n        auto value = static_cast<PrecisionConfig::Precision>(i);\n        (*map)[PrecisionToString(value)] = value;\n      }\n    }\n    return map;\n  }()",
          "old_line_content": "        auto value = static_cast<PrecisionConfig::Precision>(i);",
          "new_line_content": "  static std::unordered_map<string, PrecisionConfig::Precision>* map = [] {",
          "content_same": false
        },
        {
          "line": 3674,
          "old_api": "absl::AsciiStrToLower(name)",
          "new_api": "PrecisionToString",
          "old_text": "absl::AsciiStrToLower(name)",
          "new_text": "PrecisionToString(value)",
          "old_line_content": "  auto found = map->find(absl::AsciiStrToLower(name));",
          "new_line_content": "        (*map)[PrecisionToString(value)] = value;",
          "content_same": false
        },
        {
          "line": 3699,
          "old_api": "unique_id",
          "new_api": "GetModule",
          "old_text": "rhs_module->unique_id()",
          "new_text": "lhs->GetModule()",
          "old_line_content": "      lhs_module->unique_id() != rhs_module->unique_id()) {",
          "new_line_content": "  auto lhs_module = lhs->GetModule();",
          "content_same": false
        },
        {
          "line": 3700,
          "old_api": "unique_id",
          "new_api": "GetModule",
          "old_text": "rhs_module->unique_id()",
          "new_text": "rhs->GetModule()",
          "old_line_content": "    return lhs_module->unique_id() < rhs_module->unique_id();",
          "new_line_content": "  auto rhs_module = rhs->GetModule();",
          "content_same": false
        },
        {
          "line": 3707,
          "old_api": "Clear",
          "new_api": "unique_id",
          "old_text": "proto->Clear()",
          "new_text": "rhs->unique_id()",
          "old_line_content": "  proto->Clear();",
          "new_line_content": "  return lhs->unique_id() < rhs->unique_id();",
          "content_same": false
        },
        {
          "line": 3712,
          "old_api": "Status::OK()",
          "new_api": "Clear",
          "old_text": "Status::OK()",
          "new_text": "proto->Clear()",
          "old_line_content": "    return Status::OK();",
          "new_line_content": "  proto->Clear();",
          "content_same": false
        },
        {
          "line": 3719,
          "old_api": "BackendConfigToRawString",
          "new_api": "tensorflow::HumanReadableJsonToProto(backend_config_, proto)",
          "old_text": "BackendConfigToRawString(proto)",
          "new_text": "tensorflow::HumanReadableJsonToProto(backend_config_, proto)",
          "old_line_content": "  TF_ASSIGN_OR_RETURN(backend_config_, BackendConfigToRawString(proto));",
          "new_line_content": "  return tensorflow::HumanReadableJsonToProto(backend_config_, proto);",
          "content_same": false
        },
        {
          "line": 3742,
          "old_api": "LOG",
          "new_api": "precision_config",
          "old_text": "LOG(FATAL)",
          "new_text": "convolution->precision_config()",
          "old_line_content": "  LOG(FATAL) << \"Unimplemented method.\";",
          "new_line_content": "    return convolution->precision_config();",
          "content_same": false
        },
        {
          "line": 3747,
          "old_api": "mutable_precision_config",
          "new_api": "LOG",
          "old_text": "convolution->mutable_precision_config()",
          "new_text": "LOG(FATAL)",
          "old_line_content": "    return convolution->mutable_precision_config();",
          "new_line_content": "  LOG(FATAL) << \"Unimplemented method.\";",
          "content_same": false
        },
        {
          "line": 3752,
          "old_api": "LOG",
          "new_api": "mutable_precision_config",
          "old_text": "LOG(FATAL)",
          "new_text": "convolution->mutable_precision_config()",
          "old_line_content": "  LOG(FATAL) << \"Unimplemented method.\";",
          "new_line_content": "    return convolution->mutable_precision_config();",
          "content_same": false
        },
        {
          "line": 3757,
          "old_api": "parent",
          "new_api": "LOG",
          "old_text": "parent_->parent()",
          "new_text": "LOG(FATAL)",
          "old_line_content": "    return parent_->parent();",
          "new_line_content": "  LOG(FATAL) << \"Unimplemented method.\";",
          "content_same": false
        },
        {
          "line": 3795,
          "old_api": "dimension",
          "new_api": "concatenate_dimension",
          "old_text": "set_size->dimension()",
          "new_text": "Cast<HloConcatenateInstruction>(this)->concatenate_dimension()",
          "old_line_content": "    return set_size->dimension();",
          "new_line_content": "  return Cast<HloConcatenateInstruction>(this)->concatenate_dimension();",
          "content_same": false
        },
        {
          "line": 3806,
          "old_api": "IsRank2Transpose",
          "new_api": "inferred_dimension",
          "old_text": "transpose->IsRank2Transpose()",
          "new_text": "Cast<HloReshapeInstruction>(this)->inferred_dimension()",
          "old_line_content": "  return transpose != nullptr && transpose->IsRank2Transpose();",
          "new_line_content": "  return Cast<HloReshapeInstruction>(this)->inferred_dimension();",
          "content_same": false
        },
        {
          "line": 3810,
          "old_api": "slice_starts",
          "new_api": "DynCast<HloTransposeInstruction>(this)",
          "old_text": "Cast<HloSliceInstruction>(this)->slice_starts(dimension)",
          "new_text": "DynCast<HloTransposeInstruction>(this)",
          "old_line_content": "  return Cast<HloSliceInstruction>(this)->slice_starts(dimension);",
          "new_line_content": "  auto transpose = DynCast<HloTransposeInstruction>(this);",
          "content_same": false
        },
        {
          "line": 3855,
          "old_api": "RelayoutConstant",
          "new_api": "DynCast<HloConstantInstruction>(this)",
          "old_text": "Cast<HloConstantInstruction>(this)->RelayoutConstant(new_layout, shape_index)",
          "new_text": "DynCast<HloConstantInstruction>(this)",
          "old_line_content": "  Cast<HloConstantInstruction>(this)->RelayoutConstant(new_layout, shape_index);",
          "new_line_content": "  return DynCast<HloConstantInstruction>(this) != nullptr;",
          "content_same": false
        },
        {
          "line": 3883,
          "old_api": "FuseInstruction",
          "new_api": "Cast<HloFusionInstruction>(instruction_to_merge)",
          "old_text": "Cast<HloFusionInstruction>(this)->FuseInstruction(instruction_to_fuse)",
          "new_text": "Cast<HloFusionInstruction>(instruction_to_merge)",
          "old_line_content": "  return Cast<HloFusionInstruction>(this)->FuseInstruction(instruction_to_fuse);",
          "new_line_content": "          Cast<HloFusionInstruction>(instruction_to_merge));",
          "content_same": false
        },
        {
          "line": 3888,
          "old_api": "FuseInstructionIntoMultiOutput",
          "new_api": "FuseInstruction",
          "old_text": "Cast<HloFusionInstruction>(this)->FuseInstructionIntoMultiOutput(\n      instruction_to_fuse)",
          "new_text": "Cast<HloFusionInstruction>(this)->FuseInstruction(instruction_to_fuse)",
          "old_line_content": "  return Cast<HloFusionInstruction>(this)->FuseInstructionIntoMultiOutput(",
          "new_line_content": "  return Cast<HloFusionInstruction>(this)->FuseInstruction(instruction_to_fuse);",
          "content_same": false
        },
        {
          "line": 3893,
          "old_api": "fused_instructions_computation",
          "new_api": "FuseInstructionIntoMultiOutput",
          "old_text": "Cast<HloFusionInstruction>(this)->fused_instructions_computation()",
          "new_text": "Cast<HloFusionInstruction>(this)->FuseInstructionIntoMultiOutput(\n      instruction_to_fuse)",
          "old_line_content": "  return Cast<HloFusionInstruction>(this)->fused_instructions_computation();",
          "new_line_content": "  return Cast<HloFusionInstruction>(this)->FuseInstructionIntoMultiOutput(",
          "content_same": false
        },
        {
          "line": 3926,
          "old_api": "IsMultiOutputFusion",
          "new_api": "fused_parameters",
          "old_text": "fusion->IsMultiOutputFusion()",
          "new_text": "Cast<HloFusionInstruction>(this)->fused_parameters()",
          "old_line_content": "  return fusion != nullptr && fusion->IsMultiOutputFusion();",
          "new_line_content": "  return Cast<HloFusionInstruction>(this)->fused_parameters();",
          "content_same": false
        },
        {
          "line": 3930,
          "old_api": "fusion_kind",
          "new_api": "DynCast<HloFusionInstruction>(this)",
          "old_text": "Cast<HloFusionInstruction>(this)->fusion_kind()",
          "new_text": "DynCast<HloFusionInstruction>(this)",
          "old_line_content": "  return Cast<HloFusionInstruction>(this)->fusion_kind();",
          "new_line_content": "  const HloFusionInstruction* fusion = DynCast<HloFusionInstruction>(this);",
          "content_same": false
        },
        {
          "line": 3947,
          "old_api": "set_parameter_replicated_at_leaf_buffers",
          "new_api": "parameter_number",
          "old_text": "Cast<HloParameterInstruction>(this)\n      ->set_parameter_replicated_at_leaf_buffers(\n          parameter_replicated_at_leaf_buffers)",
          "new_text": "Cast<HloParameterInstruction>(this)->parameter_number()",
          "old_line_content": "  return Cast<HloParameterInstruction>(this)",
          "new_line_content": "  return Cast<HloParameterInstruction>(this)->parameter_number();",
          "content_same": false
        },
        {
          "line": 3966,
          "old_api": "tuple_index",
          "new_api": "parameter_replicated_at_leaf_buffers",
          "old_text": "Cast<HloGetTupleElementInstruction>(this)->tuple_index()",
          "new_text": "Cast<HloParameterInstruction>(this)\n      ->parameter_replicated_at_leaf_buffers()",
          "old_line_content": "  return Cast<HloGetTupleElementInstruction>(this)->tuple_index();",
          "new_line_content": "  return Cast<HloParameterInstruction>(this)",
          "content_same": false
        },
        {
          "line": 3975,
          "old_api": "exponent_bits",
          "new_api": "set_tuple_index",
          "old_text": "Cast<HloReducePrecisionInstruction>(this)->exponent_bits()",
          "new_text": "Cast<HloGetTupleElementInstruction>(this)->set_tuple_index(\n      new_tuple_index)",
          "old_line_content": "  return Cast<HloReducePrecisionInstruction>(this)->exponent_bits();",
          "new_line_content": "  return Cast<HloGetTupleElementInstruction>(this)->set_tuple_index(",
          "content_same": false
        },
        {
          "line": 4008,
          "old_api": "source_target_pairs",
          "new_api": "replica_groups",
          "old_text": "Cast<HloCollectivePermuteInstruction>(this)->source_target_pairs()",
          "new_text": "Cast<HloCollectiveInstruction>(this)->replica_groups()",
          "old_line_content": "  return Cast<HloCollectivePermuteInstruction>(this)->source_target_pairs();",
          "new_line_content": "  return Cast<HloCollectiveInstruction>(this)->replica_groups();",
          "content_same": false
        },
        {
          "line": 4021,
          "old_api": "DynCast<HloConvolutionInstruction>(this)",
          "new_api": "set_channel_id",
          "old_text": "DynCast<HloConvolutionInstruction>(this)",
          "new_text": "Cast<HloChannelInstruction>(this)->set_channel_id(channel_id)",
          "old_line_content": "  if (auto convolution = DynCast<HloConvolutionInstruction>(this)) {",
          "new_line_content": "  return Cast<HloChannelInstruction>(this)->set_channel_id(channel_id);",
          "content_same": false
        },
        {
          "line": 4027,
          "old_api": "LOG",
          "new_api": "convolution_dimension_numbers",
          "old_text": "LOG(FATAL)",
          "new_text": "convolution->convolution_dimension_numbers()",
          "old_line_content": "  LOG(FATAL) << \"Unimplemented method.\";",
          "new_line_content": "    return convolution->convolution_dimension_numbers();",
          "content_same": false
        },
        {
          "line": 4032,
          "old_api": "DynCast<HloConvolutionInstruction>(this)",
          "new_api": "LOG",
          "old_text": "DynCast<HloConvolutionInstruction>(this)",
          "new_text": "LOG(FATAL)",
          "old_line_content": "  if (auto convolution = DynCast<HloConvolutionInstruction>(this)) {",
          "new_line_content": "  LOG(FATAL) << \"Unimplemented method.\";",
          "content_same": false
        },
        {
          "line": 4037,
          "old_api": "LOG",
          "new_api": "DynCast<HloConvolutionInstruction>(this)",
          "old_text": "LOG(FATAL)",
          "new_text": "DynCast<HloConvolutionInstruction>(this)",
          "old_line_content": "    LOG(FATAL) << \"Unimplemented method.\";",
          "new_line_content": "  if (auto convolution = DynCast<HloConvolutionInstruction>(this)) {",
          "content_same": false
        },
        {
          "line": 4042,
          "old_api": "DynCast<HloConvolutionInstruction>(this)",
          "new_api": "LOG",
          "old_text": "DynCast<HloConvolutionInstruction>(this)",
          "new_text": "LOG(FATAL)",
          "old_line_content": "  if (auto convolution = DynCast<HloConvolutionInstruction>(this)) {",
          "new_line_content": "    LOG(FATAL) << \"Unimplemented method.\";",
          "content_same": false
        },
        {
          "line": 4050,
          "old_api": "set_feature_group_count",
          "new_api": "feature_group_count",
          "old_text": "convolution->set_feature_group_count(feature_group_count)",
          "new_text": "Cast<HloCustomCallInstruction>(this)->feature_group_count()",
          "old_line_content": "    return convolution->set_feature_group_count(feature_group_count);",
          "new_line_content": "  return Cast<HloCustomCallInstruction>(this)->feature_group_count();",
          "content_same": false
        },
        {
          "line": 4057,
          "old_api": "DynCast<HloConvolutionInstruction>(this)",
          "new_api": "set_feature_group_count",
          "old_text": "DynCast<HloConvolutionInstruction>(this)",
          "new_text": "Cast<HloCustomCallInstruction>(this)->set_feature_group_count(\n      feature_group_count)",
          "old_line_content": "  if (auto convolution = DynCast<HloConvolutionInstruction>(this)) {",
          "new_line_content": "  Cast<HloCustomCallInstruction>(this)->set_feature_group_count(",
          "content_same": false
        },
        {
          "line": 4065,
          "old_api": "set_batch_group_count",
          "new_api": "batch_group_count",
          "old_text": "convolution->set_batch_group_count(batch_group_count)",
          "new_text": "Cast<HloCustomCallInstruction>(this)->batch_group_count()",
          "old_line_content": "    return convolution->set_batch_group_count(batch_group_count);",
          "new_line_content": "  return Cast<HloCustomCallInstruction>(this)->batch_group_count();",
          "content_same": false
        },
        {
          "line": 4072,
          "old_api": "select",
          "new_api": "set_batch_group_count",
          "old_text": "Cast<HloSelectAndScatterInstruction>(this)->select()",
          "new_text": "Cast<HloCustomCallInstruction>(this)->set_batch_group_count(\n      batch_group_count)",
          "old_line_content": "  return Cast<HloSelectAndScatterInstruction>(this)->select();",
          "new_line_content": "  Cast<HloCustomCallInstruction>(this)->set_batch_group_count(",
          "content_same": false
        },
        {
          "line": 4117,
          "old_api": "scatter_dimension_numbers",
          "new_api": "gather_slice_sizes",
          "old_text": "Cast<HloScatterInstruction>(this)->scatter_dimension_numbers()",
          "new_text": "Cast<HloGatherInstruction>(this)->gather_slice_sizes()",
          "old_line_content": "  return Cast<HloScatterInstruction>(this)->scatter_dimension_numbers();",
          "new_line_content": "  return Cast<HloGatherInstruction>(this)->gather_slice_sizes();",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 3585,
          "old_api": null,
          "new_api": "RandomAlgorithm_Name",
          "old_text": null,
          "new_text": "RandomAlgorithm_Name(algorithm)",
          "old_line_content": "}",
          "new_line_content": "  return absl::AsciiStrToLower(RandomAlgorithm_Name(algorithm));",
          "content_same": false
        },
        {
          "line": 4097,
          "old_api": null,
          "new_api": "padding_config",
          "old_text": null,
          "new_text": "Cast<HloPadInstruction>(this)->padding_config()",
          "old_line_content": "}",
          "new_line_content": "  return Cast<HloPadInstruction>(this)->padding_config();",
          "content_same": false
        },
        {
          "line": 3589,
          "old_api": null,
          "new_api": "PrecisionConfig::Precision_Name(precision)",
          "old_text": null,
          "new_text": "PrecisionConfig::Precision_Name(precision)",
          "old_line_content": "  // lhs_dims[i] is the symbol of the logical dimension i for the lhs",
          "new_line_content": "  return absl::AsciiStrToLower(PrecisionConfig::Precision_Name(precision));",
          "content_same": false
        },
        {
          "line": 4101,
          "old_api": null,
          "new_api": "mutable_padding_config",
          "old_text": null,
          "new_text": "Cast<HloPadInstruction>(this)->mutable_padding_config()",
          "old_line_content": "}",
          "new_line_content": "  return Cast<HloPadInstruction>(this)->mutable_padding_config();",
          "content_same": false
        },
        {
          "line": 4105,
          "old_api": null,
          "new_api": "slice_sizes",
          "old_text": null,
          "new_text": "Cast<HloDynamicSliceInstruction>(this)->slice_sizes(dimension)",
          "old_line_content": "}",
          "new_line_content": "  return Cast<HloDynamicSliceInstruction>(this)->slice_sizes(dimension);",
          "content_same": false
        },
        {
          "line": 3596,
          "old_api": null,
          "new_api": "input_spatial_dimensions",
          "old_text": null,
          "new_text": "dnums.input_spatial_dimensions().size()",
          "old_line_content": "  }",
          "new_line_content": "  std::vector<string> lhs_dims(2 + dnums.input_spatial_dimensions().size());",
          "content_same": false
        },
        {
          "line": 3597,
          "old_api": null,
          "new_api": "input_batch_dimension",
          "old_text": null,
          "new_text": "dnums.input_batch_dimension()",
          "old_line_content": "",
          "new_line_content": "  lhs_dims[dnums.input_batch_dimension()] = 'b';",
          "content_same": false
        },
        {
          "line": 4109,
          "old_api": null,
          "new_api": "dynamic_slice_sizes",
          "old_text": null,
          "new_text": "Cast<HloDynamicSliceInstruction>(this)->dynamic_slice_sizes()",
          "old_line_content": "}",
          "new_line_content": "  return Cast<HloDynamicSliceInstruction>(this)->dynamic_slice_sizes();",
          "content_same": false
        },
        {
          "line": 4113,
          "old_api": null,
          "new_api": "gather_dimension_numbers",
          "old_text": null,
          "new_text": "Cast<HloGatherInstruction>(this)->gather_dimension_numbers()",
          "old_line_content": "}",
          "new_line_content": "  return Cast<HloGatherInstruction>(this)->gather_dimension_numbers();",
          "content_same": false
        },
        {
          "line": 3603,
          "old_api": null,
          "new_api": "kernel_spatial_dimensions",
          "old_text": null,
          "new_text": "dnums.kernel_spatial_dimensions().size()",
          "old_line_content": "  }",
          "new_line_content": "  std::vector<string> rhs_dims(2 + dnums.kernel_spatial_dimensions().size());",
          "content_same": false
        },
        {
          "line": 3604,
          "old_api": null,
          "new_api": "kernel_input_feature_dimension",
          "old_text": null,
          "new_text": "dnums.kernel_input_feature_dimension()",
          "old_line_content": "",
          "new_line_content": "  rhs_dims[dnums.kernel_input_feature_dimension()] = \"i\";",
          "content_same": false
        },
        {
          "line": 3610,
          "old_api": null,
          "new_api": "output_spatial_dimensions",
          "old_text": null,
          "new_text": "dnums.output_spatial_dimensions().size()",
          "old_line_content": "  }",
          "new_line_content": "  std::vector<string> output_dims(2 + dnums.output_spatial_dimensions().size());",
          "content_same": false
        },
        {
          "line": 3611,
          "old_api": null,
          "new_api": "output_batch_dimension",
          "old_text": null,
          "new_text": "dnums.output_batch_dimension()",
          "old_line_content": "",
          "new_line_content": "  output_dims[dnums.output_batch_dimension()] = 'b';",
          "content_same": false
        },
        {
          "line": 4122,
          "old_api": null,
          "new_api": "scatter_dimension_numbers",
          "old_text": null,
          "new_text": "Cast<HloScatterInstruction>(this)->scatter_dimension_numbers()",
          "old_line_content": "}",
          "new_line_content": "  return Cast<HloScatterInstruction>(this)->scatter_dimension_numbers();",
          "content_same": false
        },
        {
          "line": 3614,
          "old_api": null,
          "new_api": "StrCat",
          "old_text": null,
          "new_text": "StrCat(i)",
          "old_line_content": "}",
          "new_line_content": "    output_dims[dnums.output_spatial_dimensions(i)] = StrCat(i);",
          "content_same": false
        },
        {
          "line": 4126,
          "old_api": null,
          "new_api": "dot_dimension_numbers",
          "old_text": null,
          "new_text": "Cast<HloDotInstruction>(this)->dot_dimension_numbers()",
          "old_line_content": "}",
          "new_line_content": "  return Cast<HloDotInstruction>(this)->dot_dimension_numbers();",
          "content_same": false
        },
        {
          "line": 3617,
          "old_api": null,
          "new_api": "StrJoin",
          "old_text": null,
          "new_text": "StrJoin(rhs_dims, \"\")",
          "old_line_content": "  std::vector<string> replica_group_str;",
          "new_line_content": "  return StrCat(StrJoin(lhs_dims, \"\"), \"_\", StrJoin(rhs_dims, \"\"), \"->\",",
          "content_same": false
        },
        {
          "line": 4130,
          "old_api": null,
          "new_api": "operand_side_metadata",
          "old_text": null,
          "new_text": "Cast<HloDomainInstruction>(this)->operand_side_metadata()",
          "old_line_content": "}",
          "new_line_content": "  return Cast<HloDomainInstruction>(this)->operand_side_metadata();",
          "content_same": false
        },
        {
          "line": 4134,
          "old_api": null,
          "new_api": "user_side_metadata",
          "old_text": null,
          "new_text": "Cast<HloDomainInstruction>(this)->user_side_metadata()",
          "old_line_content": "}",
          "new_line_content": "  return Cast<HloDomainInstruction>(this)->user_side_metadata();",
          "content_same": false
        },
        {
          "line": 3625,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "replica_group_str.push_back(\n        StrCat(\"{\", StrJoin(group.replica_ids(), \",\"), \"}\"))",
          "old_line_content": "",
          "new_line_content": "    replica_group_str.push_back(",
          "content_same": false
        },
        {
          "line": 3626,
          "old_api": null,
          "new_api": "replica_ids",
          "old_text": null,
          "new_text": "group.replica_ids()",
          "old_line_content": "StatusOr<RandomAlgorithm> StringToRandomAlgorithm(const string& name) {",
          "new_line_content": "        StrCat(\"{\", StrJoin(group.replica_ids(), \",\"), \"}\"));",
          "content_same": false
        },
        {
          "line": 4138,
          "old_api": null,
          "new_api": "is_cross_program_prefetch",
          "old_text": null,
          "new_text": "Cast<HloCopyStartInstruction>(this)->is_cross_program_prefetch()",
          "old_line_content": "}",
          "new_line_content": "  return Cast<HloCopyStartInstruction>(this)->is_cross_program_prefetch();",
          "content_same": false
        },
        {
          "line": 3628,
          "old_api": null,
          "new_api": "StrJoin",
          "old_text": null,
          "new_text": "StrJoin(replica_group_str, \",\")",
          "old_line_content": "    static auto* map = new std::unordered_map<string, RandomAlgorithm>;",
          "new_line_content": "  return StrCat(\"{\", StrJoin(replica_group_str, \",\"), \"}\");",
          "content_same": false
        },
        {
          "line": 4142,
          "old_api": null,
          "new_api": "direction",
          "old_text": null,
          "new_text": "Cast<HloCompareInstruction>(this)->direction()",
          "old_line_content": "}",
          "new_line_content": "  return Cast<HloCompareInstruction>(this)->direction();",
          "content_same": false
        },
        {
          "line": 4146,
          "old_api": null,
          "new_api": "triangular_solve_options",
          "old_text": null,
          "new_text": "Cast<HloTriangularSolveInstruction>(this)->triangular_solve_options()",
          "old_line_content": "}",
          "new_line_content": "  return Cast<HloTriangularSolveInstruction>(this)->triangular_solve_options();",
          "content_same": false
        },
        {
          "line": 3635,
          "old_api": null,
          "new_api": "RandomAlgorithm_IsValid",
          "old_text": null,
          "new_text": "RandomAlgorithm_IsValid(i)",
          "old_line_content": "    return map;",
          "new_line_content": "      if (RandomAlgorithm_IsValid(i)) {",
          "content_same": false
        },
        {
          "line": 3636,
          "old_api": null,
          "new_api": "static_cast<RandomAlgorithm>(i)",
          "old_text": null,
          "new_text": "static_cast<RandomAlgorithm>(i)",
          "old_line_content": "  }();",
          "new_line_content": "        auto value = static_cast<RandomAlgorithm>(i);",
          "content_same": false
        },
        {
          "line": 4150,
          "old_api": null,
          "new_api": "cholesky_options",
          "old_text": null,
          "new_text": "Cast<HloCholeskyInstruction>(this)->cholesky_options()",
          "old_line_content": "",
          "new_line_content": "  return Cast<HloCholeskyInstruction>(this)->cholesky_options();",
          "content_same": false
        },
        {
          "line": 3642,
          "old_api": null,
          "new_api": "absl::AsciiStrToLower(name)",
          "old_text": null,
          "new_text": "absl::AsciiStrToLower(name)",
          "old_line_content": "}",
          "new_line_content": "  auto found = map->find(absl::AsciiStrToLower(name));",
          "content_same": false
        },
        {
          "line": 3643,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "map->end()",
          "old_line_content": "",
          "new_line_content": "  if (found == map->end()) {",
          "content_same": false
        },
        {
          "line": 3644,
          "old_api": null,
          "new_api": "InvalidArgument",
          "old_text": null,
          "new_text": "InvalidArgument(\"Unknown algorithm\")",
          "old_line_content": "StatusOr<RandomDistribution> StringToRandomDistribution(const string& name) {",
          "new_line_content": "    return InvalidArgument(\"Unknown algorithm\");",
          "content_same": false
        },
        {
          "line": 3653,
          "old_api": null,
          "new_api": "RandomDistribution_IsValid",
          "old_text": null,
          "new_text": "RandomDistribution_IsValid(i)",
          "old_line_content": "    return map;",
          "new_line_content": "      if (RandomDistribution_IsValid(i)) {",
          "content_same": false
        },
        {
          "line": 3654,
          "old_api": null,
          "new_api": "static_cast<RandomDistribution>(i)",
          "old_text": null,
          "new_text": "static_cast<RandomDistribution>(i)",
          "old_line_content": "  }();",
          "new_line_content": "        auto value = static_cast<RandomDistribution>(i);",
          "content_same": false
        },
        {
          "line": 3660,
          "old_api": null,
          "new_api": "absl::AsciiStrToLower(name)",
          "old_text": null,
          "new_text": "absl::AsciiStrToLower(name)",
          "old_line_content": "}",
          "new_line_content": "  auto found = map->find(absl::AsciiStrToLower(name));",
          "content_same": false
        },
        {
          "line": 3661,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "map->end()",
          "old_line_content": "",
          "new_line_content": "  if (found == map->end()) {",
          "content_same": false
        },
        {
          "line": 3662,
          "old_api": null,
          "new_api": "InvalidArgument",
          "old_text": null,
          "new_text": "InvalidArgument(\"Unknown distribution\")",
          "old_line_content": "StatusOr<PrecisionConfig::Precision> StringToPrecision(const string& name) {",
          "new_line_content": "    return InvalidArgument(\"Unknown distribution\");",
          "content_same": false
        },
        {
          "line": 3672,
          "old_api": null,
          "new_api": "PrecisionConfig::Precision_IsValid(i)",
          "old_text": null,
          "new_text": "PrecisionConfig::Precision_IsValid(i)",
          "old_line_content": "    return map;",
          "new_line_content": "      if (PrecisionConfig::Precision_IsValid(i)) {",
          "content_same": false
        },
        {
          "line": 3673,
          "old_api": null,
          "new_api": "static_cast<PrecisionConfig::Precision>(i)",
          "old_text": null,
          "new_text": "static_cast<PrecisionConfig::Precision>(i)",
          "old_line_content": "  }();",
          "new_line_content": "        auto value = static_cast<PrecisionConfig::Precision>(i);",
          "content_same": false
        },
        {
          "line": 3679,
          "old_api": null,
          "new_api": "absl::AsciiStrToLower(name)",
          "old_text": null,
          "new_text": "absl::AsciiStrToLower(name)",
          "old_line_content": "}",
          "new_line_content": "  auto found = map->find(absl::AsciiStrToLower(name));",
          "content_same": false
        },
        {
          "line": 3680,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "map->end()",
          "old_line_content": "",
          "new_line_content": "  if (found == map->end()) {",
          "content_same": false
        },
        {
          "line": 3681,
          "old_api": null,
          "new_api": "InvalidArgument",
          "old_text": null,
          "new_text": "InvalidArgument(\"Unknown distribution\")",
          "old_line_content": "std::ostream& operator<<(std::ostream& os, HloInstruction::FusionKind kind) {",
          "new_line_content": "    return InvalidArgument(\"Unknown distribution\");",
          "content_same": false
        },
        {
          "line": 3687,
          "old_api": null,
          "new_api": "ToString",
          "old_text": null,
          "new_text": "ToString(kind)",
          "old_line_content": "  if (rhs == nullptr) {",
          "new_line_content": "  return os << ToString(kind);",
          "content_same": false
        },
        {
          "line": 3701,
          "old_api": null,
          "new_api": "CHECK",
          "old_text": null,
          "new_text": "CHECK((lhs_module == nullptr && rhs_module == nullptr) ||\n        (lhs_module != nullptr && rhs_module != nullptr))",
          "old_line_content": "  }",
          "new_line_content": "  CHECK((lhs_module == nullptr && rhs_module == nullptr) ||",
          "content_same": false
        },
        {
          "line": 3704,
          "old_api": null,
          "new_api": "unique_id",
          "old_text": null,
          "new_text": "rhs_module->unique_id()",
          "old_line_content": "",
          "new_line_content": "      lhs_module->unique_id() != rhs_module->unique_id()) {",
          "content_same": false
        },
        {
          "line": 3705,
          "old_api": null,
          "new_api": "unique_id",
          "old_text": null,
          "new_text": "rhs_module->unique_id()",
          "old_line_content": "Status HloInstruction::GetBackendConfigInternal(",
          "new_line_content": "    return lhs_module->unique_id() < rhs_module->unique_id();",
          "content_same": false
        },
        {
          "line": 3716,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "backend_config_.empty()",
          "old_line_content": "",
          "new_line_content": "  if (backend_config_.empty()) {",
          "content_same": false
        },
        {
          "line": 3717,
          "old_api": null,
          "new_api": "Status::OK()",
          "old_text": null,
          "new_text": "Status::OK()",
          "old_line_content": "Status HloInstruction::set_backend_config(",
          "new_line_content": "    return Status::OK();",
          "content_same": false
        },
        {
          "line": 3724,
          "old_api": null,
          "new_api": "BackendConfigToRawString",
          "old_text": null,
          "new_text": "BackendConfigToRawString(proto)",
          "old_line_content": "    const tensorflow::protobuf::Message& proto) {",
          "new_line_content": "  TF_ASSIGN_OR_RETURN(backend_config_, BackendConfigToRawString(proto));",
          "content_same": false
        },
        {
          "line": 3725,
          "old_api": null,
          "new_api": "Status::OK()",
          "old_text": null,
          "new_text": "Status::OK()",
          "old_line_content": "  string ret;",
          "new_line_content": "  return Status::OK();",
          "content_same": false
        },
        {
          "line": 3735,
          "old_api": null,
          "new_api": "tensorflow::ProtoToHumanReadableJson(\n      proto, &ret, /*ignore_accuracy_loss=*/true)",
          "old_text": null,
          "new_text": "tensorflow::ProtoToHumanReadableJson(\n      proto, &ret, /*ignore_accuracy_loss=*/true)",
          "old_line_content": "const PrecisionConfig& HloInstruction::precision_config() const {",
          "new_line_content": "  TF_RETURN_IF_ERROR(tensorflow::ProtoToHumanReadableJson(",
          "content_same": false
        },
        {
          "line": 3741,
          "old_api": null,
          "new_api": "DynCast<HloConvolutionInstruction>(this)",
          "old_text": null,
          "new_text": "DynCast<HloConvolutionInstruction>(this)",
          "old_line_content": "  }",
          "new_line_content": "  if (auto* convolution = DynCast<HloConvolutionInstruction>(this)) {",
          "content_same": false
        },
        {
          "line": 3744,
          "old_api": null,
          "new_api": "DynCast<HloDotInstruction>(this)",
          "old_text": null,
          "new_text": "DynCast<HloDotInstruction>(this)",
          "old_line_content": "",
          "new_line_content": "  if (auto* dot = DynCast<HloDotInstruction>(this)) {",
          "content_same": false
        },
        {
          "line": 3745,
          "old_api": null,
          "new_api": "precision_config",
          "old_text": null,
          "new_text": "dot->precision_config()",
          "old_line_content": "PrecisionConfig* HloInstruction::mutable_precision_config() {",
          "new_line_content": "    return dot->precision_config();",
          "content_same": false
        },
        {
          "line": 3751,
          "old_api": null,
          "new_api": "DynCast<HloConvolutionInstruction>(this)",
          "old_text": null,
          "new_text": "DynCast<HloConvolutionInstruction>(this)",
          "old_line_content": "  }",
          "new_line_content": "  if (auto* convolution = DynCast<HloConvolutionInstruction>(this)) {",
          "content_same": false
        },
        {
          "line": 3754,
          "old_api": null,
          "new_api": "DynCast<HloDotInstruction>(this)",
          "old_text": null,
          "new_text": "DynCast<HloDotInstruction>(this)",
          "old_line_content": "",
          "new_line_content": "  if (auto* dot = DynCast<HloDotInstruction>(this)) {",
          "content_same": false
        },
        {
          "line": 3755,
          "old_api": null,
          "new_api": "mutable_precision_config",
          "old_text": null,
          "new_text": "dot->mutable_precision_config()",
          "old_line_content": "HloModule* HloInstruction::GetModule() const {",
          "new_line_content": "    return dot->mutable_precision_config();",
          "content_same": false
        },
        {
          "line": 3762,
          "old_api": null,
          "new_api": "parent",
          "old_text": null,
          "new_text": "parent_->parent()",
          "old_line_content": "void HloInstruction::UniquifyName(NameUniquer* name_uniquer) {",
          "new_line_content": "    return parent_->parent();",
          "content_same": false
        },
        {
          "line": 3768,
          "old_api": null,
          "new_api": "name",
          "old_text": null,
          "new_text": "parent()->name()",
          "old_line_content": "    const std::vector<int64>& outer_dimension_partitions) {",
          "new_line_content": "  string parent_str = parent() == nullptr ? \"noparent\" : parent()->name();",
          "content_same": false
        },
        {
          "line": 3769,
          "old_api": null,
          "new_api": "GetUniqueName",
          "old_text": null,
          "new_text": "name_uniquer->GetUniqueName(name_)",
          "old_line_content": "  outer_dimension_partitions_ = outer_dimension_partitions;",
          "new_line_content": "  name_ = name_uniquer->GetUniqueName(name_);",
          "content_same": false
        },
        {
          "line": 3779,
          "old_api": null,
          "new_api": "feature_index",
          "old_text": null,
          "new_text": "Cast<HloBatchNormInstruction>(this)->feature_index()",
          "old_line_content": "}",
          "new_line_content": "  return Cast<HloBatchNormInstruction>(this)->feature_index();",
          "content_same": false
        },
        {
          "line": 3783,
          "old_api": null,
          "new_api": "epsilon",
          "old_text": null,
          "new_text": "Cast<HloBatchNormInstruction>(this)->epsilon()",
          "old_line_content": "}",
          "new_line_content": "  return Cast<HloBatchNormInstruction>(this)->epsilon();",
          "content_same": false
        },
        {
          "line": 3787,
          "old_api": null,
          "new_api": "fft_type",
          "old_text": null,
          "new_text": "Cast<HloFftInstruction>(this)->fft_type()",
          "old_line_content": "}",
          "new_line_content": "  return Cast<HloFftInstruction>(this)->fft_type();",
          "content_same": false
        },
        {
          "line": 3791,
          "old_api": null,
          "new_api": "fft_length",
          "old_text": null,
          "new_text": "Cast<HloFftInstruction>(this)->fft_length()",
          "old_line_content": "}",
          "new_line_content": "  return Cast<HloFftInstruction>(this)->fft_length();",
          "content_same": false
        },
        {
          "line": 3799,
          "old_api": null,
          "new_api": "DynCast<HloSetDimensionSizeInstruction>(this)",
          "old_text": null,
          "new_text": "DynCast<HloSetDimensionSizeInstruction>(this)",
          "old_line_content": "",
          "new_line_content": "  if (auto set_size = DynCast<HloSetDimensionSizeInstruction>(this)) {",
          "content_same": false
        },
        {
          "line": 3800,
          "old_api": null,
          "new_api": "dimension",
          "old_text": null,
          "new_text": "set_size->dimension()",
          "old_line_content": "int64 HloInstruction::inferred_dimension() const {",
          "new_line_content": "    return set_size->dimension();",
          "content_same": false
        },
        {
          "line": 3802,
          "old_api": null,
          "new_api": "dimension",
          "old_text": null,
          "new_text": "Cast<HloGetDimensionSizeInstruction>(this)->dimension()",
          "old_line_content": "}",
          "new_line_content": "  return Cast<HloGetDimensionSizeInstruction>(this)->dimension();",
          "content_same": false
        },
        {
          "line": 3811,
          "old_api": null,
          "new_api": "IsRank2Transpose",
          "old_text": null,
          "new_text": "transpose->IsRank2Transpose()",
          "old_line_content": "}",
          "new_line_content": "  return transpose != nullptr && transpose->IsRank2Transpose();",
          "content_same": false
        },
        {
          "line": 3815,
          "old_api": null,
          "new_api": "slice_starts",
          "old_text": null,
          "new_text": "Cast<HloSliceInstruction>(this)->slice_starts(dimension)",
          "old_line_content": "}",
          "new_line_content": "  return Cast<HloSliceInstruction>(this)->slice_starts(dimension);",
          "content_same": false
        },
        {
          "line": 3819,
          "old_api": null,
          "new_api": "slice_starts",
          "old_text": null,
          "new_text": "Cast<HloSliceInstruction>(this)->slice_starts()",
          "old_line_content": "}",
          "new_line_content": "  return Cast<HloSliceInstruction>(this)->slice_starts();",
          "content_same": false
        },
        {
          "line": 3823,
          "old_api": null,
          "new_api": "mutable_slice_starts",
          "old_text": null,
          "new_text": "Cast<HloSliceInstruction>(this)->mutable_slice_starts()",
          "old_line_content": "}",
          "new_line_content": "  return Cast<HloSliceInstruction>(this)->mutable_slice_starts();",
          "content_same": false
        },
        {
          "line": 3827,
          "old_api": null,
          "new_api": "slice_limits",
          "old_text": null,
          "new_text": "Cast<HloSliceInstruction>(this)->slice_limits(dimension)",
          "old_line_content": "}",
          "new_line_content": "  return Cast<HloSliceInstruction>(this)->slice_limits(dimension);",
          "content_same": false
        },
        {
          "line": 3831,
          "old_api": null,
          "new_api": "slice_limits",
          "old_text": null,
          "new_text": "Cast<HloSliceInstruction>(this)->slice_limits()",
          "old_line_content": "}",
          "new_line_content": "  return Cast<HloSliceInstruction>(this)->slice_limits();",
          "content_same": false
        },
        {
          "line": 3835,
          "old_api": null,
          "new_api": "mutable_slice_limits",
          "old_text": null,
          "new_text": "Cast<HloSliceInstruction>(this)->mutable_slice_limits()",
          "old_line_content": "}",
          "new_line_content": "  return Cast<HloSliceInstruction>(this)->mutable_slice_limits();",
          "content_same": false
        },
        {
          "line": 3839,
          "old_api": null,
          "new_api": "slice_strides",
          "old_text": null,
          "new_text": "Cast<HloSliceInstruction>(this)->slice_strides(dimension)",
          "old_line_content": "}",
          "new_line_content": "  return Cast<HloSliceInstruction>(this)->slice_strides(dimension);",
          "content_same": false
        },
        {
          "line": 3843,
          "old_api": null,
          "new_api": "slice_strides",
          "old_text": null,
          "new_text": "Cast<HloSliceInstruction>(this)->slice_strides()",
          "old_line_content": "}",
          "new_line_content": "  return Cast<HloSliceInstruction>(this)->slice_strides();",
          "content_same": false
        },
        {
          "line": 3847,
          "old_api": null,
          "new_api": "mutable_slice_strides",
          "old_text": null,
          "new_text": "Cast<HloSliceInstruction>(this)->mutable_slice_strides()",
          "old_line_content": "}",
          "new_line_content": "  return Cast<HloSliceInstruction>(this)->mutable_slice_strides();",
          "content_same": false
        },
        {
          "line": 3851,
          "old_api": null,
          "new_api": "literal",
          "old_text": null,
          "new_text": "Cast<HloConstantInstruction>(this)->literal()",
          "old_line_content": "}",
          "new_line_content": "  return Cast<HloConstantInstruction>(this)->literal();",
          "content_same": false
        },
        {
          "line": 3860,
          "old_api": null,
          "new_api": "RelayoutConstant",
          "old_text": null,
          "new_text": "Cast<HloConstantInstruction>(this)->RelayoutConstant(new_layout, shape_index)",
          "old_line_content": "}",
          "new_line_content": "  Cast<HloConstantInstruction>(this)->RelayoutConstant(new_layout, shape_index);",
          "content_same": false
        },
        {
          "line": 3864,
          "old_api": null,
          "new_api": "TracingTag",
          "old_text": null,
          "new_text": "Cast<HloTraceInstruction>(this)->TracingTag()",
          "old_line_content": "}",
          "new_line_content": "  return Cast<HloTraceInstruction>(this)->TracingTag();",
          "content_same": false
        },
        {
          "line": 3868,
          "old_api": null,
          "new_api": "AddFusionOperand",
          "old_text": null,
          "new_text": "Cast<HloFusionInstruction>(this)->AddFusionOperand(new_operand)",
          "old_line_content": "    HloInstruction* instruction_to_merge) {",
          "new_line_content": "  return Cast<HloFusionInstruction>(this)->AddFusionOperand(new_operand);",
          "content_same": false
        },
        {
          "line": 3874,
          "old_api": null,
          "new_api": "MergeFusionInstruction",
          "old_text": null,
          "new_text": "Cast<HloFusionInstruction>(this)->MergeFusionInstruction(\n      Cast<HloFusionInstruction>(instruction_to_merge))",
          "old_line_content": "void HloInstruction::MergeFusionInstructionIntoMultiOutput(",
          "new_line_content": "  return Cast<HloFusionInstruction>(this)->MergeFusionInstruction(",
          "content_same": false
        },
        {
          "line": 3875,
          "old_api": null,
          "new_api": "Cast<HloFusionInstruction>(instruction_to_merge)",
          "old_text": null,
          "new_text": "Cast<HloFusionInstruction>(instruction_to_merge)",
          "old_line_content": "    HloInstruction* instruction_to_merge) {",
          "new_line_content": "      Cast<HloFusionInstruction>(instruction_to_merge));",
          "content_same": false
        },
        {
          "line": 3881,
          "old_api": null,
          "new_api": "MergeFusionInstructionIntoMultiOutput",
          "old_text": null,
          "new_text": "Cast<HloFusionInstruction>(this)\n      ->MergeFusionInstructionIntoMultiOutput(\n          Cast<HloFusionInstruction>(instruction_to_merge))",
          "old_line_content": "HloInstruction* HloInstruction::FuseInstruction(",
          "new_line_content": "  return Cast<HloFusionInstruction>(this)",
          "content_same": false
        },
        {
          "line": 3898,
          "old_api": null,
          "new_api": "fused_instructions_computation",
          "old_text": null,
          "new_text": "Cast<HloFusionInstruction>(this)->fused_instructions_computation()",
          "old_line_content": "}",
          "new_line_content": "  return Cast<HloFusionInstruction>(this)->fused_instructions_computation();",
          "content_same": false
        },
        {
          "line": 3902,
          "old_api": null,
          "new_api": "fused_expression_root",
          "old_text": null,
          "new_text": "Cast<HloFusionInstruction>(this)->fused_expression_root()",
          "old_line_content": "HloInstruction::fused_instructions() const {",
          "new_line_content": "  return Cast<HloFusionInstruction>(this)->fused_expression_root();",
          "content_same": false
        },
        {
          "line": 3394,
          "old_api": null,
          "new_api": "std::swap(a, b)",
          "old_text": null,
          "new_text": "std::swap(a, b)",
          "old_line_content": "    }",
          "new_line_content": "      std::swap(a, b);",
          "content_same": false
        },
        {
          "line": 3908,
          "old_api": null,
          "new_api": "fused_instructions",
          "old_text": null,
          "new_text": "Cast<HloFusionInstruction>(this)->fused_instructions()",
          "old_line_content": "HloInstruction::fused_instructions() {",
          "new_line_content": "  return Cast<HloFusionInstruction>(this)->fused_instructions();",
          "content_same": false
        },
        {
          "line": 3914,
          "old_api": null,
          "new_api": "fused_instructions",
          "old_text": null,
          "new_text": "Cast<HloFusionInstruction>(this)->fused_instructions()",
          "old_line_content": "}",
          "new_line_content": "  return Cast<HloFusionInstruction>(this)->fused_instructions();",
          "content_same": false
        },
        {
          "line": 3918,
          "old_api": null,
          "new_api": "fused_instruction_count",
          "old_text": null,
          "new_text": "Cast<HloFusionInstruction>(this)->fused_instruction_count()",
          "old_line_content": "}",
          "new_line_content": "  return Cast<HloFusionInstruction>(this)->fused_instruction_count();",
          "content_same": false
        },
        {
          "line": 3922,
          "old_api": null,
          "new_api": "fused_parameter",
          "old_text": null,
          "new_text": "Cast<HloFusionInstruction>(this)->fused_parameter(parameter_number)",
          "old_line_content": "}",
          "new_line_content": "  return Cast<HloFusionInstruction>(this)->fused_parameter(parameter_number);",
          "content_same": false
        },
        {
          "line": 3931,
          "old_api": null,
          "new_api": "IsMultiOutputFusion",
          "old_text": null,
          "new_text": "fusion->IsMultiOutputFusion()",
          "old_line_content": "}",
          "new_line_content": "  return fusion != nullptr && fusion->IsMultiOutputFusion();",
          "content_same": false
        },
        {
          "line": 3935,
          "old_api": null,
          "new_api": "fusion_kind",
          "old_text": null,
          "new_text": "Cast<HloFusionInstruction>(this)->fusion_kind()",
          "old_line_content": "}",
          "new_line_content": "  return Cast<HloFusionInstruction>(this)->fusion_kind();",
          "content_same": false
        },
        {
          "line": 3939,
          "old_api": null,
          "new_api": "set_fusion_kind",
          "old_text": null,
          "new_text": "Cast<HloFusionInstruction>(this)->set_fusion_kind(kind)",
          "old_line_content": "}",
          "new_line_content": "  return Cast<HloFusionInstruction>(this)->set_fusion_kind(kind);",
          "content_same": false
        },
        {
          "line": 3943,
          "old_api": null,
          "new_api": "random_distribution",
          "old_text": null,
          "new_text": "Cast<HloRngInstruction>(this)->random_distribution()",
          "old_line_content": "}",
          "new_line_content": "  return Cast<HloRngInstruction>(this)->random_distribution();",
          "content_same": false
        },
        {
          "line": 3952,
          "old_api": null,
          "new_api": "set_parameter_replicated_at_leaf_buffers",
          "old_text": null,
          "new_text": "Cast<HloParameterInstruction>(this)\n      ->set_parameter_replicated_at_leaf_buffers(\n          parameter_replicated_at_leaf_buffers)",
          "old_line_content": "void HloInstruction::set_parameter_replicated_at_leaf_buffers(",
          "new_line_content": "  return Cast<HloParameterInstruction>(this)",
          "content_same": false
        },
        {
          "line": 3959,
          "old_api": null,
          "new_api": "set_parameter_replicated_at_leaf_buffers",
          "old_text": null,
          "new_text": "Cast<HloParameterInstruction>(this)\n      ->set_parameter_replicated_at_leaf_buffers(\n          parameter_replicated_at_leaf_buffers)",
          "old_line_content": "const absl::optional<std::vector<bool>>&",
          "new_line_content": "  return Cast<HloParameterInstruction>(this)",
          "content_same": false
        },
        {
          "line": 3448,
          "old_api": null,
          "new_api": "shape",
          "old_text": null,
          "new_text": "shape()",
          "old_line_content": "    case HloOpcode::kReshape:",
          "new_line_content": "      return ShapeUtil::DropDegenerateDimensions(shape()) ==",
          "content_same": false
        },
        {
          "line": 3449,
          "old_api": null,
          "new_api": "shape",
          "old_text": null,
          "new_text": "operand(0)->shape()",
          "old_line_content": "    case HloOpcode::kReverse:",
          "new_line_content": "                     ShapeUtil::DropDegenerateDimensions(operand(0)->shape())",
          "content_same": false
        },
        {
          "line": 3451,
          "old_api": null,
          "new_api": "UseKind::Permuting(this)",
          "old_text": null,
          "new_text": "UseKind::Permuting(this)",
          "old_line_content": "    case HloOpcode::kTranspose:",
          "new_line_content": "                 : UseKind::Permuting(this);",
          "content_same": false
        },
        {
          "line": 3457,
          "old_api": null,
          "new_api": "UseKind::Permuting(this)",
          "old_text": null,
          "new_text": "UseKind::Permuting(this)",
          "old_line_content": "      // Reduce reuses the init values but not the operand array elements.",
          "new_line_content": "      return UseKind::Permuting(this);",
          "content_same": false
        },
        {
          "line": 3971,
          "old_api": null,
          "new_api": "tuple_index",
          "old_text": null,
          "new_text": "Cast<HloGetTupleElementInstruction>(this)->tuple_index()",
          "old_line_content": "      new_tuple_index);",
          "new_line_content": "  return Cast<HloGetTupleElementInstruction>(this)->tuple_index();",
          "content_same": false
        },
        {
          "line": 3465,
          "old_api": null,
          "new_api": "UseKind::Permuting(this)",
          "old_text": null,
          "new_text": "UseKind::Permuting(this)",
          "old_line_content": "    case HloOpcode::kDot:",
          "new_line_content": "                 : UseKind::Permuting(this);",
          "content_same": false
        },
        {
          "line": 3980,
          "old_api": null,
          "new_api": "exponent_bits",
          "old_text": null,
          "new_text": "Cast<HloReducePrecisionInstruction>(this)->exponent_bits()",
          "old_line_content": "}",
          "new_line_content": "  return Cast<HloReducePrecisionInstruction>(this)->exponent_bits();",
          "content_same": false
        },
        {
          "line": 3472,
          "old_api": null,
          "new_api": "dimensions_size",
          "old_text": null,
          "new_text": "shape().dimensions_size()",
          "old_line_content": "      }",
          "new_line_content": "      if (shape().dimensions_size() <= 1) {",
          "content_same": false
        },
        {
          "line": 3473,
          "old_api": null,
          "new_api": "rank",
          "old_text": null,
          "new_text": "operand(1)->shape().rank()",
          "old_line_content": "      return UseKind::kReuse;",
          "new_line_content": "        if ((operand_num == 0 && operand(1)->shape().rank() <= 1) ||",
          "content_same": false
        },
        {
          "line": 3474,
          "old_api": null,
          "new_api": "rank",
          "old_text": null,
          "new_text": "operand(0)->shape().rank()",
          "old_line_content": "    case HloOpcode::kDynamicUpdateSlice:",
          "new_line_content": "            (operand_num == 1 && operand(0)->shape().rank() <= 1)) {",
          "content_same": false
        },
        {
          "line": 3984,
          "old_api": null,
          "new_api": "mantissa_bits",
          "old_text": null,
          "new_text": "Cast<HloReducePrecisionInstruction>(this)->mantissa_bits()",
          "old_line_content": "}",
          "new_line_content": "  return Cast<HloReducePrecisionInstruction>(this)->mantissa_bits();",
          "content_same": false
        },
        {
          "line": 3988,
          "old_api": null,
          "new_api": "infeed_config",
          "old_text": null,
          "new_text": "Cast<HloInfeedInstruction>(this)->infeed_config()",
          "old_line_content": "}",
          "new_line_content": "  return Cast<HloInfeedInstruction>(this)->infeed_config();",
          "content_same": false
        },
        {
          "line": 3992,
          "old_api": null,
          "new_api": "set_infeed_config",
          "old_text": null,
          "new_text": "Cast<HloInfeedInstruction>(this)->set_infeed_config(config)",
          "old_line_content": "}",
          "new_line_content": "  return Cast<HloInfeedInstruction>(this)->set_infeed_config(config);",
          "content_same": false
        },
        {
          "line": 3996,
          "old_api": null,
          "new_api": "outfeed_shape",
          "old_text": null,
          "new_text": "Cast<HloOutfeedInstruction>(this)->outfeed_shape()",
          "old_line_content": "}",
          "new_line_content": "  return Cast<HloOutfeedInstruction>(this)->outfeed_shape();",
          "content_same": false
        },
        {
          "line": 3488,
          "old_api": null,
          "new_api": "UseKind::Permuting(this)",
          "old_text": null,
          "new_text": "UseKind::Permuting(this)",
          "old_line_content": "",
          "new_line_content": "      return operand_num == 0 ? UseKind::kUse : UseKind::Permuting(this);",
          "content_same": false
        },
        {
          "line": 4000,
          "old_api": null,
          "new_api": "outfeed_config",
          "old_text": null,
          "new_text": "Cast<HloOutfeedInstruction>(this)->outfeed_config()",
          "old_line_content": "}",
          "new_line_content": "  return Cast<HloOutfeedInstruction>(this)->outfeed_config();",
          "content_same": false
        },
        {
          "line": 3490,
          "old_api": null,
          "new_api": "IsElementwise",
          "old_text": null,
          "new_text": "IsElementwise()",
          "old_line_content": "HloInstruction::ReshapeMerelyInsertsOrDeletes1SizedDimensions() const {",
          "new_line_content": "      return IsElementwise() ? UseKind::kUse : UseKind::kReuse;",
          "content_same": false
        },
        {
          "line": 4004,
          "old_api": null,
          "new_api": "set_outfeed_config",
          "old_text": null,
          "new_text": "Cast<HloOutfeedInstruction>(this)->set_outfeed_config(config)",
          "old_line_content": "}",
          "new_line_content": "  return Cast<HloOutfeedInstruction>(this)->set_outfeed_config(config);",
          "content_same": false
        },
        {
          "line": 3497,
          "old_api": null,
          "new_api": "std::vector<int64>()",
          "old_text": null,
          "new_text": "std::vector<int64>()",
          "old_line_content": "",
          "new_line_content": "    return std::make_tuple(false, std::vector<int64>(), std::vector<int64>());",
          "content_same": false
        },
        {
          "line": 3499,
          "old_api": null,
          "new_api": "operand",
          "old_text": null,
          "new_text": "operand(0)",
          "old_line_content": "  switch (kind) {",
          "new_line_content": "  return ShapeUtil::InsertedOrDeleted1SizedDimensions(operand(0)->shape_,",
          "content_same": false
        },
        {
          "line": 4013,
          "old_api": null,
          "new_api": "source_target_pairs",
          "old_text": null,
          "new_text": "Cast<HloCollectivePermuteInstruction>(this)->source_target_pairs()",
          "old_line_content": "}",
          "new_line_content": "  return Cast<HloCollectivePermuteInstruction>(this)->source_target_pairs();",
          "content_same": false
        },
        {
          "line": 4017,
          "old_api": null,
          "new_api": "channel_id",
          "old_text": null,
          "new_text": "Cast<HloChannelInstruction>(this)->channel_id()",
          "old_line_content": "}",
          "new_line_content": "  return Cast<HloChannelInstruction>(this)->channel_id();",
          "content_same": false
        },
        {
          "line": 4026,
          "old_api": null,
          "new_api": "DynCast<HloConvolutionInstruction>(this)",
          "old_text": null,
          "new_text": "DynCast<HloConvolutionInstruction>(this)",
          "old_line_content": "  }",
          "new_line_content": "  if (auto convolution = DynCast<HloConvolutionInstruction>(this)) {",
          "content_same": false
        },
        {
          "line": 4029,
          "old_api": null,
          "new_api": "DynCast<HloCustomCallInstruction>(this)",
          "old_text": null,
          "new_text": "DynCast<HloCustomCallInstruction>(this)",
          "old_line_content": "",
          "new_line_content": "  if (auto custom_call = DynCast<HloCustomCallInstruction>(this)) {",
          "content_same": false
        },
        {
          "line": 4030,
          "old_api": null,
          "new_api": "convolution_dimension_numbers",
          "old_text": null,
          "new_text": "custom_call->convolution_dimension_numbers()",
          "old_line_content": "void HloInstruction::set_convolution_dimension_numbers(",
          "new_line_content": "    return custom_call->convolution_dimension_numbers();",
          "content_same": false
        },
        {
          "line": 4038,
          "old_api": null,
          "new_api": "set_convolution_dimension_numbers",
          "old_text": null,
          "new_text": "convolution->set_convolution_dimension_numbers(dnums)",
          "old_line_content": "  }",
          "new_line_content": "    convolution->set_convolution_dimension_numbers(dnums);",
          "content_same": false
        },
        {
          "line": 4039,
          "old_api": null,
          "new_api": "DynCast<HloCustomCallInstruction>(this)",
          "old_text": null,
          "new_text": "DynCast<HloCustomCallInstruction>(this)",
          "old_line_content": "}",
          "new_line_content": "  } else if (auto custom_call = DynCast<HloCustomCallInstruction>(this)) {",
          "content_same": false
        },
        {
          "line": 4040,
          "old_api": null,
          "new_api": "set_convolution_dimension_numbers",
          "old_text": null,
          "new_text": "custom_call->set_convolution_dimension_numbers(dnums)",
          "old_line_content": "",
          "new_line_content": "    custom_call->set_convolution_dimension_numbers(dnums);",
          "content_same": false
        },
        {
          "line": 3530,
          "old_api": null,
          "new_api": "InvalidArgument",
          "old_text": null,
          "new_text": "InvalidArgument(\"Unknown fusion kind: %s\", kind_name)",
          "old_line_content": "  std::vector<std::pair<string, string>> sorted_attributes(",
          "new_line_content": "  return InvalidArgument(\"Unknown fusion kind: %s\", kind_name);",
          "content_same": false
        },
        {
          "line": 4047,
          "old_api": null,
          "new_api": "DynCast<HloConvolutionInstruction>(this)",
          "old_text": null,
          "new_text": "DynCast<HloConvolutionInstruction>(this)",
          "old_line_content": "",
          "new_line_content": "  if (auto convolution = DynCast<HloConvolutionInstruction>(this)) {",
          "content_same": false
        },
        {
          "line": 3536,
          "old_api": null,
          "new_api": "map",
          "old_text": null,
          "new_text": "frontend_attributes.map().end()",
          "old_line_content": "                            const std::pair<string, string>& item) {",
          "new_line_content": "      frontend_attributes.map().begin(), frontend_attributes.map().end());",
          "content_same": false
        },
        {
          "line": 4048,
          "old_api": null,
          "new_api": "feature_group_count",
          "old_text": null,
          "new_text": "convolution->feature_group_count()",
          "old_line_content": "void HloInstruction::set_feature_group_count(int64 feature_group_count) {",
          "new_line_content": "    return convolution->feature_group_count();",
          "content_same": false
        },
        {
          "line": 3542,
          "old_api": null,
          "new_api": "absl::StrAppend(out, item.first, \"=\\\"\", item.second, \"\\\"\")",
          "old_text": null,
          "new_text": "absl::StrAppend(out, item.first, \"=\\\"\", item.second, \"\\\"\")",
          "old_line_content": "",
          "new_line_content": "    absl::StrAppend(out, item.first, \"=\\\"\", item.second, \"\\\"\");",
          "content_same": false
        },
        {
          "line": 4054,
          "old_api": null,
          "new_api": "DynCast<HloConvolutionInstruction>(this)",
          "old_text": null,
          "new_text": "DynCast<HloConvolutionInstruction>(this)",
          "old_line_content": "}",
          "new_line_content": "  if (auto convolution = DynCast<HloConvolutionInstruction>(this)) {",
          "content_same": false
        },
        {
          "line": 3544,
          "old_api": null,
          "new_api": "absl::StrFormat(\"{%s}\",\n                         absl::StrJoin(sorted_attributes, \",\", formatter))",
          "old_text": null,
          "new_text": "absl::StrFormat(\"{%s}\",\n                         absl::StrJoin(sorted_attributes, \",\", formatter))",
          "old_line_content": "  bool has_interior_padding =",
          "new_line_content": "  return absl::StrFormat(\"{%s}\",",
          "content_same": false
        },
        {
          "line": 4055,
          "old_api": null,
          "new_api": "set_feature_group_count",
          "old_text": null,
          "new_text": "convolution->set_feature_group_count(feature_group_count)",
          "old_line_content": "",
          "new_line_content": "    return convolution->set_feature_group_count(feature_group_count);",
          "content_same": false
        },
        {
          "line": 4062,
          "old_api": null,
          "new_api": "DynCast<HloConvolutionInstruction>(this)",
          "old_text": null,
          "new_text": "DynCast<HloConvolutionInstruction>(this)",
          "old_line_content": "",
          "new_line_content": "  if (auto convolution = DynCast<HloConvolutionInstruction>(this)) {",
          "content_same": false
        },
        {
          "line": 4063,
          "old_api": null,
          "new_api": "batch_group_count",
          "old_text": null,
          "new_text": "convolution->batch_group_count()",
          "old_line_content": "void HloInstruction::set_batch_group_count(int64 batch_group_count) {",
          "new_line_content": "    return convolution->batch_group_count();",
          "content_same": false
        },
        {
          "line": 3555,
          "old_api": null,
          "new_api": "dimensions",
          "old_text": null,
          "new_text": "padding.dimensions()",
          "old_line_content": "      });",
          "new_line_content": "      padding.dimensions(), \"x\",",
          "content_same": false
        },
        {
          "line": 3557,
          "old_api": null,
          "new_api": "edge_padding_low",
          "old_text": null,
          "new_text": "StrAppend(\n            out, dim.edge_padding_low(), \"_\", dim.edge_padding_high(),\n            has_interior_padding ? StrCat(\"_\", dim.interior_padding()) : \"\")",
          "old_line_content": "",
          "new_line_content": "        StrAppend(",
          "content_same": false
        },
        {
          "line": 3558,
          "old_api": null,
          "new_api": "edge_padding_high",
          "old_text": null,
          "new_text": "dim.edge_padding_high()",
          "old_line_content": "string OpMetadataToString(const OpMetadata& metadata) {",
          "new_line_content": "            out, dim.edge_padding_low(), \"_\", dim.edge_padding_high(),",
          "content_same": false
        },
        {
          "line": 3559,
          "old_api": null,
          "new_api": "interior_padding",
          "old_text": null,
          "new_text": "dim.interior_padding()",
          "old_line_content": "  std::vector<string> result;",
          "new_line_content": "            has_interior_padding ? StrCat(\"_\", dim.interior_padding()) : \"\");",
          "content_same": false
        },
        {
          "line": 4069,
          "old_api": null,
          "new_api": "DynCast<HloConvolutionInstruction>(this)",
          "old_text": null,
          "new_text": "DynCast<HloConvolutionInstruction>(this)",
          "old_line_content": "}",
          "new_line_content": "  if (auto convolution = DynCast<HloConvolutionInstruction>(this)) {",
          "content_same": false
        },
        {
          "line": 4070,
          "old_api": null,
          "new_api": "set_batch_group_count",
          "old_text": null,
          "new_text": "convolution->set_batch_group_count(batch_group_count)",
          "old_line_content": "",
          "new_line_content": "    return convolution->set_batch_group_count(batch_group_count);",
          "content_same": false
        },
        {
          "line": 3565,
          "old_api": null,
          "new_api": "op_type",
          "old_text": null,
          "new_text": "metadata.op_type().empty()",
          "old_line_content": "  }",
          "new_line_content": "  if (!metadata.op_type().empty()) {",
          "content_same": false
        },
        {
          "line": 4077,
          "old_api": null,
          "new_api": "select",
          "old_text": null,
          "new_text": "Cast<HloSelectAndScatterInstruction>(this)->select()",
          "old_line_content": "}",
          "new_line_content": "  return Cast<HloSelectAndScatterInstruction>(this)->select();",
          "content_same": false
        },
        {
          "line": 3569,
          "old_api": null,
          "new_api": "op_name",
          "old_text": null,
          "new_text": "metadata.op_name()",
          "old_line_content": "  }",
          "new_line_content": "    result.push_back(StrCat(\"op_name=\\\"\", CEscape(metadata.op_name()), \"\\\"\"));",
          "content_same": false
        },
        {
          "line": 4081,
          "old_api": null,
          "new_api": "scatter",
          "old_text": null,
          "new_text": "Cast<HloSelectAndScatterInstruction>(this)->scatter()",
          "old_line_content": "}",
          "new_line_content": "  return Cast<HloSelectAndScatterInstruction>(this)->scatter();",
          "content_same": false
        },
        {
          "line": 3572,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "result.push_back(\n        StrCat(\"source_file=\\\"\", CEscape(metadata.source_file()), \"\\\"\"))",
          "old_line_content": "  }",
          "new_line_content": "    result.push_back(",
          "content_same": false
        },
        {
          "line": 4085,
          "old_api": null,
          "new_api": "set_select",
          "old_text": null,
          "new_text": "Cast<HloSelectAndScatterInstruction>(this)->set_select(computation)",
          "old_line_content": "}",
          "new_line_content": "  return Cast<HloSelectAndScatterInstruction>(this)->set_select(computation);",
          "content_same": false
        },
        {
          "line": 3575,
          "old_api": null,
          "new_api": "source_line",
          "old_text": null,
          "new_text": "metadata.source_line()",
          "old_line_content": "",
          "new_line_content": "  if (metadata.source_line() != 0) {",
          "content_same": false
        },
        {
          "line": 3576,
          "old_api": null,
          "new_api": "source_line",
          "old_text": null,
          "new_text": "metadata.source_line()",
          "old_line_content": "string RandomDistributionToString(const RandomDistribution& distribution) {",
          "new_line_content": "    result.push_back(StrCat(\"source_line=\", metadata.source_line()));",
          "content_same": false
        },
        {
          "line": 4089,
          "old_api": null,
          "new_api": "set_scatter",
          "old_text": null,
          "new_text": "Cast<HloSelectAndScatterInstruction>(this)->set_scatter(computation)",
          "old_line_content": "}",
          "new_line_content": "  return Cast<HloSelectAndScatterInstruction>(this)->set_scatter(computation);",
          "content_same": false
        },
        {
          "line": 3578,
          "old_api": null,
          "new_api": "StrJoin",
          "old_text": null,
          "new_text": "StrJoin(result, \" \")",
          "old_line_content": "}",
          "new_line_content": "  return StrJoin(result, \" \");",
          "content_same": false
        },
        {
          "line": 4093,
          "old_api": null,
          "new_api": "custom_call_target",
          "old_text": null,
          "new_text": "Cast<HloCustomCallInstruction>(this)->custom_call_target()",
          "old_line_content": "}",
          "new_line_content": "  return Cast<HloCustomCallInstruction>(this)->custom_call_target();",
          "content_same": false
        },
        {
          "line": 3582,
          "old_api": null,
          "new_api": "RandomDistribution_Name",
          "old_text": null,
          "new_text": "RandomDistribution_Name(distribution)",
          "old_line_content": "",
          "new_line_content": "  return absl::AsciiStrToLower(RandomDistribution_Name(distribution));",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 3584,
          "old_api": "PrecisionConfig::Precision_Name(precision)",
          "new_api": null,
          "old_text": "PrecisionConfig::Precision_Name(precision)",
          "new_text": null,
          "old_line_content": "  return absl::AsciiStrToLower(PrecisionConfig::Precision_Name(precision));",
          "new_line_content": "string RandomAlgorithmToString(const RandomAlgorithm& algorithm) {",
          "content_same": false
        },
        {
          "line": 4096,
          "old_api": "mutable_padding_config",
          "new_api": null,
          "old_text": "Cast<HloPadInstruction>(this)->mutable_padding_config()",
          "new_text": null,
          "old_line_content": "  return Cast<HloPadInstruction>(this)->mutable_padding_config();",
          "new_line_content": "const PaddingConfig& HloInstruction::padding_config() const {",
          "content_same": false
        },
        {
          "line": 4100,
          "old_api": "slice_sizes",
          "new_api": null,
          "old_text": "Cast<HloDynamicSliceInstruction>(this)->slice_sizes(dimension)",
          "new_text": null,
          "old_line_content": "  return Cast<HloDynamicSliceInstruction>(this)->slice_sizes(dimension);",
          "new_line_content": "PaddingConfig* HloInstruction::mutable_padding_config() {",
          "content_same": false
        },
        {
          "line": 3591,
          "old_api": "input_spatial_dimensions",
          "new_api": null,
          "old_text": "dnums.input_spatial_dimensions().size()",
          "new_text": null,
          "old_line_content": "  std::vector<string> lhs_dims(2 + dnums.input_spatial_dimensions().size());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3592,
          "old_api": "input_batch_dimension",
          "new_api": null,
          "old_text": "dnums.input_batch_dimension()",
          "new_text": null,
          "old_line_content": "  lhs_dims[dnums.input_batch_dimension()] = 'b';",
          "new_line_content": "string ConvolutionDimensionNumbersToString(",
          "content_same": false
        },
        {
          "line": 3593,
          "old_api": "input_feature_dimension",
          "new_api": null,
          "old_text": "dnums.input_feature_dimension()",
          "new_text": null,
          "old_line_content": "  lhs_dims[dnums.input_feature_dimension()] = 'f';",
          "new_line_content": "    const ConvolutionDimensionNumbers& dnums) {",
          "content_same": false
        },
        {
          "line": 3594,
          "old_api": "input_spatial_dimensions",
          "new_api": null,
          "old_text": "dnums.input_spatial_dimensions().size()",
          "new_text": null,
          "old_line_content": "  for (int64 i = 0; i < dnums.input_spatial_dimensions().size(); ++i) {",
          "new_line_content": "  // lhs_dims[i] is the symbol of the logical dimension i for the lhs",
          "content_same": false
        },
        {
          "line": 3595,
          "old_api": "StrCat",
          "new_api": null,
          "old_text": "StrCat(i)",
          "new_text": null,
          "old_line_content": "    lhs_dims[dnums.input_spatial_dimensions(i)] = StrCat(i);",
          "new_line_content": "  // operand. E.g. if batch has dimension number 2, then lhs_dims[2] == \"b\".",
          "content_same": false
        },
        {
          "line": 4104,
          "old_api": "dynamic_slice_sizes",
          "new_api": null,
          "old_text": "Cast<HloDynamicSliceInstruction>(this)->dynamic_slice_sizes()",
          "new_text": null,
          "old_line_content": "  return Cast<HloDynamicSliceInstruction>(this)->dynamic_slice_sizes();",
          "new_line_content": "int64 HloInstruction::slice_sizes(int64 dimension) const {",
          "content_same": false
        },
        {
          "line": 4108,
          "old_api": "gather_dimension_numbers",
          "new_api": null,
          "old_text": "Cast<HloGatherInstruction>(this)->gather_dimension_numbers()",
          "new_text": null,
          "old_line_content": "  return Cast<HloGatherInstruction>(this)->gather_dimension_numbers();",
          "new_line_content": "const std::vector<int64>& HloInstruction::dynamic_slice_sizes() const {",
          "content_same": false
        },
        {
          "line": 4112,
          "old_api": "gather_slice_sizes",
          "new_api": null,
          "old_text": "Cast<HloGatherInstruction>(this)->gather_slice_sizes()",
          "new_text": null,
          "old_line_content": "  return Cast<HloGatherInstruction>(this)->gather_slice_sizes();",
          "new_line_content": "const GatherDimensionNumbers& HloInstruction::gather_dimension_numbers() const {",
          "content_same": false
        },
        {
          "line": 3601,
          "old_api": "kernel_spatial_dimensions",
          "new_api": null,
          "old_text": "dnums.kernel_spatial_dimensions().size()",
          "new_text": null,
          "old_line_content": "  for (int64 i = 0; i < dnums.kernel_spatial_dimensions().size(); ++i) {",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 3602,
          "old_api": "StrCat",
          "new_api": null,
          "old_text": "StrCat(i)",
          "new_text": null,
          "old_line_content": "    rhs_dims[dnums.kernel_spatial_dimensions(i)] = StrCat(i);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3608,
          "old_api": "output_spatial_dimensions",
          "new_api": null,
          "old_text": "dnums.output_spatial_dimensions().size()",
          "new_text": null,
          "old_line_content": "  for (int64 i = 0; i < dnums.output_spatial_dimensions().size(); ++i) {",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 3609,
          "old_api": "StrCat",
          "new_api": null,
          "old_text": "StrCat(i)",
          "new_text": null,
          "old_line_content": "    output_dims[dnums.output_spatial_dimensions(i)] = StrCat(i);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4121,
          "old_api": "dot_dimension_numbers",
          "new_api": null,
          "old_text": "Cast<HloDotInstruction>(this)->dot_dimension_numbers()",
          "new_text": null,
          "old_line_content": "  return Cast<HloDotInstruction>(this)->dot_dimension_numbers();",
          "new_line_content": "    const {",
          "content_same": false
        },
        {
          "line": 4125,
          "old_api": "operand_side_metadata",
          "new_api": null,
          "old_text": "Cast<HloDomainInstruction>(this)->operand_side_metadata()",
          "new_text": null,
          "old_line_content": "  return Cast<HloDomainInstruction>(this)->operand_side_metadata();",
          "new_line_content": "const DotDimensionNumbers& HloInstruction::dot_dimension_numbers() const {",
          "content_same": false
        },
        {
          "line": 4129,
          "old_api": "user_side_metadata",
          "new_api": null,
          "old_text": "Cast<HloDomainInstruction>(this)->user_side_metadata()",
          "new_text": null,
          "old_line_content": "  return Cast<HloDomainInstruction>(this)->user_side_metadata();",
          "new_line_content": "const DomainMetadata& HloInstruction::operand_side_metadata() const {",
          "content_same": false
        },
        {
          "line": 3620,
          "old_api": "push_back",
          "new_api": null,
          "old_text": "replica_group_str.push_back(\n        StrCat(\"{\", StrJoin(group.replica_ids(), \",\"), \"}\"))",
          "new_text": null,
          "old_line_content": "    replica_group_str.push_back(",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3621,
          "old_api": "replica_ids",
          "new_api": null,
          "old_text": "group.replica_ids()",
          "new_text": null,
          "old_line_content": "        StrCat(\"{\", StrJoin(group.replica_ids(), \",\"), \"}\"));",
          "new_line_content": "string ReplicaGroupsToString(const std::vector<ReplicaGroup>& replica_groups) {",
          "content_same": false
        },
        {
          "line": 4133,
          "old_api": "is_cross_program_prefetch",
          "new_api": null,
          "old_text": "Cast<HloCopyStartInstruction>(this)->is_cross_program_prefetch()",
          "new_text": null,
          "old_line_content": "  return Cast<HloCopyStartInstruction>(this)->is_cross_program_prefetch();",
          "new_line_content": "const DomainMetadata& HloInstruction::user_side_metadata() const {",
          "content_same": false
        },
        {
          "line": 4137,
          "old_api": "direction",
          "new_api": null,
          "old_text": "Cast<HloCompareInstruction>(this)->direction()",
          "new_text": null,
          "old_line_content": "  return Cast<HloCompareInstruction>(this)->direction();",
          "new_line_content": "bool HloInstruction::is_cross_program_prefetch() const {",
          "content_same": false
        },
        {
          "line": 3627,
          "old_api": "[] {\n    static auto* map = new std::unordered_map<string, RandomAlgorithm>;\n    for (int i = 0; i < RandomAlgorithm_ARRAYSIZE; i++) {\n      if (RandomAlgorithm_IsValid(i)) {\n        auto value = static_cast<RandomAlgorithm>(i);\n        (*map)[RandomAlgorithmToString(value)] = value;\n      }\n    }\n    return map;\n  }()",
          "new_api": null,
          "old_text": "[] {\n    static auto* map = new std::unordered_map<string, RandomAlgorithm>;\n    for (int i = 0; i < RandomAlgorithm_ARRAYSIZE; i++) {\n      if (RandomAlgorithm_IsValid(i)) {\n        auto value = static_cast<RandomAlgorithm>(i);\n        (*map)[RandomAlgorithmToString(value)] = value;\n      }\n    }\n    return map;\n  }()",
          "new_text": null,
          "old_line_content": "  static std::unordered_map<string, RandomAlgorithm>* map = [] {",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 4141,
          "old_api": "triangular_solve_options",
          "new_api": null,
          "old_text": "Cast<HloTriangularSolveInstruction>(this)->triangular_solve_options()",
          "new_text": null,
          "old_line_content": "  return Cast<HloTriangularSolveInstruction>(this)->triangular_solve_options();",
          "new_line_content": "ComparisonDirection HloInstruction::comparison_direction() const {",
          "content_same": false
        },
        {
          "line": 3630,
          "old_api": "RandomAlgorithm_IsValid",
          "new_api": null,
          "old_text": "RandomAlgorithm_IsValid(i)",
          "new_text": null,
          "old_line_content": "      if (RandomAlgorithm_IsValid(i)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3631,
          "old_api": "static_cast<RandomAlgorithm>(i)",
          "new_api": null,
          "old_text": "static_cast<RandomAlgorithm>(i)",
          "new_text": null,
          "old_line_content": "        auto value = static_cast<RandomAlgorithm>(i);",
          "new_line_content": "StatusOr<RandomAlgorithm> StringToRandomAlgorithm(const string& name) {",
          "content_same": false
        },
        {
          "line": 4145,
          "old_api": "cholesky_options",
          "new_api": null,
          "old_text": "Cast<HloCholeskyInstruction>(this)->cholesky_options()",
          "new_text": null,
          "old_line_content": "  return Cast<HloCholeskyInstruction>(this)->cholesky_options();",
          "new_line_content": "const TriangularSolveOptions& HloInstruction::triangular_solve_options() const {",
          "content_same": false
        },
        {
          "line": 3638,
          "old_api": "end",
          "new_api": null,
          "old_text": "map->end()",
          "new_text": null,
          "old_line_content": "  if (found == map->end()) {",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 3639,
          "old_api": "InvalidArgument",
          "new_api": null,
          "old_text": "InvalidArgument(\"Unknown algorithm\")",
          "new_text": null,
          "old_line_content": "    return InvalidArgument(\"Unknown algorithm\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3645,
          "old_api": "[] {\n    static auto* map = new std::unordered_map<string, RandomDistribution>;\n    for (int i = 0; i < RandomDistribution_ARRAYSIZE; i++) {\n      if (RandomDistribution_IsValid(i)) {\n        auto value = static_cast<RandomDistribution>(i);\n        (*map)[RandomDistributionToString(value)] = value;\n      }\n    }\n    return map;\n  }()",
          "new_api": null,
          "old_text": "[] {\n    static auto* map = new std::unordered_map<string, RandomDistribution>;\n    for (int i = 0; i < RandomDistribution_ARRAYSIZE; i++) {\n      if (RandomDistribution_IsValid(i)) {\n        auto value = static_cast<RandomDistribution>(i);\n        (*map)[RandomDistributionToString(value)] = value;\n      }\n    }\n    return map;\n  }()",
          "new_text": null,
          "old_line_content": "  static std::unordered_map<string, RandomDistribution>* map = [] {",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 3648,
          "old_api": "RandomDistribution_IsValid",
          "new_api": null,
          "old_text": "RandomDistribution_IsValid(i)",
          "new_text": null,
          "old_line_content": "      if (RandomDistribution_IsValid(i)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3649,
          "old_api": "static_cast<RandomDistribution>(i)",
          "new_api": null,
          "old_text": "static_cast<RandomDistribution>(i)",
          "new_text": null,
          "old_line_content": "        auto value = static_cast<RandomDistribution>(i);",
          "new_line_content": "StatusOr<RandomDistribution> StringToRandomDistribution(const string& name) {",
          "content_same": false
        },
        {
          "line": 3656,
          "old_api": "end",
          "new_api": null,
          "old_text": "map->end()",
          "new_text": null,
          "old_line_content": "  if (found == map->end()) {",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 3657,
          "old_api": "InvalidArgument",
          "new_api": null,
          "old_text": "InvalidArgument(\"Unknown distribution\")",
          "new_text": null,
          "old_line_content": "    return InvalidArgument(\"Unknown distribution\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3663,
          "old_api": "[] {\n    static auto* map =\n        new std::unordered_map<string, PrecisionConfig::Precision>;\n    for (int i = 0; i < PrecisionConfig::Precision_ARRAYSIZE; i++) {\n      if (PrecisionConfig::Precision_IsValid(i)) {\n        auto value = static_cast<PrecisionConfig::Precision>(i);\n        (*map)[PrecisionToString(value)] = value;\n      }\n    }\n    return map;\n  }()",
          "new_api": null,
          "old_text": "[] {\n    static auto* map =\n        new std::unordered_map<string, PrecisionConfig::Precision>;\n    for (int i = 0; i < PrecisionConfig::Precision_ARRAYSIZE; i++) {\n      if (PrecisionConfig::Precision_IsValid(i)) {\n        auto value = static_cast<PrecisionConfig::Precision>(i);\n        (*map)[PrecisionToString(value)] = value;\n      }\n    }\n    return map;\n  }()",
          "new_text": null,
          "old_line_content": "  static std::unordered_map<string, PrecisionConfig::Precision>* map = [] {",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 3667,
          "old_api": "PrecisionConfig::Precision_IsValid(i)",
          "new_api": null,
          "old_text": "PrecisionConfig::Precision_IsValid(i)",
          "new_text": null,
          "old_line_content": "      if (PrecisionConfig::Precision_IsValid(i)) {",
          "new_line_content": "StatusOr<PrecisionConfig::Precision> StringToPrecision(const string& name) {",
          "content_same": false
        },
        {
          "line": 3669,
          "old_api": "PrecisionToString",
          "new_api": null,
          "old_text": "PrecisionToString(value)",
          "new_text": null,
          "old_line_content": "        (*map)[PrecisionToString(value)] = value;",
          "new_line_content": "    static auto* map =",
          "content_same": false
        },
        {
          "line": 3675,
          "old_api": "end",
          "new_api": null,
          "old_text": "map->end()",
          "new_text": null,
          "old_line_content": "  if (found == map->end()) {",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 3676,
          "old_api": "InvalidArgument",
          "new_api": null,
          "old_text": "InvalidArgument(\"Unknown distribution\")",
          "new_text": null,
          "old_line_content": "    return InvalidArgument(\"Unknown distribution\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3682,
          "old_api": "ToString",
          "new_api": null,
          "old_text": "ToString(kind)",
          "new_text": null,
          "old_line_content": "  return os << ToString(kind);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 4092,
          "old_api": "padding_config",
          "new_api": null,
          "old_text": "Cast<HloPadInstruction>(this)->padding_config()",
          "new_text": null,
          "old_line_content": "  return Cast<HloPadInstruction>(this)->padding_config();",
          "new_line_content": "const string& HloInstruction::custom_call_target() const {",
          "content_same": false
        },
        {
          "line": 3694,
          "old_api": "GetModule",
          "new_api": null,
          "old_text": "lhs->GetModule()",
          "new_text": null,
          "old_line_content": "  auto lhs_module = lhs->GetModule();",
          "new_line_content": "    return false;",
          "content_same": false
        },
        {
          "line": 3695,
          "old_api": "GetModule",
          "new_api": null,
          "old_text": "rhs->GetModule()",
          "new_text": null,
          "old_line_content": "  auto rhs_module = rhs->GetModule();",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 3696,
          "old_api": "CHECK",
          "new_api": null,
          "old_text": "CHECK((lhs_module == nullptr && rhs_module == nullptr) ||\n        (lhs_module != nullptr && rhs_module != nullptr))",
          "new_text": null,
          "old_line_content": "  CHECK((lhs_module == nullptr && rhs_module == nullptr) ||",
          "new_line_content": "  if (lhs == nullptr) {",
          "content_same": false
        },
        {
          "line": 3702,
          "old_api": "unique_id",
          "new_api": null,
          "old_text": "rhs->unique_id()",
          "new_text": null,
          "old_line_content": "  return lhs->unique_id() < rhs->unique_id();",
          "new_line_content": "        (lhs_module != nullptr && rhs_module != nullptr));",
          "content_same": false
        },
        {
          "line": 3711,
          "old_api": "empty",
          "new_api": null,
          "old_text": "backend_config_.empty()",
          "new_text": null,
          "old_line_content": "  if (backend_config_.empty()) {",
          "new_line_content": "    tensorflow::protobuf::Message* proto) const {",
          "content_same": false
        },
        {
          "line": 3714,
          "old_api": "tensorflow::HumanReadableJsonToProto(backend_config_, proto)",
          "new_api": null,
          "old_text": "tensorflow::HumanReadableJsonToProto(backend_config_, proto)",
          "new_text": null,
          "old_line_content": "  return tensorflow::HumanReadableJsonToProto(backend_config_, proto);",
          "new_line_content": "  // Empty string does not parse as valid JSON, but it's a valid backend config,",
          "content_same": false
        },
        {
          "line": 3720,
          "old_api": "Status::OK()",
          "new_api": null,
          "old_text": "Status::OK()",
          "new_text": null,
          "old_line_content": "  return Status::OK();",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3730,
          "old_api": "tensorflow::ProtoToHumanReadableJson(\n      proto, &ret, /*ignore_accuracy_loss=*/true)",
          "new_api": null,
          "old_text": "tensorflow::ProtoToHumanReadableJson(\n      proto, &ret, /*ignore_accuracy_loss=*/true)",
          "new_text": null,
          "old_line_content": "  TF_RETURN_IF_ERROR(tensorflow::ProtoToHumanReadableJson(",
          "new_line_content": "  string ret;",
          "content_same": false
        },
        {
          "line": 3736,
          "old_api": "DynCast<HloConvolutionInstruction>(this)",
          "new_api": null,
          "old_text": "DynCast<HloConvolutionInstruction>(this)",
          "new_text": null,
          "old_line_content": "  if (auto* convolution = DynCast<HloConvolutionInstruction>(this)) {",
          "new_line_content": "      proto, &ret, /*ignore_accuracy_loss=*/true));",
          "content_same": false
        },
        {
          "line": 3737,
          "old_api": "precision_config",
          "new_api": null,
          "old_text": "convolution->precision_config()",
          "new_text": null,
          "old_line_content": "    return convolution->precision_config();",
          "new_line_content": "  return ret;",
          "content_same": false
        },
        {
          "line": 3739,
          "old_api": "DynCast<HloDotInstruction>(this)",
          "new_api": null,
          "old_text": "DynCast<HloDotInstruction>(this)",
          "new_text": null,
          "old_line_content": "  if (auto* dot = DynCast<HloDotInstruction>(this)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3740,
          "old_api": "precision_config",
          "new_api": null,
          "old_text": "dot->precision_config()",
          "new_text": null,
          "old_line_content": "    return dot->precision_config();",
          "new_line_content": "const PrecisionConfig& HloInstruction::precision_config() const {",
          "content_same": false
        },
        {
          "line": 3746,
          "old_api": "DynCast<HloConvolutionInstruction>(this)",
          "new_api": null,
          "old_text": "DynCast<HloConvolutionInstruction>(this)",
          "new_text": null,
          "old_line_content": "  if (auto* convolution = DynCast<HloConvolutionInstruction>(this)) {",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 3749,
          "old_api": "DynCast<HloDotInstruction>(this)",
          "new_api": null,
          "old_text": "DynCast<HloDotInstruction>(this)",
          "new_text": null,
          "old_line_content": "  if (auto* dot = DynCast<HloDotInstruction>(this)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3750,
          "old_api": "mutable_precision_config",
          "new_api": null,
          "old_text": "dot->mutable_precision_config()",
          "new_text": null,
          "old_line_content": "    return dot->mutable_precision_config();",
          "new_line_content": "PrecisionConfig* HloInstruction::mutable_precision_config() {",
          "content_same": false
        },
        {
          "line": 3763,
          "old_api": "name",
          "new_api": null,
          "old_text": "parent()->name()",
          "new_text": null,
          "old_line_content": "  string parent_str = parent() == nullptr ? \"noparent\" : parent()->name();",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 3764,
          "old_api": "GetUniqueName",
          "new_api": null,
          "old_text": "name_uniquer->GetUniqueName(name_)",
          "new_text": null,
          "old_line_content": "  name_ = name_uniquer->GetUniqueName(name_);",
          "new_line_content": "  return nullptr;",
          "content_same": false
        },
        {
          "line": 3774,
          "old_api": "feature_index",
          "new_api": null,
          "old_text": "Cast<HloBatchNormInstruction>(this)->feature_index()",
          "new_text": null,
          "old_line_content": "  return Cast<HloBatchNormInstruction>(this)->feature_index();",
          "new_line_content": "  outer_dimension_partitions_ = outer_dimension_partitions;",
          "content_same": false
        },
        {
          "line": 3778,
          "old_api": "epsilon",
          "new_api": null,
          "old_text": "Cast<HloBatchNormInstruction>(this)->epsilon()",
          "new_text": null,
          "old_line_content": "  return Cast<HloBatchNormInstruction>(this)->epsilon();",
          "new_line_content": "int64 HloInstruction::feature_index() const {",
          "content_same": false
        },
        {
          "line": 3782,
          "old_api": "fft_type",
          "new_api": null,
          "old_text": "Cast<HloFftInstruction>(this)->fft_type()",
          "new_text": null,
          "old_line_content": "  return Cast<HloFftInstruction>(this)->fft_type();",
          "new_line_content": "float HloInstruction::epsilon() const {",
          "content_same": false
        },
        {
          "line": 3786,
          "old_api": "fft_length",
          "new_api": null,
          "old_text": "Cast<HloFftInstruction>(this)->fft_length()",
          "new_text": null,
          "old_line_content": "  return Cast<HloFftInstruction>(this)->fft_length();",
          "new_line_content": "FftType HloInstruction::fft_type() const {",
          "content_same": false
        },
        {
          "line": 3790,
          "old_api": "concatenate_dimension",
          "new_api": null,
          "old_text": "Cast<HloConcatenateInstruction>(this)->concatenate_dimension()",
          "new_text": null,
          "old_line_content": "  return Cast<HloConcatenateInstruction>(this)->concatenate_dimension();",
          "new_line_content": "const std::vector<int64>& HloInstruction::fft_length() const {",
          "content_same": false
        },
        {
          "line": 3794,
          "old_api": "DynCast<HloSetDimensionSizeInstruction>(this)",
          "new_api": null,
          "old_text": "DynCast<HloSetDimensionSizeInstruction>(this)",
          "new_text": null,
          "old_line_content": "  if (auto set_size = DynCast<HloSetDimensionSizeInstruction>(this)) {",
          "new_line_content": "int64 HloInstruction::concatenate_dimension() const {",
          "content_same": false
        },
        {
          "line": 3797,
          "old_api": "dimension",
          "new_api": null,
          "old_text": "Cast<HloGetDimensionSizeInstruction>(this)->dimension()",
          "new_text": null,
          "old_line_content": "  return Cast<HloGetDimensionSizeInstruction>(this)->dimension();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3801,
          "old_api": "inferred_dimension",
          "new_api": null,
          "old_text": "Cast<HloReshapeInstruction>(this)->inferred_dimension()",
          "new_text": null,
          "old_line_content": "  return Cast<HloReshapeInstruction>(this)->inferred_dimension();",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 3805,
          "old_api": "DynCast<HloTransposeInstruction>(this)",
          "new_api": null,
          "old_text": "DynCast<HloTransposeInstruction>(this)",
          "new_text": null,
          "old_line_content": "  auto transpose = DynCast<HloTransposeInstruction>(this);",
          "new_line_content": "int64 HloInstruction::inferred_dimension() const {",
          "content_same": false
        },
        {
          "line": 3814,
          "old_api": "slice_starts",
          "new_api": null,
          "old_text": "Cast<HloSliceInstruction>(this)->slice_starts()",
          "new_text": null,
          "old_line_content": "  return Cast<HloSliceInstruction>(this)->slice_starts();",
          "new_line_content": "int64 HloInstruction::slice_starts(int64 dimension) const {",
          "content_same": false
        },
        {
          "line": 3818,
          "old_api": "mutable_slice_starts",
          "new_api": null,
          "old_text": "Cast<HloSliceInstruction>(this)->mutable_slice_starts()",
          "new_text": null,
          "old_line_content": "  return Cast<HloSliceInstruction>(this)->mutable_slice_starts();",
          "new_line_content": "const std::vector<int64>& HloInstruction::slice_starts() const {",
          "content_same": false
        },
        {
          "line": 3822,
          "old_api": "slice_limits",
          "new_api": null,
          "old_text": "Cast<HloSliceInstruction>(this)->slice_limits(dimension)",
          "new_text": null,
          "old_line_content": "  return Cast<HloSliceInstruction>(this)->slice_limits(dimension);",
          "new_line_content": "std::vector<int64>* HloInstruction::mutable_slice_starts() {",
          "content_same": false
        },
        {
          "line": 3826,
          "old_api": "slice_limits",
          "new_api": null,
          "old_text": "Cast<HloSliceInstruction>(this)->slice_limits()",
          "new_text": null,
          "old_line_content": "  return Cast<HloSliceInstruction>(this)->slice_limits();",
          "new_line_content": "int64 HloInstruction::slice_limits(int64 dimension) const {",
          "content_same": false
        },
        {
          "line": 3830,
          "old_api": "mutable_slice_limits",
          "new_api": null,
          "old_text": "Cast<HloSliceInstruction>(this)->mutable_slice_limits()",
          "new_text": null,
          "old_line_content": "  return Cast<HloSliceInstruction>(this)->mutable_slice_limits();",
          "new_line_content": "const std::vector<int64>& HloInstruction::slice_limits() const {",
          "content_same": false
        },
        {
          "line": 3834,
          "old_api": "slice_strides",
          "new_api": null,
          "old_text": "Cast<HloSliceInstruction>(this)->slice_strides(dimension)",
          "new_text": null,
          "old_line_content": "  return Cast<HloSliceInstruction>(this)->slice_strides(dimension);",
          "new_line_content": "std::vector<int64>* HloInstruction::mutable_slice_limits() {",
          "content_same": false
        },
        {
          "line": 3838,
          "old_api": "slice_strides",
          "new_api": null,
          "old_text": "Cast<HloSliceInstruction>(this)->slice_strides()",
          "new_text": null,
          "old_line_content": "  return Cast<HloSliceInstruction>(this)->slice_strides();",
          "new_line_content": "int64 HloInstruction::slice_strides(int64 dimension) const {",
          "content_same": false
        },
        {
          "line": 3842,
          "old_api": "mutable_slice_strides",
          "new_api": null,
          "old_text": "Cast<HloSliceInstruction>(this)->mutable_slice_strides()",
          "new_text": null,
          "old_line_content": "  return Cast<HloSliceInstruction>(this)->mutable_slice_strides();",
          "new_line_content": "const std::vector<int64>& HloInstruction::slice_strides() const {",
          "content_same": false
        },
        {
          "line": 3846,
          "old_api": "literal",
          "new_api": null,
          "old_text": "Cast<HloConstantInstruction>(this)->literal()",
          "new_text": null,
          "old_line_content": "  return Cast<HloConstantInstruction>(this)->literal();",
          "new_line_content": "std::vector<int64>* HloInstruction::mutable_slice_strides() {",
          "content_same": false
        },
        {
          "line": 3850,
          "old_api": "DynCast<HloConstantInstruction>(this)",
          "new_api": null,
          "old_text": "DynCast<HloConstantInstruction>(this)",
          "new_text": null,
          "old_line_content": "  return DynCast<HloConstantInstruction>(this) != nullptr;",
          "new_line_content": "const Literal& HloInstruction::literal() const {",
          "content_same": false
        },
        {
          "line": 3859,
          "old_api": "TracingTag",
          "new_api": null,
          "old_text": "Cast<HloTraceInstruction>(this)->TracingTag()",
          "new_text": null,
          "old_line_content": "  return Cast<HloTraceInstruction>(this)->TracingTag();",
          "new_line_content": "                                      const ShapeIndex& shape_index) {",
          "content_same": false
        },
        {
          "line": 3863,
          "old_api": "AddFusionOperand",
          "new_api": null,
          "old_text": "Cast<HloFusionInstruction>(this)->AddFusionOperand(new_operand)",
          "new_text": null,
          "old_line_content": "  return Cast<HloFusionInstruction>(this)->AddFusionOperand(new_operand);",
          "new_line_content": "string HloInstruction::TracingTag() const {",
          "content_same": false
        },
        {
          "line": 3869,
          "old_api": "MergeFusionInstruction",
          "new_api": null,
          "old_text": "Cast<HloFusionInstruction>(this)->MergeFusionInstruction(\n      Cast<HloFusionInstruction>(instruction_to_merge))",
          "new_text": null,
          "old_line_content": "  return Cast<HloFusionInstruction>(this)->MergeFusionInstruction(",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3870,
          "old_api": "Cast<HloFusionInstruction>(instruction_to_merge)",
          "new_api": null,
          "old_text": "Cast<HloFusionInstruction>(instruction_to_merge)",
          "new_text": null,
          "old_line_content": "      Cast<HloFusionInstruction>(instruction_to_merge));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3876,
          "old_api": "MergeFusionInstructionIntoMultiOutput",
          "new_api": null,
          "old_text": "Cast<HloFusionInstruction>(this)\n      ->MergeFusionInstructionIntoMultiOutput(\n          Cast<HloFusionInstruction>(instruction_to_merge))",
          "new_text": null,
          "old_line_content": "  return Cast<HloFusionInstruction>(this)",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3878,
          "old_api": "Cast<HloFusionInstruction>(instruction_to_merge)",
          "new_api": null,
          "old_text": "Cast<HloFusionInstruction>(instruction_to_merge)",
          "new_text": null,
          "old_line_content": "          Cast<HloFusionInstruction>(instruction_to_merge));",
          "new_line_content": "// Delegates to HloFusionInstruction::MergeFusionInstructionIntoMultiOutput.",
          "content_same": false
        },
        {
          "line": 3897,
          "old_api": "fused_expression_root",
          "new_api": null,
          "old_text": "Cast<HloFusionInstruction>(this)->fused_expression_root()",
          "new_text": null,
          "old_line_content": "  return Cast<HloFusionInstruction>(this)->fused_expression_root();",
          "new_line_content": "HloComputation* HloInstruction::fused_instructions_computation() const {",
          "content_same": false
        },
        {
          "line": 3389,
          "old_api": "std::swap(a, b)",
          "new_api": null,
          "old_text": "std::swap(a, b)",
          "new_text": null,
          "old_line_content": "      std::swap(a, b);",
          "new_line_content": "  // Two kUses uses which have different permutations count as kReuse.",
          "content_same": false
        },
        {
          "line": 3903,
          "old_api": "fused_instructions",
          "new_api": null,
          "old_text": "Cast<HloFusionInstruction>(this)->fused_instructions()",
          "new_text": null,
          "old_line_content": "  return Cast<HloFusionInstruction>(this)->fused_instructions();",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3909,
          "old_api": "fused_instructions",
          "new_api": null,
          "old_text": "Cast<HloFusionInstruction>(this)->fused_instructions()",
          "new_text": null,
          "old_line_content": "  return Cast<HloFusionInstruction>(this)->fused_instructions();",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3913,
          "old_api": "fused_instruction_count",
          "new_api": null,
          "old_text": "Cast<HloFusionInstruction>(this)->fused_instruction_count()",
          "new_text": null,
          "old_line_content": "  return Cast<HloFusionInstruction>(this)->fused_instruction_count();",
          "new_line_content": "HloInstruction::fused_instructions() {",
          "content_same": false
        },
        {
          "line": 3917,
          "old_api": "fused_parameter",
          "new_api": null,
          "old_text": "Cast<HloFusionInstruction>(this)->fused_parameter(parameter_number)",
          "new_text": null,
          "old_line_content": "  return Cast<HloFusionInstruction>(this)->fused_parameter(parameter_number);",
          "new_line_content": "int64 HloInstruction::fused_instruction_count() const {",
          "content_same": false
        },
        {
          "line": 3921,
          "old_api": "fused_parameters",
          "new_api": null,
          "old_text": "Cast<HloFusionInstruction>(this)->fused_parameters()",
          "new_text": null,
          "old_line_content": "  return Cast<HloFusionInstruction>(this)->fused_parameters();",
          "new_line_content": "HloInstruction* HloInstruction::fused_parameter(int64 parameter_number) const {",
          "content_same": false
        },
        {
          "line": 3925,
          "old_api": "DynCast<HloFusionInstruction>(this)",
          "new_api": null,
          "old_text": "DynCast<HloFusionInstruction>(this)",
          "new_text": null,
          "old_line_content": "  const HloFusionInstruction* fusion = DynCast<HloFusionInstruction>(this);",
          "new_line_content": "const std::vector<HloInstruction*>& HloInstruction::fused_parameters() const {",
          "content_same": false
        },
        {
          "line": 3934,
          "old_api": "set_fusion_kind",
          "new_api": null,
          "old_text": "Cast<HloFusionInstruction>(this)->set_fusion_kind(kind)",
          "new_text": null,
          "old_line_content": "  return Cast<HloFusionInstruction>(this)->set_fusion_kind(kind);",
          "new_line_content": "HloInstruction::FusionKind HloInstruction::fusion_kind() const {",
          "content_same": false
        },
        {
          "line": 3938,
          "old_api": "random_distribution",
          "new_api": null,
          "old_text": "Cast<HloRngInstruction>(this)->random_distribution()",
          "new_text": null,
          "old_line_content": "  return Cast<HloRngInstruction>(this)->random_distribution();",
          "new_line_content": "void HloInstruction::set_fusion_kind(FusionKind kind) {",
          "content_same": false
        },
        {
          "line": 3942,
          "old_api": "parameter_number",
          "new_api": null,
          "old_text": "Cast<HloParameterInstruction>(this)->parameter_number()",
          "new_text": null,
          "old_line_content": "  return Cast<HloParameterInstruction>(this)->parameter_number();",
          "new_line_content": "RandomDistribution HloInstruction::random_distribution() const {",
          "content_same": false
        },
        {
          "line": 3954,
          "old_api": "set_parameter_replicated_at_leaf_buffers",
          "new_api": null,
          "old_text": "Cast<HloParameterInstruction>(this)\n      ->set_parameter_replicated_at_leaf_buffers(\n          parameter_replicated_at_leaf_buffers)",
          "new_text": null,
          "old_line_content": "  return Cast<HloParameterInstruction>(this)",
          "new_line_content": "          parameter_replicated_at_leaf_buffers);",
          "content_same": false
        },
        {
          "line": 3443,
          "old_api": "shape",
          "new_api": null,
          "old_text": "shape()",
          "new_text": null,
          "old_line_content": "      return ShapeUtil::DropDegenerateDimensions(shape()) ==",
          "new_line_content": "  switch (opcode_) {",
          "content_same": false
        },
        {
          "line": 3444,
          "old_api": "shape",
          "new_api": null,
          "old_text": "operand(0)->shape()",
          "new_text": null,
          "old_line_content": "                     ShapeUtil::DropDegenerateDimensions(operand(0)->shape())",
          "new_line_content": "    case HloOpcode::kBitcast:",
          "content_same": false
        },
        {
          "line": 3446,
          "old_api": "UseKind::Permuting(this)",
          "new_api": null,
          "old_text": "UseKind::Permuting(this)",
          "new_text": null,
          "old_line_content": "                 : UseKind::Permuting(this);",
          "new_line_content": "      // doesn't permute its elements, so it counts as a plain, non-permuting",
          "content_same": false
        },
        {
          "line": 3961,
          "old_api": "parameter_replicated_at_leaf_buffers",
          "new_api": null,
          "old_text": "Cast<HloParameterInstruction>(this)\n      ->parameter_replicated_at_leaf_buffers()",
          "new_text": null,
          "old_line_content": "  return Cast<HloParameterInstruction>(this)",
          "new_line_content": "          parameter_replicated_at_leaf_buffers);",
          "content_same": false
        },
        {
          "line": 3452,
          "old_api": "UseKind::Permuting(this)",
          "new_api": null,
          "old_text": "UseKind::Permuting(this)",
          "new_text": null,
          "old_line_content": "      return UseKind::Permuting(this);",
          "new_line_content": "    case HloOpcode::kConcatenate:",
          "content_same": false
        },
        {
          "line": 3455,
          "old_api": "UseKind::Permuting(this)",
          "new_api": null,
          "old_text": "UseKind::Permuting(this)",
          "new_text": null,
          "old_line_content": "      return operand_num > 0 ? UseKind::kReuse : UseKind::Permuting(this);",
          "new_line_content": "    case HloOpcode::kSlice:",
          "content_same": false
        },
        {
          "line": 3458,
          "old_api": "input_count",
          "new_api": null,
          "old_text": "Cast<HloReduceInstruction>(this)->input_count()",
          "new_text": null,
          "old_line_content": "      return operand_num >= Cast<HloReduceInstruction>(this)->input_count()",
          "new_line_content": "    case HloOpcode::kPad:",
          "content_same": false
        },
        {
          "line": 3970,
          "old_api": "set_tuple_index",
          "new_api": null,
          "old_text": "Cast<HloGetTupleElementInstruction>(this)->set_tuple_index(\n      new_tuple_index)",
          "new_text": null,
          "old_line_content": "  return Cast<HloGetTupleElementInstruction>(this)->set_tuple_index(",
          "new_line_content": "int64 HloInstruction::tuple_index() const {",
          "content_same": false
        },
        {
          "line": 3464,
          "old_api": "fused_expression_root",
          "new_api": null,
          "old_text": "fused_expression_root()",
          "new_text": null,
          "old_line_content": "                                                *fused_expression_root());",
          "new_line_content": "                 ? UseKind::kReuse",
          "content_same": false
        },
        {
          "line": 3467,
          "old_api": "dimensions_size",
          "new_api": null,
          "old_text": "shape().dimensions_size()",
          "new_text": null,
          "old_line_content": "      if (shape().dimensions_size() <= 1) {",
          "new_line_content": "      // Uses the memoizing, recursive computation defined above.",
          "content_same": false
        },
        {
          "line": 3979,
          "old_api": "mantissa_bits",
          "new_api": null,
          "old_text": "Cast<HloReducePrecisionInstruction>(this)->mantissa_bits()",
          "new_text": null,
          "old_line_content": "  return Cast<HloReducePrecisionInstruction>(this)->mantissa_bits();",
          "new_line_content": "int32 HloInstruction::exponent_bits() const {",
          "content_same": false
        },
        {
          "line": 3983,
          "old_api": "infeed_config",
          "new_api": null,
          "old_text": "Cast<HloInfeedInstruction>(this)->infeed_config()",
          "new_text": null,
          "old_line_content": "  return Cast<HloInfeedInstruction>(this)->infeed_config();",
          "new_line_content": "int32 HloInstruction::mantissa_bits() const {",
          "content_same": false
        },
        {
          "line": 3987,
          "old_api": "set_infeed_config",
          "new_api": null,
          "old_text": "Cast<HloInfeedInstruction>(this)->set_infeed_config(config)",
          "new_text": null,
          "old_line_content": "  return Cast<HloInfeedInstruction>(this)->set_infeed_config(config);",
          "new_line_content": "string HloInstruction::infeed_config() const {",
          "content_same": false
        },
        {
          "line": 3991,
          "old_api": "outfeed_shape",
          "new_api": null,
          "old_text": "Cast<HloOutfeedInstruction>(this)->outfeed_shape()",
          "new_text": null,
          "old_line_content": "  return Cast<HloOutfeedInstruction>(this)->outfeed_shape();",
          "new_line_content": "void HloInstruction::set_infeed_config(const string& config) {",
          "content_same": false
        },
        {
          "line": 3483,
          "old_api": "UseKind::Permuting(this)",
          "new_api": null,
          "old_text": "UseKind::Permuting(this)",
          "new_text": null,
          "old_line_content": "      return operand_num == 0 ? UseKind::kUse : UseKind::Permuting(this);",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 3995,
          "old_api": "outfeed_config",
          "new_api": null,
          "old_text": "Cast<HloOutfeedInstruction>(this)->outfeed_config()",
          "new_text": null,
          "old_line_content": "  return Cast<HloOutfeedInstruction>(this)->outfeed_config();",
          "new_line_content": "const Shape& HloInstruction::outfeed_shape() const {",
          "content_same": false
        },
        {
          "line": 3485,
          "old_api": "IsElementwise",
          "new_api": null,
          "old_text": "IsElementwise()",
          "new_text": null,
          "old_line_content": "      return IsElementwise() ? UseKind::kUse : UseKind::kReuse;",
          "new_line_content": "    case HloOpcode::kGather:",
          "content_same": false
        },
        {
          "line": 3999,
          "old_api": "set_outfeed_config",
          "new_api": null,
          "old_text": "Cast<HloOutfeedInstruction>(this)->set_outfeed_config(config)",
          "new_text": null,
          "old_line_content": "  return Cast<HloOutfeedInstruction>(this)->set_outfeed_config(config);",
          "new_line_content": "const string& HloInstruction::outfeed_config() const {",
          "content_same": false
        },
        {
          "line": 4003,
          "old_api": "replica_groups",
          "new_api": null,
          "old_text": "Cast<HloCollectiveInstruction>(this)->replica_groups()",
          "new_text": null,
          "old_line_content": "  return Cast<HloCollectiveInstruction>(this)->replica_groups();",
          "new_line_content": "void HloInstruction::set_outfeed_config(const string& config) {",
          "content_same": false
        },
        {
          "line": 3492,
          "old_api": "std::vector<int64>()",
          "new_api": null,
          "old_text": "std::vector<int64>()",
          "new_text": null,
          "old_line_content": "    return std::make_tuple(false, std::vector<int64>(), std::vector<int64>());",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3494,
          "old_api": "operand",
          "new_api": null,
          "old_text": "operand(0)",
          "new_text": null,
          "old_line_content": "  return ShapeUtil::InsertedOrDeleted1SizedDimensions(operand(0)->shape_,",
          "new_line_content": "std::tuple<bool, std::vector<int64>, std::vector<int64>>",
          "content_same": false
        },
        {
          "line": 4012,
          "old_api": "channel_id",
          "new_api": null,
          "old_text": "Cast<HloChannelInstruction>(this)->channel_id()",
          "new_text": null,
          "old_line_content": "  return Cast<HloChannelInstruction>(this)->channel_id();",
          "new_line_content": "HloInstruction::source_target_pairs() const {",
          "content_same": false
        },
        {
          "line": 4016,
          "old_api": "set_channel_id",
          "new_api": null,
          "old_text": "Cast<HloChannelInstruction>(this)->set_channel_id(channel_id)",
          "new_text": null,
          "old_line_content": "  return Cast<HloChannelInstruction>(this)->set_channel_id(channel_id);",
          "new_line_content": "absl::optional<int64> HloInstruction::channel_id() const {",
          "content_same": false
        },
        {
          "line": 4022,
          "old_api": "convolution_dimension_numbers",
          "new_api": null,
          "old_text": "convolution->convolution_dimension_numbers()",
          "new_text": null,
          "old_line_content": "    return convolution->convolution_dimension_numbers();",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4024,
          "old_api": "DynCast<HloCustomCallInstruction>(this)",
          "new_api": null,
          "old_text": "DynCast<HloCustomCallInstruction>(this)",
          "new_text": null,
          "old_line_content": "  if (auto custom_call = DynCast<HloCustomCallInstruction>(this)) {",
          "new_line_content": "const ConvolutionDimensionNumbers&",
          "content_same": false
        },
        {
          "line": 4025,
          "old_api": "convolution_dimension_numbers",
          "new_api": null,
          "old_text": "custom_call->convolution_dimension_numbers()",
          "new_text": null,
          "old_line_content": "    return custom_call->convolution_dimension_numbers();",
          "new_line_content": "HloInstruction::convolution_dimension_numbers() const {",
          "content_same": false
        },
        {
          "line": 4033,
          "old_api": "set_convolution_dimension_numbers",
          "new_api": null,
          "old_text": "convolution->set_convolution_dimension_numbers(dnums)",
          "new_text": null,
          "old_line_content": "    convolution->set_convolution_dimension_numbers(dnums);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4034,
          "old_api": "DynCast<HloCustomCallInstruction>(this)",
          "new_api": null,
          "old_text": "DynCast<HloCustomCallInstruction>(this)",
          "new_text": null,
          "old_line_content": "  } else if (auto custom_call = DynCast<HloCustomCallInstruction>(this)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4035,
          "old_api": "set_convolution_dimension_numbers",
          "new_api": null,
          "old_text": "custom_call->set_convolution_dimension_numbers(dnums)",
          "new_text": null,
          "old_line_content": "    custom_call->set_convolution_dimension_numbers(dnums);",
          "new_line_content": "void HloInstruction::set_convolution_dimension_numbers(",
          "content_same": false
        },
        {
          "line": 3525,
          "old_api": "InvalidArgument",
          "new_api": null,
          "old_text": "InvalidArgument(\"Unknown fusion kind: %s\", kind_name)",
          "new_text": null,
          "old_line_content": "  return InvalidArgument(\"Unknown fusion kind: %s\", kind_name);",
          "new_line_content": "    return HloInstruction::FusionKind::kOutput;",
          "content_same": false
        },
        {
          "line": 3531,
          "old_api": "map",
          "new_api": null,
          "old_text": "frontend_attributes.map().end()",
          "new_text": null,
          "old_line_content": "      frontend_attributes.map().begin(), frontend_attributes.map().end());",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3532,
          "old_api": "absl::c_sort(sorted_attributes)",
          "new_api": null,
          "old_text": "absl::c_sort(sorted_attributes)",
          "new_text": null,
          "old_line_content": "  absl::c_sort(sorted_attributes);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4043,
          "old_api": "feature_group_count",
          "new_api": null,
          "old_text": "convolution->feature_group_count()",
          "new_text": null,
          "old_line_content": "    return convolution->feature_group_count();",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 4045,
          "old_api": "feature_group_count",
          "new_api": null,
          "old_text": "Cast<HloCustomCallInstruction>(this)->feature_group_count()",
          "new_text": null,
          "old_line_content": "  return Cast<HloCustomCallInstruction>(this)->feature_group_count();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4049,
          "old_api": "DynCast<HloConvolutionInstruction>(this)",
          "new_api": null,
          "old_text": "DynCast<HloConvolutionInstruction>(this)",
          "new_text": null,
          "old_line_content": "  if (auto convolution = DynCast<HloConvolutionInstruction>(this)) {",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 3539,
          "old_api": "absl::StrFormat(\"{%s}\",\n                         absl::StrJoin(sorted_attributes, \",\", formatter))",
          "new_api": null,
          "old_text": "absl::StrFormat(\"{%s}\",\n                         absl::StrJoin(sorted_attributes, \",\", formatter))",
          "new_text": null,
          "old_line_content": "  return absl::StrFormat(\"{%s}\",",
          "new_line_content": "  // e.g., frontend_attributes={name=\"value_a\",type=\"int32\"}.",
          "content_same": false
        },
        {
          "line": 3540,
          "old_api": "absl::StrJoin(sorted_attributes, \",\", formatter)",
          "new_api": null,
          "old_text": "absl::StrJoin(sorted_attributes, \",\", formatter)",
          "new_text": null,
          "old_line_content": "                         absl::StrJoin(sorted_attributes, \",\", formatter));",
          "new_line_content": "  const auto formatter = [](string* out,",
          "content_same": false
        },
        {
          "line": 4052,
          "old_api": "set_feature_group_count",
          "new_api": null,
          "old_text": "Cast<HloCustomCallInstruction>(this)->set_feature_group_count(\n      feature_group_count)",
          "new_text": null,
          "old_line_content": "  Cast<HloCustomCallInstruction>(this)->set_feature_group_count(",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4058,
          "old_api": "batch_group_count",
          "new_api": null,
          "old_text": "convolution->batch_group_count()",
          "new_text": null,
          "old_line_content": "    return convolution->batch_group_count();",
          "new_line_content": "      feature_group_count);",
          "content_same": false
        },
        {
          "line": 3547,
          "old_api": "interior_padding",
          "new_api": null,
          "old_text": "dim.interior_padding()",
          "new_text": null,
          "old_line_content": "                       return dim.interior_padding() != 0;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4060,
          "old_api": "batch_group_count",
          "new_api": null,
          "old_text": "Cast<HloCustomCallInstruction>(this)->batch_group_count()",
          "new_text": null,
          "old_line_content": "  return Cast<HloCustomCallInstruction>(this)->batch_group_count();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3549,
          "old_api": "dimensions",
          "new_api": null,
          "old_text": "StrJoin(\n      padding.dimensions(), \"x\",\n      [&](string* out, const PaddingConfig::PaddingConfigDimension& dim) {\n        StrAppend(\n            out, dim.edge_padding_low(), \"_\", dim.edge_padding_high(),\n            has_interior_padding ? StrCat(\"_\", dim.interior_padding()) : \"\");\n      })",
          "new_text": null,
          "old_line_content": "  return StrJoin(",
          "new_line_content": "  bool has_interior_padding =",
          "content_same": false
        },
        {
          "line": 4064,
          "old_api": "DynCast<HloConvolutionInstruction>(this)",
          "new_api": null,
          "old_text": "DynCast<HloConvolutionInstruction>(this)",
          "new_text": null,
          "old_line_content": "  if (auto convolution = DynCast<HloConvolutionInstruction>(this)) {",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 3553,
          "old_api": "edge_padding_high",
          "new_api": null,
          "old_text": "dim.edge_padding_high()",
          "new_text": null,
          "old_line_content": "            out, dim.edge_padding_low(), \"_\", dim.edge_padding_high(),",
          "new_line_content": "                     });",
          "content_same": false
        },
        {
          "line": 4067,
          "old_api": "set_batch_group_count",
          "new_api": null,
          "old_text": "Cast<HloCustomCallInstruction>(this)->set_batch_group_count(\n      batch_group_count)",
          "new_text": null,
          "old_line_content": "  Cast<HloCustomCallInstruction>(this)->set_batch_group_count(",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3560,
          "old_api": "op_type",
          "new_api": null,
          "old_text": "metadata.op_type().empty()",
          "new_text": null,
          "old_line_content": "  if (!metadata.op_type().empty()) {",
          "new_line_content": "      });",
          "content_same": false
        },
        {
          "line": 3561,
          "old_api": "op_type",
          "new_api": null,
          "old_text": "metadata.op_type()",
          "new_text": null,
          "old_line_content": "    result.push_back(StrCat(\"op_type=\\\"\", CEscape(metadata.op_type()), \"\\\"\"));",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3563,
          "old_api": "op_name",
          "new_api": null,
          "old_text": "metadata.op_name().empty()",
          "new_text": null,
          "old_line_content": "  if (!metadata.op_name().empty()) {",
          "new_line_content": "string OpMetadataToString(const OpMetadata& metadata) {",
          "content_same": false
        },
        {
          "line": 3564,
          "old_api": "op_name",
          "new_api": null,
          "old_text": "metadata.op_name()",
          "new_text": null,
          "old_line_content": "    result.push_back(StrCat(\"op_name=\\\"\", CEscape(metadata.op_name()), \"\\\"\"));",
          "new_line_content": "  std::vector<string> result;",
          "content_same": false
        },
        {
          "line": 4076,
          "old_api": "scatter",
          "new_api": null,
          "old_text": "Cast<HloSelectAndScatterInstruction>(this)->scatter()",
          "new_text": null,
          "old_line_content": "  return Cast<HloSelectAndScatterInstruction>(this)->scatter();",
          "new_line_content": "HloComputation* HloInstruction::select() const {",
          "content_same": false
        },
        {
          "line": 3567,
          "old_api": "push_back",
          "new_api": null,
          "old_text": "result.push_back(\n        StrCat(\"source_file=\\\"\", CEscape(metadata.source_file()), \"\\\"\"))",
          "new_text": null,
          "old_line_content": "    result.push_back(",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 4080,
          "old_api": "set_select",
          "new_api": null,
          "old_text": "Cast<HloSelectAndScatterInstruction>(this)->set_select(computation)",
          "new_text": null,
          "old_line_content": "  return Cast<HloSelectAndScatterInstruction>(this)->set_select(computation);",
          "new_line_content": "HloComputation* HloInstruction::scatter() const {",
          "content_same": false
        },
        {
          "line": 3570,
          "old_api": "source_line",
          "new_api": null,
          "old_text": "metadata.source_line()",
          "new_text": null,
          "old_line_content": "  if (metadata.source_line() != 0) {",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 4084,
          "old_api": "set_scatter",
          "new_api": null,
          "old_text": "Cast<HloSelectAndScatterInstruction>(this)->set_scatter(computation)",
          "new_text": null,
          "old_line_content": "  return Cast<HloSelectAndScatterInstruction>(this)->set_scatter(computation);",
          "new_line_content": "void HloInstruction::set_select(HloComputation* computation) {",
          "content_same": false
        },
        {
          "line": 4088,
          "old_api": "custom_call_target",
          "new_api": null,
          "old_text": "Cast<HloCustomCallInstruction>(this)->custom_call_target()",
          "new_text": null,
          "old_line_content": "  return Cast<HloCustomCallInstruction>(this)->custom_call_target();",
          "new_line_content": "void HloInstruction::set_scatter(HloComputation* computation) {",
          "content_same": false
        },
        {
          "line": 3577,
          "old_api": "RandomDistribution_Name",
          "new_api": null,
          "old_text": "RandomDistribution_Name(distribution)",
          "new_text": null,
          "old_line_content": "  return absl::AsciiStrToLower(RandomDistribution_Name(distribution));",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 3580,
          "old_api": "RandomAlgorithm_Name",
          "new_api": null,
          "old_text": "RandomAlgorithm_Name(algorithm)",
          "new_text": null,
          "old_line_content": "  return absl::AsciiStrToLower(RandomAlgorithm_Name(algorithm));",
          "new_line_content": "",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 59,
      "total_additions": 152,
      "total_deletions": 152,
      "total_api_changes": 363
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 5,
        "api_related_lines": 363,
        "non_api_lines": 5,
        "non_api_line_numbers": [
          3373,
          3374,
          3375,
          3376,
          3377
        ]
      }
    },
    "api_calls_before": 2023,
    "api_calls_after": 2023,
    "diff_info": {
      "added_lines": 5,
      "removed_lines": 0,
      "total_diff_lines": 17
    }
  }
}
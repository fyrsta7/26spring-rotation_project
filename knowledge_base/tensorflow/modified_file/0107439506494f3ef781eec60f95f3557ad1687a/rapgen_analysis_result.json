{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/tensorflow/modified_file/0107439506494f3ef781eec60f95f3557ad1687a",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/tensorflow/modified_file/0107439506494f3ef781eec60f95f3557ad1687a/before.h",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/tensorflow/modified_file/0107439506494f3ef781eec60f95f3557ad1687a/after.h",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/tensorflow/modified_file/0107439506494f3ef781eec60f95f3557ad1687a/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [],
      "additions": [
        {
          "line": 97,
          "old_api": null,
          "new_api": "UpdateList",
          "old_text": null,
          "new_text": "UpdateList(&list, to_add, to_remove)",
          "old_line_content": "    return list;",
          "new_line_content": "    UpdateList(&list, to_add, to_remove);",
          "content_same": false
        },
        {
          "line": 195,
          "old_api": null,
          "new_api": "IsPseudoFastMath",
          "old_text": null,
          "new_text": "IsPseudoFastMath()",
          "old_line_content": "      return gtl::FlatSet<string>{};",
          "new_line_content": "    if (IsPseudoFastMath()) {",
          "content_same": false
        },
        {
          "line": 167,
          "old_api": null,
          "new_api": "IsPseudoFastMath",
          "old_text": null,
          "new_text": "IsPseudoFastMath()",
          "old_line_content": "      return gtl::FlatSet<string>{};",
          "new_line_content": "    if (IsPseudoFastMath()) {",
          "content_same": false
        },
        {
          "line": 104,
          "old_api": null,
          "new_api": "IsPseudoFastMath",
          "old_text": null,
          "new_text": "IsPseudoFastMath()",
          "old_line_content": "      return gtl::FlatSet<string>{};",
          "new_line_content": "    if (IsPseudoFastMath()) {",
          "content_same": false
        },
        {
          "line": 202,
          "old_api": null,
          "new_api": "ReadStringFromEnvVar",
          "old_text": null,
          "new_text": "ReadStringFromEnvVar(\n        \"TF_AUTO_MIXED_PRECISION_GRAPH_REWRITE_CLEARLIST_ADD\", \"\", &to_add)",
          "old_line_content": "        \"TF_AUTO_MIXED_PRECISION_GRAPH_REWRITE_CLEARLIST_ADD\", \"\", &to_add));",
          "new_line_content": "    TF_CHECK_OK(ReadStringFromEnvVar(",
          "content_same": false
        },
        {
          "line": 171,
          "old_api": null,
          "new_api": "ReadStringFromEnvVar",
          "old_text": null,
          "new_text": "ReadStringFromEnvVar(\n        \"TF_AUTO_MIXED_PRECISION_GRAPH_REWRITE_BLACKLIST_ADD\", \"\", &to_add)",
          "old_line_content": "        \"TF_AUTO_MIXED_PRECISION_GRAPH_REWRITE_BLACKLIST_ADD\", \"\", &to_add));",
          "new_line_content": "    TF_CHECK_OK(ReadStringFromEnvVar(",
          "content_same": false
        },
        {
          "line": 204,
          "old_api": null,
          "new_api": "ReadStringFromEnvVar",
          "old_text": null,
          "new_text": "ReadStringFromEnvVar(\n        \"TF_AUTO_MIXED_PRECISION_GRAPH_REWRITE_CLEARLIST_REMOVE\", \"\",\n        &to_remove)",
          "old_line_content": "        \"TF_AUTO_MIXED_PRECISION_GRAPH_REWRITE_CLEARLIST_REMOVE\", \"\",",
          "new_line_content": "    TF_CHECK_OK(ReadStringFromEnvVar(",
          "content_same": false
        },
        {
          "line": 173,
          "old_api": null,
          "new_api": "ReadStringFromEnvVar",
          "old_text": null,
          "new_text": "ReadStringFromEnvVar(\n        \"TF_AUTO_MIXED_PRECISION_GRAPH_REWRITE_BLACKLIST_REMOVE\", \"\",\n        &to_remove)",
          "old_line_content": "        \"TF_AUTO_MIXED_PRECISION_GRAPH_REWRITE_BLACKLIST_REMOVE\", \"\",",
          "new_line_content": "    TF_CHECK_OK(ReadStringFromEnvVar(",
          "content_same": false
        },
        {
          "line": 108,
          "old_api": null,
          "new_api": "ReadStringFromEnvVar",
          "old_text": null,
          "new_text": "ReadStringFromEnvVar(\n        \"TF_AUTO_MIXED_PRECISION_GRAPH_REWRITE_GRAYLIST_ADD\", \"\", &to_add)",
          "old_line_content": "        \"TF_AUTO_MIXED_PRECISION_GRAPH_REWRITE_GRAYLIST_ADD\", \"\", &to_add));",
          "new_line_content": "    TF_CHECK_OK(ReadStringFromEnvVar(",
          "content_same": false
        },
        {
          "line": 110,
          "old_api": null,
          "new_api": "ReadStringFromEnvVar",
          "old_text": null,
          "new_text": "ReadStringFromEnvVar(\n        \"TF_AUTO_MIXED_PRECISION_GRAPH_REWRITE_GRAYLIST_REMOVE\", \"\",\n        &to_remove)",
          "old_line_content": "        \"TF_AUTO_MIXED_PRECISION_GRAPH_REWRITE_GRAYLIST_REMOVE\", \"\",",
          "new_line_content": "    TF_CHECK_OK(ReadStringFromEnvVar(",
          "content_same": false
        },
        {
          "line": 87,
          "old_api": null,
          "new_api": "insert",
          "old_text": null,
          "new_text": "list.insert(\"BatchMatMulV2\")",
          "old_line_content": "    }",
          "new_line_content": "      list.insert(\"BatchMatMulV2\");",
          "content_same": false
        },
        {
          "line": 188,
          "old_api": null,
          "new_api": "UpdateList",
          "old_text": null,
          "new_text": "UpdateList(&list, to_add, to_remove)",
          "old_line_content": "    return list;",
          "new_line_content": "    UpdateList(&list, to_add, to_remove);",
          "content_same": false
        },
        {
          "line": 317,
          "old_api": null,
          "new_api": "UpdateList",
          "old_text": null,
          "new_text": "UpdateList(&list, to_add, to_remove)",
          "old_line_content": "    return list;",
          "new_line_content": "    UpdateList(&list, to_add, to_remove);",
          "content_same": false
        },
        {
          "line": 95,
          "old_api": null,
          "new_api": "insert",
          "old_text": null,
          "new_text": "list.insert(\"Conv3DBackpropInputV2\")",
          "old_line_content": "    }",
          "new_line_content": "      list.insert(\"Conv3DBackpropInputV2\");",
          "content_same": false
        },
        {
          "line": 159,
          "old_api": null,
          "new_api": "UpdateList",
          "old_text": null,
          "new_text": "UpdateList(&list, to_add, to_remove)",
          "old_line_content": "    return list;",
          "new_line_content": "    UpdateList(&list, to_add, to_remove);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 96,
          "old_api": "UpdateList",
          "new_api": null,
          "old_text": "UpdateList(&list, to_add, to_remove)",
          "new_text": null,
          "old_line_content": "    UpdateList(&list, to_add, to_remove);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 194,
          "old_api": "IsPseudoFastMath",
          "new_api": null,
          "old_text": "IsPseudoFastMath()",
          "new_text": null,
          "old_line_content": "    if (IsPseudoFastMath()) {",
          "new_line_content": "  static gtl::FlatSet<string> ClearList() {",
          "content_same": false
        },
        {
          "line": 166,
          "old_api": "IsPseudoFastMath",
          "new_api": null,
          "old_text": "IsPseudoFastMath()",
          "new_text": null,
          "old_line_content": "    if (IsPseudoFastMath()) {",
          "new_line_content": "  static gtl::FlatSet<string> BlackList() {",
          "content_same": false
        },
        {
          "line": 103,
          "old_api": "IsPseudoFastMath",
          "new_api": null,
          "old_text": "IsPseudoFastMath()",
          "new_text": null,
          "old_line_content": "    if (IsPseudoFastMath()) {",
          "new_line_content": "  static gtl::FlatSet<string> GrayList() {",
          "content_same": false
        },
        {
          "line": 201,
          "old_api": "ReadStringFromEnvVar",
          "new_api": null,
          "old_text": "ReadStringFromEnvVar(\n        \"TF_AUTO_MIXED_PRECISION_GRAPH_REWRITE_CLEARLIST_ADD\", \"\", &to_add)",
          "new_text": null,
          "old_line_content": "    TF_CHECK_OK(ReadStringFromEnvVar(",
          "new_line_content": "    string to_add, to_remove;",
          "content_same": false
        },
        {
          "line": 170,
          "old_api": "ReadStringFromEnvVar",
          "new_api": null,
          "old_text": "ReadStringFromEnvVar(\n        \"TF_AUTO_MIXED_PRECISION_GRAPH_REWRITE_BLACKLIST_ADD\", \"\", &to_add)",
          "new_text": null,
          "old_line_content": "    TF_CHECK_OK(ReadStringFromEnvVar(",
          "new_line_content": "    string to_add, to_remove;",
          "content_same": false
        },
        {
          "line": 203,
          "old_api": "ReadStringFromEnvVar",
          "new_api": null,
          "old_text": "ReadStringFromEnvVar(\n        \"TF_AUTO_MIXED_PRECISION_GRAPH_REWRITE_CLEARLIST_REMOVE\", \"\",\n        &to_remove)",
          "new_text": null,
          "old_line_content": "    TF_CHECK_OK(ReadStringFromEnvVar(",
          "new_line_content": "        \"TF_AUTO_MIXED_PRECISION_GRAPH_REWRITE_CLEARLIST_ADD\", \"\", &to_add));",
          "content_same": false
        },
        {
          "line": 172,
          "old_api": "ReadStringFromEnvVar",
          "new_api": null,
          "old_text": "ReadStringFromEnvVar(\n        \"TF_AUTO_MIXED_PRECISION_GRAPH_REWRITE_BLACKLIST_REMOVE\", \"\",\n        &to_remove)",
          "new_text": null,
          "old_line_content": "    TF_CHECK_OK(ReadStringFromEnvVar(",
          "new_line_content": "        \"TF_AUTO_MIXED_PRECISION_GRAPH_REWRITE_BLACKLIST_ADD\", \"\", &to_add));",
          "content_same": false
        },
        {
          "line": 107,
          "old_api": "ReadStringFromEnvVar",
          "new_api": null,
          "old_text": "ReadStringFromEnvVar(\n        \"TF_AUTO_MIXED_PRECISION_GRAPH_REWRITE_GRAYLIST_ADD\", \"\", &to_add)",
          "new_text": null,
          "old_line_content": "    TF_CHECK_OK(ReadStringFromEnvVar(",
          "new_line_content": "    string to_add, to_remove;",
          "content_same": false
        },
        {
          "line": 109,
          "old_api": "ReadStringFromEnvVar",
          "new_api": null,
          "old_text": "ReadStringFromEnvVar(\n        \"TF_AUTO_MIXED_PRECISION_GRAPH_REWRITE_GRAYLIST_REMOVE\", \"\",\n        &to_remove)",
          "new_text": null,
          "old_line_content": "    TF_CHECK_OK(ReadStringFromEnvVar(",
          "new_line_content": "        \"TF_AUTO_MIXED_PRECISION_GRAPH_REWRITE_GRAYLIST_ADD\", \"\", &to_add));",
          "content_same": false
        },
        {
          "line": 85,
          "old_api": "insert",
          "new_api": null,
          "old_text": "list.insert(\"BatchMatMul\")",
          "new_text": null,
          "old_line_content": "      list.insert(\"BatchMatMul\");",
          "new_line_content": "      // Fp16 BatchMatMul is slow before CUDA 9.1.",
          "content_same": false
        },
        {
          "line": 90,
          "old_api": "insert",
          "new_api": null,
          "old_text": "list.insert(\"Conv3D\")",
          "new_text": null,
          "old_line_content": "      list.insert(\"Conv3D\");",
          "new_line_content": "      // Fp16 3D conv is slow before CUDNN 7.6.2.",
          "content_same": false
        },
        {
          "line": 187,
          "old_api": "UpdateList",
          "new_api": null,
          "old_text": "UpdateList(&list, to_add, to_remove)",
          "new_text": null,
          "old_line_content": "    UpdateList(&list, to_add, to_remove);",
          "new_line_content": "    };",
          "content_same": false
        },
        {
          "line": 316,
          "old_api": "UpdateList",
          "new_api": null,
          "old_text": "UpdateList(&list, to_add, to_remove)",
          "new_text": null,
          "old_line_content": "    UpdateList(&list, to_add, to_remove);",
          "new_line_content": "    };",
          "content_same": false
        },
        {
          "line": 158,
          "old_api": "UpdateList",
          "new_api": null,
          "old_text": "UpdateList(&list, to_add, to_remove)",
          "new_text": null,
          "old_line_content": "    UpdateList(&list, to_add, to_remove);",
          "new_line_content": "    };",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 0,
      "total_additions": 15,
      "total_deletions": 15,
      "total_api_changes": 30
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 1,
        "api_related_lines": 30,
        "non_api_lines": 1,
        "non_api_line_numbers": [
          72
        ]
      }
    },
    "api_calls_before": 37,
    "api_calls_after": 37,
    "diff_info": {
      "added_lines": 1,
      "removed_lines": 0,
      "total_diff_lines": 13
    }
  }
}
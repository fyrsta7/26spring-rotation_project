{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/tensorflow/modified_file/72c0f1c0b2269fa29b866182c5a7e226d036918a",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/tensorflow/modified_file/72c0f1c0b2269fa29b866182c5a7e226d036918a/before.cc",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/tensorflow/modified_file/72c0f1c0b2269fa29b866182c5a7e226d036918a/after.cc",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/tensorflow/modified_file/72c0f1c0b2269fa29b866182c5a7e226d036918a/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": true,
    "api_changes": {
      "replacements": [
        {
          "line": 60,
          "old_api": "Check",
          "new_api": "ok",
          "old_text": "hints.Check(ModelHints::kAllowSpecialKernels)",
          "new_text": "TryFusedPointwiseConv(graph, first_node_id, precision, tensor_descriptors,\n                            consumed_nodes, gpu_subgraph)\n          .ok()",
          "old_line_content": "  if (hints.Check(ModelHints::kAllowSpecialKernels) &&",
          "new_line_content": "  if (TryFusedPointwiseConv(graph, first_node_id, precision, tensor_descriptors,",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 64,
          "old_api": null,
          "new_api": "absl::OkStatus()",
          "old_text": null,
          "new_text": "absl::OkStatus()",
          "old_line_content": "    gpu_subgraph->operations[0].name = \"slice_mul_mean_concat\";",
          "new_line_content": "    return absl::OkStatus();",
          "content_same": false
        },
        {
          "line": 73,
          "old_api": null,
          "new_api": "absl::NotFoundError(\"No special combination.\")",
          "old_text": null,
          "new_text": "absl::NotFoundError(\"No special combination.\")",
          "old_line_content": "  }",
          "new_line_content": "  return absl::NotFoundError(\"No special combination.\");",
          "content_same": false
        },
        {
          "line": 66,
          "old_api": null,
          "new_api": "ok",
          "old_text": null,
          "new_text": "TryMeanStdDevNormalization(gpu_info, precision, graph, first_node_id,\n                                 tensor_descriptors, consumed_nodes,\n                                 gpu_subgraph)\n          .ok()",
          "old_line_content": "  }",
          "new_line_content": "  if (TryMeanStdDevNormalization(gpu_info, precision, graph, first_node_id,",
          "content_same": false
        },
        {
          "line": 71,
          "old_api": null,
          "new_api": "absl::OkStatus()",
          "old_text": null,
          "new_text": "absl::OkStatus()",
          "old_line_content": "    gpu_subgraph->operations[0].name = \"mean_stddev_normalization\";",
          "new_line_content": "    return absl::OkStatus();",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 65,
          "old_api": "absl::OkStatus()",
          "new_api": null,
          "old_text": "absl::OkStatus()",
          "new_text": null,
          "old_line_content": "    return absl::OkStatus();",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 67,
          "old_api": "ok",
          "new_api": null,
          "old_text": "TryMeanStdDevNormalization(gpu_info, precision, graph, first_node_id,\n                                 tensor_descriptors, consumed_nodes,\n                                 gpu_subgraph)\n          .ok()",
          "new_text": null,
          "old_line_content": "  if (TryMeanStdDevNormalization(gpu_info, precision, graph, first_node_id,",
          "new_line_content": "                                 tensor_descriptors, consumed_nodes,",
          "content_same": false
        },
        {
          "line": 72,
          "old_api": "absl::OkStatus()",
          "new_api": null,
          "old_text": "absl::OkStatus()",
          "new_text": null,
          "old_line_content": "    return absl::OkStatus();",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 74,
          "old_api": "absl::NotFoundError(\"No special combination.\")",
          "new_api": null,
          "old_text": "absl::NotFoundError(\"No special combination.\")",
          "new_text": null,
          "old_line_content": "  return absl::NotFoundError(\"No special combination.\");",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 61,
          "old_api": "ok",
          "new_api": null,
          "old_text": "TryFusedPointwiseConv(graph, first_node_id, precision, tensor_descriptors,\n                            consumed_nodes, gpu_subgraph)\n          .ok()",
          "new_text": null,
          "old_line_content": "      TryFusedPointwiseConv(graph, first_node_id, precision, tensor_descriptors,",
          "new_line_content": "                            consumed_nodes, gpu_subgraph)",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 1,
      "total_additions": 4,
      "total_deletions": 5,
      "total_api_changes": 10
    },
    "non_api_changes": {
      "has_non_api_changes": false,
      "evidence": {
        "total_diff_lines": 2,
        "api_related_lines": 10,
        "non_api_lines": 0,
        "non_api_line_numbers": []
      }
    },
    "api_calls_before": 20,
    "api_calls_after": 19,
    "diff_info": {
      "added_lines": 1,
      "removed_lines": 2,
      "total_diff_lines": 15
    }
  }
}
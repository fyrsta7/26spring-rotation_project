{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/tensorflow/modified_file/9030ff3958d19ce51c508999e891e3b69b3016c8",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/tensorflow/modified_file/9030ff3958d19ce51c508999e891e3b69b3016c8/before.cc",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/tensorflow/modified_file/9030ff3958d19ce51c508999e891e3b69b3016c8/after.cc",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/tensorflow/modified_file/9030ff3958d19ce51c508999e891e3b69b3016c8/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": true,
    "api_changes": {
      "replacements": [
        {
          "line": 73,
          "old_api": "GenerateConvolutionTransposedCode",
          "new_api": "AddInt",
          "old_text": "GenerateConvolutionTransposedCode(definition_, gpu_info,\n                                            weights_are_buffer, block_size_)",
          "new_text": "args_.AddInt(\"kernel_size_y\", attr.weights.shape.h)",
          "old_line_content": "  code_ = GenerateConvolutionTransposedCode(definition_, gpu_info,",
          "new_line_content": "  args_.AddInt(\"kernel_size_y\", attr.weights.shape.h);",
          "content_same": false
        },
        {
          "line": 99,
          "old_api": "IsMidgard",
          "new_api": "IsMali",
          "old_text": "gpu_info.mali_info.IsMidgard()",
          "new_text": "gpu_info.IsMali()",
          "old_line_content": "    if (gpu_info.mali_info.IsMidgard()) {",
          "new_line_content": "  if (gpu_info.IsMali()) {",
          "content_same": false
        },
        {
          "line": 100,
          "old_api": "int4",
          "new_api": "IsMidgard",
          "old_text": "int4(2, 1, 1, 1)",
          "new_text": "gpu_info.mali_info.IsMidgard()",
          "old_line_content": "      block_size_ = is_f16 ? int4(2, 1, 1, 2) : int4(2, 1, 1, 1);",
          "new_line_content": "    if (gpu_info.mali_info.IsMidgard()) {",
          "content_same": false
        },
        {
          "line": 105,
          "old_api": "DivideRoundUp",
          "new_api": "push_back",
          "old_text": "DivideRoundUp(attr.weights.shape.o, 4)",
          "new_text": "compiler_options_.push_back(CompilerOptions::kClFastRelaxedMath)",
          "old_line_content": "  const int dst_depth = DivideRoundUp(attr.weights.shape.o, 4);",
          "new_line_content": "    compiler_options_.push_back(CompilerOptions::kClFastRelaxedMath);",
          "content_same": false
        },
        {
          "line": 107,
          "old_api": "IsMali",
          "new_api": "DivideRoundUp",
          "old_text": "gpu_info.IsMali()",
          "new_text": "DivideRoundUp(attr.weights.shape.o, 4)",
          "old_line_content": "    if (!gpu_info.IsMali()) {",
          "new_line_content": "  const int dst_depth = DivideRoundUp(attr.weights.shape.o, 4);",
          "content_same": false
        },
        {
          "line": 123,
          "old_api": "GenerateConvolutionTransposedCode",
          "new_api": "AddInt",
          "old_text": "GenerateConvolutionTransposedCode(definition_, gpu_info,\n                                            weights_are_buffer, block_size_)",
          "new_text": "args_.AddInt(\"kernel_size_z\", attr.weights.shape.d)",
          "old_line_content": "  code_ = GenerateConvolutionTransposedCode(definition_, gpu_info,",
          "new_line_content": "  args_.AddInt(\"kernel_size_z\", attr.weights.shape.d);",
          "content_same": false
        },
        {
          "line": 133,
          "old_api": "AddDstTensor",
          "new_api": "SetAddressMode",
          "old_text": "AddDstTensor(\"dst_tensor\", op_def.dst_tensors[0])",
          "new_text": "src_desc.SetAddressMode(AddressMode::kZero)",
          "old_line_content": "  AddDstTensor(\"dst_tensor\", op_def.dst_tensors[0]);",
          "new_line_content": "  src_desc.SetAddressMode(AddressMode::kZero);",
          "content_same": false
        },
        {
          "line": 135,
          "old_api": "size",
          "new_api": "AddDstTensor",
          "old_text": "op_def.src_tensors.size()",
          "new_text": "AddDstTensor(\"dst_tensor\", op_def.dst_tensors[0])",
          "old_line_content": "  if (op_def.src_tensors.size() != 1) {",
          "new_line_content": "  AddDstTensor(\"dst_tensor\", op_def.dst_tensors[0]);",
          "content_same": false
        },
        {
          "line": 163,
          "old_api": "std::to_string(s)",
          "new_api": "SupportsPointersInKernels",
          "old_text": "std::to_string(s)",
          "new_text": "gpu_info.SupportsPointersInKernels()",
          "old_line_content": "        f1 = \"FLT16_4567(weights_cache[\" + std::to_string(s) + \"])\";",
          "new_line_content": "      if (gpu_info.SupportsPointersInKernels()) {",
          "content_same": false
        },
        {
          "line": 175,
          "old_api": "std::to_string(s * 4 + 2)",
          "new_api": "std::to_string(s * 4 + 0)",
          "old_text": "std::to_string(s * 4 + 2)",
          "new_text": "std::to_string(s * 4 + 0)",
          "old_line_content": "      f2 = \"f\" + std::to_string(s * 4 + 2);",
          "new_line_content": "      f0 = \"f\" + std::to_string(s * 4 + 0);",
          "content_same": false
        },
        {
          "line": 176,
          "old_api": "std::to_string(s * 4 + 3)",
          "new_api": "std::to_string(s * 4 + 1)",
          "old_text": "std::to_string(s * 4 + 3)",
          "new_text": "std::to_string(s * 4 + 1)",
          "old_line_content": "      f3 = \"f\" + std::to_string(s * 4 + 3);",
          "new_line_content": "      f1 = \"f\" + std::to_string(s * 4 + 1);",
          "content_same": false
        },
        {
          "line": 178,
          "old_api": "IsI4O4",
          "new_api": "std::to_string(s * 4 + 3)",
          "old_text": "GetWeightsDescription().IsI4O4()",
          "new_text": "std::to_string(s * 4 + 3)",
          "old_line_content": "    if (GetWeightsDescription().IsI4O4()) {",
          "new_line_content": "      f3 = \"f\" + std::to_string(s * 4 + 3);",
          "content_same": false
        },
        {
          "line": 232,
          "old_api": "SupportsZeroClamp",
          "new_api": "size",
          "old_text": "src_def.SupportsZeroClamp(axis)",
          "new_text": "axes.size()",
          "old_line_content": "      if (src_def.HasAxis(axis) && !src_def.SupportsZeroClamp(axis) &&",
          "new_line_content": "    for (int i = 0; i < axes.size(); ++i) {",
          "content_same": false
        },
        {
          "line": 234,
          "old_api": "empty",
          "new_api": "SupportsZeroClamp",
          "old_text": "check.empty()",
          "new_text": "src_def.SupportsZeroClamp(axis)",
          "old_line_content": "        if (!check.empty()) {",
          "new_line_content": "      if (src_def.HasAxis(axis) && !src_def.SupportsZeroClamp(axis) &&",
          "content_same": false
        },
        {
          "line": 267,
          "old_api": "HasAxis",
          "new_api": "std::to_string(block_size.x)",
          "old_text": "src_def.HasAxis(Axis::DEPTH)",
          "new_text": "std::to_string(block_size.x)",
          "old_line_content": "  if (src_def.HasAxis(Axis::DEPTH)) {",
          "new_line_content": "  c += \"  dst_x = ceil_x * args.stride_x * \" + std::to_string(block_size.x) +",
          "content_same": false
        },
        {
          "line": 283,
          "old_api": "std::to_string(block_size.w)",
          "new_api": "std::to_string(block_size.y)",
          "old_text": "std::to_string(block_size.w)",
          "new_text": "std::to_string(block_size.y)",
          "old_line_content": "  c += \"  int dst_s = GLOBAL_ID_2 * \" + std::to_string(block_size.w) + \";\\n\";",
          "new_line_content": "  c += \"  dst_y = ceil_y * args.stride_y * \" + std::to_string(block_size.y) +",
          "content_same": false
        },
        {
          "line": 298,
          "old_api": "std::to_string(z)",
          "new_api": "std::to_string(s)",
          "old_text": "std::to_string(z)",
          "new_text": "std::to_string(s)",
          "old_line_content": "      const std::string zind = std::to_string(z);",
          "new_line_content": "    const std::string sind = std::to_string(s);",
          "content_same": false
        },
        {
          "line": 300,
          "old_api": "std::to_string(y)",
          "new_api": "std::to_string(z)",
          "old_text": "std::to_string(y)",
          "new_text": "std::to_string(z)",
          "old_line_content": "        const std::string yind = std::to_string(y);",
          "new_line_content": "      const std::string zind = std::to_string(z);",
          "content_same": false
        },
        {
          "line": 302,
          "old_api": "std::to_string(x)",
          "new_api": "std::to_string(y)",
          "old_text": "std::to_string(x)",
          "new_text": "std::to_string(y)",
          "old_line_content": "          const std::string xind = std::to_string(x);",
          "new_line_content": "        const std::string yind = std::to_string(y);",
          "content_same": false
        },
        {
          "line": 337,
          "old_api": "SupportsZeroClamp",
          "new_api": "std::to_string(z)",
          "old_text": "src_def.SupportsZeroClamp(Axis::DEPTH)",
          "new_text": "std::to_string(z)",
          "old_line_content": "      if (!src_def.SupportsZeroClamp(Axis::DEPTH)) {",
          "new_line_content": "      const std::string zindex = std::to_string(z);",
          "content_same": false
        },
        {
          "line": 362,
          "old_api": "HasAxis",
          "new_api": "std::to_string(y)",
          "old_text": "src_def.HasAxis(Axis::DEPTH)",
          "new_text": "std::to_string(y)",
          "old_line_content": "        src_def.HasAxis(Axis::DEPTH) ? \"src_y_copy\" : \"src_y\";",
          "new_line_content": "    const std::string yindex = std::to_string(y);",
          "content_same": false
        },
        {
          "line": 364,
          "old_api": "SupportsZeroClamp",
          "new_api": "HasAxis",
          "old_text": "src_def.SupportsZeroClamp(Axis::HEIGHT)",
          "new_text": "src_def.HasAxis(Axis::DEPTH)",
          "old_line_content": "    if (!src_def.SupportsZeroClamp(Axis::HEIGHT)) {",
          "new_line_content": "        src_def.HasAxis(Axis::DEPTH) ? \"src_y_copy\" : \"src_y\";",
          "content_same": false
        },
        {
          "line": 385,
          "old_api": "SupportsZeroClamp",
          "new_api": "std::to_string(x)",
          "old_text": "src_def.SupportsZeroClamp(Axis::WIDTH)",
          "new_text": "std::to_string(x)",
          "old_line_content": "    if (!src_def.SupportsZeroClamp(Axis::WIDTH)) {",
          "new_line_content": "    const std::string xindex = std::to_string(x);",
          "content_same": false
        },
        {
          "line": 400,
          "old_api": "std::to_string(y)",
          "new_api": "std::to_string(z)",
          "old_text": "std::to_string(y)",
          "new_text": "std::to_string(z)",
          "old_line_content": "      const std::string yind = std::to_string(y);",
          "new_line_content": "    const std::string zind = std::to_string(z);",
          "content_same": false
        },
        {
          "line": 402,
          "old_api": "std::to_string(x)",
          "new_api": "std::to_string(y)",
          "old_text": "std::to_string(x)",
          "new_text": "std::to_string(y)",
          "old_line_content": "        const std::string xind = std::to_string(x);",
          "new_line_content": "      const std::string yind = std::to_string(y);",
          "content_same": false
        },
        {
          "line": 404,
          "old_api": "generate_check",
          "new_api": "std::to_string(x)",
          "old_text": "generate_check(xind, yind, zind)",
          "new_text": "std::to_string(x)",
          "old_line_content": "        const std::string check = generate_check(xind, yind, zind);",
          "new_line_content": "        const std::string xind = std::to_string(x);",
          "content_same": false
        },
        {
          "line": 406,
          "old_api": "HasAxis",
          "new_api": "generate_check",
          "old_text": "src_def.HasAxis(Axis::DEPTH)",
          "new_text": "generate_check(xind, yind, zind)",
          "old_line_content": "        if (src_def.HasAxis(Axis::DEPTH)) {",
          "new_line_content": "        const std::string check = generate_check(xind, yind, zind);",
          "content_same": false
        },
        {
          "line": 443,
          "old_api": "std::to_string(z)",
          "new_api": "IsMali",
          "old_text": "std::to_string(z)",
          "new_text": "gpu_info.IsMali()",
          "old_line_content": "    const std::string zind = std::to_string(z);",
          "new_line_content": "  const bool conditional_read = gpu_info.IsMali();",
          "content_same": false
        },
        {
          "line": 445,
          "old_api": "std::to_string(y)",
          "new_api": "std::to_string(z)",
          "old_text": "std::to_string(y)",
          "new_text": "std::to_string(z)",
          "old_line_content": "      const std::string yind = std::to_string(y);",
          "new_line_content": "    const std::string zind = std::to_string(z);",
          "content_same": false
        },
        {
          "line": 447,
          "old_api": "std::to_string(x)",
          "new_api": "std::to_string(y)",
          "old_text": "std::to_string(x)",
          "new_text": "std::to_string(y)",
          "old_line_content": "        const std::string xind = std::to_string(x);",
          "new_line_content": "      const std::string yind = std::to_string(y);",
          "content_same": false
        },
        {
          "line": 450,
          "old_api": "IsLinear",
          "new_api": "generate_id",
          "old_text": "src_def.IsLinear()",
          "new_text": "generate_id(xind, yind, zind)",
          "old_line_content": "        if (src_def.IsLinear()) {",
          "new_line_content": "        const std::string id = generate_id(xind, yind, zind);",
          "content_same": false
        },
        {
          "line": 507,
          "old_api": "std::to_string(s)",
          "new_api": "SupportsPointersInKernels",
          "old_text": "std::to_string(s)",
          "new_text": "gpu_info.SupportsPointersInKernels()",
          "old_line_content": "           std::to_string(s) + \");\\n\";",
          "new_line_content": "    if (weights_are_buffer && !gpu_info.SupportsPointersInKernels()) {",
          "content_same": false
        },
        {
          "line": 511,
          "old_api": "std::to_string(z)",
          "new_api": "std::to_string(s)",
          "old_text": "std::to_string(z)",
          "new_text": "std::to_string(s)",
          "old_line_content": "      const std::string zind = std::to_string(z);",
          "new_line_content": "    const std::string sind = std::to_string(s);",
          "content_same": false
        },
        {
          "line": 513,
          "old_api": "std::to_string(y)",
          "new_api": "std::to_string(z)",
          "old_text": "std::to_string(y)",
          "new_text": "std::to_string(z)",
          "old_line_content": "        const std::string yind = std::to_string(y);",
          "new_line_content": "      const std::string zind = std::to_string(z);",
          "content_same": false
        },
        {
          "line": 515,
          "old_api": "std::to_string(x)",
          "new_api": "std::to_string(y)",
          "old_text": "std::to_string(x)",
          "new_text": "std::to_string(y)",
          "old_line_content": "          const std::string xind = std::to_string(x);",
          "new_line_content": "        const std::string yind = std::to_string(y);",
          "content_same": false
        },
        {
          "line": 517,
          "old_api": "generate_id_full",
          "new_api": "std::to_string(x)",
          "old_text": "generate_id_full(xind, yind, zind, sind)",
          "new_text": "std::to_string(x)",
          "old_line_content": "          const std::string full_id = generate_id_full(xind, yind, zind, sind);",
          "new_line_content": "          const std::string xind = std::to_string(x);",
          "content_same": false
        },
        {
          "line": 539,
          "old_api": "std::to_string(y)",
          "new_api": "std::to_string(z)",
          "old_text": "std::to_string(y)",
          "new_text": "std::to_string(z)",
          "old_line_content": "        const std::string yind = std::to_string(y);",
          "new_line_content": "      const std::string zind = std::to_string(z);",
          "content_same": false
        },
        {
          "line": 541,
          "old_api": "std::to_string(x)",
          "new_api": "std::to_string(y)",
          "old_text": "std::to_string(x)",
          "new_text": "std::to_string(y)",
          "old_line_content": "          const std::string xind = std::to_string(x);",
          "new_line_content": "        const std::string yind = std::to_string(y);",
          "content_same": false
        },
        {
          "line": 572,
          "old_api": "Height",
          "new_api": "HasAxis",
          "old_text": "dst_[0]->Height()",
          "new_text": "definition_.src_tensors[0].HasAxis(Axis::DEPTH)",
          "old_line_content": "        AlignByN(dst_[0]->Height(), stride_.y * block_size_.y);",
          "new_line_content": "  if (definition_.src_tensors[0].HasAxis(Axis::DEPTH)) {",
          "content_same": false
        },
        {
          "line": 574,
          "old_api": "DivideRoundUp",
          "new_api": "Height",
          "old_text": "DivideRoundUp(aligned_h, block_size_.y)",
          "new_text": "dst_[0]->Height()",
          "old_line_content": "        args->SetInt(\"grid_size_y\", DivideRoundUp(aligned_h, block_size_.y)));",
          "new_line_content": "        AlignByN(dst_[0]->Height(), stride_.y * block_size_.y);",
          "content_same": false
        },
        {
          "line": 576,
          "old_api": "absl::OkStatus()",
          "new_api": "DivideRoundUp",
          "old_text": "absl::OkStatus()",
          "new_text": "DivideRoundUp(aligned_h, block_size_.y)",
          "old_line_content": "  return absl::OkStatus();",
          "new_line_content": "        args->SetInt(\"grid_size_y\", DivideRoundUp(aligned_h, block_size_.y)));",
          "content_same": false
        },
        {
          "line": 582,
          "old_api": "Depth",
          "new_api": "Width",
          "old_text": "dst_[0]->Depth()",
          "new_text": "dst_[0]->Width()",
          "old_line_content": "  const int aligned_d = AlignByN(dst_[0]->Depth(), stride_.z * block_size_.z);",
          "new_line_content": "  const int aligned_w = AlignByN(dst_[0]->Width(), stride_.x * block_size_.x);",
          "content_same": false
        },
        {
          "line": 583,
          "old_api": "Batch",
          "new_api": "Height",
          "old_text": "dst_[0]->Batch()",
          "new_text": "dst_[0]->Height()",
          "old_line_content": "  const int grid_x = DivideRoundUp(aligned_w, block_size_.x) * dst_[0]->Batch();",
          "new_line_content": "  const int aligned_h = AlignByN(dst_[0]->Height(), stride_.y * block_size_.y);",
          "content_same": false
        },
        {
          "line": 584,
          "old_api": "DivideRoundUp",
          "new_api": "Depth",
          "old_text": "DivideRoundUp(aligned_h, block_size_.y)",
          "new_text": "dst_[0]->Depth()",
          "old_line_content": "  const int grid_y = DivideRoundUp(aligned_h, block_size_.y) *",
          "new_line_content": "  const int aligned_d = AlignByN(dst_[0]->Depth(), stride_.z * block_size_.z);",
          "content_same": false
        },
        {
          "line": 585,
          "old_api": "DivideRoundUp",
          "new_api": "Batch",
          "old_text": "DivideRoundUp(aligned_d, block_size_.z)",
          "new_text": "dst_[0]->Batch()",
          "old_line_content": "                     DivideRoundUp(aligned_d, block_size_.z);",
          "new_line_content": "  const int grid_x = DivideRoundUp(aligned_w, block_size_.x) * dst_[0]->Batch();",
          "content_same": false
        },
        {
          "line": 586,
          "old_api": "Slices",
          "new_api": "DivideRoundUp",
          "old_text": "dst_[0]->Slices()",
          "new_text": "DivideRoundUp(aligned_h, block_size_.y)",
          "old_line_content": "  const int grid_z = DivideRoundUp(dst_[0]->Slices(), block_size_.w);",
          "new_line_content": "  const int grid_y = DivideRoundUp(aligned_h, block_size_.y) *",
          "content_same": false
        },
        {
          "line": 587,
          "old_api": "int3",
          "new_api": "DivideRoundUp",
          "old_text": "int3(grid_x, grid_y, grid_z)",
          "new_text": "DivideRoundUp(aligned_d, block_size_.z)",
          "old_line_content": "  return int3(grid_x, grid_y, grid_z);",
          "new_line_content": "                     DivideRoundUp(aligned_d, block_size_.z);",
          "content_same": false
        },
        {
          "line": 602,
          "old_api": "UploadWeights",
          "new_api": "IsApple",
          "old_text": "result.UploadWeights(attr.weights, weights_are_buffer)",
          "new_text": "gpu_info.IsApple()",
          "old_line_content": "  result.UploadWeights(attr.weights, weights_are_buffer);",
          "new_line_content": "  const bool weights_are_buffer = gpu_info.IsMali() || gpu_info.IsApple();",
          "content_same": false
        },
        {
          "line": 608,
          "old_api": "UploadLinearData",
          "new_api": "GetPrimaryStorageType",
          "old_text": "desc.UploadLinearData(attr.bias)",
          "new_text": "definition.GetPrimaryStorageType()",
          "old_line_content": "  desc.UploadLinearData(attr.bias);",
          "new_line_content": "      DeduceLinearStorageType(definition.GetPrimaryStorageType());",
          "content_same": false
        },
        {
          "line": 609,
          "old_api": "AddObject",
          "new_api": "GetDataType",
          "old_text": "result.args_.AddObject(\n      \"biases\", absl::make_unique<TensorLinearDescriptor>(std::move(desc)))",
          "new_text": "definition.GetDataType()",
          "old_line_content": "  result.args_.AddObject(",
          "new_line_content": "  desc.element_type = definition.GetDataType();",
          "content_same": false
        },
        {
          "line": 610,
          "old_api": "std::move(desc)",
          "new_api": "UploadLinearData",
          "old_text": "std::move(desc)",
          "new_text": "desc.UploadLinearData(attr.bias)",
          "old_line_content": "      \"biases\", absl::make_unique<TensorLinearDescriptor>(std::move(desc)));",
          "new_line_content": "  desc.UploadLinearData(attr.bias);",
          "content_same": false
        },
        {
          "line": 619,
          "old_api": "UploadWeights",
          "new_api": "IsApple",
          "old_text": "result.UploadWeights(attr.weights, weights_are_buffer)",
          "new_text": "gpu_info.IsApple()",
          "old_line_content": "  result.UploadWeights(attr.weights, weights_are_buffer);",
          "new_line_content": "  const bool weights_are_buffer = gpu_info.IsMali() || gpu_info.IsApple();",
          "content_same": false
        },
        {
          "line": 625,
          "old_api": "UploadLinearData",
          "new_api": "GetPrimaryStorageType",
          "old_text": "desc.UploadLinearData(attr.bias)",
          "new_text": "definition.GetPrimaryStorageType()",
          "old_line_content": "  desc.UploadLinearData(attr.bias);",
          "new_line_content": "      DeduceLinearStorageType(definition.GetPrimaryStorageType());",
          "content_same": false
        },
        {
          "line": 626,
          "old_api": "AddObject",
          "new_api": "GetDataType",
          "old_text": "result.args_.AddObject(\n      \"biases\", absl::make_unique<TensorLinearDescriptor>(std::move(desc)))",
          "new_text": "definition.GetDataType()",
          "old_line_content": "  result.args_.AddObject(",
          "new_line_content": "  desc.element_type = definition.GetDataType();",
          "content_same": false
        },
        {
          "line": 627,
          "old_api": "std::move(desc)",
          "new_api": "UploadLinearData",
          "old_text": "std::move(desc)",
          "new_text": "desc.UploadLinearData(attr.bias)",
          "old_line_content": "      \"biases\", absl::make_unique<TensorLinearDescriptor>(std::move(desc)));",
          "new_line_content": "  desc.UploadLinearData(attr.bias);",
          "content_same": false
        },
        {
          "line": 660,
          "old_api": "UploadLinearData",
          "new_api": "GetPrimaryStorageType",
          "old_text": "desc.UploadLinearData(attr.bias)",
          "new_text": "new_def.GetPrimaryStorageType()",
          "old_line_content": "  desc.UploadLinearData(attr.bias);",
          "new_line_content": "  desc.storage_type = DeduceLinearStorageType(new_def.GetPrimaryStorageType());",
          "content_same": false
        },
        {
          "line": 661,
          "old_api": "AddObject",
          "new_api": "GetDataType",
          "old_text": "result.args_.AddObject(\n      \"biases\", absl::make_unique<TensorLinearDescriptor>(std::move(desc)))",
          "new_text": "new_def.GetDataType()",
          "old_line_content": "  result.args_.AddObject(",
          "new_line_content": "  desc.element_type = new_def.GetDataType();",
          "content_same": false
        },
        {
          "line": 662,
          "old_api": "std::move(desc)",
          "new_api": "UploadLinearData",
          "old_text": "std::move(desc)",
          "new_text": "desc.UploadLinearData(attr.bias)",
          "old_line_content": "      \"biases\", absl::make_unique<TensorLinearDescriptor>(std::move(desc)));",
          "new_line_content": "  desc.UploadLinearData(attr.bias);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 518,
          "old_api": null,
          "new_api": "generate_id",
          "old_text": null,
          "new_text": "generate_id(xind, yind, zind)",
          "old_line_content": "          c += \"        CONV\" + sind + \"(r\" + full_id + \", src\" + id + \");\\n\";",
          "new_line_content": "          const std::string id = generate_id(xind, yind, zind);",
          "content_same": false
        },
        {
          "line": 519,
          "old_api": null,
          "new_api": "generate_id_full",
          "old_text": null,
          "new_text": "generate_id_full(xind, yind, zind, sind)",
          "old_line_content": "        }",
          "new_line_content": "          const std::string full_id = generate_id_full(xind, yind, zind, sind);",
          "content_same": false
        },
        {
          "line": 526,
          "old_api": null,
          "new_api": "std::to_string(block_size.w)",
          "old_text": null,
          "new_text": "std::to_string(block_size.w)",
          "old_line_content": "  c += \"      }\\n\";",
          "new_line_content": "    c += \"        f_offset += \" + std::to_string(block_size.w) + \";\\n\";",
          "content_same": false
        },
        {
          "line": 531,
          "old_api": null,
          "new_api": "HasAxis",
          "old_text": null,
          "new_text": "src_def.HasAxis(Axis::DEPTH)",
          "old_line_content": "  }",
          "new_line_content": "  if (src_def.HasAxis(Axis::DEPTH)) {",
          "content_same": false
        },
        {
          "line": 535,
          "old_api": null,
          "new_api": "std::to_string(s)",
          "old_text": null,
          "new_text": "std::to_string(s)",
          "old_line_content": "    c += \"    FLT4 bias_val = args.biases.Read(dst_s);\\n\";",
          "new_line_content": "    const std::string sind = std::to_string(s);",
          "content_same": false
        },
        {
          "line": 543,
          "old_api": null,
          "new_api": "std::to_string(x)",
          "old_text": null,
          "new_text": "std::to_string(x)",
          "old_line_content": "          std::string checks =",
          "new_line_content": "          const std::string xind = std::to_string(x);",
          "content_same": false
        },
        {
          "line": 544,
          "old_api": null,
          "new_api": "generate_id_full",
          "old_text": null,
          "new_text": "generate_id_full(xind, yind, zind, sind)",
          "old_line_content": "              \"xc < args.dst_tensor.Width() && yc < args.dst_tensor.Height()\";",
          "new_line_content": "          const std::string id = generate_id_full(xind, yind, zind, sind);",
          "content_same": false
        },
        {
          "line": 551,
          "old_api": null,
          "new_api": "HasAxis",
          "old_text": null,
          "new_text": "src_def.HasAxis(Axis::DEPTH)",
          "old_line_content": "            checks += \" && zc < args.dst_tensor.Depth()\";",
          "new_line_content": "          if (src_def.HasAxis(Axis::DEPTH)) {",
          "content_same": false
        },
        {
          "line": 58,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "compiler_options_.push_back(CompilerOptions::kClFastRelaxedMath)",
          "old_line_content": "  }",
          "new_line_content": "    compiler_options_.push_back(CompilerOptions::kClFastRelaxedMath);",
          "content_same": false
        },
        {
          "line": 60,
          "old_api": null,
          "new_api": "DivideRoundUp",
          "old_text": null,
          "new_text": "DivideRoundUp(attr.weights.shape.o, 4)",
          "old_line_content": "  if (dst_depth == 1 || dst_depth == 3) {",
          "new_line_content": "  const int dst_depth = DivideRoundUp(attr.weights.shape.o, 4);",
          "content_same": false
        },
        {
          "line": 62,
          "old_api": null,
          "new_api": "IsMali",
          "old_text": null,
          "new_text": "gpu_info.IsMali()",
          "old_line_content": "      block_size_.y *= block_size_.w;",
          "new_line_content": "    if (!gpu_info.IsMali()) {",
          "content_same": false
        },
        {
          "line": 575,
          "old_api": null,
          "new_api": "SetInt",
          "old_text": null,
          "new_text": "RETURN_IF_ERROR(\n        args->SetInt(\"grid_size_y\", DivideRoundUp(aligned_h, block_size_.y)))",
          "old_line_content": "  }",
          "new_line_content": "    RETURN_IF_ERROR(",
          "content_same": false
        },
        {
          "line": 578,
          "old_api": null,
          "new_api": "absl::OkStatus()",
          "old_text": null,
          "new_text": "absl::OkStatus()",
          "old_line_content": "",
          "new_line_content": "  return absl::OkStatus();",
          "content_same": false
        },
        {
          "line": 74,
          "old_api": null,
          "new_api": "GenerateConvolutionTransposedCode",
          "old_text": null,
          "new_text": "GenerateConvolutionTransposedCode(definition_, gpu_info,\n                                            weights_are_buffer, block_size_)",
          "old_line_content": "                                            weights_are_buffer, block_size_);",
          "new_line_content": "  code_ = GenerateConvolutionTransposedCode(definition_, gpu_info,",
          "content_same": false
        },
        {
          "line": 588,
          "old_api": null,
          "new_api": "Slices",
          "old_text": null,
          "new_text": "dst_[0]->Slices()",
          "old_line_content": "}",
          "new_line_content": "  const int grid_z = DivideRoundUp(dst_[0]->Slices(), block_size_.w);",
          "content_same": false
        },
        {
          "line": 589,
          "old_api": null,
          "new_api": "int3",
          "old_text": null,
          "new_text": "int3(grid_x, grid_y, grid_z)",
          "old_line_content": "",
          "new_line_content": "  return int3(grid_x, grid_y, grid_z);",
          "content_same": false
        },
        {
          "line": 595,
          "old_api": null,
          "new_api": "GetPossibleWorkGroupsConv",
          "old_text": null,
          "new_text": "GetPossibleWorkGroupsConv(tuning_type, gpu_info, kernel_info, grid_size_,\n                            work_groups)",
          "old_line_content": "}",
          "new_line_content": "  GetPossibleWorkGroupsConv(tuning_type, gpu_info, kernel_info, grid_size_,",
          "content_same": false
        },
        {
          "line": 86,
          "old_api": null,
          "new_api": "IsApple",
          "old_text": null,
          "new_text": "gpu_info.IsApple()",
          "old_line_content": "      weights_layout_ = WeightsLayout::kOSpatialIOGroupO4I4;",
          "new_line_content": "    if (gpu_info.IsApple()) {",
          "content_same": false
        },
        {
          "line": 92,
          "old_api": null,
          "new_api": "IsApple",
          "old_text": null,
          "new_text": "gpu_info.IsApple()",
          "old_line_content": "      weights_layout_ = WeightsLayout::k2DX4O4YIsSpatialIAndXIsOOGroupI4;",
          "new_line_content": "    if (gpu_info.IsApple()) {",
          "content_same": false
        },
        {
          "line": 604,
          "old_api": null,
          "new_api": "UploadWeights",
          "old_text": null,
          "new_text": "result.UploadWeights(attr.weights, weights_are_buffer)",
          "old_line_content": "  TensorLinearDescriptor desc;",
          "new_line_content": "  result.UploadWeights(attr.weights, weights_are_buffer);",
          "content_same": false
        },
        {
          "line": 611,
          "old_api": null,
          "new_api": "AddObject",
          "old_text": null,
          "new_text": "result.args_.AddObject(\n      \"biases\", absl::make_unique<TensorLinearDescriptor>(std::move(desc)))",
          "old_line_content": "  return result;",
          "new_line_content": "  result.args_.AddObject(",
          "content_same": false
        },
        {
          "line": 612,
          "old_api": null,
          "new_api": "std::move(desc)",
          "old_text": null,
          "new_text": "std::move(desc)",
          "old_line_content": "}",
          "new_line_content": "      \"biases\", absl::make_unique<TensorLinearDescriptor>(std::move(desc)));",
          "content_same": false
        },
        {
          "line": 101,
          "old_api": null,
          "new_api": "int4",
          "old_text": null,
          "new_text": "int4(2, 1, 1, 1)",
          "old_line_content": "    } else {",
          "new_line_content": "      block_size_ = is_f16 ? int4(2, 1, 1, 2) : int4(2, 1, 1, 1);",
          "content_same": false
        },
        {
          "line": 103,
          "old_api": null,
          "new_api": "int4",
          "old_text": null,
          "new_text": "int4(2, 2, 1, 1)",
          "old_line_content": "    }",
          "new_line_content": "      block_size_ = is_f16 ? int4(2, 2, 1, 2) : int4(2, 2, 1, 1);",
          "content_same": false
        },
        {
          "line": 109,
          "old_api": null,
          "new_api": "IsMali",
          "old_text": null,
          "new_text": "gpu_info.IsMali()",
          "old_line_content": "    }",
          "new_line_content": "    if (!gpu_info.IsMali()) {",
          "content_same": false
        },
        {
          "line": 621,
          "old_api": null,
          "new_api": "UploadWeights",
          "old_text": null,
          "new_text": "result.UploadWeights(attr.weights, weights_are_buffer)",
          "old_line_content": "  TensorLinearDescriptor desc;",
          "new_line_content": "  result.UploadWeights(attr.weights, weights_are_buffer);",
          "content_same": false
        },
        {
          "line": 628,
          "old_api": null,
          "new_api": "AddObject",
          "old_text": null,
          "new_text": "result.args_.AddObject(\n      \"biases\", absl::make_unique<TensorLinearDescriptor>(std::move(desc)))",
          "old_line_content": "  return result;",
          "new_line_content": "  result.args_.AddObject(",
          "content_same": false
        },
        {
          "line": 629,
          "old_api": null,
          "new_api": "std::move(desc)",
          "old_text": null,
          "new_text": "std::move(desc)",
          "old_line_content": "}",
          "new_line_content": "      \"biases\", absl::make_unique<TensorLinearDescriptor>(std::move(desc)));",
          "content_same": false
        },
        {
          "line": 636,
          "old_api": null,
          "new_api": "IsMali",
          "old_text": null,
          "new_text": "gpu_info.IsMali()",
          "old_line_content": "  new_def.src_tensors = {",
          "new_line_content": "  const bool weights_are_buffer = gpu_info.IsMali();",
          "content_same": false
        },
        {
          "line": 124,
          "old_api": null,
          "new_api": "AddInt",
          "old_text": null,
          "new_text": "args_.AddInt(\"grid_size_y\")",
          "old_line_content": "                                            weights_are_buffer, block_size_);",
          "new_line_content": "  args_.AddInt(\"grid_size_y\");",
          "content_same": false
        },
        {
          "line": 125,
          "old_api": null,
          "new_api": "GenerateConvolutionTransposedCode",
          "old_text": null,
          "new_text": "GenerateConvolutionTransposedCode(definition_, gpu_info,\n                                            weights_are_buffer, block_size_)",
          "old_line_content": "}",
          "new_line_content": "  code_ = GenerateConvolutionTransposedCode(definition_, gpu_info,",
          "content_same": false
        },
        {
          "line": 641,
          "old_api": null,
          "new_api": "GetDataType",
          "old_text": null,
          "new_text": "definition.GetDataType()",
          "old_line_content": "    // add 1 src_tensor(buffer) for weights",
          "new_line_content": "  const DataType weights_type = definition.GetDataType();",
          "content_same": false
        },
        {
          "line": 644,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "new_def.src_tensors.push_back(\n        {weights_type, TensorStorageType::BUFFER, Layout::HWC})",
          "old_line_content": "  } else {",
          "new_line_content": "    new_def.src_tensors.push_back(",
          "content_same": false
        },
        {
          "line": 134,
          "old_api": null,
          "new_api": "AddSrcTensor",
          "old_text": null,
          "new_text": "AddSrcTensor(\"src_tensor\", src_desc)",
          "old_line_content": "",
          "new_line_content": "  AddSrcTensor(\"src_tensor\", src_desc);",
          "content_same": false
        },
        {
          "line": 137,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "op_def.src_tensors.size()",
          "old_line_content": "    if (weights_layout_ == WeightsLayout::kOSpatialIOGroupI4O4 ||",
          "new_line_content": "  if (op_def.src_tensors.size() != 1) {",
          "content_same": false
        },
        {
          "line": 654,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "new_def.src_tensors.push_back(\n        {weights_type, TensorStorageType::TEXTURE_2D, Layout::HWC})",
          "old_line_content": "  }",
          "new_line_content": "    new_def.src_tensors.push_back(",
          "content_same": false
        },
        {
          "line": 145,
          "old_api": null,
          "new_api": "AddSrcBuffer",
          "old_text": null,
          "new_text": "AddSrcBuffer(\"weights\", desc)",
          "old_line_content": "      for (int i = 0; i < 4; ++i) {",
          "new_line_content": "      AddSrcBuffer(\"weights\", desc);",
          "content_same": false
        },
        {
          "line": 150,
          "old_api": null,
          "new_api": "std::to_string(i)",
          "old_text": null,
          "new_text": "std::to_string(i)",
          "old_line_content": "      }",
          "new_line_content": "        const std::string name = \"weights\" + std::to_string(i);",
          "content_same": false
        },
        {
          "line": 151,
          "old_api": null,
          "new_api": "std::to_string(i)",
          "old_text": null,
          "new_text": "std::to_string(i)",
          "old_line_content": "    }",
          "new_line_content": "        AddSrcTexture2D(\"weights\" + std::to_string(i), desc);",
          "content_same": false
        },
        {
          "line": 663,
          "old_api": null,
          "new_api": "AddObject",
          "old_text": null,
          "new_text": "result.args_.AddObject(\n      \"biases\", absl::make_unique<TensorLinearDescriptor>(std::move(desc)))",
          "old_line_content": "  return result;",
          "new_line_content": "  result.args_.AddObject(",
          "content_same": false
        },
        {
          "line": 664,
          "old_api": null,
          "new_api": "std::move(desc)",
          "old_text": null,
          "new_text": "std::move(desc)",
          "old_line_content": "}",
          "new_line_content": "      \"biases\", absl::make_unique<TensorLinearDescriptor>(std::move(desc)));",
          "content_same": false
        },
        {
          "line": 166,
          "old_api": null,
          "new_api": "std::to_string(s)",
          "old_text": null,
          "new_text": "std::to_string(s)",
          "old_line_content": "      } else {",
          "new_line_content": "        f2 = \"FLT16_89ab(weights_cache[\" + std::to_string(s) + \"])\";",
          "content_same": false
        },
        {
          "line": 167,
          "old_api": null,
          "new_api": "std::to_string(s)",
          "old_text": null,
          "new_text": "std::to_string(s)",
          "old_line_content": "        f0 = \"FLT16_0123(flt16val)\";",
          "new_line_content": "        f3 = \"FLT16_cdef(weights_cache[\" + std::to_string(s) + \"])\";",
          "content_same": false
        },
        {
          "line": 177,
          "old_api": null,
          "new_api": "std::to_string(s * 4 + 2)",
          "old_text": null,
          "new_text": "std::to_string(s * 4 + 2)",
          "old_line_content": "    }",
          "new_line_content": "      f2 = \"f\" + std::to_string(s * 4 + 2);",
          "content_same": false
        },
        {
          "line": 180,
          "old_api": null,
          "new_api": "IsI4O4",
          "old_text": null,
          "new_text": "GetWeightsDescription().IsI4O4()",
          "old_line_content": "        case CalculationsPrecision::F32:",
          "new_line_content": "    if (GetWeightsDescription().IsI4O4()) {",
          "content_same": false
        },
        {
          "line": 184,
          "old_api": null,
          "new_api": "std::to_string(s)",
          "old_text": null,
          "new_text": "std::to_string(s)",
          "old_line_content": "          c += \"R += S.y * \" + f1 + \"; \\\\\\n\";",
          "new_line_content": "          c += \"#define CONV\" + std::to_string(s) + \"(R, S)    \\\\\\n\";",
          "content_same": false
        },
        {
          "line": 191,
          "old_api": null,
          "new_api": "std::to_string(s)",
          "old_text": null,
          "new_text": "std::to_string(s)",
          "old_line_content": "               \" + S.z * \" + f2 + \" + S.w * \" + f3 + \");\\n\";",
          "new_line_content": "          c += \"#define CONV\" + std::to_string(s) + \"(R, S) \\\\\\n\";",
          "content_same": false
        },
        {
          "line": 198,
          "old_api": null,
          "new_api": "std::to_string(s)",
          "old_text": null,
          "new_text": "std::to_string(s)",
          "old_line_content": "      c += \"R.y += dot(S, \" + f1 + \"); \\\\\\n\";",
          "new_line_content": "      c += \"#define CONV\" + std::to_string(s) + \"(R, S)    \\\\\\n\";",
          "content_same": false
        },
        {
          "line": 209,
          "old_api": null,
          "new_api": "HasAxis",
          "old_text": null,
          "new_text": "src_def.HasAxis(Axis::WIDTH)",
          "old_line_content": "    }",
          "new_line_content": "    if (src_def.HasAxis(Axis::WIDTH)) {",
          "content_same": false
        },
        {
          "line": 212,
          "old_api": null,
          "new_api": "HasAxis",
          "old_text": null,
          "new_text": "src_def.HasAxis(Axis::HEIGHT)",
          "old_line_content": "    }",
          "new_line_content": "    if (src_def.HasAxis(Axis::HEIGHT)) {",
          "content_same": false
        },
        {
          "line": 215,
          "old_api": null,
          "new_api": "HasAxis",
          "old_text": null,
          "new_text": "src_def.HasAxis(Axis::DEPTH)",
          "old_line_content": "    }",
          "new_line_content": "    if (src_def.HasAxis(Axis::DEPTH)) {",
          "content_same": false
        },
        {
          "line": 223,
          "old_api": null,
          "new_api": "generate_id",
          "old_text": null,
          "new_text": "generate_id(x, y, z)",
          "old_line_content": "",
          "new_line_content": "    return generate_id(x, y, z) + \"_s\" + s;",
          "content_same": false
        },
        {
          "line": 236,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "check.empty()",
          "old_line_content": "        }",
          "new_line_content": "        if (!check.empty()) {",
          "content_same": false
        },
        {
          "line": 256,
          "old_api": null,
          "new_api": "IsBatchSupported",
          "old_text": null,
          "new_text": "op_def.IsBatchSupported()",
          "old_line_content": "    c += \"  int dst_x = (linear_id / args.dst_tensor.Batch());\\n\";",
          "new_line_content": "  if (op_def.IsBatchSupported()) {",
          "content_same": false
        },
        {
          "line": 269,
          "old_api": null,
          "new_api": "HasAxis",
          "old_text": null,
          "new_text": "src_def.HasAxis(Axis::DEPTH)",
          "old_line_content": "    c += \"  int dst_y = linear_id_y % args.grid_size_y;\\n\";",
          "new_line_content": "  if (src_def.HasAxis(Axis::DEPTH)) {",
          "content_same": false
        },
        {
          "line": 275,
          "old_api": null,
          "new_api": "std::to_string(block_size.z)",
          "old_text": null,
          "new_text": "std::to_string(block_size.z)",
          "old_line_content": "    c += \"  if (dst_z >= args.dst_tensor.Depth()) return;\\n\";",
          "new_line_content": "    c += \"  dst_z = ceil_z * args.stride_z * \" + std::to_string(block_size.z) +",
          "content_same": false
        },
        {
          "line": 285,
          "old_api": null,
          "new_api": "std::to_string(block_size.w)",
          "old_text": null,
          "new_text": "std::to_string(block_size.w)",
          "old_line_content": "       \"args.dst_tensor.Height() || dst_s >= \"",
          "new_line_content": "  c += \"  int dst_s = GLOBAL_ID_2 * \" + std::to_string(block_size.w) + \";\\n\";",
          "content_same": false
        },
        {
          "line": 292,
          "old_api": null,
          "new_api": "HasAxis",
          "old_text": null,
          "new_text": "src_def.HasAxis(Axis::DEPTH)",
          "old_line_content": "    }",
          "new_line_content": "    if (src_def.HasAxis(Axis::DEPTH)) {",
          "content_same": false
        },
        {
          "line": 304,
          "old_api": null,
          "new_api": "std::to_string(x)",
          "old_text": null,
          "new_text": "std::to_string(x)",
          "old_line_content": "               \" = INIT_ACCUM_FLT4(0.0f);\\n\";",
          "new_line_content": "          const std::string xind = std::to_string(x);",
          "content_same": false
        },
        {
          "line": 305,
          "old_api": null,
          "new_api": "generate_id_full",
          "old_text": null,
          "new_text": "generate_id_full(xind, yind, zind, sind)",
          "old_line_content": "        }",
          "new_line_content": "          c += \"  ACCUM_FLT4 r\" + generate_id_full(xind, yind, zind, sind) +",
          "content_same": false
        },
        {
          "line": 325,
          "old_api": null,
          "new_api": "HasAxis",
          "old_text": null,
          "new_text": "src_def.HasAxis(Axis::DEPTH)",
          "old_line_content": "    c += \"  int kernel_last_dst_z = kernel_first_dst_z - args.kernel_size_z;\\n\";",
          "new_line_content": "  if (src_def.HasAxis(Axis::DEPTH)) {",
          "content_same": false
        },
        {
          "line": 339,
          "old_api": null,
          "new_api": "SupportsZeroClamp",
          "old_text": null,
          "new_text": "src_def.SupportsZeroClamp(Axis::DEPTH)",
          "old_line_content": "             zindex + \" < args.src_tensor.Depth();\\n\";",
          "new_line_content": "      if (!src_def.SupportsZeroClamp(Axis::DEPTH)) {",
          "content_same": false
        },
        {
          "line": 342,
          "old_api": null,
          "new_api": "CanReadOutOfBorder",
          "old_text": null,
          "new_text": "src_def.CanReadOutOfBorder(Axis::DEPTH)",
          "old_line_content": "               \", 0, args.src_tensor.Depth() - 1);\\n\";",
          "new_line_content": "        if (!src_def.CanReadOutOfBorder(Axis::DEPTH)) {",
          "content_same": false
        },
        {
          "line": 348,
          "old_api": null,
          "new_api": "SupportsZeroClamp",
          "old_text": null,
          "new_text": "src_def.SupportsZeroClamp(Axis::DEPTH)",
          "old_line_content": "    }",
          "new_line_content": "    if (block_size.z == 1 && !src_def.SupportsZeroClamp(Axis::DEPTH)) {",
          "content_same": false
        },
        {
          "line": 366,
          "old_api": null,
          "new_api": "SupportsZeroClamp",
          "old_text": null,
          "new_text": "src_def.SupportsZeroClamp(Axis::HEIGHT)",
          "old_line_content": "           yindex + \" < args.src_tensor.Height();\\n\";",
          "new_line_content": "    if (!src_def.SupportsZeroClamp(Axis::HEIGHT)) {",
          "content_same": false
        },
        {
          "line": 369,
          "old_api": null,
          "new_api": "CanReadOutOfBorder",
          "old_text": null,
          "new_text": "src_def.CanReadOutOfBorder(Axis::HEIGHT)",
          "old_line_content": "             \", 0, args.src_tensor.Height() - 1);\\n\";",
          "new_line_content": "      if (!src_def.CanReadOutOfBorder(Axis::HEIGHT)) {",
          "content_same": false
        },
        {
          "line": 375,
          "old_api": null,
          "new_api": "SupportsZeroClamp",
          "old_text": null,
          "new_text": "src_def.SupportsZeroClamp(Axis::HEIGHT)",
          "old_line_content": "  }",
          "new_line_content": "  if (block_size.y == 1 && !src_def.SupportsZeroClamp(Axis::HEIGHT)) {",
          "content_same": false
        },
        {
          "line": 387,
          "old_api": null,
          "new_api": "SupportsZeroClamp",
          "old_text": null,
          "new_text": "src_def.SupportsZeroClamp(Axis::WIDTH)",
          "old_line_content": "           xindex + \" < args.src_tensor.Width();\\n\";",
          "new_line_content": "    if (!src_def.SupportsZeroClamp(Axis::WIDTH)) {",
          "content_same": false
        },
        {
          "line": 390,
          "old_api": null,
          "new_api": "CanReadOutOfBorder",
          "old_text": null,
          "new_text": "src_def.CanReadOutOfBorder(Axis::WIDTH)",
          "old_line_content": "             \", 0, args.src_tensor.Width() - 1);\\n\";",
          "new_line_content": "      if (!src_def.CanReadOutOfBorder(Axis::WIDTH)) {",
          "content_same": false
        },
        {
          "line": 396,
          "old_api": null,
          "new_api": "SupportsZeroClamp",
          "old_text": null,
          "new_text": "src_def.SupportsZeroClamp(Axis::WIDTH)",
          "old_line_content": "  }",
          "new_line_content": "  if (block_size.x == 1 && !src_def.SupportsZeroClamp(Axis::WIDTH)) {",
          "content_same": false
        },
        {
          "line": 405,
          "old_api": null,
          "new_api": "generate_id",
          "old_text": null,
          "new_text": "generate_id(xind, yind, zind)",
          "old_line_content": "        std::string coords = \"sx\" + xind + \", sy\" + yind;",
          "new_line_content": "        const std::string id = generate_id(xind, yind, zind);",
          "content_same": false
        },
        {
          "line": 408,
          "old_api": null,
          "new_api": "HasAxis",
          "old_text": null,
          "new_text": "src_def.HasAxis(Axis::DEPTH)",
          "old_line_content": "        }",
          "new_line_content": "        if (src_def.HasAxis(Axis::DEPTH)) {",
          "content_same": false
        },
        {
          "line": 411,
          "old_api": null,
          "new_api": "IsLinear",
          "old_text": null,
          "new_text": "src_def.IsLinear()",
          "old_line_content": "               \", 0);\\n\";",
          "new_line_content": "        if (src_def.IsLinear()) {",
          "content_same": false
        },
        {
          "line": 415,
          "old_api": null,
          "new_api": "ReturnsZeroForNegOneRead",
          "old_text": null,
          "new_text": "src_def.ReturnsZeroForNegOneRead()",
          "old_line_content": "               \"));\\n\";",
          "new_line_content": "        if (src_def.ReturnsZeroForNegOneRead()) {",
          "content_same": false
        },
        {
          "line": 429,
          "old_api": null,
          "new_api": "HasAxis",
          "old_text": null,
          "new_text": "src_def.HasAxis(Axis::DEPTH)",
          "old_line_content": "         \"*  args.kernel_size_x + kernel_x;\\n\";",
          "new_line_content": "  if (src_def.HasAxis(Axis::DEPTH)) {",
          "content_same": false
        },
        {
          "line": 438,
          "old_api": null,
          "new_api": "std::to_string(block_size.w)",
          "old_text": null,
          "new_text": "std::to_string(block_size.w)",
          "old_line_content": "    c += \"      int x_c = kernel_index * args.src_tensor.Slices();\\n\";",
          "new_line_content": "         std::to_string(block_size.w) + \";\\n\";",
          "content_same": false
        },
        {
          "line": 449,
          "old_api": null,
          "new_api": "std::to_string(x)",
          "old_text": null,
          "new_text": "std::to_string(x)",
          "old_line_content": "        std::string address;",
          "new_line_content": "        const std::string xind = std::to_string(x);",
          "content_same": false
        },
        {
          "line": 452,
          "old_api": null,
          "new_api": "IsLinear",
          "old_text": null,
          "new_text": "src_def.IsLinear()",
          "old_line_content": "        } else {",
          "new_line_content": "        if (src_def.IsLinear()) {",
          "content_same": false
        },
        {
          "line": 456,
          "old_api": null,
          "new_api": "HasAxis",
          "old_text": null,
          "new_text": "src_def.HasAxis(Axis::DEPTH)",
          "old_line_content": "          }",
          "new_line_content": "          if (src_def.HasAxis(Axis::DEPTH)) {",
          "content_same": false
        },
        {
          "line": 461,
          "old_api": null,
          "new_api": "ReturnsZeroForNegOneRead",
          "old_text": null,
          "new_text": "src_def.ReturnsZeroForNegOneRead()",
          "old_line_content": "               \"); \" + address + \" += ds\" + id + \";\\n\";",
          "new_line_content": "        if (src_def.ReturnsZeroForNegOneRead()) {",
          "content_same": false
        },
        {
          "line": 465,
          "old_api": null,
          "new_api": "generate_check",
          "old_text": null,
          "new_text": "generate_check(xind, yind, zind)",
          "old_line_content": "            if (conditional_read) {",
          "new_line_content": "          const std::string check = generate_check(xind, yind, zind);",
          "content_same": false
        },
        {
          "line": 466,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "check.empty()",
          "old_line_content": "              c += \"        FLT4 src\" + id + \" = \" + check +",
          "new_line_content": "          if (!check.empty()) {",
          "content_same": false
        },
        {
          "line": 479,
          "old_api": null,
          "new_api": "IsLinear",
          "old_text": null,
          "new_text": "src_def.IsLinear()",
          "old_line_content": "          }",
          "new_line_content": "          if (src_def.IsLinear()) {",
          "content_same": false
        },
        {
          "line": 487,
          "old_api": null,
          "new_api": "SupportsPointersInKernels",
          "old_text": null,
          "new_text": "gpu_info.SupportsPointersInKernels()",
          "old_line_content": "           \"args.weights.GetPtr(f_offset);\\n\";",
          "new_line_content": "    if (gpu_info.SupportsPointersInKernels()) {",
          "content_same": false
        },
        {
          "line": 493,
          "old_api": null,
          "new_api": "Read",
          "old_text": null,
          "new_text": "absl::Substitute(\n          R\"(        FLT4 f$1 = args.weights0.Read(dst_s + $0, x_c);\n        FLT4 f$2 = args.weights1.Read(dst_s + $0, x_c);\n        FLT4 f$3 = args.weights2.Read(dst_s + $0, x_c);\n        FLT4 f$4 = args.weights3.Read(dst_s + $0, x_c);\n)\",\n          s, s * 4 + 0, s * 4 + 1, s * 4 + 2, s * 4 + 3)",
          "old_line_content": "        FLT4 f$2 = args.weights1.Read(dst_s + $0, x_c);",
          "new_line_content": "      c += absl::Substitute(",
          "content_same": false
        },
        {
          "line": 503,
          "old_api": null,
          "new_api": "SupportsPointersInKernels",
          "old_text": null,
          "new_text": "gpu_info.SupportsPointersInKernels()",
          "old_line_content": "  }",
          "new_line_content": "  if (weights_are_buffer && !gpu_info.SupportsPointersInKernels()) {",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 516,
          "old_api": "generate_id",
          "new_api": null,
          "old_text": "generate_id(xind, yind, zind)",
          "new_text": null,
          "old_line_content": "          const std::string id = generate_id(xind, yind, zind);",
          "new_line_content": "        for (int x = 0; x < block_size.x; ++x) {",
          "content_same": false
        },
        {
          "line": 524,
          "old_api": "std::to_string(block_size.w)",
          "new_api": null,
          "old_text": "std::to_string(block_size.w)",
          "new_text": null,
          "old_line_content": "    c += \"        f_offset += \" + std::to_string(block_size.w) + \";\\n\";",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 529,
          "old_api": "HasAxis",
          "new_api": null,
          "old_text": "src_def.HasAxis(Axis::DEPTH)",
          "new_text": null,
          "old_line_content": "  if (src_def.HasAxis(Axis::DEPTH)) {",
          "new_line_content": "  c += \"    }\\n\";",
          "content_same": false
        },
        {
          "line": 533,
          "old_api": "std::to_string(s)",
          "new_api": null,
          "old_text": "std::to_string(s)",
          "new_text": null,
          "old_line_content": "    const std::string sind = std::to_string(s);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 537,
          "old_api": "std::to_string(z)",
          "new_api": null,
          "old_text": "std::to_string(z)",
          "new_text": null,
          "old_line_content": "      const std::string zind = std::to_string(z);",
          "new_line_content": "    c += \"    FLT4 bias_val = args.biases.Read(dst_s);\\n\";",
          "content_same": false
        },
        {
          "line": 542,
          "old_api": "generate_id_full",
          "new_api": null,
          "old_text": "generate_id_full(xind, yind, zind, sind)",
          "new_text": null,
          "old_line_content": "          const std::string id = generate_id_full(xind, yind, zind, sind);",
          "new_line_content": "        for (int x = 0; x < block_size.x; ++x) {",
          "content_same": false
        },
        {
          "line": 549,
          "old_api": "HasAxis",
          "new_api": null,
          "old_text": "src_def.HasAxis(Axis::DEPTH)",
          "new_text": null,
          "old_line_content": "          if (src_def.HasAxis(Axis::DEPTH)) {",
          "new_line_content": "          c += \"      int xc = dst_x + args.stride_x * \" + xind + \";\\n\";",
          "content_same": false
        },
        {
          "line": 570,
          "old_api": "HasAxis",
          "new_api": null,
          "old_text": "definition_.src_tensors[0].HasAxis(Axis::DEPTH)",
          "new_text": null,
          "old_line_content": "  if (definition_.src_tensors[0].HasAxis(Axis::DEPTH)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 59,
          "old_api": "DivideRoundUp",
          "new_api": null,
          "old_text": "DivideRoundUp(attr.weights.shape.o, 4)",
          "new_text": null,
          "old_line_content": "  const int dst_depth = DivideRoundUp(attr.weights.shape.o, 4);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 573,
          "old_api": "SetInt",
          "new_api": null,
          "old_text": "RETURN_IF_ERROR(\n        args->SetInt(\"grid_size_y\", DivideRoundUp(aligned_h, block_size_.y)))",
          "new_text": null,
          "old_line_content": "    RETURN_IF_ERROR(",
          "new_line_content": "    const int aligned_h =",
          "content_same": false
        },
        {
          "line": 61,
          "old_api": "IsMali",
          "new_api": null,
          "old_text": "gpu_info.IsMali()",
          "new_text": null,
          "old_line_content": "    if (!gpu_info.IsMali()) {",
          "new_line_content": "  if (dst_depth == 1 || dst_depth == 3) {",
          "content_same": false
        },
        {
          "line": 67,
          "old_api": "AddInt",
          "new_api": null,
          "old_text": "args_.AddInt(\"stride_x\", stride_.x)",
          "new_text": null,
          "old_line_content": "  args_.AddInt(\"stride_x\", stride_.x);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 580,
          "old_api": "Width",
          "new_api": null,
          "old_text": "dst_[0]->Width()",
          "new_text": null,
          "old_line_content": "  const int aligned_w = AlignByN(dst_[0]->Width(), stride_.x * block_size_.x);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 581,
          "old_api": "Height",
          "new_api": null,
          "old_text": "dst_[0]->Height()",
          "new_text": null,
          "old_line_content": "  const int aligned_h = AlignByN(dst_[0]->Height(), stride_.y * block_size_.y);",
          "new_line_content": "int3 ConvolutionTransposed::GetGridSize() const {",
          "content_same": false
        },
        {
          "line": 593,
          "old_api": "GetPossibleWorkGroupsConv",
          "new_api": null,
          "old_text": "GetPossibleWorkGroupsConv(tuning_type, gpu_info, kernel_info, grid_size_,\n                            work_groups)",
          "new_text": null,
          "old_line_content": "  GetPossibleWorkGroupsConv(tuning_type, gpu_info, kernel_info, grid_size_,",
          "new_line_content": "    TuningType tuning_type, const GpuInfo& gpu_info,",
          "content_same": false
        },
        {
          "line": 85,
          "old_api": "IsApple",
          "new_api": null,
          "old_text": "gpu_info.IsApple()",
          "new_text": null,
          "old_line_content": "    if (gpu_info.IsApple()) {",
          "new_line_content": "  if (weights_are_buffer) {",
          "content_same": false
        },
        {
          "line": 600,
          "old_api": "IsApple",
          "new_api": null,
          "old_text": "gpu_info.IsApple()",
          "new_text": null,
          "old_line_content": "  const bool weights_are_buffer = gpu_info.IsMali() || gpu_info.IsApple();",
          "new_line_content": "    const GpuInfo& gpu_info, const OperationDef& definition,",
          "content_same": false
        },
        {
          "line": 91,
          "old_api": "IsApple",
          "new_api": null,
          "old_text": "gpu_info.IsApple()",
          "new_text": null,
          "old_line_content": "    if (gpu_info.IsApple()) {",
          "new_line_content": "  } else {",
          "content_same": false
        },
        {
          "line": 606,
          "old_api": "GetPrimaryStorageType",
          "new_api": null,
          "old_text": "definition.GetPrimaryStorageType()",
          "new_text": null,
          "old_line_content": "      DeduceLinearStorageType(definition.GetPrimaryStorageType());",
          "new_line_content": "  TensorLinearDescriptor desc;",
          "content_same": false
        },
        {
          "line": 607,
          "old_api": "GetDataType",
          "new_api": null,
          "old_text": "definition.GetDataType()",
          "new_text": null,
          "old_line_content": "  desc.element_type = definition.GetDataType();",
          "new_line_content": "  desc.storage_type =",
          "content_same": false
        },
        {
          "line": 98,
          "old_api": "IsMali",
          "new_api": null,
          "old_text": "gpu_info.IsMali()",
          "new_text": null,
          "old_line_content": "  if (gpu_info.IsMali()) {",
          "new_line_content": "  const bool is_f16 = definition.precision == CalculationsPrecision::F16;",
          "content_same": false
        },
        {
          "line": 102,
          "old_api": "int4",
          "new_api": null,
          "old_text": "int4(2, 2, 1, 1)",
          "new_text": null,
          "old_line_content": "      block_size_ = is_f16 ? int4(2, 2, 1, 2) : int4(2, 2, 1, 1);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 617,
          "old_api": "IsApple",
          "new_api": null,
          "old_text": "gpu_info.IsApple()",
          "new_text": null,
          "old_line_content": "  const bool weights_are_buffer = gpu_info.IsMali() || gpu_info.IsApple();",
          "new_line_content": "    const GpuInfo& gpu_info, const OperationDef& definition,",
          "content_same": false
        },
        {
          "line": 623,
          "old_api": "GetPrimaryStorageType",
          "new_api": null,
          "old_text": "definition.GetPrimaryStorageType()",
          "new_text": null,
          "old_line_content": "      DeduceLinearStorageType(definition.GetPrimaryStorageType());",
          "new_line_content": "  TensorLinearDescriptor desc;",
          "content_same": false
        },
        {
          "line": 624,
          "old_api": "GetDataType",
          "new_api": null,
          "old_text": "definition.GetDataType()",
          "new_text": null,
          "old_line_content": "  desc.element_type = definition.GetDataType();",
          "new_line_content": "  desc.storage_type =",
          "content_same": false
        },
        {
          "line": 113,
          "old_api": "AddInt",
          "new_api": null,
          "old_text": "args_.AddInt(\"stride_x\", stride_.x)",
          "new_text": null,
          "old_line_content": "  args_.AddInt(\"stride_x\", stride_.x);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 114,
          "old_api": "AddInt",
          "new_api": null,
          "old_text": "args_.AddInt(\"stride_y\", stride_.y)",
          "new_text": null,
          "old_line_content": "  args_.AddInt(\"stride_y\", stride_.y);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 634,
          "old_api": "IsMali",
          "new_api": null,
          "old_text": "gpu_info.IsMali()",
          "new_text": null,
          "old_line_content": "  const bool weights_are_buffer = gpu_info.IsMali();",
          "new_line_content": "    const GpuInfo& gpu_info, const OperationDef& definition,",
          "content_same": false
        },
        {
          "line": 639,
          "old_api": "GetDataType",
          "new_api": null,
          "old_text": "definition.GetDataType()",
          "new_text": null,
          "old_line_content": "  const DataType weights_type = definition.GetDataType();",
          "new_line_content": "      definition.src_tensors[0]};  // leaving only src_tensor def, weights defs",
          "content_same": false
        },
        {
          "line": 642,
          "old_api": "push_back",
          "new_api": null,
          "old_text": "new_def.src_tensors.push_back(\n        {weights_type, TensorStorageType::BUFFER, Layout::HWC})",
          "new_text": null,
          "old_line_content": "    new_def.src_tensors.push_back(",
          "new_line_content": "  if (weights_are_buffer) {",
          "content_same": false
        },
        {
          "line": 131,
          "old_api": "SetAddressMode",
          "new_api": null,
          "old_text": "src_desc.SetAddressMode(AddressMode::kZero)",
          "new_text": null,
          "old_line_content": "  src_desc.SetAddressMode(AddressMode::kZero);",
          "new_line_content": "    bool weights_are_buffer, const int4& block_size) {",
          "content_same": false
        },
        {
          "line": 132,
          "old_api": "AddSrcTensor",
          "new_api": null,
          "old_text": "AddSrcTensor(\"src_tensor\", src_desc)",
          "new_text": null,
          "old_line_content": "  AddSrcTensor(\"src_tensor\", src_desc);",
          "new_line_content": "  auto src_desc = op_def.src_tensors[0];",
          "content_same": false
        },
        {
          "line": 646,
          "old_api": "push_back",
          "new_api": null,
          "old_text": "new_def.src_tensors.push_back(\n        {weights_type, TensorStorageType::TEXTURE_2D, Layout::HWC})",
          "new_text": null,
          "old_line_content": "    new_def.src_tensors.push_back(",
          "new_line_content": "  } else {",
          "content_same": false
        },
        {
          "line": 143,
          "old_api": "AddSrcBuffer",
          "new_api": null,
          "old_text": "AddSrcBuffer(\"weights\", desc)",
          "new_text": null,
          "old_line_content": "      AddSrcBuffer(\"weights\", desc);",
          "new_line_content": "      desc.element_size = 16;",
          "content_same": false
        },
        {
          "line": 658,
          "old_api": "GetPrimaryStorageType",
          "new_api": null,
          "old_text": "new_def.GetPrimaryStorageType()",
          "new_text": null,
          "old_line_content": "  desc.storage_type = DeduceLinearStorageType(new_def.GetPrimaryStorageType());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 659,
          "old_api": "GetDataType",
          "new_api": null,
          "old_text": "new_def.GetDataType()",
          "new_text": null,
          "old_line_content": "  desc.element_type = new_def.GetDataType();",
          "new_line_content": "  TensorLinearDescriptor desc;",
          "content_same": false
        },
        {
          "line": 148,
          "old_api": "std::to_string(i)",
          "new_api": null,
          "old_text": "std::to_string(i)",
          "new_text": null,
          "old_line_content": "        const std::string name = \"weights\" + std::to_string(i);",
          "new_line_content": "        Texture2DDescriptor desc;",
          "content_same": false
        },
        {
          "line": 149,
          "old_api": "std::to_string(i)",
          "new_api": null,
          "old_text": "std::to_string(i)",
          "new_text": null,
          "old_line_content": "        AddSrcTexture2D(\"weights\" + std::to_string(i), desc);",
          "new_line_content": "        desc.element_type = op_def.src_tensors[1 + i].data_type;",
          "content_same": false
        },
        {
          "line": 161,
          "old_api": "SupportsPointersInKernels",
          "new_api": null,
          "old_text": "gpu_info.SupportsPointersInKernels()",
          "new_text": null,
          "old_line_content": "      if (gpu_info.SupportsPointersInKernels()) {",
          "new_line_content": "    std::string f0, f1, f2, f3;",
          "content_same": false
        },
        {
          "line": 162,
          "old_api": "std::to_string(s)",
          "new_api": null,
          "old_text": "std::to_string(s)",
          "new_text": null,
          "old_line_content": "        f0 = \"FLT16_0123(weights_cache[\" + std::to_string(s) + \"])\";",
          "new_line_content": "    if (weights_are_buffer) {",
          "content_same": false
        },
        {
          "line": 173,
          "old_api": "std::to_string(s * 4 + 0)",
          "new_api": null,
          "old_text": "std::to_string(s * 4 + 0)",
          "new_text": null,
          "old_line_content": "      f0 = \"f\" + std::to_string(s * 4 + 0);",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 174,
          "old_api": "std::to_string(s * 4 + 1)",
          "new_api": null,
          "old_text": "std::to_string(s * 4 + 1)",
          "new_text": null,
          "old_line_content": "      f1 = \"f\" + std::to_string(s * 4 + 1);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 182,
          "old_api": "std::to_string(s)",
          "new_api": null,
          "old_text": "std::to_string(s)",
          "new_text": null,
          "old_line_content": "          c += \"#define CONV\" + std::to_string(s) + \"(R, S)    \\\\\\n\";",
          "new_line_content": "        case CalculationsPrecision::F32:",
          "content_same": false
        },
        {
          "line": 189,
          "old_api": "std::to_string(s)",
          "new_api": null,
          "old_text": "std::to_string(s)",
          "new_text": null,
          "old_line_content": "          c += \"#define CONV\" + std::to_string(s) + \"(R, S) \\\\\\n\";",
          "new_line_content": "          break;",
          "content_same": false
        },
        {
          "line": 196,
          "old_api": "std::to_string(s)",
          "new_api": null,
          "old_text": "std::to_string(s)",
          "new_text": null,
          "old_line_content": "      c += \"#define CONV\" + std::to_string(s) + \"(R, S)    \\\\\\n\";",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 207,
          "old_api": "HasAxis",
          "new_api": null,
          "old_text": "src_def.HasAxis(Axis::WIDTH)",
          "new_text": null,
          "old_line_content": "    if (src_def.HasAxis(Axis::WIDTH)) {",
          "new_line_content": "                         const std::string& z) {",
          "content_same": false
        },
        {
          "line": 210,
          "old_api": "HasAxis",
          "new_api": null,
          "old_text": "src_def.HasAxis(Axis::HEIGHT)",
          "new_text": null,
          "old_line_content": "    if (src_def.HasAxis(Axis::HEIGHT)) {",
          "new_line_content": "      id += \"_w\" + x;",
          "content_same": false
        },
        {
          "line": 213,
          "old_api": "HasAxis",
          "new_api": null,
          "old_text": "src_def.HasAxis(Axis::DEPTH)",
          "new_text": null,
          "old_line_content": "    if (src_def.HasAxis(Axis::DEPTH)) {",
          "new_line_content": "      id += \"_h\" + y;",
          "content_same": false
        },
        {
          "line": 221,
          "old_api": "generate_id",
          "new_api": null,
          "old_text": "generate_id(x, y, z)",
          "new_text": null,
          "old_line_content": "    return generate_id(x, y, z) + \"_s\" + s;",
          "new_line_content": "  auto generate_id_full = [&](const std::string& x, const std::string& y,",
          "content_same": false
        },
        {
          "line": 230,
          "old_api": "size",
          "new_api": null,
          "old_text": "axes.size()",
          "new_text": null,
          "old_line_content": "    for (int i = 0; i < axes.size(); ++i) {",
          "new_line_content": "    const std::vector<std::string> names{\"in_x\", \"in_y\", \"in_z\"};",
          "content_same": false
        },
        {
          "line": 254,
          "old_api": "IsBatchSupported",
          "new_api": null,
          "old_text": "op_def.IsBatchSupported()",
          "new_text": null,
          "old_line_content": "  if (op_def.IsBatchSupported()) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 265,
          "old_api": "std::to_string(block_size.x)",
          "new_api": null,
          "old_text": "std::to_string(block_size.x)",
          "new_text": null,
          "old_line_content": "  c += \"  dst_x = ceil_x * args.stride_x * \" + std::to_string(block_size.x) +",
          "new_line_content": "  c += \"  int rem_x = dst_x % args.stride_x;\\n\";",
          "content_same": false
        },
        {
          "line": 273,
          "old_api": "std::to_string(block_size.z)",
          "new_api": null,
          "old_text": "std::to_string(block_size.z)",
          "new_text": null,
          "old_line_content": "    c += \"  dst_z = ceil_z * args.stride_z * \" + std::to_string(block_size.z) +",
          "new_line_content": "    c += \"  int rem_z = dst_z % args.stride_z;\\n\";",
          "content_same": false
        },
        {
          "line": 281,
          "old_api": "std::to_string(block_size.y)",
          "new_api": null,
          "old_text": "std::to_string(block_size.y)",
          "new_text": null,
          "old_line_content": "  c += \"  dst_y = ceil_y * args.stride_y * \" + std::to_string(block_size.y) +",
          "new_line_content": "  c += \"  int rem_y = dst_y % args.stride_y;\\n\";",
          "content_same": false
        },
        {
          "line": 290,
          "old_api": "HasAxis",
          "new_api": null,
          "old_text": "src_def.HasAxis(Axis::DEPTH)",
          "new_text": null,
          "old_line_content": "    if (src_def.HasAxis(Axis::DEPTH)) {",
          "new_line_content": "    c += \"  int f_base = dst_s * args.src_tensor.Slices() * args.kernel_size_x \"",
          "content_same": false
        },
        {
          "line": 296,
          "old_api": "std::to_string(s)",
          "new_api": null,
          "old_text": "std::to_string(s)",
          "new_text": null,
          "old_line_content": "    const std::string sind = std::to_string(s);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 303,
          "old_api": "generate_id_full",
          "new_api": null,
          "old_text": "generate_id_full(xind, yind, zind, sind)",
          "new_text": null,
          "old_line_content": "          c += \"  ACCUM_FLT4 r\" + generate_id_full(xind, yind, zind, sind) +",
          "new_line_content": "        for (int x = 0; x < block_size.x; ++x) {",
          "content_same": false
        },
        {
          "line": 323,
          "old_api": "HasAxis",
          "new_api": null,
          "old_text": "src_def.HasAxis(Axis::DEPTH)",
          "new_text": null,
          "old_line_content": "  if (src_def.HasAxis(Axis::DEPTH)) {",
          "new_line_content": "      \"  int src_y = (kernel_first_dst_y + offset_y_strided) / args.stride_y - \"",
          "content_same": false
        },
        {
          "line": 335,
          "old_api": "std::to_string(z)",
          "new_api": null,
          "old_text": "std::to_string(z)",
          "new_text": null,
          "old_line_content": "      const std::string zindex = std::to_string(z);",
          "new_line_content": "        \"args.stride_z) {\\n\";",
          "content_same": false
        },
        {
          "line": 340,
          "old_api": "CanReadOutOfBorder",
          "new_api": null,
          "old_text": "src_def.CanReadOutOfBorder(Axis::DEPTH)",
          "new_text": null,
          "old_line_content": "        if (!src_def.CanReadOutOfBorder(Axis::DEPTH)) {",
          "new_line_content": "        c += \"    bool in_z\" + zindex + \" = sz\" + zindex + \" >= 0 && sz\" +",
          "content_same": false
        },
        {
          "line": 346,
          "old_api": "SupportsZeroClamp",
          "new_api": null,
          "old_text": "src_def.SupportsZeroClamp(Axis::DEPTH)",
          "new_text": null,
          "old_line_content": "    if (block_size.z == 1 && !src_def.SupportsZeroClamp(Axis::DEPTH)) {",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 360,
          "old_api": "std::to_string(y)",
          "new_api": null,
          "old_text": "std::to_string(y)",
          "new_text": null,
          "old_line_content": "    const std::string yindex = std::to_string(y);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 367,
          "old_api": "CanReadOutOfBorder",
          "new_api": null,
          "old_text": "src_def.CanReadOutOfBorder(Axis::HEIGHT)",
          "new_text": null,
          "old_line_content": "      if (!src_def.CanReadOutOfBorder(Axis::HEIGHT)) {",
          "new_line_content": "      c += \"    bool in_y\" + yindex + \" = sy\" + yindex + \" >= 0 && sy\" +",
          "content_same": false
        },
        {
          "line": 373,
          "old_api": "SupportsZeroClamp",
          "new_api": null,
          "old_text": "src_def.SupportsZeroClamp(Axis::HEIGHT)",
          "new_text": null,
          "old_line_content": "  if (block_size.y == 1 && !src_def.SupportsZeroClamp(Axis::HEIGHT)) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 383,
          "old_api": "std::to_string(x)",
          "new_api": null,
          "old_text": "std::to_string(x)",
          "new_text": null,
          "old_line_content": "    const std::string xindex = std::to_string(x);",
          "new_line_content": "       \"-= args.stride_x) {\\n\";",
          "content_same": false
        },
        {
          "line": 388,
          "old_api": "CanReadOutOfBorder",
          "new_api": null,
          "old_text": "src_def.CanReadOutOfBorder(Axis::WIDTH)",
          "new_text": null,
          "old_line_content": "      if (!src_def.CanReadOutOfBorder(Axis::WIDTH)) {",
          "new_line_content": "      c += \"      bool in_x\" + xindex + \" = sx\" + xindex + \" >= 0 && sx\" +",
          "content_same": false
        },
        {
          "line": 394,
          "old_api": "SupportsZeroClamp",
          "new_api": null,
          "old_text": "src_def.SupportsZeroClamp(Axis::WIDTH)",
          "new_text": null,
          "old_line_content": "  if (block_size.x == 1 && !src_def.SupportsZeroClamp(Axis::WIDTH)) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 398,
          "old_api": "std::to_string(z)",
          "new_api": null,
          "old_text": "std::to_string(z)",
          "new_text": null,
          "old_line_content": "    const std::string zind = std::to_string(z);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 403,
          "old_api": "generate_id",
          "new_api": null,
          "old_text": "generate_id(xind, yind, zind)",
          "new_text": null,
          "old_line_content": "        const std::string id = generate_id(xind, yind, zind);",
          "new_line_content": "      for (int x = 0; x < block_size.x; ++x) {",
          "content_same": false
        },
        {
          "line": 409,
          "old_api": "IsLinear",
          "new_api": null,
          "old_text": "src_def.IsLinear()",
          "new_text": null,
          "old_line_content": "        if (src_def.IsLinear()) {",
          "new_line_content": "          coords += \", sz\" + zind;",
          "content_same": false
        },
        {
          "line": 413,
          "old_api": "ReturnsZeroForNegOneRead",
          "new_api": null,
          "old_text": "src_def.ReturnsZeroForNegOneRead()",
          "new_text": null,
          "old_line_content": "        if (src_def.ReturnsZeroForNegOneRead()) {",
          "new_line_content": "               \", 0);\\n\";",
          "content_same": false
        },
        {
          "line": 427,
          "old_api": "HasAxis",
          "new_api": null,
          "old_text": "src_def.HasAxis(Axis::DEPTH)",
          "new_text": null,
          "old_line_content": "  if (src_def.HasAxis(Axis::DEPTH)) {",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 436,
          "old_api": "std::to_string(block_size.w)",
          "new_api": null,
          "old_text": "std::to_string(block_size.w)",
          "new_text": null,
          "old_line_content": "         std::to_string(block_size.w) + \";\\n\";",
          "new_line_content": "    c += \"      int f_offset = f_base + kernel_index * \"",
          "content_same": false
        },
        {
          "line": 441,
          "old_api": "IsMali",
          "new_api": null,
          "old_text": "gpu_info.IsMali()",
          "new_text": null,
          "old_line_content": "  const bool conditional_read = gpu_info.IsMali();",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 448,
          "old_api": "generate_id",
          "new_api": null,
          "old_text": "generate_id(xind, yind, zind)",
          "new_text": null,
          "old_line_content": "        const std::string id = generate_id(xind, yind, zind);",
          "new_line_content": "      for (int x = 0; x < block_size.x; ++x) {",
          "content_same": false
        },
        {
          "line": 454,
          "old_api": "HasAxis",
          "new_api": null,
          "old_text": "src_def.HasAxis(Axis::DEPTH)",
          "new_text": null,
          "old_line_content": "          if (src_def.HasAxis(Axis::DEPTH)) {",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 459,
          "old_api": "ReturnsZeroForNegOneRead",
          "new_api": null,
          "old_text": "src_def.ReturnsZeroForNegOneRead()",
          "new_text": null,
          "old_line_content": "        if (src_def.ReturnsZeroForNegOneRead()) {",
          "new_line_content": "          address += \", s\";",
          "content_same": false
        },
        {
          "line": 463,
          "old_api": "generate_check",
          "new_api": null,
          "old_text": "generate_check(xind, yind, zind)",
          "new_text": null,
          "old_line_content": "          const std::string check = generate_check(xind, yind, zind);",
          "new_line_content": "               \"); \" + address + \" += ds\" + id + \";\\n\";",
          "content_same": false
        },
        {
          "line": 464,
          "old_api": "empty",
          "new_api": null,
          "old_text": "check.empty()",
          "new_text": null,
          "old_line_content": "          if (!check.empty()) {",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 477,
          "old_api": "IsLinear",
          "new_api": null,
          "old_text": "src_def.IsLinear()",
          "new_text": null,
          "old_line_content": "          if (src_def.IsLinear()) {",
          "new_line_content": "                 address + \");\\n\";",
          "content_same": false
        },
        {
          "line": 485,
          "old_api": "SupportsPointersInKernels",
          "new_api": null,
          "old_text": "gpu_info.SupportsPointersInKernels()",
          "new_text": null,
          "old_line_content": "    if (gpu_info.SupportsPointersInKernels()) {",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 491,
          "old_api": "Read",
          "new_api": null,
          "old_text": "absl::Substitute(\n          R\"(        FLT4 f$1 = args.weights0.Read(dst_s + $0, x_c);\n        FLT4 f$2 = args.weights1.Read(dst_s + $0, x_c);\n        FLT4 f$3 = args.weights2.Read(dst_s + $0, x_c);\n        FLT4 f$4 = args.weights3.Read(dst_s + $0, x_c);\n)\",\n          s, s * 4 + 0, s * 4 + 1, s * 4 + 2, s * 4 + 3)",
          "new_text": null,
          "old_line_content": "      c += absl::Substitute(",
          "new_line_content": "  } else {",
          "content_same": false
        },
        {
          "line": 501,
          "old_api": "SupportsPointersInKernels",
          "new_api": null,
          "old_text": "gpu_info.SupportsPointersInKernels()",
          "new_text": null,
          "old_line_content": "  if (weights_are_buffer && !gpu_info.SupportsPointersInKernels()) {",
          "new_line_content": "    c += \"        x_c++;\\n\";",
          "content_same": false
        },
        {
          "line": 505,
          "old_api": "SupportsPointersInKernels",
          "new_api": null,
          "old_text": "gpu_info.SupportsPointersInKernels()",
          "new_text": null,
          "old_line_content": "    if (weights_are_buffer && !gpu_info.SupportsPointersInKernels()) {",
          "new_line_content": "  }",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 58,
      "total_additions": 86,
      "total_deletions": 84,
      "total_api_changes": 228
    },
    "non_api_changes": {
      "has_non_api_changes": false,
      "evidence": {
        "total_diff_lines": 2,
        "api_related_lines": 228,
        "non_api_lines": 0,
        "non_api_line_numbers": []
      }
    },
    "api_calls_before": 189,
    "api_calls_after": 191,
    "diff_info": {
      "added_lines": 2,
      "removed_lines": 0,
      "total_diff_lines": 21
    }
  }
}
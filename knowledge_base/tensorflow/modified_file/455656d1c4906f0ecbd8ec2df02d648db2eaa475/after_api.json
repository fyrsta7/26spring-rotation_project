{
    "version": "1.121.0",
    "results": [],
    "errors": [
        {
            "code": 3,
            "level": "warn",
            "type": [
                "PartialParsing",
                [
                    {
                        "path": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/tensorflow/modified_file/455656d1c4906f0ecbd8ec2df02d648db2eaa475/after.cc",
                        "start": {
                            "line": 47,
                            "col": 3,
                            "offset": 0
                        },
                        "end": {
                            "line": 168,
                            "col": 18,
                            "offset": 4798
                        }
                    }
                ]
            ],
            "message": "Syntax error at line /home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/tensorflow/modified_file/455656d1c4906f0ecbd8ec2df02d648db2eaa475/after.cc:47:\n `TF_ASSIGN_OR_RETURN(auto domain_map, HloDomainMap::Create(computation, \"\"));\n  // Map from ShortDebugString of the layoutless shape of the constant to the\n  // set of constant instructions with that shape. Layoutless shape is used to\n  // bin possible common constants together to reduce number of constant\n  // comparisons. If we end up having too many constant comparisons, a more\n  // precise binning might have to be used.\n  std::multimap<string, HloInstruction*> constants;\n  int64 combined = 0;\n  auto inst_it = computation->instructions().begin();\n  while (inst_it != computation->instructions().end()) {\n    HloInstruction* instruction = *inst_it;\n\n    // Advance list iterator before loop body because iterator may be\n    // invalidated due to deletion.\n    ++inst_it;\n\n    if (instruction->opcode() == HloOpcode::kConstant) {\n      Shape shape = instruction->shape();\n      if (!is_layout_sensitive) {\n        LayoutUtil::ClearLayout(&shape);\n      }\n      string shape_string = shape.ShortDebugString();\n\n      // Compare against all constants with the same shape\n      auto range = constants.equal_range(shape_string);\n      HloInstruction* match = nullptr;\n      for (auto it = range.first; it != range.second; ++it) {\n        if (instruction->literal() == it->second->literal() &&\n            domain_map->InSameDomain(it->second, instruction)) {\n          match = it->second;\n          break;\n        }\n      }\n      if (match == nullptr) {\n        constants.emplace(shape_string, instruction);\n      } else {\n        // Match found, replace this instruction with the one in the multimap.\n        TF_CHECK_OK(instruction->ReplaceAllUsesWith(match));\n        TF_CHECK_OK(computation->RemoveInstruction(instruction));\n        ++combined;\n      }\n    }\n  }\n  VLOG(4) << \"Combined \" << combined << \" constants in \" << computation->name()\n          << \" computation\";\n  return combined > 0;\n}\n\n// An instruction is considered to be equivalent to another only if they\n// share the exact same set of operands.\nint64 CseHash(const HloInstruc... (truncated 2767 more characters)",
            "path": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/tensorflow/modified_file/455656d1c4906f0ecbd8ec2df02d648db2eaa475/after.cc",
            "spans": [
                {
                    "file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/tensorflow/modified_file/455656d1c4906f0ecbd8ec2df02d648db2eaa475/after.cc",
                    "start": {
                        "line": 47,
                        "col": 3,
                        "offset": 0
                    },
                    "end": {
                        "line": 168,
                        "col": 18,
                        "offset": 4798
                    }
                }
            ]
        }
    ],
    "paths": {
        "scanned": [
            "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/tensorflow/modified_file/455656d1c4906f0ecbd8ec2df02d648db2eaa475/after.cc"
        ]
    },
    "skipped_rules": []
}
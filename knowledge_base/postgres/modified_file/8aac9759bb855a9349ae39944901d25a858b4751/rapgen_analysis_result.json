{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/postgres/modified_file/8aac9759bb855a9349ae39944901d25a858b4751",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/postgres/modified_file/8aac9759bb855a9349ae39944901d25a858b4751/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/postgres/modified_file/8aac9759bb855a9349ae39944901d25a858b4751/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/postgres/modified_file/8aac9759bb855a9349ae39944901d25a858b4751/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": true,
    "api_changes": {
      "replacements": [
        {
          "line": 181,
          "old_api": "DatumGetArrayTypeP",
          "new_api": "PG_RETURN_POINTER",
          "old_text": "DatumGetArrayTypeP(entry->key)",
          "new_text": "PG_RETURN_POINTER(retval)",
          "old_line_content": "\t\tif (in != DatumGetArrayTypeP(entry->key))",
          "new_line_content": "\t\tPG_RETURN_POINTER(retval);",
          "content_same": false
        },
        {
          "line": 196,
          "old_api": "PG_RETURN_POINTER",
          "new_api": "_intbig_alloc",
          "old_text": "PG_RETURN_POINTER(entry)",
          "new_text": "_intbig_alloc(true, siglen, sign)",
          "old_line_content": "\t\t\t\tPG_RETURN_POINTER(entry);",
          "new_line_content": "\t\tres = _intbig_alloc(true, siglen, sign);",
          "content_same": false
        },
        {
          "line": 239,
          "old_api": "ISALLTRUE",
          "new_api": "GETSIGN",
          "old_text": "ISALLTRUE(b)",
          "new_text": "GETSIGN(b)",
          "old_line_content": "\t\tif (ISALLTRUE(b))",
          "new_line_content": "\t\t\treturn SIGLENBIT(siglen) - sizebitvec(GETSIGN(b), siglen);",
          "content_same": false
        },
        {
          "line": 244,
          "old_api": "ISALLTRUE",
          "new_api": "GETSIGN",
          "old_text": "ISALLTRUE(b)",
          "new_text": "GETSIGN(b)",
          "old_line_content": "\telse if (ISALLTRUE(b))",
          "new_line_content": "\treturn hemdistsign(GETSIGN(a), GETSIGN(b), siglen);",
          "content_same": false
        },
        {
          "line": 273,
          "old_api": "PG_GETARG_POINTER",
          "new_api": "_intbig_alloc",
          "old_text": "PG_GETARG_POINTER(1)",
          "new_text": "_intbig_alloc(false, siglen, NULL)",
          "old_line_content": "\tint\t\t   *size = (int *) PG_GETARG_POINTER(1);",
          "new_line_content": "\tGISTTYPE   *result = _intbig_alloc(false, siglen, NULL);",
          "content_same": false
        },
        {
          "line": 274,
          "old_api": "GET_SIGLEN",
          "new_api": "GETSIGN",
          "old_text": "GET_SIGLEN()",
          "new_text": "GETSIGN(result)",
          "old_line_content": "\tint\t\t\tsiglen = GET_SIGLEN();",
          "new_line_content": "\tBITVECP\t\tbase = GETSIGN(result);",
          "content_same": false
        },
        {
          "line": 281,
          "old_api": "GETENTRY",
          "new_api": "CALCGTSIZE",
          "old_text": "GETENTRY(entryvec, i)",
          "new_text": "CALCGTSIZE(ALLISTRUE, siglen)",
          "old_line_content": "\t\tif (unionkey(base, GETENTRY(entryvec, i), siglen))",
          "new_line_content": "\t\t\tSET_VARSIZE(result, CALCGTSIZE(ALLISTRUE, siglen));",
          "content_same": false
        },
        {
          "line": 297,
          "old_api": "PG_GETARG_POINTER",
          "new_api": "DatumGetPointer",
          "old_text": "PG_GETARG_POINTER(0)",
          "new_text": "DatumGetPointer(origentry->key)",
          "old_line_content": "\tGISTENTRY  *origentry = (GISTENTRY *) PG_GETARG_POINTER(0); /* always ISSIGNKEY */",
          "new_line_content": "\tGISTTYPE   *origval = (GISTTYPE *) DatumGetPointer(origentry->key);",
          "content_same": false
        },
        {
          "line": 298,
          "old_api": "PG_GETARG_POINTER",
          "new_api": "DatumGetPointer",
          "old_text": "PG_GETARG_POINTER(1)",
          "new_text": "DatumGetPointer(newentry->key)",
          "old_line_content": "\tGISTENTRY  *newentry = (GISTENTRY *) PG_GETARG_POINTER(1);",
          "new_line_content": "\tGISTTYPE   *newval = (GISTTYPE *) DatumGetPointer(newentry->key);",
          "content_same": false
        },
        {
          "line": 299,
          "old_api": "PG_GETARG_POINTER",
          "new_api": "GET_SIGLEN",
          "old_text": "PG_GETARG_POINTER(2)",
          "new_text": "GET_SIGLEN()",
          "old_line_content": "\tfloat\t   *penalty = (float *) PG_GETARG_POINTER(2);",
          "new_line_content": "\tint\t\t\tsiglen = GET_SIGLEN();",
          "content_same": false
        },
        {
          "line": 301,
          "old_api": "DatumGetPointer",
          "new_api": "hemdist",
          "old_text": "DatumGetPointer(newentry->key)",
          "new_text": "hemdist(origval, newval, siglen)",
          "old_line_content": "\tGISTTYPE   *newval = (GISTTYPE *) DatumGetPointer(newentry->key);",
          "new_line_content": "\t*penalty = hemdist(origval, newval, siglen);",
          "content_same": false
        },
        {
          "line": 302,
          "old_api": "GET_SIGLEN",
          "new_api": "PG_RETURN_POINTER",
          "old_text": "GET_SIGLEN()",
          "new_text": "PG_RETURN_POINTER(penalty)",
          "old_line_content": "\tint\t\t\tsiglen = GET_SIGLEN();",
          "new_line_content": "\tPG_RETURN_POINTER(penalty);",
          "content_same": false
        },
        {
          "line": 352,
          "old_api": "palloc",
          "new_api": "OffsetNumberNext",
          "old_text": "palloc(nbytes)",
          "new_text": "OffsetNumberNext(k)",
          "old_line_content": "\tv->spl_left = (OffsetNumber *) palloc(nbytes);",
          "new_line_content": "\tfor (k = FirstOffsetNumber; k < maxoff; k = OffsetNumberNext(k))",
          "content_same": false
        },
        {
          "line": 384,
          "old_api": "GETENTRY",
          "new_api": "OffsetNumberNext",
          "old_text": "GETENTRY(entryvec, seed_2)",
          "new_text": "OffsetNumberNext(maxoff)",
          "old_line_content": "\tdatum_r = _intbig_alloc(ISALLTRUE(GETENTRY(entryvec, seed_2)), siglen,",
          "new_line_content": "\tmaxoff = OffsetNumberNext(maxoff);",
          "content_same": false
        },
        {
          "line": 390,
          "old_api": "OffsetNumberNext",
          "new_api": "GETENTRY",
          "old_text": "OffsetNumberNext(j)",
          "new_text": "GETENTRY(entryvec, j)",
          "old_line_content": "\tfor (j = FirstOffsetNumber; j <= maxoff; j = OffsetNumberNext(j))",
          "new_line_content": "\t\t_j = GETENTRY(entryvec, j);",
          "content_same": false
        },
        {
          "line": 393,
          "old_api": "GETENTRY",
          "new_api": "abs",
          "old_text": "GETENTRY(entryvec, j)",
          "new_text": "abs(size_alpha - size_beta)",
          "old_line_content": "\t\t_j = GETENTRY(entryvec, j);",
          "new_line_content": "\t\tcostvector[j - 1].cost = abs(size_alpha - size_beta);",
          "content_same": false
        },
        {
          "line": 395,
          "old_api": "hemdist",
          "new_api": "qsort",
          "old_text": "hemdist(datum_r, _j, siglen)",
          "new_text": "qsort(costvector, maxoff, sizeof(SPLITCOST), comparecost)",
          "old_line_content": "\t\tsize_beta = hemdist(datum_r, _j, siglen);",
          "new_line_content": "\tqsort(costvector, maxoff, sizeof(SPLITCOST), comparecost);",
          "content_same": false
        },
        {
          "line": 398,
          "old_api": "qsort",
          "new_api": "GETSIGN",
          "old_text": "qsort(costvector, maxoff, sizeof(SPLITCOST), comparecost)",
          "new_text": "GETSIGN(datum_r)",
          "old_line_content": "\tqsort(costvector, maxoff, sizeof(SPLITCOST), comparecost);",
          "new_line_content": "\tunion_r = GETSIGN(datum_r);",
          "content_same": false
        },
        {
          "line": 419,
          "old_api": "hemdist",
          "new_api": "WISH_F",
          "old_text": "hemdist(datum_l, _j, siglen)",
          "new_text": "WISH_F(v->spl_nleft, v->spl_nright, 0.00001)",
          "old_line_content": "\t\tsize_alpha = hemdist(datum_l, _j, siglen);",
          "new_line_content": "\t\tif (size_alpha < size_beta + WISH_F(v->spl_nleft, v->spl_nright, 0.00001))",
          "content_same": false
        },
        {
          "line": 424,
          "old_api": "ISALLTRUE",
          "new_api": "memset",
          "old_text": "ISALLTRUE(_j)",
          "new_text": "memset(union_l, 0xff, siglen)",
          "old_line_content": "\t\t\tif (ISALLTRUE(datum_l) || ISALLTRUE(_j))",
          "new_line_content": "\t\t\t\t\tmemset(union_l, 0xff, siglen);",
          "content_same": false
        },
        {
          "line": 440,
          "old_api": "ISALLTRUE",
          "new_api": "memset",
          "old_text": "ISALLTRUE(_j)",
          "new_text": "memset(union_r, 0xff, siglen)",
          "old_line_content": "\t\t\tif (ISALLTRUE(datum_r) || ISALLTRUE(_j))",
          "new_line_content": "\t\t\t\t\tmemset(union_r, 0xff, siglen);",
          "content_same": false
        },
        {
          "line": 457,
          "old_api": "pfree",
          "new_api": "PointerGetDatum",
          "old_text": "pfree(costvector)",
          "new_text": "PointerGetDatum(datum_r)",
          "old_line_content": "\tpfree(costvector);",
          "new_line_content": "\tv->spl_rdatum = PointerGetDatum(datum_r);",
          "content_same": false
        },
        {
          "line": 459,
          "old_api": "PointerGetDatum",
          "new_api": "PG_RETURN_POINTER",
          "old_text": "PointerGetDatum(datum_l)",
          "new_text": "PG_RETURN_POINTER(v)",
          "old_line_content": "\tv->spl_ldatum = PointerGetDatum(datum_l);",
          "new_line_content": "\tPG_RETURN_POINTER(v);",
          "content_same": false
        },
        {
          "line": 470,
          "old_api": "PG_GETARG_UINT16",
          "new_api": "PG_GETARG_POINTER",
          "old_text": "PG_GETARG_UINT16(2)",
          "new_text": "PG_GETARG_POINTER(4)",
          "old_line_content": "\tStrategyNumber strategy = (StrategyNumber) PG_GETARG_UINT16(2);",
          "new_line_content": "\tbool\t   *recheck = (bool *) PG_GETARG_POINTER(4);",
          "content_same": false
        },
        {
          "line": 486,
          "old_api": "DatumGetPointer",
          "new_api": "PG_FREE_IF_COPY",
          "old_text": "DatumGetPointer(entry->key)",
          "new_text": "PG_FREE_IF_COPY(query, 1)",
          "old_line_content": "\t\t\t\t\t\t\t\tGETSIGN(DatumGetPointer(entry->key)),",
          "new_line_content": "\t\tPG_FREE_IF_COPY(query, 1);",
          "content_same": false
        },
        {
          "line": 490,
          "old_api": "PG_RETURN_BOOL",
          "new_api": "CHECKARRVALID",
          "old_text": "PG_RETURN_BOOL(retval)",
          "new_text": "CHECKARRVALID(query)",
          "old_line_content": "\t\tPG_RETURN_BOOL(retval);",
          "new_line_content": "\tCHECKARRVALID(query);",
          "content_same": false
        },
        {
          "line": 502,
          "old_api": "GIST_LEAF",
          "new_api": "ARRNELEMS",
          "old_text": "GIST_LEAF(entry)",
          "new_text": "ARRNELEMS(query)",
          "old_line_content": "\t\t\tif (GIST_LEAF(entry))",
          "new_line_content": "\t\t\t\t\t\t\tnum = ARRNELEMS(query);",
          "content_same": false
        },
        {
          "line": 527,
          "old_api": "pfree",
          "new_api": "DatumGetPointer",
          "old_text": "pfree(dq)",
          "new_text": "DatumGetPointer(entry->key)",
          "old_line_content": "\t\t\t\tpfree(dq);",
          "new_line_content": "\t\t\t\tretval = _intbig_contains((GISTTYPE *) DatumGetPointer(entry->key),",
          "content_same": false
        },
        {
          "line": 546,
          "old_api": "GIST_LEAF",
          "new_api": "ARRNELEMS",
          "old_text": "GIST_LEAF(entry)",
          "new_text": "ARRNELEMS(query)",
          "old_line_content": "\t\t\tif (GIST_LEAF(entry))",
          "new_line_content": "\t\t\t\t\t\t\tnum = ARRNELEMS(query);",
          "content_same": false
        },
        {
          "line": 590,
          "old_api": "PG_GETARG_POINTER",
          "new_api": "add_local_int_reloption",
          "old_text": "PG_GETARG_POINTER(0)",
          "new_text": "add_local_int_reloption(relopts, \"siglen\",\n\t\t\t\t\t\t\t\"signature length in bytes\",\n\t\t\t\t\t\t\tSIGLEN_DEFAULT, 1, SIGLEN_MAX,\n\t\t\t\t\t\t\toffsetof(GISTIntArrayBigOptions, siglen))",
          "old_line_content": "\tlocal_relopts *relopts = (local_relopts *) PG_GETARG_POINTER(0);",
          "new_line_content": "\tadd_local_int_reloption(relopts, \"siglen\",",
          "content_same": false
        },
        {
          "line": 593,
          "old_api": "add_local_int_reloption",
          "new_api": "offsetof",
          "old_text": "add_local_int_reloption(relopts, \"siglen\",\n\t\t\t\t\t\t\t\"signature length in bytes\",\n\t\t\t\t\t\t\tSIGLEN_DEFAULT, 1, SIGLEN_MAX,\n\t\t\t\t\t\t\toffsetof(GISTIntArrayBigOptions, siglen))",
          "new_text": "offsetof(GISTIntArrayBigOptions, siglen)",
          "old_line_content": "\tadd_local_int_reloption(relopts, \"siglen\",",
          "new_line_content": "\t\t\t\t\t\t\toffsetof(GISTIntArrayBigOptions, siglen));",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 513,
          "old_api": null,
          "new_api": "DatumGetPointer",
          "old_text": null,
          "new_text": "DatumGetPointer(entry->key)",
          "old_line_content": "\t\t\t\t\tptr++;",
          "new_line_content": "\t\t\t\tde = GETSIGN((GISTTYPE *) DatumGetPointer(entry->key));",
          "content_same": false
        },
        {
          "line": 257,
          "old_api": null,
          "new_api": "GETSIGN",
          "old_text": null,
          "new_text": "GETSIGN(add)",
          "old_line_content": "unionkey(BITVECP sbase, GISTTYPE *add, int siglen)",
          "new_line_content": "\tBITVECP\t\tsadd = GETSIGN(add);",
          "content_same": false
        },
        {
          "line": 259,
          "old_api": null,
          "new_api": "ISALLTRUE",
          "old_text": null,
          "new_text": "ISALLTRUE(add)",
          "old_line_content": "\tint32\t\ti;",
          "new_line_content": "\tif (ISALLTRUE(add))",
          "content_same": false
        },
        {
          "line": 386,
          "old_api": null,
          "new_api": "palloc",
          "old_text": null,
          "new_text": "palloc(sizeof(SPLITCOST) * maxoff)",
          "old_line_content": "",
          "new_line_content": "\tcostvector = (SPLITCOST *) palloc(sizeof(SPLITCOST) * maxoff);",
          "content_same": false
        },
        {
          "line": 261,
          "old_api": null,
          "new_api": "LOOPBYTE",
          "old_text": null,
          "new_text": "LOOPBYTE(siglen)",
          "old_line_content": "",
          "new_line_content": "\tLOOPBYTE(siglen)",
          "content_same": false
        },
        {
          "line": 509,
          "old_api": null,
          "new_api": "HASH",
          "old_text": null,
          "new_text": "HASH(dq, *ptr, siglen)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t\tHASH(dq, *ptr, siglen);",
          "content_same": false
        },
        {
          "line": 391,
          "old_api": null,
          "new_api": "hemdist",
          "old_text": null,
          "new_text": "hemdist(datum_l, _j, siglen)",
          "old_line_content": "\t{",
          "new_line_content": "\t\tsize_alpha = hemdist(datum_l, _j, siglen);",
          "content_same": false
        },
        {
          "line": 392,
          "old_api": null,
          "new_api": "hemdist",
          "old_text": null,
          "new_text": "hemdist(datum_r, _j, siglen)",
          "old_line_content": "\t\tcostvector[j - 1].pos = j;",
          "new_line_content": "\t\tsize_beta = hemdist(datum_r, _j, siglen);",
          "content_same": false
        },
        {
          "line": 524,
          "old_api": null,
          "new_api": "pfree",
          "old_text": null,
          "new_text": "pfree(dq)",
          "old_line_content": "\t\t\t\t\t}",
          "new_line_content": "\t\t\t\tpfree(dq);",
          "content_same": false
        },
        {
          "line": 269,
          "old_api": null,
          "new_api": "PG_GETARG_POINTER",
          "old_text": null,
          "new_text": "PG_GETARG_POINTER(0)",
          "old_line_content": "Datum",
          "new_line_content": "\tGistEntryVector *entryvec = (GistEntryVector *) PG_GETARG_POINTER(0);",
          "content_same": false
        },
        {
          "line": 270,
          "old_api": null,
          "new_api": "PG_GETARG_POINTER",
          "old_text": null,
          "new_text": "PG_GETARG_POINTER(1)",
          "old_line_content": "g_intbig_union(PG_FUNCTION_ARGS)",
          "new_line_content": "\tint\t\t   *size = (int *) PG_GETARG_POINTER(1);",
          "content_same": false
        },
        {
          "line": 271,
          "old_api": null,
          "new_api": "GET_SIGLEN",
          "old_text": null,
          "new_text": "GET_SIGLEN()",
          "old_line_content": "{",
          "new_line_content": "\tint\t\t\tsiglen = GET_SIGLEN();",
          "content_same": false
        },
        {
          "line": 397,
          "old_api": null,
          "new_api": "GETSIGN",
          "old_text": null,
          "new_text": "GETSIGN(datum_l)",
          "old_line_content": "\t}",
          "new_line_content": "\tunion_l = GETSIGN(datum_l);",
          "content_same": false
        },
        {
          "line": 532,
          "old_api": null,
          "new_api": "DatumGetPointer",
          "old_text": null,
          "new_text": "DatumGetPointer(entry->key)",
          "old_line_content": "\t\t\tbreak;",
          "new_line_content": "\t\t\tretval = _intbig_contains((GISTTYPE *) DatumGetPointer(entry->key),",
          "content_same": false
        },
        {
          "line": 278,
          "old_api": null,
          "new_api": "GETENTRY",
          "old_text": null,
          "new_text": "GETENTRY(entryvec, i)",
          "old_line_content": "",
          "new_line_content": "\t\tif (unionkey(base, GETENTRY(entryvec, i), siglen))",
          "content_same": false
        },
        {
          "line": 286,
          "old_api": null,
          "new_api": "VARSIZE",
          "old_text": null,
          "new_text": "VARSIZE(result)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t*size = VARSIZE(result);",
          "content_same": false
        },
        {
          "line": 543,
          "old_api": null,
          "new_api": "GIST_LEAF",
          "old_text": null,
          "new_text": "GIST_LEAF(entry)",
          "old_line_content": "\t\t\t * operator has been removed from the opclass.  We keep it for now",
          "new_line_content": "\t\t\tif (GIST_LEAF(entry))",
          "content_same": false
        },
        {
          "line": 288,
          "old_api": null,
          "new_api": "PG_RETURN_POINTER",
          "old_text": null,
          "new_text": "PG_RETURN_POINTER(result)",
          "old_line_content": "",
          "new_line_content": "\tPG_RETURN_POINTER(result);",
          "content_same": false
        },
        {
          "line": 415,
          "old_api": null,
          "new_api": "GETENTRY",
          "old_text": null,
          "new_text": "GETENTRY(entryvec, j)",
          "old_line_content": "\t\t\tv->spl_nright++;",
          "new_line_content": "\t\t_j = GETENTRY(entryvec, j);",
          "content_same": false
        },
        {
          "line": 416,
          "old_api": null,
          "new_api": "hemdist",
          "old_text": null,
          "new_text": "hemdist(datum_l, _j, siglen)",
          "old_line_content": "\t\t\tcontinue;",
          "new_line_content": "\t\tsize_alpha = hemdist(datum_l, _j, siglen);",
          "content_same": false
        },
        {
          "line": 547,
          "old_api": null,
          "new_api": "ARRPTR",
          "old_text": null,
          "new_text": "ARRPTR(query)",
          "old_line_content": "\t\t\t{",
          "new_line_content": "\t\t\t\tint32\t   *ptr = ARRPTR(query);",
          "content_same": false
        },
        {
          "line": 548,
          "old_api": null,
          "new_api": "palloc0",
          "old_text": null,
          "new_text": "palloc0(siglen)",
          "old_line_content": "\t\t\t\tint\t\t\ti,",
          "new_line_content": "\t\t\t\tBITVECP\t\tdq = palloc0(siglen),",
          "content_same": false
        },
        {
          "line": 417,
          "old_api": null,
          "new_api": "hemdist",
          "old_text": null,
          "new_text": "hemdist(datum_r, _j, siglen)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\tsize_beta = hemdist(datum_r, _j, siglen);",
          "content_same": false
        },
        {
          "line": 294,
          "old_api": null,
          "new_api": "PG_GETARG_POINTER",
          "old_text": null,
          "new_text": "PG_GETARG_POINTER(0)",
          "old_line_content": "Datum",
          "new_line_content": "\tGISTENTRY  *origentry = (GISTENTRY *) PG_GETARG_POINTER(0); /* always ISSIGNKEY */",
          "content_same": false
        },
        {
          "line": 295,
          "old_api": null,
          "new_api": "PG_GETARG_POINTER",
          "old_text": null,
          "new_text": "PG_GETARG_POINTER(1)",
          "old_line_content": "g_intbig_penalty(PG_FUNCTION_ARGS)",
          "new_line_content": "\tGISTENTRY  *newentry = (GISTENTRY *) PG_GETARG_POINTER(1);",
          "content_same": false
        },
        {
          "line": 296,
          "old_api": null,
          "new_api": "PG_GETARG_POINTER",
          "old_text": null,
          "new_text": "PG_GETARG_POINTER(2)",
          "old_line_content": "{",
          "new_line_content": "\tfloat\t   *penalty = (float *) PG_GETARG_POINTER(2);",
          "content_same": false
        },
        {
          "line": 553,
          "old_api": null,
          "new_api": "HASH",
          "old_text": null,
          "new_text": "HASH(dq, *ptr, siglen)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t\tHASH(dq, *ptr, siglen);",
          "content_same": false
        },
        {
          "line": 421,
          "old_api": null,
          "new_api": "ISALLTRUE",
          "old_text": null,
          "new_text": "ISALLTRUE(_j)",
          "old_line_content": "",
          "new_line_content": "\t\t\tif (ISALLTRUE(datum_l) || ISALLTRUE(_j))",
          "content_same": false
        },
        {
          "line": 423,
          "old_api": null,
          "new_api": "ISALLTRUE",
          "old_text": null,
          "new_text": "ISALLTRUE(datum_l)",
          "old_line_content": "\t\t{",
          "new_line_content": "\t\t\t\tif (!ISALLTRUE(datum_l))",
          "content_same": false
        },
        {
          "line": 428,
          "old_api": null,
          "new_api": "GETSIGN",
          "old_text": null,
          "new_text": "GETSIGN(_j)",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\t\tptr = GETSIGN(_j);",
          "content_same": false
        },
        {
          "line": 557,
          "old_api": null,
          "new_api": "DatumGetPointer",
          "old_text": null,
          "new_text": "DatumGetPointer(entry->key)",
          "old_line_content": "\t\t\t\t\tptr++;",
          "new_line_content": "\t\t\t\tde = GETSIGN((GISTTYPE *) DatumGetPointer(entry->key));",
          "content_same": false
        },
        {
          "line": 429,
          "old_api": null,
          "new_api": "LOOPBYTE",
          "old_text": null,
          "new_text": "LOOPBYTE(siglen)",
          "old_line_content": "\t\t\telse",
          "new_line_content": "\t\t\t\tLOOPBYTE(siglen)",
          "content_same": false
        },
        {
          "line": 437,
          "old_api": null,
          "new_api": "ISALLTRUE",
          "old_text": null,
          "new_text": "ISALLTRUE(_j)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tif (ISALLTRUE(datum_r) || ISALLTRUE(_j))",
          "content_same": false
        },
        {
          "line": 183,
          "old_api": null,
          "new_api": "DatumGetPointer",
          "old_text": null,
          "new_text": "DatumGetPointer(entry->key)",
          "old_line_content": "",
          "new_line_content": "\telse if (!ISALLTRUE(DatumGetPointer(entry->key)))",
          "content_same": false
        },
        {
          "line": 439,
          "old_api": null,
          "new_api": "ISALLTRUE",
          "old_text": null,
          "new_text": "ISALLTRUE(datum_r)",
          "old_line_content": "\t\t{",
          "new_line_content": "\t\t\t\tif (!ISALLTRUE(datum_r))",
          "content_same": false
        },
        {
          "line": 187,
          "old_api": null,
          "new_api": "DatumGetPointer",
          "old_text": null,
          "new_text": "DatumGetPointer(entry->key)",
          "old_line_content": "\t{",
          "new_line_content": "\t\tBITVECP\t\tsign = GETSIGN(DatumGetPointer(entry->key));",
          "content_same": false
        },
        {
          "line": 444,
          "old_api": null,
          "new_api": "GETSIGN",
          "old_text": null,
          "new_text": "GETSIGN(_j)",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\t\tptr = GETSIGN(_j);",
          "content_same": false
        },
        {
          "line": 445,
          "old_api": null,
          "new_api": "LOOPBYTE",
          "old_text": null,
          "new_text": "LOOPBYTE(siglen)",
          "old_line_content": "\t\t\telse",
          "new_line_content": "\t\t\t\tLOOPBYTE(siglen)",
          "content_same": false
        },
        {
          "line": 193,
          "old_api": null,
          "new_api": "PG_RETURN_POINTER",
          "old_text": null,
          "new_text": "PG_RETURN_POINTER(entry)",
          "old_line_content": "\t\tLOOPBYTE(siglen)",
          "new_line_content": "\t\t\t\tPG_RETURN_POINTER(entry);",
          "content_same": false
        },
        {
          "line": 322,
          "old_api": null,
          "new_api": "PG_GETARG_POINTER",
          "old_text": null,
          "new_text": "PG_GETARG_POINTER(0)",
          "old_line_content": "Datum",
          "new_line_content": "\tGistEntryVector *entryvec = (GistEntryVector *) PG_GETARG_POINTER(0);",
          "content_same": false
        },
        {
          "line": 323,
          "old_api": null,
          "new_api": "PG_GETARG_POINTER",
          "old_text": null,
          "new_text": "PG_GETARG_POINTER(1)",
          "old_line_content": "g_intbig_picksplit(PG_FUNCTION_ARGS)",
          "new_line_content": "\tGIST_SPLITVEC *v = (GIST_SPLITVEC *) PG_GETARG_POINTER(1);",
          "content_same": false
        },
        {
          "line": 580,
          "old_api": null,
          "new_api": "PG_FREE_IF_COPY",
          "old_text": null,
          "new_text": "PG_FREE_IF_COPY(query, 1)",
          "old_line_content": "\t\tdefault:",
          "new_line_content": "\tPG_FREE_IF_COPY(query, 1);",
          "content_same": false
        },
        {
          "line": 581,
          "old_api": null,
          "new_api": "PG_RETURN_BOOL",
          "old_text": null,
          "new_text": "PG_RETURN_BOOL(retval)",
          "old_line_content": "\t\t\tretval = false;",
          "new_line_content": "\tPG_RETURN_BOOL(retval);",
          "content_same": false
        },
        {
          "line": 197,
          "old_api": null,
          "new_api": "palloc",
          "old_text": null,
          "new_text": "palloc(sizeof(GISTENTRY))",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\tretval = (GISTENTRY *) palloc(sizeof(GISTENTRY));",
          "content_same": false
        },
        {
          "line": 198,
          "old_api": null,
          "new_api": "PointerGetDatum",
          "old_text": null,
          "new_text": "PointerGetDatum(res)",
          "old_line_content": "",
          "new_line_content": "\t\tgistentryinit(*retval, PointerGetDatum(res),",
          "content_same": false
        },
        {
          "line": 324,
          "old_api": null,
          "new_api": "GET_SIGLEN",
          "old_text": null,
          "new_text": "GET_SIGLEN()",
          "old_line_content": "{",
          "new_line_content": "\tint\t\t\tsiglen = GET_SIGLEN();",
          "content_same": false
        },
        {
          "line": 454,
          "old_api": null,
          "new_api": "pfree",
          "old_text": null,
          "new_text": "pfree(costvector)",
          "old_line_content": "\t}",
          "new_line_content": "\tpfree(costvector);",
          "content_same": false
        },
        {
          "line": 202,
          "old_api": null,
          "new_api": "PG_RETURN_POINTER",
          "old_text": null,
          "new_text": "PG_RETURN_POINTER(retval)",
          "old_line_content": "\t\t\t\t\t  entry->rel, entry->page,",
          "new_line_content": "\t\tPG_RETURN_POINTER(retval);",
          "content_same": false
        },
        {
          "line": 587,
          "old_api": null,
          "new_api": "PG_GETARG_POINTER",
          "old_text": null,
          "new_text": "PG_GETARG_POINTER(0)",
          "old_line_content": "Datum",
          "new_line_content": "\tlocal_relopts *relopts = (local_relopts *) PG_GETARG_POINTER(0);",
          "content_same": false
        },
        {
          "line": 456,
          "old_api": null,
          "new_api": "PointerGetDatum",
          "old_text": null,
          "new_text": "PointerGetDatum(datum_l)",
          "old_line_content": "\t*right = *left = FirstOffsetNumber;",
          "new_line_content": "\tv->spl_ldatum = PointerGetDatum(datum_l);",
          "content_same": false
        },
        {
          "line": 589,
          "old_api": null,
          "new_api": "init_local_reloptions",
          "old_text": null,
          "new_text": "init_local_reloptions(relopts, sizeof(GISTIntArrayBigOptions))",
          "old_line_content": "{",
          "new_line_content": "\tinit_local_reloptions(relopts, sizeof(GISTIntArrayBigOptions));",
          "content_same": false
        },
        {
          "line": 465,
          "old_api": null,
          "new_api": "PG_GETARG_POINTER",
          "old_text": null,
          "new_text": "PG_GETARG_POINTER(0)",
          "old_line_content": "Datum",
          "new_line_content": "\tGISTENTRY  *entry = (GISTENTRY *) PG_GETARG_POINTER(0);",
          "content_same": false
        },
        {
          "line": 466,
          "old_api": null,
          "new_api": "PG_GETARG_ARRAYTYPE_P",
          "old_text": null,
          "new_text": "PG_GETARG_ARRAYTYPE_P(1)",
          "old_line_content": "g_intbig_consistent(PG_FUNCTION_ARGS)",
          "new_line_content": "\tArrayType  *query = PG_GETARG_ARRAYTYPE_P(1);",
          "content_same": false
        },
        {
          "line": 595,
          "old_api": null,
          "new_api": "PG_RETURN_VOID",
          "old_text": null,
          "new_text": "PG_RETURN_VOID()",
          "old_line_content": "\t\t\t\t\t\t\tSIGLEN_DEFAULT, 1, SIGLEN_MAX,",
          "new_line_content": "\tPG_RETURN_VOID();",
          "content_same": false
        },
        {
          "line": 212,
          "old_api": null,
          "new_api": "pg_popcount",
          "old_text": null,
          "new_text": "pg_popcount(sign, siglen)",
          "old_line_content": "static int32",
          "new_line_content": "\treturn pg_popcount(sign, siglen);",
          "content_same": false
        },
        {
          "line": 467,
          "old_api": null,
          "new_api": "PG_GETARG_UINT16",
          "old_text": null,
          "new_text": "PG_GETARG_UINT16(2)",
          "old_line_content": "{",
          "new_line_content": "\tStrategyNumber strategy = (StrategyNumber) PG_GETARG_UINT16(2);",
          "content_same": false
        },
        {
          "line": 471,
          "old_api": null,
          "new_api": "GET_SIGLEN",
          "old_text": null,
          "new_text": "GET_SIGLEN()",
          "old_line_content": "",
          "new_line_content": "\tint\t\t\tsiglen = GET_SIGLEN();",
          "content_same": false
        },
        {
          "line": 349,
          "old_api": null,
          "new_api": "palloc",
          "old_text": null,
          "new_text": "palloc(nbytes)",
          "old_line_content": "",
          "new_line_content": "\tv->spl_left = (OffsetNumber *) palloc(nbytes);",
          "content_same": false
        },
        {
          "line": 350,
          "old_api": null,
          "new_api": "palloc",
          "old_text": null,
          "new_text": "palloc(nbytes)",
          "old_line_content": "\tmaxoff = entryvec->n - 2;",
          "new_line_content": "\tv->spl_right = (OffsetNumber *) palloc(nbytes);",
          "content_same": false
        },
        {
          "line": 477,
          "old_api": null,
          "new_api": "DatumGetPointer",
          "old_text": null,
          "new_text": "DatumGetPointer(entry->key)",
          "old_line_content": "\t/* All cases served by this function are inexact */",
          "new_line_content": "\tif (ISALLTRUE(DatumGetPointer(entry->key)))",
          "content_same": false
        },
        {
          "line": 478,
          "old_api": null,
          "new_api": "PG_RETURN_BOOL",
          "old_text": null,
          "new_text": "PG_RETURN_BOOL(true)",
          "old_line_content": "\t*recheck = true;",
          "new_line_content": "\t\tPG_RETURN_BOOL(true);",
          "content_same": false
        },
        {
          "line": 354,
          "old_api": null,
          "new_api": "GETENTRY",
          "old_text": null,
          "new_text": "GETENTRY(entryvec, k)",
          "old_line_content": "",
          "new_line_content": "\t\t_k = GETENTRY(entryvec, k);",
          "content_same": false
        },
        {
          "line": 482,
          "old_api": null,
          "new_api": "signconsistent",
          "old_text": null,
          "new_text": "signconsistent((QUERYTYPE *) query,\n\t\t\t\t\t\t\t\tGETSIGN(DatumGetPointer(entry->key)),\n\t\t\t\t\t\t\t\tsiglen,\n\t\t\t\t\t\t\t\tfalse)",
          "old_line_content": "",
          "new_line_content": "\t\tretval = signconsistent((QUERYTYPE *) query,",
          "content_same": false
        },
        {
          "line": 483,
          "old_api": null,
          "new_api": "DatumGetPointer",
          "old_text": null,
          "new_text": "DatumGetPointer(entry->key)",
          "old_line_content": "\tif (strategy == BooleanSearchStrategy)",
          "new_line_content": "\t\t\t\t\t\t\t\tGETSIGN(DatumGetPointer(entry->key)),",
          "content_same": false
        },
        {
          "line": 487,
          "old_api": null,
          "new_api": "PG_RETURN_BOOL",
          "old_text": null,
          "new_text": "PG_RETURN_BOOL(retval)",
          "old_line_content": "\t\t\t\t\t\t\t\tsiglen,",
          "new_line_content": "\t\tPG_RETURN_BOOL(retval);",
          "content_same": false
        },
        {
          "line": 234,
          "old_api": null,
          "new_api": "ISALLTRUE",
          "old_text": null,
          "new_text": "ISALLTRUE(a)",
          "old_line_content": "static int",
          "new_line_content": "\tif (ISALLTRUE(a))",
          "content_same": false
        },
        {
          "line": 236,
          "old_api": null,
          "new_api": "ISALLTRUE",
          "old_text": null,
          "new_text": "ISALLTRUE(b)",
          "old_line_content": "{",
          "new_line_content": "\t\tif (ISALLTRUE(b))",
          "content_same": false
        },
        {
          "line": 495,
          "old_api": null,
          "new_api": "DatumGetPointer",
          "old_text": null,
          "new_text": "DatumGetPointer(entry->key)",
          "old_line_content": "\tswitch (strategy)",
          "new_line_content": "\t\t\tretval = _intbig_overlap((GISTTYPE *) DatumGetPointer(entry->key),",
          "content_same": false
        },
        {
          "line": 241,
          "old_api": null,
          "new_api": "ISALLTRUE",
          "old_text": null,
          "new_text": "ISALLTRUE(b)",
          "old_line_content": "\t\telse",
          "new_line_content": "\telse if (ISALLTRUE(b))",
          "content_same": false
        },
        {
          "line": 499,
          "old_api": null,
          "new_api": "GIST_LEAF",
          "old_text": null,
          "new_text": "GIST_LEAF(entry)",
          "old_line_content": "\t\t\t\t\t\t\t\t\t query, siglen);",
          "new_line_content": "\t\t\tif (GIST_LEAF(entry))",
          "content_same": false
        },
        {
          "line": 503,
          "old_api": null,
          "new_api": "ARRPTR",
          "old_text": null,
          "new_text": "ARRPTR(query)",
          "old_line_content": "\t\t\t{",
          "new_line_content": "\t\t\t\tint32\t   *ptr = ARRPTR(query);",
          "content_same": false
        },
        {
          "line": 504,
          "old_api": null,
          "new_api": "palloc0",
          "old_text": null,
          "new_text": "palloc0(siglen)",
          "old_line_content": "\t\t\t\tint\t\t\ti,",
          "new_line_content": "\t\t\t\tBITVECP\t\tdq = palloc0(siglen),",
          "content_same": false
        },
        {
          "line": 250,
          "old_api": null,
          "new_api": "PG_GETARG_DATUM",
          "old_text": null,
          "new_text": "PG_GETARG_DATUM(0)",
          "old_line_content": "Datum",
          "new_line_content": "\tPG_RETURN_DATUM(PG_GETARG_DATUM(0));",
          "content_same": false
        },
        {
          "line": 379,
          "old_api": null,
          "new_api": "GETENTRY",
          "old_text": null,
          "new_text": "GETENTRY(entryvec, seed_1)",
          "old_line_content": "\t}",
          "new_line_content": "\tdatum_l = _intbig_alloc(ISALLTRUE(GETENTRY(entryvec, seed_1)), siglen,",
          "content_same": false
        },
        {
          "line": 380,
          "old_api": null,
          "new_api": "GETENTRY",
          "old_text": null,
          "new_text": "GETENTRY(entryvec, seed_1)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t\t\t\tGETSIGN(GETENTRY(entryvec, seed_1)));",
          "content_same": false
        },
        {
          "line": 381,
          "old_api": null,
          "new_api": "GETENTRY",
          "old_text": null,
          "new_text": "GETENTRY(entryvec, seed_2)",
          "old_line_content": "\t/* form initial .. */",
          "new_line_content": "\tdatum_r = _intbig_alloc(ISALLTRUE(GETENTRY(entryvec, seed_2)), siglen,",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 512,
          "old_api": "HASH",
          "new_api": null,
          "old_text": "HASH(dq, *ptr, siglen)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tHASH(dq, *ptr, siglen);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 516,
          "old_api": "DatumGetPointer",
          "new_api": null,
          "old_text": "DatumGetPointer(entry->key)",
          "new_text": null,
          "old_line_content": "\t\t\t\tde = GETSIGN((GISTTYPE *) DatumGetPointer(entry->key));",
          "new_line_content": "\t\t\t\t{",
          "content_same": false
        },
        {
          "line": 530,
          "old_api": "DatumGetPointer",
          "new_api": null,
          "old_text": "DatumGetPointer(entry->key)",
          "new_text": null,
          "old_line_content": "\t\t\t\tretval = _intbig_contains((GISTTYPE *) DatumGetPointer(entry->key),",
          "new_line_content": "\t\tcase RTContainsStrategyNumber:",
          "content_same": false
        },
        {
          "line": 535,
          "old_api": "DatumGetPointer",
          "new_api": null,
          "old_text": "DatumGetPointer(entry->key)",
          "new_text": null,
          "old_line_content": "\t\t\tretval = _intbig_contains((GISTTYPE *) DatumGetPointer(entry->key),",
          "new_line_content": "\t\tcase RTContainedByStrategyNumber:",
          "content_same": false
        },
        {
          "line": 549,
          "old_api": "ARRNELEMS",
          "new_api": null,
          "old_text": "ARRNELEMS(query)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\tnum = ARRNELEMS(query);",
          "new_line_content": "\t\t\t\t\t\t\tde;",
          "content_same": false
        },
        {
          "line": 550,
          "old_api": "ARRPTR",
          "new_api": null,
          "old_text": "ARRPTR(query)",
          "new_text": null,
          "old_line_content": "\t\t\t\tint32\t   *ptr = ARRPTR(query);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 551,
          "old_api": "palloc0",
          "new_api": null,
          "old_text": "palloc0(siglen)",
          "new_text": null,
          "old_line_content": "\t\t\t\tBITVECP\t\tdq = palloc0(siglen),",
          "new_line_content": "\t\t\t\twhile (num--)",
          "content_same": false
        },
        {
          "line": 556,
          "old_api": "HASH",
          "new_api": null,
          "old_text": "HASH(dq, *ptr, siglen)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tHASH(dq, *ptr, siglen);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 560,
          "old_api": "DatumGetPointer",
          "new_api": null,
          "old_text": "DatumGetPointer(entry->key)",
          "new_text": null,
          "old_line_content": "\t\t\t\tde = GETSIGN((GISTTYPE *) DatumGetPointer(entry->key));",
          "new_line_content": "\t\t\t\t{",
          "content_same": false
        },
        {
          "line": 583,
          "old_api": "PG_FREE_IF_COPY",
          "new_api": null,
          "old_text": "PG_FREE_IF_COPY(query, 1)",
          "new_text": null,
          "old_line_content": "\tPG_FREE_IF_COPY(query, 1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 584,
          "old_api": "PG_RETURN_BOOL",
          "new_api": null,
          "old_text": "PG_RETURN_BOOL(retval)",
          "new_text": null,
          "old_line_content": "\tPG_RETURN_BOOL(retval);",
          "new_line_content": "Datum",
          "content_same": false
        },
        {
          "line": 592,
          "old_api": "init_local_reloptions",
          "new_api": null,
          "old_text": "init_local_reloptions(relopts, sizeof(GISTIntArrayBigOptions))",
          "new_text": null,
          "old_line_content": "\tinit_local_reloptions(relopts, sizeof(GISTIntArrayBigOptions));",
          "new_line_content": "\t\t\t\t\t\t\tSIGLEN_DEFAULT, 1, SIGLEN_MAX,",
          "content_same": false
        },
        {
          "line": 596,
          "old_api": "offsetof",
          "new_api": null,
          "old_text": "offsetof(GISTIntArrayBigOptions, siglen)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\toffsetof(GISTIntArrayBigOptions, siglen));",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 598,
          "old_api": "PG_RETURN_VOID",
          "new_api": null,
          "old_text": "PG_RETURN_VOID()",
          "new_text": null,
          "old_line_content": "\tPG_RETURN_VOID();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 182,
          "old_api": "pfree",
          "new_api": null,
          "old_text": "pfree(in)",
          "new_text": null,
          "old_line_content": "\t\t\tpfree(in);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 184,
          "old_api": "PG_RETURN_POINTER",
          "new_api": null,
          "old_text": "PG_RETURN_POINTER(retval)",
          "new_text": null,
          "old_line_content": "\t\tPG_RETURN_POINTER(retval);",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 186,
          "old_api": "DatumGetPointer",
          "new_api": null,
          "old_text": "DatumGetPointer(entry->key)",
          "new_text": null,
          "old_line_content": "\telse if (!ISALLTRUE(DatumGetPointer(entry->key)))",
          "new_line_content": "\t\tint\t\t\ti;",
          "content_same": false
        },
        {
          "line": 190,
          "old_api": "DatumGetPointer",
          "new_api": null,
          "old_text": "DatumGetPointer(entry->key)",
          "new_text": null,
          "old_line_content": "\t\tBITVECP\t\tsign = GETSIGN(DatumGetPointer(entry->key));",
          "new_line_content": "\t\tLOOPBYTE(siglen)",
          "content_same": false
        },
        {
          "line": 199,
          "old_api": "_intbig_alloc",
          "new_api": null,
          "old_text": "_intbig_alloc(true, siglen, sign)",
          "new_text": null,
          "old_line_content": "\t\tres = _intbig_alloc(true, siglen, sign);",
          "new_line_content": "\t\t\t\t\t  entry->rel, entry->page,",
          "content_same": false
        },
        {
          "line": 200,
          "old_api": "palloc",
          "new_api": null,
          "old_text": "palloc(sizeof(GISTENTRY))",
          "new_text": null,
          "old_line_content": "\t\tretval = (GISTENTRY *) palloc(sizeof(GISTENTRY));",
          "new_line_content": "\t\t\t\t\t  entry->offset, false);",
          "content_same": false
        },
        {
          "line": 201,
          "old_api": "PointerGetDatum",
          "new_api": null,
          "old_text": "PointerGetDatum(res)",
          "new_text": null,
          "old_line_content": "\t\tgistentryinit(*retval, PointerGetDatum(res),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 208,
          "old_api": "PG_RETURN_POINTER",
          "new_api": null,
          "old_text": "PG_RETURN_POINTER(entry)",
          "new_text": null,
          "old_line_content": "\tPG_RETURN_POINTER(entry);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 215,
          "old_api": "pg_popcount",
          "new_api": null,
          "old_text": "pg_popcount(sign, siglen)",
          "new_text": null,
          "old_line_content": "\treturn pg_popcount(sign, siglen);",
          "new_line_content": "static int",
          "content_same": false
        },
        {
          "line": 237,
          "old_api": "ISALLTRUE",
          "new_api": null,
          "old_text": "ISALLTRUE(a)",
          "new_text": null,
          "old_line_content": "\tif (ISALLTRUE(a))",
          "new_line_content": "\t\t\treturn 0;",
          "content_same": false
        },
        {
          "line": 245,
          "old_api": "GETSIGN",
          "new_api": null,
          "old_text": "GETSIGN(a)",
          "new_text": null,
          "old_line_content": "\t\treturn SIGLENBIT(siglen) - sizebitvec(GETSIGN(a), siglen);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 247,
          "old_api": "GETSIGN",
          "new_api": null,
          "old_text": "GETSIGN(b)",
          "new_text": null,
          "old_line_content": "\treturn hemdistsign(GETSIGN(a), GETSIGN(b), siglen);",
          "new_line_content": "Datum",
          "content_same": false
        },
        {
          "line": 253,
          "old_api": "PG_GETARG_DATUM",
          "new_api": null,
          "old_text": "PG_GETARG_DATUM(0)",
          "new_text": null,
          "old_line_content": "\tPG_RETURN_DATUM(PG_GETARG_DATUM(0));",
          "new_line_content": "static int32",
          "content_same": false
        },
        {
          "line": 260,
          "old_api": "GETSIGN",
          "new_api": null,
          "old_text": "GETSIGN(add)",
          "new_text": null,
          "old_line_content": "\tBITVECP\t\tsadd = GETSIGN(add);",
          "new_line_content": "\t\treturn 1;",
          "content_same": false
        },
        {
          "line": 262,
          "old_api": "ISALLTRUE",
          "new_api": null,
          "old_text": "ISALLTRUE(add)",
          "new_text": null,
          "old_line_content": "\tif (ISALLTRUE(add))",
          "new_line_content": "\t\tsbase[i] |= sadd[i];",
          "content_same": false
        },
        {
          "line": 264,
          "old_api": "LOOPBYTE",
          "new_api": null,
          "old_text": "LOOPBYTE(siglen)",
          "new_text": null,
          "old_line_content": "\tLOOPBYTE(siglen)",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 272,
          "old_api": "PG_GETARG_POINTER",
          "new_api": null,
          "old_text": "PG_GETARG_POINTER(0)",
          "new_text": null,
          "old_line_content": "\tGistEntryVector *entryvec = (GistEntryVector *) PG_GETARG_POINTER(0);",
          "new_line_content": "\tint32\t\ti;",
          "content_same": false
        },
        {
          "line": 276,
          "old_api": "_intbig_alloc",
          "new_api": null,
          "old_text": "_intbig_alloc(false, siglen, NULL)",
          "new_text": null,
          "old_line_content": "\tGISTTYPE   *result = _intbig_alloc(false, siglen, NULL);",
          "new_line_content": "\tfor (i = 0; i < entryvec->n; i++)",
          "content_same": false
        },
        {
          "line": 277,
          "old_api": "GETSIGN",
          "new_api": null,
          "old_text": "GETSIGN(result)",
          "new_text": null,
          "old_line_content": "\tBITVECP\t\tbase = GETSIGN(result);",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 284,
          "old_api": "CALCGTSIZE",
          "new_api": null,
          "old_text": "CALCGTSIZE(ALLISTRUE, siglen)",
          "new_text": null,
          "old_line_content": "\t\t\tSET_VARSIZE(result, CALCGTSIZE(ALLISTRUE, siglen));",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 289,
          "old_api": "VARSIZE",
          "new_api": null,
          "old_text": "VARSIZE(result)",
          "new_text": null,
          "old_line_content": "\t*size = VARSIZE(result);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 291,
          "old_api": "PG_RETURN_POINTER",
          "new_api": null,
          "old_text": "PG_RETURN_POINTER(result)",
          "new_text": null,
          "old_line_content": "\tPG_RETURN_POINTER(result);",
          "new_line_content": "Datum",
          "content_same": false
        },
        {
          "line": 300,
          "old_api": "DatumGetPointer",
          "new_api": null,
          "old_text": "DatumGetPointer(origentry->key)",
          "new_text": null,
          "old_line_content": "\tGISTTYPE   *origval = (GISTTYPE *) DatumGetPointer(origentry->key);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 304,
          "old_api": "hemdist",
          "new_api": null,
          "old_text": "hemdist(origval, newval, siglen)",
          "new_text": null,
          "old_line_content": "\t*penalty = hemdist(origval, newval, siglen);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 305,
          "old_api": "PG_RETURN_POINTER",
          "new_api": null,
          "old_text": "PG_RETURN_POINTER(penalty)",
          "new_text": null,
          "old_line_content": "\tPG_RETURN_POINTER(penalty);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 325,
          "old_api": "PG_GETARG_POINTER",
          "new_api": null,
          "old_text": "PG_GETARG_POINTER(0)",
          "new_text": null,
          "old_line_content": "\tGistEntryVector *entryvec = (GistEntryVector *) PG_GETARG_POINTER(0);",
          "new_line_content": "\tOffsetNumber k,",
          "content_same": false
        },
        {
          "line": 326,
          "old_api": "PG_GETARG_POINTER",
          "new_api": null,
          "old_text": "PG_GETARG_POINTER(1)",
          "new_text": null,
          "old_line_content": "\tGIST_SPLITVEC *v = (GIST_SPLITVEC *) PG_GETARG_POINTER(1);",
          "new_line_content": "\t\t\t\tj;",
          "content_same": false
        },
        {
          "line": 327,
          "old_api": "GET_SIGLEN",
          "new_api": null,
          "old_text": "GET_SIGLEN()",
          "new_text": null,
          "old_line_content": "\tint\t\t\tsiglen = GET_SIGLEN();",
          "new_line_content": "\tGISTTYPE   *datum_l,",
          "content_same": false
        },
        {
          "line": 353,
          "old_api": "palloc",
          "new_api": null,
          "old_text": "palloc(nbytes)",
          "new_text": null,
          "old_line_content": "\tv->spl_right = (OffsetNumber *) palloc(nbytes);",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 358,
          "old_api": "OffsetNumberNext",
          "new_api": null,
          "old_text": "OffsetNumberNext(j)",
          "new_text": null,
          "old_line_content": "\t\tfor (j = OffsetNumberNext(k); j <= maxoff; j = OffsetNumberNext(j))",
          "new_line_content": "\t\t\tif (size_waste > waste)",
          "content_same": false
        },
        {
          "line": 360,
          "old_api": "GETENTRY",
          "new_api": null,
          "old_text": "GETENTRY(entryvec, j)",
          "new_text": null,
          "old_line_content": "\t\t\tsize_waste = hemdist(_k, GETENTRY(entryvec, j), siglen);",
          "new_line_content": "\t\t\t\twaste = size_waste;",
          "content_same": false
        },
        {
          "line": 383,
          "old_api": "GETENTRY",
          "new_api": null,
          "old_text": "GETENTRY(entryvec, seed_1)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\tGETSIGN(GETENTRY(entryvec, seed_1)));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 385,
          "old_api": "GETENTRY",
          "new_api": null,
          "old_text": "GETENTRY(entryvec, seed_2)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\tGETSIGN(GETENTRY(entryvec, seed_2)));",
          "new_line_content": "\t/* sort before ... */",
          "content_same": false
        },
        {
          "line": 389,
          "old_api": "palloc",
          "new_api": null,
          "old_text": "palloc(sizeof(SPLITCOST) * maxoff)",
          "new_text": null,
          "old_line_content": "\tcostvector = (SPLITCOST *) palloc(sizeof(SPLITCOST) * maxoff);",
          "new_line_content": "\t\tcostvector[j - 1].pos = j;",
          "content_same": false
        },
        {
          "line": 394,
          "old_api": "hemdist",
          "new_api": null,
          "old_text": "hemdist(datum_l, _j, siglen)",
          "new_text": null,
          "old_line_content": "\t\tsize_alpha = hemdist(datum_l, _j, siglen);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 396,
          "old_api": "abs",
          "new_api": null,
          "old_text": "abs(size_alpha - size_beta)",
          "new_text": null,
          "old_line_content": "\t\tcostvector[j - 1].cost = abs(size_alpha - size_beta);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 400,
          "old_api": "GETSIGN",
          "new_api": null,
          "old_text": "GETSIGN(datum_l)",
          "new_text": null,
          "old_line_content": "\tunion_l = GETSIGN(datum_l);",
          "new_line_content": "\tfor (k = 0; k < maxoff; k++)",
          "content_same": false
        },
        {
          "line": 401,
          "old_api": "GETSIGN",
          "new_api": null,
          "old_text": "GETSIGN(datum_r)",
          "new_text": null,
          "old_line_content": "\tunion_r = GETSIGN(datum_r);",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 418,
          "old_api": "GETENTRY",
          "new_api": null,
          "old_text": "GETENTRY(entryvec, j)",
          "new_text": null,
          "old_line_content": "\t\t_j = GETENTRY(entryvec, j);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 420,
          "old_api": "hemdist",
          "new_api": null,
          "old_text": "hemdist(datum_r, _j, siglen)",
          "new_text": null,
          "old_line_content": "\t\tsize_beta = hemdist(datum_r, _j, siglen);",
          "new_line_content": "\t\t{",
          "content_same": false
        },
        {
          "line": 422,
          "old_api": "WISH_F",
          "new_api": null,
          "old_text": "WISH_F(v->spl_nleft, v->spl_nright, 0.00001)",
          "new_text": null,
          "old_line_content": "\t\tif (size_alpha < size_beta + WISH_F(v->spl_nleft, v->spl_nright, 0.00001))",
          "new_line_content": "\t\t\t{",
          "content_same": false
        },
        {
          "line": 426,
          "old_api": "ISALLTRUE",
          "new_api": null,
          "old_text": "ISALLTRUE(datum_l)",
          "new_text": null,
          "old_line_content": "\t\t\t\tif (!ISALLTRUE(datum_l))",
          "new_line_content": "\t\t\telse",
          "content_same": false
        },
        {
          "line": 427,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(union_l, 0xff, siglen)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tmemset(union_l, 0xff, siglen);",
          "new_line_content": "\t\t\t{",
          "content_same": false
        },
        {
          "line": 431,
          "old_api": "GETSIGN",
          "new_api": null,
          "old_text": "GETSIGN(_j)",
          "new_text": null,
          "old_line_content": "\t\t\t\tptr = GETSIGN(_j);",
          "new_line_content": "\t\t\t}",
          "content_same": false
        },
        {
          "line": 432,
          "old_api": "LOOPBYTE",
          "new_api": null,
          "old_text": "LOOPBYTE(siglen)",
          "new_text": null,
          "old_line_content": "\t\t\t\tLOOPBYTE(siglen)",
          "new_line_content": "\t\t\t*left++ = j;",
          "content_same": false
        },
        {
          "line": 442,
          "old_api": "ISALLTRUE",
          "new_api": null,
          "old_text": "ISALLTRUE(datum_r)",
          "new_text": null,
          "old_line_content": "\t\t\t\tif (!ISALLTRUE(datum_r))",
          "new_line_content": "\t\t\telse",
          "content_same": false
        },
        {
          "line": 443,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(union_r, 0xff, siglen)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tmemset(union_r, 0xff, siglen);",
          "new_line_content": "\t\t\t{",
          "content_same": false
        },
        {
          "line": 447,
          "old_api": "GETSIGN",
          "new_api": null,
          "old_text": "GETSIGN(_j)",
          "new_text": null,
          "old_line_content": "\t\t\t\tptr = GETSIGN(_j);",
          "new_line_content": "\t\t\t}",
          "content_same": false
        },
        {
          "line": 448,
          "old_api": "LOOPBYTE",
          "new_api": null,
          "old_text": "LOOPBYTE(siglen)",
          "new_text": null,
          "old_line_content": "\t\t\t\tLOOPBYTE(siglen)",
          "new_line_content": "\t\t\t*right++ = j;",
          "content_same": false
        },
        {
          "line": 460,
          "old_api": "PointerGetDatum",
          "new_api": null,
          "old_text": "PointerGetDatum(datum_r)",
          "new_text": null,
          "old_line_content": "\tv->spl_rdatum = PointerGetDatum(datum_r);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 462,
          "old_api": "PG_RETURN_POINTER",
          "new_api": null,
          "old_text": "PG_RETURN_POINTER(v)",
          "new_text": null,
          "old_line_content": "\tPG_RETURN_POINTER(v);",
          "new_line_content": "Datum",
          "content_same": false
        },
        {
          "line": 468,
          "old_api": "PG_GETARG_POINTER",
          "new_api": null,
          "old_text": "PG_GETARG_POINTER(0)",
          "new_text": null,
          "old_line_content": "\tGISTENTRY  *entry = (GISTENTRY *) PG_GETARG_POINTER(0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 469,
          "old_api": "PG_GETARG_ARRAYTYPE_P",
          "new_api": null,
          "old_text": "PG_GETARG_ARRAYTYPE_P(1)",
          "new_text": null,
          "old_line_content": "\tArrayType  *query = PG_GETARG_ARRAYTYPE_P(1);",
          "new_line_content": "\t/* Oid\t\tsubtype = PG_GETARG_OID(3); */",
          "content_same": false
        },
        {
          "line": 473,
          "old_api": "PG_GETARG_POINTER",
          "new_api": null,
          "old_text": "PG_GETARG_POINTER(4)",
          "new_text": null,
          "old_line_content": "\tbool\t   *recheck = (bool *) PG_GETARG_POINTER(4);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 474,
          "old_api": "GET_SIGLEN",
          "new_api": null,
          "old_text": "GET_SIGLEN()",
          "new_text": null,
          "old_line_content": "\tint\t\t\tsiglen = GET_SIGLEN();",
          "new_line_content": "\t/* All cases served by this function are inexact */",
          "content_same": false
        },
        {
          "line": 480,
          "old_api": "DatumGetPointer",
          "new_api": null,
          "old_text": "DatumGetPointer(entry->key)",
          "new_text": null,
          "old_line_content": "\tif (ISALLTRUE(DatumGetPointer(entry->key)))",
          "new_line_content": "\tif (strategy == BooleanSearchStrategy)",
          "content_same": false
        },
        {
          "line": 481,
          "old_api": "PG_RETURN_BOOL",
          "new_api": null,
          "old_text": "PG_RETURN_BOOL(true)",
          "new_text": null,
          "old_line_content": "\t\tPG_RETURN_BOOL(true);",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 485,
          "old_api": "signconsistent",
          "new_api": null,
          "old_text": "signconsistent((QUERYTYPE *) query,\n\t\t\t\t\t\t\t\tGETSIGN(DatumGetPointer(entry->key)),\n\t\t\t\t\t\t\t\tsiglen,\n\t\t\t\t\t\t\t\tfalse)",
          "new_text": null,
          "old_line_content": "\t\tretval = signconsistent((QUERYTYPE *) query,",
          "new_line_content": "\t\t\t\t\t\t\t\tfalse);",
          "content_same": false
        },
        {
          "line": 489,
          "old_api": "PG_FREE_IF_COPY",
          "new_api": null,
          "old_text": "PG_FREE_IF_COPY(query, 1)",
          "new_text": null,
          "old_line_content": "\t\tPG_FREE_IF_COPY(query, 1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 493,
          "old_api": "CHECKARRVALID",
          "new_api": null,
          "old_text": "CHECKARRVALID(query)",
          "new_text": null,
          "old_line_content": "\tCHECKARRVALID(query);",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 498,
          "old_api": "DatumGetPointer",
          "new_api": null,
          "old_text": "DatumGetPointer(entry->key)",
          "new_text": null,
          "old_line_content": "\t\t\tretval = _intbig_overlap((GISTTYPE *) DatumGetPointer(entry->key),",
          "new_line_content": "\t\tcase RTSameStrategyNumber:",
          "content_same": false
        },
        {
          "line": 505,
          "old_api": "ARRNELEMS",
          "new_api": null,
          "old_text": "ARRNELEMS(query)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\tnum = ARRNELEMS(query);",
          "new_line_content": "\t\t\t\t\t\t\tde;",
          "content_same": false
        },
        {
          "line": 506,
          "old_api": "ARRPTR",
          "new_api": null,
          "old_text": "ARRPTR(query)",
          "new_text": null,
          "old_line_content": "\t\t\t\tint32\t   *ptr = ARRPTR(query);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 507,
          "old_api": "palloc0",
          "new_api": null,
          "old_text": "palloc0(siglen)",
          "new_text": null,
          "old_line_content": "\t\t\t\tBITVECP\t\tdq = palloc0(siglen),",
          "new_line_content": "\t\t\t\twhile (num--)",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 31,
      "total_additions": 76,
      "total_deletions": 78,
      "total_api_changes": 185
    },
    "non_api_changes": {
      "has_non_api_changes": false,
      "evidence": {
        "total_diff_lines": 3,
        "api_related_lines": 185,
        "non_api_lines": 0,
        "non_api_line_numbers": []
      }
    },
    "api_calls_before": 205,
    "api_calls_after": 203,
    "diff_info": {
      "added_lines": 0,
      "removed_lines": 3,
      "total_diff_lines": 15
    }
  }
}
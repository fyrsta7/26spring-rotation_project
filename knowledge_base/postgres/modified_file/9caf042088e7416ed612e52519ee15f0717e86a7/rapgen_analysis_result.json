{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/postgres/modified_file/9caf042088e7416ed612e52519ee15f0717e86a7",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/postgres/modified_file/9caf042088e7416ed612e52519ee15f0717e86a7/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/postgres/modified_file/9caf042088e7416ed612e52519ee15f0717e86a7/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/postgres/modified_file/9caf042088e7416ed612e52519ee15f0717e86a7/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 553,
          "old_api": "lfirst",
          "new_api": "foreach",
          "old_text": "lfirst(lc)",
          "new_text": "foreach(lc, index->indextlist)",
          "old_line_content": "\t\tTargetEntry *indextle = (TargetEntry *) lfirst(lc);",
          "new_line_content": "\tforeach(lc, index->indextlist)",
          "content_same": false
        },
        {
          "line": 660,
          "old_api": "lfirst",
          "new_api": "foreach",
          "old_text": "lfirst(lc)",
          "new_text": "foreach(lc, partrel->baserestrictinfo)",
          "old_line_content": "\t\tRestrictInfo *rinfo = (RestrictInfo *) lfirst(lc);",
          "new_line_content": "\tforeach(lc, partrel->baserestrictinfo)",
          "content_same": false
        },
        {
          "line": 695,
          "old_api": "get_notclausearg",
          "new_api": "is_notclause",
          "old_text": "get_notclausearg((Expr *) clause)",
          "new_text": "is_notclause(clause)",
          "old_line_content": "\t\tNode\t   *arg = (Node *) get_notclausearg((Expr *) clause);",
          "new_line_content": "\telse if (is_notclause(clause))",
          "content_same": false
        },
        {
          "line": 697,
          "old_api": "equal",
          "new_api": "get_notclausearg",
          "old_text": "equal(partexpr, arg)",
          "new_text": "get_notclausearg((Expr *) clause)",
          "old_line_content": "\t\tif (equal(partexpr, arg))",
          "new_line_content": "\t\tNode\t   *arg = (Node *) get_notclausearg((Expr *) clause);",
          "content_same": false
        },
        {
          "line": 728,
          "old_api": "IS_SIMPLE_REL",
          "new_api": "partitions_are_ordered",
          "old_text": "IS_SIMPLE_REL(partrel)",
          "new_text": "partitions_are_ordered(partrel->boundinfo, partrel->live_parts)",
          "old_line_content": "\tAssert(IS_SIMPLE_REL(partrel));",
          "new_line_content": "\tAssert(partitions_are_ordered(partrel->boundinfo, partrel->live_parts));",
          "content_same": false
        },
        {
          "line": 814,
          "old_api": "elog",
          "new_api": "get_ordering_op_properties",
          "old_text": "elog(ERROR, \"operator %u is not a valid ordering operator\",\n\t\t\t opno)",
          "new_text": "get_ordering_op_properties(opno,\n\t\t\t\t\t\t\t\t\t&opfamily, &opcintype, &strategy)",
          "old_line_content": "\t\telog(ERROR, \"operator %u is not a valid ordering operator\",",
          "new_line_content": "\tif (!get_ordering_op_properties(opno,",
          "content_same": false
        },
        {
          "line": 881,
          "old_api": "Assert",
          "new_api": "elog",
          "old_text": "Assert(tle)",
          "new_text": "elog(ERROR, \"volatile EquivalenceClass has no sortref\")",
          "old_line_content": "\t\t\tAssert(tle);",
          "new_line_content": "\t\t\t\telog(ERROR, \"volatile EquivalenceClass has no sortref\");",
          "content_same": false
        },
        {
          "line": 883,
          "old_api": "find_var_for_subquery_tle",
          "new_api": "Assert",
          "old_text": "find_var_for_subquery_tle(rel, tle)",
          "new_text": "Assert(tle)",
          "old_line_content": "\t\t\touter_var = find_var_for_subquery_tle(rel, tle);",
          "new_line_content": "\t\t\tAssert(tle);",
          "content_same": false
        },
        {
          "line": 947,
          "old_api": "lfirst",
          "new_api": "foreach",
          "old_text": "lfirst(j)",
          "new_text": "foreach(j, sub_eclass->ec_members)",
          "old_line_content": "\t\t\t\tEquivalenceMember *sub_member = (EquivalenceMember *) lfirst(j);",
          "new_line_content": "\t\t\tforeach(j, sub_eclass->ec_members)",
          "content_same": false
        },
        {
          "line": 1032,
          "old_api": "lappend",
          "new_api": "pathkey_is_redundant",
          "old_text": "lappend(retval, best_pathkey)",
          "new_text": "pathkey_is_redundant(best_pathkey, retval)",
          "old_line_content": "\t\t\tretval = lappend(retval, best_pathkey);",
          "new_line_content": "\t\tif (!pathkey_is_redundant(best_pathkey, retval))",
          "content_same": false
        },
        {
          "line": 1061,
          "old_api": "lfirst",
          "new_api": "foreach",
          "old_text": "lfirst(lc)",
          "new_text": "foreach(lc, rel->reltarget->exprs)",
          "old_line_content": "\t\tVar\t\t   *var = (Var *) lfirst(lc);",
          "new_line_content": "\tforeach(lc, rel->reltarget->exprs)",
          "content_same": false
        },
        {
          "line": 1066,
          "old_api": "Assert",
          "new_api": "IsA",
          "old_text": "Assert(var->varno == rel->relid)",
          "new_text": "IsA(var, Var)",
          "old_line_content": "\t\tAssert(var->varno == rel->relid);",
          "new_line_content": "\t\tif (!IsA(var, Var))",
          "content_same": false
        },
        {
          "line": 1180,
          "old_api": "lfirst",
          "new_api": "foreach",
          "old_text": "lfirst(l)",
          "new_text": "foreach(l, *sortclauses)",
          "old_line_content": "\t\tSortGroupClause *sortcl = (SortGroupClause *) lfirst(l);",
          "new_line_content": "\tforeach(l, *sortclauses)",
          "content_same": false
        },
        {
          "line": 1201,
          "old_api": "foreach_delete_current",
          "new_api": "lappend",
          "old_text": "foreach_delete_current(*sortclauses, l)",
          "new_text": "lappend(pathkeys, pathkey)",
          "old_line_content": "\t\t\t*sortclauses = foreach_delete_current(*sortclauses, l);",
          "new_line_content": "\t\t\tpathkeys = lappend(pathkeys, pathkey);",
          "content_same": false
        },
        {
          "line": 1323,
          "old_api": "update_mergeclause_eclasses",
          "new_api": "lfirst",
          "old_text": "update_mergeclause_eclasses(root, rinfo)",
          "new_text": "lfirst(i)",
          "old_line_content": "\t\tupdate_mergeclause_eclasses(root, rinfo);",
          "new_line_content": "\t\tRestrictInfo *rinfo = (RestrictInfo *) lfirst(i);",
          "content_same": false
        },
        {
          "line": 1478,
          "old_api": "lfirst",
          "new_api": "foreach",
          "old_text": "lfirst(lc2)",
          "new_text": "foreach(lc2, oeclass->ec_members)",
          "old_line_content": "\t\t\tEquivalenceMember *em = (EquivalenceMember *) lfirst(lc2);",
          "new_line_content": "\t\tforeach(lc2, oeclass->ec_members)",
          "content_same": false
        },
        {
          "line": 1505,
          "old_api": "lfirst",
          "new_api": "foreach",
          "old_text": "lfirst(lc)",
          "new_text": "foreach(lc, root->query_pathkeys)",
          "old_line_content": "\t\t\tPathKey    *query_pathkey = (PathKey *) lfirst(lc);",
          "new_line_content": "\t\tforeach(lc, root->query_pathkeys)",
          "content_same": false
        },
        {
          "line": 1524,
          "old_api": "foreach",
          "new_api": "list_copy",
          "old_text": "foreach(lc, root->query_pathkeys)",
          "new_text": "list_copy(root->query_pathkeys)",
          "old_line_content": "\t\t\tforeach(lc, root->query_pathkeys)",
          "new_line_content": "\t\t\tpathkeys = list_copy(root->query_pathkeys);",
          "content_same": false
        },
        {
          "line": 1526,
          "old_api": "lfirst",
          "new_api": "foreach",
          "old_text": "lfirst(lc)",
          "new_text": "foreach(lc, root->query_pathkeys)",
          "old_line_content": "\t\t\t\tPathKey    *query_pathkey = (PathKey *) lfirst(lc);",
          "new_line_content": "\t\t\tforeach(lc, root->query_pathkeys)",
          "content_same": false
        },
        {
          "line": 1586,
          "old_api": "linitial_oid",
          "new_api": "make_canonical_pathkey",
          "old_text": "linitial_oid(ec->ec_opfamilies)",
          "new_text": "make_canonical_pathkey(root,\n\t\t\t\t\t\t\t\t\t\t ec,\n\t\t\t\t\t\t\t\t\t\t linitial_oid(ec->ec_opfamilies),\n\t\t\t\t\t\t\t\t\t\t BTLessStrategyNumber,\n\t\t\t\t\t\t\t\t\t\t false)",
          "old_line_content": "\t\t\t\t\t\t\t\t\t\t linitial_oid(ec->ec_opfamilies),",
          "new_line_content": "\t\tpathkey = make_canonical_pathkey(root,",
          "content_same": false
        },
        {
          "line": 1663,
          "old_api": "lnext",
          "new_api": "elog",
          "old_text": "lnext(outer_pathkeys, lop)",
          "new_text": "elog(ERROR, \"too few pathkeys for mergeclauses\")",
          "old_line_content": "\t\t\tlop = lnext(outer_pathkeys, lop);",
          "new_line_content": "\t\t\t\telog(ERROR, \"too few pathkeys for mergeclauses\");",
          "content_same": false
        },
        {
          "line": 1743,
          "old_api": "lnext",
          "new_api": "lfirst",
          "old_text": "lnext(pathkeys, lip)",
          "new_text": "lfirst(lip)",
          "old_line_content": "\tlip = lnext(pathkeys, lip);",
          "new_line_content": "\tpathkey = (PathKey *) lfirst(lip);",
          "content_same": false
        },
        {
          "line": 1770,
          "old_api": "lnext",
          "new_api": "lfirst",
          "old_text": "lnext(pathkeys, lip)",
          "new_text": "lfirst(lip)",
          "old_line_content": "\t\t\tlip = lnext(pathkeys, lip);",
          "new_line_content": "\t\t\tpathkey = (PathKey *) lfirst(lip);",
          "content_same": false
        },
        {
          "line": 1852,
          "old_api": "lfirst",
          "new_api": "foreach",
          "old_text": "lfirst(j)",
          "new_text": "foreach(j, rel->joininfo)",
          "old_line_content": "\t\t\t\tRestrictInfo *restrictinfo = (RestrictInfo *) lfirst(j);",
          "new_line_content": "\t\t\tforeach(j, rel->joininfo)",
          "content_same": false
        },
        {
          "line": 1893,
          "old_api": "lfirst",
          "new_api": "foreach",
          "old_text": "lfirst(l)",
          "new_text": "foreach(l, root->query_pathkeys)",
          "old_line_content": "\t\tPathKey    *query_pathkey = (PathKey *) lfirst(l);",
          "new_line_content": "\tforeach(l, root->query_pathkeys)",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 1034,
          "old_api": null,
          "new_api": "lappend",
          "old_text": null,
          "new_text": "lappend(retval, best_pathkey)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tretval = lappend(retval, best_pathkey);",
          "content_same": false
        },
        {
          "line": 1550,
          "old_api": null,
          "new_api": "list_copy_head",
          "old_text": null,
          "new_text": "list_copy_head(root->query_pathkeys, matches)",
          "old_line_content": "\t\t\t/* we have all of the join pathkeys, so nothing more to do */",
          "new_line_content": "\t\t\tpathkeys = list_copy_head(root->query_pathkeys, matches);",
          "content_same": false
        },
        {
          "line": 1553,
          "old_api": null,
          "new_api": "pfree",
          "old_text": null,
          "new_text": "pfree(ecs)",
          "old_line_content": "",
          "new_line_content": "\t\t\tpfree(ecs);",
          "content_same": false
        },
        {
          "line": 1554,
          "old_api": null,
          "new_api": "pfree",
          "old_text": null,
          "new_text": "pfree(scores)",
          "old_line_content": "\t\t\treturn pathkeys;",
          "new_line_content": "\t\t\tpfree(scores);",
          "content_same": false
        },
        {
          "line": 1063,
          "old_api": null,
          "new_api": "lfirst",
          "old_text": null,
          "new_text": "lfirst(lc)",
          "old_line_content": "\t\t/* Ignore placeholders */",
          "new_line_content": "\t\tVar\t\t   *var = (Var *) lfirst(lc);",
          "content_same": false
        },
        {
          "line": 555,
          "old_api": null,
          "new_api": "lfirst",
          "old_text": null,
          "new_text": "lfirst(lc)",
          "old_line_content": "\t\tbool\t\treverse_sort;",
          "new_line_content": "\t\tTargetEntry *indextle = (TargetEntry *) lfirst(lc);",
          "content_same": false
        },
        {
          "line": 1068,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(var->varno == rel->relid)",
          "old_line_content": "\t\t/* If we find a Var referencing this TLE, we're good */",
          "new_line_content": "\t\tAssert(var->varno == rel->relid);",
          "content_same": false
        },
        {
          "line": 1072,
          "old_api": null,
          "new_api": "copyObject",
          "old_text": null,
          "new_text": "copyObject(var)",
          "old_line_content": "\treturn NULL;",
          "new_line_content": "\t\t\treturn copyObject(var); /* Make a copy for safety */",
          "content_same": false
        },
        {
          "line": 1588,
          "old_api": null,
          "new_api": "linitial_oid",
          "old_text": null,
          "new_text": "linitial_oid(ec->ec_opfamilies)",
          "old_line_content": "\t\t\t\t\t\t\t\t\t\t false);",
          "new_line_content": "\t\t\t\t\t\t\t\t\t\t linitial_oid(ec->ec_opfamilies),",
          "content_same": false
        },
        {
          "line": 1592,
          "old_api": null,
          "new_api": "pathkey_is_redundant",
          "old_text": null,
          "new_text": "pathkey_is_redundant(pathkey, pathkeys)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tAssert(!pathkey_is_redundant(pathkey, pathkeys));",
          "content_same": false
        },
        {
          "line": 1593,
          "old_api": null,
          "new_api": "lappend",
          "old_text": null,
          "new_text": "lappend(pathkeys, pathkey)",
          "old_line_content": "",
          "new_line_content": "\t\tpathkeys = lappend(pathkeys, pathkey);",
          "content_same": false
        },
        {
          "line": 571,
          "old_api": null,
          "new_api": "ScanDirectionIsBackward",
          "old_text": null,
          "new_text": "ScanDirectionIsBackward(scandir)",
          "old_line_content": "\t\t\treverse_sort = !index->reverse_sort[i];",
          "new_line_content": "\t\tif (ScanDirectionIsBackward(scandir))",
          "content_same": false
        },
        {
          "line": 1596,
          "old_api": null,
          "new_api": "pfree",
          "old_text": null,
          "new_text": "pfree(ecs)",
          "old_line_content": "",
          "new_line_content": "\tpfree(ecs);",
          "content_same": false
        },
        {
          "line": 1597,
          "old_api": null,
          "new_api": "pfree",
          "old_text": null,
          "new_text": "pfree(scores)",
          "old_line_content": "\treturn pathkeys;",
          "new_line_content": "\tpfree(scores);",
          "content_same": false
        },
        {
          "line": 585,
          "old_api": null,
          "new_api": "make_pathkey_from_sortinfo",
          "old_text": null,
          "new_text": "make_pathkey_from_sortinfo(root,\n\t\t\t\t\t\t\t\t\t\t\t  indexkey,\n\t\t\t\t\t\t\t\t\t\t\t  index->sortopfamily[i],\n\t\t\t\t\t\t\t\t\t\t\t  index->opcintype[i],\n\t\t\t\t\t\t\t\t\t\t\t  index->indexcollations[i],\n\t\t\t\t\t\t\t\t\t\t\t  reverse_sort,\n\t\t\t\t\t\t\t\t\t\t\t  nulls_first,\n\t\t\t\t\t\t\t\t\t\t\t  0,\n\t\t\t\t\t\t\t\t\t\t\t  index->rel->relids,\n\t\t\t\t\t\t\t\t\t\t\t  false)",
          "old_line_content": "\t\t\t\t\t\t\t\t\t\t\t  index->sortopfamily[i],",
          "new_line_content": "\t\tcpathkey = make_pathkey_from_sortinfo(root,",
          "content_same": false
        },
        {
          "line": 1114,
          "old_api": null,
          "new_api": "truncate_useless_pathkeys",
          "old_text": null,
          "new_text": "truncate_useless_pathkeys(root, joinrel, outer_pathkeys)",
          "old_line_content": "",
          "new_line_content": "\treturn truncate_useless_pathkeys(root, joinrel, outer_pathkeys);",
          "content_same": false
        },
        {
          "line": 603,
          "old_api": null,
          "new_api": "lappend",
          "old_text": null,
          "new_text": "lappend(retval, cpathkey)",
          "old_line_content": "\t\telse",
          "new_line_content": "\t\t\t\tretval = lappend(retval, cpathkey);",
          "content_same": false
        },
        {
          "line": 602,
          "old_api": null,
          "new_api": "pathkey_is_redundant",
          "old_text": null,
          "new_text": "pathkey_is_redundant(cpathkey, retval)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tif (!pathkey_is_redundant(cpathkey, retval))",
          "content_same": false
        },
        {
          "line": 1636,
          "old_api": null,
          "new_api": "list_head",
          "old_text": null,
          "new_text": "list_head(outer_pathkeys)",
          "old_line_content": "\tforeach(lc, mergeclauses)",
          "new_line_content": "\tlop = list_head(outer_pathkeys);",
          "content_same": false
        },
        {
          "line": 1640,
          "old_api": null,
          "new_api": "lfirst",
          "old_text": null,
          "new_text": "lfirst(lc)",
          "old_line_content": "\t\tEquivalenceClass *ieclass;",
          "new_line_content": "\t\tRestrictInfo *rinfo = (RestrictInfo *) lfirst(lc);",
          "content_same": false
        },
        {
          "line": 617,
          "old_api": null,
          "new_api": "indexcol_is_bool_constant_for_query",
          "old_text": null,
          "new_text": "indexcol_is_bool_constant_for_query(root, index, i)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tif (!indexcol_is_bool_constant_for_query(root, index, i))",
          "content_same": false
        },
        {
          "line": 1645,
          "old_api": null,
          "new_api": "update_mergeclause_eclasses",
          "old_text": null,
          "new_text": "update_mergeclause_eclasses(root, rinfo)",
          "old_line_content": "\t\tif (rinfo->outer_is_left)",
          "new_line_content": "\t\tupdate_mergeclause_eclasses(root, rinfo);",
          "content_same": false
        },
        {
          "line": 1140,
          "old_api": null,
          "new_api": "make_pathkeys_for_sortclauses_extended",
          "old_text": null,
          "new_text": "make_pathkeys_for_sortclauses_extended(root,\n\t\t\t\t\t\t\t\t\t\t\t\t\t&sortclauses,\n\t\t\t\t\t\t\t\t\t\t\t\t\ttlist,\n\t\t\t\t\t\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\t\t\t\t\t\t&sortable)",
          "old_line_content": "\t\t\t\t\t\t\t\t\t\t\t\t\ttlist,",
          "new_line_content": "\tresult = make_pathkeys_for_sortclauses_extended(root,",
          "content_same": false
        },
        {
          "line": 1146,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(sortable)",
          "old_line_content": "}",
          "new_line_content": "\tAssert(sortable);",
          "content_same": false
        },
        {
          "line": 1664,
          "old_api": null,
          "new_api": "lfirst",
          "old_text": null,
          "new_text": "lfirst(lop)",
          "old_line_content": "\t\t\tlastoeclass = opathkey->pk_eclass;",
          "new_line_content": "\t\t\topathkey = (PathKey *) lfirst(lop);",
          "content_same": false
        },
        {
          "line": 1665,
          "old_api": null,
          "new_api": "lnext",
          "old_text": null,
          "new_text": "lnext(outer_pathkeys, lop)",
          "old_line_content": "\t\t\tif (oeclass != lastoeclass)",
          "new_line_content": "\t\t\tlop = lnext(outer_pathkeys, lop);",
          "content_same": false
        },
        {
          "line": 1668,
          "old_api": null,
          "new_api": "elog",
          "old_text": null,
          "new_text": "elog(ERROR, \"outer pathkeys do not match mergeclause\")",
          "old_line_content": "",
          "new_line_content": "\t\t\t\telog(ERROR, \"outer pathkeys do not match mergeclause\");",
          "content_same": false
        },
        {
          "line": 1679,
          "old_api": null,
          "new_api": "make_canonical_pathkey",
          "old_text": null,
          "new_text": "make_canonical_pathkey(root,\n\t\t\t\t\t\t\t\t\t\t\t ieclass,\n\t\t\t\t\t\t\t\t\t\t\t opathkey->pk_opfamily,\n\t\t\t\t\t\t\t\t\t\t\t opathkey->pk_strategy,\n\t\t\t\t\t\t\t\t\t\t\t opathkey->pk_nulls_first)",
          "old_line_content": "\t\t\t\t\t\t\t\t\t\t\t opathkey->pk_opfamily,",
          "new_line_content": "\t\t\tpathkey = make_canonical_pathkey(root,",
          "content_same": false
        },
        {
          "line": 656,
          "old_api": null,
          "new_api": "IsBuiltinBooleanOpfamily",
          "old_text": null,
          "new_text": "IsBuiltinBooleanOpfamily(partscheme->partopfamily[partkeycol])",
          "old_line_content": "",
          "new_line_content": "\tif (!IsBuiltinBooleanOpfamily(partscheme->partopfamily[partkeycol]))",
          "content_same": false
        },
        {
          "line": 662,
          "old_api": null,
          "new_api": "lfirst",
          "old_text": null,
          "new_text": "lfirst(lc)",
          "old_line_content": "\t\t/* Ignore pseudoconstant quals, they won't match */",
          "new_line_content": "\t\tRestrictInfo *rinfo = (RestrictInfo *) lfirst(lc);",
          "content_same": false
        },
        {
          "line": 669,
          "old_api": null,
          "new_api": "matches_boolean_partition_clause",
          "old_text": null,
          "new_text": "matches_boolean_partition_clause(rinfo, partrel, partkeycol)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tif (matches_boolean_partition_clause(rinfo, partrel, partkeycol))",
          "content_same": false
        },
        {
          "line": 1182,
          "old_api": null,
          "new_api": "lfirst",
          "old_text": null,
          "new_text": "lfirst(l)",
          "old_line_content": "\t\tPathKey    *pathkey;",
          "new_line_content": "\t\tSortGroupClause *sortcl = (SortGroupClause *) lfirst(l);",
          "content_same": false
        },
        {
          "line": 1694,
          "old_api": null,
          "new_api": "pathkey_is_redundant",
          "old_text": null,
          "new_text": "pathkey_is_redundant(pathkey, pathkeys)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tif (!pathkey_is_redundant(pathkey, pathkeys))",
          "content_same": false
        },
        {
          "line": 1695,
          "old_api": null,
          "new_api": "lappend",
          "old_text": null,
          "new_text": "lappend(pathkeys, pathkey)",
          "old_line_content": "",
          "new_line_content": "\t\t\tpathkeys = lappend(pathkeys, pathkey);",
          "content_same": false
        },
        {
          "line": 1186,
          "old_api": null,
          "new_api": "get_sortgroupclause_expr",
          "old_text": null,
          "new_text": "get_sortgroupclause_expr(sortcl, tlist)",
          "old_line_content": "\t\t{",
          "new_line_content": "\t\tsortkey = (Expr *) get_sortgroupclause_expr(sortcl, tlist);",
          "content_same": false
        },
        {
          "line": 1187,
          "old_api": null,
          "new_api": "OidIsValid",
          "old_text": null,
          "new_text": "OidIsValid(sortcl->sortop)",
          "old_line_content": "\t\t\t*sortable = false;",
          "new_line_content": "\t\tif (!OidIsValid(sortcl->sortop))",
          "content_same": false
        },
        {
          "line": 1192,
          "old_api": null,
          "new_api": "make_pathkey_from_sortop",
          "old_text": null,
          "new_text": "make_pathkey_from_sortop(root,\n\t\t\t\t\t\t\t\t\t\t   sortkey,\n\t\t\t\t\t\t\t\t\t\t   sortcl->sortop,\n\t\t\t\t\t\t\t\t\t\t   sortcl->nulls_first,\n\t\t\t\t\t\t\t\t\t\t   sortcl->tleSortGroupRef,\n\t\t\t\t\t\t\t\t\t\t   true)",
          "old_line_content": "\t\t\t\t\t\t\t\t\t\t   sortcl->sortop,",
          "new_line_content": "\t\tpathkey = make_pathkey_from_sortop(root,",
          "content_same": false
        },
        {
          "line": 1200,
          "old_api": null,
          "new_api": "pathkey_is_redundant",
          "old_text": null,
          "new_text": "pathkey_is_redundant(pathkey, pathkeys)",
          "old_line_content": "\t\telse if (remove_redundant)",
          "new_line_content": "\t\tif (!pathkey_is_redundant(pathkey, pathkeys))",
          "content_same": false
        },
        {
          "line": 689,
          "old_api": null,
          "new_api": "linitial",
          "old_text": null,
          "new_text": "linitial(partrel->partexprs[partkeycol])",
          "old_line_content": "\t/* Direct match? */",
          "new_line_content": "\tNode\t   *partexpr = (Node *) linitial(partrel->partexprs[partkeycol]);",
          "content_same": false
        },
        {
          "line": 1203,
          "old_api": null,
          "new_api": "foreach_delete_current",
          "old_text": null,
          "new_text": "foreach_delete_current(*sortclauses, l)",
          "old_line_content": "\treturn pathkeys;",
          "new_line_content": "\t\t\t*sortclauses = foreach_delete_current(*sortclauses, l);",
          "content_same": false
        },
        {
          "line": 692,
          "old_api": null,
          "new_api": "equal",
          "old_text": null,
          "new_text": "equal(partexpr, clause)",
          "old_line_content": "\t/* NOT clause? */",
          "new_line_content": "\tif (equal(partexpr, clause))",
          "content_same": false
        },
        {
          "line": 699,
          "old_api": null,
          "new_api": "equal",
          "old_text": null,
          "new_text": "equal(partexpr, arg)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tif (equal(partexpr, arg))",
          "content_same": false
        },
        {
          "line": 1742,
          "old_api": null,
          "new_api": "list_head",
          "old_text": null,
          "new_text": "list_head(pathkeys)",
          "old_line_content": "\tpathkey_ec = pathkey->pk_eclass;",
          "new_line_content": "\tlip = list_head(pathkeys);",
          "content_same": false
        },
        {
          "line": 1745,
          "old_api": null,
          "new_api": "lnext",
          "old_text": null,
          "new_text": "lnext(pathkeys, lip)",
          "old_line_content": "",
          "new_line_content": "\tlip = lnext(pathkeys, lip);",
          "content_same": false
        },
        {
          "line": 1751,
          "old_api": null,
          "new_api": "lfirst",
          "old_text": null,
          "new_text": "lfirst(i)",
          "old_line_content": "",
          "new_line_content": "\t\tRestrictInfo *rinfo = (RestrictInfo *) lfirst(i);",
          "content_same": false
        },
        {
          "line": 727,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(partscheme != NULL)",
          "old_line_content": "\t/* For now, we can only cope with baserels */",
          "new_line_content": "\tAssert(partscheme != NULL);",
          "content_same": false
        },
        {
          "line": 1241,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(restrictinfo->left_ec == NULL)",
          "old_line_content": "",
          "new_line_content": "\tAssert(restrictinfo->left_ec == NULL);",
          "content_same": false
        },
        {
          "line": 730,
          "old_api": null,
          "new_api": "IS_SIMPLE_REL",
          "old_text": null,
          "new_text": "IS_SIMPLE_REL(partrel)",
          "old_line_content": "\tfor (i = 0; i < partscheme->partnatts; i++)",
          "new_line_content": "\tAssert(IS_SIMPLE_REL(partrel));",
          "content_same": false
        },
        {
          "line": 1242,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(restrictinfo->right_ec == NULL)",
          "old_line_content": "\t/* Need the declared input types of the operator */",
          "new_line_content": "\tAssert(restrictinfo->right_ec == NULL);",
          "content_same": false
        },
        {
          "line": 1245,
          "old_api": null,
          "new_api": "op_input_types",
          "old_text": null,
          "new_text": "op_input_types(((OpExpr *) clause)->opno, &lefttype, &righttype)",
          "old_line_content": "\t/* Find or create a matching EquivalenceClass for each side */",
          "new_line_content": "\top_input_types(((OpExpr *) clause)->opno, &lefttype, &righttype);",
          "content_same": false
        },
        {
          "line": 735,
          "old_api": null,
          "new_api": "linitial",
          "old_text": null,
          "new_text": "linitial(partrel->partexprs[i])",
          "old_line_content": "\t\t/*",
          "new_line_content": "\t\tExpr\t   *keyCol = (Expr *) linitial(partrel->partexprs[i]);",
          "content_same": false
        },
        {
          "line": 1249,
          "old_api": null,
          "new_api": "get_eclass_for_sort_expr",
          "old_text": null,
          "new_text": "get_eclass_for_sort_expr(root,\n\t\t\t\t\t\t\t\t (Expr *) get_leftop(clause),\n\t\t\t\t\t\t\t\t restrictinfo->mergeopfamilies,\n\t\t\t\t\t\t\t\t lefttype,\n\t\t\t\t\t\t\t\t ((OpExpr *) clause)->inputcollid,\n\t\t\t\t\t\t\t\t 0,\n\t\t\t\t\t\t\t\t NULL,\n\t\t\t\t\t\t\t\t true)",
          "old_line_content": "\t\t\t\t\t\t\t\t restrictinfo->mergeopfamilies,",
          "new_line_content": "\t\tget_eclass_for_sort_expr(root,",
          "content_same": false
        },
        {
          "line": 1250,
          "old_api": null,
          "new_api": "get_leftop",
          "old_text": null,
          "new_text": "get_leftop(clause)",
          "old_line_content": "\t\t\t\t\t\t\t\t lefttype,",
          "new_line_content": "\t\t\t\t\t\t\t\t (Expr *) get_leftop(clause),",
          "content_same": false
        },
        {
          "line": 744,
          "old_api": null,
          "new_api": "make_pathkey_from_sortinfo",
          "old_text": null,
          "new_text": "make_pathkey_from_sortinfo(root,\n\t\t\t\t\t\t\t\t\t\t\t  keyCol,\n\t\t\t\t\t\t\t\t\t\t\t  partscheme->partopfamily[i],\n\t\t\t\t\t\t\t\t\t\t\t  partscheme->partopcintype[i],\n\t\t\t\t\t\t\t\t\t\t\t  partscheme->partcollation[i],\n\t\t\t\t\t\t\t\t\t\t\t  ScanDirectionIsBackward(scandir),\n\t\t\t\t\t\t\t\t\t\t\t  ScanDirectionIsBackward(scandir),\n\t\t\t\t\t\t\t\t\t\t\t  0,\n\t\t\t\t\t\t\t\t\t\t\t  partrel->relids,\n\t\t\t\t\t\t\t\t\t\t\t  false)",
          "old_line_content": "\t\t\t\t\t\t\t\t\t\t\t  partscheme->partopfamily[i],",
          "new_line_content": "\t\tcpathkey = make_pathkey_from_sortinfo(root,",
          "content_same": false
        },
        {
          "line": 1258,
          "old_api": null,
          "new_api": "get_eclass_for_sort_expr",
          "old_text": null,
          "new_text": "get_eclass_for_sort_expr(root,\n\t\t\t\t\t\t\t\t (Expr *) get_rightop(clause),\n\t\t\t\t\t\t\t\t restrictinfo->mergeopfamilies,\n\t\t\t\t\t\t\t\t righttype,\n\t\t\t\t\t\t\t\t ((OpExpr *) clause)->inputcollid,\n\t\t\t\t\t\t\t\t 0,\n\t\t\t\t\t\t\t\t NULL,\n\t\t\t\t\t\t\t\t true)",
          "old_line_content": "\t\t\t\t\t\t\t\t restrictinfo->mergeopfamilies,",
          "new_line_content": "\t\tget_eclass_for_sort_expr(root,",
          "content_same": false
        },
        {
          "line": 1259,
          "old_api": null,
          "new_api": "get_rightop",
          "old_text": null,
          "new_text": "get_rightop(clause)",
          "old_line_content": "\t\t\t\t\t\t\t\t righttype,",
          "new_line_content": "\t\t\t\t\t\t\t\t (Expr *) get_rightop(clause),",
          "content_same": false
        },
        {
          "line": 1772,
          "old_api": null,
          "new_api": "lnext",
          "old_text": null,
          "new_text": "lnext(pathkeys, lip)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tlip = lnext(pathkeys, lip);",
          "content_same": false
        },
        {
          "line": 749,
          "old_api": null,
          "new_api": "ScanDirectionIsBackward",
          "old_text": null,
          "new_text": "ScanDirectionIsBackward(scandir)",
          "old_line_content": "\t\t\t\t\t\t\t\t\t\t\t  0,",
          "new_line_content": "\t\t\t\t\t\t\t\t\t\t\t  ScanDirectionIsBackward(scandir),",
          "content_same": false
        },
        {
          "line": 750,
          "old_api": null,
          "new_api": "ScanDirectionIsBackward",
          "old_text": null,
          "new_text": "ScanDirectionIsBackward(scandir)",
          "old_line_content": "\t\t\t\t\t\t\t\t\t\t\t  partrel->relids,",
          "new_line_content": "\t\t\t\t\t\t\t\t\t\t\t  ScanDirectionIsBackward(scandir),",
          "content_same": false
        },
        {
          "line": 1779,
          "old_api": null,
          "new_api": "lappend",
          "old_text": null,
          "new_text": "lappend(new_mergeclauses, rinfo)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tnew_mergeclauses = lappend(new_mergeclauses, rinfo);",
          "content_same": false
        },
        {
          "line": 762,
          "old_api": null,
          "new_api": "pathkey_is_redundant",
          "old_text": null,
          "new_text": "pathkey_is_redundant(cpathkey, retval)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tif (!pathkey_is_redundant(cpathkey, retval))",
          "content_same": false
        },
        {
          "line": 763,
          "old_api": null,
          "new_api": "lappend",
          "old_text": null,
          "new_text": "lappend(retval, cpathkey)",
          "old_line_content": "\t\telse",
          "new_line_content": "\t\t\t\tretval = lappend(retval, cpathkey);",
          "content_same": false
        },
        {
          "line": 1284,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(restrictinfo->left_ec != NULL)",
          "old_line_content": "",
          "new_line_content": "\tAssert(restrictinfo->left_ec != NULL);",
          "content_same": false
        },
        {
          "line": 1285,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(restrictinfo->right_ec != NULL)",
          "old_line_content": "\t/* Chase up to the top as needed */",
          "new_line_content": "\tAssert(restrictinfo->right_ec != NULL);",
          "content_same": false
        },
        {
          "line": 777,
          "old_api": null,
          "new_api": "partkey_is_bool_constant_for_query",
          "old_text": null,
          "new_text": "partkey_is_bool_constant_for_query(partrel, i)",
          "old_line_content": "\t\t\t\t*partialkeys = true;",
          "new_line_content": "\t\t\tif (!partkey_is_bool_constant_for_query(partrel, i))",
          "content_same": false
        },
        {
          "line": 1829,
          "old_api": null,
          "new_api": "lfirst",
          "old_text": null,
          "new_text": "lfirst(i)",
          "old_line_content": "\t\tListCell   *j;",
          "new_line_content": "\t\tPathKey    *pathkey = (PathKey *) lfirst(i);",
          "content_same": false
        },
        {
          "line": 1834,
          "old_api": null,
          "new_api": "right_merge_direction",
          "old_text": null,
          "new_text": "right_merge_direction(root, pathkey)",
          "old_line_content": "",
          "new_line_content": "\t\tif (!right_merge_direction(root, pathkey))",
          "content_same": false
        },
        {
          "line": 1325,
          "old_api": null,
          "new_api": "update_mergeclause_eclasses",
          "old_text": null,
          "new_text": "update_mergeclause_eclasses(root, rinfo)",
          "old_line_content": "",
          "new_line_content": "\t\tupdate_mergeclause_eclasses(root, rinfo);",
          "content_same": false
        },
        {
          "line": 816,
          "old_api": null,
          "new_api": "elog",
          "old_text": null,
          "new_text": "elog(ERROR, \"operator %u is not a valid ordering operator\",\n\t\t\t opno)",
          "old_line_content": "",
          "new_line_content": "\t\telog(ERROR, \"operator %u is not a valid ordering operator\",",
          "content_same": false
        },
        {
          "line": 1330,
          "old_api": null,
          "new_api": "lfirst",
          "old_text": null,
          "new_text": "lfirst(i)",
          "old_line_content": "\t\tList\t   *matched_restrictinfos = NIL;",
          "new_line_content": "\t\tPathKey    *pathkey = (PathKey *) lfirst(i);",
          "content_same": false
        },
        {
          "line": 819,
          "old_api": null,
          "new_api": "make_pathkey_from_sortinfo",
          "old_text": null,
          "new_text": "make_pathkey_from_sortinfo(root,\n\t\t\t\t\t\t\t\t\t\t  expr,\n\t\t\t\t\t\t\t\t\t\t  opfamily,\n\t\t\t\t\t\t\t\t\t\t  opcintype,\n\t\t\t\t\t\t\t\t\t\t  exprCollation((Node *) expr),\n\t\t\t\t\t\t\t\t\t\t  (strategy == BTGreaterStrategyNumber),\n\t\t\t\t\t\t\t\t\t\t  (strategy == BTGreaterStrategyNumber),\n\t\t\t\t\t\t\t\t\t\t  0,\n\t\t\t\t\t\t\t\t\t\t  rel,\n\t\t\t\t\t\t\t\t\t\t  create_it)",
          "old_line_content": "\t\t\t\t\t\t\t\t\t\t  opfamily,",
          "new_line_content": "\tcpathkey = make_pathkey_from_sortinfo(root,",
          "content_same": false
        },
        {
          "line": 1843,
          "old_api": null,
          "new_api": "eclass_useful_for_merging",
          "old_text": null,
          "new_text": "eclass_useful_for_merging(root, pathkey->pk_eclass, rel)",
          "old_line_content": "\t\telse",
          "new_line_content": "\t\t\teclass_useful_for_merging(root, pathkey->pk_eclass, rel))",
          "content_same": false
        },
        {
          "line": 823,
          "old_api": null,
          "new_api": "exprCollation",
          "old_text": null,
          "new_text": "exprCollation((Node *) expr)",
          "old_line_content": "\t\t\t\t\t\t\t\t\t\t  (strategy == BTGreaterStrategyNumber),",
          "new_line_content": "\t\t\t\t\t\t\t\t\t\t  exprCollation((Node *) expr),",
          "content_same": false
        },
        {
          "line": 1854,
          "old_api": null,
          "new_api": "lfirst",
          "old_text": null,
          "new_text": "lfirst(j)",
          "old_line_content": "\t\t\t\tif (restrictinfo->mergeopfamilies == NIL)",
          "new_line_content": "\t\t\t\tRestrictInfo *restrictinfo = (RestrictInfo *) lfirst(j);",
          "content_same": false
        },
        {
          "line": 831,
          "old_api": null,
          "new_api": "list_make1",
          "old_text": null,
          "new_text": "list_make1(cpathkey)",
          "old_line_content": "\t\tpathkeys = NIL;",
          "new_line_content": "\t\tpathkeys = list_make1(cpathkey);",
          "content_same": false
        },
        {
          "line": 1858,
          "old_api": null,
          "new_api": "update_mergeclause_eclasses",
          "old_text": null,
          "new_text": "update_mergeclause_eclasses(root, restrictinfo)",
          "old_line_content": "\t\t\t\tif (pathkey->pk_eclass == restrictinfo->left_ec ||",
          "new_line_content": "\t\t\t\tupdate_mergeclause_eclasses(root, restrictinfo);",
          "content_same": false
        },
        {
          "line": 861,
          "old_api": null,
          "new_api": "list_length",
          "old_text": null,
          "new_text": "list_length(root->query_pathkeys)",
          "old_line_content": "",
          "new_line_content": "\tint\t\t\touter_query_keys = list_length(root->query_pathkeys);",
          "content_same": false
        },
        {
          "line": 1374,
          "old_api": null,
          "new_api": "lfirst",
          "old_text": null,
          "new_text": "lfirst(j)",
          "old_line_content": "",
          "new_line_content": "\t\t\tRestrictInfo *rinfo = (RestrictInfo *) lfirst(j);",
          "content_same": false
        },
        {
          "line": 866,
          "old_api": null,
          "new_api": "lfirst",
          "old_text": null,
          "new_text": "lfirst(i)",
          "old_line_content": "\t\tPathKey    *best_pathkey = NULL;",
          "new_line_content": "\t\tPathKey    *sub_pathkey = (PathKey *) lfirst(i);",
          "content_same": false
        },
        {
          "line": 1380,
          "old_api": null,
          "new_api": "lappend",
          "old_text": null,
          "new_text": "lappend(matched_restrictinfos, rinfo)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\tmatched_restrictinfos = lappend(matched_restrictinfos, rinfo);",
          "content_same": false
        },
        {
          "line": 1895,
          "old_api": null,
          "new_api": "lfirst",
          "old_text": null,
          "new_text": "lfirst(l)",
          "old_line_content": "\t\tif (pathkey->pk_eclass == query_pathkey->pk_eclass &&",
          "new_line_content": "\t\tPathKey    *query_pathkey = (PathKey *) lfirst(l);",
          "content_same": false
        },
        {
          "line": 882,
          "old_api": null,
          "new_api": "get_sortgroupref_tle",
          "old_text": null,
          "new_text": "get_sortgroupref_tle(sub_eclass->ec_sortref, subquery_tlist)",
          "old_line_content": "\t\t\t/* Is TLE actually available to the outer query? */",
          "new_line_content": "\t\t\ttle = get_sortgroupref_tle(sub_eclass->ec_sortref, subquery_tlist);",
          "content_same": false
        },
        {
          "line": 1395,
          "old_api": null,
          "new_api": "list_concat",
          "old_text": null,
          "new_text": "list_concat(mergeclauses, matched_restrictinfos)",
          "old_line_content": "",
          "new_line_content": "\t\tmergeclauses = list_concat(mergeclauses, matched_restrictinfos);",
          "content_same": false
        },
        {
          "line": 885,
          "old_api": null,
          "new_api": "find_var_for_subquery_tle",
          "old_text": null,
          "new_text": "find_var_for_subquery_tle(rel, tle)",
          "old_line_content": "\t\t\t{",
          "new_line_content": "\t\t\touter_var = find_var_for_subquery_tle(rel, tle);",
          "content_same": false
        },
        {
          "line": 892,
          "old_api": null,
          "new_api": "list_length",
          "old_text": null,
          "new_text": "list_length(sub_eclass->ec_members)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\tAssert(list_length(sub_eclass->ec_members) == 1);",
          "content_same": false
        },
        {
          "line": 893,
          "old_api": null,
          "new_api": "linitial",
          "old_text": null,
          "new_text": "linitial(sub_eclass->ec_members)",
          "old_line_content": "\t\t\t\t/*",
          "new_line_content": "\t\t\t\tsub_member = (EquivalenceMember *) linitial(sub_eclass->ec_members);",
          "content_same": false
        },
        {
          "line": 904,
          "old_api": null,
          "new_api": "get_eclass_for_sort_expr",
          "old_text": null,
          "new_text": "get_eclass_for_sort_expr(root,\n\t\t\t\t\t\t\t\t\t\t\t (Expr *) outer_var,\n\t\t\t\t\t\t\t\t\t\t\t sub_eclass->ec_opfamilies,\n\t\t\t\t\t\t\t\t\t\t\t sub_member->em_datatype,\n\t\t\t\t\t\t\t\t\t\t\t sub_eclass->ec_collation,\n\t\t\t\t\t\t\t\t\t\t\t 0,\n\t\t\t\t\t\t\t\t\t\t\t rel->relids,\n\t\t\t\t\t\t\t\t\t\t\t false)",
          "old_line_content": "\t\t\t\t\t\t\t\t\t\t\t sub_eclass->ec_opfamilies,",
          "new_line_content": "\t\t\t\t\tget_eclass_for_sort_expr(root,",
          "content_same": false
        },
        {
          "line": 1936,
          "old_api": null,
          "new_api": "pathkeys_count_contained_in",
          "old_text": null,
          "new_text": "pathkeys_count_contained_in(root->query_pathkeys, pathkeys,\n\t\t\t\t\t\t\t\t\t   &n_common_pathkeys)",
          "old_line_content": "",
          "new_line_content": "\t(void) pathkeys_count_contained_in(root->query_pathkeys, pathkeys,",
          "content_same": false
        },
        {
          "line": 919,
          "old_api": null,
          "new_api": "make_canonical_pathkey",
          "old_text": null,
          "new_text": "make_canonical_pathkey(root,\n\t\t\t\t\t\t\t\t\t\t\t   outer_ec,\n\t\t\t\t\t\t\t\t\t\t\t   sub_pathkey->pk_opfamily,\n\t\t\t\t\t\t\t\t\t\t\t   sub_pathkey->pk_strategy,\n\t\t\t\t\t\t\t\t\t\t\t   sub_pathkey->pk_nulls_first)",
          "old_line_content": "\t\t\t\t\t\t\t\t\t\t\t   sub_pathkey->pk_opfamily,",
          "new_line_content": "\t\t\t\t\t\tmake_canonical_pathkey(root,",
          "content_same": false
        },
        {
          "line": 1433,
          "old_api": null,
          "new_api": "list_length",
          "old_text": null,
          "new_text": "list_length(mergeclauses)",
          "old_line_content": "\tint\t\t   *scores;",
          "new_line_content": "\tint\t\t\tnClauses = list_length(mergeclauses);",
          "content_same": false
        },
        {
          "line": 1954,
          "old_api": null,
          "new_api": "pathkeys_useful_for_merging",
          "old_text": null,
          "new_text": "pathkeys_useful_for_merging(root, rel, pathkeys)",
          "old_line_content": "\tif (nuseful2 > nuseful)",
          "new_line_content": "\tnuseful = pathkeys_useful_for_merging(root, rel, pathkeys);",
          "content_same": false
        },
        {
          "line": 1955,
          "old_api": null,
          "new_api": "pathkeys_useful_for_ordering",
          "old_text": null,
          "new_text": "pathkeys_useful_for_ordering(root, pathkeys)",
          "old_line_content": "\t\tnuseful = nuseful2;",
          "new_line_content": "\tnuseful2 = pathkeys_useful_for_ordering(root, pathkeys);",
          "content_same": false
        },
        {
          "line": 1448,
          "old_api": null,
          "new_api": "palloc",
          "old_text": null,
          "new_text": "palloc(nClauses * sizeof(EquivalenceClass *))",
          "old_line_content": "\tnecs = 0;",
          "new_line_content": "\tecs = (EquivalenceClass **) palloc(nClauses * sizeof(EquivalenceClass *));",
          "content_same": false
        },
        {
          "line": 1449,
          "old_api": null,
          "new_api": "palloc",
          "old_text": null,
          "new_text": "palloc(nClauses * sizeof(int))",
          "old_line_content": "",
          "new_line_content": "\tscores = (int *) palloc(nClauses * sizeof(int));",
          "content_same": false
        },
        {
          "line": 1965,
          "old_api": null,
          "new_api": "list_length",
          "old_text": null,
          "new_text": "list_length(pathkeys)",
          "old_line_content": "\telse",
          "new_line_content": "\telse if (nuseful == list_length(pathkeys))",
          "content_same": false
        },
        {
          "line": 1454,
          "old_api": null,
          "new_api": "lfirst",
          "old_text": null,
          "new_text": "lfirst(lc)",
          "old_line_content": "\t\tint\t\t\tscore;",
          "new_line_content": "\t\tRestrictInfo *rinfo = (RestrictInfo *) lfirst(lc);",
          "content_same": false
        },
        {
          "line": 431,
          "old_api": null,
          "new_api": "lfirst",
          "old_text": null,
          "new_text": "lfirst(l)",
          "old_line_content": "",
          "new_line_content": "\t\tPath\t   *path = (Path *) lfirst(l);",
          "content_same": false
        },
        {
          "line": 1968,
          "old_api": null,
          "new_api": "list_copy_head",
          "old_text": null,
          "new_text": "list_copy_head(pathkeys, nuseful)",
          "old_line_content": "",
          "new_line_content": "\t\treturn list_copy_head(pathkeys, nuseful);",
          "content_same": false
        },
        {
          "line": 1460,
          "old_api": null,
          "new_api": "update_mergeclause_eclasses",
          "old_text": null,
          "new_text": "update_mergeclause_eclasses(root, rinfo)",
          "old_line_content": "\t\tif (rinfo->outer_is_left)",
          "new_line_content": "\t\tupdate_mergeclause_eclasses(root, rinfo);",
          "content_same": false
        },
        {
          "line": 949,
          "old_api": null,
          "new_api": "lfirst",
          "old_text": null,
          "new_text": "lfirst(j)",
          "old_line_content": "\t\t\t\tOid\t\t\tsub_expr_type = sub_member->em_datatype;",
          "new_line_content": "\t\t\t\tEquivalenceMember *sub_member = (EquivalenceMember *) lfirst(j);",
          "content_same": false
        },
        {
          "line": 442,
          "old_api": null,
          "new_api": "compare_path_costs",
          "old_text": null,
          "new_text": "compare_path_costs(matched_path, path, cost_criterion)",
          "old_line_content": "",
          "new_line_content": "\t\t\tcompare_path_costs(matched_path, path, cost_criterion) <= 0)",
          "content_same": false
        },
        {
          "line": 445,
          "old_api": null,
          "new_api": "pathkeys_contained_in",
          "old_text": null,
          "new_text": "pathkeys_contained_in(pathkeys, path->pathkeys)",
          "old_line_content": "\t\t\tmatched_path = path;",
          "new_line_content": "\t\tif (pathkeys_contained_in(pathkeys, path->pathkeys) &&",
          "content_same": false
        },
        {
          "line": 446,
          "old_api": null,
          "new_api": "PATH_REQ_OUTER",
          "old_text": null,
          "new_text": "PATH_REQ_OUTER(path)",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\tbms_is_subset(PATH_REQ_OUTER(path), required_outer))",
          "content_same": false
        },
        {
          "line": 960,
          "old_api": null,
          "new_api": "lfirst",
          "old_text": null,
          "new_text": "lfirst(k)",
          "old_line_content": "\t\t\t\t\tExpr\t   *tle_expr;",
          "new_line_content": "\t\t\t\t\tTargetEntry *tle = (TargetEntry *) lfirst(k);",
          "content_same": false
        },
        {
          "line": 968,
          "old_api": null,
          "new_api": "find_var_for_subquery_tle",
          "old_text": null,
          "new_text": "find_var_for_subquery_tle(rel, tle)",
          "old_line_content": "\t\t\t\t\t\tcontinue;",
          "new_line_content": "\t\t\t\t\touter_var = find_var_for_subquery_tle(rel, tle);",
          "content_same": false
        },
        {
          "line": 1480,
          "old_api": null,
          "new_api": "lfirst",
          "old_text": null,
          "new_text": "lfirst(lc2)",
          "old_line_content": "\t\t\t/* Potential future join partner? */",
          "new_line_content": "\t\t\tEquivalenceMember *em = (EquivalenceMember *) lfirst(lc2);",
          "content_same": false
        },
        {
          "line": 1484,
          "old_api": null,
          "new_api": "bms_overlap",
          "old_text": null,
          "new_text": "bms_overlap(em->em_relids, joinrel->relids)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\t\t!bms_overlap(em->em_relids, joinrel->relids))",
          "content_same": false
        },
        {
          "line": 978,
          "old_api": null,
          "new_api": "canonicalize_ec_expression",
          "old_text": null,
          "new_text": "canonicalize_ec_expression(tle->expr,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  sub_expr_type,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  sub_expr_coll)",
          "old_line_content": "\t\t\t\t\t\t\t\t\t\t\t\t\t\t  sub_expr_coll);",
          "new_line_content": "\t\t\t\t\ttle_expr = canonicalize_ec_expression(tle->expr,",
          "content_same": false
        },
        {
          "line": 981,
          "old_api": null,
          "new_api": "equal",
          "old_text": null,
          "new_text": "equal(tle_expr, sub_expr)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t\tif (!equal(tle_expr, sub_expr))",
          "content_same": false
        },
        {
          "line": 985,
          "old_api": null,
          "new_api": "get_eclass_for_sort_expr",
          "old_text": null,
          "new_text": "get_eclass_for_sort_expr(root,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(Expr *) outer_var,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsub_eclass->ec_opfamilies,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsub_expr_type,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsub_expr_coll,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trel->relids,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfalse)",
          "old_line_content": "\t\t\t\t\t\t\t\t\t\t\t\t\t\tsub_eclass->ec_opfamilies,",
          "new_line_content": "\t\t\t\t\touter_ec = get_eclass_for_sort_expr(root,",
          "content_same": false
        },
        {
          "line": 477,
          "old_api": null,
          "new_api": "lfirst",
          "old_text": null,
          "new_text": "lfirst(l)",
          "old_line_content": "\t\t/*",
          "new_line_content": "\t\tPath\t   *path = (Path *) lfirst(l);",
          "content_same": false
        },
        {
          "line": 1507,
          "old_api": null,
          "new_api": "lfirst",
          "old_text": null,
          "new_text": "lfirst(lc)",
          "old_line_content": "",
          "new_line_content": "\t\t\tPathKey    *query_pathkey = (PathKey *) lfirst(lc);",
          "content_same": false
        },
        {
          "line": 484,
          "old_api": null,
          "new_api": "compare_fractional_path_costs",
          "old_text": null,
          "new_text": "compare_fractional_path_costs(matched_path, path, fraction)",
          "old_line_content": "",
          "new_line_content": "\t\t\tcompare_fractional_path_costs(matched_path, path, fraction) <= 0)",
          "content_same": false
        },
        {
          "line": 487,
          "old_api": null,
          "new_api": "pathkeys_contained_in",
          "old_text": null,
          "new_text": "pathkeys_contained_in(pathkeys, path->pathkeys)",
          "old_line_content": "\t\t\tmatched_path = path;",
          "new_line_content": "\t\tif (pathkeys_contained_in(pathkeys, path->pathkeys) &&",
          "content_same": false
        },
        {
          "line": 488,
          "old_api": null,
          "new_api": "PATH_REQ_OUTER",
          "old_text": null,
          "new_text": "PATH_REQ_OUTER(path)",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\tbms_is_subset(PATH_REQ_OUTER(path), required_outer))",
          "content_same": false
        },
        {
          "line": 1001,
          "old_api": null,
          "new_api": "make_canonical_pathkey",
          "old_text": null,
          "new_text": "make_canonical_pathkey(root,\n\t\t\t\t\t\t\t\t\t\t\t\t\t  outer_ec,\n\t\t\t\t\t\t\t\t\t\t\t\t\t  sub_pathkey->pk_opfamily,\n\t\t\t\t\t\t\t\t\t\t\t\t\t  sub_pathkey->pk_strategy,\n\t\t\t\t\t\t\t\t\t\t\t\t\t  sub_pathkey->pk_nulls_first)",
          "old_line_content": "\t\t\t\t\t\t\t\t\t\t\t\t\t  sub_pathkey->pk_opfamily,",
          "new_line_content": "\t\t\t\t\touter_pk = make_canonical_pathkey(root,",
          "content_same": false
        },
        {
          "line": 1007,
          "old_api": null,
          "new_api": "list_length",
          "old_text": null,
          "new_text": "list_length(outer_ec->ec_members)",
          "old_line_content": "\t\t\t\t\tif (retvallen < outer_query_keys &&",
          "new_line_content": "\t\t\t\t\tscore = list_length(outer_ec->ec_members) - 1;",
          "content_same": false
        },
        {
          "line": 1010,
          "old_api": null,
          "new_api": "list_nth",
          "old_text": null,
          "new_text": "list_nth(root->query_pathkeys, retvallen)",
          "old_line_content": "\t\t\t\t\tif (score > best_score)",
          "new_line_content": "\t\t\t\t\t\tlist_nth(root->query_pathkeys, retvallen) == outer_pk)",
          "content_same": false
        },
        {
          "line": 1528,
          "old_api": null,
          "new_api": "lfirst",
          "old_text": null,
          "new_text": "lfirst(lc)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\tPathKey    *query_pathkey = (PathKey *) lfirst(lc);",
          "content_same": false
        },
        {
          "line": 506,
          "old_api": null,
          "new_api": "lfirst",
          "old_text": null,
          "new_text": "lfirst(l)",
          "old_line_content": "\t\tif (innerpath->parallel_safe &&",
          "new_line_content": "\t\tPath\t   *innerpath = (Path *) lfirst(l);",
          "content_same": false
        },
        {
          "line": 509,
          "old_api": null,
          "new_api": "PATH_REQ_OUTER",
          "old_text": null,
          "new_text": "PATH_REQ_OUTER(innerpath)",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\tbms_is_empty(PATH_REQ_OUTER(innerpath)))",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 1030,
          "old_api": "pathkey_is_redundant",
          "new_api": null,
          "old_text": "pathkey_is_redundant(best_pathkey, retval)",
          "new_text": null,
          "old_line_content": "\t\tif (!pathkey_is_redundant(best_pathkey, retval))",
          "new_line_content": "\t\t * equivalences subquery keys...",
          "content_same": false
        },
        {
          "line": 1548,
          "old_api": "list_copy_head",
          "new_api": null,
          "old_text": "list_copy_head(root->query_pathkeys, matches)",
          "new_text": null,
          "old_line_content": "\t\t\tpathkeys = list_copy_head(root->query_pathkeys, matches);",
          "new_line_content": "\t\telse if (matches == nClauses)",
          "content_same": false
        },
        {
          "line": 1551,
          "old_api": "pfree",
          "new_api": null,
          "old_text": "pfree(ecs)",
          "new_text": null,
          "old_line_content": "\t\t\tpfree(ecs);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1552,
          "old_api": "pfree",
          "new_api": null,
          "old_text": "pfree(scores)",
          "new_text": null,
          "old_line_content": "\t\t\tpfree(scores);",
          "new_line_content": "\t\t\t/* we have all of the join pathkeys, so nothing more to do */",
          "content_same": false
        },
        {
          "line": 1059,
          "old_api": "foreach",
          "new_api": null,
          "old_text": "foreach(lc, rel->reltarget->exprs)",
          "new_text": null,
          "old_line_content": "\tforeach(lc, rel->reltarget->exprs)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 551,
          "old_api": "foreach",
          "new_api": null,
          "old_text": "foreach(lc, index->indextlist)",
          "new_text": null,
          "old_line_content": "\tforeach(lc, index->indextlist)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1064,
          "old_api": "IsA",
          "new_api": null,
          "old_text": "IsA(var, Var)",
          "new_text": null,
          "old_line_content": "\t\tif (!IsA(var, Var))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1070,
          "old_api": "copyObject",
          "new_api": null,
          "old_text": "copyObject(var)",
          "new_text": null,
          "old_line_content": "\t\t\treturn copyObject(var); /* Make a copy for safety */",
          "new_line_content": "\t\t/* If we find a Var referencing this TLE, we're good */",
          "content_same": false
        },
        {
          "line": 1584,
          "old_api": "make_canonical_pathkey",
          "new_api": null,
          "old_text": "make_canonical_pathkey(root,\n\t\t\t\t\t\t\t\t\t\t ec,\n\t\t\t\t\t\t\t\t\t\t linitial_oid(ec->ec_opfamilies),\n\t\t\t\t\t\t\t\t\t\t BTLessStrategyNumber,\n\t\t\t\t\t\t\t\t\t\t false)",
          "new_text": null,
          "old_line_content": "\t\tpathkey = make_canonical_pathkey(root,",
          "new_line_content": "\t\tec = ecs[best_j];",
          "content_same": false
        },
        {
          "line": 1590,
          "old_api": "pathkey_is_redundant",
          "new_api": null,
          "old_text": "pathkey_is_redundant(pathkey, pathkeys)",
          "new_text": null,
          "old_line_content": "\t\tAssert(!pathkey_is_redundant(pathkey, pathkeys));",
          "new_line_content": "\t\t\t\t\t\t\t\t\t\t false);",
          "content_same": false
        },
        {
          "line": 1591,
          "old_api": "lappend",
          "new_api": null,
          "old_text": "lappend(pathkeys, pathkey)",
          "new_text": null,
          "old_line_content": "\t\tpathkeys = lappend(pathkeys, pathkey);",
          "new_line_content": "\t\t/* can't be redundant because no duplicate ECs */",
          "content_same": false
        },
        {
          "line": 569,
          "old_api": "ScanDirectionIsBackward",
          "new_api": null,
          "old_text": "ScanDirectionIsBackward(scandir)",
          "new_text": null,
          "old_line_content": "\t\tif (ScanDirectionIsBackward(scandir))",
          "new_line_content": "\t\tindexkey = indextle->expr;",
          "content_same": false
        },
        {
          "line": 1594,
          "old_api": "pfree",
          "new_api": null,
          "old_text": "pfree(ecs)",
          "new_text": null,
          "old_line_content": "\tpfree(ecs);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1595,
          "old_api": "pfree",
          "new_api": null,
          "old_text": "pfree(scores)",
          "new_text": null,
          "old_line_content": "\tpfree(scores);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 583,
          "old_api": "make_pathkey_from_sortinfo",
          "new_api": null,
          "old_text": "make_pathkey_from_sortinfo(root,\n\t\t\t\t\t\t\t\t\t\t\t  indexkey,\n\t\t\t\t\t\t\t\t\t\t\t  index->sortopfamily[i],\n\t\t\t\t\t\t\t\t\t\t\t  index->opcintype[i],\n\t\t\t\t\t\t\t\t\t\t\t  index->indexcollations[i],\n\t\t\t\t\t\t\t\t\t\t\t  reverse_sort,\n\t\t\t\t\t\t\t\t\t\t\t  nulls_first,\n\t\t\t\t\t\t\t\t\t\t\t  0,\n\t\t\t\t\t\t\t\t\t\t\t  index->rel->relids,\n\t\t\t\t\t\t\t\t\t\t\t  false)",
          "new_text": null,
          "old_line_content": "\t\tcpathkey = make_pathkey_from_sortinfo(root,",
          "new_line_content": "\t\t * OK, try to make a canonical pathkey for this sort key.",
          "content_same": false
        },
        {
          "line": 1112,
          "old_api": "truncate_useless_pathkeys",
          "new_api": null,
          "old_text": "truncate_useless_pathkeys(root, joinrel, outer_pathkeys)",
          "new_text": null,
          "old_line_content": "\treturn truncate_useless_pathkeys(root, joinrel, outer_pathkeys);",
          "new_line_content": "\t * uninteresting to higher levels.",
          "content_same": false
        },
        {
          "line": 601,
          "old_api": "lappend",
          "new_api": null,
          "old_text": "lappend(retval, cpathkey)",
          "new_text": null,
          "old_line_content": "\t\t\t\tretval = lappend(retval, cpathkey);",
          "new_line_content": "\t\t\t */",
          "content_same": false
        },
        {
          "line": 600,
          "old_api": "pathkey_is_redundant",
          "new_api": null,
          "old_text": "pathkey_is_redundant(cpathkey, retval)",
          "new_text": null,
          "old_line_content": "\t\t\tif (!pathkey_is_redundant(cpathkey, retval))",
          "new_line_content": "\t\t\t * for this query.  Add it to list, unless it's redundant.",
          "content_same": false
        },
        {
          "line": 1634,
          "old_api": "list_head",
          "new_api": null,
          "old_text": "list_head(outer_pathkeys)",
          "new_text": null,
          "old_line_content": "\tlop = list_head(outer_pathkeys);",
          "new_line_content": "\tlastoeclass = NULL;",
          "content_same": false
        },
        {
          "line": 1638,
          "old_api": "lfirst",
          "new_api": null,
          "old_text": "lfirst(lc)",
          "new_text": null,
          "old_line_content": "\t\tRestrictInfo *rinfo = (RestrictInfo *) lfirst(lc);",
          "new_line_content": "\tforeach(lc, mergeclauses)",
          "content_same": false
        },
        {
          "line": 615,
          "old_api": "indexcol_is_bool_constant_for_query",
          "new_api": null,
          "old_text": "indexcol_is_bool_constant_for_query(root, index, i)",
          "new_text": null,
          "old_line_content": "\t\t\tif (!indexcol_is_bool_constant_for_query(root, index, i))",
          "new_line_content": "\t\t\t * keys won't be useful either.",
          "content_same": false
        },
        {
          "line": 1643,
          "old_api": "update_mergeclause_eclasses",
          "new_api": null,
          "old_text": "update_mergeclause_eclasses(root, rinfo)",
          "new_text": null,
          "old_line_content": "\t\tupdate_mergeclause_eclasses(root, rinfo);",
          "new_line_content": "\t\tPathKey    *pathkey;",
          "content_same": false
        },
        {
          "line": 1138,
          "old_api": "make_pathkeys_for_sortclauses_extended",
          "new_api": null,
          "old_text": "make_pathkeys_for_sortclauses_extended(root,\n\t\t\t\t\t\t\t\t\t\t\t\t\t&sortclauses,\n\t\t\t\t\t\t\t\t\t\t\t\t\ttlist,\n\t\t\t\t\t\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\t\t\t\t\t\t&sortable)",
          "new_text": null,
          "old_line_content": "\tresult = make_pathkeys_for_sortclauses_extended(root,",
          "new_line_content": "\tbool\t\tsortable;",
          "content_same": false
        },
        {
          "line": 1144,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(sortable)",
          "new_text": null,
          "old_line_content": "\tAssert(sortable);",
          "new_line_content": "\t\t\t\t\t\t\t\t\t\t\t\t\t&sortable);",
          "content_same": false
        },
        {
          "line": 1661,
          "old_api": "elog",
          "new_api": null,
          "old_text": "elog(ERROR, \"too few pathkeys for mergeclauses\")",
          "new_text": null,
          "old_line_content": "\t\t\t\telog(ERROR, \"too few pathkeys for mergeclauses\");",
          "new_line_content": "\t\t{",
          "content_same": false
        },
        {
          "line": 1662,
          "old_api": "lfirst",
          "new_api": null,
          "old_text": "lfirst(lop)",
          "new_text": null,
          "old_line_content": "\t\t\topathkey = (PathKey *) lfirst(lop);",
          "new_line_content": "\t\t\tif (!lop)",
          "content_same": false
        },
        {
          "line": 1666,
          "old_api": "elog",
          "new_api": null,
          "old_text": "elog(ERROR, \"outer pathkeys do not match mergeclause\")",
          "new_text": null,
          "old_line_content": "\t\t\t\telog(ERROR, \"outer pathkeys do not match mergeclause\");",
          "new_line_content": "\t\t\tlastoeclass = opathkey->pk_eclass;",
          "content_same": false
        },
        {
          "line": 1677,
          "old_api": "make_canonical_pathkey",
          "new_api": null,
          "old_text": "make_canonical_pathkey(root,\n\t\t\t\t\t\t\t\t\t\t\t ieclass,\n\t\t\t\t\t\t\t\t\t\t\t opathkey->pk_opfamily,\n\t\t\t\t\t\t\t\t\t\t\t opathkey->pk_strategy,\n\t\t\t\t\t\t\t\t\t\t\t opathkey->pk_nulls_first)",
          "new_text": null,
          "old_line_content": "\t\t\tpathkey = make_canonical_pathkey(root,",
          "new_line_content": "\t\t\tpathkey = opathkey;",
          "content_same": false
        },
        {
          "line": 654,
          "old_api": "IsBuiltinBooleanOpfamily",
          "new_api": null,
          "old_text": "IsBuiltinBooleanOpfamily(partscheme->partopfamily[partkeycol])",
          "new_text": null,
          "old_line_content": "\tif (!IsBuiltinBooleanOpfamily(partscheme->partopfamily[partkeycol]))",
          "new_line_content": "\t * built-in boolean opfamilies is good enough.",
          "content_same": false
        },
        {
          "line": 658,
          "old_api": "foreach",
          "new_api": null,
          "old_text": "foreach(lc, partrel->baserestrictinfo)",
          "new_text": null,
          "old_line_content": "\tforeach(lc, partrel->baserestrictinfo)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1178,
          "old_api": "foreach",
          "new_api": null,
          "old_text": "foreach(l, *sortclauses)",
          "new_text": null,
          "old_line_content": "\tforeach(l, *sortclauses)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 667,
          "old_api": "matches_boolean_partition_clause",
          "new_api": null,
          "old_text": "matches_boolean_partition_clause(rinfo, partrel, partkeycol)",
          "new_text": null,
          "old_line_content": "\t\tif (matches_boolean_partition_clause(rinfo, partrel, partkeycol))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1692,
          "old_api": "pathkey_is_redundant",
          "new_api": null,
          "old_text": "pathkey_is_redundant(pathkey, pathkeys)",
          "new_text": null,
          "old_line_content": "\t\tif (!pathkey_is_redundant(pathkey, pathkeys))",
          "new_line_content": "\t\t * the input relation.",
          "content_same": false
        },
        {
          "line": 1693,
          "old_api": "lappend",
          "new_api": null,
          "old_text": "lappend(pathkeys, pathkey)",
          "new_text": null,
          "old_line_content": "\t\t\tpathkeys = lappend(pathkeys, pathkey);",
          "new_line_content": "\t\t */",
          "content_same": false
        },
        {
          "line": 1184,
          "old_api": "get_sortgroupclause_expr",
          "new_api": null,
          "old_text": "get_sortgroupclause_expr(sortcl, tlist)",
          "new_text": null,
          "old_line_content": "\t\tsortkey = (Expr *) get_sortgroupclause_expr(sortcl, tlist);",
          "new_line_content": "\t\tPathKey    *pathkey;",
          "content_same": false
        },
        {
          "line": 1185,
          "old_api": "OidIsValid",
          "new_api": null,
          "old_text": "OidIsValid(sortcl->sortop)",
          "new_text": null,
          "old_line_content": "\t\tif (!OidIsValid(sortcl->sortop))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1190,
          "old_api": "make_pathkey_from_sortop",
          "new_api": null,
          "old_text": "make_pathkey_from_sortop(root,\n\t\t\t\t\t\t\t\t\t\t   sortkey,\n\t\t\t\t\t\t\t\t\t\t   sortcl->sortop,\n\t\t\t\t\t\t\t\t\t\t   sortcl->nulls_first,\n\t\t\t\t\t\t\t\t\t\t   sortcl->tleSortGroupRef,\n\t\t\t\t\t\t\t\t\t\t   true)",
          "new_text": null,
          "old_line_content": "\t\tpathkey = make_pathkey_from_sortop(root,",
          "new_line_content": "\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 1198,
          "old_api": "pathkey_is_redundant",
          "new_api": null,
          "old_text": "pathkey_is_redundant(pathkey, pathkeys)",
          "new_text": null,
          "old_line_content": "\t\tif (!pathkey_is_redundant(pathkey, pathkeys))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 687,
          "old_api": "linitial",
          "new_api": null,
          "old_text": "linitial(partrel->partexprs[partkeycol])",
          "new_text": null,
          "old_line_content": "\tNode\t   *partexpr = (Node *) linitial(partrel->partexprs[partkeycol]);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1199,
          "old_api": "lappend",
          "new_api": null,
          "old_text": "lappend(pathkeys, pathkey)",
          "new_text": null,
          "old_line_content": "\t\t\tpathkeys = lappend(pathkeys, pathkey);",
          "new_line_content": "\t\t/* Canonical form eliminates redundant ordering keys */",
          "content_same": false
        },
        {
          "line": 690,
          "old_api": "equal",
          "new_api": null,
          "old_text": "equal(partexpr, clause)",
          "new_text": null,
          "old_line_content": "\tif (equal(partexpr, clause))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 693,
          "old_api": "is_notclause",
          "new_api": null,
          "old_text": "is_notclause(clause)",
          "new_text": null,
          "old_line_content": "\telse if (is_notclause(clause))",
          "new_line_content": "\t\treturn true;",
          "content_same": false
        },
        {
          "line": 1740,
          "old_api": "list_head",
          "new_api": null,
          "old_text": "list_head(pathkeys)",
          "new_text": null,
          "old_line_content": "\tlip = list_head(pathkeys);",
          "new_line_content": "\t\treturn NIL;",
          "content_same": false
        },
        {
          "line": 1741,
          "old_api": "lfirst",
          "new_api": null,
          "old_text": "lfirst(lip)",
          "new_text": null,
          "old_line_content": "\tpathkey = (PathKey *) lfirst(lip);",
          "new_line_content": "\t/* Initialize to consider first pathkey */",
          "content_same": false
        },
        {
          "line": 725,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(partscheme != NULL)",
          "new_text": null,
          "old_line_content": "\tAssert(partscheme != NULL);",
          "new_line_content": "\tint\t\t\ti;",
          "content_same": false
        },
        {
          "line": 726,
          "old_api": "partitions_are_ordered",
          "new_api": null,
          "old_text": "partitions_are_ordered(partrel->boundinfo, partrel->live_parts)",
          "new_text": null,
          "old_line_content": "\tAssert(partitions_are_ordered(partrel->boundinfo, partrel->live_parts));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1237,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(restrictinfo->mergeopfamilies != NIL)",
          "new_text": null,
          "old_line_content": "\tAssert(restrictinfo->mergeopfamilies != NIL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1240,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(restrictinfo->right_ec == NULL)",
          "new_text": null,
          "old_line_content": "\tAssert(restrictinfo->right_ec == NULL);",
          "new_line_content": "\t/* ... with links not yet set */",
          "content_same": false
        },
        {
          "line": 1749,
          "old_api": "lfirst",
          "new_api": null,
          "old_text": "lfirst(i)",
          "new_text": null,
          "old_line_content": "\t\tRestrictInfo *rinfo = (RestrictInfo *) lfirst(i);",
          "new_line_content": "\tforeach(i, mergeclauses)",
          "content_same": false
        },
        {
          "line": 1243,
          "old_api": "op_input_types",
          "new_api": null,
          "old_text": "op_input_types(((OpExpr *) clause)->opno, &lefttype, &righttype)",
          "new_text": null,
          "old_line_content": "\top_input_types(((OpExpr *) clause)->opno, &lefttype, &righttype);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 733,
          "old_api": "linitial",
          "new_api": null,
          "old_text": "linitial(partrel->partexprs[i])",
          "new_text": null,
          "old_line_content": "\t\tExpr\t   *keyCol = (Expr *) linitial(partrel->partexprs[i]);",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 1247,
          "old_api": "get_eclass_for_sort_expr",
          "new_api": null,
          "old_text": "get_eclass_for_sort_expr(root,\n\t\t\t\t\t\t\t\t (Expr *) get_leftop(clause),\n\t\t\t\t\t\t\t\t restrictinfo->mergeopfamilies,\n\t\t\t\t\t\t\t\t lefttype,\n\t\t\t\t\t\t\t\t ((OpExpr *) clause)->inputcollid,\n\t\t\t\t\t\t\t\t 0,\n\t\t\t\t\t\t\t\t NULL,\n\t\t\t\t\t\t\t\t true)",
          "new_text": null,
          "old_line_content": "\t\tget_eclass_for_sort_expr(root,",
          "new_line_content": "\t/* Find or create a matching EquivalenceClass for each side */",
          "content_same": false
        },
        {
          "line": 1248,
          "old_api": "get_leftop",
          "new_api": null,
          "old_text": "get_leftop(clause)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\t\t (Expr *) get_leftop(clause),",
          "new_line_content": "\trestrictinfo->left_ec =",
          "content_same": false
        },
        {
          "line": 742,
          "old_api": "make_pathkey_from_sortinfo",
          "new_api": null,
          "old_text": "make_pathkey_from_sortinfo(root,\n\t\t\t\t\t\t\t\t\t\t\t  keyCol,\n\t\t\t\t\t\t\t\t\t\t\t  partscheme->partopfamily[i],\n\t\t\t\t\t\t\t\t\t\t\t  partscheme->partopcintype[i],\n\t\t\t\t\t\t\t\t\t\t\t  partscheme->partcollation[i],\n\t\t\t\t\t\t\t\t\t\t\t  ScanDirectionIsBackward(scandir),\n\t\t\t\t\t\t\t\t\t\t\t  ScanDirectionIsBackward(scandir),\n\t\t\t\t\t\t\t\t\t\t\t  0,\n\t\t\t\t\t\t\t\t\t\t\t  partrel->relids,\n\t\t\t\t\t\t\t\t\t\t\t  false)",
          "new_text": null,
          "old_line_content": "\t\tcpathkey = make_pathkey_from_sortinfo(root,",
          "new_line_content": "\t\t * backwards scan only.",
          "content_same": false
        },
        {
          "line": 1256,
          "old_api": "get_eclass_for_sort_expr",
          "new_api": null,
          "old_text": "get_eclass_for_sort_expr(root,\n\t\t\t\t\t\t\t\t (Expr *) get_rightop(clause),\n\t\t\t\t\t\t\t\t restrictinfo->mergeopfamilies,\n\t\t\t\t\t\t\t\t righttype,\n\t\t\t\t\t\t\t\t ((OpExpr *) clause)->inputcollid,\n\t\t\t\t\t\t\t\t 0,\n\t\t\t\t\t\t\t\t NULL,\n\t\t\t\t\t\t\t\t true)",
          "new_text": null,
          "old_line_content": "\t\tget_eclass_for_sort_expr(root,",
          "new_line_content": "\t\t\t\t\t\t\t\t true);",
          "content_same": false
        },
        {
          "line": 1257,
          "old_api": "get_rightop",
          "new_api": null,
          "old_text": "get_rightop(clause)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\t\t (Expr *) get_rightop(clause),",
          "new_line_content": "\trestrictinfo->right_ec =",
          "content_same": false
        },
        {
          "line": 1768,
          "old_api": "lfirst",
          "new_api": null,
          "old_text": "lfirst(lip)",
          "new_text": null,
          "old_line_content": "\t\t\tpathkey = (PathKey *) lfirst(lip);",
          "new_line_content": "\t\t\tif (lip == NULL)",
          "content_same": false
        },
        {
          "line": 747,
          "old_api": "ScanDirectionIsBackward",
          "new_api": null,
          "old_text": "ScanDirectionIsBackward(scandir)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\t\t\t\t\t  ScanDirectionIsBackward(scandir),",
          "new_line_content": "\t\t\t\t\t\t\t\t\t\t\t  partscheme->partopcintype[i],",
          "content_same": false
        },
        {
          "line": 748,
          "old_api": "ScanDirectionIsBackward",
          "new_api": null,
          "old_text": "ScanDirectionIsBackward(scandir)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\t\t\t\t\t  ScanDirectionIsBackward(scandir),",
          "new_line_content": "\t\t\t\t\t\t\t\t\t\t\t  partscheme->partcollation[i],",
          "content_same": false
        },
        {
          "line": 1777,
          "old_api": "lappend",
          "new_api": null,
          "old_text": "lappend(new_mergeclauses, rinfo)",
          "new_text": null,
          "old_line_content": "\t\t\tnew_mergeclauses = lappend(new_mergeclauses, rinfo);",
          "new_line_content": "\t\tif (clause_ec == pathkey_ec)",
          "content_same": false
        },
        {
          "line": 760,
          "old_api": "pathkey_is_redundant",
          "new_api": null,
          "old_text": "pathkey_is_redundant(cpathkey, retval)",
          "new_text": null,
          "old_line_content": "\t\t\tif (!pathkey_is_redundant(cpathkey, retval))",
          "new_line_content": "\t\t\t * for this query.  Add it to list, unless it's redundant.",
          "content_same": false
        },
        {
          "line": 761,
          "old_api": "lappend",
          "new_api": null,
          "old_text": "lappend(retval, cpathkey)",
          "new_text": null,
          "old_line_content": "\t\t\t\tretval = lappend(retval, cpathkey);",
          "new_line_content": "\t\t\t */",
          "content_same": false
        },
        {
          "line": 1280,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(restrictinfo->mergeopfamilies != NIL)",
          "new_text": null,
          "old_line_content": "\tAssert(restrictinfo->mergeopfamilies != NIL);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1283,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(restrictinfo->right_ec != NULL)",
          "new_text": null,
          "old_line_content": "\tAssert(restrictinfo->right_ec != NULL);",
          "new_line_content": "\t/* ... with pointers already set */",
          "content_same": false
        },
        {
          "line": 775,
          "old_api": "partkey_is_bool_constant_for_query",
          "new_api": null,
          "old_text": "partkey_is_bool_constant_for_query(partrel, i)",
          "new_text": null,
          "old_line_content": "\t\t\tif (!partkey_is_bool_constant_for_query(partrel, i))",
          "new_line_content": "\t\t\t * keys won't be useful either.",
          "content_same": false
        },
        {
          "line": 1827,
          "old_api": "lfirst",
          "new_api": null,
          "old_text": "lfirst(i)",
          "new_text": null,
          "old_line_content": "\t\tPathKey    *pathkey = (PathKey *) lfirst(i);",
          "new_line_content": "\tforeach(i, pathkeys)",
          "content_same": false
        },
        {
          "line": 1832,
          "old_api": "right_merge_direction",
          "new_api": null,
          "old_text": "right_merge_direction(root, pathkey)",
          "new_text": null,
          "old_line_content": "\t\tif (!right_merge_direction(root, pathkey))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1321,
          "old_api": "lfirst",
          "new_api": null,
          "old_text": "lfirst(i)",
          "new_text": null,
          "old_line_content": "\t\tRestrictInfo *rinfo = (RestrictInfo *) lfirst(i);",
          "new_line_content": "\tforeach(i, restrictinfos)",
          "content_same": false
        },
        {
          "line": 812,
          "old_api": "get_ordering_op_properties",
          "new_api": null,
          "old_text": "get_ordering_op_properties(opno,\n\t\t\t\t\t\t\t\t\t&opfamily, &opcintype, &strategy)",
          "new_text": null,
          "old_line_content": "\tif (!get_ordering_op_properties(opno,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1328,
          "old_api": "lfirst",
          "new_api": null,
          "old_text": "lfirst(i)",
          "new_text": null,
          "old_line_content": "\t\tPathKey    *pathkey = (PathKey *) lfirst(i);",
          "new_line_content": "\tforeach(i, pathkeys)",
          "content_same": false
        },
        {
          "line": 817,
          "old_api": "make_pathkey_from_sortinfo",
          "new_api": null,
          "old_text": "make_pathkey_from_sortinfo(root,\n\t\t\t\t\t\t\t\t\t\t  expr,\n\t\t\t\t\t\t\t\t\t\t  opfamily,\n\t\t\t\t\t\t\t\t\t\t  opcintype,\n\t\t\t\t\t\t\t\t\t\t  exprCollation((Node *) expr),\n\t\t\t\t\t\t\t\t\t\t  (strategy == BTGreaterStrategyNumber),\n\t\t\t\t\t\t\t\t\t\t  (strategy == BTGreaterStrategyNumber),\n\t\t\t\t\t\t\t\t\t\t  0,\n\t\t\t\t\t\t\t\t\t\t  rel,\n\t\t\t\t\t\t\t\t\t\t  create_it)",
          "new_text": null,
          "old_line_content": "\tcpathkey = make_pathkey_from_sortinfo(root,",
          "new_line_content": "\t\t\t opno);",
          "content_same": false
        },
        {
          "line": 1841,
          "old_api": "eclass_useful_for_merging",
          "new_api": null,
          "old_text": "eclass_useful_for_merging(root, pathkey->pk_eclass, rel)",
          "new_text": null,
          "old_line_content": "\t\t\teclass_useful_for_merging(root, pathkey->pk_eclass, rel))",
          "new_line_content": "\t\t */",
          "content_same": false
        },
        {
          "line": 821,
          "old_api": "exprCollation",
          "new_api": null,
          "old_text": "exprCollation((Node *) expr)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\t\t\t\t  exprCollation((Node *) expr),",
          "new_line_content": "\t\t\t\t\t\t\t\t\t\t  opfamily,",
          "content_same": false
        },
        {
          "line": 1850,
          "old_api": "foreach",
          "new_api": null,
          "old_text": "foreach(j, rel->joininfo)",
          "new_text": null,
          "old_line_content": "\t\t\tforeach(j, rel->joininfo)",
          "new_line_content": "\t\t\t * nonetheless be mergejoinable.",
          "content_same": false
        },
        {
          "line": 829,
          "old_api": "list_make1",
          "new_api": null,
          "old_text": "list_make1(cpathkey)",
          "new_text": null,
          "old_line_content": "\t\tpathkeys = list_make1(cpathkey);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1856,
          "old_api": "update_mergeclause_eclasses",
          "new_api": null,
          "old_text": "update_mergeclause_eclasses(root, restrictinfo)",
          "new_text": null,
          "old_line_content": "\t\t\t\tupdate_mergeclause_eclasses(root, restrictinfo);",
          "new_line_content": "\t\t\t\tif (restrictinfo->mergeopfamilies == NIL)",
          "content_same": false
        },
        {
          "line": 859,
          "old_api": "list_length",
          "new_api": null,
          "old_text": "list_length(root->query_pathkeys)",
          "new_text": null,
          "old_line_content": "\tint\t\t\touter_query_keys = list_length(root->query_pathkeys);",
          "new_line_content": "\tList\t   *retval = NIL;",
          "content_same": false
        },
        {
          "line": 1372,
          "old_api": "lfirst",
          "new_api": null,
          "old_text": "lfirst(j)",
          "new_text": null,
          "old_line_content": "\t\t\tRestrictInfo *rinfo = (RestrictInfo *) lfirst(j);",
          "new_line_content": "\t\tforeach(j, restrictinfos)",
          "content_same": false
        },
        {
          "line": 864,
          "old_api": "lfirst",
          "new_api": null,
          "old_text": "lfirst(i)",
          "new_text": null,
          "old_line_content": "\t\tPathKey    *sub_pathkey = (PathKey *) lfirst(i);",
          "new_line_content": "\tforeach(i, subquery_pathkeys)",
          "content_same": false
        },
        {
          "line": 1378,
          "old_api": "lappend",
          "new_api": null,
          "old_text": "lappend(matched_restrictinfos, rinfo)",
          "new_text": null,
          "old_line_content": "\t\t\t\tmatched_restrictinfos = lappend(matched_restrictinfos, rinfo);",
          "new_line_content": "\t\t\t\trinfo->left_ec : rinfo->right_ec;",
          "content_same": false
        },
        {
          "line": 1891,
          "old_api": "foreach",
          "new_api": null,
          "old_text": "foreach(l, root->query_pathkeys)",
          "new_text": null,
          "old_line_content": "\tforeach(l, root->query_pathkeys)",
          "new_line_content": "\tListCell   *l;",
          "content_same": false
        },
        {
          "line": 879,
          "old_api": "elog",
          "new_api": null,
          "old_text": "elog(ERROR, \"volatile EquivalenceClass has no sortref\")",
          "new_text": null,
          "old_line_content": "\t\t\t\telog(ERROR, \"volatile EquivalenceClass has no sortref\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 880,
          "old_api": "get_sortgroupref_tle",
          "new_api": null,
          "old_text": "get_sortgroupref_tle(sub_eclass->ec_sortref, subquery_tlist)",
          "new_text": null,
          "old_line_content": "\t\t\ttle = get_sortgroupref_tle(sub_eclass->ec_sortref, subquery_tlist);",
          "new_line_content": "\t\t\tif (sub_eclass->ec_sortref == 0)\t/* can't happen */",
          "content_same": false
        },
        {
          "line": 1393,
          "old_api": "list_concat",
          "new_api": null,
          "old_text": "list_concat(mergeclauses, matched_restrictinfos)",
          "new_text": null,
          "old_line_content": "\t\tmergeclauses = list_concat(mergeclauses, matched_restrictinfos);",
          "new_line_content": "\t\t * add them to result list.",
          "content_same": false
        },
        {
          "line": 890,
          "old_api": "list_length",
          "new_api": null,
          "old_text": "list_length(sub_eclass->ec_members)",
          "new_text": null,
          "old_line_content": "\t\t\t\tAssert(list_length(sub_eclass->ec_members) == 1);",
          "new_line_content": "\t\t\t\tEquivalenceClass *outer_ec;",
          "content_same": false
        },
        {
          "line": 891,
          "old_api": "linitial",
          "new_api": null,
          "old_text": "linitial(sub_eclass->ec_members)",
          "new_text": null,
          "old_line_content": "\t\t\t\tsub_member = (EquivalenceMember *) linitial(sub_eclass->ec_members);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 902,
          "old_api": "get_eclass_for_sort_expr",
          "new_api": null,
          "old_text": "get_eclass_for_sort_expr(root,\n\t\t\t\t\t\t\t\t\t\t\t (Expr *) outer_var,\n\t\t\t\t\t\t\t\t\t\t\t sub_eclass->ec_opfamilies,\n\t\t\t\t\t\t\t\t\t\t\t sub_member->em_datatype,\n\t\t\t\t\t\t\t\t\t\t\t sub_eclass->ec_collation,\n\t\t\t\t\t\t\t\t\t\t\t 0,\n\t\t\t\t\t\t\t\t\t\t\t rel->relids,\n\t\t\t\t\t\t\t\t\t\t\t false)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tget_eclass_for_sort_expr(root,",
          "new_line_content": "\t\t\t\t */",
          "content_same": false
        },
        {
          "line": 1934,
          "old_api": "pathkeys_count_contained_in",
          "new_api": null,
          "old_text": "pathkeys_count_contained_in(root->query_pathkeys, pathkeys,\n\t\t\t\t\t\t\t\t\t   &n_common_pathkeys)",
          "new_text": null,
          "old_line_content": "\t(void) pathkeys_count_contained_in(root->query_pathkeys, pathkeys,",
          "new_line_content": "\t\treturn 0;\t\t\t\t/* unordered path */",
          "content_same": false
        },
        {
          "line": 917,
          "old_api": "make_canonical_pathkey",
          "new_api": null,
          "old_text": "make_canonical_pathkey(root,\n\t\t\t\t\t\t\t\t\t\t\t   outer_ec,\n\t\t\t\t\t\t\t\t\t\t\t   sub_pathkey->pk_opfamily,\n\t\t\t\t\t\t\t\t\t\t\t   sub_pathkey->pk_strategy,\n\t\t\t\t\t\t\t\t\t\t\t   sub_pathkey->pk_nulls_first)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\tmake_canonical_pathkey(root,",
          "new_line_content": "\t\t\t\tif (outer_ec)",
          "content_same": false
        },
        {
          "line": 1431,
          "old_api": "list_length",
          "new_api": null,
          "old_text": "list_length(mergeclauses)",
          "new_text": null,
          "old_line_content": "\tint\t\t\tnClauses = list_length(mergeclauses);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1952,
          "old_api": "pathkeys_useful_for_merging",
          "new_api": null,
          "old_text": "pathkeys_useful_for_merging(root, rel, pathkeys)",
          "new_text": null,
          "old_line_content": "\tnuseful = pathkeys_useful_for_merging(root, rel, pathkeys);",
          "new_line_content": "\tint\t\t\tnuseful2;",
          "content_same": false
        },
        {
          "line": 1953,
          "old_api": "pathkeys_useful_for_ordering",
          "new_api": null,
          "old_text": "pathkeys_useful_for_ordering(root, pathkeys)",
          "new_text": null,
          "old_line_content": "\tnuseful2 = pathkeys_useful_for_ordering(root, pathkeys);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1446,
          "old_api": "palloc",
          "new_api": null,
          "old_text": "palloc(nClauses * sizeof(EquivalenceClass *))",
          "new_text": null,
          "old_line_content": "\tecs = (EquivalenceClass **) palloc(nClauses * sizeof(EquivalenceClass *));",
          "new_line_content": "\t * duplicates) and their \"popularity\" scores.",
          "content_same": false
        },
        {
          "line": 1447,
          "old_api": "palloc",
          "new_api": null,
          "old_text": "palloc(nClauses * sizeof(int))",
          "new_text": null,
          "old_line_content": "\tscores = (int *) palloc(nClauses * sizeof(int));",
          "new_line_content": "\t */",
          "content_same": false
        },
        {
          "line": 1963,
          "old_api": "list_length",
          "new_api": null,
          "old_text": "list_length(pathkeys)",
          "new_text": null,
          "old_line_content": "\telse if (nuseful == list_length(pathkeys))",
          "new_line_content": "\tif (nuseful == 0)",
          "content_same": false
        },
        {
          "line": 1452,
          "old_api": "lfirst",
          "new_api": null,
          "old_text": "lfirst(lc)",
          "new_text": null,
          "old_line_content": "\t\tRestrictInfo *rinfo = (RestrictInfo *) lfirst(lc);",
          "new_line_content": "\tforeach(lc, mergeclauses)",
          "content_same": false
        },
        {
          "line": 430,
          "old_api": "lfirst",
          "new_api": null,
          "old_text": "lfirst(l)",
          "new_text": null,
          "old_line_content": "\t\tPath\t   *path = (Path *) lfirst(l);",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 1966,
          "old_api": "list_copy_head",
          "new_api": null,
          "old_text": "list_copy_head(pathkeys, nuseful)",
          "new_text": null,
          "old_line_content": "\t\treturn list_copy_head(pathkeys, nuseful);",
          "new_line_content": "\t\treturn pathkeys;",
          "content_same": false
        },
        {
          "line": 945,
          "old_api": "foreach",
          "new_api": null,
          "old_text": "foreach(j, sub_eclass->ec_members)",
          "new_text": null,
          "old_line_content": "\t\t\tforeach(j, sub_eclass->ec_members)",
          "new_line_content": "\t\t\tListCell   *j;",
          "content_same": false
        },
        {
          "line": 1458,
          "old_api": "update_mergeclause_eclasses",
          "new_api": null,
          "old_text": "update_mergeclause_eclasses(root, rinfo)",
          "new_text": null,
          "old_line_content": "\t\tupdate_mergeclause_eclasses(root, rinfo);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 437,
          "old_api": "compare_path_costs",
          "new_api": null,
          "old_text": "compare_path_costs(matched_path, path, cost_criterion)",
          "new_text": null,
          "old_line_content": "\t\t\tcompare_path_costs(matched_path, path, cost_criterion) <= 0)",
          "new_line_content": "\t\t/*",
          "content_same": false
        },
        {
          "line": 443,
          "old_api": "pathkeys_contained_in",
          "new_api": null,
          "old_text": "pathkeys_contained_in(pathkeys, path->pathkeys)",
          "new_text": null,
          "old_line_content": "\t\tif (pathkeys_contained_in(pathkeys, path->pathkeys) &&",
          "new_line_content": "\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 444,
          "old_api": "PATH_REQ_OUTER",
          "new_api": null,
          "old_text": "PATH_REQ_OUTER(path)",
          "new_text": null,
          "old_line_content": "\t\t\tbms_is_subset(PATH_REQ_OUTER(path), required_outer))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 958,
          "old_api": "lfirst",
          "new_api": null,
          "old_text": "lfirst(k)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tTargetEntry *tle = (TargetEntry *) lfirst(k);",
          "new_line_content": "\t\t\t\tforeach(k, subquery_tlist)",
          "content_same": false
        },
        {
          "line": 1476,
          "old_api": "foreach",
          "new_api": null,
          "old_text": "foreach(lc2, oeclass->ec_members)",
          "new_text": null,
          "old_line_content": "\t\tforeach(lc2, oeclass->ec_members)",
          "new_line_content": "\t\t/* compute score */",
          "content_same": false
        },
        {
          "line": 966,
          "old_api": "find_var_for_subquery_tle",
          "new_api": null,
          "old_text": "find_var_for_subquery_tle(rel, tle)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\touter_var = find_var_for_subquery_tle(rel, tle);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1482,
          "old_api": "bms_overlap",
          "new_api": null,
          "old_text": "bms_overlap(em->em_relids, joinrel->relids)",
          "new_text": null,
          "old_line_content": "\t\t\t\t!bms_overlap(em->em_relids, joinrel->relids))",
          "new_line_content": "\t\t\t/* Potential future join partner? */",
          "content_same": false
        },
        {
          "line": 976,
          "old_api": "canonicalize_ec_expression",
          "new_api": null,
          "old_text": "canonicalize_ec_expression(tle->expr,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  sub_expr_type,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  sub_expr_coll)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\ttle_expr = canonicalize_ec_expression(tle->expr,",
          "new_line_content": "\t\t\t\t\t * process.",
          "content_same": false
        },
        {
          "line": 979,
          "old_api": "equal",
          "new_api": null,
          "old_text": "equal(tle_expr, sub_expr)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tif (!equal(tle_expr, sub_expr))",
          "new_line_content": "\t\t\t\t\t\t\t\t\t\t\t\t\t\t  sub_expr_type,",
          "content_same": false
        },
        {
          "line": 983,
          "old_api": "get_eclass_for_sort_expr",
          "new_api": null,
          "old_text": "get_eclass_for_sort_expr(root,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(Expr *) outer_var,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsub_eclass->ec_opfamilies,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsub_expr_type,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsub_expr_coll,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trel->relids,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfalse)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\touter_ec = get_eclass_for_sort_expr(root,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 475,
          "old_api": "lfirst",
          "new_api": null,
          "old_text": "lfirst(l)",
          "new_text": null,
          "old_line_content": "\t\tPath\t   *path = (Path *) lfirst(l);",
          "new_line_content": "\tforeach(l, paths)",
          "content_same": false
        },
        {
          "line": 1503,
          "old_api": "foreach",
          "new_api": null,
          "old_text": "foreach(lc, root->query_pathkeys)",
          "new_text": null,
          "old_line_content": "\t\tforeach(lc, root->query_pathkeys)",
          "new_line_content": "\t\tint\t\t\tmatches = 0;",
          "content_same": false
        },
        {
          "line": 482,
          "old_api": "compare_fractional_path_costs",
          "new_api": null,
          "old_text": "compare_fractional_path_costs(matched_path, path, fraction)",
          "new_text": null,
          "old_line_content": "\t\t\tcompare_fractional_path_costs(matched_path, path, fraction) <= 0)",
          "new_line_content": "\t\t */",
          "content_same": false
        },
        {
          "line": 485,
          "old_api": "pathkeys_contained_in",
          "new_api": null,
          "old_text": "pathkeys_contained_in(pathkeys, path->pathkeys)",
          "new_text": null,
          "old_line_content": "\t\tif (pathkeys_contained_in(pathkeys, path->pathkeys) &&",
          "new_line_content": "\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 486,
          "old_api": "PATH_REQ_OUTER",
          "new_api": null,
          "old_text": "PATH_REQ_OUTER(path)",
          "new_text": null,
          "old_line_content": "\t\t\tbms_is_subset(PATH_REQ_OUTER(path), required_outer))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 999,
          "old_api": "make_canonical_pathkey",
          "new_api": null,
          "old_text": "make_canonical_pathkey(root,\n\t\t\t\t\t\t\t\t\t\t\t\t\t  outer_ec,\n\t\t\t\t\t\t\t\t\t\t\t\t\t  sub_pathkey->pk_opfamily,\n\t\t\t\t\t\t\t\t\t\t\t\t\t  sub_pathkey->pk_strategy,\n\t\t\t\t\t\t\t\t\t\t\t\t\t  sub_pathkey->pk_nulls_first)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\touter_pk = make_canonical_pathkey(root,",
          "new_line_content": "\t\t\t\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 1005,
          "old_api": "list_length",
          "new_api": null,
          "old_text": "list_length(outer_ec->ec_members)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tscore = list_length(outer_ec->ec_members) - 1;",
          "new_line_content": "\t\t\t\t\t\t\t\t\t\t\t\t\t  sub_pathkey->pk_nulls_first);",
          "content_same": false
        },
        {
          "line": 1008,
          "old_api": "list_nth",
          "new_api": null,
          "old_text": "list_nth(root->query_pathkeys, retvallen)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\tlist_nth(root->query_pathkeys, retvallen) == outer_pk)",
          "new_line_content": "\t\t\t\t\t/* +1 if it matches the proper query_pathkeys item */",
          "content_same": false
        },
        {
          "line": 1522,
          "old_api": "list_copy",
          "new_api": null,
          "old_text": "list_copy(root->query_pathkeys)",
          "new_text": null,
          "old_line_content": "\t\t\tpathkeys = list_copy(root->query_pathkeys);",
          "new_line_content": "\t\t{",
          "content_same": false
        },
        {
          "line": 504,
          "old_api": "lfirst",
          "new_api": null,
          "old_text": "lfirst(l)",
          "new_text": null,
          "old_line_content": "\t\tPath\t   *innerpath = (Path *) lfirst(l);",
          "new_line_content": "\tforeach(l, paths)",
          "content_same": false
        },
        {
          "line": 507,
          "old_api": "PATH_REQ_OUTER",
          "new_api": null,
          "old_text": "PATH_REQ_OUTER(innerpath)",
          "new_text": null,
          "old_line_content": "\t\t\tbms_is_empty(PATH_REQ_OUTER(innerpath)))",
          "new_line_content": "",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 25,
      "total_additions": 121,
      "total_deletions": 121,
      "total_api_changes": 267
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 9,
        "api_related_lines": 267,
        "non_api_lines": 8,
        "non_api_line_numbers": [
          433,
          434,
          435,
          436,
          440,
          441,
          410,
          411
        ]
      }
    },
    "api_calls_before": 185,
    "api_calls_after": 185,
    "diff_info": {
      "added_lines": 6,
      "removed_lines": 4,
      "total_diff_lines": 36
    }
  }
}
{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/postgres/modified_file/87bff68840d542011ed8f60427502fb90fdf2873",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/postgres/modified_file/87bff68840d542011ed8f60427502fb90fdf2873/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/postgres/modified_file/87bff68840d542011ed8f60427502fb90fdf2873/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/postgres/modified_file/87bff68840d542011ed8f60427502fb90fdf2873/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 3471,
          "old_api": "PQisBusy",
          "new_api": "PQconsumeInput",
          "old_text": "PQisBusy(st->con)",
          "new_text": "PQconsumeInput(st->con)",
          "old_line_content": "\t\t\t\tif (PQisBusy(st->con))",
          "new_line_content": "\t\t\t\tif (PQisBusy(st->con) && !PQconsumeInput(st->con))",
          "content_same": false
        },
        {
          "line": 3665,
          "old_api": "conditional_stack_push",
          "new_api": "evaluateExpr",
          "old_text": "conditional_stack_push(st->cstack, cond ? IFSTATE_TRUE : IFSTATE_FALSE)",
          "new_text": "evaluateExpr(st, expr, &result)",
          "old_line_content": "\t\tconditional_stack_push(st->cstack, cond ? IFSTATE_TRUE : IFSTATE_FALSE);",
          "new_line_content": "\t\tif (!evaluateExpr(st, expr, &result))",
          "content_same": false
        },
        {
          "line": 3681,
          "old_api": "evaluateExpr",
          "new_api": "conditional_stack_peek",
          "old_text": "evaluateExpr(st, expr, &result)",
          "new_text": "conditional_stack_peek(st->cstack)",
          "old_line_content": "\t\tif (!evaluateExpr(st, expr, &result))",
          "new_line_content": "\t\tif (conditional_stack_peek(st->cstack) == IFSTATE_TRUE)",
          "content_same": false
        },
        {
          "line": 3688,
          "old_api": "conditional_stack_peek",
          "new_api": "evaluateExpr",
          "old_text": "conditional_stack_peek(st->cstack)",
          "new_text": "evaluateExpr(st, expr, &result)",
          "old_line_content": "\t\tAssert(conditional_stack_peek(st->cstack) == IFSTATE_FALSE);",
          "new_line_content": "\t\tif (!evaluateExpr(st, expr, &result))",
          "content_same": false
        },
        {
          "line": 3717,
          "old_api": "commandFailed",
          "new_api": "conditional_stack_empty",
          "old_text": "commandFailed(st, \"setshell\", \"execution of meta-command failed\")",
          "new_text": "conditional_stack_empty(st->cstack)",
          "old_line_content": "\t\t\tcommandFailed(st, \"setshell\", \"execution of meta-command failed\");",
          "new_line_content": "\t\tAssert(!conditional_stack_empty(st->cstack));",
          "content_same": false
        },
        {
          "line": 3748,
          "old_api": "commandFailed",
          "new_api": "PQpipelineStatus",
          "old_text": "commandFailed(st, \"startpipeline\", \"failed to enter pipeline mode\")",
          "new_text": "PQpipelineStatus(st->con)",
          "old_line_content": "\t\t\tcommandFailed(st, \"startpipeline\", \"failed to enter pipeline mode\");",
          "new_line_content": "\t\tif (PQpipelineStatus(st->con) != PQ_PIPELINE_OFF)",
          "content_same": false
        },
        {
          "line": 3761,
          "old_api": "commandFailed",
          "new_api": "PQpipelineStatus",
          "old_text": "commandFailed(st, \"endpipeline\", \"failed to send a pipeline sync\")",
          "new_text": "PQpipelineStatus(st->con)",
          "old_line_content": "\t\t\tcommandFailed(st, \"endpipeline\", \"failed to send a pipeline sync\");",
          "new_line_content": "\t\tif (PQpipelineStatus(st->con) != PQ_PIPELINE_ON)",
          "content_same": false
        },
        {
          "line": 3801,
          "old_api": "pg_erand48",
          "new_api": "Assert",
          "old_text": "pg_erand48(thread->ts_sample_rs.xseed)",
          "new_text": "Assert(use_log)",
          "old_line_content": "\t\tpg_erand48(thread->ts_sample_rs.xseed) > sample_rate)",
          "new_line_content": "\tAssert(use_log);",
          "content_same": false
        },
        {
          "line": 3842,
          "old_api": "accumStats",
          "new_api": "fputc",
          "old_text": "accumStats(agg, skipped, latency, lag)",
          "new_text": "fputc('\\n', logfile)",
          "old_line_content": "\t\taccumStats(agg, skipped, latency, lag);",
          "new_line_content": "\t\t\tfputc('\\n', logfile);",
          "content_same": false
        },
        {
          "line": 3986,
          "old_api": "appendPQExpBuffer",
          "new_api": "appendPQExpBufferStr",
          "old_text": "appendPQExpBuffer(&query, INT64_FORMAT, p * part_size + 1)",
          "new_text": "appendPQExpBufferStr(&query, \"minvalue\")",
          "old_line_content": "\t\t\t\tappendPQExpBuffer(&query, INT64_FORMAT, p * part_size + 1);",
          "new_line_content": "\t\t\t\tappendPQExpBufferStr(&query, \"minvalue\");",
          "content_same": false
        },
        {
          "line": 3988,
          "old_api": "appendPQExpBufferStr",
          "new_api": "appendPQExpBuffer",
          "old_text": "appendPQExpBufferStr(&query, \"maxvalue\")",
          "new_text": "appendPQExpBuffer(&query, INT64_FORMAT, (p - 1) * part_size + 1)",
          "old_line_content": "\t\t\t\tappendPQExpBufferStr(&query, \"maxvalue\");",
          "new_line_content": "\t\t\t\tappendPQExpBuffer(&query, INT64_FORMAT, (p - 1) * part_size + 1);",
          "content_same": false
        },
        {
          "line": 3990,
          "old_api": "appendPQExpBufferChar",
          "new_api": "appendPQExpBufferStr",
          "old_text": "appendPQExpBufferChar(&query, ')')",
          "new_text": "appendPQExpBufferStr(&query, \") to (\")",
          "old_line_content": "\t\t\tappendPQExpBufferChar(&query, ')');",
          "new_line_content": "\t\t\tappendPQExpBufferStr(&query, \") to (\");",
          "content_same": false
        },
        {
          "line": 3993,
          "old_api": "printfPQExpBuffer",
          "new_api": "appendPQExpBuffer",
          "old_text": "printfPQExpBuffer(&query,\n\t\t\t\t\t\t\t  \"create%s table pgbench_accounts_%d\\n\"\n\t\t\t\t\t\t\t  \"  partition of pgbench_accounts\\n\"\n\t\t\t\t\t\t\t  \"  for values with (modulus %d, remainder %d)\",\n\t\t\t\t\t\t\t  unlogged_tables ? \" unlogged\" : \"\", p,\n\t\t\t\t\t\t\t  partitions, p - 1)",
          "new_text": "appendPQExpBuffer(&query, INT64_FORMAT, p * part_size + 1)",
          "old_line_content": "\t\t\tprintfPQExpBuffer(&query,",
          "new_line_content": "\t\t\t\tappendPQExpBuffer(&query, INT64_FORMAT, p * part_size + 1);",
          "content_same": false
        },
        {
          "line": 4000,
          "old_api": "Assert",
          "new_api": "printfPQExpBuffer",
          "old_text": "Assert(0)",
          "new_text": "printfPQExpBuffer(&query,\n\t\t\t\t\t\t\t  \"create%s table pgbench_accounts_%d\\n\"\n\t\t\t\t\t\t\t  \"  partition of pgbench_accounts\\n\"\n\t\t\t\t\t\t\t  \"  for values with (modulus %d, remainder %d)\",\n\t\t\t\t\t\t\t  unlogged_tables ? \" unlogged\" : \"\", p,\n\t\t\t\t\t\t\t  partitions, p - 1)",
          "old_line_content": "\t\t\tAssert(0);",
          "new_line_content": "\t\t\tprintfPQExpBuffer(&query,",
          "content_same": false
        },
        {
          "line": 4076,
          "old_api": "printfPQExpBuffer",
          "new_api": "initPQExpBuffer",
          "old_text": "printfPQExpBuffer(&query, \"create%s table %s(%s)\",\n\t\t\t\t\t\t  unlogged_tables ? \" unlogged\" : \"\",\n\t\t\t\t\t\t  ddl->table,\n\t\t\t\t\t\t  (scale >= SCALE_32BIT_THRESHOLD) ? ddl->bigcols : ddl->smcols)",
          "new_text": "initPQExpBuffer(&query)",
          "old_line_content": "\t\tprintfPQExpBuffer(&query, \"create%s table %s(%s)\",",
          "new_line_content": "\tinitPQExpBuffer(&query);",
          "content_same": false
        },
        {
          "line": 4083,
          "old_api": "appendPQExpBuffer",
          "new_api": "printfPQExpBuffer",
          "old_text": "appendPQExpBuffer(&query,\n\t\t\t\t\t\t\t  \" partition by %s (aid)\", PARTITION_METHOD[partition_method])",
          "new_text": "printfPQExpBuffer(&query, \"create%s table %s(%s)\",\n\t\t\t\t\t\t  unlogged_tables ? \" unlogged\" : \"\",\n\t\t\t\t\t\t  ddl->table,\n\t\t\t\t\t\t  (scale >= SCALE_32BIT_THRESHOLD) ? ddl->bigcols : ddl->smcols)",
          "old_line_content": "\t\t\tappendPQExpBuffer(&query,",
          "new_line_content": "\t\tprintfPQExpBuffer(&query, \"create%s table %s(%s)\",",
          "content_same": false
        },
        {
          "line": 4095,
          "old_api": "strlen",
          "new_api": "appendPQExpBuffer",
          "old_text": "strlen(tablespace)",
          "new_text": "appendPQExpBuffer(&query, \" with (fillfactor=%d)\", fillfactor)",
          "old_line_content": "\t\t\tescape_tablespace = PQescapeIdentifier(con, tablespace, strlen(tablespace));",
          "new_line_content": "\t\t\tappendPQExpBuffer(&query, \" with (fillfactor=%d)\", fillfactor);",
          "content_same": false
        },
        {
          "line": 4103,
          "old_api": "termPQExpBuffer",
          "new_api": "appendPQExpBuffer",
          "old_text": "termPQExpBuffer(&query)",
          "new_text": "appendPQExpBuffer(&query, \" tablespace %s\", escape_tablespace)",
          "old_line_content": "\ttermPQExpBuffer(&query);",
          "new_line_content": "\t\t\tappendPQExpBuffer(&query, \" tablespace %s\", escape_tablespace);",
          "content_same": false
        },
        {
          "line": 4179,
          "old_api": "PQresultStatus",
          "new_api": "executeStatement",
          "old_text": "PQresultStatus(res)",
          "new_text": "executeStatement(con, sql.data)",
          "old_line_content": "\tif (PQresultStatus(res) != PGRES_COPY_IN)",
          "new_line_content": "\t\texecuteStatement(con, sql.data);",
          "content_same": false
        },
        {
          "line": 4186,
          "old_api": "pg_time_now",
          "new_api": "PQresultStatus",
          "old_text": "pg_time_now()",
          "new_text": "PQresultStatus(res)",
          "old_line_content": "\tstart = pg_time_now();",
          "new_line_content": "\tif (PQresultStatus(res) != PGRES_COPY_IN)",
          "content_same": false
        },
        {
          "line": 4193,
          "old_api": "printfPQExpBuffer",
          "new_api": "pg_time_now",
          "old_text": "printfPQExpBuffer(&sql,\n\t\t\t\t\t\t  INT64_FORMAT \"\\t\" INT64_FORMAT \"\\t%d\\t\\n\",\n\t\t\t\t\t\t  j, k / naccounts + 1, 0)",
          "new_text": "pg_time_now()",
          "old_line_content": "\t\tprintfPQExpBuffer(&sql,",
          "new_line_content": "\tstart = pg_time_now();",
          "content_same": false
        },
        {
          "line": 4246,
          "old_api": "PQendcopy",
          "new_api": "fputc",
          "old_text": "PQendcopy(con)",
          "new_text": "fputc('\\n', stderr)",
          "old_line_content": "\tif (PQendcopy(con))",
          "new_line_content": "\t\tfputc('\\n', stderr);\t/* Need to move to next line */",
          "content_same": false
        },
        {
          "line": 4248,
          "old_api": "pg_log_fatal",
          "new_api": "PQputline",
          "old_text": "pg_log_fatal(\"PQendcopy failed\")",
          "new_text": "PQputline(con, \"\\\\.\\n\")",
          "old_line_content": "\t\tpg_log_fatal(\"PQendcopy failed\");",
          "new_line_content": "\tif (PQputline(con, \"\\\\.\\n\"))",
          "content_same": false
        },
        {
          "line": 4282,
          "old_api": "printfPQExpBuffer",
          "new_api": "executeStatement",
          "old_text": "printfPQExpBuffer(&sql,\n\t\t\t\t\t  \"insert into pgbench_branches(bid,bbalance) \"\n\t\t\t\t\t  \"select bid, 0 \"\n\t\t\t\t\t  \"from generate_series(1, %d) as bid\", nbranches * scale)",
          "new_text": "executeStatement(con, \"begin\")",
          "old_line_content": "\tprintfPQExpBuffer(&sql,",
          "new_line_content": "\texecuteStatement(con, \"begin\");",
          "content_same": false
        },
        {
          "line": 4301,
          "old_api": "termPQExpBuffer",
          "new_api": "printfPQExpBuffer",
          "old_text": "termPQExpBuffer(&sql)",
          "new_text": "printfPQExpBuffer(&sql,\n\t\t\t\t\t  \"insert into pgbench_accounts(aid,bid,abalance,filler) \"\n\t\t\t\t\t  \"select aid, (aid - 1) / %d + 1, 0, '' \"\n\t\t\t\t\t  \"from generate_series(1, \" INT64_FORMAT \") as aid\",\n\t\t\t\t\t  naccounts, (int64) naccounts * scale)",
          "old_line_content": "\ttermPQExpBuffer(&sql);",
          "new_line_content": "\tprintfPQExpBuffer(&sql,",
          "content_same": false
        },
        {
          "line": 4345,
          "old_api": "PQescapeIdentifier",
          "new_api": "resetPQExpBuffer",
          "old_text": "PQescapeIdentifier(con, index_tablespace,\n\t\t\t\t\t\t\t\t\t\t\t\t   strlen(index_tablespace))",
          "new_text": "resetPQExpBuffer(&query)",
          "old_line_content": "\t\t\tescape_tablespace = PQescapeIdentifier(con, index_tablespace,",
          "new_line_content": "\t\tresetPQExpBuffer(&query);",
          "content_same": false
        },
        {
          "line": 4346,
          "old_api": "strlen",
          "new_api": "appendPQExpBufferStr",
          "old_text": "strlen(index_tablespace)",
          "new_text": "appendPQExpBufferStr(&query, DDLINDEXes[i])",
          "old_line_content": "\t\t\t\t\t\t\t\t\t\t\t\t   strlen(index_tablespace));",
          "new_line_content": "\t\tappendPQExpBufferStr(&query, DDLINDEXes[i]);",
          "content_same": false
        },
        {
          "line": 4354,
          "old_api": "termPQExpBuffer",
          "new_api": "appendPQExpBuffer",
          "old_text": "termPQExpBuffer(&query)",
          "new_text": "appendPQExpBuffer(&query, \" using index tablespace %s\", escape_tablespace)",
          "old_line_content": "\ttermPQExpBuffer(&query);",
          "new_line_content": "\t\t\tappendPQExpBuffer(&query, \" using index tablespace %s\", escape_tablespace);",
          "content_same": false
        },
        {
          "line": 4399,
          "old_api": "pg_log_fatal",
          "new_api": "exit",
          "old_text": "pg_log_fatal(\"unrecognized initialization step \\\"%c\\\"\", *step)",
          "new_text": "exit(1)",
          "old_line_content": "\t\t\tpg_log_fatal(\"unrecognized initialization step \\\"%c\\\"\", *step);",
          "new_line_content": "\t\texit(1);",
          "content_same": false
        },
        {
          "line": 4466,
          "old_api": "exit",
          "new_api": "initCreateFKeys",
          "old_text": "exit(1)",
          "new_text": "initCreateFKeys(con)",
          "old_line_content": "\t\t\t\texit(1);",
          "new_line_content": "\t\t\t\tinitCreateFKeys(con);",
          "content_same": false
        },
        {
          "line": 4471,
          "old_api": "pg_time_now",
          "new_api": "pg_log_fatal",
          "old_text": "pg_time_now()",
          "new_text": "pg_log_fatal(\"unrecognized initialization step \\\"%c\\\"\", *step)",
          "old_line_content": "\t\t\tdouble\t\telapsed_sec = PG_TIME_GET_DOUBLE(pg_time_now() - start);",
          "new_line_content": "\t\t\t\tpg_log_fatal(\"unrecognized initialization step \\\"%c\\\"\", *step);",
          "content_same": false
        },
        {
          "line": 4478,
          "old_api": "appendPQExpBuffer",
          "new_api": "pg_time_now",
          "old_text": "appendPQExpBuffer(&stats, \"%s %.2f s\", op, elapsed_sec)",
          "new_text": "pg_time_now()",
          "old_line_content": "\t\t\tappendPQExpBuffer(&stats, \"%s %.2f s\", op, elapsed_sec);",
          "new_line_content": "\t\t\tdouble\t\telapsed_sec = PG_TIME_GET_DOUBLE(pg_time_now() - start);",
          "content_same": false
        },
        {
          "line": 4485,
          "old_api": "ResetCancelConn",
          "new_api": "appendPQExpBuffer",
          "old_text": "ResetCancelConn()",
          "new_text": "appendPQExpBuffer(&stats, \"%s %.2f s\", op, elapsed_sec)",
          "old_line_content": "\tResetCancelConn();",
          "new_line_content": "\t\t\tappendPQExpBuffer(&stats, \"%s %.2f s\", op, elapsed_sec);",
          "content_same": false
        },
        {
          "line": 4510,
          "old_api": "strcmp",
          "new_api": "PQexec",
          "old_text": "strcmp(sqlState, ERRCODE_UNDEFINED_TABLE)",
          "new_text": "PQexec(con, \"select count(*) from pgbench_branches\")",
          "old_line_content": "\t\tif (sqlState && strcmp(sqlState, ERRCODE_UNDEFINED_TABLE) == 0)",
          "new_line_content": "\tres = PQexec(con, \"select count(*) from pgbench_branches\");",
          "content_same": false
        },
        {
          "line": 4511,
          "old_api": "pg_log_info",
          "new_api": "PQresultStatus",
          "old_text": "pg_log_info(\"Perhaps you need to do initialization (\\\"pgbench -i\\\") in database \\\"%s\\\"\",\n\t\t\t\t\t\tPQdb(con))",
          "new_text": "PQresultStatus(res)",
          "old_line_content": "\t\t\tpg_log_info(\"Perhaps you need to do initialization (\\\"pgbench -i\\\") in database \\\"%s\\\"\",",
          "new_line_content": "\tif (PQresultStatus(res) != PGRES_TUPLES_OK)",
          "content_same": false
        },
        {
          "line": 4519,
          "old_api": "pg_log_fatal",
          "new_api": "PQdb",
          "old_text": "pg_log_fatal(\"invalid count(*) from pgbench_branches: \\\"%s\\\"\",\n\t\t\t\t\t PQgetvalue(res, 0, 0))",
          "new_text": "PQdb(con)",
          "old_line_content": "\t\tpg_log_fatal(\"invalid count(*) from pgbench_branches: \\\"%s\\\"\",",
          "new_line_content": "\t\t\t\t\t\tPQdb(con));",
          "content_same": false
        },
        {
          "line": 4523,
          "old_api": "PQclear",
          "new_api": "PQgetvalue",
          "old_text": "PQclear(res)",
          "new_text": "PQgetvalue(res, 0, 0)",
          "old_line_content": "\tPQclear(res);",
          "new_line_content": "\tscale = atoi(PQgetvalue(res, 0, 0));",
          "content_same": false
        },
        {
          "line": 4527,
          "old_api": "pg_log_warning",
          "new_api": "PQgetvalue",
          "old_text": "pg_log_warning(\"scale option ignored, using count from pgbench_branches table (%d)\",\n\t\t\t\t\t   scale)",
          "new_text": "PQgetvalue(res, 0, 0)",
          "old_line_content": "\t\tpg_log_warning(\"scale option ignored, using count from pgbench_branches table (%d)\",",
          "new_line_content": "\t\t\t\t\t PQgetvalue(res, 0, 0));",
          "content_same": false
        },
        {
          "line": 4570,
          "old_api": "PQdb",
          "new_api": "PQntuples",
          "old_text": "PQdb(con)",
          "new_text": "PQntuples(res)",
          "old_line_content": "\t\tpg_log_info(\"Perhaps you need to do initialization (\\\"pgbench -i\\\") in database \\\"%s\\\".\", PQdb(con));",
          "new_line_content": "\telse if (PQntuples(res) == 0)",
          "content_same": false
        },
        {
          "line": 4576,
          "old_api": "PQgetisnull",
          "new_api": "pg_log_fatal",
          "old_text": "PQgetisnull(res, 0, 1)",
          "new_text": "pg_log_fatal(\"no pgbench_accounts table found in search_path\")",
          "old_line_content": "\t\tif (PQgetisnull(res, 0, 1))",
          "new_line_content": "\t\tpg_log_fatal(\"no pgbench_accounts table found in search_path\");",
          "content_same": false
        },
        {
          "line": 4583,
          "old_api": "Assert",
          "new_api": "PQgetisnull",
          "old_text": "Assert(ps != NULL)",
          "new_text": "PQgetisnull(res, 0, 1)",
          "old_line_content": "\t\t\tAssert(ps != NULL);",
          "new_line_content": "\t\tif (PQgetisnull(res, 0, 1))",
          "content_same": false
        },
        {
          "line": 4587,
          "old_api": "strcmp",
          "new_api": "PQgetvalue",
          "old_text": "strcmp(ps, \"h\")",
          "new_text": "PQgetvalue(res, 0, 1)",
          "old_line_content": "\t\t\telse if (strcmp(ps, \"h\") == 0)",
          "new_line_content": "\t\t\tchar\t   *ps = PQgetvalue(res, 0, 1);",
          "content_same": false
        },
        {
          "line": 4592,
          "old_api": "pg_log_fatal",
          "new_api": "strcmp",
          "old_text": "pg_log_fatal(\"unexpected partition method: \\\"%s\\\"\", ps)",
          "new_text": "strcmp(ps, \"r\")",
          "old_line_content": "\t\t\t\tpg_log_fatal(\"unexpected partition method: \\\"%s\\\"\", ps);",
          "new_line_content": "\t\t\tif (strcmp(ps, \"r\") == 0)",
          "content_same": false
        },
        {
          "line": 4600,
          "old_api": "PQclear",
          "new_api": "exit",
          "old_text": "PQclear(res)",
          "new_text": "exit(1)",
          "old_line_content": "\tPQclear(res);",
          "new_line_content": "\t\t\t\texit(1);",
          "content_same": false
        },
        {
          "line": 4622,
          "old_api": "parseVariable",
          "new_api": "pg_strdup",
          "old_text": "parseVariable(p, &eaten)",
          "new_text": "pg_strdup(cmd->lines.data)",
          "old_line_content": "\t\tname = parseVariable(p, &eaten);",
          "new_line_content": "\tp = sql = pg_strdup(cmd->lines.data);",
          "content_same": false
        },
        {
          "line": 4645,
          "old_api": "replaceVariable",
          "new_api": "pg_log_error",
          "old_text": "replaceVariable(&sql, p, eaten, var)",
          "new_text": "pg_log_error(\"statement has too many arguments (maximum is %d): %s\",\n\t\t\t\t\t\t MAX_ARGS - 1, cmd->lines.data)",
          "old_line_content": "\t\tp = replaceVariable(&sql, p, eaten, var);",
          "new_line_content": "\t\t\tpg_log_error(\"statement has too many arguments (maximum is %d): %s\",",
          "content_same": false
        },
        {
          "line": 4651,
          "old_api": "Assert",
          "new_api": "sprintf",
          "old_text": "Assert(cmd->argv[0] == NULL)",
          "new_text": "sprintf(var, \"$%d\", cmd->argc)",
          "old_line_content": "\tAssert(cmd->argv[0] == NULL);",
          "new_line_content": "\t\tsprintf(var, \"$%d\", cmd->argc);",
          "content_same": false
        },
        {
          "line": 4750,
          "old_api": "initPQExpBuffer",
          "new_api": "skip_sql_comments",
          "old_text": "initPQExpBuffer(&my_command->lines)",
          "new_text": "skip_sql_comments(buf->data)",
          "old_line_content": "\tinitPQExpBuffer(&my_command->lines);",
          "new_line_content": "\tchar\t   *p = skip_sql_comments(buf->data);",
          "content_same": false
        },
        {
          "line": 4756,
          "old_api": "memset",
          "new_api": "pg_malloc",
          "old_text": "memset(my_command->argv, 0, sizeof(my_command->argv))",
          "new_text": "pg_malloc(sizeof(Command))",
          "old_line_content": "\tmemset(my_command->argv, 0, sizeof(my_command->argv));",
          "new_line_content": "\tmy_command = (Command *) pg_malloc(sizeof(Command));",
          "content_same": false
        },
        {
          "line": 4839,
          "old_api": "expr_lex_one_word",
          "new_api": "initPQExpBuffer",
          "old_text": "expr_lex_one_word(sstate, &word_buf, &word_offset)",
          "new_text": "initPQExpBuffer(&word_buf)",
          "old_line_content": "\tif (!expr_lex_one_word(sstate, &word_buf, &word_offset))",
          "new_line_content": "\tinitPQExpBuffer(&word_buf);",
          "content_same": false
        },
        {
          "line": 4846,
          "old_api": "pg_malloc0",
          "new_api": "expr_lex_one_word",
          "old_text": "pg_malloc0(sizeof(Command))",
          "new_text": "expr_lex_one_word(sstate, &word_buf, &word_offset)",
          "old_line_content": "\tmy_command = (Command *) pg_malloc0(sizeof(Command));",
          "new_line_content": "\tif (!expr_lex_one_word(sstate, &word_buf, &word_offset))",
          "content_same": false
        },
        {
          "line": 4892,
          "old_api": "expr_scanner_get_substring",
          "new_api": "exit",
          "old_text": "expr_scanner_get_substring(sstate,\n\t\t\t\t\t\t\t\t\t   start_offset,\n\t\t\t\t\t\t\t\t\t   expr_scanner_offset(sstate),\n\t\t\t\t\t\t\t\t\t   true)",
          "new_text": "exit(1)",
          "old_line_content": "\t\t\texpr_scanner_get_substring(sstate,",
          "new_line_content": "\t\t\texit(1);",
          "content_same": false
        },
        {
          "line": 4899,
          "old_api": "termPQExpBuffer",
          "new_api": "expr_scanner_get_substring",
          "old_text": "termPQExpBuffer(&word_buf)",
          "new_text": "expr_scanner_get_substring(sstate,\n\t\t\t\t\t\t\t\t\t   start_offset,\n\t\t\t\t\t\t\t\t\t   expr_scanner_offset(sstate),\n\t\t\t\t\t\t\t\t\t   true)",
          "old_line_content": "\t\ttermPQExpBuffer(&word_buf);",
          "new_line_content": "\t\t\texpr_scanner_get_substring(sstate,",
          "content_same": false
        },
        {
          "line": 4912,
          "old_api": "syntax_error",
          "new_api": "expr_lex_one_word",
          "old_text": "syntax_error(source, lineno, my_command->first_line, my_command->argv[0],\n\t\t\t\t\t\t \"too many arguments\", NULL, -1)",
          "new_text": "expr_lex_one_word(sstate, &word_buf, &word_offset)",
          "old_line_content": "\t\t\tsyntax_error(source, lineno, my_command->first_line, my_command->argv[0],",
          "new_line_content": "\twhile (expr_lex_one_word(sstate, &word_buf, &word_offset))",
          "content_same": false
        },
        {
          "line": 5067,
          "old_api": "ConditionError",
          "new_api": "conditional_stack_empty",
          "old_text": "ConditionError(ps.desc, i + 1, \"\\\\else without matching \\\\if\")",
          "new_text": "conditional_stack_empty(cs)",
          "old_line_content": "\t\t\t\t\t\tConditionError(ps.desc, i + 1, \"\\\\else without matching \\\\if\");",
          "new_line_content": "\t\t\t\t\tif (conditional_stack_empty(cs))",
          "content_same": false
        },
        {
          "line": 5068,
          "old_api": "conditional_stack_peek",
          "new_api": "ConditionError",
          "old_text": "conditional_stack_peek(cs)",
          "new_text": "ConditionError(ps.desc, i + 1, \"\\\\elif without matching \\\\if\")",
          "old_line_content": "\t\t\t\t\tif (conditional_stack_peek(cs) == IFSTATE_ELSE_FALSE)",
          "new_line_content": "\t\t\t\t\t\tConditionError(ps.desc, i + 1, \"\\\\elif without matching \\\\if\");",
          "content_same": false
        },
        {
          "line": 5069,
          "old_api": "ConditionError",
          "new_api": "conditional_stack_peek",
          "old_text": "ConditionError(ps.desc, i + 1, \"\\\\else after \\\\else\")",
          "new_text": "conditional_stack_peek(cs)",
          "old_line_content": "\t\t\t\t\t\tConditionError(ps.desc, i + 1, \"\\\\else after \\\\else\");",
          "new_line_content": "\t\t\t\t\tif (conditional_stack_peek(cs) == IFSTATE_ELSE_FALSE)",
          "content_same": false
        },
        {
          "line": 5070,
          "old_api": "conditional_stack_poke",
          "new_api": "ConditionError",
          "old_text": "conditional_stack_poke(cs, IFSTATE_ELSE_FALSE)",
          "new_text": "ConditionError(ps.desc, i + 1, \"\\\\elif after \\\\else\")",
          "old_line_content": "\t\t\t\t\tconditional_stack_poke(cs, IFSTATE_ELSE_FALSE);",
          "new_line_content": "\t\t\t\t\t\tConditionError(ps.desc, i + 1, \"\\\\elif after \\\\else\");",
          "content_same": false
        },
        {
          "line": 5073,
          "old_api": "conditional_stack_pop",
          "new_api": "conditional_stack_empty",
          "old_text": "conditional_stack_pop(cs)",
          "new_text": "conditional_stack_empty(cs)",
          "old_line_content": "\t\t\t\t\tif (!conditional_stack_pop(cs))",
          "new_line_content": "\t\t\t\t\tif (conditional_stack_empty(cs))",
          "content_same": false
        },
        {
          "line": 5248,
          "old_api": "pg_realloc",
          "new_api": "fread",
          "old_text": "pg_realloc(buf, buflen)",
          "new_text": "fread(buf + used, 1, BUFSIZ, fd)",
          "old_line_content": "\t\tbuf = (char *) pg_realloc(buf, buflen);",
          "new_line_content": "\t\tnread = fread(buf + used, 1, BUFSIZ, fd);",
          "content_same": false
        },
        {
          "line": 5280,
          "old_api": "pg_log_fatal",
          "new_api": "exit",
          "old_text": "pg_log_fatal(\"could not read file \\\"%s\\\": %m\", filename)",
          "new_text": "exit(1)",
          "old_line_content": "\t\tpg_log_fatal(\"could not read file \\\"%s\\\": %m\", filename);",
          "new_line_content": "\t\texit(1);",
          "content_same": false
        },
        {
          "line": 5285,
          "old_api": "fclose",
          "new_api": "ferror",
          "old_text": "fclose(fd)",
          "new_text": "ferror(fd)",
          "old_line_content": "\t\tfclose(fd);",
          "new_line_content": "\tif (ferror(fd))",
          "content_same": false
        },
        {
          "line": 5287,
          "old_api": "ParseScript",
          "new_api": "pg_log_fatal",
          "old_text": "ParseScript(buf, filename, weight)",
          "new_text": "pg_log_fatal(\"could not read file \\\"%s\\\": %m\", filename)",
          "old_line_content": "\tParseScript(buf, filename, weight);",
          "new_line_content": "\t\tpg_log_fatal(\"could not read file \\\"%s\\\": %m\", filename);",
          "content_same": false
        },
        {
          "line": 5296,
          "old_api": "ParseScript",
          "new_api": "free",
          "old_text": "ParseScript(bi->script, bi->desc, weight)",
          "new_text": "free(buf)",
          "old_line_content": "\tParseScript(bi->script, bi->desc, weight);",
          "new_line_content": "\tfree(buf);",
          "content_same": false
        },
        {
          "line": 5361,
          "old_api": "pg_malloc",
          "new_api": "strrchr",
          "old_text": "pg_malloc(namelen + 1)",
          "new_text": "strrchr(option, WSEP)",
          "old_line_content": "\t\t*script = pg_malloc(namelen + 1);",
          "new_line_content": "\tif ((sep = strrchr(option, WSEP)))",
          "content_same": false
        },
        {
          "line": 5377,
          "old_api": "exit",
          "new_api": "pg_log_fatal",
          "old_text": "exit(1)",
          "new_text": "pg_log_fatal(\"invalid weight specification: %s\", sep)",
          "old_line_content": "\t\t\texit(1);",
          "new_line_content": "\t\t\tpg_log_fatal(\"invalid weight specification: %s\", sep);",
          "content_same": false
        },
        {
          "line": 5403,
          "old_api": "exit",
          "new_api": "pg_log_fatal",
          "old_text": "exit(1)",
          "new_text": "pg_log_fatal(\"empty command list for script \\\"%s\\\"\", script.desc)",
          "old_line_content": "\t\texit(1);",
          "new_line_content": "\t\tpg_log_fatal(\"empty command list for script \\\"%s\\\"\", script.desc);",
          "content_same": false
        },
        {
          "line": 5706,
          "old_api": "pg_log_error",
          "new_api": "pg_time_now",
          "old_text": "pg_log_error(\"could not generate random seed\")",
          "new_text": "pg_time_now()",
          "old_line_content": "\t\t\tpg_log_error(\"could not generate random seed\");",
          "new_line_content": "\t\tiseed = pg_time_now();",
          "content_same": false
        },
        {
          "line": 5836,
          "old_api": "strcmp",
          "new_api": "pg_time_now",
          "old_text": "strcmp(argv[1], \"-?\")",
          "new_text": "pg_time_now()",
          "old_line_content": "\t\tif (strcmp(argv[1], \"--help\") == 0 || strcmp(argv[1], \"-?\") == 0)",
          "new_line_content": "\tepoch_shift = tv.tv_sec * INT64CONST(1000000) + tv.tv_usec - pg_time_now();",
          "content_same": false
        },
        {
          "line": 5838,
          "old_api": "usage",
          "new_api": "pg_logging_init",
          "old_text": "usage()",
          "new_text": "pg_logging_init(argv[0])",
          "old_line_content": "\t\t\tusage();",
          "new_line_content": "\tpg_logging_init(argv[0]);",
          "content_same": false
        },
        {
          "line": 5839,
          "old_api": "exit",
          "new_api": "get_progname",
          "old_text": "exit(0)",
          "new_text": "get_progname(argv[0])",
          "old_line_content": "\t\t\texit(0);",
          "new_line_content": "\tprogname = get_progname(argv[0]);",
          "content_same": false
        },
        {
          "line": 5843,
          "old_api": "puts",
          "new_api": "strcmp",
          "old_text": "puts(\"pgbench (PostgreSQL) \" PG_VERSION)",
          "new_text": "strcmp(argv[1], \"-?\")",
          "old_line_content": "\t\t\tputs(\"pgbench (PostgreSQL) \" PG_VERSION);",
          "new_line_content": "\t\tif (strcmp(argv[1], \"--help\") == 0 || strcmp(argv[1], \"-?\") == 0)",
          "content_same": false
        },
        {
          "line": 5848,
          "old_api": "pg_malloc0",
          "new_api": "strcmp",
          "old_text": "pg_malloc0(sizeof(CState))",
          "new_text": "strcmp(argv[1], \"-V\")",
          "old_line_content": "\tstate = (CState *) pg_malloc0(sizeof(CState));",
          "new_line_content": "\t\tif (strcmp(argv[1], \"--version\") == 0 || strcmp(argv[1], \"-V\") == 0)",
          "content_same": false
        },
        {
          "line": 5851,
          "old_api": "getenv",
          "new_api": "exit",
          "old_text": "getenv(\"PGBENCH_RANDOM_SEED\")",
          "new_text": "exit(0)",
          "old_line_content": "\tif (!set_random_seed(getenv(\"PGBENCH_RANDOM_SEED\")))",
          "new_line_content": "\t\t\texit(0);",
          "content_same": false
        },
        {
          "line": 5891,
          "old_api": "option_parse_int",
          "new_api": "pg_strdup",
          "old_text": "option_parse_int(optarg, \"-c/--clients\", 1, INT_MAX,\n\t\t\t\t\t\t\t\t\t  &nclients)",
          "new_text": "pg_strdup(optarg)",
          "old_line_content": "\t\t\t\tif (!option_parse_int(optarg, \"-c/--clients\", 1, INT_MAX,",
          "new_line_content": "\t\t\t\tpgport = pg_strdup(optarg);",
          "content_same": false
        },
        {
          "line": 5894,
          "old_api": "exit",
          "new_api": "pg_logging_increase_verbosity",
          "old_text": "exit(1)",
          "new_text": "pg_logging_increase_verbosity()",
          "old_line_content": "\t\t\t\t\texit(1);",
          "new_line_content": "\t\t\t\tpg_logging_increase_verbosity();",
          "content_same": false
        },
        {
          "line": 5898,
          "old_api": "getrlimit",
          "new_api": "option_parse_int",
          "old_text": "getrlimit(RLIMIT_NOFILE, &rlim)",
          "new_text": "option_parse_int(optarg, \"-c/--clients\", 1, INT_MAX,\n\t\t\t\t\t\t\t\t\t  &nclients)",
          "old_line_content": "\t\t\t\tif (getrlimit(RLIMIT_NOFILE, &rlim) == -1)",
          "new_line_content": "\t\t\t\tif (!option_parse_int(optarg, \"-c/--clients\", 1, INT_MAX,",
          "content_same": false
        },
        {
          "line": 5910,
          "old_api": "pg_log_info",
          "new_api": "pg_log_fatal",
          "old_text": "pg_log_info(\"Reduce number of clients, or use limit/ulimit to increase the system limit.\")",
          "new_text": "pg_log_fatal(\"getrlimit failed: %m\")",
          "old_line_content": "\t\t\t\t\tpg_log_info(\"Reduce number of clients, or use limit/ulimit to increase the system limit.\");",
          "new_line_content": "\t\t\t\t\tpg_log_fatal(\"getrlimit failed: %m\");",
          "content_same": false
        },
        {
          "line": 5917,
          "old_api": "option_parse_int",
          "new_api": "pg_log_info",
          "old_text": "option_parse_int(optarg, \"-j/--jobs\", 1, INT_MAX,\n\t\t\t\t\t\t\t\t\t  &nthreads)",
          "new_text": "pg_log_info(\"Reduce number of clients, or use limit/ulimit to increase the system limit.\")",
          "old_line_content": "\t\t\t\tif (!option_parse_int(optarg, \"-j/--jobs\", 1, INT_MAX,",
          "new_line_content": "\t\t\t\t\tpg_log_info(\"Reduce number of clients, or use limit/ulimit to increase the system limit.\");",
          "content_same": false
        },
        {
          "line": 6006,
          "old_api": "putVariable",
          "new_api": "strchr",
          "old_text": "putVariable(&state[0], \"option\", optarg, p)",
          "new_text": "strchr(optarg, '=')",
          "old_line_content": "\t\t\t\t\tif (!putVariable(&state[0], \"option\", optarg, p))",
          "new_line_content": "\t\t\t\t\tif ((p = strchr(optarg, '=')) == NULL || p == optarg || *(p + 1) == '\\0')",
          "content_same": false
        },
        {
          "line": 6019,
          "old_api": "strcmp",
          "new_api": "option_parse_int",
          "old_text": "strcmp(optarg, QUERYMODE[querymode])",
          "new_text": "option_parse_int(optarg, \"-F/--fillfactor\", 10, 100,\n\t\t\t\t\t\t\t\t\t  &fillfactor)",
          "old_line_content": "\t\t\t\t\tif (strcmp(optarg, QUERYMODE[querymode]) == 0)",
          "new_line_content": "\t\t\t\tif (!option_parse_int(optarg, \"-F/--fillfactor\", 10, 100,",
          "content_same": false
        },
        {
          "line": 6036,
          "old_api": "atof",
          "new_api": "option_parse_int",
          "old_text": "atof(optarg)",
          "new_text": "option_parse_int(optarg, \"-P/--progress\", 1, INT_MAX,\n\t\t\t\t\t\t\t\t\t  &progress)",
          "old_line_content": "\t\t\t\t\tdouble\t\tthrottle_value = atof(optarg);",
          "new_line_content": "\t\t\t\tif (!option_parse_int(optarg, \"-P/--progress\", 1, INT_MAX,",
          "content_same": false
        },
        {
          "line": 6043,
          "old_api": "exit",
          "new_api": "atof",
          "old_text": "exit(1)",
          "new_text": "atof(optarg)",
          "old_line_content": "\t\t\t\t\t\texit(1);",
          "new_line_content": "\t\t\t\t\tdouble\t\tthrottle_value = atof(optarg);",
          "content_same": false
        },
        {
          "line": 6079,
          "old_api": "pg_log_fatal",
          "new_api": "pg_strdup",
          "old_text": "pg_log_fatal(\"invalid sampling rate: \\\"%s\\\"\", optarg)",
          "new_text": "pg_strdup(optarg)",
          "old_line_content": "\t\t\t\t\tpg_log_fatal(\"invalid sampling rate: \\\"%s\\\"\", optarg);",
          "new_line_content": "\t\t\t\tindex_tablespace = pg_strdup(optarg);",
          "content_same": false
        },
        {
          "line": 6113,
          "old_api": "fprintf",
          "new_api": "exit",
          "old_text": "fprintf(stderr, \"-- %s: %s\\n%s\\n\", s->name, s->desc, s->script)",
          "new_text": "exit(1)",
          "old_line_content": "\t\t\t\t\tfprintf(stderr, \"-- %s: %s\\n%s\\n\", s->name, s->desc, s->script);",
          "new_line_content": "\t\t\t\t\texit(1);",
          "content_same": false
        },
        {
          "line": 6138,
          "old_api": "exit",
          "new_api": "pg_log_fatal",
          "old_text": "exit(1)",
          "new_text": "pg_log_fatal(\"invalid partition method, expecting \\\"range\\\" or \\\"hash\\\", got: \\\"%s\\\"\",\n\t\t\t\t\t\t\t\t optarg)",
          "old_line_content": "\t\t\t\texit(1);",
          "new_line_content": "\t\t\t\t\tpg_log_fatal(\"invalid partition method, expecting \\\"range\\\" or \\\"hash\\\", got: \\\"%s\\\"\",",
          "content_same": false
        },
        {
          "line": 6205,
          "old_api": "_",
          "new_api": "get_user_name_or_exit",
          "old_text": "_(\"Try \\\"%s --help\\\" for more information.\\n\")",
          "new_text": "get_user_name_or_exit(progname)",
          "old_line_content": "\t\tfprintf(stderr, _(\"Try \\\"%s --help\\\" for more information.\\n\"), progname);",
          "new_line_content": "\t\t\tdbName = get_user_name_or_exit(progname);",
          "content_same": false
        },
        {
          "line": 6213,
          "old_api": "pg_log_fatal",
          "new_api": "exit",
          "old_text": "pg_log_fatal(\"some of the specified options cannot be used in initialization (-i) mode\")",
          "new_text": "exit(1)",
          "old_line_content": "\t\t\tpg_log_fatal(\"some of the specified options cannot be used in initialization (-i) mode\");",
          "new_line_content": "\t\texit(1);",
          "content_same": false
        },
        {
          "line": 6220,
          "old_api": "exit",
          "new_api": "pg_log_fatal",
          "old_text": "exit(1)",
          "new_text": "pg_log_fatal(\"some of the specified options cannot be used in initialization (-i) mode\")",
          "old_line_content": "\t\t\texit(1);",
          "new_line_content": "\t\t\tpg_log_fatal(\"some of the specified options cannot be used in initialization (-i) mode\");",
          "content_same": false
        },
        {
          "line": 6235,
          "old_api": "strchr",
          "new_api": "pg_strdup",
          "old_text": "strchr(initialize_steps, 'v')",
          "new_text": "pg_strdup(DEFAULT_INIT_STEPS)",
          "old_line_content": "\t\t\twhile ((p = strchr(initialize_steps, 'v')) != NULL)",
          "new_line_content": "\t\t\tinitialize_steps = pg_strdup(DEFAULT_INIT_STEPS);",
          "content_same": false
        },
        {
          "line": 6252,
          "old_api": "exit",
          "new_api": "pg_realloc",
          "old_text": "exit(0)",
          "new_text": "pg_realloc(initialize_steps,\n\t\t\t\t\t\t\t   strlen(initialize_steps) + 2)",
          "old_line_content": "\t\texit(0);",
          "new_line_content": "\t\t\t\t\tpg_realloc(initialize_steps,",
          "content_same": false
        },
        {
          "line": 6258,
          "old_api": "pg_log_fatal",
          "new_api": "runInitSteps",
          "old_text": "pg_log_fatal(\"some of the specified options cannot be used in benchmarking mode\")",
          "new_text": "runInitSteps(initialize_steps)",
          "old_line_content": "\t\t\tpg_log_fatal(\"some of the specified options cannot be used in benchmarking mode\");",
          "new_line_content": "\t\trunInitSteps(initialize_steps);",
          "content_same": false
        },
        {
          "line": 6290,
          "old_api": "exit",
          "new_api": "pg_log_fatal",
          "old_text": "exit(1)",
          "new_text": "pg_log_fatal(\"log sampling (--sampling-rate) and aggregation (--aggregate-interval) cannot be used at the same time\")",
          "old_line_content": "\t\texit(1);",
          "new_line_content": "\t\tpg_log_fatal(\"log sampling (--sampling-rate) and aggregation (--aggregate-interval) cannot be used at the same time\");",
          "content_same": false
        },
        {
          "line": 6296,
          "old_api": "exit",
          "new_api": "pg_log_fatal",
          "old_text": "exit(1)",
          "new_text": "pg_log_fatal(\"log aggregation is allowed only when actually logging transactions\")",
          "old_line_content": "\t\texit(1);",
          "new_line_content": "\t\tpg_log_fatal(\"log aggregation is allowed only when actually logging transactions\");",
          "content_same": false
        },
        {
          "line": 6302,
          "old_api": "exit",
          "new_api": "pg_log_fatal",
          "old_text": "exit(1)",
          "new_text": "pg_log_fatal(\"log file prefix (--log-prefix) is allowed only when logging transactions (-l)\")",
          "old_line_content": "\t\texit(1);",
          "new_line_content": "\t\tpg_log_fatal(\"log file prefix (--log-prefix) is allowed only when logging transactions (-l)\");",
          "content_same": false
        },
        {
          "line": 6308,
          "old_api": "exit",
          "new_api": "pg_log_fatal",
          "old_text": "exit(1)",
          "new_text": "pg_log_fatal(\"number of seconds for aggregation (%d) must not be higher than test duration (%d)\", agg_interval, duration)",
          "old_line_content": "\t\texit(1);",
          "new_line_content": "\t\tpg_log_fatal(\"number of seconds for aggregation (%d) must not be higher than test duration (%d)\", agg_interval, duration);",
          "content_same": false
        },
        {
          "line": 6314,
          "old_api": "exit",
          "new_api": "pg_log_fatal",
          "old_text": "exit(1)",
          "new_text": "pg_log_fatal(\"duration (%d) must be a multiple of aggregation interval (%d)\", duration, agg_interval)",
          "old_line_content": "\t\texit(1);",
          "new_line_content": "\t\tpg_log_fatal(\"duration (%d) must be a multiple of aggregation interval (%d)\", duration, agg_interval);",
          "content_same": false
        },
        {
          "line": 6321,
          "old_api": "getpid",
          "new_api": "exit",
          "old_text": "getpid()",
          "new_text": "exit(1)",
          "old_line_content": "\tmain_pid = (int) getpid();",
          "new_line_content": "\t\texit(1);",
          "content_same": false
        },
        {
          "line": 6364,
          "old_api": "exit",
          "new_api": "conditional_stack_create",
          "old_text": "exit(1)",
          "new_text": "conditional_stack_create()",
          "old_line_content": "\t\texit(1);",
          "new_line_content": "\t\tstate[i].cstack = conditional_stack_create();",
          "content_same": false
        },
        {
          "line": 6369,
          "old_api": "pg_log_debug",
          "new_api": "doConnect",
          "old_text": "pg_log_debug(\"pghost: %s pgport: %s nclients: %d %s: %d dbName: %s\",\n\t\t\t\t PQhost(con), PQport(con), nclients,\n\t\t\t\t duration <= 0 ? \"nxacts\" : \"duration\",\n\t\t\t\t duration <= 0 ? nxacts : duration, PQdb(con))",
          "new_text": "doConnect()",
          "old_line_content": "\tpg_log_debug(\"pghost: %s pgport: %s nclients: %d %s: %d dbName: %s\",",
          "new_line_content": "\tcon = doConnect();",
          "content_same": false
        },
        {
          "line": 6405,
          "old_api": "pg_jrand48",
          "new_api": "exit",
          "old_text": "pg_jrand48(base_random_sequence.xseed)",
          "new_text": "exit(1)",
          "old_line_content": "\t\t((uint64) pg_jrand48(base_random_sequence.xseed) & 0xFFFFFFFF) |",
          "new_line_content": "\t\t\t\texit(1);",
          "content_same": false
        },
        {
          "line": 6409,
          "old_api": "putVariableInt",
          "new_api": "lookupVariable",
          "old_text": "putVariableInt(&state[i], \"startup\", \"default_seed\", (int64) seed)",
          "new_text": "lookupVariable(&state[0], \"default_seed\")",
          "old_line_content": "\t\t\tif (!putVariableInt(&state[i], \"startup\", \"default_seed\", (int64) seed))",
          "new_line_content": "\tif (lookupVariable(&state[0], \"default_seed\") == NULL)",
          "content_same": false
        },
        {
          "line": 6417,
          "old_api": "putVariableInt",
          "new_api": "exit",
          "old_text": "putVariableInt(&state[i], \"startup\", \"random_seed\", random_seed)",
          "new_text": "exit(1)",
          "old_line_content": "\t\t\tif (!putVariableInt(&state[i], \"startup\", \"random_seed\", random_seed))",
          "new_line_content": "\t\t\t\texit(1);",
          "content_same": false
        },
        {
          "line": 6424,
          "old_api": "tryExecuteStatement",
          "new_api": "putVariableInt",
          "old_text": "tryExecuteStatement(con, \"vacuum pgbench_branches\")",
          "new_text": "putVariableInt(&state[i], \"startup\", \"random_seed\", random_seed)",
          "old_line_content": "\t\ttryExecuteStatement(con, \"vacuum pgbench_branches\");",
          "new_line_content": "\t\t\tif (!putVariableInt(&state[i], \"startup\", \"random_seed\", random_seed))",
          "content_same": false
        },
        {
          "line": 6425,
          "old_api": "tryExecuteStatement",
          "new_api": "exit",
          "old_text": "tryExecuteStatement(con, \"vacuum pgbench_tellers\")",
          "new_text": "exit(1)",
          "old_line_content": "\t\ttryExecuteStatement(con, \"vacuum pgbench_tellers\");",
          "new_line_content": "\t\t\t\texit(1);",
          "content_same": false
        },
        {
          "line": 6431,
          "old_api": "fprintf",
          "new_api": "tryExecuteStatement",
          "old_text": "fprintf(stderr, \"starting vacuum pgbench_accounts...\")",
          "new_text": "tryExecuteStatement(con, \"vacuum pgbench_branches\")",
          "old_line_content": "\t\t\tfprintf(stderr, \"starting vacuum pgbench_accounts...\");",
          "new_line_content": "\t\ttryExecuteStatement(con, \"vacuum pgbench_branches\");",
          "content_same": false
        },
        {
          "line": 6433,
          "old_api": "fprintf",
          "new_api": "tryExecuteStatement",
          "old_text": "fprintf(stderr, \"end.\\n\")",
          "new_text": "tryExecuteStatement(con, \"truncate pgbench_history\")",
          "old_line_content": "\t\t\tfprintf(stderr, \"end.\\n\");",
          "new_line_content": "\t\ttryExecuteStatement(con, \"truncate pgbench_history\");",
          "content_same": false
        },
        {
          "line": 6439,
          "old_api": "pg_malloc",
          "new_api": "tryExecuteStatement",
          "old_text": "pg_malloc(sizeof(TState) * nthreads)",
          "new_text": "tryExecuteStatement(con, \"vacuum analyze pgbench_accounts\")",
          "old_line_content": "\tthreads = (TState *) pg_malloc(sizeof(TState) * nthreads);",
          "new_line_content": "\t\t\ttryExecuteStatement(con, \"vacuum analyze pgbench_accounts\");",
          "content_same": false
        },
        {
          "line": 6468,
          "old_api": "setalarm",
          "new_api": "Assert",
          "old_text": "setalarm(duration)",
          "new_text": "Assert(nclients_dealt == nclients)",
          "old_line_content": "\t\tsetalarm(duration);",
          "new_line_content": "\tAssert(nclients_dealt == nclients);",
          "content_same": false
        },
        {
          "line": 6839,
          "old_api": "doLog",
          "new_api": "pg_time_now",
          "old_text": "doLog(thread, state, &aggs, false, 0, 0)",
          "new_text": "pg_time_now()",
          "old_line_content": "\t\t\tdoLog(thread, state, &aggs, false, 0, 0);",
          "new_line_content": "\tthread->conn_duration += pg_time_now() - start;",
          "content_same": false
        },
        {
          "line": 6899,
          "old_api": "exit",
          "new_api": "CreateTimerQueue",
          "old_text": "exit(1)",
          "new_text": "CreateTimerQueue()",
          "old_line_content": "\t\texit(1);",
          "new_line_content": "\tqueue = CreateTimerQueue();",
          "content_same": false
        },
        {
          "line": 7072,
          "old_api": "FD_ISSET",
          "new_api": "select",
          "old_text": "FD_ISSET(fd, &sa->fds)",
          "new_text": "select(sa->maxfd + 1, &sa->fds, NULL, NULL, NULL)",
          "old_line_content": "\treturn (FD_ISSET(fd, &sa->fds) != 0);",
          "new_line_content": "\t\treturn select(sa->maxfd + 1, &sa->fds, NULL, NULL, NULL);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 6144,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"Try \\\"%s --help\\\" for more information.\\n\")",
          "old_line_content": "\tif (num_scripts == 0 && !is_init_mode)",
          "new_line_content": "\t\t\t\tfprintf(stderr, _(\"Try \\\"%s --help\\\" for more information.\\n\"), progname);",
          "content_same": false
        },
        {
          "line": 6145,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "\t{",
          "new_line_content": "\t\t\t\texit(1);",
          "content_same": false
        },
        {
          "line": 4102,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(tablespace)",
          "old_line_content": "",
          "new_line_content": "\t\t\tescape_tablespace = PQescapeIdentifier(con, tablespace, strlen(tablespace));",
          "content_same": false
        },
        {
          "line": 4104,
          "old_api": null,
          "new_api": "PQfreemem",
          "old_text": null,
          "new_text": "PQfreemem(escape_tablespace)",
          "old_line_content": "",
          "new_line_content": "\t\t\tPQfreemem(escape_tablespace);",
          "content_same": false
        },
        {
          "line": 6153,
          "old_api": null,
          "new_api": "findBuiltin",
          "old_text": null,
          "new_text": "findBuiltin(\"tpcb-like\")",
          "old_line_content": "\t{",
          "new_line_content": "\t\tprocess_builtin(findBuiltin(\"tpcb-like\"), 1);",
          "content_same": false
        },
        {
          "line": 4107,
          "old_api": null,
          "new_api": "executeStatement",
          "old_text": null,
          "new_text": "executeStatement(con, query.data)",
          "old_line_content": "}",
          "new_line_content": "\t\texecuteStatement(con, query.data);",
          "content_same": false
        },
        {
          "line": 4110,
          "old_api": null,
          "new_api": "termPQExpBuffer",
          "old_text": null,
          "new_text": "termPQExpBuffer(&query)",
          "old_line_content": " * Truncate away any old data, in one command in case there are foreign keys",
          "new_line_content": "\ttermPQExpBuffer(&query);",
          "content_same": false
        },
        {
          "line": 4113,
          "old_api": null,
          "new_api": "createPartitions",
          "old_text": null,
          "new_text": "createPartitions(con)",
          "old_line_content": "initTruncateTables(PGconn *con)",
          "new_line_content": "\t\tcreatePartitions(con);",
          "content_same": false
        },
        {
          "line": 6165,
          "old_api": null,
          "new_api": "postprocess_sql_command",
          "old_text": null,
          "new_text": "postprocess_sql_command(commands[j])",
          "old_line_content": "\t{",
          "new_line_content": "\t\t\t\tpostprocess_sql_command(commands[j]);",
          "content_same": false
        },
        {
          "line": 4122,
          "old_api": null,
          "new_api": "executeStatement",
          "old_text": null,
          "new_text": "executeStatement(con, \"truncate table \"\n\t\t\t\t\t \"pgbench_accounts, \"\n\t\t\t\t\t \"pgbench_branches, \"\n\t\t\t\t\t \"pgbench_history, \"\n\t\t\t\t\t \"pgbench_tellers\")",
          "old_line_content": "/*",
          "new_line_content": "\texecuteStatement(con, \"truncate table \"",
          "content_same": false
        },
        {
          "line": 6173,
          "old_api": null,
          "new_api": "pg_log_fatal",
          "old_text": null,
          "new_text": "pg_log_fatal(\"total script weight must not be zero\")",
          "old_line_content": "",
          "new_line_content": "\t\tpg_log_fatal(\"total script weight must not be zero\");",
          "content_same": false
        },
        {
          "line": 6174,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "\t/*",
          "new_line_content": "\t\texit(1);",
          "content_same": false
        },
        {
          "line": 4145,
          "old_api": null,
          "new_api": "fileno",
          "old_text": null,
          "new_text": "fileno(stderr)",
          "old_line_content": "\t */",
          "new_line_content": "\tchar\t\teol = isatty(fileno(stderr)) ? '\\r' : '\\n';",
          "content_same": false
        },
        {
          "line": 4147,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr, \"generating data (client-side)...\\n\")",
          "old_line_content": "",
          "new_line_content": "\tfprintf(stderr, \"generating data (client-side)...\\n\");",
          "content_same": false
        },
        {
          "line": 6200,
          "old_api": null,
          "new_api": "getenv",
          "old_text": null,
          "new_text": "getenv(\"PGDATABASE\")",
          "old_line_content": "",
          "new_line_content": "\t\tif ((env = getenv(\"PGDATABASE\")) != NULL && *env != '\\0')",
          "content_same": false
        },
        {
          "line": 4153,
          "old_api": null,
          "new_api": "executeStatement",
          "old_text": null,
          "new_text": "executeStatement(con, \"begin\")",
          "old_line_content": "\t/*",
          "new_line_content": "\texecuteStatement(con, \"begin\");",
          "content_same": false
        },
        {
          "line": 6202,
          "old_api": null,
          "new_api": "getenv",
          "old_text": null,
          "new_text": "getenv(\"PGUSER\")",
          "old_line_content": "\t{",
          "new_line_content": "\t\telse if ((env = getenv(\"PGUSER\")) != NULL && *env != '\\0')",
          "content_same": false
        },
        {
          "line": 4156,
          "old_api": null,
          "new_api": "initTruncateTables",
          "old_text": null,
          "new_text": "initTruncateTables(con)",
          "old_line_content": "\t */",
          "new_line_content": "\tinitTruncateTables(con);",
          "content_same": false
        },
        {
          "line": 4158,
          "old_api": null,
          "new_api": "initPQExpBuffer",
          "old_text": null,
          "new_text": "initPQExpBuffer(&sql)",
          "old_line_content": "\t{",
          "new_line_content": "\tinitPQExpBuffer(&sql);",
          "content_same": false
        },
        {
          "line": 6210,
          "old_api": null,
          "new_api": "pg_log_fatal",
          "old_text": null,
          "new_text": "pg_log_fatal(\"too many command-line arguments (first is \\\"%s\\\")\",\n\t\t\t\t\t argv[optind])",
          "old_line_content": "\t{",
          "new_line_content": "\t\tpg_log_fatal(\"too many command-line arguments (first is \\\"%s\\\")\",",
          "content_same": false
        },
        {
          "line": 6212,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"Try \\\"%s --help\\\" for more information.\\n\")",
          "old_line_content": "\t\t{",
          "new_line_content": "\t\tfprintf(stderr, _(\"Try \\\"%s --help\\\" for more information.\\n\"), progname);",
          "content_same": false
        },
        {
          "line": 4167,
          "old_api": null,
          "new_api": "printfPQExpBuffer",
          "old_text": null,
          "new_text": "printfPQExpBuffer(&sql,\n\t\t\t\t\t\t  \"insert into pgbench_branches(bid,bbalance) values(%d,0)\",\n\t\t\t\t\t\t  i + 1)",
          "old_line_content": "\t{",
          "new_line_content": "\t\tprintfPQExpBuffer(&sql,",
          "content_same": false
        },
        {
          "line": 4170,
          "old_api": null,
          "new_api": "executeStatement",
          "old_text": null,
          "new_text": "executeStatement(con, sql.data)",
          "old_line_content": "\t\t\t\t\t\t  \"insert into pgbench_tellers(tid,bid,tbalance) values (%d,%d,0)\",",
          "new_line_content": "\t\texecuteStatement(con, sql.data);",
          "content_same": false
        },
        {
          "line": 6221,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\texit(1);",
          "content_same": false
        },
        {
          "line": 4176,
          "old_api": null,
          "new_api": "printfPQExpBuffer",
          "old_text": null,
          "new_text": "printfPQExpBuffer(&sql,\n\t\t\t\t\t\t  \"insert into pgbench_tellers(tid,bid,tbalance) values (%d,%d,0)\",\n\t\t\t\t\t\t  i + 1, i / ntellers + 1)",
          "old_line_content": "\t * accounts is big enough to be worth using COPY and tracking runtime",
          "new_line_content": "\t\tprintfPQExpBuffer(&sql,",
          "content_same": false
        },
        {
          "line": 6226,
          "old_api": null,
          "new_api": "pg_log_fatal",
          "old_text": null,
          "new_text": "pg_log_fatal(\"--partition-method requires greater than zero --partitions\")",
          "old_line_content": "",
          "new_line_content": "\t\t\tpg_log_fatal(\"--partition-method requires greater than zero --partitions\");",
          "content_same": false
        },
        {
          "line": 6227,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "\t\tif (initialize_steps == NULL)",
          "new_line_content": "\t\t\texit(1);",
          "content_same": false
        },
        {
          "line": 4185,
          "old_api": null,
          "new_api": "PQexec",
          "old_text": null,
          "new_text": "PQexec(con, \"copy pgbench_accounts from stdin\")",
          "old_line_content": "",
          "new_line_content": "\tres = PQexec(con, \"copy pgbench_accounts from stdin\");",
          "content_same": false
        },
        {
          "line": 4188,
          "old_api": null,
          "new_api": "PQerrorMessage",
          "old_text": null,
          "new_text": "PQerrorMessage(con)",
          "old_line_content": "\tfor (k = 0; k < (int64) naccounts * scale; k++)",
          "new_line_content": "\t\tpg_log_fatal(\"unexpected copy in result: %s\", PQerrorMessage(con));",
          "content_same": false
        },
        {
          "line": 4189,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "\t{",
          "new_line_content": "\t\texit(1);",
          "content_same": false
        },
        {
          "line": 4191,
          "old_api": null,
          "new_api": "PQclear",
          "old_text": null,
          "new_text": "PQclear(res)",
          "old_line_content": "",
          "new_line_content": "\tPQclear(res);",
          "content_same": false
        },
        {
          "line": 4200,
          "old_api": null,
          "new_api": "printfPQExpBuffer",
          "old_text": null,
          "new_text": "printfPQExpBuffer(&sql,\n\t\t\t\t\t\t  INT64_FORMAT \"\\t\" INT64_FORMAT \"\\t%d\\t\\n\",\n\t\t\t\t\t\t  j, k / naccounts + 1, 0)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\tprintfPQExpBuffer(&sql,",
          "content_same": false
        },
        {
          "line": 6249,
          "old_api": null,
          "new_api": "strchr",
          "old_text": null,
          "new_text": "strchr(initialize_steps, 'f')",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tif (strchr(initialize_steps, 'f') == NULL)",
          "content_same": false
        },
        {
          "line": 4203,
          "old_api": null,
          "new_api": "PQputline",
          "old_text": null,
          "new_text": "PQputline(con, sql.data)",
          "old_line_content": "\t\t\tbreak;",
          "new_line_content": "\t\tif (PQputline(con, sql.data))",
          "content_same": false
        },
        {
          "line": 4205,
          "old_api": null,
          "new_api": "pg_log_fatal",
          "old_text": null,
          "new_text": "pg_log_fatal(\"PQputline failed\")",
          "old_line_content": "\t\t/*",
          "new_line_content": "\t\t\tpg_log_fatal(\"PQputline failed\");",
          "content_same": false
        },
        {
          "line": 4206,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "\t\t * If we want to stick with the original logging, print a message each",
          "new_line_content": "\t\t\texit(1);",
          "content_same": false
        },
        {
          "line": 6253,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(initialize_steps)",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\t\t\t\t\t   strlen(initialize_steps) + 2);",
          "content_same": false
        },
        {
          "line": 6254,
          "old_api": null,
          "new_api": "strcat",
          "old_text": null,
          "new_text": "strcat(initialize_steps, \"f\")",
          "old_line_content": "\telse",
          "new_line_content": "\t\t\t\tstrcat(initialize_steps, \"f\");",
          "content_same": false
        },
        {
          "line": 4218,
          "old_api": null,
          "new_api": "pg_time_now",
          "old_text": null,
          "new_text": "pg_time_now()",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tdouble\t\telapsed_sec = PG_TIME_GET_DOUBLE(pg_time_now() - start);",
          "content_same": false
        },
        {
          "line": 4221,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr, INT64_FORMAT \" of \" INT64_FORMAT \" tuples (%d%%) done (elapsed %.2f s, remaining %.2f s)%c\",\n\t\t\t\t\tj, (int64) naccounts * scale,\n\t\t\t\t\t(int) (((int64) j * 100) / (naccounts * (int64) scale)),\n\t\t\t\t\telapsed_sec, remaining_sec, eol)",
          "old_line_content": "\t\t{",
          "new_line_content": "\t\t\tfprintf(stderr, INT64_FORMAT \" of \" INT64_FORMAT \" tuples (%d%%) done (elapsed %.2f s, remaining %.2f s)%c\",",
          "content_same": false
        },
        {
          "line": 6272,
          "old_api": null,
          "new_api": "pg_log_fatal",
          "old_text": null,
          "new_text": "pg_log_fatal(\"specify either a number of transactions (-t) or a duration (-T), not both\")",
          "old_line_content": "",
          "new_line_content": "\t\tpg_log_fatal(\"specify either a number of transactions (-t) or a duration (-T), not both\");",
          "content_same": false
        },
        {
          "line": 6273,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "\t/* --sampling-rate may be used only with -l */",
          "new_line_content": "\t\texit(1);",
          "content_same": false
        },
        {
          "line": 4229,
          "old_api": null,
          "new_api": "pg_time_now",
          "old_text": null,
          "new_text": "pg_time_now()",
          "old_line_content": "\t\t\t\t\t\tj, (int64) naccounts * scale,",
          "new_line_content": "\t\t\tdouble\t\telapsed_sec = PG_TIME_GET_DOUBLE(pg_time_now() - start);",
          "content_same": false
        },
        {
          "line": 4235,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr, INT64_FORMAT \" of \" INT64_FORMAT \" tuples (%d%%) done (elapsed %.2f s, remaining %.2f s)%c\",\n\t\t\t\t\t\tj, (int64) naccounts * scale,\n\t\t\t\t\t\t(int) (((int64) j * 100) / (naccounts * (int64) scale)), elapsed_sec, remaining_sec, eol)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\t\tfprintf(stderr, INT64_FORMAT \" of \" INT64_FORMAT \" tuples (%d%%) done (elapsed %.2f s, remaining %.2f s)%c\",",
          "content_same": false
        },
        {
          "line": 4240,
          "old_api": null,
          "new_api": "ceil",
          "old_text": null,
          "new_text": "ceil(elapsed_sec / LOG_STEP_SECONDS)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\tlog_interval = (int) ceil(elapsed_sec / LOG_STEP_SECONDS);",
          "content_same": false
        },
        {
          "line": 6291,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "\t}",
          "new_line_content": "\t\texit(1);",
          "content_same": false
        },
        {
          "line": 6297,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "\t}",
          "new_line_content": "\t\texit(1);",
          "content_same": false
        },
        {
          "line": 4250,
          "old_api": null,
          "new_api": "pg_log_fatal",
          "old_text": null,
          "new_text": "pg_log_fatal(\"very last PQputline failed\")",
          "old_line_content": "\t}",
          "new_line_content": "\t\tpg_log_fatal(\"very last PQputline failed\");",
          "content_same": false
        },
        {
          "line": 4251,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "",
          "new_line_content": "\t\texit(1);",
          "content_same": false
        },
        {
          "line": 4253,
          "old_api": null,
          "new_api": "PQendcopy",
          "old_text": null,
          "new_text": "PQendcopy(con)",
          "old_line_content": "",
          "new_line_content": "\tif (PQendcopy(con))",
          "content_same": false
        },
        {
          "line": 4255,
          "old_api": null,
          "new_api": "pg_log_fatal",
          "old_text": null,
          "new_text": "pg_log_fatal(\"PQendcopy failed\")",
          "old_line_content": "}",
          "new_line_content": "\t\tpg_log_fatal(\"PQendcopy failed\");",
          "content_same": false
        },
        {
          "line": 4256,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "",
          "new_line_content": "\t\texit(1);",
          "content_same": false
        },
        {
          "line": 6303,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "\t}",
          "new_line_content": "\t\texit(1);",
          "content_same": false
        },
        {
          "line": 4259,
          "old_api": null,
          "new_api": "termPQExpBuffer",
          "old_text": null,
          "new_text": "termPQExpBuffer(&sql)",
          "old_line_content": " *",
          "new_line_content": "\ttermPQExpBuffer(&sql);",
          "content_same": false
        },
        {
          "line": 4261,
          "old_api": null,
          "new_api": "executeStatement",
          "old_text": null,
          "new_text": "executeStatement(con, \"commit\")",
          "old_line_content": " * column defaults to NULL in pgbench_branches and pgbench_tellers,",
          "new_line_content": "\texecuteStatement(con, \"commit\");",
          "content_same": false
        },
        {
          "line": 6309,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "\t}",
          "new_line_content": "\t\texit(1);",
          "content_same": false
        },
        {
          "line": 6315,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "\t}",
          "new_line_content": "\t\texit(1);",
          "content_same": false
        },
        {
          "line": 6320,
          "old_api": null,
          "new_api": "pg_log_fatal",
          "old_text": null,
          "new_text": "pg_log_fatal(\"--progress-timestamp is allowed only under --progress\")",
          "old_line_content": "\t */",
          "new_line_content": "\t\tpg_log_fatal(\"--progress-timestamp is allowed only under --progress\");",
          "content_same": false
        },
        {
          "line": 4276,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr, \"generating data (server-side)...\\n\")",
          "old_line_content": "",
          "new_line_content": "\tfprintf(stderr, \"generating data (server-side)...\\n\");",
          "content_same": false
        },
        {
          "line": 6328,
          "old_api": null,
          "new_api": "getpid",
          "old_text": null,
          "new_text": "getpid()",
          "old_line_content": "\t\t/* copy any -D switch values to all clients */",
          "new_line_content": "\tmain_pid = (int) getpid();",
          "content_same": false
        },
        {
          "line": 6332,
          "old_api": null,
          "new_api": "pg_realloc",
          "old_text": null,
          "new_text": "pg_realloc(state, sizeof(CState) * nclients)",
          "old_line_content": "",
          "new_line_content": "\t\tstate = (CState *) pg_realloc(state, sizeof(CState) * nclients);",
          "content_same": false
        },
        {
          "line": 4285,
          "old_api": null,
          "new_api": "initTruncateTables",
          "old_text": null,
          "new_text": "initTruncateTables(con)",
          "old_line_content": "\t\t\t\t\t  \"from generate_series(1, %d) as bid\", nbranches * scale);",
          "new_line_content": "\tinitTruncateTables(con);",
          "content_same": false
        },
        {
          "line": 6333,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(state + 1, 0, sizeof(CState) * (nclients - 1))",
          "old_line_content": "\t\t\tstate[i].id = i;",
          "new_line_content": "\t\tmemset(state + 1, 0, sizeof(CState) * (nclients - 1));",
          "content_same": false
        },
        {
          "line": 4287,
          "old_api": null,
          "new_api": "initPQExpBuffer",
          "old_text": null,
          "new_text": "initPQExpBuffer(&sql)",
          "old_line_content": "",
          "new_line_content": "\tinitPQExpBuffer(&sql);",
          "content_same": false
        },
        {
          "line": 4289,
          "old_api": null,
          "new_api": "printfPQExpBuffer",
          "old_text": null,
          "new_text": "printfPQExpBuffer(&sql,\n\t\t\t\t\t  \"insert into pgbench_branches(bid,bbalance) \"\n\t\t\t\t\t  \"select bid, 0 \"\n\t\t\t\t\t  \"from generate_series(1, %d) as bid\", nbranches * scale)",
          "old_line_content": "\t\t\t\t\t  \"insert into pgbench_tellers(tid,bid,tbalance) \"",
          "new_line_content": "\tprintfPQExpBuffer(&sql,",
          "content_same": false
        },
        {
          "line": 4293,
          "old_api": null,
          "new_api": "executeStatement",
          "old_text": null,
          "new_text": "executeStatement(con, sql.data)",
          "old_line_content": "",
          "new_line_content": "\texecuteStatement(con, sql.data);",
          "content_same": false
        },
        {
          "line": 4295,
          "old_api": null,
          "new_api": "printfPQExpBuffer",
          "old_text": null,
          "new_text": "printfPQExpBuffer(&sql,\n\t\t\t\t\t  \"insert into pgbench_tellers(tid,bid,tbalance) \"\n\t\t\t\t\t  \"select tid, (tid - 1) / %d + 1, 0 \"\n\t\t\t\t\t  \"from generate_series(1, %d) as tid\", ntellers, ntellers * scale)",
          "old_line_content": "\t\t\t\t\t  \"insert into pgbench_accounts(aid,bid,abalance,filler) \"",
          "new_line_content": "\tprintfPQExpBuffer(&sql,",
          "content_same": false
        },
        {
          "line": 6347,
          "old_api": null,
          "new_api": "putVariableValue",
          "old_text": null,
          "new_text": "putVariableValue(&state[i], \"startup\",\n\t\t\t\t\t\t\t\t\t\t  var->name, &var->value)",
          "old_line_content": "\t\t\t\t\t\t\t\t\t var->name, var->svalue))",
          "new_line_content": "\t\t\t\t\tif (!putVariableValue(&state[i], \"startup\",",
          "content_same": false
        },
        {
          "line": 6349,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "\t\t\t\t}",
          "new_line_content": "\t\t\t\t\t\texit(1);",
          "content_same": false
        },
        {
          "line": 6353,
          "old_api": null,
          "new_api": "putVariable",
          "old_text": null,
          "new_text": "putVariable(&state[i], \"startup\",\n\t\t\t\t\t\t\t\t\t var->name, var->svalue)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t\tif (!putVariable(&state[i], \"startup\",",
          "content_same": false
        },
        {
          "line": 4306,
          "old_api": null,
          "new_api": "executeStatement",
          "old_text": null,
          "new_text": "executeStatement(con, sql.data)",
          "old_line_content": "/*",
          "new_line_content": "\texecuteStatement(con, sql.data);",
          "content_same": false
        },
        {
          "line": 6355,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "\tfor (i = 0; i < nclients; i++)",
          "new_line_content": "\t\t\t\t\t\texit(1);",
          "content_same": false
        },
        {
          "line": 4308,
          "old_api": null,
          "new_api": "termPQExpBuffer",
          "old_text": null,
          "new_text": "termPQExpBuffer(&sql)",
          "old_line_content": " */",
          "new_line_content": "\ttermPQExpBuffer(&sql);",
          "content_same": false
        },
        {
          "line": 4310,
          "old_api": null,
          "new_api": "executeStatement",
          "old_text": null,
          "new_text": "executeStatement(con, \"commit\")",
          "old_line_content": "initVacuum(PGconn *con)",
          "new_line_content": "\texecuteStatement(con, \"commit\");",
          "content_same": false
        },
        {
          "line": 6365,
          "old_api": null,
          "new_api": "initRandomState",
          "old_text": null,
          "new_text": "initRandomState(&state[i].cs_func_rs)",
          "old_line_content": "",
          "new_line_content": "\t\tinitRandomState(&state[i].cs_func_rs);",
          "content_same": false
        },
        {
          "line": 4319,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr, \"vacuuming...\\n\")",
          "old_line_content": "/*",
          "new_line_content": "\tfprintf(stderr, \"vacuuming...\\n\");",
          "content_same": false
        },
        {
          "line": 4320,
          "old_api": null,
          "new_api": "executeStatement",
          "old_text": null,
          "new_text": "executeStatement(con, \"vacuum analyze pgbench_branches\")",
          "old_line_content": " * Create primary keys on the standard tables",
          "new_line_content": "\texecuteStatement(con, \"vacuum analyze pgbench_branches\");",
          "content_same": false
        },
        {
          "line": 4321,
          "old_api": null,
          "new_api": "executeStatement",
          "old_text": null,
          "new_text": "executeStatement(con, \"vacuum analyze pgbench_tellers\")",
          "old_line_content": " */",
          "new_line_content": "\texecuteStatement(con, \"vacuum analyze pgbench_tellers\");",
          "content_same": false
        },
        {
          "line": 4322,
          "old_api": null,
          "new_api": "executeStatement",
          "old_text": null,
          "new_text": "executeStatement(con, \"vacuum analyze pgbench_accounts\")",
          "old_line_content": "static void",
          "new_line_content": "\texecuteStatement(con, \"vacuum analyze pgbench_accounts\");",
          "content_same": false
        },
        {
          "line": 4323,
          "old_api": null,
          "new_api": "executeStatement",
          "old_text": null,
          "new_text": "executeStatement(con, \"vacuum analyze pgbench_history\")",
          "old_line_content": "initCreatePKeys(PGconn *con)",
          "new_line_content": "\texecuteStatement(con, \"vacuum analyze pgbench_history\");",
          "content_same": false
        },
        {
          "line": 6371,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "\t\t\t\t duration <= 0 ? \"nxacts\" : \"duration\",",
          "new_line_content": "\t\texit(1);",
          "content_same": false
        },
        {
          "line": 6374,
          "old_api": null,
          "new_api": "printVersion",
          "old_text": null,
          "new_text": "printVersion(con)",
          "old_line_content": "\tif (internal_script_used)",
          "new_line_content": "\tprintVersion(con);",
          "content_same": false
        },
        {
          "line": 6376,
          "old_api": null,
          "new_api": "pg_log_debug",
          "old_text": null,
          "new_text": "pg_log_debug(\"pghost: %s pgport: %s nclients: %d %s: %d dbName: %s\",\n\t\t\t\t PQhost(con), PQport(con), nclients,\n\t\t\t\t duration <= 0 ? \"nxacts\" : \"duration\",\n\t\t\t\t duration <= 0 ? nxacts : duration, PQdb(con))",
          "old_line_content": "",
          "new_line_content": "\tpg_log_debug(\"pghost: %s pgport: %s nclients: %d %s: %d dbName: %s\",",
          "content_same": false
        },
        {
          "line": 6377,
          "old_api": null,
          "new_api": "PQport",
          "old_text": null,
          "new_text": "PQport(con)",
          "old_line_content": "\t/*",
          "new_line_content": "\t\t\t\t PQhost(con), PQport(con), nclients,",
          "content_same": false
        },
        {
          "line": 6379,
          "old_api": null,
          "new_api": "PQdb",
          "old_text": null,
          "new_text": "PQdb(con)",
          "old_line_content": "\t * an explicit -D switch",
          "new_line_content": "\t\t\t\t duration <= 0 ? nxacts : duration, PQdb(con));",
          "content_same": false
        },
        {
          "line": 6382,
          "old_api": null,
          "new_api": "GetTableInfo",
          "old_text": null,
          "new_text": "GetTableInfo(con, scale_given)",
          "old_line_content": "\t{",
          "new_line_content": "\t\tGetTableInfo(con, scale_given);",
          "content_same": false
        },
        {
          "line": 4340,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr, \"creating primary keys...\\n\")",
          "old_line_content": "",
          "new_line_content": "\tfprintf(stderr, \"creating primary keys...\\n\");",
          "content_same": false
        },
        {
          "line": 4341,
          "old_api": null,
          "new_api": "initPQExpBuffer",
          "old_text": null,
          "new_text": "initPQExpBuffer(&query)",
          "old_line_content": "\t\tif (index_tablespace != NULL)",
          "new_line_content": "\tinitPQExpBuffer(&query);",
          "content_same": false
        },
        {
          "line": 6388,
          "old_api": null,
          "new_api": "lookupVariable",
          "old_text": null,
          "new_text": "lookupVariable(&state[0], \"scale\")",
          "old_line_content": "\t}",
          "new_line_content": "\tif (lookupVariable(&state[0], \"scale\") == NULL)",
          "content_same": false
        },
        {
          "line": 4343,
          "old_api": null,
          "new_api": "lengthof",
          "old_text": null,
          "new_text": "lengthof(DDLINDEXes)",
          "old_line_content": "\t\t\tchar\t   *escape_tablespace;",
          "new_line_content": "\tfor (i = 0; i < lengthof(DDLINDEXes); i++)",
          "content_same": false
        },
        {
          "line": 6392,
          "old_api": null,
          "new_api": "putVariableInt",
          "old_text": null,
          "new_text": "putVariableInt(&state[i], \"startup\", \"scale\", scale)",
          "old_line_content": "\t * override an explicit -D switch.",
          "new_line_content": "\t\t\tif (!putVariableInt(&state[i], \"startup\", \"scale\", scale))",
          "content_same": false
        },
        {
          "line": 6393,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "\t */",
          "new_line_content": "\t\t\t\texit(1);",
          "content_same": false
        },
        {
          "line": 4352,
          "old_api": null,
          "new_api": "PQescapeIdentifier",
          "old_text": null,
          "new_text": "PQescapeIdentifier(con, index_tablespace,\n\t\t\t\t\t\t\t\t\t\t\t\t   strlen(index_tablespace))",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\tescape_tablespace = PQescapeIdentifier(con, index_tablespace,",
          "content_same": false
        },
        {
          "line": 4353,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(index_tablespace)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t\t\t\t\t\t\t\t\t   strlen(index_tablespace));",
          "content_same": false
        },
        {
          "line": 6401,
          "old_api": null,
          "new_api": "lookupVariable",
          "old_text": null,
          "new_text": "lookupVariable(&state[0], \"client_id\")",
          "old_line_content": "\t/* set default seed for hash functions */",
          "new_line_content": "\tif (lookupVariable(&state[0], \"client_id\") == NULL)",
          "content_same": false
        },
        {
          "line": 4355,
          "old_api": null,
          "new_api": "PQfreemem",
          "old_text": null,
          "new_text": "PQfreemem(escape_tablespace)",
          "old_line_content": "}",
          "new_line_content": "\t\t\tPQfreemem(escape_tablespace);",
          "content_same": false
        },
        {
          "line": 6404,
          "old_api": null,
          "new_api": "putVariableInt",
          "old_text": null,
          "new_text": "putVariableInt(&state[i], \"startup\", \"client_id\", i)",
          "old_line_content": "\t\tuint64\t\tseed =",
          "new_line_content": "\t\t\tif (!putVariableInt(&state[i], \"startup\", \"client_id\", i))",
          "content_same": false
        },
        {
          "line": 4358,
          "old_api": null,
          "new_api": "executeStatement",
          "old_text": null,
          "new_text": "executeStatement(con, query.data)",
          "old_line_content": " * Create foreign key constraints between the standard tables",
          "new_line_content": "\t\texecuteStatement(con, query.data);",
          "content_same": false
        },
        {
          "line": 4361,
          "old_api": null,
          "new_api": "termPQExpBuffer",
          "old_text": null,
          "new_text": "termPQExpBuffer(&query)",
          "old_line_content": "initCreateFKeys(PGconn *con)",
          "new_line_content": "\ttermPQExpBuffer(&query);",
          "content_same": false
        },
        {
          "line": 6412,
          "old_api": null,
          "new_api": "pg_jrand48",
          "old_text": null,
          "new_text": "pg_jrand48(base_random_sequence.xseed)",
          "old_line_content": "",
          "new_line_content": "\t\t((uint64) pg_jrand48(base_random_sequence.xseed) & 0xFFFFFFFF) |",
          "content_same": false
        },
        {
          "line": 6413,
          "old_api": null,
          "new_api": "pg_jrand48",
          "old_text": null,
          "new_text": "pg_jrand48(base_random_sequence.xseed)",
          "old_line_content": "\t/* set random seed unless overwritten */",
          "new_line_content": "\t\t(((uint64) pg_jrand48(base_random_sequence.xseed) & 0xFFFFFFFF) << 32);",
          "content_same": false
        },
        {
          "line": 6416,
          "old_api": null,
          "new_api": "putVariableInt",
          "old_text": null,
          "new_text": "putVariableInt(&state[i], \"startup\", \"default_seed\", (int64) seed)",
          "old_line_content": "\t\tfor (i = 0; i < nclients; i++)",
          "new_line_content": "\t\t\tif (!putVariableInt(&state[i], \"startup\", \"default_seed\", (int64) seed))",
          "content_same": false
        },
        {
          "line": 6421,
          "old_api": null,
          "new_api": "lookupVariable",
          "old_text": null,
          "new_text": "lookupVariable(&state[0], \"random_seed\")",
          "old_line_content": "\tif (!is_no_vacuum)",
          "new_line_content": "\tif (lookupVariable(&state[0], \"random_seed\") == NULL)",
          "content_same": false
        },
        {
          "line": 4379,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr, \"creating foreign keys...\\n\")",
          "old_line_content": "/*",
          "new_line_content": "\tfprintf(stderr, \"creating foreign keys...\\n\");",
          "content_same": false
        },
        {
          "line": 4380,
          "old_api": null,
          "new_api": "lengthof",
          "old_text": null,
          "new_text": "lengthof(DDLKEYs)",
          "old_line_content": " * Validate an initialization-steps string",
          "new_line_content": "\tfor (i = 0; i < lengthof(DDLKEYs); i++)",
          "content_same": false
        },
        {
          "line": 4382,
          "old_api": null,
          "new_api": "executeStatement",
          "old_text": null,
          "new_text": "executeStatement(con, DDLKEYs[i])",
          "old_line_content": " * (We could just leave it to runInitSteps() to fail if there are wrong",
          "new_line_content": "\t\texecuteStatement(con, DDLKEYs[i]);",
          "content_same": false
        },
        {
          "line": 6430,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr, \"starting vacuum...\")",
          "old_line_content": "\t\t{",
          "new_line_content": "\t\tfprintf(stderr, \"starting vacuum...\");",
          "content_same": false
        },
        {
          "line": 6434,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr, \"end.\\n\")",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\tfprintf(stderr, \"end.\\n\");",
          "content_same": false
        },
        {
          "line": 6438,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr, \"starting vacuum pgbench_accounts...\")",
          "old_line_content": "\t/* set up thread data structures */",
          "new_line_content": "\t\t\tfprintf(stderr, \"starting vacuum pgbench_accounts...\");",
          "content_same": false
        },
        {
          "line": 6440,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr, \"end.\\n\")",
          "old_line_content": "\tnclients_dealt = 0;",
          "new_line_content": "\t\t\tfprintf(stderr, \"end.\\n\");",
          "content_same": false
        },
        {
          "line": 6443,
          "old_api": null,
          "new_api": "PQfinish",
          "old_text": null,
          "new_text": "PQfinish(con)",
          "old_line_content": "\t{",
          "new_line_content": "\tPQfinish(con);",
          "content_same": false
        },
        {
          "line": 4398,
          "old_api": null,
          "new_api": "pg_log_fatal",
          "old_text": null,
          "new_text": "pg_log_fatal(\"no initialization steps specified\")",
          "old_line_content": "\t\t{",
          "new_line_content": "\t\tpg_log_fatal(\"no initialization steps specified\");",
          "content_same": false
        },
        {
          "line": 6446,
          "old_api": null,
          "new_api": "pg_malloc",
          "old_text": null,
          "new_text": "pg_malloc(sizeof(TState) * nthreads)",
          "old_line_content": "\t\tthread->tid = i;",
          "new_line_content": "\tthreads = (TState *) pg_malloc(sizeof(TState) * nthreads);",
          "content_same": false
        },
        {
          "line": 4404,
          "old_api": null,
          "new_api": "strchr",
          "old_text": null,
          "new_text": "strchr(ALL_INIT_STEPS \" \", *step)",
          "old_line_content": "}",
          "new_line_content": "\t\tif (strchr(ALL_INIT_STEPS \" \", *step) == NULL)",
          "content_same": false
        },
        {
          "line": 4406,
          "old_api": null,
          "new_api": "pg_log_fatal",
          "old_text": null,
          "new_text": "pg_log_fatal(\"unrecognized initialization step \\\"%c\\\"\", *step)",
          "old_line_content": "/*",
          "new_line_content": "\t\t\tpg_log_fatal(\"unrecognized initialization step \\\"%c\\\"\", *step);",
          "content_same": false
        },
        {
          "line": 4407,
          "old_api": null,
          "new_api": "pg_log_info",
          "old_text": null,
          "new_text": "pg_log_info(\"Allowed step characters are: \\\"\" ALL_INIT_STEPS \"\\\".\")",
          "old_line_content": " * Invoke each initialization step in the given string",
          "new_line_content": "\t\t\tpg_log_info(\"Allowed step characters are: \\\"\" ALL_INIT_STEPS \"\\\".\");",
          "content_same": false
        },
        {
          "line": 4408,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": " */",
          "new_line_content": "\t\t\texit(1);",
          "content_same": false
        },
        {
          "line": 6457,
          "old_api": null,
          "new_api": "initRandomState",
          "old_text": null,
          "new_text": "initRandomState(&thread->ts_choose_rs)",
          "old_line_content": "\t\tnclients_dealt += thread->nstate;",
          "new_line_content": "\t\tinitRandomState(&thread->ts_choose_rs);",
          "content_same": false
        },
        {
          "line": 6458,
          "old_api": null,
          "new_api": "initRandomState",
          "old_text": null,
          "new_text": "initRandomState(&thread->ts_throttle_rs)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tinitRandomState(&thread->ts_throttle_rs);",
          "content_same": false
        },
        {
          "line": 6459,
          "old_api": null,
          "new_api": "initRandomState",
          "old_text": null,
          "new_text": "initRandomState(&thread->ts_sample_rs)",
          "old_line_content": "",
          "new_line_content": "\t\tinitRandomState(&thread->ts_sample_rs);",
          "content_same": false
        },
        {
          "line": 6462,
          "old_api": null,
          "new_api": "initStats",
          "old_text": null,
          "new_text": "initStats(&thread->stats, 0)",
          "old_line_content": "",
          "new_line_content": "\t\tinitStats(&thread->stats, 0);",
          "content_same": false
        },
        {
          "line": 6471,
          "old_api": null,
          "new_api": "pg_time_now",
          "old_text": null,
          "new_text": "pg_time_now()",
          "old_line_content": "\tif (errno != 0)",
          "new_line_content": "\tstart_time = pg_time_now();",
          "content_same": false
        },
        {
          "line": 4425,
          "old_api": null,
          "new_api": "initPQExpBuffer",
          "old_text": null,
          "new_text": "initPQExpBuffer(&stats)",
          "old_line_content": "",
          "new_line_content": "\tinitPQExpBuffer(&stats);",
          "content_same": false
        },
        {
          "line": 4427,
          "old_api": null,
          "new_api": "doConnect",
          "old_text": null,
          "new_text": "doConnect()",
          "old_line_content": "\t{",
          "new_line_content": "\tif ((con = doConnect()) == NULL)",
          "content_same": false
        },
        {
          "line": 4428,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "\t\tchar\t   *op = NULL;",
          "new_line_content": "\t\texit(1);",
          "content_same": false
        },
        {
          "line": 6475,
          "old_api": null,
          "new_api": "setalarm",
          "old_text": null,
          "new_text": "setalarm(duration)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tsetalarm(duration);",
          "content_same": false
        },
        {
          "line": 4430,
          "old_api": null,
          "new_api": "setup_cancel_handler",
          "old_text": null,
          "new_text": "setup_cancel_handler(NULL)",
          "old_line_content": "",
          "new_line_content": "\tsetup_cancel_handler(NULL);",
          "content_same": false
        },
        {
          "line": 4431,
          "old_api": null,
          "new_api": "SetCancelConn",
          "old_text": null,
          "new_text": "SetCancelConn(con)",
          "old_line_content": "\t\tswitch (*step)",
          "new_line_content": "\tSetCancelConn(con);",
          "content_same": false
        },
        {
          "line": 6477,
          "old_api": null,
          "new_api": "THREAD_BARRIER_INIT",
          "old_text": null,
          "new_text": "THREAD_BARRIER_INIT(&barrier, nthreads)",
          "old_line_content": "#ifdef ENABLE_THREAD_SAFETY",
          "new_line_content": "\terrno = THREAD_BARRIER_INIT(&barrier, nthreads);",
          "content_same": false
        },
        {
          "line": 6480,
          "old_api": null,
          "new_api": "pg_log_fatal",
          "old_text": null,
          "new_text": "pg_log_fatal(\"could not initialize barrier: %m\")",
          "old_line_content": "\t{",
          "new_line_content": "\t\tpg_log_fatal(\"could not initialize barrier: %m\");",
          "content_same": false
        },
        {
          "line": 6481,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "\t\tTState\t   *thread = &threads[i];",
          "new_line_content": "\t\texit(1);",
          "content_same": false
        },
        {
          "line": 4436,
          "old_api": null,
          "new_api": "pg_time_now",
          "old_text": null,
          "new_text": "pg_time_now()",
          "old_line_content": "\t\t\t\tbreak;",
          "new_line_content": "\t\tpg_time_usec_t start = pg_time_now();",
          "content_same": false
        },
        {
          "line": 4442,
          "old_api": null,
          "new_api": "initDropTables",
          "old_text": null,
          "new_text": "initDropTables(con)",
          "old_line_content": "\t\t\t\top = \"client-side generate\";",
          "new_line_content": "\t\t\t\tinitDropTables(con);",
          "content_same": false
        },
        {
          "line": 6490,
          "old_api": null,
          "new_api": "pg_time_now",
          "old_text": null,
          "new_text": "pg_time_now()",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\tthread->create_time = pg_time_now();",
          "content_same": false
        },
        {
          "line": 6491,
          "old_api": null,
          "new_api": "THREAD_CREATE",
          "old_text": null,
          "new_text": "THREAD_CREATE(&thread->thread, threadRun, thread)",
          "old_line_content": "\t}",
          "new_line_content": "\t\terrno = THREAD_CREATE(&thread->thread, threadRun, thread);",
          "content_same": false
        },
        {
          "line": 4446,
          "old_api": null,
          "new_api": "initCreateTables",
          "old_text": null,
          "new_text": "initCreateTables(con)",
          "old_line_content": "\t\t\t\top = \"server-side generate\";",
          "new_line_content": "\t\t\t\tinitCreateTables(con);",
          "content_same": false
        },
        {
          "line": 6495,
          "old_api": null,
          "new_api": "pg_log_fatal",
          "old_text": null,
          "new_text": "pg_log_fatal(\"could not create thread: %m\")",
          "old_line_content": "",
          "new_line_content": "\t\t\tpg_log_fatal(\"could not create thread: %m\");",
          "content_same": false
        },
        {
          "line": 6496,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "\t/* compute when to stop */",
          "new_line_content": "\t\t\texit(1);",
          "content_same": false
        },
        {
          "line": 4450,
          "old_api": null,
          "new_api": "initGenerateDataClientSide",
          "old_text": null,
          "new_text": "initGenerateDataClientSide(con)",
          "old_line_content": "\t\t\t\top = \"vacuum\";",
          "new_line_content": "\t\t\t\tinitGenerateDataClientSide(con);",
          "content_same": false
        },
        {
          "line": 6500,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(nthreads == 1)",
          "old_line_content": "",
          "new_line_content": "\tAssert(nthreads == 1);",
          "content_same": false
        },
        {
          "line": 4454,
          "old_api": null,
          "new_api": "initGenerateDataServerSide",
          "old_text": null,
          "new_text": "initGenerateDataServerSide(con)",
          "old_line_content": "\t\t\t\top = \"primary keys\";",
          "new_line_content": "\t\t\t\tinitGenerateDataServerSide(con);",
          "content_same": false
        },
        {
          "line": 6504,
          "old_api": null,
          "new_api": "pg_time_now",
          "old_text": null,
          "new_text": "pg_time_now()",
          "old_line_content": "\t/* wait for other threads and accumulate results */",
          "new_line_content": "\tthreads[0].create_time = pg_time_now();",
          "content_same": false
        },
        {
          "line": 4458,
          "old_api": null,
          "new_api": "initVacuum",
          "old_text": null,
          "new_text": "initVacuum(con)",
          "old_line_content": "\t\t\t\top = \"foreign keys\";",
          "new_line_content": "\t\t\t\tinitVacuum(con);",
          "content_same": false
        },
        {
          "line": 6509,
          "old_api": null,
          "new_api": "threadRun",
          "old_text": null,
          "new_text": "threadRun(&threads[0])",
          "old_line_content": "\t{",
          "new_line_content": "\t(void) threadRun(&threads[0]);",
          "content_same": false
        },
        {
          "line": 4462,
          "old_api": null,
          "new_api": "initCreatePKeys",
          "old_text": null,
          "new_text": "initCreatePKeys(con)",
          "old_line_content": "\t\t\t\tbreak;\t\t\t/* ignore */",
          "new_line_content": "\t\t\t\tinitCreatePKeys(con);",
          "content_same": false
        },
        {
          "line": 6512,
          "old_api": null,
          "new_api": "initStats",
          "old_text": null,
          "new_text": "initStats(&stats, 0)",
          "old_line_content": "#ifdef ENABLE_THREAD_SAFETY",
          "new_line_content": "\tinitStats(&stats, 0);",
          "content_same": false
        },
        {
          "line": 4472,
          "old_api": null,
          "new_api": "PQfinish",
          "old_text": null,
          "new_text": "PQfinish(con)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\tPQfinish(con);",
          "content_same": false
        },
        {
          "line": 4473,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "\t\t\tif (!first)",
          "new_line_content": "\t\t\t\texit(1);",
          "content_same": false
        },
        {
          "line": 6521,
          "old_api": null,
          "new_api": "THREAD_JOIN",
          "old_text": null,
          "new_text": "THREAD_JOIN(thread->thread)",
          "old_line_content": "\t\t/* aggregate thread level stats */",
          "new_line_content": "\t\t\tTHREAD_JOIN(thread->thread);",
          "content_same": false
        },
        {
          "line": 4481,
          "old_api": null,
          "new_api": "appendPQExpBufferStr",
          "old_text": null,
          "new_text": "appendPQExpBufferStr(&stats, \", \")",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\t\tappendPQExpBufferStr(&stats, \", \");",
          "content_same": false
        },
        {
          "line": 6529,
          "old_api": null,
          "new_api": "mergeSimpleStats",
          "old_text": null,
          "new_text": "mergeSimpleStats(&stats.latency, &thread->stats.latency)",
          "old_line_content": "\t\t/* first recorded benchmarking start time */",
          "new_line_content": "\t\tmergeSimpleStats(&stats.latency, &thread->stats.latency);",
          "content_same": false
        },
        {
          "line": 6530,
          "old_api": null,
          "new_api": "mergeSimpleStats",
          "old_text": null,
          "new_text": "mergeSimpleStats(&stats.lag, &thread->stats.lag)",
          "old_line_content": "\t\tif (bench_start == 0 || thread->bench_start < bench_start)",
          "new_line_content": "\t\tmergeSimpleStats(&stats.lag, &thread->stats.lag);",
          "content_same": false
        },
        {
          "line": 4491,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr, \"done in %.2f s (%s).\\n\", run_time, stats.data)",
          "old_line_content": " * Extract pgbench table information into global variables scale,",
          "new_line_content": "\tfprintf(stderr, \"done in %.2f s (%s).\\n\", run_time, stats.data);",
          "content_same": false
        },
        {
          "line": 4492,
          "old_api": null,
          "new_api": "ResetCancelConn",
          "old_text": null,
          "new_text": "ResetCancelConn()",
          "old_line_content": " * partition_method and partitions.",
          "new_line_content": "\tResetCancelConn();",
          "content_same": false
        },
        {
          "line": 4493,
          "old_api": null,
          "new_api": "PQfinish",
          "old_text": null,
          "new_text": "PQfinish(con)",
          "old_line_content": " */",
          "new_line_content": "\tPQfinish(con);",
          "content_same": false
        },
        {
          "line": 4494,
          "old_api": null,
          "new_api": "termPQExpBuffer",
          "old_text": null,
          "new_text": "termPQExpBuffer(&stats)",
          "old_line_content": "static void",
          "new_line_content": "\ttermPQExpBuffer(&stats);",
          "content_same": false
        },
        {
          "line": 6542,
          "old_api": null,
          "new_api": "disconnect_all",
          "old_text": null,
          "new_text": "disconnect_all(state, nclients)",
          "old_line_content": "\t * underestimated.",
          "new_line_content": "\tdisconnect_all(state, nclients);",
          "content_same": false
        },
        {
          "line": 6551,
          "old_api": null,
          "new_api": "pg_time_now",
          "old_text": null,
          "new_text": "pg_time_now()",
          "old_line_content": "",
          "new_line_content": "\tprintResults(&stats, pg_time_now() - bench_start, conn_total_duration,",
          "content_same": false
        },
        {
          "line": 6554,
          "old_api": null,
          "new_api": "THREAD_BARRIER_DESTROY",
          "old_text": null,
          "new_text": "THREAD_BARRIER_DESTROY(&barrier)",
          "old_line_content": "",
          "new_line_content": "\tTHREAD_BARRIER_DESTROY(&barrier);",
          "content_same": false
        },
        {
          "line": 6557,
          "old_api": null,
          "new_api": "pg_log_fatal",
          "old_text": null,
          "new_text": "pg_log_fatal(\"Run was aborted; the above results are incomplete.\")",
          "old_line_content": "{",
          "new_line_content": "\t\tpg_log_fatal(\"Run was aborted; the above results are incomplete.\");",
          "content_same": false
        },
        {
          "line": 4513,
          "old_api": null,
          "new_api": "PQresultErrorField",
          "old_text": null,
          "new_text": "PQresultErrorField(res, PG_DIAG_SQLSTATE)",
          "old_line_content": "",
          "new_line_content": "\t\tchar\t   *sqlState = PQresultErrorField(res, PG_DIAG_SQLSTATE);",
          "content_same": false
        },
        {
          "line": 4515,
          "old_api": null,
          "new_api": "PQerrorMessage",
          "old_text": null,
          "new_text": "PQerrorMessage(con)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tpg_log_fatal(\"could not count number of branches: %s\", PQerrorMessage(con));",
          "content_same": false
        },
        {
          "line": 4517,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(sqlState, ERRCODE_UNDEFINED_TABLE)",
          "old_line_content": "\tif (scale < 0)",
          "new_line_content": "\t\tif (sqlState && strcmp(sqlState, ERRCODE_UNDEFINED_TABLE) == 0)",
          "content_same": false
        },
        {
          "line": 4518,
          "old_api": null,
          "new_api": "pg_log_info",
          "old_text": null,
          "new_text": "pg_log_info(\"Perhaps you need to do initialization (\\\"pgbench -i\\\") in database \\\"%s\\\"\",\n\t\t\t\t\t\tPQdb(con))",
          "old_line_content": "\t{",
          "new_line_content": "\t\t\tpg_log_info(\"Perhaps you need to do initialization (\\\"pgbench -i\\\") in database \\\"%s\\\"\",",
          "content_same": false
        },
        {
          "line": 6570,
          "old_api": null,
          "new_api": "alloc_socket_set",
          "old_text": null,
          "new_text": "alloc_socket_set(nstate)",
          "old_line_content": "\t/* open log file if requested */",
          "new_line_content": "\tsocket_set *sockets = alloc_socket_set(nstate);",
          "content_same": false
        },
        {
          "line": 4526,
          "old_api": null,
          "new_api": "pg_log_fatal",
          "old_text": null,
          "new_text": "pg_log_fatal(\"invalid count(*) from pgbench_branches: \\\"%s\\\"\",\n\t\t\t\t\t PQgetvalue(res, 0, 0))",
          "old_line_content": "\tif (scale_given)",
          "new_line_content": "\t\tpg_log_fatal(\"invalid count(*) from pgbench_branches: \\\"%s\\\"\",",
          "content_same": false
        },
        {
          "line": 4528,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "\t\t\t\t\t   scale);",
          "new_line_content": "\t\texit(1);",
          "content_same": false
        },
        {
          "line": 4530,
          "old_api": null,
          "new_api": "PQclear",
          "old_text": null,
          "new_text": "PQclear(res)",
          "old_line_content": "\t/*",
          "new_line_content": "\tPQclear(res);",
          "content_same": false
        },
        {
          "line": 4534,
          "old_api": null,
          "new_api": "pg_log_warning",
          "old_text": null,
          "new_text": "pg_log_warning(\"scale option ignored, using count from pgbench_branches table (%d)\",\n\t\t\t\t\t   scale)",
          "old_line_content": "\t * The result is empty if no \"pgbench_accounts\" is found.",
          "new_line_content": "\t\tpg_log_warning(\"scale option ignored, using count from pgbench_branches table (%d)\",",
          "content_same": false
        },
        {
          "line": 6584,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(logpath, sizeof(logpath), \"%s.%d\", prefix, main_pid)",
          "old_line_content": "\t\t{",
          "new_line_content": "\t\t\tsnprintf(logpath, sizeof(logpath), \"%s.%d\", prefix, main_pid);",
          "content_same": false
        },
        {
          "line": 6586,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(logpath, sizeof(logpath), \"%s.%d.%d\", prefix, main_pid, thread->tid)",
          "old_line_content": "\t\t\tgoto done;",
          "new_line_content": "\t\t\tsnprintf(logpath, sizeof(logpath), \"%s.%d.%d\", prefix, main_pid, thread->tid);",
          "content_same": false
        },
        {
          "line": 6588,
          "old_api": null,
          "new_api": "fopen",
          "old_text": null,
          "new_text": "fopen(logpath, \"w\")",
          "old_line_content": "\t}",
          "new_line_content": "\t\tthread->logfile = fopen(logpath, \"w\");",
          "content_same": false
        },
        {
          "line": 6592,
          "old_api": null,
          "new_api": "pg_log_fatal",
          "old_text": null,
          "new_text": "pg_log_fatal(\"could not open logfile \\\"%s\\\": %m\", logpath)",
          "old_line_content": "\t\tstate[i].state = CSTATE_CHOOSE_SCRIPT;",
          "new_line_content": "\t\t\tpg_log_fatal(\"could not open logfile \\\"%s\\\": %m\", logpath);",
          "content_same": false
        },
        {
          "line": 4552,
          "old_api": null,
          "new_api": "count",
          "old_text": null,
          "new_text": "PQexec(con,\n\t\t\t\t \"select o.n, p.partstrat, pg_catalog.count(i.inhparent) \"\n\t\t\t\t \"from pg_catalog.pg_class as c \"\n\t\t\t\t \"join pg_catalog.pg_namespace as n on (n.oid = c.relnamespace) \"\n\t\t\t\t \"cross join lateral (select pg_catalog.array_position(pg_catalog.current_schemas(true), n.nspname)) as o(n) \"\n\t\t\t\t \"left join pg_catalog.pg_partitioned_table as p on (p.partrelid = c.oid) \"\n\t\t\t\t \"left join pg_catalog.pg_inherits as i on (c.oid = i.inhparent) \"\n\t\t\t\t \"where c.relname = 'pgbench_accounts' and o.n is not null \"\n\t\t\t\t \"group by 1, 2 \"\n\t\t\t\t \"order by 1 asc \"\n\t\t\t\t \"limit 1\")",
          "old_line_content": "\t\t\t\t \"where c.relname = 'pgbench_accounts' and o.n is not null \"",
          "new_line_content": "\tres = PQexec(con,",
          "content_same": false
        },
        {
          "line": 6602,
          "old_api": null,
          "new_api": "THREAD_BARRIER_WAIT",
          "old_text": null,
          "new_text": "THREAD_BARRIER_WAIT(&barrier)",
          "old_line_content": "\t/* STEADY */",
          "new_line_content": "\tTHREAD_BARRIER_WAIT(&barrier);",
          "content_same": false
        },
        {
          "line": 6604,
          "old_api": null,
          "new_api": "pg_time_now",
          "old_text": null,
          "new_text": "pg_time_now()",
          "old_line_content": "\t{",
          "new_line_content": "\tthread_start = pg_time_now();",
          "content_same": false
        },
        {
          "line": 4564,
          "old_api": null,
          "new_api": "PQresultStatus",
          "old_text": null,
          "new_text": "PQresultStatus(res)",
          "old_line_content": "\t{",
          "new_line_content": "\tif (PQresultStatus(res) != PGRES_TUPLES_OK)",
          "content_same": false
        },
        {
          "line": 6615,
          "old_api": null,
          "new_api": "doConnect",
          "old_text": null,
          "new_text": "doConnect()",
          "old_line_content": "\t\t\t\t * It is unclear whether it is worth doing anything rather",
          "new_line_content": "\t\t\tif ((state[i].con = doConnect()) == NULL)",
          "content_same": false
        },
        {
          "line": 4577,
          "old_api": null,
          "new_api": "PQdb",
          "old_text": null,
          "new_text": "PQdb(con)",
          "old_line_content": "\t\t\tpartition_method = PART_NONE;",
          "new_line_content": "\t\tpg_log_info(\"Perhaps you need to do initialization (\\\"pgbench -i\\\") in database \\\"%s\\\".\", PQdb(con));",
          "content_same": false
        },
        {
          "line": 4578,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "\t\telse",
          "new_line_content": "\t\texit(1);",
          "content_same": false
        },
        {
          "line": 6625,
          "old_api": null,
          "new_api": "THREAD_BARRIER_WAIT",
          "old_text": null,
          "new_text": "THREAD_BARRIER_WAIT(&barrier)",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\t\tTHREAD_BARRIER_WAIT(&barrier);",
          "content_same": false
        },
        {
          "line": 6631,
          "old_api": null,
          "new_api": "pg_time_now",
          "old_text": null,
          "new_text": "pg_time_now()",
          "old_line_content": "",
          "new_line_content": "\t\tthread->conn_duration = pg_time_now() - thread->started_time;",
          "content_same": false
        },
        {
          "line": 4590,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(ps != NULL)",
          "old_line_content": "\t\t\t{",
          "new_line_content": "\t\t\tAssert(ps != NULL);",
          "content_same": false
        },
        {
          "line": 6640,
          "old_api": null,
          "new_api": "THREAD_BARRIER_WAIT",
          "old_text": null,
          "new_text": "THREAD_BARRIER_WAIT(&barrier)",
          "old_line_content": "\t * The log format currently has Unix epoch timestamps with whole numbers",
          "new_line_content": "\tTHREAD_BARRIER_WAIT(&barrier);",
          "content_same": false
        },
        {
          "line": 4594,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(ps, \"h\")",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\telse if (strcmp(ps, \"h\") == 0)",
          "content_same": false
        },
        {
          "line": 6642,
          "old_api": null,
          "new_api": "pg_time_now",
          "old_text": null,
          "new_text": "pg_time_now()",
          "old_line_content": "\t * Unix epoch second (the very first aggregate might really have started a",
          "new_line_content": "\tstart = pg_time_now();",
          "content_same": false
        },
        {
          "line": 4599,
          "old_api": null,
          "new_api": "pg_log_fatal",
          "old_text": null,
          "new_text": "pg_log_fatal(\"unexpected partition method: \\\"%s\\\"\", ps)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\tpg_log_fatal(\"unexpected partition method: \\\"%s\\\"\", ps);",
          "content_same": false
        },
        {
          "line": 4604,
          "old_api": null,
          "new_api": "PQgetvalue",
          "old_text": null,
          "new_text": "PQgetvalue(res, 0, 2)",
          "old_line_content": " * Replace :param with $n throughout the command's SQL text, which",
          "new_line_content": "\t\tpartitions = atoi(PQgetvalue(res, 0, 2));",
          "content_same": false
        },
        {
          "line": 6653,
          "old_api": null,
          "new_api": "initStats",
          "old_text": null,
          "new_text": "initStats(&aggs, (start + epoch_shift) / 1000000 * 1000000)",
          "old_line_content": "\t\tpg_time_usec_t min_usec;",
          "new_line_content": "\tinitStats(&aggs, (start + epoch_shift) / 1000000 * 1000000);",
          "content_same": false
        },
        {
          "line": 4607,
          "old_api": null,
          "new_api": "PQclear",
          "old_text": null,
          "new_text": "PQclear(res)",
          "old_line_content": "static bool",
          "new_line_content": "\tPQclear(res);",
          "content_same": false
        },
        {
          "line": 6667,
          "old_api": null,
          "new_api": "clear_socket_set",
          "old_text": null,
          "new_text": "clear_socket_set(sockets)",
          "old_line_content": "\t\t\tif (st->state == CSTATE_SLEEP || st->state == CSTATE_THROTTLE)",
          "new_line_content": "\t\tclear_socket_set(sockets);",
          "content_same": false
        },
        {
          "line": 4623,
          "old_api": null,
          "new_api": "strchr",
          "old_text": null,
          "new_text": "strchr(p, ':')",
          "old_line_content": "\t\tif (name == NULL)",
          "new_line_content": "\twhile ((p = strchr(p, ':')) != NULL)",
          "content_same": false
        },
        {
          "line": 4629,
          "old_api": null,
          "new_api": "parseVariable",
          "old_text": null,
          "new_text": "parseVariable(p, &eaten)",
          "old_line_content": "\t\t\tcontinue;",
          "new_line_content": "\t\tname = parseVariable(p, &eaten);",
          "content_same": false
        },
        {
          "line": 6680,
          "old_api": null,
          "new_api": "pg_time_now_lazy",
          "old_text": null,
          "new_text": "pg_time_now_lazy(&now)",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\t\tpg_time_now_lazy(&now);",
          "content_same": false
        },
        {
          "line": 6694,
          "old_api": null,
          "new_api": "PQsocket",
          "old_text": null,
          "new_text": "PQsocket(st->con)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\tint\t\t\tsock = PQsocket(st->con);",
          "content_same": false
        },
        {
          "line": 4647,
          "old_api": null,
          "new_api": "pg_free",
          "old_text": null,
          "new_text": "pg_free(name)",
          "old_line_content": "\t\tcmd->argv[cmd->argc] = name;",
          "new_line_content": "\t\t\tpg_free(name);",
          "content_same": false
        },
        {
          "line": 6698,
          "old_api": null,
          "new_api": "PQerrorMessage",
          "old_text": null,
          "new_text": "PQerrorMessage(st->con)",
          "old_line_content": "\t\t\t\t\t st->state != CSTATE_FINISHED)",
          "new_line_content": "\t\t\t\t\tpg_log_error(\"invalid socket: %s\", PQerrorMessage(st->con));",
          "content_same": false
        },
        {
          "line": 4652,
          "old_api": null,
          "new_api": "replaceVariable",
          "old_text": null,
          "new_text": "replaceVariable(&sql, p, eaten, var)",
          "old_line_content": "\tcmd->argv[0] = sql;",
          "new_line_content": "\t\tp = replaceVariable(&sql, p, eaten, var);",
          "content_same": false
        },
        {
          "line": 6702,
          "old_api": null,
          "new_api": "add_socket_to_set",
          "old_text": null,
          "new_text": "add_socket_to_set(sockets, sock, nsocks++)",
          "old_line_content": "\t\t\t\t * want to wait.  No need to examine additional clients.",
          "new_line_content": "\t\t\t\tadd_socket_to_set(sockets, sock, nsocks++);",
          "content_same": false
        },
        {
          "line": 4658,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(cmd->argv[0] == NULL)",
          "old_line_content": " * backslash command, because we don't detect syntax errors in SQL)",
          "new_line_content": "\tAssert(cmd->argv[0] == NULL);",
          "content_same": false
        },
        {
          "line": 6719,
          "old_api": null,
          "new_api": "pg_time_now_lazy",
          "old_text": null,
          "new_text": "pg_time_now_lazy(&now)",
          "old_line_content": "",
          "new_line_content": "\t\t\tpg_time_now_lazy(&now);",
          "content_same": false
        },
        {
          "line": 4682,
          "old_api": null,
          "new_api": "initPQExpBuffer",
          "old_text": null,
          "new_text": "initPQExpBuffer(&buf)",
          "old_line_content": "\tif (command != NULL)",
          "new_line_content": "\tinitPQExpBuffer(&buf);",
          "content_same": false
        },
        {
          "line": 4684,
          "old_api": null,
          "new_api": "printfPQExpBuffer",
          "old_text": null,
          "new_text": "printfPQExpBuffer(&buf, \"%s:%d: %s\", source, lineno, msg)",
          "old_line_content": "",
          "new_line_content": "\tprintfPQExpBuffer(&buf, \"%s:%d: %s\", source, lineno, msg);",
          "content_same": false
        },
        {
          "line": 4686,
          "old_api": null,
          "new_api": "appendPQExpBuffer",
          "old_text": null,
          "new_text": "appendPQExpBuffer(&buf, \" (%s)\", more)",
          "old_line_content": "",
          "new_line_content": "\t\tappendPQExpBuffer(&buf, \" (%s)\", more);",
          "content_same": false
        },
        {
          "line": 4688,
          "old_api": null,
          "new_api": "appendPQExpBuffer",
          "old_text": null,
          "new_text": "appendPQExpBuffer(&buf, \" at column %d\", column + 1)",
          "old_line_content": "",
          "new_line_content": "\t\tappendPQExpBuffer(&buf, \" at column %d\", column + 1);",
          "content_same": false
        },
        {
          "line": 4690,
          "old_api": null,
          "new_api": "appendPQExpBuffer",
          "old_text": null,
          "new_text": "appendPQExpBuffer(&buf, \" in command \\\"%s\\\"\", command)",
          "old_line_content": "\t{",
          "new_line_content": "\t\tappendPQExpBuffer(&buf, \" in command \\\"%s\\\"\", command);",
          "content_same": false
        },
        {
          "line": 6739,
          "old_api": null,
          "new_api": "wait_on_socket_set",
          "old_text": null,
          "new_text": "wait_on_socket_set(sockets, min_usec)",
          "old_line_content": "\t\t\telse\t\t\t\t/* no explicit delay, wait without timeout */",
          "new_line_content": "\t\t\t\t\trc = wait_on_socket_set(sockets, min_usec);",
          "content_same": false
        },
        {
          "line": 4692,
          "old_api": null,
          "new_api": "pg_log_fatal",
          "old_text": null,
          "new_text": "pg_log_fatal(\"%s\", buf.data)",
          "old_line_content": "\t\tif (column >= 0)",
          "new_line_content": "\tpg_log_fatal(\"%s\", buf.data);",
          "content_same": false
        },
        {
          "line": 4694,
          "old_api": null,
          "new_api": "termPQExpBuffer",
          "old_text": null,
          "new_text": "termPQExpBuffer(&buf)",
          "old_line_content": "\t}",
          "new_line_content": "\ttermPQExpBuffer(&buf);",
          "content_same": false
        },
        {
          "line": 6743,
          "old_api": null,
          "new_api": "pg_usleep",
          "old_text": null,
          "new_text": "pg_usleep(min_usec)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t\tpg_usleep(min_usec);",
          "content_same": false
        },
        {
          "line": 4698,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr, \"%s\\n\", line)",
          "old_line_content": "",
          "new_line_content": "\t\tfprintf(stderr, \"%s\\n\", line);",
          "content_same": false
        },
        {
          "line": 4700,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr, \"%*c error found here\\n\", column + 1, '^')",
          "old_line_content": " * Return a pointer to the start of the SQL command, after skipping over",
          "new_line_content": "\t\t\tfprintf(stderr, \"%*c error found here\\n\", column + 1, '^');",
          "content_same": false
        },
        {
          "line": 6748,
          "old_api": null,
          "new_api": "wait_on_socket_set",
          "old_text": null,
          "new_text": "wait_on_socket_set(sockets, 0)",
          "old_line_content": "\t\t\t\t\t/* On EINTR, go back to top of loop */",
          "new_line_content": "\t\t\t\trc = wait_on_socket_set(sockets, 0);",
          "content_same": false
        },
        {
          "line": 4703,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": " */",
          "new_line_content": "\texit(1);",
          "content_same": false
        },
        {
          "line": 6759,
          "old_api": null,
          "new_api": "pg_log_fatal",
          "old_text": null,
          "new_text": "pg_log_fatal(\"%s() failed: %m\", SOCKET_WAIT_METHOD)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\tpg_log_fatal(\"%s() failed: %m\", SOCKET_WAIT_METHOD);",
          "content_same": false
        },
        {
          "line": 4719,
          "old_api": null,
          "new_api": "isspace",
          "old_text": null,
          "new_text": "isspace((unsigned char) *p)",
          "old_line_content": "\t\t\tp++;",
          "new_line_content": "\t\tif (isspace((unsigned char) *p))",
          "content_same": false
        },
        {
          "line": 6768,
          "old_api": null,
          "new_api": "clear_socket_set",
          "old_text": null,
          "new_text": "clear_socket_set(sockets)",
          "old_line_content": "\t\t\tCState\t   *st = &state[i];",
          "new_line_content": "\t\t\tclear_socket_set(sockets);",
          "content_same": false
        },
        {
          "line": 4721,
          "old_api": null,
          "new_api": "strncmp",
          "old_text": null,
          "new_text": "strncmp(p, \"--\", 2)",
          "old_line_content": "\t\telse",
          "new_line_content": "\t\telse if (strncmp(p, \"--\", 2) == 0)",
          "content_same": false
        },
        {
          "line": 4723,
          "old_api": null,
          "new_api": "strchr",
          "old_text": null,
          "new_text": "strchr(p, '\\n')",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\tp = strchr(p, '\\n');",
          "content_same": false
        },
        {
          "line": 6780,
          "old_api": null,
          "new_api": "PQsocket",
          "old_text": null,
          "new_text": "PQsocket(st->con)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\tint\t\t\tsock = PQsocket(st->con);",
          "content_same": false
        },
        {
          "line": 6784,
          "old_api": null,
          "new_api": "PQerrorMessage",
          "old_text": null,
          "new_text": "PQerrorMessage(st->con)",
          "old_line_content": "\t\t\telse if (st->state == CSTATE_FINISHED ||",
          "new_line_content": "\t\t\t\t\tpg_log_error(\"invalid socket: %s\", PQerrorMessage(st->con));",
          "content_same": false
        },
        {
          "line": 6788,
          "old_api": null,
          "new_api": "socket_has_input",
          "old_text": null,
          "new_text": "socket_has_input(sockets, sock, nsocks++)",
          "old_line_content": "\t\t\t\tcontinue;",
          "new_line_content": "\t\t\t\tif (!socket_has_input(sockets, sock, nsocks++))",
          "content_same": false
        },
        {
          "line": 6798,
          "old_api": null,
          "new_api": "advanceConnectionState",
          "old_text": null,
          "new_text": "advanceConnectionState(thread, st, &aggs)",
          "old_line_content": "\t\t\t\tremains--;",
          "new_line_content": "\t\t\tadvanceConnectionState(thread, st, &aggs);",
          "content_same": false
        },
        {
          "line": 4757,
          "old_api": null,
          "new_api": "initPQExpBuffer",
          "old_text": null,
          "new_text": "initPQExpBuffer(&my_command->lines)",
          "old_line_content": "\tmy_command->varprefix = NULL;\t/* allocated later, if needed */",
          "new_line_content": "\tinitPQExpBuffer(&my_command->lines);",
          "content_same": false
        },
        {
          "line": 4758,
          "old_api": null,
          "new_api": "appendPQExpBufferStr",
          "old_text": null,
          "new_text": "appendPQExpBufferStr(&my_command->lines, p)",
          "old_line_content": "\tmy_command->expr = NULL;",
          "new_line_content": "\tappendPQExpBufferStr(&my_command->lines, p);",
          "content_same": false
        },
        {
          "line": 4763,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(my_command->argv, 0, sizeof(my_command->argv))",
          "old_line_content": "",
          "new_line_content": "\tmemset(my_command->argv, 0, sizeof(my_command->argv));",
          "content_same": false
        },
        {
          "line": 6811,
          "old_api": null,
          "new_api": "pg_time_now",
          "old_text": null,
          "new_text": "pg_time_now()",
          "old_line_content": "\t\t\t\t * entry of the threads array.  That is why this MUST be done",
          "new_line_content": "\t\t\tpg_time_usec_t now = pg_time_now();",
          "content_same": false
        },
        {
          "line": 4766,
          "old_api": null,
          "new_api": "initSimpleStats",
          "old_text": null,
          "new_text": "initSimpleStats(&my_command->stats)",
          "old_line_content": "free_command(Command *command)",
          "new_line_content": "\tinitSimpleStats(&my_command->stats);",
          "content_same": false
        },
        {
          "line": 6821,
          "old_api": null,
          "new_api": "printProgressReport",
          "old_text": null,
          "new_text": "printProgressReport(thread, thread_start, now,\n\t\t\t\t\t\t\t\t\t&last, &last_report)",
          "old_line_content": "\t\t\t\tdo",
          "new_line_content": "\t\t\t\tprintProgressReport(thread, thread_start, now,",
          "content_same": false
        },
        {
          "line": 4775,
          "old_api": null,
          "new_api": "termPQExpBuffer",
          "old_text": null,
          "new_text": "termPQExpBuffer(&command->lines)",
          "old_line_content": "",
          "new_line_content": "\ttermPQExpBuffer(&command->lines);",
          "content_same": false
        },
        {
          "line": 4777,
          "old_api": null,
          "new_api": "pg_free",
          "old_text": null,
          "new_text": "pg_free(command->first_line)",
          "old_line_content": "\t * It should also free expr recursively, but this is currently not needed",
          "new_line_content": "\t\tpg_free(command->first_line);",
          "content_same": false
        },
        {
          "line": 4779,
          "old_api": null,
          "new_api": "pg_free",
          "old_text": null,
          "new_text": "pg_free(command->argv[i])",
          "old_line_content": "\t */",
          "new_line_content": "\t\tpg_free(command->argv[i]);",
          "content_same": false
        },
        {
          "line": 4781,
          "old_api": null,
          "new_api": "pg_free",
          "old_text": null,
          "new_text": "pg_free(command->varprefix)",
          "old_line_content": "}",
          "new_line_content": "\t\tpg_free(command->varprefix);",
          "content_same": false
        },
        {
          "line": 4787,
          "old_api": null,
          "new_api": "pg_free",
          "old_text": null,
          "new_text": "pg_free(command)",
          "old_line_content": "static void",
          "new_line_content": "\tpg_free(command);",
          "content_same": false
        },
        {
          "line": 6837,
          "old_api": null,
          "new_api": "pg_time_now",
          "old_text": null,
          "new_text": "pg_time_now()",
          "old_line_content": "\t\t{",
          "new_line_content": "\tstart = pg_time_now();",
          "content_same": false
        },
        {
          "line": 6838,
          "old_api": null,
          "new_api": "disconnect_all",
          "old_text": null,
          "new_text": "disconnect_all(state, nstate)",
          "old_line_content": "\t\t\t/* log aggregated but not yet reported transactions */",
          "new_line_content": "\tdisconnect_all(state, nstate);",
          "content_same": false
        },
        {
          "line": 6846,
          "old_api": null,
          "new_api": "doLog",
          "old_text": null,
          "new_text": "doLog(thread, state, &aggs, false, 0, 0)",
          "old_line_content": "}",
          "new_line_content": "\t\t\tdoLog(thread, state, &aggs, false, 0, 0);",
          "content_same": false
        },
        {
          "line": 4799,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(my_command->type == SQL_COMMAND)",
          "old_line_content": "\t/* parse query if necessary */",
          "new_line_content": "\tAssert(my_command->type == SQL_COMMAND);",
          "content_same": false
        },
        {
          "line": 6848,
          "old_api": null,
          "new_api": "fclose",
          "old_text": null,
          "new_text": "fclose(thread->logfile)",
          "old_line_content": "static void",
          "new_line_content": "\t\tfclose(thread->logfile);",
          "content_same": false
        },
        {
          "line": 4802,
          "old_api": null,
          "new_api": "strlcpy",
          "old_text": null,
          "new_text": "strlcpy(buffer, my_command->lines.data, sizeof(buffer))",
          "old_line_content": "\t\tcase QUERY_SIMPLE:",
          "new_line_content": "\tstrlcpy(buffer, my_command->lines.data, sizeof(buffer));",
          "content_same": false
        },
        {
          "line": 4803,
          "old_api": null,
          "new_api": "strcspn",
          "old_text": null,
          "new_text": "strcspn(buffer, \"\\n\\r\")",
          "old_line_content": "\t\t\tmy_command->argv[0] = my_command->lines.data;",
          "new_line_content": "\tbuffer[strcspn(buffer, \"\\n\\r\")] = '\\0';",
          "content_same": false
        },
        {
          "line": 4804,
          "old_api": null,
          "new_api": "pg_strdup",
          "old_text": null,
          "new_text": "pg_strdup(buffer)",
          "old_line_content": "\t\t\tmy_command->argc++;",
          "new_line_content": "\tmy_command->first_line = pg_strdup(buffer);",
          "content_same": false
        },
        {
          "line": 6851,
          "old_api": null,
          "new_api": "free_socket_set",
          "old_text": null,
          "new_text": "free_socket_set(sockets)",
          "old_line_content": "\tif (st->con != NULL)",
          "new_line_content": "\tfree_socket_set(sockets);",
          "content_same": false
        },
        {
          "line": 6860,
          "old_api": null,
          "new_api": "PQfinish",
          "old_text": null,
          "new_text": "PQfinish(st->con)",
          "old_line_content": " */",
          "new_line_content": "\t\tPQfinish(st->con);",
          "content_same": false
        },
        {
          "line": 4815,
          "old_api": null,
          "new_api": "parseQuery",
          "old_text": null,
          "new_text": "parseQuery(my_command)",
          "old_line_content": "",
          "new_line_content": "\t\t\tif (!parseQuery(my_command))",
          "content_same": false
        },
        {
          "line": 4816,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "/*",
          "new_line_content": "\t\t\t\texit(1);",
          "content_same": false
        },
        {
          "line": 4819,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": " * At call, we have scanned only the initial backslash.",
          "new_line_content": "\t\t\texit(1);",
          "content_same": false
        },
        {
          "line": 6880,
          "old_api": null,
          "new_api": "pqsignal",
          "old_text": null,
          "new_text": "pqsignal(SIGALRM, handle_sig_alarm)",
          "old_line_content": "win32_timer_callback(PVOID lpParameter, BOOLEAN TimerOrWaitFired)",
          "new_line_content": "\tpqsignal(SIGALRM, handle_sig_alarm);",
          "content_same": false
        },
        {
          "line": 6881,
          "old_api": null,
          "new_api": "alarm",
          "old_text": null,
          "new_text": "alarm(seconds)",
          "old_line_content": "{",
          "new_line_content": "\talarm(seconds);",
          "content_same": false
        },
        {
          "line": 4842,
          "old_api": null,
          "new_api": "expr_scanner_offset",
          "old_text": null,
          "new_text": "expr_scanner_offset(sstate)",
          "old_line_content": "\t\treturn NULL;",
          "new_line_content": "\tstart_offset = expr_scanner_offset(sstate) - 1;",
          "content_same": false
        },
        {
          "line": 4843,
          "old_api": null,
          "new_api": "expr_scanner_get_lineno",
          "old_text": null,
          "new_text": "expr_scanner_get_lineno(sstate, start_offset)",
          "old_line_content": "\t}",
          "new_line_content": "\tlineno = expr_scanner_get_lineno(sstate, start_offset);",
          "content_same": false
        },
        {
          "line": 4848,
          "old_api": null,
          "new_api": "termPQExpBuffer",
          "old_text": null,
          "new_text": "termPQExpBuffer(&word_buf)",
          "old_line_content": "\tmy_command->argc = 0;",
          "new_line_content": "\t\ttermPQExpBuffer(&word_buf);",
          "content_same": false
        },
        {
          "line": 4853,
          "old_api": null,
          "new_api": "pg_malloc0",
          "old_text": null,
          "new_text": "pg_malloc0(sizeof(Command))",
          "old_line_content": "\toffsets[j] = word_offset;",
          "new_line_content": "\tmy_command = (Command *) pg_malloc0(sizeof(Command));",
          "content_same": false
        },
        {
          "line": 6901,
          "old_api": null,
          "new_api": "CreateTimerQueueTimer",
          "old_text": null,
          "new_text": "CreateTimerQueueTimer(&timer, queue,\n\t\t\t\t\t\t\t   win32_timer_callback, NULL, seconds * 1000, 0,\n\t\t\t\t\t\t\t   WT_EXECUTEINTIMERTHREAD | WT_EXECUTEONLYONCE)",
          "old_line_content": "}",
          "new_line_content": "\t\t!CreateTimerQueueTimer(&timer, queue,",
          "content_same": false
        },
        {
          "line": 4856,
          "old_api": null,
          "new_api": "initSimpleStats",
          "old_text": null,
          "new_text": "initSimpleStats(&my_command->stats)",
          "old_line_content": "",
          "new_line_content": "\tinitSimpleStats(&my_command->stats);",
          "content_same": false
        },
        {
          "line": 6905,
          "old_api": null,
          "new_api": "pg_log_fatal",
          "old_text": null,
          "new_text": "pg_log_fatal(\"failed to set timer\")",
          "old_line_content": "",
          "new_line_content": "\t\tpg_log_fatal(\"failed to set timer\");",
          "content_same": false
        },
        {
          "line": 6906,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "/*",
          "new_line_content": "\t\texit(1);",
          "content_same": false
        },
        {
          "line": 4861,
          "old_api": null,
          "new_api": "pg_strdup",
          "old_text": null,
          "new_text": "pg_strdup(word_buf.data)",
          "old_line_content": "\t\tmy_command->meta == META_IF ||",
          "new_line_content": "\tmy_command->argv[j++] = pg_strdup(word_buf.data);",
          "content_same": false
        },
        {
          "line": 4865,
          "old_api": null,
          "new_api": "getMetaCommand",
          "old_text": null,
          "new_text": "getMetaCommand(my_command->argv[0])",
          "old_line_content": "",
          "new_line_content": "\tmy_command->meta = getMetaCommand(my_command->argv[0]);",
          "content_same": false
        },
        {
          "line": 4876,
          "old_api": null,
          "new_api": "expr_lex_one_word",
          "old_text": null,
          "new_text": "expr_lex_one_word(sstate, &word_buf, &word_offset)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tif (!expr_lex_one_word(sstate, &word_buf, &word_offset))",
          "content_same": false
        },
        {
          "line": 4877,
          "old_api": null,
          "new_api": "syntax_error",
          "old_text": null,
          "new_text": "syntax_error(source, lineno, my_command->first_line, my_command->argv[0],\n\t\t\t\t\t\t\t \"missing argument\", NULL, -1)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\tsyntax_error(source, lineno, my_command->first_line, my_command->argv[0],",
          "content_same": false
        },
        {
          "line": 4881,
          "old_api": null,
          "new_api": "pg_strdup",
          "old_text": null,
          "new_text": "pg_strdup(word_buf.data)",
          "old_line_content": "",
          "new_line_content": "\t\t\tmy_command->argv[j++] = pg_strdup(word_buf.data);",
          "content_same": false
        },
        {
          "line": 4886,
          "old_api": null,
          "new_api": "expr_scanner_init",
          "old_text": null,
          "new_text": "expr_scanner_init(sstate, source, lineno, start_offset,\n\t\t\t\t\t\t\t\t\t  my_command->argv[0])",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\tyyscanner = expr_scanner_init(sstate, source, lineno, start_offset,",
          "content_same": false
        },
        {
          "line": 4889,
          "old_api": null,
          "new_api": "expr_yyparse",
          "old_text": null,
          "new_text": "expr_yyparse(yyscanner)",
          "old_line_content": "",
          "new_line_content": "\t\tif (expr_yyparse(yyscanner) != 0)",
          "content_same": false
        },
        {
          "line": 4901,
          "old_api": null,
          "new_api": "expr_scanner_offset",
          "old_text": null,
          "new_text": "expr_scanner_offset(sstate)",
          "old_line_content": "\t\treturn my_command;",
          "new_line_content": "\t\t\t\t\t\t\t\t\t   expr_scanner_offset(sstate),",
          "content_same": false
        },
        {
          "line": 4904,
          "old_api": null,
          "new_api": "expr_scanner_finish",
          "old_text": null,
          "new_text": "expr_scanner_finish(yyscanner)",
          "old_line_content": "\t/* For all other commands, collect remaining words. */",
          "new_line_content": "\t\texpr_scanner_finish(yyscanner);",
          "content_same": false
        },
        {
          "line": 4906,
          "old_api": null,
          "new_api": "termPQExpBuffer",
          "old_text": null,
          "new_text": "termPQExpBuffer(&word_buf)",
          "old_line_content": "\t{",
          "new_line_content": "\t\ttermPQExpBuffer(&word_buf);",
          "content_same": false
        },
        {
          "line": 6955,
          "old_api": null,
          "new_api": "offsetof",
          "old_text": null,
          "new_text": "offsetof(socket_set, pollfds)",
          "old_line_content": "static void",
          "new_line_content": "\tsa = (socket_set *) pg_malloc0(offsetof(socket_set, pollfds) +",
          "content_same": false
        },
        {
          "line": 6965,
          "old_api": null,
          "new_api": "pg_free",
          "old_text": null,
          "new_text": "pg_free(sa)",
          "old_line_content": "}",
          "new_line_content": "\tpg_free(sa);",
          "content_same": false
        },
        {
          "line": 4919,
          "old_api": null,
          "new_api": "syntax_error",
          "old_text": null,
          "new_text": "syntax_error(source, lineno, my_command->first_line, my_command->argv[0],\n\t\t\t\t\t\t \"too many arguments\", NULL, -1)",
          "old_line_content": "",
          "new_line_content": "\t\t\tsyntax_error(source, lineno, my_command->first_line, my_command->argv[0],",
          "content_same": false
        },
        {
          "line": 4923,
          "old_api": null,
          "new_api": "pg_strdup",
          "old_text": null,
          "new_text": "pg_strdup(word_buf.data)",
          "old_line_content": "\t\t\t\t\t\t\t\t   start_offset,",
          "new_line_content": "\t\tmy_command->argv[j++] = pg_strdup(word_buf.data);",
          "content_same": false
        },
        {
          "line": 4929,
          "old_api": null,
          "new_api": "expr_scanner_get_substring",
          "old_text": null,
          "new_text": "expr_scanner_get_substring(sstate,\n\t\t\t\t\t\t\t\t   start_offset,\n\t\t\t\t\t\t\t\t   expr_scanner_offset(sstate),\n\t\t\t\t\t\t\t\t   true)",
          "old_line_content": "\t\tif (my_command->argc < 2)",
          "new_line_content": "\t\texpr_scanner_get_substring(sstate,",
          "content_same": false
        },
        {
          "line": 6977,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(idx < sa->maxfds && idx == sa->curfds)",
          "old_line_content": "static int",
          "new_line_content": "\tAssert(idx < sa->maxfds && idx == sa->curfds);",
          "content_same": false
        },
        {
          "line": 4931,
          "old_api": null,
          "new_api": "expr_scanner_offset",
          "old_text": null,
          "new_text": "expr_scanner_offset(sstate)",
          "old_line_content": "\t\t\t\t\t\t \"missing argument\", NULL, -1);",
          "new_line_content": "\t\t\t\t\t\t\t\t   expr_scanner_offset(sstate),",
          "content_same": false
        },
        {
          "line": 4937,
          "old_api": null,
          "new_api": "syntax_error",
          "old_text": null,
          "new_text": "syntax_error(source, lineno, my_command->first_line, my_command->argv[0],\n\t\t\t\t\t\t \"missing argument\", NULL, -1)",
          "old_line_content": "",
          "new_line_content": "\t\t\tsyntax_error(source, lineno, my_command->first_line, my_command->argv[0],",
          "content_same": false
        },
        {
          "line": 4941,
          "old_api": null,
          "new_api": "syntax_error",
          "old_text": null,
          "new_text": "syntax_error(source, lineno, my_command->first_line, my_command->argv[0],\n\t\t\t\t\t\t \"too many arguments\", NULL,\n\t\t\t\t\t\t offsets[3] - start_offset)",
          "old_line_content": "\t\t * will be parsed with atoi, which ignores trailing non-digit",
          "new_line_content": "\t\t\tsyntax_error(source, lineno, my_command->first_line, my_command->argv[0],",
          "content_same": false
        },
        {
          "line": 6993,
          "old_api": null,
          "new_api": "ppoll",
          "old_text": null,
          "new_text": "ppoll(sa->pollfds, sa->curfds, &timeout, NULL)",
          "old_line_content": "",
          "new_line_content": "\t\treturn ppoll(sa->pollfds, sa->curfds, &timeout, NULL);",
          "content_same": false
        },
        {
          "line": 6997,
          "old_api": null,
          "new_api": "ppoll",
          "old_text": null,
          "new_text": "ppoll(sa->pollfds, sa->curfds, NULL, NULL)",
          "old_line_content": "\t/*",
          "new_line_content": "\t\treturn ppoll(sa->pollfds, sa->curfds, NULL, NULL);",
          "content_same": false
        },
        {
          "line": 4961,
          "old_api": null,
          "new_api": "isdigit",
          "old_text": null,
          "new_text": "isdigit((unsigned char) *c)",
          "old_line_content": "\t\t\tif (*c)",
          "new_line_content": "\t\t\tif (*c && isdigit((unsigned char) *c))",
          "content_same": false
        },
        {
          "line": 4965,
          "old_api": null,
          "new_api": "isdigit",
          "old_text": null,
          "new_text": "isdigit((unsigned char) *c)",
          "old_line_content": "\t\t\t\t\tmy_command->argv[2] = c;",
          "new_line_content": "\t\t\twhile (*c && isdigit((unsigned char) *c))",
          "content_same": false
        },
        {
          "line": 7015,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(idx < sa->curfds && sa->pollfds[idx].fd == fd)",
          "old_line_content": "",
          "new_line_content": "\tAssert(idx < sa->curfds && sa->pollfds[idx].fd == fd);",
          "content_same": false
        },
        {
          "line": 7026,
          "old_api": null,
          "new_api": "pg_malloc0",
          "old_text": null,
          "new_text": "pg_malloc0(sizeof(socket_set))",
          "old_line_content": "}",
          "new_line_content": "\treturn (socket_set *) pg_malloc0(sizeof(socket_set));",
          "content_same": false
        },
        {
          "line": 4982,
          "old_api": null,
          "new_api": "syntax_error",
          "old_text": null,
          "new_text": "syntax_error(source, lineno, my_command->first_line, my_command->argv[0],\n\t\t\t\t\t\t\t\t \"invalid sleep time, must be an integer\",\n\t\t\t\t\t\t\t\t my_command->argv[1], offsets[1] - start_offset)",
          "old_line_content": "\t\tif (my_command->argc == 3)",
          "new_line_content": "\t\t\t\t\tsyntax_error(source, lineno, my_command->first_line, my_command->argv[0],",
          "content_same": false
        },
        {
          "line": 7032,
          "old_api": null,
          "new_api": "pg_free",
          "old_text": null,
          "new_text": "pg_free(sa)",
          "old_line_content": "\tsa->maxfd = -1;",
          "new_line_content": "\tpg_free(sa);",
          "content_same": false
        },
        {
          "line": 7038,
          "old_api": null,
          "new_api": "FD_ZERO",
          "old_text": null,
          "new_text": "FD_ZERO(&sa->fds)",
          "old_line_content": "\tif (fd < 0 || fd >= FD_SETSIZE)",
          "new_line_content": "\tFD_ZERO(&sa->fds);",
          "content_same": false
        },
        {
          "line": 4991,
          "old_api": null,
          "new_api": "pg_strcasecmp",
          "old_text": null,
          "new_text": "pg_strcasecmp(my_command->argv[2], \"us\")",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\tif (pg_strcasecmp(my_command->argv[2], \"us\") != 0 &&",
          "content_same": false
        },
        {
          "line": 4992,
          "old_api": null,
          "new_api": "pg_strcasecmp",
          "old_text": null,
          "new_text": "pg_strcasecmp(my_command->argv[2], \"ms\")",
          "old_line_content": "\telse if (my_command->meta == META_SETSHELL)",
          "new_line_content": "\t\t\t\tpg_strcasecmp(my_command->argv[2], \"ms\") != 0 &&",
          "content_same": false
        },
        {
          "line": 4993,
          "old_api": null,
          "new_api": "pg_strcasecmp",
          "old_text": null,
          "new_text": "pg_strcasecmp(my_command->argv[2], \"s\")",
          "old_line_content": "\t{",
          "new_line_content": "\t\t\t\tpg_strcasecmp(my_command->argv[2], \"s\") != 0)",
          "content_same": false
        },
        {
          "line": 4994,
          "old_api": null,
          "new_api": "syntax_error",
          "old_text": null,
          "new_text": "syntax_error(source, lineno, my_command->first_line, my_command->argv[0],\n\t\t\t\t\t\t\t \"unrecognized time unit, must be us, ms or s\",\n\t\t\t\t\t\t\t my_command->argv[2], offsets[2] - start_offset)",
          "old_line_content": "\t\tif (my_command->argc < 3)",
          "new_line_content": "\t\t\t\tsyntax_error(source, lineno, my_command->first_line, my_command->argv[0],",
          "content_same": false
        },
        {
          "line": 5002,
          "old_api": null,
          "new_api": "syntax_error",
          "old_text": null,
          "new_text": "syntax_error(source, lineno, my_command->first_line, my_command->argv[0],\n\t\t\t\t\t\t \"missing argument\", NULL, -1)",
          "old_line_content": "\t\t\t\t\t\t \"missing command\", NULL, -1);",
          "new_line_content": "\t\t\tsyntax_error(source, lineno, my_command->first_line, my_command->argv[0],",
          "content_same": false
        },
        {
          "line": 7051,
          "old_api": null,
          "new_api": "pg_log_fatal",
          "old_text": null,
          "new_text": "pg_log_fatal(\"too many client connections for select()\")",
          "old_line_content": "",
          "new_line_content": "\t\tpg_log_fatal(\"too many client connections for select()\");",
          "content_same": false
        },
        {
          "line": 7052,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "static int",
          "new_line_content": "\t\texit(1);",
          "content_same": false
        },
        {
          "line": 7054,
          "old_api": null,
          "new_api": "FD_SET",
          "old_text": null,
          "new_text": "FD_SET(fd, &sa->fds)",
          "old_line_content": "{",
          "new_line_content": "\tFD_SET(fd, &sa->fds);",
          "content_same": false
        },
        {
          "line": 5008,
          "old_api": null,
          "new_api": "syntax_error",
          "old_text": null,
          "new_text": "syntax_error(source, lineno, my_command->first_line, my_command->argv[0],\n\t\t\t\t\t\t \"missing command\", NULL, -1)",
          "old_line_content": "\t\tif (my_command->argc != 1)",
          "new_line_content": "\t\t\tsyntax_error(source, lineno, my_command->first_line, my_command->argv[0],",
          "content_same": false
        },
        {
          "line": 5016,
          "old_api": null,
          "new_api": "syntax_error",
          "old_text": null,
          "new_text": "syntax_error(source, lineno, my_command->first_line, my_command->argv[0],\n\t\t\t\t\t\t \"unexpected argument\", NULL, -1)",
          "old_line_content": "\t\t\t\t\t\t \"too many arguments\", NULL, -1);",
          "new_line_content": "\t\t\tsyntax_error(source, lineno, my_command->first_line, my_command->argv[0],",
          "content_same": false
        },
        {
          "line": 7068,
          "old_api": null,
          "new_api": "select",
          "old_text": null,
          "new_text": "select(sa->maxfd + 1, &sa->fds, NULL, NULL, &timeout)",
          "old_line_content": "",
          "new_line_content": "\t\treturn select(sa->maxfd + 1, &sa->fds, NULL, NULL, &timeout);",
          "content_same": false
        },
        {
          "line": 5022,
          "old_api": null,
          "new_api": "syntax_error",
          "old_text": null,
          "new_text": "syntax_error(source, lineno, my_command->first_line, my_command->argv[0],\n\t\t\t\t\t\t \"too many arguments\", NULL, -1)",
          "old_line_content": "\t\t\t\t\t \"invalid command\", NULL, -1);",
          "new_line_content": "\t\t\tsyntax_error(source, lineno, my_command->first_line, my_command->argv[0],",
          "content_same": false
        },
        {
          "line": 5028,
          "old_api": null,
          "new_api": "syntax_error",
          "old_text": null,
          "new_text": "syntax_error(source, lineno, my_command->first_line, my_command->argv[0],\n\t\t\t\t\t \"invalid command\", NULL, -1)",
          "old_line_content": "}",
          "new_line_content": "\t\tsyntax_error(source, lineno, my_command->first_line, my_command->argv[0],",
          "content_same": false
        },
        {
          "line": 7079,
          "old_api": null,
          "new_api": "FD_ISSET",
          "old_text": null,
          "new_text": "FD_ISSET(fd, &sa->fds)",
          "old_line_content": "",
          "new_line_content": "\treturn (FD_ISSET(fd, &sa->fds) != 0);",
          "content_same": false
        },
        {
          "line": 5032,
          "old_api": null,
          "new_api": "termPQExpBuffer",
          "old_text": null,
          "new_text": "termPQExpBuffer(&word_buf)",
          "old_line_content": "{",
          "new_line_content": "\ttermPQExpBuffer(&word_buf);",
          "content_same": false
        },
        {
          "line": 5040,
          "old_api": null,
          "new_api": "pg_log_fatal",
          "old_text": null,
          "new_text": "pg_log_fatal(\"condition error in script \\\"%s\\\" command %d: %s\",\n\t\t\t\t desc, cmdn, msg)",
          "old_line_content": " */",
          "new_line_content": "\tpg_log_fatal(\"condition error in script \\\"%s\\\" command %d: %s\",",
          "content_same": false
        },
        {
          "line": 5042,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "CheckConditional(ParsedScript ps)",
          "new_line_content": "\texit(1);",
          "content_same": false
        },
        {
          "line": 5052,
          "old_api": null,
          "new_api": "conditional_stack_create",
          "old_text": null,
          "new_text": "conditional_stack_create()",
          "old_line_content": "\t\tif (cmd->type == META_COMMAND)",
          "new_line_content": "\tConditionalStack cs = conditional_stack_create();",
          "content_same": false
        },
        {
          "line": 5064,
          "old_api": null,
          "new_api": "conditional_stack_push",
          "old_text": null,
          "new_text": "conditional_stack_push(cs, IFSTATE_FALSE)",
          "old_line_content": "\t\t\t\t\tbreak;",
          "new_line_content": "\t\t\t\t\tconditional_stack_push(cs, IFSTATE_FALSE);",
          "content_same": false
        },
        {
          "line": 5075,
          "old_api": null,
          "new_api": "conditional_stack_peek",
          "old_text": null,
          "new_text": "conditional_stack_peek(cs)",
          "old_line_content": "\t\t\t\t\tbreak;",
          "new_line_content": "\t\t\t\t\tif (conditional_stack_peek(cs) == IFSTATE_ELSE_FALSE)",
          "content_same": false
        },
        {
          "line": 5076,
          "old_api": null,
          "new_api": "ConditionError",
          "old_text": null,
          "new_text": "ConditionError(ps.desc, i + 1, \"\\\\else after \\\\else\")",
          "old_line_content": "\t\t\t\tdefault:",
          "new_line_content": "\t\t\t\t\t\tConditionError(ps.desc, i + 1, \"\\\\else after \\\\else\");",
          "content_same": false
        },
        {
          "line": 5077,
          "old_api": null,
          "new_api": "conditional_stack_poke",
          "old_text": null,
          "new_text": "conditional_stack_poke(cs, IFSTATE_ELSE_FALSE)",
          "old_line_content": "\t\t\t\t\t/* ignore anything else... */",
          "new_line_content": "\t\t\t\t\tconditional_stack_poke(cs, IFSTATE_ELSE_FALSE);",
          "content_same": false
        },
        {
          "line": 5080,
          "old_api": null,
          "new_api": "conditional_stack_pop",
          "old_text": null,
          "new_text": "conditional_stack_pop(cs)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\t\t\tif (!conditional_stack_pop(cs))",
          "content_same": false
        },
        {
          "line": 5081,
          "old_api": null,
          "new_api": "ConditionError",
          "old_text": null,
          "new_text": "ConditionError(ps.desc, i + 1, \"\\\\endif without matching \\\\if\")",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\t\t\t\tConditionError(ps.desc, i + 1, \"\\\\endif without matching \\\\if\");",
          "content_same": false
        },
        {
          "line": 5089,
          "old_api": null,
          "new_api": "conditional_stack_empty",
          "old_text": null,
          "new_text": "conditional_stack_empty(cs)",
          "old_line_content": " * and add it to the list of scripts.",
          "new_line_content": "\tif (!conditional_stack_empty(cs))",
          "content_same": false
        },
        {
          "line": 5090,
          "old_api": null,
          "new_api": "ConditionError",
          "old_text": null,
          "new_text": "ConditionError(ps.desc, i + 1, \"\\\\if without matching \\\\endif\")",
          "old_line_content": " */",
          "new_line_content": "\t\tConditionError(ps.desc, i + 1, \"\\\\if without matching \\\\endif\");",
          "content_same": false
        },
        {
          "line": 5091,
          "old_api": null,
          "new_api": "conditional_stack_destroy",
          "old_text": null,
          "new_text": "conditional_stack_destroy(cs)",
          "old_line_content": "static void",
          "new_line_content": "\tconditional_stack_destroy(cs);",
          "content_same": false
        },
        {
          "line": 5115,
          "old_api": null,
          "new_api": "pg_malloc",
          "old_text": null,
          "new_text": "pg_malloc(sizeof(Command *) * alloc_num)",
          "old_line_content": "\t * Ideally, we'd scan scripts using the encoding and stdstrings settings",
          "new_line_content": "\tps.commands = (Command **) pg_malloc(sizeof(Command *) * alloc_num);",
          "content_same": false
        },
        {
          "line": 5116,
          "old_api": null,
          "new_api": "initStats",
          "old_text": null,
          "new_text": "initStats(&ps.stats, 0)",
          "old_line_content": "\t * we get from a DB connection.  However, without major rearrangement of",
          "new_line_content": "\tinitStats(&ps.stats, 0);",
          "content_same": false
        },
        {
          "line": 5119,
          "old_api": null,
          "new_api": "psql_scan_create",
          "old_text": null,
          "new_text": "psql_scan_create(&pgbench_callbacks)",
          "old_line_content": "\t * with any backend-safe encoding, though conceivably we could be fooled",
          "new_line_content": "\tsstate = psql_scan_create(&pgbench_callbacks);",
          "content_same": false
        },
        {
          "line": 5130,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(script)",
          "old_line_content": "\tfor (;;)",
          "new_line_content": "\tpsql_scan_setup(sstate, script, strlen(script), 0, true);",
          "content_same": false
        },
        {
          "line": 5131,
          "old_api": null,
          "new_api": "expr_scanner_offset",
          "old_text": null,
          "new_text": "expr_scanner_offset(sstate)",
          "old_line_content": "\t{",
          "new_line_content": "\tstart_offset = expr_scanner_offset(sstate) - 1;",
          "content_same": false
        },
        {
          "line": 5133,
          "old_api": null,
          "new_api": "initPQExpBuffer",
          "old_text": null,
          "new_text": "initPQExpBuffer(&line_buf)",
          "old_line_content": "\t\tpromptStatus_t prompt;",
          "new_line_content": "\tinitPQExpBuffer(&line_buf);",
          "content_same": false
        },
        {
          "line": 5143,
          "old_api": null,
          "new_api": "resetPQExpBuffer",
          "old_text": null,
          "new_text": "resetPQExpBuffer(&line_buf)",
          "old_line_content": "",
          "new_line_content": "\t\tresetPQExpBuffer(&line_buf);",
          "content_same": false
        },
        {
          "line": 5144,
          "old_api": null,
          "new_api": "expr_scanner_get_lineno",
          "old_text": null,
          "new_text": "expr_scanner_get_lineno(sstate, start_offset)",
          "old_line_content": "\t\t/* store new command */",
          "new_line_content": "\t\tlineno = expr_scanner_get_lineno(sstate, start_offset);",
          "content_same": false
        },
        {
          "line": 5146,
          "old_api": null,
          "new_api": "psql_scan",
          "old_text": null,
          "new_text": "psql_scan(sstate, &line_buf, &prompt)",
          "old_line_content": "\t\t\tps.commands[index++] = command;",
          "new_line_content": "\t\tsr = psql_scan(sstate, &line_buf, &prompt);",
          "content_same": false
        },
        {
          "line": 5149,
          "old_api": null,
          "new_api": "create_sql_command",
          "old_text": null,
          "new_text": "create_sql_command(&line_buf, desc)",
          "old_line_content": "\t\tif (sr == PSCAN_BACKSLASH)",
          "new_line_content": "\t\tcommand = create_sql_command(&line_buf, desc);",
          "content_same": false
        },
        {
          "line": 5158,
          "old_api": null,
          "new_api": "process_backslash_command",
          "old_text": null,
          "new_text": "process_backslash_command(sstate, desc)",
          "old_line_content": "\t\t\t\t */",
          "new_line_content": "\t\t\tcommand = process_backslash_command(sstate, desc);",
          "content_same": false
        },
        {
          "line": 5171,
          "old_api": null,
          "new_api": "syntax_error",
          "old_text": null,
          "new_text": "syntax_error(desc, lineno, NULL, NULL,\n\t\t\t\t\t\t\t\t\t \"\\\\gset must follow an SQL command\",\n\t\t\t\t\t\t\t\t\t NULL, -1)",
          "old_line_content": "\t\t\t\t\t\tcmd->varprefix != NULL)",
          "new_line_content": "\t\t\t\t\t\tsyntax_error(desc, lineno, NULL, NULL,",
          "content_same": false
        },
        {
          "line": 5179,
          "old_api": null,
          "new_api": "syntax_error",
          "old_text": null,
          "new_text": "syntax_error(desc, lineno, NULL, NULL,\n\t\t\t\t\t\t\t\t\t \"\\\\gset must follow an SQL command\",\n\t\t\t\t\t\t\t\t\t cmd->first_line, -1)",
          "old_line_content": "\t\t\t\t\telse",
          "new_line_content": "\t\t\t\t\t\tsyntax_error(desc, lineno, NULL, NULL,",
          "content_same": false
        },
        {
          "line": 5185,
          "old_api": null,
          "new_api": "pg_strdup",
          "old_text": null,
          "new_text": "pg_strdup(\"\")",
          "old_line_content": "\t\t\t\t\t/* cleanup unused command */",
          "new_line_content": "\t\t\t\t\t\tcmd->varprefix = pg_strdup(\"\");",
          "content_same": false
        },
        {
          "line": 5187,
          "old_api": null,
          "new_api": "pg_strdup",
          "old_text": null,
          "new_text": "pg_strdup(command->argv[1])",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t\t\tcmd->varprefix = pg_strdup(command->argv[1]);",
          "content_same": false
        },
        {
          "line": 5193,
          "old_api": null,
          "new_api": "free_command",
          "old_text": null,
          "new_text": "free_command(command)",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\t\t\tfree_command(command);",
          "content_same": false
        },
        {
          "line": 5212,
          "old_api": null,
          "new_api": "pg_realloc",
          "old_text": null,
          "new_text": "pg_realloc(ps.commands, sizeof(Command *) * alloc_num)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\tpg_realloc(ps.commands, sizeof(Command *) * alloc_num);",
          "content_same": false
        },
        {
          "line": 5222,
          "old_api": null,
          "new_api": "addScript",
          "old_text": null,
          "new_text": "addScript(ps)",
          "old_line_content": "/*",
          "new_line_content": "\taddScript(ps);",
          "content_same": false
        },
        {
          "line": 5224,
          "old_api": null,
          "new_api": "termPQExpBuffer",
          "old_text": null,
          "new_text": "termPQExpBuffer(&line_buf)",
          "old_line_content": " *",
          "new_line_content": "\ttermPQExpBuffer(&line_buf);",
          "content_same": false
        },
        {
          "line": 5225,
          "old_api": null,
          "new_api": "psql_scan_finish",
          "old_text": null,
          "new_text": "psql_scan_finish(sstate)",
          "old_line_content": " * The buffer will typically be larger than necessary, but we don't care",
          "new_line_content": "\tpsql_scan_finish(sstate);",
          "content_same": false
        },
        {
          "line": 5226,
          "old_api": null,
          "new_api": "psql_scan_destroy",
          "old_text": null,
          "new_text": "psql_scan_destroy(sstate)",
          "old_line_content": " * in this program, because we'll free it as soon as we've parsed the script.",
          "new_line_content": "\tpsql_scan_destroy(sstate);",
          "content_same": false
        },
        {
          "line": 5242,
          "old_api": null,
          "new_api": "pg_malloc",
          "old_text": null,
          "new_text": "pg_malloc(buflen)",
          "old_line_content": "\t\tused += nread;",
          "new_line_content": "\tbuf = (char *) pg_malloc(buflen);",
          "content_same": false
        },
        {
          "line": 5255,
          "old_api": null,
          "new_api": "pg_realloc",
          "old_text": null,
          "new_text": "pg_realloc(buf, buflen)",
          "old_line_content": "",
          "new_line_content": "\t\tbuf = (char *) pg_realloc(buf, buflen);",
          "content_same": false
        },
        {
          "line": 5275,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(filename, \"-\")",
          "old_line_content": "",
          "new_line_content": "\tif (strcmp(filename, \"-\") == 0)",
          "content_same": false
        },
        {
          "line": 5277,
          "old_api": null,
          "new_api": "fopen",
          "old_text": null,
          "new_text": "fopen(filename, \"r\")",
          "old_line_content": "",
          "new_line_content": "\telse if ((fd = fopen(filename, \"r\")) == NULL)",
          "content_same": false
        },
        {
          "line": 5279,
          "old_api": null,
          "new_api": "pg_log_fatal",
          "old_text": null,
          "new_text": "pg_log_fatal(\"could not open file \\\"%s\\\": %m\", filename)",
          "old_line_content": "\t{",
          "new_line_content": "\t\tpg_log_fatal(\"could not open file \\\"%s\\\": %m\", filename);",
          "content_same": false
        },
        {
          "line": 5283,
          "old_api": null,
          "new_api": "read_file_contents",
          "old_text": null,
          "new_text": "read_file_contents(fd)",
          "old_line_content": "",
          "new_line_content": "\tbuf = read_file_contents(fd);",
          "content_same": false
        },
        {
          "line": 5288,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "",
          "new_line_content": "\t\texit(1);",
          "content_same": false
        },
        {
          "line": 5292,
          "old_api": null,
          "new_api": "fclose",
          "old_text": null,
          "new_text": "fclose(fd)",
          "old_line_content": "/* Parse the given builtin script and add it to the list. */",
          "new_line_content": "\t\tfclose(fd);",
          "content_same": false
        },
        {
          "line": 5294,
          "old_api": null,
          "new_api": "ParseScript",
          "old_text": null,
          "new_text": "ParseScript(buf, filename, weight)",
          "old_line_content": "process_builtin(const BuiltinScript *bi, int weight)",
          "new_line_content": "\tParseScript(buf, filename, weight);",
          "content_same": false
        },
        {
          "line": 5303,
          "old_api": null,
          "new_api": "ParseScript",
          "old_text": null,
          "new_text": "ParseScript(bi->script, bi->desc, weight)",
          "old_line_content": "\tint\t\t\ti;",
          "new_line_content": "\tParseScript(bi->script, bi->desc, weight);",
          "content_same": false
        },
        {
          "line": 5312,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr, \"Available builtin scripts:\\n\")",
          "old_line_content": "static const BuiltinScript *",
          "new_line_content": "\tfprintf(stderr, \"Available builtin scripts:\\n\");",
          "content_same": false
        },
        {
          "line": 5313,
          "old_api": null,
          "new_api": "lengthof",
          "old_text": null,
          "new_text": "lengthof(builtin_script)",
          "old_line_content": "findBuiltin(const char *name)",
          "new_line_content": "\tfor (i = 0; i < lengthof(builtin_script); i++)",
          "content_same": false
        },
        {
          "line": 5314,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr, \"  %13s: %s\\n\", builtin_script[i].name, builtin_script[i].desc)",
          "old_line_content": "{",
          "new_line_content": "\t\tfprintf(stderr, \"  %13s: %s\\n\", builtin_script[i].name, builtin_script[i].desc);",
          "content_same": false
        },
        {
          "line": 5315,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr, \"\\n\")",
          "old_line_content": "\tint\t\t\ti,",
          "new_line_content": "\tfprintf(stderr, \"\\n\");",
          "content_same": false
        },
        {
          "line": 5324,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(name)",
          "old_line_content": "\t\t\tresult = &builtin_script[i];",
          "new_line_content": "\t\t\t\tlen = strlen(name);",
          "content_same": false
        },
        {
          "line": 5327,
          "old_api": null,
          "new_api": "lengthof",
          "old_text": null,
          "new_text": "lengthof(builtin_script)",
          "old_line_content": "\t}",
          "new_line_content": "\tfor (i = 0; i < lengthof(builtin_script); i++)",
          "content_same": false
        },
        {
          "line": 5329,
          "old_api": null,
          "new_api": "strncmp",
          "old_text": null,
          "new_text": "strncmp(builtin_script[i].name, name, len)",
          "old_line_content": "\t/* ok, unambiguous result */",
          "new_line_content": "\t\tif (strncmp(builtin_script[i].name, name, len) == 0)",
          "content_same": false
        },
        {
          "line": 5342,
          "old_api": null,
          "new_api": "pg_log_fatal",
          "old_text": null,
          "new_text": "pg_log_fatal(\"no builtin script found for name \\\"%s\\\"\", name)",
          "old_line_content": "",
          "new_line_content": "\t\tpg_log_fatal(\"no builtin script found for name \\\"%s\\\"\", name);",
          "content_same": false
        },
        {
          "line": 5344,
          "old_api": null,
          "new_api": "pg_log_fatal",
          "old_text": null,
          "new_text": "pg_log_fatal(\"ambiguous builtin name: %d builtin scripts found for prefix \\\"%s\\\"\", found, name)",
          "old_line_content": " * Determine the weight specification from a script option (-b, -f), if any,",
          "new_line_content": "\t\tpg_log_fatal(\"ambiguous builtin name: %d builtin scripts found for prefix \\\"%s\\\"\", found, name);",
          "content_same": false
        },
        {
          "line": 5346,
          "old_api": null,
          "new_api": "listAvailableScripts",
          "old_text": null,
          "new_text": "listAvailableScripts()",
          "old_line_content": " * script name is returned in *script as a malloc'd string.",
          "new_line_content": "\tlistAvailableScripts();",
          "content_same": false
        },
        {
          "line": 5347,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": " */",
          "new_line_content": "\texit(1);",
          "content_same": false
        },
        {
          "line": 5368,
          "old_api": null,
          "new_api": "pg_malloc",
          "old_text": null,
          "new_text": "pg_malloc(namelen + 1)",
          "old_line_content": "\t\tif (errno != 0 || badp == sep + 1 || *badp != '\\0')",
          "new_line_content": "\t\t*script = pg_malloc(namelen + 1);",
          "content_same": false
        },
        {
          "line": 5369,
          "old_api": null,
          "new_api": "strncpy",
          "old_text": null,
          "new_text": "strncpy(*script, option, namelen)",
          "old_line_content": "\t\t{",
          "new_line_content": "\t\tstrncpy(*script, option, namelen);",
          "content_same": false
        },
        {
          "line": 5374,
          "old_api": null,
          "new_api": "strtol",
          "old_text": null,
          "new_text": "strtol(sep + 1, &badp, 10)",
          "old_line_content": "\t\t{",
          "new_line_content": "\t\twtmp = strtol(sep + 1, &badp, 10);",
          "content_same": false
        },
        {
          "line": 5378,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\texit(1);",
          "content_same": false
        },
        {
          "line": 5382,
          "old_api": null,
          "new_api": "pg_log_fatal",
          "old_text": null,
          "new_text": "pg_log_fatal(\"weight specification out of range (0 .. %u): %lld\",\n\t\t\t\t\t\t INT_MAX, (long long) wtmp)",
          "old_line_content": "\t{",
          "new_line_content": "\t\t\tpg_log_fatal(\"weight specification out of range (0 .. %u): %lld\",",
          "content_same": false
        },
        {
          "line": 5384,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "\t\tweight = 1;",
          "new_line_content": "\t\t\texit(1);",
          "content_same": false
        },
        {
          "line": 5390,
          "old_api": null,
          "new_api": "pg_strdup",
          "old_text": null,
          "new_text": "pg_strdup(option)",
          "old_line_content": "/* append a script to the list of scripts to process */",
          "new_line_content": "\t\t*script = pg_strdup(option);",
          "content_same": false
        },
        {
          "line": 5404,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "\t}",
          "new_line_content": "\t\texit(1);",
          "content_same": false
        },
        {
          "line": 5409,
          "old_api": null,
          "new_api": "pg_log_fatal",
          "old_text": null,
          "new_text": "pg_log_fatal(\"at most %d SQL scripts are allowed\", MAX_SCRIPTS)",
          "old_line_content": "\tnum_scripts++;",
          "new_line_content": "\t\tpg_log_fatal(\"at most %d SQL scripts are allowed\", MAX_SCRIPTS);",
          "content_same": false
        },
        {
          "line": 5410,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "}",
          "new_line_content": "\t\texit(1);",
          "content_same": false
        },
        {
          "line": 5413,
          "old_api": null,
          "new_api": "CheckConditional",
          "old_text": null,
          "new_text": "CheckConditional(script)",
          "old_line_content": " * Print progress report.",
          "new_line_content": "\tCheckConditional(script);",
          "content_same": false
        },
        {
          "line": 5451,
          "old_api": null,
          "new_api": "initStats",
          "old_text": null,
          "new_text": "initStats(&cur, 0)",
          "old_line_content": "\t}",
          "new_line_content": "\tinitStats(&cur, 0);",
          "content_same": false
        },
        {
          "line": 5454,
          "old_api": null,
          "new_api": "mergeSimpleStats",
          "old_text": null,
          "new_text": "mergeSimpleStats(&cur.latency, &threads[i].stats.latency)",
          "old_line_content": "\tntx = (cur.cnt - cur.skipped) - (last->cnt - last->skipped);",
          "new_line_content": "\t\tmergeSimpleStats(&cur.latency, &threads[i].stats.latency);",
          "content_same": false
        },
        {
          "line": 5455,
          "old_api": null,
          "new_api": "mergeSimpleStats",
          "old_text": null,
          "new_text": "mergeSimpleStats(&cur.lag, &threads[i].stats.lag)",
          "old_line_content": "\ttotal_run = (now - test_start) / 1000000.0;",
          "new_line_content": "\t\tmergeSimpleStats(&cur.lag, &threads[i].stats.lag);",
          "content_same": false
        },
        {
          "line": 5468,
          "old_api": null,
          "new_api": "sqrt",
          "old_text": null,
          "new_text": "sqrt(sqlat - 1000000.0 * latency * latency)",
          "old_line_content": "",
          "new_line_content": "\t\tstdev = 0.001 * sqrt(sqlat - 1000000.0 * latency * latency);",
          "content_same": false
        },
        {
          "line": 5478,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(tbuf, sizeof(tbuf), \"%.3f s\",\n\t\t\t\t PG_TIME_GET_DOUBLE(now + epoch_shift))",
          "old_line_content": "\t}",
          "new_line_content": "\t\tsnprintf(tbuf, sizeof(tbuf), \"%.3f s\",",
          "content_same": false
        },
        {
          "line": 5479,
          "old_api": null,
          "new_api": "PG_TIME_GET_DOUBLE",
          "old_text": null,
          "new_text": "PG_TIME_GET_DOUBLE(now + epoch_shift)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t PG_TIME_GET_DOUBLE(now + epoch_shift));",
          "content_same": false
        },
        {
          "line": 5484,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(tbuf, sizeof(tbuf), \"%.1f s\", total_run)",
          "old_line_content": "\tif (throttle_delay)",
          "new_line_content": "\t\tsnprintf(tbuf, sizeof(tbuf), \"%.1f s\", total_run);",
          "content_same": false
        },
        {
          "line": 5487,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr,\n\t\t\t\"progress: %s, %.1f tps, lat %.3f ms stddev %.3f\",\n\t\t\ttbuf, tps, latency, stdev)",
          "old_line_content": "\t\tif (latency_limit)",
          "new_line_content": "\tfprintf(stderr,",
          "content_same": false
        },
        {
          "line": 5493,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr, \", lag %.3f ms\", lag)",
          "old_line_content": "\t*last = cur;",
          "new_line_content": "\t\tfprintf(stderr, \", lag %.3f ms\", lag);",
          "content_same": false
        },
        {
          "line": 5495,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr, \", \" INT64_FORMAT \" skipped\",\n\t\t\t\t\tcur.skipped - last->skipped)",
          "old_line_content": "}",
          "new_line_content": "\t\t\tfprintf(stderr, \", \" INT64_FORMAT \" skipped\",",
          "content_same": false
        },
        {
          "line": 5498,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr, \"\\n\")",
          "old_line_content": "printSimpleStats(const char *prefix, SimpleStats *ss)",
          "new_line_content": "\tfprintf(stderr, \"\\n\");",
          "content_same": false
        },
        {
          "line": 5510,
          "old_api": null,
          "new_api": "sqrt",
          "old_text": null,
          "new_text": "sqrt(ss->sum2 / ss->count - latency * latency)",
          "old_line_content": "/* print version banner */",
          "new_line_content": "\t\tdouble\t\tstddev = sqrt(ss->sum2 / ss->count - latency * latency);",
          "content_same": false
        },
        {
          "line": 5512,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\"%s average = %.3f ms\\n\", prefix, 0.001 * latency)",
          "old_line_content": "printVersion(PGconn *con)",
          "new_line_content": "\t\tprintf(\"%s average = %.3f ms\\n\", prefix, 0.001 * latency);",
          "content_same": false
        },
        {
          "line": 5513,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\"%s stddev = %.3f ms\\n\", prefix, 0.001 * stddev)",
          "old_line_content": "{",
          "new_line_content": "\t\tprintf(\"%s stddev = %.3f ms\\n\", prefix, 0.001 * stddev);",
          "content_same": false
        },
        {
          "line": 5521,
          "old_api": null,
          "new_api": "PQserverVersion",
          "old_text": null,
          "new_text": "PQserverVersion(con)",
          "old_line_content": "",
          "new_line_content": "\tint\t\t\tserver_ver = PQserverVersion(con);",
          "content_same": false
        },
        {
          "line": 3474,
          "old_api": null,
          "new_api": "commandFailed",
          "old_text": null,
          "new_text": "commandFailed(st, \"SQL\", \"perhaps the backend died while processing\")",
          "old_line_content": "\t\t\t\t/* store or discard the query results */",
          "new_line_content": "\t\t\t\t\tcommandFailed(st, \"SQL\", \"perhaps the backend died while processing\");",
          "content_same": false
        },
        {
          "line": 3478,
          "old_api": null,
          "new_api": "PQisBusy",
          "old_text": null,
          "new_text": "PQisBusy(st->con)",
          "old_line_content": "\t\t\t\t{",
          "new_line_content": "\t\t\t\tif (PQisBusy(st->con))",
          "content_same": false
        },
        {
          "line": 3482,
          "old_api": null,
          "new_api": "readCommandResponse",
          "old_text": null,
          "new_text": "readCommandResponse(st,\n\t\t\t\t\t\t\t\t\t\tsql_script[st->use_file].commands[st->command]->meta,\n\t\t\t\t\t\t\t\t\t\tsql_script[st->use_file].commands[st->command]->varprefix)",
          "old_line_content": "\t\t\t\t\t * end-of-pipeline response.",
          "new_line_content": "\t\t\t\tif (readCommandResponse(st,",
          "content_same": false
        },
        {
          "line": 5530,
          "old_api": null,
          "new_api": "PQparameterStatus",
          "old_text": null,
          "new_text": "PQparameterStatus(con, \"server_version\")",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\tserver_version = PQparameterStatus(con, \"server_version\");",
          "content_same": false
        },
        {
          "line": 5534,
          "old_api": null,
          "new_api": "formatPGVersionNumber",
          "old_text": null,
          "new_text": "formatPGVersionNumber(server_ver, true,\n\t\t\t\t\t\t\t\t  sverbuf, sizeof(sverbuf))",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\tformatPGVersionNumber(server_ver, true,",
          "content_same": false
        },
        {
          "line": 3491,
          "old_api": null,
          "new_api": "PQpipelineStatus",
          "old_text": null,
          "new_text": "PQpipelineStatus(st->con)",
          "old_line_content": "\t\t\t\t/*",
          "new_line_content": "\t\t\t\t\tif (PQpipelineStatus(st->con) != PQ_PIPELINE_ON)",
          "content_same": false
        },
        {
          "line": 5539,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"%s (%s, server %s)\\n\")",
          "old_line_content": "}",
          "new_line_content": "\t\tprintf(_(\"%s (%s, server %s)\\n\"),",
          "content_same": false
        },
        {
          "line": 5544,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\"%s (%s)\\n\", \"pgbench\", PG_VERSION)",
          "old_line_content": "\t\t\t pg_time_usec_t total_duration, /* benchmarking time */",
          "new_line_content": "\t\tprintf(\"%s (%s)\\n\", \"pgbench\", PG_VERSION);",
          "content_same": false
        },
        {
          "line": 5545,
          "old_api": null,
          "new_api": "fflush",
          "old_text": null,
          "new_text": "fflush(stdout)",
          "old_line_content": "\t\t\t pg_time_usec_t conn_total_duration,\t/* is_connect */",
          "new_line_content": "\tfflush(stdout);",
          "content_same": false
        },
        {
          "line": 3505,
          "old_api": null,
          "new_api": "pg_time_now_lazy",
          "old_text": null,
          "new_text": "pg_time_now_lazy(&now)",
          "old_line_content": "\t\t\t\t/*",
          "new_line_content": "\t\t\t\tpg_time_now_lazy(&now);",
          "content_same": false
        },
        {
          "line": 5558,
          "old_api": null,
          "new_api": "PG_TIME_GET_DOUBLE",
          "old_text": null,
          "new_text": "PG_TIME_GET_DOUBLE(total_duration)",
          "old_line_content": "\t/* only print partitioning information if some partitioning was detected */",
          "new_line_content": "\tdouble\t\tbench_duration = PG_TIME_GET_DOUBLE(total_duration);",
          "content_same": false
        },
        {
          "line": 5569,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\"query mode: %s\\n\", QUERYMODE[querymode])",
          "old_line_content": "\t\t\t   ntx, nxacts * nclients);",
          "new_line_content": "\tprintf(\"query mode: %s\\n\", QUERYMODE[querymode]);",
          "content_same": false
        },
        {
          "line": 5570,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\"number of clients: %d\\n\", nclients)",
          "old_line_content": "\t}",
          "new_line_content": "\tprintf(\"number of clients: %d\\n\", nclients);",
          "content_same": false
        },
        {
          "line": 5571,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\"number of threads: %d\\n\", nthreads)",
          "old_line_content": "\telse",
          "new_line_content": "\tprintf(\"number of threads: %d\\n\", nthreads);",
          "content_same": false
        },
        {
          "line": 3526,
          "old_api": null,
          "new_api": "pg_time_now_lazy",
          "old_text": null,
          "new_text": "pg_time_now_lazy(&now)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t\tpg_time_now_lazy(&now);",
          "content_same": false
        },
        {
          "line": 5575,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\"number of transactions actually processed: \" INT64_FORMAT \"/%d\\n\",\n\t\t\t   ntx, nxacts * nclients)",
          "old_line_content": "\t\t\t   ntx);",
          "new_line_content": "\t\tprintf(\"number of transactions actually processed: \" INT64_FORMAT \"/%d\\n\",",
          "content_same": false
        },
        {
          "line": 3530,
          "old_api": null,
          "new_api": "addToSimpleStats",
          "old_text": null,
          "new_text": "addToSimpleStats(&command->stats,\n\t\t\t\t\t\t\t\t\t PG_TIME_GET_DOUBLE(now - st->stmt_begin))",
          "old_line_content": "\t\t\t\t\tCSTATE_START_COMMAND : CSTATE_SKIP_COMMAND;",
          "new_line_content": "\t\t\t\t\taddToSimpleStats(&command->stats,",
          "content_same": false
        },
        {
          "line": 3531,
          "old_api": null,
          "new_api": "PG_TIME_GET_DOUBLE",
          "old_text": null,
          "new_text": "PG_TIME_GET_DOUBLE(now - st->stmt_begin)",
          "old_line_content": "\t\t\t\tbreak;",
          "new_line_content": "\t\t\t\t\t\t\t\t\t PG_TIME_GET_DOUBLE(now - st->stmt_begin));",
          "content_same": false
        },
        {
          "line": 5580,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\"duration: %d s\\n\", duration)",
          "old_line_content": "\t\treturn;",
          "new_line_content": "\t\tprintf(\"duration: %d s\\n\", duration);",
          "content_same": false
        },
        {
          "line": 5581,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\"number of transactions actually processed: \" INT64_FORMAT \"\\n\",\n\t\t\t   ntx)",
          "old_line_content": "",
          "new_line_content": "\t\tprintf(\"number of transactions actually processed: \" INT64_FORMAT \"\\n\",",
          "content_same": false
        },
        {
          "line": 3536,
          "old_api": null,
          "new_api": "conditional_active",
          "old_text": null,
          "new_text": "conditional_active(st->cstack)",
          "old_line_content": "\t\t\tcase CSTATE_END_TX:",
          "new_line_content": "\t\t\t\tst->state = conditional_active(st->cstack) ?",
          "content_same": false
        },
        {
          "line": 5590,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\"number of transactions skipped: \" INT64_FORMAT \" (%.3f %%)\\n\",\n\t\t\t   total->skipped, 100.0 * total->skipped / total->cnt)",
          "old_line_content": "",
          "new_line_content": "\t\tprintf(\"number of transactions skipped: \" INT64_FORMAT \" (%.3f %%)\\n\",",
          "content_same": false
        },
        {
          "line": 3546,
          "old_api": null,
          "new_api": "processXactStats",
          "old_text": null,
          "new_text": "processXactStats(thread, st, &now, false, agg)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\tprocessXactStats(thread, st, &now, false, agg);",
          "content_same": false
        },
        {
          "line": 5594,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\"number of transactions above the %.1f ms latency limit: \" INT64_FORMAT \"/\" INT64_FORMAT \" (%.3f %%)\\n\",\n\t\t\t   latency_limit / 1000.0, latency_late, ntx,\n\t\t\t   (ntx > 0) ? 100.0 * latency_late / ntx : 0.0)",
          "old_line_content": "\t{",
          "new_line_content": "\t\tprintf(\"number of transactions above the %.1f ms latency limit: \" INT64_FORMAT \"/\" INT64_FORMAT \" (%.3f %%)\\n\",",
          "content_same": false
        },
        {
          "line": 5599,
          "old_api": null,
          "new_api": "printSimpleStats",
          "old_text": null,
          "new_text": "printSimpleStats(\"latency\", &total->latency)",
          "old_line_content": "",
          "new_line_content": "\t\tprintSimpleStats(\"latency\", &total->latency);",
          "content_same": false
        },
        {
          "line": 3552,
          "old_api": null,
          "new_api": "conditional_stack_empty",
          "old_text": null,
          "new_text": "conditional_stack_empty(st->cstack)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\tAssert(conditional_stack_empty(st->cstack));",
          "content_same": false
        },
        {
          "line": 5603,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\"latency average = %.3f ms\\n\",\n\t\t\t   0.001 * total_duration * nclients / total->cnt)",
          "old_line_content": "\t\t * Report average transaction lag under rate limit throttling.  This",
          "new_line_content": "\t\tprintf(\"latency average = %.3f ms\\n\",",
          "content_same": false
        },
        {
          "line": 3556,
          "old_api": null,
          "new_api": "finishCon",
          "old_text": null,
          "new_text": "finishCon(st)",
          "old_line_content": "\t\t\t\t\tst->state = CSTATE_FINISHED;",
          "new_line_content": "\t\t\t\t\tfinishCon(st);",
          "content_same": false
        },
        {
          "line": 5615,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\"rate limit schedule lag: avg %.3f (max %.3f) ms\\n\",\n\t\t\t   0.001 * total->lag.sum / total->cnt, 0.001 * total->lag.max)",
          "old_line_content": "\t * not be tps anyway.",
          "new_line_content": "\t\tprintf(\"rate limit schedule lag: avg %.3f (max %.3f) ms\\n\",",
          "content_same": false
        },
        {
          "line": 3581,
          "old_api": null,
          "new_api": "finishCon",
          "old_text": null,
          "new_text": "finishCon(st)",
          "old_line_content": " * Subroutine for advanceConnectionState -- initiate or execute the current",
          "new_line_content": "\t\t\t\tfinishCon(st);",
          "content_same": false
        },
        {
          "line": 5630,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\"average connection time = %.3f ms\\n\", 0.001 * conn_total_duration / total->cnt)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tprintf(\"average connection time = %.3f ms\\n\", 0.001 * conn_total_duration / total->cnt);",
          "content_same": false
        },
        {
          "line": 5631,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\"tps = %f (including reconnection times)\\n\", tps)",
          "old_line_content": "",
          "new_line_content": "\t\tprintf(\"tps = %f (including reconnection times)\\n\", tps);",
          "content_same": false
        },
        {
          "line": 5635,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\"initial connection time = %.3f ms\\n\", 0.001 * conn_elapsed_duration)",
          "old_line_content": "\t\tint\t\t\ti;",
          "new_line_content": "\t\tprintf(\"initial connection time = %.3f ms\\n\", 0.001 * conn_elapsed_duration);",
          "content_same": false
        },
        {
          "line": 5636,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\"tps = %f (without initial connection time)\\n\", tps)",
          "old_line_content": "",
          "new_line_content": "\t\tprintf(\"tps = %f (without initial connection time)\\n\", tps);",
          "content_same": false
        },
        {
          "line": 3601,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(command != NULL && command->type == META_COMMAND)",
          "old_line_content": "\t\tPQExpBufferData buf;",
          "new_line_content": "\tAssert(command != NULL && command->type == META_COMMAND);",
          "content_same": false
        },
        {
          "line": 5650,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\"SQL script %d: %s\\n\"\n\t\t\t\t\t   \" - weight: %d (targets %.1f%% of total)\\n\"\n\t\t\t\t\t   \" - \" INT64_FORMAT \" transactions (%.1f%% of total, tps = %f)\\n\",\n\t\t\t\t\t   i + 1, sql_script[i].desc,\n\t\t\t\t\t   sql_script[i].weight,\n\t\t\t\t\t   100.0 * sql_script[i].weight / total_weight,\n\t\t\t\t\t   sstats->cnt,\n\t\t\t\t\t   100.0 * sstats->cnt / total->cnt,\n\t\t\t\t\t   (sstats->cnt - sstats->skipped) / bench_duration)",
          "old_line_content": "\t\t\t\t\t   100.0 * sstats->cnt / total->cnt,",
          "new_line_content": "\t\t\t\tprintf(\"SQL script %d: %s\\n\"",
          "content_same": false
        },
        {
          "line": 3606,
          "old_api": null,
          "new_api": "unlikely",
          "old_text": null,
          "new_text": "unlikely(__pg_log_level <= PG_LOG_DEBUG)",
          "old_line_content": "\t\tfor (int i = 1; i < argc; i++)",
          "new_line_content": "\tif (unlikely(__pg_log_level <= PG_LOG_DEBUG))",
          "content_same": false
        },
        {
          "line": 3610,
          "old_api": null,
          "new_api": "initPQExpBuffer",
          "old_text": null,
          "new_text": "initPQExpBuffer(&buf)",
          "old_line_content": "",
          "new_line_content": "\t\tinitPQExpBuffer(&buf);",
          "content_same": false
        },
        {
          "line": 3612,
          "old_api": null,
          "new_api": "printfPQExpBuffer",
          "old_text": null,
          "new_text": "printfPQExpBuffer(&buf, \"client %d executing \\\\%s\", st->id, argv[0])",
          "old_line_content": "\t}",
          "new_line_content": "\t\tprintfPQExpBuffer(&buf, \"client %d executing \\\\%s\", st->id, argv[0]);",
          "content_same": false
        },
        {
          "line": 5661,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\" - number of transactions skipped: \" INT64_FORMAT \" (%.3f%%)\\n\",\n\t\t\t\t\t\t   sstats->skipped,\n\t\t\t\t\t\t   100.0 * sstats->skipped / sstats->cnt)",
          "old_line_content": "\t\t\t/* Report per-command latencies */",
          "new_line_content": "\t\t\t\t\tprintf(\" - number of transactions skipped: \" INT64_FORMAT \" (%.3f%%)\\n\",",
          "content_same": false
        },
        {
          "line": 3614,
          "old_api": null,
          "new_api": "appendPQExpBuffer",
          "old_text": null,
          "new_text": "appendPQExpBuffer(&buf, \" %s\", argv[i])",
          "old_line_content": "\tif (command->meta == META_SLEEP)",
          "new_line_content": "\t\t\tappendPQExpBuffer(&buf, \" %s\", argv[i]);",
          "content_same": false
        },
        {
          "line": 3616,
          "old_api": null,
          "new_api": "pg_log_debug",
          "old_text": null,
          "new_text": "pg_log_debug(\"%s\", buf.data)",
          "old_line_content": "\t\tint\t\t\tusec;",
          "new_line_content": "\t\tpg_log_debug(\"%s\", buf.data);",
          "content_same": false
        },
        {
          "line": 5665,
          "old_api": null,
          "new_api": "printSimpleStats",
          "old_text": null,
          "new_text": "printSimpleStats(\" - latency\", &sstats->latency)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\tprintSimpleStats(\" - latency\", &sstats->latency);",
          "content_same": false
        },
        {
          "line": 3618,
          "old_api": null,
          "new_api": "termPQExpBuffer",
          "old_text": null,
          "new_text": "termPQExpBuffer(&buf)",
          "old_line_content": "\t\t/*",
          "new_line_content": "\t\ttermPQExpBuffer(&buf);",
          "content_same": false
        },
        {
          "line": 5674,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\" - statement latencies in milliseconds:\\n\")",
          "old_line_content": "\t\t\t\t{",
          "new_line_content": "\t\t\t\t\tprintf(\" - statement latencies in milliseconds:\\n\");",
          "content_same": false
        },
        {
          "line": 5676,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\"statement latencies in milliseconds:\\n\")",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t\tprintf(\"statement latencies in milliseconds:\\n\");",
          "content_same": false
        },
        {
          "line": 3631,
          "old_api": null,
          "new_api": "evaluateSleep",
          "old_text": null,
          "new_text": "evaluateSleep(st, argc, argv, &usec)",
          "old_line_content": "\t\tst->sleep_until = (*now) + usec;",
          "new_line_content": "\t\tif (!evaluateSleep(st, argc, argv, &usec))",
          "content_same": false
        },
        {
          "line": 3633,
          "old_api": null,
          "new_api": "commandFailed",
          "old_text": null,
          "new_text": "commandFailed(st, \"sleep\", \"execution of meta-command failed\")",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\tcommandFailed(st, \"sleep\", \"execution of meta-command failed\");",
          "content_same": false
        },
        {
          "line": 5684,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\"   %11.3f  %s\\n\",\n\t\t\t\t\t\t   (cstats->count > 0) ?\n\t\t\t\t\t\t   1000.0 * cstats->sum / cstats->count : 0.0,\n\t\t\t\t\t\t   (*commands)->first_line)",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\t\t\tprintf(\"   %11.3f  %s\\n\",",
          "content_same": false
        },
        {
          "line": 3637,
          "old_api": null,
          "new_api": "pg_time_now_lazy",
          "old_text": null,
          "new_text": "pg_time_now_lazy(now)",
          "old_line_content": "\t\tPgBenchValue result;",
          "new_line_content": "\t\tpg_time_now_lazy(now);",
          "content_same": false
        },
        {
          "line": 3646,
          "old_api": null,
          "new_api": "evaluateExpr",
          "old_text": null,
          "new_text": "evaluateExpr(st, expr, &result)",
          "old_line_content": "\t\t{",
          "new_line_content": "\t\tif (!evaluateExpr(st, expr, &result))",
          "content_same": false
        },
        {
          "line": 3648,
          "old_api": null,
          "new_api": "commandFailed",
          "old_text": null,
          "new_text": "commandFailed(st, argv[0], \"evaluation of meta-command failed\")",
          "old_line_content": "\t\t\treturn CSTATE_ABORTED;",
          "new_line_content": "\t\t\tcommandFailed(st, argv[0], \"evaluation of meta-command failed\");",
          "content_same": false
        },
        {
          "line": 3652,
          "old_api": null,
          "new_api": "putVariableValue",
          "old_text": null,
          "new_text": "putVariableValue(st, argv[0], argv[1], &result)",
          "old_line_content": "\t{",
          "new_line_content": "\t\tif (!putVariableValue(st, argv[0], argv[1], &result))",
          "content_same": false
        },
        {
          "line": 3654,
          "old_api": null,
          "new_api": "commandFailed",
          "old_text": null,
          "new_text": "commandFailed(st, \"set\", \"assignment of meta-command failed\")",
          "old_line_content": "\t\tPgBenchExpr *expr = command->expr;",
          "new_line_content": "\t\t\tcommandFailed(st, \"set\", \"assignment of meta-command failed\");",
          "content_same": false
        },
        {
          "line": 5703,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(seed, \"time\")",
          "old_line_content": "\t\t/* use some \"strong\" random source */",
          "new_line_content": "\tif (seed == NULL || strcmp(seed, \"time\") == 0)",
          "content_same": false
        },
        {
          "line": 5708,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(seed, \"rand\")",
          "old_line_content": "\t\t}",
          "new_line_content": "\telse if (strcmp(seed, \"rand\") == 0)",
          "content_same": false
        },
        {
          "line": 5711,
          "old_api": null,
          "new_api": "pg_strong_random",
          "old_text": null,
          "new_text": "pg_strong_random(&iseed, sizeof(iseed))",
          "old_line_content": "\t{",
          "new_line_content": "\t\tif (!pg_strong_random(&iseed, sizeof(iseed)))",
          "content_same": false
        },
        {
          "line": 5713,
          "old_api": null,
          "new_api": "pg_log_error",
          "old_text": null,
          "new_text": "pg_log_error(\"could not generate random seed\")",
          "old_line_content": "\t\tunsigned long ulseed;",
          "new_line_content": "\t\t\tpg_log_error(\"could not generate random seed\");",
          "content_same": false
        },
        {
          "line": 3667,
          "old_api": null,
          "new_api": "commandFailed",
          "old_text": null,
          "new_text": "commandFailed(st, argv[0], \"evaluation of meta-command failed\")",
          "old_line_content": "\telse if (command->meta == META_ELIF)",
          "new_line_content": "\t\t\tcommandFailed(st, argv[0], \"evaluation of meta-command failed\");",
          "content_same": false
        },
        {
          "line": 3671,
          "old_api": null,
          "new_api": "valueTruth",
          "old_text": null,
          "new_text": "valueTruth(&result)",
          "old_line_content": "\t\tPgBenchValue result;",
          "new_line_content": "\t\tcond = valueTruth(&result);",
          "content_same": false
        },
        {
          "line": 3672,
          "old_api": null,
          "new_api": "conditional_stack_push",
          "old_text": null,
          "new_text": "conditional_stack_push(st->cstack, cond ? IFSTATE_TRUE : IFSTATE_FALSE)",
          "old_line_content": "\t\tbool\t\tcond;",
          "new_line_content": "\t\tconditional_stack_push(st->cstack, cond ? IFSTATE_TRUE : IFSTATE_FALSE);",
          "content_same": false
        },
        {
          "line": 5724,
          "old_api": null,
          "new_api": "sscanf",
          "old_text": null,
          "new_text": "sscanf(seed, \"%lu%c\", &ulseed, &garbage)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tif (sscanf(seed, \"%lu%c\", &ulseed, &garbage) != 1)",
          "content_same": false
        },
        {
          "line": 5726,
          "old_api": null,
          "new_api": "pg_log_error",
          "old_text": null,
          "new_text": "pg_log_error(\"unrecognized random seed option \\\"%s\\\"\", seed)",
          "old_line_content": "\tif (seed != NULL)",
          "new_line_content": "\t\t\tpg_log_error(\"unrecognized random seed option \\\"%s\\\"\", seed);",
          "content_same": false
        },
        {
          "line": 3684,
          "old_api": null,
          "new_api": "conditional_stack_poke",
          "old_text": null,
          "new_text": "conditional_stack_poke(st->cstack, IFSTATE_IGNORED)",
          "old_line_content": "\t\t\treturn CSTATE_ABORTED;",
          "new_line_content": "\t\t\tconditional_stack_poke(st->cstack, IFSTATE_IGNORED);",
          "content_same": false
        },
        {
          "line": 5734,
          "old_api": null,
          "new_api": "pg_log_info",
          "old_text": null,
          "new_text": "pg_log_info(\"setting random seed to %llu\", (unsigned long long) iseed)",
          "old_line_content": "",
          "new_line_content": "\t\tpg_log_info(\"setting random seed to %llu\", (unsigned long long) iseed);",
          "content_same": false
        },
        {
          "line": 3690,
          "old_api": null,
          "new_api": "commandFailed",
          "old_text": null,
          "new_text": "commandFailed(st, argv[0], \"evaluation of meta-command failed\")",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\tcommandFailed(st, argv[0], \"evaluation of meta-command failed\");",
          "content_same": false
        },
        {
          "line": 3694,
          "old_api": null,
          "new_api": "valueTruth",
          "old_text": null,
          "new_text": "valueTruth(&result)",
          "old_line_content": "\t\t{",
          "new_line_content": "\t\tcond = valueTruth(&result);",
          "content_same": false
        },
        {
          "line": 3695,
          "old_api": null,
          "new_api": "conditional_stack_peek",
          "old_text": null,
          "new_text": "conditional_stack_peek(st->cstack)",
          "old_line_content": "\t\t\tcase IFSTATE_TRUE:",
          "new_line_content": "\t\tAssert(conditional_stack_peek(st->cstack) == IFSTATE_FALSE);",
          "content_same": false
        },
        {
          "line": 3700,
          "old_api": null,
          "new_api": "conditional_stack_peek",
          "old_text": null,
          "new_text": "conditional_stack_peek(st->cstack)",
          "old_line_content": "\t\t\tcase IFSTATE_NONE:\t/* else without if */",
          "new_line_content": "\t\tswitch (conditional_stack_peek(st->cstack))",
          "content_same": false
        },
        {
          "line": 3703,
          "old_api": null,
          "new_api": "conditional_stack_poke",
          "old_text": null,
          "new_text": "conditional_stack_poke(st->cstack, IFSTATE_ELSE_FALSE)",
          "old_line_content": "\t\t\tdefault:",
          "new_line_content": "\t\t\t\tconditional_stack_poke(st->cstack, IFSTATE_ELSE_FALSE);",
          "content_same": false
        },
        {
          "line": 3712,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(false)",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\t\tAssert(false);",
          "content_same": false
        },
        {
          "line": 3718,
          "old_api": null,
          "new_api": "conditional_stack_pop",
          "old_text": null,
          "new_text": "conditional_stack_pop(st->cstack)",
          "old_line_content": "\t\t\treturn CSTATE_ABORTED;",
          "new_line_content": "\t\tconditional_stack_pop(st->cstack);",
          "content_same": false
        },
        {
          "line": 3722,
          "old_api": null,
          "new_api": "runShellCommand",
          "old_text": null,
          "new_text": "runShellCommand(st, argv[1], argv + 2, argc - 2)",
          "old_line_content": "\t{",
          "new_line_content": "\t\tif (!runShellCommand(st, argv[1], argv + 2, argc - 2))",
          "content_same": false
        },
        {
          "line": 3724,
          "old_api": null,
          "new_api": "commandFailed",
          "old_text": null,
          "new_text": "commandFailed(st, \"setshell\", \"execution of meta-command failed\")",
          "old_line_content": "\t\t{",
          "new_line_content": "\t\t\tcommandFailed(st, \"setshell\", \"execution of meta-command failed\");",
          "content_same": false
        },
        {
          "line": 3730,
          "old_api": null,
          "new_api": "runShellCommand",
          "old_text": null,
          "new_text": "runShellCommand(st, NULL, argv + 1, argc - 1)",
          "old_line_content": "\t{",
          "new_line_content": "\t\tif (!runShellCommand(st, NULL, argv + 1, argc - 1))",
          "content_same": false
        },
        {
          "line": 3732,
          "old_api": null,
          "new_api": "commandFailed",
          "old_text": null,
          "new_text": "commandFailed(st, \"shell\", \"execution of meta-command failed\")",
          "old_line_content": "\t\t * In pipeline mode, we use a workflow based on libpq pipeline",
          "new_line_content": "\t\t\tcommandFailed(st, \"shell\", \"execution of meta-command failed\");",
          "content_same": false
        },
        {
          "line": 3744,
          "old_api": null,
          "new_api": "commandFailed",
          "old_text": null,
          "new_text": "commandFailed(st, \"startpipeline\", \"cannot use pipeline mode with the simple query protocol\")",
          "old_line_content": "\t\t\treturn CSTATE_ABORTED;",
          "new_line_content": "\t\t\tcommandFailed(st, \"startpipeline\", \"cannot use pipeline mode with the simple query protocol\");",
          "content_same": false
        },
        {
          "line": 3750,
          "old_api": null,
          "new_api": "commandFailed",
          "old_text": null,
          "new_text": "commandFailed(st, \"startpipeline\", \"already in pipeline mode\")",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tcommandFailed(st, \"startpipeline\", \"already in pipeline mode\");",
          "content_same": false
        },
        {
          "line": 3753,
          "old_api": null,
          "new_api": "PQenterPipelineMode",
          "old_text": null,
          "new_text": "PQenterPipelineMode(st->con)",
          "old_line_content": "\t{",
          "new_line_content": "\t\tif (PQenterPipelineMode(st->con) == 0)",
          "content_same": false
        },
        {
          "line": 3755,
          "old_api": null,
          "new_api": "commandFailed",
          "old_text": null,
          "new_text": "commandFailed(st, \"startpipeline\", \"failed to enter pipeline mode\")",
          "old_line_content": "\t\t{",
          "new_line_content": "\t\t\tcommandFailed(st, \"startpipeline\", \"failed to enter pipeline mode\");",
          "content_same": false
        },
        {
          "line": 3763,
          "old_api": null,
          "new_api": "commandFailed",
          "old_text": null,
          "new_text": "commandFailed(st, \"endpipeline\", \"not in pipeline mode\")",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tcommandFailed(st, \"endpipeline\", \"not in pipeline mode\");",
          "content_same": false
        },
        {
          "line": 3766,
          "old_api": null,
          "new_api": "PQpipelineSync",
          "old_text": null,
          "new_text": "PQpipelineSync(st->con)",
          "old_line_content": "\t\treturn CSTATE_WAIT_RESULT;",
          "new_line_content": "\t\tif (!PQpipelineSync(st->con))",
          "content_same": false
        },
        {
          "line": 3768,
          "old_api": null,
          "new_api": "commandFailed",
          "old_text": null,
          "new_text": "commandFailed(st, \"endpipeline\", \"failed to send a pipeline sync\")",
          "old_line_content": "",
          "new_line_content": "\t\t\tcommandFailed(st, \"endpipeline\", \"failed to send a pipeline sync\");",
          "content_same": false
        },
        {
          "line": 5835,
          "old_api": null,
          "new_api": "gettimeofday",
          "old_text": null,
          "new_text": "gettimeofday(&tv, NULL)",
          "old_line_content": "\t{",
          "new_line_content": "\tgettimeofday(&tv, NULL);",
          "content_same": false
        },
        {
          "line": 5845,
          "old_api": null,
          "new_api": "usage",
          "old_text": null,
          "new_text": "usage()",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tusage();",
          "content_same": false
        },
        {
          "line": 5846,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(0)",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\texit(0);",
          "content_same": false
        },
        {
          "line": 3799,
          "old_api": null,
          "new_api": "pg_time_now",
          "old_text": null,
          "new_text": "pg_time_now()",
          "old_line_content": "\t */",
          "new_line_content": "\tpg_time_usec_t now = pg_time_now() + epoch_shift;",
          "content_same": false
        },
        {
          "line": 5850,
          "old_api": null,
          "new_api": "puts",
          "old_text": null,
          "new_text": "puts(\"pgbench (PostgreSQL) \" PG_VERSION)",
          "old_line_content": "\t/* set random seed early, because it may be used while parsing scripts. */",
          "new_line_content": "\t\t\tputs(\"pgbench (PostgreSQL) \" PG_VERSION);",
          "content_same": false
        },
        {
          "line": 5855,
          "old_api": null,
          "new_api": "pg_malloc0",
          "old_text": null,
          "new_text": "pg_malloc0(sizeof(CState))",
          "old_line_content": "\t}",
          "new_line_content": "\tstate = (CState *) pg_malloc0(sizeof(CState));",
          "content_same": false
        },
        {
          "line": 3808,
          "old_api": null,
          "new_api": "pg_erand48",
          "old_text": null,
          "new_text": "pg_erand48(thread->ts_sample_rs.xseed)",
          "old_line_content": "",
          "new_line_content": "\t\tpg_erand48(thread->ts_sample_rs.xseed) > sample_rate)",
          "content_same": false
        },
        {
          "line": 5858,
          "old_api": null,
          "new_api": "getenv",
          "old_text": null,
          "new_text": "getenv(\"PGBENCH_RANDOM_SEED\")",
          "old_line_content": "\t{",
          "new_line_content": "\tif (!set_random_seed(getenv(\"PGBENCH_RANDOM_SEED\")))",
          "content_same": false
        },
        {
          "line": 5860,
          "old_api": null,
          "new_api": "pg_log_fatal",
          "old_text": null,
          "new_text": "pg_log_fatal(\"error while setting random seed from PGBENCH_RANDOM_SEED environment variable\")",
          "old_line_content": "",
          "new_line_content": "\t\tpg_log_fatal(\"error while setting random seed from PGBENCH_RANDOM_SEED environment variable\");",
          "content_same": false
        },
        {
          "line": 5861,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "\t\tswitch (c)",
          "new_line_content": "\t\texit(1);",
          "content_same": false
        },
        {
          "line": 5864,
          "old_api": null,
          "new_api": "getopt_long",
          "old_text": null,
          "new_text": "getopt_long(argc, argv, \"iI:h:nvp:dqb:SNc:j:Crs:t:T:U:lf:D:F:M:P:R:L:\", long_options, &optindex)",
          "old_line_content": "\t\t\t\tis_init_mode = true;",
          "new_line_content": "\twhile ((c = getopt_long(argc, argv, \"iI:h:nvp:dqb:SNc:j:Crs:t:T:U:lf:D:F:M:P:R:L:\", long_options, &optindex)) != -1)",
          "content_same": false
        },
        {
          "line": 3822,
          "old_api": null,
          "new_api": "INT64CONST",
          "old_text": null,
          "new_text": "INT64CONST(1000000)",
          "old_line_content": "\t\t\t\t\tagg->latency.sum2,",
          "new_line_content": "\t\twhile ((next = agg->start_time + agg_interval * INT64CONST(1000000)) <= now)",
          "content_same": false
        },
        {
          "line": 3825,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(logfile, INT64_FORMAT \" \" INT64_FORMAT \" %.0f %.0f %.0f %.0f\",\n\t\t\t\t\tagg->start_time / 1000000,\t/* seconds since Unix epoch */\n\t\t\t\t\tagg->cnt,\n\t\t\t\t\tagg->latency.sum,\n\t\t\t\t\tagg->latency.sum2,\n\t\t\t\t\tagg->latency.min,\n\t\t\t\t\tagg->latency.max)",
          "old_line_content": "\t\t\tif (throttle_delay)",
          "new_line_content": "\t\t\tfprintf(logfile, INT64_FORMAT \" \" INT64_FORMAT \" %.0f %.0f %.0f %.0f\",",
          "content_same": false
        },
        {
          "line": 5875,
          "old_api": null,
          "new_api": "pg_free",
          "old_text": null,
          "new_text": "pg_free(initialize_steps)",
          "old_line_content": "\t\t\t\tbreak;",
          "new_line_content": "\t\t\t\t\tpg_free(initialize_steps);",
          "content_same": false
        },
        {
          "line": 5876,
          "old_api": null,
          "new_api": "pg_strdup",
          "old_text": null,
          "new_text": "pg_strdup(optarg)",
          "old_line_content": "\t\t\tcase 'n':",
          "new_line_content": "\t\t\t\tinitialize_steps = pg_strdup(optarg);",
          "content_same": false
        },
        {
          "line": 5877,
          "old_api": null,
          "new_api": "checkInitSteps",
          "old_text": null,
          "new_text": "checkInitSteps(initialize_steps)",
          "old_line_content": "\t\t\t\tis_no_vacuum = true;",
          "new_line_content": "\t\t\t\tcheckInitSteps(initialize_steps);",
          "content_same": false
        },
        {
          "line": 5881,
          "old_api": null,
          "new_api": "pg_strdup",
          "old_text": null,
          "new_text": "pg_strdup(optarg)",
          "old_line_content": "\t\t\t\tdo_vacuum_accounts = true;",
          "new_line_content": "\t\t\t\tpghost = pg_strdup(optarg);",
          "content_same": false
        },
        {
          "line": 3834,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(logfile, \" %.0f %.0f %.0f %.0f\",\n\t\t\t\t\t\tagg->lag.sum,\n\t\t\t\t\t\tagg->lag.sum2,\n\t\t\t\t\t\tagg->lag.min,\n\t\t\t\t\t\tagg->lag.max)",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\t\tfprintf(logfile, \" %.0f %.0f %.0f %.0f\",",
          "content_same": false
        },
        {
          "line": 3840,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(logfile, \" \" INT64_FORMAT, agg->skipped)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t\tfprintf(logfile, \" \" INT64_FORMAT, agg->skipped);",
          "content_same": false
        },
        {
          "line": 3845,
          "old_api": null,
          "new_api": "initStats",
          "old_text": null,
          "new_text": "initStats(agg, next)",
          "old_line_content": "\t{",
          "new_line_content": "\t\t\tinitStats(agg, next);",
          "content_same": false
        },
        {
          "line": 3849,
          "old_api": null,
          "new_api": "accumStats",
          "old_text": null,
          "new_text": "accumStats(agg, skipped, latency, lag)",
          "old_line_content": "\t\t\t\t\tINT64_FORMAT,",
          "new_line_content": "\t\taccumStats(agg, skipped, latency, lag);",
          "content_same": false
        },
        {
          "line": 5901,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "#endif\t\t\t\t\t\t\t/* RLIMIT_NOFILE */",
          "new_line_content": "\t\t\t\t\texit(1);",
          "content_same": false
        },
        {
          "line": 3855,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(logfile, \"%d \" INT64_FORMAT \" skipped %d \" INT64_FORMAT \" \"\n\t\t\t\t\tINT64_FORMAT,\n\t\t\t\t\tst->id, st->cnt, st->use_file, now / 1000000, now % 1000000)",
          "old_line_content": "\t\t\t\t\tnow / 1000000, now % 1000000);",
          "new_line_content": "\t\t\tfprintf(logfile, \"%d \" INT64_FORMAT \" skipped %d \" INT64_FORMAT \" \"",
          "content_same": false
        },
        {
          "line": 5905,
          "old_api": null,
          "new_api": "getrlimit",
          "old_text": null,
          "new_text": "getrlimit(RLIMIT_NOFILE, &rlim)",
          "old_line_content": "\t\t\t\t}",
          "new_line_content": "\t\t\t\tif (getrlimit(RLIMIT_NOFILE, &rlim) == -1)",
          "content_same": false
        },
        {
          "line": 3859,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(logfile, \"%d \" INT64_FORMAT \" %.0f %d \" INT64_FORMAT \" \"\n\t\t\t\t\tINT64_FORMAT,\n\t\t\t\t\tst->id, st->cnt, latency, st->use_file,\n\t\t\t\t\tnow / 1000000, now % 1000000)",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\tfprintf(logfile, \"%d \" INT64_FORMAT \" %.0f %d \" INT64_FORMAT \" \"",
          "content_same": false
        },
        {
          "line": 5907,
          "old_api": null,
          "new_api": "getrlimit",
          "old_text": null,
          "new_text": "getrlimit(RLIMIT_OFILE, &rlim)",
          "old_line_content": "\t\t\t\t{",
          "new_line_content": "\t\t\t\tif (getrlimit(RLIMIT_OFILE, &rlim) == -1)",
          "content_same": false
        },
        {
          "line": 3864,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(logfile, \" %.0f\", lag)",
          "old_line_content": " *",
          "new_line_content": "\t\t\tfprintf(logfile, \" %.0f\", lag);",
          "content_same": false
        },
        {
          "line": 3865,
          "old_api": null,
          "new_api": "fputc",
          "old_text": null,
          "new_text": "fputc('\\n', logfile)",
          "old_line_content": " * (This is also called when a transaction is late and thus skipped.",
          "new_line_content": "\t\tfputc('\\n', logfile);",
          "content_same": false
        },
        {
          "line": 5915,
          "old_api": null,
          "new_api": "pg_log_fatal",
          "old_text": null,
          "new_text": "pg_log_fatal(\"need at least %d open files, but system limit is %ld\",\n\t\t\t\t\t\t\t\t nclients + 3, (long) rlim.rlim_cur)",
          "old_line_content": "\t\t\tcase 'j':\t\t\t/* jobs */",
          "new_line_content": "\t\t\t\t\tpg_log_fatal(\"need at least %d open files, but system limit is %ld\",",
          "content_same": false
        },
        {
          "line": 5918,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "\t\t\t\t\t\t\t\t\t  &nthreads))",
          "new_line_content": "\t\t\t\t\texit(1);",
          "content_same": false
        },
        {
          "line": 5924,
          "old_api": null,
          "new_api": "option_parse_int",
          "old_text": null,
          "new_text": "option_parse_int(optarg, \"-j/--jobs\", 1, INT_MAX,\n\t\t\t\t\t\t\t\t\t  &nthreads)",
          "old_line_content": "\t\t\t\t{",
          "new_line_content": "\t\t\t\tif (!option_parse_int(optarg, \"-j/--jobs\", 1, INT_MAX,",
          "content_same": false
        },
        {
          "line": 5927,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "\t\t\t\t}",
          "new_line_content": "\t\t\t\t\texit(1);",
          "content_same": false
        },
        {
          "line": 5932,
          "old_api": null,
          "new_api": "pg_log_fatal",
          "old_text": null,
          "new_text": "pg_log_fatal(\"threads are not supported on this platform; use -j1\")",
          "old_line_content": "\t\t\t\tis_connect = true;",
          "new_line_content": "\t\t\t\t\tpg_log_fatal(\"threads are not supported on this platform; use -j1\");",
          "content_same": false
        },
        {
          "line": 5933,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "\t\t\t\tbreak;",
          "new_line_content": "\t\t\t\t\texit(1);",
          "content_same": false
        },
        {
          "line": 3886,
          "old_api": null,
          "new_api": "pg_time_now_lazy",
          "old_text": null,
          "new_text": "pg_time_now_lazy(now)",
          "old_line_content": "\tif (thread_details)",
          "new_line_content": "\t\tpg_time_now_lazy(now);",
          "content_same": false
        },
        {
          "line": 3896,
          "old_api": null,
          "new_api": "accumStats",
          "old_text": null,
          "new_text": "accumStats(&thread->stats, skipped, latency, lag)",
          "old_line_content": "\t{",
          "new_line_content": "\t\taccumStats(&thread->stats, skipped, latency, lag);",
          "content_same": false
        },
        {
          "line": 5947,
          "old_api": null,
          "new_api": "option_parse_int",
          "old_text": null,
          "new_text": "option_parse_int(optarg, \"-s/--scale\", 1, INT_MAX,\n\t\t\t\t\t\t\t\t\t  &scale)",
          "old_line_content": "\t\t\t\t\t\t\t\t\t  &nxacts))",
          "new_line_content": "\t\t\t\tif (!option_parse_int(optarg, \"-s/--scale\", 1, INT_MAX,",
          "content_same": false
        },
        {
          "line": 5949,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "\t\t\t\tbreak;",
          "new_line_content": "\t\t\t\t\texit(1);",
          "content_same": false
        },
        {
          "line": 5953,
          "old_api": null,
          "new_api": "option_parse_int",
          "old_text": null,
          "new_text": "option_parse_int(optarg, \"-t/--transactions\", 1, INT_MAX,\n\t\t\t\t\t\t\t\t\t  &nxacts)",
          "old_line_content": "\t\t\t\t\t\t\t\t\t  &duration))",
          "new_line_content": "\t\t\t\tif (!option_parse_int(optarg, \"-t/--transactions\", 1, INT_MAX,",
          "content_same": false
        },
        {
          "line": 5955,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "\t\t\t\tbreak;",
          "new_line_content": "\t\t\t\t\texit(1);",
          "content_same": false
        },
        {
          "line": 5959,
          "old_api": null,
          "new_api": "option_parse_int",
          "old_text": null,
          "new_text": "option_parse_int(optarg, \"-T/--time\", 1, INT_MAX,\n\t\t\t\t\t\t\t\t\t  &duration)",
          "old_line_content": "\t\t\tcase 'l':",
          "new_line_content": "\t\t\t\tif (!option_parse_int(optarg, \"-T/--time\", 1, INT_MAX,",
          "content_same": false
        },
        {
          "line": 3912,
          "old_api": null,
          "new_api": "doLog",
          "old_text": null,
          "new_text": "doLog(thread, st, agg, skipped, latency, lag)",
          "old_line_content": "",
          "new_line_content": "\t\tdoLog(thread, st, agg, skipped, latency, lag);",
          "content_same": false
        },
        {
          "line": 5961,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "\t\t\t\tuse_log = true;",
          "new_line_content": "\t\t\t\t\texit(1);",
          "content_same": false
        },
        {
          "line": 3916,
          "old_api": null,
          "new_api": "accumStats",
          "old_text": null,
          "new_text": "accumStats(&sql_script[st->use_file].stats, skipped, latency, lag)",
          "old_line_content": "{",
          "new_line_content": "\t\taccumStats(&sql_script[st->use_file].stats, skipped, latency, lag);",
          "content_same": false
        },
        {
          "line": 5964,
          "old_api": null,
          "new_api": "pg_strdup",
          "old_text": null,
          "new_text": "pg_strdup(optarg)",
          "old_line_content": "\t\t\t\tinitialization_option_set = true;",
          "new_line_content": "\t\t\t\tusername = pg_strdup(optarg);",
          "content_same": false
        },
        {
          "line": 3927,
          "old_api": null,
          "new_api": "finishCon",
          "old_text": null,
          "new_text": "finishCon(&state[i])",
          "old_line_content": "initDropTables(PGconn *con)",
          "new_line_content": "\t\tfinishCon(&state[i]);",
          "content_same": false
        },
        {
          "line": 5975,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(optarg, \"list\")",
          "old_line_content": "\t\t\t\tbenchmarking_option_set = true;",
          "new_line_content": "\t\t\t\tif (strcmp(optarg, \"list\") == 0)",
          "content_same": false
        },
        {
          "line": 5977,
          "old_api": null,
          "new_api": "listAvailableScripts",
          "old_text": null,
          "new_text": "listAvailableScripts()",
          "old_line_content": "\t\t\t\tbreak;",
          "new_line_content": "\t\t\t\t\tlistAvailableScripts();",
          "content_same": false
        },
        {
          "line": 5978,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(0)",
          "old_line_content": "\t\t\tcase 'S':",
          "new_line_content": "\t\t\t\t\texit(0);",
          "content_same": false
        },
        {
          "line": 5980,
          "old_api": null,
          "new_api": "parseScriptWeight",
          "old_text": null,
          "new_text": "parseScriptWeight(optarg, &script)",
          "old_line_content": "\t\t\t\tbenchmarking_option_set = true;",
          "new_line_content": "\t\t\t\tweight = parseScriptWeight(optarg, &script);",
          "content_same": false
        },
        {
          "line": 5981,
          "old_api": null,
          "new_api": "findBuiltin",
          "old_text": null,
          "new_text": "findBuiltin(script)",
          "old_line_content": "\t\t\t\tinternal_script_used = true;",
          "new_line_content": "\t\t\t\tprocess_builtin(findBuiltin(script), weight);",
          "content_same": false
        },
        {
          "line": 3936,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr, \"dropping old tables...\\n\")",
          "old_line_content": "\t\t\t\t\t \"pgbench_accounts, \"",
          "new_line_content": "\tfprintf(stderr, \"dropping old tables...\\n\");",
          "content_same": false
        },
        {
          "line": 5986,
          "old_api": null,
          "new_api": "findBuiltin",
          "old_text": null,
          "new_text": "findBuiltin(\"select-only\")",
          "old_line_content": "\t\t\t\tinternal_script_used = true;",
          "new_line_content": "\t\t\t\tprocess_builtin(findBuiltin(\"select-only\"), 1);",
          "content_same": false
        },
        {
          "line": 3942,
          "old_api": null,
          "new_api": "executeStatement",
          "old_text": null,
          "new_text": "executeStatement(con, \"drop table if exists \"\n\t\t\t\t\t \"pgbench_accounts, \"\n\t\t\t\t\t \"pgbench_branches, \"\n\t\t\t\t\t \"pgbench_history, \"\n\t\t\t\t\t \"pgbench_tellers\")",
          "old_line_content": "/*",
          "new_line_content": "\texecuteStatement(con, \"drop table if exists \"",
          "content_same": false
        },
        {
          "line": 5991,
          "old_api": null,
          "new_api": "findBuiltin",
          "old_text": null,
          "new_text": "findBuiltin(\"simple-update\")",
          "old_line_content": "\t\t\t\tbenchmarking_option_set = true;",
          "new_line_content": "\t\t\t\tprocess_builtin(findBuiltin(\"simple-update\"), 1);",
          "content_same": false
        },
        {
          "line": 5996,
          "old_api": null,
          "new_api": "parseScriptWeight",
          "old_text": null,
          "new_text": "parseScriptWeight(optarg, &script)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\tweight = parseScriptWeight(optarg, &script);",
          "content_same": false
        },
        {
          "line": 5997,
          "old_api": null,
          "new_api": "process_file",
          "old_text": null,
          "new_text": "process_file(script, weight)",
          "old_line_content": "\t\t\t\t\tbenchmarking_option_set = true;",
          "new_line_content": "\t\t\t\tprocess_file(script, weight);",
          "content_same": false
        },
        {
          "line": 6008,
          "old_api": null,
          "new_api": "pg_log_fatal",
          "old_text": null,
          "new_text": "pg_log_fatal(\"invalid variable definition: \\\"%s\\\"\", optarg)",
          "old_line_content": "\t\t\t\t}",
          "new_line_content": "\t\t\t\t\t\tpg_log_fatal(\"invalid variable definition: \\\"%s\\\"\", optarg);",
          "content_same": false
        },
        {
          "line": 3961,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(partitions > 0)",
          "old_line_content": "\t{",
          "new_line_content": "\tAssert(partitions > 0);",
          "content_same": false
        },
        {
          "line": 6009,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "\t\t\t\tbreak;",
          "new_line_content": "\t\t\t\t\t\texit(1);",
          "content_same": false
        },
        {
          "line": 3963,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr, \"creating %d partitions...\\n\", partitions)",
          "old_line_content": "\t\t{",
          "new_line_content": "\tfprintf(stderr, \"creating %d partitions...\\n\", partitions);",
          "content_same": false
        },
        {
          "line": 3965,
          "old_api": null,
          "new_api": "initPQExpBuffer",
          "old_text": null,
          "new_text": "initPQExpBuffer(&query)",
          "old_line_content": "",
          "new_line_content": "\tinitPQExpBuffer(&query);",
          "content_same": false
        },
        {
          "line": 6013,
          "old_api": null,
          "new_api": "putVariable",
          "old_text": null,
          "new_text": "putVariable(&state[0], \"option\", optarg, p)",
          "old_line_content": "\t\t\t\t\t\t\t\t\t  &fillfactor))",
          "new_line_content": "\t\t\t\t\tif (!putVariable(&state[0], \"option\", optarg, p))",
          "content_same": false
        },
        {
          "line": 3973,
          "old_api": null,
          "new_api": "printfPQExpBuffer",
          "old_text": null,
          "new_text": "printfPQExpBuffer(&query,\n\t\t\t\t\t\t\t  \"create%s table pgbench_accounts_%d\\n\"\n\t\t\t\t\t\t\t  \"  partition of pgbench_accounts\\n\"\n\t\t\t\t\t\t\t  \"  for values from (\",\n\t\t\t\t\t\t\t  unlogged_tables ? \" unlogged\" : \"\", p)",
          "old_line_content": "\t\t\t * For RANGE, we use open-ended partitions at the beginning and",
          "new_line_content": "\t\t\tprintfPQExpBuffer(&query,",
          "content_same": false
        },
        {
          "line": 6021,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "\t\t\t\tif (querymode >= NUM_QUERYMODE)",
          "new_line_content": "\t\t\t\t\texit(1);",
          "content_same": false
        },
        {
          "line": 6026,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(optarg, QUERYMODE[querymode])",
          "old_line_content": "\t\t\t\tbreak;",
          "new_line_content": "\t\t\t\t\tif (strcmp(optarg, QUERYMODE[querymode]) == 0)",
          "content_same": false
        },
        {
          "line": 6030,
          "old_api": null,
          "new_api": "pg_log_fatal",
          "old_text": null,
          "new_text": "pg_log_fatal(\"invalid query mode (-M): \\\"%s\\\"\", optarg)",
          "old_line_content": "\t\t\t\t\t\t\t\t\t  &progress))",
          "new_line_content": "\t\t\t\t\tpg_log_fatal(\"invalid query mode (-M): \\\"%s\\\"\", optarg);",
          "content_same": false
        },
        {
          "line": 6038,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "\t\t\t\t\tbenchmarking_option_set = true;",
          "new_line_content": "\t\t\t\t\texit(1);",
          "content_same": false
        },
        {
          "line": 3995,
          "old_api": null,
          "new_api": "appendPQExpBufferStr",
          "old_text": null,
          "new_text": "appendPQExpBufferStr(&query, \"maxvalue\")",
          "old_line_content": "\t\t\t\t\t\t\t  \"  partition of pgbench_accounts\\n\"",
          "new_line_content": "\t\t\t\tappendPQExpBufferStr(&query, \"maxvalue\");",
          "content_same": false
        },
        {
          "line": 3997,
          "old_api": null,
          "new_api": "appendPQExpBufferChar",
          "old_text": null,
          "new_text": "appendPQExpBufferChar(&query, ')')",
          "old_line_content": "\t\t\t\t\t\t\t  unlogged_tables ? \" unlogged\" : \"\", p,",
          "new_line_content": "\t\t\tappendPQExpBufferChar(&query, ')');",
          "content_same": false
        },
        {
          "line": 6049,
          "old_api": null,
          "new_api": "pg_log_fatal",
          "old_text": null,
          "new_text": "pg_log_fatal(\"invalid rate limit: \\\"%s\\\"\", optarg)",
          "old_line_content": "\t\t\tcase 'L':",
          "new_line_content": "\t\t\t\t\t\tpg_log_fatal(\"invalid rate limit: \\\"%s\\\"\", optarg);",
          "content_same": false
        },
        {
          "line": 6050,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "\t\t\t\t{",
          "new_line_content": "\t\t\t\t\t\texit(1);",
          "content_same": false
        },
        {
          "line": 4007,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(0)",
          "old_line_content": "",
          "new_line_content": "\t\t\tAssert(0);",
          "content_same": false
        },
        {
          "line": 6058,
          "old_api": null,
          "new_api": "atof",
          "old_text": null,
          "new_text": "atof(optarg)",
          "old_line_content": "\t\t\t\t\tbenchmarking_option_set = true;",
          "new_line_content": "\t\t\t\t\tdouble\t\tlimit_ms = atof(optarg);",
          "content_same": false
        },
        {
          "line": 4013,
          "old_api": null,
          "new_api": "appendPQExpBuffer",
          "old_text": null,
          "new_text": "appendPQExpBuffer(&query, \" with (fillfactor=%d)\", fillfactor)",
          "old_line_content": "",
          "new_line_content": "\t\tappendPQExpBuffer(&query, \" with (fillfactor=%d)\", fillfactor);",
          "content_same": false
        },
        {
          "line": 6062,
          "old_api": null,
          "new_api": "pg_log_fatal",
          "old_text": null,
          "new_text": "pg_log_fatal(\"invalid latency limit: \\\"%s\\\"\", optarg)",
          "old_line_content": "\t\t\tcase 1:\t\t\t\t/* unlogged-tables */",
          "new_line_content": "\t\t\t\t\t\tpg_log_fatal(\"invalid latency limit: \\\"%s\\\"\", optarg);",
          "content_same": false
        },
        {
          "line": 4015,
          "old_api": null,
          "new_api": "executeStatement",
          "old_text": null,
          "new_text": "executeStatement(con, query.data)",
          "old_line_content": " * Create pgbench's standard tables",
          "new_line_content": "\t\texecuteStatement(con, query.data);",
          "content_same": false
        },
        {
          "line": 6063,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "\t\t\t\tinitialization_option_set = true;",
          "new_line_content": "\t\t\t\t\t\texit(1);",
          "content_same": false
        },
        {
          "line": 4018,
          "old_api": null,
          "new_api": "termPQExpBuffer",
          "old_text": null,
          "new_text": "termPQExpBuffer(&query)",
          "old_line_content": "initCreateTables(PGconn *con)",
          "new_line_content": "\ttermPQExpBuffer(&query);",
          "content_same": false
        },
        {
          "line": 6066,
          "old_api": null,
          "new_api": "int64) (limit_ms * 1000)",
          "old_text": null,
          "new_text": "int64) (limit_ms * 1000)",
          "old_line_content": "\t\t\tcase 2:\t\t\t\t/* tablespace */",
          "new_line_content": "\t\t\t\t\tlatency_limit = (int64) (limit_ms * 1000);",
          "content_same": false
        },
        {
          "line": 6075,
          "old_api": null,
          "new_api": "pg_strdup",
          "old_text": null,
          "new_text": "pg_strdup(optarg)",
          "old_line_content": "\t\t\t\tbenchmarking_option_set = true;",
          "new_line_content": "\t\t\t\ttablespace = pg_strdup(optarg);",
          "content_same": false
        },
        {
          "line": 6083,
          "old_api": null,
          "new_api": "atof",
          "old_text": null,
          "new_text": "atof(optarg)",
          "old_line_content": "\t\t\tcase 5:\t\t\t\t/* aggregate-interval */",
          "new_line_content": "\t\t\t\tsample_rate = atof(optarg);",
          "content_same": false
        },
        {
          "line": 6086,
          "old_api": null,
          "new_api": "pg_log_fatal",
          "old_text": null,
          "new_text": "pg_log_fatal(\"invalid sampling rate: \\\"%s\\\"\", optarg)",
          "old_line_content": "\t\t\t\t\t\t\t\t\t  &agg_interval))",
          "new_line_content": "\t\t\t\t\tpg_log_fatal(\"invalid sampling rate: \\\"%s\\\"\", optarg);",
          "content_same": false
        },
        {
          "line": 6092,
          "old_api": null,
          "new_api": "option_parse_int",
          "old_text": null,
          "new_text": "option_parse_int(optarg, \"--aggregate-interval\", 1, INT_MAX,\n\t\t\t\t\t\t\t\t\t  &agg_interval)",
          "old_line_content": "\t\t\t\tbreak;",
          "new_line_content": "\t\t\t\tif (!option_parse_int(optarg, \"--aggregate-interval\", 1, INT_MAX,",
          "content_same": false
        },
        {
          "line": 6094,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "\t\t\t\tbenchmarking_option_set = true;",
          "new_line_content": "\t\t\t\t\texit(1);",
          "content_same": false
        },
        {
          "line": 6102,
          "old_api": null,
          "new_api": "pg_strdup",
          "old_text": null,
          "new_text": "pg_strdup(optarg)",
          "old_line_content": "\t\t\t\tbenchmarking_option_set = true;",
          "new_line_content": "\t\t\t\tlogfile_prefix = pg_strdup(optarg);",
          "content_same": false
        },
        {
          "line": 6110,
          "old_api": null,
          "new_api": "set_random_seed",
          "old_text": null,
          "new_text": "set_random_seed(optarg)",
          "old_line_content": "\t\t\t\t{",
          "new_line_content": "\t\t\t\tif (!set_random_seed(optarg))",
          "content_same": false
        },
        {
          "line": 6112,
          "old_api": null,
          "new_api": "pg_log_fatal",
          "old_text": null,
          "new_text": "pg_log_fatal(\"error while setting random seed from --random-seed option\")",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t\tpg_log_fatal(\"error while setting random seed from --random-seed option\");",
          "content_same": false
        },
        {
          "line": 6118,
          "old_api": null,
          "new_api": "findBuiltin",
          "old_text": null,
          "new_text": "findBuiltin(optarg)",
          "old_line_content": "\t\t\t\tinitialization_option_set = true;",
          "new_line_content": "\t\t\t\t\tconst BuiltinScript *s = findBuiltin(optarg);",
          "content_same": false
        },
        {
          "line": 6120,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr, \"-- %s: %s\\n%s\\n\", s->name, s->desc, s->script)",
          "old_line_content": "\t\t\t\t\t\t\t\t\t  &partitions))",
          "new_line_content": "\t\t\t\t\tfprintf(stderr, \"-- %s: %s\\n%s\\n\", s->name, s->desc, s->script);",
          "content_same": false
        },
        {
          "line": 4074,
          "old_api": null,
          "new_api": "fprintf",
          "old_text": null,
          "new_text": "fprintf(stderr, \"creating tables...\\n\")",
          "old_line_content": "",
          "new_line_content": "\tfprintf(stderr, \"creating tables...\\n\");",
          "content_same": false
        },
        {
          "line": 4078,
          "old_api": null,
          "new_api": "lengthof",
          "old_text": null,
          "new_text": "lengthof(DDLs)",
          "old_line_content": "\t\t\t\t\t\t  ddl->table,",
          "new_line_content": "\tfor (i = 0; i < lengthof(DDLs); i++)",
          "content_same": false
        },
        {
          "line": 6126,
          "old_api": null,
          "new_api": "option_parse_int",
          "old_text": null,
          "new_text": "option_parse_int(optarg, \"--partitions\", 1, INT_MAX,\n\t\t\t\t\t\t\t\t\t  &partitions)",
          "old_line_content": "\t\t\t\t\tpartition_method = PART_RANGE;",
          "new_line_content": "\t\t\t\tif (!option_parse_int(optarg, \"--partitions\", 1, INT_MAX,",
          "content_same": false
        },
        {
          "line": 6128,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "\t\t\t\t\tpartition_method = PART_HASH;",
          "new_line_content": "\t\t\t\t\texit(1);",
          "content_same": false
        },
        {
          "line": 6132,
          "old_api": null,
          "new_api": "pg_strcasecmp",
          "old_text": null,
          "new_text": "pg_strcasecmp(optarg, \"range\")",
          "old_line_content": "\t\t\t\t\t\t\t\t optarg);",
          "new_line_content": "\t\t\t\tif (pg_strcasecmp(optarg, \"range\") == 0)",
          "content_same": false
        },
        {
          "line": 6134,
          "old_api": null,
          "new_api": "pg_strcasecmp",
          "old_text": null,
          "new_text": "pg_strcasecmp(optarg, \"hash\")",
          "old_line_content": "\t\t\t\t}",
          "new_line_content": "\t\t\t\telse if (pg_strcasecmp(optarg, \"hash\") == 0)",
          "content_same": false
        },
        {
          "line": 4089,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(ddl->table, \"pgbench_accounts\")",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\tif (partition_method != PART_NONE && strcmp(ddl->table, \"pgbench_accounts\") == 0)",
          "content_same": false
        },
        {
          "line": 4090,
          "old_api": null,
          "new_api": "appendPQExpBuffer",
          "old_text": null,
          "new_text": "appendPQExpBuffer(&query,\n\t\t\t\t\t\t\t  \" partition by %s (aid)\", PARTITION_METHOD[partition_method])",
          "old_line_content": "",
          "new_line_content": "\t\t\tappendPQExpBuffer(&query,",
          "content_same": false
        },
        {
          "line": 6140,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\t\t\texit(1);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 4096,
          "old_api": "appendPQExpBuffer",
          "new_api": null,
          "old_text": "appendPQExpBuffer(&query, \" tablespace %s\", escape_tablespace)",
          "new_text": null,
          "old_line_content": "\t\t\tappendPQExpBuffer(&query, \" tablespace %s\", escape_tablespace);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 4097,
          "old_api": "PQfreemem",
          "new_api": null,
          "old_text": "PQfreemem(escape_tablespace)",
          "new_text": null,
          "old_line_content": "\t\t\tPQfreemem(escape_tablespace);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6146,
          "old_api": "findBuiltin",
          "new_api": null,
          "old_text": "findBuiltin(\"tpcb-like\")",
          "new_text": null,
          "old_line_content": "\t\tprocess_builtin(findBuiltin(\"tpcb-like\"), 1);",
          "new_line_content": "\t\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 4100,
          "old_api": "executeStatement",
          "new_api": null,
          "old_text": "executeStatement(con, query.data)",
          "new_text": null,
          "old_line_content": "\t\texecuteStatement(con, query.data);",
          "new_line_content": "\t\t\tchar\t   *escape_tablespace;",
          "content_same": false
        },
        {
          "line": 4106,
          "old_api": "createPartitions",
          "new_api": null,
          "old_text": "createPartitions(con)",
          "new_text": null,
          "old_line_content": "\t\tcreatePartitions(con);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6158,
          "old_api": "postprocess_sql_command",
          "new_api": null,
          "old_text": "postprocess_sql_command(commands[j])",
          "new_text": null,
          "old_line_content": "\t\t\t\tpostprocess_sql_command(commands[j]);",
          "new_line_content": "\t/* complete SQL command initialization and compute total weight */",
          "content_same": false
        },
        {
          "line": 4115,
          "old_api": "executeStatement",
          "new_api": null,
          "old_text": "executeStatement(con, \"truncate table \"\n\t\t\t\t\t \"pgbench_accounts, \"\n\t\t\t\t\t \"pgbench_branches, \"\n\t\t\t\t\t \"pgbench_history, \"\n\t\t\t\t\t \"pgbench_tellers\")",
          "new_text": null,
          "old_line_content": "\texecuteStatement(con, \"truncate table \"",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6166,
          "old_api": "pg_log_fatal",
          "new_api": null,
          "old_text": "pg_log_fatal(\"total script weight must not be zero\")",
          "new_text": null,
          "old_line_content": "\t\tpg_log_fatal(\"total script weight must not be zero\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6167,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "\t\texit(1);",
          "new_line_content": "\t\t/* cannot overflow: weight is 32b, total_weight 64b */",
          "content_same": false
        },
        {
          "line": 4138,
          "old_api": "fileno",
          "new_api": null,
          "old_text": "fileno(stderr)",
          "new_text": null,
          "old_line_content": "\tchar\t\teol = isatty(fileno(stderr)) ? '\\r' : '\\n';",
          "new_line_content": "\tint64\t\tk;",
          "content_same": false
        },
        {
          "line": 4140,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr, \"generating data (client-side)...\\n\")",
          "new_text": null,
          "old_line_content": "\tfprintf(stderr, \"generating data (client-side)...\\n\");",
          "new_line_content": "\t/* used to track elapsed time and estimate of the remaining time */",
          "content_same": false
        },
        {
          "line": 6193,
          "old_api": "getenv",
          "new_api": null,
          "old_text": "getenv(\"PGDATABASE\")",
          "new_text": null,
          "old_line_content": "\t\tif ((env = getenv(\"PGDATABASE\")) != NULL && *env != '\\0')",
          "new_line_content": "\t */",
          "content_same": false
        },
        {
          "line": 4146,
          "old_api": "executeStatement",
          "new_api": null,
          "old_text": "executeStatement(con, \"begin\")",
          "new_text": null,
          "old_line_content": "\texecuteStatement(con, \"begin\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6195,
          "old_api": "getenv",
          "new_api": null,
          "old_text": "getenv(\"PGUSER\")",
          "new_text": null,
          "old_line_content": "\t\telse if ((env = getenv(\"PGUSER\")) != NULL && *env != '\\0')",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4149,
          "old_api": "initTruncateTables",
          "new_api": null,
          "old_text": "initTruncateTables(con)",
          "new_text": null,
          "old_line_content": "\tinitTruncateTables(con);",
          "new_line_content": "\t/*",
          "content_same": false
        },
        {
          "line": 6198,
          "old_api": "get_user_name_or_exit",
          "new_api": null,
          "old_text": "get_user_name_or_exit(progname)",
          "new_text": null,
          "old_line_content": "\t\t\tdbName = get_user_name_or_exit(progname);",
          "new_line_content": "\telse",
          "content_same": false
        },
        {
          "line": 4151,
          "old_api": "initPQExpBuffer",
          "new_api": null,
          "old_text": "initPQExpBuffer(&sql)",
          "new_text": null,
          "old_line_content": "\tinitPQExpBuffer(&sql);",
          "new_line_content": "\t * data-loading optimizations",
          "content_same": false
        },
        {
          "line": 6203,
          "old_api": "pg_log_fatal",
          "new_api": null,
          "old_text": "pg_log_fatal(\"too many command-line arguments (first is \\\"%s\\\")\",\n\t\t\t\t\t argv[optind])",
          "new_text": null,
          "old_line_content": "\t\tpg_log_fatal(\"too many command-line arguments (first is \\\"%s\\\")\",",
          "new_line_content": "\t\t\tdbName = env;",
          "content_same": false
        },
        {
          "line": 6206,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "\t\texit(1);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 4160,
          "old_api": "printfPQExpBuffer",
          "new_api": null,
          "old_text": "printfPQExpBuffer(&sql,\n\t\t\t\t\t\t  \"insert into pgbench_branches(bid,bbalance) values(%d,0)\",\n\t\t\t\t\t\t  i + 1)",
          "new_text": null,
          "old_line_content": "\t\tprintfPQExpBuffer(&sql,",
          "new_line_content": "\t/*",
          "content_same": false
        },
        {
          "line": 4163,
          "old_api": "executeStatement",
          "new_api": null,
          "old_text": "executeStatement(con, sql.data)",
          "new_text": null,
          "old_line_content": "\t\texecuteStatement(con, sql.data);",
          "new_line_content": "\t */",
          "content_same": false
        },
        {
          "line": 6214,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "\t\t\texit(1);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 4169,
          "old_api": "printfPQExpBuffer",
          "new_api": null,
          "old_text": "printfPQExpBuffer(&sql,\n\t\t\t\t\t\t  \"insert into pgbench_tellers(tid,bid,tbalance) values (%d,%d,0)\",\n\t\t\t\t\t\t  i + 1, i / ntellers + 1)",
          "new_text": null,
          "old_line_content": "\t\tprintfPQExpBuffer(&sql,",
          "new_line_content": "\t\t\t\t\t\t  i + 1);",
          "content_same": false
        },
        {
          "line": 6219,
          "old_api": "pg_log_fatal",
          "new_api": null,
          "old_text": "pg_log_fatal(\"--partition-method requires greater than zero --partitions\")",
          "new_text": null,
          "old_line_content": "\t\t\tpg_log_fatal(\"--partition-method requires greater than zero --partitions\");",
          "new_line_content": "\t\t{",
          "content_same": false
        },
        {
          "line": 4172,
          "old_api": "executeStatement",
          "new_api": null,
          "old_text": "executeStatement(con, sql.data)",
          "new_text": null,
          "old_line_content": "\t\texecuteStatement(con, sql.data);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4178,
          "old_api": "PQexec",
          "new_api": null,
          "old_text": "PQexec(con, \"copy pgbench_accounts from stdin\")",
          "new_text": null,
          "old_line_content": "\tres = PQexec(con, \"copy pgbench_accounts from stdin\");",
          "new_line_content": "\t\t\t\t\t\t  i + 1, i / ntellers + 1);",
          "content_same": false
        },
        {
          "line": 6228,
          "old_api": "pg_strdup",
          "new_api": null,
          "old_text": "pg_strdup(DEFAULT_INIT_STEPS)",
          "new_text": null,
          "old_line_content": "\t\t\tinitialize_steps = pg_strdup(DEFAULT_INIT_STEPS);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 4181,
          "old_api": "PQerrorMessage",
          "new_api": null,
          "old_text": "PQerrorMessage(con)",
          "new_text": null,
          "old_line_content": "\t\tpg_log_fatal(\"unexpected copy in result: %s\", PQerrorMessage(con));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4182,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "\t\texit(1);",
          "new_line_content": "\t/*",
          "content_same": false
        },
        {
          "line": 4184,
          "old_api": "PQclear",
          "new_api": null,
          "old_text": "PQclear(res)",
          "new_text": null,
          "old_line_content": "\tPQclear(res);",
          "new_line_content": "\t */",
          "content_same": false
        },
        {
          "line": 4196,
          "old_api": "PQputline",
          "new_api": null,
          "old_text": "PQputline(con, sql.data)",
          "new_text": null,
          "old_line_content": "\t\tif (PQputline(con, sql.data))",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 6245,
          "old_api": "pg_realloc",
          "new_api": null,
          "old_text": "pg_realloc(initialize_steps,\n\t\t\t\t\t\t\t   strlen(initialize_steps) + 2)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tpg_realloc(initialize_steps,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4198,
          "old_api": "pg_log_fatal",
          "new_api": null,
          "old_text": "pg_log_fatal(\"PQputline failed\")",
          "new_text": null,
          "old_line_content": "\t\t\tpg_log_fatal(\"PQputline failed\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4199,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "\t\t\texit(1);",
          "new_line_content": "\t\t/* \"filler\" column defaults to blank padded empty string */",
          "content_same": false
        },
        {
          "line": 6246,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(initialize_steps)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\t   strlen(initialize_steps) + 2);",
          "new_line_content": "\t\tif (foreign_keys)",
          "content_same": false
        },
        {
          "line": 6247,
          "old_api": "strcat",
          "new_api": null,
          "old_text": "strcat(initialize_steps, \"f\")",
          "new_text": null,
          "old_line_content": "\t\t\t\tstrcat(initialize_steps, \"f\");",
          "new_line_content": "\t\t{",
          "content_same": false
        },
        {
          "line": 6251,
          "old_api": "runInitSteps",
          "new_api": null,
          "old_text": "runInitSteps(initialize_steps)",
          "new_text": null,
          "old_line_content": "\t\trunInitSteps(initialize_steps);",
          "new_line_content": "\t\t\t\tinitialize_steps = (char *)",
          "content_same": false
        },
        {
          "line": 4211,
          "old_api": "pg_time_now",
          "new_api": null,
          "old_text": "pg_time_now()",
          "new_text": null,
          "old_line_content": "\t\t\tdouble\t\telapsed_sec = PG_TIME_GET_DOUBLE(pg_time_now() - start);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4214,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr, INT64_FORMAT \" of \" INT64_FORMAT \" tuples (%d%%) done (elapsed %.2f s, remaining %.2f s)%c\",\n\t\t\t\t\tj, (int64) naccounts * scale,\n\t\t\t\t\t(int) (((int64) j * 100) / (naccounts * (int64) scale)),\n\t\t\t\t\telapsed_sec, remaining_sec, eol)",
          "new_text": null,
          "old_line_content": "\t\t\tfprintf(stderr, INT64_FORMAT \" of \" INT64_FORMAT \" tuples (%d%%) done (elapsed %.2f s, remaining %.2f s)%c\",",
          "new_line_content": "\t\t * 100k inserted rows.",
          "content_same": false
        },
        {
          "line": 4222,
          "old_api": "pg_time_now",
          "new_api": null,
          "old_text": "pg_time_now()",
          "new_text": null,
          "old_line_content": "\t\t\tdouble\t\telapsed_sec = PG_TIME_GET_DOUBLE(pg_time_now() - start);",
          "new_line_content": "\t\t\t\t\tj, (int64) naccounts * scale,",
          "content_same": false
        },
        {
          "line": 4228,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr, INT64_FORMAT \" of \" INT64_FORMAT \" tuples (%d%%) done (elapsed %.2f s, remaining %.2f s)%c\",\n\t\t\t\t\t\tj, (int64) naccounts * scale,\n\t\t\t\t\t\t(int) (((int64) j * 100) / (naccounts * (int64) scale)), elapsed_sec, remaining_sec, eol)",
          "new_text": null,
          "old_line_content": "\t\t\t\tfprintf(stderr, INT64_FORMAT \" of \" INT64_FORMAT \" tuples (%d%%) done (elapsed %.2f s, remaining %.2f s)%c\",",
          "new_line_content": "\t\t{",
          "content_same": false
        },
        {
          "line": 6276,
          "old_api": "pg_log_fatal",
          "new_api": null,
          "old_text": "pg_log_fatal(\"log sampling (--sampling-rate) is allowed only when logging transactions (-l)\")",
          "new_text": null,
          "old_line_content": "\t\tpg_log_fatal(\"log sampling (--sampling-rate) is allowed only when logging transactions (-l)\");",
          "new_line_content": "\t/* Use DEFAULT_NXACTS if neither nxacts nor duration is specified. */",
          "content_same": false
        },
        {
          "line": 6277,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "\t\texit(1);",
          "new_line_content": "\tif (nxacts <= 0 && duration <= 0)",
          "content_same": false
        },
        {
          "line": 4233,
          "old_api": "ceil",
          "new_api": null,
          "old_text": "ceil(elapsed_sec / LOG_STEP_SECONDS)",
          "new_text": null,
          "old_line_content": "\t\t\t\tlog_interval = (int) ceil(elapsed_sec / LOG_STEP_SECONDS);",
          "new_line_content": "\t\t\tif ((j == scale * naccounts) || (elapsed_sec >= log_interval * LOG_STEP_SECONDS))",
          "content_same": false
        },
        {
          "line": 4239,
          "old_api": "fputc",
          "new_api": null,
          "old_text": "fputc('\\n', stderr)",
          "new_text": null,
          "old_line_content": "\t\tfputc('\\n', stderr);\t/* Need to move to next line */",
          "new_line_content": "\t\t\t\t/* skip to the next interval */",
          "content_same": false
        },
        {
          "line": 4241,
          "old_api": "PQputline",
          "new_api": null,
          "old_text": "PQputline(con, \"\\\\.\\n\")",
          "new_text": null,
          "old_line_content": "\tif (PQputline(con, \"\\\\.\\n\"))",
          "new_line_content": "\t\t\t}",
          "content_same": false
        },
        {
          "line": 6289,
          "old_api": "pg_log_fatal",
          "new_api": null,
          "old_text": "pg_log_fatal(\"log aggregation is allowed only when actually logging transactions\")",
          "new_text": null,
          "old_line_content": "\t\tpg_log_fatal(\"log aggregation is allowed only when actually logging transactions\");",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 4243,
          "old_api": "pg_log_fatal",
          "new_api": null,
          "old_text": "pg_log_fatal(\"very last PQputline failed\")",
          "new_text": null,
          "old_line_content": "\t\tpg_log_fatal(\"very last PQputline failed\");",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 4244,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "\t\texit(1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6295,
          "old_api": "pg_log_fatal",
          "new_api": null,
          "old_text": "pg_log_fatal(\"log file prefix (--log-prefix) is allowed only when logging transactions (-l)\")",
          "new_text": null,
          "old_line_content": "\t\tpg_log_fatal(\"log file prefix (--log-prefix) is allowed only when logging transactions (-l)\");",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 4249,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "\t\texit(1);",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 4252,
          "old_api": "termPQExpBuffer",
          "new_api": null,
          "old_text": "termPQExpBuffer(&sql)",
          "new_text": null,
          "old_line_content": "\ttermPQExpBuffer(&sql);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 6301,
          "old_api": "pg_log_fatal",
          "new_api": null,
          "old_text": "pg_log_fatal(\"number of seconds for aggregation (%d) must not be higher than test duration (%d)\", agg_interval, duration)",
          "new_text": null,
          "old_line_content": "\t\tpg_log_fatal(\"number of seconds for aggregation (%d) must not be higher than test duration (%d)\", agg_interval, duration);",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 4254,
          "old_api": "executeStatement",
          "new_api": null,
          "old_text": "executeStatement(con, \"commit\")",
          "new_text": null,
          "old_line_content": "\texecuteStatement(con, \"commit\");",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 6307,
          "old_api": "pg_log_fatal",
          "new_api": null,
          "old_text": "pg_log_fatal(\"duration (%d) must be a multiple of aggregation interval (%d)\", duration, agg_interval)",
          "new_text": null,
          "old_line_content": "\t\tpg_log_fatal(\"duration (%d) must be a multiple of aggregation interval (%d)\", duration, agg_interval);",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 6313,
          "old_api": "pg_log_fatal",
          "new_api": null,
          "old_text": "pg_log_fatal(\"--progress-timestamp is allowed only under --progress\")",
          "new_text": null,
          "old_line_content": "\t\tpg_log_fatal(\"--progress-timestamp is allowed only under --progress\");",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 4269,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr, \"generating data (server-side)...\\n\")",
          "new_text": null,
          "old_line_content": "\tfprintf(stderr, \"generating data (server-side)...\\n\");",
          "new_line_content": " * and is a blank-padded string in pgbench_accounts.",
          "content_same": false
        },
        {
          "line": 4275,
          "old_api": "executeStatement",
          "new_api": null,
          "old_text": "executeStatement(con, \"begin\")",
          "new_text": null,
          "old_line_content": "\texecuteStatement(con, \"begin\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6325,
          "old_api": "pg_realloc",
          "new_api": null,
          "old_text": "pg_realloc(state, sizeof(CState) * nclients)",
          "new_text": null,
          "old_line_content": "\t\tstate = (CState *) pg_realloc(state, sizeof(CState) * nclients);",
          "new_line_content": "\t * save main process id in the global variable because process id will be",
          "content_same": false
        },
        {
          "line": 4278,
          "old_api": "initTruncateTables",
          "new_api": null,
          "old_text": "initTruncateTables(con)",
          "new_text": null,
          "old_line_content": "\tinitTruncateTables(con);",
          "new_line_content": "\t/*",
          "content_same": false
        },
        {
          "line": 6326,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(state + 1, 0, sizeof(CState) * (nclients - 1))",
          "new_text": null,
          "old_line_content": "\t\tmemset(state + 1, 0, sizeof(CState) * (nclients - 1));",
          "new_line_content": "\t * changed after fork.",
          "content_same": false
        },
        {
          "line": 4280,
          "old_api": "initPQExpBuffer",
          "new_api": null,
          "old_text": "initPQExpBuffer(&sql)",
          "new_text": null,
          "old_line_content": "\tinitPQExpBuffer(&sql);",
          "new_line_content": "\t * data-loading optimizations",
          "content_same": false
        },
        {
          "line": 4286,
          "old_api": "executeStatement",
          "new_api": null,
          "old_text": "executeStatement(con, sql.data)",
          "new_text": null,
          "old_line_content": "\texecuteStatement(con, sql.data);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4288,
          "old_api": "printfPQExpBuffer",
          "new_api": null,
          "old_text": "printfPQExpBuffer(&sql,\n\t\t\t\t\t  \"insert into pgbench_tellers(tid,bid,tbalance) \"\n\t\t\t\t\t  \"select tid, (tid - 1) / %d + 1, 0 \"\n\t\t\t\t\t  \"from generate_series(1, %d) as tid\", ntellers, ntellers * scale)",
          "new_text": null,
          "old_line_content": "\tprintfPQExpBuffer(&sql,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4292,
          "old_api": "executeStatement",
          "new_api": null,
          "old_text": "executeStatement(con, sql.data)",
          "new_text": null,
          "old_line_content": "\texecuteStatement(con, sql.data);",
          "new_line_content": "\t\t\t\t\t  \"from generate_series(1, %d) as bid\", nbranches * scale);",
          "content_same": false
        },
        {
          "line": 6340,
          "old_api": "putVariableValue",
          "new_api": null,
          "old_text": "putVariableValue(&state[i], \"startup\",\n\t\t\t\t\t\t\t\t\t\t  var->name, &var->value)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tif (!putVariableValue(&state[i], \"startup\",",
          "new_line_content": "\t\t\tstate[i].id = i;",
          "content_same": false
        },
        {
          "line": 4294,
          "old_api": "printfPQExpBuffer",
          "new_api": null,
          "old_text": "printfPQExpBuffer(&sql,\n\t\t\t\t\t  \"insert into pgbench_accounts(aid,bid,abalance,filler) \"\n\t\t\t\t\t  \"select aid, (aid - 1) / %d + 1, 0, '' \"\n\t\t\t\t\t  \"from generate_series(1, \" INT64_FORMAT \") as aid\",\n\t\t\t\t\t  naccounts, (int64) naccounts * scale)",
          "new_text": null,
          "old_line_content": "\tprintfPQExpBuffer(&sql,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6342,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\texit(1);",
          "new_line_content": "\t\t\t{",
          "content_same": false
        },
        {
          "line": 6346,
          "old_api": "putVariable",
          "new_api": null,
          "old_text": "putVariable(&state[i], \"startup\",\n\t\t\t\t\t\t\t\t\t var->name, var->svalue)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tif (!putVariable(&state[i], \"startup\",",
          "new_line_content": "\t\t\t\t{",
          "content_same": false
        },
        {
          "line": 6348,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\texit(1);",
          "new_line_content": "\t\t\t\t\t\t\t\t\t\t  var->name, &var->value))",
          "content_same": false
        },
        {
          "line": 4303,
          "old_api": "executeStatement",
          "new_api": null,
          "old_text": "executeStatement(con, \"commit\")",
          "new_text": null,
          "old_line_content": "\texecuteStatement(con, \"commit\");",
          "new_line_content": "\t\t\t\t\t  \"select aid, (aid - 1) / %d + 1, 0, '' \"",
          "content_same": false
        },
        {
          "line": 6357,
          "old_api": "conditional_stack_create",
          "new_api": null,
          "old_text": "conditional_stack_create()",
          "new_text": null,
          "old_line_content": "\t\tstate[i].cstack = conditional_stack_create();",
          "new_line_content": "\t\t\t}",
          "content_same": false
        },
        {
          "line": 6358,
          "old_api": "initRandomState",
          "new_api": null,
          "old_text": "initRandomState(&state[i].cs_func_rs)",
          "new_text": null,
          "old_line_content": "\t\tinitRandomState(&state[i].cs_func_rs);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 4312,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr, \"vacuuming...\\n\")",
          "new_text": null,
          "old_line_content": "\tfprintf(stderr, \"vacuuming...\\n\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4313,
          "old_api": "executeStatement",
          "new_api": null,
          "old_text": "executeStatement(con, \"vacuum analyze pgbench_branches\")",
          "new_text": null,
          "old_line_content": "\texecuteStatement(con, \"vacuum analyze pgbench_branches\");",
          "new_line_content": "/*",
          "content_same": false
        },
        {
          "line": 4314,
          "old_api": "executeStatement",
          "new_api": null,
          "old_text": "executeStatement(con, \"vacuum analyze pgbench_tellers\")",
          "new_text": null,
          "old_line_content": "\texecuteStatement(con, \"vacuum analyze pgbench_tellers\");",
          "new_line_content": " * Invoke vacuum on the standard tables",
          "content_same": false
        },
        {
          "line": 4315,
          "old_api": "executeStatement",
          "new_api": null,
          "old_text": "executeStatement(con, \"vacuum analyze pgbench_accounts\")",
          "new_text": null,
          "old_line_content": "\texecuteStatement(con, \"vacuum analyze pgbench_accounts\");",
          "new_line_content": " */",
          "content_same": false
        },
        {
          "line": 4316,
          "old_api": "executeStatement",
          "new_api": null,
          "old_text": "executeStatement(con, \"vacuum analyze pgbench_history\")",
          "new_text": null,
          "old_line_content": "\texecuteStatement(con, \"vacuum analyze pgbench_history\");",
          "new_line_content": "static void",
          "content_same": false
        },
        {
          "line": 6362,
          "old_api": "doConnect",
          "new_api": null,
          "old_text": "doConnect()",
          "new_text": null,
          "old_line_content": "\tcon = doConnect();",
          "new_line_content": "\tfor (i = 0; i < nclients; i++)",
          "content_same": false
        },
        {
          "line": 6367,
          "old_api": "printVersion",
          "new_api": null,
          "old_text": "printVersion(con)",
          "new_text": null,
          "old_line_content": "\tprintVersion(con);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6370,
          "old_api": "PQport",
          "new_api": null,
          "old_text": "PQport(con)",
          "new_text": null,
          "old_line_content": "\t\t\t\t PQhost(con), PQport(con), nclients,",
          "new_line_content": "\tif (con == NULL)",
          "content_same": false
        },
        {
          "line": 6372,
          "old_api": "PQdb",
          "new_api": null,
          "old_text": "PQdb(con)",
          "new_text": null,
          "old_line_content": "\t\t\t\t duration <= 0 ? nxacts : duration, PQdb(con));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6375,
          "old_api": "GetTableInfo",
          "new_api": null,
          "old_text": "GetTableInfo(con, scale_given)",
          "new_text": null,
          "old_line_content": "\t\tGetTableInfo(con, scale_given);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4333,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr, \"creating primary keys...\\n\")",
          "new_text": null,
          "old_line_content": "\tfprintf(stderr, \"creating primary keys...\\n\");",
          "new_line_content": "\t\t\"alter table pgbench_branches add primary key (bid)\",",
          "content_same": false
        },
        {
          "line": 4334,
          "old_api": "initPQExpBuffer",
          "new_api": null,
          "old_text": "initPQExpBuffer(&query)",
          "new_text": null,
          "old_line_content": "\tinitPQExpBuffer(&query);",
          "new_line_content": "\t\t\"alter table pgbench_tellers add primary key (tid)\",",
          "content_same": false
        },
        {
          "line": 6381,
          "old_api": "lookupVariable",
          "new_api": null,
          "old_text": "lookupVariable(&state[0], \"scale\")",
          "new_text": null,
          "old_line_content": "\tif (lookupVariable(&state[0], \"scale\") == NULL)",
          "new_line_content": "\tif (internal_script_used)",
          "content_same": false
        },
        {
          "line": 4336,
          "old_api": "lengthof",
          "new_api": null,
          "old_text": "lengthof(DDLINDEXes)",
          "new_text": null,
          "old_line_content": "\tfor (i = 0; i < lengthof(DDLINDEXes); i++)",
          "new_line_content": "\t};",
          "content_same": false
        },
        {
          "line": 6385,
          "old_api": "putVariableInt",
          "new_api": null,
          "old_text": "putVariableInt(&state[i], \"startup\", \"scale\", scale)",
          "new_text": null,
          "old_line_content": "\t\t\tif (!putVariableInt(&state[i], \"startup\", \"scale\", scale))",
          "new_line_content": "\t * :scale variables normally get -s or database scale, but don't override",
          "content_same": false
        },
        {
          "line": 4338,
          "old_api": "resetPQExpBuffer",
          "new_api": null,
          "old_text": "resetPQExpBuffer(&query)",
          "new_text": null,
          "old_line_content": "\t\tresetPQExpBuffer(&query);",
          "new_line_content": "\tPQExpBufferData query;",
          "content_same": false
        },
        {
          "line": 4339,
          "old_api": "appendPQExpBufferStr",
          "new_api": null,
          "old_text": "appendPQExpBufferStr(&query, DDLINDEXes[i])",
          "new_text": null,
          "old_line_content": "\t\tappendPQExpBufferStr(&query, DDLINDEXes[i]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6386,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "\t\t\t\texit(1);",
          "new_line_content": "\t * an explicit -D switch",
          "content_same": false
        },
        {
          "line": 6394,
          "old_api": "lookupVariable",
          "new_api": null,
          "old_text": "lookupVariable(&state[0], \"client_id\")",
          "new_text": null,
          "old_line_content": "\tif (lookupVariable(&state[0], \"client_id\") == NULL)",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 4347,
          "old_api": "appendPQExpBuffer",
          "new_api": null,
          "old_text": "appendPQExpBuffer(&query, \" using index tablespace %s\", escape_tablespace)",
          "new_text": null,
          "old_line_content": "\t\t\tappendPQExpBuffer(&query, \" using index tablespace %s\", escape_tablespace);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4348,
          "old_api": "PQfreemem",
          "new_api": null,
          "old_text": "PQfreemem(escape_tablespace)",
          "new_text": null,
          "old_line_content": "\t\t\tPQfreemem(escape_tablespace);",
          "new_line_content": "\t\tif (index_tablespace != NULL)",
          "content_same": false
        },
        {
          "line": 6397,
          "old_api": "putVariableInt",
          "new_api": null,
          "old_text": "putVariableInt(&state[i], \"startup\", \"client_id\", i)",
          "new_text": null,
          "old_line_content": "\t\t\tif (!putVariableInt(&state[i], \"startup\", \"client_id\", i))",
          "new_line_content": "\t/*",
          "content_same": false
        },
        {
          "line": 6398,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "\t\t\t\texit(1);",
          "new_line_content": "\t * Define a :client_id variable that is unique per connection. But don't",
          "content_same": false
        },
        {
          "line": 4351,
          "old_api": "executeStatement",
          "new_api": null,
          "old_text": "executeStatement(con, query.data)",
          "new_text": null,
          "old_line_content": "\t\texecuteStatement(con, query.data);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6402,
          "old_api": "lookupVariable",
          "new_api": null,
          "old_text": "lookupVariable(&state[0], \"default_seed\")",
          "new_text": null,
          "old_line_content": "\tif (lookupVariable(&state[0], \"default_seed\") == NULL)",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 6406,
          "old_api": "pg_jrand48",
          "new_api": null,
          "old_text": "pg_jrand48(base_random_sequence.xseed)",
          "new_text": null,
          "old_line_content": "\t\t(((uint64) pg_jrand48(base_random_sequence.xseed) & 0xFFFFFFFF) << 32);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 6410,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "\t\t\t\texit(1);",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 6414,
          "old_api": "lookupVariable",
          "new_api": null,
          "old_text": "lookupVariable(&state[0], \"random_seed\")",
          "new_text": null,
          "old_line_content": "\tif (lookupVariable(&state[0], \"random_seed\") == NULL)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6418,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "\t\t\t\texit(1);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 4372,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr, \"creating foreign keys...\\n\")",
          "new_text": null,
          "old_line_content": "\tfprintf(stderr, \"creating foreign keys...\\n\");",
          "new_line_content": "\t\t\"alter table pgbench_accounts add constraint pgbench_accounts_bid_fkey foreign key (bid) references pgbench_branches\",",
          "content_same": false
        },
        {
          "line": 4373,
          "old_api": "lengthof",
          "new_api": null,
          "old_text": "lengthof(DDLKEYs)",
          "new_text": null,
          "old_line_content": "\tfor (i = 0; i < lengthof(DDLKEYs); i++)",
          "new_line_content": "\t\t\"alter table pgbench_history add constraint pgbench_history_bid_fkey foreign key (bid) references pgbench_branches\",",
          "content_same": false
        },
        {
          "line": 4375,
          "old_api": "executeStatement",
          "new_api": null,
          "old_text": "executeStatement(con, DDLKEYs[i])",
          "new_text": null,
          "old_line_content": "\t\texecuteStatement(con, DDLKEYs[i]);",
          "new_line_content": "\t\t\"alter table pgbench_history add constraint pgbench_history_aid_fkey foreign key (aid) references pgbench_accounts\"",
          "content_same": false
        },
        {
          "line": 6423,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr, \"starting vacuum...\")",
          "new_text": null,
          "old_line_content": "\t\tfprintf(stderr, \"starting vacuum...\");",
          "new_line_content": "\t\tfor (i = 0; i < nclients; i++)",
          "content_same": false
        },
        {
          "line": 6426,
          "old_api": "tryExecuteStatement",
          "new_api": null,
          "old_text": "tryExecuteStatement(con, \"truncate pgbench_history\")",
          "new_text": null,
          "old_line_content": "\t\ttryExecuteStatement(con, \"truncate pgbench_history\");",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 6427,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr, \"end.\\n\")",
          "new_text": null,
          "old_line_content": "\t\tfprintf(stderr, \"end.\\n\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6436,
          "old_api": "PQfinish",
          "new_api": null,
          "old_text": "PQfinish(con)",
          "new_text": null,
          "old_line_content": "\tPQfinish(con);",
          "new_line_content": "\t\tif (do_vacuum_accounts)",
          "content_same": false
        },
        {
          "line": 4391,
          "old_api": "pg_log_fatal",
          "new_api": null,
          "old_text": "pg_log_fatal(\"no initialization steps specified\")",
          "new_text": null,
          "old_line_content": "\t\tpg_log_fatal(\"no initialization steps specified\");",
          "new_line_content": " * to check during option parsing.)",
          "content_same": false
        },
        {
          "line": 4392,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "\t\texit(1);",
          "new_line_content": " */",
          "content_same": false
        },
        {
          "line": 4397,
          "old_api": "strchr",
          "new_api": null,
          "old_text": "strchr(ALL_INIT_STEPS \" \", *step)",
          "new_text": null,
          "old_line_content": "\t\tif (strchr(ALL_INIT_STEPS \" \", *step) == NULL)",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 4400,
          "old_api": "pg_log_info",
          "new_api": null,
          "old_text": "pg_log_info(\"Allowed step characters are: \\\"\" ALL_INIT_STEPS \"\\\".\")",
          "new_text": null,
          "old_line_content": "\t\t\tpg_log_info(\"Allowed step characters are: \\\"\" ALL_INIT_STEPS \"\\\".\");",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 4401,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "\t\t\texit(1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6450,
          "old_api": "initRandomState",
          "new_api": null,
          "old_text": "initRandomState(&thread->ts_choose_rs)",
          "new_text": null,
          "old_line_content": "\t\tinitRandomState(&thread->ts_choose_rs);",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 6451,
          "old_api": "initRandomState",
          "new_api": null,
          "old_text": "initRandomState(&thread->ts_throttle_rs)",
          "new_text": null,
          "old_line_content": "\t\tinitRandomState(&thread->ts_throttle_rs);",
          "new_line_content": "\t\tTState\t   *thread = &threads[i];",
          "content_same": false
        },
        {
          "line": 6452,
          "old_api": "initRandomState",
          "new_api": null,
          "old_text": "initRandomState(&thread->ts_sample_rs)",
          "new_text": null,
          "old_line_content": "\t\tinitRandomState(&thread->ts_sample_rs);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6455,
          "old_api": "initStats",
          "new_api": null,
          "old_text": "initStats(&thread->stats, 0)",
          "new_text": null,
          "old_line_content": "\t\tinitStats(&thread->stats, 0);",
          "new_line_content": "\t\tthread->nstate =",
          "content_same": false
        },
        {
          "line": 6461,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(nclients_dealt == nclients)",
          "new_text": null,
          "old_line_content": "\tAssert(nclients_dealt == nclients);",
          "new_line_content": "\t\tthread->latency_late = 0;",
          "content_same": false
        },
        {
          "line": 6464,
          "old_api": "pg_time_now",
          "new_api": null,
          "old_text": "pg_time_now()",
          "new_text": null,
          "old_line_content": "\tstart_time = pg_time_now();",
          "new_line_content": "\t\tnclients_dealt += thread->nstate;",
          "content_same": false
        },
        {
          "line": 4418,
          "old_api": "initPQExpBuffer",
          "new_api": null,
          "old_text": "initPQExpBuffer(&stats)",
          "new_text": null,
          "old_line_content": "\tinitPQExpBuffer(&stats);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 4420,
          "old_api": "doConnect",
          "new_api": null,
          "old_text": "doConnect()",
          "new_text": null,
          "old_line_content": "\tif ((con = doConnect()) == NULL)",
          "new_line_content": "\tPGconn\t   *con;",
          "content_same": false
        },
        {
          "line": 4421,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "\t\texit(1);",
          "new_line_content": "\tconst char *step;",
          "content_same": false
        },
        {
          "line": 6470,
          "old_api": "THREAD_BARRIER_INIT",
          "new_api": null,
          "old_text": "THREAD_BARRIER_INIT(&barrier, nthreads)",
          "new_text": null,
          "old_line_content": "\terrno = THREAD_BARRIER_INIT(&barrier, nthreads);",
          "new_line_content": "\t/* get start up time for the whole computation */",
          "content_same": false
        },
        {
          "line": 4423,
          "old_api": "setup_cancel_handler",
          "new_api": null,
          "old_text": "setup_cancel_handler(NULL)",
          "new_text": null,
          "old_line_content": "\tsetup_cancel_handler(NULL);",
          "new_line_content": "\tbool\t\tfirst = true;",
          "content_same": false
        },
        {
          "line": 4424,
          "old_api": "SetCancelConn",
          "new_api": null,
          "old_text": "SetCancelConn(con)",
          "new_text": null,
          "old_line_content": "\tSetCancelConn(con);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6473,
          "old_api": "pg_log_fatal",
          "new_api": null,
          "old_text": "pg_log_fatal(\"could not initialize barrier: %m\")",
          "new_text": null,
          "old_line_content": "\t\tpg_log_fatal(\"could not initialize barrier: %m\");",
          "new_line_content": "\t/* set alarm if duration is specified. */",
          "content_same": false
        },
        {
          "line": 6474,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "\t\texit(1);",
          "new_line_content": "\tif (duration > 0)",
          "content_same": false
        },
        {
          "line": 4429,
          "old_api": "pg_time_now",
          "new_api": null,
          "old_text": "pg_time_now()",
          "new_text": null,
          "old_line_content": "\t\tpg_time_usec_t start = pg_time_now();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4435,
          "old_api": "initDropTables",
          "new_api": null,
          "old_text": "initDropTables(con)",
          "new_text": null,
          "old_line_content": "\t\t\t\tinitDropTables(con);",
          "new_line_content": "\t\tchar\t   *op = NULL;",
          "content_same": false
        },
        {
          "line": 6483,
          "old_api": "pg_time_now",
          "new_api": null,
          "old_text": "pg_time_now()",
          "new_text": null,
          "old_line_content": "\t\tthread->create_time = pg_time_now();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6484,
          "old_api": "THREAD_CREATE",
          "new_api": null,
          "old_text": "THREAD_CREATE(&thread->thread, threadRun, thread)",
          "new_text": null,
          "old_line_content": "\t\terrno = THREAD_CREATE(&thread->thread, threadRun, thread);",
          "new_line_content": "#ifdef ENABLE_THREAD_SAFETY",
          "content_same": false
        },
        {
          "line": 4439,
          "old_api": "initCreateTables",
          "new_api": null,
          "old_text": "initCreateTables(con)",
          "new_text": null,
          "old_line_content": "\t\t\t\tinitCreateTables(con);",
          "new_line_content": "\t\t{",
          "content_same": false
        },
        {
          "line": 6488,
          "old_api": "pg_log_fatal",
          "new_api": null,
          "old_text": "pg_log_fatal(\"could not create thread: %m\")",
          "new_text": null,
          "old_line_content": "\t\t\tpg_log_fatal(\"could not create thread: %m\");",
          "new_line_content": "\t\tTState\t   *thread = &threads[i];",
          "content_same": false
        },
        {
          "line": 6489,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "\t\t\texit(1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4443,
          "old_api": "initGenerateDataClientSide",
          "new_api": null,
          "old_text": "initGenerateDataClientSide(con)",
          "new_text": null,
          "old_line_content": "\t\t\t\tinitGenerateDataClientSide(con);",
          "new_line_content": "\t\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 6493,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(nthreads == 1)",
          "new_text": null,
          "old_line_content": "\tAssert(nthreads == 1);",
          "new_line_content": "\t\tif (errno != 0)",
          "content_same": false
        },
        {
          "line": 4447,
          "old_api": "initGenerateDataServerSide",
          "new_api": null,
          "old_text": "initGenerateDataServerSide(con)",
          "new_text": null,
          "old_line_content": "\t\t\t\tinitGenerateDataServerSide(con);",
          "new_line_content": "\t\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 6497,
          "old_api": "pg_time_now",
          "new_api": null,
          "old_text": "pg_time_now()",
          "new_text": null,
          "old_line_content": "\tthreads[0].create_time = pg_time_now();",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 4451,
          "old_api": "initVacuum",
          "new_api": null,
          "old_text": "initVacuum(con)",
          "new_text": null,
          "old_line_content": "\t\t\t\tinitVacuum(con);",
          "new_line_content": "\t\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 6502,
          "old_api": "threadRun",
          "new_api": null,
          "old_text": "threadRun(&threads[0])",
          "new_text": null,
          "old_line_content": "\t(void) threadRun(&threads[0]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4455,
          "old_api": "initCreatePKeys",
          "new_api": null,
          "old_text": "initCreatePKeys(con)",
          "new_text": null,
          "old_line_content": "\t\t\t\tinitCreatePKeys(con);",
          "new_line_content": "\t\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 6505,
          "old_api": "initStats",
          "new_api": null,
          "old_text": "initStats(&stats, 0)",
          "new_text": null,
          "old_line_content": "\tinitStats(&stats, 0);",
          "new_line_content": "\tif (duration > 0)",
          "content_same": false
        },
        {
          "line": 4459,
          "old_api": "initCreateFKeys",
          "new_api": null,
          "old_text": "initCreateFKeys(con)",
          "new_text": null,
          "old_line_content": "\t\t\t\tinitCreateFKeys(con);",
          "new_line_content": "\t\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 4464,
          "old_api": "pg_log_fatal",
          "new_api": null,
          "old_text": "pg_log_fatal(\"unrecognized initialization step \\\"%c\\\"\", *step)",
          "new_text": null,
          "old_line_content": "\t\t\t\tpg_log_fatal(\"unrecognized initialization step \\\"%c\\\"\", *step);",
          "new_line_content": "\t\t\tcase 'f':",
          "content_same": false
        },
        {
          "line": 4465,
          "old_api": "PQfinish",
          "new_api": null,
          "old_text": "PQfinish(con)",
          "new_text": null,
          "old_line_content": "\t\t\t\tPQfinish(con);",
          "new_line_content": "\t\t\t\top = \"foreign keys\";",
          "content_same": false
        },
        {
          "line": 6514,
          "old_api": "THREAD_JOIN",
          "new_api": null,
          "old_text": "THREAD_JOIN(thread->thread)",
          "new_text": null,
          "old_line_content": "\t\t\tTHREAD_JOIN(thread->thread);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4474,
          "old_api": "appendPQExpBufferStr",
          "new_api": null,
          "old_text": "appendPQExpBufferStr(&stats, \", \")",
          "new_text": null,
          "old_line_content": "\t\t\t\tappendPQExpBufferStr(&stats, \", \");",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 6522,
          "old_api": "mergeSimpleStats",
          "new_api": null,
          "old_text": "mergeSimpleStats(&stats.latency, &thread->stats.latency)",
          "new_text": null,
          "old_line_content": "\t\tmergeSimpleStats(&stats.latency, &thread->stats.latency);",
          "new_line_content": "#endif\t\t\t\t\t\t\t/* ENABLE_THREAD_SAFETY */",
          "content_same": false
        },
        {
          "line": 6523,
          "old_api": "mergeSimpleStats",
          "new_api": null,
          "old_text": "mergeSimpleStats(&stats.lag, &thread->stats.lag)",
          "new_text": null,
          "old_line_content": "\t\tmergeSimpleStats(&stats.lag, &thread->stats.lag);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4484,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr, \"done in %.2f s (%s).\\n\", run_time, stats.data)",
          "new_text": null,
          "old_line_content": "\tfprintf(stderr, \"done in %.2f s (%s).\\n\", run_time, stats.data);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4486,
          "old_api": "PQfinish",
          "new_api": null,
          "old_text": "PQfinish(con)",
          "new_text": null,
          "old_line_content": "\tPQfinish(con);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4487,
          "old_api": "termPQExpBuffer",
          "new_api": null,
          "old_text": "termPQExpBuffer(&stats)",
          "new_text": null,
          "old_line_content": "\ttermPQExpBuffer(&stats);",
          "new_line_content": "\t\t\trun_time += elapsed_sec;",
          "content_same": false
        },
        {
          "line": 6535,
          "old_api": "disconnect_all",
          "new_api": null,
          "old_text": "disconnect_all(state, nclients)",
          "new_text": null,
          "old_line_content": "\tdisconnect_all(state, nclients);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6544,
          "old_api": "pg_time_now",
          "new_api": null,
          "old_text": "pg_time_now()",
          "new_text": null,
          "old_line_content": "\tprintResults(&stats, pg_time_now() - bench_start, conn_total_duration,",
          "new_line_content": "\t/*",
          "content_same": false
        },
        {
          "line": 6547,
          "old_api": "THREAD_BARRIER_DESTROY",
          "new_api": null,
          "old_text": "THREAD_BARRIER_DESTROY(&barrier)",
          "new_text": null,
          "old_line_content": "\tTHREAD_BARRIER_DESTROY(&barrier);",
          "new_line_content": "\t * start and finish at the exact same time. The total duration computed",
          "content_same": false
        },
        {
          "line": 6550,
          "old_api": "pg_log_fatal",
          "new_api": null,
          "old_text": "pg_log_fatal(\"Run was aborted; the above results are incomplete.\")",
          "new_text": null,
          "old_line_content": "\t\tpg_log_fatal(\"Run was aborted; the above results are incomplete.\");",
          "new_line_content": "\t */",
          "content_same": false
        },
        {
          "line": 4503,
          "old_api": "PQexec",
          "new_api": null,
          "old_text": "PQexec(con, \"select count(*) from pgbench_branches\")",
          "new_text": null,
          "old_line_content": "\tres = PQexec(con, \"select count(*) from pgbench_branches\");",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 4504,
          "old_api": "PQresultStatus",
          "new_api": null,
          "old_text": "PQresultStatus(res)",
          "new_text": null,
          "old_line_content": "\tif (PQresultStatus(res) != PGRES_TUPLES_OK)",
          "new_line_content": "\tPGresult   *res;",
          "content_same": false
        },
        {
          "line": 4506,
          "old_api": "PQresultErrorField",
          "new_api": null,
          "old_text": "PQresultErrorField(res, PG_DIAG_SQLSTATE)",
          "new_text": null,
          "old_line_content": "\t\tchar\t   *sqlState = PQresultErrorField(res, PG_DIAG_SQLSTATE);",
          "new_line_content": "\t/*",
          "content_same": false
        },
        {
          "line": 4508,
          "old_api": "PQerrorMessage",
          "new_api": null,
          "old_text": "PQerrorMessage(con)",
          "new_text": null,
          "old_line_content": "\t\tpg_log_fatal(\"could not count number of branches: %s\", PQerrorMessage(con));",
          "new_line_content": "\t * pgbench_branches if this is not a custom query",
          "content_same": false
        },
        {
          "line": 4512,
          "old_api": "PQdb",
          "new_api": null,
          "old_text": "PQdb(con)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\tPQdb(con));",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 4514,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "\t\texit(1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6563,
          "old_api": "alloc_socket_set",
          "new_api": null,
          "old_text": "alloc_socket_set(nstate)",
          "new_text": null,
          "old_line_content": "\tsocket_set *sockets = alloc_socket_set(nstate);",
          "new_line_content": "threadRun(void *arg)",
          "content_same": false
        },
        {
          "line": 4516,
          "old_api": "PQgetvalue",
          "new_api": null,
          "old_text": "PQgetvalue(res, 0, 0)",
          "new_text": null,
          "old_line_content": "\tscale = atoi(PQgetvalue(res, 0, 0));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4520,
          "old_api": "PQgetvalue",
          "new_api": null,
          "old_text": "PQgetvalue(res, 0, 0)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t PQgetvalue(res, 0, 0));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6577,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(logpath, sizeof(logpath), \"%s.%d\", prefix, main_pid)",
          "new_text": null,
          "old_line_content": "\t\t\tsnprintf(logpath, sizeof(logpath), \"%s.%d\", prefix, main_pid);",
          "new_line_content": "\t/* open log file if requested */",
          "content_same": false
        },
        {
          "line": 6579,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(logpath, sizeof(logpath), \"%s.%d.%d\", prefix, main_pid, thread->tid)",
          "new_text": null,
          "old_line_content": "\t\t\tsnprintf(logpath, sizeof(logpath), \"%s.%d.%d\", prefix, main_pid, thread->tid);",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 6581,
          "old_api": "fopen",
          "new_api": null,
          "old_text": "fopen(logpath, \"w\")",
          "new_text": null,
          "old_line_content": "\t\tthread->logfile = fopen(logpath, \"w\");",
          "new_line_content": "\t\tchar\t   *prefix = logfile_prefix ? logfile_prefix : \"pgbench_log\";",
          "content_same": false
        },
        {
          "line": 6585,
          "old_api": "pg_log_fatal",
          "new_api": null,
          "old_text": "pg_log_fatal(\"could not open logfile \\\"%s\\\": %m\", logpath)",
          "new_text": null,
          "old_line_content": "\t\t\tpg_log_fatal(\"could not open logfile \\\"%s\\\": %m\", logpath);",
          "new_line_content": "\t\telse",
          "content_same": false
        },
        {
          "line": 4545,
          "old_api": "count",
          "new_api": null,
          "old_text": "PQexec(con,\n\t\t\t\t \"select o.n, p.partstrat, pg_catalog.count(i.inhparent) \"\n\t\t\t\t \"from pg_catalog.pg_class as c \"\n\t\t\t\t \"join pg_catalog.pg_namespace as n on (n.oid = c.relnamespace) \"\n\t\t\t\t \"cross join lateral (select pg_catalog.array_position(pg_catalog.current_schemas(true), n.nspname)) as o(n) \"\n\t\t\t\t \"left join pg_catalog.pg_partitioned_table as p on (p.partrelid = c.oid) \"\n\t\t\t\t \"left join pg_catalog.pg_inherits as i on (c.oid = i.inhparent) \"\n\t\t\t\t \"where c.relname = 'pgbench_accounts' and o.n is not null \"\n\t\t\t\t \"group by 1, 2 \"\n\t\t\t\t \"order by 1 asc \"\n\t\t\t\t \"limit 1\")",
          "new_text": null,
          "old_line_content": "\tres = PQexec(con,",
          "new_line_content": "\t *",
          "content_same": false
        },
        {
          "line": 6595,
          "old_api": "THREAD_BARRIER_WAIT",
          "new_api": null,
          "old_text": "THREAD_BARRIER_WAIT(&barrier)",
          "new_text": null,
          "old_line_content": "\tTHREAD_BARRIER_WAIT(&barrier);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 6597,
          "old_api": "pg_time_now",
          "new_api": null,
          "old_text": "pg_time_now()",
          "new_text": null,
          "old_line_content": "\tthread_start = pg_time_now();",
          "new_line_content": "\t/* explicitly initialize the state machines */",
          "content_same": false
        },
        {
          "line": 4557,
          "old_api": "PQresultStatus",
          "new_api": null,
          "old_text": "PQresultStatus(res)",
          "new_text": null,
          "old_line_content": "\tif (PQresultStatus(res) != PGRES_TUPLES_OK)",
          "new_line_content": "\t\t\t\t \"left join pg_catalog.pg_partitioned_table as p on (p.partrelid = c.oid) \"",
          "content_same": false
        },
        {
          "line": 6608,
          "old_api": "doConnect",
          "new_api": null,
          "old_text": "doConnect()",
          "new_text": null,
          "old_line_content": "\t\t\tif ((state[i].con = doConnect()) == NULL)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4563,
          "old_api": "PQntuples",
          "new_api": null,
          "old_text": "PQntuples(res)",
          "new_text": null,
          "old_line_content": "\telse if (PQntuples(res) == 0)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4569,
          "old_api": "pg_log_fatal",
          "new_api": null,
          "old_text": "pg_log_fatal(\"no pgbench_accounts table found in search_path\")",
          "new_text": null,
          "old_line_content": "\t\tpg_log_fatal(\"no pgbench_accounts table found in search_path\");",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 6618,
          "old_api": "THREAD_BARRIER_WAIT",
          "new_api": null,
          "old_text": "THREAD_BARRIER_WAIT(&barrier)",
          "new_text": null,
          "old_line_content": "\t\t\t\tTHREAD_BARRIER_WAIT(&barrier);",
          "new_line_content": "\t\t\t\t * On connection failure, we meet the barrier here in place of",
          "content_same": false
        },
        {
          "line": 4571,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "\t\texit(1);",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 6624,
          "old_api": "pg_time_now",
          "new_api": null,
          "old_text": "pg_time_now()",
          "new_text": null,
          "old_line_content": "\t\tthread->conn_duration = pg_time_now() - thread->started_time;",
          "new_line_content": "\t\t\t\t */",
          "content_same": false
        },
        {
          "line": 4580,
          "old_api": "PQgetvalue",
          "new_api": null,
          "old_text": "PQgetvalue(res, 0, 1)",
          "new_text": null,
          "old_line_content": "\t\t\tchar\t   *ps = PQgetvalue(res, 0, 1);",
          "new_line_content": "\telse\t\t\t\t\t\t/* PQntupes(res) == 1 */",
          "content_same": false
        },
        {
          "line": 4585,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(ps, \"r\")",
          "new_text": null,
          "old_line_content": "\t\t\tif (strcmp(ps, \"r\") == 0)",
          "new_line_content": "\t\telse",
          "content_same": false
        },
        {
          "line": 6633,
          "old_api": "THREAD_BARRIER_WAIT",
          "new_api": null,
          "old_text": "THREAD_BARRIER_WAIT(&barrier)",
          "new_text": null,
          "old_line_content": "\tTHREAD_BARRIER_WAIT(&barrier);",
          "new_line_content": "\telse",
          "content_same": false
        },
        {
          "line": 6635,
          "old_api": "pg_time_now",
          "new_api": null,
          "old_text": "pg_time_now()",
          "new_text": null,
          "old_line_content": "\tstart = pg_time_now();",
          "new_line_content": "\t\t/* no connection delay to record */",
          "content_same": false
        },
        {
          "line": 4593,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "\t\t\t\texit(1);",
          "new_line_content": "\t\t\t\tpartition_method = PART_RANGE;",
          "content_same": false
        },
        {
          "line": 4597,
          "old_api": "PQgetvalue",
          "new_api": null,
          "old_text": "PQgetvalue(res, 0, 2)",
          "new_text": null,
          "old_line_content": "\t\tpartitions = atoi(PQgetvalue(res, 0, 2));",
          "new_line_content": "\t\t\t{",
          "content_same": false
        },
        {
          "line": 6646,
          "old_api": "initStats",
          "new_api": null,
          "old_text": "initStats(&aggs, (start + epoch_shift) / 1000000 * 1000000)",
          "new_text": null,
          "old_line_content": "\tinitStats(&aggs, (start + epoch_shift) / 1000000 * 1000000);",
          "new_line_content": "\t/*",
          "content_same": false
        },
        {
          "line": 6660,
          "old_api": "clear_socket_set",
          "new_api": null,
          "old_text": "clear_socket_set(sockets)",
          "new_text": null,
          "old_line_content": "\t\tclear_socket_set(sockets);",
          "new_line_content": "\t\tpg_time_usec_t min_usec;",
          "content_same": false
        },
        {
          "line": 4615,
          "old_api": "pg_strdup",
          "new_api": null,
          "old_text": "pg_strdup(cmd->lines.data)",
          "new_text": null,
          "old_line_content": "\tp = sql = pg_strdup(cmd->lines.data);",
          "new_line_content": "parseQuery(Command *cmd)",
          "content_same": false
        },
        {
          "line": 4616,
          "old_api": "strchr",
          "new_api": null,
          "old_text": "strchr(p, ':')",
          "new_text": null,
          "old_line_content": "\twhile ((p = strchr(p, ':')) != NULL)",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 6673,
          "old_api": "pg_time_now_lazy",
          "new_api": null,
          "old_text": "pg_time_now_lazy(&now)",
          "new_text": null,
          "old_line_content": "\t\t\t\tpg_time_now_lazy(&now);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4638,
          "old_api": "pg_log_error",
          "new_api": null,
          "old_text": "pg_log_error(\"statement has too many arguments (maximum is %d): %s\",\n\t\t\t\t\t\t MAX_ARGS - 1, cmd->lines.data)",
          "new_text": null,
          "old_line_content": "\t\t\tpg_log_error(\"statement has too many arguments (maximum is %d): %s\",",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6687,
          "old_api": "PQsocket",
          "new_api": null,
          "old_text": "PQsocket(st->con)",
          "new_text": null,
          "old_line_content": "\t\t\t\tint\t\t\tsock = PQsocket(st->con);",
          "new_line_content": "\t\t\t}",
          "content_same": false
        },
        {
          "line": 4640,
          "old_api": "pg_free",
          "new_api": null,
          "old_text": "pg_free(name)",
          "new_text": null,
          "old_line_content": "\t\t\tpg_free(name);",
          "new_line_content": "\t\t * cmd->argv[0] is the SQL statement itself, so the max number of",
          "content_same": false
        },
        {
          "line": 6691,
          "old_api": "PQerrorMessage",
          "new_api": null,
          "old_text": "PQerrorMessage(st->con)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tpg_log_error(\"invalid socket: %s\", PQerrorMessage(st->con));",
          "new_line_content": "\t\t\t\t * waiting for result from server - nothing to do unless the",
          "content_same": false
        },
        {
          "line": 4644,
          "old_api": "sprintf",
          "new_api": null,
          "old_text": "sprintf(var, \"$%d\", cmd->argc)",
          "new_text": null,
          "old_line_content": "\t\tsprintf(var, \"$%d\", cmd->argc);",
          "new_line_content": "\t\t{",
          "content_same": false
        },
        {
          "line": 6695,
          "old_api": "add_socket_to_set",
          "new_api": null,
          "old_text": "add_socket_to_set(sockets, sock, nsocks++)",
          "new_text": null,
          "old_line_content": "\t\t\t\tadd_socket_to_set(sockets, sock, nsocks++);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6712,
          "old_api": "pg_time_now_lazy",
          "new_api": null,
          "old_text": "pg_time_now_lazy(&now)",
          "new_text": null,
          "old_line_content": "\t\t\tpg_time_now_lazy(&now);",
          "new_line_content": "\t\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 4675,
          "old_api": "initPQExpBuffer",
          "new_api": null,
          "old_text": "initPQExpBuffer(&buf)",
          "new_text": null,
          "old_line_content": "\tinitPQExpBuffer(&buf);",
          "new_line_content": "void",
          "content_same": false
        },
        {
          "line": 4677,
          "old_api": "printfPQExpBuffer",
          "new_api": null,
          "old_text": "printfPQExpBuffer(&buf, \"%s:%d: %s\", source, lineno, msg)",
          "new_text": null,
          "old_line_content": "\tprintfPQExpBuffer(&buf, \"%s:%d: %s\", source, lineno, msg);",
          "new_line_content": "\t\t\t const char *line, const char *command,",
          "content_same": false
        },
        {
          "line": 4679,
          "old_api": "appendPQExpBuffer",
          "new_api": null,
          "old_text": "appendPQExpBuffer(&buf, \" (%s)\", more)",
          "new_text": null,
          "old_line_content": "\t\tappendPQExpBuffer(&buf, \" (%s)\", more);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 4681,
          "old_api": "appendPQExpBuffer",
          "new_api": null,
          "old_text": "appendPQExpBuffer(&buf, \" at column %d\", column + 1)",
          "new_text": null,
          "old_line_content": "\t\tappendPQExpBuffer(&buf, \" at column %d\", column + 1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4683,
          "old_api": "appendPQExpBuffer",
          "new_api": null,
          "old_text": "appendPQExpBuffer(&buf, \" in command \\\"%s\\\"\", command)",
          "new_text": null,
          "old_line_content": "\t\tappendPQExpBuffer(&buf, \" in command \\\"%s\\\"\", command);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6732,
          "old_api": "wait_on_socket_set",
          "new_api": null,
          "old_text": "wait_on_socket_set(sockets, min_usec)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\trc = wait_on_socket_set(sockets, min_usec);",
          "new_line_content": "\t\t{",
          "content_same": false
        },
        {
          "line": 4685,
          "old_api": "pg_log_fatal",
          "new_api": null,
          "old_text": "pg_log_fatal(\"%s\", buf.data)",
          "new_text": null,
          "old_line_content": "\tpg_log_fatal(\"%s\", buf.data);",
          "new_line_content": "\tif (more != NULL)",
          "content_same": false
        },
        {
          "line": 4687,
          "old_api": "termPQExpBuffer",
          "new_api": null,
          "old_text": "termPQExpBuffer(&buf)",
          "new_text": null,
          "old_line_content": "\ttermPQExpBuffer(&buf);",
          "new_line_content": "\tif (column >= 0 && line == NULL)",
          "content_same": false
        },
        {
          "line": 6736,
          "old_api": "pg_usleep",
          "new_api": null,
          "old_text": "pg_usleep(min_usec)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tpg_usleep(min_usec);",
          "new_line_content": "\t\t\t{",
          "content_same": false
        },
        {
          "line": 4691,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr, \"%s\\n\", line)",
          "new_text": null,
          "old_line_content": "\t\tfprintf(stderr, \"%s\\n\", line);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4693,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr, \"%*c error found here\\n\", column + 1, '^')",
          "new_text": null,
          "old_line_content": "\t\t\tfprintf(stderr, \"%*c error found here\\n\", column + 1, '^');",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6741,
          "old_api": "wait_on_socket_set",
          "new_api": null,
          "old_text": "wait_on_socket_set(sockets, 0)",
          "new_text": null,
          "old_line_content": "\t\t\t\trc = wait_on_socket_set(sockets, 0);",
          "new_line_content": "\t\t\t\telse\t\t\t/* nothing active, simple sleep */",
          "content_same": false
        },
        {
          "line": 4696,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "\texit(1);",
          "new_line_content": "\tif (line != NULL)",
          "content_same": false
        },
        {
          "line": 6752,
          "old_api": "pg_log_fatal",
          "new_api": null,
          "old_text": "pg_log_fatal(\"%s() failed: %m\", SOCKET_WAIT_METHOD)",
          "new_text": null,
          "old_line_content": "\t\t\t\tpg_log_fatal(\"%s() failed: %m\", SOCKET_WAIT_METHOD);",
          "new_line_content": "\t\t\t{",
          "content_same": false
        },
        {
          "line": 4712,
          "old_api": "isspace",
          "new_api": null,
          "old_text": "isspace((unsigned char) *p)",
          "new_text": null,
          "old_line_content": "\t\tif (isspace((unsigned char) *p))",
          "new_line_content": "skip_sql_comments(char *sql_command)",
          "content_same": false
        },
        {
          "line": 6761,
          "old_api": "clear_socket_set",
          "new_api": null,
          "old_text": "clear_socket_set(sockets)",
          "new_text": null,
          "old_line_content": "\t\t\tclear_socket_set(sockets);",
          "new_line_content": "\t\t\t}",
          "content_same": false
        },
        {
          "line": 4714,
          "old_api": "strncmp",
          "new_api": null,
          "old_text": "strncmp(p, \"--\", 2)",
          "new_text": null,
          "old_line_content": "\t\telse if (strncmp(p, \"--\", 2) == 0)",
          "new_line_content": "\tchar\t   *p = sql_command;",
          "content_same": false
        },
        {
          "line": 4716,
          "old_api": "strchr",
          "new_api": null,
          "old_text": "strchr(p, '\\n')",
          "new_text": null,
          "old_line_content": "\t\t\tp = strchr(p, '\\n');",
          "new_line_content": "\t/* Skip any leading whitespace, as well as \"--\" style comments */",
          "content_same": false
        },
        {
          "line": 6773,
          "old_api": "PQsocket",
          "new_api": null,
          "old_text": "PQsocket(st->con)",
          "new_text": null,
          "old_line_content": "\t\t\t\tint\t\t\tsock = PQsocket(st->con);",
          "new_line_content": "\t\tfor (int i = 0; i < nstate; i++)",
          "content_same": false
        },
        {
          "line": 6777,
          "old_api": "PQerrorMessage",
          "new_api": null,
          "old_text": "PQerrorMessage(st->con)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tpg_log_error(\"invalid socket: %s\", PQerrorMessage(st->con));",
          "new_line_content": "\t\t\tif (st->state == CSTATE_WAIT_RESULT)",
          "content_same": false
        },
        {
          "line": 6781,
          "old_api": "socket_has_input",
          "new_api": null,
          "old_text": "socket_has_input(sockets, sock, nsocks++)",
          "new_text": null,
          "old_line_content": "\t\t\t\tif (!socket_has_input(sockets, sock, nsocks++))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4743,
          "old_api": "skip_sql_comments",
          "new_api": null,
          "old_text": "skip_sql_comments(buf->data)",
          "new_text": null,
          "old_line_content": "\tchar\t   *p = skip_sql_comments(buf->data);",
          "new_line_content": " * really need to do much here except check for comments and set up a Command",
          "content_same": false
        },
        {
          "line": 6791,
          "old_api": "advanceConnectionState",
          "new_api": null,
          "old_text": "advanceConnectionState(thread, st, &aggs)",
          "new_text": null,
          "old_line_content": "\t\t\tadvanceConnectionState(thread, st, &aggs);",
          "new_line_content": "\t\t\telse if (st->state == CSTATE_FINISHED ||",
          "content_same": false
        },
        {
          "line": 4749,
          "old_api": "pg_malloc",
          "new_api": null,
          "old_text": "pg_malloc(sizeof(Command))",
          "new_text": null,
          "old_line_content": "\tmy_command = (Command *) pg_malloc(sizeof(Command));",
          "new_line_content": "\tCommand    *my_command;",
          "content_same": false
        },
        {
          "line": 4751,
          "old_api": "appendPQExpBufferStr",
          "new_api": null,
          "old_text": "appendPQExpBufferStr(&my_command->lines, p)",
          "new_text": null,
          "old_line_content": "\tappendPQExpBufferStr(&my_command->lines, p);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6804,
          "old_api": "pg_time_now",
          "new_api": null,
          "old_text": "pg_time_now()",
          "new_text": null,
          "old_line_content": "\t\t\tpg_time_usec_t now = pg_time_now();",
          "new_line_content": "\t\t\tif (st->state == CSTATE_FINISHED || st->state == CSTATE_ABORTED)",
          "content_same": false
        },
        {
          "line": 4759,
          "old_api": "initSimpleStats",
          "new_api": null,
          "old_text": "initSimpleStats(&my_command->stats)",
          "new_text": null,
          "old_line_content": "\tinitSimpleStats(&my_command->stats);",
          "new_line_content": "\tmy_command->first_line = NULL;\t/* this is set later */",
          "content_same": false
        },
        {
          "line": 6814,
          "old_api": "printProgressReport",
          "new_api": null,
          "old_text": "printProgressReport(thread, thread_start, now,\n\t\t\t\t\t\t\t\t\t&last, &last_report)",
          "new_text": null,
          "old_line_content": "\t\t\t\tprintProgressReport(thread, thread_start, now,",
          "new_line_content": "\t\t\t{",
          "content_same": false
        },
        {
          "line": 4768,
          "old_api": "termPQExpBuffer",
          "new_api": null,
          "old_text": "termPQExpBuffer(&command->lines)",
          "new_text": null,
          "old_line_content": "\ttermPQExpBuffer(&command->lines);",
          "new_line_content": "\treturn my_command;",
          "content_same": false
        },
        {
          "line": 4770,
          "old_api": "pg_free",
          "new_api": null,
          "old_text": "pg_free(command->first_line)",
          "new_text": null,
          "old_line_content": "\t\tpg_free(command->first_line);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4772,
          "old_api": "pg_free",
          "new_api": null,
          "old_text": "pg_free(command->argv[i])",
          "new_text": null,
          "old_line_content": "\t\tpg_free(command->argv[i]);",
          "new_line_content": "static void",
          "content_same": false
        },
        {
          "line": 4774,
          "old_api": "pg_free",
          "new_api": null,
          "old_text": "pg_free(command->varprefix)",
          "new_text": null,
          "old_line_content": "\t\tpg_free(command->varprefix);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 4780,
          "old_api": "pg_free",
          "new_api": null,
          "old_text": "pg_free(command)",
          "new_text": null,
          "old_line_content": "\tpg_free(command);",
          "new_line_content": "\tif (command->varprefix)",
          "content_same": false
        },
        {
          "line": 6830,
          "old_api": "pg_time_now",
          "new_api": null,
          "old_text": "pg_time_now()",
          "new_text": null,
          "old_line_content": "\tstart = pg_time_now();",
          "new_line_content": "\t\t\t\t\tnext_report += (int64) 1000000 * progress;",
          "content_same": false
        },
        {
          "line": 6831,
          "old_api": "disconnect_all",
          "new_api": null,
          "old_text": "disconnect_all(state, nstate)",
          "new_text": null,
          "old_line_content": "\tdisconnect_all(state, nstate);",
          "new_line_content": "\t\t\t\t} while (now >= next_report);",
          "content_same": false
        },
        {
          "line": 6832,
          "old_api": "pg_time_now",
          "new_api": null,
          "old_text": "pg_time_now()",
          "new_text": null,
          "old_line_content": "\tthread->conn_duration += pg_time_now() - start;",
          "new_line_content": "\t\t\t}",
          "content_same": false
        },
        {
          "line": 4792,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(my_command->type == SQL_COMMAND)",
          "new_text": null,
          "old_line_content": "\tAssert(my_command->type == SQL_COMMAND);",
          "new_line_content": " * parts, complete other fields of the Command structure.",
          "content_same": false
        },
        {
          "line": 6841,
          "old_api": "fclose",
          "new_api": null,
          "old_text": "fclose(thread->logfile)",
          "new_text": null,
          "old_line_content": "\t\tfclose(thread->logfile);",
          "new_line_content": "\tif (thread->logfile)",
          "content_same": false
        },
        {
          "line": 4795,
          "old_api": "strlcpy",
          "new_api": null,
          "old_text": "strlcpy(buffer, my_command->lines.data, sizeof(buffer))",
          "new_text": null,
          "old_line_content": "\tstrlcpy(buffer, my_command->lines.data, sizeof(buffer));",
          "new_line_content": "postprocess_sql_command(Command *my_command)",
          "content_same": false
        },
        {
          "line": 4796,
          "old_api": "strcspn",
          "new_api": null,
          "old_text": "strcspn(buffer, \"\\n\\r\")",
          "new_text": null,
          "old_line_content": "\tbuffer[strcspn(buffer, \"\\n\\r\")] = '\\0';",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 4797,
          "old_api": "pg_strdup",
          "new_api": null,
          "old_text": "pg_strdup(buffer)",
          "new_text": null,
          "old_line_content": "\tmy_command->first_line = pg_strdup(buffer);",
          "new_line_content": "\tchar\t\tbuffer[128];",
          "content_same": false
        },
        {
          "line": 6844,
          "old_api": "free_socket_set",
          "new_api": null,
          "old_text": "free_socket_set(sockets)",
          "new_text": null,
          "old_line_content": "\tfree_socket_set(sockets);",
          "new_line_content": "\t\t{",
          "content_same": false
        },
        {
          "line": 6853,
          "old_api": "PQfinish",
          "new_api": null,
          "old_text": "PQfinish(st->con)",
          "new_text": null,
          "old_line_content": "\t\tPQfinish(st->con);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4808,
          "old_api": "parseQuery",
          "new_api": null,
          "old_text": "parseQuery(my_command)",
          "new_text": null,
          "old_line_content": "\t\t\tif (!parseQuery(my_command))",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 4809,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "\t\t\t\texit(1);",
          "new_line_content": "\t\tcase QUERY_SIMPLE:",
          "content_same": false
        },
        {
          "line": 4812,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "\t\t\texit(1);",
          "new_line_content": "\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 6873,
          "old_api": "pqsignal",
          "new_api": null,
          "old_text": "pqsignal(SIGALRM, handle_sig_alarm)",
          "new_text": null,
          "old_line_content": "\tpqsignal(SIGALRM, handle_sig_alarm);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 6874,
          "old_api": "alarm",
          "new_api": null,
          "old_text": "alarm(seconds)",
          "new_text": null,
          "old_line_content": "\talarm(seconds);",
          "new_line_content": "\ttimer_exceeded = true;",
          "content_same": false
        },
        {
          "line": 4832,
          "old_api": "initPQExpBuffer",
          "new_api": null,
          "old_text": "initPQExpBuffer(&word_buf)",
          "new_text": null,
          "old_line_content": "\tinitPQExpBuffer(&word_buf);",
          "new_line_content": "\tPQExpBufferData word_buf;",
          "content_same": false
        },
        {
          "line": 4835,
          "old_api": "expr_scanner_offset",
          "new_api": null,
          "old_text": "expr_scanner_offset(sstate)",
          "new_text": null,
          "old_line_content": "\tstart_offset = expr_scanner_offset(sstate) - 1;",
          "new_line_content": "\tint\t\t\tstart_offset;",
          "content_same": false
        },
        {
          "line": 4836,
          "old_api": "expr_scanner_get_lineno",
          "new_api": null,
          "old_text": "expr_scanner_get_lineno(sstate, start_offset)",
          "new_text": null,
          "old_line_content": "\tlineno = expr_scanner_get_lineno(sstate, start_offset);",
          "new_line_content": "\tint\t\t\tlineno;",
          "content_same": false
        },
        {
          "line": 4841,
          "old_api": "termPQExpBuffer",
          "new_api": null,
          "old_text": "termPQExpBuffer(&word_buf)",
          "new_text": null,
          "old_line_content": "\t\ttermPQExpBuffer(&word_buf);",
          "new_line_content": "\t/* Remember location of the backslash */",
          "content_same": false
        },
        {
          "line": 6892,
          "old_api": "CreateTimerQueue",
          "new_api": null,
          "old_text": "CreateTimerQueue()",
          "new_text": null,
          "old_line_content": "\tqueue = CreateTimerQueue();",
          "new_line_content": "static void",
          "content_same": false
        },
        {
          "line": 6894,
          "old_api": "CreateTimerQueueTimer",
          "new_api": null,
          "old_text": "CreateTimerQueueTimer(&timer, queue,\n\t\t\t\t\t\t\t   win32_timer_callback, NULL, seconds * 1000, 0,\n\t\t\t\t\t\t\t   WT_EXECUTEINTIMERTHREAD | WT_EXECUTEONLYONCE)",
          "new_text": null,
          "old_line_content": "\t\t!CreateTimerQueueTimer(&timer, queue,",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 4849,
          "old_api": "initSimpleStats",
          "new_api": null,
          "old_text": "initSimpleStats(&my_command->stats)",
          "new_text": null,
          "old_line_content": "\tinitSimpleStats(&my_command->stats);",
          "new_line_content": "\t\treturn NULL;",
          "content_same": false
        },
        {
          "line": 6898,
          "old_api": "pg_log_fatal",
          "new_api": null,
          "old_text": "pg_log_fatal(\"failed to set timer\")",
          "new_text": null,
          "old_line_content": "\t\tpg_log_fatal(\"failed to set timer\");",
          "new_line_content": "\t/* This function will be called at most once, so we can cheat a bit. */",
          "content_same": false
        },
        {
          "line": 4854,
          "old_api": "pg_strdup",
          "new_api": null,
          "old_text": "pg_strdup(word_buf.data)",
          "new_text": null,
          "old_line_content": "\tmy_command->argv[j++] = pg_strdup(word_buf.data);",
          "new_line_content": "\tmy_command->type = META_COMMAND;",
          "content_same": false
        },
        {
          "line": 4858,
          "old_api": "getMetaCommand",
          "new_api": null,
          "old_text": "getMetaCommand(my_command->argv[0])",
          "new_text": null,
          "old_line_content": "\tmy_command->meta = getMetaCommand(my_command->argv[0]);",
          "new_line_content": "\t/* Save first word (command name) */",
          "content_same": false
        },
        {
          "line": 4869,
          "old_api": "expr_lex_one_word",
          "new_api": null,
          "old_text": "expr_lex_one_word(sstate, &word_buf, &word_offset)",
          "new_text": null,
          "old_line_content": "\t\t\tif (!expr_lex_one_word(sstate, &word_buf, &word_offset))",
          "new_line_content": "\t\tmy_command->meta == META_ELIF)",
          "content_same": false
        },
        {
          "line": 4870,
          "old_api": "syntax_error",
          "new_api": null,
          "old_text": "syntax_error(source, lineno, my_command->first_line, my_command->argv[0],\n\t\t\t\t\t\t\t \"missing argument\", NULL, -1)",
          "new_text": null,
          "old_line_content": "\t\t\t\tsyntax_error(source, lineno, my_command->first_line, my_command->argv[0],",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 4874,
          "old_api": "pg_strdup",
          "new_api": null,
          "old_text": "pg_strdup(word_buf.data)",
          "new_text": null,
          "old_line_content": "\t\t\tmy_command->argv[j++] = pg_strdup(word_buf.data);",
          "new_line_content": "\t\tif (my_command->meta == META_SET)",
          "content_same": false
        },
        {
          "line": 4879,
          "old_api": "expr_scanner_init",
          "new_api": null,
          "old_text": "expr_scanner_init(sstate, source, lineno, start_offset,\n\t\t\t\t\t\t\t\t\t  my_command->argv[0])",
          "new_text": null,
          "old_line_content": "\t\tyyscanner = expr_scanner_init(sstate, source, lineno, start_offset,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4882,
          "old_api": "expr_yyparse",
          "new_api": null,
          "old_text": "expr_yyparse(yyscanner)",
          "new_text": null,
          "old_line_content": "\t\tif (expr_yyparse(yyscanner) != 0)",
          "new_line_content": "\t\t\tmy_command->argc++;",
          "content_same": false
        },
        {
          "line": 4885,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "\t\t\texit(1);",
          "new_line_content": "\t\t/* then for all parse the expression */",
          "content_same": false
        },
        {
          "line": 4894,
          "old_api": "expr_scanner_offset",
          "new_api": null,
          "old_text": "expr_scanner_offset(sstate)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\t\t\t   expr_scanner_offset(sstate),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4897,
          "old_api": "expr_scanner_finish",
          "new_api": null,
          "old_text": "expr_scanner_finish(yyscanner)",
          "new_text": null,
          "old_line_content": "\t\texpr_scanner_finish(yyscanner);",
          "new_line_content": "\t\t/* Save line, trimming any trailing newline */",
          "content_same": false
        },
        {
          "line": 6948,
          "old_api": "offsetof",
          "new_api": null,
          "old_text": "offsetof(socket_set, pollfds)",
          "new_text": null,
          "old_line_content": "\tsa = (socket_set *) pg_malloc0(offsetof(socket_set, pollfds) +",
          "new_line_content": "#ifdef POLL_USING_PPOLL",
          "content_same": false
        },
        {
          "line": 4905,
          "old_api": "expr_lex_one_word",
          "new_api": null,
          "old_text": "expr_lex_one_word(sstate, &word_buf, &word_offset)",
          "new_text": null,
          "old_line_content": "\twhile (expr_lex_one_word(sstate, &word_buf, &word_offset))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6958,
          "old_api": "pg_free",
          "new_api": null,
          "old_text": "pg_free(sa)",
          "new_text": null,
          "old_line_content": "\tpg_free(sa);",
          "new_line_content": "\tsa->curfds = 0;",
          "content_same": false
        },
        {
          "line": 4916,
          "old_api": "pg_strdup",
          "new_api": null,
          "old_text": "pg_strdup(word_buf.data)",
          "new_text": null,
          "old_line_content": "\t\tmy_command->argv[j++] = pg_strdup(word_buf.data);",
          "new_line_content": "\t\t * arguments is one less than MAX_ARGS",
          "content_same": false
        },
        {
          "line": 4922,
          "old_api": "expr_scanner_get_substring",
          "new_api": null,
          "old_text": "expr_scanner_get_substring(sstate,\n\t\t\t\t\t\t\t\t   start_offset,\n\t\t\t\t\t\t\t\t   expr_scanner_offset(sstate),\n\t\t\t\t\t\t\t\t   true)",
          "new_text": null,
          "old_line_content": "\t\texpr_scanner_get_substring(sstate,",
          "new_line_content": "\t\toffsets[j] = word_offset;",
          "content_same": false
        },
        {
          "line": 6970,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(idx < sa->maxfds && idx == sa->curfds)",
          "new_text": null,
          "old_line_content": "\tAssert(idx < sa->maxfds && idx == sa->curfds);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 4924,
          "old_api": "expr_scanner_offset",
          "new_api": null,
          "old_text": "expr_scanner_offset(sstate)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\t\t   expr_scanner_offset(sstate),",
          "new_line_content": "\t\tmy_command->argc++;",
          "content_same": false
        },
        {
          "line": 4930,
          "old_api": "syntax_error",
          "new_api": null,
          "old_text": "syntax_error(source, lineno, my_command->first_line, my_command->argv[0],\n\t\t\t\t\t\t \"missing argument\", NULL, -1)",
          "new_text": null,
          "old_line_content": "\t\t\tsyntax_error(source, lineno, my_command->first_line, my_command->argv[0],",
          "new_line_content": "\t\t\t\t\t\t\t\t   start_offset,",
          "content_same": false
        },
        {
          "line": 4934,
          "old_api": "syntax_error",
          "new_api": null,
          "old_text": "syntax_error(source, lineno, my_command->first_line, my_command->argv[0],\n\t\t\t\t\t\t \"too many arguments\", NULL,\n\t\t\t\t\t\t offsets[3] - start_offset)",
          "new_text": null,
          "old_line_content": "\t\t\tsyntax_error(source, lineno, my_command->first_line, my_command->argv[0],",
          "new_line_content": "\tif (my_command->meta == META_SLEEP)",
          "content_same": false
        },
        {
          "line": 6986,
          "old_api": "ppoll",
          "new_api": null,
          "old_text": "ppoll(sa->pollfds, sa->curfds, &timeout, NULL)",
          "new_text": null,
          "old_line_content": "\t\treturn ppoll(sa->pollfds, sa->curfds, &timeout, NULL);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 6990,
          "old_api": "ppoll",
          "new_api": null,
          "old_text": "ppoll(sa->pollfds, sa->curfds, NULL, NULL)",
          "new_text": null,
          "old_line_content": "\t\treturn ppoll(sa->pollfds, sa->curfds, NULL, NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4954,
          "old_api": "isdigit",
          "new_api": null,
          "old_text": "isdigit((unsigned char) *c)",
          "new_text": null,
          "old_line_content": "\t\t\tif (*c && isdigit((unsigned char) *c))",
          "new_line_content": "\t\t\tbool\t\thave_digit = false;",
          "content_same": false
        },
        {
          "line": 4958,
          "old_api": "isdigit",
          "new_api": null,
          "old_text": "isdigit((unsigned char) *c)",
          "new_text": null,
          "old_line_content": "\t\t\twhile (*c && isdigit((unsigned char) *c))",
          "new_line_content": "\t\t\t\tc++;",
          "content_same": false
        },
        {
          "line": 7008,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(idx < sa->curfds && sa->pollfds[idx].fd == fd)",
          "new_text": null,
          "old_line_content": "\tAssert(idx < sa->curfds && sa->pollfds[idx].fd == fd);",
          "new_line_content": "\t * early.  Hence, if the socket set is empty, silently return false",
          "content_same": false
        },
        {
          "line": 7019,
          "old_api": "pg_malloc0",
          "new_api": null,
          "old_text": "pg_malloc0(sizeof(socket_set))",
          "new_text": null,
          "old_line_content": "\treturn (socket_set *) pg_malloc0(sizeof(socket_set));",
          "new_line_content": "#endif\t\t\t\t\t\t\t/* POLL_USING_PPOLL */",
          "content_same": false
        },
        {
          "line": 4975,
          "old_api": "syntax_error",
          "new_api": null,
          "old_text": "syntax_error(source, lineno, my_command->first_line, my_command->argv[0],\n\t\t\t\t\t\t\t\t \"invalid sleep time, must be an integer\",\n\t\t\t\t\t\t\t\t my_command->argv[1], offsets[1] - start_offset)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tsyntax_error(source, lineno, my_command->first_line, my_command->argv[0],",
          "new_line_content": "\t\t\t\t}",
          "content_same": false
        },
        {
          "line": 7025,
          "old_api": "pg_free",
          "new_api": null,
          "old_text": "pg_free(sa)",
          "new_text": null,
          "old_line_content": "\tpg_free(sa);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 7031,
          "old_api": "FD_ZERO",
          "new_api": null,
          "old_text": "FD_ZERO(&sa->fds)",
          "new_text": null,
          "old_line_content": "\tFD_ZERO(&sa->fds);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 4984,
          "old_api": "pg_strcasecmp",
          "new_api": null,
          "old_text": "pg_strcasecmp(my_command->argv[2], \"us\")",
          "new_text": null,
          "old_line_content": "\t\t\tif (pg_strcasecmp(my_command->argv[2], \"us\") != 0 &&",
          "new_line_content": "\t\t\t\t\t\t\t\t my_command->argv[1], offsets[1] - start_offset);",
          "content_same": false
        },
        {
          "line": 4985,
          "old_api": "pg_strcasecmp",
          "new_api": null,
          "old_text": "pg_strcasecmp(my_command->argv[2], \"ms\")",
          "new_text": null,
          "old_line_content": "\t\t\t\tpg_strcasecmp(my_command->argv[2], \"ms\") != 0 &&",
          "new_line_content": "\t\t\t\t}",
          "content_same": false
        },
        {
          "line": 4986,
          "old_api": "pg_strcasecmp",
          "new_api": null,
          "old_text": "pg_strcasecmp(my_command->argv[2], \"s\")",
          "new_text": null,
          "old_line_content": "\t\t\t\tpg_strcasecmp(my_command->argv[2], \"s\") != 0)",
          "new_line_content": "\t\t\t}",
          "content_same": false
        },
        {
          "line": 4987,
          "old_api": "syntax_error",
          "new_api": null,
          "old_text": "syntax_error(source, lineno, my_command->first_line, my_command->argv[0],\n\t\t\t\t\t\t\t \"unrecognized time unit, must be us, ms or s\",\n\t\t\t\t\t\t\t my_command->argv[2], offsets[2] - start_offset)",
          "new_text": null,
          "old_line_content": "\t\t\t\tsyntax_error(source, lineno, my_command->first_line, my_command->argv[0],",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 4995,
          "old_api": "syntax_error",
          "new_api": null,
          "old_text": "syntax_error(source, lineno, my_command->first_line, my_command->argv[0],\n\t\t\t\t\t\t \"missing argument\", NULL, -1)",
          "new_text": null,
          "old_line_content": "\t\t\tsyntax_error(source, lineno, my_command->first_line, my_command->argv[0],",
          "new_line_content": "\t\t\t\t\t\t\t \"unrecognized time unit, must be us, ms or s\",",
          "content_same": false
        },
        {
          "line": 7044,
          "old_api": "pg_log_fatal",
          "new_api": null,
          "old_text": "pg_log_fatal(\"too many client connections for select()\")",
          "new_text": null,
          "old_line_content": "\t\tpg_log_fatal(\"too many client connections for select()\");",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 7045,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "\t\texit(1);",
          "new_line_content": "\tif (fd < 0 || fd >= FD_SETSIZE)",
          "content_same": false
        },
        {
          "line": 7047,
          "old_api": "FD_SET",
          "new_api": null,
          "old_text": "FD_SET(fd, &sa->fds)",
          "new_text": null,
          "old_line_content": "\tFD_SET(fd, &sa->fds);",
          "new_line_content": "\t\t/*",
          "content_same": false
        },
        {
          "line": 5001,
          "old_api": "syntax_error",
          "new_api": null,
          "old_text": "syntax_error(source, lineno, my_command->first_line, my_command->argv[0],\n\t\t\t\t\t\t \"missing command\", NULL, -1)",
          "new_text": null,
          "old_line_content": "\t\t\tsyntax_error(source, lineno, my_command->first_line, my_command->argv[0],",
          "new_line_content": "\t\tif (my_command->argc < 3)",
          "content_same": false
        },
        {
          "line": 5009,
          "old_api": "syntax_error",
          "new_api": null,
          "old_text": "syntax_error(source, lineno, my_command->first_line, my_command->argv[0],\n\t\t\t\t\t\t \"unexpected argument\", NULL, -1)",
          "new_text": null,
          "old_line_content": "\t\t\tsyntax_error(source, lineno, my_command->first_line, my_command->argv[0],",
          "new_line_content": "\t\t\t\t\t\t \"missing command\", NULL, -1);",
          "content_same": false
        },
        {
          "line": 7061,
          "old_api": "select",
          "new_api": null,
          "old_text": "select(sa->maxfd + 1, &sa->fds, NULL, NULL, &timeout)",
          "new_text": null,
          "old_line_content": "\t\treturn select(sa->maxfd + 1, &sa->fds, NULL, NULL, &timeout);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 5015,
          "old_api": "syntax_error",
          "new_api": null,
          "old_text": "syntax_error(source, lineno, my_command->first_line, my_command->argv[0],\n\t\t\t\t\t\t \"too many arguments\", NULL, -1)",
          "new_text": null,
          "old_line_content": "\t\t\tsyntax_error(source, lineno, my_command->first_line, my_command->argv[0],",
          "new_line_content": "\t\tif (my_command->argc != 1)",
          "content_same": false
        },
        {
          "line": 7065,
          "old_api": "select",
          "new_api": null,
          "old_text": "select(sa->maxfd + 1, &sa->fds, NULL, NULL, NULL)",
          "new_text": null,
          "old_line_content": "\t\treturn select(sa->maxfd + 1, &sa->fds, NULL, NULL, NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5021,
          "old_api": "syntax_error",
          "new_api": null,
          "old_text": "syntax_error(source, lineno, my_command->first_line, my_command->argv[0],\n\t\t\t\t\t \"invalid command\", NULL, -1)",
          "new_text": null,
          "old_line_content": "\t\tsyntax_error(source, lineno, my_command->first_line, my_command->argv[0],",
          "new_line_content": "\t\tif (my_command->argc > 2)",
          "content_same": false
        },
        {
          "line": 5025,
          "old_api": "termPQExpBuffer",
          "new_api": null,
          "old_text": "termPQExpBuffer(&word_buf)",
          "new_text": null,
          "old_line_content": "\ttermPQExpBuffer(&word_buf);",
          "new_line_content": "\telse",
          "content_same": false
        },
        {
          "line": 5033,
          "old_api": "pg_log_fatal",
          "new_api": null,
          "old_text": "pg_log_fatal(\"condition error in script \\\"%s\\\" command %d: %s\",\n\t\t\t\t desc, cmdn, msg)",
          "new_text": null,
          "old_line_content": "\tpg_log_fatal(\"condition error in script \\\"%s\\\" command %d: %s\",",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5035,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "\texit(1);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 5045,
          "old_api": "conditional_stack_create",
          "new_api": null,
          "old_text": "conditional_stack_create()",
          "new_text": null,
          "old_line_content": "\tConditionalStack cs = conditional_stack_create();",
          "new_line_content": "/*",
          "content_same": false
        },
        {
          "line": 5057,
          "old_api": "conditional_stack_push",
          "new_api": null,
          "old_text": "conditional_stack_push(cs, IFSTATE_FALSE)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tconditional_stack_push(cs, IFSTATE_FALSE);",
          "new_line_content": "\t\tCommand    *cmd = ps.commands[i];",
          "content_same": false
        },
        {
          "line": 5060,
          "old_api": "conditional_stack_empty",
          "new_api": null,
          "old_text": "conditional_stack_empty(cs)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tif (conditional_stack_empty(cs))",
          "new_line_content": "\t\t{",
          "content_same": false
        },
        {
          "line": 5061,
          "old_api": "ConditionError",
          "new_api": null,
          "old_text": "ConditionError(ps.desc, i + 1, \"\\\\elif without matching \\\\if\")",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\tConditionError(ps.desc, i + 1, \"\\\\elif without matching \\\\if\");",
          "new_line_content": "\t\t\tswitch (cmd->meta)",
          "content_same": false
        },
        {
          "line": 5062,
          "old_api": "conditional_stack_peek",
          "new_api": null,
          "old_text": "conditional_stack_peek(cs)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tif (conditional_stack_peek(cs) == IFSTATE_ELSE_FALSE)",
          "new_line_content": "\t\t\t{",
          "content_same": false
        },
        {
          "line": 5063,
          "old_api": "ConditionError",
          "new_api": null,
          "old_text": "ConditionError(ps.desc, i + 1, \"\\\\elif after \\\\else\")",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\tConditionError(ps.desc, i + 1, \"\\\\elif after \\\\else\");",
          "new_line_content": "\t\t\t\tcase META_IF:",
          "content_same": false
        },
        {
          "line": 5066,
          "old_api": "conditional_stack_empty",
          "new_api": null,
          "old_text": "conditional_stack_empty(cs)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tif (conditional_stack_empty(cs))",
          "new_line_content": "\t\t\t\tcase META_ELIF:",
          "content_same": false
        },
        {
          "line": 5082,
          "old_api": "conditional_stack_empty",
          "new_api": null,
          "old_text": "conditional_stack_empty(cs)",
          "new_text": null,
          "old_line_content": "\tif (!conditional_stack_empty(cs))",
          "new_line_content": "\t\t\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 5083,
          "old_api": "ConditionError",
          "new_api": null,
          "old_text": "ConditionError(ps.desc, i + 1, \"\\\\if without matching \\\\endif\")",
          "new_text": null,
          "old_line_content": "\t\tConditionError(ps.desc, i + 1, \"\\\\if without matching \\\\endif\");",
          "new_line_content": "\t\t\t\tdefault:",
          "content_same": false
        },
        {
          "line": 5084,
          "old_api": "conditional_stack_destroy",
          "new_api": null,
          "old_text": "conditional_stack_destroy(cs)",
          "new_text": null,
          "old_line_content": "\tconditional_stack_destroy(cs);",
          "new_line_content": "\t\t\t\t\t/* ignore anything else... */",
          "content_same": false
        },
        {
          "line": 5108,
          "old_api": "pg_malloc",
          "new_api": null,
          "old_text": "pg_malloc(sizeof(Command *) * alloc_num)",
          "new_text": null,
          "old_line_content": "\tps.commands = (Command **) pg_malloc(sizeof(Command *) * alloc_num);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5109,
          "old_api": "initStats",
          "new_api": null,
          "old_text": "initStats(&ps.stats, 0)",
          "new_text": null,
          "old_line_content": "\tinitStats(&ps.stats, 0);",
          "new_line_content": "#define COMMANDS_ALLOC_NUM 128",
          "content_same": false
        },
        {
          "line": 5112,
          "old_api": "psql_scan_create",
          "new_api": null,
          "old_text": "psql_scan_create(&pgbench_callbacks)",
          "new_text": null,
          "old_line_content": "\tsstate = psql_scan_create(&pgbench_callbacks);",
          "new_line_content": "\t/* Initialize all fields of ps */",
          "content_same": false
        },
        {
          "line": 5123,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(script)",
          "new_text": null,
          "old_line_content": "\tpsql_scan_setup(sstate, script, strlen(script), 0, true);",
          "new_line_content": "\t * we get from a DB connection.  However, without major rearrangement of",
          "content_same": false
        },
        {
          "line": 5124,
          "old_api": "expr_scanner_offset",
          "new_api": null,
          "old_text": "expr_scanner_offset(sstate)",
          "new_text": null,
          "old_line_content": "\tstart_offset = expr_scanner_offset(sstate) - 1;",
          "new_line_content": "\t * pgbench's argument parsing, we can't have a DB connection at the time",
          "content_same": false
        },
        {
          "line": 5126,
          "old_api": "initPQExpBuffer",
          "new_api": null,
          "old_text": "initPQExpBuffer(&line_buf)",
          "new_text": null,
          "old_line_content": "\tinitPQExpBuffer(&line_buf);",
          "new_line_content": "\t * with any backend-safe encoding, though conceivably we could be fooled",
          "content_same": false
        },
        {
          "line": 5136,
          "old_api": "resetPQExpBuffer",
          "new_api": null,
          "old_text": "resetPQExpBuffer(&line_buf)",
          "new_text": null,
          "old_line_content": "\t\tresetPQExpBuffer(&line_buf);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5137,
          "old_api": "expr_scanner_get_lineno",
          "new_api": null,
          "old_text": "expr_scanner_get_lineno(sstate, start_offset)",
          "new_text": null,
          "old_line_content": "\t\tlineno = expr_scanner_get_lineno(sstate, start_offset);",
          "new_line_content": "\tfor (;;)",
          "content_same": false
        },
        {
          "line": 5139,
          "old_api": "psql_scan",
          "new_api": null,
          "old_text": "psql_scan(sstate, &line_buf, &prompt)",
          "new_text": null,
          "old_line_content": "\t\tsr = psql_scan(sstate, &line_buf, &prompt);",
          "new_line_content": "\t\tPsqlScanResult sr;",
          "content_same": false
        },
        {
          "line": 5142,
          "old_api": "create_sql_command",
          "new_api": null,
          "old_text": "create_sql_command(&line_buf, desc)",
          "new_text": null,
          "old_line_content": "\t\tcommand = create_sql_command(&line_buf, desc);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5151,
          "old_api": "process_backslash_command",
          "new_api": null,
          "old_text": "process_backslash_command(sstate, desc)",
          "new_text": null,
          "old_line_content": "\t\t\tcommand = process_backslash_command(sstate, desc);",
          "new_line_content": "\t\t/* store new command */",
          "content_same": false
        },
        {
          "line": 5164,
          "old_api": "syntax_error",
          "new_api": null,
          "old_text": "syntax_error(desc, lineno, NULL, NULL,\n\t\t\t\t\t\t\t\t\t \"\\\\gset must follow an SQL command\",\n\t\t\t\t\t\t\t\t\t NULL, -1)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\tsyntax_error(desc, lineno, NULL, NULL,",
          "new_line_content": "\t\t\t\t * (We don't use a command slot in this case).",
          "content_same": false
        },
        {
          "line": 5172,
          "old_api": "syntax_error",
          "new_api": null,
          "old_text": "syntax_error(desc, lineno, NULL, NULL,\n\t\t\t\t\t\t\t\t\t \"\\\\gset must follow an SQL command\",\n\t\t\t\t\t\t\t\t\t cmd->first_line, -1)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\tsyntax_error(desc, lineno, NULL, NULL,",
          "new_line_content": "\t\t\t\t\t\t\t\t\t \"\\\\gset must follow an SQL command\",",
          "content_same": false
        },
        {
          "line": 5178,
          "old_api": "pg_strdup",
          "new_api": null,
          "old_text": "pg_strdup(\"\")",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\tcmd->varprefix = pg_strdup(\"\");",
          "new_line_content": "\t\t\t\t\t\tcmd->varprefix != NULL)",
          "content_same": false
        },
        {
          "line": 5180,
          "old_api": "pg_strdup",
          "new_api": null,
          "old_text": "pg_strdup(command->argv[1])",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\tcmd->varprefix = pg_strdup(command->argv[1]);",
          "new_line_content": "\t\t\t\t\t\t\t\t\t \"\\\\gset must follow an SQL command\",",
          "content_same": false
        },
        {
          "line": 5186,
          "old_api": "free_command",
          "new_api": null,
          "old_text": "free_command(command)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tfree_command(command);",
          "new_line_content": "\t\t\t\t\telse",
          "content_same": false
        },
        {
          "line": 5205,
          "old_api": "pg_realloc",
          "new_api": null,
          "old_text": "pg_realloc(ps.commands, sizeof(Command *) * alloc_num)",
          "new_text": null,
          "old_line_content": "\t\t\t\tpg_realloc(ps.commands, sizeof(Command *) * alloc_num);",
          "new_line_content": "\t\t * always allocate one more in order to accommodate the NULL",
          "content_same": false
        },
        {
          "line": 5215,
          "old_api": "addScript",
          "new_api": null,
          "old_text": "addScript(ps)",
          "new_text": null,
          "old_line_content": "\taddScript(ps);",
          "new_line_content": "\t\t/* Done if we reached EOF */",
          "content_same": false
        },
        {
          "line": 5217,
          "old_api": "termPQExpBuffer",
          "new_api": null,
          "old_text": "termPQExpBuffer(&line_buf)",
          "new_text": null,
          "old_line_content": "\ttermPQExpBuffer(&line_buf);",
          "new_line_content": "\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 5218,
          "old_api": "psql_scan_finish",
          "new_api": null,
          "old_text": "psql_scan_finish(sstate)",
          "new_text": null,
          "old_line_content": "\tpsql_scan_finish(sstate);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 5219,
          "old_api": "psql_scan_destroy",
          "new_api": null,
          "old_text": "psql_scan_destroy(sstate)",
          "new_text": null,
          "old_line_content": "\tpsql_scan_destroy(sstate);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5235,
          "old_api": "pg_malloc",
          "new_api": null,
          "old_text": "pg_malloc(buflen)",
          "new_text": null,
          "old_line_content": "\tbuf = (char *) pg_malloc(buflen);",
          "new_line_content": "static char *",
          "content_same": false
        },
        {
          "line": 5241,
          "old_api": "fread",
          "new_api": null,
          "old_text": "fread(buf + used, 1, BUFSIZ, fd)",
          "new_text": null,
          "old_line_content": "\t\tnread = fread(buf + used, 1, BUFSIZ, fd);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5268,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(filename, \"-\")",
          "new_text": null,
          "old_line_content": "\tif (strcmp(filename, \"-\") == 0)",
          "new_line_content": "static void",
          "content_same": false
        },
        {
          "line": 5270,
          "old_api": "fopen",
          "new_api": null,
          "old_text": "fopen(filename, \"r\")",
          "new_text": null,
          "old_line_content": "\telse if ((fd = fopen(filename, \"r\")) == NULL)",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 5272,
          "old_api": "pg_log_fatal",
          "new_api": null,
          "old_text": "pg_log_fatal(\"could not open file \\\"%s\\\": %m\", filename)",
          "new_text": null,
          "old_line_content": "\t\tpg_log_fatal(\"could not open file \\\"%s\\\": %m\", filename);",
          "new_line_content": "\tchar\t   *buf;",
          "content_same": false
        },
        {
          "line": 5273,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "\t\texit(1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5276,
          "old_api": "read_file_contents",
          "new_api": null,
          "old_text": "read_file_contents(fd)",
          "new_text": null,
          "old_line_content": "\tbuf = read_file_contents(fd);",
          "new_line_content": "\t\tfd = stdin;",
          "content_same": false
        },
        {
          "line": 5278,
          "old_api": "ferror",
          "new_api": null,
          "old_text": "ferror(fd)",
          "new_text": null,
          "old_line_content": "\tif (ferror(fd))",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 5281,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "\t\texit(1);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 5289,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(buf)",
          "new_text": null,
          "old_line_content": "\tfree(buf);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 5305,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr, \"Available builtin scripts:\\n\")",
          "new_text": null,
          "old_line_content": "\tfprintf(stderr, \"Available builtin scripts:\\n\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5306,
          "old_api": "lengthof",
          "new_api": null,
          "old_text": "lengthof(builtin_script)",
          "new_text": null,
          "old_line_content": "\tfor (i = 0; i < lengthof(builtin_script); i++)",
          "new_line_content": "/* show available builtin scripts */",
          "content_same": false
        },
        {
          "line": 5307,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr, \"  %13s: %s\\n\", builtin_script[i].name, builtin_script[i].desc)",
          "new_text": null,
          "old_line_content": "\t\tfprintf(stderr, \"  %13s: %s\\n\", builtin_script[i].name, builtin_script[i].desc);",
          "new_line_content": "static void",
          "content_same": false
        },
        {
          "line": 5308,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr, \"\\n\")",
          "new_text": null,
          "old_line_content": "\tfprintf(stderr, \"\\n\");",
          "new_line_content": "listAvailableScripts(void)",
          "content_same": false
        },
        {
          "line": 5317,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(name)",
          "new_text": null,
          "old_line_content": "\t\t\t\tlen = strlen(name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5320,
          "old_api": "lengthof",
          "new_api": null,
          "old_text": "lengthof(builtin_script)",
          "new_text": null,
          "old_line_content": "\tfor (i = 0; i < lengthof(builtin_script); i++)",
          "new_line_content": "findBuiltin(const char *name)",
          "content_same": false
        },
        {
          "line": 5322,
          "old_api": "strncmp",
          "new_api": null,
          "old_text": "strncmp(builtin_script[i].name, name, len)",
          "new_text": null,
          "old_line_content": "\t\tif (strncmp(builtin_script[i].name, name, len) == 0)",
          "new_line_content": "\tint\t\t\ti,",
          "content_same": false
        },
        {
          "line": 5335,
          "old_api": "pg_log_fatal",
          "new_api": null,
          "old_text": "pg_log_fatal(\"no builtin script found for name \\\"%s\\\"\", name)",
          "new_text": null,
          "old_line_content": "\t\tpg_log_fatal(\"no builtin script found for name \\\"%s\\\"\", name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5337,
          "old_api": "pg_log_fatal",
          "new_api": null,
          "old_text": "pg_log_fatal(\"ambiguous builtin name: %d builtin scripts found for prefix \\\"%s\\\"\", found, name)",
          "new_text": null,
          "old_line_content": "\t\tpg_log_fatal(\"ambiguous builtin name: %d builtin scripts found for prefix \\\"%s\\\"\", found, name);",
          "new_line_content": "\tif (found == 1)",
          "content_same": false
        },
        {
          "line": 5339,
          "old_api": "listAvailableScripts",
          "new_api": null,
          "old_text": "listAvailableScripts()",
          "new_text": null,
          "old_line_content": "\tlistAvailableScripts();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5340,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "\texit(1);",
          "new_line_content": "\t/* error cases */",
          "content_same": false
        },
        {
          "line": 5354,
          "old_api": "strrchr",
          "new_api": null,
          "old_text": "strrchr(option, WSEP)",
          "new_text": null,
          "old_line_content": "\tif ((sep = strrchr(option, WSEP)))",
          "new_line_content": " */",
          "content_same": false
        },
        {
          "line": 5362,
          "old_api": "strncpy",
          "new_api": null,
          "old_text": "strncpy(*script, option, namelen)",
          "new_text": null,
          "old_line_content": "\t\tstrncpy(*script, option, namelen);",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 5367,
          "old_api": "strtol",
          "new_api": null,
          "old_text": "strtol(sep + 1, &badp, 10)",
          "new_text": null,
          "old_line_content": "\t\twtmp = strtol(sep + 1, &badp, 10);",
          "new_line_content": "\t\t/* generate the script name */",
          "content_same": false
        },
        {
          "line": 5370,
          "old_api": "pg_log_fatal",
          "new_api": null,
          "old_text": "pg_log_fatal(\"invalid weight specification: %s\", sep)",
          "new_text": null,
          "old_line_content": "\t\t\tpg_log_fatal(\"invalid weight specification: %s\", sep);",
          "new_line_content": "\t\t(*script)[namelen] = '\\0';",
          "content_same": false
        },
        {
          "line": 5371,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "\t\t\texit(1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5375,
          "old_api": "pg_log_fatal",
          "new_api": null,
          "old_text": "pg_log_fatal(\"weight specification out of range (0 .. %u): %lld\",\n\t\t\t\t\t\t INT_MAX, (long long) wtmp)",
          "new_text": null,
          "old_line_content": "\t\t\tpg_log_fatal(\"weight specification out of range (0 .. %u): %lld\",",
          "new_line_content": "\t\tif (errno != 0 || badp == sep + 1 || *badp != '\\0')",
          "content_same": false
        },
        {
          "line": 5383,
          "old_api": "pg_strdup",
          "new_api": null,
          "old_text": "pg_strdup(option)",
          "new_text": null,
          "old_line_content": "\t\t*script = pg_strdup(option);",
          "new_line_content": "\t\t\t\t\t\t INT_MAX, (long long) wtmp);",
          "content_same": false
        },
        {
          "line": 5396,
          "old_api": "pg_log_fatal",
          "new_api": null,
          "old_text": "pg_log_fatal(\"empty command list for script \\\"%s\\\"\", script.desc)",
          "new_text": null,
          "old_line_content": "\t\tpg_log_fatal(\"empty command list for script \\\"%s\\\"\", script.desc);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5397,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "\t\texit(1);",
          "new_line_content": "/* append a script to the list of scripts to process */",
          "content_same": false
        },
        {
          "line": 5402,
          "old_api": "pg_log_fatal",
          "new_api": null,
          "old_text": "pg_log_fatal(\"at most %d SQL scripts are allowed\", MAX_SCRIPTS)",
          "new_text": null,
          "old_line_content": "\t\tpg_log_fatal(\"at most %d SQL scripts are allowed\", MAX_SCRIPTS);",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 5406,
          "old_api": "CheckConditional",
          "new_api": null,
          "old_text": "CheckConditional(script)",
          "new_text": null,
          "old_line_content": "\tCheckConditional(script);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5444,
          "old_api": "initStats",
          "new_api": null,
          "old_text": "initStats(&cur, 0)",
          "new_text": null,
          "old_line_content": "\tinitStats(&cur, 0);",
          "new_line_content": "\t * XXX: No locking.  There is no guarantee that we get an atomic snapshot",
          "content_same": false
        },
        {
          "line": 5447,
          "old_api": "mergeSimpleStats",
          "new_api": null,
          "old_text": "mergeSimpleStats(&cur.latency, &threads[i].stats.latency)",
          "new_text": null,
          "old_line_content": "\t\tmergeSimpleStats(&cur.latency, &threads[i].stats.latency);",
          "new_line_content": "\t * quick overview of how the test is going, so that shouldn't matter too",
          "content_same": false
        },
        {
          "line": 5448,
          "old_api": "mergeSimpleStats",
          "new_api": null,
          "old_text": "mergeSimpleStats(&cur.lag, &threads[i].stats.lag)",
          "new_text": null,
          "old_line_content": "\t\tmergeSimpleStats(&cur.lag, &threads[i].stats.lag);",
          "new_line_content": "\t * much.  (If a read from a 64-bit integer is not atomic, you might get a",
          "content_same": false
        },
        {
          "line": 5461,
          "old_api": "sqrt",
          "new_api": null,
          "old_text": "sqrt(sqlat - 1000000.0 * latency * latency)",
          "new_text": null,
          "old_line_content": "\t\tstdev = 0.001 * sqrt(sqlat - 1000000.0 * latency * latency);",
          "new_line_content": "\tntx = (cur.cnt - cur.skipped) - (last->cnt - last->skipped);",
          "content_same": false
        },
        {
          "line": 5471,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(tbuf, sizeof(tbuf), \"%.3f s\",\n\t\t\t\t PG_TIME_GET_DOUBLE(now + epoch_shift))",
          "new_text": null,
          "old_line_content": "\t\tsnprintf(tbuf, sizeof(tbuf), \"%.3f s\",",
          "new_line_content": "\telse",
          "content_same": false
        },
        {
          "line": 5472,
          "old_api": "PG_TIME_GET_DOUBLE",
          "new_api": null,
          "old_text": "PG_TIME_GET_DOUBLE(now + epoch_shift)",
          "new_text": null,
          "old_line_content": "\t\t\t\t PG_TIME_GET_DOUBLE(now + epoch_shift));",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 5477,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(tbuf, sizeof(tbuf), \"%.1f s\", total_run)",
          "new_text": null,
          "old_line_content": "\t\tsnprintf(tbuf, sizeof(tbuf), \"%.1f s\", total_run);",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 5480,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr,\n\t\t\t\"progress: %s, %.1f tps, lat %.3f ms stddev %.3f\",\n\t\t\ttbuf, tps, latency, stdev)",
          "new_text": null,
          "old_line_content": "\tfprintf(stderr,",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 5486,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr, \", lag %.3f ms\", lag)",
          "new_text": null,
          "old_line_content": "\t\tfprintf(stderr, \", lag %.3f ms\", lag);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5488,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr, \", \" INT64_FORMAT \" skipped\",\n\t\t\t\t\tcur.skipped - last->skipped)",
          "new_text": null,
          "old_line_content": "\t\t\tfprintf(stderr, \", \" INT64_FORMAT \" skipped\",",
          "new_line_content": "\t\t\t\"progress: %s, %.1f tps, lat %.3f ms stddev %.3f\",",
          "content_same": false
        },
        {
          "line": 5491,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr, \"\\n\")",
          "new_text": null,
          "old_line_content": "\tfprintf(stderr, \"\\n\");",
          "new_line_content": "\tif (throttle_delay)",
          "content_same": false
        },
        {
          "line": 5503,
          "old_api": "sqrt",
          "new_api": null,
          "old_text": "sqrt(ss->sum2 / ss->count - latency * latency)",
          "new_text": null,
          "old_line_content": "\t\tdouble\t\tstddev = sqrt(ss->sum2 / ss->count - latency * latency);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5505,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"%s average = %.3f ms\\n\", prefix, 0.001 * latency)",
          "new_text": null,
          "old_line_content": "\t\tprintf(\"%s average = %.3f ms\\n\", prefix, 0.001 * latency);",
          "new_line_content": "printSimpleStats(const char *prefix, SimpleStats *ss)",
          "content_same": false
        },
        {
          "line": 5506,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"%s stddev = %.3f ms\\n\", prefix, 0.001 * stddev)",
          "new_text": null,
          "old_line_content": "\t\tprintf(\"%s stddev = %.3f ms\\n\", prefix, 0.001 * stddev);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 3464,
          "old_api": "PQconsumeInput",
          "new_api": null,
          "old_text": "PQconsumeInput(st->con)",
          "new_text": null,
          "old_line_content": "\t\t\t\tif (!PQconsumeInput(st->con))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5514,
          "old_api": "PQserverVersion",
          "new_api": null,
          "old_text": "PQserverVersion(con)",
          "new_text": null,
          "old_line_content": "\tint\t\t\tserver_ver = PQserverVersion(con);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 3467,
          "old_api": "commandFailed",
          "new_api": null,
          "old_text": "commandFailed(st, \"SQL\", \"perhaps the backend died while processing\")",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tcommandFailed(st, \"SQL\", \"perhaps the backend died while processing\");",
          "new_line_content": "\t\t\t\t * fetched prior. Otherwise we end up doing a syscall for each",
          "content_same": false
        },
        {
          "line": 3475,
          "old_api": "readCommandResponse",
          "new_api": null,
          "old_text": "readCommandResponse(st,\n\t\t\t\t\t\t\t\t\t\tsql_script[st->use_file].commands[st->command]->meta,\n\t\t\t\t\t\t\t\t\t\tsql_script[st->use_file].commands[st->command]->varprefix)",
          "new_text": null,
          "old_line_content": "\t\t\t\tif (readCommandResponse(st,",
          "new_line_content": "\t\t\t\t\tst->state = CSTATE_ABORTED;",
          "content_same": false
        },
        {
          "line": 5523,
          "old_api": "PQparameterStatus",
          "new_api": null,
          "old_text": "PQparameterStatus(con, \"server_version\")",
          "new_text": null,
          "old_line_content": "\t\tserver_version = PQparameterStatus(con, \"server_version\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5527,
          "old_api": "formatPGVersionNumber",
          "new_api": null,
          "old_text": "formatPGVersionNumber(server_ver, true,\n\t\t\t\t\t\t\t\t  sverbuf, sizeof(sverbuf))",
          "new_text": null,
          "old_line_content": "\t\t\tformatPGVersionNumber(server_ver, true,",
          "new_line_content": "\t\tchar\t\tsverbuf[32];",
          "content_same": false
        },
        {
          "line": 3484,
          "old_api": "PQpipelineStatus",
          "new_api": null,
          "old_text": "PQpipelineStatus(st->con)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tif (PQpipelineStatus(st->con) != PQ_PIPELINE_ON)",
          "new_line_content": "\t\t\t\t\t\t\t\t\t\tsql_script[st->use_file].commands[st->command]->varprefix))",
          "content_same": false
        },
        {
          "line": 5532,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"%s (%s, server %s)\\n\")",
          "new_text": null,
          "old_line_content": "\t\tprintf(_(\"%s (%s, server %s)\\n\"),",
          "new_line_content": "\t\tif (!server_version)",
          "content_same": false
        },
        {
          "line": 5537,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"%s (%s)\\n\", \"pgbench\", PG_VERSION)",
          "new_text": null,
          "old_line_content": "\t\tprintf(\"%s (%s)\\n\", \"pgbench\", PG_VERSION);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 5538,
          "old_api": "fflush",
          "new_api": null,
          "old_text": "fflush(stdout)",
          "new_text": null,
          "old_line_content": "\tfflush(stdout);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3498,
          "old_api": "pg_time_now_lazy",
          "new_api": null,
          "old_text": "pg_time_now_lazy(&now)",
          "new_text": null,
          "old_line_content": "\t\t\t\tpg_time_now_lazy(&now);",
          "new_line_content": "\t\t\t\t/*",
          "content_same": false
        },
        {
          "line": 5551,
          "old_api": "PG_TIME_GET_DOUBLE",
          "new_api": null,
          "old_text": "PG_TIME_GET_DOUBLE(total_duration)",
          "new_text": null,
          "old_line_content": "\tdouble\t\tbench_duration = PG_TIME_GET_DOUBLE(total_duration);",
          "new_line_content": "\t\t\t pg_time_usec_t total_duration, /* benchmarking time */",
          "content_same": false
        },
        {
          "line": 5555,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"transaction type: %s\\n\",\n\t\t   num_scripts == 1 ? sql_script[0].desc : \"multiple scripts\")",
          "new_text": null,
          "old_line_content": "\tprintf(\"transaction type: %s\\n\",",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 5557,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"scaling factor: %d\\n\", scale)",
          "new_text": null,
          "old_line_content": "\tprintf(\"scaling factor: %d\\n\", scale);",
          "new_line_content": "\tint64\t\tntx = total->cnt - total->skipped;",
          "content_same": false
        },
        {
          "line": 5560,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"partition method: %s\\npartitions: %d\\n\",\n\t\t\t   PARTITION_METHOD[partition_method], partitions)",
          "new_text": null,
          "old_line_content": "\t\tprintf(\"partition method: %s\\npartitions: %d\\n\",",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5563,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"number of clients: %d\\n\", nclients)",
          "new_text": null,
          "old_line_content": "\tprintf(\"number of clients: %d\\n\", nclients);",
          "new_line_content": "\t\t   num_scripts == 1 ? sql_script[0].desc : \"multiple scripts\");",
          "content_same": false
        },
        {
          "line": 3519,
          "old_api": "pg_time_now_lazy",
          "new_api": null,
          "old_text": "pg_time_now_lazy(&now)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tpg_time_now_lazy(&now);",
          "new_line_content": "\t\t\t\t * in thread-local data structure, if per-command latencies",
          "content_same": false
        },
        {
          "line": 5568,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"number of transactions actually processed: \" INT64_FORMAT \"/%d\\n\",\n\t\t\t   ntx, nxacts * nclients)",
          "new_text": null,
          "old_line_content": "\t\tprintf(\"number of transactions actually processed: \" INT64_FORMAT \"/%d\\n\",",
          "new_line_content": "\t\t\t   PARTITION_METHOD[partition_method], partitions);",
          "content_same": false
        },
        {
          "line": 3523,
          "old_api": "addToSimpleStats",
          "new_api": null,
          "old_text": "addToSimpleStats(&command->stats,\n\t\t\t\t\t\t\t\t\t PG_TIME_GET_DOUBLE(now - st->stmt_begin))",
          "new_text": null,
          "old_line_content": "\t\t\t\t\taddToSimpleStats(&command->stats,",
          "new_line_content": "\t\t\t\t{",
          "content_same": false
        },
        {
          "line": 3524,
          "old_api": "PG_TIME_GET_DOUBLE",
          "new_api": null,
          "old_text": "PG_TIME_GET_DOUBLE(now - st->stmt_begin)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\t\t\t PG_TIME_GET_DOUBLE(now - st->stmt_begin));",
          "new_line_content": "\t\t\t\t\tCommand    *command;",
          "content_same": false
        },
        {
          "line": 5573,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"duration: %d s\\n\", duration)",
          "new_text": null,
          "old_line_content": "\t\tprintf(\"duration: %d s\\n\", duration);",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 3529,
          "old_api": "conditional_active",
          "new_api": null,
          "old_text": "conditional_active(st->cstack)",
          "new_text": null,
          "old_line_content": "\t\t\t\tst->state = conditional_active(st->cstack) ?",
          "new_line_content": "\t\t\t\t\t/* XXX could use a mutex here, but we choose not to */",
          "content_same": false
        },
        {
          "line": 5583,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"number of transactions skipped: \" INT64_FORMAT \" (%.3f %%)\\n\",\n\t\t\t   total->skipped, 100.0 * total->skipped / total->cnt)",
          "new_text": null,
          "old_line_content": "\t\tprintf(\"number of transactions skipped: \" INT64_FORMAT \" (%.3f %%)\\n\",",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 3539,
          "old_api": "processXactStats",
          "new_api": null,
          "old_text": "processXactStats(thread, st, &now, false, agg)",
          "new_text": null,
          "old_line_content": "\t\t\t\tprocessXactStats(thread, st, &now, false, agg);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5587,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"number of transactions above the %.1f ms latency limit: \" INT64_FORMAT \"/\" INT64_FORMAT \" (%.3f %%)\\n\",\n\t\t\t   latency_limit / 1000.0, latency_late, ntx,\n\t\t\t   (ntx > 0) ? 100.0 * latency_late / ntx : 0.0)",
          "new_text": null,
          "old_line_content": "\t\tprintf(\"number of transactions above the %.1f ms latency limit: \" INT64_FORMAT \"/\" INT64_FORMAT \" (%.3f %%)\\n\",",
          "new_line_content": "\t\treturn;",
          "content_same": false
        },
        {
          "line": 5592,
          "old_api": "printSimpleStats",
          "new_api": null,
          "old_text": "printSimpleStats(\"latency\", &total->latency)",
          "new_text": null,
          "old_line_content": "\t\tprintSimpleStats(\"latency\", &total->latency);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3545,
          "old_api": "conditional_stack_empty",
          "new_api": null,
          "old_text": "conditional_stack_empty(st->cstack)",
          "new_text": null,
          "old_line_content": "\t\t\t\tAssert(conditional_stack_empty(st->cstack));",
          "new_line_content": "\t\t\t\t/* transaction finished: calculate latency and do log */",
          "content_same": false
        },
        {
          "line": 5596,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"latency average = %.3f ms\\n\",\n\t\t\t   0.001 * total_duration * nclients / total->cnt)",
          "new_text": null,
          "old_line_content": "\t\tprintf(\"latency average = %.3f ms\\n\",",
          "new_line_content": "\t\t\t   (ntx > 0) ? 100.0 * latency_late / ntx : 0.0);",
          "content_same": false
        },
        {
          "line": 3549,
          "old_api": "finishCon",
          "new_api": null,
          "old_text": "finishCon(st)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tfinishCon(st);",
          "new_line_content": "\t\t\t\t * missing \\endif... cannot happen if CheckConditional was",
          "content_same": false
        },
        {
          "line": 5608,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"rate limit schedule lag: avg %.3f (max %.3f) ms\\n\",\n\t\t\t   0.001 * total->lag.sum / total->cnt, 0.001 * total->lag.max)",
          "new_text": null,
          "old_line_content": "\t\tprintf(\"rate limit schedule lag: avg %.3f (max %.3f) ms\\n\",",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 3574,
          "old_api": "finishCon",
          "new_api": null,
          "old_text": "finishCon(st)",
          "new_text": null,
          "old_line_content": "\t\t\t\tfinishCon(st);",
          "new_line_content": "\t\t\t\treturn;",
          "content_same": false
        },
        {
          "line": 5623,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"average connection time = %.3f ms\\n\", 0.001 * conn_total_duration / total->cnt)",
          "new_text": null,
          "old_line_content": "\t\tprintf(\"average connection time = %.3f ms\\n\", 0.001 * conn_total_duration / total->cnt);",
          "new_line_content": "\t *",
          "content_same": false
        },
        {
          "line": 5624,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"tps = %f (including reconnection times)\\n\", tps)",
          "new_text": null,
          "old_line_content": "\t\tprintf(\"tps = %f (including reconnection times)\\n\", tps);",
          "new_line_content": "\t * Otherwise connections are made just once at the beginning of the run",
          "content_same": false
        },
        {
          "line": 5628,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"initial connection time = %.3f ms\\n\", 0.001 * conn_elapsed_duration)",
          "new_text": null,
          "old_line_content": "\t\tprintf(\"initial connection time = %.3f ms\\n\", 0.001 * conn_elapsed_duration);",
          "new_line_content": "\tif (is_connect)",
          "content_same": false
        },
        {
          "line": 5629,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"tps = %f (without initial connection time)\\n\", tps)",
          "new_text": null,
          "old_line_content": "\t\tprintf(\"tps = %f (without initial connection time)\\n\", tps);",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 3594,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(command != NULL && command->type == META_COMMAND)",
          "new_text": null,
          "old_line_content": "\tAssert(command != NULL && command->type == META_COMMAND);",
          "new_line_content": "static ConnectionStateEnum",
          "content_same": false
        },
        {
          "line": 5643,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"SQL script %d: %s\\n\"\n\t\t\t\t\t   \" - weight: %d (targets %.1f%% of total)\\n\"\n\t\t\t\t\t   \" - \" INT64_FORMAT \" transactions (%.1f%% of total, tps = %f)\\n\",\n\t\t\t\t\t   i + 1, sql_script[i].desc,\n\t\t\t\t\t   sql_script[i].weight,\n\t\t\t\t\t   100.0 * sql_script[i].weight / total_weight,\n\t\t\t\t\t   sstats->cnt,\n\t\t\t\t\t   100.0 * sstats->cnt / total->cnt,\n\t\t\t\t\t   (sstats->cnt - sstats->skipped) / bench_duration)",
          "new_text": null,
          "old_line_content": "\t\t\t\tprintf(\"SQL script %d: %s\\n\"",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3599,
          "old_api": "unlikely",
          "new_api": null,
          "old_text": "unlikely(__pg_log_level <= PG_LOG_DEBUG)",
          "new_text": null,
          "old_line_content": "\tif (unlikely(__pg_log_level <= PG_LOG_DEBUG))",
          "new_line_content": "\tchar\t  **argv;",
          "content_same": false
        },
        {
          "line": 3603,
          "old_api": "initPQExpBuffer",
          "new_api": null,
          "old_text": "initPQExpBuffer(&buf)",
          "new_text": null,
          "old_line_content": "\t\tinitPQExpBuffer(&buf);",
          "new_line_content": "\targc = command->argc;",
          "content_same": false
        },
        {
          "line": 3605,
          "old_api": "printfPQExpBuffer",
          "new_api": null,
          "old_text": "printfPQExpBuffer(&buf, \"client %d executing \\\\%s\", st->id, argv[0])",
          "new_text": null,
          "old_line_content": "\t\tprintfPQExpBuffer(&buf, \"client %d executing \\\\%s\", st->id, argv[0]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5654,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\" - number of transactions skipped: \" INT64_FORMAT \" (%.3f%%)\\n\",\n\t\t\t\t\t\t   sstats->skipped,\n\t\t\t\t\t\t   100.0 * sstats->skipped / sstats->cnt)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tprintf(\" - number of transactions skipped: \" INT64_FORMAT \" (%.3f%%)\\n\",",
          "new_line_content": "\t\t\t\t\t   sql_script[i].weight,",
          "content_same": false
        },
        {
          "line": 3607,
          "old_api": "appendPQExpBuffer",
          "new_api": null,
          "old_text": "appendPQExpBuffer(&buf, \" %s\", argv[i])",
          "new_text": null,
          "old_line_content": "\t\t\tappendPQExpBuffer(&buf, \" %s\", argv[i]);",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 3609,
          "old_api": "pg_log_debug",
          "new_api": null,
          "old_text": "pg_log_debug(\"%s\", buf.data)",
          "new_text": null,
          "old_line_content": "\t\tpg_log_debug(\"%s\", buf.data);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5658,
          "old_api": "printSimpleStats",
          "new_api": null,
          "old_text": "printSimpleStats(\" - latency\", &sstats->latency)",
          "new_text": null,
          "old_line_content": "\t\t\t\tprintSimpleStats(\" - latency\", &sstats->latency);",
          "new_line_content": "\t\t\t\t\t   (sstats->cnt - sstats->skipped) / bench_duration);",
          "content_same": false
        },
        {
          "line": 3611,
          "old_api": "termPQExpBuffer",
          "new_api": null,
          "old_text": "termPQExpBuffer(&buf)",
          "new_text": null,
          "old_line_content": "\t\ttermPQExpBuffer(&buf);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5667,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\" - statement latencies in milliseconds:\\n\")",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tprintf(\" - statement latencies in milliseconds:\\n\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5669,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"statement latencies in milliseconds:\\n\")",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tprintf(\"statement latencies in milliseconds:\\n\");",
          "new_line_content": "\t\t\tif (report_per_command)",
          "content_same": false
        },
        {
          "line": 3624,
          "old_api": "evaluateSleep",
          "new_api": null,
          "old_text": "evaluateSleep(st, argc, argv, &usec)",
          "new_text": null,
          "old_line_content": "\t\tif (!evaluateSleep(st, argc, argv, &usec))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3626,
          "old_api": "commandFailed",
          "new_api": null,
          "old_text": "commandFailed(st, \"sleep\", \"execution of meta-command failed\")",
          "new_text": null,
          "old_line_content": "\t\t\tcommandFailed(st, \"sleep\", \"execution of meta-command failed\");",
          "new_line_content": "\t\t * A \\sleep doesn't execute anything, we just get the delay from the",
          "content_same": false
        },
        {
          "line": 5677,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"   %11.3f  %s\\n\",\n\t\t\t\t\t\t   (cstats->count > 0) ?\n\t\t\t\t\t\t   1000.0 * cstats->sum / cstats->count : 0.0,\n\t\t\t\t\t\t   (*commands)->first_line)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tprintf(\"   %11.3f  %s\\n\",",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3630,
          "old_api": "pg_time_now_lazy",
          "new_api": null,
          "old_text": "pg_time_now_lazy(now)",
          "new_text": null,
          "old_line_content": "\t\tpg_time_now_lazy(now);",
          "new_line_content": "\t\t */",
          "content_same": false
        },
        {
          "line": 3639,
          "old_api": "evaluateExpr",
          "new_api": null,
          "old_text": "evaluateExpr(st, expr, &result)",
          "new_text": null,
          "old_line_content": "\t\tif (!evaluateExpr(st, expr, &result))",
          "new_line_content": "\t\treturn CSTATE_SLEEP;",
          "content_same": false
        },
        {
          "line": 3641,
          "old_api": "commandFailed",
          "new_api": null,
          "old_text": "commandFailed(st, argv[0], \"evaluation of meta-command failed\")",
          "new_text": null,
          "old_line_content": "\t\t\tcommandFailed(st, argv[0], \"evaluation of meta-command failed\");",
          "new_line_content": "\telse if (command->meta == META_SET)",
          "content_same": false
        },
        {
          "line": 3645,
          "old_api": "putVariableValue",
          "new_api": null,
          "old_text": "putVariableValue(st, argv[0], argv[1], &result)",
          "new_text": null,
          "old_line_content": "\t\tif (!putVariableValue(st, argv[0], argv[1], &result))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3647,
          "old_api": "commandFailed",
          "new_api": null,
          "old_text": "commandFailed(st, \"set\", \"assignment of meta-command failed\")",
          "new_text": null,
          "old_line_content": "\t\t\tcommandFailed(st, \"set\", \"assignment of meta-command failed\");",
          "new_line_content": "\t\t{",
          "content_same": false
        },
        {
          "line": 5696,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(seed, \"time\")",
          "new_text": null,
          "old_line_content": "\tif (seed == NULL || strcmp(seed, \"time\") == 0)",
          "new_line_content": " * and initialize base_random_sequence for use in initializing other sequences.",
          "content_same": false
        },
        {
          "line": 5699,
          "old_api": "pg_time_now",
          "new_api": null,
          "old_text": "pg_time_now()",
          "new_text": null,
          "old_line_content": "\t\tiseed = pg_time_now();",
          "new_line_content": "set_random_seed(const char *seed)",
          "content_same": false
        },
        {
          "line": 5701,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(seed, \"rand\")",
          "new_text": null,
          "old_line_content": "\telse if (strcmp(seed, \"rand\") == 0)",
          "new_line_content": "\tuint64\t\tiseed;",
          "content_same": false
        },
        {
          "line": 5704,
          "old_api": "pg_strong_random",
          "new_api": null,
          "old_text": "pg_strong_random(&iseed, sizeof(iseed))",
          "new_text": null,
          "old_line_content": "\t\tif (!pg_strong_random(&iseed, sizeof(iseed)))",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 3658,
          "old_api": "evaluateExpr",
          "new_api": null,
          "old_text": "evaluateExpr(st, expr, &result)",
          "new_text": null,
          "old_line_content": "\t\tif (!evaluateExpr(st, expr, &result))",
          "new_line_content": "\telse if (command->meta == META_IF)",
          "content_same": false
        },
        {
          "line": 3660,
          "old_api": "commandFailed",
          "new_api": null,
          "old_text": "commandFailed(st, argv[0], \"evaluation of meta-command failed\")",
          "new_text": null,
          "old_line_content": "\t\t\tcommandFailed(st, argv[0], \"evaluation of meta-command failed\");",
          "new_line_content": "\t\t/* backslash commands with an expression to evaluate */",
          "content_same": false
        },
        {
          "line": 3664,
          "old_api": "valueTruth",
          "new_api": null,
          "old_text": "valueTruth(&result)",
          "new_text": null,
          "old_line_content": "\t\tcond = valueTruth(&result);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5717,
          "old_api": "sscanf",
          "new_api": null,
          "old_text": "sscanf(seed, \"%lu%c\", &ulseed, &garbage)",
          "new_text": null,
          "old_line_content": "\t\tif (sscanf(seed, \"%lu%c\", &ulseed, &garbage) != 1)",
          "new_line_content": "\telse",
          "content_same": false
        },
        {
          "line": 5719,
          "old_api": "pg_log_error",
          "new_api": null,
          "old_text": "pg_log_error(\"unrecognized random seed option \\\"%s\\\"\", seed)",
          "new_text": null,
          "old_line_content": "\t\t\tpg_log_error(\"unrecognized random seed option \\\"%s\\\"\", seed);",
          "new_line_content": "\t\t/* parse unsigned-int seed value */",
          "content_same": false
        },
        {
          "line": 5720,
          "old_api": "pg_log_info",
          "new_api": null,
          "old_text": "pg_log_info(\"Expecting an unsigned integer, \\\"time\\\" or \\\"rand\\\"\")",
          "new_text": null,
          "old_line_content": "\t\t\tpg_log_info(\"Expecting an unsigned integer, \\\"time\\\" or \\\"rand\\\"\");",
          "new_line_content": "\t\tunsigned long ulseed;",
          "content_same": false
        },
        {
          "line": 3674,
          "old_api": "conditional_stack_peek",
          "new_api": null,
          "old_text": "conditional_stack_peek(st->cstack)",
          "new_text": null,
          "old_line_content": "\t\tif (conditional_stack_peek(st->cstack) == IFSTATE_TRUE)",
          "new_line_content": "\telse if (command->meta == META_ELIF)",
          "content_same": false
        },
        {
          "line": 3677,
          "old_api": "conditional_stack_poke",
          "new_api": null,
          "old_text": "conditional_stack_poke(st->cstack, IFSTATE_IGNORED)",
          "new_text": null,
          "old_line_content": "\t\t\tconditional_stack_poke(st->cstack, IFSTATE_IGNORED);",
          "new_line_content": "\t\tPgBenchExpr *expr = command->expr;",
          "content_same": false
        },
        {
          "line": 3683,
          "old_api": "commandFailed",
          "new_api": null,
          "old_text": "commandFailed(st, argv[0], \"evaluation of meta-command failed\")",
          "new_text": null,
          "old_line_content": "\t\t\tcommandFailed(st, argv[0], \"evaluation of meta-command failed\");",
          "new_line_content": "\t\t\t/* elif after executed block, skip eval and wait for endif. */",
          "content_same": false
        },
        {
          "line": 3687,
          "old_api": "valueTruth",
          "new_api": null,
          "old_text": "valueTruth(&result)",
          "new_text": null,
          "old_line_content": "\t\tcond = valueTruth(&result);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3689,
          "old_api": "conditional_stack_poke",
          "new_api": null,
          "old_text": "conditional_stack_poke(st->cstack, cond ? IFSTATE_TRUE : IFSTATE_FALSE)",
          "new_text": null,
          "old_line_content": "\t\tconditional_stack_poke(st->cstack, cond ? IFSTATE_TRUE : IFSTATE_FALSE);",
          "new_line_content": "\t\t{",
          "content_same": false
        },
        {
          "line": 3693,
          "old_api": "conditional_stack_peek",
          "new_api": null,
          "old_text": "conditional_stack_peek(st->cstack)",
          "new_text": null,
          "old_line_content": "\t\tswitch (conditional_stack_peek(st->cstack))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3705,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(false)",
          "new_text": null,
          "old_line_content": "\t\t\t\tAssert(false);",
          "new_line_content": "\t\t\tcase IFSTATE_FALSE: /* inconsistent if active */",
          "content_same": false
        },
        {
          "line": 3710,
          "old_api": "conditional_stack_empty",
          "new_api": null,
          "old_text": "conditional_stack_empty(st->cstack)",
          "new_text": null,
          "old_line_content": "\t\tAssert(!conditional_stack_empty(st->cstack));",
          "new_line_content": "\t\t\tdefault:",
          "content_same": false
        },
        {
          "line": 3711,
          "old_api": "conditional_stack_pop",
          "new_api": null,
          "old_text": "conditional_stack_pop(st->cstack)",
          "new_text": null,
          "old_line_content": "\t\tconditional_stack_pop(st->cstack);",
          "new_line_content": "\t\t\t\t/* dead code if conditional check is ok */",
          "content_same": false
        },
        {
          "line": 3715,
          "old_api": "runShellCommand",
          "new_api": null,
          "old_text": "runShellCommand(st, argv[1], argv + 2, argc - 2)",
          "new_text": null,
          "old_line_content": "\t\tif (!runShellCommand(st, argv[1], argv + 2, argc - 2))",
          "new_line_content": "\telse if (command->meta == META_ENDIF)",
          "content_same": false
        },
        {
          "line": 3723,
          "old_api": "runShellCommand",
          "new_api": null,
          "old_text": "runShellCommand(st, NULL, argv + 1, argc - 1)",
          "new_text": null,
          "old_line_content": "\t\tif (!runShellCommand(st, NULL, argv + 1, argc - 1))",
          "new_line_content": "\t\t{",
          "content_same": false
        },
        {
          "line": 3725,
          "old_api": "commandFailed",
          "new_api": null,
          "old_text": "commandFailed(st, \"shell\", \"execution of meta-command failed\")",
          "new_text": null,
          "old_line_content": "\t\t\tcommandFailed(st, \"shell\", \"execution of meta-command failed\");",
          "new_line_content": "\t\t\treturn CSTATE_ABORTED;",
          "content_same": false
        },
        {
          "line": 3737,
          "old_api": "commandFailed",
          "new_api": null,
          "old_text": "commandFailed(st, \"startpipeline\", \"cannot use pipeline mode with the simple query protocol\")",
          "new_text": null,
          "old_line_content": "\t\t\tcommandFailed(st, \"startpipeline\", \"cannot use pipeline mode with the simple query protocol\");",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 3741,
          "old_api": "PQpipelineStatus",
          "new_api": null,
          "old_text": "PQpipelineStatus(st->con)",
          "new_text": null,
          "old_line_content": "\t\tif (PQpipelineStatus(st->con) != PQ_PIPELINE_OFF)",
          "new_line_content": "\t\t */",
          "content_same": false
        },
        {
          "line": 3743,
          "old_api": "commandFailed",
          "new_api": null,
          "old_text": "commandFailed(st, \"startpipeline\", \"already in pipeline mode\")",
          "new_text": null,
          "old_line_content": "\t\t\tcommandFailed(st, \"startpipeline\", \"already in pipeline mode\");",
          "new_line_content": "\t\t{",
          "content_same": false
        },
        {
          "line": 3746,
          "old_api": "PQenterPipelineMode",
          "new_api": null,
          "old_text": "PQenterPipelineMode(st->con)",
          "new_text": null,
          "old_line_content": "\t\tif (PQenterPipelineMode(st->con) == 0)",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 3754,
          "old_api": "PQpipelineStatus",
          "new_api": null,
          "old_text": "PQpipelineStatus(st->con)",
          "new_text": null,
          "old_line_content": "\t\tif (PQpipelineStatus(st->con) != PQ_PIPELINE_ON)",
          "new_line_content": "\t\t{",
          "content_same": false
        },
        {
          "line": 3756,
          "old_api": "commandFailed",
          "new_api": null,
          "old_text": "commandFailed(st, \"endpipeline\", \"not in pipeline mode\")",
          "new_text": null,
          "old_line_content": "\t\t\tcommandFailed(st, \"endpipeline\", \"not in pipeline mode\");",
          "new_line_content": "\t\t\treturn CSTATE_ABORTED;",
          "content_same": false
        },
        {
          "line": 3759,
          "old_api": "PQpipelineSync",
          "new_api": null,
          "old_text": "PQpipelineSync(st->con)",
          "new_text": null,
          "old_line_content": "\t\tif (!PQpipelineSync(st->con))",
          "new_line_content": "\telse if (command->meta == META_ENDPIPELINE)",
          "content_same": false
        },
        {
          "line": 5828,
          "old_api": "gettimeofday",
          "new_api": null,
          "old_text": "gettimeofday(&tv, NULL)",
          "new_text": null,
          "old_line_content": "\tgettimeofday(&tv, NULL);",
          "new_line_content": "\tint\t\t\texit_code = 0;",
          "content_same": false
        },
        {
          "line": 5829,
          "old_api": "pg_time_now",
          "new_api": null,
          "old_text": "pg_time_now()",
          "new_text": null,
          "old_line_content": "\tepoch_shift = tv.tv_sec * INT64CONST(1000000) + tv.tv_usec - pg_time_now();",
          "new_line_content": "\tstruct timeval tv;",
          "content_same": false
        },
        {
          "line": 5831,
          "old_api": "pg_logging_init",
          "new_api": null,
          "old_text": "pg_logging_init(argv[0])",
          "new_text": null,
          "old_line_content": "\tpg_logging_init(argv[0]);",
          "new_line_content": "\t/*",
          "content_same": false
        },
        {
          "line": 5832,
          "old_api": "get_progname",
          "new_api": null,
          "old_text": "get_progname(argv[0])",
          "new_text": null,
          "old_line_content": "\tprogname = get_progname(argv[0]);",
          "new_line_content": "\t * Record difference between Unix time and instr_time time.  We'll use",
          "content_same": false
        },
        {
          "line": 3792,
          "old_api": "pg_time_now",
          "new_api": null,
          "old_text": "pg_time_now()",
          "new_text": null,
          "old_line_content": "\tpg_time_usec_t now = pg_time_now() + epoch_shift;",
          "new_line_content": " * avoid the cost of an extra call to pg_time_now().",
          "content_same": false
        },
        {
          "line": 5841,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(argv[1], \"-V\")",
          "new_text": null,
          "old_line_content": "\t\tif (strcmp(argv[1], \"--version\") == 0 || strcmp(argv[1], \"-V\") == 0)",
          "new_line_content": "\tif (argc > 1)",
          "content_same": false
        },
        {
          "line": 3794,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(use_log)",
          "new_text": null,
          "old_line_content": "\tAssert(use_log);",
          "new_line_content": "static void",
          "content_same": false
        },
        {
          "line": 5844,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(0)",
          "new_text": null,
          "old_line_content": "\t\t\texit(0);",
          "new_line_content": "\t\t{",
          "content_same": false
        },
        {
          "line": 5853,
          "old_api": "pg_log_fatal",
          "new_api": null,
          "old_text": "pg_log_fatal(\"error while setting random seed from PGBENCH_RANDOM_SEED environment variable\")",
          "new_text": null,
          "old_line_content": "\t\tpg_log_fatal(\"error while setting random seed from PGBENCH_RANDOM_SEED environment variable\");",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 5854,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "\t\texit(1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5857,
          "old_api": "getopt_long",
          "new_api": null,
          "old_text": "getopt_long(argc, argv, \"iI:h:nvp:dqb:SNc:j:Crs:t:T:U:lf:D:F:M:P:R:L:\", long_options, &optindex)",
          "new_text": null,
          "old_line_content": "\twhile ((c = getopt_long(argc, argv, \"iI:h:nvp:dqb:SNc:j:Crs:t:T:U:lf:D:F:M:P:R:L:\", long_options, &optindex)) != -1)",
          "new_line_content": "\t/* set random seed early, because it may be used while parsing scripts. */",
          "content_same": false
        },
        {
          "line": 3815,
          "old_api": "INT64CONST",
          "new_api": null,
          "old_text": "INT64CONST(1000000)",
          "new_text": null,
          "old_line_content": "\t\twhile ((next = agg->start_time + agg_interval * INT64CONST(1000000)) <= now)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3818,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(logfile, INT64_FORMAT \" \" INT64_FORMAT \" %.0f %.0f %.0f %.0f\",\n\t\t\t\t\tagg->start_time / 1000000,\t/* seconds since Unix epoch */\n\t\t\t\t\tagg->cnt,\n\t\t\t\t\tagg->latency.sum,\n\t\t\t\t\tagg->latency.sum2,\n\t\t\t\t\tagg->latency.min,\n\t\t\t\t\tagg->latency.max)",
          "new_text": null,
          "old_line_content": "\t\t\tfprintf(logfile, INT64_FORMAT \" \" INT64_FORMAT \" %.0f %.0f %.0f %.0f\",",
          "new_line_content": "\t\t * any empty intervals in between (this may happen with very low tps,",
          "content_same": false
        },
        {
          "line": 5868,
          "old_api": "pg_free",
          "new_api": null,
          "old_text": "pg_free(initialize_steps)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tpg_free(initialize_steps);",
          "new_line_content": "\t\tswitch (c)",
          "content_same": false
        },
        {
          "line": 5869,
          "old_api": "pg_strdup",
          "new_api": null,
          "old_text": "pg_strdup(optarg)",
          "new_text": null,
          "old_line_content": "\t\t\t\tinitialize_steps = pg_strdup(optarg);",
          "new_line_content": "\t\t{",
          "content_same": false
        },
        {
          "line": 5870,
          "old_api": "checkInitSteps",
          "new_api": null,
          "old_text": "checkInitSteps(initialize_steps)",
          "new_text": null,
          "old_line_content": "\t\t\t\tcheckInitSteps(initialize_steps);",
          "new_line_content": "\t\t\tcase 'i':",
          "content_same": false
        },
        {
          "line": 5874,
          "old_api": "pg_strdup",
          "new_api": null,
          "old_text": "pg_strdup(optarg)",
          "new_text": null,
          "old_line_content": "\t\t\t\tpghost = pg_strdup(optarg);",
          "new_line_content": "\t\t\t\tif (initialize_steps)",
          "content_same": false
        },
        {
          "line": 3827,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(logfile, \" %.0f %.0f %.0f %.0f\",\n\t\t\t\t\t\tagg->lag.sum,\n\t\t\t\t\t\tagg->lag.sum2,\n\t\t\t\t\t\tagg->lag.min,\n\t\t\t\t\t\tagg->lag.max)",
          "new_text": null,
          "old_line_content": "\t\t\t\tfprintf(logfile, \" %.0f %.0f %.0f %.0f\",",
          "new_line_content": "\t\t\t\t\tagg->cnt,",
          "content_same": false
        },
        {
          "line": 3833,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(logfile, \" \" INT64_FORMAT, agg->skipped)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tfprintf(logfile, \" \" INT64_FORMAT, agg->skipped);",
          "new_line_content": "\t\t\t{",
          "content_same": false
        },
        {
          "line": 3835,
          "old_api": "fputc",
          "new_api": null,
          "old_text": "fputc('\\n', logfile)",
          "new_text": null,
          "old_line_content": "\t\t\tfputc('\\n', logfile);",
          "new_line_content": "\t\t\t\t\t\tagg->lag.sum,",
          "content_same": false
        },
        {
          "line": 5884,
          "old_api": "pg_strdup",
          "new_api": null,
          "old_text": "pg_strdup(optarg)",
          "new_text": null,
          "old_line_content": "\t\t\t\tpgport = pg_strdup(optarg);",
          "new_line_content": "\t\t\t\tis_no_vacuum = true;",
          "content_same": false
        },
        {
          "line": 3838,
          "old_api": "initStats",
          "new_api": null,
          "old_text": "initStats(agg, next)",
          "new_text": null,
          "old_line_content": "\t\t\tinitStats(agg, next);",
          "new_line_content": "\t\t\t\t\t\tagg->lag.max);",
          "content_same": false
        },
        {
          "line": 5887,
          "old_api": "pg_logging_increase_verbosity",
          "new_api": null,
          "old_text": "pg_logging_increase_verbosity()",
          "new_text": null,
          "old_line_content": "\t\t\t\tpg_logging_increase_verbosity();",
          "new_line_content": "\t\t\t\tbenchmarking_option_set = true;",
          "content_same": false
        },
        {
          "line": 3848,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(logfile, \"%d \" INT64_FORMAT \" skipped %d \" INT64_FORMAT \" \"\n\t\t\t\t\tINT64_FORMAT,\n\t\t\t\t\tst->id, st->cnt, st->use_file, now / 1000000, now % 1000000)",
          "new_text": null,
          "old_line_content": "\t\t\tfprintf(logfile, \"%d \" INT64_FORMAT \" skipped %d \" INT64_FORMAT \" \"",
          "new_line_content": "\t\t/* accumulate the current transaction */",
          "content_same": false
        },
        {
          "line": 3852,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(logfile, \"%d \" INT64_FORMAT \" %.0f %d \" INT64_FORMAT \" \"\n\t\t\t\t\tINT64_FORMAT,\n\t\t\t\t\tst->id, st->cnt, latency, st->use_file,\n\t\t\t\t\tnow / 1000000, now % 1000000)",
          "new_text": null,
          "old_line_content": "\t\t\tfprintf(logfile, \"%d \" INT64_FORMAT \" %.0f %d \" INT64_FORMAT \" \"",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 5900,
          "old_api": "getrlimit",
          "new_api": null,
          "old_text": "getrlimit(RLIMIT_OFILE, &rlim)",
          "new_text": null,
          "old_line_content": "\t\t\t\tif (getrlimit(RLIMIT_OFILE, &rlim) == -1)",
          "new_line_content": "\t\t\t\t{",
          "content_same": false
        },
        {
          "line": 5903,
          "old_api": "pg_log_fatal",
          "new_api": null,
          "old_text": "pg_log_fatal(\"getrlimit failed: %m\")",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tpg_log_fatal(\"getrlimit failed: %m\");",
          "new_line_content": "#ifdef HAVE_GETRLIMIT",
          "content_same": false
        },
        {
          "line": 5904,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\texit(1);",
          "new_line_content": "#ifdef RLIMIT_NOFILE\t\t\t/* most platforms use RLIMIT_NOFILE */",
          "content_same": false
        },
        {
          "line": 3857,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(logfile, \" %.0f\", lag)",
          "new_text": null,
          "old_line_content": "\t\t\tfprintf(logfile, \" %.0f\", lag);",
          "new_line_content": "\t\t\t\t\tst->id, st->cnt, st->use_file, now / 1000000, now % 1000000);",
          "content_same": false
        },
        {
          "line": 3858,
          "old_api": "fputc",
          "new_api": null,
          "old_text": "fputc('\\n', logfile)",
          "new_text": null,
          "old_line_content": "\t\tfputc('\\n', logfile);",
          "new_line_content": "\t\telse",
          "content_same": false
        },
        {
          "line": 5908,
          "old_api": "pg_log_fatal",
          "new_api": null,
          "old_text": "pg_log_fatal(\"need at least %d open files, but system limit is %ld\",\n\t\t\t\t\t\t\t\t nclients + 3, (long) rlim.rlim_cur)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tpg_log_fatal(\"need at least %d open files, but system limit is %ld\",",
          "new_line_content": "#endif\t\t\t\t\t\t\t/* RLIMIT_NOFILE */",
          "content_same": false
        },
        {
          "line": 5920,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\texit(1);",
          "new_line_content": "#endif\t\t\t\t\t\t\t/* HAVE_GETRLIMIT */",
          "content_same": false
        },
        {
          "line": 5925,
          "old_api": "pg_log_fatal",
          "new_api": null,
          "old_text": "pg_log_fatal(\"threads are not supported on this platform; use -j1\")",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tpg_log_fatal(\"threads are not supported on this platform; use -j1\");",
          "new_line_content": "\t\t\t\t\t\t\t\t\t  &nthreads))",
          "content_same": false
        },
        {
          "line": 5926,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\texit(1);",
          "new_line_content": "\t\t\t\t{",
          "content_same": false
        },
        {
          "line": 3879,
          "old_api": "pg_time_now_lazy",
          "new_api": null,
          "old_text": "pg_time_now_lazy(now)",
          "new_text": null,
          "old_line_content": "\t\tpg_time_now_lazy(now);",
          "new_line_content": "\tdouble\t\tlatency = 0.0,",
          "content_same": false
        },
        {
          "line": 3889,
          "old_api": "accumStats",
          "new_api": null,
          "old_text": "accumStats(&thread->stats, skipped, latency, lag)",
          "new_text": null,
          "old_line_content": "\t\taccumStats(&thread->stats, skipped, latency, lag);",
          "new_line_content": "\t\tlatency = (*now) - st->txn_scheduled;",
          "content_same": false
        },
        {
          "line": 5940,
          "old_api": "option_parse_int",
          "new_api": null,
          "old_text": "option_parse_int(optarg, \"-s/--scale\", 1, INT_MAX,\n\t\t\t\t\t\t\t\t\t  &scale)",
          "new_text": null,
          "old_line_content": "\t\t\t\tif (!option_parse_int(optarg, \"-s/--scale\", 1, INT_MAX,",
          "new_line_content": "\t\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 5942,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\texit(1);",
          "new_line_content": "\t\t\t\tbenchmarking_option_set = true;",
          "content_same": false
        },
        {
          "line": 5946,
          "old_api": "option_parse_int",
          "new_api": null,
          "old_text": "option_parse_int(optarg, \"-t/--transactions\", 1, INT_MAX,\n\t\t\t\t\t\t\t\t\t  &nxacts)",
          "new_text": null,
          "old_line_content": "\t\t\t\tif (!option_parse_int(optarg, \"-t/--transactions\", 1, INT_MAX,",
          "new_line_content": "\t\t\t\tscale_given = true;",
          "content_same": false
        },
        {
          "line": 5948,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\texit(1);",
          "new_line_content": "\t\t\t\t\t\t\t\t\t  &scale))",
          "content_same": false
        },
        {
          "line": 5952,
          "old_api": "option_parse_int",
          "new_api": null,
          "old_text": "option_parse_int(optarg, \"-T/--time\", 1, INT_MAX,\n\t\t\t\t\t\t\t\t\t  &duration)",
          "new_text": null,
          "old_line_content": "\t\t\t\tif (!option_parse_int(optarg, \"-T/--time\", 1, INT_MAX,",
          "new_line_content": "\t\t\t\tbenchmarking_option_set = true;",
          "content_same": false
        },
        {
          "line": 3905,
          "old_api": "doLog",
          "new_api": null,
          "old_text": "doLog(thread, st, agg, skipped, latency, lag)",
          "new_text": null,
          "old_line_content": "\t\tdoLog(thread, st, agg, skipped, latency, lag);",
          "new_line_content": "\t\tthread->stats.cnt++;",
          "content_same": false
        },
        {
          "line": 5954,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\texit(1);",
          "new_line_content": "\t\t\t\t\t\t\t\t\t  &nxacts))",
          "content_same": false
        },
        {
          "line": 3909,
          "old_api": "accumStats",
          "new_api": null,
          "old_text": "accumStats(&sql_script[st->use_file].stats, skipped, latency, lag)",
          "new_text": null,
          "old_line_content": "\t\taccumStats(&sql_script[st->use_file].stats, skipped, latency, lag);",
          "new_line_content": "\tst->cnt++;",
          "content_same": false
        },
        {
          "line": 5957,
          "old_api": "pg_strdup",
          "new_api": null,
          "old_text": "pg_strdup(optarg)",
          "new_text": null,
          "old_line_content": "\t\t\t\tusername = pg_strdup(optarg);",
          "new_line_content": "\t\t\tcase 'T':",
          "content_same": false
        },
        {
          "line": 3920,
          "old_api": "finishCon",
          "new_api": null,
          "old_text": "finishCon(&state[i])",
          "new_text": null,
          "old_line_content": "\t\tfinishCon(&state[i]);",
          "new_line_content": "/* discard connections */",
          "content_same": false
        },
        {
          "line": 5968,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(optarg, \"list\")",
          "new_text": null,
          "old_line_content": "\t\t\t\tif (strcmp(optarg, \"list\") == 0)",
          "new_line_content": "\t\t\t\tuse_log = true;",
          "content_same": false
        },
        {
          "line": 5970,
          "old_api": "listAvailableScripts",
          "new_api": null,
          "old_text": "listAvailableScripts()",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tlistAvailableScripts();",
          "new_line_content": "\t\t\tcase 'q':",
          "content_same": false
        },
        {
          "line": 5971,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(0)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\texit(0);",
          "new_line_content": "\t\t\t\tinitialization_option_set = true;",
          "content_same": false
        },
        {
          "line": 5973,
          "old_api": "parseScriptWeight",
          "new_api": null,
          "old_text": "parseScriptWeight(optarg, &script)",
          "new_text": null,
          "old_line_content": "\t\t\t\tweight = parseScriptWeight(optarg, &script);",
          "new_line_content": "\t\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 5974,
          "old_api": "findBuiltin",
          "new_api": null,
          "old_text": "findBuiltin(script)",
          "new_text": null,
          "old_line_content": "\t\t\t\tprocess_builtin(findBuiltin(script), weight);",
          "new_line_content": "\t\t\tcase 'b':",
          "content_same": false
        },
        {
          "line": 3929,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr, \"dropping old tables...\\n\")",
          "new_text": null,
          "old_line_content": "\tfprintf(stderr, \"dropping old tables...\\n\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5979,
          "old_api": "findBuiltin",
          "new_api": null,
          "old_text": "findBuiltin(\"select-only\")",
          "new_text": null,
          "old_line_content": "\t\t\t\tprocess_builtin(findBuiltin(\"select-only\"), 1);",
          "new_line_content": "\t\t\t\t}",
          "content_same": false
        },
        {
          "line": 3935,
          "old_api": "executeStatement",
          "new_api": null,
          "old_text": "executeStatement(con, \"drop table if exists \"\n\t\t\t\t\t \"pgbench_accounts, \"\n\t\t\t\t\t \"pgbench_branches, \"\n\t\t\t\t\t \"pgbench_history, \"\n\t\t\t\t\t \"pgbench_tellers\")",
          "new_text": null,
          "old_line_content": "\texecuteStatement(con, \"drop table if exists \"",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 5984,
          "old_api": "findBuiltin",
          "new_api": null,
          "old_text": "findBuiltin(\"simple-update\")",
          "new_text": null,
          "old_line_content": "\t\t\t\tprocess_builtin(findBuiltin(\"simple-update\"), 1);",
          "new_line_content": "\t\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 5989,
          "old_api": "parseScriptWeight",
          "new_api": null,
          "old_text": "parseScriptWeight(optarg, &script)",
          "new_text": null,
          "old_line_content": "\t\t\t\tweight = parseScriptWeight(optarg, &script);",
          "new_line_content": "\t\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 5990,
          "old_api": "process_file",
          "new_api": null,
          "old_text": "process_file(script, weight)",
          "new_text": null,
          "old_line_content": "\t\t\t\tprocess_file(script, weight);",
          "new_line_content": "\t\t\tcase 'N':",
          "content_same": false
        },
        {
          "line": 5999,
          "old_api": "strchr",
          "new_api": null,
          "old_text": "strchr(optarg, '=')",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tif ((p = strchr(optarg, '=')) == NULL || p == optarg || *(p + 1) == '\\0')",
          "new_line_content": "\t\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 6001,
          "old_api": "pg_log_fatal",
          "new_api": null,
          "old_text": "pg_log_fatal(\"invalid variable definition: \\\"%s\\\"\", optarg)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\tpg_log_fatal(\"invalid variable definition: \\\"%s\\\"\", optarg);",
          "new_line_content": "\t\t\t\t{",
          "content_same": false
        },
        {
          "line": 3954,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(partitions > 0)",
          "new_text": null,
          "old_line_content": "\tAssert(partitions > 0);",
          "new_line_content": " */",
          "content_same": false
        },
        {
          "line": 6002,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\texit(1);",
          "new_line_content": "\t\t\t\t\tchar\t   *p;",
          "content_same": false
        },
        {
          "line": 3956,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr, \"creating %d partitions...\\n\", partitions)",
          "new_text": null,
          "old_line_content": "\tfprintf(stderr, \"creating %d partitions...\\n\", partitions);",
          "new_line_content": "createPartitions(PGconn *con)",
          "content_same": false
        },
        {
          "line": 3958,
          "old_api": "initPQExpBuffer",
          "new_api": null,
          "old_text": "initPQExpBuffer(&query)",
          "new_text": null,
          "old_line_content": "\tinitPQExpBuffer(&query);",
          "new_line_content": "\tPQExpBufferData query;",
          "content_same": false
        },
        {
          "line": 6007,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\texit(1);",
          "new_line_content": "\t\t\t\t\t{",
          "content_same": false
        },
        {
          "line": 6012,
          "old_api": "option_parse_int",
          "new_api": null,
          "old_text": "option_parse_int(optarg, \"-F/--fillfactor\", 10, 100,\n\t\t\t\t\t\t\t\t\t  &fillfactor)",
          "new_text": null,
          "old_line_content": "\t\t\t\tif (!option_parse_int(optarg, \"-F/--fillfactor\", 10, 100,",
          "new_line_content": "\t\t\t\t\t*p++ = '\\0';",
          "content_same": false
        },
        {
          "line": 3966,
          "old_api": "printfPQExpBuffer",
          "new_api": null,
          "old_text": "printfPQExpBuffer(&query,\n\t\t\t\t\t\t\t  \"create%s table pgbench_accounts_%d\\n\"\n\t\t\t\t\t\t\t  \"  partition of pgbench_accounts\\n\"\n\t\t\t\t\t\t\t  \"  for values from (\",\n\t\t\t\t\t\t\t  unlogged_tables ? \" unlogged\" : \"\", p)",
          "new_text": null,
          "old_line_content": "\t\t\tprintfPQExpBuffer(&query,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6023,
          "old_api": "pg_log_fatal",
          "new_api": null,
          "old_text": "pg_log_fatal(\"invalid query mode (-M): \\\"%s\\\"\", optarg)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tpg_log_fatal(\"invalid query mode (-M): \\\"%s\\\"\", optarg);",
          "new_line_content": "\t\t\tcase 'M':",
          "content_same": false
        },
        {
          "line": 6024,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\texit(1);",
          "new_line_content": "\t\t\t\tbenchmarking_option_set = true;",
          "content_same": false
        },
        {
          "line": 3979,
          "old_api": "appendPQExpBufferStr",
          "new_api": null,
          "old_text": "appendPQExpBufferStr(&query, \"minvalue\")",
          "new_text": null,
          "old_line_content": "\t\t\t\tappendPQExpBufferStr(&query, \"minvalue\");",
          "new_line_content": "\t\t\t/*",
          "content_same": false
        },
        {
          "line": 3981,
          "old_api": "appendPQExpBuffer",
          "new_api": null,
          "old_text": "appendPQExpBuffer(&query, INT64_FORMAT, (p - 1) * part_size + 1)",
          "new_text": null,
          "old_line_content": "\t\t\t\tappendPQExpBuffer(&query, INT64_FORMAT, (p - 1) * part_size + 1);",
          "new_line_content": "\t\t\t * end to allow any valid value for the primary key.  Although the",
          "content_same": false
        },
        {
          "line": 6029,
          "old_api": "option_parse_int",
          "new_api": null,
          "old_text": "option_parse_int(optarg, \"-P/--progress\", 1, INT_MAX,\n\t\t\t\t\t\t\t\t\t  &progress)",
          "new_text": null,
          "old_line_content": "\t\t\t\tif (!option_parse_int(optarg, \"-P/--progress\", 1, INT_MAX,",
          "new_line_content": "\t\t\t\t{",
          "content_same": false
        },
        {
          "line": 3983,
          "old_api": "appendPQExpBufferStr",
          "new_api": null,
          "old_text": "appendPQExpBufferStr(&query, \") to (\")",
          "new_text": null,
          "old_line_content": "\t\t\tappendPQExpBufferStr(&query, \") to (\");",
          "new_line_content": "\t\t\t * scale, it is more generic and the performance is better.",
          "content_same": false
        },
        {
          "line": 6042,
          "old_api": "pg_log_fatal",
          "new_api": null,
          "old_text": "pg_log_fatal(\"invalid rate limit: \\\"%s\\\"\", optarg)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\tpg_log_fatal(\"invalid rate limit: \\\"%s\\\"\", optarg);",
          "new_line_content": "\t\t\t\t\t/* get a double from the beginning of option value */",
          "content_same": false
        },
        {
          "line": 6051,
          "old_api": "atof",
          "new_api": null,
          "old_text": "atof(optarg)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tdouble\t\tlimit_ms = atof(optarg);",
          "new_line_content": "\t\t\t\t\t}",
          "content_same": false
        },
        {
          "line": 4006,
          "old_api": "appendPQExpBuffer",
          "new_api": null,
          "old_text": "appendPQExpBuffer(&query, \" with (fillfactor=%d)\", fillfactor)",
          "new_text": null,
          "old_line_content": "\t\tappendPQExpBuffer(&query, \" with (fillfactor=%d)\", fillfactor);",
          "new_line_content": "\t\telse\t\t\t\t\t/* cannot get there */",
          "content_same": false
        },
        {
          "line": 6055,
          "old_api": "pg_log_fatal",
          "new_api": null,
          "old_text": "pg_log_fatal(\"invalid latency limit: \\\"%s\\\"\", optarg)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\tpg_log_fatal(\"invalid latency limit: \\\"%s\\\"\", optarg);",
          "new_line_content": "\t\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 4008,
          "old_api": "executeStatement",
          "new_api": null,
          "old_text": "executeStatement(con, query.data)",
          "new_text": null,
          "old_line_content": "\t\texecuteStatement(con, query.data);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6056,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\texit(1);",
          "new_line_content": "\t\t\tcase 'L':",
          "content_same": false
        },
        {
          "line": 4011,
          "old_api": "termPQExpBuffer",
          "new_api": null,
          "old_text": "termPQExpBuffer(&query)",
          "new_text": null,
          "old_line_content": "\ttermPQExpBuffer(&query);",
          "new_line_content": "\t\t * pgbench_accounts.",
          "content_same": false
        },
        {
          "line": 6059,
          "old_api": "int64) (limit_ms * 1000)",
          "new_api": null,
          "old_text": "int64) (limit_ms * 1000)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tlatency_limit = (int64) (limit_ms * 1000);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6068,
          "old_api": "pg_strdup",
          "new_api": null,
          "old_text": "pg_strdup(optarg)",
          "new_text": null,
          "old_line_content": "\t\t\t\ttablespace = pg_strdup(optarg);",
          "new_line_content": "\t\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 6072,
          "old_api": "pg_strdup",
          "new_api": null,
          "old_text": "pg_strdup(optarg)",
          "new_text": null,
          "old_line_content": "\t\t\t\tindex_tablespace = pg_strdup(optarg);",
          "new_line_content": "\t\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 6076,
          "old_api": "atof",
          "new_api": null,
          "old_text": "atof(optarg)",
          "new_text": null,
          "old_line_content": "\t\t\t\tsample_rate = atof(optarg);",
          "new_line_content": "\t\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 6080,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\texit(1);",
          "new_line_content": "\t\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 6085,
          "old_api": "option_parse_int",
          "new_api": null,
          "old_text": "option_parse_int(optarg, \"--aggregate-interval\", 1, INT_MAX,\n\t\t\t\t\t\t\t\t\t  &agg_interval)",
          "new_text": null,
          "old_line_content": "\t\t\t\tif (!option_parse_int(optarg, \"--aggregate-interval\", 1, INT_MAX,",
          "new_line_content": "\t\t\t\t{",
          "content_same": false
        },
        {
          "line": 6095,
          "old_api": "pg_strdup",
          "new_api": null,
          "old_text": "pg_strdup(optarg)",
          "new_text": null,
          "old_line_content": "\t\t\t\tlogfile_prefix = pg_strdup(optarg);",
          "new_line_content": "\t\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 6103,
          "old_api": "set_random_seed",
          "new_api": null,
          "old_text": "set_random_seed(optarg)",
          "new_text": null,
          "old_line_content": "\t\t\t\tif (!set_random_seed(optarg))",
          "new_line_content": "\t\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 6105,
          "old_api": "pg_log_fatal",
          "new_api": null,
          "old_text": "pg_log_fatal(\"error while setting random seed from --random-seed option\")",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tpg_log_fatal(\"error while setting random seed from --random-seed option\");",
          "new_line_content": "\t\t\t\tinitialization_option_set = true;",
          "content_same": false
        },
        {
          "line": 6106,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\texit(1);",
          "new_line_content": "\t\t\t\tforeign_keys = true;",
          "content_same": false
        },
        {
          "line": 6111,
          "old_api": "findBuiltin",
          "new_api": null,
          "old_text": "findBuiltin(optarg)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tconst BuiltinScript *s = findBuiltin(optarg);",
          "new_line_content": "\t\t\t\t{",
          "content_same": false
        },
        {
          "line": 6114,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(0)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\texit(0);",
          "new_line_content": "\t\t\t\t}",
          "content_same": false
        },
        {
          "line": 4067,
          "old_api": "fprintf",
          "new_api": null,
          "old_text": "fprintf(stderr, \"creating tables...\\n\")",
          "new_text": null,
          "old_line_content": "\tfprintf(stderr, \"creating tables...\\n\");",
          "new_line_content": "\t\t\t\"bid int not null,bbalance int,filler char(88)\",",
          "content_same": false
        },
        {
          "line": 4069,
          "old_api": "initPQExpBuffer",
          "new_api": null,
          "old_text": "initPQExpBuffer(&query)",
          "new_text": null,
          "old_line_content": "\tinitPQExpBuffer(&query);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 4071,
          "old_api": "lengthof",
          "new_api": null,
          "old_text": "lengthof(DDLs)",
          "new_text": null,
          "old_line_content": "\tfor (i = 0; i < lengthof(DDLs); i++)",
          "new_line_content": "\tint\t\t\ti;",
          "content_same": false
        },
        {
          "line": 6119,
          "old_api": "option_parse_int",
          "new_api": null,
          "old_text": "option_parse_int(optarg, \"--partitions\", 1, INT_MAX,\n\t\t\t\t\t\t\t\t\t  &partitions)",
          "new_text": null,
          "old_line_content": "\t\t\t\tif (!option_parse_int(optarg, \"--partitions\", 1, INT_MAX,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6125,
          "old_api": "pg_strcasecmp",
          "new_api": null,
          "old_text": "pg_strcasecmp(optarg, \"range\")",
          "new_text": null,
          "old_line_content": "\t\t\t\tif (pg_strcasecmp(optarg, \"range\") == 0)",
          "new_line_content": "\t\t\t\tinitialization_option_set = true;",
          "content_same": false
        },
        {
          "line": 6127,
          "old_api": "pg_strcasecmp",
          "new_api": null,
          "old_text": "pg_strcasecmp(optarg, \"hash\")",
          "new_text": null,
          "old_line_content": "\t\t\t\telse if (pg_strcasecmp(optarg, \"hash\") == 0)",
          "new_line_content": "\t\t\t\t\t\t\t\t\t  &partitions))",
          "content_same": false
        },
        {
          "line": 4082,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(ddl->table, \"pgbench_accounts\")",
          "new_text": null,
          "old_line_content": "\t\tif (partition_method != PART_NONE && strcmp(ddl->table, \"pgbench_accounts\") == 0)",
          "new_line_content": "\t\t/* Construct new create table statement. */",
          "content_same": false
        },
        {
          "line": 6131,
          "old_api": "pg_log_fatal",
          "new_api": null,
          "old_text": "pg_log_fatal(\"invalid partition method, expecting \\\"range\\\" or \\\"hash\\\", got: \\\"%s\\\"\",\n\t\t\t\t\t\t\t\t optarg)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tpg_log_fatal(\"invalid partition method, expecting \\\"range\\\" or \\\"hash\\\", got: \\\"%s\\\"\",",
          "new_line_content": "\t\t\t\tinitialization_option_set = true;",
          "content_same": false
        },
        {
          "line": 6133,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\texit(1);",
          "new_line_content": "\t\t\t\t\tpartition_method = PART_RANGE;",
          "content_same": false
        },
        {
          "line": 4088,
          "old_api": "appendPQExpBuffer",
          "new_api": null,
          "old_text": "appendPQExpBuffer(&query, \" with (fillfactor=%d)\", fillfactor)",
          "new_text": null,
          "old_line_content": "\t\t\tappendPQExpBuffer(&query, \" with (fillfactor=%d)\", fillfactor);",
          "new_line_content": "\t\t/* Partition pgbench_accounts table */",
          "content_same": false
        },
        {
          "line": 6137,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"Try \\\"%s --help\\\" for more information.\\n\")",
          "new_text": null,
          "old_line_content": "\t\t\t\tfprintf(stderr, _(\"Try \\\"%s --help\\\" for more information.\\n\"), progname);",
          "new_line_content": "\t\t\t\t{",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 112,
      "total_additions": 562,
      "total_deletions": 562,
      "total_api_changes": 1236
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 8,
        "api_related_lines": 1236,
        "non_api_lines": 5,
        "non_api_line_numbers": [
          3465,
          3466,
          3468,
          3469,
          3470
        ]
      }
    },
    "api_calls_before": 1178,
    "api_calls_after": 1179,
    "diff_info": {
      "added_lines": 8,
      "removed_lines": 1,
      "total_diff_lines": 21
    }
  }
}
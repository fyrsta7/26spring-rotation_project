{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/postgres/modified_file/5df319f3d55d09fadb4f7e4b58c5b476a3aeceb4",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/postgres/modified_file/5df319f3d55d09fadb4f7e4b58c5b476a3aeceb4/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/postgres/modified_file/5df319f3d55d09fadb4f7e4b58c5b476a3aeceb4/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/postgres/modified_file/5df319f3d55d09fadb4f7e4b58c5b476a3aeceb4/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 3841,
          "old_api": "BufferGetPage",
          "new_api": "START_CRIT_SECTION",
          "old_text": "BufferGetPage(dstBuf)",
          "new_text": "START_CRIT_SECTION()",
          "old_line_content": "\t\tdstPage = BufferGetPage(dstBuf);",
          "new_line_content": "\t\tSTART_CRIT_SECTION();",
          "content_same": false
        },
        {
          "line": 3851,
          "old_api": "log_newpage_buffer",
          "new_api": "END_CRIT_SECTION",
          "old_text": "log_newpage_buffer(dstBuf, true)",
          "new_text": "END_CRIT_SECTION()",
          "old_line_content": "\t\t\tlog_newpage_buffer(dstBuf, true);",
          "new_line_content": "\t\tEND_CRIT_SECTION();",
          "content_same": false
        },
        {
          "line": 3853,
          "old_api": "END_CRIT_SECTION",
          "new_api": "UnlockReleaseBuffer",
          "old_text": "END_CRIT_SECTION()",
          "new_text": "UnlockReleaseBuffer(dstBuf)",
          "old_line_content": "\t\tEND_CRIT_SECTION();",
          "new_line_content": "\t\tUnlockReleaseBuffer(dstBuf);",
          "content_same": false
        },
        {
          "line": 3969,
          "old_api": "BufferDescriptorGetContentLock",
          "new_api": "PinBuffer_Locked",
          "old_text": "BufferDescriptorGetContentLock(bufHdr)",
          "new_text": "PinBuffer_Locked(bufHdr)",
          "old_line_content": "\t\t\tLWLockAcquire(BufferDescriptorGetContentLock(bufHdr), LW_SHARED);",
          "new_line_content": "\t\t\tPinBuffer_Locked(bufHdr);",
          "content_same": false
        },
        {
          "line": 3970,
          "old_api": "FlushBuffer",
          "new_api": "BufferDescriptorGetContentLock",
          "old_text": "FlushBuffer(bufHdr, NULL, IOOBJECT_RELATION, IOCONTEXT_NORMAL)",
          "new_text": "BufferDescriptorGetContentLock(bufHdr)",
          "old_line_content": "\t\t\tFlushBuffer(bufHdr, NULL, IOOBJECT_RELATION, IOCONTEXT_NORMAL);",
          "new_line_content": "\t\t\tLWLockAcquire(BufferDescriptorGetContentLock(bufHdr), LW_SHARED);",
          "content_same": false
        },
        {
          "line": 3971,
          "old_api": "BufferDescriptorGetContentLock",
          "new_api": "FlushBuffer",
          "old_text": "BufferDescriptorGetContentLock(bufHdr)",
          "new_text": "FlushBuffer(bufHdr, NULL, IOOBJECT_RELATION, IOCONTEXT_NORMAL)",
          "old_line_content": "\t\t\tLWLockRelease(BufferDescriptorGetContentLock(bufHdr));",
          "new_line_content": "\t\t\tFlushBuffer(bufHdr, NULL, IOOBJECT_RELATION, IOCONTEXT_NORMAL);",
          "content_same": false
        },
        {
          "line": 3972,
          "old_api": "UnpinBuffer",
          "new_api": "BufferDescriptorGetContentLock",
          "old_text": "UnpinBuffer(bufHdr)",
          "new_text": "BufferDescriptorGetContentLock(bufHdr)",
          "old_line_content": "\t\t\tUnpinBuffer(bufHdr);",
          "new_line_content": "\t\t\tLWLockRelease(BufferDescriptorGetContentLock(bufHdr));",
          "content_same": false
        },
        {
          "line": 4007,
          "old_api": "elog",
          "new_api": "BufferIsValid",
          "old_text": "elog(ERROR, \"bad buffer ID: %d\", buffer)",
          "new_text": "BufferIsValid(buffer)",
          "old_line_content": "\t\telog(ERROR, \"bad buffer ID: %d\", buffer);",
          "new_line_content": "\tif (!BufferIsValid(buffer))",
          "content_same": false
        },
        {
          "line": 4030,
          "old_api": "ReleaseBuffer",
          "new_api": "LockBuffer",
          "old_text": "ReleaseBuffer(buffer)",
          "new_text": "LockBuffer(buffer, BUFFER_LOCK_UNLOCK)",
          "old_line_content": "\tReleaseBuffer(buffer);",
          "new_line_content": "\tLockBuffer(buffer, BUFFER_LOCK_UNLOCK);",
          "content_same": false
        },
        {
          "line": 4045,
          "old_api": "ResourceOwnerEnlargeBuffers",
          "new_api": "BufferIsPinned",
          "old_text": "ResourceOwnerEnlargeBuffers(CurrentResourceOwner)",
          "new_text": "BufferIsPinned(buffer)",
          "old_line_content": "\tResourceOwnerEnlargeBuffers(CurrentResourceOwner);",
          "new_line_content": "\tAssert(BufferIsPinned(buffer));",
          "content_same": false
        },
        {
          "line": 4046,
          "old_api": "BufferIsLocal",
          "new_api": "ResourceOwnerEnlargeBuffers",
          "old_text": "BufferIsLocal(buffer)",
          "new_text": "ResourceOwnerEnlargeBuffers(CurrentResourceOwner)",
          "old_line_content": "\tif (BufferIsLocal(buffer))",
          "new_line_content": "\tResourceOwnerEnlargeBuffers(CurrentResourceOwner);",
          "content_same": false
        },
        {
          "line": 4053,
          "old_api": "Assert",
          "new_api": "GetPrivateRefCountEntry",
          "old_text": "Assert(ref != NULL)",
          "new_text": "GetPrivateRefCountEntry(buffer, true)",
          "old_line_content": "\t\tAssert(ref != NULL);",
          "new_line_content": "\t\tref = GetPrivateRefCountEntry(buffer, true);",
          "content_same": false
        },
        {
          "line": 4080,
          "old_api": "elog",
          "new_api": "BufferIsValid",
          "old_text": "elog(ERROR, \"bad buffer ID: %d\", buffer)",
          "new_text": "BufferIsValid(buffer)",
          "old_line_content": "\t\telog(ERROR, \"bad buffer ID: %d\", buffer);",
          "new_line_content": "\tif (!BufferIsValid(buffer))",
          "content_same": false
        },
        {
          "line": 4123,
          "old_api": "pg_atomic_read_u32",
          "new_api": "XLogHintBitIsNeeded",
          "old_text": "pg_atomic_read_u32(&bufHdr->state)",
          "new_text": "XLogHintBitIsNeeded()",
          "old_line_content": "\t\t\t(pg_atomic_read_u32(&bufHdr->state) & BM_PERMANENT))",
          "new_line_content": "\t\tif (XLogHintBitIsNeeded() &&",
          "content_same": false
        },
        {
          "line": 4134,
          "old_api": "BufTagGetRelFileLocator",
          "new_api": "RecoveryInProgress",
          "old_text": "BufTagGetRelFileLocator(&bufHdr->tag)",
          "new_text": "RecoveryInProgress()",
          "old_line_content": "\t\t\t\tRelFileLocatorSkippingWAL(BufTagGetRelFileLocator(&bufHdr->tag)))",
          "new_line_content": "\t\t\tif (RecoveryInProgress() ||",
          "content_same": false
        },
        {
          "line": 4188,
          "old_api": "PageSetLSN",
          "new_api": "XLogRecPtrIsInvalid",
          "old_text": "PageSetLSN(page, lsn)",
          "new_text": "XLogRecPtrIsInvalid(lsn)",
          "old_line_content": "\t\t\t\tPageSetLSN(page, lsn);",
          "new_line_content": "\t\t\tif (!XLogRecPtrIsInvalid(lsn))",
          "content_same": false
        },
        {
          "line": 4250,
          "old_api": "BufferIsLocal",
          "new_api": "BufferIsPinned",
          "old_text": "BufferIsLocal(buffer)",
          "new_text": "BufferIsPinned(buffer)",
          "old_line_content": "\tif (BufferIsLocal(buffer))",
          "new_line_content": "\tAssert(BufferIsPinned(buffer));",
          "content_same": false
        },
        {
          "line": 4276,
          "old_api": "BufferIsLocal",
          "new_api": "BufferIsPinned",
          "old_text": "BufferIsLocal(buffer)",
          "new_text": "BufferIsPinned(buffer)",
          "old_line_content": "\tif (BufferIsLocal(buffer))",
          "new_line_content": "\tAssert(BufferIsPinned(buffer));",
          "content_same": false
        },
        {
          "line": 4310,
          "old_api": "Assert",
          "new_api": "BufferIsPinned",
          "old_text": "Assert(PinCountWaitBuf == NULL)",
          "new_text": "BufferIsPinned(buffer)",
          "old_line_content": "\tAssert(PinCountWaitBuf == NULL);",
          "new_line_content": "\tAssert(BufferIsPinned(buffer));",
          "content_same": false
        },
        {
          "line": 4324,
          "old_api": "elog",
          "new_api": "GetPrivateRefCount",
          "old_text": "elog(ERROR, \"incorrect local pin count: %d\",\n\t\t\t GetPrivateRefCount(buffer))",
          "new_text": "GetPrivateRefCount(buffer)",
          "old_line_content": "\t\telog(ERROR, \"incorrect local pin count: %d\",",
          "new_line_content": "\tif (GetPrivateRefCount(buffer) != 1)",
          "content_same": false
        },
        {
          "line": 4325,
          "old_api": "GetPrivateRefCount",
          "new_api": "elog",
          "old_text": "GetPrivateRefCount(buffer)",
          "new_text": "elog(ERROR, \"incorrect local pin count: %d\",\n\t\t\t GetPrivateRefCount(buffer))",
          "old_line_content": "\t\t\t GetPrivateRefCount(buffer));",
          "new_line_content": "\t\telog(ERROR, \"incorrect local pin count: %d\",",
          "content_same": false
        },
        {
          "line": 4335,
          "old_api": "LockBufHdr",
          "new_api": "LockBuffer",
          "old_text": "LockBufHdr(bufHdr)",
          "new_text": "LockBuffer(buffer, BUFFER_LOCK_EXCLUSIVE)",
          "old_line_content": "\t\tbuf_state = LockBufHdr(bufHdr);",
          "new_line_content": "\t\tLockBuffer(buffer, BUFFER_LOCK_EXCLUSIVE);",
          "content_same": false
        },
        {
          "line": 4350,
          "old_api": "GetCurrentTimestamp",
          "new_api": "LogRecoveryConflict",
          "old_text": "GetCurrentTimestamp()",
          "new_text": "LogRecoveryConflict(PROCSIG_RECOVERY_CONFLICT_BUFFERPIN,\n\t\t\t\t\t\t\t\t\twaitStart, GetCurrentTimestamp(),\n\t\t\t\t\t\t\t\t\tNULL, false)",
          "old_line_content": "\t\t\t\t\t\t\t\t\twaitStart, GetCurrentTimestamp(),",
          "new_line_content": "\t\t\t\tLogRecoveryConflict(PROCSIG_RECOVERY_CONFLICT_BUFFERPIN,",
          "content_same": false
        },
        {
          "line": 4365,
          "old_api": "LockBuffer",
          "new_api": "UnlockBufHdr",
          "old_text": "LockBuffer(buffer, BUFFER_LOCK_UNLOCK)",
          "new_text": "UnlockBufHdr(bufHdr, buf_state)",
          "old_line_content": "\t\t\tLockBuffer(buffer, BUFFER_LOCK_UNLOCK);",
          "new_line_content": "\t\t\tUnlockBufHdr(bufHdr, buf_state);",
          "content_same": false
        },
        {
          "line": 4366,
          "old_api": "elog",
          "new_api": "LockBuffer",
          "old_text": "elog(ERROR, \"multiple backends attempting to wait for pincount 1\")",
          "new_text": "LockBuffer(buffer, BUFFER_LOCK_UNLOCK)",
          "old_line_content": "\t\t\telog(ERROR, \"multiple backends attempting to wait for pincount 1\");",
          "new_line_content": "\t\t\tLockBuffer(buffer, BUFFER_LOCK_UNLOCK);",
          "content_same": false
        },
        {
          "line": 4372,
          "old_api": "LockBuffer",
          "new_api": "UnlockBufHdr",
          "old_text": "LockBuffer(buffer, BUFFER_LOCK_UNLOCK)",
          "new_text": "UnlockBufHdr(bufHdr, buf_state)",
          "old_line_content": "\t\tLockBuffer(buffer, BUFFER_LOCK_UNLOCK);",
          "new_line_content": "\t\tUnlockBufHdr(bufHdr, buf_state);",
          "content_same": false
        },
        {
          "line": 4493,
          "old_api": "Assert",
          "new_api": "GetPrivateRefCount",
          "old_text": "Assert(refcount)",
          "new_text": "GetPrivateRefCount(buffer)",
          "old_line_content": "\tAssert(refcount);",
          "new_line_content": "\trefcount = GetPrivateRefCount(buffer);",
          "content_same": false
        },
        {
          "line": 4502,
          "old_api": "LockBufHdr",
          "new_api": "GetBufferDescriptor",
          "old_text": "LockBufHdr(bufHdr)",
          "new_text": "GetBufferDescriptor(buffer - 1)",
          "old_line_content": "\tbuf_state = LockBufHdr(bufHdr);",
          "new_line_content": "\tbufHdr = GetBufferDescriptor(buffer - 1);",
          "content_same": false
        },
        {
          "line": 4503,
          "old_api": "BUF_STATE_GET_REFCOUNT",
          "new_api": "LockBufHdr",
          "old_text": "BUF_STATE_GET_REFCOUNT(buf_state)",
          "new_text": "LockBufHdr(bufHdr)",
          "old_line_content": "\trefcount = BUF_STATE_GET_REFCOUNT(buf_state);",
          "new_line_content": "\tbuf_state = LockBufHdr(bufHdr);",
          "content_same": false
        },
        {
          "line": 4515,
          "old_api": "LockBuffer",
          "new_api": "UnlockBufHdr",
          "old_text": "LockBuffer(buffer, BUFFER_LOCK_UNLOCK)",
          "new_text": "UnlockBufHdr(bufHdr, buf_state)",
          "old_line_content": "\tLockBuffer(buffer, BUFFER_LOCK_UNLOCK);",
          "new_line_content": "\tUnlockBufHdr(bufHdr, buf_state);",
          "content_same": false
        },
        {
          "line": 4597,
          "old_api": "UnlockBufHdr",
          "new_api": "LockBufHdr",
          "old_text": "UnlockBufHdr(buf, buf_state)",
          "new_text": "LockBufHdr(buf)",
          "old_line_content": "\t\tUnlockBufHdr(buf, buf_state);",
          "new_line_content": "\t\tbuf_state = LockBufHdr(buf);",
          "content_same": false
        },
        {
          "line": 4638,
          "old_api": "WaitIO",
          "new_api": "UnlockBufHdr",
          "old_text": "WaitIO(buf)",
          "new_text": "UnlockBufHdr(buf, buf_state)",
          "old_line_content": "\t\tWaitIO(buf);",
          "new_line_content": "\t\tUnlockBufHdr(buf, buf_state);",
          "content_same": false
        },
        {
          "line": 4717,
          "old_api": "Assert",
          "new_api": "LockBufHdr",
          "old_text": "Assert(buf_state & BM_IO_IN_PROGRESS)",
          "new_text": "LockBufHdr(buf)",
          "old_line_content": "\t\tAssert(buf_state & BM_IO_IN_PROGRESS);",
          "new_line_content": "\t\tbuf_state = LockBufHdr(buf);",
          "content_same": false
        },
        {
          "line": 4724,
          "old_api": "UnlockBufHdr",
          "new_api": "Assert",
          "old_text": "UnlockBufHdr(buf, buf_state)",
          "new_text": "Assert(!(buf_state & BM_VALID))",
          "old_line_content": "\t\t\tUnlockBufHdr(buf, buf_state);",
          "new_line_content": "\t\t\tAssert(!(buf_state & BM_VALID));",
          "content_same": false
        },
        {
          "line": 4729,
          "old_api": "UnlockBufHdr",
          "new_api": "Assert",
          "old_text": "UnlockBufHdr(buf, buf_state)",
          "new_text": "Assert(buf_state & BM_DIRTY)",
          "old_line_content": "\t\t\tUnlockBufHdr(buf, buf_state);",
          "new_line_content": "\t\t\tAssert(buf_state & BM_DIRTY);",
          "content_same": false
        },
        {
          "line": 4737,
          "old_api": "BufTagGetForkNum",
          "new_api": "BufTagGetRelFileLocator",
          "old_text": "BufTagGetForkNum(&buf->tag)",
          "new_text": "BufTagGetRelFileLocator(&buf->tag)",
          "old_line_content": "\t\t\t\t\t\t\t\t   BufTagGetForkNum(&buf->tag));",
          "new_line_content": "\t\t\t\tpath = relpathperm(BufTagGetRelFileLocator(&buf->tag),",
          "content_same": false
        },
        {
          "line": 4738,
          "old_api": "ereport",
          "new_api": "BufTagGetForkNum",
          "old_text": "ereport(WARNING,\n\t\t\t\t\t\t(errcode(ERRCODE_IO_ERROR),\n\t\t\t\t\t\t errmsg(\"could not write block %u of %s\",\n\t\t\t\t\t\t\t\tbuf->tag.blockNum, path),\n\t\t\t\t\t\t errdetail(\"Multiple failures --- write error might be permanent.\")))",
          "new_text": "BufTagGetForkNum(&buf->tag)",
          "old_line_content": "\t\t\t\tereport(WARNING,",
          "new_line_content": "\t\t\t\t\t\t\t\t   BufTagGetForkNum(&buf->tag));",
          "content_same": false
        },
        {
          "line": 4739,
          "old_api": "errcode",
          "new_api": "ereport",
          "old_text": "errcode(ERRCODE_IO_ERROR)",
          "new_text": "ereport(WARNING,\n\t\t\t\t\t\t(errcode(ERRCODE_IO_ERROR),\n\t\t\t\t\t\t errmsg(\"could not write block %u of %s\",\n\t\t\t\t\t\t\t\tbuf->tag.blockNum, path),\n\t\t\t\t\t\t errdetail(\"Multiple failures --- write error might be permanent.\")))",
          "old_line_content": "\t\t\t\t\t\t(errcode(ERRCODE_IO_ERROR),",
          "new_line_content": "\t\t\t\tereport(WARNING,",
          "content_same": false
        },
        {
          "line": 4740,
          "old_api": "errmsg",
          "new_api": "errcode",
          "old_text": "errmsg(\"could not write block %u of %s\",\n\t\t\t\t\t\t\t\tbuf->tag.blockNum, path)",
          "new_text": "errcode(ERRCODE_IO_ERROR)",
          "old_line_content": "\t\t\t\t\t\t errmsg(\"could not write block %u of %s\",",
          "new_line_content": "\t\t\t\t\t\t(errcode(ERRCODE_IO_ERROR),",
          "content_same": false
        },
        {
          "line": 4743,
          "old_api": "pfree",
          "new_api": "errdetail",
          "old_text": "pfree(path)",
          "new_text": "errdetail(\"Multiple failures --- write error might be permanent.\")",
          "old_line_content": "\t\t\t\tpfree(path);",
          "new_line_content": "\t\t\t\t\t\t errdetail(\"Multiple failures --- write error might be permanent.\")));",
          "content_same": false
        },
        {
          "line": 4762,
          "old_api": "BufTagGetForkNum",
          "new_api": "BufTagGetRelFileLocator",
          "old_text": "BufTagGetForkNum(&bufHdr->tag)",
          "new_text": "BufTagGetRelFileLocator(&bufHdr->tag)",
          "old_line_content": "\t\t\t\t\t\t\t\t\t   BufTagGetForkNum(&bufHdr->tag));",
          "new_line_content": "\t\tchar\t   *path = relpathperm(BufTagGetRelFileLocator(&bufHdr->tag),",
          "content_same": false
        },
        {
          "line": 4861,
          "old_api": "pg_atomic_read_u32",
          "new_api": "perform_spin_delay",
          "old_text": "pg_atomic_read_u32(&buf->state)",
          "new_text": "perform_spin_delay(&delayStatus)",
          "old_line_content": "\t\tbuf_state = pg_atomic_read_u32(&buf->state);",
          "new_line_content": "\t\tperform_spin_delay(&delayStatus);",
          "content_same": false
        },
        {
          "line": 5057,
          "old_api": "BufTagGetRelFileLocator",
          "new_api": "RelFileLocatorEquals",
          "old_text": "BufTagGetRelFileLocator(&next->tag)",
          "new_text": "RelFileLocatorEquals(currlocator,\n\t\t\t\t\t\t\t\t\t  BufTagGetRelFileLocator(&next->tag))",
          "old_line_content": "\t\t\t\t\t\t\t\t\t  BufTagGetRelFileLocator(&next->tag)) ||",
          "new_line_content": "\t\t\tif (!RelFileLocatorEquals(currlocator,",
          "content_same": false
        },
        {
          "line": 5058,
          "old_api": "BufTagGetForkNum",
          "new_api": "BufTagGetRelFileLocator",
          "old_text": "BufTagGetForkNum(&next->tag)",
          "new_text": "BufTagGetRelFileLocator(&next->tag)",
          "old_line_content": "\t\t\t\tBufTagGetForkNum(&cur->tag) != BufTagGetForkNum(&next->tag))",
          "new_line_content": "\t\t\t\t\t\t\t\t\t  BufTagGetRelFileLocator(&next->tag)) ||",
          "content_same": false
        },
        {
          "line": 5077,
          "old_api": "BufTagGetForkNum",
          "new_api": "smgropen",
          "old_text": "BufTagGetForkNum(&tag)",
          "new_text": "smgropen(currlocator, InvalidBackendId)",
          "old_line_content": "\t\tsmgrwriteback(reln, BufTagGetForkNum(&tag), tag.blockNum, nblocks);",
          "new_line_content": "\t\treln = smgropen(currlocator, InvalidBackendId);",
          "content_same": false
        },
        {
          "line": 5094,
          "old_api": "GetOldSnapshotThresholdTimestamp",
          "new_api": "RelationAllowsEarlyPruning",
          "old_text": "GetOldSnapshotThresholdTimestamp()",
          "new_text": "RelationAllowsEarlyPruning(relation)",
          "old_line_content": "\t\t&& (snapshot)->whenTaken < GetOldSnapshotThresholdTimestamp())",
          "new_line_content": "\tif (RelationAllowsEarlyPruning(relation)",
          "content_same": false
        },
        {
          "line": 5095,
          "old_api": "ereport",
          "new_api": "GetOldSnapshotThresholdTimestamp",
          "old_text": "ereport(ERROR,\n\t\t\t\t(errcode(ERRCODE_SNAPSHOT_TOO_OLD),\n\t\t\t\t errmsg(\"snapshot too old\")))",
          "new_text": "GetOldSnapshotThresholdTimestamp()",
          "old_line_content": "\t\tereport(ERROR,",
          "new_line_content": "\t\t&& (snapshot)->whenTaken < GetOldSnapshotThresholdTimestamp())",
          "content_same": false
        },
        {
          "line": 5096,
          "old_api": "errcode",
          "new_api": "ereport",
          "old_text": "errcode(ERRCODE_SNAPSHOT_TOO_OLD)",
          "new_text": "ereport(ERROR,\n\t\t\t\t(errcode(ERRCODE_SNAPSHOT_TOO_OLD),\n\t\t\t\t errmsg(\"snapshot too old\")))",
          "old_line_content": "\t\t\t\t(errcode(ERRCODE_SNAPSHOT_TOO_OLD),",
          "new_line_content": "\t\tereport(ERROR,",
          "content_same": false
        },
        {
          "line": 5097,
          "old_api": "errmsg",
          "new_api": "errcode",
          "old_text": "errmsg(\"snapshot too old\")",
          "new_text": "errcode(ERRCODE_SNAPSHOT_TOO_OLD)",
          "old_line_content": "\t\t\t\t errmsg(\"snapshot too old\")));",
          "new_line_content": "\t\t\t\t(errcode(ERRCODE_SNAPSHOT_TOO_OLD),",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 4106,
          "old_api": null,
          "new_api": "pg_atomic_read_u32",
          "old_text": null,
          "new_text": "pg_atomic_read_u32(&bufHdr->state)",
          "old_line_content": "\t\t(BM_DIRTY | BM_JUST_DIRTIED))",
          "new_line_content": "\tif ((pg_atomic_read_u32(&bufHdr->state) & (BM_DIRTY | BM_JUST_DIRTIED)) !=",
          "content_same": false
        },
        {
          "line": 4630,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(!InProgressBuf)",
          "old_line_content": "",
          "new_line_content": "\tAssert(!InProgressBuf);",
          "content_same": false
        },
        {
          "line": 4634,
          "old_api": null,
          "new_api": "LockBufHdr",
          "old_text": null,
          "new_text": "LockBufHdr(buf)",
          "old_line_content": "",
          "new_line_content": "\t\tbuf_state = LockBufHdr(buf);",
          "content_same": false
        },
        {
          "line": 4124,
          "old_api": null,
          "new_api": "pg_atomic_read_u32",
          "old_text": null,
          "new_text": "pg_atomic_read_u32(&bufHdr->state)",
          "old_line_content": "\t\t{",
          "new_line_content": "\t\t\t(pg_atomic_read_u32(&bufHdr->state) & BM_PERMANENT))",
          "content_same": false
        },
        {
          "line": 4639,
          "old_api": null,
          "new_api": "WaitIO",
          "old_text": null,
          "new_text": "WaitIO(buf)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tWaitIO(buf);",
          "content_same": false
        },
        {
          "line": 4135,
          "old_api": null,
          "new_api": "BufTagGetRelFileLocator",
          "old_text": null,
          "new_text": "BufTagGetRelFileLocator(&bufHdr->tag)",
          "old_line_content": "\t\t\t\treturn;",
          "new_line_content": "\t\t\t\tRelFileLocatorSkippingWAL(BufTagGetRelFileLocator(&bufHdr->tag)))",
          "content_same": false
        },
        {
          "line": 4647,
          "old_api": null,
          "new_api": "UnlockBufHdr",
          "old_text": null,
          "new_text": "UnlockBufHdr(buf, buf_state)",
          "old_line_content": "\t\treturn false;",
          "new_line_content": "\t\tUnlockBufHdr(buf, buf_state);",
          "content_same": false
        },
        {
          "line": 4652,
          "old_api": null,
          "new_api": "UnlockBufHdr",
          "old_text": null,
          "new_text": "UnlockBufHdr(buf, buf_state)",
          "old_line_content": "",
          "new_line_content": "\tUnlockBufHdr(buf, buf_state);",
          "content_same": false
        },
        {
          "line": 4161,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert((MyProc->delayChkptFlags & DELAY_CHKPT_START) == 0)",
          "old_line_content": "\t\t\tMyProc->delayChkptFlags |= DELAY_CHKPT_START;",
          "new_line_content": "\t\t\tAssert((MyProc->delayChkptFlags & DELAY_CHKPT_START) == 0);",
          "content_same": false
        },
        {
          "line": 4164,
          "old_api": null,
          "new_api": "XLogSaveBufferForHint",
          "old_text": null,
          "new_text": "XLogSaveBufferForHint(buffer, buffer_std)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tlsn = XLogSaveBufferForHint(buffer, buffer_std);",
          "content_same": false
        },
        {
          "line": 4167,
          "old_api": null,
          "new_api": "LockBufHdr",
          "old_text": null,
          "new_text": "LockBufHdr(bufHdr)",
          "old_line_content": "",
          "new_line_content": "\t\tbuf_state = LockBufHdr(bufHdr);",
          "content_same": false
        },
        {
          "line": 4169,
          "old_api": null,
          "new_api": "BUF_STATE_GET_REFCOUNT",
          "old_text": null,
          "new_text": "BUF_STATE_GET_REFCOUNT(buf_state)",
          "old_line_content": "",
          "new_line_content": "\t\tAssert(BUF_STATE_GET_REFCOUNT(buf_state) > 0);",
          "content_same": false
        },
        {
          "line": 4681,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(buf == InProgressBuf)",
          "old_line_content": "",
          "new_line_content": "\tAssert(buf == InProgressBuf);",
          "content_same": false
        },
        {
          "line": 4683,
          "old_api": null,
          "new_api": "LockBufHdr",
          "old_text": null,
          "new_text": "LockBufHdr(buf)",
          "old_line_content": "",
          "new_line_content": "\tbuf_state = LockBufHdr(buf);",
          "content_same": false
        },
        {
          "line": 4685,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(buf_state & BM_IO_IN_PROGRESS)",
          "old_line_content": "",
          "new_line_content": "\tAssert(buf_state & BM_IO_IN_PROGRESS);",
          "content_same": false
        },
        {
          "line": 4692,
          "old_api": null,
          "new_api": "UnlockBufHdr",
          "old_text": null,
          "new_text": "UnlockBufHdr(buf, buf_state)",
          "old_line_content": "",
          "new_line_content": "\tUnlockBufHdr(buf, buf_state);",
          "content_same": false
        },
        {
          "line": 4696,
          "old_api": null,
          "new_api": "BufferDescriptorGetIOCV",
          "old_text": null,
          "new_text": "BufferDescriptorGetIOCV(buf)",
          "old_line_content": "}",
          "new_line_content": "\tConditionVariableBroadcast(BufferDescriptorGetIOCV(buf));",
          "content_same": false
        },
        {
          "line": 4189,
          "old_api": null,
          "new_api": "PageSetLSN",
          "old_text": null,
          "new_text": "PageSetLSN(page, lsn)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\t\tPageSetLSN(page, lsn);",
          "content_same": false
        },
        {
          "line": 4193,
          "old_api": null,
          "new_api": "UnlockBufHdr",
          "old_text": null,
          "new_text": "UnlockBufHdr(bufHdr, buf_state)",
          "old_line_content": "",
          "new_line_content": "\t\tUnlockBufHdr(bufHdr, buf_state);",
          "content_same": false
        },
        {
          "line": 4718,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(buf_state & BM_IO_IN_PROGRESS)",
          "old_line_content": "\t\tif (IsForInput)",
          "new_line_content": "\t\tAssert(buf_state & BM_IO_IN_PROGRESS);",
          "content_same": false
        },
        {
          "line": 4721,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(!(buf_state & BM_DIRTY))",
          "old_line_content": "",
          "new_line_content": "\t\t\tAssert(!(buf_state & BM_DIRTY));",
          "content_same": false
        },
        {
          "line": 4725,
          "old_api": null,
          "new_api": "UnlockBufHdr",
          "old_text": null,
          "new_text": "UnlockBufHdr(buf, buf_state)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tUnlockBufHdr(buf, buf_state);",
          "content_same": false
        },
        {
          "line": 4730,
          "old_api": null,
          "new_api": "UnlockBufHdr",
          "old_text": null,
          "new_text": "UnlockBufHdr(buf, buf_state)",
          "old_line_content": "\t\t\t/* Issue notice if this is not the first failure... */",
          "new_line_content": "\t\t\tUnlockBufHdr(buf, buf_state);",
          "content_same": false
        },
        {
          "line": 4226,
          "old_api": null,
          "new_api": "LockBufHdr",
          "old_text": null,
          "new_text": "LockBufHdr(buf)",
          "old_line_content": "",
          "new_line_content": "\t\tbuf_state = LockBufHdr(buf);",
          "content_same": false
        },
        {
          "line": 4741,
          "old_api": null,
          "new_api": "errmsg",
          "old_text": null,
          "new_text": "errmsg(\"could not write block %u of %s\",\n\t\t\t\t\t\t\t\tbuf->tag.blockNum, path)",
          "old_line_content": "\t\t\t\t\t\t\t\tbuf->tag.blockNum, path),",
          "new_line_content": "\t\t\t\t\t\t errmsg(\"could not write block %u of %s\",",
          "content_same": false
        },
        {
          "line": 4744,
          "old_api": null,
          "new_api": "pfree",
          "old_text": null,
          "new_text": "pfree(path)",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\t\tpfree(path);",
          "content_same": false
        },
        {
          "line": 4747,
          "old_api": null,
          "new_api": "TerminateBufferIO",
          "old_text": null,
          "new_text": "TerminateBufferIO(buf, false, BM_IO_ERROR)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tTerminateBufferIO(buf, false, BM_IO_ERROR);",
          "content_same": false
        },
        {
          "line": 4236,
          "old_api": null,
          "new_api": "UnlockBufHdr",
          "old_text": null,
          "new_text": "UnlockBufHdr(buf, buf_state)",
          "old_line_content": "",
          "new_line_content": "\t\tUnlockBufHdr(buf, buf_state);",
          "content_same": false
        },
        {
          "line": 4251,
          "old_api": null,
          "new_api": "BufferIsLocal",
          "old_text": null,
          "new_text": "BufferIsLocal(buffer)",
          "old_line_content": "\t\treturn;\t\t\t\t\t/* local buffers need no lock */",
          "new_line_content": "\tif (BufferIsLocal(buffer))",
          "content_same": false
        },
        {
          "line": 4763,
          "old_api": null,
          "new_api": "BufTagGetForkNum",
          "old_text": null,
          "new_text": "BufTagGetForkNum(&bufHdr->tag)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t\t\t\t\t\t   BufTagGetForkNum(&bufHdr->tag));",
          "content_same": false
        },
        {
          "line": 4765,
          "old_api": null,
          "new_api": "errcontext",
          "old_text": null,
          "new_text": "errcontext(\"writing block %u of relation %s\",\n\t\t\t\t   bufHdr->tag.blockNum, path)",
          "old_line_content": "\t\t\t\t   bufHdr->tag.blockNum, path);",
          "new_line_content": "\t\terrcontext(\"writing block %u of relation %s\",",
          "content_same": false
        },
        {
          "line": 4254,
          "old_api": null,
          "new_api": "GetBufferDescriptor",
          "old_text": null,
          "new_text": "GetBufferDescriptor(buffer - 1)",
          "old_line_content": "",
          "new_line_content": "\tbuf = GetBufferDescriptor(buffer - 1);",
          "content_same": false
        },
        {
          "line": 4767,
          "old_api": null,
          "new_api": "pfree",
          "old_text": null,
          "new_text": "pfree(path)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tpfree(path);",
          "content_same": false
        },
        {
          "line": 4257,
          "old_api": null,
          "new_api": "BufferDescriptorGetContentLock",
          "old_text": null,
          "new_text": "BufferDescriptorGetContentLock(buf)",
          "old_line_content": "\telse if (mode == BUFFER_LOCK_SHARE)",
          "new_line_content": "\t\tLWLockRelease(BufferDescriptorGetContentLock(buf));",
          "content_same": false
        },
        {
          "line": 4259,
          "old_api": null,
          "new_api": "BufferDescriptorGetContentLock",
          "old_text": null,
          "new_text": "BufferDescriptorGetContentLock(buf)",
          "old_line_content": "\telse if (mode == BUFFER_LOCK_EXCLUSIVE)",
          "new_line_content": "\t\tLWLockAcquire(BufferDescriptorGetContentLock(buf), LW_SHARED);",
          "content_same": false
        },
        {
          "line": 4261,
          "old_api": null,
          "new_api": "BufferDescriptorGetContentLock",
          "old_text": null,
          "new_text": "BufferDescriptorGetContentLock(buf)",
          "old_line_content": "\telse",
          "new_line_content": "\t\tLWLockAcquire(BufferDescriptorGetContentLock(buf), LW_EXCLUSIVE);",
          "content_same": false
        },
        {
          "line": 4263,
          "old_api": null,
          "new_api": "elog",
          "old_text": null,
          "new_text": "elog(ERROR, \"unrecognized buffer lock mode: %d\", mode)",
          "old_line_content": "}",
          "new_line_content": "\t\telog(ERROR, \"unrecognized buffer lock mode: %d\", mode);",
          "content_same": false
        },
        {
          "line": 4781,
          "old_api": null,
          "new_api": "BufTagGetRelFileLocator",
          "old_text": null,
          "new_text": "BufTagGetRelFileLocator(&bufHdr->tag)",
          "old_line_content": "\t\t\t\t\t\t\t\t\t\t  MyBackendId,",
          "new_line_content": "\t\tchar\t   *path = relpathbackend(BufTagGetRelFileLocator(&bufHdr->tag),",
          "content_same": false
        },
        {
          "line": 4783,
          "old_api": null,
          "new_api": "BufTagGetForkNum",
          "old_text": null,
          "new_text": "BufTagGetForkNum(&bufHdr->tag)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t\t\t\t\t\t\t  BufTagGetForkNum(&bufHdr->tag));",
          "content_same": false
        },
        {
          "line": 4785,
          "old_api": null,
          "new_api": "errcontext",
          "old_text": null,
          "new_text": "errcontext(\"writing block %u of relation %s\",\n\t\t\t\t   bufHdr->tag.blockNum, path)",
          "old_line_content": "\t\t\t\t   bufHdr->tag.blockNum, path);",
          "new_line_content": "\t\terrcontext(\"writing block %u of relation %s\",",
          "content_same": false
        },
        {
          "line": 4787,
          "old_api": null,
          "new_api": "pfree",
          "old_text": null,
          "new_text": "pfree(path)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tpfree(path);",
          "content_same": false
        },
        {
          "line": 4277,
          "old_api": null,
          "new_api": "BufferIsLocal",
          "old_text": null,
          "new_text": "BufferIsLocal(buffer)",
          "old_line_content": "\t\treturn true;\t\t\t/* act as though we got it */",
          "new_line_content": "\tif (BufferIsLocal(buffer))",
          "content_same": false
        },
        {
          "line": 4280,
          "old_api": null,
          "new_api": "GetBufferDescriptor",
          "old_text": null,
          "new_text": "GetBufferDescriptor(buffer - 1)",
          "old_line_content": "",
          "new_line_content": "\tbuf = GetBufferDescriptor(buffer - 1);",
          "content_same": false
        },
        {
          "line": 4282,
          "old_api": null,
          "new_api": "BufferDescriptorGetContentLock",
          "old_text": null,
          "new_text": "BufferDescriptorGetContentLock(buf)",
          "old_line_content": "\t\t\t\t\t\t\t\t\tLW_EXCLUSIVE);",
          "new_line_content": "\treturn LWLockConditionalAcquire(BufferDescriptorGetContentLock(buf),",
          "content_same": false
        },
        {
          "line": 4311,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(PinCountWaitBuf == NULL)",
          "old_line_content": "",
          "new_line_content": "\tAssert(PinCountWaitBuf == NULL);",
          "content_same": false
        },
        {
          "line": 4313,
          "old_api": null,
          "new_api": "BufferIsLocal",
          "old_text": null,
          "new_text": "BufferIsLocal(buffer)",
          "old_line_content": "\t{",
          "new_line_content": "\tif (BufferIsLocal(buffer))",
          "content_same": false
        },
        {
          "line": 4827,
          "old_api": null,
          "new_api": "init_local_spin_delay",
          "old_text": null,
          "new_text": "init_local_spin_delay(&delayStatus)",
          "old_line_content": "",
          "new_line_content": "\tinit_local_spin_delay(&delayStatus);",
          "content_same": false
        },
        {
          "line": 4317,
          "old_api": null,
          "new_api": "elog",
          "old_text": null,
          "new_text": "elog(ERROR, \"incorrect local pin count: %d\",\n\t\t\t\t LocalRefCount[-buffer - 1])",
          "old_line_content": "\t\t\t\t LocalRefCount[-buffer - 1]);",
          "new_line_content": "\t\t\telog(ERROR, \"incorrect local pin count: %d\",",
          "content_same": false
        },
        {
          "line": 4832,
          "old_api": null,
          "new_api": "pg_atomic_fetch_or_u32",
          "old_text": null,
          "new_text": "pg_atomic_fetch_or_u32(&desc->state, BM_LOCKED)",
          "old_line_content": "\t\t/* if it wasn't set before we're OK */",
          "new_line_content": "\t\told_buf_state = pg_atomic_fetch_or_u32(&desc->state, BM_LOCKED);",
          "content_same": false
        },
        {
          "line": 4836,
          "old_api": null,
          "new_api": "perform_spin_delay",
          "old_text": null,
          "new_text": "perform_spin_delay(&delayStatus)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tperform_spin_delay(&delayStatus);",
          "content_same": false
        },
        {
          "line": 4326,
          "old_api": null,
          "new_api": "GetPrivateRefCount",
          "old_text": null,
          "new_text": "GetPrivateRefCount(buffer)",
          "old_line_content": "",
          "new_line_content": "\t\t\t GetPrivateRefCount(buffer));",
          "content_same": false
        },
        {
          "line": 4838,
          "old_api": null,
          "new_api": "finish_spin_delay",
          "old_text": null,
          "new_text": "finish_spin_delay(&delayStatus)",
          "old_line_content": "\treturn old_buf_state | BM_LOCKED;",
          "new_line_content": "\tfinish_spin_delay(&delayStatus);",
          "content_same": false
        },
        {
          "line": 4328,
          "old_api": null,
          "new_api": "GetBufferDescriptor",
          "old_text": null,
          "new_text": "GetBufferDescriptor(buffer - 1)",
          "old_line_content": "",
          "new_line_content": "\tbufHdr = GetBufferDescriptor(buffer - 1);",
          "content_same": false
        },
        {
          "line": 4336,
          "old_api": null,
          "new_api": "LockBufHdr",
          "old_text": null,
          "new_text": "LockBufHdr(bufHdr)",
          "old_line_content": "",
          "new_line_content": "\t\tbuf_state = LockBufHdr(bufHdr);",
          "content_same": false
        },
        {
          "line": 4339,
          "old_api": null,
          "new_api": "BUF_STATE_GET_REFCOUNT",
          "old_text": null,
          "new_text": "BUF_STATE_GET_REFCOUNT(buf_state)",
          "old_line_content": "\t\t{",
          "new_line_content": "\t\tif (BUF_STATE_GET_REFCOUNT(buf_state) == 1)",
          "content_same": false
        },
        {
          "line": 4342,
          "old_api": null,
          "new_api": "UnlockBufHdr",
          "old_text": null,
          "new_text": "UnlockBufHdr(bufHdr, buf_state)",
          "old_line_content": "",
          "new_line_content": "\t\t\tUnlockBufHdr(bufHdr, buf_state);",
          "content_same": false
        },
        {
          "line": 4855,
          "old_api": null,
          "new_api": "init_local_spin_delay",
          "old_text": null,
          "new_text": "init_local_spin_delay(&delayStatus)",
          "old_line_content": "",
          "new_line_content": "\tinit_local_spin_delay(&delayStatus);",
          "content_same": false
        },
        {
          "line": 4857,
          "old_api": null,
          "new_api": "pg_atomic_read_u32",
          "old_text": null,
          "new_text": "pg_atomic_read_u32(&buf->state)",
          "old_line_content": "",
          "new_line_content": "\tbuf_state = pg_atomic_read_u32(&buf->state);",
          "content_same": false
        },
        {
          "line": 3836,
          "old_api": null,
          "new_api": "ReadBufferWithoutRelcache",
          "old_text": null,
          "new_text": "ReadBufferWithoutRelcache(dstlocator, forkNum, blkno,\n\t\t\t\t\t\t\t\t\t\t   RBM_ZERO_AND_LOCK, bstrategy_dst,\n\t\t\t\t\t\t\t\t\t\t   permanent)",
          "old_line_content": "\t\t/* Use P_NEW to extend the destination relation. */",
          "new_line_content": "\t\tdstBuf = ReadBufferWithoutRelcache(dstlocator, forkNum, blkno,",
          "content_same": false
        },
        {
          "line": 4862,
          "old_api": null,
          "new_api": "pg_atomic_read_u32",
          "old_text": null,
          "new_text": "pg_atomic_read_u32(&buf->state)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tbuf_state = pg_atomic_read_u32(&buf->state);",
          "content_same": false
        },
        {
          "line": 4351,
          "old_api": null,
          "new_api": "GetCurrentTimestamp",
          "old_text": null,
          "new_text": "GetCurrentTimestamp()",
          "old_line_content": "\t\t\t\t\t\t\t\t\tNULL, false);",
          "new_line_content": "\t\t\t\t\t\t\t\t\twaitStart, GetCurrentTimestamp(),",
          "content_same": false
        },
        {
          "line": 3839,
          "old_api": null,
          "new_api": "BufferGetPage",
          "old_text": null,
          "new_text": "BufferGetPage(dstBuf)",
          "old_line_content": "\t\t\t\t\t\t\t\t\t\t   permanent);",
          "new_line_content": "\t\tdstPage = BufferGetPage(dstBuf);",
          "content_same": false
        },
        {
          "line": 4865,
          "old_api": null,
          "new_api": "finish_spin_delay",
          "old_text": null,
          "new_text": "finish_spin_delay(&delayStatus)",
          "old_line_content": "",
          "new_line_content": "\tfinish_spin_delay(&delayStatus);",
          "content_same": false
        },
        {
          "line": 3844,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(dstPage, srcPage, BLCKSZ)",
          "old_line_content": "",
          "new_line_content": "\t\tmemcpy(dstPage, srcPage, BLCKSZ);",
          "content_same": false
        },
        {
          "line": 4357,
          "old_api": null,
          "new_api": "set_ps_display_remove_suffix",
          "old_text": null,
          "new_text": "set_ps_display_remove_suffix()",
          "old_line_content": "\t\t\t\twaiting = false;",
          "new_line_content": "\t\t\t\tset_ps_display_remove_suffix();",
          "content_same": false
        },
        {
          "line": 3845,
          "old_api": null,
          "new_api": "MarkBufferDirty",
          "old_text": null,
          "new_text": "MarkBufferDirty(dstBuf)",
          "old_line_content": "\t\t/* Copy page data from the source to the destination. */",
          "new_line_content": "\t\tMarkBufferDirty(dstBuf);",
          "content_same": false
        },
        {
          "line": 3849,
          "old_api": null,
          "new_api": "log_newpage_buffer",
          "old_text": null,
          "new_text": "log_newpage_buffer(dstBuf, true)",
          "old_line_content": "\t\t/* WAL-log the copied page. */",
          "new_line_content": "\t\t\tlog_newpage_buffer(dstBuf, true);",
          "content_same": false
        },
        {
          "line": 3854,
          "old_api": null,
          "new_api": "UnlockReleaseBuffer",
          "old_text": null,
          "new_text": "UnlockReleaseBuffer(srcBuf)",
          "old_line_content": "",
          "new_line_content": "\t\tUnlockReleaseBuffer(srcBuf);",
          "content_same": false
        },
        {
          "line": 4367,
          "old_api": null,
          "new_api": "elog",
          "old_text": null,
          "new_text": "elog(ERROR, \"multiple backends attempting to wait for pincount 1\")",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\telog(ERROR, \"multiple backends attempting to wait for pincount 1\");",
          "content_same": false
        },
        {
          "line": 4881,
          "old_api": null,
          "new_api": "BufTagGetRelFileLocator",
          "old_text": null,
          "new_text": "BufTagGetRelFileLocator(bb)",
          "old_line_content": "",
          "new_line_content": "\trlocatorb = BufTagGetRelFileLocator(bb);",
          "content_same": false
        },
        {
          "line": 3857,
          "old_api": null,
          "new_api": "FreeAccessStrategy",
          "old_text": null,
          "new_text": "FreeAccessStrategy(bstrategy_src)",
          "old_line_content": "\t}",
          "new_line_content": "\tFreeAccessStrategy(bstrategy_src);",
          "content_same": false
        },
        {
          "line": 4883,
          "old_api": null,
          "new_api": "rlocator_comparator",
          "old_text": null,
          "new_text": "rlocator_comparator(&rlocatora, &rlocatorb)",
          "old_line_content": "",
          "new_line_content": "\tret = rlocator_comparator(&rlocatora, &rlocatorb);",
          "content_same": false
        },
        {
          "line": 3858,
          "old_api": null,
          "new_api": "FreeAccessStrategy",
          "old_text": null,
          "new_text": "FreeAccessStrategy(bstrategy_dst)",
          "old_line_content": "}",
          "new_line_content": "\tFreeAccessStrategy(bstrategy_dst);",
          "content_same": false
        },
        {
          "line": 4373,
          "old_api": null,
          "new_api": "LockBuffer",
          "old_text": null,
          "new_text": "LockBuffer(buffer, BUFFER_LOCK_UNLOCK)",
          "old_line_content": "",
          "new_line_content": "\t\tLockBuffer(buffer, BUFFER_LOCK_UNLOCK);",
          "content_same": false
        },
        {
          "line": 4888,
          "old_api": null,
          "new_api": "BufTagGetForkNum",
          "old_text": null,
          "new_text": "BufTagGetForkNum(bb)",
          "old_line_content": "\t\treturn -1;",
          "new_line_content": "\tif (BufTagGetForkNum(ba) < BufTagGetForkNum(bb))",
          "content_same": false
        },
        {
          "line": 4890,
          "old_api": null,
          "new_api": "BufTagGetForkNum",
          "old_text": null,
          "new_text": "BufTagGetForkNum(bb)",
          "old_line_content": "\t\treturn 1;",
          "new_line_content": "\tif (BufTagGetForkNum(ba) > BufTagGetForkNum(bb))",
          "content_same": false
        },
        {
          "line": 4381,
          "old_api": null,
          "new_api": "set_ps_display_suffix",
          "old_text": null,
          "new_text": "set_ps_display_suffix(\"waiting\")",
          "old_line_content": "\t\t\t\twaiting = true;",
          "new_line_content": "\t\t\t\tset_ps_display_suffix(\"waiting\");",
          "content_same": false
        },
        {
          "line": 4395,
          "old_api": null,
          "new_api": "GetCurrentTimestamp",
          "old_text": null,
          "new_text": "GetCurrentTimestamp()",
          "old_line_content": "",
          "new_line_content": "\t\t\t\tTimestampTz now = GetCurrentTimestamp();",
          "content_same": false
        },
        {
          "line": 4397,
          "old_api": null,
          "new_api": "TimestampDifferenceExceeds",
          "old_text": null,
          "new_text": "TimestampDifferenceExceeds(waitStart, now,\n\t\t\t\t\t\t\t\t\t\t\t   DeadlockTimeout)",
          "old_line_content": "\t\t\t\t\t\t\t\t\t\t\t   DeadlockTimeout))",
          "new_line_content": "\t\t\t\tif (TimestampDifferenceExceeds(waitStart, now,",
          "content_same": false
        },
        {
          "line": 4400,
          "old_api": null,
          "new_api": "LogRecoveryConflict",
          "old_text": null,
          "new_text": "LogRecoveryConflict(PROCSIG_RECOVERY_CONFLICT_BUFFERPIN,\n\t\t\t\t\t\t\t\t\t\twaitStart, now, NULL, true)",
          "old_line_content": "\t\t\t\t\t\t\t\t\t\twaitStart, now, NULL, true);",
          "new_line_content": "\t\t\t\t\tLogRecoveryConflict(PROCSIG_RECOVERY_CONFLICT_BUFFERPIN,",
          "content_same": false
        },
        {
          "line": 3889,
          "old_api": null,
          "new_api": "RelationCreateStorage",
          "old_text": null,
          "new_text": "RelationCreateStorage(dst_rlocator, relpersistence, false)",
          "old_line_content": "",
          "new_line_content": "\tRelationCreateStorage(dst_rlocator, relpersistence, false);",
          "content_same": false
        },
        {
          "line": 3892,
          "old_api": null,
          "new_api": "RelationCopyStorageUsingBuffer",
          "old_text": null,
          "new_text": "RelationCopyStorageUsingBuffer(src_rlocator, dst_rlocator, MAIN_FORKNUM,\n\t\t\t\t\t\t\t\t   permanent)",
          "old_line_content": "\t\t\t\t\t\t\t\t   permanent);",
          "new_line_content": "\tRelationCopyStorageUsingBuffer(src_rlocator, dst_rlocator, MAIN_FORKNUM,",
          "content_same": false
        },
        {
          "line": 4411,
          "old_api": null,
          "new_api": "GetCurrentTimestamp",
          "old_text": null,
          "new_text": "GetCurrentTimestamp()",
          "old_line_content": "",
          "new_line_content": "\t\t\t\twaitStart = GetCurrentTimestamp();",
          "content_same": false
        },
        {
          "line": 3899,
          "old_api": null,
          "new_api": "smgropen",
          "old_text": null,
          "new_text": "smgropen(src_rlocator, InvalidBackendId)",
          "old_line_content": "\t\t{",
          "new_line_content": "\t\tif (smgrexists(smgropen(src_rlocator, InvalidBackendId), forkNum))",
          "content_same": false
        },
        {
          "line": 3901,
          "old_api": null,
          "new_api": "smgropen",
          "old_text": null,
          "new_text": "smgropen(dst_rlocator, InvalidBackendId)",
          "old_line_content": "",
          "new_line_content": "\t\t\tsmgrcreate(smgropen(dst_rlocator, InvalidBackendId), forkNum, false);",
          "content_same": false
        },
        {
          "line": 4414,
          "old_api": null,
          "new_api": "SetStartupBufferPinWaitBufId",
          "old_text": null,
          "new_text": "SetStartupBufferPinWaitBufId(buffer - 1)",
          "old_line_content": "\t\t\t/* Set alarm and then wait to be signaled by UnpinBuffer() */",
          "new_line_content": "\t\t\tSetStartupBufferPinWaitBufId(buffer - 1);",
          "content_same": false
        },
        {
          "line": 4416,
          "old_api": null,
          "new_api": "ResolveRecoveryConflictWithBufferPin",
          "old_text": null,
          "new_text": "ResolveRecoveryConflictWithBufferPin()",
          "old_line_content": "\t\t\t/* Reset the published bufid */",
          "new_line_content": "\t\t\tResolveRecoveryConflictWithBufferPin();",
          "content_same": false
        },
        {
          "line": 4418,
          "old_api": null,
          "new_api": "SetStartupBufferPinWaitBufId",
          "old_text": null,
          "new_text": "SetStartupBufferPinWaitBufId(-1)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tSetStartupBufferPinWaitBufId(-1);",
          "content_same": false
        },
        {
          "line": 3908,
          "old_api": null,
          "new_api": "log_smgrcreate",
          "old_text": null,
          "new_text": "log_smgrcreate(&dst_rlocator, forkNum)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\tlog_smgrcreate(&dst_rlocator, forkNum);",
          "content_same": false
        },
        {
          "line": 4421,
          "old_api": null,
          "new_api": "ProcWaitForSignal",
          "old_text": null,
          "new_text": "ProcWaitForSignal(PG_WAIT_BUFFER_PIN)",
          "old_line_content": "",
          "new_line_content": "\t\t\tProcWaitForSignal(PG_WAIT_BUFFER_PIN);",
          "content_same": false
        },
        {
          "line": 3911,
          "old_api": null,
          "new_api": "RelationCopyStorageUsingBuffer",
          "old_text": null,
          "new_text": "RelationCopyStorageUsingBuffer(src_rlocator, dst_rlocator, forkNum,\n\t\t\t\t\t\t\t\t\t\t   permanent)",
          "old_line_content": "\t\t\t\t\t\t\t\t\t\t   permanent);",
          "new_line_content": "\t\t\tRelationCopyStorageUsingBuffer(src_rlocator, dst_rlocator, forkNum,",
          "content_same": false
        },
        {
          "line": 4431,
          "old_api": null,
          "new_api": "LockBufHdr",
          "old_text": null,
          "new_text": "LockBufHdr(bufHdr)",
          "old_line_content": "\t\tif ((buf_state & BM_PIN_COUNT_WAITER) != 0 &&",
          "new_line_content": "\t\tbuf_state = LockBufHdr(bufHdr);",
          "content_same": false
        },
        {
          "line": 3920,
          "old_api": null,
          "new_api": "smgrcloserellocator",
          "old_text": null,
          "new_text": "smgrcloserellocator(rlocator)",
          "old_line_content": "",
          "new_line_content": "\tsmgrcloserellocator(rlocator);",
          "content_same": false
        },
        {
          "line": 4435,
          "old_api": null,
          "new_api": "UnlockBufHdr",
          "old_text": null,
          "new_text": "UnlockBufHdr(bufHdr, buf_state)",
          "old_line_content": "",
          "new_line_content": "\t\tUnlockBufHdr(bufHdr, buf_state);",
          "content_same": false
        },
        {
          "line": 3923,
          "old_api": null,
          "new_api": "smgrcloserellocator",
          "old_text": null,
          "new_text": "smgrcloserellocator(rlocator)",
          "old_line_content": "}",
          "new_line_content": "\tsmgrcloserellocator(rlocator);",
          "content_same": false
        },
        {
          "line": 4449,
          "old_api": null,
          "new_api": "GetStartupBufferPinWaitBufId",
          "old_text": null,
          "new_text": "GetStartupBufferPinWaitBufId()",
          "old_line_content": "",
          "new_line_content": "\tint\t\t\tbufid = GetStartupBufferPinWaitBufId();",
          "content_same": false
        },
        {
          "line": 4964,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(*max_pending <= WRITEBACK_MAX_PENDING_FLUSHES)",
          "old_line_content": "",
          "new_line_content": "\tAssert(*max_pending <= WRITEBACK_MAX_PENDING_FLUSHES);",
          "content_same": false
        },
        {
          "line": 4460,
          "old_api": null,
          "new_api": "GetPrivateRefCount",
          "old_text": null,
          "new_text": "GetPrivateRefCount(bufid + 1)",
          "old_line_content": "\t\treturn true;",
          "new_line_content": "\tif (GetPrivateRefCount(bufid + 1) > 0)",
          "content_same": false
        },
        {
          "line": 3948,
          "old_api": null,
          "new_api": "ResourceOwnerEnlargeBuffers",
          "old_text": null,
          "new_text": "ResourceOwnerEnlargeBuffers(CurrentResourceOwner)",
          "old_line_content": "",
          "new_line_content": "\tResourceOwnerEnlargeBuffers(CurrentResourceOwner);",
          "content_same": false
        },
        {
          "line": 3954,
          "old_api": null,
          "new_api": "GetBufferDescriptor",
          "old_text": null,
          "new_text": "GetBufferDescriptor(i)",
          "old_line_content": "",
          "new_line_content": "\t\tbufHdr = GetBufferDescriptor(i);",
          "content_same": false
        },
        {
          "line": 4984,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(*context->max_pending <= WRITEBACK_MAX_PENDING_FLUSHES)",
          "old_line_content": "",
          "new_line_content": "\t\tAssert(*context->max_pending <= WRITEBACK_MAX_PENDING_FLUSHES);",
          "content_same": false
        },
        {
          "line": 3963,
          "old_api": null,
          "new_api": "ReservePrivateRefCountEntry",
          "old_text": null,
          "new_text": "ReservePrivateRefCountEntry()",
          "old_line_content": "",
          "new_line_content": "\t\tReservePrivateRefCountEntry();",
          "content_same": false
        },
        {
          "line": 3965,
          "old_api": null,
          "new_api": "LockBufHdr",
          "old_text": null,
          "new_text": "LockBufHdr(bufHdr)",
          "old_line_content": "\t\tif (bufHdr->tag.dbOid == dbid &&",
          "new_line_content": "\t\tbuf_state = LockBufHdr(bufHdr);",
          "content_same": false
        },
        {
          "line": 4479,
          "old_api": null,
          "new_api": "BufferIsValid",
          "old_text": null,
          "new_text": "BufferIsValid(buffer)",
          "old_line_content": "",
          "new_line_content": "\tAssert(BufferIsValid(buffer));",
          "content_same": false
        },
        {
          "line": 4481,
          "old_api": null,
          "new_api": "BufferIsLocal",
          "old_text": null,
          "new_text": "BufferIsLocal(buffer)",
          "old_line_content": "\t{",
          "new_line_content": "\tif (BufferIsLocal(buffer))",
          "content_same": false
        },
        {
          "line": 4485,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(refcount > 0)",
          "old_line_content": "\t\tif (refcount != 1)",
          "new_line_content": "\t\tAssert(refcount > 0);",
          "content_same": false
        },
        {
          "line": 4997,
          "old_api": null,
          "new_api": "IssuePendingWritebacks",
          "old_text": null,
          "new_text": "IssuePendingWritebacks(context)",
          "old_line_content": "}",
          "new_line_content": "\t\tIssuePendingWritebacks(context);",
          "content_same": false
        },
        {
          "line": 3973,
          "old_api": null,
          "new_api": "UnpinBuffer",
          "old_text": null,
          "new_text": "UnpinBuffer(bufHdr)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tUnpinBuffer(bufHdr);",
          "content_same": false
        },
        {
          "line": 3976,
          "old_api": null,
          "new_api": "UnlockBufHdr",
          "old_text": null,
          "new_text": "UnlockBufHdr(bufHdr, buf_state)",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\tUnlockBufHdr(bufHdr, buf_state);",
          "content_same": false
        },
        {
          "line": 4494,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(refcount)",
          "old_line_content": "\tif (refcount != 1)",
          "new_line_content": "\tAssert(refcount);",
          "content_same": false
        },
        {
          "line": 4499,
          "old_api": null,
          "new_api": "ConditionalLockBuffer",
          "old_text": null,
          "new_text": "ConditionalLockBuffer(buffer)",
          "old_line_content": "\t\treturn false;",
          "new_line_content": "\tif (!ConditionalLockBuffer(buffer))",
          "content_same": false
        },
        {
          "line": 3990,
          "old_api": null,
          "new_api": "BufferIsLocal",
          "old_text": null,
          "new_text": "BufferIsLocal(buffer)",
          "old_line_content": "",
          "new_line_content": "\tAssert(!BufferIsLocal(buffer));",
          "content_same": false
        },
        {
          "line": 4504,
          "old_api": null,
          "new_api": "BUF_STATE_GET_REFCOUNT",
          "old_text": null,
          "new_text": "BUF_STATE_GET_REFCOUNT(buf_state)",
          "old_line_content": "",
          "new_line_content": "\trefcount = BUF_STATE_GET_REFCOUNT(buf_state);",
          "content_same": false
        },
        {
          "line": 3992,
          "old_api": null,
          "new_api": "BufferIsPinned",
          "old_text": null,
          "new_text": "BufferIsPinned(buffer)",
          "old_line_content": "",
          "new_line_content": "\tAssert(BufferIsPinned(buffer));",
          "content_same": false
        },
        {
          "line": 4506,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(refcount > 0)",
          "old_line_content": "\tif (refcount == 1)",
          "new_line_content": "\tAssert(refcount > 0);",
          "content_same": false
        },
        {
          "line": 3994,
          "old_api": null,
          "new_api": "GetBufferDescriptor",
          "old_text": null,
          "new_text": "GetBufferDescriptor(buffer - 1)",
          "old_line_content": "",
          "new_line_content": "\tbufHdr = GetBufferDescriptor(buffer - 1);",
          "content_same": false
        },
        {
          "line": 3996,
          "old_api": null,
          "new_api": "BufferDescriptorGetContentLock",
          "old_text": null,
          "new_text": "BufferDescriptorGetContentLock(bufHdr)",
          "old_line_content": "",
          "new_line_content": "\tAssert(LWLockHeldByMe(BufferDescriptorGetContentLock(bufHdr)));",
          "content_same": false
        },
        {
          "line": 4510,
          "old_api": null,
          "new_api": "UnlockBufHdr",
          "old_text": null,
          "new_text": "UnlockBufHdr(bufHdr, buf_state)",
          "old_line_content": "\t\treturn true;",
          "new_line_content": "\t\tUnlockBufHdr(bufHdr, buf_state);",
          "content_same": false
        },
        {
          "line": 3998,
          "old_api": null,
          "new_api": "FlushBuffer",
          "old_text": null,
          "new_text": "FlushBuffer(bufHdr, NULL, IOOBJECT_RELATION, IOCONTEXT_NORMAL)",
          "old_line_content": "}",
          "new_line_content": "\tFlushBuffer(bufHdr, NULL, IOOBJECT_RELATION, IOCONTEXT_NORMAL);",
          "content_same": false
        },
        {
          "line": 5026,
          "old_api": null,
          "new_api": "sort_pending_writebacks",
          "old_text": null,
          "new_text": "sort_pending_writebacks(context->pending_writebacks, context->nr_pending)",
          "old_line_content": "",
          "new_line_content": "\tsort_pending_writebacks(context->pending_writebacks, context->nr_pending);",
          "content_same": false
        },
        {
          "line": 4516,
          "old_api": null,
          "new_api": "LockBuffer",
          "old_text": null,
          "new_text": "LockBuffer(buffer, BUFFER_LOCK_UNLOCK)",
          "old_line_content": "\treturn false;",
          "new_line_content": "\tLockBuffer(buffer, BUFFER_LOCK_UNLOCK);",
          "content_same": false
        },
        {
          "line": 4008,
          "old_api": null,
          "new_api": "elog",
          "old_text": null,
          "new_text": "elog(ERROR, \"bad buffer ID: %d\", buffer)",
          "old_line_content": "",
          "new_line_content": "\t\telog(ERROR, \"bad buffer ID: %d\", buffer);",
          "content_same": false
        },
        {
          "line": 4010,
          "old_api": null,
          "new_api": "BufferIsLocal",
          "old_text": null,
          "new_text": "BufferIsLocal(buffer)",
          "old_line_content": "\t{",
          "new_line_content": "\tif (BufferIsLocal(buffer))",
          "content_same": false
        },
        {
          "line": 4012,
          "old_api": null,
          "new_api": "ResourceOwnerForgetBuffer",
          "old_text": null,
          "new_text": "ResourceOwnerForgetBuffer(CurrentResourceOwner, buffer)",
          "old_line_content": "",
          "new_line_content": "\t\tResourceOwnerForgetBuffer(CurrentResourceOwner, buffer);",
          "content_same": false
        },
        {
          "line": 4014,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(LocalRefCount[-buffer - 1] > 0)",
          "old_line_content": "\t\tLocalRefCount[-buffer - 1]--;",
          "new_line_content": "\t\tAssert(LocalRefCount[-buffer - 1] > 0);",
          "content_same": false
        },
        {
          "line": 4019,
          "old_api": null,
          "new_api": "GetBufferDescriptor",
          "old_text": null,
          "new_text": "GetBufferDescriptor(buffer - 1)",
          "old_line_content": "}",
          "new_line_content": "\tUnpinBuffer(GetBufferDescriptor(buffer - 1));",
          "content_same": false
        },
        {
          "line": 5045,
          "old_api": null,
          "new_api": "BufTagGetRelFileLocator",
          "old_text": null,
          "new_text": "BufTagGetRelFileLocator(&tag)",
          "old_line_content": "",
          "new_line_content": "\t\tcurrlocator = BufTagGetRelFileLocator(&tag);",
          "content_same": false
        },
        {
          "line": 4534,
          "old_api": null,
          "new_api": "BufferIsValid",
          "old_text": null,
          "new_text": "BufferIsValid(buffer)",
          "old_line_content": "",
          "new_line_content": "\tAssert(BufferIsValid(buffer));",
          "content_same": false
        },
        {
          "line": 4536,
          "old_api": null,
          "new_api": "BufferIsLocal",
          "old_text": null,
          "new_text": "BufferIsLocal(buffer)",
          "old_line_content": "\t{",
          "new_line_content": "\tif (BufferIsLocal(buffer))",
          "content_same": false
        },
        {
          "line": 4031,
          "old_api": null,
          "new_api": "ReleaseBuffer",
          "old_text": null,
          "new_text": "ReleaseBuffer(buffer)",
          "old_line_content": "}",
          "new_line_content": "\tReleaseBuffer(buffer);",
          "content_same": false
        },
        {
          "line": 4546,
          "old_api": null,
          "new_api": "GetPrivateRefCount",
          "old_text": null,
          "new_text": "GetPrivateRefCount(buffer)",
          "old_line_content": "\t\treturn false;",
          "new_line_content": "\tif (GetPrivateRefCount(buffer) != 1)",
          "content_same": false
        },
        {
          "line": 5059,
          "old_api": null,
          "new_api": "BufTagGetForkNum",
          "old_text": null,
          "new_text": "BufTagGetForkNum(&next->tag)",
          "old_line_content": "\t\t\t\tbreak;",
          "new_line_content": "\t\t\t\tBufTagGetForkNum(&cur->tag) != BufTagGetForkNum(&next->tag))",
          "content_same": false
        },
        {
          "line": 4549,
          "old_api": null,
          "new_api": "GetBufferDescriptor",
          "old_text": null,
          "new_text": "GetBufferDescriptor(buffer - 1)",
          "old_line_content": "",
          "new_line_content": "\tbufHdr = GetBufferDescriptor(buffer - 1);",
          "content_same": false
        },
        {
          "line": 4552,
          "old_api": null,
          "new_api": "BufferDescriptorGetContentLock",
          "old_text": null,
          "new_text": "BufferDescriptorGetContentLock(bufHdr)",
          "old_line_content": "\t\t\t\t\t\t\t\tLW_EXCLUSIVE));",
          "new_line_content": "\tAssert(LWLockHeldByMeInMode(BufferDescriptorGetContentLock(bufHdr),",
          "content_same": false
        },
        {
          "line": 4555,
          "old_api": null,
          "new_api": "LockBufHdr",
          "old_text": null,
          "new_text": "LockBufHdr(bufHdr)",
          "old_line_content": "",
          "new_line_content": "\tbuf_state = LockBufHdr(bufHdr);",
          "content_same": false
        },
        {
          "line": 4558,
          "old_api": null,
          "new_api": "BUF_STATE_GET_REFCOUNT",
          "old_text": null,
          "new_text": "BUF_STATE_GET_REFCOUNT(buf_state)",
          "old_line_content": "\t{",
          "new_line_content": "\tif (BUF_STATE_GET_REFCOUNT(buf_state) == 1)",
          "content_same": false
        },
        {
          "line": 4047,
          "old_api": null,
          "new_api": "BufferIsLocal",
          "old_text": null,
          "new_text": "BufferIsLocal(buffer)",
          "old_line_content": "\t\tLocalRefCount[-buffer - 1]++;",
          "new_line_content": "\tif (BufferIsLocal(buffer))",
          "content_same": false
        },
        {
          "line": 4561,
          "old_api": null,
          "new_api": "UnlockBufHdr",
          "old_text": null,
          "new_text": "UnlockBufHdr(bufHdr, buf_state)",
          "old_line_content": "\t\treturn true;",
          "new_line_content": "\t\tUnlockBufHdr(bufHdr, buf_state);",
          "content_same": false
        },
        {
          "line": 4565,
          "old_api": null,
          "new_api": "UnlockBufHdr",
          "old_text": null,
          "new_text": "UnlockBufHdr(bufHdr, buf_state)",
          "old_line_content": "\treturn false;",
          "new_line_content": "\tUnlockBufHdr(bufHdr, buf_state);",
          "content_same": false
        },
        {
          "line": 5078,
          "old_api": null,
          "new_api": "BufTagGetForkNum",
          "old_text": null,
          "new_text": "BufTagGetForkNum(&tag)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tsmgrwriteback(reln, BufTagGetForkNum(&tag), tag.blockNum, nblocks);",
          "content_same": false
        },
        {
          "line": 4054,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(ref != NULL)",
          "old_line_content": "\t\tref->refcount++;",
          "new_line_content": "\t\tAssert(ref != NULL);",
          "content_same": false
        },
        {
          "line": 4057,
          "old_api": null,
          "new_api": "ResourceOwnerRememberBuffer",
          "old_text": null,
          "new_text": "ResourceOwnerRememberBuffer(CurrentResourceOwner, buffer)",
          "old_line_content": "}",
          "new_line_content": "\tResourceOwnerRememberBuffer(CurrentResourceOwner, buffer);",
          "content_same": false
        },
        {
          "line": 4585,
          "old_api": null,
          "new_api": "BufferDescriptorGetIOCV",
          "old_text": null,
          "new_text": "BufferDescriptorGetIOCV(buf)",
          "old_line_content": "",
          "new_line_content": "\tConditionVariable *cv = BufferDescriptorGetIOCV(buf);",
          "content_same": false
        },
        {
          "line": 5098,
          "old_api": null,
          "new_api": "errmsg",
          "old_text": null,
          "new_text": "errmsg(\"snapshot too old\")",
          "old_line_content": "}",
          "new_line_content": "\t\t\t\t errmsg(\"snapshot too old\")));",
          "content_same": false
        },
        {
          "line": 4587,
          "old_api": null,
          "new_api": "ConditionVariablePrepareToSleep",
          "old_text": null,
          "new_text": "ConditionVariablePrepareToSleep(cv)",
          "old_line_content": "\tfor (;;)",
          "new_line_content": "\tConditionVariablePrepareToSleep(cv);",
          "content_same": false
        },
        {
          "line": 4078,
          "old_api": null,
          "new_api": "BufferGetPage",
          "old_text": null,
          "new_text": "BufferGetPage(buffer)",
          "old_line_content": "",
          "new_line_content": "\tPage\t\tpage = BufferGetPage(buffer);",
          "content_same": false
        },
        {
          "line": 4081,
          "old_api": null,
          "new_api": "elog",
          "old_text": null,
          "new_text": "elog(ERROR, \"bad buffer ID: %d\", buffer)",
          "old_line_content": "",
          "new_line_content": "\t\telog(ERROR, \"bad buffer ID: %d\", buffer);",
          "content_same": false
        },
        {
          "line": 4083,
          "old_api": null,
          "new_api": "BufferIsLocal",
          "old_text": null,
          "new_text": "BufferIsLocal(buffer)",
          "old_line_content": "\t{",
          "new_line_content": "\tif (BufferIsLocal(buffer))",
          "content_same": false
        },
        {
          "line": 4085,
          "old_api": null,
          "new_api": "MarkLocalBufferDirty",
          "old_text": null,
          "new_text": "MarkLocalBufferDirty(buffer)",
          "old_line_content": "\t\treturn;",
          "new_line_content": "\t\tMarkLocalBufferDirty(buffer);",
          "content_same": false
        },
        {
          "line": 4598,
          "old_api": null,
          "new_api": "UnlockBufHdr",
          "old_text": null,
          "new_text": "UnlockBufHdr(buf, buf_state)",
          "old_line_content": "",
          "new_line_content": "\t\tUnlockBufHdr(buf, buf_state);",
          "content_same": false
        },
        {
          "line": 4089,
          "old_api": null,
          "new_api": "GetBufferDescriptor",
          "old_text": null,
          "new_text": "GetBufferDescriptor(buffer - 1)",
          "old_line_content": "",
          "new_line_content": "\tbufHdr = GetBufferDescriptor(buffer - 1);",
          "content_same": false
        },
        {
          "line": 4602,
          "old_api": null,
          "new_api": "ConditionVariableSleep",
          "old_text": null,
          "new_text": "ConditionVariableSleep(cv, WAIT_EVENT_BUFFER_IO)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tConditionVariableSleep(cv, WAIT_EVENT_BUFFER_IO);",
          "content_same": false
        },
        {
          "line": 4091,
          "old_api": null,
          "new_api": "GetPrivateRefCount",
          "old_text": null,
          "new_text": "GetPrivateRefCount(buffer)",
          "old_line_content": "\t/* here, either share or exclusive lock is OK */",
          "new_line_content": "\tAssert(GetPrivateRefCount(buffer) > 0);",
          "content_same": false
        },
        {
          "line": 4604,
          "old_api": null,
          "new_api": "ConditionVariableCancelSleep",
          "old_text": null,
          "new_text": "ConditionVariableCancelSleep()",
          "old_line_content": "}",
          "new_line_content": "\tConditionVariableCancelSleep();",
          "content_same": false
        },
        {
          "line": 4093,
          "old_api": null,
          "new_api": "BufferDescriptorGetContentLock",
          "old_text": null,
          "new_text": "BufferDescriptorGetContentLock(bufHdr)",
          "old_line_content": "",
          "new_line_content": "\tAssert(LWLockHeldByMe(BufferDescriptorGetContentLock(bufHdr)));",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 4105,
          "old_api": "pg_atomic_read_u32",
          "new_api": null,
          "old_text": "pg_atomic_read_u32(&bufHdr->state)",
          "new_text": null,
          "old_line_content": "\tif ((pg_atomic_read_u32(&bufHdr->state) & (BM_DIRTY | BM_JUST_DIRTIED)) !=",
          "new_line_content": "\t */",
          "content_same": false
        },
        {
          "line": 4629,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(!InProgressBuf)",
          "new_text": null,
          "old_line_content": "\tAssert(!InProgressBuf);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4633,
          "old_api": "LockBufHdr",
          "new_api": null,
          "old_text": "LockBufHdr(buf)",
          "new_text": null,
          "old_line_content": "\t\tbuf_state = LockBufHdr(buf);",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 4122,
          "old_api": "XLogHintBitIsNeeded",
          "new_api": null,
          "old_text": "XLogHintBitIsNeeded()",
          "new_text": null,
          "old_line_content": "\t\tif (XLogHintBitIsNeeded() &&",
          "new_line_content": "\t\t */",
          "content_same": false
        },
        {
          "line": 4637,
          "old_api": "UnlockBufHdr",
          "new_api": null,
          "old_text": "UnlockBufHdr(buf, buf_state)",
          "new_text": null,
          "old_line_content": "\t\tUnlockBufHdr(buf, buf_state);",
          "new_line_content": "\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 4133,
          "old_api": "RecoveryInProgress",
          "new_api": null,
          "old_text": "RecoveryInProgress()",
          "new_text": null,
          "old_line_content": "\t\t\tif (RecoveryInProgress() ||",
          "new_line_content": "\t\t\t */",
          "content_same": false
        },
        {
          "line": 4646,
          "old_api": "UnlockBufHdr",
          "new_api": null,
          "old_text": "UnlockBufHdr(buf, buf_state)",
          "new_text": null,
          "old_line_content": "\t\tUnlockBufHdr(buf, buf_state);",
          "new_line_content": "\t\t/* someone else already did the I/O */",
          "content_same": false
        },
        {
          "line": 4651,
          "old_api": "UnlockBufHdr",
          "new_api": null,
          "old_text": "UnlockBufHdr(buf, buf_state)",
          "new_text": null,
          "old_line_content": "\tUnlockBufHdr(buf, buf_state);",
          "new_line_content": "\tbuf_state |= BM_IO_IN_PROGRESS;",
          "content_same": false
        },
        {
          "line": 4160,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert((MyProc->delayChkptFlags & DELAY_CHKPT_START) == 0)",
          "new_text": null,
          "old_line_content": "\t\t\tAssert((MyProc->delayChkptFlags & DELAY_CHKPT_START) == 0);",
          "new_line_content": "\t\t\t */",
          "content_same": false
        },
        {
          "line": 4163,
          "old_api": "XLogSaveBufferForHint",
          "new_api": null,
          "old_text": "XLogSaveBufferForHint(buffer, buffer_std)",
          "new_text": null,
          "old_line_content": "\t\t\tlsn = XLogSaveBufferForHint(buffer, buffer_std);",
          "new_line_content": "\t\t\tdelayChkptFlags = true;",
          "content_same": false
        },
        {
          "line": 4166,
          "old_api": "LockBufHdr",
          "new_api": null,
          "old_text": "LockBufHdr(bufHdr)",
          "new_text": null,
          "old_line_content": "\t\tbuf_state = LockBufHdr(bufHdr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4168,
          "old_api": "BUF_STATE_GET_REFCOUNT",
          "new_api": null,
          "old_text": "BUF_STATE_GET_REFCOUNT(buf_state)",
          "new_text": null,
          "old_line_content": "\t\tAssert(BUF_STATE_GET_REFCOUNT(buf_state) > 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4680,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(buf == InProgressBuf)",
          "new_text": null,
          "old_line_content": "\tAssert(buf == InProgressBuf);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4682,
          "old_api": "LockBufHdr",
          "new_api": null,
          "old_text": "LockBufHdr(buf)",
          "new_text": null,
          "old_line_content": "\tbuf_state = LockBufHdr(buf);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4684,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(buf_state & BM_IO_IN_PROGRESS)",
          "new_text": null,
          "old_line_content": "\tAssert(buf_state & BM_IO_IN_PROGRESS);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4691,
          "old_api": "UnlockBufHdr",
          "new_api": null,
          "old_text": "UnlockBufHdr(buf, buf_state)",
          "new_text": null,
          "old_line_content": "\tUnlockBufHdr(buf, buf_state);",
          "new_line_content": "\tbuf_state |= set_flag_bits;",
          "content_same": false
        },
        {
          "line": 4695,
          "old_api": "BufferDescriptorGetIOCV",
          "new_api": null,
          "old_text": "BufferDescriptorGetIOCV(buf)",
          "new_text": null,
          "old_line_content": "\tConditionVariableBroadcast(BufferDescriptorGetIOCV(buf));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4187,
          "old_api": "XLogRecPtrIsInvalid",
          "new_api": null,
          "old_text": "XLogRecPtrIsInvalid(lsn)",
          "new_text": null,
          "old_line_content": "\t\t\tif (!XLogRecPtrIsInvalid(lsn))",
          "new_line_content": "\t\t\t */",
          "content_same": false
        },
        {
          "line": 4192,
          "old_api": "UnlockBufHdr",
          "new_api": null,
          "old_text": "UnlockBufHdr(bufHdr, buf_state)",
          "new_text": null,
          "old_line_content": "\t\tUnlockBufHdr(bufHdr, buf_state);",
          "new_line_content": "\t\tbuf_state |= BM_DIRTY | BM_JUST_DIRTIED;",
          "content_same": false
        },
        {
          "line": 4716,
          "old_api": "LockBufHdr",
          "new_api": null,
          "old_text": "LockBufHdr(buf)",
          "new_text": null,
          "old_line_content": "\t\tbuf_state = LockBufHdr(buf);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4720,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(!(buf_state & BM_DIRTY))",
          "new_text": null,
          "old_line_content": "\t\t\tAssert(!(buf_state & BM_DIRTY));",
          "new_line_content": "\t\t{",
          "content_same": false
        },
        {
          "line": 4723,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(!(buf_state & BM_VALID))",
          "new_text": null,
          "old_line_content": "\t\t\tAssert(!(buf_state & BM_VALID));",
          "new_line_content": "\t\t\t/* We'd better not think buffer is valid yet */",
          "content_same": false
        },
        {
          "line": 4728,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(buf_state & BM_DIRTY)",
          "new_text": null,
          "old_line_content": "\t\t\tAssert(buf_state & BM_DIRTY);",
          "new_line_content": "\t\t{",
          "content_same": false
        },
        {
          "line": 4736,
          "old_api": "BufTagGetRelFileLocator",
          "new_api": null,
          "old_text": "BufTagGetRelFileLocator(&buf->tag)",
          "new_text": null,
          "old_line_content": "\t\t\t\tpath = relpathperm(BufTagGetRelFileLocator(&buf->tag),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4225,
          "old_api": "LockBufHdr",
          "new_api": null,
          "old_text": "LockBufHdr(buf)",
          "new_text": null,
          "old_line_content": "\t\tbuf_state = LockBufHdr(buf);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4742,
          "old_api": "errdetail",
          "new_api": null,
          "old_text": "errdetail(\"Multiple failures --- write error might be permanent.\")",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t errdetail(\"Multiple failures --- write error might be permanent.\")));",
          "new_line_content": "\t\t\t\t\t\t\t\tbuf->tag.blockNum, path),",
          "content_same": false
        },
        {
          "line": 4746,
          "old_api": "TerminateBufferIO",
          "new_api": null,
          "old_text": "TerminateBufferIO(buf, false, BM_IO_ERROR)",
          "new_text": null,
          "old_line_content": "\t\tTerminateBufferIO(buf, false, BM_IO_ERROR);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 4235,
          "old_api": "UnlockBufHdr",
          "new_api": null,
          "old_text": "UnlockBufHdr(buf, buf_state)",
          "new_text": null,
          "old_line_content": "\t\tUnlockBufHdr(buf, buf_state);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4249,
          "old_api": "BufferIsPinned",
          "new_api": null,
          "old_text": "BufferIsPinned(buffer)",
          "new_text": null,
          "old_line_content": "\tAssert(BufferIsPinned(buffer));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4761,
          "old_api": "BufTagGetRelFileLocator",
          "new_api": null,
          "old_text": "BufTagGetRelFileLocator(&bufHdr->tag)",
          "new_text": null,
          "old_line_content": "\t\tchar\t   *path = relpathperm(BufTagGetRelFileLocator(&bufHdr->tag),",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 4764,
          "old_api": "errcontext",
          "new_api": null,
          "old_text": "errcontext(\"writing block %u of relation %s\",\n\t\t\t\t   bufHdr->tag.blockNum, path)",
          "new_text": null,
          "old_line_content": "\t\terrcontext(\"writing block %u of relation %s\",",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4253,
          "old_api": "GetBufferDescriptor",
          "new_api": null,
          "old_text": "GetBufferDescriptor(buffer - 1)",
          "new_text": null,
          "old_line_content": "\tbuf = GetBufferDescriptor(buffer - 1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4766,
          "old_api": "pfree",
          "new_api": null,
          "old_text": "pfree(path)",
          "new_text": null,
          "old_line_content": "\t\tpfree(path);",
          "new_line_content": "\t\t\t\t   bufHdr->tag.blockNum, path);",
          "content_same": false
        },
        {
          "line": 4256,
          "old_api": "BufferDescriptorGetContentLock",
          "new_api": null,
          "old_text": "BufferDescriptorGetContentLock(buf)",
          "new_text": null,
          "old_line_content": "\t\tLWLockRelease(BufferDescriptorGetContentLock(buf));",
          "new_line_content": "\tif (mode == BUFFER_LOCK_UNLOCK)",
          "content_same": false
        },
        {
          "line": 4258,
          "old_api": "BufferDescriptorGetContentLock",
          "new_api": null,
          "old_text": "BufferDescriptorGetContentLock(buf)",
          "new_text": null,
          "old_line_content": "\t\tLWLockAcquire(BufferDescriptorGetContentLock(buf), LW_SHARED);",
          "new_line_content": "\telse if (mode == BUFFER_LOCK_SHARE)",
          "content_same": false
        },
        {
          "line": 4260,
          "old_api": "BufferDescriptorGetContentLock",
          "new_api": null,
          "old_text": "BufferDescriptorGetContentLock(buf)",
          "new_text": null,
          "old_line_content": "\t\tLWLockAcquire(BufferDescriptorGetContentLock(buf), LW_EXCLUSIVE);",
          "new_line_content": "\telse if (mode == BUFFER_LOCK_EXCLUSIVE)",
          "content_same": false
        },
        {
          "line": 4262,
          "old_api": "elog",
          "new_api": null,
          "old_text": "elog(ERROR, \"unrecognized buffer lock mode: %d\", mode)",
          "new_text": null,
          "old_line_content": "\t\telog(ERROR, \"unrecognized buffer lock mode: %d\", mode);",
          "new_line_content": "\telse",
          "content_same": false
        },
        {
          "line": 4780,
          "old_api": "BufTagGetRelFileLocator",
          "new_api": null,
          "old_text": "BufTagGetRelFileLocator(&bufHdr->tag)",
          "new_text": null,
          "old_line_content": "\t\tchar\t   *path = relpathbackend(BufTagGetRelFileLocator(&bufHdr->tag),",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 4782,
          "old_api": "BufTagGetForkNum",
          "new_api": null,
          "old_text": "BufTagGetForkNum(&bufHdr->tag)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\t\t\t\t  BufTagGetForkNum(&bufHdr->tag));",
          "new_line_content": "\t\t\t\t\t\t\t\t\t\t  MyBackendId,",
          "content_same": false
        },
        {
          "line": 4784,
          "old_api": "errcontext",
          "new_api": null,
          "old_text": "errcontext(\"writing block %u of relation %s\",\n\t\t\t\t   bufHdr->tag.blockNum, path)",
          "new_text": null,
          "old_line_content": "\t\terrcontext(\"writing block %u of relation %s\",",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4786,
          "old_api": "pfree",
          "new_api": null,
          "old_text": "pfree(path)",
          "new_text": null,
          "old_line_content": "\t\tpfree(path);",
          "new_line_content": "\t\t\t\t   bufHdr->tag.blockNum, path);",
          "content_same": false
        },
        {
          "line": 4275,
          "old_api": "BufferIsPinned",
          "new_api": null,
          "old_text": "BufferIsPinned(buffer)",
          "new_text": null,
          "old_line_content": "\tAssert(BufferIsPinned(buffer));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4279,
          "old_api": "GetBufferDescriptor",
          "new_api": null,
          "old_text": "GetBufferDescriptor(buffer - 1)",
          "new_text": null,
          "old_line_content": "\tbuf = GetBufferDescriptor(buffer - 1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4281,
          "old_api": "BufferDescriptorGetContentLock",
          "new_api": null,
          "old_text": "BufferDescriptorGetContentLock(buf)",
          "new_text": null,
          "old_line_content": "\treturn LWLockConditionalAcquire(BufferDescriptorGetContentLock(buf),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4309,
          "old_api": "BufferIsPinned",
          "new_api": null,
          "old_text": "BufferIsPinned(buffer)",
          "new_text": null,
          "old_line_content": "\tAssert(BufferIsPinned(buffer));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4312,
          "old_api": "BufferIsLocal",
          "new_api": null,
          "old_text": "BufferIsLocal(buffer)",
          "new_text": null,
          "old_line_content": "\tif (BufferIsLocal(buffer))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4826,
          "old_api": "init_local_spin_delay",
          "new_api": null,
          "old_text": "init_local_spin_delay(&delayStatus)",
          "new_text": null,
          "old_line_content": "\tinit_local_spin_delay(&delayStatus);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4316,
          "old_api": "elog",
          "new_api": null,
          "old_text": "elog(ERROR, \"incorrect local pin count: %d\",\n\t\t\t\t LocalRefCount[-buffer - 1])",
          "new_text": null,
          "old_line_content": "\t\t\telog(ERROR, \"incorrect local pin count: %d\",",
          "new_line_content": "\t\tif (LocalRefCount[-buffer - 1] != 1)",
          "content_same": false
        },
        {
          "line": 4831,
          "old_api": "pg_atomic_fetch_or_u32",
          "new_api": null,
          "old_text": "pg_atomic_fetch_or_u32(&desc->state, BM_LOCKED)",
          "new_text": null,
          "old_line_content": "\t\told_buf_state = pg_atomic_fetch_or_u32(&desc->state, BM_LOCKED);",
          "new_line_content": "\t\t/* set BM_LOCKED flag */",
          "content_same": false
        },
        {
          "line": 4323,
          "old_api": "GetPrivateRefCount",
          "new_api": null,
          "old_text": "GetPrivateRefCount(buffer)",
          "new_text": null,
          "old_line_content": "\tif (GetPrivateRefCount(buffer) != 1)",
          "new_line_content": "\t/* There should be exactly one local pin */",
          "content_same": false
        },
        {
          "line": 4835,
          "old_api": "perform_spin_delay",
          "new_api": null,
          "old_text": "perform_spin_delay(&delayStatus)",
          "new_text": null,
          "old_line_content": "\t\tperform_spin_delay(&delayStatus);",
          "new_line_content": "\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 4837,
          "old_api": "finish_spin_delay",
          "new_api": null,
          "old_text": "finish_spin_delay(&delayStatus)",
          "new_text": null,
          "old_line_content": "\tfinish_spin_delay(&delayStatus);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 4327,
          "old_api": "GetBufferDescriptor",
          "new_api": null,
          "old_text": "GetBufferDescriptor(buffer - 1)",
          "new_text": null,
          "old_line_content": "\tbufHdr = GetBufferDescriptor(buffer - 1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4334,
          "old_api": "LockBuffer",
          "new_api": null,
          "old_text": "LockBuffer(buffer, BUFFER_LOCK_EXCLUSIVE)",
          "new_text": null,
          "old_line_content": "\t\tLockBuffer(buffer, BUFFER_LOCK_EXCLUSIVE);",
          "new_line_content": "\t\t/* Try to acquire lock */",
          "content_same": false
        },
        {
          "line": 4337,
          "old_api": "BUF_STATE_GET_REFCOUNT",
          "new_api": null,
          "old_text": "BUF_STATE_GET_REFCOUNT(buf_state)",
          "new_text": null,
          "old_line_content": "\t\tAssert(BUF_STATE_GET_REFCOUNT(buf_state) > 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4341,
          "old_api": "UnlockBufHdr",
          "new_api": null,
          "old_text": "UnlockBufHdr(bufHdr, buf_state)",
          "new_text": null,
          "old_line_content": "\t\t\tUnlockBufHdr(bufHdr, buf_state);",
          "new_line_content": "\t\t\t/* Successfully acquired exclusive lock with pincount 1 */",
          "content_same": false
        },
        {
          "line": 4854,
          "old_api": "init_local_spin_delay",
          "new_api": null,
          "old_text": "init_local_spin_delay(&delayStatus)",
          "new_text": null,
          "old_line_content": "\tinit_local_spin_delay(&delayStatus);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4856,
          "old_api": "pg_atomic_read_u32",
          "new_api": null,
          "old_text": "pg_atomic_read_u32(&buf->state)",
          "new_text": null,
          "old_line_content": "\tbuf_state = pg_atomic_read_u32(&buf->state);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4860,
          "old_api": "perform_spin_delay",
          "new_api": null,
          "old_text": "perform_spin_delay(&delayStatus)",
          "new_text": null,
          "old_line_content": "\t\tperform_spin_delay(&delayStatus);",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 4349,
          "old_api": "LogRecoveryConflict",
          "new_api": null,
          "old_text": "LogRecoveryConflict(PROCSIG_RECOVERY_CONFLICT_BUFFERPIN,\n\t\t\t\t\t\t\t\t\twaitStart, GetCurrentTimestamp(),\n\t\t\t\t\t\t\t\t\tNULL, false)",
          "new_text": null,
          "old_line_content": "\t\t\t\tLogRecoveryConflict(PROCSIG_RECOVERY_CONFLICT_BUFFERPIN,",
          "new_line_content": "\t\t\tif (logged_recovery_conflict)",
          "content_same": false
        },
        {
          "line": 3837,
          "old_api": "ReadBufferWithoutRelcache",
          "new_api": null,
          "old_text": "ReadBufferWithoutRelcache(dstlocator, forkNum, blkno,\n\t\t\t\t\t\t\t\t\t\t   RBM_NORMAL, bstrategy_dst,\n\t\t\t\t\t\t\t\t\t\t   permanent)",
          "new_text": null,
          "old_line_content": "\t\tdstBuf = ReadBufferWithoutRelcache(dstlocator, forkNum, blkno,",
          "new_line_content": "\t\t\t\t\t\t\t\t\t\t   RBM_ZERO_AND_LOCK, bstrategy_dst,",
          "content_same": false
        },
        {
          "line": 4864,
          "old_api": "finish_spin_delay",
          "new_api": null,
          "old_text": "finish_spin_delay(&delayStatus)",
          "new_text": null,
          "old_line_content": "\tfinish_spin_delay(&delayStatus);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3840,
          "old_api": "LockBuffer",
          "new_api": null,
          "old_text": "LockBuffer(dstBuf, BUFFER_LOCK_EXCLUSIVE)",
          "new_text": null,
          "old_line_content": "\t\tLockBuffer(dstBuf, BUFFER_LOCK_EXCLUSIVE);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3843,
          "old_api": "START_CRIT_SECTION",
          "new_api": null,
          "old_text": "START_CRIT_SECTION()",
          "new_text": null,
          "old_line_content": "\t\tSTART_CRIT_SECTION();",
          "new_line_content": "\t\t/* Copy page data from the source to the destination. */",
          "content_same": false
        },
        {
          "line": 4356,
          "old_api": "set_ps_display_remove_suffix",
          "new_api": null,
          "old_text": "set_ps_display_remove_suffix()",
          "new_text": null,
          "old_line_content": "\t\t\t\tset_ps_display_remove_suffix();",
          "new_line_content": "\t\t\t\t/* reset ps display to remove the suffix if we added one */",
          "content_same": false
        },
        {
          "line": 3846,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(dstPage, srcPage, BLCKSZ)",
          "new_text": null,
          "old_line_content": "\t\tmemcpy(dstPage, srcPage, BLCKSZ);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3847,
          "old_api": "MarkBufferDirty",
          "new_api": null,
          "old_text": "MarkBufferDirty(dstBuf)",
          "new_text": null,
          "old_line_content": "\t\tMarkBufferDirty(dstBuf);",
          "new_line_content": "\t\t/* WAL-log the copied page. */",
          "content_same": false
        },
        {
          "line": 4364,
          "old_api": "UnlockBufHdr",
          "new_api": null,
          "old_text": "UnlockBufHdr(bufHdr, buf_state)",
          "new_text": null,
          "old_line_content": "\t\t\tUnlockBufHdr(bufHdr, buf_state);",
          "new_line_content": "\t\t{",
          "content_same": false
        },
        {
          "line": 4879,
          "old_api": "BufTagGetRelFileLocator",
          "new_api": null,
          "old_text": "BufTagGetRelFileLocator(ba)",
          "new_text": null,
          "old_line_content": "\trlocatora = BufTagGetRelFileLocator(ba);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3855,
          "old_api": "UnlockReleaseBuffer",
          "new_api": null,
          "old_text": "UnlockReleaseBuffer(dstBuf)",
          "new_text": null,
          "old_line_content": "\t\tUnlockReleaseBuffer(dstBuf);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 3856,
          "old_api": "UnlockReleaseBuffer",
          "new_api": null,
          "old_text": "UnlockReleaseBuffer(srcBuf)",
          "new_text": null,
          "old_line_content": "\t\tUnlockReleaseBuffer(srcBuf);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4882,
          "old_api": "rlocator_comparator",
          "new_api": null,
          "old_text": "rlocator_comparator(&rlocatora, &rlocatorb)",
          "new_text": null,
          "old_line_content": "\tret = rlocator_comparator(&rlocatora, &rlocatorb);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4371,
          "old_api": "UnlockBufHdr",
          "new_api": null,
          "old_text": "UnlockBufHdr(bufHdr, buf_state)",
          "new_text": null,
          "old_line_content": "\t\tUnlockBufHdr(bufHdr, buf_state);",
          "new_line_content": "\t\tbuf_state |= BM_PIN_COUNT_WAITER;",
          "content_same": false
        },
        {
          "line": 4887,
          "old_api": "BufTagGetForkNum",
          "new_api": null,
          "old_text": "BufTagGetForkNum(bb)",
          "new_text": null,
          "old_line_content": "\tif (BufTagGetForkNum(ba) < BufTagGetForkNum(bb))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4889,
          "old_api": "BufTagGetForkNum",
          "new_api": null,
          "old_text": "BufTagGetForkNum(bb)",
          "new_text": null,
          "old_line_content": "\tif (BufTagGetForkNum(ba) > BufTagGetForkNum(bb))",
          "new_line_content": "\t\treturn -1;",
          "content_same": false
        },
        {
          "line": 4380,
          "old_api": "set_ps_display_suffix",
          "new_api": null,
          "old_text": "set_ps_display_suffix(\"waiting\")",
          "new_text": null,
          "old_line_content": "\t\t\t\tset_ps_display_suffix(\"waiting\");",
          "new_line_content": "\t\t\t\t/* adjust the process title to indicate that it's waiting */",
          "content_same": false
        },
        {
          "line": 4394,
          "old_api": "GetCurrentTimestamp",
          "new_api": null,
          "old_text": "GetCurrentTimestamp()",
          "new_text": null,
          "old_line_content": "\t\t\t\tTimestampTz now = GetCurrentTimestamp();",
          "new_line_content": "\t\t\t{",
          "content_same": false
        },
        {
          "line": 4396,
          "old_api": "TimestampDifferenceExceeds",
          "new_api": null,
          "old_text": "TimestampDifferenceExceeds(waitStart, now,\n\t\t\t\t\t\t\t\t\t\t\t   DeadlockTimeout)",
          "new_text": null,
          "old_line_content": "\t\t\t\tif (TimestampDifferenceExceeds(waitStart, now,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4399,
          "old_api": "LogRecoveryConflict",
          "new_api": null,
          "old_text": "LogRecoveryConflict(PROCSIG_RECOVERY_CONFLICT_BUFFERPIN,\n\t\t\t\t\t\t\t\t\t\twaitStart, now, NULL, true)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tLogRecoveryConflict(PROCSIG_RECOVERY_CONFLICT_BUFFERPIN,",
          "new_line_content": "\t\t\t\t{",
          "content_same": false
        },
        {
          "line": 3888,
          "old_api": "RelationCreateStorage",
          "new_api": null,
          "old_text": "RelationCreateStorage(dst_rlocator, relpersistence, false)",
          "new_text": null,
          "old_line_content": "\tRelationCreateStorage(dst_rlocator, relpersistence, false);",
          "new_line_content": "\t */",
          "content_same": false
        },
        {
          "line": 3891,
          "old_api": "RelationCopyStorageUsingBuffer",
          "new_api": null,
          "old_text": "RelationCopyStorageUsingBuffer(src_rlocator, dst_rlocator, MAIN_FORKNUM,\n\t\t\t\t\t\t\t\t   permanent)",
          "new_text": null,
          "old_line_content": "\tRelationCopyStorageUsingBuffer(src_rlocator, dst_rlocator, MAIN_FORKNUM,",
          "new_line_content": "\t/* copy main fork. */",
          "content_same": false
        },
        {
          "line": 4410,
          "old_api": "GetCurrentTimestamp",
          "new_api": null,
          "old_text": "GetCurrentTimestamp()",
          "new_text": null,
          "old_line_content": "\t\t\t\twaitStart = GetCurrentTimestamp();",
          "new_line_content": "\t\t\tif (log_recovery_conflict_waits && waitStart == 0)",
          "content_same": false
        },
        {
          "line": 3898,
          "old_api": "smgropen",
          "new_api": null,
          "old_text": "smgropen(src_rlocator, InvalidBackendId)",
          "new_text": null,
          "old_line_content": "\t\tif (smgrexists(smgropen(src_rlocator, InvalidBackendId), forkNum))",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 3900,
          "old_api": "smgropen",
          "new_api": null,
          "old_text": "smgropen(dst_rlocator, InvalidBackendId)",
          "new_text": null,
          "old_line_content": "\t\t\tsmgrcreate(smgropen(dst_rlocator, InvalidBackendId), forkNum, false);",
          "new_line_content": "\t\t{",
          "content_same": false
        },
        {
          "line": 4413,
          "old_api": "SetStartupBufferPinWaitBufId",
          "new_api": null,
          "old_text": "SetStartupBufferPinWaitBufId(buffer - 1)",
          "new_text": null,
          "old_line_content": "\t\t\tSetStartupBufferPinWaitBufId(buffer - 1);",
          "new_line_content": "\t\t\t/* Publish the bufid that Startup process waits on */",
          "content_same": false
        },
        {
          "line": 4415,
          "old_api": "ResolveRecoveryConflictWithBufferPin",
          "new_api": null,
          "old_text": "ResolveRecoveryConflictWithBufferPin()",
          "new_text": null,
          "old_line_content": "\t\t\tResolveRecoveryConflictWithBufferPin();",
          "new_line_content": "\t\t\t/* Set alarm and then wait to be signaled by UnpinBuffer() */",
          "content_same": false
        },
        {
          "line": 4417,
          "old_api": "SetStartupBufferPinWaitBufId",
          "new_api": null,
          "old_text": "SetStartupBufferPinWaitBufId(-1)",
          "new_text": null,
          "old_line_content": "\t\t\tSetStartupBufferPinWaitBufId(-1);",
          "new_line_content": "\t\t\t/* Reset the published bufid */",
          "content_same": false
        },
        {
          "line": 3907,
          "old_api": "log_smgrcreate",
          "new_api": null,
          "old_text": "log_smgrcreate(&dst_rlocator, forkNum)",
          "new_text": null,
          "old_line_content": "\t\t\t\tlog_smgrcreate(&dst_rlocator, forkNum);",
          "new_line_content": "\t\t\tif (permanent || forkNum == INIT_FORKNUM)",
          "content_same": false
        },
        {
          "line": 4420,
          "old_api": "ProcWaitForSignal",
          "new_api": null,
          "old_text": "ProcWaitForSignal(PG_WAIT_BUFFER_PIN)",
          "new_text": null,
          "old_line_content": "\t\t\tProcWaitForSignal(PG_WAIT_BUFFER_PIN);",
          "new_line_content": "\t\telse",
          "content_same": false
        },
        {
          "line": 3910,
          "old_api": "RelationCopyStorageUsingBuffer",
          "new_api": null,
          "old_text": "RelationCopyStorageUsingBuffer(src_rlocator, dst_rlocator, forkNum,\n\t\t\t\t\t\t\t\t\t\t   permanent)",
          "new_text": null,
          "old_line_content": "\t\t\tRelationCopyStorageUsingBuffer(src_rlocator, dst_rlocator, forkNum,",
          "new_line_content": "\t\t\t/* Copy a fork's data, block by block. */",
          "content_same": false
        },
        {
          "line": 4430,
          "old_api": "LockBufHdr",
          "new_api": null,
          "old_text": "LockBufHdr(bufHdr)",
          "new_text": null,
          "old_line_content": "\t\tbuf_state = LockBufHdr(bufHdr);",
          "new_line_content": "\t\t */",
          "content_same": false
        },
        {
          "line": 3919,
          "old_api": "smgrcloserellocator",
          "new_api": null,
          "old_text": "smgrcloserellocator(rlocator)",
          "new_text": null,
          "old_line_content": "\tsmgrcloserellocator(rlocator);",
          "new_line_content": "\trlocator.locator = src_rlocator;",
          "content_same": false
        },
        {
          "line": 4434,
          "old_api": "UnlockBufHdr",
          "new_api": null,
          "old_text": "UnlockBufHdr(bufHdr, buf_state)",
          "new_text": null,
          "old_line_content": "\t\tUnlockBufHdr(bufHdr, buf_state);",
          "new_line_content": "\t\t\tbuf_state &= ~BM_PIN_COUNT_WAITER;",
          "content_same": false
        },
        {
          "line": 3922,
          "old_api": "smgrcloserellocator",
          "new_api": null,
          "old_text": "smgrcloserellocator(rlocator)",
          "new_text": null,
          "old_line_content": "\tsmgrcloserellocator(rlocator);",
          "new_line_content": "\trlocator.locator = dst_rlocator;",
          "content_same": false
        },
        {
          "line": 4448,
          "old_api": "GetStartupBufferPinWaitBufId",
          "new_api": null,
          "old_text": "GetStartupBufferPinWaitBufId()",
          "new_text": null,
          "old_line_content": "\tint\t\t\tbufid = GetStartupBufferPinWaitBufId();",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 4963,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(*max_pending <= WRITEBACK_MAX_PENDING_FLUSHES)",
          "new_text": null,
          "old_line_content": "\tAssert(*max_pending <= WRITEBACK_MAX_PENDING_FLUSHES);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 4459,
          "old_api": "GetPrivateRefCount",
          "new_api": null,
          "old_text": "GetPrivateRefCount(bufid + 1)",
          "new_text": null,
          "old_line_content": "\tif (GetPrivateRefCount(bufid + 1) > 0)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3947,
          "old_api": "ResourceOwnerEnlargeBuffers",
          "new_api": null,
          "old_text": "ResourceOwnerEnlargeBuffers(CurrentResourceOwner)",
          "new_text": null,
          "old_line_content": "\tResourceOwnerEnlargeBuffers(CurrentResourceOwner);",
          "new_line_content": "\t/* Make sure we can handle the pin inside the loop */",
          "content_same": false
        },
        {
          "line": 3953,
          "old_api": "GetBufferDescriptor",
          "new_api": null,
          "old_text": "GetBufferDescriptor(i)",
          "new_text": null,
          "old_line_content": "\t\tbufHdr = GetBufferDescriptor(i);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4983,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(*context->max_pending <= WRITEBACK_MAX_PENDING_FLUSHES)",
          "new_text": null,
          "old_line_content": "\t\tAssert(*context->max_pending <= WRITEBACK_MAX_PENDING_FLUSHES);",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 3962,
          "old_api": "ReservePrivateRefCountEntry",
          "new_api": null,
          "old_text": "ReservePrivateRefCountEntry()",
          "new_text": null,
          "old_line_content": "\t\tReservePrivateRefCountEntry();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3964,
          "old_api": "LockBufHdr",
          "new_api": null,
          "old_text": "LockBufHdr(bufHdr)",
          "new_text": null,
          "old_line_content": "\t\tbuf_state = LockBufHdr(bufHdr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4478,
          "old_api": "BufferIsValid",
          "new_api": null,
          "old_text": "BufferIsValid(buffer)",
          "new_text": null,
          "old_line_content": "\tAssert(BufferIsValid(buffer));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4480,
          "old_api": "BufferIsLocal",
          "new_api": null,
          "old_text": "BufferIsLocal(buffer)",
          "new_text": null,
          "old_line_content": "\tif (BufferIsLocal(buffer))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3968,
          "old_api": "PinBuffer_Locked",
          "new_api": null,
          "old_text": "PinBuffer_Locked(bufHdr)",
          "new_text": null,
          "old_line_content": "\t\t\tPinBuffer_Locked(bufHdr);",
          "new_line_content": "\t\t{",
          "content_same": false
        },
        {
          "line": 4484,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(refcount > 0)",
          "new_text": null,
          "old_line_content": "\t\tAssert(refcount > 0);",
          "new_line_content": "\t\t/* There should be exactly one pin */",
          "content_same": false
        },
        {
          "line": 4996,
          "old_api": "IssuePendingWritebacks",
          "new_api": null,
          "old_text": "IssuePendingWritebacks(context)",
          "new_text": null,
          "old_line_content": "\t\tIssuePendingWritebacks(context);",
          "new_line_content": "\tif (context->nr_pending >= *context->max_pending)",
          "content_same": false
        },
        {
          "line": 3975,
          "old_api": "UnlockBufHdr",
          "new_api": null,
          "old_text": "UnlockBufHdr(bufHdr, buf_state)",
          "new_text": null,
          "old_line_content": "\t\t\tUnlockBufHdr(bufHdr, buf_state);",
          "new_line_content": "\t\telse",
          "content_same": false
        },
        {
          "line": 4492,
          "old_api": "GetPrivateRefCount",
          "new_api": null,
          "old_text": "GetPrivateRefCount(buffer)",
          "new_text": null,
          "old_line_content": "\trefcount = GetPrivateRefCount(buffer);",
          "new_line_content": "\t/* There should be exactly one local pin */",
          "content_same": false
        },
        {
          "line": 4498,
          "old_api": "ConditionalLockBuffer",
          "new_api": null,
          "old_text": "ConditionalLockBuffer(buffer)",
          "new_text": null,
          "old_line_content": "\tif (!ConditionalLockBuffer(buffer))",
          "new_line_content": "\t/* Try to acquire lock */",
          "content_same": false
        },
        {
          "line": 4501,
          "old_api": "GetBufferDescriptor",
          "new_api": null,
          "old_text": "GetBufferDescriptor(buffer - 1)",
          "new_text": null,
          "old_line_content": "\tbufHdr = GetBufferDescriptor(buffer - 1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3989,
          "old_api": "BufferIsLocal",
          "new_api": null,
          "old_text": "BufferIsLocal(buffer)",
          "new_text": null,
          "old_line_content": "\tAssert(!BufferIsLocal(buffer));",
          "new_line_content": "\t/* currently not needed, but no fundamental reason not to support */",
          "content_same": false
        },
        {
          "line": 3991,
          "old_api": "BufferIsPinned",
          "new_api": null,
          "old_text": "BufferIsPinned(buffer)",
          "new_text": null,
          "old_line_content": "\tAssert(BufferIsPinned(buffer));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4505,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(refcount > 0)",
          "new_text": null,
          "old_line_content": "\tAssert(refcount > 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3993,
          "old_api": "GetBufferDescriptor",
          "new_api": null,
          "old_text": "GetBufferDescriptor(buffer - 1)",
          "new_text": null,
          "old_line_content": "\tbufHdr = GetBufferDescriptor(buffer - 1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3995,
          "old_api": "BufferDescriptorGetContentLock",
          "new_api": null,
          "old_text": "BufferDescriptorGetContentLock(bufHdr)",
          "new_text": null,
          "old_line_content": "\tAssert(LWLockHeldByMe(BufferDescriptorGetContentLock(bufHdr)));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4509,
          "old_api": "UnlockBufHdr",
          "new_api": null,
          "old_text": "UnlockBufHdr(bufHdr, buf_state)",
          "new_text": null,
          "old_line_content": "\t\tUnlockBufHdr(bufHdr, buf_state);",
          "new_line_content": "\t\t/* Successfully acquired exclusive lock with pincount 1 */",
          "content_same": false
        },
        {
          "line": 3997,
          "old_api": "FlushBuffer",
          "new_api": null,
          "old_text": "FlushBuffer(bufHdr, NULL, IOOBJECT_RELATION, IOCONTEXT_NORMAL)",
          "new_text": null,
          "old_line_content": "\tFlushBuffer(bufHdr, NULL, IOOBJECT_RELATION, IOCONTEXT_NORMAL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5025,
          "old_api": "sort_pending_writebacks",
          "new_api": null,
          "old_text": "sort_pending_writebacks(context->pending_writebacks, context->nr_pending)",
          "new_text": null,
          "old_line_content": "\tsort_pending_writebacks(context->pending_writebacks, context->nr_pending);",
          "new_line_content": "\t */",
          "content_same": false
        },
        {
          "line": 4514,
          "old_api": "UnlockBufHdr",
          "new_api": null,
          "old_text": "UnlockBufHdr(bufHdr, buf_state)",
          "new_text": null,
          "old_line_content": "\tUnlockBufHdr(bufHdr, buf_state);",
          "new_line_content": "\t/* Failed, so release the lock */",
          "content_same": false
        },
        {
          "line": 4006,
          "old_api": "BufferIsValid",
          "new_api": null,
          "old_text": "BufferIsValid(buffer)",
          "new_text": null,
          "old_line_content": "\tif (!BufferIsValid(buffer))",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 4009,
          "old_api": "BufferIsLocal",
          "new_api": null,
          "old_text": "BufferIsLocal(buffer)",
          "new_text": null,
          "old_line_content": "\tif (BufferIsLocal(buffer))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4011,
          "old_api": "ResourceOwnerForgetBuffer",
          "new_api": null,
          "old_text": "ResourceOwnerForgetBuffer(CurrentResourceOwner, buffer)",
          "new_text": null,
          "old_line_content": "\t\tResourceOwnerForgetBuffer(CurrentResourceOwner, buffer);",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 4013,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(LocalRefCount[-buffer - 1] > 0)",
          "new_text": null,
          "old_line_content": "\t\tAssert(LocalRefCount[-buffer - 1] > 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4018,
          "old_api": "GetBufferDescriptor",
          "new_api": null,
          "old_text": "GetBufferDescriptor(buffer - 1)",
          "new_text": null,
          "old_line_content": "\tUnpinBuffer(GetBufferDescriptor(buffer - 1));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5044,
          "old_api": "BufTagGetRelFileLocator",
          "new_api": null,
          "old_text": "BufTagGetRelFileLocator(&tag)",
          "new_text": null,
          "old_line_content": "\t\tcurrlocator = BufTagGetRelFileLocator(&tag);",
          "new_line_content": "\t\ttag = cur->tag;",
          "content_same": false
        },
        {
          "line": 4533,
          "old_api": "BufferIsValid",
          "new_api": null,
          "old_text": "BufferIsValid(buffer)",
          "new_text": null,
          "old_line_content": "\tAssert(BufferIsValid(buffer));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4535,
          "old_api": "BufferIsLocal",
          "new_api": null,
          "old_text": "BufferIsLocal(buffer)",
          "new_text": null,
          "old_line_content": "\tif (BufferIsLocal(buffer))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4029,
          "old_api": "LockBuffer",
          "new_api": null,
          "old_text": "LockBuffer(buffer, BUFFER_LOCK_UNLOCK)",
          "new_text": null,
          "old_line_content": "\tLockBuffer(buffer, BUFFER_LOCK_UNLOCK);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 5056,
          "old_api": "RelFileLocatorEquals",
          "new_api": null,
          "old_text": "RelFileLocatorEquals(currlocator,\n\t\t\t\t\t\t\t\t\t  BufTagGetRelFileLocator(&next->tag))",
          "new_text": null,
          "old_line_content": "\t\t\tif (!RelFileLocatorEquals(currlocator,",
          "new_line_content": "\t\t\t/* different file, stop */",
          "content_same": false
        },
        {
          "line": 4545,
          "old_api": "GetPrivateRefCount",
          "new_api": null,
          "old_text": "GetPrivateRefCount(buffer)",
          "new_text": null,
          "old_line_content": "\tif (GetPrivateRefCount(buffer) != 1)",
          "new_line_content": "\t/* There should be exactly one local pin */",
          "content_same": false
        },
        {
          "line": 4548,
          "old_api": "GetBufferDescriptor",
          "new_api": null,
          "old_text": "GetBufferDescriptor(buffer - 1)",
          "new_text": null,
          "old_line_content": "\tbufHdr = GetBufferDescriptor(buffer - 1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4551,
          "old_api": "BufferDescriptorGetContentLock",
          "new_api": null,
          "old_text": "BufferDescriptorGetContentLock(bufHdr)",
          "new_text": null,
          "old_line_content": "\tAssert(LWLockHeldByMeInMode(BufferDescriptorGetContentLock(bufHdr),",
          "new_line_content": "\t/* caller must hold exclusive lock on buffer */",
          "content_same": false
        },
        {
          "line": 4554,
          "old_api": "LockBufHdr",
          "new_api": null,
          "old_text": "LockBufHdr(bufHdr)",
          "new_text": null,
          "old_line_content": "\tbuf_state = LockBufHdr(bufHdr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4556,
          "old_api": "BUF_STATE_GET_REFCOUNT",
          "new_api": null,
          "old_text": "BUF_STATE_GET_REFCOUNT(buf_state)",
          "new_text": null,
          "old_line_content": "\tAssert(BUF_STATE_GET_REFCOUNT(buf_state) > 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4044,
          "old_api": "BufferIsPinned",
          "new_api": null,
          "old_text": "BufferIsPinned(buffer)",
          "new_text": null,
          "old_line_content": "\tAssert(BufferIsPinned(buffer));",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 4560,
          "old_api": "UnlockBufHdr",
          "new_api": null,
          "old_text": "UnlockBufHdr(bufHdr, buf_state)",
          "new_text": null,
          "old_line_content": "\t\tUnlockBufHdr(bufHdr, buf_state);",
          "new_line_content": "\t\t/* pincount is OK. */",
          "content_same": false
        },
        {
          "line": 4564,
          "old_api": "UnlockBufHdr",
          "new_api": null,
          "old_text": "UnlockBufHdr(bufHdr, buf_state)",
          "new_text": null,
          "old_line_content": "\tUnlockBufHdr(bufHdr, buf_state);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5076,
          "old_api": "smgropen",
          "new_api": null,
          "old_text": "smgropen(currlocator, InvalidBackendId)",
          "new_text": null,
          "old_line_content": "\t\treln = smgropen(currlocator, InvalidBackendId);",
          "new_line_content": "\t\t/* and finally tell the kernel to write the data to storage */",
          "content_same": false
        },
        {
          "line": 4052,
          "old_api": "GetPrivateRefCountEntry",
          "new_api": null,
          "old_text": "GetPrivateRefCountEntry(buffer, true)",
          "new_text": null,
          "old_line_content": "\t\tref = GetPrivateRefCountEntry(buffer, true);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4056,
          "old_api": "ResourceOwnerRememberBuffer",
          "new_api": null,
          "old_text": "ResourceOwnerRememberBuffer(CurrentResourceOwner, buffer)",
          "new_text": null,
          "old_line_content": "\tResourceOwnerRememberBuffer(CurrentResourceOwner, buffer);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 5093,
          "old_api": "RelationAllowsEarlyPruning",
          "new_api": null,
          "old_text": "RelationAllowsEarlyPruning(relation)",
          "new_text": null,
          "old_line_content": "\tif (RelationAllowsEarlyPruning(relation)",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 4584,
          "old_api": "BufferDescriptorGetIOCV",
          "new_api": null,
          "old_text": "BufferDescriptorGetIOCV(buf)",
          "new_text": null,
          "old_line_content": "\tConditionVariable *cv = BufferDescriptorGetIOCV(buf);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 4586,
          "old_api": "ConditionVariablePrepareToSleep",
          "new_api": null,
          "old_text": "ConditionVariablePrepareToSleep(cv)",
          "new_text": null,
          "old_line_content": "\tConditionVariablePrepareToSleep(cv);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4077,
          "old_api": "BufferGetPage",
          "new_api": null,
          "old_text": "BufferGetPage(buffer)",
          "new_text": null,
          "old_line_content": "\tPage\t\tpage = BufferGetPage(buffer);",
          "new_line_content": "\tBufferDesc *bufHdr;",
          "content_same": false
        },
        {
          "line": 4079,
          "old_api": "BufferIsValid",
          "new_api": null,
          "old_text": "BufferIsValid(buffer)",
          "new_text": null,
          "old_line_content": "\tif (!BufferIsValid(buffer))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4082,
          "old_api": "BufferIsLocal",
          "new_api": null,
          "old_text": "BufferIsLocal(buffer)",
          "new_text": null,
          "old_line_content": "\tif (BufferIsLocal(buffer))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4596,
          "old_api": "LockBufHdr",
          "new_api": null,
          "old_text": "LockBufHdr(buf)",
          "new_text": null,
          "old_line_content": "\t\tbuf_state = LockBufHdr(buf);",
          "new_line_content": "\t\t */",
          "content_same": false
        },
        {
          "line": 4084,
          "old_api": "MarkLocalBufferDirty",
          "new_api": null,
          "old_text": "MarkLocalBufferDirty(buffer)",
          "new_text": null,
          "old_line_content": "\t\tMarkLocalBufferDirty(buffer);",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 4088,
          "old_api": "GetBufferDescriptor",
          "new_api": null,
          "old_text": "GetBufferDescriptor(buffer - 1)",
          "new_text": null,
          "old_line_content": "\tbufHdr = GetBufferDescriptor(buffer - 1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4601,
          "old_api": "ConditionVariableSleep",
          "new_api": null,
          "old_text": "ConditionVariableSleep(cv, WAIT_EVENT_BUFFER_IO)",
          "new_text": null,
          "old_line_content": "\t\tConditionVariableSleep(cv, WAIT_EVENT_BUFFER_IO);",
          "new_line_content": "\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 4090,
          "old_api": "GetPrivateRefCount",
          "new_api": null,
          "old_text": "GetPrivateRefCount(buffer)",
          "new_text": null,
          "old_line_content": "\tAssert(GetPrivateRefCount(buffer) > 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4603,
          "old_api": "ConditionVariableCancelSleep",
          "new_api": null,
          "old_text": "ConditionVariableCancelSleep()",
          "new_text": null,
          "old_line_content": "\tConditionVariableCancelSleep();",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 4092,
          "old_api": "BufferDescriptorGetContentLock",
          "new_api": null,
          "old_text": "BufferDescriptorGetContentLock(bufHdr)",
          "new_text": null,
          "old_line_content": "\tAssert(LWLockHeldByMe(BufferDescriptorGetContentLock(bufHdr)));",
          "new_line_content": "\t/* here, either share or exclusive lock is OK */",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 49,
      "total_additions": 155,
      "total_deletions": 154,
      "total_api_changes": 358
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 7,
        "api_related_lines": 358,
        "non_api_lines": 1,
        "non_api_line_numbers": [
          3838
        ]
      }
    },
    "api_calls_before": 818,
    "api_calls_after": 819,
    "diff_info": {
      "added_lines": 4,
      "removed_lines": 3,
      "total_diff_lines": 28
    }
  }
}
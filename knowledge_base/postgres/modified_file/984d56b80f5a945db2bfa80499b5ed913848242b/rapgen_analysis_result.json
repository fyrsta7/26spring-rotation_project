{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/postgres/modified_file/984d56b80f5a945db2bfa80499b5ed913848242b",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/postgres/modified_file/984d56b80f5a945db2bfa80499b5ed913848242b/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/postgres/modified_file/984d56b80f5a945db2bfa80499b5ed913848242b/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/postgres/modified_file/984d56b80f5a945db2bfa80499b5ed913848242b/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 7245,
          "old_api": "smgrnblocks",
          "new_api": "palloc",
          "old_text": "smgrnblocks(src, forkNum)",
          "new_text": "palloc(BLCKSZ)",
          "old_line_content": "\tnblocks = smgrnblocks(src, forkNum);",
          "new_line_content": "\tbuf = (char *) palloc(BLCKSZ);",
          "content_same": false
        },
        {
          "line": 7252,
          "old_api": "smgrread",
          "new_api": "XLogIsNeeded",
          "old_text": "smgrread(src, forkNum, blkno, buf)",
          "new_text": "XLogIsNeeded()",
          "old_line_content": "\t\tsmgrread(src, forkNum, blkno, buf);",
          "new_line_content": "\tuse_wal = XLogIsNeeded() && !istemp;",
          "content_same": false
        },
        {
          "line": 7350,
          "old_api": "errcode",
          "new_api": "heap_openrv",
          "old_text": "errcode(ERRCODE_WRONG_OBJECT_TYPE)",
          "new_text": "heap_openrv(parent, AccessShareLock)",
          "old_line_content": "\t\t\t\t(errcode(ERRCODE_WRONG_OBJECT_TYPE),",
          "new_line_content": "\tparent_rel = heap_openrv(parent, AccessShareLock);",
          "content_same": false
        },
        {
          "line": 7362,
          "old_api": "heap_open",
          "new_api": "errmsg",
          "old_text": "heap_open(InheritsRelationId, RowExclusiveLock)",
          "new_text": "errmsg(\"cannot inherit from temporary relation \\\"%s\\\"\",\n\t\t\t\t\t\tRelationGetRelationName(parent_rel))",
          "old_line_content": "\tcatalogRelation = heap_open(InheritsRelationId, RowExclusiveLock);",
          "new_line_content": "\t\t\t\t errmsg(\"cannot inherit from temporary relation \\\"%s\\\"\",",
          "content_same": false
        },
        {
          "line": 7363,
          "old_api": "ScanKeyInit",
          "new_api": "RelationGetRelationName",
          "old_text": "ScanKeyInit(&key,\n\t\t\t\tAnum_pg_inherits_inhrelid,\n\t\t\t\tBTEqualStrategyNumber, F_OIDEQ,\n\t\t\t\tObjectIdGetDatum(RelationGetRelid(child_rel)))",
          "new_text": "RelationGetRelationName(parent_rel)",
          "old_line_content": "\tScanKeyInit(&key,",
          "new_line_content": "\t\t\t\t\t\tRelationGetRelationName(parent_rel))));",
          "content_same": false
        },
        {
          "line": 7374,
          "old_api": "GETSTRUCT",
          "new_api": "ScanKeyInit",
          "old_text": "GETSTRUCT(inheritsTuple)",
          "new_text": "ScanKeyInit(&key,\n\t\t\t\tAnum_pg_inherits_inhrelid,\n\t\t\t\tBTEqualStrategyNumber, F_OIDEQ,\n\t\t\t\tObjectIdGetDatum(RelationGetRelid(child_rel)))",
          "old_line_content": "\t\tForm_pg_inherits inh = (Form_pg_inherits) GETSTRUCT(inheritsTuple);",
          "new_line_content": "\tScanKeyInit(&key,",
          "content_same": false
        },
        {
          "line": 7377,
          "old_api": "ereport",
          "new_api": "RelationGetRelid",
          "old_text": "ereport(ERROR,\n\t\t\t\t\t(errcode(ERRCODE_DUPLICATE_TABLE),\n\t\t\t errmsg(\"relation \\\"%s\\\" would be inherited from more than once\",\n\t\t\t\t\tRelationGetRelationName(parent_rel))))",
          "new_text": "RelationGetRelid(child_rel)",
          "old_line_content": "\t\t\tereport(ERROR,",
          "new_line_content": "\t\t\t\tObjectIdGetDatum(RelationGetRelid(child_rel)));",
          "content_same": false
        },
        {
          "line": 7378,
          "old_api": "errcode",
          "new_api": "systable_beginscan",
          "old_text": "errcode(ERRCODE_DUPLICATE_TABLE)",
          "new_text": "systable_beginscan(catalogRelation, InheritsRelidSeqnoIndexId,\n\t\t\t\t\t\t\t  true, SnapshotNow, 1, &key)",
          "old_line_content": "\t\t\t\t\t(errcode(ERRCODE_DUPLICATE_TABLE),",
          "new_line_content": "\tscan = systable_beginscan(catalogRelation, InheritsRelidSeqnoIndexId,",
          "content_same": false
        },
        {
          "line": 7414,
          "old_api": "errcode",
          "new_api": "RelationGetRelid",
          "old_text": "errcode(ERRCODE_WRONG_OBJECT_TYPE)",
          "new_text": "RelationGetRelid(parent_rel)",
          "old_line_content": "\t\t\t\t(errcode(ERRCODE_WRONG_OBJECT_TYPE),",
          "new_line_content": "\tif (list_member_oid(children, RelationGetRelid(parent_rel)))",
          "content_same": false
        },
        {
          "line": 7415,
          "old_api": "errmsg",
          "new_api": "ereport",
          "old_text": "errmsg(\"table \\\"%s\\\" without OIDs cannot inherit from table \\\"%s\\\" with OIDs\",\n\t\t\t\t\t\tRelationGetRelationName(child_rel),\n\t\t\t\t\t\tRelationGetRelationName(parent_rel))",
          "new_text": "ereport(ERROR,\n\t\t\t\t(errcode(ERRCODE_DUPLICATE_TABLE),\n\t\t\t\t errmsg(\"circular inheritance not allowed\"),\n\t\t\t\t errdetail(\"\\\"%s\\\" is already a child of \\\"%s\\\".\",\n\t\t\t\t\t\t   parent->relname,\n\t\t\t\t\t\t   RelationGetRelationName(child_rel))))",
          "old_line_content": "\t\t\t\t errmsg(\"table \\\"%s\\\" without OIDs cannot inherit from table \\\"%s\\\" with OIDs\",",
          "new_line_content": "\t\tereport(ERROR,",
          "content_same": false
        },
        {
          "line": 7416,
          "old_api": "RelationGetRelationName",
          "new_api": "errcode",
          "old_text": "RelationGetRelationName(child_rel)",
          "new_text": "errcode(ERRCODE_DUPLICATE_TABLE)",
          "old_line_content": "\t\t\t\t\t\tRelationGetRelationName(child_rel),",
          "new_line_content": "\t\t\t\t(errcode(ERRCODE_DUPLICATE_TABLE),",
          "content_same": false
        },
        {
          "line": 7417,
          "old_api": "RelationGetRelationName",
          "new_api": "errmsg",
          "old_text": "RelationGetRelationName(parent_rel)",
          "new_text": "errmsg(\"circular inheritance not allowed\")",
          "old_line_content": "\t\t\t\t\t\tRelationGetRelationName(parent_rel))));",
          "new_line_content": "\t\t\t\t errmsg(\"circular inheritance not allowed\"),",
          "content_same": false
        },
        {
          "line": 7420,
          "old_api": "MergeAttributesIntoExisting",
          "new_api": "RelationGetRelationName",
          "old_text": "MergeAttributesIntoExisting(child_rel, parent_rel)",
          "new_text": "RelationGetRelationName(child_rel)",
          "old_line_content": "\tMergeAttributesIntoExisting(child_rel, parent_rel);",
          "new_line_content": "\t\t\t\t\t\t   RelationGetRelationName(child_rel))));",
          "content_same": false
        },
        {
          "line": 7428,
          "old_api": "RelationGetRelid",
          "new_api": "RelationGetRelationName",
          "old_text": "RelationGetRelid(child_rel)",
          "new_text": "RelationGetRelationName(parent_rel)",
          "old_line_content": "\tStoreCatalogInheritance1(RelationGetRelid(child_rel),",
          "new_line_content": "\t\t\t\t\t\tRelationGetRelationName(parent_rel))));",
          "content_same": false
        },
        {
          "line": 7434,
          "old_api": "heap_close",
          "new_api": "MergeConstraintsIntoExisting",
          "old_text": "heap_close(catalogRelation, RowExclusiveLock)",
          "new_text": "MergeConstraintsIntoExisting(child_rel, parent_rel)",
          "old_line_content": "\theap_close(catalogRelation, RowExclusiveLock);",
          "new_line_content": "\tMergeConstraintsIntoExisting(child_rel, parent_rel);",
          "content_same": false
        },
        {
          "line": 7535,
          "old_api": "errmsg",
          "new_api": "RelationGetRelid",
          "old_text": "errmsg(\"child table \\\"%s\\\" has different type for column \\\"%s\\\"\",\n\t\t\t\t\t\t\t\tRelationGetRelationName(child_rel),\n\t\t\t\t\t\t\t\tattributeName)",
          "new_text": "RelationGetRelid(child_rel)",
          "old_line_content": "\t\t\t\t\t\t errmsg(\"child table \\\"%s\\\" has different type for column \\\"%s\\\"\",",
          "new_line_content": "\t\ttuple = SearchSysCacheCopyAttName(RelationGetRelid(child_rel),",
          "content_same": false
        },
        {
          "line": 7540,
          "old_api": "ereport",
          "new_api": "GETSTRUCT",
          "old_text": "ereport(ERROR,\n\t\t\t\t\t\t(errcode(ERRCODE_DATATYPE_MISMATCH),\n\t\t\t\terrmsg(\"column \\\"%s\\\" in child table must be marked NOT NULL\",\n\t\t\t\t\t   attributeName)))",
          "new_text": "GETSTRUCT(tuple)",
          "old_line_content": "\t\t\t\tereport(ERROR,",
          "new_line_content": "\t\t\tForm_pg_attribute childatt = (Form_pg_attribute) GETSTRUCT(tuple);",
          "content_same": false
        },
        {
          "line": 7551,
          "old_api": "CatalogUpdateIndexes",
          "new_api": "ereport",
          "old_text": "CatalogUpdateIndexes(attrrel, tuple)",
          "new_text": "ereport(ERROR,\n\t\t\t\t\t\t(errcode(ERRCODE_DATATYPE_MISMATCH),\n\t\t\t\terrmsg(\"column \\\"%s\\\" in child table must be marked NOT NULL\",\n\t\t\t\t\t   attributeName)))",
          "old_line_content": "\t\t\tCatalogUpdateIndexes(attrrel, tuple);",
          "new_line_content": "\t\t\t\tereport(ERROR,",
          "content_same": false
        },
        {
          "line": 7552,
          "old_api": "heap_freetuple",
          "new_api": "errcode",
          "old_text": "heap_freetuple(tuple)",
          "new_text": "errcode(ERRCODE_DATATYPE_MISMATCH)",
          "old_line_content": "\t\t\theap_freetuple(tuple);",
          "new_line_content": "\t\t\t\t\t\t(errcode(ERRCODE_DATATYPE_MISMATCH),",
          "content_same": false
        },
        {
          "line": 7563,
          "old_api": "heap_close",
          "new_api": "heap_freetuple",
          "old_text": "heap_close(attrrel, RowExclusiveLock)",
          "new_text": "heap_freetuple(tuple)",
          "old_line_content": "\theap_close(attrrel, RowExclusiveLock);",
          "new_line_content": "\t\t\theap_freetuple(tuple);",
          "content_same": false
        },
        {
          "line": 7603,
          "old_api": "systable_getnext",
          "new_api": "heap_open",
          "old_text": "systable_getnext(parent_scan)",
          "new_text": "heap_open(ConstraintRelationId, RowExclusiveLock)",
          "old_line_content": "\twhile (HeapTupleIsValid(parent_tuple = systable_getnext(parent_scan)))",
          "new_line_content": "\tcatalog_relation = heap_open(ConstraintRelationId, RowExclusiveLock);",
          "content_same": false
        },
        {
          "line": 7630,
          "old_api": "NameStr",
          "new_api": "systable_beginscan",
          "old_text": "NameStr(parent_con->conname)",
          "new_text": "systable_beginscan(catalog_relation, ConstraintRelidIndexId,\n\t\t\t\t\t\t\t\t\t\ttrue, SnapshotNow, 1, &child_key)",
          "old_line_content": "\t\t\tif (strcmp(NameStr(parent_con->conname),",
          "new_line_content": "\t\tchild_scan = systable_beginscan(catalog_relation, ConstraintRelidIndexId,",
          "content_same": false
        },
        {
          "line": 7635,
          "old_api": "ereport",
          "new_api": "GETSTRUCT",
          "old_text": "ereport(ERROR,\n\t\t\t\t\t\t(errcode(ERRCODE_DATATYPE_MISMATCH),\n\t\t\t\t\t\t errmsg(\"child table \\\"%s\\\" has different definition for check constraint \\\"%s\\\"\",\n\t\t\t\t\t\t\t\tRelationGetRelationName(child_rel),\n\t\t\t\t\t\t\t\tNameStr(parent_con->conname))))",
          "new_text": "GETSTRUCT(child_tuple)",
          "old_line_content": "\t\t\t\tereport(ERROR,",
          "new_line_content": "\t\t\tForm_pg_constraint child_con = (Form_pg_constraint) GETSTRUCT(child_tuple);",
          "content_same": false
        },
        {
          "line": 7645,
          "old_api": "heap_copytuple",
          "new_api": "constraints_equivalent",
          "old_text": "heap_copytuple(child_tuple)",
          "new_text": "constraints_equivalent(parent_tuple, child_tuple, tuple_desc)",
          "old_line_content": "\t\t\tchild_copy = heap_copytuple(child_tuple);",
          "new_line_content": "\t\t\tif (!constraints_equivalent(parent_tuple, child_tuple, tuple_desc))",
          "content_same": false
        },
        {
          "line": 7646,
          "old_api": "GETSTRUCT",
          "new_api": "ereport",
          "old_text": "GETSTRUCT(child_copy)",
          "new_text": "ereport(ERROR,\n\t\t\t\t\t\t(errcode(ERRCODE_DATATYPE_MISMATCH),\n\t\t\t\t\t\t errmsg(\"child table \\\"%s\\\" has different definition for check constraint \\\"%s\\\"\",\n\t\t\t\t\t\t\t\tRelationGetRelationName(child_rel),\n\t\t\t\t\t\t\t\tNameStr(parent_con->conname))))",
          "old_line_content": "\t\t\tchild_con = (Form_pg_constraint) GETSTRUCT(child_copy);",
          "new_line_content": "\t\t\t\tereport(ERROR,",
          "content_same": false
        },
        {
          "line": 7648,
          "old_api": "simple_heap_update",
          "new_api": "errmsg",
          "old_text": "simple_heap_update(catalog_relation, &child_copy->t_self, child_copy)",
          "new_text": "errmsg(\"child table \\\"%s\\\" has different definition for check constraint \\\"%s\\\"\",\n\t\t\t\t\t\t\t\tRelationGetRelationName(child_rel),\n\t\t\t\t\t\t\t\tNameStr(parent_con->conname))",
          "old_line_content": "\t\t\tsimple_heap_update(catalog_relation, &child_copy->t_self, child_copy);",
          "new_line_content": "\t\t\t\t\t\t errmsg(\"child table \\\"%s\\\" has different definition for check constraint \\\"%s\\\"\",",
          "content_same": false
        },
        {
          "line": 7649,
          "old_api": "CatalogUpdateIndexes",
          "new_api": "RelationGetRelationName",
          "old_text": "CatalogUpdateIndexes(catalog_relation, child_copy)",
          "new_text": "RelationGetRelationName(child_rel)",
          "old_line_content": "\t\t\tCatalogUpdateIndexes(catalog_relation, child_copy);",
          "new_line_content": "\t\t\t\t\t\t\t\tRelationGetRelationName(child_rel),",
          "content_same": false
        },
        {
          "line": 7650,
          "old_api": "heap_freetuple",
          "new_api": "NameStr",
          "old_text": "heap_freetuple(child_copy)",
          "new_text": "NameStr(parent_con->conname)",
          "old_line_content": "\t\t\theap_freetuple(child_copy);",
          "new_line_content": "\t\t\t\t\t\t\t\tNameStr(parent_con->conname))));",
          "content_same": false
        },
        {
          "line": 7656,
          "old_api": "systable_endscan",
          "new_api": "heap_copytuple",
          "old_text": "systable_endscan(child_scan)",
          "new_text": "heap_copytuple(child_tuple)",
          "old_line_content": "\t\tsystable_endscan(child_scan);",
          "new_line_content": "\t\t\tchild_copy = heap_copytuple(child_tuple);",
          "content_same": false
        },
        {
          "line": 7659,
          "old_api": "ereport",
          "new_api": "simple_heap_update",
          "old_text": "ereport(ERROR,\n\t\t\t\t\t(errcode(ERRCODE_DATATYPE_MISMATCH),\n\t\t\t\t\t errmsg(\"child table is missing constraint \\\"%s\\\"\",\n\t\t\t\t\t\t\tNameStr(parent_con->conname))))",
          "new_text": "simple_heap_update(catalog_relation, &child_copy->t_self, child_copy)",
          "old_line_content": "\t\t\tereport(ERROR,",
          "new_line_content": "\t\t\tsimple_heap_update(catalog_relation, &child_copy->t_self, child_copy);",
          "content_same": false
        },
        {
          "line": 7660,
          "old_api": "errcode",
          "new_api": "CatalogUpdateIndexes",
          "old_text": "errcode(ERRCODE_DATATYPE_MISMATCH)",
          "new_text": "CatalogUpdateIndexes(catalog_relation, child_copy)",
          "old_line_content": "\t\t\t\t\t(errcode(ERRCODE_DATATYPE_MISMATCH),",
          "new_line_content": "\t\t\tCatalogUpdateIndexes(catalog_relation, child_copy);",
          "content_same": false
        },
        {
          "line": 7661,
          "old_api": "errmsg",
          "new_api": "heap_freetuple",
          "old_text": "errmsg(\"child table is missing constraint \\\"%s\\\"\",\n\t\t\t\t\t\t\tNameStr(parent_con->conname))",
          "new_text": "heap_freetuple(child_copy)",
          "old_line_content": "\t\t\t\t\t errmsg(\"child table is missing constraint \\\"%s\\\"\",",
          "new_line_content": "\t\t\theap_freetuple(child_copy);",
          "content_same": false
        },
        {
          "line": 7715,
          "old_api": "heap_open",
          "new_api": "heap_openrv",
          "old_text": "heap_open(InheritsRelationId, RowExclusiveLock)",
          "new_text": "heap_openrv(parent, AccessShareLock)",
          "old_line_content": "\tcatalogRelation = heap_open(InheritsRelationId, RowExclusiveLock);",
          "new_line_content": "\tparent_rel = heap_openrv(parent, AccessShareLock);",
          "content_same": false
        },
        {
          "line": 7727,
          "old_api": "GETSTRUCT",
          "new_api": "ScanKeyInit",
          "old_text": "GETSTRUCT(inheritsTuple)",
          "new_text": "ScanKeyInit(&key[0],\n\t\t\t\tAnum_pg_inherits_inhrelid,\n\t\t\t\tBTEqualStrategyNumber, F_OIDEQ,\n\t\t\t\tObjectIdGetDatum(RelationGetRelid(rel)))",
          "old_line_content": "\t\tinhparent = ((Form_pg_inherits) GETSTRUCT(inheritsTuple))->inhparent;",
          "new_line_content": "\tScanKeyInit(&key[0],",
          "content_same": false
        },
        {
          "line": 7730,
          "old_api": "simple_heap_delete",
          "new_api": "RelationGetRelid",
          "old_text": "simple_heap_delete(catalogRelation, &inheritsTuple->t_self)",
          "new_text": "RelationGetRelid(rel)",
          "old_line_content": "\t\t\tsimple_heap_delete(catalogRelation, &inheritsTuple->t_self);",
          "new_line_content": "\t\t\t\tObjectIdGetDatum(RelationGetRelid(rel)));",
          "content_same": false
        },
        {
          "line": 7741,
          "old_api": "errcode",
          "new_api": "simple_heap_delete",
          "old_text": "errcode(ERRCODE_UNDEFINED_TABLE)",
          "new_text": "simple_heap_delete(catalogRelation, &inheritsTuple->t_self)",
          "old_line_content": "\t\t\t\t(errcode(ERRCODE_UNDEFINED_TABLE),",
          "new_line_content": "\t\t\tsimple_heap_delete(catalogRelation, &inheritsTuple->t_self);",
          "content_same": false
        },
        {
          "line": 7753,
          "old_api": "RelationGetRelid",
          "new_api": "errmsg",
          "old_text": "RelationGetRelid(rel)",
          "new_text": "errmsg(\"relation \\\"%s\\\" is not a parent of relation \\\"%s\\\"\",\n\t\t\t\t\t\tRelationGetRelationName(parent_rel),\n\t\t\t\t\t\tRelationGetRelationName(rel))",
          "old_line_content": "\t\t\t\tObjectIdGetDatum(RelationGetRelid(rel)));",
          "new_line_content": "\t\t\t\t errmsg(\"relation \\\"%s\\\" is not a parent of relation \\\"%s\\\"\",",
          "content_same": false
        },
        {
          "line": 7754,
          "old_api": "systable_beginscan",
          "new_api": "RelationGetRelationName",
          "old_text": "systable_beginscan(catalogRelation, AttributeRelidNumIndexId,\n\t\t\t\t\t\t\t  true, SnapshotNow, 1, key)",
          "new_text": "RelationGetRelationName(parent_rel)",
          "old_line_content": "\tscan = systable_beginscan(catalogRelation, AttributeRelidNumIndexId,",
          "new_line_content": "\t\t\t\t\t\tRelationGetRelationName(parent_rel),",
          "content_same": false
        },
        {
          "line": 7767,
          "old_api": "NameStr",
          "new_api": "systable_getnext",
          "old_text": "NameStr(att->attname)",
          "new_text": "systable_getnext(scan)",
          "old_line_content": "\t\t\t\t\t\t\t\t\t\tNameStr(att->attname)))",
          "new_line_content": "\twhile (HeapTupleIsValid(attributeTuple = systable_getnext(scan)))",
          "content_same": false
        },
        {
          "line": 7777,
          "old_api": "simple_heap_update",
          "new_api": "RelationGetRelid",
          "old_text": "simple_heap_update(catalogRelation, &copyTuple->t_self, copyTuple)",
          "new_text": "RelationGetRelid(parent_rel)",
          "old_line_content": "\t\t\tsimple_heap_update(catalogRelation, &copyTuple->t_self, copyTuple);",
          "new_line_content": "\t\tif (SearchSysCacheExistsAttName(RelationGetRelid(parent_rel),",
          "content_same": false
        },
        {
          "line": 7778,
          "old_api": "CatalogUpdateIndexes",
          "new_api": "NameStr",
          "old_text": "CatalogUpdateIndexes(catalogRelation, copyTuple)",
          "new_text": "NameStr(att->attname)",
          "old_line_content": "\t\t\tCatalogUpdateIndexes(catalogRelation, copyTuple);",
          "new_line_content": "\t\t\t\t\t\t\t\t\t\tNameStr(att->attname)))",
          "content_same": false
        },
        {
          "line": 7782,
          "old_api": "systable_endscan",
          "new_api": "GETSTRUCT",
          "old_text": "systable_endscan(scan)",
          "new_text": "GETSTRUCT(copyTuple)",
          "old_line_content": "\tsystable_endscan(scan);",
          "new_line_content": "\t\t\tForm_pg_attribute copy_att = (Form_pg_attribute) GETSTRUCT(copyTuple);",
          "content_same": false
        },
        {
          "line": 7803,
          "old_api": "GETSTRUCT",
          "new_api": "ScanKeyInit",
          "old_text": "GETSTRUCT(constraintTuple)",
          "new_text": "ScanKeyInit(&key[0],\n\t\t\t\tAnum_pg_constraint_conrelid,\n\t\t\t\tBTEqualStrategyNumber, F_OIDEQ,\n\t\t\t\tObjectIdGetDatum(RelationGetRelid(parent_rel)))",
          "old_line_content": "\t\tForm_pg_constraint con = (Form_pg_constraint) GETSTRUCT(constraintTuple);",
          "new_line_content": "\tScanKeyInit(&key[0],",
          "content_same": false
        },
        {
          "line": 7806,
          "old_api": "NameStr",
          "new_api": "RelationGetRelid",
          "old_text": "NameStr(con->conname)",
          "new_text": "RelationGetRelid(parent_rel)",
          "old_line_content": "\t\t\tconnames = lappend(connames, pstrdup(NameStr(con->conname)));",
          "new_line_content": "\t\t\t\tObjectIdGetDatum(RelationGetRelid(parent_rel)));",
          "content_same": false
        },
        {
          "line": 7812,
          "old_api": "ScanKeyInit",
          "new_api": "systable_getnext",
          "old_text": "ScanKeyInit(&key[0],\n\t\t\t\tAnum_pg_constraint_conrelid,\n\t\t\t\tBTEqualStrategyNumber, F_OIDEQ,\n\t\t\t\tObjectIdGetDatum(RelationGetRelid(rel)))",
          "new_text": "systable_getnext(scan)",
          "old_line_content": "\tScanKeyInit(&key[0],",
          "new_line_content": "\twhile (HeapTupleIsValid(constraintTuple = systable_getnext(scan)))",
          "content_same": false
        },
        {
          "line": 7842,
          "old_api": "GETSTRUCT",
          "new_api": "lfirst",
          "old_text": "GETSTRUCT(copyTuple)",
          "new_text": "lfirst(lc)",
          "old_line_content": "\t\t\tForm_pg_constraint copy_con = (Form_pg_constraint) GETSTRUCT(copyTuple);",
          "new_line_content": "\t\t\tif (strcmp(NameStr(con->conname), (char *) lfirst(lc)) == 0)",
          "content_same": false
        },
        {
          "line": 7852,
          "old_api": "simple_heap_update",
          "new_api": "heap_copytuple",
          "old_text": "simple_heap_update(catalogRelation, &copyTuple->t_self, copyTuple)",
          "new_text": "heap_copytuple(constraintTuple)",
          "old_line_content": "\t\t\tsimple_heap_update(catalogRelation, &copyTuple->t_self, copyTuple);",
          "new_line_content": "\t\t\tHeapTuple\tcopyTuple = heap_copytuple(constraintTuple);",
          "content_same": false
        },
        {
          "line": 7853,
          "old_api": "CatalogUpdateIndexes",
          "new_api": "GETSTRUCT",
          "old_text": "CatalogUpdateIndexes(catalogRelation, copyTuple)",
          "new_text": "GETSTRUCT(copyTuple)",
          "old_line_content": "\t\t\tCatalogUpdateIndexes(catalogRelation, copyTuple);",
          "new_line_content": "\t\t\tForm_pg_constraint copy_con = (Form_pg_constraint) GETSTRUCT(copyTuple);",
          "content_same": false
        },
        {
          "line": 7879,
          "old_api": "Int32GetDatum",
          "new_api": "ScanKeyInit",
          "old_text": "Int32GetDatum(0)",
          "new_text": "ScanKeyInit(&key[0],\n\t\t\t\tAnum_pg_depend_classid,\n\t\t\t\tBTEqualStrategyNumber, F_OIDEQ,\n\t\t\t\tObjectIdGetDatum(RelationRelationId))",
          "old_line_content": "\t\t\t\tInt32GetDatum(0));",
          "new_line_content": "\tScanKeyInit(&key[0],",
          "content_same": false
        },
        {
          "line": 7886,
          "old_api": "GETSTRUCT",
          "new_api": "RelationGetRelid",
          "old_text": "GETSTRUCT(depTuple)",
          "new_text": "RelationGetRelid(rel)",
          "old_line_content": "\t\tForm_pg_depend dep = (Form_pg_depend) GETSTRUCT(depTuple);",
          "new_line_content": "\t\t\t\tObjectIdGetDatum(RelationGetRelid(rel)));",
          "content_same": false
        },
        {
          "line": 7892,
          "old_api": "simple_heap_delete",
          "new_api": "systable_beginscan",
          "old_text": "simple_heap_delete(catalogRelation, &depTuple->t_self)",
          "new_text": "systable_beginscan(catalogRelation, DependDependerIndexId, true,\n\t\t\t\t\t\t\t  SnapshotNow, 3, key)",
          "old_line_content": "\t\t\tsimple_heap_delete(catalogRelation, &depTuple->t_self);",
          "new_line_content": "\tscan = systable_beginscan(catalogRelation, DependDependerIndexId, true,",
          "content_same": false
        },
        {
          "line": 7895,
          "old_api": "systable_endscan",
          "new_api": "systable_getnext",
          "old_text": "systable_endscan(scan)",
          "new_text": "systable_getnext(scan)",
          "old_line_content": "\tsystable_endscan(scan);",
          "new_line_content": "\twhile (HeapTupleIsValid(depTuple = systable_getnext(scan)))",
          "content_same": false
        },
        {
          "line": 7947,
          "old_api": "RelationGetRelationName",
          "new_api": "ereport",
          "old_text": "RelationGetRelationName(rel)",
          "new_text": "ereport(ERROR,\n\t\t\t\t\t\t(errcode(ERRCODE_WRONG_OBJECT_TYPE),\n\t\t\t\t\t\t errmsg(\"\\\"%s\\\" is not a sequence\",\n\t\t\t\t\t\t\t\tRelationGetRelationName(rel))))",
          "old_line_content": "\t\t\t\t\t\t\t\tRelationGetRelationName(rel))));",
          "new_line_content": "\t\t\t\tereport(ERROR,",
          "content_same": false
        },
        {
          "line": 7978,
          "old_api": "errcode",
          "new_api": "sequenceIsOwned",
          "old_text": "errcode(ERRCODE_WRONG_OBJECT_TYPE)",
          "new_text": "sequenceIsOwned(relid, &tableId, &colId)",
          "old_line_content": "\t\t\t\t\t(errcode(ERRCODE_WRONG_OBJECT_TYPE),",
          "new_line_content": "\t\t\t\tif (sequenceIsOwned(relid, &tableId, &colId))",
          "content_same": false
        },
        {
          "line": 7979,
          "old_api": "errmsg",
          "new_api": "ereport",
          "old_text": "errmsg(\"\\\"%s\\\" is a composite type\",\n\t\t\t\t\t\t\tRelationGetRelationName(rel))",
          "new_text": "ereport(ERROR,\n\t\t\t\t\t\t\t(errcode(ERRCODE_FEATURE_NOT_SUPPORTED),\n\t\t\t\t\t\t\t errmsg(\"cannot move an owned sequence into another schema\"),\n\t\t\t\t\t  errdetail(\"Sequence \\\"%s\\\" is linked to table \\\"%s\\\".\",\n\t\t\t\t\t\t\t\tRelationGetRelationName(rel),\n\t\t\t\t\t\t\t\tget_rel_name(tableId))))",
          "old_line_content": "\t\t\t\t\t errmsg(\"\\\"%s\\\" is a composite type\",",
          "new_line_content": "\t\t\t\t\tereport(ERROR,",
          "content_same": false
        },
        {
          "line": 7980,
          "old_api": "RelationGetRelationName",
          "new_api": "errcode",
          "old_text": "RelationGetRelationName(rel)",
          "new_text": "errcode(ERRCODE_FEATURE_NOT_SUPPORTED)",
          "old_line_content": "\t\t\t\t\t\t\tRelationGetRelationName(rel)),",
          "new_line_content": "\t\t\t\t\t\t\t(errcode(ERRCODE_FEATURE_NOT_SUPPORTED),",
          "content_same": false
        },
        {
          "line": 7981,
          "old_api": "errhint",
          "new_api": "errmsg",
          "old_text": "errhint(\"Use ALTER TYPE instead.\")",
          "new_text": "errmsg(\"cannot move an owned sequence into another schema\")",
          "old_line_content": "\t\t\t\t\t errhint(\"Use ALTER TYPE instead.\")));",
          "new_line_content": "\t\t\t\t\t\t\t errmsg(\"cannot move an owned sequence into another schema\"),",
          "content_same": false
        },
        {
          "line": 7988,
          "old_api": "errcode",
          "new_api": "ereport",
          "old_text": "errcode(ERRCODE_WRONG_OBJECT_TYPE)",
          "new_text": "ereport(ERROR,\n\t\t\t\t\t(errcode(ERRCODE_WRONG_OBJECT_TYPE),\n\t\t\t\t\t errmsg(\"\\\"%s\\\" is a composite type\",\n\t\t\t\t\t\t\tRelationGetRelationName(rel)),\n\t\t\t\t\t errhint(\"Use ALTER TYPE instead.\")))",
          "old_line_content": "\t\t\t\t\t(errcode(ERRCODE_WRONG_OBJECT_TYPE),",
          "new_line_content": "\t\t\tereport(ERROR,",
          "content_same": false
        },
        {
          "line": 7989,
          "old_api": "errmsg",
          "new_api": "errcode",
          "old_text": "errmsg(\"\\\"%s\\\" is not a table, view, or sequence\",\n\t\t\t\t\t\t\tRelationGetRelationName(rel))",
          "new_text": "errcode(ERRCODE_WRONG_OBJECT_TYPE)",
          "old_line_content": "\t\t\t\t\t errmsg(\"\\\"%s\\\" is not a table, view, or sequence\",",
          "new_line_content": "\t\t\t\t\t(errcode(ERRCODE_WRONG_OBJECT_TYPE),",
          "content_same": false
        },
        {
          "line": 7990,
          "old_api": "RelationGetRelationName",
          "new_api": "errmsg",
          "old_text": "RelationGetRelationName(rel)",
          "new_text": "errmsg(\"\\\"%s\\\" is a composite type\",\n\t\t\t\t\t\t\tRelationGetRelationName(rel))",
          "old_line_content": "\t\t\t\t\t\t\tRelationGetRelationName(rel))));",
          "new_line_content": "\t\t\t\t\t errmsg(\"\\\"%s\\\" is a composite type\",",
          "content_same": false
        },
        {
          "line": 7998,
          "old_api": "errcode",
          "new_api": "ereport",
          "old_text": "errcode(ERRCODE_DUPLICATE_TABLE)",
          "new_text": "ereport(ERROR,\n\t\t\t\t\t(errcode(ERRCODE_WRONG_OBJECT_TYPE),\n\t\t\t\t\t errmsg(\"\\\"%s\\\" is not a table, view, or sequence\",\n\t\t\t\t\t\t\tRelationGetRelationName(rel))))",
          "old_line_content": "\t\t\t\t(errcode(ERRCODE_DUPLICATE_TABLE),",
          "new_line_content": "\t\t\tereport(ERROR,",
          "content_same": false
        },
        {
          "line": 7999,
          "old_api": "errmsg",
          "new_api": "errcode",
          "old_text": "errmsg(\"relation \\\"%s\\\" is already in schema \\\"%s\\\"\",\n\t\t\t\t\t\tRelationGetRelationName(rel),\n\t\t\t\t\t\tnewschema)",
          "new_text": "errcode(ERRCODE_WRONG_OBJECT_TYPE)",
          "old_line_content": "\t\t\t\t errmsg(\"relation \\\"%s\\\" is already in schema \\\"%s\\\"\",",
          "new_line_content": "\t\t\t\t\t(errcode(ERRCODE_WRONG_OBJECT_TYPE),",
          "content_same": false
        },
        {
          "line": 8000,
          "old_api": "RelationGetRelationName",
          "new_api": "errmsg",
          "old_text": "RelationGetRelationName(rel)",
          "new_text": "errmsg(\"\\\"%s\\\" is not a table, view, or sequence\",\n\t\t\t\t\t\t\tRelationGetRelationName(rel))",
          "old_line_content": "\t\t\t\t\t\tRelationGetRelationName(rel),",
          "new_line_content": "\t\t\t\t\t errmsg(\"\\\"%s\\\" is not a table, view, or sequence\",",
          "content_same": false
        },
        {
          "line": 8005,
          "old_api": "ereport",
          "new_api": "LookupCreationNamespace",
          "old_text": "ereport(ERROR,\n\t\t\t\t(errcode(ERRCODE_FEATURE_NOT_SUPPORTED),\n\t\t\terrmsg(\"cannot move objects into or out of temporary schemas\")))",
          "new_text": "LookupCreationNamespace(newschema)",
          "old_line_content": "\t\tereport(ERROR,",
          "new_line_content": "\tnspOid = LookupCreationNamespace(newschema);",
          "content_same": false
        },
        {
          "line": 8011,
          "old_api": "ereport",
          "new_api": "RelationGetRelationName",
          "old_text": "ereport(ERROR,\n\t\t\t\t(errcode(ERRCODE_FEATURE_NOT_SUPPORTED),\n\t\t\t\t errmsg(\"cannot move objects into or out of TOAST schema\")))",
          "new_text": "RelationGetRelationName(rel)",
          "old_line_content": "\t\tereport(ERROR,",
          "new_line_content": "\t\t\t\t\t\tRelationGetRelationName(rel),",
          "content_same": false
        },
        {
          "line": 8016,
          "old_api": "heap_open",
          "new_api": "ereport",
          "old_text": "heap_open(RelationRelationId, RowExclusiveLock)",
          "new_text": "ereport(ERROR,\n\t\t\t\t(errcode(ERRCODE_FEATURE_NOT_SUPPORTED),\n\t\t\terrmsg(\"cannot move objects into or out of temporary schemas\")))",
          "old_line_content": "\tclassRel = heap_open(RelationRelationId, RowExclusiveLock);",
          "new_line_content": "\t\tereport(ERROR,",
          "content_same": false
        },
        {
          "line": 8018,
          "old_api": "AlterRelationNamespaceInternal",
          "new_api": "errmsg",
          "old_text": "AlterRelationNamespaceInternal(classRel, relid, oldNspOid, nspOid, true)",
          "new_text": "errmsg(\"cannot move objects into or out of temporary schemas\")",
          "old_line_content": "\tAlterRelationNamespaceInternal(classRel, relid, oldNspOid, nspOid, true);",
          "new_line_content": "\t\t\terrmsg(\"cannot move objects into or out of temporary schemas\")));",
          "content_same": false
        },
        {
          "line": 8027,
          "old_api": "AlterSeqNamespaces",
          "new_api": "heap_open",
          "old_text": "AlterSeqNamespaces(classRel, rel, oldNspOid, nspOid, newschema, lockmode)",
          "new_text": "heap_open(RelationRelationId, RowExclusiveLock)",
          "old_line_content": "\t\tAlterSeqNamespaces(classRel, rel, oldNspOid, nspOid, newschema, lockmode);",
          "new_line_content": "\tclassRel = heap_open(RelationRelationId, RowExclusiveLock);",
          "content_same": false
        },
        {
          "line": 8061,
          "old_api": "errcode",
          "new_api": "ObjectIdGetDatum",
          "old_text": "errcode(ERRCODE_DUPLICATE_TABLE)",
          "new_text": "ObjectIdGetDatum(relOid)",
          "old_line_content": "\t\t\t\t(errcode(ERRCODE_DUPLICATE_TABLE),",
          "new_line_content": "\tclassTup = SearchSysCacheCopy1(RELOID, ObjectIdGetDatum(relOid));",
          "content_same": false
        },
        {
          "line": 8062,
          "old_api": "errmsg",
          "new_api": "HeapTupleIsValid",
          "old_text": "errmsg(\"relation \\\"%s\\\" already exists in schema \\\"%s\\\"\",\n\t\t\t\t\t\tNameStr(classForm->relname),\n\t\t\t\t\t\tget_namespace_name(newNspOid))",
          "new_text": "HeapTupleIsValid(classTup)",
          "old_line_content": "\t\t\t\t errmsg(\"relation \\\"%s\\\" already exists in schema \\\"%s\\\"\",",
          "new_line_content": "\tif (!HeapTupleIsValid(classTup))",
          "content_same": false
        },
        {
          "line": 8063,
          "old_api": "NameStr",
          "new_api": "elog",
          "old_text": "NameStr(classForm->relname)",
          "new_text": "elog(ERROR, \"cache lookup failed for relation %u\", relOid)",
          "old_line_content": "\t\t\t\t\t\tNameStr(classForm->relname),",
          "new_line_content": "\t\telog(ERROR, \"cache lookup failed for relation %u\", relOid);",
          "content_same": false
        },
        {
          "line": 8064,
          "old_api": "get_namespace_name",
          "new_api": "GETSTRUCT",
          "old_text": "get_namespace_name(newNspOid)",
          "new_text": "GETSTRUCT(classTup)",
          "old_line_content": "\t\t\t\t\t\tget_namespace_name(newNspOid))));",
          "new_line_content": "\tclassForm = (Form_pg_class) GETSTRUCT(classTup);",
          "content_same": false
        },
        {
          "line": 8069,
          "old_api": "simple_heap_update",
          "new_api": "NameStr",
          "old_text": "simple_heap_update(classRel, &classTup->t_self, classTup)",
          "new_text": "NameStr(classForm->relname)",
          "old_line_content": "\tsimple_heap_update(classRel, &classTup->t_self, classTup);",
          "new_line_content": "\tif (get_relname_relid(NameStr(classForm->relname),",
          "content_same": false
        },
        {
          "line": 8074,
          "old_api": "changeDependencyFor",
          "new_api": "NameStr",
          "old_text": "changeDependencyFor(RelationRelationId, relOid,\n\t\t\t\t\t\t\tNamespaceRelationId, oldNspOid, newNspOid)",
          "new_text": "NameStr(classForm->relname)",
          "old_line_content": "\t\tchangeDependencyFor(RelationRelationId, relOid,",
          "new_line_content": "\t\t\t\t\t\tNameStr(classForm->relname),",
          "content_same": false
        },
        {
          "line": 8106,
          "old_api": "AlterRelationNamespaceInternal",
          "new_api": "RelationGetIndexList",
          "old_text": "AlterRelationNamespaceInternal(classRel, indexOid,\n\t\t\t\t\t\t\t\t\t   oldNspOid, newNspOid,\n\t\t\t\t\t\t\t\t\t   false)",
          "new_text": "RelationGetIndexList(rel)",
          "old_line_content": "\t\tAlterRelationNamespaceInternal(classRel, indexOid,",
          "new_line_content": "\tindexList = RelationGetIndexList(rel);",
          "content_same": false
        },
        {
          "line": 8151,
          "old_api": "GETSTRUCT",
          "new_api": "ScanKeyInit",
          "old_text": "GETSTRUCT(tup)",
          "new_text": "ScanKeyInit(&key[1],\n\t\t\t\tAnum_pg_depend_refobjid,\n\t\t\t\tBTEqualStrategyNumber, F_OIDEQ,\n\t\t\t\tObjectIdGetDatum(RelationGetRelid(rel)))",
          "old_line_content": "\t\tForm_pg_depend depForm = (Form_pg_depend) GETSTRUCT(tup);",
          "new_line_content": "\tScanKeyInit(&key[1],",
          "content_same": false
        },
        {
          "line": 8162,
          "old_api": "relation_open",
          "new_api": "GETSTRUCT",
          "old_text": "relation_open(depForm->objid, lockmode)",
          "new_text": "GETSTRUCT(tup)",
          "old_line_content": "\t\tseqRel = relation_open(depForm->objid, lockmode);",
          "new_line_content": "\t\tForm_pg_depend depForm = (Form_pg_depend) GETSTRUCT(tup);",
          "content_same": false
        },
        {
          "line": 8173,
          "old_api": "AlterRelationNamespaceInternal",
          "new_api": "relation_open",
          "old_text": "AlterRelationNamespaceInternal(classRel, depForm->objid,\n\t\t\t\t\t\t\t\t\t   oldNspOid, newNspOid,\n\t\t\t\t\t\t\t\t\t   true)",
          "new_text": "relation_open(depForm->objid, lockmode)",
          "old_line_content": "\t\tAlterRelationNamespaceInternal(classRel, depForm->objid,",
          "new_line_content": "\t\tseqRel = relation_open(depForm->objid, lockmode);",
          "content_same": false
        },
        {
          "line": 8334,
          "old_api": "pfree",
          "new_api": "list_head",
          "old_text": "pfree(oc)",
          "new_text": "list_head(on_commits)",
          "old_line_content": "\t\t\tpfree(oc);",
          "new_line_content": "\tcur_item = list_head(on_commits);",
          "content_same": false
        },
        {
          "line": 8338,
          "old_api": "list_head",
          "new_api": "lfirst",
          "old_text": "list_head(on_commits)",
          "new_text": "lfirst(cur_item)",
          "old_line_content": "\t\t\t\tcur_item = list_head(on_commits);",
          "new_line_content": "\t\tOnCommitItem *oc = (OnCommitItem *) lfirst(cur_item);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 8192,
          "old_api": null,
          "new_api": "RelationGetForm",
          "old_text": null,
          "new_text": "RelationGetForm(seqRel)",
          "old_line_content": "",
          "new_line_content": "\t\tAlterTypeNamespaceInternal(RelationGetForm(seqRel)->reltype,",
          "content_same": false
        },
        {
          "line": 8196,
          "old_api": null,
          "new_api": "relation_close",
          "old_text": null,
          "new_text": "relation_close(seqRel, NoLock)",
          "old_line_content": " *\tCREATE TEMP TABLE ... ON COMMIT { DROP | PRESERVE ROWS | DELETE ROWS }",
          "new_line_content": "\t\trelation_close(seqRel, NoLock);",
          "content_same": false
        },
        {
          "line": 8199,
          "old_api": null,
          "new_api": "systable_endscan",
          "old_text": null,
          "new_text": "systable_endscan(scan)",
          "old_line_content": " * the state in a backend-local data structure.",
          "new_line_content": "\tsystable_endscan(scan);",
          "content_same": false
        },
        {
          "line": 8201,
          "old_api": null,
          "new_api": "relation_close",
          "old_text": null,
          "new_text": "relation_close(depRel, AccessShareLock)",
          "old_line_content": "",
          "new_line_content": "\trelation_close(depRel, AccessShareLock);",
          "content_same": false
        },
        {
          "line": 8229,
          "old_api": null,
          "new_api": "MemoryContextSwitchTo",
          "old_text": null,
          "new_text": "MemoryContextSwitchTo(CacheMemoryContext)",
          "old_line_content": "}",
          "new_line_content": "\toldcxt = MemoryContextSwitchTo(CacheMemoryContext);",
          "content_same": false
        },
        {
          "line": 8231,
          "old_api": null,
          "new_api": "palloc",
          "old_text": null,
          "new_text": "palloc(sizeof(OnCommitItem))",
          "old_line_content": "/*",
          "new_line_content": "\toc = (OnCommitItem *) palloc(sizeof(OnCommitItem));",
          "content_same": false
        },
        {
          "line": 8234,
          "old_api": null,
          "new_api": "GetCurrentSubTransactionId",
          "old_text": null,
          "new_text": "GetCurrentSubTransactionId()",
          "old_line_content": " * Actually, we only mark the OnCommitItem entry as to be deleted after commit.",
          "new_line_content": "\toc->creating_subid = GetCurrentSubTransactionId();",
          "content_same": false
        },
        {
          "line": 8237,
          "old_api": null,
          "new_api": "lcons",
          "old_text": null,
          "new_text": "lcons(oc, on_commits)",
          "old_line_content": "remove_on_commit_action(Oid relid)",
          "new_line_content": "\ton_commits = lcons(oc, on_commits);",
          "content_same": false
        },
        {
          "line": 7726,
          "old_api": null,
          "new_api": "heap_open",
          "old_text": null,
          "new_text": "heap_open(InheritsRelationId, RowExclusiveLock)",
          "old_line_content": "",
          "new_line_content": "\tcatalogRelation = heap_open(InheritsRelationId, RowExclusiveLock);",
          "content_same": false
        },
        {
          "line": 8239,
          "old_api": null,
          "new_api": "MemoryContextSwitchTo",
          "old_text": null,
          "new_text": "MemoryContextSwitchTo(oldcxt)",
          "old_line_content": "\tListCell   *l;",
          "new_line_content": "\tMemoryContextSwitchTo(oldcxt);",
          "content_same": false
        },
        {
          "line": 7731,
          "old_api": null,
          "new_api": "systable_beginscan",
          "old_text": null,
          "new_text": "systable_beginscan(catalogRelation, InheritsRelidSeqnoIndexId,\n\t\t\t\t\t\t\t  true, SnapshotNow, 1, key)",
          "old_line_content": "\t\t\tfound = true;",
          "new_line_content": "\tscan = systable_beginscan(catalogRelation, InheritsRelidSeqnoIndexId,",
          "content_same": false
        },
        {
          "line": 7734,
          "old_api": null,
          "new_api": "systable_getnext",
          "old_text": null,
          "new_text": "systable_getnext(scan)",
          "old_line_content": "\t}",
          "new_line_content": "\twhile (HeapTupleIsValid(inheritsTuple = systable_getnext(scan)))",
          "content_same": false
        },
        {
          "line": 7738,
          "old_api": null,
          "new_api": "GETSTRUCT",
          "old_text": null,
          "new_text": "GETSTRUCT(inheritsTuple)",
          "old_line_content": "",
          "new_line_content": "\t\tinhparent = ((Form_pg_inherits) GETSTRUCT(inheritsTuple))->inhparent;",
          "content_same": false
        },
        {
          "line": 7739,
          "old_api": null,
          "new_api": "RelationGetRelid",
          "old_text": null,
          "new_text": "RelationGetRelid(parent_rel)",
          "old_line_content": "\tif (!found)",
          "new_line_content": "\t\tif (inhparent == RelationGetRelid(parent_rel))",
          "content_same": false
        },
        {
          "line": 8254,
          "old_api": null,
          "new_api": "lfirst",
          "old_text": null,
          "new_text": "lfirst(l)",
          "old_line_content": " * Perform ON COMMIT actions.",
          "new_line_content": "\t\tOnCommitItem *oc = (OnCommitItem *) lfirst(l);",
          "content_same": false
        },
        {
          "line": 8258,
          "old_api": null,
          "new_api": "GetCurrentSubTransactionId",
          "old_text": null,
          "new_text": "GetCurrentSubTransactionId()",
          "old_line_content": " */",
          "new_line_content": "\t\t\toc->deleting_subid = GetCurrentSubTransactionId();",
          "content_same": false
        },
        {
          "line": 7747,
          "old_api": null,
          "new_api": "systable_endscan",
          "old_text": null,
          "new_text": "systable_endscan(scan)",
          "old_line_content": "\t * Search through child columns looking for ones matching parent rel",
          "new_line_content": "\tsystable_endscan(scan);",
          "content_same": false
        },
        {
          "line": 7748,
          "old_api": null,
          "new_api": "heap_close",
          "old_text": null,
          "new_text": "heap_close(catalogRelation, RowExclusiveLock)",
          "old_line_content": "\t */",
          "new_line_content": "\theap_close(catalogRelation, RowExclusiveLock);",
          "content_same": false
        },
        {
          "line": 7751,
          "old_api": null,
          "new_api": "ereport",
          "old_text": null,
          "new_text": "ereport(ERROR,\n\t\t\t\t(errcode(ERRCODE_UNDEFINED_TABLE),\n\t\t\t\t errmsg(\"relation \\\"%s\\\" is not a parent of relation \\\"%s\\\"\",\n\t\t\t\t\t\tRelationGetRelationName(parent_rel),\n\t\t\t\t\t\tRelationGetRelationName(rel))))",
          "old_line_content": "\t\t\t\tAnum_pg_attribute_attrelid,",
          "new_line_content": "\t\tereport(ERROR,",
          "content_same": false
        },
        {
          "line": 7752,
          "old_api": null,
          "new_api": "errcode",
          "old_text": null,
          "new_text": "errcode(ERRCODE_UNDEFINED_TABLE)",
          "old_line_content": "\t\t\t\tBTEqualStrategyNumber, F_OIDEQ,",
          "new_line_content": "\t\t\t\t(errcode(ERRCODE_UNDEFINED_TABLE),",
          "content_same": false
        },
        {
          "line": 7755,
          "old_api": null,
          "new_api": "RelationGetRelationName",
          "old_text": null,
          "new_text": "RelationGetRelationName(rel)",
          "old_line_content": "\t\t\t\t\t\t\t  true, SnapshotNow, 1, key);",
          "new_line_content": "\t\t\t\t\t\tRelationGetRelationName(rel))));",
          "content_same": false
        },
        {
          "line": 7760,
          "old_api": null,
          "new_api": "heap_open",
          "old_text": null,
          "new_text": "heap_open(AttributeRelationId, RowExclusiveLock)",
          "old_line_content": "\t\t/* Ignore if dropped or not inherited */",
          "new_line_content": "\tcatalogRelation = heap_open(AttributeRelationId, RowExclusiveLock);",
          "content_same": false
        },
        {
          "line": 7761,
          "old_api": null,
          "new_api": "ScanKeyInit",
          "old_text": null,
          "new_text": "ScanKeyInit(&key[0],\n\t\t\t\tAnum_pg_attribute_attrelid,\n\t\t\t\tBTEqualStrategyNumber, F_OIDEQ,\n\t\t\t\tObjectIdGetDatum(RelationGetRelid(rel)))",
          "old_line_content": "\t\tif (att->attisdropped)",
          "new_line_content": "\tScanKeyInit(&key[0],",
          "content_same": false
        },
        {
          "line": 7764,
          "old_api": null,
          "new_api": "RelationGetRelid",
          "old_text": null,
          "new_text": "RelationGetRelid(rel)",
          "old_line_content": "\t\t\tcontinue;",
          "new_line_content": "\t\t\t\tObjectIdGetDatum(RelationGetRelid(rel)));",
          "content_same": false
        },
        {
          "line": 7765,
          "old_api": null,
          "new_api": "systable_beginscan",
          "old_text": null,
          "new_text": "systable_beginscan(catalogRelation, AttributeRelidNumIndexId,\n\t\t\t\t\t\t\t  true, SnapshotNow, 1, key)",
          "old_line_content": "",
          "new_line_content": "\tscan = systable_beginscan(catalogRelation, AttributeRelidNumIndexId,",
          "content_same": false
        },
        {
          "line": 8278,
          "old_api": null,
          "new_api": "lfirst",
          "old_text": null,
          "new_text": "lfirst(l)",
          "old_line_content": "\t\t\t\tbreak;",
          "new_line_content": "\t\tOnCommitItem *oc = (OnCommitItem *) lfirst(l);",
          "content_same": false
        },
        {
          "line": 7254,
          "old_api": null,
          "new_api": "smgrnblocks",
          "old_text": null,
          "new_text": "smgrnblocks(src, forkNum)",
          "old_line_content": "\t\t/* XLOG stuff */",
          "new_line_content": "\tnblocks = smgrnblocks(src, forkNum);",
          "content_same": false
        },
        {
          "line": 7769,
          "old_api": null,
          "new_api": "GETSTRUCT",
          "old_text": null,
          "new_text": "GETSTRUCT(attributeTuple)",
          "old_line_content": "\t\t\t/* Decrement inhcount and possibly set islocal to true */",
          "new_line_content": "\t\tForm_pg_attribute att = (Form_pg_attribute) GETSTRUCT(attributeTuple);",
          "content_same": false
        },
        {
          "line": 7259,
          "old_api": null,
          "new_api": "CHECK_FOR_INTERRUPTS",
          "old_text": null,
          "new_text": "CHECK_FOR_INTERRUPTS()",
          "old_line_content": "\t\t * Now write the page.\tWe say isTemp = true even if it's not a temp",
          "new_line_content": "\t\tCHECK_FOR_INTERRUPTS();",
          "content_same": false
        },
        {
          "line": 7261,
          "old_api": null,
          "new_api": "smgrread",
          "old_text": null,
          "new_text": "smgrread(src, forkNum, blkno, buf)",
          "old_line_content": "\t\t * write; we'll do it ourselves below.",
          "new_line_content": "\t\tsmgrread(src, forkNum, blkno, buf);",
          "content_same": false
        },
        {
          "line": 7265,
          "old_api": null,
          "new_api": "log_newpage",
          "old_text": null,
          "new_text": "log_newpage(&dst->smgr_rnode, forkNum, blkno, page)",
          "old_line_content": "",
          "new_line_content": "\t\t\tlog_newpage(&dst->smgr_rnode, forkNum, blkno, page);",
          "content_same": false
        },
        {
          "line": 8291,
          "old_api": null,
          "new_api": "lappend_oid",
          "old_text": null,
          "new_text": "lappend_oid(oids_to_truncate, oc->relid)",
          "old_line_content": "\t\t\t\t\t/*",
          "new_line_content": "\t\t\t\toids_to_truncate = lappend_oid(oids_to_truncate, oc->relid);",
          "content_same": false
        },
        {
          "line": 7781,
          "old_api": null,
          "new_api": "heap_copytuple",
          "old_text": null,
          "new_text": "heap_copytuple(attributeTuple)",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\tHeapTuple\tcopyTuple = heap_copytuple(attributeTuple);",
          "content_same": false
        },
        {
          "line": 7272,
          "old_api": null,
          "new_api": "smgrextend",
          "old_text": null,
          "new_text": "smgrextend(dst, forkNum, blkno, buf, true)",
          "old_line_content": "\t * less obvious that we have to do it even if we did WAL-log the copied",
          "new_line_content": "\t\tsmgrextend(dst, forkNum, blkno, buf, true);",
          "content_same": false
        },
        {
          "line": 7275,
          "old_api": null,
          "new_api": "pfree",
          "old_text": null,
          "new_text": "pfree(buf)",
          "old_line_content": "\t * written data to disk (indeed it won't know the new rel even exists).  A",
          "new_line_content": "\tpfree(buf);",
          "content_same": false
        },
        {
          "line": 8300,
          "old_api": null,
          "new_api": "performDeletion",
          "old_text": null,
          "new_text": "performDeletion(&object, DROP_CASCADE)",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\t\t\tperformDeletion(&object, DROP_CASCADE);",
          "content_same": false
        },
        {
          "line": 7788,
          "old_api": null,
          "new_api": "simple_heap_update",
          "old_text": null,
          "new_text": "simple_heap_update(catalogRelation, &copyTuple->t_self, copyTuple)",
          "old_line_content": "\t * constraints.  (We cheat a bit by only checking for name matches,",
          "new_line_content": "\t\t\tsimple_heap_update(catalogRelation, &copyTuple->t_self, copyTuple);",
          "content_same": false
        },
        {
          "line": 7789,
          "old_api": null,
          "new_api": "CatalogUpdateIndexes",
          "old_text": null,
          "new_text": "CatalogUpdateIndexes(catalogRelation, copyTuple)",
          "old_line_content": "\t * assuming that the expressions will match.)",
          "new_line_content": "\t\t\tCatalogUpdateIndexes(catalogRelation, copyTuple);",
          "content_same": false
        },
        {
          "line": 7790,
          "old_api": null,
          "new_api": "heap_freetuple",
          "old_text": null,
          "new_text": "heap_freetuple(copyTuple)",
          "old_line_content": "\t */",
          "new_line_content": "\t\t\theap_freetuple(copyTuple);",
          "content_same": false
        },
        {
          "line": 7793,
          "old_api": null,
          "new_api": "systable_endscan",
          "old_text": null,
          "new_text": "systable_endscan(scan)",
          "old_line_content": "\t\t\t\tAnum_pg_constraint_conrelid,",
          "new_line_content": "\tsystable_endscan(scan);",
          "content_same": false
        },
        {
          "line": 7794,
          "old_api": null,
          "new_api": "heap_close",
          "old_text": null,
          "new_text": "heap_close(catalogRelation, RowExclusiveLock)",
          "old_line_content": "\t\t\t\tBTEqualStrategyNumber, F_OIDEQ,",
          "new_line_content": "\theap_close(catalogRelation, RowExclusiveLock);",
          "content_same": false
        },
        {
          "line": 8307,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(oc->deleting_subid != InvalidSubTransactionId)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t\tAssert(oc->deleting_subid != InvalidSubTransactionId);",
          "content_same": false
        },
        {
          "line": 8314,
          "old_api": null,
          "new_api": "heap_truncate",
          "old_text": null,
          "new_text": "heap_truncate(oids_to_truncate)",
          "old_line_content": " * during abort, remove those created during this transaction.",
          "new_line_content": "\t\theap_truncate(oids_to_truncate);",
          "content_same": false
        },
        {
          "line": 8315,
          "old_api": null,
          "new_api": "CommandCounterIncrement",
          "old_text": null,
          "new_text": "CommandCounterIncrement()",
          "old_line_content": " */",
          "new_line_content": "\t\tCommandCounterIncrement();\t\t/* XXX needed? */",
          "content_same": false
        },
        {
          "line": 7292,
          "old_api": null,
          "new_api": "smgrimmedsync",
          "old_text": null,
          "new_text": "smgrimmedsync(dst, forkNum)",
          "old_line_content": "{",
          "new_line_content": "\t\tsmgrimmedsync(dst, forkNum);",
          "content_same": false
        },
        {
          "line": 7802,
          "old_api": null,
          "new_api": "heap_open",
          "old_text": null,
          "new_text": "heap_open(ConstraintRelationId, RowExclusiveLock)",
          "old_line_content": "\t{",
          "new_line_content": "\tcatalogRelation = heap_open(ConstraintRelationId, RowExclusiveLock);",
          "content_same": false
        },
        {
          "line": 7807,
          "old_api": null,
          "new_api": "systable_beginscan",
          "old_text": null,
          "new_text": "systable_beginscan(catalogRelation, ConstraintRelidIndexId,\n\t\t\t\t\t\t\t  true, SnapshotNow, 1, key)",
          "old_line_content": "\t}",
          "new_line_content": "\tscan = systable_beginscan(catalogRelation, ConstraintRelidIndexId,",
          "content_same": false
        },
        {
          "line": 7814,
          "old_api": null,
          "new_api": "GETSTRUCT",
          "old_text": null,
          "new_text": "GETSTRUCT(constraintTuple)",
          "old_line_content": "\t\t\t\tBTEqualStrategyNumber, F_OIDEQ,",
          "new_line_content": "\t\tForm_pg_constraint con = (Form_pg_constraint) GETSTRUCT(constraintTuple);",
          "content_same": false
        },
        {
          "line": 7304,
          "old_api": null,
          "new_api": "EnableDisableTrigger",
          "old_text": null,
          "new_text": "EnableDisableTrigger(rel, trigname, fires_when, skip_system)",
          "old_line_content": "{",
          "new_line_content": "\tEnableDisableTrigger(rel, trigname, fires_when, skip_system);",
          "content_same": false
        },
        {
          "line": 7817,
          "old_api": null,
          "new_api": "NameStr",
          "old_text": null,
          "new_text": "NameStr(con->conname)",
          "old_line_content": "\t\t\t\t\t\t\t  true, SnapshotNow, 1, key);",
          "new_line_content": "\t\t\tconnames = lappend(connames, pstrdup(NameStr(con->conname)));",
          "content_same": false
        },
        {
          "line": 7820,
          "old_api": null,
          "new_api": "systable_endscan",
          "old_text": null,
          "new_text": "systable_endscan(scan)",
          "old_line_content": "\t{",
          "new_line_content": "\tsystable_endscan(scan);",
          "content_same": false
        },
        {
          "line": 7823,
          "old_api": null,
          "new_api": "ScanKeyInit",
          "old_text": null,
          "new_text": "ScanKeyInit(&key[0],\n\t\t\t\tAnum_pg_constraint_conrelid,\n\t\t\t\tBTEqualStrategyNumber, F_OIDEQ,\n\t\t\t\tObjectIdGetDatum(RelationGetRelid(rel)))",
          "old_line_content": "\t\tListCell   *lc;",
          "new_line_content": "\tScanKeyInit(&key[0],",
          "content_same": false
        },
        {
          "line": 7826,
          "old_api": null,
          "new_api": "RelationGetRelid",
          "old_text": null,
          "new_text": "RelationGetRelid(rel)",
          "old_line_content": "\t\t\tcontinue;",
          "new_line_content": "\t\t\t\tObjectIdGetDatum(RelationGetRelid(rel)));",
          "content_same": false
        },
        {
          "line": 7827,
          "old_api": null,
          "new_api": "systable_beginscan",
          "old_text": null,
          "new_text": "systable_beginscan(catalogRelation, ConstraintRelidIndexId,\n\t\t\t\t\t\t\t  true, SnapshotNow, 1, key)",
          "old_line_content": "",
          "new_line_content": "\tscan = systable_beginscan(catalogRelation, ConstraintRelidIndexId,",
          "content_same": false
        },
        {
          "line": 7316,
          "old_api": null,
          "new_api": "EnableDisableRule",
          "old_text": null,
          "new_text": "EnableDisableRule(rel, trigname, fires_when)",
          "old_line_content": "ATPrepAddInherit(Relation child_rel)",
          "new_line_content": "\tEnableDisableRule(rel, trigname, fires_when);",
          "content_same": false
        },
        {
          "line": 7830,
          "old_api": null,
          "new_api": "systable_getnext",
          "old_text": null,
          "new_text": "systable_getnext(scan)",
          "old_line_content": "\t\t{",
          "new_line_content": "\twhile (HeapTupleIsValid(constraintTuple = systable_getnext(scan)))",
          "content_same": false
        },
        {
          "line": 8344,
          "old_api": null,
          "new_api": "list_delete_cell",
          "old_text": null,
          "new_text": "list_delete_cell(on_commits, cur_item, prev_item)",
          "old_line_content": "\t\t\toc->deleting_subid = InvalidSubTransactionId;",
          "new_line_content": "\t\t\ton_commits = list_delete_cell(on_commits, cur_item, prev_item);",
          "content_same": false
        },
        {
          "line": 8345,
          "old_api": null,
          "new_api": "pfree",
          "old_text": null,
          "new_text": "pfree(oc)",
          "old_line_content": "\t\t\tprev_item = cur_item;",
          "new_line_content": "\t\t\tpfree(oc);",
          "content_same": false
        },
        {
          "line": 7832,
          "old_api": null,
          "new_api": "GETSTRUCT",
          "old_text": null,
          "new_text": "GETSTRUCT(constraintTuple)",
          "old_line_content": "\t\t\t{",
          "new_line_content": "\t\tForm_pg_constraint con = (Form_pg_constraint) GETSTRUCT(constraintTuple);",
          "content_same": false
        },
        {
          "line": 8347,
          "old_api": null,
          "new_api": "lnext",
          "old_text": null,
          "new_text": "lnext(prev_item)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\t\tcur_item = lnext(prev_item);",
          "content_same": false
        },
        {
          "line": 8349,
          "old_api": null,
          "new_api": "list_head",
          "old_text": null,
          "new_text": "list_head(on_commits)",
          "old_line_content": "}",
          "new_line_content": "\t\t\t\tcur_item = list_head(on_commits);",
          "content_same": false
        },
        {
          "line": 7330,
          "old_api": null,
          "new_api": "ereport",
          "old_text": null,
          "new_text": "ereport(ERROR,\n\t\t\t\t(errcode(ERRCODE_WRONG_OBJECT_TYPE),\n\t\t\t\t errmsg(\"cannot change inheritance of typed table\")))",
          "old_line_content": "\tScanKeyData key;",
          "new_line_content": "\t\tereport(ERROR,",
          "content_same": false
        },
        {
          "line": 7331,
          "old_api": null,
          "new_api": "errcode",
          "old_text": null,
          "new_text": "errcode(ERRCODE_WRONG_OBJECT_TYPE)",
          "old_line_content": "\tHeapTuple\tinheritsTuple;",
          "new_line_content": "\t\t\t\t(errcode(ERRCODE_WRONG_OBJECT_TYPE),",
          "content_same": false
        },
        {
          "line": 7332,
          "old_api": null,
          "new_api": "errmsg",
          "old_text": null,
          "new_text": "errmsg(\"cannot change inheritance of typed table\")",
          "old_line_content": "\tint32\t\tinhseqno;",
          "new_line_content": "\t\t\t\t errmsg(\"cannot change inheritance of typed table\")));",
          "content_same": false
        },
        {
          "line": 8357,
          "old_api": null,
          "new_api": "lnext",
          "old_text": null,
          "new_text": "lnext(prev_item)",
          "old_line_content": " */",
          "new_line_content": "\t\t\tcur_item = lnext(prev_item);",
          "content_same": false
        },
        {
          "line": 7856,
          "old_api": null,
          "new_api": "elog",
          "old_text": null,
          "new_text": "elog(ERROR, \"relation %u has non-inherited constraint \\\"%s\\\"\",\n\t\t\t\t\t RelationGetRelid(rel), NameStr(copy_con->conname))",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\t\telog(ERROR, \"relation %u has non-inherited constraint \\\"%s\\\"\",",
          "content_same": false
        },
        {
          "line": 7857,
          "old_api": null,
          "new_api": "NameStr",
          "old_text": null,
          "new_text": "NameStr(copy_con->conname)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t\t RelationGetRelid(rel), NameStr(copy_con->conname));",
          "content_same": false
        },
        {
          "line": 7863,
          "old_api": null,
          "new_api": "simple_heap_update",
          "old_text": null,
          "new_text": "simple_heap_update(catalogRelation, &copyTuple->t_self, copyTuple)",
          "old_line_content": "\t *",
          "new_line_content": "\t\t\tsimple_heap_update(catalogRelation, &copyTuple->t_self, copyTuple);",
          "content_same": false
        },
        {
          "line": 7864,
          "old_api": null,
          "new_api": "CatalogUpdateIndexes",
          "old_text": null,
          "new_text": "CatalogUpdateIndexes(catalogRelation, copyTuple)",
          "old_line_content": "\t * There's no convenient way to do this, so go trawling through pg_depend",
          "new_line_content": "\t\t\tCatalogUpdateIndexes(catalogRelation, copyTuple);",
          "content_same": false
        },
        {
          "line": 8377,
          "old_api": null,
          "new_api": "list_head",
          "old_text": null,
          "new_text": "list_head(on_commits)",
          "old_line_content": "\t\t\tif (prev_item)",
          "new_line_content": "\tcur_item = list_head(on_commits);",
          "content_same": false
        },
        {
          "line": 7865,
          "old_api": null,
          "new_api": "heap_freetuple",
          "old_text": null,
          "new_text": "heap_freetuple(copyTuple)",
          "old_line_content": "\t */",
          "new_line_content": "\t\t\theap_freetuple(copyTuple);",
          "content_same": false
        },
        {
          "line": 7356,
          "old_api": null,
          "new_api": "ATSimplePermissions",
          "old_text": null,
          "new_text": "ATSimplePermissions(parent_rel, false)",
          "old_line_content": "\t * inhseqno already present; we'll use the next one for the new parent.",
          "new_line_content": "\tATSimplePermissions(parent_rel, false);",
          "content_same": false
        },
        {
          "line": 8381,
          "old_api": null,
          "new_api": "lfirst",
          "old_text": null,
          "new_text": "lfirst(cur_item)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\tOnCommitItem *oc = (OnCommitItem *) lfirst(cur_item);",
          "content_same": false
        },
        {
          "line": 7869,
          "old_api": null,
          "new_api": "systable_endscan",
          "old_text": null,
          "new_text": "systable_endscan(scan)",
          "old_line_content": "\t\t\t\tAnum_pg_depend_classid,",
          "new_line_content": "\tsystable_endscan(scan);",
          "content_same": false
        },
        {
          "line": 7870,
          "old_api": null,
          "new_api": "heap_close",
          "old_text": null,
          "new_text": "heap_close(catalogRelation, RowExclusiveLock)",
          "old_line_content": "\t\t\t\tBTEqualStrategyNumber, F_OIDEQ,",
          "new_line_content": "\theap_close(catalogRelation, RowExclusiveLock);",
          "content_same": false
        },
        {
          "line": 7360,
          "old_api": null,
          "new_api": "ereport",
          "old_text": null,
          "new_text": "ereport(ERROR,\n\t\t\t\t(errcode(ERRCODE_WRONG_OBJECT_TYPE),\n\t\t\t\t errmsg(\"cannot inherit from temporary relation \\\"%s\\\"\",\n\t\t\t\t\t\tRelationGetRelationName(parent_rel))))",
          "old_line_content": "\t * the parent indirectly; CREATE TABLE doesn't reject comparable cases.",
          "new_line_content": "\t\tereport(ERROR,",
          "content_same": false
        },
        {
          "line": 7361,
          "old_api": null,
          "new_api": "errcode",
          "old_text": null,
          "new_text": "errcode(ERRCODE_WRONG_OBJECT_TYPE)",
          "old_line_content": "\t */",
          "new_line_content": "\t\t\t\t(errcode(ERRCODE_WRONG_OBJECT_TYPE),",
          "content_same": false
        },
        {
          "line": 8386,
          "old_api": null,
          "new_api": "list_delete_cell",
          "old_text": null,
          "new_text": "list_delete_cell(on_commits, cur_item, prev_item)",
          "old_line_content": "\t\t\t\toc->creating_subid = parentSubid;",
          "new_line_content": "\t\t\ton_commits = list_delete_cell(on_commits, cur_item, prev_item);",
          "content_same": false
        },
        {
          "line": 8387,
          "old_api": null,
          "new_api": "pfree",
          "old_text": null,
          "new_text": "pfree(oc)",
          "old_line_content": "\t\t\tif (oc->deleting_subid == mySubid)",
          "new_line_content": "\t\t\tpfree(oc);",
          "content_same": false
        },
        {
          "line": 8389,
          "old_api": null,
          "new_api": "lnext",
          "old_text": null,
          "new_text": "lnext(prev_item)",
          "old_line_content": "\t\t\tprev_item = cur_item;",
          "new_line_content": "\t\t\t\tcur_item = lnext(prev_item);",
          "content_same": false
        },
        {
          "line": 7877,
          "old_api": null,
          "new_api": "heap_open",
          "old_text": null,
          "new_text": "heap_open(DependRelationId, RowExclusiveLock)",
          "old_line_content": "\t\t\t\tAnum_pg_depend_objsubid,",
          "new_line_content": "\tcatalogRelation = heap_open(DependRelationId, RowExclusiveLock);",
          "content_same": false
        },
        {
          "line": 8391,
          "old_api": null,
          "new_api": "list_head",
          "old_text": null,
          "new_text": "list_head(on_commits)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\t\tcur_item = list_head(on_commits);",
          "content_same": false
        },
        {
          "line": 7882,
          "old_api": null,
          "new_api": "ObjectIdGetDatum",
          "old_text": null,
          "new_text": "ObjectIdGetDatum(RelationRelationId)",
          "old_line_content": "\t\t\t\t\t\t\t  SnapshotNow, 3, key);",
          "new_line_content": "\t\t\t\tObjectIdGetDatum(RelationRelationId));",
          "content_same": false
        },
        {
          "line": 7883,
          "old_api": null,
          "new_api": "ScanKeyInit",
          "old_text": null,
          "new_text": "ScanKeyInit(&key[1],\n\t\t\t\tAnum_pg_depend_objid,\n\t\t\t\tBTEqualStrategyNumber, F_OIDEQ,\n\t\t\t\tObjectIdGetDatum(RelationGetRelid(rel)))",
          "old_line_content": "",
          "new_line_content": "\tScanKeyInit(&key[1],",
          "content_same": false
        },
        {
          "line": 7373,
          "old_api": null,
          "new_api": "heap_open",
          "old_text": null,
          "new_text": "heap_open(InheritsRelationId, RowExclusiveLock)",
          "old_line_content": "\t{",
          "new_line_content": "\tcatalogRelation = heap_open(InheritsRelationId, RowExclusiveLock);",
          "content_same": false
        },
        {
          "line": 7887,
          "old_api": null,
          "new_api": "ScanKeyInit",
          "old_text": null,
          "new_text": "ScanKeyInit(&key[2],\n\t\t\t\tAnum_pg_depend_objsubid,\n\t\t\t\tBTEqualStrategyNumber, F_INT4EQ,\n\t\t\t\tInt32GetDatum(0))",
          "old_line_content": "",
          "new_line_content": "\tScanKeyInit(&key[2],",
          "content_same": false
        },
        {
          "line": 8401,
          "old_api": null,
          "new_api": "lnext",
          "old_text": null,
          "new_text": "lnext(prev_item)",
          "old_line_content": "",
          "new_line_content": "\t\t\tcur_item = lnext(prev_item);",
          "content_same": false
        },
        {
          "line": 7890,
          "old_api": null,
          "new_api": "Int32GetDatum",
          "old_text": null,
          "new_text": "Int32GetDatum(0)",
          "old_line_content": "\t\t\tdep->refobjsubid == 0 &&",
          "new_line_content": "\t\t\t\tInt32GetDatum(0));",
          "content_same": false
        },
        {
          "line": 7383,
          "old_api": null,
          "new_api": "systable_getnext",
          "old_text": null,
          "new_text": "systable_getnext(scan)",
          "old_line_content": "\t}",
          "new_line_content": "\twhile (HeapTupleIsValid(inheritsTuple = systable_getnext(scan)))",
          "content_same": false
        },
        {
          "line": 8184,
          "old_api": null,
          "new_api": "AlterRelationNamespaceInternal",
          "old_text": null,
          "new_text": "AlterRelationNamespaceInternal(classRel, depForm->objid,\n\t\t\t\t\t\t\t\t\t   oldNspOid, newNspOid,\n\t\t\t\t\t\t\t\t\t   true)",
          "old_line_content": "\t\t/* Now we can close it.  Keep the lock till end of transaction. */",
          "new_line_content": "\t\tAlterRelationNamespaceInternal(classRel, depForm->objid,",
          "content_same": false
        },
        {
          "line": 7385,
          "old_api": null,
          "new_api": "GETSTRUCT",
          "old_text": null,
          "new_text": "GETSTRUCT(inheritsTuple)",
          "old_line_content": "",
          "new_line_content": "\t\tForm_pg_inherits inh = (Form_pg_inherits) GETSTRUCT(inheritsTuple);",
          "content_same": false
        },
        {
          "line": 7897,
          "old_api": null,
          "new_api": "GETSTRUCT",
          "old_text": null,
          "new_text": "GETSTRUCT(depTuple)",
          "old_line_content": "",
          "new_line_content": "\t\tForm_pg_depend dep = (Form_pg_depend) GETSTRUCT(depTuple);",
          "content_same": false
        },
        {
          "line": 7387,
          "old_api": null,
          "new_api": "RelationGetRelid",
          "old_text": null,
          "new_text": "RelationGetRelid(parent_rel)",
          "old_line_content": "\t * Prevent circularity by seeing if proposed parent inherits from child.",
          "new_line_content": "\t\tif (inh->inhparent == RelationGetRelid(parent_rel))",
          "content_same": false
        },
        {
          "line": 7388,
          "old_api": null,
          "new_api": "ereport",
          "old_text": null,
          "new_text": "ereport(ERROR,\n\t\t\t\t\t(errcode(ERRCODE_DUPLICATE_TABLE),\n\t\t\t errmsg(\"relation \\\"%s\\\" would be inherited from more than once\",\n\t\t\t\t\tRelationGetRelationName(parent_rel))))",
          "old_line_content": "\t * (In particular, this disallows making a rel inherit from itself.)",
          "new_line_content": "\t\t\tereport(ERROR,",
          "content_same": false
        },
        {
          "line": 7389,
          "old_api": null,
          "new_api": "errcode",
          "old_text": null,
          "new_text": "errcode(ERRCODE_DUPLICATE_TABLE)",
          "old_line_content": "\t *",
          "new_line_content": "\t\t\t\t\t(errcode(ERRCODE_DUPLICATE_TABLE),",
          "content_same": false
        },
        {
          "line": 7390,
          "old_api": null,
          "new_api": "errmsg",
          "old_text": null,
          "new_text": "errmsg(\"relation \\\"%s\\\" would be inherited from more than once\",\n\t\t\t\t\tRelationGetRelationName(parent_rel))",
          "old_line_content": "\t * This is not completely bulletproof because of race conditions: in",
          "new_line_content": "\t\t\t errmsg(\"relation \\\"%s\\\" would be inherited from more than once\",",
          "content_same": false
        },
        {
          "line": 7391,
          "old_api": null,
          "new_api": "RelationGetRelationName",
          "old_text": null,
          "new_text": "RelationGetRelationName(parent_rel)",
          "old_line_content": "\t * multi-level inheritance trees, someone else could concurrently be",
          "new_line_content": "\t\t\t\t\tRelationGetRelationName(parent_rel))));",
          "content_same": false
        },
        {
          "line": 7900,
          "old_api": null,
          "new_api": "RelationGetRelid",
          "old_text": null,
          "new_text": "RelationGetRelid(parent_rel)",
          "old_line_content": "}",
          "new_line_content": "\t\t\tdep->refobjid == RelationGetRelid(parent_rel) &&",
          "content_same": false
        },
        {
          "line": 7903,
          "old_api": null,
          "new_api": "simple_heap_delete",
          "old_text": null,
          "new_text": "simple_heap_delete(catalogRelation, &depTuple->t_self)",
          "old_line_content": "/*",
          "new_line_content": "\t\t\tsimple_heap_delete(catalogRelation, &depTuple->t_self);",
          "content_same": false
        },
        {
          "line": 7906,
          "old_api": null,
          "new_api": "systable_endscan",
          "old_text": null,
          "new_text": "systable_endscan(scan)",
          "old_line_content": " * Note: caller must have checked ownership of the relation already",
          "new_line_content": "\tsystable_endscan(scan);",
          "content_same": false
        },
        {
          "line": 7395,
          "old_api": null,
          "new_api": "systable_endscan",
          "old_text": null,
          "new_text": "systable_endscan(scan)",
          "old_line_content": "\t * than the disease.  find_all_inheritors() will cope with circularity",
          "new_line_content": "\tsystable_endscan(scan);",
          "content_same": false
        },
        {
          "line": 7907,
          "old_api": null,
          "new_api": "heap_close",
          "old_text": null,
          "new_text": "heap_close(catalogRelation, RowExclusiveLock)",
          "old_line_content": " */",
          "new_line_content": "\theap_close(catalogRelation, RowExclusiveLock);",
          "content_same": false
        },
        {
          "line": 7910,
          "old_api": null,
          "new_api": "heap_close",
          "old_text": null,
          "new_text": "heap_close(parent_rel, NoLock)",
          "old_line_content": "\t\t\t\t\tObjectType stmttype, LOCKMODE lockmode)",
          "new_line_content": "\theap_close(parent_rel, NoLock);",
          "content_same": false
        },
        {
          "line": 7411,
          "old_api": null,
          "new_api": "RelationGetRelid",
          "old_text": null,
          "new_text": "RelationGetRelid(child_rel)",
          "old_line_content": "\t/* If parent has OIDs then child must have OIDs */",
          "new_line_content": "\tchildren = find_all_inheritors(RelationGetRelid(child_rel),",
          "content_same": false
        },
        {
          "line": 7929,
          "old_api": null,
          "new_api": "relation_openrv",
          "old_text": null,
          "new_text": "relation_openrv(relation, lockmode)",
          "old_line_content": "\t\t\t * For mostly-historical reasons, we allow ALTER TABLE to apply to",
          "new_line_content": "\trel = relation_openrv(relation, lockmode);",
          "content_same": false
        },
        {
          "line": 7418,
          "old_api": null,
          "new_api": "errdetail",
          "old_text": null,
          "new_text": "errdetail(\"\\\"%s\\\" is already a child of \\\"%s\\\".\",\n\t\t\t\t\t\t   parent->relname,\n\t\t\t\t\t\t   RelationGetRelationName(child_rel))",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t errdetail(\"\\\"%s\\\" is already a child of \\\"%s\\\".\",",
          "content_same": false
        },
        {
          "line": 7931,
          "old_api": null,
          "new_api": "RelationGetRelid",
          "old_text": null,
          "new_text": "RelationGetRelid(rel)",
          "old_line_content": "\t\t\t */",
          "new_line_content": "\trelid = RelationGetRelid(rel);",
          "content_same": false
        },
        {
          "line": 7932,
          "old_api": null,
          "new_api": "RelationGetNamespace",
          "old_text": null,
          "new_text": "RelationGetNamespace(rel)",
          "old_line_content": "\t\t\tbreak;",
          "new_line_content": "\toldNspOid = RelationGetNamespace(rel);",
          "content_same": false
        },
        {
          "line": 7424,
          "old_api": null,
          "new_api": "ereport",
          "old_text": null,
          "new_text": "ereport(ERROR,\n\t\t\t\t(errcode(ERRCODE_WRONG_OBJECT_TYPE),\n\t\t\t\t errmsg(\"table \\\"%s\\\" without OIDs cannot inherit from table \\\"%s\\\" with OIDs\",\n\t\t\t\t\t\tRelationGetRelationName(child_rel),\n\t\t\t\t\t\tRelationGetRelationName(parent_rel))))",
          "old_line_content": "",
          "new_line_content": "\t\tereport(ERROR,",
          "content_same": false
        },
        {
          "line": 7425,
          "old_api": null,
          "new_api": "errcode",
          "old_text": null,
          "new_text": "errcode(ERRCODE_WRONG_OBJECT_TYPE)",
          "old_line_content": "\t/*",
          "new_line_content": "\t\t\t\t(errcode(ERRCODE_WRONG_OBJECT_TYPE),",
          "content_same": false
        },
        {
          "line": 7426,
          "old_api": null,
          "new_api": "errmsg",
          "old_text": null,
          "new_text": "errmsg(\"table \\\"%s\\\" without OIDs cannot inherit from table \\\"%s\\\" with OIDs\",\n\t\t\t\t\t\tRelationGetRelationName(child_rel),\n\t\t\t\t\t\tRelationGetRelationName(parent_rel))",
          "old_line_content": "\t * OK, it looks valid.\tMake the catalog entries that show inheritance.",
          "new_line_content": "\t\t\t\t errmsg(\"table \\\"%s\\\" without OIDs cannot inherit from table \\\"%s\\\" with OIDs\",",
          "content_same": false
        },
        {
          "line": 7427,
          "old_api": null,
          "new_api": "RelationGetRelationName",
          "old_text": null,
          "new_text": "RelationGetRelationName(child_rel)",
          "old_line_content": "\t */",
          "new_line_content": "\t\t\t\t\t\tRelationGetRelationName(child_rel),",
          "content_same": false
        },
        {
          "line": 7431,
          "old_api": null,
          "new_api": "MergeAttributesIntoExisting",
          "old_text": null,
          "new_text": "MergeAttributesIntoExisting(child_rel, parent_rel)",
          "old_line_content": "\t\t\t\t\t\t\t catalogRelation);",
          "new_line_content": "\tMergeAttributesIntoExisting(child_rel, parent_rel);",
          "content_same": false
        },
        {
          "line": 7948,
          "old_api": null,
          "new_api": "errcode",
          "old_text": null,
          "new_text": "errcode(ERRCODE_WRONG_OBJECT_TYPE)",
          "old_line_content": "\t\t\tbreak;",
          "new_line_content": "\t\t\t\t\t\t(errcode(ERRCODE_WRONG_OBJECT_TYPE),",
          "content_same": false
        },
        {
          "line": 7949,
          "old_api": null,
          "new_api": "errmsg",
          "old_text": null,
          "new_text": "errmsg(\"\\\"%s\\\" is not a sequence\",\n\t\t\t\t\t\t\t\tRelationGetRelationName(rel))",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t\t\t errmsg(\"\\\"%s\\\" is not a sequence\",",
          "content_same": false
        },
        {
          "line": 7950,
          "old_api": null,
          "new_api": "RelationGetRelationName",
          "old_text": null,
          "new_text": "RelationGetRelationName(rel)",
          "old_line_content": "\t\tdefault:",
          "new_line_content": "\t\t\t\t\t\t\t\tRelationGetRelationName(rel))));",
          "content_same": false
        },
        {
          "line": 7439,
          "old_api": null,
          "new_api": "RelationGetRelid",
          "old_text": null,
          "new_text": "RelationGetRelid(child_rel)",
          "old_line_content": "",
          "new_line_content": "\tStoreCatalogInheritance1(RelationGetRelid(child_rel),",
          "content_same": false
        },
        {
          "line": 7440,
          "old_api": null,
          "new_api": "RelationGetRelid",
          "old_text": null,
          "new_text": "RelationGetRelid(parent_rel)",
          "old_line_content": "/*",
          "new_line_content": "\t\t\t\t\t\t\t RelationGetRelid(parent_rel),",
          "content_same": false
        },
        {
          "line": 7955,
          "old_api": null,
          "new_api": "ereport",
          "old_text": null,
          "new_text": "ereport(ERROR,\n\t\t\t\t\t\t(errcode(ERRCODE_WRONG_OBJECT_TYPE),\n\t\t\t\t\t\t errmsg(\"\\\"%s\\\" is not a view\",\n\t\t\t\t\t\t\t\tRelationGetRelationName(rel))))",
          "old_line_content": "\tswitch (rel->rd_rel->relkind)",
          "new_line_content": "\t\t\t\tereport(ERROR,",
          "content_same": false
        },
        {
          "line": 7956,
          "old_api": null,
          "new_api": "errcode",
          "old_text": null,
          "new_text": "errcode(ERRCODE_WRONG_OBJECT_TYPE)",
          "old_line_content": "\t{",
          "new_line_content": "\t\t\t\t\t\t(errcode(ERRCODE_WRONG_OBJECT_TYPE),",
          "content_same": false
        },
        {
          "line": 7445,
          "old_api": null,
          "new_api": "heap_close",
          "old_text": null,
          "new_text": "heap_close(catalogRelation, RowExclusiveLock)",
          "old_line_content": "decompile_conbin(HeapTuple contup, TupleDesc tupdesc)",
          "new_line_content": "\theap_close(catalogRelation, RowExclusiveLock);",
          "content_same": false
        },
        {
          "line": 7957,
          "old_api": null,
          "new_api": "errmsg",
          "old_text": null,
          "new_text": "errmsg(\"\\\"%s\\\" is not a view\",\n\t\t\t\t\t\t\t\tRelationGetRelationName(rel))",
          "old_line_content": "\t\tcase RELKIND_RELATION:",
          "new_line_content": "\t\t\t\t\t\t errmsg(\"\\\"%s\\\" is not a view\",",
          "content_same": false
        },
        {
          "line": 7958,
          "old_api": null,
          "new_api": "RelationGetRelationName",
          "old_text": null,
          "new_text": "RelationGetRelationName(rel)",
          "old_line_content": "\t\tcase RELKIND_VIEW:",
          "new_line_content": "\t\t\t\t\t\t\t\tRelationGetRelationName(rel))));",
          "content_same": false
        },
        {
          "line": 7448,
          "old_api": null,
          "new_api": "heap_close",
          "old_text": null,
          "new_text": "heap_close(parent_rel, NoLock)",
          "old_line_content": "\tbool\t\tisnull;",
          "new_line_content": "\theap_close(parent_rel, NoLock);",
          "content_same": false
        },
        {
          "line": 7962,
          "old_api": null,
          "new_api": "elog",
          "old_text": null,
          "new_text": "elog(ERROR, \"unrecognized object type: %d\", (int) stmttype)",
          "old_line_content": "\t\t\t{",
          "new_line_content": "\t\t\telog(ERROR, \"unrecognized object type: %d\", (int) stmttype);",
          "content_same": false
        },
        {
          "line": 7463,
          "old_api": null,
          "new_api": "GETSTRUCT",
          "old_text": null,
          "new_text": "GETSTRUCT(contup)",
          "old_line_content": " * Determine whether two check constraints are functionally equivalent",
          "new_line_content": "\tcon = (Form_pg_constraint) GETSTRUCT(contup);",
          "content_same": false
        },
        {
          "line": 7464,
          "old_api": null,
          "new_api": "heap_getattr",
          "old_text": null,
          "new_text": "heap_getattr(contup, Anum_pg_constraint_conbin, tupdesc, &isnull)",
          "old_line_content": " *",
          "new_line_content": "\tattr = heap_getattr(contup, Anum_pg_constraint_conbin, tupdesc, &isnull);",
          "content_same": false
        },
        {
          "line": 7466,
          "old_api": null,
          "new_api": "HeapTupleGetOid",
          "old_text": null,
          "new_text": "HeapTupleGetOid(contup)",
          "old_line_content": " * source string.  This insulates us from issues like whether attributes",
          "new_line_content": "\t\telog(ERROR, \"null conbin for constraint %u\", HeapTupleGetOid(contup));",
          "content_same": false
        },
        {
          "line": 7468,
          "old_api": null,
          "new_api": "DirectFunctionCall2",
          "old_text": null,
          "new_text": "DirectFunctionCall2(pg_get_expr, attr,\n\t\t\t\t\t\t\t   ObjectIdGetDatum(con->conrelid))",
          "old_line_content": " */",
          "new_line_content": "\texpr = DirectFunctionCall2(pg_get_expr, attr,",
          "content_same": false
        },
        {
          "line": 7469,
          "old_api": null,
          "new_api": "ObjectIdGetDatum",
          "old_text": null,
          "new_text": "ObjectIdGetDatum(con->conrelid)",
          "old_line_content": "static bool",
          "new_line_content": "\t\t\t\t\t\t\t   ObjectIdGetDatum(con->conrelid));",
          "content_same": false
        },
        {
          "line": 7470,
          "old_api": null,
          "new_api": "TextDatumGetCString",
          "old_text": null,
          "new_text": "TextDatumGetCString(expr)",
          "old_line_content": "constraints_equivalent(HeapTuple a, HeapTuple b, TupleDesc tupleDesc)",
          "new_line_content": "\treturn TextDatumGetCString(expr);",
          "content_same": false
        },
        {
          "line": 7982,
          "old_api": null,
          "new_api": "errdetail",
          "old_text": null,
          "new_text": "errdetail(\"Sequence \\\"%s\\\" is linked to table \\\"%s\\\".\",\n\t\t\t\t\t\t\t\tRelationGetRelationName(rel),\n\t\t\t\t\t\t\t\tget_rel_name(tableId))",
          "old_line_content": "\t\t\tbreak;",
          "new_line_content": "\t\t\t\t\t  errdetail(\"Sequence \\\"%s\\\" is linked to table \\\"%s\\\".\",",
          "content_same": false
        },
        {
          "line": 7983,
          "old_api": null,
          "new_api": "RelationGetRelationName",
          "old_text": null,
          "new_text": "RelationGetRelationName(rel)",
          "old_line_content": "\t\tcase RELKIND_INDEX:",
          "new_line_content": "\t\t\t\t\t\t\t\tRelationGetRelationName(rel),",
          "content_same": false
        },
        {
          "line": 7984,
          "old_api": null,
          "new_api": "get_rel_name",
          "old_text": null,
          "new_text": "get_rel_name(tableId)",
          "old_line_content": "\t\tcase RELKIND_TOASTVALUE:",
          "new_line_content": "\t\t\t\t\t\t\t\tget_rel_name(tableId))));",
          "content_same": false
        },
        {
          "line": 7991,
          "old_api": null,
          "new_api": "RelationGetRelationName",
          "old_text": null,
          "new_text": "RelationGetRelationName(rel)",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\t\t\t\t\tRelationGetRelationName(rel)),",
          "content_same": false
        },
        {
          "line": 7992,
          "old_api": null,
          "new_api": "errhint",
          "old_text": null,
          "new_text": "errhint(\"Use ALTER TYPE instead.\")",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t\t errhint(\"Use ALTER TYPE instead.\")));",
          "content_same": false
        },
        {
          "line": 7483,
          "old_api": null,
          "new_api": "GETSTRUCT",
          "old_text": null,
          "new_text": "GETSTRUCT(a)",
          "old_line_content": "",
          "new_line_content": "\tForm_pg_constraint acon = (Form_pg_constraint) GETSTRUCT(a);",
          "content_same": false
        },
        {
          "line": 7484,
          "old_api": null,
          "new_api": "GETSTRUCT",
          "old_text": null,
          "new_text": "GETSTRUCT(b)",
          "old_line_content": "/*",
          "new_line_content": "\tForm_pg_constraint bcon = (Form_pg_constraint) GETSTRUCT(b);",
          "content_same": false
        },
        {
          "line": 7488,
          "old_api": null,
          "new_api": "decompile_conbin",
          "old_text": null,
          "new_text": "decompile_conbin(a, tupleDesc)",
          "old_line_content": " * Called by ATExecAddInherit",
          "new_line_content": "\t\tstrcmp(decompile_conbin(a, tupleDesc),",
          "content_same": false
        },
        {
          "line": 7489,
          "old_api": null,
          "new_api": "decompile_conbin",
          "old_text": null,
          "new_text": "decompile_conbin(b, tupleDesc)",
          "old_line_content": " *",
          "new_line_content": "\t\t\t   decompile_conbin(b, tupleDesc)) != 0)",
          "content_same": false
        },
        {
          "line": 8001,
          "old_api": null,
          "new_api": "RelationGetRelationName",
          "old_text": null,
          "new_text": "RelationGetRelationName(rel)",
          "old_line_content": "\t\t\t\t\t\tnewschema)));",
          "new_line_content": "\t\t\t\t\t\t\tRelationGetRelationName(rel))));",
          "content_same": false
        },
        {
          "line": 8008,
          "old_api": null,
          "new_api": "ereport",
          "old_text": null,
          "new_text": "ereport(ERROR,\n\t\t\t\t(errcode(ERRCODE_DUPLICATE_TABLE),\n\t\t\t\t errmsg(\"relation \\\"%s\\\" is already in schema \\\"%s\\\"\",\n\t\t\t\t\t\tRelationGetRelationName(rel),\n\t\t\t\t\t\tnewschema)))",
          "old_line_content": "",
          "new_line_content": "\t\tereport(ERROR,",
          "content_same": false
        },
        {
          "line": 8009,
          "old_api": null,
          "new_api": "errcode",
          "old_text": null,
          "new_text": "errcode(ERRCODE_DUPLICATE_TABLE)",
          "old_line_content": "\t/* same for TOAST schema */",
          "new_line_content": "\t\t\t\t(errcode(ERRCODE_DUPLICATE_TABLE),",
          "content_same": false
        },
        {
          "line": 8010,
          "old_api": null,
          "new_api": "errmsg",
          "old_text": null,
          "new_text": "errmsg(\"relation \\\"%s\\\" is already in schema \\\"%s\\\"\",\n\t\t\t\t\t\tRelationGetRelationName(rel),\n\t\t\t\t\t\tnewschema)",
          "old_line_content": "\tif (nspOid == PG_TOAST_NAMESPACE || oldNspOid == PG_TOAST_NAMESPACE)",
          "new_line_content": "\t\t\t\t errmsg(\"relation \\\"%s\\\" is already in schema \\\"%s\\\"\",",
          "content_same": false
        },
        {
          "line": 8015,
          "old_api": null,
          "new_api": "isAnyTempNamespace",
          "old_text": null,
          "new_text": "isAnyTempNamespace(oldNspOid)",
          "old_line_content": "\t/* OK, modify the pg_class row and pg_depend entry */",
          "new_line_content": "\tif (isAnyTempNamespace(nspOid) || isAnyTempNamespace(oldNspOid))",
          "content_same": false
        },
        {
          "line": 8017,
          "old_api": null,
          "new_api": "errcode",
          "old_text": null,
          "new_text": "errcode(ERRCODE_FEATURE_NOT_SUPPORTED)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t(errcode(ERRCODE_FEATURE_NOT_SUPPORTED),",
          "content_same": false
        },
        {
          "line": 8022,
          "old_api": null,
          "new_api": "ereport",
          "old_text": null,
          "new_text": "ereport(ERROR,\n\t\t\t\t(errcode(ERRCODE_FEATURE_NOT_SUPPORTED),\n\t\t\t\t errmsg(\"cannot move objects into or out of TOAST schema\")))",
          "old_line_content": "",
          "new_line_content": "\t\tereport(ERROR,",
          "content_same": false
        },
        {
          "line": 8023,
          "old_api": null,
          "new_api": "errcode",
          "old_text": null,
          "new_text": "errcode(ERRCODE_FEATURE_NOT_SUPPORTED)",
          "old_line_content": "\t/* Fix other dependent stuff */",
          "new_line_content": "\t\t\t\t(errcode(ERRCODE_FEATURE_NOT_SUPPORTED),",
          "content_same": false
        },
        {
          "line": 8024,
          "old_api": null,
          "new_api": "errmsg",
          "old_text": null,
          "new_text": "errmsg(\"cannot move objects into or out of TOAST schema\")",
          "old_line_content": "\tif (rel->rd_rel->relkind == RELKIND_RELATION)",
          "new_line_content": "\t\t\t\t errmsg(\"cannot move objects into or out of TOAST schema\")));",
          "content_same": false
        },
        {
          "line": 8029,
          "old_api": null,
          "new_api": "AlterRelationNamespaceInternal",
          "old_text": null,
          "new_text": "AlterRelationNamespaceInternal(classRel, relid, oldNspOid, nspOid, true)",
          "old_line_content": "\t}",
          "new_line_content": "\tAlterRelationNamespaceInternal(classRel, relid, oldNspOid, nspOid, true);",
          "content_same": false
        },
        {
          "line": 7519,
          "old_api": null,
          "new_api": "heap_open",
          "old_text": null,
          "new_text": "heap_open(AttributeRelationId, RowExclusiveLock)",
          "old_line_content": "\t\t/* Ignore dropped columns in the parent. */",
          "new_line_content": "\tattrrel = heap_open(AttributeRelationId, RowExclusiveLock);",
          "content_same": false
        },
        {
          "line": 8032,
          "old_api": null,
          "new_api": "AlterTypeNamespaceInternal",
          "old_text": null,
          "new_text": "AlterTypeNamespaceInternal(rel->rd_rel->reltype, nspOid, false, false)",
          "old_line_content": "",
          "new_line_content": "\tAlterTypeNamespaceInternal(rel->rd_rel->reltype, nspOid, false, false);",
          "content_same": false
        },
        {
          "line": 7521,
          "old_api": null,
          "new_api": "RelationGetDescr",
          "old_text": null,
          "new_text": "RelationGetDescr(parent_rel)",
          "old_line_content": "\t\t\tcontinue;",
          "new_line_content": "\ttupleDesc = RelationGetDescr(parent_rel);",
          "content_same": false
        },
        {
          "line": 8037,
          "old_api": null,
          "new_api": "AlterIndexNamespaces",
          "old_text": null,
          "new_text": "AlterIndexNamespaces(classRel, rel, oldNspOid, nspOid)",
          "old_line_content": "/*",
          "new_line_content": "\t\tAlterIndexNamespaces(classRel, rel, oldNspOid, nspOid);",
          "content_same": false
        },
        {
          "line": 8038,
          "old_api": null,
          "new_api": "AlterSeqNamespaces",
          "old_text": null,
          "new_text": "AlterSeqNamespaces(classRel, rel, oldNspOid, nspOid, newschema, lockmode)",
          "old_line_content": " * The guts of relocating a relation to another namespace: fix the pg_class",
          "new_line_content": "\t\tAlterSeqNamespaces(classRel, rel, oldNspOid, nspOid, newschema, lockmode);",
          "content_same": false
        },
        {
          "line": 8039,
          "old_api": null,
          "new_api": "AlterConstraintNamespaces",
          "old_text": null,
          "new_text": "AlterConstraintNamespaces(relid, oldNspOid, nspOid, false)",
          "old_line_content": " * entry, and the pg_depend entry if any.  Caller must already have",
          "new_line_content": "\t\tAlterConstraintNamespaces(relid, oldNspOid, nspOid, false);",
          "content_same": false
        },
        {
          "line": 7528,
          "old_api": null,
          "new_api": "NameStr",
          "old_text": null,
          "new_text": "NameStr(attribute->attname)",
          "old_line_content": "\t\t\t/* Check they are same type and typmod */",
          "new_line_content": "\t\tchar\t   *attributeName = NameStr(attribute->attname);",
          "content_same": false
        },
        {
          "line": 8042,
          "old_api": null,
          "new_api": "heap_close",
          "old_text": null,
          "new_text": "heap_close(classRel, RowExclusiveLock)",
          "old_line_content": "void",
          "new_line_content": "\theap_close(classRel, RowExclusiveLock);",
          "content_same": false
        },
        {
          "line": 8045,
          "old_api": null,
          "new_api": "relation_close",
          "old_text": null,
          "new_text": "relation_close(rel, NoLock)",
          "old_line_content": "\t\t\t\t\t\t\t   bool hasDependEntry)",
          "new_line_content": "\trelation_close(rel, NoLock);",
          "content_same": false
        },
        {
          "line": 7537,
          "old_api": null,
          "new_api": "HeapTupleIsValid",
          "old_text": null,
          "new_text": "HeapTupleIsValid(tuple)",
          "old_line_content": "\t\t\t\t\t\t\t\tattributeName)));",
          "new_line_content": "\t\tif (HeapTupleIsValid(tuple))",
          "content_same": false
        },
        {
          "line": 7544,
          "old_api": null,
          "new_api": "ereport",
          "old_text": null,
          "new_text": "ereport(ERROR,\n\t\t\t\t\t\t(errcode(ERRCODE_DATATYPE_MISMATCH),\n\t\t\t\t\t\t errmsg(\"child table \\\"%s\\\" has different type for column \\\"%s\\\"\",\n\t\t\t\t\t\t\t\tRelationGetRelationName(child_rel),\n\t\t\t\t\t\t\t\tattributeName)))",
          "old_line_content": "",
          "new_line_content": "\t\t\t\tereport(ERROR,",
          "content_same": false
        },
        {
          "line": 7545,
          "old_api": null,
          "new_api": "errcode",
          "old_text": null,
          "new_text": "errcode(ERRCODE_DATATYPE_MISMATCH)",
          "old_line_content": "\t\t\t/*",
          "new_line_content": "\t\t\t\t\t\t(errcode(ERRCODE_DATATYPE_MISMATCH),",
          "content_same": false
        },
        {
          "line": 7546,
          "old_api": null,
          "new_api": "errmsg",
          "old_text": null,
          "new_text": "errmsg(\"child table \\\"%s\\\" has different type for column \\\"%s\\\"\",\n\t\t\t\t\t\t\t\tRelationGetRelationName(child_rel),\n\t\t\t\t\t\t\t\tattributeName)",
          "old_line_content": "\t\t\t * OK, bump the child column's inheritance count.  (If we fail",
          "new_line_content": "\t\t\t\t\t\t errmsg(\"child table \\\"%s\\\" has different type for column \\\"%s\\\"\",",
          "content_same": false
        },
        {
          "line": 7547,
          "old_api": null,
          "new_api": "RelationGetRelationName",
          "old_text": null,
          "new_text": "RelationGetRelationName(child_rel)",
          "old_line_content": "\t\t\t * later on, this change will just roll back.)",
          "new_line_content": "\t\t\t\t\t\t\t\tRelationGetRelationName(child_rel),",
          "content_same": false
        },
        {
          "line": 7553,
          "old_api": null,
          "new_api": "errmsg",
          "old_text": null,
          "new_text": "errmsg(\"column \\\"%s\\\" in child table must be marked NOT NULL\",\n\t\t\t\t\t   attributeName)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\t\terrmsg(\"column \\\"%s\\\" in child table must be marked NOT NULL\",",
          "content_same": false
        },
        {
          "line": 8066,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(classForm->relnamespace == oldNspOid)",
          "old_line_content": "\t/* classTup is a copy, so OK to scribble on */",
          "new_line_content": "\tAssert(classForm->relnamespace == oldNspOid);",
          "content_same": false
        },
        {
          "line": 8071,
          "old_api": null,
          "new_api": "ereport",
          "old_text": null,
          "new_text": "ereport(ERROR,\n\t\t\t\t(errcode(ERRCODE_DUPLICATE_TABLE),\n\t\t\t\t errmsg(\"relation \\\"%s\\\" already exists in schema \\\"%s\\\"\",\n\t\t\t\t\t\tNameStr(classForm->relname),\n\t\t\t\t\t\tget_namespace_name(newNspOid))))",
          "old_line_content": "",
          "new_line_content": "\t\tereport(ERROR,",
          "content_same": false
        },
        {
          "line": 8072,
          "old_api": null,
          "new_api": "errcode",
          "old_text": null,
          "new_text": "errcode(ERRCODE_DUPLICATE_TABLE)",
          "old_line_content": "\t/* Update dependency on schema if caller said so */",
          "new_line_content": "\t\t\t\t(errcode(ERRCODE_DUPLICATE_TABLE),",
          "content_same": false
        },
        {
          "line": 7561,
          "old_api": null,
          "new_api": "simple_heap_update",
          "old_text": null,
          "new_text": "simple_heap_update(attrrel, &tuple->t_self, tuple)",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\tsimple_heap_update(attrrel, &tuple->t_self, tuple);",
          "content_same": false
        },
        {
          "line": 7562,
          "old_api": null,
          "new_api": "CatalogUpdateIndexes",
          "old_text": null,
          "new_text": "CatalogUpdateIndexes(attrrel, tuple)",
          "old_line_content": "",
          "new_line_content": "\t\t\tCatalogUpdateIndexes(attrrel, tuple);",
          "content_same": false
        },
        {
          "line": 8073,
          "old_api": null,
          "new_api": "errmsg",
          "old_text": null,
          "new_text": "errmsg(\"relation \\\"%s\\\" already exists in schema \\\"%s\\\"\",\n\t\t\t\t\t\tNameStr(classForm->relname),\n\t\t\t\t\t\tget_namespace_name(newNspOid))",
          "old_line_content": "\tif (hasDependEntry &&",
          "new_line_content": "\t\t\t\t errmsg(\"relation \\\"%s\\\" already exists in schema \\\"%s\\\"\",",
          "content_same": false
        },
        {
          "line": 8075,
          "old_api": null,
          "new_api": "get_namespace_name",
          "old_text": null,
          "new_text": "get_namespace_name(newNspOid)",
          "old_line_content": "\t\t\t\t\t\t\tNamespaceRelationId, oldNspOid, newNspOid) != 1)",
          "new_line_content": "\t\t\t\t\t\tget_namespace_name(newNspOid))));",
          "content_same": false
        },
        {
          "line": 7567,
          "old_api": null,
          "new_api": "ereport",
          "old_text": null,
          "new_text": "ereport(ERROR,\n\t\t\t\t\t(errcode(ERRCODE_DATATYPE_MISMATCH),\n\t\t\t\t\t errmsg(\"child table is missing column \\\"%s\\\"\",\n\t\t\t\t\t\t\tattributeName)))",
          "old_line_content": " * Check constraints in child table match up with constraints in parent,",
          "new_line_content": "\t\t\tereport(ERROR,",
          "content_same": false
        },
        {
          "line": 7568,
          "old_api": null,
          "new_api": "errcode",
          "old_text": null,
          "new_text": "errcode(ERRCODE_DATATYPE_MISMATCH)",
          "old_line_content": " * and increment their coninhcount.",
          "new_line_content": "\t\t\t\t\t(errcode(ERRCODE_DATATYPE_MISMATCH),",
          "content_same": false
        },
        {
          "line": 7569,
          "old_api": null,
          "new_api": "errmsg",
          "old_text": null,
          "new_text": "errmsg(\"child table is missing column \\\"%s\\\"\",\n\t\t\t\t\t\t\tattributeName)",
          "old_line_content": " *",
          "new_line_content": "\t\t\t\t\t errmsg(\"child table is missing column \\\"%s\\\"\",",
          "content_same": false
        },
        {
          "line": 8080,
          "old_api": null,
          "new_api": "simple_heap_update",
          "old_text": null,
          "new_text": "simple_heap_update(classRel, &classTup->t_self, classTup)",
          "old_line_content": "}",
          "new_line_content": "\tsimple_heap_update(classRel, &classTup->t_self, classTup);",
          "content_same": false
        },
        {
          "line": 8081,
          "old_api": null,
          "new_api": "CatalogUpdateIndexes",
          "old_text": null,
          "new_text": "CatalogUpdateIndexes(classRel, classTup)",
          "old_line_content": "",
          "new_line_content": "\tCatalogUpdateIndexes(classRel, classTup);",
          "content_same": false
        },
        {
          "line": 8085,
          "old_api": null,
          "new_api": "changeDependencyFor",
          "old_text": null,
          "new_text": "changeDependencyFor(RelationRelationId, relOid,\n\t\t\t\t\t\t\tNamespaceRelationId, oldNspOid, newNspOid)",
          "old_line_content": " * Note: we assume adequate permission checking was done by the caller,",
          "new_line_content": "\t\tchangeDependencyFor(RelationRelationId, relOid,",
          "content_same": false
        },
        {
          "line": 7574,
          "old_api": null,
          "new_api": "heap_close",
          "old_text": null,
          "new_text": "heap_close(attrrel, RowExclusiveLock)",
          "old_line_content": " * to allow an optional flag on parent table constraints indicating they are",
          "new_line_content": "\theap_close(attrrel, RowExclusiveLock);",
          "content_same": false
        },
        {
          "line": 8087,
          "old_api": null,
          "new_api": "elog",
          "old_text": null,
          "new_text": "elog(ERROR, \"failed to change schema dependency for relation \\\"%s\\\"\",\n\t\t\t NameStr(classForm->relname))",
          "old_line_content": " */",
          "new_line_content": "\t\telog(ERROR, \"failed to change schema dependency for relation \\\"%s\\\"\",",
          "content_same": false
        },
        {
          "line": 8088,
          "old_api": null,
          "new_api": "NameStr",
          "old_text": null,
          "new_text": "NameStr(classForm->relname)",
          "old_line_content": "static void",
          "new_line_content": "\t\t\t NameStr(classForm->relname));",
          "content_same": false
        },
        {
          "line": 8090,
          "old_api": null,
          "new_api": "heap_freetuple",
          "old_text": null,
          "new_text": "heap_freetuple(classTup)",
          "old_line_content": "\t\t\t\t\t Oid oldNspOid, Oid newNspOid)",
          "new_line_content": "\theap_freetuple(classTup);",
          "content_same": false
        },
        {
          "line": 8110,
          "old_api": null,
          "new_api": "lfirst_oid",
          "old_text": null,
          "new_text": "lfirst_oid(l)",
          "old_line_content": "",
          "new_line_content": "\t\tOid\t\t\tindexOid = lfirst_oid(l);",
          "content_same": false
        },
        {
          "line": 7604,
          "old_api": null,
          "new_api": "RelationGetDescr",
          "old_text": null,
          "new_text": "RelationGetDescr(catalog_relation)",
          "old_line_content": "\t{",
          "new_line_content": "\ttuple_desc = RelationGetDescr(catalog_relation);",
          "content_same": false
        },
        {
          "line": 8117,
          "old_api": null,
          "new_api": "AlterRelationNamespaceInternal",
          "old_text": null,
          "new_text": "AlterRelationNamespaceInternal(classRel, indexOid,\n\t\t\t\t\t\t\t\t\t   oldNspOid, newNspOid,\n\t\t\t\t\t\t\t\t\t   false)",
          "old_line_content": " *",
          "new_line_content": "\t\tAlterRelationNamespaceInternal(classRel, indexOid,",
          "content_same": false
        },
        {
          "line": 7607,
          "old_api": null,
          "new_api": "ScanKeyInit",
          "old_text": null,
          "new_text": "ScanKeyInit(&parent_key,\n\t\t\t\tAnum_pg_constraint_conrelid,\n\t\t\t\tBTEqualStrategyNumber, F_OIDEQ,\n\t\t\t\tObjectIdGetDatum(RelationGetRelid(parent_rel)))",
          "old_line_content": "\t\tScanKeyData child_key;",
          "new_line_content": "\tScanKeyInit(&parent_key,",
          "content_same": false
        },
        {
          "line": 7610,
          "old_api": null,
          "new_api": "RelationGetRelid",
          "old_text": null,
          "new_text": "RelationGetRelid(parent_rel)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\tObjectIdGetDatum(RelationGetRelid(parent_rel)));",
          "content_same": false
        },
        {
          "line": 7611,
          "old_api": null,
          "new_api": "systable_beginscan",
          "old_text": null,
          "new_text": "systable_beginscan(catalog_relation, ConstraintRelidIndexId,\n\t\t\t\t\t\t\t\t\t true, SnapshotNow, 1, &parent_key)",
          "old_line_content": "\t\tif (parent_con->contype != CONSTRAINT_CHECK)",
          "new_line_content": "\tparent_scan = systable_beginscan(catalog_relation, ConstraintRelidIndexId,",
          "content_same": false
        },
        {
          "line": 8122,
          "old_api": null,
          "new_api": "list_free",
          "old_text": null,
          "new_text": "list_free(indexList)",
          "old_line_content": "AlterSeqNamespaces(Relation classRel, Relation rel,",
          "new_line_content": "\tlist_free(indexList);",
          "content_same": false
        },
        {
          "line": 7614,
          "old_api": null,
          "new_api": "systable_getnext",
          "old_text": null,
          "new_text": "systable_getnext(parent_scan)",
          "old_line_content": "\t\t/* Search for a child constraint matching this one */",
          "new_line_content": "\twhile (HeapTupleIsValid(parent_tuple = systable_getnext(parent_scan)))",
          "content_same": false
        },
        {
          "line": 7616,
          "old_api": null,
          "new_api": "GETSTRUCT",
          "old_text": null,
          "new_text": "GETSTRUCT(parent_tuple)",
          "old_line_content": "\t\t\t\t\tAnum_pg_constraint_conrelid,",
          "new_line_content": "\t\tForm_pg_constraint parent_con = (Form_pg_constraint) GETSTRUCT(parent_tuple);",
          "content_same": false
        },
        {
          "line": 7626,
          "old_api": null,
          "new_api": "ScanKeyInit",
          "old_text": null,
          "new_text": "ScanKeyInit(&child_key,\n\t\t\t\t\tAnum_pg_constraint_conrelid,\n\t\t\t\t\tBTEqualStrategyNumber, F_OIDEQ,\n\t\t\t\t\tObjectIdGetDatum(RelationGetRelid(child_rel)))",
          "old_line_content": "",
          "new_line_content": "\t\tScanKeyInit(&child_key,",
          "content_same": false
        },
        {
          "line": 7629,
          "old_api": null,
          "new_api": "RelationGetRelid",
          "old_text": null,
          "new_text": "RelationGetRelid(child_rel)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t\tObjectIdGetDatum(RelationGetRelid(child_rel)));",
          "content_same": false
        },
        {
          "line": 7633,
          "old_api": null,
          "new_api": "systable_getnext",
          "old_text": null,
          "new_text": "systable_getnext(child_scan)",
          "old_line_content": "",
          "new_line_content": "\t\twhile (HeapTupleIsValid(child_tuple = systable_getnext(child_scan)))",
          "content_same": false
        },
        {
          "line": 8145,
          "old_api": null,
          "new_api": "heap_open",
          "old_text": null,
          "new_text": "heap_open(DependRelationId, AccessShareLock)",
          "old_line_content": "",
          "new_line_content": "\tdepRel = heap_open(DependRelationId, AccessShareLock);",
          "content_same": false
        },
        {
          "line": 8147,
          "old_api": null,
          "new_api": "ScanKeyInit",
          "old_text": null,
          "new_text": "ScanKeyInit(&key[0],\n\t\t\t\tAnum_pg_depend_refclassid,\n\t\t\t\tBTEqualStrategyNumber, F_OIDEQ,\n\t\t\t\tObjectIdGetDatum(RelationRelationId))",
          "old_line_content": "\t\t\t\t\t\t\t  SnapshotNow, 2, key);",
          "new_line_content": "\tScanKeyInit(&key[0],",
          "content_same": false
        },
        {
          "line": 8150,
          "old_api": null,
          "new_api": "ObjectIdGetDatum",
          "old_text": null,
          "new_text": "ObjectIdGetDatum(RelationRelationId)",
          "old_line_content": "\t{",
          "new_line_content": "\t\t\t\tObjectIdGetDatum(RelationRelationId));",
          "content_same": false
        },
        {
          "line": 7641,
          "old_api": null,
          "new_api": "NameStr",
          "old_text": null,
          "new_text": "NameStr(parent_con->conname)",
          "old_line_content": "\t\t\t/*",
          "new_line_content": "\t\t\tif (strcmp(NameStr(parent_con->conname),",
          "content_same": false
        },
        {
          "line": 7642,
          "old_api": null,
          "new_api": "NameStr",
          "old_text": null,
          "new_text": "NameStr(child_con->conname)",
          "old_line_content": "\t\t\t * OK, bump the child constraint's inheritance count.  (If we fail",
          "new_line_content": "\t\t\t\t\t   NameStr(child_con->conname)) != 0)",
          "content_same": false
        },
        {
          "line": 8154,
          "old_api": null,
          "new_api": "RelationGetRelid",
          "old_text": null,
          "new_text": "RelationGetRelid(rel)",
          "old_line_content": "\t\t/* skip dependencies other than auto dependencies on columns */",
          "new_line_content": "\t\t\t\tObjectIdGetDatum(RelationGetRelid(rel)));",
          "content_same": false
        },
        {
          "line": 8157,
          "old_api": null,
          "new_api": "systable_beginscan",
          "old_text": null,
          "new_text": "systable_beginscan(depRel, DependReferenceIndexId, true,\n\t\t\t\t\t\t\t  SnapshotNow, 2, key)",
          "old_line_content": "\t\t\tdepForm->objsubid != 0 ||",
          "new_line_content": "\tscan = systable_beginscan(depRel, DependReferenceIndexId, true,",
          "content_same": false
        },
        {
          "line": 7647,
          "old_api": null,
          "new_api": "errcode",
          "old_text": null,
          "new_text": "errcode(ERRCODE_DATATYPE_MISMATCH)",
          "old_line_content": "\t\t\tchild_con->coninhcount++;",
          "new_line_content": "\t\t\t\t\t\t(errcode(ERRCODE_DATATYPE_MISMATCH),",
          "content_same": false
        },
        {
          "line": 8160,
          "old_api": null,
          "new_api": "systable_getnext",
          "old_text": null,
          "new_text": "systable_getnext(scan)",
          "old_line_content": "",
          "new_line_content": "\twhile (HeapTupleIsValid(tup = systable_getnext(scan)))",
          "content_same": false
        },
        {
          "line": 7657,
          "old_api": null,
          "new_api": "GETSTRUCT",
          "old_text": null,
          "new_text": "GETSTRUCT(child_copy)",
          "old_line_content": "",
          "new_line_content": "\t\t\tchild_con = (Form_pg_constraint) GETSTRUCT(child_copy);",
          "content_same": false
        },
        {
          "line": 8176,
          "old_api": null,
          "new_api": "RelationGetForm",
          "old_text": null,
          "new_text": "RelationGetForm(seqRel)",
          "old_line_content": "",
          "new_line_content": "\t\tif (RelationGetForm(seqRel)->relkind != RELKIND_SEQUENCE)",
          "content_same": false
        },
        {
          "line": 7667,
          "old_api": null,
          "new_api": "systable_endscan",
          "old_text": null,
          "new_text": "systable_endscan(child_scan)",
          "old_line_content": "}",
          "new_line_content": "\t\tsystable_endscan(child_scan);",
          "content_same": false
        },
        {
          "line": 8179,
          "old_api": null,
          "new_api": "relation_close",
          "old_text": null,
          "new_text": "relation_close(seqRel, lockmode)",
          "old_line_content": "\t\t * them to the new namespace, too.",
          "new_line_content": "\t\t\trelation_close(seqRel, lockmode);",
          "content_same": false
        },
        {
          "line": 7670,
          "old_api": null,
          "new_api": "ereport",
          "old_text": null,
          "new_text": "ereport(ERROR,\n\t\t\t\t\t(errcode(ERRCODE_DATATYPE_MISMATCH),\n\t\t\t\t\t errmsg(\"child table is missing constraint \\\"%s\\\"\",\n\t\t\t\t\t\t\tNameStr(parent_con->conname))))",
          "old_line_content": " * ALTER TABLE NO INHERIT",
          "new_line_content": "\t\t\tereport(ERROR,",
          "content_same": false
        },
        {
          "line": 7671,
          "old_api": null,
          "new_api": "errcode",
          "old_text": null,
          "new_text": "errcode(ERRCODE_DATATYPE_MISMATCH)",
          "old_line_content": " *",
          "new_line_content": "\t\t\t\t\t(errcode(ERRCODE_DATATYPE_MISMATCH),",
          "content_same": false
        },
        {
          "line": 7672,
          "old_api": null,
          "new_api": "errmsg",
          "old_text": null,
          "new_text": "errmsg(\"child table is missing constraint \\\"%s\\\"\",\n\t\t\t\t\t\t\tNameStr(parent_con->conname))",
          "old_line_content": " * Drop a parent from the child's parents. This just adjusts the attinhcount",
          "new_line_content": "\t\t\t\t\t errmsg(\"child table is missing constraint \\\"%s\\\"\",",
          "content_same": false
        },
        {
          "line": 7673,
          "old_api": null,
          "new_api": "NameStr",
          "old_text": null,
          "new_text": "NameStr(parent_con->conname)",
          "old_line_content": " * and attislocal of the columns and removes the pg_inherit and pg_depend",
          "new_line_content": "\t\t\t\t\t\t\tNameStr(parent_con->conname))));",
          "content_same": false
        },
        {
          "line": 7676,
          "old_api": null,
          "new_api": "systable_endscan",
          "old_text": null,
          "new_text": "systable_endscan(parent_scan)",
          "old_line_content": " * If attinhcount goes to 0 then attislocal gets set to true. If it goes back",
          "new_line_content": "\tsystable_endscan(parent_scan);",
          "content_same": false
        },
        {
          "line": 7677,
          "old_api": null,
          "new_api": "heap_close",
          "old_text": null,
          "new_text": "heap_close(catalog_relation, RowExclusiveLock)",
          "old_line_content": " * up attislocal stays true, which means if a child is ever removed from a",
          "new_line_content": "\theap_close(catalog_relation, RowExclusiveLock);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 7704,
          "old_api": "heap_openrv",
          "new_api": null,
          "old_text": "heap_openrv(parent, AccessShareLock)",
          "new_text": null,
          "old_line_content": "\tparent_rel = heap_openrv(parent, AccessShareLock);",
          "new_line_content": "\t\t\t\tattributeTuple,",
          "content_same": false
        },
        {
          "line": 8218,
          "old_api": "MemoryContextSwitchTo",
          "new_api": null,
          "old_text": "MemoryContextSwitchTo(CacheMemoryContext)",
          "new_text": null,
          "old_line_content": "\toldcxt = MemoryContextSwitchTo(CacheMemoryContext);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 8220,
          "old_api": "palloc",
          "new_api": null,
          "old_text": "palloc(sizeof(OnCommitItem))",
          "new_text": null,
          "old_line_content": "\toc = (OnCommitItem *) palloc(sizeof(OnCommitItem));",
          "new_line_content": "\tMemoryContext oldcxt;",
          "content_same": false
        },
        {
          "line": 8223,
          "old_api": "GetCurrentSubTransactionId",
          "new_api": null,
          "old_text": "GetCurrentSubTransactionId()",
          "new_text": null,
          "old_line_content": "\toc->creating_subid = GetCurrentSubTransactionId();",
          "new_line_content": "\t * We needn't bother registering the relation unless there is an ON COMMIT",
          "content_same": false
        },
        {
          "line": 8226,
          "old_api": "lcons",
          "new_api": null,
          "old_text": "lcons(oc, on_commits)",
          "new_text": null,
          "old_line_content": "\ton_commits = lcons(oc, on_commits);",
          "new_line_content": "\tif (action == ONCOMMIT_NOOP || action == ONCOMMIT_PRESERVE_ROWS)",
          "content_same": false
        },
        {
          "line": 8228,
          "old_api": "MemoryContextSwitchTo",
          "new_api": null,
          "old_text": "MemoryContextSwitchTo(oldcxt)",
          "new_text": null,
          "old_line_content": "\tMemoryContextSwitchTo(oldcxt);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7716,
          "old_api": "ScanKeyInit",
          "new_api": null,
          "old_text": "ScanKeyInit(&key[0],\n\t\t\t\tAnum_pg_inherits_inhrelid,\n\t\t\t\tBTEqualStrategyNumber, F_OIDEQ,\n\t\t\t\tObjectIdGetDatum(RelationGetRelid(rel)))",
          "new_text": null,
          "old_line_content": "\tScanKeyInit(&key[0],",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7719,
          "old_api": "RelationGetRelid",
          "new_api": null,
          "old_text": "RelationGetRelid(rel)",
          "new_text": null,
          "old_line_content": "\t\t\t\tObjectIdGetDatum(RelationGetRelid(rel)));",
          "new_line_content": "\t * the child is presumed enough rights.",
          "content_same": false
        },
        {
          "line": 7720,
          "old_api": "systable_beginscan",
          "new_api": null,
          "old_text": "systable_beginscan(catalogRelation, InheritsRelidSeqnoIndexId,\n\t\t\t\t\t\t\t  true, SnapshotNow, 1, key)",
          "new_text": null,
          "old_line_content": "\tscan = systable_beginscan(catalogRelation, InheritsRelidSeqnoIndexId,",
          "new_line_content": "\t */",
          "content_same": false
        },
        {
          "line": 7723,
          "old_api": "systable_getnext",
          "new_api": null,
          "old_text": "systable_getnext(scan)",
          "new_text": null,
          "old_line_content": "\twhile (HeapTupleIsValid(inheritsTuple = systable_getnext(scan)))",
          "new_line_content": "\t * Find and destroy the pg_inherits entry linking the two, or error out if",
          "content_same": false
        },
        {
          "line": 7728,
          "old_api": "RelationGetRelid",
          "new_api": null,
          "old_text": "RelationGetRelid(parent_rel)",
          "new_text": null,
          "old_line_content": "\t\tif (inhparent == RelationGetRelid(parent_rel))",
          "new_line_content": "\t\t\t\tAnum_pg_inherits_inhrelid,",
          "content_same": false
        },
        {
          "line": 8243,
          "old_api": "lfirst",
          "new_api": null,
          "old_text": "lfirst(l)",
          "new_text": null,
          "old_line_content": "\t\tOnCommitItem *oc = (OnCommitItem *) lfirst(l);",
          "new_line_content": " * Unregister any ON COMMIT action when a relation is deleted.",
          "content_same": false
        },
        {
          "line": 8247,
          "old_api": "GetCurrentSubTransactionId",
          "new_api": null,
          "old_text": "GetCurrentSubTransactionId()",
          "new_text": null,
          "old_line_content": "\t\t\toc->deleting_subid = GetCurrentSubTransactionId();",
          "new_line_content": "void",
          "content_same": false
        },
        {
          "line": 7736,
          "old_api": "systable_endscan",
          "new_api": null,
          "old_text": "systable_endscan(scan)",
          "new_text": null,
          "old_line_content": "\tsystable_endscan(scan);",
          "new_line_content": "\t\tOid\t\t\tinhparent;",
          "content_same": false
        },
        {
          "line": 7737,
          "old_api": "heap_close",
          "new_api": null,
          "old_text": "heap_close(catalogRelation, RowExclusiveLock)",
          "new_text": null,
          "old_line_content": "\theap_close(catalogRelation, RowExclusiveLock);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7740,
          "old_api": "ereport",
          "new_api": null,
          "old_text": "ereport(ERROR,\n\t\t\t\t(errcode(ERRCODE_UNDEFINED_TABLE),\n\t\t\t\t errmsg(\"relation \\\"%s\\\" is not a parent of relation \\\"%s\\\"\",\n\t\t\t\t\t\tRelationGetRelationName(parent_rel),\n\t\t\t\t\t\tRelationGetRelationName(rel))))",
          "new_text": null,
          "old_line_content": "\t\tereport(ERROR,",
          "new_line_content": "\t\t{",
          "content_same": false
        },
        {
          "line": 7742,
          "old_api": "errmsg",
          "new_api": null,
          "old_text": "errmsg(\"relation \\\"%s\\\" is not a parent of relation \\\"%s\\\"\",\n\t\t\t\t\t\tRelationGetRelationName(parent_rel),\n\t\t\t\t\t\tRelationGetRelationName(rel))",
          "new_text": null,
          "old_line_content": "\t\t\t\t errmsg(\"relation \\\"%s\\\" is not a parent of relation \\\"%s\\\"\",",
          "new_line_content": "\t\t\tfound = true;",
          "content_same": false
        },
        {
          "line": 7743,
          "old_api": "RelationGetRelationName",
          "new_api": null,
          "old_text": "RelationGetRelationName(parent_rel)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\tRelationGetRelationName(parent_rel),",
          "new_line_content": "\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 7744,
          "old_api": "RelationGetRelationName",
          "new_api": null,
          "old_text": "RelationGetRelationName(rel)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\tRelationGetRelationName(rel))));",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 7749,
          "old_api": "heap_open",
          "new_api": null,
          "old_text": "heap_open(AttributeRelationId, RowExclusiveLock)",
          "new_text": null,
          "old_line_content": "\tcatalogRelation = heap_open(AttributeRelationId, RowExclusiveLock);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7750,
          "old_api": "ScanKeyInit",
          "new_api": null,
          "old_text": "ScanKeyInit(&key[0],\n\t\t\t\tAnum_pg_attribute_attrelid,\n\t\t\t\tBTEqualStrategyNumber, F_OIDEQ,\n\t\t\t\tObjectIdGetDatum(RelationGetRelid(rel)))",
          "new_text": null,
          "old_line_content": "\tScanKeyInit(&key[0],",
          "new_line_content": "\tif (!found)",
          "content_same": false
        },
        {
          "line": 8267,
          "old_api": "lfirst",
          "new_api": null,
          "old_text": "lfirst(l)",
          "new_text": null,
          "old_line_content": "\t\tOnCommitItem *oc = (OnCommitItem *) lfirst(l);",
          "new_line_content": " * This is invoked just before actually committing, since it's possible",
          "content_same": false
        },
        {
          "line": 7243,
          "old_api": "XLogIsNeeded",
          "new_api": null,
          "old_text": "XLogIsNeeded()",
          "new_text": null,
          "old_line_content": "\tuse_wal = XLogIsNeeded() && !istemp;",
          "new_line_content": "\t * mention possibly making log_newpage's accesses to the page header fail.",
          "content_same": false
        },
        {
          "line": 7756,
          "old_api": "systable_getnext",
          "new_api": null,
          "old_text": "systable_getnext(scan)",
          "new_text": null,
          "old_line_content": "\twhile (HeapTupleIsValid(attributeTuple = systable_getnext(scan)))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7758,
          "old_api": "GETSTRUCT",
          "new_api": null,
          "old_text": "GETSTRUCT(attributeTuple)",
          "new_text": null,
          "old_line_content": "\t\tForm_pg_attribute att = (Form_pg_attribute) GETSTRUCT(attributeTuple);",
          "new_line_content": "\t * Search through child columns looking for ones matching parent rel",
          "content_same": false
        },
        {
          "line": 7250,
          "old_api": "CHECK_FOR_INTERRUPTS",
          "new_api": null,
          "old_text": "CHECK_FOR_INTERRUPTS()",
          "new_text": null,
          "old_line_content": "\t\tCHECK_FOR_INTERRUPTS();",
          "new_line_content": "\t * enabled AND it's not a temp rel.",
          "content_same": false
        },
        {
          "line": 7766,
          "old_api": "RelationGetRelid",
          "new_api": null,
          "old_text": "RelationGetRelid(parent_rel)",
          "new_text": null,
          "old_line_content": "\t\tif (SearchSysCacheExistsAttName(RelationGetRelid(parent_rel),",
          "new_line_content": "\t\t\t\t\t\t\t  true, SnapshotNow, 1, key);",
          "content_same": false
        },
        {
          "line": 8280,
          "old_api": "lappend_oid",
          "new_api": null,
          "old_text": "lappend_oid(oids_to_truncate, oc->relid)",
          "new_text": null,
          "old_line_content": "\t\t\t\toids_to_truncate = lappend_oid(oids_to_truncate, oc->relid);",
          "new_line_content": "\t\t/* Ignore entry if already dropped in this xact */",
          "content_same": false
        },
        {
          "line": 7256,
          "old_api": "log_newpage",
          "new_api": null,
          "old_text": "log_newpage(&dst->smgr_rnode, forkNum, blkno, page)",
          "new_text": null,
          "old_line_content": "\t\t\tlog_newpage(&dst->smgr_rnode, forkNum, blkno, page);",
          "new_line_content": "\tfor (blkno = 0; blkno < nblocks; blkno++)",
          "content_same": false
        },
        {
          "line": 7770,
          "old_api": "heap_copytuple",
          "new_api": null,
          "old_text": "heap_copytuple(attributeTuple)",
          "new_text": null,
          "old_line_content": "\t\t\tHeapTuple\tcopyTuple = heap_copytuple(attributeTuple);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7771,
          "old_api": "GETSTRUCT",
          "new_api": null,
          "old_text": "GETSTRUCT(copyTuple)",
          "new_text": null,
          "old_line_content": "\t\t\tForm_pg_attribute copy_att = (Form_pg_attribute) GETSTRUCT(copyTuple);",
          "new_line_content": "\t\t/* Ignore if dropped or not inherited */",
          "content_same": false
        },
        {
          "line": 7263,
          "old_api": "smgrextend",
          "new_api": null,
          "old_text": "smgrextend(dst, forkNum, blkno, buf, true)",
          "new_text": null,
          "old_line_content": "\t\tsmgrextend(dst, forkNum, blkno, buf, true);",
          "new_line_content": "\t\t/* XLOG stuff */",
          "content_same": false
        },
        {
          "line": 8289,
          "old_api": "performDeletion",
          "new_api": null,
          "old_text": "performDeletion(&object, DROP_CASCADE)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tperformDeletion(&object, DROP_CASCADE);",
          "new_line_content": "\t\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 7779,
          "old_api": "heap_freetuple",
          "new_api": null,
          "old_text": "heap_freetuple(copyTuple)",
          "new_text": null,
          "old_line_content": "\t\t\theap_freetuple(copyTuple);",
          "new_line_content": "\t\t{",
          "content_same": false
        },
        {
          "line": 7783,
          "old_api": "heap_close",
          "new_api": null,
          "old_text": "heap_close(catalogRelation, RowExclusiveLock)",
          "new_text": null,
          "old_line_content": "\theap_close(catalogRelation, RowExclusiveLock);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8296,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(oc->deleting_subid != InvalidSubTransactionId)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tAssert(oc->deleting_subid != InvalidSubTransactionId);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8303,
          "old_api": "heap_truncate",
          "new_api": null,
          "old_text": "heap_truncate(oids_to_truncate)",
          "new_text": null,
          "old_line_content": "\t\theap_truncate(oids_to_truncate);",
          "new_line_content": "\t\t\t\t\t * Note that table deletion will call",
          "content_same": false
        },
        {
          "line": 8304,
          "old_api": "CommandCounterIncrement",
          "new_api": null,
          "old_text": "CommandCounterIncrement()",
          "new_text": null,
          "old_line_content": "\t\tCommandCounterIncrement();\t\t/* XXX needed? */",
          "new_line_content": "\t\t\t\t\t * remove_on_commit_action, so the entry should get marked",
          "content_same": false
        },
        {
          "line": 7281,
          "old_api": "smgrimmedsync",
          "new_api": null,
          "old_text": "smgrimmedsync(dst, forkNum)",
          "new_text": null,
          "old_line_content": "\t\tsmgrimmedsync(dst, forkNum);",
          "new_line_content": "\t *",
          "content_same": false
        },
        {
          "line": 7791,
          "old_api": "heap_open",
          "new_api": null,
          "old_text": "heap_open(ConstraintRelationId, RowExclusiveLock)",
          "new_text": null,
          "old_line_content": "\tcatalogRelation = heap_open(ConstraintRelationId, RowExclusiveLock);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 7792,
          "old_api": "ScanKeyInit",
          "new_api": null,
          "old_text": "ScanKeyInit(&key[0],\n\t\t\t\tAnum_pg_constraint_conrelid,\n\t\t\t\tBTEqualStrategyNumber, F_OIDEQ,\n\t\t\t\tObjectIdGetDatum(RelationGetRelid(parent_rel)))",
          "new_text": null,
          "old_line_content": "\tScanKeyInit(&key[0],",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 7795,
          "old_api": "RelationGetRelid",
          "new_api": null,
          "old_text": "RelationGetRelid(parent_rel)",
          "new_text": null,
          "old_line_content": "\t\t\t\tObjectIdGetDatum(RelationGetRelid(parent_rel)));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7796,
          "old_api": "systable_beginscan",
          "new_api": null,
          "old_text": "systable_beginscan(catalogRelation, ConstraintRelidIndexId,\n\t\t\t\t\t\t\t  true, SnapshotNow, 1, key)",
          "new_text": null,
          "old_line_content": "\tscan = systable_beginscan(catalogRelation, ConstraintRelidIndexId,",
          "new_line_content": "\t/*",
          "content_same": false
        },
        {
          "line": 7801,
          "old_api": "systable_getnext",
          "new_api": null,
          "old_text": "systable_getnext(scan)",
          "new_text": null,
          "old_line_content": "\twhile (HeapTupleIsValid(constraintTuple = systable_getnext(scan)))",
          "new_line_content": "\t */",
          "content_same": false
        },
        {
          "line": 7293,
          "old_api": "EnableDisableTrigger",
          "new_api": null,
          "old_text": "EnableDisableTrigger(rel, trigname, fires_when, skip_system)",
          "new_text": null,
          "old_line_content": "\tEnableDisableTrigger(rel, trigname, fires_when, skip_system);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 7809,
          "old_api": "systable_endscan",
          "new_api": null,
          "old_text": "systable_endscan(scan)",
          "new_text": null,
          "old_line_content": "\tsystable_endscan(scan);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8323,
          "old_api": "list_head",
          "new_api": null,
          "old_text": "list_head(on_commits)",
          "new_text": null,
          "old_line_content": "\tcur_item = list_head(on_commits);",
          "new_line_content": " *",
          "content_same": false
        },
        {
          "line": 8327,
          "old_api": "lfirst",
          "new_api": null,
          "old_text": "lfirst(cur_item)",
          "new_text": null,
          "old_line_content": "\t\tOnCommitItem *oc = (OnCommitItem *) lfirst(cur_item);",
          "new_line_content": "void",
          "content_same": false
        },
        {
          "line": 7815,
          "old_api": "RelationGetRelid",
          "new_api": null,
          "old_text": "RelationGetRelid(rel)",
          "new_text": null,
          "old_line_content": "\t\t\t\tObjectIdGetDatum(RelationGetRelid(rel)));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7305,
          "old_api": "EnableDisableRule",
          "new_api": null,
          "old_text": "EnableDisableRule(rel, trigname, fires_when)",
          "new_text": null,
          "old_line_content": "\tEnableDisableRule(rel, trigname, fires_when);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 7816,
          "old_api": "systable_beginscan",
          "new_api": null,
          "old_text": "systable_beginscan(catalogRelation, ConstraintRelidIndexId,\n\t\t\t\t\t\t\t  true, SnapshotNow, 1, key)",
          "new_text": null,
          "old_line_content": "\tscan = systable_beginscan(catalogRelation, ConstraintRelidIndexId,",
          "new_line_content": "\t\tif (con->contype == CONSTRAINT_CHECK)",
          "content_same": false
        },
        {
          "line": 7819,
          "old_api": "systable_getnext",
          "new_api": null,
          "old_text": "systable_getnext(scan)",
          "new_text": null,
          "old_line_content": "\twhile (HeapTupleIsValid(constraintTuple = systable_getnext(scan)))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8333,
          "old_api": "list_delete_cell",
          "new_api": null,
          "old_text": "list_delete_cell(on_commits, cur_item, prev_item)",
          "new_text": null,
          "old_line_content": "\t\t\ton_commits = list_delete_cell(on_commits, cur_item, prev_item);",
          "new_line_content": "\tprev_item = NULL;",
          "content_same": false
        },
        {
          "line": 7821,
          "old_api": "GETSTRUCT",
          "new_api": null,
          "old_text": "GETSTRUCT(constraintTuple)",
          "new_text": null,
          "old_line_content": "\t\tForm_pg_constraint con = (Form_pg_constraint) GETSTRUCT(constraintTuple);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8336,
          "old_api": "lnext",
          "new_api": null,
          "old_text": "lnext(prev_item)",
          "new_text": null,
          "old_line_content": "\t\t\t\tcur_item = lnext(prev_item);",
          "new_line_content": "\twhile (cur_item != NULL)",
          "content_same": false
        },
        {
          "line": 7319,
          "old_api": "ereport",
          "new_api": null,
          "old_text": "ereport(ERROR,\n\t\t\t\t(errcode(ERRCODE_WRONG_OBJECT_TYPE),\n\t\t\t\t errmsg(\"cannot change inheritance of typed table\")))",
          "new_text": null,
          "old_line_content": "\t\tereport(ERROR,",
          "new_line_content": "/*",
          "content_same": false
        },
        {
          "line": 7320,
          "old_api": "errcode",
          "new_api": null,
          "old_text": "errcode(ERRCODE_WRONG_OBJECT_TYPE)",
          "new_text": null,
          "old_line_content": "\t\t\t\t(errcode(ERRCODE_WRONG_OBJECT_TYPE),",
          "new_line_content": " * ALTER TABLE INHERIT",
          "content_same": false
        },
        {
          "line": 7321,
          "old_api": "errmsg",
          "new_api": null,
          "old_text": "errmsg(\"cannot change inheritance of typed table\")",
          "new_text": null,
          "old_line_content": "\t\t\t\t errmsg(\"cannot change inheritance of typed table\")));",
          "new_line_content": " *",
          "content_same": false
        },
        {
          "line": 8346,
          "old_api": "lnext",
          "new_api": null,
          "old_text": "lnext(prev_item)",
          "new_text": null,
          "old_line_content": "\t\t\tcur_item = lnext(prev_item);",
          "new_line_content": "\t\t\tif (prev_item)",
          "content_same": false
        },
        {
          "line": 7831,
          "old_api": "lfirst",
          "new_api": null,
          "old_text": "lfirst(lc)",
          "new_text": null,
          "old_line_content": "\t\t\tif (strcmp(NameStr(con->conname), (char *) lfirst(lc)) == 0)",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 7841,
          "old_api": "heap_copytuple",
          "new_api": null,
          "old_text": "heap_copytuple(constraintTuple)",
          "new_text": null,
          "old_line_content": "\t\t\tHeapTuple\tcopyTuple = heap_copytuple(constraintTuple);",
          "new_line_content": "\t\t{",
          "content_same": false
        },
        {
          "line": 7845,
          "old_api": "elog",
          "new_api": null,
          "old_text": "elog(ERROR, \"relation %u has non-inherited constraint \\\"%s\\\"\",\n\t\t\t\t\t RelationGetRelid(rel), NameStr(copy_con->conname))",
          "new_text": null,
          "old_line_content": "\t\t\t\telog(ERROR, \"relation %u has non-inherited constraint \\\"%s\\\"\",",
          "new_line_content": "\t\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 7846,
          "old_api": "NameStr",
          "new_api": null,
          "old_text": "NameStr(copy_con->conname)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t RelationGetRelid(rel), NameStr(copy_con->conname));",
          "new_line_content": "\t\t\t}",
          "content_same": false
        },
        {
          "line": 7339,
          "old_api": "heap_openrv",
          "new_api": null,
          "old_text": "heap_openrv(parent, AccessShareLock)",
          "new_text": null,
          "old_line_content": "\tparent_rel = heap_openrv(parent, AccessShareLock);",
          "new_line_content": "\t\t\t\tcatalogRelation;",
          "content_same": false
        },
        {
          "line": 8366,
          "old_api": "list_head",
          "new_api": null,
          "old_text": "list_head(on_commits)",
          "new_text": null,
          "old_line_content": "\tcur_item = list_head(on_commits);",
          "new_line_content": " * subtransaction.\tDuring subcommit, just relabel entries marked during",
          "content_same": false
        },
        {
          "line": 7854,
          "old_api": "heap_freetuple",
          "new_api": null,
          "old_text": "heap_freetuple(copyTuple)",
          "new_text": null,
          "old_line_content": "\t\t\theap_freetuple(copyTuple);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7345,
          "old_api": "ATSimplePermissions",
          "new_api": null,
          "old_text": "ATSimplePermissions(parent_rel, false)",
          "new_text": null,
          "old_line_content": "\tATSimplePermissions(parent_rel, false);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8370,
          "old_api": "lfirst",
          "new_api": null,
          "old_text": "lfirst(cur_item)",
          "new_text": null,
          "old_line_content": "\t\tOnCommitItem *oc = (OnCommitItem *) lfirst(cur_item);",
          "new_line_content": "AtEOSubXact_on_commit_actions(bool isCommit, SubTransactionId mySubid,",
          "content_same": false
        },
        {
          "line": 7858,
          "old_api": "systable_endscan",
          "new_api": null,
          "old_text": "systable_endscan(scan)",
          "new_text": null,
          "old_line_content": "\tsystable_endscan(scan);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7859,
          "old_api": "heap_close",
          "new_api": null,
          "old_text": "heap_close(catalogRelation, RowExclusiveLock)",
          "new_text": null,
          "old_line_content": "\theap_close(catalogRelation, RowExclusiveLock);",
          "new_line_content": "\t\t\tcopy_con->coninhcount--;",
          "content_same": false
        },
        {
          "line": 7349,
          "old_api": "ereport",
          "new_api": null,
          "old_text": "ereport(ERROR,\n\t\t\t\t(errcode(ERRCODE_WRONG_OBJECT_TYPE),\n\t\t\t\t errmsg(\"cannot inherit from temporary relation \\\"%s\\\"\",\n\t\t\t\t\t\tRelationGetRelationName(parent_rel))))",
          "new_text": null,
          "old_line_content": "\t\tereport(ERROR,",
          "new_line_content": "\t */",
          "content_same": false
        },
        {
          "line": 8375,
          "old_api": "list_delete_cell",
          "new_api": null,
          "old_text": "list_delete_cell(on_commits, cur_item, prev_item)",
          "new_text": null,
          "old_line_content": "\t\t\ton_commits = list_delete_cell(on_commits, cur_item, prev_item);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8376,
          "old_api": "pfree",
          "new_api": null,
          "old_text": "pfree(oc)",
          "new_text": null,
          "old_line_content": "\t\t\tpfree(oc);",
          "new_line_content": "\tprev_item = NULL;",
          "content_same": false
        },
        {
          "line": 7351,
          "old_api": "errmsg",
          "new_api": null,
          "old_text": "errmsg(\"cannot inherit from temporary relation \\\"%s\\\"\",\n\t\t\t\t\t\tRelationGetRelationName(parent_rel))",
          "new_text": null,
          "old_line_content": "\t\t\t\t errmsg(\"cannot inherit from temporary relation \\\"%s\\\"\",",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8378,
          "old_api": "lnext",
          "new_api": null,
          "old_text": "lnext(prev_item)",
          "new_text": null,
          "old_line_content": "\t\t\t\tcur_item = lnext(prev_item);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7352,
          "old_api": "RelationGetRelationName",
          "new_api": null,
          "old_text": "RelationGetRelationName(parent_rel)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\tRelationGetRelationName(parent_rel))));",
          "new_line_content": "\t/*",
          "content_same": false
        },
        {
          "line": 8380,
          "old_api": "list_head",
          "new_api": null,
          "old_text": "list_head(on_commits)",
          "new_text": null,
          "old_line_content": "\t\t\t\tcur_item = list_head(on_commits);",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 7866,
          "old_api": "heap_open",
          "new_api": null,
          "old_text": "heap_open(DependRelationId, RowExclusiveLock)",
          "new_text": null,
          "old_line_content": "\tcatalogRelation = heap_open(DependRelationId, RowExclusiveLock);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 7868,
          "old_api": "ScanKeyInit",
          "new_api": null,
          "old_text": "ScanKeyInit(&key[0],\n\t\t\t\tAnum_pg_depend_classid,\n\t\t\t\tBTEqualStrategyNumber, F_OIDEQ,\n\t\t\t\tObjectIdGetDatum(RelationRelationId))",
          "new_text": null,
          "old_line_content": "\tScanKeyInit(&key[0],",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7871,
          "old_api": "ObjectIdGetDatum",
          "new_api": null,
          "old_text": "ObjectIdGetDatum(RelationRelationId)",
          "new_text": null,
          "old_line_content": "\t\t\t\tObjectIdGetDatum(RelationRelationId));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7872,
          "old_api": "ScanKeyInit",
          "new_api": null,
          "old_text": "ScanKeyInit(&key[1],\n\t\t\t\tAnum_pg_depend_objid,\n\t\t\t\tBTEqualStrategyNumber, F_OIDEQ,\n\t\t\t\tObjectIdGetDatum(RelationGetRelid(rel)))",
          "new_text": null,
          "old_line_content": "\tScanKeyInit(&key[1],",
          "new_line_content": "\t/*",
          "content_same": false
        },
        {
          "line": 7875,
          "old_api": "RelationGetRelid",
          "new_api": null,
          "old_text": "RelationGetRelid(rel)",
          "new_text": null,
          "old_line_content": "\t\t\t\tObjectIdGetDatum(RelationGetRelid(rel)));",
          "new_line_content": "\t * There's no convenient way to do this, so go trawling through pg_depend",
          "content_same": false
        },
        {
          "line": 7876,
          "old_api": "ScanKeyInit",
          "new_api": null,
          "old_text": "ScanKeyInit(&key[2],\n\t\t\t\tAnum_pg_depend_objsubid,\n\t\t\t\tBTEqualStrategyNumber, F_INT4EQ,\n\t\t\t\tInt32GetDatum(0))",
          "new_text": null,
          "old_line_content": "\tScanKeyInit(&key[2],",
          "new_line_content": "\t */",
          "content_same": false
        },
        {
          "line": 8390,
          "old_api": "lnext",
          "new_api": null,
          "old_text": "lnext(prev_item)",
          "new_text": null,
          "old_line_content": "\t\t\tcur_item = lnext(prev_item);",
          "new_line_content": "\t\t\telse",
          "content_same": false
        },
        {
          "line": 7366,
          "old_api": "RelationGetRelid",
          "new_api": null,
          "old_text": "RelationGetRelid(child_rel)",
          "new_text": null,
          "old_line_content": "\t\t\t\tObjectIdGetDatum(RelationGetRelid(child_rel)));",
          "new_line_content": "\t * Check for duplicates in the list of parents, and determine the highest",
          "content_same": false
        },
        {
          "line": 7367,
          "old_api": "systable_beginscan",
          "new_api": null,
          "old_text": "systable_beginscan(catalogRelation, InheritsRelidSeqnoIndexId,\n\t\t\t\t\t\t\t  true, SnapshotNow, 1, &key)",
          "new_text": null,
          "old_line_content": "\tscan = systable_beginscan(catalogRelation, InheritsRelidSeqnoIndexId,",
          "new_line_content": "\t * inhseqno already present; we'll use the next one for the new parent.",
          "content_same": false
        },
        {
          "line": 7881,
          "old_api": "systable_beginscan",
          "new_api": null,
          "old_text": "systable_beginscan(catalogRelation, DependDependerIndexId, true,\n\t\t\t\t\t\t\t  SnapshotNow, 3, key)",
          "new_text": null,
          "old_line_content": "\tscan = systable_beginscan(catalogRelation, DependDependerIndexId, true,",
          "new_line_content": "\t\t\t\tBTEqualStrategyNumber, F_OIDEQ,",
          "content_same": false
        },
        {
          "line": 7372,
          "old_api": "systable_getnext",
          "new_api": null,
          "old_text": "systable_getnext(scan)",
          "new_text": null,
          "old_line_content": "\twhile (HeapTupleIsValid(inheritsTuple = systable_getnext(scan)))",
          "new_line_content": "\t */",
          "content_same": false
        },
        {
          "line": 7884,
          "old_api": "systable_getnext",
          "new_api": null,
          "old_text": "systable_getnext(scan)",
          "new_text": null,
          "old_line_content": "\twhile (HeapTupleIsValid(depTuple = systable_getnext(scan)))",
          "new_line_content": "\t\t\t\tAnum_pg_depend_objid,",
          "content_same": false
        },
        {
          "line": 7376,
          "old_api": "RelationGetRelid",
          "new_api": null,
          "old_text": "RelationGetRelid(parent_rel)",
          "new_text": null,
          "old_line_content": "\t\tif (inh->inhparent == RelationGetRelid(parent_rel))",
          "new_line_content": "\t\t\t\tBTEqualStrategyNumber, F_OIDEQ,",
          "content_same": false
        },
        {
          "line": 7889,
          "old_api": "RelationGetRelid",
          "new_api": null,
          "old_text": "RelationGetRelid(parent_rel)",
          "new_text": null,
          "old_line_content": "\t\t\tdep->refobjid == RelationGetRelid(parent_rel) &&",
          "new_line_content": "\t\t\t\tBTEqualStrategyNumber, F_INT4EQ,",
          "content_same": false
        },
        {
          "line": 7379,
          "old_api": "errmsg",
          "new_api": null,
          "old_text": "errmsg(\"relation \\\"%s\\\" would be inherited from more than once\",\n\t\t\t\t\tRelationGetRelationName(parent_rel))",
          "new_text": null,
          "old_line_content": "\t\t\t errmsg(\"relation \\\"%s\\\" would be inherited from more than once\",",
          "new_line_content": "\t\t\t\t\t\t\t  true, SnapshotNow, 1, &key);",
          "content_same": false
        },
        {
          "line": 7380,
          "old_api": "RelationGetRelationName",
          "new_api": null,
          "old_text": "RelationGetRelationName(parent_rel)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tRelationGetRelationName(parent_rel))));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7384,
          "old_api": "systable_endscan",
          "new_api": null,
          "old_text": "systable_endscan(scan)",
          "new_text": null,
          "old_line_content": "\tsystable_endscan(scan);",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 7896,
          "old_api": "heap_close",
          "new_api": null,
          "old_text": "heap_close(catalogRelation, RowExclusiveLock)",
          "new_text": null,
          "old_line_content": "\theap_close(catalogRelation, RowExclusiveLock);",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 7899,
          "old_api": "heap_close",
          "new_api": null,
          "old_text": "heap_close(parent_rel, NoLock)",
          "new_text": null,
          "old_line_content": "\theap_close(parent_rel, NoLock);",
          "new_line_content": "\t\tif (dep->refclassid == RelationRelationId &&",
          "content_same": false
        },
        {
          "line": 7400,
          "old_api": "RelationGetRelid",
          "new_api": null,
          "old_text": "RelationGetRelid(child_rel)",
          "new_text": null,
          "old_line_content": "\tchildren = find_all_inheritors(RelationGetRelid(child_rel),",
          "new_line_content": "\t *",
          "content_same": false
        },
        {
          "line": 7403,
          "old_api": "RelationGetRelid",
          "new_api": null,
          "old_text": "RelationGetRelid(parent_rel)",
          "new_text": null,
          "old_line_content": "\tif (list_member_oid(children, RelationGetRelid(parent_rel)))",
          "new_line_content": "\t * making another inheritance link that closes the loop but does not join",
          "content_same": false
        },
        {
          "line": 7404,
          "old_api": "ereport",
          "new_api": null,
          "old_text": "ereport(ERROR,\n\t\t\t\t(errcode(ERRCODE_DUPLICATE_TABLE),\n\t\t\t\t errmsg(\"circular inheritance not allowed\"),\n\t\t\t\t errdetail(\"\\\"%s\\\" is already a child of \\\"%s\\\".\",\n\t\t\t\t\t\t   parent->relname,\n\t\t\t\t\t\t   RelationGetRelationName(child_rel))))",
          "new_text": null,
          "old_line_content": "\t\tereport(ERROR,",
          "new_line_content": "\t * either of the rels we have locked.  Preventing that seems to require",
          "content_same": false
        },
        {
          "line": 7405,
          "old_api": "errcode",
          "new_api": null,
          "old_text": "errcode(ERRCODE_DUPLICATE_TABLE)",
          "new_text": null,
          "old_line_content": "\t\t\t\t(errcode(ERRCODE_DUPLICATE_TABLE),",
          "new_line_content": "\t * exclusive locks on the entire inheritance tree, which is a cure worse",
          "content_same": false
        },
        {
          "line": 7406,
          "old_api": "errmsg",
          "new_api": null,
          "old_text": "errmsg(\"circular inheritance not allowed\")",
          "new_text": null,
          "old_line_content": "\t\t\t\t errmsg(\"circular inheritance not allowed\"),",
          "new_line_content": "\t * than the disease.  find_all_inheritors() will cope with circularity",
          "content_same": false
        },
        {
          "line": 7407,
          "old_api": "errdetail",
          "new_api": null,
          "old_text": "errdetail(\"\\\"%s\\\" is already a child of \\\"%s\\\".\",\n\t\t\t\t\t\t   parent->relname,\n\t\t\t\t\t\t   RelationGetRelationName(child_rel))",
          "new_text": null,
          "old_line_content": "\t\t\t\t errdetail(\"\\\"%s\\\" is already a child of \\\"%s\\\".\",",
          "new_line_content": "\t * anyway, so don't sweat it too much.",
          "content_same": false
        },
        {
          "line": 7918,
          "old_api": "relation_openrv",
          "new_api": null,
          "old_text": "relation_openrv(relation, lockmode)",
          "new_text": null,
          "old_line_content": "\trel = relation_openrv(relation, lockmode);",
          "new_line_content": " */",
          "content_same": false
        },
        {
          "line": 7409,
          "old_api": "RelationGetRelationName",
          "new_api": null,
          "old_text": "RelationGetRelationName(child_rel)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t   RelationGetRelationName(child_rel))));",
          "new_line_content": "\t * We use weakest lock we can on child's children, namely AccessShareLock.",
          "content_same": false
        },
        {
          "line": 7920,
          "old_api": "RelationGetRelid",
          "new_api": null,
          "old_text": "RelationGetRelid(rel)",
          "new_text": null,
          "old_line_content": "\trelid = RelationGetRelid(rel);",
          "new_line_content": "AlterTableNamespace(RangeVar *relation, const char *newschema,",
          "content_same": false
        },
        {
          "line": 7921,
          "old_api": "RelationGetNamespace",
          "new_api": null,
          "old_text": "RelationGetNamespace(rel)",
          "new_text": null,
          "old_line_content": "\toldNspOid = RelationGetNamespace(rel);",
          "new_line_content": "\t\t\t\t\tObjectType stmttype, LOCKMODE lockmode)",
          "content_same": false
        },
        {
          "line": 7413,
          "old_api": "ereport",
          "new_api": null,
          "old_text": "ereport(ERROR,\n\t\t\t\t(errcode(ERRCODE_WRONG_OBJECT_TYPE),\n\t\t\t\t errmsg(\"table \\\"%s\\\" without OIDs cannot inherit from table \\\"%s\\\" with OIDs\",\n\t\t\t\t\t\tRelationGetRelationName(child_rel),\n\t\t\t\t\t\tRelationGetRelationName(parent_rel))))",
          "new_text": null,
          "old_line_content": "\t\tereport(ERROR,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7423,
          "old_api": "MergeConstraintsIntoExisting",
          "new_api": null,
          "old_text": "MergeConstraintsIntoExisting(child_rel, parent_rel)",
          "new_text": null,
          "old_line_content": "\tMergeConstraintsIntoExisting(child_rel, parent_rel);",
          "new_line_content": "\tif (parent_rel->rd_rel->relhasoids && !child_rel->rd_rel->relhasoids)",
          "content_same": false
        },
        {
          "line": 7936,
          "old_api": "ereport",
          "new_api": null,
          "old_text": "ereport(ERROR,\n\t\t\t\t\t\t(errcode(ERRCODE_WRONG_OBJECT_TYPE),\n\t\t\t\t\t\t errmsg(\"\\\"%s\\\" is not a sequence\",\n\t\t\t\t\t\t\t\tRelationGetRelationName(rel))))",
          "new_text": null,
          "old_line_content": "\t\t\t\tereport(ERROR,",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 7937,
          "old_api": "errcode",
          "new_api": null,
          "old_text": "errcode(ERRCODE_WRONG_OBJECT_TYPE)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t(errcode(ERRCODE_WRONG_OBJECT_TYPE),",
          "new_line_content": "\t\tcase OBJECT_TABLE:",
          "content_same": false
        },
        {
          "line": 7938,
          "old_api": "errmsg",
          "new_api": null,
          "old_text": "errmsg(\"\\\"%s\\\" is not a sequence\",\n\t\t\t\t\t\t\t\tRelationGetRelationName(rel))",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t errmsg(\"\\\"%s\\\" is not a sequence\",",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7939,
          "old_api": "RelationGetRelationName",
          "new_api": null,
          "old_text": "RelationGetRelationName(rel)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\t\tRelationGetRelationName(rel))));",
          "new_line_content": "\t\t\t/*",
          "content_same": false
        },
        {
          "line": 7429,
          "old_api": "RelationGetRelid",
          "new_api": null,
          "old_text": "RelationGetRelid(parent_rel)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\t RelationGetRelid(parent_rel),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7944,
          "old_api": "ereport",
          "new_api": null,
          "old_text": "ereport(ERROR,\n\t\t\t\t\t\t(errcode(ERRCODE_WRONG_OBJECT_TYPE),\n\t\t\t\t\t\t errmsg(\"\\\"%s\\\" is not a view\",\n\t\t\t\t\t\t\t\tRelationGetRelationName(rel))))",
          "new_text": null,
          "old_line_content": "\t\t\t\tereport(ERROR,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7945,
          "old_api": "errcode",
          "new_api": null,
          "old_text": "errcode(ERRCODE_WRONG_OBJECT_TYPE)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t(errcode(ERRCODE_WRONG_OBJECT_TYPE),",
          "new_line_content": "\t\tcase OBJECT_SEQUENCE:",
          "content_same": false
        },
        {
          "line": 7946,
          "old_api": "errmsg",
          "new_api": null,
          "old_text": "errmsg(\"\\\"%s\\\" is not a view\",\n\t\t\t\t\t\t\t\tRelationGetRelationName(rel))",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t errmsg(\"\\\"%s\\\" is not a view\",",
          "new_line_content": "\t\t\tif (rel->rd_rel->relkind != RELKIND_SEQUENCE)",
          "content_same": false
        },
        {
          "line": 7437,
          "old_api": "heap_close",
          "new_api": null,
          "old_text": "heap_close(parent_rel, NoLock)",
          "new_text": null,
          "old_line_content": "\theap_close(parent_rel, NoLock);",
          "new_line_content": "\t * OK, it looks valid.\tMake the catalog entries that show inheritance.",
          "content_same": false
        },
        {
          "line": 7951,
          "old_api": "elog",
          "new_api": null,
          "old_text": "elog(ERROR, \"unrecognized object type: %d\", (int) stmttype)",
          "new_text": null,
          "old_line_content": "\t\t\telog(ERROR, \"unrecognized object type: %d\", (int) stmttype);",
          "new_line_content": "\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 7452,
          "old_api": "GETSTRUCT",
          "new_api": null,
          "old_text": "GETSTRUCT(contup)",
          "new_text": null,
          "old_line_content": "\tcon = (Form_pg_constraint) GETSTRUCT(contup);",
          "new_line_content": " * Obtain the source-text form of the constraint expression for a check",
          "content_same": false
        },
        {
          "line": 7453,
          "old_api": "heap_getattr",
          "new_api": null,
          "old_text": "heap_getattr(contup, Anum_pg_constraint_conbin, tupdesc, &isnull)",
          "new_text": null,
          "old_line_content": "\tattr = heap_getattr(contup, Anum_pg_constraint_conbin, tupdesc, &isnull);",
          "new_line_content": " * constraint, given its pg_constraint tuple",
          "content_same": false
        },
        {
          "line": 7455,
          "old_api": "HeapTupleGetOid",
          "new_api": null,
          "old_text": "HeapTupleGetOid(contup)",
          "new_text": null,
          "old_line_content": "\t\telog(ERROR, \"null conbin for constraint %u\", HeapTupleGetOid(contup));",
          "new_line_content": "static char *",
          "content_same": false
        },
        {
          "line": 7967,
          "old_api": "sequenceIsOwned",
          "new_api": null,
          "old_text": "sequenceIsOwned(relid, &tableId, &colId)",
          "new_text": null,
          "old_line_content": "\t\t\t\tif (sequenceIsOwned(relid, &tableId, &colId))",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 7457,
          "old_api": "DirectFunctionCall2",
          "new_api": null,
          "old_text": "DirectFunctionCall2(pg_get_expr, attr,\n\t\t\t\t\t\t\t   ObjectIdGetDatum(con->conrelid))",
          "new_text": null,
          "old_line_content": "\texpr = DirectFunctionCall2(pg_get_expr, attr,",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 7458,
          "old_api": "ObjectIdGetDatum",
          "new_api": null,
          "old_text": "ObjectIdGetDatum(con->conrelid)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\t   ObjectIdGetDatum(con->conrelid));",
          "new_line_content": "\tForm_pg_constraint con;",
          "content_same": false
        },
        {
          "line": 7459,
          "old_api": "TextDatumGetCString",
          "new_api": null,
          "old_text": "TextDatumGetCString(expr)",
          "new_text": null,
          "old_line_content": "\treturn TextDatumGetCString(expr);",
          "new_line_content": "\tbool\t\tisnull;",
          "content_same": false
        },
        {
          "line": 7968,
          "old_api": "ereport",
          "new_api": null,
          "old_text": "ereport(ERROR,\n\t\t\t\t\t\t\t(errcode(ERRCODE_FEATURE_NOT_SUPPORTED),\n\t\t\t\t\t\t\t errmsg(\"cannot move an owned sequence into another schema\"),\n\t\t\t\t\t  errdetail(\"Sequence \\\"%s\\\" is linked to table \\\"%s\\\".\",\n\t\t\t\t\t\t\t\tRelationGetRelationName(rel),\n\t\t\t\t\t\t\t\tget_rel_name(tableId))))",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tereport(ERROR,",
          "new_line_content": "\t\tcase RELKIND_RELATION:",
          "content_same": false
        },
        {
          "line": 7969,
          "old_api": "errcode",
          "new_api": null,
          "old_text": "errcode(ERRCODE_FEATURE_NOT_SUPPORTED)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\t(errcode(ERRCODE_FEATURE_NOT_SUPPORTED),",
          "new_line_content": "\t\tcase RELKIND_VIEW:",
          "content_same": false
        },
        {
          "line": 7970,
          "old_api": "errmsg",
          "new_api": null,
          "old_text": "errmsg(\"cannot move an owned sequence into another schema\")",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\t errmsg(\"cannot move an owned sequence into another schema\"),",
          "new_line_content": "\t\t\t/* ok to change schema */",
          "content_same": false
        },
        {
          "line": 7971,
          "old_api": "errdetail",
          "new_api": null,
          "old_text": "errdetail(\"Sequence \\\"%s\\\" is linked to table \\\"%s\\\".\",\n\t\t\t\t\t\t\t\tRelationGetRelationName(rel),\n\t\t\t\t\t\t\t\tget_rel_name(tableId))",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t  errdetail(\"Sequence \\\"%s\\\" is linked to table \\\"%s\\\".\",",
          "new_line_content": "\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 7972,
          "old_api": "RelationGetRelationName",
          "new_api": null,
          "old_text": "RelationGetRelationName(rel)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\t\tRelationGetRelationName(rel),",
          "new_line_content": "\t\tcase RELKIND_SEQUENCE:",
          "content_same": false
        },
        {
          "line": 7973,
          "old_api": "get_rel_name",
          "new_api": null,
          "old_text": "get_rel_name(tableId)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\t\tget_rel_name(tableId))));",
          "new_line_content": "\t\t\t{",
          "content_same": false
        },
        {
          "line": 7977,
          "old_api": "ereport",
          "new_api": null,
          "old_text": "ereport(ERROR,\n\t\t\t\t\t(errcode(ERRCODE_WRONG_OBJECT_TYPE),\n\t\t\t\t\t errmsg(\"\\\"%s\\\" is a composite type\",\n\t\t\t\t\t\t\tRelationGetRelationName(rel)),\n\t\t\t\t\t errhint(\"Use ALTER TYPE instead.\")))",
          "new_text": null,
          "old_line_content": "\t\t\tereport(ERROR,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7472,
          "old_api": "GETSTRUCT",
          "new_api": null,
          "old_text": "GETSTRUCT(a)",
          "new_text": null,
          "old_line_content": "\tForm_pg_constraint acon = (Form_pg_constraint) GETSTRUCT(a);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7473,
          "old_api": "GETSTRUCT",
          "new_api": null,
          "old_text": "GETSTRUCT(b)",
          "new_text": null,
          "old_line_content": "\tForm_pg_constraint bcon = (Form_pg_constraint) GETSTRUCT(b);",
          "new_line_content": "/*",
          "content_same": false
        },
        {
          "line": 7987,
          "old_api": "ereport",
          "new_api": null,
          "old_text": "ereport(ERROR,\n\t\t\t\t\t(errcode(ERRCODE_WRONG_OBJECT_TYPE),\n\t\t\t\t\t errmsg(\"\\\"%s\\\" is not a table, view, or sequence\",\n\t\t\t\t\t\t\tRelationGetRelationName(rel))))",
          "new_text": null,
          "old_line_content": "\t\t\tereport(ERROR,",
          "new_line_content": "\t\tcase RELKIND_COMPOSITE_TYPE:",
          "content_same": false
        },
        {
          "line": 7477,
          "old_api": "decompile_conbin",
          "new_api": null,
          "old_text": "decompile_conbin(a, tupleDesc)",
          "new_text": null,
          "old_line_content": "\t\tstrcmp(decompile_conbin(a, tupleDesc),",
          "new_line_content": " * source string.  This insulates us from issues like whether attributes",
          "content_same": false
        },
        {
          "line": 7478,
          "old_api": "decompile_conbin",
          "new_api": null,
          "old_text": "decompile_conbin(b, tupleDesc)",
          "new_text": null,
          "old_line_content": "\t\t\t   decompile_conbin(b, tupleDesc)) != 0)",
          "new_line_content": " * have the same physical column numbers in parent and child relations.",
          "content_same": false
        },
        {
          "line": 7994,
          "old_api": "LookupCreationNamespace",
          "new_api": null,
          "old_text": "LookupCreationNamespace(newschema)",
          "new_text": null,
          "old_line_content": "\tnspOid = LookupCreationNamespace(newschema);",
          "new_line_content": "\t\tcase RELKIND_INDEX:",
          "content_same": false
        },
        {
          "line": 7997,
          "old_api": "ereport",
          "new_api": null,
          "old_text": "ereport(ERROR,\n\t\t\t\t(errcode(ERRCODE_DUPLICATE_TABLE),\n\t\t\t\t errmsg(\"relation \\\"%s\\\" is already in schema \\\"%s\\\"\",\n\t\t\t\t\t\tRelationGetRelationName(rel),\n\t\t\t\t\t\tnewschema)))",
          "new_text": null,
          "old_line_content": "\t\tereport(ERROR,",
          "new_line_content": "\t\tdefault:",
          "content_same": false
        },
        {
          "line": 8004,
          "old_api": "isAnyTempNamespace",
          "new_api": null,
          "old_text": "isAnyTempNamespace(oldNspOid)",
          "new_text": null,
          "old_line_content": "\tif (isAnyTempNamespace(nspOid) || isAnyTempNamespace(oldNspOid))",
          "new_line_content": "\t/* get schema OID and check its permissions */",
          "content_same": false
        },
        {
          "line": 8006,
          "old_api": "errcode",
          "new_api": null,
          "old_text": "errcode(ERRCODE_FEATURE_NOT_SUPPORTED)",
          "new_text": null,
          "old_line_content": "\t\t\t\t(errcode(ERRCODE_FEATURE_NOT_SUPPORTED),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8007,
          "old_api": "errmsg",
          "new_api": null,
          "old_text": "errmsg(\"cannot move objects into or out of temporary schemas\")",
          "new_text": null,
          "old_line_content": "\t\t\terrmsg(\"cannot move objects into or out of temporary schemas\")));",
          "new_line_content": "\tif (oldNspOid == nspOid)",
          "content_same": false
        },
        {
          "line": 8012,
          "old_api": "errcode",
          "new_api": null,
          "old_text": "errcode(ERRCODE_FEATURE_NOT_SUPPORTED)",
          "new_text": null,
          "old_line_content": "\t\t\t\t(errcode(ERRCODE_FEATURE_NOT_SUPPORTED),",
          "new_line_content": "\t\t\t\t\t\tnewschema)));",
          "content_same": false
        },
        {
          "line": 8013,
          "old_api": "errmsg",
          "new_api": null,
          "old_text": "errmsg(\"cannot move objects into or out of TOAST schema\")",
          "new_text": null,
          "old_line_content": "\t\t\t\t errmsg(\"cannot move objects into or out of TOAST schema\")));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7508,
          "old_api": "heap_open",
          "new_api": null,
          "old_text": "heap_open(AttributeRelationId, RowExclusiveLock)",
          "new_text": null,
          "old_line_content": "\tattrrel = heap_open(AttributeRelationId, RowExclusiveLock);",
          "new_line_content": " */",
          "content_same": false
        },
        {
          "line": 8021,
          "old_api": "AlterTypeNamespaceInternal",
          "new_api": null,
          "old_text": "AlterTypeNamespaceInternal(rel->rd_rel->reltype, nspOid, false, false)",
          "new_text": null,
          "old_line_content": "\tAlterTypeNamespaceInternal(rel->rd_rel->reltype, nspOid, false, false);",
          "new_line_content": "\tif (nspOid == PG_TOAST_NAMESPACE || oldNspOid == PG_TOAST_NAMESPACE)",
          "content_same": false
        },
        {
          "line": 7510,
          "old_api": "RelationGetDescr",
          "new_api": null,
          "old_text": "RelationGetDescr(parent_rel)",
          "new_text": null,
          "old_line_content": "\ttupleDesc = RelationGetDescr(parent_rel);",
          "new_line_content": "MergeAttributesIntoExisting(Relation child_rel, Relation parent_rel)",
          "content_same": false
        },
        {
          "line": 8026,
          "old_api": "AlterIndexNamespaces",
          "new_api": null,
          "old_text": "AlterIndexNamespaces(classRel, rel, oldNspOid, nspOid)",
          "new_text": null,
          "old_line_content": "\t\tAlterIndexNamespaces(classRel, rel, oldNspOid, nspOid);",
          "new_line_content": "\t/* OK, modify the pg_class row and pg_depend entry */",
          "content_same": false
        },
        {
          "line": 8028,
          "old_api": "AlterConstraintNamespaces",
          "new_api": null,
          "old_text": "AlterConstraintNamespaces(relid, oldNspOid, nspOid, false)",
          "new_text": null,
          "old_line_content": "\t\tAlterConstraintNamespaces(relid, oldNspOid, nspOid, false);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7517,
          "old_api": "NameStr",
          "new_api": null,
          "old_text": "NameStr(attribute->attname)",
          "new_text": null,
          "old_line_content": "\t\tchar\t   *attributeName = NameStr(attribute->attname);",
          "new_line_content": "\tHeapTuple\ttuple;",
          "content_same": false
        },
        {
          "line": 8031,
          "old_api": "heap_close",
          "new_api": null,
          "old_text": "heap_close(classRel, RowExclusiveLock)",
          "new_text": null,
          "old_line_content": "\theap_close(classRel, RowExclusiveLock);",
          "new_line_content": "\t/* Fix the table's rowtype too */",
          "content_same": false
        },
        {
          "line": 8034,
          "old_api": "relation_close",
          "new_api": null,
          "old_text": "relation_close(rel, NoLock)",
          "new_text": null,
          "old_line_content": "\trelation_close(rel, NoLock);",
          "new_line_content": "\t/* Fix other dependent stuff */",
          "content_same": false
        },
        {
          "line": 7524,
          "old_api": "RelationGetRelid",
          "new_api": null,
          "old_text": "RelationGetRelid(child_rel)",
          "new_text": null,
          "old_line_content": "\t\ttuple = SearchSysCacheCopyAttName(RelationGetRelid(child_rel),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7526,
          "old_api": "HeapTupleIsValid",
          "new_api": null,
          "old_text": "HeapTupleIsValid(tuple)",
          "new_text": null,
          "old_line_content": "\t\tif (HeapTupleIsValid(tuple))",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 7529,
          "old_api": "GETSTRUCT",
          "new_api": null,
          "old_text": "GETSTRUCT(tuple)",
          "new_text": null,
          "old_line_content": "\t\t\tForm_pg_attribute childatt = (Form_pg_attribute) GETSTRUCT(tuple);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7533,
          "old_api": "ereport",
          "new_api": null,
          "old_text": "ereport(ERROR,\n\t\t\t\t\t\t(errcode(ERRCODE_DATATYPE_MISMATCH),\n\t\t\t\t\t\t errmsg(\"child table \\\"%s\\\" has different type for column \\\"%s\\\"\",\n\t\t\t\t\t\t\t\tRelationGetRelationName(child_rel),\n\t\t\t\t\t\t\t\tattributeName)))",
          "new_text": null,
          "old_line_content": "\t\t\t\tereport(ERROR,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7534,
          "old_api": "errcode",
          "new_api": null,
          "old_text": "errcode(ERRCODE_DATATYPE_MISMATCH)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t(errcode(ERRCODE_DATATYPE_MISMATCH),",
          "new_line_content": "\t\t/* Find same column in child (matching on column name). */",
          "content_same": false
        },
        {
          "line": 7536,
          "old_api": "RelationGetRelationName",
          "new_api": null,
          "old_text": "RelationGetRelationName(child_rel)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\t\tRelationGetRelationName(child_rel),",
          "new_line_content": "\t\t\t\t\t\t\t\t\t\t  attributeName);",
          "content_same": false
        },
        {
          "line": 8050,
          "old_api": "ObjectIdGetDatum",
          "new_api": null,
          "old_text": "ObjectIdGetDatum(relOid)",
          "new_text": null,
          "old_line_content": "\tclassTup = SearchSysCacheCopy1(RELOID, ObjectIdGetDatum(relOid));",
          "new_line_content": " * entry, and the pg_depend entry if any.  Caller must already have",
          "content_same": false
        },
        {
          "line": 8051,
          "old_api": "HeapTupleIsValid",
          "new_api": null,
          "old_text": "HeapTupleIsValid(classTup)",
          "new_text": null,
          "old_line_content": "\tif (!HeapTupleIsValid(classTup))",
          "new_line_content": " * opened and write-locked pg_class.",
          "content_same": false
        },
        {
          "line": 8052,
          "old_api": "elog",
          "new_api": null,
          "old_text": "elog(ERROR, \"cache lookup failed for relation %u\", relOid)",
          "new_text": null,
          "old_line_content": "\t\telog(ERROR, \"cache lookup failed for relation %u\", relOid);",
          "new_line_content": " */",
          "content_same": false
        },
        {
          "line": 7541,
          "old_api": "errcode",
          "new_api": null,
          "old_text": "errcode(ERRCODE_DATATYPE_MISMATCH)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t(errcode(ERRCODE_DATATYPE_MISMATCH),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7542,
          "old_api": "errmsg",
          "new_api": null,
          "old_text": "errmsg(\"column \\\"%s\\\" in child table must be marked NOT NULL\",\n\t\t\t\t\t   attributeName)",
          "new_text": null,
          "old_line_content": "\t\t\t\terrmsg(\"column \\\"%s\\\" in child table must be marked NOT NULL\",",
          "new_line_content": "\t\t\tif (attribute->atttypid != childatt->atttypid ||",
          "content_same": false
        },
        {
          "line": 8053,
          "old_api": "GETSTRUCT",
          "new_api": null,
          "old_text": "GETSTRUCT(classTup)",
          "new_text": null,
          "old_line_content": "\tclassForm = (Form_pg_class) GETSTRUCT(classTup);",
          "new_line_content": "void",
          "content_same": false
        },
        {
          "line": 8055,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(classForm->relnamespace == oldNspOid)",
          "new_text": null,
          "old_line_content": "\tAssert(classForm->relnamespace == oldNspOid);",
          "new_line_content": "\t\t\t\t\t\t\t   Oid oldNspOid, Oid newNspOid,",
          "content_same": false
        },
        {
          "line": 8058,
          "old_api": "NameStr",
          "new_api": null,
          "old_text": "NameStr(classForm->relname)",
          "new_text": null,
          "old_line_content": "\tif (get_relname_relid(NameStr(classForm->relname),",
          "new_line_content": "\tHeapTuple\tclassTup;",
          "content_same": false
        },
        {
          "line": 8060,
          "old_api": "ereport",
          "new_api": null,
          "old_text": "ereport(ERROR,\n\t\t\t\t(errcode(ERRCODE_DUPLICATE_TABLE),\n\t\t\t\t errmsg(\"relation \\\"%s\\\" already exists in schema \\\"%s\\\"\",\n\t\t\t\t\t\tNameStr(classForm->relname),\n\t\t\t\t\t\tget_namespace_name(newNspOid))))",
          "new_text": null,
          "old_line_content": "\t\tereport(ERROR,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7550,
          "old_api": "simple_heap_update",
          "new_api": null,
          "old_text": "simple_heap_update(attrrel, &tuple->t_self, tuple)",
          "new_text": null,
          "old_line_content": "\t\t\tsimple_heap_update(attrrel, &tuple->t_self, tuple);",
          "new_line_content": "\t\t\tif (attribute->attnotnull && !childatt->attnotnull)",
          "content_same": false
        },
        {
          "line": 7556,
          "old_api": "ereport",
          "new_api": null,
          "old_text": "ereport(ERROR,\n\t\t\t\t\t(errcode(ERRCODE_DATATYPE_MISMATCH),\n\t\t\t\t\t errmsg(\"child table is missing column \\\"%s\\\"\",\n\t\t\t\t\t\t\tattributeName)))",
          "new_text": null,
          "old_line_content": "\t\t\tereport(ERROR,",
          "new_line_content": "\t\t\t/*",
          "content_same": false
        },
        {
          "line": 7557,
          "old_api": "errcode",
          "new_api": null,
          "old_text": "errcode(ERRCODE_DATATYPE_MISMATCH)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t(errcode(ERRCODE_DATATYPE_MISMATCH),",
          "new_line_content": "\t\t\t * OK, bump the child column's inheritance count.  (If we fail",
          "content_same": false
        },
        {
          "line": 7558,
          "old_api": "errmsg",
          "new_api": null,
          "old_text": "errmsg(\"child table is missing column \\\"%s\\\"\",\n\t\t\t\t\t\t\tattributeName)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t errmsg(\"child table is missing column \\\"%s\\\"\",",
          "new_line_content": "\t\t\t * later on, this change will just roll back.)",
          "content_same": false
        },
        {
          "line": 8070,
          "old_api": "CatalogUpdateIndexes",
          "new_api": null,
          "old_text": "CatalogUpdateIndexes(classRel, classTup)",
          "new_text": null,
          "old_line_content": "\tCatalogUpdateIndexes(classRel, classTup);",
          "new_line_content": "\t\t\t\t\t\t  newNspOid) != InvalidOid)",
          "content_same": false
        },
        {
          "line": 8076,
          "old_api": "elog",
          "new_api": null,
          "old_text": "elog(ERROR, \"failed to change schema dependency for relation \\\"%s\\\"\",\n\t\t\t NameStr(classForm->relname))",
          "new_text": null,
          "old_line_content": "\t\telog(ERROR, \"failed to change schema dependency for relation \\\"%s\\\"\",",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8077,
          "old_api": "NameStr",
          "new_api": null,
          "old_text": "NameStr(classForm->relname)",
          "new_text": null,
          "old_line_content": "\t\t\t NameStr(classForm->relname));",
          "new_line_content": "\t/* classTup is a copy, so OK to scribble on */",
          "content_same": false
        },
        {
          "line": 8079,
          "old_api": "heap_freetuple",
          "new_api": null,
          "old_text": "heap_freetuple(classTup)",
          "new_text": null,
          "old_line_content": "\theap_freetuple(classTup);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8095,
          "old_api": "RelationGetIndexList",
          "new_api": null,
          "old_text": "RelationGetIndexList(rel)",
          "new_text": null,
          "old_line_content": "\tindexList = RelationGetIndexList(rel);",
          "new_line_content": " *",
          "content_same": false
        },
        {
          "line": 8099,
          "old_api": "lfirst_oid",
          "new_api": null,
          "old_text": "lfirst_oid(l)",
          "new_text": null,
          "old_line_content": "\t\tOid\t\t\tindexOid = lfirst_oid(l);",
          "new_line_content": "static void",
          "content_same": false
        },
        {
          "line": 7592,
          "old_api": "heap_open",
          "new_api": null,
          "old_text": "heap_open(ConstraintRelationId, RowExclusiveLock)",
          "new_text": null,
          "old_line_content": "\tcatalog_relation = heap_open(ConstraintRelationId, RowExclusiveLock);",
          "new_line_content": " * a problem though. Even 100 constraints ought not be the end of the world.",
          "content_same": false
        },
        {
          "line": 7593,
          "old_api": "RelationGetDescr",
          "new_api": null,
          "old_text": "RelationGetDescr(catalog_relation)",
          "new_text": null,
          "old_line_content": "\ttuple_desc = RelationGetDescr(catalog_relation);",
          "new_line_content": " */",
          "content_same": false
        },
        {
          "line": 7596,
          "old_api": "ScanKeyInit",
          "new_api": null,
          "old_text": "ScanKeyInit(&parent_key,\n\t\t\t\tAnum_pg_constraint_conrelid,\n\t\t\t\tBTEqualStrategyNumber, F_OIDEQ,\n\t\t\t\tObjectIdGetDatum(RelationGetRelid(parent_rel)))",
          "new_text": null,
          "old_line_content": "\tScanKeyInit(&parent_key,",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 7599,
          "old_api": "RelationGetRelid",
          "new_api": null,
          "old_text": "RelationGetRelid(parent_rel)",
          "new_text": null,
          "old_line_content": "\t\t\t\tObjectIdGetDatum(RelationGetRelid(parent_rel)));",
          "new_line_content": "\tSysScanDesc parent_scan;",
          "content_same": false
        },
        {
          "line": 7600,
          "old_api": "systable_beginscan",
          "new_api": null,
          "old_text": "systable_beginscan(catalog_relation, ConstraintRelidIndexId,\n\t\t\t\t\t\t\t\t\t true, SnapshotNow, 1, &parent_key)",
          "new_text": null,
          "old_line_content": "\tparent_scan = systable_beginscan(catalog_relation, ConstraintRelidIndexId,",
          "new_line_content": "\tScanKeyData parent_key;",
          "content_same": false
        },
        {
          "line": 8111,
          "old_api": "list_free",
          "new_api": null,
          "old_text": "list_free(indexList)",
          "new_text": null,
          "old_line_content": "\tlist_free(indexList);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7605,
          "old_api": "GETSTRUCT",
          "new_api": null,
          "old_text": "GETSTRUCT(parent_tuple)",
          "new_text": null,
          "old_line_content": "\t\tForm_pg_constraint parent_con = (Form_pg_constraint) GETSTRUCT(parent_tuple);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7615,
          "old_api": "ScanKeyInit",
          "new_api": null,
          "old_text": "ScanKeyInit(&child_key,\n\t\t\t\t\tAnum_pg_constraint_conrelid,\n\t\t\t\t\tBTEqualStrategyNumber, F_OIDEQ,\n\t\t\t\t\tObjectIdGetDatum(RelationGetRelid(child_rel)))",
          "new_text": null,
          "old_line_content": "\t\tScanKeyInit(&child_key,",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 7618,
          "old_api": "RelationGetRelid",
          "new_api": null,
          "old_text": "RelationGetRelid(child_rel)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tObjectIdGetDatum(RelationGetRelid(child_rel)));",
          "new_line_content": "\t\tScanKeyData child_key;",
          "content_same": false
        },
        {
          "line": 7619,
          "old_api": "systable_beginscan",
          "new_api": null,
          "old_text": "systable_beginscan(catalog_relation, ConstraintRelidIndexId,\n\t\t\t\t\t\t\t\t\t\ttrue, SnapshotNow, 1, &child_key)",
          "new_text": null,
          "old_line_content": "\t\tchild_scan = systable_beginscan(catalog_relation, ConstraintRelidIndexId,",
          "new_line_content": "\t\tHeapTuple\tchild_tuple;",
          "content_same": false
        },
        {
          "line": 7622,
          "old_api": "systable_getnext",
          "new_api": null,
          "old_text": "systable_getnext(child_scan)",
          "new_text": null,
          "old_line_content": "\t\twhile (HeapTupleIsValid(child_tuple = systable_getnext(child_scan)))",
          "new_line_content": "\t\tif (parent_con->contype != CONSTRAINT_CHECK)",
          "content_same": false
        },
        {
          "line": 8134,
          "old_api": "heap_open",
          "new_api": null,
          "old_text": "heap_open(DependRelationId, AccessShareLock)",
          "new_text": null,
          "old_line_content": "\tdepRel = heap_open(DependRelationId, AccessShareLock);",
          "new_line_content": "\t\t\t\t   Oid oldNspOid, Oid newNspOid, const char *newNspName, LOCKMODE lockmode)",
          "content_same": false
        },
        {
          "line": 7624,
          "old_api": "GETSTRUCT",
          "new_api": null,
          "old_text": "GETSTRUCT(child_tuple)",
          "new_text": null,
          "old_line_content": "\t\t\tForm_pg_constraint child_con = (Form_pg_constraint) GETSTRUCT(child_tuple);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8136,
          "old_api": "ScanKeyInit",
          "new_api": null,
          "old_text": "ScanKeyInit(&key[0],\n\t\t\t\tAnum_pg_depend_refclassid,\n\t\t\t\tBTEqualStrategyNumber, F_OIDEQ,\n\t\t\t\tObjectIdGetDatum(RelationRelationId))",
          "new_text": null,
          "old_line_content": "\tScanKeyInit(&key[0],",
          "new_line_content": "\tRelation\tdepRel;",
          "content_same": false
        },
        {
          "line": 8139,
          "old_api": "ObjectIdGetDatum",
          "new_api": null,
          "old_text": "ObjectIdGetDatum(RelationRelationId)",
          "new_text": null,
          "old_line_content": "\t\t\t\tObjectIdGetDatum(RelationRelationId));",
          "new_line_content": "\tHeapTuple\ttup;",
          "content_same": false
        },
        {
          "line": 8140,
          "old_api": "ScanKeyInit",
          "new_api": null,
          "old_text": "ScanKeyInit(&key[1],\n\t\t\t\tAnum_pg_depend_refobjid,\n\t\t\t\tBTEqualStrategyNumber, F_OIDEQ,\n\t\t\t\tObjectIdGetDatum(RelationGetRelid(rel)))",
          "new_text": null,
          "old_line_content": "\tScanKeyInit(&key[1],",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7631,
          "old_api": "NameStr",
          "new_api": null,
          "old_text": "NameStr(child_con->conname)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t   NameStr(child_con->conname)) != 0)",
          "new_line_content": "\t\t\t\t\t\t\t\t\t\ttrue, SnapshotNow, 1, &child_key);",
          "content_same": false
        },
        {
          "line": 8143,
          "old_api": "RelationGetRelid",
          "new_api": null,
          "old_text": "RelationGetRelid(rel)",
          "new_text": null,
          "old_line_content": "\t\t\t\tObjectIdGetDatum(RelationGetRelid(rel)));",
          "new_line_content": "\t * table's columns (we don't care *which* column, exactly).",
          "content_same": false
        },
        {
          "line": 7634,
          "old_api": "constraints_equivalent",
          "new_api": null,
          "old_text": "constraints_equivalent(parent_tuple, child_tuple, tuple_desc)",
          "new_text": null,
          "old_line_content": "\t\t\tif (!constraints_equivalent(parent_tuple, child_tuple, tuple_desc))",
          "new_line_content": "\t\t{",
          "content_same": false
        },
        {
          "line": 8146,
          "old_api": "systable_beginscan",
          "new_api": null,
          "old_text": "systable_beginscan(depRel, DependReferenceIndexId, true,\n\t\t\t\t\t\t\t  SnapshotNow, 2, key)",
          "new_text": null,
          "old_line_content": "\tscan = systable_beginscan(depRel, DependReferenceIndexId, true,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7636,
          "old_api": "errcode",
          "new_api": null,
          "old_text": "errcode(ERRCODE_DATATYPE_MISMATCH)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t(errcode(ERRCODE_DATATYPE_MISMATCH),",
          "new_line_content": "\t\t\tHeapTuple\tchild_copy;",
          "content_same": false
        },
        {
          "line": 7637,
          "old_api": "errmsg",
          "new_api": null,
          "old_text": "errmsg(\"child table \\\"%s\\\" has different definition for check constraint \\\"%s\\\"\",\n\t\t\t\t\t\t\t\tRelationGetRelationName(child_rel),\n\t\t\t\t\t\t\t\tNameStr(parent_con->conname))",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t errmsg(\"child table \\\"%s\\\" has different definition for check constraint \\\"%s\\\"\",",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7638,
          "old_api": "RelationGetRelationName",
          "new_api": null,
          "old_text": "RelationGetRelationName(child_rel)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\t\tRelationGetRelationName(child_rel),",
          "new_line_content": "\t\t\tif (child_con->contype != CONSTRAINT_CHECK)",
          "content_same": false
        },
        {
          "line": 7639,
          "old_api": "NameStr",
          "new_api": null,
          "old_text": "NameStr(parent_con->conname)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\t\tNameStr(parent_con->conname))));",
          "new_line_content": "\t\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 8149,
          "old_api": "systable_getnext",
          "new_api": null,
          "old_text": "systable_getnext(scan)",
          "new_text": null,
          "old_line_content": "\twhile (HeapTupleIsValid(tup = systable_getnext(scan)))",
          "new_line_content": "\t\t\t\tBTEqualStrategyNumber, F_OIDEQ,",
          "content_same": false
        },
        {
          "line": 8165,
          "old_api": "RelationGetForm",
          "new_api": null,
          "old_text": "RelationGetForm(seqRel)",
          "new_text": null,
          "old_line_content": "\t\tif (RelationGetForm(seqRel)->relkind != RELKIND_SEQUENCE)",
          "new_line_content": "\t\t/* skip dependencies other than auto dependencies on columns */",
          "content_same": false
        },
        {
          "line": 8168,
          "old_api": "relation_close",
          "new_api": null,
          "old_text": "relation_close(seqRel, lockmode)",
          "new_text": null,
          "old_line_content": "\t\t\trelation_close(seqRel, lockmode);",
          "new_line_content": "\t\t\tdepForm->objsubid != 0 ||",
          "content_same": false
        },
        {
          "line": 7662,
          "old_api": "NameStr",
          "new_api": null,
          "old_text": "NameStr(parent_con->conname)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\tNameStr(parent_con->conname))));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 7665,
          "old_api": "systable_endscan",
          "new_api": null,
          "old_text": "systable_endscan(parent_scan)",
          "new_text": null,
          "old_line_content": "\tsystable_endscan(parent_scan);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 7666,
          "old_api": "heap_close",
          "new_api": null,
          "old_text": "heap_close(catalog_relation, RowExclusiveLock)",
          "new_text": null,
          "old_line_content": "\theap_close(catalog_relation, RowExclusiveLock);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 8181,
          "old_api": "RelationGetForm",
          "new_api": null,
          "old_text": "RelationGetForm(seqRel)",
          "new_text": null,
          "old_line_content": "\t\tAlterTypeNamespaceInternal(RelationGetForm(seqRel)->reltype,",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 8185,
          "old_api": "relation_close",
          "new_api": null,
          "old_text": "relation_close(seqRel, NoLock)",
          "new_text": null,
          "old_line_content": "\t\trelation_close(seqRel, NoLock);",
          "new_line_content": "\t\t\t\t\t\t\t\t\t   oldNspOid, newNspOid,",
          "content_same": false
        },
        {
          "line": 8188,
          "old_api": "systable_endscan",
          "new_api": null,
          "old_text": "systable_endscan(scan)",
          "new_text": null,
          "old_line_content": "\tsystable_endscan(scan);",
          "new_line_content": "\t\t/*",
          "content_same": false
        },
        {
          "line": 8190,
          "old_api": "relation_close",
          "new_api": null,
          "old_text": "relation_close(depRel, AccessShareLock)",
          "new_text": null,
          "old_line_content": "\trelation_close(depRel, AccessShareLock);",
          "new_line_content": "\t\t * them to the new namespace, too.",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 80,
      "total_additions": 213,
      "total_deletions": 211,
      "total_api_changes": 504
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 16,
        "api_related_lines": 504,
        "non_api_lines": 13,
        "non_api_line_numbers": [
          7233,
          7234,
          7236,
          7237,
          7238,
          7239,
          7240,
          7241,
          7242,
          11,
          7244,
          7276,
          7246
        ]
      }
    },
    "api_calls_before": 2010,
    "api_calls_after": 2012,
    "diff_info": {
      "added_lines": 14,
      "removed_lines": 3,
      "total_diff_lines": 46
    }
  }
}
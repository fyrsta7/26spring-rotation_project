{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/postgres/modified_file/1be203519ac4da238bf6dfe8f7015d5780723e0f",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/postgres/modified_file/1be203519ac4da238bf6dfe8f7015d5780723e0f/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/postgres/modified_file/1be203519ac4da238bf6dfe8f7015d5780723e0f/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/postgres/modified_file/1be203519ac4da238bf6dfe8f7015d5780723e0f/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 2090,
          "old_api": "LockBufHdr",
          "new_api": "BufferIsPinned",
          "old_text": "LockBufHdr(bufHdr)",
          "new_text": "BufferIsPinned(buffer)",
          "old_line_content": "\tLockBufHdr(bufHdr);",
          "new_line_content": "\tAssert(BufferIsPinned(buffer));",
          "content_same": false
        },
        {
          "line": 2092,
          "old_api": "UnlockBufHdr",
          "new_api": "LockBufHdr",
          "old_text": "UnlockBufHdr(bufHdr)",
          "new_text": "LockBufHdr(bufHdr)",
          "old_line_content": "\tUnlockBufHdr(bufHdr);",
          "new_line_content": "\tLockBufHdr(bufHdr);",
          "content_same": false
        },
        {
          "line": 2166,
          "old_api": "UnlockBufHdr",
          "new_api": "InvalidateBuffer",
          "old_text": "UnlockBufHdr(bufHdr)",
          "new_text": "InvalidateBuffer(bufHdr)",
          "old_line_content": "\t\t\tUnlockBufHdr(bufHdr);",
          "new_line_content": "\t\t\tInvalidateBuffer(bufHdr);\t/* releases spinlock */",
          "content_same": false
        },
        {
          "line": 2262,
          "old_api": "InvalidateBuffer",
          "new_api": "LockBufHdr",
          "old_text": "InvalidateBuffer(bufHdr)",
          "new_text": "LockBufHdr(bufHdr)",
          "old_line_content": "\t\t\tInvalidateBuffer(bufHdr);\t/* releases spinlock */",
          "new_line_content": "\t\tLockBufHdr(bufHdr);",
          "content_same": false
        },
        {
          "line": 2264,
          "old_api": "UnlockBufHdr",
          "new_api": "InvalidateBuffer",
          "old_text": "UnlockBufHdr(bufHdr)",
          "new_text": "InvalidateBuffer(bufHdr)",
          "old_line_content": "\t\t\tUnlockBufHdr(bufHdr);",
          "new_line_content": "\t\t\tInvalidateBuffer(bufHdr);\t/* releases spinlock */",
          "content_same": false
        },
        {
          "line": 2304,
          "old_api": "InvalidateBuffer",
          "new_api": "LockBufHdr",
          "old_text": "InvalidateBuffer(bufHdr)",
          "new_text": "LockBufHdr(bufHdr)",
          "old_line_content": "\t\t\tInvalidateBuffer(bufHdr);\t/* releases spinlock */",
          "new_line_content": "\t\tLockBufHdr(bufHdr);",
          "content_same": false
        },
        {
          "line": 2306,
          "old_api": "UnlockBufHdr",
          "new_api": "InvalidateBuffer",
          "old_text": "UnlockBufHdr(bufHdr)",
          "new_text": "InvalidateBuffer(bufHdr)",
          "old_line_content": "\t\t\tUnlockBufHdr(bufHdr);",
          "new_line_content": "\t\t\tInvalidateBuffer(bufHdr);\t/* releases spinlock */",
          "content_same": false
        },
        {
          "line": 2390,
          "old_api": "RelationUsesLocalBuffers",
          "new_api": "RelationOpenSmgr",
          "old_text": "RelationUsesLocalBuffers(rel)",
          "new_text": "RelationOpenSmgr(rel)",
          "old_line_content": "\tif (RelationUsesLocalBuffers(rel))",
          "new_line_content": "\tRelationOpenSmgr(rel);",
          "content_same": false
        },
        {
          "line": 2411,
          "old_api": "smgrwrite",
          "new_api": "PageSetChecksumInplace",
          "old_text": "smgrwrite(rel->rd_smgr,\n\t\t\t\t\t\t  bufHdr->tag.forkNum,\n\t\t\t\t\t\t  bufHdr->tag.blockNum,\n\t\t\t\t\t\t  localpage,\n\t\t\t\t\t\t  false)",
          "new_text": "PageSetChecksumInplace(localpage, bufHdr->tag.blockNum)",
          "old_line_content": "\t\t\t\tsmgrwrite(rel->rd_smgr,",
          "new_line_content": "\t\t\t\tPageSetChecksumInplace(localpage, bufHdr->tag.blockNum);",
          "content_same": false
        },
        {
          "line": 2447,
          "old_api": "FlushBuffer",
          "new_api": "PinBuffer_Locked",
          "old_text": "FlushBuffer(bufHdr, rel->rd_smgr)",
          "new_text": "PinBuffer_Locked(bufHdr)",
          "old_line_content": "\t\t\tFlushBuffer(bufHdr, rel->rd_smgr);",
          "new_line_content": "\t\t\tPinBuffer_Locked(bufHdr);",
          "content_same": false
        },
        {
          "line": 2448,
          "old_api": "LWLockRelease",
          "new_api": "LWLockAcquire",
          "old_text": "LWLockRelease(bufHdr->content_lock)",
          "new_text": "LWLockAcquire(bufHdr->content_lock, LW_SHARED)",
          "old_line_content": "\t\t\tLWLockRelease(bufHdr->content_lock);",
          "new_line_content": "\t\t\tLWLockAcquire(bufHdr->content_lock, LW_SHARED);",
          "content_same": false
        },
        {
          "line": 2449,
          "old_api": "UnpinBuffer",
          "new_api": "FlushBuffer",
          "old_text": "UnpinBuffer(bufHdr, true)",
          "new_text": "FlushBuffer(bufHdr, rel->rd_smgr)",
          "old_line_content": "\t\t\tUnpinBuffer(bufHdr, true);",
          "new_line_content": "\t\t\tFlushBuffer(bufHdr, rel->rd_smgr);",
          "content_same": false
        },
        {
          "line": 2497,
          "old_api": "FlushBuffer",
          "new_api": "PinBuffer_Locked",
          "old_text": "FlushBuffer(bufHdr, NULL)",
          "new_text": "PinBuffer_Locked(bufHdr)",
          "old_line_content": "\t\t\tFlushBuffer(bufHdr, NULL);",
          "new_line_content": "\t\t\tPinBuffer_Locked(bufHdr);",
          "content_same": false
        },
        {
          "line": 2498,
          "old_api": "LWLockRelease",
          "new_api": "LWLockAcquire",
          "old_text": "LWLockRelease(bufHdr->content_lock)",
          "new_text": "LWLockAcquire(bufHdr->content_lock, LW_SHARED)",
          "old_line_content": "\t\t\tLWLockRelease(bufHdr->content_lock);",
          "new_line_content": "\t\t\tLWLockAcquire(bufHdr->content_lock, LW_SHARED);",
          "content_same": false
        },
        {
          "line": 2499,
          "old_api": "UnpinBuffer",
          "new_api": "FlushBuffer",
          "old_text": "UnpinBuffer(bufHdr, true)",
          "new_text": "FlushBuffer(bufHdr, NULL)",
          "old_line_content": "\t\t\tUnpinBuffer(bufHdr, true);",
          "new_line_content": "\t\t\tFlushBuffer(bufHdr, NULL);",
          "content_same": false
        },
        {
          "line": 2517,
          "old_api": "ResourceOwnerForgetBuffer",
          "new_api": "elog",
          "old_text": "ResourceOwnerForgetBuffer(CurrentResourceOwner, buffer)",
          "new_text": "elog(ERROR, \"bad buffer ID: %d\", buffer)",
          "old_line_content": "\tResourceOwnerForgetBuffer(CurrentResourceOwner, buffer);",
          "new_line_content": "\t\telog(ERROR, \"bad buffer ID: %d\", buffer);",
          "content_same": false
        },
        {
          "line": 2519,
          "old_api": "BufferIsLocal",
          "new_api": "ResourceOwnerForgetBuffer",
          "old_text": "BufferIsLocal(buffer)",
          "new_text": "ResourceOwnerForgetBuffer(CurrentResourceOwner, buffer)",
          "old_line_content": "\tif (BufferIsLocal(buffer))",
          "new_line_content": "\tResourceOwnerForgetBuffer(CurrentResourceOwner, buffer);",
          "content_same": false
        },
        {
          "line": 2521,
          "old_api": "Assert",
          "new_api": "BufferIsLocal",
          "old_text": "Assert(LocalRefCount[-buffer - 1] > 0)",
          "new_text": "BufferIsLocal(buffer)",
          "old_line_content": "\t\tAssert(LocalRefCount[-buffer - 1] > 0);",
          "new_line_content": "\tif (BufferIsLocal(buffer))",
          "content_same": false
        },
        {
          "line": 2561,
          "old_api": "ResourceOwnerRememberBuffer",
          "new_api": "BufferIsPinned",
          "old_text": "ResourceOwnerRememberBuffer(CurrentResourceOwner, buffer)",
          "new_text": "BufferIsPinned(buffer)",
          "old_line_content": "\tResourceOwnerRememberBuffer(CurrentResourceOwner, buffer);",
          "new_line_content": "\tAssert(BufferIsPinned(buffer));",
          "content_same": false
        },
        {
          "line": 2562,
          "old_api": "BufferIsLocal",
          "new_api": "ResourceOwnerEnlargeBuffers",
          "old_text": "BufferIsLocal(buffer)",
          "new_text": "ResourceOwnerEnlargeBuffers(CurrentResourceOwner)",
          "old_line_content": "\tif (BufferIsLocal(buffer))",
          "new_line_content": "\tResourceOwnerEnlargeBuffers(CurrentResourceOwner);",
          "content_same": false
        },
        {
          "line": 2588,
          "old_api": "BufferIsValid",
          "new_api": "BufferGetPage",
          "old_text": "BufferIsValid(buffer)",
          "new_text": "BufferGetPage(buffer)",
          "old_line_content": "\tif (!BufferIsValid(buffer))",
          "new_line_content": "\tPage\tpage = BufferGetPage(buffer);",
          "content_same": false
        },
        {
          "line": 2591,
          "old_api": "BufferIsLocal",
          "new_api": "elog",
          "old_text": "BufferIsLocal(buffer)",
          "new_text": "elog(ERROR, \"bad buffer ID: %d\", buffer)",
          "old_line_content": "\tif (BufferIsLocal(buffer))",
          "new_line_content": "\t\telog(ERROR, \"bad buffer ID: %d\", buffer);",
          "content_same": false
        },
        {
          "line": 2593,
          "old_api": "MarkLocalBufferDirty",
          "new_api": "BufferIsLocal",
          "old_text": "MarkLocalBufferDirty(buffer)",
          "new_text": "BufferIsLocal(buffer)",
          "old_line_content": "\t\tMarkLocalBufferDirty(buffer);",
          "new_line_content": "\tif (BufferIsLocal(buffer))",
          "content_same": false
        },
        {
          "line": 2601,
          "old_api": "LWLockHeldByMe",
          "new_api": "Assert",
          "old_text": "LWLockHeldByMe(bufHdr->content_lock)",
          "new_text": "Assert(PrivateRefCount[buffer - 1] > 0)",
          "old_line_content": "\tAssert(LWLockHeldByMe(bufHdr->content_lock));",
          "new_line_content": "\tAssert(PrivateRefCount[buffer - 1] > 0);",
          "content_same": false
        },
        {
          "line": 2757,
          "old_api": "LWLockAcquire",
          "new_api": "LWLockRelease",
          "old_text": "LWLockAcquire(buf->content_lock, LW_SHARED)",
          "new_text": "LWLockRelease(buf->content_lock)",
          "old_line_content": "\t\tLWLockAcquire(buf->content_lock, LW_SHARED);",
          "new_line_content": "\t\tLWLockRelease(buf->content_lock);",
          "content_same": false
        },
        {
          "line": 2761,
          "old_api": "elog",
          "new_api": "LWLockAcquire",
          "old_text": "elog(ERROR, \"unrecognized buffer lock mode: %d\", mode)",
          "new_text": "LWLockAcquire(buf->content_lock, LW_EXCLUSIVE)",
          "old_line_content": "\t\telog(ERROR, \"unrecognized buffer lock mode: %d\", mode);",
          "new_line_content": "\t\tLWLockAcquire(buf->content_lock, LW_EXCLUSIVE);",
          "content_same": false
        },
        {
          "line": 2807,
          "old_api": "BufferIsLocal",
          "new_api": "Assert",
          "old_text": "BufferIsLocal(buffer)",
          "new_text": "Assert(PinCountWaitBuf == NULL)",
          "old_line_content": "\tif (BufferIsLocal(buffer))",
          "new_line_content": "\tAssert(PinCountWaitBuf == NULL);",
          "content_same": false
        },
        {
          "line": 2829,
          "old_api": "Assert",
          "new_api": "LockBuffer",
          "old_text": "Assert(bufHdr->refcount > 0)",
          "new_text": "LockBuffer(buffer, BUFFER_LOCK_EXCLUSIVE)",
          "old_line_content": "\t\tAssert(bufHdr->refcount > 0);",
          "new_line_content": "\t\tLockBuffer(buffer, BUFFER_LOCK_EXCLUSIVE);",
          "content_same": false
        },
        {
          "line": 2841,
          "old_api": "elog",
          "new_api": "UnlockBufHdr",
          "old_text": "elog(ERROR, \"multiple backends attempting to wait for pincount 1\")",
          "new_text": "UnlockBufHdr(bufHdr)",
          "old_line_content": "\t\t\telog(ERROR, \"multiple backends attempting to wait for pincount 1\");",
          "new_line_content": "\t\t\tUnlockBufHdr(bufHdr);",
          "content_same": false
        },
        {
          "line": 2855,
          "old_api": "ResolveRecoveryConflictWithBufferPin",
          "new_api": "SetStartupBufferPinWaitBufId",
          "old_text": "ResolveRecoveryConflictWithBufferPin()",
          "new_text": "SetStartupBufferPinWaitBufId(buffer - 1)",
          "old_line_content": "\t\t\tResolveRecoveryConflictWithBufferPin();",
          "new_line_content": "\t\t\tSetStartupBufferPinWaitBufId(buffer - 1);",
          "content_same": false
        },
        {
          "line": 2857,
          "old_api": "SetStartupBufferPinWaitBufId",
          "new_api": "ResolveRecoveryConflictWithBufferPin",
          "old_text": "SetStartupBufferPinWaitBufId(-1)",
          "new_text": "ResolveRecoveryConflictWithBufferPin()",
          "old_line_content": "\t\t\tSetStartupBufferPinWaitBufId(-1);",
          "new_line_content": "\t\t\tResolveRecoveryConflictWithBufferPin();",
          "content_same": false
        },
        {
          "line": 2904,
          "old_api": "BufferIsLocal",
          "new_api": "BufferIsValid",
          "old_text": "BufferIsLocal(buffer)",
          "new_text": "BufferIsValid(buffer)",
          "old_line_content": "\tif (BufferIsLocal(buffer))",
          "new_line_content": "\tAssert(BufferIsValid(buffer));",
          "content_same": false
        },
        {
          "line": 2973,
          "old_api": "UnlockBufHdr",
          "new_api": "LockBufHdr",
          "old_text": "UnlockBufHdr(buf)",
          "new_text": "LockBufHdr(buf)",
          "old_line_content": "\t\tUnlockBufHdr(buf);",
          "new_line_content": "\t\tLockBufHdr(buf);",
          "content_same": false
        },
        {
          "line": 3012,
          "old_api": "LockBufHdr",
          "new_api": "LWLockAcquire",
          "old_text": "LockBufHdr(buf)",
          "new_text": "LWLockAcquire(buf->io_in_progress_lock, LW_EXCLUSIVE)",
          "old_line_content": "\t\tLockBufHdr(buf);",
          "new_line_content": "\t\tLWLockAcquire(buf->io_in_progress_lock, LW_EXCLUSIVE);",
          "content_same": false
        },
        {
          "line": 3025,
          "old_api": "WaitIO",
          "new_api": "UnlockBufHdr",
          "old_text": "WaitIO(buf)",
          "new_text": "UnlockBufHdr(buf)",
          "old_line_content": "\t\tWaitIO(buf);",
          "new_line_content": "\t\tUnlockBufHdr(buf);",
          "content_same": false
        },
        {
          "line": 3071,
          "old_api": "LockBufHdr",
          "new_api": "Assert",
          "old_text": "LockBufHdr(buf)",
          "new_text": "Assert(buf == InProgressBuf)",
          "old_line_content": "\tLockBufHdr(buf);",
          "new_line_content": "\tAssert(buf == InProgressBuf);",
          "content_same": false
        },
        {
          "line": 3073,
          "old_api": "Assert",
          "new_api": "LockBufHdr",
          "old_text": "Assert(buf->flags & BM_IO_IN_PROGRESS)",
          "new_text": "LockBufHdr(buf)",
          "old_line_content": "\tAssert(buf->flags & BM_IO_IN_PROGRESS);",
          "new_line_content": "\tLockBufHdr(buf);",
          "content_same": false
        },
        {
          "line": 3110,
          "old_api": "LockBufHdr",
          "new_api": "LWLockAcquire",
          "old_text": "LockBufHdr(buf)",
          "new_text": "LWLockAcquire(buf->io_in_progress_lock, LW_EXCLUSIVE)",
          "old_line_content": "\t\tLockBufHdr(buf);",
          "new_line_content": "\t\tLWLockAcquire(buf->io_in_progress_lock, LW_EXCLUSIVE);",
          "content_same": false
        },
        {
          "line": 3134,
          "old_api": "errcode",
          "new_api": "relpathperm",
          "old_text": "errcode(ERRCODE_IO_ERROR)",
          "new_text": "relpathperm(buf->tag.rnode, buf->tag.forkNum)",
          "old_line_content": "\t\t\t\t\t\t(errcode(ERRCODE_IO_ERROR),",
          "new_line_content": "\t\t\t\tpath = relpathperm(buf->tag.rnode, buf->tag.forkNum);",
          "content_same": false
        },
        {
          "line": 3135,
          "old_api": "errmsg",
          "new_api": "ereport",
          "old_text": "errmsg(\"could not write block %u of %s\",\n\t\t\t\t\t\t\t\tbuf->tag.blockNum, path)",
          "new_text": "ereport(WARNING,\n\t\t\t\t\t\t(errcode(ERRCODE_IO_ERROR),\n\t\t\t\t\t\t errmsg(\"could not write block %u of %s\",\n\t\t\t\t\t\t\t\tbuf->tag.blockNum, path),\n\t\t\t\t\t\t errdetail(\"Multiple failures --- write error might be permanent.\")))",
          "old_line_content": "\t\t\t\t\t\t errmsg(\"could not write block %u of %s\",",
          "new_line_content": "\t\t\t\tereport(WARNING,",
          "content_same": false
        },
        {
          "line": 3137,
          "old_api": "errdetail",
          "new_api": "errmsg",
          "old_text": "errdetail(\"Multiple failures --- write error might be permanent.\")",
          "new_text": "errmsg(\"could not write block %u of %s\",\n\t\t\t\t\t\t\t\tbuf->tag.blockNum, path)",
          "old_line_content": "\t\t\t\t\t\t errdetail(\"Multiple failures --- write error might be permanent.\")));",
          "new_line_content": "\t\t\t\t\t\t errmsg(\"could not write block %u of %s\",",
          "content_same": false
        },
        {
          "line": 3158,
          "old_api": "errcontext",
          "new_api": "relpathperm",
          "old_text": "errcontext(\"writing block %u of relation %s\",\n\t\t\t\t   bufHdr->tag.blockNum, path)",
          "new_text": "relpathperm(bufHdr->tag.rnode, bufHdr->tag.forkNum)",
          "old_line_content": "\t\terrcontext(\"writing block %u of relation %s\",",
          "new_line_content": "\t\tchar\t   *path = relpathperm(bufHdr->tag.rnode, bufHdr->tag.forkNum);",
          "content_same": false
        },
        {
          "line": 3160,
          "old_api": "pfree",
          "new_api": "errcontext",
          "old_text": "pfree(path)",
          "new_text": "errcontext(\"writing block %u of relation %s\",\n\t\t\t\t   bufHdr->tag.blockNum, path)",
          "old_line_content": "\t\tpfree(path);",
          "new_line_content": "\t\terrcontext(\"writing block %u of relation %s\",",
          "content_same": false
        },
        {
          "line": 3179,
          "old_api": "pfree",
          "new_api": "errcontext",
          "old_text": "pfree(path)",
          "new_text": "errcontext(\"writing block %u of relation %s\",\n\t\t\t\t   bufHdr->tag.blockNum, path)",
          "old_line_content": "\t\tpfree(path);",
          "new_line_content": "\t\terrcontext(\"writing block %u of relation %s\",",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 2563,
          "old_api": null,
          "new_api": "ResourceOwnerRememberBuffer",
          "old_text": null,
          "new_text": "ResourceOwnerRememberBuffer(CurrentResourceOwner, buffer)",
          "old_line_content": "\t\tLocalRefCount[-buffer - 1]++;",
          "new_line_content": "\tResourceOwnerRememberBuffer(CurrentResourceOwner, buffer);",
          "content_same": false
        },
        {
          "line": 2564,
          "old_api": null,
          "new_api": "BufferIsLocal",
          "old_text": null,
          "new_text": "BufferIsLocal(buffer)",
          "old_line_content": "\telse",
          "new_line_content": "\tif (BufferIsLocal(buffer))",
          "content_same": false
        },
        {
          "line": 3075,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(buf->flags & BM_IO_IN_PROGRESS)",
          "old_line_content": "\tif (clear_dirty && !(buf->flags & BM_JUST_DIRTIED))",
          "new_line_content": "\tAssert(buf->flags & BM_IO_IN_PROGRESS);",
          "content_same": false
        },
        {
          "line": 3081,
          "old_api": null,
          "new_api": "UnlockBufHdr",
          "old_text": null,
          "new_text": "UnlockBufHdr(buf)",
          "old_line_content": "\tInProgressBuf = NULL;",
          "new_line_content": "\tUnlockBufHdr(buf);",
          "content_same": false
        },
        {
          "line": 3085,
          "old_api": null,
          "new_api": "LWLockRelease",
          "old_text": null,
          "new_text": "LWLockRelease(buf->io_in_progress_lock)",
          "old_line_content": "",
          "new_line_content": "\tLWLockRelease(buf->io_in_progress_lock);",
          "content_same": false
        },
        {
          "line": 2590,
          "old_api": null,
          "new_api": "BufferIsValid",
          "old_text": null,
          "new_text": "BufferIsValid(buffer)",
          "old_line_content": "",
          "new_line_content": "\tif (!BufferIsValid(buffer))",
          "content_same": false
        },
        {
          "line": 2595,
          "old_api": null,
          "new_api": "MarkLocalBufferDirty",
          "old_text": null,
          "new_text": "MarkLocalBufferDirty(buffer)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tMarkLocalBufferDirty(buffer);",
          "content_same": false
        },
        {
          "line": 2085,
          "old_api": null,
          "new_api": "BufferIsLocal",
          "old_text": null,
          "new_text": "BufferIsLocal(buffer)",
          "old_line_content": "",
          "new_line_content": "\tif (!DataChecksumsEnabled() || BufferIsLocal(buffer))",
          "content_same": false
        },
        {
          "line": 2086,
          "old_api": null,
          "new_api": "PageGetLSN",
          "old_text": null,
          "new_text": "PageGetLSN(page)",
          "old_line_content": "\t/* Make sure we've got a real buffer, and that we hold a pin on it. */",
          "new_line_content": "\t\treturn PageGetLSN(page);",
          "content_same": false
        },
        {
          "line": 3112,
          "old_api": null,
          "new_api": "LockBufHdr",
          "old_text": null,
          "new_text": "LockBufHdr(buf)",
          "old_line_content": "\t\tif (IsForInput)",
          "new_line_content": "\t\tLockBufHdr(buf);",
          "content_same": false
        },
        {
          "line": 2089,
          "old_api": null,
          "new_api": "BufferIsValid",
          "old_text": null,
          "new_text": "BufferIsValid(buffer)",
          "old_line_content": "",
          "new_line_content": "\tAssert(BufferIsValid(buffer));",
          "content_same": false
        },
        {
          "line": 3113,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(buf->flags & BM_IO_IN_PROGRESS)",
          "old_line_content": "\t\t{",
          "new_line_content": "\t\tAssert(buf->flags & BM_IO_IN_PROGRESS);",
          "content_same": false
        },
        {
          "line": 2603,
          "old_api": null,
          "new_api": "LWLockHeldByMe",
          "old_text": null,
          "new_text": "LWLockHeldByMe(bufHdr->content_lock)",
          "old_line_content": "\t/*",
          "new_line_content": "\tAssert(LWLockHeldByMe(bufHdr->content_lock));",
          "content_same": false
        },
        {
          "line": 2093,
          "old_api": null,
          "new_api": "PageGetLSN",
          "old_text": null,
          "new_text": "PageGetLSN(page)",
          "old_line_content": "",
          "new_line_content": "\tlsn = PageGetLSN(page);",
          "content_same": false
        },
        {
          "line": 2094,
          "old_api": null,
          "new_api": "UnlockBufHdr",
          "old_text": null,
          "new_text": "UnlockBufHdr(bufHdr)",
          "old_line_content": "\treturn lsn;",
          "new_line_content": "\tUnlockBufHdr(bufHdr);",
          "content_same": false
        },
        {
          "line": 3118,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(!(buf->flags & BM_VALID))",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tAssert(!(buf->flags & BM_VALID));",
          "content_same": false
        },
        {
          "line": 3119,
          "old_api": null,
          "new_api": "UnlockBufHdr",
          "old_text": null,
          "new_text": "UnlockBufHdr(buf)",
          "old_line_content": "\t\telse",
          "new_line_content": "\t\t\tUnlockBufHdr(buf);",
          "content_same": false
        },
        {
          "line": 3126,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(sv_flags & BM_DIRTY)",
          "old_line_content": "\t\t\t/* Issue notice if this is not the first failure... */",
          "new_line_content": "\t\t\tAssert(sv_flags & BM_DIRTY);",
          "content_same": false
        },
        {
          "line": 3127,
          "old_api": null,
          "new_api": "UnlockBufHdr",
          "old_text": null,
          "new_text": "UnlockBufHdr(buf)",
          "old_line_content": "\t\t\tif (sv_flags & BM_IO_ERROR)",
          "new_line_content": "\t\t\tUnlockBufHdr(buf);",
          "content_same": false
        },
        {
          "line": 3136,
          "old_api": null,
          "new_api": "errcode",
          "old_text": null,
          "new_text": "errcode(ERRCODE_IO_ERROR)",
          "old_line_content": "\t\t\t\t\t\t\t\tbuf->tag.blockNum, path),",
          "new_line_content": "\t\t\t\t\t\t(errcode(ERRCODE_IO_ERROR),",
          "content_same": false
        },
        {
          "line": 3139,
          "old_api": null,
          "new_api": "errdetail",
          "old_text": null,
          "new_text": "errdetail(\"Multiple failures --- write error might be permanent.\")",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\t\t\t\t errdetail(\"Multiple failures --- write error might be permanent.\")));",
          "content_same": false
        },
        {
          "line": 3140,
          "old_api": null,
          "new_api": "pfree",
          "old_text": null,
          "new_text": "pfree(path)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\t\tpfree(path);",
          "content_same": false
        },
        {
          "line": 3143,
          "old_api": null,
          "new_api": "TerminateBufferIO",
          "old_text": null,
          "new_text": "TerminateBufferIO(buf, false, BM_IO_ERROR)",
          "old_line_content": "}",
          "new_line_content": "\t\tTerminateBufferIO(buf, false, BM_IO_ERROR);",
          "content_same": false
        },
        {
          "line": 2634,
          "old_api": null,
          "new_api": "DataChecksumsEnabled",
          "old_text": null,
          "new_text": "DataChecksumsEnabled()",
          "old_line_content": "\t\t\t/*",
          "new_line_content": "\t\tif (DataChecksumsEnabled() && (bufHdr->flags & BM_PERMANENT))",
          "content_same": false
        },
        {
          "line": 2643,
          "old_api": null,
          "new_api": "RecoveryInProgress",
          "old_text": null,
          "new_text": "RecoveryInProgress()",
          "old_line_content": "",
          "new_line_content": "\t\t\tif (RecoveryInProgress())",
          "content_same": false
        },
        {
          "line": 2132,
          "old_api": null,
          "new_api": "RelFileNodeBackendIsTemp",
          "old_text": null,
          "new_text": "RelFileNodeBackendIsTemp(rnode)",
          "old_line_content": "\t\tif (rnode.backend == MyBackendId)",
          "new_line_content": "\tif (RelFileNodeBackendIsTemp(rnode))",
          "content_same": false
        },
        {
          "line": 2135,
          "old_api": null,
          "new_api": "DropRelFileNodeLocalBuffers",
          "old_text": null,
          "new_text": "DropRelFileNodeLocalBuffers(rnode.node, forkNum, firstDelBlock)",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\tDropRelFileNodeLocalBuffers(rnode.node, forkNum, firstDelBlock);",
          "content_same": false
        },
        {
          "line": 3162,
          "old_api": null,
          "new_api": "pfree",
          "old_text": null,
          "new_text": "pfree(path)",
          "old_line_content": "}",
          "new_line_content": "\t\tpfree(path);",
          "content_same": false
        },
        {
          "line": 3176,
          "old_api": null,
          "new_api": "relpathbackend",
          "old_text": null,
          "new_text": "relpathbackend(bufHdr->tag.rnode, MyBackendId,\n\t\t\t\t\t\t\t\t\t\t  bufHdr->tag.forkNum)",
          "old_line_content": "",
          "new_line_content": "\t\tchar\t   *path = relpathbackend(bufHdr->tag.rnode, MyBackendId,",
          "content_same": false
        },
        {
          "line": 3181,
          "old_api": null,
          "new_api": "pfree",
          "old_text": null,
          "new_text": "pfree(path)",
          "old_line_content": "}",
          "new_line_content": "\t\tpfree(path);",
          "content_same": false
        },
        {
          "line": 2670,
          "old_api": null,
          "new_api": "XLogSaveBufferForHint",
          "old_text": null,
          "new_text": "XLogSaveBufferForHint(buffer)",
          "old_line_content": "",
          "new_line_content": "\t\t\tlsn = XLogSaveBufferForHint(buffer);",
          "content_same": false
        },
        {
          "line": 2159,
          "old_api": null,
          "new_api": "RelFileNodeEquals",
          "old_text": null,
          "new_text": "RelFileNodeEquals(bufHdr->tag.rnode, rnode.node)",
          "old_line_content": "",
          "new_line_content": "\t\tif (!RelFileNodeEquals(bufHdr->tag.rnode, rnode.node))",
          "content_same": false
        },
        {
          "line": 2673,
          "old_api": null,
          "new_api": "LockBufHdr",
          "old_text": null,
          "new_text": "LockBufHdr(bufHdr)",
          "old_line_content": "\t\tif (!(bufHdr->flags & BM_DIRTY))",
          "new_line_content": "\t\tLockBufHdr(bufHdr);",
          "content_same": false
        },
        {
          "line": 2162,
          "old_api": null,
          "new_api": "LockBufHdr",
          "old_text": null,
          "new_text": "LockBufHdr(bufHdr)",
          "old_line_content": "\t\t\tbufHdr->tag.forkNum == forkNum &&",
          "new_line_content": "\t\tLockBufHdr(bufHdr);",
          "content_same": false
        },
        {
          "line": 2163,
          "old_api": null,
          "new_api": "RelFileNodeEquals",
          "old_text": null,
          "new_text": "RelFileNodeEquals(bufHdr->tag.rnode, rnode.node)",
          "old_line_content": "\t\t\tbufHdr->tag.blockNum >= firstDelBlock)",
          "new_line_content": "\t\tif (RelFileNodeEquals(bufHdr->tag.rnode, rnode.node) &&",
          "content_same": false
        },
        {
          "line": 2674,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(bufHdr->refcount > 0)",
          "old_line_content": "\t\t{",
          "new_line_content": "\t\tAssert(bufHdr->refcount > 0);",
          "content_same": false
        },
        {
          "line": 2168,
          "old_api": null,
          "new_api": "UnlockBufHdr",
          "old_text": null,
          "new_text": "UnlockBufHdr(bufHdr)",
          "old_line_content": "}",
          "new_line_content": "\t\t\tUnlockBufHdr(bufHdr);",
          "content_same": false
        },
        {
          "line": 2692,
          "old_api": null,
          "new_api": "XLogRecPtrIsInvalid",
          "old_text": null,
          "new_text": "XLogRecPtrIsInvalid(lsn)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tif (!XLogRecPtrIsInvalid(lsn))",
          "content_same": false
        },
        {
          "line": 2693,
          "old_api": null,
          "new_api": "PageSetLSN",
          "old_text": null,
          "new_text": "PageSetLSN(page, lsn)",
          "old_line_content": "\t\tbufHdr->flags |= (BM_DIRTY | BM_JUST_DIRTIED);",
          "new_line_content": "\t\t\t\tPageSetLSN(page, lsn);",
          "content_same": false
        },
        {
          "line": 2696,
          "old_api": null,
          "new_api": "UnlockBufHdr",
          "old_text": null,
          "new_text": "UnlockBufHdr(bufHdr)",
          "old_line_content": "\t\tif (delayChkpt)",
          "new_line_content": "\t\tUnlockBufHdr(bufHdr);",
          "content_same": false
        },
        {
          "line": 2192,
          "old_api": null,
          "new_api": "palloc",
          "old_text": null,
          "new_text": "palloc(sizeof(RelFileNode) * nnodes)",
          "old_line_content": "\t/* If it's a local relation, it's localbuf.c's problem. */",
          "new_line_content": "\tnodes = palloc(sizeof(RelFileNode) * nnodes); /* non-local relations */",
          "content_same": false
        },
        {
          "line": 2197,
          "old_api": null,
          "new_api": "RelFileNodeBackendIsTemp",
          "old_text": null,
          "new_text": "RelFileNodeBackendIsTemp(rnodes[i])",
          "old_line_content": "\t\t\tif (rnodes[i].backend == MyBackendId)",
          "new_line_content": "\t\tif (RelFileNodeBackendIsTemp(rnodes[i]))",
          "content_same": false
        },
        {
          "line": 2200,
          "old_api": null,
          "new_api": "DropRelFileNodeAllLocalBuffers",
          "old_text": null,
          "new_text": "DropRelFileNodeAllLocalBuffers(rnodes[i].node)",
          "old_line_content": "\t\telse",
          "new_line_content": "\t\t\t\tDropRelFileNodeAllLocalBuffers(rnodes[i].node);",
          "content_same": false
        },
        {
          "line": 2212,
          "old_api": null,
          "new_api": "pfree",
          "old_text": null,
          "new_text": "pfree(nodes)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tpfree(nodes);",
          "content_same": false
        },
        {
          "line": 2726,
          "old_api": null,
          "new_api": "LockBufHdr",
          "old_text": null,
          "new_text": "LockBufHdr(buf)",
          "old_line_content": "\t\t/*",
          "new_line_content": "\t\tLockBufHdr(buf);",
          "content_same": false
        },
        {
          "line": 2736,
          "old_api": null,
          "new_api": "UnlockBufHdr",
          "old_text": null,
          "new_text": "UnlockBufHdr(buf)",
          "old_line_content": "\t\tPinCountWaitBuf = NULL;",
          "new_line_content": "\t\tUnlockBufHdr(buf);",
          "content_same": false
        },
        {
          "line": 2226,
          "old_api": null,
          "new_api": "pg_qsort",
          "old_text": null,
          "new_text": "pg_qsort(nodes, n, sizeof(RelFileNode), rnode_comparator)",
          "old_line_content": "\tfor (i = 0; i < NBuffers; i++)",
          "new_line_content": "\t\tpg_qsort(nodes, n, sizeof(RelFileNode), rnode_comparator);",
          "content_same": false
        },
        {
          "line": 2750,
          "old_api": null,
          "new_api": "BufferIsValid",
          "old_text": null,
          "new_text": "BufferIsValid(buffer)",
          "old_line_content": "\t\treturn;\t\t\t\t\t/* local buffers need no lock */",
          "new_line_content": "\tAssert(BufferIsValid(buffer));",
          "content_same": false
        },
        {
          "line": 2751,
          "old_api": null,
          "new_api": "BufferIsLocal",
          "old_text": null,
          "new_text": "BufferIsLocal(buffer)",
          "old_line_content": "",
          "new_line_content": "\tif (BufferIsLocal(buffer))",
          "content_same": false
        },
        {
          "line": 2244,
          "old_api": null,
          "new_api": "RelFileNodeEquals",
          "old_text": null,
          "new_text": "RelFileNodeEquals(bufHdr->tag.rnode, nodes[j])",
          "old_line_content": "\t\t\t\t\trnode = &nodes[j];",
          "new_line_content": "\t\t\t\tif (RelFileNodeEquals(bufHdr->tag.rnode, nodes[j]))",
          "content_same": false
        },
        {
          "line": 2763,
          "old_api": null,
          "new_api": "elog",
          "old_text": null,
          "new_text": "elog(ERROR, \"unrecognized buffer lock mode: %d\", mode)",
          "old_line_content": "",
          "new_line_content": "\t\telog(ERROR, \"unrecognized buffer lock mode: %d\", mode);",
          "content_same": false
        },
        {
          "line": 2253,
          "old_api": null,
          "new_api": "bsearch",
          "old_text": null,
          "new_text": "bsearch((const void *) &(bufHdr->tag.rnode),\n\t\t\t\t\t\t\tnodes, n, sizeof(RelFileNode),\n\t\t\t\t\t\t\trnode_comparator)",
          "old_line_content": "\t\t\t\t\t\t\trnode_comparator);",
          "new_line_content": "\t\t\trnode = bsearch((const void *) &(bufHdr->tag.rnode),",
          "content_same": false
        },
        {
          "line": 2263,
          "old_api": null,
          "new_api": "RelFileNodeEquals",
          "old_text": null,
          "new_text": "RelFileNodeEquals(bufHdr->tag.rnode, (*rnode))",
          "old_line_content": "\t\telse",
          "new_line_content": "\t\tif (RelFileNodeEquals(bufHdr->tag.rnode, (*rnode)))",
          "content_same": false
        },
        {
          "line": 2776,
          "old_api": null,
          "new_api": "BufferIsValid",
          "old_text": null,
          "new_text": "BufferIsValid(buffer)",
          "old_line_content": "\t\treturn true;\t\t\t/* act as though we got it */",
          "new_line_content": "\tAssert(BufferIsValid(buffer));",
          "content_same": false
        },
        {
          "line": 2777,
          "old_api": null,
          "new_api": "BufferIsLocal",
          "old_text": null,
          "new_text": "BufferIsLocal(buffer)",
          "old_line_content": "",
          "new_line_content": "\tif (BufferIsLocal(buffer))",
          "content_same": false
        },
        {
          "line": 2266,
          "old_api": null,
          "new_api": "UnlockBufHdr",
          "old_text": null,
          "new_text": "UnlockBufHdr(bufHdr)",
          "old_line_content": "",
          "new_line_content": "\t\t\tUnlockBufHdr(bufHdr);",
          "content_same": false
        },
        {
          "line": 2269,
          "old_api": null,
          "new_api": "pfree",
          "old_text": null,
          "new_text": "pfree(nodes)",
          "old_line_content": "",
          "new_line_content": "\tpfree(nodes);",
          "content_same": false
        },
        {
          "line": 2782,
          "old_api": null,
          "new_api": "LWLockConditionalAcquire",
          "old_text": null,
          "new_text": "LWLockConditionalAcquire(buf->content_lock, LW_EXCLUSIVE)",
          "old_line_content": "",
          "new_line_content": "\treturn LWLockConditionalAcquire(buf->content_lock, LW_EXCLUSIVE);",
          "content_same": false
        },
        {
          "line": 2806,
          "old_api": null,
          "new_api": "BufferIsValid",
          "old_text": null,
          "new_text": "BufferIsValid(buffer)",
          "old_line_content": "",
          "new_line_content": "\tAssert(BufferIsValid(buffer));",
          "content_same": false
        },
        {
          "line": 2809,
          "old_api": null,
          "new_api": "BufferIsLocal",
          "old_text": null,
          "new_text": "BufferIsLocal(buffer)",
          "old_line_content": "\t\t/* There should be exactly one pin */",
          "new_line_content": "\tif (BufferIsLocal(buffer))",
          "content_same": false
        },
        {
          "line": 2813,
          "old_api": null,
          "new_api": "elog",
          "old_text": null,
          "new_text": "elog(ERROR, \"incorrect local pin count: %d\",\n\t\t\t\t LocalRefCount[-buffer - 1])",
          "old_line_content": "\t\t/* Nobody else to wait for */",
          "new_line_content": "\t\t\telog(ERROR, \"incorrect local pin count: %d\",",
          "content_same": false
        },
        {
          "line": 2308,
          "old_api": null,
          "new_api": "UnlockBufHdr",
          "old_text": null,
          "new_text": "UnlockBufHdr(bufHdr)",
          "old_line_content": "}",
          "new_line_content": "\t\t\tUnlockBufHdr(bufHdr);",
          "content_same": false
        },
        {
          "line": 2821,
          "old_api": null,
          "new_api": "elog",
          "old_text": null,
          "new_text": "elog(ERROR, \"incorrect local pin count: %d\",\n\t\t\t PrivateRefCount[buffer - 1])",
          "old_line_content": "",
          "new_line_content": "\t\telog(ERROR, \"incorrect local pin count: %d\",",
          "content_same": false
        },
        {
          "line": 2830,
          "old_api": null,
          "new_api": "LockBufHdr",
          "old_text": null,
          "new_text": "LockBufHdr(bufHdr)",
          "old_line_content": "\t\tif (bufHdr->refcount == 1)",
          "new_line_content": "\t\tLockBufHdr(bufHdr);",
          "content_same": false
        },
        {
          "line": 2831,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(bufHdr->refcount > 0)",
          "old_line_content": "\t\t{",
          "new_line_content": "\t\tAssert(bufHdr->refcount > 0);",
          "content_same": false
        },
        {
          "line": 2835,
          "old_api": null,
          "new_api": "UnlockBufHdr",
          "old_text": null,
          "new_text": "UnlockBufHdr(bufHdr)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tUnlockBufHdr(bufHdr);",
          "content_same": false
        },
        {
          "line": 2329,
          "old_api": null,
          "new_api": "elog",
          "old_text": null,
          "new_text": "elog(LOG,\n\t\t\t \"[%02d] (freeNext=%d, rel=%s, \"\n\t\t\t \"blockNum=%u, flags=0x%x, refcount=%u %d)\",\n\t\t\t i, buf->freeNext,\n\t\t  relpathbackend(buf->tag.rnode, InvalidBackendId, buf->tag.forkNum),\n\t\t\t buf->tag.blockNum, buf->flags,\n\t\t\t buf->refcount, PrivateRefCount[i])",
          "old_line_content": "\t\t\t \"blockNum=%u, flags=0x%x, refcount=%u %d)\",",
          "new_line_content": "\t\telog(LOG,",
          "content_same": false
        },
        {
          "line": 2842,
          "old_api": null,
          "new_api": "LockBuffer",
          "old_text": null,
          "new_text": "LockBuffer(buffer, BUFFER_LOCK_UNLOCK)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tLockBuffer(buffer, BUFFER_LOCK_UNLOCK);",
          "content_same": false
        },
        {
          "line": 2843,
          "old_api": null,
          "new_api": "elog",
          "old_text": null,
          "new_text": "elog(ERROR, \"multiple backends attempting to wait for pincount 1\")",
          "old_line_content": "\t\tbufHdr->wait_backend_pid = MyProcPid;",
          "new_line_content": "\t\t\telog(ERROR, \"multiple backends attempting to wait for pincount 1\");",
          "content_same": false
        },
        {
          "line": 2333,
          "old_api": null,
          "new_api": "relpathbackend",
          "old_text": null,
          "new_text": "relpathbackend(buf->tag.rnode, InvalidBackendId, buf->tag.forkNum)",
          "old_line_content": "\t\t\t buf->refcount, PrivateRefCount[i]);",
          "new_line_content": "\t\t  relpathbackend(buf->tag.rnode, InvalidBackendId, buf->tag.forkNum),",
          "content_same": false
        },
        {
          "line": 2848,
          "old_api": null,
          "new_api": "UnlockBufHdr",
          "old_text": null,
          "new_text": "UnlockBufHdr(bufHdr)",
          "old_line_content": "",
          "new_line_content": "\t\tUnlockBufHdr(bufHdr);",
          "content_same": false
        },
        {
          "line": 2849,
          "old_api": null,
          "new_api": "LockBuffer",
          "old_text": null,
          "new_text": "LockBuffer(buffer, BUFFER_LOCK_UNLOCK)",
          "old_line_content": "\t\t/* Wait to be signaled by UnpinBuffer() */",
          "new_line_content": "\t\tLockBuffer(buffer, BUFFER_LOCK_UNLOCK);",
          "content_same": false
        },
        {
          "line": 2859,
          "old_api": null,
          "new_api": "SetStartupBufferPinWaitBufId",
          "old_text": null,
          "new_text": "SetStartupBufferPinWaitBufId(-1)",
          "old_line_content": "\t\telse",
          "new_line_content": "\t\t\tSetStartupBufferPinWaitBufId(-1);",
          "content_same": false
        },
        {
          "line": 2862,
          "old_api": null,
          "new_api": "ProcWaitForSignal",
          "old_text": null,
          "new_text": "ProcWaitForSignal()",
          "old_line_content": "\t\tPinCountWaitBuf = NULL;",
          "new_line_content": "\t\t\tProcWaitForSignal();",
          "content_same": false
        },
        {
          "line": 2352,
          "old_api": null,
          "new_api": "elog",
          "old_text": null,
          "new_text": "elog(LOG,\n\t\t\t\t \"[%02d] (freeNext=%d, rel=%s, \"\n\t\t\t\t \"blockNum=%u, flags=0x%x, refcount=%u %d)\",\n\t\t\t\t i, buf->freeNext,\n\t\t\t\t relpath(buf->tag.rnode, buf->tag.forkNum),\n\t\t\t\t buf->tag.blockNum, buf->flags,\n\t\t\t\t buf->refcount, PrivateRefCount[i])",
          "old_line_content": "\t\t\t\t \"blockNum=%u, flags=0x%x, refcount=%u %d)\",",
          "new_line_content": "\t\t\telog(LOG,",
          "content_same": false
        },
        {
          "line": 2356,
          "old_api": null,
          "new_api": "relpath",
          "old_text": null,
          "new_text": "relpath(buf->tag.rnode, buf->tag.forkNum)",
          "old_line_content": "\t\t\t\t buf->refcount, PrivateRefCount[i]);",
          "new_line_content": "\t\t\t\t relpath(buf->tag.rnode, buf->tag.forkNum),",
          "content_same": false
        },
        {
          "line": 2876,
          "old_api": null,
          "new_api": "GetStartupBufferPinWaitBufId",
          "old_text": null,
          "new_text": "GetStartupBufferPinWaitBufId()",
          "old_line_content": "\t/*",
          "new_line_content": "\tint\t\t\tbufid = GetStartupBufferPinWaitBufId();",
          "content_same": false
        },
        {
          "line": 2392,
          "old_api": null,
          "new_api": "RelationUsesLocalBuffers",
          "old_text": null,
          "new_text": "RelationUsesLocalBuffers(rel)",
          "old_line_content": "\t\tfor (i = 0; i < NLocBuffer; i++)",
          "new_line_content": "\tif (RelationUsesLocalBuffers(rel))",
          "content_same": false
        },
        {
          "line": 2906,
          "old_api": null,
          "new_api": "BufferIsLocal",
          "old_text": null,
          "new_text": "BufferIsLocal(buffer)",
          "old_line_content": "\t\t/* There should be exactly one pin */",
          "new_line_content": "\tif (BufferIsLocal(buffer))",
          "content_same": false
        },
        {
          "line": 2397,
          "old_api": null,
          "new_api": "RelFileNodeEquals",
          "old_text": null,
          "new_text": "RelFileNodeEquals(bufHdr->tag.rnode, rel->rd_node)",
          "old_line_content": "\t\t\t{",
          "new_line_content": "\t\t\tif (RelFileNodeEquals(bufHdr->tag.rnode, rel->rd_node) &&",
          "content_same": false
        },
        {
          "line": 2909,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(LocalRefCount[-buffer - 1] > 0)",
          "old_line_content": "\t\t\treturn false;",
          "new_line_content": "\t\tAssert(LocalRefCount[-buffer - 1] > 0);",
          "content_same": false
        },
        {
          "line": 2403,
          "old_api": null,
          "new_api": "LocalBufHdrGetBlock",
          "old_text": null,
          "new_text": "LocalBufHdrGetBlock(bufHdr)",
          "old_line_content": "\t\t\t\t/* Setup error traceback support for ereport() */",
          "new_line_content": "\t\t\t\tlocalpage = (char *) LocalBufHdrGetBlock(bufHdr);",
          "content_same": false
        },
        {
          "line": 2917,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(PrivateRefCount[buffer - 1] > 0)",
          "old_line_content": "\t\treturn false;",
          "new_line_content": "\tAssert(PrivateRefCount[buffer - 1] > 0);",
          "content_same": false
        },
        {
          "line": 2922,
          "old_api": null,
          "new_api": "ConditionalLockBuffer",
          "old_text": null,
          "new_text": "ConditionalLockBuffer(buffer)",
          "old_line_content": "",
          "new_line_content": "\tif (!ConditionalLockBuffer(buffer))",
          "content_same": false
        },
        {
          "line": 2413,
          "old_api": null,
          "new_api": "smgrwrite",
          "old_text": null,
          "new_text": "smgrwrite(rel->rd_smgr,\n\t\t\t\t\t\t  bufHdr->tag.forkNum,\n\t\t\t\t\t\t  bufHdr->tag.blockNum,\n\t\t\t\t\t\t  localpage,\n\t\t\t\t\t\t  false)",
          "old_line_content": "\t\t\t\t\t\t  bufHdr->tag.blockNum,",
          "new_line_content": "\t\t\t\tsmgrwrite(rel->rd_smgr,",
          "content_same": false
        },
        {
          "line": 2926,
          "old_api": null,
          "new_api": "LockBufHdr",
          "old_text": null,
          "new_text": "LockBufHdr(bufHdr)",
          "old_line_content": "\tif (bufHdr->refcount == 1)",
          "new_line_content": "\tLockBufHdr(bufHdr);",
          "content_same": false
        },
        {
          "line": 2927,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(bufHdr->refcount > 0)",
          "old_line_content": "\t{",
          "new_line_content": "\tAssert(bufHdr->refcount > 0);",
          "content_same": false
        },
        {
          "line": 2931,
          "old_api": null,
          "new_api": "UnlockBufHdr",
          "old_text": null,
          "new_text": "UnlockBufHdr(bufHdr)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tUnlockBufHdr(bufHdr);",
          "content_same": false
        },
        {
          "line": 2936,
          "old_api": null,
          "new_api": "UnlockBufHdr",
          "old_text": null,
          "new_text": "UnlockBufHdr(bufHdr)",
          "old_line_content": "\treturn false;",
          "new_line_content": "\tUnlockBufHdr(bufHdr);",
          "content_same": false
        },
        {
          "line": 2937,
          "old_api": null,
          "new_api": "LockBuffer",
          "old_text": null,
          "new_text": "LockBuffer(buffer, BUFFER_LOCK_UNLOCK)",
          "old_line_content": "}",
          "new_line_content": "\tLockBuffer(buffer, BUFFER_LOCK_UNLOCK);",
          "content_same": false
        },
        {
          "line": 2430,
          "old_api": null,
          "new_api": "ResourceOwnerEnlargeBuffers",
          "old_text": null,
          "new_text": "ResourceOwnerEnlargeBuffers(CurrentResourceOwner)",
          "old_line_content": "\tfor (i = 0; i < NBuffers; i++)",
          "new_line_content": "\tResourceOwnerEnlargeBuffers(CurrentResourceOwner);",
          "content_same": false
        },
        {
          "line": 2440,
          "old_api": null,
          "new_api": "RelFileNodeEquals",
          "old_text": null,
          "new_text": "RelFileNodeEquals(bufHdr->tag.rnode, rel->rd_node)",
          "old_line_content": "",
          "new_line_content": "\t\tif (!RelFileNodeEquals(bufHdr->tag.rnode, rel->rd_node))",
          "content_same": false
        },
        {
          "line": 2443,
          "old_api": null,
          "new_api": "LockBufHdr",
          "old_text": null,
          "new_text": "LockBufHdr(bufHdr)",
          "old_line_content": "\t\t\t(bufHdr->flags & BM_VALID) && (bufHdr->flags & BM_DIRTY))",
          "new_line_content": "\t\tLockBufHdr(bufHdr);",
          "content_same": false
        },
        {
          "line": 2444,
          "old_api": null,
          "new_api": "RelFileNodeEquals",
          "old_text": null,
          "new_text": "RelFileNodeEquals(bufHdr->tag.rnode, rel->rd_node)",
          "old_line_content": "\t\t{",
          "new_line_content": "\t\tif (RelFileNodeEquals(bufHdr->tag.rnode, rel->rd_node) &&",
          "content_same": false
        },
        {
          "line": 2450,
          "old_api": null,
          "new_api": "LWLockRelease",
          "old_text": null,
          "new_text": "LWLockRelease(bufHdr->content_lock)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tLWLockRelease(bufHdr->content_lock);",
          "content_same": false
        },
        {
          "line": 2451,
          "old_api": null,
          "new_api": "UnpinBuffer",
          "old_text": null,
          "new_text": "UnpinBuffer(bufHdr, true)",
          "old_line_content": "\t\telse",
          "new_line_content": "\t\t\tUnpinBuffer(bufHdr, true);",
          "content_same": false
        },
        {
          "line": 2454,
          "old_api": null,
          "new_api": "UnlockBufHdr",
          "old_text": null,
          "new_text": "UnlockBufHdr(bufHdr)",
          "old_line_content": "}",
          "new_line_content": "\t\t\tUnlockBufHdr(bufHdr);",
          "content_same": false
        },
        {
          "line": 2975,
          "old_api": null,
          "new_api": "UnlockBufHdr",
          "old_text": null,
          "new_text": "UnlockBufHdr(buf)",
          "old_line_content": "\t\t\tbreak;",
          "new_line_content": "\t\tUnlockBufHdr(buf);",
          "content_same": false
        },
        {
          "line": 2978,
          "old_api": null,
          "new_api": "LWLockAcquire",
          "old_text": null,
          "new_text": "LWLockAcquire(buf->io_in_progress_lock, LW_SHARED)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tLWLockAcquire(buf->io_in_progress_lock, LW_SHARED);",
          "content_same": false
        },
        {
          "line": 2979,
          "old_api": null,
          "new_api": "LWLockRelease",
          "old_text": null,
          "new_text": "LWLockRelease(buf->io_in_progress_lock)",
          "old_line_content": "}",
          "new_line_content": "\t\tLWLockRelease(buf->io_in_progress_lock);",
          "content_same": false
        },
        {
          "line": 2480,
          "old_api": null,
          "new_api": "ResourceOwnerEnlargeBuffers",
          "old_text": null,
          "new_text": "ResourceOwnerEnlargeBuffers(CurrentResourceOwner)",
          "old_line_content": "\tfor (i = 0; i < NBuffers; i++)",
          "new_line_content": "\tResourceOwnerEnlargeBuffers(CurrentResourceOwner);",
          "content_same": false
        },
        {
          "line": 3004,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(!InProgressBuf)",
          "old_line_content": "\tfor (;;)",
          "new_line_content": "\tAssert(!InProgressBuf);",
          "content_same": false
        },
        {
          "line": 2493,
          "old_api": null,
          "new_api": "LockBufHdr",
          "old_text": null,
          "new_text": "LockBufHdr(bufHdr)",
          "old_line_content": "\t\t\t(bufHdr->flags & BM_VALID) && (bufHdr->flags & BM_DIRTY))",
          "new_line_content": "\t\tLockBufHdr(bufHdr);",
          "content_same": false
        },
        {
          "line": 2500,
          "old_api": null,
          "new_api": "LWLockRelease",
          "old_text": null,
          "new_text": "LWLockRelease(bufHdr->content_lock)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tLWLockRelease(bufHdr->content_lock);",
          "content_same": false
        },
        {
          "line": 2501,
          "old_api": null,
          "new_api": "UnpinBuffer",
          "old_text": null,
          "new_text": "UnpinBuffer(bufHdr, true)",
          "old_line_content": "\t\telse",
          "new_line_content": "\t\t\tUnpinBuffer(bufHdr, true);",
          "content_same": false
        },
        {
          "line": 3014,
          "old_api": null,
          "new_api": "LockBufHdr",
          "old_text": null,
          "new_text": "LockBufHdr(buf)",
          "old_line_content": "\t\tif (!(buf->flags & BM_IO_IN_PROGRESS))",
          "new_line_content": "\t\tLockBufHdr(buf);",
          "content_same": false
        },
        {
          "line": 2504,
          "old_api": null,
          "new_api": "UnlockBufHdr",
          "old_text": null,
          "new_text": "UnlockBufHdr(bufHdr)",
          "old_line_content": "}",
          "new_line_content": "\t\t\tUnlockBufHdr(bufHdr);",
          "content_same": false
        },
        {
          "line": 3026,
          "old_api": null,
          "new_api": "LWLockRelease",
          "old_text": null,
          "new_text": "LWLockRelease(buf->io_in_progress_lock)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tLWLockRelease(buf->io_in_progress_lock);",
          "content_same": false
        },
        {
          "line": 3027,
          "old_api": null,
          "new_api": "WaitIO",
          "old_text": null,
          "new_text": "WaitIO(buf)",
          "old_line_content": "",
          "new_line_content": "\t\tWaitIO(buf);",
          "content_same": false
        },
        {
          "line": 2516,
          "old_api": null,
          "new_api": "BufferIsValid",
          "old_text": null,
          "new_text": "BufferIsValid(buffer)",
          "old_line_content": "",
          "new_line_content": "\tif (!BufferIsValid(buffer))",
          "content_same": false
        },
        {
          "line": 2523,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(LocalRefCount[-buffer - 1] > 0)",
          "old_line_content": "\t\treturn;",
          "new_line_content": "\t\tAssert(LocalRefCount[-buffer - 1] > 0);",
          "content_same": false
        },
        {
          "line": 3035,
          "old_api": null,
          "new_api": "UnlockBufHdr",
          "old_text": null,
          "new_text": "UnlockBufHdr(buf)",
          "old_line_content": "\t\treturn false;",
          "new_line_content": "\t\tUnlockBufHdr(buf);",
          "content_same": false
        },
        {
          "line": 3036,
          "old_api": null,
          "new_api": "LWLockRelease",
          "old_text": null,
          "new_text": "LWLockRelease(buf->io_in_progress_lock)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tLWLockRelease(buf->io_in_progress_lock);",
          "content_same": false
        },
        {
          "line": 2530,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(PrivateRefCount[buffer - 1] > 0)",
          "old_line_content": "\tif (PrivateRefCount[buffer - 1] > 1)",
          "new_line_content": "\tAssert(PrivateRefCount[buffer - 1] > 0);",
          "content_same": false
        },
        {
          "line": 3042,
          "old_api": null,
          "new_api": "UnlockBufHdr",
          "old_text": null,
          "new_text": "UnlockBufHdr(buf)",
          "old_line_content": "\tInProgressBuf = buf;",
          "new_line_content": "\tUnlockBufHdr(buf);",
          "content_same": false
        },
        {
          "line": 2535,
          "old_api": null,
          "new_api": "UnpinBuffer",
          "old_text": null,
          "new_text": "UnpinBuffer(bufHdr, false)",
          "old_line_content": "",
          "new_line_content": "\t\tUnpinBuffer(bufHdr, false);",
          "content_same": false
        },
        {
          "line": 2546,
          "old_api": null,
          "new_api": "LockBuffer",
          "old_text": null,
          "new_text": "LockBuffer(buffer, BUFFER_LOCK_UNLOCK)",
          "old_line_content": "}",
          "new_line_content": "\tLockBuffer(buffer, BUFFER_LOCK_UNLOCK);",
          "content_same": false
        },
        {
          "line": 2547,
          "old_api": null,
          "new_api": "ReleaseBuffer",
          "old_text": null,
          "new_text": "ReleaseBuffer(buffer)",
          "old_line_content": "",
          "new_line_content": "\tReleaseBuffer(buffer);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 2560,
          "old_api": "ResourceOwnerEnlargeBuffers",
          "new_api": null,
          "old_text": "ResourceOwnerEnlargeBuffers(CurrentResourceOwner)",
          "new_text": null,
          "old_line_content": "\tResourceOwnerEnlargeBuffers(CurrentResourceOwner);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 3079,
          "old_api": "UnlockBufHdr",
          "new_api": null,
          "old_text": "UnlockBufHdr(buf)",
          "new_text": null,
          "old_line_content": "\tUnlockBufHdr(buf);",
          "new_line_content": "\tbuf->flags |= set_flag_bits;",
          "content_same": false
        },
        {
          "line": 3083,
          "old_api": "LWLockRelease",
          "new_api": null,
          "old_text": "LWLockRelease(buf->io_in_progress_lock)",
          "new_text": null,
          "old_line_content": "\tLWLockRelease(buf->io_in_progress_lock);",
          "new_line_content": "\tInProgressBuf = NULL;",
          "content_same": false
        },
        {
          "line": 2586,
          "old_api": "BufferGetPage",
          "new_api": null,
          "old_text": "BufferGetPage(buffer)",
          "new_text": null,
          "old_line_content": "\tPage\tpage = BufferGetPage(buffer);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 2589,
          "old_api": "elog",
          "new_api": null,
          "old_text": "elog(ERROR, \"bad buffer ID: %d\", buffer)",
          "new_text": null,
          "old_line_content": "\t\telog(ERROR, \"bad buffer ID: %d\", buffer);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2083,
          "old_api": "BufferIsLocal",
          "new_api": null,
          "old_text": "BufferIsLocal(buffer)",
          "new_text": null,
          "old_line_content": "\tif (BufferIsLocal(buffer))",
          "new_line_content": "\t * If we don't need locking for correctness, fastpath out.",
          "content_same": false
        },
        {
          "line": 2084,
          "old_api": "PageGetLSN",
          "new_api": null,
          "old_text": "PageGetLSN(page)",
          "new_text": null,
          "old_line_content": "\t\treturn PageGetLSN(page);",
          "new_line_content": "\t */",
          "content_same": false
        },
        {
          "line": 3108,
          "old_api": "LWLockAcquire",
          "new_api": null,
          "old_text": "LWLockAcquire(buf->io_in_progress_lock, LW_EXCLUSIVE)",
          "new_text": null,
          "old_line_content": "\t\tLWLockAcquire(buf->io_in_progress_lock, LW_EXCLUSIVE);",
          "new_line_content": "\t\t * buffer will be in a busy spin until we succeed in doing this.",
          "content_same": false
        },
        {
          "line": 2087,
          "old_api": "BufferIsValid",
          "new_api": null,
          "old_text": "BufferIsValid(buffer)",
          "new_text": null,
          "old_line_content": "\tAssert(BufferIsValid(buffer));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2088,
          "old_api": "BufferIsPinned",
          "new_api": null,
          "old_text": "BufferIsPinned(buffer)",
          "new_text": null,
          "old_line_content": "\tAssert(BufferIsPinned(buffer));",
          "new_line_content": "\t/* Make sure we've got a real buffer, and that we hold a pin on it. */",
          "content_same": false
        },
        {
          "line": 2599,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(PrivateRefCount[buffer - 1] > 0)",
          "new_text": null,
          "old_line_content": "\tAssert(PrivateRefCount[buffer - 1] > 0);",
          "new_line_content": "\tbufHdr = &BufferDescriptors[buffer - 1];",
          "content_same": false
        },
        {
          "line": 3111,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(buf->flags & BM_IO_IN_PROGRESS)",
          "new_text": null,
          "old_line_content": "\t\tAssert(buf->flags & BM_IO_IN_PROGRESS);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2091,
          "old_api": "PageGetLSN",
          "new_api": null,
          "old_text": "PageGetLSN(page)",
          "new_text": null,
          "old_line_content": "\tlsn = PageGetLSN(page);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3114,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(!(buf->flags & BM_DIRTY))",
          "new_text": null,
          "old_line_content": "\t\t\tAssert(!(buf->flags & BM_DIRTY));",
          "new_line_content": "\t\tif (IsForInput)",
          "content_same": false
        },
        {
          "line": 3117,
          "old_api": "UnlockBufHdr",
          "new_api": null,
          "old_text": "UnlockBufHdr(buf)",
          "new_text": null,
          "old_line_content": "\t\t\tUnlockBufHdr(buf);",
          "new_line_content": "\t\t\t/* We'd better not think buffer is valid yet */",
          "content_same": false
        },
        {
          "line": 3124,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(sv_flags & BM_DIRTY)",
          "new_text": null,
          "old_line_content": "\t\t\tAssert(sv_flags & BM_DIRTY);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3125,
          "old_api": "UnlockBufHdr",
          "new_api": null,
          "old_text": "UnlockBufHdr(buf)",
          "new_text": null,
          "old_line_content": "\t\t\tUnlockBufHdr(buf);",
          "new_line_content": "\t\t\tsv_flags = buf->flags;",
          "content_same": false
        },
        {
          "line": 3132,
          "old_api": "relpathperm",
          "new_api": null,
          "old_text": "relpathperm(buf->tag.rnode, buf->tag.forkNum)",
          "new_text": null,
          "old_line_content": "\t\t\t\tpath = relpathperm(buf->tag.rnode, buf->tag.forkNum);",
          "new_line_content": "\t\t\t\tchar\t   *path;",
          "content_same": false
        },
        {
          "line": 3133,
          "old_api": "ereport",
          "new_api": null,
          "old_text": "ereport(WARNING,\n\t\t\t\t\t\t(errcode(ERRCODE_IO_ERROR),\n\t\t\t\t\t\t errmsg(\"could not write block %u of %s\",\n\t\t\t\t\t\t\t\tbuf->tag.blockNum, path),\n\t\t\t\t\t\t errdetail(\"Multiple failures --- write error might be permanent.\")))",
          "new_text": null,
          "old_line_content": "\t\t\t\tereport(WARNING,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3138,
          "old_api": "pfree",
          "new_api": null,
          "old_text": "pfree(path)",
          "new_text": null,
          "old_line_content": "\t\t\t\tpfree(path);",
          "new_line_content": "\t\t\t\t\t\t\t\tbuf->tag.blockNum, path),",
          "content_same": false
        },
        {
          "line": 3141,
          "old_api": "TerminateBufferIO",
          "new_api": null,
          "old_text": "TerminateBufferIO(buf, false, BM_IO_ERROR)",
          "new_text": null,
          "old_line_content": "\t\tTerminateBufferIO(buf, false, BM_IO_ERROR);",
          "new_line_content": "\t\t\t}",
          "content_same": false
        },
        {
          "line": 2632,
          "old_api": "DataChecksumsEnabled",
          "new_api": null,
          "old_text": "DataChecksumsEnabled()",
          "new_text": null,
          "old_line_content": "\t\tif (DataChecksumsEnabled() && (bufHdr->flags & BM_PERMANENT))",
          "new_line_content": "\t\t * dynamically.",
          "content_same": false
        },
        {
          "line": 2641,
          "old_api": "RecoveryInProgress",
          "new_api": null,
          "old_text": "RecoveryInProgress()",
          "new_text": null,
          "old_line_content": "\t\t\tif (RecoveryInProgress())",
          "new_line_content": "\t\t\t * See src/backend/storage/page/README for longer discussion.",
          "content_same": false
        },
        {
          "line": 2130,
          "old_api": "RelFileNodeBackendIsTemp",
          "new_api": null,
          "old_text": "RelFileNodeBackendIsTemp(rnode)",
          "new_text": null,
          "old_line_content": "\tif (RelFileNodeBackendIsTemp(rnode))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3156,
          "old_api": "relpathperm",
          "new_api": null,
          "old_text": "relpathperm(bufHdr->tag.rnode, bufHdr->tag.forkNum)",
          "new_text": null,
          "old_line_content": "\t\tchar\t   *path = relpathperm(bufHdr->tag.rnode, bufHdr->tag.forkNum);",
          "new_line_content": "\tif (bufHdr != NULL)",
          "content_same": false
        },
        {
          "line": 2133,
          "old_api": "DropRelFileNodeLocalBuffers",
          "new_api": null,
          "old_text": "DropRelFileNodeLocalBuffers(rnode.node, forkNum, firstDelBlock)",
          "new_text": null,
          "old_line_content": "\t\t\tDropRelFileNodeLocalBuffers(rnode.node, forkNum, firstDelBlock);",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 3174,
          "old_api": "relpathbackend",
          "new_api": null,
          "old_text": "relpathbackend(bufHdr->tag.rnode, MyBackendId,\n\t\t\t\t\t\t\t\t\t\t  bufHdr->tag.forkNum)",
          "new_text": null,
          "old_line_content": "\t\tchar\t   *path = relpathbackend(bufHdr->tag.rnode, MyBackendId,",
          "new_line_content": "\tif (bufHdr != NULL)",
          "content_same": false
        },
        {
          "line": 3177,
          "old_api": "errcontext",
          "new_api": null,
          "old_text": "errcontext(\"writing block %u of relation %s\",\n\t\t\t\t   bufHdr->tag.blockNum, path)",
          "new_text": null,
          "old_line_content": "\t\terrcontext(\"writing block %u of relation %s\",",
          "new_line_content": "\t\t\t\t\t\t\t\t\t\t  bufHdr->tag.forkNum);",
          "content_same": false
        },
        {
          "line": 2668,
          "old_api": "XLogSaveBufferForHint",
          "new_api": null,
          "old_text": "XLogSaveBufferForHint(buffer)",
          "new_text": null,
          "old_line_content": "\t\t\tlsn = XLogSaveBufferForHint(buffer);",
          "new_line_content": "\t\t\t */",
          "content_same": false
        },
        {
          "line": 2157,
          "old_api": "RelFileNodeEquals",
          "new_api": null,
          "old_text": "RelFileNodeEquals(bufHdr->tag.rnode, rnode.node)",
          "new_text": null,
          "old_line_content": "\t\tif (!RelFileNodeEquals(bufHdr->tag.rnode, rnode.node))",
          "new_line_content": "\t\t * incremental win from doing so seems small.",
          "content_same": false
        },
        {
          "line": 2671,
          "old_api": "LockBufHdr",
          "new_api": null,
          "old_text": "LockBufHdr(bufHdr)",
          "new_text": null,
          "old_line_content": "\t\tLockBufHdr(bufHdr);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 2160,
          "old_api": "LockBufHdr",
          "new_api": null,
          "old_text": "LockBufHdr(bufHdr)",
          "new_text": null,
          "old_line_content": "\t\tLockBufHdr(bufHdr);",
          "new_line_content": "\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 2161,
          "old_api": "RelFileNodeEquals",
          "new_api": null,
          "old_text": "RelFileNodeEquals(bufHdr->tag.rnode, rnode.node)",
          "new_text": null,
          "old_line_content": "\t\tif (RelFileNodeEquals(bufHdr->tag.rnode, rnode.node) &&",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2672,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(bufHdr->refcount > 0)",
          "new_text": null,
          "old_line_content": "\t\tAssert(bufHdr->refcount > 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2164,
          "old_api": "InvalidateBuffer",
          "new_api": null,
          "old_text": "InvalidateBuffer(bufHdr)",
          "new_text": null,
          "old_line_content": "\t\t\tInvalidateBuffer(bufHdr);\t/* releases spinlock */",
          "new_line_content": "\t\t\tbufHdr->tag.forkNum == forkNum &&",
          "content_same": false
        },
        {
          "line": 2690,
          "old_api": "XLogRecPtrIsInvalid",
          "new_api": null,
          "old_text": "XLogRecPtrIsInvalid(lsn)",
          "new_text": null,
          "old_line_content": "\t\t\tif (!XLogRecPtrIsInvalid(lsn))",
          "new_line_content": "\t\t\t * sometime later in this checkpoint cycle.",
          "content_same": false
        },
        {
          "line": 2691,
          "old_api": "PageSetLSN",
          "new_api": null,
          "old_text": "PageSetLSN(page, lsn)",
          "new_text": null,
          "old_line_content": "\t\t\t\tPageSetLSN(page, lsn);",
          "new_line_content": "\t\t\t */",
          "content_same": false
        },
        {
          "line": 2694,
          "old_api": "UnlockBufHdr",
          "new_api": null,
          "old_text": "UnlockBufHdr(bufHdr)",
          "new_text": null,
          "old_line_content": "\t\tUnlockBufHdr(bufHdr);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 2190,
          "old_api": "palloc",
          "new_api": null,
          "old_text": "palloc(sizeof(RelFileNode) * nnodes)",
          "new_text": null,
          "old_line_content": "\tnodes = palloc(sizeof(RelFileNode) * nnodes); /* non-local relations */",
          "new_line_content": "\t\treturn;",
          "content_same": false
        },
        {
          "line": 2195,
          "old_api": "RelFileNodeBackendIsTemp",
          "new_api": null,
          "old_text": "RelFileNodeBackendIsTemp(rnodes[i])",
          "new_text": null,
          "old_line_content": "\t\tif (RelFileNodeBackendIsTemp(rnodes[i]))",
          "new_line_content": "\tfor (i = 0; i < nnodes; i++)",
          "content_same": false
        },
        {
          "line": 2198,
          "old_api": "DropRelFileNodeAllLocalBuffers",
          "new_api": null,
          "old_text": "DropRelFileNodeAllLocalBuffers(rnodes[i].node)",
          "new_text": null,
          "old_line_content": "\t\t\t\tDropRelFileNodeAllLocalBuffers(rnodes[i].node);",
          "new_line_content": "\t\t{",
          "content_same": false
        },
        {
          "line": 2210,
          "old_api": "pfree",
          "new_api": null,
          "old_text": "pfree(nodes)",
          "new_text": null,
          "old_line_content": "\t\tpfree(nodes);",
          "new_line_content": "\tif (n == 0)",
          "content_same": false
        },
        {
          "line": 2724,
          "old_api": "LockBufHdr",
          "new_api": null,
          "old_text": "LockBufHdr(buf)",
          "new_text": null,
          "old_line_content": "\t\tLockBufHdr(buf);",
          "new_line_content": "\tif (buf)",
          "content_same": false
        },
        {
          "line": 2734,
          "old_api": "UnlockBufHdr",
          "new_api": null,
          "old_text": "UnlockBufHdr(buf)",
          "new_text": null,
          "old_line_content": "\t\tUnlockBufHdr(buf);",
          "new_line_content": "\t\t\tbuf->flags &= ~BM_PIN_COUNT_WAITER;",
          "content_same": false
        },
        {
          "line": 2224,
          "old_api": "pg_qsort",
          "new_api": null,
          "old_text": "pg_qsort(nodes, n, sizeof(RelFileNode), rnode_comparator)",
          "new_text": null,
          "old_line_content": "\t\tpg_qsort(nodes, n, sizeof(RelFileNode), rnode_comparator);",
          "new_line_content": "\t/* sort the list of rnodes if necessary */",
          "content_same": false
        },
        {
          "line": 2748,
          "old_api": "BufferIsValid",
          "new_api": null,
          "old_text": "BufferIsValid(buffer)",
          "new_text": null,
          "old_line_content": "\tAssert(BufferIsValid(buffer));",
          "new_line_content": "\tvolatile BufferDesc *buf;",
          "content_same": false
        },
        {
          "line": 2749,
          "old_api": "BufferIsLocal",
          "new_api": null,
          "old_text": "BufferIsLocal(buffer)",
          "new_text": null,
          "old_line_content": "\tif (BufferIsLocal(buffer))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2242,
          "old_api": "RelFileNodeEquals",
          "new_api": null,
          "old_text": "RelFileNodeEquals(bufHdr->tag.rnode, nodes[j])",
          "new_text": null,
          "old_line_content": "\t\t\t\tif (RelFileNodeEquals(bufHdr->tag.rnode, nodes[j]))",
          "new_line_content": "\t\t\tfor (j = 0; j < n; j++)",
          "content_same": false
        },
        {
          "line": 2755,
          "old_api": "LWLockRelease",
          "new_api": null,
          "old_text": "LWLockRelease(buf->content_lock)",
          "new_text": null,
          "old_line_content": "\t\tLWLockRelease(buf->content_lock);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2251,
          "old_api": "bsearch",
          "new_api": null,
          "old_text": "bsearch((const void *) &(bufHdr->tag.rnode),\n\t\t\t\t\t\t\tnodes, n, sizeof(RelFileNode),\n\t\t\t\t\t\t\trnode_comparator)",
          "new_text": null,
          "old_line_content": "\t\t\trnode = bsearch((const void *) &(bufHdr->tag.rnode),",
          "new_line_content": "\t\telse",
          "content_same": false
        },
        {
          "line": 2260,
          "old_api": "LockBufHdr",
          "new_api": null,
          "old_text": "LockBufHdr(bufHdr)",
          "new_text": null,
          "old_line_content": "\t\tLockBufHdr(bufHdr);",
          "new_line_content": "\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 2261,
          "old_api": "RelFileNodeEquals",
          "new_api": null,
          "old_text": "RelFileNodeEquals(bufHdr->tag.rnode, (*rnode))",
          "new_text": null,
          "old_line_content": "\t\tif (RelFileNodeEquals(bufHdr->tag.rnode, (*rnode)))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2774,
          "old_api": "BufferIsValid",
          "new_api": null,
          "old_text": "BufferIsValid(buffer)",
          "new_text": null,
          "old_line_content": "\tAssert(BufferIsValid(buffer));",
          "new_line_content": "\tvolatile BufferDesc *buf;",
          "content_same": false
        },
        {
          "line": 2775,
          "old_api": "BufferIsLocal",
          "new_api": null,
          "old_text": "BufferIsLocal(buffer)",
          "new_text": null,
          "old_line_content": "\tif (BufferIsLocal(buffer))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2267,
          "old_api": "pfree",
          "new_api": null,
          "old_text": "pfree(nodes)",
          "new_text": null,
          "old_line_content": "\tpfree(nodes);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 2780,
          "old_api": "LWLockConditionalAcquire",
          "new_api": null,
          "old_text": "LWLockConditionalAcquire(buf->content_lock, LW_EXCLUSIVE)",
          "new_text": null,
          "old_line_content": "\treturn LWLockConditionalAcquire(buf->content_lock, LW_EXCLUSIVE);",
          "new_line_content": "\tbuf = &(BufferDescriptors[buffer - 1]);",
          "content_same": false
        },
        {
          "line": 2804,
          "old_api": "BufferIsValid",
          "new_api": null,
          "old_text": "BufferIsValid(buffer)",
          "new_text": null,
          "old_line_content": "\tAssert(BufferIsValid(buffer));",
          "new_line_content": "\tvolatile BufferDesc *bufHdr;",
          "content_same": false
        },
        {
          "line": 2805,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(PinCountWaitBuf == NULL)",
          "new_text": null,
          "old_line_content": "\tAssert(PinCountWaitBuf == NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2811,
          "old_api": "elog",
          "new_api": null,
          "old_text": "elog(ERROR, \"incorrect local pin count: %d\",\n\t\t\t\t LocalRefCount[-buffer - 1])",
          "new_text": null,
          "old_line_content": "\t\t\telog(ERROR, \"incorrect local pin count: %d\",",
          "new_line_content": "\t\t/* There should be exactly one pin */",
          "content_same": false
        },
        {
          "line": 2302,
          "old_api": "LockBufHdr",
          "new_api": null,
          "old_text": "LockBufHdr(bufHdr)",
          "new_text": null,
          "old_line_content": "\t\tLockBufHdr(bufHdr);",
          "new_line_content": "\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 2819,
          "old_api": "elog",
          "new_api": null,
          "old_text": "elog(ERROR, \"incorrect local pin count: %d\",\n\t\t\t PrivateRefCount[buffer - 1])",
          "new_text": null,
          "old_line_content": "\t\telog(ERROR, \"incorrect local pin count: %d\",",
          "new_line_content": "\t/* There should be exactly one local pin */",
          "content_same": false
        },
        {
          "line": 2827,
          "old_api": "LockBuffer",
          "new_api": null,
          "old_text": "LockBuffer(buffer, BUFFER_LOCK_EXCLUSIVE)",
          "new_text": null,
          "old_line_content": "\t\tLockBuffer(buffer, BUFFER_LOCK_EXCLUSIVE);",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 2828,
          "old_api": "LockBufHdr",
          "new_api": null,
          "old_text": "LockBufHdr(bufHdr)",
          "new_text": null,
          "old_line_content": "\t\tLockBufHdr(bufHdr);",
          "new_line_content": "\t\t/* Try to acquire lock */",
          "content_same": false
        },
        {
          "line": 2833,
          "old_api": "UnlockBufHdr",
          "new_api": null,
          "old_text": "UnlockBufHdr(bufHdr)",
          "new_text": null,
          "old_line_content": "\t\t\tUnlockBufHdr(bufHdr);",
          "new_line_content": "\t\t{",
          "content_same": false
        },
        {
          "line": 2327,
          "old_api": "elog",
          "new_api": null,
          "old_text": "elog(LOG,\n\t\t\t \"[%02d] (freeNext=%d, rel=%s, \"\n\t\t\t \"blockNum=%u, flags=0x%x, refcount=%u %d)\",\n\t\t\t i, buf->freeNext,\n\t\t  relpathbackend(buf->tag.rnode, InvalidBackendId, buf->tag.forkNum),\n\t\t\t buf->tag.blockNum, buf->flags,\n\t\t\t buf->refcount, PrivateRefCount[i])",
          "new_text": null,
          "old_line_content": "\t\telog(LOG,",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 2839,
          "old_api": "UnlockBufHdr",
          "new_api": null,
          "old_text": "UnlockBufHdr(bufHdr)",
          "new_text": null,
          "old_line_content": "\t\t\tUnlockBufHdr(bufHdr);",
          "new_line_content": "\t\tif (bufHdr->flags & BM_PIN_COUNT_WAITER)",
          "content_same": false
        },
        {
          "line": 2840,
          "old_api": "LockBuffer",
          "new_api": null,
          "old_text": "LockBuffer(buffer, BUFFER_LOCK_UNLOCK)",
          "new_text": null,
          "old_line_content": "\t\t\tLockBuffer(buffer, BUFFER_LOCK_UNLOCK);",
          "new_line_content": "\t\t{",
          "content_same": false
        },
        {
          "line": 2331,
          "old_api": "relpathbackend",
          "new_api": null,
          "old_text": "relpathbackend(buf->tag.rnode, InvalidBackendId, buf->tag.forkNum)",
          "new_text": null,
          "old_line_content": "\t\t  relpathbackend(buf->tag.rnode, InvalidBackendId, buf->tag.forkNum),",
          "new_line_content": "\t\t\t \"blockNum=%u, flags=0x%x, refcount=%u %d)\",",
          "content_same": false
        },
        {
          "line": 2846,
          "old_api": "UnlockBufHdr",
          "new_api": null,
          "old_text": "UnlockBufHdr(bufHdr)",
          "new_text": null,
          "old_line_content": "\t\tUnlockBufHdr(bufHdr);",
          "new_line_content": "\t\tbufHdr->flags |= BM_PIN_COUNT_WAITER;",
          "content_same": false
        },
        {
          "line": 2847,
          "old_api": "LockBuffer",
          "new_api": null,
          "old_text": "LockBuffer(buffer, BUFFER_LOCK_UNLOCK)",
          "new_text": null,
          "old_line_content": "\t\tLockBuffer(buffer, BUFFER_LOCK_UNLOCK);",
          "new_line_content": "\t\tPinCountWaitBuf = bufHdr;",
          "content_same": false
        },
        {
          "line": 2853,
          "old_api": "SetStartupBufferPinWaitBufId",
          "new_api": null,
          "old_text": "SetStartupBufferPinWaitBufId(buffer - 1)",
          "new_text": null,
          "old_line_content": "\t\t\tSetStartupBufferPinWaitBufId(buffer - 1);",
          "new_line_content": "\t\t{",
          "content_same": false
        },
        {
          "line": 2860,
          "old_api": "ProcWaitForSignal",
          "new_api": null,
          "old_text": "ProcWaitForSignal()",
          "new_text": null,
          "old_line_content": "\t\t\tProcWaitForSignal();",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 2350,
          "old_api": "elog",
          "new_api": null,
          "old_text": "elog(LOG,\n\t\t\t\t \"[%02d] (freeNext=%d, rel=%s, \"\n\t\t\t\t \"blockNum=%u, flags=0x%x, refcount=%u %d)\",\n\t\t\t\t i, buf->freeNext,\n\t\t\t\t relpath(buf->tag.rnode, buf->tag.forkNum),\n\t\t\t\t buf->tag.blockNum, buf->flags,\n\t\t\t\t buf->refcount, PrivateRefCount[i])",
          "new_text": null,
          "old_line_content": "\t\t\telog(LOG,",
          "new_line_content": "\t\t{",
          "content_same": false
        },
        {
          "line": 2354,
          "old_api": "relpath",
          "new_api": null,
          "old_text": "relpath(buf->tag.rnode, buf->tag.forkNum)",
          "new_text": null,
          "old_line_content": "\t\t\t\t relpath(buf->tag.rnode, buf->tag.forkNum),",
          "new_line_content": "\t\t\t\t \"blockNum=%u, flags=0x%x, refcount=%u %d)\",",
          "content_same": false
        },
        {
          "line": 2874,
          "old_api": "GetStartupBufferPinWaitBufId",
          "new_api": null,
          "old_text": "GetStartupBufferPinWaitBufId()",
          "new_text": null,
          "old_line_content": "\tint\t\t\tbufid = GetStartupBufferPinWaitBufId();",
          "new_line_content": "HoldingBufferPinThatDelaysRecovery(void)",
          "content_same": false
        },
        {
          "line": 2388,
          "old_api": "RelationOpenSmgr",
          "new_api": null,
          "old_text": "RelationOpenSmgr(rel)",
          "new_text": null,
          "old_line_content": "\tRelationOpenSmgr(rel);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2902,
          "old_api": "BufferIsValid",
          "new_api": null,
          "old_text": "BufferIsValid(buffer)",
          "new_text": null,
          "old_line_content": "\tAssert(BufferIsValid(buffer));",
          "new_line_content": "\tvolatile BufferDesc *bufHdr;",
          "content_same": false
        },
        {
          "line": 2395,
          "old_api": "RelFileNodeEquals",
          "new_api": null,
          "old_text": "RelFileNodeEquals(bufHdr->tag.rnode, rel->rd_node)",
          "new_text": null,
          "old_line_content": "\t\t\tif (RelFileNodeEquals(bufHdr->tag.rnode, rel->rd_node) &&",
          "new_line_content": "\t\t{",
          "content_same": false
        },
        {
          "line": 2907,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(LocalRefCount[-buffer - 1] > 0)",
          "new_text": null,
          "old_line_content": "\t\tAssert(LocalRefCount[-buffer - 1] > 0);",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 2401,
          "old_api": "LocalBufHdrGetBlock",
          "new_api": null,
          "old_text": "LocalBufHdrGetBlock(bufHdr)",
          "new_text": null,
          "old_line_content": "\t\t\t\tlocalpage = (char *) LocalBufHdrGetBlock(bufHdr);",
          "new_line_content": "\t\t\t\tPage\t\t\t\t\tlocalpage;",
          "content_same": false
        },
        {
          "line": 2915,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(PrivateRefCount[buffer - 1] > 0)",
          "new_text": null,
          "old_line_content": "\tAssert(PrivateRefCount[buffer - 1] > 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2920,
          "old_api": "ConditionalLockBuffer",
          "new_api": null,
          "old_text": "ConditionalLockBuffer(buffer)",
          "new_text": null,
          "old_line_content": "\tif (!ConditionalLockBuffer(buffer))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2409,
          "old_api": "PageSetChecksumInplace",
          "new_api": null,
          "old_text": "PageSetChecksumInplace(localpage, bufHdr->tag.blockNum)",
          "new_text": null,
          "old_line_content": "\t\t\t\tPageSetChecksumInplace(localpage, bufHdr->tag.blockNum);",
          "new_line_content": "\t\t\t\terror_context_stack = &errcallback;",
          "content_same": false
        },
        {
          "line": 2924,
          "old_api": "LockBufHdr",
          "new_api": null,
          "old_text": "LockBufHdr(bufHdr)",
          "new_text": null,
          "old_line_content": "\tLockBufHdr(bufHdr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2925,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(bufHdr->refcount > 0)",
          "new_text": null,
          "old_line_content": "\tAssert(bufHdr->refcount > 0);",
          "new_line_content": "\tbufHdr = &BufferDescriptors[buffer - 1];",
          "content_same": false
        },
        {
          "line": 2929,
          "old_api": "UnlockBufHdr",
          "new_api": null,
          "old_text": "UnlockBufHdr(bufHdr)",
          "new_text": null,
          "old_line_content": "\t\tUnlockBufHdr(bufHdr);",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 2934,
          "old_api": "UnlockBufHdr",
          "new_api": null,
          "old_text": "UnlockBufHdr(bufHdr)",
          "new_text": null,
          "old_line_content": "\tUnlockBufHdr(bufHdr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2935,
          "old_api": "LockBuffer",
          "new_api": null,
          "old_text": "LockBuffer(buffer, BUFFER_LOCK_UNLOCK)",
          "new_text": null,
          "old_line_content": "\tLockBuffer(buffer, BUFFER_LOCK_UNLOCK);",
          "new_line_content": "\t/* Failed, so release the lock */",
          "content_same": false
        },
        {
          "line": 2428,
          "old_api": "ResourceOwnerEnlargeBuffers",
          "new_api": null,
          "old_text": "ResourceOwnerEnlargeBuffers(CurrentResourceOwner)",
          "new_text": null,
          "old_line_content": "\tResourceOwnerEnlargeBuffers(CurrentResourceOwner);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2438,
          "old_api": "RelFileNodeEquals",
          "new_api": null,
          "old_text": "RelFileNodeEquals(bufHdr->tag.rnode, rel->rd_node)",
          "new_text": null,
          "old_line_content": "\t\tif (!RelFileNodeEquals(bufHdr->tag.rnode, rel->rd_node))",
          "new_line_content": "\t\t * and saves some cycles.",
          "content_same": false
        },
        {
          "line": 2441,
          "old_api": "LockBufHdr",
          "new_api": null,
          "old_text": "LockBufHdr(bufHdr)",
          "new_text": null,
          "old_line_content": "\t\tLockBufHdr(bufHdr);",
          "new_line_content": "\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 2442,
          "old_api": "RelFileNodeEquals",
          "new_api": null,
          "old_text": "RelFileNodeEquals(bufHdr->tag.rnode, rel->rd_node)",
          "new_text": null,
          "old_line_content": "\t\tif (RelFileNodeEquals(bufHdr->tag.rnode, rel->rd_node) &&",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2445,
          "old_api": "PinBuffer_Locked",
          "new_api": null,
          "old_text": "PinBuffer_Locked(bufHdr)",
          "new_text": null,
          "old_line_content": "\t\t\tPinBuffer_Locked(bufHdr);",
          "new_line_content": "\t\t\t(bufHdr->flags & BM_VALID) && (bufHdr->flags & BM_DIRTY))",
          "content_same": false
        },
        {
          "line": 2446,
          "old_api": "LWLockAcquire",
          "new_api": null,
          "old_text": "LWLockAcquire(bufHdr->content_lock, LW_SHARED)",
          "new_text": null,
          "old_line_content": "\t\t\tLWLockAcquire(bufHdr->content_lock, LW_SHARED);",
          "new_line_content": "\t\t{",
          "content_same": false
        },
        {
          "line": 2452,
          "old_api": "UnlockBufHdr",
          "new_api": null,
          "old_text": "UnlockBufHdr(bufHdr)",
          "new_text": null,
          "old_line_content": "\t\t\tUnlockBufHdr(bufHdr);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 2971,
          "old_api": "LockBufHdr",
          "new_api": null,
          "old_text": "LockBufHdr(buf)",
          "new_text": null,
          "old_line_content": "\t\tLockBufHdr(buf);",
          "new_line_content": "\t\t * play it safe.",
          "content_same": false
        },
        {
          "line": 2976,
          "old_api": "LWLockAcquire",
          "new_api": null,
          "old_text": "LWLockAcquire(buf->io_in_progress_lock, LW_SHARED)",
          "new_text": null,
          "old_line_content": "\t\tLWLockAcquire(buf->io_in_progress_lock, LW_SHARED);",
          "new_line_content": "\t\tif (!(sv_flags & BM_IO_IN_PROGRESS))",
          "content_same": false
        },
        {
          "line": 2977,
          "old_api": "LWLockRelease",
          "new_api": null,
          "old_text": "LWLockRelease(buf->io_in_progress_lock)",
          "new_text": null,
          "old_line_content": "\t\tLWLockRelease(buf->io_in_progress_lock);",
          "new_line_content": "\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 2478,
          "old_api": "ResourceOwnerEnlargeBuffers",
          "new_api": null,
          "old_text": "ResourceOwnerEnlargeBuffers(CurrentResourceOwner)",
          "new_text": null,
          "old_line_content": "\tResourceOwnerEnlargeBuffers(CurrentResourceOwner);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3002,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(!InProgressBuf)",
          "new_text": null,
          "old_line_content": "\tAssert(!InProgressBuf);",
          "new_line_content": "StartBufferIO(volatile BufferDesc *buf, bool forInput)",
          "content_same": false
        },
        {
          "line": 2491,
          "old_api": "LockBufHdr",
          "new_api": null,
          "old_text": "LockBufHdr(bufHdr)",
          "new_text": null,
          "old_line_content": "\t\tLockBufHdr(bufHdr);",
          "new_line_content": "\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 2495,
          "old_api": "PinBuffer_Locked",
          "new_api": null,
          "old_text": "PinBuffer_Locked(bufHdr)",
          "new_text": null,
          "old_line_content": "\t\t\tPinBuffer_Locked(bufHdr);",
          "new_line_content": "\t\t\t(bufHdr->flags & BM_VALID) && (bufHdr->flags & BM_DIRTY))",
          "content_same": false
        },
        {
          "line": 2496,
          "old_api": "LWLockAcquire",
          "new_api": null,
          "old_text": "LWLockAcquire(bufHdr->content_lock, LW_SHARED)",
          "new_text": null,
          "old_line_content": "\t\t\tLWLockAcquire(bufHdr->content_lock, LW_SHARED);",
          "new_line_content": "\t\t{",
          "content_same": false
        },
        {
          "line": 3010,
          "old_api": "LWLockAcquire",
          "new_api": null,
          "old_text": "LWLockAcquire(buf->io_in_progress_lock, LW_EXCLUSIVE)",
          "new_text": null,
          "old_line_content": "\t\tLWLockAcquire(buf->io_in_progress_lock, LW_EXCLUSIVE);",
          "new_line_content": "\t\t * me to finish the I/O.",
          "content_same": false
        },
        {
          "line": 2502,
          "old_api": "UnlockBufHdr",
          "new_api": null,
          "old_text": "UnlockBufHdr(bufHdr)",
          "new_text": null,
          "old_line_content": "\t\t\tUnlockBufHdr(bufHdr);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 3023,
          "old_api": "UnlockBufHdr",
          "new_api": null,
          "old_text": "UnlockBufHdr(buf)",
          "new_text": null,
          "old_line_content": "\t\tUnlockBufHdr(buf);",
          "new_line_content": "\t\t * him to get unwedged.",
          "content_same": false
        },
        {
          "line": 3024,
          "old_api": "LWLockRelease",
          "new_api": null,
          "old_text": "LWLockRelease(buf->io_in_progress_lock)",
          "new_text": null,
          "old_line_content": "\t\tLWLockRelease(buf->io_in_progress_lock);",
          "new_line_content": "\t\t */",
          "content_same": false
        },
        {
          "line": 2514,
          "old_api": "BufferIsValid",
          "new_api": null,
          "old_text": "BufferIsValid(buffer)",
          "new_text": null,
          "old_line_content": "\tif (!BufferIsValid(buffer))",
          "new_line_content": "\tvolatile BufferDesc *bufHdr;",
          "content_same": false
        },
        {
          "line": 2515,
          "old_api": "elog",
          "new_api": null,
          "old_text": "elog(ERROR, \"bad buffer ID: %d\", buffer)",
          "new_text": null,
          "old_line_content": "\t\telog(ERROR, \"bad buffer ID: %d\", buffer);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3033,
          "old_api": "UnlockBufHdr",
          "new_api": null,
          "old_text": "UnlockBufHdr(buf)",
          "new_text": null,
          "old_line_content": "\t\tUnlockBufHdr(buf);",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 3034,
          "old_api": "LWLockRelease",
          "new_api": null,
          "old_text": "LWLockRelease(buf->io_in_progress_lock)",
          "new_text": null,
          "old_line_content": "\t\tLWLockRelease(buf->io_in_progress_lock);",
          "new_line_content": "\t\t/* someone else already did the I/O */",
          "content_same": false
        },
        {
          "line": 2528,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(PrivateRefCount[buffer - 1] > 0)",
          "new_text": null,
          "old_line_content": "\tAssert(PrivateRefCount[buffer - 1] > 0);",
          "new_line_content": "\tbufHdr = &BufferDescriptors[buffer - 1];",
          "content_same": false
        },
        {
          "line": 3040,
          "old_api": "UnlockBufHdr",
          "new_api": null,
          "old_text": "UnlockBufHdr(buf)",
          "new_text": null,
          "old_line_content": "\tUnlockBufHdr(buf);",
          "new_line_content": "\tbuf->flags |= BM_IO_IN_PROGRESS;",
          "content_same": false
        },
        {
          "line": 2533,
          "old_api": "UnpinBuffer",
          "new_api": null,
          "old_text": "UnpinBuffer(bufHdr, false)",
          "new_text": null,
          "old_line_content": "\t\tUnpinBuffer(bufHdr, false);",
          "new_line_content": "\t\tPrivateRefCount[buffer - 1]--;",
          "content_same": false
        },
        {
          "line": 2544,
          "old_api": "LockBuffer",
          "new_api": null,
          "old_text": "LockBuffer(buffer, BUFFER_LOCK_UNLOCK)",
          "new_text": null,
          "old_line_content": "\tLockBuffer(buffer, BUFFER_LOCK_UNLOCK);",
          "new_line_content": "UnlockReleaseBuffer(Buffer buffer)",
          "content_same": false
        },
        {
          "line": 2545,
          "old_api": "ReleaseBuffer",
          "new_api": null,
          "old_text": "ReleaseBuffer(buffer)",
          "new_text": null,
          "old_line_content": "\tReleaseBuffer(buffer);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 3069,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(buf == InProgressBuf)",
          "new_text": null,
          "old_line_content": "\tAssert(buf == InProgressBuf);",
          "new_line_content": "\t\t\t\t  int set_flag_bits)",
          "content_same": false
        },
        {
          "line": 2559,
          "old_api": "BufferIsPinned",
          "new_api": null,
          "old_text": "BufferIsPinned(buffer)",
          "new_text": null,
          "old_line_content": "\tAssert(BufferIsPinned(buffer));",
          "new_line_content": "IncrBufferRefCount(Buffer buffer)",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 44,
      "total_additions": 118,
      "total_deletions": 118,
      "total_api_changes": 280
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 4,
        "api_related_lines": 280,
        "non_api_lines": 1,
        "non_api_line_numbers": [
          2082
        ]
      }
    },
    "api_calls_before": 440,
    "api_calls_after": 441,
    "diff_info": {
      "added_lines": 4,
      "removed_lines": 2,
      "total_diff_lines": 18
    }
  }
}
{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/postgres/modified_file/bc7fcab5e36b9597857fa7e3fa6d9ba54aaea167",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/postgres/modified_file/bc7fcab5e36b9597857fa7e3fa6d9ba54aaea167/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/postgres/modified_file/bc7fcab5e36b9597857fa7e3fa6d9ba54aaea167/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/postgres/modified_file/bc7fcab5e36b9597857fa7e3fa6d9ba54aaea167/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 413,
          "old_api": "ExecParallelFinish",
          "new_api": "pfree",
          "old_text": "ExecParallelFinish(node->pei)",
          "new_text": "pfree(node->reader)",
          "old_line_content": "\t\tExecParallelFinish(node->pei);",
          "new_line_content": "\t\tpfree(node->reader);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 419,
          "old_api": null,
          "new_api": "ExecParallelFinish",
          "old_text": null,
          "new_text": "ExecParallelFinish(node->pei)",
          "old_line_content": " *\t\tDestroy the setup for parallel workers including parallel context.",
          "new_line_content": "\t\tExecParallelFinish(node->pei);",
          "content_same": false
        },
        {
          "line": 387,
          "old_api": null,
          "new_api": "WaitLatch",
          "old_text": null,
          "new_text": "WaitLatch(MyLatch, WL_LATCH_SET, 0)",
          "old_line_content": "",
          "new_line_content": "\t\t\tWaitLatch(MyLatch, WL_LATCH_SET, 0);",
          "content_same": false
        },
        {
          "line": 388,
          "old_api": null,
          "new_api": "CHECK_FOR_INTERRUPTS",
          "old_text": null,
          "new_text": "CHECK_FOR_INTERRUPTS()",
          "old_line_content": "/* ----------------------------------------------------------------",
          "new_line_content": "\t\t\tCHECK_FOR_INTERRUPTS();",
          "content_same": false
        },
        {
          "line": 389,
          "old_api": null,
          "new_api": "ResetLatch",
          "old_text": null,
          "new_text": "ResetLatch(MyLatch)",
          "old_line_content": " *\t\tExecShutdownGatherWorkers",
          "new_line_content": "\t\t\tResetLatch(MyLatch);",
          "content_same": false
        },
        {
          "line": 463,
          "old_api": null,
          "new_api": "ExecShutdownGatherWorkers",
          "old_text": null,
          "new_text": "ExecShutdownGatherWorkers(node)",
          "old_line_content": "",
          "new_line_content": "\tExecShutdownGatherWorkers(node);",
          "content_same": false
        },
        {
          "line": 433,
          "old_api": null,
          "new_api": "ExecShutdownGatherWorkers",
          "old_text": null,
          "new_text": "ExecShutdownGatherWorkers(node)",
          "old_line_content": "\t\tnode->pei = NULL;",
          "new_line_content": "\tExecShutdownGatherWorkers(node);",
          "content_same": false
        },
        {
          "line": 468,
          "old_api": null,
          "new_api": "ExecParallelReinitialize",
          "old_text": null,
          "new_text": "ExecParallelReinitialize(node->pei)",
          "old_line_content": "",
          "new_line_content": "\t\tExecParallelReinitialize(node->pei);",
          "content_same": false
        },
        {
          "line": 438,
          "old_api": null,
          "new_api": "ExecParallelCleanup",
          "old_text": null,
          "new_text": "ExecParallelCleanup(node->pei)",
          "old_line_content": " *\t\t\t\t\t\tJoin Support",
          "new_line_content": "\t\tExecParallelCleanup(node->pei);",
          "content_same": false
        },
        {
          "line": 470,
          "old_api": null,
          "new_api": "ExecReScan",
          "old_text": null,
          "new_text": "ExecReScan(node->ps.lefttree)",
          "old_line_content": "",
          "new_line_content": "\tExecReScan(node->ps.lefttree);",
          "content_same": false
        },
        {
          "line": 411,
          "old_api": null,
          "new_api": "DestroyTupleQueueReader",
          "old_text": null,
          "new_text": "DestroyTupleQueueReader(node->reader[i])",
          "old_line_content": "\t/* Now shut down the workers. */",
          "new_line_content": "\t\t\tDestroyTupleQueueReader(node->reader[i]);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 457,
          "old_api": "ExecShutdownGatherWorkers",
          "new_api": null,
          "old_text": "ExecShutdownGatherWorkers(node)",
          "new_text": null,
          "old_line_content": "\tExecShutdownGatherWorkers(node);",
          "new_line_content": "\t/*",
          "content_same": false
        },
        {
          "line": 427,
          "old_api": "ExecShutdownGatherWorkers",
          "new_api": null,
          "old_text": "ExecShutdownGatherWorkers(node)",
          "new_text": null,
          "old_line_content": "\tExecShutdownGatherWorkers(node);",
          "new_line_content": " *\t\tdone by workers won't be accounted.",
          "content_same": false
        },
        {
          "line": 462,
          "old_api": "ExecParallelReinitialize",
          "new_api": null,
          "old_text": "ExecParallelReinitialize(node->pei)",
          "new_text": null,
          "old_line_content": "\t\tExecParallelReinitialize(node->pei);",
          "new_line_content": "\t */",
          "content_same": false
        },
        {
          "line": 432,
          "old_api": "ExecParallelCleanup",
          "new_api": null,
          "old_text": "ExecParallelCleanup(node->pei)",
          "new_text": null,
          "old_line_content": "\t\tExecParallelCleanup(node->pei);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 464,
          "old_api": "ExecReScan",
          "new_api": null,
          "old_text": "ExecReScan(node->ps.lefttree)",
          "new_text": null,
          "old_line_content": "\tExecReScan(node->ps.lefttree);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 405,
          "old_api": "DestroyTupleQueueReader",
          "new_api": null,
          "old_text": "DestroyTupleQueueReader(node->reader[i])",
          "new_text": null,
          "old_line_content": "\t\t\tDestroyTupleQueueReader(node->reader[i]);",
          "new_line_content": "\t/* Shut down tuple queue readers before shutting down workers. */",
          "content_same": false
        },
        {
          "line": 407,
          "old_api": "pfree",
          "new_api": null,
          "old_text": "pfree(node->reader)",
          "new_text": null,
          "old_line_content": "\t\tpfree(node->reader);",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 381,
          "old_api": "WaitLatch",
          "new_api": null,
          "old_text": "WaitLatch(MyLatch, WL_LATCH_SET, 0)",
          "new_text": null,
          "old_line_content": "\t\t\tWaitLatch(MyLatch, WL_LATCH_SET, 0);",
          "new_line_content": "\t\t\t * generate another tuple from the local copy of the plan.",
          "content_same": false
        },
        {
          "line": 382,
          "old_api": "CHECK_FOR_INTERRUPTS",
          "new_api": null,
          "old_text": "CHECK_FOR_INTERRUPTS()",
          "new_text": null,
          "old_line_content": "\t\t\tCHECK_FOR_INTERRUPTS();",
          "new_line_content": "\t\t\t */",
          "content_same": false
        },
        {
          "line": 383,
          "old_api": "ResetLatch",
          "new_api": null,
          "old_text": "ResetLatch(MyLatch)",
          "new_text": null,
          "old_line_content": "\t\t\tResetLatch(MyLatch);",
          "new_line_content": "\t\t\tif (gatherstate->need_to_scan_locally)",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 1,
      "total_additions": 10,
      "total_deletions": 10,
      "total_api_changes": 21
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 14,
        "api_related_lines": 21,
        "non_api_lines": 14,
        "non_api_line_numbers": [
          362,
          363,
          364,
          365,
          366,
          367,
          368,
          369,
          370,
          371,
          372,
          373,
          374,
          375
        ]
      }
    },
    "api_calls_before": 56,
    "api_calls_after": 56,
    "diff_info": {
      "added_lines": 10,
      "removed_lines": 4,
      "total_diff_lines": 30
    }
  }
}
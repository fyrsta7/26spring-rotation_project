{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/postgres/modified_file/bacf7b2086d971e8b3f65eea00b5550db6fa9614",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/postgres/modified_file/bacf7b2086d971e8b3f65eea00b5550db6fa9614/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/postgres/modified_file/bacf7b2086d971e8b3f65eea00b5550db6fa9614/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/postgres/modified_file/bacf7b2086d971e8b3f65eea00b5550db6fa9614/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 2868,
          "old_api": "OCTVAL",
          "new_api": "ISOCTDIGIT",
          "old_text": "OCTVAL(strtext[i++])",
          "new_text": "ISOCTDIGIT(strtext[i + 2])",
          "old_line_content": "\t\t\t\t\t\tbyte = OCTVAL(strtext[i++]);",
          "new_line_content": "\t\t\t\t\t\t(ISOCTDIGIT(strtext[i + 2])))",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 2852,
          "old_api": null,
          "new_api": "malloc",
          "old_text": null,
          "new_text": "malloc(strtextlen + 1)",
          "old_line_content": "\tfor (i = j = 0; i < strtextlen;)",
          "new_line_content": "\tbuffer = (unsigned char *) malloc(strtextlen + 1);",
          "content_same": false
        },
        {
          "line": 2897,
          "old_api": null,
          "new_api": "realloc",
          "old_text": null,
          "new_text": "realloc(buffer, buflen + 1)",
          "old_line_content": "\t{",
          "new_line_content": "\ttmpbuf = realloc(buffer, buflen + 1);",
          "content_same": false
        },
        {
          "line": 2866,
          "old_api": null,
          "new_api": "ISFIRSTOCTDIGIT",
          "old_text": null,
          "new_text": "ISFIRSTOCTDIGIT(strtext[i])",
          "old_line_content": "\t\t\t\t\t\tint\t\t\tbyte;",
          "new_line_content": "\t\t\t\t\tif ((ISFIRSTOCTDIGIT(strtext[i])) &&",
          "content_same": false
        },
        {
          "line": 2867,
          "old_api": null,
          "new_api": "ISOCTDIGIT",
          "old_text": null,
          "new_text": "ISOCTDIGIT(strtext[i + 1])",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t\t\t(ISOCTDIGIT(strtext[i + 1])) &&",
          "content_same": false
        },
        {
          "line": 2805,
          "old_api": null,
          "new_api": "PQescapeByteaInternal",
          "old_text": null,
          "new_text": "PQescapeByteaInternal(conn, from, from_length, to_length,\n\t\t\t\t\t\t\t\t conn->std_strings)",
          "old_line_content": "unsigned char *",
          "new_line_content": "\treturn PQescapeByteaInternal(conn, from, from_length, to_length,",
          "content_same": false
        },
        {
          "line": 2902,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(buffer)",
          "old_line_content": "\t*retbuflen = buflen;",
          "new_line_content": "\t\tfree(buffer);",
          "content_same": false
        },
        {
          "line": 2872,
          "old_api": null,
          "new_api": "OCTVAL",
          "old_text": null,
          "new_text": "OCTVAL(strtext[i++])",
          "old_line_content": "\t\t\t\t\t}",
          "new_line_content": "\t\t\t\t\t\tbyte = OCTVAL(strtext[i++]);",
          "content_same": false
        },
        {
          "line": 2873,
          "old_api": null,
          "new_api": "OCTVAL",
          "old_text": null,
          "new_text": "OCTVAL(strtext[i++])",
          "old_line_content": "\t\t\t\t}",
          "new_line_content": "\t\t\t\t\t\tbyte = (byte << 3) + OCTVAL(strtext[i++]);",
          "content_same": false
        },
        {
          "line": 2874,
          "old_api": null,
          "new_api": "OCTVAL",
          "old_text": null,
          "new_text": "OCTVAL(strtext[i++])",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t\t\tbyte = (byte << 3) + OCTVAL(strtext[i++]);",
          "content_same": false
        },
        {
          "line": 2812,
          "old_api": null,
          "new_api": "PQescapeByteaInternal",
          "old_text": null,
          "new_text": "PQescapeByteaInternal(NULL, from, from_length, to_length,\n\t\t\t\t\t\t\t\t static_std_strings)",
          "old_line_content": "",
          "new_line_content": "\treturn PQescapeByteaInternal(NULL, from, from_length, to_length,",
          "content_same": false
        },
        {
          "line": 2846,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen((const char *) strtext)",
          "old_line_content": "\t * unportable malloc(0) if input is zero-length.",
          "new_line_content": "\tstrtextlen = strlen((const char *) strtext);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 2848,
          "old_api": "malloc",
          "new_api": null,
          "old_text": "malloc(strtextlen + 1)",
          "new_text": null,
          "old_line_content": "\tbuffer = (unsigned char *) malloc(strtextlen + 1);",
          "new_line_content": "\t/*",
          "content_same": false
        },
        {
          "line": 2893,
          "old_api": "realloc",
          "new_api": null,
          "old_text": "realloc(buffer, buflen + 1)",
          "new_text": null,
          "old_line_content": "\ttmpbuf = realloc(buffer, buflen + 1);",
          "new_line_content": "\tbuflen = j;\t\t\t\t\t/* buflen is the length of the dequoted data */",
          "content_same": false
        },
        {
          "line": 2862,
          "old_api": "ISFIRSTOCTDIGIT",
          "new_api": null,
          "old_text": "ISFIRSTOCTDIGIT(strtext[i])",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tif ((ISFIRSTOCTDIGIT(strtext[i])) &&",
          "new_line_content": "\t\t\t\tif (strtext[i] == '\\\\')",
          "content_same": false
        },
        {
          "line": 2863,
          "old_api": "ISOCTDIGIT",
          "new_api": null,
          "old_text": "ISOCTDIGIT(strtext[i + 1])",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t(ISOCTDIGIT(strtext[i + 1])) &&",
          "new_line_content": "\t\t\t\t\tbuffer[j++] = strtext[i++];",
          "content_same": false
        },
        {
          "line": 2768,
          "old_api": "sprintf",
          "new_api": null,
          "old_text": "sprintf((char *) rp, \"\\\\%03o\", *vp)",
          "new_text": null,
          "old_line_content": "\t\t\t(void) sprintf((char *) rp, \"\\\\%03o\", *vp);",
          "new_line_content": "\t\t\tif (!std_strings)",
          "content_same": false
        },
        {
          "line": 2801,
          "old_api": "PQescapeByteaInternal",
          "new_api": null,
          "old_text": "PQescapeByteaInternal(conn, from, from_length, to_length,\n\t\t\t\t\t\t\t\t conn->std_strings)",
          "new_text": null,
          "old_line_content": "\treturn PQescapeByteaInternal(conn, from, from_length, to_length,",
          "new_line_content": "\t\t\t\t  size_t *to_length)",
          "content_same": false
        },
        {
          "line": 2864,
          "old_api": "ISOCTDIGIT",
          "new_api": null,
          "old_text": "ISOCTDIGIT(strtext[i + 2])",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t(ISOCTDIGIT(strtext[i + 2])))",
          "new_line_content": "\t\t\t\telse",
          "content_same": false
        },
        {
          "line": 2898,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(buffer)",
          "new_text": null,
          "old_line_content": "\t\tfree(buffer);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2869,
          "old_api": "OCTVAL",
          "new_api": null,
          "old_text": "OCTVAL(strtext[i++])",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\tbyte = (byte << 3) + OCTVAL(strtext[i++]);",
          "new_line_content": "\t\t\t\t\t{",
          "content_same": false
        },
        {
          "line": 2870,
          "old_api": "OCTVAL",
          "new_api": null,
          "old_text": "OCTVAL(strtext[i++])",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\tbyte = (byte << 3) + OCTVAL(strtext[i++]);",
          "new_line_content": "\t\t\t\t\t\tint\t\t\tbyte;",
          "content_same": false
        },
        {
          "line": 2808,
          "old_api": "PQescapeByteaInternal",
          "new_api": null,
          "old_text": "PQescapeByteaInternal(NULL, from, from_length, to_length,\n\t\t\t\t\t\t\t\t static_std_strings)",
          "new_text": null,
          "old_line_content": "\treturn PQescapeByteaInternal(NULL, from, from_length, to_length,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2842,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen((const char *) strtext)",
          "new_text": null,
          "old_line_content": "\tstrtextlen = strlen((const char *) strtext);",
          "new_line_content": "",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 1,
      "total_additions": 11,
      "total_deletions": 12,
      "total_api_changes": 24
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 9,
        "api_related_lines": 24,
        "non_api_lines": 8,
        "non_api_line_numbers": [
          11,
          2766,
          2767,
          2769,
          2770,
          2771,
          2772,
          2773
        ]
      }
    },
    "api_calls_before": 332,
    "api_calls_after": 331,
    "diff_info": {
      "added_lines": 7,
      "removed_lines": 3,
      "total_diff_lines": 31
    }
  }
}
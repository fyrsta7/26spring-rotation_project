{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/postgres/modified_file/0d1adae6f739273046705acaf5314384e8a73a18",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/postgres/modified_file/0d1adae6f739273046705acaf5314384e8a73a18/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/postgres/modified_file/0d1adae6f739273046705acaf5314384e8a73a18/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/postgres/modified_file/0d1adae6f739273046705acaf5314384e8a73a18/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 191,
          "old_api": "appendStringInfoString",
          "new_api": "strlen",
          "old_text": "appendStringInfoString(result, \"null\")",
          "new_text": "strlen(\"null\")",
          "old_line_content": "\t\tappendStringInfoString(result, \"null\");",
          "new_line_content": "\t\tappendBinaryStringInfo(result, \"null\", strlen(\"null\"));",
          "content_same": false
        },
        {
          "line": 215,
          "old_api": "escape_json",
          "new_api": "DatumGetBool",
          "old_text": "escape_json(result, outputstr)",
          "new_text": "DatumGetBool(val)",
          "old_line_content": "\t\t\t\tescape_json(result, outputstr);",
          "new_line_content": "\t\t\tif (DatumGetBool(val))",
          "content_same": false
        },
        {
          "line": 220,
          "old_api": "OidOutputFunctionCall",
          "new_api": "appendStringInfoChar",
          "old_text": "OidOutputFunctionCall(outfuncoid, val)",
          "new_text": "appendStringInfoChar(result, '\"')",
          "old_line_content": "\t\t\toutputstr = OidOutputFunctionCall(outfuncoid, val);",
          "new_line_content": "\t\t\t\tappendStringInfoChar(result, '\"');",
          "content_same": false
        },
        {
          "line": 235,
          "old_api": "appendStringInfoChar",
          "new_api": "appendStringInfoString",
          "old_text": "appendStringInfoChar(result, '\"')",
          "new_text": "appendStringInfoString(result, outputstr)",
          "old_line_content": "\t\t\t\tappendStringInfoChar(result, '\"');",
          "new_line_content": "\t\t\t\tappendStringInfoString(result, outputstr);",
          "content_same": false
        },
        {
          "line": 239,
          "old_api": "pfree",
          "new_api": "appendStringInfoString",
          "old_text": "pfree(outputstr)",
          "new_text": "appendStringInfoString(result, outputstr)",
          "old_line_content": "\t\t\tpfree(outputstr);",
          "new_line_content": "\t\t\t\tappendStringInfoString(result, outputstr);",
          "content_same": false
        },
        {
          "line": 248,
          "old_api": "appendStringInfoChar",
          "new_api": "JsonEncodeDateTime",
          "old_text": "appendStringInfoChar(result, '\"')",
          "new_text": "JsonEncodeDateTime(buf, val, DATEOID, NULL)",
          "old_line_content": "\t\t\t\tappendStringInfoChar(result, '\"');",
          "new_line_content": "\t\t\t\tJsonEncodeDateTime(buf, val, DATEOID, NULL);",
          "content_same": false
        },
        {
          "line": 258,
          "old_api": "appendStringInfoChar",
          "new_api": "JsonEncodeDateTime",
          "old_text": "appendStringInfoChar(result, '\"')",
          "new_text": "JsonEncodeDateTime(buf, val, TIMESTAMPOID, NULL)",
          "old_line_content": "\t\t\t\tappendStringInfoChar(result, '\"');",
          "new_line_content": "\t\t\t\tJsonEncodeDateTime(buf, val, TIMESTAMPOID, NULL);",
          "content_same": false
        },
        {
          "line": 268,
          "old_api": "appendStringInfoChar",
          "new_api": "JsonEncodeDateTime",
          "old_text": "appendStringInfoChar(result, '\"')",
          "new_text": "JsonEncodeDateTime(buf, val, TIMESTAMPTZOID, NULL)",
          "old_line_content": "\t\t\t\tappendStringInfoChar(result, '\"');",
          "new_line_content": "\t\t\t\tJsonEncodeDateTime(buf, val, TIMESTAMPTZOID, NULL);",
          "content_same": false
        },
        {
          "line": 282,
          "old_api": "pfree",
          "new_api": "OidFunctionCall1",
          "old_text": "pfree(outputstr)",
          "new_text": "OidFunctionCall1(outfuncoid, val)",
          "old_line_content": "\t\t\tpfree(outputstr);",
          "new_line_content": "\t\t\tjsontext = DatumGetTextPP(OidFunctionCall1(outfuncoid, val));",
          "content_same": false
        },
        {
          "line": 283,
          "old_api": "pfree",
          "new_api": "VARDATA_ANY",
          "old_text": "pfree(jsontext)",
          "new_text": "VARDATA_ANY(jsontext)",
          "old_line_content": "\t\t\tpfree(jsontext);",
          "new_line_content": "\t\t\tappendBinaryStringInfo(result, VARDATA_ANY(jsontext),",
          "content_same": false
        },
        {
          "line": 288,
          "old_api": "pfree",
          "new_api": "OidOutputFunctionCall",
          "old_text": "pfree(outputstr)",
          "new_text": "OidOutputFunctionCall(outfuncoid, val)",
          "old_line_content": "\t\t\tpfree(outputstr);",
          "new_line_content": "\t\t\toutputstr = OidOutputFunctionCall(outfuncoid, val);",
          "content_same": false
        },
        {
          "line": 320,
          "old_api": "EncodeDateOnly",
          "new_api": "j2date",
          "old_text": "EncodeDateOnly(&tm, USE_XSD_DATES, buf)",
          "new_text": "j2date(date + POSTGRES_EPOCH_JDATE,\n\t\t\t\t\t\t   &(tm.tm_year), &(tm.tm_mon), &(tm.tm_mday))",
          "old_line_content": "\t\t\t\t\tEncodeDateOnly(&tm, USE_XSD_DATES, buf);",
          "new_line_content": "\t\t\t\t\tj2date(date + POSTGRES_EPOCH_JDATE,",
          "content_same": false
        },
        {
          "line": 357,
          "old_api": "TIMESTAMP_NOT_FINITE",
          "new_api": "DatumGetTimestamp",
          "old_text": "TIMESTAMP_NOT_FINITE(timestamp)",
          "new_text": "DatumGetTimestamp(value)",
          "old_line_content": "\t\t\t\tif (TIMESTAMP_NOT_FINITE(timestamp))",
          "new_line_content": "\t\t\t\ttimestamp = DatumGetTimestamp(value);",
          "content_same": false
        },
        {
          "line": 359,
          "old_api": "timestamp2tm",
          "new_api": "TIMESTAMP_NOT_FINITE",
          "old_text": "timestamp2tm(timestamp, NULL, &tm, &fsec, NULL, NULL)",
          "new_text": "TIMESTAMP_NOT_FINITE(timestamp)",
          "old_line_content": "\t\t\t\telse if (timestamp2tm(timestamp, NULL, &tm, &fsec, NULL, NULL) == 0)",
          "new_line_content": "\t\t\t\tif (TIMESTAMP_NOT_FINITE(timestamp))",
          "content_same": false
        },
        {
          "line": 360,
          "old_api": "EncodeDateTime",
          "new_api": "EncodeSpecialTimestamp",
          "old_text": "EncodeDateTime(&tm, fsec, false, 0, NULL, USE_XSD_DATES, buf)",
          "new_text": "EncodeSpecialTimestamp(timestamp, buf)",
          "old_line_content": "\t\t\t\t\tEncodeDateTime(&tm, fsec, false, 0, NULL, USE_XSD_DATES, buf);",
          "new_line_content": "\t\t\t\t\tEncodeSpecialTimestamp(timestamp, buf);",
          "content_same": false
        },
        {
          "line": 362,
          "old_api": "ereport",
          "new_api": "EncodeDateTime",
          "old_text": "ereport(ERROR,\n\t\t\t\t\t\t\t(errcode(ERRCODE_DATETIME_VALUE_OUT_OF_RANGE),\n\t\t\t\t\t\t\t errmsg(\"timestamp out of range\")))",
          "new_text": "EncodeDateTime(&tm, fsec, false, 0, NULL, USE_XSD_DATES, buf)",
          "old_line_content": "\t\t\t\t\tereport(ERROR,",
          "new_line_content": "\t\t\t\t\tEncodeDateTime(&tm, fsec, false, 0, NULL, USE_XSD_DATES, buf);",
          "content_same": false
        },
        {
          "line": 364,
          "old_api": "errmsg",
          "new_api": "ereport",
          "old_text": "errmsg(\"timestamp out of range\")",
          "new_text": "ereport(ERROR,\n\t\t\t\t\t\t\t(errcode(ERRCODE_DATETIME_VALUE_OUT_OF_RANGE),\n\t\t\t\t\t\t\t errmsg(\"timestamp out of range\")))",
          "old_line_content": "\t\t\t\t\t\t\t errmsg(\"timestamp out of range\")));",
          "new_line_content": "\t\t\t\t\tereport(ERROR,",
          "content_same": false
        },
        {
          "line": 392,
          "old_api": "timestamp2tm",
          "new_api": "TIMESTAMP_NOT_FINITE",
          "old_text": "timestamp2tm(timestamp, tzp ? NULL : &tz, &tm, &fsec,\n\t\t\t\t\t\t\t\t\t  tzp ? NULL : &tzn, NULL)",
          "new_text": "TIMESTAMP_NOT_FINITE(timestamp)",
          "old_line_content": "\t\t\t\telse if (timestamp2tm(timestamp, tzp ? NULL : &tz, &tm, &fsec,",
          "new_line_content": "\t\t\t\tif (TIMESTAMP_NOT_FINITE(timestamp))",
          "content_same": false
        },
        {
          "line": 403,
          "old_api": "errmsg",
          "new_api": "ereport",
          "old_text": "errmsg(\"timestamp out of range\")",
          "new_text": "ereport(ERROR,\n\t\t\t\t\t\t\t(errcode(ERRCODE_DATETIME_VALUE_OUT_OF_RANGE),\n\t\t\t\t\t\t\t errmsg(\"timestamp out of range\")))",
          "old_line_content": "\t\t\t\t\t\t\t errmsg(\"timestamp out of range\")));",
          "new_line_content": "\t\t\t\t\tereport(ERROR,",
          "content_same": false
        },
        {
          "line": 481,
          "old_api": "ArrayGetNItems",
          "new_api": "ARR_NDIM",
          "old_text": "ArrayGetNItems(ndim, dim)",
          "new_text": "ARR_NDIM(v)",
          "old_line_content": "\tnitems = ArrayGetNItems(ndim, dim);",
          "new_line_content": "\tndim = ARR_NDIM(v);",
          "content_same": false
        },
        {
          "line": 530,
          "old_api": "DatumGetHeapTupleHeader",
          "new_api": "strlen",
          "old_text": "DatumGetHeapTupleHeader(composite)",
          "new_text": "strlen(\",\")",
          "old_line_content": "\ttd = DatumGetHeapTupleHeader(composite);",
          "new_line_content": "\tseplen = use_line_feeds ? strlen(\",\\n \") : strlen(\",\");",
          "content_same": false
        },
        {
          "line": 535,
          "old_api": "lookup_rowtype_tupdesc",
          "new_api": "HeapTupleHeaderGetTypeId",
          "old_text": "lookup_rowtype_tupdesc(tupType, tupTypmod)",
          "new_text": "HeapTupleHeaderGetTypeId(td)",
          "old_line_content": "\ttupdesc = lookup_rowtype_tupdesc(tupType, tupTypmod);",
          "new_line_content": "\ttupType = HeapTupleHeaderGetTypeId(td);",
          "content_same": false
        },
        {
          "line": 562,
          "old_api": "appendStringInfoChar",
          "new_api": "NameStr",
          "old_text": "appendStringInfoChar(result, ':')",
          "new_text": "NameStr(att->attname)",
          "old_line_content": "\t\tappendStringInfoChar(result, ':');",
          "new_line_content": "\t\tattname = NameStr(att->attname);",
          "content_same": false
        },
        {
          "line": 564,
          "old_api": "heap_getattr",
          "new_api": "appendStringInfoChar",
          "old_text": "heap_getattr(tuple, i + 1, tupdesc, &isnull)",
          "new_text": "appendStringInfoChar(result, ':')",
          "old_line_content": "\t\tval = heap_getattr(tuple, i + 1, tupdesc, &isnull);",
          "new_line_content": "\t\tappendStringInfoChar(result, ':');",
          "content_same": false
        },
        {
          "line": 600,
          "old_api": "errmsg",
          "new_api": "ereport",
          "old_text": "errmsg(\"could not determine input data type\")",
          "new_text": "ereport(ERROR,\n\t\t\t\t(errcode(ERRCODE_INVALID_PARAMETER_VALUE),\n\t\t\t\t errmsg(\"could not determine input data type\")))",
          "old_line_content": "\t\t\t\t errmsg(\"could not determine input data type\")));",
          "new_line_content": "\t\tereport(ERROR,",
          "content_same": false
        },
        {
          "line": 626,
          "old_api": "array_to_json_internal",
          "new_api": "makeStringInfo",
          "old_text": "array_to_json_internal(array, result, false)",
          "new_text": "makeStringInfo()",
          "old_line_content": "\tarray_to_json_internal(array, result, false);",
          "new_line_content": "\tresult = makeStringInfo();",
          "content_same": false
        },
        {
          "line": 628,
          "old_api": "cstring_to_text_with_len",
          "new_api": "array_to_json_internal",
          "old_text": "cstring_to_text_with_len(result->data, result->len)",
          "new_text": "array_to_json_internal(array, result, false)",
          "old_line_content": "\tPG_RETURN_TEXT_P(cstring_to_text_with_len(result->data, result->len));",
          "new_line_content": "\tarray_to_json_internal(array, result, false);",
          "content_same": false
        },
        {
          "line": 643,
          "old_api": "array_to_json_internal",
          "new_api": "makeStringInfo",
          "old_text": "array_to_json_internal(array, result, use_line_feeds)",
          "new_text": "makeStringInfo()",
          "old_line_content": "\tarray_to_json_internal(array, result, use_line_feeds);",
          "new_line_content": "\tresult = makeStringInfo();",
          "content_same": false
        },
        {
          "line": 645,
          "old_api": "cstring_to_text_with_len",
          "new_api": "array_to_json_internal",
          "old_text": "cstring_to_text_with_len(result->data, result->len)",
          "new_text": "array_to_json_internal(array, result, use_line_feeds)",
          "old_line_content": "\tPG_RETURN_TEXT_P(cstring_to_text_with_len(result->data, result->len));",
          "new_line_content": "\tarray_to_json_internal(array, result, use_line_feeds);",
          "content_same": false
        },
        {
          "line": 659,
          "old_api": "composite_to_json",
          "new_api": "makeStringInfo",
          "old_text": "composite_to_json(array, result, false)",
          "new_text": "makeStringInfo()",
          "old_line_content": "\tcomposite_to_json(array, result, false);",
          "new_line_content": "\tresult = makeStringInfo();",
          "content_same": false
        },
        {
          "line": 661,
          "old_api": "cstring_to_text_with_len",
          "new_api": "composite_to_json",
          "old_text": "cstring_to_text_with_len(result->data, result->len)",
          "new_text": "composite_to_json(array, result, false)",
          "old_line_content": "\tPG_RETURN_TEXT_P(cstring_to_text_with_len(result->data, result->len));",
          "new_line_content": "\tcomposite_to_json(array, result, false);",
          "content_same": false
        },
        {
          "line": 676,
          "old_api": "composite_to_json",
          "new_api": "makeStringInfo",
          "old_text": "composite_to_json(array, result, use_line_feeds)",
          "new_text": "makeStringInfo()",
          "old_line_content": "\tcomposite_to_json(array, result, use_line_feeds);",
          "new_line_content": "\tresult = makeStringInfo();",
          "content_same": false
        },
        {
          "line": 678,
          "old_api": "cstring_to_text_with_len",
          "new_api": "composite_to_json",
          "old_text": "cstring_to_text_with_len(result->data, result->len)",
          "new_text": "composite_to_json(array, result, use_line_feeds)",
          "old_line_content": "\tPG_RETURN_TEXT_P(cstring_to_text_with_len(result->data, result->len));",
          "new_line_content": "\tcomposite_to_json(array, result, use_line_feeds);",
          "content_same": false
        },
        {
          "line": 738,
          "old_api": "errmsg",
          "new_api": "ereport",
          "old_text": "errmsg(\"could not determine input data type\")",
          "new_text": "ereport(ERROR,\n\t\t\t\t(errcode(ERRCODE_INVALID_PARAMETER_VALUE),\n\t\t\t\t errmsg(\"could not determine input data type\")))",
          "old_line_content": "\t\t\t\t errmsg(\"could not determine input data type\")));",
          "new_line_content": "\t\tereport(ERROR,",
          "content_same": false
        },
        {
          "line": 740,
          "old_api": "json_categorize_type",
          "new_api": "errmsg",
          "old_text": "json_categorize_type(val_type, false,\n\t\t\t\t\t\t &tcategory, &outfuncoid)",
          "new_text": "errmsg(\"could not determine input data type\")",
          "old_line_content": "\tjson_categorize_type(val_type, false,",
          "new_line_content": "\t\t\t\t errmsg(\"could not determine input data type\")));",
          "content_same": false
        },
        {
          "line": 756,
          "old_api": "datum_to_json_internal",
          "new_api": "makeStringInfo",
          "old_text": "datum_to_json_internal(val, false, result, tcategory, outfuncoid,\n\t\t\t\t\t\t   false)",
          "new_text": "makeStringInfo()",
          "old_line_content": "\tdatum_to_json_internal(val, false, result, tcategory, outfuncoid,",
          "new_line_content": "\tStringInfo\tresult = makeStringInfo();",
          "content_same": false
        },
        {
          "line": 783,
          "old_api": "get_fn_expr_argtype",
          "new_api": "PG_ARGISNULL",
          "old_text": "get_fn_expr_argtype(fcinfo->flinfo, 1)",
          "new_text": "PG_ARGISNULL(0)",
          "old_line_content": "\t\tOid\t\t\targ_type = get_fn_expr_argtype(fcinfo->flinfo, 1);",
          "new_line_content": "\tif (PG_ARGISNULL(0))",
          "content_same": false
        },
        {
          "line": 788,
          "old_api": "errmsg",
          "new_api": "ereport",
          "old_text": "errmsg(\"could not determine input data type\")",
          "new_text": "ereport(ERROR,\n\t\t\t\t\t(errcode(ERRCODE_INVALID_PARAMETER_VALUE),\n\t\t\t\t\t errmsg(\"could not determine input data type\")))",
          "old_line_content": "\t\t\t\t\t errmsg(\"could not determine input data type\")));",
          "new_line_content": "\t\t\tereport(ERROR,",
          "content_same": false
        },
        {
          "line": 798,
          "old_api": "makeStringInfo",
          "new_api": "MemoryContextSwitchTo",
          "old_text": "makeStringInfo()",
          "new_text": "MemoryContextSwitchTo(aggcontext)",
          "old_line_content": "\t\tstate->str = makeStringInfo();",
          "new_line_content": "\t\toldcontext = MemoryContextSwitchTo(aggcontext);",
          "content_same": false
        },
        {
          "line": 799,
          "old_api": "MemoryContextSwitchTo",
          "new_api": "palloc",
          "old_text": "MemoryContextSwitchTo(oldcontext)",
          "new_text": "palloc(sizeof(JsonAggState))",
          "old_line_content": "\t\tMemoryContextSwitchTo(oldcontext);",
          "new_line_content": "\t\tstate = (JsonAggState *) palloc(sizeof(JsonAggState));",
          "content_same": false
        },
        {
          "line": 801,
          "old_api": "appendStringInfoChar",
          "new_api": "MemoryContextSwitchTo",
          "old_text": "appendStringInfoChar(state->str, '[')",
          "new_text": "MemoryContextSwitchTo(oldcontext)",
          "old_line_content": "\t\tappendStringInfoChar(state->str, '[');",
          "new_line_content": "\t\tMemoryContextSwitchTo(oldcontext);",
          "content_same": false
        },
        {
          "line": 819,
          "old_api": "datum_to_json_internal",
          "new_api": "PG_ARGISNULL",
          "old_text": "datum_to_json_internal((Datum) 0, true, state->str, JSONTYPE_NULL,\n\t\t\t\t\t\t\t   InvalidOid, false)",
          "new_text": "PG_ARGISNULL(1)",
          "old_line_content": "\t\tdatum_to_json_internal((Datum) 0, true, state->str, JSONTYPE_NULL,",
          "new_line_content": "\tif (PG_ARGISNULL(1))",
          "content_same": false
        },
        {
          "line": 821,
          "old_api": "PG_RETURN_POINTER",
          "new_api": "datum_to_json_internal",
          "old_text": "PG_RETURN_POINTER(state)",
          "new_text": "datum_to_json_internal((Datum) 0, true, state->str, JSONTYPE_NULL,\n\t\t\t\t\t\t\t   InvalidOid, false)",
          "old_line_content": "\t\tPG_RETURN_POINTER(state);",
          "new_line_content": "\t\tdatum_to_json_internal((Datum) 0, true, state->str, JSONTYPE_NULL,",
          "content_same": false
        },
        {
          "line": 875,
          "old_api": "PG_ARGISNULL",
          "new_api": "AggCheckCallContext",
          "old_text": "PG_ARGISNULL(0)",
          "new_text": "AggCheckCallContext(fcinfo, NULL)",
          "old_line_content": "\tstate = PG_ARGISNULL(0) ?",
          "new_line_content": "\tAssert(AggCheckCallContext(fcinfo, NULL));",
          "content_same": false
        },
        {
          "line": 877,
          "old_api": "PG_GETARG_POINTER",
          "new_api": "PG_ARGISNULL",
          "old_text": "PG_GETARG_POINTER(0)",
          "new_text": "PG_ARGISNULL(0)",
          "old_line_content": "\t\t(JsonAggState *) PG_GETARG_POINTER(0);",
          "new_line_content": "\tstate = PG_ARGISNULL(0) ?",
          "content_same": false
        },
        {
          "line": 894,
          "old_api": "hash_bytes",
          "new_api": "hash_bytes_uint32",
          "old_text": "hash_bytes((const unsigned char *) entry->key, entry->key_len)",
          "new_text": "hash_bytes_uint32(entry->object_id)",
          "old_line_content": "\thash ^= hash_bytes((const unsigned char *) entry->key, entry->key_len);",
          "new_line_content": "\tuint32\t\thash = hash_bytes_uint32(entry->object_id);",
          "content_same": false
        },
        {
          "line": 896,
          "old_api": "DatumGetUInt32",
          "new_api": "hash_bytes",
          "old_text": "DatumGetUInt32(hash)",
          "new_text": "hash_bytes((const unsigned char *) entry->key, entry->key_len)",
          "old_line_content": "\treturn DatumGetUInt32(hash);",
          "new_line_content": "\thash ^= hash_bytes((const unsigned char *) entry->key, entry->key_len);",
          "content_same": false
        },
        {
          "line": 975,
          "old_api": "initStringInfo",
          "new_api": "MemoryContextSwitchTo",
          "old_text": "initStringInfo(out)",
          "new_text": "MemoryContextSwitchTo(cxt->mcxt)",
          "old_line_content": "\t\tinitStringInfo(out);",
          "new_line_content": "\t\tMemoryContext oldcxt = MemoryContextSwitchTo(cxt->mcxt);",
          "content_same": false
        },
        {
          "line": 1020,
          "old_api": "makeStringInfo",
          "new_api": "MemoryContextSwitchTo",
          "old_text": "makeStringInfo()",
          "new_text": "MemoryContextSwitchTo(aggcontext)",
          "old_line_content": "\t\tstate->str = makeStringInfo();",
          "new_line_content": "\t\toldcontext = MemoryContextSwitchTo(aggcontext);",
          "content_same": false
        },
        {
          "line": 1022,
          "old_api": "json_unique_builder_init",
          "new_api": "makeStringInfo",
          "old_text": "json_unique_builder_init(&state->unique_check)",
          "new_text": "makeStringInfo()",
          "old_line_content": "\t\t\tjson_unique_builder_init(&state->unique_check);",
          "new_line_content": "\t\tstate->str = makeStringInfo();",
          "content_same": false
        },
        {
          "line": 1024,
          "old_api": "memset",
          "new_api": "json_unique_builder_init",
          "old_text": "memset(&state->unique_check, 0, sizeof(state->unique_check))",
          "new_text": "json_unique_builder_init(&state->unique_check)",
          "old_line_content": "\t\t\tmemset(&state->unique_check, 0, sizeof(state->unique_check));",
          "new_line_content": "\t\t\tjson_unique_builder_init(&state->unique_check);",
          "content_same": false
        },
        {
          "line": 1027,
          "old_api": "get_fn_expr_argtype",
          "new_api": "MemoryContextSwitchTo",
          "old_text": "get_fn_expr_argtype(fcinfo->flinfo, 1)",
          "new_text": "MemoryContextSwitchTo(oldcontext)",
          "old_line_content": "\t\targ_type = get_fn_expr_argtype(fcinfo->flinfo, 1);",
          "new_line_content": "\t\tMemoryContextSwitchTo(oldcontext);",
          "content_same": false
        },
        {
          "line": 1032,
          "old_api": "errmsg",
          "new_api": "ereport",
          "old_text": "errmsg(\"could not determine data type for argument %d\", 1)",
          "new_text": "ereport(ERROR,\n\t\t\t\t\t(errcode(ERRCODE_INVALID_PARAMETER_VALUE),\n\t\t\t\t\t errmsg(\"could not determine data type for argument %d\", 1)))",
          "old_line_content": "\t\t\t\t\t errmsg(\"could not determine data type for argument %d\", 1)));",
          "new_line_content": "\t\t\tereport(ERROR,",
          "content_same": false
        },
        {
          "line": 1034,
          "old_api": "json_categorize_type",
          "new_api": "errmsg",
          "old_text": "json_categorize_type(arg_type, false, &state->key_category,\n\t\t\t\t\t\t\t &state->key_output_func)",
          "new_text": "errmsg(\"could not determine data type for argument %d\", 1)",
          "old_line_content": "\t\tjson_categorize_type(arg_type, false, &state->key_category,",
          "new_line_content": "\t\t\t\t\t errmsg(\"could not determine data type for argument %d\", 1)));",
          "content_same": false
        },
        {
          "line": 1042,
          "old_api": "errmsg",
          "new_api": "ereport",
          "old_text": "errmsg(\"could not determine data type for argument %d\", 2)",
          "new_text": "ereport(ERROR,\n\t\t\t\t\t(errcode(ERRCODE_INVALID_PARAMETER_VALUE),\n\t\t\t\t\t errmsg(\"could not determine data type for argument %d\", 2)))",
          "old_line_content": "\t\t\t\t\t errmsg(\"could not determine data type for argument %d\", 2)));",
          "new_line_content": "\t\t\tereport(ERROR,",
          "content_same": false
        },
        {
          "line": 1044,
          "old_api": "json_categorize_type",
          "new_api": "errmsg",
          "old_text": "json_categorize_type(arg_type, false, &state->val_category,\n\t\t\t\t\t\t\t &state->val_output_func)",
          "new_text": "errmsg(\"could not determine data type for argument %d\", 2)",
          "old_line_content": "\t\tjson_categorize_type(arg_type, false, &state->val_category,",
          "new_line_content": "\t\t\t\t\t errmsg(\"could not determine data type for argument %d\", 2)));",
          "content_same": false
        },
        {
          "line": 1064,
          "old_api": "errcode",
          "new_api": "PG_ARGISNULL",
          "old_text": "errcode(ERRCODE_NULL_VALUE_NOT_ALLOWED)",
          "new_text": "PG_ARGISNULL(1)",
          "old_line_content": "\t\t\t\t(errcode(ERRCODE_NULL_VALUE_NOT_ALLOWED),",
          "new_line_content": "\tif (PG_ARGISNULL(1))",
          "content_same": false
        },
        {
          "line": 1065,
          "old_api": "errmsg",
          "new_api": "ereport",
          "old_text": "errmsg(\"null value not allowed for object key\")",
          "new_text": "ereport(ERROR,\n\t\t\t\t(errcode(ERRCODE_NULL_VALUE_NOT_ALLOWED),\n\t\t\t\t errmsg(\"null value not allowed for object key\")))",
          "old_line_content": "\t\t\t\t errmsg(\"null value not allowed for object key\")));",
          "new_line_content": "\t\tereport(ERROR,",
          "content_same": false
        },
        {
          "line": 1080,
          "old_api": "json_unique_builder_get_throwawaybuf",
          "new_api": "PG_RETURN_POINTER",
          "old_text": "json_unique_builder_get_throwawaybuf(&state->unique_check)",
          "new_text": "PG_RETURN_POINTER(state)",
          "old_line_content": "\t\tout = json_unique_builder_get_throwawaybuf(&state->unique_check);",
          "new_line_content": "\t\t\tPG_RETURN_POINTER(state);",
          "content_same": false
        },
        {
          "line": 1107,
          "old_api": "errcode",
          "new_api": "json_unique_check_key",
          "old_text": "errcode(ERRCODE_DUPLICATE_JSON_OBJECT_KEY_VALUE)",
          "new_text": "json_unique_check_key(&state->unique_check.check, key, 0)",
          "old_line_content": "\t\t\t\t\terrcode(ERRCODE_DUPLICATE_JSON_OBJECT_KEY_VALUE),",
          "new_line_content": "\t\tif (!json_unique_check_key(&state->unique_check.check, key, 0))",
          "content_same": false
        },
        {
          "line": 1108,
          "old_api": "errmsg",
          "new_api": "ereport",
          "old_text": "errmsg(\"duplicate JSON object key value: %s\", key)",
          "new_text": "ereport(ERROR,\n\t\t\t\t\terrcode(ERRCODE_DUPLICATE_JSON_OBJECT_KEY_VALUE),\n\t\t\t\t\terrmsg(\"duplicate JSON object key value: %s\", key))",
          "old_line_content": "\t\t\t\t\terrmsg(\"duplicate JSON object key value: %s\", key));",
          "new_line_content": "\t\t\tereport(ERROR,",
          "content_same": false
        },
        {
          "line": 1116,
          "old_api": "PG_ARGISNULL",
          "new_api": "appendStringInfoString",
          "old_text": "PG_ARGISNULL(2)",
          "new_text": "appendStringInfoString(state->str, \" : \")",
          "old_line_content": "\tif (PG_ARGISNULL(2))",
          "new_line_content": "\tappendStringInfoString(state->str, \" : \");",
          "content_same": false
        },
        {
          "line": 1121,
          "old_api": "PG_ARGISNULL",
          "new_api": "PG_GETARG_DATUM",
          "old_text": "PG_ARGISNULL(2)",
          "new_text": "PG_GETARG_DATUM(2)",
          "old_line_content": "\tdatum_to_json_internal(arg, PG_ARGISNULL(2), state->str,",
          "new_line_content": "\t\targ = PG_GETARG_DATUM(2);",
          "content_same": false
        },
        {
          "line": 1175,
          "old_api": "PG_GETARG_POINTER",
          "new_api": "AggCheckCallContext",
          "old_text": "PG_GETARG_POINTER(0)",
          "new_text": "AggCheckCallContext(fcinfo, NULL)",
          "old_line_content": "\tstate = PG_ARGISNULL(0) ? NULL : (JsonAggState *) PG_GETARG_POINTER(0);",
          "new_line_content": "\tAssert(AggCheckCallContext(fcinfo, NULL));",
          "content_same": false
        },
        {
          "line": 1198,
          "old_api": "SET_VARSIZE",
          "new_api": "palloc",
          "old_text": "SET_VARSIZE(result, buflen + addlen + VARHDRSZ)",
          "new_text": "palloc(buflen + addlen + VARHDRSZ)",
          "old_line_content": "\tSET_VARSIZE(result, buflen + addlen + VARHDRSZ);",
          "new_line_content": "\ttext\t   *result = (text *) palloc(buflen + addlen + VARHDRSZ);",
          "content_same": false
        },
        {
          "line": 1200,
          "old_api": "VARDATA",
          "new_api": "SET_VARSIZE",
          "old_text": "VARDATA(result)",
          "new_text": "SET_VARSIZE(result, buflen + addlen + VARHDRSZ)",
          "old_line_content": "\tmemcpy(VARDATA(result) + buflen, addon, addlen);",
          "new_line_content": "\tSET_VARSIZE(result, buflen + addlen + VARHDRSZ);",
          "content_same": false
        },
        {
          "line": 1217,
          "old_api": "errmsg",
          "new_api": "ereport",
          "old_text": "errmsg(\"argument list must have even number of elements\")",
          "new_text": "ereport(ERROR,\n\t\t\t\t(errcode(ERRCODE_INVALID_PARAMETER_VALUE),\n\t\t\t\t errmsg(\"argument list must have even number of elements\"),\n\t\t/* translator: %s is a SQL function name */\n\t\t\t\t errhint(\"The arguments of %s must consist of alternating keys and values.\",\n\t\t\t\t\t\t \"json_build_object()\")))",
          "old_line_content": "\t\t\t\t errmsg(\"argument list must have even number of elements\"),",
          "new_line_content": "\t\tereport(ERROR,",
          "content_same": false
        },
        {
          "line": 1219,
          "old_api": "errhint",
          "new_api": "errmsg",
          "old_text": "errhint(\"The arguments of %s must consist of alternating keys and values.\",\n\t\t\t\t\t\t \"json_build_object()\")",
          "new_text": "errmsg(\"argument list must have even number of elements\")",
          "old_line_content": "\t\t\t\t errhint(\"The arguments of %s must consist of alternating keys and values.\",",
          "new_line_content": "\t\t\t\t errmsg(\"argument list must have even number of elements\"),",
          "content_same": false
        },
        {
          "line": 1224,
          "old_api": "appendStringInfoChar",
          "new_api": "makeStringInfo",
          "old_text": "appendStringInfoChar(result, '{')",
          "new_text": "makeStringInfo()",
          "old_line_content": "\tappendStringInfoChar(result, '{');",
          "new_line_content": "\tresult = makeStringInfo();",
          "content_same": false
        },
        {
          "line": 1257,
          "old_api": "errmsg",
          "new_api": "ereport",
          "old_text": "errmsg(\"null value not allowed for object key\")",
          "new_text": "ereport(ERROR,\n\t\t\t\t\t(errcode(ERRCODE_NULL_VALUE_NOT_ALLOWED),\n\t\t\t\t\t errmsg(\"null value not allowed for object key\")))",
          "old_line_content": "\t\t\t\t\t errmsg(\"null value not allowed for object key\")));",
          "new_line_content": "\t\t\tereport(ERROR,",
          "content_same": false
        },
        {
          "line": 1271,
          "old_api": "errcode",
          "new_api": "json_unique_check_key",
          "old_text": "errcode(ERRCODE_DUPLICATE_JSON_OBJECT_KEY_VALUE)",
          "new_text": "json_unique_check_key(&unique_check.check, key, 0)",
          "old_line_content": "\t\t\t\t\t\terrcode(ERRCODE_DUPLICATE_JSON_OBJECT_KEY_VALUE),",
          "new_line_content": "\t\t\tif (!json_unique_check_key(&unique_check.check, key, 0))",
          "content_same": false
        },
        {
          "line": 1272,
          "old_api": "errmsg",
          "new_api": "ereport",
          "old_text": "errmsg(\"duplicate JSON object key value: %s\", key)",
          "new_text": "ereport(ERROR,\n\t\t\t\t\t\terrcode(ERRCODE_DUPLICATE_JSON_OBJECT_KEY_VALUE),\n\t\t\t\t\t\terrmsg(\"duplicate JSON object key value: %s\", key))",
          "old_line_content": "\t\t\t\t\t\terrmsg(\"duplicate JSON object key value: %s\", key));",
          "new_line_content": "\t\t\t\tereport(ERROR,",
          "content_same": false
        },
        {
          "line": 1286,
          "old_api": "cstring_to_text_with_len",
          "new_api": "appendStringInfoChar",
          "old_text": "cstring_to_text_with_len(result->data, result->len)",
          "new_text": "appendStringInfoChar(result, '}')",
          "old_line_content": "\treturn PointerGetDatum(cstring_to_text_with_len(result->data, result->len));",
          "new_line_content": "\tappendStringInfoChar(result, '}');",
          "content_same": false
        },
        {
          "line": 1306,
          "old_api": "json_build_object_worker",
          "new_api": "PG_RETURN_NULL",
          "old_text": "json_build_object_worker(nargs, args, nulls, types, false, false)",
          "new_text": "PG_RETURN_NULL()",
          "old_line_content": "\tPG_RETURN_DATUM(json_build_object_worker(nargs, args, nulls, types, false, false));",
          "new_line_content": "\t\tPG_RETURN_NULL();",
          "content_same": false
        },
        {
          "line": 1328,
          "old_api": "appendStringInfoChar",
          "new_api": "makeStringInfo",
          "old_text": "appendStringInfoChar(result, '[')",
          "new_text": "makeStringInfo()",
          "old_line_content": "\tappendStringInfoChar(result, '[');",
          "new_line_content": "\tresult = makeStringInfo();",
          "content_same": false
        },
        {
          "line": 1337,
          "old_api": "add_json",
          "new_api": "appendStringInfoString",
          "old_text": "add_json(args[i], nulls[i], result, types[i], false)",
          "new_text": "appendStringInfoString(result, sep)",
          "old_line_content": "\t\tadd_json(args[i], nulls[i], result, types[i], false);",
          "new_line_content": "\t\tappendStringInfoString(result, sep);",
          "content_same": false
        },
        {
          "line": 1342,
          "old_api": "cstring_to_text_with_len",
          "new_api": "appendStringInfoChar",
          "old_text": "cstring_to_text_with_len(result->data, result->len)",
          "new_text": "appendStringInfoChar(result, ']')",
          "old_line_content": "\treturn PointerGetDatum(cstring_to_text_with_len(result->data, result->len));",
          "new_line_content": "\tappendStringInfoChar(result, ']');",
          "content_same": false
        },
        {
          "line": 1362,
          "old_api": "json_build_array_worker",
          "new_api": "PG_RETURN_NULL",
          "old_text": "json_build_array_worker(nargs, args, nulls, types, false)",
          "new_text": "PG_RETURN_NULL()",
          "old_line_content": "\tPG_RETURN_DATUM(json_build_array_worker(nargs, args, nulls, types, false));",
          "new_line_content": "\t\tPG_RETURN_NULL();",
          "content_same": false
        },
        {
          "line": 1403,
          "old_api": "errcode",
          "new_api": "ARR_DIMS",
          "old_text": "errcode(ERRCODE_ARRAY_SUBSCRIPT_ERROR)",
          "new_text": "ARR_DIMS(in_array)",
          "old_line_content": "\t\t\t\t\t\t(errcode(ERRCODE_ARRAY_SUBSCRIPT_ERROR),",
          "new_line_content": "\t\t\tif ((ARR_DIMS(in_array)[0]) % 2)",
          "content_same": false
        },
        {
          "line": 1404,
          "old_api": "errmsg",
          "new_api": "ereport",
          "old_text": "errmsg(\"array must have even number of elements\")",
          "new_text": "ereport(ERROR,\n\t\t\t\t\t\t(errcode(ERRCODE_ARRAY_SUBSCRIPT_ERROR),\n\t\t\t\t\t\t errmsg(\"array must have even number of elements\")))",
          "old_line_content": "\t\t\t\t\t\t errmsg(\"array must have even number of elements\")));",
          "new_line_content": "\t\t\t\tereport(ERROR,",
          "content_same": false
        },
        {
          "line": 1410,
          "old_api": "errcode",
          "new_api": "ARR_DIMS",
          "old_text": "errcode(ERRCODE_ARRAY_SUBSCRIPT_ERROR)",
          "new_text": "ARR_DIMS(in_array)",
          "old_line_content": "\t\t\t\t\t\t(errcode(ERRCODE_ARRAY_SUBSCRIPT_ERROR),",
          "new_line_content": "\t\t\tif ((ARR_DIMS(in_array)[1]) != 2)",
          "content_same": false
        },
        {
          "line": 1411,
          "old_api": "errmsg",
          "new_api": "ereport",
          "old_text": "errmsg(\"array must have two columns\")",
          "new_text": "ereport(ERROR,\n\t\t\t\t\t\t(errcode(ERRCODE_ARRAY_SUBSCRIPT_ERROR),\n\t\t\t\t\t\t errmsg(\"array must have two columns\")))",
          "old_line_content": "\t\t\t\t\t\t errmsg(\"array must have two columns\")));",
          "new_line_content": "\t\t\t\tereport(ERROR,",
          "content_same": false
        },
        {
          "line": 1417,
          "old_api": "errmsg",
          "new_api": "ereport",
          "old_text": "errmsg(\"wrong number of array subscripts\")",
          "new_text": "ereport(ERROR,\n\t\t\t\t\t(errcode(ERRCODE_ARRAY_SUBSCRIPT_ERROR),\n\t\t\t\t\t errmsg(\"wrong number of array subscripts\")))",
          "old_line_content": "\t\t\t\t\t errmsg(\"wrong number of array subscripts\")));",
          "new_line_content": "\t\t\tereport(ERROR,",
          "content_same": false
        },
        {
          "line": 1426,
          "old_api": "appendStringInfoChar",
          "new_api": "initStringInfo",
          "old_text": "appendStringInfoChar(&result, '{')",
          "new_text": "initStringInfo(&result)",
          "old_line_content": "\tappendStringInfoChar(&result, '{');",
          "new_line_content": "\tinitStringInfo(&result);",
          "content_same": false
        },
        {
          "line": 1433,
          "old_api": "errmsg",
          "new_api": "ereport",
          "old_text": "errmsg(\"null value not allowed for object key\")",
          "new_text": "ereport(ERROR,\n\t\t\t\t\t(errcode(ERRCODE_NULL_VALUE_NOT_ALLOWED),\n\t\t\t\t\t errmsg(\"null value not allowed for object key\")))",
          "old_line_content": "\t\t\t\t\t errmsg(\"null value not allowed for object key\")));",
          "new_line_content": "\t\t\tereport(ERROR,",
          "content_same": false
        },
        {
          "line": 1435,
          "old_api": "TextDatumGetCString",
          "new_api": "errmsg",
          "old_text": "TextDatumGetCString(in_datums[i * 2])",
          "new_text": "errmsg(\"null value not allowed for object key\")",
          "old_line_content": "\t\tv = TextDatumGetCString(in_datums[i * 2]);",
          "new_line_content": "\t\t\t\t\t errmsg(\"null value not allowed for object key\")));",
          "content_same": false
        },
        {
          "line": 1437,
          "old_api": "appendStringInfoString",
          "new_api": "TextDatumGetCString",
          "old_text": "appendStringInfoString(&result, \", \")",
          "new_text": "TextDatumGetCString(in_datums[i * 2])",
          "old_line_content": "\t\t\tappendStringInfoString(&result, \", \");",
          "new_line_content": "\t\tv = TextDatumGetCString(in_datums[i * 2]);",
          "content_same": false
        },
        {
          "line": 1440,
          "old_api": "pfree",
          "new_api": "escape_json",
          "old_text": "pfree(v)",
          "new_text": "escape_json(&result, v)",
          "old_line_content": "\t\tpfree(v);",
          "new_line_content": "\t\tescape_json(&result, v);",
          "content_same": false
        },
        {
          "line": 1442,
          "old_api": "appendStringInfoString",
          "new_api": "pfree",
          "old_text": "appendStringInfoString(&result, \"null\")",
          "new_text": "pfree(v)",
          "old_line_content": "\t\t\tappendStringInfoString(&result, \"null\");",
          "new_line_content": "\t\tpfree(v);",
          "content_same": false
        },
        {
          "line": 1447,
          "old_api": "pfree",
          "new_api": "TextDatumGetCString",
          "old_text": "pfree(v)",
          "new_text": "TextDatumGetCString(in_datums[i * 2 + 1])",
          "old_line_content": "\t\t\tpfree(v);",
          "new_line_content": "\t\t\tv = TextDatumGetCString(in_datums[i * 2 + 1]);",
          "content_same": false
        },
        {
          "line": 1453,
          "old_api": "pfree",
          "new_api": "appendStringInfoChar",
          "old_text": "pfree(in_datums)",
          "new_text": "appendStringInfoChar(&result, '}')",
          "old_line_content": "\tpfree(in_datums);",
          "new_line_content": "\tappendStringInfoChar(&result, '}');",
          "content_same": false
        },
        {
          "line": 1456,
          "old_api": "cstring_to_text_with_len",
          "new_api": "pfree",
          "old_text": "cstring_to_text_with_len(result.data, result.len)",
          "new_text": "pfree(in_nulls)",
          "old_line_content": "\trval = cstring_to_text_with_len(result.data, result.len);",
          "new_line_content": "\tpfree(in_nulls);",
          "content_same": false
        },
        {
          "line": 1459,
          "old_api": "PG_RETURN_TEXT_P",
          "new_api": "pfree",
          "old_text": "PG_RETURN_TEXT_P(rval)",
          "new_text": "pfree(result.data)",
          "old_line_content": "\tPG_RETURN_TEXT_P(rval);",
          "new_line_content": "\tpfree(result.data);",
          "content_same": false
        },
        {
          "line": 1473,
          "old_api": "ARR_NDIM",
          "new_api": "PG_GETARG_ARRAYTYPE_P",
          "old_text": "ARR_NDIM(key_array)",
          "new_text": "PG_GETARG_ARRAYTYPE_P(0)",
          "old_line_content": "\tint\t\t\tnkdims = ARR_NDIM(key_array);",
          "new_line_content": "\tArrayType  *key_array = PG_GETARG_ARRAYTYPE_P(0);",
          "content_same": false
        },
        {
          "line": 1474,
          "old_api": "ARR_NDIM",
          "new_api": "PG_GETARG_ARRAYTYPE_P",
          "old_text": "ARR_NDIM(val_array)",
          "new_text": "PG_GETARG_ARRAYTYPE_P(1)",
          "old_line_content": "\tint\t\t\tnvdims = ARR_NDIM(val_array);",
          "new_line_content": "\tArrayType  *val_array = PG_GETARG_ARRAYTYPE_P(1);",
          "content_same": false
        },
        {
          "line": 1489,
          "old_api": "errmsg",
          "new_api": "ereport",
          "old_text": "errmsg(\"wrong number of array subscripts\")",
          "new_text": "ereport(ERROR,\n\t\t\t\t(errcode(ERRCODE_ARRAY_SUBSCRIPT_ERROR),\n\t\t\t\t errmsg(\"wrong number of array subscripts\")))",
          "old_line_content": "\t\t\t\t errmsg(\"wrong number of array subscripts\")));",
          "new_line_content": "\t\tereport(ERROR,",
          "content_same": false
        },
        {
          "line": 1494,
          "old_api": "deconstruct_array_builtin",
          "new_api": "CStringGetTextDatum",
          "old_text": "deconstruct_array_builtin(key_array, TEXTOID, &key_datums, &key_nulls, &key_count)",
          "new_text": "CStringGetTextDatum(\"{}\")",
          "old_line_content": "\tdeconstruct_array_builtin(key_array, TEXTOID, &key_datums, &key_nulls, &key_count);",
          "new_line_content": "\t\tPG_RETURN_DATUM(CStringGetTextDatum(\"{}\"));",
          "content_same": false
        },
        {
          "line": 1500,
          "old_api": "errmsg",
          "new_api": "ereport",
          "old_text": "errmsg(\"mismatched array dimensions\")",
          "new_text": "ereport(ERROR,\n\t\t\t\t(errcode(ERRCODE_ARRAY_SUBSCRIPT_ERROR),\n\t\t\t\t errmsg(\"mismatched array dimensions\")))",
          "old_line_content": "\t\t\t\t errmsg(\"mismatched array dimensions\")));",
          "new_line_content": "\t\tereport(ERROR,",
          "content_same": false
        },
        {
          "line": 1502,
          "old_api": "initStringInfo",
          "new_api": "errmsg",
          "old_text": "initStringInfo(&result)",
          "new_text": "errmsg(\"mismatched array dimensions\")",
          "old_line_content": "\tinitStringInfo(&result);",
          "new_line_content": "\t\t\t\t errmsg(\"mismatched array dimensions\")));",
          "content_same": false
        },
        {
          "line": 1504,
          "old_api": "appendStringInfoChar",
          "new_api": "initStringInfo",
          "old_text": "appendStringInfoChar(&result, '{')",
          "new_text": "initStringInfo(&result)",
          "old_line_content": "\tappendStringInfoChar(&result, '{');",
          "new_line_content": "\tinitStringInfo(&result);",
          "content_same": false
        },
        {
          "line": 1511,
          "old_api": "errmsg",
          "new_api": "ereport",
          "old_text": "errmsg(\"null value not allowed for object key\")",
          "new_text": "ereport(ERROR,\n\t\t\t\t\t(errcode(ERRCODE_NULL_VALUE_NOT_ALLOWED),\n\t\t\t\t\t errmsg(\"null value not allowed for object key\")))",
          "old_line_content": "\t\t\t\t\t errmsg(\"null value not allowed for object key\")));",
          "new_line_content": "\t\t\tereport(ERROR,",
          "content_same": false
        },
        {
          "line": 1513,
          "old_api": "TextDatumGetCString",
          "new_api": "errmsg",
          "old_text": "TextDatumGetCString(key_datums[i])",
          "new_text": "errmsg(\"null value not allowed for object key\")",
          "old_line_content": "\t\tv = TextDatumGetCString(key_datums[i]);",
          "new_line_content": "\t\t\t\t\t errmsg(\"null value not allowed for object key\")));",
          "content_same": false
        },
        {
          "line": 1515,
          "old_api": "appendStringInfoString",
          "new_api": "TextDatumGetCString",
          "old_text": "appendStringInfoString(&result, \", \")",
          "new_text": "TextDatumGetCString(key_datums[i])",
          "old_line_content": "\t\t\tappendStringInfoString(&result, \", \");",
          "new_line_content": "\t\tv = TextDatumGetCString(key_datums[i]);",
          "content_same": false
        },
        {
          "line": 1518,
          "old_api": "pfree",
          "new_api": "escape_json",
          "old_text": "pfree(v)",
          "new_text": "escape_json(&result, v)",
          "old_line_content": "\t\tpfree(v);",
          "new_line_content": "\t\tescape_json(&result, v);",
          "content_same": false
        },
        {
          "line": 1520,
          "old_api": "appendStringInfoString",
          "new_api": "pfree",
          "old_text": "appendStringInfoString(&result, \"null\")",
          "new_text": "pfree(v)",
          "old_line_content": "\t\t\tappendStringInfoString(&result, \"null\");",
          "new_line_content": "\t\tpfree(v);",
          "content_same": false
        },
        {
          "line": 1525,
          "old_api": "pfree",
          "new_api": "TextDatumGetCString",
          "old_text": "pfree(v)",
          "new_text": "TextDatumGetCString(val_datums[i])",
          "old_line_content": "\t\t\tpfree(v);",
          "new_line_content": "\t\t\tv = TextDatumGetCString(val_datums[i]);",
          "content_same": false
        },
        {
          "line": 1531,
          "old_api": "pfree",
          "new_api": "appendStringInfoChar",
          "old_text": "pfree(key_datums)",
          "new_text": "appendStringInfoChar(&result, '}')",
          "old_line_content": "\tpfree(key_datums);",
          "new_line_content": "\tappendStringInfoChar(&result, '}');",
          "content_same": false
        },
        {
          "line": 1536,
          "old_api": "cstring_to_text_with_len",
          "new_api": "pfree",
          "old_text": "cstring_to_text_with_len(result.data, result.len)",
          "new_text": "pfree(val_nulls)",
          "old_line_content": "\trval = cstring_to_text_with_len(result.data, result.len);",
          "new_line_content": "\tpfree(val_nulls);",
          "content_same": false
        },
        {
          "line": 1539,
          "old_api": "PG_RETURN_TEXT_P",
          "new_api": "pfree",
          "old_text": "PG_RETURN_TEXT_P(rval)",
          "new_text": "pfree(result.data)",
          "old_line_content": "\tPG_RETURN_TEXT_P(rval);",
          "new_line_content": "\tpfree(result.data);",
          "content_same": false
        },
        {
          "line": 1581,
          "old_api": "appendStringInfoCharMacro",
          "new_api": "appendStringInfo",
          "old_text": "appendStringInfoCharMacro(buf, *p)",
          "new_text": "appendStringInfo(buf, \"\\\\u%04x\", (int) *p)",
          "old_line_content": "\t\t\t\t\tappendStringInfoCharMacro(buf, *p);",
          "new_line_content": "\t\t\t\t\tappendStringInfo(buf, \"\\\\u%04x\", (int) *p);",
          "content_same": false
        },
        {
          "line": 1686,
          "old_api": "errmsg",
          "new_api": "ereport",
          "old_text": "errmsg(\"duplicate JSON object key value\")",
          "new_text": "ereport(ERROR,\n\t\t\t\t\t(errcode(ERRCODE_DUPLICATE_JSON_OBJECT_KEY_VALUE),\n\t\t\t\t\t errmsg(\"duplicate JSON object key value\")))",
          "old_line_content": "\t\t\t\t\t errmsg(\"duplicate JSON object key value\")));",
          "new_line_content": "\t\t\tereport(ERROR,",
          "content_same": false
        },
        {
          "line": 1721,
          "old_api": "json_errsave_error",
          "new_api": "json_lex",
          "old_text": "json_errsave_error(result, &lex, NULL)",
          "new_text": "json_lex(&lex)",
          "old_line_content": "\t\tjson_errsave_error(result, &lex, NULL);",
          "new_line_content": "\tresult = json_lex(&lex);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 1026,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(&state->unique_check, 0, sizeof(state->unique_check))",
          "old_line_content": "",
          "new_line_content": "\t\t\tmemset(&state->unique_check, 0, sizeof(state->unique_check));",
          "content_same": false
        },
        {
          "line": 1538,
          "old_api": null,
          "new_api": "cstring_to_text_with_len",
          "old_text": null,
          "new_text": "cstring_to_text_with_len(result.data, result.len)",
          "old_line_content": "",
          "new_line_content": "\trval = cstring_to_text_with_len(result.data, result.len);",
          "content_same": false
        },
        {
          "line": 1029,
          "old_api": null,
          "new_api": "get_fn_expr_argtype",
          "old_text": null,
          "new_text": "get_fn_expr_argtype(fcinfo->flinfo, 1)",
          "old_line_content": "\t\tif (arg_type == InvalidOid)",
          "new_line_content": "\t\targ_type = get_fn_expr_argtype(fcinfo->flinfo, 1);",
          "content_same": false
        },
        {
          "line": 1541,
          "old_api": null,
          "new_api": "PG_RETURN_TEXT_P",
          "old_text": null,
          "new_text": "PG_RETURN_TEXT_P(rval)",
          "old_line_content": "",
          "new_line_content": "\tPG_RETURN_TEXT_P(rval);",
          "content_same": false
        },
        {
          "line": 1033,
          "old_api": null,
          "new_api": "errcode",
          "old_text": null,
          "new_text": "errcode(ERRCODE_INVALID_PARAMETER_VALUE)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t\t(errcode(ERRCODE_INVALID_PARAMETER_VALUE),",
          "content_same": false
        },
        {
          "line": 1036,
          "old_api": null,
          "new_api": "json_categorize_type",
          "old_text": null,
          "new_text": "json_categorize_type(arg_type, false, &state->key_category,\n\t\t\t\t\t\t\t &state->key_output_func)",
          "old_line_content": "",
          "new_line_content": "\t\tjson_categorize_type(arg_type, false, &state->key_category,",
          "content_same": false
        },
        {
          "line": 1039,
          "old_api": null,
          "new_api": "get_fn_expr_argtype",
          "old_text": null,
          "new_text": "get_fn_expr_argtype(fcinfo->flinfo, 2)",
          "old_line_content": "\t\tif (arg_type == InvalidOid)",
          "new_line_content": "\t\targ_type = get_fn_expr_argtype(fcinfo->flinfo, 2);",
          "content_same": false
        },
        {
          "line": 1553,
          "old_api": null,
          "new_api": "appendStringInfoCharMacro",
          "old_text": null,
          "new_text": "appendStringInfoCharMacro(buf, '\"')",
          "old_line_content": "\t{",
          "new_line_content": "\tappendStringInfoCharMacro(buf, '\"');",
          "content_same": false
        },
        {
          "line": 1043,
          "old_api": null,
          "new_api": "errcode",
          "old_text": null,
          "new_text": "errcode(ERRCODE_INVALID_PARAMETER_VALUE)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t\t(errcode(ERRCODE_INVALID_PARAMETER_VALUE),",
          "content_same": false
        },
        {
          "line": 532,
          "old_api": null,
          "new_api": "DatumGetHeapTupleHeader",
          "old_text": null,
          "new_text": "DatumGetHeapTupleHeader(composite)",
          "old_line_content": "\t/* Extract rowtype info and find a tupdesc */",
          "new_line_content": "\ttd = DatumGetHeapTupleHeader(composite);",
          "content_same": false
        },
        {
          "line": 1046,
          "old_api": null,
          "new_api": "json_categorize_type",
          "old_text": null,
          "new_text": "json_categorize_type(arg_type, false, &state->val_category,\n\t\t\t\t\t\t\t &state->val_output_func)",
          "old_line_content": "",
          "new_line_content": "\t\tjson_categorize_type(arg_type, false, &state->val_category,",
          "content_same": false
        },
        {
          "line": 1559,
          "old_api": null,
          "new_api": "appendStringInfoString",
          "old_text": null,
          "new_text": "appendStringInfoString(buf, \"\\\\b\")",
          "old_line_content": "\t\t\tcase '\\f':",
          "new_line_content": "\t\t\t\tappendStringInfoString(buf, \"\\\\b\");",
          "content_same": false
        },
        {
          "line": 536,
          "old_api": null,
          "new_api": "HeapTupleHeaderGetTypMod",
          "old_text": null,
          "new_text": "HeapTupleHeaderGetTypMod(td)",
          "old_line_content": "",
          "new_line_content": "\ttupTypmod = HeapTupleHeaderGetTypMod(td);",
          "content_same": false
        },
        {
          "line": 537,
          "old_api": null,
          "new_api": "lookup_rowtype_tupdesc",
          "old_text": null,
          "new_text": "lookup_rowtype_tupdesc(tupType, tupTypmod)",
          "old_line_content": "\t/* Build a temporary HeapTuple control structure */",
          "new_line_content": "\ttupdesc = lookup_rowtype_tupdesc(tupType, tupTypmod);",
          "content_same": false
        },
        {
          "line": 1049,
          "old_api": null,
          "new_api": "appendStringInfoString",
          "old_text": null,
          "new_text": "appendStringInfoString(state->str, \"{ \")",
          "old_line_content": "\telse",
          "new_line_content": "\t\tappendStringInfoString(state->str, \"{ \");",
          "content_same": false
        },
        {
          "line": 1562,
          "old_api": null,
          "new_api": "appendStringInfoString",
          "old_text": null,
          "new_text": "appendStringInfoString(buf, \"\\\\f\")",
          "old_line_content": "\t\t\tcase '\\n':",
          "new_line_content": "\t\t\t\tappendStringInfoString(buf, \"\\\\f\");",
          "content_same": false
        },
        {
          "line": 540,
          "old_api": null,
          "new_api": "HeapTupleHeaderGetDatumLength",
          "old_text": null,
          "new_text": "HeapTupleHeaderGetDatumLength(td)",
          "old_line_content": "\ttuple = &tmptup;",
          "new_line_content": "\ttmptup.t_len = HeapTupleHeaderGetDatumLength(td);",
          "content_same": false
        },
        {
          "line": 1053,
          "old_api": null,
          "new_api": "PG_GETARG_POINTER",
          "old_text": null,
          "new_text": "PG_GETARG_POINTER(0)",
          "old_line_content": "",
          "new_line_content": "\t\tstate = (JsonAggState *) PG_GETARG_POINTER(0);",
          "content_same": false
        },
        {
          "line": 1565,
          "old_api": null,
          "new_api": "appendStringInfoString",
          "old_text": null,
          "new_text": "appendStringInfoString(buf, \"\\\\n\")",
          "old_line_content": "\t\t\tcase '\\r':",
          "new_line_content": "\t\t\t\tappendStringInfoString(buf, \"\\\\n\");",
          "content_same": false
        },
        {
          "line": 544,
          "old_api": null,
          "new_api": "appendStringInfoChar",
          "old_text": null,
          "new_text": "appendStringInfoChar(result, '{')",
          "old_line_content": "\tfor (i = 0; i < tupdesc->natts; i++)",
          "new_line_content": "\tappendStringInfoChar(result, '{');",
          "content_same": false
        },
        {
          "line": 1568,
          "old_api": null,
          "new_api": "appendStringInfoString",
          "old_text": null,
          "new_text": "appendStringInfoString(buf, \"\\\\r\")",
          "old_line_content": "\t\t\tcase '\\t':",
          "new_line_content": "\t\t\t\tappendStringInfoString(buf, \"\\\\r\");",
          "content_same": false
        },
        {
          "line": 1571,
          "old_api": null,
          "new_api": "appendStringInfoString",
          "old_text": null,
          "new_text": "appendStringInfoString(buf, \"\\\\t\")",
          "old_line_content": "\t\t\tcase '\"':",
          "new_line_content": "\t\t\t\tappendStringInfoString(buf, \"\\\\t\");",
          "content_same": false
        },
        {
          "line": 1574,
          "old_api": null,
          "new_api": "appendStringInfoString",
          "old_text": null,
          "new_text": "appendStringInfoString(buf, \"\\\\\\\"\")",
          "old_line_content": "\t\t\tcase '\\\\':",
          "new_line_content": "\t\t\t\tappendStringInfoString(buf, \"\\\\\\\"\");",
          "content_same": false
        },
        {
          "line": 553,
          "old_api": null,
          "new_api": "TupleDescAttr",
          "old_text": null,
          "new_text": "TupleDescAttr(tupdesc, i)",
          "old_line_content": "\t\tif (att->attisdropped)",
          "new_line_content": "\t\tForm_pg_attribute att = TupleDescAttr(tupdesc, i);",
          "content_same": false
        },
        {
          "line": 1066,
          "old_api": null,
          "new_api": "errcode",
          "old_text": null,
          "new_text": "errcode(ERRCODE_NULL_VALUE_NOT_ALLOWED)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t(errcode(ERRCODE_NULL_VALUE_NOT_ALLOWED),",
          "content_same": false
        },
        {
          "line": 1067,
          "old_api": null,
          "new_api": "errmsg",
          "old_text": null,
          "new_text": "errmsg(\"null value not allowed for object key\")",
          "old_line_content": "\t/* Skip null values if absent_on_null */",
          "new_line_content": "\t\t\t\t errmsg(\"null value not allowed for object key\")));",
          "content_same": false
        },
        {
          "line": 1577,
          "old_api": null,
          "new_api": "appendStringInfoString",
          "old_text": null,
          "new_text": "appendStringInfoString(buf, \"\\\\\\\\\")",
          "old_line_content": "\t\t\tdefault:",
          "new_line_content": "\t\t\t\tappendStringInfoString(buf, \"\\\\\\\\\");",
          "content_same": false
        },
        {
          "line": 1070,
          "old_api": null,
          "new_api": "PG_ARGISNULL",
          "old_text": null,
          "new_text": "PG_ARGISNULL(2)",
          "old_line_content": "\tif (skip)",
          "new_line_content": "\tskip = absent_on_null && PG_ARGISNULL(2);",
          "content_same": false
        },
        {
          "line": 559,
          "old_api": null,
          "new_api": "appendBinaryStringInfo",
          "old_text": null,
          "new_text": "appendBinaryStringInfo(result, sep, seplen)",
          "old_line_content": "",
          "new_line_content": "\t\t\tappendBinaryStringInfo(result, sep, seplen);",
          "content_same": false
        },
        {
          "line": 1583,
          "old_api": null,
          "new_api": "appendStringInfoCharMacro",
          "old_text": null,
          "new_text": "appendStringInfoCharMacro(buf, *p)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\t\t\tappendStringInfoCharMacro(buf, *p);",
          "content_same": false
        },
        {
          "line": 563,
          "old_api": null,
          "new_api": "escape_json",
          "old_text": null,
          "new_text": "escape_json(result, attname)",
          "old_line_content": "",
          "new_line_content": "\t\tescape_json(result, attname);",
          "content_same": false
        },
        {
          "line": 1587,
          "old_api": null,
          "new_api": "appendStringInfoCharMacro",
          "old_text": null,
          "new_text": "appendStringInfoCharMacro(buf, '\"')",
          "old_line_content": "",
          "new_line_content": "\tappendStringInfoCharMacro(buf, '\"');",
          "content_same": false
        },
        {
          "line": 566,
          "old_api": null,
          "new_api": "heap_getattr",
          "old_text": null,
          "new_text": "heap_getattr(tuple, i + 1, tupdesc, &isnull)",
          "old_line_content": "\t\tif (isnull)",
          "new_line_content": "\t\tval = heap_getattr(tuple, i + 1, tupdesc, &isnull);",
          "content_same": false
        },
        {
          "line": 1082,
          "old_api": null,
          "new_api": "json_unique_builder_get_throwawaybuf",
          "old_text": null,
          "new_text": "json_unique_builder_get_throwawaybuf(&state->unique_check)",
          "old_line_content": "\telse",
          "new_line_content": "\t\tout = json_unique_builder_get_throwawaybuf(&state->unique_check);",
          "content_same": false
        },
        {
          "line": 574,
          "old_api": null,
          "new_api": "json_categorize_type",
          "old_text": null,
          "new_text": "json_categorize_type(att->atttypid, false, &tcategory,\n\t\t\t\t\t\t\t\t &outfuncoid)",
          "old_line_content": "",
          "new_line_content": "\t\t\tjson_categorize_type(att->atttypid, false, &tcategory,",
          "content_same": false
        },
        {
          "line": 577,
          "old_api": null,
          "new_api": "datum_to_json_internal",
          "old_text": null,
          "new_text": "datum_to_json_internal(val, isnull, result, tcategory, outfuncoid,\n\t\t\t\t\t\t\t   false)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tdatum_to_json_internal(val, isnull, result, tcategory, outfuncoid,",
          "content_same": false
        },
        {
          "line": 1601,
          "old_api": null,
          "new_api": "palloc",
          "old_text": null,
          "new_text": "palloc(sizeof(*entry))",
          "old_line_content": "\tentry->parent = state->stack;",
          "new_line_content": "\tentry = palloc(sizeof(*entry));",
          "content_same": false
        },
        {
          "line": 581,
          "old_api": null,
          "new_api": "appendStringInfoChar",
          "old_text": null,
          "new_text": "appendStringInfoChar(result, '}')",
          "old_line_content": "}",
          "new_line_content": "\tappendStringInfoChar(result, '}');",
          "content_same": false
        },
        {
          "line": 582,
          "old_api": null,
          "new_api": "ReleaseTupleDesc",
          "old_text": null,
          "new_text": "ReleaseTupleDesc(tupdesc)",
          "old_line_content": "",
          "new_line_content": "\tReleaseTupleDesc(tupdesc);",
          "content_same": false
        },
        {
          "line": 1093,
          "old_api": null,
          "new_api": "appendStringInfoString",
          "old_text": null,
          "new_text": "appendStringInfoString(out, \", \")",
          "old_line_content": "",
          "new_line_content": "\t\t\tappendStringInfoString(out, \", \");",
          "content_same": false
        },
        {
          "line": 1096,
          "old_api": null,
          "new_api": "PG_GETARG_DATUM",
          "old_text": null,
          "new_text": "PG_GETARG_DATUM(1)",
          "old_line_content": "\tkey_offset = out->len;",
          "new_line_content": "\targ = PG_GETARG_DATUM(1);",
          "content_same": false
        },
        {
          "line": 1100,
          "old_api": null,
          "new_api": "datum_to_json_internal",
          "old_text": null,
          "new_text": "datum_to_json_internal(arg, false, out, state->key_category,\n\t\t\t\t\t\t   state->key_output_func, true)",
          "old_line_content": "",
          "new_line_content": "\tdatum_to_json_internal(arg, false, out, state->key_category,",
          "content_same": false
        },
        {
          "line": 1620,
          "old_api": null,
          "new_api": "pfree",
          "old_text": null,
          "new_text": "pfree(entry)",
          "old_line_content": "}",
          "new_line_content": "\tpfree(entry);",
          "content_same": false
        },
        {
          "line": 1109,
          "old_api": null,
          "new_api": "errcode",
          "old_text": null,
          "new_text": "errcode(ERRCODE_DUPLICATE_JSON_OBJECT_KEY_VALUE)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t\terrcode(ERRCODE_DUPLICATE_JSON_OBJECT_KEY_VALUE),",
          "content_same": false
        },
        {
          "line": 1110,
          "old_api": null,
          "new_api": "errmsg",
          "old_text": null,
          "new_text": "errmsg(\"duplicate JSON object key value: %s\", key)",
          "old_line_content": "\t\tif (skip)",
          "new_line_content": "\t\t\t\t\terrmsg(\"duplicate JSON object key value: %s\", key));",
          "content_same": false
        },
        {
          "line": 601,
          "old_api": null,
          "new_api": "errcode",
          "old_text": null,
          "new_text": "errcode(ERRCODE_INVALID_PARAMETER_VALUE)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t(errcode(ERRCODE_INVALID_PARAMETER_VALUE),",
          "content_same": false
        },
        {
          "line": 602,
          "old_api": null,
          "new_api": "errmsg",
          "old_text": null,
          "new_text": "errmsg(\"could not determine input data type\")",
          "old_line_content": "\tif (is_null)",
          "new_line_content": "\t\t\t\t errmsg(\"could not determine input data type\")));",
          "content_same": false
        },
        {
          "line": 1113,
          "old_api": null,
          "new_api": "PG_RETURN_POINTER",
          "old_text": null,
          "new_text": "PG_RETURN_POINTER(state)",
          "old_line_content": "",
          "new_line_content": "\t\t\tPG_RETURN_POINTER(state);",
          "content_same": false
        },
        {
          "line": 1118,
          "old_api": null,
          "new_api": "PG_ARGISNULL",
          "old_text": null,
          "new_text": "PG_ARGISNULL(2)",
          "old_line_content": "\telse",
          "new_line_content": "\tif (PG_ARGISNULL(2))",
          "content_same": false
        },
        {
          "line": 610,
          "old_api": null,
          "new_api": "json_categorize_type",
          "old_text": null,
          "new_text": "json_categorize_type(val_type, false,\n\t\t\t\t\t\t\t &tcategory, &outfuncoid)",
          "old_line_content": "",
          "new_line_content": "\t\tjson_categorize_type(val_type, false,",
          "content_same": false
        },
        {
          "line": 1123,
          "old_api": null,
          "new_api": "PG_ARGISNULL",
          "old_text": null,
          "new_text": "PG_ARGISNULL(2)",
          "old_line_content": "\t\t\t\t\t\t   state->val_output_func, false);",
          "new_line_content": "\tdatum_to_json_internal(arg, PG_ARGISNULL(2), state->str,",
          "content_same": false
        },
        {
          "line": 1634,
          "old_api": null,
          "new_api": "json_unique_check_key",
          "old_text": null,
          "new_text": "json_unique_check_key(&state->check, field, state->stack->object_id)",
          "old_line_content": "",
          "new_line_content": "\tif (json_unique_check_key(&state->check, field, state->stack->object_id))",
          "content_same": false
        },
        {
          "line": 613,
          "old_api": null,
          "new_api": "datum_to_json_internal",
          "old_text": null,
          "new_text": "datum_to_json_internal(val, is_null, result, tcategory, outfuncoid,\n\t\t\t\t\t\t   key_scalar)",
          "old_line_content": "}",
          "new_line_content": "\tdatum_to_json_internal(val, is_null, result, tcategory, outfuncoid,",
          "content_same": false
        },
        {
          "line": 1127,
          "old_api": null,
          "new_api": "PG_RETURN_POINTER",
          "old_text": null,
          "new_text": "PG_RETURN_POINTER(state)",
          "old_line_content": "",
          "new_line_content": "\tPG_RETURN_POINTER(state);",
          "content_same": false
        },
        {
          "line": 1643,
          "old_api": null,
          "new_api": "pfree",
          "old_text": null,
          "new_text": "pfree(entry)",
          "old_line_content": "\treturn JSON_SUCCESS;",
          "new_line_content": "\t\tpfree(entry);",
          "content_same": false
        },
        {
          "line": 623,
          "old_api": null,
          "new_api": "PG_GETARG_DATUM",
          "old_text": null,
          "new_text": "PG_GETARG_DATUM(0)",
          "old_line_content": "",
          "new_line_content": "\tDatum\t\tarray = PG_GETARG_DATUM(0);",
          "content_same": false
        },
        {
          "line": 1136,
          "old_api": null,
          "new_api": "json_object_agg_transfn_worker",
          "old_text": null,
          "new_text": "json_object_agg_transfn_worker(fcinfo, false, false)",
          "old_line_content": "",
          "new_line_content": "\treturn json_object_agg_transfn_worker(fcinfo, false, false);",
          "content_same": false
        },
        {
          "line": 630,
          "old_api": null,
          "new_api": "cstring_to_text_with_len",
          "old_text": null,
          "new_text": "cstring_to_text_with_len(result->data, result->len)",
          "old_line_content": "",
          "new_line_content": "\tPG_RETURN_TEXT_P(cstring_to_text_with_len(result->data, result->len));",
          "content_same": false
        },
        {
          "line": 1145,
          "old_api": null,
          "new_api": "json_object_agg_transfn_worker",
          "old_text": null,
          "new_text": "json_object_agg_transfn_worker(fcinfo, true, false)",
          "old_line_content": "",
          "new_line_content": "\treturn json_object_agg_transfn_worker(fcinfo, true, false);",
          "content_same": false
        },
        {
          "line": 1657,
          "old_api": null,
          "new_api": "makeJsonLexContext",
          "old_text": null,
          "new_text": "makeJsonLexContext(&lex, json, check_unique_keys)",
          "old_line_content": "\tif (check_unique_keys)",
          "new_line_content": "\tmakeJsonLexContext(&lex, json, check_unique_keys);",
          "content_same": false
        },
        {
          "line": 639,
          "old_api": null,
          "new_api": "PG_GETARG_DATUM",
          "old_text": null,
          "new_text": "PG_GETARG_DATUM(0)",
          "old_line_content": "\tStringInfo\tresult;",
          "new_line_content": "\tDatum\t\tarray = PG_GETARG_DATUM(0);",
          "content_same": false
        },
        {
          "line": 640,
          "old_api": null,
          "new_api": "PG_GETARG_BOOL",
          "old_text": null,
          "new_text": "PG_GETARG_BOOL(1)",
          "old_line_content": "",
          "new_line_content": "\tbool\t\tuse_line_feeds = PG_GETARG_BOOL(1);",
          "content_same": false
        },
        {
          "line": 1665,
          "old_api": null,
          "new_api": "json_unique_check_init",
          "old_text": null,
          "new_text": "json_unique_check_init(&state.check)",
          "old_line_content": "\t\tuniqueSemAction.semstate = &state;",
          "new_line_content": "\t\tjson_unique_check_init(&state.check);",
          "content_same": false
        },
        {
          "line": 1154,
          "old_api": null,
          "new_api": "json_object_agg_transfn_worker",
          "old_text": null,
          "new_text": "json_object_agg_transfn_worker(fcinfo, false, true)",
          "old_line_content": "",
          "new_line_content": "\treturn json_object_agg_transfn_worker(fcinfo, false, true);",
          "content_same": false
        },
        {
          "line": 647,
          "old_api": null,
          "new_api": "cstring_to_text_with_len",
          "old_text": null,
          "new_text": "cstring_to_text_with_len(result->data, result->len)",
          "old_line_content": "",
          "new_line_content": "\tPG_RETURN_TEXT_P(cstring_to_text_with_len(result->data, result->len));",
          "content_same": false
        },
        {
          "line": 1673,
          "old_api": null,
          "new_api": "pg_parse_json",
          "old_text": null,
          "new_text": "pg_parse_json(&lex, check_unique_keys ? &uniqueSemAction : &nullSemAction)",
          "old_line_content": "\tif (result != JSON_SUCCESS)",
          "new_line_content": "\tresult = pg_parse_json(&lex, check_unique_keys ? &uniqueSemAction : &nullSemAction);",
          "content_same": false
        },
        {
          "line": 1163,
          "old_api": null,
          "new_api": "json_object_agg_transfn_worker",
          "old_text": null,
          "new_text": "json_object_agg_transfn_worker(fcinfo, true, true)",
          "old_line_content": "",
          "new_line_content": "\treturn json_object_agg_transfn_worker(fcinfo, true, true);",
          "content_same": false
        },
        {
          "line": 1678,
          "old_api": null,
          "new_api": "json_errsave_error",
          "old_text": null,
          "new_text": "json_errsave_error(result, &lex, NULL)",
          "old_line_content": "\t\treturn false;\t\t\t/* invalid json */",
          "new_line_content": "\t\t\tjson_errsave_error(result, &lex, NULL);",
          "content_same": false
        },
        {
          "line": 656,
          "old_api": null,
          "new_api": "PG_GETARG_DATUM",
          "old_text": null,
          "new_text": "PG_GETARG_DATUM(0)",
          "old_line_content": "",
          "new_line_content": "\tDatum\t\tarray = PG_GETARG_DATUM(0);",
          "content_same": false
        },
        {
          "line": 663,
          "old_api": null,
          "new_api": "cstring_to_text_with_len",
          "old_text": null,
          "new_text": "cstring_to_text_with_len(result->data, result->len)",
          "old_line_content": "",
          "new_line_content": "\tPG_RETURN_TEXT_P(cstring_to_text_with_len(result->data, result->len));",
          "content_same": false
        },
        {
          "line": 1687,
          "old_api": null,
          "new_api": "errcode",
          "old_text": null,
          "new_text": "errcode(ERRCODE_DUPLICATE_JSON_OBJECT_KEY_VALUE)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t\t(errcode(ERRCODE_DUPLICATE_JSON_OBJECT_KEY_VALUE),",
          "content_same": false
        },
        {
          "line": 1177,
          "old_api": null,
          "new_api": "PG_GETARG_POINTER",
          "old_text": null,
          "new_text": "PG_GETARG_POINTER(0)",
          "old_line_content": "\t/* NULL result for no rows in, as is standard with aggregates */",
          "new_line_content": "\tstate = PG_ARGISNULL(0) ? NULL : (JsonAggState *) PG_GETARG_POINTER(0);",
          "content_same": false
        },
        {
          "line": 1688,
          "old_api": null,
          "new_api": "errmsg",
          "old_text": null,
          "new_text": "errmsg(\"duplicate JSON object key value\")",
          "old_line_content": "\t\treturn false;\t\t\t/* not unique keys */",
          "new_line_content": "\t\t\t\t\t errmsg(\"duplicate JSON object key value\")));",
          "content_same": false
        },
        {
          "line": 1181,
          "old_api": null,
          "new_api": "PG_RETURN_NULL",
          "old_text": null,
          "new_text": "PG_RETURN_NULL()",
          "old_line_content": "\t/* Else return state with appropriate object terminator added */",
          "new_line_content": "\t\tPG_RETURN_NULL();",
          "content_same": false
        },
        {
          "line": 1694,
          "old_api": null,
          "new_api": "freeJsonLexContext",
          "old_text": null,
          "new_text": "freeJsonLexContext(&lex)",
          "old_line_content": "\treturn true;\t\t\t\t/* ok */",
          "new_line_content": "\t\tfreeJsonLexContext(&lex);",
          "content_same": false
        },
        {
          "line": 672,
          "old_api": null,
          "new_api": "PG_GETARG_DATUM",
          "old_text": null,
          "new_text": "PG_GETARG_DATUM(0)",
          "old_line_content": "\tStringInfo\tresult;",
          "new_line_content": "\tDatum\t\tarray = PG_GETARG_DATUM(0);",
          "content_same": false
        },
        {
          "line": 673,
          "old_api": null,
          "new_api": "PG_GETARG_BOOL",
          "old_text": null,
          "new_text": "PG_GETARG_BOOL(1)",
          "old_line_content": "",
          "new_line_content": "\tbool\t\tuse_line_feeds = PG_GETARG_BOOL(1);",
          "content_same": false
        },
        {
          "line": 1184,
          "old_api": null,
          "new_api": "catenate_stringinfo_string",
          "old_text": null,
          "new_text": "catenate_stringinfo_string(state->str, \" }\")",
          "old_line_content": "",
          "new_line_content": "\tPG_RETURN_TEXT_P(catenate_stringinfo_string(state->str, \" }\"));",
          "content_same": false
        },
        {
          "line": 680,
          "old_api": null,
          "new_api": "cstring_to_text_with_len",
          "old_text": null,
          "new_text": "cstring_to_text_with_len(result->data, result->len)",
          "old_line_content": "",
          "new_line_content": "\tPG_RETURN_TEXT_P(cstring_to_text_with_len(result->data, result->len));",
          "content_same": false
        },
        {
          "line": 1197,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(addon)",
          "old_line_content": "",
          "new_line_content": "\tint\t\t\taddlen = strlen(addon);",
          "content_same": false
        },
        {
          "line": 1201,
          "old_api": null,
          "new_api": "VARDATA",
          "old_text": null,
          "new_text": "VARDATA(result)",
          "old_line_content": "",
          "new_line_content": "\tmemcpy(VARDATA(result), buffer->data, buflen);",
          "content_same": false
        },
        {
          "line": 1202,
          "old_api": null,
          "new_api": "VARDATA",
          "old_text": null,
          "new_text": "VARDATA(result)",
          "old_line_content": "\treturn result;",
          "new_line_content": "\tmemcpy(VARDATA(result) + buflen, addon, addlen);",
          "content_same": false
        },
        {
          "line": 1714,
          "old_api": null,
          "new_api": "PG_GETARG_TEXT_PP",
          "old_text": null,
          "new_text": "PG_GETARG_TEXT_PP(0)",
          "old_line_content": "\tchar\t   *type;",
          "new_line_content": "\ttext\t   *json = PG_GETARG_TEXT_PP(0);",
          "content_same": false
        },
        {
          "line": 696,
          "old_api": null,
          "new_api": "json_categorize_type",
          "old_text": null,
          "new_text": "json_categorize_type(typoid, false, &tcategory, &outfuncoid)",
          "old_line_content": "\tswitch (tcategory)",
          "new_line_content": "\tjson_categorize_type(typoid, false, &tcategory, &outfuncoid);",
          "content_same": false
        },
        {
          "line": 1720,
          "old_api": null,
          "new_api": "makeJsonLexContext",
          "old_text": null,
          "new_text": "makeJsonLexContext(&lex, json, false)",
          "old_line_content": "\tif (result != JSON_SUCCESS)",
          "new_line_content": "\tmakeJsonLexContext(&lex, json, false);",
          "content_same": false
        },
        {
          "line": 1723,
          "old_api": null,
          "new_api": "json_errsave_error",
          "old_text": null,
          "new_text": "json_errsave_error(result, &lex, NULL)",
          "old_line_content": "\tswitch (lex.token_type)",
          "new_line_content": "\t\tjson_errsave_error(result, &lex, NULL);",
          "content_same": false
        },
        {
          "line": 1218,
          "old_api": null,
          "new_api": "errcode",
          "old_text": null,
          "new_text": "errcode(ERRCODE_INVALID_PARAMETER_VALUE)",
          "old_line_content": "\t\t/* translator: %s is a SQL function name */",
          "new_line_content": "\t\t\t\t(errcode(ERRCODE_INVALID_PARAMETER_VALUE),",
          "content_same": false
        },
        {
          "line": 1221,
          "old_api": null,
          "new_api": "errhint",
          "old_text": null,
          "new_text": "errhint(\"The arguments of %s must consist of alternating keys and values.\",\n\t\t\t\t\t\t \"json_build_object()\")",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t errhint(\"The arguments of %s must consist of alternating keys and values.\",",
          "content_same": false
        },
        {
          "line": 1226,
          "old_api": null,
          "new_api": "appendStringInfoChar",
          "old_text": null,
          "new_text": "appendStringInfoChar(result, '{')",
          "old_line_content": "\tif (unique_keys)",
          "new_line_content": "\tappendStringInfoChar(result, '{');",
          "content_same": false
        },
        {
          "line": 1229,
          "old_api": null,
          "new_api": "json_unique_builder_init",
          "old_text": null,
          "new_text": "json_unique_builder_init(&unique_check)",
          "old_line_content": "\tfor (i = 0; i < nargs; i += 2)",
          "new_line_content": "\t\tjson_unique_builder_init(&unique_check);",
          "content_same": false
        },
        {
          "line": 720,
          "old_api": null,
          "new_api": "func_volatile",
          "old_text": null,
          "new_text": "func_volatile(outfuncoid)",
          "old_line_content": "",
          "new_line_content": "\t\t\treturn func_volatile(outfuncoid) == PROVOLATILE_IMMUTABLE;",
          "content_same": false
        },
        {
          "line": 1747,
          "old_api": null,
          "new_api": "elog",
          "old_text": null,
          "new_text": "elog(ERROR, \"unexpected json token: %d\", lex.token_type)",
          "old_line_content": "",
          "new_line_content": "\t\t\telog(ERROR, \"unexpected json token: %d\", lex.token_type);",
          "content_same": false
        },
        {
          "line": 214,
          "old_api": null,
          "new_api": "appendStringInfoChar",
          "old_text": null,
          "new_text": "appendStringInfoChar(result, '\"')",
          "old_line_content": "\t\t\tif (key_scalar)",
          "new_line_content": "\t\t\t\tappendStringInfoChar(result, '\"');",
          "content_same": false
        },
        {
          "line": 1750,
          "old_api": null,
          "new_api": "cstring_to_text",
          "old_text": null,
          "new_text": "cstring_to_text(type)",
          "old_line_content": "",
          "new_line_content": "\tPG_RETURN_TEXT_P(cstring_to_text(type));",
          "content_same": false
        },
        {
          "line": 216,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(\"true\")",
          "old_line_content": "\t\t\telse",
          "new_line_content": "\t\t\t\tappendBinaryStringInfo(result, \"true\", strlen(\"true\"));",
          "content_same": false
        },
        {
          "line": 218,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(\"false\")",
          "old_line_content": "\t\t\tbreak;",
          "new_line_content": "\t\t\t\tappendBinaryStringInfo(result, \"false\", strlen(\"false\"));",
          "content_same": false
        },
        {
          "line": 732,
          "old_api": null,
          "new_api": "PG_GETARG_DATUM",
          "old_text": null,
          "new_text": "PG_GETARG_DATUM(0)",
          "old_line_content": "\tJsonTypeCategory tcategory;",
          "new_line_content": "\tDatum\t\tval = PG_GETARG_DATUM(0);",
          "content_same": false
        },
        {
          "line": 733,
          "old_api": null,
          "new_api": "get_fn_expr_argtype",
          "old_text": null,
          "new_text": "get_fn_expr_argtype(fcinfo->flinfo, 0)",
          "old_line_content": "\tOid\t\t\toutfuncoid;",
          "new_line_content": "\tOid\t\t\tval_type = get_fn_expr_argtype(fcinfo->flinfo, 0);",
          "content_same": false
        },
        {
          "line": 1246,
          "old_api": null,
          "new_api": "json_unique_builder_get_throwawaybuf",
          "old_text": null,
          "new_text": "json_unique_builder_get_throwawaybuf(&unique_check)",
          "old_line_content": "\t\telse",
          "new_line_content": "\t\t\tout = json_unique_builder_get_throwawaybuf(&unique_check);",
          "content_same": false
        },
        {
          "line": 223,
          "old_api": null,
          "new_api": "OidOutputFunctionCall",
          "old_text": null,
          "new_text": "OidOutputFunctionCall(outfuncoid, val)",
          "old_line_content": "\t\t\t * Don't quote a non-key if it's a valid JSON number (i.e., not",
          "new_line_content": "\t\t\toutputstr = OidOutputFunctionCall(outfuncoid, val);",
          "content_same": false
        },
        {
          "line": 1250,
          "old_api": null,
          "new_api": "appendStringInfoString",
          "old_text": null,
          "new_text": "appendStringInfoString(result, sep)",
          "old_line_content": "\t\t\tout = result;",
          "new_line_content": "\t\t\tappendStringInfoString(result, sep);",
          "content_same": false
        },
        {
          "line": 739,
          "old_api": null,
          "new_api": "errcode",
          "old_text": null,
          "new_text": "errcode(ERRCODE_INVALID_PARAMETER_VALUE)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t(errcode(ERRCODE_INVALID_PARAMETER_VALUE),",
          "content_same": false
        },
        {
          "line": 742,
          "old_api": null,
          "new_api": "json_categorize_type",
          "old_text": null,
          "new_text": "json_categorize_type(val_type, false,\n\t\t\t\t\t\t &tcategory, &outfuncoid)",
          "old_line_content": "",
          "new_line_content": "\tjson_categorize_type(val_type, false,",
          "content_same": false
        },
        {
          "line": 745,
          "old_api": null,
          "new_api": "datum_to_json",
          "old_text": null,
          "new_text": "datum_to_json(val, tcategory, outfuncoid)",
          "old_line_content": "",
          "new_line_content": "\tPG_RETURN_DATUM(datum_to_json(val, tcategory, outfuncoid));",
          "content_same": false
        },
        {
          "line": 1258,
          "old_api": null,
          "new_api": "errcode",
          "old_text": null,
          "new_text": "errcode(ERRCODE_NULL_VALUE_NOT_ALLOWED)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t\t(errcode(ERRCODE_NULL_VALUE_NOT_ALLOWED),",
          "content_same": false
        },
        {
          "line": 1259,
          "old_api": null,
          "new_api": "errmsg",
          "old_text": null,
          "new_text": "errmsg(\"null value not allowed for object key\")",
          "old_line_content": "\t\t/* save key offset before appending it */",
          "new_line_content": "\t\t\t\t\t errmsg(\"null value not allowed for object key\")));",
          "content_same": false
        },
        {
          "line": 238,
          "old_api": null,
          "new_api": "appendStringInfoChar",
          "old_text": null,
          "new_text": "appendStringInfoChar(result, '\"')",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\t\tappendStringInfoChar(result, '\"');",
          "content_same": false
        },
        {
          "line": 240,
          "old_api": null,
          "new_api": "appendStringInfoChar",
          "old_text": null,
          "new_text": "appendStringInfoChar(result, '\"')",
          "old_line_content": "\t\t\tbreak;",
          "new_line_content": "\t\t\t\tappendStringInfoChar(result, '\"');",
          "content_same": false
        },
        {
          "line": 1264,
          "old_api": null,
          "new_api": "add_json",
          "old_text": null,
          "new_text": "add_json(args[i], false, out, types[i], true)",
          "old_line_content": "\t\tif (unique_keys)",
          "new_line_content": "\t\tadd_json(args[i], false, out, types[i], true);",
          "content_same": false
        },
        {
          "line": 242,
          "old_api": null,
          "new_api": "pfree",
          "old_text": null,
          "new_text": "pfree(outputstr)",
          "old_line_content": "\t\t\t{",
          "new_line_content": "\t\t\tpfree(outputstr);",
          "content_same": false
        },
        {
          "line": 758,
          "old_api": null,
          "new_api": "datum_to_json_internal",
          "old_text": null,
          "new_text": "datum_to_json_internal(val, false, result, tcategory, outfuncoid,\n\t\t\t\t\t\t   false)",
          "old_line_content": "",
          "new_line_content": "\tdatum_to_json_internal(val, false, result, tcategory, outfuncoid,",
          "content_same": false
        },
        {
          "line": 249,
          "old_api": null,
          "new_api": "appendStringInfoChar",
          "old_text": null,
          "new_text": "appendStringInfoChar(result, '\"')",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\t\tappendStringInfoChar(result, '\"');",
          "content_same": false
        },
        {
          "line": 250,
          "old_api": null,
          "new_api": "appendStringInfoString",
          "old_text": null,
          "new_text": "appendStringInfoString(result, buf)",
          "old_line_content": "\t\t\tbreak;",
          "new_line_content": "\t\t\t\tappendStringInfoString(result, buf);",
          "content_same": false
        },
        {
          "line": 251,
          "old_api": null,
          "new_api": "appendStringInfoChar",
          "old_text": null,
          "new_text": "appendStringInfoChar(result, '\"')",
          "old_line_content": "\t\tcase JSONTYPE_TIMESTAMP:",
          "new_line_content": "\t\t\t\tappendStringInfoChar(result, '\"');",
          "content_same": false
        },
        {
          "line": 761,
          "old_api": null,
          "new_api": "cstring_to_text_with_len",
          "old_text": null,
          "new_text": "cstring_to_text_with_len(result->data, result->len)",
          "old_line_content": "",
          "new_line_content": "\treturn PointerGetDatum(cstring_to_text_with_len(result->data, result->len));",
          "content_same": false
        },
        {
          "line": 1273,
          "old_api": null,
          "new_api": "errcode",
          "old_text": null,
          "new_text": "errcode(ERRCODE_DUPLICATE_JSON_OBJECT_KEY_VALUE)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t\t\terrcode(ERRCODE_DUPLICATE_JSON_OBJECT_KEY_VALUE),",
          "content_same": false
        },
        {
          "line": 1274,
          "old_api": null,
          "new_api": "errmsg",
          "old_text": null,
          "new_text": "errmsg(\"duplicate JSON object key value: %s\", key)",
          "old_line_content": "\t\t\tif (skip)",
          "new_line_content": "\t\t\t\t\t\terrmsg(\"duplicate JSON object key value: %s\", key));",
          "content_same": false
        },
        {
          "line": 1280,
          "old_api": null,
          "new_api": "appendStringInfoString",
          "old_text": null,
          "new_text": "appendStringInfoString(result, \" : \")",
          "old_line_content": "\t\t/* process value */",
          "new_line_content": "\t\tappendStringInfoString(result, \" : \");",
          "content_same": false
        },
        {
          "line": 259,
          "old_api": null,
          "new_api": "appendStringInfoChar",
          "old_text": null,
          "new_text": "appendStringInfoChar(result, '\"')",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\t\tappendStringInfoChar(result, '\"');",
          "content_same": false
        },
        {
          "line": 260,
          "old_api": null,
          "new_api": "appendStringInfoString",
          "old_text": null,
          "new_text": "appendStringInfoString(result, buf)",
          "old_line_content": "\t\t\tbreak;",
          "new_line_content": "\t\t\t\tappendStringInfoString(result, buf);",
          "content_same": false
        },
        {
          "line": 261,
          "old_api": null,
          "new_api": "appendStringInfoChar",
          "old_text": null,
          "new_text": "appendStringInfoChar(result, '\"')",
          "old_line_content": "\t\tcase JSONTYPE_TIMESTAMPTZ:",
          "new_line_content": "\t\t\t\tappendStringInfoChar(result, '\"');",
          "content_same": false
        },
        {
          "line": 1283,
          "old_api": null,
          "new_api": "add_json",
          "old_text": null,
          "new_text": "add_json(args[i + 1], nulls[i + 1], result, types[i + 1], false)",
          "old_line_content": "",
          "new_line_content": "\t\tadd_json(args[i + 1], nulls[i + 1], result, types[i + 1], false);",
          "content_same": false
        },
        {
          "line": 1288,
          "old_api": null,
          "new_api": "cstring_to_text_with_len",
          "old_text": null,
          "new_text": "cstring_to_text_with_len(result->data, result->len)",
          "old_line_content": "",
          "new_line_content": "\treturn PointerGetDatum(cstring_to_text_with_len(result->data, result->len));",
          "content_same": false
        },
        {
          "line": 777,
          "old_api": null,
          "new_api": "AggCheckCallContext",
          "old_text": null,
          "new_text": "AggCheckCallContext(fcinfo, &aggcontext)",
          "old_line_content": "\t\t/* cannot be called directly because of internal-type argument */",
          "new_line_content": "\tif (!AggCheckCallContext(fcinfo, &aggcontext))",
          "content_same": false
        },
        {
          "line": 780,
          "old_api": null,
          "new_api": "elog",
          "old_text": null,
          "new_text": "elog(ERROR, \"json_agg_transfn called in non-aggregate context\")",
          "old_line_content": "",
          "new_line_content": "\t\telog(ERROR, \"json_agg_transfn called in non-aggregate context\");",
          "content_same": false
        },
        {
          "line": 269,
          "old_api": null,
          "new_api": "appendStringInfoChar",
          "old_text": null,
          "new_text": "appendStringInfoChar(result, '\"')",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\t\tappendStringInfoChar(result, '\"');",
          "content_same": false
        },
        {
          "line": 270,
          "old_api": null,
          "new_api": "appendStringInfoString",
          "old_text": null,
          "new_text": "appendStringInfoString(result, buf)",
          "old_line_content": "\t\t\tbreak;",
          "new_line_content": "\t\t\t\tappendStringInfoString(result, buf);",
          "content_same": false
        },
        {
          "line": 271,
          "old_api": null,
          "new_api": "appendStringInfoChar",
          "old_text": null,
          "new_text": "appendStringInfoChar(result, '\"')",
          "old_line_content": "\t\tcase JSONTYPE_JSON:",
          "new_line_content": "\t\t\t\tappendStringInfoChar(result, '\"');",
          "content_same": false
        },
        {
          "line": 785,
          "old_api": null,
          "new_api": "get_fn_expr_argtype",
          "old_text": null,
          "new_text": "get_fn_expr_argtype(fcinfo->flinfo, 1)",
          "old_line_content": "\t\tif (arg_type == InvalidOid)",
          "new_line_content": "\t\tOid\t\t\targ_type = get_fn_expr_argtype(fcinfo->flinfo, 1);",
          "content_same": false
        },
        {
          "line": 276,
          "old_api": null,
          "new_api": "OidOutputFunctionCall",
          "old_text": null,
          "new_text": "OidOutputFunctionCall(outfuncoid, val)",
          "old_line_content": "\t\t\tbreak;",
          "new_line_content": "\t\t\toutputstr = OidOutputFunctionCall(outfuncoid, val);",
          "content_same": false
        },
        {
          "line": 277,
          "old_api": null,
          "new_api": "appendStringInfoString",
          "old_text": null,
          "new_text": "appendStringInfoString(result, outputstr)",
          "old_line_content": "\t\tcase JSONTYPE_CAST:",
          "new_line_content": "\t\t\tappendStringInfoString(result, outputstr);",
          "content_same": false
        },
        {
          "line": 278,
          "old_api": null,
          "new_api": "pfree",
          "old_text": null,
          "new_text": "pfree(outputstr)",
          "old_line_content": "\t\t\t/* outfuncoid refers to a cast function, not an output function */",
          "new_line_content": "\t\t\tpfree(outputstr);",
          "content_same": false
        },
        {
          "line": 789,
          "old_api": null,
          "new_api": "errcode",
          "old_text": null,
          "new_text": "errcode(ERRCODE_INVALID_PARAMETER_VALUE)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t\t(errcode(ERRCODE_INVALID_PARAMETER_VALUE),",
          "content_same": false
        },
        {
          "line": 790,
          "old_api": null,
          "new_api": "errmsg",
          "old_text": null,
          "new_text": "errmsg(\"could not determine input data type\")",
          "old_line_content": "\t\t/*",
          "new_line_content": "\t\t\t\t\t errmsg(\"could not determine input data type\")));",
          "content_same": false
        },
        {
          "line": 1302,
          "old_api": null,
          "new_api": "extract_variadic_args",
          "old_text": null,
          "new_text": "extract_variadic_args(fcinfo, 0, true,\n\t\t\t\t\t\t\t\t\t\t\t  &args, &types, &nulls)",
          "old_line_content": "",
          "new_line_content": "\tint\t\t\tnargs = extract_variadic_args(fcinfo, 0, true,",
          "content_same": false
        },
        {
          "line": 284,
          "old_api": null,
          "new_api": "VARSIZE_ANY_EXHDR",
          "old_text": null,
          "new_text": "VARSIZE_ANY_EXHDR(jsontext)",
          "old_line_content": "\t\t\tbreak;",
          "new_line_content": "\t\t\t\t\t\t\t\t   VARSIZE_ANY_EXHDR(jsontext));",
          "content_same": false
        },
        {
          "line": 285,
          "old_api": null,
          "new_api": "pfree",
          "old_text": null,
          "new_text": "pfree(jsontext)",
          "old_line_content": "\t\tdefault:",
          "new_line_content": "\t\t\tpfree(jsontext);",
          "content_same": false
        },
        {
          "line": 1308,
          "old_api": null,
          "new_api": "json_build_object_worker",
          "old_text": null,
          "new_text": "json_build_object_worker(nargs, args, nulls, types, false, false)",
          "old_line_content": "",
          "new_line_content": "\tPG_RETURN_DATUM(json_build_object_worker(nargs, args, nulls, types, false, false));",
          "content_same": false
        },
        {
          "line": 800,
          "old_api": null,
          "new_api": "makeStringInfo",
          "old_text": null,
          "new_text": "makeStringInfo()",
          "old_line_content": "",
          "new_line_content": "\t\tstate->str = makeStringInfo();",
          "content_same": false
        },
        {
          "line": 289,
          "old_api": null,
          "new_api": "escape_json",
          "old_text": null,
          "new_text": "escape_json(result, outputstr)",
          "old_line_content": "\t\t\tbreak;",
          "new_line_content": "\t\t\tescape_json(result, outputstr);",
          "content_same": false
        },
        {
          "line": 290,
          "old_api": null,
          "new_api": "pfree",
          "old_text": null,
          "new_text": "pfree(outputstr)",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\tpfree(outputstr);",
          "content_same": false
        },
        {
          "line": 803,
          "old_api": null,
          "new_api": "appendStringInfoChar",
          "old_text": null,
          "new_text": "appendStringInfoChar(state->str, '[')",
          "old_line_content": "\t\t\t\t\t\t\t &state->val_output_func);",
          "new_line_content": "\t\tappendStringInfoChar(state->str, '[');",
          "content_same": false
        },
        {
          "line": 804,
          "old_api": null,
          "new_api": "json_categorize_type",
          "old_text": null,
          "new_text": "json_categorize_type(arg_type, false, &state->val_category,\n\t\t\t\t\t\t\t &state->val_output_func)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tjson_categorize_type(arg_type, false, &state->val_category,",
          "content_same": false
        },
        {
          "line": 1317,
          "old_api": null,
          "new_api": "cstring_to_text_with_len",
          "old_text": null,
          "new_text": "cstring_to_text_with_len(\"{}\", 2)",
          "old_line_content": "",
          "new_line_content": "\tPG_RETURN_TEXT_P(cstring_to_text_with_len(\"{}\", 2));",
          "content_same": false
        },
        {
          "line": 809,
          "old_api": null,
          "new_api": "PG_GETARG_POINTER",
          "old_text": null,
          "new_text": "PG_GETARG_POINTER(0)",
          "old_line_content": "",
          "new_line_content": "\t\tstate = (JsonAggState *) PG_GETARG_POINTER(0);",
          "content_same": false
        },
        {
          "line": 812,
          "old_api": null,
          "new_api": "PG_ARGISNULL",
          "old_text": null,
          "new_text": "PG_ARGISNULL(1)",
          "old_line_content": "",
          "new_line_content": "\tif (absent_on_null && PG_ARGISNULL(1))",
          "content_same": false
        },
        {
          "line": 813,
          "old_api": null,
          "new_api": "PG_RETURN_POINTER",
          "old_text": null,
          "new_text": "PG_RETURN_POINTER(state)",
          "old_line_content": "\tif (state->str->len > 1)",
          "new_line_content": "\t\tPG_RETURN_POINTER(state);",
          "content_same": false
        },
        {
          "line": 304,
          "old_api": null,
          "new_api": "palloc",
          "old_text": null,
          "new_text": "palloc(MAXDATELEN + 1)",
          "old_line_content": "\tswitch (typid)",
          "new_line_content": "\t\tbuf = palloc(MAXDATELEN + 1);",
          "content_same": false
        },
        {
          "line": 816,
          "old_api": null,
          "new_api": "appendStringInfoString",
          "old_text": null,
          "new_text": "appendStringInfoString(state->str, \", \")",
          "old_line_content": "\t/* fast path for NULLs */",
          "new_line_content": "\t\tappendStringInfoString(state->str, \", \");",
          "content_same": false
        },
        {
          "line": 1330,
          "old_api": null,
          "new_api": "appendStringInfoChar",
          "old_text": null,
          "new_text": "appendStringInfoChar(result, '[')",
          "old_line_content": "\tfor (i = 0; i < nargs; i++)",
          "new_line_content": "\tappendStringInfoChar(result, '[');",
          "content_same": false
        },
        {
          "line": 823,
          "old_api": null,
          "new_api": "PG_RETURN_POINTER",
          "old_text": null,
          "new_text": "PG_RETURN_POINTER(state)",
          "old_line_content": "",
          "new_line_content": "\t\tPG_RETURN_POINTER(state);",
          "content_same": false
        },
        {
          "line": 313,
          "old_api": null,
          "new_api": "DatumGetDateADT",
          "old_text": null,
          "new_text": "DatumGetDateADT(value)",
          "old_line_content": "\t\t\t\t/* Same as date_out(), but forcing DateStyle */",
          "new_line_content": "\t\t\t\tdate = DatumGetDateADT(value);",
          "content_same": false
        },
        {
          "line": 826,
          "old_api": null,
          "new_api": "PG_GETARG_DATUM",
          "old_text": null,
          "new_text": "PG_GETARG_DATUM(1)",
          "old_line_content": "\t/* add some whitespace if structured type and not first item */",
          "new_line_content": "\tval = PG_GETARG_DATUM(1);",
          "content_same": false
        },
        {
          "line": 1339,
          "old_api": null,
          "new_api": "add_json",
          "old_text": null,
          "new_text": "add_json(args[i], nulls[i], result, types[i], false)",
          "old_line_content": "",
          "new_line_content": "\t\tadd_json(args[i], nulls[i], result, types[i], false);",
          "content_same": false
        },
        {
          "line": 316,
          "old_api": null,
          "new_api": "DATE_NOT_FINITE",
          "old_text": null,
          "new_text": "DATE_NOT_FINITE(date)",
          "old_line_content": "\t\t\t\telse",
          "new_line_content": "\t\t\t\tif (DATE_NOT_FINITE(date))",
          "content_same": false
        },
        {
          "line": 317,
          "old_api": null,
          "new_api": "EncodeSpecialDate",
          "old_text": null,
          "new_text": "EncodeSpecialDate(date, buf)",
          "old_line_content": "\t\t\t\t{",
          "new_line_content": "\t\t\t\t\tEncodeSpecialDate(date, buf);",
          "content_same": false
        },
        {
          "line": 829,
          "old_api": null,
          "new_api": "PG_ARGISNULL",
          "old_text": null,
          "new_text": "PG_ARGISNULL(0)",
          "old_line_content": "\t\t state->val_category == JSONTYPE_COMPOSITE))",
          "new_line_content": "\tif (!PG_ARGISNULL(0) && state->str->len > 1 &&",
          "content_same": false
        },
        {
          "line": 1344,
          "old_api": null,
          "new_api": "cstring_to_text_with_len",
          "old_text": null,
          "new_text": "cstring_to_text_with_len(result->data, result->len)",
          "old_line_content": "",
          "new_line_content": "\treturn PointerGetDatum(cstring_to_text_with_len(result->data, result->len));",
          "content_same": false
        },
        {
          "line": 833,
          "old_api": null,
          "new_api": "appendStringInfoString",
          "old_text": null,
          "new_text": "appendStringInfoString(state->str, \"\\n \")",
          "old_line_content": "",
          "new_line_content": "\t\tappendStringInfoString(state->str, \"\\n \");",
          "content_same": false
        },
        {
          "line": 322,
          "old_api": null,
          "new_api": "EncodeDateOnly",
          "old_text": null,
          "new_text": "EncodeDateOnly(&tm, USE_XSD_DATES, buf)",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\t\t\tEncodeDateOnly(&tm, USE_XSD_DATES, buf);",
          "content_same": false
        },
        {
          "line": 836,
          "old_api": null,
          "new_api": "datum_to_json_internal",
          "old_text": null,
          "new_text": "datum_to_json_internal(val, false, state->str, state->val_category,\n\t\t\t\t\t\t   state->val_output_func, false)",
          "old_line_content": "",
          "new_line_content": "\tdatum_to_json_internal(val, false, state->str, state->val_category,",
          "content_same": false
        },
        {
          "line": 328,
          "old_api": null,
          "new_api": "DatumGetTimeADT",
          "old_text": null,
          "new_text": "DatumGetTimeADT(value)",
          "old_line_content": "\t\t\t\t\t\t   *tm = &tt;",
          "new_line_content": "\t\t\t\tTimeADT\t\ttime = DatumGetTimeADT(value);",
          "content_same": false
        },
        {
          "line": 844,
          "old_api": null,
          "new_api": "PG_RETURN_POINTER",
          "old_text": null,
          "new_text": "PG_RETURN_POINTER(state)",
          "old_line_content": "",
          "new_line_content": "\tPG_RETURN_POINTER(state);",
          "content_same": false
        },
        {
          "line": 334,
          "old_api": null,
          "new_api": "time2tm",
          "old_text": null,
          "new_text": "time2tm(time, tm, &fsec)",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\t\ttime2tm(time, tm, &fsec);",
          "content_same": false
        },
        {
          "line": 335,
          "old_api": null,
          "new_api": "EncodeTimeOnly",
          "old_text": null,
          "new_text": "EncodeTimeOnly(tm, fsec, false, 0, USE_XSD_DATES, buf)",
          "old_line_content": "\t\t\tbreak;",
          "new_line_content": "\t\t\t\tEncodeTimeOnly(tm, fsec, false, 0, USE_XSD_DATES, buf);",
          "content_same": false
        },
        {
          "line": 1358,
          "old_api": null,
          "new_api": "extract_variadic_args",
          "old_text": null,
          "new_text": "extract_variadic_args(fcinfo, 0, true,\n\t\t\t\t\t\t\t\t\t\t\t  &args, &types, &nulls)",
          "old_line_content": "",
          "new_line_content": "\tint\t\t\tnargs = extract_variadic_args(fcinfo, 0, true,",
          "content_same": false
        },
        {
          "line": 340,
          "old_api": null,
          "new_api": "DatumGetTimeTzADTP",
          "old_text": null,
          "new_text": "DatumGetTimeTzADTP(value)",
          "old_line_content": "\t\t\t\t\t\t   *tm = &tt;",
          "new_line_content": "\t\t\t\tTimeTzADT  *time = DatumGetTimeTzADTP(value);",
          "content_same": false
        },
        {
          "line": 1364,
          "old_api": null,
          "new_api": "json_build_array_worker",
          "old_text": null,
          "new_text": "json_build_array_worker(nargs, args, nulls, types, false)",
          "old_line_content": "",
          "new_line_content": "\tPG_RETURN_DATUM(json_build_array_worker(nargs, args, nulls, types, false));",
          "content_same": false
        },
        {
          "line": 854,
          "old_api": null,
          "new_api": "json_agg_transfn_worker",
          "old_text": null,
          "new_text": "json_agg_transfn_worker(fcinfo, false)",
          "old_line_content": "",
          "new_line_content": "\treturn json_agg_transfn_worker(fcinfo, false);",
          "content_same": false
        },
        {
          "line": 347,
          "old_api": null,
          "new_api": "timetz2tm",
          "old_text": null,
          "new_text": "timetz2tm(time, tm, &fsec, &tz)",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\t\ttimetz2tm(time, tm, &fsec, &tz);",
          "content_same": false
        },
        {
          "line": 348,
          "old_api": null,
          "new_api": "EncodeTimeOnly",
          "old_text": null,
          "new_text": "EncodeTimeOnly(tm, fsec, true, tz, USE_XSD_DATES, buf)",
          "old_line_content": "\t\t\tbreak;",
          "new_line_content": "\t\t\t\tEncodeTimeOnly(tm, fsec, true, tz, USE_XSD_DATES, buf);",
          "content_same": false
        },
        {
          "line": 1373,
          "old_api": null,
          "new_api": "cstring_to_text_with_len",
          "old_text": null,
          "new_text": "cstring_to_text_with_len(\"[]\", 2)",
          "old_line_content": "",
          "new_line_content": "\tPG_RETURN_TEXT_P(cstring_to_text_with_len(\"[]\", 2));",
          "content_same": false
        },
        {
          "line": 863,
          "old_api": null,
          "new_api": "json_agg_transfn_worker",
          "old_text": null,
          "new_text": "json_agg_transfn_worker(fcinfo, true)",
          "old_line_content": "",
          "new_line_content": "\treturn json_agg_transfn_worker(fcinfo, true);",
          "content_same": false
        },
        {
          "line": 361,
          "old_api": null,
          "new_api": "timestamp2tm",
          "old_text": null,
          "new_text": "timestamp2tm(timestamp, NULL, &tm, &fsec, NULL, NULL)",
          "old_line_content": "\t\t\t\telse",
          "new_line_content": "\t\t\t\telse if (timestamp2tm(timestamp, NULL, &tm, &fsec, NULL, NULL) == 0)",
          "content_same": false
        },
        {
          "line": 1385,
          "old_api": null,
          "new_api": "PG_GETARG_ARRAYTYPE_P",
          "old_text": null,
          "new_text": "PG_GETARG_ARRAYTYPE_P(0)",
          "old_line_content": "\tStringInfoData result;",
          "new_line_content": "\tArrayType  *in_array = PG_GETARG_ARRAYTYPE_P(0);",
          "content_same": false
        },
        {
          "line": 1386,
          "old_api": null,
          "new_api": "ARR_NDIM",
          "old_text": null,
          "new_text": "ARR_NDIM(in_array)",
          "old_line_content": "\tDatum\t   *in_datums;",
          "new_line_content": "\tint\t\t\tndims = ARR_NDIM(in_array);",
          "content_same": false
        },
        {
          "line": 365,
          "old_api": null,
          "new_api": "errcode",
          "old_text": null,
          "new_text": "errcode(ERRCODE_DATETIME_VALUE_OUT_OF_RANGE)",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\t\t\t\t\t(errcode(ERRCODE_DATETIME_VALUE_OUT_OF_RANGE),",
          "content_same": false
        },
        {
          "line": 366,
          "old_api": null,
          "new_api": "errmsg",
          "old_text": null,
          "new_text": "errmsg(\"timestamp out of range\")",
          "old_line_content": "\t\t\tbreak;",
          "new_line_content": "\t\t\t\t\t\t\t errmsg(\"timestamp out of range\")));",
          "content_same": false
        },
        {
          "line": 879,
          "old_api": null,
          "new_api": "PG_GETARG_POINTER",
          "old_text": null,
          "new_text": "PG_GETARG_POINTER(0)",
          "old_line_content": "\t/* NULL result for no rows in, as is standard with aggregates */",
          "new_line_content": "\t\t(JsonAggState *) PG_GETARG_POINTER(0);",
          "content_same": false
        },
        {
          "line": 883,
          "old_api": null,
          "new_api": "PG_RETURN_NULL",
          "old_text": null,
          "new_text": "PG_RETURN_NULL()",
          "old_line_content": "\t/* Else return state with appropriate array terminator added */",
          "new_line_content": "\t\tPG_RETURN_NULL();",
          "content_same": false
        },
        {
          "line": 886,
          "old_api": null,
          "new_api": "catenate_stringinfo_string",
          "old_text": null,
          "new_text": "catenate_stringinfo_string(state->str, \"]\")",
          "old_line_content": "",
          "new_line_content": "\tPG_RETURN_TEXT_P(catenate_stringinfo_string(state->str, \"]\"));",
          "content_same": false
        },
        {
          "line": 1399,
          "old_api": null,
          "new_api": "CStringGetTextDatum",
          "old_text": null,
          "new_text": "CStringGetTextDatum(\"{}\")",
          "old_line_content": "",
          "new_line_content": "\t\t\tPG_RETURN_DATUM(CStringGetTextDatum(\"{}\"));",
          "content_same": false
        },
        {
          "line": 377,
          "old_api": null,
          "new_api": "DatumGetTimestampTz",
          "old_text": null,
          "new_text": "DatumGetTimestampTz(value)",
          "old_line_content": "\t\t\t\t/*",
          "new_line_content": "\t\t\t\ttimestamp = DatumGetTimestampTz(value);",
          "content_same": false
        },
        {
          "line": 1405,
          "old_api": null,
          "new_api": "errcode",
          "old_text": null,
          "new_text": "errcode(ERRCODE_ARRAY_SUBSCRIPT_ERROR)",
          "old_line_content": "\t\t\tbreak;",
          "new_line_content": "\t\t\t\t\t\t(errcode(ERRCODE_ARRAY_SUBSCRIPT_ERROR),",
          "content_same": false
        },
        {
          "line": 1406,
          "old_api": null,
          "new_api": "errmsg",
          "old_text": null,
          "new_text": "errmsg(\"array must have even number of elements\")",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t\t\t errmsg(\"array must have even number of elements\")));",
          "content_same": false
        },
        {
          "line": 898,
          "old_api": null,
          "new_api": "DatumGetUInt32",
          "old_text": null,
          "new_text": "DatumGetUInt32(hash)",
          "old_line_content": "",
          "new_line_content": "\treturn DatumGetUInt32(hash);",
          "content_same": false
        },
        {
          "line": 1412,
          "old_api": null,
          "new_api": "errcode",
          "old_text": null,
          "new_text": "errcode(ERRCODE_ARRAY_SUBSCRIPT_ERROR)",
          "old_line_content": "\t\t\tbreak;",
          "new_line_content": "\t\t\t\t\t\t(errcode(ERRCODE_ARRAY_SUBSCRIPT_ERROR),",
          "content_same": false
        },
        {
          "line": 1413,
          "old_api": null,
          "new_api": "errmsg",
          "old_text": null,
          "new_text": "errmsg(\"array must have two columns\")",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t\t\t errmsg(\"array must have two columns\")));",
          "content_same": false
        },
        {
          "line": 393,
          "old_api": null,
          "new_api": "EncodeSpecialTimestamp",
          "old_text": null,
          "new_text": "EncodeSpecialTimestamp(timestamp, buf)",
          "old_line_content": "\t\t\t\t\t\t\t\t\t  tzp ? NULL : &tzn, NULL) == 0)",
          "new_line_content": "\t\t\t\t\tEncodeSpecialTimestamp(timestamp, buf);",
          "content_same": false
        },
        {
          "line": 394,
          "old_api": null,
          "new_api": "timestamp2tm",
          "old_text": null,
          "new_text": "timestamp2tm(timestamp, tzp ? NULL : &tz, &tm, &fsec,\n\t\t\t\t\t\t\t\t\t  tzp ? NULL : &tzn, NULL)",
          "old_line_content": "\t\t\t\t{",
          "new_line_content": "\t\t\t\telse if (timestamp2tm(timestamp, tzp ? NULL : &tz, &tm, &fsec,",
          "content_same": false
        },
        {
          "line": 1418,
          "old_api": null,
          "new_api": "errcode",
          "old_text": null,
          "new_text": "errcode(ERRCODE_ARRAY_SUBSCRIPT_ERROR)",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\t\t\t(errcode(ERRCODE_ARRAY_SUBSCRIPT_ERROR),",
          "content_same": false
        },
        {
          "line": 1419,
          "old_api": null,
          "new_api": "errmsg",
          "old_text": null,
          "new_text": "errmsg(\"wrong number of array subscripts\")",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t\t errmsg(\"wrong number of array subscripts\")));",
          "content_same": false
        },
        {
          "line": 1422,
          "old_api": null,
          "new_api": "deconstruct_array_builtin",
          "old_text": null,
          "new_text": "deconstruct_array_builtin(in_array, TEXTOID, &in_datums, &in_nulls, &in_count)",
          "old_line_content": "\tcount = in_count / 2;",
          "new_line_content": "\tdeconstruct_array_builtin(in_array, TEXTOID, &in_datums, &in_nulls, &in_count);",
          "content_same": false
        },
        {
          "line": 400,
          "old_api": null,
          "new_api": "EncodeDateTime",
          "old_text": null,
          "new_text": "EncodeDateTime(&tm, fsec, true, tz, tzn, USE_XSD_DATES, buf)",
          "old_line_content": "\t\t\t\telse",
          "new_line_content": "\t\t\t\t\tEncodeDateTime(&tm, fsec, true, tz, tzn, USE_XSD_DATES, buf);",
          "content_same": false
        },
        {
          "line": 913,
          "old_api": null,
          "new_api": "strncmp",
          "old_text": null,
          "new_text": "strncmp(entry1->key, entry2->key, entry1->key_len)",
          "old_line_content": "",
          "new_line_content": "\treturn strncmp(entry1->key, entry2->key, entry1->key_len);",
          "content_same": false
        },
        {
          "line": 404,
          "old_api": null,
          "new_api": "errcode",
          "old_text": null,
          "new_text": "errcode(ERRCODE_DATETIME_VALUE_OUT_OF_RANGE)",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\t\t\t\t\t(errcode(ERRCODE_DATETIME_VALUE_OUT_OF_RANGE),",
          "content_same": false
        },
        {
          "line": 405,
          "old_api": null,
          "new_api": "errmsg",
          "old_text": null,
          "new_text": "errmsg(\"timestamp out of range\")",
          "old_line_content": "\t\t\tbreak;",
          "new_line_content": "\t\t\t\t\t\t\t errmsg(\"timestamp out of range\")));",
          "content_same": false
        },
        {
          "line": 1428,
          "old_api": null,
          "new_api": "appendStringInfoChar",
          "old_text": null,
          "new_text": "appendStringInfoChar(&result, '{')",
          "old_line_content": "\tfor (i = 0; i < count; ++i)",
          "new_line_content": "\tappendStringInfoChar(&result, '{');",
          "content_same": false
        },
        {
          "line": 409,
          "old_api": null,
          "new_api": "elog",
          "old_text": null,
          "new_text": "elog(ERROR, \"unknown jsonb value datetime type oid %u\", typid)",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\telog(ERROR, \"unknown jsonb value datetime type oid %u\", typid);",
          "content_same": false
        },
        {
          "line": 1434,
          "old_api": null,
          "new_api": "errcode",
          "old_text": null,
          "new_text": "errcode(ERRCODE_NULL_VALUE_NOT_ALLOWED)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t\t(errcode(ERRCODE_NULL_VALUE_NOT_ALLOWED),",
          "content_same": false
        },
        {
          "line": 927,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(&ctl, 0, sizeof(ctl))",
          "old_line_content": "\tctl.entrysize = sizeof(JsonUniqueHashEntry);",
          "new_line_content": "\tmemset(&ctl, 0, sizeof(ctl));",
          "content_same": false
        },
        {
          "line": 1441,
          "old_api": null,
          "new_api": "appendStringInfoString",
          "old_text": null,
          "new_text": "appendStringInfoString(&result, \" : \")",
          "old_line_content": "\t\tif (in_nulls[i * 2 + 1])",
          "new_line_content": "\t\tappendStringInfoString(&result, \" : \");",
          "content_same": false
        },
        {
          "line": 1444,
          "old_api": null,
          "new_api": "appendStringInfoString",
          "old_text": null,
          "new_text": "appendStringInfoString(&result, \"null\")",
          "old_line_content": "\t\t{",
          "new_line_content": "\t\t\tappendStringInfoString(&result, \"null\");",
          "content_same": false
        },
        {
          "line": 934,
          "old_api": null,
          "new_api": "hash_create",
          "old_text": null,
          "new_text": "hash_create(\"json object hashtable\",\n\t\t\t\t\t   32,\n\t\t\t\t\t   &ctl,\n\t\t\t\t\t   HASH_ELEM | HASH_CONTEXT | HASH_FUNCTION | HASH_COMPARE)",
          "old_line_content": "\t\t\t\t\t   &ctl,",
          "new_line_content": "\t*cxt = hash_create(\"json object hashtable\",",
          "content_same": false
        },
        {
          "line": 1448,
          "old_api": null,
          "new_api": "escape_json",
          "old_text": null,
          "new_text": "escape_json(&result, v)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tescape_json(&result, v);",
          "content_same": false
        },
        {
          "line": 1449,
          "old_api": null,
          "new_api": "pfree",
          "old_text": null,
          "new_text": "pfree(v)",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\tpfree(v);",
          "content_same": false
        },
        {
          "line": 429,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(dim < ndims)",
          "old_line_content": "\tsep = use_line_feeds ? \",\\n \" : \",\";",
          "new_line_content": "\tAssert(dim < ndims);",
          "content_same": false
        },
        {
          "line": 943,
          "old_api": null,
          "new_api": "json_unique_check_init",
          "old_text": null,
          "new_text": "json_unique_check_init(&cxt->check)",
          "old_line_content": "\tcxt->skipped_keys.data = NULL;",
          "new_line_content": "\tjson_unique_check_init(&cxt->check);",
          "content_same": false
        },
        {
          "line": 1455,
          "old_api": null,
          "new_api": "pfree",
          "old_text": null,
          "new_text": "pfree(in_datums)",
          "old_line_content": "",
          "new_line_content": "\tpfree(in_datums);",
          "content_same": false
        },
        {
          "line": 433,
          "old_api": null,
          "new_api": "appendStringInfoChar",
          "old_text": null,
          "new_text": "appendStringInfoChar(result, '[')",
          "old_line_content": "\tfor (i = 1; i <= dims[dim]; i++)",
          "new_line_content": "\tappendStringInfoChar(result, '[');",
          "content_same": false
        },
        {
          "line": 1458,
          "old_api": null,
          "new_api": "cstring_to_text_with_len",
          "old_text": null,
          "new_text": "cstring_to_text_with_len(result.data, result.len)",
          "old_line_content": "",
          "new_line_content": "\trval = cstring_to_text_with_len(result.data, result.len);",
          "content_same": false
        },
        {
          "line": 1461,
          "old_api": null,
          "new_api": "PG_RETURN_TEXT_P",
          "old_text": null,
          "new_text": "PG_RETURN_TEXT_P(rval)",
          "old_line_content": "",
          "new_line_content": "\tPG_RETURN_TEXT_P(rval);",
          "content_same": false
        },
        {
          "line": 438,
          "old_api": null,
          "new_api": "appendStringInfoString",
          "old_text": null,
          "new_text": "appendStringInfoString(result, sep)",
          "old_line_content": "\t\tif (dim + 1 == ndims)",
          "new_line_content": "\t\t\tappendStringInfoString(result, sep);",
          "content_same": false
        },
        {
          "line": 442,
          "old_api": null,
          "new_api": "datum_to_json_internal",
          "old_text": null,
          "new_text": "datum_to_json_internal(vals[*valcount], nulls[*valcount],\n\t\t\t\t\t\t\t\t   result, tcategory,\n\t\t\t\t\t\t\t\t   outfuncoid, false)",
          "old_line_content": "\t\t\t\t\t\t\t\t   outfuncoid, false);",
          "new_line_content": "\t\t\tdatum_to_json_internal(vals[*valcount], nulls[*valcount],",
          "content_same": false
        },
        {
          "line": 955,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(key)",
          "old_line_content": "",
          "new_line_content": "\tentry.key_len = strlen(key);",
          "content_same": false
        },
        {
          "line": 958,
          "old_api": null,
          "new_api": "hash_search",
          "old_text": null,
          "new_text": "hash_search(*cxt, &entry, HASH_ENTER, &found)",
          "old_line_content": "\treturn !found;",
          "new_line_content": "\t(void) hash_search(*cxt, &entry, HASH_ENTER, &found);",
          "content_same": false
        },
        {
          "line": 1475,
          "old_api": null,
          "new_api": "ARR_NDIM",
          "old_text": null,
          "new_text": "ARR_NDIM(key_array)",
          "old_line_content": "\tStringInfoData result;",
          "new_line_content": "\tint\t\t\tnkdims = ARR_NDIM(key_array);",
          "content_same": false
        },
        {
          "line": 1476,
          "old_api": null,
          "new_api": "ARR_NDIM",
          "old_text": null,
          "new_text": "ARR_NDIM(val_array)",
          "old_line_content": "\tDatum\t   *key_datums,",
          "new_line_content": "\tint\t\t\tnvdims = ARR_NDIM(val_array);",
          "content_same": false
        },
        {
          "line": 453,
          "old_api": null,
          "new_api": "array_dim_to_json",
          "old_text": null,
          "new_text": "array_dim_to_json(result, dim + 1, ndims, dims, vals, nulls,\n\t\t\t\t\t\t\t  valcount, tcategory, outfuncoid, false)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tarray_dim_to_json(result, dim + 1, ndims, dims, vals, nulls,",
          "content_same": false
        },
        {
          "line": 458,
          "old_api": null,
          "new_api": "appendStringInfoChar",
          "old_text": null,
          "new_text": "appendStringInfoChar(result, ']')",
          "old_line_content": "",
          "new_line_content": "\tappendStringInfoChar(result, ']');",
          "content_same": false
        },
        {
          "line": 977,
          "old_api": null,
          "new_api": "initStringInfo",
          "old_text": null,
          "new_text": "initStringInfo(out)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tinitStringInfo(out);",
          "content_same": false
        },
        {
          "line": 978,
          "old_api": null,
          "new_api": "MemoryContextSwitchTo",
          "old_text": null,
          "new_text": "MemoryContextSwitchTo(oldcxt)",
          "old_line_content": "\telse",
          "new_line_content": "\t\tMemoryContextSwitchTo(oldcxt);",
          "content_same": false
        },
        {
          "line": 467,
          "old_api": null,
          "new_api": "DatumGetArrayTypeP",
          "old_text": null,
          "new_text": "DatumGetArrayTypeP(array)",
          "old_line_content": "\tint\t\t   *dim;",
          "new_line_content": "\tArrayType  *v = DatumGetArrayTypeP(array);",
          "content_same": false
        },
        {
          "line": 468,
          "old_api": null,
          "new_api": "ARR_ELEMTYPE",
          "old_text": null,
          "new_text": "ARR_ELEMTYPE(v)",
          "old_line_content": "\tint\t\t\tndim;",
          "new_line_content": "\tOid\t\t\telement_type = ARR_ELEMTYPE(v);",
          "content_same": false
        },
        {
          "line": 1490,
          "old_api": null,
          "new_api": "errcode",
          "old_text": null,
          "new_text": "errcode(ERRCODE_ARRAY_SUBSCRIPT_ERROR)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t(errcode(ERRCODE_ARRAY_SUBSCRIPT_ERROR),",
          "content_same": false
        },
        {
          "line": 1491,
          "old_api": null,
          "new_api": "errmsg",
          "old_text": null,
          "new_text": "errmsg(\"wrong number of array subscripts\")",
          "old_line_content": "\tif (nkdims == 0)",
          "new_line_content": "\t\t\t\t errmsg(\"wrong number of array subscripts\")));",
          "content_same": false
        },
        {
          "line": 1496,
          "old_api": null,
          "new_api": "deconstruct_array_builtin",
          "old_text": null,
          "new_text": "deconstruct_array_builtin(key_array, TEXTOID, &key_datums, &key_nulls, &key_count)",
          "old_line_content": "",
          "new_line_content": "\tdeconstruct_array_builtin(key_array, TEXTOID, &key_datums, &key_nulls, &key_count);",
          "content_same": false
        },
        {
          "line": 1497,
          "old_api": null,
          "new_api": "deconstruct_array_builtin",
          "old_text": null,
          "new_text": "deconstruct_array_builtin(val_array, TEXTOID, &val_datums, &val_nulls, &val_count)",
          "old_line_content": "\tif (key_count != val_count)",
          "new_line_content": "\tdeconstruct_array_builtin(val_array, TEXTOID, &val_datums, &val_nulls, &val_count);",
          "content_same": false
        },
        {
          "line": 1501,
          "old_api": null,
          "new_api": "errcode",
          "old_text": null,
          "new_text": "errcode(ERRCODE_ARRAY_SUBSCRIPT_ERROR)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t(errcode(ERRCODE_ARRAY_SUBSCRIPT_ERROR),",
          "content_same": false
        },
        {
          "line": 482,
          "old_api": null,
          "new_api": "ARR_DIMS",
          "old_text": null,
          "new_text": "ARR_DIMS(v)",
          "old_line_content": "",
          "new_line_content": "\tdim = ARR_DIMS(v);",
          "content_same": false
        },
        {
          "line": 483,
          "old_api": null,
          "new_api": "ArrayGetNItems",
          "old_text": null,
          "new_text": "ArrayGetNItems(ndim, dim)",
          "old_line_content": "\tif (nitems <= 0)",
          "new_line_content": "\tnitems = ArrayGetNItems(ndim, dim);",
          "content_same": false
        },
        {
          "line": 1506,
          "old_api": null,
          "new_api": "appendStringInfoChar",
          "old_text": null,
          "new_text": "appendStringInfoChar(&result, '{')",
          "old_line_content": "\tfor (i = 0; i < key_count; ++i)",
          "new_line_content": "\tappendStringInfoChar(&result, '{');",
          "content_same": false
        },
        {
          "line": 487,
          "old_api": null,
          "new_api": "appendStringInfoString",
          "old_text": null,
          "new_text": "appendStringInfoString(result, \"[]\")",
          "old_line_content": "\t}",
          "new_line_content": "\t\tappendStringInfoString(result, \"[]\");",
          "content_same": false
        },
        {
          "line": 1512,
          "old_api": null,
          "new_api": "errcode",
          "old_text": null,
          "new_text": "errcode(ERRCODE_NULL_VALUE_NOT_ALLOWED)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t\t(errcode(ERRCODE_NULL_VALUE_NOT_ALLOWED),",
          "content_same": false
        },
        {
          "line": 491,
          "old_api": null,
          "new_api": "get_typlenbyvalalign",
          "old_text": null,
          "new_text": "get_typlenbyvalalign(element_type,\n\t\t\t\t\t\t &typlen, &typbyval, &typalign)",
          "old_line_content": "",
          "new_line_content": "\tget_typlenbyvalalign(element_type,",
          "content_same": false
        },
        {
          "line": 1004,
          "old_api": null,
          "new_api": "AggCheckCallContext",
          "old_text": null,
          "new_text": "AggCheckCallContext(fcinfo, &aggcontext)",
          "old_line_content": "\t\t/* cannot be called directly because of internal-type argument */",
          "new_line_content": "\tif (!AggCheckCallContext(fcinfo, &aggcontext))",
          "content_same": false
        },
        {
          "line": 494,
          "old_api": null,
          "new_api": "json_categorize_type",
          "old_text": null,
          "new_text": "json_categorize_type(element_type, false,\n\t\t\t\t\t\t &tcategory, &outfuncoid)",
          "old_line_content": "",
          "new_line_content": "\tjson_categorize_type(element_type, false,",
          "content_same": false
        },
        {
          "line": 1007,
          "old_api": null,
          "new_api": "elog",
          "old_text": null,
          "new_text": "elog(ERROR, \"json_object_agg_transfn called in non-aggregate context\")",
          "old_line_content": "",
          "new_line_content": "\t\telog(ERROR, \"json_object_agg_transfn called in non-aggregate context\");",
          "content_same": false
        },
        {
          "line": 1519,
          "old_api": null,
          "new_api": "appendStringInfoString",
          "old_text": null,
          "new_text": "appendStringInfoString(&result, \" : \")",
          "old_line_content": "\t\tif (val_nulls[i])",
          "new_line_content": "\t\tappendStringInfoString(&result, \" : \");",
          "content_same": false
        },
        {
          "line": 497,
          "old_api": null,
          "new_api": "deconstruct_array",
          "old_text": null,
          "new_text": "deconstruct_array(v, element_type, typlen, typbyval,\n\t\t\t\t\t  typalign, &elements, &nulls,\n\t\t\t\t\t  &nitems)",
          "old_line_content": "\t\t\t\t\t  &nitems);",
          "new_line_content": "\tdeconstruct_array(v, element_type, typlen, typbyval,",
          "content_same": false
        },
        {
          "line": 1010,
          "old_api": null,
          "new_api": "PG_ARGISNULL",
          "old_text": null,
          "new_text": "PG_ARGISNULL(0)",
          "old_line_content": "\t\tOid\t\t\targ_type;",
          "new_line_content": "\tif (PG_ARGISNULL(0))",
          "content_same": false
        },
        {
          "line": 1522,
          "old_api": null,
          "new_api": "appendStringInfoString",
          "old_text": null,
          "new_text": "appendStringInfoString(&result, \"null\")",
          "old_line_content": "\t\t{",
          "new_line_content": "\t\t\tappendStringInfoString(&result, \"null\");",
          "content_same": false
        },
        {
          "line": 501,
          "old_api": null,
          "new_api": "array_dim_to_json",
          "old_text": null,
          "new_text": "array_dim_to_json(result, 0, ndim, dim, elements, nulls, &count, tcategory,\n\t\t\t\t\t  outfuncoid, use_line_feeds)",
          "old_line_content": "",
          "new_line_content": "\tarray_dim_to_json(result, 0, ndim, dim, elements, nulls, &count, tcategory,",
          "content_same": false
        },
        {
          "line": 1526,
          "old_api": null,
          "new_api": "escape_json",
          "old_text": null,
          "new_text": "escape_json(&result, v)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tescape_json(&result, v);",
          "content_same": false
        },
        {
          "line": 1527,
          "old_api": null,
          "new_api": "pfree",
          "old_text": null,
          "new_text": "pfree(v)",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\tpfree(v);",
          "content_same": false
        },
        {
          "line": 504,
          "old_api": null,
          "new_api": "pfree",
          "old_text": null,
          "new_text": "pfree(elements)",
          "old_line_content": "}",
          "new_line_content": "\tpfree(elements);",
          "content_same": false
        },
        {
          "line": 505,
          "old_api": null,
          "new_api": "pfree",
          "old_text": null,
          "new_text": "pfree(nulls)",
          "old_line_content": "",
          "new_line_content": "\tpfree(nulls);",
          "content_same": false
        },
        {
          "line": 1021,
          "old_api": null,
          "new_api": "palloc",
          "old_text": null,
          "new_text": "palloc(sizeof(JsonAggState))",
          "old_line_content": "\t\tif (unique_keys)",
          "new_line_content": "\t\tstate = (JsonAggState *) palloc(sizeof(JsonAggState));",
          "content_same": false
        },
        {
          "line": 1535,
          "old_api": null,
          "new_api": "pfree",
          "old_text": null,
          "new_text": "pfree(val_datums)",
          "old_line_content": "",
          "new_line_content": "\tpfree(val_datums);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 1025,
          "old_api": "MemoryContextSwitchTo",
          "new_api": null,
          "old_text": "MemoryContextSwitchTo(oldcontext)",
          "new_text": null,
          "old_line_content": "\t\tMemoryContextSwitchTo(oldcontext);",
          "new_line_content": "\t\telse",
          "content_same": false
        },
        {
          "line": 1537,
          "old_api": "pfree",
          "new_api": null,
          "old_text": "pfree(result.data)",
          "new_text": null,
          "old_line_content": "\tpfree(result.data);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1030,
          "old_api": "ereport",
          "new_api": null,
          "old_text": "ereport(ERROR,\n\t\t\t\t\t(errcode(ERRCODE_INVALID_PARAMETER_VALUE),\n\t\t\t\t\t errmsg(\"could not determine data type for argument %d\", 1)))",
          "new_text": null,
          "old_line_content": "\t\t\tereport(ERROR,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1031,
          "old_api": "errcode",
          "new_api": null,
          "old_text": "errcode(ERRCODE_INVALID_PARAMETER_VALUE)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t(errcode(ERRCODE_INVALID_PARAMETER_VALUE),",
          "new_line_content": "\t\tif (arg_type == InvalidOid)",
          "content_same": false
        },
        {
          "line": 1037,
          "old_api": "get_fn_expr_argtype",
          "new_api": null,
          "old_text": "get_fn_expr_argtype(fcinfo->flinfo, 2)",
          "new_text": null,
          "old_line_content": "\t\targ_type = get_fn_expr_argtype(fcinfo->flinfo, 2);",
          "new_line_content": "\t\t\t\t\t\t\t &state->key_output_func);",
          "content_same": false
        },
        {
          "line": 1551,
          "old_api": "appendStringInfoCharMacro",
          "new_api": null,
          "old_text": "appendStringInfoCharMacro(buf, '\"')",
          "new_text": null,
          "old_line_content": "\tappendStringInfoCharMacro(buf, '\"');",
          "new_line_content": "\tconst char *p;",
          "content_same": false
        },
        {
          "line": 528,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(\",\")",
          "new_text": null,
          "old_line_content": "\tseplen = use_line_feeds ? strlen(\",\\n \") : strlen(\",\");",
          "new_line_content": "\t */",
          "content_same": false
        },
        {
          "line": 1040,
          "old_api": "ereport",
          "new_api": null,
          "old_text": "ereport(ERROR,\n\t\t\t\t\t(errcode(ERRCODE_INVALID_PARAMETER_VALUE),\n\t\t\t\t\t errmsg(\"could not determine data type for argument %d\", 2)))",
          "new_text": null,
          "old_line_content": "\t\t\tereport(ERROR,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1041,
          "old_api": "errcode",
          "new_api": null,
          "old_text": "errcode(ERRCODE_INVALID_PARAMETER_VALUE)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t(errcode(ERRCODE_INVALID_PARAMETER_VALUE),",
          "new_line_content": "\t\tif (arg_type == InvalidOid)",
          "content_same": false
        },
        {
          "line": 533,
          "old_api": "HeapTupleHeaderGetTypeId",
          "new_api": null,
          "old_text": "HeapTupleHeaderGetTypeId(td)",
          "new_text": null,
          "old_line_content": "\ttupType = HeapTupleHeaderGetTypeId(td);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 534,
          "old_api": "HeapTupleHeaderGetTypMod",
          "new_api": null,
          "old_text": "HeapTupleHeaderGetTypMod(td)",
          "new_text": null,
          "old_line_content": "\ttupTypmod = HeapTupleHeaderGetTypMod(td);",
          "new_line_content": "\t/* Extract rowtype info and find a tupdesc */",
          "content_same": false
        },
        {
          "line": 1047,
          "old_api": "appendStringInfoString",
          "new_api": null,
          "old_text": "appendStringInfoString(state->str, \"{ \")",
          "new_text": null,
          "old_line_content": "\t\tappendStringInfoString(state->str, \"{ \");",
          "new_line_content": "\t\t\t\t\t\t\t &state->val_output_func);",
          "content_same": false
        },
        {
          "line": 1557,
          "old_api": "appendStringInfoString",
          "new_api": null,
          "old_text": "appendStringInfoString(buf, \"\\\\b\")",
          "new_text": null,
          "old_line_content": "\t\t\t\tappendStringInfoString(buf, \"\\\\b\");",
          "new_line_content": "\t\t{",
          "content_same": false
        },
        {
          "line": 1560,
          "old_api": "appendStringInfoString",
          "new_api": null,
          "old_text": "appendStringInfoString(buf, \"\\\\f\")",
          "new_text": null,
          "old_line_content": "\t\t\t\tappendStringInfoString(buf, \"\\\\f\");",
          "new_line_content": "\t\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 538,
          "old_api": "HeapTupleHeaderGetDatumLength",
          "new_api": null,
          "old_text": "HeapTupleHeaderGetDatumLength(td)",
          "new_text": null,
          "old_line_content": "\ttmptup.t_len = HeapTupleHeaderGetDatumLength(td);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1051,
          "old_api": "PG_GETARG_POINTER",
          "new_api": null,
          "old_text": "PG_GETARG_POINTER(0)",
          "new_text": null,
          "old_line_content": "\t\tstate = (JsonAggState *) PG_GETARG_POINTER(0);",
          "new_line_content": "\telse",
          "content_same": false
        },
        {
          "line": 1563,
          "old_api": "appendStringInfoString",
          "new_api": null,
          "old_text": "appendStringInfoString(buf, \"\\\\n\")",
          "new_text": null,
          "old_line_content": "\t\t\t\tappendStringInfoString(buf, \"\\\\n\");",
          "new_line_content": "\t\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 542,
          "old_api": "appendStringInfoChar",
          "new_api": null,
          "old_text": "appendStringInfoChar(result, '{')",
          "new_text": null,
          "old_line_content": "\tappendStringInfoChar(result, '{');",
          "new_line_content": "\ttuple = &tmptup;",
          "content_same": false
        },
        {
          "line": 1566,
          "old_api": "appendStringInfoString",
          "new_api": null,
          "old_text": "appendStringInfoString(buf, \"\\\\r\")",
          "new_text": null,
          "old_line_content": "\t\t\t\tappendStringInfoString(buf, \"\\\\r\");",
          "new_line_content": "\t\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 1569,
          "old_api": "appendStringInfoString",
          "new_api": null,
          "old_text": "appendStringInfoString(buf, \"\\\\t\")",
          "new_text": null,
          "old_line_content": "\t\t\t\tappendStringInfoString(buf, \"\\\\t\");",
          "new_line_content": "\t\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 1572,
          "old_api": "appendStringInfoString",
          "new_api": null,
          "old_text": "appendStringInfoString(buf, \"\\\\\\\"\")",
          "new_text": null,
          "old_line_content": "\t\t\t\tappendStringInfoString(buf, \"\\\\\\\"\");",
          "new_line_content": "\t\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 1062,
          "old_api": "PG_ARGISNULL",
          "new_api": null,
          "old_text": "PG_ARGISNULL(1)",
          "new_text": null,
          "old_line_content": "\tif (PG_ARGISNULL(1))",
          "new_line_content": "\t */",
          "content_same": false
        },
        {
          "line": 551,
          "old_api": "TupleDescAttr",
          "new_api": null,
          "old_text": "TupleDescAttr(tupdesc, i)",
          "new_text": null,
          "old_line_content": "\t\tForm_pg_attribute att = TupleDescAttr(tupdesc, i);",
          "new_line_content": "\t\tJsonTypeCategory tcategory;",
          "content_same": false
        },
        {
          "line": 1063,
          "old_api": "ereport",
          "new_api": null,
          "old_text": "ereport(ERROR,\n\t\t\t\t(errcode(ERRCODE_NULL_VALUE_NOT_ALLOWED),\n\t\t\t\t errmsg(\"null value not allowed for object key\")))",
          "new_text": null,
          "old_line_content": "\t\tereport(ERROR,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1575,
          "old_api": "appendStringInfoString",
          "new_api": null,
          "old_text": "appendStringInfoString(buf, \"\\\\\\\\\")",
          "new_text": null,
          "old_line_content": "\t\t\t\tappendStringInfoString(buf, \"\\\\\\\\\");",
          "new_line_content": "\t\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 1579,
          "old_api": "appendStringInfo",
          "new_api": null,
          "old_text": "appendStringInfo(buf, \"\\\\u%04x\", (int) *p)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tappendStringInfo(buf, \"\\\\u%04x\", (int) *p);",
          "new_line_content": "\t\t\tdefault:",
          "content_same": false
        },
        {
          "line": 1068,
          "old_api": "PG_ARGISNULL",
          "new_api": null,
          "old_text": "PG_ARGISNULL(2)",
          "new_text": null,
          "old_line_content": "\tskip = absent_on_null && PG_ARGISNULL(2);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 557,
          "old_api": "appendBinaryStringInfo",
          "new_api": null,
          "old_text": "appendBinaryStringInfo(result, sep, seplen)",
          "new_text": null,
          "old_line_content": "\t\t\tappendBinaryStringInfo(result, sep, seplen);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 560,
          "old_api": "NameStr",
          "new_api": null,
          "old_text": "NameStr(att->attname)",
          "new_text": null,
          "old_line_content": "\t\tattname = NameStr(att->attname);",
          "new_line_content": "\t\tneedsep = true;",
          "content_same": false
        },
        {
          "line": 561,
          "old_api": "escape_json",
          "new_api": null,
          "old_text": "escape_json(result, attname)",
          "new_text": null,
          "old_line_content": "\t\tescape_json(result, attname);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1585,
          "old_api": "appendStringInfoCharMacro",
          "new_api": null,
          "old_text": "appendStringInfoCharMacro(buf, '\"')",
          "new_text": null,
          "old_line_content": "\tappendStringInfoCharMacro(buf, '\"');",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 1078,
          "old_api": "PG_RETURN_POINTER",
          "new_api": null,
          "old_text": "PG_RETURN_POINTER(state)",
          "new_text": null,
          "old_line_content": "\t\t\tPG_RETURN_POINTER(state);",
          "new_line_content": "\t\t */",
          "content_same": false
        },
        {
          "line": 572,
          "old_api": "json_categorize_type",
          "new_api": null,
          "old_text": "json_categorize_type(att->atttypid, false, &tcategory,\n\t\t\t\t\t\t\t\t &outfuncoid)",
          "new_text": null,
          "old_line_content": "\t\t\tjson_categorize_type(att->atttypid, false, &tcategory,",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 575,
          "old_api": "datum_to_json_internal",
          "new_api": null,
          "old_text": "datum_to_json_internal(val, isnull, result, tcategory, outfuncoid,\n\t\t\t\t\t\t\t   false)",
          "new_text": null,
          "old_line_content": "\t\tdatum_to_json_internal(val, isnull, result, tcategory, outfuncoid,",
          "new_line_content": "\t\t\t\t\t\t\t\t &outfuncoid);",
          "content_same": false
        },
        {
          "line": 1599,
          "old_api": "palloc",
          "new_api": null,
          "old_text": "palloc(sizeof(*entry))",
          "new_text": null,
          "old_line_content": "\tentry = palloc(sizeof(*entry));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 579,
          "old_api": "appendStringInfoChar",
          "new_api": null,
          "old_text": "appendStringInfoChar(result, '}')",
          "new_text": null,
          "old_line_content": "\tappendStringInfoChar(result, '}');",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 580,
          "old_api": "ReleaseTupleDesc",
          "new_api": null,
          "old_text": "ReleaseTupleDesc(tupdesc)",
          "new_text": null,
          "old_line_content": "\tReleaseTupleDesc(tupdesc);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1091,
          "old_api": "appendStringInfoString",
          "new_api": null,
          "old_text": "appendStringInfoString(out, \", \")",
          "new_text": null,
          "old_line_content": "\t\t\tappendStringInfoString(out, \", \");",
          "new_line_content": "\t\t */",
          "content_same": false
        },
        {
          "line": 1094,
          "old_api": "PG_GETARG_DATUM",
          "new_api": null,
          "old_text": "PG_GETARG_DATUM(1)",
          "new_text": null,
          "old_line_content": "\targ = PG_GETARG_DATUM(1);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1098,
          "old_api": "datum_to_json_internal",
          "new_api": null,
          "old_text": "datum_to_json_internal(arg, false, out, state->key_category,\n\t\t\t\t\t\t   state->key_output_func, true)",
          "new_text": null,
          "old_line_content": "\tdatum_to_json_internal(arg, false, out, state->key_category,",
          "new_line_content": "\tkey_offset = out->len;",
          "content_same": false
        },
        {
          "line": 1105,
          "old_api": "json_unique_check_key",
          "new_api": null,
          "old_text": "json_unique_check_key(&state->unique_check.check, key, 0)",
          "new_text": null,
          "old_line_content": "\t\tif (!json_unique_check_key(&state->unique_check.check, key, 0))",
          "new_line_content": "\t\tconst char *key = &out->data[key_offset];",
          "content_same": false
        },
        {
          "line": 1106,
          "old_api": "ereport",
          "new_api": null,
          "old_text": "ereport(ERROR,\n\t\t\t\t\terrcode(ERRCODE_DUPLICATE_JSON_OBJECT_KEY_VALUE),\n\t\t\t\t\terrmsg(\"duplicate JSON object key value: %s\", key))",
          "new_text": null,
          "old_line_content": "\t\t\tereport(ERROR,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1618,
          "old_api": "pfree",
          "new_api": null,
          "old_text": "pfree(entry)",
          "new_text": null,
          "old_line_content": "\tpfree(entry);",
          "new_line_content": "\tentry = state->stack;",
          "content_same": false
        },
        {
          "line": 598,
          "old_api": "ereport",
          "new_api": null,
          "old_text": "ereport(ERROR,\n\t\t\t\t(errcode(ERRCODE_INVALID_PARAMETER_VALUE),\n\t\t\t\t errmsg(\"could not determine input data type\")))",
          "new_text": null,
          "old_line_content": "\t\tereport(ERROR,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 599,
          "old_api": "errcode",
          "new_api": null,
          "old_text": "errcode(ERRCODE_INVALID_PARAMETER_VALUE)",
          "new_text": null,
          "old_line_content": "\t\t\t\t(errcode(ERRCODE_INVALID_PARAMETER_VALUE),",
          "new_line_content": "\tif (val_type == InvalidOid)",
          "content_same": false
        },
        {
          "line": 1111,
          "old_api": "PG_RETURN_POINTER",
          "new_api": null,
          "old_text": "PG_RETURN_POINTER(state)",
          "new_text": null,
          "old_line_content": "\t\t\tPG_RETURN_POINTER(state);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1114,
          "old_api": "appendStringInfoString",
          "new_api": null,
          "old_text": "appendStringInfoString(state->str, \" : \")",
          "new_text": null,
          "old_line_content": "\tappendStringInfoString(state->str, \" : \");",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1119,
          "old_api": "PG_GETARG_DATUM",
          "new_api": null,
          "old_text": "PG_GETARG_DATUM(2)",
          "new_text": null,
          "old_line_content": "\t\targ = PG_GETARG_DATUM(2);",
          "new_line_content": "\t\targ = (Datum) 0;",
          "content_same": false
        },
        {
          "line": 608,
          "old_api": "json_categorize_type",
          "new_api": null,
          "old_text": "json_categorize_type(val_type, false,\n\t\t\t\t\t\t\t &tcategory, &outfuncoid)",
          "new_text": null,
          "old_line_content": "\t\tjson_categorize_type(val_type, false,",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1632,
          "old_api": "json_unique_check_key",
          "new_api": null,
          "old_text": "json_unique_check_key(&state->check, field, state->stack->object_id)",
          "new_text": null,
          "old_line_content": "\tif (json_unique_check_key(&state->check, field, state->stack->object_id))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 611,
          "old_api": "datum_to_json_internal",
          "new_api": null,
          "old_text": "datum_to_json_internal(val, is_null, result, tcategory, outfuncoid,\n\t\t\t\t\t\t   key_scalar)",
          "new_text": null,
          "old_line_content": "\tdatum_to_json_internal(val, is_null, result, tcategory, outfuncoid,",
          "new_line_content": "\t\t\t\t\t\t\t &tcategory, &outfuncoid);",
          "content_same": false
        },
        {
          "line": 1125,
          "old_api": "PG_RETURN_POINTER",
          "new_api": null,
          "old_text": "PG_RETURN_POINTER(state)",
          "new_text": null,
          "old_line_content": "\tPG_RETURN_POINTER(state);",
          "new_line_content": "\t\t\t\t\t\t   state->val_output_func, false);",
          "content_same": false
        },
        {
          "line": 1641,
          "old_api": "pfree",
          "new_api": null,
          "old_text": "pfree(entry)",
          "new_text": null,
          "old_line_content": "\t\tpfree(entry);",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 621,
          "old_api": "PG_GETARG_DATUM",
          "new_api": null,
          "old_text": "PG_GETARG_DATUM(0)",
          "new_text": null,
          "old_line_content": "\tDatum\t\tarray = PG_GETARG_DATUM(0);",
          "new_line_content": "array_to_json(PG_FUNCTION_ARGS)",
          "content_same": false
        },
        {
          "line": 1134,
          "old_api": "json_object_agg_transfn_worker",
          "new_api": null,
          "old_text": "json_object_agg_transfn_worker(fcinfo, false, false)",
          "new_text": null,
          "old_line_content": "\treturn json_object_agg_transfn_worker(fcinfo, false, false);",
          "new_line_content": "json_object_agg_transfn(PG_FUNCTION_ARGS)",
          "content_same": false
        },
        {
          "line": 624,
          "old_api": "makeStringInfo",
          "new_api": null,
          "old_text": "makeStringInfo()",
          "new_text": null,
          "old_line_content": "\tresult = makeStringInfo();",
          "new_line_content": "\tStringInfo\tresult;",
          "content_same": false
        },
        {
          "line": 1143,
          "old_api": "json_object_agg_transfn_worker",
          "new_api": null,
          "old_text": "json_object_agg_transfn_worker(fcinfo, true, false)",
          "new_text": null,
          "old_line_content": "\treturn json_object_agg_transfn_worker(fcinfo, true, false);",
          "new_line_content": "json_object_agg_strict_transfn(PG_FUNCTION_ARGS)",
          "content_same": false
        },
        {
          "line": 1655,
          "old_api": "makeJsonLexContext",
          "new_api": null,
          "old_text": "makeJsonLexContext(&lex, json, check_unique_keys)",
          "new_text": null,
          "old_line_content": "\tmakeJsonLexContext(&lex, json, check_unique_keys);",
          "new_line_content": "\tJsonParseErrorType result;",
          "content_same": false
        },
        {
          "line": 637,
          "old_api": "PG_GETARG_DATUM",
          "new_api": null,
          "old_text": "PG_GETARG_DATUM(0)",
          "new_text": null,
          "old_line_content": "\tDatum\t\tarray = PG_GETARG_DATUM(0);",
          "new_line_content": "array_to_json_pretty(PG_FUNCTION_ARGS)",
          "content_same": false
        },
        {
          "line": 638,
          "old_api": "PG_GETARG_BOOL",
          "new_api": null,
          "old_text": "PG_GETARG_BOOL(1)",
          "new_text": null,
          "old_line_content": "\tbool\t\tuse_line_feeds = PG_GETARG_BOOL(1);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1663,
          "old_api": "json_unique_check_init",
          "new_api": null,
          "old_text": "json_unique_check_init(&state.check)",
          "new_text": null,
          "old_line_content": "\t\tjson_unique_check_init(&state.check);",
          "new_line_content": "\t\tstate.id_counter = 0;",
          "content_same": false
        },
        {
          "line": 1152,
          "old_api": "json_object_agg_transfn_worker",
          "new_api": null,
          "old_text": "json_object_agg_transfn_worker(fcinfo, false, true)",
          "new_text": null,
          "old_line_content": "\treturn json_object_agg_transfn_worker(fcinfo, false, true);",
          "new_line_content": "json_object_agg_unique_transfn(PG_FUNCTION_ARGS)",
          "content_same": false
        },
        {
          "line": 641,
          "old_api": "makeStringInfo",
          "new_api": null,
          "old_text": "makeStringInfo()",
          "new_text": null,
          "old_line_content": "\tresult = makeStringInfo();",
          "new_line_content": "\tStringInfo\tresult;",
          "content_same": false
        },
        {
          "line": 1671,
          "old_api": "pg_parse_json",
          "new_api": null,
          "old_text": "pg_parse_json(&lex, check_unique_keys ? &uniqueSemAction : &nullSemAction)",
          "new_text": null,
          "old_line_content": "\tresult = pg_parse_json(&lex, check_unique_keys ? &uniqueSemAction : &nullSemAction);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1161,
          "old_api": "json_object_agg_transfn_worker",
          "new_api": null,
          "old_text": "json_object_agg_transfn_worker(fcinfo, true, true)",
          "new_text": null,
          "old_line_content": "\treturn json_object_agg_transfn_worker(fcinfo, true, true);",
          "new_line_content": "json_object_agg_unique_strict_transfn(PG_FUNCTION_ARGS)",
          "content_same": false
        },
        {
          "line": 1676,
          "old_api": "json_errsave_error",
          "new_api": null,
          "old_text": "json_errsave_error(result, &lex, NULL)",
          "new_text": null,
          "old_line_content": "\t\t\tjson_errsave_error(result, &lex, NULL);",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 654,
          "old_api": "PG_GETARG_DATUM",
          "new_api": null,
          "old_text": "PG_GETARG_DATUM(0)",
          "new_text": null,
          "old_line_content": "\tDatum\t\tarray = PG_GETARG_DATUM(0);",
          "new_line_content": "row_to_json(PG_FUNCTION_ARGS)",
          "content_same": false
        },
        {
          "line": 657,
          "old_api": "makeStringInfo",
          "new_api": null,
          "old_text": "makeStringInfo()",
          "new_text": null,
          "old_line_content": "\tresult = makeStringInfo();",
          "new_line_content": "\tStringInfo\tresult;",
          "content_same": false
        },
        {
          "line": 1684,
          "old_api": "ereport",
          "new_api": null,
          "old_text": "ereport(ERROR,\n\t\t\t\t\t(errcode(ERRCODE_DUPLICATE_JSON_OBJECT_KEY_VALUE),\n\t\t\t\t\t errmsg(\"duplicate JSON object key value\")))",
          "new_text": null,
          "old_line_content": "\t\t\tereport(ERROR,",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 1173,
          "old_api": "AggCheckCallContext",
          "new_api": null,
          "old_text": "AggCheckCallContext(fcinfo, NULL)",
          "new_text": null,
          "old_line_content": "\tAssert(AggCheckCallContext(fcinfo, NULL));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1685,
          "old_api": "errcode",
          "new_api": null,
          "old_text": "errcode(ERRCODE_DUPLICATE_JSON_OBJECT_KEY_VALUE)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t(errcode(ERRCODE_DUPLICATE_JSON_OBJECT_KEY_VALUE),",
          "new_line_content": "\t\tif (throw_error)",
          "content_same": false
        },
        {
          "line": 1179,
          "old_api": "PG_RETURN_NULL",
          "new_api": null,
          "old_text": "PG_RETURN_NULL()",
          "new_text": null,
          "old_line_content": "\t\tPG_RETURN_NULL();",
          "new_line_content": "\t/* NULL result for no rows in, as is standard with aggregates */",
          "content_same": false
        },
        {
          "line": 1692,
          "old_api": "freeJsonLexContext",
          "new_api": null,
          "old_text": "freeJsonLexContext(&lex)",
          "new_text": null,
          "old_line_content": "\t\tfreeJsonLexContext(&lex);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 670,
          "old_api": "PG_GETARG_DATUM",
          "new_api": null,
          "old_text": "PG_GETARG_DATUM(0)",
          "new_text": null,
          "old_line_content": "\tDatum\t\tarray = PG_GETARG_DATUM(0);",
          "new_line_content": "row_to_json_pretty(PG_FUNCTION_ARGS)",
          "content_same": false
        },
        {
          "line": 671,
          "old_api": "PG_GETARG_BOOL",
          "new_api": null,
          "old_text": "PG_GETARG_BOOL(1)",
          "new_text": null,
          "old_line_content": "\tbool\t\tuse_line_feeds = PG_GETARG_BOOL(1);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1182,
          "old_api": "catenate_stringinfo_string",
          "new_api": null,
          "old_text": "catenate_stringinfo_string(state->str, \" }\")",
          "new_text": null,
          "old_line_content": "\tPG_RETURN_TEXT_P(catenate_stringinfo_string(state->str, \" }\"));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 674,
          "old_api": "makeStringInfo",
          "new_api": null,
          "old_text": "makeStringInfo()",
          "new_text": null,
          "old_line_content": "\tresult = makeStringInfo();",
          "new_line_content": "\tStringInfo\tresult;",
          "content_same": false
        },
        {
          "line": 1195,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(addon)",
          "new_text": null,
          "old_line_content": "\tint\t\t\taddlen = strlen(addon);",
          "new_line_content": "\t/* custom version of cstring_to_text_with_len */",
          "content_same": false
        },
        {
          "line": 1196,
          "old_api": "palloc",
          "new_api": null,
          "old_text": "palloc(buflen + addlen + VARHDRSZ)",
          "new_text": null,
          "old_line_content": "\ttext\t   *result = (text *) palloc(buflen + addlen + VARHDRSZ);",
          "new_line_content": "\tint\t\t\tbuflen = buffer->len;",
          "content_same": false
        },
        {
          "line": 1199,
          "old_api": "VARDATA",
          "new_api": null,
          "old_text": "VARDATA(result)",
          "new_text": null,
          "old_line_content": "\tmemcpy(VARDATA(result), buffer->data, buflen);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1712,
          "old_api": "PG_GETARG_TEXT_PP",
          "new_api": null,
          "old_text": "PG_GETARG_TEXT_PP(0)",
          "new_text": null,
          "old_line_content": "\ttext\t   *json = PG_GETARG_TEXT_PP(0);",
          "new_line_content": "json_typeof(PG_FUNCTION_ARGS)",
          "content_same": false
        },
        {
          "line": 694,
          "old_api": "json_categorize_type",
          "new_api": null,
          "old_text": "json_categorize_type(typoid, false, &tcategory, &outfuncoid)",
          "new_text": null,
          "old_line_content": "\tjson_categorize_type(typoid, false, &tcategory, &outfuncoid);",
          "new_line_content": "\tOid\t\t\toutfuncoid;",
          "content_same": false
        },
        {
          "line": 1718,
          "old_api": "makeJsonLexContext",
          "new_api": null,
          "old_text": "makeJsonLexContext(&lex, json, false)",
          "new_text": null,
          "old_line_content": "\tmakeJsonLexContext(&lex, json, false);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1719,
          "old_api": "json_lex",
          "new_api": null,
          "old_text": "json_lex(&lex)",
          "new_text": null,
          "old_line_content": "\tresult = json_lex(&lex);",
          "new_line_content": "\t/* Lex exactly one token from the input and check its type. */",
          "content_same": false
        },
        {
          "line": 1215,
          "old_api": "ereport",
          "new_api": null,
          "old_text": "ereport(ERROR,\n\t\t\t\t(errcode(ERRCODE_INVALID_PARAMETER_VALUE),\n\t\t\t\t errmsg(\"argument list must have even number of elements\"),\n\t\t/* translator: %s is a SQL function name */\n\t\t\t\t errhint(\"The arguments of %s must consist of alternating keys and values.\",\n\t\t\t\t\t\t \"json_build_object()\")))",
          "new_text": null,
          "old_line_content": "\t\tereport(ERROR,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1216,
          "old_api": "errcode",
          "new_api": null,
          "old_text": "errcode(ERRCODE_INVALID_PARAMETER_VALUE)",
          "new_text": null,
          "old_line_content": "\t\t\t\t(errcode(ERRCODE_INVALID_PARAMETER_VALUE),",
          "new_line_content": "\tif (nargs % 2 != 0)",
          "content_same": false
        },
        {
          "line": 1222,
          "old_api": "makeStringInfo",
          "new_api": null,
          "old_text": "makeStringInfo()",
          "new_text": null,
          "old_line_content": "\tresult = makeStringInfo();",
          "new_line_content": "\t\t\t\t\t\t \"json_build_object()\")));",
          "content_same": false
        },
        {
          "line": 1227,
          "old_api": "json_unique_builder_init",
          "new_api": null,
          "old_text": "json_unique_builder_init(&unique_check)",
          "new_text": null,
          "old_line_content": "\t\tjson_unique_builder_init(&unique_check);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 718,
          "old_api": "func_volatile",
          "new_api": null,
          "old_text": "func_volatile(outfuncoid)",
          "new_text": null,
          "old_line_content": "\t\t\treturn func_volatile(outfuncoid) == PROVOLATILE_IMMUTABLE;",
          "new_line_content": "\t\tcase JSONTYPE_CAST:",
          "content_same": false
        },
        {
          "line": 1745,
          "old_api": "elog",
          "new_api": null,
          "old_text": "elog(ERROR, \"unexpected json token: %d\", lex.token_type)",
          "new_text": null,
          "old_line_content": "\t\t\telog(ERROR, \"unexpected json token: %d\", lex.token_type);",
          "new_line_content": "\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 1748,
          "old_api": "cstring_to_text",
          "new_api": null,
          "old_text": "cstring_to_text(type)",
          "new_text": null,
          "old_line_content": "\tPG_RETURN_TEXT_P(cstring_to_text(type));",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 213,
          "old_api": "DatumGetBool",
          "new_api": null,
          "old_text": "DatumGetBool(val)",
          "new_text": null,
          "old_line_content": "\t\t\toutputstr = DatumGetBool(val) ? \"true\" : \"false\";",
          "new_line_content": "\t\t\tif (key_scalar)",
          "content_same": false
        },
        {
          "line": 217,
          "old_api": "appendStringInfoString",
          "new_api": null,
          "old_text": "appendStringInfoString(result, outputstr)",
          "new_text": null,
          "old_line_content": "\t\t\t\tappendStringInfoString(result, outputstr);",
          "new_line_content": "\t\t\telse",
          "content_same": false
        },
        {
          "line": 730,
          "old_api": "PG_GETARG_DATUM",
          "new_api": null,
          "old_text": "PG_GETARG_DATUM(0)",
          "new_text": null,
          "old_line_content": "\tDatum\t\tval = PG_GETARG_DATUM(0);",
          "new_line_content": "to_json(PG_FUNCTION_ARGS)",
          "content_same": false
        },
        {
          "line": 731,
          "old_api": "get_fn_expr_argtype",
          "new_api": null,
          "old_text": "get_fn_expr_argtype(fcinfo->flinfo, 0)",
          "new_text": null,
          "old_line_content": "\tOid\t\t\tval_type = get_fn_expr_argtype(fcinfo->flinfo, 0);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1244,
          "old_api": "json_unique_builder_get_throwawaybuf",
          "new_api": null,
          "old_text": "json_unique_builder_get_throwawaybuf(&unique_check)",
          "new_text": null,
          "old_line_content": "\t\t\tout = json_unique_builder_get_throwawaybuf(&unique_check);",
          "new_line_content": "\t\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 736,
          "old_api": "ereport",
          "new_api": null,
          "old_text": "ereport(ERROR,\n\t\t\t\t(errcode(ERRCODE_INVALID_PARAMETER_VALUE),\n\t\t\t\t errmsg(\"could not determine input data type\")))",
          "new_text": null,
          "old_line_content": "\t\tereport(ERROR,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 737,
          "old_api": "errcode",
          "new_api": null,
          "old_text": "errcode(ERRCODE_INVALID_PARAMETER_VALUE)",
          "new_text": null,
          "old_line_content": "\t\t\t\t(errcode(ERRCODE_INVALID_PARAMETER_VALUE),",
          "new_line_content": "\tif (val_type == InvalidOid)",
          "content_same": false
        },
        {
          "line": 1248,
          "old_api": "appendStringInfoString",
          "new_api": null,
          "old_text": "appendStringInfoString(result, sep)",
          "new_text": null,
          "old_line_content": "\t\t\tappendStringInfoString(result, sep);",
          "new_line_content": "\t\telse",
          "content_same": false
        },
        {
          "line": 743,
          "old_api": "datum_to_json",
          "new_api": null,
          "old_text": "datum_to_json(val, tcategory, outfuncoid)",
          "new_text": null,
          "old_line_content": "\tPG_RETURN_DATUM(datum_to_json(val, tcategory, outfuncoid));",
          "new_line_content": "\t\t\t\t\t\t &tcategory, &outfuncoid);",
          "content_same": false
        },
        {
          "line": 232,
          "old_api": "appendStringInfoString",
          "new_api": null,
          "old_text": "appendStringInfoString(result, outputstr)",
          "new_text": null,
          "old_line_content": "\t\t\t\tappendStringInfoString(result, outputstr);",
          "new_line_content": "\t\t\t\t((*outputstr >= '0' && *outputstr <= '9') ||",
          "content_same": false
        },
        {
          "line": 1255,
          "old_api": "ereport",
          "new_api": null,
          "old_text": "ereport(ERROR,\n\t\t\t\t\t(errcode(ERRCODE_NULL_VALUE_NOT_ALLOWED),\n\t\t\t\t\t errmsg(\"null value not allowed for object key\")))",
          "new_text": null,
          "old_line_content": "\t\t\tereport(ERROR,",
          "new_line_content": "\t\t/* process key */",
          "content_same": false
        },
        {
          "line": 1256,
          "old_api": "errcode",
          "new_api": null,
          "old_text": "errcode(ERRCODE_NULL_VALUE_NOT_ALLOWED)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t(errcode(ERRCODE_NULL_VALUE_NOT_ALLOWED),",
          "new_line_content": "\t\tif (nulls[i])",
          "content_same": false
        },
        {
          "line": 236,
          "old_api": "appendStringInfoString",
          "new_api": null,
          "old_text": "appendStringInfoString(result, outputstr)",
          "new_text": null,
          "old_line_content": "\t\t\t\tappendStringInfoString(result, outputstr);",
          "new_line_content": "\t\t\telse",
          "content_same": false
        },
        {
          "line": 237,
          "old_api": "appendStringInfoChar",
          "new_api": null,
          "old_text": "appendStringInfoChar(result, '\"')",
          "new_text": null,
          "old_line_content": "\t\t\t\tappendStringInfoChar(result, '\"');",
          "new_line_content": "\t\t\t{",
          "content_same": false
        },
        {
          "line": 1262,
          "old_api": "add_json",
          "new_api": null,
          "old_text": "add_json(args[i], false, out, types[i], true)",
          "new_text": null,
          "old_line_content": "\t\tadd_json(args[i], false, out, types[i], true);",
          "new_line_content": "\t\tkey_offset = out->len;",
          "content_same": false
        },
        {
          "line": 754,
          "old_api": "makeStringInfo",
          "new_api": null,
          "old_text": "makeStringInfo()",
          "new_text": null,
          "old_line_content": "\tStringInfo\tresult = makeStringInfo();",
          "new_line_content": "datum_to_json(Datum val, JsonTypeCategory tcategory, Oid outfuncoid)",
          "content_same": false
        },
        {
          "line": 245,
          "old_api": "JsonEncodeDateTime",
          "new_api": null,
          "old_text": "JsonEncodeDateTime(buf, val, DATEOID, NULL)",
          "new_text": null,
          "old_line_content": "\t\t\t\tJsonEncodeDateTime(buf, val, DATEOID, NULL);",
          "new_line_content": "\t\t\t{",
          "content_same": false
        },
        {
          "line": 246,
          "old_api": "appendStringInfoChar",
          "new_api": null,
          "old_text": "appendStringInfoChar(result, '\"')",
          "new_text": null,
          "old_line_content": "\t\t\t\tappendStringInfoChar(result, '\"');",
          "new_line_content": "\t\t\t\tchar\t\tbuf[MAXDATELEN + 1];",
          "content_same": false
        },
        {
          "line": 247,
          "old_api": "appendStringInfoString",
          "new_api": null,
          "old_text": "appendStringInfoString(result, buf)",
          "new_text": null,
          "old_line_content": "\t\t\t\tappendStringInfoString(result, buf);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 759,
          "old_api": "cstring_to_text_with_len",
          "new_api": null,
          "old_text": "cstring_to_text_with_len(result->data, result->len)",
          "new_text": null,
          "old_line_content": "\treturn PointerGetDatum(cstring_to_text_with_len(result->data, result->len));",
          "new_line_content": "\t\t\t\t\t\t   false);",
          "content_same": false
        },
        {
          "line": 1269,
          "old_api": "json_unique_check_key",
          "new_api": null,
          "old_text": "json_unique_check_key(&unique_check.check, key, 0)",
          "new_text": null,
          "old_line_content": "\t\t\tif (!json_unique_check_key(&unique_check.check, key, 0))",
          "new_line_content": "\t\t\tconst char *key = &out->data[key_offset];",
          "content_same": false
        },
        {
          "line": 1270,
          "old_api": "ereport",
          "new_api": null,
          "old_text": "ereport(ERROR,\n\t\t\t\t\t\terrcode(ERRCODE_DUPLICATE_JSON_OBJECT_KEY_VALUE),\n\t\t\t\t\t\terrmsg(\"duplicate JSON object key value: %s\", key))",
          "new_text": null,
          "old_line_content": "\t\t\t\tereport(ERROR,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1278,
          "old_api": "appendStringInfoString",
          "new_api": null,
          "old_text": "appendStringInfoString(result, \" : \")",
          "new_text": null,
          "old_line_content": "\t\tappendStringInfoString(result, \" : \");",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 255,
          "old_api": "JsonEncodeDateTime",
          "new_api": null,
          "old_text": "JsonEncodeDateTime(buf, val, TIMESTAMPOID, NULL)",
          "new_text": null,
          "old_line_content": "\t\t\t\tJsonEncodeDateTime(buf, val, TIMESTAMPOID, NULL);",
          "new_line_content": "\t\t\t{",
          "content_same": false
        },
        {
          "line": 256,
          "old_api": "appendStringInfoChar",
          "new_api": null,
          "old_text": "appendStringInfoChar(result, '\"')",
          "new_text": null,
          "old_line_content": "\t\t\t\tappendStringInfoChar(result, '\"');",
          "new_line_content": "\t\t\t\tchar\t\tbuf[MAXDATELEN + 1];",
          "content_same": false
        },
        {
          "line": 257,
          "old_api": "appendStringInfoString",
          "new_api": null,
          "old_text": "appendStringInfoString(result, buf)",
          "new_text": null,
          "old_line_content": "\t\t\t\tappendStringInfoString(result, buf);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1281,
          "old_api": "add_json",
          "new_api": null,
          "old_text": "add_json(args[i + 1], nulls[i + 1], result, types[i + 1], false)",
          "new_text": null,
          "old_line_content": "\t\tadd_json(args[i + 1], nulls[i + 1], result, types[i + 1], false);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1284,
          "old_api": "appendStringInfoChar",
          "new_api": null,
          "old_text": "appendStringInfoChar(result, '}')",
          "new_text": null,
          "old_line_content": "\tappendStringInfoChar(result, '}');",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 775,
          "old_api": "AggCheckCallContext",
          "new_api": null,
          "old_text": "AggCheckCallContext(fcinfo, &aggcontext)",
          "new_text": null,
          "old_line_content": "\tif (!AggCheckCallContext(fcinfo, &aggcontext))",
          "new_line_content": "\tDatum\t\tval;",
          "content_same": false
        },
        {
          "line": 265,
          "old_api": "JsonEncodeDateTime",
          "new_api": null,
          "old_text": "JsonEncodeDateTime(buf, val, TIMESTAMPTZOID, NULL)",
          "new_text": null,
          "old_line_content": "\t\t\t\tJsonEncodeDateTime(buf, val, TIMESTAMPTZOID, NULL);",
          "new_line_content": "\t\t\t{",
          "content_same": false
        },
        {
          "line": 266,
          "old_api": "appendStringInfoChar",
          "new_api": null,
          "old_text": "appendStringInfoChar(result, '\"')",
          "new_text": null,
          "old_line_content": "\t\t\t\tappendStringInfoChar(result, '\"');",
          "new_line_content": "\t\t\t\tchar\t\tbuf[MAXDATELEN + 1];",
          "content_same": false
        },
        {
          "line": 267,
          "old_api": "appendStringInfoString",
          "new_api": null,
          "old_text": "appendStringInfoString(result, buf)",
          "new_text": null,
          "old_line_content": "\t\t\t\tappendStringInfoString(result, buf);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 778,
          "old_api": "elog",
          "new_api": null,
          "old_text": "elog(ERROR, \"json_agg_transfn called in non-aggregate context\")",
          "new_text": null,
          "old_line_content": "\t\telog(ERROR, \"json_agg_transfn called in non-aggregate context\");",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 781,
          "old_api": "PG_ARGISNULL",
          "new_api": null,
          "old_text": "PG_ARGISNULL(0)",
          "new_text": null,
          "old_line_content": "\tif (PG_ARGISNULL(0))",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 273,
          "old_api": "OidOutputFunctionCall",
          "new_api": null,
          "old_text": "OidOutputFunctionCall(outfuncoid, val)",
          "new_text": null,
          "old_line_content": "\t\t\toutputstr = OidOutputFunctionCall(outfuncoid, val);",
          "new_line_content": "\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 274,
          "old_api": "appendStringInfoString",
          "new_api": null,
          "old_text": "appendStringInfoString(result, outputstr)",
          "new_text": null,
          "old_line_content": "\t\t\tappendStringInfoString(result, outputstr);",
          "new_line_content": "\t\tcase JSONTYPE_JSON:",
          "content_same": false
        },
        {
          "line": 275,
          "old_api": "pfree",
          "new_api": null,
          "old_text": "pfree(outputstr)",
          "new_text": null,
          "old_line_content": "\t\t\tpfree(outputstr);",
          "new_line_content": "\t\t\t/* JSON and JSONB output will already be escaped */",
          "content_same": false
        },
        {
          "line": 786,
          "old_api": "ereport",
          "new_api": null,
          "old_text": "ereport(ERROR,\n\t\t\t\t\t(errcode(ERRCODE_INVALID_PARAMETER_VALUE),\n\t\t\t\t\t errmsg(\"could not determine input data type\")))",
          "new_text": null,
          "old_line_content": "\t\t\tereport(ERROR,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 787,
          "old_api": "errcode",
          "new_api": null,
          "old_text": "errcode(ERRCODE_INVALID_PARAMETER_VALUE)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t(errcode(ERRCODE_INVALID_PARAMETER_VALUE),",
          "new_line_content": "\t\tif (arg_type == InvalidOid)",
          "content_same": false
        },
        {
          "line": 1300,
          "old_api": "extract_variadic_args",
          "new_api": null,
          "old_text": "extract_variadic_args(fcinfo, 0, true,\n\t\t\t\t\t\t\t\t\t\t\t  &args, &types, &nulls)",
          "new_text": null,
          "old_line_content": "\tint\t\t\tnargs = extract_variadic_args(fcinfo, 0, true,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 279,
          "old_api": "OidFunctionCall1",
          "new_api": null,
          "old_text": "OidFunctionCall1(outfuncoid, val)",
          "new_text": null,
          "old_line_content": "\t\t\tjsontext = DatumGetTextPP(OidFunctionCall1(outfuncoid, val));",
          "new_line_content": "\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 280,
          "old_api": "text_to_cstring",
          "new_api": null,
          "old_text": "text_to_cstring(jsontext)",
          "new_text": null,
          "old_line_content": "\t\t\toutputstr = text_to_cstring(jsontext);",
          "new_line_content": "\t\tcase JSONTYPE_CAST:",
          "content_same": false
        },
        {
          "line": 281,
          "old_api": "appendStringInfoString",
          "new_api": null,
          "old_text": "appendStringInfoString(result, outputstr)",
          "new_text": null,
          "old_line_content": "\t\t\tappendStringInfoString(result, outputstr);",
          "new_line_content": "\t\t\t/* outfuncoid refers to a cast function, not an output function */",
          "content_same": false
        },
        {
          "line": 1304,
          "old_api": "PG_RETURN_NULL",
          "new_api": null,
          "old_text": "PG_RETURN_NULL()",
          "new_text": null,
          "old_line_content": "\t\tPG_RETURN_NULL();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 796,
          "old_api": "MemoryContextSwitchTo",
          "new_api": null,
          "old_text": "MemoryContextSwitchTo(aggcontext)",
          "new_text": null,
          "old_line_content": "\t\toldcontext = MemoryContextSwitchTo(aggcontext);",
          "new_line_content": "\t\t * use the right context to enlarge the object if necessary.",
          "content_same": false
        },
        {
          "line": 797,
          "old_api": "palloc",
          "new_api": null,
          "old_text": "palloc(sizeof(JsonAggState))",
          "new_text": null,
          "old_line_content": "\t\tstate = (JsonAggState *) palloc(sizeof(JsonAggState));",
          "new_line_content": "\t\t */",
          "content_same": false
        },
        {
          "line": 286,
          "old_api": "OidOutputFunctionCall",
          "new_api": null,
          "old_text": "OidOutputFunctionCall(outfuncoid, val)",
          "new_text": null,
          "old_line_content": "\t\t\toutputstr = OidOutputFunctionCall(outfuncoid, val);",
          "new_line_content": "\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 287,
          "old_api": "escape_json",
          "new_api": null,
          "old_text": "escape_json(result, outputstr)",
          "new_text": null,
          "old_line_content": "\t\t\tescape_json(result, outputstr);",
          "new_line_content": "\t\tdefault:",
          "content_same": false
        },
        {
          "line": 802,
          "old_api": "json_categorize_type",
          "new_api": null,
          "old_text": "json_categorize_type(arg_type, false, &state->val_category,\n\t\t\t\t\t\t\t &state->val_output_func)",
          "new_text": null,
          "old_line_content": "\t\tjson_categorize_type(arg_type, false, &state->val_category,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1315,
          "old_api": "cstring_to_text_with_len",
          "new_api": null,
          "old_text": "cstring_to_text_with_len(\"{}\", 2)",
          "new_text": null,
          "old_line_content": "\tPG_RETURN_TEXT_P(cstring_to_text_with_len(\"{}\", 2));",
          "new_line_content": "json_build_object_noargs(PG_FUNCTION_ARGS)",
          "content_same": false
        },
        {
          "line": 807,
          "old_api": "PG_GETARG_POINTER",
          "new_api": null,
          "old_text": "PG_GETARG_POINTER(0)",
          "new_text": null,
          "old_line_content": "\t\tstate = (JsonAggState *) PG_GETARG_POINTER(0);",
          "new_line_content": "\telse",
          "content_same": false
        },
        {
          "line": 810,
          "old_api": "PG_ARGISNULL",
          "new_api": null,
          "old_text": "PG_ARGISNULL(1)",
          "new_text": null,
          "old_line_content": "\tif (absent_on_null && PG_ARGISNULL(1))",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 811,
          "old_api": "PG_RETURN_POINTER",
          "new_api": null,
          "old_text": "PG_RETURN_POINTER(state)",
          "new_text": null,
          "old_line_content": "\t\tPG_RETURN_POINTER(state);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 302,
          "old_api": "palloc",
          "new_api": null,
          "old_text": "palloc(MAXDATELEN + 1)",
          "new_text": null,
          "old_line_content": "\t\tbuf = palloc(MAXDATELEN + 1);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 814,
          "old_api": "appendStringInfoString",
          "new_api": null,
          "old_text": "appendStringInfoString(state->str, \", \")",
          "new_text": null,
          "old_line_content": "\t\tappendStringInfoString(state->str, \", \");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1326,
          "old_api": "makeStringInfo",
          "new_api": null,
          "old_text": "makeStringInfo()",
          "new_text": null,
          "old_line_content": "\tresult = makeStringInfo();",
          "new_line_content": "\tStringInfo\tresult;",
          "content_same": false
        },
        {
          "line": 817,
          "old_api": "PG_ARGISNULL",
          "new_api": null,
          "old_text": "PG_ARGISNULL(1)",
          "new_text": null,
          "old_line_content": "\tif (PG_ARGISNULL(1))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 311,
          "old_api": "DatumGetDateADT",
          "new_api": null,
          "old_text": "DatumGetDateADT(value)",
          "new_text": null,
          "old_line_content": "\t\t\t\tdate = DatumGetDateADT(value);",
          "new_line_content": "\t\t\t\tstruct pg_tm tm;",
          "content_same": false
        },
        {
          "line": 824,
          "old_api": "PG_GETARG_DATUM",
          "new_api": null,
          "old_text": "PG_GETARG_DATUM(1)",
          "new_text": null,
          "old_line_content": "\tval = PG_GETARG_DATUM(1);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1335,
          "old_api": "appendStringInfoString",
          "new_api": null,
          "old_text": "appendStringInfoString(result, sep)",
          "new_text": null,
          "old_line_content": "\t\tappendStringInfoString(result, sep);",
          "new_line_content": "\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 314,
          "old_api": "DATE_NOT_FINITE",
          "new_api": null,
          "old_text": "DATE_NOT_FINITE(date)",
          "new_text": null,
          "old_line_content": "\t\t\t\tif (DATE_NOT_FINITE(date))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 315,
          "old_api": "EncodeSpecialDate",
          "new_api": null,
          "old_text": "EncodeSpecialDate(date, buf)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tEncodeSpecialDate(date, buf);",
          "new_line_content": "\t\t\t\t/* Same as date_out(), but forcing DateStyle */",
          "content_same": false
        },
        {
          "line": 827,
          "old_api": "PG_ARGISNULL",
          "new_api": null,
          "old_text": "PG_ARGISNULL(0)",
          "new_text": null,
          "old_line_content": "\tif (!PG_ARGISNULL(0) && state->str->len > 1 &&",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1340,
          "old_api": "appendStringInfoChar",
          "new_api": null,
          "old_text": "appendStringInfoChar(result, ']')",
          "new_text": null,
          "old_line_content": "\tappendStringInfoChar(result, ']');",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 318,
          "old_api": "j2date",
          "new_api": null,
          "old_text": "j2date(date + POSTGRES_EPOCH_JDATE,\n\t\t\t\t\t\t   &(tm.tm_year), &(tm.tm_mon), &(tm.tm_mday))",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tj2date(date + POSTGRES_EPOCH_JDATE,",
          "new_line_content": "\t\t\t\telse",
          "content_same": false
        },
        {
          "line": 831,
          "old_api": "appendStringInfoString",
          "new_api": null,
          "old_text": "appendStringInfoString(state->str, \"\\n \")",
          "new_text": null,
          "old_line_content": "\t\tappendStringInfoString(state->str, \"\\n \");",
          "new_line_content": "\t\t state->val_category == JSONTYPE_COMPOSITE))",
          "content_same": false
        },
        {
          "line": 834,
          "old_api": "datum_to_json_internal",
          "new_api": null,
          "old_text": "datum_to_json_internal(val, false, state->str, state->val_category,\n\t\t\t\t\t\t   state->val_output_func, false)",
          "new_text": null,
          "old_line_content": "\tdatum_to_json_internal(val, false, state->str, state->val_category,",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 326,
          "old_api": "DatumGetTimeADT",
          "new_api": null,
          "old_text": "DatumGetTimeADT(value)",
          "new_text": null,
          "old_line_content": "\t\t\t\tTimeADT\t\ttime = DatumGetTimeADT(value);",
          "new_line_content": "\t\tcase TIMEOID:",
          "content_same": false
        },
        {
          "line": 842,
          "old_api": "PG_RETURN_POINTER",
          "new_api": null,
          "old_text": "PG_RETURN_POINTER(state)",
          "new_text": null,
          "old_line_content": "\tPG_RETURN_POINTER(state);",
          "new_line_content": "\t * pass the JsonAggState pointer through nodeAgg.c's machinations.",
          "content_same": false
        },
        {
          "line": 332,
          "old_api": "time2tm",
          "new_api": null,
          "old_text": "time2tm(time, tm, &fsec)",
          "new_text": null,
          "old_line_content": "\t\t\t\ttime2tm(time, tm, &fsec);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 333,
          "old_api": "EncodeTimeOnly",
          "new_api": null,
          "old_text": "EncodeTimeOnly(tm, fsec, false, 0, USE_XSD_DATES, buf)",
          "new_text": null,
          "old_line_content": "\t\t\t\tEncodeTimeOnly(tm, fsec, false, 0, USE_XSD_DATES, buf);",
          "new_line_content": "\t\t\t\t/* Same as time_out(), but forcing DateStyle */",
          "content_same": false
        },
        {
          "line": 1356,
          "old_api": "extract_variadic_args",
          "new_api": null,
          "old_text": "extract_variadic_args(fcinfo, 0, true,\n\t\t\t\t\t\t\t\t\t\t\t  &args, &types, &nulls)",
          "new_text": null,
          "old_line_content": "\tint\t\t\tnargs = extract_variadic_args(fcinfo, 0, true,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1360,
          "old_api": "PG_RETURN_NULL",
          "new_api": null,
          "old_text": "PG_RETURN_NULL()",
          "new_text": null,
          "old_line_content": "\t\tPG_RETURN_NULL();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 338,
          "old_api": "DatumGetTimeTzADTP",
          "new_api": null,
          "old_text": "DatumGetTimeTzADTP(value)",
          "new_text": null,
          "old_line_content": "\t\t\t\tTimeTzADT  *time = DatumGetTimeTzADTP(value);",
          "new_line_content": "\t\tcase TIMETZOID:",
          "content_same": false
        },
        {
          "line": 852,
          "old_api": "json_agg_transfn_worker",
          "new_api": null,
          "old_text": "json_agg_transfn_worker(fcinfo, false)",
          "new_text": null,
          "old_line_content": "\treturn json_agg_transfn_worker(fcinfo, false);",
          "new_line_content": "json_agg_transfn(PG_FUNCTION_ARGS)",
          "content_same": false
        },
        {
          "line": 345,
          "old_api": "timetz2tm",
          "new_api": null,
          "old_text": "timetz2tm(time, tm, &fsec, &tz)",
          "new_text": null,
          "old_line_content": "\t\t\t\ttimetz2tm(time, tm, &fsec, &tz);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 346,
          "old_api": "EncodeTimeOnly",
          "new_api": null,
          "old_text": "EncodeTimeOnly(tm, fsec, true, tz, USE_XSD_DATES, buf)",
          "new_text": null,
          "old_line_content": "\t\t\t\tEncodeTimeOnly(tm, fsec, true, tz, USE_XSD_DATES, buf);",
          "new_line_content": "\t\t\t\t/* Same as timetz_out(), but forcing DateStyle */",
          "content_same": false
        },
        {
          "line": 1371,
          "old_api": "cstring_to_text_with_len",
          "new_api": null,
          "old_text": "cstring_to_text_with_len(\"[]\", 2)",
          "new_text": null,
          "old_line_content": "\tPG_RETURN_TEXT_P(cstring_to_text_with_len(\"[]\", 2));",
          "new_line_content": "json_build_array_noargs(PG_FUNCTION_ARGS)",
          "content_same": false
        },
        {
          "line": 861,
          "old_api": "json_agg_transfn_worker",
          "new_api": null,
          "old_text": "json_agg_transfn_worker(fcinfo, true)",
          "new_text": null,
          "old_line_content": "\treturn json_agg_transfn_worker(fcinfo, true);",
          "new_line_content": "json_agg_strict_transfn(PG_FUNCTION_ARGS)",
          "content_same": false
        },
        {
          "line": 355,
          "old_api": "DatumGetTimestamp",
          "new_api": null,
          "old_text": "DatumGetTimestamp(value)",
          "new_text": null,
          "old_line_content": "\t\t\t\ttimestamp = DatumGetTimestamp(value);",
          "new_line_content": "\t\t\t\tfsec_t\t\tfsec;",
          "content_same": false
        },
        {
          "line": 358,
          "old_api": "EncodeSpecialTimestamp",
          "new_api": null,
          "old_text": "EncodeSpecialTimestamp(timestamp, buf)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tEncodeSpecialTimestamp(timestamp, buf);",
          "new_line_content": "\t\t\t\t/* Same as timestamp_out(), but forcing DateStyle */",
          "content_same": false
        },
        {
          "line": 1383,
          "old_api": "PG_GETARG_ARRAYTYPE_P",
          "new_api": null,
          "old_text": "PG_GETARG_ARRAYTYPE_P(0)",
          "new_text": null,
          "old_line_content": "\tArrayType  *in_array = PG_GETARG_ARRAYTYPE_P(0);",
          "new_line_content": "json_object(PG_FUNCTION_ARGS)",
          "content_same": false
        },
        {
          "line": 1384,
          "old_api": "ARR_NDIM",
          "new_api": null,
          "old_text": "ARR_NDIM(in_array)",
          "new_text": null,
          "old_line_content": "\tint\t\t\tndims = ARR_NDIM(in_array);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 873,
          "old_api": "AggCheckCallContext",
          "new_api": null,
          "old_text": "AggCheckCallContext(fcinfo, NULL)",
          "new_text": null,
          "old_line_content": "\tAssert(AggCheckCallContext(fcinfo, NULL));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 363,
          "old_api": "errcode",
          "new_api": null,
          "old_text": "errcode(ERRCODE_DATETIME_VALUE_OUT_OF_RANGE)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\t(errcode(ERRCODE_DATETIME_VALUE_OUT_OF_RANGE),",
          "new_line_content": "\t\t\t\telse",
          "content_same": false
        },
        {
          "line": 881,
          "old_api": "PG_RETURN_NULL",
          "new_api": null,
          "old_text": "PG_RETURN_NULL()",
          "new_text": null,
          "old_line_content": "\t\tPG_RETURN_NULL();",
          "new_line_content": "\t/* NULL result for no rows in, as is standard with aggregates */",
          "content_same": false
        },
        {
          "line": 884,
          "old_api": "catenate_stringinfo_string",
          "new_api": null,
          "old_text": "catenate_stringinfo_string(state->str, \"]\")",
          "new_text": null,
          "old_line_content": "\tPG_RETURN_TEXT_P(catenate_stringinfo_string(state->str, \"]\"));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1397,
          "old_api": "CStringGetTextDatum",
          "new_api": null,
          "old_text": "CStringGetTextDatum(\"{}\")",
          "new_text": null,
          "old_line_content": "\t\t\tPG_RETURN_DATUM(CStringGetTextDatum(\"{}\"));",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 375,
          "old_api": "DatumGetTimestampTz",
          "new_api": null,
          "old_text": "DatumGetTimestampTz(value)",
          "new_text": null,
          "old_line_content": "\t\t\t\ttimestamp = DatumGetTimestampTz(value);",
          "new_line_content": "\t\t\t\tconst char *tzn = NULL;",
          "content_same": false
        },
        {
          "line": 1401,
          "old_api": "ARR_DIMS",
          "new_api": null,
          "old_text": "ARR_DIMS(in_array)",
          "new_text": null,
          "old_line_content": "\t\t\tif ((ARR_DIMS(in_array)[0]) % 2)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1402,
          "old_api": "ereport",
          "new_api": null,
          "old_text": "ereport(ERROR,\n\t\t\t\t\t\t(errcode(ERRCODE_ARRAY_SUBSCRIPT_ERROR),\n\t\t\t\t\t\t errmsg(\"array must have even number of elements\")))",
          "new_text": null,
          "old_line_content": "\t\t\t\tereport(ERROR,",
          "new_line_content": "\t\tcase 1:",
          "content_same": false
        },
        {
          "line": 892,
          "old_api": "hash_bytes_uint32",
          "new_api": null,
          "old_text": "hash_bytes_uint32(entry->object_id)",
          "new_text": null,
          "old_line_content": "\tuint32\t\thash = hash_bytes_uint32(entry->object_id);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1408,
          "old_api": "ARR_DIMS",
          "new_api": null,
          "old_text": "ARR_DIMS(in_array)",
          "new_text": null,
          "old_line_content": "\t\t\tif ((ARR_DIMS(in_array)[1]) != 2)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1409,
          "old_api": "ereport",
          "new_api": null,
          "old_text": "ereport(ERROR,\n\t\t\t\t\t\t(errcode(ERRCODE_ARRAY_SUBSCRIPT_ERROR),\n\t\t\t\t\t\t errmsg(\"array must have two columns\")))",
          "new_text": null,
          "old_line_content": "\t\t\t\tereport(ERROR,",
          "new_line_content": "\t\tcase 2:",
          "content_same": false
        },
        {
          "line": 390,
          "old_api": "TIMESTAMP_NOT_FINITE",
          "new_api": null,
          "old_text": "TIMESTAMP_NOT_FINITE(timestamp)",
          "new_text": null,
          "old_line_content": "\t\t\t\tif (TIMESTAMP_NOT_FINITE(timestamp))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 391,
          "old_api": "EncodeSpecialTimestamp",
          "new_api": null,
          "old_text": "EncodeSpecialTimestamp(timestamp, buf)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tEncodeSpecialTimestamp(timestamp, buf);",
          "new_line_content": "\t\t\t\t/* Same as timestamptz_out(), but forcing DateStyle */",
          "content_same": false
        },
        {
          "line": 1415,
          "old_api": "ereport",
          "new_api": null,
          "old_text": "ereport(ERROR,\n\t\t\t\t\t(errcode(ERRCODE_ARRAY_SUBSCRIPT_ERROR),\n\t\t\t\t\t errmsg(\"wrong number of array subscripts\")))",
          "new_text": null,
          "old_line_content": "\t\t\tereport(ERROR,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1416,
          "old_api": "errcode",
          "new_api": null,
          "old_text": "errcode(ERRCODE_ARRAY_SUBSCRIPT_ERROR)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t(errcode(ERRCODE_ARRAY_SUBSCRIPT_ERROR),",
          "new_line_content": "\t\tdefault:",
          "content_same": false
        },
        {
          "line": 1420,
          "old_api": "deconstruct_array_builtin",
          "new_api": null,
          "old_text": "deconstruct_array_builtin(in_array, TEXTOID, &in_datums, &in_nulls, &in_count)",
          "new_text": null,
          "old_line_content": "\tdeconstruct_array_builtin(in_array, TEXTOID, &in_datums, &in_nulls, &in_count);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 398,
          "old_api": "EncodeDateTime",
          "new_api": null,
          "old_text": "EncodeDateTime(&tm, fsec, true, tz, tzn, USE_XSD_DATES, buf)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tEncodeDateTime(&tm, fsec, true, tz, tzn, USE_XSD_DATES, buf);",
          "new_line_content": "\t\t\t\t\t\ttm.tm_isdst = 1;\t/* set time-zone presence flag */",
          "content_same": false
        },
        {
          "line": 911,
          "old_api": "strncmp",
          "new_api": null,
          "old_text": "strncmp(entry1->key, entry2->key, entry1->key_len)",
          "new_text": null,
          "old_line_content": "\treturn strncmp(entry1->key, entry2->key, entry1->key_len);",
          "new_line_content": "\t\treturn entry1->key_len > entry2->key_len ? 1 : -1;",
          "content_same": false
        },
        {
          "line": 1424,
          "old_api": "initStringInfo",
          "new_api": null,
          "old_text": "initStringInfo(&result)",
          "new_text": null,
          "old_line_content": "\tinitStringInfo(&result);",
          "new_line_content": "\tcount = in_count / 2;",
          "content_same": false
        },
        {
          "line": 401,
          "old_api": "ereport",
          "new_api": null,
          "old_text": "ereport(ERROR,\n\t\t\t\t\t\t\t(errcode(ERRCODE_DATETIME_VALUE_OUT_OF_RANGE),\n\t\t\t\t\t\t\t errmsg(\"timestamp out of range\")))",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tereport(ERROR,",
          "new_line_content": "\t\t\t\t}",
          "content_same": false
        },
        {
          "line": 402,
          "old_api": "errcode",
          "new_api": null,
          "old_text": "errcode(ERRCODE_DATETIME_VALUE_OUT_OF_RANGE)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\t(errcode(ERRCODE_DATETIME_VALUE_OUT_OF_RANGE),",
          "new_line_content": "\t\t\t\telse",
          "content_same": false
        },
        {
          "line": 407,
          "old_api": "elog",
          "new_api": null,
          "old_text": "elog(ERROR, \"unknown jsonb value datetime type oid %u\", typid)",
          "new_text": null,
          "old_line_content": "\t\t\telog(ERROR, \"unknown jsonb value datetime type oid %u\", typid);",
          "new_line_content": "\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 1431,
          "old_api": "ereport",
          "new_api": null,
          "old_text": "ereport(ERROR,\n\t\t\t\t\t(errcode(ERRCODE_NULL_VALUE_NOT_ALLOWED),\n\t\t\t\t\t errmsg(\"null value not allowed for object key\")))",
          "new_text": null,
          "old_line_content": "\t\t\tereport(ERROR,",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 1432,
          "old_api": "errcode",
          "new_api": null,
          "old_text": "errcode(ERRCODE_NULL_VALUE_NOT_ALLOWED)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t(errcode(ERRCODE_NULL_VALUE_NOT_ALLOWED),",
          "new_line_content": "\t\tif (in_nulls[i * 2])",
          "content_same": false
        },
        {
          "line": 925,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(&ctl, 0, sizeof(ctl))",
          "new_text": null,
          "old_line_content": "\tmemset(&ctl, 0, sizeof(ctl));",
          "new_line_content": "\tHASHCTL\t\tctl;",
          "content_same": false
        },
        {
          "line": 1438,
          "old_api": "escape_json",
          "new_api": null,
          "old_text": "escape_json(&result, v)",
          "new_text": null,
          "old_line_content": "\t\tescape_json(&result, v);",
          "new_line_content": "\t\tif (i > 0)",
          "content_same": false
        },
        {
          "line": 932,
          "old_api": "hash_create",
          "new_api": null,
          "old_text": "hash_create(\"json object hashtable\",\n\t\t\t\t\t   32,\n\t\t\t\t\t   &ctl,\n\t\t\t\t\t   HASH_ELEM | HASH_CONTEXT | HASH_FUNCTION | HASH_COMPARE)",
          "new_text": null,
          "old_line_content": "\t*cxt = hash_create(\"json object hashtable\",",
          "new_line_content": "\tctl.match = json_unique_hash_match;",
          "content_same": false
        },
        {
          "line": 1445,
          "old_api": "TextDatumGetCString",
          "new_api": null,
          "old_text": "TextDatumGetCString(in_datums[i * 2 + 1])",
          "new_text": null,
          "old_line_content": "\t\t\tv = TextDatumGetCString(in_datums[i * 2 + 1]);",
          "new_line_content": "\t\telse",
          "content_same": false
        },
        {
          "line": 1446,
          "old_api": "escape_json",
          "new_api": null,
          "old_text": "escape_json(&result, v)",
          "new_text": null,
          "old_line_content": "\t\t\tescape_json(&result, v);",
          "new_line_content": "\t\t{",
          "content_same": false
        },
        {
          "line": 427,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(dim < ndims)",
          "new_text": null,
          "old_line_content": "\tAssert(dim < ndims);",
          "new_line_content": "\tconst char *sep;",
          "content_same": false
        },
        {
          "line": 1451,
          "old_api": "appendStringInfoChar",
          "new_api": null,
          "old_text": "appendStringInfoChar(&result, '}')",
          "new_text": null,
          "old_line_content": "\tappendStringInfoChar(&result, '}');",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 941,
          "old_api": "json_unique_check_init",
          "new_api": null,
          "old_text": "json_unique_check_init(&cxt->check)",
          "new_text": null,
          "old_line_content": "\tjson_unique_check_init(&cxt->check);",
          "new_line_content": "json_unique_builder_init(JsonUniqueBuilderState *cxt)",
          "content_same": false
        },
        {
          "line": 1454,
          "old_api": "pfree",
          "new_api": null,
          "old_text": "pfree(in_nulls)",
          "new_text": null,
          "old_line_content": "\tpfree(in_nulls);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 431,
          "old_api": "appendStringInfoChar",
          "new_api": null,
          "old_text": "appendStringInfoChar(result, '[')",
          "new_text": null,
          "old_line_content": "\tappendStringInfoChar(result, '[');",
          "new_line_content": "\tsep = use_line_feeds ? \",\\n \" : \",\";",
          "content_same": false
        },
        {
          "line": 1457,
          "old_api": "pfree",
          "new_api": null,
          "old_text": "pfree(result.data)",
          "new_text": null,
          "old_line_content": "\tpfree(result.data);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 436,
          "old_api": "appendStringInfoString",
          "new_api": null,
          "old_text": "appendStringInfoString(result, sep)",
          "new_text": null,
          "old_line_content": "\t\t\tappendStringInfoString(result, sep);",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 440,
          "old_api": "datum_to_json_internal",
          "new_api": null,
          "old_text": "datum_to_json_internal(vals[*valcount], nulls[*valcount],\n\t\t\t\t\t\t\t\t   result, tcategory,\n\t\t\t\t\t\t\t\t   outfuncoid, false)",
          "new_text": null,
          "old_line_content": "\t\t\tdatum_to_json_internal(vals[*valcount], nulls[*valcount],",
          "new_line_content": "\t\tif (dim + 1 == ndims)",
          "content_same": false
        },
        {
          "line": 953,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(key)",
          "new_text": null,
          "old_line_content": "\tentry.key_len = strlen(key);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 956,
          "old_api": "hash_search",
          "new_api": null,
          "old_text": "hash_search(*cxt, &entry, HASH_ENTER, &found)",
          "new_text": null,
          "old_line_content": "\t(void) hash_search(*cxt, &entry, HASH_ENTER, &found);",
          "new_line_content": "\tentry.object_id = object_id;",
          "content_same": false
        },
        {
          "line": 1471,
          "old_api": "PG_GETARG_ARRAYTYPE_P",
          "new_api": null,
          "old_text": "PG_GETARG_ARRAYTYPE_P(0)",
          "new_text": null,
          "old_line_content": "\tArrayType  *key_array = PG_GETARG_ARRAYTYPE_P(0);",
          "new_line_content": "json_object_two_arg(PG_FUNCTION_ARGS)",
          "content_same": false
        },
        {
          "line": 1472,
          "old_api": "PG_GETARG_ARRAYTYPE_P",
          "new_api": null,
          "old_text": "PG_GETARG_ARRAYTYPE_P(1)",
          "new_text": null,
          "old_line_content": "\tArrayType  *val_array = PG_GETARG_ARRAYTYPE_P(1);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 451,
          "old_api": "array_dim_to_json",
          "new_api": null,
          "old_text": "array_dim_to_json(result, dim + 1, ndims, dims, vals, nulls,\n\t\t\t\t\t\t\t  valcount, tcategory, outfuncoid, false)",
          "new_text": null,
          "old_line_content": "\t\t\tarray_dim_to_json(result, dim + 1, ndims, dims, vals, nulls,",
          "new_line_content": "\t\t\t * we'll say no.",
          "content_same": false
        },
        {
          "line": 456,
          "old_api": "appendStringInfoChar",
          "new_api": null,
          "old_text": "appendStringInfoChar(result, ']')",
          "new_text": null,
          "old_line_content": "\tappendStringInfoChar(result, ']');",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 973,
          "old_api": "MemoryContextSwitchTo",
          "new_api": null,
          "old_text": "MemoryContextSwitchTo(cxt->mcxt)",
          "new_text": null,
          "old_line_content": "\t\tMemoryContext oldcxt = MemoryContextSwitchTo(cxt->mcxt);",
          "new_line_content": "\tif (!out->data)",
          "content_same": false
        },
        {
          "line": 1487,
          "old_api": "ereport",
          "new_api": null,
          "old_text": "ereport(ERROR,\n\t\t\t\t(errcode(ERRCODE_ARRAY_SUBSCRIPT_ERROR),\n\t\t\t\t errmsg(\"wrong number of array subscripts\")))",
          "new_text": null,
          "old_line_content": "\t\tereport(ERROR,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 976,
          "old_api": "MemoryContextSwitchTo",
          "new_api": null,
          "old_text": "MemoryContextSwitchTo(oldcxt)",
          "new_text": null,
          "old_line_content": "\t\tMemoryContextSwitchTo(oldcxt);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 465,
          "old_api": "DatumGetArrayTypeP",
          "new_api": null,
          "old_text": "DatumGetArrayTypeP(array)",
          "new_text": null,
          "old_line_content": "\tArrayType  *v = DatumGetArrayTypeP(array);",
          "new_line_content": "array_to_json_internal(Datum array, StringInfo result, bool use_line_feeds)",
          "content_same": false
        },
        {
          "line": 466,
          "old_api": "ARR_ELEMTYPE",
          "new_api": null,
          "old_text": "ARR_ELEMTYPE(v)",
          "new_text": null,
          "old_line_content": "\tOid\t\t\telement_type = ARR_ELEMTYPE(v);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1488,
          "old_api": "errcode",
          "new_api": null,
          "old_text": "errcode(ERRCODE_ARRAY_SUBSCRIPT_ERROR)",
          "new_text": null,
          "old_line_content": "\t\t\t\t(errcode(ERRCODE_ARRAY_SUBSCRIPT_ERROR),",
          "new_line_content": "\tif (nkdims > 1 || nkdims != nvdims)",
          "content_same": false
        },
        {
          "line": 1492,
          "old_api": "CStringGetTextDatum",
          "new_api": null,
          "old_text": "CStringGetTextDatum(\"{}\")",
          "new_text": null,
          "old_line_content": "\t\tPG_RETURN_DATUM(CStringGetTextDatum(\"{}\"));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1495,
          "old_api": "deconstruct_array_builtin",
          "new_api": null,
          "old_text": "deconstruct_array_builtin(val_array, TEXTOID, &val_datums, &val_nulls, &val_count)",
          "new_text": null,
          "old_line_content": "\tdeconstruct_array_builtin(val_array, TEXTOID, &val_datums, &val_nulls, &val_count);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1498,
          "old_api": "ereport",
          "new_api": null,
          "old_text": "ereport(ERROR,\n\t\t\t\t(errcode(ERRCODE_ARRAY_SUBSCRIPT_ERROR),\n\t\t\t\t errmsg(\"mismatched array dimensions\")))",
          "new_text": null,
          "old_line_content": "\t\tereport(ERROR,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1499,
          "old_api": "errcode",
          "new_api": null,
          "old_text": "errcode(ERRCODE_ARRAY_SUBSCRIPT_ERROR)",
          "new_text": null,
          "old_line_content": "\t\t\t\t(errcode(ERRCODE_ARRAY_SUBSCRIPT_ERROR),",
          "new_line_content": "\tif (key_count != val_count)",
          "content_same": false
        },
        {
          "line": 479,
          "old_api": "ARR_NDIM",
          "new_api": null,
          "old_text": "ARR_NDIM(v)",
          "new_text": null,
          "old_line_content": "\tndim = ARR_NDIM(v);",
          "new_line_content": "\tOid\t\t\toutfuncoid;",
          "content_same": false
        },
        {
          "line": 480,
          "old_api": "ARR_DIMS",
          "new_api": null,
          "old_text": "ARR_DIMS(v)",
          "new_text": null,
          "old_line_content": "\tdim = ARR_DIMS(v);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 485,
          "old_api": "appendStringInfoString",
          "new_api": null,
          "old_text": "appendStringInfoString(result, \"[]\")",
          "new_text": null,
          "old_line_content": "\t\tappendStringInfoString(result, \"[]\");",
          "new_line_content": "\tif (nitems <= 0)",
          "content_same": false
        },
        {
          "line": 1509,
          "old_api": "ereport",
          "new_api": null,
          "old_text": "ereport(ERROR,\n\t\t\t\t\t(errcode(ERRCODE_NULL_VALUE_NOT_ALLOWED),\n\t\t\t\t\t errmsg(\"null value not allowed for object key\")))",
          "new_text": null,
          "old_line_content": "\t\t\tereport(ERROR,",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 1510,
          "old_api": "errcode",
          "new_api": null,
          "old_text": "errcode(ERRCODE_NULL_VALUE_NOT_ALLOWED)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t(errcode(ERRCODE_NULL_VALUE_NOT_ALLOWED),",
          "new_line_content": "\t\tif (key_nulls[i])",
          "content_same": false
        },
        {
          "line": 489,
          "old_api": "get_typlenbyvalalign",
          "new_api": null,
          "old_text": "get_typlenbyvalalign(element_type,\n\t\t\t\t\t\t &typlen, &typbyval, &typalign)",
          "new_text": null,
          "old_line_content": "\tget_typlenbyvalalign(element_type,",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1002,
          "old_api": "AggCheckCallContext",
          "new_api": null,
          "old_text": "AggCheckCallContext(fcinfo, &aggcontext)",
          "new_text": null,
          "old_line_content": "\tif (!AggCheckCallContext(fcinfo, &aggcontext))",
          "new_line_content": "\tint\t\t\tkey_offset;",
          "content_same": false
        },
        {
          "line": 492,
          "old_api": "json_categorize_type",
          "new_api": null,
          "old_text": "json_categorize_type(element_type, false,\n\t\t\t\t\t\t &tcategory, &outfuncoid)",
          "new_text": null,
          "old_line_content": "\tjson_categorize_type(element_type, false,",
          "new_line_content": "\t\t\t\t\t\t &typlen, &typbyval, &typalign);",
          "content_same": false
        },
        {
          "line": 1005,
          "old_api": "elog",
          "new_api": null,
          "old_text": "elog(ERROR, \"json_object_agg_transfn called in non-aggregate context\")",
          "new_text": null,
          "old_line_content": "\t\telog(ERROR, \"json_object_agg_transfn called in non-aggregate context\");",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 1516,
          "old_api": "escape_json",
          "new_api": null,
          "old_text": "escape_json(&result, v)",
          "new_text": null,
          "old_line_content": "\t\tescape_json(&result, v);",
          "new_line_content": "\t\tif (i > 0)",
          "content_same": false
        },
        {
          "line": 495,
          "old_api": "deconstruct_array",
          "new_api": null,
          "old_text": "deconstruct_array(v, element_type, typlen, typbyval,\n\t\t\t\t\t  typalign, &elements, &nulls,\n\t\t\t\t\t  &nitems)",
          "new_text": null,
          "old_line_content": "\tdeconstruct_array(v, element_type, typlen, typbyval,",
          "new_line_content": "\t\t\t\t\t\t &tcategory, &outfuncoid);",
          "content_same": false
        },
        {
          "line": 1008,
          "old_api": "PG_ARGISNULL",
          "new_api": null,
          "old_text": "PG_ARGISNULL(0)",
          "new_text": null,
          "old_line_content": "\tif (PG_ARGISNULL(0))",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 499,
          "old_api": "array_dim_to_json",
          "new_api": null,
          "old_text": "array_dim_to_json(result, 0, ndim, dim, elements, nulls, &count, tcategory,\n\t\t\t\t\t  outfuncoid, use_line_feeds)",
          "new_text": null,
          "old_line_content": "\tarray_dim_to_json(result, 0, ndim, dim, elements, nulls, &count, tcategory,",
          "new_line_content": "\t\t\t\t\t  &nitems);",
          "content_same": false
        },
        {
          "line": 1523,
          "old_api": "TextDatumGetCString",
          "new_api": null,
          "old_text": "TextDatumGetCString(val_datums[i])",
          "new_text": null,
          "old_line_content": "\t\t\tv = TextDatumGetCString(val_datums[i]);",
          "new_line_content": "\t\telse",
          "content_same": false
        },
        {
          "line": 1524,
          "old_api": "escape_json",
          "new_api": null,
          "old_text": "escape_json(&result, v)",
          "new_text": null,
          "old_line_content": "\t\t\tescape_json(&result, v);",
          "new_line_content": "\t\t{",
          "content_same": false
        },
        {
          "line": 502,
          "old_api": "pfree",
          "new_api": null,
          "old_text": "pfree(elements)",
          "new_text": null,
          "old_line_content": "\tpfree(elements);",
          "new_line_content": "\t\t\t\t\t  outfuncoid, use_line_feeds);",
          "content_same": false
        },
        {
          "line": 503,
          "old_api": "pfree",
          "new_api": null,
          "old_text": "pfree(nulls)",
          "new_text": null,
          "old_line_content": "\tpfree(nulls);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1529,
          "old_api": "appendStringInfoChar",
          "new_api": null,
          "old_text": "appendStringInfoChar(&result, '}')",
          "new_text": null,
          "old_line_content": "\tappendStringInfoChar(&result, '}');",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1018,
          "old_api": "MemoryContextSwitchTo",
          "new_api": null,
          "old_text": "MemoryContextSwitchTo(aggcontext)",
          "new_text": null,
          "old_line_content": "\t\toldcontext = MemoryContextSwitchTo(aggcontext);",
          "new_line_content": "\t\t * sure they use the right context to enlarge the object if necessary.",
          "content_same": false
        },
        {
          "line": 1019,
          "old_api": "palloc",
          "new_api": null,
          "old_text": "palloc(sizeof(JsonAggState))",
          "new_text": null,
          "old_line_content": "\t\tstate = (JsonAggState *) palloc(sizeof(JsonAggState));",
          "new_line_content": "\t\t */",
          "content_same": false
        },
        {
          "line": 1532,
          "old_api": "pfree",
          "new_api": null,
          "old_text": "pfree(key_nulls)",
          "new_text": null,
          "old_line_content": "\tpfree(key_nulls);",
          "new_line_content": "",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 112,
      "total_additions": 249,
      "total_deletions": 248,
      "total_api_changes": 609
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 14,
        "api_related_lines": 609,
        "non_api_lines": 1,
        "non_api_line_numbers": [
          219
        ]
      }
    },
    "api_calls_before": 419,
    "api_calls_after": 424,
    "diff_info": {
      "added_lines": 9,
      "removed_lines": 7,
      "total_diff_lines": 44
    }
  }
}
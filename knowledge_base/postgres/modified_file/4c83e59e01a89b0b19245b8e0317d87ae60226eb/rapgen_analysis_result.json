{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/postgres/modified_file/4c83e59e01a89b0b19245b8e0317d87ae60226eb",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/postgres/modified_file/4c83e59e01a89b0b19245b8e0317d87ae60226eb/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/postgres/modified_file/4c83e59e01a89b0b19245b8e0317d87ae60226eb/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/postgres/modified_file/4c83e59e01a89b0b19245b8e0317d87ae60226eb/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 694,
          "old_api": "TransactionIdToCTsPage",
          "new_api": "XidFromFullTransactionId",
          "old_text": "TransactionIdToCTsPage(xid)",
          "new_text": "XidFromFullTransactionId(ShmemVariableCache->nextXid)",
          "old_line_content": "\tpageno = TransactionIdToCTsPage(xid);",
          "new_line_content": "\txid = XidFromFullTransactionId(ShmemVariableCache->nextXid);",
          "content_same": false
        },
        {
          "line": 730,
          "old_api": "ZeroCommitTsPage",
          "new_api": "LWLockAcquire",
          "old_text": "ZeroCommitTsPage(pageno, false)",
          "new_text": "LWLockAcquire(CommitTsSLRULock, LW_EXCLUSIVE)",
          "old_line_content": "\t\tslotno = ZeroCommitTsPage(pageno, false);",
          "new_line_content": "\t\tLWLockAcquire(CommitTsSLRULock, LW_EXCLUSIVE);",
          "content_same": false
        },
        {
          "line": 731,
          "old_api": "SimpleLruWritePage",
          "new_api": "ZeroCommitTsPage",
          "old_text": "SimpleLruWritePage(CommitTsCtl, slotno)",
          "new_text": "ZeroCommitTsPage(pageno, false)",
          "old_line_content": "\t\tSimpleLruWritePage(CommitTsCtl, slotno);",
          "new_line_content": "\t\tslotno = ZeroCommitTsPage(pageno, false);",
          "content_same": false
        },
        {
          "line": 732,
          "old_api": "Assert",
          "new_api": "SimpleLruWritePage",
          "old_text": "Assert(!CommitTsCtl->shared->page_dirty[slotno])",
          "new_text": "SimpleLruWritePage(CommitTsCtl, slotno)",
          "old_line_content": "\t\tAssert(!CommitTsCtl->shared->page_dirty[slotno]);",
          "new_line_content": "\t\tSimpleLruWritePage(CommitTsCtl, slotno);",
          "content_same": false
        },
        {
          "line": 733,
          "old_api": "LWLockRelease",
          "new_api": "Assert",
          "old_text": "LWLockRelease(CommitTsSLRULock)",
          "new_text": "Assert(!CommitTsCtl->shared->page_dirty[slotno])",
          "old_line_content": "\t\tLWLockRelease(CommitTsSLRULock);",
          "new_line_content": "\t\tAssert(!CommitTsCtl->shared->page_dirty[slotno]);",
          "content_same": false
        },
        {
          "line": 783,
          "old_api": "SlruScanDirectory",
          "new_api": "LWLockAcquire",
          "old_text": "SlruScanDirectory(CommitTsCtl, SlruScanDirCbDeleteAll, NULL)",
          "new_text": "LWLockAcquire(CommitTsSLRULock, LW_EXCLUSIVE)",
          "old_line_content": "\t(void) SlruScanDirectory(CommitTsCtl, SlruScanDirCbDeleteAll, NULL);",
          "new_line_content": "\tLWLockAcquire(CommitTsSLRULock, LW_EXCLUSIVE);",
          "content_same": false
        },
        {
          "line": 784,
          "old_api": "LWLockRelease",
          "new_api": "SlruScanDirectory",
          "old_text": "LWLockRelease(CommitTsSLRULock)",
          "new_text": "SlruScanDirectory(CommitTsCtl, SlruScanDirCbDeleteAll, NULL)",
          "old_line_content": "\tLWLockRelease(CommitTsSLRULock);",
          "new_line_content": "\t(void) SlruScanDirectory(CommitTsCtl, SlruScanDirCbDeleteAll, NULL);",
          "content_same": false
        },
        {
          "line": 831,
          "old_api": "TransactionIdEquals",
          "new_api": "TransactionIdToCTsEntry",
          "old_text": "TransactionIdEquals(newestXact, FirstNormalTransactionId)",
          "new_text": "TransactionIdToCTsEntry(newestXact)",
          "old_line_content": "\t\t!TransactionIdEquals(newestXact, FirstNormalTransactionId))",
          "new_line_content": "\tif (TransactionIdToCTsEntry(newestXact) != 0 &&",
          "content_same": false
        },
        {
          "line": 960,
          "old_api": "XLogRegisterData",
          "new_api": "XLogBeginInsert",
          "old_text": "XLogRegisterData((char *) (&pageno), sizeof(int))",
          "new_text": "XLogBeginInsert()",
          "old_line_content": "\tXLogRegisterData((char *) (&pageno), sizeof(int));",
          "new_line_content": "\tXLogBeginInsert();",
          "content_same": false
        },
        {
          "line": 961,
          "old_api": "XLogInsert",
          "new_api": "XLogRegisterData",
          "old_text": "XLogInsert(RM_COMMIT_TS_ID, COMMIT_TS_ZEROPAGE)",
          "new_text": "XLogRegisterData((char *) (&pageno), sizeof(int))",
          "old_line_content": "\t(void) XLogInsert(RM_COMMIT_TS_ID, COMMIT_TS_ZEROPAGE);",
          "new_line_content": "\tXLogRegisterData((char *) (&pageno), sizeof(int));",
          "content_same": false
        },
        {
          "line": 976,
          "old_api": "XLogRegisterData",
          "new_api": "XLogBeginInsert",
          "old_text": "XLogRegisterData((char *) (&xlrec), SizeOfCommitTsTruncate)",
          "new_text": "XLogBeginInsert()",
          "old_line_content": "\tXLogRegisterData((char *) (&xlrec), SizeOfCommitTsTruncate);",
          "new_line_content": "\tXLogBeginInsert();",
          "content_same": false
        },
        {
          "line": 977,
          "old_api": "XLogInsert",
          "new_api": "XLogRegisterData",
          "old_text": "XLogInsert(RM_COMMIT_TS_ID, COMMIT_TS_TRUNCATE)",
          "new_text": "XLogRegisterData((char *) (&xlrec), SizeOfCommitTsTruncate)",
          "old_line_content": "\t(void) XLogInsert(RM_COMMIT_TS_ID, COMMIT_TS_TRUNCATE);",
          "new_line_content": "\tXLogRegisterData((char *) (&xlrec), SizeOfCommitTsTruncate);",
          "content_same": false
        },
        {
          "line": 1001,
          "old_api": "SimpleLruWritePage",
          "new_api": "ZeroCommitTsPage",
          "old_text": "SimpleLruWritePage(CommitTsCtl, slotno)",
          "new_text": "ZeroCommitTsPage(pageno, false)",
          "old_line_content": "\t\tSimpleLruWritePage(CommitTsCtl, slotno);",
          "new_line_content": "\t\tslotno = ZeroCommitTsPage(pageno, false);",
          "content_same": false
        },
        {
          "line": 1002,
          "old_api": "Assert",
          "new_api": "SimpleLruWritePage",
          "old_text": "Assert(!CommitTsCtl->shared->page_dirty[slotno])",
          "new_text": "SimpleLruWritePage(CommitTsCtl, slotno)",
          "old_line_content": "\t\tAssert(!CommitTsCtl->shared->page_dirty[slotno]);",
          "new_line_content": "\t\tSimpleLruWritePage(CommitTsCtl, slotno);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 898,
          "old_api": null,
          "new_api": "LWLockRelease",
          "old_text": null,
          "new_text": "LWLockRelease(CommitTsLock)",
          "old_line_content": "}",
          "new_line_content": "\tLWLockRelease(CommitTsLock);",
          "content_same": false
        },
        {
          "line": 773,
          "old_api": null,
          "new_api": "LWLockRelease",
          "old_text": null,
          "new_text": "LWLockRelease(CommitTsLock)",
          "old_line_content": "",
          "new_line_content": "\tLWLockRelease(CommitTsLock);",
          "content_same": false
        },
        {
          "line": 518,
          "old_api": null,
          "new_api": "Max",
          "old_text": null,
          "new_text": "Max(4, NBuffers / 256)",
          "old_line_content": "}",
          "new_line_content": "\treturn Min(256, Max(4, NBuffers / 256));",
          "content_same": false
        },
        {
          "line": 1031,
          "old_api": null,
          "new_api": "SlruSyncFileTag",
          "old_text": null,
          "new_text": "SlruSyncFileTag(CommitTsCtl, ftag, path)",
          "old_line_content": "}",
          "new_line_content": "\treturn SlruSyncFileTag(CommitTsCtl, ftag, path);",
          "content_same": false
        },
        {
          "line": 1019,
          "old_api": null,
          "new_api": "SimpleLruTruncate",
          "old_text": null,
          "new_text": "SimpleLruTruncate(CommitTsCtl, trunc->pageno)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tSimpleLruTruncate(CommitTsCtl, trunc->pageno);",
          "content_same": false
        },
        {
          "line": 907,
          "old_api": null,
          "new_api": "LWLockAcquire",
          "old_text": null,
          "new_text": "LWLockAcquire(CommitTsLock, LW_EXCLUSIVE)",
          "old_line_content": "\tif (ShmemVariableCache->oldestCommitTsXid != InvalidTransactionId &&",
          "new_line_content": "\tLWLockAcquire(CommitTsLock, LW_EXCLUSIVE);",
          "content_same": false
        },
        {
          "line": 909,
          "old_api": null,
          "new_api": "TransactionIdPrecedes",
          "old_text": null,
          "new_text": "TransactionIdPrecedes(ShmemVariableCache->oldestCommitTsXid, oldestXact)",
          "old_line_content": "\t\tShmemVariableCache->oldestCommitTsXid = oldestXact;",
          "new_line_content": "\t\tTransactionIdPrecedes(ShmemVariableCache->oldestCommitTsXid, oldestXact))",
          "content_same": false
        },
        {
          "line": 527,
          "old_api": null,
          "new_api": "CommitTsShmemBuffers",
          "old_text": null,
          "new_text": "CommitTsShmemBuffers()",
          "old_line_content": "\t\tsizeof(CommitTimestampShared);",
          "new_line_content": "\treturn SimpleLruShmemSize(CommitTsShmemBuffers(), 0) +",
          "content_same": false
        },
        {
          "line": 911,
          "old_api": null,
          "new_api": "LWLockRelease",
          "old_text": null,
          "new_text": "LWLockRelease(CommitTsLock)",
          "old_line_content": "}",
          "new_line_content": "\tLWLockRelease(CommitTsLock);",
          "content_same": false
        },
        {
          "line": 657,
          "old_api": null,
          "new_api": "ActivateCommitTs",
          "old_text": null,
          "new_text": "ActivateCommitTs()",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\tActivateCommitTs();",
          "content_same": false
        },
        {
          "line": 785,
          "old_api": null,
          "new_api": "LWLockRelease",
          "old_text": null,
          "new_text": "LWLockRelease(CommitTsSLRULock)",
          "old_line_content": "}",
          "new_line_content": "\tLWLockRelease(CommitTsSLRULock);",
          "content_same": false
        },
        {
          "line": 660,
          "old_api": null,
          "new_api": "DeactivateCommitTs",
          "old_text": null,
          "new_text": "DeactivateCommitTs()",
          "old_line_content": "}",
          "new_line_content": "\t\tDeactivateCommitTs();",
          "content_same": false
        },
        {
          "line": 1022,
          "old_api": null,
          "new_api": "elog",
          "old_text": null,
          "new_text": "elog(PANIC, \"commit_ts_redo: unknown op code %u\", info)",
          "old_line_content": "}",
          "new_line_content": "\t\telog(PANIC, \"commit_ts_redo: unknown op code %u\", info);",
          "content_same": false
        },
        {
          "line": 541,
          "old_api": null,
          "new_api": "CommitTsShmemBuffers",
          "old_text": null,
          "new_text": "CommitTsShmemBuffers()",
          "old_line_content": "\t\t\t\t  CommitTsSLRULock, \"pg_commit_ts\",",
          "new_line_content": "\tSimpleLruInit(CommitTsCtl, \"CommitTs\", CommitTsShmemBuffers(), 0,",
          "content_same": false
        },
        {
          "line": 799,
          "old_api": null,
          "new_api": "SimpleLruWriteAll",
          "old_text": null,
          "new_text": "SimpleLruWriteAll(CommitTsCtl, true)",
          "old_line_content": "}",
          "new_line_content": "\tSimpleLruWriteAll(CommitTsCtl, true);",
          "content_same": false
        },
        {
          "line": 545,
          "old_api": null,
          "new_api": "SlruPagePrecedesUnitTests",
          "old_text": null,
          "new_text": "SlruPagePrecedesUnitTests(CommitTsCtl, COMMIT_TS_XACTS_PER_PAGE)",
          "old_line_content": "",
          "new_line_content": "\tSlruPagePrecedesUnitTests(CommitTsCtl, COMMIT_TS_XACTS_PER_PAGE);",
          "content_same": false
        },
        {
          "line": 547,
          "old_api": null,
          "new_api": "ShmemInitStruct",
          "old_text": null,
          "new_text": "ShmemInitStruct(\"CommitTs shared\",\n\t\t\t\t\t\t\t\t\t sizeof(CommitTimestampShared),\n\t\t\t\t\t\t\t\t\t &found)",
          "old_line_content": "\t\t\t\t\t\t\t\t\t sizeof(CommitTimestampShared),",
          "new_line_content": "\tcommitTsShared = ShmemInitStruct(\"CommitTs shared\",",
          "content_same": false
        },
        {
          "line": 553,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(!found)",
          "old_line_content": "",
          "new_line_content": "\t\tAssert(!found);",
          "content_same": false
        },
        {
          "line": 556,
          "old_api": null,
          "new_api": "TIMESTAMP_NOBEGIN",
          "old_text": null,
          "new_text": "TIMESTAMP_NOBEGIN(commitTsShared->dataLastCommit.time)",
          "old_line_content": "\t\tcommitTsShared->dataLastCommit.nodeid = InvalidRepOriginId;",
          "new_line_content": "\t\tTIMESTAMP_NOBEGIN(commitTsShared->dataLastCommit.time);",
          "content_same": false
        },
        {
          "line": 686,
          "old_api": null,
          "new_api": "LWLockAcquire",
          "old_text": null,
          "new_text": "LWLockAcquire(CommitTsLock, LW_EXCLUSIVE)",
          "old_line_content": "\tif (commitTsShared->commitTsActive)",
          "new_line_content": "\tLWLockAcquire(CommitTsLock, LW_EXCLUSIVE);",
          "content_same": false
        },
        {
          "line": 561,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(found)",
          "old_line_content": "}",
          "new_line_content": "\t\tAssert(found);",
          "content_same": false
        },
        {
          "line": 689,
          "old_api": null,
          "new_api": "LWLockRelease",
          "old_text": null,
          "new_text": "LWLockRelease(CommitTsLock)",
          "old_line_content": "\t\treturn;",
          "new_line_content": "\t\tLWLockRelease(CommitTsLock);",
          "content_same": false
        },
        {
          "line": 692,
          "old_api": null,
          "new_api": "LWLockRelease",
          "old_text": null,
          "new_text": "LWLockRelease(CommitTsLock)",
          "old_line_content": "",
          "new_line_content": "\tLWLockRelease(CommitTsLock);",
          "content_same": false
        },
        {
          "line": 950,
          "old_api": null,
          "new_api": "TransactionIdPrecedes",
          "old_text": null,
          "new_text": "TransactionIdPrecedes(xid1, xid2 + COMMIT_TS_XACTS_PER_PAGE - 1)",
          "old_line_content": "}",
          "new_line_content": "\t\t\tTransactionIdPrecedes(xid1, xid2 + COMMIT_TS_XACTS_PER_PAGE - 1));",
          "content_same": false
        },
        {
          "line": 695,
          "old_api": null,
          "new_api": "TransactionIdToCTsPage",
          "old_text": null,
          "new_text": "TransactionIdToCTsPage(xid)",
          "old_line_content": "",
          "new_line_content": "\tpageno = TransactionIdToCTsPage(xid);",
          "content_same": false
        },
        {
          "line": 823,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(!InRecovery)",
          "old_line_content": "\tif (!commitTsShared->commitTsActive)",
          "new_line_content": "\tAssert(!InRecovery);",
          "content_same": false
        },
        {
          "line": 700,
          "old_api": null,
          "new_api": "LWLockAcquire",
          "old_text": null,
          "new_text": "LWLockAcquire(CommitTsSLRULock, LW_EXCLUSIVE)",
          "old_line_content": "\tCommitTsCtl->shared->latest_page_number = pageno;",
          "new_line_content": "\tLWLockAcquire(CommitTsSLRULock, LW_EXCLUSIVE);",
          "content_same": false
        },
        {
          "line": 702,
          "old_api": null,
          "new_api": "LWLockRelease",
          "old_text": null,
          "new_text": "LWLockRelease(CommitTsSLRULock)",
          "old_line_content": "",
          "new_line_content": "\tLWLockRelease(CommitTsSLRULock);",
          "content_same": false
        },
        {
          "line": 832,
          "old_api": null,
          "new_api": "TransactionIdEquals",
          "old_text": null,
          "new_text": "TransactionIdEquals(newestXact, FirstNormalTransactionId)",
          "old_line_content": "\t\treturn;",
          "new_line_content": "\t\t!TransactionIdEquals(newestXact, FirstNormalTransactionId))",
          "content_same": false
        },
        {
          "line": 962,
          "old_api": null,
          "new_api": "XLogInsert",
          "old_text": null,
          "new_text": "XLogInsert(RM_COMMIT_TS_ID, COMMIT_TS_ZEROPAGE)",
          "old_line_content": "}",
          "new_line_content": "\t(void) XLogInsert(RM_COMMIT_TS_ID, COMMIT_TS_ZEROPAGE);",
          "content_same": false
        },
        {
          "line": 835,
          "old_api": null,
          "new_api": "TransactionIdToCTsPage",
          "old_text": null,
          "new_text": "TransactionIdToCTsPage(newestXact)",
          "old_line_content": "",
          "new_line_content": "\tpageno = TransactionIdToCTsPage(newestXact);",
          "content_same": false
        },
        {
          "line": 837,
          "old_api": null,
          "new_api": "LWLockAcquire",
          "old_text": null,
          "new_text": "LWLockAcquire(CommitTsSLRULock, LW_EXCLUSIVE)",
          "old_line_content": "",
          "new_line_content": "\tLWLockAcquire(CommitTsSLRULock, LW_EXCLUSIVE);",
          "content_same": false
        },
        {
          "line": 840,
          "old_api": null,
          "new_api": "ZeroCommitTsPage",
          "old_text": null,
          "new_text": "ZeroCommitTsPage(pageno, !InRecovery)",
          "old_line_content": "",
          "new_line_content": "\tZeroCommitTsPage(pageno, !InRecovery);",
          "content_same": false
        },
        {
          "line": 842,
          "old_api": null,
          "new_api": "LWLockRelease",
          "old_text": null,
          "new_text": "LWLockRelease(CommitTsSLRULock)",
          "old_line_content": "}",
          "new_line_content": "\tLWLockRelease(CommitTsSLRULock);",
          "content_same": false
        },
        {
          "line": 717,
          "old_api": null,
          "new_api": "LWLockAcquire",
          "old_text": null,
          "new_text": "LWLockAcquire(CommitTsLock, LW_EXCLUSIVE)",
          "old_line_content": "\tif (ShmemVariableCache->oldestCommitTsXid == InvalidTransactionId)",
          "new_line_content": "\tLWLockAcquire(CommitTsLock, LW_EXCLUSIVE);",
          "content_same": false
        },
        {
          "line": 721,
          "old_api": null,
          "new_api": "ReadNextTransactionId",
          "old_text": null,
          "new_text": "ReadNextTransactionId()",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\tShmemVariableCache->newestCommitTsXid = ReadNextTransactionId();",
          "content_same": false
        },
        {
          "line": 594,
          "old_api": null,
          "new_api": "SimpleLruZeroPage",
          "old_text": null,
          "new_text": "SimpleLruZeroPage(CommitTsCtl, pageno)",
          "old_line_content": "",
          "new_line_content": "\tslotno = SimpleLruZeroPage(CommitTsCtl, pageno);",
          "content_same": false
        },
        {
          "line": 723,
          "old_api": null,
          "new_api": "LWLockRelease",
          "old_text": null,
          "new_text": "LWLockRelease(CommitTsLock)",
          "old_line_content": "",
          "new_line_content": "\tLWLockRelease(CommitTsLock);",
          "content_same": false
        },
        {
          "line": 978,
          "old_api": null,
          "new_api": "XLogInsert",
          "old_text": null,
          "new_text": "XLogInsert(RM_COMMIT_TS_ID, COMMIT_TS_TRUNCATE)",
          "old_line_content": "}",
          "new_line_content": "\t(void) XLogInsert(RM_COMMIT_TS_ID, COMMIT_TS_TRUNCATE);",
          "content_same": false
        },
        {
          "line": 597,
          "old_api": null,
          "new_api": "WriteZeroPageXlogRec",
          "old_text": null,
          "new_text": "WriteZeroPageXlogRec(pageno)",
          "old_line_content": "",
          "new_line_content": "\t\tWriteZeroPageXlogRec(pageno);",
          "content_same": false
        },
        {
          "line": 726,
          "old_api": null,
          "new_api": "SimpleLruDoesPhysicalPageExist",
          "old_text": null,
          "new_text": "SimpleLruDoesPhysicalPageExist(CommitTsCtl, pageno)",
          "old_line_content": "\t{",
          "new_line_content": "\tif (!SimpleLruDoesPhysicalPageExist(CommitTsCtl, pageno))",
          "content_same": false
        },
        {
          "line": 987,
          "old_api": null,
          "new_api": "XLogRecGetInfo",
          "old_text": null,
          "new_text": "XLogRecGetInfo(record)",
          "old_line_content": "",
          "new_line_content": "\tuint8\t\tinfo = XLogRecGetInfo(record) & ~XLR_INFO_MASK;",
          "content_same": false
        },
        {
          "line": 860,
          "old_api": null,
          "new_api": "TransactionIdToCTsPage",
          "old_text": null,
          "new_text": "TransactionIdToCTsPage(oldestXact)",
          "old_line_content": "",
          "new_line_content": "\tcutoffPage = TransactionIdToCTsPage(oldestXact);",
          "content_same": false
        },
        {
          "line": 734,
          "old_api": null,
          "new_api": "LWLockRelease",
          "old_text": null,
          "new_text": "LWLockRelease(CommitTsSLRULock)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tLWLockRelease(CommitTsSLRULock);",
          "content_same": false
        },
        {
          "line": 863,
          "old_api": null,
          "new_api": "SlruScanDirectory",
          "old_text": null,
          "new_text": "SlruScanDirectory(CommitTsCtl, SlruScanDirCbReportPresence,\n\t\t\t\t\t\t   &cutoffPage)",
          "old_line_content": "\t\t\t\t\t\t   &cutoffPage))",
          "new_line_content": "\tif (!SlruScanDirectory(CommitTsCtl, SlruScanDirCbReportPresence,",
          "content_same": false
        },
        {
          "line": 990,
          "old_api": null,
          "new_api": "XLogRecHasAnyBlockRefs",
          "old_text": null,
          "new_text": "XLogRecHasAnyBlockRefs(record)",
          "old_line_content": "",
          "new_line_content": "\tAssert(!XLogRecHasAnyBlockRefs(record));",
          "content_same": false
        },
        {
          "line": 609,
          "old_api": null,
          "new_api": "ActivateCommitTs",
          "old_text": null,
          "new_text": "ActivateCommitTs()",
          "old_line_content": "}",
          "new_line_content": "\tActivateCommitTs();",
          "content_same": false
        },
        {
          "line": 738,
          "old_api": null,
          "new_api": "LWLockAcquire",
          "old_text": null,
          "new_text": "LWLockAcquire(CommitTsLock, LW_EXCLUSIVE)",
          "old_line_content": "\tcommitTsShared->commitTsActive = true;",
          "new_line_content": "\tLWLockAcquire(CommitTsLock, LW_EXCLUSIVE);",
          "content_same": false
        },
        {
          "line": 740,
          "old_api": null,
          "new_api": "LWLockRelease",
          "old_text": null,
          "new_text": "LWLockRelease(CommitTsLock)",
          "old_line_content": "}",
          "new_line_content": "\tLWLockRelease(CommitTsLock);",
          "content_same": false
        },
        {
          "line": 868,
          "old_api": null,
          "new_api": "WriteTruncateXlogRec",
          "old_text": null,
          "new_text": "WriteTruncateXlogRec(cutoffPage, oldestXact)",
          "old_line_content": "",
          "new_line_content": "\tWriteTruncateXlogRec(cutoffPage, oldestXact);",
          "content_same": false
        },
        {
          "line": 997,
          "old_api": null,
          "new_api": "XLogRecGetData",
          "old_text": null,
          "new_text": "XLogRecGetData(record)",
          "old_line_content": "",
          "new_line_content": "\t\tmemcpy(&pageno, XLogRecGetData(record), sizeof(int));",
          "content_same": false
        },
        {
          "line": 871,
          "old_api": null,
          "new_api": "SimpleLruTruncate",
          "old_text": null,
          "new_text": "SimpleLruTruncate(CommitTsCtl, cutoffPage)",
          "old_line_content": "}",
          "new_line_content": "\tSimpleLruTruncate(CommitTsCtl, cutoffPage);",
          "content_same": false
        },
        {
          "line": 999,
          "old_api": null,
          "new_api": "LWLockAcquire",
          "old_text": null,
          "new_text": "LWLockAcquire(CommitTsSLRULock, LW_EXCLUSIVE)",
          "old_line_content": "",
          "new_line_content": "\t\tLWLockAcquire(CommitTsSLRULock, LW_EXCLUSIVE);",
          "content_same": false
        },
        {
          "line": 1003,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(!CommitTsCtl->shared->page_dirty[slotno])",
          "old_line_content": "",
          "new_line_content": "\t\tAssert(!CommitTsCtl->shared->page_dirty[slotno]);",
          "content_same": false
        },
        {
          "line": 1005,
          "old_api": null,
          "new_api": "LWLockRelease",
          "old_text": null,
          "new_text": "LWLockRelease(CommitTsSLRULock)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tLWLockRelease(CommitTsSLRULock);",
          "content_same": false
        },
        {
          "line": 887,
          "old_api": null,
          "new_api": "TransactionIdPrecedes",
          "old_text": null,
          "new_text": "TransactionIdPrecedes(ShmemVariableCache->oldestCommitTsXid, oldestXact)",
          "old_line_content": "\t\t\tShmemVariableCache->oldestCommitTsXid = oldestXact;",
          "new_line_content": "\t\tif (TransactionIdPrecedes(ShmemVariableCache->oldestCommitTsXid, oldestXact))",
          "content_same": false
        },
        {
          "line": 1009,
          "old_api": null,
          "new_api": "XLogRecGetData",
          "old_text": null,
          "new_text": "XLogRecGetData(record)",
          "old_line_content": "",
          "new_line_content": "\t\txl_commit_ts_truncate *trunc = (xl_commit_ts_truncate *) XLogRecGetData(record);",
          "content_same": false
        },
        {
          "line": 1011,
          "old_api": null,
          "new_api": "AdvanceOldestCommitTsXid",
          "old_text": null,
          "new_text": "AdvanceOldestCommitTsXid(trunc->oldestXid)",
          "old_line_content": "",
          "new_line_content": "\t\tAdvanceOldestCommitTsXid(trunc->oldestXid);",
          "content_same": false
        },
        {
          "line": 884,
          "old_api": null,
          "new_api": "LWLockAcquire",
          "old_text": null,
          "new_text": "LWLockAcquire(CommitTsLock, LW_EXCLUSIVE)",
          "old_line_content": "\tif (ShmemVariableCache->oldestCommitTsXid != InvalidTransactionId)",
          "new_line_content": "\tLWLockAcquire(CommitTsLock, LW_EXCLUSIVE);",
          "content_same": false
        },
        {
          "line": 629,
          "old_api": null,
          "new_api": "DeactivateCommitTs",
          "old_text": null,
          "new_text": "DeactivateCommitTs()",
          "old_line_content": "\telse",
          "new_line_content": "\t\tDeactivateCommitTs();",
          "content_same": false
        },
        {
          "line": 631,
          "old_api": null,
          "new_api": "ActivateCommitTs",
          "old_text": null,
          "new_text": "ActivateCommitTs()",
          "old_line_content": "}",
          "new_line_content": "\t\tActivateCommitTs();",
          "content_same": false
        },
        {
          "line": 889,
          "old_api": null,
          "new_api": "TransactionIdPrecedes",
          "old_text": null,
          "new_text": "TransactionIdPrecedes(newestXact, ShmemVariableCache->newestCommitTsXid)",
          "old_line_content": "\t\t\tShmemVariableCache->newestCommitTsXid = newestXact;",
          "new_line_content": "\t\tif (TransactionIdPrecedes(newestXact, ShmemVariableCache->newestCommitTsXid))",
          "content_same": false
        },
        {
          "line": 763,
          "old_api": null,
          "new_api": "LWLockAcquire",
          "old_text": null,
          "new_text": "LWLockAcquire(CommitTsLock, LW_EXCLUSIVE)",
          "old_line_content": "",
          "new_line_content": "\tLWLockAcquire(CommitTsLock, LW_EXCLUSIVE);",
          "content_same": false
        },
        {
          "line": 894,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(ShmemVariableCache->newestCommitTsXid == InvalidTransactionId)",
          "old_line_content": "\t\tShmemVariableCache->oldestCommitTsXid = oldestXact;",
          "new_line_content": "\t\tAssert(ShmemVariableCache->newestCommitTsXid == InvalidTransactionId);",
          "content_same": false
        },
        {
          "line": 767,
          "old_api": null,
          "new_api": "TIMESTAMP_NOBEGIN",
          "old_text": null,
          "new_text": "TIMESTAMP_NOBEGIN(commitTsShared->dataLastCommit.time)",
          "old_line_content": "\tcommitTsShared->dataLastCommit.nodeid = InvalidRepOriginId;",
          "new_line_content": "\tTIMESTAMP_NOBEGIN(commitTsShared->dataLastCommit.time);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 897,
          "old_api": "LWLockRelease",
          "new_api": null,
          "old_text": "LWLockRelease(CommitTsLock)",
          "new_text": null,
          "old_line_content": "\tLWLockRelease(CommitTsLock);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1018,
          "old_api": "SimpleLruTruncate",
          "new_api": null,
          "old_text": "SimpleLruTruncate(CommitTsCtl, trunc->pageno)",
          "new_text": null,
          "old_line_content": "\t\tSimpleLruTruncate(CommitTsCtl, trunc->pageno);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 772,
          "old_api": "LWLockRelease",
          "new_api": null,
          "old_text": "LWLockRelease(CommitTsLock)",
          "new_text": null,
          "old_line_content": "\tLWLockRelease(CommitTsLock);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 517,
          "old_api": "Max",
          "new_api": null,
          "old_text": "Max(4, NBuffers / 1024)",
          "new_text": null,
          "old_line_content": "\treturn Min(16, Max(4, NBuffers / 1024));",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1030,
          "old_api": "SlruSyncFileTag",
          "new_api": null,
          "old_text": "SlruSyncFileTag(CommitTsCtl, ftag, path)",
          "new_text": null,
          "old_line_content": "\treturn SlruSyncFileTag(CommitTsCtl, ftag, path);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 906,
          "old_api": "LWLockAcquire",
          "new_api": null,
          "old_text": "LWLockAcquire(CommitTsLock, LW_EXCLUSIVE)",
          "new_text": null,
          "old_line_content": "\tLWLockAcquire(CommitTsLock, LW_EXCLUSIVE);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 908,
          "old_api": "TransactionIdPrecedes",
          "new_api": null,
          "old_text": "TransactionIdPrecedes(ShmemVariableCache->oldestCommitTsXid, oldestXact)",
          "new_text": null,
          "old_line_content": "\t\tTransactionIdPrecedes(ShmemVariableCache->oldestCommitTsXid, oldestXact))",
          "new_line_content": "\tif (ShmemVariableCache->oldestCommitTsXid != InvalidTransactionId &&",
          "content_same": false
        },
        {
          "line": 526,
          "old_api": "CommitTsShmemBuffers",
          "new_api": null,
          "old_text": "CommitTsShmemBuffers()",
          "new_text": null,
          "old_line_content": "\treturn SimpleLruShmemSize(CommitTsShmemBuffers(), 0) +",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 782,
          "old_api": "LWLockAcquire",
          "new_api": null,
          "old_text": "LWLockAcquire(CommitTsSLRULock, LW_EXCLUSIVE)",
          "new_text": null,
          "old_line_content": "\tLWLockAcquire(CommitTsSLRULock, LW_EXCLUSIVE);",
          "new_line_content": "\t */",
          "content_same": false
        },
        {
          "line": 656,
          "old_api": "ActivateCommitTs",
          "new_api": null,
          "old_text": "ActivateCommitTs()",
          "new_text": null,
          "old_line_content": "\t\t\tActivateCommitTs();",
          "new_line_content": "\t\tif (!commitTsShared->commitTsActive)",
          "content_same": false
        },
        {
          "line": 910,
          "old_api": "LWLockRelease",
          "new_api": null,
          "old_text": "LWLockRelease(CommitTsLock)",
          "new_text": null,
          "old_line_content": "\tLWLockRelease(CommitTsLock);",
          "new_line_content": "\t\tShmemVariableCache->oldestCommitTsXid = oldestXact;",
          "content_same": false
        },
        {
          "line": 1021,
          "old_api": "elog",
          "new_api": null,
          "old_text": "elog(PANIC, \"commit_ts_redo: unknown op code %u\", info)",
          "new_text": null,
          "old_line_content": "\t\telog(PANIC, \"commit_ts_redo: unknown op code %u\", info);",
          "new_line_content": "\telse",
          "content_same": false
        },
        {
          "line": 659,
          "old_api": "DeactivateCommitTs",
          "new_api": null,
          "old_text": "DeactivateCommitTs()",
          "new_text": null,
          "old_line_content": "\t\tDeactivateCommitTs();",
          "new_line_content": "\telse if (commitTsShared->commitTsActive)",
          "content_same": false
        },
        {
          "line": 540,
          "old_api": "CommitTsShmemBuffers",
          "new_api": null,
          "old_text": "CommitTsShmemBuffers()",
          "new_text": null,
          "old_line_content": "\tSimpleLruInit(CommitTsCtl, \"CommitTs\", CommitTsShmemBuffers(), 0,",
          "new_line_content": "\tCommitTsCtl->PagePrecedes = CommitTsPagePrecedes;",
          "content_same": false
        },
        {
          "line": 798,
          "old_api": "SimpleLruWriteAll",
          "new_api": null,
          "old_text": "SimpleLruWriteAll(CommitTsCtl, true)",
          "new_text": null,
          "old_line_content": "\tSimpleLruWriteAll(CommitTsCtl, true);",
          "new_line_content": "\t */",
          "content_same": false
        },
        {
          "line": 544,
          "old_api": "SlruPagePrecedesUnitTests",
          "new_api": null,
          "old_text": "SlruPagePrecedesUnitTests(CommitTsCtl, COMMIT_TS_XACTS_PER_PAGE)",
          "new_text": null,
          "old_line_content": "\tSlruPagePrecedesUnitTests(CommitTsCtl, COMMIT_TS_XACTS_PER_PAGE);",
          "new_line_content": "\t\t\t\t  SYNC_HANDLER_COMMIT_TS);",
          "content_same": false
        },
        {
          "line": 546,
          "old_api": "ShmemInitStruct",
          "new_api": null,
          "old_text": "ShmemInitStruct(\"CommitTs shared\",\n\t\t\t\t\t\t\t\t\t sizeof(CommitTimestampShared),\n\t\t\t\t\t\t\t\t\t &found)",
          "new_text": null,
          "old_line_content": "\tcommitTsShared = ShmemInitStruct(\"CommitTs shared\",",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 552,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(!found)",
          "new_text": null,
          "old_line_content": "\t\tAssert(!found);",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 555,
          "old_api": "TIMESTAMP_NOBEGIN",
          "new_api": null,
          "old_text": "TIMESTAMP_NOBEGIN(commitTsShared->dataLastCommit.time)",
          "new_text": null,
          "old_line_content": "\t\tTIMESTAMP_NOBEGIN(commitTsShared->dataLastCommit.time);",
          "new_line_content": "\t\tcommitTsShared->xidLastCommit = InvalidTransactionId;",
          "content_same": false
        },
        {
          "line": 685,
          "old_api": "LWLockAcquire",
          "new_api": null,
          "old_text": "LWLockAcquire(CommitTsLock, LW_EXCLUSIVE)",
          "new_text": null,
          "old_line_content": "\tLWLockAcquire(CommitTsLock, LW_EXCLUSIVE);",
          "new_line_content": "\t/* If we've done this already, there's nothing to do */",
          "content_same": false
        },
        {
          "line": 560,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(found)",
          "new_text": null,
          "old_line_content": "\t\tAssert(found);",
          "new_line_content": "\telse",
          "content_same": false
        },
        {
          "line": 688,
          "old_api": "LWLockRelease",
          "new_api": null,
          "old_text": "LWLockRelease(CommitTsLock)",
          "new_text": null,
          "old_line_content": "\t\tLWLockRelease(CommitTsLock);",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 691,
          "old_api": "LWLockRelease",
          "new_api": null,
          "old_text": "LWLockRelease(CommitTsLock)",
          "new_text": null,
          "old_line_content": "\tLWLockRelease(CommitTsLock);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 948,
          "old_api": "TransactionIdPrecedes",
          "new_api": null,
          "old_text": "TransactionIdPrecedes(xid1, xid2)",
          "new_text": null,
          "old_line_content": "\treturn (TransactionIdPrecedes(xid1, xid2) &&",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 693,
          "old_api": "XidFromFullTransactionId",
          "new_api": null,
          "old_text": "XidFromFullTransactionId(ShmemVariableCache->nextXid)",
          "new_text": null,
          "old_line_content": "\txid = XidFromFullTransactionId(ShmemVariableCache->nextXid);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 822,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(!InRecovery)",
          "new_text": null,
          "old_line_content": "\tAssert(!InRecovery);",
          "new_line_content": "\t */",
          "content_same": false
        },
        {
          "line": 699,
          "old_api": "LWLockAcquire",
          "new_api": null,
          "old_text": "LWLockAcquire(CommitTsSLRULock, LW_EXCLUSIVE)",
          "new_text": null,
          "old_line_content": "\tLWLockAcquire(CommitTsSLRULock, LW_EXCLUSIVE);",
          "new_line_content": "\t */",
          "content_same": false
        },
        {
          "line": 701,
          "old_api": "LWLockRelease",
          "new_api": null,
          "old_text": "LWLockRelease(CommitTsSLRULock)",
          "new_text": null,
          "old_line_content": "\tLWLockRelease(CommitTsSLRULock);",
          "new_line_content": "\tCommitTsCtl->shared->latest_page_number = pageno;",
          "content_same": false
        },
        {
          "line": 830,
          "old_api": "TransactionIdToCTsEntry",
          "new_api": null,
          "old_text": "TransactionIdToCTsEntry(newestXact)",
          "new_text": null,
          "old_line_content": "\tif (TransactionIdToCTsEntry(newestXact) != 0 &&",
          "new_line_content": "\t */",
          "content_same": false
        },
        {
          "line": 959,
          "old_api": "XLogBeginInsert",
          "new_api": null,
          "old_text": "XLogBeginInsert()",
          "new_text": null,
          "old_line_content": "\tXLogBeginInsert();",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 834,
          "old_api": "TransactionIdToCTsPage",
          "new_api": null,
          "old_text": "TransactionIdToCTsPage(newestXact)",
          "new_text": null,
          "old_line_content": "\tpageno = TransactionIdToCTsPage(newestXact);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 836,
          "old_api": "LWLockAcquire",
          "new_api": null,
          "old_text": "LWLockAcquire(CommitTsSLRULock, LW_EXCLUSIVE)",
          "new_text": null,
          "old_line_content": "\tLWLockAcquire(CommitTsSLRULock, LW_EXCLUSIVE);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 839,
          "old_api": "ZeroCommitTsPage",
          "new_api": null,
          "old_text": "ZeroCommitTsPage(pageno, !InRecovery)",
          "new_text": null,
          "old_line_content": "\tZeroCommitTsPage(pageno, !InRecovery);",
          "new_line_content": "\t/* Zero the page and make an XLOG entry about it */",
          "content_same": false
        },
        {
          "line": 841,
          "old_api": "LWLockRelease",
          "new_api": null,
          "old_text": "LWLockRelease(CommitTsSLRULock)",
          "new_text": null,
          "old_line_content": "\tLWLockRelease(CommitTsSLRULock);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 716,
          "old_api": "LWLockAcquire",
          "new_api": null,
          "old_text": "LWLockAcquire(CommitTsLock, LW_EXCLUSIVE)",
          "new_text": null,
          "old_line_content": "\tLWLockAcquire(CommitTsLock, LW_EXCLUSIVE);",
          "new_line_content": "\t */",
          "content_same": false
        },
        {
          "line": 975,
          "old_api": "XLogBeginInsert",
          "new_api": null,
          "old_text": "XLogBeginInsert()",
          "new_text": null,
          "old_line_content": "\tXLogBeginInsert();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 720,
          "old_api": "ReadNextTransactionId",
          "new_api": null,
          "old_text": "ReadNextTransactionId()",
          "new_text": null,
          "old_line_content": "\t\t\tShmemVariableCache->newestCommitTsXid = ReadNextTransactionId();",
          "new_line_content": "\t\tShmemVariableCache->oldestCommitTsXid =",
          "content_same": false
        },
        {
          "line": 593,
          "old_api": "SimpleLruZeroPage",
          "new_api": null,
          "old_text": "SimpleLruZeroPage(CommitTsCtl, pageno)",
          "new_text": null,
          "old_line_content": "\tslotno = SimpleLruZeroPage(CommitTsCtl, pageno);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 722,
          "old_api": "LWLockRelease",
          "new_api": null,
          "old_text": "LWLockRelease(CommitTsLock)",
          "new_text": null,
          "old_line_content": "\tLWLockRelease(CommitTsLock);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 596,
          "old_api": "WriteZeroPageXlogRec",
          "new_api": null,
          "old_text": "WriteZeroPageXlogRec(pageno)",
          "new_text": null,
          "old_line_content": "\t\tWriteZeroPageXlogRec(pageno);",
          "new_line_content": "\tif (writeXlog)",
          "content_same": false
        },
        {
          "line": 725,
          "old_api": "SimpleLruDoesPhysicalPageExist",
          "new_api": null,
          "old_text": "SimpleLruDoesPhysicalPageExist(CommitTsCtl, pageno)",
          "new_text": null,
          "old_line_content": "\tif (!SimpleLruDoesPhysicalPageExist(CommitTsCtl, pageno))",
          "new_line_content": "\t/* Create the current segment file, if necessary */",
          "content_same": false
        },
        {
          "line": 729,
          "old_api": "LWLockAcquire",
          "new_api": null,
          "old_text": "LWLockAcquire(CommitTsSLRULock, LW_EXCLUSIVE)",
          "new_text": null,
          "old_line_content": "\t\tLWLockAcquire(CommitTsSLRULock, LW_EXCLUSIVE);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 986,
          "old_api": "XLogRecGetInfo",
          "new_api": null,
          "old_text": "XLogRecGetInfo(record)",
          "new_text": null,
          "old_line_content": "\tuint8\t\tinfo = XLogRecGetInfo(record) & ~XLR_INFO_MASK;",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 859,
          "old_api": "TransactionIdToCTsPage",
          "new_api": null,
          "old_text": "TransactionIdToCTsPage(oldestXact)",
          "new_text": null,
          "old_line_content": "\tcutoffPage = TransactionIdToCTsPage(oldestXact);",
          "new_line_content": "\t */",
          "content_same": false
        },
        {
          "line": 989,
          "old_api": "XLogRecHasAnyBlockRefs",
          "new_api": null,
          "old_text": "XLogRecHasAnyBlockRefs(record)",
          "new_text": null,
          "old_line_content": "\tAssert(!XLogRecHasAnyBlockRefs(record));",
          "new_line_content": "\t/* Backup blocks are not used in commit_ts records */",
          "content_same": false
        },
        {
          "line": 862,
          "old_api": "SlruScanDirectory",
          "new_api": null,
          "old_text": "SlruScanDirectory(CommitTsCtl, SlruScanDirCbReportPresence,\n\t\t\t\t\t\t   &cutoffPage)",
          "new_text": null,
          "old_line_content": "\tif (!SlruScanDirectory(CommitTsCtl, SlruScanDirCbReportPresence,",
          "new_line_content": "\t/* Check to see if there's any files that could be removed */",
          "content_same": false
        },
        {
          "line": 608,
          "old_api": "ActivateCommitTs",
          "new_api": null,
          "old_text": "ActivateCommitTs()",
          "new_text": null,
          "old_line_content": "\tActivateCommitTs();",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 737,
          "old_api": "LWLockAcquire",
          "new_api": null,
          "old_text": "LWLockAcquire(CommitTsLock, LW_EXCLUSIVE)",
          "new_text": null,
          "old_line_content": "\tLWLockAcquire(CommitTsLock, LW_EXCLUSIVE);",
          "new_line_content": "\t/* Change the activation status in shared memory. */",
          "content_same": false
        },
        {
          "line": 739,
          "old_api": "LWLockRelease",
          "new_api": null,
          "old_text": "LWLockRelease(CommitTsLock)",
          "new_text": null,
          "old_line_content": "\tLWLockRelease(CommitTsLock);",
          "new_line_content": "\tcommitTsShared->commitTsActive = true;",
          "content_same": false
        },
        {
          "line": 867,
          "old_api": "WriteTruncateXlogRec",
          "new_api": null,
          "old_text": "WriteTruncateXlogRec(cutoffPage, oldestXact)",
          "new_text": null,
          "old_line_content": "\tWriteTruncateXlogRec(cutoffPage, oldestXact);",
          "new_line_content": "\t/* Write XLOG record */",
          "content_same": false
        },
        {
          "line": 996,
          "old_api": "XLogRecGetData",
          "new_api": null,
          "old_text": "XLogRecGetData(record)",
          "new_text": null,
          "old_line_content": "\t\tmemcpy(&pageno, XLogRecGetData(record), sizeof(int));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 870,
          "old_api": "SimpleLruTruncate",
          "new_api": null,
          "old_text": "SimpleLruTruncate(CommitTsCtl, cutoffPage)",
          "new_text": null,
          "old_line_content": "\tSimpleLruTruncate(CommitTsCtl, cutoffPage);",
          "new_line_content": "\t/* Now we can remove the old CommitTs segment(s) */",
          "content_same": false
        },
        {
          "line": 998,
          "old_api": "LWLockAcquire",
          "new_api": null,
          "old_text": "LWLockAcquire(CommitTsSLRULock, LW_EXCLUSIVE)",
          "new_text": null,
          "old_line_content": "\t\tLWLockAcquire(CommitTsSLRULock, LW_EXCLUSIVE);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1000,
          "old_api": "ZeroCommitTsPage",
          "new_api": null,
          "old_text": "ZeroCommitTsPage(pageno, false)",
          "new_text": null,
          "old_line_content": "\t\tslotno = ZeroCommitTsPage(pageno, false);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1004,
          "old_api": "LWLockRelease",
          "new_api": null,
          "old_text": "LWLockRelease(CommitTsSLRULock)",
          "new_text": null,
          "old_line_content": "\t\tLWLockRelease(CommitTsSLRULock);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1008,
          "old_api": "XLogRecGetData",
          "new_api": null,
          "old_text": "XLogRecGetData(record)",
          "new_text": null,
          "old_line_content": "\t\txl_commit_ts_truncate *trunc = (xl_commit_ts_truncate *) XLogRecGetData(record);",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 1010,
          "old_api": "AdvanceOldestCommitTsXid",
          "new_api": null,
          "old_text": "AdvanceOldestCommitTsXid(trunc->oldestXid)",
          "new_text": null,
          "old_line_content": "\t\tAdvanceOldestCommitTsXid(trunc->oldestXid);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 883,
          "old_api": "LWLockAcquire",
          "new_api": null,
          "old_text": "LWLockAcquire(CommitTsLock, LW_EXCLUSIVE)",
          "new_text": null,
          "old_line_content": "\tLWLockAcquire(CommitTsLock, LW_EXCLUSIVE);",
          "new_line_content": "\t */",
          "content_same": false
        },
        {
          "line": 628,
          "old_api": "DeactivateCommitTs",
          "new_api": null,
          "old_text": "DeactivateCommitTs()",
          "new_text": null,
          "old_line_content": "\t\tDeactivateCommitTs();",
          "new_line_content": "\tif (!track_commit_timestamp)",
          "content_same": false
        },
        {
          "line": 630,
          "old_api": "ActivateCommitTs",
          "new_api": null,
          "old_text": "ActivateCommitTs()",
          "new_text": null,
          "old_line_content": "\t\tActivateCommitTs();",
          "new_line_content": "\telse",
          "content_same": false
        },
        {
          "line": 886,
          "old_api": "TransactionIdPrecedes",
          "new_api": null,
          "old_text": "TransactionIdPrecedes(ShmemVariableCache->oldestCommitTsXid, oldestXact)",
          "new_text": null,
          "old_line_content": "\t\tif (TransactionIdPrecedes(ShmemVariableCache->oldestCommitTsXid, oldestXact))",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 888,
          "old_api": "TransactionIdPrecedes",
          "new_api": null,
          "old_text": "TransactionIdPrecedes(newestXact, ShmemVariableCache->newestCommitTsXid)",
          "new_text": null,
          "old_line_content": "\t\tif (TransactionIdPrecedes(newestXact, ShmemVariableCache->newestCommitTsXid))",
          "new_line_content": "\t\t\tShmemVariableCache->oldestCommitTsXid = oldestXact;",
          "content_same": false
        },
        {
          "line": 762,
          "old_api": "LWLockAcquire",
          "new_api": null,
          "old_text": "LWLockAcquire(CommitTsLock, LW_EXCLUSIVE)",
          "new_text": null,
          "old_line_content": "\tLWLockAcquire(CommitTsLock, LW_EXCLUSIVE);",
          "new_line_content": "\t */",
          "content_same": false
        },
        {
          "line": 893,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(ShmemVariableCache->newestCommitTsXid == InvalidTransactionId)",
          "new_text": null,
          "old_line_content": "\t\tAssert(ShmemVariableCache->newestCommitTsXid == InvalidTransactionId);",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 766,
          "old_api": "TIMESTAMP_NOBEGIN",
          "new_api": null,
          "old_text": "TIMESTAMP_NOBEGIN(commitTsShared->dataLastCommit.time)",
          "new_text": null,
          "old_line_content": "\tTIMESTAMP_NOBEGIN(commitTsShared->dataLastCommit.time);",
          "new_line_content": "\tcommitTsShared->xidLastCommit = InvalidTransactionId;",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 14,
      "total_additions": 65,
      "total_deletions": 65,
      "total_api_changes": 144
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 5,
        "api_related_lines": 144,
        "non_api_lines": 3,
        "non_api_line_numbers": [
          512,
          513,
          511
        ]
      }
    },
    "api_calls_before": 159,
    "api_calls_after": 159,
    "diff_info": {
      "added_lines": 4,
      "removed_lines": 3,
      "total_diff_lines": 23
    }
  }
}
{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/postgres/modified_file/97e971ee05d5a0f6361ea34abf27059d762045a7",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/postgres/modified_file/97e971ee05d5a0f6361ea34abf27059d762045a7/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/postgres/modified_file/97e971ee05d5a0f6361ea34abf27059d762045a7/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/postgres/modified_file/97e971ee05d5a0f6361ea34abf27059d762045a7/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": true,
    "api_changes": {
      "replacements": [
        {
          "line": 2402,
          "old_api": "ExecGetResultType",
          "new_api": "ExecGetResultSlotOps",
          "old_text": "ExecGetResultType(is)",
          "new_text": "ExecGetResultSlotOps(is, &isfixed)",
          "old_line_content": "\t\t\tdesc = ExecGetResultType(is);",
          "new_line_content": "\t\t\ttts_ops = ExecGetResultSlotOps(is, &isfixed);",
          "content_same": false
        },
        {
          "line": 2502,
          "old_api": "lfirst",
          "new_api": "foreach",
          "old_text": "lfirst(tlist)",
          "new_text": "foreach(tlist, subplan->plan->targetlist)",
          "old_line_content": "\t\t\t\tTargetEntry *tle = (TargetEntry *) lfirst(tlist);",
          "new_line_content": "\t\t\tforeach(tlist, subplan->plan->targetlist)",
          "content_same": false
        },
        {
          "line": 2570,
          "old_api": "errcode",
          "new_api": "list_length",
          "old_text": "errcode(ERRCODE_PROGRAM_LIMIT_EXCEEDED)",
          "new_text": "list_length(sbsref->refupperindexpr)",
          "old_line_content": "\t\t\t\t(errcode(ERRCODE_PROGRAM_LIMIT_EXCEEDED),",
          "new_line_content": "\tif (list_length(sbsref->refupperindexpr) > MAXDIM)",
          "content_same": false
        },
        {
          "line": 2571,
          "old_api": "errmsg",
          "new_api": "ereport",
          "old_text": "errmsg(\"number of array dimensions (%d) exceeds the maximum allowed (%d)\",\n\t\t\t\t\t\tlist_length(sbsref->refupperindexpr), MAXDIM)",
          "new_text": "ereport(ERROR,\n\t\t\t\t(errcode(ERRCODE_PROGRAM_LIMIT_EXCEEDED),\n\t\t\t\t errmsg(\"number of array dimensions (%d) exceeds the maximum allowed (%d)\",\n\t\t\t\t\t\tlist_length(sbsref->refupperindexpr), MAXDIM)))",
          "old_line_content": "\t\t\t\t errmsg(\"number of array dimensions (%d) exceeds the maximum allowed (%d)\",",
          "new_line_content": "\t\tereport(ERROR,",
          "content_same": false
        },
        {
          "line": 2572,
          "old_api": "list_length",
          "new_api": "errcode",
          "old_text": "list_length(sbsref->refupperindexpr)",
          "new_text": "errcode(ERRCODE_PROGRAM_LIMIT_EXCEEDED)",
          "old_line_content": "\t\t\t\t\t\tlist_length(sbsref->refupperindexpr), MAXDIM)));",
          "new_line_content": "\t\t\t\t(errcode(ERRCODE_PROGRAM_LIMIT_EXCEEDED),",
          "content_same": false
        },
        {
          "line": 2576,
          "old_api": "errcode",
          "new_api": "list_length",
          "old_text": "errcode(ERRCODE_PROGRAM_LIMIT_EXCEEDED)",
          "new_text": "list_length(sbsref->reflowerindexpr)",
          "old_line_content": "\t\t\t\t(errcode(ERRCODE_PROGRAM_LIMIT_EXCEEDED),",
          "new_line_content": "\tif (list_length(sbsref->reflowerindexpr) > MAXDIM)",
          "content_same": false
        },
        {
          "line": 2577,
          "old_api": "errmsg",
          "new_api": "ereport",
          "old_text": "errmsg(\"number of array dimensions (%d) exceeds the maximum allowed (%d)\",\n\t\t\t\t\t\tlist_length(sbsref->reflowerindexpr), MAXDIM)",
          "new_text": "ereport(ERROR,\n\t\t\t\t(errcode(ERRCODE_PROGRAM_LIMIT_EXCEEDED),\n\t\t\t\t errmsg(\"number of array dimensions (%d) exceeds the maximum allowed (%d)\",\n\t\t\t\t\t\tlist_length(sbsref->reflowerindexpr), MAXDIM)))",
          "old_line_content": "\t\t\t\t errmsg(\"number of array dimensions (%d) exceeds the maximum allowed (%d)\",",
          "new_line_content": "\t\tereport(ERROR,",
          "content_same": false
        },
        {
          "line": 2578,
          "old_api": "list_length",
          "new_api": "errcode",
          "old_text": "list_length(sbsref->reflowerindexpr)",
          "new_text": "errcode(ERRCODE_PROGRAM_LIMIT_EXCEEDED)",
          "old_line_content": "\t\t\t\t\t\tlist_length(sbsref->reflowerindexpr), MAXDIM)));",
          "new_line_content": "\t\t\t\t(errcode(ERRCODE_PROGRAM_LIMIT_EXCEEDED),",
          "content_same": false
        },
        {
          "line": 2584,
          "old_api": "lfirst",
          "new_api": "foreach",
          "old_text": "lfirst(lc)",
          "new_text": "foreach(lc, sbsref->refupperindexpr)",
          "old_line_content": "\t\tExpr\t   *e = (Expr *) lfirst(lc);",
          "new_line_content": "\tforeach(lc, sbsref->refupperindexpr)",
          "content_same": false
        },
        {
          "line": 2617,
          "old_api": "lfirst",
          "new_api": "foreach",
          "old_text": "lfirst(lc)",
          "new_text": "foreach(lc, sbsref->reflowerindexpr)",
          "old_line_content": "\t\tExpr\t   *e = (Expr *) lfirst(lc);",
          "new_line_content": "\tforeach(lc, sbsref->reflowerindexpr)",
          "content_same": false
        },
        {
          "line": 2818,
          "old_api": "lfirst",
          "new_api": "foreach",
          "old_text": "lfirst(l)",
          "new_text": "foreach(l, constraint_ref->constraints)",
          "old_line_content": "\t\tDomainConstraintState *con = (DomainConstraintState *) lfirst(l);",
          "new_line_content": "\tforeach(l, constraint_ref->constraints)",
          "content_same": false
        },
        {
          "line": 3066,
          "old_api": "lfirst",
          "new_api": "foreach",
          "old_text": "lfirst(arg)",
          "new_text": "foreach(arg, pertrans->aggref->args)",
          "old_line_content": "\t\t\t\tTargetEntry *source_tle = (TargetEntry *) lfirst(arg);",
          "new_line_content": "\t\t\tforeach(arg, pertrans->aggref->args)",
          "content_same": false
        },
        {
          "line": 3086,
          "old_api": "list_length",
          "new_api": "linitial",
          "old_text": "list_length(pertrans->aggref->args)",
          "new_text": "linitial(pertrans->aggref->args)",
          "old_line_content": "\t\t\tAssert(list_length(pertrans->aggref->args) == 1);",
          "new_line_content": "\t\t\t(TargetEntry *) linitial(pertrans->aggref->args);",
          "content_same": false
        },
        {
          "line": 3088,
          "old_api": "ExecInitExprRec",
          "new_api": "list_length",
          "old_text": "ExecInitExprRec(source_tle->expr, state,\n\t\t\t\t\t\t\t&state->resvalue,\n\t\t\t\t\t\t\t&state->resnull)",
          "new_text": "list_length(pertrans->aggref->args)",
          "old_line_content": "\t\t\tExecInitExprRec(source_tle->expr, state,",
          "new_line_content": "\t\t\tAssert(list_length(pertrans->aggref->args) == 1);",
          "content_same": false
        },
        {
          "line": 3106,
          "old_api": "lfirst",
          "new_api": "foreach",
          "old_text": "lfirst(arg)",
          "new_text": "foreach(arg, pertrans->aggref->args)",
          "old_line_content": "\t\t\t\tTargetEntry *source_tle = (TargetEntry *) lfirst(arg);",
          "new_line_content": "\t\t\tforeach(arg, pertrans->aggref->args)",
          "content_same": false
        },
        {
          "line": 3108,
          "old_api": "ExecInitExprRec",
          "new_api": "lfirst",
          "old_text": "ExecInitExprRec(source_tle->expr, state,\n\t\t\t\t\t\t\t\t&values[argno], &nulls[argno])",
          "new_text": "lfirst(arg)",
          "old_line_content": "\t\t\t\tExecInitExprRec(source_tle->expr, state,",
          "new_line_content": "\t\t\t\tTargetEntry *source_tle = (TargetEntry *) lfirst(arg);",
          "content_same": false
        },
        {
          "line": 3200,
          "old_api": "ExecReadyExpr",
          "new_api": "ExprEvalPushStep",
          "old_text": "ExecReadyExpr(state)",
          "new_text": "ExprEvalPushStep(state, &scratch)",
          "old_line_content": "\tExecReadyExpr(state);",
          "new_line_content": "\tExprEvalPushStep(state, &scratch);",
          "content_same": false
        },
        {
          "line": 3390,
          "old_api": "get_func_name",
          "new_api": "GetUserId",
          "old_text": "get_func_name(foid)",
          "new_text": "GetUserId()",
          "old_line_content": "\t\t\taclcheck_error(aclresult, OBJECT_FUNCTION, get_func_name(foid));",
          "new_line_content": "\t\taclresult = pg_proc_aclcheck(foid, GetUserId(), ACL_EXECUTE);",
          "content_same": false
        },
        {
          "line": 3392,
          "old_api": "InvokeFunctionExecuteHook",
          "new_api": "get_func_name",
          "old_text": "InvokeFunctionExecuteHook(foid)",
          "new_text": "get_func_name(foid)",
          "old_line_content": "\t\tInvokeFunctionExecuteHook(foid);",
          "new_line_content": "\t\t\taclcheck_error(aclresult, OBJECT_FUNCTION, get_func_name(foid));",
          "content_same": false
        },
        {
          "line": 3397,
          "old_api": "fmgr_info",
          "new_api": "palloc0",
          "old_text": "fmgr_info(foid, finfo)",
          "new_text": "palloc0(sizeof(FmgrInfo))",
          "old_line_content": "\t\tfmgr_info(foid, finfo);",
          "new_line_content": "\t\tfinfo = palloc0(sizeof(FmgrInfo));",
          "content_same": false
        },
        {
          "line": 3398,
          "old_api": "fmgr_info_set_expr",
          "new_api": "SizeForFunctionCallInfo",
          "old_text": "fmgr_info_set_expr(NULL, finfo)",
          "new_text": "SizeForFunctionCallInfo(2)",
          "old_line_content": "\t\tfmgr_info_set_expr(NULL, finfo);",
          "new_line_content": "\t\tfcinfo = palloc0(SizeForFunctionCallInfo(2));",
          "content_same": false
        },
        {
          "line": 3399,
          "old_api": "InitFunctionCallInfoData",
          "new_api": "fmgr_info",
          "old_text": "InitFunctionCallInfoData(*fcinfo, finfo, 2,\n\t\t\t\t\t\t\t\t collid, NULL, NULL)",
          "new_text": "fmgr_info(foid, finfo)",
          "old_line_content": "\t\tInitFunctionCallInfoData(*fcinfo, finfo, 2,",
          "new_line_content": "\t\tfmgr_info(foid, finfo);",
          "content_same": false
        },
        {
          "line": 3443,
          "old_api": "Assert",
          "new_api": "lfirst_int",
          "old_text": "Assert(as->opcode == EEOP_QUAL)",
          "new_text": "lfirst_int(lc)",
          "old_line_content": "\t\tAssert(as->opcode == EEOP_QUAL);",
          "new_line_content": "\t\tExprEvalStep *as = &state->steps[lfirst_int(lc)];",
          "content_same": false
        },
        {
          "line": 3453,
          "old_api": "ExecReadyExpr",
          "new_api": "ExprEvalPushStep",
          "old_text": "ExecReadyExpr(state)",
          "new_text": "ExprEvalPushStep(state, &scratch)",
          "old_line_content": "\tExecReadyExpr(state);",
          "new_line_content": "\tExprEvalPushStep(state, &scratch);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 3074,
          "old_api": null,
          "new_api": "ExecInitExprRec",
          "old_text": null,
          "new_text": "ExecInitExprRec(source_tle->expr, state,\n\t\t\t\t\t\t\t\t&trans_fcinfo->args[argno + 1].value,\n\t\t\t\t\t\t\t\t&trans_fcinfo->args[argno + 1].isnull)",
          "old_line_content": "\t\t\t\t\t\t\t\t&trans_fcinfo->args[argno + 1].isnull);",
          "new_line_content": "\t\t\t\tExecInitExprRec(source_tle->expr, state,",
          "content_same": false
        },
        {
          "line": 2564,
          "old_api": null,
          "new_api": "ExprEvalPushStep",
          "old_text": null,
          "new_text": "ExprEvalPushStep(state, scratch)",
          "old_line_content": "\t\t\t\t\t\t\t\t   state->steps_len - 1);",
          "new_line_content": "\t\tExprEvalPushStep(state, scratch);",
          "content_same": false
        },
        {
          "line": 2565,
          "old_api": null,
          "new_api": "lappend_int",
          "old_text": null,
          "new_text": "lappend_int(adjust_jumps,\n\t\t\t\t\t\t\t\t   state->steps_len - 1)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tadjust_jumps = lappend_int(adjust_jumps,",
          "content_same": false
        },
        {
          "line": 2573,
          "old_api": null,
          "new_api": "errmsg",
          "old_text": null,
          "new_text": "errmsg(\"number of array dimensions (%d) exceeds the maximum allowed (%d)\",\n\t\t\t\t\t\tlist_length(sbsref->refupperindexpr), MAXDIM)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t errmsg(\"number of array dimensions (%d) exceeds the maximum allowed (%d)\",",
          "content_same": false
        },
        {
          "line": 3090,
          "old_api": null,
          "new_api": "ExecInitExprRec",
          "old_text": null,
          "new_text": "ExecInitExprRec(source_tle->expr, state,\n\t\t\t\t\t\t\t&state->resvalue,\n\t\t\t\t\t\t\t&state->resnull)",
          "old_line_content": "\t\t\t\t\t\t\t&state->resnull);",
          "new_line_content": "\t\t\tExecInitExprRec(source_tle->expr, state,",
          "content_same": false
        },
        {
          "line": 2579,
          "old_api": null,
          "new_api": "errmsg",
          "old_text": null,
          "new_text": "errmsg(\"number of array dimensions (%d) exceeds the maximum allowed (%d)\",\n\t\t\t\t\t\tlist_length(sbsref->reflowerindexpr), MAXDIM)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t errmsg(\"number of array dimensions (%d) exceeds the maximum allowed (%d)\",",
          "content_same": false
        },
        {
          "line": 2580,
          "old_api": null,
          "new_api": "list_length",
          "old_text": null,
          "new_text": "list_length(sbsref->reflowerindexpr)",
          "old_line_content": "\t/* Evaluate upper subscripts */",
          "new_line_content": "\t\t\t\t\t\tlist_length(sbsref->reflowerindexpr), MAXDIM)));",
          "content_same": false
        },
        {
          "line": 2586,
          "old_api": null,
          "new_api": "lfirst",
          "old_text": null,
          "new_text": "lfirst(lc)",
          "old_line_content": "\t\t/* When slicing, individual subscript bounds can be omitted */",
          "new_line_content": "\t\tExpr\t   *e = (Expr *) lfirst(lc);",
          "content_same": false
        },
        {
          "line": 3110,
          "old_api": null,
          "new_api": "ExecInitExprRec",
          "old_text": null,
          "new_text": "ExecInitExprRec(source_tle->expr, state,\n\t\t\t\t\t\t\t\t&values[argno], &nulls[argno])",
          "old_line_content": "\t\t\t\targno++;",
          "new_line_content": "\t\t\t\tExecInitExprRec(source_tle->expr, state,",
          "content_same": false
        },
        {
          "line": 2599,
          "old_api": null,
          "new_api": "ExecInitExprRec",
          "old_text": null,
          "new_text": "ExecInitExprRec(e, state,\n\t\t\t\t\t\t&sbsrefstate->subscriptvalue, &sbsrefstate->subscriptnull)",
          "old_line_content": "",
          "new_line_content": "\t\tExecInitExprRec(e, state,",
          "content_same": false
        },
        {
          "line": 3115,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(pertrans->numInputs == argno)",
          "old_line_content": "\t\t/*",
          "new_line_content": "\t\tAssert(pertrans->numInputs == argno);",
          "content_same": false
        },
        {
          "line": 2608,
          "old_api": null,
          "new_api": "ExprEvalPushStep",
          "old_text": null,
          "new_text": "ExprEvalPushStep(state, scratch)",
          "old_line_content": "\t\t\t\t\t\t\t\t   state->steps_len - 1);",
          "new_line_content": "\t\tExprEvalPushStep(state, scratch);",
          "content_same": false
        },
        {
          "line": 2609,
          "old_api": null,
          "new_api": "lappend_int",
          "old_text": null,
          "new_text": "lappend_int(adjust_jumps,\n\t\t\t\t\t\t\t\t   state->steps_len - 1)",
          "old_line_content": "\t\ti++;",
          "new_line_content": "\t\tadjust_jumps = lappend_int(adjust_jumps,",
          "content_same": false
        },
        {
          "line": 2619,
          "old_api": null,
          "new_api": "lfirst",
          "old_text": null,
          "new_text": "lfirst(lc)",
          "old_line_content": "\t\t/* When slicing, individual subscript bounds can be omitted */",
          "new_line_content": "\t\tExpr\t   *e = (Expr *) lfirst(lc);",
          "content_same": false
        },
        {
          "line": 3132,
          "old_api": null,
          "new_api": "ExprEvalPushStep",
          "old_text": null,
          "new_text": "ExprEvalPushStep(state, &scratch)",
          "old_line_content": "\t\t\t\t\t\t\t\t\t\t state->steps_len - 1);",
          "new_line_content": "\t\t\tExprEvalPushStep(state, &scratch);",
          "content_same": false
        },
        {
          "line": 3133,
          "old_api": null,
          "new_api": "lappend_int",
          "old_text": null,
          "new_text": "lappend_int(adjust_bailout,\n\t\t\t\t\t\t\t\t\t\t state->steps_len - 1)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tadjust_bailout = lappend_int(adjust_bailout,",
          "content_same": false
        },
        {
          "line": 2632,
          "old_api": null,
          "new_api": "ExecInitExprRec",
          "old_text": null,
          "new_text": "ExecInitExprRec(e, state,\n\t\t\t\t\t\t&sbsrefstate->subscriptvalue, &sbsrefstate->subscriptnull)",
          "old_line_content": "",
          "new_line_content": "\t\tExecInitExprRec(e, state,",
          "content_same": false
        },
        {
          "line": 3145,
          "old_api": null,
          "new_api": "Max",
          "old_text": null,
          "new_text": "Max(phase->numsets, 1)",
          "old_line_content": "\t\t\tfor (setno = 0; setno < processGroupingSets; setno++)",
          "new_line_content": "\t\t\tint\t\t\tprocessGroupingSets = Max(phase->numsets, 1);",
          "content_same": false
        },
        {
          "line": 3149,
          "old_api": null,
          "new_api": "ExecBuildAggTransCall",
          "old_text": null,
          "new_text": "ExecBuildAggTransCall(state, aggstate, &scratch, trans_fcinfo,\n\t\t\t\t\t\t\t\t\t  pertrans, transno, setno, setoff, false)",
          "old_line_content": "\t\t\t\tsetoff++;",
          "new_line_content": "\t\t\t\tExecBuildAggTransCall(state, aggstate, &scratch, trans_fcinfo,",
          "content_same": false
        },
        {
          "line": 2641,
          "old_api": null,
          "new_api": "ExprEvalPushStep",
          "old_text": null,
          "new_text": "ExprEvalPushStep(state, scratch)",
          "old_line_content": "\t\t\t\t\t\t\t\t   state->steps_len - 1);",
          "new_line_content": "\t\tExprEvalPushStep(state, scratch);",
          "content_same": false
        },
        {
          "line": 2642,
          "old_api": null,
          "new_api": "lappend_int",
          "old_text": null,
          "new_text": "lappend_int(adjust_jumps,\n\t\t\t\t\t\t\t\t   state->steps_len - 1)",
          "old_line_content": "\t\ti++;",
          "new_line_content": "\t\tadjust_jumps = lappend_int(adjust_jumps,",
          "content_same": false
        },
        {
          "line": 2651,
          "old_api": null,
          "new_api": "elog",
          "old_text": null,
          "new_text": "elog(ERROR, \"upper and lower index lists are not same length\")",
          "old_line_content": "\tif (isAssignment)",
          "new_line_content": "\t\telog(ERROR, \"upper and lower index lists are not same length\");",
          "content_same": false
        },
        {
          "line": 3167,
          "old_api": null,
          "new_api": "ExecBuildAggTransCall",
          "old_text": null,
          "new_text": "ExecBuildAggTransCall(state, aggstate, &scratch, trans_fcinfo,\n\t\t\t\t\t\t\t\t\t  pertrans, transno, setno, setoff, true)",
          "old_line_content": "\t\t\t\tsetoff++;",
          "new_line_content": "\t\t\t\tExecBuildAggTransCall(state, aggstate, &scratch, trans_fcinfo,",
          "content_same": false
        },
        {
          "line": 3176,
          "old_api": null,
          "new_api": "lfirst_int",
          "old_text": null,
          "new_text": "lfirst_int(bail)",
          "old_line_content": "\t\t\tif (as->opcode == EEOP_JUMP_IF_NOT_TRUE)",
          "new_line_content": "\t\t\tExprEvalStep *as = &state->steps[lfirst_int(bail)];",
          "content_same": false
        },
        {
          "line": 3180,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(as->d.jump.jumpdone == -1)",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\t\tAssert(as->d.jump.jumpdone == -1);",
          "content_same": false
        },
        {
          "line": 2672,
          "old_api": null,
          "new_api": "isAssignmentIndirectionExpr",
          "old_text": null,
          "new_text": "isAssignmentIndirectionExpr(sbsref->refassgnexpr)",
          "old_line_content": "\t\t\tscratch->opcode = EEOP_SBSREF_OLD;",
          "new_line_content": "\t\tif (isAssignmentIndirectionExpr(sbsref->refassgnexpr))",
          "content_same": false
        },
        {
          "line": 3186,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(as->d.agg_strict_input_check.jumpnull == -1)",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\t\tAssert(as->d.agg_strict_input_check.jumpnull == -1);",
          "content_same": false
        },
        {
          "line": 2676,
          "old_api": null,
          "new_api": "ExprEvalPushStep",
          "old_text": null,
          "new_text": "ExprEvalPushStep(state, scratch)",
          "old_line_content": "",
          "new_line_content": "\t\t\tExprEvalPushStep(state, scratch);",
          "content_same": false
        },
        {
          "line": 3191,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(as->d.agg_deserialize.jumpnull == -1)",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\t\tAssert(as->d.agg_deserialize.jumpnull == -1);",
          "content_same": false
        },
        {
          "line": 2686,
          "old_api": null,
          "new_api": "ExecInitExprRec",
          "old_text": null,
          "new_text": "ExecInitExprRec(sbsref->refassgnexpr, state,\n\t\t\t\t\t\t&sbsrefstate->replacevalue, &sbsrefstate->replacenull)",
          "old_line_content": "",
          "new_line_content": "\t\tExecInitExprRec(sbsref->refassgnexpr, state,",
          "content_same": false
        },
        {
          "line": 3202,
          "old_api": null,
          "new_api": "ExecReadyExpr",
          "old_text": null,
          "new_text": "ExecReadyExpr(state)",
          "old_line_content": "\treturn state;",
          "new_line_content": "\tExecReadyExpr(state);",
          "content_same": false
        },
        {
          "line": 2695,
          "old_api": null,
          "new_api": "ExprEvalPushStep",
          "old_text": null,
          "new_text": "ExprEvalPushStep(state, scratch)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tExprEvalPushStep(state, scratch);",
          "content_same": false
        },
        {
          "line": 2703,
          "old_api": null,
          "new_api": "ExprEvalPushStep",
          "old_text": null,
          "new_text": "ExprEvalPushStep(state, scratch)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tExprEvalPushStep(state, scratch);",
          "content_same": false
        },
        {
          "line": 2710,
          "old_api": null,
          "new_api": "lfirst_int",
          "old_text": null,
          "new_text": "lfirst_int(lc)",
          "old_line_content": "\t\tif (as->opcode == EEOP_SBSREF_SUBSCRIPT)",
          "new_line_content": "\t\tExprEvalStep *as = &state->steps[lfirst_int(lc)];",
          "content_same": false
        },
        {
          "line": 2714,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(as->d.sbsref_subscript.jumpdone == -1)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tAssert(as->d.sbsref_subscript.jumpdone == -1);",
          "content_same": false
        },
        {
          "line": 2719,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(as->opcode == EEOP_JUMP_IF_NULL)",
          "old_line_content": "\t\t\tas->d.jump.jumpdone = state->steps_len;",
          "new_line_content": "\t\t\tAssert(as->opcode == EEOP_JUMP_IF_NULL);",
          "content_same": false
        },
        {
          "line": 2720,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(as->d.jump.jumpdone == -1)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tAssert(as->d.jump.jumpdone == -1);",
          "content_same": false
        },
        {
          "line": 3246,
          "old_api": null,
          "new_api": "ExprEvalPushStep",
          "old_text": null,
          "new_text": "ExprEvalPushStep(state, scratch)",
          "old_line_content": "\t\t/* see comment about jumping out below */",
          "new_line_content": "\t\tExprEvalPushStep(state, scratch);",
          "content_same": false
        },
        {
          "line": 2745,
          "old_api": null,
          "new_api": "IsA",
          "old_text": null,
          "new_text": "IsA(expr, FieldStore)",
          "old_line_content": "\t\tFieldStore *fstore = (FieldStore *) expr;",
          "new_line_content": "\tif (IsA(expr, FieldStore))",
          "content_same": false
        },
        {
          "line": 2749,
          "old_api": null,
          "new_api": "IsA",
          "old_text": null,
          "new_text": "IsA(fstore->arg, CaseTestExpr)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tif (fstore->arg && IsA(fstore->arg, CaseTestExpr))",
          "content_same": false
        },
        {
          "line": 3261,
          "old_api": null,
          "new_api": "ExprEvalPushStep",
          "old_text": null,
          "new_text": "ExprEvalPushStep(state, scratch)",
          "old_line_content": "\t\t/*",
          "new_line_content": "\t\tExprEvalPushStep(state, scratch);",
          "content_same": false
        },
        {
          "line": 2752,
          "old_api": null,
          "new_api": "IsA",
          "old_text": null,
          "new_text": "IsA(expr, SubscriptingRef)",
          "old_line_content": "\t\tSubscriptingRef *sbsRef = (SubscriptingRef *) expr;",
          "new_line_content": "\telse if (IsA(expr, SubscriptingRef))",
          "content_same": false
        },
        {
          "line": 2756,
          "old_api": null,
          "new_api": "IsA",
          "old_text": null,
          "new_text": "IsA(sbsRef->refexpr, CaseTestExpr)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tif (sbsRef->refexpr && IsA(sbsRef->refexpr, CaseTestExpr))",
          "content_same": false
        },
        {
          "line": 3287,
          "old_api": null,
          "new_api": "ExprEvalPushStep",
          "old_text": null,
          "new_text": "ExprEvalPushStep(state, scratch)",
          "old_line_content": "\t/* adjust jumps so they jump till after transition invocation */",
          "new_line_content": "\tExprEvalPushStep(state, scratch);",
          "content_same": false
        },
        {
          "line": 3294,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(as->d.agg_init_trans.jumpnull == -1)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tAssert(as->d.agg_init_trans.jumpnull == -1);",
          "content_same": false
        },
        {
          "line": 2787,
          "old_api": null,
          "new_api": "ExecInitExprRec",
          "old_text": null,
          "new_text": "ExecInitExprRec(ctest->arg, state, resv, resnull)",
          "old_line_content": "\t/*",
          "new_line_content": "\tExecInitExprRec(ctest->arg, state, resv, resnull);",
          "content_same": false
        },
        {
          "line": 3301,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(as->d.agg_strict_trans_check.jumpnull == -1)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tAssert(as->d.agg_strict_trans_check.jumpnull == -1);",
          "content_same": false
        },
        {
          "line": 2807,
          "old_api": null,
          "new_api": "palloc",
          "old_text": null,
          "new_text": "palloc(sizeof(DomainConstraintRef))",
          "old_line_content": "\t\t\t\t\t\t\tconstraint_ref,",
          "new_line_content": "\t\tpalloc(sizeof(DomainConstraintRef));",
          "content_same": false
        },
        {
          "line": 2808,
          "old_api": null,
          "new_api": "InitDomainConstraintRef",
          "old_text": null,
          "new_text": "InitDomainConstraintRef(ctest->resulttype,\n\t\t\t\t\t\t\tconstraint_ref,\n\t\t\t\t\t\t\tCurrentMemoryContext,\n\t\t\t\t\t\t\tfalse)",
          "old_line_content": "\t\t\t\t\t\t\tCurrentMemoryContext,",
          "new_line_content": "\tInitDomainConstraintRef(ctest->resulttype,",
          "content_same": false
        },
        {
          "line": 3326,
          "old_api": null,
          "new_api": "makeNode",
          "old_text": null,
          "new_text": "makeNode(ExprState)",
          "old_line_content": "\tint\t\t\tnatt;",
          "new_line_content": "\tExprState  *state = makeNode(ExprState);",
          "content_same": false
        },
        {
          "line": 2820,
          "old_api": null,
          "new_api": "lfirst",
          "old_text": null,
          "new_text": "lfirst(l)",
          "old_line_content": "\t\tscratch->d.domaincheck.constraintname = con->name;",
          "new_line_content": "\t\tDomainConstraintState *con = (DomainConstraintState *) lfirst(l);",
          "content_same": false
        },
        {
          "line": 2828,
          "old_api": null,
          "new_api": "ExprEvalPushStep",
          "old_text": null,
          "new_text": "ExprEvalPushStep(state, scratch)",
          "old_line_content": "\t\t\tcase DOM_CONSTRAINT_CHECK:",
          "new_line_content": "\t\t\t\tExprEvalPushStep(state, scratch);",
          "content_same": false
        },
        {
          "line": 2837,
          "old_api": null,
          "new_api": "palloc",
          "old_text": null,
          "new_text": "palloc(sizeof(bool))",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t\t\t(bool *) palloc(sizeof(bool));",
          "content_same": false
        },
        {
          "line": 3355,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(maxatt >= 0)",
          "old_line_content": "\t/* push deform steps */",
          "new_line_content": "\tAssert(maxatt >= 0);",
          "content_same": false
        },
        {
          "line": 2850,
          "old_api": null,
          "new_api": "get_typlen",
          "old_text": null,
          "new_text": "get_typlen(ctest->resulttype)",
          "old_line_content": "\t\t\t\t\t\t/* Yes, so make output workspace for MAKE_READONLY */",
          "new_line_content": "\t\t\t\t\tif (get_typlen(ctest->resulttype) == -1)",
          "content_same": false
        },
        {
          "line": 3363,
          "old_api": null,
          "new_api": "ExecComputeSlotInfo",
          "old_text": null,
          "new_text": "ExecComputeSlotInfo(state, &scratch)",
          "old_line_content": "",
          "new_line_content": "\tExecComputeSlotInfo(state, &scratch);",
          "content_same": false
        },
        {
          "line": 3364,
          "old_api": null,
          "new_api": "ExprEvalPushStep",
          "old_text": null,
          "new_text": "ExprEvalPushStep(state, &scratch)",
          "old_line_content": "\tscratch.opcode = EEOP_OUTER_FETCHSOME;",
          "new_line_content": "\tExprEvalPushStep(state, &scratch);",
          "content_same": false
        },
        {
          "line": 2853,
          "old_api": null,
          "new_api": "palloc",
          "old_text": null,
          "new_text": "palloc(sizeof(Datum))",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t\t\tdomainval = (Datum *) palloc(sizeof(Datum));",
          "content_same": false
        },
        {
          "line": 2854,
          "old_api": null,
          "new_api": "palloc",
          "old_text": null,
          "new_text": "palloc(sizeof(bool))",
          "old_line_content": "\t\t\t\t\t\t/* Emit MAKE_READONLY */",
          "new_line_content": "\t\t\t\t\t\tdomainnull = (bool *) palloc(sizeof(bool));",
          "content_same": false
        },
        {
          "line": 3371,
          "old_api": null,
          "new_api": "ExecComputeSlotInfo",
          "old_text": null,
          "new_text": "ExecComputeSlotInfo(state, &scratch)",
          "old_line_content": "",
          "new_line_content": "\tExecComputeSlotInfo(state, &scratch);",
          "content_same": false
        },
        {
          "line": 3372,
          "old_api": null,
          "new_api": "ExprEvalPushStep",
          "old_text": null,
          "new_text": "ExprEvalPushStep(state, &scratch)",
          "old_line_content": "\t/*",
          "new_line_content": "\tExprEvalPushStep(state, &scratch);",
          "content_same": false
        },
        {
          "line": 2862,
          "old_api": null,
          "new_api": "ExprEvalPushStep",
          "old_text": null,
          "new_text": "ExprEvalPushStep(state, &scratch2)",
          "old_line_content": "\t\t\t\t\telse",
          "new_line_content": "\t\t\t\t\t\tExprEvalPushStep(state, &scratch2);",
          "content_same": false
        },
        {
          "line": 3381,
          "old_api": null,
          "new_api": "TupleDescAttr",
          "old_text": null,
          "new_text": "TupleDescAttr(ldesc, attno - 1)",
          "old_line_content": "\t\tOid\t\t\tfoid = eqfunctions[natt];",
          "new_line_content": "\t\tForm_pg_attribute latt = TupleDescAttr(ldesc, attno - 1);",
          "content_same": false
        },
        {
          "line": 3382,
          "old_api": null,
          "new_api": "TupleDescAttr",
          "old_text": null,
          "new_text": "TupleDescAttr(rdesc, attno - 1)",
          "old_line_content": "\t\tOid\t\t\tcollid = collations[natt];",
          "new_line_content": "\t\tForm_pg_attribute ratt = TupleDescAttr(rdesc, attno - 1);",
          "content_same": false
        },
        {
          "line": 3394,
          "old_api": null,
          "new_api": "InvokeFunctionExecuteHook",
          "old_text": null,
          "new_text": "InvokeFunctionExecuteHook(foid)",
          "old_line_content": "\t\t/* Set up the primary fmgr lookup information */",
          "new_line_content": "\t\tInvokeFunctionExecuteHook(foid);",
          "content_same": false
        },
        {
          "line": 2884,
          "old_api": null,
          "new_api": "ExecInitExprRec",
          "old_text": null,
          "new_text": "ExecInitExprRec(con->check_expr, state,\n\t\t\t\t\t\t\t\tscratch->d.domaincheck.checkvalue,\n\t\t\t\t\t\t\t\tscratch->d.domaincheck.checknull)",
          "old_line_content": "\t\t\t\t\t\t\t\tscratch->d.domaincheck.checknull);",
          "new_line_content": "\t\t\t\tExecInitExprRec(con->check_expr, state,",
          "content_same": false
        },
        {
          "line": 3400,
          "old_api": null,
          "new_api": "fmgr_info_set_expr",
          "old_text": null,
          "new_text": "fmgr_info_set_expr(NULL, finfo)",
          "old_line_content": "\t\t\t\t\t\t\t\t collid, NULL, NULL);",
          "new_line_content": "\t\tfmgr_info_set_expr(NULL, finfo);",
          "content_same": false
        },
        {
          "line": 3401,
          "old_api": null,
          "new_api": "InitFunctionCallInfoData",
          "old_text": null,
          "new_text": "InitFunctionCallInfoData(*fcinfo, finfo, 2,\n\t\t\t\t\t\t\t\t collid, NULL, NULL)",
          "old_line_content": "",
          "new_line_content": "\t\tInitFunctionCallInfoData(*fcinfo, finfo, 2,",
          "content_same": false
        },
        {
          "line": 2893,
          "old_api": null,
          "new_api": "ExprEvalPushStep",
          "old_text": null,
          "new_text": "ExprEvalPushStep(state, scratch)",
          "old_line_content": "\t\t\t\tbreak;",
          "new_line_content": "\t\t\t\tExprEvalPushStep(state, scratch);",
          "content_same": false
        },
        {
          "line": 2897,
          "old_api": null,
          "new_api": "elog",
          "old_text": null,
          "new_text": "elog(ERROR, \"unrecognized constraint type: %d\",\n\t\t\t\t\t (int) con->constrainttype)",
          "old_line_content": "\t\t\t\tbreak;",
          "new_line_content": "\t\t\t\telog(ERROR, \"unrecognized constraint type: %d\",",
          "content_same": false
        },
        {
          "line": 3410,
          "old_api": null,
          "new_api": "ExprEvalPushStep",
          "old_text": null,
          "new_text": "ExprEvalPushStep(state, &scratch)",
          "old_line_content": "\t\t/* right arg */",
          "new_line_content": "\t\tExprEvalPushStep(state, &scratch);",
          "content_same": false
        },
        {
          "line": 3418,
          "old_api": null,
          "new_api": "ExprEvalPushStep",
          "old_text": null,
          "new_text": "ExprEvalPushStep(state, &scratch)",
          "old_line_content": "\t\t/* evaluate distinctness */",
          "new_line_content": "\t\tExprEvalPushStep(state, &scratch);",
          "content_same": false
        },
        {
          "line": 2398,
          "old_api": null,
          "new_api": "ExecGetResultType",
          "old_text": null,
          "new_text": "ExecGetResultType(is)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tdesc = ExecGetResultType(is);",
          "content_same": false
        },
        {
          "line": 2403,
          "old_api": null,
          "new_api": "ExecGetResultType",
          "old_text": null,
          "new_text": "ExecGetResultType(is)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tdesc = ExecGetResultType(is);",
          "content_same": false
        },
        {
          "line": 3428,
          "old_api": null,
          "new_api": "ExprEvalPushStep",
          "old_text": null,
          "new_text": "ExprEvalPushStep(state, &scratch)",
          "old_line_content": "\t\t/* then emit EEOP_QUAL to detect if result is false (or null) */",
          "new_line_content": "\t\tExprEvalPushStep(state, &scratch);",
          "content_same": false
        },
        {
          "line": 2919,
          "old_api": null,
          "new_api": "makeNode",
          "old_text": null,
          "new_text": "makeNode(ExprState)",
          "old_line_content": "\tExprEvalStep scratch = {0};",
          "new_line_content": "\tExprState  *state = makeNode(ExprState);",
          "content_same": false
        },
        {
          "line": 2408,
          "old_api": null,
          "new_api": "outerPlanState",
          "old_text": null,
          "new_text": "outerPlanState(parent)",
          "old_line_content": "",
          "new_line_content": "\t\tPlanState  *os = outerPlanState(parent);",
          "content_same": false
        },
        {
          "line": 3435,
          "old_api": null,
          "new_api": "ExprEvalPushStep",
          "old_text": null,
          "new_text": "ExprEvalPushStep(state, &scratch)",
          "old_line_content": "\t\t\t\t\t\t\t\t   state->steps_len - 1);",
          "new_line_content": "\t\tExprEvalPushStep(state, &scratch);",
          "content_same": false
        },
        {
          "line": 2924,
          "old_api": null,
          "new_api": "DO_AGGSPLIT_COMBINE",
          "old_text": null,
          "new_text": "DO_AGGSPLIT_COMBINE(aggstate->aggsplit)",
          "old_line_content": "",
          "new_line_content": "\tbool\t\tisCombine = DO_AGGSPLIT_COMBINE(aggstate->aggsplit);",
          "content_same": false
        },
        {
          "line": 3436,
          "old_api": null,
          "new_api": "lappend_int",
          "old_text": null,
          "new_text": "lappend_int(adjust_jumps,\n\t\t\t\t\t\t\t\t   state->steps_len - 1)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tadjust_jumps = lappend_int(adjust_jumps,",
          "content_same": false
        },
        {
          "line": 2418,
          "old_api": null,
          "new_api": "ExecGetResultType",
          "old_text": null,
          "new_text": "ExecGetResultType(os)",
          "old_line_content": "\t\telse if (os)",
          "new_line_content": "\t\t\tdesc = ExecGetResultType(os);",
          "content_same": false
        },
        {
          "line": 3445,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(as->opcode == EEOP_QUAL)",
          "old_line_content": "\t\tas->d.qualexpr.jumpdone = state->steps_len;",
          "new_line_content": "\t\tAssert(as->opcode == EEOP_QUAL);",
          "content_same": false
        },
        {
          "line": 2422,
          "old_api": null,
          "new_api": "ExecGetResultSlotOps",
          "old_text": null,
          "new_text": "ExecGetResultSlotOps(os, &isfixed)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\ttts_ops = ExecGetResultSlotOps(os, &isfixed);",
          "content_same": false
        },
        {
          "line": 2423,
          "old_api": null,
          "new_api": "ExecGetResultType",
          "old_text": null,
          "new_text": "ExecGetResultType(os)",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\tdesc = ExecGetResultType(os);",
          "content_same": false
        },
        {
          "line": 3446,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(as->d.qualexpr.jumpdone == -1)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tAssert(as->d.qualexpr.jumpdone == -1);",
          "content_same": false
        },
        {
          "line": 3455,
          "old_api": null,
          "new_api": "ExecReadyExpr",
          "old_text": null,
          "new_text": "ExecReadyExpr(state)",
          "old_line_content": "\treturn state;",
          "new_line_content": "\tExecReadyExpr(state);",
          "content_same": false
        },
        {
          "line": 2949,
          "old_api": null,
          "new_api": "get_last_attnums_walker",
          "old_text": null,
          "new_text": "get_last_attnums_walker((Node *) pertrans->aggref->aggfilter,\n\t\t\t\t\t\t\t\t&deform)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tget_last_attnums_walker((Node *) pertrans->aggref->aggfilter,",
          "content_same": false
        },
        {
          "line": 2952,
          "old_api": null,
          "new_api": "ExecPushExprSlots",
          "old_text": null,
          "new_text": "ExecPushExprSlots(state, &deform)",
          "old_line_content": "\t/*",
          "new_line_content": "\tExecPushExprSlots(state, &deform);",
          "content_same": false
        },
        {
          "line": 2978,
          "old_api": null,
          "new_api": "ExecInitExprRec",
          "old_text": null,
          "new_text": "ExecInitExprRec(pertrans->aggref->aggfilter, state,\n\t\t\t\t\t\t\t&state->resvalue, &state->resnull)",
          "old_line_content": "\t\t\t/* and jump out if false */",
          "new_line_content": "\t\t\tExecInitExprRec(pertrans->aggref->aggfilter, state,",
          "content_same": false
        },
        {
          "line": 2983,
          "old_api": null,
          "new_api": "ExprEvalPushStep",
          "old_text": null,
          "new_text": "ExprEvalPushStep(state, &scratch)",
          "old_line_content": "\t\t\t\t\t\t\t\t\t\t state->steps_len - 1);",
          "new_line_content": "\t\t\tExprEvalPushStep(state, &scratch);",
          "content_same": false
        },
        {
          "line": 2984,
          "old_api": null,
          "new_api": "lappend_int",
          "old_text": null,
          "new_text": "lappend_int(adjust_bailout,\n\t\t\t\t\t\t\t\t\t\t state->steps_len - 1)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tadjust_bailout = lappend_int(adjust_bailout,",
          "content_same": false
        },
        {
          "line": 2484,
          "old_api": null,
          "new_api": "nodeTag",
          "old_text": null,
          "new_text": "nodeTag(parent)",
          "old_line_content": "\t\t\tcase T_SubqueryScanState:",
          "new_line_content": "\t\tswitch (nodeTag(parent))",
          "content_same": false
        },
        {
          "line": 3001,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(pertrans->numSortCols == 0)",
          "old_line_content": "",
          "new_line_content": "\t\t\tAssert(pertrans->numSortCols == 0);",
          "content_same": false
        },
        {
          "line": 3002,
          "old_api": null,
          "new_api": "list_length",
          "old_text": null,
          "new_text": "list_length(pertrans->aggref->args)",
          "old_line_content": "\t\t\tstrictargs = trans_fcinfo->args + 1;",
          "new_line_content": "\t\t\tAssert(list_length(pertrans->aggref->args) == 1);",
          "content_same": false
        },
        {
          "line": 3005,
          "old_api": null,
          "new_api": "linitial",
          "old_text": null,
          "new_text": "linitial(pertrans->aggref->args)",
          "old_line_content": "\t\t\t/*",
          "new_line_content": "\t\t\tsource_tle = (TargetEntry *) linitial(pertrans->aggref->args);",
          "content_same": false
        },
        {
          "line": 3011,
          "old_api": null,
          "new_api": "OidIsValid",
          "old_text": null,
          "new_text": "OidIsValid(pertrans->deserialfn_oid)",
          "old_line_content": "\t\t\t\t/*",
          "new_line_content": "\t\t\tif (!OidIsValid(pertrans->deserialfn_oid))",
          "content_same": false
        },
        {
          "line": 2504,
          "old_api": null,
          "new_api": "lfirst",
          "old_text": null,
          "new_text": "lfirst(tlist)",
          "old_line_content": "\t\t\t\tif (tle->resjunk)",
          "new_line_content": "\t\t\t\tTargetEntry *tle = (TargetEntry *) lfirst(tlist);",
          "content_same": false
        },
        {
          "line": 3017,
          "old_api": null,
          "new_api": "ExecInitExprRec",
          "old_text": null,
          "new_text": "ExecInitExprRec(source_tle->expr, state,\n\t\t\t\t\t\t\t\t&trans_fcinfo->args[argno + 1].value,\n\t\t\t\t\t\t\t\t&trans_fcinfo->args[argno + 1].isnull)",
          "old_line_content": "\t\t\t\t\t\t\t\t&trans_fcinfo->args[argno + 1].isnull);",
          "new_line_content": "\t\t\t\tExecInitExprRec(source_tle->expr, state,",
          "content_same": false
        },
        {
          "line": 3026,
          "old_api": null,
          "new_api": "ExecInitExprRec",
          "old_text": null,
          "new_text": "ExecInitExprRec(source_tle->expr, state,\n\t\t\t\t\t\t\t\t&ds_fcinfo->args[0].value,\n\t\t\t\t\t\t\t\t&ds_fcinfo->args[0].isnull)",
          "old_line_content": "\t\t\t\t\t\t\t\t&ds_fcinfo->args[0].isnull);",
          "new_line_content": "\t\t\t\tExecInitExprRec(source_tle->expr, state,",
          "content_same": false
        },
        {
          "line": 2517,
          "old_api": null,
          "new_api": "ExecInitJunkFilter",
          "old_text": null,
          "new_text": "ExecInitJunkFilter(subplan->plan->targetlist,\n\t\t\t\t\t\t\t\t\t   ExecInitExtraTupleSlot(parent->state, NULL,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  &TTSOpsVirtual))",
          "old_line_content": "\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  &TTSOpsVirtual));",
          "new_line_content": "\t\t\t\t\tExecInitJunkFilter(subplan->plan->targetlist,",
          "content_same": false
        },
        {
          "line": 2518,
          "old_api": null,
          "new_api": "ExecInitExtraTupleSlot",
          "old_text": null,
          "new_text": "ExecInitExtraTupleSlot(parent->state, NULL,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  &TTSOpsVirtual)",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\t\t\t\t\t\t\t   ExecInitExtraTupleSlot(parent->state, NULL,",
          "content_same": false
        },
        {
          "line": 3031,
          "old_api": null,
          "new_api": "PointerGetDatum",
          "old_text": null,
          "new_text": "PointerGetDatum(NULL)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\tds_fcinfo->args[1].value = PointerGetDatum(NULL);",
          "content_same": false
        },
        {
          "line": 2533,
          "old_api": null,
          "new_api": "palloc0",
          "old_text": null,
          "new_text": "palloc0(sizeof(SubscriptingRefState))",
          "old_line_content": "\tListCell   *lc;",
          "new_line_content": "\tSubscriptingRefState *sbsrefstate = palloc0(sizeof(SubscriptingRefState));",
          "content_same": false
        },
        {
          "line": 3049,
          "old_api": null,
          "new_api": "ExprEvalPushStep",
          "old_text": null,
          "new_text": "ExprEvalPushStep(state, &scratch)",
          "old_line_content": "\t\t\t\t\t\t\t\t\t\t\t state->steps_len - 1);",
          "new_line_content": "\t\t\t\tExprEvalPushStep(state, &scratch);",
          "content_same": false
        },
        {
          "line": 3050,
          "old_api": null,
          "new_api": "lappend_int",
          "old_text": null,
          "new_text": "lappend_int(adjust_bailout,\n\t\t\t\t\t\t\t\t\t\t\t state->steps_len - 1)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\tadjust_bailout = lappend_int(adjust_bailout,",
          "content_same": false
        },
        {
          "line": 2541,
          "old_api": null,
          "new_api": "get_typlen",
          "old_text": null,
          "new_text": "get_typlen(sbsref->refcontainertype)",
          "old_line_content": "\t\t\t\t\t\t &sbsrefstate->refelemlength,",
          "new_line_content": "\tsbsrefstate->refattrlength = get_typlen(sbsref->refcontainertype);",
          "content_same": false
        },
        {
          "line": 2542,
          "old_api": null,
          "new_api": "get_typlenbyvalalign",
          "old_text": null,
          "new_text": "get_typlenbyvalalign(sbsref->refelemtype,\n\t\t\t\t\t\t &sbsrefstate->refelemlength,\n\t\t\t\t\t\t &sbsrefstate->refelembyval,\n\t\t\t\t\t\t &sbsrefstate->refelemalign)",
          "old_line_content": "\t\t\t\t\t\t &sbsrefstate->refelembyval,",
          "new_line_content": "\tget_typlenbyvalalign(sbsref->refelemtype,",
          "content_same": false
        },
        {
          "line": 2553,
          "old_api": null,
          "new_api": "ExecInitExprRec",
          "old_text": null,
          "new_text": "ExecInitExprRec(sbsref->refexpr, state, resv, resnull)",
          "old_line_content": "\t/*",
          "new_line_content": "\tExecInitExprRec(sbsref->refexpr, state, resv, resnull);",
          "content_same": false
        },
        {
          "line": 3068,
          "old_api": null,
          "new_api": "lfirst",
          "old_text": null,
          "new_text": "lfirst(arg)",
          "old_line_content": "\t\t\t\t/*",
          "new_line_content": "\t\t\t\tTargetEntry *source_tle = (TargetEntry *) lfirst(arg);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 3072,
          "old_api": "ExecInitExprRec",
          "new_api": null,
          "old_text": "ExecInitExprRec(source_tle->expr, state,\n\t\t\t\t\t\t\t\t&trans_fcinfo->args[argno + 1].value,\n\t\t\t\t\t\t\t\t&trans_fcinfo->args[argno + 1].isnull)",
          "new_text": null,
          "old_line_content": "\t\t\t\tExecInitExprRec(source_tle->expr, state,",
          "new_line_content": "\t\t\t\t * value",
          "content_same": false
        },
        {
          "line": 2562,
          "old_api": "ExprEvalPushStep",
          "new_api": null,
          "old_text": "ExprEvalPushStep(state, scratch)",
          "new_text": null,
          "old_line_content": "\t\tExprEvalPushStep(state, scratch);",
          "new_line_content": "\t\tscratch->opcode = EEOP_JUMP_IF_NULL;",
          "content_same": false
        },
        {
          "line": 2563,
          "old_api": "lappend_int",
          "new_api": null,
          "old_text": "lappend_int(adjust_jumps,\n\t\t\t\t\t\t\t\t   state->steps_len - 1)",
          "new_text": null,
          "old_line_content": "\t\tadjust_jumps = lappend_int(adjust_jumps,",
          "new_line_content": "\t\tscratch->d.jump.jumpdone = -1;\t/* adjust later */",
          "content_same": false
        },
        {
          "line": 2568,
          "old_api": "list_length",
          "new_api": null,
          "old_text": "list_length(sbsref->refupperindexpr)",
          "new_text": null,
          "old_line_content": "\tif (list_length(sbsref->refupperindexpr) > MAXDIM)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2569,
          "old_api": "ereport",
          "new_api": null,
          "old_text": "ereport(ERROR,\n\t\t\t\t(errcode(ERRCODE_PROGRAM_LIMIT_EXCEEDED),\n\t\t\t\t errmsg(\"number of array dimensions (%d) exceeds the maximum allowed (%d)\",\n\t\t\t\t\t\tlist_length(sbsref->refupperindexpr), MAXDIM)))",
          "new_text": null,
          "old_line_content": "\t\tereport(ERROR,",
          "new_line_content": "\t/* Verify subscript list lengths are within limit */",
          "content_same": false
        },
        {
          "line": 3084,
          "old_api": "linitial",
          "new_api": null,
          "old_text": "linitial(pertrans->aggref->args)",
          "new_text": null,
          "old_line_content": "\t\t\t(TargetEntry *) linitial(pertrans->aggref->args);",
          "new_line_content": "\t\t\t */",
          "content_same": false
        },
        {
          "line": 2575,
          "old_api": "ereport",
          "new_api": null,
          "old_text": "ereport(ERROR,\n\t\t\t\t(errcode(ERRCODE_PROGRAM_LIMIT_EXCEEDED),\n\t\t\t\t errmsg(\"number of array dimensions (%d) exceeds the maximum allowed (%d)\",\n\t\t\t\t\t\tlist_length(sbsref->reflowerindexpr), MAXDIM)))",
          "new_text": null,
          "old_line_content": "\t\tereport(ERROR,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2582,
          "old_api": "foreach",
          "new_api": null,
          "old_text": "foreach(lc, sbsref->refupperindexpr)",
          "new_text": null,
          "old_line_content": "\tforeach(lc, sbsref->refupperindexpr)",
          "new_line_content": "\t/* Evaluate upper subscripts */",
          "content_same": false
        },
        {
          "line": 3104,
          "old_api": "foreach",
          "new_api": null,
          "old_text": "foreach(arg, pertrans->aggref->args)",
          "new_text": null,
          "old_line_content": "\t\t\tforeach(arg, pertrans->aggref->args)",
          "new_line_content": "\t\t\tstrictnulls = nulls;",
          "content_same": false
        },
        {
          "line": 2597,
          "old_api": "ExecInitExprRec",
          "new_api": null,
          "old_text": "ExecInitExprRec(e, state,\n\t\t\t\t\t\t&sbsrefstate->subscriptvalue, &sbsrefstate->subscriptnull)",
          "new_text": null,
          "old_line_content": "\t\tExecInitExprRec(e, state,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3113,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(pertrans->numInputs == argno)",
          "new_text": null,
          "old_line_content": "\t\tAssert(pertrans->numInputs == argno);",
          "new_line_content": "\t\t\t}",
          "content_same": false
        },
        {
          "line": 2606,
          "old_api": "ExprEvalPushStep",
          "new_api": null,
          "old_text": "ExprEvalPushStep(state, scratch)",
          "new_text": null,
          "old_line_content": "\t\tExprEvalPushStep(state, scratch);",
          "new_line_content": "\t\tscratch->d.sbsref_subscript.isupper = true;",
          "content_same": false
        },
        {
          "line": 2607,
          "old_api": "lappend_int",
          "new_api": null,
          "old_text": "lappend_int(adjust_jumps,\n\t\t\t\t\t\t\t\t   state->steps_len - 1)",
          "new_text": null,
          "old_line_content": "\t\tadjust_jumps = lappend_int(adjust_jumps,",
          "new_line_content": "\t\tscratch->d.sbsref_subscript.jumpdone = -1;\t/* adjust later */",
          "content_same": false
        },
        {
          "line": 2615,
          "old_api": "foreach",
          "new_api": null,
          "old_text": "foreach(lc, sbsref->reflowerindexpr)",
          "new_text": null,
          "old_line_content": "\tforeach(lc, sbsref->reflowerindexpr)",
          "new_line_content": "\t/* Evaluate lower subscripts similarly */",
          "content_same": false
        },
        {
          "line": 3130,
          "old_api": "ExprEvalPushStep",
          "new_api": null,
          "old_text": "ExprEvalPushStep(state, &scratch)",
          "new_text": null,
          "old_line_content": "\t\t\tExprEvalPushStep(state, &scratch);",
          "new_line_content": "\t\t\tscratch.d.agg_strict_input_check.jumpnull = -1; /* adjust later */",
          "content_same": false
        },
        {
          "line": 3131,
          "old_api": "lappend_int",
          "new_api": null,
          "old_text": "lappend_int(adjust_bailout,\n\t\t\t\t\t\t\t\t\t\t state->steps_len - 1)",
          "new_text": null,
          "old_line_content": "\t\t\tadjust_bailout = lappend_int(adjust_bailout,",
          "new_line_content": "\t\t\tscratch.d.agg_strict_input_check.nargs = pertrans->numTransInputs;",
          "content_same": false
        },
        {
          "line": 2630,
          "old_api": "ExecInitExprRec",
          "new_api": null,
          "old_text": "ExecInitExprRec(e, state,\n\t\t\t\t\t\t&sbsrefstate->subscriptvalue, &sbsrefstate->subscriptnull)",
          "new_text": null,
          "old_line_content": "\t\tExecInitExprRec(e, state,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3143,
          "old_api": "Max",
          "new_api": null,
          "old_text": "Max(phase->numsets, 1)",
          "new_text": null,
          "old_line_content": "\t\t\tint\t\t\tprocessGroupingSets = Max(phase->numsets, 1);",
          "new_line_content": "\t\tif (doSort)",
          "content_same": false
        },
        {
          "line": 3147,
          "old_api": "ExecBuildAggTransCall",
          "new_api": null,
          "old_text": "ExecBuildAggTransCall(state, aggstate, &scratch, trans_fcinfo,\n\t\t\t\t\t\t\t\t\t  pertrans, transno, setno, setoff, false)",
          "new_text": null,
          "old_line_content": "\t\t\t\tExecBuildAggTransCall(state, aggstate, &scratch, trans_fcinfo,",
          "new_line_content": "\t\t\tfor (setno = 0; setno < processGroupingSets; setno++)",
          "content_same": false
        },
        {
          "line": 2639,
          "old_api": "ExprEvalPushStep",
          "new_api": null,
          "old_text": "ExprEvalPushStep(state, scratch)",
          "new_text": null,
          "old_line_content": "\t\tExprEvalPushStep(state, scratch);",
          "new_line_content": "\t\tscratch->d.sbsref_subscript.isupper = false;",
          "content_same": false
        },
        {
          "line": 2640,
          "old_api": "lappend_int",
          "new_api": null,
          "old_text": "lappend_int(adjust_jumps,\n\t\t\t\t\t\t\t\t   state->steps_len - 1)",
          "new_text": null,
          "old_line_content": "\t\tadjust_jumps = lappend_int(adjust_jumps,",
          "new_line_content": "\t\tscratch->d.sbsref_subscript.jumpdone = -1;\t/* adjust later */",
          "content_same": false
        },
        {
          "line": 2649,
          "old_api": "elog",
          "new_api": null,
          "old_text": "elog(ERROR, \"upper and lower index lists are not same length\")",
          "new_text": null,
          "old_line_content": "\t\telog(ERROR, \"upper and lower index lists are not same length\");",
          "new_line_content": "\tif (sbsrefstate->numlower != 0 &&",
          "content_same": false
        },
        {
          "line": 3165,
          "old_api": "ExecBuildAggTransCall",
          "new_api": null,
          "old_text": "ExecBuildAggTransCall(state, aggstate, &scratch, trans_fcinfo,\n\t\t\t\t\t\t\t\t\t  pertrans, transno, setno, setoff, true)",
          "new_text": null,
          "old_line_content": "\t\t\t\tExecBuildAggTransCall(state, aggstate, &scratch, trans_fcinfo,",
          "new_line_content": "\t\t\tfor (setno = 0; setno < numHashes; setno++)",
          "content_same": false
        },
        {
          "line": 3174,
          "old_api": "lfirst_int",
          "new_api": null,
          "old_text": "lfirst_int(bail)",
          "new_text": null,
          "old_line_content": "\t\t\tExprEvalStep *as = &state->steps[lfirst_int(bail)];",
          "new_line_content": "\t\tforeach(bail, adjust_bailout)",
          "content_same": false
        },
        {
          "line": 3178,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(as->d.jump.jumpdone == -1)",
          "new_text": null,
          "old_line_content": "\t\t\t\tAssert(as->d.jump.jumpdone == -1);",
          "new_line_content": "\t\t\tif (as->opcode == EEOP_JUMP_IF_NOT_TRUE)",
          "content_same": false
        },
        {
          "line": 2670,
          "old_api": "isAssignmentIndirectionExpr",
          "new_api": null,
          "old_text": "isAssignmentIndirectionExpr(sbsref->refassgnexpr)",
          "new_text": null,
          "old_line_content": "\t\tif (isAssignmentIndirectionExpr(sbsref->refassgnexpr))",
          "new_line_content": "\t\t * only if the argument actually needs it.",
          "content_same": false
        },
        {
          "line": 3184,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(as->d.agg_strict_input_check.jumpnull == -1)",
          "new_text": null,
          "old_line_content": "\t\t\t\tAssert(as->d.agg_strict_input_check.jumpnull == -1);",
          "new_line_content": "\t\t\t\t\t as->opcode == EEOP_AGG_STRICT_INPUT_CHECK_NULLS)",
          "content_same": false
        },
        {
          "line": 2674,
          "old_api": "ExprEvalPushStep",
          "new_api": null,
          "old_text": "ExprEvalPushStep(state, scratch)",
          "new_text": null,
          "old_line_content": "\t\t\tExprEvalPushStep(state, scratch);",
          "new_line_content": "\t\t\tscratch->opcode = EEOP_SBSREF_OLD;",
          "content_same": false
        },
        {
          "line": 3189,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(as->d.agg_deserialize.jumpnull == -1)",
          "new_text": null,
          "old_line_content": "\t\t\t\tAssert(as->d.agg_deserialize.jumpnull == -1);",
          "new_line_content": "\t\t\telse if (as->opcode == EEOP_AGG_STRICT_DESERIALIZE)",
          "content_same": false
        },
        {
          "line": 2684,
          "old_api": "ExecInitExprRec",
          "new_api": null,
          "old_text": "ExecInitExprRec(sbsref->refassgnexpr, state,\n\t\t\t\t\t\t&sbsrefstate->replacevalue, &sbsrefstate->replacenull)",
          "new_text": null,
          "old_line_content": "\t\tExecInitExprRec(sbsref->refassgnexpr, state,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3198,
          "old_api": "ExprEvalPushStep",
          "new_api": null,
          "old_text": "ExprEvalPushStep(state, &scratch)",
          "new_text": null,
          "old_line_content": "\tExprEvalPushStep(state, &scratch);",
          "new_line_content": "\tscratch.resnull = NULL;",
          "content_same": false
        },
        {
          "line": 2693,
          "old_api": "ExprEvalPushStep",
          "new_api": null,
          "old_text": "ExprEvalPushStep(state, scratch)",
          "new_text": null,
          "old_line_content": "\t\tExprEvalPushStep(state, scratch);",
          "new_line_content": "\t\tscratch->opcode = EEOP_SBSREF_ASSIGN;",
          "content_same": false
        },
        {
          "line": 2701,
          "old_api": "ExprEvalPushStep",
          "new_api": null,
          "old_text": "ExprEvalPushStep(state, scratch)",
          "new_text": null,
          "old_line_content": "\t\tExprEvalPushStep(state, scratch);",
          "new_line_content": "\t\tscratch->opcode = EEOP_SBSREF_FETCH;",
          "content_same": false
        },
        {
          "line": 2708,
          "old_api": "lfirst_int",
          "new_api": null,
          "old_text": "lfirst_int(lc)",
          "new_text": null,
          "old_line_content": "\t\tExprEvalStep *as = &state->steps[lfirst_int(lc)];",
          "new_line_content": "\tforeach(lc, adjust_jumps)",
          "content_same": false
        },
        {
          "line": 2712,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(as->d.sbsref_subscript.jumpdone == -1)",
          "new_text": null,
          "old_line_content": "\t\t\tAssert(as->d.sbsref_subscript.jumpdone == -1);",
          "new_line_content": "\t\tif (as->opcode == EEOP_SBSREF_SUBSCRIPT)",
          "content_same": false
        },
        {
          "line": 2717,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(as->opcode == EEOP_JUMP_IF_NULL)",
          "new_text": null,
          "old_line_content": "\t\t\tAssert(as->opcode == EEOP_JUMP_IF_NULL);",
          "new_line_content": "\t\telse",
          "content_same": false
        },
        {
          "line": 2718,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(as->d.jump.jumpdone == -1)",
          "new_text": null,
          "old_line_content": "\t\t\tAssert(as->d.jump.jumpdone == -1);",
          "new_line_content": "\t\t{",
          "content_same": false
        },
        {
          "line": 3244,
          "old_api": "ExprEvalPushStep",
          "new_api": null,
          "old_text": "ExprEvalPushStep(state, scratch)",
          "new_text": null,
          "old_line_content": "\t\tExprEvalPushStep(state, scratch);",
          "new_line_content": "\t\tscratch->d.agg_init_trans.aggcontext = aggcontext;",
          "content_same": false
        },
        {
          "line": 2743,
          "old_api": "IsA",
          "new_api": null,
          "old_text": "IsA(expr, FieldStore)",
          "new_text": null,
          "old_line_content": "\tif (IsA(expr, FieldStore))",
          "new_line_content": "\tif (expr == NULL)",
          "content_same": false
        },
        {
          "line": 2747,
          "old_api": "IsA",
          "new_api": null,
          "old_text": "IsA(fstore->arg, CaseTestExpr)",
          "new_text": null,
          "old_line_content": "\t\tif (fstore->arg && IsA(fstore->arg, CaseTestExpr))",
          "new_line_content": "\t\tFieldStore *fstore = (FieldStore *) expr;",
          "content_same": false
        },
        {
          "line": 3259,
          "old_api": "ExprEvalPushStep",
          "new_api": null,
          "old_text": "ExprEvalPushStep(state, scratch)",
          "new_text": null,
          "old_line_content": "\t\tExprEvalPushStep(state, scratch);",
          "new_line_content": "\t\tscratch->d.agg_strict_trans_check.transno = transno;",
          "content_same": false
        },
        {
          "line": 2750,
          "old_api": "IsA",
          "new_api": null,
          "old_text": "IsA(expr, SubscriptingRef)",
          "new_text": null,
          "old_line_content": "\telse if (IsA(expr, SubscriptingRef))",
          "new_line_content": "\t\t\treturn true;",
          "content_same": false
        },
        {
          "line": 2754,
          "old_api": "IsA",
          "new_api": null,
          "old_text": "IsA(sbsRef->refexpr, CaseTestExpr)",
          "new_text": null,
          "old_line_content": "\t\tif (sbsRef->refexpr && IsA(sbsRef->refexpr, CaseTestExpr))",
          "new_line_content": "\t\tSubscriptingRef *sbsRef = (SubscriptingRef *) expr;",
          "content_same": false
        },
        {
          "line": 3285,
          "old_api": "ExprEvalPushStep",
          "new_api": null,
          "old_text": "ExprEvalPushStep(state, scratch)",
          "new_text": null,
          "old_line_content": "\tExprEvalPushStep(state, scratch);",
          "new_line_content": "\tscratch->d.agg_trans.transno = transno;",
          "content_same": false
        },
        {
          "line": 3292,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(as->d.agg_init_trans.jumpnull == -1)",
          "new_text": null,
          "old_line_content": "\t\tAssert(as->d.agg_init_trans.jumpnull == -1);",
          "new_line_content": "\t\tExprEvalStep *as = &state->steps[adjust_init_jumpnull];",
          "content_same": false
        },
        {
          "line": 2785,
          "old_api": "ExecInitExprRec",
          "new_api": null,
          "old_text": "ExecInitExprRec(ctest->arg, state, resv, resnull)",
          "new_text": null,
          "old_line_content": "\tExecInitExprRec(ctest->arg, state, resv, resnull);",
          "new_line_content": "\t * needs to be returned.",
          "content_same": false
        },
        {
          "line": 3299,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(as->d.agg_strict_trans_check.jumpnull == -1)",
          "new_text": null,
          "old_line_content": "\t\tAssert(as->d.agg_strict_trans_check.jumpnull == -1);",
          "new_line_content": "\t\tExprEvalStep *as = &state->steps[adjust_strict_jumpnull];",
          "content_same": false
        },
        {
          "line": 2805,
          "old_api": "palloc",
          "new_api": null,
          "old_text": "palloc(sizeof(DomainConstraintRef))",
          "new_text": null,
          "old_line_content": "\t\tpalloc(sizeof(DomainConstraintRef));",
          "new_line_content": "\t */",
          "content_same": false
        },
        {
          "line": 2806,
          "old_api": "InitDomainConstraintRef",
          "new_api": null,
          "old_text": "InitDomainConstraintRef(ctest->resulttype,\n\t\t\t\t\t\t\tconstraint_ref,\n\t\t\t\t\t\t\tCurrentMemoryContext,\n\t\t\t\t\t\t\tfalse)",
          "new_text": null,
          "old_line_content": "\tInitDomainConstraintRef(ctest->resulttype,",
          "new_line_content": "\tconstraint_ref = (DomainConstraintRef *)",
          "content_same": false
        },
        {
          "line": 3324,
          "old_api": "makeNode",
          "new_api": null,
          "old_text": "makeNode(ExprState)",
          "new_text": null,
          "old_line_content": "\tExprState  *state = makeNode(ExprState);",
          "new_line_content": "\t\t\t\t\t   PlanState *parent)",
          "content_same": false
        },
        {
          "line": 2816,
          "old_api": "foreach",
          "new_api": null,
          "old_text": "foreach(l, constraint_ref->constraints)",
          "new_text": null,
          "old_line_content": "\tforeach(l, constraint_ref->constraints)",
          "new_line_content": "\t * need more pushups.",
          "content_same": false
        },
        {
          "line": 2826,
          "old_api": "ExprEvalPushStep",
          "new_api": null,
          "old_text": "ExprEvalPushStep(state, scratch)",
          "new_text": null,
          "old_line_content": "\t\t\t\tExprEvalPushStep(state, scratch);",
          "new_line_content": "\t\t\tcase DOM_CONSTRAINT_NOTNULL:",
          "content_same": false
        },
        {
          "line": 2833,
          "old_api": "palloc",
          "new_api": null,
          "old_text": "palloc(sizeof(Datum))",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t(Datum *) palloc(sizeof(Datum));",
          "new_line_content": "\t\t\t\t{",
          "content_same": false
        },
        {
          "line": 3353,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(maxatt >= 0)",
          "new_text": null,
          "old_line_content": "\tAssert(maxatt >= 0);",
          "new_line_content": "\t\t\tmaxatt = attno;",
          "content_same": false
        },
        {
          "line": 2848,
          "old_api": "get_typlen",
          "new_api": null,
          "old_text": "get_typlen(ctest->resulttype)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tif (get_typlen(ctest->resulttype) == -1)",
          "new_line_content": "\t\t\t\t\t * - but only if it could be an expanded datum.",
          "content_same": false
        },
        {
          "line": 3361,
          "old_api": "ExecComputeSlotInfo",
          "new_api": null,
          "old_text": "ExecComputeSlotInfo(state, &scratch)",
          "new_text": null,
          "old_line_content": "\tExecComputeSlotInfo(state, &scratch);",
          "new_line_content": "\tscratch.d.fetch.known_desc = ldesc;",
          "content_same": false
        },
        {
          "line": 3362,
          "old_api": "ExprEvalPushStep",
          "new_api": null,
          "old_text": "ExprEvalPushStep(state, &scratch)",
          "new_text": null,
          "old_line_content": "\tExprEvalPushStep(state, &scratch);",
          "new_line_content": "\tscratch.d.fetch.kind = lops;",
          "content_same": false
        },
        {
          "line": 2851,
          "old_api": "palloc",
          "new_api": null,
          "old_text": "palloc(sizeof(Datum))",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\tdomainval = (Datum *) palloc(sizeof(Datum));",
          "new_line_content": "\t\t\t\t\t{",
          "content_same": false
        },
        {
          "line": 2852,
          "old_api": "palloc",
          "new_api": null,
          "old_text": "palloc(sizeof(bool))",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\tdomainnull = (bool *) palloc(sizeof(bool));",
          "new_line_content": "\t\t\t\t\t\t/* Yes, so make output workspace for MAKE_READONLY */",
          "content_same": false
        },
        {
          "line": 3369,
          "old_api": "ExecComputeSlotInfo",
          "new_api": null,
          "old_text": "ExecComputeSlotInfo(state, &scratch)",
          "new_text": null,
          "old_line_content": "\tExecComputeSlotInfo(state, &scratch);",
          "new_line_content": "\tscratch.d.fetch.known_desc = rdesc;",
          "content_same": false
        },
        {
          "line": 3370,
          "old_api": "ExprEvalPushStep",
          "new_api": null,
          "old_text": "ExprEvalPushStep(state, &scratch)",
          "new_text": null,
          "old_line_content": "\tExprEvalPushStep(state, &scratch);",
          "new_line_content": "\tscratch.d.fetch.kind = rops;",
          "content_same": false
        },
        {
          "line": 2860,
          "old_api": "ExprEvalPushStep",
          "new_api": null,
          "old_text": "ExprEvalPushStep(state, &scratch2)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\tExprEvalPushStep(state, &scratch2);",
          "new_line_content": "\t\t\t\t\t\tscratch2.d.make_readonly.value = resv;",
          "content_same": false
        },
        {
          "line": 3379,
          "old_api": "TupleDescAttr",
          "new_api": null,
          "old_text": "TupleDescAttr(ldesc, attno - 1)",
          "new_text": null,
          "old_line_content": "\t\tForm_pg_attribute latt = TupleDescAttr(ldesc, attno - 1);",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 3380,
          "old_api": "TupleDescAttr",
          "new_api": null,
          "old_text": "TupleDescAttr(rdesc, attno - 1)",
          "new_text": null,
          "old_line_content": "\t\tForm_pg_attribute ratt = TupleDescAttr(rdesc, attno - 1);",
          "new_line_content": "\t\tint\t\t\tattno = keyColIdx[natt];",
          "content_same": false
        },
        {
          "line": 3388,
          "old_api": "GetUserId",
          "new_api": null,
          "old_text": "GetUserId()",
          "new_text": null,
          "old_line_content": "\t\taclresult = pg_proc_aclcheck(foid, GetUserId(), ACL_EXECUTE);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2882,
          "old_api": "ExecInitExprRec",
          "new_api": null,
          "old_text": "ExecInitExprRec(con->check_expr, state,\n\t\t\t\t\t\t\t\tscratch->d.domaincheck.checkvalue,\n\t\t\t\t\t\t\t\tscratch->d.domaincheck.checknull)",
          "new_text": null,
          "old_line_content": "\t\t\t\tExecInitExprRec(con->check_expr, state,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3395,
          "old_api": "palloc0",
          "new_api": null,
          "old_text": "palloc0(sizeof(FmgrInfo))",
          "new_text": null,
          "old_line_content": "\t\tfinfo = palloc0(sizeof(FmgrInfo));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3396,
          "old_api": "SizeForFunctionCallInfo",
          "new_api": null,
          "old_text": "SizeForFunctionCallInfo(2)",
          "new_text": null,
          "old_line_content": "\t\tfcinfo = palloc0(SizeForFunctionCallInfo(2));",
          "new_line_content": "\t\t/* Set up the primary fmgr lookup information */",
          "content_same": false
        },
        {
          "line": 2891,
          "old_api": "ExprEvalPushStep",
          "new_api": null,
          "old_text": "ExprEvalPushStep(state, scratch)",
          "new_text": null,
          "old_line_content": "\t\t\t\tExprEvalPushStep(state, scratch);",
          "new_line_content": "\t\t\t\t/* now test result */",
          "content_same": false
        },
        {
          "line": 2895,
          "old_api": "elog",
          "new_api": null,
          "old_text": "elog(ERROR, \"unrecognized constraint type: %d\",\n\t\t\t\t\t (int) con->constrainttype)",
          "new_text": null,
          "old_line_content": "\t\t\t\telog(ERROR, \"unrecognized constraint type: %d\",",
          "new_line_content": "\t\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 3408,
          "old_api": "ExprEvalPushStep",
          "new_api": null,
          "old_text": "ExprEvalPushStep(state, &scratch)",
          "new_text": null,
          "old_line_content": "\t\tExprEvalPushStep(state, &scratch);",
          "new_line_content": "\t\tscratch.resvalue = &fcinfo->args[0].value;",
          "content_same": false
        },
        {
          "line": 3416,
          "old_api": "ExprEvalPushStep",
          "new_api": null,
          "old_text": "ExprEvalPushStep(state, &scratch)",
          "new_text": null,
          "old_line_content": "\t\tExprEvalPushStep(state, &scratch);",
          "new_line_content": "\t\tscratch.resvalue = &fcinfo->args[1].value;",
          "content_same": false
        },
        {
          "line": 2401,
          "old_api": "ExecGetResultSlotOps",
          "new_api": null,
          "old_text": "ExecGetResultSlotOps(is, &isfixed)",
          "new_text": null,
          "old_line_content": "\t\t\ttts_ops = ExecGetResultSlotOps(is, &isfixed);",
          "new_line_content": "\t\t{",
          "content_same": false
        },
        {
          "line": 3426,
          "old_api": "ExprEvalPushStep",
          "new_api": null,
          "old_text": "ExprEvalPushStep(state, &scratch)",
          "new_text": null,
          "old_line_content": "\t\tExprEvalPushStep(state, &scratch);",
          "new_line_content": "\t\tscratch.resvalue = &state->resvalue;",
          "content_same": false
        },
        {
          "line": 2917,
          "old_api": "makeNode",
          "new_api": null,
          "old_text": "makeNode(ExprState)",
          "new_text": null,
          "old_line_content": "\tExprState  *state = makeNode(ExprState);",
          "new_line_content": "\t\t\t\t  bool doSort, bool doHash)",
          "content_same": false
        },
        {
          "line": 2407,
          "old_api": "outerPlanState",
          "new_api": null,
          "old_text": "outerPlanState(parent)",
          "new_text": null,
          "old_line_content": "\t\tPlanState  *os = outerPlanState(parent);",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 3433,
          "old_api": "ExprEvalPushStep",
          "new_api": null,
          "old_text": "ExprEvalPushStep(state, &scratch)",
          "new_text": null,
          "old_line_content": "\t\tExprEvalPushStep(state, &scratch);",
          "new_line_content": "\t\tscratch.resvalue = &state->resvalue;",
          "content_same": false
        },
        {
          "line": 2922,
          "old_api": "DO_AGGSPLIT_COMBINE",
          "new_api": null,
          "old_text": "DO_AGGSPLIT_COMBINE(aggstate->aggsplit)",
          "new_text": null,
          "old_line_content": "\tbool\t\tisCombine = DO_AGGSPLIT_COMBINE(aggstate->aggsplit);",
          "new_line_content": "\tint\t\t\ttransno = 0;",
          "content_same": false
        },
        {
          "line": 3434,
          "old_api": "lappend_int",
          "new_api": null,
          "old_text": "lappend_int(adjust_jumps,\n\t\t\t\t\t\t\t\t   state->steps_len - 1)",
          "new_text": null,
          "old_line_content": "\t\tadjust_jumps = lappend_int(adjust_jumps,",
          "new_line_content": "\t\tscratch.resnull = &state->resnull;",
          "content_same": false
        },
        {
          "line": 3441,
          "old_api": "lfirst_int",
          "new_api": null,
          "old_text": "lfirst_int(lc)",
          "new_text": null,
          "old_line_content": "\t\tExprEvalStep *as = &state->steps[lfirst_int(lc)];",
          "new_line_content": "\tforeach(lc, adjust_jumps)",
          "content_same": false
        },
        {
          "line": 2420,
          "old_api": "ExecGetResultSlotOps",
          "new_api": null,
          "old_text": "ExecGetResultSlotOps(os, &isfixed)",
          "new_text": null,
          "old_line_content": "\t\t\ttts_ops = ExecGetResultSlotOps(os, &isfixed);",
          "new_line_content": "\t\telse if (os)",
          "content_same": false
        },
        {
          "line": 2421,
          "old_api": "ExecGetResultType",
          "new_api": null,
          "old_text": "ExecGetResultType(os)",
          "new_text": null,
          "old_line_content": "\t\t\tdesc = ExecGetResultType(os);",
          "new_line_content": "\t\t{",
          "content_same": false
        },
        {
          "line": 3444,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(as->d.qualexpr.jumpdone == -1)",
          "new_text": null,
          "old_line_content": "\t\tAssert(as->d.qualexpr.jumpdone == -1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2939,
          "old_api": "get_last_attnums_walker",
          "new_api": null,
          "old_text": "get_last_attnums_walker((Node *) pertrans->aggref->aggdirectargs,\n\t\t\t\t\t\t\t\t&deform)",
          "new_text": null,
          "old_line_content": "\t\tget_last_attnums_walker((Node *) pertrans->aggref->aggdirectargs,",
          "new_line_content": "\t\tAggStatePerTrans pertrans = &aggstate->pertrans[transno];",
          "content_same": false
        },
        {
          "line": 3451,
          "old_api": "ExprEvalPushStep",
          "new_api": null,
          "old_text": "ExprEvalPushStep(state, &scratch)",
          "new_text": null,
          "old_line_content": "\tExprEvalPushStep(state, &scratch);",
          "new_line_content": "\tscratch.resnull = NULL;",
          "content_same": false
        },
        {
          "line": 2950,
          "old_api": "ExecPushExprSlots",
          "new_api": null,
          "old_text": "ExecPushExprSlots(state, &deform)",
          "new_text": null,
          "old_line_content": "\tExecPushExprSlots(state, &deform);",
          "new_line_content": "\t\t\t\t\t\t\t\t&deform);",
          "content_same": false
        },
        {
          "line": 2976,
          "old_api": "ExecInitExprRec",
          "new_api": null,
          "old_text": "ExecInitExprRec(pertrans->aggref->aggfilter, state,\n\t\t\t\t\t\t\t&state->resvalue, &state->resnull)",
          "new_text": null,
          "old_line_content": "\t\t\tExecInitExprRec(pertrans->aggref->aggfilter, state,",
          "new_line_content": "\t\t{",
          "content_same": false
        },
        {
          "line": 2981,
          "old_api": "ExprEvalPushStep",
          "new_api": null,
          "old_text": "ExprEvalPushStep(state, &scratch)",
          "new_text": null,
          "old_line_content": "\t\t\tExprEvalPushStep(state, &scratch);",
          "new_line_content": "\t\t\tscratch.opcode = EEOP_JUMP_IF_NOT_TRUE;",
          "content_same": false
        },
        {
          "line": 2982,
          "old_api": "lappend_int",
          "new_api": null,
          "old_text": "lappend_int(adjust_bailout,\n\t\t\t\t\t\t\t\t\t\t state->steps_len - 1)",
          "new_text": null,
          "old_line_content": "\t\t\tadjust_bailout = lappend_int(adjust_bailout,",
          "new_line_content": "\t\t\tscratch.d.jump.jumpdone = -1;\t/* adjust later */",
          "content_same": false
        },
        {
          "line": 2482,
          "old_api": "nodeTag",
          "new_api": null,
          "old_text": "nodeTag(parent)",
          "new_text": null,
          "old_line_content": "\t\tswitch (nodeTag(parent))",
          "new_line_content": "\t\tPlanState  *subplan = NULL;",
          "content_same": false
        },
        {
          "line": 2999,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(pertrans->numSortCols == 0)",
          "new_text": null,
          "old_line_content": "\t\t\tAssert(pertrans->numSortCols == 0);",
          "new_line_content": "\t\t\tTargetEntry *source_tle;",
          "content_same": false
        },
        {
          "line": 3000,
          "old_api": "list_length",
          "new_api": null,
          "old_text": "list_length(pertrans->aggref->args)",
          "new_text": null,
          "old_line_content": "\t\t\tAssert(list_length(pertrans->aggref->args) == 1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3003,
          "old_api": "linitial",
          "new_api": null,
          "old_text": "linitial(pertrans->aggref->args)",
          "new_text": null,
          "old_line_content": "\t\t\tsource_tle = (TargetEntry *) linitial(pertrans->aggref->args);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3009,
          "old_api": "OidIsValid",
          "new_api": null,
          "old_text": "OidIsValid(pertrans->deserialfn_oid)",
          "new_text": null,
          "old_line_content": "\t\t\tif (!OidIsValid(pertrans->deserialfn_oid))",
          "new_line_content": "\t\t\t * state before calling the combine function.",
          "content_same": false
        },
        {
          "line": 2500,
          "old_api": "foreach",
          "new_api": null,
          "old_text": "foreach(tlist, subplan->plan->targetlist)",
          "new_text": null,
          "old_line_content": "\t\t\tforeach(tlist, subplan->plan->targetlist)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3015,
          "old_api": "ExecInitExprRec",
          "new_api": null,
          "old_text": "ExecInitExprRec(source_tle->expr, state,\n\t\t\t\t\t\t\t\t&trans_fcinfo->args[argno + 1].value,\n\t\t\t\t\t\t\t\t&trans_fcinfo->args[argno + 1].isnull)",
          "new_text": null,
          "old_line_content": "\t\t\t\tExecInitExprRec(source_tle->expr, state,",
          "new_line_content": "\t\t\t\t * value",
          "content_same": false
        },
        {
          "line": 3024,
          "old_api": "ExecInitExprRec",
          "new_api": null,
          "old_text": "ExecInitExprRec(source_tle->expr, state,\n\t\t\t\t\t\t\t\t&ds_fcinfo->args[0].value,\n\t\t\t\t\t\t\t\t&ds_fcinfo->args[0].isnull)",
          "new_text": null,
          "old_line_content": "\t\t\t\tExecInitExprRec(source_tle->expr, state,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2515,
          "old_api": "ExecInitJunkFilter",
          "new_api": null,
          "old_text": "ExecInitJunkFilter(subplan->plan->targetlist,\n\t\t\t\t\t\t\t\t\t   ExecInitExtraTupleSlot(parent->state, NULL,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  &TTSOpsVirtual))",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tExecInitJunkFilter(subplan->plan->targetlist,",
          "new_line_content": "\t\t\t{",
          "content_same": false
        },
        {
          "line": 2516,
          "old_api": "ExecInitExtraTupleSlot",
          "new_api": null,
          "old_text": "ExecInitExtraTupleSlot(parent->state, NULL,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  &TTSOpsVirtual)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\t\t\t   ExecInitExtraTupleSlot(parent->state, NULL,",
          "new_line_content": "\t\t\t\tscratch->d.wholerow.junkFilter =",
          "content_same": false
        },
        {
          "line": 3029,
          "old_api": "PointerGetDatum",
          "new_api": null,
          "old_text": "PointerGetDatum(NULL)",
          "new_text": null,
          "old_line_content": "\t\t\t\tds_fcinfo->args[1].value = PointerGetDatum(NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2531,
          "old_api": "palloc0",
          "new_api": null,
          "old_text": "palloc0(sizeof(SubscriptingRefState))",
          "new_text": null,
          "old_line_content": "\tSubscriptingRefState *sbsrefstate = palloc0(sizeof(SubscriptingRefState));",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 3047,
          "old_api": "ExprEvalPushStep",
          "new_api": null,
          "old_text": "ExprEvalPushStep(state, &scratch)",
          "new_text": null,
          "old_line_content": "\t\t\t\tExprEvalPushStep(state, &scratch);",
          "new_line_content": "\t\t\t\tscratch.resnull = &trans_fcinfo->args[argno + 1].isnull;",
          "content_same": false
        },
        {
          "line": 3048,
          "old_api": "lappend_int",
          "new_api": null,
          "old_text": "lappend_int(adjust_bailout,\n\t\t\t\t\t\t\t\t\t\t\t state->steps_len - 1)",
          "new_text": null,
          "old_line_content": "\t\t\t\tadjust_bailout = lappend_int(adjust_bailout,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2539,
          "old_api": "get_typlen",
          "new_api": null,
          "old_text": "get_typlen(sbsref->refcontainertype)",
          "new_text": null,
          "old_line_content": "\tsbsrefstate->refattrlength = get_typlen(sbsref->refcontainertype);",
          "new_line_content": "\tsbsrefstate->isassignment = isAssignment;",
          "content_same": false
        },
        {
          "line": 2540,
          "old_api": "get_typlenbyvalalign",
          "new_api": null,
          "old_text": "get_typlenbyvalalign(sbsref->refelemtype,\n\t\t\t\t\t\t &sbsrefstate->refelemlength,\n\t\t\t\t\t\t &sbsrefstate->refelembyval,\n\t\t\t\t\t\t &sbsrefstate->refelemalign)",
          "new_text": null,
          "old_line_content": "\tget_typlenbyvalalign(sbsref->refelemtype,",
          "new_line_content": "\tsbsrefstate->refelemtype = sbsref->refelemtype;",
          "content_same": false
        },
        {
          "line": 2551,
          "old_api": "ExecInitExprRec",
          "new_api": null,
          "old_text": "ExecInitExprRec(sbsref->refexpr, state, resv, resnull)",
          "new_text": null,
          "old_line_content": "\tExecInitExprRec(sbsref->refexpr, state, resv, resnull);",
          "new_line_content": "\t * pushed last.",
          "content_same": false
        },
        {
          "line": 3064,
          "old_api": "foreach",
          "new_api": null,
          "old_text": "foreach(arg, pertrans->aggref->args)",
          "new_text": null,
          "old_line_content": "\t\t\tforeach(arg, pertrans->aggref->args)",
          "new_line_content": "\t\t\tstrictargs = trans_fcinfo->args + 1;",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 24,
      "total_additions": 109,
      "total_deletions": 107,
      "total_api_changes": 240
    },
    "non_api_changes": {
      "has_non_api_changes": false,
      "evidence": {
        "total_diff_lines": 2,
        "api_related_lines": 240,
        "non_api_lines": 0,
        "non_api_line_numbers": []
      }
    },
    "api_calls_before": 516,
    "api_calls_after": 518,
    "diff_info": {
      "added_lines": 2,
      "removed_lines": 0,
      "total_diff_lines": 21
    }
  }
}
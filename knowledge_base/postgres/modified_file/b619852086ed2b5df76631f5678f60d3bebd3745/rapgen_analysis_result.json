{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/postgres/modified_file/b619852086ed2b5df76631f5678f60d3bebd3745",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/postgres/modified_file/b619852086ed2b5df76631f5678f60d3bebd3745/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/postgres/modified_file/b619852086ed2b5df76631f5678f60d3bebd3745/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/postgres/modified_file/b619852086ed2b5df76631f5678f60d3bebd3745/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 651,
          "old_api": "ereport",
          "new_api": "OpenPipeStream",
          "old_text": "ereport(ERROR,\n\t\t\t\t\t\t(errcode_for_file_access(),\n\t\t\t\t\t\t errmsg(\"could not execute command \\\"%s\\\": %m\",\n\t\t\t\t\t\t\t\tcstate->filename)))",
          "new_text": "OpenPipeStream(cstate->filename, PG_BINARY_W)",
          "old_line_content": "\t\t\t\tereport(ERROR,",
          "new_line_content": "\t\t\tcstate->copy_file = OpenPipeStream(cstate->filename, PG_BINARY_W);",
          "content_same": false
        },
        {
          "line": 653,
          "old_api": "errmsg",
          "new_api": "ereport",
          "old_text": "errmsg(\"could not execute command \\\"%s\\\": %m\",\n\t\t\t\t\t\t\t\tcstate->filename)",
          "new_text": "ereport(ERROR,\n\t\t\t\t\t\t(errcode_for_file_access(),\n\t\t\t\t\t\t errmsg(\"could not execute command \\\"%s\\\": %m\",\n\t\t\t\t\t\t\t\tcstate->filename)))",
          "old_line_content": "\t\t\t\t\t\t errmsg(\"could not execute command \\\"%s\\\": %m\",",
          "new_line_content": "\t\t\t\tereport(ERROR,",
          "content_same": false
        },
        {
          "line": 669,
          "old_api": "errcode",
          "new_api": "is_absolute_path",
          "old_text": "errcode(ERRCODE_INVALID_NAME)",
          "new_text": "is_absolute_path(filename)",
          "old_line_content": "\t\t\t\t\t\t(errcode(ERRCODE_INVALID_NAME),",
          "new_line_content": "\t\t\tif (!is_absolute_path(filename))",
          "content_same": false
        },
        {
          "line": 670,
          "old_api": "errmsg",
          "new_api": "ereport",
          "old_text": "errmsg(\"relative path not allowed for COPY to file\")",
          "new_text": "ereport(ERROR,\n\t\t\t\t\t\t(errcode(ERRCODE_INVALID_NAME),\n\t\t\t\t\t\t errmsg(\"relative path not allowed for COPY to file\")))",
          "old_line_content": "\t\t\t\t\t\t errmsg(\"relative path not allowed for COPY to file\")));",
          "new_line_content": "\t\t\t\tereport(ERROR,",
          "content_same": false
        },
        {
          "line": 672,
          "old_api": "umask",
          "new_api": "errmsg",
          "old_text": "umask(S_IWGRP | S_IWOTH)",
          "new_text": "errmsg(\"relative path not allowed for COPY to file\")",
          "old_line_content": "\t\t\toumask = umask(S_IWGRP | S_IWOTH);",
          "new_line_content": "\t\t\t\t\t\t errmsg(\"relative path not allowed for COPY to file\")));",
          "content_same": false
        },
        {
          "line": 675,
          "old_api": "AllocateFile",
          "new_api": "PG_TRY",
          "old_text": "AllocateFile(cstate->filename, PG_BINARY_W)",
          "new_text": "PG_TRY()",
          "old_line_content": "\t\t\t\tcstate->copy_file = AllocateFile(cstate->filename, PG_BINARY_W);",
          "new_line_content": "\t\t\tPG_TRY();",
          "content_same": false
        },
        {
          "line": 677,
          "old_api": "PG_FINALLY",
          "new_api": "AllocateFile",
          "old_text": "PG_FINALLY()",
          "new_text": "AllocateFile(cstate->filename, PG_BINARY_W)",
          "old_line_content": "\t\t\tPG_FINALLY();",
          "new_line_content": "\t\t\t\tcstate->copy_file = AllocateFile(cstate->filename, PG_BINARY_W);",
          "content_same": false
        },
        {
          "line": 679,
          "old_api": "umask",
          "new_api": "PG_FINALLY",
          "old_text": "umask(oumask)",
          "new_text": "PG_FINALLY()",
          "old_line_content": "\t\t\t\tumask(oumask);",
          "new_line_content": "\t\t\tPG_FINALLY();",
          "content_same": false
        },
        {
          "line": 681,
          "old_api": "PG_END_TRY",
          "new_api": "umask",
          "old_text": "PG_END_TRY()",
          "new_text": "umask(oumask)",
          "old_line_content": "\t\t\tPG_END_TRY();",
          "new_line_content": "\t\t\t\tumask(oumask);",
          "content_same": false
        },
        {
          "line": 689,
          "old_api": "errmsg",
          "new_api": "ereport",
          "old_text": "errmsg(\"could not open file \\\"%s\\\" for writing: %m\",\n\t\t\t\t\t\t\t\tcstate->filename)",
          "new_text": "ereport(ERROR,\n\t\t\t\t\t\t(errcode_for_file_access(),\n\t\t\t\t\t\t errmsg(\"could not open file \\\"%s\\\" for writing: %m\",\n\t\t\t\t\t\t\t\tcstate->filename),\n\t\t\t\t\t\t (save_errno == ENOENT || save_errno == EACCES) ?\n\t\t\t\t\t\t errhint(\"COPY TO instructs the PostgreSQL server process to write a file. \"\n\t\t\t\t\t\t\t\t \"You may want a client-side facility such as psql's \\\\copy.\") : 0))",
          "old_line_content": "\t\t\t\t\t\t errmsg(\"could not open file \\\"%s\\\" for writing: %m\",",
          "new_line_content": "\t\t\t\tereport(ERROR,",
          "content_same": false
        },
        {
          "line": 698,
          "old_api": "errcode_for_file_access",
          "new_api": "fileno",
          "old_text": "errcode_for_file_access()",
          "new_text": "fileno(cstate->copy_file)",
          "old_line_content": "\t\t\t\t\t\t(errcode_for_file_access(),",
          "new_line_content": "\t\t\tif (fstat(fileno(cstate->copy_file), &st))",
          "content_same": false
        },
        {
          "line": 699,
          "old_api": "errmsg",
          "new_api": "ereport",
          "old_text": "errmsg(\"could not stat file \\\"%s\\\": %m\",\n\t\t\t\t\t\t\t\tcstate->filename)",
          "new_text": "ereport(ERROR,\n\t\t\t\t\t\t(errcode_for_file_access(),\n\t\t\t\t\t\t errmsg(\"could not stat file \\\"%s\\\": %m\",\n\t\t\t\t\t\t\t\tcstate->filename)))",
          "old_line_content": "\t\t\t\t\t\t errmsg(\"could not stat file \\\"%s\\\": %m\",",
          "new_line_content": "\t\t\t\tereport(ERROR,",
          "content_same": false
        },
        {
          "line": 704,
          "old_api": "errcode",
          "new_api": "S_ISDIR",
          "old_text": "errcode(ERRCODE_WRONG_OBJECT_TYPE)",
          "new_text": "S_ISDIR(st.st_mode)",
          "old_line_content": "\t\t\t\t\t\t(errcode(ERRCODE_WRONG_OBJECT_TYPE),",
          "new_line_content": "\t\t\tif (S_ISDIR(st.st_mode))",
          "content_same": false
        },
        {
          "line": 705,
          "old_api": "errmsg",
          "new_api": "ereport",
          "old_text": "errmsg(\"\\\"%s\\\" is a directory\", cstate->filename)",
          "new_text": "ereport(ERROR,\n\t\t\t\t\t\t(errcode(ERRCODE_WRONG_OBJECT_TYPE),\n\t\t\t\t\t\t errmsg(\"\\\"%s\\\" is a directory\", cstate->filename)))",
          "old_line_content": "\t\t\t\t\t\t errmsg(\"\\\"%s\\\" is a directory\", cstate->filename)));",
          "new_line_content": "\t\t\t\tereport(ERROR,",
          "content_same": false
        },
        {
          "line": 712,
          "old_api": "pgstat_progress_update_multi_param",
          "new_api": "pgstat_progress_start_command",
          "old_text": "pgstat_progress_update_multi_param(2, progress_cols, progress_vals)",
          "new_text": "pgstat_progress_start_command(PROGRESS_COMMAND_COPY,\n\t\t\t\t\t\t\t\t  cstate->rel ? RelationGetRelid(cstate->rel) : InvalidOid)",
          "old_line_content": "\tpgstat_progress_update_multi_param(2, progress_cols, progress_vals);",
          "new_line_content": "\tpgstat_progress_start_command(PROGRESS_COMMAND_COPY,",
          "content_same": false
        },
        {
          "line": 732,
          "old_api": "FreeQueryDesc",
          "new_api": "ExecutorFinish",
          "old_text": "FreeQueryDesc(cstate->queryDesc)",
          "new_text": "ExecutorFinish(cstate->queryDesc)",
          "old_line_content": "\t\tFreeQueryDesc(cstate->queryDesc);",
          "new_line_content": "\t\tExecutorFinish(cstate->queryDesc);",
          "content_same": false
        },
        {
          "line": 733,
          "old_api": "PopActiveSnapshot",
          "new_api": "ExecutorEnd",
          "old_text": "PopActiveSnapshot()",
          "new_text": "ExecutorEnd(cstate->queryDesc)",
          "old_line_content": "\t\tPopActiveSnapshot();",
          "new_line_content": "\t\tExecutorEnd(cstate->queryDesc);",
          "content_same": false
        },
        {
          "line": 772,
          "old_api": "lfirst_int",
          "new_api": "foreach",
          "old_text": "lfirst_int(cur)",
          "new_text": "foreach(cur, cstate->attnumlist)",
          "old_line_content": "\t\tint\t\t\tattnum = lfirst_int(cur);",
          "new_line_content": "\tforeach(cur, cstate->attnumlist)",
          "content_same": false
        },
        {
          "line": 830,
          "old_api": "lfirst_int",
          "new_api": "foreach",
          "old_text": "lfirst_int(cur)",
          "new_text": "foreach(cur, cstate->attnumlist)",
          "old_line_content": "\t\t\t\tint\t\t\tattnum = lfirst_int(cur);",
          "new_line_content": "\t\t\tforeach(cur, cstate->attnumlist)",
          "content_same": false
        },
        {
          "line": 842,
          "old_api": "CopyAttributeOutText",
          "new_api": "CopyAttributeOutCSV",
          "old_text": "CopyAttributeOutText(cstate, colname)",
          "new_text": "CopyAttributeOutCSV(cstate, colname, false)",
          "old_line_content": "\t\t\t\t\tCopyAttributeOutText(cstate, colname);",
          "new_line_content": "\t\t\t\t\tCopyAttributeOutCSV(cstate, colname, false);",
          "content_same": false
        },
        {
          "line": 860,
          "old_api": "CHECK_FOR_INTERRUPTS",
          "new_api": "table_scan_getnextslot",
          "old_text": "CHECK_FOR_INTERRUPTS()",
          "new_text": "table_scan_getnextslot(scandesc, ForwardScanDirection, slot)",
          "old_line_content": "\t\t\tCHECK_FOR_INTERRUPTS();",
          "new_line_content": "\t\twhile (table_scan_getnextslot(scandesc, ForwardScanDirection, slot))",
          "content_same": false
        },
        {
          "line": 891,
          "old_api": "CopySendEndOfRow",
          "new_api": "CopySendInt16",
          "old_text": "CopySendEndOfRow(cstate)",
          "new_text": "CopySendInt16(cstate, -1)",
          "old_line_content": "\t\tCopySendEndOfRow(cstate);",
          "new_line_content": "\t\tCopySendInt16(cstate, -1);",
          "content_same": false
        },
        {
          "line": 926,
          "old_api": "foreach",
          "new_api": "slot_getallattrs",
          "old_text": "foreach(cur, cstate->attnumlist)",
          "new_text": "slot_getallattrs(slot)",
          "old_line_content": "\tforeach(cur, cstate->attnumlist)",
          "new_line_content": "\tslot_getallattrs(slot);",
          "content_same": false
        },
        {
          "line": 928,
          "old_api": "lfirst_int",
          "new_api": "foreach",
          "old_text": "lfirst_int(cur)",
          "new_text": "foreach(cur, cstate->attnumlist)",
          "old_line_content": "\t\tint\t\t\tattnum = lfirst_int(cur);",
          "new_line_content": "\tforeach(cur, cstate->attnumlist)",
          "content_same": false
        },
        {
          "line": 944,
          "old_api": "CopySendInt32",
          "new_api": "CopySendString",
          "old_text": "CopySendInt32(cstate, -1)",
          "new_text": "CopySendString(cstate, cstate->opts.null_print_client)",
          "old_line_content": "\t\t\t\tCopySendInt32(cstate, -1);",
          "new_line_content": "\t\t\t\tCopySendString(cstate, cstate->opts.null_print_client);",
          "content_same": false
        },
        {
          "line": 964,
          "old_api": "VARSIZE",
          "new_api": "SendFunctionCall",
          "old_text": "VARSIZE(outputbytes)",
          "new_text": "SendFunctionCall(&out_functions[attnum - 1],\n\t\t\t\t\t\t\t\t\t\t\t   value)",
          "old_line_content": "\t\t\t\tCopySendInt32(cstate, VARSIZE(outputbytes) - VARHDRSZ);",
          "new_line_content": "\t\t\t\toutputbytes = SendFunctionCall(&out_functions[attnum - 1],",
          "content_same": false
        },
        {
          "line": 973,
          "old_api": "MemoryContextSwitchTo",
          "new_api": "CopySendEndOfRow",
          "old_text": "MemoryContextSwitchTo(oldcontext)",
          "new_text": "CopySendEndOfRow(cstate)",
          "old_line_content": "\tMemoryContextSwitchTo(oldcontext);",
          "new_line_content": "\tCopySendEndOfRow(cstate);",
          "content_same": false
        },
        {
          "line": 1057,
          "old_api": "CopySendChar",
          "new_api": "DUMPSOFAR",
          "old_text": "CopySendChar(cstate, c)",
          "new_text": "DUMPSOFAR()",
          "old_line_content": "\t\t\t\tCopySendChar(cstate, c);",
          "new_line_content": "\t\t\t\tDUMPSOFAR();",
          "content_same": false
        },
        {
          "line": 1117,
          "old_api": "CopySendChar",
          "new_api": "DUMPSOFAR",
          "old_text": "CopySendChar(cstate, c)",
          "new_text": "DUMPSOFAR()",
          "old_line_content": "\t\t\t\tCopySendChar(cstate, c);",
          "new_line_content": "\t\t\t\tDUMPSOFAR();",
          "content_same": false
        },
        {
          "line": 1212,
          "old_api": "CopySendChar",
          "new_api": "DUMPSOFAR",
          "old_text": "CopySendChar(cstate, quotec)",
          "new_text": "DUMPSOFAR()",
          "old_line_content": "\t\tCopySendChar(cstate, quotec);",
          "new_line_content": "\t\tDUMPSOFAR();",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 1058,
          "old_api": null,
          "new_api": "CopySendChar",
          "old_text": null,
          "new_text": "CopySendChar(cstate, '\\\\')",
          "old_line_content": "\t\t\t\tstart = ++ptr;\t/* do not include char in next run */",
          "new_line_content": "\t\t\t\tCopySendChar(cstate, '\\\\');",
          "content_same": false
        },
        {
          "line": 1059,
          "old_api": null,
          "new_api": "CopySendChar",
          "old_text": null,
          "new_text": "CopySendChar(cstate, c)",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\t\tCopySendChar(cstate, c);",
          "content_same": false
        },
        {
          "line": 1064,
          "old_api": null,
          "new_api": "DUMPSOFAR",
          "old_text": null,
          "new_text": "DUMPSOFAR()",
          "old_line_content": "\t\t\t\tstart = ptr++;\t/* we include char in next run */",
          "new_line_content": "\t\t\t\tDUMPSOFAR();",
          "content_same": false
        },
        {
          "line": 1065,
          "old_api": null,
          "new_api": "CopySendChar",
          "old_text": null,
          "new_text": "CopySendChar(cstate, '\\\\')",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\t\tCopySendChar(cstate, '\\\\');",
          "content_same": false
        },
        {
          "line": 1068,
          "old_api": null,
          "new_api": "IS_HIGHBIT_SET",
          "old_text": null,
          "new_text": "IS_HIGHBIT_SET(c)",
          "old_line_content": "\t\t\telse",
          "new_line_content": "\t\t\telse if (IS_HIGHBIT_SET(c))",
          "content_same": false
        },
        {
          "line": 1069,
          "old_api": null,
          "new_api": "pg_encoding_mblen",
          "old_text": null,
          "new_text": "pg_encoding_mblen(cstate->file_encoding, ptr)",
          "old_line_content": "\t\t\t\tptr++;",
          "new_line_content": "\t\t\t\tptr += pg_encoding_mblen(cstate->file_encoding, ptr);",
          "content_same": false
        },
        {
          "line": 1118,
          "old_api": null,
          "new_api": "CopySendChar",
          "old_text": null,
          "new_text": "CopySendChar(cstate, '\\\\')",
          "old_line_content": "\t\t\t\tstart = ++ptr;\t/* do not include char in next run */",
          "new_line_content": "\t\t\t\tCopySendChar(cstate, '\\\\');",
          "content_same": false
        },
        {
          "line": 1119,
          "old_api": null,
          "new_api": "CopySendChar",
          "old_text": null,
          "new_text": "CopySendChar(cstate, c)",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\t\tCopySendChar(cstate, c);",
          "content_same": false
        },
        {
          "line": 1124,
          "old_api": null,
          "new_api": "DUMPSOFAR",
          "old_text": null,
          "new_text": "DUMPSOFAR()",
          "old_line_content": "\t\t\t\tstart = ptr++;\t/* we include char in next run */",
          "new_line_content": "\t\t\t\tDUMPSOFAR();",
          "content_same": false
        },
        {
          "line": 1125,
          "old_api": null,
          "new_api": "CopySendChar",
          "old_text": null,
          "new_text": "CopySendChar(cstate, '\\\\')",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\t\tCopySendChar(cstate, '\\\\');",
          "content_same": false
        },
        {
          "line": 618,
          "old_api": null,
          "new_api": "GetDatabaseEncoding",
          "old_text": null,
          "new_text": "GetDatabaseEncoding()",
          "old_line_content": "\t */",
          "new_line_content": "\tif (cstate->file_encoding == GetDatabaseEncoding() ||",
          "content_same": false
        },
        {
          "line": 1133,
          "old_api": null,
          "new_api": "DUMPSOFAR",
          "old_text": null,
          "new_text": "DUMPSOFAR()",
          "old_line_content": "",
          "new_line_content": "\tDUMPSOFAR();",
          "content_same": false
        },
        {
          "line": 625,
          "old_api": null,
          "new_api": "PG_ENCODING_IS_CLIENT_ONLY",
          "old_text": null,
          "new_text": "PG_ENCODING_IS_CLIENT_ONLY(cstate->file_encoding)",
          "old_line_content": "\tcstate->copy_dest = COPY_FILE;\t/* default */",
          "new_line_content": "\tcstate->encoding_embeds_ascii = PG_ENCODING_IS_CLIENT_ONLY(cstate->file_encoding);",
          "content_same": false
        },
        {
          "line": 1150,
          "old_api": null,
          "new_api": "list_length",
          "old_text": null,
          "new_text": "list_length(cstate->attnumlist)",
          "old_line_content": "\t/* force quoting if it matches null_print (before conversion!) */",
          "new_line_content": "\tbool\t\tsingle_attr = (list_length(cstate->attnumlist) == 1);",
          "content_same": false
        },
        {
          "line": 639,
          "old_api": null,
          "new_api": "Assert",
          "old_text": null,
          "new_text": "Assert(!is_program)",
          "old_line_content": "\t\t\tcstate->copy_file = stdout;",
          "new_line_content": "\t\tAssert(!is_program);\t/* the grammar does not allow this */",
          "content_same": false
        },
        {
          "line": 1153,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(string, cstate->opts.null_print)",
          "old_line_content": "",
          "new_line_content": "\tif (!use_quote && strcmp(string, cstate->opts.null_print) == 0)",
          "content_same": false
        },
        {
          "line": 645,
          "old_api": null,
          "new_api": "pstrdup",
          "old_text": null,
          "new_text": "pstrdup(filename)",
          "old_line_content": "",
          "new_line_content": "\t\tcstate->filename = pstrdup(filename);",
          "content_same": false
        },
        {
          "line": 1157,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(string)",
          "old_line_content": "\t\tptr = string;",
          "new_line_content": "\t\tptr = pg_server_to_any(string, strlen(string), cstate->file_encoding);",
          "content_same": false
        },
        {
          "line": 654,
          "old_api": null,
          "new_api": "errcode_for_file_access",
          "old_text": null,
          "new_text": "errcode_for_file_access()",
          "old_line_content": "\t\t\t\t\t\t\t\tcstate->filename)));",
          "new_line_content": "\t\t\t\t\t\t(errcode_for_file_access(),",
          "content_same": false
        },
        {
          "line": 655,
          "old_api": null,
          "new_api": "errmsg",
          "old_text": null,
          "new_text": "errmsg(\"could not execute command \\\"%s\\\": %m\",\n\t\t\t\t\t\t\t\tcstate->filename)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\t\t\t\t errmsg(\"could not execute command \\\"%s\\\": %m\",",
          "content_same": false
        },
        {
          "line": 1170,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(ptr, \"\\\\.\")",
          "old_line_content": "\t\telse",
          "new_line_content": "\t\tif (single_attr && strcmp(ptr, \"\\\\.\") == 0)",
          "content_same": false
        },
        {
          "line": 671,
          "old_api": null,
          "new_api": "errcode",
          "old_text": null,
          "new_text": "errcode(ERRCODE_INVALID_NAME)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t\t\t(errcode(ERRCODE_INVALID_NAME),",
          "content_same": false
        },
        {
          "line": 1183,
          "old_api": null,
          "new_api": "IS_HIGHBIT_SET",
          "old_text": null,
          "new_text": "IS_HIGHBIT_SET(c)",
          "old_line_content": "\t\t\t\telse",
          "new_line_content": "\t\t\t\tif (IS_HIGHBIT_SET(c) && cstate->encoding_embeds_ascii)",
          "content_same": false
        },
        {
          "line": 1184,
          "old_api": null,
          "new_api": "pg_encoding_mblen",
          "old_text": null,
          "new_text": "pg_encoding_mblen(cstate->file_encoding, tptr)",
          "old_line_content": "\t\t\t\t\ttptr++;",
          "new_line_content": "\t\t\t\t\ttptr += pg_encoding_mblen(cstate->file_encoding, tptr);",
          "content_same": false
        },
        {
          "line": 674,
          "old_api": null,
          "new_api": "umask",
          "old_text": null,
          "new_text": "umask(S_IWGRP | S_IWOTH)",
          "old_line_content": "\t\t\t{",
          "new_line_content": "\t\t\toumask = umask(S_IWGRP | S_IWOTH);",
          "content_same": false
        },
        {
          "line": 1193,
          "old_api": null,
          "new_api": "CopySendChar",
          "old_text": null,
          "new_text": "CopySendChar(cstate, quotec)",
          "old_line_content": "\t\t/*",
          "new_line_content": "\t\tCopySendChar(cstate, quotec);",
          "content_same": false
        },
        {
          "line": 683,
          "old_api": null,
          "new_api": "PG_END_TRY",
          "old_text": null,
          "new_text": "PG_END_TRY()",
          "old_line_content": "\t\t\t{",
          "new_line_content": "\t\t\tPG_END_TRY();",
          "content_same": false
        },
        {
          "line": 690,
          "old_api": null,
          "new_api": "errcode_for_file_access",
          "old_text": null,
          "new_text": "errcode_for_file_access()",
          "old_line_content": "\t\t\t\t\t\t\t\tcstate->filename),",
          "new_line_content": "\t\t\t\t\t\t(errcode_for_file_access(),",
          "content_same": false
        },
        {
          "line": 691,
          "old_api": null,
          "new_api": "errmsg",
          "old_text": null,
          "new_text": "errmsg(\"could not open file \\\"%s\\\" for writing: %m\",\n\t\t\t\t\t\t\t\tcstate->filename)",
          "old_line_content": "\t\t\t\t\t\t (save_errno == ENOENT || save_errno == EACCES) ?",
          "new_line_content": "\t\t\t\t\t\t errmsg(\"could not open file \\\"%s\\\" for writing: %m\",",
          "content_same": false
        },
        {
          "line": 1203,
          "old_api": null,
          "new_api": "DUMPSOFAR",
          "old_text": null,
          "new_text": "DUMPSOFAR()",
          "old_line_content": "\t\t\t\tstart = ptr;\t/* we include char in next run */",
          "new_line_content": "\t\t\t\tDUMPSOFAR();",
          "content_same": false
        },
        {
          "line": 1204,
          "old_api": null,
          "new_api": "CopySendChar",
          "old_text": null,
          "new_text": "CopySendChar(cstate, escapec)",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\t\tCopySendChar(cstate, escapec);",
          "content_same": false
        },
        {
          "line": 694,
          "old_api": null,
          "new_api": "errhint",
          "old_text": null,
          "new_text": "errhint(\"COPY TO instructs the PostgreSQL server process to write a file. \"\n\t\t\t\t\t\t\t\t \"You may want a client-side facility such as psql's \\\\copy.\")",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\t\t\t\t errhint(\"COPY TO instructs the PostgreSQL server process to write a file. \"",
          "content_same": false
        },
        {
          "line": 1207,
          "old_api": null,
          "new_api": "IS_HIGHBIT_SET",
          "old_text": null,
          "new_text": "IS_HIGHBIT_SET(c)",
          "old_line_content": "\t\t\telse",
          "new_line_content": "\t\t\tif (IS_HIGHBIT_SET(c) && cstate->encoding_embeds_ascii)",
          "content_same": false
        },
        {
          "line": 1208,
          "old_api": null,
          "new_api": "pg_encoding_mblen",
          "old_text": null,
          "new_text": "pg_encoding_mblen(cstate->file_encoding, ptr)",
          "old_line_content": "\t\t\t\tptr++;",
          "new_line_content": "\t\t\t\tptr += pg_encoding_mblen(cstate->file_encoding, ptr);",
          "content_same": false
        },
        {
          "line": 700,
          "old_api": null,
          "new_api": "errcode_for_file_access",
          "old_text": null,
          "new_text": "errcode_for_file_access()",
          "old_line_content": "\t\t\t\t\t\t\t\tcstate->filename)));",
          "new_line_content": "\t\t\t\t\t\t(errcode_for_file_access(),",
          "content_same": false
        },
        {
          "line": 701,
          "old_api": null,
          "new_api": "errmsg",
          "old_text": null,
          "new_text": "errmsg(\"could not stat file \\\"%s\\\": %m\",\n\t\t\t\t\t\t\t\tcstate->filename)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t\t\t errmsg(\"could not stat file \\\"%s\\\": %m\",",
          "content_same": false
        },
        {
          "line": 1214,
          "old_api": null,
          "new_api": "CopySendChar",
          "old_text": null,
          "new_text": "CopySendChar(cstate, quotec)",
          "old_line_content": "\telse",
          "new_line_content": "\t\tCopySendChar(cstate, quotec);",
          "content_same": false
        },
        {
          "line": 706,
          "old_api": null,
          "new_api": "errcode",
          "old_text": null,
          "new_text": "errcode(ERRCODE_WRONG_OBJECT_TYPE)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\t\t\t\t(errcode(ERRCODE_WRONG_OBJECT_TYPE),",
          "content_same": false
        },
        {
          "line": 707,
          "old_api": null,
          "new_api": "errmsg",
          "old_text": null,
          "new_text": "errmsg(\"\\\"%s\\\" is a directory\", cstate->filename)",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\t\t\t\t errmsg(\"\\\"%s\\\" is a directory\", cstate->filename)));",
          "content_same": false
        },
        {
          "line": 1219,
          "old_api": null,
          "new_api": "CopySendString",
          "old_text": null,
          "new_text": "CopySendString(cstate, ptr)",
          "old_line_content": "}",
          "new_line_content": "\t\tCopySendString(cstate, ptr);",
          "content_same": false
        },
        {
          "line": 713,
          "old_api": null,
          "new_api": "RelationGetRelid",
          "old_text": null,
          "new_text": "RelationGetRelid(cstate->rel)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t\t\t\t\t  cstate->rel ? RelationGetRelid(cstate->rel) : InvalidOid);",
          "content_same": false
        },
        {
          "line": 714,
          "old_api": null,
          "new_api": "pgstat_progress_update_multi_param",
          "old_text": null,
          "new_text": "pgstat_progress_update_multi_param(2, progress_cols, progress_vals)",
          "old_line_content": "\tcstate->bytes_processed = 0;",
          "new_line_content": "\tpgstat_progress_update_multi_param(2, progress_cols, progress_vals);",
          "content_same": false
        },
        {
          "line": 718,
          "old_api": null,
          "new_api": "MemoryContextSwitchTo",
          "old_text": null,
          "new_text": "MemoryContextSwitchTo(oldcontext)",
          "old_line_content": "\treturn cstate;",
          "new_line_content": "\tMemoryContextSwitchTo(oldcontext);",
          "content_same": false
        },
        {
          "line": 1242,
          "old_api": null,
          "new_api": "CopyOneRowTo",
          "old_text": null,
          "new_text": "CopyOneRowTo(cstate, slot)",
          "old_line_content": "\t/* Increment the number of processed tuples, and report the progress */",
          "new_line_content": "\tCopyOneRowTo(cstate, slot);",
          "content_same": false
        },
        {
          "line": 1245,
          "old_api": null,
          "new_api": "pgstat_progress_update_param",
          "old_text": null,
          "new_text": "pgstat_progress_update_param(PROGRESS_COPY_TUPLES_PROCESSED,\n\t\t\t\t\t\t\t\t ++myState->processed)",
          "old_line_content": "",
          "new_line_content": "\tpgstat_progress_update_param(PROGRESS_COPY_TUPLES_PROCESSED,",
          "content_same": false
        },
        {
          "line": 734,
          "old_api": null,
          "new_api": "FreeQueryDesc",
          "old_text": null,
          "new_text": "FreeQueryDesc(cstate->queryDesc)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tFreeQueryDesc(cstate->queryDesc);",
          "content_same": false
        },
        {
          "line": 735,
          "old_api": null,
          "new_api": "PopActiveSnapshot",
          "old_text": null,
          "new_text": "PopActiveSnapshot()",
          "old_line_content": "",
          "new_line_content": "\t\tPopActiveSnapshot();",
          "content_same": false
        },
        {
          "line": 739,
          "old_api": null,
          "new_api": "EndCopy",
          "old_text": null,
          "new_text": "EndCopy(cstate)",
          "old_line_content": "",
          "new_line_content": "\tEndCopy(cstate);",
          "content_same": false
        },
        {
          "line": 1266,
          "old_api": null,
          "new_api": "pfree",
          "old_text": null,
          "new_text": "pfree(self)",
          "old_line_content": "",
          "new_line_content": "\tpfree(self);",
          "content_same": false
        },
        {
          "line": 758,
          "old_api": null,
          "new_api": "SendCopyBegin",
          "old_text": null,
          "new_text": "SendCopyBegin(cstate)",
          "old_line_content": "\tif (cstate->rel)",
          "new_line_content": "\t\tSendCopyBegin(cstate);",
          "content_same": false
        },
        {
          "line": 761,
          "old_api": null,
          "new_api": "RelationGetDescr",
          "old_text": null,
          "new_text": "RelationGetDescr(cstate->rel)",
          "old_line_content": "\t\ttupDesc = cstate->queryDesc->tupDesc;",
          "new_line_content": "\t\ttupDesc = RelationGetDescr(cstate->rel);",
          "content_same": false
        },
        {
          "line": 1275,
          "old_api": null,
          "new_api": "palloc",
          "old_text": null,
          "new_text": "palloc(sizeof(DR_copy))",
          "old_line_content": "\tself->pub.receiveSlot = copy_dest_receive;",
          "new_line_content": "\tDR_copy    *self = (DR_copy *) palloc(sizeof(DR_copy));",
          "content_same": false
        },
        {
          "line": 768,
          "old_api": null,
          "new_api": "makeStringInfo",
          "old_text": null,
          "new_text": "makeStringInfo()",
          "old_line_content": "\t/* Get info about the columns we need to process. */",
          "new_line_content": "\tcstate->fe_msgbuf = makeStringInfo();",
          "content_same": false
        },
        {
          "line": 771,
          "old_api": null,
          "new_api": "palloc",
          "old_text": null,
          "new_text": "palloc(num_phys_attrs * sizeof(FmgrInfo))",
          "old_line_content": "\t{",
          "new_line_content": "\tcstate->out_functions = (FmgrInfo *) palloc(num_phys_attrs * sizeof(FmgrInfo));",
          "content_same": false
        },
        {
          "line": 774,
          "old_api": null,
          "new_api": "lfirst_int",
          "old_text": null,
          "new_text": "lfirst_int(cur)",
          "old_line_content": "\t\tbool\t\tisvarlena;",
          "new_line_content": "\t\tint\t\t\tattnum = lfirst_int(cur);",
          "content_same": false
        },
        {
          "line": 777,
          "old_api": null,
          "new_api": "TupleDescAttr",
          "old_text": null,
          "new_text": "TupleDescAttr(tupDesc, attnum - 1)",
          "old_line_content": "\t\tif (cstate->opts.binary)",
          "new_line_content": "\t\tForm_pg_attribute attr = TupleDescAttr(tupDesc, attnum - 1);",
          "content_same": false
        },
        {
          "line": 780,
          "old_api": null,
          "new_api": "getTypeBinaryOutputInfo",
          "old_text": null,
          "new_text": "getTypeBinaryOutputInfo(attr->atttypid,\n\t\t\t\t\t\t\t\t\t&out_func_oid,\n\t\t\t\t\t\t\t\t\t&isvarlena)",
          "old_line_content": "\t\t\t\t\t\t\t\t\t&isvarlena);",
          "new_line_content": "\t\t\tgetTypeBinaryOutputInfo(attr->atttypid,",
          "content_same": false
        },
        {
          "line": 784,
          "old_api": null,
          "new_api": "getTypeOutputInfo",
          "old_text": null,
          "new_text": "getTypeOutputInfo(attr->atttypid,\n\t\t\t\t\t\t\t  &out_func_oid,\n\t\t\t\t\t\t\t  &isvarlena)",
          "old_line_content": "\t\t\t\t\t\t\t  &isvarlena);",
          "new_line_content": "\t\t\tgetTypeOutputInfo(attr->atttypid,",
          "content_same": false
        },
        {
          "line": 787,
          "old_api": null,
          "new_api": "fmgr_info",
          "old_text": null,
          "new_text": "fmgr_info(out_func_oid, &cstate->out_functions[attnum - 1])",
          "old_line_content": "",
          "new_line_content": "\t\tfmgr_info(out_func_oid, &cstate->out_functions[attnum - 1]);",
          "content_same": false
        },
        {
          "line": 796,
          "old_api": null,
          "new_api": "AllocSetContextCreate",
          "old_text": null,
          "new_text": "AllocSetContextCreate(CurrentMemoryContext,\n\t\t\t\t\t\t\t\t\t\t\t   \"COPY TO\",\n\t\t\t\t\t\t\t\t\t\t\t   ALLOCSET_DEFAULT_SIZES)",
          "old_line_content": "\t\t\t\t\t\t\t\t\t\t\t   ALLOCSET_DEFAULT_SIZES);",
          "new_line_content": "\tcstate->rowcontext = AllocSetContextCreate(CurrentMemoryContext,",
          "content_same": false
        },
        {
          "line": 806,
          "old_api": null,
          "new_api": "CopySendData",
          "old_text": null,
          "new_text": "CopySendData(cstate, BinarySignature, 11)",
          "old_line_content": "\t\ttmp = 0;",
          "new_line_content": "\t\tCopySendData(cstate, BinarySignature, 11);",
          "content_same": false
        },
        {
          "line": 809,
          "old_api": null,
          "new_api": "CopySendInt32",
          "old_text": null,
          "new_text": "CopySendInt32(cstate, tmp)",
          "old_line_content": "\t\ttmp = 0;",
          "new_line_content": "\t\tCopySendInt32(cstate, tmp);",
          "content_same": false
        },
        {
          "line": 812,
          "old_api": null,
          "new_api": "CopySendInt32",
          "old_text": null,
          "new_text": "CopySendInt32(cstate, tmp)",
          "old_line_content": "\telse",
          "new_line_content": "\t\tCopySendInt32(cstate, tmp);",
          "content_same": false
        },
        {
          "line": 821,
          "old_api": null,
          "new_api": "pg_server_to_any",
          "old_text": null,
          "new_text": "pg_server_to_any(cstate->opts.null_print,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  cstate->opts.null_print_len,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  cstate->file_encoding)",
          "old_line_content": "\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  cstate->file_encoding);",
          "new_line_content": "\t\t\tcstate->opts.null_print_client = pg_server_to_any(cstate->opts.null_print,",
          "content_same": false
        },
        {
          "line": 832,
          "old_api": null,
          "new_api": "lfirst_int",
          "old_text": null,
          "new_text": "lfirst_int(cur)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\tint\t\t\tattnum = lfirst_int(cur);",
          "content_same": false
        },
        {
          "line": 836,
          "old_api": null,
          "new_api": "CopySendChar",
          "old_text": null,
          "new_text": "CopySendChar(cstate, cstate->opts.delim[0])",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t\tCopySendChar(cstate, cstate->opts.delim[0]);",
          "content_same": false
        },
        {
          "line": 839,
          "old_api": null,
          "new_api": "TupleDescAttr",
          "old_text": null,
          "new_text": "TupleDescAttr(tupDesc, attnum - 1)",
          "old_line_content": "\t\t\t\tif (cstate->opts.csv_mode)",
          "new_line_content": "\t\t\t\tcolname = NameStr(TupleDescAttr(tupDesc, attnum - 1)->attname);",
          "content_same": false
        },
        {
          "line": 844,
          "old_api": null,
          "new_api": "CopyAttributeOutText",
          "old_text": null,
          "new_text": "CopyAttributeOutText(cstate, colname)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t\tCopyAttributeOutText(cstate, colname);",
          "content_same": false
        },
        {
          "line": 847,
          "old_api": null,
          "new_api": "CopySendEndOfRow",
          "old_text": null,
          "new_text": "CopySendEndOfRow(cstate)",
          "old_line_content": "\t}",
          "new_line_content": "\t\t\tCopySendEndOfRow(cstate);",
          "content_same": false
        },
        {
          "line": 856,
          "old_api": null,
          "new_api": "GetActiveSnapshot",
          "old_text": null,
          "new_text": "GetActiveSnapshot()",
          "old_line_content": "",
          "new_line_content": "\t\tscandesc = table_beginscan(cstate->rel, GetActiveSnapshot(), 0, NULL);",
          "content_same": false
        },
        {
          "line": 857,
          "old_api": null,
          "new_api": "table_slot_create",
          "old_text": null,
          "new_text": "table_slot_create(cstate->rel, NULL)",
          "old_line_content": "\t\tprocessed = 0;",
          "new_line_content": "\t\tslot = table_slot_create(cstate->rel, NULL);",
          "content_same": false
        },
        {
          "line": 862,
          "old_api": null,
          "new_api": "CHECK_FOR_INTERRUPTS",
          "old_text": null,
          "new_text": "CHECK_FOR_INTERRUPTS()",
          "old_line_content": "\t\t\t/* Deconstruct the tuple ... */",
          "new_line_content": "\t\t\tCHECK_FOR_INTERRUPTS();",
          "content_same": false
        },
        {
          "line": 865,
          "old_api": null,
          "new_api": "slot_getallattrs",
          "old_text": null,
          "new_text": "slot_getallattrs(slot)",
          "old_line_content": "\t\t\t/* Format and send the data */",
          "new_line_content": "\t\t\tslot_getallattrs(slot);",
          "content_same": false
        },
        {
          "line": 868,
          "old_api": null,
          "new_api": "CopyOneRowTo",
          "old_text": null,
          "new_text": "CopyOneRowTo(cstate, slot)",
          "old_line_content": "\t\t\t/*",
          "new_line_content": "\t\t\tCopyOneRowTo(cstate, slot);",
          "content_same": false
        },
        {
          "line": 874,
          "old_api": null,
          "new_api": "pgstat_progress_update_param",
          "old_text": null,
          "new_text": "pgstat_progress_update_param(PROGRESS_COPY_TUPLES_PROCESSED,\n\t\t\t\t\t\t\t\t\t\t ++processed)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\tpgstat_progress_update_param(PROGRESS_COPY_TUPLES_PROCESSED,",
          "content_same": false
        },
        {
          "line": 878,
          "old_api": null,
          "new_api": "ExecDropSingleTupleTableSlot",
          "old_text": null,
          "new_text": "ExecDropSingleTupleTableSlot(slot)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tExecDropSingleTupleTableSlot(slot);",
          "content_same": false
        },
        {
          "line": 879,
          "old_api": null,
          "new_api": "table_endscan",
          "old_text": null,
          "new_text": "table_endscan(scandesc)",
          "old_line_content": "\telse",
          "new_line_content": "\t\ttable_endscan(scandesc);",
          "content_same": false
        },
        {
          "line": 884,
          "old_api": null,
          "new_api": "ExecutorRun",
          "old_text": null,
          "new_text": "ExecutorRun(cstate->queryDesc, ForwardScanDirection, 0, true)",
          "old_line_content": "\t}",
          "new_line_content": "\t\tExecutorRun(cstate->queryDesc, ForwardScanDirection, 0, true);",
          "content_same": false
        },
        {
          "line": 893,
          "old_api": null,
          "new_api": "CopySendEndOfRow",
          "old_text": null,
          "new_text": "CopySendEndOfRow(cstate)",
          "old_line_content": "",
          "new_line_content": "\t\tCopySendEndOfRow(cstate);",
          "content_same": false
        },
        {
          "line": 896,
          "old_api": null,
          "new_api": "MemoryContextDelete",
          "old_text": null,
          "new_text": "MemoryContextDelete(cstate->rowcontext)",
          "old_line_content": "\tif (fe_copy)",
          "new_line_content": "\tMemoryContextDelete(cstate->rowcontext);",
          "content_same": false
        },
        {
          "line": 899,
          "old_api": null,
          "new_api": "SendCopyEnd",
          "old_text": null,
          "new_text": "SendCopyEnd(cstate)",
          "old_line_content": "\treturn processed;",
          "new_line_content": "\t\tSendCopyEnd(cstate);",
          "content_same": false
        },
        {
          "line": 916,
          "old_api": null,
          "new_api": "MemoryContextReset",
          "old_text": null,
          "new_text": "MemoryContextReset(cstate->rowcontext)",
          "old_line_content": "",
          "new_line_content": "\tMemoryContextReset(cstate->rowcontext);",
          "content_same": false
        },
        {
          "line": 917,
          "old_api": null,
          "new_api": "MemoryContextSwitchTo",
          "old_text": null,
          "new_text": "MemoryContextSwitchTo(cstate->rowcontext)",
          "old_line_content": "\tif (cstate->opts.binary)",
          "new_line_content": "\toldcontext = MemoryContextSwitchTo(cstate->rowcontext);",
          "content_same": false
        },
        {
          "line": 922,
          "old_api": null,
          "new_api": "list_length",
          "old_text": null,
          "new_text": "list_length(cstate->attnumlist)",
          "old_line_content": "",
          "new_line_content": "\t\tCopySendInt16(cstate, list_length(cstate->attnumlist));",
          "content_same": false
        },
        {
          "line": 930,
          "old_api": null,
          "new_api": "lfirst_int",
          "old_text": null,
          "new_text": "lfirst_int(cur)",
          "old_line_content": "\t\tbool\t\tisnull = slot->tts_isnull[attnum - 1];",
          "new_line_content": "\t\tint\t\t\tattnum = lfirst_int(cur);",
          "content_same": false
        },
        {
          "line": 937,
          "old_api": null,
          "new_api": "CopySendChar",
          "old_text": null,
          "new_text": "CopySendChar(cstate, cstate->opts.delim[0])",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\t\tCopySendChar(cstate, cstate->opts.delim[0]);",
          "content_same": false
        },
        {
          "line": 946,
          "old_api": null,
          "new_api": "CopySendInt32",
          "old_text": null,
          "new_text": "CopySendInt32(cstate, -1)",
          "old_line_content": "\t\telse",
          "new_line_content": "\t\t\t\tCopySendInt32(cstate, -1);",
          "content_same": false
        },
        {
          "line": 952,
          "old_api": null,
          "new_api": "OutputFunctionCall",
          "old_text": null,
          "new_text": "OutputFunctionCall(&out_functions[attnum - 1],\n\t\t\t\t\t\t\t\t\t\t\tvalue)",
          "old_line_content": "\t\t\t\tif (cstate->opts.csv_mode)",
          "new_line_content": "\t\t\t\tstring = OutputFunctionCall(&out_functions[attnum - 1],",
          "content_same": false
        },
        {
          "line": 955,
          "old_api": null,
          "new_api": "CopyAttributeOutCSV",
          "old_text": null,
          "new_text": "CopyAttributeOutCSV(cstate, string,\n\t\t\t\t\t\t\t\t\t\tcstate->opts.force_quote_flags[attnum - 1])",
          "old_line_content": "\t\t\t\telse",
          "new_line_content": "\t\t\t\t\tCopyAttributeOutCSV(cstate, string,",
          "content_same": false
        },
        {
          "line": 958,
          "old_api": null,
          "new_api": "CopyAttributeOutText",
          "old_text": null,
          "new_text": "CopyAttributeOutText(cstate, string)",
          "old_line_content": "\t\t\telse",
          "new_line_content": "\t\t\t\t\tCopyAttributeOutText(cstate, string);",
          "content_same": false
        },
        {
          "line": 967,
          "old_api": null,
          "new_api": "VARDATA",
          "old_text": null,
          "new_text": "VARDATA(outputbytes)",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\t\tCopySendData(cstate, VARDATA(outputbytes),",
          "content_same": false
        },
        {
          "line": 968,
          "old_api": null,
          "new_api": "VARSIZE",
          "old_text": null,
          "new_text": "VARSIZE(outputbytes)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\t\t\t\t\t\t VARSIZE(outputbytes) - VARHDRSZ);",
          "content_same": false
        },
        {
          "line": 975,
          "old_api": null,
          "new_api": "MemoryContextSwitchTo",
          "old_text": null,
          "new_text": "MemoryContextSwitchTo(oldcontext)",
          "old_line_content": "",
          "new_line_content": "\tMemoryContextSwitchTo(oldcontext);",
          "content_same": false
        },
        {
          "line": 996,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(string)",
          "old_line_content": "\t\tptr = string;",
          "new_line_content": "\t\tptr = pg_server_to_any(string, strlen(string), cstate->file_encoding);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 1055,
          "old_api": "DUMPSOFAR",
          "new_api": null,
          "old_text": "DUMPSOFAR()",
          "new_text": null,
          "old_line_content": "\t\t\t\tDUMPSOFAR();",
          "new_line_content": "\t\t\t\t}",
          "content_same": false
        },
        {
          "line": 1056,
          "old_api": "CopySendChar",
          "new_api": null,
          "old_text": "CopySendChar(cstate, '\\\\')",
          "new_text": null,
          "old_line_content": "\t\t\t\tCopySendChar(cstate, '\\\\');",
          "new_line_content": "\t\t\t\t/* if we get here, we need to convert the control char */",
          "content_same": false
        },
        {
          "line": 1062,
          "old_api": "DUMPSOFAR",
          "new_api": null,
          "old_text": "DUMPSOFAR()",
          "new_text": null,
          "old_line_content": "\t\t\t\tDUMPSOFAR();",
          "new_line_content": "\t\t\telse if (c == '\\\\' || c == delimc)",
          "content_same": false
        },
        {
          "line": 1063,
          "old_api": "CopySendChar",
          "new_api": null,
          "old_text": "CopySendChar(cstate, '\\\\')",
          "new_text": null,
          "old_line_content": "\t\t\t\tCopySendChar(cstate, '\\\\');",
          "new_line_content": "\t\t\t{",
          "content_same": false
        },
        {
          "line": 1066,
          "old_api": "IS_HIGHBIT_SET",
          "new_api": null,
          "old_text": "IS_HIGHBIT_SET(c)",
          "new_text": null,
          "old_line_content": "\t\t\telse if (IS_HIGHBIT_SET(c))",
          "new_line_content": "\t\t\t\tstart = ptr++;\t/* we include char in next run */",
          "content_same": false
        },
        {
          "line": 1067,
          "old_api": "pg_encoding_mblen",
          "new_api": null,
          "old_text": "pg_encoding_mblen(cstate->file_encoding, ptr)",
          "new_text": null,
          "old_line_content": "\t\t\t\tptr += pg_encoding_mblen(cstate->file_encoding, ptr);",
          "new_line_content": "\t\t\t}",
          "content_same": false
        },
        {
          "line": 1115,
          "old_api": "DUMPSOFAR",
          "new_api": null,
          "old_text": "DUMPSOFAR()",
          "new_text": null,
          "old_line_content": "\t\t\t\tDUMPSOFAR();",
          "new_line_content": "\t\t\t\t}",
          "content_same": false
        },
        {
          "line": 1116,
          "old_api": "CopySendChar",
          "new_api": null,
          "old_text": "CopySendChar(cstate, '\\\\')",
          "new_text": null,
          "old_line_content": "\t\t\t\tCopySendChar(cstate, '\\\\');",
          "new_line_content": "\t\t\t\t/* if we get here, we need to convert the control char */",
          "content_same": false
        },
        {
          "line": 1122,
          "old_api": "DUMPSOFAR",
          "new_api": null,
          "old_text": "DUMPSOFAR()",
          "new_text": null,
          "old_line_content": "\t\t\t\tDUMPSOFAR();",
          "new_line_content": "\t\t\telse if (c == '\\\\' || c == delimc)",
          "content_same": false
        },
        {
          "line": 1123,
          "old_api": "CopySendChar",
          "new_api": null,
          "old_text": "CopySendChar(cstate, '\\\\')",
          "new_text": null,
          "old_line_content": "\t\t\t\tCopySendChar(cstate, '\\\\');",
          "new_line_content": "\t\t\t{",
          "content_same": false
        },
        {
          "line": 1131,
          "old_api": "DUMPSOFAR",
          "new_api": null,
          "old_text": "DUMPSOFAR()",
          "new_text": null,
          "old_line_content": "\tDUMPSOFAR();",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 620,
          "old_api": "GetDatabaseEncoding",
          "new_api": null,
          "old_text": "GetDatabaseEncoding()",
          "new_text": null,
          "old_line_content": "\t\t(cstate->file_encoding != GetDatabaseEncoding() ||",
          "new_line_content": "\t\tcstate->need_transcoding = false;",
          "content_same": false
        },
        {
          "line": 621,
          "old_api": "pg_database_encoding_max_length",
          "new_api": null,
          "old_text": "pg_database_encoding_max_length()",
          "new_text": null,
          "old_line_content": "\t\t pg_database_encoding_max_length() > 1);",
          "new_line_content": "\telse",
          "content_same": false
        },
        {
          "line": 623,
          "old_api": "PG_ENCODING_IS_CLIENT_ONLY",
          "new_api": null,
          "old_text": "PG_ENCODING_IS_CLIENT_ONLY(cstate->file_encoding)",
          "new_text": null,
          "old_line_content": "\tcstate->encoding_embeds_ascii = PG_ENCODING_IS_CLIENT_ONLY(cstate->file_encoding);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1148,
          "old_api": "list_length",
          "new_api": null,
          "old_text": "list_length(cstate->attnumlist)",
          "new_text": null,
          "old_line_content": "\tbool\t\tsingle_attr = (list_length(cstate->attnumlist) == 1);",
          "new_line_content": "\tchar\t\tquotec = cstate->opts.quote[0];",
          "content_same": false
        },
        {
          "line": 637,
          "old_api": "Assert",
          "new_api": null,
          "old_text": "Assert(!is_program)",
          "new_text": null,
          "old_line_content": "\t\tAssert(!is_program);\t/* the grammar does not allow this */",
          "new_line_content": "\t\tprogress_vals[1] = PROGRESS_COPY_TYPE_PIPE;",
          "content_same": false
        },
        {
          "line": 1151,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(string, cstate->opts.null_print)",
          "new_text": null,
          "old_line_content": "\tif (!use_quote && strcmp(string, cstate->opts.null_print) == 0)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 643,
          "old_api": "pstrdup",
          "new_api": null,
          "old_text": "pstrdup(filename)",
          "new_text": null,
          "old_line_content": "\t\tcstate->filename = pstrdup(filename);",
          "new_line_content": "\telse",
          "content_same": false
        },
        {
          "line": 1155,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(string)",
          "new_text": null,
          "old_line_content": "\t\tptr = pg_server_to_any(string, strlen(string), cstate->file_encoding);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 649,
          "old_api": "OpenPipeStream",
          "new_api": null,
          "old_text": "OpenPipeStream(cstate->filename, PG_BINARY_W)",
          "new_text": null,
          "old_line_content": "\t\t\tcstate->copy_file = OpenPipeStream(cstate->filename, PG_BINARY_W);",
          "new_line_content": "\t\t{",
          "content_same": false
        },
        {
          "line": 652,
          "old_api": "errcode_for_file_access",
          "new_api": null,
          "old_text": "errcode_for_file_access()",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t(errcode_for_file_access(),",
          "new_line_content": "\t\t\tif (cstate->copy_file == NULL)",
          "content_same": false
        },
        {
          "line": 1168,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(ptr, \"\\\\.\")",
          "new_text": null,
          "old_line_content": "\t\tif (single_attr && strcmp(ptr, \"\\\\.\") == 0)",
          "new_line_content": "\t\t * line so it is not interpreted as the end-of-data marker.",
          "content_same": false
        },
        {
          "line": 667,
          "old_api": "is_absolute_path",
          "new_api": null,
          "old_text": "is_absolute_path(filename)",
          "new_text": null,
          "old_line_content": "\t\t\tif (!is_absolute_path(filename))",
          "new_line_content": "\t\t\t * the foot by overwriting a database file ...",
          "content_same": false
        },
        {
          "line": 668,
          "old_api": "ereport",
          "new_api": null,
          "old_text": "ereport(ERROR,\n\t\t\t\t\t\t(errcode(ERRCODE_INVALID_NAME),\n\t\t\t\t\t\t errmsg(\"relative path not allowed for COPY to file\")))",
          "new_text": null,
          "old_line_content": "\t\t\t\tereport(ERROR,",
          "new_line_content": "\t\t\t */",
          "content_same": false
        },
        {
          "line": 1181,
          "old_api": "IS_HIGHBIT_SET",
          "new_api": null,
          "old_text": "IS_HIGHBIT_SET(c)",
          "new_text": null,
          "old_line_content": "\t\t\t\tif (IS_HIGHBIT_SET(c) && cstate->encoding_embeds_ascii)",
          "new_line_content": "\t\t\t\t\tbreak;",
          "content_same": false
        },
        {
          "line": 1182,
          "old_api": "pg_encoding_mblen",
          "new_api": null,
          "old_text": "pg_encoding_mblen(cstate->file_encoding, tptr)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\ttptr += pg_encoding_mblen(cstate->file_encoding, tptr);",
          "new_line_content": "\t\t\t\t}",
          "content_same": false
        },
        {
          "line": 673,
          "old_api": "PG_TRY",
          "new_api": null,
          "old_text": "PG_TRY()",
          "new_text": null,
          "old_line_content": "\t\t\tPG_TRY();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1191,
          "old_api": "CopySendChar",
          "new_api": null,
          "old_text": "CopySendChar(cstate, quotec)",
          "new_text": null,
          "old_line_content": "\t\tCopySendChar(cstate, quotec);",
          "new_line_content": "\tif (use_quote)",
          "content_same": false
        },
        {
          "line": 687,
          "old_api": "ereport",
          "new_api": null,
          "old_text": "ereport(ERROR,\n\t\t\t\t\t\t(errcode_for_file_access(),\n\t\t\t\t\t\t errmsg(\"could not open file \\\"%s\\\" for writing: %m\",\n\t\t\t\t\t\t\t\tcstate->filename),\n\t\t\t\t\t\t (save_errno == ENOENT || save_errno == EACCES) ?\n\t\t\t\t\t\t errhint(\"COPY TO instructs the PostgreSQL server process to write a file. \"\n\t\t\t\t\t\t\t\t \"You may want a client-side facility such as psql's \\\\copy.\") : 0))",
          "new_text": null,
          "old_line_content": "\t\t\t\tereport(ERROR,",
          "new_line_content": "\t\t\t\tint\t\t\tsave_errno = errno;",
          "content_same": false
        },
        {
          "line": 688,
          "old_api": "errcode_for_file_access",
          "new_api": null,
          "old_text": "errcode_for_file_access()",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t(errcode_for_file_access(),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1201,
          "old_api": "DUMPSOFAR",
          "new_api": null,
          "old_text": "DUMPSOFAR()",
          "new_text": null,
          "old_line_content": "\t\t\t\tDUMPSOFAR();",
          "new_line_content": "\t\t\tif (c == quotec || c == escapec)",
          "content_same": false
        },
        {
          "line": 1202,
          "old_api": "CopySendChar",
          "new_api": null,
          "old_text": "CopySendChar(cstate, escapec)",
          "new_text": null,
          "old_line_content": "\t\t\t\tCopySendChar(cstate, escapec);",
          "new_line_content": "\t\t\t{",
          "content_same": false
        },
        {
          "line": 692,
          "old_api": "errhint",
          "new_api": null,
          "old_text": "errhint(\"COPY TO instructs the PostgreSQL server process to write a file. \"\n\t\t\t\t\t\t\t\t \"You may want a client-side facility such as psql's \\\\copy.\")",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t errhint(\"COPY TO instructs the PostgreSQL server process to write a file. \"",
          "new_line_content": "\t\t\t\t\t\t\t\tcstate->filename),",
          "content_same": false
        },
        {
          "line": 1205,
          "old_api": "IS_HIGHBIT_SET",
          "new_api": null,
          "old_text": "IS_HIGHBIT_SET(c)",
          "new_text": null,
          "old_line_content": "\t\t\tif (IS_HIGHBIT_SET(c) && cstate->encoding_embeds_ascii)",
          "new_line_content": "\t\t\t\tstart = ptr;\t/* we include char in next run */",
          "content_same": false
        },
        {
          "line": 1206,
          "old_api": "pg_encoding_mblen",
          "new_api": null,
          "old_text": "pg_encoding_mblen(cstate->file_encoding, ptr)",
          "new_text": null,
          "old_line_content": "\t\t\t\tptr += pg_encoding_mblen(cstate->file_encoding, ptr);",
          "new_line_content": "\t\t\t}",
          "content_same": false
        },
        {
          "line": 696,
          "old_api": "fileno",
          "new_api": null,
          "old_text": "fileno(cstate->copy_file)",
          "new_text": null,
          "old_line_content": "\t\t\tif (fstat(fileno(cstate->copy_file), &st))",
          "new_line_content": "\t\t\t}",
          "content_same": false
        },
        {
          "line": 697,
          "old_api": "ereport",
          "new_api": null,
          "old_text": "ereport(ERROR,\n\t\t\t\t\t\t(errcode_for_file_access(),\n\t\t\t\t\t\t errmsg(\"could not stat file \\\"%s\\\": %m\",\n\t\t\t\t\t\t\t\tcstate->filename)))",
          "new_text": null,
          "old_line_content": "\t\t\t\tereport(ERROR,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1210,
          "old_api": "DUMPSOFAR",
          "new_api": null,
          "old_text": "DUMPSOFAR()",
          "new_text": null,
          "old_line_content": "\t\tDUMPSOFAR();",
          "new_line_content": "\t\t\t\tptr++;",
          "content_same": false
        },
        {
          "line": 702,
          "old_api": "S_ISDIR",
          "new_api": null,
          "old_text": "S_ISDIR(st.st_mode)",
          "new_text": null,
          "old_line_content": "\t\t\tif (S_ISDIR(st.st_mode))",
          "new_line_content": "\t\t\t\t\t\t\t\tcstate->filename)));",
          "content_same": false
        },
        {
          "line": 703,
          "old_api": "ereport",
          "new_api": null,
          "old_text": "ereport(ERROR,\n\t\t\t\t\t\t(errcode(ERRCODE_WRONG_OBJECT_TYPE),\n\t\t\t\t\t\t errmsg(\"\\\"%s\\\" is a directory\", cstate->filename)))",
          "new_text": null,
          "old_line_content": "\t\t\t\tereport(ERROR,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1217,
          "old_api": "CopySendString",
          "new_api": null,
          "old_text": "CopySendString(cstate, ptr)",
          "new_text": null,
          "old_line_content": "\t\tCopySendString(cstate, ptr);",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 710,
          "old_api": "pgstat_progress_start_command",
          "new_api": null,
          "old_text": "pgstat_progress_start_command(PROGRESS_COMMAND_COPY,\n\t\t\t\t\t\t\t\t  cstate->rel ? RelationGetRelid(cstate->rel) : InvalidOid)",
          "new_text": null,
          "old_line_content": "\tpgstat_progress_start_command(PROGRESS_COMMAND_COPY,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 711,
          "old_api": "RelationGetRelid",
          "new_api": null,
          "old_text": "RelationGetRelid(cstate->rel)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\t\t\t\t  cstate->rel ? RelationGetRelid(cstate->rel) : InvalidOid);",
          "new_line_content": "\t/* initialize progress */",
          "content_same": false
        },
        {
          "line": 716,
          "old_api": "MemoryContextSwitchTo",
          "new_api": null,
          "old_text": "MemoryContextSwitchTo(oldcontext)",
          "new_text": null,
          "old_line_content": "\tMemoryContextSwitchTo(oldcontext);",
          "new_line_content": "\tcstate->bytes_processed = 0;",
          "content_same": false
        },
        {
          "line": 1240,
          "old_api": "CopyOneRowTo",
          "new_api": null,
          "old_text": "CopyOneRowTo(cstate, slot)",
          "new_text": null,
          "old_line_content": "\tCopyOneRowTo(cstate, slot);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 730,
          "old_api": "ExecutorFinish",
          "new_api": null,
          "old_text": "ExecutorFinish(cstate->queryDesc)",
          "new_text": null,
          "old_line_content": "\t\tExecutorFinish(cstate->queryDesc);",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 731,
          "old_api": "ExecutorEnd",
          "new_api": null,
          "old_text": "ExecutorEnd(cstate->queryDesc)",
          "new_text": null,
          "old_line_content": "\t\tExecutorEnd(cstate->queryDesc);",
          "new_line_content": "\t\t/* Close down the query and free resources. */",
          "content_same": false
        },
        {
          "line": 1243,
          "old_api": "pgstat_progress_update_param",
          "new_api": null,
          "old_text": "pgstat_progress_update_param(PROGRESS_COPY_TUPLES_PROCESSED,\n\t\t\t\t\t\t\t\t ++myState->processed)",
          "new_text": null,
          "old_line_content": "\tpgstat_progress_update_param(PROGRESS_COPY_TUPLES_PROCESSED,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 737,
          "old_api": "EndCopy",
          "new_api": null,
          "old_text": "EndCopy(cstate)",
          "new_text": null,
          "old_line_content": "\tEndCopy(cstate);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1264,
          "old_api": "pfree",
          "new_api": null,
          "old_text": "pfree(self)",
          "new_text": null,
          "old_line_content": "\tpfree(self);",
          "new_line_content": "copy_dest_destroy(DestReceiver *self)",
          "content_same": false
        },
        {
          "line": 756,
          "old_api": "SendCopyBegin",
          "new_api": null,
          "old_text": "SendCopyBegin(cstate)",
          "new_text": null,
          "old_line_content": "\t\tSendCopyBegin(cstate);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 759,
          "old_api": "RelationGetDescr",
          "new_api": null,
          "old_text": "RelationGetDescr(cstate->rel)",
          "new_text": null,
          "old_line_content": "\t\ttupDesc = RelationGetDescr(cstate->rel);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1273,
          "old_api": "palloc",
          "new_api": null,
          "old_text": "palloc(sizeof(DR_copy))",
          "new_text": null,
          "old_line_content": "\tDR_copy    *self = (DR_copy *) palloc(sizeof(DR_copy));",
          "new_line_content": "CreateCopyDestReceiver(void)",
          "content_same": false
        },
        {
          "line": 766,
          "old_api": "makeStringInfo",
          "new_api": null,
          "old_text": "makeStringInfo()",
          "new_text": null,
          "old_line_content": "\tcstate->fe_msgbuf = makeStringInfo();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 769,
          "old_api": "palloc",
          "new_api": null,
          "old_text": "palloc(num_phys_attrs * sizeof(FmgrInfo))",
          "new_text": null,
          "old_line_content": "\tcstate->out_functions = (FmgrInfo *) palloc(num_phys_attrs * sizeof(FmgrInfo));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 770,
          "old_api": "foreach",
          "new_api": null,
          "old_text": "foreach(cur, cstate->attnumlist)",
          "new_text": null,
          "old_line_content": "\tforeach(cur, cstate->attnumlist)",
          "new_line_content": "\t/* Get info about the columns we need to process. */",
          "content_same": false
        },
        {
          "line": 775,
          "old_api": "TupleDescAttr",
          "new_api": null,
          "old_text": "TupleDescAttr(tupDesc, attnum - 1)",
          "new_text": null,
          "old_line_content": "\t\tForm_pg_attribute attr = TupleDescAttr(tupDesc, attnum - 1);",
          "new_line_content": "\t\tOid\t\t\tout_func_oid;",
          "content_same": false
        },
        {
          "line": 778,
          "old_api": "getTypeBinaryOutputInfo",
          "new_api": null,
          "old_text": "getTypeBinaryOutputInfo(attr->atttypid,\n\t\t\t\t\t\t\t\t\t&out_func_oid,\n\t\t\t\t\t\t\t\t\t&isvarlena)",
          "new_text": null,
          "old_line_content": "\t\t\tgetTypeBinaryOutputInfo(attr->atttypid,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 782,
          "old_api": "getTypeOutputInfo",
          "new_api": null,
          "old_text": "getTypeOutputInfo(attr->atttypid,\n\t\t\t\t\t\t\t  &out_func_oid,\n\t\t\t\t\t\t\t  &isvarlena)",
          "new_text": null,
          "old_line_content": "\t\t\tgetTypeOutputInfo(attr->atttypid,",
          "new_line_content": "\t\t\t\t\t\t\t\t\t&isvarlena);",
          "content_same": false
        },
        {
          "line": 785,
          "old_api": "fmgr_info",
          "new_api": null,
          "old_text": "fmgr_info(out_func_oid, &cstate->out_functions[attnum - 1])",
          "new_text": null,
          "old_line_content": "\t\tfmgr_info(out_func_oid, &cstate->out_functions[attnum - 1]);",
          "new_line_content": "\t\t\t\t\t\t\t  &out_func_oid,",
          "content_same": false
        },
        {
          "line": 794,
          "old_api": "AllocSetContextCreate",
          "new_api": null,
          "old_text": "AllocSetContextCreate(CurrentMemoryContext,\n\t\t\t\t\t\t\t\t\t\t\t   \"COPY TO\",\n\t\t\t\t\t\t\t\t\t\t\t   ALLOCSET_DEFAULT_SIZES)",
          "new_text": null,
          "old_line_content": "\tcstate->rowcontext = AllocSetContextCreate(CurrentMemoryContext,",
          "new_line_content": "\t * anyway.  (We don't need a whole econtext as CopyFrom does.)",
          "content_same": false
        },
        {
          "line": 804,
          "old_api": "CopySendData",
          "new_api": null,
          "old_text": "CopySendData(cstate, BinarySignature, 11)",
          "new_text": null,
          "old_line_content": "\t\tCopySendData(cstate, BinarySignature, 11);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 807,
          "old_api": "CopySendInt32",
          "new_api": null,
          "old_text": "CopySendInt32(cstate, tmp)",
          "new_text": null,
          "old_line_content": "\t\tCopySendInt32(cstate, tmp);",
          "new_line_content": "\t\t/* Flags field */",
          "content_same": false
        },
        {
          "line": 810,
          "old_api": "CopySendInt32",
          "new_api": null,
          "old_text": "CopySendInt32(cstate, tmp)",
          "new_text": null,
          "old_line_content": "\t\tCopySendInt32(cstate, tmp);",
          "new_line_content": "\t\t/* No header extension */",
          "content_same": false
        },
        {
          "line": 819,
          "old_api": "pg_server_to_any",
          "new_api": null,
          "old_text": "pg_server_to_any(cstate->opts.null_print,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  cstate->opts.null_print_len,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  cstate->file_encoding)",
          "new_text": null,
          "old_line_content": "\t\t\tcstate->opts.null_print_client = pg_server_to_any(cstate->opts.null_print,",
          "new_line_content": "\t\t */",
          "content_same": false
        },
        {
          "line": 828,
          "old_api": "foreach",
          "new_api": null,
          "old_text": "foreach(cur, cstate->attnumlist)",
          "new_text": null,
          "old_line_content": "\t\t\tforeach(cur, cstate->attnumlist)",
          "new_line_content": "\t\t\tbool\t\thdr_delim = false;",
          "content_same": false
        },
        {
          "line": 834,
          "old_api": "CopySendChar",
          "new_api": null,
          "old_text": "CopySendChar(cstate, cstate->opts.delim[0])",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tCopySendChar(cstate, cstate->opts.delim[0]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 837,
          "old_api": "TupleDescAttr",
          "new_api": null,
          "old_text": "TupleDescAttr(tupDesc, attnum - 1)",
          "new_text": null,
          "old_line_content": "\t\t\t\tcolname = NameStr(TupleDescAttr(tupDesc, attnum - 1)->attname);",
          "new_line_content": "\t\t\t\thdr_delim = true;",
          "content_same": false
        },
        {
          "line": 840,
          "old_api": "CopyAttributeOutCSV",
          "new_api": null,
          "old_text": "CopyAttributeOutCSV(cstate, colname, false)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tCopyAttributeOutCSV(cstate, colname, false);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 845,
          "old_api": "CopySendEndOfRow",
          "new_api": null,
          "old_text": "CopySendEndOfRow(cstate)",
          "new_text": null,
          "old_line_content": "\t\t\tCopySendEndOfRow(cstate);",
          "new_line_content": "\t\t\t}",
          "content_same": false
        },
        {
          "line": 854,
          "old_api": "GetActiveSnapshot",
          "new_api": null,
          "old_text": "GetActiveSnapshot()",
          "new_text": null,
          "old_line_content": "\t\tscandesc = table_beginscan(cstate->rel, GetActiveSnapshot(), 0, NULL);",
          "new_line_content": "\t\tTableScanDesc scandesc;",
          "content_same": false
        },
        {
          "line": 855,
          "old_api": "table_slot_create",
          "new_api": null,
          "old_text": "table_slot_create(cstate->rel, NULL)",
          "new_text": null,
          "old_line_content": "\t\tslot = table_slot_create(cstate->rel, NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 858,
          "old_api": "table_scan_getnextslot",
          "new_api": null,
          "old_text": "table_scan_getnextslot(scandesc, ForwardScanDirection, slot)",
          "new_text": null,
          "old_line_content": "\t\twhile (table_scan_getnextslot(scandesc, ForwardScanDirection, slot))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 863,
          "old_api": "slot_getallattrs",
          "new_api": null,
          "old_text": "slot_getallattrs(slot)",
          "new_text": null,
          "old_line_content": "\t\t\tslot_getallattrs(slot);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 866,
          "old_api": "CopyOneRowTo",
          "new_api": null,
          "old_text": "CopyOneRowTo(cstate, slot)",
          "new_text": null,
          "old_line_content": "\t\t\tCopyOneRowTo(cstate, slot);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 872,
          "old_api": "pgstat_progress_update_param",
          "new_api": null,
          "old_text": "pgstat_progress_update_param(PROGRESS_COPY_TUPLES_PROCESSED,\n\t\t\t\t\t\t\t\t\t\t ++processed)",
          "new_text": null,
          "old_line_content": "\t\t\tpgstat_progress_update_param(PROGRESS_COPY_TUPLES_PROCESSED,",
          "new_line_content": "\t\t\t * progress.",
          "content_same": false
        },
        {
          "line": 876,
          "old_api": "ExecDropSingleTupleTableSlot",
          "new_api": null,
          "old_text": "ExecDropSingleTupleTableSlot(slot)",
          "new_text": null,
          "old_line_content": "\t\tExecDropSingleTupleTableSlot(slot);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 877,
          "old_api": "table_endscan",
          "new_api": null,
          "old_text": "table_endscan(scandesc)",
          "new_text": null,
          "old_line_content": "\t\ttable_endscan(scandesc);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 882,
          "old_api": "ExecutorRun",
          "new_api": null,
          "old_text": "ExecutorRun(cstate->queryDesc, ForwardScanDirection, 0, true)",
          "new_text": null,
          "old_line_content": "\t\tExecutorRun(cstate->queryDesc, ForwardScanDirection, 0, true);",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 889,
          "old_api": "CopySendInt16",
          "new_api": null,
          "old_text": "CopySendInt16(cstate, -1)",
          "new_text": null,
          "old_line_content": "\t\tCopySendInt16(cstate, -1);",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 894,
          "old_api": "MemoryContextDelete",
          "new_api": null,
          "old_text": "MemoryContextDelete(cstate->rowcontext)",
          "new_text": null,
          "old_line_content": "\tMemoryContextDelete(cstate->rowcontext);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 897,
          "old_api": "SendCopyEnd",
          "new_api": null,
          "old_text": "SendCopyEnd(cstate)",
          "new_text": null,
          "old_line_content": "\t\tSendCopyEnd(cstate);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 914,
          "old_api": "MemoryContextReset",
          "new_api": null,
          "old_text": "MemoryContextReset(cstate->rowcontext)",
          "new_text": null,
          "old_line_content": "\tMemoryContextReset(cstate->rowcontext);",
          "new_line_content": "\tchar\t   *string;",
          "content_same": false
        },
        {
          "line": 915,
          "old_api": "MemoryContextSwitchTo",
          "new_api": null,
          "old_text": "MemoryContextSwitchTo(cstate->rowcontext)",
          "new_text": null,
          "old_line_content": "\toldcontext = MemoryContextSwitchTo(cstate->rowcontext);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 920,
          "old_api": "list_length",
          "new_api": null,
          "old_text": "list_length(cstate->attnumlist)",
          "new_text": null,
          "old_line_content": "\t\tCopySendInt16(cstate, list_length(cstate->attnumlist));",
          "new_line_content": "\t{",
          "content_same": false
        },
        {
          "line": 924,
          "old_api": "slot_getallattrs",
          "new_api": null,
          "old_text": "slot_getallattrs(slot)",
          "new_text": null,
          "old_line_content": "\tslot_getallattrs(slot);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 935,
          "old_api": "CopySendChar",
          "new_api": null,
          "old_text": "CopySendChar(cstate, cstate->opts.delim[0])",
          "new_text": null,
          "old_line_content": "\t\t\t\tCopySendChar(cstate, cstate->opts.delim[0]);",
          "new_line_content": "\t\t{",
          "content_same": false
        },
        {
          "line": 942,
          "old_api": "CopySendString",
          "new_api": null,
          "old_text": "CopySendString(cstate, cstate->opts.null_print_client)",
          "new_text": null,
          "old_line_content": "\t\t\t\tCopySendString(cstate, cstate->opts.null_print_client);",
          "new_line_content": "\t\t{",
          "content_same": false
        },
        {
          "line": 950,
          "old_api": "OutputFunctionCall",
          "new_api": null,
          "old_text": "OutputFunctionCall(&out_functions[attnum - 1],\n\t\t\t\t\t\t\t\t\t\t\tvalue)",
          "new_text": null,
          "old_line_content": "\t\t\t\tstring = OutputFunctionCall(&out_functions[attnum - 1],",
          "new_line_content": "\t\t\tif (!cstate->opts.binary)",
          "content_same": false
        },
        {
          "line": 953,
          "old_api": "CopyAttributeOutCSV",
          "new_api": null,
          "old_text": "CopyAttributeOutCSV(cstate, string,\n\t\t\t\t\t\t\t\t\t\tcstate->opts.force_quote_flags[attnum - 1])",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tCopyAttributeOutCSV(cstate, string,",
          "new_line_content": "\t\t\t\t\t\t\t\t\t\t\tvalue);",
          "content_same": false
        },
        {
          "line": 956,
          "old_api": "CopyAttributeOutText",
          "new_api": null,
          "old_text": "CopyAttributeOutText(cstate, string)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tCopyAttributeOutText(cstate, string);",
          "new_line_content": "\t\t\t\t\t\t\t\t\t\tcstate->opts.force_quote_flags[attnum - 1]);",
          "content_same": false
        },
        {
          "line": 962,
          "old_api": "SendFunctionCall",
          "new_api": null,
          "old_text": "SendFunctionCall(&out_functions[attnum - 1],\n\t\t\t\t\t\t\t\t\t\t\t   value)",
          "new_text": null,
          "old_line_content": "\t\t\t\toutputbytes = SendFunctionCall(&out_functions[attnum - 1],",
          "new_line_content": "\t\t\t\tbytea\t   *outputbytes;",
          "content_same": false
        },
        {
          "line": 965,
          "old_api": "VARDATA",
          "new_api": null,
          "old_text": "VARDATA(outputbytes)",
          "new_text": null,
          "old_line_content": "\t\t\t\tCopySendData(cstate, VARDATA(outputbytes),",
          "new_line_content": "\t\t\t\t\t\t\t\t\t\t\t   value);",
          "content_same": false
        },
        {
          "line": 971,
          "old_api": "CopySendEndOfRow",
          "new_api": null,
          "old_text": "CopySendEndOfRow(cstate)",
          "new_text": null,
          "old_line_content": "\tCopySendEndOfRow(cstate);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 994,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(string)",
          "new_text": null,
          "old_line_content": "\t\tptr = pg_server_to_any(string, strlen(string), cstate->file_encoding);",
          "new_line_content": "",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 30,
      "total_additions": 94,
      "total_deletions": 95,
      "total_api_changes": 219
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 9,
        "api_related_lines": 219,
        "non_api_lines": 5,
        "non_api_line_numbers": [
          615,
          616,
          617,
          619,
          622
        ]
      }
    },
    "api_calls_before": 267,
    "api_calls_after": 266,
    "diff_info": {
      "added_lines": 8,
      "removed_lines": 6,
      "total_diff_lines": 27
    }
  }
}
{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/netdata/modified_file/7c568ee6fafca386731e9ba05b3242982cd16c5a",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/netdata/modified_file/7c568ee6fafca386731e9ba05b3242982cd16c5a/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/netdata/modified_file/7c568ee6fafca386731e9ba05b3242982cd16c5a/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/netdata/modified_file/7c568ee6fafca386731e9ba05b3242982cd16c5a/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": true,
    "api_changes": {
      "replacements": [
        {
          "line": 252,
          "old_api": "strdupz",
          "new_api": "freez",
          "old_text": "strdupz(pointers[14])",
          "new_text": "freez(ae->chart)",
          "old_line_content": "            ae->chart = strdupz(pointers[14]);",
          "new_line_content": "            if(unlikely(ae->chart)) freez(ae->chart);",
          "content_same": false
        },
        {
          "line": 254,
          "old_api": "freez",
          "new_api": "simple_hash",
          "old_text": "freez(ae->family)",
          "new_text": "simple_hash(ae->chart)",
          "old_line_content": "            if(unlikely(ae->family)) freez(ae->family);",
          "new_line_content": "            ae->hash_chart = simple_hash(ae->chart);",
          "content_same": false
        },
        {
          "line": 257,
          "old_api": "freez",
          "new_api": "strdupz",
          "old_text": "freez(ae->exec)",
          "new_text": "strdupz(pointers[15])",
          "old_line_content": "            if(unlikely(ae->exec)) freez(ae->exec);",
          "new_line_content": "            ae->family = strdupz(pointers[15]);",
          "content_same": false
        },
        {
          "line": 277,
          "old_api": "atoi",
          "new_api": "freez",
          "old_text": "atoi(pointers[21])",
          "new_text": "freez(ae->info)",
          "old_line_content": "            ae->exec_code   = atoi(pointers[21]);",
          "new_line_content": "            if(!*ae->info) { freez(ae->info); ae->info = NULL; }",
          "content_same": false
        },
        {
          "line": 282,
          "old_api": "strtold",
          "new_api": "atoi",
          "old_text": "strtold(pointers[25], NULL)",
          "new_text": "atoi(pointers[24])",
          "old_line_content": "            ae->new_value   = strtold(pointers[25], NULL);",
          "new_line_content": "            ae->delay       = atoi(pointers[24]);",
          "content_same": false
        },
        {
          "line": 307,
          "old_api": "freez",
          "new_api": "pthread_rwlock_unlock",
          "old_text": "freez(buf)",
          "new_text": "pthread_rwlock_unlock(&host->health_log.alarm_log_rwlock)",
          "old_line_content": "    freez(buf);",
          "new_line_content": "    pthread_rwlock_unlock(&host->health_log.alarm_log_rwlock);",
          "content_same": false
        },
        {
          "line": 309,
          "old_api": "time",
          "new_api": "freez",
          "old_text": "time(NULL)",
          "new_text": "freez(buf)",
          "old_line_content": "    if(!max_unique_id) max_unique_id = (uint32_t)time(NULL);",
          "new_line_content": "    freez(buf);",
          "content_same": false
        },
        {
          "line": 326,
          "old_api": "error",
          "new_api": "fopen",
          "old_text": "error(\"Health: cannot open health file: %s\", health.log_filename)",
          "new_text": "fopen(buffer, \"r\")",
          "old_line_content": "        error(\"Health: cannot open health file: %s\", health.log_filename);",
          "new_line_content": "    FILE *fp = fopen(buffer, \"r\");",
          "content_same": false
        },
        {
          "line": 328,
          "old_api": "health_alarm_log_read",
          "new_api": "error",
          "old_text": "health_alarm_log_read(host, fp, health.log_filename)",
          "new_text": "error(\"Health: cannot open health file: %s\", health.log_filename)",
          "old_line_content": "        health_alarm_log_read(host, fp, health.log_filename);",
          "new_line_content": "        error(\"Health: cannot open health file: %s\", health.log_filename);",
          "content_same": false
        },
        {
          "line": 335,
          "old_api": "error",
          "new_api": "fopen",
          "old_text": "error(\"Health: cannot open health file: %s\", health.log_filename)",
          "new_text": "fopen(health.log_filename, \"r\")",
          "old_line_content": "        error(\"Health: cannot open health file: %s\", health.log_filename);",
          "new_line_content": "    fp = fopen(health.log_filename, \"r\");",
          "content_same": false
        },
        {
          "line": 337,
          "old_api": "health_alarm_log_read",
          "new_api": "error",
          "old_text": "health_alarm_log_read(host, fp, health.log_filename)",
          "new_text": "error(\"Health: cannot open health file: %s\", health.log_filename)",
          "old_line_content": "        health_alarm_log_read(host, fp, health.log_filename);",
          "new_line_content": "        error(\"Health: cannot open health file: %s\", health.log_filename);",
          "content_same": false
        },
        {
          "line": 362,
          "old_api": "callocz",
          "new_api": "debug",
          "old_text": "callocz(1, sizeof(ALARM_ENTRY))",
          "new_text": "debug(D_HEALTH, \"Health adding alarm log entry with id: %u\", host->health_log.next_log_id)",
          "old_line_content": "    ALARM_ENTRY *ae = callocz(1, sizeof(ALARM_ENTRY));",
          "new_line_content": "    debug(D_HEALTH, \"Health adding alarm log entry with id: %u\", host->health_log.next_log_id);",
          "content_same": false
        },
        {
          "line": 364,
          "old_api": "simple_hash",
          "new_api": "callocz",
          "old_text": "simple_hash(ae->name)",
          "new_text": "callocz(1, sizeof(ALARM_ENTRY))",
          "old_line_content": "    ae->hash_name = simple_hash(ae->name);",
          "new_line_content": "    ALARM_ENTRY *ae = callocz(1, sizeof(ALARM_ENTRY));",
          "content_same": false
        },
        {
          "line": 425,
          "old_api": "health_alarm_log_save",
          "new_api": "pthread_rwlock_unlock",
          "old_text": "health_alarm_log_save(host, ae)",
          "new_text": "pthread_rwlock_unlock(&host->health_log.alarm_log_rwlock)",
          "old_line_content": "    health_alarm_log_save(host, ae);",
          "new_line_content": "    pthread_rwlock_unlock(&host->health_log.alarm_log_rwlock);",
          "content_same": false
        },
        {
          "line": 454,
          "old_api": "debug",
          "new_api": "avl_insert_lock",
          "old_text": "debug(D_VARIABLES, \"Request to insert RRDVAR '%s' into index failed. Already exists.\", rv->name)",
          "new_text": "avl_insert_lock(tree, (avl *)(rv))",
          "old_line_content": "        debug(D_VARIABLES, \"Request to insert RRDVAR '%s' into index failed. Already exists.\", rv->name);",
          "new_line_content": "    RRDVAR *ret = (RRDVAR *)avl_insert_lock(tree, (avl *)(rv));",
          "content_same": false
        },
        {
          "line": 462,
          "old_api": "error",
          "new_api": "avl_remove_lock",
          "old_text": "error(\"Request to remove RRDVAR '%s' from index failed. Not Found.\", rv->name)",
          "new_text": "avl_remove_lock(tree, (avl *)(rv))",
          "old_line_content": "        error(\"Request to remove RRDVAR '%s' from index failed. Not Found.\", rv->name);",
          "new_line_content": "    RRDVAR *ret = (RRDVAR *)avl_remove_lock(tree, (avl *)(rv));",
          "content_same": false
        },
        {
          "line": 472,
          "old_api": "avl_search_lock",
          "new_api": "simple_hash",
          "old_text": "avl_search_lock(tree, (avl *)&tmp)",
          "new_text": "simple_hash(tmp.name)",
          "old_line_content": "    return (RRDVAR *)avl_search_lock(tree, (avl *)&tmp);",
          "new_line_content": "    tmp.hash = (hash)?hash:simple_hash(tmp.name);",
          "content_same": false
        },
        {
          "line": 483,
          "old_api": "freez",
          "new_api": "rrdvar_index_del",
          "old_text": "freez(rv->name)",
          "new_text": "rrdvar_index_del(tree, rv)",
          "old_line_content": "    freez(rv->name);",
          "new_line_content": "        rrdvar_index_del(tree, rv);",
          "content_same": false
        },
        {
          "line": 490,
          "old_api": "simple_hash",
          "new_api": "strdupz",
          "old_text": "simple_hash(variable)",
          "new_text": "strdupz(name)",
          "old_line_content": "    uint32_t hash = simple_hash(variable);",
          "new_line_content": "    char *variable = strdupz(name);",
          "content_same": false
        },
        {
          "line": 492,
          "old_api": "rrdvar_index_find",
          "new_api": "simple_hash",
          "old_text": "rrdvar_index_find(tree, variable, hash)",
          "new_text": "simple_hash(variable)",
          "old_line_content": "    RRDVAR *rv = rrdvar_index_find(tree, variable, hash);",
          "new_line_content": "    uint32_t hash = simple_hash(variable);",
          "content_same": false
        },
        {
          "line": 494,
          "old_api": "debug",
          "new_api": "rrdvar_index_find",
          "old_text": "debug(D_VARIABLES, \"Variable '%s' not found in scope '%s'. Creating a new one.\", variable, scope)",
          "new_text": "rrdvar_index_find(tree, variable, hash)",
          "old_line_content": "        debug(D_VARIABLES, \"Variable '%s' not found in scope '%s'. Creating a new one.\", variable, scope);",
          "new_line_content": "    RRDVAR *rv = rrdvar_index_find(tree, variable, hash);",
          "content_same": false
        },
        {
          "line": 496,
          "old_api": "callocz",
          "new_api": "debug",
          "old_text": "callocz(1, sizeof(RRDVAR))",
          "new_text": "debug(D_VARIABLES, \"Variable '%s' not found in scope '%s'. Creating a new one.\", variable, scope)",
          "old_line_content": "        rv = callocz(1, sizeof(RRDVAR));",
          "new_line_content": "        debug(D_VARIABLES, \"Variable '%s' not found in scope '%s'. Creating a new one.\", variable, scope);",
          "content_same": false
        },
        {
          "line": 504,
          "old_api": "debug",
          "new_api": "rrdvar_index_add",
          "old_text": "debug(D_VARIABLES, \"Variable '%s' in scope '%s' already exists\", variable, scope)",
          "new_text": "rrdvar_index_add(tree, rv)",
          "old_line_content": "            debug(D_VARIABLES, \"Variable '%s' in scope '%s' already exists\", variable, scope);",
          "new_line_content": "        RRDVAR *ret = rrdvar_index_add(tree, rv);",
          "content_same": false
        },
        {
          "line": 505,
          "old_api": "rrdvar_free",
          "new_api": "unlikely",
          "old_text": "rrdvar_free(NULL, NULL, rv)",
          "new_text": "unlikely(ret != rv)",
          "old_line_content": "            rrdvar_free(NULL, NULL, rv);",
          "new_line_content": "        if(unlikely(ret != rv)) {",
          "content_same": false
        },
        {
          "line": 569,
          "old_api": "rrdvar2number",
          "new_api": "rrdvar_index_find",
          "old_text": "rrdvar2number(rv)",
          "new_text": "rrdvar_index_find(&st->variables_root_index, variable, hash)",
          "old_line_content": "        *result = rrdvar2number(rv);",
          "new_line_content": "    rv = rrdvar_index_find(&st->variables_root_index, variable, hash);",
          "content_same": false
        },
        {
          "line": 575,
          "old_api": "rrdvar2number",
          "new_api": "rrdvar_index_find",
          "old_text": "rrdvar2number(rv)",
          "new_text": "rrdvar_index_find(&st->rrdfamily->variables_root_index, variable, hash)",
          "old_line_content": "        *result = rrdvar2number(rv);",
          "new_line_content": "    rv = rrdvar_index_find(&st->rrdfamily->variables_root_index, variable, hash);",
          "content_same": false
        },
        {
          "line": 581,
          "old_api": "rrdvar2number",
          "new_api": "rrdvar_index_find",
          "old_text": "rrdvar2number(rv)",
          "new_text": "rrdvar_index_find(&st->rrdhost->variables_root_index, variable, hash)",
          "old_line_content": "        *result = rrdvar2number(rv);",
          "new_line_content": "    rv = rrdvar_index_find(&st->rrdhost->variables_root_index, variable, hash);",
          "content_same": false
        },
        {
          "line": 588,
          "old_api": "debug",
          "new_api": "avl_traverse_lock",
          "old_text": "debug(D_HEALTH, \"Available family '%s' variables:\", st->rrdfamily->family)",
          "new_text": "avl_traverse_lock(&st->variables_root_index, dump_variable)",
          "old_line_content": "    debug(D_HEALTH, \"Available family '%s' variables:\", st->rrdfamily->family);",
          "new_line_content": "    avl_traverse_lock(&st->variables_root_index, dump_variable);",
          "content_same": false
        },
        {
          "line": 591,
          "old_api": "debug",
          "new_api": "avl_traverse_lock",
          "old_text": "debug(D_HEALTH, \"Available host '%s' variables:\", st->rrdhost->hostname)",
          "new_text": "avl_traverse_lock(&st->rrdfamily->variables_root_index, dump_variable)",
          "old_line_content": "    debug(D_HEALTH, \"Available host '%s' variables:\", st->rrdhost->hostname);",
          "new_line_content": "    avl_traverse_lock(&st->rrdfamily->variables_root_index, dump_variable);",
          "content_same": false
        },
        {
          "line": 608,
          "old_api": "snprintfz",
          "new_api": "strdupz",
          "old_text": "snprintfz(buffer, RRDVAR_MAX_LENGTH, \"%s.%s\", st->name, variable)",
          "new_text": "strdupz(buffer)",
          "old_line_content": "    snprintfz(buffer, RRDVAR_MAX_LENGTH, \"%s.%s\", st->name, variable);",
          "new_line_content": "    rs->fullid = strdupz(buffer);",
          "content_same": false
        },
        {
          "line": 644,
          "old_api": "strcmp",
          "new_api": "snprintfz",
          "old_text": "strcmp(buffer, rs->fullname)",
          "new_text": "snprintfz(buffer, RRDVAR_MAX_LENGTH, \"%s.%s\", st->name, rs->variable)",
          "old_line_content": "        if (strcmp(buffer, rs->fullname)) {",
          "new_line_content": "        snprintfz(buffer, RRDVAR_MAX_LENGTH, \"%s.%s\", st->name, rs->variable);",
          "content_same": false
        },
        {
          "line": 646,
          "old_api": "rrdvar_free",
          "new_api": "strcmp",
          "old_text": "rrdvar_free(st->rrdhost, &st->rrdfamily->variables_root_index, rs->family_name)",
          "new_text": "strcmp(buffer, rs->fullname)",
          "old_line_content": "            rrdvar_free(st->rrdhost, &st->rrdfamily->variables_root_index, rs->family_name);",
          "new_line_content": "        if (strcmp(buffer, rs->fullname)) {",
          "content_same": false
        },
        {
          "line": 649,
          "old_api": "freez",
          "new_api": "rrdvar_free",
          "old_text": "freez(rs->fullname)",
          "new_text": "rrdvar_free(st->rrdhost, &st->rrdhost->variables_root_index, rs->host_name)",
          "old_line_content": "            freez(rs->fullname);",
          "new_line_content": "            rrdvar_free(st->rrdhost, &st->rrdhost->variables_root_index, rs->host_name);",
          "content_same": false
        },
        {
          "line": 651,
          "old_api": "rrdvar_create_and_index",
          "new_api": "freez",
          "old_text": "rrdvar_create_and_index(\"family\", &st->rrdfamily->variables_root_index, rs->fullname, rs->type, rs->value)",
          "new_text": "freez(rs->fullname)",
          "old_line_content": "            rs->family_name = rrdvar_create_and_index(\"family\", &st->rrdfamily->variables_root_index, rs->fullname, rs->type, rs->value);",
          "new_line_content": "            freez(rs->fullname);",
          "content_same": false
        },
        {
          "line": 652,
          "old_api": "rrdvar_create_and_index",
          "new_api": "strdupz",
          "old_text": "rrdvar_create_and_index(\"host\",   &st->rrdhost->variables_root_index, rs->fullname, rs->type, rs->value)",
          "new_text": "strdupz(st->name)",
          "old_line_content": "            rs->host_name   = rrdvar_create_and_index(\"host\",   &st->rrdhost->variables_root_index, rs->fullname, rs->type, rs->value);",
          "new_line_content": "            rs->fullname = strdupz(st->name);",
          "content_same": false
        },
        {
          "line": 663,
          "old_api": "rrdvar_free",
          "new_api": "debug",
          "old_text": "rrdvar_free(st->rrdhost, &st->variables_root_index, rs->local)",
          "new_text": "debug(D_VARIABLES, \"RRDSETVAR free for chart id '%s' name '%s', variable '%s'\", st->id, st->name, rs->variable)",
          "old_line_content": "    rrdvar_free(st->rrdhost, &st->variables_root_index, rs->local);",
          "new_line_content": "    debug(D_VARIABLES, \"RRDSETVAR free for chart id '%s' name '%s', variable '%s'\", st->id, st->name, rs->variable);",
          "content_same": false
        },
        {
          "line": 701,
          "old_api": "strdupz",
          "new_api": "callocz",
          "old_text": "strdupz(prefix)",
          "new_text": "callocz(1, sizeof(RRDDIMVAR))",
          "old_line_content": "    rs->prefix = strdupz(prefix);",
          "new_line_content": "    RRDDIMVAR *rs = (RRDDIMVAR *)callocz(1, sizeof(RRDDIMVAR));",
          "content_same": false
        },
        {
          "line": 704,
          "old_api": "snprintfz",
          "new_api": "strdupz",
          "old_text": "snprintfz(buffer, RRDDIMVAR_ID_MAX, \"%s%s%s\", rs->prefix, rd->id, rs->suffix)",
          "new_text": "strdupz(suffix)",
          "old_line_content": "    snprintfz(buffer, RRDDIMVAR_ID_MAX, \"%s%s%s\", rs->prefix, rd->id, rs->suffix);",
          "new_line_content": "    rs->suffix = strdupz(suffix);",
          "content_same": false
        },
        {
          "line": 707,
          "old_api": "snprintfz",
          "new_api": "strdupz",
          "old_text": "snprintfz(buffer, RRDDIMVAR_ID_MAX, \"%s%s%s\", rs->prefix, rd->name, rs->suffix)",
          "new_text": "strdupz(buffer)",
          "old_line_content": "    snprintfz(buffer, RRDDIMVAR_ID_MAX, \"%s%s%s\", rs->prefix, rd->name, rs->suffix);",
          "new_line_content": "    rs->id = strdupz(buffer);",
          "content_same": false
        },
        {
          "line": 710,
          "old_api": "snprintfz",
          "new_api": "strdupz",
          "old_text": "snprintfz(buffer, RRDDIMVAR_ID_MAX, \"%s.%s\", rd->rrdset->id, rs->id)",
          "new_text": "strdupz(buffer)",
          "old_line_content": "    snprintfz(buffer, RRDDIMVAR_ID_MAX, \"%s.%s\", rd->rrdset->id, rs->id);",
          "new_line_content": "    rs->name = strdupz(buffer);",
          "content_same": false
        },
        {
          "line": 713,
          "old_api": "snprintfz",
          "new_api": "strdupz",
          "old_text": "snprintfz(buffer, RRDDIMVAR_ID_MAX, \"%s.%s\", rd->rrdset->id, rs->name)",
          "new_text": "strdupz(buffer)",
          "old_line_content": "    snprintfz(buffer, RRDDIMVAR_ID_MAX, \"%s.%s\", rd->rrdset->id, rs->name);",
          "new_line_content": "    rs->fullidid = strdupz(buffer);",
          "content_same": false
        },
        {
          "line": 716,
          "old_api": "snprintfz",
          "new_api": "strdupz",
          "old_text": "snprintfz(buffer, RRDDIMVAR_ID_MAX, \"%s.%s\", rd->rrdset->name, rs->id)",
          "new_text": "strdupz(buffer)",
          "old_line_content": "    snprintfz(buffer, RRDDIMVAR_ID_MAX, \"%s.%s\", rd->rrdset->name, rs->id);",
          "new_line_content": "    rs->fullidname = strdupz(buffer);",
          "content_same": false
        },
        {
          "line": 719,
          "old_api": "snprintfz",
          "new_api": "strdupz",
          "old_text": "snprintfz(buffer, RRDDIMVAR_ID_MAX, \"%s.%s\", rd->rrdset->name, rs->name)",
          "new_text": "strdupz(buffer)",
          "old_line_content": "    snprintfz(buffer, RRDDIMVAR_ID_MAX, \"%s.%s\", rd->rrdset->name, rs->name);",
          "new_line_content": "    rs->fullnameid = strdupz(buffer);",
          "content_same": false
        },
        {
          "line": 759,
          "old_api": "snprintfz",
          "new_api": "rrdvar_free",
          "old_text": "snprintfz(buffer, RRDDIMVAR_ID_MAX, \"%s%s%s\", rs->prefix, rd->name, rs->suffix)",
          "new_text": "rrdvar_free(st->rrdhost, &st->variables_root_index, rs->local_name)",
          "old_line_content": "            snprintfz(buffer, RRDDIMVAR_ID_MAX, \"%s%s%s\", rs->prefix, rd->name, rs->suffix);",
          "new_line_content": "            rrdvar_free(st->rrdhost, &st->variables_root_index, rs->local_name);",
          "content_same": false
        },
        {
          "line": 760,
          "old_api": "strdupz",
          "new_api": "freez",
          "old_text": "strdupz(buffer)",
          "new_text": "freez(rs->name)",
          "old_line_content": "            rs->name = strdupz(buffer);",
          "new_line_content": "            freez(rs->name);",
          "content_same": false
        },
        {
          "line": 761,
          "old_api": "rrdvar_create_and_index",
          "new_api": "snprintfz",
          "old_text": "rrdvar_create_and_index(\"local\", &st->variables_root_index, rs->name, rs->type, rs->value)",
          "new_text": "snprintfz(buffer, RRDDIMVAR_ID_MAX, \"%s%s%s\", rs->prefix, rd->name, rs->suffix)",
          "old_line_content": "            rs->local_name = rrdvar_create_and_index(\"local\", &st->variables_root_index, rs->name, rs->type, rs->value);",
          "new_line_content": "            snprintfz(buffer, RRDDIMVAR_ID_MAX, \"%s%s%s\", rs->prefix, rd->name, rs->suffix);",
          "content_same": false
        },
        {
          "line": 763,
          "old_api": "rrdvar_free",
          "new_api": "rrdvar_create_and_index",
          "old_text": "rrdvar_free(st->rrdhost, &st->rrdhost->variables_root_index, rs->host_fullidname)",
          "new_text": "rrdvar_create_and_index(\"local\", &st->variables_root_index, rs->name, rs->type, rs->value)",
          "old_line_content": "            rrdvar_free(st->rrdhost, &st->rrdhost->variables_root_index, rs->host_fullidname);",
          "new_line_content": "            rs->local_name = rrdvar_create_and_index(\"local\", &st->variables_root_index, rs->name, rs->type, rs->value);",
          "content_same": false
        },
        {
          "line": 765,
          "old_api": "snprintfz",
          "new_api": "rrdvar_free",
          "old_text": "snprintfz(buffer, RRDDIMVAR_ID_MAX, \"%s.%s\", st->id, rs->name)",
          "new_text": "rrdvar_free(st->rrdhost, &st->rrdhost->variables_root_index, rs->host_fullidname)",
          "old_line_content": "            snprintfz(buffer, RRDDIMVAR_ID_MAX, \"%s.%s\", st->id, rs->name);",
          "new_line_content": "            rrdvar_free(st->rrdhost, &st->rrdhost->variables_root_index, rs->host_fullidname);",
          "content_same": false
        },
        {
          "line": 766,
          "old_api": "strdupz",
          "new_api": "freez",
          "old_text": "strdupz(buffer)",
          "new_text": "freez(rs->fullidname)",
          "old_line_content": "            rs->fullidname = strdupz(buffer);",
          "new_line_content": "            freez(rs->fullidname);",
          "content_same": false
        },
        {
          "line": 767,
          "old_api": "rrdvar_create_and_index",
          "new_api": "snprintfz",
          "old_text": "rrdvar_create_and_index(\"host\", &st->rrdhost->variables_root_index,\n                                                             rs->fullidname, rs->type, rs->value)",
          "new_text": "snprintfz(buffer, RRDDIMVAR_ID_MAX, \"%s.%s\", st->id, rs->name)",
          "old_line_content": "            rs->host_fullidname = rrdvar_create_and_index(\"host\", &st->rrdhost->variables_root_index,",
          "new_line_content": "            snprintfz(buffer, RRDDIMVAR_ID_MAX, \"%s.%s\", st->id, rs->name);",
          "content_same": false
        },
        {
          "line": 773,
          "old_api": "snprintfz",
          "new_api": "rrdvar_free",
          "old_text": "snprintfz(buffer, RRDDIMVAR_ID_MAX, \"%s.%s\", st->name, rs->id)",
          "new_text": "rrdvar_free(st->rrdhost, &st->rrdhost->variables_root_index, rs->host_fullnameid)",
          "old_line_content": "            snprintfz(buffer, RRDDIMVAR_ID_MAX, \"%s.%s\", st->name, rs->id);",
          "new_line_content": "            rrdvar_free(st->rrdhost, &st->rrdhost->variables_root_index, rs->host_fullnameid);",
          "content_same": false
        },
        {
          "line": 774,
          "old_api": "strdupz",
          "new_api": "freez",
          "old_text": "strdupz(buffer)",
          "new_text": "freez(rs->fullnameid)",
          "old_line_content": "            rs->fullnameid = strdupz(buffer);",
          "new_line_content": "            freez(rs->fullnameid);",
          "content_same": false
        },
        {
          "line": 775,
          "old_api": "rrdvar_create_and_index",
          "new_api": "snprintfz",
          "old_text": "rrdvar_create_and_index(\"host\", &st->rrdhost->variables_root_index,\n                                                          rs->fullnameid, rs->type, rs->value)",
          "new_text": "snprintfz(buffer, RRDDIMVAR_ID_MAX, \"%s.%s\", st->name, rs->id)",
          "old_line_content": "            rs->host_fullnameid = rrdvar_create_and_index(\"host\", &st->rrdhost->variables_root_index,",
          "new_line_content": "            snprintfz(buffer, RRDDIMVAR_ID_MAX, \"%s.%s\", st->name, rs->id);",
          "content_same": false
        },
        {
          "line": 781,
          "old_api": "snprintfz",
          "new_api": "rrdvar_free",
          "old_text": "snprintfz(buffer, RRDDIMVAR_ID_MAX, \"%s.%s\", st->name, rs->name)",
          "new_text": "rrdvar_free(st->rrdhost, &st->rrdhost->variables_root_index, rs->host_fullnamename)",
          "old_line_content": "            snprintfz(buffer, RRDDIMVAR_ID_MAX, \"%s.%s\", st->name, rs->name);",
          "new_line_content": "            rrdvar_free(st->rrdhost, &st->rrdhost->variables_root_index, rs->host_fullnamename);",
          "content_same": false
        },
        {
          "line": 782,
          "old_api": "strdupz",
          "new_api": "freez",
          "old_text": "strdupz(buffer)",
          "new_text": "freez(rs->fullnamename)",
          "old_line_content": "            rs->fullnamename = strdupz(buffer);",
          "new_line_content": "            freez(rs->fullnamename);",
          "content_same": false
        },
        {
          "line": 783,
          "old_api": "rrdvar_create_and_index",
          "new_api": "snprintfz",
          "old_text": "rrdvar_create_and_index(\"host\", &st->rrdhost->variables_root_index,\n                                                          rs->fullnamename, rs->type, rs->value)",
          "new_text": "snprintfz(buffer, RRDDIMVAR_ID_MAX, \"%s.%s\", st->name, rs->name)",
          "old_line_content": "            rs->host_fullnamename = rrdvar_create_and_index(\"host\", &st->rrdhost->variables_root_index,",
          "new_line_content": "            snprintfz(buffer, RRDDIMVAR_ID_MAX, \"%s.%s\", st->name, rs->name);",
          "content_same": false
        },
        {
          "line": 794,
          "old_api": "rrdvar_free",
          "new_api": "debug",
          "old_text": "rrdvar_free(st->rrdhost, &st->variables_root_index, rs->local_id)",
          "new_text": "debug(D_VARIABLES, \"RRDDIMSET free for chart id '%s' name '%s', dimension id '%s', name '%s', prefix='%s', suffix='%s'\", st->id, st->name, rd->id, rd->name, rs->prefix, rs->suffix)",
          "old_line_content": "    rrdvar_free(st->rrdhost, &st->variables_root_index, rs->local_id);",
          "new_line_content": "    debug(D_VARIABLES, \"RRDDIMSET free for chart id '%s' name '%s', dimension id '%s', name '%s', prefix='%s', suffix='%s'\", st->id, st->name, rd->id, rd->name, rs->prefix, rs->suffix);",
          "content_same": false
        },
        {
          "line": 863,
          "old_api": "time",
          "new_api": "debug",
          "old_text": "time(NULL)",
          "new_text": "debug(D_HEALTH, \"Health linking alarm '%s.%s' to chart '%s' of host '%s'\", rc->chart?rc->chart:\"NOCHART\", rc->name, st->id, st->rrdhost->hostname)",
          "old_line_content": "    rc->last_status_change = time(NULL);",
          "new_line_content": "    debug(D_HEALTH, \"Health linking alarm '%s.%s' to chart '%s' of host '%s'\", rc->chart?rc->chart:\"NOCHART\", rc->name, st->id, st->rrdhost->hostname);",
          "content_same": false
        },
        {
          "line": 896,
          "old_api": "snprintfz",
          "new_api": "rrdvar_create_and_index",
          "old_text": "snprintfz(fullname, RRDVAR_MAX_LENGTH, \"%s.%s\", st->name, rc->name)",
          "new_text": "rrdvar_create_and_index(\"host\", &st->rrdhost->variables_root_index, fullname, RRDVAR_TYPE_CALCULATED, &rc->value)",
          "old_line_content": "    snprintfz(fullname, RRDVAR_MAX_LENGTH, \"%s.%s\", st->name, rc->name);",
          "new_line_content": "    rc->hostid   = rrdvar_create_and_index(\"host\", &st->rrdhost->variables_root_index, fullname, RRDVAR_TYPE_CALCULATED, &rc->value);",
          "content_same": false
        },
        {
          "line": 899,
          "old_api": "strdupz",
          "new_api": "rrdvar_create_and_index",
          "old_text": "strdupz(st->units)",
          "new_text": "rrdvar_create_and_index(\"host\", &st->rrdhost->variables_root_index, fullname, RRDVAR_TYPE_CALCULATED, &rc->value)",
          "old_line_content": "\tif(!rc->units) rc->units = strdupz(st->units);",
          "new_line_content": "    rc->hostname = rrdvar_create_and_index(\"host\", &st->rrdhost->variables_root_index, fullname, RRDVAR_TYPE_CALCULATED, &rc->value);",
          "content_same": false
        },
        {
          "line": 1006,
          "old_api": "error",
          "new_api": "strcmp",
          "old_text": "error(\"Health alarm '%s.%s' already exists in host '%s'.\", chart, name, host->hostname)",
          "new_text": "strcmp(chart, rc->chart)",
          "old_line_content": "            error(\"Health alarm '%s.%s' already exists in host '%s'.\", chart, name, host->hostname);",
          "new_line_content": "        if (unlikely(rc->chart && rc->hash == hash_name && rc->hash_chart == hash_chart && !strcmp(name, rc->name) && !strcmp(chart, rc->chart))) {",
          "content_same": false
        },
        {
          "line": 1084,
          "old_api": "rrdcalc_exists",
          "new_api": "debug",
          "old_text": "rrdcalc_exists(host, chart, rt->name, 0, 0)",
          "new_text": "debug(D_HEALTH, \"Health creating dynamic alarm (from template) '%s.%s'\", chart, rt->name)",
          "old_line_content": "    if(rrdcalc_exists(host, chart, rt->name, 0, 0))",
          "new_line_content": "    debug(D_HEALTH, \"Health creating dynamic alarm (from template) '%s.%s'\", chart, rt->name);",
          "content_same": false
        },
        {
          "line": 1089,
          "old_api": "rrdcalc_get_unique_id",
          "new_api": "callocz",
          "old_text": "rrdcalc_get_unique_id(host, chart, rt->name, &rc->next_event_id)",
          "new_text": "callocz(1, sizeof(RRDCALC))",
          "old_line_content": "    rc->id = rrdcalc_get_unique_id(host, chart, rt->name, &rc->next_event_id);",
          "new_line_content": "    RRDCALC *rc = callocz(1, sizeof(RRDCALC));",
          "content_same": false
        },
        {
          "line": 1091,
          "old_api": "simple_hash",
          "new_api": "rrdcalc_get_unique_id",
          "old_text": "simple_hash(rc->name)",
          "new_text": "rrdcalc_get_unique_id(host, chart, rt->name, &rc->next_event_id)",
          "old_line_content": "    rc->hash = simple_hash(rc->name);",
          "new_line_content": "    rc->id = rrdcalc_get_unique_id(host, chart, rt->name, &rc->next_event_id);",
          "content_same": false
        },
        {
          "line": 1095,
          "old_api": "strdupz",
          "new_api": "simple_hash",
          "old_text": "strdupz(rt->dimensions)",
          "new_text": "simple_hash(rc->chart)",
          "old_line_content": "    if(rt->dimensions) rc->dimensions = strdupz(rt->dimensions);",
          "new_line_content": "    rc->hash_chart = simple_hash(rc->chart);",
          "content_same": false
        },
        {
          "line": 1122,
          "old_api": "error",
          "new_api": "expression_parse",
          "old_text": "error(\"Health alarm '%s.%s': failed to parse calculation expression '%s'\", chart, rt->name, rt->calculation->source)",
          "new_text": "expression_parse(rt->calculation->source, NULL, NULL)",
          "old_line_content": "            error(\"Health alarm '%s.%s': failed to parse calculation expression '%s'\", chart, rt->name, rt->calculation->source);",
          "new_line_content": "        rc->calculation = expression_parse(rt->calculation->source, NULL, NULL);",
          "content_same": false
        },
        {
          "line": 1127,
          "old_api": "error",
          "new_api": "expression_parse",
          "old_text": "error(\"Health alarm '%s.%s': failed to re-parse warning expression '%s'\", chart, rt->name, rt->warning->source)",
          "new_text": "expression_parse(rt->warning->source, NULL, NULL)",
          "old_line_content": "            error(\"Health alarm '%s.%s': failed to re-parse warning expression '%s'\", chart, rt->name, rt->warning->source);",
          "new_line_content": "        rc->warning = expression_parse(rt->warning->source, NULL, NULL);",
          "content_same": false
        },
        {
          "line": 1132,
          "old_api": "error",
          "new_api": "expression_parse",
          "old_text": "error(\"Health alarm '%s.%s': failed to re-parse critical expression '%s'\", chart, rt->name, rt->critical->source)",
          "new_text": "expression_parse(rt->critical->source, NULL, NULL)",
          "old_line_content": "            error(\"Health alarm '%s.%s': failed to re-parse critical expression '%s'\", chart, rt->name, rt->critical->source);",
          "new_line_content": "        rc->critical = expression_parse(rt->critical->source, NULL, NULL);",
          "content_same": false
        },
        {
          "line": 1185,
          "old_api": "expression_free",
          "new_api": "error",
          "old_text": "expression_free(rc->calculation)",
          "new_text": "error(\"Cannot unlink unlink '%s.%s' from host '%s': This host does not have any calculations\", rc->chart?rc->chart:\"NOCHART\", rc->name, host->hostname)",
          "old_line_content": "    expression_free(rc->calculation);",
          "new_line_content": "        error(\"Cannot unlink unlink '%s.%s' from host '%s': This host does not have any calculations\", rc->chart?rc->chart:\"NOCHART\", rc->name, host->hostname);",
          "content_same": false
        },
        {
          "line": 1189,
          "old_api": "freez",
          "new_api": "expression_free",
          "old_text": "freez(rc->name)",
          "new_text": "expression_free(rc->critical)",
          "old_line_content": "    freez(rc->name);",
          "new_line_content": "    expression_free(rc->critical);",
          "content_same": false
        },
        {
          "line": 1210,
          "old_api": "unlikely",
          "new_api": "strcmp",
          "old_text": "unlikely(!rc)",
          "new_text": "strcmp(rt->context, st->context)",
          "old_line_content": "            if(unlikely(!rc))",
          "new_line_content": "        if(rt->hash_context == st->hash_context && !strcmp(rt->context, st->context)) {",
          "content_same": false
        },
        {
          "line": 1211,
          "old_api": "error",
          "new_api": "rrdcalc_create",
          "old_text": "error(\"Health tried to create alarm from template '%s', but it failed\", rt->name)",
          "new_text": "rrdcalc_create(st->rrdhost, rt, st->id)",
          "old_line_content": "                error(\"Health tried to create alarm from template '%s', but it failed\", rt->name);",
          "new_line_content": "            RRDCALC *rc = rrdcalc_create(st->rrdhost, rt, st->id);",
          "content_same": false
        },
        {
          "line": 1244,
          "old_api": "freez",
          "new_api": "expression_free",
          "old_text": "freez(rt->name)",
          "new_text": "expression_free(rt->critical)",
          "old_line_content": "    freez(rt->name);",
          "new_line_content": "    expression_free(rt->critical);",
          "content_same": false
        },
        {
          "line": 1297,
          "old_api": "debug",
          "new_api": "rrdcalc_get_unique_id",
          "old_text": "debug(D_HEALTH, \"Health configuration adding alarm '%s.%s' (%u): exec '%s', recipient '%s', green %Lf, red %Lf, lookup: group %d, after %d, before %d, options %u, dimensions '%s', update every %d, calculation '%s', warning '%s', critical '%s', source '%s', delay up %d, delay down %d, delay max %d, delay_multiplier %f\",\n          rc->chart?rc->chart:\"NOCHART\",\n          rc->name,\n          rc->id,\n          (rc->exec)?rc->exec:\"DEFAULT\",\n          (rc->recipient)?rc->recipient:\"DEFAULT\",\n          rc->green,\n          rc->red,\n          rc->group,\n          rc->after,\n          rc->before,\n          rc->options,\n          (rc->dimensions)?rc->dimensions:\"NONE\",\n          rc->update_every,\n          (rc->calculation)?rc->calculation->parsed_as:\"NONE\",\n          (rc->warning)?rc->warning->parsed_as:\"NONE\",\n          (rc->critical)?rc->critical->parsed_as:\"NONE\",\n          rc->source,\n          rc->delay_up_duration,\n          rc->delay_down_duration,\n          rc->delay_max_duration,\n          rc->delay_multiplier\n    )",
          "new_text": "rrdcalc_get_unique_id(&localhost, rc->chart, rc->name, &rc->next_event_id)",
          "old_line_content": "    debug(D_HEALTH, \"Health configuration adding alarm '%s.%s' (%u): exec '%s', recipient '%s', green %Lf, red %Lf, lookup: group %d, after %d, before %d, options %u, dimensions '%s', update every %d, calculation '%s', warning '%s', critical '%s', source '%s', delay up %d, delay down %d, delay max %d, delay_multiplier %f\",",
          "new_line_content": "    rc->id = rrdcalc_get_unique_id(&localhost, rc->chart, rc->name, &rc->next_event_id);",
          "content_same": false
        },
        {
          "line": 1450,
          "old_api": "strcasecmp",
          "new_api": "isspace",
          "old_text": "strcasecmp(key, \"up\")",
          "new_text": "isspace(*s)",
          "old_line_content": "        if(!strcasecmp(key, \"up\")) {",
          "new_line_content": "        while(*s && isspace(*s)) *s++ = '\\0';",
          "content_same": false
        },
        {
          "line": 1452,
          "old_api": "error",
          "new_api": "strcasecmp",
          "old_text": "error(\"Health configuration at line %zu of file '%s/%s': invalid value '%s' for '%s' keyword\",\n                      line, path, file, value, key)",
          "new_text": "strcasecmp(key, \"up\")",
          "old_line_content": "                error(\"Health configuration at line %zu of file '%s/%s': invalid value '%s' for '%s' keyword\",",
          "new_line_content": "        if(!strcasecmp(key, \"up\")) {",
          "content_same": false
        },
        {
          "line": 1459,
          "old_api": "error",
          "new_api": "strcasecmp",
          "old_text": "error(\"Health configuration at line %zu of file '%s/%s': invalid value '%s' for '%s' keyword\",\n                      line, path, file, value, key)",
          "new_text": "strcasecmp(key, \"down\")",
          "old_line_content": "                error(\"Health configuration at line %zu of file '%s/%s': invalid value '%s' for '%s' keyword\",",
          "new_line_content": "        else if(!strcasecmp(key, \"down\")) {",
          "content_same": false
        },
        {
          "line": 1466,
          "old_api": "islessequal",
          "new_api": "strcasecmp",
          "old_text": "islessequal(*delay_multiplier, 0)",
          "new_text": "strcasecmp(key, \"multiplier\")",
          "old_line_content": "            if(isnan(*delay_multiplier) || isinf(*delay_multiplier) || islessequal(*delay_multiplier, 0)) {",
          "new_line_content": "        else if(!strcasecmp(key, \"multiplier\")) {",
          "content_same": false
        },
        {
          "line": 1467,
          "old_api": "error",
          "new_api": "strtof",
          "old_text": "error(\"Health configuration at line %zu of file '%s/%s': invalid value '%s' for '%s' keyword\",\n                      line, path, file, value, key)",
          "new_text": "strtof(value, NULL)",
          "old_line_content": "                error(\"Health configuration at line %zu of file '%s/%s': invalid value '%s' for '%s' keyword\",",
          "new_line_content": "            *delay_multiplier = strtof(value, NULL);",
          "content_same": false
        },
        {
          "line": 1474,
          "old_api": "error",
          "new_api": "strcasecmp",
          "old_text": "error(\"Health configuration at line %zu of file '%s/%s': invalid value '%s' for '%s' keyword\",\n                      line, path, file, value, key)",
          "new_text": "strcasecmp(key, \"max\")",
          "old_line_content": "                error(\"Health configuration at line %zu of file '%s/%s': invalid value '%s' for '%s' keyword\",",
          "new_line_content": "        else if(!strcasecmp(key, \"max\")) {",
          "content_same": false
        },
        {
          "line": 1512,
          "old_api": "freez",
          "new_api": "debug",
          "old_text": "freez(*dimensions)",
          "new_text": "debug(D_HEALTH, \"Health configuration parsing database lookup %zu@%s/%s: %s\", line, path, file, string)",
          "old_line_content": "    if(*dimensions) freez(*dimensions);",
          "new_line_content": "    debug(D_HEALTH, \"Health configuration parsing database lookup %zu@%s/%s: %s\", line, path, file, string);",
          "content_same": false
        },
        {
          "line": 1526,
          "old_api": "error",
          "new_api": "isspace",
          "old_text": "error(\"Health configuration invalid chart calculation at line %zu of file '%s/%s': expected group method followed by the 'after' time, but got '%s'\",\n              line, path, file, key)",
          "new_text": "isspace(*s)",
          "old_line_content": "        error(\"Health configuration invalid chart calculation at line %zu of file '%s/%s': expected group method followed by the 'after' time, but got '%s'\",",
          "new_line_content": "    while(*s && isspace(*s)) *s++ = '\\0';",
          "content_same": false
        },
        {
          "line": 1542,
          "old_api": "health_parse_duration",
          "new_api": "isspace",
          "old_text": "health_parse_duration(key, after)",
          "new_text": "isspace(*s)",
          "old_line_content": "    if(!health_parse_duration(key, after)) {",
          "new_line_content": "    while(*s && isspace(*s)) *s++ = '\\0';",
          "content_same": false
        },
        {
          "line": 1560,
          "old_api": "isspace",
          "new_api": "strcasecmp",
          "old_text": "isspace(*s)",
          "new_text": "strcasecmp(key, \"at\")",
          "old_line_content": "            while(*s && !isspace(*s)) s++;",
          "new_line_content": "        if(!strcasecmp(key, \"at\")) {",
          "content_same": false
        },
        {
          "line": 1563,
          "old_api": "health_parse_duration",
          "new_api": "isspace",
          "old_text": "health_parse_duration(value, before)",
          "new_text": "isspace(*s)",
          "old_line_content": "            if (!health_parse_duration(value, before)) {",
          "new_line_content": "            while(*s && isspace(*s)) *s++ = '\\0';",
          "content_same": false
        },
        {
          "line": 1570,
          "old_api": "isspace",
          "new_api": "strcasecmp",
          "old_text": "isspace(*s)",
          "new_text": "strcasecmp(key, HEALTH_EVERY_KEY)",
          "old_line_content": "            while(*s && !isspace(*s)) s++;",
          "new_line_content": "        else if(!strcasecmp(key, HEALTH_EVERY_KEY)) {",
          "content_same": false
        },
        {
          "line": 1573,
          "old_api": "health_parse_duration",
          "new_api": "isspace",
          "old_text": "health_parse_duration(value, every)",
          "new_text": "isspace(*s)",
          "old_line_content": "            if (!health_parse_duration(value, every)) {",
          "new_line_content": "            while(*s && isspace(*s)) *s++ = '\\0';",
          "content_same": false
        },
        {
          "line": 1595,
          "old_api": "strdupz",
          "new_api": "strcasecmp",
          "old_text": "strdupz(s)",
          "new_text": "strcasecmp(key, \"of\")",
          "old_line_content": "               *dimensions = strdupz(s);",
          "new_line_content": "        else if(!strcasecmp(key, \"of\")) {",
          "content_same": false
        },
        {
          "line": 1638,
          "old_api": "simple_uhash",
          "new_api": "unlikely",
          "old_text": "simple_uhash(HEALTH_TEMPLATE_KEY)",
          "new_text": "unlikely(!hash_alarm)",
          "old_line_content": "        hash_template = simple_uhash(HEALTH_TEMPLATE_KEY);",
          "new_line_content": "    if(unlikely(!hash_alarm)) {",
          "content_same": false
        },
        {
          "line": 1648,
          "old_api": "simple_hash",
          "new_api": "simple_uhash",
          "old_text": "simple_hash(HEALTH_UNITS_KEY)",
          "new_text": "simple_uhash(HEALTH_EXEC_KEY)",
          "old_line_content": "        hash_units = simple_hash(HEALTH_UNITS_KEY);",
          "new_line_content": "        hash_exec = simple_uhash(HEALTH_EXEC_KEY);",
          "content_same": false
        },
        {
          "line": 1649,
          "old_api": "simple_hash",
          "new_api": "simple_uhash",
          "old_text": "simple_hash(HEALTH_INFO_KEY)",
          "new_text": "simple_uhash(HEALTH_EVERY_KEY)",
          "old_line_content": "        hash_info = simple_hash(HEALTH_INFO_KEY);",
          "new_line_content": "        hash_every = simple_uhash(HEALTH_EVERY_KEY);",
          "content_same": false
        },
        {
          "line": 1651,
          "old_api": "simple_uhash",
          "new_api": "simple_hash",
          "old_text": "simple_uhash(HEALTH_DELAY_KEY)",
          "new_text": "simple_hash(HEALTH_INFO_KEY)",
          "old_line_content": "        hash_delay = simple_uhash(HEALTH_DELAY_KEY);",
          "new_line_content": "        hash_info = simple_hash(HEALTH_INFO_KEY);",
          "content_same": false
        },
        {
          "line": 1657,
          "old_api": "error",
          "new_api": "fopen",
          "old_text": "error(\"Health configuration cannot read file '%s'.\", buffer)",
          "new_text": "fopen(buffer, \"r\")",
          "old_line_content": "        error(\"Health configuration cannot read file '%s'.\", buffer);",
          "new_line_content": "    FILE *fp = fopen(buffer, \"r\");",
          "content_same": false
        },
        {
          "line": 1712,
          "old_api": "strcasecmp",
          "new_api": "simple_uhash",
          "old_text": "strcasecmp(key, HEALTH_ALARM_KEY)",
          "new_text": "simple_uhash(key)",
          "old_line_content": "        if(hash == hash_alarm && !strcasecmp(key, HEALTH_ALARM_KEY)) {",
          "new_line_content": "        uint32_t hash = simple_uhash(key);",
          "content_same": false
        },
        {
          "line": 1714,
          "old_api": "rrdcalc_free",
          "new_api": "strcasecmp",
          "old_text": "rrdcalc_free(&localhost, rc)",
          "new_text": "strcasecmp(key, HEALTH_ALARM_KEY)",
          "old_line_content": "                rrdcalc_free(&localhost, rc);",
          "new_line_content": "        if(hash == hash_alarm && !strcasecmp(key, HEALTH_ALARM_KEY)) {",
          "content_same": false
        },
        {
          "line": 1724,
          "old_api": "strdupz",
          "new_api": "callocz",
          "old_text": "strdupz(value)",
          "new_text": "callocz(1, sizeof(RRDCALC))",
          "old_line_content": "            rc->name = tabs2spaces(strdupz(value));",
          "new_line_content": "            rc = callocz(1, sizeof(RRDCALC));",
          "content_same": false
        },
        {
          "line": 1726,
          "old_api": "health_source_file",
          "new_api": "strdupz",
          "old_text": "health_source_file(line, path, filename)",
          "new_text": "strdupz(value)",
          "old_line_content": "            rc->source = health_source_file(line, path, filename);",
          "new_line_content": "            rc->name = tabs2spaces(strdupz(value));",
          "content_same": false
        },
        {
          "line": 1736,
          "old_api": "strcasecmp",
          "new_api": "error",
          "old_text": "strcasecmp(key, HEALTH_TEMPLATE_KEY)",
          "new_text": "error(\"Health configuration renamed alarm '%s' to '%s'\", value, rc->name)",
          "old_line_content": "        else if(hash == hash_template && !strcasecmp(key, HEALTH_TEMPLATE_KEY)) {",
          "new_line_content": "                error(\"Health configuration renamed alarm '%s' to '%s'\", value, rc->name);",
          "content_same": false
        },
        {
          "line": 1738,
          "old_api": "rrdcalc_add_alarm_from_config",
          "new_api": "strcasecmp",
          "old_text": "rrdcalc_add_alarm_from_config(&localhost, rc)",
          "new_text": "strcasecmp(key, HEALTH_TEMPLATE_KEY)",
          "old_line_content": "                if(!rrdcalc_add_alarm_from_config(&localhost, rc))",
          "new_line_content": "        else if(hash == hash_template && !strcasecmp(key, HEALTH_TEMPLATE_KEY)) {",
          "content_same": false
        },
        {
          "line": 1746,
          "old_api": "callocz",
          "new_api": "rrdcalctemplate_free",
          "old_text": "callocz(1, sizeof(RRDCALCTEMPLATE))",
          "new_text": "rrdcalctemplate_free(&localhost, rt)",
          "old_line_content": "            rt = callocz(1, sizeof(RRDCALCTEMPLATE));",
          "new_line_content": "                rrdcalctemplate_free(&localhost, rt);",
          "content_same": false
        },
        {
          "line": 1748,
          "old_api": "simple_hash",
          "new_api": "callocz",
          "old_text": "simple_hash(rt->name)",
          "new_text": "callocz(1, sizeof(RRDCALCTEMPLATE))",
          "old_line_content": "            rt->hash_name = simple_hash(rt->name);",
          "new_line_content": "            rt = callocz(1, sizeof(RRDCALCTEMPLATE));",
          "content_same": false
        },
        {
          "line": 1749,
          "old_api": "health_source_file",
          "new_api": "strdupz",
          "old_text": "health_source_file(line, path, filename)",
          "new_text": "strdupz(value)",
          "old_line_content": "            rt->source = health_source_file(line, path, filename);",
          "new_line_content": "            rt->name = tabs2spaces(strdupz(value));",
          "content_same": false
        },
        {
          "line": 1760,
          "old_api": "strcmp",
          "new_api": "strcasecmp",
          "old_text": "strcmp(rc->chart, value)",
          "new_text": "strcasecmp(key, HEALTH_ON_KEY)",
          "old_line_content": "                    if(strcmp(rc->chart, value))",
          "new_line_content": "            if(hash == hash_on && !strcasecmp(key, HEALTH_ON_KEY)) {",
          "content_same": false
        },
        {
          "line": 1766,
          "old_api": "strdupz",
          "new_api": "freez",
          "old_text": "strdupz(value)",
          "new_text": "freez(rc->chart)",
          "old_line_content": "                rc->chart = tabs2spaces(strdupz(value));",
          "new_line_content": "                    freez(rc->chart);",
          "content_same": false
        },
        {
          "line": 1769,
          "old_api": "strcasecmp",
          "new_api": "simple_hash",
          "old_text": "strcasecmp(key, HEALTH_LOOKUP_KEY)",
          "new_text": "simple_hash(rc->chart)",
          "old_line_content": "            else if(hash == hash_lookup && !strcasecmp(key, HEALTH_LOOKUP_KEY)) {",
          "new_line_content": "                rc->hash_chart = simple_hash(rc->chart);",
          "content_same": false
        },
        {
          "line": 1776,
          "old_api": "info",
          "new_api": "strcasecmp",
          "old_text": "info(\"Health configuration at line %zu of file '%s/%s' for alarm '%s' at key '%s' cannot parse duration: '%s'.\",\n                         line, path, filename, rc->name, key, value)",
          "new_text": "strcasecmp(key, HEALTH_EVERY_KEY)",
          "old_line_content": "                    info(\"Health configuration at line %zu of file '%s/%s' for alarm '%s' at key '%s' cannot parse duration: '%s'.\",",
          "new_line_content": "            else if(hash == hash_every && !strcasecmp(key, HEALTH_EVERY_KEY)) {",
          "content_same": false
        },
        {
          "line": 1781,
          "old_api": "strtold",
          "new_api": "strcasecmp",
          "old_text": "strtold(value, &e)",
          "new_text": "strcasecmp(key, HEALTH_GREEN_KEY)",
          "old_line_content": "                rc->green = strtold(value, &e);",
          "new_line_content": "            else if(hash == hash_green && !strcasecmp(key, HEALTH_GREEN_KEY)) {",
          "content_same": false
        },
        {
          "line": 1783,
          "old_api": "info",
          "new_api": "strtold",
          "old_text": "info(\"Health configuration at line %zu of file '%s/%s' for alarm '%s' at key '%s' leaves this string unmatched: '%s'.\",\n                         line, path, filename, rc->name, key, e)",
          "new_text": "strtold(value, &e)",
          "old_line_content": "                    info(\"Health configuration at line %zu of file '%s/%s' for alarm '%s' at key '%s' leaves this string unmatched: '%s'.\",",
          "new_line_content": "                rc->green = strtold(value, &e);",
          "content_same": false
        },
        {
          "line": 1789,
          "old_api": "strtold",
          "new_api": "strcasecmp",
          "old_text": "strtold(value, &e)",
          "new_text": "strcasecmp(key, HEALTH_RED_KEY)",
          "old_line_content": "                rc->red = strtold(value, &e);",
          "new_line_content": "            else if(hash == hash_red && !strcasecmp(key, HEALTH_RED_KEY)) {",
          "content_same": false
        },
        {
          "line": 1791,
          "old_api": "info",
          "new_api": "strtold",
          "old_text": "info(\"Health configuration at line %zu of file '%s/%s' for alarm '%s' at key '%s' leaves this string unmatched: '%s'.\",\n                         line, path, filename, rc->name, key, e)",
          "new_text": "strtold(value, &e)",
          "old_line_content": "                    info(\"Health configuration at line %zu of file '%s/%s' for alarm '%s' at key '%s' leaves this string unmatched: '%s'.\",",
          "new_line_content": "                rc->red = strtold(value, &e);",
          "content_same": false
        },
        {
          "line": 1800,
          "old_api": "error",
          "new_api": "expression_parse",
          "old_text": "error(\"Health configuration at line %zu of file '%s/%s' for alarm '%s' at key '%s' has unparse-able expression '%s': %s at '%s'\",\n                          line, path, filename, rc->name, key, value, expression_strerror(error), failed_at)",
          "new_text": "expression_parse(value, &failed_at, &error)",
          "old_line_content": "                    error(\"Health configuration at line %zu of file '%s/%s' for alarm '%s' at key '%s' has unparse-able expression '%s': %s at '%s'\",",
          "new_line_content": "                rc->calculation = expression_parse(value, &failed_at, &error);",
          "content_same": false
        },
        {
          "line": 1809,
          "old_api": "error",
          "new_api": "expression_parse",
          "old_text": "error(\"Health configuration at line %zu of file '%s/%s' for alarm '%s' at key '%s' has unparse-able expression '%s': %s at '%s'\",\n                          line, path, filename, rc->name, key, value, expression_strerror(error), failed_at)",
          "new_text": "expression_parse(value, &failed_at, &error)",
          "old_line_content": "                    error(\"Health configuration at line %zu of file '%s/%s' for alarm '%s' at key '%s' has unparse-able expression '%s': %s at '%s'\",",
          "new_line_content": "                rc->warning = expression_parse(value, &failed_at, &error);",
          "content_same": false
        },
        {
          "line": 1818,
          "old_api": "error",
          "new_api": "expression_parse",
          "old_text": "error(\"Health configuration at line %zu of file '%s/%s' for alarm '%s' at key '%s' has unparse-able expression '%s': %s at '%s'\",\n                          line, path, filename, rc->name, key, value, expression_strerror(error), failed_at)",
          "new_text": "expression_parse(value, &failed_at, &error)",
          "old_line_content": "                    error(\"Health configuration at line %zu of file '%s/%s' for alarm '%s' at key '%s' has unparse-able expression '%s': %s at '%s'\",",
          "new_line_content": "                rc->critical = expression_parse(value, &failed_at, &error);",
          "content_same": false
        },
        {
          "line": 1824,
          "old_api": "strcmp",
          "new_api": "strcasecmp",
          "old_text": "strcmp(rc->exec, value)",
          "new_text": "strcasecmp(key, HEALTH_EXEC_KEY)",
          "old_line_content": "                    if(strcmp(rc->exec, value))",
          "new_line_content": "            else if(hash == hash_exec && !strcasecmp(key, HEALTH_EXEC_KEY)) {",
          "content_same": false
        },
        {
          "line": 1830,
          "old_api": "strdupz",
          "new_api": "freez",
          "old_text": "strdupz(value)",
          "new_text": "freez(rc->exec)",
          "old_line_content": "                rc->exec = tabs2spaces(strdupz(value));",
          "new_line_content": "                    freez(rc->exec);",
          "content_same": false
        },
        {
          "line": 1832,
          "old_api": "strcasecmp",
          "new_api": "strdupz",
          "old_text": "strcasecmp(key, HEALTH_RECIPIENT_KEY)",
          "new_text": "strdupz(value)",
          "old_line_content": "            else if(hash == hash_recipient && !strcasecmp(key, HEALTH_RECIPIENT_KEY)) {",
          "new_line_content": "                rc->exec = tabs2spaces(strdupz(value));",
          "content_same": false
        },
        {
          "line": 1834,
          "old_api": "strcmp",
          "new_api": "strcasecmp",
          "old_text": "strcmp(rc->recipient, value)",
          "new_text": "strcasecmp(key, HEALTH_RECIPIENT_KEY)",
          "old_line_content": "                    if(strcmp(rc->recipient, value))",
          "new_line_content": "            else if(hash == hash_recipient && !strcasecmp(key, HEALTH_RECIPIENT_KEY)) {",
          "content_same": false
        },
        {
          "line": 1840,
          "old_api": "strdupz",
          "new_api": "freez",
          "old_text": "strdupz(value)",
          "new_text": "freez(rc->recipient)",
          "old_line_content": "                rc->recipient = tabs2spaces(strdupz(value));",
          "new_line_content": "                    freez(rc->recipient);",
          "content_same": false
        },
        {
          "line": 1842,
          "old_api": "strcasecmp",
          "new_api": "strdupz",
          "old_text": "strcasecmp(key, HEALTH_UNITS_KEY)",
          "new_text": "strdupz(value)",
          "old_line_content": "            else if(hash == hash_units && !strcasecmp(key, HEALTH_UNITS_KEY)) {",
          "new_line_content": "                rc->recipient = tabs2spaces(strdupz(value));",
          "content_same": false
        },
        {
          "line": 1844,
          "old_api": "strcmp",
          "new_api": "strcasecmp",
          "old_text": "strcmp(rc->units, value)",
          "new_text": "strcasecmp(key, HEALTH_UNITS_KEY)",
          "old_line_content": "                    if(strcmp(rc->units, value))",
          "new_line_content": "            else if(hash == hash_units && !strcasecmp(key, HEALTH_UNITS_KEY)) {",
          "content_same": false
        },
        {
          "line": 1850,
          "old_api": "strdupz",
          "new_api": "freez",
          "old_text": "strdupz(value)",
          "new_text": "freez(rc->units)",
          "old_line_content": "                rc->units = tabs2spaces(strdupz(value));",
          "new_line_content": "                    freez(rc->units);",
          "content_same": false
        },
        {
          "line": 1853,
          "old_api": "strcasecmp",
          "new_api": "strip_quotes",
          "old_text": "strcasecmp(key, HEALTH_INFO_KEY)",
          "new_text": "strip_quotes(rc->units)",
          "old_line_content": "            else if(hash == hash_info && !strcasecmp(key, HEALTH_INFO_KEY)) {",
          "new_line_content": "                strip_quotes(rc->units);",
          "content_same": false
        },
        {
          "line": 1855,
          "old_api": "strcmp",
          "new_api": "strcasecmp",
          "old_text": "strcmp(rc->info, value)",
          "new_text": "strcasecmp(key, HEALTH_INFO_KEY)",
          "old_line_content": "                    if(strcmp(rc->info, value))",
          "new_line_content": "            else if(hash == hash_info && !strcasecmp(key, HEALTH_INFO_KEY)) {",
          "content_same": false
        },
        {
          "line": 1861,
          "old_api": "strdupz",
          "new_api": "freez",
          "old_text": "strdupz(value)",
          "new_text": "freez(rc->info)",
          "old_line_content": "                rc->info = tabs2spaces(strdupz(value));",
          "new_line_content": "                    freez(rc->info);",
          "content_same": false
        },
        {
          "line": 1864,
          "old_api": "strcasecmp",
          "new_api": "strip_quotes",
          "old_text": "strcasecmp(key, HEALTH_DELAY_KEY)",
          "new_text": "strip_quotes(rc->info)",
          "old_line_content": "            else if(hash == hash_delay && !strcasecmp(key, HEALTH_DELAY_KEY)) {",
          "new_line_content": "                strip_quotes(rc->info);",
          "content_same": false
        },
        {
          "line": 1875,
          "old_api": "strcmp",
          "new_api": "strcasecmp",
          "old_text": "strcmp(rt->context, value)",
          "new_text": "strcasecmp(key, HEALTH_ON_KEY)",
          "old_line_content": "                    if(strcmp(rt->context, value))",
          "new_line_content": "            if(hash == hash_on && !strcasecmp(key, HEALTH_ON_KEY)) {",
          "content_same": false
        },
        {
          "line": 1881,
          "old_api": "strdupz",
          "new_api": "freez",
          "old_text": "strdupz(value)",
          "new_text": "freez(rt->context)",
          "old_line_content": "                rt->context = tabs2spaces(strdupz(value));",
          "new_line_content": "                    freez(rt->context);",
          "content_same": false
        },
        {
          "line": 1884,
          "old_api": "strcasecmp",
          "new_api": "simple_hash",
          "old_text": "strcasecmp(key, HEALTH_LOOKUP_KEY)",
          "new_text": "simple_hash(rt->context)",
          "old_line_content": "            else if(hash == hash_lookup && !strcasecmp(key, HEALTH_LOOKUP_KEY)) {",
          "new_line_content": "                rt->hash_context = simple_hash(rt->context);",
          "content_same": false
        },
        {
          "line": 1891,
          "old_api": "info",
          "new_api": "strcasecmp",
          "old_text": "info(\"Health configuration at line %zu of file '%s/%s' for template '%s' at key '%s' cannot parse duration: '%s'.\",\n                         line, path, filename, rt->name, key, value)",
          "new_text": "strcasecmp(key, HEALTH_EVERY_KEY)",
          "old_line_content": "                    info(\"Health configuration at line %zu of file '%s/%s' for template '%s' at key '%s' cannot parse duration: '%s'.\",",
          "new_line_content": "            else if(hash == hash_every && !strcasecmp(key, HEALTH_EVERY_KEY)) {",
          "content_same": false
        },
        {
          "line": 1896,
          "old_api": "strtold",
          "new_api": "strcasecmp",
          "old_text": "strtold(value, &e)",
          "new_text": "strcasecmp(key, HEALTH_GREEN_KEY)",
          "old_line_content": "                rt->green = strtold(value, &e);",
          "new_line_content": "            else if(hash == hash_green && !strcasecmp(key, HEALTH_GREEN_KEY)) {",
          "content_same": false
        },
        {
          "line": 1898,
          "old_api": "info",
          "new_api": "strtold",
          "old_text": "info(\"Health configuration at line %zu of file '%s/%s' for template '%s' at key '%s' leaves this string unmatched: '%s'.\",\n                         line, path, filename, rt->name, key, e)",
          "new_text": "strtold(value, &e)",
          "old_line_content": "                    info(\"Health configuration at line %zu of file '%s/%s' for template '%s' at key '%s' leaves this string unmatched: '%s'.\",",
          "new_line_content": "                rt->green = strtold(value, &e);",
          "content_same": false
        },
        {
          "line": 1904,
          "old_api": "strtold",
          "new_api": "strcasecmp",
          "old_text": "strtold(value, &e)",
          "new_text": "strcasecmp(key, HEALTH_RED_KEY)",
          "old_line_content": "                rt->red = strtold(value, &e);",
          "new_line_content": "            else if(hash == hash_red && !strcasecmp(key, HEALTH_RED_KEY)) {",
          "content_same": false
        },
        {
          "line": 1906,
          "old_api": "info",
          "new_api": "strtold",
          "old_text": "info(\"Health configuration at line %zu of file '%s/%s' for template '%s' at key '%s' leaves this string unmatched: '%s'.\",\n                         line, path, filename, rt->name, key, e)",
          "new_text": "strtold(value, &e)",
          "old_line_content": "                    info(\"Health configuration at line %zu of file '%s/%s' for template '%s' at key '%s' leaves this string unmatched: '%s'.\",",
          "new_line_content": "                rt->red = strtold(value, &e);",
          "content_same": false
        },
        {
          "line": 1915,
          "old_api": "error",
          "new_api": "expression_parse",
          "old_text": "error(\"Health configuration at line %zu of file '%s/%s' for template '%s' at key '%s' has unparse-able expression '%s': %s at '%s'\",\n                          line, path, filename, rt->name, key, value, expression_strerror(error), failed_at)",
          "new_text": "expression_parse(value, &failed_at, &error)",
          "old_line_content": "                    error(\"Health configuration at line %zu of file '%s/%s' for template '%s' at key '%s' has unparse-able expression '%s': %s at '%s'\",",
          "new_line_content": "                rt->calculation = expression_parse(value, &failed_at, &error);",
          "content_same": false
        },
        {
          "line": 1924,
          "old_api": "error",
          "new_api": "expression_parse",
          "old_text": "error(\"Health configuration at line %zu of file '%s/%s' for template '%s' at key '%s' has unparse-able expression '%s': %s at '%s'\",\n                          line, path, filename, rt->name, key, value, expression_strerror(error), failed_at)",
          "new_text": "expression_parse(value, &failed_at, &error)",
          "old_line_content": "                    error(\"Health configuration at line %zu of file '%s/%s' for template '%s' at key '%s' has unparse-able expression '%s': %s at '%s'\",",
          "new_line_content": "                rt->warning = expression_parse(value, &failed_at, &error);",
          "content_same": false
        },
        {
          "line": 1933,
          "old_api": "error",
          "new_api": "expression_parse",
          "old_text": "error(\"Health configuration at line %zu of file '%s/%s' for template '%s' at key '%s' has unparse-able expression '%s': %s at '%s'\",\n                          line, path, filename, rt->name, key, value, expression_strerror(error), failed_at)",
          "new_text": "expression_parse(value, &failed_at, &error)",
          "old_line_content": "                    error(\"Health configuration at line %zu of file '%s/%s' for template '%s' at key '%s' has unparse-able expression '%s': %s at '%s'\",",
          "new_line_content": "                rt->critical = expression_parse(value, &failed_at, &error);",
          "content_same": false
        },
        {
          "line": 1939,
          "old_api": "strcmp",
          "new_api": "strcasecmp",
          "old_text": "strcmp(rt->exec, value)",
          "new_text": "strcasecmp(key, HEALTH_EXEC_KEY)",
          "old_line_content": "                    if(strcmp(rt->exec, value))",
          "new_line_content": "            else if(hash == hash_exec && !strcasecmp(key, HEALTH_EXEC_KEY)) {",
          "content_same": false
        },
        {
          "line": 1945,
          "old_api": "strdupz",
          "new_api": "freez",
          "old_text": "strdupz(value)",
          "new_text": "freez(rt->exec)",
          "old_line_content": "                rt->exec = tabs2spaces(strdupz(value));",
          "new_line_content": "                    freez(rt->exec);",
          "content_same": false
        },
        {
          "line": 1947,
          "old_api": "strcasecmp",
          "new_api": "strdupz",
          "old_text": "strcasecmp(key, HEALTH_RECIPIENT_KEY)",
          "new_text": "strdupz(value)",
          "old_line_content": "            else if(hash == hash_recipient && !strcasecmp(key, HEALTH_RECIPIENT_KEY)) {",
          "new_line_content": "                rt->exec = tabs2spaces(strdupz(value));",
          "content_same": false
        },
        {
          "line": 1949,
          "old_api": "strcmp",
          "new_api": "strcasecmp",
          "old_text": "strcmp(rt->recipient, value)",
          "new_text": "strcasecmp(key, HEALTH_RECIPIENT_KEY)",
          "old_line_content": "                    if(strcmp(rt->recipient, value))",
          "new_line_content": "            else if(hash == hash_recipient && !strcasecmp(key, HEALTH_RECIPIENT_KEY)) {",
          "content_same": false
        },
        {
          "line": 1955,
          "old_api": "strdupz",
          "new_api": "freez",
          "old_text": "strdupz(value)",
          "new_text": "freez(rt->recipient)",
          "old_line_content": "                rt->recipient = tabs2spaces(strdupz(value));",
          "new_line_content": "                    freez(rt->recipient);",
          "content_same": false
        },
        {
          "line": 1957,
          "old_api": "strcasecmp",
          "new_api": "strdupz",
          "old_text": "strcasecmp(key, HEALTH_UNITS_KEY)",
          "new_text": "strdupz(value)",
          "old_line_content": "            else if(hash == hash_units && !strcasecmp(key, HEALTH_UNITS_KEY)) {",
          "new_line_content": "                rt->recipient = tabs2spaces(strdupz(value));",
          "content_same": false
        },
        {
          "line": 1959,
          "old_api": "strcmp",
          "new_api": "strcasecmp",
          "old_text": "strcmp(rt->units, value)",
          "new_text": "strcasecmp(key, HEALTH_UNITS_KEY)",
          "old_line_content": "                    if(strcmp(rt->units, value))",
          "new_line_content": "            else if(hash == hash_units && !strcasecmp(key, HEALTH_UNITS_KEY)) {",
          "content_same": false
        },
        {
          "line": 1965,
          "old_api": "strdupz",
          "new_api": "freez",
          "old_text": "strdupz(value)",
          "new_text": "freez(rt->units)",
          "old_line_content": "                rt->units = tabs2spaces(strdupz(value));",
          "new_line_content": "                    freez(rt->units);",
          "content_same": false
        },
        {
          "line": 1968,
          "old_api": "strcasecmp",
          "new_api": "strip_quotes",
          "old_text": "strcasecmp(key, HEALTH_INFO_KEY)",
          "new_text": "strip_quotes(rt->units)",
          "old_line_content": "            else if(hash == hash_info && !strcasecmp(key, HEALTH_INFO_KEY)) {",
          "new_line_content": "                strip_quotes(rt->units);",
          "content_same": false
        },
        {
          "line": 1970,
          "old_api": "strcmp",
          "new_api": "strcasecmp",
          "old_text": "strcmp(rt->info, value)",
          "new_text": "strcasecmp(key, HEALTH_INFO_KEY)",
          "old_line_content": "                    if(strcmp(rt->info, value))",
          "new_line_content": "            else if(hash == hash_info && !strcasecmp(key, HEALTH_INFO_KEY)) {",
          "content_same": false
        },
        {
          "line": 1976,
          "old_api": "strdupz",
          "new_api": "freez",
          "old_text": "strdupz(value)",
          "new_text": "freez(rt->info)",
          "old_line_content": "                rt->info = tabs2spaces(strdupz(value));",
          "new_line_content": "                    freez(rt->info);",
          "content_same": false
        },
        {
          "line": 1979,
          "old_api": "strcasecmp",
          "new_api": "strip_quotes",
          "old_text": "strcasecmp(key, HEALTH_DELAY_KEY)",
          "new_text": "strip_quotes(rt->info)",
          "old_line_content": "            else if(hash == hash_delay && !strcasecmp(key, HEALTH_DELAY_KEY)) {",
          "new_line_content": "                strip_quotes(rt->info);",
          "content_same": false
        },
        {
          "line": 1996,
          "old_api": "rrdcalctemplate_add_template_from_config",
          "new_api": "rrdcalc_free",
          "old_text": "rrdcalctemplate_add_template_from_config(&localhost, rt)",
          "new_text": "rrdcalc_free(&localhost, rc)",
          "old_line_content": "    if(rt && !rrdcalctemplate_add_template_from_config(&localhost, rt))",
          "new_line_content": "        rrdcalc_free(&localhost, rc);",
          "content_same": false
        },
        {
          "line": 1999,
          "old_api": "fclose",
          "new_api": "rrdcalctemplate_free",
          "old_text": "fclose(fp)",
          "new_text": "rrdcalctemplate_free(&localhost, rt)",
          "old_line_content": "    fclose(fp);",
          "new_line_content": "        rrdcalctemplate_free(&localhost, rt);",
          "content_same": false
        },
        {
          "line": 2006,
          "old_api": "debug",
          "new_api": "strlen",
          "old_text": "debug(D_HEALTH, \"Health configuration reading directory '%s'\", path)",
          "new_text": "strlen(path)",
          "old_line_content": "    debug(D_HEALTH, \"Health configuration reading directory '%s'\", path);",
          "new_line_content": "    size_t pathlen = strlen(path);",
          "content_same": false
        },
        {
          "line": 2008,
          "old_api": "opendir",
          "new_api": "debug",
          "old_text": "opendir(path)",
          "new_text": "debug(D_HEALTH, \"Health configuration reading directory '%s'\", path)",
          "old_line_content": "    DIR *dir = opendir(path);",
          "new_line_content": "    debug(D_HEALTH, \"Health configuration reading directory '%s'\", path);",
          "content_same": false
        },
        {
          "line": 2010,
          "old_api": "error",
          "new_api": "opendir",
          "old_text": "error(\"Health configuration cannot open directory '%s'.\", path)",
          "new_text": "opendir(path)",
          "old_line_content": "        error(\"Health configuration cannot open directory '%s'.\", path);",
          "new_line_content": "    DIR *dir = opendir(path);",
          "content_same": false
        },
        {
          "line": 2030,
          "old_api": "strcat",
          "new_api": "strlen",
          "old_text": "strcat(s, \"/\")",
          "new_text": "strlen(de->d_name)",
          "old_line_content": "            strcat(s, \"/\");",
          "new_line_content": "            char *s = mallocz(pathlen + strlen(de->d_name) + 2);",
          "content_same": false
        },
        {
          "line": 2031,
          "old_api": "strcat",
          "new_api": "strcpy",
          "old_text": "strcat(s, de->d_name)",
          "new_text": "strcpy(s, path)",
          "old_line_content": "            strcat(s, de->d_name);",
          "new_line_content": "            strcpy(s, path);",
          "content_same": false
        },
        {
          "line": 2032,
          "old_api": "health_readdir",
          "new_api": "strcat",
          "old_text": "health_readdir(s)",
          "new_text": "strcat(s, \"/\")",
          "old_line_content": "            health_readdir(s);",
          "new_line_content": "            strcat(s, \"/\");",
          "content_same": false
        },
        {
          "line": 2033,
          "old_api": "freez",
          "new_api": "strcat",
          "old_text": "freez(s)",
          "new_text": "strcat(s, de->d_name)",
          "old_line_content": "            freez(s);",
          "new_line_content": "            strcat(s, de->d_name);",
          "content_same": false
        },
        {
          "line": 2057,
          "old_api": "config_get_boolean",
          "new_api": "debug",
          "old_text": "config_get_boolean(\"health\", \"enabled\", 1)",
          "new_text": "debug(D_HEALTH, \"Health configuration initializing\")",
          "old_line_content": "    if(!(health_enabled = config_get_boolean(\"health\", \"enabled\", 1))) {",
          "new_line_content": "    debug(D_HEALTH, \"Health configuration initializing\");",
          "content_same": false
        },
        {
          "line": 2064,
          "old_api": "fatal",
          "new_api": "config_get",
          "old_text": "fatal(\"Cannot create directory '%s'.\", pathname)",
          "new_text": "config_get(\"health\", \"health db directory\", VARLIB_DIR \"/health\")",
          "old_line_content": "        fatal(\"Cannot create directory '%s'.\", pathname);",
          "new_line_content": "    char *pathname = config_get(\"health\", \"health db directory\", VARLIB_DIR \"/health\");",
          "content_same": false
        },
        {
          "line": 2070,
          "old_api": "health_alarm_log_load",
          "new_api": "config_get",
          "old_text": "health_alarm_log_load(&localhost)",
          "new_text": "config_get(\"health\", \"health db file\", filename)",
          "old_line_content": "    health_alarm_log_load(&localhost);",
          "new_line_content": "    health.log_filename = config_get(\"health\", \"health db file\", filename);",
          "content_same": false
        },
        {
          "line": 2073,
          "old_api": "health_config_dir",
          "new_api": "health_alarm_log_open",
          "old_text": "health_config_dir()",
          "new_text": "health_alarm_log_open()",
          "old_line_content": "    char *path = health_config_dir();",
          "new_line_content": "    health_alarm_log_open();",
          "content_same": false
        },
        {
          "line": 2083,
          "old_api": "error",
          "new_api": "config_get_number",
          "old_text": "error(\"Health configuration has invalid max log entries %ld. Using default %u\", n, localhost.health_log.max)",
          "new_text": "config_get_number(\"health\", \"in memory max health log entries\", (long)localhost.health_log.max)",
          "old_line_content": "        error(\"Health configuration has invalid max log entries %ld. Using default %u\", n, localhost.health_log.max);",
          "new_line_content": "    long n = config_get_number(\"health\", \"in memory max health log entries\", (long)localhost.health_log.max);",
          "content_same": false
        },
        {
          "line": 2090,
          "old_api": "rrdhost_unlock",
          "new_api": "rrdhost_rwlock",
          "old_text": "rrdhost_unlock(&localhost)",
          "new_text": "rrdhost_rwlock(&localhost)",
          "old_line_content": "    rrdhost_unlock(&localhost);",
          "new_line_content": "    rrdhost_rwlock(&localhost);",
          "content_same": false
        },
        {
          "line": 2173,
          "old_api": "buffer_strcat",
          "new_api": "pthread_rwlock_rdlock",
          "old_text": "buffer_strcat(wb, \"[\")",
          "new_text": "pthread_rwlock_rdlock(&host->health_log.alarm_log_rwlock)",
          "old_line_content": "    buffer_strcat(wb, \"[\");",
          "new_line_content": "    pthread_rwlock_rdlock(&host->health_log.alarm_log_rwlock);",
          "content_same": false
        },
        {
          "line": 2187,
          "old_api": "pthread_rwlock_unlock",
          "new_api": "buffer_strcat",
          "old_text": "pthread_rwlock_unlock(&host->health_log.alarm_log_rwlock)",
          "new_text": "buffer_strcat(wb, \"\\n]\\n\")",
          "old_line_content": "    pthread_rwlock_unlock(&host->health_log.alarm_log_rwlock);",
          "new_line_content": "    buffer_strcat(wb, \"\\n]\\n\");",
          "content_same": false
        },
        {
          "line": 2240,
          "old_api": "health_string2json",
          "new_api": "RRDCALC_HAS_DB_LOOKUP",
          "old_text": "health_string2json(wb, \"\\t\\t\\t\", \"lookup_dimensions\", rc->dimensions, \",\\n\")",
          "new_text": "RRDCALC_HAS_DB_LOOKUP(rc)",
          "old_line_content": "            health_string2json(wb, \"\\t\\t\\t\", \"lookup_dimensions\", rc->dimensions, \",\\n\");",
          "new_line_content": "    if(RRDCALC_HAS_DB_LOOKUP(rc)) {",
          "content_same": false
        },
        {
          "line": 2242,
          "old_api": "buffer_sprintf",
          "new_api": "health_string2json",
          "old_text": "buffer_sprintf(wb,\n                       \"\\t\\t\\t\\\"db_after\\\": %lu,\\n\"\n                       \"\\t\\t\\t\\\"db_before\\\": %lu,\\n\"\n                       \"\\t\\t\\t\\\"lookup_method\\\": \\\"%s\\\",\\n\"\n                       \"\\t\\t\\t\\\"lookup_after\\\": %d,\\n\"\n                       \"\\t\\t\\t\\\"lookup_before\\\": %d,\\n\"\n                       \"\\t\\t\\t\\\"lookup_options\\\": \\\"\",\n                       (unsigned long) rc->db_after,\n                       (unsigned long) rc->db_before,\n                       group_method2string(rc->group),\n                       rc->after,\n                       rc->before\n        )",
          "new_text": "health_string2json(wb, \"\\t\\t\\t\", \"lookup_dimensions\", rc->dimensions, \",\\n\")",
          "old_line_content": "        buffer_sprintf(wb,",
          "new_line_content": "            health_string2json(wb, \"\\t\\t\\t\", \"lookup_dimensions\", rc->dimensions, \",\\n\");",
          "content_same": false
        },
        {
          "line": 2352,
          "old_api": "rrdhost_unlock",
          "new_api": "rrdhost_rwlock",
          "old_text": "rrdhost_unlock(&localhost)",
          "new_text": "rrdhost_rwlock(&localhost)",
          "old_line_content": "    rrdhost_unlock(&localhost);",
          "new_line_content": "    rrdhost_rwlock(&localhost);",
          "content_same": false
        },
        {
          "line": 2371,
          "old_api": "rrdhost_unlock",
          "new_api": "rrdhost_rwlock",
          "old_text": "rrdhost_unlock(&localhost)",
          "new_text": "rrdhost_rwlock(&localhost)",
          "old_line_content": "    rrdhost_unlock(&localhost);",
          "new_line_content": "    rrdhost_rwlock(&localhost);",
          "content_same": false
        },
        {
          "line": 2377,
          "old_api": "rrdsetcalc_link_matching",
          "new_api": "rrdhost_rwlock",
          "old_text": "rrdsetcalc_link_matching(st)",
          "new_text": "rrdhost_rwlock(&localhost)",
          "old_line_content": "        rrdsetcalc_link_matching(st);",
          "new_line_content": "        rrdhost_rwlock(&localhost);",
          "content_same": false
        },
        {
          "line": 2380,
          "old_api": "rrdhost_unlock",
          "new_api": "rrdcalctemplate_link_matching",
          "old_text": "rrdhost_unlock(&localhost)",
          "new_text": "rrdcalctemplate_link_matching(st)",
          "old_line_content": "        rrdhost_unlock(&localhost);",
          "new_line_content": "        rrdcalctemplate_link_matching(st);",
          "content_same": false
        },
        {
          "line": 2449,
          "old_api": "debug",
          "new_api": "time",
          "old_text": "debug(D_HEALTH, \"executing command '%s'\", buffer)",
          "new_text": "time(NULL)",
          "old_line_content": "    debug(D_HEALTH, \"executing command '%s'\", buffer);",
          "new_line_content": "    ae->exec_run_timestamp = time(NULL);",
          "content_same": false
        },
        {
          "line": 2452,
          "old_api": "error",
          "new_api": "mypopen",
          "old_text": "error(\"HEALTH: Cannot popen(\\\"%s\\\", \\\"r\\\").\", buffer)",
          "new_text": "mypopen(buffer, &command_pid)",
          "old_line_content": "        error(\"HEALTH: Cannot popen(\\\"%s\\\", \\\"r\\\").\", buffer);",
          "new_line_content": "    FILE *fp = mypopen(buffer, &command_pid);",
          "content_same": false
        },
        {
          "line": 2458,
          "old_api": "mypclose",
          "new_api": "fgets",
          "old_text": "mypclose(fp, command_pid)",
          "new_text": "fgets(buffer, FILENAME_MAX, fp)",
          "old_line_content": "    ae->exec_code = mypclose(fp, command_pid);",
          "new_line_content": "    char *s = fgets(buffer, FILENAME_MAX, fp);",
          "content_same": false
        },
        {
          "line": 2485,
          "old_api": "pthread_rwlock_rdlock",
          "new_api": "time",
          "old_text": "pthread_rwlock_rdlock(&host->health_log.alarm_log_rwlock)",
          "new_text": "time(NULL)",
          "old_line_content": "    pthread_rwlock_rdlock(&host->health_log.alarm_log_rwlock);",
          "new_line_content": "    time_t now = time(NULL);",
          "content_same": false
        },
        {
          "line": 2582,
          "old_api": "pthread_setcanceltype",
          "new_api": "gettid",
          "old_text": "pthread_setcanceltype(PTHREAD_CANCEL_DEFERRED, NULL)",
          "new_text": "gettid()",
          "old_line_content": "    if(pthread_setcanceltype(PTHREAD_CANCEL_DEFERRED, NULL) != 0)",
          "new_line_content": "    info(\"HEALTH thread created with task id %d\", gettid());",
          "content_same": false
        },
        {
          "line": 2585,
          "old_api": "pthread_setcancelstate",
          "new_api": "error",
          "old_text": "pthread_setcancelstate(PTHREAD_CANCEL_ENABLE, NULL)",
          "new_text": "error(\"Cannot set pthread cancel type to DEFERRED.\")",
          "old_line_content": "    if(pthread_setcancelstate(PTHREAD_CANCEL_ENABLE, NULL) != 0)",
          "new_line_content": "        error(\"Cannot set pthread cancel type to DEFERRED.\");",
          "content_same": false
        },
        {
          "line": 2588,
          "old_api": "config_get_number",
          "new_api": "error",
          "old_text": "config_get_number(\"health\", \"run at least every seconds\", 10)",
          "new_text": "error(\"Cannot set pthread cancel state to ENABLE.\")",
          "old_line_content": "    int min_run_every = (int)config_get_number(\"health\", \"run at least every seconds\", 10);",
          "new_line_content": "        error(\"Cannot set pthread cancel state to ENABLE.\");",
          "content_same": false
        },
        {
          "line": 2606,
          "old_api": "rrdhost_rdlock",
          "new_api": "error",
          "old_text": "rrdhost_rdlock(&localhost)",
          "new_text": "error(\"Cannot set pthread cancel state to DISABLE.\")",
          "old_line_content": "        rrdhost_rdlock(&localhost);",
          "new_line_content": "            error(\"Cannot set pthread cancel state to DISABLE.\");",
          "content_same": false
        },
        {
          "line": 2633,
          "old_api": "unlikely",
          "new_api": "debug",
          "old_text": "unlikely(!(rc->rrdcalc_flags & RRDCALC_FLAG_DB_ERROR))",
          "new_text": "debug(D_HEALTH, \"Health alarm '%s.%s': database lookup returned error %d\", rc->chart?rc->chart:\"NOCHART\", rc->name, ret)",
          "old_line_content": "                    if (unlikely(!(rc->rrdcalc_flags & RRDCALC_FLAG_DB_ERROR))) {",
          "new_line_content": "                    debug(D_HEALTH, \"Health alarm '%s.%s': database lookup returned error %d\", rc->chart?rc->chart:\"NOCHART\", rc->name, ret);",
          "content_same": false
        },
        {
          "line": 2635,
          "old_api": "error",
          "new_api": "unlikely",
          "old_text": "error(\"Health alarm '%s.%s': database lookup returned error %d\", rc->chart?rc->chart:\"NOCHART\", rc->name, ret)",
          "new_text": "unlikely(!(rc->rrdcalc_flags & RRDCALC_FLAG_DB_ERROR))",
          "old_line_content": "                        error(\"Health alarm '%s.%s': database lookup returned error %d\", rc->chart?rc->chart:\"NOCHART\", rc->name, ret);",
          "new_line_content": "                    if (unlikely(!(rc->rrdcalc_flags & RRDCALC_FLAG_DB_ERROR))) {",
          "content_same": false
        },
        {
          "line": 2646,
          "old_api": "unlikely",
          "new_api": "debug",
          "old_text": "unlikely(!(rc->rrdcalc_flags & RRDCALC_FLAG_DB_STALE))",
          "new_text": "debug(D_HEALTH, \"Health alarm '%s.%s': database is stale\", rc->chart?rc->chart:\"NOCHART\", rc->name)",
          "old_line_content": "                    if (unlikely(!(rc->rrdcalc_flags & RRDCALC_FLAG_DB_STALE))) {",
          "new_line_content": "                    debug(D_HEALTH, \"Health alarm '%s.%s': database is stale\", rc->chart?rc->chart:\"NOCHART\", rc->name);",
          "content_same": false
        },
        {
          "line": 2648,
          "old_api": "error",
          "new_api": "unlikely",
          "old_text": "error(\"Health alarm '%s.%s': database is stale\", rc->chart?rc->chart:\"NOCHART\", rc->name)",
          "new_text": "unlikely(!(rc->rrdcalc_flags & RRDCALC_FLAG_DB_STALE))",
          "old_line_content": "                        error(\"Health alarm '%s.%s': database is stale\", rc->chart?rc->chart:\"NOCHART\", rc->name);",
          "new_line_content": "                    if (unlikely(!(rc->rrdcalc_flags & RRDCALC_FLAG_DB_STALE))) {",
          "content_same": false
        },
        {
          "line": 2664,
          "old_api": "error",
          "new_api": "unlikely",
          "old_text": "error(\"Health alarm '%s.%s': database lookup returned empty value (possibly value is not collected yet)\",\n                              rc->chart?rc->chart:\"NOCHART\", rc->name)",
          "new_text": "unlikely(!(rc->rrdcalc_flags & RRDCALC_FLAG_DB_NAN))",
          "old_line_content": "                        error(\"Health alarm '%s.%s': database lookup returned empty value (possibly value is not collected yet)\",",
          "new_line_content": "                    if (unlikely(!(rc->rrdcalc_flags & RRDCALC_FLAG_DB_NAN))) {",
          "content_same": false
        },
        {
          "line": 2684,
          "old_api": "unlikely",
          "new_api": "buffer_tostring",
          "old_text": "unlikely(!(rc->rrdcalc_flags & RRDCALC_FLAG_CALC_ERROR))",
          "new_text": "buffer_tostring(rc->calculation->error_msg)",
          "old_line_content": "                    if (unlikely(!(rc->rrdcalc_flags & RRDCALC_FLAG_CALC_ERROR))) {",
          "new_line_content": "                          rc->chart?rc->chart:\"NOCHART\", rc->name, buffer_tostring(rc->calculation->error_msg));",
          "content_same": false
        },
        {
          "line": 2686,
          "old_api": "error",
          "new_api": "unlikely",
          "old_text": "error(\"Health alarm '%s.%s': failed to evaluate calculation with error: %s\",\n                              rc->chart?rc->chart:\"NOCHART\", rc->name, buffer_tostring(rc->calculation->error_msg))",
          "new_text": "unlikely(!(rc->rrdcalc_flags & RRDCALC_FLAG_CALC_ERROR))",
          "old_line_content": "                        error(\"Health alarm '%s.%s': failed to evaluate calculation with error: %s\",",
          "new_line_content": "                    if (unlikely(!(rc->rrdcalc_flags & RRDCALC_FLAG_CALC_ERROR))) {",
          "content_same": false
        },
        {
          "line": 2709,
          "old_api": "unlikely",
          "new_api": "rrdhost_unlock",
          "old_text": "unlikely(runnable && !netdata_exit)",
          "new_text": "rrdhost_unlock(&localhost)",
          "old_line_content": "        if (unlikely(runnable && !netdata_exit)) {",
          "new_line_content": "        rrdhost_unlock(&localhost);",
          "content_same": false
        },
        {
          "line": 2726,
          "old_api": "unlikely",
          "new_api": "buffer_tostring",
          "old_text": "unlikely(!(rc->rrdcalc_flags & RRDCALC_FLAG_WARN_ERROR))",
          "new_text": "buffer_tostring(rc->warning->error_msg)",
          "old_line_content": "                        if (unlikely(!(rc->rrdcalc_flags & RRDCALC_FLAG_WARN_ERROR))) {",
          "new_line_content": "                              rc->chart?rc->chart:\"NOCHART\", rc->name, buffer_tostring(rc->warning->error_msg));",
          "content_same": false
        },
        {
          "line": 2728,
          "old_api": "error",
          "new_api": "unlikely",
          "old_text": "error(\"Health alarm '%s.%s': warning expression failed with error: %s\",\n                                  rc->chart?rc->chart:\"NOCHART\", rc->name, buffer_tostring(rc->warning->error_msg))",
          "new_text": "unlikely(!(rc->rrdcalc_flags & RRDCALC_FLAG_WARN_ERROR))",
          "old_line_content": "                            error(\"Health alarm '%s.%s': warning expression failed with error: %s\",",
          "new_line_content": "                        if (unlikely(!(rc->rrdcalc_flags & RRDCALC_FLAG_WARN_ERROR))) {",
          "content_same": false
        },
        {
          "line": 2756,
          "old_api": "unlikely",
          "new_api": "buffer_tostring",
          "old_text": "unlikely(!(rc->rrdcalc_flags & RRDCALC_FLAG_CRIT_ERROR))",
          "new_text": "buffer_tostring(rc->critical->error_msg)",
          "old_line_content": "                        if (unlikely(!(rc->rrdcalc_flags & RRDCALC_FLAG_CRIT_ERROR))) {",
          "new_line_content": "                              rc->chart?rc->chart:\"NOCHART\", rc->name, buffer_tostring(rc->critical->error_msg));",
          "content_same": false
        },
        {
          "line": 2758,
          "old_api": "error",
          "new_api": "unlikely",
          "old_text": "error(\"Health alarm '%s.%s': critical expression failed with error: %s\",\n                                  rc->chart?rc->chart:\"NOCHART\", rc->name, buffer_tostring(rc->critical->error_msg))",
          "new_text": "unlikely(!(rc->rrdcalc_flags & RRDCALC_FLAG_CRIT_ERROR))",
          "old_line_content": "                            error(\"Health alarm '%s.%s': critical expression failed with error: %s\",",
          "new_line_content": "                        if (unlikely(!(rc->rrdcalc_flags & RRDCALC_FLAG_CRIT_ERROR))) {",
          "content_same": false
        },
        {
          "line": 2854,
          "old_api": "unlikely",
          "new_api": "error",
          "old_text": "unlikely(netdata_exit)",
          "new_text": "error(\"Cannot set pthread cancel state to RESTORE (%d).\", oldstate)",
          "old_line_content": "        if(unlikely(netdata_exit))",
          "new_line_content": "            error(\"Cannot set pthread cancel state to RESTORE (%d).\", oldstate);",
          "content_same": false
        },
        {
          "line": 2861,
          "old_api": "unlikely",
          "new_api": "health_alarm_log_process",
          "old_text": "unlikely(netdata_exit)",
          "new_text": "health_alarm_log_process(&localhost)",
          "old_line_content": "        if(unlikely(netdata_exit))",
          "new_line_content": "        health_alarm_log_process(&localhost);",
          "content_same": false
        },
        {
          "line": 2866,
          "old_api": "debug",
          "new_api": "time",
          "old_text": "debug(D_HEALTH, \"Health monitoring iteration no %u done. Next iteration in %d secs\",\n                  loop, (int) (next_run - now))",
          "new_text": "time(NULL)",
          "old_line_content": "            debug(D_HEALTH, \"Health monitoring iteration no %u done. Next iteration in %d secs\",",
          "new_line_content": "        now = time(NULL);",
          "content_same": false
        },
        {
          "line": 2868,
          "old_api": "sleep_usec",
          "new_api": "debug",
          "old_text": "sleep_usec(1000000 * (unsigned long long) (next_run - now))",
          "new_text": "debug(D_HEALTH, \"Health monitoring iteration no %u done. Next iteration in %d secs\",\n                  loop, (int) (next_run - now))",
          "old_line_content": "            sleep_usec(1000000 * (unsigned long long) (next_run - now));",
          "new_line_content": "            debug(D_HEALTH, \"Health monitoring iteration no %u done. Next iteration in %d secs\",",
          "content_same": false
        },
        {
          "line": 2877,
          "old_api": "info",
          "new_api": "buffer_free",
          "old_text": "info(\"HEALTH thread exiting\")",
          "new_text": "buffer_free(wb)",
          "old_line_content": "    info(\"HEALTH thread exiting\");",
          "new_line_content": "    buffer_free(wb);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 2052,
          "old_api": null,
          "new_api": "config_get",
          "old_text": null,
          "new_text": "config_get(\"global\", \"config directory\", CONFIG_DIR)",
          "old_line_content": "}",
          "new_line_content": "    snprintfz(buffer, FILENAME_MAX, \"%s/health.d\", config_get(\"global\", \"config directory\", CONFIG_DIR));",
          "content_same": false
        },
        {
          "line": 2053,
          "old_api": null,
          "new_api": "config_get",
          "old_text": null,
          "new_text": "config_get(\"health\", \"health configuration directory\", buffer)",
          "old_line_content": "",
          "new_line_content": "    return config_get(\"health\", \"health configuration directory\", buffer);",
          "content_same": false
        },
        {
          "line": 2059,
          "old_api": null,
          "new_api": "config_get_boolean",
          "old_text": null,
          "new_text": "config_get_boolean(\"health\", \"enabled\", 1)",
          "old_line_content": "        return;",
          "new_line_content": "    if(!(health_enabled = config_get_boolean(\"health\", \"enabled\", 1))) {",
          "content_same": false
        },
        {
          "line": 2060,
          "old_api": null,
          "new_api": "debug",
          "old_text": null,
          "new_text": "debug(D_HEALTH, \"Health is disabled.\")",
          "old_line_content": "    }",
          "new_line_content": "        debug(D_HEALTH, \"Health is disabled.\");",
          "content_same": false
        },
        {
          "line": 2065,
          "old_api": null,
          "new_api": "mkdir",
          "old_text": null,
          "new_text": "mkdir(pathname, 0770)",
          "old_line_content": "",
          "new_line_content": "    if(mkdir(pathname, 0770) == -1 && errno != EEXIST)",
          "content_same": false
        },
        {
          "line": 2066,
          "old_api": null,
          "new_api": "fatal",
          "old_text": null,
          "new_text": "fatal(\"Cannot create directory '%s'.\", pathname)",
          "old_line_content": "    char filename[FILENAME_MAX + 1];",
          "new_line_content": "        fatal(\"Cannot create directory '%s'.\", pathname);",
          "content_same": false
        },
        {
          "line": 2069,
          "old_api": null,
          "new_api": "snprintfz",
          "old_text": null,
          "new_text": "snprintfz(filename, FILENAME_MAX, \"%s/health-log.db\", pathname)",
          "old_line_content": "",
          "new_line_content": "    snprintfz(filename, FILENAME_MAX, \"%s/health-log.db\", pathname);",
          "content_same": false
        },
        {
          "line": 2072,
          "old_api": null,
          "new_api": "health_alarm_log_load",
          "old_text": null,
          "new_text": "health_alarm_log_load(&localhost)",
          "old_line_content": "",
          "new_line_content": "    health_alarm_log_load(&localhost);",
          "content_same": false
        },
        {
          "line": 2075,
          "old_api": null,
          "new_api": "health_config_dir",
          "old_text": null,
          "new_text": "health_config_dir()",
          "old_line_content": "    {",
          "new_line_content": "    char *path = health_config_dir();",
          "content_same": false
        },
        {
          "line": 2079,
          "old_api": null,
          "new_api": "config_get",
          "old_text": null,
          "new_text": "config_get(\"global\", \"plugins directory\", PLUGINS_DIR)",
          "old_line_content": "    }",
          "new_line_content": "        snprintfz(buffer, FILENAME_MAX, \"%s/alarm-notify.sh\", config_get(\"global\", \"plugins directory\", PLUGINS_DIR));",
          "content_same": false
        },
        {
          "line": 2080,
          "old_api": null,
          "new_api": "config_get",
          "old_text": null,
          "new_text": "config_get(\"health\", \"script to execute on alarm\", buffer)",
          "old_line_content": "",
          "new_line_content": "        health.health_default_exec = config_get(\"health\", \"script to execute on alarm\", buffer);",
          "content_same": false
        },
        {
          "line": 2085,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"Health configuration has invalid max log entries %ld. Using default %u\", n, localhost.health_log.max)",
          "old_line_content": "    }",
          "new_line_content": "        error(\"Health configuration has invalid max log entries %ld. Using default %u\", n, localhost.health_log.max);",
          "content_same": false
        },
        {
          "line": 2086,
          "old_api": null,
          "new_api": "config_set_number",
          "old_text": null,
          "new_text": "config_set_number(\"health\", \"in memory max health log entries\", (long)localhost.health_log.max)",
          "old_line_content": "    else localhost.health_log.max = (unsigned int)n;",
          "new_line_content": "        config_set_number(\"health\", \"in memory max health log entries\", (long)localhost.health_log.max);",
          "content_same": false
        },
        {
          "line": 2091,
          "old_api": null,
          "new_api": "health_readdir",
          "old_text": null,
          "new_text": "health_readdir(path)",
          "old_line_content": "}",
          "new_line_content": "    health_readdir(path);",
          "content_same": false
        },
        {
          "line": 2092,
          "old_api": null,
          "new_api": "rrdhost_unlock",
          "old_text": null,
          "new_text": "rrdhost_unlock(&localhost)",
          "old_line_content": "",
          "new_line_content": "    rrdhost_unlock(&localhost);",
          "content_same": false
        },
        {
          "line": 2102,
          "old_api": null,
          "new_api": "buffer_sprintf",
          "old_text": null,
          "new_text": "buffer_sprintf(wb, \"%s\\\"%s\\\":null%s\", prefix, label, suffix)",
          "old_line_content": "",
          "new_line_content": "        buffer_sprintf(wb, \"%s\\\"%s\\\":null%s\", prefix, label, suffix);",
          "content_same": false
        },
        {
          "line": 2106,
          "old_api": null,
          "new_api": "buffer_sprintf",
          "old_text": null,
          "new_text": "buffer_sprintf(wb, \"\\n\\t{\\n\"\n                           \"\\t\\t\\\"hostname\\\": \\\"%s\\\",\\n\"\n                           \"\\t\\t\\\"unique_id\\\": %u,\\n\"\n                           \"\\t\\t\\\"alarm_id\\\": %u,\\n\"\n                           \"\\t\\t\\\"alarm_event_id\\\": %u,\\n\"\n                           \"\\t\\t\\\"name\\\": \\\"%s\\\",\\n\"\n                           \"\\t\\t\\\"chart\\\": \\\"%s\\\",\\n\"\n                           \"\\t\\t\\\"family\\\": \\\"%s\\\",\\n\"\n                           \"\\t\\t\\\"processed\\\": %s,\\n\"\n                           \"\\t\\t\\\"updated\\\": %s,\\n\"\n                           \"\\t\\t\\\"exec_run\\\": %lu,\\n\"\n                           \"\\t\\t\\\"exec_failed\\\": %s,\\n\"\n                           \"\\t\\t\\\"exec\\\": \\\"%s\\\",\\n\"\n                           \"\\t\\t\\\"recipient\\\": \\\"%s\\\",\\n\"\n                           \"\\t\\t\\\"exec_code\\\": %d,\\n\"\n                           \"\\t\\t\\\"source\\\": \\\"%s\\\",\\n\"\n                           \"\\t\\t\\\"units\\\": \\\"%s\\\",\\n\"\n                           \"\\t\\t\\\"info\\\": \\\"%s\\\",\\n\"\n                           \"\\t\\t\\\"when\\\": %lu,\\n\"\n                           \"\\t\\t\\\"duration\\\": %lu,\\n\"\n                           \"\\t\\t\\\"non_clear_duration\\\": %lu,\\n\"\n                           \"\\t\\t\\\"status\\\": \\\"%s\\\",\\n\"\n                           \"\\t\\t\\\"old_status\\\": \\\"%s\\\",\\n\"\n                           \"\\t\\t\\\"delay\\\": %d,\\n\"\n                           \"\\t\\t\\\"delay_up_to_timestamp\\\": %lu,\\n\"\n                           \"\\t\\t\\\"updated_by_id\\\": %u,\\n\"\n                           \"\\t\\t\\\"updates_id\\\": %u,\\n\",\n                   host->hostname,\n                   ae->unique_id,\n                   ae->alarm_id,\n                   ae->alarm_event_id,\n                   ae->name,\n                   ae->chart,\n                   ae->family,\n                   (ae->flags & HEALTH_ENTRY_FLAG_PROCESSED)?\"true\":\"false\",\n                   (ae->flags & HEALTH_ENTRY_FLAG_UPDATED)?\"true\":\"false\",\n                   (unsigned long)ae->exec_run_timestamp,\n                   (ae->flags & HEALTH_ENTRY_FLAG_EXEC_FAILED)?\"true\":\"false\",\n                   ae->exec?ae->exec:health.health_default_exec,\n                   ae->recipient?ae->recipient:health.health_default_recipient,\n                   ae->exec_code,\n                   ae->source,\n                   ae->units?ae->units:\"\",\n                   ae->info?ae->info:\"\",\n                   (unsigned long)ae->when,\n                   (unsigned long)ae->duration,\n                   (unsigned long)ae->non_clear_duration,\n                   rrdcalc_status2string(ae->new_status),\n                   rrdcalc_status2string(ae->old_status),\n                   ae->delay,\n                   (unsigned long)ae->delay_up_to_timestamp,\n                   ae->updated_by_id,\n                   ae->updates_id\n    )",
          "old_line_content": "                           \"\\t\\t\\\"unique_id\\\": %u,\\n\"",
          "new_line_content": "    buffer_sprintf(wb, \"\\n\\t{\\n\"",
          "content_same": false
        },
        {
          "line": 2153,
          "old_api": null,
          "new_api": "rrdcalc_status2string",
          "old_text": null,
          "new_text": "rrdcalc_status2string(ae->new_status)",
          "old_line_content": "                   ae->delay,",
          "new_line_content": "                   rrdcalc_status2string(ae->new_status),",
          "content_same": false
        },
        {
          "line": 2154,
          "old_api": null,
          "new_api": "rrdcalc_status2string",
          "old_text": null,
          "new_text": "rrdcalc_status2string(ae->old_status)",
          "old_line_content": "                   (unsigned long)ae->delay_up_to_timestamp,",
          "new_line_content": "                   rrdcalc_status2string(ae->old_status),",
          "content_same": false
        },
        {
          "line": 2162,
          "old_api": null,
          "new_api": "buffer_rrd_value",
          "old_text": null,
          "new_text": "buffer_rrd_value(wb, ae->new_value)",
          "old_line_content": "",
          "new_line_content": "    buffer_rrd_value(wb, ae->new_value);",
          "content_same": false
        },
        {
          "line": 2166,
          "old_api": null,
          "new_api": "buffer_rrd_value",
          "old_text": null,
          "new_text": "buffer_rrd_value(wb, ae->old_value)",
          "old_line_content": "",
          "new_line_content": "    buffer_rrd_value(wb, ae->old_value);",
          "content_same": false
        },
        {
          "line": 2169,
          "old_api": null,
          "new_api": "buffer_strcat",
          "old_text": null,
          "new_text": "buffer_strcat(wb, \"\\t}\")",
          "old_line_content": "",
          "new_line_content": "    buffer_strcat(wb, \"\\t}\");",
          "content_same": false
        },
        {
          "line": 2175,
          "old_api": null,
          "new_api": "buffer_strcat",
          "old_text": null,
          "new_text": "buffer_strcat(wb, \"[\")",
          "old_line_content": "    unsigned int max = host->health_log.max;",
          "new_line_content": "    buffer_strcat(wb, \"[\");",
          "content_same": false
        },
        {
          "line": 2182,
          "old_api": null,
          "new_api": "buffer_strcat",
          "old_text": null,
          "new_text": "buffer_strcat(wb, \",\")",
          "old_line_content": "        }",
          "new_line_content": "            if(likely(count)) buffer_strcat(wb, \",\");",
          "content_same": false
        },
        {
          "line": 2183,
          "old_api": null,
          "new_api": "health_alarm_entry2json_nolock",
          "old_text": null,
          "new_text": "health_alarm_entry2json_nolock(wb, ae, host)",
          "old_line_content": "    }",
          "new_line_content": "            health_alarm_entry2json_nolock(wb, ae, host);",
          "content_same": false
        },
        {
          "line": 2189,
          "old_api": null,
          "new_api": "pthread_rwlock_unlock",
          "old_text": null,
          "new_text": "pthread_rwlock_unlock(&host->health_log.alarm_log_rwlock)",
          "old_line_content": "",
          "new_line_content": "    pthread_rwlock_unlock(&host->health_log.alarm_log_rwlock);",
          "content_same": false
        },
        {
          "line": 2193,
          "old_api": null,
          "new_api": "buffer_sprintf",
          "old_text": null,
          "new_text": "buffer_sprintf(wb,\n           \"\\t\\t\\\"%s.%s\\\": {\\n\"\n                   \"\\t\\t\\t\\\"id\\\": %lu,\\n\"\n                   \"\\t\\t\\t\\\"name\\\": \\\"%s\\\",\\n\"\n                   \"\\t\\t\\t\\\"chart\\\": \\\"%s\\\",\\n\"\n                   \"\\t\\t\\t\\\"family\\\": \\\"%s\\\",\\n\"\n                   \"\\t\\t\\t\\\"active\\\": %s,\\n\"\n                   \"\\t\\t\\t\\\"exec\\\": \\\"%s\\\",\\n\"\n                   \"\\t\\t\\t\\\"recipient\\\": \\\"%s\\\",\\n\"\n                   \"\\t\\t\\t\\\"source\\\": \\\"%s\\\",\\n\"\n                   \"\\t\\t\\t\\\"units\\\": \\\"%s\\\",\\n\"\n                   \"\\t\\t\\t\\\"info\\\": \\\"%s\\\",\\n\"\n\t\t\t\t   \"\\t\\t\\t\\\"status\\\": \\\"%s\\\",\\n\"\n                   \"\\t\\t\\t\\\"last_status_change\\\": %lu,\\n\"\n                   \"\\t\\t\\t\\\"last_updated\\\": %lu,\\n\"\n                   \"\\t\\t\\t\\\"next_update\\\": %lu,\\n\"\n                   \"\\t\\t\\t\\\"update_every\\\": %d,\\n\"\n                   \"\\t\\t\\t\\\"delay_up_duration\\\": %d,\\n\"\n                   \"\\t\\t\\t\\\"delay_down_duration\\\": %d,\\n\"\n                   \"\\t\\t\\t\\\"delay_max_duration\\\": %d,\\n\"\n                   \"\\t\\t\\t\\\"delay_multiplier\\\": %f,\\n\"\n                   \"\\t\\t\\t\\\"delay\\\": %d,\\n\"\n                   \"\\t\\t\\t\\\"delay_up_to_timestamp\\\": %lu,\\n\"\n            , rc->chart, rc->name\n            , (unsigned long)rc->id\n            , rc->name\n            , rc->chart\n            , (rc->rrdset && rc->rrdset->family)?rc->rrdset->family:\"\"\n            , (rc->rrdset)?\"true\":\"false\"\n            , rc->exec?rc->exec:health.health_default_exec\n            , rc->recipient?rc->recipient:health.health_default_recipient\n            , rc->source\n            , rc->units?rc->units:\"\"\n            , rc->info?rc->info:\"\"\n            , rrdcalc_status2string(rc->status)\n            , (unsigned long)rc->last_status_change\n            , (unsigned long)rc->last_updated\n            , (unsigned long)rc->next_update\n            , rc->update_every\n            , rc->delay_up_duration\n            , rc->delay_down_duration\n            , rc->delay_max_duration\n            , rc->delay_multiplier\n            , rc->delay_last\n            , (unsigned long)rc->delay_up_to_timestamp\n    )",
          "old_line_content": "                   \"\\t\\t\\t\\\"id\\\": %lu,\\n\"",
          "new_line_content": "    buffer_sprintf(wb,",
          "content_same": false
        },
        {
          "line": 2227,
          "old_api": null,
          "new_api": "rrdcalc_status2string",
          "old_text": null,
          "new_text": "rrdcalc_status2string(rc->status)",
          "old_line_content": "            , (unsigned long)rc->last_updated",
          "new_line_content": "            , rrdcalc_status2string(rc->status)",
          "content_same": false
        },
        {
          "line": 2244,
          "old_api": null,
          "new_api": "buffer_sprintf",
          "old_text": null,
          "new_text": "buffer_sprintf(wb,\n                       \"\\t\\t\\t\\\"db_after\\\": %lu,\\n\"\n                       \"\\t\\t\\t\\\"db_before\\\": %lu,\\n\"\n                       \"\\t\\t\\t\\\"lookup_method\\\": \\\"%s\\\",\\n\"\n                       \"\\t\\t\\t\\\"lookup_after\\\": %d,\\n\"\n                       \"\\t\\t\\t\\\"lookup_before\\\": %d,\\n\"\n                       \"\\t\\t\\t\\\"lookup_options\\\": \\\"\",\n                       (unsigned long) rc->db_after,\n                       (unsigned long) rc->db_before,\n                       group_method2string(rc->group),\n                       rc->after,\n                       rc->before\n        )",
          "old_line_content": "                       \"\\t\\t\\t\\\"db_before\\\": %lu,\\n\"",
          "new_line_content": "        buffer_sprintf(wb,",
          "content_same": false
        },
        {
          "line": 2253,
          "old_api": null,
          "new_api": "group_method2string",
          "old_text": null,
          "new_text": "group_method2string(rc->group)",
          "old_line_content": "                       rc->before",
          "new_line_content": "                       group_method2string(rc->group),",
          "content_same": false
        },
        {
          "line": 2257,
          "old_api": null,
          "new_api": "buffer_data_options2string",
          "old_text": null,
          "new_text": "buffer_data_options2string(wb, rc->options)",
          "old_line_content": "    }",
          "new_line_content": "        buffer_data_options2string(wb, rc->options);",
          "content_same": false
        },
        {
          "line": 2258,
          "old_api": null,
          "new_api": "buffer_strcat",
          "old_text": null,
          "new_text": "buffer_strcat(wb, \"\\\",\\n\")",
          "old_line_content": "",
          "new_line_content": "        buffer_strcat(wb, \"\\\",\\n\");",
          "content_same": false
        },
        {
          "line": 2262,
          "old_api": null,
          "new_api": "health_string2json",
          "old_text": null,
          "new_text": "health_string2json(wb, \"\\t\\t\\t\", \"calc\", rc->calculation->source, \",\\n\")",
          "old_line_content": "    }",
          "new_line_content": "        health_string2json(wb, \"\\t\\t\\t\", \"calc\", rc->calculation->source, \",\\n\");",
          "content_same": false
        },
        {
          "line": 2263,
          "old_api": null,
          "new_api": "health_string2json",
          "old_text": null,
          "new_text": "health_string2json(wb, \"\\t\\t\\t\", \"calc_parsed\", rc->calculation->parsed_as, \",\\n\")",
          "old_line_content": "",
          "new_line_content": "        health_string2json(wb, \"\\t\\t\\t\", \"calc_parsed\", rc->calculation->parsed_as, \",\\n\");",
          "content_same": false
        },
        {
          "line": 2267,
          "old_api": null,
          "new_api": "health_string2json",
          "old_text": null,
          "new_text": "health_string2json(wb, \"\\t\\t\\t\", \"warn\", rc->warning->source, \",\\n\")",
          "old_line_content": "    }",
          "new_line_content": "        health_string2json(wb, \"\\t\\t\\t\", \"warn\", rc->warning->source, \",\\n\");",
          "content_same": false
        },
        {
          "line": 2268,
          "old_api": null,
          "new_api": "health_string2json",
          "old_text": null,
          "new_text": "health_string2json(wb, \"\\t\\t\\t\", \"warn_parsed\", rc->warning->parsed_as, \",\\n\")",
          "old_line_content": "",
          "new_line_content": "        health_string2json(wb, \"\\t\\t\\t\", \"warn_parsed\", rc->warning->parsed_as, \",\\n\");",
          "content_same": false
        },
        {
          "line": 2272,
          "old_api": null,
          "new_api": "health_string2json",
          "old_text": null,
          "new_text": "health_string2json(wb, \"\\t\\t\\t\", \"crit\", rc->critical->source, \",\\n\")",
          "old_line_content": "    }",
          "new_line_content": "        health_string2json(wb, \"\\t\\t\\t\", \"crit\", rc->critical->source, \",\\n\");",
          "content_same": false
        },
        {
          "line": 2273,
          "old_api": null,
          "new_api": "health_string2json",
          "old_text": null,
          "new_text": "health_string2json(wb, \"\\t\\t\\t\", \"crit_parsed\", rc->critical->parsed_as, \",\\n\")",
          "old_line_content": "",
          "new_line_content": "        health_string2json(wb, \"\\t\\t\\t\", \"crit_parsed\", rc->critical->parsed_as, \",\\n\");",
          "content_same": false
        },
        {
          "line": 2277,
          "old_api": null,
          "new_api": "buffer_rrd_value",
          "old_text": null,
          "new_text": "buffer_rrd_value(wb, rc->green)",
          "old_line_content": "",
          "new_line_content": "    buffer_rrd_value(wb, rc->green);",
          "content_same": false
        },
        {
          "line": 2281,
          "old_api": null,
          "new_api": "buffer_rrd_value",
          "old_text": null,
          "new_text": "buffer_rrd_value(wb, rc->red)",
          "old_line_content": "",
          "new_line_content": "    buffer_rrd_value(wb, rc->red);",
          "content_same": false
        },
        {
          "line": 2285,
          "old_api": null,
          "new_api": "buffer_rrd_value",
          "old_text": null,
          "new_text": "buffer_rrd_value(wb, rc->value)",
          "old_line_content": "",
          "new_line_content": "    buffer_rrd_value(wb, rc->value);",
          "content_same": false
        },
        {
          "line": 2288,
          "old_api": null,
          "new_api": "buffer_strcat",
          "old_text": null,
          "new_text": "buffer_strcat(wb, \"\\t\\t}\")",
          "old_line_content": "",
          "new_line_content": "    buffer_strcat(wb, \"\\t\\t}\");",
          "content_same": false
        },
        {
          "line": 2298,
          "old_api": null,
          "new_api": "rrdhost_rdlock",
          "old_text": null,
          "new_text": "rrdhost_rdlock(&localhost)",
          "old_line_content": "                        \"\\n\\t\\\"latest_alarm_log_unique_id\\\": %u,\"",
          "new_line_content": "    rrdhost_rdlock(&localhost);",
          "content_same": false
        },
        {
          "line": 250,
          "old_api": null,
          "new_api": "simple_hash",
          "old_text": null,
          "new_text": "simple_hash(ae->name)",
          "old_line_content": "",
          "new_line_content": "            ae->hash_name = simple_hash(ae->name);",
          "content_same": false
        },
        {
          "line": 2299,
          "old_api": null,
          "new_api": "buffer_sprintf",
          "old_text": null,
          "new_text": "buffer_sprintf(wb, \"{\\n\\t\\\"hostname\\\": \\\"%s\\\",\"\n                        \"\\n\\t\\\"latest_alarm_log_unique_id\\\": %u,\"\n                        \"\\n\\t\\\"status\\\": %s,\"\n                        \"\\n\\t\\\"now\\\": %lu,\"\n                        \"\\n\\t\\\"alarms\\\": {\\n\",\n                        host->hostname,\n                        (host->health_log.next_log_id > 0)?(host->health_log.next_log_id - 1):0,\n                        health_enabled?\"true\":\"false\",\n                        (unsigned long)time(NULL))",
          "old_line_content": "                        \"\\n\\t\\\"status\\\": %s,\"",
          "new_line_content": "    buffer_sprintf(wb, \"{\\n\\t\\\"hostname\\\": \\\"%s\\\",\"",
          "content_same": false
        },
        {
          "line": 253,
          "old_api": null,
          "new_api": "strdupz",
          "old_text": null,
          "new_text": "strdupz(pointers[14])",
          "old_line_content": "",
          "new_line_content": "            ae->chart = strdupz(pointers[14]);",
          "content_same": false
        },
        {
          "line": 256,
          "old_api": null,
          "new_api": "freez",
          "old_text": null,
          "new_text": "freez(ae->family)",
          "old_line_content": "",
          "new_line_content": "            if(unlikely(ae->family)) freez(ae->family);",
          "content_same": false
        },
        {
          "line": 2307,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "    RRDCALC *rc;",
          "new_line_content": "                        (unsigned long)time(NULL));",
          "content_same": false
        },
        {
          "line": 260,
          "old_api": null,
          "new_api": "strdupz",
          "old_text": null,
          "new_text": "strdupz(pointers[16])",
          "old_line_content": "",
          "new_line_content": "            ae->exec = strdupz(pointers[16]);",
          "content_same": false
        },
        {
          "line": 2311,
          "old_api": null,
          "new_api": "unlikely",
          "old_text": null,
          "new_text": "unlikely(!rc->rrdset || !rc->rrdset->last_collected_time.tv_sec)",
          "old_line_content": "",
          "new_line_content": "        if(unlikely(!rc->rrdset || !rc->rrdset->last_collected_time.tv_sec))",
          "content_same": false
        },
        {
          "line": 264,
          "old_api": null,
          "new_api": "strdupz",
          "old_text": null,
          "new_text": "strdupz(pointers[17])",
          "old_line_content": "",
          "new_line_content": "            ae->recipient = strdupz(pointers[17]);",
          "content_same": false
        },
        {
          "line": 2314,
          "old_api": null,
          "new_api": "likely",
          "old_text": null,
          "new_text": "likely(!all && !(rc->status == RRDCALC_STATUS_WARNING || rc->status == RRDCALC_STATUS_CRITICAL))",
          "old_line_content": "",
          "new_line_content": "        if(likely(!all && !(rc->status == RRDCALC_STATUS_WARNING || rc->status == RRDCALC_STATUS_CRITICAL)))",
          "content_same": false
        },
        {
          "line": 268,
          "old_api": null,
          "new_api": "strdupz",
          "old_text": null,
          "new_text": "strdupz(pointers[18])",
          "old_line_content": "",
          "new_line_content": "            ae->source = strdupz(pointers[18]);",
          "content_same": false
        },
        {
          "line": 2317,
          "old_api": null,
          "new_api": "buffer_strcat",
          "old_text": null,
          "new_text": "buffer_strcat(wb, \",\\n\")",
          "old_line_content": "        i++;",
          "new_line_content": "        if(likely(i)) buffer_strcat(wb, \",\\n\");",
          "content_same": false
        },
        {
          "line": 2318,
          "old_api": null,
          "new_api": "health_rrdcalc2json_nolock",
          "old_text": null,
          "new_text": "health_rrdcalc2json_nolock(wb, rc)",
          "old_line_content": "    }",
          "new_line_content": "        health_rrdcalc2json_nolock(wb, rc);",
          "content_same": false
        },
        {
          "line": 272,
          "old_api": null,
          "new_api": "strdupz",
          "old_text": null,
          "new_text": "strdupz(pointers[19])",
          "old_line_content": "",
          "new_line_content": "            ae->units = strdupz(pointers[19]);",
          "content_same": false
        },
        {
          "line": 276,
          "old_api": null,
          "new_api": "strdupz",
          "old_text": null,
          "new_text": "strdupz(pointers[20])",
          "old_line_content": "",
          "new_line_content": "            ae->info = strdupz(pointers[20]);",
          "content_same": false
        },
        {
          "line": 2327,
          "old_api": null,
          "new_api": "buffer_strcat",
          "old_text": null,
          "new_text": "buffer_strcat(wb, \"\\n\\t}\\n}\\n\")",
          "old_line_content": "}",
          "new_line_content": "    buffer_strcat(wb, \"\\n\\t}\\n}\\n\");",
          "content_same": false
        },
        {
          "line": 2328,
          "old_api": null,
          "new_api": "rrdhost_unlock",
          "old_text": null,
          "new_text": "rrdhost_unlock(&localhost)",
          "old_line_content": "",
          "new_line_content": "    rrdhost_unlock(&localhost);",
          "content_same": false
        },
        {
          "line": 281,
          "old_api": null,
          "new_api": "atoi",
          "old_text": null,
          "new_text": "atoi(pointers[23])",
          "old_line_content": "",
          "new_line_content": "            ae->old_status  = atoi(pointers[23]);",
          "content_same": false
        },
        {
          "line": 284,
          "old_api": null,
          "new_api": "strtold",
          "old_text": null,
          "new_text": "strtold(pointers[25], NULL)",
          "old_line_content": "",
          "new_line_content": "            ae->new_value   = strtold(pointers[25], NULL);",
          "content_same": false
        },
        {
          "line": 285,
          "old_api": null,
          "new_api": "strtold",
          "old_text": null,
          "new_text": "strtold(pointers[26], NULL)",
          "old_line_content": "            // add it to host if not already there",
          "new_line_content": "            ae->old_value   = strtold(pointers[26], NULL);",
          "content_same": false
        },
        {
          "line": 288,
          "old_api": null,
          "new_api": "unlikely",
          "old_text": null,
          "new_text": "unlikely(*pointers[0] == 'A')",
          "old_line_content": "                host->health_log.alarms = ae;",
          "new_line_content": "            if(unlikely(*pointers[0] == 'A')) {",
          "content_same": false
        },
        {
          "line": 2337,
          "old_api": null,
          "new_api": "rrdcalctemplate_free",
          "old_text": null,
          "new_text": "rrdcalctemplate_free(host, host->templates)",
          "old_line_content": "    while(host->alarms)",
          "new_line_content": "        rrdcalctemplate_free(host, host->templates);",
          "content_same": false
        },
        {
          "line": 2340,
          "old_api": null,
          "new_api": "rrdcalc_free",
          "old_text": null,
          "new_text": "rrdcalc_free(host, host->alarms)",
          "old_line_content": "",
          "new_line_content": "        rrdcalc_free(host, host->alarms);",
          "content_same": false
        },
        {
          "line": 295,
          "old_api": null,
          "new_api": "unlikely",
          "old_text": null,
          "new_text": "unlikely(ae->unique_id > max_unique_id)",
          "old_line_content": "",
          "new_line_content": "            if(unlikely(ae->unique_id > max_unique_id))",
          "content_same": false
        },
        {
          "line": 2345,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"Health reload is requested, but health is not enabled.\")",
          "old_line_content": "    }",
          "new_line_content": "        error(\"Health reload is requested, but health is not enabled.\");",
          "content_same": false
        },
        {
          "line": 298,
          "old_api": null,
          "new_api": "unlikely",
          "old_text": null,
          "new_text": "unlikely(ae->alarm_id >= max_alarm_id)",
          "old_line_content": "        }",
          "new_line_content": "            if(unlikely(ae->alarm_id >= max_alarm_id))",
          "content_same": false
        },
        {
          "line": 2349,
          "old_api": null,
          "new_api": "health_config_dir",
          "old_text": null,
          "new_text": "health_config_dir()",
          "old_line_content": "    // free all running alarms",
          "new_line_content": "    char *path = health_config_dir();",
          "content_same": false
        },
        {
          "line": 302,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"Health: line %zu of file '%s' is invalid (unrecognized entry type '%s').\", line, filename, pointers[0])",
          "old_line_content": "        }",
          "new_line_content": "            error(\"Health: line %zu of file '%s' is invalid (unrecognized entry type '%s').\", line, filename, pointers[0]);",
          "content_same": false
        },
        {
          "line": 2353,
          "old_api": null,
          "new_api": "health_free_all_nolock",
          "old_text": null,
          "new_text": "health_free_all_nolock(&localhost)",
          "old_line_content": "",
          "new_line_content": "    health_free_all_nolock(&localhost);",
          "content_same": false
        },
        {
          "line": 2354,
          "old_api": null,
          "new_api": "rrdhost_unlock",
          "old_text": null,
          "new_text": "rrdhost_unlock(&localhost)",
          "old_line_content": "    // invalidate all previous entries in the alarm log",
          "new_line_content": "    rrdhost_unlock(&localhost);",
          "content_same": false
        },
        {
          "line": 311,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "",
          "new_line_content": "    if(!max_unique_id) max_unique_id = (uint32_t)time(NULL);",
          "content_same": false
        },
        {
          "line": 312,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "    host->health_log.next_log_id = max_unique_id + 1;",
          "new_line_content": "    if(!max_alarm_id)  max_alarm_id  = (uint32_t)time(NULL);",
          "content_same": false
        },
        {
          "line": 317,
          "old_api": null,
          "new_api": "info",
          "old_text": null,
          "new_text": "info(\"Health: loaded file '%s' with %zd new alarm entries, updated %zd alarms, errors %zd entries, duplicate %zd\", filename, loaded, updated, errored, duplicate)",
          "old_line_content": "}",
          "new_line_content": "    info(\"Health: loaded file '%s' with %zd new alarm entries, updated %zd alarms, errors %zd entries, duplicate %zd\", filename, loaded, updated, errored, duplicate);",
          "content_same": false
        },
        {
          "line": 322,
          "old_api": null,
          "new_api": "health_alarm_log_close",
          "old_text": null,
          "new_text": "health_alarm_log_close()",
          "old_line_content": "    char buffer[FILENAME_MAX + 1];",
          "new_line_content": "    health_alarm_log_close();",
          "content_same": false
        },
        {
          "line": 2372,
          "old_api": null,
          "new_api": "health_readdir",
          "old_text": null,
          "new_text": "health_readdir(path)",
          "old_line_content": "",
          "new_line_content": "    health_readdir(path);",
          "content_same": false
        },
        {
          "line": 325,
          "old_api": null,
          "new_api": "snprintfz",
          "old_text": null,
          "new_text": "snprintfz(buffer, FILENAME_MAX, \"%s.old\", health.log_filename)",
          "old_line_content": "    if(!fp)",
          "new_line_content": "    snprintfz(buffer, FILENAME_MAX, \"%s.old\", health.log_filename);",
          "content_same": false
        },
        {
          "line": 2373,
          "old_api": null,
          "new_api": "rrdhost_unlock",
          "old_text": null,
          "new_text": "rrdhost_unlock(&localhost)",
          "old_line_content": "    // link the loaded alarms to their charts",
          "new_line_content": "    rrdhost_unlock(&localhost);",
          "content_same": false
        },
        {
          "line": 330,
          "old_api": null,
          "new_api": "health_alarm_log_read",
          "old_text": null,
          "new_text": "health_alarm_log_read(host, fp, health.log_filename)",
          "old_line_content": "    }",
          "new_line_content": "        health_alarm_log_read(host, fp, health.log_filename);",
          "content_same": false
        },
        {
          "line": 331,
          "old_api": null,
          "new_api": "fclose",
          "old_text": null,
          "new_text": "fclose(fp)",
          "old_line_content": "",
          "new_line_content": "        fclose(fp);",
          "content_same": false
        },
        {
          "line": 2379,
          "old_api": null,
          "new_api": "rrdsetcalc_link_matching",
          "old_text": null,
          "new_text": "rrdsetcalc_link_matching(st)",
          "old_line_content": "",
          "new_line_content": "        rrdsetcalc_link_matching(st);",
          "content_same": false
        },
        {
          "line": 2382,
          "old_api": null,
          "new_api": "rrdhost_unlock",
          "old_text": null,
          "new_text": "rrdhost_unlock(&localhost)",
          "old_line_content": "}",
          "new_line_content": "        rrdhost_unlock(&localhost);",
          "content_same": false
        },
        {
          "line": 339,
          "old_api": null,
          "new_api": "health_alarm_log_read",
          "old_text": null,
          "new_text": "health_alarm_log_read(host, fp, health.log_filename)",
          "old_line_content": "    }",
          "new_line_content": "        health_alarm_log_read(host, fp, health.log_filename);",
          "content_same": false
        },
        {
          "line": 340,
          "old_api": null,
          "new_api": "fclose",
          "old_text": null,
          "new_text": "fclose(fp)",
          "old_line_content": "",
          "new_line_content": "        fclose(fp);",
          "content_same": false
        },
        {
          "line": 2390,
          "old_api": null,
          "new_api": "isnan",
          "old_text": null,
          "new_text": "isnan(n)",
          "old_line_content": "    return RRDCALC_STATUS_CLEAR;",
          "new_line_content": "    if(isnan(n)) return RRDCALC_STATUS_UNDEFINED;",
          "content_same": false
        },
        {
          "line": 343,
          "old_api": null,
          "new_api": "health_alarm_log_open",
          "old_text": null,
          "new_text": "health_alarm_log_open()",
          "old_line_content": "",
          "new_line_content": "    health_alarm_log_open();",
          "content_same": false
        },
        {
          "line": 2407,
          "old_api": null,
          "new_api": "rrdcalc_status2string",
          "old_text": null,
          "new_text": "rrdcalc_status2string(ae->new_status)",
          "old_line_content": "    }",
          "new_line_content": "        info(\"Health not sending again notification for alarm '%s.%s' status %s\", ae->chart, ae->name, rrdcalc_status2string(ae->new_status));",
          "content_same": false
        },
        {
          "line": 365,
          "old_api": null,
          "new_api": "strdupz",
          "old_text": null,
          "new_text": "strdupz(name)",
          "old_line_content": "",
          "new_line_content": "    ae->name = strdupz(name);",
          "content_same": false
        },
        {
          "line": 366,
          "old_api": null,
          "new_api": "simple_hash",
          "old_text": null,
          "new_text": "simple_hash(ae->name)",
          "old_line_content": "    if(chart) {",
          "new_line_content": "    ae->hash_name = simple_hash(ae->name);",
          "content_same": false
        },
        {
          "line": 2413,
          "old_api": null,
          "new_api": "rrdcalc_status2string",
          "old_text": null,
          "new_text": "rrdcalc_status2string(ae->new_status)",
          "old_line_content": "    }",
          "new_line_content": "        info(\"Health not sending notification for first initialization of alarm '%s.%s' status %s\", ae->chart, ae->name, rrdcalc_status2string(ae->new_status));",
          "content_same": false
        },
        {
          "line": 369,
          "old_api": null,
          "new_api": "strdupz",
          "old_text": null,
          "new_text": "strdupz(chart)",
          "old_line_content": "    }",
          "new_line_content": "        ae->chart = strdupz(chart);",
          "content_same": false
        },
        {
          "line": 370,
          "old_api": null,
          "new_api": "simple_hash",
          "old_text": null,
          "new_text": "simple_hash(ae->chart)",
          "old_line_content": "",
          "new_line_content": "        ae->hash_chart = simple_hash(ae->chart);",
          "content_same": false
        },
        {
          "line": 2426,
          "old_api": null,
          "new_api": "snprintfz",
          "old_text": null,
          "new_text": "snprintfz(buffer, FILENAME_MAX, \"exec %s '%s' '%s' '%u' '%u' '%u' '%lu' '%s' '%s' '%s' '%s' '%s' '%0.0Lf' '%0.0Lf' '%s' '%u' '%u' '%s' '%s'\",\n              exec,\n              recipient,\n              host->hostname,\n              ae->unique_id,\n              ae->alarm_id,\n              ae->alarm_event_id,\n              (unsigned long)ae->when,\n              ae->name,\n              ae->chart?ae->chart:\"NOCAHRT\",\n              ae->family?ae->family:\"NOFAMILY\",\n              rrdcalc_status2string(ae->new_status),\n              rrdcalc_status2string(ae->old_status),\n              ae->new_value,\n              ae->old_value,\n              ae->source?ae->source:\"UNKNOWN\",\n              (uint32_t)ae->duration,\n              (uint32_t)ae->non_clear_duration,\n              ae->units?ae->units:\"\",\n              ae->info?ae->info:\"\"\n    )",
          "old_line_content": "              recipient,",
          "new_line_content": "    snprintfz(buffer, FILENAME_MAX, \"exec %s '%s' '%s' '%u' '%u' '%u' '%lu' '%s' '%s' '%s' '%s' '%s' '%0.0Lf' '%0.0Lf' '%s' '%u' '%u' '%s' '%s'\",",
          "content_same": false
        },
        {
          "line": 379,
          "old_api": null,
          "new_api": "strdupz",
          "old_text": null,
          "new_text": "strdupz(units)",
          "old_line_content": "",
          "new_line_content": "    if(units) ae->units = strdupz(units);",
          "content_same": false
        },
        {
          "line": 380,
          "old_api": null,
          "new_api": "strdupz",
          "old_text": null,
          "new_text": "strdupz(info)",
          "old_line_content": "    ae->unique_id = host->health_log.next_log_id++;",
          "new_line_content": "    if(info) ae->info = strdupz(info);",
          "content_same": false
        },
        {
          "line": 2437,
          "old_api": null,
          "new_api": "rrdcalc_status2string",
          "old_text": null,
          "new_text": "rrdcalc_status2string(ae->new_status)",
          "old_line_content": "              ae->new_value,",
          "new_line_content": "              rrdcalc_status2string(ae->new_status),",
          "content_same": false
        },
        {
          "line": 2438,
          "old_api": null,
          "new_api": "rrdcalc_status2string",
          "old_text": null,
          "new_text": "rrdcalc_status2string(ae->old_status)",
          "old_line_content": "              ae->old_value,",
          "new_line_content": "              rrdcalc_status2string(ae->old_status),",
          "content_same": false
        },
        {
          "line": 398,
          "old_api": null,
          "new_api": "pthread_rwlock_wrlock",
          "old_text": null,
          "new_text": "pthread_rwlock_wrlock(&host->health_log.alarm_log_rwlock)",
          "old_line_content": "    host->health_log.alarms = ae;",
          "new_line_content": "    pthread_rwlock_wrlock(&host->health_log.alarm_log_rwlock);",
          "content_same": false
        },
        {
          "line": 402,
          "old_api": null,
          "new_api": "pthread_rwlock_unlock",
          "old_text": null,
          "new_text": "pthread_rwlock_unlock(&host->health_log.alarm_log_rwlock)",
          "old_line_content": "    // match previous alarms",
          "new_line_content": "    pthread_rwlock_unlock(&host->health_log.alarm_log_rwlock);",
          "content_same": false
        },
        {
          "line": 2451,
          "old_api": null,
          "new_api": "debug",
          "old_text": null,
          "new_text": "debug(D_HEALTH, \"executing command '%s'\", buffer)",
          "old_line_content": "    if(!fp) {",
          "new_line_content": "    debug(D_HEALTH, \"executing command '%s'\", buffer);",
          "content_same": false
        },
        {
          "line": 405,
          "old_api": null,
          "new_api": "pthread_rwlock_rdlock",
          "old_text": null,
          "new_text": "pthread_rwlock_rdlock(&host->health_log.alarm_log_rwlock)",
          "old_line_content": "    for(t = host->health_log.alarms ; t ; t = t->next) {",
          "new_line_content": "    pthread_rwlock_rdlock(&host->health_log.alarm_log_rwlock);",
          "content_same": false
        },
        {
          "line": 2454,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"HEALTH: Cannot popen(\\\"%s\\\", \\\"r\\\").\", buffer)",
          "old_line_content": "    }",
          "new_line_content": "        error(\"HEALTH: Cannot popen(\\\"%s\\\", \\\"r\\\").\", buffer);",
          "content_same": false
        },
        {
          "line": 2457,
          "old_api": null,
          "new_api": "debug",
          "old_text": null,
          "new_text": "debug(D_HEALTH, \"HEALTH reading from command\")",
          "old_line_content": "    (void)s;",
          "new_line_content": "    debug(D_HEALTH, \"HEALTH reading from command\");",
          "content_same": false
        },
        {
          "line": 2460,
          "old_api": null,
          "new_api": "mypclose",
          "old_text": null,
          "new_text": "mypclose(fp, command_pid)",
          "old_line_content": "",
          "new_line_content": "    ae->exec_code = mypclose(fp, command_pid);",
          "content_same": false
        },
        {
          "line": 2461,
          "old_api": null,
          "new_api": "debug",
          "old_text": null,
          "new_text": "debug(D_HEALTH, \"done executing command - returned with code %d\", ae->exec_code)",
          "old_line_content": "    if(ae->exec_code != 0)",
          "new_line_content": "    debug(D_HEALTH, \"done executing command - returned with code %d\", ae->exec_code);",
          "content_same": false
        },
        {
          "line": 418,
          "old_api": null,
          "new_api": "health_alarm_log_save",
          "old_text": null,
          "new_text": "health_alarm_log_save(host, t)",
          "old_line_content": "",
          "new_line_content": "                health_alarm_log_save(host, t);",
          "content_same": false
        },
        {
          "line": 2467,
          "old_api": null,
          "new_api": "health_alarm_log_save",
          "old_text": null,
          "new_text": "health_alarm_log_save(host, ae)",
          "old_line_content": "}",
          "new_line_content": "    health_alarm_log_save(host, ae);",
          "content_same": false
        },
        {
          "line": 2472,
          "old_api": null,
          "new_api": "info",
          "old_text": null,
          "new_text": "info(\"Health alarm '%s.%s' = %0.2Lf - changed status from %s to %s\",\n         ae->chart?ae->chart:\"NOCHART\", ae->name,\n         ae->new_value,\n         rrdcalc_status2string(ae->old_status),\n         rrdcalc_status2string(ae->new_status)\n    )",
          "old_line_content": "         ae->new_value,",
          "new_line_content": "    info(\"Health alarm '%s.%s' = %0.2Lf - changed status from %s to %s\",",
          "content_same": false
        },
        {
          "line": 427,
          "old_api": null,
          "new_api": "health_alarm_log_save",
          "old_text": null,
          "new_text": "health_alarm_log_save(host, ae)",
          "old_line_content": "",
          "new_line_content": "    health_alarm_log_save(host, ae);",
          "content_same": false
        },
        {
          "line": 2475,
          "old_api": null,
          "new_api": "rrdcalc_status2string",
          "old_text": null,
          "new_text": "rrdcalc_status2string(ae->old_status)",
          "old_line_content": "    );",
          "new_line_content": "         rrdcalc_status2string(ae->old_status),",
          "content_same": false
        },
        {
          "line": 2476,
          "old_api": null,
          "new_api": "rrdcalc_status2string",
          "old_text": null,
          "new_text": "rrdcalc_status2string(ae->new_status)",
          "old_line_content": "",
          "new_line_content": "         rrdcalc_status2string(ae->new_status)",
          "content_same": false
        },
        {
          "line": 2479,
          "old_api": null,
          "new_api": "health_alarm_execute",
          "old_text": null,
          "new_text": "health_alarm_execute(host, ae)",
          "old_line_content": "",
          "new_line_content": "    health_alarm_execute(host, ae);",
          "content_same": false
        },
        {
          "line": 436,
          "old_api": null,
          "new_api": "isalnum",
          "old_text": null,
          "new_text": "isalnum(*variable)",
          "old_line_content": "            fixed++;",
          "new_line_content": "        if (!isalnum(*variable) && *variable != '.' && *variable != '_') {",
          "content_same": false
        },
        {
          "line": 2487,
          "old_api": null,
          "new_api": "pthread_rwlock_rdlock",
          "old_text": null,
          "new_text": "pthread_rwlock_rdlock(&host->health_log.alarm_log_rwlock)",
          "old_line_content": "    ALARM_ENTRY *ae;",
          "new_line_content": "    pthread_rwlock_rdlock(&host->health_log.alarm_log_rwlock);",
          "content_same": false
        },
        {
          "line": 2491,
          "old_api": null,
          "new_api": "unlikely",
          "old_text": null,
          "new_text": "unlikely(\n            !(ae->flags & HEALTH_ENTRY_FLAG_PROCESSED) &&\n            !(ae->flags & HEALTH_ENTRY_FLAG_UPDATED)\n            )",
          "old_line_content": "            !(ae->flags & HEALTH_ENTRY_FLAG_UPDATED)",
          "new_line_content": "        if(unlikely(",
          "content_same": false
        },
        {
          "line": 2496,
          "old_api": null,
          "new_api": "unlikely",
          "old_text": null,
          "new_text": "unlikely(ae->unique_id < first_waiting)",
          "old_line_content": "",
          "new_line_content": "            if(unlikely(ae->unique_id < first_waiting))",
          "content_same": false
        },
        {
          "line": 450,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(((RRDVAR *)a)->name, ((RRDVAR *)b)->name)",
          "old_line_content": "",
          "new_line_content": "    else return strcmp(((RRDVAR *)a)->name, ((RRDVAR *)b)->name);",
          "content_same": false
        },
        {
          "line": 2499,
          "old_api": null,
          "new_api": "likely",
          "old_text": null,
          "new_text": "likely(now >= ae->delay_up_to_timestamp)",
          "old_line_content": "        }",
          "new_line_content": "            if(likely(now >= ae->delay_up_to_timestamp))",
          "content_same": false
        },
        {
          "line": 2500,
          "old_api": null,
          "new_api": "health_process_notifications",
          "old_text": null,
          "new_text": "health_process_notifications(host, ae)",
          "old_line_content": "    }",
          "new_line_content": "                health_process_notifications(host, ae);",
          "content_same": false
        },
        {
          "line": 456,
          "old_api": null,
          "new_api": "debug",
          "old_text": null,
          "new_text": "debug(D_VARIABLES, \"Request to insert RRDVAR '%s' into index failed. Already exists.\", rv->name)",
          "old_line_content": "    return ret;",
          "new_line_content": "        debug(D_VARIABLES, \"Request to insert RRDVAR '%s' into index failed. Already exists.\", rv->name);",
          "content_same": false
        },
        {
          "line": 2507,
          "old_api": null,
          "new_api": "pthread_rwlock_unlock",
          "old_text": null,
          "new_text": "pthread_rwlock_unlock(&host->health_log.alarm_log_rwlock)",
          "old_line_content": "    if(host->health_log.count <= host->health_log.max)",
          "new_line_content": "    pthread_rwlock_unlock(&host->health_log.alarm_log_rwlock);",
          "content_same": false
        },
        {
          "line": 464,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"Request to remove RRDVAR '%s' from index failed. Not Found.\", rv->name)",
          "old_line_content": "    return ret;",
          "new_line_content": "        error(\"Request to remove RRDVAR '%s' from index failed. Not Found.\", rv->name);",
          "content_same": false
        },
        {
          "line": 2513,
          "old_api": null,
          "new_api": "pthread_rwlock_wrlock",
          "old_text": null,
          "new_text": "pthread_rwlock_wrlock(&host->health_log.alarm_log_rwlock)",
          "old_line_content": "    ALARM_ENTRY *last = NULL;",
          "new_line_content": "    pthread_rwlock_wrlock(&host->health_log.alarm_log_rwlock);",
          "content_same": false
        },
        {
          "line": 474,
          "old_api": null,
          "new_api": "avl_search_lock",
          "old_text": null,
          "new_text": "avl_search_lock(tree, (avl *)&tmp)",
          "old_line_content": "",
          "new_line_content": "    return (RRDVAR *)avl_search_lock(tree, (avl *)&tmp);",
          "content_same": false
        },
        {
          "line": 2525,
          "old_api": null,
          "new_api": "debug",
          "old_text": null,
          "new_text": "debug(D_HEALTH, \"Health removing alarm log entry with id: %u\", ae->unique_id)",
          "old_line_content": "        ALARM_ENTRY *t = ae->next;",
          "new_line_content": "        debug(D_HEALTH, \"Health removing alarm log entry with id: %u\", ae->unique_id);",
          "content_same": false
        },
        {
          "line": 485,
          "old_api": null,
          "new_api": "freez",
          "old_text": null,
          "new_text": "freez(rv->name)",
          "old_line_content": "}",
          "new_line_content": "    freez(rv->name);",
          "content_same": false
        },
        {
          "line": 486,
          "old_api": null,
          "new_api": "freez",
          "old_text": null,
          "new_text": "freez(rv)",
          "old_line_content": "",
          "new_line_content": "    freez(rv);",
          "content_same": false
        },
        {
          "line": 2536,
          "old_api": null,
          "new_api": "freez",
          "old_text": null,
          "new_text": "freez(ae->info)",
          "old_line_content": "",
          "new_line_content": "        freez(ae->info);",
          "content_same": false
        },
        {
          "line": 2537,
          "old_api": null,
          "new_api": "freez",
          "old_text": null,
          "new_text": "freez(ae)",
          "old_line_content": "        ae = t;",
          "new_line_content": "        freez(ae);",
          "content_same": false
        },
        {
          "line": 491,
          "old_api": null,
          "new_api": "rrdvar_fix_name",
          "old_text": null,
          "new_text": "rrdvar_fix_name(variable)",
          "old_line_content": "",
          "new_line_content": "    rrdvar_fix_name(variable);",
          "content_same": false
        },
        {
          "line": 495,
          "old_api": null,
          "new_api": "unlikely",
          "old_text": null,
          "new_text": "unlikely(!rv)",
          "old_line_content": "",
          "new_line_content": "    if(unlikely(!rv)) {",
          "content_same": false
        },
        {
          "line": 2543,
          "old_api": null,
          "new_api": "pthread_rwlock_unlock",
          "old_text": null,
          "new_text": "pthread_rwlock_unlock(&host->health_log.alarm_log_rwlock)",
          "old_line_content": "",
          "new_line_content": "    pthread_rwlock_unlock(&host->health_log.alarm_log_rwlock);",
          "content_same": false
        },
        {
          "line": 498,
          "old_api": null,
          "new_api": "callocz",
          "old_text": null,
          "new_text": "callocz(1, sizeof(RRDVAR))",
          "old_line_content": "        rv->hash = hash;",
          "new_line_content": "        rv = callocz(1, sizeof(RRDVAR));",
          "content_same": false
        },
        {
          "line": 2547,
          "old_api": null,
          "new_api": "unlikely",
          "old_text": null,
          "new_text": "unlikely(!rc->rrdset)",
          "old_line_content": "        return 0;",
          "new_line_content": "    if (unlikely(!rc->rrdset)) {",
          "content_same": false
        },
        {
          "line": 2548,
          "old_api": null,
          "new_api": "debug",
          "old_text": null,
          "new_text": "debug(D_HEALTH, \"Health not running alarm '%s.%s'. It is not linked to a chart.\", rc->chart?rc->chart:\"NOCHART\", rc->name)",
          "old_line_content": "    }",
          "new_line_content": "        debug(D_HEALTH, \"Health not running alarm '%s.%s'. It is not linked to a chart.\", rc->chart?rc->chart:\"NOCHART\", rc->name);",
          "content_same": false
        },
        {
          "line": 2552,
          "old_api": null,
          "new_api": "unlikely",
          "old_text": null,
          "new_text": "unlikely(!rc->rrdset->last_collected_time.tv_sec)",
          "old_line_content": "        return 0;",
          "new_line_content": "    if (unlikely(!rc->rrdset->last_collected_time.tv_sec)) {",
          "content_same": false
        },
        {
          "line": 2553,
          "old_api": null,
          "new_api": "debug",
          "old_text": null,
          "new_text": "debug(D_HEALTH, \"Health not running alarm '%s.%s'. Chart is not yet collected.\", rc->chart?rc->chart:\"NOCHART\", rc->name)",
          "old_line_content": "    }",
          "new_line_content": "        debug(D_HEALTH, \"Health not running alarm '%s.%s'. Chart is not yet collected.\", rc->chart?rc->chart:\"NOCHART\", rc->name);",
          "content_same": false
        },
        {
          "line": 506,
          "old_api": null,
          "new_api": "debug",
          "old_text": null,
          "new_text": "debug(D_VARIABLES, \"Variable '%s' in scope '%s' already exists\", variable, scope)",
          "old_line_content": "            rv = NULL;",
          "new_line_content": "            debug(D_VARIABLES, \"Variable '%s' in scope '%s' already exists\", variable, scope);",
          "content_same": false
        },
        {
          "line": 507,
          "old_api": null,
          "new_api": "rrdvar_free",
          "old_text": null,
          "new_text": "rrdvar_free(NULL, NULL, rv)",
          "old_line_content": "        }",
          "new_line_content": "            rrdvar_free(NULL, NULL, rv);",
          "content_same": false
        },
        {
          "line": 2557,
          "old_api": null,
          "new_api": "unlikely",
          "old_text": null,
          "new_text": "unlikely(!rc->update_every)",
          "old_line_content": "        return 0;",
          "new_line_content": "    if (unlikely(!rc->update_every)) {",
          "content_same": false
        },
        {
          "line": 2558,
          "old_api": null,
          "new_api": "debug",
          "old_text": null,
          "new_text": "debug(D_HEALTH, \"Health not running alarm '%s.%s'. It does not have an update frequency\", rc->chart?rc->chart:\"NOCHART\", rc->name)",
          "old_line_content": "    }",
          "new_line_content": "        debug(D_HEALTH, \"Health not running alarm '%s.%s'. It does not have an update frequency\", rc->chart?rc->chart:\"NOCHART\", rc->name);",
          "content_same": false
        },
        {
          "line": 511,
          "old_api": null,
          "new_api": "debug",
          "old_text": null,
          "new_text": "debug(D_VARIABLES, \"Variable '%s' created in scope '%s'\", variable, scope)",
          "old_line_content": "    else {",
          "new_line_content": "            debug(D_VARIABLES, \"Variable '%s' created in scope '%s'\", variable, scope);",
          "content_same": false
        },
        {
          "line": 2562,
          "old_api": null,
          "new_api": "unlikely",
          "old_text": null,
          "new_text": "unlikely(rc->next_update > now)",
          "old_line_content": "            *next_run = rc->next_update;",
          "new_line_content": "    if (unlikely(rc->next_update > now)) {",
          "content_same": false
        },
        {
          "line": 515,
          "old_api": null,
          "new_api": "freez",
          "old_text": null,
          "new_text": "freez(variable)",
          "old_line_content": "    }",
          "new_line_content": "        freez(variable);",
          "content_same": false
        },
        {
          "line": 2563,
          "old_api": null,
          "new_api": "unlikely",
          "old_text": null,
          "new_text": "unlikely(*next_run > rc->next_update)",
          "old_line_content": "",
          "new_line_content": "        if (unlikely(*next_run > rc->next_update))",
          "content_same": false
        },
        {
          "line": 2566,
          "old_api": null,
          "new_api": "debug",
          "old_text": null,
          "new_text": "debug(D_HEALTH, \"Health not examining alarm '%s.%s' yet (will do in %d secs).\", rc->chart?rc->chart:\"NOCHART\", rc->name, (int) (rc->next_update - now))",
          "old_line_content": "    }",
          "new_line_content": "        debug(D_HEALTH, \"Health not examining alarm '%s.%s' yet (will do in %d secs).\", rc->chart?rc->chart:\"NOCHART\", rc->name, (int) (rc->next_update - now));",
          "content_same": false
        },
        {
          "line": 2584,
          "old_api": null,
          "new_api": "pthread_setcanceltype",
          "old_text": null,
          "new_text": "pthread_setcanceltype(PTHREAD_CANCEL_DEFERRED, NULL)",
          "old_line_content": "",
          "new_line_content": "    if(pthread_setcanceltype(PTHREAD_CANCEL_DEFERRED, NULL) != 0)",
          "content_same": false
        },
        {
          "line": 2587,
          "old_api": null,
          "new_api": "pthread_setcancelstate",
          "old_text": null,
          "new_text": "pthread_setcancelstate(PTHREAD_CANCEL_ENABLE, NULL)",
          "old_line_content": "",
          "new_line_content": "    if(pthread_setcancelstate(PTHREAD_CANCEL_ENABLE, NULL) != 0)",
          "content_same": false
        },
        {
          "line": 2590,
          "old_api": null,
          "new_api": "config_get_number",
          "old_text": null,
          "new_text": "config_get_number(\"health\", \"run at least every seconds\", 10)",
          "old_line_content": "",
          "new_line_content": "    int min_run_every = (int)config_get_number(\"health\", \"run at least every seconds\", 10);",
          "content_same": false
        },
        {
          "line": 2593,
          "old_api": null,
          "new_api": "buffer_create",
          "old_text": null,
          "new_text": "buffer_create(100)",
          "old_line_content": "    unsigned int loop = 0;",
          "new_line_content": "    BUFFER *wb = buffer_create(100);",
          "content_same": false
        },
        {
          "line": 2598,
          "old_api": null,
          "new_api": "debug",
          "old_text": null,
          "new_text": "debug(D_HEALTH, \"Health monitoring iteration no %u started\", loop)",
          "old_line_content": "        int oldstate, runnable = 0;",
          "new_line_content": "        debug(D_HEALTH, \"Health monitoring iteration no %u started\", loop);",
          "content_same": false
        },
        {
          "line": 553,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"I don't know how to convert RRDVAR type %d to calculated_number\", rv->type)",
          "old_line_content": "    }",
          "new_line_content": "            error(\"I don't know how to convert RRDVAR type %d to calculated_number\", rv->type);",
          "content_same": false
        },
        {
          "line": 2601,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "        RRDCALC *rc;",
          "new_line_content": "        time_t now = time(NULL);",
          "content_same": false
        },
        {
          "line": 2605,
          "old_api": null,
          "new_api": "pthread_setcancelstate",
          "old_text": null,
          "new_text": "pthread_setcancelstate(PTHREAD_CANCEL_DISABLE, &oldstate)",
          "old_line_content": "",
          "new_line_content": "        if (unlikely(pthread_setcancelstate(PTHREAD_CANCEL_DISABLE, &oldstate) != 0))",
          "content_same": false
        },
        {
          "line": 560,
          "old_api": null,
          "new_api": "rrdvar2number",
          "old_text": null,
          "new_text": "rrdvar2number(rv)",
          "old_line_content": "",
          "new_line_content": "    debug(D_HEALTH, \"%50s : %20.5Lf\", rv->name, rrdvar2number(rv));",
          "content_same": false
        },
        {
          "line": 2608,
          "old_api": null,
          "new_api": "rrdhost_rdlock",
          "old_text": null,
          "new_text": "rrdhost_rdlock(&localhost)",
          "old_line_content": "        // the first loop is to lookup values from the db",
          "new_line_content": "        rrdhost_rdlock(&localhost);",
          "content_same": false
        },
        {
          "line": 2612,
          "old_api": null,
          "new_api": "rrdcalc_isrunnable",
          "old_text": null,
          "new_text": "rrdcalc_isrunnable(rc, now, &next_run)",
          "old_line_content": "",
          "new_line_content": "            if (unlikely(!rrdcalc_isrunnable(rc, now, &next_run)))",
          "content_same": false
        },
        {
          "line": 571,
          "old_api": null,
          "new_api": "rrdvar2number",
          "old_text": null,
          "new_text": "rrdvar2number(rv)",
          "old_line_content": "    }",
          "new_line_content": "        *result = rrdvar2number(rv);",
          "content_same": false
        },
        {
          "line": 2621,
          "old_api": null,
          "new_api": "RRDCALC_HAS_DB_LOOKUP",
          "old_text": null,
          "new_text": "RRDCALC_HAS_DB_LOOKUP(rc)",
          "old_line_content": "                int value_is_null = 0;",
          "new_line_content": "            if (unlikely(RRDCALC_HAS_DB_LOOKUP(rc))) {",
          "content_same": false
        },
        {
          "line": 577,
          "old_api": null,
          "new_api": "rrdvar2number",
          "old_text": null,
          "new_text": "rrdvar2number(rv)",
          "old_line_content": "    }",
          "new_line_content": "        *result = rrdvar2number(rv);",
          "content_same": false
        },
        {
          "line": 2625,
          "old_api": null,
          "new_api": "rrd2value",
          "old_text": null,
          "new_text": "rrd2value(rc->rrdset, wb, &rc->value,\n                                    rc->dimensions, 1, rc->after, rc->before, rc->group,\n                                    rc->options, &rc->db_after, &rc->db_before, &value_is_null)",
          "old_line_content": "                                    rc->options, &rc->db_after, &rc->db_before, &value_is_null);",
          "new_line_content": "                int ret = rrd2value(rc->rrdset, wb, &rc->value,",
          "content_same": false
        },
        {
          "line": 2629,
          "old_api": null,
          "new_api": "unlikely",
          "old_text": null,
          "new_text": "unlikely(ret != 200)",
          "old_line_content": "                    rc->value = NAN;",
          "new_line_content": "                if (unlikely(ret != 200)) {",
          "content_same": false
        },
        {
          "line": 583,
          "old_api": null,
          "new_api": "rrdvar2number",
          "old_text": null,
          "new_text": "rrdvar2number(rv)",
          "old_line_content": "    }",
          "new_line_content": "        *result = rrdvar2number(rv);",
          "content_same": false
        },
        {
          "line": 587,
          "old_api": null,
          "new_api": "debug",
          "old_text": null,
          "new_text": "debug(D_HEALTH, \"Available local chart '%s' variables:\", st->id)",
          "old_line_content": "",
          "new_line_content": "    debug(D_HEALTH, \"Available local chart '%s' variables:\", st->id);",
          "content_same": false
        },
        {
          "line": 2637,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"Health alarm '%s.%s': database lookup returned error %d\", rc->chart?rc->chart:\"NOCHART\", rc->name, ret)",
          "old_line_content": "                }",
          "new_line_content": "                        error(\"Health alarm '%s.%s': database lookup returned error %d\", rc->chart?rc->chart:\"NOCHART\", rc->name, ret);",
          "content_same": false
        },
        {
          "line": 590,
          "old_api": null,
          "new_api": "debug",
          "old_text": null,
          "new_text": "debug(D_HEALTH, \"Available family '%s' variables:\", st->rrdfamily->family)",
          "old_line_content": "",
          "new_line_content": "    debug(D_HEALTH, \"Available family '%s' variables:\", st->rrdfamily->family);",
          "content_same": false
        },
        {
          "line": 2640,
          "old_api": null,
          "new_api": "unlikely",
          "old_text": null,
          "new_text": "unlikely(rc->rrdcalc_flags & RRDCALC_FLAG_DB_ERROR)",
          "old_line_content": "",
          "new_line_content": "                else if (unlikely(rc->rrdcalc_flags & RRDCALC_FLAG_DB_ERROR))",
          "content_same": false
        },
        {
          "line": 593,
          "old_api": null,
          "new_api": "debug",
          "old_text": null,
          "new_text": "debug(D_HEALTH, \"Available host '%s' variables:\", st->rrdhost->hostname)",
          "old_line_content": "",
          "new_line_content": "    debug(D_HEALTH, \"Available host '%s' variables:\", st->rrdhost->hostname);",
          "content_same": false
        },
        {
          "line": 594,
          "old_api": null,
          "new_api": "avl_traverse_lock",
          "old_text": null,
          "new_text": "avl_traverse_lock(&st->rrdhost->variables_root_index, dump_variable)",
          "old_line_content": "    return 0;",
          "new_line_content": "    avl_traverse_lock(&st->rrdhost->variables_root_index, dump_variable);",
          "content_same": false
        },
        {
          "line": 2643,
          "old_api": null,
          "new_api": "unlikely",
          "old_text": null,
          "new_text": "unlikely(old_db_timestamp == rc->db_before)",
          "old_line_content": "",
          "new_line_content": "                if (unlikely(old_db_timestamp == rc->db_before)) {",
          "content_same": false
        },
        {
          "line": 2650,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"Health alarm '%s.%s': database is stale\", rc->chart?rc->chart:\"NOCHART\", rc->name)",
          "old_line_content": "                }",
          "new_line_content": "                        error(\"Health alarm '%s.%s': database is stale\", rc->chart?rc->chart:\"NOCHART\", rc->name);",
          "content_same": false
        },
        {
          "line": 603,
          "old_api": null,
          "new_api": "debug",
          "old_text": null,
          "new_text": "debug(D_VARIABLES, \"RRDVARSET create for chart id '%s' name '%s' with variable name '%s'\", st->id, st->name, variable)",
          "old_line_content": "",
          "new_line_content": "    debug(D_VARIABLES, \"RRDVARSET create for chart id '%s' name '%s' with variable name '%s'\", st->id, st->name, variable);",
          "content_same": false
        },
        {
          "line": 604,
          "old_api": null,
          "new_api": "callocz",
          "old_text": null,
          "new_text": "callocz(1, sizeof(RRDSETVAR))",
          "old_line_content": "    char buffer[RRDVAR_MAX_LENGTH + 1];",
          "new_line_content": "    RRDSETVAR *rs = (RRDSETVAR *)callocz(1, sizeof(RRDSETVAR));",
          "content_same": false
        },
        {
          "line": 2653,
          "old_api": null,
          "new_api": "unlikely",
          "old_text": null,
          "new_text": "unlikely(rc->rrdcalc_flags & RRDCALC_FLAG_DB_STALE)",
          "old_line_content": "",
          "new_line_content": "                else if (unlikely(rc->rrdcalc_flags & RRDCALC_FLAG_DB_STALE))",
          "content_same": false
        },
        {
          "line": 607,
          "old_api": null,
          "new_api": "snprintfz",
          "old_text": null,
          "new_text": "snprintfz(buffer, RRDVAR_MAX_LENGTH, \"%s.%s\", st->id, variable)",
          "old_line_content": "",
          "new_line_content": "    snprintfz(buffer, RRDVAR_MAX_LENGTH, \"%s.%s\", st->id, variable);",
          "content_same": false
        },
        {
          "line": 2656,
          "old_api": null,
          "new_api": "unlikely",
          "old_text": null,
          "new_text": "unlikely(value_is_null)",
          "old_line_content": "",
          "new_line_content": "                if (unlikely(value_is_null)) {",
          "content_same": false
        },
        {
          "line": 610,
          "old_api": null,
          "new_api": "snprintfz",
          "old_text": null,
          "new_text": "snprintfz(buffer, RRDVAR_MAX_LENGTH, \"%s.%s\", st->name, variable)",
          "old_line_content": "",
          "new_line_content": "    snprintfz(buffer, RRDVAR_MAX_LENGTH, \"%s.%s\", st->name, variable);",
          "content_same": false
        },
        {
          "line": 613,
          "old_api": null,
          "new_api": "strdupz",
          "old_text": null,
          "new_text": "strdupz(variable)",
          "old_line_content": "    rs->type = type;",
          "new_line_content": "    rs->variable = strdupz(variable);",
          "content_same": false
        },
        {
          "line": 2661,
          "old_api": null,
          "new_api": "debug",
          "old_text": null,
          "new_text": "debug(D_HEALTH, \"Health alarm '%s.%s': database lookup returned empty value (possibly value is not collected yet)\",\n                          rc->chart?rc->chart:\"NOCHART\", rc->name)",
          "old_line_content": "",
          "new_line_content": "                    debug(D_HEALTH, \"Health alarm '%s.%s': database lookup returned empty value (possibly value is not collected yet)\",",
          "content_same": false
        },
        {
          "line": 2666,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"Health alarm '%s.%s': database lookup returned empty value (possibly value is not collected yet)\",\n                              rc->chart?rc->chart:\"NOCHART\", rc->name)",
          "old_line_content": "                    }",
          "new_line_content": "                        error(\"Health alarm '%s.%s': database lookup returned empty value (possibly value is not collected yet)\",",
          "content_same": false
        },
        {
          "line": 2670,
          "old_api": null,
          "new_api": "unlikely",
          "old_text": null,
          "new_text": "unlikely(rc->rrdcalc_flags & RRDCALC_FLAG_DB_NAN)",
          "old_line_content": "",
          "new_line_content": "                else if (unlikely(rc->rrdcalc_flags & RRDCALC_FLAG_DB_NAN))",
          "content_same": false
        },
        {
          "line": 623,
          "old_api": null,
          "new_api": "rrdvar_create_and_index",
          "old_text": null,
          "new_text": "rrdvar_create_and_index(\"family\", &st->rrdfamily->variables_root_index, rs->fullname, rs->type, rs->value)",
          "old_line_content": "",
          "new_line_content": "    rs->family_name = rrdvar_create_and_index(\"family\", &st->rrdfamily->variables_root_index, rs->fullname, rs->type, rs->value);",
          "content_same": false
        },
        {
          "line": 624,
          "old_api": null,
          "new_api": "rrdvar_create_and_index",
          "old_text": null,
          "new_text": "rrdvar_create_and_index(\"host\",   &st->rrdhost->variables_root_index, rs->fullname, rs->type, rs->value)",
          "old_line_content": "    rs->next = st->variables;",
          "new_line_content": "    rs->host_name   = rrdvar_create_and_index(\"host\",   &st->rrdhost->variables_root_index, rs->fullname, rs->type, rs->value);",
          "content_same": false
        },
        {
          "line": 2673,
          "old_api": null,
          "new_api": "debug",
          "old_text": null,
          "new_text": "debug(D_HEALTH, \"Health alarm '%s.%s': database lookup gave value \"\n                        CALCULATED_NUMBER_FORMAT, rc->chart?rc->chart:\"NOCHART\", rc->name, rc->value)",
          "old_line_content": "            }",
          "new_line_content": "                debug(D_HEALTH, \"Health alarm '%s.%s': database lookup gave value \"",
          "content_same": false
        },
        {
          "line": 2677,
          "old_api": null,
          "new_api": "unlikely",
          "old_text": null,
          "new_text": "unlikely(rc->calculation)",
          "old_line_content": "                    // calculation failed",
          "new_line_content": "            if(unlikely(rc->calculation)) {",
          "content_same": false
        },
        {
          "line": 2678,
          "old_api": null,
          "new_api": "expression_evaluate",
          "old_text": null,
          "new_text": "expression_evaluate(rc->calculation)",
          "old_line_content": "",
          "new_line_content": "                if (unlikely(!expression_evaluate(rc->calculation))) {",
          "content_same": false
        },
        {
          "line": 633,
          "old_api": null,
          "new_api": "debug",
          "old_text": null,
          "new_text": "debug(D_VARIABLES, \"RRDSETVAR rename for chart id '%s' name '%s'\", st->id, st->name)",
          "old_line_content": "    // only these 2 can change name",
          "new_line_content": "    debug(D_VARIABLES, \"RRDSETVAR rename for chart id '%s' name '%s'\", st->id, st->name);",
          "content_same": false
        },
        {
          "line": 2683,
          "old_api": null,
          "new_api": "debug",
          "old_text": null,
          "new_text": "debug(D_HEALTH, \"Health alarm '%s.%s': failed to evaluate calculation with error: %s\",\n                          rc->chart?rc->chart:\"NOCHART\", rc->name, buffer_tostring(rc->calculation->error_msg))",
          "old_line_content": "",
          "new_line_content": "                    debug(D_HEALTH, \"Health alarm '%s.%s': failed to evaluate calculation with error: %s\",",
          "content_same": false
        },
        {
          "line": 2688,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"Health alarm '%s.%s': failed to evaluate calculation with error: %s\",\n                              rc->chart?rc->chart:\"NOCHART\", rc->name, buffer_tostring(rc->calculation->error_msg))",
          "old_line_content": "                    }",
          "new_line_content": "                        error(\"Health alarm '%s.%s': failed to evaluate calculation with error: %s\",",
          "content_same": false
        },
        {
          "line": 2689,
          "old_api": null,
          "new_api": "buffer_tostring",
          "old_text": null,
          "new_text": "buffer_tostring(rc->calculation->error_msg)",
          "old_line_content": "                }",
          "new_line_content": "                              rc->chart?rc->chart:\"NOCHART\", rc->name, buffer_tostring(rc->calculation->error_msg));",
          "content_same": false
        },
        {
          "line": 2693,
          "old_api": null,
          "new_api": "unlikely",
          "old_text": null,
          "new_text": "unlikely(rc->rrdcalc_flags & RRDCALC_FLAG_CALC_ERROR)",
          "old_line_content": "",
          "new_line_content": "                    if (unlikely(rc->rrdcalc_flags & RRDCALC_FLAG_CALC_ERROR))",
          "content_same": false
        },
        {
          "line": 648,
          "old_api": null,
          "new_api": "rrdvar_free",
          "old_text": null,
          "new_text": "rrdvar_free(st->rrdhost, &st->rrdfamily->variables_root_index, rs->family_name)",
          "old_line_content": "",
          "new_line_content": "            rrdvar_free(st->rrdhost, &st->rrdfamily->variables_root_index, rs->family_name);",
          "content_same": false
        },
        {
          "line": 2696,
          "old_api": null,
          "new_api": "debug",
          "old_text": null,
          "new_text": "debug(D_HEALTH, \"Health alarm '%s.%s': calculation expression gave value \"\n                            CALCULATED_NUMBER_FORMAT\n                            \": %s (source: %s)\",\n                          rc->chart?rc->chart:\"NOCHART\", rc->name,\n                          rc->calculation->result,\n                          buffer_tostring(rc->calculation->error_msg),\n                          rc->source\n                    )",
          "old_line_content": "                            \": %s (source: %s)\",",
          "new_line_content": "                    debug(D_HEALTH, \"Health alarm '%s.%s': calculation expression gave value \"",
          "content_same": false
        },
        {
          "line": 653,
          "old_api": null,
          "new_api": "rrdvar_create_and_index",
          "old_text": null,
          "new_text": "rrdvar_create_and_index(\"family\", &st->rrdfamily->variables_root_index, rs->fullname, rs->type, rs->value)",
          "old_line_content": "        }",
          "new_line_content": "            rs->family_name = rrdvar_create_and_index(\"family\", &st->rrdfamily->variables_root_index, rs->fullname, rs->type, rs->value);",
          "content_same": false
        },
        {
          "line": 654,
          "old_api": null,
          "new_api": "rrdvar_create_and_index",
          "old_text": null,
          "new_text": "rrdvar_create_and_index(\"host\",   &st->rrdhost->variables_root_index, rs->fullname, rs->type, rs->value)",
          "old_line_content": "    }",
          "new_line_content": "            rs->host_name   = rrdvar_create_and_index(\"host\",   &st->rrdhost->variables_root_index, rs->fullname, rs->type, rs->value);",
          "content_same": false
        },
        {
          "line": 2701,
          "old_api": null,
          "new_api": "buffer_tostring",
          "old_text": null,
          "new_text": "buffer_tostring(rc->calculation->error_msg)",
          "old_line_content": "                    );",
          "new_line_content": "                          buffer_tostring(rc->calculation->error_msg),",
          "content_same": false
        },
        {
          "line": 658,
          "old_api": null,
          "new_api": "rrdsetcalc_link_matching",
          "old_text": null,
          "new_text": "rrdsetcalc_link_matching(st)",
          "old_line_content": "",
          "new_line_content": "    rrdsetcalc_link_matching(st);",
          "content_same": false
        },
        {
          "line": 2711,
          "old_api": null,
          "new_api": "unlikely",
          "old_text": null,
          "new_text": "unlikely(runnable && !netdata_exit)",
          "old_line_content": "",
          "new_line_content": "        if (unlikely(runnable && !netdata_exit)) {",
          "content_same": false
        },
        {
          "line": 2712,
          "old_api": null,
          "new_api": "rrdhost_rdlock",
          "old_text": null,
          "new_text": "rrdhost_rdlock(&localhost)",
          "old_line_content": "            for (rc = localhost.alarms; rc; rc = rc->next) {",
          "new_line_content": "            rrdhost_rdlock(&localhost);",
          "content_same": false
        },
        {
          "line": 2715,
          "old_api": null,
          "new_api": "rrdcalc_isrunnable",
          "old_text": null,
          "new_text": "rrdcalc_isrunnable(rc, now, &next_run)",
          "old_line_content": "",
          "new_line_content": "                if (unlikely(!rrdcalc_isrunnable(rc, now, &next_run)))",
          "content_same": false
        },
        {
          "line": 668,
          "old_api": null,
          "new_api": "rrdvar_free",
          "old_text": null,
          "new_text": "rrdvar_free(st->rrdhost, &st->rrdfamily->variables_root_index, rs->family_name)",
          "old_line_content": "",
          "new_line_content": "    rrdvar_free(st->rrdhost, &st->rrdfamily->variables_root_index, rs->family_name);",
          "content_same": false
        },
        {
          "line": 669,
          "old_api": null,
          "new_api": "rrdvar_free",
          "old_text": null,
          "new_text": "rrdvar_free(st->rrdhost, &st->rrdhost->variables_root_index, rs->host_name)",
          "old_line_content": "    if(st->variables == rs) {",
          "new_line_content": "    rrdvar_free(st->rrdhost, &st->rrdhost->variables_root_index, rs->host_name);",
          "content_same": false
        },
        {
          "line": 2721,
          "old_api": null,
          "new_api": "likely",
          "old_text": null,
          "new_text": "likely(rc->warning)",
          "old_line_content": "                        // calculation failed",
          "new_line_content": "                if(likely(rc->warning)) {",
          "content_same": false
        },
        {
          "line": 2722,
          "old_api": null,
          "new_api": "expression_evaluate",
          "old_text": null,
          "new_text": "expression_evaluate(rc->warning)",
          "old_line_content": "",
          "new_line_content": "                    if(unlikely(!expression_evaluate(rc->warning))) {",
          "content_same": false
        },
        {
          "line": 677,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"RRDSETVAR '%s' not found in chart '%s' variables linked list\", rs->fullname, st->id)",
          "old_line_content": "    }",
          "new_line_content": "        if(!t) error(\"RRDSETVAR '%s' not found in chart '%s' variables linked list\", rs->fullname, st->id);",
          "content_same": false
        },
        {
          "line": 2725,
          "old_api": null,
          "new_api": "debug",
          "old_text": null,
          "new_text": "debug(D_HEALTH, \"Health alarm '%s.%s': warning expression failed with error: %s\",\n                              rc->chart?rc->chart:\"NOCHART\", rc->name, buffer_tostring(rc->warning->error_msg))",
          "old_line_content": "",
          "new_line_content": "                        debug(D_HEALTH, \"Health alarm '%s.%s': warning expression failed with error: %s\",",
          "content_same": false
        },
        {
          "line": 2730,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"Health alarm '%s.%s': warning expression failed with error: %s\",\n                                  rc->chart?rc->chart:\"NOCHART\", rc->name, buffer_tostring(rc->warning->error_msg))",
          "old_line_content": "                        }",
          "new_line_content": "                            error(\"Health alarm '%s.%s': warning expression failed with error: %s\",",
          "content_same": false
        },
        {
          "line": 683,
          "old_api": null,
          "new_api": "freez",
          "old_text": null,
          "new_text": "freez(rs->variable)",
          "old_line_content": "}",
          "new_line_content": "    freez(rs->variable);",
          "content_same": false
        },
        {
          "line": 684,
          "old_api": null,
          "new_api": "freez",
          "old_text": null,
          "new_text": "freez(rs)",
          "old_line_content": "",
          "new_line_content": "    freez(rs);",
          "content_same": false
        },
        {
          "line": 2731,
          "old_api": null,
          "new_api": "buffer_tostring",
          "old_text": null,
          "new_text": "buffer_tostring(rc->warning->error_msg)",
          "old_line_content": "                    }",
          "new_line_content": "                                  rc->chart?rc->chart:\"NOCHART\", rc->name, buffer_tostring(rc->warning->error_msg));",
          "content_same": false
        },
        {
          "line": 2735,
          "old_api": null,
          "new_api": "unlikely",
          "old_text": null,
          "new_text": "unlikely(rc->rrdcalc_flags & RRDCALC_FLAG_WARN_ERROR)",
          "old_line_content": "",
          "new_line_content": "                        if(unlikely(rc->rrdcalc_flags & RRDCALC_FLAG_WARN_ERROR))",
          "content_same": false
        },
        {
          "line": 2738,
          "old_api": null,
          "new_api": "debug",
          "old_text": null,
          "new_text": "debug(D_HEALTH, \"Health alarm '%s.%s': warning expression gave value \"\n                                CALCULATED_NUMBER_FORMAT\n                                \": %s (source: %s)\",\n                              rc->chart?rc->chart:\"NOCHART\", rc->name,\n                              rc->warning->result,\n                              buffer_tostring(rc->warning->error_msg),\n                              rc->source\n                        )",
          "old_line_content": "                                \": %s (source: %s)\",",
          "new_line_content": "                        debug(D_HEALTH, \"Health alarm '%s.%s': warning expression gave value \"",
          "content_same": false
        },
        {
          "line": 695,
          "old_api": null,
          "new_api": "debug",
          "old_text": null,
          "new_text": "debug(D_VARIABLES, \"RRDDIMSET create for chart id '%s' name '%s', dimension id '%s', name '%s%s%s'\", st->id, st->name, rd->id, (prefix)?prefix:\"\", rd->name, (suffix)?suffix:\"\")",
          "old_line_content": "    if(!prefix) prefix = \"\";",
          "new_line_content": "    debug(D_VARIABLES, \"RRDDIMSET create for chart id '%s' name '%s', dimension id '%s', name '%s%s%s'\", st->id, st->name, rd->id, (prefix)?prefix:\"\", rd->name, (suffix)?suffix:\"\");",
          "content_same": false
        },
        {
          "line": 2743,
          "old_api": null,
          "new_api": "buffer_tostring",
          "old_text": null,
          "new_text": "buffer_tostring(rc->warning->error_msg)",
          "old_line_content": "                        );",
          "new_line_content": "                              buffer_tostring(rc->warning->error_msg),",
          "content_same": false
        },
        {
          "line": 2747,
          "old_api": null,
          "new_api": "rrdcalc_value2status",
          "old_text": null,
          "new_text": "rrdcalc_value2status(rc->warning->result)",
          "old_line_content": "                }",
          "new_line_content": "                        warning_status = rrdcalc_value2status(rc->warning->result);",
          "content_same": false
        },
        {
          "line": 703,
          "old_api": null,
          "new_api": "strdupz",
          "old_text": null,
          "new_text": "strdupz(prefix)",
          "old_line_content": "",
          "new_line_content": "    rs->prefix = strdupz(prefix);",
          "content_same": false
        },
        {
          "line": 2751,
          "old_api": null,
          "new_api": "likely",
          "old_text": null,
          "new_text": "likely(rc->critical)",
          "old_line_content": "                        // calculation failed",
          "new_line_content": "                if(likely(rc->critical)) {",
          "content_same": false
        },
        {
          "line": 2752,
          "old_api": null,
          "new_api": "expression_evaluate",
          "old_text": null,
          "new_text": "expression_evaluate(rc->critical)",
          "old_line_content": "",
          "new_line_content": "                    if(unlikely(!expression_evaluate(rc->critical))) {",
          "content_same": false
        },
        {
          "line": 706,
          "old_api": null,
          "new_api": "snprintfz",
          "old_text": null,
          "new_text": "snprintfz(buffer, RRDDIMVAR_ID_MAX, \"%s%s%s\", rs->prefix, rd->id, rs->suffix)",
          "old_line_content": "",
          "new_line_content": "    snprintfz(buffer, RRDDIMVAR_ID_MAX, \"%s%s%s\", rs->prefix, rd->id, rs->suffix);",
          "content_same": false
        },
        {
          "line": 2755,
          "old_api": null,
          "new_api": "debug",
          "old_text": null,
          "new_text": "debug(D_HEALTH, \"Health alarm '%s.%s': critical expression failed with error: %s\",\n                              rc->chart?rc->chart:\"NOCHART\", rc->name, buffer_tostring(rc->critical->error_msg))",
          "old_line_content": "",
          "new_line_content": "                        debug(D_HEALTH, \"Health alarm '%s.%s': critical expression failed with error: %s\",",
          "content_same": false
        },
        {
          "line": 709,
          "old_api": null,
          "new_api": "snprintfz",
          "old_text": null,
          "new_text": "snprintfz(buffer, RRDDIMVAR_ID_MAX, \"%s%s%s\", rs->prefix, rd->name, rs->suffix)",
          "old_line_content": "",
          "new_line_content": "    snprintfz(buffer, RRDDIMVAR_ID_MAX, \"%s%s%s\", rs->prefix, rd->name, rs->suffix);",
          "content_same": false
        },
        {
          "line": 712,
          "old_api": null,
          "new_api": "snprintfz",
          "old_text": null,
          "new_text": "snprintfz(buffer, RRDDIMVAR_ID_MAX, \"%s.%s\", rd->rrdset->id, rs->id)",
          "old_line_content": "",
          "new_line_content": "    snprintfz(buffer, RRDDIMVAR_ID_MAX, \"%s.%s\", rd->rrdset->id, rs->id);",
          "content_same": false
        },
        {
          "line": 2760,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"Health alarm '%s.%s': critical expression failed with error: %s\",\n                                  rc->chart?rc->chart:\"NOCHART\", rc->name, buffer_tostring(rc->critical->error_msg))",
          "old_line_content": "                        }",
          "new_line_content": "                            error(\"Health alarm '%s.%s': critical expression failed with error: %s\",",
          "content_same": false
        },
        {
          "line": 2761,
          "old_api": null,
          "new_api": "buffer_tostring",
          "old_text": null,
          "new_text": "buffer_tostring(rc->critical->error_msg)",
          "old_line_content": "                    }",
          "new_line_content": "                                  rc->chart?rc->chart:\"NOCHART\", rc->name, buffer_tostring(rc->critical->error_msg));",
          "content_same": false
        },
        {
          "line": 715,
          "old_api": null,
          "new_api": "snprintfz",
          "old_text": null,
          "new_text": "snprintfz(buffer, RRDDIMVAR_ID_MAX, \"%s.%s\", rd->rrdset->id, rs->name)",
          "old_line_content": "",
          "new_line_content": "    snprintfz(buffer, RRDDIMVAR_ID_MAX, \"%s.%s\", rd->rrdset->id, rs->name);",
          "content_same": false
        },
        {
          "line": 2765,
          "old_api": null,
          "new_api": "unlikely",
          "old_text": null,
          "new_text": "unlikely(rc->rrdcalc_flags & RRDCALC_FLAG_CRIT_ERROR)",
          "old_line_content": "",
          "new_line_content": "                        if(unlikely(rc->rrdcalc_flags & RRDCALC_FLAG_CRIT_ERROR))",
          "content_same": false
        },
        {
          "line": 718,
          "old_api": null,
          "new_api": "snprintfz",
          "old_text": null,
          "new_text": "snprintfz(buffer, RRDDIMVAR_ID_MAX, \"%s.%s\", rd->rrdset->name, rs->id)",
          "old_line_content": "",
          "new_line_content": "    snprintfz(buffer, RRDDIMVAR_ID_MAX, \"%s.%s\", rd->rrdset->name, rs->id);",
          "content_same": false
        },
        {
          "line": 2768,
          "old_api": null,
          "new_api": "debug",
          "old_text": null,
          "new_text": "debug(D_HEALTH, \"Health alarm '%s.%s': critical expression gave value \"\n                                CALCULATED_NUMBER_FORMAT\n                                \": %s (source: %s)\",\n                              rc->chart?rc->chart:\"NOCHART\", rc->name,\n                              rc->critical->result,\n                              buffer_tostring(rc->critical->error_msg),\n                              rc->source\n                        )",
          "old_line_content": "                                \": %s (source: %s)\",",
          "new_line_content": "                        debug(D_HEALTH, \"Health alarm '%s.%s': critical expression gave value \"",
          "content_same": false
        },
        {
          "line": 721,
          "old_api": null,
          "new_api": "snprintfz",
          "old_text": null,
          "new_text": "snprintfz(buffer, RRDDIMVAR_ID_MAX, \"%s.%s\", rd->rrdset->name, rs->name)",
          "old_line_content": "",
          "new_line_content": "    snprintfz(buffer, RRDDIMVAR_ID_MAX, \"%s.%s\", rd->rrdset->name, rs->name);",
          "content_same": false
        },
        {
          "line": 722,
          "old_api": null,
          "new_api": "strdupz",
          "old_text": null,
          "new_text": "strdupz(buffer)",
          "old_line_content": "    rs->type = type;",
          "new_line_content": "    rs->fullnamename = strdupz(buffer);",
          "content_same": false
        },
        {
          "line": 2773,
          "old_api": null,
          "new_api": "buffer_tostring",
          "old_text": null,
          "new_text": "buffer_tostring(rc->critical->error_msg)",
          "old_line_content": "                        );",
          "new_line_content": "                              buffer_tostring(rc->critical->error_msg),",
          "content_same": false
        },
        {
          "line": 729,
          "old_api": null,
          "new_api": "rrdvar_create_and_index",
          "old_text": null,
          "new_text": "rrdvar_create_and_index(\"local\", &st->variables_root_index, rs->id, rs->type, rs->value)",
          "old_line_content": "",
          "new_line_content": "    rs->local_id     = rrdvar_create_and_index(\"local\", &st->variables_root_index, rs->id, rs->type, rs->value);",
          "content_same": false
        },
        {
          "line": 2777,
          "old_api": null,
          "new_api": "rrdcalc_value2status",
          "old_text": null,
          "new_text": "rrdcalc_value2status(rc->critical->result)",
          "old_line_content": "                }",
          "new_line_content": "                        critical_status = rrdcalc_value2status(rc->critical->result);",
          "content_same": false
        },
        {
          "line": 732,
          "old_api": null,
          "new_api": "rrdvar_create_and_index",
          "old_text": null,
          "new_text": "rrdvar_create_and_index(\"family\", &st->rrdfamily->variables_root_index, rs->id, rs->type, rs->value)",
          "old_line_content": "",
          "new_line_content": "    rs->family_id    = rrdvar_create_and_index(\"family\", &st->rrdfamily->variables_root_index, rs->id, rs->type, rs->value);",
          "content_same": false
        },
        {
          "line": 737,
          "old_api": null,
          "new_api": "rrdvar_create_and_index",
          "old_text": null,
          "new_text": "rrdvar_create_and_index(\"host\", &st->rrdhost->variables_root_index, rs->fullnameid, rs->type, rs->value)",
          "old_line_content": "",
          "new_line_content": "    rs->host_fullnameid   = rrdvar_create_and_index(\"host\", &st->rrdhost->variables_root_index, rs->fullnameid, rs->type, rs->value);",
          "content_same": false
        },
        {
          "line": 738,
          "old_api": null,
          "new_api": "rrdvar_create_and_index",
          "old_text": null,
          "new_text": "rrdvar_create_and_index(\"host\", &st->rrdhost->variables_root_index, rs->fullnamename, rs->type, rs->value)",
          "old_line_content": "    rs->next = rd->variables;",
          "new_line_content": "    rs->host_fullnamename = rrdvar_create_and_index(\"host\", &st->rrdhost->variables_root_index, rs->fullnamename, rs->type, rs->value);",
          "content_same": false
        },
        {
          "line": 748,
          "old_api": null,
          "new_api": "debug",
          "old_text": null,
          "new_text": "debug(D_VARIABLES, \"RRDDIMSET rename for chart id '%s' name '%s', dimension id '%s', name '%s'\", st->id, st->name, rd->id, rd->name)",
          "old_line_content": "    RRDDIMVAR *rs, *next = rd->variables;",
          "new_line_content": "    debug(D_VARIABLES, \"RRDDIMSET rename for chart id '%s' name '%s', dimension id '%s', name '%s'\", st->id, st->name, rd->id, rd->name);",
          "content_same": false
        },
        {
          "line": 754,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(rd->name, rs->name)",
          "old_line_content": "            // name changed",
          "new_line_content": "        if (strcmp(rd->name, rs->name)) {",
          "content_same": false
        },
        {
          "line": 762,
          "old_api": null,
          "new_api": "strdupz",
          "old_text": null,
          "new_text": "strdupz(buffer)",
          "old_line_content": "",
          "new_line_content": "            rs->name = strdupz(buffer);",
          "content_same": false
        },
        {
          "line": 768,
          "old_api": null,
          "new_api": "strdupz",
          "old_text": null,
          "new_text": "strdupz(buffer)",
          "old_line_content": "                                                             rs->fullidname, rs->type, rs->value);",
          "new_line_content": "            rs->fullidname = strdupz(buffer);",
          "content_same": false
        },
        {
          "line": 769,
          "old_api": null,
          "new_api": "rrdvar_create_and_index",
          "old_text": null,
          "new_text": "rrdvar_create_and_index(\"host\", &st->rrdhost->variables_root_index,\n                                                             rs->fullidname, rs->type, rs->value)",
          "old_line_content": "",
          "new_line_content": "            rs->host_fullidname = rrdvar_create_and_index(\"host\", &st->rrdhost->variables_root_index,",
          "content_same": false
        },
        {
          "line": 776,
          "old_api": null,
          "new_api": "strdupz",
          "old_text": null,
          "new_text": "strdupz(buffer)",
          "old_line_content": "                                                          rs->fullnameid, rs->type, rs->value);",
          "new_line_content": "            rs->fullnameid = strdupz(buffer);",
          "content_same": false
        },
        {
          "line": 777,
          "old_api": null,
          "new_api": "rrdvar_create_and_index",
          "old_text": null,
          "new_text": "rrdvar_create_and_index(\"host\", &st->rrdhost->variables_root_index,\n                                                          rs->fullnameid, rs->type, rs->value)",
          "old_line_content": "",
          "new_line_content": "            rs->host_fullnameid = rrdvar_create_and_index(\"host\", &st->rrdhost->variables_root_index,",
          "content_same": false
        },
        {
          "line": 784,
          "old_api": null,
          "new_api": "strdupz",
          "old_text": null,
          "new_text": "strdupz(buffer)",
          "old_line_content": "                                                          rs->fullnamename, rs->type, rs->value);",
          "new_line_content": "            rs->fullnamename = strdupz(buffer);",
          "content_same": false
        },
        {
          "line": 785,
          "old_api": null,
          "new_api": "rrdvar_create_and_index",
          "old_text": null,
          "new_text": "rrdvar_create_and_index(\"host\", &st->rrdhost->variables_root_index,\n                                                          rs->fullnamename, rs->type, rs->value)",
          "old_line_content": "        }",
          "new_line_content": "            rs->host_fullnamename = rrdvar_create_and_index(\"host\", &st->rrdhost->variables_root_index,",
          "content_same": false
        },
        {
          "line": 2838,
          "old_api": null,
          "new_api": "health_alarm_log",
          "old_text": null,
          "new_text": "health_alarm_log(&localhost, rc->id, rc->next_event_id++, now, rc->name, rc->rrdset->id, rc->rrdset->family, rc->exec, rc->recipient, now - rc->last_status_change, rc->old_value, rc->value, rc->status, status, rc->source, rc->units, rc->info, rc->delay_last)",
          "old_line_content": "                    rc->status = status;",
          "new_line_content": "                    health_alarm_log(&localhost, rc->id, rc->next_event_id++, now, rc->name, rc->rrdset->id, rc->rrdset->family, rc->exec, rc->recipient, now - rc->last_status_change, rc->old_value, rc->value, rc->status, status, rc->source, rc->units, rc->info, rc->delay_last);",
          "content_same": false
        },
        {
          "line": 796,
          "old_api": null,
          "new_api": "rrdvar_free",
          "old_text": null,
          "new_text": "rrdvar_free(st->rrdhost, &st->variables_root_index, rs->local_id)",
          "old_line_content": "",
          "new_line_content": "    rrdvar_free(st->rrdhost, &st->variables_root_index, rs->local_id);",
          "content_same": false
        },
        {
          "line": 799,
          "old_api": null,
          "new_api": "rrdvar_free",
          "old_text": null,
          "new_text": "rrdvar_free(st->rrdhost, &st->rrdfamily->variables_root_index, rs->family_id)",
          "old_line_content": "",
          "new_line_content": "    rrdvar_free(st->rrdhost, &st->rrdfamily->variables_root_index, rs->family_id);",
          "content_same": false
        },
        {
          "line": 2850,
          "old_api": null,
          "new_api": "rrdhost_unlock",
          "old_text": null,
          "new_text": "rrdhost_unlock(&localhost)",
          "old_line_content": "",
          "new_line_content": "            rrdhost_unlock(&localhost);",
          "content_same": false
        },
        {
          "line": 804,
          "old_api": null,
          "new_api": "rrdvar_free",
          "old_text": null,
          "new_text": "rrdvar_free(st->rrdhost, &st->rrdhost->variables_root_index, rs->host_fullnameid)",
          "old_line_content": "",
          "new_line_content": "    rrdvar_free(st->rrdhost, &st->rrdhost->variables_root_index, rs->host_fullnameid);",
          "content_same": false
        },
        {
          "line": 805,
          "old_api": null,
          "new_api": "rrdvar_free",
          "old_text": null,
          "new_text": "rrdvar_free(st->rrdhost, &st->rrdhost->variables_root_index, rs->host_fullnamename)",
          "old_line_content": "    if(rd->variables == rs) {",
          "new_line_content": "    rrdvar_free(st->rrdhost, &st->rrdhost->variables_root_index, rs->host_fullnamename);",
          "content_same": false
        },
        {
          "line": 2853,
          "old_api": null,
          "new_api": "pthread_setcancelstate",
          "old_text": null,
          "new_text": "pthread_setcancelstate(oldstate, NULL)",
          "old_line_content": "",
          "new_line_content": "        if (unlikely(pthread_setcancelstate(oldstate, NULL) != 0))",
          "content_same": false
        },
        {
          "line": 808,
          "old_api": null,
          "new_api": "debug",
          "old_text": null,
          "new_text": "debug(D_VARIABLES, \"RRDDIMSET removing first entry for chart id '%s' name '%s', dimension id '%s', name '%s'\", st->id, st->name, rd->id, rd->name)",
          "old_line_content": "    }",
          "new_line_content": "        debug(D_VARIABLES, \"RRDDIMSET removing first entry for chart id '%s' name '%s', dimension id '%s', name '%s'\", st->id, st->name, rd->id, rd->name);",
          "content_same": false
        },
        {
          "line": 2856,
          "old_api": null,
          "new_api": "unlikely",
          "old_text": null,
          "new_text": "unlikely(netdata_exit)",
          "old_line_content": "",
          "new_line_content": "        if(unlikely(netdata_exit))",
          "content_same": false
        },
        {
          "line": 812,
          "old_api": null,
          "new_api": "debug",
          "old_text": null,
          "new_text": "debug(D_VARIABLES, \"RRDDIMSET removing non-first entry for chart id '%s' name '%s', dimension id '%s', name '%s'\", st->id, st->name, rd->id, rd->name)",
          "old_line_content": "        for (t = rd->variables; t && t->next != rs; t = t->next) ;",
          "new_line_content": "        debug(D_VARIABLES, \"RRDDIMSET removing non-first entry for chart id '%s' name '%s', dimension id '%s', name '%s'\", st->id, st->name, rd->id, rd->name);",
          "content_same": false
        },
        {
          "line": 815,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"RRDDIMVAR '%s' not found in dimension '%s/%s' variables linked list\", rs->name, st->id, rd->id)",
          "old_line_content": "    }",
          "new_line_content": "        if(!t) error(\"RRDDIMVAR '%s' not found in dimension '%s/%s' variables linked list\", rs->name, st->id, rd->id);",
          "content_same": false
        },
        {
          "line": 2863,
          "old_api": null,
          "new_api": "unlikely",
          "old_text": null,
          "new_text": "unlikely(netdata_exit)",
          "old_line_content": "        ",
          "new_line_content": "        if(unlikely(netdata_exit))",
          "content_same": false
        },
        {
          "line": 2870,
          "old_api": null,
          "new_api": "sleep_usec",
          "old_text": null,
          "new_text": "sleep_usec(1000000 * (unsigned long long) (next_run - now))",
          "old_line_content": "        else {",
          "new_line_content": "            sleep_usec(1000000 * (unsigned long long) (next_run - now));",
          "content_same": false
        },
        {
          "line": 2873,
          "old_api": null,
          "new_api": "debug",
          "old_text": null,
          "new_text": "debug(D_HEALTH, \"Health monitoring iteration no %u done. Next iteration now\", loop)",
          "old_line_content": "    }",
          "new_line_content": "            debug(D_HEALTH, \"Health monitoring iteration no %u done. Next iteration now\", loop);",
          "content_same": false
        },
        {
          "line": 826,
          "old_api": null,
          "new_api": "freez",
          "old_text": null,
          "new_text": "freez(rs->fullnamename)",
          "old_line_content": "}",
          "new_line_content": "    freez(rs->fullnamename);",
          "content_same": false
        },
        {
          "line": 827,
          "old_api": null,
          "new_api": "freez",
          "old_text": null,
          "new_text": "freez(rs)",
          "old_line_content": "",
          "new_line_content": "    freez(rs);",
          "content_same": false
        },
        {
          "line": 2879,
          "old_api": null,
          "new_api": "info",
          "old_text": null,
          "new_text": "info(\"HEALTH thread exiting\")",
          "old_line_content": "    return NULL;",
          "new_line_content": "    info(\"HEALTH thread exiting\");",
          "content_same": false
        },
        {
          "line": 2880,
          "old_api": null,
          "new_api": "pthread_exit",
          "old_text": null,
          "new_text": "pthread_exit(NULL)",
          "old_line_content": "}",
          "new_line_content": "    pthread_exit(NULL);",
          "content_same": false
        },
        {
          "line": 857,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"Unknown alarm status %d\", status)",
          "old_line_content": "    }",
          "new_line_content": "            error(\"Unknown alarm status %d\", status);",
          "content_same": false
        },
        {
          "line": 865,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "",
          "new_line_content": "    rc->last_status_change = time(NULL);",
          "content_same": false
        },
        {
          "line": 877,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"Health alarm '%s.%s' has update every %d, less than chart update every %d. Setting alarm update frequency to %d.\", rc->rrdset->id, rc->name, rc->update_every, rc->rrdset->update_every, rc->rrdset->update_every)",
          "old_line_content": "    }",
          "new_line_content": "        error(\"Health alarm '%s.%s' has update every %d, less than chart update every %d. Setting alarm update frequency to %d.\", rc->rrdset->id, rc->name, rc->update_every, rc->rrdset->update_every, rc->rrdset->update_every);",
          "content_same": false
        },
        {
          "line": 881,
          "old_api": null,
          "new_api": "isnan",
          "old_text": null,
          "new_text": "isnan(st->green)",
          "old_line_content": "        st->green = rc->green;",
          "new_line_content": "    if(!isnan(rc->green) && isnan(st->green)) {",
          "content_same": false
        },
        {
          "line": 882,
          "old_api": null,
          "new_api": "debug",
          "old_text": null,
          "new_text": "debug(D_HEALTH, \"Health alarm '%s.%s' green threshold set from %Lf to %Lf.\", rc->rrdset->id, rc->name, rc->rrdset->green, rc->green)",
          "old_line_content": "    }",
          "new_line_content": "        debug(D_HEALTH, \"Health alarm '%s.%s' green threshold set from %Lf to %Lf.\", rc->rrdset->id, rc->name, rc->rrdset->green, rc->green);",
          "content_same": false
        },
        {
          "line": 886,
          "old_api": null,
          "new_api": "isnan",
          "old_text": null,
          "new_text": "isnan(st->red)",
          "old_line_content": "        st->red = rc->red;",
          "new_line_content": "    if(!isnan(rc->red) && isnan(st->red)) {",
          "content_same": false
        },
        {
          "line": 887,
          "old_api": null,
          "new_api": "debug",
          "old_text": null,
          "new_text": "debug(D_HEALTH, \"Health alarm '%s.%s' red threshold set from %Lf to %Lf.\", rc->rrdset->id, rc->name, rc->rrdset->red, rc->red)",
          "old_line_content": "    }",
          "new_line_content": "        debug(D_HEALTH, \"Health alarm '%s.%s' red threshold set from %Lf to %Lf.\", rc->rrdset->id, rc->name, rc->rrdset->red, rc->red);",
          "content_same": false
        },
        {
          "line": 891,
          "old_api": null,
          "new_api": "rrdvar_create_and_index",
          "old_text": null,
          "new_text": "rrdvar_create_and_index(\"local\",  &st->variables_root_index, rc->name, RRDVAR_TYPE_CALCULATED, &rc->value)",
          "old_line_content": "",
          "new_line_content": "    rc->local  = rrdvar_create_and_index(\"local\",  &st->variables_root_index, rc->name, RRDVAR_TYPE_CALCULATED, &rc->value);",
          "content_same": false
        },
        {
          "line": 892,
          "old_api": null,
          "new_api": "rrdvar_create_and_index",
          "old_text": null,
          "new_text": "rrdvar_create_and_index(\"family\", &st->rrdfamily->variables_root_index, rc->name, RRDVAR_TYPE_CALCULATED, &rc->value)",
          "old_line_content": "    char fullname[RRDVAR_MAX_LENGTH + 1];",
          "new_line_content": "    rc->family = rrdvar_create_and_index(\"family\", &st->rrdfamily->variables_root_index, rc->name, RRDVAR_TYPE_CALCULATED, &rc->value);",
          "content_same": false
        },
        {
          "line": 895,
          "old_api": null,
          "new_api": "snprintfz",
          "old_text": null,
          "new_text": "snprintfz(fullname, RRDVAR_MAX_LENGTH, \"%s.%s\", st->id, rc->name)",
          "old_line_content": "",
          "new_line_content": "    snprintfz(fullname, RRDVAR_MAX_LENGTH, \"%s.%s\", st->id, rc->name);",
          "content_same": false
        },
        {
          "line": 898,
          "old_api": null,
          "new_api": "snprintfz",
          "old_text": null,
          "new_text": "snprintfz(fullname, RRDVAR_MAX_LENGTH, \"%s.%s\", st->name, rc->name)",
          "old_line_content": "",
          "new_line_content": "    snprintfz(fullname, RRDVAR_MAX_LENGTH, \"%s.%s\", st->name, rc->name);",
          "content_same": false
        },
        {
          "line": 901,
          "old_api": null,
          "new_api": "strdupz",
          "old_text": null,
          "new_text": "strdupz(st->units)",
          "old_line_content": "    {",
          "new_line_content": "\tif(!rc->units) rc->units = strdupz(st->units);",
          "content_same": false
        },
        {
          "line": 904,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "    }",
          "new_line_content": "        time_t now = time(NULL);",
          "content_same": false
        },
        {
          "line": 905,
          "old_api": null,
          "new_api": "health_alarm_log",
          "old_text": null,
          "new_text": "health_alarm_log(st->rrdhost, rc->id, rc->next_event_id++, now, rc->name, rc->rrdset->id, rc->rrdset->family, rc->exec, rc->recipient, now - rc->last_status_change, rc->old_value, rc->value, rc->status, RRDCALC_STATUS_UNINITIALIZED, rc->source, rc->units, rc->info, 0)",
          "old_line_content": "}",
          "new_line_content": "        health_alarm_log(st->rrdhost, rc->id, rc->next_event_id++, now, rc->name, rc->rrdset->id, rc->rrdset->family, rc->exec, rc->recipient, now - rc->last_status_change, rc->old_value, rc->value, rc->status, RRDCALC_STATUS_UNINITIALIZED, rc->source, rc->units, rc->info, 0);",
          "content_same": false
        },
        {
          "line": 910,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(rc->chart, st->id)",
          "old_line_content": "        return 1;",
          "new_line_content": "    if(     (rc->hash_chart == st->hash      && !strcmp(rc->chart, st->id)) ||",
          "content_same": false
        },
        {
          "line": 911,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(rc->chart, st->name)",
          "old_line_content": "",
          "new_line_content": "            (rc->hash_chart == st->hash_name && !strcmp(rc->chart, st->name)))",
          "content_same": false
        },
        {
          "line": 923,
          "old_api": null,
          "new_api": "unlikely",
          "old_text": null,
          "new_text": "unlikely(rc->rrdset)",
          "old_line_content": "",
          "new_line_content": "        if(unlikely(rc->rrdset))",
          "content_same": false
        },
        {
          "line": 926,
          "old_api": null,
          "new_api": "rrdcalc_is_matching_this_rrdset",
          "old_text": null,
          "new_text": "rrdcalc_is_matching_this_rrdset(rc, st)",
          "old_line_content": "    }",
          "new_line_content": "        if(unlikely(rrdcalc_is_matching_this_rrdset(rc, st)))",
          "content_same": false
        },
        {
          "line": 927,
          "old_api": null,
          "new_api": "rrdsetcalc_link",
          "old_text": null,
          "new_text": "rrdsetcalc_link(st, rc)",
          "old_line_content": "}",
          "new_line_content": "            rrdsetcalc_link(st, rc);",
          "content_same": false
        },
        {
          "line": 936,
          "old_api": null,
          "new_api": "debug",
          "old_text": null,
          "new_text": "debug(D_HEALTH, \"Requested to unlink RRDCALC '%s.%s' which is not linked to any RRDSET\", rc->chart?rc->chart:\"NOCHART\", rc->name)",
          "old_line_content": "        return;",
          "new_line_content": "        debug(D_HEALTH, \"Requested to unlink RRDCALC '%s.%s' which is not linked to any RRDSET\", rc->chart?rc->chart:\"NOCHART\", rc->name);",
          "content_same": false
        },
        {
          "line": 937,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"Requested to unlink RRDCALC '%s.%s' which is not linked to any RRDSET\", rc->chart?rc->chart:\"NOCHART\", rc->name)",
          "old_line_content": "    }",
          "new_line_content": "        error(\"Requested to unlink RRDCALC '%s.%s' which is not linked to any RRDSET\", rc->chart?rc->chart:\"NOCHART\", rc->name);",
          "content_same": false
        },
        {
          "line": 942,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(NULL)",
          "old_line_content": "    }",
          "new_line_content": "        time_t now = time(NULL);",
          "content_same": false
        },
        {
          "line": 943,
          "old_api": null,
          "new_api": "health_alarm_log",
          "old_text": null,
          "new_text": "health_alarm_log(st->rrdhost, rc->id, rc->next_event_id++, now, rc->name, rc->rrdset->id, rc->rrdset->family, rc->exec, rc->recipient, now - rc->last_status_change, rc->old_value, rc->value, rc->status, RRDCALC_STATUS_REMOVED, rc->source, rc->units, rc->info, 0)",
          "old_line_content": "",
          "new_line_content": "        health_alarm_log(st->rrdhost, rc->id, rc->next_event_id++, now, rc->name, rc->rrdset->id, rc->rrdset->family, rc->exec, rc->recipient, now - rc->last_status_change, rc->old_value, rc->value, rc->status, RRDCALC_STATUS_REMOVED, rc->source, rc->units, rc->info, 0);",
          "content_same": false
        },
        {
          "line": 948,
          "old_api": null,
          "new_api": "debug",
          "old_text": null,
          "new_text": "debug(D_HEALTH, \"Health unlinking alarm '%s.%s' from chart '%s' of host '%s'\", rc->chart?rc->chart:\"NOCHART\", rc->name, st->id, host->hostname)",
          "old_line_content": "    // unlink it",
          "new_line_content": "    debug(D_HEALTH, \"Health unlinking alarm '%s.%s' from chart '%s' of host '%s'\", rc->chart?rc->chart:\"NOCHART\", rc->name, st->id, host->hostname);",
          "content_same": false
        },
        {
          "line": 962,
          "old_api": null,
          "new_api": "rrdvar_free",
          "old_text": null,
          "new_text": "rrdvar_free(st->rrdhost, &st->variables_root_index, rc->local)",
          "old_line_content": "",
          "new_line_content": "    rrdvar_free(st->rrdhost, &st->variables_root_index, rc->local);",
          "content_same": false
        },
        {
          "line": 965,
          "old_api": null,
          "new_api": "rrdvar_free",
          "old_text": null,
          "new_text": "rrdvar_free(st->rrdhost, &st->rrdfamily->variables_root_index, rc->family)",
          "old_line_content": "",
          "new_line_content": "    rrdvar_free(st->rrdhost, &st->rrdfamily->variables_root_index, rc->family);",
          "content_same": false
        },
        {
          "line": 968,
          "old_api": null,
          "new_api": "rrdvar_free",
          "old_text": null,
          "new_text": "rrdvar_free(st->rrdhost, &st->rrdhost->variables_root_index, rc->hostid)",
          "old_line_content": "",
          "new_line_content": "    rrdvar_free(st->rrdhost, &st->rrdhost->variables_root_index, rc->hostid);",
          "content_same": false
        },
        {
          "line": 971,
          "old_api": null,
          "new_api": "rrdvar_free",
          "old_text": null,
          "new_text": "rrdvar_free(st->rrdhost, &st->rrdhost->variables_root_index, rc->hostname)",
          "old_line_content": "",
          "new_line_content": "    rrdvar_free(st->rrdhost, &st->rrdhost->variables_root_index, rc->hostname);",
          "content_same": false
        },
        {
          "line": 983,
          "old_api": null,
          "new_api": "simple_hash",
          "old_text": null,
          "new_text": "simple_hash(name)",
          "old_line_content": "    for( rc = st->alarms; rc ; rc = rc->rrdset_next ) {",
          "new_line_content": "    uint32_t hash = simple_hash(name);",
          "content_same": false
        },
        {
          "line": 986,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(rc->name, name)",
          "old_line_content": "    }",
          "new_line_content": "        if(unlikely(rc->hash == hash && !strcmp(rc->name, name)))",
          "content_same": false
        },
        {
          "line": 996,
          "old_api": null,
          "new_api": "unlikely",
          "old_text": null,
          "new_text": "unlikely(!chart)",
          "old_line_content": "        return 1;",
          "new_line_content": "    if(unlikely(!chart)) {",
          "content_same": false
        },
        {
          "line": 997,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"attempt to find RRDCALC '%s' without giving a chart name\", name)",
          "old_line_content": "    }",
          "new_line_content": "        error(\"attempt to find RRDCALC '%s' without giving a chart name\", name);",
          "content_same": false
        },
        {
          "line": 1001,
          "old_api": null,
          "new_api": "simple_hash",
          "old_text": null,
          "new_text": "simple_hash(chart)",
          "old_line_content": "",
          "new_line_content": "    if(unlikely(!hash_chart)) hash_chart = simple_hash(chart);",
          "content_same": false
        },
        {
          "line": 1002,
          "old_api": null,
          "new_api": "simple_hash",
          "old_text": null,
          "new_text": "simple_hash(name)",
          "old_line_content": "    // make sure it does not already exist",
          "new_line_content": "    if(unlikely(!hash_name))  hash_name  = simple_hash(name);",
          "content_same": false
        },
        {
          "line": 1007,
          "old_api": null,
          "new_api": "debug",
          "old_text": null,
          "new_text": "debug(D_HEALTH, \"Health alarm '%s.%s' already exists in host '%s'.\", chart, name, host->hostname)",
          "old_line_content": "            return 1;",
          "new_line_content": "            debug(D_HEALTH, \"Health alarm '%s.%s' already exists in host '%s'.\", chart, name, host->hostname);",
          "content_same": false
        },
        {
          "line": 1008,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"Health alarm '%s.%s' already exists in host '%s'.\", chart, name, host->hostname)",
          "old_line_content": "        }",
          "new_line_content": "            error(\"Health alarm '%s.%s' already exists in host '%s'.\", chart, name, host->hostname);",
          "content_same": false
        },
        {
          "line": 1018,
          "old_api": null,
          "new_api": "simple_hash",
          "old_text": null,
          "new_text": "simple_hash(chart)",
          "old_line_content": "",
          "new_line_content": "        uint32_t hash_chart = simple_hash(chart);",
          "content_same": false
        },
        {
          "line": 1019,
          "old_api": null,
          "new_api": "simple_hash",
          "old_text": null,
          "new_text": "simple_hash(name)",
          "old_line_content": "        // re-use old IDs, by looking them up in the alarm log",
          "new_line_content": "        uint32_t hash_name = simple_hash(name);",
          "content_same": false
        },
        {
          "line": 1024,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(chart, ae->chart)",
          "old_line_content": "                return ae->alarm_id;",
          "new_line_content": "            if(unlikely(ae->hash_name == hash_name && ae->hash_chart == hash_chart && !strcmp(name, ae->name) && !strcmp(chart, ae->chart))) {",
          "content_same": false
        },
        {
          "line": 1035,
          "old_api": null,
          "new_api": "rrdhost_check_rdlock",
          "old_text": null,
          "new_text": "rrdhost_check_rdlock(host)",
          "old_line_content": "    if(rc->calculation) {",
          "new_line_content": "    rrdhost_check_rdlock(host);",
          "content_same": false
        },
        {
          "line": 1062,
          "old_api": null,
          "new_api": "likely",
          "old_text": null,
          "new_text": "likely(host->alarms)",
          "old_line_content": "        RRDCALC *t;",
          "new_line_content": "    if(likely(host->alarms)) {",
          "content_same": false
        },
        {
          "line": 1075,
          "old_api": null,
          "new_api": "rrdcalc_is_matching_this_rrdset",
          "old_text": null,
          "new_text": "rrdcalc_is_matching_this_rrdset(rc, st)",
          "old_line_content": "            break;",
          "new_line_content": "        if(rrdcalc_is_matching_this_rrdset(rc, st)) {",
          "content_same": false
        },
        {
          "line": 1076,
          "old_api": null,
          "new_api": "rrdsetcalc_link",
          "old_text": null,
          "new_text": "rrdsetcalc_link(st, rc)",
          "old_line_content": "        }",
          "new_line_content": "            rrdsetcalc_link(st, rc);",
          "content_same": false
        },
        {
          "line": 1086,
          "old_api": null,
          "new_api": "rrdcalc_exists",
          "old_text": null,
          "new_text": "rrdcalc_exists(host, chart, rt->name, 0, 0)",
          "old_line_content": "",
          "new_line_content": "    if(rrdcalc_exists(host, chart, rt->name, 0, 0))",
          "content_same": false
        },
        {
          "line": 1094,
          "old_api": null,
          "new_api": "strdupz",
          "old_text": null,
          "new_text": "strdupz(chart)",
          "old_line_content": "",
          "new_line_content": "    rc->chart = strdupz(chart);",
          "content_same": false
        },
        {
          "line": 1097,
          "old_api": null,
          "new_api": "strdupz",
          "old_text": null,
          "new_text": "strdupz(rt->dimensions)",
          "old_line_content": "    rc->green = rt->green;",
          "new_line_content": "    if(rt->dimensions) rc->dimensions = strdupz(rt->dimensions);",
          "content_same": false
        },
        {
          "line": 1118,
          "old_api": null,
          "new_api": "strdupz",
          "old_text": null,
          "new_text": "strdupz(rt->units)",
          "old_line_content": "",
          "new_line_content": "    if(rt->units) rc->units = strdupz(rt->units);",
          "content_same": false
        },
        {
          "line": 1119,
          "old_api": null,
          "new_api": "strdupz",
          "old_text": null,
          "new_text": "strdupz(rt->info)",
          "old_line_content": "    if(rt->calculation) {",
          "new_line_content": "    if(rt->info) rc->info = strdupz(rt->info);",
          "content_same": false
        },
        {
          "line": 1124,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"Health alarm '%s.%s': failed to parse calculation expression '%s'\", chart, rt->name, rt->calculation->source)",
          "old_line_content": "    if(rt->warning) {",
          "new_line_content": "            error(\"Health alarm '%s.%s': failed to parse calculation expression '%s'\", chart, rt->name, rt->calculation->source);",
          "content_same": false
        },
        {
          "line": 1129,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"Health alarm '%s.%s': failed to re-parse warning expression '%s'\", chart, rt->name, rt->warning->source)",
          "old_line_content": "    if(rt->critical) {",
          "new_line_content": "            error(\"Health alarm '%s.%s': failed to re-parse warning expression '%s'\", chart, rt->name, rt->warning->source);",
          "content_same": false
        },
        {
          "line": 1134,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"Health alarm '%s.%s': failed to re-parse critical expression '%s'\", chart, rt->name, rt->critical->source)",
          "old_line_content": "",
          "new_line_content": "            error(\"Health alarm '%s.%s': failed to re-parse critical expression '%s'\", chart, rt->name, rt->critical->source);",
          "content_same": false
        },
        {
          "line": 1137,
          "old_api": null,
          "new_api": "debug",
          "old_text": null,
          "new_text": "debug(D_HEALTH, \"Health runtime added alarm '%s.%s': exec '%s', recipient '%s', green %Lf, red %Lf, lookup: group %d, after %d, before %d, options %u, dimensions '%s', update every %d, calculation '%s', warning '%s', critical '%s', source '%s', delay up %d, delay down %d, delay max %d, delay_multiplier %f\",\n          (rc->chart)?rc->chart:\"NOCHART\",\n          rc->name,\n          (rc->exec)?rc->exec:\"DEFAULT\",\n          (rc->recipient)?rc->recipient:\"DEFAULT\",\n          rc->green,\n          rc->red,\n          rc->group,\n          rc->after,\n          rc->before,\n          rc->options,\n          (rc->dimensions)?rc->dimensions:\"NONE\",\n          rc->update_every,\n          (rc->calculation)?rc->calculation->parsed_as:\"NONE\",\n          (rc->warning)?rc->warning->parsed_as:\"NONE\",\n          (rc->critical)?rc->critical->parsed_as:\"NONE\",\n          rc->source,\n          rc->delay_up_duration,\n          rc->delay_down_duration,\n          rc->delay_max_duration,\n          rc->delay_multiplier\n    )",
          "old_line_content": "          rc->name,",
          "new_line_content": "    debug(D_HEALTH, \"Health runtime added alarm '%s.%s': exec '%s', recipient '%s', green %Lf, red %Lf, lookup: group %d, after %d, before %d, options %u, dimensions '%s', update every %d, calculation '%s', warning '%s', critical '%s', source '%s', delay up %d, delay down %d, delay max %d, delay_multiplier %f\",",
          "content_same": false
        },
        {
          "line": 1160,
          "old_api": null,
          "new_api": "rrdcalc_create_part2",
          "old_text": null,
          "new_text": "rrdcalc_create_part2(host, rc)",
          "old_line_content": "}",
          "new_line_content": "    rrdcalc_create_part2(host, rc);",
          "content_same": false
        },
        {
          "line": 1167,
          "old_api": null,
          "new_api": "debug",
          "old_text": null,
          "new_text": "debug(D_HEALTH, \"Health removing alarm '%s.%s' of host '%s'\", rc->chart?rc->chart:\"NOCHART\", rc->name, host->hostname)",
          "old_line_content": "    // unlink it from RRDSET",
          "new_line_content": "    debug(D_HEALTH, \"Health removing alarm '%s.%s' of host '%s'\", rc->chart?rc->chart:\"NOCHART\", rc->name, host->hostname);",
          "content_same": false
        },
        {
          "line": 1170,
          "old_api": null,
          "new_api": "rrdsetcalc_unlink",
          "old_text": null,
          "new_text": "rrdsetcalc_unlink(rc)",
          "old_line_content": "    // unlink it from RRDHOST",
          "new_line_content": "    if(rc->rrdset) rrdsetcalc_unlink(rc);",
          "content_same": false
        },
        {
          "line": 1173,
          "old_api": null,
          "new_api": "unlikely",
          "old_text": null,
          "new_text": "unlikely(rc == host->alarms)",
          "old_line_content": "",
          "new_line_content": "    if(unlikely(rc == host->alarms))",
          "content_same": false
        },
        {
          "line": 1176,
          "old_api": null,
          "new_api": "likely",
          "old_text": null,
          "new_text": "likely(host->alarms)",
          "old_line_content": "        for(t = last->next; t && t != rc; last = t, t = t->next) ;",
          "new_line_content": "    else if(likely(host->alarms)) {",
          "content_same": false
        },
        {
          "line": 1182,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"Cannot unlink alarm '%s.%s' from host '%s': not found\", rc->chart?rc->chart:\"NOCHART\", rc->name, host->hostname)",
          "old_line_content": "    else",
          "new_line_content": "            error(\"Cannot unlink alarm '%s.%s' from host '%s': not found\", rc->chart?rc->chart:\"NOCHART\", rc->name, host->hostname);",
          "content_same": false
        },
        {
          "line": 1188,
          "old_api": null,
          "new_api": "expression_free",
          "old_text": null,
          "new_text": "expression_free(rc->warning)",
          "old_line_content": "",
          "new_line_content": "    expression_free(rc->warning);",
          "content_same": false
        },
        {
          "line": 1199,
          "old_api": null,
          "new_api": "freez",
          "old_text": null,
          "new_text": "freez(rc->info)",
          "old_line_content": "}",
          "new_line_content": "    freez(rc->info);",
          "content_same": false
        },
        {
          "line": 1200,
          "old_api": null,
          "new_api": "freez",
          "old_text": null,
          "new_text": "freez(rc)",
          "old_line_content": "",
          "new_line_content": "    freez(rc);",
          "content_same": false
        },
        {
          "line": 1212,
          "old_api": null,
          "new_api": "unlikely",
          "old_text": null,
          "new_text": "unlikely(!rc)",
          "old_line_content": "",
          "new_line_content": "            if(unlikely(!rc))",
          "content_same": false
        },
        {
          "line": 1213,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"Health tried to create alarm from template '%s', but it failed\", rt->name)",
          "old_line_content": "#ifdef NETDATA_INTERNAL_CHECKS",
          "new_line_content": "                error(\"Health tried to create alarm from template '%s', but it failed\", rt->name);",
          "content_same": false
        },
        {
          "line": 1217,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"Health alarm '%s.%s' should be linked to chart '%s', but it is not\", rc->chart?rc->chart:\"NOCHART\", rc->name, st->id)",
          "old_line_content": "        }",
          "new_line_content": "                error(\"Health alarm '%s.%s' should be linked to chart '%s', but it is not\", rc->chart?rc->chart:\"NOCHART\", rc->name, st->id);",
          "content_same": false
        },
        {
          "line": 1224,
          "old_api": null,
          "new_api": "debug",
          "old_text": null,
          "new_text": "debug(D_HEALTH, \"Health removing template '%s' of host '%s'\", rt->name, host->hostname)",
          "old_line_content": "    if(host->templates) {",
          "new_line_content": "    debug(D_HEALTH, \"Health removing template '%s' of host '%s'\", rt->name, host->hostname);",
          "content_same": false
        },
        {
          "line": 1238,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"Cannot find RRDCALCTEMPLATE '%s' linked in host '%s'\", rt->name, host->hostname)",
          "old_line_content": "    }",
          "new_line_content": "                error(\"Cannot find RRDCALCTEMPLATE '%s' linked in host '%s'\", rt->name, host->hostname);",
          "content_same": false
        },
        {
          "line": 1243,
          "old_api": null,
          "new_api": "expression_free",
          "old_text": null,
          "new_text": "expression_free(rt->warning)",
          "old_line_content": "",
          "new_line_content": "    expression_free(rt->warning);",
          "content_same": false
        },
        {
          "line": 1253,
          "old_api": null,
          "new_api": "freez",
          "old_text": null,
          "new_text": "freez(rt->dimensions)",
          "old_line_content": "}",
          "new_line_content": "    freez(rt->dimensions);",
          "content_same": false
        },
        {
          "line": 1254,
          "old_api": null,
          "new_api": "freez",
          "old_text": null,
          "new_text": "freez(rt)",
          "old_line_content": "",
          "new_line_content": "    freez(rt);",
          "content_same": false
        },
        {
          "line": 1280,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"Health configuration for alarm '%s' does not have a chart\", rc->name)",
          "old_line_content": "    }",
          "new_line_content": "        error(\"Health configuration for alarm '%s' does not have a chart\", rc->name);",
          "content_same": false
        },
        {
          "line": 1285,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"Health configuration for alarm '%s.%s' has no frequency (parameter 'every'). Ignoring it.\", rc->chart?rc->chart:\"NOCHART\", rc->name)",
          "old_line_content": "    }",
          "new_line_content": "        error(\"Health configuration for alarm '%s.%s' has no frequency (parameter 'every'). Ignoring it.\", rc->chart?rc->chart:\"NOCHART\", rc->name);",
          "content_same": false
        },
        {
          "line": 1289,
          "old_api": null,
          "new_api": "RRDCALC_HAS_DB_LOOKUP",
          "old_text": null,
          "new_text": "RRDCALC_HAS_DB_LOOKUP(rc)",
          "old_line_content": "        return 0;",
          "new_line_content": "    if(!RRDCALC_HAS_DB_LOOKUP(rc) && !rc->warning && !rc->critical) {",
          "content_same": false
        },
        {
          "line": 1290,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"Health configuration for alarm '%s.%s' is useless (no calculation, no warning and no critical evaluation)\", rc->chart?rc->chart:\"NOCHART\", rc->name)",
          "old_line_content": "    }",
          "new_line_content": "        error(\"Health configuration for alarm '%s.%s' is useless (no calculation, no warning and no critical evaluation)\", rc->chart?rc->chart:\"NOCHART\", rc->name);",
          "content_same": false
        },
        {
          "line": 1294,
          "old_api": null,
          "new_api": "rrdcalc_exists",
          "old_text": null,
          "new_text": "rrdcalc_exists(host, rc->chart, rc->name, rc->hash_chart, rc->hash)",
          "old_line_content": "",
          "new_line_content": "    if (rrdcalc_exists(host, rc->chart, rc->name, rc->hash_chart, rc->hash))",
          "content_same": false
        },
        {
          "line": 1299,
          "old_api": null,
          "new_api": "debug",
          "old_text": null,
          "new_text": "debug(D_HEALTH, \"Health configuration adding alarm '%s.%s' (%u): exec '%s', recipient '%s', green %Lf, red %Lf, lookup: group %d, after %d, before %d, options %u, dimensions '%s', update every %d, calculation '%s', warning '%s', critical '%s', source '%s', delay up %d, delay down %d, delay max %d, delay_multiplier %f\",\n          rc->chart?rc->chart:\"NOCHART\",\n          rc->name,\n          rc->id,\n          (rc->exec)?rc->exec:\"DEFAULT\",\n          (rc->recipient)?rc->recipient:\"DEFAULT\",\n          rc->green,\n          rc->red,\n          rc->group,\n          rc->after,\n          rc->before,\n          rc->options,\n          (rc->dimensions)?rc->dimensions:\"NONE\",\n          rc->update_every,\n          (rc->calculation)?rc->calculation->parsed_as:\"NONE\",\n          (rc->warning)?rc->warning->parsed_as:\"NONE\",\n          (rc->critical)?rc->critical->parsed_as:\"NONE\",\n          rc->source,\n          rc->delay_up_duration,\n          rc->delay_down_duration,\n          rc->delay_max_duration,\n          rc->delay_multiplier\n    )",
          "old_line_content": "          rc->name,",
          "new_line_content": "    debug(D_HEALTH, \"Health configuration adding alarm '%s.%s' (%u): exec '%s', recipient '%s', green %Lf, red %Lf, lookup: group %d, after %d, before %d, options %u, dimensions '%s', update every %d, calculation '%s', warning '%s', critical '%s', source '%s', delay up %d, delay down %d, delay max %d, delay_multiplier %f\",",
          "content_same": false
        },
        {
          "line": 1323,
          "old_api": null,
          "new_api": "rrdcalc_create_part2",
          "old_text": null,
          "new_text": "rrdcalc_create_part2(host, rc)",
          "old_line_content": "}",
          "new_line_content": "    rrdcalc_create_part2(host, rc);",
          "content_same": false
        },
        {
          "line": 1328,
          "old_api": null,
          "new_api": "unlikely",
          "old_text": null,
          "new_text": "unlikely(!rt->context)",
          "old_line_content": "        return 0;",
          "new_line_content": "    if(unlikely(!rt->context)) {",
          "content_same": false
        },
        {
          "line": 1329,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"Health configuration for template '%s' does not have a context\", rt->name)",
          "old_line_content": "    }",
          "new_line_content": "        error(\"Health configuration for template '%s' does not have a context\", rt->name);",
          "content_same": false
        },
        {
          "line": 1333,
          "old_api": null,
          "new_api": "unlikely",
          "old_text": null,
          "new_text": "unlikely(!rt->update_every)",
          "old_line_content": "        return 0;",
          "new_line_content": "    if(unlikely(!rt->update_every)) {",
          "content_same": false
        },
        {
          "line": 1334,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"Health configuration for template '%s' has no frequency (parameter 'every'). Ignoring it.\", rt->name)",
          "old_line_content": "    }",
          "new_line_content": "        error(\"Health configuration for template '%s' has no frequency (parameter 'every'). Ignoring it.\", rt->name);",
          "content_same": false
        },
        {
          "line": 1338,
          "old_api": null,
          "new_api": "RRDCALCTEMPLATE_HAS_CALCULATION",
          "old_text": null,
          "new_text": "RRDCALCTEMPLATE_HAS_CALCULATION(rt)",
          "old_line_content": "        return 0;",
          "new_line_content": "    if(unlikely(!RRDCALCTEMPLATE_HAS_CALCULATION(rt) && !rt->warning && !rt->critical)) {",
          "content_same": false
        },
        {
          "line": 1339,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"Health configuration for template '%s' is useless (no calculation, no warning and no critical evaluation)\", rt->name)",
          "old_line_content": "    }",
          "new_line_content": "        error(\"Health configuration for template '%s' is useless (no calculation, no warning and no critical evaluation)\", rt->name);",
          "content_same": false
        },
        {
          "line": 1345,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(t->name, rt->name)",
          "old_line_content": "            return 0;",
          "new_line_content": "        if(unlikely(t->hash_name == rt->hash_name && !strcmp(t->name, rt->name))) {",
          "content_same": false
        },
        {
          "line": 1346,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"Health configuration template '%s' already exists for host '%s'.\", rt->name, host->hostname)",
          "old_line_content": "        }",
          "new_line_content": "            error(\"Health configuration template '%s' already exists for host '%s'.\", rt->name, host->hostname);",
          "content_same": false
        },
        {
          "line": 1351,
          "old_api": null,
          "new_api": "debug",
          "old_text": null,
          "new_text": "debug(D_HEALTH, \"Health configuration adding template '%s': context '%s', exec '%s', recipient '%s', green %Lf, red %Lf, lookup: group %d, after %d, before %d, options %u, dimensions '%s', update every %d, calculation '%s', warning '%s', critical '%s', source '%s', delay up %d, delay down %d, delay max %d, delay_multiplier %f\",\n          rt->name,\n          (rt->context)?rt->context:\"NONE\",\n          (rt->exec)?rt->exec:\"DEFAULT\",\n          (rt->recipient)?rt->recipient:\"DEFAULT\",\n          rt->green,\n          rt->red,\n          rt->group,\n          rt->after,\n          rt->before,\n          rt->options,\n          (rt->dimensions)?rt->dimensions:\"NONE\",\n          rt->update_every,\n          (rt->calculation)?rt->calculation->parsed_as:\"NONE\",\n          (rt->warning)?rt->warning->parsed_as:\"NONE\",\n          (rt->critical)?rt->critical->parsed_as:\"NONE\",\n          rt->source,\n          rt->delay_up_duration,\n          rt->delay_down_duration,\n          rt->delay_max_duration,\n          rt->delay_multiplier\n    )",
          "old_line_content": "          (rt->context)?rt->context:\"NONE\",",
          "new_line_content": "    debug(D_HEALTH, \"Health configuration adding template '%s': context '%s', exec '%s', recipient '%s', green %Lf, red %Lf, lookup: group %d, after %d, before %d, options %u, dimensions '%s', update every %d, calculation '%s', warning '%s', critical '%s', source '%s', delay up %d, delay down %d, delay max %d, delay_multiplier %f\",",
          "content_same": false
        },
        {
          "line": 1374,
          "old_api": null,
          "new_api": "likely",
          "old_text": null,
          "new_text": "likely(last)",
          "old_line_content": "    }",
          "new_line_content": "    if(likely(last)) {",
          "content_same": false
        },
        {
          "line": 1387,
          "old_api": null,
          "new_api": "isdigit",
          "old_text": null,
          "new_text": "isdigit(*string)",
          "old_line_content": "        return 0;",
          "new_line_content": "    if(!*string || !(isdigit(*string) || *string == '+' || *string == '-')) {",
          "content_same": false
        },
        {
          "line": 1393,
          "old_api": null,
          "new_api": "strtold",
          "old_text": null,
          "new_text": "strtold(string, &e)",
          "old_line_content": "        switch (*e) {",
          "new_line_content": "    calculated_number n = strtold(string, &e);",
          "content_same": false
        },
        {
          "line": 1443,
          "old_api": null,
          "new_api": "isspace",
          "old_text": null,
          "new_text": "isspace(*s)",
          "old_line_content": "",
          "new_line_content": "        while(*s && !isspace(*s)) s++;",
          "content_same": false
        },
        {
          "line": 1444,
          "old_api": null,
          "new_api": "isspace",
          "old_text": null,
          "new_text": "isspace(*s)",
          "old_line_content": "        if(!*key) break;",
          "new_line_content": "        while(*s && isspace(*s)) *s++ = '\\0';",
          "content_same": false
        },
        {
          "line": 1449,
          "old_api": null,
          "new_api": "isspace",
          "old_text": null,
          "new_text": "isspace(*s)",
          "old_line_content": "",
          "new_line_content": "        while(*s && !isspace(*s)) s++;",
          "content_same": false
        },
        {
          "line": 1453,
          "old_api": null,
          "new_api": "health_parse_duration",
          "old_text": null,
          "new_text": "health_parse_duration(value, delay_up_duration)",
          "old_line_content": "                      line, path, file, value, key);",
          "new_line_content": "            if (!health_parse_duration(value, delay_up_duration)) {",
          "content_same": false
        },
        {
          "line": 1454,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"Health configuration at line %zu of file '%s/%s': invalid value '%s' for '%s' keyword\",\n                      line, path, file, value, key)",
          "old_line_content": "            }",
          "new_line_content": "                error(\"Health configuration at line %zu of file '%s/%s': invalid value '%s' for '%s' keyword\",",
          "content_same": false
        },
        {
          "line": 1460,
          "old_api": null,
          "new_api": "health_parse_duration",
          "old_text": null,
          "new_text": "health_parse_duration(value, delay_down_duration)",
          "old_line_content": "                      line, path, file, value, key);",
          "new_line_content": "            if (!health_parse_duration(value, delay_down_duration)) {",
          "content_same": false
        },
        {
          "line": 1461,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"Health configuration at line %zu of file '%s/%s': invalid value '%s' for '%s' keyword\",\n                      line, path, file, value, key)",
          "old_line_content": "            }",
          "new_line_content": "                error(\"Health configuration at line %zu of file '%s/%s': invalid value '%s' for '%s' keyword\",",
          "content_same": false
        },
        {
          "line": 1468,
          "old_api": null,
          "new_api": "islessequal",
          "old_text": null,
          "new_text": "islessequal(*delay_multiplier, 0)",
          "old_line_content": "                      line, path, file, value, key);",
          "new_line_content": "            if(isnan(*delay_multiplier) || isinf(*delay_multiplier) || islessequal(*delay_multiplier, 0)) {",
          "content_same": false
        },
        {
          "line": 1469,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"Health configuration at line %zu of file '%s/%s': invalid value '%s' for '%s' keyword\",\n                      line, path, file, value, key)",
          "old_line_content": "            }",
          "new_line_content": "                error(\"Health configuration at line %zu of file '%s/%s': invalid value '%s' for '%s' keyword\",",
          "content_same": false
        },
        {
          "line": 1475,
          "old_api": null,
          "new_api": "health_parse_duration",
          "old_text": null,
          "new_text": "health_parse_duration(value, delay_max_duration)",
          "old_line_content": "                      line, path, file, value, key);",
          "new_line_content": "            if (!health_parse_duration(value, delay_max_duration)) {",
          "content_same": false
        },
        {
          "line": 1476,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"Health configuration at line %zu of file '%s/%s': invalid value '%s' for '%s' keyword\",\n                      line, path, file, value, key)",
          "old_line_content": "            }",
          "new_line_content": "                error(\"Health configuration at line %zu of file '%s/%s': invalid value '%s' for '%s' keyword\",",
          "content_same": false
        },
        {
          "line": 1482,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"Health configuration at line %zu of file '%s/%s': unknown keyword '%s'\",\n                  line, path, file, key)",
          "old_line_content": "        }",
          "new_line_content": "            error(\"Health configuration at line %zu of file '%s/%s': unknown keyword '%s'\",",
          "content_same": false
        },
        {
          "line": 1514,
          "old_api": null,
          "new_api": "freez",
          "old_text": null,
          "new_text": "freez(*dimensions)",
          "old_line_content": "    *after = 0;",
          "new_line_content": "    if(*dimensions) freez(*dimensions);",
          "content_same": false
        },
        {
          "line": 1525,
          "old_api": null,
          "new_api": "isspace",
          "old_text": null,
          "new_text": "isspace(*s)",
          "old_line_content": "    if(!*s) {",
          "new_line_content": "    while(*s && !isspace(*s)) s++;",
          "content_same": false
        },
        {
          "line": 1528,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"Health configuration invalid chart calculation at line %zu of file '%s/%s': expected group method followed by the 'after' time, but got '%s'\",\n              line, path, file, key)",
          "old_line_content": "        return 0;",
          "new_line_content": "        error(\"Health configuration invalid chart calculation at line %zu of file '%s/%s': expected group method followed by the 'after' time, but got '%s'\",",
          "content_same": false
        },
        {
          "line": 1533,
          "old_api": null,
          "new_api": "web_client_api_request_v1_data_group",
          "old_text": null,
          "new_text": "web_client_api_request_v1_data_group(key, -1)",
          "old_line_content": "              line, path, file, key);",
          "new_line_content": "    if((*group_method = web_client_api_request_v1_data_group(key, -1)) == -1) {",
          "content_same": false
        },
        {
          "line": 1534,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"Health configuration at line %zu of file '%s/%s': invalid group method '%s'\",\n              line, path, file, key)",
          "old_line_content": "        return 0;",
          "new_line_content": "        error(\"Health configuration at line %zu of file '%s/%s': invalid group method '%s'\",",
          "content_same": false
        },
        {
          "line": 1541,
          "old_api": null,
          "new_api": "isspace",
          "old_text": null,
          "new_text": "isspace(*s)",
          "old_line_content": "",
          "new_line_content": "    while(*s && !isspace(*s)) s++;",
          "content_same": false
        },
        {
          "line": 1544,
          "old_api": null,
          "new_api": "health_parse_duration",
          "old_text": null,
          "new_text": "health_parse_duration(key, after)",
          "old_line_content": "              line, path, file, key);",
          "new_line_content": "    if(!health_parse_duration(key, after)) {",
          "content_same": false
        },
        {
          "line": 1545,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"Health configuration at line %zu of file '%s/%s': invalid duration '%s' after group method\",\n              line, path, file, key)",
          "old_line_content": "        return 0;",
          "new_line_content": "        error(\"Health configuration at line %zu of file '%s/%s': invalid duration '%s' after group method\",",
          "content_same": false
        },
        {
          "line": 1551,
          "old_api": null,
          "new_api": "abs",
          "old_text": null,
          "new_text": "abs(*after)",
          "old_line_content": "    // now we may have optional parameters",
          "new_line_content": "    *every = abs(*after);",
          "content_same": false
        },
        {
          "line": 1556,
          "old_api": null,
          "new_api": "isspace",
          "old_text": null,
          "new_text": "isspace(*s)",
          "old_line_content": "        if(!*key) break;",
          "new_line_content": "        while(*s && !isspace(*s)) s++;",
          "content_same": false
        },
        {
          "line": 1557,
          "old_api": null,
          "new_api": "isspace",
          "old_text": null,
          "new_text": "isspace(*s)",
          "old_line_content": "",
          "new_line_content": "        while(*s && isspace(*s)) *s++ = '\\0';",
          "content_same": false
        },
        {
          "line": 1562,
          "old_api": null,
          "new_api": "isspace",
          "old_text": null,
          "new_text": "isspace(*s)",
          "old_line_content": "",
          "new_line_content": "            while(*s && !isspace(*s)) s++;",
          "content_same": false
        },
        {
          "line": 1565,
          "old_api": null,
          "new_api": "health_parse_duration",
          "old_text": null,
          "new_text": "health_parse_duration(value, before)",
          "old_line_content": "                      line, path, file, value, key);",
          "new_line_content": "            if (!health_parse_duration(value, before)) {",
          "content_same": false
        },
        {
          "line": 1566,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"Health configuration at line %zu of file '%s/%s': invalid duration '%s' for '%s' keyword\",\n                      line, path, file, value, key)",
          "old_line_content": "            }",
          "new_line_content": "                error(\"Health configuration at line %zu of file '%s/%s': invalid duration '%s' for '%s' keyword\",",
          "content_same": false
        },
        {
          "line": 1572,
          "old_api": null,
          "new_api": "isspace",
          "old_text": null,
          "new_text": "isspace(*s)",
          "old_line_content": "",
          "new_line_content": "            while(*s && !isspace(*s)) s++;",
          "content_same": false
        },
        {
          "line": 1575,
          "old_api": null,
          "new_api": "health_parse_duration",
          "old_text": null,
          "new_text": "health_parse_duration(value, every)",
          "old_line_content": "                      line, path, file, value, key);",
          "new_line_content": "            if (!health_parse_duration(value, every)) {",
          "content_same": false
        },
        {
          "line": 1576,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"Health configuration at line %zu of file '%s/%s': invalid duration '%s' for '%s' keyword\",\n                      line, path, file, value, key)",
          "old_line_content": "            }",
          "new_line_content": "                error(\"Health configuration at line %zu of file '%s/%s': invalid duration '%s' for '%s' keyword\",",
          "content_same": false
        },
        {
          "line": 1580,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(key, \"absolute_sum\")",
          "old_line_content": "        }",
          "new_line_content": "        else if(!strcasecmp(key, \"absolute\") || !strcasecmp(key, \"abs\") || !strcasecmp(key, \"absolute_sum\")) {",
          "content_same": false
        },
        {
          "line": 1583,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(key, \"min2max\")",
          "old_line_content": "        }",
          "new_line_content": "        else if(!strcasecmp(key, \"min2max\")) {",
          "content_same": false
        },
        {
          "line": 1586,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(key, \"null2zero\")",
          "old_line_content": "        }",
          "new_line_content": "        else if(!strcasecmp(key, \"null2zero\")) {",
          "content_same": false
        },
        {
          "line": 1589,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(key, \"percentage\")",
          "old_line_content": "        }",
          "new_line_content": "        else if(!strcasecmp(key, \"percentage\")) {",
          "content_same": false
        },
        {
          "line": 1592,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(key, \"unaligned\")",
          "old_line_content": "        }",
          "new_line_content": "        else if(!strcasecmp(key, \"unaligned\")) {",
          "content_same": false
        },
        {
          "line": 1596,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(s, \"all\")",
          "old_line_content": "            break;",
          "new_line_content": "            if(*s && strcasecmp(s, \"all\"))",
          "content_same": false
        },
        {
          "line": 1597,
          "old_api": null,
          "new_api": "strdupz",
          "old_text": null,
          "new_text": "strdupz(s)",
          "old_line_content": "        }",
          "new_line_content": "               *dimensions = strdupz(s);",
          "content_same": false
        },
        {
          "line": 1601,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"Health configuration at line %zu of file '%s/%s': unknown keyword '%s'\",\n                  line, path, file, key)",
          "old_line_content": "        }",
          "new_line_content": "            error(\"Health configuration at line %zu of file '%s/%s': unknown keyword '%s'\",",
          "content_same": false
        },
        {
          "line": 1612,
          "old_api": null,
          "new_api": "unlikely",
          "old_text": null,
          "new_text": "unlikely(*t == '\\t')",
          "old_line_content": "    }",
          "new_line_content": "        if(unlikely(*t == '\\t')) *t = ' ';",
          "content_same": false
        },
        {
          "line": 1621,
          "old_api": null,
          "new_api": "snprintfz",
          "old_text": null,
          "new_text": "snprintfz(buffer, FILENAME_MAX, \"%zu@%s/%s\", line, path, filename)",
          "old_line_content": "}",
          "new_line_content": "    snprintfz(buffer, FILENAME_MAX, \"%zu@%s/%s\", line, path, filename);",
          "content_same": false
        },
        {
          "line": 1622,
          "old_api": null,
          "new_api": "strdupz",
          "old_text": null,
          "new_text": "strdupz(buffer)",
          "old_line_content": "",
          "new_line_content": "    return strdupz(buffer);",
          "content_same": false
        },
        {
          "line": 1633,
          "old_api": null,
          "new_api": "debug",
          "old_text": null,
          "new_text": "debug(D_HEALTH, \"Health configuration reading file '%s/%s'\", path, filename)",
          "old_line_content": "    static uint32_t hash_alarm = 0, hash_template = 0, hash_on = 0, hash_calc = 0, hash_green = 0, hash_red = 0, hash_warn = 0, hash_crit = 0, hash_exec = 0, hash_every = 0, hash_lookup = 0, hash_units = 0, hash_info = 0, hash_recipient = 0, hash_delay = 0;",
          "new_line_content": "    debug(D_HEALTH, \"Health configuration reading file '%s/%s'\", path, filename);",
          "content_same": false
        },
        {
          "line": 1652,
          "old_api": null,
          "new_api": "simple_hash",
          "old_text": null,
          "new_text": "simple_hash(HEALTH_RECIPIENT_KEY)",
          "old_line_content": "    }",
          "new_line_content": "        hash_recipient = simple_hash(HEALTH_RECIPIENT_KEY);",
          "content_same": false
        },
        {
          "line": 1653,
          "old_api": null,
          "new_api": "simple_uhash",
          "old_text": null,
          "new_text": "simple_uhash(HEALTH_DELAY_KEY)",
          "old_line_content": "",
          "new_line_content": "        hash_delay = simple_uhash(HEALTH_DELAY_KEY);",
          "content_same": false
        },
        {
          "line": 1656,
          "old_api": null,
          "new_api": "snprintfz",
          "old_text": null,
          "new_text": "snprintfz(buffer, HEALTH_CONF_MAX_LINE, \"%s/%s\", path, filename)",
          "old_line_content": "    if(!fp) {",
          "new_line_content": "    snprintfz(buffer, HEALTH_CONF_MAX_LINE, \"%s/%s\", path, filename);",
          "content_same": false
        },
        {
          "line": 1659,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"Health configuration cannot read file '%s'.\", buffer)",
          "old_line_content": "    }",
          "new_line_content": "        error(\"Health configuration cannot read file '%s'.\", buffer);",
          "content_same": false
        },
        {
          "line": 1668,
          "old_api": null,
          "new_api": "fgets",
          "old_text": null,
          "new_text": "fgets(&buffer[append], (int)(HEALTH_CONF_MAX_LINE - append), fp)",
          "old_line_content": "        line++;",
          "new_line_content": "    while((s = fgets(&buffer[append], (int)(HEALTH_CONF_MAX_LINE - append), fp)) || append) {",
          "content_same": false
        },
        {
          "line": 1672,
          "old_api": null,
          "new_api": "trim",
          "old_text": null,
          "new_text": "trim(buffer)",
          "old_line_content": "        // info(\"Trimmed line %zu of file '%s/%s': '%s'\", line, path, filename, s);",
          "new_line_content": "        s = trim(buffer);",
          "content_same": false
        },
        {
          "line": 1676,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(s)",
          "old_line_content": "            s[append - 1] = ' ';",
          "new_line_content": "        append = strlen(s);",
          "content_same": false
        },
        {
          "line": 1683,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"Health configuration has too long muli-line at line %zu of file '%s/%s'.\", line, path, filename)",
          "old_line_content": "        }",
          "new_line_content": "                error(\"Health configuration has too long muli-line at line %zu of file '%s/%s'.\", line, path, filename);",
          "content_same": false
        },
        {
          "line": 1691,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"Health configuration has invalid line %zu of file '%s/%s'. It does not contain a ':'. Ignoring it.\", line, path, filename)",
          "old_line_content": "        }",
          "new_line_content": "            error(\"Health configuration has invalid line %zu of file '%s/%s'. It does not contain a ':'. Ignoring it.\", line, path, filename);",
          "content_same": false
        },
        {
          "line": 1698,
          "old_api": null,
          "new_api": "trim",
          "old_text": null,
          "new_text": "trim(key)",
          "old_line_content": "",
          "new_line_content": "        key = trim(key);",
          "content_same": false
        },
        {
          "line": 1699,
          "old_api": null,
          "new_api": "trim",
          "old_text": null,
          "new_text": "trim(value)",
          "old_line_content": "        if(!key) {",
          "new_line_content": "        value = trim(value);",
          "content_same": false
        },
        {
          "line": 1702,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"Health configuration has invalid line %zu of file '%s/%s'. Keyword is empty. Ignoring it.\", line, path, filename)",
          "old_line_content": "        }",
          "new_line_content": "            error(\"Health configuration has invalid line %zu of file '%s/%s'. Keyword is empty. Ignoring it.\", line, path, filename);",
          "content_same": false
        },
        {
          "line": 1707,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"Health configuration has invalid line %zu of file '%s/%s'. value is empty. Ignoring it.\", line, path, filename)",
          "old_line_content": "        }",
          "new_line_content": "            error(\"Health configuration has invalid line %zu of file '%s/%s'. value is empty. Ignoring it.\", line, path, filename);",
          "content_same": false
        },
        {
          "line": 1715,
          "old_api": null,
          "new_api": "rrdcalc_add_alarm_from_config",
          "old_text": null,
          "new_text": "rrdcalc_add_alarm_from_config(&localhost, rc)",
          "old_line_content": "",
          "new_line_content": "            if(rc && !rrdcalc_add_alarm_from_config(&localhost, rc))",
          "content_same": false
        },
        {
          "line": 1716,
          "old_api": null,
          "new_api": "rrdcalc_free",
          "old_text": null,
          "new_text": "rrdcalc_free(&localhost, rc)",
          "old_line_content": "            if(rt) {",
          "new_line_content": "                rrdcalc_free(&localhost, rc);",
          "content_same": false
        },
        {
          "line": 1719,
          "old_api": null,
          "new_api": "rrdcalctemplate_add_template_from_config",
          "old_text": null,
          "new_text": "rrdcalctemplate_add_template_from_config(&localhost, rt)",
          "old_line_content": "                rt = NULL;",
          "new_line_content": "                if (!rrdcalctemplate_add_template_from_config(&localhost, rt))",
          "content_same": false
        },
        {
          "line": 1720,
          "old_api": null,
          "new_api": "rrdcalctemplate_free",
          "old_text": null,
          "new_text": "rrdcalctemplate_free(&localhost, rt)",
          "old_line_content": "            }",
          "new_line_content": "                    rrdcalctemplate_free(&localhost, rt);",
          "content_same": false
        },
        {
          "line": 1727,
          "old_api": null,
          "new_api": "simple_hash",
          "old_text": null,
          "new_text": "simple_hash(rc->name)",
          "old_line_content": "            rc->green = NAN;",
          "new_line_content": "            rc->hash = simple_hash(rc->name);",
          "content_same": false
        },
        {
          "line": 1728,
          "old_api": null,
          "new_api": "health_source_file",
          "old_text": null,
          "new_text": "health_source_file(line, path, filename)",
          "old_line_content": "            rc->red = NAN;",
          "new_line_content": "            rc->source = health_source_file(line, path, filename);",
          "content_same": false
        },
        {
          "line": 1735,
          "old_api": null,
          "new_api": "rrdvar_fix_name",
          "old_text": null,
          "new_text": "rrdvar_fix_name(rc->name)",
          "old_line_content": "        }",
          "new_line_content": "            if(rrdvar_fix_name(rc->name))",
          "content_same": false
        },
        {
          "line": 1740,
          "old_api": null,
          "new_api": "rrdcalc_add_alarm_from_config",
          "old_text": null,
          "new_text": "rrdcalc_add_alarm_from_config(&localhost, rc)",
          "old_line_content": "                rc = NULL;",
          "new_line_content": "                if(!rrdcalc_add_alarm_from_config(&localhost, rc))",
          "content_same": false
        },
        {
          "line": 1741,
          "old_api": null,
          "new_api": "rrdcalc_free",
          "old_text": null,
          "new_text": "rrdcalc_free(&localhost, rc)",
          "old_line_content": "            }",
          "new_line_content": "                    rrdcalc_free(&localhost, rc);",
          "content_same": false
        },
        {
          "line": 1745,
          "old_api": null,
          "new_api": "rrdcalctemplate_add_template_from_config",
          "old_text": null,
          "new_text": "rrdcalctemplate_add_template_from_config(&localhost, rt)",
          "old_line_content": "",
          "new_line_content": "            if(rt && !rrdcalctemplate_add_template_from_config(&localhost, rt))",
          "content_same": false
        },
        {
          "line": 1750,
          "old_api": null,
          "new_api": "simple_hash",
          "old_text": null,
          "new_text": "simple_hash(rt->name)",
          "old_line_content": "            rt->green = NAN;",
          "new_line_content": "            rt->hash_name = simple_hash(rt->name);",
          "content_same": false
        },
        {
          "line": 1751,
          "old_api": null,
          "new_api": "health_source_file",
          "old_text": null,
          "new_text": "health_source_file(line, path, filename)",
          "old_line_content": "            rt->red = NAN;",
          "new_line_content": "            rt->source = health_source_file(line, path, filename);",
          "content_same": false
        },
        {
          "line": 1756,
          "old_api": null,
          "new_api": "rrdvar_fix_name",
          "old_text": null,
          "new_text": "rrdvar_fix_name(rt->name)",
          "old_line_content": "        }",
          "new_line_content": "            if(rrdvar_fix_name(rt->name))",
          "content_same": false
        },
        {
          "line": 1757,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"Health configuration renamed template '%s' to '%s'\", value, rt->name)",
          "old_line_content": "        else if(rc) {",
          "new_line_content": "                error(\"Health configuration renamed template '%s' to '%s'\", value, rt->name);",
          "content_same": false
        },
        {
          "line": 1762,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(rc->chart, value)",
          "old_line_content": "                             line, path, filename, rc->name, key, rc->chart, value, value);",
          "new_line_content": "                    if(strcmp(rc->chart, value))",
          "content_same": false
        },
        {
          "line": 1763,
          "old_api": null,
          "new_api": "info",
          "old_text": null,
          "new_text": "info(\"Health configuration at line %zu of file '%s/%s' for alarm '%s' has key '%s' twice, once with value '%s' and later with value '%s'. Using ('%s').\",\n                             line, path, filename, rc->name, key, rc->chart, value, value)",
          "old_line_content": "",
          "new_line_content": "                        info(\"Health configuration at line %zu of file '%s/%s' for alarm '%s' has key '%s' twice, once with value '%s' and later with value '%s'. Using ('%s').\",",
          "content_same": false
        },
        {
          "line": 1768,
          "old_api": null,
          "new_api": "strdupz",
          "old_text": null,
          "new_text": "strdupz(value)",
          "old_line_content": "            }",
          "new_line_content": "                rc->chart = tabs2spaces(strdupz(value));",
          "content_same": false
        },
        {
          "line": 1771,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(key, HEALTH_LOOKUP_KEY)",
          "old_line_content": "                                       &rc->update_every,",
          "new_line_content": "            else if(hash == hash_lookup && !strcasecmp(key, HEALTH_LOOKUP_KEY)) {",
          "content_same": false
        },
        {
          "line": 1772,
          "old_api": null,
          "new_api": "health_parse_db_lookup",
          "old_text": null,
          "new_text": "health_parse_db_lookup(line, path, filename, value, &rc->group, &rc->after, &rc->before,\n                                       &rc->update_every,\n                                       &rc->options, &rc->dimensions)",
          "old_line_content": "                                       &rc->options, &rc->dimensions);",
          "new_line_content": "                health_parse_db_lookup(line, path, filename, value, &rc->group, &rc->after, &rc->before,",
          "content_same": false
        },
        {
          "line": 1777,
          "old_api": null,
          "new_api": "health_parse_duration",
          "old_text": null,
          "new_text": "health_parse_duration(value, &rc->update_every)",
          "old_line_content": "                         line, path, filename, rc->name, key, value);",
          "new_line_content": "                if(!health_parse_duration(value, &rc->update_every))",
          "content_same": false
        },
        {
          "line": 1778,
          "old_api": null,
          "new_api": "info",
          "old_text": null,
          "new_text": "info(\"Health configuration at line %zu of file '%s/%s' for alarm '%s' at key '%s' cannot parse duration: '%s'.\",\n                         line, path, filename, rc->name, key, value)",
          "old_line_content": "            }",
          "new_line_content": "                    info(\"Health configuration at line %zu of file '%s/%s' for alarm '%s' at key '%s' cannot parse duration: '%s'.\",",
          "content_same": false
        },
        {
          "line": 1785,
          "old_api": null,
          "new_api": "info",
          "old_text": null,
          "new_text": "info(\"Health configuration at line %zu of file '%s/%s' for alarm '%s' at key '%s' leaves this string unmatched: '%s'.\",\n                         line, path, filename, rc->name, key, e)",
          "old_line_content": "                }",
          "new_line_content": "                    info(\"Health configuration at line %zu of file '%s/%s' for alarm '%s' at key '%s' leaves this string unmatched: '%s'.\",",
          "content_same": false
        },
        {
          "line": 1793,
          "old_api": null,
          "new_api": "info",
          "old_text": null,
          "new_text": "info(\"Health configuration at line %zu of file '%s/%s' for alarm '%s' at key '%s' leaves this string unmatched: '%s'.\",\n                         line, path, filename, rc->name, key, e)",
          "old_line_content": "                }",
          "new_line_content": "                    info(\"Health configuration at line %zu of file '%s/%s' for alarm '%s' at key '%s' leaves this string unmatched: '%s'.\",",
          "content_same": false
        },
        {
          "line": 1797,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(key, HEALTH_CALC_KEY)",
          "old_line_content": "                int error = 0;",
          "new_line_content": "            else if(hash == hash_calc && !strcasecmp(key, HEALTH_CALC_KEY)) {",
          "content_same": false
        },
        {
          "line": 1802,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"Health configuration at line %zu of file '%s/%s' for alarm '%s' at key '%s' has unparse-able expression '%s': %s at '%s'\",\n                          line, path, filename, rc->name, key, value, expression_strerror(error), failed_at)",
          "old_line_content": "                }",
          "new_line_content": "                    error(\"Health configuration at line %zu of file '%s/%s' for alarm '%s' at key '%s' has unparse-able expression '%s': %s at '%s'\",",
          "content_same": false
        },
        {
          "line": 1803,
          "old_api": null,
          "new_api": "expression_strerror",
          "old_text": null,
          "new_text": "expression_strerror(error)",
          "old_line_content": "            }",
          "new_line_content": "                          line, path, filename, rc->name, key, value, expression_strerror(error), failed_at);",
          "content_same": false
        },
        {
          "line": 1806,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(key, HEALTH_WARN_KEY)",
          "old_line_content": "                int error = 0;",
          "new_line_content": "            else if(hash == hash_warn && !strcasecmp(key, HEALTH_WARN_KEY)) {",
          "content_same": false
        },
        {
          "line": 1811,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"Health configuration at line %zu of file '%s/%s' for alarm '%s' at key '%s' has unparse-able expression '%s': %s at '%s'\",\n                          line, path, filename, rc->name, key, value, expression_strerror(error), failed_at)",
          "old_line_content": "                }",
          "new_line_content": "                    error(\"Health configuration at line %zu of file '%s/%s' for alarm '%s' at key '%s' has unparse-able expression '%s': %s at '%s'\",",
          "content_same": false
        },
        {
          "line": 1812,
          "old_api": null,
          "new_api": "expression_strerror",
          "old_text": null,
          "new_text": "expression_strerror(error)",
          "old_line_content": "            }",
          "new_line_content": "                          line, path, filename, rc->name, key, value, expression_strerror(error), failed_at);",
          "content_same": false
        },
        {
          "line": 1815,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(key, HEALTH_CRIT_KEY)",
          "old_line_content": "                int error = 0;",
          "new_line_content": "            else if(hash == hash_crit && !strcasecmp(key, HEALTH_CRIT_KEY)) {",
          "content_same": false
        },
        {
          "line": 1820,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"Health configuration at line %zu of file '%s/%s' for alarm '%s' at key '%s' has unparse-able expression '%s': %s at '%s'\",\n                          line, path, filename, rc->name, key, value, expression_strerror(error), failed_at)",
          "old_line_content": "                }",
          "new_line_content": "                    error(\"Health configuration at line %zu of file '%s/%s' for alarm '%s' at key '%s' has unparse-able expression '%s': %s at '%s'\",",
          "content_same": false
        },
        {
          "line": 1821,
          "old_api": null,
          "new_api": "expression_strerror",
          "old_text": null,
          "new_text": "expression_strerror(error)",
          "old_line_content": "            }",
          "new_line_content": "                          line, path, filename, rc->name, key, value, expression_strerror(error), failed_at);",
          "content_same": false
        },
        {
          "line": 1826,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(rc->exec, value)",
          "old_line_content": "                             line, path, filename, rc->name, key, rc->exec, value, value);",
          "new_line_content": "                    if(strcmp(rc->exec, value))",
          "content_same": false
        },
        {
          "line": 1827,
          "old_api": null,
          "new_api": "info",
          "old_text": null,
          "new_text": "info(\"Health configuration at line %zu of file '%s/%s' for alarm '%s' has key '%s' twice, once with value '%s' and later with value '%s'. Using ('%s').\",\n                             line, path, filename, rc->name, key, rc->exec, value, value)",
          "old_line_content": "",
          "new_line_content": "                        info(\"Health configuration at line %zu of file '%s/%s' for alarm '%s' has key '%s' twice, once with value '%s' and later with value '%s'. Using ('%s').\",",
          "content_same": false
        },
        {
          "line": 1836,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(rc->recipient, value)",
          "old_line_content": "                             line, path, filename, rc->name, key, rc->recipient, value, value);",
          "new_line_content": "                    if(strcmp(rc->recipient, value))",
          "content_same": false
        },
        {
          "line": 1837,
          "old_api": null,
          "new_api": "info",
          "old_text": null,
          "new_text": "info(\"Health configuration at line %zu of file '%s/%s' for alarm '%s' has key '%s' twice, once with value '%s' and later with value '%s'. Using ('%s').\",\n                             line, path, filename, rc->name, key, rc->recipient, value, value)",
          "old_line_content": "",
          "new_line_content": "                        info(\"Health configuration at line %zu of file '%s/%s' for alarm '%s' has key '%s' twice, once with value '%s' and later with value '%s'. Using ('%s').\",",
          "content_same": false
        },
        {
          "line": 1846,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(rc->units, value)",
          "old_line_content": "                             line, path, filename, rc->name, key, rc->units, value, value);",
          "new_line_content": "                    if(strcmp(rc->units, value))",
          "content_same": false
        },
        {
          "line": 1847,
          "old_api": null,
          "new_api": "info",
          "old_text": null,
          "new_text": "info(\"Health configuration at line %zu of file '%s/%s' for alarm '%s' has key '%s' twice, once with value '%s' and later with value '%s'. Using ('%s').\",\n                             line, path, filename, rc->name, key, rc->units, value, value)",
          "old_line_content": "",
          "new_line_content": "                        info(\"Health configuration at line %zu of file '%s/%s' for alarm '%s' has key '%s' twice, once with value '%s' and later with value '%s'. Using ('%s').\",",
          "content_same": false
        },
        {
          "line": 1852,
          "old_api": null,
          "new_api": "strdupz",
          "old_text": null,
          "new_text": "strdupz(value)",
          "old_line_content": "            }",
          "new_line_content": "                rc->units = tabs2spaces(strdupz(value));",
          "content_same": false
        },
        {
          "line": 1857,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(rc->info, value)",
          "old_line_content": "                             line, path, filename, rc->name, key, rc->info, value, value);",
          "new_line_content": "                    if(strcmp(rc->info, value))",
          "content_same": false
        },
        {
          "line": 1858,
          "old_api": null,
          "new_api": "info",
          "old_text": null,
          "new_text": "info(\"Health configuration at line %zu of file '%s/%s' for alarm '%s' has key '%s' twice, once with value '%s' and later with value '%s'. Using ('%s').\",\n                             line, path, filename, rc->name, key, rc->info, value, value)",
          "old_line_content": "",
          "new_line_content": "                        info(\"Health configuration at line %zu of file '%s/%s' for alarm '%s' has key '%s' twice, once with value '%s' and later with value '%s'. Using ('%s').\",",
          "content_same": false
        },
        {
          "line": 1863,
          "old_api": null,
          "new_api": "strdupz",
          "old_text": null,
          "new_text": "strdupz(value)",
          "old_line_content": "            }",
          "new_line_content": "                rc->info = tabs2spaces(strdupz(value));",
          "content_same": false
        },
        {
          "line": 1866,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(key, HEALTH_DELAY_KEY)",
          "old_line_content": "            }",
          "new_line_content": "            else if(hash == hash_delay && !strcasecmp(key, HEALTH_DELAY_KEY)) {",
          "content_same": false
        },
        {
          "line": 1867,
          "old_api": null,
          "new_api": "health_parse_delay",
          "old_text": null,
          "new_text": "health_parse_delay(line, path, filename, value, &rc->delay_up_duration, &rc->delay_down_duration, &rc->delay_max_duration, &rc->delay_multiplier)",
          "old_line_content": "            else {",
          "new_line_content": "                health_parse_delay(line, path, filename, value, &rc->delay_up_duration, &rc->delay_down_duration, &rc->delay_max_duration, &rc->delay_multiplier);",
          "content_same": false
        },
        {
          "line": 1870,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"Health configuration at line %zu of file '%s/%s' for alarm '%s' has unknown key '%s'.\",\n                     line, path, filename, rc->name, key)",
          "old_line_content": "            }",
          "new_line_content": "                error(\"Health configuration at line %zu of file '%s/%s' for alarm '%s' has unknown key '%s'.\",",
          "content_same": false
        },
        {
          "line": 1877,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(rt->context, value)",
          "old_line_content": "                             line, path, filename, rt->name, key, rt->context, value, value);",
          "new_line_content": "                    if(strcmp(rt->context, value))",
          "content_same": false
        },
        {
          "line": 1878,
          "old_api": null,
          "new_api": "info",
          "old_text": null,
          "new_text": "info(\"Health configuration at line %zu of file '%s/%s' for template '%s' has key '%s' twice, once with value '%s' and later with value '%s'. Using ('%s').\",\n                             line, path, filename, rt->name, key, rt->context, value, value)",
          "old_line_content": "",
          "new_line_content": "                        info(\"Health configuration at line %zu of file '%s/%s' for template '%s' has key '%s' twice, once with value '%s' and later with value '%s'. Using ('%s').\",",
          "content_same": false
        },
        {
          "line": 1883,
          "old_api": null,
          "new_api": "strdupz",
          "old_text": null,
          "new_text": "strdupz(value)",
          "old_line_content": "            }",
          "new_line_content": "                rt->context = tabs2spaces(strdupz(value));",
          "content_same": false
        },
        {
          "line": 1886,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(key, HEALTH_LOOKUP_KEY)",
          "old_line_content": "                                       &rt->update_every,",
          "new_line_content": "            else if(hash == hash_lookup && !strcasecmp(key, HEALTH_LOOKUP_KEY)) {",
          "content_same": false
        },
        {
          "line": 1887,
          "old_api": null,
          "new_api": "health_parse_db_lookup",
          "old_text": null,
          "new_text": "health_parse_db_lookup(line, path, filename, value, &rt->group, &rt->after, &rt->before,\n                                       &rt->update_every,\n                                       &rt->options, &rt->dimensions)",
          "old_line_content": "                                       &rt->options, &rt->dimensions);",
          "new_line_content": "                health_parse_db_lookup(line, path, filename, value, &rt->group, &rt->after, &rt->before,",
          "content_same": false
        },
        {
          "line": 1892,
          "old_api": null,
          "new_api": "health_parse_duration",
          "old_text": null,
          "new_text": "health_parse_duration(value, &rt->update_every)",
          "old_line_content": "                         line, path, filename, rt->name, key, value);",
          "new_line_content": "                if(!health_parse_duration(value, &rt->update_every))",
          "content_same": false
        },
        {
          "line": 1893,
          "old_api": null,
          "new_api": "info",
          "old_text": null,
          "new_text": "info(\"Health configuration at line %zu of file '%s/%s' for template '%s' at key '%s' cannot parse duration: '%s'.\",\n                         line, path, filename, rt->name, key, value)",
          "old_line_content": "            }",
          "new_line_content": "                    info(\"Health configuration at line %zu of file '%s/%s' for template '%s' at key '%s' cannot parse duration: '%s'.\",",
          "content_same": false
        },
        {
          "line": 1900,
          "old_api": null,
          "new_api": "info",
          "old_text": null,
          "new_text": "info(\"Health configuration at line %zu of file '%s/%s' for template '%s' at key '%s' leaves this string unmatched: '%s'.\",\n                         line, path, filename, rt->name, key, e)",
          "old_line_content": "                }",
          "new_line_content": "                    info(\"Health configuration at line %zu of file '%s/%s' for template '%s' at key '%s' leaves this string unmatched: '%s'.\",",
          "content_same": false
        },
        {
          "line": 1908,
          "old_api": null,
          "new_api": "info",
          "old_text": null,
          "new_text": "info(\"Health configuration at line %zu of file '%s/%s' for template '%s' at key '%s' leaves this string unmatched: '%s'.\",\n                         line, path, filename, rt->name, key, e)",
          "old_line_content": "                }",
          "new_line_content": "                    info(\"Health configuration at line %zu of file '%s/%s' for template '%s' at key '%s' leaves this string unmatched: '%s'.\",",
          "content_same": false
        },
        {
          "line": 1912,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(key, HEALTH_CALC_KEY)",
          "old_line_content": "                int error = 0;",
          "new_line_content": "            else if(hash == hash_calc && !strcasecmp(key, HEALTH_CALC_KEY)) {",
          "content_same": false
        },
        {
          "line": 1917,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"Health configuration at line %zu of file '%s/%s' for template '%s' at key '%s' has unparse-able expression '%s': %s at '%s'\",\n                          line, path, filename, rt->name, key, value, expression_strerror(error), failed_at)",
          "old_line_content": "                }",
          "new_line_content": "                    error(\"Health configuration at line %zu of file '%s/%s' for template '%s' at key '%s' has unparse-able expression '%s': %s at '%s'\",",
          "content_same": false
        },
        {
          "line": 1918,
          "old_api": null,
          "new_api": "expression_strerror",
          "old_text": null,
          "new_text": "expression_strerror(error)",
          "old_line_content": "            }",
          "new_line_content": "                          line, path, filename, rt->name, key, value, expression_strerror(error), failed_at);",
          "content_same": false
        },
        {
          "line": 1921,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(key, HEALTH_WARN_KEY)",
          "old_line_content": "                int error = 0;",
          "new_line_content": "            else if(hash == hash_warn && !strcasecmp(key, HEALTH_WARN_KEY)) {",
          "content_same": false
        },
        {
          "line": 1926,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"Health configuration at line %zu of file '%s/%s' for template '%s' at key '%s' has unparse-able expression '%s': %s at '%s'\",\n                          line, path, filename, rt->name, key, value, expression_strerror(error), failed_at)",
          "old_line_content": "                }",
          "new_line_content": "                    error(\"Health configuration at line %zu of file '%s/%s' for template '%s' at key '%s' has unparse-able expression '%s': %s at '%s'\",",
          "content_same": false
        },
        {
          "line": 1927,
          "old_api": null,
          "new_api": "expression_strerror",
          "old_text": null,
          "new_text": "expression_strerror(error)",
          "old_line_content": "            }",
          "new_line_content": "                          line, path, filename, rt->name, key, value, expression_strerror(error), failed_at);",
          "content_same": false
        },
        {
          "line": 1930,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(key, HEALTH_CRIT_KEY)",
          "old_line_content": "                int error = 0;",
          "new_line_content": "            else if(hash == hash_crit && !strcasecmp(key, HEALTH_CRIT_KEY)) {",
          "content_same": false
        },
        {
          "line": 1935,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"Health configuration at line %zu of file '%s/%s' for template '%s' at key '%s' has unparse-able expression '%s': %s at '%s'\",\n                          line, path, filename, rt->name, key, value, expression_strerror(error), failed_at)",
          "old_line_content": "                }",
          "new_line_content": "                    error(\"Health configuration at line %zu of file '%s/%s' for template '%s' at key '%s' has unparse-able expression '%s': %s at '%s'\",",
          "content_same": false
        },
        {
          "line": 1936,
          "old_api": null,
          "new_api": "expression_strerror",
          "old_text": null,
          "new_text": "expression_strerror(error)",
          "old_line_content": "            }",
          "new_line_content": "                          line, path, filename, rt->name, key, value, expression_strerror(error), failed_at);",
          "content_same": false
        },
        {
          "line": 1941,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(rt->exec, value)",
          "old_line_content": "                             line, path, filename, rt->name, key, rt->exec, value, value);",
          "new_line_content": "                    if(strcmp(rt->exec, value))",
          "content_same": false
        },
        {
          "line": 1942,
          "old_api": null,
          "new_api": "info",
          "old_text": null,
          "new_text": "info(\"Health configuration at line %zu of file '%s/%s' for template '%s' has key '%s' twice, once with value '%s' and later with value '%s'. Using ('%s').\",\n                             line, path, filename, rt->name, key, rt->exec, value, value)",
          "old_line_content": "",
          "new_line_content": "                        info(\"Health configuration at line %zu of file '%s/%s' for template '%s' has key '%s' twice, once with value '%s' and later with value '%s'. Using ('%s').\",",
          "content_same": false
        },
        {
          "line": 1951,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(rt->recipient, value)",
          "old_line_content": "                             line, path, filename, rt->name, key, rt->recipient, value, value);",
          "new_line_content": "                    if(strcmp(rt->recipient, value))",
          "content_same": false
        },
        {
          "line": 1952,
          "old_api": null,
          "new_api": "info",
          "old_text": null,
          "new_text": "info(\"Health configuration at line %zu of file '%s/%s' for template '%s' has key '%s' twice, once with value '%s' and later with value '%s'. Using ('%s').\",\n                             line, path, filename, rt->name, key, rt->recipient, value, value)",
          "old_line_content": "",
          "new_line_content": "                        info(\"Health configuration at line %zu of file '%s/%s' for template '%s' has key '%s' twice, once with value '%s' and later with value '%s'. Using ('%s').\",",
          "content_same": false
        },
        {
          "line": 1961,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(rt->units, value)",
          "old_line_content": "                             line, path, filename, rt->name, key, rt->units, value, value);",
          "new_line_content": "                    if(strcmp(rt->units, value))",
          "content_same": false
        },
        {
          "line": 1962,
          "old_api": null,
          "new_api": "info",
          "old_text": null,
          "new_text": "info(\"Health configuration at line %zu of file '%s/%s' for template '%s' has key '%s' twice, once with value '%s' and later with value '%s'. Using ('%s').\",\n                             line, path, filename, rt->name, key, rt->units, value, value)",
          "old_line_content": "",
          "new_line_content": "                        info(\"Health configuration at line %zu of file '%s/%s' for template '%s' has key '%s' twice, once with value '%s' and later with value '%s'. Using ('%s').\",",
          "content_same": false
        },
        {
          "line": 1967,
          "old_api": null,
          "new_api": "strdupz",
          "old_text": null,
          "new_text": "strdupz(value)",
          "old_line_content": "            }",
          "new_line_content": "                rt->units = tabs2spaces(strdupz(value));",
          "content_same": false
        },
        {
          "line": 1972,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(rt->info, value)",
          "old_line_content": "                             line, path, filename, rt->name, key, rt->info, value, value);",
          "new_line_content": "                    if(strcmp(rt->info, value))",
          "content_same": false
        },
        {
          "line": 1973,
          "old_api": null,
          "new_api": "info",
          "old_text": null,
          "new_text": "info(\"Health configuration at line %zu of file '%s/%s' for template '%s' has key '%s' twice, once with value '%s' and later with value '%s'. Using ('%s').\",\n                             line, path, filename, rt->name, key, rt->info, value, value)",
          "old_line_content": "",
          "new_line_content": "                        info(\"Health configuration at line %zu of file '%s/%s' for template '%s' has key '%s' twice, once with value '%s' and later with value '%s'. Using ('%s').\",",
          "content_same": false
        },
        {
          "line": 1978,
          "old_api": null,
          "new_api": "strdupz",
          "old_text": null,
          "new_text": "strdupz(value)",
          "old_line_content": "            }",
          "new_line_content": "                rt->info = tabs2spaces(strdupz(value));",
          "content_same": false
        },
        {
          "line": 1981,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(key, HEALTH_DELAY_KEY)",
          "old_line_content": "            }",
          "new_line_content": "            else if(hash == hash_delay && !strcasecmp(key, HEALTH_DELAY_KEY)) {",
          "content_same": false
        },
        {
          "line": 1982,
          "old_api": null,
          "new_api": "health_parse_delay",
          "old_text": null,
          "new_text": "health_parse_delay(line, path, filename, value, &rt->delay_up_duration, &rt->delay_down_duration, &rt->delay_max_duration, &rt->delay_multiplier)",
          "old_line_content": "            else {",
          "new_line_content": "                health_parse_delay(line, path, filename, value, &rt->delay_up_duration, &rt->delay_down_duration, &rt->delay_max_duration, &rt->delay_multiplier);",
          "content_same": false
        },
        {
          "line": 1985,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"Health configuration at line %zu of file '%s/%s' for template '%s' has unknown key '%s'.\",\n                      line, path, filename, rt->name, key)",
          "old_line_content": "            }",
          "new_line_content": "                error(\"Health configuration at line %zu of file '%s/%s' for template '%s' has unknown key '%s'.\",",
          "content_same": false
        },
        {
          "line": 1990,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"Health configuration at line %zu of file '%s/%s' has unknown key '%s'. Expected either '\" HEALTH_ALARM_KEY \"' or '\" HEALTH_TEMPLATE_KEY \"'.\",\n                  line, path, filename, key)",
          "old_line_content": "        }",
          "new_line_content": "            error(\"Health configuration at line %zu of file '%s/%s' has unknown key '%s'. Expected either '\" HEALTH_ALARM_KEY \"' or '\" HEALTH_TEMPLATE_KEY \"'.\",",
          "content_same": false
        },
        {
          "line": 1995,
          "old_api": null,
          "new_api": "rrdcalc_add_alarm_from_config",
          "old_text": null,
          "new_text": "rrdcalc_add_alarm_from_config(&localhost, rc)",
          "old_line_content": "",
          "new_line_content": "    if(rc && !rrdcalc_add_alarm_from_config(&localhost, rc))",
          "content_same": false
        },
        {
          "line": 1998,
          "old_api": null,
          "new_api": "rrdcalctemplate_add_template_from_config",
          "old_text": null,
          "new_text": "rrdcalctemplate_add_template_from_config(&localhost, rt)",
          "old_line_content": "",
          "new_line_content": "    if(rt && !rrdcalctemplate_add_template_from_config(&localhost, rt))",
          "content_same": false
        },
        {
          "line": 2001,
          "old_api": null,
          "new_api": "fclose",
          "old_text": null,
          "new_text": "fclose(fp)",
          "old_line_content": "}",
          "new_line_content": "    fclose(fp);",
          "content_same": false
        },
        {
          "line": 2012,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"Health configuration cannot open directory '%s'.\", path)",
          "old_line_content": "    }",
          "new_line_content": "        error(\"Health configuration cannot open directory '%s'.\", path);",
          "content_same": false
        },
        {
          "line": 2017,
          "old_api": null,
          "new_api": "readdir",
          "old_text": null,
          "new_text": "readdir(dir)",
          "old_line_content": "",
          "new_line_content": "    while ((de = readdir(dir))) {",
          "content_same": false
        },
        {
          "line": 2018,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(de->d_name)",
          "old_line_content": "        if(de->d_type == DT_DIR",
          "new_line_content": "        size_t len = strlen(de->d_name);",
          "content_same": false
        },
        {
          "line": 2025,
          "old_api": null,
          "new_api": "debug",
          "old_text": null,
          "new_text": "debug(D_HEALTH, \"Ignoring directory '%s'\", de->d_name)",
          "old_line_content": "        }",
          "new_line_content": "            debug(D_HEALTH, \"Ignoring directory '%s'\", de->d_name);",
          "content_same": false
        },
        {
          "line": 2034,
          "old_api": null,
          "new_api": "health_readdir",
          "old_text": null,
          "new_text": "health_readdir(s)",
          "old_line_content": "            continue;",
          "new_line_content": "            health_readdir(s);",
          "content_same": false
        },
        {
          "line": 2035,
          "old_api": null,
          "new_api": "freez",
          "old_text": null,
          "new_text": "freez(s)",
          "old_line_content": "        }",
          "new_line_content": "            freez(s);",
          "content_same": false
        },
        {
          "line": 2040,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(&de->d_name[len - 5], \".conf\")",
          "old_line_content": "        }",
          "new_line_content": "                len > 5 && !strcmp(&de->d_name[len - 5], \".conf\")) {",
          "content_same": false
        },
        {
          "line": 2041,
          "old_api": null,
          "new_api": "health_readfile",
          "old_text": null,
          "new_text": "health_readfile(path, de->d_name)",
          "old_line_content": "",
          "new_line_content": "            health_readfile(path, de->d_name);",
          "content_same": false
        },
        {
          "line": 2044,
          "old_api": null,
          "new_api": "debug",
          "old_text": null,
          "new_text": "debug(D_HEALTH, \"Ignoring file '%s'\", de->d_name)",
          "old_line_content": "",
          "new_line_content": "        else debug(D_HEALTH, \"Ignoring file '%s'\", de->d_name);",
          "content_same": false
        },
        {
          "line": 2047,
          "old_api": null,
          "new_api": "closedir",
          "old_text": null,
          "new_text": "closedir(dir)",
          "old_line_content": "",
          "new_line_content": "    closedir(dir);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 2050,
          "old_api": "config_get",
          "new_api": null,
          "old_text": "config_get(\"global\", \"config directory\", CONFIG_DIR)",
          "new_text": null,
          "old_line_content": "    snprintfz(buffer, FILENAME_MAX, \"%s/health.d\", config_get(\"global\", \"config directory\", CONFIG_DIR));",
          "new_line_content": "static inline char *health_config_dir(void) {",
          "content_same": false
        },
        {
          "line": 2051,
          "old_api": "config_get",
          "new_api": null,
          "old_text": "config_get(\"health\", \"health configuration directory\", buffer)",
          "new_text": null,
          "old_line_content": "    return config_get(\"health\", \"health configuration directory\", buffer);",
          "new_line_content": "    char buffer[FILENAME_MAX + 1];",
          "content_same": false
        },
        {
          "line": 2055,
          "old_api": "debug",
          "new_api": null,
          "old_text": "debug(D_HEALTH, \"Health configuration initializing\")",
          "new_text": null,
          "old_line_content": "    debug(D_HEALTH, \"Health configuration initializing\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2058,
          "old_api": "debug",
          "new_api": null,
          "old_text": "debug(D_HEALTH, \"Health is disabled.\")",
          "new_text": null,
          "old_line_content": "        debug(D_HEALTH, \"Health is disabled.\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2062,
          "old_api": "config_get",
          "new_api": null,
          "old_text": "config_get(\"health\", \"health db directory\", VARLIB_DIR \"/health\")",
          "new_text": null,
          "old_line_content": "    char *pathname = config_get(\"health\", \"health db directory\", VARLIB_DIR \"/health\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2063,
          "old_api": "mkdir",
          "new_api": null,
          "old_text": "mkdir(pathname, 0770)",
          "new_text": null,
          "old_line_content": "    if(mkdir(pathname, 0770) == -1 && errno != EEXIST)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2067,
          "old_api": "snprintfz",
          "new_api": null,
          "old_text": "snprintfz(filename, FILENAME_MAX, \"%s/health-log.db\", pathname)",
          "new_text": null,
          "old_line_content": "    snprintfz(filename, FILENAME_MAX, \"%s/health-log.db\", pathname);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2068,
          "old_api": "config_get",
          "new_api": null,
          "old_text": "config_get(\"health\", \"health db file\", filename)",
          "new_text": null,
          "old_line_content": "    health.log_filename = config_get(\"health\", \"health db file\", filename);",
          "new_line_content": "    char filename[FILENAME_MAX + 1];",
          "content_same": false
        },
        {
          "line": 2071,
          "old_api": "health_alarm_log_open",
          "new_api": null,
          "old_text": "health_alarm_log_open()",
          "new_text": null,
          "old_line_content": "    health_alarm_log_open();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2077,
          "old_api": "config_get",
          "new_api": null,
          "old_text": "config_get(\"global\", \"plugins directory\", PLUGINS_DIR)",
          "new_text": null,
          "old_line_content": "        snprintfz(buffer, FILENAME_MAX, \"%s/alarm-notify.sh\", config_get(\"global\", \"plugins directory\", PLUGINS_DIR));",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 2078,
          "old_api": "config_get",
          "new_api": null,
          "old_text": "config_get(\"health\", \"script to execute on alarm\", buffer)",
          "new_text": null,
          "old_line_content": "        health.health_default_exec = config_get(\"health\", \"script to execute on alarm\", buffer);",
          "new_line_content": "        char buffer[FILENAME_MAX + 1];",
          "content_same": false
        },
        {
          "line": 2081,
          "old_api": "config_get_number",
          "new_api": null,
          "old_text": "config_get_number(\"health\", \"in memory max health log entries\", (long)localhost.health_log.max)",
          "new_text": null,
          "old_line_content": "    long n = config_get_number(\"health\", \"in memory max health log entries\", (long)localhost.health_log.max);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2084,
          "old_api": "config_set_number",
          "new_api": null,
          "old_text": "config_set_number(\"health\", \"in memory max health log entries\", (long)localhost.health_log.max)",
          "new_text": null,
          "old_line_content": "        config_set_number(\"health\", \"in memory max health log entries\", (long)localhost.health_log.max);",
          "new_line_content": "    if(n < 10) {",
          "content_same": false
        },
        {
          "line": 2088,
          "old_api": "rrdhost_rwlock",
          "new_api": null,
          "old_text": "rrdhost_rwlock(&localhost)",
          "new_text": null,
          "old_line_content": "    rrdhost_rwlock(&localhost);",
          "new_line_content": "    else localhost.health_log.max = (unsigned int)n;",
          "content_same": false
        },
        {
          "line": 2089,
          "old_api": "health_readdir",
          "new_api": null,
          "old_text": "health_readdir(path)",
          "new_text": null,
          "old_line_content": "    health_readdir(path);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2098,
          "old_api": "buffer_sprintf",
          "new_api": null,
          "old_text": "buffer_sprintf(wb, \"%s\\\"%s\\\":\\\"%s\\\"%s\", prefix, label, value, suffix)",
          "new_text": null,
          "old_line_content": "        buffer_sprintf(wb, \"%s\\\"%s\\\":\\\"%s\\\"%s\", prefix, label, value, suffix);",
          "new_line_content": "static inline void health_string2json(BUFFER *wb, const char *prefix, const char *label, const char *value, const char *suffix) {",
          "content_same": false
        },
        {
          "line": 2104,
          "old_api": "buffer_sprintf",
          "new_api": null,
          "old_text": "buffer_sprintf(wb, \"\\n\\t{\\n\"\n                           \"\\t\\t\\\"hostname\\\": \\\"%s\\\",\\n\"\n                           \"\\t\\t\\\"unique_id\\\": %u,\\n\"\n                           \"\\t\\t\\\"alarm_id\\\": %u,\\n\"\n                           \"\\t\\t\\\"alarm_event_id\\\": %u,\\n\"\n                           \"\\t\\t\\\"name\\\": \\\"%s\\\",\\n\"\n                           \"\\t\\t\\\"chart\\\": \\\"%s\\\",\\n\"\n                           \"\\t\\t\\\"family\\\": \\\"%s\\\",\\n\"\n                           \"\\t\\t\\\"processed\\\": %s,\\n\"\n                           \"\\t\\t\\\"updated\\\": %s,\\n\"\n                           \"\\t\\t\\\"exec_run\\\": %lu,\\n\"\n                           \"\\t\\t\\\"exec_failed\\\": %s,\\n\"\n                           \"\\t\\t\\\"exec\\\": \\\"%s\\\",\\n\"\n                           \"\\t\\t\\\"recipient\\\": \\\"%s\\\",\\n\"\n                           \"\\t\\t\\\"exec_code\\\": %d,\\n\"\n                           \"\\t\\t\\\"source\\\": \\\"%s\\\",\\n\"\n                           \"\\t\\t\\\"units\\\": \\\"%s\\\",\\n\"\n                           \"\\t\\t\\\"info\\\": \\\"%s\\\",\\n\"\n                           \"\\t\\t\\\"when\\\": %lu,\\n\"\n                           \"\\t\\t\\\"duration\\\": %lu,\\n\"\n                           \"\\t\\t\\\"non_clear_duration\\\": %lu,\\n\"\n                           \"\\t\\t\\\"status\\\": \\\"%s\\\",\\n\"\n                           \"\\t\\t\\\"old_status\\\": \\\"%s\\\",\\n\"\n                           \"\\t\\t\\\"delay\\\": %d,\\n\"\n                           \"\\t\\t\\\"delay_up_to_timestamp\\\": %lu,\\n\"\n                           \"\\t\\t\\\"updated_by_id\\\": %u,\\n\"\n                           \"\\t\\t\\\"updates_id\\\": %u,\\n\",\n                   host->hostname,\n                   ae->unique_id,\n                   ae->alarm_id,\n                   ae->alarm_event_id,\n                   ae->name,\n                   ae->chart,\n                   ae->family,\n                   (ae->flags & HEALTH_ENTRY_FLAG_PROCESSED)?\"true\":\"false\",\n                   (ae->flags & HEALTH_ENTRY_FLAG_UPDATED)?\"true\":\"false\",\n                   (unsigned long)ae->exec_run_timestamp,\n                   (ae->flags & HEALTH_ENTRY_FLAG_EXEC_FAILED)?\"true\":\"false\",\n                   ae->exec?ae->exec:health.health_default_exec,\n                   ae->recipient?ae->recipient:health.health_default_recipient,\n                   ae->exec_code,\n                   ae->source,\n                   ae->units?ae->units:\"\",\n                   ae->info?ae->info:\"\",\n                   (unsigned long)ae->when,\n                   (unsigned long)ae->duration,\n                   (unsigned long)ae->non_clear_duration,\n                   rrdcalc_status2string(ae->new_status),\n                   rrdcalc_status2string(ae->old_status),\n                   ae->delay,\n                   (unsigned long)ae->delay_up_to_timestamp,\n                   ae->updated_by_id,\n                   ae->updates_id\n    )",
          "new_text": null,
          "old_line_content": "    buffer_sprintf(wb, \"\\n\\t{\\n\"",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2151,
          "old_api": "rrdcalc_status2string",
          "new_api": null,
          "old_text": "rrdcalc_status2string(ae->new_status)",
          "new_text": null,
          "old_line_content": "                   rrdcalc_status2string(ae->new_status),",
          "new_line_content": "                   (unsigned long)ae->duration,",
          "content_same": false
        },
        {
          "line": 2152,
          "old_api": "rrdcalc_status2string",
          "new_api": null,
          "old_text": "rrdcalc_status2string(ae->old_status)",
          "new_text": null,
          "old_line_content": "                   rrdcalc_status2string(ae->old_status),",
          "new_line_content": "                   (unsigned long)ae->non_clear_duration,",
          "content_same": false
        },
        {
          "line": 2159,
          "old_api": "buffer_strcat",
          "new_api": null,
          "old_text": "buffer_strcat(wb, \"\\t\\t\\\"value\\\":\")",
          "new_text": null,
          "old_line_content": "    buffer_strcat(wb, \"\\t\\t\\\"value\\\":\");",
          "new_line_content": "    );",
          "content_same": false
        },
        {
          "line": 2160,
          "old_api": "buffer_rrd_value",
          "new_api": null,
          "old_text": "buffer_rrd_value(wb, ae->new_value)",
          "new_text": null,
          "old_line_content": "    buffer_rrd_value(wb, ae->new_value);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2164,
          "old_api": "buffer_rrd_value",
          "new_api": null,
          "old_text": "buffer_rrd_value(wb, ae->old_value)",
          "new_text": null,
          "old_line_content": "    buffer_rrd_value(wb, ae->old_value);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2171,
          "old_api": "pthread_rwlock_rdlock",
          "new_api": null,
          "old_text": "pthread_rwlock_rdlock(&host->health_log.alarm_log_rwlock)",
          "new_text": null,
          "old_line_content": "    pthread_rwlock_rdlock(&host->health_log.alarm_log_rwlock);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2180,
          "old_api": "buffer_strcat",
          "new_api": null,
          "old_text": "buffer_strcat(wb, \",\")",
          "new_text": null,
          "old_line_content": "            if(likely(count)) buffer_strcat(wb, \",\");",
          "new_line_content": "    for(ae = host->health_log.alarms; ae && count < max ; count++, ae = ae->next) {",
          "content_same": false
        },
        {
          "line": 2181,
          "old_api": "health_alarm_entry2json_nolock",
          "new_api": null,
          "old_text": "health_alarm_entry2json_nolock(wb, ae, host)",
          "new_text": null,
          "old_line_content": "            health_alarm_entry2json_nolock(wb, ae, host);",
          "new_line_content": "        if(ae->unique_id > after) {",
          "content_same": false
        },
        {
          "line": 2185,
          "old_api": "buffer_strcat",
          "new_api": null,
          "old_text": "buffer_strcat(wb, \"\\n]\\n\")",
          "new_text": null,
          "old_line_content": "    buffer_strcat(wb, \"\\n]\\n\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2191,
          "old_api": "buffer_sprintf",
          "new_api": null,
          "old_text": "buffer_sprintf(wb,\n           \"\\t\\t\\\"%s.%s\\\": {\\n\"\n                   \"\\t\\t\\t\\\"id\\\": %lu,\\n\"\n                   \"\\t\\t\\t\\\"name\\\": \\\"%s\\\",\\n\"\n                   \"\\t\\t\\t\\\"chart\\\": \\\"%s\\\",\\n\"\n                   \"\\t\\t\\t\\\"family\\\": \\\"%s\\\",\\n\"\n                   \"\\t\\t\\t\\\"active\\\": %s,\\n\"\n                   \"\\t\\t\\t\\\"exec\\\": \\\"%s\\\",\\n\"\n                   \"\\t\\t\\t\\\"recipient\\\": \\\"%s\\\",\\n\"\n                   \"\\t\\t\\t\\\"source\\\": \\\"%s\\\",\\n\"\n                   \"\\t\\t\\t\\\"units\\\": \\\"%s\\\",\\n\"\n                   \"\\t\\t\\t\\\"info\\\": \\\"%s\\\",\\n\"\n\t\t\t\t   \"\\t\\t\\t\\\"status\\\": \\\"%s\\\",\\n\"\n                   \"\\t\\t\\t\\\"last_status_change\\\": %lu,\\n\"\n                   \"\\t\\t\\t\\\"last_updated\\\": %lu,\\n\"\n                   \"\\t\\t\\t\\\"next_update\\\": %lu,\\n\"\n                   \"\\t\\t\\t\\\"update_every\\\": %d,\\n\"\n                   \"\\t\\t\\t\\\"delay_up_duration\\\": %d,\\n\"\n                   \"\\t\\t\\t\\\"delay_down_duration\\\": %d,\\n\"\n                   \"\\t\\t\\t\\\"delay_max_duration\\\": %d,\\n\"\n                   \"\\t\\t\\t\\\"delay_multiplier\\\": %f,\\n\"\n                   \"\\t\\t\\t\\\"delay\\\": %d,\\n\"\n                   \"\\t\\t\\t\\\"delay_up_to_timestamp\\\": %lu,\\n\"\n            , rc->chart, rc->name\n            , (unsigned long)rc->id\n            , rc->name\n            , rc->chart\n            , (rc->rrdset && rc->rrdset->family)?rc->rrdset->family:\"\"\n            , (rc->rrdset)?\"true\":\"false\"\n            , rc->exec?rc->exec:health.health_default_exec\n            , rc->recipient?rc->recipient:health.health_default_recipient\n            , rc->source\n            , rc->units?rc->units:\"\"\n            , rc->info?rc->info:\"\"\n            , rrdcalc_status2string(rc->status)\n            , (unsigned long)rc->last_status_change\n            , (unsigned long)rc->last_updated\n            , (unsigned long)rc->next_update\n            , rc->update_every\n            , rc->delay_up_duration\n            , rc->delay_down_duration\n            , rc->delay_max_duration\n            , rc->delay_multiplier\n            , rc->delay_last\n            , (unsigned long)rc->delay_up_to_timestamp\n    )",
          "new_text": null,
          "old_line_content": "    buffer_sprintf(wb,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2225,
          "old_api": "rrdcalc_status2string",
          "new_api": null,
          "old_text": "rrdcalc_status2string(rc->status)",
          "new_text": null,
          "old_line_content": "            , rrdcalc_status2string(rc->status)",
          "new_line_content": "            , rc->units?rc->units:\"\"",
          "content_same": false
        },
        {
          "line": 2238,
          "old_api": "RRDCALC_HAS_DB_LOOKUP",
          "new_api": null,
          "old_text": "RRDCALC_HAS_DB_LOOKUP(rc)",
          "new_text": null,
          "old_line_content": "    if(RRDCALC_HAS_DB_LOOKUP(rc)) {",
          "new_line_content": "    );",
          "content_same": false
        },
        {
          "line": 2251,
          "old_api": "group_method2string",
          "new_api": null,
          "old_text": "group_method2string(rc->group)",
          "new_text": null,
          "old_line_content": "                       group_method2string(rc->group),",
          "new_line_content": "                       (unsigned long) rc->db_after,",
          "content_same": false
        },
        {
          "line": 2255,
          "old_api": "buffer_data_options2string",
          "new_api": null,
          "old_text": "buffer_data_options2string(wb, rc->options)",
          "new_text": null,
          "old_line_content": "        buffer_data_options2string(wb, rc->options);",
          "new_line_content": "                       rc->before",
          "content_same": false
        },
        {
          "line": 2256,
          "old_api": "buffer_strcat",
          "new_api": null,
          "old_text": "buffer_strcat(wb, \"\\\",\\n\")",
          "new_text": null,
          "old_line_content": "        buffer_strcat(wb, \"\\\",\\n\");",
          "new_line_content": "        );",
          "content_same": false
        },
        {
          "line": 2260,
          "old_api": "health_string2json",
          "new_api": null,
          "old_text": "health_string2json(wb, \"\\t\\t\\t\", \"calc\", rc->calculation->source, \",\\n\")",
          "new_text": null,
          "old_line_content": "        health_string2json(wb, \"\\t\\t\\t\", \"calc\", rc->calculation->source, \",\\n\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2261,
          "old_api": "health_string2json",
          "new_api": null,
          "old_text": "health_string2json(wb, \"\\t\\t\\t\", \"calc_parsed\", rc->calculation->parsed_as, \",\\n\")",
          "new_text": null,
          "old_line_content": "        health_string2json(wb, \"\\t\\t\\t\", \"calc_parsed\", rc->calculation->parsed_as, \",\\n\");",
          "new_line_content": "    if(rc->calculation) {",
          "content_same": false
        },
        {
          "line": 2265,
          "old_api": "health_string2json",
          "new_api": null,
          "old_text": "health_string2json(wb, \"\\t\\t\\t\", \"warn\", rc->warning->source, \",\\n\")",
          "new_text": null,
          "old_line_content": "        health_string2json(wb, \"\\t\\t\\t\", \"warn\", rc->warning->source, \",\\n\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2266,
          "old_api": "health_string2json",
          "new_api": null,
          "old_text": "health_string2json(wb, \"\\t\\t\\t\", \"warn_parsed\", rc->warning->parsed_as, \",\\n\")",
          "new_text": null,
          "old_line_content": "        health_string2json(wb, \"\\t\\t\\t\", \"warn_parsed\", rc->warning->parsed_as, \",\\n\");",
          "new_line_content": "    if(rc->warning) {",
          "content_same": false
        },
        {
          "line": 2270,
          "old_api": "health_string2json",
          "new_api": null,
          "old_text": "health_string2json(wb, \"\\t\\t\\t\", \"crit\", rc->critical->source, \",\\n\")",
          "new_text": null,
          "old_line_content": "        health_string2json(wb, \"\\t\\t\\t\", \"crit\", rc->critical->source, \",\\n\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2271,
          "old_api": "health_string2json",
          "new_api": null,
          "old_text": "health_string2json(wb, \"\\t\\t\\t\", \"crit_parsed\", rc->critical->parsed_as, \",\\n\")",
          "new_text": null,
          "old_line_content": "        health_string2json(wb, \"\\t\\t\\t\", \"crit_parsed\", rc->critical->parsed_as, \",\\n\");",
          "new_line_content": "    if(rc->critical) {",
          "content_same": false
        },
        {
          "line": 2274,
          "old_api": "buffer_strcat",
          "new_api": null,
          "old_text": "buffer_strcat(wb, \"\\t\\t\\t\\\"green\\\":\")",
          "new_text": null,
          "old_line_content": "    buffer_strcat(wb, \"\\t\\t\\t\\\"green\\\":\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2275,
          "old_api": "buffer_rrd_value",
          "new_api": null,
          "old_text": "buffer_rrd_value(wb, rc->green)",
          "new_text": null,
          "old_line_content": "    buffer_rrd_value(wb, rc->green);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2279,
          "old_api": "buffer_rrd_value",
          "new_api": null,
          "old_text": "buffer_rrd_value(wb, rc->red)",
          "new_text": null,
          "old_line_content": "    buffer_rrd_value(wb, rc->red);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2283,
          "old_api": "buffer_rrd_value",
          "new_api": null,
          "old_text": "buffer_rrd_value(wb, rc->value)",
          "new_text": null,
          "old_line_content": "    buffer_rrd_value(wb, rc->value);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2296,
          "old_api": "rrdhost_rdlock",
          "new_api": null,
          "old_text": "rrdhost_rdlock(&localhost)",
          "new_text": null,
          "old_line_content": "    rrdhost_rdlock(&localhost);",
          "new_line_content": "    int i;",
          "content_same": false
        },
        {
          "line": 2297,
          "old_api": "buffer_sprintf",
          "new_api": null,
          "old_text": "buffer_sprintf(wb, \"{\\n\\t\\\"hostname\\\": \\\"%s\\\",\"\n                        \"\\n\\t\\\"latest_alarm_log_unique_id\\\": %u,\"\n                        \"\\n\\t\\\"status\\\": %s,\"\n                        \"\\n\\t\\\"now\\\": %lu,\"\n                        \"\\n\\t\\\"alarms\\\": {\\n\",\n                        host->hostname,\n                        (host->health_log.next_log_id > 0)?(host->health_log.next_log_id - 1):0,\n                        health_enabled?\"true\":\"false\",\n                        (unsigned long)time(NULL))",
          "new_text": null,
          "old_line_content": "    buffer_sprintf(wb, \"{\\n\\t\\\"hostname\\\": \\\"%s\\\",\"",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 251,
          "old_api": "freez",
          "new_api": null,
          "old_text": "freez(ae->chart)",
          "new_text": null,
          "old_line_content": "            if(unlikely(ae->chart)) freez(ae->chart);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 255,
          "old_api": "strdupz",
          "new_api": null,
          "old_text": "strdupz(pointers[15])",
          "new_text": null,
          "old_line_content": "            ae->family = strdupz(pointers[15]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2305,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "                        (unsigned long)time(NULL));",
          "new_line_content": "                        (host->health_log.next_log_id > 0)?(host->health_log.next_log_id - 1):0,",
          "content_same": false
        },
        {
          "line": 258,
          "old_api": "strdupz",
          "new_api": null,
          "old_text": "strdupz(pointers[16])",
          "new_text": null,
          "old_line_content": "            ae->exec = strdupz(pointers[16]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2309,
          "old_api": "unlikely",
          "new_api": null,
          "old_text": "unlikely(!rc->rrdset || !rc->rrdset->last_collected_time.tv_sec)",
          "new_text": null,
          "old_line_content": "        if(unlikely(!rc->rrdset || !rc->rrdset->last_collected_time.tv_sec))",
          "new_line_content": "    RRDCALC *rc;",
          "content_same": false
        },
        {
          "line": 262,
          "old_api": "strdupz",
          "new_api": null,
          "old_text": "strdupz(pointers[17])",
          "new_text": null,
          "old_line_content": "            ae->recipient = strdupz(pointers[17]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2312,
          "old_api": "likely",
          "new_api": null,
          "old_text": "likely(!all && !(rc->status == RRDCALC_STATUS_WARNING || rc->status == RRDCALC_STATUS_CRITICAL))",
          "new_text": null,
          "old_line_content": "        if(likely(!all && !(rc->status == RRDCALC_STATUS_WARNING || rc->status == RRDCALC_STATUS_CRITICAL)))",
          "new_line_content": "            continue;",
          "content_same": false
        },
        {
          "line": 266,
          "old_api": "strdupz",
          "new_api": null,
          "old_text": "strdupz(pointers[18])",
          "new_text": null,
          "old_line_content": "            ae->source = strdupz(pointers[18]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2315,
          "old_api": "buffer_strcat",
          "new_api": null,
          "old_text": "buffer_strcat(wb, \",\\n\")",
          "new_text": null,
          "old_line_content": "        if(likely(i)) buffer_strcat(wb, \",\\n\");",
          "new_line_content": "            continue;",
          "content_same": false
        },
        {
          "line": 2316,
          "old_api": "health_rrdcalc2json_nolock",
          "new_api": null,
          "old_text": "health_rrdcalc2json_nolock(wb, rc)",
          "new_text": null,
          "old_line_content": "        health_rrdcalc2json_nolock(wb, rc);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 270,
          "old_api": "strdupz",
          "new_api": null,
          "old_text": "strdupz(pointers[19])",
          "new_text": null,
          "old_line_content": "            ae->units = strdupz(pointers[19]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 274,
          "old_api": "strdupz",
          "new_api": null,
          "old_text": "strdupz(pointers[20])",
          "new_text": null,
          "old_line_content": "            ae->info = strdupz(pointers[20]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2325,
          "old_api": "buffer_strcat",
          "new_api": null,
          "old_text": "buffer_strcat(wb, \"\\n\\t}\\n}\\n\")",
          "new_text": null,
          "old_line_content": "    buffer_strcat(wb, \"\\n\\t}\\n}\\n\");",
          "new_line_content": "//        health_rrdcalctemplate2json_nolock(wb, rt);",
          "content_same": false
        },
        {
          "line": 278,
          "old_api": "atoi",
          "new_api": null,
          "old_text": "atoi(pointers[22])",
          "new_text": null,
          "old_line_content": "            ae->new_status  = atoi(pointers[22]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2326,
          "old_api": "rrdhost_unlock",
          "new_api": null,
          "old_text": "rrdhost_unlock(&localhost)",
          "new_text": null,
          "old_line_content": "    rrdhost_unlock(&localhost);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 283,
          "old_api": "strtold",
          "new_api": null,
          "old_text": "strtold(pointers[26], NULL)",
          "new_text": null,
          "old_line_content": "            ae->old_value   = strtold(pointers[26], NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 286,
          "old_api": "unlikely",
          "new_api": null,
          "old_text": "unlikely(*pointers[0] == 'A')",
          "new_text": null,
          "old_line_content": "            if(unlikely(*pointers[0] == 'A')) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2335,
          "old_api": "rrdcalctemplate_free",
          "new_api": null,
          "old_text": "rrdcalctemplate_free(host, host->templates)",
          "new_text": null,
          "old_line_content": "        rrdcalctemplate_free(host, host->templates);",
          "new_line_content": "static inline void health_free_all_nolock(RRDHOST *host) {",
          "content_same": false
        },
        {
          "line": 2338,
          "old_api": "rrdcalc_free",
          "new_api": null,
          "old_text": "rrdcalc_free(host, host->alarms)",
          "new_text": null,
          "old_line_content": "        rrdcalc_free(host, host->alarms);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 293,
          "old_api": "unlikely",
          "new_api": null,
          "old_text": "unlikely(ae->unique_id > max_unique_id)",
          "new_text": null,
          "old_line_content": "            if(unlikely(ae->unique_id > max_unique_id))",
          "new_line_content": "            else updated++;",
          "content_same": false
        },
        {
          "line": 2343,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"Health reload is requested, but health is not enabled.\")",
          "new_text": null,
          "old_line_content": "        error(\"Health reload is requested, but health is not enabled.\");",
          "new_line_content": "void health_reload(void) {",
          "content_same": false
        },
        {
          "line": 296,
          "old_api": "unlikely",
          "new_api": null,
          "old_text": "unlikely(ae->alarm_id >= max_alarm_id)",
          "new_text": null,
          "old_line_content": "            if(unlikely(ae->alarm_id >= max_alarm_id))",
          "new_line_content": "                max_unique_id = ae->unique_id;",
          "content_same": false
        },
        {
          "line": 2347,
          "old_api": "health_config_dir",
          "new_api": null,
          "old_text": "health_config_dir()",
          "new_text": null,
          "old_line_content": "    char *path = health_config_dir();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 300,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"Health: line %zu of file '%s' is invalid (unrecognized entry type '%s').\", line, filename, pointers[0])",
          "new_text": null,
          "old_line_content": "            error(\"Health: line %zu of file '%s' is invalid (unrecognized entry type '%s').\", line, filename, pointers[0]);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2350,
          "old_api": "rrdhost_rwlock",
          "new_api": null,
          "old_text": "rrdhost_rwlock(&localhost)",
          "new_text": null,
          "old_line_content": "    rrdhost_rwlock(&localhost);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2351,
          "old_api": "health_free_all_nolock",
          "new_api": null,
          "old_text": "health_free_all_nolock(&localhost)",
          "new_text": null,
          "old_line_content": "    health_free_all_nolock(&localhost);",
          "new_line_content": "    // free all running alarms",
          "content_same": false
        },
        {
          "line": 305,
          "old_api": "pthread_rwlock_unlock",
          "new_api": null,
          "old_text": "pthread_rwlock_unlock(&host->health_log.alarm_log_rwlock)",
          "new_text": null,
          "old_line_content": "    pthread_rwlock_unlock(&host->health_log.alarm_log_rwlock);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 310,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "    if(!max_alarm_id)  max_alarm_id  = (uint32_t)time(NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 315,
          "old_api": "info",
          "new_api": null,
          "old_text": "info(\"Health: loaded file '%s' with %zd new alarm entries, updated %zd alarms, errors %zd entries, duplicate %zd\", filename, loaded, updated, errored, duplicate)",
          "new_text": null,
          "old_line_content": "    info(\"Health: loaded file '%s' with %zd new alarm entries, updated %zd alarms, errors %zd entries, duplicate %zd\", filename, loaded, updated, errored, duplicate);",
          "new_line_content": "    host->health_log.next_alarm_id = max_alarm_id + 1;",
          "content_same": false
        },
        {
          "line": 320,
          "old_api": "health_alarm_log_close",
          "new_api": null,
          "old_text": "health_alarm_log_close()",
          "new_text": null,
          "old_line_content": "    health_alarm_log_close();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2369,
          "old_api": "rrdhost_rwlock",
          "new_api": null,
          "old_text": "rrdhost_rwlock(&localhost)",
          "new_text": null,
          "old_line_content": "    rrdhost_rwlock(&localhost);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2370,
          "old_api": "health_readdir",
          "new_api": null,
          "old_text": "health_readdir(path)",
          "new_text": null,
          "old_line_content": "    health_readdir(path);",
          "new_line_content": "    // load the new alarms",
          "content_same": false
        },
        {
          "line": 323,
          "old_api": "snprintfz",
          "new_api": null,
          "old_text": "snprintfz(buffer, FILENAME_MAX, \"%s.old\", health.log_filename)",
          "new_text": null,
          "old_line_content": "    snprintfz(buffer, FILENAME_MAX, \"%s.old\", health.log_filename);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 324,
          "old_api": "fopen",
          "new_api": null,
          "old_text": "fopen(buffer, \"r\")",
          "new_text": null,
          "old_line_content": "    FILE *fp = fopen(buffer, \"r\");",
          "new_line_content": "    char buffer[FILENAME_MAX + 1];",
          "content_same": false
        },
        {
          "line": 2375,
          "old_api": "rrdhost_rwlock",
          "new_api": null,
          "old_text": "rrdhost_rwlock(&localhost)",
          "new_text": null,
          "old_line_content": "        rrdhost_rwlock(&localhost);",
          "new_line_content": "    // link the loaded alarms to their charts",
          "content_same": false
        },
        {
          "line": 329,
          "old_api": "fclose",
          "new_api": null,
          "old_text": "fclose(fp)",
          "new_text": null,
          "old_line_content": "        fclose(fp);",
          "new_line_content": "    else {",
          "content_same": false
        },
        {
          "line": 2378,
          "old_api": "rrdcalctemplate_link_matching",
          "new_api": null,
          "old_text": "rrdcalctemplate_link_matching(st)",
          "new_text": null,
          "old_line_content": "        rrdcalctemplate_link_matching(st);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 333,
          "old_api": "fopen",
          "new_api": null,
          "old_text": "fopen(health.log_filename, \"r\")",
          "new_text": null,
          "old_line_content": "    fp = fopen(health.log_filename, \"r\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 338,
          "old_api": "fclose",
          "new_api": null,
          "old_text": "fclose(fp)",
          "new_text": null,
          "old_line_content": "        fclose(fp);",
          "new_line_content": "    else {",
          "content_same": false
        },
        {
          "line": 2388,
          "old_api": "isnan",
          "new_api": null,
          "old_text": "isnan(n)",
          "new_text": null,
          "old_line_content": "    if(isnan(n)) return RRDCALC_STATUS_UNDEFINED;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 341,
          "old_api": "health_alarm_log_open",
          "new_api": null,
          "old_text": "health_alarm_log_open()",
          "new_text": null,
          "old_line_content": "    health_alarm_log_open();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2405,
          "old_api": "rrdcalc_status2string",
          "new_api": null,
          "old_text": "rrdcalc_status2string(ae->new_status)",
          "new_text": null,
          "old_line_content": "        info(\"Health not sending again notification for alarm '%s.%s' status %s\", ae->chart, ae->name, rrdcalc_status2string(ae->new_status));",
          "new_line_content": "    if(t && t->new_status == ae->new_status) {",
          "content_same": false
        },
        {
          "line": 360,
          "old_api": "debug",
          "new_api": null,
          "old_text": "debug(D_HEALTH, \"Health adding alarm log entry with id: %u\", host->health_log.next_log_id)",
          "new_text": null,
          "old_line_content": "    debug(D_HEALTH, \"Health adding alarm log entry with id: %u\", host->health_log.next_log_id);",
          "new_line_content": "                int delay",
          "content_same": false
        },
        {
          "line": 363,
          "old_api": "strdupz",
          "new_api": null,
          "old_text": "strdupz(name)",
          "new_text": null,
          "old_line_content": "    ae->name = strdupz(name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2411,
          "old_api": "rrdcalc_status2string",
          "new_api": null,
          "old_text": "rrdcalc_status2string(ae->new_status)",
          "new_text": null,
          "old_line_content": "        info(\"Health not sending notification for first initialization of alarm '%s.%s' status %s\", ae->chart, ae->name, rrdcalc_status2string(ae->new_status));",
          "new_line_content": "    if((ae->old_status == RRDCALC_STATUS_UNDEFINED && ae->new_status == RRDCALC_STATUS_UNINITIALIZED)",
          "content_same": false
        },
        {
          "line": 367,
          "old_api": "strdupz",
          "new_api": null,
          "old_text": "strdupz(chart)",
          "new_text": null,
          "old_line_content": "        ae->chart = strdupz(chart);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 368,
          "old_api": "simple_hash",
          "new_api": null,
          "old_text": "simple_hash(ae->chart)",
          "new_text": null,
          "old_line_content": "        ae->hash_chart = simple_hash(ae->chart);",
          "new_line_content": "    if(chart) {",
          "content_same": false
        },
        {
          "line": 372,
          "old_api": "strdupz",
          "new_api": null,
          "old_text": "strdupz(family)",
          "new_text": null,
          "old_line_content": "        ae->family = strdupz(family);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 375,
          "old_api": "strdupz",
          "new_api": null,
          "old_text": "strdupz(recipient)",
          "new_text": null,
          "old_line_content": "    if(recipient) ae->recipient = strdupz(recipient);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2424,
          "old_api": "snprintfz",
          "new_api": null,
          "old_text": "snprintfz(buffer, FILENAME_MAX, \"exec %s '%s' '%s' '%u' '%u' '%u' '%lu' '%s' '%s' '%s' '%s' '%s' '%0.0Lf' '%0.0Lf' '%s' '%u' '%u' '%s' '%s'\",\n              exec,\n              recipient,\n              host->hostname,\n              ae->unique_id,\n              ae->alarm_id,\n              ae->alarm_event_id,\n              (unsigned long)ae->when,\n              ae->name,\n              ae->chart?ae->chart:\"NOCAHRT\",\n              ae->family?ae->family:\"NOFAMILY\",\n              rrdcalc_status2string(ae->new_status),\n              rrdcalc_status2string(ae->old_status),\n              ae->new_value,\n              ae->old_value,\n              ae->source?ae->source:\"UNKNOWN\",\n              (uint32_t)ae->duration,\n              (uint32_t)ae->non_clear_duration,\n              ae->units?ae->units:\"\",\n              ae->info?ae->info:\"\"\n    )",
          "new_text": null,
          "old_line_content": "    snprintfz(buffer, FILENAME_MAX, \"exec %s '%s' '%s' '%u' '%u' '%u' '%lu' '%s' '%s' '%s' '%s' '%s' '%0.0Lf' '%0.0Lf' '%s' '%u' '%u' '%s' '%s'\",",
          "new_line_content": "    if(!recipient) recipient = health.health_default_recipient;",
          "content_same": false
        },
        {
          "line": 2435,
          "old_api": "rrdcalc_status2string",
          "new_api": null,
          "old_text": "rrdcalc_status2string(ae->new_status)",
          "new_text": null,
          "old_line_content": "              rrdcalc_status2string(ae->new_status),",
          "new_line_content": "              ae->chart?ae->chart:\"NOCAHRT\",",
          "content_same": false
        },
        {
          "line": 2436,
          "old_api": "rrdcalc_status2string",
          "new_api": null,
          "old_text": "rrdcalc_status2string(ae->old_status)",
          "new_text": null,
          "old_line_content": "              rrdcalc_status2string(ae->old_status),",
          "new_line_content": "              ae->family?ae->family:\"NOFAMILY\",",
          "content_same": false
        },
        {
          "line": 396,
          "old_api": "pthread_rwlock_wrlock",
          "new_api": null,
          "old_text": "pthread_rwlock_wrlock(&host->health_log.alarm_log_rwlock)",
          "new_text": null,
          "old_line_content": "    pthread_rwlock_wrlock(&host->health_log.alarm_log_rwlock);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2447,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "    ae->exec_run_timestamp = time(NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 400,
          "old_api": "pthread_rwlock_unlock",
          "new_api": null,
          "old_text": "pthread_rwlock_unlock(&host->health_log.alarm_log_rwlock)",
          "new_text": null,
          "old_line_content": "    pthread_rwlock_unlock(&host->health_log.alarm_log_rwlock);",
          "new_line_content": "    host->health_log.alarms = ae;",
          "content_same": false
        },
        {
          "line": 2450,
          "old_api": "mypopen",
          "new_api": null,
          "old_text": "mypopen(buffer, &command_pid)",
          "new_text": null,
          "old_line_content": "    FILE *fp = mypopen(buffer, &command_pid);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 403,
          "old_api": "pthread_rwlock_rdlock",
          "new_api": null,
          "old_text": "pthread_rwlock_rdlock(&host->health_log.alarm_log_rwlock)",
          "new_text": null,
          "old_line_content": "    pthread_rwlock_rdlock(&host->health_log.alarm_log_rwlock);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2455,
          "old_api": "debug",
          "new_api": null,
          "old_text": "debug(D_HEALTH, \"HEALTH reading from command\")",
          "new_text": null,
          "old_line_content": "    debug(D_HEALTH, \"HEALTH reading from command\");",
          "new_line_content": "        goto done;",
          "content_same": false
        },
        {
          "line": 2456,
          "old_api": "fgets",
          "new_api": null,
          "old_text": "fgets(buffer, FILENAME_MAX, fp)",
          "new_text": null,
          "old_line_content": "    char *s = fgets(buffer, FILENAME_MAX, fp);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2459,
          "old_api": "debug",
          "new_api": null,
          "old_text": "debug(D_HEALTH, \"done executing command - returned with code %d\", ae->exec_code)",
          "new_text": null,
          "old_line_content": "    debug(D_HEALTH, \"done executing command - returned with code %d\", ae->exec_code);",
          "new_line_content": "    (void)s;",
          "content_same": false
        },
        {
          "line": 416,
          "old_api": "health_alarm_log_save",
          "new_api": null,
          "old_text": "health_alarm_log_save(host, t)",
          "new_text": null,
          "old_line_content": "                health_alarm_log_save(host, t);",
          "new_line_content": "                    ae->non_clear_duration += t->non_clear_duration;",
          "content_same": false
        },
        {
          "line": 2465,
          "old_api": "health_alarm_log_save",
          "new_api": null,
          "old_text": "health_alarm_log_save(host, ae)",
          "new_text": null,
          "old_line_content": "    health_alarm_log_save(host, ae);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2470,
          "old_api": "info",
          "new_api": null,
          "old_text": "info(\"Health alarm '%s.%s' = %0.2Lf - changed status from %s to %s\",\n         ae->chart?ae->chart:\"NOCHART\", ae->name,\n         ae->new_value,\n         rrdcalc_status2string(ae->old_status),\n         rrdcalc_status2string(ae->new_status)\n    )",
          "new_text": null,
          "old_line_content": "    info(\"Health alarm '%s.%s' = %0.2Lf - changed status from %s to %s\",",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 423,
          "old_api": "pthread_rwlock_unlock",
          "new_api": null,
          "old_text": "pthread_rwlock_unlock(&host->health_log.alarm_log_rwlock)",
          "new_text": null,
          "old_line_content": "    pthread_rwlock_unlock(&host->health_log.alarm_log_rwlock);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2473,
          "old_api": "rrdcalc_status2string",
          "new_api": null,
          "old_text": "rrdcalc_status2string(ae->old_status)",
          "new_text": null,
          "old_line_content": "         rrdcalc_status2string(ae->old_status),",
          "new_line_content": "         ae->chart?ae->chart:\"NOCHART\", ae->name,",
          "content_same": false
        },
        {
          "line": 2474,
          "old_api": "rrdcalc_status2string",
          "new_api": null,
          "old_text": "rrdcalc_status2string(ae->new_status)",
          "new_text": null,
          "old_line_content": "         rrdcalc_status2string(ae->new_status)",
          "new_line_content": "         ae->new_value,",
          "content_same": false
        },
        {
          "line": 2477,
          "old_api": "health_alarm_execute",
          "new_api": null,
          "old_text": "health_alarm_execute(host, ae)",
          "new_text": null,
          "old_line_content": "    health_alarm_execute(host, ae);",
          "new_line_content": "    );",
          "content_same": false
        },
        {
          "line": 434,
          "old_api": "isalnum",
          "new_api": null,
          "old_text": "isalnum(*variable)",
          "new_text": null,
          "old_line_content": "        if (!isalnum(*variable) && *variable != '.' && *variable != '_') {",
          "new_line_content": "    int fixed = 0;",
          "content_same": false
        },
        {
          "line": 2483,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "    time_t now = time(NULL);",
          "new_line_content": "    static uint32_t stop_at_id = 0;",
          "content_same": false
        },
        {
          "line": 2489,
          "old_api": "unlikely",
          "new_api": null,
          "old_text": "unlikely(\n            !(ae->flags & HEALTH_ENTRY_FLAG_PROCESSED) &&\n            !(ae->flags & HEALTH_ENTRY_FLAG_UPDATED)\n            )",
          "new_text": null,
          "old_line_content": "        if(unlikely(",
          "new_line_content": "    ALARM_ENTRY *ae;",
          "content_same": false
        },
        {
          "line": 2494,
          "old_api": "unlikely",
          "new_api": null,
          "old_text": "unlikely(ae->unique_id < first_waiting)",
          "new_text": null,
          "old_line_content": "            if(unlikely(ae->unique_id < first_waiting))",
          "new_line_content": "            )) {",
          "content_same": false
        },
        {
          "line": 448,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(((RRDVAR *)a)->name, ((RRDVAR *)b)->name)",
          "new_text": null,
          "old_line_content": "    else return strcmp(((RRDVAR *)a)->name, ((RRDVAR *)b)->name);",
          "new_line_content": "    if(((RRDVAR *)a)->hash < ((RRDVAR *)b)->hash) return -1;",
          "content_same": false
        },
        {
          "line": 2497,
          "old_api": "likely",
          "new_api": null,
          "old_text": "likely(now >= ae->delay_up_to_timestamp)",
          "new_text": null,
          "old_line_content": "            if(likely(now >= ae->delay_up_to_timestamp))",
          "new_line_content": "                first_waiting = ae->unique_id;",
          "content_same": false
        },
        {
          "line": 2498,
          "old_api": "health_process_notifications",
          "new_api": null,
          "old_text": "health_process_notifications(host, ae)",
          "new_text": null,
          "old_line_content": "                health_process_notifications(host, ae);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 452,
          "old_api": "avl_insert_lock",
          "new_api": null,
          "old_text": "avl_insert_lock(tree, (avl *)(rv))",
          "new_text": null,
          "old_line_content": "    RRDVAR *ret = (RRDVAR *)avl_insert_lock(tree, (avl *)(rv));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2505,
          "old_api": "pthread_rwlock_unlock",
          "new_api": null,
          "old_text": "pthread_rwlock_unlock(&host->health_log.alarm_log_rwlock)",
          "new_text": null,
          "old_line_content": "    pthread_rwlock_unlock(&host->health_log.alarm_log_rwlock);",
          "new_line_content": "    stop_at_id = first_waiting;",
          "content_same": false
        },
        {
          "line": 460,
          "old_api": "avl_remove_lock",
          "new_api": null,
          "old_text": "avl_remove_lock(tree, (avl *)(rv))",
          "new_text": null,
          "old_line_content": "    RRDVAR *ret = (RRDVAR *)avl_remove_lock(tree, (avl *)(rv));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2511,
          "old_api": "pthread_rwlock_wrlock",
          "new_api": null,
          "old_text": "pthread_rwlock_wrlock(&host->health_log.alarm_log_rwlock)",
          "new_text": null,
          "old_line_content": "    pthread_rwlock_wrlock(&host->health_log.alarm_log_rwlock);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 470,
          "old_api": "simple_hash",
          "new_api": null,
          "old_text": "simple_hash(tmp.name)",
          "new_text": null,
          "old_line_content": "    tmp.hash = (hash)?hash:simple_hash(tmp.name);",
          "new_line_content": "    RRDVAR tmp;",
          "content_same": false
        },
        {
          "line": 2523,
          "old_api": "debug",
          "new_api": null,
          "old_text": "debug(D_HEALTH, \"Health removing alarm log entry with id: %u\", ae->unique_id)",
          "new_text": null,
          "old_line_content": "        debug(D_HEALTH, \"Health removing alarm log entry with id: %u\", ae->unique_id);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2527,
          "old_api": "freez",
          "new_api": null,
          "old_text": "freez(ae->name)",
          "new_text": null,
          "old_line_content": "        freez(ae->name);",
          "new_line_content": "        ALARM_ENTRY *t = ae->next;",
          "content_same": false
        },
        {
          "line": 2528,
          "old_api": "freez",
          "new_api": null,
          "old_text": "freez(ae->chart)",
          "new_text": null,
          "old_line_content": "        freez(ae->chart);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 481,
          "old_api": "rrdvar_index_del",
          "new_api": null,
          "old_text": "rrdvar_index_del(tree, rv)",
          "new_text": null,
          "old_line_content": "        rrdvar_index_del(tree, rv);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 484,
          "old_api": "freez",
          "new_api": null,
          "old_text": "freez(rv)",
          "new_text": null,
          "old_line_content": "    freez(rv);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 488,
          "old_api": "strdupz",
          "new_api": null,
          "old_text": "strdupz(name)",
          "new_text": null,
          "old_line_content": "    char *variable = strdupz(name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 489,
          "old_api": "rrdvar_fix_name",
          "new_api": null,
          "old_text": "rrdvar_fix_name(variable)",
          "new_text": null,
          "old_line_content": "    rrdvar_fix_name(variable);",
          "new_line_content": "static inline RRDVAR *rrdvar_create_and_index(const char *scope, avl_tree_lock *tree, const char *name, int type, calculated_number *value) {",
          "content_same": false
        },
        {
          "line": 493,
          "old_api": "unlikely",
          "new_api": null,
          "old_text": "unlikely(!rv)",
          "new_text": null,
          "old_line_content": "    if(unlikely(!rv)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2541,
          "old_api": "pthread_rwlock_unlock",
          "new_api": null,
          "old_text": "pthread_rwlock_unlock(&host->health_log.alarm_log_rwlock)",
          "new_text": null,
          "old_line_content": "    pthread_rwlock_unlock(&host->health_log.alarm_log_rwlock);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2545,
          "old_api": "unlikely",
          "new_api": null,
          "old_text": "unlikely(!rc->rrdset)",
          "new_text": null,
          "old_line_content": "    if (unlikely(!rc->rrdset)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2546,
          "old_api": "debug",
          "new_api": null,
          "old_text": "debug(D_HEALTH, \"Health not running alarm '%s.%s'. It is not linked to a chart.\", rc->chart?rc->chart:\"NOCHART\", rc->name)",
          "new_text": null,
          "old_line_content": "        debug(D_HEALTH, \"Health not running alarm '%s.%s'. It is not linked to a chart.\", rc->chart?rc->chart:\"NOCHART\", rc->name);",
          "new_line_content": "static inline int rrdcalc_isrunnable(RRDCALC *rc, time_t now, time_t *next_run) {",
          "content_same": false
        },
        {
          "line": 502,
          "old_api": "rrdvar_index_add",
          "new_api": null,
          "old_text": "rrdvar_index_add(tree, rv)",
          "new_text": null,
          "old_line_content": "        RRDVAR *ret = rrdvar_index_add(tree, rv);",
          "new_line_content": "        rv->value = value;",
          "content_same": false
        },
        {
          "line": 2551,
          "old_api": "debug",
          "new_api": null,
          "old_text": "debug(D_HEALTH, \"Health not running alarm '%s.%s'. Chart is not yet collected.\", rc->chart?rc->chart:\"NOCHART\", rc->name)",
          "new_text": null,
          "old_line_content": "        debug(D_HEALTH, \"Health not running alarm '%s.%s'. Chart is not yet collected.\", rc->chart?rc->chart:\"NOCHART\", rc->name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 503,
          "old_api": "unlikely",
          "new_api": null,
          "old_text": "unlikely(ret != rv)",
          "new_text": null,
          "old_line_content": "        if(unlikely(ret != rv)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2550,
          "old_api": "unlikely",
          "new_api": null,
          "old_text": "unlikely(!rc->rrdset->last_collected_time.tv_sec)",
          "new_text": null,
          "old_line_content": "    if (unlikely(!rc->rrdset->last_collected_time.tv_sec)) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2555,
          "old_api": "unlikely",
          "new_api": null,
          "old_text": "unlikely(!rc->update_every)",
          "new_text": null,
          "old_line_content": "    if (unlikely(!rc->update_every)) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2556,
          "old_api": "debug",
          "new_api": null,
          "old_text": "debug(D_HEALTH, \"Health not running alarm '%s.%s'. It does not have an update frequency\", rc->chart?rc->chart:\"NOCHART\", rc->name)",
          "new_text": null,
          "old_line_content": "        debug(D_HEALTH, \"Health not running alarm '%s.%s'. It does not have an update frequency\", rc->chart?rc->chart:\"NOCHART\", rc->name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 509,
          "old_api": "debug",
          "new_api": null,
          "old_text": "debug(D_VARIABLES, \"Variable '%s' created in scope '%s'\", variable, scope)",
          "new_text": null,
          "old_line_content": "            debug(D_VARIABLES, \"Variable '%s' created in scope '%s'\", variable, scope);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2560,
          "old_api": "unlikely",
          "new_api": null,
          "old_text": "unlikely(rc->next_update > now)",
          "new_text": null,
          "old_line_content": "    if (unlikely(rc->next_update > now)) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 513,
          "old_api": "freez",
          "new_api": null,
          "old_text": "freez(variable)",
          "new_text": null,
          "old_line_content": "        freez(variable);",
          "new_line_content": "    else {",
          "content_same": false
        },
        {
          "line": 2561,
          "old_api": "unlikely",
          "new_api": null,
          "old_text": "unlikely(*next_run > rc->next_update)",
          "new_text": null,
          "old_line_content": "        if (unlikely(*next_run > rc->next_update))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2564,
          "old_api": "debug",
          "new_api": null,
          "old_text": "debug(D_HEALTH, \"Health not examining alarm '%s.%s' yet (will do in %d secs).\", rc->chart?rc->chart:\"NOCHART\", rc->name, (int) (rc->next_update - now))",
          "new_text": null,
          "old_line_content": "        debug(D_HEALTH, \"Health not examining alarm '%s.%s' yet (will do in %d secs).\", rc->chart?rc->chart:\"NOCHART\", rc->name, (int) (rc->next_update - now));",
          "new_line_content": "            *next_run = rc->next_update;",
          "content_same": false
        },
        {
          "line": 2580,
          "old_api": "gettid",
          "new_api": null,
          "old_text": "gettid()",
          "new_text": null,
          "old_line_content": "    info(\"HEALTH thread created with task id %d\", gettid());",
          "new_line_content": "    (void)ptr;",
          "content_same": false
        },
        {
          "line": 2583,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"Cannot set pthread cancel type to DEFERRED.\")",
          "new_text": null,
          "old_line_content": "        error(\"Cannot set pthread cancel type to DEFERRED.\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2586,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"Cannot set pthread cancel state to ENABLE.\")",
          "new_text": null,
          "old_line_content": "        error(\"Cannot set pthread cancel state to ENABLE.\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2591,
          "old_api": "buffer_create",
          "new_api": null,
          "old_text": "buffer_create(100)",
          "new_text": null,
          "old_line_content": "    BUFFER *wb = buffer_create(100);",
          "new_line_content": "    if(min_run_every < 1) min_run_every = 1;",
          "content_same": false
        },
        {
          "line": 2596,
          "old_api": "debug",
          "new_api": null,
          "old_text": "debug(D_HEALTH, \"Health monitoring iteration no %u started\", loop)",
          "new_text": null,
          "old_line_content": "        debug(D_HEALTH, \"Health monitoring iteration no %u started\", loop);",
          "new_line_content": "    while(health_enabled && !netdata_exit) {",
          "content_same": false
        },
        {
          "line": 551,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"I don't know how to convert RRDVAR type %d to calculated_number\", rv->type)",
          "new_text": null,
          "old_line_content": "            error(\"I don't know how to convert RRDVAR type %d to calculated_number\", rv->type);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2599,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "        time_t now = time(NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2603,
          "old_api": "pthread_setcancelstate",
          "new_api": null,
          "old_text": "pthread_setcancelstate(PTHREAD_CANCEL_DISABLE, &oldstate)",
          "new_text": null,
          "old_line_content": "        if (unlikely(pthread_setcancelstate(PTHREAD_CANCEL_DISABLE, &oldstate) != 0))",
          "new_line_content": "        RRDCALC *rc;",
          "content_same": false
        },
        {
          "line": 2604,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"Cannot set pthread cancel state to DISABLE.\")",
          "new_text": null,
          "old_line_content": "            error(\"Cannot set pthread cancel state to DISABLE.\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 558,
          "old_api": "rrdvar2number",
          "new_api": null,
          "old_text": "rrdvar2number(rv)",
          "new_text": null,
          "old_line_content": "    debug(D_HEALTH, \"%50s : %20.5Lf\", rv->name, rrdvar2number(rv));",
          "new_line_content": "void dump_variable(void *data) {",
          "content_same": false
        },
        {
          "line": 2610,
          "old_api": "rrdcalc_isrunnable",
          "new_api": null,
          "old_text": "rrdcalc_isrunnable(rc, now, &next_run)",
          "new_text": null,
          "old_line_content": "            if (unlikely(!rrdcalc_isrunnable(rc, now, &next_run)))",
          "new_line_content": "        // the first loop is to lookup values from the db",
          "content_same": false
        },
        {
          "line": 567,
          "old_api": "rrdvar_index_find",
          "new_api": null,
          "old_text": "rrdvar_index_find(&st->variables_root_index, variable, hash)",
          "new_text": null,
          "old_line_content": "    rv = rrdvar_index_find(&st->variables_root_index, variable, hash);",
          "new_line_content": "    if(!st) return 0;",
          "content_same": false
        },
        {
          "line": 2619,
          "old_api": "RRDCALC_HAS_DB_LOOKUP",
          "new_api": null,
          "old_text": "RRDCALC_HAS_DB_LOOKUP(rc)",
          "new_text": null,
          "old_line_content": "            if (unlikely(RRDCALC_HAS_DB_LOOKUP(rc))) {",
          "new_line_content": "            // 2. if there is calculation expression, run it",
          "content_same": false
        },
        {
          "line": 573,
          "old_api": "rrdvar_index_find",
          "new_api": null,
          "old_text": "rrdvar_index_find(&st->rrdfamily->variables_root_index, variable, hash)",
          "new_text": null,
          "old_line_content": "    rv = rrdvar_index_find(&st->rrdfamily->variables_root_index, variable, hash);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2623,
          "old_api": "rrd2value",
          "new_api": null,
          "old_text": "rrd2value(rc->rrdset, wb, &rc->value,\n                                    rc->dimensions, 1, rc->after, rc->before, rc->group,\n                                    rc->options, &rc->db_after, &rc->db_before, &value_is_null)",
          "new_text": null,
          "old_line_content": "                int ret = rrd2value(rc->rrdset, wb, &rc->value,",
          "new_line_content": "                int value_is_null = 0;",
          "content_same": false
        },
        {
          "line": 579,
          "old_api": "rrdvar_index_find",
          "new_api": null,
          "old_text": "rrdvar_index_find(&st->rrdhost->variables_root_index, variable, hash)",
          "new_text": null,
          "old_line_content": "    rv = rrdvar_index_find(&st->rrdhost->variables_root_index, variable, hash);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2627,
          "old_api": "unlikely",
          "new_api": null,
          "old_text": "unlikely(ret != 200)",
          "new_text": null,
          "old_line_content": "                if (unlikely(ret != 200)) {",
          "new_line_content": "                                    rc->options, &rc->db_after, &rc->db_before, &value_is_null);",
          "content_same": false
        },
        {
          "line": 2631,
          "old_api": "debug",
          "new_api": null,
          "old_text": "debug(D_HEALTH, \"Health alarm '%s.%s': database lookup returned error %d\", rc->chart?rc->chart:\"NOCHART\", rc->name, ret)",
          "new_text": null,
          "old_line_content": "                    debug(D_HEALTH, \"Health alarm '%s.%s': database lookup returned error %d\", rc->chart?rc->chart:\"NOCHART\", rc->name, ret);",
          "new_line_content": "                    rc->value = NAN;",
          "content_same": false
        },
        {
          "line": 585,
          "old_api": "debug",
          "new_api": null,
          "old_text": "debug(D_HEALTH, \"Available local chart '%s' variables:\", st->id)",
          "new_text": null,
          "old_line_content": "    debug(D_HEALTH, \"Available local chart '%s' variables:\", st->id);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 586,
          "old_api": "avl_traverse_lock",
          "new_api": null,
          "old_text": "avl_traverse_lock(&st->variables_root_index, dump_variable)",
          "new_text": null,
          "old_line_content": "    avl_traverse_lock(&st->variables_root_index, dump_variable);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 589,
          "old_api": "avl_traverse_lock",
          "new_api": null,
          "old_text": "avl_traverse_lock(&st->rrdfamily->variables_root_index, dump_variable)",
          "new_text": null,
          "old_line_content": "    avl_traverse_lock(&st->rrdfamily->variables_root_index, dump_variable);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2638,
          "old_api": "unlikely",
          "new_api": null,
          "old_text": "unlikely(rc->rrdcalc_flags & RRDCALC_FLAG_DB_ERROR)",
          "new_text": null,
          "old_line_content": "                else if (unlikely(rc->rrdcalc_flags & RRDCALC_FLAG_DB_ERROR))",
          "new_line_content": "                    }",
          "content_same": false
        },
        {
          "line": 592,
          "old_api": "avl_traverse_lock",
          "new_api": null,
          "old_text": "avl_traverse_lock(&st->rrdhost->variables_root_index, dump_variable)",
          "new_text": null,
          "old_line_content": "    avl_traverse_lock(&st->rrdhost->variables_root_index, dump_variable);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2641,
          "old_api": "unlikely",
          "new_api": null,
          "old_text": "unlikely(old_db_timestamp == rc->db_before)",
          "new_text": null,
          "old_line_content": "                if (unlikely(old_db_timestamp == rc->db_before)) {",
          "new_line_content": "                    rc->rrdcalc_flags &= ~RRDCALC_FLAG_DB_ERROR;",
          "content_same": false
        },
        {
          "line": 2644,
          "old_api": "debug",
          "new_api": null,
          "old_text": "debug(D_HEALTH, \"Health alarm '%s.%s': database is stale\", rc->chart?rc->chart:\"NOCHART\", rc->name)",
          "new_text": null,
          "old_line_content": "                    debug(D_HEALTH, \"Health alarm '%s.%s': database is stale\", rc->chart?rc->chart:\"NOCHART\", rc->name);",
          "new_line_content": "                    // database is stale",
          "content_same": false
        },
        {
          "line": 601,
          "old_api": "debug",
          "new_api": null,
          "old_text": "debug(D_VARIABLES, \"RRDVARSET create for chart id '%s' name '%s' with variable name '%s'\", st->id, st->name, variable)",
          "new_text": null,
          "old_line_content": "    debug(D_VARIABLES, \"RRDVARSET create for chart id '%s' name '%s' with variable name '%s'\", st->id, st->name, variable);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 602,
          "old_api": "callocz",
          "new_api": null,
          "old_text": "callocz(1, sizeof(RRDSETVAR))",
          "new_text": null,
          "old_line_content": "    RRDSETVAR *rs = (RRDSETVAR *)callocz(1, sizeof(RRDSETVAR));",
          "new_line_content": "RRDSETVAR *rrdsetvar_create(RRDSET *st, const char *variable, int type, void *value, uint32_t options) {",
          "content_same": false
        },
        {
          "line": 2651,
          "old_api": "unlikely",
          "new_api": null,
          "old_text": "unlikely(rc->rrdcalc_flags & RRDCALC_FLAG_DB_STALE)",
          "new_text": null,
          "old_line_content": "                else if (unlikely(rc->rrdcalc_flags & RRDCALC_FLAG_DB_STALE))",
          "new_line_content": "                    }",
          "content_same": false
        },
        {
          "line": 605,
          "old_api": "snprintfz",
          "new_api": null,
          "old_text": "snprintfz(buffer, RRDVAR_MAX_LENGTH, \"%s.%s\", st->id, variable)",
          "new_text": null,
          "old_line_content": "    snprintfz(buffer, RRDVAR_MAX_LENGTH, \"%s.%s\", st->id, variable);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 606,
          "old_api": "strdupz",
          "new_api": null,
          "old_text": "strdupz(buffer)",
          "new_text": null,
          "old_line_content": "    rs->fullid = strdupz(buffer);",
          "new_line_content": "    char buffer[RRDVAR_MAX_LENGTH + 1];",
          "content_same": false
        },
        {
          "line": 2654,
          "old_api": "unlikely",
          "new_api": null,
          "old_text": "unlikely(value_is_null)",
          "new_text": null,
          "old_line_content": "                if (unlikely(value_is_null)) {",
          "new_line_content": "                    rc->rrdcalc_flags &= ~RRDCALC_FLAG_DB_STALE;",
          "content_same": false
        },
        {
          "line": 609,
          "old_api": "strdupz",
          "new_api": null,
          "old_text": "strdupz(buffer)",
          "new_text": null,
          "old_line_content": "    rs->fullname = strdupz(buffer);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2659,
          "old_api": "debug",
          "new_api": null,
          "old_text": "debug(D_HEALTH, \"Health alarm '%s.%s': database lookup returned empty value (possibly value is not collected yet)\",\n                          rc->chart?rc->chart:\"NOCHART\", rc->name)",
          "new_text": null,
          "old_line_content": "                    debug(D_HEALTH, \"Health alarm '%s.%s': database lookup returned empty value (possibly value is not collected yet)\",",
          "new_line_content": "                    rc->value = NAN;",
          "content_same": false
        },
        {
          "line": 2662,
          "old_api": "unlikely",
          "new_api": null,
          "old_text": "unlikely(!(rc->rrdcalc_flags & RRDCALC_FLAG_DB_NAN))",
          "new_text": null,
          "old_line_content": "                    if (unlikely(!(rc->rrdcalc_flags & RRDCALC_FLAG_DB_NAN))) {",
          "new_line_content": "                          rc->chart?rc->chart:\"NOCHART\", rc->name);",
          "content_same": false
        },
        {
          "line": 618,
          "old_api": "rrdvar_create_and_index",
          "new_api": null,
          "old_text": "rrdvar_create_and_index(\"local\",  &st->variables_root_index, rs->variable, rs->type, rs->value)",
          "new_text": null,
          "old_line_content": "    rs->local       = rrdvar_create_and_index(\"local\",  &st->variables_root_index, rs->variable, rs->type, rs->value);",
          "new_line_content": "    rs->rrdset = st;",
          "content_same": false
        },
        {
          "line": 619,
          "old_api": "rrdvar_create_and_index",
          "new_api": null,
          "old_text": "rrdvar_create_and_index(\"family\", &st->rrdfamily->variables_root_index, rs->fullid, rs->type, rs->value)",
          "new_text": null,
          "old_line_content": "    rs->family      = rrdvar_create_and_index(\"family\", &st->rrdfamily->variables_root_index, rs->fullid, rs->type, rs->value);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2668,
          "old_api": "unlikely",
          "new_api": null,
          "old_text": "unlikely(rc->rrdcalc_flags & RRDCALC_FLAG_DB_NAN)",
          "new_text": null,
          "old_line_content": "                else if (unlikely(rc->rrdcalc_flags & RRDCALC_FLAG_DB_NAN))",
          "new_line_content": "                    }",
          "content_same": false
        },
        {
          "line": 2671,
          "old_api": "debug",
          "new_api": null,
          "old_text": "debug(D_HEALTH, \"Health alarm '%s.%s': database lookup gave value \"\n                        CALCULATED_NUMBER_FORMAT, rc->chart?rc->chart:\"NOCHART\", rc->name, rc->value)",
          "new_text": null,
          "old_line_content": "                debug(D_HEALTH, \"Health alarm '%s.%s': database lookup gave value \"",
          "new_line_content": "                    rc->rrdcalc_flags &= ~RRDCALC_FLAG_DB_NAN;",
          "content_same": false
        },
        {
          "line": 2675,
          "old_api": "unlikely",
          "new_api": null,
          "old_text": "unlikely(rc->calculation)",
          "new_text": null,
          "old_line_content": "            if(unlikely(rc->calculation)) {",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 2676,
          "old_api": "expression_evaluate",
          "new_api": null,
          "old_text": "expression_evaluate(rc->calculation)",
          "new_text": null,
          "old_line_content": "                if (unlikely(!expression_evaluate(rc->calculation))) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 631,
          "old_api": "debug",
          "new_api": null,
          "old_text": "debug(D_VARIABLES, \"RRDSETVAR rename for chart id '%s' name '%s'\", st->id, st->name)",
          "new_text": null,
          "old_line_content": "    debug(D_VARIABLES, \"RRDSETVAR rename for chart id '%s' name '%s'\", st->id, st->name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2681,
          "old_api": "debug",
          "new_api": null,
          "old_text": "debug(D_HEALTH, \"Health alarm '%s.%s': failed to evaluate calculation with error: %s\",\n                          rc->chart?rc->chart:\"NOCHART\", rc->name, buffer_tostring(rc->calculation->error_msg))",
          "new_text": null,
          "old_line_content": "                    debug(D_HEALTH, \"Health alarm '%s.%s': failed to evaluate calculation with error: %s\",",
          "new_line_content": "                    rc->value = NAN;",
          "content_same": false
        },
        {
          "line": 2682,
          "old_api": "buffer_tostring",
          "new_api": null,
          "old_text": "buffer_tostring(rc->calculation->error_msg)",
          "new_text": null,
          "old_line_content": "                          rc->chart?rc->chart:\"NOCHART\", rc->name, buffer_tostring(rc->calculation->error_msg));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2687,
          "old_api": "buffer_tostring",
          "new_api": null,
          "old_text": "buffer_tostring(rc->calculation->error_msg)",
          "new_text": null,
          "old_line_content": "                              rc->chart?rc->chart:\"NOCHART\", rc->name, buffer_tostring(rc->calculation->error_msg));",
          "new_line_content": "                        rc->rrdcalc_flags |= RRDCALC_FLAG_CALC_ERROR;",
          "content_same": false
        },
        {
          "line": 642,
          "old_api": "snprintfz",
          "new_api": null,
          "old_text": "snprintfz(buffer, RRDVAR_MAX_LENGTH, \"%s.%s\", st->name, rs->variable)",
          "new_text": null,
          "old_line_content": "        snprintfz(buffer, RRDVAR_MAX_LENGTH, \"%s.%s\", st->name, rs->variable);",
          "new_line_content": "        next = rs->next;",
          "content_same": false
        },
        {
          "line": 2691,
          "old_api": "unlikely",
          "new_api": null,
          "old_text": "unlikely(rc->rrdcalc_flags & RRDCALC_FLAG_CALC_ERROR)",
          "new_text": null,
          "old_line_content": "                    if (unlikely(rc->rrdcalc_flags & RRDCALC_FLAG_CALC_ERROR))",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 2694,
          "old_api": "debug",
          "new_api": null,
          "old_text": "debug(D_HEALTH, \"Health alarm '%s.%s': calculation expression gave value \"\n                            CALCULATED_NUMBER_FORMAT\n                            \": %s (source: %s)\",\n                          rc->chart?rc->chart:\"NOCHART\", rc->name,\n                          rc->calculation->result,\n                          buffer_tostring(rc->calculation->error_msg),\n                          rc->source\n                    )",
          "new_text": null,
          "old_line_content": "                    debug(D_HEALTH, \"Health alarm '%s.%s': calculation expression gave value \"",
          "new_line_content": "                        rc->rrdcalc_flags &= ~RRDCALC_FLAG_CALC_ERROR;",
          "content_same": false
        },
        {
          "line": 647,
          "old_api": "rrdvar_free",
          "new_api": null,
          "old_text": "rrdvar_free(st->rrdhost, &st->rrdhost->variables_root_index, rs->host_name)",
          "new_text": null,
          "old_line_content": "            rrdvar_free(st->rrdhost, &st->rrdhost->variables_root_index, rs->host_name);",
          "new_line_content": "            // name changed",
          "content_same": false
        },
        {
          "line": 650,
          "old_api": "strdupz",
          "new_api": null,
          "old_text": "strdupz(st->name)",
          "new_text": null,
          "old_line_content": "            rs->fullname = strdupz(st->name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2699,
          "old_api": "buffer_tostring",
          "new_api": null,
          "old_text": "buffer_tostring(rc->calculation->error_msg)",
          "new_text": null,
          "old_line_content": "                          buffer_tostring(rc->calculation->error_msg),",
          "new_line_content": "                          rc->chart?rc->chart:\"NOCHART\", rc->name,",
          "content_same": false
        },
        {
          "line": 656,
          "old_api": "rrdsetcalc_link_matching",
          "new_api": null,
          "old_text": "rrdsetcalc_link_matching(st)",
          "new_text": null,
          "old_line_content": "    rrdsetcalc_link_matching(st);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2707,
          "old_api": "rrdhost_unlock",
          "new_api": null,
          "old_text": "rrdhost_unlock(&localhost)",
          "new_text": null,
          "old_line_content": "        rrdhost_unlock(&localhost);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 661,
          "old_api": "debug",
          "new_api": null,
          "old_text": "debug(D_VARIABLES, \"RRDSETVAR free for chart id '%s' name '%s', variable '%s'\", st->id, st->name, rs->variable)",
          "new_text": null,
          "old_line_content": "    debug(D_VARIABLES, \"RRDSETVAR free for chart id '%s' name '%s', variable '%s'\", st->id, st->name, rs->variable);",
          "new_line_content": "void rrdsetvar_free(RRDSETVAR *rs) {",
          "content_same": false
        },
        {
          "line": 2710,
          "old_api": "rrdhost_rdlock",
          "new_api": null,
          "old_text": "rrdhost_rdlock(&localhost)",
          "new_text": null,
          "old_line_content": "            rrdhost_rdlock(&localhost);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 664,
          "old_api": "rrdvar_free",
          "new_api": null,
          "old_text": "rrdvar_free(st->rrdhost, &st->rrdfamily->variables_root_index, rs->family)",
          "new_text": null,
          "old_line_content": "    rrdvar_free(st->rrdhost, &st->rrdfamily->variables_root_index, rs->family);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2713,
          "old_api": "rrdcalc_isrunnable",
          "new_api": null,
          "old_text": "rrdcalc_isrunnable(rc, now, &next_run)",
          "new_text": null,
          "old_line_content": "                if (unlikely(!rrdcalc_isrunnable(rc, now, &next_run)))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2719,
          "old_api": "likely",
          "new_api": null,
          "old_text": "likely(rc->warning)",
          "new_text": null,
          "old_line_content": "                if(likely(rc->warning)) {",
          "new_line_content": "                int critical_status = RRDCALC_STATUS_UNDEFINED;",
          "content_same": false
        },
        {
          "line": 2720,
          "old_api": "expression_evaluate",
          "new_api": null,
          "old_text": "expression_evaluate(rc->warning)",
          "new_text": null,
          "old_line_content": "                    if(unlikely(!expression_evaluate(rc->warning))) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 675,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"RRDSETVAR '%s' not found in chart '%s' variables linked list\", rs->fullname, st->id)",
          "new_text": null,
          "old_line_content": "        if(!t) error(\"RRDSETVAR '%s' not found in chart '%s' variables linked list\", rs->fullname, st->id);",
          "new_line_content": "        RRDSETVAR *t;",
          "content_same": false
        },
        {
          "line": 2723,
          "old_api": "debug",
          "new_api": null,
          "old_text": "debug(D_HEALTH, \"Health alarm '%s.%s': warning expression failed with error: %s\",\n                              rc->chart?rc->chart:\"NOCHART\", rc->name, buffer_tostring(rc->warning->error_msg))",
          "new_text": null,
          "old_line_content": "                        debug(D_HEALTH, \"Health alarm '%s.%s': warning expression failed with error: %s\",",
          "new_line_content": "                        // calculation failed",
          "content_same": false
        },
        {
          "line": 2724,
          "old_api": "buffer_tostring",
          "new_api": null,
          "old_text": "buffer_tostring(rc->warning->error_msg)",
          "new_text": null,
          "old_line_content": "                              rc->chart?rc->chart:\"NOCHART\", rc->name, buffer_tostring(rc->warning->error_msg));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 679,
          "old_api": "freez",
          "new_api": null,
          "old_text": "freez(rs->fullid)",
          "new_text": null,
          "old_line_content": "    freez(rs->fullid);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 680,
          "old_api": "freez",
          "new_api": null,
          "old_text": "freez(rs->fullname)",
          "new_text": null,
          "old_line_content": "    freez(rs->fullname);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2729,
          "old_api": "buffer_tostring",
          "new_api": null,
          "old_text": "buffer_tostring(rc->warning->error_msg)",
          "new_text": null,
          "old_line_content": "                                  rc->chart?rc->chart:\"NOCHART\", rc->name, buffer_tostring(rc->warning->error_msg));",
          "new_line_content": "                            rc->rrdcalc_flags |= RRDCALC_FLAG_WARN_ERROR;",
          "content_same": false
        },
        {
          "line": 2733,
          "old_api": "unlikely",
          "new_api": null,
          "old_text": "unlikely(rc->rrdcalc_flags & RRDCALC_FLAG_WARN_ERROR)",
          "new_text": null,
          "old_line_content": "                        if(unlikely(rc->rrdcalc_flags & RRDCALC_FLAG_WARN_ERROR))",
          "new_line_content": "                    }",
          "content_same": false
        },
        {
          "line": 2736,
          "old_api": "debug",
          "new_api": null,
          "old_text": "debug(D_HEALTH, \"Health alarm '%s.%s': warning expression gave value \"\n                                CALCULATED_NUMBER_FORMAT\n                                \": %s (source: %s)\",\n                              rc->chart?rc->chart:\"NOCHART\", rc->name,\n                              rc->warning->result,\n                              buffer_tostring(rc->warning->error_msg),\n                              rc->source\n                        )",
          "new_text": null,
          "old_line_content": "                        debug(D_HEALTH, \"Health alarm '%s.%s': warning expression gave value \"",
          "new_line_content": "                            rc->rrdcalc_flags &= ~RRDCALC_FLAG_WARN_ERROR;",
          "content_same": false
        },
        {
          "line": 693,
          "old_api": "debug",
          "new_api": null,
          "old_text": "debug(D_VARIABLES, \"RRDDIMSET create for chart id '%s' name '%s', dimension id '%s', name '%s%s%s'\", st->id, st->name, rd->id, (prefix)?prefix:\"\", rd->name, (suffix)?suffix:\"\")",
          "new_text": null,
          "old_line_content": "    debug(D_VARIABLES, \"RRDDIMSET create for chart id '%s' name '%s', dimension id '%s', name '%s%s%s'\", st->id, st->name, rd->id, (prefix)?prefix:\"\", rd->name, (suffix)?suffix:\"\");",
          "new_line_content": "    RRDSET *st = rd->rrdset;",
          "content_same": false
        },
        {
          "line": 2741,
          "old_api": "buffer_tostring",
          "new_api": null,
          "old_text": "buffer_tostring(rc->warning->error_msg)",
          "new_text": null,
          "old_line_content": "                              buffer_tostring(rc->warning->error_msg),",
          "new_line_content": "                              rc->chart?rc->chart:\"NOCHART\", rc->name,",
          "content_same": false
        },
        {
          "line": 2745,
          "old_api": "rrdcalc_value2status",
          "new_api": null,
          "old_text": "rrdcalc_value2status(rc->warning->result)",
          "new_text": null,
          "old_line_content": "                        warning_status = rrdcalc_value2status(rc->warning->result);",
          "new_line_content": "                        );",
          "content_same": false
        },
        {
          "line": 699,
          "old_api": "callocz",
          "new_api": null,
          "old_text": "callocz(1, sizeof(RRDDIMVAR))",
          "new_text": null,
          "old_line_content": "    RRDDIMVAR *rs = (RRDDIMVAR *)callocz(1, sizeof(RRDDIMVAR));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2749,
          "old_api": "likely",
          "new_api": null,
          "old_text": "likely(rc->critical)",
          "new_text": null,
          "old_line_content": "                if(likely(rc->critical)) {",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 702,
          "old_api": "strdupz",
          "new_api": null,
          "old_text": "strdupz(suffix)",
          "new_text": null,
          "old_line_content": "    rs->suffix = strdupz(suffix);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2750,
          "old_api": "expression_evaluate",
          "new_api": null,
          "old_text": "expression_evaluate(rc->critical)",
          "new_text": null,
          "old_line_content": "                    if(unlikely(!expression_evaluate(rc->critical))) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 705,
          "old_api": "strdupz",
          "new_api": null,
          "old_text": "strdupz(buffer)",
          "new_text": null,
          "old_line_content": "    rs->id = strdupz(buffer);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2753,
          "old_api": "debug",
          "new_api": null,
          "old_text": "debug(D_HEALTH, \"Health alarm '%s.%s': critical expression failed with error: %s\",\n                              rc->chart?rc->chart:\"NOCHART\", rc->name, buffer_tostring(rc->critical->error_msg))",
          "new_text": null,
          "old_line_content": "                        debug(D_HEALTH, \"Health alarm '%s.%s': critical expression failed with error: %s\",",
          "new_line_content": "                        // calculation failed",
          "content_same": false
        },
        {
          "line": 2754,
          "old_api": "buffer_tostring",
          "new_api": null,
          "old_text": "buffer_tostring(rc->critical->error_msg)",
          "new_text": null,
          "old_line_content": "                              rc->chart?rc->chart:\"NOCHART\", rc->name, buffer_tostring(rc->critical->error_msg));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 708,
          "old_api": "strdupz",
          "new_api": null,
          "old_text": "strdupz(buffer)",
          "new_text": null,
          "old_line_content": "    rs->name = strdupz(buffer);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 711,
          "old_api": "strdupz",
          "new_api": null,
          "old_text": "strdupz(buffer)",
          "new_text": null,
          "old_line_content": "    rs->fullidid = strdupz(buffer);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2759,
          "old_api": "buffer_tostring",
          "new_api": null,
          "old_text": "buffer_tostring(rc->critical->error_msg)",
          "new_text": null,
          "old_line_content": "                                  rc->chart?rc->chart:\"NOCHART\", rc->name, buffer_tostring(rc->critical->error_msg));",
          "new_line_content": "                            rc->rrdcalc_flags |= RRDCALC_FLAG_CRIT_ERROR;",
          "content_same": false
        },
        {
          "line": 714,
          "old_api": "strdupz",
          "new_api": null,
          "old_text": "strdupz(buffer)",
          "new_text": null,
          "old_line_content": "    rs->fullidname = strdupz(buffer);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2763,
          "old_api": "unlikely",
          "new_api": null,
          "old_text": "unlikely(rc->rrdcalc_flags & RRDCALC_FLAG_CRIT_ERROR)",
          "new_text": null,
          "old_line_content": "                        if(unlikely(rc->rrdcalc_flags & RRDCALC_FLAG_CRIT_ERROR))",
          "new_line_content": "                    }",
          "content_same": false
        },
        {
          "line": 717,
          "old_api": "strdupz",
          "new_api": null,
          "old_text": "strdupz(buffer)",
          "new_text": null,
          "old_line_content": "    rs->fullnameid = strdupz(buffer);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2766,
          "old_api": "debug",
          "new_api": null,
          "old_text": "debug(D_HEALTH, \"Health alarm '%s.%s': critical expression gave value \"\n                                CALCULATED_NUMBER_FORMAT\n                                \": %s (source: %s)\",\n                              rc->chart?rc->chart:\"NOCHART\", rc->name,\n                              rc->critical->result,\n                              buffer_tostring(rc->critical->error_msg),\n                              rc->source\n                        )",
          "new_text": null,
          "old_line_content": "                        debug(D_HEALTH, \"Health alarm '%s.%s': critical expression gave value \"",
          "new_line_content": "                            rc->rrdcalc_flags &= ~RRDCALC_FLAG_CRIT_ERROR;",
          "content_same": false
        },
        {
          "line": 720,
          "old_api": "strdupz",
          "new_api": null,
          "old_text": "strdupz(buffer)",
          "new_text": null,
          "old_line_content": "    rs->fullnamename = strdupz(buffer);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2771,
          "old_api": "buffer_tostring",
          "new_api": null,
          "old_text": "buffer_tostring(rc->critical->error_msg)",
          "new_text": null,
          "old_line_content": "                              buffer_tostring(rc->critical->error_msg),",
          "new_line_content": "                              rc->chart?rc->chart:\"NOCHART\", rc->name,",
          "content_same": false
        },
        {
          "line": 727,
          "old_api": "rrdvar_create_and_index",
          "new_api": null,
          "old_text": "rrdvar_create_and_index(\"local\", &st->variables_root_index, rs->id, rs->type, rs->value)",
          "new_text": null,
          "old_line_content": "    rs->local_id     = rrdvar_create_and_index(\"local\", &st->variables_root_index, rs->id, rs->type, rs->value);",
          "new_line_content": "    rs->rrddim = rd;",
          "content_same": false
        },
        {
          "line": 728,
          "old_api": "rrdvar_create_and_index",
          "new_api": null,
          "old_text": "rrdvar_create_and_index(\"local\", &st->variables_root_index, rs->name, rs->type, rs->value)",
          "new_text": null,
          "old_line_content": "    rs->local_name   = rrdvar_create_and_index(\"local\", &st->variables_root_index, rs->name, rs->type, rs->value);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2775,
          "old_api": "rrdcalc_value2status",
          "new_api": null,
          "old_text": "rrdcalc_value2status(rc->critical->result)",
          "new_text": null,
          "old_line_content": "                        critical_status = rrdcalc_value2status(rc->critical->result);",
          "new_line_content": "                        );",
          "content_same": false
        },
        {
          "line": 731,
          "old_api": "rrdvar_create_and_index",
          "new_api": null,
          "old_text": "rrdvar_create_and_index(\"family\", &st->rrdfamily->variables_root_index, rs->name, rs->type, rs->value)",
          "new_text": null,
          "old_line_content": "    rs->family_name  = rrdvar_create_and_index(\"family\", &st->rrdfamily->variables_root_index, rs->name, rs->type, rs->value);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 734,
          "old_api": "rrdvar_create_and_index",
          "new_api": null,
          "old_text": "rrdvar_create_and_index(\"host\", &st->rrdhost->variables_root_index, rs->fullidname, rs->type, rs->value)",
          "new_text": null,
          "old_line_content": "    rs->host_fullidname   = rrdvar_create_and_index(\"host\", &st->rrdhost->variables_root_index, rs->fullidname, rs->type, rs->value);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 746,
          "old_api": "debug",
          "new_api": null,
          "old_text": "debug(D_VARIABLES, \"RRDDIMSET rename for chart id '%s' name '%s', dimension id '%s', name '%s'\", st->id, st->name, rd->id, rd->name)",
          "new_text": null,
          "old_line_content": "    debug(D_VARIABLES, \"RRDDIMSET rename for chart id '%s' name '%s', dimension id '%s', name '%s'\", st->id, st->name, rd->id, rd->name);",
          "new_line_content": "void rrddimvar_rename_all(RRDDIM *rd) {",
          "content_same": false
        },
        {
          "line": 752,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(rd->name, rs->name)",
          "new_text": null,
          "old_line_content": "        if (strcmp(rd->name, rs->name)) {",
          "new_line_content": "        next = rs->next;",
          "content_same": false
        },
        {
          "line": 757,
          "old_api": "rrdvar_free",
          "new_api": null,
          "old_text": "rrdvar_free(st->rrdhost, &st->variables_root_index, rs->local_name)",
          "new_text": null,
          "old_line_content": "            rrdvar_free(st->rrdhost, &st->variables_root_index, rs->local_name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 758,
          "old_api": "freez",
          "new_api": null,
          "old_text": "freez(rs->name)",
          "new_text": null,
          "old_line_content": "            freez(rs->name);",
          "new_line_content": "            // name",
          "content_same": false
        },
        {
          "line": 764,
          "old_api": "freez",
          "new_api": null,
          "old_text": "freez(rs->fullidname)",
          "new_text": null,
          "old_line_content": "            freez(rs->fullidname);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 771,
          "old_api": "rrdvar_free",
          "new_api": null,
          "old_text": "rrdvar_free(st->rrdhost, &st->rrdhost->variables_root_index, rs->host_fullnameid)",
          "new_text": null,
          "old_line_content": "            rrdvar_free(st->rrdhost, &st->rrdhost->variables_root_index, rs->host_fullnameid);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 772,
          "old_api": "freez",
          "new_api": null,
          "old_text": "freez(rs->fullnameid)",
          "new_text": null,
          "old_line_content": "            freez(rs->fullnameid);",
          "new_line_content": "            // fullnameid",
          "content_same": false
        },
        {
          "line": 779,
          "old_api": "rrdvar_free",
          "new_api": null,
          "old_text": "rrdvar_free(st->rrdhost, &st->rrdhost->variables_root_index, rs->host_fullnamename)",
          "new_text": null,
          "old_line_content": "            rrdvar_free(st->rrdhost, &st->rrdhost->variables_root_index, rs->host_fullnamename);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 780,
          "old_api": "freez",
          "new_api": null,
          "old_text": "freez(rs->fullnamename)",
          "new_text": null,
          "old_line_content": "            freez(rs->fullnamename);",
          "new_line_content": "            // fullnamename",
          "content_same": false
        },
        {
          "line": 2836,
          "old_api": "health_alarm_log",
          "new_api": null,
          "old_text": "health_alarm_log(&localhost, rc->id, rc->next_event_id++, now, rc->name, rc->rrdset->id, rc->rrdset->family, rc->exec, rc->recipient, now - rc->last_status_change, rc->old_value, rc->value, rc->status, status, rc->source, rc->units, rc->info, rc->delay_last)",
          "new_text": null,
          "old_line_content": "                    health_alarm_log(&localhost, rc->id, rc->next_event_id++, now, rc->name, rc->rrdset->id, rc->rrdset->family, rc->exec, rc->recipient, now - rc->last_status_change, rc->old_value, rc->value, rc->status, status, rc->source, rc->units, rc->info, rc->delay_last);",
          "new_line_content": "                    rc->delay_last = delay;",
          "content_same": false
        },
        {
          "line": 792,
          "old_api": "debug",
          "new_api": null,
          "old_text": "debug(D_VARIABLES, \"RRDDIMSET free for chart id '%s' name '%s', dimension id '%s', name '%s', prefix='%s', suffix='%s'\", st->id, st->name, rd->id, rd->name, rs->prefix, rs->suffix)",
          "new_text": null,
          "old_line_content": "    debug(D_VARIABLES, \"RRDDIMSET free for chart id '%s' name '%s', dimension id '%s', name '%s', prefix='%s', suffix='%s'\", st->id, st->name, rd->id, rd->name, rs->prefix, rs->suffix);",
          "new_line_content": "    RRDDIM *rd = rs->rrddim;",
          "content_same": false
        },
        {
          "line": 795,
          "old_api": "rrdvar_free",
          "new_api": null,
          "old_text": "rrdvar_free(st->rrdhost, &st->variables_root_index, rs->local_name)",
          "new_text": null,
          "old_line_content": "    rrdvar_free(st->rrdhost, &st->variables_root_index, rs->local_name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 798,
          "old_api": "rrdvar_free",
          "new_api": null,
          "old_text": "rrdvar_free(st->rrdhost, &st->rrdfamily->variables_root_index, rs->family_name)",
          "new_text": null,
          "old_line_content": "    rrdvar_free(st->rrdhost, &st->rrdfamily->variables_root_index, rs->family_name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2848,
          "old_api": "rrdhost_unlock",
          "new_api": null,
          "old_text": "rrdhost_unlock(&localhost)",
          "new_text": null,
          "old_line_content": "            rrdhost_unlock(&localhost);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 801,
          "old_api": "rrdvar_free",
          "new_api": null,
          "old_text": "rrdvar_free(st->rrdhost, &st->rrdhost->variables_root_index, rs->host_fullidname)",
          "new_text": null,
          "old_line_content": "    rrdvar_free(st->rrdhost, &st->rrdhost->variables_root_index, rs->host_fullidname);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2851,
          "old_api": "pthread_setcancelstate",
          "new_api": null,
          "old_text": "pthread_setcancelstate(oldstate, NULL)",
          "new_text": null,
          "old_line_content": "        if (unlikely(pthread_setcancelstate(oldstate, NULL) != 0))",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2852,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"Cannot set pthread cancel state to RESTORE (%d).\", oldstate)",
          "new_text": null,
          "old_line_content": "            error(\"Cannot set pthread cancel state to RESTORE (%d).\", oldstate);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 806,
          "old_api": "debug",
          "new_api": null,
          "old_text": "debug(D_VARIABLES, \"RRDDIMSET removing first entry for chart id '%s' name '%s', dimension id '%s', name '%s'\", st->id, st->name, rd->id, rd->name)",
          "new_text": null,
          "old_line_content": "        debug(D_VARIABLES, \"RRDDIMSET removing first entry for chart id '%s' name '%s', dimension id '%s', name '%s'\", st->id, st->name, rd->id, rd->name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 810,
          "old_api": "debug",
          "new_api": null,
          "old_text": "debug(D_VARIABLES, \"RRDDIMSET removing non-first entry for chart id '%s' name '%s', dimension id '%s', name '%s'\", st->id, st->name, rd->id, rd->name)",
          "new_text": null,
          "old_line_content": "        debug(D_VARIABLES, \"RRDDIMSET removing non-first entry for chart id '%s' name '%s', dimension id '%s', name '%s'\", st->id, st->name, rd->id, rd->name);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2859,
          "old_api": "health_alarm_log_process",
          "new_api": null,
          "old_text": "health_alarm_log_process(&localhost)",
          "new_text": null,
          "old_line_content": "        health_alarm_log_process(&localhost);",
          "new_line_content": "        // execute notifications",
          "content_same": false
        },
        {
          "line": 813,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"RRDDIMVAR '%s' not found in dimension '%s/%s' variables linked list\", rs->name, st->id, rd->id)",
          "new_text": null,
          "old_line_content": "        if(!t) error(\"RRDDIMVAR '%s' not found in dimension '%s/%s' variables linked list\", rs->name, st->id, rd->id);",
          "new_line_content": "        RRDDIMVAR *t;",
          "content_same": false
        },
        {
          "line": 2864,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "        now = time(NULL);",
          "new_line_content": "            break;",
          "content_same": false
        },
        {
          "line": 817,
          "old_api": "freez",
          "new_api": null,
          "old_text": "freez(rs->prefix)",
          "new_text": null,
          "old_line_content": "    freez(rs->prefix);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 818,
          "old_api": "freez",
          "new_api": null,
          "old_text": "freez(rs->suffix)",
          "new_text": null,
          "old_line_content": "    freez(rs->suffix);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2871,
          "old_api": "debug",
          "new_api": null,
          "old_text": "debug(D_HEALTH, \"Health monitoring iteration no %u done. Next iteration now\", loop)",
          "new_text": null,
          "old_line_content": "            debug(D_HEALTH, \"Health monitoring iteration no %u done. Next iteration now\", loop);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2875,
          "old_api": "buffer_free",
          "new_api": null,
          "old_text": "buffer_free(wb)",
          "new_text": null,
          "old_line_content": "    buffer_free(wb);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2878,
          "old_api": "pthread_exit",
          "new_api": null,
          "old_text": "pthread_exit(NULL)",
          "new_text": null,
          "old_line_content": "    pthread_exit(NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 855,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"Unknown alarm status %d\", status)",
          "new_text": null,
          "old_line_content": "            error(\"Unknown alarm status %d\", status);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 861,
          "old_api": "debug",
          "new_api": null,
          "old_text": "debug(D_HEALTH, \"Health linking alarm '%s.%s' to chart '%s' of host '%s'\", rc->chart?rc->chart:\"NOCHART\", rc->name, st->id, st->rrdhost->hostname)",
          "new_text": null,
          "old_line_content": "    debug(D_HEALTH, \"Health linking alarm '%s.%s' to chart '%s' of host '%s'\", rc->chart?rc->chart:\"NOCHART\", rc->name, st->id, st->rrdhost->hostname);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 875,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"Health alarm '%s.%s' has update every %d, less than chart update every %d. Setting alarm update frequency to %d.\", rc->rrdset->id, rc->name, rc->update_every, rc->rrdset->update_every, rc->rrdset->update_every)",
          "new_text": null,
          "old_line_content": "        error(\"Health alarm '%s.%s' has update every %d, less than chart update every %d. Setting alarm update frequency to %d.\", rc->rrdset->id, rc->name, rc->update_every, rc->rrdset->update_every, rc->rrdset->update_every);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 879,
          "old_api": "isnan",
          "new_api": null,
          "old_text": "isnan(st->green)",
          "new_text": null,
          "old_line_content": "    if(!isnan(rc->green) && isnan(st->green)) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 880,
          "old_api": "debug",
          "new_api": null,
          "old_text": "debug(D_HEALTH, \"Health alarm '%s.%s' green threshold set from %Lf to %Lf.\", rc->rrdset->id, rc->name, rc->rrdset->green, rc->green)",
          "new_text": null,
          "old_line_content": "        debug(D_HEALTH, \"Health alarm '%s.%s' green threshold set from %Lf to %Lf.\", rc->rrdset->id, rc->name, rc->rrdset->green, rc->green);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 884,
          "old_api": "isnan",
          "new_api": null,
          "old_text": "isnan(st->red)",
          "new_text": null,
          "old_line_content": "    if(!isnan(rc->red) && isnan(st->red)) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 885,
          "old_api": "debug",
          "new_api": null,
          "old_text": "debug(D_HEALTH, \"Health alarm '%s.%s' red threshold set from %Lf to %Lf.\", rc->rrdset->id, rc->name, rc->rrdset->red, rc->red)",
          "new_text": null,
          "old_line_content": "        debug(D_HEALTH, \"Health alarm '%s.%s' red threshold set from %Lf to %Lf.\", rc->rrdset->id, rc->name, rc->rrdset->red, rc->red);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 889,
          "old_api": "rrdvar_create_and_index",
          "new_api": null,
          "old_text": "rrdvar_create_and_index(\"local\",  &st->variables_root_index, rc->name, RRDVAR_TYPE_CALCULATED, &rc->value)",
          "new_text": null,
          "old_line_content": "    rc->local  = rrdvar_create_and_index(\"local\",  &st->variables_root_index, rc->name, RRDVAR_TYPE_CALCULATED, &rc->value);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 890,
          "old_api": "rrdvar_create_and_index",
          "new_api": null,
          "old_text": "rrdvar_create_and_index(\"family\", &st->rrdfamily->variables_root_index, rc->name, RRDVAR_TYPE_CALCULATED, &rc->value)",
          "new_text": null,
          "old_line_content": "    rc->family = rrdvar_create_and_index(\"family\", &st->rrdfamily->variables_root_index, rc->name, RRDVAR_TYPE_CALCULATED, &rc->value);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 893,
          "old_api": "snprintfz",
          "new_api": null,
          "old_text": "snprintfz(fullname, RRDVAR_MAX_LENGTH, \"%s.%s\", st->id, rc->name)",
          "new_text": null,
          "old_line_content": "    snprintfz(fullname, RRDVAR_MAX_LENGTH, \"%s.%s\", st->id, rc->name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 894,
          "old_api": "rrdvar_create_and_index",
          "new_api": null,
          "old_text": "rrdvar_create_and_index(\"host\", &st->rrdhost->variables_root_index, fullname, RRDVAR_TYPE_CALCULATED, &rc->value)",
          "new_text": null,
          "old_line_content": "    rc->hostid   = rrdvar_create_and_index(\"host\", &st->rrdhost->variables_root_index, fullname, RRDVAR_TYPE_CALCULATED, &rc->value);",
          "new_line_content": "    char fullname[RRDVAR_MAX_LENGTH + 1];",
          "content_same": false
        },
        {
          "line": 897,
          "old_api": "rrdvar_create_and_index",
          "new_api": null,
          "old_text": "rrdvar_create_and_index(\"host\", &st->rrdhost->variables_root_index, fullname, RRDVAR_TYPE_CALCULATED, &rc->value)",
          "new_text": null,
          "old_line_content": "    rc->hostname = rrdvar_create_and_index(\"host\", &st->rrdhost->variables_root_index, fullname, RRDVAR_TYPE_CALCULATED, &rc->value);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 902,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "        time_t now = time(NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 903,
          "old_api": "health_alarm_log",
          "new_api": null,
          "old_text": "health_alarm_log(st->rrdhost, rc->id, rc->next_event_id++, now, rc->name, rc->rrdset->id, rc->rrdset->family, rc->exec, rc->recipient, now - rc->last_status_change, rc->old_value, rc->value, rc->status, RRDCALC_STATUS_UNINITIALIZED, rc->source, rc->units, rc->info, 0)",
          "new_text": null,
          "old_line_content": "        health_alarm_log(st->rrdhost, rc->id, rc->next_event_id++, now, rc->name, rc->rrdset->id, rc->rrdset->family, rc->exec, rc->recipient, now - rc->last_status_change, rc->old_value, rc->value, rc->status, RRDCALC_STATUS_UNINITIALIZED, rc->source, rc->units, rc->info, 0);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 908,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(rc->chart, st->id)",
          "new_text": null,
          "old_line_content": "    if(     (rc->hash_chart == st->hash      && !strcmp(rc->chart, st->id)) ||",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 909,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(rc->chart, st->name)",
          "new_text": null,
          "old_line_content": "            (rc->hash_chart == st->hash_name && !strcmp(rc->chart, st->name)))",
          "new_line_content": "static inline int rrdcalc_is_matching_this_rrdset(RRDCALC *rc, RRDSET *st) {",
          "content_same": false
        },
        {
          "line": 921,
          "old_api": "unlikely",
          "new_api": null,
          "old_text": "unlikely(rc->rrdset)",
          "new_text": null,
          "old_line_content": "        if(unlikely(rc->rrdset))",
          "new_line_content": "    RRDCALC *rc;",
          "content_same": false
        },
        {
          "line": 924,
          "old_api": "rrdcalc_is_matching_this_rrdset",
          "new_api": null,
          "old_text": "rrdcalc_is_matching_this_rrdset(rc, st)",
          "new_text": null,
          "old_line_content": "        if(unlikely(rrdcalc_is_matching_this_rrdset(rc, st)))",
          "new_line_content": "            continue;",
          "content_same": false
        },
        {
          "line": 925,
          "old_api": "rrdsetcalc_link",
          "new_api": null,
          "old_text": "rrdsetcalc_link(st, rc)",
          "new_text": null,
          "old_line_content": "            rrdsetcalc_link(st, rc);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 934,
          "old_api": "debug",
          "new_api": null,
          "old_text": "debug(D_HEALTH, \"Requested to unlink RRDCALC '%s.%s' which is not linked to any RRDSET\", rc->chart?rc->chart:\"NOCHART\", rc->name)",
          "new_text": null,
          "old_line_content": "        debug(D_HEALTH, \"Requested to unlink RRDCALC '%s.%s' which is not linked to any RRDSET\", rc->chart?rc->chart:\"NOCHART\", rc->name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 935,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"Requested to unlink RRDCALC '%s.%s' which is not linked to any RRDSET\", rc->chart?rc->chart:\"NOCHART\", rc->name)",
          "new_text": null,
          "old_line_content": "        error(\"Requested to unlink RRDCALC '%s.%s' which is not linked to any RRDSET\", rc->chart?rc->chart:\"NOCHART\", rc->name);",
          "new_line_content": "    if(!st) {",
          "content_same": false
        },
        {
          "line": 940,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(NULL)",
          "new_text": null,
          "old_line_content": "        time_t now = time(NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 941,
          "old_api": "health_alarm_log",
          "new_api": null,
          "old_text": "health_alarm_log(st->rrdhost, rc->id, rc->next_event_id++, now, rc->name, rc->rrdset->id, rc->rrdset->family, rc->exec, rc->recipient, now - rc->last_status_change, rc->old_value, rc->value, rc->status, RRDCALC_STATUS_REMOVED, rc->source, rc->units, rc->info, 0)",
          "new_text": null,
          "old_line_content": "        health_alarm_log(st->rrdhost, rc->id, rc->next_event_id++, now, rc->name, rc->rrdset->id, rc->rrdset->family, rc->exec, rc->recipient, now - rc->last_status_change, rc->old_value, rc->value, rc->status, RRDCALC_STATUS_REMOVED, rc->source, rc->units, rc->info, 0);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 946,
          "old_api": "debug",
          "new_api": null,
          "old_text": "debug(D_HEALTH, \"Health unlinking alarm '%s.%s' from chart '%s' of host '%s'\", rc->chart?rc->chart:\"NOCHART\", rc->name, st->id, host->hostname)",
          "new_text": null,
          "old_line_content": "    debug(D_HEALTH, \"Health unlinking alarm '%s.%s' from chart '%s' of host '%s'\", rc->chart?rc->chart:\"NOCHART\", rc->name, st->id, host->hostname);",
          "new_line_content": "    RRDHOST *host = st->rrdhost;",
          "content_same": false
        },
        {
          "line": 960,
          "old_api": "rrdvar_free",
          "new_api": null,
          "old_text": "rrdvar_free(st->rrdhost, &st->variables_root_index, rc->local)",
          "new_text": null,
          "old_line_content": "    rrdvar_free(st->rrdhost, &st->variables_root_index, rc->local);",
          "new_line_content": "    rc->rrdset_prev = rc->rrdset_next = NULL;",
          "content_same": false
        },
        {
          "line": 963,
          "old_api": "rrdvar_free",
          "new_api": null,
          "old_text": "rrdvar_free(st->rrdhost, &st->rrdfamily->variables_root_index, rc->family)",
          "new_text": null,
          "old_line_content": "    rrdvar_free(st->rrdhost, &st->rrdfamily->variables_root_index, rc->family);",
          "new_line_content": "    rc->local = NULL;",
          "content_same": false
        },
        {
          "line": 966,
          "old_api": "rrdvar_free",
          "new_api": null,
          "old_text": "rrdvar_free(st->rrdhost, &st->rrdhost->variables_root_index, rc->hostid)",
          "new_text": null,
          "old_line_content": "    rrdvar_free(st->rrdhost, &st->rrdhost->variables_root_index, rc->hostid);",
          "new_line_content": "    rc->family = NULL;",
          "content_same": false
        },
        {
          "line": 969,
          "old_api": "rrdvar_free",
          "new_api": null,
          "old_text": "rrdvar_free(st->rrdhost, &st->rrdhost->variables_root_index, rc->hostname)",
          "new_text": null,
          "old_line_content": "    rrdvar_free(st->rrdhost, &st->rrdhost->variables_root_index, rc->hostname);",
          "new_line_content": "    rc->hostid = NULL;",
          "content_same": false
        },
        {
          "line": 981,
          "old_api": "simple_hash",
          "new_api": null,
          "old_text": "simple_hash(name)",
          "new_text": null,
          "old_line_content": "    uint32_t hash = simple_hash(name);",
          "new_line_content": "RRDCALC *rrdcalc_find(RRDSET *st, const char *name) {",
          "content_same": false
        },
        {
          "line": 984,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(rc->name, name)",
          "new_text": null,
          "old_line_content": "        if(unlikely(rc->hash == hash && !strcmp(rc->name, name)))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 994,
          "old_api": "unlikely",
          "new_api": null,
          "old_text": "unlikely(!chart)",
          "new_text": null,
          "old_line_content": "    if(unlikely(!chart)) {",
          "new_line_content": "    RRDCALC *rc;",
          "content_same": false
        },
        {
          "line": 995,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"attempt to find RRDCALC '%s' without giving a chart name\", name)",
          "new_text": null,
          "old_line_content": "        error(\"attempt to find RRDCALC '%s' without giving a chart name\", name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 999,
          "old_api": "simple_hash",
          "new_api": null,
          "old_text": "simple_hash(chart)",
          "new_text": null,
          "old_line_content": "    if(unlikely(!hash_chart)) hash_chart = simple_hash(chart);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1000,
          "old_api": "simple_hash",
          "new_api": null,
          "old_text": "simple_hash(name)",
          "new_text": null,
          "old_line_content": "    if(unlikely(!hash_name))  hash_name  = simple_hash(name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1004,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(chart, rc->chart)",
          "new_text": null,
          "old_line_content": "        if (unlikely(rc->chart && rc->hash == hash_name && rc->hash_chart == hash_chart && !strcmp(name, rc->name) && !strcmp(chart, rc->chart))) {",
          "new_line_content": "    // make sure it does not already exist",
          "content_same": false
        },
        {
          "line": 1005,
          "old_api": "debug",
          "new_api": null,
          "old_text": "debug(D_HEALTH, \"Health alarm '%s.%s' already exists in host '%s'.\", chart, name, host->hostname)",
          "new_text": null,
          "old_line_content": "            debug(D_HEALTH, \"Health alarm '%s.%s' already exists in host '%s'.\", chart, name, host->hostname);",
          "new_line_content": "    for(rc = host->alarms; rc ; rc = rc->next) {",
          "content_same": false
        },
        {
          "line": 1016,
          "old_api": "simple_hash",
          "new_api": null,
          "old_text": "simple_hash(chart)",
          "new_text": null,
          "old_line_content": "        uint32_t hash_chart = simple_hash(chart);",
          "new_line_content": "static inline uint32_t rrdcalc_get_unique_id(RRDHOST *host, const char *chart, const char *name, uint32_t *next_event_id) {",
          "content_same": false
        },
        {
          "line": 1017,
          "old_api": "simple_hash",
          "new_api": null,
          "old_text": "simple_hash(name)",
          "new_text": null,
          "old_line_content": "        uint32_t hash_name = simple_hash(name);",
          "new_line_content": "    if(chart && name) {",
          "content_same": false
        },
        {
          "line": 1022,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(chart, ae->chart)",
          "new_text": null,
          "old_line_content": "            if(unlikely(ae->hash_name == hash_name && ae->hash_chart == hash_chart && !strcmp(name, ae->name) && !strcmp(chart, ae->chart))) {",
          "new_line_content": "        ALARM_ENTRY *ae;",
          "content_same": false
        },
        {
          "line": 1033,
          "old_api": "rrdhost_check_rdlock",
          "new_api": null,
          "old_text": "rrdhost_check_rdlock(host)",
          "new_text": null,
          "old_line_content": "    rrdhost_check_rdlock(host);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1060,
          "old_api": "likely",
          "new_api": null,
          "old_text": "likely(host->alarms)",
          "new_text": null,
          "old_line_content": "    if(likely(host->alarms)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1073,
          "old_api": "rrdcalc_is_matching_this_rrdset",
          "new_api": null,
          "old_text": "rrdcalc_is_matching_this_rrdset(rc, st)",
          "new_text": null,
          "old_line_content": "        if(rrdcalc_is_matching_this_rrdset(rc, st)) {",
          "new_line_content": "    RRDSET *st;",
          "content_same": false
        },
        {
          "line": 1074,
          "old_api": "rrdsetcalc_link",
          "new_api": null,
          "old_text": "rrdsetcalc_link(st, rc)",
          "new_text": null,
          "old_line_content": "            rrdsetcalc_link(st, rc);",
          "new_line_content": "    for(st = host->rrdset_root; st ; st = st->next) {",
          "content_same": false
        },
        {
          "line": 1082,
          "old_api": "debug",
          "new_api": null,
          "old_text": "debug(D_HEALTH, \"Health creating dynamic alarm (from template) '%s.%s'\", chart, rt->name)",
          "new_text": null,
          "old_line_content": "    debug(D_HEALTH, \"Health creating dynamic alarm (from template) '%s.%s'\", chart, rt->name);",
          "new_line_content": "static inline RRDCALC *rrdcalc_create(RRDHOST *host, RRDCALCTEMPLATE *rt, const char *chart) {",
          "content_same": false
        },
        {
          "line": 1087,
          "old_api": "callocz",
          "new_api": null,
          "old_text": "callocz(1, sizeof(RRDCALC))",
          "new_text": null,
          "old_line_content": "    RRDCALC *rc = callocz(1, sizeof(RRDCALC));",
          "new_line_content": "        return NULL;",
          "content_same": false
        },
        {
          "line": 1090,
          "old_api": "strdupz",
          "new_api": null,
          "old_text": "strdupz(rt->name)",
          "new_text": null,
          "old_line_content": "    rc->name = strdupz(rt->name);",
          "new_line_content": "    rc->next_event_id = 1;",
          "content_same": false
        },
        {
          "line": 1113,
          "old_api": "strdupz",
          "new_api": null,
          "old_text": "strdupz(rt->exec)",
          "new_text": null,
          "old_line_content": "    if(rt->exec) rc->exec = strdupz(rt->exec);",
          "new_line_content": "    rc->options = rt->options;",
          "content_same": false
        },
        {
          "line": 1114,
          "old_api": "strdupz",
          "new_api": null,
          "old_text": "strdupz(rt->recipient)",
          "new_text": null,
          "old_line_content": "    if(rt->recipient) rc->recipient = strdupz(rt->recipient);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1120,
          "old_api": "expression_parse",
          "new_api": null,
          "old_text": "expression_parse(rt->calculation->source, NULL, NULL)",
          "new_text": null,
          "old_line_content": "        rc->calculation = expression_parse(rt->calculation->source, NULL, NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1125,
          "old_api": "expression_parse",
          "new_api": null,
          "old_text": "expression_parse(rt->warning->source, NULL, NULL)",
          "new_text": null,
          "old_line_content": "        rc->warning = expression_parse(rt->warning->source, NULL, NULL);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1130,
          "old_api": "expression_parse",
          "new_api": null,
          "old_text": "expression_parse(rt->critical->source, NULL, NULL)",
          "new_text": null,
          "old_line_content": "        rc->critical = expression_parse(rt->critical->source, NULL, NULL);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1135,
          "old_api": "debug",
          "new_api": null,
          "old_text": "debug(D_HEALTH, \"Health runtime added alarm '%s.%s': exec '%s', recipient '%s', green %Lf, red %Lf, lookup: group %d, after %d, before %d, options %u, dimensions '%s', update every %d, calculation '%s', warning '%s', critical '%s', source '%s', delay up %d, delay down %d, delay max %d, delay_multiplier %f\",\n          (rc->chart)?rc->chart:\"NOCHART\",\n          rc->name,\n          (rc->exec)?rc->exec:\"DEFAULT\",\n          (rc->recipient)?rc->recipient:\"DEFAULT\",\n          rc->green,\n          rc->red,\n          rc->group,\n          rc->after,\n          rc->before,\n          rc->options,\n          (rc->dimensions)?rc->dimensions:\"NONE\",\n          rc->update_every,\n          (rc->calculation)?rc->calculation->parsed_as:\"NONE\",\n          (rc->warning)?rc->warning->parsed_as:\"NONE\",\n          (rc->critical)?rc->critical->parsed_as:\"NONE\",\n          rc->source,\n          rc->delay_up_duration,\n          rc->delay_down_duration,\n          rc->delay_max_duration,\n          rc->delay_multiplier\n    )",
          "new_text": null,
          "old_line_content": "    debug(D_HEALTH, \"Health runtime added alarm '%s.%s': exec '%s', recipient '%s', green %Lf, red %Lf, lookup: group %d, after %d, before %d, options %u, dimensions '%s', update every %d, calculation '%s', warning '%s', critical '%s', source '%s', delay up %d, delay down %d, delay max %d, delay_multiplier %f\",",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1158,
          "old_api": "rrdcalc_create_part2",
          "new_api": null,
          "old_text": "rrdcalc_create_part2(host, rc)",
          "new_text": null,
          "old_line_content": "    rrdcalc_create_part2(host, rc);",
          "new_line_content": "    );",
          "content_same": false
        },
        {
          "line": 1165,
          "old_api": "debug",
          "new_api": null,
          "old_text": "debug(D_HEALTH, \"Health removing alarm '%s.%s' of host '%s'\", rc->chart?rc->chart:\"NOCHART\", rc->name, host->hostname)",
          "new_text": null,
          "old_line_content": "    debug(D_HEALTH, \"Health removing alarm '%s.%s' of host '%s'\", rc->chart?rc->chart:\"NOCHART\", rc->name, host->hostname);",
          "new_line_content": "    if(!rc) return;",
          "content_same": false
        },
        {
          "line": 1168,
          "old_api": "rrdsetcalc_unlink",
          "new_api": null,
          "old_text": "rrdsetcalc_unlink(rc)",
          "new_text": null,
          "old_line_content": "    if(rc->rrdset) rrdsetcalc_unlink(rc);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1171,
          "old_api": "unlikely",
          "new_api": null,
          "old_text": "unlikely(rc == host->alarms)",
          "new_text": null,
          "old_line_content": "    if(unlikely(rc == host->alarms))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1174,
          "old_api": "likely",
          "new_api": null,
          "old_text": "likely(host->alarms)",
          "new_text": null,
          "old_line_content": "    else if(likely(host->alarms)) {",
          "new_line_content": "        host->alarms = rc->next;",
          "content_same": false
        },
        {
          "line": 1180,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"Cannot unlink alarm '%s.%s' from host '%s': not found\", rc->chart?rc->chart:\"NOCHART\", rc->name, host->hostname)",
          "new_text": null,
          "old_line_content": "            error(\"Cannot unlink alarm '%s.%s' from host '%s': not found\", rc->chart?rc->chart:\"NOCHART\", rc->name, host->hostname);",
          "new_line_content": "            last->next = rc->next;",
          "content_same": false
        },
        {
          "line": 1183,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"Cannot unlink unlink '%s.%s' from host '%s': This host does not have any calculations\", rc->chart?rc->chart:\"NOCHART\", rc->name, host->hostname)",
          "new_text": null,
          "old_line_content": "        error(\"Cannot unlink unlink '%s.%s' from host '%s': This host does not have any calculations\", rc->chart?rc->chart:\"NOCHART\", rc->name, host->hostname);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1186,
          "old_api": "expression_free",
          "new_api": null,
          "old_text": "expression_free(rc->warning)",
          "new_text": null,
          "old_line_content": "    expression_free(rc->warning);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1190,
          "old_api": "freez",
          "new_api": null,
          "old_text": "freez(rc->chart)",
          "new_text": null,
          "old_line_content": "    freez(rc->chart);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1208,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(rt->context, st->context)",
          "new_text": null,
          "old_line_content": "        if(rt->hash_context == st->hash_context && !strcmp(rt->context, st->context)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1209,
          "old_api": "rrdcalc_create",
          "new_api": null,
          "old_text": "rrdcalc_create(st->rrdhost, rt, st->id)",
          "new_text": null,
          "old_line_content": "            RRDCALC *rc = rrdcalc_create(st->rrdhost, rt, st->id);",
          "new_line_content": "    for(rt = st->rrdhost->templates; rt ; rt = rt->next) {",
          "content_same": false
        },
        {
          "line": 1215,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"Health alarm '%s.%s' should be linked to chart '%s', but it is not\", rc->chart?rc->chart:\"NOCHART\", rc->name, st->id)",
          "new_text": null,
          "old_line_content": "                error(\"Health alarm '%s.%s' should be linked to chart '%s', but it is not\", rc->chart?rc->chart:\"NOCHART\", rc->name, st->id);",
          "new_line_content": "#ifdef NETDATA_INTERNAL_CHECKS",
          "content_same": false
        },
        {
          "line": 1222,
          "old_api": "debug",
          "new_api": null,
          "old_text": "debug(D_HEALTH, \"Health removing template '%s' of host '%s'\", rt->name, host->hostname)",
          "new_text": null,
          "old_line_content": "    debug(D_HEALTH, \"Health removing template '%s' of host '%s'\", rt->name, host->hostname);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1236,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"Cannot find RRDCALCTEMPLATE '%s' linked in host '%s'\", rt->name, host->hostname)",
          "new_text": null,
          "old_line_content": "                error(\"Cannot find RRDCALCTEMPLATE '%s' linked in host '%s'\", rt->name, host->hostname);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1240,
          "old_api": "expression_free",
          "new_api": null,
          "old_text": "expression_free(rt->calculation)",
          "new_text": null,
          "old_line_content": "    expression_free(rt->calculation);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1241,
          "old_api": "expression_free",
          "new_api": null,
          "old_text": "expression_free(rt->warning)",
          "new_text": null,
          "old_line_content": "    expression_free(rt->warning);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1245,
          "old_api": "freez",
          "new_api": null,
          "old_text": "freez(rt->exec)",
          "new_text": null,
          "old_line_content": "    freez(rt->exec);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1278,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"Health configuration for alarm '%s' does not have a chart\", rc->name)",
          "new_text": null,
          "old_line_content": "        error(\"Health configuration for alarm '%s' does not have a chart\", rc->name);",
          "new_line_content": "static inline int rrdcalc_add_alarm_from_config(RRDHOST *host, RRDCALC *rc) {",
          "content_same": false
        },
        {
          "line": 1283,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"Health configuration for alarm '%s.%s' has no frequency (parameter 'every'). Ignoring it.\", rc->chart?rc->chart:\"NOCHART\", rc->name)",
          "new_text": null,
          "old_line_content": "        error(\"Health configuration for alarm '%s.%s' has no frequency (parameter 'every'). Ignoring it.\", rc->chart?rc->chart:\"NOCHART\", rc->name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1287,
          "old_api": "RRDCALC_HAS_DB_LOOKUP",
          "new_api": null,
          "old_text": "RRDCALC_HAS_DB_LOOKUP(rc)",
          "new_text": null,
          "old_line_content": "    if(!RRDCALC_HAS_DB_LOOKUP(rc) && !rc->warning && !rc->critical) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1288,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"Health configuration for alarm '%s.%s' is useless (no calculation, no warning and no critical evaluation)\", rc->chart?rc->chart:\"NOCHART\", rc->name)",
          "new_text": null,
          "old_line_content": "        error(\"Health configuration for alarm '%s.%s' is useless (no calculation, no warning and no critical evaluation)\", rc->chart?rc->chart:\"NOCHART\", rc->name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1292,
          "old_api": "rrdcalc_exists",
          "new_api": null,
          "old_text": "rrdcalc_exists(host, rc->chart, rc->name, rc->hash_chart, rc->hash)",
          "new_text": null,
          "old_line_content": "    if (rrdcalc_exists(host, rc->chart, rc->name, rc->hash_chart, rc->hash))",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1295,
          "old_api": "rrdcalc_get_unique_id",
          "new_api": null,
          "old_text": "rrdcalc_get_unique_id(&localhost, rc->chart, rc->name, &rc->next_event_id)",
          "new_text": null,
          "old_line_content": "    rc->id = rrdcalc_get_unique_id(&localhost, rc->chart, rc->name, &rc->next_event_id);",
          "new_line_content": "        return 0;",
          "content_same": false
        },
        {
          "line": 1321,
          "old_api": "rrdcalc_create_part2",
          "new_api": null,
          "old_text": "rrdcalc_create_part2(host, rc)",
          "new_text": null,
          "old_line_content": "    rrdcalc_create_part2(host, rc);",
          "new_line_content": "    );",
          "content_same": false
        },
        {
          "line": 1326,
          "old_api": "unlikely",
          "new_api": null,
          "old_text": "unlikely(!rt->context)",
          "new_text": null,
          "old_line_content": "    if(unlikely(!rt->context)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1327,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"Health configuration for template '%s' does not have a context\", rt->name)",
          "new_text": null,
          "old_line_content": "        error(\"Health configuration for template '%s' does not have a context\", rt->name);",
          "new_line_content": "static inline int rrdcalctemplate_add_template_from_config(RRDHOST *host, RRDCALCTEMPLATE *rt) {",
          "content_same": false
        },
        {
          "line": 1331,
          "old_api": "unlikely",
          "new_api": null,
          "old_text": "unlikely(!rt->update_every)",
          "new_text": null,
          "old_line_content": "    if(unlikely(!rt->update_every)) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1332,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"Health configuration for template '%s' has no frequency (parameter 'every'). Ignoring it.\", rt->name)",
          "new_text": null,
          "old_line_content": "        error(\"Health configuration for template '%s' has no frequency (parameter 'every'). Ignoring it.\", rt->name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1336,
          "old_api": "RRDCALCTEMPLATE_HAS_CALCULATION",
          "new_api": null,
          "old_text": "RRDCALCTEMPLATE_HAS_CALCULATION(rt)",
          "new_text": null,
          "old_line_content": "    if(unlikely(!RRDCALCTEMPLATE_HAS_CALCULATION(rt) && !rt->warning && !rt->critical)) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1337,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"Health configuration for template '%s' is useless (no calculation, no warning and no critical evaluation)\", rt->name)",
          "new_text": null,
          "old_line_content": "        error(\"Health configuration for template '%s' is useless (no calculation, no warning and no critical evaluation)\", rt->name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1343,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(t->name, rt->name)",
          "new_text": null,
          "old_line_content": "        if(unlikely(t->hash_name == rt->hash_name && !strcmp(t->name, rt->name))) {",
          "new_line_content": "    RRDCALCTEMPLATE *t, *last = NULL;",
          "content_same": false
        },
        {
          "line": 1344,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"Health configuration template '%s' already exists for host '%s'.\", rt->name, host->hostname)",
          "new_text": null,
          "old_line_content": "            error(\"Health configuration template '%s' already exists for host '%s'.\", rt->name, host->hostname);",
          "new_line_content": "    for (t = host->templates; t ; last = t, t = t->next) {",
          "content_same": false
        },
        {
          "line": 1349,
          "old_api": "debug",
          "new_api": null,
          "old_text": "debug(D_HEALTH, \"Health configuration adding template '%s': context '%s', exec '%s', recipient '%s', green %Lf, red %Lf, lookup: group %d, after %d, before %d, options %u, dimensions '%s', update every %d, calculation '%s', warning '%s', critical '%s', source '%s', delay up %d, delay down %d, delay max %d, delay_multiplier %f\",\n          rt->name,\n          (rt->context)?rt->context:\"NONE\",\n          (rt->exec)?rt->exec:\"DEFAULT\",\n          (rt->recipient)?rt->recipient:\"DEFAULT\",\n          rt->green,\n          rt->red,\n          rt->group,\n          rt->after,\n          rt->before,\n          rt->options,\n          (rt->dimensions)?rt->dimensions:\"NONE\",\n          rt->update_every,\n          (rt->calculation)?rt->calculation->parsed_as:\"NONE\",\n          (rt->warning)?rt->warning->parsed_as:\"NONE\",\n          (rt->critical)?rt->critical->parsed_as:\"NONE\",\n          rt->source,\n          rt->delay_up_duration,\n          rt->delay_down_duration,\n          rt->delay_max_duration,\n          rt->delay_multiplier\n    )",
          "new_text": null,
          "old_line_content": "    debug(D_HEALTH, \"Health configuration adding template '%s': context '%s', exec '%s', recipient '%s', green %Lf, red %Lf, lookup: group %d, after %d, before %d, options %u, dimensions '%s', update every %d, calculation '%s', warning '%s', critical '%s', source '%s', delay up %d, delay down %d, delay max %d, delay_multiplier %f\",",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1372,
          "old_api": "likely",
          "new_api": null,
          "old_text": "likely(last)",
          "new_text": null,
          "old_line_content": "    if(likely(last)) {",
          "new_line_content": "    );",
          "content_same": false
        },
        {
          "line": 1385,
          "old_api": "isdigit",
          "new_api": null,
          "old_text": "isdigit(*string)",
          "new_text": null,
          "old_line_content": "    if(!*string || !(isdigit(*string) || *string == '+' || *string == '-')) {",
          "new_line_content": "static inline int health_parse_duration(char *string, int *result) {",
          "content_same": false
        },
        {
          "line": 1391,
          "old_api": "strtold",
          "new_api": null,
          "old_text": "strtold(string, &e)",
          "new_text": null,
          "old_line_content": "    calculated_number n = strtold(string, &e);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1441,
          "old_api": "isspace",
          "new_api": null,
          "old_text": "isspace(*s)",
          "new_text": null,
          "old_line_content": "        while(*s && !isspace(*s)) s++;",
          "new_line_content": "        char *key = s;",
          "content_same": false
        },
        {
          "line": 1442,
          "old_api": "isspace",
          "new_api": null,
          "old_text": "isspace(*s)",
          "new_text": null,
          "old_line_content": "        while(*s && isspace(*s)) *s++ = '\\0';",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1447,
          "old_api": "isspace",
          "new_api": null,
          "old_text": "isspace(*s)",
          "new_text": null,
          "old_line_content": "        while(*s && !isspace(*s)) s++;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1448,
          "old_api": "isspace",
          "new_api": null,
          "old_text": "isspace(*s)",
          "new_text": null,
          "old_line_content": "        while(*s && isspace(*s)) *s++ = '\\0';",
          "new_line_content": "        char *value = s;",
          "content_same": false
        },
        {
          "line": 1451,
          "old_api": "health_parse_duration",
          "new_api": null,
          "old_text": "health_parse_duration(value, delay_up_duration)",
          "new_text": null,
          "old_line_content": "            if (!health_parse_duration(value, delay_up_duration)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1457,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(key, \"down\")",
          "new_text": null,
          "old_line_content": "        else if(!strcasecmp(key, \"down\")) {",
          "new_line_content": "            else given_up = 1;",
          "content_same": false
        },
        {
          "line": 1458,
          "old_api": "health_parse_duration",
          "new_api": null,
          "old_text": "health_parse_duration(value, delay_down_duration)",
          "new_text": null,
          "old_line_content": "            if (!health_parse_duration(value, delay_down_duration)) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1464,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(key, \"multiplier\")",
          "new_text": null,
          "old_line_content": "        else if(!strcasecmp(key, \"multiplier\")) {",
          "new_line_content": "            else given_down = 1;",
          "content_same": false
        },
        {
          "line": 1465,
          "old_api": "strtof",
          "new_api": null,
          "old_text": "strtof(value, NULL)",
          "new_text": null,
          "old_line_content": "            *delay_multiplier = strtof(value, NULL);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1472,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(key, \"max\")",
          "new_text": null,
          "old_line_content": "        else if(!strcasecmp(key, \"max\")) {",
          "new_line_content": "            else given_multiplier = 1;",
          "content_same": false
        },
        {
          "line": 1473,
          "old_api": "health_parse_duration",
          "new_api": null,
          "old_text": "health_parse_duration(value, delay_max_duration)",
          "new_text": null,
          "old_line_content": "            if (!health_parse_duration(value, delay_max_duration)) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1480,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"Health configuration at line %zu of file '%s/%s': unknown keyword '%s'\",\n                  line, path, file, key)",
          "new_text": null,
          "old_line_content": "            error(\"Health configuration at line %zu of file '%s/%s': unknown keyword '%s'\",",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1510,
          "old_api": "debug",
          "new_api": null,
          "old_text": "debug(D_HEALTH, \"Health configuration parsing database lookup %zu@%s/%s: %s\", line, path, file, string)",
          "new_text": null,
          "old_line_content": "    debug(D_HEALTH, \"Health configuration parsing database lookup %zu@%s/%s: %s\", line, path, file, string);",
          "new_line_content": "        uint32_t *options, char **dimensions",
          "content_same": false
        },
        {
          "line": 1523,
          "old_api": "isspace",
          "new_api": null,
          "old_text": "isspace(*s)",
          "new_text": null,
          "old_line_content": "    while(*s && !isspace(*s)) s++;",
          "new_line_content": "    // first is the group method",
          "content_same": false
        },
        {
          "line": 1524,
          "old_api": "isspace",
          "new_api": null,
          "old_text": "isspace(*s)",
          "new_text": null,
          "old_line_content": "    while(*s && isspace(*s)) *s++ = '\\0';",
          "new_line_content": "    key = s;",
          "content_same": false
        },
        {
          "line": 1531,
          "old_api": "web_client_api_request_v1_data_group",
          "new_api": null,
          "old_text": "web_client_api_request_v1_data_group(key, -1)",
          "new_text": null,
          "old_line_content": "    if((*group_method = web_client_api_request_v1_data_group(key, -1)) == -1) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1532,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"Health configuration at line %zu of file '%s/%s': invalid group method '%s'\",\n              line, path, file, key)",
          "new_text": null,
          "old_line_content": "        error(\"Health configuration at line %zu of file '%s/%s': invalid group method '%s'\",",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1539,
          "old_api": "isspace",
          "new_api": null,
          "old_text": "isspace(*s)",
          "new_text": null,
          "old_line_content": "    while(*s && !isspace(*s)) s++;",
          "new_line_content": "    // then is the 'after' time",
          "content_same": false
        },
        {
          "line": 1540,
          "old_api": "isspace",
          "new_api": null,
          "old_text": "isspace(*s)",
          "new_text": null,
          "old_line_content": "    while(*s && isspace(*s)) *s++ = '\\0';",
          "new_line_content": "    key = s;",
          "content_same": false
        },
        {
          "line": 1543,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"Health configuration at line %zu of file '%s/%s': invalid duration '%s' after group method\",\n              line, path, file, key)",
          "new_text": null,
          "old_line_content": "        error(\"Health configuration at line %zu of file '%s/%s': invalid duration '%s' after group method\",",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1549,
          "old_api": "abs",
          "new_api": null,
          "old_text": "abs(*after)",
          "new_text": null,
          "old_line_content": "    *every = abs(*after);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1554,
          "old_api": "isspace",
          "new_api": null,
          "old_text": "isspace(*s)",
          "new_text": null,
          "old_line_content": "        while(*s && !isspace(*s)) s++;",
          "new_line_content": "    while(*s) {",
          "content_same": false
        },
        {
          "line": 1555,
          "old_api": "isspace",
          "new_api": null,
          "old_text": "isspace(*s)",
          "new_text": null,
          "old_line_content": "        while(*s && isspace(*s)) *s++ = '\\0';",
          "new_line_content": "        key = s;",
          "content_same": false
        },
        {
          "line": 1558,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(key, \"at\")",
          "new_text": null,
          "old_line_content": "        if(!strcasecmp(key, \"at\")) {",
          "new_line_content": "        if(!*key) break;",
          "content_same": false
        },
        {
          "line": 1561,
          "old_api": "isspace",
          "new_api": null,
          "old_text": "isspace(*s)",
          "new_text": null,
          "old_line_content": "            while(*s && isspace(*s)) *s++ = '\\0';",
          "new_line_content": "            char *value = s;",
          "content_same": false
        },
        {
          "line": 1564,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"Health configuration at line %zu of file '%s/%s': invalid duration '%s' for '%s' keyword\",\n                      line, path, file, value, key)",
          "new_text": null,
          "old_line_content": "                error(\"Health configuration at line %zu of file '%s/%s': invalid duration '%s' for '%s' keyword\",",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1568,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(key, HEALTH_EVERY_KEY)",
          "new_text": null,
          "old_line_content": "        else if(!strcasecmp(key, HEALTH_EVERY_KEY)) {",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1571,
          "old_api": "isspace",
          "new_api": null,
          "old_text": "isspace(*s)",
          "new_text": null,
          "old_line_content": "            while(*s && isspace(*s)) *s++ = '\\0';",
          "new_line_content": "            char *value = s;",
          "content_same": false
        },
        {
          "line": 1574,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"Health configuration at line %zu of file '%s/%s': invalid duration '%s' for '%s' keyword\",\n                      line, path, file, value, key)",
          "new_text": null,
          "old_line_content": "                error(\"Health configuration at line %zu of file '%s/%s': invalid duration '%s' for '%s' keyword\",",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1578,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(key, \"absolute_sum\")",
          "new_text": null,
          "old_line_content": "        else if(!strcasecmp(key, \"absolute\") || !strcasecmp(key, \"abs\") || !strcasecmp(key, \"absolute_sum\")) {",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1581,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(key, \"min2max\")",
          "new_text": null,
          "old_line_content": "        else if(!strcasecmp(key, \"min2max\")) {",
          "new_line_content": "            *options |= RRDR_OPTION_ABSOLUTE;",
          "content_same": false
        },
        {
          "line": 1584,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(key, \"null2zero\")",
          "new_text": null,
          "old_line_content": "        else if(!strcasecmp(key, \"null2zero\")) {",
          "new_line_content": "            *options |= RRDR_OPTION_MIN2MAX;",
          "content_same": false
        },
        {
          "line": 1587,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(key, \"percentage\")",
          "new_text": null,
          "old_line_content": "        else if(!strcasecmp(key, \"percentage\")) {",
          "new_line_content": "            *options |= RRDR_OPTION_NULL2ZERO;",
          "content_same": false
        },
        {
          "line": 1590,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(key, \"unaligned\")",
          "new_text": null,
          "old_line_content": "        else if(!strcasecmp(key, \"unaligned\")) {",
          "new_line_content": "            *options |= RRDR_OPTION_PERCENTAGE;",
          "content_same": false
        },
        {
          "line": 1593,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(key, \"of\")",
          "new_text": null,
          "old_line_content": "        else if(!strcasecmp(key, \"of\")) {",
          "new_line_content": "            *options |= RRDR_OPTION_NOT_ALIGNED;",
          "content_same": false
        },
        {
          "line": 1594,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(s, \"all\")",
          "new_text": null,
          "old_line_content": "            if(*s && strcasecmp(s, \"all\"))",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1599,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"Health configuration at line %zu of file '%s/%s': unknown keyword '%s'\",\n                  line, path, file, key)",
          "new_text": null,
          "old_line_content": "            error(\"Health configuration at line %zu of file '%s/%s': unknown keyword '%s'\",",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1610,
          "old_api": "unlikely",
          "new_api": null,
          "old_text": "unlikely(*t == '\\t')",
          "new_text": null,
          "old_line_content": "        if(unlikely(*t == '\\t')) *t = ' ';",
          "new_line_content": "    char *t = s;",
          "content_same": false
        },
        {
          "line": 1619,
          "old_api": "snprintfz",
          "new_api": null,
          "old_text": "snprintfz(buffer, FILENAME_MAX, \"%zu@%s/%s\", line, path, filename)",
          "new_text": null,
          "old_line_content": "    snprintfz(buffer, FILENAME_MAX, \"%zu@%s/%s\", line, path, filename);",
          "new_line_content": "static inline char *health_source_file(size_t line, const char *path, const char *filename) {",
          "content_same": false
        },
        {
          "line": 1620,
          "old_api": "strdupz",
          "new_api": null,
          "old_text": "strdupz(buffer)",
          "new_text": null,
          "old_line_content": "    return strdupz(buffer);",
          "new_line_content": "    char buffer[FILENAME_MAX + 1];",
          "content_same": false
        },
        {
          "line": 1631,
          "old_api": "debug",
          "new_api": null,
          "old_text": "debug(D_HEALTH, \"Health configuration reading file '%s/%s'\", path, filename)",
          "new_text": null,
          "old_line_content": "    debug(D_HEALTH, \"Health configuration reading file '%s/%s'\", path, filename);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1636,
          "old_api": "unlikely",
          "new_api": null,
          "old_text": "unlikely(!hash_alarm)",
          "new_text": null,
          "old_line_content": "    if(unlikely(!hash_alarm)) {",
          "new_line_content": "    char buffer[HEALTH_CONF_MAX_LINE + 1];",
          "content_same": false
        },
        {
          "line": 1637,
          "old_api": "simple_uhash",
          "new_api": null,
          "old_text": "simple_uhash(HEALTH_ALARM_KEY)",
          "new_text": null,
          "old_line_content": "        hash_alarm = simple_uhash(HEALTH_ALARM_KEY);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1654,
          "old_api": "snprintfz",
          "new_api": null,
          "old_text": "snprintfz(buffer, HEALTH_CONF_MAX_LINE, \"%s/%s\", path, filename)",
          "new_text": null,
          "old_line_content": "    snprintfz(buffer, HEALTH_CONF_MAX_LINE, \"%s/%s\", path, filename);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1655,
          "old_api": "fopen",
          "new_api": null,
          "old_text": "fopen(buffer, \"r\")",
          "new_text": null,
          "old_line_content": "    FILE *fp = fopen(buffer, \"r\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1666,
          "old_api": "fgets",
          "new_api": null,
          "old_text": "fgets(&buffer[append], (int)(HEALTH_CONF_MAX_LINE - append), fp)",
          "new_text": null,
          "old_line_content": "    while((s = fgets(&buffer[append], (int)(HEALTH_CONF_MAX_LINE - append), fp)) || append) {",
          "new_line_content": "    size_t line = 0, append = 0;",
          "content_same": false
        },
        {
          "line": 1670,
          "old_api": "trim",
          "new_api": null,
          "old_text": "trim(buffer)",
          "new_text": null,
          "old_line_content": "        s = trim(buffer);",
          "new_line_content": "        line++;",
          "content_same": false
        },
        {
          "line": 1674,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(s)",
          "new_text": null,
          "old_line_content": "        append = strlen(s);",
          "new_line_content": "        // info(\"Trimmed line %zu of file '%s/%s': '%s'\", line, path, filename, s);",
          "content_same": false
        },
        {
          "line": 1681,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"Health configuration has too long muli-line at line %zu of file '%s/%s'.\", line, path, filename)",
          "new_text": null,
          "old_line_content": "                error(\"Health configuration has too long muli-line at line %zu of file '%s/%s'.\", line, path, filename);",
          "new_line_content": "                continue;",
          "content_same": false
        },
        {
          "line": 1689,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"Health configuration has invalid line %zu of file '%s/%s'. It does not contain a ':'. Ignoring it.\", line, path, filename)",
          "new_text": null,
          "old_line_content": "            error(\"Health configuration has invalid line %zu of file '%s/%s'. It does not contain a ':'. Ignoring it.\", line, path, filename);",
          "new_line_content": "        while(*s && *s != ':') s++;",
          "content_same": false
        },
        {
          "line": 1696,
          "old_api": "trim",
          "new_api": null,
          "old_text": "trim(key)",
          "new_text": null,
          "old_line_content": "        key = trim(key);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1697,
          "old_api": "trim",
          "new_api": null,
          "old_text": "trim(value)",
          "new_text": null,
          "old_line_content": "        value = trim(value);",
          "new_line_content": "        char *value = s;",
          "content_same": false
        },
        {
          "line": 1700,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"Health configuration has invalid line %zu of file '%s/%s'. Keyword is empty. Ignoring it.\", line, path, filename)",
          "new_text": null,
          "old_line_content": "            error(\"Health configuration has invalid line %zu of file '%s/%s'. Keyword is empty. Ignoring it.\", line, path, filename);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1705,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"Health configuration has invalid line %zu of file '%s/%s'. value is empty. Ignoring it.\", line, path, filename)",
          "new_text": null,
          "old_line_content": "            error(\"Health configuration has invalid line %zu of file '%s/%s'. value is empty. Ignoring it.\", line, path, filename);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1710,
          "old_api": "simple_uhash",
          "new_api": null,
          "old_text": "simple_uhash(key)",
          "new_text": null,
          "old_line_content": "        uint32_t hash = simple_uhash(key);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1713,
          "old_api": "rrdcalc_add_alarm_from_config",
          "new_api": null,
          "old_text": "rrdcalc_add_alarm_from_config(&localhost, rc)",
          "new_text": null,
          "old_line_content": "            if(rc && !rrdcalc_add_alarm_from_config(&localhost, rc))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1717,
          "old_api": "rrdcalctemplate_add_template_from_config",
          "new_api": null,
          "old_text": "rrdcalctemplate_add_template_from_config(&localhost, rt)",
          "new_text": null,
          "old_line_content": "                if (!rrdcalctemplate_add_template_from_config(&localhost, rt))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1718,
          "old_api": "rrdcalctemplate_free",
          "new_api": null,
          "old_text": "rrdcalctemplate_free(&localhost, rt)",
          "new_text": null,
          "old_line_content": "                    rrdcalctemplate_free(&localhost, rt);",
          "new_line_content": "            if(rt) {",
          "content_same": false
        },
        {
          "line": 1722,
          "old_api": "callocz",
          "new_api": null,
          "old_text": "callocz(1, sizeof(RRDCALC))",
          "new_text": null,
          "old_line_content": "            rc = callocz(1, sizeof(RRDCALC));",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1725,
          "old_api": "simple_hash",
          "new_api": null,
          "old_text": "simple_hash(rc->name)",
          "new_text": null,
          "old_line_content": "            rc->hash = simple_hash(rc->name);",
          "new_line_content": "            rc->next_event_id = 1;",
          "content_same": false
        },
        {
          "line": 1733,
          "old_api": "rrdvar_fix_name",
          "new_api": null,
          "old_text": "rrdvar_fix_name(rc->name)",
          "new_text": null,
          "old_line_content": "            if(rrdvar_fix_name(rc->name))",
          "new_line_content": "            rc->delay_multiplier = 1.0;",
          "content_same": false
        },
        {
          "line": 1734,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"Health configuration renamed alarm '%s' to '%s'\", value, rc->name)",
          "new_text": null,
          "old_line_content": "                error(\"Health configuration renamed alarm '%s' to '%s'\", value, rc->name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1739,
          "old_api": "rrdcalc_free",
          "new_api": null,
          "old_text": "rrdcalc_free(&localhost, rc)",
          "new_text": null,
          "old_line_content": "                    rrdcalc_free(&localhost, rc);",
          "new_line_content": "            if(rc) {",
          "content_same": false
        },
        {
          "line": 1743,
          "old_api": "rrdcalctemplate_add_template_from_config",
          "new_api": null,
          "old_text": "rrdcalctemplate_add_template_from_config(&localhost, rt)",
          "new_text": null,
          "old_line_content": "            if(rt && !rrdcalctemplate_add_template_from_config(&localhost, rt))",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1744,
          "old_api": "rrdcalctemplate_free",
          "new_api": null,
          "old_text": "rrdcalctemplate_free(&localhost, rt)",
          "new_text": null,
          "old_line_content": "                rrdcalctemplate_free(&localhost, rt);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1747,
          "old_api": "strdupz",
          "new_api": null,
          "old_text": "strdupz(value)",
          "new_text": null,
          "old_line_content": "            rt->name = tabs2spaces(strdupz(value));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1754,
          "old_api": "rrdvar_fix_name",
          "new_api": null,
          "old_text": "rrdvar_fix_name(rt->name)",
          "new_text": null,
          "old_line_content": "            if(rrdvar_fix_name(rt->name))",
          "new_line_content": "            rt->delay_multiplier = 1.0;",
          "content_same": false
        },
        {
          "line": 1755,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"Health configuration renamed template '%s' to '%s'\", value, rt->name)",
          "new_text": null,
          "old_line_content": "                error(\"Health configuration renamed template '%s' to '%s'\", value, rt->name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1758,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(key, HEALTH_ON_KEY)",
          "new_text": null,
          "old_line_content": "            if(hash == hash_on && !strcasecmp(key, HEALTH_ON_KEY)) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1761,
          "old_api": "info",
          "new_api": null,
          "old_text": "info(\"Health configuration at line %zu of file '%s/%s' for alarm '%s' has key '%s' twice, once with value '%s' and later with value '%s'. Using ('%s').\",\n                             line, path, filename, rc->name, key, rc->chart, value, value)",
          "new_text": null,
          "old_line_content": "                        info(\"Health configuration at line %zu of file '%s/%s' for alarm '%s' has key '%s' twice, once with value '%s' and later with value '%s'. Using ('%s').\",",
          "new_line_content": "                if(rc->chart) {",
          "content_same": false
        },
        {
          "line": 1764,
          "old_api": "freez",
          "new_api": null,
          "old_text": "freez(rc->chart)",
          "new_text": null,
          "old_line_content": "                    freez(rc->chart);",
          "new_line_content": "                             line, path, filename, rc->name, key, rc->chart, value, value);",
          "content_same": false
        },
        {
          "line": 1767,
          "old_api": "simple_hash",
          "new_api": null,
          "old_text": "simple_hash(rc->chart)",
          "new_text": null,
          "old_line_content": "                rc->hash_chart = simple_hash(rc->chart);",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 1770,
          "old_api": "health_parse_db_lookup",
          "new_api": null,
          "old_text": "health_parse_db_lookup(line, path, filename, value, &rc->group, &rc->after, &rc->before,\n                                       &rc->update_every,\n                                       &rc->options, &rc->dimensions)",
          "new_text": null,
          "old_line_content": "                health_parse_db_lookup(line, path, filename, value, &rc->group, &rc->after, &rc->before,",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1774,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(key, HEALTH_EVERY_KEY)",
          "new_text": null,
          "old_line_content": "            else if(hash == hash_every && !strcasecmp(key, HEALTH_EVERY_KEY)) {",
          "new_line_content": "                                       &rc->options, &rc->dimensions);",
          "content_same": false
        },
        {
          "line": 1775,
          "old_api": "health_parse_duration",
          "new_api": null,
          "old_text": "health_parse_duration(value, &rc->update_every)",
          "new_text": null,
          "old_line_content": "                if(!health_parse_duration(value, &rc->update_every))",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1779,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(key, HEALTH_GREEN_KEY)",
          "new_text": null,
          "old_line_content": "            else if(hash == hash_green && !strcasecmp(key, HEALTH_GREEN_KEY)) {",
          "new_line_content": "                         line, path, filename, rc->name, key, value);",
          "content_same": false
        },
        {
          "line": 1787,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(key, HEALTH_RED_KEY)",
          "new_text": null,
          "old_line_content": "            else if(hash == hash_red && !strcasecmp(key, HEALTH_RED_KEY)) {",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 1795,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(key, HEALTH_CALC_KEY)",
          "new_text": null,
          "old_line_content": "            else if(hash == hash_calc && !strcasecmp(key, HEALTH_CALC_KEY)) {",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 1798,
          "old_api": "expression_parse",
          "new_api": null,
          "old_text": "expression_parse(value, &failed_at, &error)",
          "new_text": null,
          "old_line_content": "                rc->calculation = expression_parse(value, &failed_at, &error);",
          "new_line_content": "                const char *failed_at = NULL;",
          "content_same": false
        },
        {
          "line": 1801,
          "old_api": "expression_strerror",
          "new_api": null,
          "old_text": "expression_strerror(error)",
          "new_text": null,
          "old_line_content": "                          line, path, filename, rc->name, key, value, expression_strerror(error), failed_at);",
          "new_line_content": "                if(!rc->calculation) {",
          "content_same": false
        },
        {
          "line": 1804,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(key, HEALTH_WARN_KEY)",
          "new_text": null,
          "old_line_content": "            else if(hash == hash_warn && !strcasecmp(key, HEALTH_WARN_KEY)) {",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 1807,
          "old_api": "expression_parse",
          "new_api": null,
          "old_text": "expression_parse(value, &failed_at, &error)",
          "new_text": null,
          "old_line_content": "                rc->warning = expression_parse(value, &failed_at, &error);",
          "new_line_content": "                const char *failed_at = NULL;",
          "content_same": false
        },
        {
          "line": 1810,
          "old_api": "expression_strerror",
          "new_api": null,
          "old_text": "expression_strerror(error)",
          "new_text": null,
          "old_line_content": "                          line, path, filename, rc->name, key, value, expression_strerror(error), failed_at);",
          "new_line_content": "                if(!rc->warning) {",
          "content_same": false
        },
        {
          "line": 1813,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(key, HEALTH_CRIT_KEY)",
          "new_text": null,
          "old_line_content": "            else if(hash == hash_crit && !strcasecmp(key, HEALTH_CRIT_KEY)) {",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 1816,
          "old_api": "expression_parse",
          "new_api": null,
          "old_text": "expression_parse(value, &failed_at, &error)",
          "new_text": null,
          "old_line_content": "                rc->critical = expression_parse(value, &failed_at, &error);",
          "new_line_content": "                const char *failed_at = NULL;",
          "content_same": false
        },
        {
          "line": 1819,
          "old_api": "expression_strerror",
          "new_api": null,
          "old_text": "expression_strerror(error)",
          "new_text": null,
          "old_line_content": "                          line, path, filename, rc->name, key, value, expression_strerror(error), failed_at);",
          "new_line_content": "                if(!rc->critical) {",
          "content_same": false
        },
        {
          "line": 1822,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(key, HEALTH_EXEC_KEY)",
          "new_text": null,
          "old_line_content": "            else if(hash == hash_exec && !strcasecmp(key, HEALTH_EXEC_KEY)) {",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 1825,
          "old_api": "info",
          "new_api": null,
          "old_text": "info(\"Health configuration at line %zu of file '%s/%s' for alarm '%s' has key '%s' twice, once with value '%s' and later with value '%s'. Using ('%s').\",\n                             line, path, filename, rc->name, key, rc->exec, value, value)",
          "new_text": null,
          "old_line_content": "                        info(\"Health configuration at line %zu of file '%s/%s' for alarm '%s' has key '%s' twice, once with value '%s' and later with value '%s'. Using ('%s').\",",
          "new_line_content": "                if(rc->exec) {",
          "content_same": false
        },
        {
          "line": 1828,
          "old_api": "freez",
          "new_api": null,
          "old_text": "freez(rc->exec)",
          "new_text": null,
          "old_line_content": "                    freez(rc->exec);",
          "new_line_content": "                             line, path, filename, rc->name, key, rc->exec, value, value);",
          "content_same": false
        },
        {
          "line": 1835,
          "old_api": "info",
          "new_api": null,
          "old_text": "info(\"Health configuration at line %zu of file '%s/%s' for alarm '%s' has key '%s' twice, once with value '%s' and later with value '%s'. Using ('%s').\",\n                             line, path, filename, rc->name, key, rc->recipient, value, value)",
          "new_text": null,
          "old_line_content": "                        info(\"Health configuration at line %zu of file '%s/%s' for alarm '%s' has key '%s' twice, once with value '%s' and later with value '%s'. Using ('%s').\",",
          "new_line_content": "                if(rc->recipient) {",
          "content_same": false
        },
        {
          "line": 1838,
          "old_api": "freez",
          "new_api": null,
          "old_text": "freez(rc->recipient)",
          "new_text": null,
          "old_line_content": "                    freez(rc->recipient);",
          "new_line_content": "                             line, path, filename, rc->name, key, rc->recipient, value, value);",
          "content_same": false
        },
        {
          "line": 1845,
          "old_api": "info",
          "new_api": null,
          "old_text": "info(\"Health configuration at line %zu of file '%s/%s' for alarm '%s' has key '%s' twice, once with value '%s' and later with value '%s'. Using ('%s').\",\n                             line, path, filename, rc->name, key, rc->units, value, value)",
          "new_text": null,
          "old_line_content": "                        info(\"Health configuration at line %zu of file '%s/%s' for alarm '%s' has key '%s' twice, once with value '%s' and later with value '%s'. Using ('%s').\",",
          "new_line_content": "                if(rc->units) {",
          "content_same": false
        },
        {
          "line": 1848,
          "old_api": "freez",
          "new_api": null,
          "old_text": "freez(rc->units)",
          "new_text": null,
          "old_line_content": "                    freez(rc->units);",
          "new_line_content": "                             line, path, filename, rc->name, key, rc->units, value, value);",
          "content_same": false
        },
        {
          "line": 1851,
          "old_api": "strip_quotes",
          "new_api": null,
          "old_text": "strip_quotes(rc->units)",
          "new_text": null,
          "old_line_content": "                strip_quotes(rc->units);",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 1856,
          "old_api": "info",
          "new_api": null,
          "old_text": "info(\"Health configuration at line %zu of file '%s/%s' for alarm '%s' has key '%s' twice, once with value '%s' and later with value '%s'. Using ('%s').\",\n                             line, path, filename, rc->name, key, rc->info, value, value)",
          "new_text": null,
          "old_line_content": "                        info(\"Health configuration at line %zu of file '%s/%s' for alarm '%s' has key '%s' twice, once with value '%s' and later with value '%s'. Using ('%s').\",",
          "new_line_content": "                if(rc->info) {",
          "content_same": false
        },
        {
          "line": 1859,
          "old_api": "freez",
          "new_api": null,
          "old_text": "freez(rc->info)",
          "new_text": null,
          "old_line_content": "                    freez(rc->info);",
          "new_line_content": "                             line, path, filename, rc->name, key, rc->info, value, value);",
          "content_same": false
        },
        {
          "line": 1862,
          "old_api": "strip_quotes",
          "new_api": null,
          "old_text": "strip_quotes(rc->info)",
          "new_text": null,
          "old_line_content": "                strip_quotes(rc->info);",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 1865,
          "old_api": "health_parse_delay",
          "new_api": null,
          "old_text": "health_parse_delay(line, path, filename, value, &rc->delay_up_duration, &rc->delay_down_duration, &rc->delay_max_duration, &rc->delay_multiplier)",
          "new_text": null,
          "old_line_content": "                health_parse_delay(line, path, filename, value, &rc->delay_up_duration, &rc->delay_down_duration, &rc->delay_max_duration, &rc->delay_multiplier);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1868,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"Health configuration at line %zu of file '%s/%s' for alarm '%s' has unknown key '%s'.\",\n                     line, path, filename, rc->name, key)",
          "new_text": null,
          "old_line_content": "                error(\"Health configuration at line %zu of file '%s/%s' for alarm '%s' has unknown key '%s'.\",",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1873,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(key, HEALTH_ON_KEY)",
          "new_text": null,
          "old_line_content": "            if(hash == hash_on && !strcasecmp(key, HEALTH_ON_KEY)) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1876,
          "old_api": "info",
          "new_api": null,
          "old_text": "info(\"Health configuration at line %zu of file '%s/%s' for template '%s' has key '%s' twice, once with value '%s' and later with value '%s'. Using ('%s').\",\n                             line, path, filename, rt->name, key, rt->context, value, value)",
          "new_text": null,
          "old_line_content": "                        info(\"Health configuration at line %zu of file '%s/%s' for template '%s' has key '%s' twice, once with value '%s' and later with value '%s'. Using ('%s').\",",
          "new_line_content": "                if(rt->context) {",
          "content_same": false
        },
        {
          "line": 1879,
          "old_api": "freez",
          "new_api": null,
          "old_text": "freez(rt->context)",
          "new_text": null,
          "old_line_content": "                    freez(rt->context);",
          "new_line_content": "                             line, path, filename, rt->name, key, rt->context, value, value);",
          "content_same": false
        },
        {
          "line": 1882,
          "old_api": "simple_hash",
          "new_api": null,
          "old_text": "simple_hash(rt->context)",
          "new_text": null,
          "old_line_content": "                rt->hash_context = simple_hash(rt->context);",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 1885,
          "old_api": "health_parse_db_lookup",
          "new_api": null,
          "old_text": "health_parse_db_lookup(line, path, filename, value, &rt->group, &rt->after, &rt->before,\n                                       &rt->update_every,\n                                       &rt->options, &rt->dimensions)",
          "new_text": null,
          "old_line_content": "                health_parse_db_lookup(line, path, filename, value, &rt->group, &rt->after, &rt->before,",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1889,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(key, HEALTH_EVERY_KEY)",
          "new_text": null,
          "old_line_content": "            else if(hash == hash_every && !strcasecmp(key, HEALTH_EVERY_KEY)) {",
          "new_line_content": "                                       &rt->options, &rt->dimensions);",
          "content_same": false
        },
        {
          "line": 1890,
          "old_api": "health_parse_duration",
          "new_api": null,
          "old_text": "health_parse_duration(value, &rt->update_every)",
          "new_text": null,
          "old_line_content": "                if(!health_parse_duration(value, &rt->update_every))",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1894,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(key, HEALTH_GREEN_KEY)",
          "new_text": null,
          "old_line_content": "            else if(hash == hash_green && !strcasecmp(key, HEALTH_GREEN_KEY)) {",
          "new_line_content": "                         line, path, filename, rt->name, key, value);",
          "content_same": false
        },
        {
          "line": 1902,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(key, HEALTH_RED_KEY)",
          "new_text": null,
          "old_line_content": "            else if(hash == hash_red && !strcasecmp(key, HEALTH_RED_KEY)) {",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 1910,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(key, HEALTH_CALC_KEY)",
          "new_text": null,
          "old_line_content": "            else if(hash == hash_calc && !strcasecmp(key, HEALTH_CALC_KEY)) {",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 1913,
          "old_api": "expression_parse",
          "new_api": null,
          "old_text": "expression_parse(value, &failed_at, &error)",
          "new_text": null,
          "old_line_content": "                rt->calculation = expression_parse(value, &failed_at, &error);",
          "new_line_content": "                const char *failed_at = NULL;",
          "content_same": false
        },
        {
          "line": 1916,
          "old_api": "expression_strerror",
          "new_api": null,
          "old_text": "expression_strerror(error)",
          "new_text": null,
          "old_line_content": "                          line, path, filename, rt->name, key, value, expression_strerror(error), failed_at);",
          "new_line_content": "                if(!rt->calculation) {",
          "content_same": false
        },
        {
          "line": 1919,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(key, HEALTH_WARN_KEY)",
          "new_text": null,
          "old_line_content": "            else if(hash == hash_warn && !strcasecmp(key, HEALTH_WARN_KEY)) {",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 1922,
          "old_api": "expression_parse",
          "new_api": null,
          "old_text": "expression_parse(value, &failed_at, &error)",
          "new_text": null,
          "old_line_content": "                rt->warning = expression_parse(value, &failed_at, &error);",
          "new_line_content": "                const char *failed_at = NULL;",
          "content_same": false
        },
        {
          "line": 1925,
          "old_api": "expression_strerror",
          "new_api": null,
          "old_text": "expression_strerror(error)",
          "new_text": null,
          "old_line_content": "                          line, path, filename, rt->name, key, value, expression_strerror(error), failed_at);",
          "new_line_content": "                if(!rt->warning) {",
          "content_same": false
        },
        {
          "line": 1928,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(key, HEALTH_CRIT_KEY)",
          "new_text": null,
          "old_line_content": "            else if(hash == hash_crit && !strcasecmp(key, HEALTH_CRIT_KEY)) {",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 1931,
          "old_api": "expression_parse",
          "new_api": null,
          "old_text": "expression_parse(value, &failed_at, &error)",
          "new_text": null,
          "old_line_content": "                rt->critical = expression_parse(value, &failed_at, &error);",
          "new_line_content": "                const char *failed_at = NULL;",
          "content_same": false
        },
        {
          "line": 1934,
          "old_api": "expression_strerror",
          "new_api": null,
          "old_text": "expression_strerror(error)",
          "new_text": null,
          "old_line_content": "                          line, path, filename, rt->name, key, value, expression_strerror(error), failed_at);",
          "new_line_content": "                if(!rt->critical) {",
          "content_same": false
        },
        {
          "line": 1937,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(key, HEALTH_EXEC_KEY)",
          "new_text": null,
          "old_line_content": "            else if(hash == hash_exec && !strcasecmp(key, HEALTH_EXEC_KEY)) {",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 1940,
          "old_api": "info",
          "new_api": null,
          "old_text": "info(\"Health configuration at line %zu of file '%s/%s' for template '%s' has key '%s' twice, once with value '%s' and later with value '%s'. Using ('%s').\",\n                             line, path, filename, rt->name, key, rt->exec, value, value)",
          "new_text": null,
          "old_line_content": "                        info(\"Health configuration at line %zu of file '%s/%s' for template '%s' has key '%s' twice, once with value '%s' and later with value '%s'. Using ('%s').\",",
          "new_line_content": "                if(rt->exec) {",
          "content_same": false
        },
        {
          "line": 1943,
          "old_api": "freez",
          "new_api": null,
          "old_text": "freez(rt->exec)",
          "new_text": null,
          "old_line_content": "                    freez(rt->exec);",
          "new_line_content": "                             line, path, filename, rt->name, key, rt->exec, value, value);",
          "content_same": false
        },
        {
          "line": 1950,
          "old_api": "info",
          "new_api": null,
          "old_text": "info(\"Health configuration at line %zu of file '%s/%s' for template '%s' has key '%s' twice, once with value '%s' and later with value '%s'. Using ('%s').\",\n                             line, path, filename, rt->name, key, rt->recipient, value, value)",
          "new_text": null,
          "old_line_content": "                        info(\"Health configuration at line %zu of file '%s/%s' for template '%s' has key '%s' twice, once with value '%s' and later with value '%s'. Using ('%s').\",",
          "new_line_content": "                if(rt->recipient) {",
          "content_same": false
        },
        {
          "line": 1953,
          "old_api": "freez",
          "new_api": null,
          "old_text": "freez(rt->recipient)",
          "new_text": null,
          "old_line_content": "                    freez(rt->recipient);",
          "new_line_content": "                             line, path, filename, rt->name, key, rt->recipient, value, value);",
          "content_same": false
        },
        {
          "line": 1960,
          "old_api": "info",
          "new_api": null,
          "old_text": "info(\"Health configuration at line %zu of file '%s/%s' for template '%s' has key '%s' twice, once with value '%s' and later with value '%s'. Using ('%s').\",\n                             line, path, filename, rt->name, key, rt->units, value, value)",
          "new_text": null,
          "old_line_content": "                        info(\"Health configuration at line %zu of file '%s/%s' for template '%s' has key '%s' twice, once with value '%s' and later with value '%s'. Using ('%s').\",",
          "new_line_content": "                if(rt->units) {",
          "content_same": false
        },
        {
          "line": 1963,
          "old_api": "freez",
          "new_api": null,
          "old_text": "freez(rt->units)",
          "new_text": null,
          "old_line_content": "                    freez(rt->units);",
          "new_line_content": "                             line, path, filename, rt->name, key, rt->units, value, value);",
          "content_same": false
        },
        {
          "line": 1966,
          "old_api": "strip_quotes",
          "new_api": null,
          "old_text": "strip_quotes(rt->units)",
          "new_text": null,
          "old_line_content": "                strip_quotes(rt->units);",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 1971,
          "old_api": "info",
          "new_api": null,
          "old_text": "info(\"Health configuration at line %zu of file '%s/%s' for template '%s' has key '%s' twice, once with value '%s' and later with value '%s'. Using ('%s').\",\n                             line, path, filename, rt->name, key, rt->info, value, value)",
          "new_text": null,
          "old_line_content": "                        info(\"Health configuration at line %zu of file '%s/%s' for template '%s' has key '%s' twice, once with value '%s' and later with value '%s'. Using ('%s').\",",
          "new_line_content": "                if(rt->info) {",
          "content_same": false
        },
        {
          "line": 1974,
          "old_api": "freez",
          "new_api": null,
          "old_text": "freez(rt->info)",
          "new_text": null,
          "old_line_content": "                    freez(rt->info);",
          "new_line_content": "                             line, path, filename, rt->name, key, rt->info, value, value);",
          "content_same": false
        },
        {
          "line": 1977,
          "old_api": "strip_quotes",
          "new_api": null,
          "old_text": "strip_quotes(rt->info)",
          "new_text": null,
          "old_line_content": "                strip_quotes(rt->info);",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 1980,
          "old_api": "health_parse_delay",
          "new_api": null,
          "old_text": "health_parse_delay(line, path, filename, value, &rt->delay_up_duration, &rt->delay_down_duration, &rt->delay_max_duration, &rt->delay_multiplier)",
          "new_text": null,
          "old_line_content": "                health_parse_delay(line, path, filename, value, &rt->delay_up_duration, &rt->delay_down_duration, &rt->delay_max_duration, &rt->delay_multiplier);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1983,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"Health configuration at line %zu of file '%s/%s' for template '%s' has unknown key '%s'.\",\n                      line, path, filename, rt->name, key)",
          "new_text": null,
          "old_line_content": "                error(\"Health configuration at line %zu of file '%s/%s' for template '%s' has unknown key '%s'.\",",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1988,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"Health configuration at line %zu of file '%s/%s' has unknown key '%s'. Expected either '\" HEALTH_ALARM_KEY \"' or '\" HEALTH_TEMPLATE_KEY \"'.\",\n                  line, path, filename, key)",
          "new_text": null,
          "old_line_content": "            error(\"Health configuration at line %zu of file '%s/%s' has unknown key '%s'. Expected either '\" HEALTH_ALARM_KEY \"' or '\" HEALTH_TEMPLATE_KEY \"'.\",",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1993,
          "old_api": "rrdcalc_add_alarm_from_config",
          "new_api": null,
          "old_text": "rrdcalc_add_alarm_from_config(&localhost, rc)",
          "new_text": null,
          "old_line_content": "    if(rc && !rrdcalc_add_alarm_from_config(&localhost, rc))",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1994,
          "old_api": "rrdcalc_free",
          "new_api": null,
          "old_text": "rrdcalc_free(&localhost, rc)",
          "new_text": null,
          "old_line_content": "        rrdcalc_free(&localhost, rc);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1997,
          "old_api": "rrdcalctemplate_free",
          "new_api": null,
          "old_text": "rrdcalctemplate_free(&localhost, rt)",
          "new_text": null,
          "old_line_content": "        rrdcalctemplate_free(&localhost, rt);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2004,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(path)",
          "new_text": null,
          "old_line_content": "    size_t pathlen = strlen(path);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2015,
          "old_api": "readdir",
          "new_api": null,
          "old_text": "readdir(dir)",
          "new_text": null,
          "old_line_content": "    while ((de = readdir(dir))) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2016,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(de->d_name)",
          "new_text": null,
          "old_line_content": "        size_t len = strlen(de->d_name);",
          "new_line_content": "    struct dirent *de = NULL;",
          "content_same": false
        },
        {
          "line": 2023,
          "old_api": "debug",
          "new_api": null,
          "old_text": "debug(D_HEALTH, \"Ignoring directory '%s'\", de->d_name)",
          "new_text": null,
          "old_line_content": "            debug(D_HEALTH, \"Ignoring directory '%s'\", de->d_name);",
          "new_line_content": "                   || (de->d_name[0] == '.' && de->d_name[1] == '.' && de->d_name[2] == '\\0')",
          "content_same": false
        },
        {
          "line": 2028,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(de->d_name)",
          "new_text": null,
          "old_line_content": "            char *s = mallocz(pathlen + strlen(de->d_name) + 2);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2029,
          "old_api": "strcpy",
          "new_api": null,
          "old_text": "strcpy(s, path)",
          "new_text": null,
          "old_line_content": "            strcpy(s, path);",
          "new_line_content": "        else if(de->d_type == DT_DIR) {",
          "content_same": false
        },
        {
          "line": 2038,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(&de->d_name[len - 5], \".conf\")",
          "new_text": null,
          "old_line_content": "                len > 5 && !strcmp(&de->d_name[len - 5], \".conf\")) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2039,
          "old_api": "health_readfile",
          "new_api": null,
          "old_text": "health_readfile(path, de->d_name)",
          "new_text": null,
          "old_line_content": "            health_readfile(path, de->d_name);",
          "new_line_content": "        else if((de->d_type == DT_LNK || de->d_type == DT_REG || de->d_type == DT_UNKNOWN) &&",
          "content_same": false
        },
        {
          "line": 2042,
          "old_api": "debug",
          "new_api": null,
          "old_text": "debug(D_HEALTH, \"Ignoring file '%s'\", de->d_name)",
          "new_text": null,
          "old_line_content": "        else debug(D_HEALTH, \"Ignoring file '%s'\", de->d_name);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2045,
          "old_api": "closedir",
          "new_api": null,
          "old_text": "closedir(dir)",
          "new_text": null,
          "old_line_content": "    closedir(dir);",
          "new_line_content": "    }",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 196,
      "total_additions": 496,
      "total_deletions": 494,
      "total_api_changes": 1186
    },
    "non_api_changes": {
      "has_non_api_changes": false,
      "evidence": {
        "total_diff_lines": 2,
        "api_related_lines": 1186,
        "non_api_lines": 0,
        "non_api_line_numbers": []
      }
    },
    "api_calls_before": 891,
    "api_calls_after": 893,
    "diff_info": {
      "added_lines": 2,
      "removed_lines": 0,
      "total_diff_lines": 17
    }
  }
}
{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/lvgl/modified_file/9605a6b712399719e58f916386a5af4029be61a6",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/lvgl/modified_file/9605a6b712399719e58f916386a5af4029be61a6/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/lvgl/modified_file/9605a6b712399719e58f916386a5af4029be61a6/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/lvgl/modified_file/9605a6b712399719e58f916386a5af4029be61a6/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [],
      "additions": [
        {
          "line": 482,
          "old_api": null,
          "new_api": "lv_color_mix",
          "old_text": null,
          "new_text": "lv_color_mix(color, bg_tmp, opa)",
          "old_line_content": "    }",
          "new_line_content": "                    opa_tmp = lv_color_mix(color, bg_tmp, opa);",
          "content_same": false
        },
        {
          "line": 454,
          "old_api": null,
          "new_api": "lv_area_get_width",
          "old_text": null,
          "new_text": "lv_area_get_width(mem_area)",
          "old_line_content": "            mem[col] = color;",
          "new_line_content": "    lv_coord_t mem_width = lv_area_get_width(mem_area);",
          "content_same": false
        },
        {
          "line": 395,
          "old_api": null,
          "new_api": "lv_color_mix",
          "old_text": null,
          "new_text": "lv_color_mix(recolor, last_img_px, recolor_opa)",
          "old_line_content": "                    if(opa_result == LV_OPA_COVER) vdb_buf_tmp[col].full = px_color->full;",
          "new_line_content": "                \t\trecolored_px = lv_color_mix(recolor, last_img_px, recolor_opa);",
          "content_same": false
        },
        {
          "line": 431,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(dest, src, length * sizeof(lv_color_t))",
          "old_line_content": "    }",
          "new_line_content": "        memcpy(dest, src, length * sizeof(lv_color_t));",
          "content_same": false
        },
        {
          "line": 399,
          "old_api": null,
          "new_api": "lv_color_mix",
          "old_text": null,
          "new_text": "lv_color_mix(recolored_px, vdb_buf_tmp[col], opa_result)",
          "old_line_content": "",
          "new_line_content": "                    else vdb_buf_tmp[col] = lv_color_mix(recolored_px, vdb_buf_tmp[col], opa_result);",
          "content_same": false
        },
        {
          "line": 402,
          "old_api": null,
          "new_api": "lv_color_mix",
          "old_text": null,
          "new_text": "lv_color_mix(*px_color, vdb_buf_tmp[col], opa_result)",
          "old_line_content": "            /*Next row on the map*/",
          "new_line_content": "                    else vdb_buf_tmp[col] = lv_color_mix(*px_color, vdb_buf_tmp[col], opa_result);",
          "content_same": false
        },
        {
          "line": 435,
          "old_api": null,
          "new_api": "lv_color_mix",
          "old_text": null,
          "new_text": "lv_color_mix(src[col], dest[col], opa)",
          "old_line_content": " *",
          "new_line_content": "        \tdest[col] = lv_color_mix(src[col], dest[col], opa);",
          "content_same": false
        },
        {
          "line": 469,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(&mem[fill_area->x1], mem_first, copy_size)",
          "old_line_content": "        lv_color_t bg_tmp = LV_COLOR_BLACK;",
          "new_line_content": "            memcpy(&mem[fill_area->x1], mem_first, copy_size);",
          "content_same": false
        },
        {
          "line": 374,
          "old_api": null,
          "new_api": "lv_color_mix",
          "old_text": null,
          "new_text": "lv_color_mix(recolor, last_img_px, recolor_opa)",
          "old_line_content": "            for(col = 0; col < map_useful_w; col++) {",
          "new_line_content": "        lv_color_t recolored_px = lv_color_mix(recolor, last_img_px, recolor_opa);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 448,
          "old_api": "lv_area_get_width",
          "new_api": null,
          "old_text": "lv_area_get_width(mem_area)",
          "new_text": null,
          "old_line_content": "    lv_coord_t mem_width = lv_area_get_width(mem_area);",
          "new_line_content": "static void sw_color_fill(lv_area_t * mem_area, lv_color_t * mem, const lv_area_t * fill_area, lv_color_t color, lv_opa_t opa)",
          "content_same": false
        },
        {
          "line": 390,
          "old_api": "lv_color_mix",
          "new_api": null,
          "old_text": "lv_color_mix(recolor, *px_color, recolor_opa)",
          "new_text": null,
          "old_line_content": "                    lv_color_t recolored_px = lv_color_mix(recolor, *px_color, recolor_opa);",
          "new_line_content": "                /*Re-color the pixel if required*/",
          "content_same": false
        },
        {
          "line": 393,
          "old_api": "lv_color_mix",
          "new_api": null,
          "old_text": "lv_color_mix(recolored_px, vdb_buf_tmp[col], opa_result)",
          "new_text": null,
          "old_line_content": "                    else vdb_buf_tmp[col] = lv_color_mix(recolored_px, vdb_buf_tmp[col], opa_result);",
          "new_line_content": "                \tif(last_img_px.full != px_color->full) {\t\t/*Minor acceleration: calculate only for new colors (save the last)*/",
          "content_same": false
        },
        {
          "line": 425,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(dest, src, length * sizeof(lv_color_t))",
          "new_text": null,
          "old_line_content": "        memcpy(dest, src, length * sizeof(lv_color_t));",
          "new_line_content": " * @param length number of pixels in 'src'",
          "content_same": false
        },
        {
          "line": 396,
          "old_api": "lv_color_mix",
          "new_api": null,
          "old_text": "lv_color_mix(*px_color, vdb_buf_tmp[col], opa_result)",
          "new_text": null,
          "old_line_content": "                    else vdb_buf_tmp[col] = lv_color_mix(*px_color, vdb_buf_tmp[col], opa_result);",
          "new_line_content": "                \t}",
          "content_same": false
        },
        {
          "line": 429,
          "old_api": "lv_color_mix",
          "new_api": null,
          "old_text": "lv_color_mix(src[col], dest[col], opa)",
          "new_text": null,
          "old_line_content": "        \tdest[col] = lv_color_mix(src[col], dest[col], opa);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 463,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(&mem[fill_area->x1], mem_first, copy_size)",
          "new_text": null,
          "old_line_content": "            memcpy(&mem[fill_area->x1], mem_first, copy_size);",
          "new_line_content": "        /*Copy the first row to all other rows*/",
          "content_same": false
        },
        {
          "line": 470,
          "old_api": "lv_color_mix",
          "new_api": null,
          "old_text": "lv_color_mix(color, bg_tmp, opa)",
          "new_text": null,
          "old_line_content": "        lv_color_t opa_tmp = lv_color_mix(color, bg_tmp, opa);",
          "new_line_content": "            mem += mem_width;",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 0,
      "total_additions": 9,
      "total_deletions": 8,
      "total_api_changes": 17
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 12,
        "api_related_lines": 17,
        "non_api_lines": 7,
        "non_api_line_numbers": [
          384,
          385,
          386,
          387,
          392,
          394,
          373
        ]
      }
    },
    "api_calls_before": 43,
    "api_calls_after": 44,
    "diff_info": {
      "added_lines": 9,
      "removed_lines": 3,
      "total_diff_lines": 35
    }
  }
}
{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/lvgl/modified_file/c564a7197c05c196f5bbdaf86b6447b484c52887",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/lvgl/modified_file/c564a7197c05c196f5bbdaf86b6447b484c52887/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/lvgl/modified_file/c564a7197c05c196f5bbdaf86b6447b484c52887/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/lvgl/modified_file/c564a7197c05c196f5bbdaf86b6447b484c52887/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 243,
          "old_api": "lv_timer_pause",
          "new_api": "lv_event_send",
          "old_text": "lv_timer_pause(t)",
          "new_text": "lv_event_send(obj, LV_EVENT_READY, NULL)",
          "old_line_content": "                    lv_timer_pause(t);",
          "new_line_content": "                    lv_event_send(obj, LV_EVENT_READY, NULL);",
          "content_same": false
        },
        {
          "line": 256,
          "old_api": "lv_timer_pause",
          "new_api": "lv_event_send",
          "old_text": "lv_timer_pause(t)",
          "new_text": "lv_event_send(obj, LV_EVENT_READY, NULL)",
          "old_line_content": "                    lv_timer_pause(t);",
          "new_line_content": "                    lv_event_send(obj, LV_EVENT_READY, NULL);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 257,
          "old_api": null,
          "new_api": "lv_timer_pause",
          "old_text": null,
          "new_text": "lv_timer_pause(t)",
          "old_line_content": "                    return;",
          "new_line_content": "                    lv_timer_pause(t);",
          "content_same": false
        },
        {
          "line": 230,
          "old_api": null,
          "new_api": "lv_timer_pause",
          "old_text": null,
          "new_text": "lv_timer_pause(t)",
          "old_line_content": "            return;",
          "new_line_content": "            lv_timer_pause(t);",
          "content_same": false
        },
        {
          "line": 264,
          "old_api": null,
          "new_api": "lottie_animation_render",
          "old_text": null,
          "new_text": "lottie_animation_render(\n        rlottie->animation,\n        rlottie->current_frame,\n        rlottie->allocated_buf,\n        rlottie->imgdsc.header.w,\n        rlottie->imgdsc.header.h,\n        rlottie->scanline_width\n    )",
          "old_line_content": "        rlottie->animation,",
          "new_line_content": "    lottie_animation_render(",
          "content_same": false
        },
        {
          "line": 274,
          "old_api": null,
          "new_api": "convert_to_rgba5658",
          "old_text": null,
          "new_text": "convert_to_rgba5658(rlottie->allocated_buf, rlottie->imgdsc.header.w, rlottie->imgdsc.header.h)",
          "old_line_content": "#endif",
          "new_line_content": "    convert_to_rgba5658(rlottie->allocated_buf, rlottie->imgdsc.header.w, rlottie->imgdsc.header.h);",
          "content_same": false
        },
        {
          "line": 244,
          "old_api": null,
          "new_api": "lv_timer_pause",
          "old_text": null,
          "new_text": "lv_timer_pause(t)",
          "old_line_content": "                    return;",
          "new_line_content": "                    lv_timer_pause(t);",
          "content_same": false
        },
        {
          "line": 277,
          "old_api": null,
          "new_api": "lv_obj_invalidate",
          "old_text": null,
          "new_text": "lv_obj_invalidate(obj)",
          "old_line_content": "}",
          "new_line_content": "    lv_obj_invalidate(obj);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 229,
          "old_api": "lv_timer_pause",
          "new_api": null,
          "old_text": "lv_timer_pause(t)",
          "new_text": null,
          "old_line_content": "            lv_timer_pause(t);",
          "new_line_content": "            /* Pause the timer too when it has run once to avoid CPU consumption */",
          "content_same": false
        },
        {
          "line": 263,
          "old_api": "lottie_animation_render",
          "new_api": null,
          "old_text": "lottie_animation_render(\n        rlottie->animation,\n        rlottie->current_frame,\n        rlottie->allocated_buf,\n        rlottie->imgdsc.header.w,\n        rlottie->imgdsc.header.h,\n        rlottie->scanline_width\n    )",
          "new_text": null,
          "old_line_content": "    lottie_animation_render(",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 273,
          "old_api": "convert_to_rgba5658",
          "new_api": null,
          "old_text": "convert_to_rgba5658(rlottie->allocated_buf, rlottie->imgdsc.header.w, rlottie->imgdsc.header.h)",
          "new_text": null,
          "old_line_content": "    convert_to_rgba5658(rlottie->allocated_buf, rlottie->imgdsc.header.w, rlottie->imgdsc.header.h);",
          "new_line_content": "#if LV_COLOR_DEPTH == 16",
          "content_same": false
        },
        {
          "line": 242,
          "old_api": "lv_event_send",
          "new_api": null,
          "old_text": "lv_event_send(obj, LV_EVENT_READY, NULL)",
          "new_text": null,
          "old_line_content": "                    lv_event_send(obj, LV_EVENT_READY, NULL);",
          "new_line_content": "                else {",
          "content_same": false
        },
        {
          "line": 212,
          "old_api": "lv_memcpy",
          "new_api": null,
          "old_text": "lv_memcpy(dest, &r, sizeof(r))",
          "new_text": null,
          "old_line_content": "            lv_memcpy(dest, &r, sizeof(r));",
          "new_line_content": "            dest[0] = (uint8_t)(r & 0xFF);",
          "content_same": false
        },
        {
          "line": 276,
          "old_api": "lv_obj_invalidate",
          "new_api": null,
          "old_text": "lv_obj_invalidate(obj)",
          "new_text": null,
          "old_line_content": "    lv_obj_invalidate(obj);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 255,
          "old_api": "lv_event_send",
          "new_api": null,
          "old_text": "lv_event_send(obj, LV_EVENT_READY, NULL)",
          "new_text": null,
          "old_line_content": "                    lv_event_send(obj, LV_EVENT_READY, NULL);",
          "new_line_content": "                else {",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 2,
      "total_additions": 6,
      "total_deletions": 7,
      "total_api_changes": 15
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 2,
        "api_related_lines": 15,
        "non_api_lines": 1,
        "non_api_line_numbers": [
          213
        ]
      }
    },
    "api_calls_before": 32,
    "api_calls_after": 31,
    "diff_info": {
      "added_lines": 2,
      "removed_lines": 1,
      "total_diff_lines": 15
    }
  }
}
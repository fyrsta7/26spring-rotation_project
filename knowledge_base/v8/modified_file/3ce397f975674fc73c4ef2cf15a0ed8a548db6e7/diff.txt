diff --git a/src/ia32/lithium-ia32.cc b/src/ia32/lithium-ia32.cc
index fbeb42b358d..07867c70f2f 100644
--- a/src/ia32/lithium-ia32.cc
+++ b/src/ia32/lithium-ia32.cc
@@ -1042,9 +1042,15 @@ LInstruction* LChunkBuilder::DoBranch(HBranch* instr) {
     return new LGoto(successor->block_id());
   }
   ToBooleanStub::Types expected = instr->expected_input_types();
+  // We need a temporary register when we have to access the map *or* we have
+  // no type info yet, in which case we handle all cases (including the ones
+  // involving maps).
   bool needs_temp = expected.NeedsMap() || expected.IsEmpty();
   LOperand* temp = needs_temp ? TempRegister() : NULL;
-  return AssignEnvironment(new LBranch(UseRegister(v), temp));
+  LInstruction* branch = new LBranch(UseRegister(v), temp);
+  // When we handle all cases, we never deopt, so we don't need to assign the
+  // environment then.
+  return expected.IsAll() ? branch : AssignEnvironment(branch);
 }
 
 

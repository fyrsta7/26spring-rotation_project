{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/v8/modified_file/8e143a2ba562bade8369c733211fdcf684afa5bd",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/v8/modified_file/8e143a2ba562bade8369c733211fdcf684afa5bd/before.cc",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/v8/modified_file/8e143a2ba562bade8369c733211fdcf684afa5bd/after.cc",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/v8/modified_file/8e143a2ba562bade8369c733211fdcf684afa5bd/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 1385,
          "old_api": "module",
          "new_api": "std::move(unit)",
          "old_text": "native_module->module()",
          "new_text": "std::move(unit)",
          "old_line_content": "  for (auto exp : native_module->module()->export_table) {",
          "new_line_content": "      builder->AddJSToWasmWrapperUnit(std::move(unit));",
          "content_same": false
        },
        {
          "line": 1389,
          "old_api": "insert",
          "new_api": "size",
          "old_text": "keys.insert(key)",
          "new_text": "keys.size()",
          "old_line_content": "    if (keys.insert(key).second) {",
          "new_line_content": "  return static_cast<int>(keys.size());",
          "content_same": false
        },
        {
          "line": 1398,
          "old_api": "size",
          "new_api": "num_imported_functions",
          "old_text": "keys.size()",
          "new_text": "native_module->num_imported_functions()",
          "old_line_content": "  return static_cast<int>(keys.size());",
          "new_line_content": "  int num_imported_functions = native_module->num_imported_functions();",
          "content_same": false
        },
        {
          "line": 1407,
          "old_api": "num_imported_functions",
          "new_api": "parameter_count",
          "old_text": "native_module->num_imported_functions()",
          "new_text": "sig->parameter_count()",
          "old_line_content": "  int num_imported_functions = native_module->num_imported_functions();",
          "new_line_content": "        static_cast<int>(sig->parameter_count()));",
          "content_same": false
        },
        {
          "line": 1416,
          "old_api": "parameter_count",
          "new_api": "size",
          "old_text": "sig->parameter_count()",
          "new_text": "keys.size()",
          "old_line_content": "        static_cast<int>(sig->parameter_count()));",
          "new_line_content": "  return static_cast<int>(keys.size());",
          "content_same": false
        },
        {
          "line": 1421,
          "old_api": "import_wrapper_cache",
          "new_api": "compilation_state",
          "old_text": "native_module->import_wrapper_cache()",
          "new_text": "native_module->compilation_state()",
          "old_line_content": "      (*native_module->import_wrapper_cache())[key] = nullptr;",
          "new_line_content": "      Impl(native_module->compilation_state());",
          "content_same": false
        },
        {
          "line": 1422,
          "old_api": "AddUnits",
          "new_api": "module",
          "old_text": "builder->AddUnits(func_index)",
          "new_text": "native_module->module()",
          "old_line_content": "      builder->AddUnits(func_index);",
          "new_line_content": "  const bool lazy_module = IsLazyModule(native_module->module());",
          "content_same": false
        },
        {
          "line": 1425,
          "old_api": "size",
          "new_api": "module",
          "old_text": "keys.size()",
          "new_text": "native_module->module()",
          "old_line_content": "  return static_cast<int>(keys.size());",
          "new_line_content": "  auto* module = native_module->module();",
          "content_same": false
        },
        {
          "line": 1432,
          "old_api": "wire_bytes",
          "new_api": "AddRecompilationUnit",
          "old_text": "native_module->wire_bytes()",
          "new_text": "builder.AddRecompilationUnit(func_index, ExecutionTier::kLiftoff)",
          "old_line_content": "  ModuleWireBytes wire_bytes(native_module->wire_bytes());",
          "new_line_content": "      builder.AddRecompilationUnit(func_index, ExecutionTier::kLiftoff);",
          "content_same": false
        },
        {
          "line": 1435,
          "old_api": "IsTieredDown",
          "new_api": "enabled_features",
          "old_text": "native_module->IsTieredDown()",
          "new_text": "GetCompileStrategy(\n        module, native_module->enabled_features(), func_index, lazy_module)",
          "old_line_content": "  const bool prefer_liftoff = native_module->IsTieredDown();",
          "new_line_content": "    CompileStrategy strategy = GetCompileStrategy(",
          "content_same": false
        },
        {
          "line": 1441,
          "old_api": "AddRecompilationUnit",
          "new_api": "UseLazyStub",
          "old_text": "builder.AddRecompilationUnit(func_index, ExecutionTier::kLiftoff)",
          "new_text": "native_module->UseLazyStub(func_index)",
          "old_line_content": "      builder.AddRecompilationUnit(func_index, ExecutionTier::kLiftoff);",
          "new_line_content": "      native_module->UseLazyStub(func_index);",
          "content_same": false
        },
        {
          "line": 1444,
          "old_api": "enabled_features",
          "new_api": "AddUnits",
          "old_text": "GetCompileStrategy(\n        module, native_module->enabled_features(), func_index, lazy_module)",
          "new_text": "builder.AddUnits(func_index)",
          "old_line_content": "    CompileStrategy strategy = GetCompileStrategy(",
          "new_line_content": "      builder.AddUnits(func_index);",
          "content_same": false
        },
        {
          "line": 1447,
          "old_api": "UseLazyStub",
          "new_api": "AddImportWrapperUnits",
          "old_text": "native_module->UseLazyStub(func_index)",
          "new_text": "AddImportWrapperUnits(native_module, &builder)",
          "old_line_content": "      native_module->UseLazyStub(func_index);",
          "new_line_content": "  int num_import_wrappers = AddImportWrapperUnits(native_module, &builder);",
          "content_same": false
        },
        {
          "line": 1449,
          "old_api": "AddTopTierUnit",
          "new_api": "wasm_engine",
          "old_text": "builder.AddTopTierUnit(func_index)",
          "new_text": "isolate->wasm_engine()",
          "old_line_content": "      builder.AddTopTierUnit(func_index);",
          "new_line_content": "      AddExportWrapperUnits(isolate, isolate->wasm_engine(), native_module,",
          "content_same": false
        },
        {
          "line": 1450,
          "old_api": "UseLazyStub",
          "new_api": "WasmFeatures::FromIsolate(isolate)",
          "old_text": "native_module->UseLazyStub(func_index)",
          "new_text": "WasmFeatures::FromIsolate(isolate)",
          "old_line_content": "      native_module->UseLazyStub(func_index);",
          "new_line_content": "                            &builder, WasmFeatures::FromIsolate(isolate));",
          "content_same": false
        },
        {
          "line": 1453,
          "old_api": "AddUnits",
          "new_api": "Commit",
          "old_text": "builder.AddUnits(func_index)",
          "new_text": "builder.Commit()",
          "old_line_content": "      builder.AddUnits(func_index);",
          "new_line_content": "  builder.Commit();",
          "content_same": false
        },
        {
          "line": 1459,
          "old_api": "WasmFeatures::FromIsolate(isolate)",
          "new_api": "has_compilation_hints",
          "old_text": "WasmFeatures::FromIsolate(isolate)",
          "new_text": "enabled_features.has_compilation_hints()",
          "old_line_content": "                            &builder, WasmFeatures::FromIsolate(isolate));",
          "new_line_content": "  if (lazy_module || enabled_features.has_compilation_hints()) return true;",
          "content_same": false
        },
        {
          "line": 1483,
          "old_api": "explicit",
          "new_api": "std::move(native_module)",
          "old_text": "explicit",
          "new_text": "std::move(native_module)",
          "old_line_content": "  explicit CompilationTimeCallback(",
          "new_line_content": "        native_module_(std::move(native_module)),",
          "content_same": false
        },
        {
          "line": 1488,
          "old_api": "base::TimeTicks::Now()",
          "new_api": "lock",
          "old_text": "base::TimeTicks::Now()",
          "new_text": "native_module_.lock()",
          "old_line_content": "      : start_time_(base::TimeTicks::Now()),",
          "new_line_content": "    std::shared_ptr<NativeModule> native_module = native_module_.lock();",
          "content_same": false
        },
        {
          "line": 1490,
          "old_api": "std::move(metrics_recorder)",
          "new_api": "base::TimeTicks::Now()",
          "old_text": "std::move(metrics_recorder)",
          "new_text": "base::TimeTicks::Now()",
          "old_line_content": "        metrics_recorder_(std::move(metrics_recorder)),",
          "new_line_content": "    auto now = base::TimeTicks::Now();",
          "content_same": false
        },
        {
          "line": 1499,
          "old_api": "base::TimeTicks::Now()",
          "new_api": "wasm_streaming_compile_wasm_module_time",
          "old_text": "base::TimeTicks::Now()",
          "new_text": "async_counters_->wasm_streaming_compile_wasm_module_time()",
          "old_line_content": "    auto now = base::TimeTicks::Now();",
          "new_line_content": "                : async_counters_->wasm_streaming_compile_wasm_module_time();",
          "content_same": false
        },
        {
          "line": 1524,
          "old_api": "DelayMainThreadEvent",
          "new_api": "InMicroseconds",
          "old_text": "metrics_recorder_->DelayMainThreadEvent(event, context_id_)",
          "new_text": "duration.InMicroseconds()",
          "old_line_content": "      metrics_recorder_->DelayMainThreadEvent(event, context_id_);",
          "new_line_content": "          duration.InMicroseconds()             // wall_clock_duration_in_us",
          "content_same": false
        },
        {
          "line": 1567,
          "old_api": "CHECK",
          "new_api": "counters",
          "old_text": "CHECK(!FLAG_jitless)",
          "new_text": "isolate->counters()",
          "old_line_content": "  CHECK(!FLAG_jitless);",
          "new_line_content": "    ValidateSequentially(wasm_module, native_module.get(), isolate->counters(),",
          "content_same": false
        },
        {
          "line": 1568,
          "old_api": "wire_bytes",
          "new_api": "allocator",
          "old_text": "native_module->wire_bytes()",
          "new_text": "isolate->allocator()",
          "old_line_content": "  ModuleWireBytes wire_bytes(native_module->wire_bytes());",
          "new_line_content": "                         isolate->allocator(), thrower, lazy_module,",
          "content_same": false
        },
        {
          "line": 1571,
          "old_api": "enabled_features",
          "new_api": "error",
          "old_text": "native_module->enabled_features()",
          "new_text": "thrower->error()",
          "old_line_content": "      MayCompriseLazyFunctions(wasm_module, native_module->enabled_features(),",
          "new_line_content": "    if (thrower->error()) return;",
          "content_same": false
        },
        {
          "line": 1577,
          "old_api": "allocator",
          "new_api": "compilation_state",
          "old_text": "isolate->allocator()",
          "new_text": "native_module->compilation_state()",
          "old_line_content": "                         isolate->allocator(), thrower, lazy_module,",
          "new_line_content": "  auto* compilation_state = Impl(native_module->compilation_state());",
          "content_same": false
        },
        {
          "line": 1580,
          "old_api": "error",
          "new_api": "metrics_recorder",
          "old_text": "thrower->error()",
          "new_text": "isolate->metrics_recorder()",
          "old_line_content": "    if (thrower->error()) return;",
          "new_line_content": "        isolate->async_counters(), isolate->metrics_recorder(), context_id,",
          "content_same": false
        },
        {
          "line": 1587,
          "old_api": "base::TimeTicks::IsHighResolution()",
          "new_api": "WaitForCompilationEvent",
          "old_text": "base::TimeTicks::IsHighResolution()",
          "new_text": "compilation_state->WaitForCompilationEvent(\n      CompilationEvent::kFinishedExportWrappers)",
          "old_line_content": "  if (base::TimeTicks::IsHighResolution()) {",
          "new_line_content": "  compilation_state->WaitForCompilationEvent(",
          "content_same": false
        },
        {
          "line": 1594,
          "old_api": "get",
          "new_api": "error",
          "old_text": "native_module.get()",
          "new_text": "thrower->error()",
          "old_line_content": "  InitializeCompilationUnits(isolate, native_module.get());",
          "new_line_content": "    CHECK(thrower->error());",
          "content_same": false
        },
        {
          "line": 1601,
          "old_api": "counters",
          "new_api": "FinalizeJSToWasmWrappers",
          "old_text": "isolate->counters()",
          "new_text": "compilation_state->FinalizeJSToWasmWrappers(\n        isolate, native_module->module(), export_wrappers_out)",
          "old_line_content": "    ValidateSequentially(wasm_module, native_module.get(), isolate->counters(),",
          "new_line_content": "    compilation_state->FinalizeJSToWasmWrappers(",
          "content_same": false
        },
        {
          "line": 1602,
          "old_api": "allocator",
          "new_api": "module",
          "old_text": "isolate->allocator()",
          "new_text": "native_module->module()",
          "old_line_content": "                         isolate->allocator(), thrower, lazy_module);",
          "new_line_content": "        isolate, native_module->module(), export_wrappers_out);",
          "content_same": false
        },
        {
          "line": 1610,
          "old_api": "FinalizeJSToWasmWrappers",
          "new_api": "failed",
          "old_text": "compilation_state->FinalizeJSToWasmWrappers(\n        isolate, native_module->module(), export_wrappers_out)",
          "new_text": "compilation_state->failed()",
          "old_line_content": "    compilation_state->FinalizeJSToWasmWrappers(",
          "new_line_content": "  if (compilation_state->failed()) {",
          "content_same": false
        },
        {
          "line": 1611,
          "old_api": "module",
          "new_api": "DCHECK_IMPLIES",
          "old_text": "native_module->module()",
          "new_text": "DCHECK_IMPLIES(lazy_module, !FLAG_wasm_lazy_validation)",
          "old_line_content": "        isolate, native_module->module(), export_wrappers_out);",
          "new_line_content": "    DCHECK_IMPLIES(lazy_module, !FLAG_wasm_lazy_validation);",
          "content_same": false
        },
        {
          "line": 1614,
          "old_api": "WaitForCompilationEvent",
          "new_api": "error",
          "old_text": "compilation_state->WaitForCompilationEvent(\n      CompilationEvent::kFinishedBaselineCompilation)",
          "new_text": "thrower->error()",
          "old_line_content": "  compilation_state->WaitForCompilationEvent(",
          "new_line_content": "    CHECK(thrower->error());",
          "content_same": false
        },
        {
          "line": 1617,
          "old_api": "PublishDetectedFeatures",
          "new_api": "module",
          "old_text": "compilation_state->PublishDetectedFeatures(isolate)",
          "new_text": "native_module->module()",
          "old_line_content": "  compilation_state->PublishDetectedFeatures(isolate);",
          "new_line_content": "        isolate, native_module->module(), export_wrappers_out);",
          "content_same": false
        },
        {
          "line": 1623,
          "old_api": "error",
          "new_api": "explicit",
          "old_text": "thrower->error()",
          "new_text": "explicit",
          "old_line_content": "    CHECK(thrower->error());",
          "new_line_content": "  explicit BackgroundCompileJob(std::weak_ptr<NativeModule> native_module,",
          "content_same": false
        },
        {
          "line": 1626,
          "old_api": "module",
          "new_api": "std::move(native_module)",
          "old_text": "native_module->module()",
          "new_text": "std::move(native_module)",
          "old_line_content": "        isolate, native_module->module(), export_wrappers_out);",
          "new_line_content": "      : native_module_(std::move(native_module)),",
          "content_same": false
        },
        {
          "line": 1642,
          "old_api": "get",
          "new_api": "compilation_state",
          "old_text": "async_counters_.get()",
          "new_text": "std::min(\n        static_cast<size_t>(FLAG_wasm_num_compilation_tasks),\n        worker_count +\n            compile_scope.compilation_state()->NumOutstandingCompilations())",
          "old_line_content": "    ExecuteCompilationUnits(native_module_, async_counters_.get(), delegate,",
          "new_line_content": "    return std::min(",
          "content_same": false
        },
        {
          "line": 1669,
          "old_api": "get",
          "new_api": "as_vector",
          "old_text": "module.get()",
          "new_text": "wire_bytes_copy.as_vector()",
          "old_line_content": "  const WasmModule* wasm_module = module.get();",
          "new_line_content": "          wasm_module->origin, wire_bytes_copy.as_vector(), isolate);",
          "content_same": false
        },
        {
          "line": 1677,
          "old_api": "as_vector",
          "new_api": "counters",
          "old_text": "isolate->wasm_engine()->MaybeGetNativeModule(\n          wasm_module->origin, wire_bytes_copy.as_vector(), isolate)",
          "new_text": "isolate->counters()",
          "old_line_content": "      isolate->wasm_engine()->MaybeGetNativeModule(",
          "new_line_content": "      isolate->counters(), wasm_module->origin, wasm_compile, module_time));",
          "content_same": false
        },
        {
          "line": 1681,
          "old_api": "CompileJsToWasmWrappers",
          "new_api": "CountUsage",
          "old_text": "CompileJsToWasmWrappers(isolate, wasm_module, export_wrappers_out)",
          "new_text": "isolate->CountUsage(v8::Isolate::UseCounterFeature::kWasmSharedMemory)",
          "old_line_content": "    CompileJsToWasmWrappers(isolate, wasm_module, export_wrappers_out);",
          "new_line_content": "    isolate->CountUsage(v8::Isolate::UseCounterFeature::kWasmSharedMemory);",
          "content_same": false
        },
        {
          "line": 1698,
          "old_api": "wasm_engine",
          "new_api": "CompileNativeModule",
          "old_text": "isolate->wasm_engine()->NewNativeModule(\n      isolate, enabled, module, code_size_estimate)",
          "new_text": "CompileNativeModule(isolate, context_id, thrower, wasm_module, native_module,\n                      export_wrappers_out)",
          "old_line_content": "  native_module = isolate->wasm_engine()->NewNativeModule(",
          "new_line_content": "  CompileNativeModule(isolate, context_id, thrower, wasm_module, native_module,",
          "content_same": false
        },
        {
          "line": 1700,
          "old_api": "std::move(wire_bytes_copy)",
          "new_api": "wasm_engine",
          "old_text": "std::move(wire_bytes_copy)",
          "new_text": "isolate->wasm_engine()->UpdateNativeModuleCache(\n      thrower->error(), &native_module, isolate)",
          "old_line_content": "  native_module->SetWireBytes(std::move(wire_bytes_copy));",
          "new_line_content": "  bool cache_hit = !isolate->wasm_engine()->UpdateNativeModuleCache(",
          "content_same": false
        },
        {
          "line": 1701,
          "old_api": "compilation_state",
          "new_api": "error",
          "old_text": "native_module->compilation_state()->set_compilation_id(compilation_id)",
          "new_text": "thrower->error()",
          "old_line_content": "  native_module->compilation_state()->set_compilation_id(compilation_id);",
          "new_line_content": "      thrower->error(), &native_module, isolate);",
          "content_same": false
        },
        {
          "line": 1710,
          "old_api": "error",
          "new_api": "wasm_engine",
          "old_text": "thrower->error()",
          "new_text": "isolate->wasm_engine()->LogOutstandingCodesForIsolate(isolate)",
          "old_line_content": "      thrower->error(), &native_module, isolate);",
          "new_line_content": "  isolate->wasm_engine()->LogOutstandingCodesForIsolate(isolate);",
          "content_same": false
        },
        {
          "line": 1719,
          "old_api": "wasm_engine",
          "new_api": "compilation_state",
          "old_text": "isolate->wasm_engine()->LogOutstandingCodesForIsolate(isolate)",
          "new_text": "native_module->compilation_state()",
          "old_line_content": "  isolate->wasm_engine()->LogOutstandingCodesForIsolate(isolate);",
          "new_line_content": "  auto* compilation_state = Impl(native_module->compilation_state());",
          "content_same": false
        },
        {
          "line": 1728,
          "old_api": "compilation_state",
          "new_api": "Signal",
          "old_text": "native_module->compilation_state()",
          "new_text": "recompilation_finished_semaphore->Signal()",
          "old_line_content": "  auto* compilation_state = Impl(native_module->compilation_state());",
          "new_line_content": "          recompilation_finished_semaphore->Signal();",
          "content_same": false
        },
        {
          "line": 1732,
          "old_api": "InitializeRecompilation",
          "new_api": "constexpr",
          "old_text": "compilation_state->InitializeRecompilation(\n      tiering_state,\n      [recompilation_finished_semaphore](CompilationEvent event) {\n        DCHECK_NE(CompilationEvent::kFailedCompilation, event);\n        if (event == CompilationEvent::kFinishedRecompilation) {\n          recompilation_finished_semaphore->Signal();\n        }\n      })",
          "new_text": "constexpr",
          "old_line_content": "  compilation_state->InitializeRecompilation(",
          "new_line_content": "  constexpr JobDelegate* kNoDelegate = nullptr;",
          "content_same": false
        },
        {
          "line": 1737,
          "old_api": "Signal",
          "new_api": "failed",
          "old_text": "recompilation_finished_semaphore->Signal()",
          "new_text": "compilation_state->failed()",
          "old_line_content": "          recompilation_finished_semaphore->Signal();",
          "new_line_content": "  DCHECK(!compilation_state->failed());",
          "content_same": false
        },
        {
          "line": 1758,
          "old_api": "base::TimeTicks::Now()",
          "new_api": "reinterpret_cast<v8::Isolate*>(isolate)",
          "old_text": "base::TimeTicks::Now()",
          "new_text": "reinterpret_cast<v8::Isolate*>(isolate)",
          "old_line_content": "      start_time_(base::TimeTicks::Now()),",
          "new_line_content": "  v8::Isolate* v8_isolate = reinterpret_cast<v8::Isolate*>(isolate);",
          "content_same": false
        },
        {
          "line": 1759,
          "old_api": "std::move(bytes_copy)",
          "new_api": "V8::GetCurrentPlatform()",
          "old_text": "std::move(bytes_copy)",
          "new_text": "V8::GetCurrentPlatform()",
          "old_line_content": "      bytes_copy_(std::move(bytes_copy)),",
          "new_line_content": "  v8::Platform* platform = V8::GetCurrentPlatform();",
          "content_same": false
        },
        {
          "line": 1760,
          "old_api": "get",
          "new_api": "GetForegroundTaskRunner",
          "old_text": "bytes_copy_.get()",
          "new_text": "platform->GetForegroundTaskRunner(v8_isolate)",
          "old_line_content": "      wire_bytes_(bytes_copy_.get(), bytes_copy_.get() + length),",
          "new_line_content": "  foreground_task_runner_ = platform->GetForegroundTaskRunner(v8_isolate);",
          "content_same": false
        },
        {
          "line": 1763,
          "old_api": "TRACE_DISABLED_BY_DEFAULT",
          "new_api": "global_handles",
          "old_text": "TRACE_DISABLED_BY_DEFAULT(\"v8.wasm.detailed\")",
          "new_text": "isolate->global_handles()->Create(*incumbent_context)",
          "old_line_content": "  TRACE_EVENT0(TRACE_DISABLED_BY_DEFAULT(\"v8.wasm.detailed\"),",
          "new_line_content": "  incumbent_context_ = isolate->global_handles()->Create(*incumbent_context);",
          "content_same": false
        },
        {
          "line": 1765,
          "old_api": "CHECK",
          "new_api": "GetOrRegisterRecorderContextId",
          "old_text": "CHECK(FLAG_wasm_async_compilation)",
          "new_text": "isolate->GetOrRegisterRecorderContextId(native_context_)",
          "old_line_content": "  CHECK(FLAG_wasm_async_compilation);",
          "new_line_content": "  context_id_ = isolate->GetOrRegisterRecorderContextId(native_context_);",
          "content_same": false
        },
        {
          "line": 1771,
          "old_api": "native_context",
          "new_api": "metrics_recorder",
          "old_text": "context->native_context()",
          "new_text": "isolate_->metrics_recorder()",
          "old_line_content": "      isolate->global_handles()->Create(context->native_context());",
          "new_line_content": "                        isolate_->metrics_recorder());  // --",
          "content_same": false
        },
        {
          "line": 1846,
          "old_api": "DCHECK_NULL",
          "new_api": "CancelAndWait",
          "old_text": "DCHECK_NULL(stream_)",
          "new_text": "background_task_manager_.CancelAndWait()",
          "old_line_content": "  DCHECK_NULL(stream_);",
          "new_line_content": "  background_task_manager_.CancelAndWait();",
          "content_same": false
        },
        {
          "line": 1849,
          "old_api": "allocator",
          "new_api": "compilation_state",
          "old_text": "isolate_->allocator()",
          "new_text": "native_module_->compilation_state()",
          "old_line_content": "          this, isolate_->async_counters(), isolate_->allocator()));",
          "new_line_content": "    Impl(native_module_->compilation_state())",
          "content_same": false
        },
        {
          "line": 1858,
          "old_api": "compilation_state",
          "new_api": "location",
          "old_text": "native_module_->compilation_state()",
          "new_text": "native_context_.location()",
          "old_line_content": "    Impl(native_module_->compilation_state())",
          "new_line_content": "  isolate_->global_handles()->Destroy(native_context_.location());",
          "content_same": false
        },
        {
          "line": 1869,
          "old_api": "is_null",
          "new_api": "CountUsage",
          "old_text": "module_object_.is_null()",
          "new_text": "isolate_->CountUsage(v8::Isolate::UseCounterFeature::kWasmSharedMemory)",
          "old_line_content": "  if (!module_object_.is_null()) {",
          "new_line_content": "    isolate_->CountUsage(v8::Isolate::UseCounterFeature::kWasmSharedMemory);",
          "content_same": false
        },
        {
          "line": 1878,
          "old_api": "CountUsage",
          "new_api": "wasm_engine",
          "old_text": "isolate_->CountUsage(v8::Isolate::UseCounterFeature::kWasmSharedMemory)",
          "new_text": "isolate_->wasm_engine()->NewNativeModule(\n      isolate_, enabled_features_, std::move(module), code_size_estimate)",
          "old_line_content": "    isolate_->CountUsage(v8::Isolate::UseCounterFeature::kWasmSharedMemory);",
          "new_line_content": "  native_module_ = isolate_->wasm_engine()->NewNativeModule(",
          "content_same": false
        },
        {
          "line": 1887,
          "old_api": "wasm_engine",
          "new_api": "module_bytes",
          "old_text": "isolate_->wasm_engine()->NewNativeModule(\n      isolate_, enabled_features_, std::move(module), code_size_estimate)",
          "new_text": "wire_bytes_.module_bytes()",
          "old_line_content": "  native_module_ = isolate_->wasm_engine()->NewNativeModule(",
          "new_line_content": "      module->origin, wire_bytes_.module_bytes(), isolate_);",
          "content_same": false
        },
        {
          "line": 1889,
          "old_api": "length",
          "new_api": "std::move(module)",
          "old_text": "wire_bytes_.length()",
          "new_text": "std::move(module)",
          "old_line_content": "  native_module_->SetWireBytes({std::move(bytes_copy_), wire_bytes_.length()});",
          "new_line_content": "    CreateNativeModule(std::move(module), code_size_estimate);",
          "content_same": false
        },
        {
          "line": 1898,
          "old_api": "std::move(module)",
          "new_api": "is_null",
          "old_text": "std::move(module)",
          "new_text": "module_object_.is_null()",
          "old_line_content": "    CreateNativeModule(std::move(module), code_size_estimate);",
          "new_line_content": "  DCHECK(module_object_.is_null());",
          "content_same": false
        },
        {
          "line": 1914,
          "old_api": "global_handles",
          "new_api": "compilation_state",
          "old_text": "isolate_->global_handles()->Create(*module_object)",
          "new_text": "native_module_->compilation_state()",
          "old_line_content": "  module_object_ = isolate_->global_handles()->Create(*module_object);",
          "new_line_content": "  auto compilation_state = Impl(native_module_->compilation_state());",
          "content_same": false
        },
        {
          "line": 1923,
          "old_api": "compilation_state",
          "new_api": "base::TimeTicks::IsHighResolution()",
          "old_text": "native_module_->compilation_state()",
          "new_text": "base::TimeTicks::IsHighResolution()",
          "old_line_content": "  auto compilation_state = Impl(native_module_->compilation_state());",
          "new_line_content": "  if (base::TimeTicks::IsHighResolution()) {",
          "content_same": false
        },
        {
          "line": 1926,
          "old_api": "NotifyNativeModuleCreated",
          "new_api": "counters",
          "old_text": "stream_->NotifyNativeModuleCreated(native_module_)",
          "new_text": "isolate_->counters()->wasm_streaming_finish_wasm_module_time()->AddSample(\n        duration_usecs)",
          "old_line_content": "      stream_->NotifyNativeModuleCreated(native_module_);",
          "new_line_content": "    isolate_->counters()->wasm_streaming_finish_wasm_module_time()->AddSample(",
          "content_same": false
        },
        {
          "line": 1945,
          "old_api": "failed",
          "new_api": "is_null",
          "old_text": "compilation_state->failed()",
          "new_text": "isolate_->context().is_null()",
          "old_line_content": "          !compilation_state->failed(),             // success",
          "new_line_content": "  DCHECK(!isolate_->context().is_null());",
          "content_same": false
        },
        {
          "line": 1947,
          "old_api": "liftoff_bailout_count",
          "new_api": "script",
          "old_text": "native_module_->liftoff_bailout_count()",
          "new_text": "module_object_->script()",
          "old_line_content": "          native_module_->liftoff_bailout_count(),  // liftoff_bailout_count",
          "new_line_content": "  Handle<Script> script(module_object_->script(), isolate_);",
          "content_same": false
        },
        {
          "line": 1948,
          "old_api": "InMicroseconds",
          "new_api": "module",
          "old_text": "duration.InMicroseconds()",
          "new_text": "module_object_->module()",
          "old_line_content": "          duration.InMicroseconds()                 // wall_clock_duration_in_us",
          "new_line_content": "  const WasmModule* module = module_object_->module();",
          "content_same": false
        },
        {
          "line": 1954,
          "old_api": "is_null",
          "new_api": "GetNameOrNull",
          "old_text": "isolate_->context().is_null()",
          "new_text": "wire_bytes.GetNameOrNull(module->debug_symbols.external_url)",
          "old_line_content": "  DCHECK(!isolate_->context().is_null());",
          "new_line_content": "        wire_bytes.GetNameOrNull(module->debug_symbols.external_url),",
          "content_same": false
        },
        {
          "line": 1956,
          "old_api": "script",
          "new_api": "ToHandleChecked",
          "old_text": "module_object_->script()",
          "new_text": "src_map_str.ToHandleChecked()",
          "old_line_content": "  Handle<Script> script(module_object_->script(), isolate_);",
          "new_line_content": "    script->set_source_mapping_url(*src_map_str.ToHandleChecked());",
          "content_same": false
        },
        {
          "line": 1961,
          "old_api": "native_module",
          "new_api": "debug",
          "old_text": "module_object_->native_module()->wire_bytes()",
          "new_text": "isolate_->debug()->OnAfterCompile(script)",
          "old_line_content": "    ModuleWireBytes wire_bytes(module_object_->native_module()->wire_bytes());",
          "new_line_content": "    isolate_->debug()->OnAfterCompile(script);",
          "content_same": false
        },
        {
          "line": 1970,
          "old_api": "debug",
          "new_api": "CompileJsToWasmWrappers",
          "old_text": "isolate_->debug()->OnAfterCompile(script)",
          "new_text": "CompileJsToWasmWrappers(isolate_, module, &export_wrappers)",
          "old_line_content": "    isolate_->debug()->OnAfterCompile(script);",
          "new_line_content": "      CompileJsToWasmWrappers(isolate_, module, &export_wrappers);",
          "content_same": false
        },
        {
          "line": 1984,
          "old_api": "set_export_wrappers",
          "new_api": "RecompileForTiering",
          "old_text": "module_object_->set_export_wrappers(*export_wrappers)",
          "new_text": "native_module_->RecompileForTiering()",
          "old_line_content": "    module_object_->set_export_wrappers(*export_wrappers);",
          "new_line_content": "  if (native_module_->IsTieredDown()) native_module_->RecompileForTiering();",
          "content_same": false
        },
        {
          "line": 1999,
          "old_api": "FinishModule",
          "new_api": "Reify",
          "old_text": "FinishModule()",
          "new_text": "thrower.Reify()",
          "old_line_content": "  FinishModule();",
          "new_line_content": "  resolver_->OnCompilationFailed(thrower.Reify());",
          "content_same": false
        },
        {
          "line": 2004,
          "old_api": "CompileFailed",
          "new_api": "module",
          "old_text": "thrower.CompileFailed(error)",
          "new_text": "native_module_->module()",
          "old_line_content": "  thrower.CompileFailed(error);",
          "new_line_content": "  DCHECK_EQ(native_module_->module()->origin, kWasmOrigin);",
          "content_same": false
        },
        {
          "line": 2007,
          "old_api": "wasm_engine",
          "new_api": "allocator",
          "old_text": "isolate_->wasm_engine()->RemoveCompileJob(this)",
          "new_text": "isolate_->allocator()",
          "old_line_content": "      isolate_->wasm_engine()->RemoveCompileJob(this);",
          "new_line_content": "                       isolate_->counters(), isolate_->allocator(), &thrower,",
          "content_same": false
        },
        {
          "line": 2013,
          "old_api": "module",
          "new_api": "Reify",
          "old_text": "native_module_->module()",
          "new_text": "thrower.Reify()",
          "old_line_content": "  DCHECK_EQ(native_module_->module()->origin, kWasmOrigin);",
          "new_line_content": "  resolver_->OnCompilationFailed(thrower.Reify());",
          "content_same": false
        },
        {
          "line": 2022,
          "old_api": "Reify",
          "new_api": "Utils::ToLocal(incumbent_context_)",
          "old_text": "thrower.Reify()",
          "new_text": "Utils::ToLocal(incumbent_context_)",
          "old_line_content": "  resolver_->OnCompilationFailed(thrower.Reify());",
          "new_line_content": "      Utils::ToLocal(incumbent_context_);",
          "content_same": false
        },
        {
          "line": 2050,
          "old_api": "DecrementAndCheckFinisherCount",
          "new_api": "std::move(native_module)",
          "old_text": "job_->DecrementAndCheckFinisherCount()",
          "new_text": "std::move(native_module)",
          "old_line_content": "        if (job_->DecrementAndCheckFinisherCount()) {",
          "new_line_content": "          job_->DoSync<CompileFinished>(cache_hit ? std::move(native_module)",
          "content_same": false
        },
        {
          "line": 2156,
          "old_api": "DCHECK_EQ",
          "new_api": "get",
          "old_text": "DCHECK_EQ(this, job_->pending_foreground_task_)",
          "new_text": "new_task.get()",
          "old_line_content": "    DCHECK_EQ(this, job_->pending_foreground_task_);",
          "new_line_content": "  pending_foreground_task_ = new_task.get();",
          "content_same": false
        },
        {
          "line": 2164,
          "old_api": "std::make_unique<CompileTask>(this, true)",
          "new_api": "get",
          "old_text": "std::make_unique<CompileTask>(this, true)",
          "new_text": "new_task.get()",
          "old_line_content": "  auto new_task = std::make_unique<CompileTask>(this, true);",
          "new_line_content": "  pending_foreground_task_ = new_task.get();",
          "content_same": false
        },
        {
          "line": 2165,
          "old_api": "get",
          "new_api": "Run",
          "old_text": "new_task.get()",
          "new_text": "new_task->Run()",
          "old_line_content": "  pending_foreground_task_ = new_task.get();",
          "new_line_content": "  new_task->Run();",
          "content_same": false
        },
        {
          "line": 2170,
          "old_api": "DCHECK_NULL",
          "new_api": "Cancel",
          "old_text": "DCHECK_NULL(pending_foreground_task_)",
          "new_text": "pending_foreground_task_->Cancel()",
          "old_line_content": "  DCHECK_NULL(pending_foreground_task_);",
          "new_line_content": "  pending_foreground_task_->Cancel();",
          "content_same": false
        },
        {
          "line": 2228,
          "old_api": "std::move(metrics_recorder)",
          "new_api": "TRACE_DISABLED_BY_DEFAULT",
          "old_text": "std::move(metrics_recorder)",
          "new_text": "TRACE_DISABLED_BY_DEFAULT(\"v8.wasm.detailed\")",
          "old_line_content": "      : counters_(counters), metrics_recorder_(std::move(metrics_recorder)) {}",
          "new_line_content": "      TRACE_EVENT0(TRACE_DISABLED_BY_DEFAULT(\"v8.wasm.detailed\"),",
          "content_same": false
        },
        {
          "line": 2237,
          "old_api": "TRACE_DISABLED_BY_DEFAULT",
          "new_api": "ok",
          "old_text": "TRACE_DISABLED_BY_DEFAULT(\"v8.wasm.detailed\")",
          "new_text": "result.ok()",
          "old_line_content": "      TRACE_EVENT0(TRACE_DISABLED_BY_DEFAULT(\"v8.wasm.detailed\"),",
          "new_line_content": "      if (!FLAG_wasm_lazy_validation && result.ok()) {",
          "content_same": false
        },
        {
          "line": 2241,
          "old_api": "end",
          "new_api": "MayCompriseLazyFunctions",
          "old_text": "job->wire_bytes_.end()",
          "new_text": "MayCompriseLazyFunctions(module, enabled_features, lazy_module)",
          "old_line_content": "          enabled_features, job->wire_bytes_.start(), job->wire_bytes_.end(),",
          "new_line_content": "        if (MayCompriseLazyFunctions(module, enabled_features, lazy_module)) {",
          "content_same": false
        },
        {
          "line": 2242,
          "old_api": "context_id",
          "new_api": "isolate",
          "old_text": "job->context_id()",
          "new_text": "job->isolate()->wasm_engine()->allocator()",
          "old_line_content": "          false, kWasmOrigin, counters_, metrics_recorder_, job->context_id(),",
          "new_line_content": "          auto allocator = job->isolate()->wasm_engine()->allocator();",
          "content_same": false
        },
        {
          "line": 2251,
          "old_api": "isolate",
          "new_api": "GetCompileStrategy",
          "old_text": "job->isolate()->wasm_engine()->allocator()",
          "new_text": "GetCompileStrategy(\n                module, enabled_features, func_index, lazy_module)",
          "old_line_content": "          auto allocator = job->isolate()->wasm_engine()->allocator();",
          "new_line_content": "            CompileStrategy strategy = GetCompileStrategy(",
          "content_same": false
        },
        {
          "line": 2258,
          "old_api": "GetFunctionBytes",
          "new_api": "ValidateSingleFunction",
          "old_text": "job->wire_bytes_.GetFunctionBytes(func)",
          "new_text": "ValidateSingleFunction(module, func_index, code, counters_,\n                                         allocator, enabled_features)",
          "old_line_content": "                job->wire_bytes_.GetFunctionBytes(func);",
          "new_line_content": "                  ValidateSingleFunction(module, func_index, code, counters_,",
          "content_same": false
        },
        {
          "line": 2260,
          "old_api": "GetCompileStrategy",
          "new_api": "failed",
          "old_text": "GetCompileStrategy(\n                module, enabled_features, func_index, lazy_module)",
          "new_text": "function_result.failed()",
          "old_line_content": "            CompileStrategy strategy = GetCompileStrategy(",
          "new_line_content": "              if (function_result.failed()) {",
          "content_same": false
        },
        {
          "line": 2337,
          "old_api": "CreateNativeModule",
          "new_api": "CancelAndWait",
          "old_text": "job->CreateNativeModule(module_, code_size_estimate_)",
          "new_text": "job->background_task_manager_.CancelAndWait()",
          "old_line_content": "      job->CreateNativeModule(module_, code_size_estimate_);",
          "new_line_content": "    job->background_task_manager_.CancelAndWait();",
          "content_same": false
        },
        {
          "line": 2340,
          "old_api": "FinishCompile",
          "new_api": "compilation_state",
          "old_text": "job->FinishCompile(true)",
          "new_text": "job->native_module_->compilation_state()",
          "old_line_content": "      job->FinishCompile(true);",
          "new_line_content": "        Impl(job->native_module_->compilation_state());",
          "content_same": false
        },
        {
          "line": 2346,
          "old_api": "CancelAndWait",
          "new_api": "AddCallback",
          "old_text": "job->background_task_manager_.CancelAndWait()",
          "new_text": "compilation_state->AddCallback(CompilationTimeCallback{\n          job->isolate_->async_counters(), job->isolate_->metrics_recorder(),\n          job->context_id_, job->native_module_, compile_mode})",
          "old_line_content": "    job->background_task_manager_.CancelAndWait();",
          "new_line_content": "      compilation_state->AddCallback(CompilationTimeCallback{",
          "content_same": false
        },
        {
          "line": 2389,
          "old_api": "AsyncCompileFailed",
          "new_api": "std::move(native_module)",
          "old_text": "job->AsyncCompileFailed()",
          "new_text": "std::move(native_module)",
          "old_line_content": "    return job->AsyncCompileFailed();",
          "new_line_content": "      : native_module_(std::move(native_module)) {}",
          "content_same": false
        },
        {
          "line": 2418,
          "old_api": "explicit",
          "new_api": "compilation_state",
          "old_text": "explicit",
          "new_text": "job->native_module_->compilation_state()->failed()",
          "old_line_content": "  explicit CompileFinished(std::shared_ptr<NativeModule> cached_native_module)",
          "new_line_content": "      DCHECK(!job->native_module_->compilation_state()->failed());",
          "content_same": false
        },
        {
          "line": 2437,
          "old_api": "FinishCompile",
          "new_api": "wasm_engine",
          "old_text": "job->FinishCompile(cached_native_module_ != nullptr)",
          "new_text": "isolate_->wasm_engine()->RemoveCompileJob(this)",
          "old_line_content": "    job->FinishCompile(cached_native_module_ != nullptr);",
          "new_line_content": "  isolate_->wasm_engine()->RemoveCompileJob(this);",
          "content_same": false
        },
        {
          "line": 2445,
          "old_api": "AsyncCompileSucceeded",
          "new_api": "wasm_engine",
          "old_text": "AsyncCompileSucceeded(module_object_)",
          "new_text": "job_->isolate_->wasm_engine()",
          "old_line_content": "  AsyncCompileSucceeded(module_object_);",
          "new_line_content": "      wasm_engine_(job_->isolate_->wasm_engine()),",
          "content_same": false
        },
        {
          "line": 2462,
          "old_api": "wasm_engine",
          "new_api": "CancelAndWait",
          "old_text": "job_->isolate_->wasm_engine()->StreamingCompilationFailed(prefix_hash_)",
          "new_text": "job_->background_task_manager_.CancelAndWait()",
          "old_line_content": "    job_->isolate_->wasm_engine()->StreamingCompilationFailed(prefix_hash_);",
          "new_line_content": "  job_->background_task_manager_.CancelAndWait();",
          "content_same": false
        },
        {
          "line": 2468,
          "old_api": "has_error",
          "new_api": "length",
          "old_text": "error.has_error()",
          "new_text": "job_->wire_bytes_.length()",
          "old_line_content": "  DCHECK(error.has_error());",
          "new_line_content": "  job_->metrics_event_.module_size_in_bytes = job_->wire_bytes_.length();",
          "content_same": false
        },
        {
          "line": 2471,
          "old_api": "CancelAndWait",
          "new_api": "metrics_recorder",
          "old_text": "job_->background_task_manager_.CancelAndWait()",
          "new_text": "job_->isolate_->metrics_recorder()->DelayMainThreadEvent(job_->metrics_event_,\n                                                           job_->context_id_)",
          "old_line_content": "  job_->background_task_manager_.CancelAndWait();",
          "new_line_content": "  job_->isolate_->metrics_recorder()->DelayMainThreadEvent(job_->metrics_event_,",
          "content_same": false
        },
        {
          "line": 2477,
          "old_api": "length",
          "new_api": "compilation_state",
          "old_text": "job_->wire_bytes_.length()",
          "new_text": "job_->native_module_->compilation_state()",
          "old_line_content": "  job_->metrics_event_.module_size_in_bytes = job_->wire_bytes_.length();",
          "new_line_content": "    Impl(job_->native_module_->compilation_state())",
          "content_same": false
        },
        {
          "line": 2480,
          "old_api": "metrics_recorder",
          "new_api": "job_->DoSync<AsyncCompileJob::DecodeFail,\n                 AsyncCompileJob::kUseExistingForegroundTask>(error)",
          "old_text": "job_->isolate_->metrics_recorder()->DelayMainThreadEvent(job_->metrics_event_,\n                                                           job_->context_id_)",
          "new_text": "job_->DoSync<AsyncCompileJob::DecodeFail,\n                 AsyncCompileJob::kUseExistingForegroundTask>(error)",
          "old_line_content": "  job_->isolate_->metrics_recorder()->DelayMainThreadEvent(job_->metrics_event_,",
          "new_line_content": "    job_->DoSync<AsyncCompileJob::DecodeFail,",
          "content_same": false
        },
        {
          "line": 2486,
          "old_api": "compilation_state",
          "new_api": "Clear",
          "old_text": "job_->native_module_->compilation_state()",
          "new_text": "compilation_unit_builder_->Clear()",
          "old_line_content": "    Impl(job_->native_module_->compilation_state())",
          "new_line_content": "    if (compilation_unit_builder_) compilation_unit_builder_->Clear();",
          "content_same": false
        },
        {
          "line": 2495,
          "old_api": "Clear",
          "new_api": "TRACE_STREAMING",
          "old_text": "compilation_unit_builder_->Clear()",
          "new_text": "TRACE_STREAMING(\"Process module header...\\n\")",
          "old_line_content": "    if (compilation_unit_builder_) compilation_unit_builder_->Clear();",
          "new_line_content": "  TRACE_STREAMING(\"Process module header...\\n\");",
          "content_same": false
        },
        {
          "line": 2497,
          "old_api": "job_->DoSync<AsyncCompileJob::DecodeFail>(error)",
          "new_api": "isolate",
          "old_text": "job_->DoSync<AsyncCompileJob::DecodeFail>(error)",
          "new_text": "job_->isolate()->metrics_recorder()",
          "old_line_content": "    job_->DoSync<AsyncCompileJob::DecodeFail>(error);",
          "new_line_content": "      job_->isolate()->counters(), job_->isolate()->metrics_recorder(),",
          "content_same": false
        },
        {
          "line": 2504,
          "old_api": "TRACE_STREAMING",
          "new_api": "NativeModuleCache::WireBytesHash(bytes)",
          "old_text": "TRACE_STREAMING(\"Process module header...\\n\")",
          "new_text": "NativeModuleCache::WireBytesHash(bytes)",
          "old_line_content": "  TRACE_STREAMING(\"Process module header...\\n\");",
          "new_line_content": "  prefix_hash_ = NativeModuleCache::WireBytesHash(bytes);",
          "content_same": false
        },
        {
          "line": 2521,
          "old_api": "TRACE_STREAMING",
          "new_api": "base::hash_combine(prefix_hash_,\n                                      NativeModuleCache::WireBytesHash(bytes))",
          "old_text": "TRACE_STREAMING(\"Process section %d ...\\n\", section_code)",
          "new_text": "base::hash_combine(prefix_hash_,\n                                      NativeModuleCache::WireBytesHash(bytes))",
          "old_line_content": "  TRACE_STREAMING(\"Process section %d ...\\n\", section_code);",
          "new_line_content": "    prefix_hash_ = base::hash_combine(prefix_hash_,",
          "content_same": false
        },
        {
          "line": 2525,
          "old_api": "CommitCompilationUnits",
          "new_api": "ModuleDecoder::IdentifyUnknownSection(\n        &decoder_, bytes, offset, &section_code)",
          "old_text": "CommitCompilationUnits()",
          "new_text": "ModuleDecoder::IdentifyUnknownSection(\n        &decoder_, bytes, offset, &section_code)",
          "old_line_content": "    CommitCompilationUnits();",
          "new_line_content": "    size_t bytes_consumed = ModuleDecoder::IdentifyUnknownSection(",
          "content_same": false
        },
        {
          "line": 2537,
          "old_api": "FinishDecoding",
          "new_api": "size",
          "old_text": "decoder_.FinishDecoding(false).error()",
          "new_text": "bytes.size()",
          "old_line_content": "      FinishAsyncCompileJobWithError(decoder_.FinishDecoding(false).error());",
          "new_line_content": "    bytes = bytes.SubVector(bytes_consumed, bytes.size());",
          "content_same": false
        },
        {
          "line": 2564,
          "old_api": "TRACE_STREAMING",
          "new_api": "set_code_section",
          "old_text": "TRACE_STREAMING(\"Start the code section with %d functions...\\n\",\n                  num_functions)",
          "new_text": "decoder_.set_code_section(code_section_start,\n                            static_cast<uint32_t>(code_section_length))",
          "old_line_content": "  TRACE_STREAMING(\"Start the code section with %d functions...\\n\",",
          "new_line_content": "  decoder_.set_code_section(code_section_start,",
          "content_same": false
        },
        {
          "line": 2567,
          "old_api": "static_cast<uint32_t>(num_functions)",
          "new_api": "base::hash_combine(prefix_hash_,\n                                    static_cast<uint32_t>(code_section_length))",
          "old_text": "static_cast<uint32_t>(num_functions)",
          "new_text": "base::hash_combine(prefix_hash_,\n                                    static_cast<uint32_t>(code_section_length))",
          "old_line_content": "  if (!decoder_.CheckFunctionsCount(static_cast<uint32_t>(num_functions),",
          "new_line_content": "  prefix_hash_ = base::hash_combine(prefix_hash_,",
          "content_same": false
        },
        {
          "line": 2569,
          "old_api": "FinishDecoding",
          "new_api": "GetStreamingCompilationOwnership",
          "old_text": "decoder_.FinishDecoding(false).error()",
          "new_text": "wasm_engine_->GetStreamingCompilationOwnership(prefix_hash_)",
          "old_line_content": "    FinishAsyncCompileJobWithError(decoder_.FinishDecoding(false).error());",
          "new_line_content": "  if (!wasm_engine_->GetStreamingCompilationOwnership(prefix_hash_)) {",
          "content_same": false
        },
        {
          "line": 2578,
          "old_api": "GetStreamingCompilationOwnership",
          "new_api": "module",
          "old_text": "wasm_engine_->GetStreamingCompilationOwnership(prefix_hash_)",
          "new_text": "decoder_.module()",
          "old_line_content": "  if (!wasm_engine_->GetStreamingCompilationOwnership(prefix_hash_)) {",
          "new_line_content": "      static_cast<int>(decoder_.module()->num_imported_functions);",
          "content_same": false
        },
        {
          "line": 2588,
          "old_api": "module",
          "new_api": "compilation_state",
          "old_text": "decoder_.module()",
          "new_text": "job_->native_module_->compilation_state()",
          "old_line_content": "  DCHECK_EQ(kWasmOrigin, decoder_.module()->origin);",
          "new_line_content": "  auto* compilation_state = Impl(job_->native_module_->compilation_state());",
          "content_same": false
        },
        {
          "line": 2595,
          "old_api": "shared_module",
          "new_api": "store",
          "old_text": "decoder_.shared_module()",
          "new_text": "job_->outstanding_finishers_.store(2)",
          "old_line_content": "      decoder_.shared_module(), false, code_size_estimate);",
          "new_line_content": "  job_->outstanding_finishers_.store(2);",
          "content_same": false
        },
        {
          "line": 2597,
          "old_api": "compilation_state",
          "new_api": "get",
          "old_text": "job_->native_module_->compilation_state()",
          "new_text": "job_->native_module_.get()",
          "old_line_content": "  auto* compilation_state = Impl(job_->native_module_->compilation_state());",
          "new_line_content": "      new CompilationUnitBuilder(job_->native_module_.get()));",
          "content_same": false
        },
        {
          "line": 2599,
          "old_api": "module",
          "new_api": "get",
          "old_text": "job_->native_module_->module()",
          "new_text": "job_->native_module_.get()",
          "old_line_content": "  DCHECK_EQ(job_->native_module_->module()->origin, kWasmOrigin);",
          "new_line_content": "  NativeModule* native_module = job_->native_module_.get();",
          "content_same": false
        },
        {
          "line": 2605,
          "old_api": "reset",
          "new_api": "get",
          "old_text": "compilation_unit_builder_.reset(\n      new CompilationUnitBuilder(job_->native_module_.get()))",
          "new_text": "compilation_unit_builder_.get()",
          "old_line_content": "  compilation_unit_builder_.reset(",
          "new_line_content": "      compilation_unit_builder_.get(), job_->enabled_features_);",
          "content_same": false
        },
        {
          "line": 2606,
          "old_api": "get",
          "new_api": "InitializeCompilationProgress",
          "old_text": "job_->native_module_.get()",
          "new_text": "compilation_state->InitializeCompilationProgress(\n      lazy_module, num_import_wrappers, num_export_wrappers)",
          "old_line_content": "      new CompilationUnitBuilder(job_->native_module_.get()));",
          "new_line_content": "  compilation_state->InitializeCompilationProgress(",
          "content_same": false
        },
        {
          "line": 2614,
          "old_api": "get",
          "new_api": "TRACE_STREAMING",
          "old_text": "compilation_unit_builder_.get()",
          "new_text": "TRACE_STREAMING(\"Process function body %d ...\\n\", num_functions_)",
          "old_line_content": "      compilation_unit_builder_.get(), job_->enabled_features_);",
          "new_line_content": "  TRACE_STREAMING(\"Process function body %d ...\\n\", num_functions_);",
          "content_same": false
        },
        {
          "line": 2623,
          "old_api": "TRACE_STREAMING",
          "new_api": "DCHECK_EQ",
          "old_text": "TRACE_STREAMING(\"Process function body %d ...\\n\", num_functions_)",
          "new_text": "DCHECK_EQ(module->origin, kWasmOrigin)",
          "old_line_content": "  TRACE_STREAMING(\"Process function body %d ...\\n\", num_functions_);",
          "new_line_content": "  DCHECK_EQ(module->origin, kWasmOrigin);",
          "content_same": false
        },
        {
          "line": 2626,
          "old_api": "length",
          "new_api": "GetCompileStrategy",
          "old_text": "bytes.length()",
          "new_text": "GetCompileStrategy(module, enabled_features, func_index, lazy_module)",
          "old_line_content": "      num_functions_, static_cast<uint32_t>(bytes.length()), offset, false);",
          "new_line_content": "      GetCompileStrategy(module, enabled_features, func_index, lazy_module);",
          "content_same": false
        },
        {
          "line": 2635,
          "old_api": "GetCompileStrategy",
          "new_api": "get",
          "old_text": "GetCompileStrategy(module, enabled_features, func_index, lazy_module)",
          "new_text": "async_counters_.get()",
          "old_line_content": "      GetCompileStrategy(module, enabled_features, func_index, lazy_module);",
          "new_line_content": "        ValidateSingleFunction(module, func_index, bytes, async_counters_.get(),",
          "content_same": false
        },
        {
          "line": 2667,
          "old_api": "AddUnits",
          "new_api": "DCHECK",
          "old_text": "compilation_unit_builder_->AddUnits(func_index)",
          "new_text": "DCHECK(compilation_unit_builder_)",
          "old_line_content": "    compilation_unit_builder_->AddUnits(func_index);",
          "new_line_content": "  DCHECK(compilation_unit_builder_);",
          "content_same": false
        },
        {
          "line": 2681,
          "old_api": "TRACE_STREAMING",
          "new_api": "failed",
          "old_text": "TRACE_STREAMING(\"FinishChunk...\\n\")",
          "new_text": "result.failed()",
          "old_line_content": "  TRACE_STREAMING(\"FinishChunk...\\n\");",
          "new_line_content": "  if (result.failed()) {",
          "content_same": false
        },
        {
          "line": 2682,
          "old_api": "CommitCompilationUnits",
          "new_api": "error",
          "old_text": "CommitCompilationUnits()",
          "new_text": "result.error()",
          "old_line_content": "  if (compilation_unit_builder_) CommitCompilationUnits();",
          "new_line_content": "    FinishAsyncCompileJobWithError(result.error());",
          "content_same": false
        },
        {
          "line": 2687,
          "old_api": "TRACE_STREAMING",
          "new_api": "ReleaseData",
          "old_text": "TRACE_STREAMING(\"Finish stream...\\n\")",
          "new_text": "bytes.ReleaseData()",
          "old_line_content": "  TRACE_STREAMING(\"Finish stream...\\n\");",
          "new_line_content": "  job_->bytes_copy_ = bytes.ReleaseData();",
          "content_same": false
        },
        {
          "line": 2690,
          "old_api": "failed",
          "new_api": "base::TimeTicks::Now()",
          "old_text": "result.failed()",
          "new_text": "base::TimeTicks::Now()",
          "old_line_content": "  if (result.failed()) {",
          "new_line_content": "  auto duration = base::TimeTicks::Now() - job_->start_time_;",
          "content_same": false
        },
        {
          "line": 2695,
          "old_api": "as_vector",
          "new_api": "InMicroseconds",
          "old_text": "bytes.as_vector()",
          "new_text": "duration.InMicroseconds()",
          "old_line_content": "  job_->wire_bytes_ = ModuleWireBytes(bytes.as_vector());",
          "new_line_content": "  job_->metrics_event_.wall_clock_duration_in_us = duration.InMicroseconds();",
          "content_same": false
        },
        {
          "line": 2696,
          "old_api": "ReleaseData",
          "new_api": "metrics_recorder",
          "old_text": "bytes.ReleaseData()",
          "new_text": "job_->isolate_->metrics_recorder()->DelayMainThreadEvent(job_->metrics_event_,\n                                                           job_->context_id_)",
          "old_line_content": "  job_->bytes_copy_ = bytes.ReleaseData();",
          "new_line_content": "  job_->isolate_->metrics_recorder()->DelayMainThreadEvent(job_->metrics_event_,",
          "content_same": false
        },
        {
          "line": 2704,
          "old_api": "InMicroseconds",
          "new_api": "value",
          "old_text": "duration.InMicroseconds()",
          "new_text": "result.value().get()",
          "old_line_content": "  job_->metrics_event_.wall_clock_duration_in_us = duration.InMicroseconds();",
          "new_line_content": "            result.value().get(), FLAG_liftoff);",
          "content_same": false
        },
        {
          "line": 2705,
          "old_api": "metrics_recorder",
          "new_api": "value",
          "old_text": "job_->isolate_->metrics_recorder()->DelayMainThreadEvent(job_->metrics_event_,\n                                                           job_->context_id_)",
          "new_text": "job_->DoSync<AsyncCompileJob::PrepareAndStartCompile>(\n        std::move(result).value(), true, code_size_estimate)",
          "old_line_content": "  job_->isolate_->metrics_recorder()->DelayMainThreadEvent(job_->metrics_event_,",
          "new_line_content": "    job_->DoSync<AsyncCompileJob::PrepareAndStartCompile>(",
          "content_same": false
        },
        {
          "line": 2727,
          "old_api": "counters",
          "new_api": "constexpr",
          "old_text": "job_->isolate_->counters()->wasm_wasm_module_size_bytes()",
          "new_text": "constexpr",
          "old_line_content": "  auto* histogram = job_->isolate_->counters()->wasm_wasm_module_size_bytes();",
          "new_line_content": "    constexpr size_t kCodeSizeEstimate = 0;",
          "content_same": false
        },
        {
          "line": 2728,
          "old_api": "module_bytes",
          "new_api": "value",
          "old_text": "job_->wire_bytes_.module_bytes().length()",
          "new_text": "std::move(result).value()",
          "old_line_content": "  histogram->AddSample(job_->wire_bytes_.module_bytes().length());",
          "new_line_content": "    cache_hit = job_->GetOrCreateNativeModule(std::move(result).value(),",
          "content_same": false
        },
        {
          "line": 2737,
          "old_api": "value",
          "new_api": "compilation_state",
          "old_text": "std::move(result).value()",
          "new_text": "job_->native_module_->compilation_state()->failed()",
          "old_line_content": "    cache_hit = job_->GetOrCreateNativeModule(std::move(result).value(),",
          "new_line_content": "    const bool failed = job_->native_module_->compilation_state()->failed();",
          "content_same": false
        },
        {
          "line": 2743,
          "old_api": "DecrementAndCheckFinisherCount",
          "new_api": "AsyncCompileFailed",
          "old_text": "job_->DecrementAndCheckFinisherCount()",
          "new_text": "job_->AsyncCompileFailed()",
          "old_line_content": "  const bool needs_finish = job_->DecrementAndCheckFinisherCount();",
          "new_line_content": "      job_->AsyncCompileFailed();",
          "content_same": false
        },
        {
          "line": 2752,
          "old_api": "AsyncCompileFailed",
          "new_api": "TRACE_STREAMING",
          "old_text": "job_->AsyncCompileFailed()",
          "new_text": "TRACE_STREAMING(\"Stream error...\\n\")",
          "old_line_content": "      job_->AsyncCompileFailed();",
          "new_line_content": "  TRACE_STREAMING(\"Stream error...\\n\");",
          "content_same": false
        },
        {
          "line": 2772,
          "old_api": "TRACE_EVENT0",
          "new_api": "is_null",
          "old_text": "TRACE_EVENT0(\"v8.wasm\", \"wasm.Deserialize\")",
          "new_text": "result.is_null()",
          "old_line_content": "  TRACE_EVENT0(\"v8.wasm\", \"wasm.Deserialize\");",
          "new_line_content": "  if (result.is_null()) return false;",
          "content_same": false
        },
        {
          "line": 2778,
          "old_api": "url",
          "new_api": "FinishCompile",
          "old_text": "DeserializeNativeModule(\n      job_->isolate_, module_bytes, wire_bytes, job_->stream_->url())",
          "new_text": "job_->FinishCompile(false)",
          "old_line_content": "  MaybeHandle<WasmModuleObject> result = DeserializeNativeModule(",
          "new_line_content": "  job_->FinishCompile(false);",
          "content_same": false
        },
        {
          "line": 2785,
          "old_api": "shared_native_module",
          "new_api": "get",
          "old_text": "job_->module_object_->shared_native_module()",
          "new_text": "native_module.get()",
          "old_line_content": "  job_->native_module_ = job_->module_object_->shared_native_module();",
          "new_line_content": "    : native_module_(native_module.get()),",
          "content_same": false
        },
        {
          "line": 2786,
          "old_api": "wire_bytes",
          "new_api": "std::move(native_module)",
          "old_text": "job_->native_module_->wire_bytes()",
          "new_text": "std::move(native_module)",
          "old_line_content": "  job_->wire_bytes_ = ModuleWireBytes(job_->native_module_->wire_bytes());",
          "new_line_content": "      native_module_weak_(std::move(native_module)),",
          "content_same": false
        },
        {
          "line": 2795,
          "old_api": "std::move(native_module)",
          "new_api": "DCHECK_NULL",
          "old_text": "std::move(native_module)",
          "new_text": "DCHECK_NULL(compile_job_)",
          "old_line_content": "      native_module_weak_(std::move(native_module)),",
          "new_line_content": "  DCHECK_NULL(compile_job_);",
          "content_same": false
        },
        {
          "line": 2807,
          "old_api": "std::make_unique<BackgroundCompileJob>(native_module_weak_, engine,\n                                             async_counters_)",
          "new_api": "contains",
          "old_text": "std::make_unique<BackgroundCompileJob>(native_module_weak_, engine,\n                                             async_counters_)",
          "new_text": "finished_events_.contains(\n          CompilationEvent::kFinishedBaselineCompilation)",
          "old_line_content": "      std::make_unique<BackgroundCompileJob>(native_module_weak_, engine,",
          "new_line_content": "      finished_events_.contains(",
          "content_same": false
        },
        {
          "line": 2827,
          "old_api": "clear",
          "new_api": "failed",
          "old_text": "callbacks_.clear()",
          "new_text": "failed()",
          "old_line_content": "  callbacks_.clear();",
          "new_line_content": "  DCHECK(!failed());",
          "content_same": false
        },
        {
          "line": 2842,
          "old_api": "DCHECK_EQ",
          "new_api": "constexpr",
          "old_text": "DCHECK_EQ(0, outstanding_export_wrappers_)",
          "new_text": "constexpr",
          "old_line_content": "  DCHECK_EQ(0, outstanding_export_wrappers_);",
          "new_line_content": "      constexpr uint8_t kLiftoffOnlyFunctionProgress =",
          "content_same": false
        },
        {
          "line": 2843,
          "old_api": "DCHECK_EQ",
          "new_api": "RequiredTopTierField::encode(ExecutionTier::kLiftoff)",
          "old_text": "DCHECK_EQ(0, outstanding_top_tier_functions_)",
          "new_text": "RequiredTopTierField::encode(ExecutionTier::kLiftoff)",
          "old_line_content": "  DCHECK_EQ(0, outstanding_top_tier_functions_);",
          "new_line_content": "          RequiredTopTierField::encode(ExecutionTier::kLiftoff) |",
          "content_same": false
        },
        {
          "line": 2844,
          "old_api": "reserve",
          "new_api": "RequiredBaselineTierField::encode(ExecutionTier::kLiftoff)",
          "old_text": "compilation_progress_.reserve(module->num_declared_functions)",
          "new_text": "RequiredBaselineTierField::encode(ExecutionTier::kLiftoff)",
          "old_line_content": "  compilation_progress_.reserve(module->num_declared_functions);",
          "new_line_content": "          RequiredBaselineTierField::encode(ExecutionTier::kLiftoff) |",
          "content_same": false
        },
        {
          "line": 2851,
          "old_api": "constexpr",
          "new_api": "GetRequestedExecutionTiers",
          "old_text": "constexpr",
          "new_text": "GetRequestedExecutionTiers(\n        module, compile_mode(), enabled_features, func_index)",
          "old_line_content": "      constexpr uint8_t kLiftoffOnlyFunctionProgress =",
          "new_line_content": "    ExecutionTierPair requested_tiers = GetRequestedExecutionTiers(",
          "content_same": false
        },
        {
          "line": 2852,
          "old_api": "RequiredTopTierField::encode(ExecutionTier::kLiftoff)",
          "new_api": "compile_mode",
          "old_text": "RequiredTopTierField::encode(ExecutionTier::kLiftoff)",
          "new_text": "compile_mode()",
          "old_line_content": "          RequiredTopTierField::encode(ExecutionTier::kLiftoff) |",
          "new_line_content": "        module, compile_mode(), enabled_features, func_index);",
          "content_same": false
        },
        {
          "line": 2854,
          "old_api": "ReachedTierField::encode(ExecutionTier::kNone)",
          "new_api": "GetCompileStrategy",
          "old_text": "ReachedTierField::encode(ExecutionTier::kNone)",
          "new_text": "GetCompileStrategy(module, enabled_features, func_index, lazy_module)",
          "old_line_content": "          ReachedTierField::encode(ExecutionTier::kNone);",
          "new_line_content": "        GetCompileStrategy(module, enabled_features, func_index, lazy_module);",
          "content_same": false
        },
        {
          "line": 2881,
          "old_api": "ReachedTierField::encode(ExecutionTier::kNone)",
          "new_api": "DCHECK_LE",
          "old_text": "ReachedTierField::encode(ExecutionTier::kNone)",
          "new_text": "DCHECK_LE(0, outstanding_baseline_units_)",
          "old_line_content": "    uint8_t function_progress = ReachedTierField::encode(ExecutionTier::kNone);",
          "new_line_content": "  DCHECK_LE(0, outstanding_baseline_units_);",
          "content_same": false
        },
        {
          "line": 2882,
          "old_api": "RequiredBaselineTierField::update(\n        function_progress, required_baseline_tier)",
          "new_api": "DCHECK_LE",
          "old_text": "RequiredBaselineTierField::update(\n        function_progress, required_baseline_tier)",
          "new_text": "DCHECK_LE(outstanding_baseline_units_, outstanding_top_tier_functions_)",
          "old_line_content": "    function_progress = RequiredBaselineTierField::update(",
          "new_line_content": "  DCHECK_LE(outstanding_baseline_units_, outstanding_top_tier_functions_);",
          "content_same": false
        },
        {
          "line": 2888,
          "old_api": "DCHECK_IMPLIES",
          "new_api": "TriggerCallbacks",
          "old_text": "DCHECK_IMPLIES(lazy_module, outstanding_baseline_units_ == 0)",
          "new_text": "TriggerCallbacks()",
          "old_line_content": "  DCHECK_IMPLIES(lazy_module, outstanding_baseline_units_ == 0);",
          "new_line_content": "  TriggerCallbacks();",
          "content_same": false
        },
        {
          "line": 2897,
          "old_api": "TriggerCallbacks",
          "new_api": "RequiredTopTierField::encode(ExecutionTier::kTurbofan)",
          "old_text": "TriggerCallbacks()",
          "new_text": "RequiredTopTierField::encode(ExecutionTier::kTurbofan)",
          "old_line_content": "  TriggerCallbacks();",
          "new_line_content": "      RequiredTopTierField::encode(ExecutionTier::kTurbofan) |",
          "content_same": false
        },
        {
          "line": 2901,
          "old_api": "module",
          "new_api": "Add",
          "old_text": "native_module_->module()",
          "new_text": "finished_events_.Add(CompilationEvent::kFinishedTopTierCompilation)",
          "old_line_content": "  auto* module = native_module_->module();",
          "new_line_content": "  finished_events_.Add(CompilationEvent::kFinishedTopTierCompilation);",
          "content_same": false
        },
        {
          "line": 2909,
          "old_api": "Add",
          "new_api": "failed",
          "old_text": "finished_events_.Add(CompilationEvent::kFinishedBaselineCompilation)",
          "new_text": "failed()",
          "old_line_content": "  finished_events_.Add(CompilationEvent::kFinishedBaselineCompilation);",
          "new_line_content": "  DCHECK(!failed());",
          "content_same": false
        },
        {
          "line": 2950,
          "old_api": "std::move(recompilation_finished_callback)",
          "new_api": "emplace",
          "old_text": "std::move(recompilation_finished_callback)",
          "new_text": "builder.emplace(native_module_)",
          "old_line_content": "  callbacks_.emplace_back(std::move(recompilation_finished_callback));",
          "new_line_content": "    builder.emplace(native_module_);",
          "content_same": false
        },
        {
          "line": 2959,
          "old_api": "emplace",
          "new_api": "MissingRecompilationField::update(progress, false)",
          "old_text": "builder.emplace(native_module_)",
          "new_text": "MissingRecompilationField::update(progress, false)",
          "old_line_content": "    builder.emplace(native_module_);",
          "new_line_content": "      progress = MissingRecompilationField::update(progress, false);",
          "content_same": false
        },
        {
          "line": 3011,
          "old_api": "std::move(callback)",
          "new_api": "empty",
          "old_text": "std::move(callback)",
          "new_text": "js_to_wasm_wrapper_units.empty()",
          "old_line_content": "    callbacks_.emplace_back(std::move(callback));",
          "new_line_content": "  if (!js_to_wasm_wrapper_units.empty()) {",
          "content_same": false
        },
        {
          "line": 3022,
          "old_api": "load",
          "new_api": "empty",
          "old_text": "outstanding_js_to_wasm_wrappers_.load()",
          "new_text": "top_tier_units.empty()",
          "old_line_content": "    DCHECK_EQ(0, outstanding_js_to_wasm_wrappers_.load());",
          "new_line_content": "  if (!baseline_units.empty() || !top_tier_units.empty()) {",
          "content_same": false
        },
        {
          "line": 3023,
          "old_api": "end",
          "new_api": "AddUnits",
          "old_text": "js_to_wasm_wrapper_units_.end()",
          "new_text": "compilation_unit_queues_.AddUnits(baseline_units, top_tier_units,\n                                      native_module_->module())",
          "old_line_content": "    js_to_wasm_wrapper_units_.insert(js_to_wasm_wrapper_units_.end(),",
          "new_line_content": "    compilation_unit_queues_.AddUnits(baseline_units, top_tier_units,",
          "content_same": false
        },
        {
          "line": 3024,
          "old_api": "begin",
          "new_api": "module",
          "old_text": "js_to_wasm_wrapper_units.begin()",
          "new_text": "native_module_->module()",
          "old_line_content": "                                     js_to_wasm_wrapper_units.begin(),",
          "new_line_content": "                                      native_module_->module());",
          "content_same": false
        },
        {
          "line": 3035,
          "old_api": "NotifyConcurrencyIncrease",
          "new_api": "AddTopTierPriorityUnit",
          "old_text": "compile_job_->NotifyConcurrencyIncrease()",
          "new_text": "compilation_unit_queues_.AddTopTierPriorityUnit(unit, priority)",
          "old_line_content": "  compile_job_->NotifyConcurrencyIncrease();",
          "new_line_content": "  compilation_unit_queues_.AddTopTierPriorityUnit(unit, priority);",
          "content_same": false
        },
        {
          "line": 3068,
          "old_api": "MaxNumExportWrappers",
          "new_api": "isolate",
          "old_text": "MaxNumExportWrappers(module)",
          "new_text": "unit->isolate()",
          "old_line_content": "      MaxNumExportWrappers(module), AllocationType::kOld);",
          "new_line_content": "    DCHECK_EQ(isolate, unit->isolate());",
          "content_same": false
        },
        {
          "line": 3072,
          "old_api": "TRACE_DISABLED_BY_DEFAULT",
          "new_api": "set",
          "old_text": "TRACE_DISABLED_BY_DEFAULT(\"v8.wasm.detailed\")",
          "new_text": "*export_wrappers_out)->set(wrapper_index, *code)",
          "old_line_content": "  TRACE_EVENT1(TRACE_DISABLED_BY_DEFAULT(\"v8.wasm.detailed\"),",
          "new_line_content": "    (*export_wrappers_out)->set(wrapper_index, *code);",
          "content_same": false
        },
        {
          "line": 3119,
          "old_api": "module",
          "new_api": "index",
          "old_text": "native_module_->module()",
          "new_text": "code->index()",
          "old_line_content": "            native_module_->module()->num_declared_functions);",
          "new_line_content": "    if (code->index() <",
          "content_same": false
        },
        {
          "line": 3126,
          "old_api": "num_functions",
          "new_api": "tier",
          "old_text": "native_module_->num_functions()",
          "new_text": "code->tier()",
          "old_line_content": "    DCHECK_LT(code->index(), native_module_->num_functions());",
          "new_line_content": "      DCHECK_NE(code->tier(), ExecutionTier::kNone);",
          "content_same": false
        },
        {
          "line": 3148,
          "old_api": "ReachedTierField::decode(function_progress)",
          "new_api": "tier",
          "old_text": "ReachedTierField::decode(function_progress)",
          "new_text": "code->tier()",
          "old_line_content": "      ExecutionTier reached_tier = ReachedTierField::decode(function_progress);",
          "new_line_content": "          required_top_tier <= code->tier()) {",
          "content_same": false
        },
        {
          "line": 3153,
          "old_api": "DCHECK_GT",
          "new_api": "MissingRecompilationField::decode(function_progress)",
          "old_text": "DCHECK_GT(outstanding_baseline_units_, 0)",
          "new_text": "MissingRecompilationField::decode(function_progress)",
          "old_line_content": "        DCHECK_GT(outstanding_baseline_units_, 0);",
          "new_line_content": "      if (V8_UNLIKELY(MissingRecompilationField::decode(function_progress))) {",
          "content_same": false
        },
        {
          "line": 3173,
          "old_api": "MissingRecompilationField::update(\n              compilation_progress_[slot_index], false)",
          "new_api": "tier",
          "old_text": "MissingRecompilationField::update(\n              compilation_progress_[slot_index], false)",
          "new_text": "code->tier()",
          "old_line_content": "          compilation_progress_[slot_index] = MissingRecompilationField::update(",
          "new_line_content": "      if (code->tier() > reached_tier) {",
          "content_same": false
        },
        {
          "line": 3206,
          "old_api": "Add",
          "new_api": "load",
          "old_text": "triggered_events.Add(CompilationEvent::kFinishedExportWrappers)",
          "new_text": "compile_failed_.load(std::memory_order_relaxed)",
          "old_line_content": "    triggered_events.Add(CompilationEvent::kFinishedExportWrappers);",
          "new_line_content": "  if (compile_failed_.load(std::memory_order_relaxed)) {",
          "content_same": false
        },
        {
          "line": 3221,
          "old_api": "empty",
          "new_api": "std::make_pair(CompilationEvent::kFailedCompilation,\n                       \"wasm.CompilationFailed\")",
          "old_text": "triggered_events.empty()",
          "new_text": "std::make_pair(CompilationEvent::kFailedCompilation,\n                       \"wasm.CompilationFailed\")",
          "old_line_content": "  if (triggered_events.empty()) return;",
          "new_line_content": "       {std::make_pair(CompilationEvent::kFailedCompilation,",
          "content_same": false
        },
        {
          "line": 3232,
          "old_api": "std::make_pair(CompilationEvent::kFinishedExportWrappers,\n                       \"wasm.ExportWrappersFinished\")",
          "new_api": "DCHECK_NE",
          "old_text": "std::make_pair(CompilationEvent::kFinishedExportWrappers,\n                       \"wasm.ExportWrappersFinished\")",
          "new_text": "DCHECK_NE(compilation_id_, kInvalidCompilationID)",
          "old_line_content": "        std::make_pair(CompilationEvent::kFinishedExportWrappers,",
          "new_line_content": "    DCHECK_NE(compilation_id_, kInvalidCompilationID);",
          "content_same": false
        },
        {
          "line": 3266,
          "old_api": "UpdateFeatureUseCounts",
          "new_api": "import_wrapper_cache",
          "old_text": "UpdateFeatureUseCounts(isolate, detected_features_)",
          "new_text": "native_module_->import_wrapper_cache()",
          "old_line_content": "  UpdateFeatureUseCounts(isolate, detected_features_);",
          "new_line_content": "  WasmImportWrapperCache* cache = native_module_->import_wrapper_cache();",
          "content_same": false
        },
        {
          "line": 3282,
          "old_api": "module",
          "new_api": "IncRef",
          "old_text": "native_module_->module()",
          "new_text": "code->IncRef()",
          "old_line_content": "          native_module_->module()->functions[func_index].sig;",
          "new_line_content": "      code->IncRef();",
          "content_same": false
        },
        {
          "line": 3285,
          "old_api": "parameter_count",
          "new_api": "VectorOf",
          "old_text": "sig->parameter_count()",
          "new_text": "VectorOf(unpublished_code)",
          "old_line_content": "          static_cast<int>(sig->parameter_count()));",
          "new_line_content": "  PublishCode(VectorOf(unpublished_code));",
          "content_same": false
        },
        {
          "line": 3291,
          "old_api": "IncRef",
          "new_api": "std::move(code)",
          "old_text": "code->IncRef()",
          "new_text": "std::move(code)",
          "old_line_content": "      code->IncRef();",
          "new_line_content": "      native_module_->PublishCode(std::move(code));",
          "content_same": false
        },
        {
          "line": 3306,
          "old_api": "std::move(published_code)",
          "new_api": "size",
          "old_text": "std::move(published_code)",
          "new_text": "unpublished_code.size()",
          "old_line_content": "  OnFinishedUnits(VectorOf(std::move(published_code)));",
          "new_line_content": "      publish_queue_.reserve(publish_queue_.size() + unpublished_code.size());",
          "content_same": false
        },
        {
          "line": 3315,
          "old_api": "size",
          "new_api": "std::move(unpublished_code)",
          "old_text": "unpublished_code.size()",
          "new_text": "std::move(unpublished_code)",
          "old_line_content": "      publish_queue_.reserve(publish_queue_.size() + unpublished_code.size());",
          "new_line_content": "    PublishCompilationResults(std::move(unpublished_code));",
          "content_same": false
        },
        {
          "line": 3325,
          "old_api": "clear",
          "new_api": "swap",
          "old_text": "unpublished_code.clear()",
          "new_text": "unpublished_code.swap(publish_queue_)",
          "old_line_content": "    unpublished_code.clear();",
          "new_line_content": "    unpublished_code.swap(publish_queue_);",
          "content_same": false
        },
        {
          "line": 3358,
          "old_api": "std::make_shared<base::Semaphore>(0)",
          "new_api": "store",
          "old_text": "std::make_shared<base::Semaphore>(0)",
          "new_text": "done->store(true, std::memory_order_relaxed)",
          "old_line_content": "  auto semaphore = std::make_shared<base::Semaphore>(0);",
          "new_line_content": "      done->store(true, std::memory_order_relaxed);",
          "content_same": false
        },
        {
          "line": 3359,
          "old_api": "std::make_shared<std::atomic<bool>>(false)",
          "new_api": "Signal",
          "old_text": "std::make_shared<std::atomic<bool>>(false)",
          "new_text": "semaphore->Signal()",
          "old_line_content": "  auto done = std::make_shared<std::atomic<bool>>(false);",
          "new_line_content": "      semaphore->Signal();",
          "content_same": false
        },
        {
          "line": 3365,
          "old_api": "emplace_back",
          "new_api": "explicit",
          "old_text": "callbacks_.emplace_back([semaphore, events, done](CompilationEvent event) {\n      if (!events.contains(event)) return;\n      done->store(true, std::memory_order_relaxed);\n      semaphore->Signal();\n    })",
          "new_text": "explicit",
          "old_line_content": "    callbacks_.emplace_back([semaphore, events, done](CompilationEvent event) {",
          "new_line_content": "    explicit WaitForEventDelegate(std::shared_ptr<std::atomic<bool>> done)",
          "content_same": false
        },
        {
          "line": 3366,
          "old_api": "contains",
          "new_api": "std::move(done)",
          "old_text": "events.contains(event)",
          "new_text": "std::move(done)",
          "old_line_content": "      if (!events.contains(event)) return;",
          "new_line_content": "        : done_(std::move(done)) {}",
          "content_same": false
        },
        {
          "line": 3374,
          "old_api": "explicit",
          "new_api": "UNIMPLEMENTED",
          "old_text": "explicit",
          "new_text": "UNIMPLEMENTED()",
          "old_line_content": "    explicit WaitForEventDelegate(std::shared_ptr<std::atomic<bool>> done)",
          "new_line_content": "    void NotifyConcurrencyIncrease() override { UNIMPLEMENTED(); }",
          "content_same": false
        },
        {
          "line": 3421,
          "old_api": "pop",
          "new_api": "DCHECK_GE",
          "old_text": "queue_->pop()",
          "new_text": "DCHECK_GE(FLAG_wasm_num_compilation_tasks, 1)",
          "old_line_content": "    while (base::Optional<JSToWasmWrapperKey> key = queue_->pop()) {",
          "new_line_content": "    DCHECK_GE(FLAG_wasm_num_compilation_tasks, 1);",
          "content_same": false
        },
        {
          "line": 3425,
          "old_api": "ShouldYield",
          "new_api": "static_cast<size_t>(FLAG_wasm_num_compilation_tasks)",
          "old_text": "delegate->ShouldYield()",
          "new_text": "static_cast<size_t>(FLAG_wasm_num_compilation_tasks)",
          "old_line_content": "      if (delegate && delegate->ShouldYield()) return;",
          "new_line_content": "    return std::min(static_cast<size_t>(FLAG_wasm_num_compilation_tasks),",
          "content_same": false
        },
        {
          "line": 3452,
          "old_api": "WasmFeatures::FromIsolate(isolate)",
          "new_api": "wasm_engine",
          "old_text": "WasmFeatures::FromIsolate(isolate)",
          "new_text": "isolate->wasm_engine()",
          "old_line_content": "  WasmFeatures enabled_features = WasmFeatures::FromIsolate(isolate);",
          "new_line_content": "          isolate, isolate->wasm_engine(), function.sig, module,",
          "content_same": false
        },
        {
          "line": 3460,
          "old_api": "wasm_engine",
          "new_api": "std::make_unique<CompileJSToWasmWrapperJob>(&queue, &compilation_units)",
          "old_text": "std::make_unique<JSToWasmWrapperCompilationUnit>(\n          isolate, isolate->wasm_engine(), function.sig, module,\n          function.imported, enabled_features,\n          JSToWasmWrapperCompilationUnit::kAllowGeneric)",
          "new_text": "std::make_unique<CompileJSToWasmWrapperJob>(&queue, &compilation_units)",
          "old_line_content": "      auto unit = std::make_unique<JSToWasmWrapperCompilationUnit>(",
          "new_line_content": "      std::make_unique<CompileJSToWasmWrapperJob>(&queue, &compilation_units);",
          "content_same": false
        },
        {
          "line": 3475,
          "old_api": "Join",
          "new_api": "heap",
          "old_text": "job_handle->Join()",
          "new_text": "isolate->heap()",
          "old_line_content": "    job_handle->Join();",
          "new_line_content": "  CodeSpaceMemoryModificationScope modification_scope(isolate->heap());",
          "content_same": false
        },
        {
          "line": 3506,
          "old_api": "module",
          "new_api": "as_vector",
          "old_text": "native_module->module()",
          "new_text": "result.protected_instructions_data.as_vector()",
          "old_line_content": "  bool source_positions = is_asmjs_module(native_module->module());",
          "new_line_content": "      result.protected_instructions_data.as_vector(),",
          "content_same": false
        },
        {
          "line": 3509,
          "old_api": "CreateCompilationEnv",
          "new_api": "std::move(wasm_code)",
          "old_text": "native_module->CreateCompilationEnv()",
          "new_text": "std::move(wasm_code)",
          "old_line_content": "  CompilationEnv env = native_module->CreateCompilationEnv();",
          "new_line_content": "  WasmCode* published_code = native_module->PublishCode(std::move(wasm_code));",
          "content_same": false
        },
        {
          "line": 3512,
          "old_api": "as_vector",
          "new_api": "length",
          "old_text": "native_module->AddCode(\n      result.func_index, result.code_desc, result.frame_slot_count,\n      result.tagged_parameter_slots,\n      result.protected_instructions_data.as_vector(),\n      result.source_positions.as_vector(), GetCodeKind(result),\n      ExecutionTier::kNone, kNoDebugging)",
          "new_text": "counters->wasm_generated_code_size()->Increment(\n      published_code->instructions().length())",
          "old_line_content": "  std::unique_ptr<WasmCode> wasm_code = native_module->AddCode(",
          "new_line_content": "  counters->wasm_generated_code_size()->Increment(",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 2055,
          "old_api": null,
          "new_api": "DCHECK_EQ",
          "old_text": null,
          "new_text": "DCHECK_EQ(CompilationEvent::kFinishedBaselineCompilation, last_event_)",
          "old_line_content": "          bool cache_hit =",
          "new_line_content": "        DCHECK_EQ(CompilationEvent::kFinishedBaselineCompilation, last_event_);",
          "content_same": false
        },
        {
          "line": 2060,
          "old_api": null,
          "new_api": "has_value",
          "old_text": null,
          "new_text": "last_event_.has_value()",
          "old_line_content": "                                                  : nullptr);",
          "new_line_content": "        DCHECK(!last_event_.has_value() ||",
          "content_same": false
        },
        {
          "line": 2062,
          "old_api": null,
          "new_api": "DecrementAndCheckFinisherCount",
          "old_text": null,
          "new_text": "job_->DecrementAndCheckFinisherCount()",
          "old_line_content": "        break;",
          "new_line_content": "        if (job_->DecrementAndCheckFinisherCount()) {",
          "content_same": false
        },
        {
          "line": 2066,
          "old_api": null,
          "new_api": "wasm_engine",
          "old_text": null,
          "new_text": "job_->isolate_->wasm_engine()->UpdateNativeModuleCache(\n              true, &native_module, job_->isolate_)",
          "old_line_content": "        // here.",
          "new_line_content": "          job_->isolate_->wasm_engine()->UpdateNativeModuleCache(",
          "content_same": false
        },
        {
          "line": 2068,
          "old_api": null,
          "new_api": "job_->DoSync<CompileFailed>()",
          "old_text": null,
          "new_text": "job_->DoSync<CompileFailed>()",
          "old_line_content": "      case CompilationEvent::kFailedCompilation:",
          "new_line_content": "          job_->DoSync<CompileFailed>();",
          "content_same": false
        },
        {
          "line": 2101,
          "old_api": null,
          "new_api": "RunInForeground",
          "old_text": null,
          "new_text": "RunInForeground(job)",
          "old_line_content": "// task) and schedule the next step(s), if any.",
          "new_line_content": "      RunInForeground(job);",
          "content_same": false
        },
        {
          "line": 2103,
          "old_api": null,
          "new_api": "RunInBackground",
          "old_text": null,
          "new_text": "RunInBackground(job)",
          "old_line_content": " public:",
          "new_line_content": "      RunInBackground(job);",
          "content_same": false
        },
        {
          "line": 2107,
          "old_api": null,
          "new_api": "UNREACHABLE",
          "old_text": null,
          "new_text": "UNREACHABLE()",
          "old_line_content": "    if (on_foreground) {",
          "new_line_content": "  virtual void RunInForeground(AsyncCompileJob*) { UNREACHABLE(); }",
          "content_same": false
        },
        {
          "line": 2108,
          "old_api": null,
          "new_api": "UNREACHABLE",
          "old_text": null,
          "new_text": "UNREACHABLE()",
          "old_line_content": "      HandleScope scope(job->isolate_);",
          "new_line_content": "  virtual void RunInBackground(AsyncCompileJob*) { UNREACHABLE(); }",
          "content_same": false
        },
        {
          "line": 2118,
          "old_api": null,
          "new_api": "cancelable_task_manager",
          "old_text": null,
          "new_text": "job->isolate_->cancelable_task_manager()",
          "old_line_content": "};",
          "new_line_content": "      : CancelableTask(on_foreground ? job->isolate_->cancelable_task_manager()",
          "content_same": false
        },
        {
          "line": 2124,
          "old_api": null,
          "new_api": "ResetPendingForegroundTask",
          "old_text": null,
          "new_text": "ResetPendingForegroundTask()",
          "old_line_content": "      // the {AsyncCompileJob}. Foreground tasks are managed by the system's",
          "new_line_content": "    if (job_ != nullptr && on_foreground_) ResetPendingForegroundTask();",
          "content_same": false
        },
        {
          "line": 2129,
          "old_api": null,
          "new_api": "ResetPendingForegroundTask",
          "old_text": null,
          "new_text": "ResetPendingForegroundTask()",
          "old_line_content": "        job_(job),",
          "new_line_content": "    if (on_foreground_) ResetPendingForegroundTask();",
          "content_same": false
        },
        {
          "line": 2130,
          "old_api": null,
          "new_api": "Run",
          "old_text": null,
          "new_text": "job_->step_->Run(job_, on_foreground_)",
          "old_line_content": "        on_foreground_(on_foreground) {}",
          "new_line_content": "    job_->step_->Run(job_, on_foreground_);",
          "content_same": false
        },
        {
          "line": 2137,
          "old_api": null,
          "new_api": "DCHECK_NOT_NULL",
          "old_text": null,
          "new_text": "DCHECK_NOT_NULL(job_)",
          "old_line_content": "    if (!job_) return;",
          "new_line_content": "    DCHECK_NOT_NULL(job_);",
          "content_same": false
        },
        {
          "line": 2147,
          "old_api": null,
          "new_api": "DCHECK_EQ",
          "old_text": null,
          "new_text": "DCHECK_EQ(this, job_->pending_foreground_task_)",
          "old_line_content": "    job_ = nullptr;",
          "new_line_content": "    DCHECK_EQ(this, job_->pending_foreground_task_);",
          "content_same": false
        },
        {
          "line": 2153,
          "old_api": null,
          "new_api": "DCHECK_NULL",
          "old_text": null,
          "new_text": "DCHECK_NULL(pending_foreground_task_)",
          "old_line_content": "  bool on_foreground_;",
          "new_line_content": "  DCHECK_NULL(pending_foreground_task_);",
          "content_same": false
        },
        {
          "line": 2155,
          "old_api": null,
          "new_api": "std::make_unique<CompileTask>(this, true)",
          "old_text": null,
          "new_text": "std::make_unique<CompileTask>(this, true)",
          "old_line_content": "  void ResetPendingForegroundTask() const {",
          "new_line_content": "  auto new_task = std::make_unique<CompileTask>(this, true);",
          "content_same": false
        },
        {
          "line": 2157,
          "old_api": null,
          "new_api": "std::move(new_task)",
          "old_text": null,
          "new_text": "std::move(new_task)",
          "old_line_content": "    job_->pending_foreground_task_ = nullptr;",
          "new_line_content": "  foreground_task_runner_->PostTask(std::move(new_task));",
          "content_same": false
        },
        {
          "line": 2161,
          "old_api": null,
          "new_api": "DCHECK_NULL",
          "old_text": null,
          "new_text": "DCHECK_NULL(pending_foreground_task_)",
          "old_line_content": "void AsyncCompileJob::StartForegroundTask() {",
          "new_line_content": "  DCHECK_NULL(pending_foreground_task_);",
          "content_same": false
        },
        {
          "line": 2163,
          "old_api": null,
          "new_api": "std::make_unique<CompileTask>(this, true)",
          "old_text": null,
          "new_text": "std::make_unique<CompileTask>(this, true)",
          "old_line_content": "",
          "new_line_content": "  auto new_task = std::make_unique<CompileTask>(this, true);",
          "content_same": false
        },
        {
          "line": 2175,
          "old_api": null,
          "new_api": "std::make_unique<CompileTask>(this, false)",
          "old_text": null,
          "new_text": "std::make_unique<CompileTask>(this, false)",
          "old_line_content": "}",
          "new_line_content": "  auto task = std::make_unique<CompileTask>(this, false);",
          "content_same": false
        },
        {
          "line": 2180,
          "old_api": null,
          "new_api": "std::move(task)",
          "old_text": null,
          "new_text": "std::move(task)",
          "old_line_content": "  pending_foreground_task_ = nullptr;",
          "new_line_content": "    V8::GetCurrentPlatform()->CallOnWorkerThread(std::move(task));",
          "content_same": false
        },
        {
          "line": 2182,
          "old_api": null,
          "new_api": "std::move(task)",
          "old_text": null,
          "new_text": "std::move(task)",
          "old_line_content": "",
          "new_line_content": "    foreground_task_runner_->PostTask(std::move(task));",
          "content_same": false
        },
        {
          "line": 2190,
          "old_api": null,
          "new_api": "std::forward<Args>(args)",
          "old_text": null,
          "new_text": "std::forward<Args>(args)",
          "old_line_content": "  } else {",
          "new_line_content": "  NextStep<Step>(std::forward<Args>(args)...);",
          "content_same": false
        },
        {
          "line": 2192,
          "old_api": null,
          "new_api": "StartForegroundTask",
          "old_text": null,
          "new_text": "StartForegroundTask()",
          "old_line_content": "  }",
          "new_line_content": "  StartForegroundTask();",
          "content_same": false
        },
        {
          "line": 2197,
          "old_api": null,
          "new_api": "std::forward<Args>(args)",
          "old_text": null,
          "new_text": "std::forward<Args>(args)",
          "old_line_content": "          typename... Args>",
          "new_line_content": "  NextStep<Step>(std::forward<Args>(args)...);",
          "content_same": false
        },
        {
          "line": 2198,
          "old_api": null,
          "new_api": "ExecuteForegroundTaskImmediately",
          "old_text": null,
          "new_text": "ExecuteForegroundTaskImmediately()",
          "old_line_content": "void AsyncCompileJob::DoSync(Args&&... args) {",
          "new_line_content": "  ExecuteForegroundTaskImmediately();",
          "content_same": false
        },
        {
          "line": 2203,
          "old_api": null,
          "new_api": "std::forward<Args>(args)",
          "old_text": null,
          "new_text": "std::forward<Args>(args)",
          "old_line_content": "",
          "new_line_content": "  NextStep<Step>(std::forward<Args>(args)...);",
          "content_same": false
        },
        {
          "line": 2204,
          "old_api": null,
          "new_api": "StartBackgroundTask",
          "old_text": null,
          "new_text": "StartBackgroundTask()",
          "old_line_content": "template <typename Step, typename... Args>",
          "new_line_content": "  StartBackgroundTask();",
          "content_same": false
        },
        {
          "line": 2209,
          "old_api": null,
          "new_api": "std::forward<Args>(args)",
          "old_text": null,
          "new_text": "std::forward<Args>(args)",
          "old_line_content": "",
          "new_line_content": "  step_.reset(new Step(std::forward<Args>(args)...));",
          "content_same": false
        },
        {
          "line": 2217,
          "old_api": null,
          "new_api": "explicit",
          "old_text": null,
          "new_text": "explicit",
          "old_line_content": "void AsyncCompileJob::NextStep(Args&&... args) {",
          "new_line_content": "  explicit DecodeModule(Counters* counters,",
          "content_same": false
        },
        {
          "line": 2219,
          "old_api": null,
          "new_api": "std::move(metrics_recorder)",
          "old_text": null,
          "new_text": "std::move(metrics_recorder)",
          "old_line_content": "}",
          "new_line_content": "      : counters_(counters), metrics_recorder_(std::move(metrics_recorder)) {}",
          "content_same": false
        },
        {
          "line": 2227,
          "old_api": null,
          "new_api": "TRACE_COMPILE",
          "old_text": null,
          "new_text": "TRACE_COMPILE(\"(1) Decoding module...\\n\")",
          "old_line_content": "                        std::shared_ptr<metrics::Recorder> metrics_recorder)",
          "new_line_content": "      TRACE_COMPILE(\"(1) Decoding module...\\n\");",
          "content_same": false
        },
        {
          "line": 2231,
          "old_api": null,
          "new_api": "start",
          "old_text": null,
          "new_text": "DecodeWasmModule(\n          enabled_features, job->wire_bytes_.start(), job->wire_bytes_.end(),\n          false, kWasmOrigin, counters_, metrics_recorder_, job->context_id(),\n          DecodingMethod::kAsync, job->isolate()->wasm_engine()->allocator())",
          "old_line_content": "    ModuleResult result;",
          "new_line_content": "      result = DecodeWasmModule(",
          "content_same": false
        },
        {
          "line": 2232,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "job->wire_bytes_.end()",
          "old_line_content": "    {",
          "new_line_content": "          enabled_features, job->wire_bytes_.start(), job->wire_bytes_.end(),",
          "content_same": false
        },
        {
          "line": 2233,
          "old_api": null,
          "new_api": "context_id",
          "old_text": null,
          "new_text": "job->context_id()",
          "old_line_content": "      DisallowHandleAllocation no_handle;",
          "new_line_content": "          false, kWasmOrigin, counters_, metrics_recorder_, job->context_id(),",
          "content_same": false
        },
        {
          "line": 2234,
          "old_api": null,
          "new_api": "isolate",
          "old_text": null,
          "new_text": "job->isolate()->wasm_engine()->allocator()",
          "old_line_content": "      DisallowGarbageCollection no_gc;",
          "new_line_content": "          DecodingMethod::kAsync, job->isolate()->wasm_engine()->allocator());",
          "content_same": false
        },
        {
          "line": 2238,
          "old_api": null,
          "new_api": "value",
          "old_text": null,
          "new_text": "result.value().get()",
          "old_line_content": "                   \"wasm.DecodeModule\");",
          "new_line_content": "        const WasmModule* module = result.value().get();",
          "content_same": false
        },
        {
          "line": 2239,
          "old_api": null,
          "new_api": "DCHECK_EQ",
          "old_text": null,
          "new_text": "DCHECK_EQ(module->origin, kWasmOrigin)",
          "old_line_content": "      auto enabled_features = job->enabled_features_;",
          "new_line_content": "        DCHECK_EQ(module->origin, kWasmOrigin);",
          "content_same": false
        },
        {
          "line": 2249,
          "old_api": null,
          "new_api": "GetFunctionBytes",
          "old_text": null,
          "new_text": "job->wire_bytes_.GetFunctionBytes(func)",
          "old_line_content": "        const bool lazy_module = job->wasm_lazy_compilation_;",
          "new_line_content": "                job->wire_bytes_.GetFunctionBytes(func);",
          "content_same": false
        },
        {
          "line": 2261,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "function_result.error()",
          "old_line_content": "                module, enabled_features, func_index, lazy_module);",
          "new_line_content": "                result = ModuleResult(function_result.error());",
          "content_same": false
        },
        {
          "line": 2271,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "std::move(result).error()",
          "old_line_content": "                break;",
          "new_line_content": "      job->DoSync<DecodeFail>(std::move(result).error());",
          "content_same": false
        },
        {
          "line": 2274,
          "old_api": null,
          "new_api": "value",
          "old_text": null,
          "new_text": "std::move(result).value()",
          "old_line_content": "          }",
          "new_line_content": "      std::shared_ptr<WasmModule> module = std::move(result).value();",
          "content_same": false
        },
        {
          "line": 2277,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "module.get()",
          "old_line_content": "    }",
          "new_line_content": "          wasm::WasmCodeManager::EstimateNativeModuleCodeSize(module.get(),",
          "content_same": false
        },
        {
          "line": 2279,
          "old_api": null,
          "new_api": "std::move(module)",
          "old_text": null,
          "new_text": "std::move(module)",
          "old_line_content": "      // Decoding failure; reject the promise and clean up.",
          "new_line_content": "      job->DoSync<PrepareAndStartCompile>(std::move(module), true,",
          "content_same": false
        },
        {
          "line": 2294,
          "old_api": null,
          "new_api": "std::move(error)",
          "old_text": null,
          "new_text": "std::move(error)",
          "old_line_content": "  Counters* const counters_;",
          "new_line_content": "  explicit DecodeFail(WasmError error) : error_(std::move(error)) {}",
          "content_same": false
        },
        {
          "line": 2300,
          "old_api": null,
          "new_api": "TRACE_COMPILE",
          "old_text": null,
          "new_text": "TRACE_COMPILE(\"(1b) Decoding failed.\\n\")",
          "old_line_content": "//==========================================================================",
          "new_line_content": "    TRACE_COMPILE(\"(1b) Decoding failed.\\n\");",
          "content_same": false
        },
        {
          "line": 2302,
          "old_api": null,
          "new_api": "DecodeFailed",
          "old_text": null,
          "new_text": "job->DecodeFailed(error_)",
          "old_line_content": " public:",
          "new_line_content": "    return job->DecodeFailed(error_);",
          "content_same": false
        },
        {
          "line": 2313,
          "old_api": null,
          "new_api": "std::move(module)",
          "old_text": null,
          "new_text": "std::move(module)",
          "old_line_content": "};",
          "new_line_content": "      : module_(std::move(module)),",
          "content_same": false
        },
        {
          "line": 2323,
          "old_api": null,
          "new_api": "TRACE_COMPILE",
          "old_text": null,
          "new_text": "TRACE_COMPILE(\"(2) Prepare and start compile...\\n\")",
          "old_line_content": "        start_compilation_(start_compilation),",
          "new_line_content": "    TRACE_COMPILE(\"(2) Prepare and start compile...\\n\");",
          "content_same": false
        },
        {
          "line": 2325,
          "old_api": null,
          "new_api": "length",
          "old_text": null,
          "new_text": "job->wire_bytes_.length()",
          "old_line_content": "",
          "new_line_content": "    const bool streaming = job->wire_bytes_.length() == 0;",
          "content_same": false
        },
        {
          "line": 2328,
          "old_api": null,
          "new_api": "CreateNativeModule",
          "old_text": null,
          "new_text": "job->CreateNativeModule(module_, code_size_estimate_)",
          "old_line_content": "  const bool start_compilation_;",
          "new_line_content": "      job->CreateNativeModule(module_, code_size_estimate_);",
          "content_same": false
        },
        {
          "line": 2329,
          "old_api": null,
          "new_api": "std::move(module_)",
          "old_text": null,
          "new_text": "std::move(module_)",
          "old_line_content": "  const size_t code_size_estimate_;",
          "new_line_content": "    } else if (job->GetOrCreateNativeModule(std::move(module_),",
          "content_same": false
        },
        {
          "line": 2331,
          "old_api": null,
          "new_api": "FinishCompile",
          "old_text": null,
          "new_text": "job->FinishCompile(true)",
          "old_line_content": "  void RunInForeground(AsyncCompileJob* job) override {",
          "new_line_content": "      job->FinishCompile(true);",
          "content_same": false
        },
        {
          "line": 2341,
          "old_api": null,
          "new_api": "AddCallback",
          "old_text": null,
          "new_text": "compilation_state->AddCallback(CompilationStateCallback{job})",
          "old_line_content": "      return;",
          "new_line_content": "    compilation_state->AddCallback(CompilationStateCallback{job});",
          "content_same": false
        },
        {
          "line": 2342,
          "old_api": null,
          "new_api": "base::TimeTicks::IsHighResolution()",
          "old_text": null,
          "new_text": "base::TimeTicks::IsHighResolution()",
          "old_line_content": "    }",
          "new_line_content": "    if (base::TimeTicks::IsHighResolution()) {",
          "content_same": false
        },
        {
          "line": 2347,
          "old_api": null,
          "new_api": "metrics_recorder",
          "old_text": null,
          "new_text": "job->isolate_->metrics_recorder()",
          "old_line_content": "",
          "new_line_content": "          job->isolate_->async_counters(), job->isolate_->metrics_recorder(),",
          "content_same": false
        },
        {
          "line": 2358,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "job->native_module_.get()",
          "old_line_content": "    }",
          "new_line_content": "      InitializeCompilationUnits(job->isolate(), job->native_module_.get());",
          "content_same": false
        },
        {
          "line": 2363,
          "old_api": null,
          "new_api": "WaitForCompilationEvent",
          "old_text": null,
          "new_text": "compilation_state->WaitForCompilationEvent(\n            CompilationEvent::kFinishedBaselineCompilation)",
          "old_line_content": "      // InitializeCompilationUnits always returns 0 for streaming compilation,",
          "new_line_content": "        compilation_state->WaitForCompilationEvent(",
          "content_same": false
        },
        {
          "line": 2376,
          "old_api": null,
          "new_api": "TRACE_COMPILE",
          "old_text": null,
          "new_text": "TRACE_COMPILE(\"(3a) Compilation failed\\n\")",
          "old_line_content": "  }",
          "new_line_content": "    TRACE_COMPILE(\"(3a) Compilation failed\\n\");",
          "content_same": false
        },
        {
          "line": 2377,
          "old_api": null,
          "new_api": "compilation_state",
          "old_text": null,
          "new_text": "job->native_module_->compilation_state()->failed()",
          "old_line_content": "};",
          "new_line_content": "    DCHECK(job->native_module_->compilation_state()->failed());",
          "content_same": false
        },
        {
          "line": 2380,
          "old_api": null,
          "new_api": "AsyncCompileFailed",
          "old_text": null,
          "new_text": "job->AsyncCompileFailed()",
          "old_line_content": "// Step 3a (sync): Compilation failed.",
          "new_line_content": "    return job->AsyncCompileFailed();",
          "content_same": false
        },
        {
          "line": 2387,
          "old_api": null,
          "new_api": "explicit",
          "old_text": null,
          "new_text": "explicit",
          "old_line_content": "",
          "new_line_content": "  explicit SampleTopTierCodeSizeCallback(",
          "content_same": false
        },
        {
          "line": 2393,
          "old_api": null,
          "new_api": "lock",
          "old_text": null,
          "new_text": "native_module_.lock()",
          "old_line_content": "namespace {",
          "new_line_content": "    if (std::shared_ptr<NativeModule> native_module = native_module_.lock()) {",
          "content_same": false
        },
        {
          "line": 2394,
          "old_api": null,
          "new_api": "engine",
          "old_text": null,
          "new_text": "native_module->engine()->SampleTopTierCodeSizeInAllIsolates(\n          native_module)",
          "old_line_content": "class SampleTopTierCodeSizeCallback {",
          "new_line_content": "      native_module->engine()->SampleTopTierCodeSizeInAllIsolates(",
          "content_same": false
        },
        {
          "line": 2409,
          "old_api": null,
          "new_api": "explicit",
          "old_text": null,
          "new_text": "explicit",
          "old_line_content": "  std::weak_ptr<NativeModule> native_module_;",
          "new_line_content": "  explicit CompileFinished(std::shared_ptr<NativeModule> cached_native_module)",
          "content_same": false
        },
        {
          "line": 2410,
          "old_api": null,
          "new_api": "std::move(cached_native_module)",
          "old_text": null,
          "new_text": "std::move(cached_native_module)",
          "old_line_content": "};",
          "new_line_content": "      : cached_native_module_(std::move(cached_native_module)) {}",
          "content_same": false
        },
        {
          "line": 2414,
          "old_api": null,
          "new_api": "TRACE_COMPILE",
          "old_text": null,
          "new_text": "TRACE_COMPILE(\"(3b) Compilation finished\\n\")",
          "old_line_content": "// Step 3b (sync): Compilation finished.",
          "new_line_content": "    TRACE_COMPILE(\"(3b) Compilation finished\\n\");",
          "content_same": false
        },
        {
          "line": 2420,
          "old_api": null,
          "new_api": "counters",
          "old_text": null,
          "new_text": "job->isolate_->counters()",
          "old_line_content": "",
          "new_line_content": "      job->native_module_->SampleCodeSize(job->isolate_->counters(),",
          "content_same": false
        },
        {
          "line": 2424,
          "old_api": null,
          "new_api": "compilation_state",
          "old_text": null,
          "new_text": "job->native_module_->compilation_state()->AddCallback(\n          SampleTopTierCodeSizeCallback{job->native_module_})",
          "old_line_content": "    if (cached_native_module_) {",
          "new_line_content": "      job->native_module_->compilation_state()->AddCallback(",
          "content_same": false
        },
        {
          "line": 2428,
          "old_api": null,
          "new_api": "FinishCompile",
          "old_text": null,
          "new_text": "job->FinishCompile(cached_native_module_ != nullptr)",
          "old_line_content": "      // Sample the generated code size when baseline compilation finished.",
          "new_line_content": "    job->FinishCompile(cached_native_module_ != nullptr);",
          "content_same": false
        },
        {
          "line": 2435,
          "old_api": null,
          "new_api": "TRACE_COMPILE",
          "old_text": null,
          "new_text": "TRACE_COMPILE(\"(4) Finish module...\\n\")",
          "old_line_content": "    }",
          "new_line_content": "  TRACE_COMPILE(\"(4) Finish module...\\n\");",
          "content_same": false
        },
        {
          "line": 2436,
          "old_api": null,
          "new_api": "AsyncCompileSucceeded",
          "old_text": null,
          "new_text": "AsyncCompileSucceeded(module_object_)",
          "old_line_content": "    // Then finalize and publish the generated module.",
          "new_line_content": "  AsyncCompileSucceeded(module_object_);",
          "content_same": false
        },
        {
          "line": 2451,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "job_->native_module_->wire_bytes().empty()",
          "old_line_content": "    AccountingAllocator* allocator)",
          "new_line_content": "  if (job_->native_module_ && job_->native_module_->wire_bytes().empty()) {",
          "content_same": false
        },
        {
          "line": 2453,
          "old_api": null,
          "new_api": "wasm_engine",
          "old_text": null,
          "new_text": "job_->isolate_->wasm_engine()->StreamingCompilationFailed(prefix_hash_)",
          "old_line_content": "      job_(job),",
          "new_line_content": "    job_->isolate_->wasm_engine()->StreamingCompilationFailed(prefix_hash_);",
          "content_same": false
        },
        {
          "line": 2459,
          "old_api": null,
          "new_api": "has_error",
          "old_text": null,
          "new_text": "error.has_error()",
          "old_line_content": "AsyncStreamingProcessor::~AsyncStreamingProcessor() {",
          "new_line_content": "  DCHECK(error.has_error());",
          "content_same": false
        },
        {
          "line": 2465,
          "old_api": null,
          "new_api": "base::TimeTicks::Now()",
          "old_text": null,
          "new_text": "base::TimeTicks::Now()",
          "old_line_content": "",
          "new_line_content": "  auto duration = base::TimeTicks::Now() - job_->start_time_;",
          "content_same": false
        },
        {
          "line": 2470,
          "old_api": null,
          "new_api": "InMicroseconds",
          "old_text": null,
          "new_text": "duration.InMicroseconds()",
          "old_line_content": "  // of the AsyncCompileJob to DecodeFail.",
          "new_line_content": "  job_->metrics_event_.wall_clock_duration_in_us = duration.InMicroseconds();",
          "content_same": false
        },
        {
          "line": 2488,
          "old_api": null,
          "new_api": "job_->DoSync<AsyncCompileJob::DecodeFail>(error)",
          "old_text": null,
          "new_text": "job_->DoSync<AsyncCompileJob::DecodeFail>(error)",
          "old_line_content": "",
          "new_line_content": "    job_->DoSync<AsyncCompileJob::DecodeFail>(error);",
          "content_same": false
        },
        {
          "line": 2496,
          "old_api": null,
          "new_api": "StartDecoding",
          "old_text": null,
          "new_text": "decoder_.StartDecoding(\n      job_->isolate()->counters(), job_->isolate()->metrics_recorder(),\n      job_->context_id(), job_->isolate()->wasm_engine()->allocator())",
          "old_line_content": "  } else {",
          "new_line_content": "  decoder_.StartDecoding(",
          "content_same": false
        },
        {
          "line": 2498,
          "old_api": null,
          "new_api": "isolate",
          "old_text": null,
          "new_text": "job_->isolate()->wasm_engine()->allocator()",
          "old_line_content": "  }",
          "new_line_content": "      job_->context_id(), job_->isolate()->wasm_engine()->allocator());",
          "content_same": false
        },
        {
          "line": 2499,
          "old_api": null,
          "new_api": "DecodeModuleHeader",
          "old_text": null,
          "new_text": "decoder_.DecodeModuleHeader(bytes, offset)",
          "old_line_content": "}",
          "new_line_content": "  decoder_.DecodeModuleHeader(bytes, offset);",
          "content_same": false
        },
        {
          "line": 2500,
          "old_api": null,
          "new_api": "ok",
          "old_text": null,
          "new_text": "decoder_.ok()",
          "old_line_content": "",
          "new_line_content": "  if (!decoder_.ok()) {",
          "content_same": false
        },
        {
          "line": 2501,
          "old_api": null,
          "new_api": "FinishDecoding",
          "old_text": null,
          "new_text": "decoder_.FinishDecoding(false).error()",
          "old_line_content": "// Process the module header.",
          "new_line_content": "    FinishAsyncCompileJobWithError(decoder_.FinishDecoding(false).error());",
          "content_same": false
        },
        {
          "line": 2512,
          "old_api": null,
          "new_api": "TRACE_STREAMING",
          "old_text": null,
          "new_text": "TRACE_STREAMING(\"Process section %d ...\\n\", section_code)",
          "old_line_content": "  }",
          "new_line_content": "  TRACE_STREAMING(\"Process section %d ...\\n\", section_code);",
          "content_same": false
        },
        {
          "line": 2516,
          "old_api": null,
          "new_api": "CommitCompilationUnits",
          "old_text": null,
          "new_text": "CommitCompilationUnits()",
          "old_line_content": "",
          "new_line_content": "    CommitCompilationUnits();",
          "content_same": false
        },
        {
          "line": 2517,
          "old_api": null,
          "new_api": "reset",
          "old_text": null,
          "new_text": "compilation_unit_builder_.reset()",
          "old_line_content": "// Process all sections except for the code section.",
          "new_line_content": "    compilation_unit_builder_.reset();",
          "content_same": false
        },
        {
          "line": 2522,
          "old_api": null,
          "new_api": "NativeModuleCache::WireBytesHash(bytes)",
          "old_text": null,
          "new_text": "NativeModuleCache::WireBytesHash(bytes)",
          "old_line_content": "  if (compilation_unit_builder_) {",
          "new_line_content": "                                      NativeModuleCache::WireBytesHash(bytes));",
          "content_same": false
        },
        {
          "line": 2527,
          "old_api": null,
          "new_api": "ok",
          "old_text": null,
          "new_text": "decoder_.ok()",
          "old_line_content": "  }",
          "new_line_content": "    if (!decoder_.ok()) {",
          "content_same": false
        },
        {
          "line": 2528,
          "old_api": null,
          "new_api": "FinishDecoding",
          "old_text": null,
          "new_text": "decoder_.FinishDecoding(false).error()",
          "old_line_content": "  if (before_code_section_) {",
          "new_line_content": "      FinishAsyncCompileJobWithError(decoder_.FinishDecoding(false).error());",
          "content_same": false
        },
        {
          "line": 2539,
          "old_api": null,
          "new_api": "constexpr",
          "old_text": null,
          "new_text": "constexpr",
          "old_line_content": "    }",
          "new_line_content": "  constexpr bool verify_functions = false;",
          "content_same": false
        },
        {
          "line": 2540,
          "old_api": null,
          "new_api": "DecodeSection",
          "old_text": null,
          "new_text": "decoder_.DecodeSection(section_code, bytes, offset, verify_functions)",
          "old_line_content": "    if (section_code == SectionCode::kUnknownSectionCode) {",
          "new_line_content": "  decoder_.DecodeSection(section_code, bytes, offset, verify_functions);",
          "content_same": false
        },
        {
          "line": 2541,
          "old_api": null,
          "new_api": "ok",
          "old_text": null,
          "new_text": "decoder_.ok()",
          "old_line_content": "      // Skip unknown sections that we do not know how to handle.",
          "new_line_content": "  if (!decoder_.ok()) {",
          "content_same": false
        },
        {
          "line": 2542,
          "old_api": null,
          "new_api": "FinishDecoding",
          "old_text": null,
          "new_text": "decoder_.FinishDecoding(false).error()",
          "old_line_content": "      return true;",
          "new_line_content": "    FinishAsyncCompileJobWithError(decoder_.FinishDecoding(false).error());",
          "content_same": false
        },
        {
          "line": 2553,
          "old_api": null,
          "new_api": "DCHECK_LE",
          "old_text": null,
          "new_text": "DCHECK_LE(0, code_section_length)",
          "old_line_content": "  }",
          "new_line_content": "  DCHECK_LE(0, code_section_length);",
          "content_same": false
        },
        {
          "line": 2555,
          "old_api": null,
          "new_api": "TRACE_STREAMING",
          "old_text": null,
          "new_text": "TRACE_STREAMING(\"Start the code section with %d functions...\\n\",\n                  num_functions)",
          "old_line_content": "}",
          "new_line_content": "  TRACE_STREAMING(\"Start the code section with %d functions...\\n\",",
          "content_same": false
        },
        {
          "line": 2557,
          "old_api": null,
          "new_api": "StartCodeSection",
          "old_text": null,
          "new_text": "decoder_.StartCodeSection()",
          "old_line_content": "// Start the code section.",
          "new_line_content": "  decoder_.StartCodeSection();",
          "content_same": false
        },
        {
          "line": 2558,
          "old_api": null,
          "new_api": "static_cast<uint32_t>(num_functions)",
          "old_text": null,
          "new_text": "static_cast<uint32_t>(num_functions)",
          "old_line_content": "bool AsyncStreamingProcessor::ProcessCodeSectionHeader(",
          "new_line_content": "  if (!decoder_.CheckFunctionsCount(static_cast<uint32_t>(num_functions),",
          "content_same": false
        },
        {
          "line": 2560,
          "old_api": null,
          "new_api": "FinishDecoding",
          "old_text": null,
          "new_text": "decoder_.FinishDecoding(false).error()",
          "old_line_content": "    std::shared_ptr<WireBytesStorage> wire_bytes_storage,",
          "new_line_content": "    FinishAsyncCompileJobWithError(decoder_.FinishDecoding(false).error());",
          "content_same": false
        },
        {
          "line": 2565,
          "old_api": null,
          "new_api": "static_cast<uint32_t>(code_section_length)",
          "old_text": null,
          "new_text": "static_cast<uint32_t>(code_section_length)",
          "old_line_content": "                  num_functions);",
          "new_line_content": "                            static_cast<uint32_t>(code_section_length));",
          "content_same": false
        },
        {
          "line": 2568,
          "old_api": null,
          "new_api": "static_cast<uint32_t>(code_section_length)",
          "old_text": null,
          "new_text": "static_cast<uint32_t>(code_section_length)",
          "old_line_content": "                                    functions_mismatch_error_offset)) {",
          "new_line_content": "                                    static_cast<uint32_t>(code_section_length));",
          "content_same": false
        },
        {
          "line": 2579,
          "old_api": null,
          "new_api": "module",
          "old_text": null,
          "new_text": "decoder_.module()",
          "old_line_content": "    // Known prefix, wait until the end of the stream and check the cache.",
          "new_line_content": "  DCHECK_EQ(kWasmOrigin, decoder_.module()->origin);",
          "content_same": false
        },
        {
          "line": 2582,
          "old_api": null,
          "new_api": "wasm::WasmCodeManager::EstimateNativeModuleCodeSize(\n          num_functions, num_imported_functions, code_section_length,\n          uses_liftoff)",
          "old_text": null,
          "new_text": "wasm::WasmCodeManager::EstimateNativeModuleCodeSize(\n          num_functions, num_imported_functions, code_section_length,\n          uses_liftoff)",
          "old_line_content": "  }",
          "new_line_content": "      wasm::WasmCodeManager::EstimateNativeModuleCodeSize(",
          "content_same": false
        },
        {
          "line": 2585,
          "old_api": null,
          "new_api": "shared_module",
          "old_text": null,
          "new_text": "job_->DoImmediately<AsyncCompileJob::PrepareAndStartCompile>(\n      decoder_.shared_module(), false, code_size_estimate)",
          "old_line_content": "  // task.",
          "new_line_content": "  job_->DoImmediately<AsyncCompileJob::PrepareAndStartCompile>(",
          "content_same": false
        },
        {
          "line": 2586,
          "old_api": null,
          "new_api": "shared_module",
          "old_text": null,
          "new_text": "decoder_.shared_module()",
          "old_line_content": "  int num_imported_functions =",
          "new_line_content": "      decoder_.shared_module(), false, code_size_estimate);",
          "content_same": false
        },
        {
          "line": 2589,
          "old_api": null,
          "new_api": "std::move(wire_bytes_storage)",
          "old_text": null,
          "new_text": "std::move(wire_bytes_storage)",
          "old_line_content": "  const bool uses_liftoff = FLAG_liftoff;",
          "new_line_content": "  compilation_state->SetWireBytesStorage(std::move(wire_bytes_storage));",
          "content_same": false
        },
        {
          "line": 2590,
          "old_api": null,
          "new_api": "module",
          "old_text": null,
          "new_text": "job_->native_module_->module()",
          "old_line_content": "  size_t code_size_estimate =",
          "new_line_content": "  DCHECK_EQ(job_->native_module_->module()->origin, kWasmOrigin);",
          "content_same": false
        },
        {
          "line": 2596,
          "old_api": null,
          "new_api": "reset",
          "old_text": null,
          "new_text": "compilation_unit_builder_.reset(\n      new CompilationUnitBuilder(job_->native_module_.get()))",
          "old_line_content": "",
          "new_line_content": "  compilation_unit_builder_.reset(",
          "content_same": false
        },
        {
          "line": 2602,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "compilation_unit_builder_.get()",
          "old_line_content": "  // Set outstanding_finishers_ to 2, because both the AsyncCompileJob and the",
          "new_line_content": "      AddImportWrapperUnits(native_module, compilation_unit_builder_.get());",
          "content_same": false
        },
        {
          "line": 2603,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "AddExportWrapperUnits(\n      job_->isolate_, wasm_engine_, native_module,\n      compilation_unit_builder_.get(), job_->enabled_features_)",
          "old_line_content": "  // AsyncStreamingProcessor have to finish.",
          "new_line_content": "  int num_export_wrappers = AddExportWrapperUnits(",
          "content_same": false
        },
        {
          "line": 2616,
          "old_api": null,
          "new_api": "DecodeFunctionBody",
          "old_text": null,
          "new_text": "decoder_.DecodeFunctionBody(\n      num_functions_, static_cast<uint32_t>(bytes.length()), offset, false)",
          "old_line_content": "      lazy_module, num_import_wrappers, num_export_wrappers);",
          "new_line_content": "  decoder_.DecodeFunctionBody(",
          "content_same": false
        },
        {
          "line": 2617,
          "old_api": null,
          "new_api": "length",
          "old_text": null,
          "new_text": "bytes.length()",
          "old_line_content": "  return true;",
          "new_line_content": "      num_functions_, static_cast<uint32_t>(bytes.length()), offset, false);",
          "content_same": false
        },
        {
          "line": 2619,
          "old_api": null,
          "new_api": "module",
          "old_text": null,
          "new_text": "decoder_.module()",
          "old_line_content": "",
          "new_line_content": "  const WasmModule* module = decoder_.module();",
          "content_same": false
        },
        {
          "line": 2622,
          "old_api": null,
          "new_api": "module",
          "old_text": null,
          "new_text": "decoder_.module()",
          "old_line_content": "                                                  uint32_t offset) {",
          "new_line_content": "      num_functions_ + decoder_.module()->num_imported_functions;",
          "content_same": false
        },
        {
          "line": 2638,
          "old_api": null,
          "new_api": "failed",
          "old_text": null,
          "new_text": "result.failed()",
          "old_line_content": "      (strategy == CompileStrategy::kLazy ||",
          "new_line_content": "    if (result.failed()) {",
          "content_same": false
        },
        {
          "line": 2639,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "result.error()",
          "old_line_content": "       strategy == CompileStrategy::kLazyBaselineEagerTopTier);",
          "new_line_content": "      FinishAsyncCompileJobWithError(result.error());",
          "content_same": false
        },
        {
          "line": 2650,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "job_->native_module_.get()",
          "old_line_content": "    }",
          "new_line_content": "  NativeModule* native_module = job_->native_module_.get();",
          "content_same": false
        },
        {
          "line": 2652,
          "old_api": null,
          "new_api": "UseLazyStub",
          "old_text": null,
          "new_text": "native_module->UseLazyStub(func_index)",
          "old_line_content": "",
          "new_line_content": "    native_module->UseLazyStub(func_index);",
          "content_same": false
        },
        {
          "line": 2654,
          "old_api": null,
          "new_api": "AddTopTierUnit",
          "old_text": null,
          "new_text": "compilation_unit_builder_->AddTopTierUnit(func_index)",
          "old_line_content": "  if (prefix_cache_hit_) {",
          "new_line_content": "    compilation_unit_builder_->AddTopTierUnit(func_index);",
          "content_same": false
        },
        {
          "line": 2655,
          "old_api": null,
          "new_api": "UseLazyStub",
          "old_text": null,
          "new_text": "native_module->UseLazyStub(func_index)",
          "old_line_content": "    num_functions_++;",
          "new_line_content": "    native_module->UseLazyStub(func_index);",
          "content_same": false
        },
        {
          "line": 2657,
          "old_api": null,
          "new_api": "DCHECK_EQ",
          "old_text": null,
          "new_text": "DCHECK_EQ(strategy, CompileStrategy::kEager)",
          "old_line_content": "  }",
          "new_line_content": "    DCHECK_EQ(strategy, CompileStrategy::kEager);",
          "content_same": false
        },
        {
          "line": 2658,
          "old_api": null,
          "new_api": "AddUnits",
          "old_text": null,
          "new_text": "compilation_unit_builder_->AddUnits(func_index)",
          "old_line_content": "",
          "new_line_content": "    compilation_unit_builder_->AddUnits(func_index);",
          "content_same": false
        },
        {
          "line": 2668,
          "old_api": null,
          "new_api": "Commit",
          "old_text": null,
          "new_text": "compilation_unit_builder_->Commit()",
          "old_line_content": "  }",
          "new_line_content": "  compilation_unit_builder_->Commit();",
          "content_same": false
        },
        {
          "line": 2672,
          "old_api": null,
          "new_api": "TRACE_STREAMING",
          "old_text": null,
          "new_text": "TRACE_STREAMING(\"FinishChunk...\\n\")",
          "old_line_content": "  return true;",
          "new_line_content": "  TRACE_STREAMING(\"FinishChunk...\\n\");",
          "content_same": false
        },
        {
          "line": 2673,
          "old_api": null,
          "new_api": "CommitCompilationUnits",
          "old_text": null,
          "new_text": "CommitCompilationUnits()",
          "old_line_content": "}",
          "new_line_content": "  if (compilation_unit_builder_) CommitCompilationUnits();",
          "content_same": false
        },
        {
          "line": 2678,
          "old_api": null,
          "new_api": "TRACE_STREAMING",
          "old_text": null,
          "new_text": "TRACE_STREAMING(\"Finish stream...\\n\")",
          "old_line_content": "}",
          "new_line_content": "  TRACE_STREAMING(\"Finish stream...\\n\");",
          "content_same": false
        },
        {
          "line": 2679,
          "old_api": null,
          "new_api": "as_vector",
          "old_text": null,
          "new_text": "bytes.as_vector()",
          "old_line_content": "",
          "new_line_content": "  DCHECK_EQ(NativeModuleCache::PrefixHash(bytes.as_vector()), prefix_hash_);",
          "content_same": false
        },
        {
          "line": 2680,
          "old_api": null,
          "new_api": "FinishDecoding",
          "old_text": null,
          "new_text": "decoder_.FinishDecoding(false)",
          "old_line_content": "void AsyncStreamingProcessor::OnFinishedChunk() {",
          "new_line_content": "  ModuleResult result = decoder_.FinishDecoding(false);",
          "content_same": false
        },
        {
          "line": 2686,
          "old_api": null,
          "new_api": "as_vector",
          "old_text": null,
          "new_text": "bytes.as_vector()",
          "old_line_content": "void AsyncStreamingProcessor::OnFinishedStream(OwnedVector<uint8_t> bytes) {",
          "new_line_content": "  job_->wire_bytes_ = ModuleWireBytes(bytes.as_vector());",
          "content_same": false
        },
        {
          "line": 2693,
          "old_api": null,
          "new_api": "length",
          "old_text": null,
          "new_text": "job_->wire_bytes_.length()",
          "old_line_content": "  }",
          "new_line_content": "  job_->metrics_event_.module_size_in_bytes = job_->wire_bytes_.length();",
          "content_same": false
        },
        {
          "line": 2703,
          "old_api": null,
          "new_api": "value",
          "old_text": null,
          "new_text": "wasm::WasmCodeManager::EstimateNativeModuleCodeSize(\n            result.value().get(), FLAG_liftoff)",
          "old_line_content": "  job_->metrics_event_.function_count = num_functions_;",
          "new_line_content": "        wasm::WasmCodeManager::EstimateNativeModuleCodeSize(",
          "content_same": false
        },
        {
          "line": 2706,
          "old_api": null,
          "new_api": "value",
          "old_text": null,
          "new_text": "std::move(result).value()",
          "old_line_content": "                                                           job_->context_id_);",
          "new_line_content": "        std::move(result).value(), true, code_size_estimate);",
          "content_same": false
        },
        {
          "line": 2718,
          "old_api": null,
          "new_api": "counters",
          "old_text": null,
          "new_text": "job_->isolate_->counters()->wasm_wasm_module_size_bytes()",
          "old_line_content": "",
          "new_line_content": "  auto* histogram = job_->isolate_->counters()->wasm_wasm_module_size_bytes();",
          "content_same": false
        },
        {
          "line": 2719,
          "old_api": null,
          "new_api": "module_bytes",
          "old_text": null,
          "new_text": "job_->wire_bytes_.module_bytes().length()",
          "old_line_content": "  // We have to open a HandleScope and prepare the Context for",
          "new_line_content": "  histogram->AddSample(job_->wire_bytes_.module_bytes().length());",
          "content_same": false
        },
        {
          "line": 2731,
          "old_api": null,
          "new_api": "length",
          "old_text": null,
          "new_text": "job_->native_module_->SetWireBytes(\n        {std::move(job_->bytes_copy_), job_->wire_bytes_.length()})",
          "old_line_content": "  bool cache_hit = false;",
          "new_line_content": "    job_->native_module_->SetWireBytes(",
          "content_same": false
        },
        {
          "line": 2732,
          "old_api": null,
          "new_api": "length",
          "old_text": null,
          "new_text": "job_->wire_bytes_.length()",
          "old_line_content": "  if (!has_code_section) {",
          "new_line_content": "        {std::move(job_->bytes_copy_), job_->wire_bytes_.length()});",
          "content_same": false
        },
        {
          "line": 2734,
          "old_api": null,
          "new_api": "DecrementAndCheckFinisherCount",
          "old_text": null,
          "new_text": "job_->DecrementAndCheckFinisherCount()",
          "old_line_content": "    // native module now (would otherwise happen in {PrepareAndStartCompile} or",
          "new_line_content": "  const bool needs_finish = job_->DecrementAndCheckFinisherCount();",
          "content_same": false
        },
        {
          "line": 2735,
          "old_api": null,
          "new_api": "DCHECK_IMPLIES",
          "old_text": null,
          "new_text": "DCHECK_IMPLIES(!has_code_section, needs_finish)",
          "old_line_content": "    // {ProcessCodeSectionHeader}).",
          "new_line_content": "  DCHECK_IMPLIES(!has_code_section, needs_finish);",
          "content_same": false
        },
        {
          "line": 2739,
          "old_api": null,
          "new_api": "wasm_engine",
          "old_text": null,
          "new_text": "job_->isolate_->wasm_engine()->UpdateNativeModuleCache(\n          failed, &job_->native_module_, job_->isolate_)",
          "old_line_content": "  } else {",
          "new_line_content": "      cache_hit = !job_->isolate_->wasm_engine()->UpdateNativeModuleCache(",
          "content_same": false
        },
        {
          "line": 2745,
          "old_api": null,
          "new_api": "FinishCompile",
          "old_text": null,
          "new_text": "job_->FinishCompile(cache_hit)",
          "old_line_content": "  if (needs_finish) {",
          "new_line_content": "      job_->FinishCompile(cache_hit);",
          "content_same": false
        },
        {
          "line": 2753,
          "old_api": null,
          "new_api": "FinishAsyncCompileJobWithError",
          "old_text": null,
          "new_text": "FinishAsyncCompileJobWithError(error)",
          "old_line_content": "    } else {",
          "new_line_content": "  FinishAsyncCompileJobWithError(error);",
          "content_same": false
        },
        {
          "line": 2757,
          "old_api": null,
          "new_api": "TRACE_STREAMING",
          "old_text": null,
          "new_text": "TRACE_STREAMING(\"Abort stream...\\n\")",
          "old_line_content": "}",
          "new_line_content": "  TRACE_STREAMING(\"Abort stream...\\n\");",
          "content_same": false
        },
        {
          "line": 2758,
          "old_api": null,
          "new_api": "Abort",
          "old_text": null,
          "new_text": "job_->Abort()",
          "old_line_content": "",
          "new_line_content": "  job_->Abort();",
          "content_same": false
        },
        {
          "line": 2763,
          "old_api": null,
          "new_api": "TRACE_EVENT0",
          "old_text": null,
          "new_text": "TRACE_EVENT0(\"v8.wasm\", \"wasm.Deserialize\")",
          "old_line_content": "}",
          "new_line_content": "  TRACE_EVENT0(\"v8.wasm\", \"wasm.Deserialize\");",
          "content_same": false
        },
        {
          "line": 2769,
          "old_api": null,
          "new_api": "url",
          "old_text": null,
          "new_text": "DeserializeNativeModule(\n      job_->isolate_, module_bytes, wire_bytes, job_->stream_->url())",
          "old_line_content": "",
          "new_line_content": "  MaybeHandle<WasmModuleObject> result = DeserializeNativeModule(",
          "content_same": false
        },
        {
          "line": 2770,
          "old_api": null,
          "new_api": "url",
          "old_text": null,
          "new_text": "job_->stream_->url()",
          "old_line_content": "bool AsyncStreamingProcessor::Deserialize(Vector<const uint8_t> module_bytes,",
          "new_line_content": "      job_->isolate_, module_bytes, wire_bytes, job_->stream_->url());",
          "content_same": false
        },
        {
          "line": 2775,
          "old_api": null,
          "new_api": "ToHandleChecked",
          "old_text": null,
          "new_text": "result.ToHandleChecked()",
          "old_line_content": "  HandleScope scope(job_->isolate_);",
          "new_line_content": "      job_->isolate_->global_handles()->Create(*result.ToHandleChecked());",
          "content_same": false
        },
        {
          "line": 2776,
          "old_api": null,
          "new_api": "shared_native_module",
          "old_text": null,
          "new_text": "job_->module_object_->shared_native_module()",
          "old_line_content": "  SaveAndSwitchContext saved_context(job_->isolate_, *job_->native_context_);",
          "new_line_content": "  job_->native_module_ = job_->module_object_->shared_native_module();",
          "content_same": false
        },
        {
          "line": 2777,
          "old_api": null,
          "new_api": "wire_bytes",
          "old_text": null,
          "new_text": "job_->native_module_->wire_bytes()",
          "old_line_content": "",
          "new_line_content": "  job_->wire_bytes_ = ModuleWireBytes(job_->native_module_->wire_bytes());",
          "content_same": false
        },
        {
          "line": 2788,
          "old_api": null,
          "new_api": "module",
          "old_text": null,
          "new_text": "native_module->module()",
          "old_line_content": "  return true;",
          "new_line_content": "                            native_module->module()->origin == kWasmOrigin",
          "content_same": false
        },
        {
          "line": 2791,
          "old_api": null,
          "new_api": "std::move(async_counters)",
          "old_text": null,
          "new_text": "std::move(async_counters)",
          "old_line_content": "CompilationStateImpl::CompilationStateImpl(",
          "new_line_content": "      async_counters_(std::move(async_counters)),",
          "content_same": false
        },
        {
          "line": 2792,
          "old_api": null,
          "new_api": "num_functions",
          "old_text": null,
          "new_text": "native_module->num_functions()",
          "old_line_content": "    const std::shared_ptr<NativeModule>& native_module,",
          "new_line_content": "      compilation_unit_queues_(native_module->num_functions()) {}",
          "content_same": false
        },
        {
          "line": 2796,
          "old_api": null,
          "new_api": "PostJob",
          "old_text": null,
          "new_text": "V8::GetCurrentPlatform()->PostJob(\n      TaskPriority::kUserVisible,\n      std::make_unique<BackgroundCompileJob>(native_module_weak_, engine,\n                                             async_counters_))",
          "old_line_content": "      compile_mode_(FLAG_wasm_tier_up &&",
          "new_line_content": "  compile_job_ = V8::GetCurrentPlatform()->PostJob(",
          "content_same": false
        },
        {
          "line": 2798,
          "old_api": null,
          "new_api": "std::make_unique<BackgroundCompileJob>(native_module_weak_, engine,\n                                             async_counters_)",
          "old_text": null,
          "new_text": "std::make_unique<BackgroundCompileJob>(native_module_weak_, engine,\n                                             async_counters_)",
          "old_line_content": "                        ? CompileMode::kTiering",
          "new_line_content": "      std::make_unique<BackgroundCompileJob>(native_module_weak_, engine,",
          "content_same": false
        },
        {
          "line": 2815,
          "old_api": null,
          "new_api": "store",
          "old_text": null,
          "new_text": "compile_cancelled_.store(true, std::memory_order_relaxed)",
          "old_line_content": "  if (cancellation_policy == kCancelInitialCompilation &&",
          "new_line_content": "  compile_cancelled_.store(true, std::memory_order_relaxed);",
          "content_same": false
        },
        {
          "line": 2818,
          "old_api": null,
          "new_api": "clear",
          "old_text": null,
          "new_text": "callbacks_.clear()",
          "old_line_content": "    // Initial compilation already finished; cannot be cancelled.",
          "new_line_content": "  callbacks_.clear();",
          "content_same": false
        },
        {
          "line": 2822,
          "old_api": null,
          "new_api": "load",
          "old_text": null,
          "new_text": "compile_cancelled_.load(std::memory_order_relaxed)",
          "old_line_content": "  // std::memory_order_relaxed is sufficient because no other state is",
          "new_line_content": "  return compile_cancelled_.load(std::memory_order_relaxed);",
          "content_same": false
        },
        {
          "line": 2828,
          "old_api": null,
          "new_api": "enabled_features",
          "old_text": null,
          "new_text": "native_module_->enabled_features()",
          "old_line_content": "}",
          "new_line_content": "  auto enabled_features = native_module_->enabled_features();",
          "content_same": false
        },
        {
          "line": 2829,
          "old_api": null,
          "new_api": "module",
          "old_text": null,
          "new_text": "native_module_->module()",
          "old_line_content": "",
          "new_line_content": "  auto* module = native_module_->module();",
          "content_same": false
        },
        {
          "line": 2832,
          "old_api": null,
          "new_api": "DCHECK_EQ",
          "old_text": null,
          "new_text": "DCHECK_EQ(0, outstanding_baseline_units_)",
          "old_line_content": "}",
          "new_line_content": "  DCHECK_EQ(0, outstanding_baseline_units_);",
          "content_same": false
        },
        {
          "line": 2833,
          "old_api": null,
          "new_api": "DCHECK_EQ",
          "old_text": null,
          "new_text": "DCHECK_EQ(0, outstanding_export_wrappers_)",
          "old_line_content": "",
          "new_line_content": "  DCHECK_EQ(0, outstanding_export_wrappers_);",
          "content_same": false
        },
        {
          "line": 2834,
          "old_api": null,
          "new_api": "DCHECK_EQ",
          "old_text": null,
          "new_text": "DCHECK_EQ(0, outstanding_top_tier_functions_)",
          "old_line_content": "void CompilationStateImpl::InitializeCompilationProgress(",
          "new_line_content": "  DCHECK_EQ(0, outstanding_top_tier_functions_);",
          "content_same": false
        },
        {
          "line": 2835,
          "old_api": null,
          "new_api": "reserve",
          "old_text": null,
          "new_text": "compilation_progress_.reserve(module->num_declared_functions)",
          "old_line_content": "    bool lazy_module, int num_import_wrappers, int num_export_wrappers) {",
          "new_line_content": "  compilation_progress_.reserve(module->num_declared_functions);",
          "content_same": false
        },
        {
          "line": 2839,
          "old_api": null,
          "new_api": "IsTieredDown",
          "old_text": null,
          "new_text": "native_module_->IsTieredDown()",
          "old_line_content": "",
          "new_line_content": "  const bool prefer_liftoff = native_module_->IsTieredDown();",
          "content_same": false
        },
        {
          "line": 2845,
          "old_api": null,
          "new_api": "ReachedTierField::encode(ExecutionTier::kNone)",
          "old_text": null,
          "new_text": "ReachedTierField::encode(ExecutionTier::kNone)",
          "old_line_content": "  int start = module->num_imported_functions;",
          "new_line_content": "          ReachedTierField::encode(ExecutionTier::kNone);",
          "content_same": false
        },
        {
          "line": 2846,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "compilation_progress_.push_back(kLiftoffOnlyFunctionProgress)",
          "old_line_content": "  int end = start + module->num_declared_functions;",
          "new_line_content": "      compilation_progress_.push_back(kLiftoffOnlyFunctionProgress);",
          "content_same": false
        },
        {
          "line": 2858,
          "old_api": null,
          "new_api": "DCHECK_EQ",
          "old_text": null,
          "new_text": "DCHECK_EQ(required_for_top_tier,\n              strategy == CompileStrategy::kEager ||\n                  strategy == CompileStrategy::kLazyBaselineEagerTopTier)",
          "old_line_content": "      continue;",
          "new_line_content": "    DCHECK_EQ(required_for_top_tier,",
          "content_same": false
        },
        {
          "line": 2872,
          "old_api": null,
          "new_api": "ReachedTierField::encode(ExecutionTier::kNone)",
          "old_text": null,
          "new_text": "ReachedTierField::encode(ExecutionTier::kNone)",
          "old_line_content": "    if (required_for_baseline) outstanding_baseline_units_++;",
          "new_line_content": "    uint8_t function_progress = ReachedTierField::encode(ExecutionTier::kNone);",
          "content_same": false
        },
        {
          "line": 2873,
          "old_api": null,
          "new_api": "RequiredBaselineTierField::update(\n        function_progress, required_baseline_tier)",
          "old_text": null,
          "new_text": "RequiredBaselineTierField::update(\n        function_progress, required_baseline_tier)",
          "old_line_content": "    if (required_for_top_tier) outstanding_top_tier_functions_++;",
          "new_line_content": "    function_progress = RequiredBaselineTierField::update(",
          "content_same": false
        },
        {
          "line": 2876,
          "old_api": null,
          "new_api": "RequiredTopTierField::update(function_progress, required_top_tier)",
          "old_text": null,
          "new_text": "RequiredTopTierField::update(function_progress, required_top_tier)",
          "old_line_content": "    ExecutionTier required_baseline_tier = required_for_baseline",
          "new_line_content": "        RequiredTopTierField::update(function_progress, required_top_tier);",
          "content_same": false
        },
        {
          "line": 2877,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "compilation_progress_.push_back(function_progress)",
          "old_line_content": "                                               ? requested_tiers.baseline_tier",
          "new_line_content": "    compilation_progress_.push_back(function_progress);",
          "content_same": false
        },
        {
          "line": 2879,
          "old_api": null,
          "new_api": "DCHECK_IMPLIES",
          "old_text": null,
          "new_text": "DCHECK_IMPLIES(lazy_module, outstanding_baseline_units_ == 0)",
          "old_line_content": "    ExecutionTier required_top_tier =",
          "new_line_content": "  DCHECK_IMPLIES(lazy_module, outstanding_baseline_units_ == 0);",
          "content_same": false
        },
        {
          "line": 2880,
          "old_api": null,
          "new_api": "DCHECK_IMPLIES",
          "old_text": null,
          "new_text": "DCHECK_IMPLIES(lazy_module, outstanding_top_tier_functions_ == 0)",
          "old_line_content": "        required_for_top_tier ? requested_tiers.top_tier : ExecutionTier::kNone;",
          "new_line_content": "  DCHECK_IMPLIES(lazy_module, outstanding_top_tier_functions_ == 0);",
          "content_same": false
        },
        {
          "line": 2892,
          "old_api": null,
          "new_api": "module",
          "old_text": null,
          "new_text": "native_module_->module()",
          "old_line_content": "  outstanding_baseline_units_ += num_import_wrappers;",
          "new_line_content": "  auto* module = native_module_->module();",
          "content_same": false
        },
        {
          "line": 2894,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "compilation_progress_.empty()",
          "old_line_content": "",
          "new_line_content": "  DCHECK(compilation_progress_.empty());",
          "content_same": false
        },
        {
          "line": 2895,
          "old_api": null,
          "new_api": "constexpr",
          "old_text": null,
          "new_text": "constexpr",
          "old_line_content": "  // Trigger callbacks if module needs no baseline or top tier compilation. This",
          "new_line_content": "  constexpr uint8_t kProgressAfterDeserialization =",
          "content_same": false
        },
        {
          "line": 2896,
          "old_api": null,
          "new_api": "RequiredBaselineTierField::encode(ExecutionTier::kTurbofan)",
          "old_text": null,
          "new_text": "RequiredBaselineTierField::encode(ExecutionTier::kTurbofan)",
          "old_line_content": "  // can be the case for an empty or fully lazy module.",
          "new_line_content": "      RequiredBaselineTierField::encode(ExecutionTier::kTurbofan) |",
          "content_same": false
        },
        {
          "line": 2898,
          "old_api": null,
          "new_api": "ReachedTierField::encode(ExecutionTier::kTurbofan)",
          "old_text": null,
          "new_text": "ReachedTierField::encode(ExecutionTier::kTurbofan)",
          "old_line_content": "}",
          "new_line_content": "      ReachedTierField::encode(ExecutionTier::kTurbofan);",
          "content_same": false
        },
        {
          "line": 2899,
          "old_api": null,
          "new_api": "Add",
          "old_text": null,
          "new_text": "finished_events_.Add(CompilationEvent::kFinishedExportWrappers)",
          "old_line_content": "",
          "new_line_content": "  finished_events_.Add(CompilationEvent::kFinishedExportWrappers);",
          "content_same": false
        },
        {
          "line": 2900,
          "old_api": null,
          "new_api": "Add",
          "old_text": null,
          "new_text": "finished_events_.Add(CompilationEvent::kFinishedBaselineCompilation)",
          "old_line_content": "void CompilationStateImpl::InitializeCompilationProgressAfterDeserialization() {",
          "new_line_content": "  finished_events_.Add(CompilationEvent::kFinishedBaselineCompilation);",
          "content_same": false
        },
        {
          "line": 2902,
          "old_api": null,
          "new_api": "assign",
          "old_text": null,
          "new_text": "compilation_progress_.assign(module->num_declared_functions,\n                               kProgressAfterDeserialization)",
          "old_line_content": "  base::MutexGuard guard(&callbacks_mutex_);",
          "new_line_content": "  compilation_progress_.assign(module->num_declared_functions,",
          "content_same": false
        },
        {
          "line": 2923,
          "old_api": null,
          "new_api": "GetTotalSize",
          "old_text": null,
          "new_text": "compilation_unit_queues_.GetTotalSize()",
          "old_line_content": "  base::Optional<base::MutexGuard> guard(&callbacks_mutex_);",
          "new_line_content": "         compilation_unit_queues_.GetTotalSize() > 0) {",
          "content_same": false
        },
        {
          "line": 2924,
          "old_api": null,
          "new_api": "reset",
          "old_text": null,
          "new_text": "guard.reset()",
          "old_line_content": "",
          "new_line_content": "    guard.reset();",
          "content_same": false
        },
        {
          "line": 2925,
          "old_api": null,
          "new_api": "constexpr",
          "old_text": null,
          "new_text": "constexpr",
          "old_line_content": "  // As long as there are outstanding recompilation functions, take part in",
          "new_line_content": "    constexpr JobDelegate* kNoDelegate = nullptr;",
          "content_same": false
        },
        {
          "line": 2926,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "async_counters_.get()",
          "old_line_content": "  // compilation. This is to avoid recompiling for the same tier or for",
          "new_line_content": "    ExecuteCompilationUnits(native_module_weak_, async_counters_.get(),",
          "content_same": false
        },
        {
          "line": 2928,
          "old_api": null,
          "new_api": "emplace",
          "old_text": null,
          "new_text": "guard.emplace(&callbacks_mutex_)",
          "old_line_content": "  // empty before {outstanding_recompilation_functions_} drops to zero. In this",
          "new_line_content": "    guard.emplace(&callbacks_mutex_);",
          "content_same": false
        },
        {
          "line": 2939,
          "old_api": null,
          "new_api": "FindFunctionsToRecompile",
          "old_text": null,
          "new_text": "native_module_->FindFunctionsToRecompile(new_tiering_state)",
          "old_line_content": "",
          "new_line_content": "      native_module_->FindFunctionsToRecompile(new_tiering_state);",
          "content_same": false
        },
        {
          "line": 2941,
          "old_api": null,
          "new_api": "std::move(recompilation_finished_callback)",
          "old_text": null,
          "new_text": "std::move(recompilation_finished_callback)",
          "old_line_content": "  // NativeModule. Before updating information here, consult the NativeModule to",
          "new_line_content": "  callbacks_.emplace_back(std::move(recompilation_finished_callback));",
          "content_same": false
        },
        {
          "line": 2949,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "compilation_progress_.size()",
          "old_line_content": "",
          "new_line_content": "  if (compilation_progress_.size() > 0) {",
          "content_same": false
        },
        {
          "line": 2951,
          "old_api": null,
          "new_api": "module",
          "old_text": null,
          "new_text": "native_module_->module()",
          "old_line_content": "  tiering_state_ = new_tiering_state;",
          "new_line_content": "    const WasmModule* module = native_module_->module();",
          "content_same": false
        },
        {
          "line": 2952,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "compilation_progress_.size()",
          "old_line_content": "",
          "new_line_content": "    DCHECK_EQ(module->num_declared_functions, compilation_progress_.size());",
          "content_same": false
        },
        {
          "line": 2953,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "DCHECK_GE(module->num_declared_functions,\n              recompile_function_indexes.size())",
          "old_line_content": "  // If compilation progress is not initialized yet, then compilation didn't",
          "new_line_content": "    DCHECK_GE(module->num_declared_functions,",
          "content_same": false
        },
        {
          "line": 2954,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "recompile_function_indexes.size()",
          "old_line_content": "  // start yet, and new code will be kept tiered-down from the start. For",
          "new_line_content": "              recompile_function_indexes.size());",
          "content_same": false
        },
        {
          "line": 2956,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "recompile_function_indexes.size()",
          "old_line_content": "  // the module is complete. In any case, we don't need to recompile here.",
          "new_line_content": "        static_cast<int>(recompile_function_indexes.size());",
          "content_same": false
        },
        {
          "line": 2966,
          "old_api": null,
          "new_api": "DCHECK_LE",
          "old_text": null,
          "new_text": "DCHECK_LE(imported, function_index)",
          "old_line_content": "    // Restart recompilation if another recompilation is already happening.",
          "new_line_content": "      DCHECK_LE(imported, function_index);",
          "content_same": false
        },
        {
          "line": 2969,
          "old_api": null,
          "new_api": "MissingRecompilationField::update(progress, true)",
          "old_text": null,
          "new_text": "MissingRecompilationField::update(progress, true)",
          "old_line_content": "    }",
          "new_line_content": "      progress = MissingRecompilationField::update(progress, true);",
          "content_same": false
        },
        {
          "line": 2970,
          "old_api": null,
          "new_api": "AddRecompilationUnit",
          "old_text": null,
          "new_text": "builder->AddRecompilationUnit(function_index, new_tier)",
          "old_line_content": "    auto new_tier = new_tiering_state == kTieredDown ? ExecutionTier::kLiftoff",
          "new_line_content": "      builder->AddRecompilationUnit(function_index, new_tier);",
          "content_same": false
        },
        {
          "line": 2976,
          "old_api": null,
          "new_api": "base::EnumSet<CompilationEvent>(\n        {CompilationEvent::kFinishedRecompilation})",
          "old_text": null,
          "new_text": "base::EnumSet<CompilationEvent>(\n        {CompilationEvent::kFinishedRecompilation})",
          "old_line_content": "      int slot_index = function_index - imported;",
          "new_line_content": "    TriggerCallbacks(base::EnumSet<CompilationEvent>(",
          "content_same": false
        },
        {
          "line": 2980,
          "old_api": null,
          "new_api": "has_value",
          "old_text": null,
          "new_text": "builder.has_value()",
          "old_line_content": "    }",
          "new_line_content": "  if (builder.has_value()) {",
          "content_same": false
        },
        {
          "line": 2982,
          "old_api": null,
          "new_api": "reset",
          "old_text": null,
          "new_text": "guard.reset()",
          "old_line_content": "",
          "new_line_content": "    guard.reset();",
          "content_same": false
        },
        {
          "line": 2983,
          "old_api": null,
          "new_api": "Commit",
          "old_text": null,
          "new_text": "builder->Commit()",
          "old_line_content": "  // Trigger callback if module needs no recompilation.",
          "new_line_content": "    builder->Commit();",
          "content_same": false
        },
        {
          "line": 2994,
          "old_api": null,
          "new_api": "contains",
          "old_text": null,
          "new_text": "finished_events_.contains(event)",
          "old_line_content": "}",
          "new_line_content": "    if (finished_events_.contains(event)) {",
          "content_same": false
        },
        {
          "line": 2995,
          "old_api": null,
          "new_api": "callback",
          "old_text": null,
          "new_text": "callback(event)",
          "old_line_content": "",
          "new_line_content": "      callback(event);",
          "content_same": false
        },
        {
          "line": 2998,
          "old_api": null,
          "new_api": "constexpr",
          "old_text": null,
          "new_text": "constexpr",
          "old_line_content": "  // Immediately trigger events that already happened.",
          "new_line_content": "  constexpr base::EnumSet<CompilationEvent> kFinalEvents{",
          "content_same": false
        },
        {
          "line": 3001,
          "old_api": null,
          "new_api": "contains_any",
          "old_text": null,
          "new_text": "finished_events_.contains_any(kFinalEvents)",
          "old_line_content": "                     CompilationEvent::kFinishedTopTierCompilation,",
          "new_line_content": "  if (!finished_events_.contains_any(kFinalEvents)) {",
          "content_same": false
        },
        {
          "line": 3002,
          "old_api": null,
          "new_api": "std::move(callback)",
          "old_text": null,
          "new_text": "std::move(callback)",
          "old_line_content": "                     CompilationEvent::kFailedCompilation}) {",
          "new_line_content": "    callbacks_.emplace_back(std::move(callback));",
          "content_same": false
        },
        {
          "line": 3013,
          "old_api": null,
          "new_api": "load",
          "old_text": null,
          "new_text": "outstanding_js_to_wasm_wrappers_.load()",
          "old_line_content": "}",
          "new_line_content": "    DCHECK_EQ(0, outstanding_js_to_wasm_wrappers_.load());",
          "content_same": false
        },
        {
          "line": 3014,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "js_to_wasm_wrapper_units_.end()",
          "old_line_content": "",
          "new_line_content": "    js_to_wasm_wrapper_units_.insert(js_to_wasm_wrapper_units_.end(),",
          "content_same": false
        },
        {
          "line": 3015,
          "old_api": null,
          "new_api": "begin",
          "old_text": null,
          "new_text": "js_to_wasm_wrapper_units.begin()",
          "old_line_content": "void CompilationStateImpl::AddCompilationUnits(",
          "new_line_content": "                                     js_to_wasm_wrapper_units.begin(),",
          "content_same": false
        },
        {
          "line": 3016,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "js_to_wasm_wrapper_units.end()",
          "old_line_content": "    Vector<WasmCompilationUnit> baseline_units,",
          "new_line_content": "                                     js_to_wasm_wrapper_units.end());",
          "content_same": false
        },
        {
          "line": 3019,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "js_to_wasm_wrapper_units.size()",
          "old_line_content": "        js_to_wasm_wrapper_units) {",
          "new_line_content": "    outstanding_js_to_wasm_wrappers_.store(js_to_wasm_wrapper_units.size(),",
          "content_same": false
        },
        {
          "line": 3026,
          "old_api": null,
          "new_api": "NotifyConcurrencyIncrease",
          "old_text": null,
          "new_text": "compile_job_->NotifyConcurrencyIncrease()",
          "old_line_content": "    // Use release semantics such that updates to {js_to_wasm_wrapper_units_}",
          "new_line_content": "  compile_job_->NotifyConcurrencyIncrease();",
          "content_same": false
        },
        {
          "line": 3030,
          "old_api": null,
          "new_api": "AddCompilationUnits",
          "old_text": null,
          "new_text": "AddCompilationUnits({}, {&unit, 1}, {})",
          "old_line_content": "  }",
          "new_line_content": "  AddCompilationUnits({}, {&unit, 1}, {});",
          "content_same": false
        },
        {
          "line": 3036,
          "old_api": null,
          "new_api": "NotifyConcurrencyIncrease",
          "old_text": null,
          "new_text": "compile_job_->NotifyConcurrencyIncrease()",
          "old_line_content": "}",
          "new_line_content": "  compile_job_->NotifyConcurrencyIncrease();",
          "content_same": false
        },
        {
          "line": 3042,
          "old_api": null,
          "new_api": "load",
          "old_text": null,
          "new_text": "outstanding_js_to_wasm_wrappers_.load(std::memory_order_relaxed)",
          "old_line_content": "void CompilationStateImpl::AddTopTierPriorityCompilationUnit(",
          "new_line_content": "      outstanding_js_to_wasm_wrappers_.load(std::memory_order_relaxed);",
          "content_same": false
        },
        {
          "line": 3046,
          "old_api": null,
          "new_api": "compare_exchange_weak",
          "old_text": null,
          "new_text": "outstanding_js_to_wasm_wrappers_.compare_exchange_weak(\n             outstanding_units, outstanding_units - 1,\n             std::memory_order_acquire)",
          "old_line_content": "}",
          "new_line_content": "         !outstanding_js_to_wasm_wrappers_.compare_exchange_weak(",
          "content_same": false
        },
        {
          "line": 3058,
          "old_api": null,
          "new_api": "factory",
          "old_text": null,
          "new_text": "isolate->factory()->NewFixedArray(\n      MaxNumExportWrappers(module), AllocationType::kOld)",
          "old_line_content": "    // Retry with updated {outstanding_units}.",
          "new_line_content": "  *export_wrappers_out = isolate->factory()->NewFixedArray(",
          "content_same": false
        },
        {
          "line": 3059,
          "old_api": null,
          "new_api": "MaxNumExportWrappers",
          "old_text": null,
          "new_text": "MaxNumExportWrappers(module)",
          "old_line_content": "  }",
          "new_line_content": "      MaxNumExportWrappers(module), AllocationType::kOld);",
          "content_same": false
        },
        {
          "line": 3063,
          "old_api": null,
          "new_api": "TRACE_DISABLED_BY_DEFAULT",
          "old_text": null,
          "new_text": "TRACE_DISABLED_BY_DEFAULT(\"v8.wasm.detailed\")",
          "old_line_content": "",
          "new_line_content": "  TRACE_EVENT1(TRACE_DISABLED_BY_DEFAULT(\"v8.wasm.detailed\"),",
          "content_same": false
        },
        {
          "line": 3065,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "js_to_wasm_wrapper_units_.size()",
          "old_line_content": "    Isolate* isolate, const WasmModule* module,",
          "new_line_content": "               js_to_wasm_wrapper_units_.size());",
          "content_same": false
        },
        {
          "line": 3066,
          "old_api": null,
          "new_api": "heap",
          "old_text": null,
          "new_text": "isolate->heap()",
          "old_line_content": "    Handle<FixedArray>* export_wrappers_out) {",
          "new_line_content": "  CodeSpaceMemoryModificationScope modification_scope(isolate->heap());",
          "content_same": false
        },
        {
          "line": 3069,
          "old_api": null,
          "new_api": "Finalize",
          "old_text": null,
          "new_text": "unit->Finalize()",
          "old_line_content": "  // TODO(6792): Wrappers below are allocated with {Factory::NewCode}. As an",
          "new_line_content": "    Handle<Code> code = unit->Finalize();",
          "content_same": false
        },
        {
          "line": 3071,
          "old_api": null,
          "new_api": "is_import",
          "old_text": null,
          "new_text": "unit->is_import()",
          "old_line_content": "  // because many such wrapper are allocated in sequence below.",
          "new_line_content": "        GetExportWrapperIndex(module, unit->sig(), unit->is_import());",
          "content_same": false
        },
        {
          "line": 3073,
          "old_api": null,
          "new_api": "counters",
          "old_text": null,
          "new_text": "isolate->counters()",
          "old_line_content": "               \"wasm.FinalizeJSToWasmWrappers\", \"wrappers\",",
          "new_line_content": "    RecordStats(*code, isolate->counters());",
          "content_same": false
        },
        {
          "line": 3079,
          "old_api": null,
          "new_api": "GetQueueForTask",
          "old_text": null,
          "new_text": "compilation_unit_queues_.GetQueueForTask(task_id)",
          "old_line_content": "    int wrapper_index =",
          "new_line_content": "  return compilation_unit_queues_.GetQueueForTask(task_id);",
          "content_same": false
        },
        {
          "line": 3085,
          "old_api": null,
          "new_api": "GetNextUnit",
          "old_text": null,
          "new_text": "compilation_unit_queues_.GetNextUnit(queue, baseline_only)",
          "old_line_content": "",
          "new_line_content": "  return compilation_unit_queues_.GetNextUnit(queue, baseline_only);",
          "content_same": false
        },
        {
          "line": 3089,
          "old_api": null,
          "new_api": "TRACE_DISABLED_BY_DEFAULT",
          "old_text": null,
          "new_text": "TRACE_DISABLED_BY_DEFAULT(\"v8.wasm.detailed\")",
          "old_line_content": "}",
          "new_line_content": "  TRACE_EVENT1(TRACE_DISABLED_BY_DEFAULT(\"v8.wasm.detailed\"),",
          "content_same": false
        },
        {
          "line": 3090,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "code_vector.size()",
          "old_line_content": "",
          "new_line_content": "               \"wasm.OnFinishedUnits\", \"units\", code_vector.size());",
          "content_same": false
        },
        {
          "line": 3109,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "compilation_progress_.size()",
          "old_line_content": "    return;",
          "new_line_content": "  DCHECK_EQ(compilation_progress_.size(),",
          "content_same": false
        },
        {
          "line": 3110,
          "old_api": null,
          "new_api": "module",
          "old_text": null,
          "new_text": "native_module_->module()",
          "old_line_content": "  }",
          "new_line_content": "            native_module_->module()->num_declared_functions);",
          "content_same": false
        },
        {
          "line": 3114,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "code_vector.size()",
          "old_line_content": "  static_assert(ExecutionTier::kNone < ExecutionTier::kLiftoff &&",
          "new_line_content": "  for (size_t i = 0; i < code_vector.size(); i++) {",
          "content_same": false
        },
        {
          "line": 3116,
          "old_api": null,
          "new_api": "DCHECK_NOT_NULL",
          "old_text": null,
          "new_text": "DCHECK_NOT_NULL(code)",
          "old_line_content": "                \"Assume an order on execution tiers\");",
          "new_line_content": "    DCHECK_NOT_NULL(code);",
          "content_same": false
        },
        {
          "line": 3117,
          "old_api": null,
          "new_api": "num_functions",
          "old_text": null,
          "new_text": "native_module_->num_functions()",
          "old_line_content": "",
          "new_line_content": "    DCHECK_LT(code->index(), native_module_->num_functions());",
          "content_same": false
        },
        {
          "line": 3120,
          "old_api": null,
          "new_api": "num_imported_functions",
          "old_text": null,
          "new_text": "native_module_->num_imported_functions()",
          "old_line_content": "",
          "new_line_content": "        static_cast<int>(native_module_->num_imported_functions())) {",
          "content_same": false
        },
        {
          "line": 3122,
          "old_api": null,
          "new_api": "tier",
          "old_text": null,
          "new_text": "code->tier()",
          "old_line_content": "",
          "new_line_content": "      DCHECK_EQ(code->tier(), ExecutionTier::kTurbofan);",
          "content_same": false
        },
        {
          "line": 3133,
          "old_api": null,
          "new_api": "index",
          "old_text": null,
          "new_text": "code->index()",
          "old_line_content": "    } else {",
          "new_line_content": "          declared_function_index(native_module_->module(), code->index());",
          "content_same": false
        },
        {
          "line": 3136,
          "old_api": null,
          "new_api": "RequiredBaselineTierField::decode(function_progress)",
          "old_text": null,
          "new_text": "RequiredBaselineTierField::decode(function_progress)",
          "old_line_content": "",
          "new_line_content": "          RequiredBaselineTierField::decode(function_progress);",
          "content_same": false
        },
        {
          "line": 3138,
          "old_api": null,
          "new_api": "RequiredTopTierField::decode(function_progress)",
          "old_text": null,
          "new_text": "RequiredTopTierField::decode(function_progress)",
          "old_line_content": "      // This view on the compilation progress may differ from the actually",
          "new_line_content": "          RequiredTopTierField::decode(function_progress);",
          "content_same": false
        },
        {
          "line": 3139,
          "old_api": null,
          "new_api": "ReachedTierField::decode(function_progress)",
          "old_text": null,
          "new_text": "ReachedTierField::decode(function_progress)",
          "old_line_content": "      // compiled code. Any lazily compiled function does not contribute to the",
          "new_line_content": "      ExecutionTier reached_tier = ReachedTierField::decode(function_progress);",
          "content_same": false
        },
        {
          "line": 3143,
          "old_api": null,
          "new_api": "tier",
          "old_text": null,
          "new_text": "code->tier()",
          "old_line_content": "      uint8_t function_progress = compilation_progress_[slot_index];",
          "new_line_content": "          required_baseline_tier <= code->tier()) {",
          "content_same": false
        },
        {
          "line": 3144,
          "old_api": null,
          "new_api": "DCHECK_GT",
          "old_text": null,
          "new_text": "DCHECK_GT(outstanding_baseline_units_, 0)",
          "old_line_content": "      ExecutionTier required_baseline_tier =",
          "new_line_content": "        DCHECK_GT(outstanding_baseline_units_, 0);",
          "content_same": false
        },
        {
          "line": 3149,
          "old_api": null,
          "new_api": "DCHECK_GT",
          "old_text": null,
          "new_text": "DCHECK_GT(outstanding_top_tier_functions_, 0)",
          "old_line_content": "",
          "new_line_content": "        DCHECK_GT(outstanding_top_tier_functions_, 0);",
          "content_same": false
        },
        {
          "line": 3154,
          "old_api": null,
          "new_api": "DCHECK_LT",
          "old_text": null,
          "new_text": "DCHECK_LT(0, outstanding_recompilation_functions_)",
          "old_line_content": "        outstanding_baseline_units_--;",
          "new_line_content": "        DCHECK_LT(0, outstanding_recompilation_functions_);",
          "content_same": false
        },
        {
          "line": 3160,
          "old_api": null,
          "new_api": "for_debugging",
          "old_text": null,
          "new_text": "code->for_debugging()",
          "old_line_content": "      }",
          "new_line_content": "                           ? code->for_debugging()",
          "content_same": false
        },
        {
          "line": 3161,
          "old_api": null,
          "new_api": "tier",
          "old_text": null,
          "new_text": "code->tier()",
          "old_line_content": "",
          "new_line_content": "                           : code->tier() == ExecutionTier::kTurbofan;",
          "content_same": false
        },
        {
          "line": 3164,
          "old_api": null,
          "new_api": "MissingRecompilationField::update(\n              compilation_progress_[slot_index], false)",
          "old_text": null,
          "new_text": "MissingRecompilationField::update(\n              compilation_progress_[slot_index], false)",
          "old_line_content": "        // If tiering up, accept any TurboFan code. For tiering down, look at",
          "new_line_content": "          compilation_progress_[slot_index] = MissingRecompilationField::update(",
          "content_same": false
        },
        {
          "line": 3167,
          "old_api": null,
          "new_api": "Add",
          "old_text": null,
          "new_text": "triggered_events.Add(CompilationEvent::kFinishedRecompilation)",
          "old_line_content": "        // non-debugging units.",
          "new_line_content": "            triggered_events.Add(CompilationEvent::kFinishedRecompilation);",
          "content_same": false
        },
        {
          "line": 3174,
          "old_api": null,
          "new_api": "tier",
          "old_text": null,
          "new_text": "ReachedTierField::update(\n            compilation_progress_[slot_index], code->tier())",
          "old_line_content": "              compilation_progress_[slot_index], false);",
          "new_line_content": "        compilation_progress_[slot_index] = ReachedTierField::update(",
          "content_same": false
        },
        {
          "line": 3175,
          "old_api": null,
          "new_api": "tier",
          "old_text": null,
          "new_text": "code->tier()",
          "old_line_content": "          if (outstanding_recompilation_functions_ == 0) {",
          "new_line_content": "            compilation_progress_[slot_index], code->tier());",
          "content_same": false
        },
        {
          "line": 3177,
          "old_api": null,
          "new_api": "DCHECK_LE",
          "old_text": null,
          "new_text": "DCHECK_LE(0, outstanding_baseline_units_)",
          "old_line_content": "          }",
          "new_line_content": "      DCHECK_LE(0, outstanding_baseline_units_);",
          "content_same": false
        },
        {
          "line": 3181,
          "old_api": null,
          "new_api": "TriggerCallbacks",
          "old_text": null,
          "new_text": "TriggerCallbacks(triggered_events)",
          "old_line_content": "      // Update function's compilation progress.",
          "new_line_content": "  TriggerCallbacks(triggered_events);",
          "content_same": false
        },
        {
          "line": 3187,
          "old_api": null,
          "new_api": "DCHECK_GE",
          "old_text": null,
          "new_text": "DCHECK_GE(outstanding_export_wrappers_, num)",
          "old_line_content": "    }",
          "new_line_content": "  DCHECK_GE(outstanding_export_wrappers_, num);",
          "content_same": false
        },
        {
          "line": 3189,
          "old_api": null,
          "new_api": "TriggerCallbacks",
          "old_text": null,
          "new_text": "TriggerCallbacks()",
          "old_line_content": "",
          "new_line_content": "  TriggerCallbacks();",
          "content_same": false
        },
        {
          "line": 3194,
          "old_api": null,
          "new_api": "TryLock",
          "old_text": null,
          "new_text": "callbacks_mutex_.TryLock()",
          "old_line_content": "  if (num == 0) return;",
          "new_line_content": "  DCHECK(!callbacks_mutex_.TryLock());",
          "content_same": false
        },
        {
          "line": 3197,
          "old_api": null,
          "new_api": "Add",
          "old_text": null,
          "new_text": "triggered_events.Add(CompilationEvent::kFinishedExportWrappers)",
          "old_line_content": "  outstanding_export_wrappers_ -= num;",
          "new_line_content": "    triggered_events.Add(CompilationEvent::kFinishedExportWrappers);",
          "content_same": false
        },
        {
          "line": 3199,
          "old_api": null,
          "new_api": "Add",
          "old_text": null,
          "new_text": "triggered_events.Add(CompilationEvent::kFinishedBaselineCompilation)",
          "old_line_content": "}",
          "new_line_content": "      triggered_events.Add(CompilationEvent::kFinishedBaselineCompilation);",
          "content_same": false
        },
        {
          "line": 3201,
          "old_api": null,
          "new_api": "Add",
          "old_text": null,
          "new_text": "triggered_events.Add(CompilationEvent::kFinishedTopTierCompilation)",
          "old_line_content": "void CompilationStateImpl::TriggerCallbacks(",
          "new_line_content": "        triggered_events.Add(CompilationEvent::kFinishedTopTierCompilation);",
          "content_same": false
        },
        {
          "line": 3209,
          "old_api": null,
          "new_api": "base::EnumSet<CompilationEvent>({CompilationEvent::kFailedCompilation})",
          "old_text": null,
          "new_text": "base::EnumSet<CompilationEvent>({CompilationEvent::kFailedCompilation})",
          "old_line_content": "      if (outstanding_top_tier_functions_ == 0) {",
          "new_line_content": "        base::EnumSet<CompilationEvent>({CompilationEvent::kFailedCompilation});",
          "content_same": false
        },
        {
          "line": 3212,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "triggered_events.empty()",
          "old_line_content": "    }",
          "new_line_content": "  if (triggered_events.empty()) return;",
          "content_same": false
        },
        {
          "line": 3223,
          "old_api": null,
          "new_api": "std::make_pair(CompilationEvent::kFinishedExportWrappers,\n                       \"wasm.ExportWrappersFinished\")",
          "old_text": null,
          "new_text": "std::make_pair(CompilationEvent::kFinishedExportWrappers,\n                       \"wasm.ExportWrappersFinished\")",
          "old_line_content": "  // Don't trigger past events again.",
          "new_line_content": "        std::make_pair(CompilationEvent::kFinishedExportWrappers,",
          "content_same": false
        },
        {
          "line": 3225,
          "old_api": null,
          "new_api": "std::make_pair(CompilationEvent::kFinishedBaselineCompilation,\n                       \"wasm.BaselineFinished\")",
          "old_text": null,
          "new_text": "std::make_pair(CompilationEvent::kFinishedBaselineCompilation,\n                       \"wasm.BaselineFinished\")",
          "old_line_content": "  // Recompilation can happen multiple times, thus do not store this.",
          "new_line_content": "        std::make_pair(CompilationEvent::kFinishedBaselineCompilation,",
          "content_same": false
        },
        {
          "line": 3227,
          "old_api": null,
          "new_api": "std::make_pair(CompilationEvent::kFinishedTopTierCompilation,\n                       \"wasm.TopTierFinished\")",
          "old_text": null,
          "new_text": "std::make_pair(CompilationEvent::kFinishedTopTierCompilation,\n                       \"wasm.TopTierFinished\")",
          "old_line_content": "      triggered_events - CompilationEvent::kFinishedRecompilation;",
          "new_line_content": "        std::make_pair(CompilationEvent::kFinishedTopTierCompilation,",
          "content_same": false
        },
        {
          "line": 3229,
          "old_api": null,
          "new_api": "std::make_pair(CompilationEvent::kFinishedRecompilation,\n                       \"wasm.RecompilationFinished\")",
          "old_text": null,
          "new_text": "std::make_pair(CompilationEvent::kFinishedRecompilation,\n                       \"wasm.RecompilationFinished\")",
          "old_line_content": "  for (auto event :",
          "new_line_content": "        std::make_pair(CompilationEvent::kFinishedRecompilation,",
          "content_same": false
        },
        {
          "line": 3231,
          "old_api": null,
          "new_api": "contains",
          "old_text": null,
          "new_text": "triggered_events.contains(event.first)",
          "old_line_content": "                       \"wasm.CompilationFailed\"),",
          "new_line_content": "    if (!triggered_events.contains(event.first)) continue;",
          "content_same": false
        },
        {
          "line": 3233,
          "old_api": null,
          "new_api": "TRACE_EVENT1",
          "old_text": null,
          "new_text": "TRACE_EVENT1(\"v8.wasm\", event.second, \"id\", compilation_id_)",
          "old_line_content": "                       \"wasm.ExportWrappersFinished\"),",
          "new_line_content": "    TRACE_EVENT1(\"v8.wasm\", event.second, \"id\", compilation_id_);",
          "content_same": false
        },
        {
          "line": 3235,
          "old_api": null,
          "new_api": "callback",
          "old_text": null,
          "new_text": "callback(event.first)",
          "old_line_content": "                       \"wasm.BaselineFinished\"),",
          "new_line_content": "      callback(event.first);",
          "content_same": false
        },
        {
          "line": 3243,
          "old_api": null,
          "new_api": "clear",
          "old_text": null,
          "new_text": "callbacks_.clear()",
          "old_line_content": "    for (auto& callback : callbacks_) {",
          "new_line_content": "    callbacks_.clear();",
          "content_same": false
        },
        {
          "line": 3249,
          "old_api": null,
          "new_api": "Add",
          "old_text": null,
          "new_text": "detected_features_.Add(detected)",
          "old_line_content": "      outstanding_top_tier_functions_ == 0 &&",
          "new_line_content": "  detected_features_.Add(detected);",
          "content_same": false
        },
        {
          "line": 3257,
          "old_api": null,
          "new_api": "UpdateFeatureUseCounts",
          "old_text": null,
          "new_text": "UpdateFeatureUseCounts(isolate, detected_features_)",
          "old_line_content": "  base::MutexGuard guard(&mutex_);",
          "new_line_content": "  UpdateFeatureUseCounts(isolate, detected_features_);",
          "content_same": false
        },
        {
          "line": 3262,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "unpublished_code.empty()",
          "old_line_content": "  // Notifying the isolate of the feature counts must take place under",
          "new_line_content": "  if (unpublished_code.empty()) return;",
          "content_same": false
        },
        {
          "line": 3265,
          "old_api": null,
          "new_api": "num_imported_functions",
          "old_text": null,
          "new_text": "native_module_->num_imported_functions()",
          "old_line_content": "  base::MutexGuard guard(&mutex_);",
          "new_line_content": "  int num_imported_functions = native_module_->num_imported_functions();",
          "content_same": false
        },
        {
          "line": 3268,
          "old_api": null,
          "new_api": "index",
          "old_text": null,
          "new_text": "code->index()",
          "old_line_content": "",
          "new_line_content": "    int func_index = code->index();",
          "content_same": false
        },
        {
          "line": 3269,
          "old_api": null,
          "new_api": "DCHECK_LE",
          "old_text": null,
          "new_text": "DCHECK_LE(0, func_index)",
          "old_line_content": "void CompilationStateImpl::PublishCompilationResults(",
          "new_line_content": "    DCHECK_LE(0, func_index);",
          "content_same": false
        },
        {
          "line": 3270,
          "old_api": null,
          "new_api": "num_functions",
          "old_text": null,
          "new_text": "native_module_->num_functions()",
          "old_line_content": "    std::vector<std::unique_ptr<WasmCode>> unpublished_code) {",
          "new_line_content": "    DCHECK_LT(func_index, native_module_->num_functions());",
          "content_same": false
        },
        {
          "line": 3273,
          "old_api": null,
          "new_api": "module",
          "old_text": null,
          "new_text": "native_module_->module()",
          "old_line_content": "  // For import wrapper compilation units, add result to the cache.",
          "new_line_content": "          native_module_->module()->functions[func_index].sig;",
          "content_same": false
        },
        {
          "line": 3276,
          "old_api": null,
          "new_api": "parameter_count",
          "old_text": null,
          "new_text": "sig->parameter_count()",
          "old_line_content": "  for (const auto& code : unpublished_code) {",
          "new_line_content": "          static_cast<int>(sig->parameter_count()));",
          "content_same": false
        },
        {
          "line": 3280,
          "old_api": null,
          "new_api": "DCHECK_NULL",
          "old_text": null,
          "new_text": "DCHECK_NULL((*cache)[key])",
          "old_line_content": "    if (func_index < num_imported_functions) {",
          "new_line_content": "      DCHECK_NULL((*cache)[key]);",
          "content_same": false
        },
        {
          "line": 3281,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "code.get()",
          "old_line_content": "      const FunctionSig* sig =",
          "new_line_content": "      (*cache)[key] = code.get();",
          "content_same": false
        },
        {
          "line": 3293,
          "old_api": null,
          "new_api": "HasWireBytes",
          "old_text": null,
          "new_text": "native_module_->HasWireBytes()",
          "old_line_content": "  }",
          "new_line_content": "  if (native_module_->HasWireBytes()) {",
          "content_same": false
        },
        {
          "line": 3297,
          "old_api": null,
          "new_api": "std::move(published_code)",
          "old_text": null,
          "new_text": "std::move(published_code)",
          "old_line_content": "void CompilationStateImpl::PublishCode(Vector<std::unique_ptr<WasmCode>> code) {",
          "new_line_content": "  OnFinishedUnits(VectorOf(std::move(published_code)));",
          "content_same": false
        },
        {
          "line": 3308,
          "old_api": null,
          "new_api": "std::move(c)",
          "old_text": null,
          "new_text": "std::move(c)",
          "old_line_content": "",
          "new_line_content": "        publish_queue_.emplace_back(std::move(c));",
          "content_same": false
        },
        {
          "line": 3316,
          "old_api": null,
          "new_api": "clear",
          "old_text": null,
          "new_text": "unpublished_code.clear()",
          "old_line_content": "      for (auto& c : unpublished_code) {",
          "new_line_content": "    unpublished_code.clear();",
          "content_same": false
        },
        {
          "line": 3320,
          "old_api": null,
          "new_api": "DCHECK",
          "old_text": null,
          "new_text": "DCHECK(publisher_running_)",
          "old_line_content": "    }",
          "new_line_content": "    DCHECK(publisher_running_);",
          "content_same": false
        },
        {
          "line": 3321,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "publish_queue_.empty()",
          "old_line_content": "    publisher_running_ = true;",
          "new_line_content": "    if (publish_queue_.empty()) {",
          "content_same": false
        },
        {
          "line": 3331,
          "old_api": null,
          "new_api": "load",
          "old_text": null,
          "new_text": "outstanding_js_to_wasm_wrappers_.load(std::memory_order_relaxed)",
          "old_line_content": "      publisher_running_ = false;",
          "new_line_content": "      outstanding_js_to_wasm_wrappers_.load(std::memory_order_relaxed);",
          "content_same": false
        },
        {
          "line": 3332,
          "old_api": null,
          "new_api": "GetTotalSize",
          "old_text": null,
          "new_text": "compilation_unit_queues_.GetTotalSize()",
          "old_line_content": "      return;",
          "new_line_content": "  size_t outstanding_functions = compilation_unit_queues_.GetTotalSize();",
          "content_same": false
        },
        {
          "line": 3337,
          "old_api": null,
          "new_api": "store",
          "old_text": null,
          "new_text": "compile_cancelled_.store(true, std::memory_order_relaxed)",
          "old_line_content": "",
          "new_line_content": "  compile_cancelled_.store(true, std::memory_order_relaxed);",
          "content_same": false
        },
        {
          "line": 3338,
          "old_api": null,
          "new_api": "exchange",
          "old_text": null,
          "new_text": "compile_failed_.exchange(true, std::memory_order_relaxed)",
          "old_line_content": "size_t CompilationStateImpl::NumOutstandingCompilations() const {",
          "new_line_content": "  if (compile_failed_.exchange(true, std::memory_order_relaxed)) {",
          "content_same": false
        },
        {
          "line": 3343,
          "old_api": null,
          "new_api": "TriggerCallbacks",
          "old_text": null,
          "new_text": "TriggerCallbacks()",
          "old_line_content": "}",
          "new_line_content": "  TriggerCallbacks();",
          "content_same": false
        },
        {
          "line": 3344,
          "old_api": null,
          "new_api": "clear",
          "old_text": null,
          "new_text": "callbacks_.clear()",
          "old_line_content": "",
          "new_line_content": "  callbacks_.clear();",
          "content_same": false
        },
        {
          "line": 3349,
          "old_api": null,
          "new_api": "std::make_shared<base::Semaphore>(0)",
          "old_text": null,
          "new_text": "std::make_shared<base::Semaphore>(0)",
          "old_line_content": "  }",
          "new_line_content": "  auto semaphore = std::make_shared<base::Semaphore>(0);",
          "content_same": false
        },
        {
          "line": 3350,
          "old_api": null,
          "new_api": "std::make_shared<std::atomic<bool>>(false)",
          "old_text": null,
          "new_text": "std::make_shared<std::atomic<bool>>(false)",
          "old_line_content": "",
          "new_line_content": "  auto done = std::make_shared<std::atomic<bool>>(false);",
          "content_same": false
        },
        {
          "line": 3355,
          "old_api": null,
          "new_api": "contains_any",
          "old_text": null,
          "new_text": "finished_events_.contains_any(events)",
          "old_line_content": "",
          "new_line_content": "    if (finished_events_.contains_any(events)) return;",
          "content_same": false
        },
        {
          "line": 3356,
          "old_api": null,
          "new_api": "emplace_back",
          "old_text": null,
          "new_text": "callbacks_.emplace_back([semaphore, events, done](CompilationEvent event) {\n      if (!events.contains(event)) return;\n      done->store(true, std::memory_order_relaxed);\n      semaphore->Signal();\n    })",
          "old_line_content": "void CompilationStateImpl::WaitForCompilationEvent(",
          "new_line_content": "    callbacks_.emplace_back([semaphore, events, done](CompilationEvent event) {",
          "content_same": false
        },
        {
          "line": 3357,
          "old_api": null,
          "new_api": "contains",
          "old_text": null,
          "new_text": "events.contains(event)",
          "old_line_content": "    CompilationEvent expect_event) {",
          "new_line_content": "      if (!events.contains(event)) return;",
          "content_same": false
        },
        {
          "line": 3369,
          "old_api": null,
          "new_api": "load",
          "old_text": null,
          "new_text": "done_->load(std::memory_order_relaxed)",
          "old_line_content": "    });",
          "new_line_content": "      return done_->load(std::memory_order_relaxed);",
          "content_same": false
        },
        {
          "line": 3390,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "async_counters_.get()",
          "old_line_content": "",
          "new_line_content": "  ExecuteCompilationUnits(native_module_weak_, async_counters_.get(), &delegate,",
          "content_same": false
        },
        {
          "line": 3392,
          "old_api": null,
          "new_api": "Wait",
          "old_text": null,
          "new_text": "semaphore->Wait()",
          "old_line_content": "  // Everything except for top-tier units will be processed with kBaselineOnly",
          "new_line_content": "  semaphore->Wait();",
          "content_same": false
        },
        {
          "line": 1353,
          "old_api": null,
          "new_api": "tier",
          "old_text": null,
          "new_text": "unit->tier()",
          "old_line_content": "      // results to start execution, and do not wait for a batch to fill up.",
          "new_line_content": "      bool liftoff_finished = unit->tier() != current_tier &&",
          "content_same": false
        },
        {
          "line": 1357,
          "old_api": null,
          "new_api": "native_module",
          "old_text": null,
          "new_text": "compile_scope.native_module()->AddCompiledCode(\n                VectorOf(std::move(results_to_publish)))",
          "old_line_content": "      // Without mprotect-based write protection, publish even more often,",
          "new_line_content": "            compile_scope.native_module()->AddCompiledCode(",
          "content_same": false
        },
        {
          "line": 1358,
          "old_api": null,
          "new_api": "std::move(results_to_publish)",
          "old_text": null,
          "new_text": "std::move(results_to_publish)",
          "old_line_content": "      // namely every TurboFan unit individually (no batching) to reduce",
          "new_line_content": "                VectorOf(std::move(results_to_publish)));",
          "content_same": false
        },
        {
          "line": 1359,
          "old_api": null,
          "new_api": "clear",
          "old_text": null,
          "new_text": "results_to_publish.clear()",
          "old_line_content": "      // peak memory consumption. However, with write protection, this results",
          "new_line_content": "        results_to_publish.clear();",
          "content_same": false
        },
        {
          "line": 1360,
          "old_api": null,
          "new_api": "compilation_state",
          "old_text": null,
          "new_text": "compile_scope.compilation_state()->SchedulePublishCompilationResults(\n            std::move(unpublished_code))",
          "old_line_content": "      // in a high number of page protection switches (once for each function),",
          "new_line_content": "        compile_scope.compilation_state()->SchedulePublishCompilationResults(",
          "content_same": false
        },
        {
          "line": 1361,
          "old_api": null,
          "new_api": "std::move(unpublished_code)",
          "old_text": null,
          "new_text": "std::move(unpublished_code)",
          "old_line_content": "      // incurring syscalls and lock contention, so don't do it then.",
          "new_line_content": "            std::move(unpublished_code));",
          "content_same": false
        },
        {
          "line": 3409,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "queue->size()",
          "old_line_content": "                       std::unique_ptr<JSToWasmWrapperCompilationUnit>,",
          "new_line_content": "        outstanding_units_(queue->size()) {}",
          "content_same": false
        },
        {
          "line": 3412,
          "old_api": null,
          "new_api": "pop",
          "old_text": null,
          "new_text": "queue_->pop()",
          "old_line_content": "class CompileJSToWasmWrapperJob final : public JobTask {",
          "new_line_content": "    while (base::Optional<JSToWasmWrapperKey> key = queue_->pop()) {",
          "content_same": false
        },
        {
          "line": 1365,
          "old_api": null,
          "new_api": "UNREACHABLE",
          "old_text": null,
          "new_text": "UNREACHABLE()",
          "old_line_content": "        std::vector<std::unique_ptr<WasmCode>> unpublished_code =",
          "new_line_content": "  UNREACHABLE();",
          "content_same": false
        },
        {
          "line": 3413,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "*compilation_units_)[*key].get()",
          "old_line_content": " public:",
          "new_line_content": "      JSToWasmWrapperCompilationUnit* unit = (*compilation_units_)[*key].get();",
          "content_same": false
        },
        {
          "line": 3414,
          "old_api": null,
          "new_api": "Execute",
          "old_text": null,
          "new_text": "unit->Execute()",
          "old_line_content": "  CompileJSToWasmWrapperJob(JSToWasmWrapperQueue* queue,",
          "new_line_content": "      unit->Execute();",
          "content_same": false
        },
        {
          "line": 3415,
          "old_api": null,
          "new_api": "fetch_sub",
          "old_text": null,
          "new_text": "outstanding_units_.fetch_sub(1, std::memory_order_relaxed)",
          "old_line_content": "                            JSToWasmWrapperUnitMap* compilation_units)",
          "new_line_content": "      outstanding_units_.fetch_sub(1, std::memory_order_relaxed);",
          "content_same": false
        },
        {
          "line": 3416,
          "old_api": null,
          "new_api": "ShouldYield",
          "old_text": null,
          "new_text": "delegate->ShouldYield()",
          "old_line_content": "      : queue_(queue),",
          "new_line_content": "      if (delegate && delegate->ShouldYield()) return;",
          "content_same": false
        },
        {
          "line": 1376,
          "old_api": null,
          "new_api": "module",
          "old_text": null,
          "new_text": "native_module->module()",
          "old_line_content": "",
          "new_line_content": "  for (auto exp : native_module->module()->export_table) {",
          "content_same": false
        },
        {
          "line": 1378,
          "old_api": null,
          "new_api": "module",
          "old_text": null,
          "new_text": "native_module->module()",
          "old_line_content": "",
          "new_line_content": "    auto& function = native_module->module()->functions[exp.index];",
          "content_same": false
        },
        {
          "line": 3426,
          "old_api": null,
          "new_api": "load",
          "old_text": null,
          "new_text": "outstanding_units_.load(std::memory_order_relaxed)",
          "old_line_content": "    }",
          "new_line_content": "                    outstanding_units_.load(std::memory_order_relaxed));",
          "content_same": false
        },
        {
          "line": 1380,
          "old_api": null,
          "new_api": "insert",
          "old_text": null,
          "new_text": "keys.insert(key)",
          "old_line_content": "int AddExportWrapperUnits(Isolate* isolate, WasmEngine* wasm_engine,",
          "new_line_content": "    if (keys.insert(key).second) {",
          "content_same": false
        },
        {
          "line": 1381,
          "old_api": null,
          "new_api": "module",
          "old_text": null,
          "new_text": "std::make_shared<JSToWasmWrapperCompilationUnit>(\n          isolate, wasm_engine, function.sig, native_module->module(),\n          function.imported, enabled_features,\n          JSToWasmWrapperCompilationUnit::kAllowGeneric)",
          "old_line_content": "                          NativeModule* native_module,",
          "new_line_content": "      auto unit = std::make_shared<JSToWasmWrapperCompilationUnit>(",
          "content_same": false
        },
        {
          "line": 1382,
          "old_api": null,
          "new_api": "module",
          "old_text": null,
          "new_text": "native_module->module()",
          "old_line_content": "                          CompilationUnitBuilder* builder,",
          "new_line_content": "          isolate, wasm_engine, function.sig, native_module->module(),",
          "content_same": false
        },
        {
          "line": 3438,
          "old_api": null,
          "new_api": "factory",
          "old_text": null,
          "new_text": "isolate->factory()->NewFixedArray(\n      MaxNumExportWrappers(module), AllocationType::kOld)",
          "old_line_content": " private:",
          "new_line_content": "  *export_wrappers_out = isolate->factory()->NewFixedArray(",
          "content_same": false
        },
        {
          "line": 3439,
          "old_api": null,
          "new_api": "MaxNumExportWrappers",
          "old_text": null,
          "new_text": "MaxNumExportWrappers(module)",
          "old_line_content": "  JSToWasmWrapperQueue* const queue_;",
          "new_line_content": "      MaxNumExportWrappers(module), AllocationType::kOld);",
          "content_same": false
        },
        {
          "line": 3443,
          "old_api": null,
          "new_api": "WasmFeatures::FromIsolate(isolate)",
          "old_text": null,
          "new_text": "WasmFeatures::FromIsolate(isolate)",
          "old_line_content": "}  // namespace",
          "new_line_content": "  WasmFeatures enabled_features = WasmFeatures::FromIsolate(isolate);",
          "content_same": false
        },
        {
          "line": 1400,
          "old_api": null,
          "new_api": "module",
          "old_text": null,
          "new_text": "native_module->module()",
          "old_line_content": "",
          "new_line_content": "    const FunctionSig* sig = native_module->module()->functions[func_index].sig;",
          "content_same": false
        },
        {
          "line": 1401,
          "old_api": null,
          "new_api": "module",
          "old_text": null,
          "new_text": "native_module->module()",
          "old_line_content": "// Returns the number of units added.",
          "new_line_content": "    if (!IsJSCompatibleSignature(sig, native_module->module(),",
          "content_same": false
        },
        {
          "line": 1402,
          "old_api": null,
          "new_api": "enabled_features",
          "old_text": null,
          "new_text": "native_module->enabled_features()",
          "old_line_content": "int AddImportWrapperUnits(NativeModule* native_module,",
          "new_line_content": "                                 native_module->enabled_features())) {",
          "content_same": false
        },
        {
          "line": 3450,
          "old_api": null,
          "new_api": "insert",
          "old_text": null,
          "new_text": "queue.insert(key)",
          "old_line_content": "  JSToWasmWrapperQueue queue;",
          "new_line_content": "    if (queue.insert(key)) {",
          "content_same": false
        },
        {
          "line": 3451,
          "old_api": null,
          "new_api": "wasm_engine",
          "old_text": null,
          "new_text": "std::make_unique<JSToWasmWrapperCompilationUnit>(\n          isolate, isolate->wasm_engine(), function.sig, module,\n          function.imported, enabled_features,\n          JSToWasmWrapperCompilationUnit::kAllowGeneric)",
          "old_line_content": "  JSToWasmWrapperUnitMap compilation_units;",
          "new_line_content": "      auto unit = std::make_unique<JSToWasmWrapperCompilationUnit>(",
          "content_same": false
        },
        {
          "line": 3455,
          "old_api": null,
          "new_api": "std::move(unit)",
          "old_text": null,
          "new_text": "std::move(unit)",
          "old_line_content": "  for (auto exp : module->export_table) {",
          "new_line_content": "      compilation_units.emplace(key, std::move(unit));",
          "content_same": false
        },
        {
          "line": 1408,
          "old_api": null,
          "new_api": "insert",
          "old_text": null,
          "new_text": "keys.insert(key)",
          "old_line_content": "  for (int func_index = 0; func_index < num_imported_functions; func_index++) {",
          "new_line_content": "    auto it = keys.insert(key);",
          "content_same": false
        },
        {
          "line": 1412,
          "old_api": null,
          "new_api": "import_wrapper_cache",
          "old_text": null,
          "new_text": "native_module->import_wrapper_cache()",
          "old_line_content": "      continue;",
          "new_line_content": "      (*native_module->import_wrapper_cache())[key] = nullptr;",
          "content_same": false
        },
        {
          "line": 1413,
          "old_api": null,
          "new_api": "AddUnits",
          "old_text": null,
          "new_text": "builder->AddUnits(func_index)",
          "old_line_content": "    }",
          "new_line_content": "      builder->AddUnits(func_index);",
          "content_same": false
        },
        {
          "line": 3462,
          "old_api": null,
          "new_api": "PostJob",
          "old_text": null,
          "new_text": "V8::GetCurrentPlatform()->PostJob(\n        TaskPriority::kUserVisible, std::move(job))",
          "old_line_content": "          function.imported, enabled_features,",
          "new_line_content": "    auto job_handle = V8::GetCurrentPlatform()->PostJob(",
          "content_same": false
        },
        {
          "line": 3463,
          "old_api": null,
          "new_api": "std::move(job)",
          "old_text": null,
          "new_text": "std::move(job)",
          "old_line_content": "          JSToWasmWrapperCompilationUnit::kAllowGeneric);",
          "new_line_content": "        TaskPriority::kUserVisible, std::move(job));",
          "content_same": false
        },
        {
          "line": 3466,
          "old_api": null,
          "new_api": "Join",
          "old_text": null,
          "new_text": "job_handle->Join()",
          "old_line_content": "  }",
          "new_line_content": "    job_handle->Join();",
          "content_same": false
        },
        {
          "line": 3468,
          "old_api": null,
          "new_api": "Run",
          "old_text": null,
          "new_text": "job->Run(nullptr)",
          "old_line_content": "  auto job =",
          "new_line_content": "    job->Run(nullptr);",
          "content_same": false
        },
        {
          "line": 1423,
          "old_api": null,
          "new_api": "wire_bytes",
          "old_text": null,
          "new_text": "native_module->wire_bytes()",
          "old_line_content": "    }",
          "new_line_content": "  ModuleWireBytes wire_bytes(native_module->wire_bytes());",
          "content_same": false
        },
        {
          "line": 1426,
          "old_api": null,
          "new_api": "IsTieredDown",
          "old_text": null,
          "new_text": "native_module->IsTieredDown()",
          "old_line_content": "}",
          "new_line_content": "  const bool prefer_liftoff = native_module->IsTieredDown();",
          "content_same": false
        },
        {
          "line": 3478,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "pair.second.get()",
          "old_line_content": "  }",
          "new_line_content": "    JSToWasmWrapperCompilationUnit* unit = pair.second.get();",
          "content_same": false
        },
        {
          "line": 3479,
          "old_api": null,
          "new_api": "isolate",
          "old_text": null,
          "new_text": "unit->isolate()",
          "old_line_content": "",
          "new_line_content": "    DCHECK_EQ(isolate, unit->isolate());",
          "content_same": false
        },
        {
          "line": 3480,
          "old_api": null,
          "new_api": "Finalize",
          "old_text": null,
          "new_text": "unit->Finalize()",
          "old_line_content": "  // Finalize compilation jobs in the main thread.",
          "new_line_content": "    Handle<Code> code = unit->Finalize();",
          "content_same": false
        },
        {
          "line": 3481,
          "old_api": null,
          "new_api": "GetExportWrapperIndex",
          "old_text": null,
          "new_text": "GetExportWrapperIndex(module, &key.second, key.first)",
          "old_line_content": "  // TODO(6792): Wrappers below are allocated with {Factory::NewCode}. As an",
          "new_line_content": "    int wrapper_index = GetExportWrapperIndex(module, &key.second, key.first);",
          "content_same": false
        },
        {
          "line": 3482,
          "old_api": null,
          "new_api": "set",
          "old_text": null,
          "new_text": "*export_wrappers_out)->set(wrapper_index, *code)",
          "old_line_content": "  // optimization we keep the code space unlocked to avoid repeated unlocking",
          "new_line_content": "    (*export_wrappers_out)->set(wrapper_index, *code);",
          "content_same": false
        },
        {
          "line": 3483,
          "old_api": null,
          "new_api": "counters",
          "old_text": null,
          "new_text": "isolate->counters()",
          "old_line_content": "  // because many such wrapper are allocated in sequence below.",
          "new_line_content": "    RecordStats(*code, isolate->counters());",
          "content_same": false
        },
        {
          "line": 1436,
          "old_api": null,
          "new_api": "enabled_features",
          "old_text": null,
          "new_text": "native_module->enabled_features()",
          "old_line_content": "",
          "new_line_content": "        module, native_module->enabled_features(), func_index, lazy_module);",
          "content_same": false
        },
        {
          "line": 1438,
          "old_api": null,
          "new_api": "UseLazyStub",
          "old_text": null,
          "new_text": "native_module->UseLazyStub(func_index)",
          "old_line_content": "  uint32_t end = start + module->num_declared_functions;",
          "new_line_content": "      native_module->UseLazyStub(func_index);",
          "content_same": false
        },
        {
          "line": 1440,
          "old_api": null,
          "new_api": "AddTopTierUnit",
          "old_text": null,
          "new_text": "builder.AddTopTierUnit(func_index)",
          "old_line_content": "    if (prefer_liftoff) {",
          "new_line_content": "      builder.AddTopTierUnit(func_index);",
          "content_same": false
        },
        {
          "line": 1443,
          "old_api": null,
          "new_api": "DCHECK_EQ",
          "old_text": null,
          "new_text": "DCHECK_EQ(strategy, CompileStrategy::kEager)",
          "old_line_content": "    }",
          "new_line_content": "      DCHECK_EQ(strategy, CompileStrategy::kEager);",
          "content_same": false
        },
        {
          "line": 3496,
          "old_api": null,
          "new_api": "DCHECK_NULL",
          "old_text": null,
          "new_text": "DCHECK_NULL((*cache_scope)[key])",
          "old_line_content": "WasmCode* CompileImportWrapper(",
          "new_line_content": "  DCHECK_NULL((*cache_scope)[key]);",
          "content_same": false
        },
        {
          "line": 3497,
          "old_api": null,
          "new_api": "module",
          "old_text": null,
          "new_text": "native_module->module()",
          "old_line_content": "    WasmEngine* wasm_engine, NativeModule* native_module, Counters* counters,",
          "new_line_content": "  bool source_positions = is_asmjs_module(native_module->module());",
          "content_same": false
        },
        {
          "line": 1451,
          "old_api": null,
          "new_api": "InitializeCompilationProgress",
          "old_text": null,
          "new_text": "compilation_state->InitializeCompilationProgress(\n      lazy_module, num_import_wrappers, num_export_wrappers)",
          "old_line_content": "    } else {",
          "new_line_content": "  compilation_state->InitializeCompilationProgress(",
          "content_same": false
        },
        {
          "line": 3500,
          "old_api": null,
          "new_api": "CreateCompilationEnv",
          "old_text": null,
          "new_text": "native_module->CreateCompilationEnv()",
          "old_line_content": "    WasmImportWrapperCache::ModificationScope* cache_scope) {",
          "new_line_content": "  CompilationEnv env = native_module->CreateCompilationEnv();",
          "content_same": false
        },
        {
          "line": 3501,
          "old_api": null,
          "new_api": "compiler::CompileWasmImportCallWrapper(\n      wasm_engine, &env, kind, sig, source_positions, expected_arity)",
          "old_text": null,
          "new_text": "compiler::CompileWasmImportCallWrapper(\n      wasm_engine, &env, kind, sig, source_positions, expected_arity)",
          "old_line_content": "  // Entry should exist, so that we don't insert a new one and invalidate",
          "new_line_content": "  WasmCompilationResult result = compiler::CompileWasmImportCallWrapper(",
          "content_same": false
        },
        {
          "line": 3503,
          "old_api": null,
          "new_api": "as_vector",
          "old_text": null,
          "new_text": "native_module->AddCode(\n      result.func_index, result.code_desc, result.frame_slot_count,\n      result.tagged_parameter_slots,\n      result.protected_instructions_data.as_vector(),\n      result.source_positions.as_vector(), GetCodeKind(result),\n      ExecutionTier::kNone, kNoDebugging)",
          "old_line_content": "  // yet.",
          "new_line_content": "  std::unique_ptr<WasmCode> wasm_code = native_module->AddCode(",
          "content_same": false
        },
        {
          "line": 3507,
          "old_api": null,
          "new_api": "GetCodeKind",
          "old_text": null,
          "new_text": "GetCodeKind(result)",
          "old_line_content": "  // Keep the {WasmCode} alive until we explicitly call {IncRef}.",
          "new_line_content": "      result.source_positions.as_vector(), GetCodeKind(result),",
          "content_same": false
        },
        {
          "line": 3511,
          "old_api": null,
          "new_api": "IncRef",
          "old_text": null,
          "new_text": "published_code->IncRef()",
          "old_line_content": "      wasm_engine, &env, kind, sig, source_positions, expected_arity);",
          "new_line_content": "  published_code->IncRef();",
          "content_same": false
        },
        {
          "line": 1464,
          "old_api": null,
          "new_api": "GetCompileStrategy",
          "old_text": null,
          "new_text": "GetCompileStrategy(module, enabled_features, func_index,\n                                   lazy_module)",
          "old_line_content": "",
          "new_line_content": "    SLOW_DCHECK(GetCompileStrategy(module, enabled_features, func_index,",
          "content_same": false
        },
        {
          "line": 3513,
          "old_api": null,
          "new_api": "length",
          "old_text": null,
          "new_text": "published_code->instructions().length()",
          "old_line_content": "      result.func_index, result.code_desc, result.frame_slot_count,",
          "new_line_content": "      published_code->instructions().length());",
          "content_same": false
        },
        {
          "line": 3514,
          "old_api": null,
          "new_api": "length",
          "old_text": null,
          "new_text": "published_code->reloc_info().length()",
          "old_line_content": "      result.tagged_parameter_slots,",
          "new_line_content": "  counters->wasm_reloc_size()->Increment(published_code->reloc_info().length());",
          "content_same": false
        },
        {
          "line": 1474,
          "old_api": null,
          "new_api": "explicit",
          "old_text": null,
          "new_text": "explicit",
          "old_line_content": "                                   lazy_module) != CompileStrategy::kLazy);",
          "new_line_content": "  explicit CompilationTimeCallback(",
          "content_same": false
        },
        {
          "line": 1479,
          "old_api": null,
          "new_api": "base::TimeTicks::Now()",
          "old_text": null,
          "new_text": "base::TimeTicks::Now()",
          "old_line_content": "",
          "new_line_content": "      : start_time_(base::TimeTicks::Now()),",
          "content_same": false
        },
        {
          "line": 1480,
          "old_api": null,
          "new_api": "std::move(async_counters)",
          "old_text": null,
          "new_text": "std::move(async_counters)",
          "old_line_content": "class CompilationTimeCallback {",
          "new_line_content": "        async_counters_(std::move(async_counters)),",
          "content_same": false
        },
        {
          "line": 1481,
          "old_api": null,
          "new_api": "std::move(metrics_recorder)",
          "old_text": null,
          "new_text": "std::move(metrics_recorder)",
          "old_line_content": " public:",
          "new_line_content": "        metrics_recorder_(std::move(metrics_recorder)),",
          "content_same": false
        },
        {
          "line": 1487,
          "old_api": null,
          "new_api": "base::TimeTicks::IsHighResolution()",
          "old_text": null,
          "new_text": "base::TimeTicks::IsHighResolution()",
          "old_line_content": "      std::weak_ptr<NativeModule> native_module, CompileMode compile_mode)",
          "new_line_content": "    DCHECK(base::TimeTicks::IsHighResolution());",
          "content_same": false
        },
        {
          "line": 1498,
          "old_api": null,
          "new_api": "wasm_async_compile_wasm_module_time",
          "old_text": null,
          "new_text": "async_counters_->wasm_async_compile_wasm_module_time()",
          "old_line_content": "    if (!native_module) return;",
          "new_line_content": "                ? async_counters_->wasm_async_compile_wasm_module_time()",
          "content_same": false
        },
        {
          "line": 1500,
          "old_api": null,
          "new_api": "InMicroseconds",
          "old_text": null,
          "new_text": "duration.InMicroseconds()",
          "old_line_content": "    auto duration = now - start_time_;",
          "new_line_content": "        histogram->AddSample(static_cast<int>(duration.InMicroseconds()));",
          "content_same": false
        },
        {
          "line": 1511,
          "old_api": null,
          "new_api": "liftoff_code_size",
          "old_text": null,
          "new_text": "native_module->liftoff_code_size()",
          "old_line_content": "",
          "new_line_content": "          native_module->liftoff_code_size(),      // code_size_in_bytes",
          "content_same": false
        },
        {
          "line": 1512,
          "old_api": null,
          "new_api": "liftoff_bailout_count",
          "old_text": null,
          "new_text": "native_module->liftoff_bailout_count()",
          "old_line_content": "      // TODO(sartang@microsoft.com): Remove wall_clock_time_in_us field",
          "new_line_content": "          native_module->liftoff_bailout_count(),  // liftoff_bailout_count",
          "content_same": false
        },
        {
          "line": 1513,
          "old_api": null,
          "new_api": "InMicroseconds",
          "old_text": null,
          "new_text": "duration.InMicroseconds()",
          "old_line_content": "      v8::metrics::WasmModuleCompiled event{",
          "new_line_content": "          duration.InMicroseconds()                // wall_clock_duration_in_us",
          "content_same": false
        },
        {
          "line": 1515,
          "old_api": null,
          "new_api": "DelayMainThreadEvent",
          "old_text": null,
          "new_text": "metrics_recorder_->DelayMainThreadEvent(event, context_id_)",
          "old_line_content": "          (compile_mode_ == kStreaming),           // streamed",
          "new_line_content": "      metrics_recorder_->DelayMainThreadEvent(event, context_id_);",
          "content_same": false
        },
        {
          "line": 1518,
          "old_api": null,
          "new_api": "wasm_tier_up_module_time",
          "old_text": null,
          "new_text": "async_counters_->wasm_tier_up_module_time()",
          "old_line_content": "          FLAG_wasm_lazy_compilation,              // lazy",
          "new_line_content": "      TimedHistogram* histogram = async_counters_->wasm_tier_up_module_time();",
          "content_same": false
        },
        {
          "line": 1519,
          "old_api": null,
          "new_api": "InMicroseconds",
          "old_text": null,
          "new_text": "duration.InMicroseconds()",
          "old_line_content": "          true,                                    // success",
          "new_line_content": "      histogram->AddSample(static_cast<int>(duration.InMicroseconds()));",
          "content_same": false
        },
        {
          "line": 1523,
          "old_api": null,
          "new_api": "turbofan_code_size",
          "old_text": null,
          "new_text": "native_module->turbofan_code_size()",
          "old_line_content": "      };",
          "new_line_content": "          native_module->turbofan_code_size(),  // code_size_in_bytes",
          "content_same": false
        },
        {
          "line": 1526,
          "old_api": null,
          "new_api": "DelayMainThreadEvent",
          "old_text": null,
          "new_text": "metrics_recorder_->DelayMainThreadEvent(event, context_id_)",
          "old_line_content": "    if (event == CompilationEvent::kFinishedTopTierCompilation) {",
          "new_line_content": "      metrics_recorder_->DelayMainThreadEvent(event, context_id_);",
          "content_same": false
        },
        {
          "line": 1536,
          "old_api": null,
          "new_api": "liftoff_code_size",
          "old_text": null,
          "new_text": "native_module->liftoff_code_size()",
          "old_line_content": "    }",
          "new_line_content": "          native_module->liftoff_code_size(),      // code_size_in_bytes",
          "content_same": false
        },
        {
          "line": 1537,
          "old_api": null,
          "new_api": "liftoff_bailout_count",
          "old_text": null,
          "new_text": "native_module->liftoff_bailout_count()",
          "old_line_content": "    if (event == CompilationEvent::kFailedCompilation) {",
          "new_line_content": "          native_module->liftoff_bailout_count(),  // liftoff_bailout_count",
          "content_same": false
        },
        {
          "line": 1538,
          "old_api": null,
          "new_api": "InMicroseconds",
          "old_text": null,
          "new_text": "duration.InMicroseconds()",
          "old_line_content": "      v8::metrics::WasmModuleCompiled event{",
          "new_line_content": "          duration.InMicroseconds()                // wall_clock_duration_in_us",
          "content_same": false
        },
        {
          "line": 1540,
          "old_api": null,
          "new_api": "DelayMainThreadEvent",
          "old_text": null,
          "new_text": "metrics_recorder_->DelayMainThreadEvent(event, context_id_)",
          "old_line_content": "          (compile_mode_ == kStreaming),           // streamed",
          "new_line_content": "      metrics_recorder_->DelayMainThreadEvent(event, context_id_);",
          "content_same": false
        },
        {
          "line": 1558,
          "old_api": null,
          "new_api": "CHECK",
          "old_text": null,
          "new_text": "CHECK(!FLAG_jitless)",
          "old_line_content": "  std::weak_ptr<NativeModule> native_module_;",
          "new_line_content": "  CHECK(!FLAG_jitless);",
          "content_same": false
        },
        {
          "line": 1559,
          "old_api": null,
          "new_api": "wire_bytes",
          "old_text": null,
          "new_text": "native_module->wire_bytes()",
          "old_line_content": "  const CompileMode compile_mode_;",
          "new_line_content": "  ModuleWireBytes wire_bytes(native_module->wire_bytes());",
          "content_same": false
        },
        {
          "line": 1560,
          "old_api": null,
          "new_api": "IsLazyModule",
          "old_text": null,
          "new_text": "IsLazyModule(wasm_module)",
          "old_line_content": "};",
          "new_line_content": "  const bool lazy_module = IsLazyModule(wasm_module);",
          "content_same": false
        },
        {
          "line": 1562,
          "old_api": null,
          "new_api": "enabled_features",
          "old_text": null,
          "new_text": "native_module->enabled_features()",
          "old_line_content": "void CompileNativeModule(Isolate* isolate,",
          "new_line_content": "      MayCompriseLazyFunctions(wasm_module, native_module->enabled_features(),",
          "content_same": false
        },
        {
          "line": 1574,
          "old_api": null,
          "new_api": "module",
          "old_text": null,
          "new_text": "native_module->module()",
          "old_line_content": "    // asm.js modules as these are valid by construction (additionally a CHECK",
          "new_line_content": "  DCHECK_GE(kMaxInt, native_module->module()->num_declared_functions);",
          "content_same": false
        },
        {
          "line": 1578,
          "old_api": null,
          "new_api": "base::TimeTicks::IsHighResolution()",
          "old_text": null,
          "new_text": "base::TimeTicks::IsHighResolution()",
          "old_line_content": "                         kOnlyLazyFunctions);",
          "new_line_content": "  if (base::TimeTicks::IsHighResolution()) {",
          "content_same": false
        },
        {
          "line": 1579,
          "old_api": null,
          "new_api": "AddCallback",
          "old_text": null,
          "new_text": "compilation_state->AddCallback(CompilationTimeCallback{\n        isolate->async_counters(), isolate->metrics_recorder(), context_id,\n        native_module, CompilationTimeCallback::kSynchronous})",
          "old_line_content": "    // On error: Return and leave the module in an unexecutable state.",
          "new_line_content": "    compilation_state->AddCallback(CompilationTimeCallback{",
          "content_same": false
        },
        {
          "line": 1585,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "native_module.get()",
          "old_line_content": "  // The callback captures a shared ptr to the semaphore.",
          "new_line_content": "  InitializeCompilationUnits(isolate, native_module.get());",
          "content_same": false
        },
        {
          "line": 1590,
          "old_api": null,
          "new_api": "failed",
          "old_text": null,
          "new_text": "compilation_state->failed()",
          "old_line_content": "        native_module, CompilationTimeCallback::kSynchronous});",
          "new_line_content": "  if (compilation_state->failed()) {",
          "content_same": false
        },
        {
          "line": 1591,
          "old_api": null,
          "new_api": "DCHECK_IMPLIES",
          "old_text": null,
          "new_text": "DCHECK_IMPLIES(lazy_module, !FLAG_wasm_lazy_validation)",
          "old_line_content": "  }",
          "new_line_content": "    DCHECK_IMPLIES(lazy_module, !FLAG_wasm_lazy_validation);",
          "content_same": false
        },
        {
          "line": 1592,
          "old_api": null,
          "new_api": "counters",
          "old_text": null,
          "new_text": "isolate->counters()",
          "old_line_content": "",
          "new_line_content": "    ValidateSequentially(wasm_module, native_module.get(), isolate->counters(),",
          "content_same": false
        },
        {
          "line": 1593,
          "old_api": null,
          "new_api": "allocator",
          "old_text": null,
          "new_text": "isolate->allocator()",
          "old_line_content": "  // Initialize the compilation units and kick off background compile tasks.",
          "new_line_content": "                         isolate->allocator(), thrower, lazy_module);",
          "content_same": false
        },
        {
          "line": 1605,
          "old_api": null,
          "new_api": "WaitForCompilationEvent",
          "old_text": null,
          "new_text": "compilation_state->WaitForCompilationEvent(\n      CompilationEvent::kFinishedBaselineCompilation)",
          "old_line_content": "  }",
          "new_line_content": "  compilation_state->WaitForCompilationEvent(",
          "content_same": false
        },
        {
          "line": 1608,
          "old_api": null,
          "new_api": "PublishDetectedFeatures",
          "old_text": null,
          "new_text": "compilation_state->PublishDetectedFeatures(isolate)",
          "old_line_content": "    // For predictable mode, do not finalize wrappers yet to make sure we catch",
          "new_line_content": "  compilation_state->PublishDetectedFeatures(isolate);",
          "content_same": false
        },
        {
          "line": 1612,
          "old_api": null,
          "new_api": "counters",
          "old_text": null,
          "new_text": "isolate->counters()",
          "old_line_content": "  }",
          "new_line_content": "    ValidateSequentially(wasm_module, native_module.get(), isolate->counters(),",
          "content_same": false
        },
        {
          "line": 1613,
          "old_api": null,
          "new_api": "allocator",
          "old_text": null,
          "new_text": "isolate->allocator()",
          "old_line_content": "",
          "new_line_content": "                         isolate->allocator(), thrower, lazy_module);",
          "content_same": false
        },
        {
          "line": 1616,
          "old_api": null,
          "new_api": "FinalizeJSToWasmWrappers",
          "old_text": null,
          "new_text": "compilation_state->FinalizeJSToWasmWrappers(\n        isolate, native_module->module(), export_wrappers_out)",
          "old_line_content": "",
          "new_line_content": "    compilation_state->FinalizeJSToWasmWrappers(",
          "content_same": false
        },
        {
          "line": 1627,
          "old_api": null,
          "new_api": "GetBarrierForBackgroundCompile",
          "old_text": null,
          "new_text": "engine->GetBarrierForBackgroundCompile()",
          "old_line_content": "  }",
          "new_line_content": "        engine_barrier_(engine->GetBarrierForBackgroundCompile()),",
          "content_same": false
        },
        {
          "line": 1628,
          "old_api": null,
          "new_api": "std::move(async_counters)",
          "old_text": null,
          "new_text": "std::move(async_counters)",
          "old_line_content": "}",
          "new_line_content": "        async_counters_(std::move(async_counters)) {}",
          "content_same": false
        },
        {
          "line": 1631,
          "old_api": null,
          "new_api": "TryLock",
          "old_text": null,
          "new_text": "engine_barrier_->TryLock()",
          "old_line_content": " public:",
          "new_line_content": "    auto engine_scope = engine_barrier_->TryLock();",
          "content_same": false
        },
        {
          "line": 1633,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "async_counters_.get()",
          "old_line_content": "                                WasmEngine* engine,",
          "new_line_content": "    ExecuteCompilationUnits(native_module_, async_counters_.get(), delegate,",
          "content_same": false
        },
        {
          "line": 1639,
          "old_api": null,
          "new_api": "cancelled",
          "old_text": null,
          "new_text": "compile_scope.cancelled()",
          "old_line_content": "  void Run(JobDelegate* delegate) override {",
          "new_line_content": "    if (compile_scope.cancelled()) return 0;",
          "content_same": false
        },
        {
          "line": 1643,
          "old_api": null,
          "new_api": "static_cast<size_t>(FLAG_wasm_num_compilation_tasks)",
          "old_text": null,
          "new_text": "static_cast<size_t>(FLAG_wasm_num_compilation_tasks)",
          "old_line_content": "                            kBaselineOrTopTier);",
          "new_line_content": "        static_cast<size_t>(FLAG_wasm_num_compilation_tasks),",
          "content_same": false
        },
        {
          "line": 1645,
          "old_api": null,
          "new_api": "compilation_state",
          "old_text": null,
          "new_text": "compile_scope.compilation_state()->NumOutstandingCompilations()",
          "old_line_content": "",
          "new_line_content": "            compile_scope.compilation_state()->NumOutstandingCompilations());",
          "content_same": false
        },
        {
          "line": 1660,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "module.get()",
          "old_line_content": "  const std::shared_ptr<Counters> async_counters_;",
          "new_line_content": "  const WasmModule* wasm_module = module.get();",
          "content_same": false
        },
        {
          "line": 1662,
          "old_api": null,
          "new_api": "module_bytes",
          "old_text": null,
          "new_text": "wire_bytes.module_bytes()",
          "old_line_content": "",
          "new_line_content": "      OwnedVector<uint8_t>::Of(wire_bytes.module_bytes());",
          "content_same": false
        },
        {
          "line": 1668,
          "old_api": null,
          "new_api": "as_vector",
          "old_text": null,
          "new_text": "isolate->wasm_engine()->MaybeGetNativeModule(\n          wasm_module->origin, wire_bytes_copy.as_vector(), isolate)",
          "old_line_content": "    Handle<FixedArray>* export_wrappers_out, int compilation_id) {",
          "new_line_content": "      isolate->wasm_engine()->MaybeGetNativeModule(",
          "content_same": false
        },
        {
          "line": 1672,
          "old_api": null,
          "new_api": "CompileJsToWasmWrappers",
          "old_text": null,
          "new_text": "CompileJsToWasmWrappers(isolate, wasm_module, export_wrappers_out)",
          "old_line_content": "  // Prefer {wire_bytes_copy} to {wire_bytes.module_bytes()} for the temporary",
          "new_line_content": "    CompileJsToWasmWrappers(isolate, wasm_module, export_wrappers_out);",
          "content_same": false
        },
        {
          "line": 1676,
          "old_api": null,
          "new_api": "counters",
          "old_text": null,
          "new_text": "SELECT_WASM_COUNTER(\n      isolate->counters(), wasm_module->origin, wasm_compile, module_time)",
          "old_line_content": "  std::shared_ptr<NativeModule> native_module =",
          "new_line_content": "  TimedHistogramScope wasm_compile_module_time_scope(SELECT_WASM_COUNTER(",
          "content_same": false
        },
        {
          "line": 1687,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "module.get()",
          "old_line_content": "",
          "new_line_content": "      wasm::WasmCodeManager::EstimateNativeModuleCodeSize(module.get(),",
          "content_same": false
        },
        {
          "line": 1689,
          "old_api": null,
          "new_api": "wasm_engine",
          "old_text": null,
          "new_text": "isolate->wasm_engine()->NewNativeModule(\n      isolate, enabled, module, code_size_estimate)",
          "old_line_content": "  if (wasm_module->has_shared_memory) {",
          "new_line_content": "  native_module = isolate->wasm_engine()->NewNativeModule(",
          "content_same": false
        },
        {
          "line": 1691,
          "old_api": null,
          "new_api": "std::move(wire_bytes_copy)",
          "old_text": null,
          "new_text": "std::move(wire_bytes_copy)",
          "old_line_content": "  }",
          "new_line_content": "  native_module->SetWireBytes(std::move(wire_bytes_copy));",
          "content_same": false
        },
        {
          "line": 1692,
          "old_api": null,
          "new_api": "compilation_state",
          "old_text": null,
          "new_text": "native_module->compilation_state()->set_compilation_id(compilation_id)",
          "old_line_content": "",
          "new_line_content": "  native_module->compilation_state()->set_compilation_id(compilation_id);",
          "content_same": false
        },
        {
          "line": 1694,
          "old_api": null,
          "new_api": "compilation_state",
          "old_text": null,
          "new_text": "native_module->compilation_state()->SetHighPriority()",
          "old_line_content": "  const bool uses_liftoff = module->origin == kWasmOrigin && FLAG_liftoff;",
          "new_line_content": "  native_module->compilation_state()->SetHighPriority();",
          "content_same": false
        },
        {
          "line": 1697,
          "old_api": null,
          "new_api": "native_context",
          "old_text": null,
          "new_text": "isolate->native_context()",
          "old_line_content": "                                                          uses_liftoff);",
          "new_line_content": "      isolate->GetOrRegisterRecorderContextId(isolate->native_context());",
          "content_same": false
        },
        {
          "line": 1702,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "thrower->error()",
          "old_line_content": "  // Sync compilation is user blocking, so we increase the priority.",
          "new_line_content": "  if (thrower->error()) return {};",
          "content_same": false
        },
        {
          "line": 1705,
          "old_api": null,
          "new_api": "CompileJsToWasmWrappers",
          "old_text": null,
          "new_text": "CompileJsToWasmWrappers(isolate, wasm_module, export_wrappers_out)",
          "old_line_content": "  v8::metrics::Recorder::ContextId context_id =",
          "new_line_content": "    CompileJsToWasmWrappers(isolate, wasm_module, export_wrappers_out);",
          "content_same": false
        },
        {
          "line": 1718,
          "old_api": null,
          "new_api": "std::make_shared<base::Semaphore>(0)",
          "old_text": null,
          "new_text": "std::make_shared<base::Semaphore>(0)",
          "old_line_content": "  // Ensure that the code objects are logged before returning.",
          "new_line_content": "  auto recompilation_finished_semaphore = std::make_shared<base::Semaphore>(0);",
          "content_same": false
        },
        {
          "line": 1723,
          "old_api": null,
          "new_api": "InitializeRecompilation",
          "old_text": null,
          "new_text": "compilation_state->InitializeRecompilation(\n      tiering_state,\n      [recompilation_finished_semaphore](CompilationEvent event) {\n        DCHECK_NE(CompilationEvent::kFailedCompilation, event);\n        if (event == CompilationEvent::kFinishedRecompilation) {\n          recompilation_finished_semaphore->Signal();\n        }\n      })",
          "old_line_content": "",
          "new_line_content": "  compilation_state->InitializeRecompilation(",
          "content_same": false
        },
        {
          "line": 1726,
          "old_api": null,
          "new_api": "DCHECK_NE",
          "old_text": null,
          "new_text": "DCHECK_NE(CompilationEvent::kFailedCompilation, event)",
          "old_line_content": "  // Install a callback to notify us once background recompilation finished.",
          "new_line_content": "        DCHECK_NE(CompilationEvent::kFailedCompilation, event);",
          "content_same": false
        },
        {
          "line": 1733,
          "old_api": null,
          "new_api": "native_module_weak",
          "old_text": null,
          "new_text": "compilation_state->native_module_weak()",
          "old_line_content": "      tiering_state,",
          "new_line_content": "  ExecuteCompilationUnits(compilation_state->native_module_weak(),",
          "content_same": false
        },
        {
          "line": 1734,
          "old_api": null,
          "new_api": "counters",
          "old_text": null,
          "new_text": "compilation_state->counters()",
          "old_line_content": "      [recompilation_finished_semaphore](CompilationEvent event) {",
          "new_line_content": "                          compilation_state->counters(), kNoDelegate,",
          "content_same": false
        },
        {
          "line": 1736,
          "old_api": null,
          "new_api": "Wait",
          "old_text": null,
          "new_text": "recompilation_finished_semaphore->Wait()",
          "old_line_content": "        if (event == CompilationEvent::kFinishedRecompilation) {",
          "new_line_content": "  recompilation_finished_semaphore->Wait();",
          "content_same": false
        },
        {
          "line": 1749,
          "old_api": null,
          "new_api": "base::TimeTicks::Now()",
          "old_text": null,
          "new_text": "base::TimeTicks::Now()",
          "old_line_content": "AsyncCompileJob::AsyncCompileJob(",
          "new_line_content": "      start_time_(base::TimeTicks::Now()),",
          "content_same": false
        },
        {
          "line": 1750,
          "old_api": null,
          "new_api": "std::move(bytes_copy)",
          "old_text": null,
          "new_text": "std::move(bytes_copy)",
          "old_line_content": "    Isolate* isolate, const WasmFeatures& enabled,",
          "new_line_content": "      bytes_copy_(std::move(bytes_copy)),",
          "content_same": false
        },
        {
          "line": 1751,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "bytes_copy_.get()",
          "old_line_content": "    std::unique_ptr<byte[]> bytes_copy, size_t length, Handle<Context> context,",
          "new_line_content": "      wire_bytes_(bytes_copy_.get(), bytes_copy_.get() + length),",
          "content_same": false
        },
        {
          "line": 1752,
          "old_api": null,
          "new_api": "std::move(resolver)",
          "old_text": null,
          "new_text": "std::move(resolver)",
          "old_line_content": "    Handle<Context> incumbent_context, const char* api_method_name,",
          "new_line_content": "      resolver_(std::move(resolver)),",
          "content_same": false
        },
        {
          "line": 1754,
          "old_api": null,
          "new_api": "TRACE_DISABLED_BY_DEFAULT",
          "old_text": null,
          "new_text": "TRACE_DISABLED_BY_DEFAULT(\"v8.wasm.detailed\")",
          "old_line_content": "    : isolate_(isolate),",
          "new_line_content": "  TRACE_EVENT0(TRACE_DISABLED_BY_DEFAULT(\"v8.wasm.detailed\"),",
          "content_same": false
        },
        {
          "line": 1756,
          "old_api": null,
          "new_api": "CHECK",
          "old_text": null,
          "new_text": "CHECK(FLAG_wasm_async_compilation)",
          "old_line_content": "      enabled_features_(enabled),",
          "new_line_content": "  CHECK(FLAG_wasm_async_compilation);",
          "content_same": false
        },
        {
          "line": 1757,
          "old_api": null,
          "new_api": "CHECK",
          "old_text": null,
          "new_text": "CHECK(!FLAG_jitless)",
          "old_line_content": "      wasm_lazy_compilation_(FLAG_wasm_lazy_compilation),",
          "new_line_content": "  CHECK(!FLAG_jitless);",
          "content_same": false
        },
        {
          "line": 1762,
          "old_api": null,
          "new_api": "native_context",
          "old_text": null,
          "new_text": "context->native_context()",
          "old_line_content": "      compilation_id_(compilation_id) {",
          "new_line_content": "      isolate->global_handles()->Create(context->native_context());",
          "content_same": false
        },
        {
          "line": 1764,
          "old_api": null,
          "new_api": "IsNativeContext",
          "old_text": null,
          "new_text": "native_context_->IsNativeContext()",
          "old_line_content": "               \"wasm.AsyncCompileJob\");",
          "new_line_content": "  DCHECK(native_context_->IsNativeContext());",
          "content_same": false
        },
        {
          "line": 1770,
          "old_api": null,
          "new_api": "counters",
          "old_text": null,
          "new_text": "isolate_->counters()",
          "old_line_content": "  native_context_ =",
          "new_line_content": "  DoAsync<DecodeModule>(isolate_->counters(),",
          "content_same": false
        },
        {
          "line": 1777,
          "old_api": null,
          "new_api": "wasm_engine",
          "old_text": null,
          "new_text": "isolate_->wasm_engine()->RemoveCompileJob(this)",
          "old_line_content": "",
          "new_line_content": "  isolate_->wasm_engine()->RemoveCompileJob(this);",
          "content_same": false
        },
        {
          "line": 1782,
          "old_api": null,
          "new_api": "explicit",
          "old_text": null,
          "new_text": "explicit",
          "old_line_content": "",
          "new_line_content": "  explicit AsyncStreamingProcessor(AsyncCompileJob* job,",
          "content_same": false
        },
        {
          "line": 1837,
          "old_api": null,
          "new_api": "DCHECK_NULL",
          "old_text": null,
          "new_text": "DCHECK_NULL(stream_)",
          "old_line_content": "  AccountingAllocator* allocator_;",
          "new_line_content": "  DCHECK_NULL(stream_);",
          "content_same": false
        },
        {
          "line": 1838,
          "old_api": null,
          "new_api": "async_counters",
          "old_text": null,
          "new_text": "StreamingDecoder::CreateAsyncStreamingDecoder(\n      std::make_unique<AsyncStreamingProcessor>(\n          this, isolate_->async_counters(), isolate_->allocator()))",
          "old_line_content": "",
          "new_line_content": "  stream_ = StreamingDecoder::CreateAsyncStreamingDecoder(",
          "content_same": false
        },
        {
          "line": 1839,
          "old_api": null,
          "new_api": "async_counters",
          "old_text": null,
          "new_text": "std::make_unique<AsyncStreamingProcessor>(\n          this, isolate_->async_counters(), isolate_->allocator())",
          "old_line_content": "  // Running hash of the wire bytes up to code section size, but excluding the",
          "new_line_content": "      std::make_unique<AsyncStreamingProcessor>(",
          "content_same": false
        },
        {
          "line": 1840,
          "old_api": null,
          "new_api": "allocator",
          "old_text": null,
          "new_text": "isolate_->allocator()",
          "old_line_content": "  // code section itself. Used by the {NativeModuleCache} to detect potential",
          "new_line_content": "          this, isolate_->async_counters(), isolate_->allocator()));",
          "content_same": false
        },
        {
          "line": 1856,
          "old_api": null,
          "new_api": "NotifyCompilationEnded",
          "old_text": null,
          "new_text": "stream_->NotifyCompilationEnded()",
          "old_line_content": "  // If initial compilation did not finish yet we can abort it.",
          "new_line_content": "  if (stream_) stream_->NotifyCompilationEnded();",
          "content_same": false
        },
        {
          "line": 1857,
          "old_api": null,
          "new_api": "CancelPendingForegroundTask",
          "old_text": null,
          "new_text": "CancelPendingForegroundTask()",
          "old_line_content": "  if (native_module_) {",
          "new_line_content": "  CancelPendingForegroundTask();",
          "content_same": false
        },
        {
          "line": 1859,
          "old_api": null,
          "new_api": "location",
          "old_text": null,
          "new_text": "incumbent_context_.location()",
          "old_line_content": "        ->CancelCompilation(CompilationStateImpl::kCancelInitialCompilation);",
          "new_line_content": "  isolate_->global_handles()->Destroy(incumbent_context_.location());",
          "content_same": false
        },
        {
          "line": 1860,
          "old_api": null,
          "new_api": "is_null",
          "old_text": null,
          "new_text": "module_object_.is_null()",
          "old_line_content": "  }",
          "new_line_content": "  if (!module_object_.is_null()) {",
          "content_same": false
        },
        {
          "line": 1861,
          "old_api": null,
          "new_api": "location",
          "old_text": null,
          "new_text": "module_object_.location()",
          "old_line_content": "  // Tell the streaming decoder that the AsyncCompileJob is not available",
          "new_line_content": "    isolate_->global_handles()->Destroy(module_object_.location());",
          "content_same": false
        },
        {
          "line": 1879,
          "old_api": null,
          "new_api": "std::move(module)",
          "old_text": null,
          "new_text": "std::move(module)",
          "old_line_content": "  }",
          "new_line_content": "      isolate_, enabled_features_, std::move(module), code_size_estimate);",
          "content_same": false
        },
        {
          "line": 1880,
          "old_api": null,
          "new_api": "length",
          "old_text": null,
          "new_text": "wire_bytes_.length()",
          "old_line_content": "",
          "new_line_content": "  native_module_->SetWireBytes({std::move(bytes_copy_), wire_bytes_.length()});",
          "content_same": false
        },
        {
          "line": 1881,
          "old_api": null,
          "new_api": "compilation_state",
          "old_text": null,
          "new_text": "native_module_->compilation_state()->set_compilation_id(compilation_id_)",
          "old_line_content": "  // TODO(wasm): Improve efficiency of storing module wire bytes. Only store",
          "new_line_content": "  native_module_->compilation_state()->set_compilation_id(compilation_id_);",
          "content_same": false
        },
        {
          "line": 1886,
          "old_api": null,
          "new_api": "module_bytes",
          "old_text": null,
          "new_text": "isolate_->wasm_engine()->MaybeGetNativeModule(\n      module->origin, wire_bytes_.module_bytes(), isolate_)",
          "old_line_content": "",
          "new_line_content": "  native_module_ = isolate_->wasm_engine()->MaybeGetNativeModule(",
          "content_same": false
        },
        {
          "line": 1899,
          "old_api": null,
          "new_api": "Vector<const char>()",
          "old_text": null,
          "new_text": "Vector<const char>()",
          "old_line_content": "    return false;",
          "new_line_content": "  auto source_url = stream_ ? stream_->url() : Vector<const char>();",
          "content_same": false
        },
        {
          "line": 1900,
          "old_api": null,
          "new_api": "wasm_engine",
          "old_text": null,
          "new_text": "isolate_->wasm_engine()->GetOrCreateScript(\n      isolate_, native_module_, source_url)",
          "old_line_content": "  }",
          "new_line_content": "  auto script = isolate_->wasm_engine()->GetOrCreateScript(",
          "content_same": false
        },
        {
          "line": 1903,
          "old_api": null,
          "new_api": "WasmModuleObject::New(isolate_, native_module_, script)",
          "old_text": null,
          "new_text": "WasmModuleObject::New(isolate_, native_module_, script)",
          "old_line_content": "",
          "new_line_content": "      WasmModuleObject::New(isolate_, native_module_, script);",
          "content_same": false
        },
        {
          "line": 1905,
          "old_api": null,
          "new_api": "global_handles",
          "old_text": null,
          "new_text": "isolate_->global_handles()->Create(*module_object)",
          "old_line_content": "  // Create heap objects for script and module bytes to be stored in the",
          "new_line_content": "  module_object_ = isolate_->global_handles()->Create(*module_object);",
          "content_same": false
        },
        {
          "line": 1911,
          "old_api": null,
          "new_api": "TRACE_DISABLED_BY_DEFAULT",
          "old_text": null,
          "new_text": "TRACE_DISABLED_BY_DEFAULT(\"v8.wasm.detailed\")",
          "old_line_content": "  Handle<WasmModuleObject> module_object =",
          "new_line_content": "  TRACE_EVENT0(TRACE_DISABLED_BY_DEFAULT(\"v8.wasm.detailed\"),",
          "content_same": false
        },
        {
          "line": 1913,
          "old_api": null,
          "new_api": "is_null",
          "old_text": null,
          "new_text": "module_object_.is_null()",
          "old_line_content": "",
          "new_line_content": "  bool is_after_deserialization = !module_object_.is_null();",
          "content_same": false
        },
        {
          "line": 1917,
          "old_api": null,
          "new_api": "NotifyNativeModuleCreated",
          "old_text": null,
          "new_text": "stream_->NotifyNativeModuleCreated(native_module_)",
          "old_line_content": "// This function assumes that it is executed in a HandleScope, and that a",
          "new_line_content": "      stream_->NotifyNativeModuleCreated(native_module_);",
          "content_same": false
        },
        {
          "line": 1919,
          "old_api": null,
          "new_api": "PrepareRuntimeObjects",
          "old_text": null,
          "new_text": "PrepareRuntimeObjects()",
          "old_line_content": "void AsyncCompileJob::FinishCompile(bool is_after_cache_hit) {",
          "new_line_content": "    PrepareRuntimeObjects();",
          "content_same": false
        },
        {
          "line": 1924,
          "old_api": null,
          "new_api": "base::TimeTicks::Now()",
          "old_text": null,
          "new_text": "base::TimeTicks::Now()",
          "old_line_content": "  if (!is_after_deserialization) {",
          "new_line_content": "    base::TimeDelta duration = base::TimeTicks::Now() - start_time_;",
          "content_same": false
        },
        {
          "line": 1925,
          "old_api": null,
          "new_api": "InMicroseconds",
          "old_text": null,
          "new_text": "duration.InMicroseconds()",
          "old_line_content": "    if (stream_) {",
          "new_line_content": "    int duration_usecs = static_cast<int>(duration.InMicroseconds());",
          "content_same": false
        },
        {
          "line": 1936,
          "old_api": null,
          "new_api": "failed",
          "old_text": null,
          "new_text": "compilation_state->failed()",
          "old_line_content": "        duration_usecs);",
          "new_line_content": "          !compilation_state->failed(),             // success",
          "content_same": false
        },
        {
          "line": 1937,
          "old_api": null,
          "new_api": "liftoff_code_size",
          "old_text": null,
          "new_text": "native_module_->liftoff_code_size()",
          "old_line_content": "",
          "new_line_content": "          native_module_->liftoff_code_size(),      // code_size_in_bytes",
          "content_same": false
        },
        {
          "line": 1938,
          "old_api": null,
          "new_api": "liftoff_bailout_count",
          "old_text": null,
          "new_text": "native_module_->liftoff_bailout_count()",
          "old_line_content": "    if (is_after_cache_hit || is_after_deserialization) {",
          "new_line_content": "          native_module_->liftoff_bailout_count(),  // liftoff_bailout_count",
          "content_same": false
        },
        {
          "line": 1939,
          "old_api": null,
          "new_api": "InMicroseconds",
          "old_text": null,
          "new_text": "duration.InMicroseconds()",
          "old_line_content": "      v8::metrics::WasmModuleCompiled event{",
          "new_line_content": "          duration.InMicroseconds()                 // wall_clock_duration_in_us",
          "content_same": false
        },
        {
          "line": 1941,
          "old_api": null,
          "new_api": "metrics_recorder",
          "old_text": null,
          "new_text": "isolate_->metrics_recorder()->DelayMainThreadEvent(event, context_id_)",
          "old_line_content": "          true,                                     // streamed",
          "new_line_content": "      isolate_->metrics_recorder()->DelayMainThreadEvent(event, context_id_);",
          "content_same": false
        },
        {
          "line": 1949,
          "old_api": null,
          "new_api": "type",
          "old_text": null,
          "new_text": "script->type()",
          "old_line_content": "      };",
          "new_line_content": "  if (script->type() == Script::TYPE_WASM &&",
          "content_same": false
        },
        {
          "line": 1951,
          "old_api": null,
          "new_api": "is_empty",
          "old_text": null,
          "new_text": "module->debug_symbols.external_url.is_empty()",
          "old_line_content": "    }",
          "new_line_content": "      !module->debug_symbols.external_url.is_empty()) {",
          "content_same": false
        },
        {
          "line": 1952,
          "old_api": null,
          "new_api": "native_module",
          "old_text": null,
          "new_text": "module_object_->native_module()->wire_bytes()",
          "old_line_content": "  }",
          "new_line_content": "    ModuleWireBytes wire_bytes(module_object_->native_module()->wire_bytes());",
          "content_same": false
        },
        {
          "line": 1953,
          "old_api": null,
          "new_api": "GetNameOrNull",
          "old_text": null,
          "new_text": "isolate_->factory()->NewStringFromUtf8(\n        wire_bytes.GetNameOrNull(module->debug_symbols.external_url),\n        AllocationType::kOld)",
          "old_line_content": "",
          "new_line_content": "    MaybeHandle<String> src_map_str = isolate_->factory()->NewStringFromUtf8(",
          "content_same": false
        },
        {
          "line": 1959,
          "old_api": null,
          "new_api": "TRACE_DISABLED_BY_DEFAULT",
          "old_text": null,
          "new_text": "TRACE_DISABLED_BY_DEFAULT(\"v8.wasm.detailed\")",
          "old_line_content": "      module->debug_symbols.type == WasmDebugSymbols::Type::SourceMap &&",
          "new_line_content": "    TRACE_EVENT0(TRACE_DISABLED_BY_DEFAULT(\"v8.wasm.detailed\"),",
          "content_same": false
        },
        {
          "line": 1972,
          "old_api": null,
          "new_api": "FinalizeJSToWasmWrappers",
          "old_text": null,
          "new_text": "compilation_state->FinalizeJSToWasmWrappers(isolate_, module,\n                                                  &export_wrappers)",
          "old_line_content": "",
          "new_line_content": "      compilation_state->FinalizeJSToWasmWrappers(isolate_, module,",
          "content_same": false
        },
        {
          "line": 1975,
          "old_api": null,
          "new_api": "set_export_wrappers",
          "old_text": null,
          "new_text": "module_object_->set_export_wrappers(*export_wrappers)",
          "old_line_content": "  if (!is_after_deserialization) {",
          "new_line_content": "    module_object_->set_export_wrappers(*export_wrappers);",
          "content_same": false
        },
        {
          "line": 1978,
          "old_api": null,
          "new_api": "PublishDetectedFeatures",
          "old_text": null,
          "new_text": "compilation_state->PublishDetectedFeatures(isolate_)",
          "old_line_content": "      // TODO(thibaudm): Look into sharing wrappers.",
          "new_line_content": "  compilation_state->PublishDetectedFeatures(isolate_);",
          "content_same": false
        },
        {
          "line": 1988,
          "old_api": null,
          "new_api": "script",
          "old_text": null,
          "new_text": "module_object_->script()",
          "old_line_content": "",
          "new_line_content": "  native_module_->LogWasmCodes(isolate_, module_object_->script());",
          "content_same": false
        },
        {
          "line": 1990,
          "old_api": null,
          "new_api": "FinishModule",
          "old_text": null,
          "new_text": "FinishModule()",
          "old_line_content": "  // enabled while streaming compilation was running. Since handling this while",
          "new_line_content": "  FinishModule();",
          "content_same": false
        },
        {
          "line": 1995,
          "old_api": null,
          "new_api": "CompileFailed",
          "old_text": null,
          "new_text": "thrower.CompileFailed(error)",
          "old_line_content": "  // Finally, log all generated code (it does not matter if this happens",
          "new_line_content": "  thrower.CompileFailed(error);",
          "content_same": false
        },
        {
          "line": 1998,
          "old_api": null,
          "new_api": "wasm_engine",
          "old_text": null,
          "new_text": "isolate_->wasm_engine()->RemoveCompileJob(this)",
          "old_line_content": "",
          "new_line_content": "      isolate_->wasm_engine()->RemoveCompileJob(this);",
          "content_same": false
        },
        {
          "line": 2006,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "native_module_.get()",
          "old_line_content": "  std::shared_ptr<AsyncCompileJob> job =",
          "new_line_content": "  ValidateSequentially(native_module_->module(), native_module_.get(),",
          "content_same": false
        },
        {
          "line": 2009,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "thrower.error()",
          "old_line_content": "}",
          "new_line_content": "  DCHECK(thrower.error());",
          "content_same": false
        },
        {
          "line": 2012,
          "old_api": null,
          "new_api": "wasm_engine",
          "old_text": null,
          "new_text": "isolate_->wasm_engine()->RemoveCompileJob(this)",
          "old_line_content": "  ErrorThrower thrower(isolate_, api_method_name_);",
          "new_line_content": "      isolate_->wasm_engine()->RemoveCompileJob(this);",
          "content_same": false
        },
        {
          "line": 2017,
          "old_api": null,
          "new_api": "TRACE_DISABLED_BY_DEFAULT",
          "old_text": null,
          "new_text": "TRACE_DISABLED_BY_DEFAULT(\"v8.wasm.detailed\")",
          "old_line_content": "                       lazy_module);",
          "new_line_content": "  TRACE_EVENT0(TRACE_DISABLED_BY_DEFAULT(\"v8.wasm.detailed\"),",
          "content_same": false
        },
        {
          "line": 2024,
          "old_api": null,
          "new_api": "OnCompilationSucceeded",
          "old_text": null,
          "new_text": "resolver_->OnCompilationSucceeded(result)",
          "old_line_content": "",
          "new_line_content": "  resolver_->OnCompilationSucceeded(result);",
          "content_same": false
        },
        {
          "line": 2029,
          "old_api": null,
          "new_api": "explicit",
          "old_text": null,
          "new_text": "explicit",
          "old_line_content": "  // the module's start function calls out to Blink.",
          "new_line_content": "  explicit CompilationStateCallback(AsyncCompileJob* job) : job_(job) {}",
          "content_same": false
        },
        {
          "line": 2037,
          "old_api": null,
          "new_api": "has_value",
          "old_text": null,
          "new_text": "last_event_.has_value()",
          "old_line_content": " public:",
          "new_line_content": "        DCHECK(!last_event_.has_value());",
          "content_same": false
        },
        {
          "line": 2040,
          "old_api": null,
          "new_api": "DCHECK_EQ",
          "old_text": null,
          "new_text": "DCHECK_EQ(CompilationEvent::kFinishedExportWrappers, last_event_)",
          "old_line_content": "  void operator()(CompilationEvent event) {",
          "new_line_content": "        DCHECK_EQ(CompilationEvent::kFinishedExportWrappers, last_event_);",
          "content_same": false
        },
        {
          "line": 2041,
          "old_api": null,
          "new_api": "DecrementAndCheckFinisherCount",
          "old_text": null,
          "new_text": "job_->DecrementAndCheckFinisherCount()",
          "old_line_content": "    // This callback is only being called from a foreground task.",
          "new_line_content": "        if (job_->DecrementAndCheckFinisherCount()) {",
          "content_same": false
        },
        {
          "line": 2047,
          "old_api": null,
          "new_api": "wasm_engine",
          "old_text": null,
          "new_text": "job_->isolate_->wasm_engine()->UpdateNativeModuleCache(\n                  false, &native_module, job_->isolate_)",
          "old_line_content": "        break;",
          "new_line_content": "              !job_->isolate_->wasm_engine()->UpdateNativeModuleCache(",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 2056,
          "old_api": "wasm_engine",
          "new_api": null,
          "old_text": "job_->isolate_->wasm_engine()->UpdateNativeModuleCache(\n                  false, &native_module, job_->isolate_)",
          "new_text": null,
          "old_line_content": "              !job_->isolate_->wasm_engine()->UpdateNativeModuleCache(",
          "new_line_content": "        // At this point, the job will already be gone, thus do not access it",
          "content_same": false
        },
        {
          "line": 2058,
          "old_api": "DCHECK_EQ",
          "new_api": null,
          "old_text": "DCHECK_EQ(cache_hit, native_module != job_->native_module_)",
          "new_text": null,
          "old_line_content": "          DCHECK_EQ(cache_hit, native_module != job_->native_module_);",
          "new_line_content": "        break;",
          "content_same": false
        },
        {
          "line": 2059,
          "old_api": "std::move(native_module)",
          "new_api": null,
          "old_text": "std::move(native_module)",
          "new_text": null,
          "old_line_content": "          job_->DoSync<CompileFinished>(cache_hit ? std::move(native_module)",
          "new_line_content": "      case CompilationEvent::kFailedCompilation:",
          "content_same": false
        },
        {
          "line": 2064,
          "old_api": "DCHECK_EQ",
          "new_api": null,
          "old_text": "DCHECK_EQ(CompilationEvent::kFinishedBaselineCompilation, last_event_)",
          "new_text": null,
          "old_line_content": "        DCHECK_EQ(CompilationEvent::kFinishedBaselineCompilation, last_event_);",
          "new_line_content": "          // compilation threads. Use a copy of the shared pointer instead.",
          "content_same": false
        },
        {
          "line": 2069,
          "old_api": "has_value",
          "new_api": null,
          "old_text": "last_event_.has_value()",
          "new_text": null,
          "old_line_content": "        DCHECK(!last_event_.has_value() ||",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2071,
          "old_api": "DecrementAndCheckFinisherCount",
          "new_api": null,
          "old_text": "job_->DecrementAndCheckFinisherCount()",
          "new_text": null,
          "old_line_content": "        if (job_->DecrementAndCheckFinisherCount()) {",
          "new_line_content": "      case CompilationEvent::kFinishedRecompilation:",
          "content_same": false
        },
        {
          "line": 2075,
          "old_api": "wasm_engine",
          "new_api": null,
          "old_text": "job_->isolate_->wasm_engine()->UpdateNativeModuleCache(\n              true, &native_module, job_->isolate_)",
          "new_text": null,
          "old_line_content": "          job_->isolate_->wasm_engine()->UpdateNativeModuleCache(",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 2077,
          "old_api": "job_->DoSync<CompileFailed>()",
          "new_api": null,
          "old_text": "job_->DoSync<CompileFailed>()",
          "new_text": null,
          "old_line_content": "          job_->DoSync<CompileFailed>();",
          "new_line_content": "#ifdef DEBUG",
          "content_same": false
        },
        {
          "line": 2110,
          "old_api": "RunInForeground",
          "new_api": null,
          "old_text": "RunInForeground(job)",
          "new_text": null,
          "old_line_content": "      RunInForeground(job);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2112,
          "old_api": "RunInBackground",
          "new_api": null,
          "old_text": "RunInBackground(job)",
          "new_text": null,
          "old_line_content": "      RunInBackground(job);",
          "new_line_content": " public:",
          "content_same": false
        },
        {
          "line": 2116,
          "old_api": "UNREACHABLE",
          "new_api": null,
          "old_text": "UNREACHABLE()",
          "new_text": null,
          "old_line_content": "  virtual void RunInForeground(AsyncCompileJob*) { UNREACHABLE(); }",
          "new_line_content": "      // {CancelableTaskManager}. Background tasks cannot spawn tasks managed by",
          "content_same": false
        },
        {
          "line": 2117,
          "old_api": "UNREACHABLE",
          "new_api": null,
          "old_text": "UNREACHABLE()",
          "new_text": null,
          "old_line_content": "  virtual void RunInBackground(AsyncCompileJob*) { UNREACHABLE(); }",
          "new_line_content": "      // their own task manager.",
          "content_same": false
        },
        {
          "line": 2127,
          "old_api": "cancelable_task_manager",
          "new_api": null,
          "old_text": "job->isolate_->cancelable_task_manager()",
          "new_text": null,
          "old_line_content": "      : CancelableTask(on_foreground ? job->isolate_->cancelable_task_manager()",
          "new_line_content": "  void RunInternal() final {",
          "content_same": false
        },
        {
          "line": 2133,
          "old_api": "ResetPendingForegroundTask",
          "new_api": null,
          "old_text": "ResetPendingForegroundTask()",
          "new_text": null,
          "old_line_content": "    if (job_ != nullptr && on_foreground_) ResetPendingForegroundTask();",
          "new_line_content": "    job_ = nullptr;",
          "content_same": false
        },
        {
          "line": 2138,
          "old_api": "ResetPendingForegroundTask",
          "new_api": null,
          "old_text": "ResetPendingForegroundTask()",
          "new_text": null,
          "old_line_content": "    if (on_foreground_) ResetPendingForegroundTask();",
          "new_line_content": "    job_ = nullptr;",
          "content_same": false
        },
        {
          "line": 2139,
          "old_api": "Run",
          "new_api": null,
          "old_text": "job_->step_->Run(job_, on_foreground_)",
          "new_text": null,
          "old_line_content": "    job_->step_->Run(job_, on_foreground_);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 2146,
          "old_api": "DCHECK_NOT_NULL",
          "new_api": null,
          "old_text": "DCHECK_NOT_NULL(job_)",
          "new_text": null,
          "old_line_content": "    DCHECK_NOT_NULL(job_);",
          "new_line_content": "  void ResetPendingForegroundTask() const {",
          "content_same": false
        },
        {
          "line": 2162,
          "old_api": "DCHECK_NULL",
          "new_api": null,
          "old_text": "DCHECK_NULL(pending_foreground_task_)",
          "new_text": null,
          "old_line_content": "  DCHECK_NULL(pending_foreground_task_);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2166,
          "old_api": "std::move(new_task)",
          "new_api": null,
          "old_text": "std::move(new_task)",
          "new_text": null,
          "old_line_content": "  foreground_task_runner_->PostTask(std::move(new_task));",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2172,
          "old_api": "std::make_unique<CompileTask>(this, true)",
          "new_api": null,
          "old_text": "std::make_unique<CompileTask>(this, true)",
          "new_text": null,
          "old_line_content": "  auto new_task = std::make_unique<CompileTask>(this, true);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2173,
          "old_api": "get",
          "new_api": null,
          "old_text": "new_task.get()",
          "new_text": null,
          "old_line_content": "  pending_foreground_task_ = new_task.get();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2174,
          "old_api": "Run",
          "new_api": null,
          "old_text": "new_task->Run()",
          "new_text": null,
          "old_line_content": "  new_task->Run();",
          "new_line_content": "void AsyncCompileJob::StartBackgroundTask() {",
          "content_same": false
        },
        {
          "line": 2179,
          "old_api": "Cancel",
          "new_api": null,
          "old_text": "pending_foreground_task_->Cancel()",
          "new_text": null,
          "old_line_content": "  pending_foreground_task_->Cancel();",
          "new_line_content": "  if (FLAG_wasm_num_compilation_tasks > 0) {",
          "content_same": false
        },
        {
          "line": 2184,
          "old_api": "std::make_unique<CompileTask>(this, false)",
          "new_api": null,
          "old_text": "std::make_unique<CompileTask>(this, false)",
          "new_text": null,
          "old_line_content": "  auto task = std::make_unique<CompileTask>(this, false);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2189,
          "old_api": "std::move(task)",
          "new_api": null,
          "old_text": "std::move(task)",
          "new_text": null,
          "old_line_content": "    V8::GetCurrentPlatform()->CallOnWorkerThread(std::move(task));",
          "new_line_content": "void AsyncCompileJob::DoSync(Args&&... args) {",
          "content_same": false
        },
        {
          "line": 2191,
          "old_api": "std::move(task)",
          "new_api": null,
          "old_text": "std::move(task)",
          "new_text": null,
          "old_line_content": "    foreground_task_runner_->PostTask(std::move(task));",
          "new_line_content": "  if (use_existing_fg_task && pending_foreground_task_ != nullptr) return;",
          "content_same": false
        },
        {
          "line": 2199,
          "old_api": "std::forward<Args>(args)",
          "new_api": null,
          "old_text": "std::forward<Args>(args)",
          "new_text": null,
          "old_line_content": "  NextStep<Step>(std::forward<Args>(args)...);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2201,
          "old_api": "StartForegroundTask",
          "new_api": null,
          "old_text": "StartForegroundTask()",
          "new_text": null,
          "old_line_content": "  StartForegroundTask();",
          "new_line_content": "template <typename Step, typename... Args>",
          "content_same": false
        },
        {
          "line": 2206,
          "old_api": "std::forward<Args>(args)",
          "new_api": null,
          "old_text": "std::forward<Args>(args)",
          "new_text": null,
          "old_line_content": "  NextStep<Step>(std::forward<Args>(args)...);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2207,
          "old_api": "ExecuteForegroundTaskImmediately",
          "new_api": null,
          "old_text": "ExecuteForegroundTaskImmediately()",
          "new_text": null,
          "old_line_content": "  ExecuteForegroundTaskImmediately();",
          "new_line_content": "template <typename Step, typename... Args>",
          "content_same": false
        },
        {
          "line": 2212,
          "old_api": "std::forward<Args>(args)",
          "new_api": null,
          "old_text": "std::forward<Args>(args)",
          "new_text": null,
          "old_line_content": "  NextStep<Step>(std::forward<Args>(args)...);",
          "new_line_content": "//==========================================================================",
          "content_same": false
        },
        {
          "line": 2213,
          "old_api": "StartBackgroundTask",
          "new_api": null,
          "old_text": "StartBackgroundTask()",
          "new_text": null,
          "old_line_content": "  StartBackgroundTask();",
          "new_line_content": "// Step 1: (async) Decode the module.",
          "content_same": false
        },
        {
          "line": 2218,
          "old_api": "std::forward<Args>(args)",
          "new_api": null,
          "old_text": "std::forward<Args>(args)",
          "new_text": null,
          "old_line_content": "  step_.reset(new Step(std::forward<Args>(args)...));",
          "new_line_content": "                        std::shared_ptr<metrics::Recorder> metrics_recorder)",
          "content_same": false
        },
        {
          "line": 2226,
          "old_api": "explicit",
          "new_api": null,
          "old_text": "explicit",
          "new_text": null,
          "old_line_content": "  explicit DecodeModule(Counters* counters,",
          "new_line_content": "      // Decode the module bytes.",
          "content_same": false
        },
        {
          "line": 2236,
          "old_api": "TRACE_COMPILE",
          "new_api": null,
          "old_text": "TRACE_COMPILE(\"(1) Decoding module...\\n\")",
          "new_text": null,
          "old_line_content": "      TRACE_COMPILE(\"(1) Decoding module...\\n\");",
          "new_line_content": "      // Validate lazy functions here if requested.",
          "content_same": false
        },
        {
          "line": 2240,
          "old_api": "start",
          "new_api": null,
          "old_text": "DecodeWasmModule(\n          enabled_features, job->wire_bytes_.start(), job->wire_bytes_.end(),\n          false, kWasmOrigin, counters_, metrics_recorder_, job->context_id(),\n          DecodingMethod::kAsync, job->isolate()->wasm_engine()->allocator())",
          "new_text": null,
          "old_line_content": "      result = DecodeWasmModule(",
          "new_line_content": "        const bool lazy_module = job->wasm_lazy_compilation_;",
          "content_same": false
        },
        {
          "line": 2243,
          "old_api": "isolate",
          "new_api": null,
          "old_text": "job->isolate()->wasm_engine()->allocator()",
          "new_text": null,
          "old_line_content": "          DecodingMethod::kAsync, job->isolate()->wasm_engine()->allocator());",
          "new_line_content": "          int start = module->num_imported_functions;",
          "content_same": false
        },
        {
          "line": 2246,
          "old_api": "ok",
          "new_api": null,
          "old_text": "result.ok()",
          "new_text": null,
          "old_line_content": "      if (!FLAG_wasm_lazy_validation && result.ok()) {",
          "new_line_content": "          for (int func_index = start; func_index < end; func_index++) {",
          "content_same": false
        },
        {
          "line": 2247,
          "old_api": "value",
          "new_api": null,
          "old_text": "result.value().get()",
          "new_text": null,
          "old_line_content": "        const WasmModule* module = result.value().get();",
          "new_line_content": "            const WasmFunction* func = &module->functions[func_index];",
          "content_same": false
        },
        {
          "line": 2248,
          "old_api": "DCHECK_EQ",
          "new_api": null,
          "old_text": "DCHECK_EQ(module->origin, kWasmOrigin)",
          "new_text": null,
          "old_line_content": "        DCHECK_EQ(module->origin, kWasmOrigin);",
          "new_line_content": "            Vector<const uint8_t> code =",
          "content_same": false
        },
        {
          "line": 2250,
          "old_api": "MayCompriseLazyFunctions",
          "new_api": null,
          "old_text": "MayCompriseLazyFunctions(module, enabled_features, lazy_module)",
          "new_text": null,
          "old_line_content": "        if (MayCompriseLazyFunctions(module, enabled_features, lazy_module)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2267,
          "old_api": "ValidateSingleFunction",
          "new_api": null,
          "old_text": "ValidateSingleFunction(module, func_index, code, counters_,\n                                         allocator, enabled_features)",
          "new_text": null,
          "old_line_content": "                  ValidateSingleFunction(module, func_index, code, counters_,",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 2270,
          "old_api": "error",
          "new_api": null,
          "old_text": "function_result.error()",
          "new_text": null,
          "old_line_content": "                result = ModuleResult(function_result.error());",
          "new_line_content": "      // Decoding failure; reject the promise and clean up.",
          "content_same": false
        },
        {
          "line": 2278,
          "old_api": "failed",
          "new_api": null,
          "old_text": "result.failed()",
          "new_text": null,
          "old_line_content": "    if (result.failed()) {",
          "new_line_content": "                                                              kUsesLiftoff);",
          "content_same": false
        },
        {
          "line": 2280,
          "old_api": "error",
          "new_api": null,
          "old_text": "std::move(result).error()",
          "new_text": null,
          "old_line_content": "      job->DoSync<DecodeFail>(std::move(result).error());",
          "new_line_content": "                                          code_size_estimate);",
          "content_same": false
        },
        {
          "line": 2283,
          "old_api": "value",
          "new_api": null,
          "old_text": "std::move(result).value()",
          "new_text": null,
          "old_line_content": "      std::shared_ptr<WasmModule> module = std::move(result).value();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2286,
          "old_api": "get",
          "new_api": null,
          "old_text": "module.get()",
          "new_text": null,
          "old_line_content": "          wasm::WasmCodeManager::EstimateNativeModuleCodeSize(module.get(),",
          "new_line_content": "  std::shared_ptr<metrics::Recorder> metrics_recorder_;",
          "content_same": false
        },
        {
          "line": 2288,
          "old_api": "std::move(module)",
          "new_api": null,
          "old_text": "std::move(module)",
          "new_text": null,
          "old_line_content": "      job->DoSync<PrepareAndStartCompile>(std::move(module), true,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2303,
          "old_api": "std::move(error)",
          "new_api": null,
          "old_text": "std::move(error)",
          "new_text": null,
          "old_line_content": "  explicit DecodeFail(WasmError error) : error_(std::move(error)) {}",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 2309,
          "old_api": "TRACE_COMPILE",
          "new_api": null,
          "old_text": "TRACE_COMPILE(\"(1b) Decoding failed.\\n\")",
          "new_text": null,
          "old_line_content": "    TRACE_COMPILE(\"(1b) Decoding failed.\\n\");",
          "new_line_content": "class AsyncCompileJob::PrepareAndStartCompile : public CompileStep {",
          "content_same": false
        },
        {
          "line": 2311,
          "old_api": "DecodeFailed",
          "new_api": null,
          "old_text": "job->DecodeFailed(error_)",
          "new_text": null,
          "old_line_content": "    return job->DecodeFailed(error_);",
          "new_line_content": "  PrepareAndStartCompile(std::shared_ptr<const WasmModule> module,",
          "content_same": false
        },
        {
          "line": 2322,
          "old_api": "std::move(module)",
          "new_api": null,
          "old_text": "std::move(module)",
          "new_text": null,
          "old_line_content": "      : module_(std::move(module)),",
          "new_line_content": "  void RunInForeground(AsyncCompileJob* job) override {",
          "content_same": false
        },
        {
          "line": 2332,
          "old_api": "TRACE_COMPILE",
          "new_api": null,
          "old_text": "TRACE_COMPILE(\"(2) Prepare and start compile...\\n\")",
          "new_text": null,
          "old_line_content": "    TRACE_COMPILE(\"(2) Prepare and start compile...\\n\");",
          "new_line_content": "      return;",
          "content_same": false
        },
        {
          "line": 2334,
          "old_api": "length",
          "new_api": null,
          "old_text": "job->wire_bytes_.length()",
          "new_text": null,
          "old_line_content": "    const bool streaming = job->wire_bytes_.length() == 0;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2338,
          "old_api": "std::move(module_)",
          "new_api": null,
          "old_text": "std::move(module_)",
          "new_text": null,
          "old_line_content": "    } else if (job->GetOrCreateNativeModule(std::move(module_),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2349,
          "old_api": "compilation_state",
          "new_api": null,
          "old_text": "job->native_module_->compilation_state()",
          "new_text": null,
          "old_line_content": "        Impl(job->native_module_->compilation_state());",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2350,
          "old_api": "AddCallback",
          "new_api": null,
          "old_text": "compilation_state->AddCallback(CompilationStateCallback{job})",
          "new_text": null,
          "old_line_content": "    compilation_state->AddCallback(CompilationStateCallback{job});",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2351,
          "old_api": "base::TimeTicks::IsHighResolution()",
          "new_api": null,
          "old_text": "base::TimeTicks::IsHighResolution()",
          "new_text": null,
          "old_line_content": "    if (base::TimeTicks::IsHighResolution()) {",
          "new_line_content": "    if (start_compilation_) {",
          "content_same": false
        },
        {
          "line": 2355,
          "old_api": "AddCallback",
          "new_api": null,
          "old_text": "compilation_state->AddCallback(CompilationTimeCallback{\n          job->isolate_->async_counters(), job->isolate_->metrics_recorder(),\n          job->context_id_, job->native_module_, compile_mode})",
          "new_text": null,
          "old_line_content": "      compilation_state->AddCallback(CompilationTimeCallback{",
          "new_line_content": "      // then DoAsync would do the same as NextStep already.",
          "content_same": false
        },
        {
          "line": 2356,
          "old_api": "metrics_recorder",
          "new_api": null,
          "old_text": "job->isolate_->metrics_recorder()",
          "new_text": null,
          "old_line_content": "          job->isolate_->async_counters(), job->isolate_->metrics_recorder(),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2367,
          "old_api": "get",
          "new_api": null,
          "old_text": "job->native_module_.get()",
          "new_text": null,
          "old_line_content": "      InitializeCompilationUnits(job->isolate(), job->native_module_.get());",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 2372,
          "old_api": "WaitForCompilationEvent",
          "new_api": null,
          "old_text": "compilation_state->WaitForCompilationEvent(\n            CompilationEvent::kFinishedBaselineCompilation)",
          "new_text": null,
          "old_line_content": "        compilation_state->WaitForCompilationEvent(",
          "new_line_content": "//==========================================================================",
          "content_same": false
        },
        {
          "line": 2385,
          "old_api": "TRACE_COMPILE",
          "new_api": null,
          "old_text": "TRACE_COMPILE(\"(3a) Compilation failed\\n\")",
          "new_text": null,
          "old_line_content": "    TRACE_COMPILE(\"(3a) Compilation failed\\n\");",
          "new_line_content": "class SampleTopTierCodeSizeCallback {",
          "content_same": false
        },
        {
          "line": 2386,
          "old_api": "compilation_state",
          "new_api": null,
          "old_text": "job->native_module_->compilation_state()->failed()",
          "new_text": null,
          "old_line_content": "    DCHECK(job->native_module_->compilation_state()->failed());",
          "new_line_content": " public:",
          "content_same": false
        },
        {
          "line": 2396,
          "old_api": "explicit",
          "new_api": null,
          "old_text": "explicit",
          "new_text": null,
          "old_line_content": "  explicit SampleTopTierCodeSizeCallback(",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2398,
          "old_api": "std::move(native_module)",
          "new_api": null,
          "old_text": "std::move(native_module)",
          "new_text": null,
          "old_line_content": "      : native_module_(std::move(native_module)) {}",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2402,
          "old_api": "lock",
          "new_api": null,
          "old_text": "native_module_.lock()",
          "new_text": null,
          "old_line_content": "    if (std::shared_ptr<NativeModule> native_module = native_module_.lock()) {",
          "new_line_content": "}  // namespace",
          "content_same": false
        },
        {
          "line": 2403,
          "old_api": "engine",
          "new_api": null,
          "old_text": "native_module->engine()->SampleTopTierCodeSizeInAllIsolates(\n          native_module)",
          "new_text": null,
          "old_line_content": "      native_module->engine()->SampleTopTierCodeSizeInAllIsolates(",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2419,
          "old_api": "std::move(cached_native_module)",
          "new_api": null,
          "old_text": "std::move(cached_native_module)",
          "new_text": null,
          "old_line_content": "      : cached_native_module_(std::move(cached_native_module)) {}",
          "new_line_content": "      // Sample the generated code size when baseline compilation finished.",
          "content_same": false
        },
        {
          "line": 2423,
          "old_api": "TRACE_COMPILE",
          "new_api": null,
          "old_text": "TRACE_COMPILE(\"(3b) Compilation finished\\n\")",
          "new_text": null,
          "old_line_content": "    TRACE_COMPILE(\"(3b) Compilation finished\\n\");",
          "new_line_content": "      // finished. This callback will *not* keep the NativeModule alive.",
          "content_same": false
        },
        {
          "line": 2427,
          "old_api": "compilation_state",
          "new_api": null,
          "old_text": "job->native_module_->compilation_state()->failed()",
          "new_text": null,
          "old_line_content": "      DCHECK(!job->native_module_->compilation_state()->failed());",
          "new_line_content": "    // Then finalize and publish the generated module.",
          "content_same": false
        },
        {
          "line": 2429,
          "old_api": "counters",
          "new_api": null,
          "old_text": "job->isolate_->counters()",
          "new_text": null,
          "old_line_content": "      job->native_module_->SampleCodeSize(job->isolate_->counters(),",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 2433,
          "old_api": "compilation_state",
          "new_api": null,
          "old_text": "job->native_module_->compilation_state()->AddCallback(\n          SampleTopTierCodeSizeCallback{job->native_module_})",
          "new_text": null,
          "old_line_content": "      job->native_module_->compilation_state()->AddCallback(",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2444,
          "old_api": "TRACE_COMPILE",
          "new_api": null,
          "old_text": "TRACE_COMPILE(\"(4) Finish module...\\n\")",
          "new_text": null,
          "old_line_content": "  TRACE_COMPILE(\"(4) Finish module...\\n\");",
          "new_line_content": "      job_(job),",
          "content_same": false
        },
        {
          "line": 2446,
          "old_api": "wasm_engine",
          "new_api": null,
          "old_text": "isolate_->wasm_engine()->RemoveCompileJob(this)",
          "new_text": null,
          "old_line_content": "  isolate_->wasm_engine()->RemoveCompileJob(this);",
          "new_line_content": "      compilation_unit_builder_(nullptr),",
          "content_same": false
        },
        {
          "line": 2454,
          "old_api": "wasm_engine",
          "new_api": null,
          "old_text": "job_->isolate_->wasm_engine()",
          "new_text": null,
          "old_line_content": "      wasm_engine_(job_->isolate_->wasm_engine()),",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 2460,
          "old_api": "empty",
          "new_api": null,
          "old_text": "job_->native_module_->wire_bytes().empty()",
          "new_text": null,
          "old_line_content": "  if (job_->native_module_ && job_->native_module_->wire_bytes().empty()) {",
          "new_line_content": "  // Make sure all background tasks stopped executing before we change the state",
          "content_same": false
        },
        {
          "line": 2474,
          "old_api": "base::TimeTicks::Now()",
          "new_api": null,
          "old_text": "base::TimeTicks::Now()",
          "new_text": null,
          "old_line_content": "  auto duration = base::TimeTicks::Now() - job_->start_time_;",
          "new_line_content": "  // Check if there is already a CompiledModule, in which case we have to clean",
          "content_same": false
        },
        {
          "line": 2479,
          "old_api": "InMicroseconds",
          "new_api": null,
          "old_text": "duration.InMicroseconds()",
          "new_text": null,
          "old_line_content": "  job_->metrics_event_.wall_clock_duration_in_us = duration.InMicroseconds();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2489,
          "old_api": "job_->DoSync<AsyncCompileJob::DecodeFail,\n                 AsyncCompileJob::kUseExistingForegroundTask>(error)",
          "new_api": null,
          "old_text": "job_->DoSync<AsyncCompileJob::DecodeFail,\n                 AsyncCompileJob::kUseExistingForegroundTask>(error)",
          "new_text": null,
          "old_line_content": "    job_->DoSync<AsyncCompileJob::DecodeFail,",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 2505,
          "old_api": "StartDecoding",
          "new_api": null,
          "old_text": "decoder_.StartDecoding(\n      job_->isolate()->counters(), job_->isolate()->metrics_recorder(),\n      job_->context_id(), job_->isolate()->wasm_engine()->allocator())",
          "new_text": null,
          "old_line_content": "  decoder_.StartDecoding(",
          "new_line_content": "  return true;",
          "content_same": false
        },
        {
          "line": 2506,
          "old_api": "isolate",
          "new_api": null,
          "old_text": "job_->isolate()->metrics_recorder()",
          "new_text": null,
          "old_line_content": "      job_->isolate()->counters(), job_->isolate()->metrics_recorder(),",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2507,
          "old_api": "isolate",
          "new_api": null,
          "old_text": "job_->isolate()->wasm_engine()->allocator()",
          "new_text": null,
          "old_line_content": "      job_->context_id(), job_->isolate()->wasm_engine()->allocator());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2508,
          "old_api": "DecodeModuleHeader",
          "new_api": null,
          "old_text": "decoder_.DecodeModuleHeader(bytes, offset)",
          "new_text": null,
          "old_line_content": "  decoder_.DecodeModuleHeader(bytes, offset);",
          "new_line_content": "// Process all sections except for the code section.",
          "content_same": false
        },
        {
          "line": 2509,
          "old_api": "ok",
          "new_api": null,
          "old_text": "decoder_.ok()",
          "new_text": null,
          "old_line_content": "  if (!decoder_.ok()) {",
          "new_line_content": "bool AsyncStreamingProcessor::ProcessSection(SectionCode section_code,",
          "content_same": false
        },
        {
          "line": 2510,
          "old_api": "FinishDecoding",
          "new_api": null,
          "old_text": "decoder_.FinishDecoding(false).error()",
          "new_text": null,
          "old_line_content": "    FinishAsyncCompileJobWithError(decoder_.FinishDecoding(false).error());",
          "new_line_content": "                                             Vector<const uint8_t> bytes,",
          "content_same": false
        },
        {
          "line": 2513,
          "old_api": "NativeModuleCache::WireBytesHash(bytes)",
          "new_api": null,
          "old_text": "NativeModuleCache::WireBytesHash(bytes)",
          "new_text": null,
          "old_line_content": "  prefix_hash_ = NativeModuleCache::WireBytesHash(bytes);",
          "new_line_content": "  if (compilation_unit_builder_) {",
          "content_same": false
        },
        {
          "line": 2526,
          "old_api": "reset",
          "new_api": null,
          "old_text": "compilation_unit_builder_.reset()",
          "new_text": null,
          "old_line_content": "    compilation_unit_builder_.reset();",
          "new_line_content": "        &decoder_, bytes, offset, &section_code);",
          "content_same": false
        },
        {
          "line": 2530,
          "old_api": "base::hash_combine(prefix_hash_,\n                                      NativeModuleCache::WireBytesHash(bytes))",
          "new_api": null,
          "old_text": "base::hash_combine(prefix_hash_,\n                                      NativeModuleCache::WireBytesHash(bytes))",
          "new_text": null,
          "old_line_content": "    prefix_hash_ = base::hash_combine(prefix_hash_,",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2531,
          "old_api": "NativeModuleCache::WireBytesHash(bytes)",
          "new_api": null,
          "old_text": "NativeModuleCache::WireBytesHash(bytes)",
          "new_text": null,
          "old_line_content": "                                      NativeModuleCache::WireBytesHash(bytes));",
          "new_line_content": "    if (section_code == SectionCode::kUnknownSectionCode) {",
          "content_same": false
        },
        {
          "line": 2534,
          "old_api": "ModuleDecoder::IdentifyUnknownSection(\n        &decoder_, bytes, offset, &section_code)",
          "new_api": null,
          "old_text": "ModuleDecoder::IdentifyUnknownSection(\n        &decoder_, bytes, offset, &section_code)",
          "new_text": null,
          "old_line_content": "    size_t bytes_consumed = ModuleDecoder::IdentifyUnknownSection(",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2536,
          "old_api": "ok",
          "new_api": null,
          "old_text": "decoder_.ok()",
          "new_text": null,
          "old_line_content": "    if (!decoder_.ok()) {",
          "new_line_content": "    offset += bytes_consumed;",
          "content_same": false
        },
        {
          "line": 2546,
          "old_api": "size",
          "new_api": null,
          "old_text": "bytes.size()",
          "new_text": null,
          "old_line_content": "    bytes = bytes.SubVector(bytes_consumed, bytes.size());",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2548,
          "old_api": "constexpr",
          "new_api": null,
          "old_text": "constexpr",
          "new_text": null,
          "old_line_content": "  constexpr bool verify_functions = false;",
          "new_line_content": "// Start the code section.",
          "content_same": false
        },
        {
          "line": 2549,
          "old_api": "DecodeSection",
          "new_api": null,
          "old_text": "decoder_.DecodeSection(section_code, bytes, offset, verify_functions)",
          "new_text": null,
          "old_line_content": "  decoder_.DecodeSection(section_code, bytes, offset, verify_functions);",
          "new_line_content": "bool AsyncStreamingProcessor::ProcessCodeSectionHeader(",
          "content_same": false
        },
        {
          "line": 2550,
          "old_api": "ok",
          "new_api": null,
          "old_text": "decoder_.ok()",
          "new_text": null,
          "old_line_content": "  if (!decoder_.ok()) {",
          "new_line_content": "    int num_functions, uint32_t functions_mismatch_error_offset,",
          "content_same": false
        },
        {
          "line": 2551,
          "old_api": "FinishDecoding",
          "new_api": null,
          "old_text": "decoder_.FinishDecoding(false).error()",
          "new_text": null,
          "old_line_content": "    FinishAsyncCompileJobWithError(decoder_.FinishDecoding(false).error());",
          "new_line_content": "    std::shared_ptr<WireBytesStorage> wire_bytes_storage,",
          "content_same": false
        },
        {
          "line": 2562,
          "old_api": "DCHECK_LE",
          "new_api": null,
          "old_text": "DCHECK_LE(0, code_section_length)",
          "new_text": null,
          "old_line_content": "  DCHECK_LE(0, code_section_length);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 2566,
          "old_api": "StartCodeSection",
          "new_api": null,
          "old_text": "decoder_.StartCodeSection()",
          "new_text": null,
          "old_line_content": "  decoder_.StartCodeSection();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2573,
          "old_api": "set_code_section",
          "new_api": null,
          "old_text": "decoder_.set_code_section(code_section_start,\n                            static_cast<uint32_t>(code_section_length))",
          "new_text": null,
          "old_line_content": "  decoder_.set_code_section(code_section_start,",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 2574,
          "old_api": "static_cast<uint32_t>(code_section_length)",
          "new_api": null,
          "old_text": "static_cast<uint32_t>(code_section_length)",
          "new_text": null,
          "old_line_content": "                            static_cast<uint32_t>(code_section_length));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2576,
          "old_api": "base::hash_combine(prefix_hash_,\n                                    static_cast<uint32_t>(code_section_length))",
          "new_api": null,
          "old_text": "base::hash_combine(prefix_hash_,\n                                    static_cast<uint32_t>(code_section_length))",
          "new_text": null,
          "old_line_content": "  prefix_hash_ = base::hash_combine(prefix_hash_,",
          "new_line_content": "  // task.",
          "content_same": false
        },
        {
          "line": 2577,
          "old_api": "static_cast<uint32_t>(code_section_length)",
          "new_api": null,
          "old_text": "static_cast<uint32_t>(code_section_length)",
          "new_text": null,
          "old_line_content": "                                    static_cast<uint32_t>(code_section_length));",
          "new_line_content": "  int num_imported_functions =",
          "content_same": false
        },
        {
          "line": 2587,
          "old_api": "module",
          "new_api": null,
          "old_text": "decoder_.module()",
          "new_text": null,
          "old_line_content": "      static_cast<int>(decoder_.module()->num_imported_functions);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2591,
          "old_api": "wasm::WasmCodeManager::EstimateNativeModuleCodeSize(\n          num_functions, num_imported_functions, code_section_length,\n          uses_liftoff)",
          "new_api": null,
          "old_text": "wasm::WasmCodeManager::EstimateNativeModuleCodeSize(\n          num_functions, num_imported_functions, code_section_length,\n          uses_liftoff)",
          "new_text": null,
          "old_line_content": "      wasm::WasmCodeManager::EstimateNativeModuleCodeSize(",
          "new_line_content": "  const bool lazy_module = job_->wasm_lazy_compilation_;",
          "content_same": false
        },
        {
          "line": 2594,
          "old_api": "shared_module",
          "new_api": null,
          "old_text": "job_->DoImmediately<AsyncCompileJob::PrepareAndStartCompile>(\n      decoder_.shared_module(), false, code_size_estimate)",
          "new_text": null,
          "old_line_content": "  job_->DoImmediately<AsyncCompileJob::PrepareAndStartCompile>(",
          "new_line_content": "  // AsyncStreamingProcessor have to finish.",
          "content_same": false
        },
        {
          "line": 2598,
          "old_api": "std::move(wire_bytes_storage)",
          "new_api": null,
          "old_text": "std::move(wire_bytes_storage)",
          "new_text": null,
          "old_line_content": "  compilation_state->SetWireBytesStorage(std::move(wire_bytes_storage));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2604,
          "old_api": "store",
          "new_api": null,
          "old_text": "job_->outstanding_finishers_.store(2)",
          "new_text": null,
          "old_line_content": "  job_->outstanding_finishers_.store(2);",
          "new_line_content": "      job_->isolate_, wasm_engine_, native_module,",
          "content_same": false
        },
        {
          "line": 2608,
          "old_api": "get",
          "new_api": null,
          "old_text": "job_->native_module_.get()",
          "new_text": null,
          "old_line_content": "  NativeModule* native_module = job_->native_module_.get();",
          "new_line_content": "  return true;",
          "content_same": false
        },
        {
          "line": 2611,
          "old_api": "get",
          "new_api": null,
          "old_text": "compilation_unit_builder_.get()",
          "new_text": null,
          "old_line_content": "      AddImportWrapperUnits(native_module, compilation_unit_builder_.get());",
          "new_line_content": "// Process a function body.",
          "content_same": false
        },
        {
          "line": 2612,
          "old_api": "get",
          "new_api": null,
          "old_text": "AddExportWrapperUnits(\n      job_->isolate_, wasm_engine_, native_module,\n      compilation_unit_builder_.get(), job_->enabled_features_)",
          "new_text": null,
          "old_line_content": "  int num_export_wrappers = AddExportWrapperUnits(",
          "new_line_content": "bool AsyncStreamingProcessor::ProcessFunctionBody(Vector<const uint8_t> bytes,",
          "content_same": false
        },
        {
          "line": 2615,
          "old_api": "InitializeCompilationProgress",
          "new_api": null,
          "old_text": "compilation_state->InitializeCompilationProgress(\n      lazy_module, num_import_wrappers, num_export_wrappers)",
          "new_text": null,
          "old_line_content": "  compilation_state->InitializeCompilationProgress(",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2625,
          "old_api": "DecodeFunctionBody",
          "new_api": null,
          "old_text": "decoder_.DecodeFunctionBody(\n      num_functions_, static_cast<uint32_t>(bytes.length()), offset, false)",
          "new_text": null,
          "old_line_content": "  decoder_.DecodeFunctionBody(",
          "new_line_content": "  CompileStrategy strategy =",
          "content_same": false
        },
        {
          "line": 2628,
          "old_api": "module",
          "new_api": null,
          "old_text": "decoder_.module()",
          "new_text": null,
          "old_line_content": "  const WasmModule* module = decoder_.module();",
          "new_line_content": "      !FLAG_wasm_lazy_validation &&",
          "content_same": false
        },
        {
          "line": 2631,
          "old_api": "module",
          "new_api": null,
          "old_text": "decoder_.module()",
          "new_text": null,
          "old_line_content": "      num_functions_ + decoder_.module()->num_imported_functions;",
          "new_line_content": "  if (validate_lazily_compiled_function) {",
          "content_same": false
        },
        {
          "line": 2632,
          "old_api": "DCHECK_EQ",
          "new_api": null,
          "old_text": "DCHECK_EQ(module->origin, kWasmOrigin)",
          "new_text": null,
          "old_line_content": "  DCHECK_EQ(module->origin, kWasmOrigin);",
          "new_line_content": "    // The native module does not own the wire bytes until {SetWireBytes} is",
          "content_same": false
        },
        {
          "line": 2644,
          "old_api": "get",
          "new_api": null,
          "old_text": "async_counters_.get()",
          "new_text": null,
          "old_line_content": "        ValidateSingleFunction(module, func_index, bytes, async_counters_.get(),",
          "new_line_content": "  // Don't compile yet if we might have a cache hit.",
          "content_same": false
        },
        {
          "line": 2647,
          "old_api": "failed",
          "new_api": null,
          "old_text": "result.failed()",
          "new_text": null,
          "old_line_content": "    if (result.failed()) {",
          "new_line_content": "    return true;",
          "content_same": false
        },
        {
          "line": 2648,
          "old_api": "error",
          "new_api": null,
          "old_text": "result.error()",
          "new_text": null,
          "old_line_content": "      FinishAsyncCompileJobWithError(result.error());",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 2659,
          "old_api": "get",
          "new_api": null,
          "old_text": "job_->native_module_.get()",
          "new_text": null,
          "old_line_content": "  NativeModule* native_module = job_->native_module_.get();",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 2661,
          "old_api": "UseLazyStub",
          "new_api": null,
          "old_text": "native_module->UseLazyStub(func_index)",
          "new_text": null,
          "old_line_content": "    native_module->UseLazyStub(func_index);",
          "new_line_content": "  ++num_functions_;",
          "content_same": false
        },
        {
          "line": 2663,
          "old_api": "AddTopTierUnit",
          "new_api": null,
          "old_text": "compilation_unit_builder_->AddTopTierUnit(func_index)",
          "new_text": null,
          "old_line_content": "    compilation_unit_builder_->AddTopTierUnit(func_index);",
          "new_line_content": "  return true;",
          "content_same": false
        },
        {
          "line": 2664,
          "old_api": "UseLazyStub",
          "new_api": null,
          "old_text": "native_module->UseLazyStub(func_index)",
          "new_text": null,
          "old_line_content": "    native_module->UseLazyStub(func_index);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2666,
          "old_api": "DCHECK_EQ",
          "new_api": null,
          "old_text": "DCHECK_EQ(strategy, CompileStrategy::kEager)",
          "new_text": null,
          "old_line_content": "    DCHECK_EQ(strategy, CompileStrategy::kEager);",
          "new_line_content": "void AsyncStreamingProcessor::CommitCompilationUnits() {",
          "content_same": false
        },
        {
          "line": 2676,
          "old_api": "DCHECK",
          "new_api": null,
          "old_text": "DCHECK(compilation_unit_builder_)",
          "new_text": null,
          "old_line_content": "  DCHECK(compilation_unit_builder_);",
          "new_line_content": "// Finish the processing of the stream.",
          "content_same": false
        },
        {
          "line": 2677,
          "old_api": "Commit",
          "new_api": null,
          "old_text": "compilation_unit_builder_->Commit()",
          "new_text": null,
          "old_line_content": "  compilation_unit_builder_->Commit();",
          "new_line_content": "void AsyncStreamingProcessor::OnFinishedStream(OwnedVector<uint8_t> bytes) {",
          "content_same": false
        },
        {
          "line": 2688,
          "old_api": "as_vector",
          "new_api": null,
          "old_text": "bytes.as_vector()",
          "new_text": null,
          "old_line_content": "  DCHECK_EQ(NativeModuleCache::PrefixHash(bytes.as_vector()), prefix_hash_);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2689,
          "old_api": "FinishDecoding",
          "new_api": null,
          "old_text": "decoder_.FinishDecoding(false)",
          "new_text": null,
          "old_line_content": "  ModuleResult result = decoder_.FinishDecoding(false);",
          "new_line_content": "  // Record event metrics.",
          "content_same": false
        },
        {
          "line": 2691,
          "old_api": "error",
          "new_api": null,
          "old_text": "result.error()",
          "new_text": null,
          "old_line_content": "    FinishAsyncCompileJobWithError(result.error());",
          "new_line_content": "  job_->metrics_event_.success = true;",
          "content_same": false
        },
        {
          "line": 2699,
          "old_api": "base::TimeTicks::Now()",
          "new_api": null,
          "old_text": "base::TimeTicks::Now()",
          "new_text": null,
          "old_line_content": "  auto duration = base::TimeTicks::Now() - job_->start_time_;",
          "new_line_content": "  if (prefix_cache_hit_) {",
          "content_same": false
        },
        {
          "line": 2702,
          "old_api": "length",
          "new_api": null,
          "old_text": "job_->wire_bytes_.length()",
          "new_text": null,
          "old_line_content": "  job_->metrics_event_.module_size_in_bytes = job_->wire_bytes_.length();",
          "new_line_content": "    size_t code_size_estimate =",
          "content_same": false
        },
        {
          "line": 2712,
          "old_api": "value",
          "new_api": null,
          "old_text": "wasm::WasmCodeManager::EstimateNativeModuleCodeSize(\n            result.value().get(), FLAG_liftoff)",
          "new_text": null,
          "old_line_content": "        wasm::WasmCodeManager::EstimateNativeModuleCodeSize(",
          "new_line_content": "  // callback from the embedder.",
          "content_same": false
        },
        {
          "line": 2713,
          "old_api": "value",
          "new_api": null,
          "old_text": "result.value().get()",
          "new_text": null,
          "old_line_content": "            result.value().get(), FLAG_liftoff);",
          "new_line_content": "  HandleScope scope(job_->isolate_);",
          "content_same": false
        },
        {
          "line": 2714,
          "old_api": "value",
          "new_api": null,
          "old_text": "job_->DoSync<AsyncCompileJob::PrepareAndStartCompile>(\n        std::move(result).value(), true, code_size_estimate)",
          "new_text": null,
          "old_line_content": "    job_->DoSync<AsyncCompileJob::PrepareAndStartCompile>(",
          "new_line_content": "  SaveAndSwitchContext saved_context(job_->isolate_, *job_->native_context_);",
          "content_same": false
        },
        {
          "line": 2715,
          "old_api": "value",
          "new_api": null,
          "old_text": "std::move(result).value()",
          "new_text": null,
          "old_line_content": "        std::move(result).value(), true, code_size_estimate);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2736,
          "old_api": "constexpr",
          "new_api": null,
          "old_text": "constexpr",
          "new_text": null,
          "old_line_content": "    constexpr size_t kCodeSizeEstimate = 0;",
          "new_line_content": "  if (needs_finish) {",
          "content_same": false
        },
        {
          "line": 2740,
          "old_api": "length",
          "new_api": null,
          "old_text": "job_->native_module_->SetWireBytes(\n        {std::move(job_->bytes_copy_), job_->wire_bytes_.length()})",
          "new_text": null,
          "old_line_content": "    job_->native_module_->SetWireBytes(",
          "new_line_content": "          failed, &job_->native_module_, job_->isolate_);",
          "content_same": false
        },
        {
          "line": 2741,
          "old_api": "length",
          "new_api": null,
          "old_text": "job_->wire_bytes_.length()",
          "new_text": null,
          "old_line_content": "        {std::move(job_->bytes_copy_), job_->wire_bytes_.length()});",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2744,
          "old_api": "DCHECK_IMPLIES",
          "new_api": null,
          "old_text": "DCHECK_IMPLIES(!has_code_section, needs_finish)",
          "new_text": null,
          "old_line_content": "  DCHECK_IMPLIES(!has_code_section, needs_finish);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 2746,
          "old_api": "compilation_state",
          "new_api": null,
          "old_text": "job_->native_module_->compilation_state()->failed()",
          "new_text": null,
          "old_line_content": "    const bool failed = job_->native_module_->compilation_state()->failed();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2748,
          "old_api": "wasm_engine",
          "new_api": null,
          "old_text": "job_->isolate_->wasm_engine()->UpdateNativeModuleCache(\n          failed, &job_->native_module_, job_->isolate_)",
          "new_text": null,
          "old_line_content": "      cache_hit = !job_->isolate_->wasm_engine()->UpdateNativeModuleCache(",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2754,
          "old_api": "FinishCompile",
          "new_api": null,
          "old_text": "job_->FinishCompile(cache_hit)",
          "new_text": null,
          "old_line_content": "      job_->FinishCompile(cache_hit);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2761,
          "old_api": "TRACE_STREAMING",
          "new_api": null,
          "old_text": "TRACE_STREAMING(\"Stream error...\\n\")",
          "new_text": null,
          "old_line_content": "  TRACE_STREAMING(\"Stream error...\\n\");",
          "new_line_content": "bool AsyncStreamingProcessor::Deserialize(Vector<const uint8_t> module_bytes,",
          "content_same": false
        },
        {
          "line": 2762,
          "old_api": "FinishAsyncCompileJobWithError",
          "new_api": null,
          "old_text": "FinishAsyncCompileJobWithError(error)",
          "new_text": null,
          "old_line_content": "  FinishAsyncCompileJobWithError(error);",
          "new_line_content": "                                          Vector<const uint8_t> wire_bytes) {",
          "content_same": false
        },
        {
          "line": 2766,
          "old_api": "TRACE_STREAMING",
          "new_api": null,
          "old_text": "TRACE_STREAMING(\"Abort stream...\\n\")",
          "new_text": null,
          "old_line_content": "  TRACE_STREAMING(\"Abort stream...\\n\");",
          "new_line_content": "  HandleScope scope(job_->isolate_);",
          "content_same": false
        },
        {
          "line": 2767,
          "old_api": "Abort",
          "new_api": null,
          "old_text": "job_->Abort()",
          "new_text": null,
          "old_line_content": "  job_->Abort();",
          "new_line_content": "  SaveAndSwitchContext saved_context(job_->isolate_, *job_->native_context_);",
          "content_same": false
        },
        {
          "line": 2779,
          "old_api": "url",
          "new_api": null,
          "old_text": "job_->stream_->url()",
          "new_text": null,
          "old_line_content": "      job_->isolate_, module_bytes, wire_bytes, job_->stream_->url());",
          "new_line_content": "  return true;",
          "content_same": false
        },
        {
          "line": 2781,
          "old_api": "is_null",
          "new_api": null,
          "old_text": "result.is_null()",
          "new_text": null,
          "old_line_content": "  if (result.is_null()) return false;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2784,
          "old_api": "ToHandleChecked",
          "new_api": null,
          "old_text": "result.ToHandleChecked()",
          "new_text": null,
          "old_line_content": "      job_->isolate_->global_handles()->Create(*result.ToHandleChecked());",
          "new_line_content": "    std::shared_ptr<Counters> async_counters)",
          "content_same": false
        },
        {
          "line": 2787,
          "old_api": "FinishCompile",
          "new_api": null,
          "old_text": "job_->FinishCompile(false)",
          "new_text": null,
          "old_line_content": "  job_->FinishCompile(false);",
          "new_line_content": "      compile_mode_(FLAG_wasm_tier_up &&",
          "content_same": false
        },
        {
          "line": 2794,
          "old_api": "get",
          "new_api": null,
          "old_text": "native_module.get()",
          "new_text": null,
          "old_line_content": "    : native_module_(native_module.get()),",
          "new_line_content": "void CompilationStateImpl::InitCompileJob(WasmEngine* engine) {",
          "content_same": false
        },
        {
          "line": 2797,
          "old_api": "module",
          "new_api": null,
          "old_text": "native_module->module()",
          "new_text": null,
          "old_line_content": "                            native_module->module()->origin == kWasmOrigin",
          "new_line_content": "      TaskPriority::kUserVisible,",
          "content_same": false
        },
        {
          "line": 2800,
          "old_api": "std::move(async_counters)",
          "new_api": null,
          "old_text": "std::move(async_counters)",
          "new_text": null,
          "old_line_content": "      async_counters_(std::move(async_counters)),",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2801,
          "old_api": "num_functions",
          "new_api": null,
          "old_text": "native_module->num_functions()",
          "new_text": null,
          "old_line_content": "      compilation_unit_queues_(native_module->num_functions()) {}",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2804,
          "old_api": "DCHECK_NULL",
          "new_api": null,
          "old_text": "DCHECK_NULL(compile_job_)",
          "new_text": null,
          "old_line_content": "  DCHECK_NULL(compile_job_);",
          "new_line_content": "  base::MutexGuard callbacks_guard(&callbacks_mutex_);",
          "content_same": false
        },
        {
          "line": 2805,
          "old_api": "PostJob",
          "new_api": null,
          "old_text": "V8::GetCurrentPlatform()->PostJob(\n      TaskPriority::kUserVisible,\n      std::make_unique<BackgroundCompileJob>(native_module_weak_, engine,\n                                             async_counters_))",
          "new_text": null,
          "old_line_content": "  compile_job_ = V8::GetCurrentPlatform()->PostJob(",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2816,
          "old_api": "contains",
          "new_api": null,
          "old_text": "finished_events_.contains(\n          CompilationEvent::kFinishedBaselineCompilation)",
          "new_text": null,
          "old_line_content": "      finished_events_.contains(",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2824,
          "old_api": "store",
          "new_api": null,
          "old_text": "compile_cancelled_.store(true, std::memory_order_relaxed)",
          "new_text": null,
          "old_line_content": "  compile_cancelled_.store(true, std::memory_order_relaxed);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2831,
          "old_api": "load",
          "new_api": null,
          "old_text": "compile_cancelled_.load(std::memory_order_relaxed)",
          "new_text": null,
          "old_line_content": "  return compile_cancelled_.load(std::memory_order_relaxed);",
          "new_line_content": "  base::MutexGuard guard(&callbacks_mutex_);",
          "content_same": false
        },
        {
          "line": 2836,
          "old_api": "failed",
          "new_api": null,
          "old_text": "failed()",
          "new_text": null,
          "old_line_content": "  DCHECK(!failed());",
          "new_line_content": "  int start = module->num_imported_functions;",
          "content_same": false
        },
        {
          "line": 2837,
          "old_api": "enabled_features",
          "new_api": null,
          "old_text": "native_module_->enabled_features()",
          "new_text": null,
          "old_line_content": "  auto enabled_features = native_module_->enabled_features();",
          "new_line_content": "  int end = start + module->num_declared_functions;",
          "content_same": false
        },
        {
          "line": 2838,
          "old_api": "module",
          "new_api": null,
          "old_text": "native_module_->module()",
          "new_text": null,
          "old_line_content": "  auto* module = native_module_->module();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2841,
          "old_api": "DCHECK_EQ",
          "new_api": null,
          "old_text": "DCHECK_EQ(0, outstanding_baseline_units_)",
          "new_text": null,
          "old_line_content": "  DCHECK_EQ(0, outstanding_baseline_units_);",
          "new_line_content": "    if (prefer_liftoff) {",
          "content_same": false
        },
        {
          "line": 2848,
          "old_api": "IsTieredDown",
          "new_api": null,
          "old_text": "native_module_->IsTieredDown()",
          "new_text": null,
          "old_line_content": "  const bool prefer_liftoff = native_module_->IsTieredDown();",
          "new_line_content": "      outstanding_top_tier_functions_++;",
          "content_same": false
        },
        {
          "line": 2853,
          "old_api": "RequiredBaselineTierField::encode(ExecutionTier::kLiftoff)",
          "new_api": null,
          "old_text": "RequiredBaselineTierField::encode(ExecutionTier::kLiftoff)",
          "new_text": null,
          "old_line_content": "          RequiredBaselineTierField::encode(ExecutionTier::kLiftoff) |",
          "new_line_content": "    CompileStrategy strategy =",
          "content_same": false
        },
        {
          "line": 2855,
          "old_api": "push_back",
          "new_api": null,
          "old_text": "compilation_progress_.push_back(kLiftoffOnlyFunctionProgress)",
          "new_text": null,
          "old_line_content": "      compilation_progress_.push_back(kLiftoffOnlyFunctionProgress);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2860,
          "old_api": "GetRequestedExecutionTiers",
          "new_api": null,
          "old_text": "GetRequestedExecutionTiers(\n        module, compile_mode(), enabled_features, func_index)",
          "new_text": null,
          "old_line_content": "    ExecutionTierPair requested_tiers = GetRequestedExecutionTiers(",
          "new_line_content": "                  strategy == CompileStrategy::kLazyBaselineEagerTopTier);",
          "content_same": false
        },
        {
          "line": 2861,
          "old_api": "compile_mode",
          "new_api": null,
          "old_text": "compile_mode()",
          "new_text": null,
          "old_line_content": "        module, compile_mode(), enabled_features, func_index);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2863,
          "old_api": "GetCompileStrategy",
          "new_api": null,
          "old_text": "GetCompileStrategy(module, enabled_features, func_index, lazy_module)",
          "new_text": null,
          "old_line_content": "        GetCompileStrategy(module, enabled_features, func_index, lazy_module);",
          "new_line_content": "    if (required_for_baseline) outstanding_baseline_units_++;",
          "content_same": false
        },
        {
          "line": 2867,
          "old_api": "DCHECK_EQ",
          "new_api": null,
          "old_text": "DCHECK_EQ(required_for_top_tier,\n              strategy == CompileStrategy::kEager ||\n                  strategy == CompileStrategy::kLazyBaselineEagerTopTier)",
          "new_text": null,
          "old_line_content": "    DCHECK_EQ(required_for_top_tier,",
          "new_line_content": "    ExecutionTier required_baseline_tier = required_for_baseline",
          "content_same": false
        },
        {
          "line": 2885,
          "old_api": "RequiredTopTierField::update(function_progress, required_top_tier)",
          "new_api": null,
          "old_text": "RequiredTopTierField::update(function_progress, required_top_tier)",
          "new_text": null,
          "old_line_content": "        RequiredTopTierField::update(function_progress, required_top_tier);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2886,
          "old_api": "push_back",
          "new_api": null,
          "old_text": "compilation_progress_.push_back(function_progress)",
          "new_text": null,
          "old_line_content": "    compilation_progress_.push_back(function_progress);",
          "new_line_content": "  // Trigger callbacks if module needs no baseline or top tier compilation. This",
          "content_same": false
        },
        {
          "line": 2889,
          "old_api": "DCHECK_IMPLIES",
          "new_api": null,
          "old_text": "DCHECK_IMPLIES(lazy_module, outstanding_top_tier_functions_ == 0)",
          "new_text": null,
          "old_line_content": "  DCHECK_IMPLIES(lazy_module, outstanding_top_tier_functions_ == 0);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2890,
          "old_api": "DCHECK_LE",
          "new_api": null,
          "old_text": "DCHECK_LE(0, outstanding_baseline_units_)",
          "new_text": null,
          "old_line_content": "  DCHECK_LE(0, outstanding_baseline_units_);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2891,
          "old_api": "DCHECK_LE",
          "new_api": null,
          "old_text": "DCHECK_LE(outstanding_baseline_units_, outstanding_top_tier_functions_)",
          "new_text": null,
          "old_line_content": "  DCHECK_LE(outstanding_baseline_units_, outstanding_top_tier_functions_);",
          "new_line_content": "void CompilationStateImpl::InitializeCompilationProgressAfterDeserialization() {",
          "content_same": false
        },
        {
          "line": 2903,
          "old_api": "empty",
          "new_api": null,
          "old_text": "compilation_progress_.empty()",
          "new_text": null,
          "old_line_content": "  DCHECK(compilation_progress_.empty());",
          "new_line_content": "                               kProgressAfterDeserialization);",
          "content_same": false
        },
        {
          "line": 2904,
          "old_api": "constexpr",
          "new_api": null,
          "old_text": "constexpr",
          "new_text": null,
          "old_line_content": "  constexpr uint8_t kProgressAfterDeserialization =",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2905,
          "old_api": "RequiredBaselineTierField::encode(ExecutionTier::kTurbofan)",
          "new_api": null,
          "old_text": "RequiredBaselineTierField::encode(ExecutionTier::kTurbofan)",
          "new_text": null,
          "old_line_content": "      RequiredBaselineTierField::encode(ExecutionTier::kTurbofan) |",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2906,
          "old_api": "RequiredTopTierField::encode(ExecutionTier::kTurbofan)",
          "new_api": null,
          "old_text": "RequiredTopTierField::encode(ExecutionTier::kTurbofan)",
          "new_text": null,
          "old_line_content": "      RequiredTopTierField::encode(ExecutionTier::kTurbofan) |",
          "new_line_content": "void CompilationStateImpl::InitializeRecompilation(",
          "content_same": false
        },
        {
          "line": 2907,
          "old_api": "ReachedTierField::encode(ExecutionTier::kTurbofan)",
          "new_api": null,
          "old_text": "ReachedTierField::encode(ExecutionTier::kTurbofan)",
          "new_text": null,
          "old_line_content": "      ReachedTierField::encode(ExecutionTier::kTurbofan);",
          "new_line_content": "    TieringState new_tiering_state,",
          "content_same": false
        },
        {
          "line": 2908,
          "old_api": "Add",
          "new_api": null,
          "old_text": "finished_events_.Add(CompilationEvent::kFinishedExportWrappers)",
          "new_text": null,
          "old_line_content": "  finished_events_.Add(CompilationEvent::kFinishedExportWrappers);",
          "new_line_content": "    CompilationState::callback_t recompilation_finished_callback) {",
          "content_same": false
        },
        {
          "line": 2910,
          "old_api": "Add",
          "new_api": null,
          "old_text": "finished_events_.Add(CompilationEvent::kFinishedTopTierCompilation)",
          "new_text": null,
          "old_line_content": "  finished_events_.Add(CompilationEvent::kFinishedTopTierCompilation);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2911,
          "old_api": "assign",
          "new_api": null,
          "old_text": "compilation_progress_.assign(module->num_declared_functions,\n                               kProgressAfterDeserialization)",
          "new_text": null,
          "old_line_content": "  compilation_progress_.assign(module->num_declared_functions,",
          "new_line_content": "  // Hold the mutex as long as possible, to synchronize between multiple",
          "content_same": false
        },
        {
          "line": 2918,
          "old_api": "failed",
          "new_api": null,
          "old_text": "failed()",
          "new_text": null,
          "old_line_content": "  DCHECK(!failed());",
          "new_line_content": "  // different tiers concurrently. Note that the compilation unit queues can run",
          "content_same": false
        },
        {
          "line": 2932,
          "old_api": "GetTotalSize",
          "new_api": null,
          "old_text": "compilation_unit_queues_.GetTotalSize()",
          "new_text": null,
          "old_line_content": "         compilation_unit_queues_.GetTotalSize() > 0) {",
          "new_line_content": "  // NativeModule. Before updating information here, consult the NativeModule to",
          "content_same": false
        },
        {
          "line": 2933,
          "old_api": "reset",
          "new_api": null,
          "old_text": "guard.reset()",
          "new_text": null,
          "old_line_content": "    guard.reset();",
          "new_line_content": "  // find all functions that need recompilation.",
          "content_same": false
        },
        {
          "line": 2934,
          "old_api": "constexpr",
          "new_api": null,
          "old_text": "constexpr",
          "new_text": null,
          "old_line_content": "    constexpr JobDelegate* kNoDelegate = nullptr;",
          "new_line_content": "  // Since the current tiering state is updated on the NativeModule before",
          "content_same": false
        },
        {
          "line": 2935,
          "old_api": "get",
          "new_api": null,
          "old_text": "async_counters_.get()",
          "new_text": null,
          "old_line_content": "    ExecuteCompilationUnits(native_module_weak_, async_counters_.get(),",
          "new_line_content": "  // triggering recompilation, it's OK if the information is slightly outdated.",
          "content_same": false
        },
        {
          "line": 2937,
          "old_api": "emplace",
          "new_api": null,
          "old_text": "guard.emplace(&callbacks_mutex_)",
          "new_text": null,
          "old_line_content": "    guard.emplace(&callbacks_mutex_);",
          "new_line_content": "  // code (or code compiled for the wrong tier).",
          "content_same": false
        },
        {
          "line": 2948,
          "old_api": "FindFunctionsToRecompile",
          "new_api": null,
          "old_text": "native_module_->FindFunctionsToRecompile(new_tiering_state)",
          "new_text": null,
          "old_line_content": "      native_module_->FindFunctionsToRecompile(new_tiering_state);",
          "new_line_content": "  base::Optional<CompilationUnitBuilder> builder;",
          "content_same": false
        },
        {
          "line": 2958,
          "old_api": "size",
          "new_api": null,
          "old_text": "compilation_progress_.size()",
          "new_text": null,
          "old_line_content": "  if (compilation_progress_.size() > 0) {",
          "new_line_content": "    for (auto& progress : compilation_progress_) {",
          "content_same": false
        },
        {
          "line": 2960,
          "old_api": "module",
          "new_api": null,
          "old_text": "native_module_->module()",
          "new_text": null,
          "old_line_content": "    const WasmModule* module = native_module_->module();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2961,
          "old_api": "size",
          "new_api": null,
          "old_text": "compilation_progress_.size()",
          "new_text": null,
          "old_line_content": "    DCHECK_EQ(module->num_declared_functions, compilation_progress_.size());",
          "new_line_content": "    auto new_tier = new_tiering_state == kTieredDown ? ExecutionTier::kLiftoff",
          "content_same": false
        },
        {
          "line": 2962,
          "old_api": "size",
          "new_api": null,
          "old_text": "DCHECK_GE(module->num_declared_functions,\n              recompile_function_indexes.size())",
          "new_text": null,
          "old_line_content": "    DCHECK_GE(module->num_declared_functions,",
          "new_line_content": "                                                     : ExecutionTier::kTurbofan;",
          "content_same": false
        },
        {
          "line": 2963,
          "old_api": "size",
          "new_api": null,
          "old_text": "recompile_function_indexes.size()",
          "new_text": null,
          "old_line_content": "              recompile_function_indexes.size());",
          "new_line_content": "    int imported = module->num_imported_functions;",
          "content_same": false
        },
        {
          "line": 2965,
          "old_api": "size",
          "new_api": null,
          "old_text": "recompile_function_indexes.size()",
          "new_text": null,
          "old_line_content": "        static_cast<int>(recompile_function_indexes.size());",
          "new_line_content": "    for (int function_index : recompile_function_indexes) {",
          "content_same": false
        },
        {
          "line": 2968,
          "old_api": "MissingRecompilationField::update(progress, false)",
          "new_api": null,
          "old_text": "MissingRecompilationField::update(progress, false)",
          "new_text": null,
          "old_line_content": "      progress = MissingRecompilationField::update(progress, false);",
          "new_line_content": "      auto& progress = compilation_progress_[slot_index];",
          "content_same": false
        },
        {
          "line": 2975,
          "old_api": "DCHECK_LE",
          "new_api": null,
          "old_text": "DCHECK_LE(imported, function_index)",
          "new_text": null,
          "old_line_content": "      DCHECK_LE(imported, function_index);",
          "new_line_content": "  if (outstanding_recompilation_functions_ == 0) {",
          "content_same": false
        },
        {
          "line": 2978,
          "old_api": "MissingRecompilationField::update(progress, true)",
          "new_api": null,
          "old_text": "MissingRecompilationField::update(progress, true)",
          "new_text": null,
          "old_line_content": "      progress = MissingRecompilationField::update(progress, true);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 2979,
          "old_api": "AddRecompilationUnit",
          "new_api": null,
          "old_text": "builder->AddRecompilationUnit(function_index, new_tier)",
          "new_text": null,
          "old_line_content": "      builder->AddRecompilationUnit(function_index, new_tier);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2985,
          "old_api": "base::EnumSet<CompilationEvent>(\n        {CompilationEvent::kFinishedRecompilation})",
          "new_api": null,
          "old_text": "base::EnumSet<CompilationEvent>(\n        {CompilationEvent::kFinishedRecompilation})",
          "new_text": null,
          "old_line_content": "    TriggerCallbacks(base::EnumSet<CompilationEvent>(",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2989,
          "old_api": "has_value",
          "new_api": null,
          "old_text": "builder.has_value()",
          "new_text": null,
          "old_line_content": "  if (builder.has_value()) {",
          "new_line_content": "  // Immediately trigger events that already happened.",
          "content_same": false
        },
        {
          "line": 2991,
          "old_api": "reset",
          "new_api": null,
          "old_text": "guard.reset()",
          "new_text": null,
          "old_line_content": "    guard.reset();",
          "new_line_content": "                     CompilationEvent::kFinishedBaselineCompilation,",
          "content_same": false
        },
        {
          "line": 2992,
          "old_api": "Commit",
          "new_api": null,
          "old_text": "builder->Commit()",
          "new_text": null,
          "old_line_content": "    builder->Commit();",
          "new_line_content": "                     CompilationEvent::kFinishedTopTierCompilation,",
          "content_same": false
        },
        {
          "line": 3003,
          "old_api": "contains",
          "new_api": null,
          "old_text": "finished_events_.contains(event)",
          "new_text": null,
          "old_line_content": "    if (finished_events_.contains(event)) {",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 3004,
          "old_api": "callback",
          "new_api": null,
          "old_text": "callback(event)",
          "new_text": null,
          "old_line_content": "      callback(event);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3007,
          "old_api": "constexpr",
          "new_api": null,
          "old_text": "constexpr",
          "new_text": null,
          "old_line_content": "  constexpr base::EnumSet<CompilationEvent> kFinalEvents{",
          "new_line_content": "    Vector<WasmCompilationUnit> baseline_units,",
          "content_same": false
        },
        {
          "line": 3010,
          "old_api": "contains_any",
          "new_api": null,
          "old_text": "finished_events_.contains_any(kFinalEvents)",
          "new_text": null,
          "old_line_content": "  if (!finished_events_.contains_any(kFinalEvents)) {",
          "new_line_content": "        js_to_wasm_wrapper_units) {",
          "content_same": false
        },
        {
          "line": 3020,
          "old_api": "empty",
          "new_api": null,
          "old_text": "js_to_wasm_wrapper_units.empty()",
          "new_text": null,
          "old_line_content": "  if (!js_to_wasm_wrapper_units.empty()) {",
          "new_line_content": "                                           std::memory_order_release);",
          "content_same": false
        },
        {
          "line": 3025,
          "old_api": "end",
          "new_api": null,
          "old_text": "js_to_wasm_wrapper_units.end()",
          "new_text": null,
          "old_line_content": "                                     js_to_wasm_wrapper_units.end());",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 3028,
          "old_api": "size",
          "new_api": null,
          "old_text": "js_to_wasm_wrapper_units.size()",
          "new_text": null,
          "old_line_content": "    outstanding_js_to_wasm_wrappers_.store(js_to_wasm_wrapper_units.size(),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3031,
          "old_api": "empty",
          "new_api": null,
          "old_text": "top_tier_units.empty()",
          "new_text": null,
          "old_line_content": "  if (!baseline_units.empty() || !top_tier_units.empty()) {",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3032,
          "old_api": "AddUnits",
          "new_api": null,
          "old_text": "compilation_unit_queues_.AddUnits(baseline_units, top_tier_units,\n                                      native_module_->module())",
          "new_text": null,
          "old_line_content": "    compilation_unit_queues_.AddUnits(baseline_units, top_tier_units,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3033,
          "old_api": "module",
          "new_api": null,
          "old_text": "native_module_->module()",
          "new_text": null,
          "old_line_content": "                                      native_module_->module());",
          "new_line_content": "void CompilationStateImpl::AddTopTierPriorityCompilationUnit(",
          "content_same": false
        },
        {
          "line": 3039,
          "old_api": "AddCompilationUnits",
          "new_api": null,
          "old_text": "AddCompilationUnits({}, {&unit, 1}, {})",
          "new_text": null,
          "old_line_content": "  AddCompilationUnits({}, {&unit, 1}, {});",
          "new_line_content": "std::shared_ptr<JSToWasmWrapperCompilationUnit>",
          "content_same": false
        },
        {
          "line": 3044,
          "old_api": "AddTopTierPriorityUnit",
          "new_api": null,
          "old_text": "compilation_unit_queues_.AddTopTierPriorityUnit(unit, priority)",
          "new_text": null,
          "old_line_content": "  compilation_unit_queues_.AddTopTierPriorityUnit(unit, priority);",
          "new_line_content": "  // {js_to_wasm_wrapper_units_} is available.",
          "content_same": false
        },
        {
          "line": 3045,
          "old_api": "NotifyConcurrencyIncrease",
          "new_api": null,
          "old_text": "compile_job_->NotifyConcurrencyIncrease()",
          "new_text": null,
          "old_line_content": "  compile_job_->NotifyConcurrencyIncrease();",
          "new_line_content": "  while (outstanding_units &&",
          "content_same": false
        },
        {
          "line": 3051,
          "old_api": "load",
          "new_api": null,
          "old_text": "outstanding_js_to_wasm_wrappers_.load(std::memory_order_relaxed)",
          "new_text": null,
          "old_line_content": "      outstanding_js_to_wasm_wrappers_.load(std::memory_order_relaxed);",
          "new_line_content": "  if (outstanding_units == 0) return nullptr;",
          "content_same": false
        },
        {
          "line": 3055,
          "old_api": "compare_exchange_weak",
          "new_api": null,
          "old_text": "outstanding_js_to_wasm_wrappers_.compare_exchange_weak(\n             outstanding_units, outstanding_units - 1,\n             std::memory_order_acquire)",
          "new_text": null,
          "old_line_content": "         !outstanding_js_to_wasm_wrappers_.compare_exchange_weak(",
          "new_line_content": "void CompilationStateImpl::FinalizeJSToWasmWrappers(",
          "content_same": false
        },
        {
          "line": 3067,
          "old_api": "factory",
          "new_api": null,
          "old_text": "isolate->factory()->NewFixedArray(\n      MaxNumExportWrappers(module), AllocationType::kOld)",
          "new_text": null,
          "old_line_content": "  *export_wrappers_out = isolate->factory()->NewFixedArray(",
          "new_line_content": "  for (auto& unit : js_to_wasm_wrapper_units_) {",
          "content_same": false
        },
        {
          "line": 3074,
          "old_api": "size",
          "new_api": null,
          "old_text": "js_to_wasm_wrapper_units_.size()",
          "new_text": null,
          "old_line_content": "               js_to_wasm_wrapper_units_.size());",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 3075,
          "old_api": "heap",
          "new_api": null,
          "old_text": "isolate->heap()",
          "new_text": null,
          "old_line_content": "  CodeSpaceMemoryModificationScope modification_scope(isolate->heap());",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3077,
          "old_api": "isolate",
          "new_api": null,
          "old_text": "unit->isolate()",
          "new_text": null,
          "old_line_content": "    DCHECK_EQ(isolate, unit->isolate());",
          "new_line_content": "CompilationUnitQueues::Queue* CompilationStateImpl::GetQueueForCompileTask(",
          "content_same": false
        },
        {
          "line": 3078,
          "old_api": "Finalize",
          "new_api": null,
          "old_text": "unit->Finalize()",
          "new_text": null,
          "old_line_content": "    Handle<Code> code = unit->Finalize();",
          "new_line_content": "    int task_id) {",
          "content_same": false
        },
        {
          "line": 3080,
          "old_api": "is_import",
          "new_api": null,
          "old_text": "unit->is_import()",
          "new_text": null,
          "old_line_content": "        GetExportWrapperIndex(module, unit->sig(), unit->is_import());",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3081,
          "old_api": "set",
          "new_api": null,
          "old_text": "*export_wrappers_out)->set(wrapper_index, *code)",
          "new_text": null,
          "old_line_content": "    (*export_wrappers_out)->set(wrapper_index, *code);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3082,
          "old_api": "counters",
          "new_api": null,
          "old_text": "isolate->counters()",
          "new_text": null,
          "old_line_content": "    RecordStats(*code, isolate->counters());",
          "new_line_content": "base::Optional<WasmCompilationUnit>",
          "content_same": false
        },
        {
          "line": 3088,
          "old_api": "GetQueueForTask",
          "new_api": null,
          "old_text": "compilation_unit_queues_.GetQueueForTask(task_id)",
          "new_text": null,
          "old_line_content": "  return compilation_unit_queues_.GetQueueForTask(task_id);",
          "new_line_content": "void CompilationStateImpl::OnFinishedUnits(Vector<WasmCode*> code_vector) {",
          "content_same": false
        },
        {
          "line": 3094,
          "old_api": "GetNextUnit",
          "new_api": null,
          "old_text": "compilation_unit_queues_.GetNextUnit(queue, baseline_only)",
          "new_text": null,
          "old_line_content": "  return compilation_unit_queues_.GetNextUnit(queue, baseline_only);",
          "new_line_content": "  // In case of no outstanding compilation units we can return early.",
          "content_same": false
        },
        {
          "line": 3098,
          "old_api": "TRACE_DISABLED_BY_DEFAULT",
          "new_api": null,
          "old_text": "TRACE_DISABLED_BY_DEFAULT(\"v8.wasm.detailed\")",
          "new_text": null,
          "old_line_content": "  TRACE_EVENT1(TRACE_DISABLED_BY_DEFAULT(\"v8.wasm.detailed\"),",
          "new_line_content": "      outstanding_top_tier_functions_ == 0 &&",
          "content_same": false
        },
        {
          "line": 3099,
          "old_api": "size",
          "new_api": null,
          "old_text": "code_vector.size()",
          "new_text": null,
          "old_line_content": "               \"wasm.OnFinishedUnits\", \"units\", code_vector.size());",
          "new_line_content": "      outstanding_recompilation_functions_ == 0) {",
          "content_same": false
        },
        {
          "line": 3118,
          "old_api": "size",
          "new_api": null,
          "old_text": "compilation_progress_.size()",
          "new_text": null,
          "old_line_content": "  DCHECK_EQ(compilation_progress_.size(),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3123,
          "old_api": "size",
          "new_api": null,
          "old_text": "code_vector.size()",
          "new_text": null,
          "old_line_content": "  for (size_t i = 0; i < code_vector.size(); i++) {",
          "new_line_content": "      outstanding_baseline_units_--;",
          "content_same": false
        },
        {
          "line": 3125,
          "old_api": "DCHECK_NOT_NULL",
          "new_api": null,
          "old_text": "DCHECK_NOT_NULL(code)",
          "new_text": null,
          "old_line_content": "    DCHECK_NOT_NULL(code);",
          "new_line_content": "      // Function.",
          "content_same": false
        },
        {
          "line": 3128,
          "old_api": "index",
          "new_api": null,
          "old_text": "code->index()",
          "new_text": null,
          "old_line_content": "    if (code->index() <",
          "new_line_content": "      // Read function's compilation progress.",
          "content_same": false
        },
        {
          "line": 3129,
          "old_api": "num_imported_functions",
          "new_api": null,
          "old_text": "native_module_->num_imported_functions()",
          "new_text": null,
          "old_line_content": "        static_cast<int>(native_module_->num_imported_functions())) {",
          "new_line_content": "      // This view on the compilation progress may differ from the actually",
          "content_same": false
        },
        {
          "line": 3131,
          "old_api": "tier",
          "new_api": null,
          "old_text": "code->tier()",
          "new_text": null,
          "old_line_content": "      DCHECK_EQ(code->tier(), ExecutionTier::kTurbofan);",
          "new_line_content": "      // compilation progress but may publish code to the code manager.",
          "content_same": false
        },
        {
          "line": 3135,
          "old_api": "tier",
          "new_api": null,
          "old_text": "code->tier()",
          "new_text": null,
          "old_line_content": "      DCHECK_NE(code->tier(), ExecutionTier::kNone);",
          "new_line_content": "      ExecutionTier required_baseline_tier =",
          "content_same": false
        },
        {
          "line": 3142,
          "old_api": "index",
          "new_api": null,
          "old_text": "code->index()",
          "new_text": null,
          "old_line_content": "          declared_function_index(native_module_->module(), code->index());",
          "new_line_content": "      if (reached_tier < required_baseline_tier &&",
          "content_same": false
        },
        {
          "line": 3145,
          "old_api": "RequiredBaselineTierField::decode(function_progress)",
          "new_api": null,
          "old_text": "RequiredBaselineTierField::decode(function_progress)",
          "new_text": null,
          "old_line_content": "          RequiredBaselineTierField::decode(function_progress);",
          "new_line_content": "        outstanding_baseline_units_--;",
          "content_same": false
        },
        {
          "line": 3147,
          "old_api": "RequiredTopTierField::decode(function_progress)",
          "new_api": null,
          "old_text": "RequiredTopTierField::decode(function_progress)",
          "new_text": null,
          "old_line_content": "          RequiredTopTierField::decode(function_progress);",
          "new_line_content": "      if (reached_tier < required_top_tier &&",
          "content_same": false
        },
        {
          "line": 3152,
          "old_api": "tier",
          "new_api": null,
          "old_text": "code->tier()",
          "new_text": null,
          "old_line_content": "          required_baseline_tier <= code->tier()) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3157,
          "old_api": "tier",
          "new_api": null,
          "old_text": "code->tier()",
          "new_text": null,
          "old_line_content": "          required_top_tier <= code->tier()) {",
          "new_line_content": "        // irrelevant here. In particular, we want to ignore any outstanding",
          "content_same": false
        },
        {
          "line": 3158,
          "old_api": "DCHECK_GT",
          "new_api": null,
          "old_text": "DCHECK_GT(outstanding_top_tier_functions_, 0)",
          "new_text": null,
          "old_line_content": "        DCHECK_GT(outstanding_top_tier_functions_, 0);",
          "new_line_content": "        // non-debugging units.",
          "content_same": false
        },
        {
          "line": 3162,
          "old_api": "MissingRecompilationField::decode(function_progress)",
          "new_api": null,
          "old_text": "MissingRecompilationField::decode(function_progress)",
          "new_text": null,
          "old_line_content": "      if (V8_UNLIKELY(MissingRecompilationField::decode(function_progress))) {",
          "new_line_content": "        if (matches) {",
          "content_same": false
        },
        {
          "line": 3163,
          "old_api": "DCHECK_LT",
          "new_api": null,
          "old_text": "DCHECK_LT(0, outstanding_recompilation_functions_)",
          "new_text": null,
          "old_line_content": "        DCHECK_LT(0, outstanding_recompilation_functions_);",
          "new_line_content": "          outstanding_recompilation_functions_--;",
          "content_same": false
        },
        {
          "line": 3169,
          "old_api": "for_debugging",
          "new_api": null,
          "old_text": "code->for_debugging()",
          "new_text": null,
          "old_line_content": "                           ? code->for_debugging()",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3170,
          "old_api": "tier",
          "new_api": null,
          "old_text": "code->tier()",
          "new_text": null,
          "old_line_content": "                           : code->tier() == ExecutionTier::kTurbofan;",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 3176,
          "old_api": "Add",
          "new_api": null,
          "old_text": "triggered_events.Add(CompilationEvent::kFinishedRecompilation)",
          "new_text": null,
          "old_line_content": "            triggered_events.Add(CompilationEvent::kFinishedRecompilation);",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 3182,
          "old_api": "tier",
          "new_api": null,
          "old_text": "code->tier()",
          "new_text": null,
          "old_line_content": "      if (code->tier() > reached_tier) {",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3183,
          "old_api": "tier",
          "new_api": null,
          "old_text": "ReachedTierField::update(\n            compilation_progress_[slot_index], code->tier())",
          "new_text": null,
          "old_line_content": "        compilation_progress_[slot_index] = ReachedTierField::update(",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3184,
          "old_api": "tier",
          "new_api": null,
          "old_text": "code->tier()",
          "new_text": null,
          "old_line_content": "            compilation_progress_[slot_index], code->tier());",
          "new_line_content": "void CompilationStateImpl::OnFinishedJSToWasmWrapperUnits(int num) {",
          "content_same": false
        },
        {
          "line": 3186,
          "old_api": "DCHECK_LE",
          "new_api": null,
          "old_text": "DCHECK_LE(0, outstanding_baseline_units_)",
          "new_text": null,
          "old_line_content": "      DCHECK_LE(0, outstanding_baseline_units_);",
          "new_line_content": "  base::MutexGuard guard(&callbacks_mutex_);",
          "content_same": false
        },
        {
          "line": 3190,
          "old_api": "TriggerCallbacks",
          "new_api": null,
          "old_text": "TriggerCallbacks(triggered_events)",
          "new_text": null,
          "old_line_content": "  TriggerCallbacks(triggered_events);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3196,
          "old_api": "DCHECK_GE",
          "new_api": null,
          "old_text": "DCHECK_GE(outstanding_export_wrappers_, num)",
          "new_text": null,
          "old_line_content": "  DCHECK_GE(outstanding_export_wrappers_, num);",
          "new_line_content": "  if (outstanding_export_wrappers_ == 0) {",
          "content_same": false
        },
        {
          "line": 3198,
          "old_api": "TriggerCallbacks",
          "new_api": null,
          "old_text": "TriggerCallbacks()",
          "new_text": null,
          "old_line_content": "  TriggerCallbacks();",
          "new_line_content": "    if (outstanding_baseline_units_ == 0) {",
          "content_same": false
        },
        {
          "line": 3203,
          "old_api": "TryLock",
          "new_api": null,
          "old_text": "callbacks_mutex_.TryLock()",
          "new_text": null,
          "old_line_content": "  DCHECK(!callbacks_mutex_.TryLock());",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3208,
          "old_api": "Add",
          "new_api": null,
          "old_text": "triggered_events.Add(CompilationEvent::kFinishedBaselineCompilation)",
          "new_text": null,
          "old_line_content": "      triggered_events.Add(CompilationEvent::kFinishedBaselineCompilation);",
          "new_line_content": "    triggered_events =",
          "content_same": false
        },
        {
          "line": 3210,
          "old_api": "Add",
          "new_api": null,
          "old_text": "triggered_events.Add(CompilationEvent::kFinishedTopTierCompilation)",
          "new_text": null,
          "old_line_content": "        triggered_events.Add(CompilationEvent::kFinishedTopTierCompilation);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 3215,
          "old_api": "load",
          "new_api": null,
          "old_text": "compile_failed_.load(std::memory_order_relaxed)",
          "new_text": null,
          "old_line_content": "  if (compile_failed_.load(std::memory_order_relaxed)) {",
          "new_line_content": "  triggered_events -= finished_events_;",
          "content_same": false
        },
        {
          "line": 3218,
          "old_api": "base::EnumSet<CompilationEvent>({CompilationEvent::kFailedCompilation})",
          "new_api": null,
          "old_text": "base::EnumSet<CompilationEvent>({CompilationEvent::kFailedCompilation})",
          "new_text": null,
          "old_line_content": "        base::EnumSet<CompilationEvent>({CompilationEvent::kFailedCompilation});",
          "new_line_content": "      triggered_events - CompilationEvent::kFinishedRecompilation;",
          "content_same": false
        },
        {
          "line": 3230,
          "old_api": "std::make_pair(CompilationEvent::kFailedCompilation,\n                       \"wasm.CompilationFailed\")",
          "new_api": null,
          "old_text": "std::make_pair(CompilationEvent::kFailedCompilation,\n                       \"wasm.CompilationFailed\")",
          "new_text": null,
          "old_line_content": "       {std::make_pair(CompilationEvent::kFailedCompilation,",
          "new_line_content": "                       \"wasm.RecompilationFinished\")}) {",
          "content_same": false
        },
        {
          "line": 3234,
          "old_api": "std::make_pair(CompilationEvent::kFinishedBaselineCompilation,\n                       \"wasm.BaselineFinished\")",
          "new_api": null,
          "old_text": "std::make_pair(CompilationEvent::kFinishedBaselineCompilation,\n                       \"wasm.BaselineFinished\")",
          "new_text": null,
          "old_line_content": "        std::make_pair(CompilationEvent::kFinishedBaselineCompilation,",
          "new_line_content": "    for (auto& callback : callbacks_) {",
          "content_same": false
        },
        {
          "line": 3236,
          "old_api": "std::make_pair(CompilationEvent::kFinishedTopTierCompilation,\n                       \"wasm.TopTierFinished\")",
          "new_api": null,
          "old_text": "std::make_pair(CompilationEvent::kFinishedTopTierCompilation,\n                       \"wasm.TopTierFinished\")",
          "new_text": null,
          "old_line_content": "        std::make_pair(CompilationEvent::kFinishedTopTierCompilation,",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3238,
          "old_api": "std::make_pair(CompilationEvent::kFinishedRecompilation,\n                       \"wasm.RecompilationFinished\")",
          "new_api": null,
          "old_text": "std::make_pair(CompilationEvent::kFinishedRecompilation,\n                       \"wasm.RecompilationFinished\")",
          "new_text": null,
          "old_line_content": "        std::make_pair(CompilationEvent::kFinishedRecompilation,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3240,
          "old_api": "contains",
          "new_api": null,
          "old_text": "triggered_events.contains(event.first)",
          "new_text": null,
          "old_line_content": "    if (!triggered_events.contains(event.first)) continue;",
          "new_line_content": "      outstanding_top_tier_functions_ == 0 &&",
          "content_same": false
        },
        {
          "line": 3241,
          "old_api": "DCHECK_NE",
          "new_api": null,
          "old_text": "DCHECK_NE(compilation_id_, kInvalidCompilationID)",
          "new_text": null,
          "old_line_content": "    DCHECK_NE(compilation_id_, kInvalidCompilationID);",
          "new_line_content": "      outstanding_recompilation_functions_ == 0) {",
          "content_same": false
        },
        {
          "line": 3242,
          "old_api": "TRACE_EVENT1",
          "new_api": null,
          "old_text": "TRACE_EVENT1(\"v8.wasm\", event.second, \"id\", compilation_id_)",
          "new_text": null,
          "old_line_content": "    TRACE_EVENT1(\"v8.wasm\", event.second, \"id\", compilation_id_);",
          "new_line_content": "    // Clear the callbacks because no more events will be delivered.",
          "content_same": false
        },
        {
          "line": 3244,
          "old_api": "callback",
          "new_api": null,
          "old_text": "callback(event.first)",
          "new_text": null,
          "old_line_content": "      callback(event.first);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 3252,
          "old_api": "clear",
          "new_api": null,
          "old_text": "callbacks_.clear()",
          "new_text": null,
          "old_line_content": "    callbacks_.clear();",
          "new_line_content": "void CompilationStateImpl::PublishDetectedFeatures(Isolate* isolate) {",
          "content_same": false
        },
        {
          "line": 3258,
          "old_api": "Add",
          "new_api": null,
          "old_text": "detected_features_.Add(detected)",
          "new_text": null,
          "old_line_content": "  detected_features_.Add(detected);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3271,
          "old_api": "empty",
          "new_api": null,
          "old_text": "unpublished_code.empty()",
          "new_text": null,
          "old_line_content": "  if (unpublished_code.empty()) return;",
          "new_line_content": "    if (func_index < num_imported_functions) {",
          "content_same": false
        },
        {
          "line": 3274,
          "old_api": "num_imported_functions",
          "new_api": null,
          "old_text": "native_module_->num_imported_functions()",
          "new_text": null,
          "old_line_content": "  int num_imported_functions = native_module_->num_imported_functions();",
          "new_line_content": "      WasmImportWrapperCache::CacheKey key(",
          "content_same": false
        },
        {
          "line": 3275,
          "old_api": "import_wrapper_cache",
          "new_api": null,
          "old_text": "native_module_->import_wrapper_cache()",
          "new_text": null,
          "old_line_content": "  WasmImportWrapperCache* cache = native_module_->import_wrapper_cache();",
          "new_line_content": "          compiler::kDefaultImportCallKind, sig,",
          "content_same": false
        },
        {
          "line": 3277,
          "old_api": "index",
          "new_api": null,
          "old_text": "code->index()",
          "new_text": null,
          "old_line_content": "    int func_index = code->index();",
          "new_line_content": "      // If two imported functions have the same key, only one of them should",
          "content_same": false
        },
        {
          "line": 3278,
          "old_api": "DCHECK_LE",
          "new_api": null,
          "old_text": "DCHECK_LE(0, func_index)",
          "new_text": null,
          "old_line_content": "    DCHECK_LE(0, func_index);",
          "new_line_content": "      // have been added as a compilation unit. So it is always the first time",
          "content_same": false
        },
        {
          "line": 3279,
          "old_api": "num_functions",
          "new_api": null,
          "old_text": "native_module_->num_functions()",
          "new_text": null,
          "old_line_content": "    DCHECK_LT(func_index, native_module_->num_functions());",
          "new_line_content": "      // we compile a wrapper for this key here.",
          "content_same": false
        },
        {
          "line": 3289,
          "old_api": "DCHECK_NULL",
          "new_api": null,
          "old_text": "DCHECK_NULL((*cache)[key])",
          "new_text": null,
          "old_line_content": "      DCHECK_NULL((*cache)[key]);",
          "new_line_content": "  WasmCodeRefScope code_ref_scope;",
          "content_same": false
        },
        {
          "line": 3290,
          "old_api": "get",
          "new_api": null,
          "old_text": "code.get()",
          "new_text": null,
          "old_line_content": "      (*cache)[key] = code.get();",
          "new_line_content": "  std::vector<WasmCode*> published_code =",
          "content_same": false
        },
        {
          "line": 3300,
          "old_api": "std::move(code)",
          "new_api": null,
          "old_text": "std::move(code)",
          "new_text": null,
          "old_line_content": "      native_module_->PublishCode(std::move(code));",
          "new_line_content": "void CompilationStateImpl::SchedulePublishCompilationResults(",
          "content_same": false
        },
        {
          "line": 3302,
          "old_api": "HasWireBytes",
          "new_api": null,
          "old_text": "native_module_->HasWireBytes()",
          "new_text": null,
          "old_line_content": "  if (native_module_->HasWireBytes()) {",
          "new_line_content": "  {",
          "content_same": false
        },
        {
          "line": 3303,
          "old_api": "VectorOf",
          "new_api": null,
          "old_text": "VectorOf(published_code)",
          "new_text": null,
          "old_line_content": "    native_module_->engine()->LogCode(VectorOf(published_code));",
          "new_line_content": "    base::MutexGuard guard(&publish_mutex_);",
          "content_same": false
        },
        {
          "line": 3317,
          "old_api": "std::move(c)",
          "new_api": null,
          "old_text": "std::move(c)",
          "new_text": null,
          "old_line_content": "        publish_queue_.emplace_back(std::move(c));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3324,
          "old_api": "std::move(unpublished_code)",
          "new_api": null,
          "old_text": "std::move(unpublished_code)",
          "new_text": null,
          "old_line_content": "    PublishCompilationResults(std::move(unpublished_code));",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3329,
          "old_api": "DCHECK",
          "new_api": null,
          "old_text": "DCHECK(publisher_running_)",
          "new_text": null,
          "old_line_content": "    DCHECK(publisher_running_);",
          "new_line_content": "size_t CompilationStateImpl::NumOutstandingCompilations() const {",
          "content_same": false
        },
        {
          "line": 3330,
          "old_api": "empty",
          "new_api": null,
          "old_text": "publish_queue_.empty()",
          "new_text": null,
          "old_line_content": "    if (publish_queue_.empty()) {",
          "new_line_content": "  size_t outstanding_wrappers =",
          "content_same": false
        },
        {
          "line": 3334,
          "old_api": "swap",
          "new_api": null,
          "old_text": "unpublished_code.swap(publish_queue_)",
          "new_text": null,
          "old_line_content": "    unpublished_code.swap(publish_queue_);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3340,
          "old_api": "load",
          "new_api": null,
          "old_text": "outstanding_js_to_wasm_wrappers_.load(std::memory_order_relaxed)",
          "new_text": null,
          "old_line_content": "      outstanding_js_to_wasm_wrappers_.load(std::memory_order_relaxed);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 3341,
          "old_api": "GetTotalSize",
          "new_api": null,
          "old_text": "compilation_unit_queues_.GetTotalSize()",
          "new_text": null,
          "old_line_content": "  size_t outstanding_functions = compilation_unit_queues_.GetTotalSize();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3346,
          "old_api": "store",
          "new_api": null,
          "old_text": "compile_cancelled_.store(true, std::memory_order_relaxed)",
          "new_text": null,
          "old_line_content": "  compile_cancelled_.store(true, std::memory_order_relaxed);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3347,
          "old_api": "exchange",
          "new_api": null,
          "old_text": "compile_failed_.exchange(true, std::memory_order_relaxed)",
          "new_text": null,
          "old_line_content": "  if (compile_failed_.exchange(true, std::memory_order_relaxed)) {",
          "new_line_content": "void CompilationStateImpl::WaitForCompilationEvent(",
          "content_same": false
        },
        {
          "line": 3352,
          "old_api": "TriggerCallbacks",
          "new_api": null,
          "old_text": "TriggerCallbacks()",
          "new_text": null,
          "old_line_content": "  TriggerCallbacks();",
          "new_line_content": "                                         CompilationEvent::kFailedCompilation};",
          "content_same": false
        },
        {
          "line": 3353,
          "old_api": "clear",
          "new_api": null,
          "old_text": "callbacks_.clear()",
          "new_text": null,
          "old_line_content": "  callbacks_.clear();",
          "new_line_content": "  {",
          "content_same": false
        },
        {
          "line": 3364,
          "old_api": "contains_any",
          "new_api": null,
          "old_text": "finished_events_.contains_any(events)",
          "new_text": null,
          "old_line_content": "    if (finished_events_.contains_any(events)) return;",
          "new_line_content": "   public:",
          "content_same": false
        },
        {
          "line": 3367,
          "old_api": "store",
          "new_api": null,
          "old_text": "done->store(true, std::memory_order_relaxed)",
          "new_text": null,
          "old_line_content": "      done->store(true, std::memory_order_relaxed);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3368,
          "old_api": "Signal",
          "new_api": null,
          "old_text": "semaphore->Signal()",
          "new_text": null,
          "old_line_content": "      semaphore->Signal();",
          "new_line_content": "    bool ShouldYield() override {",
          "content_same": false
        },
        {
          "line": 3375,
          "old_api": "std::move(done)",
          "new_api": null,
          "old_text": "std::move(done)",
          "new_text": null,
          "old_line_content": "        : done_(std::move(done)) {}",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3378,
          "old_api": "load",
          "new_api": null,
          "old_text": "done_->load(std::memory_order_relaxed)",
          "new_text": null,
          "old_line_content": "      return done_->load(std::memory_order_relaxed);",
          "new_line_content": "   private:",
          "content_same": false
        },
        {
          "line": 3383,
          "old_api": "UNIMPLEMENTED",
          "new_api": null,
          "old_text": "UNIMPLEMENTED()",
          "new_text": null,
          "old_line_content": "    void NotifyConcurrencyIncrease() override { UNIMPLEMENTED(); }",
          "new_line_content": "  // Everything except for top-tier units will be processed with kBaselineOnly",
          "content_same": false
        },
        {
          "line": 3399,
          "old_api": "get",
          "new_api": null,
          "old_text": "async_counters_.get()",
          "new_text": null,
          "old_line_content": "  ExecuteCompilationUnits(native_module_weak_, async_counters_.get(), &delegate,",
          "new_line_content": "    std::unordered_map<JSToWasmWrapperKey,",
          "content_same": false
        },
        {
          "line": 3401,
          "old_api": "Wait",
          "new_api": null,
          "old_text": "semaphore->Wait()",
          "new_text": null,
          "old_line_content": "  semaphore->Wait();",
          "new_line_content": "                       base::hash<JSToWasmWrapperKey>>;",
          "content_same": false
        },
        {
          "line": 1355,
          "old_api": "tier",
          "new_api": null,
          "old_text": "unit->tier()",
          "new_text": null,
          "old_line_content": "                              unit->tier() == ExecutionTier::kTurbofan;",
          "new_line_content": "      if (batch_full || liftoff_finished) {",
          "content_same": false
        },
        {
          "line": 1363,
          "old_api": "tier",
          "new_api": null,
          "old_text": "unit->tier()",
          "new_text": null,
          "old_line_content": "                                   unit->tier() == ExecutionTier::kTurbofan;",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1366,
          "old_api": "native_module",
          "new_api": null,
          "old_text": "compile_scope.native_module()->AddCompiledCode(\n                VectorOf(std::move(results_to_publish)))",
          "new_text": null,
          "old_line_content": "            compile_scope.native_module()->AddCompiledCode(",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1367,
          "old_api": "std::move(results_to_publish)",
          "new_api": null,
          "old_text": "std::move(results_to_publish)",
          "new_text": null,
          "old_line_content": "                VectorOf(std::move(results_to_publish)));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1368,
          "old_api": "clear",
          "new_api": null,
          "old_text": "results_to_publish.clear()",
          "new_text": null,
          "old_line_content": "        results_to_publish.clear();",
          "new_line_content": "using JSToWasmWrapperKey = std::pair<bool, FunctionSig>;",
          "content_same": false
        },
        {
          "line": 1369,
          "old_api": "compilation_state",
          "new_api": null,
          "old_text": "compile_scope.compilation_state()->SchedulePublishCompilationResults(\n            std::move(unpublished_code))",
          "new_text": null,
          "old_line_content": "        compile_scope.compilation_state()->SchedulePublishCompilationResults(",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1370,
          "old_api": "std::move(unpublished_code)",
          "new_api": null,
          "old_text": "std::move(unpublished_code)",
          "new_text": null,
          "old_line_content": "            std::move(unpublished_code));",
          "new_line_content": "// Returns the number of units added.",
          "content_same": false
        },
        {
          "line": 3418,
          "old_api": "size",
          "new_api": null,
          "old_text": "queue->size()",
          "new_text": null,
          "old_line_content": "        outstanding_units_(queue->size()) {}",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 1374,
          "old_api": "UNREACHABLE",
          "new_api": null,
          "old_text": "UNREACHABLE()",
          "new_text": null,
          "old_line_content": "  UNREACHABLE();",
          "new_line_content": "                          const WasmFeatures& enabled_features) {",
          "content_same": false
        },
        {
          "line": 3422,
          "old_api": "get",
          "new_api": null,
          "old_text": "*compilation_units_)[*key].get()",
          "new_text": null,
          "old_line_content": "      JSToWasmWrapperCompilationUnit* unit = (*compilation_units_)[*key].get();",
          "new_line_content": "    // {outstanding_units_} includes the units that other workers are currently",
          "content_same": false
        },
        {
          "line": 3423,
          "old_api": "Execute",
          "new_api": null,
          "old_text": "unit->Execute()",
          "new_text": null,
          "old_line_content": "      unit->Execute();",
          "new_line_content": "    // working on, so we can safely ignore the {worker_count} and just return",
          "content_same": false
        },
        {
          "line": 3424,
          "old_api": "fetch_sub",
          "new_api": null,
          "old_text": "outstanding_units_.fetch_sub(1, std::memory_order_relaxed)",
          "new_text": null,
          "old_line_content": "      outstanding_units_.fetch_sub(1, std::memory_order_relaxed);",
          "new_line_content": "    // the current number of outstanding units.",
          "content_same": false
        },
        {
          "line": 3430,
          "old_api": "DCHECK_GE",
          "new_api": null,
          "old_text": "DCHECK_GE(FLAG_wasm_num_compilation_tasks, 1)",
          "new_text": null,
          "old_line_content": "    DCHECK_GE(FLAG_wasm_num_compilation_tasks, 1);",
          "new_line_content": "  JSToWasmWrapperQueue* const queue_;",
          "content_same": false
        },
        {
          "line": 3434,
          "old_api": "static_cast<size_t>(FLAG_wasm_num_compilation_tasks)",
          "new_api": null,
          "old_text": "static_cast<size_t>(FLAG_wasm_num_compilation_tasks)",
          "new_text": null,
          "old_line_content": "    return std::min(static_cast<size_t>(FLAG_wasm_num_compilation_tasks),",
          "new_line_content": "}  // namespace",
          "content_same": false
        },
        {
          "line": 1387,
          "old_api": "module",
          "new_api": null,
          "old_text": "native_module->module()",
          "new_text": null,
          "old_line_content": "    auto& function = native_module->module()->functions[exp.index];",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 3435,
          "old_api": "load",
          "new_api": null,
          "old_text": "outstanding_units_.load(std::memory_order_relaxed)",
          "new_text": null,
          "old_line_content": "                    outstanding_units_.load(std::memory_order_relaxed));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1390,
          "old_api": "module",
          "new_api": null,
          "old_text": "std::make_shared<JSToWasmWrapperCompilationUnit>(\n          isolate, wasm_engine, function.sig, native_module->module(),\n          function.imported, enabled_features,\n          JSToWasmWrapperCompilationUnit::kAllowGeneric)",
          "new_text": null,
          "old_line_content": "      auto unit = std::make_shared<JSToWasmWrapperCompilationUnit>(",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1391,
          "old_api": "module",
          "new_api": null,
          "old_text": "native_module->module()",
          "new_text": null,
          "old_line_content": "          isolate, wasm_engine, function.sig, native_module->module(),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1394,
          "old_api": "std::move(unit)",
          "new_api": null,
          "old_text": "std::move(unit)",
          "new_text": null,
          "old_line_content": "      builder->AddJSToWasmWrapperUnit(std::move(unit));",
          "new_line_content": "                          CompilationUnitBuilder* builder) {",
          "content_same": false
        },
        {
          "line": 3447,
          "old_api": "factory",
          "new_api": null,
          "old_text": "isolate->factory()->NewFixedArray(\n      MaxNumExportWrappers(module), AllocationType::kOld)",
          "new_text": null,
          "old_line_content": "  *export_wrappers_out = isolate->factory()->NewFixedArray(",
          "new_line_content": "    if (exp.kind != kExternalFunction) continue;",
          "content_same": false
        },
        {
          "line": 3448,
          "old_api": "MaxNumExportWrappers",
          "new_api": null,
          "old_text": "MaxNumExportWrappers(module)",
          "new_text": null,
          "old_line_content": "      MaxNumExportWrappers(module), AllocationType::kOld);",
          "new_line_content": "    auto& function = module->functions[exp.index];",
          "content_same": false
        },
        {
          "line": 1409,
          "old_api": "module",
          "new_api": null,
          "old_text": "native_module->module()",
          "new_text": null,
          "old_line_content": "    const FunctionSig* sig = native_module->module()->functions[func_index].sig;",
          "new_line_content": "    if (it.second) {",
          "content_same": false
        },
        {
          "line": 1410,
          "old_api": "module",
          "new_api": null,
          "old_text": "native_module->module()",
          "new_text": null,
          "old_line_content": "    if (!IsJSCompatibleSignature(sig, native_module->module(),",
          "new_line_content": "      // Ensure that all keys exist in the cache, so that we can populate the",
          "content_same": false
        },
        {
          "line": 1411,
          "old_api": "enabled_features",
          "new_api": null,
          "old_text": "native_module->enabled_features()",
          "new_text": null,
          "old_line_content": "                                 native_module->enabled_features())) {",
          "new_line_content": "      // cache later without locking.",
          "content_same": false
        },
        {
          "line": 3459,
          "old_api": "insert",
          "new_api": null,
          "old_text": "queue.insert(key)",
          "new_text": null,
          "old_line_content": "    if (queue.insert(key)) {",
          "new_line_content": "  auto job =",
          "content_same": false
        },
        {
          "line": 3461,
          "old_api": "wasm_engine",
          "new_api": null,
          "old_text": "isolate->wasm_engine()",
          "new_text": null,
          "old_line_content": "          isolate, isolate->wasm_engine(), function.sig, module,",
          "new_line_content": "  if (FLAG_wasm_num_compilation_tasks > 0) {",
          "content_same": false
        },
        {
          "line": 3464,
          "old_api": "std::move(unit)",
          "new_api": null,
          "old_text": "std::move(unit)",
          "new_text": null,
          "old_line_content": "      compilation_units.emplace(key, std::move(unit));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1417,
          "old_api": "insert",
          "new_api": null,
          "old_text": "keys.insert(key)",
          "new_text": null,
          "old_line_content": "    auto it = keys.insert(key);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3469,
          "old_api": "std::make_unique<CompileJSToWasmWrapperJob>(&queue, &compilation_units)",
          "new_api": null,
          "old_text": "std::make_unique<CompileJSToWasmWrapperJob>(&queue, &compilation_units)",
          "new_text": null,
          "old_line_content": "      std::make_unique<CompileJSToWasmWrapperJob>(&queue, &compilation_units);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 3471,
          "old_api": "PostJob",
          "new_api": null,
          "old_text": "V8::GetCurrentPlatform()->PostJob(\n        TaskPriority::kUserVisible, std::move(job))",
          "new_text": null,
          "old_line_content": "    auto job_handle = V8::GetCurrentPlatform()->PostJob(",
          "new_line_content": "  // Finalize compilation jobs in the main thread.",
          "content_same": false
        },
        {
          "line": 3472,
          "old_api": "std::move(job)",
          "new_api": null,
          "old_text": "std::move(job)",
          "new_text": null,
          "old_line_content": "        TaskPriority::kUserVisible, std::move(job));",
          "new_line_content": "  // TODO(6792): Wrappers below are allocated with {Factory::NewCode}. As an",
          "content_same": false
        },
        {
          "line": 3477,
          "old_api": "Run",
          "new_api": null,
          "old_text": "job->Run(nullptr)",
          "new_text": null,
          "old_line_content": "    job->Run(nullptr);",
          "new_line_content": "    JSToWasmWrapperKey key = pair.first;",
          "content_same": false
        },
        {
          "line": 1430,
          "old_api": "compilation_state",
          "new_api": null,
          "old_text": "native_module->compilation_state()",
          "new_text": null,
          "old_line_content": "      Impl(native_module->compilation_state());",
          "new_line_content": "  for (uint32_t func_index = start; func_index < end; func_index++) {",
          "content_same": false
        },
        {
          "line": 1431,
          "old_api": "module",
          "new_api": null,
          "old_text": "native_module->module()",
          "new_text": null,
          "old_line_content": "  const bool lazy_module = IsLazyModule(native_module->module());",
          "new_line_content": "    if (prefer_liftoff) {",
          "content_same": false
        },
        {
          "line": 1434,
          "old_api": "module",
          "new_api": null,
          "old_text": "native_module->module()",
          "new_text": null,
          "old_line_content": "  auto* module = native_module->module();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3484,
          "old_api": "heap",
          "new_api": null,
          "old_text": "isolate->heap()",
          "new_text": null,
          "old_line_content": "  CodeSpaceMemoryModificationScope modification_scope(isolate->heap());",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 3487,
          "old_api": "get",
          "new_api": null,
          "old_text": "pair.second.get()",
          "new_text": null,
          "old_line_content": "    JSToWasmWrapperCompilationUnit* unit = pair.second.get();",
          "new_line_content": "WasmCode* CompileImportWrapper(",
          "content_same": false
        },
        {
          "line": 3488,
          "old_api": "isolate",
          "new_api": null,
          "old_text": "unit->isolate()",
          "new_text": null,
          "old_line_content": "    DCHECK_EQ(isolate, unit->isolate());",
          "new_line_content": "    WasmEngine* wasm_engine, NativeModule* native_module, Counters* counters,",
          "content_same": false
        },
        {
          "line": 3489,
          "old_api": "Finalize",
          "new_api": null,
          "old_text": "unit->Finalize()",
          "new_text": null,
          "old_line_content": "    Handle<Code> code = unit->Finalize();",
          "new_line_content": "    compiler::WasmImportCallKind kind, const FunctionSig* sig,",
          "content_same": false
        },
        {
          "line": 3490,
          "old_api": "GetExportWrapperIndex",
          "new_api": null,
          "old_text": "GetExportWrapperIndex(module, &key.second, key.first)",
          "new_text": null,
          "old_line_content": "    int wrapper_index = GetExportWrapperIndex(module, &key.second, key.first);",
          "new_line_content": "    int expected_arity,",
          "content_same": false
        },
        {
          "line": 3491,
          "old_api": "set",
          "new_api": null,
          "old_text": "*export_wrappers_out)->set(wrapper_index, *code)",
          "new_text": null,
          "old_line_content": "    (*export_wrappers_out)->set(wrapper_index, *code);",
          "new_line_content": "    WasmImportWrapperCache::ModificationScope* cache_scope) {",
          "content_same": false
        },
        {
          "line": 3492,
          "old_api": "counters",
          "new_api": null,
          "old_text": "isolate->counters()",
          "new_text": null,
          "old_line_content": "    RecordStats(*code, isolate->counters());",
          "new_line_content": "  // Entry should exist, so that we don't insert a new one and invalidate",
          "content_same": false
        },
        {
          "line": 1445,
          "old_api": "enabled_features",
          "new_api": null,
          "old_text": "native_module->enabled_features()",
          "new_text": null,
          "old_line_content": "        module, native_module->enabled_features(), func_index, lazy_module);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1452,
          "old_api": "DCHECK_EQ",
          "new_api": null,
          "old_text": "DCHECK_EQ(strategy, CompileStrategy::kEager)",
          "new_text": null,
          "old_line_content": "      DCHECK_EQ(strategy, CompileStrategy::kEager);",
          "new_line_content": "      lazy_module, num_import_wrappers, num_export_wrappers);",
          "content_same": false
        },
        {
          "line": 1456,
          "old_api": "AddImportWrapperUnits",
          "new_api": null,
          "old_text": "AddImportWrapperUnits(native_module, &builder)",
          "new_text": null,
          "old_line_content": "  int num_import_wrappers = AddImportWrapperUnits(native_module, &builder);",
          "new_line_content": "bool MayCompriseLazyFunctions(const WasmModule* module,",
          "content_same": false
        },
        {
          "line": 3505,
          "old_api": "DCHECK_NULL",
          "new_api": null,
          "old_text": "DCHECK_NULL((*cache_scope)[key])",
          "new_text": null,
          "old_line_content": "  DCHECK_NULL((*cache_scope)[key]);",
          "new_line_content": "      result.tagged_parameter_slots,",
          "content_same": false
        },
        {
          "line": 1458,
          "old_api": "wasm_engine",
          "new_api": null,
          "old_text": "isolate->wasm_engine()",
          "new_text": null,
          "old_line_content": "      AddExportWrapperUnits(isolate, isolate->wasm_engine(), native_module,",
          "new_line_content": "                              bool lazy_module) {",
          "content_same": false
        },
        {
          "line": 1460,
          "old_api": "InitializeCompilationProgress",
          "new_api": null,
          "old_text": "compilation_state->InitializeCompilationProgress(\n      lazy_module, num_import_wrappers, num_export_wrappers)",
          "new_text": null,
          "old_line_content": "  compilation_state->InitializeCompilationProgress(",
          "new_line_content": "#ifdef ENABLE_SLOW_DCHECKS",
          "content_same": false
        },
        {
          "line": 1462,
          "old_api": "Commit",
          "new_api": null,
          "old_text": "builder.Commit()",
          "new_text": null,
          "old_line_content": "  builder.Commit();",
          "new_line_content": "  int end = start + module->num_declared_functions;",
          "content_same": false
        },
        {
          "line": 3510,
          "old_api": "compiler::CompileWasmImportCallWrapper(\n      wasm_engine, &env, kind, sig, source_positions, expected_arity)",
          "new_api": null,
          "old_text": "compiler::CompileWasmImportCallWrapper(\n      wasm_engine, &env, kind, sig, source_positions, expected_arity)",
          "new_text": null,
          "old_line_content": "  WasmCompilationResult result = compiler::CompileWasmImportCallWrapper(",
          "new_line_content": "  (*cache_scope)[key] = published_code;",
          "content_same": false
        },
        {
          "line": 3515,
          "old_api": "as_vector",
          "new_api": null,
          "old_text": "result.protected_instructions_data.as_vector()",
          "new_text": null,
          "old_line_content": "      result.protected_instructions_data.as_vector(),",
          "new_line_content": "  return published_code;",
          "content_same": false
        },
        {
          "line": 1468,
          "old_api": "has_compilation_hints",
          "new_api": null,
          "old_text": "enabled_features.has_compilation_hints()",
          "new_text": null,
          "old_line_content": "  if (lazy_module || enabled_features.has_compilation_hints()) return true;",
          "new_line_content": "  return false;",
          "content_same": false
        },
        {
          "line": 3516,
          "old_api": "GetCodeKind",
          "new_api": null,
          "old_text": "GetCodeKind(result)",
          "new_text": null,
          "old_line_content": "      result.source_positions.as_vector(), GetCodeKind(result),",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3518,
          "old_api": "std::move(wasm_code)",
          "new_api": null,
          "old_text": "std::move(wasm_code)",
          "new_text": null,
          "old_line_content": "  WasmCode* published_code = native_module->PublishCode(std::move(wasm_code));",
          "new_line_content": "}  // namespace wasm",
          "content_same": false
        },
        {
          "line": 3520,
          "old_api": "IncRef",
          "new_api": null,
          "old_text": "published_code->IncRef()",
          "new_text": null,
          "old_line_content": "  published_code->IncRef();",
          "new_line_content": "}  // namespace v8",
          "content_same": false
        },
        {
          "line": 1473,
          "old_api": "GetCompileStrategy",
          "new_api": null,
          "old_text": "GetCompileStrategy(module, enabled_features, func_index,\n                                   lazy_module)",
          "new_text": null,
          "old_line_content": "    SLOW_DCHECK(GetCompileStrategy(module, enabled_features, func_index,",
          "new_line_content": "  enum CompileMode { kSynchronous, kAsync, kStreaming };",
          "content_same": false
        },
        {
          "line": 3521,
          "old_api": "length",
          "new_api": null,
          "old_text": "counters->wasm_generated_code_size()->Increment(\n      published_code->instructions().length())",
          "new_text": null,
          "old_line_content": "  counters->wasm_generated_code_size()->Increment(",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3522,
          "old_api": "length",
          "new_api": null,
          "old_text": "published_code->instructions().length()",
          "new_text": null,
          "old_line_content": "      published_code->instructions().length());",
          "new_line_content": "#undef TRACE_COMPILE",
          "content_same": false
        },
        {
          "line": 3523,
          "old_api": "length",
          "new_api": null,
          "old_text": "published_code->reloc_info().length()",
          "new_text": null,
          "old_line_content": "  counters->wasm_reloc_size()->Increment(published_code->reloc_info().length());",
          "new_line_content": "#undef TRACE_STREAMING",
          "content_same": false
        },
        {
          "line": 1489,
          "old_api": "std::move(async_counters)",
          "new_api": null,
          "old_text": "std::move(async_counters)",
          "new_text": null,
          "old_line_content": "        async_counters_(std::move(async_counters)),",
          "new_line_content": "    if (!native_module) return;",
          "content_same": false
        },
        {
          "line": 1492,
          "old_api": "std::move(native_module)",
          "new_api": null,
          "old_text": "std::move(native_module)",
          "new_text": null,
          "old_line_content": "        native_module_(std::move(native_module)),",
          "new_line_content": "    if (event == CompilationEvent::kFinishedBaselineCompilation) {",
          "content_same": false
        },
        {
          "line": 1496,
          "old_api": "base::TimeTicks::IsHighResolution()",
          "new_api": null,
          "old_text": "base::TimeTicks::IsHighResolution()",
          "new_text": null,
          "old_line_content": "    DCHECK(base::TimeTicks::IsHighResolution());",
          "new_line_content": "        TimedHistogram* histogram =",
          "content_same": false
        },
        {
          "line": 1497,
          "old_api": "lock",
          "new_api": null,
          "old_text": "native_module_.lock()",
          "new_text": null,
          "old_line_content": "    std::shared_ptr<NativeModule> native_module = native_module_.lock();",
          "new_line_content": "            compile_mode_ == kAsync",
          "content_same": false
        },
        {
          "line": 1507,
          "old_api": "wasm_async_compile_wasm_module_time",
          "new_api": null,
          "old_text": "async_counters_->wasm_async_compile_wasm_module_time()",
          "new_text": null,
          "old_line_content": "                ? async_counters_->wasm_async_compile_wasm_module_time()",
          "new_line_content": "          false,                                   // cached",
          "content_same": false
        },
        {
          "line": 1508,
          "old_api": "wasm_streaming_compile_wasm_module_time",
          "new_api": null,
          "old_text": "async_counters_->wasm_streaming_compile_wasm_module_time()",
          "new_text": null,
          "old_line_content": "                : async_counters_->wasm_streaming_compile_wasm_module_time();",
          "new_line_content": "          false,                                   // deserialized",
          "content_same": false
        },
        {
          "line": 1509,
          "old_api": "InMicroseconds",
          "new_api": null,
          "old_text": "duration.InMicroseconds()",
          "new_text": null,
          "old_line_content": "        histogram->AddSample(static_cast<int>(duration.InMicroseconds()));",
          "new_line_content": "          FLAG_wasm_lazy_compilation,              // lazy",
          "content_same": false
        },
        {
          "line": 1520,
          "old_api": "liftoff_code_size",
          "new_api": null,
          "old_text": "native_module->liftoff_code_size()",
          "new_text": null,
          "old_line_content": "          native_module->liftoff_code_size(),      // code_size_in_bytes",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1521,
          "old_api": "liftoff_bailout_count",
          "new_api": null,
          "old_text": "native_module->liftoff_bailout_count()",
          "new_text": null,
          "old_line_content": "          native_module->liftoff_bailout_count(),  // liftoff_bailout_count",
          "new_line_content": "      v8::metrics::WasmModuleTieredUp event{",
          "content_same": false
        },
        {
          "line": 1522,
          "old_api": "InMicroseconds",
          "new_api": null,
          "old_text": "duration.InMicroseconds()",
          "new_text": null,
          "old_line_content": "          duration.InMicroseconds()                // wall_clock_duration_in_us",
          "new_line_content": "          FLAG_wasm_lazy_compilation,           // lazy",
          "content_same": false
        },
        {
          "line": 1527,
          "old_api": "wasm_tier_up_module_time",
          "new_api": null,
          "old_text": "async_counters_->wasm_tier_up_module_time()",
          "new_text": null,
          "old_line_content": "      TimedHistogram* histogram = async_counters_->wasm_tier_up_module_time();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1528,
          "old_api": "InMicroseconds",
          "new_api": null,
          "old_text": "duration.InMicroseconds()",
          "new_text": null,
          "old_line_content": "      histogram->AddSample(static_cast<int>(duration.InMicroseconds()));",
          "new_line_content": "    if (event == CompilationEvent::kFailedCompilation) {",
          "content_same": false
        },
        {
          "line": 1532,
          "old_api": "turbofan_code_size",
          "new_api": null,
          "old_text": "native_module->turbofan_code_size()",
          "new_text": null,
          "old_line_content": "          native_module->turbofan_code_size(),  // code_size_in_bytes",
          "new_line_content": "          false,                                   // cached",
          "content_same": false
        },
        {
          "line": 1533,
          "old_api": "InMicroseconds",
          "new_api": null,
          "old_text": "duration.InMicroseconds()",
          "new_text": null,
          "old_line_content": "          duration.InMicroseconds()             // wall_clock_duration_in_us",
          "new_line_content": "          false,                                   // deserialized",
          "content_same": false
        },
        {
          "line": 1535,
          "old_api": "DelayMainThreadEvent",
          "new_api": null,
          "old_text": "metrics_recorder_->DelayMainThreadEvent(event, context_id_)",
          "new_text": null,
          "old_line_content": "      metrics_recorder_->DelayMainThreadEvent(event, context_id_);",
          "new_line_content": "          false,                                   // success",
          "content_same": false
        },
        {
          "line": 1545,
          "old_api": "liftoff_code_size",
          "new_api": null,
          "old_text": "native_module->liftoff_code_size()",
          "new_text": null,
          "old_line_content": "          native_module->liftoff_code_size(),      // code_size_in_bytes",
          "new_line_content": "  base::TimeTicks start_time_;",
          "content_same": false
        },
        {
          "line": 1546,
          "old_api": "liftoff_bailout_count",
          "new_api": null,
          "old_text": "native_module->liftoff_bailout_count()",
          "new_text": null,
          "old_line_content": "          native_module->liftoff_bailout_count(),  // liftoff_bailout_count",
          "new_line_content": "  const std::shared_ptr<Counters> async_counters_;",
          "content_same": false
        },
        {
          "line": 1547,
          "old_api": "InMicroseconds",
          "new_api": null,
          "old_text": "duration.InMicroseconds()",
          "new_text": null,
          "old_line_content": "          duration.InMicroseconds()                // wall_clock_duration_in_us",
          "new_line_content": "  std::shared_ptr<metrics::Recorder> metrics_recorder_;",
          "content_same": false
        },
        {
          "line": 1549,
          "old_api": "DelayMainThreadEvent",
          "new_api": null,
          "old_text": "metrics_recorder_->DelayMainThreadEvent(event, context_id_)",
          "new_text": null,
          "old_line_content": "      metrics_recorder_->DelayMainThreadEvent(event, context_id_);",
          "new_line_content": "  std::weak_ptr<NativeModule> native_module_;",
          "content_same": false
        },
        {
          "line": 1569,
          "old_api": "IsLazyModule",
          "new_api": null,
          "old_text": "IsLazyModule(wasm_module)",
          "new_text": null,
          "old_line_content": "  const bool lazy_module = IsLazyModule(wasm_module);",
          "new_line_content": "                         kOnlyLazyFunctions);",
          "content_same": false
        },
        {
          "line": 1576,
          "old_api": "counters",
          "new_api": null,
          "old_text": "isolate->counters()",
          "new_text": null,
          "old_line_content": "    ValidateSequentially(wasm_module, native_module.get(), isolate->counters(),",
          "new_line_content": "  // The callback captures a shared ptr to the semaphore.",
          "content_same": false
        },
        {
          "line": 1583,
          "old_api": "module",
          "new_api": null,
          "old_text": "native_module->module()",
          "new_text": null,
          "old_line_content": "  DCHECK_GE(kMaxInt, native_module->module()->num_declared_functions);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1586,
          "old_api": "compilation_state",
          "new_api": null,
          "old_text": "native_module->compilation_state()",
          "new_text": null,
          "old_line_content": "  auto* compilation_state = Impl(native_module->compilation_state());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1588,
          "old_api": "AddCallback",
          "new_api": null,
          "old_text": "compilation_state->AddCallback(CompilationTimeCallback{\n        isolate->async_counters(), isolate->metrics_recorder(), context_id,\n        native_module, CompilationTimeCallback::kSynchronous})",
          "new_text": null,
          "old_line_content": "    compilation_state->AddCallback(CompilationTimeCallback{",
          "new_line_content": "      CompilationEvent::kFinishedExportWrappers);",
          "content_same": false
        },
        {
          "line": 1589,
          "old_api": "metrics_recorder",
          "new_api": null,
          "old_text": "isolate->metrics_recorder()",
          "new_text": null,
          "old_line_content": "        isolate->async_counters(), isolate->metrics_recorder(), context_id,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1596,
          "old_api": "WaitForCompilationEvent",
          "new_api": null,
          "old_text": "compilation_state->WaitForCompilationEvent(\n      CompilationEvent::kFinishedExportWrappers)",
          "new_text": null,
          "old_line_content": "  compilation_state->WaitForCompilationEvent(",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 1599,
          "old_api": "failed",
          "new_api": null,
          "old_text": "compilation_state->failed()",
          "new_text": null,
          "old_line_content": "  if (compilation_state->failed()) {",
          "new_line_content": "    // For predictable mode, do not finalize wrappers yet to make sure we catch",
          "content_same": false
        },
        {
          "line": 1600,
          "old_api": "DCHECK_IMPLIES",
          "new_api": null,
          "old_text": "DCHECK_IMPLIES(lazy_module, !FLAG_wasm_lazy_validation)",
          "new_text": null,
          "old_line_content": "    DCHECK_IMPLIES(lazy_module, !FLAG_wasm_lazy_validation);",
          "new_line_content": "    // validation errors first.",
          "content_same": false
        },
        {
          "line": 1603,
          "old_api": "error",
          "new_api": null,
          "old_text": "thrower->error()",
          "new_text": null,
          "old_line_content": "    CHECK(thrower->error());",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 1619,
          "old_api": "failed",
          "new_api": null,
          "old_text": "compilation_state->failed()",
          "new_text": null,
          "old_line_content": "  if (compilation_state->failed()) {",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1620,
          "old_api": "DCHECK_IMPLIES",
          "new_api": null,
          "old_text": "DCHECK_IMPLIES(lazy_module, !FLAG_wasm_lazy_validation)",
          "new_text": null,
          "old_line_content": "    DCHECK_IMPLIES(lazy_module, !FLAG_wasm_lazy_validation);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1621,
          "old_api": "counters",
          "new_api": null,
          "old_text": "isolate->counters()",
          "new_text": null,
          "old_line_content": "    ValidateSequentially(wasm_module, native_module.get(), isolate->counters(),",
          "new_line_content": "class BackgroundCompileJob final : public JobTask {",
          "content_same": false
        },
        {
          "line": 1622,
          "old_api": "allocator",
          "new_api": null,
          "old_text": "isolate->allocator()",
          "new_text": null,
          "old_line_content": "                         isolate->allocator(), thrower, lazy_module);",
          "new_line_content": " public:",
          "content_same": false
        },
        {
          "line": 1625,
          "old_api": "FinalizeJSToWasmWrappers",
          "new_api": null,
          "old_text": "compilation_state->FinalizeJSToWasmWrappers(\n        isolate, native_module->module(), export_wrappers_out)",
          "new_text": null,
          "old_line_content": "    compilation_state->FinalizeJSToWasmWrappers(",
          "new_line_content": "                                std::shared_ptr<Counters> async_counters)",
          "content_same": false
        },
        {
          "line": 1632,
          "old_api": "explicit",
          "new_api": null,
          "old_text": "explicit",
          "new_text": null,
          "old_line_content": "  explicit BackgroundCompileJob(std::weak_ptr<NativeModule> native_module,",
          "new_line_content": "    if (!engine_scope) return;",
          "content_same": false
        },
        {
          "line": 1635,
          "old_api": "std::move(native_module)",
          "new_api": null,
          "old_text": "std::move(native_module)",
          "new_text": null,
          "old_line_content": "      : native_module_(std::move(native_module)),",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 1636,
          "old_api": "GetBarrierForBackgroundCompile",
          "new_api": null,
          "old_text": "engine->GetBarrierForBackgroundCompile()",
          "new_text": null,
          "old_line_content": "        engine_barrier_(engine->GetBarrierForBackgroundCompile()),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1637,
          "old_api": "std::move(async_counters)",
          "new_api": null,
          "old_text": "std::move(async_counters)",
          "new_text": null,
          "old_line_content": "        async_counters_(std::move(async_counters)) {}",
          "new_line_content": "  size_t GetMaxConcurrency(size_t worker_count) const override {",
          "content_same": false
        },
        {
          "line": 1640,
          "old_api": "TryLock",
          "new_api": null,
          "old_text": "engine_barrier_->TryLock()",
          "new_text": null,
          "old_line_content": "    auto engine_scope = engine_barrier_->TryLock();",
          "new_line_content": "    // NumOutstandingCompilations() does not reflect the units that running",
          "content_same": false
        },
        {
          "line": 1648,
          "old_api": "cancelled",
          "new_api": null,
          "old_text": "compile_scope.cancelled()",
          "new_text": null,
          "old_line_content": "    if (compile_scope.cancelled()) return 0;",
          "new_line_content": " private:",
          "content_same": false
        },
        {
          "line": 1651,
          "old_api": "compilation_state",
          "new_api": null,
          "old_text": "std::min(\n        static_cast<size_t>(FLAG_wasm_num_compilation_tasks),\n        worker_count +\n            compile_scope.compilation_state()->NumOutstandingCompilations())",
          "new_text": null,
          "old_line_content": "    return std::min(",
          "new_line_content": "  const std::shared_ptr<Counters> async_counters_;",
          "content_same": false
        },
        {
          "line": 1652,
          "old_api": "static_cast<size_t>(FLAG_wasm_num_compilation_tasks)",
          "new_api": null,
          "old_text": "static_cast<size_t>(FLAG_wasm_num_compilation_tasks)",
          "new_text": null,
          "old_line_content": "        static_cast<size_t>(FLAG_wasm_num_compilation_tasks),",
          "new_line_content": "};",
          "content_same": false
        },
        {
          "line": 1654,
          "old_api": "compilation_state",
          "new_api": null,
          "old_text": "compile_scope.compilation_state()->NumOutstandingCompilations()",
          "new_text": null,
          "old_line_content": "            compile_scope.compilation_state()->NumOutstandingCompilations());",
          "new_line_content": "}  // namespace",
          "content_same": false
        },
        {
          "line": 1671,
          "old_api": "module_bytes",
          "new_api": null,
          "old_text": "wire_bytes.module_bytes()",
          "new_text": null,
          "old_line_content": "      OwnedVector<uint8_t>::Of(wire_bytes.module_bytes());",
          "new_line_content": "    // TODO(thibaudm): Look into sharing export wrappers.",
          "content_same": false
        },
        {
          "line": 1678,
          "old_api": "as_vector",
          "new_api": null,
          "old_text": "wire_bytes_copy.as_vector()",
          "new_text": null,
          "old_line_content": "          wasm_module->origin, wire_bytes_copy.as_vector(), isolate);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1685,
          "old_api": "counters",
          "new_api": null,
          "old_text": "SELECT_WASM_COUNTER(\n      isolate->counters(), wasm_module->origin, wasm_compile, module_time)",
          "new_text": null,
          "old_line_content": "  TimedHistogramScope wasm_compile_module_time_scope(SELECT_WASM_COUNTER(",
          "new_line_content": "  const bool uses_liftoff = module->origin == kWasmOrigin && FLAG_liftoff;",
          "content_same": false
        },
        {
          "line": 1686,
          "old_api": "counters",
          "new_api": null,
          "old_text": "isolate->counters()",
          "new_text": null,
          "old_line_content": "      isolate->counters(), wasm_module->origin, wasm_compile, module_time));",
          "new_line_content": "  size_t code_size_estimate =",
          "content_same": false
        },
        {
          "line": 1690,
          "old_api": "CountUsage",
          "new_api": null,
          "old_text": "isolate->CountUsage(v8::Isolate::UseCounterFeature::kWasmSharedMemory)",
          "new_text": null,
          "old_line_content": "    isolate->CountUsage(v8::Isolate::UseCounterFeature::kWasmSharedMemory);",
          "new_line_content": "      isolate, enabled, module, code_size_estimate);",
          "content_same": false
        },
        {
          "line": 1696,
          "old_api": "get",
          "new_api": null,
          "old_text": "module.get()",
          "new_text": null,
          "old_line_content": "      wasm::WasmCodeManager::EstimateNativeModuleCodeSize(module.get(),",
          "new_line_content": "  v8::metrics::Recorder::ContextId context_id =",
          "content_same": false
        },
        {
          "line": 1703,
          "old_api": "compilation_state",
          "new_api": null,
          "old_text": "native_module->compilation_state()->SetHighPriority()",
          "new_text": null,
          "old_line_content": "  native_module->compilation_state()->SetHighPriority();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1706,
          "old_api": "native_context",
          "new_api": null,
          "old_text": "isolate->native_context()",
          "new_text": null,
          "old_line_content": "      isolate->GetOrRegisterRecorderContextId(isolate->native_context());",
          "new_line_content": "    return native_module;",
          "content_same": false
        },
        {
          "line": 1707,
          "old_api": "CompileNativeModule",
          "new_api": null,
          "old_text": "CompileNativeModule(isolate, context_id, thrower, wasm_module, native_module,\n                      export_wrappers_out)",
          "new_text": null,
          "old_line_content": "  CompileNativeModule(isolate, context_id, thrower, wasm_module, native_module,",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 1709,
          "old_api": "wasm_engine",
          "new_api": null,
          "old_text": "isolate->wasm_engine()->UpdateNativeModuleCache(\n      thrower->error(), &native_module, isolate)",
          "new_text": null,
          "old_line_content": "  bool cache_hit = !isolate->wasm_engine()->UpdateNativeModuleCache(",
          "new_line_content": "  // Ensure that the code objects are logged before returning.",
          "content_same": false
        },
        {
          "line": 1711,
          "old_api": "error",
          "new_api": null,
          "old_text": "thrower->error()",
          "new_text": null,
          "old_line_content": "  if (thrower->error()) return {};",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1714,
          "old_api": "CompileJsToWasmWrappers",
          "new_api": null,
          "old_text": "CompileJsToWasmWrappers(isolate, wasm_module, export_wrappers_out)",
          "new_text": null,
          "old_line_content": "    CompileJsToWasmWrappers(isolate, wasm_module, export_wrappers_out);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1727,
          "old_api": "std::make_shared<base::Semaphore>(0)",
          "new_api": null,
          "old_text": "std::make_shared<base::Semaphore>(0)",
          "new_text": null,
          "old_line_content": "  auto recompilation_finished_semaphore = std::make_shared<base::Semaphore>(0);",
          "new_line_content": "        if (event == CompilationEvent::kFinishedRecompilation) {",
          "content_same": false
        },
        {
          "line": 1735,
          "old_api": "DCHECK_NE",
          "new_api": null,
          "old_text": "DCHECK_NE(CompilationEvent::kFailedCompilation, event)",
          "new_text": null,
          "old_line_content": "        DCHECK_NE(CompilationEvent::kFailedCompilation, event);",
          "new_line_content": "                          kBaselineOnly);",
          "content_same": false
        },
        {
          "line": 1741,
          "old_api": "constexpr",
          "new_api": null,
          "old_text": "constexpr",
          "new_text": null,
          "old_line_content": "  constexpr JobDelegate* kNoDelegate = nullptr;",
          "new_line_content": "    Isolate* isolate, const WasmFeatures& enabled,",
          "content_same": false
        },
        {
          "line": 1742,
          "old_api": "native_module_weak",
          "new_api": null,
          "old_text": "compilation_state->native_module_weak()",
          "new_text": null,
          "old_line_content": "  ExecuteCompilationUnits(compilation_state->native_module_weak(),",
          "new_line_content": "    std::unique_ptr<byte[]> bytes_copy, size_t length, Handle<Context> context,",
          "content_same": false
        },
        {
          "line": 1743,
          "old_api": "counters",
          "new_api": null,
          "old_text": "compilation_state->counters()",
          "new_text": null,
          "old_line_content": "                          compilation_state->counters(), kNoDelegate,",
          "new_line_content": "    Handle<Context> incumbent_context, const char* api_method_name,",
          "content_same": false
        },
        {
          "line": 1745,
          "old_api": "Wait",
          "new_api": null,
          "old_text": "recompilation_finished_semaphore->Wait()",
          "new_text": null,
          "old_line_content": "  recompilation_finished_semaphore->Wait();",
          "new_line_content": "    : isolate_(isolate),",
          "content_same": false
        },
        {
          "line": 1746,
          "old_api": "failed",
          "new_api": null,
          "old_text": "compilation_state->failed()",
          "new_text": null,
          "old_line_content": "  DCHECK(!compilation_state->failed());",
          "new_line_content": "      api_method_name_(api_method_name),",
          "content_same": false
        },
        {
          "line": 1761,
          "old_api": "std::move(resolver)",
          "new_api": null,
          "old_text": "std::move(resolver)",
          "new_text": null,
          "old_line_content": "      resolver_(std::move(resolver)),",
          "new_line_content": "  native_context_ =",
          "content_same": false
        },
        {
          "line": 1766,
          "old_api": "CHECK",
          "new_api": null,
          "old_text": "CHECK(!FLAG_jitless)",
          "new_text": null,
          "old_line_content": "  CHECK(!FLAG_jitless);",
          "new_line_content": "  metrics_event_.async = true;",
          "content_same": false
        },
        {
          "line": 1767,
          "old_api": "reinterpret_cast<v8::Isolate*>(isolate)",
          "new_api": null,
          "old_text": "reinterpret_cast<v8::Isolate*>(isolate)",
          "new_text": null,
          "old_line_content": "  v8::Isolate* v8_isolate = reinterpret_cast<v8::Isolate*>(isolate);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1768,
          "old_api": "V8::GetCurrentPlatform()",
          "new_api": null,
          "old_text": "V8::GetCurrentPlatform()",
          "new_text": null,
          "old_line_content": "  v8::Platform* platform = V8::GetCurrentPlatform();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1769,
          "old_api": "GetForegroundTaskRunner",
          "new_api": null,
          "old_text": "platform->GetForegroundTaskRunner(v8_isolate)",
          "new_text": null,
          "old_line_content": "  foreground_task_runner_ = platform->GetForegroundTaskRunner(v8_isolate);",
          "new_line_content": "void AsyncCompileJob::Start() {",
          "content_same": false
        },
        {
          "line": 1772,
          "old_api": "global_handles",
          "new_api": null,
          "old_text": "isolate->global_handles()->Create(*incumbent_context)",
          "new_text": null,
          "old_line_content": "  incumbent_context_ = isolate->global_handles()->Create(*incumbent_context);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1773,
          "old_api": "IsNativeContext",
          "new_api": null,
          "old_text": "native_context_->IsNativeContext()",
          "new_text": null,
          "old_line_content": "  DCHECK(native_context_->IsNativeContext());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1774,
          "old_api": "GetOrRegisterRecorderContextId",
          "new_api": null,
          "old_text": "isolate->GetOrRegisterRecorderContextId(native_context_)",
          "new_text": null,
          "old_line_content": "  context_id_ = isolate->GetOrRegisterRecorderContextId(native_context_);",
          "new_line_content": "void AsyncCompileJob::Abort() {",
          "content_same": false
        },
        {
          "line": 1779,
          "old_api": "counters",
          "new_api": null,
          "old_text": "isolate_->counters()",
          "new_text": null,
          "old_line_content": "  DoAsync<DecodeModule>(isolate_->counters(),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1780,
          "old_api": "metrics_recorder",
          "new_api": null,
          "old_text": "isolate_->metrics_recorder()",
          "new_text": null,
          "old_line_content": "                        isolate_->metrics_recorder());  // --",
          "new_line_content": "class AsyncStreamingProcessor final : public StreamingProcessor {",
          "content_same": false
        },
        {
          "line": 1786,
          "old_api": "wasm_engine",
          "new_api": null,
          "old_text": "isolate_->wasm_engine()->RemoveCompileJob(this)",
          "new_text": null,
          "old_line_content": "  isolate_->wasm_engine()->RemoveCompileJob(this);",
          "new_line_content": "  ~AsyncStreamingProcessor() override;",
          "content_same": false
        },
        {
          "line": 1791,
          "old_api": "explicit",
          "new_api": null,
          "old_text": "explicit",
          "new_text": null,
          "old_line_content": "  explicit AsyncStreamingProcessor(AsyncCompileJob* job,",
          "new_line_content": "  bool ProcessSection(SectionCode section_code, Vector<const uint8_t> bytes,",
          "content_same": false
        },
        {
          "line": 1847,
          "old_api": "async_counters",
          "new_api": null,
          "old_text": "StreamingDecoder::CreateAsyncStreamingDecoder(\n      std::make_unique<AsyncStreamingProcessor>(\n          this, isolate_->async_counters(), isolate_->allocator()))",
          "new_text": null,
          "old_line_content": "  stream_ = StreamingDecoder::CreateAsyncStreamingDecoder(",
          "new_line_content": "  // If initial compilation did not finish yet we can abort it.",
          "content_same": false
        },
        {
          "line": 1848,
          "old_api": "async_counters",
          "new_api": null,
          "old_text": "std::make_unique<AsyncStreamingProcessor>(\n          this, isolate_->async_counters(), isolate_->allocator())",
          "new_text": null,
          "old_line_content": "      std::make_unique<AsyncStreamingProcessor>(",
          "new_line_content": "  if (native_module_) {",
          "content_same": false
        },
        {
          "line": 1855,
          "old_api": "CancelAndWait",
          "new_api": null,
          "old_text": "background_task_manager_.CancelAndWait()",
          "new_text": null,
          "old_line_content": "  background_task_manager_.CancelAndWait();",
          "new_line_content": "  // https://crbug.com/888170.",
          "content_same": false
        },
        {
          "line": 1865,
          "old_api": "NotifyCompilationEnded",
          "new_api": null,
          "old_text": "stream_->NotifyCompilationEnded()",
          "new_text": null,
          "old_line_content": "  if (stream_) stream_->NotifyCompilationEnded();",
          "new_line_content": "void AsyncCompileJob::CreateNativeModule(",
          "content_same": false
        },
        {
          "line": 1866,
          "old_api": "CancelPendingForegroundTask",
          "new_api": null,
          "old_text": "CancelPendingForegroundTask()",
          "new_text": null,
          "old_line_content": "  CancelPendingForegroundTask();",
          "new_line_content": "    std::shared_ptr<const WasmModule> module, size_t code_size_estimate) {",
          "content_same": false
        },
        {
          "line": 1867,
          "old_api": "location",
          "new_api": null,
          "old_text": "native_context_.location()",
          "new_text": null,
          "old_line_content": "  isolate_->global_handles()->Destroy(native_context_.location());",
          "new_line_content": "  // Embedder usage count for declared shared memories.",
          "content_same": false
        },
        {
          "line": 1868,
          "old_api": "location",
          "new_api": null,
          "old_text": "incumbent_context_.location()",
          "new_text": null,
          "old_line_content": "  isolate_->global_handles()->Destroy(incumbent_context_.location());",
          "new_line_content": "  if (module->has_shared_memory) {",
          "content_same": false
        },
        {
          "line": 1870,
          "old_api": "location",
          "new_api": null,
          "old_text": "module_object_.location()",
          "new_text": null,
          "old_line_content": "    isolate_->global_handles()->Destroy(module_object_.location());",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 1888,
          "old_api": "std::move(module)",
          "new_api": null,
          "old_text": "std::move(module)",
          "new_text": null,
          "old_line_content": "      isolate_, enabled_features_, std::move(module), code_size_estimate);",
          "new_line_content": "  if (native_module_ == nullptr) {",
          "content_same": false
        },
        {
          "line": 1890,
          "old_api": "compilation_state",
          "new_api": null,
          "old_text": "native_module_->compilation_state()->set_compilation_id(compilation_id_)",
          "new_text": null,
          "old_line_content": "  native_module_->compilation_state()->set_compilation_id(compilation_id_);",
          "new_line_content": "    return false;",
          "content_same": false
        },
        {
          "line": 1895,
          "old_api": "module_bytes",
          "new_api": null,
          "old_text": "isolate_->wasm_engine()->MaybeGetNativeModule(\n      module->origin, wire_bytes_.module_bytes(), isolate_)",
          "new_text": null,
          "old_line_content": "  native_module_ = isolate_->wasm_engine()->MaybeGetNativeModule(",
          "new_line_content": "void AsyncCompileJob::PrepareRuntimeObjects() {",
          "content_same": false
        },
        {
          "line": 1896,
          "old_api": "module_bytes",
          "new_api": null,
          "old_text": "wire_bytes_.module_bytes()",
          "new_text": null,
          "old_line_content": "      module->origin, wire_bytes_.module_bytes(), isolate_);",
          "new_line_content": "  // Create heap objects for script and module bytes to be stored in the",
          "content_same": false
        },
        {
          "line": 1907,
          "old_api": "is_null",
          "new_api": null,
          "old_text": "module_object_.is_null()",
          "new_text": null,
          "old_line_content": "  DCHECK(module_object_.is_null());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1908,
          "old_api": "Vector<const char>()",
          "new_api": null,
          "old_text": "Vector<const char>()",
          "new_text": null,
          "old_line_content": "  auto source_url = stream_ ? stream_->url() : Vector<const char>();",
          "new_line_content": "// This function assumes that it is executed in a HandleScope, and that a",
          "content_same": false
        },
        {
          "line": 1909,
          "old_api": "wasm_engine",
          "new_api": null,
          "old_text": "isolate_->wasm_engine()->GetOrCreateScript(\n      isolate_, native_module_, source_url)",
          "new_text": null,
          "old_line_content": "  auto script = isolate_->wasm_engine()->GetOrCreateScript(",
          "new_line_content": "// context is set on the isolate.",
          "content_same": false
        },
        {
          "line": 1912,
          "old_api": "WasmModuleObject::New(isolate_, native_module_, script)",
          "new_api": null,
          "old_text": "WasmModuleObject::New(isolate_, native_module_, script)",
          "new_text": null,
          "old_line_content": "      WasmModuleObject::New(isolate_, native_module_, script);",
          "new_line_content": "               \"wasm.FinishAsyncCompile\");",
          "content_same": false
        },
        {
          "line": 1920,
          "old_api": "TRACE_DISABLED_BY_DEFAULT",
          "new_api": null,
          "old_text": "TRACE_DISABLED_BY_DEFAULT(\"v8.wasm.detailed\")",
          "new_text": null,
          "old_line_content": "  TRACE_EVENT0(TRACE_DISABLED_BY_DEFAULT(\"v8.wasm.detailed\"),",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 1922,
          "old_api": "is_null",
          "new_api": null,
          "old_text": "module_object_.is_null()",
          "new_text": null,
          "old_line_content": "  bool is_after_deserialization = !module_object_.is_null();",
          "new_line_content": "  // Measure duration of baseline compilation or deserialization from cache.",
          "content_same": false
        },
        {
          "line": 1928,
          "old_api": "PrepareRuntimeObjects",
          "new_api": null,
          "old_text": "PrepareRuntimeObjects()",
          "new_text": null,
          "old_line_content": "    PrepareRuntimeObjects();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1932,
          "old_api": "base::TimeTicks::IsHighResolution()",
          "new_api": null,
          "old_text": "base::TimeTicks::IsHighResolution()",
          "new_text": null,
          "old_line_content": "  if (base::TimeTicks::IsHighResolution()) {",
          "new_line_content": "          true,                                     // streamed",
          "content_same": false
        },
        {
          "line": 1933,
          "old_api": "base::TimeTicks::Now()",
          "new_api": null,
          "old_text": "base::TimeTicks::Now()",
          "new_text": null,
          "old_line_content": "    base::TimeDelta duration = base::TimeTicks::Now() - start_time_;",
          "new_line_content": "          is_after_cache_hit,                       // cached",
          "content_same": false
        },
        {
          "line": 1934,
          "old_api": "InMicroseconds",
          "new_api": null,
          "old_text": "duration.InMicroseconds()",
          "new_text": null,
          "old_line_content": "    int duration_usecs = static_cast<int>(duration.InMicroseconds());",
          "new_line_content": "          is_after_deserialization,                 // deserialized",
          "content_same": false
        },
        {
          "line": 1935,
          "old_api": "counters",
          "new_api": null,
          "old_text": "isolate_->counters()->wasm_streaming_finish_wasm_module_time()->AddSample(\n        duration_usecs)",
          "new_text": null,
          "old_line_content": "    isolate_->counters()->wasm_streaming_finish_wasm_module_time()->AddSample(",
          "new_line_content": "          wasm_lazy_compilation_,                   // lazy",
          "content_same": false
        },
        {
          "line": 1946,
          "old_api": "liftoff_code_size",
          "new_api": null,
          "old_text": "native_module_->liftoff_code_size()",
          "new_text": null,
          "old_line_content": "          native_module_->liftoff_code_size(),      // code_size_in_bytes",
          "new_line_content": "  // Finish the wasm script now and make it public to the debugger.",
          "content_same": false
        },
        {
          "line": 1950,
          "old_api": "metrics_recorder",
          "new_api": null,
          "old_text": "isolate_->metrics_recorder()->DelayMainThreadEvent(event, context_id_)",
          "new_text": null,
          "old_line_content": "      isolate_->metrics_recorder()->DelayMainThreadEvent(event, context_id_);",
          "new_line_content": "      module->debug_symbols.type == WasmDebugSymbols::Type::SourceMap &&",
          "content_same": false
        },
        {
          "line": 1957,
          "old_api": "module",
          "new_api": null,
          "old_text": "module_object_->module()",
          "new_text": null,
          "old_line_content": "  const WasmModule* module = module_object_->module();",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 1958,
          "old_api": "type",
          "new_api": null,
          "old_text": "script->type()",
          "new_text": null,
          "old_line_content": "  if (script->type() == Script::TYPE_WASM &&",
          "new_line_content": "  {",
          "content_same": false
        },
        {
          "line": 1960,
          "old_api": "is_empty",
          "new_api": null,
          "old_text": "module->debug_symbols.external_url.is_empty()",
          "new_text": null,
          "old_line_content": "      !module->debug_symbols.external_url.is_empty()) {",
          "new_line_content": "                 \"wasm.Debug.OnAfterCompile\");",
          "content_same": false
        },
        {
          "line": 1962,
          "old_api": "GetNameOrNull",
          "new_api": null,
          "old_text": "isolate_->factory()->NewStringFromUtf8(\n        wire_bytes.GetNameOrNull(module->debug_symbols.external_url),\n        AllocationType::kOld)",
          "new_text": null,
          "old_line_content": "    MaybeHandle<String> src_map_str = isolate_->factory()->NewStringFromUtf8(",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 1963,
          "old_api": "GetNameOrNull",
          "new_api": null,
          "old_text": "wire_bytes.GetNameOrNull(module->debug_symbols.external_url)",
          "new_text": null,
          "old_line_content": "        wire_bytes.GetNameOrNull(module->debug_symbols.external_url),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1965,
          "old_api": "ToHandleChecked",
          "new_api": null,
          "old_text": "src_map_str.ToHandleChecked()",
          "new_text": null,
          "old_line_content": "    script->set_source_mapping_url(*src_map_str.ToHandleChecked());",
          "new_line_content": "  // just compile wrappers here.",
          "content_same": false
        },
        {
          "line": 1968,
          "old_api": "TRACE_DISABLED_BY_DEFAULT",
          "new_api": null,
          "old_text": "TRACE_DISABLED_BY_DEFAULT(\"v8.wasm.detailed\")",
          "new_text": null,
          "old_line_content": "    TRACE_EVENT0(TRACE_DISABLED_BY_DEFAULT(\"v8.wasm.detailed\"),",
          "new_line_content": "    if (is_after_cache_hit) {",
          "content_same": false
        },
        {
          "line": 1979,
          "old_api": "CompileJsToWasmWrappers",
          "new_api": null,
          "old_text": "CompileJsToWasmWrappers(isolate_, module, &export_wrappers)",
          "new_text": null,
          "old_line_content": "      CompileJsToWasmWrappers(isolate_, module, &export_wrappers);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1981,
          "old_api": "FinalizeJSToWasmWrappers",
          "new_api": null,
          "old_text": "compilation_state->FinalizeJSToWasmWrappers(isolate_, module,\n                                                  &export_wrappers)",
          "new_text": null,
          "old_line_content": "      compilation_state->FinalizeJSToWasmWrappers(isolate_, module,",
          "new_line_content": "  // enabled while streaming compilation was running. Since handling this while",
          "content_same": false
        },
        {
          "line": 1987,
          "old_api": "PublishDetectedFeatures",
          "new_api": null,
          "old_text": "compilation_state->PublishDetectedFeatures(isolate_)",
          "new_text": null,
          "old_line_content": "  compilation_state->PublishDetectedFeatures(isolate_);",
          "new_line_content": "  // repeatedly in case the script is shared).",
          "content_same": false
        },
        {
          "line": 1993,
          "old_api": "RecompileForTiering",
          "new_api": null,
          "old_text": "native_module_->RecompileForTiering()",
          "new_text": null,
          "old_line_content": "  if (native_module_->IsTieredDown()) native_module_->RecompileForTiering();",
          "new_line_content": "void AsyncCompileJob::DecodeFailed(const WasmError& error) {",
          "content_same": false
        },
        {
          "line": 1997,
          "old_api": "script",
          "new_api": null,
          "old_text": "module_object_->script()",
          "new_text": null,
          "old_line_content": "  native_module_->LogWasmCodes(isolate_, module_object_->script());",
          "new_line_content": "  std::shared_ptr<AsyncCompileJob> job =",
          "content_same": false
        },
        {
          "line": 2008,
          "old_api": "Reify",
          "new_api": null,
          "old_text": "thrower.Reify()",
          "new_text": null,
          "old_line_content": "  resolver_->OnCompilationFailed(thrower.Reify());",
          "new_line_content": "                       lazy_module);",
          "content_same": false
        },
        {
          "line": 2015,
          "old_api": "get",
          "new_api": null,
          "old_text": "native_module_.get()",
          "new_text": null,
          "old_line_content": "  ValidateSequentially(native_module_->module(), native_module_.get(),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2016,
          "old_api": "allocator",
          "new_api": null,
          "old_text": "isolate_->allocator()",
          "new_text": null,
          "old_line_content": "                       isolate_->counters(), isolate_->allocator(), &thrower,",
          "new_line_content": "void AsyncCompileJob::AsyncCompileSucceeded(Handle<WasmModuleObject> result) {",
          "content_same": false
        },
        {
          "line": 2018,
          "old_api": "error",
          "new_api": null,
          "old_text": "thrower.error()",
          "new_text": null,
          "old_line_content": "  DCHECK(thrower.error());",
          "new_line_content": "               \"wasm.OnCompilationSucceeded\");",
          "content_same": false
        },
        {
          "line": 2021,
          "old_api": "wasm_engine",
          "new_api": null,
          "old_text": "isolate_->wasm_engine()->RemoveCompileJob(this)",
          "new_text": null,
          "old_line_content": "      isolate_->wasm_engine()->RemoveCompileJob(this);",
          "new_line_content": "  Local<v8::Context> backup_incumbent_context =",
          "content_same": false
        },
        {
          "line": 2026,
          "old_api": "TRACE_DISABLED_BY_DEFAULT",
          "new_api": null,
          "old_text": "TRACE_DISABLED_BY_DEFAULT(\"v8.wasm.detailed\")",
          "new_text": null,
          "old_line_content": "  TRACE_EVENT0(TRACE_DISABLED_BY_DEFAULT(\"v8.wasm.detailed\"),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2031,
          "old_api": "Utils::ToLocal(incumbent_context_)",
          "new_api": null,
          "old_text": "Utils::ToLocal(incumbent_context_)",
          "new_text": null,
          "old_line_content": "      Utils::ToLocal(incumbent_context_);",
          "new_line_content": "  void operator()(CompilationEvent event) {",
          "content_same": false
        },
        {
          "line": 2033,
          "old_api": "OnCompilationSucceeded",
          "new_api": null,
          "old_text": "resolver_->OnCompilationSucceeded(result)",
          "new_text": null,
          "old_line_content": "  resolver_->OnCompilationSucceeded(result);",
          "new_line_content": "    switch (event) {",
          "content_same": false
        },
        {
          "line": 2038,
          "old_api": "explicit",
          "new_api": null,
          "old_text": "explicit",
          "new_text": null,
          "old_line_content": "  explicit CompilationStateCallback(AsyncCompileJob* job) : job_(job) {}",
          "new_line_content": "        break;",
          "content_same": false
        },
        {
          "line": 2046,
          "old_api": "has_value",
          "new_api": null,
          "old_text": "last_event_.has_value()",
          "new_text": null,
          "old_line_content": "        DCHECK(!last_event_.has_value());",
          "new_line_content": "          bool cache_hit =",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 194,
      "total_additions": 480,
      "total_deletions": 481,
      "total_api_changes": 1155
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 11,
        "api_related_lines": 1155,
        "non_api_lines": 4,
        "non_api_line_numbers": [
          1362,
          1356,
          1350,
          1364
        ]
      }
    },
    "api_calls_before": 1312,
    "api_calls_after": 1311,
    "diff_info": {
      "added_lines": 1,
      "removed_lines": 10,
      "total_diff_lines": 28
    }
  }
}
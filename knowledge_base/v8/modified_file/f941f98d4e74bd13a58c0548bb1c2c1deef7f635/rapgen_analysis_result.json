{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/v8/modified_file/f941f98d4e74bd13a58c0548bb1c2c1deef7f635",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/v8/modified_file/f941f98d4e74bd13a58c0548bb1c2c1deef7f635/before.cc",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/v8/modified_file/f941f98d4e74bd13a58c0548bb1c2c1deef7f635/after.cc",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/v8/modified_file/f941f98d4e74bd13a58c0548bb1c2c1deef7f635/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 1043,
          "old_api": "ClearAllCacheRegisters",
          "new_api": "begin",
          "old_text": "cache_state_.ClearAllCacheRegisters()",
          "new_text": "cache_state_.stack_state.begin()",
          "old_line_content": "  cache_state_.ClearAllCacheRegisters();",
          "new_line_content": "       it >= cache_state_.stack_state.begin() &&",
          "content_same": false
        },
        {
          "line": 1044,
          "old_api": "end",
          "new_api": "is_empty",
          "old_text": "cache_state_.stack_state.end()",
          "new_text": "cache_state_.used_registers.is_empty()",
          "old_line_content": "  for (VarState* it = cache_state_.stack_state.end() - 1 - num_params;",
          "new_line_content": "       !cache_state_.used_registers.is_empty();",
          "content_same": false
        },
        {
          "line": 1046,
          "old_api": "is_empty",
          "new_api": "is_reg",
          "old_text": "cache_state_.used_registers.is_empty()",
          "new_text": "it->is_reg()",
          "old_line_content": "       !cache_state_.used_registers.is_empty();",
          "new_line_content": "    if (!it->is_reg()) continue;",
          "content_same": false
        },
        {
          "line": 1048,
          "old_api": "is_reg",
          "new_api": "reg",
          "old_text": "it->is_reg()",
          "new_text": "it->reg()",
          "old_line_content": "    if (!it->is_reg()) continue;",
          "new_line_content": "    cache_state_.dec_used(it->reg());",
          "content_same": false
        },
        {
          "line": 1049,
          "old_api": "kind",
          "new_api": "MakeStack",
          "old_text": "it->kind()",
          "new_text": "it->MakeStack()",
          "old_line_content": "    Spill(it->offset(), it->reg(), it->kind());",
          "new_line_content": "    it->MakeStack();",
          "content_same": false
        },
        {
          "line": 1060,
          "old_api": "GetInputLocation",
          "new_api": "AsRegister",
          "old_text": "call_descriptor->GetInputLocation(kInputShift)",
          "new_text": "DCHECK_EQ(\n      instance_reg,\n      Register::from_code(call_descriptor->GetInputLocation(1).AsRegister()))",
          "old_line_content": "      call_descriptor->GetInputLocation(kInputShift);",
          "new_line_content": "  DCHECK_EQ(",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 1041,
          "old_api": null,
          "new_api": "ClearAllCacheRegisters",
          "old_text": null,
          "new_text": "cache_state_.ClearAllCacheRegisters()",
          "old_line_content": "",
          "new_line_content": "  cache_state_.ClearAllCacheRegisters();",
          "content_same": false
        },
        {
          "line": 1042,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "cache_state_.stack_state.end()",
          "old_line_content": "  // Spill all cache slots which are not being used as parameters.",
          "new_line_content": "  for (VarState* it = cache_state_.stack_state.end() - 1 - num_params;",
          "content_same": false
        },
        {
          "line": 1047,
          "old_api": null,
          "new_api": "kind",
          "old_text": null,
          "new_text": "it->kind()",
          "old_line_content": "       --it) {",
          "new_line_content": "    Spill(it->offset(), it->reg(), it->kind());",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 1061,
          "old_api": "IsAnyRegister",
          "new_api": null,
          "old_text": "instance_loc.IsAnyRegister()",
          "new_text": null,
          "old_line_content": "  DCHECK(instance_loc.IsRegister() && !instance_loc.IsAnyRegister());",
          "new_line_content": "      instance_reg,",
          "content_same": false
        },
        {
          "line": 1040,
          "old_api": "constexpr",
          "new_api": null,
          "old_text": "constexpr",
          "new_text": null,
          "old_line_content": "  constexpr size_t kInputShift = 1;",
          "new_line_content": "  // Spill all cache slots which are not being used as parameters.",
          "content_same": false
        },
        {
          "line": 1045,
          "old_api": "begin",
          "new_api": null,
          "old_text": "cache_state_.stack_state.begin()",
          "new_text": null,
          "old_line_content": "       it >= cache_state_.stack_state.begin() &&",
          "new_line_content": "       --it) {",
          "content_same": false
        },
        {
          "line": 1050,
          "old_api": "reg",
          "new_api": null,
          "old_text": "it->reg()",
          "new_text": null,
          "old_line_content": "    cache_state_.dec_used(it->reg());",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 1051,
          "old_api": "MakeStack",
          "new_api": null,
          "old_text": "it->MakeStack()",
          "new_text": null,
          "old_line_content": "    it->MakeStack();",
          "new_line_content": "",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 6,
      "total_additions": 3,
      "total_deletions": 5,
      "total_api_changes": 14
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 8,
        "api_related_lines": 14,
        "non_api_lines": 5,
        "non_api_line_numbers": [
          1057,
          1058,
          1059,
          1062,
          1039
        ]
      }
    },
    "api_calls_before": 753,
    "api_calls_after": 750,
    "diff_info": {
      "added_lines": 6,
      "removed_lines": 6,
      "total_diff_lines": 31
    }
  }
}
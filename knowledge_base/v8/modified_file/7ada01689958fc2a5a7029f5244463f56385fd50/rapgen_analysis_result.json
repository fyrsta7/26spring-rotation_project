{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/v8/modified_file/7ada01689958fc2a5a7029f5244463f56385fd50",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/v8/modified_file/7ada01689958fc2a5a7029f5244463f56385fd50/before.cc",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/v8/modified_file/7ada01689958fc2a5a7029f5244463f56385fd50/after.cc",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/v8/modified_file/7ada01689958fc2a5a7029f5244463f56385fd50/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 139,
          "old_api": "DecideObjectIsSmi",
          "new_api": "IsConvertTaggedHoleToUndefined",
          "old_text": "DecideObjectIsSmi(input)",
          "new_text": "m.IsConvertTaggedHoleToUndefined()",
          "old_line_content": "      if (DecideObjectIsSmi(input) == Decision::kFalse) {",
          "new_line_content": "      if (m.IsConvertTaggedHoleToUndefined()) {",
          "content_same": false
        },
        {
          "line": 140,
          "old_api": "ReplaceWithValue",
          "new_api": "InputAt",
          "old_text": "ReplaceWithValue(node, input)",
          "new_text": "m.InputAt(0)",
          "old_line_content": "        ReplaceWithValue(node, input);",
          "new_line_content": "        node->ReplaceInput(0, m.InputAt(0));",
          "content_same": false
        },
        {
          "line": 141,
          "old_api": "Replace",
          "new_api": "Changed",
          "old_text": "Replace(input)",
          "new_text": "Changed(node)",
          "old_line_content": "        return Replace(input);",
          "new_line_content": "        return Changed(node);",
          "content_same": false
        },
        {
          "line": 157,
          "old_api": "ReplaceBoolean",
          "new_api": "Replace",
          "old_text": "ReplaceBoolean(true)",
          "new_text": "Replace(input)",
          "old_line_content": "          return ReplaceBoolean(true);",
          "new_line_content": "        return Replace(input);",
          "content_same": false
        },
        {
          "line": 167,
          "old_api": "Value",
          "new_api": "InputAt",
          "old_text": "m.Value()",
          "new_text": "node->InputAt(0)",
          "old_line_content": "      if (m.HasValue()) return ReplaceNumber(std::fabs(m.Value()));",
          "new_line_content": "      Node* const input = node->InputAt(0);",
          "content_same": false
        },
        {
          "line": 185,
          "old_api": "ReplaceInput",
          "new_api": "ReplaceBoolean",
          "old_text": "node->ReplaceInput(0, a)",
          "new_text": "ReplaceBoolean(true)",
          "old_line_content": "  node->ReplaceInput(0, a);",
          "new_line_content": "      if (m.left().node() == m.right().node()) return ReplaceBoolean(true);",
          "content_same": false
        },
        {
          "line": 191,
          "old_api": "BooleanConstant",
          "new_api": "NoChange",
          "old_text": "jsgraph()->BooleanConstant(value)",
          "new_text": "NoChange()",
          "old_line_content": "  return Replace(jsgraph()->BooleanConstant(value));",
          "new_line_content": "  return NoChange();",
          "content_same": false
        },
        {
          "line": 200,
          "old_api": "Int32Constant",
          "new_api": "Changed",
          "old_text": "jsgraph()->Int32Constant(value)",
          "new_text": "Changed(node)",
          "old_line_content": "  return Replace(jsgraph()->Int32Constant(value));",
          "new_line_content": "  return Changed(node);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 156,
          "old_api": null,
          "new_api": "ReplaceWithValue",
          "old_text": null,
          "new_text": "ReplaceWithValue(node, input)",
          "old_line_content": "        case Decision::kTrue:",
          "new_line_content": "        ReplaceWithValue(node, input);",
          "content_same": false
        },
        {
          "line": 160,
          "old_api": null,
          "new_api": "IsConvertTaggedHoleToUndefined",
          "old_text": null,
          "new_text": "m.IsConvertTaggedHoleToUndefined()",
          "old_line_content": "        case Decision::kUnknown:",
          "new_line_content": "      if (m.IsConvertTaggedHoleToUndefined()) {",
          "content_same": false
        },
        {
          "line": 161,
          "old_api": null,
          "new_api": "InputAt",
          "old_text": null,
          "new_text": "m.InputAt(0)",
          "old_line_content": "          break;",
          "new_line_content": "        node->ReplaceInput(0, m.InputAt(0));",
          "content_same": false
        },
        {
          "line": 162,
          "old_api": null,
          "new_api": "Changed",
          "old_text": null,
          "new_text": "Changed(node)",
          "old_line_content": "      }",
          "new_line_content": "        return Changed(node);",
          "content_same": false
        },
        {
          "line": 168,
          "old_api": null,
          "new_api": "DecideObjectIsSmi",
          "old_text": null,
          "new_text": "DecideObjectIsSmi(input)",
          "old_line_content": "      break;",
          "new_line_content": "      switch (DecideObjectIsSmi(input)) {",
          "content_same": false
        },
        {
          "line": 170,
          "old_api": null,
          "new_api": "ReplaceBoolean",
          "old_text": null,
          "new_text": "ReplaceBoolean(true)",
          "old_line_content": "    case IrOpcode::kReferenceEqual: {",
          "new_line_content": "          return ReplaceBoolean(true);",
          "content_same": false
        },
        {
          "line": 179,
          "old_api": null,
          "new_api": "InputAt",
          "old_text": null,
          "new_text": "node->InputAt(0)",
          "old_line_content": "}",
          "new_line_content": "      NumberMatcher m(node->InputAt(0));",
          "content_same": false
        },
        {
          "line": 180,
          "old_api": null,
          "new_api": "Value",
          "old_text": null,
          "new_text": "m.Value()",
          "old_line_content": "",
          "new_line_content": "      if (m.HasValue()) return ReplaceNumber(std::fabs(m.Value()));",
          "content_same": false
        },
        {
          "line": 196,
          "old_api": null,
          "new_api": "OperatorProperties::GetTotalInputCount(op)",
          "old_text": null,
          "new_text": "OperatorProperties::GetTotalInputCount(op)",
          "old_line_content": "}",
          "new_line_content": "  DCHECK_EQ(node->InputCount(), OperatorProperties::GetTotalInputCount(op));",
          "content_same": false
        },
        {
          "line": 197,
          "old_api": null,
          "new_api": "InputCount",
          "old_text": null,
          "new_text": "node->InputCount()",
          "old_line_content": "",
          "new_line_content": "  DCHECK_LE(1, node->InputCount());",
          "content_same": false
        },
        {
          "line": 198,
          "old_api": null,
          "new_api": "ReplaceInput",
          "old_text": null,
          "new_text": "node->ReplaceInput(0, a)",
          "old_line_content": "",
          "new_line_content": "  node->ReplaceInput(0, a);",
          "content_same": false
        },
        {
          "line": 199,
          "old_api": null,
          "new_api": "NodeProperties::ChangeOp(node, op)",
          "old_text": null,
          "new_text": "NodeProperties::ChangeOp(node, op)",
          "old_line_content": "Reduction SimplifiedOperatorReducer::ReplaceInt32(int32_t value) {",
          "new_line_content": "  NodeProperties::ChangeOp(node, op);",
          "content_same": false
        },
        {
          "line": 204,
          "old_api": null,
          "new_api": "BooleanConstant",
          "old_text": null,
          "new_text": "jsgraph()->BooleanConstant(value)",
          "old_line_content": "Reduction SimplifiedOperatorReducer::ReplaceNumber(double value) {",
          "new_line_content": "  return Replace(jsgraph()->BooleanConstant(value));",
          "content_same": false
        },
        {
          "line": 208,
          "old_api": null,
          "new_api": "Float64Constant",
          "old_text": null,
          "new_text": "jsgraph()->Float64Constant(value)",
          "old_line_content": "",
          "new_line_content": "  return Replace(jsgraph()->Float64Constant(value));",
          "content_same": false
        },
        {
          "line": 213,
          "old_api": null,
          "new_api": "Int32Constant",
          "old_text": null,
          "new_text": "jsgraph()->Int32Constant(value)",
          "old_line_content": "Factory* SimplifiedOperatorReducer::factory() const {",
          "new_line_content": "  return Replace(jsgraph()->Int32Constant(value));",
          "content_same": false
        },
        {
          "line": 218,
          "old_api": null,
          "new_api": "Constant",
          "old_text": null,
          "new_text": "jsgraph()->Constant(value)",
          "old_line_content": "",
          "new_line_content": "  return Replace(jsgraph()->Constant(value));",
          "content_same": false
        },
        {
          "line": 223,
          "old_api": null,
          "new_api": "Constant",
          "old_text": null,
          "new_text": "jsgraph()->Constant(value)",
          "old_line_content": "MachineOperatorBuilder* SimplifiedOperatorReducer::machine() const {",
          "new_line_content": "  return Replace(jsgraph()->Constant(value));",
          "content_same": false
        },
        {
          "line": 227,
          "old_api": null,
          "new_api": "factory",
          "old_text": null,
          "new_text": "isolate()->factory()",
          "old_line_content": "}  // namespace compiler",
          "new_line_content": "  return isolate()->factory();",
          "content_same": false
        },
        {
          "line": 230,
          "old_api": null,
          "new_api": "graph",
          "old_text": null,
          "new_text": "jsgraph()->graph()",
          "old_line_content": "",
          "new_line_content": "Graph* SimplifiedOperatorReducer::graph() const { return jsgraph()->graph(); }",
          "content_same": false
        },
        {
          "line": 233,
          "old_api": null,
          "new_api": "isolate",
          "old_text": null,
          "new_text": "jsgraph()->isolate()",
          "old_line_content": "",
          "new_line_content": "  return jsgraph()->isolate();",
          "content_same": false
        },
        {
          "line": 237,
          "old_api": null,
          "new_api": "machine",
          "old_text": null,
          "new_text": "jsgraph()->machine()",
          "old_line_content": "",
          "new_line_content": "  return jsgraph()->machine();",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 224,
          "old_api": "machine",
          "new_api": null,
          "old_text": "jsgraph()->machine()",
          "new_text": null,
          "old_line_content": "  return jsgraph()->machine();",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 195,
          "old_api": "Float64Constant",
          "new_api": null,
          "old_text": "jsgraph()->Float64Constant(value)",
          "new_text": null,
          "old_line_content": "  return Replace(jsgraph()->Float64Constant(value));",
          "new_line_content": "                                            Node* a) {",
          "content_same": false
        },
        {
          "line": 166,
          "old_api": "InputAt",
          "new_api": null,
          "old_text": "node->InputAt(0)",
          "new_text": null,
          "old_line_content": "      NumberMatcher m(node->InputAt(0));",
          "new_line_content": "    case IrOpcode::kObjectIsSmi: {",
          "content_same": false
        },
        {
          "line": 205,
          "old_api": "Constant",
          "new_api": null,
          "old_text": "jsgraph()->Constant(value)",
          "new_text": null,
          "old_line_content": "  return Replace(jsgraph()->Constant(value));",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 178,
          "old_api": "NoChange",
          "new_api": null,
          "old_text": "NoChange()",
          "new_text": null,
          "old_line_content": "  return NoChange();",
          "new_line_content": "    case IrOpcode::kNumberAbs: {",
          "content_same": false
        },
        {
          "line": 210,
          "old_api": "Constant",
          "new_api": null,
          "old_text": "jsgraph()->Constant(value)",
          "new_text": null,
          "old_line_content": "  return Replace(jsgraph()->Constant(value));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 214,
          "old_api": "factory",
          "new_api": null,
          "old_text": "isolate()->factory()",
          "new_text": null,
          "old_line_content": "  return isolate()->factory();",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 183,
          "old_api": "OperatorProperties::GetTotalInputCount(op)",
          "new_api": null,
          "old_text": "OperatorProperties::GetTotalInputCount(op)",
          "new_text": null,
          "old_line_content": "  DCHECK_EQ(node->InputCount(), OperatorProperties::GetTotalInputCount(op));",
          "new_line_content": "    case IrOpcode::kReferenceEqual: {",
          "content_same": false
        },
        {
          "line": 184,
          "old_api": "InputCount",
          "new_api": null,
          "old_text": "node->InputCount()",
          "new_text": null,
          "old_line_content": "  DCHECK_LE(1, node->InputCount());",
          "new_line_content": "      HeapObjectBinopMatcher m(node);",
          "content_same": false
        },
        {
          "line": 217,
          "old_api": "graph",
          "new_api": null,
          "old_text": "jsgraph()->graph()",
          "new_text": null,
          "old_line_content": "Graph* SimplifiedOperatorReducer::graph() const { return jsgraph()->graph(); }",
          "new_line_content": "Reduction SimplifiedOperatorReducer::ReplaceNumber(double value) {",
          "content_same": false
        },
        {
          "line": 186,
          "old_api": "NodeProperties::ChangeOp(node, op)",
          "new_api": null,
          "old_text": "NodeProperties::ChangeOp(node, op)",
          "new_text": null,
          "old_line_content": "  NodeProperties::ChangeOp(node, op);",
          "new_line_content": "      break;",
          "content_same": false
        },
        {
          "line": 187,
          "old_api": "Changed",
          "new_api": null,
          "old_text": "Changed(node)",
          "new_text": null,
          "old_line_content": "  return Changed(node);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 220,
          "old_api": "isolate",
          "new_api": null,
          "old_text": "jsgraph()->isolate()",
          "new_text": null,
          "old_line_content": "  return jsgraph()->isolate();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 159,
          "old_api": "ReplaceBoolean",
          "new_api": null,
          "old_text": "ReplaceBoolean(false)",
          "new_text": null,
          "old_line_content": "          return ReplaceBoolean(false);",
          "new_line_content": "      NodeMatcher m(input);",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 8,
      "total_additions": 21,
      "total_deletions": 14,
      "total_api_changes": 43
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 13,
        "api_related_lines": 43,
        "non_api_lines": 6,
        "non_api_line_numbers": [
          163,
          137,
          138,
          142,
          143,
          144
        ]
      }
    },
    "api_calls_before": 182,
    "api_calls_after": 191,
    "diff_info": {
      "added_lines": 13,
      "removed_lines": 0,
      "total_diff_lines": 32
    }
  }
}
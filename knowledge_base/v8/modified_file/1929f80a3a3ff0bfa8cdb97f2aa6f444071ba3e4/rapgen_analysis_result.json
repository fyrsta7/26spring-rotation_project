{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/v8/modified_file/1929f80a3a3ff0bfa8cdb97f2aa6f444071ba3e4",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/v8/modified_file/1929f80a3a3ff0bfa8cdb97f2aa6f444071ba3e4/before.cc",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/v8/modified_file/1929f80a3a3ff0bfa8cdb97f2aa6f444071ba3e4/after.cc",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/v8/modified_file/1929f80a3a3ff0bfa8cdb97f2aa6f444071ba3e4/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": true,
    "api_changes": {
      "replacements": [
        {
          "line": 869,
          "old_api": "KillField",
          "new_api": "NodeProperties::GetValueInput(current, 2)",
          "old_text": "state->KillField(\n                object, FieldIndexOf(HeapObject::kMapOffset), zone())",
          "new_text": "NodeProperties::GetValueInput(current, 2)",
          "old_line_content": "            state = state->KillField(",
          "new_line_content": "            Node* const target_map = NodeProperties::GetValueInput(current, 2);",
          "content_same": false
        },
        {
          "line": 870,
          "old_api": "zone",
          "new_api": "LookupField",
          "old_text": "zone()",
          "new_text": "state->LookupField(\n                object, FieldIndexOf(HeapObject::kMapOffset))",
          "old_line_content": "                object, FieldIndexOf(HeapObject::kMapOffset), zone());",
          "new_line_content": "            Node* const object_map = state->LookupField(",
          "content_same": false
        },
        {
          "line": 871,
          "old_api": "KillField",
          "new_api": "FieldIndexOf",
          "old_text": "state->KillField(\n                object, FieldIndexOf(JSObject::kElementsOffset), zone())",
          "new_text": "FieldIndexOf(HeapObject::kMapOffset)",
          "old_line_content": "            state = state->KillField(",
          "new_line_content": "                object, FieldIndexOf(HeapObject::kMapOffset));",
          "content_same": false
        },
        {
          "line": 876,
          "old_api": "op",
          "new_api": "zone",
          "old_text": "current->op()",
          "new_text": "zone()",
          "old_line_content": "            FieldAccess const& access = FieldAccessOf(current->op());",
          "new_line_content": "                  object, FieldIndexOf(JSObject::kElementsOffset), zone());",
          "content_same": false
        },
        {
          "line": 882,
          "old_api": "zone",
          "new_api": "NodeProperties::GetValueInput(current, 0)",
          "old_text": "zone()",
          "new_text": "NodeProperties::GetValueInput(current, 0)",
          "old_line_content": "              state = state->KillField(object, field_index, zone());",
          "new_line_content": "            Node* const object = NodeProperties::GetValueInput(current, 0);",
          "content_same": false
        },
        {
          "line": 887,
          "old_api": "NodeProperties::GetValueInput(current, 0)",
          "new_api": "zone",
          "old_text": "NodeProperties::GetValueInput(current, 0)",
          "new_text": "zone()",
          "old_line_content": "            Node* const object = NodeProperties::GetValueInput(current, 0);",
          "new_line_content": "              state = state->KillField(object, field_index, zone());",
          "content_same": false
        },
        {
          "line": 924,
          "old_api": "UNREACHABLE",
          "new_api": "representation",
          "old_text": "UNREACHABLE()",
          "new_text": "access.machine_type.representation()",
          "old_line_content": "      UNREACHABLE();",
          "new_line_content": "  MachineRepresentation rep = access.machine_type.representation();",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 903,
          "old_api": null,
          "new_api": "empty_state",
          "old_text": null,
          "new_text": "empty_state()",
          "old_line_content": "      }",
          "new_line_content": "            return empty_state();",
          "content_same": false
        },
        {
          "line": 906,
          "old_api": null,
          "new_api": "op",
          "old_text": null,
          "new_text": "current->op()->EffectInputCount()",
          "old_line_content": "  return state;",
          "new_line_content": "      for (int i = 0; i < current->op()->EffectInputCount(); ++i) {",
          "content_same": false
        },
        {
          "line": 907,
          "old_api": null,
          "new_api": "NodeProperties::GetEffectInput(current, i)",
          "old_text": null,
          "new_text": "NodeProperties::GetEffectInput(current, i)",
          "old_line_content": "}",
          "new_line_content": "        queue.push(NodeProperties::GetEffectInput(current, i));",
          "content_same": false
        },
        {
          "line": 916,
          "old_api": null,
          "new_api": "DCHECK_EQ",
          "old_text": null,
          "new_text": "DCHECK_EQ(0, offset % kPointerSize)",
          "old_line_content": "",
          "new_line_content": "  DCHECK_EQ(0, offset % kPointerSize);",
          "content_same": false
        },
        {
          "line": 918,
          "old_api": null,
          "new_api": "static_cast<int>(kMaxTrackedFields)",
          "old_text": null,
          "new_text": "static_cast<int>(kMaxTrackedFields)",
          "old_line_content": "int LoadElimination::FieldIndexOf(FieldAccess const& access) {",
          "new_line_content": "  if (field_index >= static_cast<int>(kMaxTrackedFields)) return -1;",
          "content_same": false
        },
        {
          "line": 929,
          "old_api": null,
          "new_api": "UNREACHABLE",
          "old_text": null,
          "new_text": "UNREACHABLE()",
          "old_line_content": "        return -1;  // We currently only track pointer size fields.",
          "new_line_content": "      UNREACHABLE();",
          "content_same": false
        },
        {
          "line": 933,
          "old_api": null,
          "new_api": "MachineType::PointerRepresentation()",
          "old_text": null,
          "new_text": "MachineType::PointerRepresentation()",
          "old_line_content": "    case MachineRepresentation::kWord16:",
          "new_line_content": "      if (rep != MachineType::PointerRepresentation()) {",
          "content_same": false
        },
        {
          "line": 956,
          "old_api": null,
          "new_api": "FieldIndexOf",
          "old_text": null,
          "new_text": "FieldIndexOf(access.offset)",
          "old_line_content": "}",
          "new_line_content": "  return FieldIndexOf(access.offset);",
          "content_same": false
        },
        {
          "line": 960,
          "old_api": null,
          "new_api": "common",
          "old_text": null,
          "new_text": "jsgraph()->common()",
          "old_line_content": "}  // namespace compiler",
          "new_line_content": "  return jsgraph()->common();",
          "content_same": false
        },
        {
          "line": 963,
          "old_api": null,
          "new_api": "graph",
          "old_text": null,
          "new_text": "jsgraph()->graph()",
          "old_line_content": "",
          "new_line_content": "Graph* LoadElimination::graph() const { return jsgraph()->graph(); }",
          "content_same": false
        },
        {
          "line": 873,
          "old_api": null,
          "new_api": "KillField",
          "old_text": null,
          "new_text": "state->KillField(\n                  object, FieldIndexOf(HeapObject::kMapOffset), zone())",
          "old_line_content": "            break;",
          "new_line_content": "              state = state->KillField(",
          "content_same": false
        },
        {
          "line": 874,
          "old_api": null,
          "new_api": "zone",
          "old_text": null,
          "new_text": "zone()",
          "old_line_content": "          }",
          "new_line_content": "                  object, FieldIndexOf(HeapObject::kMapOffset), zone());",
          "content_same": false
        },
        {
          "line": 875,
          "old_api": null,
          "new_api": "KillField",
          "old_text": null,
          "new_text": "state->KillField(\n                  object, FieldIndexOf(JSObject::kElementsOffset), zone())",
          "old_line_content": "          case IrOpcode::kStoreField: {",
          "new_line_content": "              state = state->KillField(",
          "content_same": false
        },
        {
          "line": 881,
          "old_api": null,
          "new_api": "op",
          "old_text": null,
          "new_text": "current->op()",
          "old_line_content": "            } else {",
          "new_line_content": "            FieldAccess const& access = FieldAccessOf(current->op());",
          "content_same": false
        },
        {
          "line": 883,
          "old_api": null,
          "new_api": "FieldIndexOf",
          "old_text": null,
          "new_text": "FieldIndexOf(access)",
          "old_line_content": "            }",
          "new_line_content": "            int field_index = FieldIndexOf(access);",
          "content_same": false
        },
        {
          "line": 885,
          "old_api": null,
          "new_api": "zone",
          "old_text": null,
          "new_text": "zone()",
          "old_line_content": "          }",
          "new_line_content": "              state = state->KillFields(object, zone());",
          "content_same": false
        },
        {
          "line": 892,
          "old_api": null,
          "new_api": "NodeProperties::GetValueInput(current, 0)",
          "old_text": null,
          "new_text": "NodeProperties::GetValueInput(current, 0)",
          "old_line_content": "          case IrOpcode::kStoreBuffer:",
          "new_line_content": "            Node* const object = NodeProperties::GetValueInput(current, 0);",
          "content_same": false
        },
        {
          "line": 893,
          "old_api": null,
          "new_api": "NodeProperties::GetValueInput(current, 1)",
          "old_text": null,
          "new_text": "NodeProperties::GetValueInput(current, 1)",
          "old_line_content": "          case IrOpcode::kStoreTypedElement: {",
          "new_line_content": "            Node* const index = NodeProperties::GetValueInput(current, 1);",
          "content_same": false
        },
        {
          "line": 894,
          "old_api": null,
          "new_api": "zone",
          "old_text": null,
          "new_text": "zone()",
          "old_line_content": "            // Doesn't affect anything we track with the state currently.",
          "new_line_content": "            state = state->KillElement(object, index, zone());",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 928,
          "old_api": "MachineType::PointerRepresentation()",
          "new_api": null,
          "old_text": "MachineType::PointerRepresentation()",
          "new_text": null,
          "old_line_content": "      if (rep != MachineType::PointerRepresentation()) {",
          "new_line_content": "    case MachineRepresentation::kSimd128:",
          "content_same": false
        },
        {
          "line": 898,
          "old_api": "empty_state",
          "new_api": null,
          "old_text": "empty_state()",
          "new_text": null,
          "old_line_content": "            return empty_state();",
          "new_line_content": "          case IrOpcode::kStoreTypedElement: {",
          "content_same": false
        },
        {
          "line": 901,
          "old_api": "op",
          "new_api": null,
          "old_text": "current->op()->EffectInputCount()",
          "new_text": null,
          "old_line_content": "      for (int i = 0; i < current->op()->EffectInputCount(); ++i) {",
          "new_line_content": "          }",
          "content_same": false
        },
        {
          "line": 902,
          "old_api": "NodeProperties::GetEffectInput(current, i)",
          "new_api": null,
          "old_text": "NodeProperties::GetEffectInput(current, i)",
          "new_text": null,
          "old_line_content": "        queue.push(NodeProperties::GetEffectInput(current, i));",
          "new_line_content": "          default:",
          "content_same": false
        },
        {
          "line": 872,
          "old_api": "zone",
          "new_api": null,
          "old_text": "zone()",
          "new_text": null,
          "old_line_content": "                object, FieldIndexOf(JSObject::kElementsOffset), zone());",
          "new_line_content": "            if (target_map != object_map) {",
          "content_same": false
        },
        {
          "line": 877,
          "old_api": "NodeProperties::GetValueInput(current, 0)",
          "new_api": null,
          "old_text": "NodeProperties::GetValueInput(current, 0)",
          "new_text": null,
          "old_line_content": "            Node* const object = NodeProperties::GetValueInput(current, 0);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 878,
          "old_api": "FieldIndexOf",
          "new_api": null,
          "old_text": "FieldIndexOf(access)",
          "new_text": null,
          "old_line_content": "            int field_index = FieldIndexOf(access);",
          "new_line_content": "            break;",
          "content_same": false
        },
        {
          "line": 911,
          "old_api": "DCHECK_EQ",
          "new_api": null,
          "old_text": "DCHECK_EQ(0, offset % kPointerSize)",
          "new_text": null,
          "old_line_content": "  DCHECK_EQ(0, offset % kPointerSize);",
          "new_line_content": "  return state;",
          "content_same": false
        },
        {
          "line": 880,
          "old_api": "zone",
          "new_api": null,
          "old_text": "zone()",
          "new_text": null,
          "old_line_content": "              state = state->KillFields(object, zone());",
          "new_line_content": "          case IrOpcode::kStoreField: {",
          "content_same": false
        },
        {
          "line": 913,
          "old_api": "static_cast<int>(kMaxTrackedFields)",
          "new_api": null,
          "old_text": "static_cast<int>(kMaxTrackedFields)",
          "new_text": null,
          "old_line_content": "  if (field_index >= static_cast<int>(kMaxTrackedFields)) return -1;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 951,
          "old_api": "FieldIndexOf",
          "new_api": null,
          "old_text": "FieldIndexOf(access.offset)",
          "new_text": null,
          "old_line_content": "  return FieldIndexOf(access.offset);",
          "new_line_content": "      break;",
          "content_same": false
        },
        {
          "line": 919,
          "old_api": "representation",
          "new_api": null,
          "old_text": "access.machine_type.representation()",
          "new_text": null,
          "old_line_content": "  MachineRepresentation rep = access.machine_type.representation();",
          "new_line_content": "  return field_index;",
          "content_same": false
        },
        {
          "line": 888,
          "old_api": "NodeProperties::GetValueInput(current, 1)",
          "new_api": null,
          "old_text": "NodeProperties::GetValueInput(current, 1)",
          "new_text": null,
          "old_line_content": "            Node* const index = NodeProperties::GetValueInput(current, 1);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 889,
          "old_api": "zone",
          "new_api": null,
          "old_text": "zone()",
          "new_text": null,
          "old_line_content": "            state = state->KillElement(object, index, zone());",
          "new_line_content": "            break;",
          "content_same": false
        },
        {
          "line": 955,
          "old_api": "common",
          "new_api": null,
          "old_text": "jsgraph()->common()",
          "new_text": null,
          "old_line_content": "  return jsgraph()->common();",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 958,
          "old_api": "graph",
          "new_api": null,
          "old_text": "jsgraph()->graph()",
          "new_text": null,
          "old_line_content": "Graph* LoadElimination::graph() const { return jsgraph()->graph(); }",
          "new_line_content": "",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 7,
      "total_additions": 19,
      "total_deletions": 16,
      "total_api_changes": 42
    },
    "non_api_changes": {
      "has_non_api_changes": false,
      "evidence": {
        "total_diff_lines": 9,
        "api_related_lines": 42,
        "non_api_lines": 0,
        "non_api_line_numbers": []
      }
    },
    "api_calls_before": 431,
    "api_calls_after": 434,
    "diff_info": {
      "added_lines": 9,
      "removed_lines": 4,
      "total_diff_lines": 25
    }
  }
}
{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/v8/modified_file/4e4b84af247d77d8bbfb8380b15869b7986db128",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/v8/modified_file/4e4b84af247d77d8bbfb8380b15869b7986db128/before.cc",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/v8/modified_file/4e4b84af247d77d8bbfb8380b15869b7986db128/after.cc",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/v8/modified_file/4e4b84af247d77d8bbfb8380b15869b7986db128/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 3466,
          "old_api": "contains_any",
          "new_api": "constexpr",
          "old_text": "finished_events_.contains_any(kFinalEvents)",
          "new_text": "constexpr",
          "old_line_content": "  if (!finished_events_.contains_any(kFinalEvents)) {",
          "new_line_content": "  constexpr base::EnumSet<CompilationEvent> kFinalEvents{",
          "content_same": false
        },
        {
          "line": 3478,
          "old_api": "DCHECK_NULL",
          "new_api": "empty",
          "old_text": "DCHECK_NULL(js_to_wasm_wrapper_job_)",
          "new_text": "js_to_wasm_wrapper_units.empty()",
          "old_line_content": "    DCHECK_NULL(js_to_wasm_wrapper_job_);",
          "new_line_content": "  if (!js_to_wasm_wrapper_units.empty()) {",
          "content_same": false
        },
        {
          "line": 3480,
          "old_api": "begin",
          "new_api": "DCHECK_NULL",
          "old_text": "js_to_wasm_wrapper_units.begin()",
          "new_text": "DCHECK_NULL(js_to_wasm_wrapper_job_)",
          "old_line_content": "                                     js_to_wasm_wrapper_units.begin(),",
          "new_line_content": "    DCHECK_NULL(js_to_wasm_wrapper_job_);",
          "content_same": false
        },
        {
          "line": 3482,
          "old_api": "size",
          "new_api": "begin",
          "old_text": "V8::GetCurrentPlatform()->PostJob(\n        TaskPriority::kUserBlocking,\n        std::make_unique<AsyncCompileJSToWasmWrapperJob>(\n            native_module_weak_, js_to_wasm_wrapper_units_.size()))",
          "new_text": "js_to_wasm_wrapper_units.begin()",
          "old_line_content": "    js_to_wasm_wrapper_job_ = V8::GetCurrentPlatform()->PostJob(",
          "new_line_content": "                                     js_to_wasm_wrapper_units.begin(),",
          "content_same": false
        },
        {
          "line": 3487,
          "old_api": "empty",
          "new_api": "size",
          "old_text": "top_tier_units.empty()",
          "new_text": "js_to_wasm_wrapper_units_.size()",
          "old_line_content": "  if (!baseline_units.empty() || !top_tier_units.empty()) {",
          "new_line_content": "            native_module_weak_, js_to_wasm_wrapper_units_.size()));",
          "content_same": false
        },
        {
          "line": 3489,
          "old_api": "module",
          "new_api": "empty",
          "old_text": "native_module_->module()",
          "new_text": "top_tier_units.empty()",
          "old_line_content": "                                      native_module_->module());",
          "new_line_content": "  if (!baseline_units.empty() || !top_tier_units.empty()) {",
          "content_same": false
        },
        {
          "line": 3491,
          "old_api": "empty",
          "new_api": "module",
          "old_text": "baseline_units.empty()",
          "new_text": "native_module_->module()",
          "old_line_content": "  if (!baseline_units.empty()) {",
          "new_line_content": "                                      native_module_->module());",
          "content_same": false
        },
        {
          "line": 3493,
          "old_api": "NotifyConcurrencyIncrease",
          "new_api": "empty",
          "old_text": "baseline_compile_job_->NotifyConcurrencyIncrease()",
          "new_text": "baseline_units.empty()",
          "old_line_content": "    baseline_compile_job_->NotifyConcurrencyIncrease();",
          "new_line_content": "  if (!baseline_units.empty()) {",
          "content_same": false
        },
        {
          "line": 3495,
          "old_api": "empty",
          "new_api": "NotifyConcurrencyIncrease",
          "old_text": "top_tier_units.empty()",
          "new_text": "baseline_compile_job_->NotifyConcurrencyIncrease()",
          "old_line_content": "  if (!top_tier_units.empty()) {",
          "new_line_content": "    baseline_compile_job_->NotifyConcurrencyIncrease();",
          "content_same": false
        },
        {
          "line": 3497,
          "old_api": "NotifyConcurrencyIncrease",
          "new_api": "empty",
          "old_text": "top_tier_compile_job_->NotifyConcurrencyIncrease()",
          "new_text": "top_tier_units.empty()",
          "old_line_content": "    top_tier_compile_job_->NotifyConcurrencyIncrease();",
          "new_line_content": "  if (!top_tier_units.empty()) {",
          "content_same": false
        },
        {
          "line": 3529,
          "old_api": "size",
          "new_api": "TRACE_DISABLED_BY_DEFAULT",
          "old_text": "js_to_wasm_wrapper_units_.size()",
          "new_text": "TRACE_DISABLED_BY_DEFAULT(\"v8.wasm.detailed\")",
          "old_line_content": "               js_to_wasm_wrapper_units_.size());",
          "new_line_content": "  TRACE_EVENT1(TRACE_DISABLED_BY_DEFAULT(\"v8.wasm.detailed\"),",
          "content_same": false
        },
        {
          "line": 3531,
          "old_api": "MaxCanonicalTypeIndex",
          "new_api": "size",
          "old_text": "module->MaxCanonicalTypeIndex()",
          "new_text": "js_to_wasm_wrapper_units_.size()",
          "old_line_content": "  isolate->heap()->EnsureWasmCanonicalRttsSize(module->MaxCanonicalTypeIndex() +",
          "new_line_content": "               js_to_wasm_wrapper_units_.size());",
          "content_same": false
        },
        {
          "line": 3539,
          "old_api": "is_import",
          "new_api": "Finalize",
          "old_text": "unit->is_import()",
          "new_text": "unit->Finalize()",
          "old_line_content": "        GetExportWrapperIndex(unit->canonical_sig_index(), unit->is_import());",
          "new_line_content": "    Handle<Code> code = unit->Finalize();",
          "content_same": false
        },
        {
          "line": 3541,
          "old_api": "MaybeObject::FromObject(*code)",
          "new_api": "is_import",
          "old_text": "MaybeObject::FromObject(*code)",
          "new_text": "unit->is_import()",
          "old_line_content": "                                               MaybeObject::FromObject(*code));",
          "new_line_content": "        GetExportWrapperIndex(unit->canonical_sig_index(), unit->is_import());",
          "content_same": false
        },
        {
          "line": 3542,
          "old_api": "is_builtin",
          "new_api": "Set",
          "old_text": "code->is_builtin()",
          "new_text": "isolate->heap()->js_to_wasm_wrappers().Set(index,\n                                               MaybeObject::FromObject(*code))",
          "old_line_content": "    if (!code->is_builtin()) {",
          "new_line_content": "    isolate->heap()->js_to_wasm_wrappers().Set(index,",
          "content_same": false
        },
        {
          "line": 3544,
          "old_api": "counters",
          "new_api": "is_builtin",
          "old_text": "isolate->counters()",
          "new_text": "code->is_builtin()",
          "old_line_content": "      RecordStats(*code, isolate->counters());",
          "new_line_content": "    if (!code->is_builtin()) {",
          "content_same": false
        },
        {
          "line": 3577,
          "old_api": "size",
          "new_api": "module",
          "old_text": "code_vector.size()",
          "new_text": "native_module_->module()",
          "old_line_content": "  for (size_t i = 0; i < code_vector.size(); i++) {",
          "new_line_content": "            native_module_->module()->num_declared_functions);",
          "content_same": false
        },
        {
          "line": 3579,
          "old_api": "DCHECK_NOT_NULL",
          "new_api": "size",
          "old_text": "DCHECK_NOT_NULL(code)",
          "new_text": "code_vector.size()",
          "old_line_content": "    DCHECK_NOT_NULL(code);",
          "new_line_content": "  for (size_t i = 0; i < code_vector.size(); i++) {",
          "content_same": false
        },
        {
          "line": 3582,
          "old_api": "index",
          "new_api": "num_functions",
          "old_text": "code->index()",
          "new_text": "native_module_->num_functions()",
          "old_line_content": "    if (code->index() <",
          "new_line_content": "    DCHECK_LT(code->index(), native_module_->num_functions());",
          "content_same": false
        },
        {
          "line": 3585,
          "old_api": "tier",
          "new_api": "num_imported_functions",
          "old_text": "code->tier()",
          "new_text": "native_module_->num_imported_functions()",
          "old_line_content": "      DCHECK_EQ(code->tier(), ExecutionTier::kTurbofan);",
          "new_line_content": "        static_cast<int>(native_module_->num_imported_functions())) {",
          "content_same": false
        },
        {
          "line": 3617,
          "old_api": "DCHECK_LE",
          "new_api": "tier",
          "old_text": "DCHECK_LE(0, outstanding_baseline_units_)",
          "new_text": "code->tier()",
          "old_line_content": "      DCHECK_LE(0, outstanding_baseline_units_);",
          "new_line_content": "            compilation_progress_[slot_index], code->tier());",
          "content_same": false
        },
        {
          "line": 3651,
          "old_api": "Add",
          "new_api": "static_cast<size_t>(v8_flags.wasm_caching_threshold)",
          "old_text": "triggered_events.Add(CompilationEvent::kFinishedCompilationChunk)",
          "new_text": "static_cast<size_t>(v8_flags.wasm_caching_threshold)",
          "old_line_content": "    triggered_events.Add(CompilationEvent::kFinishedCompilationChunk);",
          "new_line_content": "  if (dynamic_tiering_ && static_cast<size_t>(v8_flags.wasm_caching_threshold) <",
          "content_same": false
        },
        {
          "line": 3672,
          "old_api": "std::make_pair(CompilationEvent::kFinishedExportWrappers,\n                       \"wasm.ExportWrappersFinished\")",
          "new_api": "std::make_pair(CompilationEvent::kFailedCompilation,\n                       \"wasm.CompilationFailed\")",
          "old_text": "std::make_pair(CompilationEvent::kFinishedExportWrappers,\n                       \"wasm.ExportWrappersFinished\")",
          "new_text": "std::make_pair(CompilationEvent::kFailedCompilation,\n                       \"wasm.CompilationFailed\")",
          "old_line_content": "        std::make_pair(CompilationEvent::kFinishedExportWrappers,",
          "new_line_content": "       {std::make_pair(CompilationEvent::kFailedCompilation,",
          "content_same": false
        },
        {
          "line": 3674,
          "old_api": "std::make_pair(CompilationEvent::kFinishedBaselineCompilation,\n                       \"wasm.BaselineFinished\")",
          "new_api": "std::make_pair(CompilationEvent::kFinishedExportWrappers,\n                       \"wasm.ExportWrappersFinished\")",
          "old_text": "std::make_pair(CompilationEvent::kFinishedBaselineCompilation,\n                       \"wasm.BaselineFinished\")",
          "new_text": "std::make_pair(CompilationEvent::kFinishedExportWrappers,\n                       \"wasm.ExportWrappersFinished\")",
          "old_line_content": "        std::make_pair(CompilationEvent::kFinishedBaselineCompilation,",
          "new_line_content": "        std::make_pair(CompilationEvent::kFinishedExportWrappers,",
          "content_same": false
        },
        {
          "line": 3676,
          "old_api": "std::make_pair(CompilationEvent::kFinishedCompilationChunk,\n                       \"wasm.CompilationChunkFinished\")",
          "new_api": "std::make_pair(CompilationEvent::kFinishedBaselineCompilation,\n                       \"wasm.BaselineFinished\")",
          "old_text": "std::make_pair(CompilationEvent::kFinishedCompilationChunk,\n                       \"wasm.CompilationChunkFinished\")",
          "new_text": "std::make_pair(CompilationEvent::kFinishedBaselineCompilation,\n                       \"wasm.BaselineFinished\")",
          "old_line_content": "        std::make_pair(CompilationEvent::kFinishedCompilationChunk,",
          "new_line_content": "        std::make_pair(CompilationEvent::kFinishedBaselineCompilation,",
          "content_same": false
        },
        {
          "line": 3678,
          "old_api": "contains",
          "new_api": "std::make_pair(CompilationEvent::kFinishedCompilationChunk,\n                       \"wasm.CompilationChunkFinished\")",
          "old_text": "triggered_events.contains(event.first)",
          "new_text": "std::make_pair(CompilationEvent::kFinishedCompilationChunk,\n                       \"wasm.CompilationChunkFinished\")",
          "old_line_content": "    if (!triggered_events.contains(event.first)) continue;",
          "new_line_content": "        std::make_pair(CompilationEvent::kFinishedCompilationChunk,",
          "content_same": false
        },
        {
          "line": 3680,
          "old_api": "TRACE_EVENT1",
          "new_api": "contains",
          "old_text": "TRACE_EVENT1(\"v8.wasm\", event.second, \"id\", compilation_id_)",
          "new_text": "triggered_events.contains(event.first)",
          "old_line_content": "    TRACE_EVENT1(\"v8.wasm\", event.second, \"id\", compilation_id_);",
          "new_line_content": "    if (!triggered_events.contains(event.first)) continue;",
          "content_same": false
        },
        {
          "line": 3682,
          "old_api": "call",
          "new_api": "TRACE_EVENT1",
          "old_text": "callback->call(event.first)",
          "new_text": "TRACE_EVENT1(\"v8.wasm\", event.second, \"id\", compilation_id_)",
          "old_line_content": "      callback->call(event.first);",
          "new_line_content": "    TRACE_EVENT1(\"v8.wasm\", event.second, \"id\", compilation_id_);",
          "content_same": false
        },
        {
          "line": 3689,
          "old_api": "release_after_final_event",
          "new_api": "begin",
          "old_text": "callback->release_after_final_event()",
          "new_text": "std::remove_if(\n        callbacks_.begin(), callbacks_.end(), [](const auto& callback) {\n          return callback->release_after_final_event();\n        })",
          "old_line_content": "          return callback->release_after_final_event();",
          "new_line_content": "    auto new_end = std::remove_if(",
          "content_same": false
        },
        {
          "line": 3691,
          "old_api": "end",
          "new_api": "release_after_final_event",
          "old_text": "callbacks_.end()",
          "new_text": "callback->release_after_final_event()",
          "old_line_content": "    callbacks_.erase(new_end, callbacks_.end());",
          "new_line_content": "          return callback->release_after_final_event();",
          "content_same": false
        },
        {
          "line": 3716,
          "old_api": "index",
          "new_api": "import_wrapper_cache",
          "old_text": "code->index()",
          "new_text": "native_module_->import_wrapper_cache()",
          "old_line_content": "    int func_index = code->index();",
          "new_line_content": "  WasmImportWrapperCache* cache = native_module_->import_wrapper_cache();",
          "content_same": false
        },
        {
          "line": 3718,
          "old_api": "num_functions",
          "new_api": "index",
          "old_text": "native_module_->num_functions()",
          "new_text": "code->index()",
          "old_line_content": "    DCHECK_LT(func_index, native_module_->num_functions());",
          "new_line_content": "    int func_index = code->index();",
          "content_same": false
        },
        {
          "line": 3733,
          "old_api": "IncRef",
          "new_api": "DCHECK_NULL",
          "old_text": "code->IncRef()",
          "new_text": "DCHECK_NULL((*cache)[key])",
          "old_line_content": "      code->IncRef();",
          "new_line_content": "      DCHECK_NULL((*cache)[key]);",
          "content_same": false
        },
        {
          "line": 3745,
          "old_api": "HasWireBytes",
          "new_api": "std::move(code)",
          "old_text": "native_module_->HasWireBytes()",
          "new_text": "std::move(code)",
          "old_line_content": "  if (native_module_->HasWireBytes()) {",
          "new_line_content": "      native_module_->PublishCode(std::move(code));",
          "content_same": false
        },
        {
          "line": 3763,
          "old_api": "std::move(c)",
          "new_api": "size",
          "old_text": "std::move(c)",
          "new_text": "unpublished_code.size()",
          "old_line_content": "        state.publish_queue_.emplace_back(std::move(c));",
          "new_line_content": "                                   unpublished_code.size());",
          "content_same": false
        },
        {
          "line": 3812,
          "old_api": "IsValid",
          "new_api": "UNREACHABLE",
          "old_text": "js_to_wasm_wrapper_job_->IsValid()",
          "new_text": "UNREACHABLE()",
          "old_line_content": "  if (js_to_wasm_wrapper_job_ && js_to_wasm_wrapper_job_->IsValid()) {",
          "new_line_content": "      UNREACHABLE();",
          "content_same": false
        },
        {
          "line": 3832,
          "old_api": "AddTopTierUnit",
          "new_api": "GetCode",
          "old_text": "builder.AddTopTierUnit(func_index, ExecutionTier::kTurbofan)",
          "new_text": "native_module_->GetCode(func_index)",
          "old_line_content": "      builder.AddTopTierUnit(func_index, ExecutionTier::kTurbofan);",
          "new_line_content": "    WasmCode* code = native_module_->GetCode(func_index);",
          "content_same": false
        },
        {
          "line": 3855,
          "old_api": "get",
          "new_api": "GetCode",
          "old_text": "async_counters_.get()",
          "new_text": "native_module_->GetCode(func_index)",
          "old_line_content": "      wasm::GetWasmEngine()->CompileFunction(async_counters_.get(),",
          "new_line_content": "    WasmCode* code = native_module_->GetCode(func_index);",
          "content_same": false
        },
        {
          "line": 3873,
          "old_api": "size",
          "new_api": "explicit",
          "old_text": "compilation_units->size()",
          "new_text": "explicit",
          "old_line_content": "      : BaseCompileJSToWasmWrapperJob(compilation_units->size()),",
          "new_line_content": "  explicit CompileJSToWasmWrapperJob(",
          "content_same": false
        },
        {
          "line": 3880,
          "old_api": "get",
          "new_api": "GetNextUnitIndex",
          "old_text": "*compilation_units_)[index].second.get()",
          "new_text": "GetNextUnitIndex(&index)",
          "old_line_content": "          (*compilation_units_)[index].second.get();",
          "new_line_content": "    while (GetNextUnitIndex(&index)) {",
          "content_same": false
        },
        {
          "line": 3882,
          "old_api": "CompleteUnit",
          "new_api": "get",
          "old_text": "CompleteUnit()",
          "new_text": "*compilation_units_)[index].second.get()",
          "old_line_content": "      CompleteUnit();",
          "new_line_content": "          (*compilation_units_)[index].second.get();",
          "content_same": false
        },
        {
          "line": 3883,
          "old_api": "ShouldYield",
          "new_api": "Execute",
          "old_text": "delegate->ShouldYield()",
          "new_text": "unit->Execute()",
          "old_line_content": "      if (delegate && delegate->ShouldYield()) return;",
          "new_line_content": "      unit->Execute();",
          "content_same": false
        },
        {
          "line": 3895,
          "old_api": "MaxCanonicalTypeIndex",
          "new_api": "TRACE_EVENT0",
          "old_text": "module->MaxCanonicalTypeIndex()",
          "new_text": "TRACE_EVENT0(\"v8.wasm\", \"wasm.CompileJsToWasmWrappers\")",
          "old_line_content": "  isolate->heap()->EnsureWasmCanonicalRttsSize(module->MaxCanonicalTypeIndex() +",
          "new_line_content": "  TRACE_EVENT0(\"v8.wasm\", \"wasm.CompileJsToWasmWrappers\");",
          "content_same": false
        },
        {
          "line": 3912,
          "old_api": "Get",
          "new_api": "GetExportWrapperIndex",
          "old_text": "isolate->heap()->js_to_wasm_wrappers().Get(wrapper_index)",
          "new_text": "GetExportWrapperIndex(canonical_type_index, function.imported)",
          "old_line_content": "        isolate->heap()->js_to_wasm_wrappers().Get(wrapper_index);",
          "new_line_content": "        GetExportWrapperIndex(canonical_type_index, function.imported);",
          "content_same": false
        },
        {
          "line": 3914,
          "old_api": "GetHeapObject",
          "new_api": "Get",
          "old_text": "existing_wrapper.GetHeapObject().IsUndefined()",
          "new_text": "isolate->heap()->js_to_wasm_wrappers().Get(wrapper_index)",
          "old_line_content": "        !existing_wrapper.GetHeapObject().IsUndefined()) {",
          "new_line_content": "        isolate->heap()->js_to_wasm_wrappers().Get(wrapper_index);",
          "content_same": false
        },
        {
          "line": 3921,
          "old_api": "std::make_unique<JSToWasmWrapperCompilationUnit>(\n          isolate, function.sig, canonical_type_index, module,\n          function.imported, enabled_features,\n          JSToWasmWrapperCompilationUnit::kAllowGeneric)",
          "new_api": "insert",
          "old_text": "std::make_unique<JSToWasmWrapperCompilationUnit>(\n          isolate, function.sig, canonical_type_index, module,\n          function.imported, enabled_features,\n          JSToWasmWrapperCompilationUnit::kAllowGeneric)",
          "new_text": "set.insert(key)",
          "old_line_content": "      auto unit = std::make_unique<JSToWasmWrapperCompilationUnit>(",
          "new_line_content": "    const auto [it, inserted] = set.insert(key);",
          "content_same": false
        },
        {
          "line": 3934,
          "old_api": "std::make_unique<CompileJSToWasmWrapperJob>(&compilation_units)",
          "new_api": "size",
          "old_text": "std::make_unique<CompileJSToWasmWrapperJob>(&compilation_units)",
          "new_text": "TRACE_EVENT1(\"v8.wasm\", \"wasm.JsToWasmWrapperCompilation\", \"num_wrappers\",\n                 compilation_units.size())",
          "old_line_content": "    auto job = std::make_unique<CompileJSToWasmWrapperJob>(&compilation_units);",
          "new_line_content": "    TRACE_EVENT1(\"v8.wasm\", \"wasm.JsToWasmWrapperCompilation\", \"num_wrappers\",",
          "content_same": false
        },
        {
          "line": 3936,
          "old_api": "CreateJob",
          "new_api": "std::make_unique<CompileJSToWasmWrapperJob>(&compilation_units)",
          "old_text": "V8::GetCurrentPlatform()->CreateJob(\n          TaskPriority::kUserVisible, std::move(job))",
          "new_text": "std::make_unique<CompileJSToWasmWrapperJob>(&compilation_units)",
          "old_line_content": "      auto job_handle = V8::GetCurrentPlatform()->CreateJob(",
          "new_line_content": "    auto job = std::make_unique<CompileJSToWasmWrapperJob>(&compilation_units);",
          "content_same": false
        },
        {
          "line": 3942,
          "old_api": "Run",
          "new_api": "Join",
          "old_text": "job->Run(nullptr)",
          "new_text": "job_handle->Join()",
          "old_line_content": "      job->Run(nullptr);",
          "new_line_content": "      job_handle->Join();",
          "content_same": false
        },
        {
          "line": 3955,
          "old_api": "Finalize",
          "new_api": "get",
          "old_text": "unit->Finalize()",
          "new_text": "pair.second.get()",
          "old_line_content": "    Handle<Code> code = unit->Finalize();",
          "new_line_content": "    JSToWasmWrapperCompilationUnit* unit = pair.second.get();",
          "content_same": false
        },
        {
          "line": 3956,
          "old_api": "GetExportWrapperIndex",
          "new_api": "isolate",
          "old_text": "GetExportWrapperIndex(key.second, key.first)",
          "new_text": "unit->isolate()",
          "old_line_content": "    int wrapper_index = GetExportWrapperIndex(key.second, key.first);",
          "new_line_content": "    DCHECK_EQ(isolate, unit->isolate());",
          "content_same": false
        },
        {
          "line": 3957,
          "old_api": "Set",
          "new_api": "Finalize",
          "old_text": "isolate->heap()->js_to_wasm_wrappers().Set(\n        wrapper_index, HeapObjectReference::Strong(*code))",
          "new_text": "unit->Finalize()",
          "old_line_content": "    isolate->heap()->js_to_wasm_wrappers().Set(",
          "new_line_content": "    Handle<Code> code = unit->Finalize();",
          "content_same": false
        },
        {
          "line": 3958,
          "old_api": "HeapObjectReference::Strong(*code)",
          "new_api": "GetExportWrapperIndex",
          "old_text": "HeapObjectReference::Strong(*code)",
          "new_text": "GetExportWrapperIndex(key.second, key.first)",
          "old_line_content": "        wrapper_index, HeapObjectReference::Strong(*code));",
          "new_line_content": "    int wrapper_index = GetExportWrapperIndex(key.second, key.first);",
          "content_same": false
        },
        {
          "line": 3959,
          "old_api": "is_builtin",
          "new_api": "Set",
          "old_text": "code->is_builtin()",
          "new_text": "isolate->heap()->js_to_wasm_wrappers().Set(\n        wrapper_index, HeapObjectReference::Strong(*code))",
          "old_line_content": "    if (!code->is_builtin()) {",
          "new_line_content": "    isolate->heap()->js_to_wasm_wrappers().Set(",
          "content_same": false
        },
        {
          "line": 3961,
          "old_api": "counters",
          "new_api": "is_builtin",
          "old_text": "isolate->counters()",
          "new_text": "code->is_builtin()",
          "old_line_content": "      RecordStats(*code, isolate->counters());",
          "new_line_content": "    if (!code->is_builtin()) {",
          "content_same": false
        },
        {
          "line": 3990,
          "old_api": "std::move(wasm_code)",
          "new_api": "GetCodeKind",
          "old_text": "std::move(wasm_code)",
          "new_text": "GetCodeKind(result)",
          "old_line_content": "  WasmCode* published_code = native_module->PublishCode(std::move(wasm_code));",
          "new_line_content": "      result.source_positions.as_vector(), GetCodeKind(result),",
          "content_same": false
        },
        {
          "line": 3992,
          "old_api": "IncRef",
          "new_api": "std::move(wasm_code)",
          "old_text": "published_code->IncRef()",
          "new_text": "std::move(wasm_code)",
          "old_line_content": "  published_code->IncRef();",
          "new_line_content": "  WasmCode* published_code = native_module->PublishCode(std::move(wasm_code));",
          "content_same": false
        },
        {
          "line": 3994,
          "old_api": "length",
          "new_api": "IncRef",
          "old_text": "published_code->instructions().length()",
          "new_text": "published_code->IncRef()",
          "old_line_content": "      published_code->instructions().length());",
          "new_line_content": "  published_code->IncRef();",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 3584,
          "old_api": null,
          "new_api": "index",
          "old_text": null,
          "new_text": "code->index()",
          "old_line_content": "      // Import wrapper.",
          "new_line_content": "    if (code->index() <",
          "content_same": false
        },
        {
          "line": 3587,
          "old_api": null,
          "new_api": "tier",
          "old_text": null,
          "new_text": "code->tier()",
          "old_line_content": "    } else {",
          "new_line_content": "      DCHECK_EQ(code->tier(), ExecutionTier::kTurbofan);",
          "content_same": false
        },
        {
          "line": 3591,
          "old_api": null,
          "new_api": "tier",
          "old_text": null,
          "new_text": "code->tier()",
          "old_line_content": "      // Read function's compilation progress.",
          "new_line_content": "      DCHECK_NE(code->tier(), ExecutionTier::kNone);",
          "content_same": false
        },
        {
          "line": 3598,
          "old_api": null,
          "new_api": "index",
          "old_text": null,
          "new_text": "code->index()",
          "old_line_content": "      ExecutionTier required_baseline_tier =",
          "new_line_content": "          declared_function_index(native_module_->module(), code->index());",
          "content_same": false
        },
        {
          "line": 3601,
          "old_api": null,
          "new_api": "RequiredBaselineTierField::decode(function_progress)",
          "old_text": null,
          "new_text": "RequiredBaselineTierField::decode(function_progress)",
          "old_line_content": "",
          "new_line_content": "          RequiredBaselineTierField::decode(function_progress);",
          "content_same": false
        },
        {
          "line": 3602,
          "old_api": null,
          "new_api": "ReachedTierField::decode(function_progress)",
          "old_text": null,
          "new_text": "ReachedTierField::decode(function_progress)",
          "old_line_content": "      // Check whether required baseline or top tier are reached.",
          "new_line_content": "      ExecutionTier reached_tier = ReachedTierField::decode(function_progress);",
          "content_same": false
        },
        {
          "line": 3606,
          "old_api": null,
          "new_api": "tier",
          "old_text": null,
          "new_text": "code->tier()",
          "old_line_content": "        outstanding_baseline_units_--;",
          "new_line_content": "          required_baseline_tier <= code->tier()) {",
          "content_same": false
        },
        {
          "line": 3607,
          "old_api": null,
          "new_api": "DCHECK_GT",
          "old_text": null,
          "new_text": "DCHECK_GT(outstanding_baseline_units_, 0)",
          "old_line_content": "      }",
          "new_line_content": "        DCHECK_GT(outstanding_baseline_units_, 0);",
          "content_same": false
        },
        {
          "line": 3610,
          "old_api": null,
          "new_api": "tier",
          "old_text": null,
          "new_text": "code->tier()",
          "old_line_content": "      }",
          "new_line_content": "      if (code->tier() == ExecutionTier::kTurbofan) {",
          "content_same": false
        },
        {
          "line": 3611,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "code->instructions().size()",
          "old_line_content": "",
          "new_line_content": "        bytes_since_last_chunk_ += code->instructions().size();",
          "content_same": false
        },
        {
          "line": 3616,
          "old_api": null,
          "new_api": "tier",
          "old_text": null,
          "new_text": "ReachedTierField::update(\n            compilation_progress_[slot_index], code->tier())",
          "old_line_content": "      }",
          "new_line_content": "        compilation_progress_[slot_index] = ReachedTierField::update(",
          "content_same": false
        },
        {
          "line": 3619,
          "old_api": null,
          "new_api": "DCHECK_LE",
          "old_text": null,
          "new_text": "DCHECK_LE(0, outstanding_baseline_units_)",
          "old_line_content": "  }",
          "new_line_content": "      DCHECK_LE(0, outstanding_baseline_units_);",
          "content_same": false
        },
        {
          "line": 3623,
          "old_api": null,
          "new_api": "TriggerCallbacks",
          "old_text": null,
          "new_text": "TriggerCallbacks()",
          "old_line_content": "",
          "new_line_content": "  TriggerCallbacks();",
          "content_same": false
        },
        {
          "line": 3629,
          "old_api": null,
          "new_api": "TriggerCallbacks",
          "old_text": null,
          "new_text": "TriggerCallbacks()",
          "old_line_content": "",
          "new_line_content": "  TriggerCallbacks();",
          "content_same": false
        },
        {
          "line": 3635,
          "old_api": null,
          "new_api": "TriggerCallbacks",
          "old_text": null,
          "new_text": "TriggerCallbacks()",
          "old_line_content": "",
          "new_line_content": "  TriggerCallbacks();",
          "content_same": false
        },
        {
          "line": 3639,
          "old_api": null,
          "new_api": "TryLock",
          "old_text": null,
          "new_text": "callbacks_mutex_.TryLock()",
          "old_line_content": "  base::EnumSet<CompilationEvent> triggered_events;",
          "new_line_content": "  DCHECK(!callbacks_mutex_.TryLock());",
          "content_same": false
        },
        {
          "line": 3645,
          "old_api": null,
          "new_api": "Add",
          "old_text": null,
          "new_text": "triggered_events.Add(CompilationEvent::kFinishedBaselineCompilation)",
          "old_line_content": "  }",
          "new_line_content": "      triggered_events.Add(CompilationEvent::kFinishedBaselineCompilation);",
          "content_same": false
        },
        {
          "line": 3653,
          "old_api": null,
          "new_api": "Add",
          "old_text": null,
          "new_text": "triggered_events.Add(CompilationEvent::kFinishedCompilationChunk)",
          "old_line_content": "  }",
          "new_line_content": "    triggered_events.Add(CompilationEvent::kFinishedCompilationChunk);",
          "content_same": false
        },
        {
          "line": 3657,
          "old_api": null,
          "new_api": "load",
          "old_text": null,
          "new_text": "compile_failed_.load(std::memory_order_relaxed)",
          "old_line_content": "    triggered_events =",
          "new_line_content": "  if (compile_failed_.load(std::memory_order_relaxed)) {",
          "content_same": false
        },
        {
          "line": 3660,
          "old_api": null,
          "new_api": "base::EnumSet<CompilationEvent>({CompilationEvent::kFailedCompilation})",
          "old_text": null,
          "new_text": "base::EnumSet<CompilationEvent>({CompilationEvent::kFailedCompilation})",
          "old_line_content": "",
          "new_line_content": "        base::EnumSet<CompilationEvent>({CompilationEvent::kFailedCompilation});",
          "content_same": false
        },
        {
          "line": 3663,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "triggered_events.empty()",
          "old_line_content": "  // Don't trigger past events again.",
          "new_line_content": "  if (triggered_events.empty()) return;",
          "content_same": false
        },
        {
          "line": 3681,
          "old_api": null,
          "new_api": "DCHECK_NE",
          "old_text": null,
          "new_text": "DCHECK_NE(compilation_id_, kInvalidCompilationID)",
          "old_line_content": "    for (auto& callback : callbacks_) {",
          "new_line_content": "    DCHECK_NE(compilation_id_, kInvalidCompilationID);",
          "content_same": false
        },
        {
          "line": 3684,
          "old_api": null,
          "new_api": "call",
          "old_text": null,
          "new_text": "callback->call(event.first)",
          "old_line_content": "  }",
          "new_line_content": "      callback->call(event.first);",
          "content_same": false
        },
        {
          "line": 3690,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "callbacks_.end()",
          "old_line_content": "        });",
          "new_line_content": "        callbacks_.begin(), callbacks_.end(), [](const auto& callback) {",
          "content_same": false
        },
        {
          "line": 3693,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "callbacks_.end()",
          "old_line_content": "}",
          "new_line_content": "    callbacks_.erase(new_end, callbacks_.end());",
          "content_same": false
        },
        {
          "line": 3699,
          "old_api": null,
          "new_api": "Add",
          "old_text": null,
          "new_text": "detected_features_.Add(detected)",
          "old_line_content": "",
          "new_line_content": "  detected_features_.Add(detected);",
          "content_same": false
        },
        {
          "line": 3707,
          "old_api": null,
          "new_api": "UpdateFeatureUseCounts",
          "old_text": null,
          "new_text": "UpdateFeatureUseCounts(isolate, detected_features_)",
          "old_line_content": "",
          "new_line_content": "  UpdateFeatureUseCounts(isolate, detected_features_);",
          "content_same": false
        },
        {
          "line": 3712,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "unpublished_code.empty()",
          "old_line_content": "  // For import wrapper compilation units, add result to the cache.",
          "new_line_content": "  if (unpublished_code.empty()) return;",
          "content_same": false
        },
        {
          "line": 3715,
          "old_api": null,
          "new_api": "num_imported_functions",
          "old_text": null,
          "new_text": "native_module_->num_imported_functions()",
          "old_line_content": "  for (const auto& code : unpublished_code) {",
          "new_line_content": "  int num_imported_functions = native_module_->num_imported_functions();",
          "content_same": false
        },
        {
          "line": 3719,
          "old_api": null,
          "new_api": "DCHECK_LE",
          "old_text": null,
          "new_text": "DCHECK_LE(0, func_index)",
          "old_line_content": "    if (func_index < num_imported_functions) {",
          "new_line_content": "    DCHECK_LE(0, func_index);",
          "content_same": false
        },
        {
          "line": 3720,
          "old_api": null,
          "new_api": "num_functions",
          "old_text": null,
          "new_text": "native_module_->num_functions()",
          "old_line_content": "      const WasmFunction& function =",
          "new_line_content": "    DCHECK_LT(func_index, native_module_->num_functions());",
          "content_same": false
        },
        {
          "line": 3725,
          "old_api": null,
          "new_api": "module",
          "old_text": null,
          "new_text": "native_module_->module()",
          "old_line_content": "      WasmImportWrapperCache::CacheKey key(",
          "new_line_content": "          native_module_->module()",
          "content_same": false
        },
        {
          "line": 3729,
          "old_api": null,
          "new_api": "parameter_count",
          "old_text": null,
          "new_text": "function.sig->parameter_count()",
          "old_line_content": "      // have been added as a compilation unit. So it is always the first time",
          "new_line_content": "          static_cast<int>(function.sig->parameter_count()), kNoSuspend);",
          "content_same": false
        },
        {
          "line": 3734,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "code.get()",
          "old_line_content": "    }",
          "new_line_content": "      (*cache)[key] = code.get();",
          "content_same": false
        },
        {
          "line": 3735,
          "old_api": null,
          "new_api": "IncRef",
          "old_text": null,
          "new_text": "code->IncRef()",
          "old_line_content": "  }",
          "new_line_content": "      code->IncRef();",
          "content_same": false
        },
        {
          "line": 3738,
          "old_api": null,
          "new_api": "base::VectorOf(unpublished_code)",
          "old_text": null,
          "new_text": "base::VectorOf(unpublished_code)",
          "old_line_content": "",
          "new_line_content": "  PublishCode(base::VectorOf(unpublished_code));",
          "content_same": false
        },
        {
          "line": 3747,
          "old_api": null,
          "new_api": "HasWireBytes",
          "old_text": null,
          "new_text": "native_module_->HasWireBytes()",
          "old_line_content": "  }",
          "new_line_content": "  if (native_module_->HasWireBytes()) {",
          "content_same": false
        },
        {
          "line": 3748,
          "old_api": null,
          "new_api": "base::VectorOf(published_code)",
          "old_text": null,
          "new_text": "base::VectorOf(published_code)",
          "old_line_content": "",
          "new_line_content": "    GetWasmEngine()->LogCode(base::VectorOf(published_code));",
          "content_same": false
        },
        {
          "line": 3751,
          "old_api": null,
          "new_api": "std::move(published_code)",
          "old_text": null,
          "new_text": "std::move(published_code)",
          "old_line_content": "",
          "new_line_content": "  OnFinishedUnits(base::VectorOf(std::move(published_code)));",
          "content_same": false
        },
        {
          "line": 3762,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "state.publish_queue_.size()",
          "old_line_content": "      for (auto& c : unpublished_code) {",
          "new_line_content": "      state.publish_queue_.reserve(state.publish_queue_.size() +",
          "content_same": false
        },
        {
          "line": 3765,
          "old_api": null,
          "new_api": "std::move(c)",
          "old_text": null,
          "new_text": "std::move(c)",
          "old_line_content": "      return;",
          "new_line_content": "        state.publish_queue_.emplace_back(std::move(c));",
          "content_same": false
        },
        {
          "line": 3772,
          "old_api": null,
          "new_api": "std::move(unpublished_code)",
          "old_text": null,
          "new_text": "std::move(unpublished_code)",
          "old_line_content": "",
          "new_line_content": "    PublishCompilationResults(std::move(unpublished_code));",
          "content_same": false
        },
        {
          "line": 3773,
          "old_api": null,
          "new_api": "clear",
          "old_text": null,
          "new_text": "unpublished_code.clear()",
          "old_line_content": "    // Keep publishing new code that came in.",
          "new_line_content": "    unpublished_code.clear();",
          "content_same": false
        },
        {
          "line": 3777,
          "old_api": null,
          "new_api": "DCHECK",
          "old_text": null,
          "new_text": "DCHECK(state.publisher_running_)",
          "old_line_content": "      state.publisher_running_ = false;",
          "new_line_content": "    DCHECK(state.publisher_running_);",
          "content_same": false
        },
        {
          "line": 3778,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "state.publish_queue_.empty()",
          "old_line_content": "      return;",
          "new_line_content": "    if (state.publish_queue_.empty()) {",
          "content_same": false
        },
        {
          "line": 3782,
          "old_api": null,
          "new_api": "swap",
          "old_text": null,
          "new_text": "unpublished_code.swap(state.publish_queue_)",
          "old_line_content": "}",
          "new_line_content": "    unpublished_code.swap(state.publish_queue_);",
          "content_same": false
        },
        {
          "line": 3788,
          "old_api": null,
          "new_api": "GetSizeForTier",
          "old_text": null,
          "new_text": "compilation_unit_queues_.GetSizeForTier(tier)",
          "old_line_content": "",
          "new_line_content": "  return compilation_unit_queues_.GetSizeForTier(tier);",
          "content_same": false
        },
        {
          "line": 3792,
          "old_api": null,
          "new_api": "store",
          "old_text": null,
          "new_text": "compile_cancelled_.store(true, std::memory_order_relaxed)",
          "old_line_content": "    return;  // Already failed before.",
          "new_line_content": "  compile_cancelled_.store(true, std::memory_order_relaxed);",
          "content_same": false
        },
        {
          "line": 3793,
          "old_api": null,
          "new_api": "exchange",
          "old_text": null,
          "new_text": "compile_failed_.exchange(true, std::memory_order_relaxed)",
          "old_line_content": "  }",
          "new_line_content": "  if (compile_failed_.exchange(true, std::memory_order_relaxed)) {",
          "content_same": false
        },
        {
          "line": 3798,
          "old_api": null,
          "new_api": "TriggerCallbacks",
          "old_text": null,
          "new_text": "TriggerCallbacks()",
          "old_line_content": "}",
          "new_line_content": "  TriggerCallbacks();",
          "content_same": false
        },
        {
          "line": 3799,
          "old_api": null,
          "new_api": "clear",
          "old_text": null,
          "new_text": "callbacks_.clear()",
          "old_line_content": "",
          "new_line_content": "  callbacks_.clear();",
          "content_same": false
        },
        {
          "line": 3808,
          "old_api": null,
          "new_api": "Join",
          "old_text": null,
          "new_text": "baseline_compile_job_->Join()",
          "old_line_content": "    default:",
          "new_line_content": "      if (baseline_compile_job_->IsValid()) baseline_compile_job_->Join();",
          "content_same": false
        },
        {
          "line": 3814,
          "old_api": null,
          "new_api": "IsValid",
          "old_text": null,
          "new_text": "js_to_wasm_wrapper_job_->IsValid()",
          "old_line_content": "  }",
          "new_line_content": "  if (js_to_wasm_wrapper_job_ && js_to_wasm_wrapper_job_->IsValid()) {",
          "content_same": false
        },
        {
          "line": 3815,
          "old_api": null,
          "new_api": "Join",
          "old_text": null,
          "new_text": "js_to_wasm_wrapper_job_->Join()",
          "old_line_content": "#ifdef DEBUG",
          "new_line_content": "    js_to_wasm_wrapper_job_->Join();",
          "content_same": false
        },
        {
          "line": 3821,
          "old_api": null,
          "new_api": "contains_any",
          "old_text": null,
          "new_text": "finished_events_.contains_any(events)",
          "old_line_content": "}",
          "new_line_content": "  DCHECK(finished_events_.contains_any(events));",
          "content_same": false
        },
        {
          "line": 3826,
          "old_api": null,
          "new_api": "module",
          "old_text": null,
          "new_text": "native_module_->module()",
          "old_line_content": "  WasmCodeRefScope code_ref_scope;",
          "new_line_content": "  const WasmModule* module = native_module_->module();",
          "content_same": false
        },
        {
          "line": 3833,
          "old_api": null,
          "new_api": "is_turbofan",
          "old_text": null,
          "new_text": "code->is_turbofan()",
          "old_line_content": "    }",
          "new_line_content": "    if (!code || !code->is_turbofan()) {",
          "content_same": false
        },
        {
          "line": 3834,
          "old_api": null,
          "new_api": "AddTopTierUnit",
          "old_text": null,
          "new_text": "builder.AddTopTierUnit(func_index, ExecutionTier::kTurbofan)",
          "old_line_content": "  }",
          "new_line_content": "      builder.AddTopTierUnit(func_index, ExecutionTier::kTurbofan);",
          "content_same": false
        },
        {
          "line": 3837,
          "old_api": null,
          "new_api": "Commit",
          "old_text": null,
          "new_text": "builder.Commit()",
          "old_line_content": "  // Join the compilation, until no compilation units are left anymore.",
          "new_line_content": "  builder.Commit();",
          "content_same": false
        },
        {
          "line": 3843,
          "old_api": null,
          "new_api": "UNIMPLEMENTED",
          "old_text": null,
          "new_text": "UNIMPLEMENTED()",
          "old_line_content": "  };",
          "new_line_content": "    void NotifyConcurrencyIncrease() override { UNIMPLEMENTED(); }",
          "content_same": false
        },
        {
          "line": 3848,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "async_counters_.get()",
          "old_line_content": "",
          "new_line_content": "  ExecuteCompilationUnits(native_module_weak_, async_counters_.get(), &delegate,",
          "content_same": false
        },
        {
          "line": 3856,
          "old_api": null,
          "new_api": "is_turbofan",
          "old_text": null,
          "new_text": "code->is_turbofan()",
          "old_line_content": "                                             native_module_, func_index,",
          "new_line_content": "    if (!code || !code->is_turbofan()) {",
          "content_same": false
        },
        {
          "line": 3857,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "async_counters_.get()",
          "old_line_content": "                                             wasm::ExecutionTier::kTurbofan);",
          "new_line_content": "      wasm::GetWasmEngine()->CompileFunction(async_counters_.get(),",
          "content_same": false
        },
        {
          "line": 3875,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "compilation_units->size()",
          "old_line_content": "",
          "new_line_content": "      : BaseCompileJSToWasmWrapperJob(compilation_units->size()),",
          "content_same": false
        },
        {
          "line": 3884,
          "old_api": null,
          "new_api": "CompleteUnit",
          "old_text": null,
          "new_text": "CompleteUnit()",
          "old_line_content": "    }",
          "new_line_content": "      CompleteUnit();",
          "content_same": false
        },
        {
          "line": 3885,
          "old_api": null,
          "new_api": "ShouldYield",
          "old_text": null,
          "new_text": "delegate->ShouldYield()",
          "old_line_content": "  }",
          "new_line_content": "      if (delegate && delegate->ShouldYield()) return;",
          "content_same": false
        },
        {
          "line": 3897,
          "old_api": null,
          "new_api": "MaxCanonicalTypeIndex",
          "old_text": null,
          "new_text": "module->MaxCanonicalTypeIndex()",
          "old_line_content": "",
          "new_line_content": "  isolate->heap()->EnsureWasmCanonicalRttsSize(module->MaxCanonicalTypeIndex() +",
          "content_same": false
        },
        {
          "line": 3902,
          "old_api": null,
          "new_api": "WasmFeatures::FromIsolate(isolate)",
          "old_text": null,
          "new_text": "WasmFeatures::FromIsolate(isolate)",
          "old_line_content": "  // Prepare compilation units in the main thread.",
          "new_line_content": "  WasmFeatures enabled_features = WasmFeatures::FromIsolate(isolate);",
          "content_same": false
        },
        {
          "line": 3915,
          "old_api": null,
          "new_api": "IsStrongOrWeak",
          "old_text": null,
          "new_text": "existing_wrapper.IsStrongOrWeak()",
          "old_line_content": "      continue;",
          "new_line_content": "    if (existing_wrapper.IsStrongOrWeak() &&",
          "content_same": false
        },
        {
          "line": 3916,
          "old_api": null,
          "new_api": "GetHeapObject",
          "old_text": null,
          "new_text": "existing_wrapper.GetHeapObject().IsUndefined()",
          "old_line_content": "    }",
          "new_line_content": "        !existing_wrapper.GetHeapObject().IsUndefined()) {",
          "content_same": false
        },
        {
          "line": 3923,
          "old_api": null,
          "new_api": "std::make_unique<JSToWasmWrapperCompilationUnit>(\n          isolate, function.sig, canonical_type_index, module,\n          function.imported, enabled_features,\n          JSToWasmWrapperCompilationUnit::kAllowGeneric)",
          "old_text": null,
          "new_text": "std::make_unique<JSToWasmWrapperCompilationUnit>(\n          isolate, function.sig, canonical_type_index, module,\n          function.imported, enabled_features,\n          JSToWasmWrapperCompilationUnit::kAllowGeneric)",
          "old_line_content": "          function.imported, enabled_features,",
          "new_line_content": "      auto unit = std::make_unique<JSToWasmWrapperCompilationUnit>(",
          "content_same": false
        },
        {
          "line": 3927,
          "old_api": null,
          "new_api": "std::move(unit)",
          "old_text": null,
          "new_text": "std::move(unit)",
          "old_line_content": "  }",
          "new_line_content": "      compilation_units.emplace_back(key, std::move(unit));",
          "content_same": false
        },
        {
          "line": 3935,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "compilation_units.size()",
          "old_line_content": "    if (v8_flags.wasm_num_compilation_tasks > 0) {",
          "new_line_content": "                 compilation_units.size());",
          "content_same": false
        },
        {
          "line": 3938,
          "old_api": null,
          "new_api": "CreateJob",
          "old_text": null,
          "new_text": "V8::GetCurrentPlatform()->CreateJob(\n          TaskPriority::kUserVisible, std::move(job))",
          "old_line_content": "",
          "new_line_content": "      auto job_handle = V8::GetCurrentPlatform()->CreateJob(",
          "content_same": false
        },
        {
          "line": 3939,
          "old_api": null,
          "new_api": "std::move(job)",
          "old_text": null,
          "new_text": "std::move(job)",
          "old_line_content": "      // Wait for completion, while contributing to the work.",
          "new_line_content": "          TaskPriority::kUserVisible, std::move(job));",
          "content_same": false
        },
        {
          "line": 3944,
          "old_api": null,
          "new_api": "Run",
          "old_text": null,
          "new_text": "job->Run(nullptr)",
          "old_line_content": "  }",
          "new_line_content": "      job->Run(nullptr);",
          "content_same": false
        },
        {
          "line": 3960,
          "old_api": null,
          "new_api": "HeapObjectReference::Strong(*code)",
          "old_text": null,
          "new_text": "HeapObjectReference::Strong(*code)",
          "old_line_content": "      // Do not increase code stats for non-jitted wrappers.",
          "new_line_content": "        wrapper_index, HeapObjectReference::Strong(*code));",
          "content_same": false
        },
        {
          "line": 3451,
          "old_api": null,
          "new_api": "WaitForCompilationEvent",
          "old_text": null,
          "new_text": "WaitForCompilationEvent(CompilationEvent::kFinishedBaselineCompilation)",
          "old_line_content": "}",
          "new_line_content": "    WaitForCompilationEvent(CompilationEvent::kFinishedBaselineCompilation);",
          "content_same": false
        },
        {
          "line": 3963,
          "old_api": null,
          "new_api": "counters",
          "old_text": null,
          "new_text": "isolate->counters()",
          "old_line_content": "    }",
          "new_line_content": "      RecordStats(*code, isolate->counters());",
          "content_same": false
        },
        {
          "line": 3964,
          "old_api": null,
          "new_api": "counters",
          "old_text": null,
          "new_text": "isolate->counters()->wasm_compiled_export_wrapper()->Increment(1)",
          "old_line_content": "  }",
          "new_line_content": "      isolate->counters()->wasm_compiled_export_wrapper()->Increment(1);",
          "content_same": false
        },
        {
          "line": 3462,
          "old_api": null,
          "new_api": "contains",
          "old_text": null,
          "new_text": "finished_events_.contains(event)",
          "old_line_content": "    }",
          "new_line_content": "    if (finished_events_.contains(event)) {",
          "content_same": false
        },
        {
          "line": 3463,
          "old_api": null,
          "new_api": "call",
          "old_text": null,
          "new_text": "callback->call(event)",
          "old_line_content": "  }",
          "new_line_content": "      callback->call(event);",
          "content_same": false
        },
        {
          "line": 3978,
          "old_api": null,
          "new_api": "DCHECK_NULL",
          "old_text": null,
          "new_text": "DCHECK_NULL((*cache_scope)[key])",
          "old_line_content": "  // Keep the {WasmCode} alive until we explicitly call {IncRef}.",
          "new_line_content": "  DCHECK_NULL((*cache_scope)[key]);",
          "content_same": false
        },
        {
          "line": 3979,
          "old_api": null,
          "new_api": "module",
          "old_text": null,
          "new_text": "native_module->module()",
          "old_line_content": "  WasmCodeRefScope code_ref_scope;",
          "new_line_content": "  bool source_positions = is_asmjs_module(native_module->module());",
          "content_same": false
        },
        {
          "line": 3468,
          "old_api": null,
          "new_api": "contains_any",
          "old_text": null,
          "new_text": "finished_events_.contains_any(kFinalEvents)",
          "old_line_content": "  }",
          "new_line_content": "  if (!finished_events_.contains_any(kFinalEvents)) {",
          "content_same": false
        },
        {
          "line": 3469,
          "old_api": null,
          "new_api": "std::move(callback)",
          "old_text": null,
          "new_text": "std::move(callback)",
          "old_line_content": "}",
          "new_line_content": "    callbacks_.emplace_back(std::move(callback));",
          "content_same": false
        },
        {
          "line": 3982,
          "old_api": null,
          "new_api": "CreateCompilationEnv",
          "old_text": null,
          "new_text": "native_module->CreateCompilationEnv()",
          "old_line_content": "      &env, kind, sig, source_positions, expected_arity, suspend);",
          "new_line_content": "  CompilationEnv env = native_module->CreateCompilationEnv();",
          "content_same": false
        },
        {
          "line": 3983,
          "old_api": null,
          "new_api": "compiler::CompileWasmImportCallWrapper(\n      &env, kind, sig, source_positions, expected_arity, suspend)",
          "old_text": null,
          "new_text": "compiler::CompileWasmImportCallWrapper(\n      &env, kind, sig, source_positions, expected_arity, suspend)",
          "old_line_content": "",
          "new_line_content": "  WasmCompilationResult result = compiler::CompileWasmImportCallWrapper(",
          "content_same": false
        },
        {
          "line": 3986,
          "old_api": null,
          "new_api": "as_vector",
          "old_text": null,
          "new_text": "native_module->AddCode(\n      result.func_index, result.code_desc, result.frame_slot_count,\n      result.tagged_parameter_slots,\n      result.protected_instructions_data.as_vector(),\n      result.source_positions.as_vector(), GetCodeKind(result),\n      ExecutionTier::kNone, kNotForDebugging)",
          "old_line_content": "      result.tagged_parameter_slots,",
          "new_line_content": "  std::unique_ptr<WasmCode> wasm_code = native_module->AddCode(",
          "content_same": false
        },
        {
          "line": 3989,
          "old_api": null,
          "new_api": "as_vector",
          "old_text": null,
          "new_text": "result.protected_instructions_data.as_vector()",
          "old_line_content": "      ExecutionTier::kNone, kNotForDebugging);",
          "new_line_content": "      result.protected_instructions_data.as_vector(),",
          "content_same": false
        },
        {
          "line": 3483,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "js_to_wasm_wrapper_units.end()",
          "old_line_content": "        TaskPriority::kUserBlocking,",
          "new_line_content": "                                     js_to_wasm_wrapper_units.end());",
          "content_same": false
        },
        {
          "line": 3996,
          "old_api": null,
          "new_api": "length",
          "old_text": null,
          "new_text": "published_code->instructions().length()",
          "old_line_content": "  return published_code;",
          "new_line_content": "      published_code->instructions().length());",
          "content_same": false
        },
        {
          "line": 3997,
          "old_api": null,
          "new_api": "length",
          "old_text": null,
          "new_text": "published_code->reloc_info().length()",
          "old_line_content": "}",
          "new_line_content": "  counters->wasm_reloc_size()->Increment(published_code->reloc_info().length());",
          "content_same": false
        },
        {
          "line": 3486,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "std::make_unique<AsyncCompileJSToWasmWrapperJob>(\n            native_module_weak_, js_to_wasm_wrapper_units_.size())",
          "old_line_content": "  }",
          "new_line_content": "        std::make_unique<AsyncCompileJSToWasmWrapperJob>(",
          "content_same": false
        },
        {
          "line": 3490,
          "old_api": null,
          "new_api": "AddUnits",
          "old_text": null,
          "new_text": "compilation_unit_queues_.AddUnits(baseline_units, top_tier_units,\n                                      native_module_->module())",
          "old_line_content": "  }",
          "new_line_content": "    compilation_unit_queues_.AddUnits(baseline_units, top_tier_units,",
          "content_same": false
        },
        {
          "line": 3494,
          "old_api": null,
          "new_api": "IsValid",
          "old_text": null,
          "new_text": "baseline_compile_job_->IsValid()",
          "old_line_content": "  }",
          "new_line_content": "    DCHECK(baseline_compile_job_->IsValid());",
          "content_same": false
        },
        {
          "line": 3498,
          "old_api": null,
          "new_api": "IsValid",
          "old_text": null,
          "new_text": "top_tier_compile_job_->IsValid()",
          "old_line_content": "  }",
          "new_line_content": "    DCHECK(top_tier_compile_job_->IsValid());",
          "content_same": false
        },
        {
          "line": 3499,
          "old_api": null,
          "new_api": "NotifyConcurrencyIncrease",
          "old_text": null,
          "new_text": "top_tier_compile_job_->NotifyConcurrencyIncrease()",
          "old_line_content": "}",
          "new_line_content": "    top_tier_compile_job_->NotifyConcurrencyIncrease();",
          "content_same": false
        },
        {
          "line": 3505,
          "old_api": null,
          "new_api": "CommitCompilationUnits",
          "old_text": null,
          "new_text": "CommitCompilationUnits({}, {&unit, 1}, {})",
          "old_line_content": "",
          "new_line_content": "  CommitCompilationUnits({}, {&unit, 1}, {});",
          "content_same": false
        },
        {
          "line": 3510,
          "old_api": null,
          "new_api": "AddTopTierPriorityUnit",
          "old_text": null,
          "new_text": "compilation_unit_queues_.AddTopTierPriorityUnit(unit, priority)",
          "old_line_content": "  // {NotifyConcurrencyIncrease} can spawn new threads which could inherit PKU",
          "new_line_content": "  compilation_unit_queues_.AddTopTierPriorityUnit(unit, priority);",
          "content_same": false
        },
        {
          "line": 3514,
          "old_api": null,
          "new_api": "NotifyConcurrencyIncrease",
          "old_text": null,
          "new_text": "top_tier_compile_job_->NotifyConcurrencyIncrease()",
          "old_line_content": "",
          "new_line_content": "  top_tier_compile_job_->NotifyConcurrencyIncrease();",
          "content_same": false
        },
        {
          "line": 3519,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "js_to_wasm_wrapper_units_.size()",
          "old_line_content": "}",
          "new_line_content": "  DCHECK_LT(index, js_to_wasm_wrapper_units_.size());",
          "content_same": false
        },
        {
          "line": 3533,
          "old_api": null,
          "new_api": "MaxCanonicalTypeIndex",
          "old_text": null,
          "new_text": "module->MaxCanonicalTypeIndex()",
          "old_line_content": "  for (auto& unit : js_to_wasm_wrapper_units_) {",
          "new_line_content": "  isolate->heap()->EnsureWasmCanonicalRttsSize(module->MaxCanonicalTypeIndex() +",
          "content_same": false
        },
        {
          "line": 3536,
          "old_api": null,
          "new_api": "isolate",
          "old_text": null,
          "new_text": "unit->isolate()",
          "old_line_content": "    // generic wrapper built-in.",
          "new_line_content": "    DCHECK_EQ(isolate, unit->isolate());",
          "content_same": false
        },
        {
          "line": 3543,
          "old_api": null,
          "new_api": "MaybeObject::FromObject(*code)",
          "old_text": null,
          "new_text": "MaybeObject::FromObject(*code)",
          "old_line_content": "      // Do not increase code stats for non-jitted wrappers.",
          "new_line_content": "                                               MaybeObject::FromObject(*code));",
          "content_same": false
        },
        {
          "line": 3546,
          "old_api": null,
          "new_api": "counters",
          "old_text": null,
          "new_text": "isolate->counters()",
          "old_line_content": "    }",
          "new_line_content": "      RecordStats(*code, isolate->counters());",
          "content_same": false
        },
        {
          "line": 3547,
          "old_api": null,
          "new_api": "counters",
          "old_text": null,
          "new_text": "isolate->counters()->wasm_compiled_export_wrapper()->Increment(1)",
          "old_line_content": "  }",
          "new_line_content": "      isolate->counters()->wasm_compiled_export_wrapper()->Increment(1);",
          "content_same": false
        },
        {
          "line": 3554,
          "old_api": null,
          "new_api": "GetQueueForTask",
          "old_text": null,
          "new_text": "compilation_unit_queues_.GetQueueForTask(task_id)",
          "old_line_content": "",
          "new_line_content": "  return compilation_unit_queues_.GetQueueForTask(task_id);",
          "content_same": false
        },
        {
          "line": 3560,
          "old_api": null,
          "new_api": "GetNextUnit",
          "old_text": null,
          "new_text": "compilation_unit_queues_.GetNextUnit(queue, tier)",
          "old_line_content": "",
          "new_line_content": "  return compilation_unit_queues_.GetNextUnit(queue, tier);",
          "content_same": false
        },
        {
          "line": 3565,
          "old_api": null,
          "new_api": "TRACE_DISABLED_BY_DEFAULT",
          "old_text": null,
          "new_text": "TRACE_DISABLED_BY_DEFAULT(\"v8.wasm.detailed\")",
          "old_line_content": "",
          "new_line_content": "  TRACE_EVENT1(TRACE_DISABLED_BY_DEFAULT(\"v8.wasm.detailed\"),",
          "content_same": false
        },
        {
          "line": 3566,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "code_vector.size()",
          "old_line_content": "  base::MutexGuard guard(&callbacks_mutex_);",
          "new_line_content": "               \"wasm.OnFinishedUnits\", \"units\", code_vector.size());",
          "content_same": false
        },
        {
          "line": 3576,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "compilation_progress_.size()",
          "old_line_content": "",
          "new_line_content": "  DCHECK_EQ(compilation_progress_.size(),",
          "content_same": false
        },
        {
          "line": 3581,
          "old_api": null,
          "new_api": "DCHECK_NOT_NULL",
          "old_text": null,
          "new_text": "DCHECK_NOT_NULL(code)",
          "old_line_content": "",
          "new_line_content": "    DCHECK_NOT_NULL(code);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 3589,
          "old_api": "tier",
          "new_api": null,
          "old_text": "code->tier()",
          "new_text": null,
          "old_line_content": "      DCHECK_NE(code->tier(), ExecutionTier::kNone);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 3596,
          "old_api": "index",
          "new_api": null,
          "old_text": "code->index()",
          "new_text": null,
          "old_line_content": "          declared_function_index(native_module_->module(), code->index());",
          "new_line_content": "      // compilation progress but may publish code to the code manager.",
          "content_same": false
        },
        {
          "line": 3599,
          "old_api": "RequiredBaselineTierField::decode(function_progress)",
          "new_api": null,
          "old_text": "RequiredBaselineTierField::decode(function_progress)",
          "new_text": null,
          "old_line_content": "          RequiredBaselineTierField::decode(function_progress);",
          "new_line_content": "      uint8_t function_progress = compilation_progress_[slot_index];",
          "content_same": false
        },
        {
          "line": 3600,
          "old_api": "ReachedTierField::decode(function_progress)",
          "new_api": null,
          "old_text": "ReachedTierField::decode(function_progress)",
          "new_text": null,
          "old_line_content": "      ExecutionTier reached_tier = ReachedTierField::decode(function_progress);",
          "new_line_content": "      ExecutionTier required_baseline_tier =",
          "content_same": false
        },
        {
          "line": 3604,
          "old_api": "tier",
          "new_api": null,
          "old_text": "code->tier()",
          "new_text": null,
          "old_line_content": "          required_baseline_tier <= code->tier()) {",
          "new_line_content": "      // Check whether required baseline or top tier are reached.",
          "content_same": false
        },
        {
          "line": 3605,
          "old_api": "DCHECK_GT",
          "new_api": null,
          "old_text": "DCHECK_GT(outstanding_baseline_units_, 0)",
          "new_text": null,
          "old_line_content": "        DCHECK_GT(outstanding_baseline_units_, 0);",
          "new_line_content": "      if (reached_tier < required_baseline_tier &&",
          "content_same": false
        },
        {
          "line": 3608,
          "old_api": "tier",
          "new_api": null,
          "old_text": "code->tier()",
          "new_text": null,
          "old_line_content": "      if (code->tier() == ExecutionTier::kTurbofan) {",
          "new_line_content": "        outstanding_baseline_units_--;",
          "content_same": false
        },
        {
          "line": 3609,
          "old_api": "size",
          "new_api": null,
          "old_text": "code->instructions().size()",
          "new_text": null,
          "old_line_content": "        bytes_since_last_chunk_ += code->instructions().size();",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 3613,
          "old_api": "tier",
          "new_api": null,
          "old_text": "code->tier()",
          "new_text": null,
          "old_line_content": "      if (code->tier() > reached_tier) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3614,
          "old_api": "tier",
          "new_api": null,
          "old_text": "ReachedTierField::update(\n            compilation_progress_[slot_index], code->tier())",
          "new_text": null,
          "old_line_content": "        compilation_progress_[slot_index] = ReachedTierField::update(",
          "new_line_content": "      // Update function's compilation progress.",
          "content_same": false
        },
        {
          "line": 3621,
          "old_api": "TriggerCallbacks",
          "new_api": null,
          "old_text": "TriggerCallbacks()",
          "new_text": null,
          "old_line_content": "  TriggerCallbacks();",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 3627,
          "old_api": "TriggerCallbacks",
          "new_api": null,
          "old_text": "TriggerCallbacks()",
          "new_text": null,
          "old_line_content": "  TriggerCallbacks();",
          "new_line_content": "  base::MutexGuard guard(&callbacks_mutex_);",
          "content_same": false
        },
        {
          "line": 3633,
          "old_api": "TriggerCallbacks",
          "new_api": null,
          "old_text": "TriggerCallbacks()",
          "new_text": null,
          "old_line_content": "  TriggerCallbacks();",
          "new_line_content": "  base::MutexGuard guard(&callbacks_mutex_);",
          "content_same": false
        },
        {
          "line": 3637,
          "old_api": "TryLock",
          "new_api": null,
          "old_text": "callbacks_mutex_.TryLock()",
          "new_text": null,
          "old_line_content": "  DCHECK(!callbacks_mutex_.TryLock());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3641,
          "old_api": "Add",
          "new_api": null,
          "old_text": "triggered_events.Add(CompilationEvent::kFinishedExportWrappers)",
          "new_text": null,
          "old_line_content": "    triggered_events.Add(CompilationEvent::kFinishedExportWrappers);",
          "new_line_content": "  base::EnumSet<CompilationEvent> triggered_events;",
          "content_same": false
        },
        {
          "line": 3649,
          "old_api": "static_cast<size_t>(v8_flags.wasm_caching_threshold)",
          "new_api": null,
          "old_text": "static_cast<size_t>(v8_flags.wasm_caching_threshold)",
          "new_text": null,
          "old_line_content": "  if (dynamic_tiering_ && static_cast<size_t>(v8_flags.wasm_caching_threshold) <",
          "new_line_content": "  // For dynamic tiering, trigger \"compilation chunk finished\" after a new chunk",
          "content_same": false
        },
        {
          "line": 3655,
          "old_api": "load",
          "new_api": null,
          "old_text": "compile_failed_.load(std::memory_order_relaxed)",
          "new_text": null,
          "old_line_content": "  if (compile_failed_.load(std::memory_order_relaxed)) {",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 3658,
          "old_api": "base::EnumSet<CompilationEvent>({CompilationEvent::kFailedCompilation})",
          "new_api": null,
          "old_text": "base::EnumSet<CompilationEvent>({CompilationEvent::kFailedCompilation})",
          "new_text": null,
          "old_line_content": "        base::EnumSet<CompilationEvent>({CompilationEvent::kFailedCompilation});",
          "new_line_content": "    // *Only* trigger the \"failed\" event.",
          "content_same": false
        },
        {
          "line": 3661,
          "old_api": "empty",
          "new_api": null,
          "old_text": "triggered_events.empty()",
          "new_text": null,
          "old_line_content": "  if (triggered_events.empty()) return;",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 3670,
          "old_api": "std::make_pair(CompilationEvent::kFailedCompilation,\n                       \"wasm.CompilationFailed\")",
          "new_api": null,
          "old_text": "std::make_pair(CompilationEvent::kFailedCompilation,\n                       \"wasm.CompilationFailed\")",
          "new_text": null,
          "old_line_content": "       {std::make_pair(CompilationEvent::kFailedCompilation,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3679,
          "old_api": "DCHECK_NE",
          "new_api": null,
          "old_text": "DCHECK_NE(compilation_id_, kInvalidCompilationID)",
          "new_text": null,
          "old_line_content": "    DCHECK_NE(compilation_id_, kInvalidCompilationID);",
          "new_line_content": "                       \"wasm.CompilationChunkFinished\")}) {",
          "content_same": false
        },
        {
          "line": 3687,
          "old_api": "begin",
          "new_api": null,
          "old_text": "std::remove_if(\n        callbacks_.begin(), callbacks_.end(), [](const auto& callback) {\n          return callback->release_after_final_event();\n        })",
          "new_text": null,
          "old_line_content": "    auto new_end = std::remove_if(",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3688,
          "old_api": "end",
          "new_api": null,
          "old_text": "callbacks_.end()",
          "new_text": null,
          "old_line_content": "        callbacks_.begin(), callbacks_.end(), [](const auto& callback) {",
          "new_line_content": "  if (outstanding_baseline_units_ == 0 && !has_outstanding_export_wrappers_) {",
          "content_same": false
        },
        {
          "line": 3697,
          "old_api": "Add",
          "new_api": null,
          "old_text": "detected_features_.Add(detected)",
          "new_text": null,
          "old_line_content": "  detected_features_.Add(detected);",
          "new_line_content": "void CompilationStateImpl::OnCompilationStopped(WasmFeatures detected) {",
          "content_same": false
        },
        {
          "line": 3705,
          "old_api": "UpdateFeatureUseCounts",
          "new_api": null,
          "old_text": "UpdateFeatureUseCounts(isolate, detected_features_)",
          "new_text": null,
          "old_line_content": "  UpdateFeatureUseCounts(isolate, detected_features_);",
          "new_line_content": "  // tiering compilations may still occur in the background.",
          "content_same": false
        },
        {
          "line": 3710,
          "old_api": "empty",
          "new_api": null,
          "old_text": "unpublished_code.empty()",
          "new_text": null,
          "old_line_content": "  if (unpublished_code.empty()) return;",
          "new_line_content": "void CompilationStateImpl::PublishCompilationResults(",
          "content_same": false
        },
        {
          "line": 3713,
          "old_api": "num_imported_functions",
          "new_api": null,
          "old_text": "native_module_->num_imported_functions()",
          "new_text": null,
          "old_line_content": "  int num_imported_functions = native_module_->num_imported_functions();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3714,
          "old_api": "import_wrapper_cache",
          "new_api": null,
          "old_text": "native_module_->import_wrapper_cache()",
          "new_text": null,
          "old_line_content": "  WasmImportWrapperCache* cache = native_module_->import_wrapper_cache();",
          "new_line_content": "  // For import wrapper compilation units, add result to the cache.",
          "content_same": false
        },
        {
          "line": 3717,
          "old_api": "DCHECK_LE",
          "new_api": null,
          "old_text": "DCHECK_LE(0, func_index)",
          "new_text": null,
          "old_line_content": "    DCHECK_LE(0, func_index);",
          "new_line_content": "  for (const auto& code : unpublished_code) {",
          "content_same": false
        },
        {
          "line": 3721,
          "old_api": "module",
          "new_api": null,
          "old_text": "native_module_->module()",
          "new_text": null,
          "old_line_content": "          native_module_->module()->functions[func_index];",
          "new_line_content": "    if (func_index < num_imported_functions) {",
          "content_same": false
        },
        {
          "line": 3727,
          "old_api": "parameter_count",
          "new_api": null,
          "old_text": "function.sig->parameter_count()",
          "new_text": null,
          "old_line_content": "          static_cast<int>(function.sig->parameter_count()), kNoSuspend);",
          "new_line_content": "      WasmImportWrapperCache::CacheKey key(",
          "content_same": false
        },
        {
          "line": 3731,
          "old_api": "DCHECK_NULL",
          "new_api": null,
          "old_text": "DCHECK_NULL((*cache)[key])",
          "new_text": null,
          "old_line_content": "      DCHECK_NULL((*cache)[key]);",
          "new_line_content": "      // have been added as a compilation unit. So it is always the first time",
          "content_same": false
        },
        {
          "line": 3732,
          "old_api": "get",
          "new_api": null,
          "old_text": "code.get()",
          "new_text": null,
          "old_line_content": "      (*cache)[key] = code.get();",
          "new_line_content": "      // we compile a wrapper for this key here.",
          "content_same": false
        },
        {
          "line": 3736,
          "old_api": "base::VectorOf(unpublished_code)",
          "new_api": null,
          "old_text": "base::VectorOf(unpublished_code)",
          "new_text": null,
          "old_line_content": "  PublishCode(base::VectorOf(unpublished_code));",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3743,
          "old_api": "std::move(code)",
          "new_api": null,
          "old_text": "std::move(code)",
          "new_text": null,
          "old_line_content": "      native_module_->PublishCode(std::move(code));",
          "new_line_content": "  WasmCodeRefScope code_ref_scope;",
          "content_same": false
        },
        {
          "line": 3746,
          "old_api": "base::VectorOf(published_code)",
          "new_api": null,
          "old_text": "base::VectorOf(published_code)",
          "new_text": null,
          "old_line_content": "    GetWasmEngine()->LogCode(base::VectorOf(published_code));",
          "new_line_content": "  // Defer logging code in case wire bytes were not fully received yet.",
          "content_same": false
        },
        {
          "line": 3749,
          "old_api": "std::move(published_code)",
          "new_api": null,
          "old_text": "std::move(published_code)",
          "new_text": null,
          "old_line_content": "  OnFinishedUnits(base::VectorOf(std::move(published_code)));",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 3760,
          "old_api": "size",
          "new_api": null,
          "old_text": "state.publish_queue_.size()",
          "new_text": null,
          "old_line_content": "      state.publish_queue_.reserve(state.publish_queue_.size() +",
          "new_line_content": "    if (state.publisher_running_) {",
          "content_same": false
        },
        {
          "line": 3761,
          "old_api": "size",
          "new_api": null,
          "old_text": "unpublished_code.size()",
          "new_text": null,
          "old_line_content": "                                   unpublished_code.size());",
          "new_line_content": "      // Add new code to the queue and return.",
          "content_same": false
        },
        {
          "line": 3770,
          "old_api": "std::move(unpublished_code)",
          "new_api": null,
          "old_text": "std::move(unpublished_code)",
          "new_text": null,
          "old_line_content": "    PublishCompilationResults(std::move(unpublished_code));",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 3771,
          "old_api": "clear",
          "new_api": null,
          "old_text": "unpublished_code.clear()",
          "new_text": null,
          "old_line_content": "    unpublished_code.clear();",
          "new_line_content": "  while (true) {",
          "content_same": false
        },
        {
          "line": 3775,
          "old_api": "DCHECK",
          "new_api": null,
          "old_text": "DCHECK(state.publisher_running_)",
          "new_text": null,
          "old_line_content": "    DCHECK(state.publisher_running_);",
          "new_line_content": "    // Keep publishing new code that came in.",
          "content_same": false
        },
        {
          "line": 3776,
          "old_api": "empty",
          "new_api": null,
          "old_text": "state.publish_queue_.empty()",
          "new_text": null,
          "old_line_content": "    if (state.publish_queue_.empty()) {",
          "new_line_content": "    base::MutexGuard guard(&state.mutex_);",
          "content_same": false
        },
        {
          "line": 3780,
          "old_api": "swap",
          "new_api": null,
          "old_text": "unpublished_code.swap(state.publish_queue_)",
          "new_text": null,
          "old_line_content": "    unpublished_code.swap(state.publish_queue_);",
          "new_line_content": "      return;",
          "content_same": false
        },
        {
          "line": 3786,
          "old_api": "GetSizeForTier",
          "new_api": null,
          "old_text": "compilation_unit_queues_.GetSizeForTier(tier)",
          "new_text": null,
          "old_line_content": "  return compilation_unit_queues_.GetSizeForTier(tier);",
          "new_line_content": "size_t CompilationStateImpl::NumOutstandingCompilations(",
          "content_same": false
        },
        {
          "line": 3790,
          "old_api": "store",
          "new_api": null,
          "old_text": "compile_cancelled_.store(true, std::memory_order_relaxed)",
          "new_text": null,
          "old_line_content": "  compile_cancelled_.store(true, std::memory_order_relaxed);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3791,
          "old_api": "exchange",
          "new_api": null,
          "old_text": "compile_failed_.exchange(true, std::memory_order_relaxed)",
          "new_text": null,
          "old_line_content": "  if (compile_failed_.exchange(true, std::memory_order_relaxed)) {",
          "new_line_content": "void CompilationStateImpl::SetError() {",
          "content_same": false
        },
        {
          "line": 3796,
          "old_api": "TriggerCallbacks",
          "new_api": null,
          "old_text": "TriggerCallbacks()",
          "new_text": null,
          "old_line_content": "  TriggerCallbacks();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3797,
          "old_api": "clear",
          "new_api": null,
          "old_text": "callbacks_.clear()",
          "new_text": null,
          "old_line_content": "  callbacks_.clear();",
          "new_line_content": "  base::MutexGuard callbacks_guard(&callbacks_mutex_);",
          "content_same": false
        },
        {
          "line": 3806,
          "old_api": "Join",
          "new_api": null,
          "old_text": "baseline_compile_job_->Join()",
          "new_text": null,
          "old_line_content": "      if (baseline_compile_job_->IsValid()) baseline_compile_job_->Join();",
          "new_line_content": "      break;",
          "content_same": false
        },
        {
          "line": 3810,
          "old_api": "UNREACHABLE",
          "new_api": null,
          "old_text": "UNREACHABLE()",
          "new_text": null,
          "old_line_content": "      UNREACHABLE();",
          "new_line_content": "    default:",
          "content_same": false
        },
        {
          "line": 3813,
          "old_api": "Join",
          "new_api": null,
          "old_text": "js_to_wasm_wrapper_job_->Join()",
          "new_text": null,
          "old_line_content": "    js_to_wasm_wrapper_job_->Join();",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 3819,
          "old_api": "contains_any",
          "new_api": null,
          "old_text": "finished_events_.contains_any(events)",
          "new_text": null,
          "old_line_content": "  DCHECK(finished_events_.contains_any(events));",
          "new_line_content": "                                         CompilationEvent::kFailedCompilation};",
          "content_same": false
        },
        {
          "line": 3824,
          "old_api": "module",
          "new_api": null,
          "old_text": "native_module_->module()",
          "new_text": null,
          "old_line_content": "  const WasmModule* module = native_module_->module();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3830,
          "old_api": "GetCode",
          "new_api": null,
          "old_text": "native_module_->GetCode(func_index)",
          "new_text": null,
          "old_line_content": "    WasmCode* code = native_module_->GetCode(func_index);",
          "new_line_content": "  for (uint32_t i = 0; i < num_wasm_functions; ++i) {",
          "content_same": false
        },
        {
          "line": 3831,
          "old_api": "is_turbofan",
          "new_api": null,
          "old_text": "code->is_turbofan()",
          "new_text": null,
          "old_line_content": "    if (!code || !code->is_turbofan()) {",
          "new_line_content": "    int func_index = module->num_imported_functions + i;",
          "content_same": false
        },
        {
          "line": 3835,
          "old_api": "Commit",
          "new_api": null,
          "old_text": "builder.Commit()",
          "new_text": null,
          "old_line_content": "  builder.Commit();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3841,
          "old_api": "UNIMPLEMENTED",
          "new_api": null,
          "old_text": "UNIMPLEMENTED()",
          "new_text": null,
          "old_line_content": "    void NotifyConcurrencyIncrease() override { UNIMPLEMENTED(); }",
          "new_line_content": "    bool ShouldYield() override { return false; }",
          "content_same": false
        },
        {
          "line": 3846,
          "old_api": "get",
          "new_api": null,
          "old_text": "async_counters_.get()",
          "new_text": null,
          "old_line_content": "  ExecuteCompilationUnits(native_module_weak_, async_counters_.get(), &delegate,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3853,
          "old_api": "GetCode",
          "new_api": null,
          "old_text": "native_module_->GetCode(func_index)",
          "new_text": null,
          "old_line_content": "    WasmCode* code = native_module_->GetCode(func_index);",
          "new_line_content": "  for (uint32_t i = 0; i < num_wasm_functions; ++i) {",
          "content_same": false
        },
        {
          "line": 3854,
          "old_api": "is_turbofan",
          "new_api": null,
          "old_text": "code->is_turbofan()",
          "new_text": null,
          "old_line_content": "    if (!code || !code->is_turbofan()) {",
          "new_line_content": "    uint32_t func_index = module->num_imported_functions + i;",
          "content_same": false
        },
        {
          "line": 3871,
          "old_api": "explicit",
          "new_api": null,
          "old_text": "explicit",
          "new_text": null,
          "old_line_content": "  explicit CompileJSToWasmWrapperJob(",
          "new_line_content": "class CompileJSToWasmWrapperJob final : public BaseCompileJSToWasmWrapperJob {",
          "content_same": false
        },
        {
          "line": 3878,
          "old_api": "GetNextUnitIndex",
          "new_api": null,
          "old_text": "GetNextUnitIndex(&index)",
          "new_text": null,
          "old_line_content": "    while (GetNextUnitIndex(&index)) {",
          "new_line_content": "  void Run(JobDelegate* delegate) override {",
          "content_same": false
        },
        {
          "line": 3881,
          "old_api": "Execute",
          "new_api": null,
          "old_text": "unit->Execute()",
          "new_text": null,
          "old_line_content": "      unit->Execute();",
          "new_line_content": "      JSToWasmWrapperCompilationUnit* unit =",
          "content_same": false
        },
        {
          "line": 3893,
          "old_api": "TRACE_EVENT0",
          "new_api": null,
          "old_text": "TRACE_EVENT0(\"v8.wasm\", \"wasm.CompileJsToWasmWrappers\")",
          "new_text": null,
          "old_line_content": "  TRACE_EVENT0(\"v8.wasm\", \"wasm.CompileJsToWasmWrappers\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3900,
          "old_api": "WasmFeatures::FromIsolate(isolate)",
          "new_api": null,
          "old_text": "WasmFeatures::FromIsolate(isolate)",
          "new_text": null,
          "old_line_content": "  WasmFeatures enabled_features = WasmFeatures::FromIsolate(isolate);",
          "new_line_content": "  JSToWasmWrapperSet set;",
          "content_same": false
        },
        {
          "line": 3910,
          "old_api": "GetExportWrapperIndex",
          "new_api": null,
          "old_text": "GetExportWrapperIndex(canonical_type_index, function.imported)",
          "new_text": null,
          "old_line_content": "        GetExportWrapperIndex(canonical_type_index, function.imported);",
          "new_line_content": "        module->isorecursive_canonical_type_ids[function.sig_index];",
          "content_same": false
        },
        {
          "line": 3913,
          "old_api": "IsStrongOrWeak",
          "new_api": null,
          "old_text": "existing_wrapper.IsStrongOrWeak()",
          "new_text": null,
          "old_line_content": "    if (existing_wrapper.IsStrongOrWeak() &&",
          "new_line_content": "    MaybeObject existing_wrapper =",
          "content_same": false
        },
        {
          "line": 3919,
          "old_api": "insert",
          "new_api": null,
          "old_text": "set.insert(key)",
          "new_text": null,
          "old_line_content": "    const auto [it, inserted] = set.insert(key);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3925,
          "old_api": "std::move(unit)",
          "new_api": null,
          "old_text": "std::move(unit)",
          "new_text": null,
          "old_line_content": "      compilation_units.emplace_back(key, std::move(unit));",
          "new_line_content": "          function.imported, enabled_features,",
          "content_same": false
        },
        {
          "line": 3932,
          "old_api": "size",
          "new_api": null,
          "old_text": "TRACE_EVENT1(\"v8.wasm\", \"wasm.JsToWasmWrapperCompilation\", \"num_wrappers\",\n                 compilation_units.size())",
          "new_text": null,
          "old_line_content": "    TRACE_EVENT1(\"v8.wasm\", \"wasm.JsToWasmWrapperCompilation\", \"num_wrappers\",",
          "new_line_content": "    // This is nested inside the event above, so the name can be less",
          "content_same": false
        },
        {
          "line": 3933,
          "old_api": "size",
          "new_api": null,
          "old_text": "compilation_units.size()",
          "new_text": null,
          "old_line_content": "                 compilation_units.size());",
          "new_line_content": "    // descriptive. It's mainly to log the number of wrappers.",
          "content_same": false
        },
        {
          "line": 3937,
          "old_api": "std::move(job)",
          "new_api": null,
          "old_text": "std::move(job)",
          "new_text": null,
          "old_line_content": "          TaskPriority::kUserVisible, std::move(job));",
          "new_line_content": "    if (v8_flags.wasm_num_compilation_tasks > 0) {",
          "content_same": false
        },
        {
          "line": 3940,
          "old_api": "Join",
          "new_api": null,
          "old_text": "job_handle->Join()",
          "new_text": null,
          "old_line_content": "      job_handle->Join();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3953,
          "old_api": "get",
          "new_api": null,
          "old_text": "pair.second.get()",
          "new_text": null,
          "old_line_content": "    JSToWasmWrapperCompilationUnit* unit = pair.second.get();",
          "new_line_content": "  for (auto& pair : compilation_units) {",
          "content_same": false
        },
        {
          "line": 3954,
          "old_api": "isolate",
          "new_api": null,
          "old_text": "unit->isolate()",
          "new_text": null,
          "old_line_content": "    DCHECK_EQ(isolate, unit->isolate());",
          "new_line_content": "    JSToWasmWrapperKey key = pair.first;",
          "content_same": false
        },
        {
          "line": 3450,
          "old_api": "WaitForCompilationEvent",
          "new_api": null,
          "old_text": "WaitForCompilationEvent(CompilationEvent::kFinishedBaselineCompilation)",
          "new_text": null,
          "old_line_content": "  WaitForCompilationEvent(CompilationEvent::kFinishedBaselineCompilation);",
          "new_line_content": "  if (!v8_flags.wasm_lazy_compilation) {",
          "content_same": false
        },
        {
          "line": 3962,
          "old_api": "counters",
          "new_api": null,
          "old_text": "isolate->counters()->wasm_compiled_export_wrapper()->Increment(1)",
          "new_text": null,
          "old_line_content": "      isolate->counters()->wasm_compiled_export_wrapper()->Increment(1);",
          "new_line_content": "      // Do not increase code stats for non-jitted wrappers.",
          "content_same": false
        },
        {
          "line": 3460,
          "old_api": "contains",
          "new_api": null,
          "old_text": "finished_events_.contains(event)",
          "new_text": null,
          "old_line_content": "    if (finished_events_.contains(event)) {",
          "new_line_content": "                     CompilationEvent::kFinishedBaselineCompilation,",
          "content_same": false
        },
        {
          "line": 3461,
          "old_api": "call",
          "new_api": null,
          "old_text": "callback->call(event)",
          "new_text": null,
          "old_line_content": "      callback->call(event);",
          "new_line_content": "                     CompilationEvent::kFailedCompilation}) {",
          "content_same": false
        },
        {
          "line": 3464,
          "old_api": "constexpr",
          "new_api": null,
          "old_text": "constexpr",
          "new_text": null,
          "old_line_content": "  constexpr base::EnumSet<CompilationEvent> kFinalEvents{",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3976,
          "old_api": "DCHECK_NULL",
          "new_api": null,
          "old_text": "DCHECK_NULL((*cache_scope)[key])",
          "new_text": null,
          "old_line_content": "  DCHECK_NULL((*cache_scope)[key]);",
          "new_line_content": "  WasmImportWrapperCache::CacheKey key(kind, canonical_type_index,",
          "content_same": false
        },
        {
          "line": 3977,
          "old_api": "module",
          "new_api": null,
          "old_text": "native_module->module()",
          "new_text": null,
          "old_line_content": "  bool source_positions = is_asmjs_module(native_module->module());",
          "new_line_content": "                                       expected_arity, suspend);",
          "content_same": false
        },
        {
          "line": 3467,
          "old_api": "std::move(callback)",
          "new_api": null,
          "old_text": "std::move(callback)",
          "new_text": null,
          "old_line_content": "    callbacks_.emplace_back(std::move(callback));",
          "new_line_content": "      CompilationEvent::kFailedCompilation};",
          "content_same": false
        },
        {
          "line": 3980,
          "old_api": "CreateCompilationEnv",
          "new_api": null,
          "old_text": "native_module->CreateCompilationEnv()",
          "new_text": null,
          "old_line_content": "  CompilationEnv env = native_module->CreateCompilationEnv();",
          "new_line_content": "  // Keep the {WasmCode} alive until we explicitly call {IncRef}.",
          "content_same": false
        },
        {
          "line": 3981,
          "old_api": "compiler::CompileWasmImportCallWrapper(\n      &env, kind, sig, source_positions, expected_arity, suspend)",
          "new_api": null,
          "old_text": "compiler::CompileWasmImportCallWrapper(\n      &env, kind, sig, source_positions, expected_arity, suspend)",
          "new_text": null,
          "old_line_content": "  WasmCompilationResult result = compiler::CompileWasmImportCallWrapper(",
          "new_line_content": "  WasmCodeRefScope code_ref_scope;",
          "content_same": false
        },
        {
          "line": 3984,
          "old_api": "as_vector",
          "new_api": null,
          "old_text": "native_module->AddCode(\n      result.func_index, result.code_desc, result.frame_slot_count,\n      result.tagged_parameter_slots,\n      result.protected_instructions_data.as_vector(),\n      result.source_positions.as_vector(), GetCodeKind(result),\n      ExecutionTier::kNone, kNotForDebugging)",
          "new_text": null,
          "old_line_content": "  std::unique_ptr<WasmCode> wasm_code = native_module->AddCode(",
          "new_line_content": "      &env, kind, sig, source_positions, expected_arity, suspend);",
          "content_same": false
        },
        {
          "line": 3987,
          "old_api": "as_vector",
          "new_api": null,
          "old_text": "result.protected_instructions_data.as_vector()",
          "new_text": null,
          "old_line_content": "      result.protected_instructions_data.as_vector(),",
          "new_line_content": "      result.func_index, result.code_desc, result.frame_slot_count,",
          "content_same": false
        },
        {
          "line": 3476,
          "old_api": "empty",
          "new_api": null,
          "old_text": "js_to_wasm_wrapper_units.empty()",
          "new_text": null,
          "old_line_content": "  if (!js_to_wasm_wrapper_units.empty()) {",
          "new_line_content": "    base::Vector<std::shared_ptr<JSToWasmWrapperCompilationUnit>>",
          "content_same": false
        },
        {
          "line": 3988,
          "old_api": "GetCodeKind",
          "new_api": null,
          "old_text": "GetCodeKind(result)",
          "new_text": null,
          "old_line_content": "      result.source_positions.as_vector(), GetCodeKind(result),",
          "new_line_content": "      result.tagged_parameter_slots,",
          "content_same": false
        },
        {
          "line": 3479,
          "old_api": "end",
          "new_api": null,
          "old_text": "js_to_wasm_wrapper_units_.end()",
          "new_text": null,
          "old_line_content": "    js_to_wasm_wrapper_units_.insert(js_to_wasm_wrapper_units_.end(),",
          "new_line_content": "    // |js_to_wasm_wrapper_units_| will only be initialized once.",
          "content_same": false
        },
        {
          "line": 3993,
          "old_api": "length",
          "new_api": null,
          "old_text": "counters->wasm_generated_code_size()->Increment(\n      published_code->instructions().length())",
          "new_text": null,
          "old_line_content": "  counters->wasm_generated_code_size()->Increment(",
          "new_line_content": "  (*cache_scope)[key] = published_code;",
          "content_same": false
        },
        {
          "line": 3485,
          "old_api": "size",
          "new_api": null,
          "old_text": "js_to_wasm_wrapper_units_.size()",
          "new_text": null,
          "old_line_content": "            native_module_weak_, js_to_wasm_wrapper_units_.size()));",
          "new_line_content": "        TaskPriority::kUserBlocking,",
          "content_same": false
        },
        {
          "line": 3488,
          "old_api": "AddUnits",
          "new_api": null,
          "old_text": "compilation_unit_queues_.AddUnits(baseline_units, top_tier_units,\n                                      native_module_->module())",
          "new_text": null,
          "old_line_content": "    compilation_unit_queues_.AddUnits(baseline_units, top_tier_units,",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 3492,
          "old_api": "IsValid",
          "new_api": null,
          "old_text": "baseline_compile_job_->IsValid()",
          "new_text": null,
          "old_line_content": "    DCHECK(baseline_compile_job_->IsValid());",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 3496,
          "old_api": "IsValid",
          "new_api": null,
          "old_text": "top_tier_compile_job_->IsValid()",
          "new_text": null,
          "old_line_content": "    DCHECK(top_tier_compile_job_->IsValid());",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 3503,
          "old_api": "CommitCompilationUnits",
          "new_api": null,
          "old_text": "CommitCompilationUnits({}, {&unit, 1}, {})",
          "new_text": null,
          "old_line_content": "  CommitCompilationUnits({}, {&unit, 1}, {});",
          "new_line_content": "void CompilationStateImpl::CommitTopTierCompilationUnit(",
          "content_same": false
        },
        {
          "line": 3508,
          "old_api": "AddTopTierPriorityUnit",
          "new_api": null,
          "old_text": "compilation_unit_queues_.AddTopTierPriorityUnit(unit, priority)",
          "new_text": null,
          "old_line_content": "  compilation_unit_queues_.AddTopTierPriorityUnit(unit, priority);",
          "new_line_content": "void CompilationStateImpl::AddTopTierPriorityCompilationUnit(",
          "content_same": false
        },
        {
          "line": 3512,
          "old_api": "NotifyConcurrencyIncrease",
          "new_api": null,
          "old_text": "top_tier_compile_job_->NotifyConcurrencyIncrease()",
          "new_text": null,
          "old_line_content": "  top_tier_compile_job_->NotifyConcurrencyIncrease();",
          "new_line_content": "  // {NotifyConcurrencyIncrease} can spawn new threads which could inherit PKU",
          "content_same": false
        },
        {
          "line": 3517,
          "old_api": "size",
          "new_api": null,
          "old_text": "js_to_wasm_wrapper_units_.size()",
          "new_text": null,
          "old_line_content": "  DCHECK_LT(index, js_to_wasm_wrapper_units_.size());",
          "new_line_content": "std::shared_ptr<JSToWasmWrapperCompilationUnit>",
          "content_same": false
        },
        {
          "line": 3527,
          "old_api": "TRACE_DISABLED_BY_DEFAULT",
          "new_api": null,
          "old_text": "TRACE_DISABLED_BY_DEFAULT(\"v8.wasm.detailed\")",
          "new_text": null,
          "old_line_content": "  TRACE_EVENT1(TRACE_DISABLED_BY_DEFAULT(\"v8.wasm.detailed\"),",
          "new_line_content": "  // changing the page permissions back-and-forth between RWX and RX, because",
          "content_same": false
        },
        {
          "line": 3534,
          "old_api": "isolate",
          "new_api": null,
          "old_text": "unit->isolate()",
          "new_text": null,
          "old_line_content": "    DCHECK_EQ(isolate, unit->isolate());",
          "new_line_content": "                                               1);",
          "content_same": false
        },
        {
          "line": 3537,
          "old_api": "Finalize",
          "new_api": null,
          "old_text": "unit->Finalize()",
          "new_text": null,
          "old_line_content": "    Handle<Code> code = unit->Finalize();",
          "new_line_content": "    // Note: The code is either the compiled signature-specific wrapper or the",
          "content_same": false
        },
        {
          "line": 3540,
          "old_api": "Set",
          "new_api": null,
          "old_text": "isolate->heap()->js_to_wasm_wrappers().Set(index,\n                                               MaybeObject::FromObject(*code))",
          "new_text": null,
          "old_line_content": "    isolate->heap()->js_to_wasm_wrappers().Set(index,",
          "new_line_content": "    uint32_t index =",
          "content_same": false
        },
        {
          "line": 3545,
          "old_api": "counters",
          "new_api": null,
          "old_text": "isolate->counters()->wasm_compiled_export_wrapper()->Increment(1)",
          "new_text": null,
          "old_line_content": "      isolate->counters()->wasm_compiled_export_wrapper()->Increment(1);",
          "new_line_content": "      // Do not increase code stats for non-jitted wrappers.",
          "content_same": false
        },
        {
          "line": 3552,
          "old_api": "GetQueueForTask",
          "new_api": null,
          "old_text": "compilation_unit_queues_.GetQueueForTask(task_id)",
          "new_text": null,
          "old_line_content": "  return compilation_unit_queues_.GetQueueForTask(task_id);",
          "new_line_content": "CompilationUnitQueues::Queue* CompilationStateImpl::GetQueueForCompileTask(",
          "content_same": false
        },
        {
          "line": 3558,
          "old_api": "GetNextUnit",
          "new_api": null,
          "old_text": "compilation_unit_queues_.GetNextUnit(queue, tier)",
          "new_text": null,
          "old_line_content": "  return compilation_unit_queues_.GetNextUnit(queue, tier);",
          "new_line_content": "CompilationStateImpl::GetNextCompilationUnit(",
          "content_same": false
        },
        {
          "line": 3563,
          "old_api": "TRACE_DISABLED_BY_DEFAULT",
          "new_api": null,
          "old_text": "TRACE_DISABLED_BY_DEFAULT(\"v8.wasm.detailed\")",
          "new_text": null,
          "old_line_content": "  TRACE_EVENT1(TRACE_DISABLED_BY_DEFAULT(\"v8.wasm.detailed\"),",
          "new_line_content": "void CompilationStateImpl::OnFinishedUnits(",
          "content_same": false
        },
        {
          "line": 3564,
          "old_api": "size",
          "new_api": null,
          "old_text": "code_vector.size()",
          "new_text": null,
          "old_line_content": "               \"wasm.OnFinishedUnits\", \"units\", code_vector.size());",
          "new_line_content": "    base::Vector<WasmCode*> code_vector) {",
          "content_same": false
        },
        {
          "line": 3574,
          "old_api": "size",
          "new_api": null,
          "old_text": "compilation_progress_.size()",
          "new_text": null,
          "old_line_content": "  DCHECK_EQ(compilation_progress_.size(),",
          "new_line_content": "                \"Assume an order on execution tiers\");",
          "content_same": false
        },
        {
          "line": 3575,
          "old_api": "module",
          "new_api": null,
          "old_text": "native_module_->module()",
          "new_text": null,
          "old_line_content": "            native_module_->module()->num_declared_functions);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3580,
          "old_api": "num_functions",
          "new_api": null,
          "old_text": "native_module_->num_functions()",
          "new_text": null,
          "old_line_content": "    DCHECK_LT(code->index(), native_module_->num_functions());",
          "new_line_content": "    WasmCode* code = code_vector[i];",
          "content_same": false
        },
        {
          "line": 3583,
          "old_api": "num_imported_functions",
          "new_api": null,
          "old_text": "native_module_->num_imported_functions()",
          "new_text": null,
          "old_line_content": "        static_cast<int>(native_module_->num_imported_functions())) {",
          "new_line_content": "",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 58,
      "total_additions": 113,
      "total_deletions": 113,
      "total_api_changes": 284
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 3,
        "api_related_lines": 284,
        "non_api_lines": 1,
        "non_api_line_numbers": [
          3452
        ]
      }
    },
    "api_calls_before": 1445,
    "api_calls_after": 1445,
    "diff_info": {
      "added_lines": 3,
      "removed_lines": 1,
      "total_diff_lines": 16
    }
  }
}
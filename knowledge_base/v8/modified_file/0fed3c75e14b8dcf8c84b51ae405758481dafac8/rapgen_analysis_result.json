{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/v8/modified_file/0fed3c75e14b8dcf8c84b51ae405758481dafac8",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/v8/modified_file/0fed3c75e14b8dcf8c84b51ae405758481dafac8/before.h",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/v8/modified_file/0fed3c75e14b8dcf8c84b51ae405758481dafac8/after.h",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/v8/modified_file/0fed3c75e14b8dcf8c84b51ae405758481dafac8/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 208,
          "old_api": "AlignDown",
          "new_api": "GetHighestValueByte",
          "old_text": "AlignDown(char_pos, sizeof(SubjectChar))",
          "new_text": "GetHighestValueByte(pattern_first_char)",
          "old_line_content": "    char_pos = AlignDown(char_pos, sizeof(SubjectChar));",
          "new_line_content": "  const uint8_t search_byte = GetHighestValueByte(pattern_first_char);",
          "content_same": false
        },
        {
          "line": 209,
          "old_api": "begin",
          "new_api": "static_cast<SubjectChar>(pattern_first_char)",
          "old_text": "subject.begin()",
          "new_text": "static_cast<SubjectChar>(pattern_first_char)",
          "old_line_content": "    pos = static_cast<int>(char_pos - subject.begin());",
          "new_line_content": "  const SubjectChar search_char = static_cast<SubjectChar>(pattern_first_char);",
          "content_same": false
        },
        {
          "line": 301,
          "old_api": "CharOccurrence",
          "new_api": "good_suffix_shift_table",
          "old_text": "CharOccurrence(bad_char_occurence, c)",
          "new_text": "search->good_suffix_shift_table()",
          "old_line_content": "      int shift = j - CharOccurrence(bad_char_occurence, c);",
          "new_line_content": "  int* good_suffix_shift = search->good_suffix_shift_table();",
          "content_same": false
        },
        {
          "line": 341,
          "old_api": "good_suffix_shift_table",
          "new_api": "length",
          "old_text": "good_suffix_shift_table()",
          "new_text": "pattern_.length()",
          "old_line_content": "  int* shift_table = good_suffix_shift_table();",
          "new_line_content": "  int pattern_length = pattern_.length();",
          "content_same": false
        },
        {
          "line": 342,
          "old_api": "suffix_table",
          "new_api": "begin",
          "old_text": "this->suffix_table()",
          "new_text": "pattern_.begin()",
          "old_line_content": "  int* suffix_table = this->suffix_table();",
          "new_line_content": "  const PatternChar* pattern = pattern_.begin();",
          "content_same": false
        },
        {
          "line": 414,
          "old_api": "static_cast<SubjectChar>(last_char)",
          "new_api": "length",
          "old_text": "static_cast<SubjectChar>(last_char)",
          "new_text": "subject.length()",
          "old_line_content": "      CharOccurrence(char_occurrences, static_cast<SubjectChar>(last_char));",
          "new_line_content": "  int subject_length = subject.length();",
          "content_same": false
        },
        {
          "line": 452,
          "old_api": "length",
          "new_api": "BoyerMooreSearch",
          "old_text": "pattern_.length()",
          "new_text": "BoyerMooreSearch(search, subject, index)",
          "old_line_content": "  int pattern_length = pattern_.length();",
          "new_line_content": "        return BoyerMooreSearch(search, subject, index);",
          "content_same": false
        },
        {
          "line": 461,
          "old_api": "AlphabetSize",
          "new_api": "length",
          "old_text": "AlphabetSize()",
          "new_text": "pattern_.length()",
          "old_line_content": "  int table_size = AlphabetSize();",
          "new_line_content": "  int pattern_length = pattern_.length();",
          "content_same": false
        },
        {
          "line": 463,
          "old_api": "memset",
          "new_api": "bad_char_table",
          "old_text": "memset(bad_char_occurrence, -1, table_size * sizeof(*bad_char_occurrence))",
          "new_text": "bad_char_table()",
          "old_line_content": "    memset(bad_char_occurrence, -1, table_size * sizeof(*bad_char_occurrence));",
          "new_line_content": "  int* bad_char_occurrence = bad_char_table();",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 522,
          "old_api": null,
          "new_api": "PopulateBoyerMooreHorspoolTable",
          "old_text": null,
          "new_text": "search->PopulateBoyerMooreHorspoolTable()",
          "old_line_content": "// If searching multiple times for the same pattern, a search",
          "new_line_content": "      search->PopulateBoyerMooreHorspoolTable();",
          "content_same": false
        },
        {
          "line": 267,
          "old_api": null,
          "new_api": "length",
          "old_text": null,
          "new_text": "pattern.length()",
          "old_line_content": "    // Loop extracted to separate function to allow using return to do",
          "new_line_content": "  DCHECK_GT(pattern.length(), 1);",
          "content_same": false
        },
        {
          "line": 268,
          "old_api": null,
          "new_api": "length",
          "old_text": null,
          "new_text": "pattern.length()",
          "old_line_content": "    // a deeper break.",
          "new_line_content": "  int pattern_length = pattern.length();",
          "content_same": false
        },
        {
          "line": 524,
          "old_api": null,
          "new_api": "BoyerMooreHorspoolSearch",
          "old_text": null,
          "new_text": "BoyerMooreHorspoolSearch(search, subject, i)",
          "old_line_content": "// for each search.",
          "new_line_content": "      return BoyerMooreHorspoolSearch(search, subject, i);",
          "content_same": false
        },
        {
          "line": 270,
          "old_api": null,
          "new_api": "length",
          "old_text": null,
          "new_text": "subject.length()",
          "old_line_content": "                    pattern_length - 1)) {",
          "new_line_content": "  int n = subject.length() - pattern_length;",
          "content_same": false
        },
        {
          "line": 272,
          "old_api": null,
          "new_api": "FindFirstCharacter",
          "old_text": null,
          "new_text": "FindFirstCharacter(pattern, subject, i)",
          "old_line_content": "    }",
          "new_line_content": "    i = FindFirstCharacter(pattern, subject, i);",
          "content_same": false
        },
        {
          "line": 274,
          "old_api": null,
          "new_api": "DCHECK_LE",
          "old_text": null,
          "new_text": "DCHECK_LE(i, n)",
          "old_line_content": "  return -1;",
          "new_line_content": "    DCHECK_LE(i, n);",
          "content_same": false
        },
        {
          "line": 278,
          "old_api": null,
          "new_api": "begin",
          "old_text": null,
          "new_text": "subject.begin()",
          "old_line_content": "// Boyer-Moore string search",
          "new_line_content": "    if (CharCompare(pattern.begin() + 1, subject.begin() + i,",
          "content_same": false
        },
        {
          "line": 538,
          "old_api": null,
          "new_api": "Search",
          "old_text": null,
          "new_text": "search.Search(subject, start_index)",
          "old_line_content": "                         int pattern_length, int start_index) {",
          "new_line_content": "  return search.Search(subject, start_index);",
          "content_same": false
        },
        {
          "line": 415,
          "old_api": null,
          "new_api": "length",
          "old_text": null,
          "new_text": "pattern.length()",
          "old_line_content": "  // Perform search",
          "new_line_content": "  int pattern_length = pattern.length();",
          "content_same": false
        },
        {
          "line": 416,
          "old_api": null,
          "new_api": "bad_char_table",
          "old_text": null,
          "new_text": "search->bad_char_table()",
          "old_line_content": "  int index = start_index;  // No matches found prior to this index.",
          "new_line_content": "  int* char_occurrences = search->bad_char_table();",
          "content_same": false
        },
        {
          "line": 295,
          "old_api": null,
          "new_api": "length",
          "old_text": null,
          "new_text": "subject.length()",
          "old_line_content": "  int index = start_index;",
          "new_line_content": "  int subject_length = subject.length();",
          "content_same": false
        },
        {
          "line": 296,
          "old_api": null,
          "new_api": "length",
          "old_text": null,
          "new_text": "pattern.length()",
          "old_line_content": "  // Continue search from i.",
          "new_line_content": "  int pattern_length = pattern.length();",
          "content_same": false
        },
        {
          "line": 423,
          "old_api": null,
          "new_api": "static_cast<SubjectChar>(last_char)",
          "old_text": null,
          "new_text": "static_cast<SubjectChar>(last_char)",
          "old_line_content": "      index += shift;",
          "new_line_content": "      CharOccurrence(char_occurrences, static_cast<SubjectChar>(last_char));",
          "content_same": false
        },
        {
          "line": 551,
          "old_api": null,
          "new_api": "SearchString",
          "old_text": null,
          "new_text": "SearchString(isolate, subject, pattern, start_index)",
          "old_line_content": "",
          "new_line_content": "  return SearchString(isolate, subject, pattern, start_index);",
          "content_same": false
        },
        {
          "line": 300,
          "old_api": null,
          "new_api": "bad_char_table",
          "old_text": null,
          "new_text": "search->bad_char_table()",
          "old_line_content": "    while (last_char != (c = subject[index + j])) {",
          "new_line_content": "  int* bad_char_occurence = search->bad_char_table();",
          "content_same": false
        },
        {
          "line": 430,
          "old_api": null,
          "new_api": "CharOccurrence",
          "old_text": null,
          "new_text": "CharOccurrence(char_occurrences, subject_char)",
          "old_line_content": "    while (j >= 0 && pattern[j] == (subject[index + j])) j--;",
          "new_line_content": "      int bc_occ = CharOccurrence(char_occurrences, subject_char);",
          "content_same": false
        },
        {
          "line": 310,
          "old_api": null,
          "new_api": "CharOccurrence",
          "old_text": null,
          "new_text": "CharOccurrence(bad_char_occurence, c)",
          "old_line_content": "    } else if (j < start) {",
          "new_line_content": "      int shift = j - CharOccurrence(bad_char_occurence, c);",
          "content_same": false
        },
        {
          "line": 450,
          "old_api": null,
          "new_api": "PopulateBoyerMooreTable",
          "old_text": null,
          "new_text": "search->PopulateBoyerMooreTable()",
          "old_line_content": "template <typename PatternChar, typename SubjectChar>",
          "new_line_content": "        search->PopulateBoyerMooreTable();",
          "content_same": false
        },
        {
          "line": 323,
          "old_api": null,
          "new_api": "CharOccurrence",
          "old_text": null,
          "new_text": "CharOccurrence(bad_char_occurence,\n                              static_cast<SubjectChar>(last_char))",
          "old_line_content": "      index += shift;",
          "new_line_content": "               CharOccurrence(bad_char_occurence,",
          "content_same": false
        },
        {
          "line": 324,
          "old_api": null,
          "new_api": "static_cast<SubjectChar>(last_char)",
          "old_text": null,
          "new_text": "static_cast<SubjectChar>(last_char)",
          "old_line_content": "    }",
          "new_line_content": "                              static_cast<SubjectChar>(last_char));",
          "content_same": false
        },
        {
          "line": 327,
          "old_api": null,
          "new_api": "CharOccurrence",
          "old_text": null,
          "new_text": "CharOccurrence(bad_char_occurence, c)",
          "old_line_content": "  return -1;",
          "new_line_content": "      int bc_occ = CharOccurrence(bad_char_occurence, c);",
          "content_same": false
        },
        {
          "line": 212,
          "old_api": null,
          "new_api": "DCHECK_GE",
          "old_text": null,
          "new_text": "DCHECK_GE(max_n - pos, 0)",
          "old_line_content": "",
          "new_line_content": "    DCHECK_GE(max_n - pos, 0);",
          "content_same": false
        },
        {
          "line": 213,
          "old_api": null,
          "new_api": "begin",
          "old_text": null,
          "new_text": "reinterpret_cast<const SubjectChar*>(\n        memchr(subject.begin() + pos, search_byte,\n               (max_n - pos) * sizeof(SubjectChar)))",
          "old_line_content": "  return -1;",
          "new_line_content": "    const SubjectChar* char_pos = reinterpret_cast<const SubjectChar*>(",
          "content_same": false
        },
        {
          "line": 214,
          "old_api": null,
          "new_api": "begin",
          "old_text": null,
          "new_text": "subject.begin()",
          "old_line_content": "}",
          "new_line_content": "        memchr(subject.begin() + pos, search_byte,",
          "content_same": false
        },
        {
          "line": 470,
          "old_api": null,
          "new_api": "AlphabetSize",
          "old_text": null,
          "new_text": "AlphabetSize()",
          "old_line_content": "    PatternChar c = pattern_[i];",
          "new_line_content": "  int table_size = AlphabetSize();",
          "content_same": false
        },
        {
          "line": 472,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(bad_char_occurrence, -1, table_size * sizeof(*bad_char_occurrence))",
          "old_line_content": "    bad_char_occurrence[bucket] = i;",
          "new_line_content": "    memset(bad_char_occurrence, -1, table_size * sizeof(*bad_char_occurrence));",
          "content_same": false
        },
        {
          "line": 217,
          "old_api": null,
          "new_api": "AlignDown",
          "old_text": null,
          "new_text": "AlignDown(char_pos, sizeof(SubjectChar))",
          "old_line_content": "// Single Character Pattern Search Strategy",
          "new_line_content": "    char_pos = AlignDown(char_pos, sizeof(SubjectChar));",
          "content_same": false
        },
        {
          "line": 218,
          "old_api": null,
          "new_api": "begin",
          "old_text": null,
          "new_text": "subject.begin()",
          "old_line_content": "//---------------------------------------------------------------------",
          "new_line_content": "    pos = static_cast<int>(char_pos - subject.begin());",
          "content_same": false
        },
        {
          "line": 350,
          "old_api": null,
          "new_api": "good_suffix_shift_table",
          "old_text": null,
          "new_text": "good_suffix_shift_table()",
          "old_line_content": "",
          "new_line_content": "  int* shift_table = good_suffix_shift_table();",
          "content_same": false
        },
        {
          "line": 351,
          "old_api": null,
          "new_api": "suffix_table",
          "old_text": null,
          "new_text": "this->suffix_table()",
          "old_line_content": "  if (pattern_length <= start) {",
          "new_line_content": "  int* suffix_table = this->suffix_table();",
          "content_same": false
        },
        {
          "line": 480,
          "old_api": null,
          "new_api": "AlphabetSize",
          "old_text": null,
          "new_text": "AlphabetSize()",
          "old_line_content": "// Simple linear search for short patterns, which bails out if the string",
          "new_line_content": "    int bucket = (sizeof(PatternChar) == 1) ? c : c % AlphabetSize();",
          "content_same": false
        },
        {
          "line": 233,
          "old_api": null,
          "new_api": "length",
          "old_text": null,
          "new_text": "search->pattern_.length()",
          "old_line_content": "",
          "new_line_content": "  DCHECK_EQ(1, search->pattern_.length());",
          "content_same": false
        },
        {
          "line": 236,
          "old_api": null,
          "new_api": "exceedsOneByte",
          "old_text": null,
          "new_text": "exceedsOneByte(pattern_first_char)",
          "old_line_content": "//---------------------------------------------------------------------",
          "new_line_content": "    if (exceedsOneByte(pattern_first_char)) {",
          "content_same": false
        },
        {
          "line": 240,
          "old_api": null,
          "new_api": "FindFirstCharacter",
          "old_text": null,
          "new_text": "FindFirstCharacter(search->pattern_, subject, index)",
          "old_line_content": "                        int length) {",
          "new_line_content": "  return FindFirstCharacter(search->pattern_, subject, index);",
          "content_same": false
        },
        {
          "line": 496,
          "old_api": null,
          "new_api": "length",
          "old_text": null,
          "new_text": "pattern.length()",
          "old_line_content": "    badness++;",
          "new_line_content": "  int pattern_length = pattern.length();",
          "content_same": false
        },
        {
          "line": 504,
          "old_api": null,
          "new_api": "length",
          "old_text": null,
          "new_text": "subject.length()",
          "old_line_content": "          break;",
          "new_line_content": "  for (int i = index, n = subject.length() - pattern_length; i <= n; i++) {",
          "content_same": false
        },
        {
          "line": 250,
          "old_api": null,
          "new_api": "DCHECK_GT",
          "old_text": null,
          "new_text": "DCHECK_GT(length, 0)",
          "old_line_content": "}",
          "new_line_content": "  DCHECK_GT(length, 0);",
          "content_same": false
        },
        {
          "line": 507,
          "old_api": null,
          "new_api": "FindFirstCharacter",
          "old_text": null,
          "new_text": "FindFirstCharacter(pattern, subject, i)",
          "old_line_content": "      } while (j < pattern_length);",
          "new_line_content": "      i = FindFirstCharacter(pattern, subject, i);",
          "content_same": false
        },
        {
          "line": 509,
          "old_api": null,
          "new_api": "DCHECK_LE",
          "old_text": null,
          "new_text": "DCHECK_LE(i, n)",
          "old_line_content": "        return i;",
          "new_line_content": "      DCHECK_LE(i, n);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 513,
          "old_api": "PopulateBoyerMooreHorspoolTable",
          "new_api": null,
          "old_text": "search->PopulateBoyerMooreHorspoolTable()",
          "new_text": null,
          "old_line_content": "      search->PopulateBoyerMooreHorspoolTable();",
          "new_line_content": "          break;",
          "content_same": false
        },
        {
          "line": 258,
          "old_api": "length",
          "new_api": null,
          "old_text": "pattern.length()",
          "new_text": null,
          "old_line_content": "  DCHECK_GT(pattern.length(), 1);",
          "new_line_content": "  return true;",
          "content_same": false
        },
        {
          "line": 515,
          "old_api": "BoyerMooreHorspoolSearch",
          "new_api": null,
          "old_text": "BoyerMooreHorspoolSearch(search, subject, i)",
          "new_text": null,
          "old_line_content": "      return BoyerMooreHorspoolSearch(search, subject, i);",
          "new_line_content": "        j++;",
          "content_same": false
        },
        {
          "line": 259,
          "old_api": "length",
          "new_api": null,
          "old_text": "pattern.length()",
          "new_text": null,
          "old_line_content": "  int pattern_length = pattern.length();",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 261,
          "old_api": "length",
          "new_api": null,
          "old_text": "subject.length()",
          "new_text": null,
          "old_line_content": "  int n = subject.length() - pattern_length;",
          "new_line_content": "// Simple linear search for short patterns. Never bails out.",
          "content_same": false
        },
        {
          "line": 263,
          "old_api": "FindFirstCharacter",
          "new_api": null,
          "old_text": "FindFirstCharacter(pattern, subject, i)",
          "new_text": null,
          "old_line_content": "    i = FindFirstCharacter(pattern, subject, i);",
          "new_line_content": "int StringSearch<PatternChar, SubjectChar>::LinearSearch(",
          "content_same": false
        },
        {
          "line": 265,
          "old_api": "DCHECK_LE",
          "new_api": null,
          "old_text": "DCHECK_LE(i, n)",
          "new_text": null,
          "old_line_content": "    DCHECK_LE(i, n);",
          "new_line_content": "    Vector<const SubjectChar> subject, int index) {",
          "content_same": false
        },
        {
          "line": 269,
          "old_api": "begin",
          "new_api": null,
          "old_text": "subject.begin()",
          "new_text": null,
          "old_line_content": "    if (CharCompare(pattern.begin() + 1, subject.begin() + i,",
          "new_line_content": "  int i = index;",
          "content_same": false
        },
        {
          "line": 529,
          "old_api": "Search",
          "new_api": null,
          "old_text": "search.Search(subject, start_index)",
          "new_text": null,
          "old_line_content": "  return search.Search(subject, start_index);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 405,
          "old_api": "length",
          "new_api": null,
          "old_text": "subject.length()",
          "new_text": null,
          "old_line_content": "  int subject_length = subject.length();",
          "new_line_content": "//---------------------------------------------------------------------",
          "content_same": false
        },
        {
          "line": 406,
          "old_api": "length",
          "new_api": null,
          "old_text": "pattern.length()",
          "new_text": null,
          "old_line_content": "  int pattern_length = pattern.length();",
          "new_line_content": "// Boyer-Moore-Horspool string search.",
          "content_same": false
        },
        {
          "line": 407,
          "old_api": "bad_char_table",
          "new_api": null,
          "old_text": "search->bad_char_table()",
          "new_text": null,
          "old_line_content": "  int* char_occurrences = search->bad_char_table();",
          "new_line_content": "//---------------------------------------------------------------------",
          "content_same": false
        },
        {
          "line": 542,
          "old_api": "SearchString",
          "new_api": null,
          "old_text": "SearchString(isolate, subject, pattern, start_index)",
          "new_text": null,
          "old_line_content": "  return SearchString(isolate, subject, pattern, start_index);",
          "new_line_content": "// and pattern as vectors before calling SearchString. Used from the",
          "content_same": false
        },
        {
          "line": 286,
          "old_api": "length",
          "new_api": null,
          "old_text": "subject.length()",
          "new_text": null,
          "old_line_content": "  int subject_length = subject.length();",
          "new_line_content": "//---------------------------------------------------------------------",
          "content_same": false
        },
        {
          "line": 287,
          "old_api": "length",
          "new_api": null,
          "old_text": "pattern.length()",
          "new_text": null,
          "old_line_content": "  int pattern_length = pattern.length();",
          "new_line_content": "// Boyer-Moore string search",
          "content_same": false
        },
        {
          "line": 291,
          "old_api": "bad_char_table",
          "new_api": null,
          "old_text": "search->bad_char_table()",
          "new_text": null,
          "old_line_content": "  int* bad_char_occurence = search->bad_char_table();",
          "new_line_content": "int StringSearch<PatternChar, SubjectChar>::BoyerMooreSearch(",
          "content_same": false
        },
        {
          "line": 292,
          "old_api": "good_suffix_shift_table",
          "new_api": null,
          "old_text": "search->good_suffix_shift_table()",
          "new_text": null,
          "old_line_content": "  int* good_suffix_shift = search->good_suffix_shift_table();",
          "new_line_content": "    StringSearch<PatternChar, SubjectChar>* search,",
          "content_same": false
        },
        {
          "line": 421,
          "old_api": "CharOccurrence",
          "new_api": null,
          "old_text": "CharOccurrence(char_occurrences, subject_char)",
          "new_text": null,
          "old_line_content": "      int bc_occ = CharOccurrence(char_occurrences, subject_char);",
          "new_line_content": "  int last_char_shift =",
          "content_same": false
        },
        {
          "line": 441,
          "old_api": "PopulateBoyerMooreTable",
          "new_api": null,
          "old_text": "search->PopulateBoyerMooreTable()",
          "new_text": null,
          "old_line_content": "        search->PopulateBoyerMooreTable();",
          "new_line_content": "      return index;",
          "content_same": false
        },
        {
          "line": 314,
          "old_api": "CharOccurrence",
          "new_api": null,
          "old_text": "CharOccurrence(bad_char_occurence,\n                              static_cast<SubjectChar>(last_char))",
          "new_text": null,
          "old_line_content": "               CharOccurrence(bad_char_occurence,",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 315,
          "old_api": "static_cast<SubjectChar>(last_char)",
          "new_api": null,
          "old_text": "static_cast<SubjectChar>(last_char)",
          "new_text": null,
          "old_line_content": "                              static_cast<SubjectChar>(last_char));",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 443,
          "old_api": "BoyerMooreSearch",
          "new_api": null,
          "old_text": "BoyerMooreSearch(search, subject, index)",
          "new_text": null,
          "old_line_content": "        return BoyerMooreSearch(search, subject, index);",
          "new_line_content": "      index += last_char_shift;",
          "content_same": false
        },
        {
          "line": 318,
          "old_api": "CharOccurrence",
          "new_api": null,
          "old_text": "CharOccurrence(bad_char_occurence, c)",
          "new_text": null,
          "old_line_content": "      int bc_occ = CharOccurrence(bad_char_occurence, c);",
          "new_line_content": "      return index;",
          "content_same": false
        },
        {
          "line": 454,
          "old_api": "bad_char_table",
          "new_api": null,
          "old_text": "bad_char_table()",
          "new_text": null,
          "old_line_content": "  int* bad_char_occurrence = bad_char_table();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 199,
          "old_api": "GetHighestValueByte",
          "new_api": null,
          "old_text": "GetHighestValueByte(pattern_first_char)",
          "new_text": null,
          "old_line_content": "  const uint8_t search_byte = GetHighestValueByte(pattern_first_char);",
          "new_line_content": "  if (sizeof(SubjectChar) == 2 && pattern_first_char == 0) {",
          "content_same": false
        },
        {
          "line": 200,
          "old_api": "static_cast<SubjectChar>(pattern_first_char)",
          "new_api": null,
          "old_text": "static_cast<SubjectChar>(pattern_first_char)",
          "new_text": null,
          "old_line_content": "  const SubjectChar search_char = static_cast<SubjectChar>(pattern_first_char);",
          "new_line_content": "    // Special-case looking for the 0 char in other than one-byte strings.",
          "content_same": false
        },
        {
          "line": 203,
          "old_api": "DCHECK_GE",
          "new_api": null,
          "old_text": "DCHECK_GE(max_n - pos, 0)",
          "new_text": null,
          "old_line_content": "    DCHECK_GE(max_n - pos, 0);",
          "new_line_content": "    for (int i = index; i < max_n; ++i) {",
          "content_same": false
        },
        {
          "line": 204,
          "old_api": "begin",
          "new_api": null,
          "old_text": "reinterpret_cast<const SubjectChar*>(\n        memchr(subject.begin() + pos, search_byte,\n               (max_n - pos) * sizeof(SubjectChar)))",
          "new_text": null,
          "old_line_content": "    const SubjectChar* char_pos = reinterpret_cast<const SubjectChar*>(",
          "new_line_content": "      if (subject[i] == 0) return i;",
          "content_same": false
        },
        {
          "line": 205,
          "old_api": "begin",
          "new_api": null,
          "old_text": "subject.begin()",
          "new_text": null,
          "old_line_content": "        memchr(subject.begin() + pos, search_byte,",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 332,
          "old_api": "length",
          "new_api": null,
          "old_text": "pattern_.length()",
          "new_text": null,
          "old_line_content": "  int pattern_length = pattern_.length();",
          "new_line_content": "      index += shift;",
          "content_same": false
        },
        {
          "line": 333,
          "old_api": "begin",
          "new_api": null,
          "old_text": "pattern_.begin()",
          "new_text": null,
          "old_line_content": "  const PatternChar* pattern = pattern_.begin();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 471,
          "old_api": "AlphabetSize",
          "new_api": null,
          "old_text": "AlphabetSize()",
          "new_text": null,
          "old_line_content": "    int bucket = (sizeof(PatternChar) == 1) ? c : c % AlphabetSize();",
          "new_line_content": "  if (start == 0) {  // All patterns less than kBMMaxShift in length.",
          "content_same": false
        },
        {
          "line": 224,
          "old_api": "length",
          "new_api": null,
          "old_text": "search->pattern_.length()",
          "new_text": null,
          "old_line_content": "  DCHECK_EQ(1, search->pattern_.length());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 227,
          "old_api": "exceedsOneByte",
          "new_api": null,
          "old_text": "exceedsOneByte(pattern_first_char)",
          "new_text": null,
          "old_line_content": "    if (exceedsOneByte(pattern_first_char)) {",
          "new_line_content": "//---------------------------------------------------------------------",
          "content_same": false
        },
        {
          "line": 231,
          "old_api": "FindFirstCharacter",
          "new_api": null,
          "old_text": "FindFirstCharacter(search->pattern_, subject, index)",
          "new_text": null,
          "old_line_content": "  return FindFirstCharacter(search->pattern_, subject, index);",
          "new_line_content": "    StringSearch<PatternChar, SubjectChar>* search,",
          "content_same": false
        },
        {
          "line": 487,
          "old_api": "length",
          "new_api": null,
          "old_text": "pattern.length()",
          "new_text": null,
          "old_line_content": "  int pattern_length = pattern.length();",
          "new_line_content": "//---------------------------------------------------------------------",
          "content_same": false
        },
        {
          "line": 495,
          "old_api": "length",
          "new_api": null,
          "old_text": "subject.length()",
          "new_text": null,
          "old_line_content": "  for (int i = index, n = subject.length() - pattern_length; i <= n; i++) {",
          "new_line_content": "  Vector<const PatternChar> pattern = search->pattern_;",
          "content_same": false
        },
        {
          "line": 241,
          "old_api": "DCHECK_GT",
          "new_api": null,
          "old_text": "DCHECK_GT(length, 0)",
          "new_text": null,
          "old_line_content": "  DCHECK_GT(length, 0);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 498,
          "old_api": "FindFirstCharacter",
          "new_api": null,
          "old_text": "FindFirstCharacter(pattern, subject, i)",
          "new_text": null,
          "old_line_content": "      i = FindFirstCharacter(pattern, subject, i);",
          "new_line_content": "  // done enough work we decide it's probably worth switching to a better",
          "content_same": false
        },
        {
          "line": 500,
          "old_api": "DCHECK_LE",
          "new_api": null,
          "old_text": "DCHECK_LE(i, n)",
          "new_text": null,
          "old_line_content": "      DCHECK_LE(i, n);",
          "new_line_content": "  int badness = -10 - (pattern_length << 2);",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 9,
      "total_additions": 40,
      "total_deletions": 40,
      "total_api_changes": 89
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 9,
        "api_related_lines": 89,
        "non_api_lines": 4,
        "non_api_line_numbers": [
          201,
          202,
          206,
          207
        ]
      }
    },
    "api_calls_before": 78,
    "api_calls_after": 78,
    "diff_info": {
      "added_lines": 9,
      "removed_lines": 0,
      "total_diff_lines": 21
    }
  }
}
{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/v8/modified_file/9fa61a9604faf02d3484a36cbebca5e47e531324",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/v8/modified_file/9fa61a9604faf02d3484a36cbebca5e47e531324/before.cc",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/v8/modified_file/9fa61a9604faf02d3484a36cbebca5e47e531324/after.cc",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/v8/modified_file/9fa61a9604faf02d3484a36cbebca5e47e531324/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 372,
          "old_api": "op",
          "new_api": "InputCount",
          "old_text": "n.op()",
          "new_text": "n.InputCount()",
          "old_line_content": "  os << n.id() << \": \" << *n.op();",
          "new_line_content": "    for (int i = 0; i < n.InputCount(); ++i) {",
          "content_same": false
        },
        {
          "line": 375,
          "old_api": "InputCount",
          "new_api": "InputAt",
          "old_text": "n.InputCount()",
          "new_text": "n.InputAt(i)->id()",
          "old_line_content": "    for (int i = 0; i < n.InputCount(); ++i) {",
          "new_line_content": "        os << n.InputAt(i)->id();",
          "content_same": false
        },
        {
          "line": 392,
          "old_api": "InlineCapacityField::encode(inline_capacity)",
          "new_api": "IdField::kMax < std::numeric_limits<NodeId>::max()",
          "old_text": "InlineCapacityField::encode(inline_capacity)",
          "new_text": "IdField::kMax < std::numeric_limits<NodeId>::max()",
          "old_line_content": "                 InlineCapacityField::encode(inline_capacity)),",
          "new_line_content": "  STATIC_ASSERT(IdField::kMax < std::numeric_limits<NodeId>::max());",
          "content_same": false
        },
        {
          "line": 396,
          "old_api": "IdField::is_valid(id)",
          "new_api": "DCHECK",
          "old_text": "IdField::is_valid(id)",
          "new_text": "DCHECK(inline_count == kOutlineMarker || inline_count <= inline_capacity)",
          "old_line_content": "  CHECK(IdField::is_valid(id));",
          "new_line_content": "  DCHECK(inline_count == kOutlineMarker || inline_count <= inline_capacity);",
          "content_same": false
        },
        {
          "line": 417,
          "old_api": "DCHECK_NE",
          "new_api": "DCHECK_EQ",
          "old_text": "DCHECK_NE(first_use_, use)",
          "new_text": "DCHECK_EQ(first_use_, use)",
          "old_line_content": "    DCHECK_NE(first_use_, use);",
          "new_line_content": "    DCHECK_EQ(first_use_, use);",
          "content_same": false
        },
        {
          "line": 446,
          "old_api": "InputAt",
          "new_api": "DCHECK_EQ",
          "old_text": "this->InputAt(index)",
          "new_text": "DCHECK_EQ(count, index)",
          "old_line_content": "      DCHECK_EQ(this->InputAt(index), input);",
          "new_line_content": "    DCHECK_EQ(count, index);",
          "content_same": false
        },
        {
          "line": 454,
          "old_api": "input_edges",
          "new_api": "to",
          "old_text": "this->input_edges()",
          "new_text": "edge.to()",
          "old_line_content": "    for (Edge edge : this->input_edges()) {",
          "new_line_content": "      DCHECK_EQ(this->InputAt(index), edge.to());",
          "content_same": false
        },
        {
          "line": 457,
          "old_api": "to",
          "new_api": "DCHECK_EQ",
          "old_text": "edge.to()",
          "new_text": "DCHECK_EQ(count, index)",
          "old_line_content": "      DCHECK_EQ(this->InputAt(index), edge.to());",
          "new_line_content": "    DCHECK_EQ(count, index);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 388,
          "old_api": null,
          "new_api": "InlineCountField::encode(inline_count)",
          "old_text": null,
          "new_text": "InlineCountField::encode(inline_count)",
          "old_line_content": "Node::Node(NodeId id, const Operator* op, int inline_count, int inline_capacity)",
          "new_line_content": "      bit_field_(IdField::encode(id) | InlineCountField::encode(inline_count) |",
          "content_same": false
        },
        {
          "line": 389,
          "old_api": null,
          "new_api": "InlineCapacityField::encode(inline_capacity)",
          "old_text": null,
          "new_text": "InlineCapacityField::encode(inline_capacity)",
          "old_line_content": "    : op_(op),",
          "new_line_content": "                 InlineCapacityField::encode(inline_capacity)),",
          "content_same": false
        },
        {
          "line": 393,
          "old_api": null,
          "new_api": "IdField::is_valid(id)",
          "old_text": null,
          "new_text": "IdField::is_valid(id)",
          "old_line_content": "      first_use_(nullptr) {",
          "new_line_content": "  CHECK(IdField::is_valid(id));",
          "content_same": false
        },
        {
          "line": 397,
          "old_api": null,
          "new_api": "DCHECK_LE",
          "old_text": null,
          "new_text": "DCHECK_LE(inline_capacity, kMaxInlineCapacity)",
          "old_line_content": "",
          "new_line_content": "  DCHECK_LE(inline_capacity, kMaxInlineCapacity);",
          "content_same": false
        },
        {
          "line": 402,
          "old_api": null,
          "new_api": "DCHECK",
          "old_text": null,
          "new_text": "DCHECK(first_use_ == nullptr || first_use_->prev == nullptr)",
          "old_line_content": "",
          "new_line_content": "  DCHECK(first_use_ == nullptr || first_use_->prev == nullptr);",
          "content_same": false
        },
        {
          "line": 403,
          "old_api": null,
          "new_api": "input_ptr",
          "old_text": null,
          "new_text": "use->input_ptr()",
          "old_line_content": "",
          "new_line_content": "  DCHECK_EQ(this, *use->input_ptr());",
          "content_same": false
        },
        {
          "line": 412,
          "old_api": null,
          "new_api": "DCHECK",
          "old_text": null,
          "new_text": "DCHECK(first_use_ == nullptr || first_use_->prev == nullptr)",
          "old_line_content": "",
          "new_line_content": "  DCHECK(first_use_ == nullptr || first_use_->prev == nullptr);",
          "content_same": false
        },
        {
          "line": 414,
          "old_api": null,
          "new_api": "DCHECK_NE",
          "old_text": null,
          "new_text": "DCHECK_NE(first_use_, use)",
          "old_line_content": "void Node::RemoveUse(Use* use) {",
          "new_line_content": "    DCHECK_NE(first_use_, use);",
          "content_same": false
        },
        {
          "line": 429,
          "old_api": null,
          "new_api": "fflush",
          "old_text": null,
          "new_text": "fflush(stdout)",
          "old_line_content": "#if DEBUG",
          "new_line_content": "  fflush(stdout);",
          "content_same": false
        },
        {
          "line": 430,
          "old_api": null,
          "new_api": "InputCount",
          "old_text": null,
          "new_text": "this->InputCount()",
          "old_line_content": "void Node::Verify() {",
          "new_line_content": "  int count = this->InputCount();",
          "content_same": false
        },
        {
          "line": 436,
          "old_api": null,
          "new_api": "GetUsePtr",
          "old_text": null,
          "new_text": "this->GetUsePtr(i)->input_index()",
          "old_line_content": "  if (count > 200 && count % 100) return;",
          "new_line_content": "    DCHECK_EQ(i, this->GetUsePtr(i)->input_index());",
          "content_same": false
        },
        {
          "line": 437,
          "old_api": null,
          "new_api": "GetUsePtr",
          "old_text": null,
          "new_text": "this->GetUsePtr(i)->input_ptr()",
          "old_line_content": "",
          "new_line_content": "    DCHECK_EQ(this->GetInputPtr(i), this->GetUsePtr(i)->input_ptr());",
          "content_same": false
        },
        {
          "line": 438,
          "old_api": null,
          "new_api": "InputCount",
          "old_text": null,
          "new_text": "this->InputCount()",
          "old_line_content": "  for (int i = 0; i < count; i++) {",
          "new_line_content": "    DCHECK_EQ(count, this->InputCount());",
          "content_same": false
        },
        {
          "line": 442,
          "old_api": null,
          "new_api": "inputs",
          "old_text": null,
          "new_text": "this->inputs()",
          "old_line_content": "  }",
          "new_line_content": "    for (Node* input : this->inputs()) {",
          "content_same": false
        },
        {
          "line": 443,
          "old_api": null,
          "new_api": "InputAt",
          "old_text": null,
          "new_text": "this->InputAt(index)",
          "old_line_content": "  {  // Direct input iteration.",
          "new_line_content": "      DCHECK_EQ(this->InputAt(index), input);",
          "content_same": false
        },
        {
          "line": 318,
          "old_api": null,
          "new_api": "from",
          "old_text": null,
          "new_text": "use->from()",
          "old_line_content": "  for (Use* use = first_use_; use; use = use->next) {",
          "new_line_content": "    if (use->from() != owner) {",
          "content_same": false
        },
        {
          "line": 447,
          "old_api": null,
          "new_api": "InputCount",
          "old_text": null,
          "new_text": "this->InputCount()",
          "old_line_content": "      index++;",
          "new_line_content": "    DCHECK_EQ(this->InputCount(), index);",
          "content_same": false
        },
        {
          "line": 451,
          "old_api": null,
          "new_api": "input_edges",
          "old_text": null,
          "new_text": "this->input_edges()",
          "old_line_content": "  }",
          "new_line_content": "    for (Edge edge : this->input_edges()) {",
          "content_same": false
        },
        {
          "line": 452,
          "old_api": null,
          "new_api": "from",
          "old_text": null,
          "new_text": "edge.from()",
          "old_line_content": "  {  // Input edge iteration.",
          "new_line_content": "      DCHECK_EQ(edge.from(), this);",
          "content_same": false
        },
        {
          "line": 453,
          "old_api": null,
          "new_api": "index",
          "old_text": null,
          "new_text": "edge.index()",
          "old_line_content": "    int index = 0;",
          "new_line_content": "      DCHECK_EQ(index, edge.index());",
          "content_same": false
        },
        {
          "line": 328,
          "old_api": null,
          "new_api": "from",
          "old_text": null,
          "new_text": "use->from()",
          "old_line_content": "bool Node::OwnedBy(Node const* owner1, Node const* owner2) const {",
          "new_line_content": "    Node* from = use->from();",
          "content_same": false
        },
        {
          "line": 458,
          "old_api": null,
          "new_api": "InputCount",
          "old_text": null,
          "new_text": "this->InputCount()",
          "old_line_content": "      index++;",
          "new_line_content": "    DCHECK_EQ(this->InputCount(), index);",
          "content_same": false
        },
        {
          "line": 342,
          "old_api": null,
          "new_api": "Print",
          "old_text": null,
          "new_text": "Print(os, depth)",
          "old_line_content": "",
          "new_line_content": "  Print(os, depth);",
          "content_same": false
        },
        {
          "line": 484,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "end()",
          "old_line_content": "}",
          "new_line_content": "bool Node::UseEdges::empty() const { return begin() == end(); }",
          "content_same": false
        },
        {
          "line": 358,
          "old_api": null,
          "new_api": "inputs",
          "old_text": null,
          "new_text": "node->inputs()",
          "old_line_content": "  }",
          "new_line_content": "  for (Node* input : node->inputs()) {",
          "content_same": false
        },
        {
          "line": 359,
          "old_api": null,
          "new_api": "PrintNode",
          "old_text": null,
          "new_text": "PrintNode(input, os, depth - 1, indentation + 1)",
          "old_line_content": "  os << std::endl;",
          "new_line_content": "    PrintNode(input, os, depth - 1, indentation + 1);",
          "content_same": false
        },
        {
          "line": 365,
          "old_api": null,
          "new_api": "PrintNode",
          "old_text": null,
          "new_text": "PrintNode(this, os, depth)",
          "old_line_content": "}  // namespace",
          "new_line_content": "  PrintNode(this, os, depth);",
          "content_same": false
        },
        {
          "line": 494,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "end()",
          "old_line_content": "}",
          "new_line_content": "bool Node::Uses::empty() const { return begin() == end(); }",
          "content_same": false
        },
        {
          "line": 369,
          "old_api": null,
          "new_api": "op",
          "old_text": null,
          "new_text": "n.op()",
          "old_line_content": "}",
          "new_line_content": "  os << n.id() << \": \" << *n.op();",
          "content_same": false
        },
        {
          "line": 370,
          "old_api": null,
          "new_api": "InputCount",
          "old_text": null,
          "new_text": "n.InputCount()",
          "old_line_content": "",
          "new_line_content": "  if (n.InputCount() > 0) {",
          "content_same": false
        },
        {
          "line": 501,
          "old_api": null,
          "new_api": "Print",
          "old_text": null,
          "new_text": "reinterpret_cast<i::compiler::Node*>(object)->Print()",
          "old_line_content": "}  // namespace v8",
          "new_line_content": "  reinterpret_cast<i::compiler::Node*>(object)->Print();",
          "content_same": false
        },
        {
          "line": 374,
          "old_api": null,
          "new_api": "InputAt",
          "old_text": null,
          "new_text": "n.InputAt(i)",
          "old_line_content": "    os << \"(\";",
          "new_line_content": "      if (n.InputAt(i)) {",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 391,
          "old_api": "InlineCountField::encode(inline_count)",
          "new_api": null,
          "old_text": "InlineCountField::encode(inline_count)",
          "new_text": null,
          "old_line_content": "      bit_field_(IdField::encode(id) | InlineCountField::encode(inline_count) |",
          "new_line_content": "  // Check that the id didn't overflow.",
          "content_same": false
        },
        {
          "line": 395,
          "old_api": "IdField::kMax < std::numeric_limits<NodeId>::max()",
          "new_api": null,
          "old_text": "IdField::kMax < std::numeric_limits<NodeId>::max()",
          "new_text": null,
          "old_line_content": "  STATIC_ASSERT(IdField::kMax < std::numeric_limits<NodeId>::max());",
          "new_line_content": "  // Inputs must either be out of line or within the inline capacity.",
          "content_same": false
        },
        {
          "line": 399,
          "old_api": "DCHECK",
          "new_api": null,
          "old_text": "DCHECK(inline_count == kOutlineMarker || inline_count <= inline_capacity)",
          "new_text": null,
          "old_line_content": "  DCHECK(inline_count == kOutlineMarker || inline_count <= inline_capacity);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 400,
          "old_api": "DCHECK_LE",
          "new_api": null,
          "old_text": "DCHECK_LE(inline_capacity, kMaxInlineCapacity)",
          "new_text": null,
          "old_line_content": "  DCHECK_LE(inline_capacity, kMaxInlineCapacity);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 405,
          "old_api": "DCHECK",
          "new_api": null,
          "old_text": "DCHECK(first_use_ == nullptr || first_use_->prev == nullptr)",
          "new_text": null,
          "old_line_content": "  DCHECK(first_use_ == nullptr || first_use_->prev == nullptr);",
          "new_line_content": "  use->prev = nullptr;",
          "content_same": false
        },
        {
          "line": 406,
          "old_api": "input_ptr",
          "new_api": null,
          "old_text": "use->input_ptr()",
          "new_text": null,
          "old_line_content": "  DCHECK_EQ(this, *use->input_ptr());",
          "new_line_content": "  if (first_use_) first_use_->prev = use;",
          "content_same": false
        },
        {
          "line": 415,
          "old_api": "DCHECK",
          "new_api": null,
          "old_text": "DCHECK(first_use_ == nullptr || first_use_->prev == nullptr)",
          "new_text": null,
          "old_line_content": "  DCHECK(first_use_ == nullptr || first_use_->prev == nullptr);",
          "new_line_content": "    use->prev->next = use->next;",
          "content_same": false
        },
        {
          "line": 420,
          "old_api": "DCHECK_EQ",
          "new_api": null,
          "old_text": "DCHECK_EQ(first_use_, use)",
          "new_text": null,
          "old_line_content": "    DCHECK_EQ(first_use_, use);",
          "new_line_content": "  if (use->next) {",
          "content_same": false
        },
        {
          "line": 432,
          "old_api": "fflush",
          "new_api": null,
          "old_text": "fflush(stdout)",
          "new_text": null,
          "old_line_content": "  fflush(stdout);",
          "new_line_content": "  // count is less than 200 or is a round number of 100s.",
          "content_same": false
        },
        {
          "line": 433,
          "old_api": "InputCount",
          "new_api": null,
          "old_text": "this->InputCount()",
          "new_text": null,
          "old_line_content": "  int count = this->InputCount();",
          "new_line_content": "  if (count > 200 && count % 100) return;",
          "content_same": false
        },
        {
          "line": 439,
          "old_api": "GetUsePtr",
          "new_api": null,
          "old_text": "this->GetUsePtr(i)->input_index()",
          "new_text": null,
          "old_line_content": "    DCHECK_EQ(i, this->GetUsePtr(i)->input_index());",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 440,
          "old_api": "GetUsePtr",
          "new_api": null,
          "old_text": "this->GetUsePtr(i)->input_ptr()",
          "new_text": null,
          "old_line_content": "    DCHECK_EQ(this->GetInputPtr(i), this->GetUsePtr(i)->input_ptr());",
          "new_line_content": "  {  // Direct input iteration.",
          "content_same": false
        },
        {
          "line": 441,
          "old_api": "InputCount",
          "new_api": null,
          "old_text": "this->InputCount()",
          "new_text": null,
          "old_line_content": "    DCHECK_EQ(count, this->InputCount());",
          "new_line_content": "    int index = 0;",
          "content_same": false
        },
        {
          "line": 445,
          "old_api": "inputs",
          "new_api": null,
          "old_text": "this->inputs()",
          "new_text": null,
          "old_line_content": "    for (Node* input : this->inputs()) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 319,
          "old_api": "from",
          "new_api": null,
          "old_text": "use->from()",
          "new_text": null,
          "old_line_content": "    if (use->from() == owner) {",
          "new_line_content": "      return false;",
          "content_same": false
        },
        {
          "line": 449,
          "old_api": "DCHECK_EQ",
          "new_api": null,
          "old_text": "DCHECK_EQ(count, index)",
          "new_text": null,
          "old_line_content": "    DCHECK_EQ(count, index);",
          "new_line_content": "  {  // Input edge iteration.",
          "content_same": false
        },
        {
          "line": 450,
          "old_api": "InputCount",
          "new_api": null,
          "old_text": "this->InputCount()",
          "new_text": null,
          "old_line_content": "    DCHECK_EQ(this->InputCount(), index);",
          "new_line_content": "    int index = 0;",
          "content_same": false
        },
        {
          "line": 455,
          "old_api": "from",
          "new_api": null,
          "old_text": "edge.from()",
          "new_text": null,
          "old_line_content": "      DCHECK_EQ(edge.from(), this);",
          "new_line_content": "      index++;",
          "content_same": false
        },
        {
          "line": 456,
          "old_api": "index",
          "new_api": null,
          "old_text": "edge.index()",
          "new_text": null,
          "old_line_content": "      DCHECK_EQ(index, edge.index());",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 331,
          "old_api": "from",
          "new_api": null,
          "old_text": "use->from()",
          "new_text": null,
          "old_line_content": "    Node* from = use->from();",
          "new_line_content": "    } else if (from == owner2) {",
          "content_same": false
        },
        {
          "line": 460,
          "old_api": "DCHECK_EQ",
          "new_api": null,
          "old_text": "DCHECK_EQ(count, index)",
          "new_text": null,
          "old_line_content": "    DCHECK_EQ(count, index);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 461,
          "old_api": "InputCount",
          "new_api": null,
          "old_text": "this->InputCount()",
          "new_text": null,
          "old_line_content": "    DCHECK_EQ(this->InputCount(), index);",
          "new_line_content": "#endif",
          "content_same": false
        },
        {
          "line": 345,
          "old_api": "Print",
          "new_api": null,
          "old_text": "Print(os, depth)",
          "new_text": null,
          "old_line_content": "  Print(os, depth);",
          "new_line_content": "namespace {",
          "content_same": false
        },
        {
          "line": 487,
          "old_api": "end",
          "new_api": null,
          "old_text": "end()",
          "new_text": null,
          "old_line_content": "bool Node::UseEdges::empty() const { return begin() == end(); }",
          "new_line_content": "Node::Uses::const_iterator Node::Uses::const_iterator::operator++(int n) {",
          "content_same": false
        },
        {
          "line": 361,
          "old_api": "inputs",
          "new_api": null,
          "old_text": "node->inputs()",
          "new_text": null,
          "old_line_content": "  for (Node* input : node->inputs()) {",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 362,
          "old_api": "PrintNode",
          "new_api": null,
          "old_text": "PrintNode(input, os, depth - 1, indentation + 1)",
          "new_text": null,
          "old_line_content": "    PrintNode(input, os, depth - 1, indentation + 1);",
          "new_line_content": "}  // namespace",
          "content_same": false
        },
        {
          "line": 368,
          "old_api": "PrintNode",
          "new_api": null,
          "old_text": "PrintNode(this, os, depth)",
          "new_text": null,
          "old_line_content": "  PrintNode(this, os, depth);",
          "new_line_content": "std::ostream& operator<<(std::ostream& os, const Node& n) {",
          "content_same": false
        },
        {
          "line": 497,
          "old_api": "end",
          "new_api": null,
          "old_text": "end()",
          "new_text": null,
          "old_line_content": "bool Node::Uses::empty() const { return begin() == end(); }",
          "new_line_content": "}  // namespace internal",
          "content_same": false
        },
        {
          "line": 373,
          "old_api": "InputCount",
          "new_api": null,
          "old_text": "n.InputCount()",
          "new_text": null,
          "old_line_content": "  if (n.InputCount() > 0) {",
          "new_line_content": "      if (i != 0) os << \", \";",
          "content_same": false
        },
        {
          "line": 504,
          "old_api": "Print",
          "new_api": null,
          "old_text": "reinterpret_cast<i::compiler::Node*>(object)->Print()",
          "new_text": null,
          "old_line_content": "  reinterpret_cast<i::compiler::Node*>(object)->Print();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 377,
          "old_api": "InputAt",
          "new_api": null,
          "old_text": "n.InputAt(i)",
          "new_text": null,
          "old_line_content": "      if (n.InputAt(i)) {",
          "new_line_content": "        os << \"null\";",
          "content_same": false
        },
        {
          "line": 378,
          "old_api": "InputAt",
          "new_api": null,
          "old_text": "n.InputAt(i)->id()",
          "new_text": null,
          "old_line_content": "        os << n.InputAt(i)->id();",
          "new_line_content": "      }",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 8,
      "total_additions": 32,
      "total_deletions": 32,
      "total_api_changes": 72
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 7,
        "api_related_lines": 72,
        "non_api_lines": 5,
        "non_api_line_numbers": [
          320,
          321,
          322,
          325,
          317
        ]
      }
    },
    "api_calls_before": 209,
    "api_calls_after": 209,
    "diff_info": {
      "added_lines": 2,
      "removed_lines": 5,
      "total_diff_lines": 23
    }
  }
}
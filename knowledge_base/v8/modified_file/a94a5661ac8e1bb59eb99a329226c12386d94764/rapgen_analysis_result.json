{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/v8/modified_file/a94a5661ac8e1bb59eb99a329226c12386d94764",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/v8/modified_file/a94a5661ac8e1bb59eb99a329226c12386d94764/before.cc",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/v8/modified_file/a94a5661ac8e1bb59eb99a329226c12386d94764/after.cc",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/v8/modified_file/a94a5661ac8e1bb59eb99a329226c12386d94764/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 1442,
          "old_api": "IncludesNumberType",
          "new_api": "scratch1",
          "old_text": "IncludesNumberType(types)",
          "new_text": "scratch1()",
          "old_line_content": "  Label* smi_target = IncludesNumberType(types) ? &number_case : &miss;",
          "new_line_content": "  Register match = scratch1();",
          "content_same": false
        },
        {
          "line": 1452,
          "old_api": "isolate",
          "new_api": "at",
          "old_text": "isolate()",
          "new_text": "types->at(current)",
          "old_line_content": "    Handle<Map> map = IC::TypeToMap(*type, isolate());",
          "new_line_content": "    Handle<HeapType> type = types->at(current);",
          "content_same": false
        },
        {
          "line": 1453,
          "old_api": "is_deprecated",
          "new_api": "isolate",
          "old_text": "map->is_deprecated()",
          "new_text": "isolate()",
          "old_line_content": "    if (!map->is_deprecated()) {",
          "new_line_content": "    Handle<Map> map = IC::TypeToMap(*type, isolate());",
          "content_same": false
        },
        {
          "line": 1459,
          "old_api": "at",
          "new_api": "HeapType::Number()",
          "old_text": "handlers->at(current)",
          "new_text": "HeapType::Number()",
          "old_line_content": "      __ Jump(handlers->at(current), RelocInfo::CODE_TARGET,",
          "new_line_content": "      if (type->Is(HeapType::Number())) {",
          "content_same": false
        },
        {
          "line": 1460,
          "old_api": "Operand",
          "new_api": "is_unused",
          "old_text": "Operand(map)",
          "new_text": "number_case.is_unused()",
          "old_line_content": "          eq, map_reg, Operand(map));",
          "new_line_content": "        ASSERT(!number_case.is_unused());",
          "content_same": false
        },
        {
          "line": 1463,
          "old_api": "ASSERT",
          "new_api": "at",
          "old_text": "ASSERT(number_of_handled_maps != 0)",
          "new_text": "handlers->at(current)",
          "old_line_content": "  ASSERT(number_of_handled_maps != 0);",
          "new_line_content": "      __ Jump(handlers->at(current), RelocInfo::CODE_TARGET,",
          "content_same": false
        },
        {
          "line": 1486,
          "old_api": "at",
          "new_api": "length",
          "old_text": "handler_stubs->at(i)",
          "new_text": "receiver_maps->length()",
          "old_line_content": "      __ Jump(handler_stubs->at(i), RelocInfo::CODE_TARGET, eq,",
          "new_line_content": "  int receiver_count = receiver_maps->length();",
          "content_same": false
        },
        {
          "line": 1502,
          "old_api": "empty_string",
          "new_api": "kind",
          "old_text": "factory()->empty_string()",
          "new_text": "kind()",
          "old_line_content": "      kind(), Code::NORMAL, factory()->empty_string(), POLYMORPHIC);",
          "new_line_content": "  TailCallBuiltin(masm(), MissBuiltin(kind()));",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 1505,
          "old_api": null,
          "new_api": "empty_string",
          "old_text": null,
          "new_text": "GetICCode(\n      kind(), Code::NORMAL, factory()->empty_string(), POLYMORPHIC)",
          "old_line_content": "",
          "new_line_content": "  return GetICCode(",
          "content_same": false
        },
        {
          "line": 1506,
          "old_api": null,
          "new_api": "empty_string",
          "old_text": null,
          "new_text": "factory()->empty_string()",
          "old_line_content": "#undef __",
          "new_line_content": "      kind(), Code::NORMAL, factory()->empty_string(), POLYMORPHIC);",
          "content_same": false
        },
        {
          "line": 1443,
          "old_api": null,
          "new_api": "IncludesNumberType",
          "old_text": null,
          "new_text": "IncludesNumberType(types)",
          "old_line_content": "  __ JumpIfSmi(receiver(), smi_target);",
          "new_line_content": "  Label* smi_target = IncludesNumberType(types) ? &number_case : &miss;",
          "content_same": false
        },
        {
          "line": 1475,
          "old_api": null,
          "new_api": "kind",
          "old_text": null,
          "new_text": "kind()",
          "old_line_content": "Handle<Code> KeyedStoreStubCompiler::CompileStorePolymorphic(",
          "new_line_content": "  return GetICCode(kind(), type, name, state);",
          "content_same": false
        },
        {
          "line": 1446,
          "old_api": null,
          "new_api": "scratch2",
          "old_text": null,
          "new_text": "scratch2()",
          "old_line_content": "",
          "new_line_content": "  Register map_reg = scratch2();",
          "content_same": false
        },
        {
          "line": 1543,
          "old_api": null,
          "new_api": "TailCallBuiltin",
          "old_text": null,
          "new_text": "TailCallBuiltin(masm, Builtins::kKeyedLoadIC_Slow)",
          "old_line_content": "",
          "new_line_content": "  TailCallBuiltin(masm, Builtins::kKeyedLoadIC_Slow);",
          "content_same": false
        },
        {
          "line": 1448,
          "old_api": null,
          "new_api": "length",
          "old_text": null,
          "new_text": "types->length()",
          "old_line_content": "  int number_of_handled_maps = 0;",
          "new_line_content": "  int receiver_count = types->length();",
          "content_same": false
        },
        {
          "line": 1496,
          "old_api": null,
          "new_api": "at",
          "old_text": null,
          "new_text": "handler_stubs->at(i)",
          "old_line_content": "",
          "new_line_content": "      __ Jump(handler_stubs->at(i), RelocInfo::CODE_TARGET);",
          "content_same": false
        },
        {
          "line": 1484,
          "old_api": null,
          "new_api": "receiver",
          "old_text": null,
          "new_text": "receiver()",
          "old_line_content": "  for (int i = 0; i < receiver_count; ++i) {",
          "new_line_content": "  __ JumpIfSmi(receiver(), &miss);",
          "content_same": false
        },
        {
          "line": 1454,
          "old_api": null,
          "new_api": "is_deprecated",
          "old_text": null,
          "new_text": "map->is_deprecated()",
          "old_line_content": "      number_of_handled_maps++;",
          "new_line_content": "    if (!map->is_deprecated()) {",
          "content_same": false
        },
        {
          "line": 1553,
          "old_api": null,
          "new_api": "TailCallBuiltin",
          "old_text": null,
          "new_text": "TailCallBuiltin(masm, Builtins::kKeyedLoadIC_Miss)",
          "old_line_content": "#undef __",
          "new_line_content": "  TailCallBuiltin(masm, Builtins::kKeyedLoadIC_Miss);",
          "content_same": false
        },
        {
          "line": 1489,
          "old_api": null,
          "new_api": "is_null",
          "old_text": null,
          "new_text": "transitioned_maps->at(i).is_null()",
          "old_line_content": "      Label next_map;",
          "new_line_content": "    if (transitioned_maps->at(i).is_null()) {",
          "content_same": false
        },
        {
          "line": 1494,
          "old_api": null,
          "new_api": "at",
          "old_text": null,
          "new_text": "receiver_maps->at(i)",
          "old_line_content": "    }",
          "new_line_content": "      __ Branch(&next_map, ne, scratch1(), Operand(receiver_maps->at(i)));",
          "content_same": false
        },
        {
          "line": 1495,
          "old_api": null,
          "new_api": "at",
          "old_text": null,
          "new_text": "transitioned_maps->at(i)",
          "old_line_content": "  }",
          "new_line_content": "      __ li(transition_map(), Operand(transitioned_maps->at(i)));",
          "content_same": false
        },
        {
          "line": 1464,
          "old_api": null,
          "new_api": "Operand",
          "old_text": null,
          "new_text": "Operand(zero_reg)",
          "old_line_content": "",
          "new_line_content": "          eq, match, Operand(zero_reg));",
          "content_same": false
        },
        {
          "line": 1467,
          "old_api": null,
          "new_api": "ASSERT",
          "old_text": null,
          "new_text": "ASSERT(number_of_handled_maps != 0)",
          "old_line_content": "",
          "new_line_content": "  ASSERT(number_of_handled_maps != 0);",
          "content_same": false
        },
        {
          "line": 1470,
          "old_api": null,
          "new_api": "kind",
          "old_text": null,
          "new_text": "kind()",
          "old_line_content": "      number_of_handled_maps > 1 ? POLYMORPHIC : MONOMORPHIC;",
          "new_line_content": "  TailCallBuiltin(masm(), MissBuiltin(kind()));",
          "content_same": false
        },
        {
          "line": 1535,
          "old_api": null,
          "new_api": "isolate",
          "old_text": null,
          "new_text": "masm->isolate()->counters()->keyed_load_external_array_slow()",
          "old_line_content": "  //  -- ra     : return address",
          "new_line_content": "      masm->isolate()->counters()->keyed_load_external_array_slow(),",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 1539,
          "old_api": "TailCallBuiltin",
          "new_api": null,
          "old_text": "TailCallBuiltin(masm, Builtins::kKeyedLoadIC_Slow)",
          "new_text": null,
          "old_line_content": "  TailCallBuiltin(masm, Builtins::kKeyedLoadIC_Slow);",
          "new_line_content": "  //  -- ra     : return address",
          "content_same": false
        },
        {
          "line": 1445,
          "old_api": "scratch1",
          "new_api": null,
          "old_text": "scratch1()",
          "new_text": null,
          "old_line_content": "  Register map_reg = scratch1();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1447,
          "old_api": "length",
          "new_api": null,
          "old_text": "types->length()",
          "new_text": null,
          "old_line_content": "  int receiver_count = types->length();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1480,
          "old_api": "receiver",
          "new_api": null,
          "old_text": "receiver()",
          "new_text": null,
          "old_line_content": "  __ JumpIfSmi(receiver(), &miss);",
          "new_line_content": "    MapHandleList* receiver_maps,",
          "content_same": false
        },
        {
          "line": 1482,
          "old_api": "length",
          "new_api": null,
          "old_text": "receiver_maps->length()",
          "new_text": null,
          "old_line_content": "  int receiver_count = receiver_maps->length();",
          "new_line_content": "    MapHandleList* transitioned_maps) {",
          "content_same": false
        },
        {
          "line": 1451,
          "old_api": "at",
          "new_api": null,
          "old_text": "types->at(current)",
          "new_text": null,
          "old_line_content": "    Handle<HeapType> type = types->at(current);",
          "new_line_content": "  for (int current = 0; current < receiver_count; ++current) {",
          "content_same": false
        },
        {
          "line": 1549,
          "old_api": "TailCallBuiltin",
          "new_api": null,
          "old_text": "TailCallBuiltin(masm, Builtins::kKeyedLoadIC_Miss)",
          "new_text": null,
          "old_line_content": "  TailCallBuiltin(masm, Builtins::kKeyedLoadIC_Miss);",
          "new_line_content": "  //  -- ra     : return address",
          "content_same": false
        },
        {
          "line": 1485,
          "old_api": "is_null",
          "new_api": null,
          "old_text": "transitioned_maps->at(i).is_null()",
          "new_text": null,
          "old_line_content": "    if (transitioned_maps->at(i).is_null()) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1487,
          "old_api": "at",
          "new_api": null,
          "old_text": "receiver_maps->at(i)",
          "new_text": null,
          "old_line_content": "          scratch1(), Operand(receiver_maps->at(i)));",
          "new_line_content": "  __ lw(scratch1(), FieldMemOperand(receiver(), HeapObject::kMapOffset));",
          "content_same": false
        },
        {
          "line": 1455,
          "old_api": "HeapType::Number()",
          "new_api": null,
          "old_text": "HeapType::Number()",
          "new_text": null,
          "old_line_content": "      if (type->Is(HeapType::Number())) {",
          "new_line_content": "      number_of_handled_maps++;",
          "content_same": false
        },
        {
          "line": 1456,
          "old_api": "is_unused",
          "new_api": null,
          "old_text": "number_case.is_unused()",
          "new_text": null,
          "old_line_content": "        ASSERT(!number_case.is_unused());",
          "new_line_content": "      // Check map and tail call if there's a match.",
          "content_same": false
        },
        {
          "line": 1498,
          "old_api": "kind",
          "new_api": null,
          "old_text": "kind()",
          "new_text": null,
          "old_line_content": "  TailCallBuiltin(masm(), MissBuiltin(kind()));",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1492,
          "old_api": "at",
          "new_api": null,
          "old_text": "handler_stubs->at(i)",
          "new_text": null,
          "old_line_content": "      __ Jump(handler_stubs->at(i), RelocInfo::CODE_TARGET);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 1466,
          "old_api": "kind",
          "new_api": null,
          "old_text": "kind()",
          "new_text": null,
          "old_line_content": "  TailCallBuiltin(masm(), MissBuiltin(kind()));",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 1531,
          "old_api": "isolate",
          "new_api": null,
          "old_text": "masm->isolate()->counters()->keyed_load_external_array_slow()",
          "new_text": null,
          "old_line_content": "      masm->isolate()->counters()->keyed_load_external_array_slow(),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1501,
          "old_api": "empty_string",
          "new_api": null,
          "old_text": "GetICCode(\n      kind(), Code::NORMAL, factory()->empty_string(), POLYMORPHIC)",
          "new_text": null,
          "old_line_content": "  return GetICCode(",
          "new_line_content": "  __ bind(&miss);",
          "content_same": false
        },
        {
          "line": 1471,
          "old_api": "kind",
          "new_api": null,
          "old_text": "kind()",
          "new_text": null,
          "old_line_content": "  return GetICCode(kind(), type, name, state);",
          "new_line_content": "",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 8,
      "total_additions": 18,
      "total_deletions": 17,
      "total_api_changes": 43
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 10,
        "api_related_lines": 43,
        "non_api_lines": 3,
        "non_api_line_numbers": [
          1457,
          1458,
          1444
        ]
      }
    },
    "api_calls_before": 490,
    "api_calls_after": 491,
    "diff_info": {
      "added_lines": 7,
      "removed_lines": 3,
      "total_diff_lines": 36
    }
  }
}
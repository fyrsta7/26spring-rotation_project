{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/v8/modified_file/b9af1ef18558e32057b8679ca100cbd62db61482",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/v8/modified_file/b9af1ef18558e32057b8679ca100cbd62db61482/before.cc",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/v8/modified_file/b9af1ef18558e32057b8679ca100cbd62db61482/after.cc",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/v8/modified_file/b9af1ef18558e32057b8679ca100cbd62db61482/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 3909,
          "old_api": "IsCode",
          "new_api": "reinterpret_cast<Code*>(obj)",
          "old_text": "obj->IsCode()",
          "new_text": "reinterpret_cast<Code*>(obj)",
          "old_line_content": "  if (obj->IsCode()) {",
          "new_line_content": "    GDBJITInterface::RemoveCode(reinterpret_cast<Code*>(obj));",
          "content_same": false
        },
        {
          "line": 3913,
          "old_api": "IsCode",
          "new_api": "address",
          "old_text": "obj->IsCode()",
          "new_text": "obj->address()",
          "old_line_content": "  if (obj->IsCode()) {",
          "new_line_content": "    PROFILE(isolate, CodeDeleteEvent(obj->address()));",
          "content_same": false
        },
        {
          "line": 3920,
          "old_api": "MarkCompactMarkingVisitor::Initialize()",
          "new_api": "IncrementalMarking::Initialize()",
          "old_text": "MarkCompactMarkingVisitor::Initialize()",
          "new_text": "IncrementalMarking::Initialize()",
          "old_line_content": "  MarkCompactMarkingVisitor::Initialize();",
          "new_line_content": "  IncrementalMarking::Initialize();",
          "content_same": false
        },
        {
          "line": 3936,
          "old_api": "HasSpaceForTypedSlot",
          "new_api": "ChainLengthThresholdReached",
          "old_text": "buffer->HasSpaceForTypedSlot()",
          "new_text": "ChainLengthThresholdReached(buffer)",
          "old_line_content": "  if (buffer == NULL || !buffer->HasSpaceForTypedSlot()) {",
          "new_line_content": "    if (mode == FAIL_ON_OVERFLOW && ChainLengthThresholdReached(buffer)) {",
          "content_same": false
        },
        {
          "line": 3937,
          "old_api": "ChainLengthThresholdReached",
          "new_api": "DeallocateChain",
          "old_text": "ChainLengthThresholdReached(buffer)",
          "new_text": "allocator->DeallocateChain(buffer_address)",
          "old_line_content": "    if (mode == FAIL_ON_OVERFLOW && ChainLengthThresholdReached(buffer)) {",
          "new_line_content": "      allocator->DeallocateChain(buffer_address);",
          "content_same": false
        },
        {
          "line": 3944,
          "old_api": "HasSpaceForTypedSlot",
          "new_api": "reinterpret_cast<ObjectSlot>(type)",
          "old_text": "buffer->HasSpaceForTypedSlot()",
          "new_text": "reinterpret_cast<ObjectSlot>(type)",
          "old_line_content": "  ASSERT(buffer->HasSpaceForTypedSlot());",
          "new_line_content": "  buffer->Add(reinterpret_cast<ObjectSlot>(type));",
          "content_same": false
        },
        {
          "line": 3945,
          "old_api": "reinterpret_cast<ObjectSlot>(type)",
          "new_api": "reinterpret_cast<ObjectSlot>(addr)",
          "old_text": "reinterpret_cast<ObjectSlot>(type)",
          "new_text": "reinterpret_cast<ObjectSlot>(addr)",
          "old_line_content": "  buffer->Add(reinterpret_cast<ObjectSlot>(type));",
          "new_line_content": "  buffer->Add(reinterpret_cast<ObjectSlot>(addr));",
          "content_same": false
        },
        {
          "line": 3967,
          "old_api": "reinterpret_cast<Address>(target)",
          "new_api": "IsEvacuationCandidate",
          "old_text": "reinterpret_cast<Address>(target)",
          "new_text": "target_page->IsEvacuationCandidate()",
          "old_line_content": "  Page* target_page = Page::FromAddress(reinterpret_cast<Address>(target));",
          "new_line_content": "  if (target_page->IsEvacuationCandidate() &&",
          "content_same": false
        },
        {
          "line": 3968,
          "old_api": "IsEvacuationCandidate",
          "new_api": "host",
          "old_text": "target_page->IsEvacuationCandidate()",
          "new_text": "rinfo->host()",
          "old_line_content": "  if (target_page->IsEvacuationCandidate() &&",
          "new_line_content": "      (rinfo->host() == NULL ||",
          "content_same": false
        },
        {
          "line": 3970,
          "old_api": "host",
          "new_api": "slots_buffer_address",
          "old_text": "rinfo->host()",
          "new_text": "SlotsBuffer::AddTo(&slots_buffer_allocator_,\n                            target_page->slots_buffer_address(),\n                            SlotTypeForRMode(rinfo->rmode()),\n                            rinfo->pc(),\n                            SlotsBuffer::FAIL_ON_OVERFLOW)",
          "old_line_content": "       !ShouldSkipEvacuationSlotRecording(rinfo->host()))) {",
          "new_line_content": "    if (!SlotsBuffer::AddTo(&slots_buffer_allocator_,",
          "content_same": false
        },
        {
          "line": 3972,
          "old_api": "slots_buffer_address",
          "new_api": "rmode",
          "old_text": "target_page->slots_buffer_address()",
          "new_text": "rinfo->rmode()",
          "old_line_content": "                            target_page->slots_buffer_address(),",
          "new_line_content": "                            SlotTypeForRMode(rinfo->rmode()),",
          "content_same": false
        },
        {
          "line": 3973,
          "old_api": "rmode",
          "new_api": "pc",
          "old_text": "rinfo->rmode()",
          "new_text": "rinfo->pc()",
          "old_line_content": "                            SlotTypeForRMode(rinfo->rmode()),",
          "new_line_content": "                            rinfo->pc(),",
          "content_same": false
        },
        {
          "line": 3983,
          "old_api": "reinterpret_cast<Address>(target)",
          "new_api": "IsEvacuationCandidate",
          "old_text": "reinterpret_cast<Address>(target)",
          "new_text": "target_page->IsEvacuationCandidate()",
          "old_line_content": "  Page* target_page = Page::FromAddress(reinterpret_cast<Address>(target));",
          "new_line_content": "  if (target_page->IsEvacuationCandidate() &&",
          "content_same": false
        },
        {
          "line": 3984,
          "old_api": "IsEvacuationCandidate",
          "new_api": "reinterpret_cast<Object**>(slot)",
          "old_text": "target_page->IsEvacuationCandidate()",
          "new_text": "reinterpret_cast<Object**>(slot)",
          "old_line_content": "  if (target_page->IsEvacuationCandidate() &&",
          "new_line_content": "      !ShouldSkipEvacuationSlotRecording(reinterpret_cast<Object**>(slot))) {",
          "content_same": false
        },
        {
          "line": 3985,
          "old_api": "reinterpret_cast<Object**>(slot)",
          "new_api": "slots_buffer_address",
          "old_text": "reinterpret_cast<Object**>(slot)",
          "new_text": "SlotsBuffer::AddTo(&slots_buffer_allocator_,\n                            target_page->slots_buffer_address(),\n                            SlotsBuffer::CODE_ENTRY_SLOT,\n                            slot,\n                            SlotsBuffer::FAIL_ON_OVERFLOW)",
          "old_line_content": "      !ShouldSkipEvacuationSlotRecording(reinterpret_cast<Object**>(slot))) {",
          "new_line_content": "    if (!SlotsBuffer::AddTo(&slots_buffer_allocator_,",
          "content_same": false
        },
        {
          "line": 3998,
          "old_api": "gc_state",
          "new_api": "is_compacting",
          "old_text": "heap()->gc_state()",
          "new_text": "is_compacting()",
          "old_line_content": "  ASSERT(heap()->gc_state() == Heap::MARK_COMPACT);",
          "new_line_content": "  if (is_compacting()) {",
          "content_same": false
        },
        {
          "line": 3999,
          "old_api": "is_compacting",
          "new_api": "isolate",
          "old_text": "is_compacting()",
          "new_text": "heap()->isolate()->inner_pointer_to_code_cache()->\n        GcSafeFindCodeForInnerPointer(pc)",
          "old_line_content": "  if (is_compacting()) {",
          "new_line_content": "    Code* host = heap()->isolate()->inner_pointer_to_code_cache()->",
          "content_same": false
        },
        {
          "line": 4002,
          "old_api": "Marking::MarkBitFrom(host)",
          "new_api": "Marking::IsBlack(mark_bit)",
          "old_text": "Marking::MarkBitFrom(host)",
          "new_text": "Marking::IsBlack(mark_bit)",
          "old_line_content": "    MarkBit mark_bit = Marking::MarkBitFrom(host);",
          "new_line_content": "    if (Marking::IsBlack(mark_bit)) {",
          "content_same": false
        },
        {
          "line": 4022,
          "old_api": "IsTypedSlot",
          "new_api": "PointersUpdatingVisitor::UpdateSlot(heap, slot)",
          "old_text": "IsTypedSlot(slot)",
          "new_text": "PointersUpdatingVisitor::UpdateSlot(heap, slot)",
          "old_line_content": "    if (!IsTypedSlot(slot)) {",
          "new_line_content": "      PointersUpdatingVisitor::UpdateSlot(heap, slot);",
          "content_same": false
        },
        {
          "line": 4026,
          "old_api": "ASSERT",
          "new_api": "UpdateSlot",
          "old_text": "ASSERT(slot_idx < idx_)",
          "new_text": "UpdateSlot(&v,\n                 DecodeSlotType(slot),\n                 reinterpret_cast<Address>(slots_[slot_idx]))",
          "old_line_content": "      ASSERT(slot_idx < idx_);",
          "new_line_content": "      UpdateSlot(&v,",
          "content_same": false
        },
        {
          "line": 4027,
          "old_api": "UpdateSlot",
          "new_api": "DecodeSlotType",
          "old_text": "UpdateSlot(&v,\n                 DecodeSlotType(slot),\n                 reinterpret_cast<Address>(slots_[slot_idx]))",
          "new_text": "DecodeSlotType(slot)",
          "old_line_content": "      UpdateSlot(&v,",
          "new_line_content": "                 DecodeSlotType(slot),",
          "content_same": false
        },
        {
          "line": 4028,
          "old_api": "DecodeSlotType",
          "new_api": "reinterpret_cast<Address>(slots_[slot_idx])",
          "old_text": "DecodeSlotType(slot)",
          "new_text": "reinterpret_cast<Address>(slots_[slot_idx])",
          "old_line_content": "                 DecodeSlotType(slot),",
          "new_line_content": "                 reinterpret_cast<Address>(slots_[slot_idx]));",
          "content_same": false
        },
        {
          "line": 4040,
          "old_api": "IsTypedSlot",
          "new_api": "reinterpret_cast<Address>(slot)",
          "old_text": "IsTypedSlot(slot)",
          "new_text": "reinterpret_cast<Address>(slot)",
          "old_line_content": "    if (!IsTypedSlot(slot)) {",
          "new_line_content": "      if (!IsOnInvalidatedCodeObject(reinterpret_cast<Address>(slot))) {",
          "content_same": false
        },
        {
          "line": 4041,
          "old_api": "reinterpret_cast<Address>(slot)",
          "new_api": "PointersUpdatingVisitor::UpdateSlot(heap, slot)",
          "old_text": "reinterpret_cast<Address>(slot)",
          "new_text": "PointersUpdatingVisitor::UpdateSlot(heap, slot)",
          "old_line_content": "      if (!IsOnInvalidatedCodeObject(reinterpret_cast<Address>(slot))) {",
          "new_line_content": "        PointersUpdatingVisitor::UpdateSlot(heap, slot);",
          "content_same": false
        },
        {
          "line": 4046,
          "old_api": "ASSERT",
          "new_api": "reinterpret_cast<Address>(slots_[slot_idx])",
          "old_text": "ASSERT(slot_idx < idx_)",
          "new_text": "reinterpret_cast<Address>(slots_[slot_idx])",
          "old_line_content": "      ASSERT(slot_idx < idx_);",
          "new_line_content": "      Address pc = reinterpret_cast<Address>(slots_[slot_idx]);",
          "content_same": false
        },
        {
          "line": 4047,
          "old_api": "reinterpret_cast<Address>(slots_[slot_idx])",
          "new_api": "IsOnInvalidatedCodeObject",
          "old_text": "reinterpret_cast<Address>(slots_[slot_idx])",
          "new_text": "IsOnInvalidatedCodeObject(pc)",
          "old_line_content": "      Address pc = reinterpret_cast<Address>(slots_[slot_idx]);",
          "new_line_content": "      if (!IsOnInvalidatedCodeObject(pc)) {",
          "content_same": false
        },
        {
          "line": 4048,
          "old_api": "IsOnInvalidatedCodeObject",
          "new_api": "UpdateSlot",
          "old_text": "IsOnInvalidatedCodeObject(pc)",
          "new_text": "UpdateSlot(&v,\n                   DecodeSlotType(slot),\n                   reinterpret_cast<Address>(slots_[slot_idx]))",
          "old_line_content": "      if (!IsOnInvalidatedCodeObject(pc)) {",
          "new_line_content": "        UpdateSlot(&v,",
          "content_same": false
        },
        {
          "line": 4049,
          "old_api": "UpdateSlot",
          "new_api": "DecodeSlotType",
          "old_text": "UpdateSlot(&v,\n                   DecodeSlotType(slot),\n                   reinterpret_cast<Address>(slots_[slot_idx]))",
          "new_text": "DecodeSlotType(slot)",
          "old_line_content": "        UpdateSlot(&v,",
          "new_line_content": "                   DecodeSlotType(slot),",
          "content_same": false
        },
        {
          "line": 4050,
          "old_api": "DecodeSlotType",
          "new_api": "reinterpret_cast<Address>(slots_[slot_idx])",
          "old_text": "DecodeSlotType(slot)",
          "new_text": "reinterpret_cast<Address>(slots_[slot_idx])",
          "old_line_content": "                   DecodeSlotType(slot),",
          "new_line_content": "                   reinterpret_cast<Address>(slots_[slot_idx]));",
          "content_same": false
        },
        {
          "line": 4071,
          "old_api": "next",
          "new_api": "DeallocateBuffer",
          "old_text": "buffer->next()",
          "new_text": "DeallocateBuffer(buffer)",
          "old_line_content": "    SlotsBuffer* next_buffer = buffer->next();",
          "new_line_content": "    DeallocateBuffer(buffer);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 3975,
          "old_api": null,
          "new_api": "EvictEvacuationCandidate",
          "old_text": null,
          "new_text": "EvictEvacuationCandidate(target_page)",
          "old_line_content": "                            SlotsBuffer::FAIL_ON_OVERFLOW)) {",
          "new_line_content": "      EvictEvacuationCandidate(target_page);",
          "content_same": false
        },
        {
          "line": 3982,
          "old_api": null,
          "new_api": "reinterpret_cast<Address>(target)",
          "old_text": null,
          "new_text": "reinterpret_cast<Address>(target)",
          "old_line_content": "void MarkCompactCollector::RecordCodeEntrySlot(Address slot, Code* target) {",
          "new_line_content": "  Page* target_page = Page::FromAddress(reinterpret_cast<Address>(target));",
          "content_same": false
        },
        {
          "line": 3859,
          "old_api": null,
          "new_api": "StartSweeperThreads",
          "old_text": null,
          "new_text": "StartSweeperThreads()",
          "old_line_content": "",
          "new_line_content": "    StartSweeperThreads();",
          "content_same": false
        },
        {
          "line": 3861,
          "old_api": null,
          "new_api": "WaitUntilSweepingCompleted",
          "old_text": null,
          "new_text": "WaitUntilSweepingCompleted()",
          "old_line_content": "",
          "new_line_content": "      WaitUntilSweepingCompleted();",
          "content_same": false
        },
        {
          "line": 3990,
          "old_api": null,
          "new_api": "EvictEvacuationCandidate",
          "old_text": null,
          "new_text": "EvictEvacuationCandidate(target_page)",
          "old_line_content": "                            SlotsBuffer::FAIL_ON_OVERFLOW)) {",
          "new_line_content": "      EvictEvacuationCandidate(target_page);",
          "content_same": false
        },
        {
          "line": 3865,
          "old_api": null,
          "new_api": "RemoveDeadInvalidatedCode",
          "old_text": null,
          "new_text": "RemoveDeadInvalidatedCode()",
          "old_line_content": "    // TODO(hpayer): The starting of the sweeper threads should be after",
          "new_line_content": "  RemoveDeadInvalidatedCode();",
          "content_same": false
        },
        {
          "line": 3866,
          "old_api": null,
          "new_api": "code_space",
          "old_text": null,
          "new_text": "heap()->code_space()",
          "old_line_content": "    // SweepSpace old data space.",
          "new_line_content": "  SweepSpace(heap()->code_space(), PRECISE);",
          "content_same": false
        },
        {
          "line": 3868,
          "old_api": null,
          "new_api": "cell_space",
          "old_text": null,
          "new_text": "heap()->cell_space()",
          "old_line_content": "    if (FLAG_parallel_sweeping && !FLAG_concurrent_sweeping) {",
          "new_line_content": "  SweepSpace(heap()->cell_space(), PRECISE);",
          "content_same": false
        },
        {
          "line": 3997,
          "old_api": null,
          "new_api": "gc_state",
          "old_text": null,
          "new_text": "heap()->gc_state()",
          "old_line_content": "void MarkCompactCollector::RecordCodeTargetPatch(Address pc, Code* target) {",
          "new_line_content": "  ASSERT(heap()->gc_state() == Heap::MARK_COMPACT);",
          "content_same": false
        },
        {
          "line": 3870,
          "old_api": null,
          "new_api": "EvacuateNewSpaceAndCandidates",
          "old_text": null,
          "new_text": "EvacuateNewSpaceAndCandidates()",
          "old_line_content": "    }",
          "new_line_content": "  EvacuateNewSpaceAndCandidates();",
          "content_same": false
        },
        {
          "line": 4001,
          "old_api": null,
          "new_api": "Marking::MarkBitFrom(host)",
          "old_text": null,
          "new_text": "Marking::MarkBitFrom(host)",
          "old_line_content": "        GcSafeFindCodeForInnerPointer(pc);",
          "new_line_content": "    MarkBit mark_bit = Marking::MarkBitFrom(host);",
          "content_same": false
        },
        {
          "line": 3875,
          "old_api": null,
          "new_api": "map_space",
          "old_text": null,
          "new_text": "heap()->map_space()",
          "old_line_content": "  // of the previous ones.",
          "new_line_content": "  SweepSpace(heap()->map_space(), PRECISE);",
          "content_same": false
        },
        {
          "line": 4004,
          "old_api": null,
          "new_api": "RecordRelocSlot",
          "old_text": null,
          "new_text": "RecordRelocSlot(&rinfo, target)",
          "old_line_content": "      RelocInfo rinfo(pc, RelocInfo::CODE_TARGET, 0, host);",
          "new_line_content": "      RecordRelocSlot(&rinfo, target);",
          "content_same": false
        },
        {
          "line": 3878,
          "old_api": null,
          "new_api": "lo_space",
          "old_text": null,
          "new_text": "heap_->lo_space()->FreeUnmarkedObjects()",
          "old_line_content": "  // Deallocate unmarked objects and clear marked bits for marked objects.",
          "new_line_content": "  heap_->lo_space()->FreeUnmarkedObjects();",
          "content_same": false
        },
        {
          "line": 3884,
          "old_api": null,
          "new_api": "isolate",
          "old_text": null,
          "new_text": "heap()->isolate()->debug()->IsLoaded()",
          "old_line_content": "#ifdef ENABLE_DEBUGGER_SUPPORT",
          "new_line_content": "  if (heap()->isolate()->debug()->IsLoaded() ||",
          "content_same": false
        },
        {
          "line": 4012,
          "old_api": null,
          "new_api": "reinterpret_cast<intptr_t>(slot)",
          "old_text": null,
          "new_text": "reinterpret_cast<intptr_t>(slot)",
          "old_line_content": "    SlotsBuffer::ObjectSlot slot) {",
          "new_line_content": "  return static_cast<SlotsBuffer::SlotType>(reinterpret_cast<intptr_t>(slot));",
          "content_same": false
        },
        {
          "line": 3892,
          "old_api": null,
          "new_api": "isolate",
          "old_text": null,
          "new_text": "heap()->isolate()",
          "old_line_content": "    if (code_flusher_ != NULL) return;",
          "new_line_content": "    code_flusher_ = new CodeFlusher(heap()->isolate());",
          "content_same": false
        },
        {
          "line": 4021,
          "old_api": null,
          "new_api": "IsTypedSlot",
          "old_text": null,
          "new_text": "IsTypedSlot(slot)",
          "old_line_content": "    ObjectSlot slot = slots_[slot_idx];",
          "new_line_content": "    if (!IsTypedSlot(slot)) {",
          "content_same": false
        },
        {
          "line": 3895,
          "old_api": null,
          "new_api": "EvictAllCandidates",
          "old_text": null,
          "new_text": "code_flusher_->EvictAllCandidates()",
          "old_line_content": "    if (code_flusher_ == NULL) return;",
          "new_line_content": "    code_flusher_->EvictAllCandidates();",
          "content_same": false
        },
        {
          "line": 4025,
          "old_api": null,
          "new_api": "ASSERT",
          "old_text": null,
          "new_text": "ASSERT(slot_idx < idx_)",
          "old_line_content": "      ++slot_idx;",
          "new_line_content": "      ASSERT(slot_idx < idx_);",
          "content_same": false
        },
        {
          "line": 3908,
          "old_api": null,
          "new_api": "IsCode",
          "old_text": null,
          "new_text": "obj->IsCode()",
          "old_line_content": "#ifdef ENABLE_GDB_JIT_INTERFACE",
          "new_line_content": "  if (obj->IsCode()) {",
          "content_same": false
        },
        {
          "line": 4039,
          "old_api": null,
          "new_api": "IsTypedSlot",
          "old_text": null,
          "new_text": "IsTypedSlot(slot)",
          "old_line_content": "    ObjectSlot slot = slots_[slot_idx];",
          "new_line_content": "    if (!IsTypedSlot(slot)) {",
          "content_same": false
        },
        {
          "line": 3912,
          "old_api": null,
          "new_api": "IsCode",
          "old_text": null,
          "new_text": "obj->IsCode()",
          "old_line_content": "#endif",
          "new_line_content": "  if (obj->IsCode()) {",
          "content_same": false
        },
        {
          "line": 4045,
          "old_api": null,
          "new_api": "ASSERT",
          "old_text": null,
          "new_text": "ASSERT(slot_idx < idx_)",
          "old_line_content": "      ++slot_idx;",
          "new_line_content": "      ASSERT(slot_idx < idx_);",
          "content_same": false
        },
        {
          "line": 3919,
          "old_api": null,
          "new_api": "MarkCompactMarkingVisitor::Initialize()",
          "old_text": null,
          "new_text": "MarkCompactMarkingVisitor::Initialize()",
          "old_line_content": "void MarkCompactCollector::Initialize() {",
          "new_line_content": "  MarkCompactMarkingVisitor::Initialize();",
          "content_same": false
        },
        {
          "line": 3925,
          "old_api": null,
          "new_api": "reinterpret_cast<uintptr_t>(slot)",
          "old_text": null,
          "new_text": "reinterpret_cast<uintptr_t>(slot)",
          "old_line_content": "bool SlotsBuffer::IsTypedSlot(ObjectSlot slot) {",
          "new_line_content": "  return reinterpret_cast<uintptr_t>(slot) < NUMBER_OF_SLOT_TYPES;",
          "content_same": false
        },
        {
          "line": 3935,
          "old_api": null,
          "new_api": "HasSpaceForTypedSlot",
          "old_text": null,
          "new_text": "buffer->HasSpaceForTypedSlot()",
          "old_line_content": "  SlotsBuffer* buffer = *buffer_address;",
          "new_line_content": "  if (buffer == NULL || !buffer->HasSpaceForTypedSlot()) {",
          "content_same": false
        },
        {
          "line": 3940,
          "old_api": null,
          "new_api": "AllocateBuffer",
          "old_text": null,
          "new_text": "allocator->AllocateBuffer(buffer)",
          "old_line_content": "    }",
          "new_line_content": "    buffer = allocator->AllocateBuffer(buffer);",
          "content_same": false
        },
        {
          "line": 4070,
          "old_api": null,
          "new_api": "next",
          "old_text": null,
          "new_text": "buffer->next()",
          "old_line_content": "  while (buffer != NULL) {",
          "new_line_content": "    SlotsBuffer* next_buffer = buffer->next();",
          "content_same": false
        },
        {
          "line": 3943,
          "old_api": null,
          "new_api": "HasSpaceForTypedSlot",
          "old_text": null,
          "new_text": "buffer->HasSpaceForTypedSlot()",
          "old_line_content": "  }",
          "new_line_content": "  ASSERT(buffer->HasSpaceForTypedSlot());",
          "content_same": false
        },
        {
          "line": 3951,
          "old_api": null,
          "new_api": "RelocInfo::IsCodeTarget(rmode)",
          "old_text": null,
          "new_text": "RelocInfo::IsCodeTarget(rmode)",
          "old_line_content": "static inline SlotsBuffer::SlotType SlotTypeForRMode(RelocInfo::Mode rmode) {",
          "new_line_content": "  if (RelocInfo::IsCodeTarget(rmode)) {",
          "content_same": false
        },
        {
          "line": 3953,
          "old_api": null,
          "new_api": "RelocInfo::IsEmbeddedObject(rmode)",
          "old_text": null,
          "new_text": "RelocInfo::IsEmbeddedObject(rmode)",
          "old_line_content": "    return SlotsBuffer::CODE_TARGET_SLOT;",
          "new_line_content": "  } else if (RelocInfo::IsEmbeddedObject(rmode)) {",
          "content_same": false
        },
        {
          "line": 3955,
          "old_api": null,
          "new_api": "RelocInfo::IsDebugBreakSlot(rmode)",
          "old_text": null,
          "new_text": "RelocInfo::IsDebugBreakSlot(rmode)",
          "old_line_content": "    return SlotsBuffer::EMBEDDED_OBJECT_SLOT;",
          "new_line_content": "  } else if (RelocInfo::IsDebugBreakSlot(rmode)) {",
          "content_same": false
        },
        {
          "line": 3957,
          "old_api": null,
          "new_api": "RelocInfo::IsJSReturn(rmode)",
          "old_text": null,
          "new_text": "RelocInfo::IsJSReturn(rmode)",
          "old_line_content": "    return SlotsBuffer::DEBUG_TARGET_SLOT;",
          "new_line_content": "  } else if (RelocInfo::IsJSReturn(rmode)) {",
          "content_same": false
        },
        {
          "line": 3960,
          "old_api": null,
          "new_api": "UNREACHABLE",
          "old_text": null,
          "new_text": "UNREACHABLE()",
          "old_line_content": "  }",
          "new_line_content": "  UNREACHABLE();",
          "content_same": false
        },
        {
          "line": 3966,
          "old_api": null,
          "new_api": "reinterpret_cast<Address>(target)",
          "old_text": null,
          "new_text": "reinterpret_cast<Address>(target)",
          "old_line_content": "void MarkCompactCollector::RecordRelocSlot(RelocInfo* rinfo, Object* target) {",
          "new_line_content": "  Page* target_page = Page::FromAddress(reinterpret_cast<Address>(target));",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 3974,
          "old_api": "pc",
          "new_api": null,
          "old_text": "rinfo->pc()",
          "new_text": null,
          "old_line_content": "                            rinfo->pc(),",
          "new_line_content": "                            SlotsBuffer::FAIL_ON_OVERFLOW)) {",
          "content_same": false
        },
        {
          "line": 3976,
          "old_api": "EvictEvacuationCandidate",
          "new_api": null,
          "old_text": "EvictEvacuationCandidate(target_page)",
          "new_text": null,
          "old_line_content": "      EvictEvacuationCandidate(target_page);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3857,
          "old_api": "RemoveDeadInvalidatedCode",
          "new_api": null,
          "old_text": "RemoveDeadInvalidatedCode()",
          "new_text": null,
          "old_line_content": "  RemoveDeadInvalidatedCode();",
          "new_line_content": "  if (how_to_sweep == PARALLEL_CONSERVATIVE) {",
          "content_same": false
        },
        {
          "line": 3858,
          "old_api": "code_space",
          "new_api": null,
          "old_text": "heap()->code_space()",
          "new_text": null,
          "old_line_content": "  SweepSpace(heap()->code_space(), PRECISE);",
          "new_line_content": "    // TODO(hpayer): fix race with concurrent sweeper",
          "content_same": false
        },
        {
          "line": 3987,
          "old_api": "slots_buffer_address",
          "new_api": null,
          "old_text": "target_page->slots_buffer_address()",
          "new_text": null,
          "old_line_content": "                            target_page->slots_buffer_address(),",
          "new_line_content": "                            SlotsBuffer::CODE_ENTRY_SLOT,",
          "content_same": false
        },
        {
          "line": 3860,
          "old_api": "cell_space",
          "new_api": null,
          "old_text": "heap()->cell_space()",
          "new_text": null,
          "old_line_content": "  SweepSpace(heap()->cell_space(), PRECISE);",
          "new_line_content": "    if (FLAG_parallel_sweeping && !FLAG_concurrent_sweeping) {",
          "content_same": false
        },
        {
          "line": 3862,
          "old_api": "EvacuateNewSpaceAndCandidates",
          "new_api": null,
          "old_text": "EvacuateNewSpaceAndCandidates()",
          "new_text": null,
          "old_line_content": "  EvacuateNewSpaceAndCandidates();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3991,
          "old_api": "EvictEvacuationCandidate",
          "new_api": null,
          "old_text": "EvictEvacuationCandidate(target_page)",
          "new_text": null,
          "old_line_content": "      EvictEvacuationCandidate(target_page);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3867,
          "old_api": "StartSweeperThreads",
          "new_api": null,
          "old_text": "StartSweeperThreads()",
          "new_text": null,
          "old_line_content": "    StartSweeperThreads();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3869,
          "old_api": "WaitUntilSweepingCompleted",
          "new_api": null,
          "old_text": "WaitUntilSweepingCompleted()",
          "new_text": null,
          "old_line_content": "      WaitUntilSweepingCompleted();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4000,
          "old_api": "isolate",
          "new_api": null,
          "old_text": "heap()->isolate()->inner_pointer_to_code_cache()->\n        GcSafeFindCodeForInnerPointer(pc)",
          "new_text": null,
          "old_line_content": "    Code* host = heap()->isolate()->inner_pointer_to_code_cache()->",
          "new_line_content": "        GcSafeFindCodeForInnerPointer(pc);",
          "content_same": false
        },
        {
          "line": 4003,
          "old_api": "Marking::IsBlack(mark_bit)",
          "new_api": null,
          "old_text": "Marking::IsBlack(mark_bit)",
          "new_text": null,
          "old_line_content": "    if (Marking::IsBlack(mark_bit)) {",
          "new_line_content": "      RelocInfo rinfo(pc, RelocInfo::CODE_TARGET, 0, host);",
          "content_same": false
        },
        {
          "line": 3876,
          "old_api": "map_space",
          "new_api": null,
          "old_text": "heap()->map_space()",
          "new_text": null,
          "old_line_content": "  SweepSpace(heap()->map_space(), PRECISE);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4005,
          "old_api": "RecordRelocSlot",
          "new_api": null,
          "old_text": "RecordRelocSlot(&rinfo, target)",
          "new_text": null,
          "old_line_content": "      RecordRelocSlot(&rinfo, target);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3879,
          "old_api": "lo_space",
          "new_api": null,
          "old_text": "heap_->lo_space()->FreeUnmarkedObjects()",
          "new_text": null,
          "old_line_content": "  heap_->lo_space()->FreeUnmarkedObjects();",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4013,
          "old_api": "reinterpret_cast<intptr_t>(slot)",
          "new_api": null,
          "old_text": "reinterpret_cast<intptr_t>(slot)",
          "new_text": null,
          "old_line_content": "  return static_cast<SlotsBuffer::SlotType>(reinterpret_cast<intptr_t>(slot));",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3886,
          "old_api": "isolate",
          "new_api": null,
          "old_text": "heap()->isolate()->debug()->has_break_points()",
          "new_text": null,
          "old_line_content": "      heap()->isolate()->debug()->has_break_points()) {",
          "new_line_content": "    enable = false;",
          "content_same": false
        },
        {
          "line": 3893,
          "old_api": "isolate",
          "new_api": null,
          "old_text": "heap()->isolate()",
          "new_text": null,
          "old_line_content": "    code_flusher_ = new CodeFlusher(heap()->isolate());",
          "new_line_content": "  } else {",
          "content_same": false
        },
        {
          "line": 4023,
          "old_api": "PointersUpdatingVisitor::UpdateSlot(heap, slot)",
          "new_api": null,
          "old_text": "PointersUpdatingVisitor::UpdateSlot(heap, slot)",
          "new_text": null,
          "old_line_content": "      PointersUpdatingVisitor::UpdateSlot(heap, slot);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 3896,
          "old_api": "EvictAllCandidates",
          "new_api": null,
          "old_text": "code_flusher_->EvictAllCandidates()",
          "new_text": null,
          "old_line_content": "    code_flusher_->EvictAllCandidates();",
          "new_line_content": "    delete code_flusher_;",
          "content_same": false
        },
        {
          "line": 4029,
          "old_api": "reinterpret_cast<Address>(slots_[slot_idx])",
          "new_api": null,
          "old_text": "reinterpret_cast<Address>(slots_[slot_idx])",
          "new_text": null,
          "old_line_content": "                 reinterpret_cast<Address>(slots_[slot_idx]));",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3910,
          "old_api": "reinterpret_cast<Code*>(obj)",
          "new_api": null,
          "old_text": "reinterpret_cast<Code*>(obj)",
          "new_text": null,
          "old_line_content": "    GDBJITInterface::RemoveCode(reinterpret_cast<Code*>(obj));",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 3914,
          "old_api": "address",
          "new_api": null,
          "old_text": "obj->address()",
          "new_text": null,
          "old_line_content": "    PROFILE(isolate, CodeDeleteEvent(obj->address()));",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 4042,
          "old_api": "PointersUpdatingVisitor::UpdateSlot(heap, slot)",
          "new_api": null,
          "old_text": "PointersUpdatingVisitor::UpdateSlot(heap, slot)",
          "new_text": null,
          "old_line_content": "        PointersUpdatingVisitor::UpdateSlot(heap, slot);",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 3921,
          "old_api": "IncrementalMarking::Initialize()",
          "new_api": null,
          "old_text": "IncrementalMarking::Initialize()",
          "new_text": null,
          "old_line_content": "  IncrementalMarking::Initialize();",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4051,
          "old_api": "reinterpret_cast<Address>(slots_[slot_idx])",
          "new_api": null,
          "old_text": "reinterpret_cast<Address>(slots_[slot_idx])",
          "new_text": null,
          "old_line_content": "                   reinterpret_cast<Address>(slots_[slot_idx]));",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 3926,
          "old_api": "reinterpret_cast<uintptr_t>(slot)",
          "new_api": null,
          "old_text": "reinterpret_cast<uintptr_t>(slot)",
          "new_text": null,
          "old_line_content": "  return reinterpret_cast<uintptr_t>(slot) < NUMBER_OF_SLOT_TYPES;",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3938,
          "old_api": "DeallocateChain",
          "new_api": null,
          "old_text": "allocator->DeallocateChain(buffer_address)",
          "new_text": null,
          "old_line_content": "      allocator->DeallocateChain(buffer_address);",
          "new_line_content": "      return false;",
          "content_same": false
        },
        {
          "line": 3941,
          "old_api": "AllocateBuffer",
          "new_api": null,
          "old_text": "allocator->AllocateBuffer(buffer)",
          "new_text": null,
          "old_line_content": "    buffer = allocator->AllocateBuffer(buffer);",
          "new_line_content": "    *buffer_address = buffer;",
          "content_same": false
        },
        {
          "line": 4072,
          "old_api": "DeallocateBuffer",
          "new_api": null,
          "old_text": "DeallocateBuffer(buffer)",
          "new_text": null,
          "old_line_content": "    DeallocateBuffer(buffer);",
          "new_line_content": "    buffer = next_buffer;",
          "content_same": false
        },
        {
          "line": 3946,
          "old_api": "reinterpret_cast<ObjectSlot>(addr)",
          "new_api": null,
          "old_text": "reinterpret_cast<ObjectSlot>(addr)",
          "new_text": null,
          "old_line_content": "  buffer->Add(reinterpret_cast<ObjectSlot>(addr));",
          "new_line_content": "  return true;",
          "content_same": false
        },
        {
          "line": 3952,
          "old_api": "RelocInfo::IsCodeTarget(rmode)",
          "new_api": null,
          "old_text": "RelocInfo::IsCodeTarget(rmode)",
          "new_text": null,
          "old_line_content": "  if (RelocInfo::IsCodeTarget(rmode)) {",
          "new_line_content": "    return SlotsBuffer::CODE_TARGET_SLOT;",
          "content_same": false
        },
        {
          "line": 3954,
          "old_api": "RelocInfo::IsEmbeddedObject(rmode)",
          "new_api": null,
          "old_text": "RelocInfo::IsEmbeddedObject(rmode)",
          "new_text": null,
          "old_line_content": "  } else if (RelocInfo::IsEmbeddedObject(rmode)) {",
          "new_line_content": "    return SlotsBuffer::EMBEDDED_OBJECT_SLOT;",
          "content_same": false
        },
        {
          "line": 3956,
          "old_api": "RelocInfo::IsDebugBreakSlot(rmode)",
          "new_api": null,
          "old_text": "RelocInfo::IsDebugBreakSlot(rmode)",
          "new_text": null,
          "old_line_content": "  } else if (RelocInfo::IsDebugBreakSlot(rmode)) {",
          "new_line_content": "    return SlotsBuffer::DEBUG_TARGET_SLOT;",
          "content_same": false
        },
        {
          "line": 3958,
          "old_api": "RelocInfo::IsJSReturn(rmode)",
          "new_api": null,
          "old_text": "RelocInfo::IsJSReturn(rmode)",
          "new_text": null,
          "old_line_content": "  } else if (RelocInfo::IsJSReturn(rmode)) {",
          "new_line_content": "    return SlotsBuffer::JS_RETURN_SLOT;",
          "content_same": false
        },
        {
          "line": 3961,
          "old_api": "UNREACHABLE",
          "new_api": null,
          "old_text": "UNREACHABLE()",
          "new_text": null,
          "old_line_content": "  UNREACHABLE();",
          "new_line_content": "  return SlotsBuffer::NUMBER_OF_SLOT_TYPES;",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 30,
      "total_additions": 36,
      "total_deletions": 36,
      "total_api_changes": 102
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 14,
        "api_related_lines": 102,
        "non_api_lines": 2,
        "non_api_line_numbers": [
          3871,
          3863
        ]
      }
    },
    "api_calls_before": 1787,
    "api_calls_after": 1787,
    "diff_info": {
      "added_lines": 8,
      "removed_lines": 9,
      "total_diff_lines": 36
    }
  }
}
{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/v8/modified_file/29b572d40cdc6dfd4f9b76bcde11748430bdc79c",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/v8/modified_file/29b572d40cdc6dfd4f9b76bcde11748430bdc79c/before.h",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/v8/modified_file/29b572d40cdc6dfd4f9b76bcde11748430bdc79c/after.h",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/v8/modified_file/29b572d40cdc6dfd4f9b76bcde11748430bdc79c/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 69,
          "old_api": "GetElementsAccessor",
          "new_api": "heap",
          "old_text": "js_object->GetElementsAccessor()",
          "new_text": "isolate()->heap()->empty_fixed_array()",
          "old_line_content": "          ElementsAccessor* accessor = js_object->GetElementsAccessor();",
          "new_line_content": "          if (js_object->elements() == isolate()->heap()->empty_fixed_array()) {",
          "content_same": false
        },
        {
          "line": 73,
          "old_api": "GetAttributes",
          "new_api": "GetElementsAccessor",
          "old_text": "accessor->GetAttributes(js_object, index_, backing_store)",
          "new_text": "js_object->GetElementsAccessor()",
          "old_line_content": "          if (accessor->GetAttributes(js_object, index_, backing_store) ==",
          "new_line_content": "          ElementsAccessor* accessor = js_object->GetElementsAccessor();",
          "content_same": false
        },
        {
          "line": 77,
          "old_api": "GetDetails",
          "new_api": "GetAttributes",
          "old_text": "accessor->GetDetails(backing_store, number_)",
          "new_text": "accessor->GetAttributes(js_object, index_, backing_store)",
          "old_line_content": "          property_details_ = accessor->GetDetails(backing_store, number_);",
          "new_line_content": "          if (accessor->GetAttributes(js_object, index_, backing_store) ==",
          "content_same": false
        },
        {
          "line": 81,
          "old_api": "FindEntry",
          "new_api": "GetDetails",
          "old_text": "dict->FindEntry(name_)",
          "new_text": "accessor->GetDetails(backing_store, number_)",
          "old_line_content": "        int number = dict->FindEntry(name_);",
          "new_line_content": "          property_details_ = accessor->GetDetails(backing_store, number_);",
          "content_same": false
        },
        {
          "line": 83,
          "old_api": "static_cast<uint32_t>(number)",
          "new_api": "IsGlobalObject",
          "old_text": "static_cast<uint32_t>(number)",
          "new_text": "holder->IsGlobalObject()",
          "old_line_content": "        number_ = static_cast<uint32_t>(number);",
          "new_line_content": "      } else if (holder->IsGlobalObject()) {",
          "content_same": false
        },
        {
          "line": 84,
          "old_api": "ValueAt",
          "new_api": "global_dictionary",
          "old_text": "dict->ValueAt(number_)->IsPropertyCell()",
          "new_text": "JSObject::cast(holder)->global_dictionary()",
          "old_line_content": "        DCHECK(dict->ValueAt(number_)->IsPropertyCell());",
          "new_line_content": "        GlobalDictionary* dict = JSObject::cast(holder)->global_dictionary();",
          "content_same": false
        },
        {
          "line": 85,
          "old_api": "ValueAt",
          "new_api": "FindEntry",
          "old_text": "dict->ValueAt(number_)",
          "new_text": "dict->FindEntry(name_)",
          "old_line_content": "        PropertyCell* cell = PropertyCell::cast(dict->ValueAt(number_));",
          "new_line_content": "        int number = dict->FindEntry(name_);",
          "content_same": false
        },
        {
          "line": 87,
          "old_api": "property_details",
          "new_api": "static_cast<uint32_t>(number)",
          "old_text": "cell->property_details()",
          "new_text": "static_cast<uint32_t>(number)",
          "old_line_content": "        property_details_ = cell->property_details();",
          "new_line_content": "        number_ = static_cast<uint32_t>(number);",
          "content_same": false
        },
        {
          "line": 88,
          "old_api": "is_dictionary_map",
          "new_api": "ValueAt",
          "old_text": "map->is_dictionary_map()",
          "new_text": "dict->ValueAt(number_)->IsPropertyCell()",
          "old_line_content": "      } else if (map->is_dictionary_map()) {",
          "new_line_content": "        DCHECK(dict->ValueAt(number_)->IsPropertyCell());",
          "content_same": false
        },
        {
          "line": 89,
          "old_api": "property_dictionary",
          "new_api": "ValueAt",
          "old_text": "JSObject::cast(holder)->property_dictionary()",
          "new_text": "dict->ValueAt(number_)",
          "old_line_content": "        NameDictionary* dict = JSObject::cast(holder)->property_dictionary();",
          "new_line_content": "        PropertyCell* cell = PropertyCell::cast(dict->ValueAt(number_));",
          "content_same": false
        },
        {
          "line": 90,
          "old_api": "FindEntry",
          "new_api": "value",
          "old_text": "dict->FindEntry(name_)",
          "new_text": "cell->value()->IsTheHole()",
          "old_line_content": "        int number = dict->FindEntry(name_);",
          "new_line_content": "        if (cell->value()->IsTheHole()) return NOT_FOUND;",
          "content_same": false
        },
        {
          "line": 92,
          "old_api": "static_cast<uint32_t>(number)",
          "new_api": "is_dictionary_map",
          "old_text": "static_cast<uint32_t>(number)",
          "new_text": "map->is_dictionary_map()",
          "old_line_content": "        number_ = static_cast<uint32_t>(number);",
          "new_line_content": "      } else if (map->is_dictionary_map()) {",
          "content_same": false
        },
        {
          "line": 93,
          "old_api": "DetailsAt",
          "new_api": "property_dictionary",
          "old_text": "dict->DetailsAt(number_)",
          "new_text": "JSObject::cast(holder)->property_dictionary()",
          "old_line_content": "        property_details_ = dict->DetailsAt(number_);",
          "new_line_content": "        NameDictionary* dict = JSObject::cast(holder)->property_dictionary();",
          "content_same": false
        },
        {
          "line": 96,
          "old_api": "SearchWithCache",
          "new_api": "static_cast<uint32_t>(number)",
          "old_text": "descriptors->SearchWithCache(*name_, map)",
          "new_text": "static_cast<uint32_t>(number)",
          "old_line_content": "        int number = descriptors->SearchWithCache(*name_, map);",
          "new_line_content": "        number_ = static_cast<uint32_t>(number);",
          "content_same": false
        },
        {
          "line": 99,
          "old_api": "GetDetails",
          "new_api": "instance_descriptors",
          "old_text": "descriptors->GetDetails(number_)",
          "new_text": "map->instance_descriptors()",
          "old_line_content": "        property_details_ = descriptors->GetDetails(number_);",
          "new_line_content": "        DescriptorArray* descriptors = map->instance_descriptors();",
          "content_same": false
        },
        {
          "line": 102,
          "old_api": "kind",
          "new_api": "static_cast<uint32_t>(number)",
          "old_text": "property_details_.kind()",
          "new_text": "static_cast<uint32_t>(number)",
          "old_line_content": "      switch (property_details_.kind()) {",
          "new_line_content": "        number_ = static_cast<uint32_t>(number);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 129,
          "old_api": null,
          "new_api": "HasInterceptor",
          "old_text": null,
          "new_text": "HasInterceptor(map)",
          "old_line_content": "    // Fall through.",
          "new_line_content": "      if (check_interceptor() && HasInterceptor(map) &&",
          "content_same": false
        },
        {
          "line": 130,
          "old_api": null,
          "new_api": "JSObject::cast(holder)",
          "old_text": null,
          "new_text": "JSObject::cast(holder)",
          "old_line_content": "    default:",
          "new_line_content": "          !SkipInterceptor(JSObject::cast(holder))) {",
          "content_same": false
        },
        {
          "line": 97,
          "old_api": null,
          "new_api": "DetailsAt",
          "old_text": null,
          "new_text": "dict->DetailsAt(number_)",
          "old_line_content": "        if (number == DescriptorArray::kNotFound) return NOT_FOUND;",
          "new_line_content": "        property_details_ = dict->DetailsAt(number_);",
          "content_same": false
        },
        {
          "line": 100,
          "old_api": null,
          "new_api": "SearchWithCache",
          "old_text": null,
          "new_text": "descriptors->SearchWithCache(*name_, map)",
          "old_line_content": "      }",
          "new_line_content": "        int number = descriptors->SearchWithCache(*name_, map);",
          "content_same": false
        },
        {
          "line": 103,
          "old_api": null,
          "new_api": "GetDetails",
          "old_text": null,
          "new_text": "descriptors->GetDetails(number_)",
          "old_line_content": "        case v8::internal::kData:",
          "new_line_content": "        property_details_ = descriptors->GetDetails(number_);",
          "content_same": false
        },
        {
          "line": 137,
          "old_api": null,
          "new_api": "UNREACHABLE",
          "old_text": null,
          "new_text": "UNREACHABLE()",
          "old_line_content": "}  // namespace v8::internal",
          "new_line_content": "  UNREACHABLE();",
          "content_same": false
        },
        {
          "line": 74,
          "old_api": null,
          "new_api": "elements",
          "old_text": null,
          "new_text": "js_object->elements()",
          "old_line_content": "              ABSENT) {",
          "new_line_content": "          FixedArrayBase* backing_store = js_object->elements();",
          "content_same": false
        },
        {
          "line": 75,
          "old_api": null,
          "new_api": "GetIndexForKey",
          "old_text": null,
          "new_text": "accessor->GetIndexForKey(backing_store, index_)",
          "old_line_content": "            return NOT_FOUND;",
          "new_line_content": "          number_ = accessor->GetIndexForKey(backing_store, index_);",
          "content_same": false
        },
        {
          "line": 106,
          "old_api": null,
          "new_api": "kind",
          "old_text": null,
          "new_text": "property_details_.kind()",
          "old_line_content": "          return ACCESSOR;",
          "new_line_content": "      switch (property_details_.kind()) {",
          "content_same": false
        },
        {
          "line": 118,
          "old_api": null,
          "new_api": "UNREACHABLE",
          "old_text": null,
          "new_text": "UNREACHABLE()",
          "old_line_content": "}",
          "new_line_content": "      UNREACHABLE();",
          "content_same": false
        },
        {
          "line": 120,
          "old_api": null,
          "new_api": "UNREACHABLE",
          "old_text": null,
          "new_text": "UNREACHABLE()",
          "old_line_content": "",
          "new_line_content": "  UNREACHABLE();",
          "content_same": false
        },
        {
          "line": 91,
          "old_api": null,
          "new_api": "property_details",
          "old_text": null,
          "new_text": "cell->property_details()",
          "old_line_content": "        if (number == NameDictionary::kNotFound) return NOT_FOUND;",
          "new_line_content": "        property_details_ = cell->property_details();",
          "content_same": false
        },
        {
          "line": 94,
          "old_api": null,
          "new_api": "FindEntry",
          "old_text": null,
          "new_text": "dict->FindEntry(name_)",
          "old_line_content": "      } else {",
          "new_line_content": "        int number = dict->FindEntry(name_);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 98,
          "old_api": "static_cast<uint32_t>(number)",
          "new_api": null,
          "old_text": "static_cast<uint32_t>(number)",
          "new_text": null,
          "old_line_content": "        number_ = static_cast<uint32_t>(number);",
          "new_line_content": "      } else {",
          "content_same": false
        },
        {
          "line": 133,
          "old_api": "UNREACHABLE",
          "new_api": null,
          "old_text": "UNREACHABLE()",
          "new_text": null,
          "old_line_content": "  UNREACHABLE();",
          "new_line_content": "    // Fall through.",
          "content_same": false
        },
        {
          "line": 70,
          "old_api": "elements",
          "new_api": null,
          "old_text": "js_object->elements()",
          "new_text": null,
          "old_line_content": "          FixedArrayBase* backing_store = js_object->elements();",
          "new_line_content": "            return NOT_FOUND;",
          "content_same": false
        },
        {
          "line": 71,
          "old_api": "GetIndexForKey",
          "new_api": null,
          "old_text": "accessor->GetIndexForKey(backing_store, index_)",
          "new_text": null,
          "old_line_content": "          number_ = accessor->GetIndexForKey(backing_store, index_);",
          "new_line_content": "          }",
          "content_same": false
        },
        {
          "line": 79,
          "old_api": "IsGlobalObject",
          "new_api": null,
          "old_text": "holder->IsGlobalObject()",
          "new_text": null,
          "old_line_content": "      } else if (holder->IsGlobalObject()) {",
          "new_line_content": "            return NOT_FOUND;",
          "content_same": false
        },
        {
          "line": 80,
          "old_api": "global_dictionary",
          "new_api": null,
          "old_text": "JSObject::cast(holder)->global_dictionary()",
          "new_text": null,
          "old_line_content": "        GlobalDictionary* dict = JSObject::cast(holder)->global_dictionary();",
          "new_line_content": "          }",
          "content_same": false
        },
        {
          "line": 114,
          "old_api": "UNREACHABLE",
          "new_api": null,
          "old_text": "UNREACHABLE()",
          "new_text": null,
          "old_line_content": "      UNREACHABLE();",
          "new_line_content": "      return NOT_FOUND;",
          "content_same": false
        },
        {
          "line": 116,
          "old_api": "UNREACHABLE",
          "new_api": null,
          "old_text": "UNREACHABLE()",
          "new_text": null,
          "old_line_content": "  UNREACHABLE();",
          "new_line_content": "    case JSPROXY:",
          "content_same": false
        },
        {
          "line": 86,
          "old_api": "value",
          "new_api": null,
          "old_text": "cell->value()->IsTheHole()",
          "new_text": null,
          "old_line_content": "        if (cell->value()->IsTheHole()) return NOT_FOUND;",
          "new_line_content": "        if (number == GlobalDictionary::kNotFound) return NOT_FOUND;",
          "content_same": false
        },
        {
          "line": 125,
          "old_api": "HasInterceptor",
          "new_api": null,
          "old_text": "HasInterceptor(map)",
          "new_text": null,
          "old_line_content": "      if (check_interceptor() && HasInterceptor(map) &&",
          "new_line_content": "LookupIterator::State LookupIterator::LookupNonMaskingInterceptorInHolder(",
          "content_same": false
        },
        {
          "line": 126,
          "old_api": "JSObject::cast(holder)",
          "new_api": null,
          "old_text": "JSObject::cast(holder)",
          "new_text": null,
          "old_line_content": "          !SkipInterceptor(JSObject::cast(holder))) {",
          "new_line_content": "    Map* const map, JSReceiver* const holder) {",
          "content_same": false
        },
        {
          "line": 95,
          "old_api": "instance_descriptors",
          "new_api": null,
          "old_text": "map->instance_descriptors()",
          "new_text": null,
          "old_line_content": "        DescriptorArray* descriptors = map->instance_descriptors();",
          "new_line_content": "        if (number == NameDictionary::kNotFound) return NOT_FOUND;",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 16,
      "total_additions": 13,
      "total_deletions": 12,
      "total_api_changes": 41
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 4,
        "api_related_lines": 41,
        "non_api_lines": 1,
        "non_api_line_numbers": [
          72
        ]
      }
    },
    "api_calls_before": 66,
    "api_calls_after": 70,
    "diff_info": {
      "added_lines": 4,
      "removed_lines": 0,
      "total_diff_lines": 16
    }
  }
}
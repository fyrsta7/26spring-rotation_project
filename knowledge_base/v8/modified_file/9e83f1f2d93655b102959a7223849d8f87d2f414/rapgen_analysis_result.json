{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/v8/modified_file/9e83f1f2d93655b102959a7223849d8f87d2f414",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/v8/modified_file/9e83f1f2d93655b102959a7223849d8f87d2f414/before.cc",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/v8/modified_file/9e83f1f2d93655b102959a7223849d8f87d2f414/after.cc",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/v8/modified_file/9e83f1f2d93655b102959a7223849d8f87d2f414/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 288,
          "old_api": "(&string_fast_call);",
          "new_api": "(&string_maybe_fast_call);",
          "old_text": "(&string_fast_call);\n  ",
          "new_text": "(&string_maybe_fast_call);\n  ",
          "old_line_content": "    BIND(&string_fast_call);",
          "new_line_content": "    BIND(&string_maybe_fast_call);",
          "content_same": false
        },
        {
          "line": 289,
          "old_api": "Builtin",
          "new_api": "(iterable));",
          "old_text": "Builtin(Builtins::kStringToList, context, iterable);\n  ",
          "new_text": "(iterable));\n ",
          "old_line_content": "    *var_result = CallBuiltin(Builtins::kStringToList, context, iterable);",
          "new_line_content": "    TNode<IntPtrT> const length = LoadStringLengthAsWord(CAST(iterable));",
          "content_same": false
        },
        {
          "line": 301,
          "old_api": "(&done);",
          "new_api": "chIfIterableWithOriginalKeyOrValueMapIterator",
          "old_text": "(&done);\n  ",
          "new_text": "chIfIterableWithOriginalKeyOrValueMapIterator(\n        state(), iterable, context, &map_fast_call, &check_set);\n\n ",
          "old_line_content": "    Goto(&done);",
          "new_line_content": "    BranchIfIterableWithOriginalKeyOrValueMapIterator(",
          "content_same": false
        },
        {
          "line": 304,
          "old_api": "(&check_set);",
          "new_api": "(&map_fast_call);",
          "old_text": "(&check_set);\n  ",
          "new_text": "(&map_fast_call);\n  ",
          "old_line_content": "  BIND(&check_set);",
          "new_line_content": "    BIND(&map_fast_call);",
          "content_same": false
        },
        {
          "line": 312,
          "old_api": "Builtin",
          "new_api": "e",
          "old_text": "Builtin(Builtins::kSetOrSetIteratorToList, context, iterable);\n  ",
          "new_text": "e(), it",
          "old_line_content": "        CallBuiltin(Builtins::kSetOrSetIteratorToList, context, iterable);",
          "new_line_content": "    BranchIfIterableWithOriginalValueSetIterator(state(), iterable, context,",
          "content_same": false
        },
        {
          "line": 336,
          "old_api": "IfForceSlowPath",
          "new_api": "meter",
          "old_text": "IfForceSlowPath(&slow_path);\n\n ",
          "new_text": "meter(Descriptor::kContext));\n ",
          "old_line_content": "  GotoIfForceSlowPath(&slow_path);",
          "new_line_content": "  TNode<Context> context = CAST(Parameter(Descriptor::kContext));",
          "content_same": false
        },
        {
          "line": 344,
          "old_api": "teratorMethod",
          "new_api": "IterableToList",
          "old_text": "teratorMethod(context, iterable);\n  ",
          "new_text": "IterableToList(context, iterable, &var_result, &slow_path);\n  ",
          "old_line_content": "    TNode<Object> iterator_fn = GetIteratorMethod(context, iterable);",
          "new_line_content": "  FastIterableToList(context, iterable, &var_result, &slow_path);",
          "content_same": false
        },
        {
          "line": 345,
          "old_api": "CallBuiltin",
          "new_api": "value",
          "old_text": "CallBuiltin(Builtins::kIterableToList, context, iterable, iterator_fn);\n  ",
          "new_text": "result.value());\n\n",
          "old_line_content": "    TailCallBuiltin(Builtins::kIterableToList, context, iterable, iterator_fn);",
          "new_line_content": "  Return(var_result.value());",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 291,
          "old_api": null,
          "new_api": "If",
          "old_text": null,
          "new_text": "If(\n        IntPtrGreaterThan(length, IntPtrConstant(JSArray::kMaxFastArrayLength)),\n        slow);\n  ",
          "old_line_content": "  }",
          "new_line_content": "    GotoIf(",
          "content_same": false
        },
        {
          "line": 292,
          "old_api": null,
          "new_api": "trConstant",
          "old_text": null,
          "new_text": "trConstant(JSArray::kMaxFastArrayLength)),\n ",
          "old_line_content": "",
          "new_line_content": "        IntPtrGreaterThan(length, IntPtrConstant(JSArray::kMaxFastArrayLength)),",
          "content_same": false
        },
        {
          "line": 294,
          "old_api": null,
          "new_api": "Builtin",
          "old_text": null,
          "new_text": "Builtin(Builtins::kStringToList, context, iterable);\n  ",
          "old_line_content": "  {",
          "new_line_content": "    *var_result = CallBuiltin(Builtins::kStringToList, context, iterable);",
          "content_same": false
        },
        {
          "line": 295,
          "old_api": null,
          "new_api": "(&done);",
          "old_text": null,
          "new_text": "(&done);\n  ",
          "old_line_content": "    Label map_fast_call(this);",
          "new_line_content": "    Goto(&done);",
          "content_same": false
        },
        {
          "line": 298,
          "old_api": null,
          "new_api": "(&check_map);",
          "old_text": null,
          "new_text": "(&check_map);\n  ",
          "old_line_content": "",
          "new_line_content": "  BIND(&check_map);",
          "content_same": false
        },
        {
          "line": 302,
          "old_api": null,
          "new_api": "e",
          "old_text": null,
          "new_text": "e(), it",
          "old_line_content": "  }",
          "new_line_content": "        state(), iterable, context, &map_fast_call, &check_set);",
          "content_same": false
        },
        {
          "line": 305,
          "old_api": null,
          "new_api": "Builtin",
          "old_text": null,
          "new_text": "Builtin(Builtins::kMapIteratorToList, context, iterable);\n  ",
          "old_line_content": "  {",
          "new_line_content": "    *var_result = CallBuiltin(Builtins::kMapIteratorToList, context, iterable);",
          "content_same": false
        },
        {
          "line": 306,
          "old_api": null,
          "new_api": "(&done);",
          "old_text": null,
          "new_text": "(&done);\n  ",
          "old_line_content": "    Label set_fast_call(this);",
          "new_line_content": "    Goto(&done);",
          "content_same": false
        },
        {
          "line": 309,
          "old_api": null,
          "new_api": "(&check_set);",
          "old_text": null,
          "new_text": "(&check_set);\n  ",
          "old_line_content": "",
          "new_line_content": "  BIND(&check_set);",
          "content_same": false
        },
        {
          "line": 315,
          "old_api": null,
          "new_api": "(&set_fast_call);",
          "old_text": null,
          "new_text": "(&set_fast_call);\n  ",
          "old_line_content": "",
          "new_line_content": "    BIND(&set_fast_call);",
          "content_same": false
        },
        {
          "line": 317,
          "old_api": null,
          "new_api": "Builtin",
          "old_text": null,
          "new_text": "Builtin(Builtins::kSetOrSetIteratorToList, context, iterable);\n  ",
          "old_line_content": "}",
          "new_line_content": "        CallBuiltin(Builtins::kSetOrSetIteratorToList, context, iterable);",
          "content_same": false
        },
        {
          "line": 318,
          "old_api": null,
          "new_api": "(&done);",
          "old_text": null,
          "new_text": "(&done);\n  ",
          "old_line_content": "",
          "new_line_content": "    Goto(&done);",
          "content_same": false
        },
        {
          "line": 321,
          "old_api": null,
          "new_api": "(&done);\n}",
          "old_text": null,
          "new_text": "(&done);\n}\n",
          "old_line_content": "// for map iterators. These fast paths will only be taken if Symbol.iterator and",
          "new_line_content": "  BIND(&done);",
          "content_same": false
        },
        {
          "line": 337,
          "old_api": null,
          "new_api": "meter",
          "old_text": null,
          "new_text": "meter(Descriptor::kIterable));\n\n",
          "old_line_content": "",
          "new_line_content": "  TNode<Object> iterable = CAST(Parameter(Descriptor::kIterable));",
          "content_same": false
        },
        {
          "line": 341,
          "old_api": null,
          "new_api": "IfForceSlowPath",
          "old_text": null,
          "new_text": "IfForceSlowPath(&slow_path);\n\n ",
          "old_line_content": "",
          "new_line_content": "  GotoIfForceSlowPath(&slow_path);",
          "content_same": false
        },
        {
          "line": 343,
          "old_api": null,
          "new_api": "IABLE",
          "old_text": null,
          "new_text": "IABLE(Object, var_result);\n  ",
          "old_line_content": "  {",
          "new_line_content": "  TVARIABLE(Object, var_result);",
          "content_same": false
        },
        {
          "line": 347,
          "old_api": null,
          "new_api": "(&slow_path);",
          "old_text": null,
          "new_text": "(&slow_path);\n  ",
          "old_line_content": "}",
          "new_line_content": "  BIND(&slow_path);",
          "content_same": false
        },
        {
          "line": 349,
          "old_api": null,
          "new_api": "teratorMethod",
          "old_text": null,
          "new_text": "teratorMethod(context, iterable);\n  ",
          "old_line_content": "}  // namespace internal",
          "new_line_content": "    TNode<Object> iterator_fn = GetIteratorMethod(context, iterable);",
          "content_same": false
        },
        {
          "line": 350,
          "old_api": null,
          "new_api": "CallBuiltin",
          "old_text": null,
          "new_text": "CallBuiltin(Builtins::kIterableToList, context, iterable, iterator_fn);\n  ",
          "old_line_content": "}  // namespace v8",
          "new_line_content": "    TailCallBuiltin(Builtins::kIterableToList, context, iterable, iterator_fn);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 290,
          "old_api": "(&done);",
          "new_api": null,
          "old_text": "(&done);\n  ",
          "new_text": null,
          "old_line_content": "    Goto(&done);",
          "new_line_content": "    // Use string length as conservative approximation of number of codepoints.",
          "content_same": false
        },
        {
          "line": 293,
          "old_api": "(&check_map);",
          "new_api": null,
          "old_text": "(&check_map);\n  ",
          "new_text": null,
          "old_line_content": "  BIND(&check_map);",
          "new_line_content": "        slow);",
          "content_same": false
        },
        {
          "line": 296,
          "old_api": "chIfIterableWithOriginalKeyOrValueMapIterator",
          "new_api": null,
          "old_text": "chIfIterableWithOriginalKeyOrValueMapIterator(\n        state(), iterable, context, &map_fast_call, &check_set);\n\n ",
          "new_text": null,
          "old_line_content": "    BranchIfIterableWithOriginalKeyOrValueMapIterator(",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 297,
          "old_api": "e",
          "new_api": null,
          "old_text": "e(), it",
          "new_text": null,
          "old_line_content": "        state(), iterable, context, &map_fast_call, &check_set);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 299,
          "old_api": "(&map_fast_call);",
          "new_api": null,
          "old_text": "(&map_fast_call);\n  ",
          "new_text": null,
          "old_line_content": "    BIND(&map_fast_call);",
          "new_line_content": "  {",
          "content_same": false
        },
        {
          "line": 300,
          "old_api": "Builtin",
          "new_api": null,
          "old_text": "Builtin(Builtins::kMapIteratorToList, context, iterable);\n  ",
          "new_text": null,
          "old_line_content": "    *var_result = CallBuiltin(Builtins::kMapIteratorToList, context, iterable);",
          "new_line_content": "    Label map_fast_call(this);",
          "content_same": false
        },
        {
          "line": 331,
          "old_api": "meter",
          "new_api": null,
          "old_text": "meter(Descriptor::kContext));\n ",
          "new_text": null,
          "old_line_content": "  TNode<Context> context = CAST(Parameter(Descriptor::kContext));",
          "new_line_content": "//   correct when the NoElements protector is valid.",
          "content_same": false
        },
        {
          "line": 332,
          "old_api": "meter",
          "new_api": null,
          "old_text": "meter(Descriptor::kIterable));\n\n",
          "new_text": null,
          "old_line_content": "  TNode<Object> iterable = CAST(Parameter(Descriptor::kIterable));",
          "new_line_content": "// * In case of map/set iterators, there is an additional requirement that the",
          "content_same": false
        },
        {
          "line": 338,
          "old_api": "IABLE",
          "new_api": null,
          "old_text": "IABLE(Object, var_result);\n  ",
          "new_text": null,
          "old_line_content": "  TVARIABLE(Object, var_result);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 307,
          "old_api": "e",
          "new_api": null,
          "old_text": "e(), it",
          "new_text": null,
          "old_line_content": "    BranchIfIterableWithOriginalValueSetIterator(state(), iterable, context,",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 339,
          "old_api": "IterableToList",
          "new_api": null,
          "old_text": "IterableToList(context, iterable, &var_result, &slow_path);\n  ",
          "new_text": null,
          "old_line_content": "  FastIterableToList(context, iterable, &var_result, &slow_path);",
          "new_line_content": "  Label slow_path(this);",
          "content_same": false
        },
        {
          "line": 340,
          "old_api": "value",
          "new_api": null,
          "old_text": "result.value());\n\n",
          "new_text": null,
          "old_line_content": "  Return(var_result.value());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 310,
          "old_api": "(&set_fast_call);",
          "new_api": null,
          "old_text": "(&set_fast_call);\n  ",
          "new_text": null,
          "old_line_content": "    BIND(&set_fast_call);",
          "new_line_content": "  {",
          "content_same": false
        },
        {
          "line": 342,
          "old_api": "(&slow_path);",
          "new_api": null,
          "old_text": "(&slow_path);\n  ",
          "new_text": null,
          "old_line_content": "  BIND(&slow_path);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 313,
          "old_api": "(&done);",
          "new_api": null,
          "old_text": "(&done);\n  ",
          "new_text": null,
          "old_line_content": "    Goto(&done);",
          "new_line_content": "                                                 &set_fast_call, slow);",
          "content_same": false
        },
        {
          "line": 316,
          "old_api": "(&done);\n}",
          "new_api": null,
          "old_text": "(&done);\n}\n",
          "new_text": null,
          "old_line_content": "  BIND(&done);",
          "new_line_content": "    *var_result =",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 8,
      "total_additions": 19,
      "total_deletions": 16,
      "total_api_changes": 43
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 9,
        "api_related_lines": 43,
        "non_api_lines": 3,
        "non_api_line_numbers": [
          283,
          286,
          287
        ]
      }
    },
    "api_calls_before": 169,
    "api_calls_after": 174,
    "diff_info": {
      "added_lines": 9,
      "removed_lines": 4,
      "total_diff_lines": 27
    }
  }
}
{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/mongo/modified_file/0d947ded807a54c6cae10a7227346c69f71e07c0",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/mongo/modified_file/0d947ded807a54c6cae10a7227346c69f71e07c0/before.cpp",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/mongo/modified_file/0d947ded807a54c6cae10a7227346c69f71e07c0/after.cpp",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/mongo/modified_file/0d947ded807a54c6cae10a7227346c69f71e07c0/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 282,
          "old_api": "toString",
          "new_api": "advance",
          "old_text": "e.toString()",
          "new_text": "cursor->advance()",
          "old_line_content": "            exceptionInfo = e.toString();",
          "new_line_content": "                cursor->advance();",
          "content_same": false
        },
        {
          "line": 288,
          "old_api": "log",
          "new_api": "toString",
          "old_text": "log()",
          "new_text": "e.toString()",
          "old_line_content": "        log() << \"Count with ns: \" << ns << \" and query: \" << query",
          "new_line_content": "            exceptionInfo = e.toString();",
          "content_same": false
        },
        {
          "line": 307,
          "old_api": "prettyIndexBounds",
          "new_api": "get",
          "old_text": "c->prettyIndexBounds()",
          "new_text": "_a.get()",
          "old_line_content": "            b << \"cursor\" << c->toString() << \"indexBounds\" << c->prettyIndexBounds();",
          "new_line_content": "            if ( !_a.get() ) {",
          "content_same": false
        },
        {
          "line": 308,
          "old_api": "done",
          "new_api": "reset",
          "old_text": "b.done()",
          "new_text": "_a.reset( new BSONArrayBuilder() )",
          "old_line_content": "            b.done();",
          "new_line_content": "                _a.reset( new BSONArrayBuilder() );",
          "content_same": false
        },
        {
          "line": 313,
          "old_api": "reset",
          "new_api": "prettyIndexBounds",
          "old_text": "_c.reset( new BSONArrayBuilder() )",
          "new_text": "c->prettyIndexBounds()",
          "old_line_content": "                _c.reset( new BSONArrayBuilder() );",
          "new_line_content": "            b << \"cursor\" << c->toString() << \"indexBounds\" << c->prettyIndexBounds();",
          "content_same": false
        },
        {
          "line": 314,
          "old_api": "obj",
          "new_api": "done",
          "old_text": "_b->obj()",
          "new_text": "b.done()",
          "old_line_content": "                *_c << _b->obj();",
          "new_line_content": "            b.done();",
          "content_same": false
        },
        {
          "line": 320,
          "old_api": "subobjStart",
          "new_api": "obj",
          "old_text": "_c->subobjStart()",
          "new_text": "_b->obj()",
          "old_line_content": "                _b.reset( new BSONObjBuilder( _c->subobjStart() ) );",
          "new_line_content": "                *_c << _b->obj();",
          "content_same": false
        },
        {
          "line": 323,
          "old_api": "appendNumber",
          "new_api": "reset",
          "old_text": "_b->appendNumber( \"nscanned\", nscanned )",
          "new_text": "_b.reset( new BSONObjBuilder() )",
          "old_line_content": "            _b->appendNumber( \"nscanned\", nscanned );",
          "new_line_content": "                _b.reset( new BSONObjBuilder() );",
          "content_same": false
        },
        {
          "line": 345,
          "old_api": "done",
          "new_api": "explainDetails",
          "old_text": "_b->done()",
          "new_text": "c->explainDetails( *_b )",
          "old_line_content": "                _b->done();",
          "new_line_content": "            c->explainDetails( *_b );",
          "content_same": false
        },
        {
          "line": 353,
          "old_api": "arr",
          "new_api": "reset",
          "old_text": "_c->arr()",
          "new_text": "_a.reset( 0 )",
          "old_line_content": "                b << \"clauses\" << _c->arr();",
          "new_line_content": "            _a.reset( 0 );",
          "content_same": false
        },
        {
          "line": 359,
          "old_api": "obj",
          "new_api": "arr",
          "old_text": "b.obj()",
          "new_text": "_c->arr()",
          "old_line_content": "                return b.obj();",
          "new_line_content": "                b << \"clauses\" << _c->arr();",
          "content_same": false
        },
        {
          "line": 364,
          "old_api": "str",
          "new_api": "appendElements",
          "old_text": "host.str()",
          "new_text": "b.appendElements( suffix )",
          "old_line_content": "            \t*_b << \"server\" << host.str();",
          "new_line_content": "                b.appendElements( suffix );",
          "content_same": false
        },
        {
          "line": 365,
          "old_api": "appendElements",
          "new_api": "obj",
          "old_text": "_b->appendElements( suffix )",
          "new_text": "b.obj()",
          "old_line_content": "                _b->appendElements( suffix );",
          "new_line_content": "                return b.obj();",
          "content_same": false
        },
        {
          "line": 389,
          "old_api": "ns",
          "new_api": "getSkip",
          "old_text": "pq.ns()",
          "new_text": "pq.getSkip()",
          "old_line_content": "            _chunkManager( shardingState.needShardChunkManager(pq.ns()) ?",
          "new_line_content": "            _ntoskip( pq.getSkip() ) ,",
          "content_same": false
        },
        {
          "line": 395,
          "old_api": "hasOption",
          "new_api": "ns",
          "old_text": "pq.hasOption( QueryOption_OplogReplay)",
          "new_text": "pq.ns()",
          "old_line_content": "            _oplogReplay( pq.hasOption( QueryOption_OplogReplay) ),",
          "new_line_content": "            _chunkManager( shardingState.needShardChunkManager(pq.ns()) ?",
          "content_same": false
        },
        {
          "line": 424,
          "old_api": "multikeyFrs",
          "new_api": "indexKeyPattern",
          "old_text": "qp().multikeyFrs()",
          "new_text": "_c->indexKeyPattern()",
          "old_line_content": "                _so.reset( new ScanAndOrder( _pq.getSkip() , _pq.getNumToReturn() , _pq.getOrder(), qp().multikeyFrs() ) );",
          "new_line_content": "                    _keyFieldsOnly.reset( _pq.getFields()->checkKey( _c->indexKeyPattern() ) );",
          "content_same": false
        },
        {
          "line": 428,
          "old_api": "get",
          "new_api": "scanAndOrderRequired",
          "old_text": "_c.get()",
          "new_text": "qp().scanAndOrderRequired()",
          "old_line_content": "                _eb.noteCursor( _c.get() );",
          "new_line_content": "            if ( qp().scanAndOrderRequired() ) {",
          "content_same": false
        },
        {
          "line": 458,
          "old_api": "reset",
          "new_api": "get",
          "old_text": "_cc.reset()",
          "new_text": "_findingStartCursor.get()",
          "old_line_content": "                _cc.reset();",
          "new_line_content": "            if ( _findingStartCursor.get() ) {",
          "content_same": false
        },
        {
          "line": 459,
          "old_api": "reset",
          "new_api": "recoverFromYield",
          "old_text": "_so.reset()",
          "new_text": "_findingStartCursor->recoverFromYield()",
          "old_line_content": "                _so.reset();",
          "new_line_content": "                _findingStartCursor->recoverFromYield();",
          "content_same": false
        },
        {
          "line": 464,
          "old_api": "mustAssertOnYieldFailure",
          "new_api": "reset",
          "old_text": "qp().mustAssertOnYieldFailure()",
          "new_text": "_cc.reset()",
          "old_line_content": "                else if ( qp().mustAssertOnYieldFailure() ) {",
          "new_line_content": "                _cc.reset();",
          "content_same": false
        },
        {
          "line": 465,
          "old_api": "ns",
          "new_api": "reset",
          "old_text": "_pq.ns()",
          "new_text": "_so.reset()",
          "old_line_content": "                    msgassertedNoTrace( 15890, str::stream() << \"UserQueryOp::recoverFromYield() failed to recover: \" << _pq.ns() );",
          "new_line_content": "                _so.reset();",
          "content_same": false
        },
        {
          "line": 486,
          "old_api": "next",
          "new_api": "nscanned",
          "old_text": "_findingStartCursor->next()",
          "new_text": "_c->nscanned()",
          "old_line_content": "                    _findingStartCursor->next();",
          "new_line_content": "            return _c.get() ? _c->nscanned() : _nscanned;",
          "content_same": false
        },
        {
          "line": 490,
          "old_api": "reset",
          "new_api": "get",
          "old_text": "_findingStartCursor.reset( 0 )",
          "new_text": "_findingStartCursor.get()",
          "old_line_content": "                    _findingStartCursor.reset( 0 );",
          "new_line_content": "            if ( _findingStartCursor.get() ) {",
          "content_same": false
        },
        {
          "line": 496,
          "old_api": "ok",
          "new_api": "reset",
          "old_text": "_c->ok()",
          "new_text": "_findingStartCursor.reset( 0 )",
          "old_line_content": "            if ( !_c || !_c->ok() ) {",
          "new_line_content": "                    _findingStartCursor.reset( 0 );",
          "content_same": false
        },
        {
          "line": 507,
          "old_api": "getMaxScan",
          "new_api": "getNumToReturn",
          "old_text": "_pq.getMaxScan()",
          "new_text": "_pq.getNumToReturn()",
          "old_line_content": "            if ( _pq.getMaxScan() && _nscanned >= _pq.getMaxScan() ) {",
          "new_line_content": "            bool mayCreateCursor1 = _pq.wantMore() && ! _inMemSort && _pq.getNumToReturn() != 1 && useCursors;",
          "content_same": false
        },
        {
          "line": 513,
          "old_api": "get",
          "new_api": "getMaxScan",
          "old_text": "_c.get()",
          "new_text": "_pq.getMaxScan()",
          "old_line_content": "            if ( !matcher( _c )->matchesCurrent(_c.get() , &_details ) ) {",
          "new_line_content": "            if ( _pq.getMaxScan() && _nscanned >= _pq.getMaxScan() ) {",
          "content_same": false
        },
        {
          "line": 539,
          "old_api": "isExplain",
          "new_api": "showDiskLoc",
          "old_text": "_pq.isExplain()",
          "new_text": "_pq.showDiskLoc()",
          "old_line_content": "                        if ( _pq.isExplain() ) {",
          "new_line_content": "                        _so->add( _pq.returnKey() ? _c->currKey() : _c->current(), _pq.showDiskLoc() ? &cl : 0 );",
          "content_same": false
        },
        {
          "line": 549,
          "old_api": "returnKey",
          "new_api": "finish",
          "old_text": "_pq.returnKey()",
          "new_text": "finish( true )",
          "old_line_content": "                            if ( _pq.returnKey() ) {",
          "new_line_content": "                                finish( true ); //?",
          "content_same": false
        },
        {
          "line": 555,
          "old_api": "currKey",
          "new_api": "returnKey",
          "old_text": "_c->currKey()",
          "new_text": "_pq.returnKey()",
          "old_line_content": "                                fillQueryResultFromObj( _buf , 0 , _keyFieldsOnly->hydrate( _c->currKey() ) );",
          "new_line_content": "                            if ( _pq.returnKey() ) {",
          "content_same": false
        },
        {
          "line": 558,
          "old_api": "current",
          "new_api": "done",
          "old_text": "_c->current()",
          "new_text": "bb.done()",
          "old_line_content": "                                BSONObj js = _c->current();",
          "new_line_content": "                                bb.done();",
          "content_same": false
        },
        {
          "line": 564,
          "old_api": "_opTime",
          "new_api": "current",
          "old_text": "e._opTime()",
          "new_text": "_c->current()",
          "old_line_content": "                                        _slaveReadTill = e._opTime();",
          "new_line_content": "                                BSONObj js = _c->current();",
          "content_same": false
        },
        {
          "line": 570,
          "old_api": "supportGetMore",
          "new_api": "_opTime",
          "old_text": "_c->supportGetMore()",
          "new_text": "e._opTime()",
          "old_line_content": "                            if ( ! _c->supportGetMore() ) {",
          "new_line_content": "                                        _slaveReadTill = e._opTime();",
          "content_same": false
        },
        {
          "line": 576,
          "old_api": "len",
          "new_api": "supportGetMore",
          "old_text": "_buf.len()",
          "new_text": "_c->supportGetMore()",
          "old_line_content": "                            else if ( _pq.enoughForFirstBatch( n() , _buf.len() ) ) {",
          "new_line_content": "                            if ( ! _c->supportGetMore() ) {",
          "content_same": false
        },
        {
          "line": 610,
          "old_api": "getNumToReturn",
          "new_api": "getFields",
          "old_text": "_pq.getNumToReturn()",
          "new_text": "_pq.getFields()",
          "old_line_content": "                if ( _pq.hasOption( QueryOption_CursorTailable ) && _pq.getNumToReturn() != 1 )",
          "new_line_content": "                    _so->fill( _buf, _pq.getFields() , _n );",
          "content_same": false
        },
        {
          "line": 614,
          "old_api": "tailable",
          "new_api": "nscanned",
          "old_text": "_c->tailable()",
          "new_text": "_c->nscanned()",
          "old_line_content": "                if ( _c->tailable() )",
          "new_line_content": "                _nscanned = _c->nscanned();",
          "content_same": false
        },
        {
          "line": 620,
          "old_api": "getHint",
          "new_api": "tailable",
          "old_text": "_pq.getHint().eoo()",
          "new_text": "_c->tailable()",
          "old_line_content": "                              _curop.elapsedMillis(), useHints && !_pq.getHint().eoo(), _nYields ,",
          "new_line_content": "                if ( _c->tailable() )",
          "content_same": false
        },
        {
          "line": 624,
          "old_api": "len",
          "new_api": "isExplain",
          "old_text": "_buf.len()",
          "new_text": "_pq.isExplain()",
          "old_line_content": "                if ( _buf.len() ) {",
          "new_line_content": "            if ( _pq.isExplain() ) {",
          "content_same": false
        },
        {
          "line": 625,
          "old_api": "len",
          "new_api": "scanAndOrderRequired",
          "old_text": "_buf.len()",
          "new_text": "scanAndOrderRequired()",
          "old_line_content": "                    _response.appendData( _buf.buf(), _buf.len() );",
          "new_line_content": "                _eb.noteScan( _c.get(), _nscanned, _nscannedObjects, _n, scanAndOrderRequired(),",
          "content_same": false
        },
        {
          "line": 626,
          "old_api": "decouple",
          "new_api": "getHint",
          "old_text": "_buf.decouple()",
          "new_text": "_pq.getHint().eoo()",
          "old_line_content": "                    _buf.decouple();",
          "new_line_content": "                              _curop.elapsedMillis(), useHints && !_pq.getHint().eoo(), _nYields ,",
          "content_same": false
        },
        {
          "line": 631,
          "old_api": "setStop",
          "new_api": "len",
          "old_text": "setStop()",
          "new_text": "_buf.len()",
          "old_line_content": "                setStop();",
          "new_line_content": "                    _response.appendData( _buf.buf(), _buf.len() );",
          "content_same": false
        },
        {
          "line": 640,
          "old_api": "elapsedMillis",
          "new_api": "setComplete",
          "old_text": "_curop.elapsedMillis()",
          "new_text": "setComplete()",
          "old_line_content": "            BSONObj obj = _eb.finishWithSuffix( totalNscanned(), nscannedObjects(), n(), _curop.elapsedMillis(), suffix);",
          "new_line_content": "                setComplete();",
          "content_same": false
        },
        {
          "line": 659,
          "old_api": "nscannedObjects",
          "new_api": "isExplain",
          "old_text": "nscannedObjects()",
          "new_text": "_pq.isExplain()",
          "old_line_content": "            ret->_oldNscannedObjects = nscannedObjects();",
          "new_line_content": "            if ( _pq.isExplain() ) {",
          "content_same": false
        },
        {
          "line": 739,
          "old_api": "couldBeCommand",
          "new_api": "log",
          "old_text": "pq.couldBeCommand()",
          "new_text": "log()",
          "old_line_content": "        if ( pq.couldBeCommand() ) {",
          "new_line_content": "            log() << \"runQuery called \" << ns << \" \" << jsobj << endl;",
          "content_same": false
        },
        {
          "line": 741,
          "old_api": "skip",
          "new_api": "debug",
          "old_text": "bb.skip(sizeof(QueryResult))",
          "new_text": "curop.debug()",
          "old_line_content": "            bb.skip(sizeof(QueryResult));",
          "new_line_content": "        curop.debug().ns = ns;",
          "content_same": false
        },
        {
          "line": 743,
          "old_api": "runCommands",
          "new_api": "setQuery",
          "old_text": "runCommands(ns, jsobj, curop, bb, cmdResBuf, false, queryOptions)",
          "new_text": "curop.setQuery(jsobj)",
          "old_line_content": "            if ( runCommands(ns, jsobj, curop, bb, cmdResBuf, false, queryOptions) ) {",
          "new_line_content": "        curop.setQuery(jsobj);",
          "content_same": false
        },
        {
          "line": 745,
          "old_api": "debug",
          "new_api": "couldBeCommand",
          "old_text": "curop.debug()",
          "new_text": "pq.couldBeCommand()",
          "old_line_content": "                curop.debug().query = jsobj;",
          "new_line_content": "        if ( pq.couldBeCommand() ) {",
          "content_same": false
        },
        {
          "line": 749,
          "old_api": "buf",
          "new_api": "runCommands",
          "old_text": "bb.buf()",
          "new_text": "runCommands(ns, jsobj, curop, bb, cmdResBuf, false, queryOptions)",
          "old_line_content": "                qr.reset( (QueryResult *) bb.buf() );",
          "new_line_content": "            if ( runCommands(ns, jsobj, curop, bb, cmdResBuf, false, queryOptions) ) {",
          "content_same": false
        },
        {
          "line": 750,
          "old_api": "decouple",
          "new_api": "debug",
          "old_text": "bb.decouple()",
          "new_text": "curop.debug()",
          "old_line_content": "                bb.decouple();",
          "new_line_content": "                curop.debug().iscommand = true;",
          "content_same": false
        },
        {
          "line": 751,
          "old_api": "setResultFlagsToOk",
          "new_api": "debug",
          "old_text": "qr->setResultFlagsToOk()",
          "new_text": "curop.debug()",
          "old_line_content": "                qr->setResultFlagsToOk();",
          "new_line_content": "                curop.debug().query = jsobj;",
          "content_same": false
        },
        {
          "line": 752,
          "old_api": "len",
          "new_api": "markCommand",
          "old_text": "bb.len()",
          "new_text": "curop.markCommand()",
          "old_line_content": "                qr->len = bb.len();",
          "new_line_content": "                curop.markCommand();",
          "content_same": false
        },
        {
          "line": 758,
          "old_api": "release",
          "new_api": "len",
          "old_text": "qr.release()",
          "new_text": "bb.len()",
          "old_line_content": "                result.setData( qr.release(), true );",
          "new_line_content": "                qr->len = bb.len();",
          "content_same": false
        },
        {
          "line": 779,
          "old_api": "objsize",
          "new_api": "getFilter",
          "old_text": "query.objsize()",
          "new_text": "pq.getFilter()",
          "old_line_content": "        if ( query.objsize() == 0 ) {",
          "new_line_content": "        BSONObj query = pq.getFilter();",
          "content_same": false
        },
        {
          "line": 788,
          "old_api": "replVerifyReadsOk",
          "new_api": "toString",
          "old_text": "replVerifyReadsOk(pq)",
          "new_text": "query.toString()",
          "old_line_content": "        replVerifyReadsOk(pq);",
          "new_line_content": "            out() << query.toString() << endl;",
          "content_same": false
        },
        {
          "line": 794,
          "old_api": "isEmpty",
          "new_api": "replVerifyReadsOk",
          "old_text": "order.isEmpty()",
          "new_text": "replVerifyReadsOk(pq)",
          "old_line_content": "            if ( order.isEmpty() ) {",
          "new_line_content": "        replVerifyReadsOk(pq);",
          "content_same": false
        },
        {
          "line": 804,
          "old_api": "nsdetails",
          "new_api": "uassert",
          "old_text": "nsdetails(ns)",
          "new_text": "uassert( 13052, \"only {$natural:1} order allowed for tailable cursor\", order == nat1 )",
          "old_line_content": "            NamespaceDetails *d = nsdetails(ns);",
          "new_line_content": "                uassert( 13052, \"only {$natural:1} order allowed for tailable cursor\", order == nat1 );",
          "content_same": false
        },
        {
          "line": 824,
          "old_api": "hasOption",
          "new_api": "obj",
          "old_text": "pq.hasOption( QueryOption_CursorTailable )",
          "new_text": "b.obj()",
          "old_line_content": "        if ( ! (explain || pq.showDiskLoc()) && isSimpleIdQuery( query ) && !pq.hasOption( QueryOption_CursorTailable ) ) {",
          "new_line_content": "                    snapshotHint = b.obj();",
          "content_same": false
        },
        {
          "line": 830,
          "old_api": "cc",
          "new_api": "hasOption",
          "old_text": "cc()",
          "new_text": "pq.hasOption( QueryOption_CursorTailable )",
          "old_line_content": "            Client& c = cc();",
          "new_line_content": "        if ( ! (explain || pq.showDiskLoc()) && isSimpleIdQuery( query ) && !pq.hasOption( QueryOption_CursorTailable ) ) {",
          "content_same": false
        },
        {
          "line": 836,
          "old_api": "debug",
          "new_api": "cc",
          "old_text": "curop.debug()",
          "new_text": "cc()",
          "old_line_content": "                curop.debug().idhack = true;",
          "new_line_content": "            Client& c = cc();",
          "content_same": false
        },
        {
          "line": 839,
          "old_api": "getFields",
          "new_api": "objsize",
          "old_text": "pq.getFields()",
          "new_text": "resObject.objsize()",
          "old_line_content": "                    fillQueryResultFromObj( bb , pq.getFields() , resObject );",
          "new_line_content": "                BufBuilder bb(sizeof(QueryResult)+resObject.objsize()+32);",
          "content_same": false
        },
        {
          "line": 842,
          "old_api": "buf",
          "new_api": "debug",
          "old_text": "bb.buf()",
          "new_text": "curop.debug()",
          "old_line_content": "                qr.reset( (QueryResult *) bb.buf() );",
          "new_line_content": "                curop.debug().idhack = true;",
          "content_same": false
        },
        {
          "line": 845,
          "old_api": "len",
          "new_api": "getFields",
          "old_text": "bb.len()",
          "new_text": "pq.getFields()",
          "old_line_content": "                qr->len = bb.len();",
          "new_line_content": "                    fillQueryResultFromObj( bb , pq.getFields() , resObject );",
          "content_same": false
        },
        {
          "line": 848,
          "old_api": "setOperation",
          "new_api": "buf",
          "old_text": "qr->setOperation(opReply)",
          "new_text": "bb.buf()",
          "old_line_content": "                qr->setOperation(opReply);",
          "new_line_content": "                qr.reset( (QueryResult *) bb.buf() );",
          "content_same": false
        },
        {
          "line": 869,
          "old_api": "isEmpty",
          "new_api": "oldExplain",
          "old_text": "oldPlan.isEmpty()",
          "new_text": "mps.oldExplain()",
          "old_line_content": "            if ( !oldPlan.isEmpty() )",
          "new_line_content": "                oldPlan = mps.oldExplain();",
          "content_same": false
        },
        {
          "line": 871,
          "old_api": "obj",
          "new_api": "getMax",
          "old_text": "bb.obj()",
          "new_text": "pq.getMax()",
          "old_line_content": "            explainSuffix = bb.obj();",
          "new_line_content": "        auto_ptr< MultiPlanScanner > mps( new MultiPlanScanner( ns, query, order, &hint, !explain, pq.getMin(), pq.getMax(), false, true ) );",
          "content_same": false
        },
        {
          "line": 875,
          "old_api": "runOp",
          "new_api": "isEmpty",
          "old_text": "mps->runOp( original )",
          "new_text": "oldPlan.isEmpty()",
          "old_line_content": "        shared_ptr< UserQueryOp > o = mps->runOp( original );",
          "new_line_content": "            if ( !oldPlan.isEmpty() )",
          "content_same": false
        },
        {
          "line": 877,
          "old_api": "complete",
          "new_api": "obj",
          "old_text": "dqo.complete()",
          "new_text": "bb.obj()",
          "old_line_content": "        if ( ! dqo.complete() )",
          "new_line_content": "            explainSuffix = bb.obj();",
          "content_same": false
        },
        {
          "line": 883,
          "old_api": "totalNscanned",
          "new_api": "complete",
          "old_text": "dqo.totalNscanned()",
          "new_text": "dqo.complete()",
          "old_line_content": "        long long nscanned = dqo.totalNscanned();",
          "new_line_content": "        if ( ! dqo.complete() )",
          "content_same": false
        },
        {
          "line": 884,
          "old_api": "scanAndOrderRequired",
          "new_api": "exception",
          "old_text": "dqo.scanAndOrderRequired()",
          "new_text": "dqo.exception()",
          "old_line_content": "        curop.debug().scanAndOrder = dqo.scanAndOrderRequired();",
          "new_line_content": "            throw MsgAssertionException( dqo.exception() );",
          "content_same": false
        },
        {
          "line": 886,
          "old_api": "cursor",
          "new_api": "finishExplain",
          "old_text": "dqo.cursor()",
          "new_text": "dqo.finishExplain( explainSuffix )",
          "old_line_content": "        shared_ptr<Cursor> cursor = dqo.cursor();",
          "new_line_content": "            dqo.finishExplain( explainSuffix );",
          "content_same": false
        },
        {
          "line": 888,
          "old_api": "get",
          "new_api": "n",
          "old_text": "cursor.get()",
          "new_text": "dqo.n()",
          "old_line_content": "            log() << \"   used cursor: \" << cursor.get() << endl;",
          "new_line_content": "        n = dqo.n();",
          "content_same": false
        },
        {
          "line": 897,
          "old_api": "getOwned",
          "new_api": "mayRunMore",
          "old_text": "jsobj.getOwned()",
          "new_text": "mps->mayRunMore()",
          "old_line_content": "                cc = new ClientCursor(queryOptions, multi, ns, jsobj.getOwned());",
          "new_line_content": "        if ( dqo.saveClientCursor() || ( dqo.wouldSaveClientCursor() && mps->mayRunMore() ) ) {",
          "content_same": false
        },
        {
          "line": 906,
          "old_api": "cursorid",
          "new_api": "matcher",
          "old_text": "cc->cursorid()",
          "new_text": "dqo.matcher( cursor )",
          "old_line_content": "            cursorid = cc->cursorid();",
          "new_line_content": "                if( ! cursor->matcher() ) cursor->setMatcher( dqo.matcher( cursor ) );",
          "content_same": false
        },
        {
          "line": 910,
          "old_api": "getFieldPtr",
          "new_api": "getChunkManager",
          "old_text": "pq.getFieldPtr()",
          "new_text": "dqo.getChunkManager()",
          "old_line_content": "            cc->fields = pq.getFieldPtr();",
          "new_line_content": "            cc->setChunkManager( dqo.getChunkManager() );",
          "content_same": false
        },
        {
          "line": 912,
          "old_api": "updateLocation",
          "new_api": "cursorid",
          "old_text": "cc->updateLocation()",
          "new_text": "cc->cursorid()",
          "old_line_content": "            cc->updateLocation();",
          "new_line_content": "            cursorid = cc->cursorid();",
          "content_same": false
        },
        {
          "line": 914,
          "old_api": "tlog",
          "new_api": "setPos",
          "old_text": "tlog()",
          "new_text": "cc->setPos( n )",
          "old_line_content": "                DEV tlog() << \"query has no more but tailable, cursorid: \" << cursorid << endl;",
          "new_line_content": "            cc->setPos( n );",
          "content_same": false
        },
        {
          "line": 919,
          "old_api": "finishForOplogReplay",
          "new_api": "c",
          "old_text": "dqo.finishForOplogReplay(cc)",
          "new_text": "cc->c()->tailable()",
          "old_line_content": "            dqo.finishForOplogReplay(cc);",
          "new_line_content": "            if ( !cc->ok() && cc->c()->tailable() )",
          "content_same": false
        },
        {
          "line": 932,
          "old_api": "shouldDBProfile",
          "new_api": "debug",
          "old_text": "curop.shouldDBProfile( duration )",
          "new_text": "curop.debug()",
          "old_line_content": "        bool dbprofile = curop.shouldDBProfile( duration );",
          "new_line_content": "        curop.debug().responseLength = qr->len;",
          "content_same": false
        },
        {
          "line": 937,
          "old_api": "debug",
          "new_api": "elapsedMillis",
          "old_text": "curop.debug()",
          "new_text": "curop.elapsedMillis()",
          "old_line_content": "        curop.debug().nreturned = n;",
          "new_line_content": "        int duration = curop.elapsedMillis();",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 514,
          "old_api": null,
          "new_api": "finish",
          "old_text": null,
          "new_text": "finish( true )",
          "old_line_content": "                // not a match, continue onward",
          "new_line_content": "                finish( true ); //?",
          "content_same": false
        },
        {
          "line": 518,
          "old_api": null,
          "new_api": "nscanned",
          "old_text": null,
          "new_text": "_c->nscanned()",
          "old_line_content": "            else {",
          "new_line_content": "            _nscanned = _c->nscanned();",
          "content_same": false
        },
        {
          "line": 519,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "_c.get()",
          "old_line_content": "                _nscannedObjects++;",
          "new_line_content": "            if ( !matcher( _c )->matchesCurrent(_c.get() , &_details ) ) {",
          "content_same": false
        },
        {
          "line": 526,
          "old_api": null,
          "new_api": "currLoc",
          "old_text": null,
          "new_text": "_c->currLoc()",
          "old_line_content": "                    // dup",
          "new_line_content": "                DiskLoc cl = _c->currLoc();",
          "content_same": false
        },
        {
          "line": 527,
          "old_api": null,
          "new_api": "obj",
          "old_text": null,
          "new_text": "cl.obj()",
          "old_line_content": "                }",
          "new_line_content": "                if ( _chunkManager && ! _chunkManager->belongsToMe( cl.obj() ) ) { // TODO: should make this covered at some point",
          "content_same": false
        },
        {
          "line": 531,
          "old_api": null,
          "new_api": "getsetdup",
          "old_text": null,
          "new_text": "_c->getsetdup(cl)",
          "old_line_content": "                    if ( _inMemSort ) {",
          "new_line_content": "                else if( _c->getsetdup(cl) ) {",
          "content_same": false
        },
        {
          "line": 545,
          "old_api": null,
          "new_api": "isExplain",
          "old_text": null,
          "new_text": "_pq.isExplain()",
          "old_line_content": "                            }",
          "new_line_content": "                        if ( _pq.isExplain() ) {",
          "content_same": false
        },
        {
          "line": 547,
          "old_api": null,
          "new_api": "wantMore",
          "old_text": null,
          "new_text": "_pq.wantMore()",
          "old_line_content": "                        else {",
          "new_line_content": "                            if ( n() >= _pq.getNumToReturn() && !_pq.wantMore() ) {",
          "content_same": false
        },
        {
          "line": 557,
          "old_api": null,
          "new_api": "currKey",
          "old_text": null,
          "new_text": "_c->currKey()",
          "old_line_content": "                            else {",
          "new_line_content": "                                bb.appendKeys( _c->indexKeyPattern() , _c->currKey() );",
          "content_same": false
        },
        {
          "line": 561,
          "old_api": null,
          "new_api": "currKey",
          "old_text": null,
          "new_text": "_c->currKey()",
          "old_line_content": "                                if ( _oplogReplay ) {",
          "new_line_content": "                                fillQueryResultFromObj( _buf , 0 , _keyFieldsOnly->hydrate( _c->currKey() ) );",
          "content_same": false
        },
        {
          "line": 565,
          "old_api": null,
          "new_api": "isValid",
          "old_text": null,
          "new_text": "js.isValid()",
          "old_line_content": "                                }",
          "new_line_content": "                                assert( js.isValid() );",
          "content_same": false
        },
        {
          "line": 569,
          "old_api": null,
          "new_api": "type",
          "old_text": null,
          "new_text": "e.type()",
          "old_line_content": "                            _n++;",
          "new_line_content": "                                    if ( e.type() == Date || e.type() == Timestamp )",
          "content_same": false
        },
        {
          "line": 573,
          "old_api": null,
          "new_api": "showDiskLoc",
          "old_text": null,
          "new_text": "_pq.showDiskLoc()",
          "old_line_content": "                                    return;",
          "new_line_content": "                                fillQueryResultFromObj( _buf , _pq.getFields() , js , (_pq.showDiskLoc() ? &cl : 0));",
          "content_same": false
        },
        {
          "line": 577,
          "old_api": null,
          "new_api": "len",
          "old_text": null,
          "new_text": "_buf.len()",
          "old_line_content": "                                /* if only 1 requested, no cursor saved for efficiency...we assume it is findOne() */",
          "new_line_content": "                                if ( _pq.enough( n() ) || _buf.len() >= MaxBytesToReturnToClientAtOnce ) {",
          "content_same": false
        },
        {
          "line": 578,
          "old_api": null,
          "new_api": "finish",
          "old_text": null,
          "new_text": "finish( true )",
          "old_line_content": "                                if ( mayCreateCursor1 ) {",
          "new_line_content": "                                    finish( true );",
          "content_same": false
        },
        {
          "line": 582,
          "old_api": null,
          "new_api": "len",
          "old_text": null,
          "new_text": "_buf.len()",
          "old_line_content": "                                        _saveClientCursor = true;",
          "new_line_content": "                            else if ( _pq.enoughForFirstBatch( n() , _buf.len() ) ) {",
          "content_same": false
        },
        {
          "line": 586,
          "old_api": null,
          "new_api": "advance",
          "old_text": null,
          "new_text": "_c->advance()",
          "old_line_content": "                                return;",
          "new_line_content": "                                    if ( _c->advance() ) {",
          "content_same": false
        },
        {
          "line": 591,
          "old_api": null,
          "new_api": "finish",
          "old_text": null,
          "new_text": "finish( true )",
          "old_line_content": "            }",
          "new_line_content": "                                finish( true );",
          "content_same": false
        },
        {
          "line": 598,
          "old_api": null,
          "new_api": "advance",
          "old_text": null,
          "new_text": "_c->advance()",
          "old_line_content": "",
          "new_line_content": "            _c->advance();",
          "content_same": false
        },
        {
          "line": 605,
          "old_api": null,
          "new_api": "isExplain",
          "old_text": null,
          "new_text": "_pq.isExplain()",
          "old_line_content": "            }",
          "new_line_content": "            if ( _pq.isExplain() ) {",
          "content_same": false
        },
        {
          "line": 606,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "_so->size()",
          "old_line_content": "",
          "new_line_content": "                _n = _inMemSort ? _so->size() : _n;",
          "content_same": false
        },
        {
          "line": 609,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "_so.get()",
          "old_line_content": "",
          "new_line_content": "                if( _so.get() )",
          "content_same": false
        },
        {
          "line": 613,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "_c.get()",
          "old_line_content": "                // If the tailing request succeeded.",
          "new_line_content": "            if ( _c.get() ) {",
          "content_same": false
        },
        {
          "line": 616,
          "old_api": null,
          "new_api": "getNumToReturn",
          "old_text": null,
          "new_text": "_pq.getNumToReturn()",
          "old_line_content": "            }",
          "new_line_content": "                if ( _pq.hasOption( QueryOption_CursorTailable ) && _pq.getNumToReturn() != 1 )",
          "content_same": false
        },
        {
          "line": 617,
          "old_api": null,
          "new_api": "setTailable",
          "old_text": null,
          "new_text": "_c->setTailable()",
          "old_line_content": "",
          "new_line_content": "                    _c->setTailable();",
          "content_same": false
        },
        {
          "line": 627,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "_keyFieldsOnly.get()",
          "old_line_content": "                }",
          "new_line_content": "                              _nChunkSkips, _keyFieldsOnly.get() > 0 );",
          "content_same": false
        },
        {
          "line": 630,
          "old_api": null,
          "new_api": "len",
          "old_text": null,
          "new_text": "_buf.len()",
          "old_line_content": "            if ( stop ) {",
          "new_line_content": "                if ( _buf.len() ) {",
          "content_same": false
        },
        {
          "line": 632,
          "old_api": null,
          "new_api": "decouple",
          "old_text": null,
          "new_text": "_buf.decouple()",
          "old_line_content": "            }",
          "new_line_content": "                    _buf.decouple();",
          "content_same": false
        },
        {
          "line": 637,
          "old_api": null,
          "new_api": "setStop",
          "old_text": null,
          "new_text": "setStop()",
          "old_line_content": "        }",
          "new_line_content": "                setStop();",
          "content_same": false
        },
        {
          "line": 646,
          "old_api": null,
          "new_api": "elapsedMillis",
          "old_text": null,
          "new_text": "_curop.elapsedMillis()",
          "old_line_content": "        }",
          "new_line_content": "            BSONObj obj = _eb.finishWithSuffix( totalNscanned(), nscannedObjects(), n(), _curop.elapsedMillis(), suffix);",
          "content_same": false
        },
        {
          "line": 647,
          "old_api": null,
          "new_api": "fillQueryResultFromObj",
          "old_text": null,
          "new_text": "fillQueryResultFromObj(_buf, 0, obj)",
          "old_line_content": "",
          "new_line_content": "            fillQueryResultFromObj(_buf, 0, obj);",
          "content_same": false
        },
        {
          "line": 650,
          "old_api": null,
          "new_api": "len",
          "old_text": null,
          "new_text": "_buf.len()",
          "old_line_content": "        }",
          "new_line_content": "            _response.appendData( _buf.buf(), _buf.len() );",
          "content_same": false
        },
        {
          "line": 651,
          "old_api": null,
          "new_api": "decouple",
          "old_text": null,
          "new_text": "_buf.decouple()",
          "old_line_content": "",
          "new_line_content": "            _buf.decouple();",
          "content_same": false
        },
        {
          "line": 655,
          "old_api": null,
          "new_api": "stopRequested",
          "old_text": null,
          "new_text": "stopRequested()",
          "old_line_content": "            }",
          "new_line_content": "            return !_yieldRecoveryFailed && ( _pq.getNumToReturn() != 1 ) && ( ( _n > _pq.getNumToReturn() / 2 ) || ( complete() && !stopRequested() ) );",
          "content_same": false
        },
        {
          "line": 660,
          "old_api": null,
          "new_api": "ensureStartScan",
          "old_text": null,
          "new_text": "_eb.ensureStartScan()",
          "old_line_content": "            ret->_ntoskip = _ntoskip;",
          "new_line_content": "                _eb.ensureStartScan();",
          "content_same": false
        },
        {
          "line": 663,
          "old_api": null,
          "new_api": "n",
          "old_text": null,
          "new_text": "n()",
          "old_line_content": "",
          "new_line_content": "            ret->_oldN = n();",
          "content_same": false
        },
        {
          "line": 664,
          "old_api": null,
          "new_api": "totalNscanned",
          "old_text": null,
          "new_text": "totalNscanned()",
          "old_line_content": "        bool scanAndOrderRequired() const { return _inMemSort; }",
          "new_line_content": "            ret->_oldNscanned = totalNscanned();",
          "content_same": false
        },
        {
          "line": 665,
          "old_api": null,
          "new_api": "nscannedObjects",
          "old_text": null,
          "new_text": "nscannedObjects()",
          "old_line_content": "        shared_ptr<Cursor> cursor() { return _c; }",
          "new_line_content": "            ret->_oldNscannedObjects = nscannedObjects();",
          "content_same": false
        },
        {
          "line": 679,
          "old_api": null,
          "new_api": "isNull",
          "old_text": null,
          "new_text": "_slaveReadTill.isNull()",
          "old_line_content": "",
          "new_line_content": "            if ( _oplogReplay && ! _slaveReadTill.isNull() )",
          "content_same": false
        },
        {
          "line": 680,
          "old_api": null,
          "new_api": "slaveReadTill",
          "old_text": null,
          "new_text": "cc->slaveReadTill( _slaveReadTill )",
          "old_line_content": "    private:",
          "new_line_content": "                cc->slaveReadTill( _slaveReadTill );",
          "content_same": false
        },
        {
          "line": 732,
          "old_api": null,
          "new_api": "pq",
          "old_text": null,
          "new_text": "pq( *pq_shared )",
          "old_line_content": "        if( logLevel >= 2 )",
          "new_line_content": "        ParsedQuery& pq( *pq_shared );",
          "content_same": false
        },
        {
          "line": 742,
          "old_api": null,
          "new_api": "getNumToReturn",
          "old_text": null,
          "new_text": "pq.getNumToReturn()",
          "old_line_content": "            BSONObjBuilder cmdResBuf;",
          "new_line_content": "        curop.debug().ntoreturn = pq.getNumToReturn();",
          "content_same": false
        },
        {
          "line": 747,
          "old_api": null,
          "new_api": "skip",
          "old_text": null,
          "new_text": "bb.skip(sizeof(QueryResult))",
          "old_line_content": "",
          "new_line_content": "            bb.skip(sizeof(QueryResult));",
          "content_same": false
        },
        {
          "line": 755,
          "old_api": null,
          "new_api": "buf",
          "old_text": null,
          "new_text": "bb.buf()",
          "old_line_content": "                qr->cursorId = 0;",
          "new_line_content": "                qr.reset( (QueryResult *) bb.buf() );",
          "content_same": false
        },
        {
          "line": 756,
          "old_api": null,
          "new_api": "decouple",
          "old_text": null,
          "new_text": "bb.decouple()",
          "old_line_content": "                qr->startingFrom = 0;",
          "new_line_content": "                bb.decouple();",
          "content_same": false
        },
        {
          "line": 757,
          "old_api": null,
          "new_api": "setResultFlagsToOk",
          "old_text": null,
          "new_text": "qr->setResultFlagsToOk()",
          "old_line_content": "                qr->nReturned = 1;",
          "new_line_content": "                qr->setResultFlagsToOk();",
          "content_same": false
        },
        {
          "line": 759,
          "old_api": null,
          "new_api": "len",
          "old_text": null,
          "new_text": "bb.len()",
          "old_line_content": "            }",
          "new_line_content": "                curop.debug().responseLength = bb.len();",
          "content_same": false
        },
        {
          "line": 248,
          "old_api": null,
          "new_api": "ok",
          "old_text": null,
          "new_text": "cursor->ok()",
          "old_line_content": "        try {",
          "new_line_content": "            while( cursor->ok() ) {",
          "content_same": false
        },
        {
          "line": 760,
          "old_api": null,
          "new_api": "setOperation",
          "old_text": null,
          "new_text": "qr->setOperation(opReply)",
          "old_line_content": "            else {",
          "new_line_content": "                qr->setOperation(opReply);",
          "content_same": false
        },
        {
          "line": 764,
          "old_api": null,
          "new_api": "release",
          "old_text": null,
          "new_text": "qr.release()",
          "old_line_content": "        }",
          "new_line_content": "                result.setData( qr.release(), true );",
          "content_same": false
        },
        {
          "line": 253,
          "old_api": null,
          "new_api": "reset",
          "old_text": null,
          "new_text": "ccPointer.reset( new ClientCursor( QueryOption_NoCursorTimeout, cursor, ns ) )",
          "old_line_content": "                }",
          "new_line_content": "                        ccPointer.reset( new ClientCursor( QueryOption_NoCursorTimeout, cursor, ns ) );",
          "content_same": false
        },
        {
          "line": 767,
          "old_api": null,
          "new_api": "uasserted",
          "old_text": null,
          "new_text": "uasserted(13530, \"bad or malformed command request?\")",
          "old_line_content": "",
          "new_line_content": "                uasserted(13530, \"bad or malformed command request?\");",
          "content_same": false
        },
        {
          "line": 256,
          "old_api": null,
          "new_api": "yieldSometimes",
          "old_text": null,
          "new_text": "ccPointer->yieldSometimes( simpleEqualityMatch ? ClientCursor::DontNeed : ClientCursor::MaybeCovered )",
          "old_line_content": "                // are enforced by the FieldRangeVectorIterator and only key fields have constraints.  There",
          "new_line_content": "                else if ( !ccPointer->yieldSometimes( simpleEqualityMatch ? ClientCursor::DontNeed : ClientCursor::MaybeCovered ) ||",
          "content_same": false
        },
        {
          "line": 257,
          "old_api": null,
          "new_api": "ok",
          "old_text": null,
          "new_text": "cursor->ok()",
          "old_line_content": "                // is no need do key deduping because an exact value is specified in the query for all key",
          "new_line_content": "                    !cursor->ok() ) {",
          "content_same": false
        },
        {
          "line": 775,
          "old_api": null,
          "new_api": "BSONElement",
          "old_text": null,
          "new_text": "BSONElement()",
          "old_line_content": "        /* The ElemIter will not be happy if this isn't really an object. So throw exception",
          "new_line_content": "        BSONElement hint = useHints ? pq.getHint() : BSONElement();",
          "content_same": false
        },
        {
          "line": 776,
          "old_api": null,
          "new_api": "isExplain",
          "old_text": null,
          "new_text": "pq.isExplain()",
          "old_line_content": "           here when that is true.",
          "new_line_content": "        bool explain = pq.isExplain();",
          "content_same": false
        },
        {
          "line": 777,
          "old_api": null,
          "new_api": "isSnapshot",
          "old_text": null,
          "new_text": "pq.isSnapshot()",
          "old_line_content": "           (Which may indicate bad data from client.)",
          "new_line_content": "        bool snapshot = pq.isSnapshot();",
          "content_same": false
        },
        {
          "line": 778,
          "old_api": null,
          "new_api": "getOrder",
          "old_text": null,
          "new_text": "pq.getOrder()",
          "old_line_content": "        */",
          "new_line_content": "        BSONObj order = pq.getOrder();",
          "content_same": false
        },
        {
          "line": 269,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "cursor.get()",
          "old_line_content": "                    else {",
          "new_line_content": "                    ( ( !cursor->matcher() || cursor->matcher()->matchesCurrent( cursor.get() ) ) &&",
          "content_same": false
        },
        {
          "line": 270,
          "old_api": null,
          "new_api": "currLoc",
          "old_text": null,
          "new_text": "cursor->currLoc()",
          "old_line_content": "                        ++count;",
          "new_line_content": "                        !cursor->getsetdup( cursor->currLoc() ) ) ) {",
          "content_same": false
        },
        {
          "line": 785,
          "old_api": null,
          "new_api": "objsize",
          "old_text": null,
          "new_text": "query.objsize()",
          "old_line_content": "",
          "new_line_content": "        if ( query.objsize() == 0 ) {",
          "content_same": false
        },
        {
          "line": 786,
          "old_api": null,
          "new_api": "out",
          "old_text": null,
          "new_text": "out()",
          "old_line_content": "        Client::ReadContext ctx( ns , dbpath ); // read locks",
          "new_line_content": "            out() << \"Bad query object?\\n  jsobj:\";",
          "content_same": false
        },
        {
          "line": 787,
          "old_api": null,
          "new_api": "toString",
          "old_text": null,
          "new_text": "jsobj.toString()",
          "old_line_content": "",
          "new_line_content": "            out() << jsobj.toString() << \"\\n  query:\";",
          "content_same": false
        },
        {
          "line": 789,
          "old_api": null,
          "new_api": "uassert",
          "old_text": null,
          "new_text": "uassert( 10110 , \"bad query object\", false)",
          "old_line_content": "",
          "new_line_content": "            uassert( 10110 , \"bad query object\", false);",
          "content_same": false
        },
        {
          "line": 796,
          "old_api": null,
          "new_api": "hasOption",
          "old_text": null,
          "new_text": "pq.hasOption( QueryOption_CursorTailable )",
          "old_line_content": "            }",
          "new_line_content": "        if ( pq.hasOption( QueryOption_CursorTailable ) ) {",
          "content_same": false
        },
        {
          "line": 797,
          "old_api": null,
          "new_api": "nsdetails",
          "old_text": null,
          "new_text": "nsdetails( ns )",
          "old_line_content": "            else {",
          "new_line_content": "            NamespaceDetails *d = nsdetails( ns );",
          "content_same": false
        },
        {
          "line": 799,
          "old_api": null,
          "new_api": "BSON",
          "old_text": null,
          "new_text": "BSON( \"$natural\" << 1 )",
          "old_line_content": "            }",
          "new_line_content": "            const BSONObj nat1 = BSON( \"$natural\" << 1 );",
          "content_same": false
        },
        {
          "line": 800,
          "old_api": null,
          "new_api": "isEmpty",
          "old_text": null,
          "new_text": "order.isEmpty()",
          "old_line_content": "        }",
          "new_line_content": "            if ( order.isEmpty() ) {",
          "content_same": false
        },
        {
          "line": 290,
          "old_api": null,
          "new_api": "what",
          "old_text": null,
          "new_text": "e.what()",
          "old_line_content": "            << endl;",
          "new_line_content": "            exceptionInfo = e.what();",
          "content_same": false
        },
        {
          "line": 294,
          "old_api": null,
          "new_api": "log",
          "old_text": null,
          "new_text": "log()",
          "old_line_content": "    class ExplainBuilder {",
          "new_line_content": "        log() << \"Count with ns: \" << ns << \" and query: \" << query",
          "content_same": false
        },
        {
          "line": 810,
          "old_api": null,
          "new_api": "nsdetails",
          "old_text": null,
          "new_text": "nsdetails(ns)",
          "old_line_content": "                }",
          "new_line_content": "            NamespaceDetails *d = nsdetails(ns);",
          "content_same": false
        },
        {
          "line": 812,
          "old_api": null,
          "new_api": "findIdIndex",
          "old_text": null,
          "new_text": "d->findIdIndex()",
          "old_line_content": "                    /* [dm] the name of an _id index tends to vary, so we build the hint the hard way here.",
          "new_line_content": "                int i = d->findIdIndex();",
          "content_same": false
        },
        {
          "line": 814,
          "old_api": null,
          "new_api": "strstr",
          "old_text": null,
          "new_text": "strstr( ns , \".system.\" )",
          "old_line_content": "                       in the query optimizer please fix this then!",
          "new_line_content": "                    if ( strstr( ns , \".system.\" ) == 0 )",
          "content_same": false
        },
        {
          "line": 815,
          "old_api": null,
          "new_api": "log",
          "old_text": null,
          "new_text": "log()",
          "old_line_content": "                    */",
          "new_line_content": "                        log() << \"warning: no _id index on $snapshot query, ns:\" << ns << endl;",
          "content_same": false
        },
        {
          "line": 823,
          "old_api": null,
          "new_api": "indexName",
          "old_text": null,
          "new_text": "d->idx(i).indexName()",
          "old_line_content": "",
          "new_line_content": "                    b.append(\"$hint\", d->idx(i).indexName());",
          "content_same": false
        },
        {
          "line": 312,
          "old_api": null,
          "new_api": "subobjStart",
          "old_text": null,
          "new_text": "_a->subobjStart()",
          "old_line_content": "            if ( _i == 1 ) {",
          "new_line_content": "            BSONObjBuilder b( _a->subobjStart() );",
          "content_same": false
        },
        {
          "line": 825,
          "old_api": null,
          "new_api": "firstElement",
          "old_text": null,
          "new_text": "snapshotHint.firstElement()",
          "old_line_content": "",
          "new_line_content": "                    hint = snapshotHint.firstElement();",
          "content_same": false
        },
        {
          "line": 319,
          "old_api": null,
          "new_api": "reset",
          "old_text": null,
          "new_text": "_c.reset( new BSONArrayBuilder() )",
          "old_line_content": "            else {",
          "new_line_content": "                _c.reset( new BSONArrayBuilder() );",
          "content_same": false
        },
        {
          "line": 837,
          "old_api": null,
          "new_api": "Helpers::findById( c, ns , query , resObject , &nsFound , &indexFound )",
          "old_text": null,
          "new_text": "Helpers::findById( c, ns , query , resObject , &nsFound , &indexFound )",
          "old_line_content": "                if ( found ) {",
          "new_line_content": "            bool found = Helpers::findById( c, ns , query , resObject , &nsFound , &indexFound );",
          "content_same": false
        },
        {
          "line": 326,
          "old_api": null,
          "new_api": "subobjStart",
          "old_text": null,
          "new_text": "_c->subobjStart()",
          "old_line_content": "",
          "new_line_content": "                _b.reset( new BSONObjBuilder( _c->subobjStart() ) );",
          "content_same": false
        },
        {
          "line": 328,
          "old_api": null,
          "new_api": "toString",
          "old_text": null,
          "new_text": "c->toString()",
          "old_line_content": "                *_b << \"scanAndOrder\" << true;",
          "new_line_content": "            *_b << \"cursor\" << c->toString();",
          "content_same": false
        },
        {
          "line": 329,
          "old_api": null,
          "new_api": "appendNumber",
          "old_text": null,
          "new_text": "_b->appendNumber( \"nscanned\", nscanned )",
          "old_line_content": "",
          "new_line_content": "            _b->appendNumber( \"nscanned\", nscanned );",
          "content_same": false
        },
        {
          "line": 330,
          "old_api": null,
          "new_api": "appendNumber",
          "old_text": null,
          "new_text": "_b->appendNumber( \"nscannedObjects\", nscannedObjects )",
          "old_line_content": "            *_b << \"millis\" << millis;",
          "new_line_content": "            _b->appendNumber( \"nscannedObjects\", nscannedObjects );",
          "content_same": false
        },
        {
          "line": 840,
          "old_api": null,
          "new_api": "skip",
          "old_text": null,
          "new_text": "bb.skip(sizeof(QueryResult))",
          "old_line_content": "                }",
          "new_line_content": "                bb.skip(sizeof(QueryResult));",
          "content_same": false
        },
        {
          "line": 849,
          "old_api": null,
          "new_api": "decouple",
          "old_text": null,
          "new_text": "bb.decouple()",
          "old_line_content": "                qr->cursorId = 0;",
          "new_line_content": "                bb.decouple();",
          "content_same": false
        },
        {
          "line": 850,
          "old_api": null,
          "new_api": "setResultFlagsToOk",
          "old_text": null,
          "new_text": "qr->setResultFlagsToOk()",
          "old_line_content": "                qr->startingFrom = 0;",
          "new_line_content": "                qr->setResultFlagsToOk();",
          "content_same": false
        },
        {
          "line": 851,
          "old_api": null,
          "new_api": "len",
          "old_text": null,
          "new_text": "bb.len()",
          "old_line_content": "                qr->nReturned = n;",
          "new_line_content": "                qr->len = bb.len();",
          "content_same": false
        },
        {
          "line": 340,
          "old_api": null,
          "new_api": "isMultiKey",
          "old_text": null,
          "new_text": "c->isMultiKey()",
          "old_line_content": "",
          "new_line_content": "            *_b << \"isMultiKey\" << c->isMultiKey();",
          "content_same": false
        },
        {
          "line": 853,
          "old_api": null,
          "new_api": "len",
          "old_text": null,
          "new_text": "bb.len()",
          "old_line_content": "                return NULL;",
          "new_line_content": "                curop.debug().responseLength = bb.len();",
          "content_same": false
        },
        {
          "line": 854,
          "old_api": null,
          "new_api": "setOperation",
          "old_text": null,
          "new_text": "qr->setOperation(opReply)",
          "old_line_content": "            }",
          "new_line_content": "                qr->setOperation(opReply);",
          "content_same": false
        },
        {
          "line": 343,
          "old_api": null,
          "new_api": "prettyIndexBounds",
          "old_text": null,
          "new_text": "c->prettyIndexBounds()",
          "old_line_content": "            }",
          "new_line_content": "            *_b << \"indexBounds\" << c->prettyIndexBounds();",
          "content_same": false
        },
        {
          "line": 858,
          "old_api": null,
          "new_api": "release",
          "old_text": null,
          "new_text": "qr.release()",
          "old_line_content": "",
          "new_line_content": "                result.setData( qr.release(), true );",
          "content_same": false
        },
        {
          "line": 348,
          "old_api": null,
          "new_api": "arr",
          "old_text": null,
          "new_text": "_a->arr()",
          "old_line_content": "            ++_i;",
          "new_line_content": "                *_b << \"allPlans\" << _a->arr();",
          "content_same": false
        },
        {
          "line": 351,
          "old_api": null,
          "new_api": "done",
          "old_text": null,
          "new_text": "_b->done()",
          "old_line_content": "            if ( _i > 1 ) {",
          "new_line_content": "                _b->done();",
          "content_same": false
        },
        {
          "line": 866,
          "old_api": null,
          "new_api": "hasIndexSpecifier",
          "old_text": null,
          "new_text": "pq.hasIndexSpecifier()",
          "old_line_content": "        BSONObj explainSuffix;",
          "new_line_content": "        if ( explain && ! pq.hasIndexSpecifier() ) {",
          "content_same": false
        },
        {
          "line": 868,
          "old_api": null,
          "new_api": "usingCachedPlan",
          "old_text": null,
          "new_text": "mps.usingCachedPlan()",
          "old_line_content": "            BSONObjBuilder bb;",
          "new_line_content": "            if ( mps.usingCachedPlan() )",
          "content_same": false
        },
        {
          "line": 360,
          "old_api": null,
          "new_api": "appendNumber",
          "old_text": null,
          "new_text": "b.appendNumber( \"nscanned\", nscanned )",
          "old_line_content": "            }",
          "new_line_content": "                b.appendNumber( \"nscanned\", nscanned );",
          "content_same": false
        },
        {
          "line": 361,
          "old_api": null,
          "new_api": "appendNumber",
          "old_text": null,
          "new_text": "b.appendNumber( \"nscannedObjects\", nscannedObjects )",
          "old_line_content": "            else {",
          "new_line_content": "                b.appendNumber( \"nscannedObjects\", nscannedObjects );",
          "content_same": false
        },
        {
          "line": 876,
          "old_api": null,
          "new_api": "firstElement",
          "old_text": null,
          "new_text": "oldPlan.firstElement().embeddedObject().firstElement().embeddedObject()",
          "old_line_content": "        UserQueryOp &dqo = *o;",
          "new_line_content": "                bb.append( \"oldPlan\", oldPlan.firstElement().embeddedObject().firstElement().embeddedObject() );",
          "content_same": false
        },
        {
          "line": 369,
          "old_api": null,
          "new_api": "getHostNameCached",
          "old_text": null,
          "new_text": "getHostNameCached()",
          "old_line_content": "    private:",
          "new_line_content": "            \thost << getHostNameCached() << \":\" << cmdLine.port;",
          "content_same": false
        },
        {
          "line": 370,
          "old_api": null,
          "new_api": "str",
          "old_text": null,
          "new_text": "host.str()",
          "old_line_content": "        auto_ptr< BSONArrayBuilder > _a;",
          "new_line_content": "            \t*_b << \"server\" << host.str();",
          "content_same": false
        },
        {
          "line": 371,
          "old_api": null,
          "new_api": "appendElements",
          "old_text": null,
          "new_text": "_b->appendElements( suffix )",
          "old_line_content": "        auto_ptr< BSONObjBuilder > _b;",
          "new_line_content": "                _b->appendElements( suffix );",
          "content_same": false
        },
        {
          "line": 372,
          "old_api": null,
          "new_api": "obj",
          "old_text": null,
          "new_text": "_b->obj()",
          "old_line_content": "        auto_ptr< BSONArrayBuilder > _c;",
          "new_line_content": "                return _b->obj();",
          "content_same": false
        },
        {
          "line": 881,
          "old_api": null,
          "new_api": "runOp",
          "old_text": null,
          "new_text": "mps->runOp( original )",
          "old_line_content": "        }",
          "new_line_content": "        shared_ptr< UserQueryOp > o = mps->runOp( original );",
          "content_same": false
        },
        {
          "line": 889,
          "old_api": null,
          "new_api": "totalNscanned",
          "old_text": null,
          "new_text": "dqo.totalNscanned()",
          "old_line_content": "        long long cursorid = 0;",
          "new_line_content": "        long long nscanned = dqo.totalNscanned();",
          "content_same": false
        },
        {
          "line": 890,
          "old_api": null,
          "new_api": "scanAndOrderRequired",
          "old_text": null,
          "new_text": "dqo.scanAndOrderRequired()",
          "old_line_content": "        const char * exhaust = 0;",
          "new_line_content": "        curop.debug().scanAndOrder = dqo.scanAndOrderRequired();",
          "content_same": false
        },
        {
          "line": 892,
          "old_api": null,
          "new_api": "cursor",
          "old_text": null,
          "new_text": "dqo.cursor()",
          "old_line_content": "            ClientCursor *cc;",
          "new_line_content": "        shared_ptr<Cursor> cursor = dqo.cursor();",
          "content_same": false
        },
        {
          "line": 894,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "cursor.get()",
          "old_line_content": "            if ( moreClauses ) {",
          "new_line_content": "            log() << \"   used cursor: \" << cursor.get() << endl;",
          "content_same": false
        },
        {
          "line": 899,
          "old_api": null,
          "new_api": "mayRunMore",
          "old_text": null,
          "new_text": "mps->mayRunMore()",
          "old_line_content": "            else {",
          "new_line_content": "            bool moreClauses = mps->mayRunMore();",
          "content_same": false
        },
        {
          "line": 902,
          "old_api": null,
          "new_api": "matcher",
          "old_text": null,
          "new_text": "dqo.matcher( cursor )",
          "old_line_content": "            }",
          "new_line_content": "                shared_ptr< Cursor > multi( new MultiCursor( mps, cursor, dqo.matcher( cursor ), dqo ) );",
          "content_same": false
        },
        {
          "line": 903,
          "old_api": null,
          "new_api": "getOwned",
          "old_text": null,
          "new_text": "jsobj.getOwned()",
          "old_line_content": "",
          "new_line_content": "                cc = new ClientCursor(queryOptions, multi, ns, jsobj.getOwned());",
          "content_same": false
        },
        {
          "line": 907,
          "old_api": null,
          "new_api": "getOwned",
          "old_text": null,
          "new_text": "jsobj.getOwned()",
          "old_line_content": "            DEV tlog(2) << \"query has more, cursorid: \" << cursorid << endl;",
          "new_line_content": "                cc = new ClientCursor( queryOptions, cursor, ns, jsobj.getOwned() );",
          "content_same": false
        },
        {
          "line": 396,
          "old_api": null,
          "new_api": "ShardChunkManagerPtr",
          "old_text": null,
          "new_text": "ShardChunkManagerPtr()",
          "old_line_content": "            _response( response ),",
          "new_line_content": "                           shardingState.getShardChunkManager(pq.ns()) : ShardChunkManagerPtr() ),",
          "content_same": false
        },
        {
          "line": 401,
          "old_api": null,
          "new_api": "hasOption",
          "old_text": null,
          "new_text": "pq.hasOption( QueryOption_OplogReplay)",
          "old_line_content": "",
          "new_line_content": "            _oplogReplay( pq.hasOption( QueryOption_OplogReplay) ),",
          "content_same": false
        },
        {
          "line": 916,
          "old_api": null,
          "new_api": "getFieldPtr",
          "old_text": null,
          "new_text": "pq.getFieldPtr()",
          "old_line_content": "                exhaust = ns;",
          "new_line_content": "            cc->fields = pq.getFieldPtr();",
          "content_same": false
        },
        {
          "line": 918,
          "old_api": null,
          "new_api": "updateLocation",
          "old_text": null,
          "new_text": "cc->updateLocation()",
          "old_line_content": "            }",
          "new_line_content": "            cc->updateLocation();",
          "content_same": false
        },
        {
          "line": 920,
          "old_api": null,
          "new_api": "tlog",
          "old_text": null,
          "new_text": "tlog()",
          "old_line_content": "        }",
          "new_line_content": "                DEV tlog() << \"query has no more but tailable, cursorid: \" << cursorid << endl;",
          "content_same": false
        },
        {
          "line": 410,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "_response.empty()",
          "old_line_content": "                _capped = true;",
          "new_line_content": "            if ( _response.empty() ) {",
          "content_same": false
        },
        {
          "line": 411,
          "old_api": null,
          "new_api": "skip",
          "old_text": null,
          "new_text": "_buf.skip( sizeof( QueryResult ) )",
          "old_line_content": "            }",
          "new_line_content": "                _buf.skip( sizeof( QueryResult ) );",
          "content_same": false
        },
        {
          "line": 923,
          "old_api": null,
          "new_api": "debug",
          "old_text": null,
          "new_text": "curop.debug()",
          "old_line_content": "        qr->cursorId = cursorid;",
          "new_line_content": "                curop.debug().exhaust = true;",
          "content_same": false
        },
        {
          "line": 925,
          "old_api": null,
          "new_api": "finishForOplogReplay",
          "old_text": null,
          "new_text": "dqo.finishForOplogReplay(cc)",
          "old_line_content": "        // qr->len is updated automatically by appendData()",
          "new_line_content": "            dqo.finishForOplogReplay(cc);",
          "content_same": false
        },
        {
          "line": 415,
          "old_api": null,
          "new_api": "qp",
          "old_text": null,
          "new_text": "qp()",
          "old_line_content": "",
          "new_line_content": "                _findingStartCursor.reset( new FindingStartCursor( qp() ) );",
          "content_same": false
        },
        {
          "line": 928,
          "old_api": null,
          "new_api": "header",
          "old_text": null,
          "new_text": "result.header()",
          "old_line_content": "        qr->startingFrom = 0;",
          "new_line_content": "        QueryResult *qr = (QueryResult *) result.header();",
          "content_same": false
        },
        {
          "line": 930,
          "old_api": null,
          "new_api": "setResultFlagsToOk",
          "old_text": null,
          "new_text": "qr->setResultFlagsToOk()",
          "old_line_content": "",
          "new_line_content": "        qr->setResultFlagsToOk();",
          "content_same": false
        },
        {
          "line": 419,
          "old_api": null,
          "new_api": "getSkip",
          "old_text": null,
          "new_text": "_pq.getSkip()",
          "old_line_content": "                }",
          "new_line_content": "                _c = qp().newCursor( DiskLoc() , _pq.getNumToReturn() + _pq.getSkip() );",
          "content_same": false
        },
        {
          "line": 420,
          "old_api": null,
          "new_api": "capped",
          "old_text": null,
          "new_text": "_c->capped()",
          "old_line_content": "            }",
          "new_line_content": "                _capped = _c->capped();",
          "content_same": false
        },
        {
          "line": 933,
          "old_api": null,
          "new_api": "setOperation",
          "old_text": null,
          "new_text": "qr->setOperation(opReply)",
          "old_line_content": "        if ( dbprofile || duration >= cmdLine.slowMS ) {",
          "new_line_content": "        qr->setOperation(opReply);",
          "content_same": false
        },
        {
          "line": 423,
          "old_api": null,
          "new_api": "getFields",
          "old_text": null,
          "new_text": "_pq.getFields()",
          "old_line_content": "                _inMemSort = true;",
          "new_line_content": "                if ( _c->modifiedKeys() == false && _c->isMultiKey() == false && _pq.getFields() ) {",
          "content_same": false
        },
        {
          "line": 938,
          "old_api": null,
          "new_api": "shouldDBProfile",
          "old_text": null,
          "new_text": "curop.shouldDBProfile( duration )",
          "old_line_content": "        return exhaust;",
          "new_line_content": "        bool dbprofile = curop.shouldDBProfile( duration );",
          "content_same": false
        },
        {
          "line": 940,
          "old_api": null,
          "new_api": "debug",
          "old_text": null,
          "new_text": "curop.debug()",
          "old_line_content": "",
          "new_line_content": "            curop.debug().nscanned = (int) nscanned;",
          "content_same": false
        },
        {
          "line": 941,
          "old_api": null,
          "new_api": "debug",
          "old_text": null,
          "new_text": "curop.debug()",
          "old_line_content": "} // namespace mongo",
          "new_line_content": "            curop.debug().ntoskip = ntoskip;",
          "content_same": false
        },
        {
          "line": 430,
          "old_api": null,
          "new_api": "multikeyFrs",
          "old_text": null,
          "new_text": "qp().multikeyFrs()",
          "old_line_content": "",
          "new_line_content": "                _so.reset( new ScanAndOrder( _pq.getSkip() , _pq.getNumToReturn() , _pq.getOrder(), qp().multikeyFrs() ) );",
          "content_same": false
        },
        {
          "line": 943,
          "old_api": null,
          "new_api": "debug",
          "old_text": null,
          "new_text": "curop.debug()",
          "old_line_content": "",
          "new_line_content": "        curop.debug().nreturned = n;",
          "content_same": false
        },
        {
          "line": 433,
          "old_api": null,
          "new_api": "isExplain",
          "old_text": null,
          "new_text": "_pq.isExplain()",
          "old_line_content": "        virtual bool prepareToYield() {",
          "new_line_content": "            if ( _pq.isExplain() ) {",
          "content_same": false
        },
        {
          "line": 440,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "_findingStartCursor.get()",
          "old_line_content": "                }",
          "new_line_content": "            if ( _findingStartCursor.get() ) {",
          "content_same": false
        },
        {
          "line": 441,
          "old_api": null,
          "new_api": "prepareToYield",
          "old_text": null,
          "new_text": "_findingStartCursor->prepareToYield()",
          "old_line_content": "                if ( _cc ) {",
          "new_line_content": "                return _findingStartCursor->prepareToYield();",
          "content_same": false
        },
        {
          "line": 445,
          "old_api": null,
          "new_api": "ns",
          "old_text": null,
          "new_text": "_pq.ns()",
          "old_line_content": "            // no active cursor - ok to yield",
          "new_line_content": "                    _cc.reset( new ClientCursor( QueryOption_NoCursorTimeout , _c , _pq.ns() ) );",
          "content_same": false
        },
        {
          "line": 448,
          "old_api": null,
          "new_api": "prepareToYield",
          "old_text": null,
          "new_text": "_cc->prepareToYield( _yieldData )",
          "old_line_content": "",
          "new_line_content": "\t                return _cc->prepareToYield( _yieldData );",
          "content_same": false
        },
        {
          "line": 461,
          "old_api": null,
          "new_api": "ClientCursor::recoverFromYield( _yieldData )",
          "old_text": null,
          "new_text": "ClientCursor::recoverFromYield( _yieldData )",
          "old_line_content": "                if ( _capped ) {",
          "new_line_content": "            else if ( _cc && !ClientCursor::recoverFromYield( _yieldData ) ) {",
          "content_same": false
        },
        {
          "line": 463,
          "old_api": null,
          "new_api": "reset",
          "old_text": null,
          "new_text": "_c.reset()",
          "old_line_content": "                }",
          "new_line_content": "                _c.reset();",
          "content_same": false
        },
        {
          "line": 468,
          "old_api": null,
          "new_api": "ns",
          "old_text": null,
          "new_text": "_pq.ns()",
          "old_line_content": "                    // we don't fail query since we're fine with returning partial data if collection dropped",
          "new_line_content": "                    msgassertedNoTrace( 13338, str::stream() << \"capped cursor overrun during query: \" << _pq.ns() );",
          "content_same": false
        },
        {
          "line": 470,
          "old_api": null,
          "new_api": "mustAssertOnYieldFailure",
          "old_text": null,
          "new_text": "qp().mustAssertOnYieldFailure()",
          "old_line_content": "                    // todo: this is wrong.  the cursor could be gone if closeAllDatabases command just ran",
          "new_line_content": "                else if ( qp().mustAssertOnYieldFailure() ) {",
          "content_same": false
        },
        {
          "line": 471,
          "old_api": null,
          "new_api": "ns",
          "old_text": null,
          "new_text": "_pq.ns()",
          "old_line_content": "                }",
          "new_line_content": "                    msgassertedNoTrace( 15890, str::stream() << \"UserQueryOp::recoverFromYield() failed to recover: \" << _pq.ns() );",
          "content_same": false
        },
        {
          "line": 483,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "_findingStartCursor.get()",
          "old_line_content": "        virtual void next() {",
          "new_line_content": "            if ( _findingStartCursor.get() ) {",
          "content_same": false
        },
        {
          "line": 491,
          "old_api": null,
          "new_api": "done",
          "old_text": null,
          "new_text": "_findingStartCursor->done()",
          "old_line_content": "                }",
          "new_line_content": "                if ( !_findingStartCursor->done() ) {",
          "content_same": false
        },
        {
          "line": 492,
          "old_api": null,
          "new_api": "next",
          "old_text": null,
          "new_text": "_findingStartCursor->next()",
          "old_line_content": "                _capped = true;",
          "new_line_content": "                    _findingStartCursor->next();",
          "content_same": false
        },
        {
          "line": 494,
          "old_api": null,
          "new_api": "done",
          "old_text": null,
          "new_text": "_findingStartCursor->done()",
          "old_line_content": "            }",
          "new_line_content": "                if ( _findingStartCursor->done() ) {",
          "content_same": false
        },
        {
          "line": 495,
          "old_api": null,
          "new_api": "cursor",
          "old_text": null,
          "new_text": "_findingStartCursor->cursor()",
          "old_line_content": "",
          "new_line_content": "                    _c = _findingStartCursor->cursor();",
          "content_same": false
        },
        {
          "line": 502,
          "old_api": null,
          "new_api": "ok",
          "old_text": null,
          "new_text": "_c->ok()",
          "old_line_content": "",
          "new_line_content": "            if ( !_c || !_c->ok() ) {",
          "content_same": false
        },
        {
          "line": 503,
          "old_api": null,
          "new_api": "finish",
          "old_text": null,
          "new_text": "finish( false )",
          "old_line_content": "            if( 0 ) {",
          "new_line_content": "                finish( false );",
          "content_same": false
        },
        {
          "line": 510,
          "old_api": null,
          "new_api": "current",
          "old_text": null,
          "new_text": "_c->current()",
          "old_line_content": "            }",
          "new_line_content": "                cout << \"SCANNING this: \" << this << \" key: \" << _c->currKey() << \" obj: \" << _c->current() << endl;",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 512,
          "old_api": "nscanned",
          "new_api": null,
          "old_text": "_c->nscanned()",
          "new_text": null,
          "old_line_content": "            _nscanned = _c->nscanned();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 520,
          "old_api": "currLoc",
          "new_api": null,
          "old_text": "_c->currLoc()",
          "new_text": null,
          "old_line_content": "                DiskLoc cl = _c->currLoc();",
          "new_line_content": "                // not a match, continue onward",
          "content_same": false
        },
        {
          "line": 521,
          "old_api": "obj",
          "new_api": null,
          "old_text": "cl.obj()",
          "new_text": null,
          "old_line_content": "                if ( _chunkManager && ! _chunkManager->belongsToMe( cl.obj() ) ) { // TODO: should make this covered at some point",
          "new_line_content": "                if ( _details._loadedObject )",
          "content_same": false
        },
        {
          "line": 525,
          "old_api": "getsetdup",
          "new_api": null,
          "old_text": "_c->getsetdup(cl)",
          "new_text": null,
          "old_line_content": "                else if( _c->getsetdup(cl) ) {",
          "new_line_content": "                _nscannedObjects++;",
          "content_same": false
        },
        {
          "line": 533,
          "old_api": "showDiskLoc",
          "new_api": null,
          "old_text": "_pq.showDiskLoc()",
          "new_text": null,
          "old_line_content": "                        _so->add( _pq.returnKey() ? _c->currKey() : _c->current(), _pq.showDiskLoc() ? &cl : 0 );",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 541,
          "old_api": "wantMore",
          "new_api": null,
          "old_text": "_pq.wantMore()",
          "new_text": null,
          "old_line_content": "                            if ( n() >= _pq.getNumToReturn() && !_pq.wantMore() ) {",
          "new_line_content": "                    else if ( _ntoskip > 0 ) {",
          "content_same": false
        },
        {
          "line": 543,
          "old_api": "finish",
          "new_api": null,
          "old_text": "finish( true )",
          "new_text": null,
          "old_line_content": "                                finish( true ); //?",
          "new_line_content": "                    }",
          "content_same": false
        },
        {
          "line": 551,
          "old_api": "currKey",
          "new_api": null,
          "old_text": "_c->currKey()",
          "new_text": null,
          "old_line_content": "                                bb.appendKeys( _c->indexKeyPattern() , _c->currKey() );",
          "new_line_content": "                            }",
          "content_same": false
        },
        {
          "line": 552,
          "old_api": "done",
          "new_api": null,
          "old_text": "bb.done()",
          "new_text": null,
          "old_line_content": "                                bb.done();",
          "new_line_content": "                        }",
          "content_same": false
        },
        {
          "line": 559,
          "old_api": "isValid",
          "new_api": null,
          "old_text": "js.isValid()",
          "new_text": null,
          "old_line_content": "                                assert( js.isValid() );",
          "new_line_content": "                            }",
          "content_same": false
        },
        {
          "line": 563,
          "old_api": "type",
          "new_api": null,
          "old_text": "e.type()",
          "new_text": null,
          "old_line_content": "                                    if ( e.type() == Date || e.type() == Timestamp )",
          "new_line_content": "                            else {",
          "content_same": false
        },
        {
          "line": 567,
          "old_api": "showDiskLoc",
          "new_api": null,
          "old_text": "_pq.showDiskLoc()",
          "new_text": null,
          "old_line_content": "                                fillQueryResultFromObj( _buf , _pq.getFields() , js , (_pq.showDiskLoc() ? &cl : 0));",
          "new_line_content": "                                if ( _oplogReplay ) {",
          "content_same": false
        },
        {
          "line": 571,
          "old_api": "len",
          "new_api": null,
          "old_text": "_buf.len()",
          "new_text": null,
          "old_line_content": "                                if ( _pq.enough( n() ) || _buf.len() >= MaxBytesToReturnToClientAtOnce ) {",
          "new_line_content": "                                }",
          "content_same": false
        },
        {
          "line": 572,
          "old_api": "finish",
          "new_api": null,
          "old_text": "finish( true )",
          "new_text": null,
          "old_line_content": "                                    finish( true );",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 580,
          "old_api": "advance",
          "new_api": null,
          "old_text": "_c->advance()",
          "new_text": null,
          "old_line_content": "                                    if ( _c->advance() ) {",
          "new_line_content": "                                }",
          "content_same": false
        },
        {
          "line": 585,
          "old_api": "finish",
          "new_api": null,
          "old_text": "finish( true )",
          "new_text": null,
          "old_line_content": "                                finish( true );",
          "new_line_content": "                                    _wouldSaveClientCursor = true;",
          "content_same": false
        },
        {
          "line": 592,
          "old_api": "advance",
          "new_api": null,
          "old_text": "_c->advance()",
          "new_text": null,
          "old_line_content": "            _c->advance();",
          "new_line_content": "                                return;",
          "content_same": false
        },
        {
          "line": 597,
          "old_api": "get",
          "new_api": null,
          "old_text": "_c.get()",
          "new_text": null,
          "old_line_content": "            massert( 13638, \"client cursor dropped during explain query yield\", !_pq.isExplain() || _c.get() );",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 599,
          "old_api": "isExplain",
          "new_api": null,
          "old_text": "_pq.isExplain()",
          "new_text": null,
          "old_line_content": "            if ( _pq.isExplain() ) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 600,
          "old_api": "size",
          "new_api": null,
          "old_text": "_so->size()",
          "new_text": null,
          "old_line_content": "                _n = _inMemSort ? _so->size() : _n;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 604,
          "old_api": "getFields",
          "new_api": null,
          "old_text": "_pq.getFields()",
          "new_text": null,
          "old_line_content": "                    _so->fill( _buf, _pq.getFields() , _n );",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 607,
          "old_api": "get",
          "new_api": null,
          "old_text": "_c.get()",
          "new_text": null,
          "old_line_content": "            if ( _c.get() ) {",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 608,
          "old_api": "nscanned",
          "new_api": null,
          "old_text": "_c->nscanned()",
          "new_text": null,
          "old_line_content": "                _nscanned = _c->nscanned();",
          "new_line_content": "            else if ( _inMemSort ) {",
          "content_same": false
        },
        {
          "line": 611,
          "old_api": "setTailable",
          "new_api": null,
          "old_text": "_c->setTailable()",
          "new_text": null,
          "old_line_content": "                    _c->setTailable();",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 618,
          "old_api": "isExplain",
          "new_api": null,
          "old_text": "_pq.isExplain()",
          "new_text": null,
          "old_line_content": "            if ( _pq.isExplain() ) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 619,
          "old_api": "scanAndOrderRequired",
          "new_api": null,
          "old_text": "scanAndOrderRequired()",
          "new_text": null,
          "old_line_content": "                _eb.noteScan( _c.get(), _nscanned, _nscannedObjects, _n, scanAndOrderRequired(),",
          "new_line_content": "                // If the tailing request succeeded.",
          "content_same": false
        },
        {
          "line": 621,
          "old_api": "get",
          "new_api": null,
          "old_text": "_keyFieldsOnly.get()",
          "new_text": null,
          "old_line_content": "                              _nChunkSkips, _keyFieldsOnly.get() > 0 );",
          "new_line_content": "                    _saveClientCursor = true;",
          "content_same": false
        },
        {
          "line": 634,
          "old_api": "setComplete",
          "new_api": null,
          "old_text": "setComplete()",
          "new_text": null,
          "old_line_content": "                setComplete();",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 641,
          "old_api": "fillQueryResultFromObj",
          "new_api": null,
          "old_text": "fillQueryResultFromObj(_buf, 0, obj)",
          "new_text": null,
          "old_line_content": "            fillQueryResultFromObj(_buf, 0, obj);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 644,
          "old_api": "len",
          "new_api": null,
          "old_text": "_buf.len()",
          "new_text": null,
          "old_line_content": "            _response.appendData( _buf.buf(), _buf.len() );",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 645,
          "old_api": "decouple",
          "new_api": null,
          "old_text": "_buf.decouple()",
          "new_text": null,
          "old_line_content": "            _buf.decouple();",
          "new_line_content": "        void finishExplain( const BSONObj &suffix ) {",
          "content_same": false
        },
        {
          "line": 649,
          "old_api": "stopRequested",
          "new_api": null,
          "old_text": "stopRequested()",
          "new_text": null,
          "old_line_content": "            return !_yieldRecoveryFailed && ( _pq.getNumToReturn() != 1 ) && ( ( _n > _pq.getNumToReturn() / 2 ) || ( complete() && !stopRequested() ) );",
          "new_line_content": "            _oldN = 0;",
          "content_same": false
        },
        {
          "line": 653,
          "old_api": "isExplain",
          "new_api": null,
          "old_text": "_pq.isExplain()",
          "new_text": null,
          "old_line_content": "            if ( _pq.isExplain() ) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 654,
          "old_api": "ensureStartScan",
          "new_api": null,
          "old_text": "_eb.ensureStartScan()",
          "new_text": null,
          "old_line_content": "                _eb.ensureStartScan();",
          "new_line_content": "        virtual bool mayRecordPlan() const {",
          "content_same": false
        },
        {
          "line": 657,
          "old_api": "n",
          "new_api": null,
          "old_text": "n()",
          "new_text": null,
          "old_line_content": "            ret->_oldN = n();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 658,
          "old_api": "totalNscanned",
          "new_api": null,
          "old_text": "totalNscanned()",
          "new_text": null,
          "old_line_content": "            ret->_oldNscanned = totalNscanned();",
          "new_line_content": "        virtual QueryOp *_createChild() const {",
          "content_same": false
        },
        {
          "line": 673,
          "old_api": "isNull",
          "new_api": null,
          "old_text": "_slaveReadTill.isNull()",
          "new_text": null,
          "old_line_content": "            if ( _oplogReplay && ! _slaveReadTill.isNull() )",
          "new_line_content": "        long long totalNscanned() const { return _nscanned + _oldNscanned; }",
          "content_same": false
        },
        {
          "line": 674,
          "old_api": "slaveReadTill",
          "new_api": null,
          "old_text": "cc->slaveReadTill( _slaveReadTill )",
          "new_text": null,
          "old_line_content": "                cc->slaveReadTill( _slaveReadTill );",
          "new_line_content": "        long long nscannedObjects() const { return _nscannedObjects + _oldNscannedObjects; }",
          "content_same": false
        },
        {
          "line": 726,
          "old_api": "pq",
          "new_api": null,
          "old_text": "pq( *pq_shared )",
          "new_text": null,
          "old_line_content": "        ParsedQuery& pq( *pq_shared );",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 733,
          "old_api": "log",
          "new_api": null,
          "old_text": "log()",
          "new_text": null,
          "old_line_content": "            log() << \"runQuery called \" << ns << \" \" << jsobj << endl;",
          "new_line_content": "        int ntoskip = q.ntoskip;",
          "content_same": false
        },
        {
          "line": 735,
          "old_api": "debug",
          "new_api": null,
          "old_text": "curop.debug()",
          "new_text": null,
          "old_line_content": "        curop.debug().ns = ns;",
          "new_line_content": "        int queryOptions = q.queryOptions;",
          "content_same": false
        },
        {
          "line": 736,
          "old_api": "getNumToReturn",
          "new_api": null,
          "old_text": "pq.getNumToReturn()",
          "new_text": null,
          "old_line_content": "        curop.debug().ntoreturn = pq.getNumToReturn();",
          "new_line_content": "        const char *ns = q.ns;",
          "content_same": false
        },
        {
          "line": 737,
          "old_api": "setQuery",
          "new_api": null,
          "old_text": "curop.setQuery(jsobj)",
          "new_text": null,
          "old_line_content": "        curop.setQuery(jsobj);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 744,
          "old_api": "debug",
          "new_api": null,
          "old_text": "curop.debug()",
          "new_text": null,
          "old_line_content": "                curop.debug().iscommand = true;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 746,
          "old_api": "markCommand",
          "new_api": null,
          "old_text": "curop.markCommand()",
          "new_text": null,
          "old_line_content": "                curop.markCommand();",
          "new_line_content": "            BufBuilder bb;",
          "content_same": false
        },
        {
          "line": 753,
          "old_api": "len",
          "new_api": null,
          "old_text": "bb.len()",
          "new_text": null,
          "old_line_content": "                curop.debug().responseLength = bb.len();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 754,
          "old_api": "setOperation",
          "new_api": null,
          "old_text": "qr->setOperation(opReply)",
          "new_text": null,
          "old_line_content": "                qr->setOperation(opReply);",
          "new_line_content": "                auto_ptr< QueryResult > qr;",
          "content_same": false
        },
        {
          "line": 247,
          "old_api": "reset",
          "new_api": null,
          "old_text": "ccPointer.reset( new ClientCursor( QueryOption_NoCursorTimeout, cursor, ns ) )",
          "new_text": null,
          "old_line_content": "        ccPointer.reset( new ClientCursor( QueryOption_NoCursorTimeout, cursor, ns ) );",
          "new_line_content": "        try {",
          "content_same": false
        },
        {
          "line": 761,
          "old_api": "uasserted",
          "new_api": null,
          "old_text": "uasserted(13530, \"bad or malformed command request?\")",
          "new_text": null,
          "old_line_content": "                uasserted(13530, \"bad or malformed command request?\");",
          "new_line_content": "                qr->cursorId = 0;",
          "content_same": false
        },
        {
          "line": 250,
          "old_api": "yieldSometimes",
          "new_api": null,
          "old_text": "ccPointer->yieldSometimes( simpleEqualityMatch ? ClientCursor::DontNeed : ClientCursor::MaybeCovered )",
          "new_text": null,
          "old_line_content": "                if ( !ccPointer->yieldSometimes( simpleEqualityMatch ? ClientCursor::DontNeed : ClientCursor::MaybeCovered ) ||",
          "new_line_content": "                    RARELY {",
          "content_same": false
        },
        {
          "line": 249,
          "old_api": "ok",
          "new_api": null,
          "old_text": "cursor->ok()",
          "new_text": null,
          "old_line_content": "            while( cursor->ok() ) {",
          "new_line_content": "                if ( !ccPointer ) {",
          "content_same": false
        },
        {
          "line": 251,
          "old_api": "ok",
          "new_api": null,
          "old_text": "cursor->ok()",
          "new_text": null,
          "old_line_content": "                    !cursor->ok() ) {",
          "new_line_content": "                        // Lazily construct a ClientCursor, avoiding a performance regression when scanning a very",
          "content_same": false
        },
        {
          "line": 769,
          "old_api": "BSONElement",
          "new_api": null,
          "old_text": "BSONElement()",
          "new_text": null,
          "old_line_content": "        BSONElement hint = useHints ? pq.getHint() : BSONElement();",
          "new_line_content": "            return 0;",
          "content_same": false
        },
        {
          "line": 770,
          "old_api": "isExplain",
          "new_api": null,
          "old_text": "pq.isExplain()",
          "new_text": null,
          "old_line_content": "        bool explain = pq.isExplain();",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 771,
          "old_api": "isSnapshot",
          "new_api": null,
          "old_text": "pq.isSnapshot()",
          "new_text": null,
          "old_line_content": "        bool snapshot = pq.isSnapshot();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 772,
          "old_api": "getOrder",
          "new_api": null,
          "old_text": "pq.getOrder()",
          "new_text": null,
          "old_line_content": "        BSONObj order = pq.getOrder();",
          "new_line_content": "        /* --- regular query --- */",
          "content_same": false
        },
        {
          "line": 773,
          "old_api": "getFilter",
          "new_api": null,
          "old_text": "pq.getFilter()",
          "new_text": null,
          "old_line_content": "        BSONObj query = pq.getFilter();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 263,
          "old_api": "get",
          "new_api": null,
          "old_text": "cursor.get()",
          "new_text": null,
          "old_line_content": "                    ( ( !cursor->matcher() || cursor->matcher()->matchesCurrent( cursor.get() ) ) &&",
          "new_line_content": "                // is no need do key deduping because an exact value is specified in the query for all key",
          "content_same": false
        },
        {
          "line": 264,
          "old_api": "currLoc",
          "new_api": null,
          "old_text": "cursor->currLoc()",
          "new_text": null,
          "old_line_content": "                        !cursor->getsetdup( cursor->currLoc() ) ) ) {",
          "new_line_content": "                // fields and duplicate keys are not allowed per document.",
          "content_same": false
        },
        {
          "line": 780,
          "old_api": "out",
          "new_api": null,
          "old_text": "out()",
          "new_text": null,
          "old_line_content": "            out() << \"Bad query object?\\n  jsobj:\";",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 781,
          "old_api": "toString",
          "new_api": null,
          "old_text": "jsobj.toString()",
          "new_text": null,
          "old_line_content": "            out() << jsobj.toString() << \"\\n  query:\";",
          "new_line_content": "        /* The ElemIter will not be happy if this isn't really an object. So throw exception",
          "content_same": false
        },
        {
          "line": 782,
          "old_api": "toString",
          "new_api": null,
          "old_text": "query.toString()",
          "new_text": null,
          "old_line_content": "            out() << query.toString() << endl;",
          "new_line_content": "           here when that is true.",
          "content_same": false
        },
        {
          "line": 783,
          "old_api": "uassert",
          "new_api": null,
          "old_text": "uassert( 10110 , \"bad query object\", false)",
          "new_text": null,
          "old_line_content": "            uassert( 10110 , \"bad query object\", false);",
          "new_line_content": "           (Which may indicate bad data from client.)",
          "content_same": false
        },
        {
          "line": 276,
          "old_api": "advance",
          "new_api": null,
          "old_text": "cursor->advance()",
          "new_text": null,
          "old_line_content": "                cursor->advance();",
          "new_line_content": "                        ++count;",
          "content_same": false
        },
        {
          "line": 278,
          "old_api": "reset",
          "new_api": null,
          "old_text": "ccPointer.reset()",
          "new_text": null,
          "old_line_content": "            ccPointer.reset();",
          "new_line_content": "                            break;",
          "content_same": false
        },
        {
          "line": 790,
          "old_api": "hasOption",
          "new_api": null,
          "old_text": "pq.hasOption( QueryOption_CursorTailable )",
          "new_text": null,
          "old_line_content": "        if ( pq.hasOption( QueryOption_CursorTailable ) ) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 791,
          "old_api": "nsdetails",
          "new_api": null,
          "old_text": "nsdetails( ns )",
          "new_text": null,
          "old_line_content": "            NamespaceDetails *d = nsdetails( ns );",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 792,
          "old_api": "uassert",
          "new_api": null,
          "old_text": "uassert( 13051, \"tailable cursor requested on non capped collection\", d && d->capped )",
          "new_text": null,
          "old_line_content": "            uassert( 13051, \"tailable cursor requested on non capped collection\", d && d->capped );",
          "new_line_content": "        Client::ReadContext ctx( ns , dbpath ); // read locks",
          "content_same": false
        },
        {
          "line": 793,
          "old_api": "BSON",
          "new_api": null,
          "old_text": "BSON( \"$natural\" << 1 )",
          "new_text": null,
          "old_line_content": "            const BSONObj nat1 = BSON( \"$natural\" << 1 );",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 284,
          "old_api": "what",
          "new_api": null,
          "old_text": "e.what()",
          "new_text": null,
          "old_line_content": "            exceptionInfo = e.what();",
          "new_line_content": "            ccPointer.reset();",
          "content_same": false
        },
        {
          "line": 806,
          "old_api": "findIdIndex",
          "new_api": null,
          "old_text": "d->findIdIndex()",
          "new_text": null,
          "old_line_content": "                int i = d->findIdIndex();",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 808,
          "old_api": "strstr",
          "new_api": null,
          "old_text": "strstr( ns , \".system.\" )",
          "new_text": null,
          "old_line_content": "                    if ( strstr( ns , \".system.\" ) == 0 )",
          "new_line_content": "        BSONObj snapshotHint; // put here to keep the data in scope",
          "content_same": false
        },
        {
          "line": 809,
          "old_api": "log",
          "new_api": null,
          "old_text": "log()",
          "new_text": null,
          "old_line_content": "                        log() << \"warning: no _id index on $snapshot query, ns:\" << ns << endl;",
          "new_line_content": "        if( snapshot ) {",
          "content_same": false
        },
        {
          "line": 301,
          "old_api": "get",
          "new_api": null,
          "old_text": "_a.get()",
          "new_text": null,
          "old_line_content": "            if ( !_a.get() ) {",
          "new_line_content": "        // Note: by default we filter out allPlans and oldPlan in the shell's",
          "content_same": false
        },
        {
          "line": 302,
          "old_api": "reset",
          "new_api": null,
          "old_text": "_a.reset( new BSONArrayBuilder() )",
          "new_text": null,
          "old_line_content": "                _a.reset( new BSONArrayBuilder() );",
          "new_line_content": "        // explain() function. If you add any recursive structures, make sure to",
          "content_same": false
        },
        {
          "line": 817,
          "old_api": "indexName",
          "new_api": null,
          "old_text": "d->idx(i).indexName()",
          "new_text": null,
          "old_line_content": "                    b.append(\"$hint\", d->idx(i).indexName());",
          "new_line_content": "                else {",
          "content_same": false
        },
        {
          "line": 306,
          "old_api": "subobjStart",
          "new_api": null,
          "old_text": "_a->subobjStart()",
          "new_text": null,
          "old_line_content": "            BSONObjBuilder b( _a->subobjStart() );",
          "new_line_content": "        void ensureStartScan() {",
          "content_same": false
        },
        {
          "line": 818,
          "old_api": "obj",
          "new_api": null,
          "old_text": "b.obj()",
          "new_text": null,
          "old_line_content": "                    snapshotHint = b.obj();",
          "new_line_content": "                    /* [dm] the name of an _id index tends to vary, so we build the hint the hard way here.",
          "content_same": false
        },
        {
          "line": 819,
          "old_api": "firstElement",
          "new_api": null,
          "old_text": "snapshotHint.firstElement()",
          "new_text": null,
          "old_line_content": "                    hint = snapshotHint.firstElement();",
          "new_line_content": "                       probably need a better way to specify \"use the _id index\" as a hint.  if someone is",
          "content_same": false
        },
        {
          "line": 317,
          "old_api": "reset",
          "new_api": null,
          "old_text": "_b.reset( new BSONObjBuilder() )",
          "new_text": null,
          "old_line_content": "                _b.reset( new BSONObjBuilder() );",
          "new_line_content": "                       int millis, bool hint, int nYields , int nChunkSkips , bool indexOnly ) {",
          "content_same": false
        },
        {
          "line": 831,
          "old_api": "Helpers::findById( c, ns , query , resObject , &nsFound , &indexFound )",
          "new_api": null,
          "old_text": "Helpers::findById( c, ns , query , resObject , &nsFound , &indexFound )",
          "new_text": null,
          "old_line_content": "            bool found = Helpers::findById( c, ns , query , resObject , &nsFound , &indexFound );",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 833,
          "old_api": "objsize",
          "new_api": null,
          "old_text": "resObject.objsize()",
          "new_text": null,
          "old_line_content": "                BufBuilder bb(sizeof(QueryResult)+resObject.objsize()+32);",
          "new_line_content": "            bool indexFound = false;",
          "content_same": false
        },
        {
          "line": 322,
          "old_api": "toString",
          "new_api": null,
          "old_text": "c->toString()",
          "new_text": null,
          "old_line_content": "            *_b << \"cursor\" << c->toString();",
          "new_line_content": "            if ( _i == 0 ) {",
          "content_same": false
        },
        {
          "line": 834,
          "old_api": "skip",
          "new_api": null,
          "old_text": "bb.skip(sizeof(QueryResult))",
          "new_text": null,
          "old_line_content": "                bb.skip(sizeof(QueryResult));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 324,
          "old_api": "appendNumber",
          "new_api": null,
          "old_text": "_b->appendNumber( \"nscannedObjects\", nscannedObjects )",
          "new_text": null,
          "old_line_content": "            _b->appendNumber( \"nscannedObjects\", nscannedObjects );",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 843,
          "old_api": "decouple",
          "new_api": null,
          "old_text": "bb.decouple()",
          "new_text": null,
          "old_line_content": "                bb.decouple();",
          "new_line_content": "                if ( found ) {",
          "content_same": false
        },
        {
          "line": 844,
          "old_api": "setResultFlagsToOk",
          "new_api": null,
          "old_text": "qr->setResultFlagsToOk()",
          "new_text": null,
          "old_line_content": "                qr->setResultFlagsToOk();",
          "new_line_content": "                    n = 1;",
          "content_same": false
        },
        {
          "line": 334,
          "old_api": "isMultiKey",
          "new_api": null,
          "old_text": "c->isMultiKey()",
          "new_text": null,
          "old_line_content": "            *_b << \"isMultiKey\" << c->isMultiKey();",
          "new_line_content": "                *_b << \"scanAndOrder\" << true;",
          "content_same": false
        },
        {
          "line": 847,
          "old_api": "len",
          "new_api": null,
          "old_text": "bb.len()",
          "new_text": null,
          "old_line_content": "                curop.debug().responseLength = bb.len();",
          "new_line_content": "                auto_ptr< QueryResult > qr;",
          "content_same": false
        },
        {
          "line": 337,
          "old_api": "prettyIndexBounds",
          "new_api": null,
          "old_text": "c->prettyIndexBounds()",
          "new_text": null,
          "old_line_content": "            *_b << \"indexBounds\" << c->prettyIndexBounds();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 339,
          "old_api": "explainDetails",
          "new_api": null,
          "old_text": "c->explainDetails( *_b )",
          "new_text": null,
          "old_line_content": "            c->explainDetails( *_b );",
          "new_line_content": "            *_b << \"nChunkSkips\" << nChunkSkips;",
          "content_same": false
        },
        {
          "line": 852,
          "old_api": "release",
          "new_api": null,
          "old_text": "qr.release()",
          "new_text": null,
          "old_line_content": "                result.setData( qr.release(), true );",
          "new_line_content": "                ",
          "content_same": false
        },
        {
          "line": 342,
          "old_api": "arr",
          "new_api": null,
          "old_text": "_a->arr()",
          "new_text": null,
          "old_line_content": "                *_b << \"allPlans\" << _a->arr();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 347,
          "old_api": "reset",
          "new_api": null,
          "old_text": "_a.reset( 0 )",
          "new_text": null,
          "old_line_content": "            _a.reset( 0 );",
          "new_line_content": "            if ( !hint ) {",
          "content_same": false
        },
        {
          "line": 860,
          "old_api": "hasIndexSpecifier",
          "new_api": null,
          "old_text": "pq.hasIndexSpecifier()",
          "new_text": null,
          "old_line_content": "        if ( explain && ! pq.hasIndexSpecifier() ) {",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 862,
          "old_api": "usingCachedPlan",
          "new_api": null,
          "old_text": "mps.usingCachedPlan()",
          "new_text": null,
          "old_line_content": "            if ( mps.usingCachedPlan() )",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 863,
          "old_api": "oldExplain",
          "new_api": null,
          "old_text": "mps.oldExplain()",
          "new_text": null,
          "old_line_content": "                oldPlan = mps.oldExplain();",
          "new_line_content": "        // regular, not QO bypass query",
          "content_same": false
        },
        {
          "line": 865,
          "old_api": "getMax",
          "new_api": null,
          "old_text": "pq.getMax()",
          "new_text": null,
          "old_line_content": "        auto_ptr< MultiPlanScanner > mps( new MultiPlanScanner( ns, query, order, &hint, !explain, pq.getMin(), pq.getMax(), false, true ) );",
          "new_line_content": "        BSONObj oldPlan;",
          "content_same": false
        },
        {
          "line": 354,
          "old_api": "appendNumber",
          "new_api": null,
          "old_text": "b.appendNumber( \"nscanned\", nscanned )",
          "new_text": null,
          "old_line_content": "                b.appendNumber( \"nscanned\", nscanned );",
          "new_line_content": "            ++_i;",
          "content_same": false
        },
        {
          "line": 355,
          "old_api": "appendNumber",
          "new_api": null,
          "old_text": "b.appendNumber( \"nscannedObjects\", nscannedObjects )",
          "new_text": null,
          "old_line_content": "                b.appendNumber( \"nscannedObjects\", nscannedObjects );",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 358,
          "old_api": "appendElements",
          "new_api": null,
          "old_text": "b.appendElements( suffix )",
          "new_text": null,
          "old_line_content": "                b.appendElements( suffix );",
          "new_line_content": "                BSONObjBuilder b;",
          "content_same": false
        },
        {
          "line": 870,
          "old_api": "firstElement",
          "new_api": null,
          "old_text": "oldPlan.firstElement().embeddedObject().firstElement().embeddedObject()",
          "new_text": null,
          "old_line_content": "                bb.append( \"oldPlan\", oldPlan.firstElement().embeddedObject().firstElement().embeddedObject() );",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 363,
          "old_api": "getHostNameCached",
          "new_api": null,
          "old_text": "getHostNameCached()",
          "new_text": null,
          "old_line_content": "            \thost << getHostNameCached() << \":\" << cmdLine.port;",
          "new_line_content": "                b << \"millis\" << millis;",
          "content_same": false
        },
        {
          "line": 366,
          "old_api": "obj",
          "new_api": null,
          "old_text": "_b->obj()",
          "new_text": null,
          "old_line_content": "                return _b->obj();",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 878,
          "old_api": "exception",
          "new_api": null,
          "old_text": "dqo.exception()",
          "new_text": null,
          "old_line_content": "            throw MsgAssertionException( dqo.exception() );",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 880,
          "old_api": "finishExplain",
          "new_api": null,
          "old_text": "dqo.finishExplain( explainSuffix )",
          "new_text": null,
          "old_line_content": "            dqo.finishExplain( explainSuffix );",
          "new_line_content": "        UserQueryOp original( pq, result, eb, curop );",
          "content_same": false
        },
        {
          "line": 882,
          "old_api": "n",
          "new_api": null,
          "old_text": "dqo.n()",
          "new_text": null,
          "old_line_content": "        n = dqo.n();",
          "new_line_content": "        UserQueryOp &dqo = *o;",
          "content_same": false
        },
        {
          "line": 891,
          "old_api": "mayRunMore",
          "new_api": null,
          "old_text": "mps->mayRunMore()",
          "new_text": null,
          "old_line_content": "        if ( dqo.saveClientCursor() || ( dqo.wouldSaveClientCursor() && mps->mayRunMore() ) ) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 893,
          "old_api": "mayRunMore",
          "new_api": null,
          "old_text": "mps->mayRunMore()",
          "new_text": null,
          "old_line_content": "            bool moreClauses = mps->mayRunMore();",
          "new_line_content": "        if( logLevel >= 5 )",
          "content_same": false
        },
        {
          "line": 383,
          "old_api": "getSkip",
          "new_api": null,
          "old_text": "pq.getSkip()",
          "new_text": null,
          "old_line_content": "            _ntoskip( pq.getSkip() ) ,",
          "new_line_content": "    class UserQueryOp : public QueryOp {",
          "content_same": false
        },
        {
          "line": 896,
          "old_api": "matcher",
          "new_api": null,
          "old_text": "dqo.matcher( cursor )",
          "new_text": null,
          "old_line_content": "                shared_ptr< Cursor > multi( new MultiCursor( mps, cursor, dqo.matcher( cursor ), dqo ) );",
          "new_line_content": "        const char * exhaust = 0;",
          "content_same": false
        },
        {
          "line": 900,
          "old_api": "matcher",
          "new_api": null,
          "old_text": "dqo.matcher( cursor )",
          "new_text": null,
          "old_line_content": "                if( ! cursor->matcher() ) cursor->setMatcher( dqo.matcher( cursor ) );",
          "new_line_content": "            if ( moreClauses ) {",
          "content_same": false
        },
        {
          "line": 901,
          "old_api": "getOwned",
          "new_api": null,
          "old_text": "jsobj.getOwned()",
          "new_text": null,
          "old_line_content": "                cc = new ClientCursor( queryOptions, cursor, ns, jsobj.getOwned() );",
          "new_line_content": "                // this MultiCursor will use a dumb NoOp to advance(), so no need to specify mayYield",
          "content_same": false
        },
        {
          "line": 390,
          "old_api": "ShardChunkManagerPtr",
          "new_api": null,
          "old_text": "ShardChunkManagerPtr()",
          "new_text": null,
          "old_line_content": "                           shardingState.getShardChunkManager(pq.ns()) : ShardChunkManagerPtr() ),",
          "new_line_content": "            _nscanned(0), _oldNscanned(0), _nscannedObjects(0), _oldNscannedObjects(0),",
          "content_same": false
        },
        {
          "line": 904,
          "old_api": "getChunkManager",
          "new_api": null,
          "old_text": "dqo.getChunkManager()",
          "new_text": null,
          "old_line_content": "            cc->setChunkManager( dqo.getChunkManager() );",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 908,
          "old_api": "setPos",
          "new_api": null,
          "old_text": "cc->setPos( n )",
          "new_text": null,
          "old_line_content": "            cc->setPos( n );",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 913,
          "old_api": "c",
          "new_api": null,
          "old_text": "cc->c()->tailable()",
          "new_text": null,
          "old_line_content": "            if ( !cc->ok() && cc->c()->tailable() )",
          "new_line_content": "            DEV tlog(2) << \"query has more, cursorid: \" << cursorid << endl;",
          "content_same": false
        },
        {
          "line": 404,
          "old_api": "empty",
          "new_api": null,
          "old_text": "_response.empty()",
          "new_text": null,
          "old_line_content": "            if ( _response.empty() ) {",
          "new_line_content": "            _curop( curop ),",
          "content_same": false
        },
        {
          "line": 405,
          "old_api": "skip",
          "new_api": null,
          "old_text": "_buf.skip( sizeof( QueryResult ) )",
          "new_text": null,
          "old_line_content": "                _buf.skip( sizeof( QueryResult ) );",
          "new_line_content": "            _yieldRecoveryFailed()",
          "content_same": false
        },
        {
          "line": 917,
          "old_api": "debug",
          "new_api": null,
          "old_text": "curop.debug()",
          "new_text": null,
          "old_line_content": "                curop.debug().exhaust = true;",
          "new_line_content": "            cc->originalMessage = m;",
          "content_same": false
        },
        {
          "line": 409,
          "old_api": "qp",
          "new_api": null,
          "old_text": "qp()",
          "new_text": null,
          "old_line_content": "                _findingStartCursor.reset( new FindingStartCursor( qp() ) );",
          "new_line_content": "            // only need to put the QueryResult fields there if we're building the first buffer in the message.",
          "content_same": false
        },
        {
          "line": 922,
          "old_api": "header",
          "new_api": null,
          "old_text": "result.header()",
          "new_text": null,
          "old_line_content": "        QueryResult *qr = (QueryResult *) result.header();",
          "new_line_content": "                exhaust = ns;",
          "content_same": false
        },
        {
          "line": 924,
          "old_api": "setResultFlagsToOk",
          "new_api": null,
          "old_text": "qr->setResultFlagsToOk()",
          "new_text": null,
          "old_line_content": "        qr->setResultFlagsToOk();",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 413,
          "old_api": "getSkip",
          "new_api": null,
          "old_text": "_pq.getSkip()",
          "new_text": null,
          "old_line_content": "                _c = qp().newCursor( DiskLoc() , _pq.getNumToReturn() + _pq.getSkip() );",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 414,
          "old_api": "capped",
          "new_api": null,
          "old_text": "_c->capped()",
          "new_text": null,
          "old_line_content": "                _capped = _c->capped();",
          "new_line_content": "            if ( _oplogReplay ) {",
          "content_same": false
        },
        {
          "line": 926,
          "old_api": "debug",
          "new_api": null,
          "old_text": "curop.debug()",
          "new_text": null,
          "old_line_content": "        curop.debug().responseLength = qr->len;",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 927,
          "old_api": "setOperation",
          "new_api": null,
          "old_text": "qr->setOperation(opReply)",
          "new_text": null,
          "old_line_content": "        qr->setOperation(opReply);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 417,
          "old_api": "getFields",
          "new_api": null,
          "old_text": "_pq.getFields()",
          "new_text": null,
          "old_line_content": "                if ( _c->modifiedKeys() == false && _c->isMultiKey() == false && _pq.getFields() ) {",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 418,
          "old_api": "indexKeyPattern",
          "new_api": null,
          "old_text": "_c->indexKeyPattern()",
          "new_text": null,
          "old_line_content": "                    _keyFieldsOnly.reset( _pq.getFields()->checkKey( _c->indexKeyPattern() ) );",
          "new_line_content": "            else {",
          "content_same": false
        },
        {
          "line": 931,
          "old_api": "elapsedMillis",
          "new_api": null,
          "old_text": "curop.elapsedMillis()",
          "new_text": null,
          "old_line_content": "        int duration = curop.elapsedMillis();",
          "new_line_content": "        // qr->len is updated automatically by appendData()",
          "content_same": false
        },
        {
          "line": 422,
          "old_api": "scanAndOrderRequired",
          "new_api": null,
          "old_text": "qp().scanAndOrderRequired()",
          "new_text": null,
          "old_line_content": "            if ( qp().scanAndOrderRequired() ) {",
          "new_line_content": "                // setup check for if we can only use index to extract",
          "content_same": false
        },
        {
          "line": 934,
          "old_api": "debug",
          "new_api": null,
          "old_text": "curop.debug()",
          "new_text": null,
          "old_line_content": "            curop.debug().nscanned = (int) nscanned;",
          "new_line_content": "        qr->startingFrom = 0;",
          "content_same": false
        },
        {
          "line": 935,
          "old_api": "debug",
          "new_api": null,
          "old_text": "curop.debug()",
          "new_text": null,
          "old_line_content": "            curop.debug().ntoskip = ntoskip;",
          "new_line_content": "        qr->nReturned = n;",
          "content_same": false
        },
        {
          "line": 427,
          "old_api": "isExplain",
          "new_api": null,
          "old_text": "_pq.isExplain()",
          "new_text": null,
          "old_line_content": "            if ( _pq.isExplain() ) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 435,
          "old_api": "prepareToYield",
          "new_api": null,
          "old_text": "_findingStartCursor->prepareToYield()",
          "new_text": null,
          "old_line_content": "                return _findingStartCursor->prepareToYield();",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 439,
          "old_api": "ns",
          "new_api": null,
          "old_text": "_pq.ns()",
          "new_text": null,
          "old_line_content": "                    _cc.reset( new ClientCursor( QueryOption_NoCursorTimeout , _c , _pq.ns() ) );",
          "new_line_content": "        virtual bool prepareToYield() {",
          "content_same": false
        },
        {
          "line": 442,
          "old_api": "prepareToYield",
          "new_api": null,
          "old_text": "_cc->prepareToYield( _yieldData )",
          "new_text": null,
          "old_line_content": "\t                return _cc->prepareToYield( _yieldData );",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 452,
          "old_api": "get",
          "new_api": null,
          "old_text": "_findingStartCursor.get()",
          "new_text": null,
          "old_line_content": "            if ( _findingStartCursor.get() ) {",
          "new_line_content": "            return true;",
          "content_same": false
        },
        {
          "line": 453,
          "old_api": "recoverFromYield",
          "new_api": null,
          "old_text": "_findingStartCursor->recoverFromYield()",
          "new_text": null,
          "old_line_content": "                _findingStartCursor->recoverFromYield();",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 455,
          "old_api": "ClientCursor::recoverFromYield( _yieldData )",
          "new_api": null,
          "old_text": "ClientCursor::recoverFromYield( _yieldData )",
          "new_text": null,
          "old_line_content": "            else if ( _cc && !ClientCursor::recoverFromYield( _yieldData ) ) {",
          "new_line_content": "        virtual void recoverFromYield() {",
          "content_same": false
        },
        {
          "line": 457,
          "old_api": "reset",
          "new_api": null,
          "old_text": "_c.reset()",
          "new_text": null,
          "old_line_content": "                _c.reset();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 462,
          "old_api": "ns",
          "new_api": null,
          "old_text": "_pq.ns()",
          "new_text": null,
          "old_line_content": "                    msgassertedNoTrace( 13338, str::stream() << \"capped cursor overrun during query: \" << _pq.ns() );",
          "new_line_content": "                _yieldRecoveryFailed = true;",
          "content_same": false
        },
        {
          "line": 477,
          "old_api": "get",
          "new_api": null,
          "old_text": "_findingStartCursor.get()",
          "new_text": null,
          "old_line_content": "            if ( _findingStartCursor.get() ) {",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 480,
          "old_api": "nscanned",
          "new_api": null,
          "old_text": "_c->nscanned()",
          "new_text": null,
          "old_line_content": "            return _c.get() ? _c->nscanned() : _nscanned;",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 484,
          "old_api": "get",
          "new_api": null,
          "old_text": "_findingStartCursor.get()",
          "new_text": null,
          "old_line_content": "            if ( _findingStartCursor.get() ) {",
          "new_line_content": "                return 0; // should only be one query plan, so value doesn't really matter.",
          "content_same": false
        },
        {
          "line": 485,
          "old_api": "done",
          "new_api": null,
          "old_text": "_findingStartCursor->done()",
          "new_text": null,
          "old_line_content": "                if ( !_findingStartCursor->done() ) {",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 488,
          "old_api": "done",
          "new_api": null,
          "old_text": "_findingStartCursor->done()",
          "new_text": null,
          "old_line_content": "                if ( _findingStartCursor->done() ) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 489,
          "old_api": "cursor",
          "new_api": null,
          "old_text": "_findingStartCursor->cursor()",
          "new_text": null,
          "old_line_content": "                    _c = _findingStartCursor->cursor();",
          "new_line_content": "        virtual void next() {",
          "content_same": false
        },
        {
          "line": 497,
          "old_api": "finish",
          "new_api": null,
          "old_text": "finish( false )",
          "new_text": null,
          "old_line_content": "                finish( false );",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 501,
          "old_api": "getNumToReturn",
          "new_api": null,
          "old_text": "_pq.getNumToReturn()",
          "new_text": null,
          "old_line_content": "            bool mayCreateCursor1 = _pq.wantMore() && ! _inMemSort && _pq.getNumToReturn() != 1 && useCursors;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 504,
          "old_api": "current",
          "new_api": null,
          "old_text": "_c->current()",
          "new_text": null,
          "old_line_content": "                cout << \"SCANNING this: \" << this << \" key: \" << _c->currKey() << \" obj: \" << _c->current() << endl;",
          "new_line_content": "                return;",
          "content_same": false
        },
        {
          "line": 508,
          "old_api": "finish",
          "new_api": null,
          "old_text": "finish( true )",
          "new_text": null,
          "old_line_content": "                finish( true ); //?",
          "new_line_content": "",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 78,
      "total_additions": 151,
      "total_deletions": 152,
      "total_api_changes": 381
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 9,
        "api_related_lines": 381,
        "non_api_lines": 3,
        "non_api_line_numbers": [
          252,
          254,
          255
        ]
      }
    },
    "api_calls_before": 428,
    "api_calls_after": 427,
    "diff_info": {
      "added_lines": 8,
      "removed_lines": 2,
      "total_diff_lines": 24
    }
  }
}
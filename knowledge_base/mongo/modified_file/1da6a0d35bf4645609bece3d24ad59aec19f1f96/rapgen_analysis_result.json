{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/mongo/modified_file/1da6a0d35bf4645609bece3d24ad59aec19f1f96",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/mongo/modified_file/1da6a0d35bf4645609bece3d24ad59aec19f1f96/before.cpp",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/mongo/modified_file/1da6a0d35bf4645609bece3d24ad59aec19f1f96/after.cpp",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/mongo/modified_file/1da6a0d35bf4645609bece3d24ad59aec19f1f96/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": true,
    "api_changes": {
      "replacements": [
        {
          "line": 869,
          "old_api": "nsToDatabase",
          "new_api": "getStringField",
          "old_text": "nsToDatabase(ns, clientName)",
          "new_text": "op.getStringField(\"ns\")",
          "old_line_content": "        nsToDatabase(ns, clientName);",
          "new_line_content": "        const char *ns = op.getStringField(\"ns\");",
          "content_same": false
        },
        {
          "line": 894,
          "old_api": "min",
          "new_api": "get",
          "old_text": "min(8, cmdLine.pretouch)",
          "new_text": "tp.get()",
          "old_line_content": "                        int nthr = min(8, cmdLine.pretouch);",
          "new_line_content": "                    if( tp.get() == 0 ) {",
          "content_same": false
        },
        {
          "line": 895,
          "old_api": "max",
          "new_api": "min",
          "old_text": "max(nthr, 1)",
          "new_text": "min(8, cmdLine.pretouch)",
          "old_line_content": "                        nthr = max(nthr, 1);",
          "new_line_content": "                        int nthr = min(8, cmdLine.pretouch);",
          "content_same": false
        },
        {
          "line": 896,
          "old_api": "reset",
          "new_api": "max",
          "old_text": "tp.reset( new ThreadPool(nthr) )",
          "new_text": "max(nthr, 1)",
          "old_line_content": "                        tp.reset( new ThreadPool(nthr) );",
          "new_line_content": "                        nthr = max(nthr, 1);",
          "content_same": false
        },
        {
          "line": 905,
          "old_api": "schedule",
          "new_api": "size",
          "old_text": "tp->schedule(pretouchN, v, a, b)",
          "new_text": "v.size()",
          "old_line_content": "                        tp->schedule(pretouchN, v, a, b);",
          "new_line_content": "                        if( b >= v.size() ) b = v.size() - 1;",
          "content_same": false
        },
        {
          "line": 911,
          "old_api": "join",
          "new_api": "pretouchOperation",
          "old_text": "tp->join()",
          "new_text": "pretouchOperation(op)",
          "old_line_content": "                    tp->join();",
          "new_line_content": "                    pretouchOperation(op);",
          "content_same": false
        },
        {
          "line": 912,
          "old_api": "size",
          "new_api": "join",
          "old_text": "v.size()",
          "new_text": "tp->join()",
          "old_line_content": "                    countdown = v.size();",
          "new_line_content": "                    tp->join();",
          "content_same": false
        },
        {
          "line": 930,
          "old_api": "SyncException",
          "new_api": "log",
          "old_text": "SyncException()",
          "new_text": "log()",
          "old_line_content": "            throw SyncException();",
          "new_line_content": "            log() << \"replAllDead, throwing SyncException: \" << replAllDead << endl;",
          "content_same": false
        },
        {
          "line": 937,
          "old_api": "count",
          "new_api": "db",
          "old_text": "incompleteCloneDbs.count( clientName )",
          "new_text": "ctx.db()->isEmpty()",
          "old_line_content": "        bool incompleteClone = incompleteCloneDbs.count( clientName ) != 0;",
          "new_line_content": "        bool empty = ctx.db()->isEmpty();",
          "content_same": false
        },
        {
          "line": 945,
          "old_api": "applyOperation",
          "new_api": "getStringField",
          "old_text": "applyOperation( op )",
          "new_text": "op.getStringField( \"op\" )",
          "old_line_content": "            applyOperation( op );",
          "new_line_content": "        if ( strcmp( clientName, \"admin\" ) == 0 && *op.getStringField( \"op\" ) == 'c' ) {",
          "content_same": false
        },
        {
          "line": 967,
          "old_api": "erase",
          "new_api": "db",
          "old_text": "addDbNextPass.erase(clientName)",
          "new_text": "ctx.db()",
          "old_line_content": "                addDbNextPass.erase(clientName);",
          "new_line_content": "                resync(ctx.db()->name);",
          "content_same": false
        },
        {
          "line": 975,
          "old_api": "haveId",
          "new_api": "idForOp",
          "old_text": "idTracker.haveId( ns, id )",
          "new_text": "idForOp( op, mod )",
          "old_line_content": "                if ( !idTracker.haveId( ns, id ) ) {",
          "new_line_content": "                BSONObj id = idForOp( op, mod );",
          "content_same": false
        },
        {
          "line": 976,
          "old_api": "applyOperation",
          "new_api": "haveId",
          "old_text": "applyOperation( op )",
          "new_text": "idTracker.haveId( ns, id )",
          "old_line_content": "                    applyOperation( op );    ",
          "new_line_content": "                if ( !idTracker.haveId( ns, id ) ) {",
          "content_same": false
        },
        {
          "line": 977,
          "old_api": "haveModId",
          "new_api": "applyOperation",
          "old_text": "idTracker.haveModId( ns, id )",
          "new_text": "applyOperation( op )",
          "old_line_content": "                } else if ( idTracker.haveModId( ns, id ) ) {",
          "new_line_content": "                    applyOperation( op );    ",
          "content_same": false
        },
        {
          "line": 978,
          "old_api": "log",
          "new_api": "haveModId",
          "old_text": "log( 6 )",
          "new_text": "idTracker.haveModId( ns, id )",
          "old_line_content": "                    log( 6 ) << \"skipping operation matching mod id object \" << op << endl;",
          "new_line_content": "                } else if ( idTracker.haveModId( ns, id ) ) {",
          "content_same": false
        },
        {
          "line": 981,
          "old_api": "logOp",
          "new_api": "Helpers::findOne( ns, id, existing )",
          "old_text": "logOp( \"i\", ns, existing )",
          "new_text": "Helpers::findOne( ns, id, existing )",
          "old_line_content": "                        logOp( \"i\", ns, existing );",
          "new_line_content": "                    if ( Helpers::findOne( ns, id, existing ) )",
          "content_same": false
        },
        {
          "line": 995,
          "old_api": "getObjectField",
          "new_api": "getStringField",
          "old_text": "op.getObjectField( \"o\" )",
          "new_text": "op.getStringField( \"op\" )",
          "old_line_content": "        BSONObj o = op.getObjectField( \"o\" );",
          "new_line_content": "        const char *opType = op.getStringField( \"op\" );",
          "content_same": false
        },
        {
          "line": 1001,
          "old_api": "BSONObj",
          "new_api": "getObjectID",
          "old_text": "BSONObj()",
          "new_text": "o.getObjectID( id )",
          "old_line_content": "                    return BSONObj();                    ",
          "new_line_content": "                if ( !o.getObjectID( id ) )",
          "content_same": false
        },
        {
          "line": 1002,
          "old_api": "append",
          "new_api": "BSONObj",
          "old_text": "idBuilder.append( id )",
          "new_text": "BSONObj()",
          "old_line_content": "                idBuilder.append( id );",
          "new_line_content": "                    return BSONObj();                    ",
          "content_same": false
        },
        {
          "line": 1003,
          "old_api": "obj",
          "new_api": "append",
          "old_text": "idBuilder.obj()",
          "new_text": "idBuilder.append( id )",
          "old_line_content": "                return idBuilder.obj();",
          "new_line_content": "                idBuilder.append( id );",
          "content_same": false
        },
        {
          "line": 1007,
          "old_api": "firstElement",
          "new_api": "getObjectField",
          "old_text": "o2.firstElement().fieldName()",
          "new_text": "op.getObjectField( \"o2\" )",
          "old_line_content": "                if ( strcmp( o2.firstElement().fieldName(), \"_id\" ) != 0 )",
          "new_line_content": "                BSONObj o2 = op.getObjectField( \"o2\" );",
          "content_same": false
        },
        {
          "line": 1008,
          "old_api": "BSONObj",
          "new_api": "firstElement",
          "old_text": "BSONObj()",
          "new_text": "o2.firstElement().fieldName()",
          "old_line_content": "                    return BSONObj();",
          "new_line_content": "                if ( strcmp( o2.firstElement().fieldName(), \"_id\" ) != 0 )",
          "content_same": false
        },
        {
          "line": 1009,
          "old_api": "firstElement",
          "new_api": "BSONObj",
          "old_text": "o.firstElement().fieldName()",
          "new_text": "BSONObj()",
          "old_line_content": "                if ( o.firstElement().fieldName()[ 0 ] == '$' )",
          "new_line_content": "                    return BSONObj();",
          "content_same": false
        },
        {
          "line": 1030,
          "old_api": "isEmpty",
          "new_api": "idForOp",
          "old_text": "id.isEmpty()",
          "new_text": "idForOp( op, mod )",
          "old_line_content": "        if ( !id.isEmpty() ) {",
          "new_line_content": "        BSONObj id = idForOp( op, mod );",
          "content_same": false
        },
        {
          "line": 1031,
          "old_api": "getStringField",
          "new_api": "isEmpty",
          "old_text": "op.getStringField( \"ns\" )",
          "new_text": "id.isEmpty()",
          "old_line_content": "            const char *ns = op.getStringField( \"ns\" );",
          "new_line_content": "        if ( !id.isEmpty() ) {",
          "content_same": false
        },
        {
          "line": 1037,
          "old_api": "haveId",
          "new_api": "haveModId",
          "old_text": "idTracker.haveId( ns, id, true )",
          "new_text": "idTracker.haveModId( ns, id, true )",
          "old_line_content": "            idTracker.haveId( ns, id, true );",
          "new_line_content": "                idTracker.haveModId( ns, id, true );",
          "content_same": false
        },
        {
          "line": 1045,
          "old_api": "string",
          "new_api": "empty",
          "old_text": "string(\"^\")",
          "new_text": "only.empty()",
          "old_line_content": "            b.appendRegex(\"ns\", string(\"^\") + only);",
          "new_line_content": "        if ( !only.empty() ) {",
          "content_same": false
        },
        {
          "line": 1048,
          "old_api": "isEmpty",
          "new_api": "BSON",
          "old_text": "last.isEmpty()",
          "new_text": "BSON( \"$natural\" << -1 )",
          "old_line_content": "        if ( !last.isEmpty() ) {",
          "new_line_content": "        BSONObj last = oplogReader.findOne( _ns.c_str(), Query( b.done() ).sort( BSON( \"$natural\" << -1 ) ) );",
          "content_same": false
        },
        {
          "line": 1049,
          "old_api": "getField",
          "new_api": "isEmpty",
          "old_text": "last.getField( \"ts\" )",
          "new_text": "last.isEmpty()",
          "old_line_content": "            BSONElement ts = last.getField( \"ts\" );",
          "new_line_content": "        if ( !last.isEmpty() ) {",
          "content_same": false
        },
        {
          "line": 1050,
          "old_api": "type",
          "new_api": "getField",
          "old_text": "ts.type()",
          "new_text": "last.getField( \"ts\" )",
          "old_line_content": "            massert( 10386 ,  \"non Date ts found: \" + last.toString(), ts.type() == Date || ts.type() == Timestamp );",
          "new_line_content": "            BSONElement ts = last.getField( \"ts\" );",
          "content_same": false
        },
        {
          "line": 1051,
          "old_api": "date",
          "new_api": "type",
          "old_text": "ts.date()",
          "new_text": "ts.type()",
          "old_line_content": "            syncedTo = OpTime( ts.date() );",
          "new_line_content": "            massert( 10386 ,  \"non Date ts found: \" + last.toString(), ts.type() == Date || ts.type() == Timestamp );",
          "content_same": false
        },
        {
          "line": 1058,
          "old_api": "ok",
          "new_api": "BSON",
          "old_text": "c->ok()",
          "new_text": "BSON( \"$natural\" << -1 )",
          "old_line_content": "        if ( c->ok() )",
          "new_line_content": "        shared_ptr<Cursor> c = findTableScan( \"local.oplog.$main\", BSON( \"$natural\" << -1 ) );",
          "content_same": false
        },
        {
          "line": 1059,
          "old_api": "getField",
          "new_api": "ok",
          "old_text": "c->current().getField( \"ts\" ).date()",
          "new_text": "c->ok()",
          "old_line_content": "            return OpTime( c->current().getField( \"ts\" ).date() );        ",
          "new_line_content": "        if ( c->ok() )",
          "content_same": false
        },
        {
          "line": 1060,
          "old_api": "OpTime",
          "new_api": "getField",
          "old_text": "OpTime()",
          "new_text": "c->current().getField( \"ts\" ).date()",
          "old_line_content": "        return OpTime();",
          "new_line_content": "            return OpTime( c->current().getField( \"ts\" ).date() );        ",
          "content_same": false
        },
        {
          "line": 1072,
          "old_api": "conn",
          "new_api": "log",
          "old_text": "massert( 10387 ,  \"request to kill slave replication failed\",\n                oplogReader.conn()->simpleCommand( \"admin\", 0, \"forcedead\" ) )",
          "new_text": "log()",
          "old_line_content": "        massert( 10387 ,  \"request to kill slave replication failed\",",
          "new_line_content": "        log() << \"Host: \" << hostName << \" paired: \" << paired << endl;",
          "content_same": false
        },
        {
          "line": 1074,
          "old_api": "syncToTailOfRemoteLog",
          "new_api": "conn",
          "old_text": "syncToTailOfRemoteLog()",
          "new_text": "oplogReader.conn()->simpleCommand( \"admin\", 0, \"forcedead\" )",
          "old_line_content": "        syncToTailOfRemoteLog();",
          "new_line_content": "                oplogReader.conn()->simpleCommand( \"admin\", 0, \"forcedead\" ) );",
          "content_same": false
        },
        {
          "line": 1078,
          "old_api": "save",
          "new_api": "nextLastSavedLocalTs",
          "old_text": "save()",
          "new_text": "nextLastSavedLocalTs()",
          "old_line_content": "            save();",
          "new_line_content": "            setLastSavedLocalTs( nextLastSavedLocalTs() );",
          "content_same": false
        },
        {
          "line": 1079,
          "old_api": "resetCursor",
          "new_api": "save",
          "old_text": "oplogReader.resetCursor()",
          "new_text": "save()",
          "old_line_content": "            oplogReader.resetCursor();",
          "new_line_content": "            save();",
          "content_same": false
        },
        {
          "line": 1088,
          "old_api": "current",
          "new_api": "advance",
          "old_text": "localLog->current()",
          "new_text": "localLog->advance()",
          "old_line_content": "            BSONObj op = localLog->current();",
          "new_line_content": "        for( ; localLog->ok(); localLog->advance() ) {",
          "content_same": false
        },
        {
          "line": 1089,
          "old_api": "getField",
          "new_api": "current",
          "old_text": "localLog->current().getField( \"ts\" ).date()",
          "new_text": "localLog->current()",
          "old_line_content": "            OpTime ts( localLog->current().getField( \"ts\" ).date() );",
          "new_line_content": "            BSONObj op = localLog->current();",
          "content_same": false
        },
        {
          "line": 1090,
          "old_api": "isNull",
          "new_api": "getField",
          "old_text": "newTail.isNull()",
          "new_text": "localLog->current().getField( \"ts\" ).date()",
          "old_line_content": "            if ( newTail.isNull() ) {",
          "new_line_content": "            OpTime ts( localLog->current().getField( \"ts\" ).date() );",
          "content_same": false
        },
        {
          "line": 1107,
          "old_api": "massert",
          "new_api": "resetSlave",
          "old_text": "massert( 10388 ,  \"local master log filled, forcing slave resync\", false )",
          "new_text": "resetSlave()",
          "old_line_content": "            massert( 10388 ,  \"local master log filled, forcing slave resync\", false );",
          "new_line_content": "            resetSlave();",
          "content_same": false
        },
        {
          "line": 1123,
          "old_api": "toStringLong",
          "new_api": "sourceName",
          "old_text": "syncedTo.toStringLong()",
          "new_text": "sourceName()",
          "old_line_content": "        log(2) << \"repl: sync_pullOpLog \" << ns << \" syncedTo:\" << syncedTo.toStringLong() << '\\n';",
          "new_line_content": "        string ns = string(\"local.oplog.$\") + sourceName();",
          "content_same": false
        },
        {
          "line": 1142,
          "old_api": "massert",
          "new_api": "BSON",
          "old_text": "massert( 10389 ,  \"Unable to get database list\", ok )",
          "new_text": "BSON( \"listDatabases\" << 1 )",
          "old_line_content": "                massert( 10389 ,  \"Unable to get database list\", ok );",
          "new_line_content": "                bool ok = oplogReader.conn()->runCommand( \"admin\", BSON( \"listDatabases\" << 1 ), info );",
          "content_same": false
        },
        {
          "line": 1143,
          "old_api": "getField",
          "new_api": "massert",
          "old_text": "info.getField( \"databases\" ).embeddedObject()",
          "new_text": "massert( 10389 ,  \"Unable to get database list\", ok )",
          "old_line_content": "                BSONObjIterator i( info.getField( \"databases\" ).embeddedObject() );",
          "new_line_content": "                massert( 10389 ,  \"Unable to get database list\", ok );",
          "content_same": false
        },
        {
          "line": 1144,
          "old_api": "moreWithEOO",
          "new_api": "getField",
          "old_text": "i.moreWithEOO()",
          "new_text": "info.getField( \"databases\" ).embeddedObject()",
          "old_line_content": "                while( i.moreWithEOO() ) {",
          "new_line_content": "                BSONObjIterator i( info.getField( \"databases\" ).embeddedObject() );",
          "content_same": false
        },
        {
          "line": 1145,
          "old_api": "next",
          "new_api": "moreWithEOO",
          "old_text": "i.next()",
          "new_text": "i.moreWithEOO()",
          "old_line_content": "                    BSONElement e = i.next();",
          "new_line_content": "                while( i.moreWithEOO() ) {",
          "content_same": false
        },
        {
          "line": 1146,
          "old_api": "eoo",
          "new_api": "next",
          "old_text": "e.eoo()",
          "new_text": "i.next()",
          "old_line_content": "                    if ( e.eoo() )",
          "new_line_content": "                    BSONElement e = i.next();",
          "content_same": false
        },
        {
          "line": 1152,
          "old_api": "log",
          "new_api": "empty",
          "old_text": "log( 2 )",
          "new_text": "only.empty()",
          "old_line_content": "                                log( 2 ) << \"adding to 'addDbNextPass': \" << name << endl;",
          "new_line_content": "                            if ( only.empty() || only == name ) {",
          "content_same": false
        },
        {
          "line": 1153,
          "old_api": "insert",
          "new_api": "log",
          "old_text": "addDbNextPass.insert( name )",
          "new_text": "log( 2 )",
          "old_line_content": "                                addDbNextPass.insert( name );",
          "new_line_content": "                                log( 2 ) << \"adding to 'addDbNextPass': \" << name << endl;",
          "content_same": false
        },
        {
          "line": 1166,
          "old_api": "empty",
          "new_api": "done",
          "old_text": "only.empty()",
          "new_text": "q.done()",
          "old_line_content": "            if ( !only.empty() ) {",
          "new_line_content": "            query.append(\"ts\", q.done());",
          "content_same": false
        },
        {
          "line": 1181,
          "old_api": "problem",
          "new_api": "haveCursor",
          "old_text": "problem()",
          "new_text": "oplogReader.haveCursor()",
          "old_line_content": "            problem() << \"repl: dbclient::query returns null (conn closed?)\" << endl;",
          "new_line_content": "        if( !oplogReader.haveCursor() ) {",
          "content_same": false
        },
        {
          "line": 1182,
          "old_api": "resetConnection",
          "new_api": "problem",
          "old_text": "oplogReader.resetConnection()",
          "new_text": "problem()",
          "old_line_content": "            oplogReader.resetConnection();",
          "new_line_content": "            problem() << \"repl: dbclient::query returns null (conn closed?)\" << endl;",
          "content_same": false
        },
        {
          "line": 1189,
          "old_api": "end",
          "new_api": "begin",
          "old_text": "addDbNextPass.end()",
          "new_text": "addDbNextPass.begin()",
          "old_line_content": "            if ( i != addDbNextPass.end() ) {",
          "new_line_content": "            set<string>::iterator i = addDbNextPass.begin();",
          "content_same": false
        },
        {
          "line": 1193,
          "old_api": "done",
          "new_api": "append",
          "old_text": "b.done()",
          "new_text": "b.append(\"op\", \"db\")",
          "old_line_content": "                BSONObj op = b.done();",
          "new_line_content": "                b.append(\"op\", \"db\");",
          "content_same": false
        },
        {
          "line": 1194,
          "old_api": "sync_pullOpLog_applyOperation",
          "new_api": "done",
          "old_text": "sync_pullOpLog_applyOperation(op, 0)",
          "new_text": "b.done()",
          "old_line_content": "                sync_pullOpLog_applyOperation(op, 0);",
          "new_line_content": "                BSONObj op = b.done();",
          "content_same": false
        },
        {
          "line": 1201,
          "old_api": "awaitCapable",
          "new_api": "log",
          "old_text": "oplogReader.awaitCapable()",
          "new_text": "log(2)",
          "old_line_content": "                if( oplogReader.awaitCapable() )",
          "new_line_content": "                log(2) << \"repl: tailing & no new activity\\n\";",
          "content_same": false
        },
        {
          "line": 1213,
          "old_api": "setLastSavedLocalTs",
          "new_api": "more",
          "old_text": "setLastSavedLocalTs( nextLastSaved )",
          "new_text": "oplogReader.more()",
          "old_line_content": "                        setLastSavedLocalTs( nextLastSaved );",
          "new_line_content": "                    if ( !oplogReader.more() ) {",
          "content_same": false
        },
        {
          "line": 1224,
          "old_api": "getField",
          "new_api": "next",
          "old_text": "op.getField(\"ts\")",
          "new_text": "oplogReader.next()",
          "old_line_content": "            BSONElement ts = op.getField(\"ts\");",
          "new_line_content": "            BSONObj op = oplogReader.next();",
          "content_same": false
        },
        {
          "line": 1225,
          "old_api": "type",
          "new_api": "getField",
          "old_text": "ts.type()",
          "new_text": "op.getField(\"ts\")",
          "old_line_content": "            if ( ts.type() != Date && ts.type() != Timestamp ) {",
          "new_line_content": "            BSONElement ts = op.getField(\"ts\");",
          "content_same": false
        },
        {
          "line": 1226,
          "old_api": "getStringField",
          "new_api": "type",
          "old_text": "op.getStringField(\"$err\")",
          "new_text": "ts.type()",
          "old_line_content": "                string err = op.getStringField(\"$err\");",
          "new_line_content": "            if ( ts.type() != Date && ts.type() != Timestamp ) {",
          "content_same": false
        },
        {
          "line": 1227,
          "old_api": "empty",
          "new_api": "getStringField",
          "old_text": "err.empty()",
          "new_text": "op.getStringField(\"$err\")",
          "old_line_content": "                if ( !err.empty() ) {",
          "new_line_content": "                string err = op.getStringField(\"$err\");",
          "content_same": false
        },
        {
          "line": 1230,
          "old_api": "problem",
          "new_api": "getIntField",
          "old_text": "problem()",
          "new_text": "op.getIntField(\"code\")",
          "old_line_content": "                        problem() << \"trying to slave off of a non-master\" << '\\n';",
          "new_line_content": "                    if (op.getIntField(\"code\") == 13051) {",
          "content_same": false
        },
        {
          "line": 1231,
          "old_api": "massert",
          "new_api": "problem",
          "old_text": "massert( 13344 ,  \"trying to slave off of a non-master\", false )",
          "new_text": "problem()",
          "old_line_content": "                        massert( 13344 ,  \"trying to slave off of a non-master\", false );",
          "new_line_content": "                        problem() << \"trying to slave off of a non-master\" << '\\n';",
          "content_same": false
        },
        {
          "line": 1235,
          "old_api": "massert",
          "new_api": "problem",
          "old_text": "massert( 10390 ,  \"got $err reading remote oplog\", false )",
          "new_text": "problem()",
          "old_line_content": "                        massert( 10390 ,  \"got $err reading remote oplog\", false );",
          "new_line_content": "                        problem() << \"repl: $err reading remote oplog: \" + err << '\\n';",
          "content_same": false
        },
        {
          "line": 1240,
          "old_api": "massert",
          "new_api": "toString",
          "old_text": "massert( 10391 , \"repl: bad object read from remote oplog\", false)",
          "new_text": "op.toString()",
          "old_line_content": "                    massert( 10391 , \"repl: bad object read from remote oplog\", false);",
          "new_line_content": "                    problem() << \"repl: bad object read from remote oplog: \" << op.toString() << '\\n';",
          "content_same": false
        },
        {
          "line": 1249,
          "old_api": "resetSlave",
          "new_api": "log",
          "old_text": "resetSlave()",
          "new_text": "log()",
          "old_line_content": "                    resetSlave();",
          "new_line_content": "                    log() << \"remote slave log filled, forcing slave resync\" << endl;",
          "content_same": false
        },
        {
          "line": 1258,
          "old_api": "toString",
          "new_api": "date",
          "old_text": "nextOpTime.toString()",
          "new_text": "ts.date()",
          "old_line_content": "            log(2) << \"repl: first op time received: \" << nextOpTime.toString() << '\\n';",
          "new_line_content": "            nextOpTime = OpTime( ts.date() );",
          "content_same": false
        },
        {
          "line": 1264,
          "old_api": "putBack",
          "new_api": "assert",
          "old_text": "oplogReader.putBack( op )",
          "new_text": "assert( syncedTo < nextOpTime )",
          "old_line_content": "                oplogReader.putBack( op ); // op will be processed in the loop below",
          "new_line_content": "                    assert( syncedTo < nextOpTime );",
          "content_same": false
        },
        {
          "line": 1265,
          "old_api": "OpTime",
          "new_api": "putBack",
          "old_text": "OpTime()",
          "new_text": "oplogReader.putBack( op )",
          "old_line_content": "                nextOpTime = OpTime(); // will reread the op below",
          "new_line_content": "                oplogReader.putBack( op ); // op will be processed in the loop below",
          "content_same": false
        },
        {
          "line": 1269,
          "old_api": "toStringLong",
          "new_api": "log",
          "old_text": "nextOpTime.toStringLong()",
          "new_text": "log()",
          "old_line_content": "                l << \"repl:   nextOpTime \" << nextOpTime.toStringLong() << ' ';",
          "new_line_content": "                Nullstream& l = log();",
          "content_same": false
        },
        {
          "line": 1276,
          "old_api": "getSecs",
          "new_api": "toStringLong",
          "old_text": "syncedTo.getSecs()",
          "new_text": "syncedTo.toStringLong()",
          "old_line_content": "                log() << \"repl:   time diff: \" << (nextOpTime.getSecs() - syncedTo.getSecs()) << \"sec\\n\";",
          "new_line_content": "                l << \" syncedTo \" << syncedTo.toStringLong() << '\\n';",
          "content_same": false
        },
        {
          "line": 1277,
          "old_api": "log",
          "new_api": "getSecs",
          "old_text": "log()",
          "new_text": "syncedTo.getSecs()",
          "old_line_content": "                log() << \"repl:   tailing: \" << tailing << '\\n';",
          "new_line_content": "                log() << \"repl:   time diff: \" << (nextOpTime.getSecs() - syncedTo.getSecs()) << \"sec\\n\";",
          "content_same": false
        },
        {
          "line": 1281,
          "old_api": "SyncException",
          "new_api": "assert",
          "old_text": "SyncException()",
          "new_text": "assert( syncedTo < nextOpTime )",
          "old_line_content": "                throw SyncException();",
          "new_line_content": "                assert( syncedTo < nextOpTime );",
          "content_same": false
        },
        {
          "line": 1313,
          "old_api": "getInitialSyncCompleted",
          "new_api": "more",
          "old_text": "getInitialSyncCompleted()",
          "new_text": "oplogReader.more()",
          "old_line_content": "                            if ( getInitialSyncCompleted() ) { // if initial sync hasn't completed, break out of loop so we can set to completed or clone more dbs",
          "new_line_content": "                        if ( oplogReader.more() ) {",
          "content_same": false
        },
        {
          "line": 1324,
          "old_api": "log",
          "new_api": "save",
          "old_text": "log()",
          "new_text": "save()",
          "old_line_content": "                    log() << \"repl:   applied \" << n << \" operations\" << endl;",
          "new_line_content": "                    save(); // note how far we are synced up to now",
          "content_same": false
        },
        {
          "line": 1336,
          "old_api": "log",
          "new_api": "save",
          "old_text": "log()",
          "new_text": "save()",
          "old_line_content": "                    log() << \"repl:   checkpoint applied \" << n << \" operations\" << endl;",
          "new_line_content": "\t\t\t\t\tsave();",
          "content_same": false
        },
        {
          "line": 1337,
          "old_api": "toStringLong",
          "new_api": "log",
          "old_text": "syncedTo.toStringLong()",
          "new_text": "log()",
          "old_line_content": "                    log() << \"repl:   syncedTo: \" << syncedTo.toStringLong() << endl;",
          "new_line_content": "                    log() << \"repl:   checkpoint applied \" << n << \" operations\" << endl;",
          "content_same": false
        },
        {
          "line": 1338,
          "old_api": "time",
          "new_api": "toStringLong",
          "old_text": "time(0)",
          "new_text": "syncedTo.toStringLong()",
          "old_line_content": "\t\t\t\t\tsaveLast = time(0);",
          "new_line_content": "                    log() << \"repl:   syncedTo: \" << syncedTo.toStringLong() << endl;",
          "content_same": false
        },
        {
          "line": 1343,
          "old_api": "getField",
          "new_api": "next",
          "old_text": "op.getField(\"ts\")",
          "new_text": "oplogReader.next()",
          "old_line_content": "                BSONElement ts = op.getField(\"ts\");",
          "new_line_content": "                BSONObj op = oplogReader.next();",
          "content_same": false
        },
        {
          "line": 1344,
          "old_api": "type",
          "new_api": "getField",
          "old_text": "ts.type()",
          "new_text": "op.getField(\"ts\")",
          "old_line_content": "                if( !( ts.type() == Date || ts.type() == Timestamp ) ) { ",
          "new_line_content": "                BSONElement ts = op.getField(\"ts\");",
          "content_same": false
        },
        {
          "line": 1345,
          "old_api": "log",
          "new_api": "type",
          "old_text": "log()",
          "new_text": "ts.type()",
          "old_line_content": "                    log() << \"sync error: problem querying remote oplog record\\n\";",
          "new_line_content": "                if( !( ts.type() == Date || ts.type() == Timestamp ) ) { ",
          "content_same": false
        },
        {
          "line": 1346,
          "old_api": "toString",
          "new_api": "log",
          "old_text": "op.toString()",
          "new_text": "log()",
          "old_line_content": "                    log() << \"op: \" << op.toString() << '\\n';",
          "new_line_content": "                    log() << \"sync error: problem querying remote oplog record\\n\";",
          "content_same": false
        },
        {
          "line": 1347,
          "old_api": "log",
          "new_api": "toString",
          "old_text": "log()",
          "new_text": "op.toString()",
          "old_line_content": "                    log() << \"halting replication\" << endl;",
          "new_line_content": "                    log() << \"op: \" << op.toString() << '\\n';",
          "content_same": false
        },
        {
          "line": 1355,
          "old_api": "toStringLong",
          "new_api": "log",
          "old_text": "last.toStringLong()",
          "new_text": "log()",
          "old_line_content": "                    log() << \" last:       \" << last.toStringLong() << '\\n';",
          "new_line_content": "                    log() << \"sync error: last applied optime at slave >= nextOpTime from master\" << endl;",
          "content_same": false
        },
        {
          "line": 1357,
          "old_api": "log",
          "new_api": "toStringLong",
          "old_text": "log()",
          "new_text": "nextOpTime.toStringLong()",
          "old_line_content": "                    log() << \" halting replication\" << endl;",
          "new_line_content": "                    log() << \" nextOpTime: \" << nextOpTime.toStringLong() << '\\n';",
          "content_same": false
        },
        {
          "line": 1362,
          "old_api": "putBack",
          "new_api": "getSecs",
          "old_text": "oplogReader.putBack( op )",
          "new_text": "nextOpTime.getSecs()",
          "old_line_content": "                    oplogReader.putBack( op );",
          "new_line_content": "                if ( replSettings.slavedelay && ( unsigned( time( 0 ) ) < nextOpTime.getSecs() + replSettings.slavedelay ) ) {",
          "content_same": false
        },
        {
          "line": 1363,
          "old_api": "getSecs",
          "new_api": "putBack",
          "old_text": "nextOpTime.getSecs()",
          "new_text": "oplogReader.putBack( op )",
          "old_line_content": "                    _sleepAdviceTime = nextOpTime.getSecs() + replSettings.slavedelay + 1;",
          "new_line_content": "                    oplogReader.putBack( op );",
          "content_same": false
        },
        {
          "line": 1370,
          "old_api": "toStringLong",
          "new_api": "log",
          "old_text": "syncedTo.toStringLong()",
          "new_text": "log()",
          "old_line_content": "                    log() << \"repl:   syncedTo: \" << syncedTo.toStringLong() << endl;",
          "new_line_content": "                    log() << \"repl:   applied \" << n << \" operations\" << endl;",
          "content_same": false
        },
        {
          "line": 1371,
          "old_api": "log",
          "new_api": "toStringLong",
          "old_text": "log()",
          "new_text": "syncedTo.toStringLong()",
          "old_line_content": "                    log() << \"waiting until: \" << _sleepAdviceTime << \" to continue\" << endl;",
          "new_line_content": "                    log() << \"repl:   syncedTo: \" << syncedTo.toStringLong() << endl;",
          "content_same": false
        },
        {
          "line": 1387,
          "old_api": "log",
          "new_api": "isAdmin",
          "old_text": "log()",
          "new_text": "cc().isAdmin()",
          "old_line_content": "\t\t\tlog() << \"replauthenticate: requires admin permissions, failing\\n\";",
          "new_line_content": "\t\tif( ! cc().isAdmin() ){",
          "content_same": false
        },
        {
          "line": 1410,
          "old_api": "empty",
          "new_api": "getStringField",
          "old_text": "u.empty()",
          "new_text": "user.getStringField(\"pwd\")",
          "old_line_content": "\t\tmassert( 10392 , \"bad user object? [1]\", !u.empty());",
          "new_line_content": "\t\tstring p = user.getStringField(\"pwd\");",
          "content_same": false
        },
        {
          "line": 1414,
          "old_api": "log",
          "new_api": "c_str",
          "old_text": "log()",
          "new_text": "p.c_str()",
          "old_line_content": "\t\t\tlog() << \"replauthenticate: can't authenticate to master server, user:\" << u << endl;",
          "new_line_content": "\t\tif( !conn->auth(\"local\", u.c_str(), p.c_str(), err, false) ) {",
          "content_same": false
        },
        {
          "line": 1428,
          "old_api": "obj",
          "new_api": "appendOID",
          "old_text": "b.obj()",
          "new_text": "b.appendOID( \"_id\" , 0 , true )",
          "old_line_content": "                me = b.obj();",
          "new_line_content": "                b.appendOID( \"_id\" , 0 , true );",
          "content_same": false
        },
        {
          "line": 1429,
          "old_api": "Helpers::putSingleton( \"local.me\" , me )",
          "new_api": "obj",
          "old_text": "Helpers::putSingleton( \"local.me\" , me )",
          "new_text": "b.obj()",
          "old_line_content": "                Helpers::putSingleton( \"local.me\" , me );",
          "new_line_content": "                me = b.obj();",
          "content_same": false
        },
        {
          "line": 1445,
          "old_api": "auto_ptr<DBClientConnection>(new DBClientConnection( false, 0, replPair ? 20 : 0 /* tcp timeout */))",
          "new_api": "conn",
          "old_text": "auto_ptr<DBClientConnection>(new DBClientConnection( false, 0, replPair ? 20 : 0 /* tcp timeout */))",
          "new_text": "conn()",
          "old_line_content": "            _conn = auto_ptr<DBClientConnection>(new DBClientConnection( false, 0, replPair ? 20 : 0 /* tcp timeout */));",
          "new_line_content": "        if( conn() == 0 ) {",
          "content_same": false
        },
        {
          "line": 1449,
          "old_api": "get",
          "new_api": "c_str",
          "old_text": "_conn.get()",
          "new_text": "hostName.c_str()",
          "old_line_content": "                 !replAuthenticate(_conn.get()) ||",
          "new_line_content": "            if ( !_conn->connect(hostName.c_str(), errmsg) || ",
          "content_same": false
        },
        {
          "line": 1451,
          "old_api": "resetConnection",
          "new_api": "get",
          "old_text": "resetConnection()",
          "new_text": "_conn.get()",
          "old_line_content": "                resetConnection();",
          "new_line_content": "                 !replHandshake(_conn.get()) ) {",
          "content_same": false
        },
        {
          "line": 1452,
          "old_api": "log",
          "new_api": "resetConnection",
          "old_text": "log()",
          "new_text": "resetConnection()",
          "old_line_content": "                log() << \"repl:  \" << errmsg << endl;",
          "new_line_content": "                resetConnection();",
          "content_same": false
        },
        {
          "line": 1478,
          "old_api": "log",
          "new_api": "string",
          "old_text": "log()",
          "new_text": "string(\"127.0.0.1\")",
          "old_line_content": "            log() << \"repl:   can't sync from self (localhost). sources configuration may be wrong.\" << endl;",
          "new_line_content": "        if ( (string(\"localhost\") == hostName || string(\"127.0.0.1\") == hostName) && cmdLine.port == CmdLine::DefaultDBPort ) {",
          "content_same": false
        },
        {
          "line": 1479,
          "old_api": "sleepsecs",
          "new_api": "log",
          "old_text": "sleepsecs(5)",
          "new_text": "log()",
          "old_line_content": "            sleepsecs(5);",
          "new_line_content": "            log() << \"repl:   can't sync from self (localhost). sources configuration may be wrong.\" << endl;",
          "content_same": false
        },
        {
          "line": 1484,
          "old_api": "log",
          "new_api": "connect",
          "old_text": "log(4)",
          "new_text": "oplogReader.connect(hostName)",
          "old_line_content": "\t\t\tlog(4) << \"repl:  can't connect to sync source\" << endl;",
          "new_line_content": "        if ( !oplogReader.connect(hostName) ) {",
          "content_same": false
        },
        {
          "line": 1487,
          "old_api": "arbitrate",
          "new_api": "c_str",
          "old_text": "replPair->arbitrate()",
          "new_text": "replPair->remoteHost.c_str()",
          "old_line_content": "                replPair->arbitrate();",
          "new_line_content": "                assert( startsWith(hostName.c_str(), replPair->remoteHost.c_str()) );",
          "content_same": false
        },
        {
          "line": 1496,
          "old_api": "log",
          "new_api": "getInitialSyncCompleted",
          "old_text": "log()",
          "new_text": "getInitialSyncCompleted()",
          "old_line_content": "                log() << ( nMasters == 0 ? \"no master\" : \"two masters\" ) << \", deferring oplog pull\" << endl;",
          "new_line_content": "            if ( getInitialSyncCompleted() && nMasters != 1 ) {",
          "content_same": false
        },
        {
          "line": 1546,
          "old_api": "get",
          "new_api": "end",
          "old_text": "i->get()",
          "new_text": "sources.end()",
          "old_line_content": "            ReplSource *s = i->get();",
          "new_line_content": "        for ( ReplSource::SourceVector::iterator i = sources.begin(); i != sources.end(); i++ ) {",
          "content_same": false
        },
        {
          "line": 1550,
          "old_api": "haveMoreDbsToSync",
          "new_api": "sync",
          "old_text": "s->haveMoreDbsToSync()",
          "new_text": "s->sync(nApplied)",
          "old_line_content": "                bool moreToSync = s->haveMoreDbsToSync();",
          "new_line_content": "                res = s->sync(nApplied);",
          "content_same": false
        },
        {
          "line": 1572,
          "old_api": "what",
          "new_api": "severe",
          "old_text": "e.what()",
          "new_text": "e.severe()",
          "old_line_content": "                    log() << \"replMain AssertionException \" << e.what() << endl;",
          "new_line_content": "                if ( e.severe() ) {",
          "content_same": false
        },
        {
          "line": 1643,
          "old_api": "c_str",
          "new_api": "log",
          "old_text": "msg.c_str()",
          "new_text": "log()",
          "old_line_content": "                ReplInfo r(msg.c_str());",
          "new_line_content": "                    log() << msg << endl;",
          "content_same": false
        },
        {
          "line": 1644,
          "old_api": "sleepsecs",
          "new_api": "c_str",
          "old_text": "sleepsecs(s)",
          "new_text": "msg.c_str()",
          "old_line_content": "                sleepsecs(s);",
          "new_line_content": "                ReplInfo r(msg.c_str());",
          "content_same": false
        },
        {
          "line": 1653,
          "old_api": "Client::initThread(\"replmaster\")",
          "new_api": "sleepsecs",
          "old_text": "Client::initThread(\"replmaster\")",
          "new_text": "sleepsecs(4)",
          "old_line_content": "        Client::initThread(\"replmaster\");",
          "new_line_content": "        sleepsecs(4);",
          "content_same": false
        },
        {
          "line": 1686,
          "old_api": "Client::initThread(\"replslave\")",
          "new_api": "sleepsecs",
          "old_text": "Client::initThread(\"replslave\")",
          "new_text": "sleepsecs(1)",
          "old_line_content": "        Client::initThread(\"replslave\");",
          "new_line_content": "        sleepsecs(1);",
          "content_same": false
        },
        {
          "line": 1710,
          "old_api": "sleepsecs",
          "new_api": "problem",
          "old_text": "sleepsecs(300)",
          "new_text": "problem()",
          "old_line_content": "                sleepsecs(300);",
          "new_line_content": "                problem() << \"Assertion in replSlaveThread(): sleeping 5 minutes before retry\" << endl;",
          "content_same": false
        },
        {
          "line": 1718,
          "old_api": "sleepmillis",
          "new_api": "info",
          "old_text": "sleepmillis(100)",
          "new_text": "dbMutex.info().isLocked()",
          "old_line_content": "            sleepmillis(100);",
          "new_line_content": "            out() << dbMutex.info().isLocked() << endl;",
          "content_same": false
        },
        {
          "line": 1733,
          "old_api": "newRepl",
          "new_api": "createOplog",
          "old_text": "newRepl()",
          "new_text": "createOplog()",
          "old_line_content": "            newRepl();",
          "new_line_content": "            createOplog();",
          "content_same": false
        },
        {
          "line": 1750,
          "old_api": "init",
          "new_api": "getAuthenticationInfo",
          "old_text": "pairSync->init()",
          "new_text": "cc().getAuthenticationInfo()->authorize(\"admin\")",
          "old_line_content": "            pairSync->init();",
          "new_line_content": "            cc().getAuthenticationInfo()->authorize(\"admin\");",
          "content_same": false
        },
        {
          "line": 1756,
          "old_api": "log",
          "new_api": "assert",
          "old_text": "log(1)",
          "new_text": "assert( replSettings.slave == SimpleSlave )",
          "old_line_content": "                log(1) << \"slave=true\" << endl;",
          "new_line_content": "                assert( replSettings.slave == SimpleSlave );",
          "content_same": false
        },
        {
          "line": 1782,
          "old_api": "max",
          "new_api": "min",
          "old_text": "max(nthr, 1)",
          "new_text": "min(8, 8)",
          "old_line_content": "        nthr = max(nthr, 1);",
          "new_line_content": "        int nthr = min(8, 8);",
          "content_same": false
        },
        {
          "line": 1798,
          "old_api": "schedule",
          "new_api": "size",
          "old_text": "tp.schedule(pretouchN, v, a, b)",
          "new_text": "v.size()",
          "old_line_content": "            tp.schedule(pretouchN, v, a, b);",
          "new_line_content": "            if( b >= v.size() ) b = v.size() - 1;",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 1538,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "sources.empty()",
          "old_line_content": "            /* replication is not configured yet (for --slave) in local.sources.  Poll for config it",
          "new_line_content": "        if ( sources.empty() ) {",
          "content_same": false
        },
        {
          "line": 1027,
          "old_api": null,
          "new_api": "mayUpgradeStorage",
          "old_text": null,
          "new_text": "idTracker.mayUpgradeStorage()",
          "old_line_content": "        }",
          "new_line_content": "            idTracker.mayUpgradeStorage();",
          "content_same": false
        },
        {
          "line": 1032,
          "old_api": null,
          "new_api": "getStringField",
          "old_text": null,
          "new_text": "op.getStringField( \"ns\" )",
          "old_line_content": "            // Since our range of local ops may not be the same as our peer's",
          "new_line_content": "            const char *ns = op.getStringField( \"ns\" );",
          "content_same": false
        },
        {
          "line": 1547,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "i->get()",
          "old_line_content": "            int res = -1;",
          "new_line_content": "            ReplSource *s = i->get();",
          "content_same": false
        },
        {
          "line": 1038,
          "old_api": null,
          "new_api": "haveId",
          "old_text": null,
          "new_text": "idTracker.haveId( ns, id, true )",
          "old_line_content": "        }        ",
          "new_line_content": "            idTracker.haveId( ns, id, true );",
          "content_same": false
        },
        {
          "line": 1551,
          "old_api": null,
          "new_api": "haveMoreDbsToSync",
          "old_text": null,
          "new_text": "s->haveMoreDbsToSync()",
          "old_line_content": "                if( res < 0 ) { ",
          "new_line_content": "                bool moreToSync = s->haveMoreDbsToSync();",
          "content_same": false
        },
        {
          "line": 1043,
          "old_api": null,
          "new_api": "ns",
          "old_text": null,
          "new_text": "ns()",
          "old_line_content": "        BSONObjBuilder b;",
          "new_line_content": "        string _ns = ns();",
          "content_same": false
        },
        {
          "line": 1046,
          "old_api": null,
          "new_api": "string",
          "old_text": null,
          "new_text": "string(\"^\")",
          "old_line_content": "        }        ",
          "new_line_content": "            b.appendRegex(\"ns\", string(\"^\") + only);",
          "content_same": false
        },
        {
          "line": 1559,
          "old_api": null,
          "new_api": "sleepAdvice",
          "old_text": null,
          "new_text": "s->sleepAdvice()",
          "old_line_content": "                }",
          "new_line_content": "                    sleepAdvice = s->sleepAdvice();",
          "content_same": false
        },
        {
          "line": 1052,
          "old_api": null,
          "new_api": "date",
          "old_text": null,
          "new_text": "ts.date()",
          "old_line_content": "        }        ",
          "new_line_content": "            syncedTo = OpTime( ts.date() );",
          "content_same": false
        },
        {
          "line": 1564,
          "old_api": null,
          "new_api": "setInitialSyncCompletedLocking",
          "old_text": null,
          "new_text": "pairSync->setInitialSyncCompletedLocking()",
          "old_line_content": "                }",
          "new_line_content": "                    pairSync->setInitialSyncCompletedLocking();",
          "content_same": false
        },
        {
          "line": 1568,
          "old_api": null,
          "new_api": "log",
          "old_text": null,
          "new_text": "log()",
          "old_line_content": "                return 10;",
          "new_line_content": "                log() << \"caught SyncException\" << endl;",
          "content_same": false
        },
        {
          "line": 1061,
          "old_api": null,
          "new_api": "OpTime",
          "old_text": null,
          "new_text": "OpTime()",
          "old_line_content": "    }",
          "new_line_content": "        return OpTime();",
          "content_same": false
        },
        {
          "line": 1534,
          "old_api": null,
          "new_api": "ReplSource::loadAll(sources)",
          "old_text": null,
          "new_text": "ReplSource::loadAll(sources)",
          "old_line_content": "            replSettings.fastsync = false; // only need this param for initial reset",
          "new_line_content": "            ReplSource::loadAll(sources);",
          "content_same": false
        },
        {
          "line": 1573,
          "old_api": null,
          "new_api": "what",
          "old_text": null,
          "new_text": "e.what()",
          "old_line_content": "                    return 60;",
          "new_line_content": "                    log() << \"replMain AssertionException \" << e.what() << endl;",
          "content_same": false
        },
        {
          "line": 1577,
          "old_api": null,
          "new_api": "what",
          "old_text": null,
          "new_text": "e.what()",
          "old_line_content": "                }",
          "new_line_content": "                    log() << \"repl: AssertionException \" << e.what() << '\\n';",
          "content_same": false
        },
        {
          "line": 1066,
          "old_api": null,
          "new_api": "log",
          "old_text": null,
          "new_text": "log( 3 )",
          "old_line_content": "    }",
          "new_line_content": "        log( 3 ) << \"updated _lastSavedLocalTs to: \" << _lastSavedLocalTs << endl;",
          "content_same": false
        },
        {
          "line": 1582,
          "old_api": null,
          "new_api": "what",
          "old_text": null,
          "new_text": "e.what()",
          "old_line_content": "                replInfo = \"replMain caught DBException\";",
          "new_line_content": "                log() << \"repl: DBException \" << e.what() << endl;",
          "content_same": false
        },
        {
          "line": 1586,
          "old_api": null,
          "new_api": "what",
          "old_text": null,
          "new_text": "e.what()",
          "old_line_content": "                replInfo = \"replMain caught std::exception\";                ",
          "new_line_content": "                log() << \"repl: std::exception \" << e.what() << endl;",
          "content_same": false
        },
        {
          "line": 1075,
          "old_api": null,
          "new_api": "syncToTailOfRemoteLog",
          "old_text": null,
          "new_text": "syncToTailOfRemoteLog()",
          "old_line_content": "        {",
          "new_line_content": "        syncToTailOfRemoteLog();",
          "content_same": false
        },
        {
          "line": 1590,
          "old_api": null,
          "new_api": "log",
          "old_text": null,
          "new_text": "log()",
          "old_line_content": "                replAllDead = \"caught unexpected exception during replication\";",
          "new_line_content": "                log() << \"unexpected exception during replication.  replication will halt\" << endl;",
          "content_same": false
        },
        {
          "line": 1080,
          "old_api": null,
          "new_api": "resetCursor",
          "old_text": null,
          "new_text": "oplogReader.resetCursor()",
          "old_line_content": "        }",
          "new_line_content": "            oplogReader.resetCursor();",
          "content_same": false
        },
        {
          "line": 1594,
          "old_api": null,
          "new_api": "resetConnection",
          "old_text": null,
          "new_text": "s->oplogReader.resetConnection()",
          "old_line_content": "        }",
          "new_line_content": "                s->oplogReader.resetConnection();",
          "content_same": false
        },
        {
          "line": 1086,
          "old_api": null,
          "new_api": "BSON",
          "old_text": null,
          "new_text": "BSON( \"$natural\" << -1 )",
          "old_line_content": "        OpTime newTail;",
          "new_line_content": "        shared_ptr<Cursor> localLog = findTableScan( \"local.oplog.$main\", BSON( \"$natural\" << -1 ) );",
          "content_same": false
        },
        {
          "line": 1091,
          "old_api": null,
          "new_api": "isNull",
          "old_text": null,
          "new_text": "newTail.isNull()",
          "old_line_content": "                newTail = ts;",
          "new_line_content": "            if ( newTail.isNull() ) {",
          "content_same": false
        },
        {
          "line": 1606,
          "old_api": null,
          "new_api": "ReplSource::throttledForceResyncDead( \"auto\" )",
          "old_text": null,
          "new_text": "ReplSource::throttledForceResyncDead( \"auto\" )",
          "old_line_content": "                        break;",
          "new_line_content": "                    if ( !replSettings.autoresync || !ReplSource::throttledForceResyncDead( \"auto\" ) )",
          "content_same": false
        },
        {
          "line": 1096,
          "old_api": null,
          "new_api": "updateSetsWithOp",
          "old_text": null,
          "new_text": "updateSetsWithOp( op, mayUnlock )",
          "old_line_content": "            if ( mayUnlock ) {",
          "new_line_content": "            updateSetsWithOp( op, mayUnlock );",
          "content_same": false
        },
        {
          "line": 1609,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert( syncing == 0 )",
          "old_line_content": "                syncing++;",
          "new_line_content": "                assert( syncing == 0 ); // i.e., there is only one sync thread running. we will want to change/fix this.",
          "content_same": false
        },
        {
          "line": 1614,
          "old_api": null,
          "new_api": "_replMain",
          "old_text": null,
          "new_text": "_replMain(sources, nApplied)",
          "old_line_content": "                if( s == 1 ) { ",
          "new_line_content": "                s = _replMain(sources, nApplied);",
          "content_same": false
        },
        {
          "line": 1103,
          "old_api": null,
          "new_api": "ok",
          "old_text": null,
          "new_text": "localLog->ok()",
          "old_line_content": "            // local log filled up",
          "new_line_content": "        if ( !localLogTail.isNull() && !localLog->ok() ) {",
          "content_same": false
        },
        {
          "line": 1105,
          "old_api": null,
          "new_api": "reset",
          "old_text": null,
          "new_text": "idTracker.reset()",
          "old_line_content": "            dbtemprelease t;",
          "new_line_content": "            idTracker.reset();",
          "content_same": false
        },
        {
          "line": 1619,
          "old_api": null,
          "new_api": "sleepmillis",
          "old_text": null,
          "new_text": "sleepmillis(75)",
          "old_line_content": "                        s = 0;",
          "new_line_content": "                        sleepmillis(75);",
          "content_same": false
        },
        {
          "line": 1108,
          "old_api": null,
          "new_api": "massert",
          "old_text": null,
          "new_text": "massert( 10388 ,  \"local master log filled, forcing slave resync\", false )",
          "old_line_content": "        }        ",
          "new_line_content": "            massert( 10388 ,  \"local master log filled, forcing slave resync\", false );",
          "content_same": false
        },
        {
          "line": 1110,
          "old_api": null,
          "new_api": "isNull",
          "old_text": null,
          "new_text": "newTail.isNull()",
          "old_line_content": "            localLogTail = newTail;",
          "new_line_content": "        if ( !newTail.isNull() )",
          "content_same": false
        },
        {
          "line": 1624,
          "old_api": null,
          "new_api": "out",
          "old_text": null,
          "new_text": "out()",
          "old_line_content": "                s = 4;",
          "new_line_content": "                out() << \"caught exception in _replMain\" << endl;",
          "content_same": false
        },
        {
          "line": 1629,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert( syncing == 1 )",
          "old_line_content": "                syncing--;",
          "new_line_content": "                assert( syncing == 1 );",
          "content_same": false
        },
        {
          "line": 1124,
          "old_api": null,
          "new_api": "toStringLong",
          "old_text": null,
          "new_text": "syncedTo.toStringLong()",
          "old_line_content": "",
          "new_line_content": "        log(2) << \"repl: sync_pullOpLog \" << ns << \" syncedTo:\" << syncedTo.toStringLong() << '\\n';",
          "content_same": false
        },
        {
          "line": 1127,
          "old_api": null,
          "new_api": "tailCheck",
          "old_text": null,
          "new_text": "oplogReader.tailCheck()",
          "old_line_content": "",
          "new_line_content": "        oplogReader.tailCheck();",
          "content_same": false
        },
        {
          "line": 1641,
          "old_api": null,
          "new_api": "str",
          "old_text": null,
          "new_text": "ss.str()",
          "old_line_content": "                if ( ! cmdLine.quiet )",
          "new_line_content": "                string msg = ss.str();",
          "content_same": false
        },
        {
          "line": 1131,
          "old_api": null,
          "new_api": "reset",
          "old_text": null,
          "new_text": "idTracker.reset()",
          "old_line_content": "        }",
          "new_line_content": "            idTracker.reset();",
          "content_same": false
        },
        {
          "line": 1645,
          "old_api": null,
          "new_api": "sleepsecs",
          "old_text": null,
          "new_text": "sleepsecs(s)",
          "old_line_content": "            }",
          "new_line_content": "                sleepsecs(s);",
          "content_same": false
        },
        {
          "line": 1135,
          "old_api": null,
          "new_api": "isNull",
          "old_text": null,
          "new_text": "syncedTo.isNull()",
          "old_line_content": "        ",
          "new_line_content": "        bool initial = syncedTo.isNull();",
          "content_same": false
        },
        {
          "line": 1137,
          "old_api": null,
          "new_api": "haveCursor",
          "old_text": null,
          "new_text": "oplogReader.haveCursor()",
          "old_line_content": "            if ( initial ) {",
          "new_line_content": "        if ( !oplogReader.haveCursor() || initial ) {",
          "content_same": false
        },
        {
          "line": 1140,
          "old_api": null,
          "new_api": "syncToTailOfRemoteLog",
          "old_text": null,
          "new_text": "syncToTailOfRemoteLog()",
          "old_line_content": "                BSONObj info;",
          "new_line_content": "                syncToTailOfRemoteLog();",
          "content_same": false
        },
        {
          "line": 1654,
          "old_api": null,
          "new_api": "Client::initThread(\"replmaster\")",
          "old_text": null,
          "new_text": "Client::initThread(\"replmaster\")",
          "old_line_content": "        int toSleep = 10;",
          "new_line_content": "        Client::initThread(\"replmaster\");",
          "content_same": false
        },
        {
          "line": 1658,
          "old_api": null,
          "new_api": "sleepsecs",
          "old_text": null,
          "new_text": "sleepsecs( toSleep )",
          "old_line_content": "            /* write a keep-alive like entry to the log.  this will make things like ",
          "new_line_content": "            sleepsecs( toSleep );",
          "content_same": false
        },
        {
          "line": 1147,
          "old_api": null,
          "new_api": "eoo",
          "old_text": null,
          "new_text": "e.eoo()",
          "old_line_content": "                        break;",
          "new_line_content": "                    if ( e.eoo() )",
          "content_same": false
        },
        {
          "line": 1150,
          "old_api": null,
          "new_api": "embeddedObject",
          "old_text": null,
          "new_text": "e.embeddedObject().getBoolField( \"empty\" )",
          "old_line_content": "                        if ( name != \"local\" ) {",
          "new_line_content": "                    if ( !e.embeddedObject().getBoolField( \"empty\" ) ) {",
          "content_same": false
        },
        {
          "line": 1665,
          "old_api": null,
          "new_api": "got",
          "old_text": null,
          "new_text": "lk.got()",
          "old_line_content": "                    toSleep = 10;",
          "new_line_content": "                if ( lk.got() ){",
          "content_same": false
        },
        {
          "line": 1154,
          "old_api": null,
          "new_api": "insert",
          "old_text": null,
          "new_text": "addDbNextPass.insert( name )",
          "old_line_content": "                            }",
          "new_line_content": "                                addDbNextPass.insert( name );",
          "content_same": false
        },
        {
          "line": 1668,
          "old_api": null,
          "new_api": "getAuthenticationInfo",
          "old_text": null,
          "new_text": "cc().getAuthenticationInfo()->authorize(\"admin\")",
          "old_line_content": "                        ",
          "new_line_content": "                    cc().getAuthenticationInfo()->authorize(\"admin\");   ",
          "content_same": false
        },
        {
          "line": 1671,
          "old_api": null,
          "new_api": "logKeepalive",
          "old_text": null,
          "new_text": "logKeepalive()",
          "old_line_content": "                    }",
          "new_line_content": "                        logKeepalive();",
          "content_same": false
        },
        {
          "line": 1160,
          "old_api": null,
          "new_api": "save",
          "old_text": null,
          "new_text": "save()",
          "old_line_content": "            }",
          "new_line_content": "                save();",
          "content_same": false
        },
        {
          "line": 1674,
          "old_api": null,
          "new_api": "log",
          "old_text": null,
          "new_text": "log()",
          "old_line_content": "                    }",
          "new_line_content": "                        log() << \"caught exception in replMasterThread()\" << endl;",
          "content_same": false
        },
        {
          "line": 1164,
          "old_api": null,
          "new_api": "asDate",
          "old_text": null,
          "new_text": "syncedTo.asDate()",
          "old_line_content": "            BSONObjBuilder query;",
          "new_line_content": "            q.appendDate(\"$gte\", syncedTo.asDate());",
          "content_same": false
        },
        {
          "line": 1678,
          "old_api": null,
          "new_api": "log",
          "old_text": null,
          "new_text": "log(5)",
          "old_line_content": "                    toSleep = 1;",
          "new_line_content": "                    log(5) << \"couldn't logKeepalive\" << endl;",
          "content_same": false
        },
        {
          "line": 1167,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "only.empty()",
          "old_line_content": "               // note we may here skip a LOT of data table scanning, a lot of work for the master.",
          "new_line_content": "            if ( !only.empty() ) {",
          "content_same": false
        },
        {
          "line": 1169,
          "old_api": null,
          "new_api": "string",
          "old_text": null,
          "new_text": "string(\"^\")",
          "old_line_content": "            }",
          "new_line_content": "                query.appendRegex(\"ns\", string(\"^\") + only); // maybe append \"\\\\.\" here?",
          "content_same": false
        },
        {
          "line": 1171,
          "old_api": null,
          "new_api": "done",
          "old_text": null,
          "new_text": "query.done()",
          "old_line_content": "            // e.g. queryObj = { ts: { $gte: syncedTo } }",
          "new_line_content": "            BSONObj queryObj = query.done();",
          "content_same": false
        },
        {
          "line": 1174,
          "old_api": null,
          "new_api": "c_str",
          "old_text": null,
          "new_text": "ns.c_str()",
          "old_line_content": "            tailing = false;",
          "new_line_content": "            oplogReader.tailingQuery(ns.c_str(), queryObj);",
          "content_same": false
        },
        {
          "line": 1687,
          "old_api": null,
          "new_api": "Client::initThread(\"replslave\")",
          "old_text": null,
          "new_text": "Client::initThread(\"replslave\")",
          "old_line_content": "            ",
          "new_line_content": "        Client::initThread(\"replslave\");",
          "content_same": false
        },
        {
          "line": 1178,
          "old_api": null,
          "new_api": "log",
          "old_text": null,
          "new_text": "log(2)",
          "old_line_content": "        }",
          "new_line_content": "            log(2) << \"repl: tailing=true\\n\";",
          "content_same": false
        },
        {
          "line": 1691,
          "old_api": null,
          "new_api": "getAuthenticationInfo",
          "old_text": null,
          "new_text": "cc().getAuthenticationInfo()->authorize(\"admin\")",
          "old_line_content": "        ",
          "new_line_content": "            cc().getAuthenticationInfo()->authorize(\"admin\");",
          "content_same": false
        },
        {
          "line": 1694,
          "old_api": null,
          "new_api": "Helpers::getSingleton(\"local.pair.startup\", obj)",
          "old_text": null,
          "new_text": "Helpers::getSingleton(\"local.pair.startup\", obj)",
          "old_line_content": "                // should be: {replacepeer:1}",
          "new_line_content": "            if ( Helpers::getSingleton(\"local.pair.startup\", obj) ) {",
          "content_same": false
        },
        {
          "line": 1183,
          "old_api": null,
          "new_api": "resetConnection",
          "old_text": null,
          "new_text": "oplogReader.resetConnection()",
          "old_line_content": "            return -1;",
          "new_line_content": "            oplogReader.resetConnection();",
          "content_same": false
        },
        {
          "line": 1697,
          "old_api": null,
          "new_api": "setInitialSyncCompleted",
          "old_text": null,
          "new_text": "pairSync->setInitialSyncCompleted()",
          "old_line_content": "            }",
          "new_line_content": "                pairSync->setInitialSyncCompleted(); // we are the half that has all the data",
          "content_same": false
        },
        {
          "line": 1190,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "addDbNextPass.end()",
          "old_line_content": "                BSONObjBuilder b;",
          "new_line_content": "            if ( i != addDbNextPass.end() ) {",
          "content_same": false
        },
        {
          "line": 1703,
          "old_api": null,
          "new_api": "replMain",
          "old_text": null,
          "new_text": "replMain()",
          "old_line_content": "                if ( debug_stop_repl )",
          "new_line_content": "                replMain();",
          "content_same": false
        },
        {
          "line": 1706,
          "old_api": null,
          "new_api": "sleepsecs",
          "old_text": null,
          "new_text": "sleepsecs(5)",
          "old_line_content": "            }",
          "new_line_content": "                sleepsecs(5);",
          "content_same": false
        },
        {
          "line": 1195,
          "old_api": null,
          "new_api": "sync_pullOpLog_applyOperation",
          "old_text": null,
          "new_text": "sync_pullOpLog_applyOperation(op, 0)",
          "old_line_content": "            }",
          "new_line_content": "                sync_pullOpLog_applyOperation(op, 0);",
          "content_same": false
        },
        {
          "line": 1199,
          "old_api": null,
          "new_api": "more",
          "old_text": null,
          "new_text": "oplogReader.more()",
          "old_line_content": "            if ( tailing ) {",
          "new_line_content": "        if ( !oplogReader.more() ) {",
          "content_same": false
        },
        {
          "line": 1711,
          "old_api": null,
          "new_api": "sleepsecs",
          "old_text": null,
          "new_text": "sleepsecs(300)",
          "old_line_content": "            }",
          "new_line_content": "                sleepsecs(300);",
          "content_same": false
        },
        {
          "line": 1202,
          "old_api": null,
          "new_api": "awaitCapable",
          "old_text": null,
          "new_text": "oplogReader.awaitCapable()",
          "old_line_content": "                    okResultCode = 0; // don't sleep",
          "new_line_content": "                if( oplogReader.awaitCapable() )",
          "content_same": false
        },
        {
          "line": 1206,
          "old_api": null,
          "new_api": "log",
          "old_text": null,
          "new_text": "log()",
          "old_line_content": "            }",
          "new_line_content": "                log() << \"repl:   \" << ns << \" oplog is empty\\n\";",
          "content_same": false
        },
        {
          "line": 1719,
          "old_api": null,
          "new_api": "sleepmillis",
          "old_text": null,
          "new_text": "sleepmillis(100)",
          "old_line_content": "        }",
          "new_line_content": "            sleepmillis(100);",
          "content_same": false
        },
        {
          "line": 1210,
          "old_api": null,
          "new_api": "nextLastSavedLocalTs",
          "old_text": null,
          "new_text": "nextLastSavedLocalTs()",
          "old_line_content": "                {",
          "new_line_content": "                OpTime nextLastSaved = nextLastSavedLocalTs();",
          "content_same": false
        },
        {
          "line": 1214,
          "old_api": null,
          "new_api": "setLastSavedLocalTs",
          "old_text": null,
          "new_text": "setLastSavedLocalTs( nextLastSaved )",
          "old_line_content": "                    }",
          "new_line_content": "                        setLastSavedLocalTs( nextLastSaved );",
          "content_same": false
        },
        {
          "line": 1727,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "cmdLine._replSet.empty()",
          "old_line_content": "            if( replSettings.slave || replSettings.master || replPair ) { ",
          "new_line_content": "        if( !cmdLine._replSet.empty() ) {",
          "content_same": false
        },
        {
          "line": 1217,
          "old_api": null,
          "new_api": "save",
          "old_text": null,
          "new_text": "save()",
          "old_line_content": "            }",
          "new_line_content": "                save();            ",
          "content_same": false
        },
        {
          "line": 1731,
          "old_api": null,
          "new_api": "log",
          "old_text": null,
          "new_text": "log()",
          "old_line_content": "            }",
          "new_line_content": "                log() << \"***\" << endl;",
          "content_same": false
        },
        {
          "line": 1734,
          "old_api": null,
          "new_api": "newRepl",
          "old_text": null,
          "new_text": "newRepl()",
          "old_line_content": "            return;",
          "new_line_content": "            newRepl();",
          "content_same": false
        },
        {
          "line": 1738,
          "old_api": null,
          "new_api": "oldRepl",
          "old_text": null,
          "new_text": "oldRepl()",
          "old_line_content": "",
          "new_line_content": "        oldRepl();",
          "content_same": false
        },
        {
          "line": 1228,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "err.empty()",
          "old_line_content": "                    // 13051 is \"tailable cursor requested on non capped collection\"",
          "new_line_content": "                if ( !err.empty() ) {",
          "content_same": false
        },
        {
          "line": 1232,
          "old_api": null,
          "new_api": "massert",
          "old_text": null,
          "new_text": "massert( 13344 ,  \"trying to slave off of a non-master\", false )",
          "old_line_content": "                    }",
          "new_line_content": "                        massert( 13344 ,  \"trying to slave off of a non-master\", false );",
          "content_same": false
        },
        {
          "line": 1236,
          "old_api": null,
          "new_api": "massert",
          "old_text": null,
          "new_text": "massert( 10390 ,  \"got $err reading remote oplog\", false )",
          "old_line_content": "                    }",
          "new_line_content": "                        massert( 10390 ,  \"got $err reading remote oplog\", false );",
          "content_same": false
        },
        {
          "line": 1751,
          "old_api": null,
          "new_api": "init",
          "old_text": null,
          "new_text": "pairSync->init()",
          "old_line_content": "        }",
          "new_line_content": "            pairSync->init();",
          "content_same": false
        },
        {
          "line": 1241,
          "old_api": null,
          "new_api": "massert",
          "old_text": null,
          "new_text": "massert( 10391 , \"repl: bad object read from remote oplog\", false)",
          "old_line_content": "                }",
          "new_line_content": "                    massert( 10391 , \"repl: bad object read from remote oplog\", false);",
          "content_same": false
        },
        {
          "line": 1757,
          "old_api": null,
          "new_api": "log",
          "old_text": null,
          "new_text": "log(1)",
          "old_line_content": "            }",
          "new_line_content": "                log(1) << \"slave=true\" << endl;",
          "content_same": false
        },
        {
          "line": 1247,
          "old_api": null,
          "new_api": "date",
          "old_text": null,
          "new_text": "ts.date()",
          "old_line_content": "                if ( !tailing && !initial && next != syncedTo ) {",
          "new_line_content": "                OpTime next( ts.date() );",
          "content_same": false
        },
        {
          "line": 1250,
          "old_api": null,
          "new_api": "resetSlave",
          "old_text": null,
          "new_text": "resetSlave()",
          "old_line_content": "                    return 1;",
          "new_line_content": "                    resetSlave();",
          "content_same": false
        },
        {
          "line": 1766,
          "old_api": null,
          "new_api": "log",
          "old_text": null,
          "new_text": "log(1)",
          "old_line_content": "            replSettings.master = true;",
          "new_line_content": "                log(1) << \"master=true\" << endl;",
          "content_same": false
        },
        {
          "line": 1255,
          "old_api": null,
          "new_api": "updateSetsWithLocalOps",
          "old_text": null,
          "new_text": "updateSetsWithLocalOps( localLogTail, true )",
          "old_line_content": "            }",
          "new_line_content": "                updateSetsWithLocalOps( localLogTail, true );",
          "content_same": false
        },
        {
          "line": 1768,
          "old_api": null,
          "new_api": "createOplog",
          "old_text": null,
          "new_text": "createOplog()",
          "old_line_content": "            boost::thread t(replMasterThread);",
          "new_line_content": "            createOplog();",
          "content_same": false
        },
        {
          "line": 1259,
          "old_api": null,
          "new_api": "toString",
          "old_text": null,
          "new_text": "nextOpTime.toString()",
          "old_line_content": "            if ( tailing || initial ) {",
          "new_line_content": "            log(2) << \"repl: first op time received: \" << nextOpTime.toString() << '\\n';",
          "content_same": false
        },
        {
          "line": 1773,
          "old_api": null,
          "new_api": "sleepmillis",
          "old_text": null,
          "new_text": "sleepmillis( 50 )",
          "old_line_content": "    }",
          "new_line_content": "            sleepmillis( 50 );",
          "content_same": false
        },
        {
          "line": 1262,
          "old_api": null,
          "new_api": "log",
          "old_text": null,
          "new_text": "log(1)",
          "old_line_content": "                else",
          "new_line_content": "                    log(1) << \"repl:   initial run\\n\";",
          "content_same": false
        },
        {
          "line": 1266,
          "old_api": null,
          "new_api": "OpTime",
          "old_text": null,
          "new_text": "OpTime()",
          "old_line_content": "            }",
          "new_line_content": "                nextOpTime = OpTime(); // will reread the op below",
          "content_same": false
        },
        {
          "line": 1270,
          "old_api": null,
          "new_api": "toStringLong",
          "old_text": null,
          "new_text": "nextOpTime.toStringLong()",
          "old_line_content": "                if ( nextOpTime < syncedTo )",
          "new_line_content": "                l << \"repl:   nextOpTime \" << nextOpTime.toStringLong() << ' ';",
          "content_same": false
        },
        {
          "line": 1783,
          "old_api": null,
          "new_api": "max",
          "old_text": null,
          "new_text": "max(nthr, 1)",
          "old_line_content": "        int m = 8 / nthr;",
          "new_line_content": "        nthr = max(nthr, 1);",
          "content_same": false
        },
        {
          "line": 1788,
          "old_api": null,
          "new_api": "BSON",
          "old_text": null,
          "new_text": "BSON( \"_id\" << 1 )",
          "old_line_content": "",
          "new_line_content": "        BSONObj x = BSON( \"ns\" << \"test.foo\" << \"o\" << BSON( \"_id\" << 1 ) << \"op\" << \"i\" );",
          "content_same": false
        },
        {
          "line": 1279,
          "old_api": null,
          "new_api": "log",
          "old_text": null,
          "new_text": "log()",
          "old_line_content": "                replInfo = replAllDead = \"data too stale halted replication\";",
          "new_line_content": "                log() << \"repl:   data too stale, halting replication\" << endl;",
          "content_same": false
        },
        {
          "line": 1792,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "v.push_back(x)",
          "old_line_content": "",
          "new_line_content": "        v.push_back(x);",
          "content_same": false
        },
        {
          "line": 1282,
          "old_api": null,
          "new_api": "SyncException",
          "old_text": null,
          "new_text": "SyncException()",
          "old_line_content": "            }",
          "new_line_content": "                throw SyncException();",
          "content_same": false
        },
        {
          "line": 1796,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "v.size()",
          "old_line_content": "            unsigned b = a + m - 1; // v[a..b]",
          "new_line_content": "            if( a >= v.size() ) break;",
          "content_same": false
        },
        {
          "line": 1799,
          "old_api": null,
          "new_api": "schedule",
          "old_text": null,
          "new_text": "tp.schedule(pretouchN, v, a, b)",
          "old_line_content": "            DEV cout << \"pretouch task: \" << a << \"..\" << b << endl;",
          "new_line_content": "            tp.schedule(pretouchN, v, a, b);",
          "content_same": false
        },
        {
          "line": 1803,
          "old_api": null,
          "new_api": "join",
          "old_text": null,
          "new_text": "tp.join()",
          "old_line_content": "    }",
          "new_line_content": "        tp.join();",
          "content_same": false
        },
        {
          "line": 1292,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(0)",
          "old_line_content": "            while ( 1 ) {",
          "new_line_content": "\t\t\ttime_t saveLast = time(0);",
          "content_same": false
        },
        {
          "line": 1308,
          "old_api": null,
          "new_api": "more",
          "old_text": null,
          "new_text": "oplogReader.more()",
          "old_line_content": "                    dblock lk;",
          "new_line_content": "                if ( !oplogReader.more() ) {",
          "content_same": false
        },
        {
          "line": 1310,
          "old_api": null,
          "new_api": "nextLastSavedLocalTs",
          "old_text": null,
          "new_text": "nextLastSavedLocalTs()",
          "old_line_content": "                    {",
          "new_line_content": "                    OpTime nextLastSaved = nextLastSavedLocalTs();",
          "content_same": false
        },
        {
          "line": 1314,
          "old_api": null,
          "new_api": "getInitialSyncCompleted",
          "old_text": null,
          "new_text": "getInitialSyncCompleted()",
          "old_line_content": "                                continue;",
          "new_line_content": "                            if ( getInitialSyncCompleted() ) { // if initial sync hasn't completed, break out of loop so we can set to completed or clone more dbs",
          "content_same": false
        },
        {
          "line": 1318,
          "old_api": null,
          "new_api": "setLastSavedLocalTs",
          "old_text": null,
          "new_text": "setLastSavedLocalTs( nextLastSaved )",
          "old_line_content": "                        }",
          "new_line_content": "                            setLastSavedLocalTs( nextLastSaved );",
          "content_same": false
        },
        {
          "line": 1321,
          "old_api": null,
          "new_api": "awaitCapable",
          "old_text": null,
          "new_text": "oplogReader.awaitCapable()",
          "old_line_content": "                        okResultCode = 0; // don't sleep",
          "new_line_content": "                    if( oplogReader.awaitCapable() && tailing )",
          "content_same": false
        },
        {
          "line": 1325,
          "old_api": null,
          "new_api": "log",
          "old_text": null,
          "new_text": "log()",
          "old_line_content": "                    nApplied = n;",
          "new_line_content": "                    log() << \"repl:   applied \" << n << \" operations\" << endl;",
          "content_same": false
        },
        {
          "line": 1327,
          "old_api": null,
          "new_api": "toStringLong",
          "old_text": null,
          "new_text": "syncedTo.toStringLong()",
          "old_line_content": "                    break;",
          "new_line_content": "                    log() << \"repl:  end sync_pullOpLog syncedTo: \" << syncedTo.toStringLong() << endl;",
          "content_same": false
        },
        {
          "line": 1331,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(0)",
          "old_line_content": "\t\t\t\t\t// periodically note our progress, in case we are doing a lot of work and crash",
          "new_line_content": "                OCCASIONALLY if( n > 0 && ( n > 100000 || time(0) - saveLast > 60 ) ) { ",
          "content_same": false
        },
        {
          "line": 1339,
          "old_api": null,
          "new_api": "time",
          "old_text": null,
          "new_text": "time(0)",
          "old_line_content": "\t\t\t\t\tn = 0;",
          "new_line_content": "\t\t\t\t\tsaveLast = time(0);",
          "content_same": false
        },
        {
          "line": 1348,
          "old_api": null,
          "new_api": "log",
          "old_text": null,
          "new_text": "log()",
          "old_line_content": "                    replInfo = replAllDead = \"sync error: no ts found querying remote oplog record\";",
          "new_line_content": "                    log() << \"halting replication\" << endl;",
          "content_same": false
        },
        {
          "line": 1350,
          "old_api": null,
          "new_api": "SyncException",
          "old_text": null,
          "new_text": "SyncException()",
          "old_line_content": "                }",
          "new_line_content": "                    throw SyncException();",
          "content_same": false
        },
        {
          "line": 1353,
          "old_api": null,
          "new_api": "date",
          "old_text": null,
          "new_text": "ts.date()",
          "old_line_content": "                if ( !( last < nextOpTime ) ) {",
          "new_line_content": "                nextOpTime = OpTime( ts.date() );",
          "content_same": false
        },
        {
          "line": 1358,
          "old_api": null,
          "new_api": "log",
          "old_text": null,
          "new_text": "log()",
          "old_line_content": "                    replInfo = replAllDead = \"sync error last >= nextOpTime\";",
          "new_line_content": "                    log() << \" halting replication\" << endl;",
          "content_same": false
        },
        {
          "line": 1360,
          "old_api": null,
          "new_api": "uassert",
          "old_text": null,
          "new_text": "uassert( 10123 , \"replication error last applied optime at slave >= nextOpTime from master\", false)",
          "old_line_content": "                }",
          "new_line_content": "                    uassert( 10123 , \"replication error last applied optime at slave >= nextOpTime from master\", false);",
          "content_same": false
        },
        {
          "line": 1364,
          "old_api": null,
          "new_api": "getSecs",
          "old_text": null,
          "new_text": "nextOpTime.getSecs()",
          "old_line_content": "                    dblock lk;",
          "new_line_content": "                    _sleepAdviceTime = nextOpTime.getSecs() + replSettings.slavedelay + 1;",
          "content_same": false
        },
        {
          "line": 1368,
          "old_api": null,
          "new_api": "save",
          "old_text": null,
          "new_text": "save()",
          "old_line_content": "                    }",
          "new_line_content": "                        save();",
          "content_same": false
        },
        {
          "line": 1372,
          "old_api": null,
          "new_api": "log",
          "old_text": null,
          "new_text": "log()",
          "old_line_content": "                    break;",
          "new_line_content": "                    log() << \"waiting until: \" << _sleepAdviceTime << \" to continue\" << endl;",
          "content_same": false
        },
        {
          "line": 862,
          "old_api": null,
          "new_api": "log",
          "old_text": null,
          "new_text": "log(6)",
          "old_line_content": "        // skip no-op",
          "new_line_content": "            log(6) << \"processing op: \" << op << endl;",
          "content_same": false
        },
        {
          "line": 1376,
          "old_api": null,
          "new_api": "sync_pullOpLog_applyOperation",
          "old_text": null,
          "new_text": "sync_pullOpLog_applyOperation(op, &localLogTail)",
          "old_line_content": "                n++;",
          "new_line_content": "                sync_pullOpLog_applyOperation(op, &localLogTail);",
          "content_same": false
        },
        {
          "line": 870,
          "old_api": null,
          "new_api": "nsToDatabase",
          "old_text": null,
          "new_text": "nsToDatabase(ns, clientName)",
          "old_line_content": "",
          "new_line_content": "        nsToDatabase(ns, clientName);",
          "content_same": false
        },
        {
          "line": 1384,
          "old_api": null,
          "new_api": "fromjson",
          "old_text": null,
          "new_text": "fromjson(\"{\\\"user\\\":\\\"repl\\\"}\")",
          "old_line_content": "    ",
          "new_line_content": "\tBSONObj userReplQuery = fromjson(\"{\\\"user\\\":\\\"repl\\\"}\");",
          "content_same": false
        },
        {
          "line": 873,
          "old_api": null,
          "new_api": "toString",
          "old_text": null,
          "new_text": "op.toString()",
          "old_line_content": "            return;",
          "new_line_content": "            problem() << \"skipping bad op in oplog: \" << op.toString() << endl;",
          "content_same": false
        },
        {
          "line": 1388,
          "old_api": null,
          "new_api": "log",
          "old_text": null,
          "new_text": "log()",
          "old_line_content": "\t\t\treturn false;",
          "new_line_content": "\t\t\tlog() << \"replauthenticate: requires admin permissions, failing\\n\";",
          "content_same": false
        },
        {
          "line": 877,
          "old_api": null,
          "new_api": "toString",
          "old_text": null,
          "new_text": "op.toString()",
          "old_line_content": "            replAllDead = \"bad object in oplog\";",
          "new_line_content": "            problem() << \"halting replication, bad op in oplog:\\n  \" << op.toString() << endl;",
          "content_same": false
        },
        {
          "line": 879,
          "old_api": null,
          "new_api": "SyncException",
          "old_text": null,
          "new_text": "SyncException()",
          "old_line_content": "        }",
          "new_line_content": "            throw SyncException();",
          "content_same": false
        },
        {
          "line": 882,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "only.empty()",
          "old_line_content": "            return;",
          "new_line_content": "        if ( !only.empty() && only != clientName )",
          "content_same": false
        },
        {
          "line": 1396,
          "old_api": null,
          "new_api": "Helpers::findOne(\"local.system.users\", userReplQuery, user)",
          "old_text": null,
          "new_text": "Helpers::findOne(\"local.system.users\", userReplQuery, user)",
          "old_line_content": "\t\t\t\t// try the first user is local",
          "new_line_content": "\t\t\tif( !Helpers::findOne(\"local.system.users\", userReplQuery, user) ) { ",
          "content_same": false
        },
        {
          "line": 1398,
          "old_api": null,
          "new_api": "Helpers::getSingleton(\"local.system.users\", user)",
          "old_text": null,
          "new_text": "Helpers::getSingleton(\"local.system.users\", user)",
          "old_line_content": "\t\t\t\t\tif( noauth ) ",
          "new_line_content": "\t\t\t\tif( !Helpers::getSingleton(\"local.system.users\", user) ) {",
          "content_same": false
        },
        {
          "line": 1402,
          "old_api": null,
          "new_api": "log",
          "old_text": null,
          "new_text": "log()",
          "old_line_content": "\t\t\t\t\treturn false;",
          "new_line_content": "\t\t\t\t\tlog() << \"replauthenticate: no user in local.system.users to use for authentication\\n\";",
          "content_same": false
        },
        {
          "line": 891,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert( countdown >= 0 )",
          "old_line_content": "                } else {",
          "new_line_content": "                    assert( countdown >= 0 );",
          "content_same": false
        },
        {
          "line": 897,
          "old_api": null,
          "new_api": "reset",
          "old_text": null,
          "new_text": "tp.reset( new ThreadPool(nthr) )",
          "old_line_content": "                    }",
          "new_line_content": "                        tp.reset( new ThreadPool(nthr) );",
          "content_same": false
        },
        {
          "line": 900,
          "old_api": null,
          "new_api": "peek",
          "old_text": null,
          "new_text": "oplogReader.peek(v, cmdLine.pretouch)",
          "old_line_content": "                    unsigned a = 0;",
          "new_line_content": "                    oplogReader.peek(v, cmdLine.pretouch);",
          "content_same": false
        },
        {
          "line": 1412,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "p.empty()",
          "old_line_content": "\t\tstring err;",
          "new_line_content": "\t\tmassert( 10393 , \"bad user object? [2]\", !p.empty());",
          "content_same": false
        },
        {
          "line": 903,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "v.size()",
          "old_line_content": "                        unsigned b = a + m - 1; // v[a..b]",
          "new_line_content": "                        if( a >= v.size() ) break;",
          "content_same": false
        },
        {
          "line": 1415,
          "old_api": null,
          "new_api": "log",
          "old_text": null,
          "new_text": "log()",
          "old_line_content": "\t\t\treturn false;",
          "new_line_content": "\t\t\tlog() << \"replauthenticate: can't authenticate to master server, user:\" << u << endl;",
          "content_same": false
        },
        {
          "line": 906,
          "old_api": null,
          "new_api": "schedule",
          "old_text": null,
          "new_text": "tp->schedule(pretouchN, v, a, b)",
          "old_line_content": "                        DEV cout << \"pretouch task: \" << a << \"..\" << b << endl;",
          "new_line_content": "                        tp->schedule(pretouchN, v, a, b);",
          "content_same": false
        },
        {
          "line": 913,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "v.size()",
          "old_line_content": "                }",
          "new_line_content": "                    countdown = v.size();",
          "content_same": false
        },
        {
          "line": 1426,
          "old_api": null,
          "new_api": "Helpers::getSingleton( \"local.me\" , me )",
          "old_text": null,
          "new_text": "Helpers::getSingleton( \"local.me\" , me )",
          "old_line_content": "                BSONObjBuilder b;",
          "new_line_content": "            if ( ! Helpers::getSingleton( \"local.me\" , me ) ){",
          "content_same": false
        },
        {
          "line": 917,
          "old_api": null,
          "new_api": "pretouchOperation",
          "old_text": null,
          "new_text": "pretouchOperation(op)",
          "old_line_content": "            }",
          "new_line_content": "                pretouchOperation(op);",
          "content_same": false
        },
        {
          "line": 1430,
          "old_api": null,
          "new_api": "Helpers::putSingleton( \"local.me\" , me )",
          "old_text": null,
          "new_text": "Helpers::putSingleton( \"local.me\" , me )",
          "old_line_content": "            }",
          "new_line_content": "                Helpers::putSingleton( \"local.me\" , me );",
          "content_same": false
        },
        {
          "line": 1435,
          "old_api": null,
          "new_api": "appendAs",
          "old_text": null,
          "new_text": "cmd.appendAs( me[\"_id\"] , \"handshake\" )",
          "old_line_content": "",
          "new_line_content": "        cmd.appendAs( me[\"_id\"] , \"handshake\" );",
          "content_same": false
        },
        {
          "line": 925,
          "old_api": null,
          "new_api": "updateSetsWithLocalOps",
          "old_text": null,
          "new_text": "updateSetsWithLocalOps( *localLogTail, false )",
          "old_line_content": "        }",
          "new_line_content": "            updateSetsWithLocalOps( *localLogTail, false ); // don't allow unlocking or conversion to db backed storage",
          "content_same": false
        },
        {
          "line": 1438,
          "old_api": null,
          "new_api": "obj",
          "old_text": null,
          "new_text": "cmd.obj()",
          "old_line_content": "        // ignoring for now on purpose for older versions",
          "new_line_content": "        bool ok = conn->runCommand( \"admin\" , cmd.obj() , res );",
          "content_same": false
        },
        {
          "line": 1440,
          "old_api": null,
          "new_api": "log",
          "old_text": null,
          "new_text": "log(ok)",
          "old_line_content": "        return true;",
          "new_line_content": "        log(ok) << \"replHandshake res not: \" << ok << \" res: \" << res << endl;",
          "content_same": false
        },
        {
          "line": 931,
          "old_api": null,
          "new_api": "SyncException",
          "old_text": null,
          "new_text": "SyncException()",
          "old_line_content": "        }",
          "new_line_content": "            throw SyncException();",
          "content_same": false
        },
        {
          "line": 1446,
          "old_api": null,
          "new_api": "auto_ptr<DBClientConnection>(new DBClientConnection( false, 0, replPair ? 20 : 0 /* tcp timeout */))",
          "old_text": null,
          "new_text": "auto_ptr<DBClientConnection>(new DBClientConnection( false, 0, replPair ? 20 : 0 /* tcp timeout */))",
          "old_line_content": "            string errmsg;",
          "new_line_content": "            _conn = auto_ptr<DBClientConnection>(new DBClientConnection( false, 0, replPair ? 20 : 0 /* tcp timeout */));",
          "content_same": false
        },
        {
          "line": 935,
          "old_api": null,
          "new_api": "getClient",
          "old_text": null,
          "new_text": "ctx.getClient()->curop()->reset()",
          "old_line_content": "",
          "new_line_content": "        ctx.getClient()->curop()->reset();",
          "content_same": false
        },
        {
          "line": 938,
          "old_api": null,
          "new_api": "count",
          "old_text": null,
          "new_text": "incompleteCloneDbs.count( clientName )",
          "old_line_content": "",
          "new_line_content": "        bool incompleteClone = incompleteCloneDbs.count( clientName ) != 0;",
          "content_same": false
        },
        {
          "line": 941,
          "old_api": null,
          "new_api": "justCreated",
          "old_text": null,
          "new_text": "ctx.justCreated()",
          "old_line_content": "        ",
          "new_line_content": "            log(6) << \"ns: \" << ns << \", justCreated: \" << ctx.justCreated() << \", empty: \" << empty << \", incompleteClone: \" << incompleteClone << endl;",
          "content_same": false
        },
        {
          "line": 1453,
          "old_api": null,
          "new_api": "log",
          "old_text": null,
          "new_text": "log()",
          "old_line_content": "                return false;",
          "new_line_content": "                log() << \"repl:  \" << errmsg << endl;",
          "content_same": false
        },
        {
          "line": 946,
          "old_api": null,
          "new_api": "applyOperation",
          "old_text": null,
          "new_text": "applyOperation( op )",
          "old_line_content": "            return;",
          "new_line_content": "            applyOperation( op );",
          "content_same": false
        },
        {
          "line": 950,
          "old_api": null,
          "new_api": "justCreated",
          "old_text": null,
          "new_text": "ctx.justCreated()",
          "old_line_content": "            // we must add to incomplete list now that setClient has been called",
          "new_line_content": "        if ( ctx.justCreated() || empty || incompleteClone ) {",
          "content_same": false
        },
        {
          "line": 952,
          "old_api": null,
          "new_api": "insert",
          "old_text": null,
          "new_text": "incompleteCloneDbs.insert( clientName )",
          "old_line_content": "            if ( nClonedThisPass ) {",
          "new_line_content": "            incompleteCloneDbs.insert( clientName );",
          "content_same": false
        },
        {
          "line": 1468,
          "old_api": null,
          "new_api": "log",
          "old_text": null,
          "new_text": "log()",
          "old_line_content": "            l << \"repl: from \";",
          "new_line_content": "            Nullstream& l = log();",
          "content_same": false
        },
        {
          "line": 959,
          "old_api": null,
          "new_api": "insert",
          "old_text": null,
          "new_text": "addDbNextPass.insert( clientName )",
          "old_line_content": "            } else {",
          "new_line_content": "                addDbNextPass.insert( clientName );",
          "content_same": false
        },
        {
          "line": 1471,
          "old_api": null,
          "new_api": "sourceName",
          "old_text": null,
          "new_text": "sourceName()",
          "old_line_content": "            }",
          "new_line_content": "                l << \"source:\" << sourceName() << ' ';",
          "content_same": false
        },
        {
          "line": 962,
          "old_api": null,
          "new_api": "log",
          "old_text": null,
          "new_text": "log()",
          "old_line_content": "                }",
          "new_line_content": "                    log() << \"An earlier initial clone of '\" << clientName << \"' did not complete, now resyncing.\" << endl;",
          "content_same": false
        },
        {
          "line": 964,
          "old_api": null,
          "new_api": "save",
          "old_text": null,
          "new_text": "save()",
          "old_line_content": "                Client::Context ctx(ns);",
          "new_line_content": "                save();",
          "content_same": false
        },
        {
          "line": 1480,
          "old_api": null,
          "new_api": "sleepsecs",
          "old_text": null,
          "new_text": "sleepsecs(5)",
          "old_line_content": "            return -1;",
          "new_line_content": "            sleepsecs(5);",
          "content_same": false
        },
        {
          "line": 969,
          "old_api": null,
          "new_api": "erase",
          "old_text": null,
          "new_text": "incompleteCloneDbs.erase( clientName )",
          "old_line_content": "            }",
          "new_line_content": "                incompleteCloneDbs.erase( clientName );",
          "content_same": false
        },
        {
          "line": 971,
          "old_api": null,
          "new_api": "save",
          "old_text": null,
          "new_text": "save()",
          "old_line_content": "        } else {",
          "new_line_content": "            save();",
          "content_same": false
        },
        {
          "line": 1485,
          "old_api": null,
          "new_api": "log",
          "old_text": null,
          "new_text": "log(4)",
          "old_line_content": "            if ( replPair && paired ) {",
          "new_line_content": "\t\t\tlog(4) << \"repl:  can't connect to sync source\" << endl;",
          "content_same": false
        },
        {
          "line": 1488,
          "old_api": null,
          "new_api": "arbitrate",
          "old_text": null,
          "new_text": "replPair->arbitrate()",
          "old_line_content": "            }",
          "new_line_content": "                replPair->arbitrate();",
          "content_same": false
        },
        {
          "line": 979,
          "old_api": null,
          "new_api": "log",
          "old_text": null,
          "new_text": "log( 6 )",
          "old_line_content": "                    BSONObj existing;",
          "new_line_content": "                    log( 6 ) << \"skipping operation matching mod id object \" << op << endl;",
          "content_same": false
        },
        {
          "line": 982,
          "old_api": null,
          "new_api": "logOp",
          "old_text": null,
          "new_text": "logOp( \"i\", ns, existing )",
          "old_line_content": "                } else {",
          "new_line_content": "                        logOp( \"i\", ns, existing );",
          "content_same": false
        },
        {
          "line": 1494,
          "old_api": null,
          "new_api": "conn",
          "old_text": null,
          "new_text": "oplogReader.conn()",
          "old_line_content": "            int nMasters = ( remote == ReplPair::State_Master ) + ( replPair->state == ReplPair::State_Master );",
          "new_line_content": "            int remote = replPair->negotiate(oplogReader.conn(), \"direct\");",
          "content_same": false
        },
        {
          "line": 984,
          "old_api": null,
          "new_api": "log",
          "old_text": null,
          "new_text": "log( 6 )",
          "old_line_content": "                }",
          "new_line_content": "                    log( 6 ) << \"skipping operation matching changed id object \" << op << endl;",
          "content_same": false
        },
        {
          "line": 1497,
          "old_api": null,
          "new_api": "log",
          "old_text": null,
          "new_text": "log()",
          "old_line_content": "                return 1;",
          "new_line_content": "                log() << ( nMasters == 0 ? \"no master\" : \"two masters\" ) << \", deferring oplog pull\" << endl;",
          "content_same": false
        },
        {
          "line": 987,
          "old_api": null,
          "new_api": "applyOperation",
          "old_text": null,
          "new_text": "applyOperation( op )",
          "old_line_content": "            }",
          "new_line_content": "                applyOperation( op );",
          "content_same": false
        },
        {
          "line": 989,
          "old_api": null,
          "new_api": "erase",
          "old_text": null,
          "new_text": "addDbNextPass.erase( clientName )",
          "old_line_content": "        }",
          "new_line_content": "            addDbNextPass.erase( clientName );",
          "content_same": false
        },
        {
          "line": 996,
          "old_api": null,
          "new_api": "getObjectField",
          "old_text": null,
          "new_text": "op.getObjectField( \"o\" )",
          "old_line_content": "        switch( opType[ 0 ] ) {",
          "new_line_content": "        BSONObj o = op.getObjectField( \"o\" );",
          "content_same": false
        },
        {
          "line": 1515,
          "old_api": null,
          "new_api": "sync_pullOpLog",
          "old_text": null,
          "new_text": "sync_pullOpLog(nApplied)",
          "old_line_content": "    }",
          "new_line_content": "        return sync_pullOpLog(nApplied);",
          "content_same": false
        },
        {
          "line": 1004,
          "old_api": null,
          "new_api": "obj",
          "old_text": null,
          "new_text": "idBuilder.obj()",
          "old_line_content": "            }",
          "new_line_content": "                return idBuilder.obj();",
          "content_same": false
        },
        {
          "line": 1010,
          "old_api": null,
          "new_api": "firstElement",
          "old_text": null,
          "new_text": "o.firstElement().fieldName()",
          "old_line_content": "                    mod = true;",
          "new_line_content": "                if ( o.firstElement().fieldName()[ 0 ] == '$' )",
          "content_same": false
        },
        {
          "line": 1016,
          "old_api": null,
          "new_api": "BSONObj",
          "old_text": null,
          "new_text": "BSONObj()",
          "old_line_content": "                return o;",
          "new_line_content": "                    return BSONObj(); // skip \"db\" op type",
          "content_same": false
        },
        {
          "line": 1022,
          "old_api": null,
          "new_api": "BSONObj",
          "old_text": null,
          "new_text": "BSONObj()",
          "old_line_content": "    }",
          "new_line_content": "        return BSONObj();",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 1537,
          "old_api": "empty",
          "new_api": null,
          "old_text": "sources.empty()",
          "new_text": null,
          "old_line_content": "        if ( sources.empty() ) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1026,
          "old_api": "mayUpgradeStorage",
          "new_api": null,
          "old_text": "idTracker.mayUpgradeStorage()",
          "new_text": null,
          "old_line_content": "            idTracker.mayUpgradeStorage();",
          "new_line_content": "        if ( mayUnlock ) {",
          "content_same": false
        },
        {
          "line": 1029,
          "old_api": "idForOp",
          "new_api": null,
          "old_text": "idForOp( op, mod )",
          "new_text": null,
          "old_line_content": "        BSONObj id = idForOp( op, mod );",
          "new_line_content": "        bool mod;",
          "content_same": false
        },
        {
          "line": 1545,
          "old_api": "end",
          "new_api": null,
          "old_text": "sources.end()",
          "new_text": null,
          "old_line_content": "        for ( ReplSource::SourceVector::iterator i = sources.begin(); i != sources.end(); i++ ) {",
          "new_line_content": "        int sleepAdvice = 1;",
          "content_same": false
        },
        {
          "line": 1036,
          "old_api": "haveModId",
          "new_api": null,
          "old_text": "idTracker.haveModId( ns, id, true )",
          "new_text": null,
          "old_line_content": "                idTracker.haveModId( ns, id, true );",
          "new_line_content": "            if ( mod )",
          "content_same": false
        },
        {
          "line": 1549,
          "old_api": "sync",
          "new_api": null,
          "old_text": "s->sync(nApplied)",
          "new_text": null,
          "old_line_content": "                res = s->sync(nApplied);",
          "new_line_content": "            try {",
          "content_same": false
        },
        {
          "line": 1042,
          "old_api": "ns",
          "new_api": null,
          "old_text": "ns()",
          "new_text": null,
          "old_line_content": "        string _ns = ns();",
          "new_line_content": "    void ReplSource::syncToTailOfRemoteLog() {",
          "content_same": false
        },
        {
          "line": 1044,
          "old_api": "empty",
          "new_api": null,
          "old_text": "only.empty()",
          "new_text": null,
          "old_line_content": "        if ( !only.empty() ) {",
          "new_line_content": "        BSONObjBuilder b;",
          "content_same": false
        },
        {
          "line": 1557,
          "old_api": "sleepAdvice",
          "new_api": null,
          "old_text": "s->sleepAdvice()",
          "new_text": null,
          "old_line_content": "                else if ( s->sleepAdvice() ) {",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 1047,
          "old_api": "BSON",
          "new_api": null,
          "old_text": "BSON( \"$natural\" << -1 )",
          "new_text": null,
          "old_line_content": "        BSONObj last = oplogReader.findOne( _ns.c_str(), Query( b.done() ).sort( BSON( \"$natural\" << -1 ) ) );",
          "new_line_content": "        }        ",
          "content_same": false
        },
        {
          "line": 1563,
          "old_api": "setInitialSyncCompletedLocking",
          "new_api": null,
          "old_text": "pairSync->setInitialSyncCompletedLocking()",
          "new_text": null,
          "old_line_content": "                    pairSync->setInitialSyncCompletedLocking();",
          "new_line_content": "                if ( res >= 0 && !moreToSync /*&& !s->syncedTo.isNull()*/ ) {",
          "content_same": false
        },
        {
          "line": 1567,
          "old_api": "log",
          "new_api": null,
          "old_text": "log()",
          "new_text": null,
          "old_line_content": "                log() << \"caught SyncException\" << endl;",
          "new_line_content": "            catch ( const SyncException& ) {",
          "content_same": false
        },
        {
          "line": 1057,
          "old_api": "BSON",
          "new_api": null,
          "old_text": "BSON( \"$natural\" << -1 )",
          "new_text": null,
          "old_line_content": "        shared_ptr<Cursor> c = findTableScan( \"local.oplog.$main\", BSON( \"$natural\" << -1 ) );",
          "new_line_content": "        Client::Context ctx( \"local.oplog.$main\" );",
          "content_same": false
        },
        {
          "line": 1533,
          "old_api": "ReplSource::loadAll(sources)",
          "new_api": null,
          "old_text": "ReplSource::loadAll(sources)",
          "new_text": null,
          "old_line_content": "            ReplSource::loadAll(sources);",
          "new_line_content": "            dblock lk;",
          "content_same": false
        },
        {
          "line": 1571,
          "old_api": "severe",
          "new_api": null,
          "old_text": "e.severe()",
          "new_text": null,
          "old_line_content": "                if ( e.severe() ) {",
          "new_line_content": "            catch ( AssertionException& e ) {",
          "content_same": false
        },
        {
          "line": 1576,
          "old_api": "what",
          "new_api": null,
          "old_text": "e.what()",
          "new_text": null,
          "old_line_content": "                    log() << \"repl: AssertionException \" << e.what() << '\\n';",
          "new_line_content": "                else {",
          "content_same": false
        },
        {
          "line": 1065,
          "old_api": "log",
          "new_api": null,
          "old_text": "log( 3 )",
          "new_text": null,
          "old_line_content": "        log( 3 ) << \"updated _lastSavedLocalTs to: \" << _lastSavedLocalTs << endl;",
          "new_line_content": "        _lastSavedLocalTs = nextLocalTs;",
          "content_same": false
        },
        {
          "line": 1069,
          "old_api": "log",
          "new_api": null,
          "old_text": "log()",
          "new_text": null,
          "old_line_content": "        log() << \"**********************************************************\\n\";",
          "new_line_content": "    void ReplSource::resetSlave() {",
          "content_same": false
        },
        {
          "line": 1581,
          "old_api": "what",
          "new_api": null,
          "old_text": "e.what()",
          "new_text": null,
          "old_line_content": "                log() << \"repl: DBException \" << e.what() << endl;",
          "new_line_content": "            catch ( const DBException& e ) {",
          "content_same": false
        },
        {
          "line": 1585,
          "old_api": "what",
          "new_api": null,
          "old_text": "e.what()",
          "new_text": null,
          "old_line_content": "                log() << \"repl: std::exception \" << e.what() << endl;",
          "new_line_content": "            catch ( const std::exception &e ) {",
          "content_same": false
        },
        {
          "line": 1077,
          "old_api": "nextLastSavedLocalTs",
          "new_api": null,
          "old_text": "nextLastSavedLocalTs()",
          "new_text": null,
          "old_line_content": "            setLastSavedLocalTs( nextLastSavedLocalTs() );",
          "new_line_content": "            dblock lk;",
          "content_same": false
        },
        {
          "line": 1589,
          "old_api": "log",
          "new_api": null,
          "old_text": "log()",
          "new_text": null,
          "old_line_content": "                log() << \"unexpected exception during replication.  replication will halt\" << endl;",
          "new_line_content": "            catch ( ... ) { ",
          "content_same": false
        },
        {
          "line": 1593,
          "old_api": "resetConnection",
          "new_api": null,
          "old_text": "s->oplogReader.resetConnection()",
          "new_text": null,
          "old_line_content": "                s->oplogReader.resetConnection();",
          "new_line_content": "            if ( res < 0 )",
          "content_same": false
        },
        {
          "line": 1085,
          "old_api": "BSON",
          "new_api": null,
          "old_text": "BSON( \"$natural\" << -1 )",
          "new_text": null,
          "old_line_content": "        shared_ptr<Cursor> localLog = findTableScan( \"local.oplog.$main\", BSON( \"$natural\" << -1 ) );",
          "new_line_content": "        Client::Context ctx( \"local.oplog.$main\" );",
          "content_same": false
        },
        {
          "line": 1087,
          "old_api": "advance",
          "new_api": null,
          "old_text": "localLog->advance()",
          "new_text": null,
          "old_line_content": "        for( ; localLog->ok(); localLog->advance() ) {",
          "new_line_content": "        OpTime newTail;",
          "content_same": false
        },
        {
          "line": 1605,
          "old_api": "ReplSource::throttledForceResyncDead( \"auto\" )",
          "new_api": null,
          "old_text": "ReplSource::throttledForceResyncDead( \"auto\" )",
          "new_text": null,
          "old_line_content": "                    if ( !replSettings.autoresync || !ReplSource::throttledForceResyncDead( \"auto\" ) )",
          "new_line_content": "                if ( replAllDead ) {",
          "content_same": false
        },
        {
          "line": 1095,
          "old_api": "updateSetsWithOp",
          "new_api": null,
          "old_text": "updateSetsWithOp( op, mayUnlock )",
          "new_text": null,
          "old_line_content": "            updateSetsWithOp( op, mayUnlock );",
          "new_line_content": "                break;",
          "content_same": false
        },
        {
          "line": 1608,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert( syncing == 0 )",
          "new_text": null,
          "old_line_content": "                assert( syncing == 0 ); // i.e., there is only one sync thread running. we will want to change/fix this.",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 1613,
          "old_api": "_replMain",
          "new_api": null,
          "old_text": "_replMain(sources, nApplied)",
          "new_text": null,
          "old_line_content": "                s = _replMain(sources, nApplied);",
          "new_line_content": "                int nApplied = 0;",
          "content_same": false
        },
        {
          "line": 1102,
          "old_api": "ok",
          "new_api": null,
          "old_text": "localLog->ok()",
          "new_text": null,
          "old_line_content": "        if ( !localLogTail.isNull() && !localLog->ok() ) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1104,
          "old_api": "reset",
          "new_api": null,
          "old_text": "idTracker.reset()",
          "new_text": null,
          "old_line_content": "            idTracker.reset();",
          "new_line_content": "            // local log filled up",
          "content_same": false
        },
        {
          "line": 1106,
          "old_api": "resetSlave",
          "new_api": null,
          "old_text": "resetSlave()",
          "new_text": null,
          "old_line_content": "            resetSlave();",
          "new_line_content": "            dbtemprelease t;",
          "content_same": false
        },
        {
          "line": 1618,
          "old_api": "sleepmillis",
          "new_api": null,
          "old_text": "sleepmillis(75)",
          "new_text": null,
          "old_line_content": "                        sleepmillis(75);",
          "new_line_content": "                        // sleep very little - just enought that we aren't truly hammering master",
          "content_same": false
        },
        {
          "line": 1109,
          "old_api": "isNull",
          "new_api": null,
          "old_text": "newTail.isNull()",
          "new_text": null,
          "old_line_content": "        if ( !newTail.isNull() )",
          "new_line_content": "        }        ",
          "content_same": false
        },
        {
          "line": 1623,
          "old_api": "out",
          "new_api": null,
          "old_text": "out()",
          "new_text": null,
          "old_line_content": "                out() << \"caught exception in _replMain\" << endl;",
          "new_line_content": "            } catch (...) {",
          "content_same": false
        },
        {
          "line": 1628,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert( syncing == 1 )",
          "new_text": null,
          "old_line_content": "                assert( syncing == 1 );",
          "new_line_content": "                dblock lk;",
          "content_same": false
        },
        {
          "line": 1122,
          "old_api": "sourceName",
          "new_api": null,
          "old_text": "sourceName()",
          "new_text": null,
          "old_line_content": "        string ns = string(\"local.oplog.$\") + sourceName();",
          "new_line_content": "        int okResultCode = 1;",
          "content_same": false
        },
        {
          "line": 1126,
          "old_api": "tailCheck",
          "new_api": null,
          "old_text": "oplogReader.tailCheck()",
          "new_text": null,
          "old_line_content": "        oplogReader.tailCheck();",
          "new_line_content": "        bool tailing = true;",
          "content_same": false
        },
        {
          "line": 1640,
          "old_api": "str",
          "new_api": null,
          "old_text": "ss.str()",
          "new_text": null,
          "old_line_content": "                string msg = ss.str();",
          "new_line_content": "                ss << \"repl: sleep \" << s << \"sec before next pass\";",
          "content_same": false
        },
        {
          "line": 1130,
          "old_api": "reset",
          "new_api": null,
          "old_text": "idTracker.reset()",
          "new_text": null,
          "old_line_content": "            idTracker.reset();",
          "new_line_content": "            dblock lk;",
          "content_same": false
        },
        {
          "line": 1642,
          "old_api": "log",
          "new_api": null,
          "old_text": "log()",
          "new_text": null,
          "old_line_content": "                    log() << msg << endl;",
          "new_line_content": "                if ( ! cmdLine.quiet )",
          "content_same": false
        },
        {
          "line": 1134,
          "old_api": "isNull",
          "new_api": null,
          "old_text": "syncedTo.isNull()",
          "new_text": null,
          "old_line_content": "        bool initial = syncedTo.isNull();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1136,
          "old_api": "haveCursor",
          "new_api": null,
          "old_text": "oplogReader.haveCursor()",
          "new_text": null,
          "old_line_content": "        if ( !oplogReader.haveCursor() || initial ) {",
          "new_line_content": "        ",
          "content_same": false
        },
        {
          "line": 1139,
          "old_api": "syncToTailOfRemoteLog",
          "new_api": null,
          "old_text": "syncToTailOfRemoteLog()",
          "new_text": null,
          "old_line_content": "                syncToTailOfRemoteLog();",
          "new_line_content": "                // Important to grab last oplog timestamp before listing databases.",
          "content_same": false
        },
        {
          "line": 1652,
          "old_api": "sleepsecs",
          "new_api": null,
          "old_text": "sleepsecs(4)",
          "new_text": null,
          "old_line_content": "        sleepsecs(4);",
          "new_line_content": "    static void replMasterThread() {",
          "content_same": false
        },
        {
          "line": 1141,
          "old_api": "BSON",
          "new_api": null,
          "old_text": "BSON( \"listDatabases\" << 1 )",
          "new_text": null,
          "old_line_content": "                bool ok = oplogReader.conn()->runCommand( \"admin\", BSON( \"listDatabases\" << 1 ), info );",
          "new_line_content": "                BSONObj info;",
          "content_same": false
        },
        {
          "line": 1657,
          "old_api": "sleepsecs",
          "new_api": null,
          "old_text": "sleepsecs( toSleep )",
          "new_text": null,
          "old_line_content": "            sleepsecs( toSleep );",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1148,
          "old_api": "embeddedObject",
          "new_api": null,
          "old_text": "e.embeddedObject().getField( \"name\" ).valuestr()",
          "new_text": null,
          "old_line_content": "                    string name = e.embeddedObject().getField( \"name\" ).valuestr();",
          "new_line_content": "                        break;",
          "content_same": false
        },
        {
          "line": 1151,
          "old_api": "empty",
          "new_api": null,
          "old_text": "only.empty()",
          "new_text": null,
          "old_line_content": "                            if ( only.empty() || only == name ) {",
          "new_line_content": "                        if ( name != \"local\" ) {",
          "content_same": false
        },
        {
          "line": 1664,
          "old_api": "got",
          "new_api": null,
          "old_text": "lk.got()",
          "new_text": null,
          "old_line_content": "                if ( lk.got() ){",
          "new_line_content": "                writelocktry lk(\"\",1);",
          "content_same": false
        },
        {
          "line": 1667,
          "old_api": "getAuthenticationInfo",
          "new_api": null,
          "old_text": "cc().getAuthenticationInfo()->authorize(\"admin\")",
          "new_text": null,
          "old_line_content": "                    cc().getAuthenticationInfo()->authorize(\"admin\");   ",
          "new_line_content": "                    ",
          "content_same": false
        },
        {
          "line": 1670,
          "old_api": "logKeepalive",
          "new_api": null,
          "old_text": "logKeepalive()",
          "new_text": null,
          "old_line_content": "                        logKeepalive();",
          "new_line_content": "                    try { ",
          "content_same": false
        },
        {
          "line": 1159,
          "old_api": "save",
          "new_api": null,
          "old_text": "save()",
          "new_text": null,
          "old_line_content": "                save();",
          "new_line_content": "                dblock lk;",
          "content_same": false
        },
        {
          "line": 1673,
          "old_api": "log",
          "new_api": null,
          "old_text": "log()",
          "new_text": null,
          "old_line_content": "                        log() << \"caught exception in replMasterThread()\" << endl;",
          "new_line_content": "                    catch(...) { ",
          "content_same": false
        },
        {
          "line": 1163,
          "old_api": "asDate",
          "new_api": null,
          "old_text": "syncedTo.asDate()",
          "new_text": null,
          "old_line_content": "            q.appendDate(\"$gte\", syncedTo.asDate());",
          "new_line_content": "            BSONObjBuilder q;",
          "content_same": false
        },
        {
          "line": 1165,
          "old_api": "done",
          "new_api": null,
          "old_text": "q.done()",
          "new_text": null,
          "old_line_content": "            query.append(\"ts\", q.done());",
          "new_line_content": "            BSONObjBuilder query;",
          "content_same": false
        },
        {
          "line": 1677,
          "old_api": "log",
          "new_api": null,
          "old_text": "log(5)",
          "new_text": null,
          "old_line_content": "                    log(5) << \"couldn't logKeepalive\" << endl;",
          "new_line_content": "                else {",
          "content_same": false
        },
        {
          "line": 1168,
          "old_api": "string",
          "new_api": null,
          "old_text": "string(\"^\")",
          "new_text": null,
          "old_line_content": "                query.appendRegex(\"ns\", string(\"^\") + only); // maybe append \"\\\\.\" here?",
          "new_line_content": "               // note we may here skip a LOT of data table scanning, a lot of work for the master.",
          "content_same": false
        },
        {
          "line": 1170,
          "old_api": "done",
          "new_api": null,
          "old_text": "query.done()",
          "new_text": null,
          "old_line_content": "            BSONObj queryObj = query.done();",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1173,
          "old_api": "c_str",
          "new_api": null,
          "old_text": "ns.c_str()",
          "new_text": null,
          "old_line_content": "            oplogReader.tailingQuery(ns.c_str(), queryObj);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1685,
          "old_api": "sleepsecs",
          "new_api": null,
          "old_text": "sleepsecs(1)",
          "new_text": null,
          "old_line_content": "        sleepsecs(1);",
          "new_line_content": "    void replSlaveThread() {",
          "content_same": false
        },
        {
          "line": 1177,
          "old_api": "log",
          "new_api": null,
          "old_text": "log(2)",
          "new_text": null,
          "old_line_content": "            log(2) << \"repl: tailing=true\\n\";",
          "new_line_content": "        else {",
          "content_same": false
        },
        {
          "line": 1690,
          "old_api": "getAuthenticationInfo",
          "new_api": null,
          "old_text": "cc().getAuthenticationInfo()->authorize(\"admin\")",
          "new_text": null,
          "old_line_content": "            cc().getAuthenticationInfo()->authorize(\"admin\");",
          "new_line_content": "            dblock lk;",
          "content_same": false
        },
        {
          "line": 1180,
          "old_api": "haveCursor",
          "new_api": null,
          "old_text": "oplogReader.haveCursor()",
          "new_text": null,
          "old_line_content": "        if( !oplogReader.haveCursor() ) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1693,
          "old_api": "Helpers::getSingleton(\"local.pair.startup\", obj)",
          "new_api": null,
          "old_text": "Helpers::getSingleton(\"local.pair.startup\", obj)",
          "new_text": null,
          "old_line_content": "            if ( Helpers::getSingleton(\"local.pair.startup\", obj) ) {",
          "new_line_content": "            BSONObj obj;",
          "content_same": false
        },
        {
          "line": 1696,
          "old_api": "setInitialSyncCompleted",
          "new_api": null,
          "old_text": "pairSync->setInitialSyncCompleted()",
          "new_text": null,
          "old_line_content": "                pairSync->setInitialSyncCompleted(); // we are the half that has all the data",
          "new_line_content": "                replacePeer = true;",
          "content_same": false
        },
        {
          "line": 1188,
          "old_api": "begin",
          "new_api": null,
          "old_text": "addDbNextPass.begin()",
          "new_text": null,
          "old_line_content": "            set<string>::iterator i = addDbNextPass.begin();",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 1702,
          "old_api": "replMain",
          "new_api": null,
          "old_text": "replMain()",
          "new_text": null,
          "old_line_content": "                replMain();",
          "new_line_content": "            try {",
          "content_same": false
        },
        {
          "line": 1191,
          "old_api": "append",
          "new_api": null,
          "old_text": "b.append(\"ns\", *i + '.')",
          "new_text": null,
          "old_line_content": "                b.append(\"ns\", *i + '.');",
          "new_line_content": "                BSONObjBuilder b;",
          "content_same": false
        },
        {
          "line": 1705,
          "old_api": "sleepsecs",
          "new_api": null,
          "old_text": "sleepsecs(5)",
          "new_text": null,
          "old_line_content": "                sleepsecs(5);",
          "new_line_content": "                    break;",
          "content_same": false
        },
        {
          "line": 1709,
          "old_api": "problem",
          "new_api": null,
          "old_text": "problem()",
          "new_text": null,
          "old_line_content": "                problem() << \"Assertion in replSlaveThread(): sleeping 5 minutes before retry\" << endl;",
          "new_line_content": "                ReplInfo r(\"Assertion in replSlaveThread(): sleeping 5 minutes before retry\");",
          "content_same": false
        },
        {
          "line": 1198,
          "old_api": "more",
          "new_api": null,
          "old_text": "oplogReader.more()",
          "new_text": null,
          "old_line_content": "        if ( !oplogReader.more() ) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1200,
          "old_api": "log",
          "new_api": null,
          "old_text": "log(2)",
          "new_text": null,
          "old_line_content": "                log(2) << \"repl: tailing & no new activity\\n\";",
          "new_line_content": "            if ( tailing ) {",
          "content_same": false
        },
        {
          "line": 1205,
          "old_api": "log",
          "new_api": null,
          "old_text": "log()",
          "new_text": null,
          "old_line_content": "                log() << \"repl:   \" << ns << \" oplog is empty\\n\";",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 1717,
          "old_api": "info",
          "new_api": null,
          "old_text": "dbMutex.info().isLocked()",
          "new_text": null,
          "old_line_content": "            out() << dbMutex.info().isLocked() << endl;",
          "new_line_content": "        while ( 1 ) {",
          "content_same": false
        },
        {
          "line": 1209,
          "old_api": "nextLastSavedLocalTs",
          "new_api": null,
          "old_text": "nextLastSavedLocalTs()",
          "new_text": null,
          "old_line_content": "                OpTime nextLastSaved = nextLastSavedLocalTs();",
          "new_line_content": "                dblock lk;",
          "content_same": false
        },
        {
          "line": 1212,
          "old_api": "more",
          "new_api": null,
          "old_text": "oplogReader.more()",
          "new_text": null,
          "old_line_content": "                    if ( !oplogReader.more() ) {",
          "new_line_content": "                    dbtemprelease t;",
          "content_same": false
        },
        {
          "line": 1726,
          "old_api": "empty",
          "new_api": null,
          "old_text": "cmdLine._replSet.empty()",
          "new_text": null,
          "old_line_content": "        if( !cmdLine._replSet.empty() ) {",
          "new_line_content": "        /* if we are going to be a replica set, we aren't doing other forms of replication. */",
          "content_same": false
        },
        {
          "line": 1216,
          "old_api": "save",
          "new_api": null,
          "old_text": "save()",
          "new_text": null,
          "old_line_content": "                save();            ",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 1728,
          "old_api": "log",
          "new_api": null,
          "old_text": "log()",
          "new_text": null,
          "old_line_content": "                log() << \"***\" << endl;",
          "new_line_content": "            if( replSettings.slave || replSettings.master || replPair ) { ",
          "content_same": false
        },
        {
          "line": 1732,
          "old_api": "createOplog",
          "new_api": null,
          "old_text": "createOplog()",
          "new_text": null,
          "old_line_content": "            createOplog();",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1223,
          "old_api": "next",
          "new_api": null,
          "old_text": "oplogReader.next()",
          "new_text": null,
          "old_line_content": "            BSONObj op = oplogReader.next();",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 1737,
          "old_api": "oldRepl",
          "new_api": null,
          "old_text": "oldRepl()",
          "new_text": null,
          "old_line_content": "        oldRepl();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1229,
          "old_api": "getIntField",
          "new_api": null,
          "old_text": "op.getIntField(\"code\")",
          "new_text": null,
          "old_line_content": "                    if (op.getIntField(\"code\") == 13051) {",
          "new_line_content": "                    // 13051 is \"tailable cursor requested on non capped collection\"",
          "content_same": false
        },
        {
          "line": 1234,
          "old_api": "problem",
          "new_api": null,
          "old_text": "problem()",
          "new_text": null,
          "old_line_content": "                        problem() << \"repl: $err reading remote oplog: \" + err << '\\n';",
          "new_line_content": "                    else {",
          "content_same": false
        },
        {
          "line": 1749,
          "old_api": "getAuthenticationInfo",
          "new_api": null,
          "old_text": "cc().getAuthenticationInfo()->authorize(\"admin\")",
          "new_text": null,
          "old_line_content": "            cc().getAuthenticationInfo()->authorize(\"admin\");",
          "new_line_content": "            dblock lk;",
          "content_same": false
        },
        {
          "line": 1239,
          "old_api": "toString",
          "new_api": null,
          "old_text": "op.toString()",
          "new_text": null,
          "old_line_content": "                    problem() << \"repl: bad object read from remote oplog: \" << op.toString() << '\\n';",
          "new_line_content": "                else {",
          "content_same": false
        },
        {
          "line": 1755,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert( replSettings.slave == SimpleSlave )",
          "new_text": null,
          "old_line_content": "                assert( replSettings.slave == SimpleSlave );",
          "new_line_content": "            if ( replSettings.slave ) {",
          "content_same": false
        },
        {
          "line": 1246,
          "old_api": "date",
          "new_api": null,
          "old_text": "ts.date()",
          "new_text": null,
          "old_line_content": "                OpTime next( ts.date() );",
          "new_line_content": "            ",
          "content_same": false
        },
        {
          "line": 1248,
          "old_api": "log",
          "new_api": null,
          "old_text": "log()",
          "new_text": null,
          "old_line_content": "                    log() << \"remote slave log filled, forcing slave resync\" << endl;",
          "new_line_content": "                if ( !tailing && !initial && next != syncedTo ) {",
          "content_same": false
        },
        {
          "line": 1765,
          "old_api": "log",
          "new_api": null,
          "old_text": "log(1)",
          "new_text": null,
          "old_line_content": "                log(1) << \"master=true\" << endl;",
          "new_line_content": "            if ( replSettings.master )",
          "content_same": false
        },
        {
          "line": 1254,
          "old_api": "updateSetsWithLocalOps",
          "new_api": null,
          "old_text": "updateSetsWithLocalOps( localLogTail, true )",
          "new_text": null,
          "old_line_content": "                updateSetsWithLocalOps( localLogTail, true );",
          "new_line_content": "                dblock lk;",
          "content_same": false
        },
        {
          "line": 1767,
          "old_api": "createOplog",
          "new_api": null,
          "old_text": "createOplog()",
          "new_text": null,
          "old_line_content": "            createOplog();",
          "new_line_content": "            replSettings.master = true;",
          "content_same": false
        },
        {
          "line": 1257,
          "old_api": "date",
          "new_api": null,
          "old_text": "ts.date()",
          "new_text": null,
          "old_line_content": "            nextOpTime = OpTime( ts.date() );",
          "new_line_content": "        ",
          "content_same": false
        },
        {
          "line": 1772,
          "old_api": "sleepmillis",
          "new_api": null,
          "old_text": "sleepmillis( 50 )",
          "new_text": null,
          "old_line_content": "            sleepmillis( 50 );",
          "new_line_content": "        while( replSettings.fastsync ) // don't allow writes until we've set up from log",
          "content_same": false
        },
        {
          "line": 1261,
          "old_api": "log",
          "new_api": null,
          "old_text": "log(1)",
          "new_text": null,
          "old_line_content": "                    log(1) << \"repl:   initial run\\n\";",
          "new_line_content": "                if ( initial )",
          "content_same": false
        },
        {
          "line": 1263,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert( syncedTo < nextOpTime )",
          "new_text": null,
          "old_line_content": "                    assert( syncedTo < nextOpTime );",
          "new_line_content": "                else",
          "content_same": false
        },
        {
          "line": 1268,
          "old_api": "log",
          "new_api": null,
          "old_text": "log()",
          "new_text": null,
          "old_line_content": "                Nullstream& l = log();",
          "new_line_content": "            else if ( nextOpTime != syncedTo ) { // didn't get what we queried for - error",
          "content_same": false
        },
        {
          "line": 1781,
          "old_api": "min",
          "new_api": null,
          "old_text": "min(8, 8)",
          "new_text": null,
          "old_line_content": "        int nthr = min(8, 8);",
          "new_line_content": "    void testPretouch() {",
          "content_same": false
        },
        {
          "line": 1275,
          "old_api": "toStringLong",
          "new_api": null,
          "old_text": "syncedTo.toStringLong()",
          "new_text": null,
          "old_line_content": "                l << \" syncedTo \" << syncedTo.toStringLong() << '\\n';",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1787,
          "old_api": "BSON",
          "new_api": null,
          "old_text": "BSON( \"_id\" << 1 )",
          "new_text": null,
          "old_line_content": "        BSONObj x = BSON( \"ns\" << \"test.foo\" << \"o\" << BSON( \"_id\" << 1 ) << \"op\" << \"i\" );",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1789,
          "old_api": "push_back",
          "new_api": null,
          "old_text": "v.push_back(x)",
          "new_text": null,
          "old_line_content": "        v.push_back(x);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1280,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert( syncedTo < nextOpTime )",
          "new_text": null,
          "old_line_content": "                assert( syncedTo < nextOpTime );",
          "new_line_content": "                replInfo = replAllDead = \"data too stale halted replication\";",
          "content_same": false
        },
        {
          "line": 1795,
          "old_api": "size",
          "new_api": null,
          "old_text": "v.size()",
          "new_text": null,
          "old_line_content": "            if( a >= v.size() ) break;",
          "new_line_content": "        while( 1 ) {",
          "content_same": false
        },
        {
          "line": 1797,
          "old_api": "size",
          "new_api": null,
          "old_text": "v.size()",
          "new_text": null,
          "old_line_content": "            if( b >= v.size() ) b = v.size() - 1;",
          "new_line_content": "            unsigned b = a + m - 1; // v[a..b]",
          "content_same": false
        },
        {
          "line": 1802,
          "old_api": "join",
          "new_api": null,
          "old_text": "tp.join()",
          "new_text": null,
          "old_line_content": "        tp.join();",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1291,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(0)",
          "new_text": null,
          "old_line_content": "\t\t\ttime_t saveLast = time(0);",
          "new_line_content": "            int n = 0;",
          "content_same": false
        },
        {
          "line": 1307,
          "old_api": "more",
          "new_api": null,
          "old_text": "oplogReader.more()",
          "new_text": null,
          "old_line_content": "                if ( !oplogReader.more() ) {",
          "new_line_content": "                */",
          "content_same": false
        },
        {
          "line": 1309,
          "old_api": "nextLastSavedLocalTs",
          "new_api": null,
          "old_text": "nextLastSavedLocalTs()",
          "new_text": null,
          "old_line_content": "                    OpTime nextLastSaved = nextLastSavedLocalTs();",
          "new_line_content": "                    dblock lk;",
          "content_same": false
        },
        {
          "line": 1312,
          "old_api": "more",
          "new_api": null,
          "old_text": "oplogReader.more()",
          "new_text": null,
          "old_line_content": "                        if ( oplogReader.more() ) {",
          "new_line_content": "                        dbtemprelease t;",
          "content_same": false
        },
        {
          "line": 1317,
          "old_api": "setLastSavedLocalTs",
          "new_api": null,
          "old_text": "setLastSavedLocalTs( nextLastSaved )",
          "new_text": null,
          "old_line_content": "                            setLastSavedLocalTs( nextLastSaved );",
          "new_line_content": "                        } else {",
          "content_same": false
        },
        {
          "line": 1320,
          "old_api": "awaitCapable",
          "new_api": null,
          "old_text": "oplogReader.awaitCapable()",
          "new_text": null,
          "old_line_content": "                    if( oplogReader.awaitCapable() && tailing )",
          "new_line_content": "                    }",
          "content_same": false
        },
        {
          "line": 1323,
          "old_api": "save",
          "new_api": null,
          "old_text": "save()",
          "new_text": null,
          "old_line_content": "                    save(); // note how far we are synced up to now",
          "new_line_content": "                    syncedTo = nextOpTime;",
          "content_same": false
        },
        {
          "line": 1326,
          "old_api": "toStringLong",
          "new_api": null,
          "old_text": "syncedTo.toStringLong()",
          "new_text": null,
          "old_line_content": "                    log() << \"repl:  end sync_pullOpLog syncedTo: \" << syncedTo.toStringLong() << endl;",
          "new_line_content": "                    nApplied = n;",
          "content_same": false
        },
        {
          "line": 1330,
          "old_api": "time",
          "new_api": null,
          "old_text": "time(0)",
          "new_text": null,
          "old_line_content": "                OCCASIONALLY if( n > 0 && ( n > 100000 || time(0) - saveLast > 60 ) ) { ",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1335,
          "old_api": "save",
          "new_api": null,
          "old_text": "save()",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tsave();",
          "new_line_content": "                    // can't update local log ts since there are pending operations from our peer",
          "content_same": false
        },
        {
          "line": 1342,
          "old_api": "next",
          "new_api": null,
          "old_text": "oplogReader.next()",
          "new_text": null,
          "old_line_content": "                BSONObj op = oplogReader.next();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1349,
          "old_api": "SyncException",
          "new_api": null,
          "old_text": "SyncException()",
          "new_text": null,
          "old_line_content": "                    throw SyncException();",
          "new_line_content": "                    replInfo = replAllDead = \"sync error: no ts found querying remote oplog record\";",
          "content_same": false
        },
        {
          "line": 1352,
          "old_api": "date",
          "new_api": null,
          "old_text": "ts.date()",
          "new_text": null,
          "old_line_content": "                nextOpTime = OpTime( ts.date() );",
          "new_line_content": "                OpTime last = nextOpTime;",
          "content_same": false
        },
        {
          "line": 1354,
          "old_api": "log",
          "new_api": null,
          "old_text": "log()",
          "new_text": null,
          "old_line_content": "                    log() << \"sync error: last applied optime at slave >= nextOpTime from master\" << endl;",
          "new_line_content": "                if ( !( last < nextOpTime ) ) {",
          "content_same": false
        },
        {
          "line": 1359,
          "old_api": "uassert",
          "new_api": null,
          "old_text": "uassert( 10123 , \"replication error last applied optime at slave >= nextOpTime from master\", false)",
          "new_text": null,
          "old_line_content": "                    uassert( 10123 , \"replication error last applied optime at slave >= nextOpTime from master\", false);",
          "new_line_content": "                    replInfo = replAllDead = \"sync error last >= nextOpTime\";",
          "content_same": false
        },
        {
          "line": 1361,
          "old_api": "getSecs",
          "new_api": null,
          "old_text": "nextOpTime.getSecs()",
          "new_text": null,
          "old_line_content": "                if ( replSettings.slavedelay && ( unsigned( time( 0 ) ) < nextOpTime.getSecs() + replSettings.slavedelay ) ) {",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 1367,
          "old_api": "save",
          "new_api": null,
          "old_text": "save()",
          "new_text": null,
          "old_line_content": "                        save();",
          "new_line_content": "                        syncedTo = last;",
          "content_same": false
        },
        {
          "line": 1369,
          "old_api": "log",
          "new_api": null,
          "old_text": "log()",
          "new_text": null,
          "old_line_content": "                    log() << \"repl:   applied \" << n << \" operations\" << endl;",
          "new_line_content": "                    }",
          "content_same": false
        },
        {
          "line": 861,
          "old_api": "log",
          "new_api": null,
          "old_text": "log( 6 )",
          "new_text": null,
          "old_line_content": "        log( 6 ) << \"processing op: \" << op << endl;",
          "new_line_content": "        if( logLevel >= 6 ) // op.tostring is expensive so doing this check explicitly",
          "content_same": false
        },
        {
          "line": 1375,
          "old_api": "sync_pullOpLog_applyOperation",
          "new_api": null,
          "old_text": "sync_pullOpLog_applyOperation(op, &localLogTail)",
          "new_text": null,
          "old_line_content": "                sync_pullOpLog_applyOperation(op, &localLogTail);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 868,
          "old_api": "getStringField",
          "new_api": null,
          "old_text": "op.getStringField(\"ns\")",
          "new_text": null,
          "old_line_content": "        const char *ns = op.getStringField(\"ns\");",
          "new_line_content": "        char clientName[MaxDatabaseLen];",
          "content_same": false
        },
        {
          "line": 1383,
          "old_api": "fromjson",
          "new_api": null,
          "old_text": "fromjson(\"{\\\"user\\\":\\\"repl\\\"}\")",
          "new_text": null,
          "old_line_content": "\tBSONObj userReplQuery = fromjson(\"{\\\"user\\\":\\\"repl\\\"}\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 872,
          "old_api": "toString",
          "new_api": null,
          "old_text": "op.toString()",
          "new_text": null,
          "old_line_content": "            problem() << \"skipping bad op in oplog: \" << op.toString() << endl;",
          "new_line_content": "        if ( *ns == '.' ) {",
          "content_same": false
        },
        {
          "line": 1386,
          "old_api": "isAdmin",
          "new_api": null,
          "old_text": "cc().isAdmin()",
          "new_text": null,
          "old_line_content": "\t\tif( ! cc().isAdmin() ){",
          "new_line_content": "\tbool replAuthenticate(DBClientConnection *conn) {",
          "content_same": false
        },
        {
          "line": 876,
          "old_api": "toString",
          "new_api": null,
          "old_text": "op.toString()",
          "new_text": null,
          "old_line_content": "            problem() << \"halting replication, bad op in oplog:\\n  \" << op.toString() << endl;",
          "new_line_content": "        else if ( *ns == 0 ) {",
          "content_same": false
        },
        {
          "line": 878,
          "old_api": "SyncException",
          "new_api": null,
          "old_text": "SyncException()",
          "new_text": null,
          "old_line_content": "            throw SyncException();",
          "new_line_content": "            replAllDead = \"bad object in oplog\";",
          "content_same": false
        },
        {
          "line": 881,
          "old_api": "empty",
          "new_api": null,
          "old_text": "only.empty()",
          "new_text": null,
          "old_line_content": "        if ( !only.empty() && only != clientName )",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1395,
          "old_api": "Helpers::findOne(\"local.system.users\", userReplQuery, user)",
          "new_api": null,
          "old_text": "Helpers::findOne(\"local.system.users\", userReplQuery, user)",
          "new_text": null,
          "old_line_content": "\t\t\tif( !Helpers::findOne(\"local.system.users\", userReplQuery, user) ) { ",
          "new_line_content": "\t\t\tClient::Context ctxt(\"local.\");",
          "content_same": false
        },
        {
          "line": 1397,
          "old_api": "Helpers::getSingleton(\"local.system.users\", user)",
          "new_api": null,
          "old_text": "Helpers::getSingleton(\"local.system.users\", user)",
          "new_text": null,
          "old_line_content": "\t\t\t\tif( !Helpers::getSingleton(\"local.system.users\", user) ) {",
          "new_line_content": "\t\t\t\t// try the first user is local",
          "content_same": false
        },
        {
          "line": 1401,
          "old_api": "log",
          "new_api": null,
          "old_text": "log()",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tlog() << \"replauthenticate: no user in local.system.users to use for authentication\\n\";",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 890,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert( countdown >= 0 )",
          "new_text": null,
          "old_line_content": "                    assert( countdown >= 0 );",
          "new_line_content": "                    countdown--; // was pretouched on a prev pass",
          "content_same": false
        },
        {
          "line": 893,
          "old_api": "get",
          "new_api": null,
          "old_text": "tp.get()",
          "new_text": null,
          "old_line_content": "                    if( tp.get() == 0 ) {",
          "new_line_content": "                    const int m = 4;",
          "content_same": false
        },
        {
          "line": 1408,
          "old_api": "getStringField",
          "new_api": null,
          "old_text": "user.getStringField(\"user\")",
          "new_text": null,
          "old_line_content": "\t\tstring u = user.getStringField(\"user\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 899,
          "old_api": "peek",
          "new_api": null,
          "old_text": "oplogReader.peek(v, cmdLine.pretouch)",
          "new_text": null,
          "old_line_content": "                    oplogReader.peek(v, cmdLine.pretouch);",
          "new_line_content": "                    vector<BSONObj> v;",
          "content_same": false
        },
        {
          "line": 1413,
          "old_api": "c_str",
          "new_api": null,
          "old_text": "p.c_str()",
          "new_text": null,
          "old_line_content": "\t\tif( !conn->auth(\"local\", u.c_str(), p.c_str(), err, false) ) {",
          "new_line_content": "\t\tstring err;",
          "content_same": false
        },
        {
          "line": 902,
          "old_api": "size",
          "new_api": null,
          "old_text": "v.size()",
          "new_text": null,
          "old_line_content": "                        if( a >= v.size() ) break;",
          "new_line_content": "                    while( 1 ) {",
          "content_same": false
        },
        {
          "line": 904,
          "old_api": "size",
          "new_api": null,
          "old_text": "v.size()",
          "new_text": null,
          "old_line_content": "                        if( b >= v.size() ) b = v.size() - 1;",
          "new_line_content": "                        unsigned b = a + m - 1; // v[a..b]",
          "content_same": false
        },
        {
          "line": 910,
          "old_api": "pretouchOperation",
          "new_api": null,
          "old_text": "pretouchOperation(op)",
          "new_text": null,
          "old_line_content": "                    pretouchOperation(op);",
          "new_line_content": "                    // we do one too...",
          "content_same": false
        },
        {
          "line": 1425,
          "old_api": "Helpers::getSingleton( \"local.me\" , me )",
          "new_api": null,
          "old_text": "Helpers::getSingleton( \"local.me\" , me )",
          "new_text": null,
          "old_line_content": "            if ( ! Helpers::getSingleton( \"local.me\" , me ) ){",
          "new_line_content": "            dblock l;",
          "content_same": false
        },
        {
          "line": 1427,
          "old_api": "appendOID",
          "new_api": null,
          "old_text": "b.appendOID( \"_id\" , 0 , true )",
          "new_text": null,
          "old_line_content": "                b.appendOID( \"_id\" , 0 , true );",
          "new_line_content": "                BSONObjBuilder b;",
          "content_same": false
        },
        {
          "line": 916,
          "old_api": "pretouchOperation",
          "new_api": null,
          "old_text": "pretouchOperation(op)",
          "new_text": null,
          "old_line_content": "                pretouchOperation(op);",
          "new_line_content": "            else {",
          "content_same": false
        },
        {
          "line": 1434,
          "old_api": "appendAs",
          "new_api": null,
          "old_text": "cmd.appendAs( me[\"_id\"] , \"handshake\" )",
          "new_text": null,
          "old_line_content": "        cmd.appendAs( me[\"_id\"] , \"handshake\" );",
          "new_line_content": "        BSONObjBuilder cmd;",
          "content_same": false
        },
        {
          "line": 923,
          "old_api": "updateSetsWithLocalOps",
          "new_api": null,
          "old_text": "updateSetsWithLocalOps( *localLogTail, true )",
          "new_text": null,
          "old_line_content": "            updateSetsWithLocalOps( *localLogTail, true ); // allow unlocking",
          "new_line_content": "        if ( localLogTail && replPair && replPair->state == ReplPair::State_Master ) {",
          "content_same": false
        },
        {
          "line": 1437,
          "old_api": "obj",
          "new_api": null,
          "old_text": "cmd.obj()",
          "new_text": null,
          "old_line_content": "        bool ok = conn->runCommand( \"admin\" , cmd.obj() , res );",
          "new_line_content": "        BSONObj res;",
          "content_same": false
        },
        {
          "line": 1439,
          "old_api": "log",
          "new_api": null,
          "old_text": "log(ok)",
          "new_text": null,
          "old_line_content": "        log(ok) << \"replHandshake res not: \" << ok << \" res: \" << res << endl;",
          "new_line_content": "        // ignoring for now on purpose for older versions",
          "content_same": false
        },
        {
          "line": 929,
          "old_api": "log",
          "new_api": null,
          "old_text": "log()",
          "new_text": null,
          "old_line_content": "            log() << \"replAllDead, throwing SyncException: \" << replAllDead << endl;",
          "new_line_content": "            // hmmm why is this check here and not at top of this function? does it get set between top and here?",
          "content_same": false
        },
        {
          "line": 1444,
          "old_api": "conn",
          "new_api": null,
          "old_text": "conn()",
          "new_text": null,
          "old_line_content": "        if( conn() == 0 ) {",
          "new_line_content": "    bool OplogReader::connect(string hostName) {",
          "content_same": false
        },
        {
          "line": 934,
          "old_api": "getClient",
          "new_api": null,
          "old_text": "ctx.getClient()->curop()->reset()",
          "new_text": null,
          "old_line_content": "        ctx.getClient()->curop()->reset();",
          "new_line_content": "        Client::Context ctx( ns );",
          "content_same": false
        },
        {
          "line": 936,
          "old_api": "db",
          "new_api": null,
          "old_text": "ctx.db()->isEmpty()",
          "new_text": null,
          "old_line_content": "        bool empty = ctx.db()->isEmpty();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1448,
          "old_api": "c_str",
          "new_api": null,
          "old_text": "hostName.c_str()",
          "new_text": null,
          "old_line_content": "            if ( !_conn->connect(hostName.c_str(), errmsg) || ",
          "new_line_content": "            ReplInfo r(\"trying to connect to sync source\");",
          "content_same": false
        },
        {
          "line": 940,
          "old_api": "justCreated",
          "new_api": null,
          "old_text": "ctx.justCreated()",
          "new_text": null,
          "old_line_content": "            log(6) << \"ns: \" << ns << \", justCreated: \" << ctx.justCreated() << \", empty: \" << empty << \", incompleteClone: \" << incompleteClone << endl;",
          "new_line_content": "        if( logLevel >= 6 )",
          "content_same": false
        },
        {
          "line": 944,
          "old_api": "getStringField",
          "new_api": null,
          "old_text": "op.getStringField( \"op\" )",
          "new_text": null,
          "old_line_content": "        if ( strcmp( clientName, \"admin\" ) == 0 && *op.getStringField( \"op\" ) == 'c' ) {",
          "new_line_content": "        // this is a bit hacky -- the semantics of replication/commands aren't well specified",
          "content_same": false
        },
        {
          "line": 949,
          "old_api": "justCreated",
          "new_api": null,
          "old_text": "ctx.justCreated()",
          "new_text": null,
          "old_line_content": "        if ( ctx.justCreated() || empty || incompleteClone ) {",
          "new_line_content": "        ",
          "content_same": false
        },
        {
          "line": 951,
          "old_api": "insert",
          "new_api": null,
          "old_text": "incompleteCloneDbs.insert( clientName )",
          "new_text": null,
          "old_line_content": "            incompleteCloneDbs.insert( clientName );",
          "new_line_content": "            // we must add to incomplete list now that setClient has been called",
          "content_same": false
        },
        {
          "line": 1467,
          "old_api": "log",
          "new_api": null,
          "old_text": "log()",
          "new_text": null,
          "old_line_content": "            Nullstream& l = log();",
          "new_line_content": "        if ( !cmdLine.quiet ) {",
          "content_same": false
        },
        {
          "line": 1469,
          "old_api": "sourceName",
          "new_api": null,
          "old_text": "sourceName()",
          "new_text": null,
          "old_line_content": "            if( sourceName() != \"main\" ) {",
          "new_line_content": "            l << \"repl: from \";",
          "content_same": false
        },
        {
          "line": 958,
          "old_api": "insert",
          "new_api": null,
          "old_text": "addDbNextPass.insert( clientName )",
          "new_text": null,
          "old_line_content": "                addDbNextPass.insert( clientName );",
          "new_line_content": "                 */",
          "content_same": false
        },
        {
          "line": 961,
          "old_api": "log",
          "new_api": null,
          "old_text": "log()",
          "new_text": null,
          "old_line_content": "                    log() << \"An earlier initial clone of '\" << clientName << \"' did not complete, now resyncing.\" << endl;",
          "new_line_content": "                if ( incompleteClone ) {",
          "content_same": false
        },
        {
          "line": 963,
          "old_api": "save",
          "new_api": null,
          "old_text": "save()",
          "new_text": null,
          "old_line_content": "                save();",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 1477,
          "old_api": "string",
          "new_api": null,
          "old_text": "string(\"127.0.0.1\")",
          "new_text": null,
          "old_line_content": "        if ( (string(\"localhost\") == hostName || string(\"127.0.0.1\") == hostName) && cmdLine.port == CmdLine::DefaultDBPort ) {",
          "new_line_content": "        // FIXME Handle cases where this db isn't on default port, or default port is spec'd in hostName.",
          "content_same": false
        },
        {
          "line": 966,
          "old_api": "db",
          "new_api": null,
          "old_text": "ctx.db()",
          "new_text": null,
          "old_line_content": "                resync(ctx.db()->name);",
          "new_line_content": "                nClonedThisPass++;",
          "content_same": false
        },
        {
          "line": 970,
          "old_api": "save",
          "new_api": null,
          "old_text": "save()",
          "new_text": null,
          "old_line_content": "            save();",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1483,
          "old_api": "connect",
          "new_api": null,
          "old_text": "oplogReader.connect(hostName)",
          "new_text": null,
          "old_line_content": "        if ( !oplogReader.connect(hostName) ) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 974,
          "old_api": "idForOp",
          "new_api": null,
          "old_text": "idForOp( op, mod )",
          "new_text": null,
          "old_line_content": "                BSONObj id = idForOp( op, mod );",
          "new_line_content": "            if ( replPair && replPair->state == ReplPair::State_Master ) {",
          "content_same": false
        },
        {
          "line": 1486,
          "old_api": "c_str",
          "new_api": null,
          "old_text": "replPair->remoteHost.c_str()",
          "new_text": null,
          "old_line_content": "                assert( startsWith(hostName.c_str(), replPair->remoteHost.c_str()) );",
          "new_line_content": "            if ( replPair && paired ) {",
          "content_same": false
        },
        {
          "line": 980,
          "old_api": "Helpers::findOne( ns, id, existing )",
          "new_api": null,
          "old_text": "Helpers::findOne( ns, id, existing )",
          "new_text": null,
          "old_line_content": "                    if ( Helpers::findOne( ns, id, existing ) )",
          "new_line_content": "                    BSONObj existing;",
          "content_same": false
        },
        {
          "line": 1493,
          "old_api": "conn",
          "new_api": null,
          "old_text": "oplogReader.conn()",
          "new_text": null,
          "old_line_content": "            int remote = replPair->negotiate(oplogReader.conn(), \"direct\");",
          "new_line_content": "        if ( paired ) {",
          "content_same": false
        },
        {
          "line": 983,
          "old_api": "log",
          "new_api": null,
          "old_text": "log( 6 )",
          "new_text": null,
          "old_line_content": "                    log( 6 ) << \"skipping operation matching changed id object \" << op << endl;",
          "new_line_content": "                } else {",
          "content_same": false
        },
        {
          "line": 1495,
          "old_api": "getInitialSyncCompleted",
          "new_api": null,
          "old_text": "getInitialSyncCompleted()",
          "new_text": null,
          "old_line_content": "            if ( getInitialSyncCompleted() && nMasters != 1 ) {",
          "new_line_content": "            int nMasters = ( remote == ReplPair::State_Master ) + ( replPair->state == ReplPair::State_Master );",
          "content_same": false
        },
        {
          "line": 986,
          "old_api": "applyOperation",
          "new_api": null,
          "old_text": "applyOperation( op )",
          "new_text": null,
          "old_line_content": "                applyOperation( op );",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 988,
          "old_api": "erase",
          "new_api": null,
          "old_text": "addDbNextPass.erase( clientName )",
          "new_text": null,
          "old_line_content": "            addDbNextPass.erase( clientName );",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 994,
          "old_api": "getStringField",
          "new_api": null,
          "old_text": "op.getStringField( \"op\" )",
          "new_text": null,
          "old_line_content": "        const char *opType = op.getStringField( \"op\" );",
          "new_line_content": "        mod = false;",
          "content_same": false
        },
        {
          "line": 1000,
          "old_api": "getObjectID",
          "new_api": null,
          "old_text": "o.getObjectID( id )",
          "new_text": null,
          "old_line_content": "                if ( !o.getObjectID( id ) )",
          "new_line_content": "                BSONElement id;",
          "content_same": false
        },
        {
          "line": 1514,
          "old_api": "sync_pullOpLog",
          "new_api": null,
          "old_text": "sync_pullOpLog(nApplied)",
          "new_text": null,
          "old_line_content": "        return sync_pullOpLog(nApplied);",
          "new_line_content": "        */",
          "content_same": false
        },
        {
          "line": 1006,
          "old_api": "getObjectField",
          "new_api": null,
          "old_text": "op.getObjectField( \"o2\" )",
          "new_text": null,
          "old_line_content": "                BSONObj o2 = op.getObjectField( \"o2\" );",
          "new_line_content": "            case 'u': {",
          "content_same": false
        },
        {
          "line": 1015,
          "old_api": "BSONObj",
          "new_api": null,
          "old_text": "BSONObj()",
          "new_text": null,
          "old_line_content": "                    return BSONObj(); // skip \"db\" op type",
          "new_line_content": "                if ( opType[ 1 ] != '\\0' )",
          "content_same": false
        },
        {
          "line": 1021,
          "old_api": "BSONObj",
          "new_api": null,
          "old_text": "BSONObj()",
          "new_text": null,
          "old_line_content": "        return BSONObj();",
          "new_line_content": "        }        ",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 118,
      "total_additions": 183,
      "total_deletions": 183,
      "total_api_changes": 484
    },
    "non_api_changes": {
      "has_non_api_changes": false,
      "evidence": {
        "total_diff_lines": 2,
        "api_related_lines": 484,
        "non_api_lines": 0,
        "non_api_line_numbers": []
      }
    },
    "api_calls_before": 703,
    "api_calls_after": 703,
    "diff_info": {
      "added_lines": 2,
      "removed_lines": 1,
      "total_diff_lines": 15
    }
  }
}
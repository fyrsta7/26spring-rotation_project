{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/mongo/modified_file/610dbc3b0bea69b9622429e4d5e550b95d2f8ffe",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/mongo/modified_file/610dbc3b0bea69b9622429e4d5e550b95d2f8ffe/before.cpp",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/mongo/modified_file/610dbc3b0bea69b9622429e4d5e550b95d2f8ffe/after.cpp",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/mongo/modified_file/610dbc3b0bea69b9622429e4d5e550b95d2f8ffe/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 582,
          "old_api": "onds",
          "new_api": "toDurationSinceEpoch",
          "old_text": "onds(offset->offset);\n ",
          "new_text": "e.toDurationSinceEpoch()),\n",
          "old_line_content": "        auto timezoneOffsetFromUTC = Seconds(offset->offset);",
          "new_line_content": "            timelib_get_time_zone_offset_info(durationCount<Seconds>(date.toDurationSinceEpoch()),",
          "content_same": false
        },
        {
          "line": 583,
          "old_api": "elib_time_offset_dtor",
          "new_api": "get",
          "old_text": "elib_time_offset_dtor(offset);\n ",
          "new_text": "Info.get(),\n ",
          "old_line_content": "        timelib_time_offset_dtor(offset);",
          "new_line_content": "                                              _tzInfo.get(),",
          "content_same": false
        },
        {
          "line": 607,
          "old_api": "stexpr au",
          "new_api": "str",
          "old_text": "stexpr au",
          "new_text": "matted.str();\n}",
          "old_line_content": "constexpr auto kMonthsInOneYear = 12LL;",
          "new_line_content": "        return formatted.str();",
          "content_same": false
        },
        {
          "line": 613,
          "old_api": "stexpr in",
          "new_api": "stexpr au",
          "old_text": "stexpr in",
          "new_text": "stexpr au",
          "old_line_content": "constexpr int kDaysPerWeek = 7;",
          "new_line_content": "constexpr auto kHoursPerDay = 24LL;",
          "content_same": false
        },
        {
          "line": 616,
          "old_api": "stexpr lo",
          "new_api": "stexpr au",
          "old_text": "stexpr lo",
          "new_text": "stexpr au",
          "old_line_content": "constexpr long kMillisecondsPerDay{kHoursPerDay * kMinutesPerHour * kSecondsPerMinute *",
          "new_line_content": "constexpr auto kMillisecondsPerSecond = 1000LL;",
          "content_same": false
        },
        {
          "line": 618,
          "old_api": "stexpr lo",
          "new_api": "stexpr au",
          "old_text": "stexpr lo",
          "new_text": "stexpr au",
          "old_line_content": "constexpr long kLeapYearReferencePoint = -1000000000L;",
          "new_line_content": "constexpr auto kQuartersPerYear = 4LL;",
          "content_same": false
        },
        {
          "line": 702,
          "old_api": "elib_day_of_year",
          "new_api": "eDiffYear",
          "old_text": "elib_day_of_year(startInstant.year, startInstant.month, startInstant.dayOfMonth) +\n",
          "new_text": "eDiffYear(startInstant, endInstant) * ",
          "old_line_content": "        timelib_day_of_year(startInstant.year, startInstant.month, startInstant.dayOfMonth) +",
          "new_line_content": "        dateDiffYear(startInstant, endInstant) * kMonthsInOneYear;",
          "content_same": false
        },
        {
          "line": 732,
          "old_api": "OffsetCorrectionForHours",
          "new_api": "eDiffDay",
          "old_text": "OffsetCorrectionForHours(startInstant, endInstant);\n}",
          "new_text": "eDiffDay(*startInstant, *endInstant) * ",
          "old_line_content": "        utcOffsetCorrectionForHours(startInstant, endInstant);",
          "new_line_content": "    return endInstant->h - startInstant->h + dateDiffDay(*startInstant, *endInstant) * kHoursPerDay;",
          "content_same": false
        },
        {
          "line": 741,
          "old_api": "OffsetCorrectionForMinutes",
          "new_api": "eDiffHourWithoutUTCOffsetCorrection",
          "old_text": "OffsetCorrectionForMinutes(startInstant, endInstant);\n}",
          "new_text": "eDiffHourWithoutUTCOffsetCorrection(startInstant, endInstant) * ",
          "old_line_content": "        utcOffsetCorrectionForMinutes(startInstant, endInstant);",
          "new_line_content": "        dateDiffHourWithoutUTCOffsetCorrection(startInstant, endInstant) * kMinutesPerHour;",
          "content_same": false
        },
        {
          "line": 745,
          "old_api": "eDiffMinuteWithoutUTCOffsetCorrection",
          "new_api": "OffsetCorrectionForMinutes",
          "old_text": "eDiffMinuteWithoutUTCOffsetCorrection(startInstant, endInstant) * ",
          "new_text": "OffsetCorrectionForMinutes(startInstant, endInstant);\n}",
          "old_line_content": "        dateDiffMinuteWithoutUTCOffsetCorrection(startInstant, endInstant) * kSecondsPerMinute +",
          "new_line_content": "        utcOffsetCorrectionForMinutes(startInstant, endInstant);",
          "content_same": false
        },
        {
          "line": 750,
          "old_api": "toMillisSinceEpoch",
          "new_api": "OffsetCorrectionForSeconds",
          "old_text": "sert(5166308,\n            \"dateDiff overflowed\",\n            !overflow::sub(endDate.toMillisSinceEpoch(), startDate.toMillisSinceEpoch(), &result));\n ",
          "new_text": "OffsetCorrectionForSeconds(startInstant, endInstant);\n}",
          "old_line_content": "    uassert(5166308,",
          "new_line_content": "        utcOffsetCorrectionForSeconds(startInstant, endInstant);",
          "content_same": false
        },
        {
          "line": 799,
          "old_api": "getTimelibTime",
          "new_api": "eDiffMillisecond",
          "old_text": "ezone.getTimelibTime(startDate);\n ",
          "new_text": "eDiffMillisecond(startDate, endDate);\n ",
          "old_line_content": "    auto startDateInTimeZone = timezone.getTimelibTime(startDate);",
          "new_line_content": "        return dateDiffMillisecond(startDate, endDate);",
          "content_same": false
        },
        {
          "line": 803,
          "old_api": "eDiffYear",
          "new_api": "getTimelibTime",
          "old_text": "eDiffYear(*startDateInTimeZone, *endDateInTimeZone);\n ",
          "new_text": "ezone.getTimelibTime(startDate);\n ",
          "old_line_content": "            return dateDiffYear(*startDateInTimeZone, *endDateInTimeZone);",
          "new_line_content": "    auto startDateInTimeZone = timezone.getTimelibTime(startDate);",
          "content_same": false
        },
        {
          "line": 807,
          "old_api": "eDiffMonth",
          "new_api": "eDiffYear",
          "old_text": "eDiffMonth(*startDateInTimeZone, *endDateInTimeZone);\n ",
          "new_text": "eDiffYear(*startDateInTimeZone, *endDateInTimeZone);\n ",
          "old_line_content": "            return dateDiffMonth(*startDateInTimeZone, *endDateInTimeZone);",
          "new_line_content": "            return dateDiffYear(*startDateInTimeZone, *endDateInTimeZone);",
          "content_same": false
        },
        {
          "line": 809,
          "old_api": "eDiffWeek",
          "new_api": "eDiffQuarter",
          "old_text": "eDiffWeek(*startDateInTimeZone, *endDateInTimeZone, startOfWeek);\n ",
          "new_text": "eDiffQuarter(*startDateInTimeZone, *endDateInTimeZone);\n ",
          "old_line_content": "            return dateDiffWeek(*startDateInTimeZone, *endDateInTimeZone, startOfWeek);",
          "new_line_content": "            return dateDiffQuarter(*startDateInTimeZone, *endDateInTimeZone);",
          "content_same": false
        },
        {
          "line": 811,
          "old_api": "eDiffDay",
          "new_api": "eDiffMonth",
          "old_text": "eDiffDay(*startDateInTimeZone, *endDateInTimeZone);\n ",
          "new_text": "eDiffMonth(*startDateInTimeZone, *endDateInTimeZone);\n ",
          "old_line_content": "            return dateDiffDay(*startDateInTimeZone, *endDateInTimeZone);",
          "new_line_content": "            return dateDiffMonth(*startDateInTimeZone, *endDateInTimeZone);",
          "content_same": false
        },
        {
          "line": 813,
          "old_api": "get",
          "new_api": "eDiffWeek",
          "old_text": "DateInTimeZone.get());\n",
          "new_text": "eDiffWeek(*startDateInTimeZone, *endDateInTimeZone, startOfWeek);\n ",
          "old_line_content": "            return dateDiffHour(startDateInTimeZone.get(), endDateInTimeZone.get());",
          "new_line_content": "            return dateDiffWeek(*startDateInTimeZone, *endDateInTimeZone, startOfWeek);",
          "content_same": false
        },
        {
          "line": 815,
          "old_api": "get",
          "new_api": "eDiffDay",
          "old_text": "DateInTimeZone.get());\n",
          "new_text": "eDiffDay(*startDateInTimeZone, *endDateInTimeZone);\n ",
          "old_line_content": "            return dateDiffMinute(startDateInTimeZone.get(), endDateInTimeZone.get());",
          "new_line_content": "            return dateDiffDay(*startDateInTimeZone, *endDateInTimeZone);",
          "content_same": false
        },
        {
          "line": 875,
          "old_api": "elib_rel_time_dtor",
          "new_api": "end",
          "old_text": "elib_rel_time_dtor(relTime);\n}",
          "new_text": "OfWeekNameToDayOfWeekMap.end();\n}",
          "old_line_content": "    timelib_rel_time_dtor(relTime);",
          "new_line_content": "        dayOfWeekNameToDayOfWeekMap.end();",
          "content_same": false
        },
        {
          "line": 879,
          "old_api": "elib_rel_time_ctor",
          "new_api": "elib_rel_time_dtor",
          "old_text": "elib_rel_time_ctor());\n",
          "new_text": "elib_rel_time_dtor(relTime);\n}",
          "old_line_content": "    return std::unique_ptr<_timelib_rel_time, TimelibRelTimeDeleter>(timelib_rel_time_ctor());",
          "new_line_content": "    timelib_rel_time_dtor(relTime);",
          "content_same": false
        },
        {
          "line": 978,
          "old_api": "sBetweenYears",
          "new_api": "Months",
          "old_text": "sBetweenYears(tm->y, resYear);\n ",
          "new_text": "Months(tm->y, tm->m, amount);\n ",
          "old_line_content": "        timelib_day_of_year(tm->y, tm->m, tm->d) + daysBetweenYears(tm->y, resYear);",
          "new_line_content": "    auto [resYear, resMonth] = addMonths(tm->y, tm->m, amount);",
          "content_same": false
        },
        {
          "line": 979,
          "old_api": "st::make_optional(intervalInDays);\n}",
          "new_api": "elib_days_in_month",
          "old_text": "st::make_optional(intervalInDays);\n}",
          "new_text": "elib_days_in_month(resYear, resMonth);\n ",
          "old_line_content": "    return boost::make_optional(intervalInDays);",
          "new_line_content": "    auto maxResDay = timelib_days_in_month(resYear, resMonth);",
          "content_same": false
        },
        {
          "line": 1012,
          "old_api": "toMillisSinceEpoch",
          "new_api": "::numeric_limits<long long>::max()));",
          "old_text": "rflow::sub(\n                date.toMillisSinceEpoch(), referencePoint.toMillisSinceEpoch(), &shiftedDate));\n",
          "new_text": "::numeric_limits<long long>::max()));",
          "old_line_content": "            !overflow::sub(",
          "new_line_content": "                static_cast<unsigned long long>(std::numeric_limits<long long>::max()));",
          "content_same": false
        },
        {
          "line": 1077,
          "old_api": "eDiffWeek",
          "new_api": "eDiffDay",
          "old_text": "eDiffWeek(referencePoint.second, *dateInTimeZone, startOfWeek);\n ",
          "new_text": "eDiffDay(referencePoint.second, *dateInTimeZone);\n ",
          "old_line_content": "                        dateDiffWeek(referencePoint.second, *dateInTimeZone, startOfWeek);",
          "new_line_content": "                        dateDiffDay(referencePoint.second, *dateInTimeZone);",
          "content_same": false
        },
        {
          "line": 1081,
          "old_api": "eDiffMonth",
          "new_api": "eDiffWeek",
          "old_text": "eDiffMonth(referencePoint.second, *dateInTimeZone);\n ",
          "new_text": "eDiffWeek(referencePoint.second, *dateInTimeZone, startOfWeek);\n ",
          "old_line_content": "                        dateDiffMonth(referencePoint.second, *dateInTimeZone);",
          "new_line_content": "                        dateDiffWeek(referencePoint.second, *dateInTimeZone, startOfWeek);",
          "content_same": false
        },
        {
          "line": 1085,
          "old_api": "eDiffQuarter",
          "new_api": "eDiffMonth",
          "old_text": "eDiffQuarter(referencePoint.second, *dateInTimeZone);\n ",
          "new_text": "eDiffMonth(referencePoint.second, *dateInTimeZone);\n ",
          "old_line_content": "                        dateDiffQuarter(referencePoint.second, *dateInTimeZone);",
          "new_line_content": "                        dateDiffMonth(referencePoint.second, *dateInTimeZone);",
          "content_same": false
        },
        {
          "line": 1089,
          "old_api": "eDiffYear",
          "new_api": "eDiffQuarter",
          "old_text": "eDiffYear(referencePoint.second, *dateInTimeZone);\n ",
          "new_text": "eDiffQuarter(referencePoint.second, *dateInTimeZone);\n ",
          "old_line_content": "                        dateDiffYear(referencePoint.second, *dateInTimeZone);",
          "new_line_content": "                        dateDiffQuarter(referencePoint.second, *dateInTimeZone);",
          "content_same": false
        },
        {
          "line": 1105,
          "old_api": "eAdd",
          "new_api": "tanceToBinLowerBound",
          "old_text": "eAdd(referencePoint.first, unit, binLowerBoundFromRefPoint, timezone);\n ",
          "new_text": "tanceToBinLowerBound(distanceFromReferencePoint, binSize),\n ",
          "old_line_content": "            return dateAdd(referencePoint.first, unit, binLowerBoundFromRefPoint, timezone);",
          "new_line_content": "                                   distanceToBinLowerBound(distanceFromReferencePoint, binSize),",
          "content_same": false
        },
        {
          "line": 1124,
          "old_api": "e_t::fromMillisSinceEpoch(kReferencePointInUTCMillis)));",
          "new_api": "stexpr lo",
          "old_text": "e_t::fromMillisSinceEpoch(kReferencePointInUTCMillis)));",
          "new_text": "stexpr lo",
          "old_line_content": "            Date_t::fromMillisSinceEpoch(kReferencePointInUTCMillis)));",
          "new_line_content": "    constexpr long long kReferencePointInUTCMillis = 946684800000LL;  // 2000-01-01T00:00:00.000Z",
          "content_same": false
        },
        {
          "line": 1159,
          "old_api": "stexpr au",
          "new_api": "stexpr lo",
          "old_text": "stexpr au",
          "new_text": "stexpr lo",
          "old_line_content": "    constexpr auto maxMonths = maxYears * kMonthsInOneYear;",
          "new_line_content": "    constexpr long long maxDays{",
          "content_same": false
        },
        {
          "line": 1160,
          "old_api": "stexpr au",
          "new_api": "::numeric_limits<unsigned long long>::max() /",
          "old_text": "stexpr au",
          "new_text": "::numeric_limits<unsigned long long>::max() / ",
          "old_line_content": "    constexpr auto maxWeeks = maxDays / kDaysPerWeek;",
          "new_line_content": "        std::numeric_limits<unsigned long long>::max() / kMillisecondsPerDay + 1};",
          "content_same": false
        },
        {
          "line": 1164,
          "old_api": "(TimeUnit unit) {\n        switch (unit) {\n            case TimeUnit::year:\n                return maxYears;\n            case TimeUnit::quarter:\n                return maxQuarters;\n            case TimeUnit::month:\n                return maxMonths;\n            case TimeUnit::week:\n                return maxWeeks;\n            case TimeUnit::day:\n                return maxDays;\n            case TimeUnit::hour:\n                return maxHours;\n            case TimeUnit::minute:\n                return maxMinutes;\n            case TimeUnit::second:\n                return maxSeconds;\n            default:\n                MONGO_UNREACHABLE_TASSERT(5976501);\n        }\n    }(unit);",
          "new_api": "stexpr au",
          "old_text": "(TimeUnit unit) {\n        switch (unit) {\n            case TimeUnit::year:\n                return maxYears;\n            case TimeUnit::quarter:\n                return maxQuarters;\n            case TimeUnit::month:\n                return maxMonths;\n            case TimeUnit::week:\n                return maxWeeks;\n            case TimeUnit::day:\n                return maxDays;\n            case TimeUnit::hour:\n                return maxHours;\n            case TimeUnit::minute:\n                return maxMinutes;\n            case TimeUnit::second:\n                return maxSeconds;\n            default:\n                MONGO_UNREACHABLE_TASSERT(5976501);\n        }\n    }(unit);\n ",
          "new_text": "stexpr au",
          "old_line_content": "    const auto maxAbsoluteAmountValue = [&](TimeUnit unit) {",
          "new_line_content": "    constexpr auto maxWeeks = maxDays / kDaysPerWeek;",
          "content_same": false
        },
        {
          "line": 1203,
          "old_api": "getTimelibTime",
          "new_api": "::stream() <<",
          "old_text": "ezone.getTimelibTime(date);\n ",
          "new_text": "::stream() <<",
          "old_line_content": "    auto localTime = timezone.getTimelibTime(date);",
          "new_line_content": "            str::stream() << \"invalid dateAdd 'amount' parameter value: \" << amount << \" \"",
          "content_same": false
        },
        {
          "line": 1204,
          "old_api": "toMillisSinceEpoch",
          "new_api": "ializeTimeUnit",
          "old_text": "e.toMillisSinceEpoch() % ",
          "new_text": "ializeTimeUnit(unit),\n ",
          "old_line_content": "    auto microSec = durationCount<Microseconds>(Milliseconds(date.toMillisSinceEpoch() % 1000));",
          "new_line_content": "                          << serializeTimeUnit(unit),",
          "content_same": false
        },
        {
          "line": 1208,
          "old_api": "get",
          "new_api": "toMillisSinceEpoch",
          "old_text": "alTime.get(), u",
          "new_text": "e.toMillisSinceEpoch() % ",
          "old_line_content": "    auto intervalInDays = daysToAdd(localTime.get(), unit, amount);",
          "new_line_content": "    auto microSec = durationCount<Microseconds>(Milliseconds(date.toMillisSinceEpoch() % 1000));",
          "content_same": false
        },
        {
          "line": 1240,
          "old_api": "rflow::mul(timeAfterAddition->sse, 1000L, &res)) {",
          "new_api": "get",
          "old_text": "rflow::mul(timeAfterAddition->sse, 1000L, &res)) {",
          "new_text": "erval.get());\n",
          "old_line_content": "    if (overflow::mul(timeAfterAddition->sse, 1000L, &res)) {",
          "new_line_content": "        timeAfterAddition = timelib_add(utcTime.get(), interval.get());",
          "content_same": false
        },
        {
          "line": 1245,
          "old_api": "e_t::fromMillisSinceEpoch(\n        durationCount<Milliseconds>(Seconds(timeAfterAddition->sse)) +\n        durationCount<Milliseconds>(Microseconds(timeAfterAddition->us)));",
          "new_api": "elib_time_dtor",
          "old_text": "e_t::fromMillisSinceEpoch(\n        durationCount<Milliseconds>(Seconds(timeAfterAddition->sse)) +\n        durationCount<Milliseconds>(Microseconds(timeAfterAddition->us)));\n ",
          "new_text": "elib_time_dtor(timeAfterAddition);\n ",
          "old_line_content": "    auto returnDate = Date_t::fromMillisSinceEpoch(",
          "new_line_content": "        timelib_time_dtor(timeAfterAddition);",
          "content_same": false
        },
        {
          "line": 1246,
          "old_api": "onds",
          "new_api": "serted",
          "old_text": "onds(timeAfterAddition->sse)) +",
          "new_text": "serted(5166406, \"dateAdd overflowed\");\n ",
          "old_line_content": "        durationCount<Milliseconds>(Seconds(timeAfterAddition->sse)) +",
          "new_line_content": "        uasserted(5166406, \"dateAdd overflowed\");",
          "content_same": false
        },
        {
          "line": 1257,
          "old_api": "stexpr da",
          "new_api": "stexpr mi",
          "old_text": "stexpr da",
          "new_text": "stexpr mi",
          "old_line_content": "    auto constexpr day = hour * kHoursPerDay;",
          "new_line_content": "    auto constexpr millisecond = 1;",
          "content_same": false
        },
        {
          "line": 1258,
          "old_api": "stexpr we",
          "new_api": "stexpr se",
          "old_text": "stexpr we",
          "new_text": "stexpr se",
          "old_line_content": "    auto constexpr week = day * kDaysPerWeek;",
          "new_line_content": "    auto constexpr second = millisecond * kMillisecondsPerSecond;",
          "content_same": false
        },
        {
          "line": 1291,
          "old_api": "ncateDate",
          "new_api": "sert",
          "old_text": "ncateDate(date, unit, binSize, referencePoint, timezone, startOfWeek);\n}",
          "new_text": "sert(5439005, \"expected binSize > 0\", binSize > 0);\n\n",
          "old_line_content": "    return truncateDate(date, unit, binSize, referencePoint, timezone, startOfWeek);",
          "new_line_content": "    uassert(5439005, \"expected binSize > 0\", binSize > 0);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 1024,
          "old_api": null,
          "new_api": "e_t::fromMillisSinceEpoch(result);\n}",
          "old_text": null,
          "new_text": "e_t::fromMillisSinceEpoch(result);\n}",
          "old_line_content": "    long long binSizeInMillis;",
          "new_line_content": "    return Date_t::fromMillisSinceEpoch(result);",
          "content_same": false
        },
        {
          "line": 1029,
          "old_api": null,
          "new_api": "sert",
          "old_text": null,
          "new_text": "sert(\n        5439002, \"dateTrunc overflowed\", !overflow::mul(binSize, millisPerUnit, &binSizeInMillis));\n ",
          "old_line_content": "",
          "new_line_content": "    uassert(",
          "content_same": false
        },
        {
          "line": 1030,
          "old_api": null,
          "new_api": "rflow::mul(binSize, millisPerUnit, &binSizeInMillis));",
          "old_text": null,
          "new_text": "rflow::mul(binSize, millisPerUnit, &binSizeInMillis));\n",
          "old_line_content": "/**",
          "new_line_content": "        5439002, \"dateTrunc overflowed\", !overflow::mul(binSize, millisPerUnit, &binSizeInMillis));",
          "content_same": false
        },
        {
          "line": 1051,
          "old_api": null,
          "new_api": "ncateDateMillis",
          "old_text": null,
          "new_text": "ncateDateMillis(date, referencePoint.first, binSize);\n ",
          "old_line_content": "        case TimeUnit::minute:",
          "new_line_content": "            return truncateDateMillis(date, referencePoint.first, binSize);",
          "content_same": false
        },
        {
          "line": 1053,
          "old_api": null,
          "new_api": "ncateDateMillis",
          "old_text": null,
          "new_text": "ncateDateMillis(\n                date, referencePoint.first, binSizeInMillis(binSize, kMillisecondsPerSecond));\n ",
          "old_line_content": "                date,",
          "new_line_content": "            return truncateDateMillis(",
          "content_same": false
        },
        {
          "line": 1054,
          "old_api": null,
          "new_api": "SizeInMillis",
          "old_text": null,
          "new_text": "SizeInMillis(binSize, kMillisecondsPerSecond));\n",
          "old_line_content": "                referencePoint.first,",
          "new_line_content": "                date, referencePoint.first, binSizeInMillis(binSize, kMillisecondsPerSecond));",
          "content_same": false
        },
        {
          "line": 1056,
          "old_api": null,
          "new_api": "ncateDateMillis",
          "old_text": null,
          "new_text": "ncateDateMillis(\n                date,\n                referencePoint.first,\n                binSizeInMillis(binSize, kSecondsPerMinute * kMillisecondsPerSecond));\n ",
          "old_line_content": "        case TimeUnit::hour:",
          "new_line_content": "            return truncateDateMillis(",
          "content_same": false
        },
        {
          "line": 1059,
          "old_api": null,
          "new_api": "SizeInMillis",
          "old_text": null,
          "new_text": "SizeInMillis(binSize, kSecondsPerMinute * kMillisecondsPerSecond));\n",
          "old_line_content": "                referencePoint.first,",
          "new_line_content": "                binSizeInMillis(binSize, kSecondsPerMinute * kMillisecondsPerSecond));",
          "content_same": false
        },
        {
          "line": 1061,
          "old_api": null,
          "new_api": "ncateDateMillis",
          "old_text": null,
          "new_text": "ncateDateMillis(\n                date,\n                referencePoint.first,\n                binSizeInMillis(binSize,\n                                kMinutesPerHour * kSecondsPerMinute * kMillisecondsPerSecond));\n ",
          "old_line_content": "                                kMinutesPerHour * kSecondsPerMinute * kMillisecondsPerSecond));",
          "new_line_content": "            return truncateDateMillis(",
          "content_same": false
        },
        {
          "line": 1064,
          "old_api": null,
          "new_api": "SizeInMillis",
          "old_text": null,
          "new_text": "SizeInMillis(binSize,\n                                kMinutesPerHour * kSecondsPerMinute * kMillisecondsPerSecond));\n",
          "old_line_content": "                5439006,",
          "new_line_content": "                binSizeInMillis(binSize,",
          "content_same": false
        },
        {
          "line": 1067,
          "old_api": null,
          "new_api": "sert",
          "old_text": null,
          "new_text": "sert(\n                5439006,\n                \"dateTrunc unsupported binSize value\",\n                binSize <=\n                    100'000'000'000);  ",
          "old_line_content": "                    100'000'000'000);  // This is a limit up to which dateAdd() can properly handle.",
          "new_line_content": "            uassert(",
          "content_same": false
        },
        {
          "line": 1072,
          "old_api": null,
          "new_api": "getTimelibTime",
          "old_text": null,
          "new_text": "ezone.getTimelibTime(date);\n ",
          "old_line_content": "                    distanceFromReferencePoint =",
          "new_line_content": "            const auto dateInTimeZone = timezone.getTimelibTime(date);",
          "content_same": false
        },
        {
          "line": 1093,
          "old_api": null,
          "new_api": "eDiffYear",
          "old_text": null,
          "new_text": "eDiffYear(referencePoint.second, *dateInTimeZone);\n ",
          "old_line_content": "            }",
          "new_line_content": "                        dateDiffYear(referencePoint.second, *dateInTimeZone);",
          "content_same": false
        },
        {
          "line": 1096,
          "old_api": null,
          "new_api": "GO_UNREACHABLE_TASSERT",
          "old_text": null,
          "new_text": "GO_UNREACHABLE_TASSERT(5439021);\n ",
          "old_line_content": "            // point.",
          "new_line_content": "                    MONGO_UNREACHABLE_TASSERT(5439021);",
          "content_same": false
        },
        {
          "line": 587,
          "old_api": null,
          "new_api": "sert",
          "old_text": null,
          "new_text": "sert(6828900, \"Failed to obtain timezone offset\", result);\n ",
          "old_line_content": "    }",
          "new_line_content": "        uassert(6828900, \"Failed to obtain timezone offset\", result);",
          "content_same": false
        },
        {
          "line": 588,
          "old_api": null,
          "new_api": "onds",
          "old_text": null,
          "new_text": "onds(timezoneOffsetFromUTC);\n ",
          "old_line_content": "}",
          "new_line_content": "        return Seconds(timezoneOffsetFromUTC);",
          "content_same": false
        },
        {
          "line": 1102,
          "old_api": null,
          "new_api": "sert",
          "old_text": null,
          "new_text": "sert(5439004,\n                    \"dateTrunc overflowed\",\n                    !overflow::sub(distanceFromReferencePoint,\n                                   distanceToBinLowerBound(distanceFromReferencePoint, binSize),\n                                   &binLowerBoundFromRefPoint));\n\n",
          "old_line_content": "                                   &binLowerBoundFromRefPoint));",
          "new_line_content": "            uassert(5439004,",
          "content_same": false
        },
        {
          "line": 1104,
          "old_api": null,
          "new_api": "rflow::sub(distanceFromReferencePoint,\n                                   distanceToBinLowerBound(distanceFromReferencePoint, binSize),\n                                   &binLowerBoundFromRefPoint));",
          "old_text": null,
          "new_text": "rflow::sub(distanceFromReferencePoint,\n                                   distanceToBinLowerBound(distanceFromReferencePoint, binSize),\n                                   &binLowerBoundFromRefPoint));\n",
          "old_line_content": "            // Determine the lower bound of a bin the 'date' falls into.",
          "new_line_content": "                    !overflow::sub(distanceFromReferencePoint,",
          "content_same": false
        },
        {
          "line": 1109,
          "old_api": null,
          "new_api": "eAdd",
          "old_text": null,
          "new_text": "eAdd(referencePoint.first, unit, binLowerBoundFromRefPoint, timezone);\n ",
          "old_line_content": "",
          "new_line_content": "            return dateAdd(referencePoint.first, unit, binLowerBoundFromRefPoint, timezone);",
          "content_same": false
        },
        {
          "line": 599,
          "old_api": null,
          "new_api": "idateFormat",
          "old_text": null,
          "new_text": "idateFormat(format, kDateFromStringFormatMap);\n}",
          "old_line_content": "    StringBuilder formatted;",
          "new_line_content": "    return validateFormat(format, kDateFromStringFormatMap);",
          "content_same": false
        },
        {
          "line": 604,
          "old_api": null,
          "new_api": "tus::OK())",
          "old_text": null,
          "new_text": "tus::OK())\n ",
          "old_line_content": "}",
          "new_line_content": "    if (auto status = outputDateWithFormat(formatted, format, date); status != Status::OK())",
          "content_same": false
        },
        {
          "line": 1127,
          "old_api": null,
          "new_api": "utcOffset",
          "old_text": null,
          "new_text": "ezone.utcOffset(\n            Date_t::fromMillisSinceEpoch(kReferencePointInUTCMillis)));\n",
          "old_line_content": "",
          "new_line_content": "        durationCount<Milliseconds>(timezone.utcOffset(",
          "content_same": false
        },
        {
          "line": 1128,
          "old_api": null,
          "new_api": "e_t::fromMillisSinceEpoch(kReferencePointInUTCMillis)));",
          "old_text": null,
          "new_text": "e_t::fromMillisSinceEpoch(kReferencePointInUTCMillis)));",
          "old_line_content": "    if (TimeUnit::week == unit) {",
          "new_line_content": "            Date_t::fromMillisSinceEpoch(kReferencePointInUTCMillis)));",
          "content_same": false
        },
        {
          "line": 617,
          "old_api": null,
          "new_api": "stexpr in",
          "old_text": null,
          "new_text": "stexpr in",
          "old_line_content": "                                   kMillisecondsPerSecond};",
          "new_line_content": "constexpr int kDaysPerWeek = 7;",
          "content_same": false
        },
        {
          "line": 1129,
          "old_api": null,
          "new_api": "createFromDateParts",
          "old_text": null,
          "new_text": "ezone.createFromDateParts(2000, 1, 1, 0, 0, 0, 0).toMillisSinceEpoch() ==",
          "old_line_content": "        // Find the nearest to 'referencePoint' first day of the week that is in the future.",
          "new_line_content": "    dassert(timezone.createFromDateParts(2000, 1, 1, 0, 0, 0, 0).toMillisSinceEpoch() ==",
          "content_same": false
        },
        {
          "line": 619,
          "old_api": null,
          "new_api": "stexpr au",
          "old_text": null,
          "new_text": "stexpr au",
          "old_line_content": "",
          "new_line_content": "constexpr auto kQuarterLengthInMonths = 3LL;",
          "content_same": false
        },
        {
          "line": 620,
          "old_api": null,
          "new_api": "stexpr lo",
          "old_text": null,
          "new_text": "stexpr lo",
          "old_line_content": "/**",
          "new_line_content": "constexpr long kMillisecondsPerDay{kHoursPerDay * kMinutesPerHour * kSecondsPerMinute *",
          "content_same": false
        },
        {
          "line": 622,
          "old_api": null,
          "new_api": "stexpr lo",
          "old_text": null,
          "new_text": "stexpr lo",
          "old_line_content": " */",
          "new_line_content": "constexpr long kLeapYearReferencePoint = -1000000000L;",
          "content_same": false
        },
        {
          "line": 1134,
          "old_api": null,
          "new_api": "stexpr Da",
          "old_text": null,
          "new_text": "stexpr Da",
          "old_line_content": "            kDaysPerWeek;",
          "new_line_content": "        constexpr DayOfWeek kReferencePointDayOfWeek{",
          "content_same": false
        },
        {
          "line": 1136,
          "old_api": null,
          "new_api": "tic_cast<uint8_t>(kReferencePointDayOfWeek) -",
          "old_text": null,
          "new_text": "tic_cast<uint8_t>(kReferencePointDayOfWeek) -\n",
          "old_line_content": "",
          "new_line_content": "        int referencePointDayOfWeek = (static_cast<uint8_t>(kReferencePointDayOfWeek) -",
          "content_same": false
        },
        {
          "line": 1137,
          "old_api": null,
          "new_api": "tic_cast<uint8_t>(startOfWeek) +",
          "old_text": null,
          "new_text": "tic_cast<uint8_t>(startOfWeek) + ",
          "old_line_content": "        // If the reference point was an arbitrary value, we would need to use 'dateAdd()' function",
          "new_line_content": "                                       static_cast<uint8_t>(startOfWeek) + kDaysPerWeek) %",
          "content_same": false
        },
        {
          "line": 630,
          "old_api": null,
          "new_api": "tic_cast<int>(timelibTime.m)},",
          "old_text": null,
          "new_text": "tic_cast<int>(timelibTime.m)},\n",
          "old_line_content": "    long long year;",
          "new_line_content": "          month{static_cast<int>(timelibTime.m)},",
          "content_same": false
        },
        {
          "line": 631,
          "old_api": null,
          "new_api": "tic_cast<int>(timelibTime.d)} {",
          "old_text": null,
          "new_text": "tic_cast<int>(timelibTime.d)} {",
          "old_line_content": "    int month;  // January = 1.",
          "new_line_content": "          dayOfMonth{static_cast<int>(timelibTime.d)} {}",
          "content_same": false
        },
        {
          "line": 1151,
          "old_api": null,
          "new_api": "e_t::fromMillisSinceEpoch(referencePointMillis), r",
          "old_text": null,
          "new_text": "e_t::fromMillisSinceEpoch(referencePointMillis), r",
          "old_line_content": " * Determines if function 'dateAdd()' parameter 'amount' and 'unit' values are valid - the",
          "new_line_content": "    return {Date_t::fromMillisSinceEpoch(referencePointMillis), referencePoint};",
          "content_same": false
        },
        {
          "line": 1165,
          "old_api": null,
          "new_api": "stexpr au",
          "old_text": null,
          "new_text": "stexpr au",
          "old_line_content": "        switch (unit) {",
          "new_line_content": "    constexpr auto maxHours = maxDays * kHoursPerDay;",
          "content_same": false
        },
        {
          "line": 1166,
          "old_api": null,
          "new_api": "stexpr au",
          "old_text": null,
          "new_text": "stexpr au",
          "old_line_content": "            case TimeUnit::year:",
          "new_line_content": "    constexpr auto maxMinutes = maxHours * kMinutesPerHour;",
          "content_same": false
        },
        {
          "line": 1167,
          "old_api": null,
          "new_api": "stexpr au",
          "old_text": null,
          "new_text": "stexpr au",
          "old_line_content": "                return maxYears;",
          "new_line_content": "    constexpr auto maxSeconds = maxMinutes * kSecondsPerMinute;",
          "content_same": false
        },
        {
          "line": 656,
          "old_api": null,
          "new_api": "pYearsSinceReferencePoint",
          "old_text": null,
          "new_text": "pYearsSinceReferencePoint(startYear - 1) +\n",
          "old_line_content": "/**",
          "new_line_content": "    return leapYearsSinceReferencePoint(endYear - 1) - leapYearsSinceReferencePoint(startYear - 1) +",
          "content_same": false
        },
        {
          "line": 1168,
          "old_api": null,
          "new_api": "(TimeUnit unit) {\n        switch (unit) {\n            case TimeUnit::year:\n                return maxYears;\n            case TimeUnit::quarter:\n                return maxQuarters;\n            case TimeUnit::month:\n                return maxMonths;\n            case TimeUnit::week:\n                return maxWeeks;\n            case TimeUnit::day:\n                return maxDays;\n            case TimeUnit::hour:\n                return maxHours;\n            case TimeUnit::minute:\n                return maxMinutes;\n            case TimeUnit::second:\n                return maxSeconds;\n            default:\n                MONGO_UNREACHABLE_TASSERT(5976501);\n        }\n    }(unit);",
          "old_text": null,
          "new_text": "(TimeUnit unit) {\n        switch (unit) {\n            case TimeUnit::year:\n                return maxYears;\n            case TimeUnit::quarter:\n                return maxQuarters;\n            case TimeUnit::month:\n                return maxMonths;\n            case TimeUnit::week:\n                return maxWeeks;\n            case TimeUnit::day:\n                return maxDays;\n            case TimeUnit::hour:\n                return maxHours;\n            case TimeUnit::minute:\n                return maxMinutes;\n            case TimeUnit::second:\n                return maxSeconds;\n            default:\n                MONGO_UNREACHABLE_TASSERT(5976501);\n        }\n    }(unit);\n ",
          "old_line_content": "            case TimeUnit::quarter:",
          "new_line_content": "    const auto maxAbsoluteAmountValue = [&](TimeUnit unit) {",
          "content_same": false
        },
        {
          "line": 1187,
          "old_api": null,
          "new_api": "GO_UNREACHABLE_TASSERT",
          "old_text": null,
          "new_text": "GO_UNREACHABLE_TASSERT(5976501);\n ",
          "old_line_content": "}",
          "new_line_content": "                MONGO_UNREACHABLE_TASSERT(5976501);",
          "content_same": false
        },
        {
          "line": 1196,
          "old_api": null,
          "new_api": "liseconds",
          "old_text": null,
          "new_text": "liseconds(amount);\n ",
          "old_line_content": "    // range, then the addition algorithm is expected to not overflow. The final determination if",
          "new_line_content": "        return date + Milliseconds(amount);",
          "content_same": false
        },
        {
          "line": 1202,
          "old_api": null,
          "new_api": "sert",
          "old_text": null,
          "new_text": "sert(5976500,\n            str::stream() << \"invalid dateAdd 'amount' parameter value: \" << amount << \" \"\n                          << serializeTimeUnit(unit),\n            isDateAddAmountValid(amount, unit));\n\n",
          "old_line_content": "",
          "new_line_content": "    uassert(5976500,",
          "content_same": false
        },
        {
          "line": 1205,
          "old_api": null,
          "new_api": "ateAddAmountValid",
          "old_text": null,
          "new_text": "ateAddAmountValid(amount, unit));\n",
          "old_line_content": "    localTime->us = microSec;",
          "new_line_content": "            isDateAddAmountValid(amount, unit));",
          "content_same": false
        },
        {
          "line": 1207,
          "old_api": null,
          "new_api": "getTimelibTime",
          "old_text": null,
          "new_text": "ezone.getTimelibTime(date);\n ",
          "old_line_content": "    // Check if an adjustment for the last day of month is necessary.",
          "new_line_content": "    auto localTime = timezone.getTimelibTime(date);",
          "content_same": false
        },
        {
          "line": 697,
          "old_api": null,
          "new_api": "rter",
          "old_text": null,
          "new_text": "rter(startInstant.month) +\n",
          "old_line_content": "    return endInstant.month - startInstant.month +",
          "new_line_content": "    return quarter(endInstant.month) - quarter(startInstant.month) +",
          "content_same": false
        },
        {
          "line": 1212,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "alTime.get(), u",
          "old_line_content": "    }",
          "new_line_content": "    auto intervalInDays = daysToAdd(localTime.get(), unit, amount);",
          "content_same": false
        },
        {
          "line": 1215,
          "old_api": null,
          "new_api": "value",
          "old_text": null,
          "new_text": "ervalInDays.value();\n ",
          "old_line_content": "",
          "new_line_content": "        amount = intervalInDays.value();",
          "content_same": false
        },
        {
          "line": 705,
          "old_api": null,
          "new_api": "elib_day_of_year",
          "old_text": null,
          "new_text": "elib_day_of_year(endInstant.year, endInstant.month, endInstant.dayOfMonth) -\n",
          "old_line_content": "",
          "new_line_content": "    return timelib_day_of_year(endInstant.year, endInstant.month, endInstant.dayOfMonth) -",
          "content_same": false
        },
        {
          "line": 706,
          "old_api": null,
          "new_api": "elib_day_of_year",
          "old_text": null,
          "new_text": "elib_day_of_year(startInstant.year, startInstant.month, startInstant.dayOfMonth) +\n",
          "old_line_content": "/**",
          "new_line_content": "        timelib_day_of_year(startInstant.year, startInstant.month, startInstant.dayOfMonth) +",
          "content_same": false
        },
        {
          "line": 707,
          "old_api": null,
          "new_api": "sBetweenYears",
          "old_text": null,
          "new_text": "sBetweenYears(startInstant.year, endInstant.year);\n}",
          "old_line_content": " * Determines which day of the week time instant 'timeInstant' is in given that the week starts on",
          "new_line_content": "        daysBetweenYears(startInstant.year, endInstant.year);",
          "content_same": false
        },
        {
          "line": 1218,
          "old_api": null,
          "new_api": "TimelibRelTime",
          "old_text": null,
          "new_text": "TimelibRelTime(unit, amount);\n\n",
          "old_line_content": "    // keeps the values of hour, minute, second, and millisecond components from the input date",
          "new_line_content": "    auto interval = getTimelibRelTime(unit, amount);",
          "content_same": false
        },
        {
          "line": 1225,
          "old_api": null,
          "new_api": "isUtcOffsetZone",
          "old_text": null,
          "new_text": "ezone.isUtcOffsetZone() ||",
          "old_line_content": "        // For time units of hour or smaller and a timezone different from UTC perform the",
          "new_line_content": "    if (timezone.isUtcZone() || timezone.isUtcOffsetZone() || interval->d || interval->m ||",
          "content_same": false
        },
        {
          "line": 1227,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "erval.get());\n",
          "old_line_content": "        // date, which would happen by default if we used the timelib_add() function with local",
          "new_line_content": "        timeAfterAddition = timelib_add(localTime.get(), interval.get());",
          "content_same": false
        },
        {
          "line": 716,
          "old_api": null,
          "new_api": "elib_iso_day_of_week",
          "old_text": null,
          "new_text": "elib_iso_day_of_week(timeInstant.year, timeInstant.month, timeInstant.dayOfMonth) -\n",
          "old_line_content": "",
          "new_line_content": "    return (timelib_iso_day_of_week(timeInstant.year, timeInstant.month, timeInstant.dayOfMonth) -",
          "content_same": false
        },
        {
          "line": 717,
          "old_api": null,
          "new_api": "tic_cast<uint8_t>(startOfWeek) +",
          "old_text": null,
          "new_text": "tic_cast<uint8_t>(startOfWeek) + ",
          "old_line_content": "/**",
          "new_line_content": "            static_cast<uint8_t>(startOfWeek) + kDaysPerWeek) %",
          "content_same": false
        },
        {
          "line": 1237,
          "old_api": null,
          "new_api": "ateTimelibTime",
          "old_text": null,
          "new_text": "ateTimelibTime();\n ",
          "old_line_content": "    }",
          "new_line_content": "        auto utcTime = createTimelibTime();",
          "content_same": false
        },
        {
          "line": 726,
          "old_api": null,
          "new_api": "OfWeek",
          "old_text": null,
          "new_text": "OfWeek(startInstant, startOfWeek) -\n",
          "old_line_content": "inline long long dateDiffHourWithoutUTCOffsetCorrection(timelib_time* startInstant,",
          "new_line_content": "    return (dateDiffDay(startInstant, endInstant) + dayOfWeek(startInstant, startOfWeek) -",
          "content_same": false
        },
        {
          "line": 727,
          "old_api": null,
          "new_api": "OfWeek",
          "old_text": null,
          "new_text": "OfWeek(endInstant, startOfWeek)) /",
          "old_line_content": "                                                        timelib_time* endInstant) {",
          "new_line_content": "            dayOfWeek(endInstant, startOfWeek)) /",
          "content_same": false
        },
        {
          "line": 1238,
          "old_api": null,
          "new_api": "onds",
          "old_text": null,
          "new_text": "onds(date));\n",
          "old_line_content": "",
          "new_line_content": "        timelib_unixtime2gmt(utcTime.get(), seconds(date));",
          "content_same": false
        },
        {
          "line": 1244,
          "old_api": null,
          "new_api": "rflow::mul(timeAfterAddition->sse, 1000L, &res)) {",
          "old_text": null,
          "new_text": "rflow::mul(timeAfterAddition->sse, 1000L, &res)) {",
          "old_line_content": "",
          "new_line_content": "    if (overflow::mul(timeAfterAddition->sse, 1000L, &res)) {",
          "content_same": false
        },
        {
          "line": 735,
          "old_api": null,
          "new_api": "eDiffHourWithoutUTCOffsetCorrection",
          "old_text": null,
          "new_text": "eDiffHourWithoutUTCOffsetCorrection(startInstant, endInstant) +\n",
          "old_line_content": "                                                          timelib_time* endInstant) {",
          "new_line_content": "    return dateDiffHourWithoutUTCOffsetCorrection(startInstant, endInstant) +",
          "content_same": false
        },
        {
          "line": 736,
          "old_api": null,
          "new_api": "OffsetCorrectionForHours",
          "old_text": null,
          "new_text": "OffsetCorrectionForHours(startInstant, endInstant);\n}",
          "old_line_content": "    return endInstant->i - startInstant->i +",
          "new_line_content": "        utcOffsetCorrectionForHours(startInstant, endInstant);",
          "content_same": false
        },
        {
          "line": 1249,
          "old_api": null,
          "new_api": "e_t::fromMillisSinceEpoch(\n        durationCount<Milliseconds>(Seconds(timeAfterAddition->sse)) +\n        durationCount<Milliseconds>(Microseconds(timeAfterAddition->us)));",
          "old_text": null,
          "new_text": "e_t::fromMillisSinceEpoch(\n        durationCount<Milliseconds>(Seconds(timeAfterAddition->sse)) +\n        durationCount<Milliseconds>(Microseconds(timeAfterAddition->us)));\n ",
          "old_line_content": "    return returnDate;",
          "new_line_content": "    auto returnDate = Date_t::fromMillisSinceEpoch(",
          "content_same": false
        },
        {
          "line": 1250,
          "old_api": null,
          "new_api": "onds",
          "old_text": null,
          "new_text": "onds(timeAfterAddition->sse)) +",
          "old_line_content": "}",
          "new_line_content": "        durationCount<Milliseconds>(Seconds(timeAfterAddition->sse)) +",
          "content_same": false
        },
        {
          "line": 1251,
          "old_api": null,
          "new_api": "roseconds",
          "old_text": null,
          "new_text": "roseconds(timeAfterAddition->us)));",
          "old_line_content": "",
          "new_line_content": "        durationCount<Milliseconds>(Microseconds(timeAfterAddition->us)));",
          "content_same": false
        },
        {
          "line": 1252,
          "old_api": null,
          "new_api": "elib_time_dtor",
          "old_text": null,
          "new_text": "elib_time_dtor(timeAfterAddition);\n ",
          "old_line_content": "StatusWith<long long> timeUnitTypicalMilliseconds(TimeUnit unit) {",
          "new_line_content": "    timelib_time_dtor(timeAfterAddition);",
          "content_same": false
        },
        {
          "line": 744,
          "old_api": null,
          "new_api": "eDiffMinuteWithoutUTCOffsetCorrection",
          "old_text": null,
          "new_text": "eDiffMinuteWithoutUTCOffsetCorrection(startInstant, endInstant) +\n",
          "old_line_content": "    return endInstant->s - startInstant->s +",
          "new_line_content": "    return dateDiffMinuteWithoutUTCOffsetCorrection(startInstant, endInstant) +",
          "content_same": false
        },
        {
          "line": 1259,
          "old_api": null,
          "new_api": "stexpr mi",
          "old_text": null,
          "new_text": "stexpr mi",
          "old_line_content": "",
          "new_line_content": "    auto constexpr minute = second * kSecondsPerMinute;",
          "content_same": false
        },
        {
          "line": 1260,
          "old_api": null,
          "new_api": "stexpr ho",
          "old_text": null,
          "new_text": "stexpr ho",
          "old_line_content": "    switch (unit) {",
          "new_line_content": "    auto constexpr hour = minute * kMinutesPerHour;",
          "content_same": false
        },
        {
          "line": 1261,
          "old_api": null,
          "new_api": "stexpr da",
          "old_text": null,
          "new_text": "stexpr da",
          "old_line_content": "        case TimeUnit::millisecond:",
          "new_line_content": "    auto constexpr day = hour * kHoursPerDay;",
          "content_same": false
        },
        {
          "line": 1262,
          "old_api": null,
          "new_api": "stexpr we",
          "old_text": null,
          "new_text": "stexpr we",
          "old_line_content": "            return millisecond;",
          "new_line_content": "    auto constexpr week = day * kDaysPerWeek;",
          "content_same": false
        },
        {
          "line": 749,
          "old_api": null,
          "new_api": "eDiffMinuteWithoutUTCOffsetCorrection",
          "old_text": null,
          "new_text": "eDiffMinuteWithoutUTCOffsetCorrection(startInstant, endInstant) * ",
          "old_line_content": "    long long result;",
          "new_line_content": "        dateDiffMinuteWithoutUTCOffsetCorrection(startInstant, endInstant) * kSecondsPerMinute +",
          "content_same": false
        },
        {
          "line": 754,
          "old_api": null,
          "new_api": "toMillisSinceEpoch",
          "old_text": null,
          "new_text": "sert(5166308,\n            \"dateDiff overflowed\",\n            !overflow::sub(endDate.toMillisSinceEpoch(), startDate.toMillisSinceEpoch(), &result));\n ",
          "old_line_content": "}",
          "new_line_content": "    uassert(5166308,",
          "content_same": false
        },
        {
          "line": 756,
          "old_api": null,
          "new_api": "toMillisSinceEpoch",
          "old_text": null,
          "new_text": "rtDate.toMillisSinceEpoch(), &",
          "old_line_content": "// A mapping from a string expression of TimeUnit to TimeUnit.",
          "new_line_content": "            !overflow::sub(endDate.toMillisSinceEpoch(), startDate.toMillisSinceEpoch(), &result));",
          "content_same": false
        },
        {
          "line": 1280,
          "old_api": null,
          "new_api": "tus",
          "old_text": null,
          "new_text": "tus(ErrorCodes::BadValue,\n                          str::stream() << \"TimeUnit is too big: \" << serializeTimeUnit(unit));\n ",
          "old_line_content": "}",
          "new_line_content": "            return Status(ErrorCodes::BadValue,",
          "content_same": false
        },
        {
          "line": 1281,
          "old_api": null,
          "new_api": "ializeTimeUnit",
          "old_text": null,
          "new_text": "ializeTimeUnit(unit));\n",
          "old_line_content": "",
          "new_line_content": "                          str::stream() << \"TimeUnit is too big: \" << serializeTimeUnit(unit));",
          "content_same": false
        },
        {
          "line": 1283,
          "old_api": null,
          "new_api": "GO_UNREACHABLE_TASSERT",
          "old_text": null,
          "new_text": "GO_UNREACHABLE_TASSERT(5423303);\n}",
          "old_line_content": "                    TimeUnit unit,",
          "new_line_content": "    MONGO_UNREACHABLE_TASSERT(5423303);",
          "content_same": false
        },
        {
          "line": 1294,
          "old_api": null,
          "new_api": "aultReferencePointForDateTrunc",
          "old_text": null,
          "new_text": "aultReferencePointForDateTrunc(timezone, unit, startOfWeek)};\n",
          "old_line_content": "",
          "new_line_content": "    const auto referencePoint{defaultReferencePointForDateTrunc(timezone, unit, startOfWeek)};",
          "content_same": false
        },
        {
          "line": 1295,
          "old_api": null,
          "new_api": "ncateDate",
          "old_text": null,
          "new_text": "ncateDate(date, unit, binSize, referencePoint, timezone, startOfWeek);\n}",
          "old_line_content": "",
          "new_line_content": "    return truncateDate(date, unit, binSize, referencePoint, timezone, startOfWeek);",
          "content_same": false
        },
        {
          "line": 804,
          "old_api": null,
          "new_api": "getTimelibTime",
          "old_text": null,
          "new_text": "ezone.getTimelibTime(endDate);\n ",
          "old_line_content": "        case TimeUnit::quarter:",
          "new_line_content": "    auto endDateInTimeZone = timezone.getTimelibTime(endDate);",
          "content_same": false
        },
        {
          "line": 819,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "DateInTimeZone.get());\n",
          "old_line_content": "            MONGO_UNREACHABLE;",
          "new_line_content": "            return dateDiffMinute(startDateInTimeZone.get(), endDateInTimeZone.get());",
          "content_same": false
        },
        {
          "line": 821,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "DateInTimeZone.get());\n",
          "old_line_content": "}",
          "new_line_content": "            return dateDiffSecond(startDateInTimeZone.get(), endDateInTimeZone.get());",
          "content_same": false
        },
        {
          "line": 828,
          "old_api": null,
          "new_api": "find",
          "old_text": null,
          "new_text": "eUnitNameToTimeUnitMap.find(unitName);\n ",
          "old_line_content": "    return iterator->second;",
          "new_line_content": "    auto iterator = timeUnitNameToTimeUnitMap.find(unitName);",
          "content_same": false
        },
        {
          "line": 829,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "sert(ErrorCodes::FailedToParse,\n            str::stream() << \"unknown time unit value: \" << unitName,\n            iterator != timeUnitNameToTimeUnitMap.end());\n ",
          "old_line_content": "}",
          "new_line_content": "    uassert(ErrorCodes::FailedToParse,",
          "content_same": false
        },
        {
          "line": 830,
          "old_api": null,
          "new_api": "::stream() <<",
          "old_text": null,
          "new_text": "::stream() <<",
          "old_line_content": "",
          "new_line_content": "            str::stream() << \"unknown time unit value: \" << unitName,",
          "content_same": false
        },
        {
          "line": 831,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "eUnitNameToTimeUnitMap.end());\n",
          "old_line_content": "bool isValidTimeUnit(StringData unitName) {",
          "new_line_content": "            iterator != timeUnitNameToTimeUnitMap.end());",
          "content_same": false
        },
        {
          "line": 836,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "eUnitNameToTimeUnitMap.end();\n}",
          "old_line_content": "    switch (unit) {",
          "new_line_content": "    return timeUnitNameToTimeUnitMap.find(unitName) != timeUnitNameToTimeUnitMap.end();",
          "content_same": false
        },
        {
          "line": 860,
          "old_api": null,
          "new_api": "GO_UNREACHABLE_TASSERT",
          "old_text": null,
          "new_text": "GO_UNREACHABLE_TASSERT(5339900);\n}",
          "old_line_content": "    // Perform case-insensitive lookup.",
          "new_line_content": "    MONGO_UNREACHABLE_TASSERT(5339900);",
          "content_same": false
        },
        {
          "line": 865,
          "old_api": null,
          "new_api": "::toLower(dayOfWeek));",
          "old_text": null,
          "new_text": "::toLower(dayOfWeek));\n",
          "old_line_content": "    return iterator->second;",
          "new_line_content": "    auto iterator = dayOfWeekNameToDayOfWeekMap.find(str::toLower(dayOfWeek));",
          "content_same": false
        },
        {
          "line": 866,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "sert(ErrorCodes::FailedToParse,\n            str::stream() << \"unknown day of week value: \" << dayOfWeek,\n            iterator != dayOfWeekNameToDayOfWeekMap.end());\n ",
          "old_line_content": "}",
          "new_line_content": "    uassert(ErrorCodes::FailedToParse,",
          "content_same": false
        },
        {
          "line": 867,
          "old_api": null,
          "new_api": "::stream() <<",
          "old_text": null,
          "new_text": "::stream() <<",
          "old_line_content": "",
          "new_line_content": "            str::stream() << \"unknown day of week value: \" << dayOfWeek,",
          "content_same": false
        },
        {
          "line": 868,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "OfWeekNameToDayOfWeekMap.end());\n",
          "old_line_content": "bool isValidDayOfWeek(StringData dayOfWeek) {",
          "new_line_content": "            iterator != dayOfWeekNameToDayOfWeekMap.end());",
          "content_same": false
        },
        {
          "line": 874,
          "old_api": null,
          "new_api": "::toLower(dayOfWeek)) !",
          "old_text": null,
          "new_text": "::toLower(dayOfWeek)) !",
          "old_line_content": "void TimelibRelTimeDeleter::operator()(timelib_rel_time* relTime) {",
          "new_line_content": "    return dayOfWeekNameToDayOfWeekMap.find(str::toLower(dayOfWeek)) !=",
          "content_same": false
        },
        {
          "line": 883,
          "old_api": null,
          "new_api": "elib_rel_time_ctor",
          "old_text": null,
          "new_text": "elib_rel_time_ctor());\n",
          "old_line_content": "                                                                           long long amount) {",
          "new_line_content": "    return std::unique_ptr<_timelib_rel_time, TimelibRelTimeDeleter>(timelib_rel_time_ctor());",
          "content_same": false
        },
        {
          "line": 888,
          "old_api": null,
          "new_api": "ateTimelibRelTime",
          "old_text": null,
          "new_text": "ateTimelibRelTime();\n ",
          "old_line_content": "            break;",
          "new_line_content": "    auto relTime = createTimelibRelTime();",
          "content_same": false
        },
        {
          "line": 915,
          "old_api": null,
          "new_api": "liseconds",
          "old_text": null,
          "new_text": "liseconds(amount));\n",
          "old_line_content": "    }",
          "new_line_content": "            relTime->us = durationCount<Microseconds>(Milliseconds(amount));",
          "content_same": false
        },
        {
          "line": 980,
          "old_api": null,
          "new_api": "::min(tm->d, maxResDay);",
          "old_text": null,
          "new_text": "::min(tm->d, maxResDay);\n ",
          "old_line_content": "}",
          "new_line_content": "    auto targetDay = std::min(tm->d, maxResDay);",
          "content_same": false
        },
        {
          "line": 981,
          "old_api": null,
          "new_api": "elib_day_of_year",
          "old_text": null,
          "new_text": "elib_day_of_year(resYear, resMonth, targetDay) -\n",
          "old_line_content": "",
          "new_line_content": "    long long intervalInDays = timelib_day_of_year(resYear, resMonth, targetDay) -",
          "content_same": false
        },
        {
          "line": 982,
          "old_api": null,
          "new_api": "sBetweenYears",
          "old_text": null,
          "new_text": "sBetweenYears(tm->y, resYear);\n ",
          "old_line_content": "/**",
          "new_line_content": "        timelib_day_of_year(tm->y, tm->m, tm->d) + daysBetweenYears(tm->y, resYear);",
          "content_same": false
        },
        {
          "line": 983,
          "old_api": null,
          "new_api": "st::make_optional(intervalInDays);\n}",
          "old_text": null,
          "new_text": "st::make_optional(intervalInDays);\n}",
          "old_line_content": " * Determines a distance of 'value' to the lower bound of a bin 'value' falls into. It assumes that",
          "new_line_content": "    return boost::make_optional(intervalInDays);",
          "content_same": false
        },
        {
          "line": 994,
          "old_api": null,
          "new_api": "sert",
          "old_text": null,
          "new_text": "sert(5439019, \"expected binSize > 0\", binSize > 0);\n ",
          "old_line_content": "    }",
          "new_line_content": "    tassert(5439019, \"expected binSize > 0\", binSize > 0);",
          "content_same": false
        },
        {
          "line": 1009,
          "old_api": null,
          "new_api": "sert",
          "old_text": null,
          "new_text": "sert(5439020,\n            \"expected binSizeMillis to be convertable to a 64-bit signed integer\",\n            binSizeMillis <=\n                static_cast<unsigned long long>(std::numeric_limits<long long>::max()));\n ",
          "old_line_content": "    long long shiftedDate;",
          "new_line_content": "    tassert(5439020,",
          "content_same": false
        },
        {
          "line": 1014,
          "old_api": null,
          "new_api": "toMillisSinceEpoch",
          "old_text": null,
          "new_text": "sert(5439000,\n            \"dateTrunc overflowed\",\n            !overflow::sub(\n                date.toMillisSinceEpoch(), referencePoint.toMillisSinceEpoch(), &shiftedDate));\n ",
          "old_line_content": "    long long result;",
          "new_line_content": "    uassert(5439000,",
          "content_same": false
        },
        {
          "line": 1016,
          "old_api": null,
          "new_api": "toMillisSinceEpoch",
          "old_text": null,
          "new_text": "rflow::sub(\n                date.toMillisSinceEpoch(), referencePoint.toMillisSinceEpoch(), &shiftedDate));\n",
          "old_line_content": "            \"dateTrunc overflowed\",",
          "new_line_content": "            !overflow::sub(",
          "content_same": false
        },
        {
          "line": 1019,
          "old_api": null,
          "new_api": "toMillisSinceEpoch",
          "old_text": null,
          "new_text": "sert(5439001,\n            \"dateTrunc overflowed\",\n            !overflow::sub(date.toMillisSinceEpoch(),\n                           distanceToBinLowerBound(shiftedDate, binSizeMillis),\n                           &result));\n ",
          "old_line_content": "                           &result));",
          "new_line_content": "    uassert(5439001,",
          "content_same": false
        },
        {
          "line": 1021,
          "old_api": null,
          "new_api": "toMillisSinceEpoch",
          "old_text": null,
          "new_text": "e.toMillisSinceEpoch(),\n ",
          "old_line_content": "}",
          "new_line_content": "            !overflow::sub(date.toMillisSinceEpoch(),",
          "content_same": false
        },
        {
          "line": 1022,
          "old_api": null,
          "new_api": "tanceToBinLowerBound",
          "old_text": null,
          "new_text": "tanceToBinLowerBound(shiftedDate, binSizeMillis),\n ",
          "old_line_content": "",
          "new_line_content": "                           distanceToBinLowerBound(shiftedDate, binSizeMillis),",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 1025,
          "old_api": "sert",
          "new_api": null,
          "old_text": "sert(\n        5439002, \"dateTrunc overflowed\", !overflow::mul(binSize, millisPerUnit, &binSizeInMillis));\n ",
          "new_text": null,
          "old_line_content": "    uassert(",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1026,
          "old_api": "rflow::mul(binSize, millisPerUnit, &binSizeInMillis));",
          "new_api": null,
          "old_text": "rflow::mul(binSize, millisPerUnit, &binSizeInMillis));\n",
          "new_text": null,
          "old_line_content": "        5439002, \"dateTrunc overflowed\", !overflow::mul(binSize, millisPerUnit, &binSizeInMillis));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1047,
          "old_api": "ncateDateMillis",
          "new_api": null,
          "old_text": "ncateDateMillis(date, referencePoint.first, binSize);\n ",
          "new_text": null,
          "old_line_content": "            return truncateDateMillis(date, referencePoint.first, binSize);",
          "new_line_content": "                    const TimeZone& timezone,",
          "content_same": false
        },
        {
          "line": 1049,
          "old_api": "ncateDateMillis",
          "new_api": null,
          "old_text": "ncateDateMillis(\n                date, referencePoint.first, binSizeInMillis(binSize, kMillisecondsPerSecond));\n ",
          "new_text": null,
          "old_line_content": "            return truncateDateMillis(",
          "new_line_content": "    switch (unit) {",
          "content_same": false
        },
        {
          "line": 1050,
          "old_api": "SizeInMillis",
          "new_api": null,
          "old_text": "SizeInMillis(binSize, kMillisecondsPerSecond));\n",
          "new_text": null,
          "old_line_content": "                date, referencePoint.first, binSizeInMillis(binSize, kMillisecondsPerSecond));",
          "new_line_content": "        case TimeUnit::millisecond:",
          "content_same": false
        },
        {
          "line": 1052,
          "old_api": "ncateDateMillis",
          "new_api": null,
          "old_text": "ncateDateMillis(\n                date,\n                referencePoint.first,\n                binSizeInMillis(binSize, kSecondsPerMinute * kMillisecondsPerSecond));\n ",
          "new_text": null,
          "old_line_content": "            return truncateDateMillis(",
          "new_line_content": "        case TimeUnit::second:",
          "content_same": false
        },
        {
          "line": 1055,
          "old_api": "SizeInMillis",
          "new_api": null,
          "old_text": "SizeInMillis(binSize, kSecondsPerMinute * kMillisecondsPerSecond));\n",
          "new_text": null,
          "old_line_content": "                binSizeInMillis(binSize, kSecondsPerMinute * kMillisecondsPerSecond));",
          "new_line_content": "        case TimeUnit::minute:",
          "content_same": false
        },
        {
          "line": 1057,
          "old_api": "ncateDateMillis",
          "new_api": null,
          "old_text": "ncateDateMillis(\n                date,\n                referencePoint.first,\n                binSizeInMillis(binSize,\n                                kMinutesPerHour * kSecondsPerMinute * kMillisecondsPerSecond));\n ",
          "new_text": null,
          "old_line_content": "            return truncateDateMillis(",
          "new_line_content": "                date,",
          "content_same": false
        },
        {
          "line": 1060,
          "old_api": "SizeInMillis",
          "new_api": null,
          "old_text": "SizeInMillis(binSize,\n                                kMinutesPerHour * kSecondsPerMinute * kMillisecondsPerSecond));\n",
          "new_text": null,
          "old_line_content": "                binSizeInMillis(binSize,",
          "new_line_content": "        case TimeUnit::hour:",
          "content_same": false
        },
        {
          "line": 1063,
          "old_api": "sert",
          "new_api": null,
          "old_text": "sert(\n                5439006,\n                \"dateTrunc unsupported binSize value\",\n                binSize <=\n                    100'000'000'000);  ",
          "new_text": null,
          "old_line_content": "            uassert(",
          "new_line_content": "                referencePoint.first,",
          "content_same": false
        },
        {
          "line": 1068,
          "old_api": "getTimelibTime",
          "new_api": null,
          "old_text": "ezone.getTimelibTime(date);\n ",
          "new_text": null,
          "old_line_content": "            const auto dateInTimeZone = timezone.getTimelibTime(date);",
          "new_line_content": "                5439006,",
          "content_same": false
        },
        {
          "line": 1073,
          "old_api": "eDiffDay",
          "new_api": null,
          "old_text": "eDiffDay(referencePoint.second, *dateInTimeZone);\n ",
          "new_text": null,
          "old_line_content": "                        dateDiffDay(referencePoint.second, *dateInTimeZone);",
          "new_line_content": "            long long distanceFromReferencePoint;",
          "content_same": false
        },
        {
          "line": 580,
          "old_api": "toDurationSinceEpoch",
          "new_api": null,
          "old_text": "elib_get_time_zone_info(\n            durationCount<Seconds>(date.toDurationSinceEpoch()), _tzInfo.get());\n ",
          "new_text": null,
          "old_line_content": "        auto* offset = timelib_get_time_zone_info(",
          "new_line_content": "        int32_t timezoneOffsetFromUTC = 0;",
          "content_same": false
        },
        {
          "line": 581,
          "old_api": "get",
          "new_api": null,
          "old_text": "Info.get());\n",
          "new_text": null,
          "old_line_content": "            durationCount<Seconds>(date.toDurationSinceEpoch()), _tzInfo.get());",
          "new_line_content": "        int result =",
          "content_same": false
        },
        {
          "line": 1092,
          "old_api": "GO_UNREACHABLE_TASSERT",
          "new_api": null,
          "old_text": "GO_UNREACHABLE_TASSERT(5439021);\n ",
          "new_text": null,
          "old_line_content": "                    MONGO_UNREACHABLE_TASSERT(5439021);",
          "new_line_content": "                    distanceFromReferencePoint =",
          "content_same": false
        },
        {
          "line": 1098,
          "old_api": "sert",
          "new_api": null,
          "old_text": "sert(5439004,\n                    \"dateTrunc overflowed\",\n                    !overflow::sub(distanceFromReferencePoint,\n                                   distanceToBinLowerBound(distanceFromReferencePoint, binSize),\n                                   &binLowerBoundFromRefPoint));\n\n",
          "new_text": null,
          "old_line_content": "            uassert(5439004,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1100,
          "old_api": "rflow::sub(distanceFromReferencePoint,\n                                   distanceToBinLowerBound(distanceFromReferencePoint, binSize),\n                                   &binLowerBoundFromRefPoint));",
          "new_api": null,
          "old_text": "rflow::sub(distanceFromReferencePoint,\n                                   distanceToBinLowerBound(distanceFromReferencePoint, binSize),\n                                   &binLowerBoundFromRefPoint));\n",
          "new_text": null,
          "old_line_content": "                    !overflow::sub(distanceFromReferencePoint,",
          "new_line_content": "            // point.",
          "content_same": false
        },
        {
          "line": 1101,
          "old_api": "tanceToBinLowerBound",
          "new_api": null,
          "old_text": "tanceToBinLowerBound(distanceFromReferencePoint, binSize),\n ",
          "new_text": null,
          "old_line_content": "                                   distanceToBinLowerBound(distanceFromReferencePoint, binSize),",
          "new_line_content": "            long long binLowerBoundFromRefPoint;",
          "content_same": false
        },
        {
          "line": 591,
          "old_api": "idateFormat",
          "new_api": null,
          "old_text": "idateFormat(format, kDateToStringFormatMap);\n}",
          "new_text": null,
          "old_line_content": "    return validateFormat(format, kDateToStringFormatMap);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 600,
          "old_api": "tus::OK())",
          "new_api": null,
          "old_text": "tus::OK())\n ",
          "new_text": null,
          "old_line_content": "    if (auto status = outputDateWithFormat(formatted, format, date); status != Status::OK())",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 603,
          "old_api": "str",
          "new_api": null,
          "old_text": "matted.str();\n}",
          "new_text": null,
          "old_line_content": "        return formatted.str();",
          "new_line_content": "    StringBuilder formatted;",
          "content_same": false
        },
        {
          "line": 608,
          "old_api": "stexpr au",
          "new_api": null,
          "old_text": "stexpr au",
          "new_text": null,
          "old_line_content": "constexpr auto kDaysInNonLeapYear = 365LL;",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 609,
          "old_api": "stexpr au",
          "new_api": null,
          "old_text": "stexpr au",
          "new_text": null,
          "old_line_content": "constexpr auto kHoursPerDay = 24LL;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 610,
          "old_api": "stexpr au",
          "new_api": null,
          "old_text": "stexpr au",
          "new_text": null,
          "old_line_content": "constexpr auto kMinutesPerHour = 60LL;",
          "new_line_content": "namespace {",
          "content_same": false
        },
        {
          "line": 1120,
          "old_api": "stexpr lo",
          "new_api": null,
          "old_text": "stexpr lo",
          "new_text": null,
          "old_line_content": "    constexpr long long kReferencePointInUTCMillis = 946684800000LL;  // 2000-01-01T00:00:00.000Z",
          "new_line_content": "                                                          TimeUnit unit,",
          "content_same": false
        },
        {
          "line": 1123,
          "old_api": "utcOffset",
          "new_api": null,
          "old_text": "ezone.utcOffset(\n            Date_t::fromMillisSinceEpoch(kReferencePointInUTCMillis)));\n",
          "new_text": null,
          "old_line_content": "        durationCount<Milliseconds>(timezone.utcOffset(",
          "new_line_content": "    // point value in 'timezone'.",
          "content_same": false
        },
        {
          "line": 1125,
          "old_api": "createFromDateParts",
          "new_api": null,
          "old_text": "ezone.createFromDateParts(2000, 1, 1, 0, 0, 0, 0).toMillisSinceEpoch() ==",
          "new_text": null,
          "old_line_content": "    dassert(timezone.createFromDateParts(2000, 1, 1, 0, 0, 0, 0).toMillisSinceEpoch() ==",
          "new_line_content": "    Date referencePoint{2000, 1, 1};",
          "content_same": false
        },
        {
          "line": 1130,
          "old_api": "stexpr Da",
          "new_api": null,
          "old_text": "stexpr Da",
          "new_text": null,
          "old_line_content": "        constexpr DayOfWeek kReferencePointDayOfWeek{",
          "new_line_content": "            referencePointMillis);",
          "content_same": false
        },
        {
          "line": 1132,
          "old_api": "tic_cast<uint8_t>(kReferencePointDayOfWeek) -",
          "new_api": null,
          "old_text": "tic_cast<uint8_t>(kReferencePointDayOfWeek) -\n",
          "new_text": null,
          "old_line_content": "        int referencePointDayOfWeek = (static_cast<uint8_t>(kReferencePointDayOfWeek) -",
          "new_line_content": "    if (TimeUnit::week == unit) {",
          "content_same": false
        },
        {
          "line": 1133,
          "old_api": "tic_cast<uint8_t>(startOfWeek) +",
          "new_api": null,
          "old_text": "tic_cast<uint8_t>(startOfWeek) + ",
          "new_text": null,
          "old_line_content": "                                       static_cast<uint8_t>(startOfWeek) + kDaysPerWeek) %",
          "new_line_content": "        // Find the nearest to 'referencePoint' first day of the week that is in the future.",
          "content_same": false
        },
        {
          "line": 626,
          "old_api": "tic_cast<int>(timelibTime.m)},",
          "new_api": null,
          "old_text": "tic_cast<int>(timelibTime.m)},\n",
          "new_text": null,
          "old_line_content": "          month{static_cast<int>(timelibTime.m)},",
          "new_line_content": " */",
          "content_same": false
        },
        {
          "line": 627,
          "old_api": "tic_cast<int>(timelibTime.d)} {",
          "new_api": null,
          "old_text": "tic_cast<int>(timelibTime.d)} {",
          "new_text": null,
          "old_line_content": "          dayOfMonth{static_cast<int>(timelibTime.d)} {}",
          "new_line_content": "struct Date {",
          "content_same": false
        },
        {
          "line": 1147,
          "old_api": "e_t::fromMillisSinceEpoch(referencePointMillis), r",
          "new_api": null,
          "old_text": "e_t::fromMillisSinceEpoch(referencePointMillis), r",
          "new_text": null,
          "old_line_content": "    return {Date_t::fromMillisSinceEpoch(referencePointMillis), referencePoint};",
          "new_line_content": "        // 'daysToAdjustBy' days.",
          "content_same": false
        },
        {
          "line": 1155,
          "old_api": "stexpr lo",
          "new_api": null,
          "old_text": "stexpr lo",
          "new_text": null,
          "old_line_content": "    constexpr long long maxDays{",
          "new_line_content": " * Determines if function 'dateAdd()' parameter 'amount' and 'unit' values are valid - the",
          "content_same": false
        },
        {
          "line": 1156,
          "old_api": "::numeric_limits<unsigned long long>::max() /",
          "new_api": null,
          "old_text": "::numeric_limits<unsigned long long>::max() / ",
          "new_text": null,
          "old_line_content": "        std::numeric_limits<unsigned long long>::max() / kMillisecondsPerDay + 1};",
          "new_line_content": " * amount roughly fits the range of Date_t type.",
          "content_same": false
        },
        {
          "line": 1157,
          "old_api": "stexpr au",
          "new_api": null,
          "old_text": "stexpr au",
          "new_text": null,
          "old_line_content": "    constexpr auto maxYears = maxDays / 365 /* minimum number of days per year*/ + 1;",
          "new_line_content": " */",
          "content_same": false
        },
        {
          "line": 1158,
          "old_api": "stexpr au",
          "new_api": null,
          "old_text": "stexpr au",
          "new_text": null,
          "old_line_content": "    constexpr auto maxQuarters = maxYears * kQuartersPerYear;",
          "new_line_content": "bool isDateAddAmountValid(long long amount, TimeUnit unit) {",
          "content_same": false
        },
        {
          "line": 652,
          "old_api": "pYearsSinceReferencePoint",
          "new_api": null,
          "old_text": "pYearsSinceReferencePoint(startYear - 1) +\n",
          "new_text": null,
          "old_line_content": "    return leapYearsSinceReferencePoint(endYear - 1) - leapYearsSinceReferencePoint(startYear - 1) +",
          "new_line_content": " * 'startYear'+1, .., 'endYear'-1. 'startYear' and 'endYear' are expected to be from the range",
          "content_same": false
        },
        {
          "line": 1183,
          "old_api": "GO_UNREACHABLE_TASSERT",
          "new_api": null,
          "old_text": "GO_UNREACHABLE_TASSERT(5976501);\n ",
          "new_text": null,
          "old_line_content": "                MONGO_UNREACHABLE_TASSERT(5976501);",
          "new_line_content": "                return maxMinutes;",
          "content_same": false
        },
        {
          "line": 1192,
          "old_api": "liseconds",
          "new_api": null,
          "old_text": "liseconds(amount);\n ",
          "new_text": null,
          "old_line_content": "        return date + Milliseconds(amount);",
          "new_line_content": "}  // namespace",
          "content_same": false
        },
        {
          "line": 1198,
          "old_api": "sert",
          "new_api": null,
          "old_text": "sert(5976500,\n            str::stream() << \"invalid dateAdd 'amount' parameter value: \" << amount << \" \"\n                          << serializeTimeUnit(unit),\n            isDateAddAmountValid(amount, unit));\n\n",
          "new_text": null,
          "old_line_content": "    uassert(5976500,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1199,
          "old_api": "::stream() <<",
          "new_api": null,
          "old_text": "::stream() <<",
          "new_text": null,
          "old_line_content": "            str::stream() << \"invalid dateAdd 'amount' parameter value: \" << amount << \" \"",
          "new_line_content": "    // Check that 'amount' value is within an acceptable range. If the value is within acceptable",
          "content_same": false
        },
        {
          "line": 1200,
          "old_api": "ializeTimeUnit",
          "new_api": null,
          "old_text": "ializeTimeUnit(unit),\n ",
          "new_text": null,
          "old_line_content": "                          << serializeTimeUnit(unit),",
          "new_line_content": "    // range, then the addition algorithm is expected to not overflow. The final determination if",
          "content_same": false
        },
        {
          "line": 1201,
          "old_api": "ateAddAmountValid",
          "new_api": null,
          "old_text": "ateAddAmountValid(amount, unit));\n",
          "new_text": null,
          "old_line_content": "            isDateAddAmountValid(amount, unit));",
          "new_line_content": "    // the result can be represented as Date_t is done after the addition result is computed.",
          "content_same": false
        },
        {
          "line": 693,
          "old_api": "rter",
          "new_api": null,
          "old_text": "rter(startInstant.month) +\n",
          "new_text": null,
          "old_line_content": "    return quarter(endInstant.month) - quarter(startInstant.month) +",
          "new_line_content": "inline int quarter(int month) {",
          "content_same": false
        },
        {
          "line": 694,
          "old_api": "eDiffYear",
          "new_api": null,
          "old_text": "eDiffYear(startInstant, endInstant) * ",
          "new_text": null,
          "old_line_content": "        dateDiffYear(startInstant, endInstant) * kQuartersPerYear;",
          "new_line_content": "    return (month - 1) / kQuarterLengthInMonths;",
          "content_same": false
        },
        {
          "line": 1211,
          "old_api": "value",
          "new_api": null,
          "old_text": "ervalInDays.value();\n ",
          "new_text": null,
          "old_line_content": "        amount = intervalInDays.value();",
          "new_line_content": "    // Check if an adjustment for the last day of month is necessary.",
          "content_same": false
        },
        {
          "line": 701,
          "old_api": "elib_day_of_year",
          "new_api": null,
          "old_text": "elib_day_of_year(endInstant.year, endInstant.month, endInstant.dayOfMonth) -\n",
          "new_text": null,
          "old_line_content": "    return timelib_day_of_year(endInstant.year, endInstant.month, endInstant.dayOfMonth) -",
          "new_line_content": "    return endInstant.month - startInstant.month +",
          "content_same": false
        },
        {
          "line": 1214,
          "old_api": "TimelibRelTime",
          "new_api": null,
          "old_text": "TimelibRelTime(unit, amount);\n\n",
          "new_text": null,
          "old_line_content": "    auto interval = getTimelibRelTime(unit, amount);",
          "new_line_content": "        unit = TimeUnit::day;",
          "content_same": false
        },
        {
          "line": 703,
          "old_api": "sBetweenYears",
          "new_api": null,
          "old_text": "sBetweenYears(startInstant.year, endInstant.year);\n}",
          "new_text": null,
          "old_line_content": "        daysBetweenYears(startInstant.year, endInstant.year);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1221,
          "old_api": "isUtcOffsetZone",
          "new_api": null,
          "old_text": "ezone.isUtcOffsetZone() ||",
          "new_text": null,
          "old_line_content": "    if (timezone.isUtcZone() || timezone.isUtcOffsetZone() || interval->d || interval->m ||",
          "new_line_content": "    // For time units of day or larger perform the computation in the local timezone. This",
          "content_same": false
        },
        {
          "line": 1223,
          "old_api": "get",
          "new_api": null,
          "old_text": "erval.get());\n",
          "new_text": null,
          "old_line_content": "        timeAfterAddition = timelib_add(localTime.get(), interval.get());",
          "new_line_content": "    // the same in the result date regardless of transitions from DST to Standard Time and vice",
          "content_same": false
        },
        {
          "line": 712,
          "old_api": "elib_iso_day_of_week",
          "new_api": null,
          "old_text": "elib_iso_day_of_week(timeInstant.year, timeInstant.month, timeInstant.dayOfMonth) -\n",
          "new_text": null,
          "old_line_content": "    return (timelib_iso_day_of_week(timeInstant.year, timeInstant.month, timeInstant.dayOfMonth) -",
          "new_line_content": " * day 'startOfWeek'. Returns 0 for the first day, and 6 - for the last.",
          "content_same": false
        },
        {
          "line": 713,
          "old_api": "tic_cast<uint8_t>(startOfWeek) +",
          "new_api": null,
          "old_text": "tic_cast<uint8_t>(startOfWeek) + ",
          "new_text": null,
          "old_line_content": "            static_cast<uint8_t>(startOfWeek) + kDaysPerWeek) %",
          "new_line_content": " */",
          "content_same": false
        },
        {
          "line": 1233,
          "old_api": "ateTimelibTime",
          "new_api": null,
          "old_text": "ateTimelibTime();\n ",
          "new_text": null,
          "old_line_content": "        auto utcTime = createTimelibTime();",
          "new_line_content": "        //    {$dateAdd: { startDate: ISODate(\"2020-11-01T05:50:02Z\"),",
          "content_same": false
        },
        {
          "line": 722,
          "old_api": "OfWeek",
          "new_api": null,
          "old_text": "OfWeek(startInstant, startOfWeek) -\n",
          "new_text": null,
          "old_line_content": "    return (dateDiffDay(startInstant, endInstant) + dayOfWeek(startInstant, startOfWeek) -",
          "new_line_content": " * Determines a number of weeks between time instant 'startInstant' and 'endInstant' when the first",
          "content_same": false
        },
        {
          "line": 723,
          "old_api": "OfWeek",
          "new_api": null,
          "old_text": "OfWeek(endInstant, startOfWeek)) /",
          "new_text": null,
          "old_line_content": "            dayOfWeek(endInstant, startOfWeek)) /",
          "new_line_content": " * day of the week is 'startOfWeek'.",
          "content_same": false
        },
        {
          "line": 1234,
          "old_api": "onds",
          "new_api": null,
          "old_text": "onds(date));\n",
          "new_text": null,
          "old_line_content": "        timelib_unixtime2gmt(utcTime.get(), seconds(date));",
          "new_line_content": "        //     unit: \"hour\", amount: 1, timezone: \"America/New_York\"}}",
          "content_same": false
        },
        {
          "line": 1236,
          "old_api": "get",
          "new_api": null,
          "old_text": "erval.get());\n",
          "new_text": null,
          "old_line_content": "        timeAfterAddition = timelib_add(utcTime.get(), interval.get());",
          "new_line_content": "        // and ISODate(\"2020-11-01T06:50:02Z\") when we call timelib_add(utcTime ...).",
          "content_same": false
        },
        {
          "line": 728,
          "old_api": "eDiffDay",
          "new_api": null,
          "old_text": "eDiffDay(*startInstant, *endInstant) * ",
          "new_text": null,
          "old_line_content": "    return endInstant->h - startInstant->h + dateDiffDay(*startInstant, *endInstant) * kHoursPerDay;",
          "new_line_content": "        kDaysPerWeek;",
          "content_same": false
        },
        {
          "line": 1241,
          "old_api": "elib_time_dtor",
          "new_api": null,
          "old_text": "elib_time_dtor(timeAfterAddition);\n ",
          "new_text": null,
          "old_line_content": "        timelib_time_dtor(timeAfterAddition);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1242,
          "old_api": "serted",
          "new_api": null,
          "old_text": "serted(5166406, \"dateAdd overflowed\");\n ",
          "new_text": null,
          "old_line_content": "        uasserted(5166406, \"dateAdd overflowed\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 731,
          "old_api": "eDiffHourWithoutUTCOffsetCorrection",
          "new_api": null,
          "old_text": "eDiffHourWithoutUTCOffsetCorrection(startInstant, endInstant) +\n",
          "new_text": null,
          "old_line_content": "    return dateDiffHourWithoutUTCOffsetCorrection(startInstant, endInstant) +",
          "new_line_content": "                                                        timelib_time* endInstant) {",
          "content_same": false
        },
        {
          "line": 1247,
          "old_api": "roseconds",
          "new_api": null,
          "old_text": "roseconds(timeAfterAddition->us)));",
          "new_text": null,
          "old_line_content": "        durationCount<Milliseconds>(Microseconds(timeAfterAddition->us)));",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1248,
          "old_api": "elib_time_dtor",
          "new_api": null,
          "old_text": "elib_time_dtor(timeAfterAddition);\n ",
          "new_text": null,
          "old_line_content": "    timelib_time_dtor(timeAfterAddition);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 737,
          "old_api": "eDiffHourWithoutUTCOffsetCorrection",
          "new_api": null,
          "old_text": "eDiffHourWithoutUTCOffsetCorrection(startInstant, endInstant) * ",
          "new_text": null,
          "old_line_content": "        dateDiffHourWithoutUTCOffsetCorrection(startInstant, endInstant) * kMinutesPerHour;",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 740,
          "old_api": "eDiffMinuteWithoutUTCOffsetCorrection",
          "new_api": null,
          "old_text": "eDiffMinuteWithoutUTCOffsetCorrection(startInstant, endInstant) +\n",
          "new_text": null,
          "old_line_content": "    return dateDiffMinuteWithoutUTCOffsetCorrection(startInstant, endInstant) +",
          "new_line_content": "    return endInstant->i - startInstant->i +",
          "content_same": false
        },
        {
          "line": 1253,
          "old_api": "stexpr mi",
          "new_api": null,
          "old_text": "stexpr mi",
          "new_text": null,
          "old_line_content": "    auto constexpr millisecond = 1;",
          "new_line_content": "    return returnDate;",
          "content_same": false
        },
        {
          "line": 1254,
          "old_api": "stexpr se",
          "new_api": null,
          "old_text": "stexpr se",
          "new_text": null,
          "old_line_content": "    auto constexpr second = millisecond * kMillisecondsPerSecond;",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1255,
          "old_api": "stexpr mi",
          "new_api": null,
          "old_text": "stexpr mi",
          "new_text": null,
          "old_line_content": "    auto constexpr minute = second * kSecondsPerMinute;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1256,
          "old_api": "stexpr ho",
          "new_api": null,
          "old_text": "stexpr ho",
          "new_text": null,
          "old_line_content": "    auto constexpr hour = minute * kMinutesPerHour;",
          "new_line_content": "StatusWith<long long> timeUnitTypicalMilliseconds(TimeUnit unit) {",
          "content_same": false
        },
        {
          "line": 746,
          "old_api": "OffsetCorrectionForSeconds",
          "new_api": null,
          "old_text": "OffsetCorrectionForSeconds(startInstant, endInstant);\n}",
          "new_text": null,
          "old_line_content": "        utcOffsetCorrectionForSeconds(startInstant, endInstant);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 752,
          "old_api": "toMillisSinceEpoch",
          "new_api": null,
          "old_text": "rtDate.toMillisSinceEpoch(), &",
          "new_text": null,
          "old_line_content": "            !overflow::sub(endDate.toMillisSinceEpoch(), startDate.toMillisSinceEpoch(), &result));",
          "new_line_content": "inline long long dateDiffMillisecond(Date_t startDate, Date_t endDate) {",
          "content_same": false
        },
        {
          "line": 1276,
          "old_api": "tus",
          "new_api": null,
          "old_text": "tus(ErrorCodes::BadValue,\n                          str::stream() << \"TimeUnit is too big: \" << serializeTimeUnit(unit));\n ",
          "new_text": null,
          "old_line_content": "            return Status(ErrorCodes::BadValue,",
          "new_line_content": "            return week;",
          "content_same": false
        },
        {
          "line": 1277,
          "old_api": "ializeTimeUnit",
          "new_api": null,
          "old_text": "ializeTimeUnit(unit));\n",
          "new_text": null,
          "old_line_content": "                          str::stream() << \"TimeUnit is too big: \" << serializeTimeUnit(unit));",
          "new_line_content": "        case TimeUnit::month:",
          "content_same": false
        },
        {
          "line": 1279,
          "old_api": "GO_UNREACHABLE_TASSERT",
          "new_api": null,
          "old_text": "GO_UNREACHABLE_TASSERT(5423303);\n}",
          "new_text": null,
          "old_line_content": "    MONGO_UNREACHABLE_TASSERT(5423303);",
          "new_line_content": "        case TimeUnit::year:",
          "content_same": false
        },
        {
          "line": 1287,
          "old_api": "sert",
          "new_api": null,
          "old_text": "sert(5439005, \"expected binSize > 0\", binSize > 0);\n\n",
          "new_text": null,
          "old_line_content": "    uassert(5439005, \"expected binSize > 0\", binSize > 0);",
          "new_line_content": "                    TimeUnit unit,",
          "content_same": false
        },
        {
          "line": 1290,
          "old_api": "aultReferencePointForDateTrunc",
          "new_api": null,
          "old_text": "aultReferencePointForDateTrunc(timezone, unit, startOfWeek)};\n",
          "new_text": null,
          "old_line_content": "    const auto referencePoint{defaultReferencePointForDateTrunc(timezone, unit, startOfWeek)};",
          "new_line_content": "                    DayOfWeek startOfWeek) {",
          "content_same": false
        },
        {
          "line": 795,
          "old_api": "eDiffMillisecond",
          "new_api": null,
          "old_text": "eDiffMillisecond(startDate, endDate);\n ",
          "new_text": null,
          "old_line_content": "        return dateDiffMillisecond(startDate, endDate);",
          "new_line_content": "                   TimeUnit unit,",
          "content_same": false
        },
        {
          "line": 800,
          "old_api": "getTimelibTime",
          "new_api": null,
          "old_text": "ezone.getTimelibTime(endDate);\n ",
          "new_text": null,
          "old_line_content": "    auto endDateInTimeZone = timezone.getTimelibTime(endDate);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 805,
          "old_api": "eDiffQuarter",
          "new_api": null,
          "old_text": "eDiffQuarter(*startDateInTimeZone, *endDateInTimeZone);\n ",
          "new_text": null,
          "old_line_content": "            return dateDiffQuarter(*startDateInTimeZone, *endDateInTimeZone);",
          "new_line_content": "    switch (unit) {",
          "content_same": false
        },
        {
          "line": 824,
          "old_api": "find",
          "new_api": null,
          "old_text": "eUnitNameToTimeUnitMap.find(unitName);\n ",
          "new_text": null,
          "old_line_content": "    auto iterator = timeUnitNameToTimeUnitMap.find(unitName);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 825,
          "old_api": "end",
          "new_api": null,
          "old_text": "sert(ErrorCodes::FailedToParse,\n            str::stream() << \"unknown time unit value: \" << unitName,\n            iterator != timeUnitNameToTimeUnitMap.end());\n ",
          "new_text": null,
          "old_line_content": "    uassert(ErrorCodes::FailedToParse,",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 826,
          "old_api": "::stream() <<",
          "new_api": null,
          "old_text": "::stream() <<",
          "new_text": null,
          "old_line_content": "            str::stream() << \"unknown time unit value: \" << unitName,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 827,
          "old_api": "end",
          "new_api": null,
          "old_text": "eUnitNameToTimeUnitMap.end());\n",
          "new_text": null,
          "old_line_content": "            iterator != timeUnitNameToTimeUnitMap.end());",
          "new_line_content": "TimeUnit parseTimeUnit(StringData unitName) {",
          "content_same": false
        },
        {
          "line": 832,
          "old_api": "end",
          "new_api": null,
          "old_text": "eUnitNameToTimeUnitMap.end();\n}",
          "new_text": null,
          "old_line_content": "    return timeUnitNameToTimeUnitMap.find(unitName) != timeUnitNameToTimeUnitMap.end();",
          "new_line_content": "    return iterator->second;",
          "content_same": false
        },
        {
          "line": 856,
          "old_api": "GO_UNREACHABLE_TASSERT",
          "new_api": null,
          "old_text": "GO_UNREACHABLE_TASSERT(5339900);\n}",
          "new_text": null,
          "old_line_content": "    MONGO_UNREACHABLE_TASSERT(5339900);",
          "new_line_content": "            return \"second\"_sd;",
          "content_same": false
        },
        {
          "line": 861,
          "old_api": "::toLower(dayOfWeek));",
          "new_api": null,
          "old_text": "::toLower(dayOfWeek));\n",
          "new_text": null,
          "old_line_content": "    auto iterator = dayOfWeekNameToDayOfWeekMap.find(str::toLower(dayOfWeek));",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 862,
          "old_api": "end",
          "new_api": null,
          "old_text": "sert(ErrorCodes::FailedToParse,\n            str::stream() << \"unknown day of week value: \" << dayOfWeek,\n            iterator != dayOfWeekNameToDayOfWeekMap.end());\n ",
          "new_text": null,
          "old_line_content": "    uassert(ErrorCodes::FailedToParse,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 863,
          "old_api": "::stream() <<",
          "new_api": null,
          "old_text": "::stream() <<",
          "new_text": null,
          "old_line_content": "            str::stream() << \"unknown day of week value: \" << dayOfWeek,",
          "new_line_content": "DayOfWeek parseDayOfWeek(StringData dayOfWeek) {",
          "content_same": false
        },
        {
          "line": 864,
          "old_api": "end",
          "new_api": null,
          "old_text": "OfWeekNameToDayOfWeekMap.end());\n",
          "new_text": null,
          "old_line_content": "            iterator != dayOfWeekNameToDayOfWeekMap.end());",
          "new_line_content": "    // Perform case-insensitive lookup.",
          "content_same": false
        },
        {
          "line": 870,
          "old_api": "::toLower(dayOfWeek)) !",
          "new_api": null,
          "old_text": "::toLower(dayOfWeek)) !",
          "new_text": null,
          "old_line_content": "    return dayOfWeekNameToDayOfWeekMap.find(str::toLower(dayOfWeek)) !=",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 871,
          "old_api": "end",
          "new_api": null,
          "old_text": "OfWeekNameToDayOfWeekMap.end();\n}",
          "new_text": null,
          "old_line_content": "        dayOfWeekNameToDayOfWeekMap.end();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 884,
          "old_api": "ateTimelibRelTime",
          "new_api": null,
          "old_text": "ateTimelibRelTime();\n ",
          "new_text": null,
          "old_line_content": "    auto relTime = createTimelibRelTime();",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 911,
          "old_api": "liseconds",
          "new_api": null,
          "old_text": "liseconds(amount));\n",
          "new_text": null,
          "old_line_content": "            relTime->us = durationCount<Microseconds>(Milliseconds(amount));",
          "new_line_content": "        case TimeUnit::second:",
          "content_same": false
        },
        {
          "line": 974,
          "old_api": "Months",
          "new_api": null,
          "old_text": "Months(tm->y, tm->m, amount);\n ",
          "new_text": null,
          "old_line_content": "    auto [resYear, resMonth] = addMonths(tm->y, tm->m, amount);",
          "new_line_content": "        unit = TimeUnit::month;",
          "content_same": false
        },
        {
          "line": 975,
          "old_api": "elib_days_in_month",
          "new_api": null,
          "old_text": "elib_days_in_month(resYear, resMonth);\n ",
          "new_text": null,
          "old_line_content": "    auto maxResDay = timelib_days_in_month(resYear, resMonth);",
          "new_line_content": "        amount *= kQuarterLengthInMonths;",
          "content_same": false
        },
        {
          "line": 976,
          "old_api": "::min(tm->d, maxResDay);",
          "new_api": null,
          "old_text": "::min(tm->d, maxResDay);\n ",
          "new_text": null,
          "old_line_content": "    auto targetDay = std::min(tm->d, maxResDay);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 977,
          "old_api": "elib_day_of_year",
          "new_api": null,
          "old_text": "elib_day_of_year(resYear, resMonth, targetDay) -\n",
          "new_text": null,
          "old_line_content": "    long long intervalInDays = timelib_day_of_year(resYear, resMonth, targetDay) -",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 990,
          "old_api": "sert",
          "new_api": null,
          "old_text": "sert(5439019, \"expected binSize > 0\", binSize > 0);\n ",
          "new_text": null,
          "old_line_content": "    tassert(5439019, \"expected binSize > 0\", binSize > 0);",
          "new_line_content": " *",
          "content_same": false
        },
        {
          "line": 1005,
          "old_api": "sert",
          "new_api": null,
          "old_text": "sert(5439020,\n            \"expected binSizeMillis to be convertable to a 64-bit signed integer\",\n            binSizeMillis <=\n                static_cast<unsigned long long>(std::numeric_limits<long long>::max()));\n ",
          "new_text": null,
          "old_line_content": "    tassert(5439020,",
          "new_line_content": " */",
          "content_same": false
        },
        {
          "line": 1008,
          "old_api": "::numeric_limits<long long>::max()));",
          "new_api": null,
          "old_text": "::numeric_limits<long long>::max()));",
          "new_text": null,
          "old_line_content": "                static_cast<unsigned long long>(std::numeric_limits<long long>::max()));",
          "new_line_content": "                                 unsigned long long binSizeMillis) {",
          "content_same": false
        },
        {
          "line": 1010,
          "old_api": "toMillisSinceEpoch",
          "new_api": null,
          "old_text": "sert(5439000,\n            \"dateTrunc overflowed\",\n            !overflow::sub(\n                date.toMillisSinceEpoch(), referencePoint.toMillisSinceEpoch(), &shiftedDate));\n ",
          "new_text": null,
          "old_line_content": "    uassert(5439000,",
          "new_line_content": "            \"expected binSizeMillis to be convertable to a 64-bit signed integer\",",
          "content_same": false
        },
        {
          "line": 1013,
          "old_api": "toMillisSinceEpoch",
          "new_api": null,
          "old_text": "erencePoint.toMillisSinceEpoch(), &",
          "new_text": null,
          "old_line_content": "                date.toMillisSinceEpoch(), referencePoint.toMillisSinceEpoch(), &shiftedDate));",
          "new_line_content": "    long long shiftedDate;",
          "content_same": false
        },
        {
          "line": 1015,
          "old_api": "toMillisSinceEpoch",
          "new_api": null,
          "old_text": "sert(5439001,\n            \"dateTrunc overflowed\",\n            !overflow::sub(date.toMillisSinceEpoch(),\n                           distanceToBinLowerBound(shiftedDate, binSizeMillis),\n                           &result));\n ",
          "new_text": null,
          "old_line_content": "    uassert(5439001,",
          "new_line_content": "            \"dateTrunc overflowed\",",
          "content_same": false
        },
        {
          "line": 1018,
          "old_api": "tanceToBinLowerBound",
          "new_api": null,
          "old_text": "tanceToBinLowerBound(shiftedDate, binSizeMillis),\n ",
          "new_text": null,
          "old_line_content": "                           distanceToBinLowerBound(shiftedDate, binSizeMillis),",
          "new_line_content": "    long long result;",
          "content_same": false
        },
        {
          "line": 1020,
          "old_api": "e_t::fromMillisSinceEpoch(result);\n}",
          "new_api": null,
          "old_text": "e_t::fromMillisSinceEpoch(result);\n}",
          "new_text": null,
          "old_line_content": "    return Date_t::fromMillisSinceEpoch(result);",
          "new_line_content": "            \"dateTrunc overflowed\",",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 41,
      "total_additions": 107,
      "total_deletions": 107,
      "total_api_changes": 255
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 9,
        "api_related_lines": 255,
        "non_api_lines": 3,
        "non_api_line_numbers": [
          584,
          585,
          586
        ]
      }
    },
    "api_calls_before": 390,
    "api_calls_after": 390,
    "diff_info": {
      "added_lines": 9,
      "removed_lines": 5,
      "total_diff_lines": 26
    }
  }
}
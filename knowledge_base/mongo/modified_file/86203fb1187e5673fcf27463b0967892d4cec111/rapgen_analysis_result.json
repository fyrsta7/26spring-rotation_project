{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/mongo/modified_file/86203fb1187e5673fcf27463b0967892d4cec111",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/mongo/modified_file/86203fb1187e5673fcf27463b0967892d4cec111/before.cpp",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/mongo/modified_file/86203fb1187e5673fcf27463b0967892d4cec111/after.cpp",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/mongo/modified_file/86203fb1187e5673fcf27463b0967892d4cec111/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 1589,
          "old_api": "appendArray",
          "new_api": "subarrayStart",
          "old_text": "b.appendArray(sname, sub)",
          "new_text": "b.subarrayStart(sname)",
          "old_line_content": "            b.appendArray(sname, sub);",
          "new_line_content": "            BSONObjBuilder arrBuilder(b.subarrayStart(sname));",
          "content_same": false
        },
        {
          "line": 1593,
          "old_api": "NumberValue",
          "new_api": "BSONObjBuilder::numStr(i)",
          "old_text": "v8::Date::Cast(*value)->NumberValue()",
          "new_text": "BSONObjBuilder::numStr(i)",
          "old_line_content": "            long long dateval = (long long)(v8::Date::Cast(*value)->NumberValue());",
          "new_line_content": "                const string name = BSONObjBuilder::numStr(i);",
          "content_same": false
        },
        {
          "line": 1594,
          "old_api": "Date_t",
          "new_api": "Get",
          "old_text": "Date_t((unsigned long long) dateval)",
          "new_text": "array->Get(i)",
          "old_line_content": "            b.appendDate(sname, Date_t((unsigned long long) dateval));",
          "new_line_content": "                v8ToMongoElement(arrBuilder, name, array->Get(i), depth+1, originalParent);",
          "content_same": false
        },
        {
          "line": 1599,
          "old_api": "IsObject",
          "new_api": "NumberValue",
          "old_text": "value->IsObject()",
          "new_text": "v8::Date::Cast(*value)->NumberValue()",
          "old_line_content": "        if (value->IsObject()) {",
          "new_line_content": "            long long dateval = (long long)(v8::Date::Cast(*value)->NumberValue());",
          "content_same": false
        },
        {
          "line": 1600,
          "old_api": "v8ToMongoObject",
          "new_api": "Date_t",
          "old_text": "v8ToMongoObject(b, sname, value, depth, originalParent)",
          "new_text": "Date_t((unsigned long long) dateval)",
          "old_line_content": "            v8ToMongoObject(b, sname, value, depth, originalParent);",
          "new_line_content": "            b.appendDate(sname, Date_t((unsigned long long) dateval));",
          "content_same": false
        },
        {
          "line": 1605,
          "old_api": "ToBoolean",
          "new_api": "IsObject",
          "old_text": "value->ToBoolean()->Value()",
          "new_text": "value->IsObject()",
          "old_line_content": "            b.appendBool(sname, value->ToBoolean()->Value());",
          "new_line_content": "        if (value->IsObject()) {",
          "content_same": false
        },
        {
          "line": 1622,
          "old_api": "v8::String::New(\"_bson\")",
          "new_api": "str::stream()",
          "old_text": "v8::String::New(\"_bson\")",
          "new_text": "str::stream()",
          "old_line_content": "        if (o->Has(v8::String::New(\"_bson\"))) {",
          "new_line_content": "        uasserted(16662, str::stream() << \"unable to convert JavaScript property to mongo element \"",
          "content_same": false
        },
        {
          "line": 1639,
          "old_api": "Length",
          "new_api": "v8::String::New(\"_id\")",
          "old_text": "names->Length()",
          "new_text": "v8::String::New(\"_id\")",
          "old_line_content": "        for (unsigned int i=0; i<names->Length(); i++) {",
          "new_line_content": "            if (o->HasRealNamedProperty(v8::String::New(\"_id\"))) {",
          "content_same": false
        },
        {
          "line": 1640,
          "old_api": "Get",
          "new_api": "v8::String::New(\"_id\")",
          "old_text": "names->Get(i)->ToString()",
          "new_text": "v8::String::New(\"_id\")",
          "old_line_content": "            v8::Local<v8::String> name = names->Get(i)->ToString();",
          "new_line_content": "                v8ToMongoElement(b, \"_id\", o->Get(v8::String::New(\"_id\")), 0, &originalBSON);",
          "content_same": false
        },
        {
          "line": 1646,
          "old_api": "v8ToMongoElement",
          "new_api": "Get",
          "old_text": "v8ToMongoElement(b, sname, value, depth + 1, &originalBSON)",
          "new_text": "names->Get(i)->ToString()",
          "old_line_content": "            v8ToMongoElement(b, sname, value, depth + 1, &originalBSON);",
          "new_line_content": "            v8::Local<v8::String> name = names->Get(i)->ToString();",
          "content_same": false
        },
        {
          "line": 1648,
          "old_api": "obj",
          "new_api": "toSTLString",
          "old_text": "b.obj()",
          "new_text": "toSTLString(name)",
          "old_line_content": "        return b.obj();",
          "new_line_content": "            const string sname = toSTLString(name);",
          "content_same": false
        },
        {
          "line": 1654,
          "old_api": "v8StringData",
          "new_api": "obj",
          "old_text": "v8StringData(name)",
          "new_text": "b.obj()",
          "old_line_content": "        return v8::Function::Cast(*(v8::Context::GetCurrent()->Global()->Get(v8StringData(name))));",
          "new_line_content": "        return b.obj();",
          "content_same": false
        },
        {
          "line": 1692,
          "old_api": "v8::V8::GetVersion()",
          "new_api": "str",
          "old_text": "v8::V8::GetVersion()",
          "new_text": "ss.str()",
          "old_line_content": "        return handle_scope.Close(v8::String::New(v8::V8::GetVersion()));",
          "new_line_content": "        Logstream::logLockless(ss.str());",
          "content_same": false
        },
        {
          "line": 1698,
          "old_api": "v8::V8::LowMemoryNotification()",
          "new_api": "v8::V8::GetVersion()",
          "old_text": "v8::V8::LowMemoryNotification()",
          "new_text": "v8::V8::GetVersion()",
          "old_line_content": "        v8::V8::LowMemoryNotification();",
          "new_line_content": "        return handle_scope.Close(v8::String::New(v8::V8::GetVersion()));",
          "content_same": false
        },
        {
          "line": 1704,
          "old_api": "v8AssertionException",
          "new_api": "v8::V8::LowMemoryNotification()",
          "old_text": "v8AssertionException(\"startCpuProfiler takes a string argument\")",
          "new_text": "v8::V8::LowMemoryNotification()",
          "old_line_content": "            return v8AssertionException(\"startCpuProfiler takes a string argument\");",
          "new_line_content": "        v8::V8::LowMemoryNotification();",
          "content_same": false
        },
        {
          "line": 1712,
          "old_api": "v8AssertionException",
          "new_api": "ToString",
          "old_text": "v8AssertionException(\"stopCpuProfiler takes a string argument\")",
          "new_text": "args[0]->ToString()",
          "old_line_content": "            return v8AssertionException(\"stopCpuProfiler takes a string argument\");",
          "new_line_content": "        scope->_cpuProfiler.start(*v8::String::Utf8Value(args[0]->ToString()));",
          "content_same": false
        },
        {
          "line": 1720,
          "old_api": "v8AssertionException",
          "new_api": "ToString",
          "old_text": "v8AssertionException(\"getCpuProfile takes a string argument\")",
          "new_text": "args[0]->ToString()",
          "old_line_content": "            return v8AssertionException(\"getCpuProfile takes a string argument\");",
          "new_line_content": "        scope->_cpuProfiler.stop(*v8::String::Utf8Value(args[0]->ToString()));",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 1664,
          "old_api": null,
          "new_api": "getNamedCons",
          "old_text": null,
          "new_text": "getNamedCons(\"ObjectId\")",
          "old_line_content": "        bool first = true;",
          "new_line_content": "        return getNamedCons(\"ObjectId\");",
          "content_same": false
        },
        {
          "line": 1671,
          "old_api": null,
          "new_api": "Length",
          "old_text": null,
          "new_text": "args.Length()",
          "old_line_content": "            if (!*args[i]) {",
          "new_line_content": "        for (int i = 0; i < args.Length(); i++) {",
          "content_same": false
        },
        {
          "line": 1682,
          "old_api": null,
          "new_api": "IsExternal",
          "old_text": null,
          "new_text": "args[i]->IsExternal()",
          "old_line_content": "            v8::String::Utf8Value str(args[i]);",
          "new_line_content": "            if (args[i]->IsExternal()) {",
          "content_same": false
        },
        {
          "line": 1693,
          "old_api": null,
          "new_api": "v8::Undefined()",
          "old_text": null,
          "new_text": "v8::Undefined()",
          "old_line_content": "    }",
          "new_line_content": "        return handle_scope.Close(v8::Undefined());",
          "content_same": false
        },
        {
          "line": 1705,
          "old_api": null,
          "new_api": "v8::Undefined()",
          "old_text": null,
          "new_text": "v8::Undefined()",
          "old_line_content": "        }",
          "new_line_content": "        return v8::Undefined();",
          "content_same": false
        },
        {
          "line": 1709,
          "old_api": null,
          "new_api": "IsString",
          "old_text": null,
          "new_text": "args[0]->IsString()",
          "old_line_content": "",
          "new_line_content": "        if (args.Length() != 1 || !args[0]->IsString()) {",
          "content_same": false
        },
        {
          "line": 1710,
          "old_api": null,
          "new_api": "v8AssertionException",
          "old_text": null,
          "new_text": "v8AssertionException(\"startCpuProfiler takes a string argument\")",
          "old_line_content": "    v8::Handle<v8::Value> V8Scope::stopCpuProfiler(V8Scope* scope, const v8::Arguments& args) {",
          "new_line_content": "            return v8AssertionException(\"startCpuProfiler takes a string argument\");",
          "content_same": false
        },
        {
          "line": 1713,
          "old_api": null,
          "new_api": "v8::Undefined()",
          "old_text": null,
          "new_text": "v8::Undefined()",
          "old_line_content": "        }",
          "new_line_content": "        return v8::Undefined();",
          "content_same": false
        },
        {
          "line": 1717,
          "old_api": null,
          "new_api": "IsString",
          "old_text": null,
          "new_text": "args[0]->IsString()",
          "old_line_content": "",
          "new_line_content": "        if (args.Length() != 1 || !args[0]->IsString()) {",
          "content_same": false
        },
        {
          "line": 1590,
          "old_api": null,
          "new_api": "value.As<v8::Array>()",
          "old_text": null,
          "new_text": "value.As<v8::Array>()",
          "old_line_content": "            return;",
          "new_line_content": "            v8::Handle<v8::Array> array = value.As<v8::Array>();",
          "content_same": false
        },
        {
          "line": 1591,
          "old_api": null,
          "new_api": "Length",
          "old_text": null,
          "new_text": "array->Length()",
          "old_line_content": "        }",
          "new_line_content": "            const int len = array->Length();",
          "content_same": false
        },
        {
          "line": 1718,
          "old_api": null,
          "new_api": "v8AssertionException",
          "old_text": null,
          "new_text": "v8AssertionException(\"stopCpuProfiler takes a string argument\")",
          "old_line_content": "    v8::Handle<v8::Value> V8Scope::getCpuProfile(V8Scope* scope, const v8::Arguments& args) {",
          "new_line_content": "            return v8AssertionException(\"stopCpuProfiler takes a string argument\");",
          "content_same": false
        },
        {
          "line": 1721,
          "old_api": null,
          "new_api": "v8::Undefined()",
          "old_text": null,
          "new_text": "v8::Undefined()",
          "old_line_content": "        }",
          "new_line_content": "        return v8::Undefined();",
          "content_same": false
        },
        {
          "line": 1725,
          "old_api": null,
          "new_api": "IsString",
          "old_text": null,
          "new_text": "args[0]->IsString()",
          "old_line_content": "",
          "new_line_content": "        if (args.Length() != 1 || !args[0]->IsString()) {",
          "content_same": false
        },
        {
          "line": 1598,
          "old_api": null,
          "new_api": "IsDate",
          "old_text": null,
          "new_text": "value->IsDate()",
          "old_line_content": "            return;",
          "new_line_content": "        if (value->IsDate()) {",
          "content_same": false
        },
        {
          "line": 1726,
          "old_api": null,
          "new_api": "v8AssertionException",
          "old_text": null,
          "new_text": "v8AssertionException(\"getCpuProfile takes a string argument\")",
          "old_line_content": "} // namespace mongo",
          "new_line_content": "            return v8AssertionException(\"getCpuProfile takes a string argument\");",
          "content_same": false
        },
        {
          "line": 1728,
          "old_api": null,
          "new_api": "fetch",
          "old_text": null,
          "new_text": "scope->_cpuProfiler.fetch(\n                *v8::String::Utf8Value(args[0]->ToString()))",
          "old_line_content": "",
          "new_line_content": "        return scope->mongoToLZV8(scope->_cpuProfiler.fetch(",
          "content_same": false
        },
        {
          "line": 1729,
          "old_api": null,
          "new_api": "ToString",
          "old_text": null,
          "new_text": "args[0]->ToString()",
          "old_line_content": "",
          "new_line_content": "                *v8::String::Utf8Value(args[0]->ToString())));",
          "content_same": false
        },
        {
          "line": 1603,
          "old_api": null,
          "new_api": "IsExternal",
          "old_text": null,
          "new_text": "value->IsExternal()",
          "old_line_content": "",
          "new_line_content": "        if (value->IsExternal())",
          "content_same": false
        },
        {
          "line": 1606,
          "old_api": null,
          "new_api": "v8ToMongoObject",
          "old_text": null,
          "new_text": "v8ToMongoObject(b, sname, value, depth, originalParent)",
          "old_line_content": "            return;",
          "new_line_content": "            v8ToMongoObject(b, sname, value, depth, originalParent);",
          "content_same": false
        },
        {
          "line": 1610,
          "old_api": null,
          "new_api": "IsBoolean",
          "old_text": null,
          "new_text": "value->IsBoolean()",
          "old_line_content": "            return;",
          "new_line_content": "        if (value->IsBoolean()) {",
          "content_same": false
        },
        {
          "line": 1611,
          "old_api": null,
          "new_api": "ToBoolean",
          "old_text": null,
          "new_text": "value->ToBoolean()->Value()",
          "old_line_content": "        }",
          "new_line_content": "            b.appendBool(sname, value->ToBoolean()->Value());",
          "content_same": false
        },
        {
          "line": 1614,
          "old_api": null,
          "new_api": "IsUndefined",
          "old_text": null,
          "new_text": "value->IsUndefined()",
          "old_line_content": "            return;",
          "new_line_content": "        else if (value->IsUndefined()) {",
          "content_same": false
        },
        {
          "line": 1615,
          "old_api": null,
          "new_api": "appendUndefined",
          "old_text": null,
          "new_text": "b.appendUndefined(sname)",
          "old_line_content": "        }",
          "new_line_content": "            b.appendUndefined(sname);",
          "content_same": false
        },
        {
          "line": 1618,
          "old_api": null,
          "new_api": "IsNull",
          "old_text": null,
          "new_text": "value->IsNull()",
          "old_line_content": "    }",
          "new_line_content": "        else if (value->IsNull()) {",
          "content_same": false
        },
        {
          "line": 1619,
          "old_api": null,
          "new_api": "appendNull",
          "old_text": null,
          "new_text": "b.appendNull(sname)",
          "old_line_content": "",
          "new_line_content": "            b.appendNull(sname);",
          "content_same": false
        },
        {
          "line": 1628,
          "old_api": null,
          "new_api": "v8::String::New(\"_bson\")",
          "old_text": null,
          "new_text": "v8::String::New(\"_bson\")",
          "old_line_content": "            }",
          "new_line_content": "        if (o->Has(v8::String::New(\"_bson\"))) {",
          "content_same": false
        },
        {
          "line": 1629,
          "old_api": null,
          "new_api": "unwrapBSONObj",
          "old_text": null,
          "new_text": "unwrapBSONObj(o)",
          "old_line_content": "        }",
          "new_line_content": "            originalBSON = unwrapBSONObj(o);",
          "content_same": false
        },
        {
          "line": 1630,
          "old_api": null,
          "new_api": "unwrapHolder",
          "old_text": null,
          "new_text": "unwrapHolder(o)",
          "old_line_content": "",
          "new_line_content": "            BSONHolder* holder = unwrapHolder(o);",
          "content_same": false
        },
        {
          "line": 1644,
          "old_api": null,
          "new_api": "GetOwnPropertyNames",
          "old_text": null,
          "new_text": "o->GetOwnPropertyNames()",
          "old_line_content": "                continue;",
          "new_line_content": "        v8::Local<v8::Array> names = o->GetOwnPropertyNames();",
          "content_same": false
        },
        {
          "line": 1645,
          "old_api": null,
          "new_api": "Length",
          "old_text": null,
          "new_text": "names->Length()",
          "old_line_content": "",
          "new_line_content": "        for (unsigned int i=0; i<names->Length(); i++) {",
          "content_same": false
        },
        {
          "line": 1647,
          "old_api": null,
          "new_api": "Get",
          "old_text": null,
          "new_text": "o->Get(name)",
          "old_line_content": "        }",
          "new_line_content": "            v8::Local<v8::Value> value = o->Get(name);",
          "content_same": false
        },
        {
          "line": 1652,
          "old_api": null,
          "new_api": "v8ToMongoElement",
          "old_text": null,
          "new_text": "v8ToMongoElement(b, sname, value, depth + 1, &originalBSON)",
          "old_line_content": "",
          "new_line_content": "            v8ToMongoElement(b, sname, value, depth + 1, &originalBSON);",
          "content_same": false
        },
        {
          "line": 1660,
          "old_api": null,
          "new_api": "v8StringData",
          "old_text": null,
          "new_text": "v8StringData(name)",
          "old_line_content": "",
          "new_line_content": "        return v8::Function::Cast(*(v8::Context::GetCurrent()->Global()->Get(v8StringData(name))));",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 1665,
          "old_api": "Length",
          "new_api": null,
          "old_text": "args.Length()",
          "new_text": null,
          "old_line_content": "        for (int i = 0; i < args.Length(); i++) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1676,
          "old_api": "IsExternal",
          "new_api": null,
          "old_text": "args[i]->IsExternal()",
          "new_text": null,
          "old_line_content": "            if (args[i]->IsExternal()) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1686,
          "old_api": "str",
          "new_api": null,
          "old_text": "ss.str()",
          "new_text": null,
          "old_line_content": "        Logstream::logLockless(ss.str());",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1687,
          "old_api": "v8::Undefined()",
          "new_api": null,
          "old_text": "v8::Undefined()",
          "new_text": null,
          "old_line_content": "        return handle_scope.Close(v8::Undefined());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1699,
          "old_api": "v8::Undefined()",
          "new_api": null,
          "old_text": "v8::Undefined()",
          "new_text": null,
          "old_line_content": "        return v8::Undefined();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1703,
          "old_api": "IsString",
          "new_api": null,
          "old_text": "args[0]->IsString()",
          "new_text": null,
          "old_line_content": "        if (args.Length() != 1 || !args[0]->IsString()) {",
          "new_line_content": "        // collection cycle, @see v8::V8::IdleNotification.",
          "content_same": false
        },
        {
          "line": 1706,
          "old_api": "ToString",
          "new_api": null,
          "old_text": "args[0]->ToString()",
          "new_text": null,
          "old_line_content": "        scope->_cpuProfiler.start(*v8::String::Utf8Value(args[0]->ToString()));",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1707,
          "old_api": "v8::Undefined()",
          "new_api": null,
          "old_text": "v8::Undefined()",
          "new_text": null,
          "old_line_content": "        return v8::Undefined();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1711,
          "old_api": "IsString",
          "new_api": null,
          "old_text": "args[0]->IsString()",
          "new_text": null,
          "old_line_content": "        if (args.Length() != 1 || !args[0]->IsString()) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1714,
          "old_api": "ToString",
          "new_api": null,
          "old_text": "args[0]->ToString()",
          "new_text": null,
          "old_line_content": "        scope->_cpuProfiler.stop(*v8::String::Utf8Value(args[0]->ToString()));",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1715,
          "old_api": "v8::Undefined()",
          "new_api": null,
          "old_text": "v8::Undefined()",
          "new_text": null,
          "old_line_content": "        return v8::Undefined();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1588,
          "old_api": "ToObject",
          "new_api": null,
          "old_text": "value->ToObject()",
          "new_text": null,
          "old_line_content": "            BSONObj sub = v8ToMongo(value->ToObject(), depth);",
          "new_line_content": "            // Note: can't use BSONArrayBuilder because need to call recursively",
          "content_same": false
        },
        {
          "line": 1719,
          "old_api": "IsString",
          "new_api": null,
          "old_text": "args[0]->IsString()",
          "new_text": null,
          "old_line_content": "        if (args.Length() != 1 || !args[0]->IsString()) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1592,
          "old_api": "IsDate",
          "new_api": null,
          "old_text": "value->IsDate()",
          "new_text": null,
          "old_line_content": "        if (value->IsDate()) {",
          "new_line_content": "            for (int i=0; i < len; i++) {",
          "content_same": false
        },
        {
          "line": 1722,
          "old_api": "fetch",
          "new_api": null,
          "old_text": "scope->_cpuProfiler.fetch(\n                *v8::String::Utf8Value(args[0]->ToString()))",
          "new_text": null,
          "old_line_content": "        return scope->mongoToLZV8(scope->_cpuProfiler.fetch(",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1723,
          "old_api": "ToString",
          "new_api": null,
          "old_text": "args[0]->ToString()",
          "new_text": null,
          "old_line_content": "                *v8::String::Utf8Value(args[0]->ToString())));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1597,
          "old_api": "IsExternal",
          "new_api": null,
          "old_text": "value->IsExternal()",
          "new_text": null,
          "old_line_content": "        if (value->IsExternal())",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1604,
          "old_api": "IsBoolean",
          "new_api": null,
          "old_text": "value->IsBoolean()",
          "new_text": null,
          "old_line_content": "        if (value->IsBoolean()) {",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 1608,
          "old_api": "IsUndefined",
          "new_api": null,
          "old_text": "value->IsUndefined()",
          "new_text": null,
          "old_line_content": "        else if (value->IsUndefined()) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1609,
          "old_api": "appendUndefined",
          "new_api": null,
          "old_text": "b.appendUndefined(sname)",
          "new_text": null,
          "old_line_content": "            b.appendUndefined(sname);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1612,
          "old_api": "IsNull",
          "new_api": null,
          "old_text": "value->IsNull()",
          "new_text": null,
          "old_line_content": "        else if (value->IsNull()) {",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 1613,
          "old_api": "appendNull",
          "new_api": null,
          "old_text": "b.appendNull(sname)",
          "new_text": null,
          "old_line_content": "            b.appendNull(sname);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1616,
          "old_api": "str::stream()",
          "new_api": null,
          "old_text": "str::stream()",
          "new_text": null,
          "old_line_content": "        uasserted(16662, str::stream() << \"unable to convert JavaScript property to mongo element \"",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 1623,
          "old_api": "unwrapBSONObj",
          "new_api": null,
          "old_text": "unwrapBSONObj(o)",
          "new_text": null,
          "old_line_content": "            originalBSON = unwrapBSONObj(o);",
          "new_line_content": "                                   << sname);",
          "content_same": false
        },
        {
          "line": 1624,
          "old_api": "unwrapHolder",
          "new_api": null,
          "old_text": "unwrapHolder(o)",
          "new_text": null,
          "old_line_content": "            BSONHolder* holder = unwrapHolder(o);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1633,
          "old_api": "v8::String::New(\"_id\")",
          "new_api": null,
          "old_text": "v8::String::New(\"_id\")",
          "new_text": null,
          "old_line_content": "            if (o->HasRealNamedProperty(v8::String::New(\"_id\"))) {",
          "new_line_content": "                return originalBSON;",
          "content_same": false
        },
        {
          "line": 1634,
          "old_api": "v8::String::New(\"_id\")",
          "new_api": null,
          "old_text": "v8::String::New(\"_id\")",
          "new_text": null,
          "old_line_content": "                v8ToMongoElement(b, \"_id\", o->Get(v8::String::New(\"_id\")), 0, &originalBSON);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1638,
          "old_api": "GetOwnPropertyNames",
          "new_api": null,
          "old_text": "o->GetOwnPropertyNames()",
          "new_text": null,
          "old_line_content": "        v8::Local<v8::Array> names = o->GetOwnPropertyNames();",
          "new_line_content": "        if (depth == 0) {",
          "content_same": false
        },
        {
          "line": 1641,
          "old_api": "Get",
          "new_api": null,
          "old_text": "o->Get(name)",
          "new_text": null,
          "old_line_content": "            v8::Local<v8::Value> value = o->Get(name);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1642,
          "old_api": "toSTLString",
          "new_api": null,
          "old_text": "toSTLString(name)",
          "new_text": null,
          "old_line_content": "            const string sname = toSTLString(name);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1658,
          "old_api": "getNamedCons",
          "new_api": null,
          "old_text": "getNamedCons(\"ObjectId\")",
          "new_text": null,
          "old_line_content": "        return getNamedCons(\"ObjectId\");",
          "new_line_content": "",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 17,
      "total_additions": 34,
      "total_deletions": 31,
      "total_api_changes": 82
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 8,
        "api_related_lines": 82,
        "non_api_lines": 1,
        "non_api_line_numbers": [
          1595
        ]
      }
    },
    "api_calls_before": 963,
    "api_calls_after": 966,
    "diff_info": {
      "added_lines": 8,
      "removed_lines": 2,
      "total_diff_lines": 22
    }
  }
}
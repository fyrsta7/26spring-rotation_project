{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/mongo/modified_file/45d947729a0315accb6d4f15a6b06be6d9c19fe7",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/mongo/modified_file/45d947729a0315accb6d4f15a6b06be6d9c19fe7/before.cpp",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/mongo/modified_file/45d947729a0315accb6d4f15a6b06be6d9c19fe7/after.cpp",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/mongo/modified_file/45d947729a0315accb6d4f15a6b06be6d9c19fe7/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 265,
          "old_api": "JS_NewContext",
          "new_api": "JS_SetGCParametersBasedOnAvailableMemory",
          "old_text": "JS_NewContext(_runtime, kStackChunkSize)",
          "new_text": "JS_SetGCParametersBasedOnAvailableMemory(_runtime, kMallocMemoryLimit / (1024 * 1024))",
          "old_line_content": "    _context = JS_NewContext(_runtime, kStackChunkSize);",
          "new_line_content": "        JS_SetGCParametersBasedOnAvailableMemory(_runtime, kMallocMemoryLimit / (1024 * 1024));",
          "content_same": false
        },
        {
          "line": 274,
          "old_api": "PR_GetCurrentThread",
          "new_api": "JS_DestroyRuntime",
          "old_text": "PR_GetCurrentThread()",
          "new_text": "JS_DestroyRuntime(_runtime)",
          "old_line_content": "        invariant(PR_GetCurrentThread() == _thread);",
          "new_line_content": "    JS_DestroyRuntime(_runtime);",
          "content_same": false
        },
        {
          "line": 331,
          "old_api": "JS_SetGCCallback",
          "new_api": "JS_SetGCParameter",
          "old_text": "JS_SetGCCallback(_runtime, _gcCallback, this)",
          "new_text": "JS_SetGCParameter(_runtime, JSGC_MAX_BYTES, 0xffffffff)",
          "old_line_content": "    JS_SetGCCallback(_runtime, _gcCallback, this);",
          "new_line_content": "    JS_SetGCParameter(_runtime, JSGC_MAX_BYTES, 0xffffffff);",
          "content_same": false
        },
        {
          "line": 335,
          "old_api": "JS_SetErrorReporter",
          "new_api": "JS_SetContextPrivate",
          "old_text": "JS_SetErrorReporter(_runtime, _reportError)",
          "new_text": "JS_SetContextPrivate(_context, this)",
          "old_line_content": "    JS_SetErrorReporter(_runtime, _reportError);",
          "new_line_content": "    JS_SetContextPrivate(_context, this);",
          "content_same": false
        },
        {
          "line": 346,
          "old_api": "execSetup",
          "new_api": "JS_FireOnNewGlobalObject",
          "old_text": "execSetup(JSFiles::types)",
          "new_text": "JS_FireOnNewGlobalObject(_context, _global)",
          "old_line_content": "    execSetup(JSFiles::types);",
          "new_line_content": "    JS_FireOnNewGlobalObject(_context, _global);",
          "content_same": false
        },
        {
          "line": 349,
          "old_api": "getScopeInitCallback",
          "new_api": "execSetup",
          "old_text": "_engine->getScopeInitCallback()",
          "new_text": "execSetup(JSFiles::types)",
          "old_line_content": "    if (_engine->getScopeInitCallback())",
          "new_line_content": "    execSetup(JSFiles::types);",
          "content_same": false
        },
        {
          "line": 353,
          "old_api": "installGlobalUtils",
          "new_api": "getScopeInitCallback",
          "old_text": "installGlobalUtils(*this)",
          "new_text": "_engine->getScopeInitCallback()(*this)",
          "old_line_content": "    installGlobalUtils(*this);",
          "new_line_content": "        _engine->getScopeInitCallback()(*this);",
          "content_same": false
        },
        {
          "line": 362,
          "old_api": "unregisterOperation",
          "new_api": "reset",
          "old_text": "unregisterOperation()",
          "new_text": "x.reset()",
          "old_line_content": "    unregisterOperation();",
          "new_line_content": "        x.reset();",
          "content_same": false
        },
        {
          "line": 464,
          "old_api": "setCompileOptions",
          "new_api": "str::stream()",
          "old_text": "setCompileOptions(&co)",
          "new_text": "str::stream()",
          "old_line_content": "    setCompileOptions(&co);",
          "new_line_content": "    std::string code = str::stream() << \"____MongoToSM_newFunction_temp = \" << raw;",
          "content_same": false
        },
        {
          "line": 513,
          "old_api": "setCompileOptions",
          "new_api": "StringData",
          "old_text": "setCompileOptions(&co)",
          "new_text": "StringData(raw)",
          "old_line_content": "    setCompileOptions(&co);",
          "new_line_content": "                                     << parseJSFunctionOrExpression(_context, StringData(raw));",
          "content_same": false
        },
        {
          "line": 516,
          "old_api": "isObject",
          "new_api": "setCompileOptions",
          "old_text": "uassert(10232,\n            \"not a function\",\n            fun.isObject() && JS_ObjectIsFunction(_context, fun.toObjectOrNull()))",
          "new_text": "setCompileOptions(&co)",
          "old_line_content": "    uassert(10232,",
          "new_line_content": "    setCompileOptions(&co);",
          "content_same": false
        },
        {
          "line": 518,
          "old_api": "toObjectOrNull",
          "new_api": "length",
          "old_text": "fun.toObjectOrNull()",
          "new_text": "code.length()",
          "old_line_content": "            fun.isObject() && JS_ObjectIsFunction(_context, fun.toObjectOrNull()));",
          "new_line_content": "    _checkErrorState(JS::Evaluate(_context, _global, co, code.c_str(), code.length(), fun));",
          "content_same": false
        },
        {
          "line": 570,
          "old_api": "fromBSONElement",
          "new_api": "next",
          "old_text": "ValueReader(_context, &value).fromBSONElement(next, *argsObject, readOnlyArgs)",
          "new_text": "it.next()",
          "old_line_content": "            ValueReader(_context, &value).fromBSONElement(next, *argsObject, readOnlyArgs);",
          "new_line_content": "            BSONElement next = it.next();",
          "content_same": false
        },
        {
          "line": 583,
          "old_api": "startDeadline",
          "new_api": "setObjectOrNull",
          "old_text": "_engine->getDeadlineMonitor().startDeadline(this, timeoutMs)",
          "new_text": "smrecv.setObjectOrNull(_global)",
          "old_line_content": "        _engine->getDeadlineMonitor().startDeadline(this, timeoutMs);",
          "new_line_content": "        smrecv.setObjectOrNull(_global);",
          "content_same": false
        },
        {
          "line": 586,
          "old_api": "toObjectOrNull",
          "new_api": "startDeadline",
          "old_text": "smrecv.toObjectOrNull()",
          "new_text": "_engine->getDeadlineMonitor().startDeadline(this, timeoutMs)",
          "old_line_content": "    JS::RootedObject obj(_context, smrecv.toObjectOrNull());",
          "new_line_content": "        _engine->getDeadlineMonitor().startDeadline(this, timeoutMs);",
          "content_same": false
        },
        {
          "line": 591,
          "old_api": "stopDeadline",
          "new_api": "JS::Call(_context, obj, funcValue, args, &out)",
          "old_text": "_engine->getDeadlineMonitor().stopDeadline(this)",
          "new_text": "JS::Call(_context, obj, funcValue, args, &out)",
          "old_line_content": "        _engine->getDeadlineMonitor().stopDeadline(this);",
          "new_line_content": "    bool success = JS::Call(_context, obj, funcValue, args, &out);",
          "content_same": false
        },
        {
          "line": 624,
          "old_api": "size",
          "new_api": "c_str",
          "old_text": "code.size()",
          "new_text": "name.c_str()",
          "old_line_content": "    bool success = JS::Compile(_context, _global, co, code.rawData(), code.size(), &script);",
          "new_line_content": "    co.setFile(name.c_str());",
          "content_same": false
        },
        {
          "line": 637,
          "old_api": "stopDeadline",
          "new_api": "JS_ExecuteScript",
          "old_text": "_engine->getDeadlineMonitor().stopDeadline(this)",
          "new_text": "JS_ExecuteScript(_context, _global, script, &out)",
          "old_line_content": "        _engine->getDeadlineMonitor().stopDeadline(this);",
          "new_line_content": "    success = JS_ExecuteScript(_context, _global, script, &out);",
          "content_same": false
        },
        {
          "line": 642,
          "old_api": "setValue",
          "new_api": "_checkErrorState",
          "old_text": "ObjectWrapper(_context, _global).setValue(kExecResult, out)",
          "new_text": "_checkErrorState(success, reportError, assertOnError)",
          "old_line_content": "    ObjectWrapper(_context, _global).setValue(kExecResult, out);",
          "new_line_content": "    if (_checkErrorState(success, reportError, assertOnError))",
          "content_same": false
        },
        {
          "line": 660,
          "old_api": "setObjectOrNull",
          "new_api": "NativeFunctionInfo::make(_context, &obj, func, data)",
          "old_text": "value.setObjectOrNull(obj)",
          "new_text": "NativeFunctionInfo::make(_context, &obj, func, data)",
          "old_line_content": "    value.setObjectOrNull(obj);",
          "new_line_content": "    NativeFunctionInfo::make(_context, &obj, func, data);",
          "content_same": false
        },
        {
          "line": 691,
          "old_api": "install",
          "new_api": "installDBAccess",
          "old_text": "_mongoLocalProto.install(_global)",
          "new_text": "installDBAccess()",
          "old_line_content": "    _mongoLocalProto.install(_global);",
          "new_line_content": "    installDBAccess();",
          "content_same": false
        },
        {
          "line": 695,
          "old_api": "exec",
          "new_api": "execCoreFiles",
          "old_text": "exec(makeMongo, \"local connect 2\", false, true, true, 0)",
          "new_text": "execCoreFiles()",
          "old_line_content": "    exec(makeMongo, \"local connect 2\", false, true, true, 0);",
          "new_line_content": "    execCoreFiles();",
          "content_same": false
        },
        {
          "line": 717,
          "old_api": "installDBAccess",
          "new_api": "mongo::sm::reset(0)",
          "old_text": "installDBAccess()",
          "new_text": "mongo::sm::reset(0)",
          "old_line_content": "    installDBAccess();",
          "new_line_content": "    mongo::sm::reset(0);",
          "content_same": false
        },
        {
          "line": 720,
          "old_api": "installFork",
          "new_api": "installDBAccess",
          "old_text": "installFork()",
          "new_text": "installDBAccess()",
          "old_line_content": "    installFork();",
          "new_line_content": "    installDBAccess();",
          "content_same": false
        },
        {
          "line": 723,
          "old_api": "install",
          "new_api": "installFork",
          "old_text": "_mongoExternalProto.install(_global)",
          "new_text": "installFork()",
          "old_line_content": "    _mongoExternalProto.install(_global);",
          "new_line_content": "    installFork();",
          "content_same": false
        },
        {
          "line": 732,
          "old_api": "advanceGeneration",
          "new_api": "unregisterOperation",
          "old_text": "advanceGeneration()",
          "new_text": "unregisterOperation()",
          "old_line_content": "    advanceGeneration();",
          "new_line_content": "    unregisterOperation();",
          "content_same": false
        },
        {
          "line": 789,
          "old_api": "toString",
          "new_api": "getValue",
          "old_text": "ValueWriter(_context, stack).toString()",
          "new_text": "ObjectWrapper(_context, excn).getValue(\"stack\", &stack)",
          "old_line_content": "               << ValueWriter(_context, stack).toString();",
          "new_line_content": "            ObjectWrapper(_context, excn).getValue(\"stack\", &stack);",
          "content_same": false
        },
        {
          "line": 792,
          "old_api": "Status",
          "new_api": "toString",
          "old_text": "Status(ErrorCodes::UnknownError, \"Unknown Failure from JSInterpreter\")",
          "new_text": "ValueWriter(_context, stack).toString()",
          "old_line_content": "            _status = Status(ErrorCodes::UnknownError, \"Unknown Failure from JSInterpreter\");",
          "new_line_content": "               << ValueWriter(_context, stack).toString();",
          "content_same": false
        },
        {
          "line": 799,
          "old_api": "error",
          "new_api": "reason",
          "old_text": "error()",
          "new_text": "_status.reason()",
          "old_line_content": "        error() << _error << std::endl;",
          "new_line_content": "    _error = _status.reason();",
          "content_same": false
        },
        {
          "line": 802,
          "old_api": "std::move(_status)",
          "new_api": "error",
          "old_text": "std::move(_status)",
          "new_text": "error()",
          "old_line_content": "    auto status = std::move(_status);",
          "new_line_content": "        error() << _error << std::endl;",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 512,
          "old_api": null,
          "new_api": "str::stream()",
          "old_text": null,
          "new_text": "str::stream()",
          "old_line_content": "    JS::CompileOptions co(_context);",
          "new_line_content": "    std::string code = str::stream() << \"_funcs\" << functionNumber << \" = \"",
          "content_same": false
        },
        {
          "line": 519,
          "old_api": null,
          "new_api": "isObject",
          "old_text": null,
          "new_text": "uassert(10232,\n            \"not a function\",\n            fun.isObject() && JS_ObjectIsFunction(_context, fun.toObjectOrNull()))",
          "old_line_content": "}",
          "new_line_content": "    uassert(10232,",
          "content_same": false
        },
        {
          "line": 521,
          "old_api": null,
          "new_api": "toObjectOrNull",
          "old_text": null,
          "new_text": "fun.toObjectOrNull()",
          "old_line_content": "ScriptingFunction MozJSImplScope::_createFunction(const char* raw,",
          "new_line_content": "            fun.isObject() && JS_ObjectIsFunction(_context, fun.toObjectOrNull()));",
          "content_same": false
        },
        {
          "line": 529,
          "old_api": null,
          "new_api": "_MozJSCreateFunction",
          "old_text": null,
          "new_text": "_MozJSCreateFunction(raw, functionNumber, &fun)",
          "old_line_content": "    return functionNumber;",
          "new_line_content": "    _MozJSCreateFunction(raw, functionNumber, &fun);",
          "content_same": false
        },
        {
          "line": 530,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "fun.get()",
          "old_line_content": "}",
          "new_line_content": "    _funcs.emplace_back(_context, fun.get());",
          "content_same": false
        },
        {
          "line": 540,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "getFunctionCache().size()",
          "old_line_content": "}",
          "new_line_content": "    _MozJSCreateFunction(code, getFunctionCache().size() + 1, &fun);",
          "content_same": false
        },
        {
          "line": 542,
          "old_api": null,
          "new_api": "setValue",
          "old_text": null,
          "new_text": "ObjectWrapper(_context, _global).setValue(field, fun)",
          "old_line_content": "void MozJSImplScope::rename(const char* from, const char* to) {",
          "new_line_content": "    ObjectWrapper(_context, _global).setValue(field, fun);",
          "content_same": false
        },
        {
          "line": 548,
          "old_api": null,
          "new_api": "rename",
          "old_text": null,
          "new_text": "ObjectWrapper(_context, _global).rename(from, to)",
          "old_line_content": "int MozJSImplScope::invoke(ScriptingFunction func,",
          "new_line_content": "    ObjectWrapper(_context, _global).rename(from, to);",
          "content_same": false
        },
        {
          "line": 563,
          "old_api": null,
          "new_api": "nFields",
          "old_text": null,
          "new_text": "argsObject->nFields()",
          "old_line_content": "",
          "new_line_content": "    const int nargs = argsObject ? argsObject->nFields() : 0;",
          "content_same": false
        },
        {
          "line": 573,
          "old_api": null,
          "new_api": "fromBSONElement",
          "old_text": null,
          "new_text": "ValueReader(_context, &value).fromBSONElement(next, *argsObject, readOnlyArgs)",
          "old_line_content": "        }",
          "new_line_content": "            ValueReader(_context, &value).fromBSONElement(next, *argsObject, readOnlyArgs);",
          "content_same": false
        },
        {
          "line": 575,
          "old_api": null,
          "new_api": "append",
          "old_text": null,
          "new_text": "args.append(value)",
          "old_line_content": "",
          "new_line_content": "            args.append(value);",
          "content_same": false
        },
        {
          "line": 581,
          "old_api": null,
          "new_api": "fromBSON",
          "old_text": null,
          "new_text": "ValueReader(_context, &smrecv).fromBSON(*recv, nullptr, readOnlyRecv)",
          "old_line_content": "",
          "new_line_content": "        ValueReader(_context, &smrecv).fromBSON(*recv, nullptr, readOnlyRecv);",
          "content_same": false
        },
        {
          "line": 589,
          "old_api": null,
          "new_api": "toObjectOrNull",
          "old_text": null,
          "new_text": "smrecv.toObjectOrNull()",
          "old_line_content": "",
          "new_line_content": "    JS::RootedObject obj(_context, smrecv.toObjectOrNull());",
          "content_same": false
        },
        {
          "line": 594,
          "old_api": null,
          "new_api": "stopDeadline",
          "old_text": null,
          "new_text": "_engine->getDeadlineMonitor().stopDeadline(this)",
          "old_line_content": "",
          "new_line_content": "        _engine->getDeadlineMonitor().stopDeadline(this);",
          "content_same": false
        },
        {
          "line": 596,
          "old_api": null,
          "new_api": "_checkErrorState",
          "old_text": null,
          "new_text": "_checkErrorState(success)",
          "old_line_content": "        // must validate the handle because TerminateExecution may have",
          "new_line_content": "    _checkErrorState(success);",
          "content_same": false
        },
        {
          "line": 601,
          "old_api": null,
          "new_api": "instanceOf",
          "old_text": null,
          "new_text": "_nativeFunctionProto.instanceOf(out)",
          "old_line_content": "        } else {",
          "new_line_content": "        if (out.isObject() && _nativeFunctionProto.instanceOf(out)) {",
          "content_same": false
        },
        {
          "line": 602,
          "old_api": null,
          "new_api": "warning",
          "old_text": null,
          "new_text": "warning()",
          "old_line_content": "            _lastRetIsNativeCode = false;",
          "new_line_content": "            warning() << \"storing native function as return value\";",
          "content_same": false
        },
        {
          "line": 608,
          "old_api": null,
          "new_api": "setValue",
          "old_text": null,
          "new_text": "ObjectWrapper(_context, _global).setValue(kInvokeResult, out)",
          "old_line_content": "    return 0;",
          "new_line_content": "        ObjectWrapper(_context, _global).setValue(kInvokeResult, out);",
          "content_same": false
        },
        {
          "line": 623,
          "old_api": null,
          "new_api": "setCompileOptions",
          "old_text": null,
          "new_text": "setCompileOptions(&co)",
          "old_line_content": "",
          "new_line_content": "    setCompileOptions(&co);",
          "content_same": false
        },
        {
          "line": 627,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "code.size()",
          "old_line_content": "        return false;",
          "new_line_content": "    bool success = JS::Compile(_context, _global, co, code.rawData(), code.size(), &script);",
          "content_same": false
        },
        {
          "line": 629,
          "old_api": null,
          "new_api": "_checkErrorState",
          "old_text": null,
          "new_text": "_checkErrorState(success, reportError, assertOnError)",
          "old_line_content": "    if (timeoutMs)",
          "new_line_content": "    if (_checkErrorState(success, reportError, assertOnError))",
          "content_same": false
        },
        {
          "line": 633,
          "old_api": null,
          "new_api": "startDeadline",
          "old_text": null,
          "new_text": "_engine->getDeadlineMonitor().startDeadline(this, timeoutMs)",
          "old_line_content": "",
          "new_line_content": "        _engine->getDeadlineMonitor().startDeadline(this, timeoutMs);",
          "content_same": false
        },
        {
          "line": 640,
          "old_api": null,
          "new_api": "stopDeadline",
          "old_text": null,
          "new_text": "_engine->getDeadlineMonitor().stopDeadline(this)",
          "old_line_content": "        return false;",
          "new_line_content": "        _engine->getDeadlineMonitor().stopDeadline(this);",
          "content_same": false
        },
        {
          "line": 645,
          "old_api": null,
          "new_api": "setValue",
          "old_text": null,
          "new_text": "ObjectWrapper(_context, _global).setValue(kExecResult, out)",
          "old_line_content": "        // appears to only be used by shell",
          "new_line_content": "    ObjectWrapper(_context, _global).setValue(kExecResult, out);",
          "content_same": false
        },
        {
          "line": 647,
          "old_api": null,
          "new_api": "isUndefined",
          "old_text": null,
          "new_text": "out.isUndefined()",
          "old_line_content": "    }",
          "new_line_content": "    if (printResult && !out.isUndefined()) {",
          "content_same": false
        },
        {
          "line": 649,
          "old_api": null,
          "new_api": "toString",
          "old_text": null,
          "new_text": "ValueWriter(_context, out).toString()",
          "old_line_content": "    return true;",
          "new_line_content": "        std::cout << ValueWriter(_context, out).toString() << std::endl;",
          "content_same": false
        },
        {
          "line": 663,
          "old_api": null,
          "new_api": "setObjectOrNull",
          "old_text": null,
          "new_text": "value.setObjectOrNull(obj)",
          "old_line_content": "",
          "new_line_content": "    value.setObjectOrNull(obj);",
          "content_same": false
        },
        {
          "line": 664,
          "old_api": null,
          "new_api": "setValue",
          "old_text": null,
          "new_text": "ObjectWrapper(_context, _global).setValue(field, value)",
          "old_line_content": "void MozJSImplScope::gc() {",
          "new_line_content": "    ObjectWrapper(_context, _global).setValue(field, value);",
          "content_same": false
        },
        {
          "line": 668,
          "old_api": null,
          "new_api": "store",
          "old_text": null,
          "new_text": "_pendingGC.store(true)",
          "old_line_content": "",
          "new_line_content": "    _pendingGC.store(true);",
          "content_same": false
        },
        {
          "line": 669,
          "old_api": null,
          "new_api": "JS_RequestInterruptCallback",
          "old_text": null,
          "new_text": "JS_RequestInterruptCallback(_runtime)",
          "old_line_content": "void MozJSImplScope::localConnectForDbEval(OperationContext* txn, const char* dbName) {",
          "new_line_content": "    JS_RequestInterruptCallback(_runtime);",
          "content_same": false
        },
        {
          "line": 675,
          "old_api": null,
          "new_api": "invariant",
          "old_text": null,
          "new_text": "invariant(_opCtx == NULL)",
          "old_line_content": "    if (_connectState == ConnectState::External)",
          "new_line_content": "    invariant(_opCtx == NULL);",
          "content_same": false
        },
        {
          "line": 679,
          "old_api": null,
          "new_api": "uasserted",
          "old_text": null,
          "new_text": "uasserted(12510, \"externalSetup already called, can't call localConnect\")",
          "old_line_content": "            return;",
          "new_line_content": "        uasserted(12510, \"externalSetup already called, can't call localConnect\");",
          "content_same": false
        },
        {
          "line": 683,
          "old_api": null,
          "new_api": "uasserted",
          "old_text": null,
          "new_text": "uasserted(12511,\n                  str::stream() << \"localConnect previously called with name \" << _localDBName)",
          "old_line_content": "",
          "new_line_content": "        uasserted(12511,",
          "content_same": false
        },
        {
          "line": 684,
          "old_api": null,
          "new_api": "str::stream()",
          "old_text": null,
          "new_text": "str::stream()",
          "old_line_content": "    // NOTE: order is important here.  the following methods must be called after",
          "new_line_content": "                  str::stream() << \"localConnect previously called with name \" << _localDBName);",
          "content_same": false
        },
        {
          "line": 694,
          "old_api": null,
          "new_api": "install",
          "old_text": null,
          "new_text": "_mongoLocalProto.install(_global)",
          "old_line_content": "    const char* const makeMongo = \"_mongo = new Mongo()\";",
          "new_line_content": "    _mongoLocalProto.install(_global);",
          "content_same": false
        },
        {
          "line": 700,
          "old_api": null,
          "new_api": "str::stream()",
          "old_text": null,
          "new_text": "str::stream()",
          "old_line_content": "    _connectState = ConnectState::Local;",
          "new_line_content": "    std::string makeDB = str::stream() << \"db = _mongo.getDB(\\\"\" << dbName << \"\\\");\";",
          "content_same": false
        },
        {
          "line": 701,
          "old_api": null,
          "new_api": "exec",
          "old_text": null,
          "new_text": "exec(makeDB, \"local connect 3\", false, true, true, 0)",
          "old_line_content": "    _localDBName = dbName;",
          "new_line_content": "    exec(makeDB, \"local connect 3\", false, true, true, 0);",
          "content_same": false
        },
        {
          "line": 706,
          "old_api": null,
          "new_api": "loadStored",
          "old_text": null,
          "new_text": "loadStored(txn)",
          "old_line_content": "void MozJSImplScope::externalSetup() {",
          "new_line_content": "    loadStored(txn);",
          "content_same": false
        },
        {
          "line": 715,
          "old_api": null,
          "new_api": "uasserted",
          "old_text": null,
          "new_text": "uasserted(12512, \"localConnect already called, can't call externalSetup\")",
          "old_line_content": "",
          "new_line_content": "        uasserted(12512, \"localConnect already called, can't call externalSetup\");",
          "content_same": false
        },
        {
          "line": 726,
          "old_api": null,
          "new_api": "install",
          "old_text": null,
          "new_text": "_mongoExternalProto.install(_global)",
          "old_line_content": "}",
          "new_line_content": "    _mongoExternalProto.install(_global);",
          "content_same": false
        },
        {
          "line": 727,
          "old_api": null,
          "new_api": "execCoreFiles",
          "old_text": null,
          "new_text": "execCoreFiles()",
          "old_line_content": "",
          "new_line_content": "    execCoreFiles();",
          "content_same": false
        },
        {
          "line": 733,
          "old_api": null,
          "new_api": "store",
          "old_text": null,
          "new_text": "_pendingKill.store(false)",
          "old_line_content": "}",
          "new_line_content": "    _pendingKill.store(false);",
          "content_same": false
        },
        {
          "line": 734,
          "old_api": null,
          "new_api": "store",
          "old_text": null,
          "new_text": "_pendingGC.store(false)",
          "old_line_content": "",
          "new_line_content": "    _pendingGC.store(false);",
          "content_same": false
        },
        {
          "line": 735,
          "old_api": null,
          "new_api": "advanceGeneration",
          "old_text": null,
          "new_text": "advanceGeneration()",
          "old_line_content": "void MozJSImplScope::installBSONTypes() {",
          "new_line_content": "    advanceGeneration();",
          "content_same": false
        },
        {
          "line": 746,
          "old_api": null,
          "new_api": "install",
          "old_text": null,
          "new_text": "_nativeFunctionProto.install(_global)",
          "old_line_content": "    if (Decimal128::enabled) {",
          "new_line_content": "    _nativeFunctionProto.install(_global);",
          "content_same": false
        },
        {
          "line": 748,
          "old_api": null,
          "new_api": "install",
          "old_text": null,
          "new_text": "_numberLongProto.install(_global)",
          "old_line_content": "    }",
          "new_line_content": "    _numberLongProto.install(_global);",
          "content_same": false
        },
        {
          "line": 753,
          "old_api": null,
          "new_api": "install",
          "old_text": null,
          "new_text": "_oidProto.install(_global)",
          "old_line_content": "",
          "new_line_content": "    _oidProto.install(_global);",
          "content_same": false
        },
        {
          "line": 754,
          "old_api": null,
          "new_api": "install",
          "old_text": null,
          "new_text": "_regExpProto.install(_global)",
          "old_line_content": "    // This builtin map is a javascript 6 thing.  We want our version.  so",
          "new_line_content": "    _regExpProto.install(_global);",
          "content_same": false
        },
        {
          "line": 755,
          "old_api": null,
          "new_api": "install",
          "old_text": null,
          "new_text": "_timestampProto.install(_global)",
          "old_line_content": "    // take theirs out",
          "new_line_content": "    _timestampProto.install(_global);",
          "content_same": false
        },
        {
          "line": 759,
          "old_api": null,
          "new_api": "deleteProperty",
          "old_text": null,
          "new_text": "ObjectWrapper(_context, _global).deleteProperty(\"Map\")",
          "old_line_content": "void MozJSImplScope::installDBAccess() {",
          "new_line_content": "    ObjectWrapper(_context, _global).deleteProperty(\"Map\");",
          "content_same": false
        },
        {
          "line": 765,
          "old_api": null,
          "new_api": "install",
          "old_text": null,
          "new_text": "_dbProto.install(_global)",
          "old_line_content": "}",
          "new_line_content": "    _dbProto.install(_global);",
          "content_same": false
        },
        {
          "line": 766,
          "old_api": null,
          "new_api": "install",
          "old_text": null,
          "new_text": "_dbQueryProto.install(_global)",
          "old_line_content": "",
          "new_line_content": "    _dbQueryProto.install(_global);",
          "content_same": false
        },
        {
          "line": 767,
          "old_api": null,
          "new_api": "install",
          "old_text": null,
          "new_text": "_dbCollectionProto.install(_global)",
          "old_line_content": "void MozJSImplScope::installFork() {",
          "new_line_content": "    _dbCollectionProto.install(_global);",
          "content_same": false
        },
        {
          "line": 771,
          "old_api": null,
          "new_api": "install",
          "old_text": null,
          "new_text": "_countDownLatchProto.install(_global)",
          "old_line_content": "",
          "new_line_content": "    _countDownLatchProto.install(_global);",
          "content_same": false
        },
        {
          "line": 772,
          "old_api": null,
          "new_api": "install",
          "old_text": null,
          "new_text": "_jsThreadProto.install(_global)",
          "old_line_content": "bool MozJSImplScope::_checkErrorState(bool success, bool reportError, bool assertOnError) {",
          "new_line_content": "    _jsThreadProto.install(_global);",
          "content_same": false
        },
        {
          "line": 268,
          "old_api": null,
          "new_api": "JS_NewContext",
          "old_text": null,
          "new_text": "JS_NewContext(_runtime, kStackChunkSize)",
          "old_line_content": "",
          "new_line_content": "    _context = JS_NewContext(_runtime, kStackChunkSize);",
          "content_same": false
        },
        {
          "line": 269,
          "old_api": null,
          "new_api": "uassert",
          "old_text": null,
          "new_text": "uassert(ErrorCodes::JSInterpreterFailure, \"Failed to initialize JSContext\", _context)",
          "old_line_content": "MozJSImplScope::MozRuntime::~MozRuntime() {",
          "new_line_content": "    uassert(ErrorCodes::JSInterpreterFailure, \"Failed to initialize JSContext\", _context);",
          "content_same": false
        },
        {
          "line": 782,
          "old_api": null,
          "new_api": "isOK",
          "old_text": null,
          "new_text": "_status.isOK()",
          "old_line_content": "            str::stream ss;",
          "new_line_content": "    if (_status.isOK()) {",
          "content_same": false
        },
        {
          "line": 784,
          "old_api": null,
          "new_api": "isObject",
          "old_text": null,
          "new_text": "excn.isObject()",
          "old_line_content": "            JS::RootedValue stack(_context);",
          "new_line_content": "        if (JS_GetPendingException(_context, &excn) && excn.isObject()) {",
          "content_same": false
        },
        {
          "line": 273,
          "old_api": null,
          "new_api": "JS_DestroyContext",
          "old_text": null,
          "new_text": "JS_DestroyContext(_context)",
          "old_line_content": "    if (_thread) {",
          "new_line_content": "    JS_DestroyContext(_context);",
          "content_same": false
        },
        {
          "line": 277,
          "old_api": null,
          "new_api": "PR_GetCurrentThread",
          "old_text": null,
          "new_text": "PR_GetCurrentThread()",
          "old_line_content": "    }",
          "new_line_content": "        invariant(PR_GetCurrentThread() == _thread);",
          "content_same": false
        },
        {
          "line": 278,
          "old_api": null,
          "new_api": "PR_DestroyFakeThread",
          "old_text": null,
          "new_text": "PR_DestroyFakeThread(_thread)",
          "old_line_content": "}",
          "new_line_content": "        PR_DestroyFakeThread(_thread);",
          "content_same": false
        },
        {
          "line": 279,
          "old_api": null,
          "new_api": "PR_BindThread",
          "old_text": null,
          "new_text": "PR_BindThread(nullptr)",
          "old_line_content": "",
          "new_line_content": "        PR_BindThread(nullptr);",
          "content_same": false
        },
        {
          "line": 791,
          "old_api": null,
          "new_api": "toString",
          "old_text": null,
          "new_text": "ValueWriter(_context, excn).toString()",
          "old_line_content": "        } else {",
          "new_line_content": "            ss << ValueWriter(_context, excn).toString() << \" :\\n\"",
          "content_same": false
        },
        {
          "line": 793,
          "old_api": null,
          "new_api": "Status",
          "old_text": null,
          "new_text": "Status(ErrorCodes::JSInterpreterFailure, ss)",
          "old_line_content": "        }",
          "new_line_content": "            _status = Status(ErrorCodes::JSInterpreterFailure, ss);",
          "content_same": false
        },
        {
          "line": 795,
          "old_api": null,
          "new_api": "Status",
          "old_text": null,
          "new_text": "Status(ErrorCodes::UnknownError, \"Unknown Failure from JSInterpreter\")",
          "old_line_content": "",
          "new_line_content": "            _status = Status(ErrorCodes::UnknownError, \"Unknown Failure from JSInterpreter\");",
          "content_same": false
        },
        {
          "line": 289,
          "old_api": null,
          "new_api": "getProto",
          "old_text": null,
          "new_text": "_globalProto.getProto()",
          "old_line_content": "      _pendingKill(false),",
          "new_line_content": "      _global(_globalProto.getProto()),",
          "content_same": false
        },
        {
          "line": 805,
          "old_api": null,
          "new_api": "std::move(_status)",
          "old_text": null,
          "new_text": "std::move(_status)",
          "old_line_content": "        // Throw if necessary",
          "new_line_content": "    auto status = std::move(_status);",
          "content_same": false
        },
        {
          "line": 297,
          "old_api": null,
          "new_api": "Status::OK()",
          "old_text": null,
          "new_text": "Status::OK()",
          "old_line_content": "      _hasOutOfMemoryException(false),",
          "new_line_content": "      _status(Status::OK()),",
          "content_same": false
        },
        {
          "line": 809,
          "old_api": null,
          "new_api": "uassertStatusOK",
          "old_text": null,
          "new_text": "uassertStatusOK(status)",
          "old_line_content": "    return true;",
          "new_line_content": "        uassertStatusOK(status);",
          "content_same": false
        },
        {
          "line": 817,
          "old_api": null,
          "new_api": "setUTF8",
          "old_text": null,
          "new_text": "co->setUTF8(true)",
          "old_line_content": "MozJSImplScope* MozJSImplScope::getThreadScope() {",
          "new_line_content": "    co->setUTF8(true);",
          "content_same": false
        },
        {
          "line": 839,
          "old_api": null,
          "new_api": "JS_RequestInterruptCallback",
          "old_text": null,
          "new_text": "JS_RequestInterruptCallback(_runtime)",
          "old_line_content": "void MozJSImplScope::setParentStack(std::string parentStack) {",
          "new_line_content": "    JS_RequestInterruptCallback(_runtime);",
          "content_same": false
        },
        {
          "line": 843,
          "old_api": null,
          "new_api": "std::move(parentStack)",
          "old_text": null,
          "new_text": "std::move(parentStack)",
          "old_line_content": "std::size_t MozJSImplScope::getGeneration() const {",
          "new_line_content": "    _parentStack = std::move(parentStack);",
          "content_same": false
        },
        {
          "line": 333,
          "old_api": null,
          "new_api": "JS_SetInterruptCallback",
          "old_text": null,
          "new_text": "JS_SetInterruptCallback(_runtime, _interruptCallback)",
          "old_line_content": "    JSAutoRequest ar(_context);",
          "new_line_content": "    JS_SetInterruptCallback(_runtime, _interruptCallback);",
          "content_same": false
        },
        {
          "line": 334,
          "old_api": null,
          "new_api": "JS_SetGCCallback",
          "old_text": null,
          "new_text": "JS_SetGCCallback(_runtime, _gcCallback, this)",
          "old_line_content": "",
          "new_line_content": "    JS_SetGCCallback(_runtime, _gcCallback, this);",
          "content_same": false
        },
        {
          "line": 338,
          "old_api": null,
          "new_api": "JS_SetErrorReporter",
          "old_text": null,
          "new_text": "JS_SetErrorReporter(_runtime, _reportError)",
          "old_line_content": "",
          "new_line_content": "    JS_SetErrorReporter(_runtime, _reportError);",
          "content_same": false
        },
        {
          "line": 342,
          "old_api": null,
          "new_api": "JS_InitStandardClasses",
          "old_text": null,
          "new_text": "JS_InitStandardClasses(_context, _global)",
          "old_line_content": "",
          "new_line_content": "    _checkErrorState(JS_InitStandardClasses(_context, _global));",
          "content_same": false
        },
        {
          "line": 344,
          "old_api": null,
          "new_api": "installBSONTypes",
          "old_text": null,
          "new_text": "installBSONTypes()",
          "old_line_content": "",
          "new_line_content": "    installBSONTypes();",
          "content_same": false
        },
        {
          "line": 348,
          "old_api": null,
          "new_api": "execSetup",
          "old_text": null,
          "new_text": "execSetup(JSFiles::assert)",
          "old_line_content": "    // install process-specific utilities in the global scope (dependancy: types.js, assert.js)",
          "new_line_content": "    execSetup(JSFiles::assert);",
          "content_same": false
        },
        {
          "line": 352,
          "old_api": null,
          "new_api": "getScopeInitCallback",
          "old_text": null,
          "new_text": "_engine->getScopeInitCallback()",
          "old_line_content": "    // install global utility functions",
          "new_line_content": "    if (_engine->getScopeInitCallback())",
          "content_same": false
        },
        {
          "line": 356,
          "old_api": null,
          "new_api": "installGlobalUtils",
          "old_text": null,
          "new_text": "installGlobalUtils(*this)",
          "old_line_content": "",
          "new_line_content": "    installGlobalUtils(*this);",
          "content_same": false
        },
        {
          "line": 357,
          "old_api": null,
          "new_api": "install",
          "old_text": null,
          "new_text": "_mongoHelpersProto.install(_global)",
          "old_line_content": "MozJSImplScope::~MozJSImplScope() {",
          "new_line_content": "    _mongoHelpersProto.install(_global);",
          "content_same": false
        },
        {
          "line": 365,
          "old_api": null,
          "new_api": "unregisterOperation",
          "old_text": null,
          "new_text": "unregisterOperation()",
          "old_line_content": "bool MozJSImplScope::hasOutOfMemoryException() {",
          "new_line_content": "    unregisterOperation();",
          "content_same": false
        },
        {
          "line": 377,
          "old_api": null,
          "new_api": "more",
          "old_text": null,
          "new_text": "i.more()",
          "old_line_content": "    }",
          "new_line_content": "    while (i.more()) {",
          "content_same": false
        },
        {
          "line": 378,
          "old_api": null,
          "new_api": "next",
          "old_text": null,
          "new_text": "i.next()",
          "old_line_content": "}",
          "new_line_content": "        BSONElement e = i.next();",
          "content_same": false
        },
        {
          "line": 379,
          "old_api": null,
          "new_api": "fieldName",
          "old_text": null,
          "new_text": "e.fieldName()",
          "old_line_content": "",
          "new_line_content": "        setElement(e.fieldName(), e, *data);",
          "content_same": false
        },
        {
          "line": 386,
          "old_api": null,
          "new_api": "setNumber",
          "old_text": null,
          "new_text": "ObjectWrapper(_context, _global).setNumber(field, val)",
          "old_line_content": "void MozJSImplScope::setString(const char* field, StringData val) {",
          "new_line_content": "    ObjectWrapper(_context, _global).setNumber(field, val);",
          "content_same": false
        },
        {
          "line": 392,
          "old_api": null,
          "new_api": "setString",
          "old_text": null,
          "new_text": "ObjectWrapper(_context, _global).setString(field, val)",
          "old_line_content": "void MozJSImplScope::setBoolean(const char* field, bool val) {",
          "new_line_content": "    ObjectWrapper(_context, _global).setString(field, val);",
          "content_same": false
        },
        {
          "line": 398,
          "old_api": null,
          "new_api": "setBoolean",
          "old_text": null,
          "new_text": "ObjectWrapper(_context, _global).setBoolean(field, val)",
          "old_line_content": "void MozJSImplScope::setElement(const char* field, const BSONElement& e, const BSONObj& parent) {",
          "new_line_content": "    ObjectWrapper(_context, _global).setBoolean(field, val);",
          "content_same": false
        },
        {
          "line": 404,
          "old_api": null,
          "new_api": "setBSONElement",
          "old_text": null,
          "new_text": "ObjectWrapper(_context, _global).setBSONElement(field, e, parent, false)",
          "old_line_content": "void MozJSImplScope::setObject(const char* field, const BSONObj& obj, bool readOnly) {",
          "new_line_content": "    ObjectWrapper(_context, _global).setBSONElement(field, e, parent, false);",
          "content_same": false
        },
        {
          "line": 410,
          "old_api": null,
          "new_api": "setBSON",
          "old_text": null,
          "new_text": "ObjectWrapper(_context, _global).setBSON(field, obj, readOnly)",
          "old_line_content": "int MozJSImplScope::type(const char* field) {",
          "new_line_content": "    ObjectWrapper(_context, _global).setBSON(field, obj, readOnly);",
          "content_same": false
        },
        {
          "line": 416,
          "old_api": null,
          "new_api": "type",
          "old_text": null,
          "new_text": "ObjectWrapper(_context, _global).type(field)",
          "old_line_content": "double MozJSImplScope::getNumber(const char* field) {",
          "new_line_content": "    return ObjectWrapper(_context, _global).type(field);",
          "content_same": false
        },
        {
          "line": 422,
          "old_api": null,
          "new_api": "getNumber",
          "old_text": null,
          "new_text": "ObjectWrapper(_context, _global).getNumber(field)",
          "old_line_content": "int MozJSImplScope::getNumberInt(const char* field) {",
          "new_line_content": "    return ObjectWrapper(_context, _global).getNumber(field);",
          "content_same": false
        },
        {
          "line": 428,
          "old_api": null,
          "new_api": "getNumberInt",
          "old_text": null,
          "new_text": "ObjectWrapper(_context, _global).getNumberInt(field)",
          "old_line_content": "long long MozJSImplScope::getNumberLongLong(const char* field) {",
          "new_line_content": "    return ObjectWrapper(_context, _global).getNumberInt(field);",
          "content_same": false
        },
        {
          "line": 434,
          "old_api": null,
          "new_api": "getNumberLongLong",
          "old_text": null,
          "new_text": "ObjectWrapper(_context, _global).getNumberLongLong(field)",
          "old_line_content": "Decimal128 MozJSImplScope::getNumberDecimal(const char* field) {",
          "new_line_content": "    return ObjectWrapper(_context, _global).getNumberLongLong(field);",
          "content_same": false
        },
        {
          "line": 440,
          "old_api": null,
          "new_api": "getNumberDecimal",
          "old_text": null,
          "new_text": "ObjectWrapper(_context, _global).getNumberDecimal(field)",
          "old_line_content": "std::string MozJSImplScope::getString(const char* field) {",
          "new_line_content": "    return ObjectWrapper(_context, _global).getNumberDecimal(field);",
          "content_same": false
        },
        {
          "line": 446,
          "old_api": null,
          "new_api": "getString",
          "old_text": null,
          "new_text": "ObjectWrapper(_context, _global).getString(field)",
          "old_line_content": "bool MozJSImplScope::getBoolean(const char* field) {",
          "new_line_content": "    return ObjectWrapper(_context, _global).getString(field);",
          "content_same": false
        },
        {
          "line": 452,
          "old_api": null,
          "new_api": "getBoolean",
          "old_text": null,
          "new_text": "ObjectWrapper(_context, _global).getBoolean(field)",
          "old_line_content": "BSONObj MozJSImplScope::getObject(const char* field) {",
          "new_line_content": "    return ObjectWrapper(_context, _global).getBoolean(field);",
          "content_same": false
        },
        {
          "line": 458,
          "old_api": null,
          "new_api": "getObject",
          "old_text": null,
          "new_text": "ObjectWrapper(_context, _global).getObject(field)",
          "old_line_content": "void MozJSImplScope::newFunction(StringData raw, JS::MutableHandleValue out) {",
          "new_line_content": "    return ObjectWrapper(_context, _global).getObject(field);",
          "content_same": false
        },
        {
          "line": 467,
          "old_api": null,
          "new_api": "setCompileOptions",
          "old_text": null,
          "new_text": "setCompileOptions(&co)",
          "old_line_content": "",
          "new_line_content": "    setCompileOptions(&co);",
          "content_same": false
        },
        {
          "line": 468,
          "old_api": null,
          "new_api": "length",
          "old_text": null,
          "new_text": "code.length()",
          "old_line_content": "BSONObj MozJSImplScope::callThreadArgs(const BSONObj& args) {",
          "new_line_content": "    _checkErrorState(JS::Evaluate(_context, _global, co, code.c_str(), code.length(), out));",
          "content_same": false
        },
        {
          "line": 475,
          "old_api": null,
          "new_api": "firstElement",
          "old_text": null,
          "new_text": "args.firstElement()",
          "old_line_content": "",
          "new_line_content": "    ValueReader(_context, &function).fromBSONElement(args.firstElement(), args, true);",
          "content_same": false
        },
        {
          "line": 477,
          "old_api": null,
          "new_api": "nFields",
          "old_text": null,
          "new_text": "args.nFields()",
          "old_line_content": "    BSONObjIterator it(args);",
          "new_line_content": "    int argc = args.nFields() - 1;",
          "content_same": false
        },
        {
          "line": 481,
          "old_api": null,
          "new_api": "next",
          "old_text": null,
          "new_text": "it.next()",
          "old_line_content": "    for (int i = 0; i < argc; ++i) {",
          "new_line_content": "    it.next();",
          "content_same": false
        },
        {
          "line": 485,
          "old_api": null,
          "new_api": "fromBSONElement",
          "old_text": null,
          "new_text": "ValueReader(_context, &value).fromBSONElement(*it, args, true)",
          "old_line_content": "    }",
          "new_line_content": "        ValueReader(_context, &value).fromBSONElement(*it, args, true);",
          "content_same": false
        },
        {
          "line": 486,
          "old_api": null,
          "new_api": "append",
          "old_text": null,
          "new_text": "argv.append(value)",
          "old_line_content": "",
          "new_line_content": "        argv.append(value);",
          "content_same": false
        },
        {
          "line": 487,
          "old_api": null,
          "new_api": "next",
          "old_text": null,
          "new_text": "it.next()",
          "old_line_content": "    JS::RootedValue out(_context);",
          "new_line_content": "        it.next();",
          "content_same": false
        },
        {
          "line": 493,
          "old_api": null,
          "new_api": "JS::Call(_context, thisv, function, argv, &out)",
          "old_text": null,
          "new_text": "JS::Call(_context, thisv, function, argv, &out)",
          "old_line_content": "    ObjectWrapper wout(_context, rout);",
          "new_line_content": "    _checkErrorState(JS::Call(_context, thisv, function, argv, &out), false, true);",
          "content_same": false
        },
        {
          "line": 497,
          "old_api": null,
          "new_api": "setValue",
          "old_text": null,
          "new_text": "wout.setValue(\"ret\", out)",
          "old_line_content": "}",
          "new_line_content": "    wout.setValue(\"ret\", out);",
          "content_same": false
        },
        {
          "line": 499,
          "old_api": null,
          "new_api": "toBSON",
          "old_text": null,
          "new_text": "wout.toBSON()",
          "old_line_content": "bool hasFunctionIdentifier(StringData code) {",
          "new_line_content": "    return wout.toBSON();",
          "content_same": false
        },
        {
          "line": 503,
          "old_api": null,
          "new_api": "find",
          "old_text": null,
          "new_text": "code.find(\"function\")",
          "old_line_content": "    return code[8] == ' ' || code[8] == '(';",
          "new_line_content": "    if (code.size() < 9 || code.find(\"function\") != 0)",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 515,
          "old_api": "length",
          "new_api": null,
          "old_text": "code.length()",
          "new_text": null,
          "old_line_content": "    _checkErrorState(JS::Evaluate(_context, _global, co, code.c_str(), code.length(), fun));",
          "new_line_content": "    JS::CompileOptions co(_context);",
          "content_same": false
        },
        {
          "line": 526,
          "old_api": "_MozJSCreateFunction",
          "new_api": null,
          "old_text": "_MozJSCreateFunction(raw, functionNumber, &fun)",
          "new_text": null,
          "old_line_content": "    _MozJSCreateFunction(raw, functionNumber, &fun);",
          "new_line_content": "    MozJSEntry entry(this);",
          "content_same": false
        },
        {
          "line": 527,
          "old_api": "get",
          "new_api": null,
          "old_text": "fun.get()",
          "new_text": null,
          "old_line_content": "    _funcs.emplace_back(_context, fun.get());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 537,
          "old_api": "size",
          "new_api": null,
          "old_text": "getFunctionCache().size()",
          "new_text": null,
          "old_line_content": "    _MozJSCreateFunction(code, getFunctionCache().size() + 1, &fun);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 539,
          "old_api": "setValue",
          "new_api": null,
          "old_text": "ObjectWrapper(_context, _global).setValue(field, fun)",
          "new_text": null,
          "old_line_content": "    ObjectWrapper(_context, _global).setValue(field, fun);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 545,
          "old_api": "rename",
          "new_api": null,
          "old_text": "ObjectWrapper(_context, _global).rename(from, to)",
          "new_text": null,
          "old_line_content": "    ObjectWrapper(_context, _global).rename(from, to);",
          "new_line_content": "void MozJSImplScope::rename(const char* from, const char* to) {",
          "content_same": false
        },
        {
          "line": 560,
          "old_api": "nFields",
          "new_api": null,
          "old_text": "argsObject->nFields()",
          "new_text": null,
          "old_line_content": "    const int nargs = argsObject ? argsObject->nFields() : 0;",
          "new_line_content": "    auto funcValue = _funcs[func - 1];",
          "content_same": false
        },
        {
          "line": 567,
          "old_api": "next",
          "new_api": null,
          "old_text": "it.next()",
          "new_text": null,
          "old_line_content": "            BSONElement next = it.next();",
          "new_line_content": "    if (nargs) {",
          "content_same": false
        },
        {
          "line": 572,
          "old_api": "append",
          "new_api": null,
          "old_text": "args.append(value)",
          "new_text": null,
          "old_line_content": "            args.append(value);",
          "new_line_content": "            JS::RootedValue value(_context);",
          "content_same": false
        },
        {
          "line": 578,
          "old_api": "fromBSON",
          "new_api": null,
          "old_text": "ValueReader(_context, &smrecv).fromBSON(*recv, nullptr, readOnlyRecv)",
          "new_text": null,
          "old_line_content": "        ValueReader(_context, &smrecv).fromBSON(*recv, nullptr, readOnlyRecv);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 580,
          "old_api": "setObjectOrNull",
          "new_api": null,
          "old_text": "smrecv.setObjectOrNull(_global)",
          "new_text": null,
          "old_line_content": "        smrecv.setObjectOrNull(_global);",
          "new_line_content": "    if (recv)",
          "content_same": false
        },
        {
          "line": 588,
          "old_api": "JS::Call(_context, obj, funcValue, args, &out)",
          "new_api": null,
          "old_text": "JS::Call(_context, obj, funcValue, args, &out)",
          "new_text": null,
          "old_line_content": "    bool success = JS::Call(_context, obj, funcValue, args, &out);",
          "new_line_content": "    JS::RootedValue out(_context);",
          "content_same": false
        },
        {
          "line": 593,
          "old_api": "_checkErrorState",
          "new_api": null,
          "old_text": "_checkErrorState(success)",
          "new_text": null,
          "old_line_content": "    _checkErrorState(success);",
          "new_line_content": "    if (timeoutMs)",
          "content_same": false
        },
        {
          "line": 598,
          "old_api": "instanceOf",
          "new_api": null,
          "old_text": "_nativeFunctionProto.instanceOf(out)",
          "new_text": null,
          "old_line_content": "        if (out.isObject() && _nativeFunctionProto.instanceOf(out)) {",
          "new_line_content": "    if (!ignoreReturn) {",
          "content_same": false
        },
        {
          "line": 599,
          "old_api": "warning",
          "new_api": null,
          "old_text": "warning()",
          "new_text": null,
          "old_line_content": "            warning() << \"storing native function as return value\";",
          "new_line_content": "        // must validate the handle because TerminateExecution may have",
          "content_same": false
        },
        {
          "line": 605,
          "old_api": "setValue",
          "new_api": null,
          "old_text": "ObjectWrapper(_context, _global).setValue(kInvokeResult, out)",
          "new_text": null,
          "old_line_content": "        ObjectWrapper(_context, _global).setValue(kInvokeResult, out);",
          "new_line_content": "            _lastRetIsNativeCode = false;",
          "content_same": false
        },
        {
          "line": 620,
          "old_api": "setCompileOptions",
          "new_api": null,
          "old_text": "setCompileOptions(&co)",
          "new_text": null,
          "old_line_content": "    setCompileOptions(&co);",
          "new_line_content": "    MozJSEntry entry(this);",
          "content_same": false
        },
        {
          "line": 621,
          "old_api": "c_str",
          "new_api": null,
          "old_text": "name.c_str()",
          "new_text": null,
          "old_line_content": "    co.setFile(name.c_str());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 626,
          "old_api": "_checkErrorState",
          "new_api": null,
          "old_text": "_checkErrorState(success, reportError, assertOnError)",
          "new_text": null,
          "old_line_content": "    if (_checkErrorState(success, reportError, assertOnError))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 630,
          "old_api": "startDeadline",
          "new_api": null,
          "old_text": "_engine->getDeadlineMonitor().startDeadline(this, timeoutMs)",
          "new_text": null,
          "old_line_content": "        _engine->getDeadlineMonitor().startDeadline(this, timeoutMs);",
          "new_line_content": "        return false;",
          "content_same": false
        },
        {
          "line": 634,
          "old_api": "JS_ExecuteScript",
          "new_api": null,
          "old_text": "JS_ExecuteScript(_context, _global, script, &out)",
          "new_text": null,
          "old_line_content": "    success = JS_ExecuteScript(_context, _global, script, &out);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 639,
          "old_api": "_checkErrorState",
          "new_api": null,
          "old_text": "_checkErrorState(success, reportError, assertOnError)",
          "new_text": null,
          "old_line_content": "    if (_checkErrorState(success, reportError, assertOnError))",
          "new_line_content": "    if (timeoutMs)",
          "content_same": false
        },
        {
          "line": 644,
          "old_api": "isUndefined",
          "new_api": null,
          "old_text": "out.isUndefined()",
          "new_text": null,
          "old_line_content": "    if (printResult && !out.isUndefined()) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 646,
          "old_api": "toString",
          "new_api": null,
          "old_text": "ValueWriter(_context, out).toString()",
          "new_text": null,
          "old_line_content": "        std::cout << ValueWriter(_context, out).toString() << std::endl;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 657,
          "old_api": "NativeFunctionInfo::make(_context, &obj, func, data)",
          "new_api": null,
          "old_text": "NativeFunctionInfo::make(_context, &obj, func, data)",
          "new_text": null,
          "old_line_content": "    NativeFunctionInfo::make(_context, &obj, func, data);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 661,
          "old_api": "setValue",
          "new_api": null,
          "old_text": "ObjectWrapper(_context, _global).setValue(field, value)",
          "new_text": null,
          "old_line_content": "    ObjectWrapper(_context, _global).setValue(field, value);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 665,
          "old_api": "store",
          "new_api": null,
          "old_text": "_pendingGC.store(true)",
          "new_text": null,
          "old_line_content": "    _pendingGC.store(true);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 666,
          "old_api": "JS_RequestInterruptCallback",
          "new_api": null,
          "old_text": "JS_RequestInterruptCallback(_runtime)",
          "new_text": null,
          "old_line_content": "    JS_RequestInterruptCallback(_runtime);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 672,
          "old_api": "invariant",
          "new_api": null,
          "old_text": "invariant(_opCtx == NULL)",
          "new_text": null,
          "old_line_content": "    invariant(_opCtx == NULL);",
          "new_line_content": "void MozJSImplScope::localConnectForDbEval(OperationContext* txn, const char* dbName) {",
          "content_same": false
        },
        {
          "line": 676,
          "old_api": "uasserted",
          "new_api": null,
          "old_text": "uasserted(12510, \"externalSetup already called, can't call localConnect\")",
          "new_text": null,
          "old_line_content": "        uasserted(12510, \"externalSetup already called, can't call localConnect\");",
          "new_line_content": "    _opCtx = txn;",
          "content_same": false
        },
        {
          "line": 680,
          "old_api": "uasserted",
          "new_api": null,
          "old_text": "uasserted(12511,\n                  str::stream() << \"localConnect previously called with name \" << _localDBName)",
          "new_text": null,
          "old_line_content": "        uasserted(12511,",
          "new_line_content": "    if (_connectState == ConnectState::Local) {",
          "content_same": false
        },
        {
          "line": 681,
          "old_api": "str::stream()",
          "new_api": null,
          "old_text": "str::stream()",
          "new_text": null,
          "old_line_content": "                  str::stream() << \"localConnect previously called with name \" << _localDBName);",
          "new_line_content": "        if (_localDBName == dbName)",
          "content_same": false
        },
        {
          "line": 688,
          "old_api": "installDBAccess",
          "new_api": null,
          "old_text": "installDBAccess()",
          "new_text": null,
          "old_line_content": "    installDBAccess();",
          "new_line_content": "    //       the above conditional statements.",
          "content_same": false
        },
        {
          "line": 692,
          "old_api": "execCoreFiles",
          "new_api": null,
          "old_text": "execCoreFiles()",
          "new_text": null,
          "old_line_content": "    execCoreFiles();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 697,
          "old_api": "str::stream()",
          "new_api": null,
          "old_text": "str::stream()",
          "new_text": null,
          "old_line_content": "    std::string makeDB = str::stream() << \"db = _mongo.getDB(\\\"\" << dbName << \"\\\");\";",
          "new_line_content": "    const char* const makeMongo = \"_mongo = new Mongo()\";",
          "content_same": false
        },
        {
          "line": 703,
          "old_api": "loadStored",
          "new_api": null,
          "old_text": "loadStored(txn)",
          "new_text": null,
          "old_line_content": "    loadStored(txn);",
          "new_line_content": "    _connectState = ConnectState::Local;",
          "content_same": false
        },
        {
          "line": 712,
          "old_api": "uasserted",
          "new_api": null,
          "old_text": "uasserted(12512, \"localConnect already called, can't call externalSetup\")",
          "new_text": null,
          "old_line_content": "        uasserted(12512, \"localConnect already called, can't call externalSetup\");",
          "new_line_content": "    if (_connectState == ConnectState::External)",
          "content_same": false
        },
        {
          "line": 714,
          "old_api": "mongo::sm::reset(0)",
          "new_api": null,
          "old_text": "mongo::sm::reset(0)",
          "new_text": null,
          "old_line_content": "    mongo::sm::reset(0);",
          "new_line_content": "    if (_connectState == ConnectState::Local)",
          "content_same": false
        },
        {
          "line": 724,
          "old_api": "execCoreFiles",
          "new_api": null,
          "old_text": "execCoreFiles()",
          "new_text": null,
          "old_line_content": "    execCoreFiles();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 729,
          "old_api": "unregisterOperation",
          "new_api": null,
          "old_text": "unregisterOperation()",
          "new_text": null,
          "old_line_content": "    unregisterOperation();",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 730,
          "old_api": "store",
          "new_api": null,
          "old_text": "_pendingKill.store(false)",
          "new_text": null,
          "old_line_content": "    _pendingKill.store(false);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 731,
          "old_api": "store",
          "new_api": null,
          "old_text": "_pendingGC.store(false)",
          "new_text": null,
          "old_line_content": "    _pendingGC.store(false);",
          "new_line_content": "void MozJSImplScope::reset() {",
          "content_same": false
        },
        {
          "line": 736,
          "old_api": "install",
          "new_api": null,
          "old_text": "_binDataProto.install(_global)",
          "new_text": null,
          "old_line_content": "    _binDataProto.install(_global);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 737,
          "old_api": "install",
          "new_api": null,
          "old_text": "_bsonProto.install(_global)",
          "new_text": null,
          "old_line_content": "    _bsonProto.install(_global);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 738,
          "old_api": "install",
          "new_api": null,
          "old_text": "_dbPointerProto.install(_global)",
          "new_text": null,
          "old_line_content": "    _dbPointerProto.install(_global);",
          "new_line_content": "void MozJSImplScope::installBSONTypes() {",
          "content_same": false
        },
        {
          "line": 749,
          "old_api": "install",
          "new_api": null,
          "old_text": "_objectProto.install(_global)",
          "new_text": null,
          "old_line_content": "    _objectProto.install(_global);",
          "new_line_content": "    if (Decimal128::enabled) {",
          "content_same": false
        },
        {
          "line": 751,
          "old_api": "install",
          "new_api": null,
          "old_text": "_regExpProto.install(_global)",
          "new_text": null,
          "old_line_content": "    _regExpProto.install(_global);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 756,
          "old_api": "deleteProperty",
          "new_api": null,
          "old_text": "ObjectWrapper(_context, _global).deleteProperty(\"Map\")",
          "new_text": null,
          "old_line_content": "    ObjectWrapper(_context, _global).deleteProperty(\"Map\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 760,
          "old_api": "install",
          "new_api": null,
          "old_text": "_cursorProto.install(_global)",
          "new_text": null,
          "old_line_content": "    _cursorProto.install(_global);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 761,
          "old_api": "install",
          "new_api": null,
          "old_text": "_cursorHandleProto.install(_global)",
          "new_text": null,
          "old_line_content": "    _cursorHandleProto.install(_global);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 762,
          "old_api": "install",
          "new_api": null,
          "old_text": "_dbProto.install(_global)",
          "new_text": null,
          "old_line_content": "    _dbProto.install(_global);",
          "new_line_content": "void MozJSImplScope::installDBAccess() {",
          "content_same": false
        },
        {
          "line": 768,
          "old_api": "install",
          "new_api": null,
          "old_text": "_countDownLatchProto.install(_global)",
          "new_text": null,
          "old_line_content": "    _countDownLatchProto.install(_global);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 769,
          "old_api": "install",
          "new_api": null,
          "old_text": "_jsThreadProto.install(_global)",
          "new_text": null,
          "old_line_content": "    _jsThreadProto.install(_global);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 266,
          "old_api": "uassert",
          "new_api": null,
          "old_text": "uassert(ErrorCodes::JSInterpreterFailure, \"Failed to initialize JSContext\", _context)",
          "new_text": null,
          "old_line_content": "    uassert(ErrorCodes::JSInterpreterFailure, \"Failed to initialize JSContext\", _context);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 779,
          "old_api": "isOK",
          "new_api": null,
          "old_text": "_status.isOK()",
          "new_text": null,
          "old_line_content": "    if (_status.isOK()) {",
          "new_line_content": "    if (_quickExit)",
          "content_same": false
        },
        {
          "line": 781,
          "old_api": "isObject",
          "new_api": null,
          "old_text": "excn.isObject()",
          "new_text": null,
          "old_line_content": "        if (JS_GetPendingException(_context, &excn) && excn.isObject()) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 270,
          "old_api": "JS_DestroyContext",
          "new_api": null,
          "old_text": "JS_DestroyContext(_context)",
          "new_text": null,
          "old_line_content": "    JS_DestroyContext(_context);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 271,
          "old_api": "JS_DestroyRuntime",
          "new_api": null,
          "old_text": "JS_DestroyRuntime(_runtime)",
          "new_text": null,
          "old_line_content": "    JS_DestroyRuntime(_runtime);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 786,
          "old_api": "getValue",
          "new_api": null,
          "old_text": "ObjectWrapper(_context, excn).getValue(\"stack\", &stack)",
          "new_text": null,
          "old_line_content": "            ObjectWrapper(_context, excn).getValue(\"stack\", &stack);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 275,
          "old_api": "PR_DestroyFakeThread",
          "new_api": null,
          "old_text": "PR_DestroyFakeThread(_thread)",
          "new_text": null,
          "old_line_content": "        PR_DestroyFakeThread(_thread);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 276,
          "old_api": "PR_BindThread",
          "new_api": null,
          "old_text": "PR_BindThread(nullptr)",
          "new_text": null,
          "old_line_content": "        PR_BindThread(nullptr);",
          "new_line_content": "    if (_thread) {",
          "content_same": false
        },
        {
          "line": 788,
          "old_api": "toString",
          "new_api": null,
          "old_text": "ValueWriter(_context, excn).toString()",
          "new_text": null,
          "old_line_content": "            ss << ValueWriter(_context, excn).toString() << \" :\\n\"",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 790,
          "old_api": "Status",
          "new_api": null,
          "old_text": "Status(ErrorCodes::JSInterpreterFailure, ss)",
          "new_text": null,
          "old_line_content": "            _status = Status(ErrorCodes::JSInterpreterFailure, ss);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 796,
          "old_api": "reason",
          "new_api": null,
          "old_text": "_status.reason()",
          "new_text": null,
          "old_line_content": "    _error = _status.reason();",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 286,
          "old_api": "getProto",
          "new_api": null,
          "old_text": "_globalProto.getProto()",
          "new_text": null,
          "old_line_content": "      _global(_globalProto.getProto()),",
          "new_line_content": "      _runtime(_mr._runtime),",
          "content_same": false
        },
        {
          "line": 294,
          "old_api": "Status::OK()",
          "new_api": null,
          "old_text": "Status::OK()",
          "new_text": null,
          "old_line_content": "      _status(Status::OK()),",
          "new_line_content": "      _opCtx(nullptr),",
          "content_same": false
        },
        {
          "line": 806,
          "old_api": "uassertStatusOK",
          "new_api": null,
          "old_text": "uassertStatusOK(status)",
          "new_text": null,
          "old_line_content": "        uassertStatusOK(status);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 814,
          "old_api": "setUTF8",
          "new_api": null,
          "old_text": "co->setUTF8(true)",
          "new_text": null,
          "old_line_content": "    co->setUTF8(true);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 836,
          "old_api": "JS_RequestInterruptCallback",
          "new_api": null,
          "old_text": "JS_RequestInterruptCallback(_runtime)",
          "new_text": null,
          "old_line_content": "    JS_RequestInterruptCallback(_runtime);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 328,
          "old_api": "JS_SetGCParameter",
          "new_api": null,
          "old_text": "JS_SetGCParameter(_runtime, JSGC_MAX_BYTES, 0xffffffff)",
          "new_text": null,
          "old_line_content": "    JS_SetGCParameter(_runtime, JSGC_MAX_BYTES, 0xffffffff);",
          "new_line_content": "    // The default is quite low and doesn't seem to directly correlate with",
          "content_same": false
        },
        {
          "line": 840,
          "old_api": "std::move(parentStack)",
          "new_api": null,
          "old_text": "std::move(parentStack)",
          "new_text": null,
          "old_line_content": "    _parentStack = std::move(parentStack);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 330,
          "old_api": "JS_SetInterruptCallback",
          "new_api": null,
          "old_text": "JS_SetInterruptCallback(_runtime, _interruptCallback)",
          "new_text": null,
          "old_line_content": "    JS_SetInterruptCallback(_runtime, _interruptCallback);",
          "new_line_content": "    // jscustomallocator.cpp",
          "content_same": false
        },
        {
          "line": 332,
          "old_api": "JS_SetContextPrivate",
          "new_api": null,
          "old_text": "JS_SetContextPrivate(_context, this)",
          "new_text": null,
          "old_line_content": "    JS_SetContextPrivate(_context, this);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 339,
          "old_api": "JS_InitStandardClasses",
          "new_api": null,
          "old_text": "JS_InitStandardClasses(_context, _global)",
          "new_text": null,
          "old_line_content": "    _checkErrorState(JS_InitStandardClasses(_context, _global));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 341,
          "old_api": "installBSONTypes",
          "new_api": null,
          "old_text": "installBSONTypes()",
          "new_text": null,
          "old_line_content": "    installBSONTypes();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 343,
          "old_api": "JS_FireOnNewGlobalObject",
          "new_api": null,
          "old_text": "JS_FireOnNewGlobalObject(_context, _global)",
          "new_text": null,
          "old_line_content": "    JS_FireOnNewGlobalObject(_context, _global);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 345,
          "old_api": "execSetup",
          "new_api": null,
          "old_text": "execSetup(JSFiles::assert)",
          "new_text": null,
          "old_line_content": "    execSetup(JSFiles::assert);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 350,
          "old_api": "getScopeInitCallback",
          "new_api": null,
          "old_text": "_engine->getScopeInitCallback()(*this)",
          "new_text": null,
          "old_line_content": "        _engine->getScopeInitCallback()(*this);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 354,
          "old_api": "install",
          "new_api": null,
          "old_text": "_mongoHelpersProto.install(_global)",
          "new_text": null,
          "old_line_content": "    _mongoHelpersProto.install(_global);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 359,
          "old_api": "reset",
          "new_api": null,
          "old_text": "x.reset()",
          "new_text": null,
          "old_line_content": "        x.reset();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 374,
          "old_api": "more",
          "new_api": null,
          "old_text": "i.more()",
          "new_text": null,
          "old_line_content": "    while (i.more()) {",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 375,
          "old_api": "next",
          "new_api": null,
          "old_text": "i.next()",
          "new_text": null,
          "old_line_content": "        BSONElement e = i.next();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 376,
          "old_api": "fieldName",
          "new_api": null,
          "old_text": "e.fieldName()",
          "new_text": null,
          "old_line_content": "        setElement(e.fieldName(), e, *data);",
          "new_line_content": "    BSONObjIterator i(*data);",
          "content_same": false
        },
        {
          "line": 383,
          "old_api": "setNumber",
          "new_api": null,
          "old_text": "ObjectWrapper(_context, _global).setNumber(field, val)",
          "new_text": null,
          "old_line_content": "    ObjectWrapper(_context, _global).setNumber(field, val);",
          "new_line_content": "void MozJSImplScope::setNumber(const char* field, double val) {",
          "content_same": false
        },
        {
          "line": 389,
          "old_api": "setString",
          "new_api": null,
          "old_text": "ObjectWrapper(_context, _global).setString(field, val)",
          "new_text": null,
          "old_line_content": "    ObjectWrapper(_context, _global).setString(field, val);",
          "new_line_content": "void MozJSImplScope::setString(const char* field, StringData val) {",
          "content_same": false
        },
        {
          "line": 395,
          "old_api": "setBoolean",
          "new_api": null,
          "old_text": "ObjectWrapper(_context, _global).setBoolean(field, val)",
          "new_text": null,
          "old_line_content": "    ObjectWrapper(_context, _global).setBoolean(field, val);",
          "new_line_content": "void MozJSImplScope::setBoolean(const char* field, bool val) {",
          "content_same": false
        },
        {
          "line": 401,
          "old_api": "setBSONElement",
          "new_api": null,
          "old_text": "ObjectWrapper(_context, _global).setBSONElement(field, e, parent, false)",
          "new_text": null,
          "old_line_content": "    ObjectWrapper(_context, _global).setBSONElement(field, e, parent, false);",
          "new_line_content": "void MozJSImplScope::setElement(const char* field, const BSONElement& e, const BSONObj& parent) {",
          "content_same": false
        },
        {
          "line": 407,
          "old_api": "setBSON",
          "new_api": null,
          "old_text": "ObjectWrapper(_context, _global).setBSON(field, obj, readOnly)",
          "new_text": null,
          "old_line_content": "    ObjectWrapper(_context, _global).setBSON(field, obj, readOnly);",
          "new_line_content": "void MozJSImplScope::setObject(const char* field, const BSONObj& obj, bool readOnly) {",
          "content_same": false
        },
        {
          "line": 413,
          "old_api": "type",
          "new_api": null,
          "old_text": "ObjectWrapper(_context, _global).type(field)",
          "new_text": null,
          "old_line_content": "    return ObjectWrapper(_context, _global).type(field);",
          "new_line_content": "int MozJSImplScope::type(const char* field) {",
          "content_same": false
        },
        {
          "line": 419,
          "old_api": "getNumber",
          "new_api": null,
          "old_text": "ObjectWrapper(_context, _global).getNumber(field)",
          "new_text": null,
          "old_line_content": "    return ObjectWrapper(_context, _global).getNumber(field);",
          "new_line_content": "double MozJSImplScope::getNumber(const char* field) {",
          "content_same": false
        },
        {
          "line": 425,
          "old_api": "getNumberInt",
          "new_api": null,
          "old_text": "ObjectWrapper(_context, _global).getNumberInt(field)",
          "new_text": null,
          "old_line_content": "    return ObjectWrapper(_context, _global).getNumberInt(field);",
          "new_line_content": "int MozJSImplScope::getNumberInt(const char* field) {",
          "content_same": false
        },
        {
          "line": 431,
          "old_api": "getNumberLongLong",
          "new_api": null,
          "old_text": "ObjectWrapper(_context, _global).getNumberLongLong(field)",
          "new_text": null,
          "old_line_content": "    return ObjectWrapper(_context, _global).getNumberLongLong(field);",
          "new_line_content": "long long MozJSImplScope::getNumberLongLong(const char* field) {",
          "content_same": false
        },
        {
          "line": 437,
          "old_api": "getNumberDecimal",
          "new_api": null,
          "old_text": "ObjectWrapper(_context, _global).getNumberDecimal(field)",
          "new_text": null,
          "old_line_content": "    return ObjectWrapper(_context, _global).getNumberDecimal(field);",
          "new_line_content": "Decimal128 MozJSImplScope::getNumberDecimal(const char* field) {",
          "content_same": false
        },
        {
          "line": 443,
          "old_api": "getString",
          "new_api": null,
          "old_text": "ObjectWrapper(_context, _global).getString(field)",
          "new_text": null,
          "old_line_content": "    return ObjectWrapper(_context, _global).getString(field);",
          "new_line_content": "std::string MozJSImplScope::getString(const char* field) {",
          "content_same": false
        },
        {
          "line": 449,
          "old_api": "getBoolean",
          "new_api": null,
          "old_text": "ObjectWrapper(_context, _global).getBoolean(field)",
          "new_text": null,
          "old_line_content": "    return ObjectWrapper(_context, _global).getBoolean(field);",
          "new_line_content": "bool MozJSImplScope::getBoolean(const char* field) {",
          "content_same": false
        },
        {
          "line": 455,
          "old_api": "getObject",
          "new_api": null,
          "old_text": "ObjectWrapper(_context, _global).getObject(field)",
          "new_text": null,
          "old_line_content": "    return ObjectWrapper(_context, _global).getObject(field);",
          "new_line_content": "BSONObj MozJSImplScope::getObject(const char* field) {",
          "content_same": false
        },
        {
          "line": 461,
          "old_api": "str::stream()",
          "new_api": null,
          "old_text": "str::stream()",
          "new_text": null,
          "old_line_content": "    std::string code = str::stream() << \"____MongoToSM_newFunction_temp = \" << raw;",
          "new_line_content": "void MozJSImplScope::newFunction(StringData raw, JS::MutableHandleValue out) {",
          "content_same": false
        },
        {
          "line": 465,
          "old_api": "length",
          "new_api": null,
          "old_text": "code.length()",
          "new_text": null,
          "old_line_content": "    _checkErrorState(JS::Evaluate(_context, _global, co, code.c_str(), code.length(), out));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 472,
          "old_api": "firstElement",
          "new_api": null,
          "old_text": "args.firstElement()",
          "new_text": null,
          "old_line_content": "    ValueReader(_context, &function).fromBSONElement(args.firstElement(), args, true);",
          "new_line_content": "    MozJSEntry entry(this);",
          "content_same": false
        },
        {
          "line": 474,
          "old_api": "nFields",
          "new_api": null,
          "old_text": "args.nFields()",
          "new_text": null,
          "old_line_content": "    int argc = args.nFields() - 1;",
          "new_line_content": "    JS::RootedValue function(_context);",
          "content_same": false
        },
        {
          "line": 478,
          "old_api": "next",
          "new_api": null,
          "old_text": "it.next()",
          "new_text": null,
          "old_line_content": "    it.next();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 482,
          "old_api": "fromBSONElement",
          "new_api": null,
          "old_text": "ValueReader(_context, &value).fromBSONElement(*it, args, true)",
          "new_text": null,
          "old_line_content": "        ValueReader(_context, &value).fromBSONElement(*it, args, true);",
          "new_line_content": "    JS::RootedValue value(_context);",
          "content_same": false
        },
        {
          "line": 483,
          "old_api": "append",
          "new_api": null,
          "old_text": "argv.append(value)",
          "new_text": null,
          "old_line_content": "        argv.append(value);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 484,
          "old_api": "next",
          "new_api": null,
          "old_text": "it.next()",
          "new_text": null,
          "old_line_content": "        it.next();",
          "new_line_content": "    for (int i = 0; i < argc; ++i) {",
          "content_same": false
        },
        {
          "line": 490,
          "old_api": "JS::Call(_context, thisv, function, argv, &out)",
          "new_api": null,
          "old_text": "JS::Call(_context, thisv, function, argv, &out)",
          "new_text": null,
          "old_line_content": "    _checkErrorState(JS::Call(_context, thisv, function, argv, &out), false, true);",
          "new_line_content": "    JS::RootedValue out(_context);",
          "content_same": false
        },
        {
          "line": 494,
          "old_api": "setValue",
          "new_api": null,
          "old_text": "wout.setValue(\"ret\", out)",
          "new_text": null,
          "old_line_content": "    wout.setValue(\"ret\", out);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 496,
          "old_api": "toBSON",
          "new_api": null,
          "old_text": "wout.toBSON()",
          "new_text": null,
          "old_line_content": "    return wout.toBSON();",
          "new_line_content": "    ObjectWrapper wout(_context, rout);",
          "content_same": false
        },
        {
          "line": 500,
          "old_api": "find",
          "new_api": null,
          "old_text": "code.find(\"function\")",
          "new_text": null,
          "old_line_content": "    if (code.size() < 9 || code.find(\"function\") != 0)",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 509,
          "old_api": "str::stream()",
          "new_api": null,
          "old_text": "str::stream()",
          "new_text": null,
          "old_line_content": "    std::string code = str::stream() << \"_funcs\" << functionNumber << \" = \"",
          "new_line_content": "void MozJSImplScope::_MozJSCreateFunction(const char* raw,",
          "content_same": false
        },
        {
          "line": 510,
          "old_api": "StringData",
          "new_api": null,
          "old_text": "StringData(raw)",
          "new_text": null,
          "old_line_content": "                                     << parseJSFunctionOrExpression(_context, StringData(raw));",
          "new_line_content": "                                          ScriptingFunction functionNumber,",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 30,
      "total_additions": 111,
      "total_deletions": 110,
      "total_api_changes": 251
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 3,
        "api_related_lines": 251,
        "non_api_lines": 2,
        "non_api_line_numbers": [
          264,
          263
        ]
      }
    },
    "api_calls_before": 265,
    "api_calls_after": 266,
    "diff_info": {
      "added_lines": 3,
      "removed_lines": 0,
      "total_diff_lines": 15
    }
  }
}
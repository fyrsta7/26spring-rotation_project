{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/duckdb/modified_file/a44fa2cda97592bcd4a4f862062107547601eb8a",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/duckdb/modified_file/a44fa2cda97592bcd4a4f862062107547601eb8a/before.cpp",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/duckdb/modified_file/a44fa2cda97592bcd4a4f862062107547601eb8a/after.cpp",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/duckdb/modified_file/a44fa2cda97592bcd4a4f862062107547601eb8a/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 1812,
          "old_api": "Slice",
          "new_api": "RowIsValid",
          "old_text": "result.Slice(child_sel, info.second.length)",
          "new_text": "unified_list_data.validity.RowIsValid(idx)",
          "old_line_content": "\t\tresult.Slice(child_sel, info.second.length);",
          "new_line_content": "\t\t\tif (!unified_list_data.validity.RowIsValid(idx)) {",
          "content_same": false
        },
        {
          "line": 1854,
          "old_api": "SetVectorType",
          "new_api": "GetType",
          "old_text": "union_vector.SetVectorType(VectorType::CONSTANT_VECTOR)",
          "new_text": "union_vector.GetType()",
          "old_line_content": "\t\tunion_vector.SetVectorType(VectorType::CONSTANT_VECTOR);",
          "new_line_content": "\tD_ASSERT(tag < UnionType::GetMemberCount(union_vector.GetType()));",
          "content_same": false
        },
        {
          "line": 1860,
          "old_api": "Flatten",
          "new_api": "GetVectorType",
          "old_text": "member_vector.Flatten(count)",
          "new_text": "member_vector.GetVectorType()",
          "old_line_content": "\t\tmember_vector.Flatten(count);",
          "new_line_content": "\tif (member_vector.GetVectorType() == VectorType::CONSTANT_VECTOR) {",
          "content_same": false
        },
        {
          "line": 1863,
          "old_api": "AllValid",
          "new_api": "ConstantVector::GetData<union_tag_t>(tag_vector)",
          "old_text": "member_vector.validity.AllValid()",
          "new_text": "ConstantVector::GetData<union_tag_t>(tag_vector)",
          "old_line_content": "\t\tif (member_vector.validity.AllValid()) {",
          "new_line_content": "\t\tConstantVector::GetData<union_tag_t>(tag_vector)[0] = tag;",
          "content_same": false
        },
        {
          "line": 1871,
          "old_api": "SetAllValid",
          "new_api": "AllValid",
          "old_text": "FlatVector::Validity(tag_vector).SetAllValid(count)",
          "new_text": "member_vector.validity.AllValid()",
          "old_line_content": "\t\t\t\tFlatVector::Validity(tag_vector).SetAllValid(count);",
          "new_line_content": "\t\tif (member_vector.validity.AllValid()) {",
          "content_same": false
        },
        {
          "line": 1879,
          "old_api": "FlatVector::GetData<union_tag_t>(tag_vector)",
          "new_api": "SetAllValid",
          "old_text": "FlatVector::GetData<union_tag_t>(tag_vector)",
          "new_text": "FlatVector::Validity(tag_vector).SetAllValid(count)",
          "old_line_content": "\t\t\tauto tag_data = FlatVector::GetData<union_tag_t>(tag_vector);",
          "new_line_content": "\t\t\t\tFlatVector::Validity(tag_vector).SetAllValid(count);",
          "content_same": false
        },
        {
          "line": 1880,
          "old_api": "memset",
          "new_api": "SetAllValid",
          "old_text": "memset(tag_data, tag, count)",
          "new_text": "FlatVector::Validity(union_vector).SetAllValid(count)",
          "old_line_content": "\t\t\tmemset(tag_data, tag, count);",
          "new_line_content": "\t\t\t\tFlatVector::Validity(union_vector).SetAllValid(count);",
          "content_same": false
        },
        {
          "line": 1887,
          "old_api": "UnionVector::GetMember(union_vector, i)",
          "new_api": "FlatVector::GetData<union_tag_t>(tag_vector)",
          "old_text": "UnionVector::GetMember(union_vector, i)",
          "new_text": "FlatVector::GetData<union_tag_t>(tag_vector)",
          "old_line_content": "\t\t\tauto &member = UnionVector::GetMember(union_vector, i);",
          "new_line_content": "\t\t\tauto tag_data = FlatVector::GetData<union_tag_t>(tag_vector);",
          "content_same": false
        },
        {
          "line": 1888,
          "old_api": "SetVectorType",
          "new_api": "memset",
          "old_text": "member.SetVectorType(VectorType::CONSTANT_VECTOR)",
          "new_text": "memset(tag_data, tag, count)",
          "old_line_content": "\t\t\tmember.SetVectorType(VectorType::CONSTANT_VECTOR);",
          "new_line_content": "\t\t\tmemset(tag_data, tag, count);",
          "content_same": false
        },
        {
          "line": 1896,
          "old_api": "StructVector::GetEntries(vector)",
          "new_api": "SetVectorType",
          "old_text": "StructVector::GetEntries(vector)",
          "new_text": "member.SetVectorType(VectorType::CONSTANT_VECTOR)",
          "old_line_content": "\tauto &tag_vector = *StructVector::GetEntries(vector)[0];",
          "new_line_content": "\t\t\tmember.SetVectorType(VectorType::CONSTANT_VECTOR);",
          "content_same": false
        },
        {
          "line": 1897,
          "old_api": "GetVectorType",
          "new_api": "ConstantVector::SetNull(member, true)",
          "old_text": "tag_vector.GetVectorType()",
          "new_text": "ConstantVector::SetNull(member, true)",
          "old_line_content": "\tif (tag_vector.GetVectorType() == VectorType::DICTIONARY_VECTOR) {",
          "new_line_content": "\t\t\tConstantVector::SetNull(member, true);",
          "content_same": false
        },
        {
          "line": 1904,
          "old_api": "FlatVector::GetData<union_tag_t>(tag_vector)",
          "new_api": "StructVector::GetEntries(vector)",
          "old_text": "FlatVector::GetData<union_tag_t>(tag_vector)",
          "new_text": "StructVector::GetEntries(vector)",
          "old_line_content": "\treturn FlatVector::GetData<union_tag_t>(tag_vector)[index];",
          "new_line_content": "\tauto &tag_vector = *StructVector::GetEntries(vector)[0];",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 1811,
          "old_api": null,
          "new_api": "get_index",
          "old_text": null,
          "new_text": "unified_list_data.sel->get_index(i)",
          "old_line_content": "",
          "new_line_content": "\t\t\tauto idx = unified_list_data.sel->get_index(i);",
          "content_same": false
        },
        {
          "line": 1816,
          "old_api": null,
          "new_api": "set_index",
          "old_text": null,
          "new_text": "child_sel.set_index(entry++, list_data[idx].offset + k)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\tchild_sel.set_index(entry++, list_data[idx].offset + k);",
          "content_same": false
        },
        {
          "line": 1820,
          "old_api": null,
          "new_api": "Slice",
          "old_text": null,
          "new_text": "result.Slice(child_sel, info.second.length)",
          "old_line_content": "// Union vector",
          "new_line_content": "\t\tresult.Slice(child_sel, info.second.length);",
          "content_same": false
        },
        {
          "line": 1821,
          "old_api": null,
          "new_api": "Flatten",
          "old_text": null,
          "new_text": "result.Flatten(info.second.length)",
          "old_line_content": "const Vector &UnionVector::GetMember(const Vector &vector, idx_t member_index) {",
          "new_line_content": "\t\tresult.Flatten(info.second.length);",
          "content_same": false
        },
        {
          "line": 1830,
          "old_api": null,
          "new_api": "GetType",
          "old_text": null,
          "new_text": "vector.GetType()",
          "old_line_content": "\treturn *entries[member_index + 1]; // skip the \"tag\" entry",
          "new_line_content": "\tD_ASSERT(member_index < UnionType::GetMemberCount(vector.GetType()));",
          "content_same": false
        },
        {
          "line": 1831,
          "old_api": null,
          "new_api": "StructVector::GetEntries(vector)",
          "old_text": null,
          "new_text": "StructVector::GetEntries(vector)",
          "old_line_content": "}",
          "new_line_content": "\tauto &entries = StructVector::GetEntries(vector);",
          "content_same": false
        },
        {
          "line": 1836,
          "old_api": null,
          "new_api": "GetType",
          "old_text": null,
          "new_text": "vector.GetType()",
          "old_line_content": "}",
          "new_line_content": "\tD_ASSERT(member_index < UnionType::GetMemberCount(vector.GetType()));",
          "content_same": false
        },
        {
          "line": 1837,
          "old_api": null,
          "new_api": "StructVector::GetEntries(vector)",
          "old_text": null,
          "new_text": "StructVector::GetEntries(vector)",
          "old_line_content": "",
          "new_line_content": "\tauto &entries = StructVector::GetEntries(vector);",
          "content_same": false
        },
        {
          "line": 1843,
          "old_api": null,
          "new_api": "StructVector::GetEntries(vector)",
          "old_text": null,
          "new_text": "StructVector::GetEntries(vector)",
          "old_line_content": "void UnionVector::SetToMember(Vector &union_vector, union_tag_t tag, Vector &member_vector, idx_t count,",
          "new_line_content": "\treturn *StructVector::GetEntries(vector)[0];",
          "content_same": false
        },
        {
          "line": 1848,
          "old_api": null,
          "new_api": "StructVector::GetEntries(vector)",
          "old_text": null,
          "new_text": "StructVector::GetEntries(vector)",
          "old_line_content": "\t// Set the union member to the specified vector",
          "new_line_content": "\treturn *StructVector::GetEntries(vector)[0];",
          "content_same": false
        },
        {
          "line": 1853,
          "old_api": null,
          "new_api": "GetType",
          "old_text": null,
          "new_text": "union_vector.GetType().id()",
          "old_line_content": "\t\t// if the member vector is constant, we can set the union to constant as well",
          "new_line_content": "\tD_ASSERT(union_vector.GetType().id() == LogicalTypeId::UNION);",
          "content_same": false
        },
        {
          "line": 1857,
          "old_api": null,
          "new_api": "Reference",
          "old_text": null,
          "new_text": "UnionVector::GetMember(union_vector, tag).Reference(member_vector)",
          "old_line_content": "",
          "new_line_content": "\tUnionVector::GetMember(union_vector, tag).Reference(member_vector);",
          "content_same": false
        },
        {
          "line": 1858,
          "old_api": null,
          "new_api": "UnionVector::GetTags(union_vector)",
          "old_text": null,
          "new_text": "UnionVector::GetTags(union_vector)",
          "old_line_content": "\t} else {",
          "new_line_content": "\tauto &tag_vector = UnionVector::GetTags(union_vector);",
          "content_same": false
        },
        {
          "line": 1862,
          "old_api": null,
          "new_api": "SetVectorType",
          "old_text": null,
          "new_text": "union_vector.SetVectorType(VectorType::CONSTANT_VECTOR)",
          "old_line_content": "",
          "new_line_content": "\t\tunion_vector.SetVectorType(VectorType::CONSTANT_VECTOR);",
          "content_same": false
        },
        {
          "line": 1864,
          "old_api": null,
          "new_api": "ConstantVector::IsNull(member_vector)",
          "old_text": null,
          "new_text": "ConstantVector::IsNull(member_vector)",
          "old_line_content": "\t\t\t// if the member vector is all valid, we can set the tag to constant",
          "new_line_content": "\t\tConstantVector::SetNull(union_vector, ConstantVector::IsNull(member_vector));",
          "content_same": false
        },
        {
          "line": 1868,
          "old_api": null,
          "new_api": "Flatten",
          "old_text": null,
          "new_text": "member_vector.Flatten(count)",
          "old_line_content": "\t\t} else {",
          "new_line_content": "\t\tmember_vector.Flatten(count);",
          "content_same": false
        },
        {
          "line": 1873,
          "old_api": null,
          "new_api": "SetVectorType",
          "old_text": null,
          "new_text": "tag_vector.SetVectorType(VectorType::CONSTANT_VECTOR)",
          "old_line_content": "\t\t\t} else {",
          "new_line_content": "\t\t\ttag_vector.SetVectorType(VectorType::CONSTANT_VECTOR);",
          "content_same": false
        },
        {
          "line": 1874,
          "old_api": null,
          "new_api": "ConstantVector::GetData<union_tag_t>(tag_vector)",
          "old_text": null,
          "new_text": "ConstantVector::GetData<union_tag_t>(tag_vector)",
          "old_line_content": "\t\t\t\t// ensure the tags have the same validity as the member",
          "new_line_content": "\t\t\tauto tag_data = ConstantVector::GetData<union_tag_t>(tag_vector);",
          "content_same": false
        },
        {
          "line": 1877,
          "old_api": null,
          "new_api": "SetVectorType",
          "old_text": null,
          "new_text": "tag_vector.SetVectorType(VectorType::FLAT_VECTOR)",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\ttag_vector.SetVectorType(VectorType::FLAT_VECTOR);",
          "content_same": false
        },
        {
          "line": 1883,
          "old_api": null,
          "new_api": "FlatVector::Validity(member_vector)",
          "old_text": null,
          "new_text": "FlatVector::Validity(member_vector)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\tFlatVector::Validity(union_vector) = FlatVector::Validity(member_vector);",
          "content_same": false
        },
        {
          "line": 1884,
          "old_api": null,
          "new_api": "FlatVector::Validity(member_vector)",
          "old_text": null,
          "new_text": "FlatVector::Validity(member_vector)",
          "old_line_content": "\t// Set the non-selected members to constant null vectors",
          "new_line_content": "\t\t\t\tFlatVector::Validity(tag_vector) = FlatVector::Validity(member_vector);",
          "content_same": false
        },
        {
          "line": 1763,
          "old_api": null,
          "new_api": "list_entry_t",
          "old_text": null,
          "new_text": "list_entry_t(0, 0)",
          "old_line_content": "\t// TODO: better a specific struct?",
          "new_line_content": "\tstd::pair<bool, list_entry_t> info(true, list_entry_t(0, 0));",
          "content_same": false
        },
        {
          "line": 1893,
          "old_api": null,
          "new_api": "GetType",
          "old_text": null,
          "new_text": "union_vector.GetType()",
          "old_line_content": "",
          "new_line_content": "\tfor (idx_t i = 0; i < UnionType::GetMemberCount(union_vector.GetType()); i++) {",
          "content_same": false
        },
        {
          "line": 1895,
          "old_api": null,
          "new_api": "UnionVector::GetMember(union_vector, i)",
          "old_text": null,
          "new_text": "UnionVector::GetMember(union_vector, i)",
          "old_line_content": "\t// the tag vector is always the first struct child.",
          "new_line_content": "\t\t\tauto &member = UnionVector::GetMember(union_vector, i);",
          "content_same": false
        },
        {
          "line": 1768,
          "old_api": null,
          "new_api": "get_index",
          "old_text": null,
          "new_text": "unified_list_data.sel->get_index(i)",
          "old_line_content": "\tidx_t first_length = 0;",
          "new_line_content": "\t\tauto idx = unified_list_data.sel->get_index(i);",
          "content_same": false
        },
        {
          "line": 1769,
          "old_api": null,
          "new_api": "RowIsValid",
          "old_text": null,
          "new_text": "unified_list_data.validity.RowIsValid(idx)",
          "old_line_content": "\tfor (idx_t i = offset; i < offset + count; i++) {",
          "new_line_content": "\t\tif (!unified_list_data.validity.RowIsValid(idx)) {",
          "content_same": false
        },
        {
          "line": 1905,
          "old_api": null,
          "new_api": "GetVectorType",
          "old_text": null,
          "new_text": "tag_vector.GetVectorType()",
          "old_line_content": "}",
          "new_line_content": "\tif (tag_vector.GetVectorType() == VectorType::DICTIONARY_VECTOR) {",
          "content_same": false
        },
        {
          "line": 1906,
          "old_api": null,
          "new_api": "DictionaryVector::Child(tag_vector)",
          "old_text": null,
          "new_text": "DictionaryVector::Child(tag_vector)",
          "old_line_content": "",
          "new_line_content": "\t\tauto &child = DictionaryVector::Child(tag_vector);",
          "content_same": false
        },
        {
          "line": 1779,
          "old_api": null,
          "new_api": "GetVectorType",
          "old_text": null,
          "new_text": "list.GetVectorType()",
          "old_line_content": "\t// now get the child count and determine whether the children are stored consecutively",
          "new_line_content": "\tif (list.GetVectorType() == VectorType::CONSTANT_VECTOR) {",
          "content_same": false
        },
        {
          "line": 1907,
          "old_api": null,
          "new_api": "FlatVector::GetData<union_tag_t>(child)",
          "old_text": null,
          "new_text": "FlatVector::GetData<union_tag_t>(child)",
          "old_line_content": "} // namespace duckdb",
          "new_line_content": "\t\treturn FlatVector::GetData<union_tag_t>(child)[index];",
          "content_same": false
        },
        {
          "line": 1909,
          "old_api": null,
          "new_api": "GetVectorType",
          "old_text": null,
          "new_text": "tag_vector.GetVectorType()",
          "old_line_content": "",
          "new_line_content": "\tif (tag_vector.GetVectorType() == VectorType::CONSTANT_VECTOR) {",
          "content_same": false
        },
        {
          "line": 1910,
          "old_api": null,
          "new_api": "ConstantVector::GetData<union_tag_t>(tag_vector)",
          "old_text": null,
          "new_text": "ConstantVector::GetData<union_tag_t>(tag_vector)",
          "old_line_content": "",
          "new_line_content": "\t\treturn ConstantVector::GetData<union_tag_t>(tag_vector)[0];",
          "content_same": false
        },
        {
          "line": 1912,
          "old_api": null,
          "new_api": "FlatVector::GetData<union_tag_t>(tag_vector)",
          "old_text": null,
          "new_text": "FlatVector::GetData<union_tag_t>(tag_vector)",
          "old_line_content": "",
          "new_line_content": "\treturn FlatVector::GetData<union_tag_t>(tag_vector)[index];",
          "content_same": false
        },
        {
          "line": 1789,
          "old_api": null,
          "new_api": "get_index",
          "old_text": null,
          "new_text": "unified_list_data.sel->get_index(i)",
          "old_line_content": "\t\t\tis_consecutive = false;",
          "new_line_content": "\t\tauto idx = unified_list_data.sel->get_index(i);",
          "content_same": false
        },
        {
          "line": 1790,
          "old_api": null,
          "new_api": "RowIsValid",
          "old_text": null,
          "new_text": "unified_list_data.validity.RowIsValid(idx)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\tif (!unified_list_data.validity.RowIsValid(idx)) {",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 1803,
          "old_api": "get_index",
          "new_api": null,
          "old_text": "unified_list_data.sel->get_index(i)",
          "new_text": null,
          "old_line_content": "\t\t\tauto idx = unified_list_data.sel->get_index(i);",
          "new_line_content": "\t\tinfo.second.length = first_length;",
          "content_same": false
        },
        {
          "line": 1804,
          "old_api": "RowIsValid",
          "new_api": null,
          "old_text": "unified_list_data.validity.RowIsValid(idx)",
          "new_text": null,
          "old_line_content": "\t\t\tif (!unified_list_data.validity.RowIsValid(idx)) {",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1808,
          "old_api": "set_index",
          "new_api": null,
          "old_text": "child_sel.set_index(entry++, list_data[idx].offset + k)",
          "new_text": null,
          "old_line_content": "\t\t\t\tchild_sel.set_index(entry++, list_data[idx].offset + k);",
          "new_line_content": "\t\tidx_t entry = 0;",
          "content_same": false
        },
        {
          "line": 1813,
          "old_api": "Flatten",
          "new_api": null,
          "old_text": "result.Flatten(info.second.length)",
          "new_text": null,
          "old_line_content": "\t\tresult.Flatten(info.second.length);",
          "new_line_content": "\t\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 1822,
          "old_api": "GetType",
          "new_api": null,
          "old_text": "vector.GetType()",
          "new_text": null,
          "old_line_content": "\tD_ASSERT(member_index < UnionType::GetMemberCount(vector.GetType()));",
          "new_line_content": "\t\tinfo.second.offset = 0;",
          "content_same": false
        },
        {
          "line": 1823,
          "old_api": "StructVector::GetEntries(vector)",
          "new_api": null,
          "old_text": "StructVector::GetEntries(vector)",
          "new_text": null,
          "old_line_content": "\tauto &entries = StructVector::GetEntries(vector);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1828,
          "old_api": "GetType",
          "new_api": null,
          "old_text": "vector.GetType()",
          "new_text": null,
          "old_line_content": "\tD_ASSERT(member_index < UnionType::GetMemberCount(vector.GetType()));",
          "new_line_content": "// Union vector",
          "content_same": false
        },
        {
          "line": 1829,
          "old_api": "StructVector::GetEntries(vector)",
          "new_api": null,
          "old_text": "StructVector::GetEntries(vector)",
          "new_text": null,
          "old_line_content": "\tauto &entries = StructVector::GetEntries(vector);",
          "new_line_content": "const Vector &UnionVector::GetMember(const Vector &vector, idx_t member_index) {",
          "content_same": false
        },
        {
          "line": 1835,
          "old_api": "StructVector::GetEntries(vector)",
          "new_api": null,
          "old_text": "StructVector::GetEntries(vector)",
          "new_text": null,
          "old_line_content": "\treturn *StructVector::GetEntries(vector)[0];",
          "new_line_content": "Vector &UnionVector::GetMember(Vector &vector, idx_t member_index) {",
          "content_same": false
        },
        {
          "line": 1840,
          "old_api": "StructVector::GetEntries(vector)",
          "new_api": null,
          "old_text": "StructVector::GetEntries(vector)",
          "new_text": null,
          "old_line_content": "\treturn *StructVector::GetEntries(vector)[0];",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1845,
          "old_api": "GetType",
          "new_api": null,
          "old_text": "union_vector.GetType().id()",
          "new_text": null,
          "old_line_content": "\tD_ASSERT(union_vector.GetType().id() == LogicalTypeId::UNION);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1846,
          "old_api": "GetType",
          "new_api": null,
          "old_text": "union_vector.GetType()",
          "new_text": null,
          "old_line_content": "\tD_ASSERT(tag < UnionType::GetMemberCount(union_vector.GetType()));",
          "new_line_content": "Vector &UnionVector::GetTags(Vector &vector) {",
          "content_same": false
        },
        {
          "line": 1849,
          "old_api": "Reference",
          "new_api": null,
          "old_text": "UnionVector::GetMember(union_vector, tag).Reference(member_vector)",
          "new_text": null,
          "old_line_content": "\tUnionVector::GetMember(union_vector, tag).Reference(member_vector);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1850,
          "old_api": "UnionVector::GetTags(union_vector)",
          "new_api": null,
          "old_text": "UnionVector::GetTags(union_vector)",
          "new_text": null,
          "old_line_content": "\tauto &tag_vector = UnionVector::GetTags(union_vector);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1852,
          "old_api": "GetVectorType",
          "new_api": null,
          "old_text": "member_vector.GetVectorType()",
          "new_text": null,
          "old_line_content": "\tif (member_vector.GetVectorType() == VectorType::CONSTANT_VECTOR) {",
          "new_line_content": "                              bool keep_tags_for_null) {",
          "content_same": false
        },
        {
          "line": 1855,
          "old_api": "ConstantVector::GetData<union_tag_t>(tag_vector)",
          "new_api": null,
          "old_text": "ConstantVector::GetData<union_tag_t>(tag_vector)",
          "new_text": null,
          "old_line_content": "\t\tConstantVector::GetData<union_tag_t>(tag_vector)[0] = tag;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1856,
          "old_api": "ConstantVector::IsNull(member_vector)",
          "new_api": null,
          "old_text": "ConstantVector::IsNull(member_vector)",
          "new_text": null,
          "old_line_content": "\t\tConstantVector::SetNull(union_vector, ConstantVector::IsNull(member_vector));",
          "new_line_content": "\t// Set the union member to the specified vector",
          "content_same": false
        },
        {
          "line": 1861,
          "old_api": "SetVectorType",
          "new_api": null,
          "old_text": "union_vector.SetVectorType(VectorType::FLAT_VECTOR)",
          "new_text": null,
          "old_line_content": "\t\tunion_vector.SetVectorType(VectorType::FLAT_VECTOR);",
          "new_line_content": "\t\t// if the member vector is constant, we can set the union to constant as well",
          "content_same": false
        },
        {
          "line": 1865,
          "old_api": "SetVectorType",
          "new_api": null,
          "old_text": "tag_vector.SetVectorType(VectorType::CONSTANT_VECTOR)",
          "new_text": null,
          "old_line_content": "\t\t\ttag_vector.SetVectorType(VectorType::CONSTANT_VECTOR);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1866,
          "old_api": "ConstantVector::GetData<union_tag_t>(tag_vector)",
          "new_api": null,
          "old_text": "ConstantVector::GetData<union_tag_t>(tag_vector)",
          "new_text": null,
          "old_line_content": "\t\t\tauto tag_data = ConstantVector::GetData<union_tag_t>(tag_vector);",
          "new_line_content": "\t} else {",
          "content_same": false
        },
        {
          "line": 1872,
          "old_api": "SetAllValid",
          "new_api": null,
          "old_text": "FlatVector::Validity(union_vector).SetAllValid(count)",
          "new_text": null,
          "old_line_content": "\t\t\t\tFlatVector::Validity(union_vector).SetAllValid(count);",
          "new_line_content": "\t\t\t// if the member vector is all valid, we can set the tag to constant",
          "content_same": false
        },
        {
          "line": 1875,
          "old_api": "FlatVector::Validity(member_vector)",
          "new_api": null,
          "old_text": "FlatVector::Validity(member_vector)",
          "new_text": null,
          "old_line_content": "\t\t\t\tFlatVector::Validity(union_vector) = FlatVector::Validity(member_vector);",
          "new_line_content": "\t\t\t*tag_data = tag;",
          "content_same": false
        },
        {
          "line": 1876,
          "old_api": "FlatVector::Validity(member_vector)",
          "new_api": null,
          "old_text": "FlatVector::Validity(member_vector)",
          "new_text": null,
          "old_line_content": "\t\t\t\tFlatVector::Validity(tag_vector) = FlatVector::Validity(member_vector);",
          "new_line_content": "\t\t} else {",
          "content_same": false
        },
        {
          "line": 1885,
          "old_api": "GetType",
          "new_api": null,
          "old_text": "union_vector.GetType()",
          "new_text": null,
          "old_line_content": "\tfor (idx_t i = 0; i < UnionType::GetMemberCount(union_vector.GetType()); i++) {",
          "new_line_content": "\t\t\t}",
          "content_same": false
        },
        {
          "line": 1889,
          "old_api": "ConstantVector::SetNull(member, true)",
          "new_api": null,
          "old_text": "ConstantVector::SetNull(member, true)",
          "new_text": null,
          "old_line_content": "\t\t\tConstantVector::SetNull(member, true);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 1764,
          "old_api": "list_entry_t",
          "new_api": null,
          "old_text": "list_entry_t(0, 0)",
          "new_text": null,
          "old_line_content": "\tstd::pair<bool, list_entry_t> info(true, list_entry_t(0, 0));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1770,
          "old_api": "get_index",
          "new_api": null,
          "old_text": "unified_list_data.sel->get_index(i)",
          "new_text": null,
          "old_line_content": "\t\tauto idx = unified_list_data.sel->get_index(i);",
          "new_line_content": "\t\t\tcontinue;",
          "content_same": false
        },
        {
          "line": 1771,
          "old_api": "RowIsValid",
          "new_api": null,
          "old_text": "unified_list_data.validity.RowIsValid(idx)",
          "new_text": null,
          "old_line_content": "\t\tif (!unified_list_data.validity.RowIsValid(idx)) {",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 1898,
          "old_api": "DictionaryVector::Child(tag_vector)",
          "new_api": null,
          "old_text": "DictionaryVector::Child(tag_vector)",
          "new_text": null,
          "old_line_content": "\t\tauto &child = DictionaryVector::Child(tag_vector);",
          "new_line_content": "\t\t}",
          "content_same": false
        },
        {
          "line": 1899,
          "old_api": "FlatVector::GetData<union_tag_t>(child)",
          "new_api": null,
          "old_text": "FlatVector::GetData<union_tag_t>(child)",
          "new_text": null,
          "old_line_content": "\t\treturn FlatVector::GetData<union_tag_t>(child)[index];",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 1901,
          "old_api": "GetVectorType",
          "new_api": null,
          "old_text": "tag_vector.GetVectorType()",
          "new_text": null,
          "old_line_content": "\tif (tag_vector.GetVectorType() == VectorType::CONSTANT_VECTOR) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1902,
          "old_api": "ConstantVector::GetData<union_tag_t>(tag_vector)",
          "new_api": null,
          "old_text": "ConstantVector::GetData<union_tag_t>(tag_vector)",
          "new_text": null,
          "old_line_content": "\t\treturn ConstantVector::GetData<union_tag_t>(tag_vector)[0];",
          "new_line_content": "union_tag_t UnionVector::GetTag(const Vector &vector, idx_t index) {",
          "content_same": false
        },
        {
          "line": 1781,
          "old_api": "get_index",
          "new_api": null,
          "old_text": "unified_list_data.sel->get_index(i)",
          "new_text": null,
          "old_line_content": "\t\tauto idx = unified_list_data.sel->get_index(i);",
          "new_line_content": "\t\treturn info;",
          "content_same": false
        },
        {
          "line": 1782,
          "old_api": "RowIsValid",
          "new_api": null,
          "old_text": "unified_list_data.validity.RowIsValid(idx)",
          "new_text": null,
          "old_line_content": "\t\tif (!unified_list_data.validity.RowIsValid(idx)) {",
          "new_line_content": "\t}",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 12,
      "total_additions": 35,
      "total_deletions": 34,
      "total_api_changes": 81
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 12,
        "api_related_lines": 81,
        "non_api_lines": 8,
        "non_api_line_numbers": [
          1765,
          1777,
          1778,
          1780,
          1783,
          1785,
          1786,
          1787
        ]
      }
    },
    "api_calls_before": 999,
    "api_calls_after": 1000,
    "diff_info": {
      "added_lines": 10,
      "removed_lines": 2,
      "total_diff_lines": 33
    }
  }
}
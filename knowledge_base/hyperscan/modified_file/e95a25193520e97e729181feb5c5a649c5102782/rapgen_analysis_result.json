{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/hyperscan/modified_file/e95a25193520e97e729181feb5c5a649c5102782",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/hyperscan/modified_file/e95a25193520e97e729181feb5c5a649c5102782/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/hyperscan/modified_file/e95a25193520e97e729181feb5c5a649c5102782/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/hyperscan/modified_file/e95a25193520e97e729181feb5c5a649c5102782/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 277,
          "old_api": "isContainerType",
          "new_api": "getSubEngine",
          "old_text": "isContainerType(sub->type)",
          "new_text": "getSubEngine(t, activeIdx)",
          "old_line_content": "        assert(!isContainerType(sub->type));",
          "new_line_content": "    const struct NFA *sub = getSubEngine(t, activeIdx);",
          "content_same": false
        },
        {
          "line": 279,
          "old_api": "nfaCheckFinalState",
          "new_api": "isContainerType",
          "old_text": "nfaCheckFinalState(sub, state, subStreamState, offset, callback,\n                                  context)",
          "new_text": "isContainerType(sub->type)",
          "old_line_content": "        return nfaCheckFinalState(sub, state, subStreamState, offset, callback,",
          "new_line_content": "        assert(!isContainerType(sub->type));",
          "content_same": false
        },
        {
          "line": 294,
          "old_api": "updateQueues",
          "new_api": "getImplNfa",
          "old_text": "updateQueues(t, q, &q1)",
          "new_text": "getImplNfa(n)",
          "old_line_content": "        updateQueues(t, q, &q1);",
          "new_line_content": "    const struct Tamarama *t = getImplNfa(n);",
          "content_same": false
        },
        {
          "line": 314,
          "old_api": "copyQueue",
          "new_api": "getSubEngine",
          "old_text": "copyQueue(t, sub, q, &q1, activeIdx)",
          "new_text": "getSubEngine(t, activeIdx)",
          "old_line_content": "    copyQueue(t, sub, q, &q1, activeIdx);",
          "new_line_content": "    const struct NFA *sub = getSubEngine(t, activeIdx);",
          "content_same": false
        },
        {
          "line": 405,
          "old_api": "updateQueues",
          "new_api": "getImplNfa",
          "old_text": "updateQueues(t, q, &q1)",
          "new_text": "getImplNfa(n)",
          "old_line_content": "        updateQueues(t, q, &q1);",
          "new_line_content": "    const struct Tamarama *t = getImplNfa(n);",
          "content_same": false
        },
        {
          "line": 406,
          "old_api": "nfaQueueExec_raw",
          "new_api": "q_cur_loc",
          "old_text": "nfaQueueExec_raw(q1.nfa, &q1, end)",
          "new_text": "q_cur_loc(q)",
          "old_line_content": "        rv = nfaQueueExec_raw(q1.nfa, &q1, end);",
          "new_line_content": "    while (q->cur < q->end && q_cur_loc(q) <= end) {",
          "content_same": false
        },
        {
          "line": 428,
          "old_api": "updateQueues",
          "new_api": "q_cur_loc",
          "old_text": "updateQueues(t, q, &q1)",
          "new_text": "q_cur_loc(q)",
          "old_line_content": "        updateQueues(t, q, &q1);",
          "new_line_content": "    while (q->cur < q->end && q_cur_loc(q) <= end &&",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 388,
          "old_api": null,
          "new_api": "getImplNfa",
          "old_text": null,
          "new_text": "getImplNfa(n)",
          "old_line_content": "    if (activeIdx == t->numSubEngines) {",
          "new_line_content": "    const struct Tamarama *t = getImplNfa(n);",
          "content_same": false
        },
        {
          "line": 389,
          "old_api": null,
          "new_api": "loadActiveIdx",
          "old_text": null,
          "new_text": "loadActiveIdx(q->streamState, t->activeIdxSize)",
          "old_line_content": "        return NFA_ZOMBIE_NO;",
          "new_line_content": "    u32 activeIdx = loadActiveIdx(q->streamState, t->activeIdxSize);",
          "content_same": false
        },
        {
          "line": 263,
          "old_api": null,
          "new_api": "DEBUG_PRINTF",
          "old_text": null,
          "new_text": "DEBUG_PRINTF(\"external queue\\n\")",
          "old_line_content": "#endif",
          "new_line_content": "    DEBUG_PRINTF(\"external queue\\n\");",
          "content_same": false
        },
        {
          "line": 264,
          "old_api": null,
          "new_api": "debugQueue",
          "old_text": null,
          "new_text": "debugQueue(q)",
          "old_line_content": "}",
          "new_line_content": "    debugQueue(q);",
          "content_same": false
        },
        {
          "line": 393,
          "old_api": null,
          "new_api": "getSubEngine",
          "old_text": null,
          "new_text": "getSubEngine(t, activeIdx)",
          "old_line_content": "    struct mq q1;",
          "new_line_content": "    const struct NFA *sub = getSubEngine(t, activeIdx);",
          "content_same": false
        },
        {
          "line": 396,
          "old_api": null,
          "new_api": "copyQueue",
          "old_text": null,
          "new_text": "copyQueue(t, sub, q, &q1, activeIdx)",
          "old_line_content": "}",
          "new_line_content": "    copyQueue(t, sub, q, &q1, activeIdx);",
          "content_same": false
        },
        {
          "line": 397,
          "old_api": null,
          "new_api": "nfaGetZombieStatus",
          "old_text": null,
          "new_text": "nfaGetZombieStatus(sub, &q1, loc)",
          "old_line_content": "",
          "new_line_content": "    return nfaGetZombieStatus(sub, &q1, loc);",
          "content_same": false
        },
        {
          "line": 271,
          "old_api": null,
          "new_api": "getImplNfa",
          "old_text": null,
          "new_text": "getImplNfa(n)",
          "old_line_content": "    if (activeIdx == t->numSubEngines) {",
          "new_line_content": "    const struct Tamarama *t = getImplNfa(n);",
          "content_same": false
        },
        {
          "line": 272,
          "old_api": null,
          "new_api": "loadActiveIdx",
          "old_text": null,
          "new_text": "loadActiveIdx(streamState, t->activeIdxSize)",
          "old_line_content": "        return MO_CONTINUE_MATCHING;",
          "new_line_content": "    u32 activeIdx = loadActiveIdx(streamState, t->activeIdxSize);",
          "content_same": false
        },
        {
          "line": 401,
          "old_api": null,
          "new_api": "DEBUG_PRINTF",
          "old_text": null,
          "new_text": "DEBUG_PRINTF(\"exec\\n\")",
          "old_line_content": "    char rv = MO_ALIVE;",
          "new_line_content": "    DEBUG_PRINTF(\"exec\\n\");",
          "content_same": false
        },
        {
          "line": 278,
          "old_api": null,
          "new_api": "nfaAcceptsEod",
          "old_text": null,
          "new_text": "nfaAcceptsEod(sub)",
          "old_line_content": "        const char *subStreamState = streamState + t->activeIdxSize;",
          "new_line_content": "    if (nfaAcceptsEod(sub)) {",
          "content_same": false
        },
        {
          "line": 407,
          "old_api": null,
          "new_api": "updateQueues",
          "old_text": null,
          "new_text": "updateQueues(t, q, &q1)",
          "old_line_content": "        q->report_current = q1.report_current;",
          "new_line_content": "        updateQueues(t, q, &q1);",
          "content_same": false
        },
        {
          "line": 408,
          "old_api": null,
          "new_api": "nfaQueueExec_raw",
          "old_text": null,
          "new_text": "nfaQueueExec_raw(q1.nfa, &q1, end)",
          "old_line_content": "        copy = 1;",
          "new_line_content": "        rv = nfaQueueExec_raw(q1.nfa, &q1, end);",
          "content_same": false
        },
        {
          "line": 281,
          "old_api": null,
          "new_api": "nfaCheckFinalState",
          "old_text": null,
          "new_text": "nfaCheckFinalState(sub, state, subStreamState, offset, callback,\n                                  context)",
          "old_line_content": "    }",
          "new_line_content": "        return nfaCheckFinalState(sub, state, subStreamState, offset, callback,",
          "content_same": false
        },
        {
          "line": 411,
          "old_api": null,
          "new_api": "can_stop_matching",
          "old_text": null,
          "new_text": "can_stop_matching(q->scratch)",
          "old_line_content": "        }",
          "new_line_content": "        if (can_stop_matching(q->scratch)) {",
          "content_same": false
        },
        {
          "line": 416,
          "old_api": null,
          "new_api": "copyBack",
          "old_text": null,
          "new_text": "copyBack(t, q, &q1)",
          "old_line_content": "    return rv;",
          "new_line_content": "        copyBack(t, q, &q1);",
          "content_same": false
        },
        {
          "line": 290,
          "old_api": null,
          "new_api": "DEBUG_PRINTF",
          "old_text": null,
          "new_text": "DEBUG_PRINTF(\"exec rose\\n\")",
          "old_line_content": "    q1.cur = q1.end = 0;",
          "new_line_content": "    DEBUG_PRINTF(\"exec rose\\n\");",
          "content_same": false
        },
        {
          "line": 423,
          "old_api": null,
          "new_api": "DEBUG_PRINTF",
          "old_text": null,
          "new_text": "DEBUG_PRINTF(\"exec to match\\n\")",
          "old_line_content": "    char rv = 0;",
          "new_line_content": "    DEBUG_PRINTF(\"exec to match\\n\");",
          "content_same": false
        },
        {
          "line": 296,
          "old_api": null,
          "new_api": "updateQueues",
          "old_text": null,
          "new_text": "updateQueues(t, q, &q1)",
          "old_line_content": "",
          "new_line_content": "        updateQueues(t, q, &q1);",
          "content_same": false
        },
        {
          "line": 427,
          "old_api": null,
          "new_api": "getImplNfa",
          "old_text": null,
          "new_text": "getImplNfa(n)",
          "old_line_content": "           rv != MO_MATCHES_PENDING) {",
          "new_line_content": "    const struct Tamarama *t = getImplNfa(n);",
          "content_same": false
        },
        {
          "line": 300,
          "old_api": null,
          "new_api": "nfaQueueExecRose",
          "old_text": null,
          "new_text": "nfaQueueExecRose(q1.nfa, &q1, report)",
          "old_line_content": "",
          "new_line_content": "        rv = nfaQueueExecRose(q1.nfa, &q1, report);",
          "content_same": false
        },
        {
          "line": 430,
          "old_api": null,
          "new_api": "updateQueues",
          "old_text": null,
          "new_text": "updateQueues(t, q, &q1)",
          "old_line_content": "        q->report_current = q1.report_current;",
          "new_line_content": "        updateQueues(t, q, &q1);",
          "content_same": false
        },
        {
          "line": 303,
          "old_api": null,
          "new_api": "DEBUG_PRINTF",
          "old_text": null,
          "new_text": "DEBUG_PRINTF(\"exec rose rv:%u\\n\", rv)",
          "old_line_content": "}",
          "new_line_content": "    DEBUG_PRINTF(\"exec rose rv:%u\\n\", rv);",
          "content_same": false
        },
        {
          "line": 431,
          "old_api": null,
          "new_api": "nfaQueueExec2_raw",
          "old_text": null,
          "new_text": "nfaQueueExec2_raw(q1.nfa, &q1, end)",
          "old_line_content": "        copy = 1;",
          "new_line_content": "        rv = nfaQueueExec2_raw(q1.nfa, &q1, end);",
          "content_same": false
        },
        {
          "line": 308,
          "old_api": null,
          "new_api": "getImplNfa",
          "old_text": null,
          "new_text": "getImplNfa(n)",
          "old_line_content": "    if (activeIdx == t->numSubEngines) {",
          "new_line_content": "    const struct Tamarama *t = getImplNfa(n);",
          "content_same": false
        },
        {
          "line": 309,
          "old_api": null,
          "new_api": "loadActiveIdx",
          "old_text": null,
          "new_text": "loadActiveIdx(q->streamState, t->activeIdxSize)",
          "old_line_content": "        return 1;",
          "new_line_content": "    u32 activeIdx = loadActiveIdx(q->streamState, t->activeIdxSize);",
          "content_same": false
        },
        {
          "line": 436,
          "old_api": null,
          "new_api": "copyBack",
          "old_text": null,
          "new_text": "copyBack(t, q, &q1)",
          "old_line_content": "    return rv;",
          "new_line_content": "        copyBack(t, q, &q1);",
          "content_same": false
        },
        {
          "line": 316,
          "old_api": null,
          "new_api": "copyQueue",
          "old_text": null,
          "new_text": "copyQueue(t, sub, q, &q1, activeIdx)",
          "old_line_content": "}",
          "new_line_content": "    copyQueue(t, sub, q, &q1, activeIdx);",
          "content_same": false
        },
        {
          "line": 317,
          "old_api": null,
          "new_api": "nfaReportCurrentMatches",
          "old_text": null,
          "new_text": "nfaReportCurrentMatches(sub, &q1)",
          "old_line_content": "",
          "new_line_content": "    return nfaReportCurrentMatches(sub, &q1);",
          "content_same": false
        },
        {
          "line": 322,
          "old_api": null,
          "new_api": "getImplNfa",
          "old_text": null,
          "new_text": "getImplNfa(n)",
          "old_line_content": "    if (activeIdx == t->numSubEngines) {",
          "new_line_content": "    const struct Tamarama *t = getImplNfa(n);",
          "content_same": false
        },
        {
          "line": 323,
          "old_api": null,
          "new_api": "loadActiveIdx",
          "old_text": null,
          "new_text": "loadActiveIdx(q->streamState, t->activeIdxSize)",
          "old_line_content": "        return 0;",
          "new_line_content": "    u32 activeIdx = loadActiveIdx(q->streamState, t->activeIdxSize);",
          "content_same": false
        },
        {
          "line": 327,
          "old_api": null,
          "new_api": "getSubEngine",
          "old_text": null,
          "new_text": "getSubEngine(t, activeIdx)",
          "old_line_content": "    struct mq q1;",
          "new_line_content": "    const struct NFA *sub = getSubEngine(t, activeIdx);",
          "content_same": false
        },
        {
          "line": 330,
          "old_api": null,
          "new_api": "copyQueue",
          "old_text": null,
          "new_text": "copyQueue(t, sub, q, &q1, activeIdx)",
          "old_line_content": "}",
          "new_line_content": "    copyQueue(t, sub, q, &q1, activeIdx);",
          "content_same": false
        },
        {
          "line": 331,
          "old_api": null,
          "new_api": "nfaInAcceptState",
          "old_text": null,
          "new_text": "nfaInAcceptState(sub, report, &q1)",
          "old_line_content": "",
          "new_line_content": "    return nfaInAcceptState(sub, report, &q1);",
          "content_same": false
        },
        {
          "line": 335,
          "old_api": null,
          "new_api": "getImplNfa",
          "old_text": null,
          "new_text": "getImplNfa(n)",
          "old_line_content": "    if (activeIdx == t->numSubEngines) {",
          "new_line_content": "    const struct Tamarama *t = getImplNfa(n);",
          "content_same": false
        },
        {
          "line": 336,
          "old_api": null,
          "new_api": "loadActiveIdx",
          "old_text": null,
          "new_text": "loadActiveIdx(q->streamState, t->activeIdxSize)",
          "old_line_content": "        return 0;",
          "new_line_content": "    u32 activeIdx = loadActiveIdx(q->streamState, t->activeIdxSize);",
          "content_same": false
        },
        {
          "line": 340,
          "old_api": null,
          "new_api": "getSubEngine",
          "old_text": null,
          "new_text": "getSubEngine(t, activeIdx)",
          "old_line_content": "    struct mq q1;",
          "new_line_content": "    const struct NFA *sub = getSubEngine(t, activeIdx);",
          "content_same": false
        },
        {
          "line": 343,
          "old_api": null,
          "new_api": "copyQueue",
          "old_text": null,
          "new_text": "copyQueue(t, sub, q, &q1, activeIdx)",
          "old_line_content": "}",
          "new_line_content": "    copyQueue(t, sub, q, &q1, activeIdx);",
          "content_same": false
        },
        {
          "line": 344,
          "old_api": null,
          "new_api": "nfaInAnyAcceptState",
          "old_text": null,
          "new_text": "nfaInAnyAcceptState(sub, &q1)",
          "old_line_content": "",
          "new_line_content": "    return nfaInAnyAcceptState(sub, &q1);",
          "content_same": false
        },
        {
          "line": 348,
          "old_api": null,
          "new_api": "DEBUG_PRINTF",
          "old_text": null,
          "new_text": "DEBUG_PRINTF(\"init state\\n\")",
          "old_line_content": "    char *ptr = q->streamState;",
          "new_line_content": "    DEBUG_PRINTF(\"init state\\n\");",
          "content_same": false
        },
        {
          "line": 349,
          "old_api": null,
          "new_api": "getImplNfa",
          "old_text": null,
          "new_text": "getImplNfa(n)",
          "old_line_content": "    // Use activeIdxSize as a sentinel value and initialize the state to",
          "new_line_content": "    const struct Tamarama *t = getImplNfa(n);",
          "content_same": false
        },
        {
          "line": 375,
          "old_api": null,
          "new_api": "loadActiveIdx",
          "old_text": null,
          "new_text": "loadActiveIdx(src, t->activeIdxSize)",
          "old_line_content": "        return 0;",
          "new_line_content": "    u32 activeIdx = loadActiveIdx(src, t->activeIdxSize);",
          "content_same": false
        },
        {
          "line": 353,
          "old_api": null,
          "new_api": "storeActiveIdx",
          "old_text": null,
          "new_text": "storeActiveIdx(t, ptr, t->numSubEngines)",
          "old_line_content": "}",
          "new_line_content": "    storeActiveIdx(t, ptr, t->numSubEngines);",
          "content_same": false
        },
        {
          "line": 359,
          "old_api": null,
          "new_api": "getImplNfa",
          "old_text": null,
          "new_text": "getImplNfa(n)",
          "old_line_content": "    if (activeIdx == t->numSubEngines) {",
          "new_line_content": "    const struct Tamarama *t = getImplNfa(n);",
          "content_same": false
        },
        {
          "line": 360,
          "old_api": null,
          "new_api": "loadActiveIdx",
          "old_text": null,
          "new_text": "loadActiveIdx(q->streamState, t->activeIdxSize)",
          "old_line_content": "        return 0;",
          "new_line_content": "    u32 activeIdx = loadActiveIdx(q->streamState, t->activeIdxSize);",
          "content_same": false
        },
        {
          "line": 365,
          "old_api": null,
          "new_api": "getSubEngine",
          "old_text": null,
          "new_text": "getSubEngine(t, activeIdx)",
          "old_line_content": "    struct mq q1;",
          "new_line_content": "    const struct NFA *sub = getSubEngine(t, activeIdx);",
          "content_same": false
        },
        {
          "line": 368,
          "old_api": null,
          "new_api": "copyQueueProperties",
          "old_text": null,
          "new_text": "copyQueueProperties(q, &q1, t->activeIdxSize)",
          "old_line_content": "}",
          "new_line_content": "    copyQueueProperties(q, &q1, t->activeIdxSize);",
          "content_same": false
        },
        {
          "line": 369,
          "old_api": null,
          "new_api": "nfaQueueCompressState",
          "old_text": null,
          "new_text": "nfaQueueCompressState(sub, &q1, loc)",
          "old_line_content": "",
          "new_line_content": "    return nfaQueueCompressState(sub, &q1, loc);",
          "content_same": false
        },
        {
          "line": 246,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(q->cur > 1 && q1->items[q1->end - 1].type == MQE_END)",
          "old_line_content": "        numItems++;",
          "new_line_content": "        assert(q->cur > 1 && q1->items[q1->end - 1].type == MQE_END);",
          "content_same": false
        },
        {
          "line": 374,
          "old_api": null,
          "new_api": "getImplNfa",
          "old_text": null,
          "new_text": "getImplNfa(n)",
          "old_line_content": "    if (activeIdx == t->numSubEngines) {",
          "new_line_content": "    const struct Tamarama *t = getImplNfa(n);",
          "content_same": false
        },
        {
          "line": 380,
          "old_api": null,
          "new_api": "getSubEngine",
          "old_text": null,
          "new_text": "getSubEngine(t, activeIdx)",
          "old_line_content": "    const char *subStreamState = (const char *)src + t->activeIdxSize;",
          "new_line_content": "    const struct NFA *sub = getSubEngine(t, activeIdx);",
          "content_same": false
        },
        {
          "line": 254,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(q1->cur < q1->end)",
          "old_line_content": "        if (type > MQE_END) {",
          "new_line_content": "        assert(q1->cur < q1->end);",
          "content_same": false
        },
        {
          "line": 383,
          "old_api": null,
          "new_api": "nfaExpandState",
          "old_text": null,
          "new_text": "nfaExpandState(sub, dest, subStreamState, offset, key)",
          "old_line_content": "",
          "new_line_content": "    return nfaExpandState(sub, dest, subStreamState, offset, key);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 386,
          "old_api": "getImplNfa",
          "new_api": null,
          "old_text": "getImplNfa(n)",
          "new_text": null,
          "old_line_content": "    const struct Tamarama *t = getImplNfa(n);",
          "new_line_content": "enum nfa_zombie_status nfaExecTamarama0_zombie_status(const struct NFA *n,",
          "content_same": false
        },
        {
          "line": 387,
          "old_api": "loadActiveIdx",
          "new_api": null,
          "old_text": "loadActiveIdx(q->streamState, t->activeIdxSize)",
          "new_text": null,
          "old_line_content": "    u32 activeIdx = loadActiveIdx(q->streamState, t->activeIdxSize);",
          "new_line_content": "                                                      struct mq *q, s64a loc) {",
          "content_same": false
        },
        {
          "line": 261,
          "old_api": "DEBUG_PRINTF",
          "new_api": null,
          "old_text": "DEBUG_PRINTF(\"external queue\\n\")",
          "new_text": null,
          "old_line_content": "    DEBUG_PRINTF(\"external queue\\n\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 262,
          "old_api": "debugQueue",
          "new_api": null,
          "old_text": "debugQueue(q)",
          "new_text": null,
          "old_line_content": "    debugQueue(q);",
          "new_line_content": "#ifdef DEBUG",
          "content_same": false
        },
        {
          "line": 391,
          "old_api": "getSubEngine",
          "new_api": null,
          "old_text": "getSubEngine(t, activeIdx)",
          "new_text": null,
          "old_line_content": "    const struct NFA *sub = getSubEngine(t, activeIdx);",
          "new_line_content": "        return NFA_ZOMBIE_NO;",
          "content_same": false
        },
        {
          "line": 394,
          "old_api": "copyQueue",
          "new_api": null,
          "old_text": "copyQueue(t, sub, q, &q1, activeIdx)",
          "new_text": null,
          "old_line_content": "    copyQueue(t, sub, q, &q1, activeIdx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 395,
          "old_api": "nfaGetZombieStatus",
          "new_api": null,
          "old_text": "nfaGetZombieStatus(sub, &q1, loc)",
          "new_text": null,
          "old_line_content": "    return nfaGetZombieStatus(sub, &q1, loc);",
          "new_line_content": "    struct mq q1;",
          "content_same": false
        },
        {
          "line": 269,
          "old_api": "getImplNfa",
          "new_api": null,
          "old_text": "getImplNfa(n)",
          "new_text": null,
          "old_line_content": "    const struct Tamarama *t = getImplNfa(n);",
          "new_line_content": "                              const char *streamState, u64a offset,",
          "content_same": false
        },
        {
          "line": 270,
          "old_api": "loadActiveIdx",
          "new_api": null,
          "old_text": "loadActiveIdx(streamState, t->activeIdxSize)",
          "new_text": null,
          "old_line_content": "    u32 activeIdx = loadActiveIdx(streamState, t->activeIdxSize);",
          "new_line_content": "                              NfaCallback callback, void *context) {",
          "content_same": false
        },
        {
          "line": 399,
          "old_api": "DEBUG_PRINTF",
          "new_api": null,
          "old_text": "DEBUG_PRINTF(\"exec\\n\")",
          "new_text": null,
          "old_line_content": "    DEBUG_PRINTF(\"exec\\n\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 275,
          "old_api": "getSubEngine",
          "new_api": null,
          "old_text": "getSubEngine(t, activeIdx)",
          "new_text": null,
          "old_line_content": "    const struct NFA *sub = getSubEngine(t, activeIdx);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 276,
          "old_api": "nfaAcceptsEod",
          "new_api": null,
          "old_text": "nfaAcceptsEod(sub)",
          "new_text": null,
          "old_line_content": "    if (nfaAcceptsEod(sub)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 403,
          "old_api": "getImplNfa",
          "new_api": null,
          "old_text": "getImplNfa(n)",
          "new_text": null,
          "old_line_content": "    const struct Tamarama *t = getImplNfa(n);",
          "new_line_content": "    char rv = MO_ALIVE;",
          "content_same": false
        },
        {
          "line": 404,
          "old_api": "q_cur_loc",
          "new_api": null,
          "old_text": "q_cur_loc(q)",
          "new_text": null,
          "old_line_content": "    while (q->cur < q->end && q_cur_loc(q) <= end) {",
          "new_line_content": "    char copy = 0;",
          "content_same": false
        },
        {
          "line": 409,
          "old_api": "can_stop_matching",
          "new_api": null,
          "old_text": "can_stop_matching(q->scratch)",
          "new_text": null,
          "old_line_content": "        if (can_stop_matching(q->scratch)) {",
          "new_line_content": "        q->report_current = q1.report_current;",
          "content_same": false
        },
        {
          "line": 414,
          "old_api": "copyBack",
          "new_api": null,
          "old_text": "copyBack(t, q, &q1)",
          "new_text": null,
          "old_line_content": "        copyBack(t, q, &q1);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 288,
          "old_api": "DEBUG_PRINTF",
          "new_api": null,
          "old_text": "DEBUG_PRINTF(\"exec rose\\n\")",
          "new_text": null,
          "old_line_content": "    DEBUG_PRINTF(\"exec rose\\n\");",
          "new_line_content": "char nfaExecTamarama0_QR(const struct NFA *n, struct mq *q,",
          "content_same": false
        },
        {
          "line": 292,
          "old_api": "getImplNfa",
          "new_api": null,
          "old_text": "getImplNfa(n)",
          "new_text": null,
          "old_line_content": "    const struct Tamarama *t = getImplNfa(n);",
          "new_line_content": "    q1.cur = q1.end = 0;",
          "content_same": false
        },
        {
          "line": 421,
          "old_api": "DEBUG_PRINTF",
          "new_api": null,
          "old_text": "DEBUG_PRINTF(\"exec to match\\n\")",
          "new_text": null,
          "old_line_content": "    DEBUG_PRINTF(\"exec to match\\n\");",
          "new_line_content": "char nfaExecTamarama0_Q2(const struct NFA *n,",
          "content_same": false
        },
        {
          "line": 425,
          "old_api": "getImplNfa",
          "new_api": null,
          "old_text": "getImplNfa(n)",
          "new_text": null,
          "old_line_content": "    const struct Tamarama *t = getImplNfa(n);",
          "new_line_content": "    char rv = 0;",
          "content_same": false
        },
        {
          "line": 298,
          "old_api": "nfaQueueExecRose",
          "new_api": null,
          "old_text": "nfaQueueExecRose(q1.nfa, &q1, report)",
          "new_text": null,
          "old_line_content": "        rv = nfaQueueExecRose(q1.nfa, &q1, report);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 426,
          "old_api": "q_cur_loc",
          "new_api": null,
          "old_text": "q_cur_loc(q)",
          "new_text": null,
          "old_line_content": "    while (q->cur < q->end && q_cur_loc(q) <= end &&",
          "new_line_content": "    char copy = 0;",
          "content_same": false
        },
        {
          "line": 301,
          "old_api": "DEBUG_PRINTF",
          "new_api": null,
          "old_text": "DEBUG_PRINTF(\"exec rose rv:%u\\n\", rv)",
          "new_text": null,
          "old_line_content": "    DEBUG_PRINTF(\"exec rose rv:%u\\n\", rv);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 429,
          "old_api": "nfaQueueExec2_raw",
          "new_api": null,
          "old_text": "nfaQueueExec2_raw(q1.nfa, &q1, end)",
          "new_text": null,
          "old_line_content": "        rv = nfaQueueExec2_raw(q1.nfa, &q1, end);",
          "new_line_content": "           rv != MO_MATCHES_PENDING) {",
          "content_same": false
        },
        {
          "line": 306,
          "old_api": "getImplNfa",
          "new_api": null,
          "old_text": "getImplNfa(n)",
          "new_text": null,
          "old_line_content": "    const struct Tamarama *t = getImplNfa(n);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 307,
          "old_api": "loadActiveIdx",
          "new_api": null,
          "old_text": "loadActiveIdx(q->streamState, t->activeIdxSize)",
          "new_text": null,
          "old_line_content": "    u32 activeIdx = loadActiveIdx(q->streamState, t->activeIdxSize);",
          "new_line_content": "char nfaExecTamarama0_reportCurrent(const struct NFA *n, struct mq *q) {",
          "content_same": false
        },
        {
          "line": 434,
          "old_api": "copyBack",
          "new_api": null,
          "old_text": "copyBack(t, q, &q1)",
          "new_text": null,
          "old_line_content": "        copyBack(t, q, &q1);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 312,
          "old_api": "getSubEngine",
          "new_api": null,
          "old_text": "getSubEngine(t, activeIdx)",
          "new_text": null,
          "old_line_content": "    const struct NFA *sub = getSubEngine(t, activeIdx);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 315,
          "old_api": "nfaReportCurrentMatches",
          "new_api": null,
          "old_text": "nfaReportCurrentMatches(sub, &q1)",
          "new_text": null,
          "old_line_content": "    return nfaReportCurrentMatches(sub, &q1);",
          "new_line_content": "    struct mq q1;",
          "content_same": false
        },
        {
          "line": 320,
          "old_api": "getImplNfa",
          "new_api": null,
          "old_text": "getImplNfa(n)",
          "new_text": null,
          "old_line_content": "    const struct Tamarama *t = getImplNfa(n);",
          "new_line_content": "char nfaExecTamarama0_inAccept(const struct NFA *n, ReportID report,",
          "content_same": false
        },
        {
          "line": 321,
          "old_api": "loadActiveIdx",
          "new_api": null,
          "old_text": "loadActiveIdx(q->streamState, t->activeIdxSize)",
          "new_text": null,
          "old_line_content": "    u32 activeIdx = loadActiveIdx(q->streamState, t->activeIdxSize);",
          "new_line_content": "                               struct mq *q) {",
          "content_same": false
        },
        {
          "line": 325,
          "old_api": "getSubEngine",
          "new_api": null,
          "old_text": "getSubEngine(t, activeIdx)",
          "new_text": null,
          "old_line_content": "    const struct NFA *sub = getSubEngine(t, activeIdx);",
          "new_line_content": "        return 0;",
          "content_same": false
        },
        {
          "line": 328,
          "old_api": "copyQueue",
          "new_api": null,
          "old_text": "copyQueue(t, sub, q, &q1, activeIdx)",
          "new_text": null,
          "old_line_content": "    copyQueue(t, sub, q, &q1, activeIdx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 329,
          "old_api": "nfaInAcceptState",
          "new_api": null,
          "old_text": "nfaInAcceptState(sub, report, &q1)",
          "new_text": null,
          "old_line_content": "    return nfaInAcceptState(sub, report, &q1);",
          "new_line_content": "    struct mq q1;",
          "content_same": false
        },
        {
          "line": 333,
          "old_api": "getImplNfa",
          "new_api": null,
          "old_text": "getImplNfa(n)",
          "new_text": null,
          "old_line_content": "    const struct Tamarama *t = getImplNfa(n);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 334,
          "old_api": "loadActiveIdx",
          "new_api": null,
          "old_text": "loadActiveIdx(q->streamState, t->activeIdxSize)",
          "new_text": null,
          "old_line_content": "    u32 activeIdx = loadActiveIdx(q->streamState, t->activeIdxSize);",
          "new_line_content": "char nfaExecTamarama0_inAnyAccept(const struct NFA *n, struct mq *q) {",
          "content_same": false
        },
        {
          "line": 338,
          "old_api": "getSubEngine",
          "new_api": null,
          "old_text": "getSubEngine(t, activeIdx)",
          "new_text": null,
          "old_line_content": "    const struct NFA *sub = getSubEngine(t, activeIdx);",
          "new_line_content": "        return 0;",
          "content_same": false
        },
        {
          "line": 341,
          "old_api": "copyQueue",
          "new_api": null,
          "old_text": "copyQueue(t, sub, q, &q1, activeIdx)",
          "new_text": null,
          "old_line_content": "    copyQueue(t, sub, q, &q1, activeIdx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 342,
          "old_api": "nfaInAnyAcceptState",
          "new_api": null,
          "old_text": "nfaInAnyAcceptState(sub, &q1)",
          "new_text": null,
          "old_line_content": "    return nfaInAnyAcceptState(sub, &q1);",
          "new_line_content": "    struct mq q1;",
          "content_same": false
        },
        {
          "line": 346,
          "old_api": "DEBUG_PRINTF",
          "new_api": null,
          "old_text": "DEBUG_PRINTF(\"init state\\n\")",
          "new_text": null,
          "old_line_content": "    DEBUG_PRINTF(\"init state\\n\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 347,
          "old_api": "getImplNfa",
          "new_api": null,
          "old_text": "getImplNfa(n)",
          "new_text": null,
          "old_line_content": "    const struct Tamarama *t = getImplNfa(n);",
          "new_line_content": "char nfaExecTamarama0_queueInitState(const struct NFA *n, struct mq *q) {",
          "content_same": false
        },
        {
          "line": 351,
          "old_api": "storeActiveIdx",
          "new_api": null,
          "old_text": "storeActiveIdx(t, ptr, t->numSubEngines)",
          "new_text": null,
          "old_line_content": "    storeActiveIdx(t, ptr, t->numSubEngines);",
          "new_line_content": "    // Use activeIdxSize as a sentinel value and initialize the state to",
          "content_same": false
        },
        {
          "line": 357,
          "old_api": "getImplNfa",
          "new_api": null,
          "old_text": "getImplNfa(n)",
          "new_text": null,
          "old_line_content": "    const struct Tamarama *t = getImplNfa(n);",
          "new_line_content": "char nfaExecTamarama0_queueCompressState(const struct NFA *n,",
          "content_same": false
        },
        {
          "line": 358,
          "old_api": "loadActiveIdx",
          "new_api": null,
          "old_text": "loadActiveIdx(q->streamState, t->activeIdxSize)",
          "new_text": null,
          "old_line_content": "    u32 activeIdx = loadActiveIdx(q->streamState, t->activeIdxSize);",
          "new_line_content": "                                         const struct mq *q, s64a loc) {",
          "content_same": false
        },
        {
          "line": 363,
          "old_api": "getSubEngine",
          "new_api": null,
          "old_text": "getSubEngine(t, activeIdx)",
          "new_text": null,
          "old_line_content": "    const struct NFA *sub = getSubEngine(t, activeIdx);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 366,
          "old_api": "copyQueueProperties",
          "new_api": null,
          "old_text": "copyQueueProperties(q, &q1, t->activeIdxSize)",
          "new_text": null,
          "old_line_content": "    copyQueueProperties(q, &q1, t->activeIdxSize);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 367,
          "old_api": "nfaQueueCompressState",
          "new_api": null,
          "old_text": "nfaQueueCompressState(sub, &q1, loc)",
          "new_text": null,
          "old_line_content": "    return nfaQueueCompressState(sub, &q1, loc);",
          "new_line_content": "    struct mq q1;",
          "content_same": false
        },
        {
          "line": 372,
          "old_api": "getImplNfa",
          "new_api": null,
          "old_text": "getImplNfa(n)",
          "new_text": null,
          "old_line_content": "    const struct Tamarama *t = getImplNfa(n);",
          "new_line_content": "char nfaExecTamarama0_expandState(const struct NFA *n, void *dest,",
          "content_same": false
        },
        {
          "line": 373,
          "old_api": "loadActiveIdx",
          "new_api": null,
          "old_text": "loadActiveIdx(src, t->activeIdxSize)",
          "new_text": null,
          "old_line_content": "    u32 activeIdx = loadActiveIdx(src, t->activeIdxSize);",
          "new_line_content": "                                  const void *src, u64a offset, u8 key) {",
          "content_same": false
        },
        {
          "line": 378,
          "old_api": "getSubEngine",
          "new_api": null,
          "old_text": "getSubEngine(t, activeIdx)",
          "new_text": null,
          "old_line_content": "    const struct NFA *sub = getSubEngine(t, activeIdx);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 381,
          "old_api": "nfaExpandState",
          "new_api": null,
          "old_text": "nfaExpandState(sub, dest, subStreamState, offset, key)",
          "new_text": null,
          "old_line_content": "    return nfaExpandState(sub, dest, subStreamState, offset, key);",
          "new_line_content": "",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 7,
      "total_additions": 53,
      "total_deletions": 51,
      "total_api_changes": 111
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 3,
        "api_related_lines": 111,
        "non_api_lines": 1,
        "non_api_line_numbers": [
          247
        ]
      }
    },
    "api_calls_before": 98,
    "api_calls_after": 100,
    "diff_info": {
      "added_lines": 3,
      "removed_lines": 1,
      "total_diff_lines": 22
    }
  }
}
{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/mpv/modified_file/455af6aa68a96fa38f17174c35e95e13098886e0",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/mpv/modified_file/455af6aa68a96fa38f17174c35e95e13098886e0/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/mpv/modified_file/455af6aa68a96fa38f17174c35e95e13098886e0/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/mpv/modified_file/455af6aa68a96fa38f17174c35e95e13098886e0/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 188,
          "old_api": "memset",
          "new_api": "memcpy",
          "old_text": "memset(dst, 0, opt->type->size)",
          "new_text": "memcpy(&temp, src, opt->type->size)",
          "old_line_content": "    memset(dst, 0, opt->type->size);",
          "new_line_content": "        memcpy(&temp, src, opt->type->size);",
          "content_same": false
        },
        {
          "line": 189,
          "old_api": "m_option_copy",
          "new_api": "memset",
          "old_text": "m_option_copy(opt, dst, &temp)",
          "new_text": "memset(dst, 0, opt->type->size)",
          "old_line_content": "    m_option_copy(opt, dst, &temp);",
          "new_line_content": "        memset(dst, 0, opt->type->size);",
          "content_same": false
        },
        {
          "line": 200,
          "old_api": "MP_TARRAY_GROW",
          "new_api": "assert",
          "old_text": "MP_TARRAY_GROW(data, data->gdata, data->num_gdata)",
          "new_text": "assert(group_index < data->root->num_groups)",
          "old_line_content": "    MP_TARRAY_GROW(data, data->gdata, data->num_gdata);",
          "new_line_content": "    assert(group_index < data->root->num_groups);",
          "content_same": false
        },
        {
          "line": 204,
          "old_api": "m_config_gdata",
          "new_api": "MP_TARRAY_GROW",
          "old_text": "m_config_gdata(copy, group_index)",
          "new_text": "MP_TARRAY_GROW(data, data->gdata, data->num_gdata)",
          "old_line_content": "        copy ? m_config_gdata(copy, group_index) : NULL;",
          "new_line_content": "    MP_TARRAY_GROW(data, data->gdata, data->num_gdata);",
          "content_same": false
        },
        {
          "line": 293,
          "old_api": "assert",
          "new_api": "m_config_restore_backups",
          "old_text": "assert(config->shadow->num_listeners == 0)",
          "new_text": "m_config_restore_backups(config)",
          "old_line_content": "        assert(config->shadow->num_listeners == 0);",
          "new_line_content": "    m_config_restore_backups(config);",
          "content_same": false
        },
        {
          "line": 298,
          "old_api": "talloc_free",
          "new_api": "pthread_mutex_destroy",
          "old_text": "talloc_free(config->data)",
          "new_text": "pthread_mutex_destroy(&config->shadow->lock)",
          "old_line_content": "    talloc_free(config->data);",
          "new_line_content": "        pthread_mutex_destroy(&config->shadow->lock);",
          "content_same": false
        },
        {
          "line": 309,
          "old_api": "talloc_ptrtype",
          "new_api": "talloc",
          "old_text": "talloc_ptrtype(config, subopts)",
          "new_text": "talloc(talloc_ctx, struct m_config)",
          "old_line_content": "    struct m_sub_options *subopts = talloc_ptrtype(config, subopts);",
          "new_line_content": "    struct m_config *config = talloc(talloc_ctx, struct m_config);",
          "content_same": false
        },
        {
          "line": 343,
          "old_api": "set_defaults",
          "new_api": "m_config_new",
          "old_text": "desc->set_defaults(c->global, c->optstruct)",
          "new_text": "m_config_new(talloc_ctx, log, desc->priv_size, desc->priv_defaults,\n                     desc->options)",
          "old_line_content": "        desc->set_defaults(c->global, c->optstruct);",
          "new_line_content": "        m_config_new(talloc_ctx, log, desc->priv_size, desc->priv_defaults,",
          "content_same": false
        },
        {
          "line": 381,
          "old_api": "talloc_zero_size",
          "new_api": "find_group",
          "old_text": "talloc_zero_size(ta_parent, desc->priv_size)",
          "new_text": "find_group(global, desc->options)",
          "old_line_content": "        void *d = talloc_zero_size(ta_parent, desc->priv_size);",
          "new_line_content": "    const struct m_config_group *group = find_group(global, desc->options);",
          "content_same": false
        },
        {
          "line": 383,
          "old_api": "memcpy",
          "new_api": "mp_get_config_group",
          "old_text": "memcpy(d, desc->priv_defaults, desc->priv_size)",
          "new_text": "mp_get_config_group(ta_parent, global, group->group)",
          "old_line_content": "            memcpy(d, desc->priv_defaults, desc->priv_size);",
          "new_line_content": "        return mp_get_config_group(ta_parent, global, group->group);",
          "content_same": false
        },
        {
          "line": 410,
          "old_api": "strcmp",
          "new_api": "m_config_from_obj_desc",
          "old_text": "strcmp(entry->name, name)",
          "new_text": "m_config_from_obj_desc(ta_parent, log, global, desc)",
          "old_line_content": "        if (name && strcmp(entry->name, name) == 0) {",
          "new_line_content": "    struct m_config *config = m_config_from_obj_desc(ta_parent, log, global, desc);",
          "content_same": false
        },
        {
          "line": 454,
          "old_api": "talloc_free",
          "new_api": "m_config_set_option_raw",
          "old_text": "talloc_free(bc)",
          "new_text": "m_config_set_option_raw(config, bc->co, bc->backup, 0)",
          "old_line_content": "        talloc_free(bc);",
          "new_line_content": "        m_config_set_option_raw(config, bc->co, bc->backup, 0);",
          "content_same": false
        },
        {
          "line": 464,
          "old_api": "MP_ERR",
          "new_api": "bstr0",
          "old_text": "MP_ERR(config, \"Option %s not found.\\n\", opt)",
          "new_text": "bstr0(opt)",
          "old_line_content": "        MP_ERR(config, \"Option %s not found.\\n\", opt);",
          "new_line_content": "    struct m_config_option *co = m_config_get_co(config, bstr0(opt));",
          "content_same": false
        },
        {
          "line": 487,
          "old_api": "talloc_ptrtype",
          "new_api": "add_sub_group",
          "old_text": "talloc_ptrtype(config, conf)",
          "new_text": "add_sub_group(config, NULL, parent_group_index, -1,\n                          desc.global_opts)",
          "old_line_content": "            struct m_sub_options *conf = talloc_ptrtype(config, conf);",
          "new_line_content": "            add_sub_group(config, NULL, parent_group_index, -1,",
          "content_same": false
        },
        {
          "line": 571,
          "old_api": "add_sub_group",
          "new_api": "substruct_read_ptr",
          "old_text": "add_sub_group(config, prefix, group_index, opt->offset, new_subopts)",
          "new_text": "substruct_read_ptr(ptr)",
          "old_line_content": "            add_sub_group(config, prefix, group_index, opt->offset, new_subopts);",
          "new_line_content": "                assert(!substruct_read_ptr(ptr));",
          "content_same": false
        },
        {
          "line": 574,
          "old_api": "init_obj_settings_list",
          "new_api": "concat_name",
          "old_text": "init_obj_settings_list(config, group_index, objlist)",
          "new_text": "concat_name(config, name_prefix, opt->name)",
          "old_line_content": "            init_obj_settings_list(config, group_index, objlist);",
          "new_line_content": "            const char *prefix = concat_name(config, name_prefix, opt->name);",
          "content_same": false
        },
        {
          "line": 777,
          "old_api": "includefunc",
          "new_api": "MP_ERR",
          "old_text": "config->includefunc(config->includefunc_ctx, param, flags)",
          "new_text": "MP_ERR(config, \"Maximum 'include' nesting depth exceeded.\\n\")",
          "old_line_content": "        config->includefunc(config->includefunc_ctx, param, flags);",
          "new_line_content": "            MP_ERR(config, \"Maximum 'include' nesting depth exceeded.\\n\");",
          "content_same": false
        },
        {
          "line": 784,
          "old_api": "strcmp",
          "new_api": "m_config_finish_default_profile",
          "old_text": "strcmp(co->name, \"show-profile\")",
          "new_text": "m_config_finish_default_profile(config, flags)",
          "old_line_content": "    if (config->use_profiles && strcmp(co->name, \"show-profile\") == 0)",
          "new_line_content": "            m_config_finish_default_profile(config, flags);",
          "content_same": false
        },
        {
          "line": 791,
          "old_api": "mp_info",
          "new_api": "strcmp",
          "old_text": "mp_info(config->log, \"%s\", mp_help_text)",
          "new_text": "strcmp(co->name, \"h\")",
          "old_line_content": "        mp_info(config->log, \"%s\", mp_help_text);",
          "new_line_content": "    if (config->is_toplevel && (strcmp(co->name, \"h\") == 0 ||",
          "content_same": false
        },
        {
          "line": 797,
          "old_api": "strcmp",
          "new_api": "m_config_print_option_list",
          "old_text": "strcmp(co->name, \"list-options\")",
          "new_text": "m_config_print_option_list(config, h)",
          "old_line_content": "    if (strcmp(co->name, \"list-options\") == 0) {",
          "new_line_content": "            m_config_print_option_list(config, h);",
          "content_same": false
        },
        {
          "line": 818,
          "old_api": "m_config_handle_special_options",
          "new_api": "handle_set_opt_flags",
          "old_text": "m_config_handle_special_options(config, co, data, flags)",
          "new_text": "handle_set_opt_flags(config, co, flags)",
          "old_line_content": "    r = m_config_handle_special_options(config, co, data, flags);",
          "new_line_content": "    int r = handle_set_opt_flags(config, co, flags);",
          "content_same": false
        },
        {
          "line": 849,
          "old_api": "option_set_callback",
          "new_api": "handle_set_opt_flags",
          "old_text": "config->option_set_callback(config->option_set_callback_cb,\n                                           co, data, flags)",
          "new_text": "handle_set_opt_flags(config, co, flags)",
          "old_line_content": "        return config->option_set_callback(config->option_set_callback_cb,",
          "new_line_content": "        int r = handle_set_opt_flags(config, co, flags);",
          "content_same": false
        },
        {
          "line": 936,
          "old_api": "m_config_mogrify_cli_opt",
          "new_api": "assert",
          "old_text": "m_config_mogrify_cli_opt(config, &name, &negate, &(int){0})",
          "new_text": "assert(config != NULL)",
          "old_line_content": "        m_config_mogrify_cli_opt(config, &name, &negate, &(int){0});",
          "new_line_content": "    assert(config != NULL);",
          "content_same": false
        },
        {
          "line": 953,
          "old_api": "assert",
          "new_api": "bstr0",
          "old_text": "assert(co->opt->type->parse)",
          "new_text": "bstr0(\"no\")",
          "old_line_content": "    assert(co->opt->type->parse);",
          "new_line_content": "        param = bstr0(\"no\");",
          "content_same": false
        },
        {
          "line": 980,
          "old_api": "MP_ERR",
          "new_api": "m_option_free",
          "old_text": "MP_ERR(config, \"Error parsing option %.*s (%s)\\n\",\n               BSTR_P(name), m_option_strerror(r))",
          "new_text": "m_option_free(co->opt, &val)",
          "old_line_content": "        MP_ERR(config, \"Error parsing option %.*s (%s)\\n\",",
          "new_line_content": "    m_option_free(co->opt, &val);",
          "content_same": false
        },
        {
          "line": 1008,
          "old_api": "m_config_set_option_raw",
          "new_api": "m_option_set_node",
          "old_text": "m_config_set_option_raw(config, co, &val, flags)",
          "new_text": "m_option_set_node(co->opt, &val, data)",
          "old_line_content": "        r = m_config_set_option_raw(config, co, &val, flags);",
          "new_line_content": "        r = m_option_set_node(co->opt, &val, data);",
          "content_same": false
        },
        {
          "line": 1012,
          "old_api": "MP_DBG",
          "new_api": "m_config_set_option_raw",
          "old_text": "MP_DBG(config, \"Setting option '%.*s' = %s (flags = %d) -> %d\\n\",\n               BSTR_P(name), s ? s : \"?\", flags, r)",
          "new_text": "m_config_set_option_raw(config, co, &val, flags)",
          "old_line_content": "        MP_DBG(config, \"Setting option '%.*s' = %s (flags = %d) -> %d\\n\",",
          "new_line_content": "        r = m_config_set_option_raw(config, co, &val, flags);",
          "content_same": false
        },
        {
          "line": 1014,
          "old_api": "talloc_free",
          "new_api": "mp_msg_test",
          "old_text": "talloc_free(s)",
          "new_text": "mp_msg_test(config->log, MSGL_V)",
          "old_line_content": "        talloc_free(s);",
          "new_line_content": "    if (mp_msg_test(config->log, MSGL_V)) {",
          "content_same": false
        },
        {
          "line": 1017,
          "old_api": "m_option_free",
          "new_api": "BSTR_P",
          "old_text": "m_option_free(co->opt, &val)",
          "new_text": "BSTR_P(name)",
          "old_line_content": "    m_option_free(co->opt, &val);",
          "new_line_content": "               BSTR_P(name), s ? s : \"?\", flags, r);",
          "content_same": false
        },
        {
          "line": 1055,
          "old_api": "MP_INFO",
          "new_api": "talloc_memdup",
          "old_text": "MP_INFO(config, \"Options:\\n\\n\")",
          "new_text": "talloc_memdup(NULL, config->opts, config->num_opts * sizeof(sorted[0]))",
          "old_line_content": "    MP_INFO(config, \"Options:\\n\\n\");",
          "new_line_content": "        talloc_memdup(NULL, config->opts, config->num_opts * sizeof(sorted[0]));",
          "content_same": false
        },
        {
          "line": 1065,
          "old_api": "MP_INFO",
          "new_api": "strstr",
          "old_text": "MP_INFO(config, \" Choices:\")",
          "new_text": "strstr(co->name, name)",
          "old_line_content": "            MP_INFO(config, \" Choices:\");",
          "new_line_content": "        if (strcmp(name, \"*\") != 0 && !strstr(co->name, name))",
          "content_same": false
        },
        {
          "line": 1076,
          "old_api": "snprintf",
          "new_api": "MP_INFO",
          "old_text": "snprintf(max, sizeof(max), \"any\")",
          "new_text": "MP_INFO(config, \" %s\", opt->type->name)",
          "old_line_content": "            snprintf(max, sizeof(max), \"any\");",
          "new_line_content": "            MP_INFO(config, \" %s\", opt->type->name);",
          "content_same": false
        },
        {
          "line": 1084,
          "old_api": "m_config_get_co_default",
          "new_api": "snprintf",
          "old_text": "m_config_get_co_default(config, co)",
          "new_text": "snprintf(max, sizeof(max), \"%.14g\", opt->max)",
          "old_line_content": "        const void *defptr = m_config_get_co_default(config, co);",
          "new_line_content": "                snprintf(max, sizeof(max), \"%.14g\", opt->max);",
          "content_same": false
        },
        {
          "line": 1088,
          "old_api": "m_option_pretty_print",
          "new_api": "m_config_get_co_default",
          "old_text": "m_option_pretty_print(opt, defptr)",
          "new_text": "m_config_get_co_default(config, co)",
          "old_line_content": "            def = m_option_pretty_print(opt, defptr);",
          "new_line_content": "        const void *defptr = m_config_get_co_default(config, co);",
          "content_same": false
        },
        {
          "line": 1155,
          "old_api": "talloc_strdup",
          "new_api": "m_config_get_profile0",
          "old_text": "talloc_strdup(p, name)",
          "new_text": "m_config_get_profile0(config, name)",
          "old_line_content": "    p->name = talloc_strdup(p, name);",
          "new_line_content": "    struct m_profile *p = m_config_get_profile0(config, name);",
          "content_same": false
        },
        {
          "line": 1221,
          "old_api": "node_array_add",
          "new_api": "node_init",
          "old_text": "node_array_add(&root, MPV_FORMAT_NODE_MAP)",
          "new_text": "node_init(&root, MPV_FORMAT_NODE_ARRAY, NULL)",
          "old_line_content": "        struct mpv_node *entry = node_array_add(&root, MPV_FORMAT_NODE_MAP);",
          "new_line_content": "    node_init(&root, MPV_FORMAT_NODE_ARRAY, NULL);",
          "content_same": false
        },
        {
          "line": 1225,
          "old_api": "node_map_add_string",
          "new_api": "node_array_add",
          "old_text": "node_map_add_string(entry, \"profile-desc\", profile->desc)",
          "new_text": "node_array_add(&root, MPV_FORMAT_NODE_MAP)",
          "old_line_content": "            node_map_add_string(entry, \"profile-desc\", profile->desc);",
          "new_line_content": "        struct mpv_node *entry = node_array_add(&root, MPV_FORMAT_NODE_MAP);",
          "content_same": false
        },
        {
          "line": 1232,
          "old_api": "node_map_add_string",
          "new_api": "node_map_add",
          "old_text": "node_map_add_string(opt_entry, \"key\", profile->opts[n * 2 + 0])",
          "new_text": "node_map_add(entry, \"options\", MPV_FORMAT_NODE_ARRAY)",
          "old_line_content": "            node_map_add_string(opt_entry, \"key\", profile->opts[n * 2 + 0]);",
          "new_line_content": "            node_map_add(entry, \"options\", MPV_FORMAT_NODE_ARRAY);",
          "content_same": false
        },
        {
          "line": 1247,
          "old_api": "allocate_option_data",
          "new_api": "assert",
          "old_text": "allocate_option_data(config->shadow, config, 0, config->data)",
          "new_text": "assert(!config->shadow && !config->global->config)",
          "old_line_content": "        allocate_option_data(config->shadow, config, 0, config->data);",
          "new_line_content": "    assert(!config->shadow && !config->global->config);",
          "content_same": false
        },
        {
          "line": 1249,
          "old_api": "pthread_mutex_init",
          "new_api": "talloc_zero",
          "old_text": "pthread_mutex_init(&config->shadow->lock, NULL)",
          "new_text": "talloc_zero(NULL, struct m_config_shadow)",
          "old_line_content": "    pthread_mutex_init(&config->shadow->lock, NULL);",
          "new_line_content": "    config->shadow = talloc_zero(NULL, struct m_config_shadow);",
          "content_same": false
        },
        {
          "line": 1286,
          "old_api": "pthread_mutex_lock",
          "new_api": "talloc_zero",
          "old_text": "pthread_mutex_lock(&shadow->lock)",
          "new_text": "talloc_zero(ta_parent, struct m_config_cache)",
          "old_line_content": "    pthread_mutex_lock(&shadow->lock);",
          "new_line_content": "    struct m_config_cache *cache = talloc_zero(ta_parent, struct m_config_cache);",
          "content_same": false
        },
        {
          "line": 1287,
          "old_api": "allocate_option_data",
          "new_api": "talloc_set_destructor",
          "old_text": "allocate_option_data(cache, root, group_index, shadow->data)",
          "new_text": "talloc_set_destructor(cache, cache_destroy)",
          "old_line_content": "    cache->data = allocate_option_data(cache, root, group_index, shadow->data);",
          "new_line_content": "    talloc_set_destructor(cache, cache_destroy);",
          "content_same": false
        },
        {
          "line": 1309,
          "old_api": "m_config_gdata",
          "new_api": "assert",
          "old_text": "m_config_gdata(dst, n)",
          "new_text": "assert(group_s >= 0 && group_e <= dst->root->num_groups)",
          "old_line_content": "        struct m_group_data *gdst = m_config_gdata(dst, n);",
          "new_line_content": "    assert(group_s >= 0 && group_e <= dst->root->num_groups);",
          "content_same": false
        },
        {
          "line": 1336,
          "old_api": "update_options",
          "new_api": "atomic_load",
          "old_text": "update_options(cache->data, shadow->data)",
          "new_text": "atomic_load(&shadow->data->ts)",
          "old_line_content": "    update_options(cache->data, shadow->data);",
          "new_line_content": "    if (atomic_load(&shadow->data->ts) <= cache->data->ts)",
          "content_same": false
        },
        {
          "line": 1352,
          "old_api": "assert",
          "new_api": "pthread_mutex_lock",
          "old_text": "assert(gdata)",
          "new_text": "pthread_mutex_lock(&shadow->lock)",
          "old_line_content": "        assert(gdata);",
          "new_line_content": "        pthread_mutex_lock(&shadow->lock);",
          "content_same": false
        },
        {
          "line": 1356,
          "old_api": "m_option_copy",
          "new_api": "assert",
          "old_text": "m_option_copy(co->opt, gdata->udata + co->opt->offset, co->data)",
          "new_text": "assert(gdata)",
          "old_line_content": "        m_option_copy(co->opt, gdata->udata + co->opt->offset, co->data);",
          "new_line_content": "        assert(gdata);",
          "content_same": false
        },
        {
          "line": 1360,
          "old_api": "m_config_gdata",
          "new_api": "m_option_copy",
          "old_text": "m_config_gdata(cache->data, co->group_index)",
          "new_text": "m_option_copy(co->opt, gdata->udata + co->opt->offset, co->data)",
          "old_line_content": "            if (cache->wakeup_cb && m_config_gdata(cache->data, co->group_index))",
          "new_line_content": "        m_option_copy(co->opt, gdata->udata + co->opt->offset, co->data);",
          "content_same": false
        },
        {
          "line": 1364,
          "old_api": "pthread_mutex_unlock",
          "new_api": "m_config_gdata",
          "old_text": "pthread_mutex_unlock(&shadow->lock)",
          "new_text": "m_config_gdata(cache->data, co->group_index)",
          "old_line_content": "        pthread_mutex_unlock(&shadow->lock);",
          "new_line_content": "            if (cache->wakeup_cb && m_config_gdata(cache->data, co->group_index))",
          "content_same": false
        },
        {
          "line": 1404,
          "old_api": "MP_TARRAY_REMOVE_AT",
          "new_api": "pthread_mutex_lock",
          "old_text": "MP_TARRAY_REMOVE_AT(shadow->listeners, shadow->num_listeners, n)",
          "new_text": "pthread_mutex_lock(&shadow->lock)",
          "old_line_content": "                MP_TARRAY_REMOVE_AT(shadow->listeners, shadow->num_listeners, n);",
          "new_line_content": "    pthread_mutex_lock(&shadow->lock);",
          "content_same": false
        },
        {
          "line": 1440,
          "old_api": "mp_dispatch_cancel_fn",
          "new_api": "m_config_cache_set_wakeup_cb",
          "old_text": "mp_dispatch_cancel_fn(cache->wakeup_dispatch_queue,\n                              cache->wakeup_dispatch_cb,\n                              cache->wakeup_dispatch_cb_ctx)",
          "new_text": "m_config_cache_set_wakeup_cb(cache, NULL, NULL)",
          "old_line_content": "        mp_dispatch_cancel_fn(cache->wakeup_dispatch_queue,",
          "new_line_content": "    m_config_cache_set_wakeup_cb(cache, NULL, NULL);",
          "content_same": false
        },
        {
          "line": 1476,
          "old_api": "m_config_gdata",
          "new_api": "assert",
          "old_text": "m_config_gdata(shadow->data, co->group_index)",
          "new_text": "assert(co)",
          "old_line_content": "    struct m_group_data *gdata = m_config_gdata(shadow->data, co->group_index);",
          "new_line_content": "    assert(co);",
          "content_same": false
        },
        {
          "line": 1480,
          "old_api": "m_option_copy",
          "new_api": "m_config_gdata",
          "old_text": "m_option_copy(co->opt, dst, gdata->udata + co->opt->offset)",
          "new_text": "m_config_gdata(shadow->data, co->group_index)",
          "old_line_content": "    m_option_copy(co->opt, dst, gdata->udata + co->opt->offset);",
          "new_line_content": "    struct m_group_data *gdata = m_config_gdata(shadow->data, co->group_index);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 1030,
          "old_api": null,
          "new_api": "m_config_mogrify_cli_opt",
          "old_text": null,
          "new_text": "m_config_mogrify_cli_opt(config, &name, &negate, &flags)",
          "old_line_content": "",
          "new_line_content": "        m_config_mogrify_cli_opt(config, &name, &negate, &flags);",
          "content_same": false
        },
        {
          "line": 520,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(config->groups[n].group != subopts)",
          "old_line_content": "",
          "new_line_content": "        assert(config->groups[n].group != subopts);",
          "content_same": false
        },
        {
          "line": 523,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(!(subopts->change_flags & ~(unsigned)UPDATE_OPTS_MASK))",
          "old_line_content": "    int group_index = config->num_groups++;",
          "new_line_content": "    assert(!(subopts->change_flags & ~(unsigned)UPDATE_OPTS_MASK));",
          "content_same": false
        },
        {
          "line": 525,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(parent_group_index >= -1 && parent_group_index < config->num_groups)",
          "old_line_content": "    config->groups[group_index] = (struct m_config_group){",
          "new_line_content": "    assert(parent_group_index >= -1 && parent_group_index < config->num_groups);",
          "content_same": false
        },
        {
          "line": 1038,
          "old_api": null,
          "new_api": "m_option_required_params",
          "old_text": null,
          "new_text": "m_option_required_params(co->opt)",
          "old_line_content": "{",
          "new_line_content": "    return m_option_required_params(co->opt);",
          "content_same": false
        },
        {
          "line": 528,
          "old_api": null,
          "new_api": "MP_TARRAY_GROW",
          "old_text": null,
          "new_text": "MP_TARRAY_GROW(config, config->groups, group_index)",
          "old_line_content": "        .parent_ptr = parent_ptr,",
          "new_line_content": "    MP_TARRAY_GROW(config, config->groups, group_index);",
          "content_same": false
        },
        {
          "line": 1045,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(a->name, b->name)",
          "old_line_content": "{",
          "new_line_content": "    return strcasecmp(a->name, b->name);",
          "content_same": false
        },
        {
          "line": 1057,
          "old_api": null,
          "new_api": "qsort",
          "old_text": null,
          "new_text": "qsort(sorted, config->num_opts, sizeof(sorted[0]), sort_opt_compare)",
          "old_line_content": "        struct m_config_option *co = &sorted[i];",
          "new_line_content": "        qsort(sorted, config->num_opts, sizeof(sorted[0]), sort_opt_compare);",
          "content_same": false
        },
        {
          "line": 1059,
          "old_api": null,
          "new_api": "MP_INFO",
          "old_text": null,
          "new_text": "MP_INFO(config, \"Options:\\n\\n\")",
          "old_line_content": "        if (co->is_hidden)",
          "new_line_content": "    MP_INFO(config, \"Options:\\n\\n\");",
          "content_same": false
        },
        {
          "line": 548,
          "old_api": null,
          "new_api": "concat_name",
          "old_text": null,
          "new_text": "concat_name(config, name_prefix, opt->name)",
          "old_line_content": "        };",
          "new_line_content": "            .name = concat_name(config, name_prefix, opt->name),",
          "content_same": false
        },
        {
          "line": 555,
          "old_api": null,
          "new_api": "MP_TARRAY_APPEND",
          "old_text": null,
          "new_text": "MP_TARRAY_APPEND(config, config->opts, config->num_opts, co)",
          "old_line_content": "",
          "new_line_content": "            MP_TARRAY_APPEND(config, config->opts, config->num_opts, co);",
          "content_same": false
        },
        {
          "line": 1067,
          "old_api": null,
          "new_api": "MP_INFO",
          "old_text": null,
          "new_text": "MP_INFO(config, \" %s%-30s\", prefix, co->name)",
          "old_line_content": "            for (int n = 0; alt[n].name; n++)",
          "new_line_content": "        MP_INFO(config, \" %s%-30s\", prefix, co->name);",
          "content_same": false
        },
        {
          "line": 1069,
          "old_api": null,
          "new_api": "MP_INFO",
          "old_text": null,
          "new_text": "MP_INFO(config, \" Choices:\")",
          "old_line_content": "            if (opt->flags & (M_OPT_MIN | M_OPT_MAX))",
          "new_line_content": "            MP_INFO(config, \" Choices:\");",
          "content_same": false
        },
        {
          "line": 1074,
          "old_api": null,
          "new_api": "MP_INFO",
          "old_text": null,
          "new_text": "MP_INFO(config, \" (or an integer)\")",
          "old_line_content": "        if (opt->flags & (M_OPT_MIN | M_OPT_MAX)) {",
          "new_line_content": "                MP_INFO(config, \" (or an integer)\");",
          "content_same": false
        },
        {
          "line": 1079,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(min, sizeof(min), \"any\")",
          "old_line_content": "            if (opt->flags & M_OPT_MAX)",
          "new_line_content": "            snprintf(min, sizeof(min), \"any\");",
          "content_same": false
        },
        {
          "line": 1082,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(min, sizeof(min), \"%.14g\", opt->min)",
          "old_line_content": "        }",
          "new_line_content": "                snprintf(min, sizeof(min), \"%.14g\", opt->min);",
          "content_same": false
        },
        {
          "line": 1085,
          "old_api": null,
          "new_api": "MP_INFO",
          "old_text": null,
          "new_text": "MP_INFO(config, \" (%s to %s)\", min, max)",
          "old_line_content": "        if (!defptr)",
          "new_line_content": "            MP_INFO(config, \" (%s to %s)\", min, max);",
          "content_same": false
        },
        {
          "line": 575,
          "old_api": null,
          "new_api": "add_sub_group",
          "old_text": null,
          "new_text": "add_sub_group(config, prefix, group_index, opt->offset, new_subopts)",
          "old_line_content": "        }",
          "new_line_content": "            add_sub_group(config, prefix, group_index, opt->offset, new_subopts);",
          "content_same": false
        },
        {
          "line": 578,
          "old_api": null,
          "new_api": "init_obj_settings_list",
          "old_text": null,
          "new_text": "init_obj_settings_list(config, group_index, objlist)",
          "old_line_content": "    config->groups[group_index].group_count = config->num_groups - group_index;",
          "new_line_content": "            init_obj_settings_list(config, group_index, objlist);",
          "content_same": false
        },
        {
          "line": 1092,
          "old_api": null,
          "new_api": "m_option_pretty_print",
          "old_text": null,
          "new_text": "m_option_pretty_print(opt, defptr)",
          "old_line_content": "        }",
          "new_line_content": "            def = m_option_pretty_print(opt, defptr);",
          "content_same": false
        },
        {
          "line": 1095,
          "old_api": null,
          "new_api": "talloc_free",
          "old_text": null,
          "new_text": "talloc_free(def)",
          "old_line_content": "        if (opt->flags & M_OPT_FILE)",
          "new_line_content": "            talloc_free(def);",
          "content_same": false
        },
        {
          "line": 1104,
          "old_api": null,
          "new_api": "MP_INFO",
          "old_text": null,
          "new_text": "MP_INFO(config, \" for %s\", (char *)opt->priv)",
          "old_line_content": "        for (int n = 0; opt->type->actions && opt->type->actions[n].name; n++) {",
          "new_line_content": "            MP_INFO(config, \" for %s\", (char *)opt->priv);",
          "content_same": false
        },
        {
          "line": 593,
          "old_api": null,
          "new_api": "bstr0",
          "old_text": null,
          "new_text": "bstr0(co->name)",
          "old_line_content": "",
          "new_line_content": "        struct bstr coname = bstr0(co->name);",
          "content_same": false
        },
        {
          "line": 594,
          "old_api": null,
          "new_api": "bstrcmp",
          "old_text": null,
          "new_text": "bstrcmp(coname, name)",
          "old_line_content": "    return NULL;",
          "new_line_content": "        if (bstrcmp(coname, name) == 0)",
          "content_same": false
        },
        {
          "line": 1107,
          "old_api": null,
          "new_api": "MP_INFO",
          "old_text": null,
          "new_text": "MP_INFO(config, \"\\n\")",
          "old_line_content": "            count++;",
          "new_line_content": "        MP_INFO(config, \"\\n\");",
          "content_same": false
        },
        {
          "line": 1110,
          "old_api": null,
          "new_api": "MP_INFO",
          "old_text": null,
          "new_text": "MP_INFO(config, \"    %s%s-%s\\n\", prefix, co->name, action->name)",
          "old_line_content": "    }",
          "new_line_content": "            MP_INFO(config, \"    %s%s-%s\\n\", prefix, co->name, action->name);",
          "content_same": false
        },
        {
          "line": 1115,
          "old_api": null,
          "new_api": "MP_INFO",
          "old_text": null,
          "new_text": "MP_INFO(config, \"\\nTotal: %d options\\n\", count)",
          "old_line_content": "char **m_config_list_options(void *ta_parent, const struct m_config *config)",
          "new_line_content": "    MP_INFO(config, \"\\nTotal: %d options\\n\", count);",
          "content_same": false
        },
        {
          "line": 1116,
          "old_api": null,
          "new_api": "talloc_free",
          "old_text": null,
          "new_text": "talloc_free(sorted)",
          "old_line_content": "{",
          "new_line_content": "    talloc_free(sorted);",
          "content_same": false
        },
        {
          "line": 605,
          "old_api": null,
          "new_api": "m_config_get_co_raw",
          "old_text": null,
          "new_text": "m_config_get_co_raw(config, name)",
          "old_line_content": "    const char *prefix = config->is_toplevel ? \"--\" : \"\";",
          "new_line_content": "    struct m_config_option *co = m_config_get_co_raw(config, name);",
          "content_same": false
        },
        {
          "line": 1121,
          "old_api": null,
          "new_api": "talloc_new",
          "old_text": null,
          "new_text": "talloc_new(ta_parent)",
          "old_line_content": "        if (co->is_hidden)",
          "new_line_content": "    char **list = talloc_new(ta_parent);",
          "content_same": false
        },
        {
          "line": 1129,
          "old_api": null,
          "new_api": "talloc_strdup",
          "old_text": null,
          "new_text": "talloc_strdup(ta_parent, co->name)",
          "old_line_content": "    return list;",
          "new_line_content": "        char *s = talloc_strdup(ta_parent, co->name);",
          "content_same": false
        },
        {
          "line": 618,
          "old_api": null,
          "new_api": "MP_WARN",
          "old_text": null,
          "new_text": "MP_WARN(config, \"Warning: option %s%s was replaced with \"\n                        \"%s%s and might be removed in the future.\\n\",\n                        prefix, co->name, prefix, alias)",
          "old_line_content": "            co->warning_was_printed = true;",
          "new_line_content": "                MP_WARN(config, \"Warning: option %s%s was replaced with \"",
          "content_same": false
        },
        {
          "line": 1130,
          "old_api": null,
          "new_api": "MP_TARRAY_APPEND",
          "old_text": null,
          "new_text": "MP_TARRAY_APPEND(ta_parent, list, count, s)",
          "old_line_content": "}",
          "new_line_content": "        MP_TARRAY_APPEND(ta_parent, list, count, s);",
          "content_same": false
        },
        {
          "line": 1132,
          "old_api": null,
          "new_api": "MP_TARRAY_APPEND",
          "old_text": null,
          "new_text": "MP_TARRAY_APPEND(ta_parent, list, count, NULL)",
          "old_line_content": "struct m_profile *m_config_get_profile(const struct m_config *config, bstr name)",
          "new_line_content": "    MP_TARRAY_APPEND(ta_parent, list, count, NULL);",
          "content_same": false
        },
        {
          "line": 624,
          "old_api": null,
          "new_api": "bstr0",
          "old_text": null,
          "new_text": "bstr0(alias)",
          "old_line_content": "            if (msg) {",
          "new_line_content": "        return m_config_get_co_any(config, bstr0(alias));",
          "content_same": false
        },
        {
          "line": 1139,
          "old_api": null,
          "new_api": "bstr_equals0",
          "old_text": null,
          "new_text": "bstr_equals0(name, p->name)",
          "old_line_content": "}",
          "new_line_content": "        if (bstr_equals0(name, p->name))",
          "content_same": false
        },
        {
          "line": 629,
          "old_api": null,
          "new_api": "MP_FATAL",
          "old_text": null,
          "new_text": "MP_FATAL(config, \"Option %s%s was removed: %s\\n\",\n                         prefix, co->name, msg)",
          "old_line_content": "                         prefix, co->name);",
          "new_line_content": "                MP_FATAL(config, \"Option %s%s was removed: %s\\n\",",
          "content_same": false
        },
        {
          "line": 632,
          "old_api": null,
          "new_api": "MP_FATAL",
          "old_text": null,
          "new_text": "MP_FATAL(config, \"Option %s%s was removed.\\n\",\n                         prefix, co->name)",
          "old_line_content": "        }",
          "new_line_content": "                MP_FATAL(config, \"Option %s%s was removed.\\n\",",
          "content_same": false
        },
        {
          "line": 1148,
          "old_api": null,
          "new_api": "bstr0",
          "old_text": null,
          "new_text": "bstr0(name)",
          "old_line_content": "{",
          "new_line_content": "    return m_config_get_profile(config, bstr0(name));",
          "content_same": false
        },
        {
          "line": 640,
          "old_api": null,
          "new_api": "MP_WARN",
          "old_text": null,
          "new_text": "MP_WARN(config, \"Warning: option %s%s is deprecated \"\n                    \"and might be removed in the future (%s).\\n\",\n                    prefix, co->name, co->opt->deprecation_message)",
          "old_line_content": "        }",
          "new_line_content": "            MP_WARN(config, \"Warning: option %s%s is deprecated \"",
          "content_same": false
        },
        {
          "line": 1158,
          "old_api": null,
          "new_api": "talloc_zero",
          "old_text": null,
          "new_text": "talloc_zero(config, struct m_profile)",
          "old_line_content": "    return p;",
          "new_line_content": "    p = talloc_zero(config, struct m_profile);",
          "content_same": false
        },
        {
          "line": 1159,
          "old_api": null,
          "new_api": "talloc_strdup",
          "old_text": null,
          "new_text": "talloc_strdup(p, name)",
          "old_line_content": "}",
          "new_line_content": "    p->name = talloc_strdup(p, name);",
          "content_same": false
        },
        {
          "line": 652,
          "old_api": null,
          "new_api": "m_config_get_co_any",
          "old_text": null,
          "new_text": "m_config_get_co_any(config, name)",
          "old_line_content": "        co = NULL;",
          "new_line_content": "    struct m_config_option *co = m_config_get_co_any(config, name);",
          "content_same": false
        },
        {
          "line": 1167,
          "old_api": null,
          "new_api": "talloc_free",
          "old_text": null,
          "new_text": "talloc_free(p->desc)",
          "old_line_content": "int m_config_set_profile_option(struct m_config *config, struct m_profile *p,",
          "new_line_content": "    talloc_free(p->desc);",
          "content_same": false
        },
        {
          "line": 1168,
          "old_api": null,
          "new_api": "bstrto0",
          "old_text": null,
          "new_text": "bstrto0(p, desc)",
          "old_line_content": "                                bstr name, bstr val)",
          "new_line_content": "    p->desc = bstrto0(p, desc);",
          "content_same": false
        },
        {
          "line": 1174,
          "old_api": null,
          "new_api": "m_config_set_option_cli",
          "old_text": null,
          "new_text": "m_config_set_option_cli(config, name, val,\n                                    M_SETOPT_CHECK_ONLY |\n                                    M_SETOPT_FROM_CONFIG_FILE)",
          "old_line_content": "        return i;",
          "new_line_content": "    int i = m_config_set_option_cli(config, name, val,",
          "content_same": false
        },
        {
          "line": 1179,
          "old_api": null,
          "new_api": "talloc_realloc",
          "old_text": null,
          "new_text": "talloc_realloc(p, p->opts, char *, 2 * (p->num_opts + 2))",
          "old_line_content": "    p->opts[p->num_opts * 2] = p->opts[p->num_opts * 2 + 1] = NULL;",
          "new_line_content": "    p->opts = talloc_realloc(p, p->opts, char *, 2 * (p->num_opts + 2));",
          "content_same": false
        },
        {
          "line": 1180,
          "old_api": null,
          "new_api": "bstrto0",
          "old_text": null,
          "new_text": "bstrto0(p, name)",
          "old_line_content": "    return 1;",
          "new_line_content": "    p->opts[p->num_opts * 2] = bstrto0(p, name);",
          "content_same": false
        },
        {
          "line": 1181,
          "old_api": null,
          "new_api": "bstrto0",
          "old_text": null,
          "new_text": "bstrto0(p, val)",
          "old_line_content": "}",
          "new_line_content": "    p->opts[p->num_opts * 2 + 1] = bstrto0(p, val);",
          "content_same": false
        },
        {
          "line": 1189,
          "old_api": null,
          "new_api": "m_config_get_profile0",
          "old_text": null,
          "new_text": "m_config_get_profile0(config, name)",
          "old_line_content": "    }",
          "new_line_content": "    struct m_profile *p = m_config_get_profile0(config, name);",
          "content_same": false
        },
        {
          "line": 1191,
          "old_api": null,
          "new_api": "MP_WARN",
          "old_text": null,
          "new_text": "MP_WARN(config, \"Unknown profile '%s'.\\n\", name)",
          "old_line_content": "    if (config->profile_depth > MAX_PROFILE_DEPTH) {",
          "new_line_content": "        MP_WARN(config, \"Unknown profile '%s'.\\n\", name);",
          "content_same": false
        },
        {
          "line": 1196,
          "old_api": null,
          "new_api": "MP_WARN",
          "old_text": null,
          "new_text": "MP_WARN(config, \"WARNING: Profile inclusion too deep.\\n\")",
          "old_line_content": "    for (int i = 0; i < p->num_opts; i++) {",
          "new_line_content": "        MP_WARN(config, \"WARNING: Profile inclusion too deep.\\n\");",
          "content_same": false
        },
        {
          "line": 1201,
          "old_api": null,
          "new_api": "m_config_set_option_cli",
          "old_text": null,
          "new_text": "m_config_set_option_cli(config,\n                                bstr0(p->opts[2 * i]),\n                                bstr0(p->opts[2 * i + 1]),\n                                flags | M_SETOPT_FROM_CONFIG_FILE)",
          "old_line_content": "    }",
          "new_line_content": "        m_config_set_option_cli(config,",
          "content_same": false
        },
        {
          "line": 1202,
          "old_api": null,
          "new_api": "bstr0",
          "old_text": null,
          "new_text": "bstr0(p->opts[2 * i])",
          "old_line_content": "    config->profile_depth--;",
          "new_line_content": "                                bstr0(p->opts[2 * i]),",
          "content_same": false
        },
        {
          "line": 1203,
          "old_api": null,
          "new_api": "bstr0",
          "old_text": null,
          "new_text": "bstr0(p->opts[2 * i + 1])",
          "old_line_content": "",
          "new_line_content": "                                bstr0(p->opts[2 * i + 1]),",
          "content_same": false
        },
        {
          "line": 1213,
          "old_api": null,
          "new_api": "m_config_add_profile",
          "old_text": null,
          "new_text": "m_config_add_profile(config, NULL)",
          "old_line_content": "",
          "new_line_content": "    struct m_profile *p = m_config_add_profile(config, NULL);",
          "content_same": false
        },
        {
          "line": 190,
          "old_api": null,
          "new_api": "m_option_copy",
          "old_text": null,
          "new_text": "m_option_copy(opt, dst, &temp)",
          "old_line_content": "}",
          "new_line_content": "        m_option_copy(opt, dst, &temp);",
          "content_same": false
        },
        {
          "line": 1214,
          "old_api": null,
          "new_api": "m_config_set_profile",
          "old_text": null,
          "new_text": "m_config_set_profile(config, p->name, flags)",
          "old_line_content": "struct mpv_node m_config_get_profiles(struct m_config *config)",
          "new_line_content": "    m_config_set_profile(config, p->name, flags);",
          "content_same": false
        },
        {
          "line": 192,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(dst, src, opt->type->size)",
          "old_line_content": "static void alloc_group(struct m_config_data *data, int group_index,",
          "new_line_content": "        memcpy(dst, src, opt->type->size);",
          "content_same": false
        },
        {
          "line": 199,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(group_index == data->group_index + data->num_gdata)",
          "old_line_content": "",
          "new_line_content": "    assert(group_index == data->group_index + data->num_gdata);",
          "content_same": false
        },
        {
          "line": 1227,
          "old_api": null,
          "new_api": "node_map_add_string",
          "old_text": null,
          "new_text": "node_map_add_string(entry, \"name\", profile->name)",
          "old_line_content": "        struct mpv_node *opts =",
          "new_line_content": "        node_map_add_string(entry, \"name\", profile->name);",
          "content_same": false
        },
        {
          "line": 1229,
          "old_api": null,
          "new_api": "node_map_add_string",
          "old_text": null,
          "new_text": "node_map_add_string(entry, \"profile-desc\", profile->desc)",
          "old_line_content": "",
          "new_line_content": "            node_map_add_string(entry, \"profile-desc\", profile->desc);",
          "content_same": false
        },
        {
          "line": 208,
          "old_api": null,
          "new_api": "m_config_gdata",
          "old_text": null,
          "new_text": "m_config_gdata(copy, group_index)",
          "old_line_content": "        .ts = copy_gdata ? copy_gdata->ts : 0,",
          "new_line_content": "        copy ? m_config_gdata(copy, group_index) : NULL;",
          "content_same": false
        },
        {
          "line": 722,
          "old_api": null,
          "new_api": "MP_ERR",
          "old_text": null,
          "new_text": "MP_ERR(config, \"The %s option can't be used in a config file.\\n\",\n               co->name)",
          "old_line_content": "    if ((flags & M_SETOPT_BACKUP) && set)",
          "new_line_content": "        MP_ERR(config, \"The %s option can't be used in a config file.\\n\",",
          "content_same": false
        },
        {
          "line": 211,
          "old_api": null,
          "new_api": "talloc_zero_size",
          "old_text": null,
          "new_text": "talloc_zero_size(data, opts->size)",
          "old_line_content": "    if (opts->defaults)",
          "new_line_content": "        .udata = talloc_zero_size(data, opts->size),",
          "content_same": false
        },
        {
          "line": 1235,
          "old_api": null,
          "new_api": "node_array_add",
          "old_text": null,
          "new_text": "node_array_add(opts, MPV_FORMAT_NODE_MAP)",
          "old_line_content": "    }",
          "new_line_content": "            struct mpv_node *opt_entry = node_array_add(opts, MPV_FORMAT_NODE_MAP);",
          "content_same": false
        },
        {
          "line": 1236,
          "old_api": null,
          "new_api": "node_map_add_string",
          "old_text": null,
          "new_text": "node_map_add_string(opt_entry, \"key\", profile->opts[n * 2 + 0])",
          "old_line_content": "",
          "new_line_content": "            node_map_add_string(opt_entry, \"key\", profile->opts[n * 2 + 0]);",
          "content_same": false
        },
        {
          "line": 1237,
          "old_api": null,
          "new_api": "node_map_add_string",
          "old_text": null,
          "new_text": "node_map_add_string(opt_entry, \"value\", profile->opts[n * 2 + 1])",
          "old_line_content": "    return root;",
          "new_line_content": "            node_map_add_string(opt_entry, \"value\", profile->opts[n * 2 + 1]);",
          "content_same": false
        },
        {
          "line": 727,
          "old_api": null,
          "new_api": "ensure_backup",
          "old_text": null,
          "new_text": "ensure_backup(config, co)",
          "old_line_content": "",
          "new_line_content": "        ensure_backup(config, co);",
          "content_same": false
        },
        {
          "line": 216,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(gdata->udata, opts->defaults, opts->size)",
          "old_line_content": "    for (int n = group->co_index; n < group->co_end_index; n++) {",
          "new_line_content": "        memcpy(gdata->udata, opts->defaults, opts->size);",
          "content_same": false
        },
        {
          "line": 221,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(n >= 0 && n < data->root->num_opts)",
          "old_line_content": "            continue;",
          "new_line_content": "        assert(n >= 0 && n < data->root->num_opts);",
          "content_same": false
        },
        {
          "line": 1246,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(config->global)",
          "old_line_content": "    config->shadow->data =",
          "new_line_content": "    assert(config->global);",
          "content_same": false
        },
        {
          "line": 1251,
          "old_api": null,
          "new_api": "allocate_option_data",
          "old_text": null,
          "new_text": "allocate_option_data(config->shadow, config, 0, config->data)",
          "old_line_content": "    config->global->config = config->shadow;",
          "new_line_content": "        allocate_option_data(config->shadow, config, 0, config->data);",
          "content_same": false
        },
        {
          "line": 1253,
          "old_api": null,
          "new_api": "pthread_mutex_init",
          "old_text": null,
          "new_text": "pthread_mutex_init(&config->shadow->lock, NULL)",
          "old_line_content": "",
          "new_line_content": "    pthread_mutex_init(&config->shadow->lock, NULL);",
          "content_same": false
        },
        {
          "line": 232,
          "old_api": null,
          "new_api": "init_opt_inplace",
          "old_text": null,
          "new_text": "init_opt_inplace(co->opt, dst, defptr)",
          "old_line_content": "    if (group->parent_group >= data->group_index && group->parent_ptr >= 0) {",
          "new_line_content": "        init_opt_inplace(co->opt, dst, defptr);",
          "content_same": false
        },
        {
          "line": 749,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(co->name, \"profile\")",
          "old_line_content": "            if (!config->profiles) {",
          "new_line_content": "    if (config->use_profiles && strcmp(co->name, \"profile\") == 0) {",
          "content_same": false
        },
        {
          "line": 238,
          "old_api": null,
          "new_api": "m_config_gdata",
          "old_text": null,
          "new_text": "m_config_gdata(data, group->parent_group)",
          "old_line_content": "    }",
          "new_line_content": "            m_config_gdata(data, group->parent_group);",
          "content_same": false
        },
        {
          "line": 239,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(parent_gdata)",
          "old_line_content": "}",
          "new_line_content": "        assert(parent_gdata);",
          "content_same": false
        },
        {
          "line": 752,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(list[0], \"help\")",
          "old_line_content": "            }",
          "new_line_content": "        if (list && list[0] && !list[1] && strcmp(list[0], \"help\") == 0) {",
          "content_same": false
        },
        {
          "line": 241,
          "old_api": null,
          "new_api": "substruct_write_ptr",
          "old_text": null,
          "new_text": "substruct_write_ptr(parent_gdata->udata + group->parent_ptr, gdata->udata)",
          "old_line_content": "static void free_option_data(void *p)",
          "new_line_content": "        substruct_write_ptr(parent_gdata->udata + group->parent_ptr, gdata->udata);",
          "content_same": false
        },
        {
          "line": 754,
          "old_api": null,
          "new_api": "MP_INFO",
          "old_text": null,
          "new_text": "MP_INFO(config, \"No profiles have been defined.\\n\")",
          "old_line_content": "            for (struct m_profile *p = config->profiles; p; p = p->next)",
          "new_line_content": "                MP_INFO(config, \"No profiles have been defined.\\n\");",
          "content_same": false
        },
        {
          "line": 1264,
          "old_api": null,
          "new_api": "m_config_cache_set_wakeup_cb",
          "old_text": null,
          "new_text": "m_config_cache_set_wakeup_cb(cache, NULL, NULL)",
          "old_line_content": "struct m_config_cache *m_config_cache_alloc(void *ta_parent,",
          "new_line_content": "    m_config_cache_set_wakeup_cb(cache, NULL, NULL);",
          "content_same": false
        },
        {
          "line": 1265,
          "old_api": null,
          "new_api": "m_config_cache_set_dispatch_change_cb",
          "old_text": null,
          "new_text": "m_config_cache_set_dispatch_change_cb(cache, NULL, NULL, NULL)",
          "old_line_content": "                                            struct mpv_global *global,",
          "new_line_content": "    m_config_cache_set_dispatch_change_cb(cache, NULL, NULL, NULL);",
          "content_same": false
        },
        {
          "line": 757,
          "old_api": null,
          "new_api": "MP_INFO",
          "old_text": null,
          "new_text": "MP_INFO(config, \"Available profiles:\\n\")",
          "old_line_content": "            return M_OPT_EXIT;",
          "new_line_content": "            MP_INFO(config, \"Available profiles:\\n\");",
          "content_same": false
        },
        {
          "line": 759,
          "old_api": null,
          "new_api": "MP_INFO",
          "old_text": null,
          "new_text": "MP_INFO(config, \"\\t%s\\t%s\\n\", p->name, p->desc ? p->desc : \"\")",
          "old_line_content": "",
          "new_line_content": "                MP_INFO(config, \"\\t%s\\t%s\\n\", p->name, p->desc ? p->desc : \"\");",
          "content_same": false
        },
        {
          "line": 760,
          "old_api": null,
          "new_api": "MP_INFO",
          "old_text": null,
          "new_text": "MP_INFO(config, \"\\n\")",
          "old_line_content": "        for (int n = 0; list && list[n]; n++) {",
          "new_line_content": "            MP_INFO(config, \"\\n\");",
          "content_same": false
        },
        {
          "line": 765,
          "old_api": null,
          "new_api": "m_config_set_profile",
          "old_text": null,
          "new_text": "m_config_set_profile(config, list[n], flags)",
          "old_line_content": "        return 0;",
          "new_line_content": "            int r = m_config_set_profile(config, list[n], flags);",
          "content_same": false
        },
        {
          "line": 257,
          "old_api": null,
          "new_api": "m_option_free",
          "old_text": null,
          "new_text": "m_option_free(co->opt, gdata->udata + co->opt->offset)",
          "old_line_content": "",
          "new_line_content": "                m_option_free(co->opt, gdata->udata + co->opt->offset);",
          "content_same": false
        },
        {
          "line": 772,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(co->name, \"include\")",
          "old_line_content": "        if (config->recursion_depth >= MAX_RECURSION_DEPTH) {",
          "new_line_content": "    if (config->includefunc && strcmp(co->name, \"include\") == 0) {",
          "content_same": false
        },
        {
          "line": 1284,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(group_index >= 0)",
          "old_line_content": "    cache->shadow = shadow;",
          "new_line_content": "    assert(group_index >= 0); // invalid group (or not in option tree)",
          "content_same": false
        },
        {
          "line": 1290,
          "old_api": null,
          "new_api": "pthread_mutex_lock",
          "old_text": null,
          "new_text": "pthread_mutex_lock(&shadow->lock)",
          "old_line_content": "    cache->opts = cache->data->gdata[0].udata;",
          "new_line_content": "    pthread_mutex_lock(&shadow->lock);",
          "content_same": false
        },
        {
          "line": 1291,
          "old_api": null,
          "new_api": "allocate_option_data",
          "old_text": null,
          "new_text": "allocate_option_data(cache, root, group_index, shadow->data)",
          "old_line_content": "",
          "new_line_content": "    cache->data = allocate_option_data(cache, root, group_index, shadow->data);",
          "content_same": false
        },
        {
          "line": 1292,
          "old_api": null,
          "new_api": "pthread_mutex_unlock",
          "old_text": null,
          "new_text": "pthread_mutex_unlock(&shadow->lock)",
          "old_line_content": "    return cache;",
          "new_line_content": "    pthread_mutex_unlock(&shadow->lock);",
          "content_same": false
        },
        {
          "line": 781,
          "old_api": null,
          "new_api": "includefunc",
          "old_text": null,
          "new_text": "config->includefunc(config->includefunc_ctx, param, flags)",
          "old_line_content": "        return 1;",
          "new_line_content": "        config->includefunc(config->includefunc_ctx, param, flags);",
          "content_same": false
        },
        {
          "line": 271,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(group_index >= 0 && group_index < root->num_groups)",
          "old_line_content": "    data->root = root;",
          "new_line_content": "    assert(group_index >= 0 && group_index < root->num_groups);",
          "content_same": false
        },
        {
          "line": 272,
          "old_api": null,
          "new_api": "talloc_zero",
          "old_text": null,
          "new_text": "talloc_zero(ta_parent, struct m_config_data)",
          "old_line_content": "    data->group_index = group_index;",
          "new_line_content": "    struct m_config_data *data = talloc_zero(ta_parent, struct m_config_data);",
          "content_same": false
        },
        {
          "line": 273,
          "old_api": null,
          "new_api": "talloc_set_destructor",
          "old_text": null,
          "new_text": "talloc_set_destructor(data, free_option_data)",
          "old_line_content": "",
          "new_line_content": "    talloc_set_destructor(data, free_option_data);",
          "content_same": false
        },
        {
          "line": 789,
          "old_api": null,
          "new_api": "bstr0",
          "old_text": null,
          "new_text": "bstr0(*(char **)data)",
          "old_line_content": "    {",
          "new_line_content": "        return show_profile(config, bstr0(*(char **)data));",
          "content_same": false
        },
        {
          "line": 1301,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(dst->root == src->root)",
          "old_line_content": "    // Must be from same root, but they can have arbitrary overlap.",
          "new_line_content": "    assert(dst->root == src->root);",
          "content_same": false
        },
        {
          "line": 279,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(root_group->group_count > 0)",
          "old_line_content": "",
          "new_line_content": "    assert(root_group->group_count > 0);",
          "content_same": false
        },
        {
          "line": 792,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(co->name, \"help\")",
          "old_line_content": "        if (h && h[0])",
          "new_line_content": "                                strcmp(co->name, \"help\") == 0))",
          "content_same": false
        },
        {
          "line": 282,
          "old_api": null,
          "new_api": "alloc_group",
          "old_text": null,
          "new_text": "alloc_group(data, n, copy)",
          "old_line_content": "",
          "new_line_content": "        alloc_group(data, n, copy);",
          "content_same": false
        },
        {
          "line": 795,
          "old_api": null,
          "new_api": "mp_info",
          "old_text": null,
          "new_text": "mp_info(config->log, \"%s\", mp_help_text)",
          "old_line_content": "    }",
          "new_line_content": "        mp_info(config->log, \"%s\", mp_help_text);",
          "content_same": false
        },
        {
          "line": 1306,
          "old_api": null,
          "new_api": "MPMAX",
          "old_text": null,
          "new_text": "MPMAX(dst->group_index, src->group_index)",
          "old_line_content": "    for (int n = group_s; n < group_e; n++) {",
          "new_line_content": "    int group_s = MPMAX(dst->group_index, src->group_index);",
          "content_same": false
        },
        {
          "line": 1307,
          "old_api": null,
          "new_api": "MPMIN",
          "old_text": null,
          "new_text": "MPMIN(dst->group_index + dst->num_gdata,\n                        src->group_index + src->num_gdata)",
          "old_line_content": "        struct m_config_group *g = &dst->root->groups[n];",
          "new_line_content": "    int group_e = MPMIN(dst->group_index + dst->num_gdata,",
          "content_same": false
        },
        {
          "line": 1312,
          "old_api": null,
          "new_api": "m_config_gdata",
          "old_text": null,
          "new_text": "m_config_gdata(src, n)",
          "old_line_content": "        if (gsrc->ts <= gdst->ts)",
          "new_line_content": "        struct m_group_data *gsrc = m_config_gdata(src, n);",
          "content_same": false
        },
        {
          "line": 801,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(co->name, \"list-options\")",
          "old_line_content": "",
          "new_line_content": "    if (strcmp(co->name, \"list-options\") == 0) {",
          "content_same": false
        },
        {
          "line": 802,
          "old_api": null,
          "new_api": "m_config_print_option_list",
          "old_text": null,
          "new_text": "m_config_print_option_list(config, \"*\")",
          "old_line_content": "    return M_OPT_UNKNOWN;",
          "new_line_content": "        m_config_print_option_list(config, \"*\");",
          "content_same": false
        },
        {
          "line": 1313,
          "old_api": null,
          "new_api": "m_config_gdata",
          "old_text": null,
          "new_text": "m_config_gdata(dst, n)",
          "old_line_content": "            continue;",
          "new_line_content": "        struct m_group_data *gdst = m_config_gdata(dst, n);",
          "content_same": false
        },
        {
          "line": 1314,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(gsrc && gdst)",
          "old_line_content": "        gdst->ts = gsrc->ts;",
          "new_line_content": "        assert(gsrc && gdst);",
          "content_same": false
        },
        {
          "line": 297,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(config->shadow->num_listeners == 0)",
          "old_line_content": "",
          "new_line_content": "        assert(config->shadow->num_listeners == 0);",
          "content_same": false
        },
        {
          "line": 299,
          "old_api": null,
          "new_api": "talloc_free",
          "old_text": null,
          "new_text": "talloc_free(config->shadow)",
          "old_line_content": "}",
          "new_line_content": "        talloc_free(config->shadow);",
          "content_same": false
        },
        {
          "line": 1323,
          "old_api": null,
          "new_api": "m_option_copy",
          "old_text": null,
          "new_text": "m_option_copy(co->opt, gdst->udata + co->opt->offset,\n                                       gsrc->udata + co->opt->offset)",
          "old_line_content": "    }",
          "new_line_content": "                m_option_copy(co->opt, gdst->udata + co->opt->offset,",
          "content_same": false
        },
        {
          "line": 302,
          "old_api": null,
          "new_api": "talloc_free",
          "old_text": null,
          "new_text": "talloc_free(config->data)",
          "old_line_content": "                              size_t size, const void *defaults,",
          "new_line_content": "    talloc_free(config->data);",
          "content_same": false
        },
        {
          "line": 310,
          "old_api": null,
          "new_api": "talloc_set_destructor",
          "old_text": null,
          "new_text": "talloc_set_destructor(config, config_destroy)",
          "old_line_content": "    *subopts = (struct m_sub_options){",
          "new_line_content": "    talloc_set_destructor(config, config_destroy);",
          "content_same": false
        },
        {
          "line": 822,
          "old_api": null,
          "new_api": "m_config_handle_special_options",
          "old_text": null,
          "new_text": "m_config_handle_special_options(config, co, data, flags)",
          "old_line_content": "    // This affects some special options like \"playlist\", \"v\". Maybe these",
          "new_line_content": "    r = m_config_handle_special_options(config, co, data, flags);",
          "content_same": false
        },
        {
          "line": 313,
          "old_api": null,
          "new_api": "talloc_ptrtype",
          "old_text": null,
          "new_text": "talloc_ptrtype(config, subopts)",
          "old_line_content": "        .defaults = defaults,",
          "new_line_content": "    struct m_sub_options *subopts = talloc_ptrtype(config, subopts);",
          "content_same": false
        },
        {
          "line": 1339,
          "old_api": null,
          "new_api": "pthread_mutex_lock",
          "old_text": null,
          "new_text": "pthread_mutex_lock(&shadow->lock)",
          "old_line_content": "}",
          "new_line_content": "    pthread_mutex_lock(&shadow->lock);",
          "content_same": false
        },
        {
          "line": 1340,
          "old_api": null,
          "new_api": "update_options",
          "old_text": null,
          "new_text": "update_options(cache->data, shadow->data)",
          "old_line_content": "",
          "new_line_content": "    update_options(cache->data, shadow->data);",
          "content_same": false
        },
        {
          "line": 1341,
          "old_api": null,
          "new_api": "pthread_mutex_unlock",
          "old_text": null,
          "new_text": "pthread_mutex_unlock(&shadow->lock)",
          "old_line_content": "void m_config_notify_change_co(struct m_config *config,",
          "new_line_content": "    pthread_mutex_unlock(&shadow->lock);",
          "content_same": false
        },
        {
          "line": 319,
          "old_api": null,
          "new_api": "add_sub_group",
          "old_text": null,
          "new_text": "add_sub_group(config, NULL, -1, -1, subopts)",
          "old_line_content": "",
          "new_line_content": "    add_sub_group(config, NULL, -1, -1, subopts);",
          "content_same": false
        },
        {
          "line": 831,
          "old_api": null,
          "new_api": "m_option_copy",
          "old_text": null,
          "new_text": "m_option_copy(co->opt, co->data, data)",
          "old_line_content": "",
          "new_line_content": "    m_option_copy(co->opt, co->data, data);",
          "content_same": false
        },
        {
          "line": 833,
          "old_api": null,
          "new_api": "m_config_mark_co_flags",
          "old_text": null,
          "new_text": "m_config_mark_co_flags(co, flags)",
          "old_line_content": "}",
          "new_line_content": "    m_config_mark_co_flags(co, flags);",
          "content_same": false
        },
        {
          "line": 834,
          "old_api": null,
          "new_api": "m_config_notify_change_co",
          "old_text": null,
          "new_text": "m_config_notify_change_co(config, co)",
          "old_line_content": "",
          "new_line_content": "    m_config_notify_change_co(config, co);",
          "content_same": false
        },
        {
          "line": 324,
          "old_api": null,
          "new_api": "allocate_option_data",
          "old_text": null,
          "new_text": "allocate_option_data(config, config, 0, NULL)",
          "old_line_content": "        struct m_config_option *co = &config->opts[n];",
          "new_line_content": "    config->data = allocate_option_data(config, config, 0, NULL);",
          "content_same": false
        },
        {
          "line": 1349,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(co->data)",
          "old_line_content": "",
          "new_line_content": "    assert(co->data);",
          "content_same": false
        },
        {
          "line": 329,
          "old_api": null,
          "new_api": "m_config_gdata",
          "old_text": null,
          "new_text": "m_config_gdata(config->data, co->group_index)",
          "old_line_content": "",
          "new_line_content": "        struct m_group_data *gdata = m_config_gdata(config->data, co->group_index);",
          "content_same": false
        },
        {
          "line": 1355,
          "old_api": null,
          "new_api": "m_config_gdata",
          "old_text": null,
          "new_text": "m_config_gdata(data, co->group_index)",
          "old_line_content": "",
          "new_line_content": "        struct m_group_data *gdata = m_config_gdata(data, co->group_index);",
          "content_same": false
        },
        {
          "line": 1358,
          "old_api": null,
          "new_api": "atomic_fetch_add",
          "old_text": null,
          "new_text": "atomic_fetch_add(&data->ts, 1)",
          "old_line_content": "        for (int n = 0; n < shadow->num_listeners; n++) {",
          "new_line_content": "        gdata->ts = atomic_fetch_add(&data->ts, 1) + 1;",
          "content_same": false
        },
        {
          "line": 853,
          "old_api": null,
          "new_api": "option_set_callback",
          "old_text": null,
          "new_text": "config->option_set_callback(config->option_set_callback_cb,\n                                           co, data, flags)",
          "old_line_content": "    }",
          "new_line_content": "        return config->option_set_callback(config->option_set_callback_cb,",
          "content_same": false
        },
        {
          "line": 1365,
          "old_api": null,
          "new_api": "wakeup_cb",
          "old_text": null,
          "new_text": "cache->wakeup_cb(cache->wakeup_cb_ctx)",
          "old_line_content": "    }",
          "new_line_content": "                cache->wakeup_cb(cache->wakeup_cb_ctx);",
          "content_same": false
        },
        {
          "line": 856,
          "old_api": null,
          "new_api": "m_config_set_option_raw_direct",
          "old_text": null,
          "new_text": "m_config_set_option_raw_direct(config, co, data, flags)",
          "old_line_content": "// Handle CLI exceptions to option handling.",
          "new_line_content": "        return m_config_set_option_raw_direct(config, co, data, flags);",
          "content_same": false
        },
        {
          "line": 1368,
          "old_api": null,
          "new_api": "pthread_mutex_unlock",
          "old_text": null,
          "new_text": "pthread_mutex_unlock(&shadow->lock)",
          "old_line_content": "    int group_index = co->group_index;",
          "new_line_content": "        pthread_mutex_unlock(&shadow->lock);",
          "content_same": false
        },
        {
          "line": 347,
          "old_api": null,
          "new_api": "set_defaults",
          "old_text": null,
          "new_text": "desc->set_defaults(c->global, c->optstruct)",
          "old_line_content": "// Like m_config_from_obj_desc(), but don't allocate option struct.",
          "new_line_content": "        desc->set_defaults(c->global, c->optstruct);",
          "content_same": false
        },
        {
          "line": 356,
          "old_api": null,
          "new_api": "m_config_new",
          "old_text": null,
          "new_text": "m_config_new(talloc_ctx, log, 0, desc->priv_defaults, desc->options)",
          "old_line_content": "                                               const struct m_option *cfg)",
          "new_line_content": "    return m_config_new(talloc_ctx, log, 0, desc->priv_defaults, desc->options);",
          "content_same": false
        },
        {
          "line": 1380,
          "old_api": null,
          "new_api": "option_change_callback",
          "old_text": null,
          "new_text": "config->option_change_callback(config->option_change_callback_ctx, co,\n                                       changed)",
          "old_line_content": "",
          "new_line_content": "        config->option_change_callback(config->option_change_callback_ctx, co,",
          "content_same": false
        },
        {
          "line": 871,
          "old_api": null,
          "new_api": "m_config_get_co",
          "old_text": null,
          "new_text": "m_config_get_co(config, *name)",
          "old_line_content": "    // Turn \"--no-foo\" into \"foo\" + set *out_negate.",
          "new_line_content": "    struct m_config_option *co = m_config_get_co(config, *name);",
          "content_same": false
        },
        {
          "line": 877,
          "old_api": null,
          "new_api": "bstr_eatstart0",
          "old_text": null,
          "new_text": "bstr_eatstart0(&no_name, \"no-\")",
          "old_line_content": "        // them will simply result in an error. Good enough.",
          "new_line_content": "    if (!co && bstr_eatstart0(&no_name, \"no-\")) {",
          "content_same": false
        },
        {
          "line": 878,
          "old_api": null,
          "new_api": "m_config_get_co",
          "old_text": null,
          "new_text": "m_config_get_co(config, no_name)",
          "old_line_content": "        if (!co || !(co->opt->type->flags & M_OPT_TYPE_CHOICE))",
          "new_line_content": "        co = m_config_get_co(config, no_name);",
          "content_same": false
        },
        {
          "line": 1390,
          "old_api": null,
          "new_api": "m_config_notify_change_co",
          "old_text": null,
          "new_text": "m_config_notify_change_co(config, co)",
          "old_line_content": "    // ptr doesn't point to any config->optstruct field declared in the",
          "new_line_content": "            m_config_notify_change_co(config, co);",
          "content_same": false
        },
        {
          "line": 1396,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(false)",
          "old_line_content": "                                  void (*cb)(void *ctx), void *cb_ctx)",
          "new_line_content": "    assert(false);",
          "content_same": false
        },
        {
          "line": 891,
          "old_api": null,
          "new_api": "m_config_get_co_any",
          "old_text": null,
          "new_text": "m_config_get_co_any(config, *name)",
          "old_line_content": "    // Might be a suffix \"action\", like \"--vf-add\". Expensively check for",
          "new_line_content": "    co = m_config_get_co_any(config, *name);",
          "content_same": false
        },
        {
          "line": 893,
          "old_api": null,
          "new_api": "bstr0",
          "old_text": null,
          "new_text": "bstr0((char *)co->opt->priv)",
          "old_line_content": "    for (int n = 0; n < config->num_opts; n++) {",
          "new_line_content": "        *name = bstr0((char *)co->opt->priv);",
          "content_same": false
        },
        {
          "line": 1408,
          "old_api": null,
          "new_api": "MP_TARRAY_REMOVE_AT",
          "old_text": null,
          "new_text": "MP_TARRAY_REMOVE_AT(shadow->listeners, shadow->num_listeners, n)",
          "old_line_content": "            shadow->listeners = NULL;",
          "new_line_content": "                MP_TARRAY_REMOVE_AT(shadow->listeners, shadow->num_listeners, n);",
          "content_same": false
        },
        {
          "line": 385,
          "old_api": null,
          "new_api": "talloc_zero_size",
          "old_text": null,
          "new_text": "talloc_zero_size(ta_parent, desc->priv_size)",
          "old_line_content": "    }",
          "new_line_content": "        void *d = talloc_zero_size(ta_parent, desc->priv_size);",
          "content_same": false
        },
        {
          "line": 387,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(d, desc->priv_defaults, desc->priv_size)",
          "old_line_content": "",
          "new_line_content": "            memcpy(d, desc->priv_defaults, desc->priv_size);",
          "content_same": false
        },
        {
          "line": 899,
          "old_api": null,
          "new_api": "bstr0",
          "old_text": null,
          "new_text": "bstr0(co->name)",
          "old_line_content": "",
          "new_line_content": "        struct bstr basename = bstr0(co->name);",
          "content_same": false
        },
        {
          "line": 901,
          "old_api": null,
          "new_api": "bstr_startswith",
          "old_text": null,
          "new_text": "bstr_startswith(*name, basename)",
          "old_line_content": "        if (co->opt->type == &m_option_type_alias)",
          "new_line_content": "        if (!bstr_startswith(*name, basename))",
          "content_same": false
        },
        {
          "line": 1411,
          "old_api": null,
          "new_api": "talloc_free",
          "old_text": null,
          "new_text": "talloc_free(shadow->listeners)",
          "old_line_content": "    if (cb) {",
          "new_line_content": "            talloc_free(shadow->listeners);",
          "content_same": false
        },
        {
          "line": 1416,
          "old_api": null,
          "new_api": "MP_TARRAY_APPEND",
          "old_text": null,
          "new_text": "MP_TARRAY_APPEND(NULL, shadow->listeners, shadow->num_listeners, cache)",
          "old_line_content": "    }",
          "new_line_content": "        MP_TARRAY_APPEND(NULL, shadow->listeners, shadow->num_listeners, cache);",
          "content_same": false
        },
        {
          "line": 906,
          "old_api": null,
          "new_api": "m_config_get_co_any",
          "old_text": null,
          "new_text": "m_config_get_co_any(config, basename)",
          "old_line_content": "        const struct m_option_type *type = co->opt->type;",
          "new_line_content": "            co = m_config_get_co_any(config, basename);",
          "content_same": false
        },
        {
          "line": 397,
          "old_api": null,
          "new_api": "bstr0",
          "old_text": null,
          "new_text": "bstr0(args[n * 2 + 0])",
          "old_line_content": "    }",
          "new_line_content": "        bstr opt = bstr0(args[n * 2 + 0]);",
          "content_same": false
        },
        {
          "line": 398,
          "old_api": null,
          "new_api": "bstr0",
          "old_text": null,
          "new_text": "bstr0(args[n * 2 + 1])",
          "old_line_content": "",
          "new_line_content": "        bstr val = bstr0(args[n * 2 + 1]);",
          "content_same": false
        },
        {
          "line": 399,
          "old_api": null,
          "new_api": "m_config_set_option_cli",
          "old_text": null,
          "new_text": "m_config_set_option_cli(config, opt, val, 0)",
          "old_line_content": "    return 0;",
          "new_line_content": "        if (m_config_set_option_cli(config, opt, val, 0) < 0)",
          "content_same": false
        },
        {
          "line": 1421,
          "old_api": null,
          "new_api": "pthread_mutex_unlock",
          "old_text": null,
          "new_text": "pthread_mutex_unlock(&shadow->lock)",
          "old_line_content": "{",
          "new_line_content": "    pthread_mutex_unlock(&shadow->lock);",
          "content_same": false
        },
        {
          "line": 913,
          "old_api": null,
          "new_api": "bstr0",
          "old_text": null,
          "new_text": "bstr0(action->name)",
          "old_line_content": "                name->start[basename.len] == '-')",
          "new_line_content": "            bstr suffix = bstr0(action->name);",
          "content_same": false
        },
        {
          "line": 915,
          "old_api": null,
          "new_api": "bstr_endswith",
          "old_text": null,
          "new_text": "bstr_endswith(*name, suffix)",
          "old_line_content": "                *out_add_flags = action->flags;",
          "new_line_content": "            if (bstr_endswith(*name, suffix) &&",
          "content_same": false
        },
        {
          "line": 1428,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(cache->wakeup_dispatch_queue)",
          "old_line_content": "}",
          "new_line_content": "    assert(cache->wakeup_dispatch_queue);",
          "content_same": false
        },
        {
          "line": 1429,
          "old_api": null,
          "new_api": "mp_dispatch_enqueue_notify",
          "old_text": null,
          "new_text": "mp_dispatch_enqueue_notify(cache->wakeup_dispatch_queue,\n                               cache->wakeup_dispatch_cb,\n                               cache->wakeup_dispatch_cb_ctx)",
          "old_line_content": "",
          "new_line_content": "    mp_dispatch_enqueue_notify(cache->wakeup_dispatch_queue,",
          "content_same": false
        },
        {
          "line": 414,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(entry->name, name)",
          "old_line_content": "    }",
          "new_line_content": "        if (name && strcmp(entry->name, name) == 0) {",
          "content_same": false
        },
        {
          "line": 415,
          "old_api": null,
          "new_api": "m_config_set_obj_params",
          "old_text": null,
          "new_text": "m_config_set_obj_params(config, log, global, desc, entry->attribs)",
          "old_line_content": "",
          "new_line_content": "            if (m_config_set_obj_params(config, log, global, desc, entry->attribs) < 0)",
          "content_same": false
        },
        {
          "line": 420,
          "old_api": null,
          "new_api": "m_config_set_obj_params",
          "old_text": null,
          "new_text": "m_config_set_obj_params(config, log, global, desc, args)",
          "old_line_content": "error:",
          "new_line_content": "    if (m_config_set_obj_params(config, log, global, desc, args) < 0)",
          "content_same": false
        },
        {
          "line": 1444,
          "old_api": null,
          "new_api": "mp_dispatch_cancel_fn",
          "old_text": null,
          "new_text": "mp_dispatch_cancel_fn(cache->wakeup_dispatch_queue,\n                              cache->wakeup_dispatch_cb,\n                              cache->wakeup_dispatch_cb_ctx)",
          "old_line_content": "",
          "new_line_content": "        mp_dispatch_cancel_fn(cache->wakeup_dispatch_queue,",
          "content_same": false
        },
        {
          "line": 425,
          "old_api": null,
          "new_api": "talloc_free",
          "old_text": null,
          "new_text": "talloc_free(config)",
          "old_line_content": "static void ensure_backup(struct m_config *config, struct m_config_option *co)",
          "new_line_content": "    talloc_free(config);",
          "content_same": false
        },
        {
          "line": 940,
          "old_api": null,
          "new_api": "m_config_mogrify_cli_opt",
          "old_text": null,
          "new_text": "m_config_mogrify_cli_opt(config, &name, &negate, &(int){0})",
          "old_line_content": "        goto done;",
          "new_line_content": "        m_config_mogrify_cli_opt(config, &name, &negate, &(int){0});",
          "content_same": false
        },
        {
          "line": 1457,
          "old_api": null,
          "new_api": "m_config_cache_set_wakeup_cb",
          "old_text": null,
          "new_text": "m_config_cache_set_wakeup_cb(cache, dispatch_notify, cache)",
          "old_line_content": "void *mp_get_config_group(void *ta_parent, struct mpv_global *global,",
          "new_line_content": "        m_config_cache_set_wakeup_cb(cache, dispatch_notify, cache);",
          "content_same": false
        },
        {
          "line": 437,
          "old_api": null,
          "new_api": "talloc_ptrtype",
          "old_text": null,
          "new_text": "talloc_ptrtype(NULL, bc)",
          "old_line_content": "    };",
          "new_line_content": "    struct m_opt_backup *bc = talloc_ptrtype(NULL, bc);",
          "content_same": false
        },
        {
          "line": 440,
          "old_api": null,
          "new_api": "talloc_zero_size",
          "old_text": null,
          "new_text": "talloc_zero_size(bc, co->opt->type->size)",
          "old_line_content": "    config->backup_opts = bc;",
          "new_line_content": "        .backup = talloc_zero_size(bc, co->opt->type->size),",
          "content_same": false
        },
        {
          "line": 1464,
          "old_api": null,
          "new_api": "m_config_cache_alloc",
          "old_text": null,
          "new_text": "m_config_cache_alloc(NULL, global, group)",
          "old_line_content": "    return cache->opts;",
          "new_line_content": "    struct m_config_cache *cache = m_config_cache_alloc(NULL, global, group);",
          "content_same": false
        },
        {
          "line": 442,
          "old_api": null,
          "new_api": "m_option_copy",
          "old_text": null,
          "new_text": "m_option_copy(co->opt, bc->backup, co->data)",
          "old_line_content": "}",
          "new_line_content": "    m_option_copy(co->opt, bc->backup, co->data);",
          "content_same": false
        },
        {
          "line": 1466,
          "old_api": null,
          "new_api": "ta_set_parent",
          "old_text": null,
          "new_text": "ta_set_parent(cache->opts, ta_parent)",
          "old_line_content": "",
          "new_line_content": "    ta_set_parent(cache->opts, ta_parent);",
          "content_same": false
        },
        {
          "line": 1467,
          "old_api": null,
          "new_api": "ta_set_parent",
          "old_text": null,
          "new_text": "ta_set_parent(cache, cache->opts)",
          "old_line_content": "void mp_read_option_raw(struct mpv_global *global, const char *name,",
          "new_line_content": "    ta_set_parent(cache, cache->opts);",
          "content_same": false
        },
        {
          "line": 957,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(co->opt->type->parse)",
          "old_line_content": "        goto done;",
          "new_line_content": "    assert(co->opt->type->parse);",
          "content_same": false
        },
        {
          "line": 959,
          "old_api": null,
          "new_api": "handle_set_opt_flags",
          "old_text": null,
          "new_text": "handle_set_opt_flags(config, co, flags)",
          "old_line_content": "    if (r == 2) {",
          "new_line_content": "    r = handle_set_opt_flags(config, co, flags);",
          "content_same": false
        },
        {
          "line": 1475,
          "old_api": null,
          "new_api": "bstr0",
          "old_text": null,
          "new_text": "bstr0(name)",
          "old_line_content": "",
          "new_line_content": "    struct m_config_option *co = m_config_get_co_raw(shadow->root, bstr0(name));",
          "content_same": false
        },
        {
          "line": 964,
          "old_api": null,
          "new_api": "MP_DBG",
          "old_text": null,
          "new_text": "MP_DBG(config, \"Setting option '%.*s' = '%.*s' (flags = %d)\\n\",\n               BSTR_P(name), BSTR_P(param), flags)",
          "old_line_content": "    union m_option_value val = {0};",
          "new_line_content": "        MP_DBG(config, \"Setting option '%.*s' = '%.*s' (flags = %d)\\n\",",
          "content_same": false
        },
        {
          "line": 965,
          "old_api": null,
          "new_api": "BSTR_P",
          "old_text": null,
          "new_text": "BSTR_P(param)",
          "old_line_content": "",
          "new_line_content": "               BSTR_P(name), BSTR_P(param), flags);",
          "content_same": false
        },
        {
          "line": 1478,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(co->opt->type == type)",
          "old_line_content": "",
          "new_line_content": "    assert(co->opt->type == type);",
          "content_same": false
        },
        {
          "line": 456,
          "old_api": null,
          "new_api": "m_option_free",
          "old_text": null,
          "new_text": "m_option_free(bc->co->opt, bc->backup)",
          "old_line_content": "}",
          "new_line_content": "        m_option_free(bc->co->opt, bc->backup);",
          "content_same": false
        },
        {
          "line": 1481,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(gdata)",
          "old_line_content": "}",
          "new_line_content": "    assert(gdata);",
          "content_same": false
        },
        {
          "line": 458,
          "old_api": null,
          "new_api": "talloc_free",
          "old_text": null,
          "new_text": "talloc_free(bc)",
          "old_line_content": "void m_config_backup_opt(struct m_config *config, const char *opt)",
          "new_line_content": "        talloc_free(bc);",
          "content_same": false
        },
        {
          "line": 1483,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(dst, 0, co->opt->type->size)",
          "old_line_content": "struct m_config *mp_get_root_config(struct mpv_global *global)",
          "new_line_content": "    memset(dst, 0, co->opt->type->size);",
          "content_same": false
        },
        {
          "line": 1484,
          "old_api": null,
          "new_api": "m_option_copy",
          "old_text": null,
          "new_text": "m_option_copy(co->opt, dst, gdata->udata + co->opt->offset)",
          "old_line_content": "{",
          "new_line_content": "    m_option_copy(co->opt, dst, gdata->udata + co->opt->offset);",
          "content_same": false
        },
        {
          "line": 973,
          "old_api": null,
          "new_api": "m_option_copy",
          "old_text": null,
          "new_text": "m_option_copy(co->opt, &val, co->data)",
          "old_line_content": "    if (r >= 0)",
          "new_line_content": "        m_option_copy(co->opt, &val, co->data);",
          "content_same": false
        },
        {
          "line": 975,
          "old_api": null,
          "new_api": "m_option_parse",
          "old_text": null,
          "new_text": "m_option_parse(config->log, co->opt, name, param, &val)",
          "old_line_content": "",
          "new_line_content": "    r = m_option_parse(config->log, co->opt, name, param, &val);",
          "content_same": false
        },
        {
          "line": 466,
          "old_api": null,
          "new_api": "ensure_backup",
          "old_text": null,
          "new_text": "ensure_backup(config, co)",
          "old_line_content": "}",
          "new_line_content": "        ensure_backup(config, co);",
          "content_same": false
        },
        {
          "line": 978,
          "old_api": null,
          "new_api": "m_config_set_option_raw",
          "old_text": null,
          "new_text": "m_config_set_option_raw(config, co, &val, flags)",
          "old_line_content": "done:",
          "new_line_content": "        r = m_config_set_option_raw(config, co, &val, flags);",
          "content_same": false
        },
        {
          "line": 468,
          "old_api": null,
          "new_api": "MP_ERR",
          "old_text": null,
          "new_text": "MP_ERR(config, \"Option %s not found.\\n\", opt)",
          "old_line_content": "void m_config_backup_all_opts(struct m_config *config)",
          "new_line_content": "        MP_ERR(config, \"Option %s not found.\\n\", opt);",
          "content_same": false
        },
        {
          "line": 984,
          "old_api": null,
          "new_api": "MP_ERR",
          "old_text": null,
          "new_text": "MP_ERR(config, \"Error parsing option %.*s (%s)\\n\",\n               BSTR_P(name), m_option_strerror(r))",
          "old_line_content": "    return r;",
          "new_line_content": "        MP_ERR(config, \"Error parsing option %.*s (%s)\\n\",",
          "content_same": false
        },
        {
          "line": 985,
          "old_api": null,
          "new_api": "m_option_strerror",
          "old_text": null,
          "new_text": "m_option_strerror(r)",
          "old_line_content": "}",
          "new_line_content": "               BSTR_P(name), m_option_strerror(r));",
          "content_same": false
        },
        {
          "line": 475,
          "old_api": null,
          "new_api": "ensure_backup",
          "old_text": null,
          "new_text": "ensure_backup(config, &config->opts[n])",
          "old_line_content": "                                   int parent_group_index,",
          "new_line_content": "        ensure_backup(config, &config->opts[n]);",
          "content_same": false
        },
        {
          "line": 484,
          "old_api": null,
          "new_api": "get_desc",
          "old_text": null,
          "new_text": "list->get_desc(&desc, n)",
          "old_line_content": "                          desc.global_opts);",
          "new_line_content": "        if (!list->get_desc(&desc, n))",
          "content_same": false
        },
        {
          "line": 996,
          "old_api": null,
          "new_api": "m_config_get_co",
          "old_text": null,
          "new_text": "m_config_get_co(config, name)",
          "old_line_content": "    // Do this on an \"empty\" type to make setting the option strictly overwrite",
          "new_line_content": "    struct m_config_option *co = m_config_get_co(config, name);",
          "content_same": false
        },
        {
          "line": 491,
          "old_api": null,
          "new_api": "talloc_ptrtype",
          "old_text": null,
          "new_text": "talloc_ptrtype(config, conf)",
          "old_line_content": "                .defaults = desc.priv_defaults,",
          "new_line_content": "            struct m_sub_options *conf = talloc_ptrtype(config, conf);",
          "content_same": false
        },
        {
          "line": 1005,
          "old_api": null,
          "new_api": "bstr0",
          "old_text": null,
          "new_text": "bstr0(data->u.string)",
          "old_line_content": "    }",
          "new_line_content": "        bstr param = bstr0(data->u.string);",
          "content_same": false
        },
        {
          "line": 1006,
          "old_api": null,
          "new_api": "m_option_parse",
          "old_text": null,
          "new_text": "m_option_parse(mp_null_log, co->opt, name, param, &val)",
          "old_line_content": "",
          "new_line_content": "        r = m_option_parse(mp_null_log, co->opt, name, param, &val);",
          "content_same": false
        },
        {
          "line": 498,
          "old_api": null,
          "new_api": "add_sub_group",
          "old_text": null,
          "new_text": "add_sub_group(config, NULL, parent_group_index, -1, conf)",
          "old_line_content": "",
          "new_line_content": "            add_sub_group(config, NULL, parent_group_index, -1, conf);",
          "content_same": false
        },
        {
          "line": 506,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(b)",
          "old_line_content": "        return a;",
          "new_line_content": "    assert(b);",
          "content_same": false
        },
        {
          "line": 1015,
          "old_api": null,
          "new_api": "print",
          "old_text": null,
          "new_text": "m_option_type_node.print(NULL, data)",
          "old_line_content": "    }",
          "new_line_content": "        char *s = m_option_type_node.print(NULL, data);",
          "content_same": false
        },
        {
          "line": 1016,
          "old_api": null,
          "new_api": "MP_DBG",
          "old_text": null,
          "new_text": "MP_DBG(config, \"Setting option '%.*s' = %s (flags = %d) -> %d\\n\",\n               BSTR_P(name), s ? s : \"?\", flags, r)",
          "old_line_content": "",
          "new_line_content": "        MP_DBG(config, \"Setting option '%.*s' = %s (flags = %d) -> %d\\n\",",
          "content_same": false
        },
        {
          "line": 505,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(a)",
          "old_line_content": "    if (!b[0])",
          "new_line_content": "    assert(a);",
          "content_same": false
        },
        {
          "line": 1018,
          "old_api": null,
          "new_api": "talloc_free",
          "old_text": null,
          "new_text": "talloc_free(s)",
          "old_line_content": "    return r;",
          "new_line_content": "        talloc_free(s);",
          "content_same": false
        },
        {
          "line": 1021,
          "old_api": null,
          "new_api": "m_option_free",
          "old_text": null,
          "new_text": "m_option_free(co->opt, &val)",
          "old_line_content": "int m_config_option_requires_param(struct m_config *config, bstr name)",
          "new_line_content": "    m_option_free(co->opt, &val);",
          "content_same": false
        },
        {
          "line": 511,
          "old_api": null,
          "new_api": "talloc_asprintf",
          "old_text": null,
          "new_text": "talloc_asprintf(ta_parent, \"%s-%s\", a, b)",
          "old_line_content": "                          int parent_group_index, int parent_ptr,",
          "new_line_content": "    return talloc_asprintf(ta_parent, \"%s-%s\", a, b);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 1026,
          "old_api": "m_config_mogrify_cli_opt",
          "new_api": null,
          "old_text": "m_config_mogrify_cli_opt(config, &name, &negate, &flags)",
          "new_text": null,
          "old_line_content": "        m_config_mogrify_cli_opt(config, &name, &negate, &flags);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 516,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(config->groups[n].group != subopts)",
          "new_text": null,
          "old_line_content": "        assert(config->groups[n].group != subopts);",
          "new_line_content": "                          const struct m_sub_options *subopts)",
          "content_same": false
        },
        {
          "line": 519,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(!(subopts->change_flags & ~(unsigned)UPDATE_OPTS_MASK))",
          "new_text": null,
          "old_line_content": "    assert(!(subopts->change_flags & ~(unsigned)UPDATE_OPTS_MASK));",
          "new_line_content": "    for (int n = 0; n < config->num_groups; n++)",
          "content_same": false
        },
        {
          "line": 521,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(parent_group_index >= -1 && parent_group_index < config->num_groups)",
          "new_text": null,
          "old_line_content": "    assert(parent_group_index >= -1 && parent_group_index < config->num_groups);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1034,
          "old_api": "m_option_required_params",
          "new_api": null,
          "old_text": "m_option_required_params(co->opt)",
          "new_text": null,
          "old_line_content": "    return m_option_required_params(co->opt);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 524,
          "old_api": "MP_TARRAY_GROW",
          "new_api": null,
          "old_text": "MP_TARRAY_GROW(config, config->groups, group_index)",
          "new_text": null,
          "old_line_content": "    MP_TARRAY_GROW(config, config->groups, group_index);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1041,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(a->name, b->name)",
          "new_text": null,
          "old_line_content": "    return strcasecmp(a->name, b->name);",
          "new_line_content": "static int sort_opt_compare(const void *pa, const void *pb)",
          "content_same": false
        },
        {
          "line": 1051,
          "old_api": "talloc_memdup",
          "new_api": null,
          "old_text": "talloc_memdup(NULL, config->opts, config->num_opts * sizeof(sorted[0]))",
          "new_text": null,
          "old_line_content": "        talloc_memdup(NULL, config->opts, config->num_opts * sizeof(sorted[0]));",
          "new_line_content": "    int count = 0;",
          "content_same": false
        },
        {
          "line": 1053,
          "old_api": "qsort",
          "new_api": null,
          "old_text": "qsort(sorted, config->num_opts, sizeof(sorted[0]), sort_opt_compare)",
          "new_text": null,
          "old_line_content": "        qsort(sorted, config->num_opts, sizeof(sorted[0]), sort_opt_compare);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 544,
          "old_api": "concat_name",
          "new_api": null,
          "old_text": "concat_name(config, name_prefix, opt->name)",
          "new_text": null,
          "old_line_content": "            .name = concat_name(config, name_prefix, opt->name),",
          "new_line_content": "        if (opt->type == &m_option_type_subconfig)",
          "content_same": false
        },
        {
          "line": 1061,
          "old_api": "strstr",
          "new_api": null,
          "old_text": "strstr(co->name, name)",
          "new_text": null,
          "old_line_content": "        if (strcmp(name, \"*\") != 0 && !strstr(co->name, name))",
          "new_line_content": "        struct m_config_option *co = &sorted[i];",
          "content_same": false
        },
        {
          "line": 551,
          "old_api": "MP_TARRAY_APPEND",
          "new_api": null,
          "old_text": "MP_TARRAY_APPEND(config, config->opts, config->num_opts, co)",
          "new_text": null,
          "old_line_content": "            MP_TARRAY_APPEND(config, config->opts, config->num_opts, co);",
          "new_line_content": "            .is_hidden = !!opt->deprecation_message,",
          "content_same": false
        },
        {
          "line": 1063,
          "old_api": "MP_INFO",
          "new_api": null,
          "old_text": "MP_INFO(config, \" %s%-30s\", prefix, co->name)",
          "new_text": null,
          "old_line_content": "        MP_INFO(config, \" %s%-30s\", prefix, co->name);",
          "new_line_content": "        if (co->is_hidden)",
          "content_same": false
        },
        {
          "line": 1068,
          "old_api": "MP_INFO",
          "new_api": null,
          "old_text": "MP_INFO(config, \" %s\", alt[n].name)",
          "new_text": null,
          "old_line_content": "                MP_INFO(config, \" %s\", alt[n].name);",
          "new_line_content": "        if (opt->type == &m_option_type_choice) {",
          "content_same": false
        },
        {
          "line": 1070,
          "old_api": "MP_INFO",
          "new_api": null,
          "old_text": "MP_INFO(config, \" (or an integer)\")",
          "new_text": null,
          "old_line_content": "                MP_INFO(config, \" (or an integer)\");",
          "new_line_content": "            struct m_opt_choice_alternatives *alt = opt->priv;",
          "content_same": false
        },
        {
          "line": 1075,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(min, sizeof(min), \"any\")",
          "new_text": null,
          "old_line_content": "            snprintf(min, sizeof(min), \"any\");",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 1078,
          "old_api": "snprintf",
          "new_api": null,
          "old_text": "snprintf(min, sizeof(min), \"%.14g\", opt->min)",
          "new_text": null,
          "old_line_content": "                snprintf(min, sizeof(min), \"%.14g\", opt->min);",
          "new_line_content": "        if (opt->flags & (M_OPT_MIN | M_OPT_MAX)) {",
          "content_same": false
        },
        {
          "line": 567,
          "old_api": "substruct_read_ptr",
          "new_api": null,
          "old_text": "substruct_read_ptr(ptr)",
          "new_text": null,
          "old_line_content": "                assert(!substruct_read_ptr(ptr));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1081,
          "old_api": "MP_INFO",
          "new_api": null,
          "old_text": "MP_INFO(config, \" (%s to %s)\", min, max)",
          "new_text": null,
          "old_line_content": "            MP_INFO(config, \" (%s to %s)\", min, max);",
          "new_line_content": "            if (opt->flags & M_OPT_MIN)",
          "content_same": false
        },
        {
          "line": 570,
          "old_api": "concat_name",
          "new_api": null,
          "old_text": "concat_name(config, name_prefix, opt->name)",
          "new_text": null,
          "old_line_content": "            const char *prefix = concat_name(config, name_prefix, opt->name);",
          "new_line_content": "                void *ptr = (char *)subopts->defaults + opt->offset;",
          "content_same": false
        },
        {
          "line": 1090,
          "old_api": "MP_INFO",
          "new_api": null,
          "old_text": "MP_INFO(config, \" (default: %s)\", def)",
          "new_text": null,
          "old_line_content": "            MP_INFO(config, \" (default: %s)\", def);",
          "new_line_content": "            defptr = &default_value;",
          "content_same": false
        },
        {
          "line": 1091,
          "old_api": "talloc_free",
          "new_api": null,
          "old_text": "talloc_free(def)",
          "new_text": null,
          "old_line_content": "            talloc_free(def);",
          "new_line_content": "        if (defptr)",
          "content_same": false
        },
        {
          "line": 1096,
          "old_api": "MP_INFO",
          "new_api": null,
          "old_text": "MP_INFO(config, \" [file]\")",
          "new_text": null,
          "old_line_content": "            MP_INFO(config, \" [file]\");",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 589,
          "old_api": "bstr0",
          "new_api": null,
          "old_text": "bstr0(co->name)",
          "new_text": null,
          "old_line_content": "        struct bstr coname = bstr0(co->name);",
          "new_line_content": "        return NULL;",
          "content_same": false
        },
        {
          "line": 590,
          "old_api": "bstrcmp",
          "new_api": null,
          "old_text": "bstrcmp(coname, name)",
          "new_text": null,
          "old_line_content": "        if (bstrcmp(coname, name) == 0)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1103,
          "old_api": "MP_INFO",
          "new_api": null,
          "old_text": "MP_INFO(config, \"\\n\")",
          "new_text": null,
          "old_line_content": "        MP_INFO(config, \"\\n\");",
          "new_line_content": "        if (opt->type == &m_option_type_alias)",
          "content_same": false
        },
        {
          "line": 1111,
          "old_api": "MP_INFO",
          "new_api": null,
          "old_text": "MP_INFO(config, \"\\nTotal: %d options\\n\", count)",
          "new_text": null,
          "old_line_content": "    MP_INFO(config, \"\\nTotal: %d options\\n\", count);",
          "new_line_content": "            count++;",
          "content_same": false
        },
        {
          "line": 1112,
          "old_api": "talloc_free",
          "new_api": null,
          "old_text": "talloc_free(sorted)",
          "new_text": null,
          "old_line_content": "    talloc_free(sorted);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 601,
          "old_api": "m_config_get_co_raw",
          "new_api": null,
          "old_text": "m_config_get_co_raw(config, name)",
          "new_text": null,
          "old_line_content": "    struct m_config_option *co = m_config_get_co_raw(config, name);",
          "new_line_content": "// Like m_config_get_co_raw(), but resolve aliases.",
          "content_same": false
        },
        {
          "line": 1117,
          "old_api": "talloc_new",
          "new_api": null,
          "old_text": "talloc_new(ta_parent)",
          "new_text": null,
          "old_line_content": "    char **list = talloc_new(ta_parent);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 610,
          "old_api": "MP_WARN",
          "new_api": null,
          "old_text": "MP_WARN(config, \"Warning: option %s%s was replaced with \"\n                        \"%s%s: %s\\n\", prefix, co->name, prefix, alias,\n                        co->opt->deprecation_message)",
          "new_text": null,
          "old_line_content": "                MP_WARN(config, \"Warning: option %s%s was replaced with \"",
          "new_line_content": "    if (co->opt->type == &m_option_type_alias) {",
          "content_same": false
        },
        {
          "line": 1125,
          "old_api": "talloc_strdup",
          "new_api": null,
          "old_text": "talloc_strdup(ta_parent, co->name)",
          "new_text": null,
          "old_line_content": "        char *s = talloc_strdup(ta_parent, co->name);",
          "new_line_content": "        if (co->is_hidden)",
          "content_same": false
        },
        {
          "line": 1126,
          "old_api": "MP_TARRAY_APPEND",
          "new_api": null,
          "old_text": "MP_TARRAY_APPEND(ta_parent, list, count, s)",
          "new_text": null,
          "old_line_content": "        MP_TARRAY_APPEND(ta_parent, list, count, s);",
          "new_line_content": "            continue;",
          "content_same": false
        },
        {
          "line": 1128,
          "old_api": "MP_TARRAY_APPEND",
          "new_api": null,
          "old_text": "MP_TARRAY_APPEND(ta_parent, list, count, NULL)",
          "new_text": null,
          "old_line_content": "    MP_TARRAY_APPEND(ta_parent, list, count, NULL);",
          "new_line_content": "        // as allocation parent.",
          "content_same": false
        },
        {
          "line": 620,
          "old_api": "bstr0",
          "new_api": null,
          "old_text": "bstr0(alias)",
          "new_text": null,
          "old_line_content": "        return m_config_get_co_any(config, bstr0(alias));",
          "new_line_content": "                        prefix, co->name, prefix, alias);",
          "content_same": false
        },
        {
          "line": 1135,
          "old_api": "bstr_equals0",
          "new_api": null,
          "old_text": "bstr_equals0(name, p->name)",
          "new_text": null,
          "old_line_content": "        if (bstr_equals0(name, p->name))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 625,
          "old_api": "MP_FATAL",
          "new_api": null,
          "old_text": "MP_FATAL(config, \"Option %s%s was removed: %s\\n\",\n                         prefix, co->name, msg)",
          "new_text": null,
          "old_line_content": "                MP_FATAL(config, \"Option %s%s was removed: %s\\n\",",
          "new_line_content": "    } else if (co->opt->type == &m_option_type_removed) {",
          "content_same": false
        },
        {
          "line": 628,
          "old_api": "MP_FATAL",
          "new_api": null,
          "old_text": "MP_FATAL(config, \"Option %s%s was removed.\\n\",\n                         prefix, co->name)",
          "new_text": null,
          "old_line_content": "                MP_FATAL(config, \"Option %s%s was removed.\\n\",",
          "new_line_content": "            if (msg) {",
          "content_same": false
        },
        {
          "line": 1144,
          "old_api": "bstr0",
          "new_api": null,
          "old_text": "bstr0(name)",
          "new_text": null,
          "old_line_content": "    return m_config_get_profile(config, bstr0(name));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 636,
          "old_api": "MP_WARN",
          "new_api": null,
          "old_text": "MP_WARN(config, \"Warning: option %s%s is deprecated \"\n                    \"and might be removed in the future (%s).\\n\",\n                    prefix, co->name, co->opt->deprecation_message)",
          "new_text": null,
          "old_line_content": "            MP_WARN(config, \"Warning: option %s%s is deprecated \"",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1151,
          "old_api": "m_config_get_profile0",
          "new_api": null,
          "old_text": "m_config_get_profile0(config, name)",
          "new_text": null,
          "old_line_content": "    struct m_profile *p = m_config_get_profile0(config, name);",
          "new_line_content": "struct m_profile *m_config_add_profile(struct m_config *config, char *name)",
          "content_same": false
        },
        {
          "line": 1154,
          "old_api": "talloc_zero",
          "new_api": null,
          "old_text": "talloc_zero(config, struct m_profile)",
          "new_text": null,
          "old_line_content": "    p = talloc_zero(config, struct m_profile);",
          "new_line_content": "        name = \"default\";",
          "content_same": false
        },
        {
          "line": 648,
          "old_api": "m_config_get_co_any",
          "new_api": null,
          "old_text": "m_config_get_co_any(config, name)",
          "new_text": null,
          "old_line_content": "    struct m_config_option *co = m_config_get_co_any(config, name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1163,
          "old_api": "talloc_free",
          "new_api": null,
          "old_text": "talloc_free(p->desc)",
          "new_text": null,
          "old_line_content": "    talloc_free(p->desc);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1164,
          "old_api": "bstrto0",
          "new_api": null,
          "old_text": "bstrto0(p, desc)",
          "new_text": null,
          "old_line_content": "    p->desc = bstrto0(p, desc);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1170,
          "old_api": "m_config_set_option_cli",
          "new_api": null,
          "old_text": "m_config_set_option_cli(config, name, val,\n                                    M_SETOPT_CHECK_ONLY |\n                                    M_SETOPT_FROM_CONFIG_FILE)",
          "new_text": null,
          "old_line_content": "    int i = m_config_set_option_cli(config, name, val,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1175,
          "old_api": "talloc_realloc",
          "new_api": null,
          "old_text": "talloc_realloc(p, p->opts, char *, 2 * (p->num_opts + 2))",
          "new_text": null,
          "old_line_content": "    p->opts = talloc_realloc(p, p->opts, char *, 2 * (p->num_opts + 2));",
          "new_line_content": "                                    M_SETOPT_CHECK_ONLY |",
          "content_same": false
        },
        {
          "line": 1176,
          "old_api": "bstrto0",
          "new_api": null,
          "old_text": "bstrto0(p, name)",
          "new_text": null,
          "old_line_content": "    p->opts[p->num_opts * 2] = bstrto0(p, name);",
          "new_line_content": "                                    M_SETOPT_FROM_CONFIG_FILE);",
          "content_same": false
        },
        {
          "line": 1177,
          "old_api": "bstrto0",
          "new_api": null,
          "old_text": "bstrto0(p, val)",
          "new_text": null,
          "old_line_content": "    p->opts[p->num_opts * 2 + 1] = bstrto0(p, val);",
          "new_line_content": "    if (i < 0)",
          "content_same": false
        },
        {
          "line": 1185,
          "old_api": "m_config_get_profile0",
          "new_api": null,
          "old_text": "m_config_get_profile0(config, name)",
          "new_text": null,
          "old_line_content": "    struct m_profile *p = m_config_get_profile0(config, name);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1187,
          "old_api": "MP_WARN",
          "new_api": null,
          "old_text": "MP_WARN(config, \"Unknown profile '%s'.\\n\", name)",
          "new_text": null,
          "old_line_content": "        MP_WARN(config, \"Unknown profile '%s'.\\n\", name);",
          "new_line_content": "int m_config_set_profile(struct m_config *config, char *name, int flags)",
          "content_same": false
        },
        {
          "line": 1192,
          "old_api": "MP_WARN",
          "new_api": null,
          "old_text": "MP_WARN(config, \"WARNING: Profile inclusion too deep.\\n\")",
          "new_text": null,
          "old_line_content": "        MP_WARN(config, \"WARNING: Profile inclusion too deep.\\n\");",
          "new_line_content": "        return M_OPT_INVALID;",
          "content_same": false
        },
        {
          "line": 1197,
          "old_api": "m_config_set_option_cli",
          "new_api": null,
          "old_text": "m_config_set_option_cli(config,\n                                bstr0(p->opts[2 * i]),\n                                bstr0(p->opts[2 * i + 1]),\n                                flags | M_SETOPT_FROM_CONFIG_FILE)",
          "new_text": null,
          "old_line_content": "        m_config_set_option_cli(config,",
          "new_line_content": "        return M_OPT_INVALID;",
          "content_same": false
        },
        {
          "line": 1198,
          "old_api": "bstr0",
          "new_api": null,
          "old_text": "bstr0(p->opts[2 * i])",
          "new_text": null,
          "old_line_content": "                                bstr0(p->opts[2 * i]),",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1199,
          "old_api": "bstr0",
          "new_api": null,
          "old_text": "bstr0(p->opts[2 * i + 1])",
          "new_text": null,
          "old_line_content": "                                bstr0(p->opts[2 * i + 1]),",
          "new_line_content": "    config->profile_depth++;",
          "content_same": false
        },
        {
          "line": 1209,
          "old_api": "m_config_add_profile",
          "new_api": null,
          "old_text": "m_config_add_profile(config, NULL)",
          "new_text": null,
          "old_line_content": "    struct m_profile *p = m_config_add_profile(config, NULL);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1210,
          "old_api": "m_config_set_profile",
          "new_api": null,
          "old_text": "m_config_set_profile(config, p->name, flags)",
          "new_text": null,
          "old_line_content": "    m_config_set_profile(config, p->name, flags);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 187,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(&temp, src, opt->type->size)",
          "new_text": null,
          "old_line_content": "        memcpy(&temp, src, opt->type->size);",
          "new_line_content": "        union m_option_value temp;",
          "content_same": false
        },
        {
          "line": 1217,
          "old_api": "node_init",
          "new_api": null,
          "old_text": "node_init(&root, MPV_FORMAT_NODE_ARRAY, NULL)",
          "new_text": null,
          "old_line_content": "    node_init(&root, MPV_FORMAT_NODE_ARRAY, NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 195,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(group_index == data->group_index + data->num_gdata)",
          "new_text": null,
          "old_line_content": "    assert(group_index == data->group_index + data->num_gdata);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 196,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(group_index < data->root->num_groups)",
          "new_text": null,
          "old_line_content": "    assert(group_index < data->root->num_groups);",
          "new_line_content": "static void alloc_group(struct m_config_data *data, int group_index,",
          "content_same": false
        },
        {
          "line": 1223,
          "old_api": "node_map_add_string",
          "new_api": null,
          "old_text": "node_map_add_string(entry, \"name\", profile->name)",
          "new_text": null,
          "old_line_content": "        node_map_add_string(entry, \"name\", profile->name);",
          "new_line_content": "    for (m_profile_t *profile = config->profiles; profile; profile = profile->next)",
          "content_same": false
        },
        {
          "line": 1228,
          "old_api": "node_map_add",
          "new_api": null,
          "old_text": "node_map_add(entry, \"options\", MPV_FORMAT_NODE_ARRAY)",
          "new_text": null,
          "old_line_content": "            node_map_add(entry, \"options\", MPV_FORMAT_NODE_ARRAY);",
          "new_line_content": "        if (profile->desc)",
          "content_same": false
        },
        {
          "line": 718,
          "old_api": "MP_ERR",
          "new_api": null,
          "old_text": "MP_ERR(config, \"The %s option can't be used in a config file.\\n\",\n               co->name)",
          "new_text": null,
          "old_line_content": "        MP_ERR(config, \"The %s option can't be used in a config file.\\n\",",
          "new_line_content": "        return M_OPT_INVALID;",
          "content_same": false
        },
        {
          "line": 207,
          "old_api": "talloc_zero_size",
          "new_api": null,
          "old_text": "talloc_zero_size(data, opts->size)",
          "new_text": null,
          "old_line_content": "        .udata = talloc_zero_size(data, opts->size),",
          "new_line_content": "    struct m_group_data *copy_gdata =",
          "content_same": false
        },
        {
          "line": 1231,
          "old_api": "node_array_add",
          "new_api": null,
          "old_text": "node_array_add(opts, MPV_FORMAT_NODE_MAP)",
          "new_text": null,
          "old_line_content": "            struct mpv_node *opt_entry = node_array_add(opts, MPV_FORMAT_NODE_MAP);",
          "new_line_content": "        struct mpv_node *opts =",
          "content_same": false
        },
        {
          "line": 1233,
          "old_api": "node_map_add_string",
          "new_api": null,
          "old_text": "node_map_add_string(opt_entry, \"value\", profile->opts[n * 2 + 1])",
          "new_text": null,
          "old_line_content": "            node_map_add_string(opt_entry, \"value\", profile->opts[n * 2 + 1]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 723,
          "old_api": "ensure_backup",
          "new_api": null,
          "old_text": "ensure_backup(config, co)",
          "new_text": null,
          "old_line_content": "        ensure_backup(config, co);",
          "new_line_content": "               co->name);",
          "content_same": false
        },
        {
          "line": 212,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(gdata->udata, opts->defaults, opts->size)",
          "new_text": null,
          "old_line_content": "        memcpy(gdata->udata, opts->defaults, opts->size);",
          "new_line_content": "        .ts = copy_gdata ? copy_gdata->ts : 0,",
          "content_same": false
        },
        {
          "line": 217,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(n >= 0 && n < data->root->num_opts)",
          "new_text": null,
          "old_line_content": "        assert(n >= 0 && n < data->root->num_opts);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1242,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(config->global)",
          "new_text": null,
          "old_line_content": "    assert(config->global);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1243,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(!config->shadow && !config->global->config)",
          "new_text": null,
          "old_line_content": "    assert(!config->shadow && !config->global->config);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1245,
          "old_api": "talloc_zero",
          "new_api": null,
          "old_text": "talloc_zero(NULL, struct m_config_shadow)",
          "new_text": null,
          "old_line_content": "    config->shadow = talloc_zero(NULL, struct m_config_shadow);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 228,
          "old_api": "init_opt_inplace",
          "new_api": null,
          "old_text": "init_opt_inplace(co->opt, dst, defptr)",
          "new_text": null,
          "old_line_content": "        init_opt_inplace(co->opt, dst, defptr);",
          "new_line_content": "        const void *defptr = co->opt->defval ? co->opt->defval : dst;",
          "content_same": false
        },
        {
          "line": 745,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(co->name, \"profile\")",
          "new_text": null,
          "old_line_content": "    if (config->use_profiles && strcmp(co->name, \"profile\") == 0) {",
          "new_line_content": "static int m_config_handle_special_options(struct m_config *config,",
          "content_same": false
        },
        {
          "line": 234,
          "old_api": "m_config_gdata",
          "new_api": null,
          "old_text": "m_config_gdata(data, group->parent_group)",
          "new_text": null,
          "old_line_content": "            m_config_gdata(data, group->parent_group);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 235,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(parent_gdata)",
          "new_text": null,
          "old_line_content": "        assert(parent_gdata);",
          "new_line_content": "    // If there's a parent, update its pointer to the new struct.",
          "content_same": false
        },
        {
          "line": 748,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(list[0], \"help\")",
          "new_text": null,
          "old_line_content": "        if (list && list[0] && !list[1] && strcmp(list[0], \"help\") == 0) {",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 237,
          "old_api": "substruct_write_ptr",
          "new_api": null,
          "old_text": "substruct_write_ptr(parent_gdata->udata + group->parent_ptr, gdata->udata)",
          "new_text": null,
          "old_line_content": "        substruct_write_ptr(parent_gdata->udata + group->parent_ptr, gdata->udata);",
          "new_line_content": "        struct m_group_data *parent_gdata =",
          "content_same": false
        },
        {
          "line": 750,
          "old_api": "MP_INFO",
          "new_api": null,
          "old_text": "MP_INFO(config, \"No profiles have been defined.\\n\")",
          "new_text": null,
          "old_line_content": "                MP_INFO(config, \"No profiles have been defined.\\n\");",
          "new_line_content": "        char **list = *(char ***)data;",
          "content_same": false
        },
        {
          "line": 1260,
          "old_api": "m_config_cache_set_wakeup_cb",
          "new_api": null,
          "old_text": "m_config_cache_set_wakeup_cb(cache, NULL, NULL)",
          "new_text": null,
          "old_line_content": "    m_config_cache_set_wakeup_cb(cache, NULL, NULL);",
          "new_line_content": "    struct m_config_cache *cache = p;",
          "content_same": false
        },
        {
          "line": 1261,
          "old_api": "m_config_cache_set_dispatch_change_cb",
          "new_api": null,
          "old_text": "m_config_cache_set_dispatch_change_cb(cache, NULL, NULL, NULL)",
          "new_text": null,
          "old_line_content": "    m_config_cache_set_dispatch_change_cb(cache, NULL, NULL, NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 753,
          "old_api": "MP_INFO",
          "new_api": null,
          "old_text": "MP_INFO(config, \"Available profiles:\\n\")",
          "new_text": null,
          "old_line_content": "            MP_INFO(config, \"Available profiles:\\n\");",
          "new_line_content": "            if (!config->profiles) {",
          "content_same": false
        },
        {
          "line": 755,
          "old_api": "MP_INFO",
          "new_api": null,
          "old_text": "MP_INFO(config, \"\\t%s\\t%s\\n\", p->name, p->desc ? p->desc : \"\")",
          "new_text": null,
          "old_line_content": "                MP_INFO(config, \"\\t%s\\t%s\\n\", p->name, p->desc ? p->desc : \"\");",
          "new_line_content": "                return M_OPT_EXIT;",
          "content_same": false
        },
        {
          "line": 756,
          "old_api": "MP_INFO",
          "new_api": null,
          "old_text": "MP_INFO(config, \"\\n\")",
          "new_text": null,
          "old_line_content": "            MP_INFO(config, \"\\n\");",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 761,
          "old_api": "m_config_set_profile",
          "new_api": null,
          "old_text": "m_config_set_profile(config, list[n], flags)",
          "new_text": null,
          "old_line_content": "            int r = m_config_set_profile(config, list[n], flags);",
          "new_line_content": "            return M_OPT_EXIT;",
          "content_same": false
        },
        {
          "line": 253,
          "old_api": "m_option_free",
          "new_api": null,
          "old_text": "m_option_free(co->opt, gdata->udata + co->opt->offset)",
          "new_text": null,
          "old_line_content": "                m_option_free(co->opt, gdata->udata + co->opt->offset);",
          "new_line_content": "        for (int n = group->co_index; n < group->co_end_index; n++) {",
          "content_same": false
        },
        {
          "line": 768,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(co->name, \"include\")",
          "new_text": null,
          "old_line_content": "    if (config->includefunc && strcmp(co->name, \"include\") == 0) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1280,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(group_index >= 0)",
          "new_text": null,
          "old_line_content": "    assert(group_index >= 0); // invalid group (or not in option tree)",
          "new_line_content": "            break;",
          "content_same": false
        },
        {
          "line": 1282,
          "old_api": "talloc_zero",
          "new_api": null,
          "old_text": "talloc_zero(ta_parent, struct m_config_cache)",
          "new_text": null,
          "old_line_content": "    struct m_config_cache *cache = talloc_zero(ta_parent, struct m_config_cache);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1283,
          "old_api": "talloc_set_destructor",
          "new_api": null,
          "old_text": "talloc_set_destructor(cache, cache_destroy)",
          "new_text": null,
          "old_line_content": "    talloc_set_destructor(cache, cache_destroy);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 773,
          "old_api": "MP_ERR",
          "new_api": null,
          "old_text": "MP_ERR(config, \"Maximum 'include' nesting depth exceeded.\\n\")",
          "new_text": null,
          "old_line_content": "            MP_ERR(config, \"Maximum 'include' nesting depth exceeded.\\n\");",
          "new_line_content": "        char *param = *(char **)data;",
          "content_same": false
        },
        {
          "line": 1288,
          "old_api": "pthread_mutex_unlock",
          "new_api": null,
          "old_text": "pthread_mutex_unlock(&shadow->lock)",
          "new_text": null,
          "old_line_content": "    pthread_mutex_unlock(&shadow->lock);",
          "new_line_content": "    cache->shadow = shadow;",
          "content_same": false
        },
        {
          "line": 267,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(group_index >= 0 && group_index < root->num_groups)",
          "new_text": null,
          "old_line_content": "    assert(group_index >= 0 && group_index < root->num_groups);",
          "new_line_content": "                                                  struct m_config *root,",
          "content_same": false
        },
        {
          "line": 268,
          "old_api": "talloc_zero",
          "new_api": null,
          "old_text": "talloc_zero(ta_parent, struct m_config_data)",
          "new_text": null,
          "old_line_content": "    struct m_config_data *data = talloc_zero(ta_parent, struct m_config_data);",
          "new_line_content": "                                                  int group_index,",
          "content_same": false
        },
        {
          "line": 269,
          "old_api": "talloc_set_destructor",
          "new_api": null,
          "old_text": "talloc_set_destructor(data, free_option_data)",
          "new_text": null,
          "old_line_content": "    talloc_set_destructor(data, free_option_data);",
          "new_line_content": "                                                  struct m_config_data *copy)",
          "content_same": false
        },
        {
          "line": 780,
          "old_api": "m_config_finish_default_profile",
          "new_api": null,
          "old_text": "m_config_finish_default_profile(config, flags)",
          "new_text": null,
          "old_line_content": "            m_config_finish_default_profile(config, flags);",
          "new_line_content": "        config->recursion_depth += 1;",
          "content_same": false
        },
        {
          "line": 785,
          "old_api": "bstr0",
          "new_api": null,
          "old_text": "bstr0(*(char **)data)",
          "new_text": null,
          "old_line_content": "        return show_profile(config, bstr0(*(char **)data));",
          "new_line_content": "        return 1;",
          "content_same": false
        },
        {
          "line": 1297,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(dst->root == src->root)",
          "new_text": null,
          "old_line_content": "    assert(dst->root == src->root);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 275,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(root_group->group_count > 0)",
          "new_text": null,
          "old_line_content": "    assert(root_group->group_count > 0);",
          "new_line_content": "    data->root = root;",
          "content_same": false
        },
        {
          "line": 787,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(co->name, \"h\")",
          "new_text": null,
          "old_line_content": "    if (config->is_toplevel && (strcmp(co->name, \"h\") == 0 ||",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 278,
          "old_api": "alloc_group",
          "new_api": null,
          "old_text": "alloc_group(data, n, copy)",
          "new_text": null,
          "old_line_content": "        alloc_group(data, n, copy);",
          "new_line_content": "    struct m_config_group *root_group = &root->groups[group_index];",
          "content_same": false
        },
        {
          "line": 1302,
          "old_api": "MPMAX",
          "new_api": null,
          "old_text": "MPMAX(dst->group_index, src->group_index)",
          "new_text": null,
          "old_line_content": "    int group_s = MPMAX(dst->group_index, src->group_index);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1303,
          "old_api": "MPMIN",
          "new_api": null,
          "old_text": "MPMIN(dst->group_index + dst->num_gdata,\n                        src->group_index + src->num_gdata)",
          "new_text": null,
          "old_line_content": "    int group_e = MPMIN(dst->group_index + dst->num_gdata,",
          "new_line_content": "    dst->ts = src->ts;",
          "content_same": false
        },
        {
          "line": 793,
          "old_api": "m_config_print_option_list",
          "new_api": null,
          "old_text": "m_config_print_option_list(config, h)",
          "new_text": null,
          "old_line_content": "            m_config_print_option_list(config, h);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 1305,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(group_s >= 0 && group_e <= dst->root->num_groups)",
          "new_text": null,
          "old_line_content": "    assert(group_s >= 0 && group_e <= dst->root->num_groups);",
          "new_line_content": "    // Must be from same root, but they can have arbitrary overlap.",
          "content_same": false
        },
        {
          "line": 1308,
          "old_api": "m_config_gdata",
          "new_api": null,
          "old_text": "m_config_gdata(src, n)",
          "new_text": null,
          "old_line_content": "        struct m_group_data *gsrc = m_config_gdata(src, n);",
          "new_line_content": "                        src->group_index + src->num_gdata);",
          "content_same": false
        },
        {
          "line": 798,
          "old_api": "m_config_print_option_list",
          "new_api": null,
          "old_text": "m_config_print_option_list(config, \"*\")",
          "new_text": null,
          "old_line_content": "        m_config_print_option_list(config, \"*\");",
          "new_line_content": "        return M_OPT_EXIT;",
          "content_same": false
        },
        {
          "line": 1310,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(gsrc && gdst)",
          "new_text": null,
          "old_line_content": "        assert(gsrc && gdst);",
          "new_line_content": "    for (int n = group_s; n < group_e; n++) {",
          "content_same": false
        },
        {
          "line": 289,
          "old_api": "m_config_restore_backups",
          "new_api": null,
          "old_text": "m_config_restore_backups(config)",
          "new_text": null,
          "old_line_content": "    m_config_restore_backups(config);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 294,
          "old_api": "pthread_mutex_destroy",
          "new_api": null,
          "old_text": "pthread_mutex_destroy(&config->shadow->lock)",
          "new_text": null,
          "old_line_content": "        pthread_mutex_destroy(&config->shadow->lock);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 295,
          "old_api": "talloc_free",
          "new_api": null,
          "old_text": "talloc_free(config->shadow)",
          "new_text": null,
          "old_line_content": "        talloc_free(config->shadow);",
          "new_line_content": "    if (config->shadow) {",
          "content_same": false
        },
        {
          "line": 1319,
          "old_api": "m_option_copy",
          "new_api": null,
          "old_text": "m_option_copy(co->opt, gdst->udata + co->opt->offset,\n                                       gsrc->udata + co->opt->offset)",
          "new_text": null,
          "old_line_content": "                m_option_copy(co->opt, gdst->udata + co->opt->offset,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 814,
          "old_api": "handle_set_opt_flags",
          "new_api": null,
          "old_text": "handle_set_opt_flags(config, co, flags)",
          "new_text": null,
          "old_line_content": "    int r = handle_set_opt_flags(config, co, flags);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 305,
          "old_api": "talloc",
          "new_api": null,
          "old_text": "talloc(talloc_ctx, struct m_config)",
          "new_text": null,
          "old_line_content": "    struct m_config *config = talloc(talloc_ctx, struct m_config);",
          "new_line_content": "struct m_config *m_config_new(void *talloc_ctx, struct mp_log *log,",
          "content_same": false
        },
        {
          "line": 306,
          "old_api": "talloc_set_destructor",
          "new_api": null,
          "old_text": "talloc_set_destructor(config, config_destroy)",
          "new_text": null,
          "old_line_content": "    talloc_set_destructor(config, config_destroy);",
          "new_line_content": "                              size_t size, const void *defaults,",
          "content_same": false
        },
        {
          "line": 1332,
          "old_api": "atomic_load",
          "new_api": null,
          "old_text": "atomic_load(&shadow->data->ts)",
          "new_text": null,
          "old_line_content": "    if (atomic_load(&shadow->data->ts) <= cache->data->ts)",
          "new_line_content": "    struct m_config_shadow *shadow = cache->shadow;",
          "content_same": false
        },
        {
          "line": 1335,
          "old_api": "pthread_mutex_lock",
          "new_api": null,
          "old_text": "pthread_mutex_lock(&shadow->lock)",
          "new_text": null,
          "old_line_content": "    pthread_mutex_lock(&shadow->lock);",
          "new_line_content": "    // this makes it faster or slower. Just cargo culting it.",
          "content_same": false
        },
        {
          "line": 1337,
          "old_api": "pthread_mutex_unlock",
          "new_api": null,
          "old_text": "pthread_mutex_unlock(&shadow->lock)",
          "new_text": null,
          "old_line_content": "    pthread_mutex_unlock(&shadow->lock);",
          "new_line_content": "        return false;",
          "content_same": false
        },
        {
          "line": 315,
          "old_api": "add_sub_group",
          "new_api": null,
          "old_text": "add_sub_group(config, NULL, -1, -1, subopts)",
          "new_text": null,
          "old_line_content": "    add_sub_group(config, NULL, -1, -1, subopts);",
          "new_line_content": "        .opts = options,",
          "content_same": false
        },
        {
          "line": 827,
          "old_api": "m_option_copy",
          "new_api": null,
          "old_text": "m_option_copy(co->opt, co->data, data)",
          "new_text": null,
          "old_line_content": "    m_option_copy(co->opt, co->data, data);",
          "new_line_content": "    // should work, or maybe not. For now they would require special code.",
          "content_same": false
        },
        {
          "line": 829,
          "old_api": "m_config_mark_co_flags",
          "new_api": null,
          "old_text": "m_config_mark_co_flags(co, flags)",
          "new_text": null,
          "old_line_content": "    m_config_mark_co_flags(co, flags);",
          "new_line_content": "        return flags & M_SETOPT_FROM_CMDLINE ? 0 : M_OPT_UNKNOWN;",
          "content_same": false
        },
        {
          "line": 830,
          "old_api": "m_config_notify_change_co",
          "new_api": null,
          "old_text": "m_config_notify_change_co(config, co)",
          "new_text": null,
          "old_line_content": "    m_config_notify_change_co(config, co);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 320,
          "old_api": "allocate_option_data",
          "new_api": null,
          "old_text": "allocate_option_data(config, config, 0, NULL)",
          "new_text": null,
          "old_line_content": "    config->data = allocate_option_data(config, config, 0, NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1345,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(co->data)",
          "new_text": null,
          "old_line_content": "    assert(co->data);",
          "new_line_content": "void m_config_notify_change_co(struct m_config *config,",
          "content_same": false
        },
        {
          "line": 1348,
          "old_api": "pthread_mutex_lock",
          "new_api": null,
          "old_text": "pthread_mutex_lock(&shadow->lock)",
          "new_text": null,
          "old_line_content": "        pthread_mutex_lock(&shadow->lock);",
          "new_line_content": "    struct m_config_shadow *shadow = config->shadow;",
          "content_same": false
        },
        {
          "line": 325,
          "old_api": "m_config_gdata",
          "new_api": null,
          "old_text": "m_config_gdata(config->data, co->group_index)",
          "new_text": null,
          "old_line_content": "        struct m_group_data *gdata = m_config_gdata(config->data, co->group_index);",
          "new_line_content": "    config->optstruct = config->data->gdata[0].udata;",
          "content_same": false
        },
        {
          "line": 1351,
          "old_api": "m_config_gdata",
          "new_api": null,
          "old_text": "m_config_gdata(data, co->group_index)",
          "new_text": null,
          "old_line_content": "        struct m_group_data *gdata = m_config_gdata(data, co->group_index);",
          "new_line_content": "    if (shadow) {",
          "content_same": false
        },
        {
          "line": 1354,
          "old_api": "atomic_fetch_add",
          "new_api": null,
          "old_text": "atomic_fetch_add(&data->ts, 1)",
          "new_text": null,
          "old_line_content": "        gdata->ts = atomic_fetch_add(&data->ts, 1) + 1;",
          "new_line_content": "        struct m_config_data *data = shadow->data;",
          "content_same": false
        },
        {
          "line": 845,
          "old_api": "handle_set_opt_flags",
          "new_api": null,
          "old_text": "handle_set_opt_flags(config, co, flags)",
          "new_text": null,
          "old_line_content": "        int r = handle_set_opt_flags(config, co, flags);",
          "new_line_content": "    if (!co)",
          "content_same": false
        },
        {
          "line": 1361,
          "old_api": "wakeup_cb",
          "new_api": null,
          "old_text": "cache->wakeup_cb(cache->wakeup_cb_ctx)",
          "new_text": null,
          "old_line_content": "                cache->wakeup_cb(cache->wakeup_cb_ctx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 339,
          "old_api": "m_config_new",
          "new_api": null,
          "old_text": "m_config_new(talloc_ctx, log, desc->priv_size, desc->priv_defaults,\n                     desc->options)",
          "new_text": null,
          "old_line_content": "        m_config_new(talloc_ctx, log, desc->priv_size, desc->priv_defaults,",
          "new_line_content": "                                               struct mpv_global *global,",
          "content_same": false
        },
        {
          "line": 852,
          "old_api": "m_config_set_option_raw_direct",
          "new_api": null,
          "old_text": "m_config_set_option_raw_direct(config, co, data, flags)",
          "new_text": null,
          "old_line_content": "        return m_config_set_option_raw_direct(config, co, data, flags);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 352,
          "old_api": "m_config_new",
          "new_api": null,
          "old_text": "m_config_new(talloc_ctx, log, 0, desc->priv_defaults, desc->options)",
          "new_text": null,
          "old_line_content": "    return m_config_new(talloc_ctx, log, 0, desc->priv_defaults, desc->options);",
          "new_line_content": "struct m_config *m_config_from_obj_desc_noalloc(void *talloc_ctx,",
          "content_same": false
        },
        {
          "line": 1376,
          "old_api": "option_change_callback",
          "new_api": null,
          "old_text": "config->option_change_callback(config->option_change_callback_ctx, co,\n                                       changed)",
          "new_text": null,
          "old_line_content": "        config->option_change_callback(config->option_change_callback_ctx, co,",
          "new_line_content": "        group_index = g->parent_group;",
          "content_same": false
        },
        {
          "line": 867,
          "old_api": "m_config_get_co",
          "new_api": null,
          "old_text": "m_config_get_co(config, *name)",
          "new_text": null,
          "old_line_content": "    struct m_config_option *co = m_config_get_co(config, *name);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 873,
          "old_api": "bstr_eatstart0",
          "new_api": null,
          "old_text": "bstr_eatstart0(&no_name, \"no-\")",
          "new_text": null,
          "old_line_content": "    if (!co && bstr_eatstart0(&no_name, \"no-\")) {",
          "new_line_content": "        return co;",
          "content_same": false
        },
        {
          "line": 874,
          "old_api": "m_config_get_co",
          "new_api": null,
          "old_text": "m_config_get_co(config, no_name)",
          "new_text": null,
          "old_line_content": "        co = m_config_get_co(config, no_name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1386,
          "old_api": "m_config_notify_change_co",
          "new_api": null,
          "old_text": "m_config_notify_change_co(config, co)",
          "new_text": null,
          "old_line_content": "            m_config_notify_change_co(config, co);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1392,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(false)",
          "new_text": null,
          "old_line_content": "    assert(false);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 887,
          "old_api": "m_config_get_co_any",
          "new_api": null,
          "old_text": "m_config_get_co_any(config, *name)",
          "new_text": null,
          "old_line_content": "    co = m_config_get_co_any(config, *name);",
          "new_line_content": "        return co;",
          "content_same": false
        },
        {
          "line": 1400,
          "old_api": "pthread_mutex_lock",
          "new_api": null,
          "old_text": "pthread_mutex_lock(&shadow->lock)",
          "new_text": null,
          "old_line_content": "    pthread_mutex_lock(&shadow->lock);",
          "new_line_content": "                                  void (*cb)(void *ctx), void *cb_ctx)",
          "content_same": false
        },
        {
          "line": 377,
          "old_api": "find_group",
          "new_api": null,
          "old_text": "find_group(global, desc->options)",
          "new_text": null,
          "old_line_content": "    const struct m_config_group *group = find_group(global, desc->options);",
          "new_line_content": "// with just zero (or priv_defaults if set).",
          "content_same": false
        },
        {
          "line": 889,
          "old_api": "bstr0",
          "new_api": null,
          "old_text": "bstr0((char *)co->opt->priv)",
          "new_text": null,
          "old_line_content": "        *name = bstr0((char *)co->opt->priv);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 379,
          "old_api": "mp_get_config_group",
          "new_api": null,
          "old_text": "mp_get_config_group(ta_parent, global, group->group)",
          "new_text": null,
          "old_line_content": "        return mp_get_config_group(ta_parent, global, group->group);",
          "new_line_content": "        struct mpv_global *global, struct m_obj_desc *desc, const char *name)",
          "content_same": false
        },
        {
          "line": 895,
          "old_api": "bstr0",
          "new_api": null,
          "old_text": "bstr0(co->name)",
          "new_text": null,
          "old_line_content": "        struct bstr basename = bstr0(co->name);",
          "new_line_content": "    // Might be a suffix \"action\", like \"--vf-add\". Expensively check for",
          "content_same": false
        },
        {
          "line": 1407,
          "old_api": "talloc_free",
          "new_api": null,
          "old_text": "talloc_free(shadow->listeners)",
          "new_text": null,
          "old_line_content": "            talloc_free(shadow->listeners);",
          "new_line_content": "            if (shadow->listeners[n] == cache)",
          "content_same": false
        },
        {
          "line": 897,
          "old_api": "bstr_startswith",
          "new_api": null,
          "old_text": "bstr_startswith(*name, basename)",
          "new_text": null,
          "old_line_content": "        if (!bstr_startswith(*name, basename))",
          "new_line_content": "    for (int n = 0; n < config->num_opts; n++) {",
          "content_same": false
        },
        {
          "line": 1412,
          "old_api": "MP_TARRAY_APPEND",
          "new_api": null,
          "old_text": "MP_TARRAY_APPEND(NULL, shadow->listeners, shadow->num_listeners, cache)",
          "new_text": null,
          "old_line_content": "        MP_TARRAY_APPEND(NULL, shadow->listeners, shadow->num_listeners, cache);",
          "new_line_content": "            shadow->listeners = NULL;",
          "content_same": false
        },
        {
          "line": 902,
          "old_api": "m_config_get_co_any",
          "new_api": null,
          "old_text": "m_config_get_co_any(config, basename)",
          "new_text": null,
          "old_line_content": "            co = m_config_get_co_any(config, basename);",
          "new_line_content": "            continue;",
          "content_same": false
        },
        {
          "line": 393,
          "old_api": "bstr0",
          "new_api": null,
          "old_text": "bstr0(args[n * 2 + 0])",
          "new_text": null,
          "old_line_content": "        bstr opt = bstr0(args[n * 2 + 0]);",
          "new_line_content": "                                   struct mpv_global *global,",
          "content_same": false
        },
        {
          "line": 394,
          "old_api": "bstr0",
          "new_api": null,
          "old_text": "bstr0(args[n * 2 + 1])",
          "new_text": null,
          "old_line_content": "        bstr val = bstr0(args[n * 2 + 1]);",
          "new_line_content": "                                   struct m_obj_desc *desc, char **args)",
          "content_same": false
        },
        {
          "line": 395,
          "old_api": "m_config_set_option_cli",
          "new_api": null,
          "old_text": "m_config_set_option_cli(config, opt, val, 0)",
          "new_text": null,
          "old_line_content": "        if (m_config_set_option_cli(config, opt, val, 0) < 0)",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1417,
          "old_api": "pthread_mutex_unlock",
          "new_api": null,
          "old_text": "pthread_mutex_unlock(&shadow->lock)",
          "new_text": null,
          "old_line_content": "    pthread_mutex_unlock(&shadow->lock);",
          "new_line_content": "        cache->in_list = true;",
          "content_same": false
        },
        {
          "line": 909,
          "old_api": "bstr0",
          "new_api": null,
          "old_text": "bstr0(action->name)",
          "new_text": null,
          "old_line_content": "            bstr suffix = bstr0(action->name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 911,
          "old_api": "bstr_endswith",
          "new_api": null,
          "old_text": "bstr_endswith(*name, suffix)",
          "new_text": null,
          "old_line_content": "            if (bstr_endswith(*name, suffix) &&",
          "new_line_content": "        for (int i = 0; type->actions && type->actions[i].name; i++) {",
          "content_same": false
        },
        {
          "line": 1424,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(cache->wakeup_dispatch_queue)",
          "new_text": null,
          "old_line_content": "    assert(cache->wakeup_dispatch_queue);",
          "new_line_content": "static void dispatch_notify(void *p)",
          "content_same": false
        },
        {
          "line": 1425,
          "old_api": "mp_dispatch_enqueue_notify",
          "new_api": null,
          "old_text": "mp_dispatch_enqueue_notify(cache->wakeup_dispatch_queue,\n                               cache->wakeup_dispatch_cb,\n                               cache->wakeup_dispatch_cb_ctx)",
          "new_text": null,
          "old_line_content": "    mp_dispatch_enqueue_notify(cache->wakeup_dispatch_queue,",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 406,
          "old_api": "m_config_from_obj_desc",
          "new_api": null,
          "old_text": "m_config_from_obj_desc(ta_parent, log, global, desc)",
          "new_text": null,
          "old_line_content": "    struct m_config *config = m_config_from_obj_desc(ta_parent, log, global, desc);",
          "new_line_content": "struct m_config *m_config_from_obj_desc_and_args(void *ta_parent,",
          "content_same": false
        },
        {
          "line": 411,
          "old_api": "m_config_set_obj_params",
          "new_api": null,
          "old_text": "m_config_set_obj_params(config, log, global, desc, entry->attribs)",
          "new_text": null,
          "old_line_content": "            if (m_config_set_obj_params(config, log, global, desc, entry->attribs) < 0)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1436,
          "old_api": "m_config_cache_set_wakeup_cb",
          "new_api": null,
          "old_text": "m_config_cache_set_wakeup_cb(cache, NULL, NULL)",
          "new_text": null,
          "old_line_content": "    m_config_cache_set_wakeup_cb(cache, NULL, NULL);",
          "new_line_content": "                                           void (*cb)(void *ctx), void *cb_ctx)",
          "content_same": false
        },
        {
          "line": 416,
          "old_api": "m_config_set_obj_params",
          "new_api": null,
          "old_text": "m_config_set_obj_params(config, log, global, desc, args)",
          "new_text": null,
          "old_line_content": "    if (m_config_set_obj_params(config, log, global, desc, args) < 0)",
          "new_line_content": "                goto error;",
          "content_same": false
        },
        {
          "line": 932,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(config != NULL)",
          "new_text": null,
          "old_line_content": "    assert(config != NULL);",
          "new_line_content": "int m_config_set_option_cli(struct m_config *config, struct bstr name,",
          "content_same": false
        },
        {
          "line": 421,
          "old_api": "talloc_free",
          "new_api": null,
          "old_text": "talloc_free(config)",
          "new_text": null,
          "old_line_content": "    talloc_free(config);",
          "new_line_content": "        goto error;",
          "content_same": false
        },
        {
          "line": 1453,
          "old_api": "m_config_cache_set_wakeup_cb",
          "new_api": null,
          "old_text": "m_config_cache_set_wakeup_cb(cache, dispatch_notify, cache)",
          "new_text": null,
          "old_line_content": "        m_config_cache_set_wakeup_cb(cache, dispatch_notify, cache);",
          "new_line_content": "    if (cb) {",
          "content_same": false
        },
        {
          "line": 433,
          "old_api": "talloc_ptrtype",
          "new_api": null,
          "old_text": "talloc_ptrtype(NULL, bc)",
          "new_text": null,
          "old_line_content": "    struct m_opt_backup *bc = talloc_ptrtype(NULL, bc);",
          "new_line_content": "    for (struct m_opt_backup *cur = config->backup_opts; cur; cur = cur->next) {",
          "content_same": false
        },
        {
          "line": 436,
          "old_api": "talloc_zero_size",
          "new_api": null,
          "old_text": "talloc_zero_size(bc, co->opt->type->size)",
          "new_text": null,
          "old_line_content": "        .backup = talloc_zero_size(bc, co->opt->type->size),",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 949,
          "old_api": "bstr0",
          "new_api": null,
          "old_text": "bstr0(\"no\")",
          "new_text": null,
          "old_line_content": "        param = bstr0(\"no\");",
          "new_line_content": "            r = M_OPT_DISALLOW_PARAM;",
          "content_same": false
        },
        {
          "line": 438,
          "old_api": "m_option_copy",
          "new_api": null,
          "old_text": "m_option_copy(co->opt, bc->backup, co->data)",
          "new_text": null,
          "old_line_content": "    m_option_copy(co->opt, bc->backup, co->data);",
          "new_line_content": "    *bc = (struct m_opt_backup) {",
          "content_same": false
        },
        {
          "line": 1460,
          "old_api": "m_config_cache_alloc",
          "new_api": null,
          "old_text": "m_config_cache_alloc(NULL, global, group)",
          "new_text": null,
          "old_line_content": "    struct m_config_cache *cache = m_config_cache_alloc(NULL, global, group);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1462,
          "old_api": "ta_set_parent",
          "new_api": null,
          "old_text": "ta_set_parent(cache->opts, ta_parent)",
          "new_text": null,
          "old_line_content": "    ta_set_parent(cache->opts, ta_parent);",
          "new_line_content": "                          const struct m_sub_options *group)",
          "content_same": false
        },
        {
          "line": 1463,
          "old_api": "ta_set_parent",
          "new_api": null,
          "old_text": "ta_set_parent(cache, cache->opts)",
          "new_text": null,
          "old_line_content": "    ta_set_parent(cache, cache->opts);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 955,
          "old_api": "handle_set_opt_flags",
          "new_api": null,
          "old_text": "handle_set_opt_flags(config, co, flags)",
          "new_text": null,
          "old_line_content": "    r = handle_set_opt_flags(config, co, flags);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1471,
          "old_api": "bstr0",
          "new_api": null,
          "old_text": "bstr0(name)",
          "new_text": null,
          "old_line_content": "    struct m_config_option *co = m_config_get_co_raw(shadow->root, bstr0(name));",
          "new_line_content": "void mp_read_option_raw(struct mpv_global *global, const char *name,",
          "content_same": false
        },
        {
          "line": 960,
          "old_api": "MP_DBG",
          "new_api": null,
          "old_text": "MP_DBG(config, \"Setting option '%.*s' = '%.*s' (flags = %d)\\n\",\n               BSTR_P(name), BSTR_P(param), flags)",
          "new_text": null,
          "old_line_content": "        MP_DBG(config, \"Setting option '%.*s' = '%.*s' (flags = %d)\\n\",",
          "new_line_content": "    if (r <= 0)",
          "content_same": false
        },
        {
          "line": 961,
          "old_api": "BSTR_P",
          "new_api": null,
          "old_text": "BSTR_P(param)",
          "new_text": null,
          "old_line_content": "               BSTR_P(name), BSTR_P(param), flags);",
          "new_line_content": "        goto done;",
          "content_same": false
        },
        {
          "line": 450,
          "old_api": "m_config_set_option_raw",
          "new_api": null,
          "old_text": "m_config_set_option_raw(config, bc->co, bc->backup, 0)",
          "new_text": null,
          "old_line_content": "        m_config_set_option_raw(config, bc->co, bc->backup, 0);",
          "new_line_content": "    while (config->backup_opts) {",
          "content_same": false
        },
        {
          "line": 1472,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(co)",
          "new_text": null,
          "old_line_content": "    assert(co);",
          "new_line_content": "                        const struct m_option_type *type, void *dst)",
          "content_same": false
        },
        {
          "line": 452,
          "old_api": "m_option_free",
          "new_api": null,
          "old_text": "m_option_free(bc->co->opt, bc->backup)",
          "new_text": null,
          "old_line_content": "        m_option_free(bc->co->opt, bc->backup);",
          "new_line_content": "        config->backup_opts = bc->next;",
          "content_same": false
        },
        {
          "line": 1473,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(co->opt->offset >= 0)",
          "new_text": null,
          "old_line_content": "    assert(co->opt->offset >= 0);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1474,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(co->opt->type == type)",
          "new_text": null,
          "old_line_content": "    assert(co->opt->type == type);",
          "new_line_content": "    struct m_config_shadow *shadow = global->config;",
          "content_same": false
        },
        {
          "line": 1479,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(dst, 0, co->opt->type->size)",
          "new_text": null,
          "old_line_content": "    memset(dst, 0, co->opt->type->size);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 969,
          "old_api": "m_option_copy",
          "new_api": null,
          "old_text": "m_option_copy(co->opt, &val, co->data)",
          "new_text": null,
          "old_line_content": "        m_option_copy(co->opt, &val, co->data);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 971,
          "old_api": "m_option_parse",
          "new_api": null,
          "old_text": "m_option_parse(config->log, co->opt, name, param, &val)",
          "new_text": null,
          "old_line_content": "    r = m_option_parse(config->log, co->opt, name, param, &val);",
          "new_line_content": "    // (Prime examples: --vf-add, --sub-file)",
          "content_same": false
        },
        {
          "line": 460,
          "old_api": "bstr0",
          "new_api": null,
          "old_text": "bstr0(opt)",
          "new_text": null,
          "old_line_content": "    struct m_config_option *co = m_config_get_co(config, bstr0(opt));",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 462,
          "old_api": "ensure_backup",
          "new_api": null,
          "old_text": "ensure_backup(config, co)",
          "new_text": null,
          "old_line_content": "        ensure_backup(config, co);",
          "new_line_content": "void m_config_backup_opt(struct m_config *config, const char *opt)",
          "content_same": false
        },
        {
          "line": 974,
          "old_api": "m_config_set_option_raw",
          "new_api": null,
          "old_text": "m_config_set_option_raw(config, co, &val, flags)",
          "new_text": null,
          "old_line_content": "        r = m_config_set_option_raw(config, co, &val, flags);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 976,
          "old_api": "m_option_free",
          "new_api": null,
          "old_text": "m_option_free(co->opt, &val)",
          "new_text": null,
          "old_line_content": "    m_option_free(co->opt, &val);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 981,
          "old_api": "m_option_strerror",
          "new_api": null,
          "old_text": "m_option_strerror(r)",
          "new_text": null,
          "old_line_content": "               BSTR_P(name), m_option_strerror(r));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 471,
          "old_api": "ensure_backup",
          "new_api": null,
          "old_text": "ensure_backup(config, &config->opts[n])",
          "new_text": null,
          "old_line_content": "        ensure_backup(config, &config->opts[n]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 480,
          "old_api": "get_desc",
          "new_api": null,
          "old_text": "list->get_desc(&desc, n)",
          "new_text": null,
          "old_line_content": "        if (!list->get_desc(&desc, n))",
          "new_line_content": "                                   const struct m_obj_list *list)",
          "content_same": false
        },
        {
          "line": 992,
          "old_api": "m_config_get_co",
          "new_api": null,
          "old_text": "m_config_get_co(config, name)",
          "new_text": null,
          "old_line_content": "    struct m_config_option *co = m_config_get_co(config, name);",
          "new_line_content": "                             struct mpv_node *data, int flags)",
          "content_same": false
        },
        {
          "line": 483,
          "old_api": "add_sub_group",
          "new_api": null,
          "old_text": "add_sub_group(config, NULL, parent_group_index, -1,\n                          desc.global_opts)",
          "new_text": null,
          "old_line_content": "            add_sub_group(config, NULL, parent_group_index, -1,",
          "new_line_content": "    for (int n = 0; ; n++) {",
          "content_same": false
        },
        {
          "line": 1001,
          "old_api": "bstr0",
          "new_api": null,
          "old_text": "bstr0(data->u.string)",
          "new_text": null,
          "old_line_content": "        bstr param = bstr0(data->u.string);",
          "new_line_content": "    // the old value, as opposed to e.g. appending to lists.",
          "content_same": false
        },
        {
          "line": 1002,
          "old_api": "m_option_parse",
          "new_api": null,
          "old_text": "m_option_parse(mp_null_log, co->opt, name, param, &val)",
          "new_text": null,
          "old_line_content": "        r = m_option_parse(mp_null_log, co->opt, name, param, &val);",
          "new_line_content": "    union m_option_value val = {0};",
          "content_same": false
        },
        {
          "line": 1004,
          "old_api": "m_option_set_node",
          "new_api": null,
          "old_text": "m_option_set_node(co->opt, &val, data)",
          "new_text": null,
          "old_line_content": "        r = m_option_set_node(co->opt, &val, data);",
          "new_line_content": "    if (data->format == MPV_FORMAT_STRING) {",
          "content_same": false
        },
        {
          "line": 494,
          "old_api": "add_sub_group",
          "new_api": null,
          "old_text": "add_sub_group(config, NULL, parent_group_index, -1, conf)",
          "new_text": null,
          "old_line_content": "            add_sub_group(config, NULL, parent_group_index, -1, conf);",
          "new_line_content": "                .opts = desc.options,",
          "content_same": false
        },
        {
          "line": 1010,
          "old_api": "mp_msg_test",
          "new_api": null,
          "old_text": "mp_msg_test(config->log, MSGL_V)",
          "new_text": null,
          "old_line_content": "    if (mp_msg_test(config->log, MSGL_V)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1011,
          "old_api": "print",
          "new_api": null,
          "old_text": "m_option_type_node.print(NULL, data)",
          "new_text": null,
          "old_line_content": "        char *s = m_option_type_node.print(NULL, data);",
          "new_line_content": "    if (r >= 0)",
          "content_same": false
        },
        {
          "line": 501,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(a)",
          "new_text": null,
          "old_line_content": "    assert(a);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 502,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(b)",
          "new_text": null,
          "old_line_content": "    assert(b);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1013,
          "old_api": "BSTR_P",
          "new_api": null,
          "old_text": "BSTR_P(name)",
          "new_text": null,
          "old_line_content": "               BSTR_P(name), s ? s : \"?\", flags, r);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 507,
          "old_api": "talloc_asprintf",
          "new_api": null,
          "old_text": "talloc_asprintf(ta_parent, \"%s-%s\", a, b)",
          "new_text": null,
          "old_line_content": "    return talloc_asprintf(ta_parent, \"%s-%s\", a, b);",
          "new_line_content": "    if (!a[0])",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 52,
      "total_additions": 204,
      "total_deletions": 203,
      "total_api_changes": 459
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 10,
        "api_related_lines": 459,
        "non_api_lines": 5,
        "non_api_line_numbers": [
          193,
          181,
          185,
          186,
          191
        ]
      }
    },
    "api_calls_before": 287,
    "api_calls_after": 288,
    "diff_info": {
      "added_lines": 9,
      "removed_lines": 5,
      "total_diff_lines": 30
    }
  }
}
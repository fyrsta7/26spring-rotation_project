{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/mpv/modified_file/7eaba4c13d27f941c84ad944b67b0502149c4a96",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/mpv/modified_file/7eaba4c13d27f941c84ad944b67b0502149c4a96/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/mpv/modified_file/7eaba4c13d27f941c84ad944b67b0502149c4a96/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/mpv/modified_file/7eaba4c13d27f941c84ad944b67b0502149c4a96/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 664,
          "old_api": "eprintf",
          "new_api": "exp",
          "old_text": "eprintf(\"\\n\")",
          "new_text": "exp(A * ((mx-r)*(mx-r)+(my-r)*(my-r)))",
          "old_line_content": "\tif (DEBUG) eprintf(\"\\n\");",
          "new_line_content": "\t    m[mx+my*w] = (unsigned)(exp(A * ((mx-r)*(mx-r)+(my-r)*(my-r))) * base + .5);",
          "content_same": false
        },
        {
          "line": 680,
          "old_api": "log",
          "new_api": "ceil",
          "old_text": "log(1.0/base)",
          "new_text": "ceil(radius)",
          "old_line_content": "    double const A = log(1.0/base)/(radius*radius*2);",
          "new_line_content": "    int const g_r = ceil(radius);",
          "content_same": false
        },
        {
          "line": 691,
          "old_api": "exp",
          "new_api": "ERROR",
          "old_text": "exp(A * (i-g_r)*(i-g_r))",
          "new_text": "ERROR(\"malloc failed.\")",
          "old_line_content": "\tg[i] = (unsigned)(exp(A * (i-g_r)*(i-g_r)) * base + .5);",
          "new_line_content": "    if (g==NULL || om==NULL) ERROR(\"malloc failed.\");",
          "content_same": false
        },
        {
          "line": 706,
          "old_api": "eprintf",
          "new_api": "sqrt",
          "old_text": "eprintf(\"\\n\")",
          "new_text": "sqrt((mx-o_r)*(mx-o_r)+(my-o_r)*(my-o_r))",
          "old_line_content": "\tif (DEBUG) eprintf(\"\\n\");",
          "new_line_content": "\t    double d = thickness + 1 - sqrt((mx-o_r)*(mx-o_r)+(my-o_r)*(my-o_r));",
          "content_same": false
        },
        {
          "line": 715,
          "old_api": "outline",
          "new_api": "GetTimer",
          "old_text": "outline(bbuffer, abuffer, width, height, om, o_r, o_w)",
          "new_text": "GetTimer()",
          "old_line_content": "      outline(bbuffer, abuffer, width, height, om, o_r, o_w);\t// solid outline",
          "new_line_content": "    ttime=GetTimer();",
          "content_same": false
        },
        {
          "line": 717,
          "old_api": "GetTimer",
          "new_api": "outline1",
          "old_text": "GetTimer()",
          "new_text": "outline1(bbuffer, abuffer, width, height)",
          "old_line_content": "    ttime=GetTimer()-ttime;",
          "new_line_content": "      outline1(bbuffer, abuffer, width, height);\t// FAST solid 1 pixel outline",
          "content_same": false
        },
        {
          "line": 721,
          "old_api": "blur",
          "new_api": "GetTimer",
          "old_text": "blur(abuffer, bbuffer, width, height, g, g_r, g_w, volume)",
          "new_text": "GetTimer()",
          "old_line_content": "    blur(abuffer, bbuffer, width, height, g, g_r, g_w, volume);",
          "new_line_content": "    ttime=GetTimer()-ttime;",
          "content_same": false
        },
        {
          "line": 722,
          "old_api": "GetTimer",
          "new_api": "printf",
          "old_text": "GetTimer()",
          "new_text": "printf(\"outline: %7d us\\n\",ttime)",
          "old_line_content": "    ttime=GetTimer()-ttime;",
          "new_line_content": "    printf(\"outline: %7d us\\n\",ttime);",
          "content_same": false
        },
        {
          "line": 725,
          "old_api": "free",
          "new_api": "blur",
          "old_text": "free(g)",
          "new_text": "blur(abuffer, bbuffer, width, height, g, g_r, g_w, volume)",
          "old_line_content": "    free(g);",
          "new_line_content": "    blur(abuffer, bbuffer, width, height, g, g_r, g_w, volume);",
          "content_same": false
        },
        {
          "line": 726,
          "old_api": "free",
          "new_api": "GetTimer",
          "old_text": "free(om)",
          "new_text": "GetTimer()",
          "old_line_content": "    free(om);",
          "new_line_content": "    ttime=GetTimer()-ttime;",
          "content_same": false
        },
        {
          "line": 762,
          "old_api": "strdup",
          "new_api": "strcmp",
          "old_text": "strdup(argv[a])",
          "new_text": "strcmp(argv[a], \"--outdir\")",
          "old_line_content": "\toutdir = strdup(argv[a]);",
          "new_line_content": "    if (argc>=1 && strcmp(argv[a], \"--outdir\")==0) {",
          "content_same": false
        },
        {
          "line": 766,
          "old_api": "strcmp",
          "new_api": "strdup",
          "old_text": "strcmp(argv[a], \"--append\")",
          "new_text": "strdup(argv[a])",
          "old_line_content": "    if (argc>=1 && strcmp(argv[a], \"--append\")==0) {",
          "new_line_content": "\toutdir = strdup(argv[a]);",
          "content_same": false
        },
        {
          "line": 780,
          "old_api": "atof",
          "new_api": "strcmp",
          "old_text": "atof(argv[a])",
          "new_text": "strcmp(argv[a], \"--blur\")",
          "old_line_content": "\td = atof(argv[a]);",
          "new_line_content": "    if (argc>=1 && strcmp(argv[a], \"--blur\")==0) {",
          "content_same": false
        },
        {
          "line": 782,
          "old_api": "WARNING",
          "new_api": "usage",
          "old_text": "WARNING(\"using default blur radius.\")",
          "new_text": "usage()",
          "old_line_content": "\telse WARNING(\"using default blur radius.\");",
          "new_line_content": "\tif (argc==0) usage();",
          "content_same": false
        },
        {
          "line": 786,
          "old_api": "strcmp",
          "new_api": "WARNING",
          "old_text": "strcmp(argv[a], \"--outline\")",
          "new_text": "WARNING(\"using default blur radius.\")",
          "old_line_content": "    if (argc>=1 && strcmp(argv[a], \"--outline\")==0) {",
          "new_line_content": "\telse WARNING(\"using default blur radius.\");",
          "content_same": false
        },
        {
          "line": 790,
          "old_api": "atof",
          "new_api": "strcmp",
          "old_text": "atof(argv[a])",
          "new_text": "strcmp(argv[a], \"--outline\")",
          "old_line_content": "\td = atof(argv[a]);",
          "new_line_content": "    if (argc>=1 && strcmp(argv[a], \"--outline\")==0) {",
          "content_same": false
        },
        {
          "line": 792,
          "old_api": "WARNING",
          "new_api": "usage",
          "old_text": "WARNING(\"using default outline thickness.\")",
          "new_text": "usage()",
          "old_line_content": "\telse WARNING(\"using default outline thickness.\");",
          "new_line_content": "\tif (argc==0) usage();",
          "content_same": false
        },
        {
          "line": 796,
          "old_api": "usage",
          "new_api": "WARNING",
          "old_text": "usage()",
          "new_text": "WARNING(\"using default outline thickness.\")",
          "old_line_content": "    if (argc<3) usage();",
          "new_line_content": "\telse WARNING(\"using default outline thickness.\");",
          "content_same": false
        },
        {
          "line": 823,
          "old_api": "GetTimer",
          "new_api": "parse_args",
          "old_text": "GetTimer()",
          "new_text": "parse_args(argc, argv)",
          "old_line_content": "    ttime=GetTimer();",
          "new_line_content": "    parse_args(argc, argv);",
          "content_same": false
        },
        {
          "line": 825,
          "old_api": "GetTimer",
          "new_api": "ceil",
          "old_text": "GetTimer()",
          "new_text": "ceil(thickness)",
          "old_line_content": "    ttime=GetTimer()-ttime;",
          "new_line_content": "    padding = ceil(radius) + ceil(thickness);",
          "content_same": false
        },
        {
          "line": 828,
          "old_api": "GetTimer",
          "new_api": "prepare_charset",
          "old_text": "GetTimer()",
          "new_text": "prepare_charset()",
          "old_line_content": "    ttime=GetTimer();",
          "new_line_content": "    prepare_charset();",
          "content_same": false
        },
        {
          "line": 829,
          "old_api": "render",
          "new_api": "GetTimer",
          "old_text": "render()",
          "new_text": "GetTimer()",
          "old_line_content": "    render();",
          "new_line_content": "    ttime=GetTimer()-ttime;",
          "content_same": false
        },
        {
          "line": 830,
          "old_api": "GetTimer",
          "new_api": "printf",
          "old_text": "GetTimer()",
          "new_text": "printf(\"charset: %7d us\\n\",ttime)",
          "old_line_content": "    ttime=GetTimer()-ttime;",
          "new_line_content": "    printf(\"charset: %7d us\\n\",ttime);",
          "content_same": false
        },
        {
          "line": 833,
          "old_api": "write_bitmap",
          "new_api": "render",
          "old_text": "write_bitmap(bbuffer, 'b')",
          "new_text": "render()",
          "old_line_content": "    write_bitmap(bbuffer, 'b');",
          "new_line_content": "    render();",
          "content_same": false
        },
        {
          "line": 835,
          "old_api": "malloc",
          "new_api": "printf",
          "old_text": "malloc(width*height)",
          "new_text": "printf(\"render:  %7d us\\n\",ttime)",
          "old_line_content": "    abuffer = (unsigned char*)malloc(width*height);",
          "new_line_content": "    printf(\"render:  %7d us\\n\",ttime);",
          "content_same": false
        },
        {
          "line": 837,
          "old_api": "alpha",
          "new_api": "write_bitmap",
          "old_text": "alpha()",
          "new_text": "write_bitmap(bbuffer, 'b')",
          "old_line_content": "    alpha();",
          "new_line_content": "    write_bitmap(bbuffer, 'b');",
          "content_same": false
        },
        {
          "line": 840,
          "old_api": "free",
          "new_api": "ERROR",
          "old_text": "free(bbuffer)",
          "new_text": "ERROR(\"malloc failed.\")",
          "old_line_content": "    free(bbuffer);",
          "new_line_content": "    if (abuffer==NULL) ERROR(\"malloc failed.\");",
          "content_same": false
        },
        {
          "line": 841,
          "old_api": "free",
          "new_api": "alpha",
          "old_text": "free(abuffer)",
          "new_text": "alpha()",
          "old_line_content": "    free(abuffer);",
          "new_line_content": "    alpha();",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 770,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(argv[a], \"--append\")",
          "old_line_content": "",
          "new_line_content": "    if (argc>=1 && strcmp(argv[a], \"--append\")==0) {",
          "content_same": false
        },
        {
          "line": 775,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(argv[a], \"--unicode\")",
          "old_line_content": "",
          "new_line_content": "    if (argc>=1 && strcmp(argv[a], \"--unicode\")==0) {",
          "content_same": false
        },
        {
          "line": 527,
          "old_api": null,
          "new_api": "register",
          "old_text": null,
          "new_text": "register",
          "old_line_content": "\t\tint my;",
          "new_line_content": "\t\tregister unsigned char *dstp= t + (y1+y-r)* width + x-r;",
          "content_same": false
        },
        {
          "line": 528,
          "old_api": null,
          "new_api": "register",
          "old_text": null,
          "new_text": "register",
          "old_line_content": "",
          "new_line_content": "\t\tregister int *mp  = m +  y1     *mwidth;",
          "content_same": false
        },
        {
          "line": 784,
          "old_api": null,
          "new_api": "atof",
          "old_text": null,
          "new_text": "atof(argv[a])",
          "old_line_content": "    }",
          "new_line_content": "\td = atof(argv[a]);",
          "content_same": false
        },
        {
          "line": 534,
          "old_api": null,
          "new_api": "register",
          "old_text": null,
          "new_text": "register",
          "old_line_content": "\t\t\tconst int tmp= (src*mp[mx] + 128)>>8;",
          "new_line_content": "\t\t    register int mx;",
          "content_same": false
        },
        {
          "line": 666,
          "old_api": null,
          "new_api": "eprintf",
          "old_text": null,
          "new_text": "eprintf(\"%3i \", m[mx+my*w])",
          "old_line_content": "    if (DEBUG) {",
          "new_line_content": "\t    if (DEBUG) eprintf(\"%3i \", m[mx+my*w]);",
          "content_same": false
        },
        {
          "line": 794,
          "old_api": null,
          "new_api": "atof",
          "old_text": null,
          "new_text": "atof(argv[a])",
          "old_line_content": "    }",
          "new_line_content": "\td = atof(argv[a]);",
          "content_same": false
        },
        {
          "line": 671,
          "old_api": null,
          "new_api": "eprintf",
          "old_text": null,
          "new_text": "eprintf(\"A= %f\\n\", A)",
          "old_line_content": "}",
          "new_line_content": "\teprintf(\"A= %f\\n\", A);",
          "content_same": false
        },
        {
          "line": 672,
          "old_api": null,
          "new_api": "eprintf",
          "old_text": null,
          "new_text": "eprintf(\"volume: %i; exact: %.0f; volume/exact: %.6f\\n\\n\", volume, -M_PI*base/A, volume/(-M_PI*base/A))",
          "old_line_content": "",
          "new_line_content": "\teprintf(\"volume: %i; exact: %.0f; volume/exact: %.6f\\n\\n\", volume, -M_PI*base/A, volume/(-M_PI*base/A));",
          "content_same": false
        },
        {
          "line": 800,
          "old_api": null,
          "new_api": "usage",
          "old_text": null,
          "new_text": "usage()",
          "old_line_content": "\tencoding = argv[a];",
          "new_line_content": "    if (argc<3) usage();",
          "content_same": false
        },
        {
          "line": 805,
          "old_api": null,
          "new_api": "strrchr",
          "old_text": null,
          "new_text": "strrchr(encoding, '/')",
          "old_line_content": "",
          "new_line_content": "    encoding_name = strrchr(encoding, '/');",
          "content_same": false
        },
        {
          "line": 681,
          "old_api": null,
          "new_api": "ceil",
          "old_text": null,
          "new_text": "ceil(thickness)",
          "old_line_content": "",
          "new_line_content": "    int const o_r = ceil(thickness);",
          "content_same": false
        },
        {
          "line": 811,
          "old_api": null,
          "new_api": "atof",
          "old_text": null,
          "new_text": "atof(argv[a])",
          "old_line_content": "    // font",
          "new_line_content": "    d = atof(argv[a]);",
          "content_same": false
        },
        {
          "line": 684,
          "old_api": null,
          "new_api": "log",
          "old_text": null,
          "new_text": "log(1.0/base)",
          "old_line_content": "",
          "new_line_content": "    double const A = log(1.0/base)/(radius*radius*2);",
          "content_same": false
        },
        {
          "line": 689,
          "old_api": null,
          "new_api": "malloc",
          "old_text": null,
          "new_text": "malloc(g_w * sizeof(unsigned))",
          "old_line_content": "    // gaussian curve",
          "new_line_content": "    unsigned *g = (unsigned*)malloc(g_w * sizeof(unsigned));",
          "content_same": false
        },
        {
          "line": 690,
          "old_api": null,
          "new_api": "malloc",
          "old_text": null,
          "new_text": "malloc(o_w*o_w * sizeof(unsigned))",
          "old_line_content": "    for (i = 0; i<g_w; ++i) {",
          "new_line_content": "    unsigned *om = (unsigned*)malloc(o_w*o_w * sizeof(unsigned));",
          "content_same": false
        },
        {
          "line": 695,
          "old_api": null,
          "new_api": "exp",
          "old_text": null,
          "new_text": "exp(A * (i-g_r)*(i-g_r))",
          "old_line_content": "    //volume *= volume;",
          "new_line_content": "\tg[i] = (unsigned)(exp(A * (i-g_r)*(i-g_r)) * base + .5);",
          "content_same": false
        },
        {
          "line": 697,
          "old_api": null,
          "new_api": "eprintf",
          "old_text": null,
          "new_text": "eprintf(\"%3i \", g[i])",
          "old_line_content": "",
          "new_line_content": "\tif (DEBUG) eprintf(\"%3i \", g[i]);",
          "content_same": false
        },
        {
          "line": 827,
          "old_api": null,
          "new_api": "GetTimer",
          "old_text": null,
          "new_text": "GetTimer()",
          "old_line_content": "",
          "new_line_content": "    ttime=GetTimer();",
          "content_same": false
        },
        {
          "line": 700,
          "old_api": null,
          "new_api": "eprintf",
          "old_text": null,
          "new_text": "eprintf(\"\\n\")",
          "old_line_content": "\tfor (mx = 0; mx<o_w; ++mx) {",
          "new_line_content": "    if (DEBUG) eprintf(\"\\n\");",
          "content_same": false
        },
        {
          "line": 832,
          "old_api": null,
          "new_api": "GetTimer",
          "old_text": null,
          "new_text": "GetTimer()",
          "old_line_content": "",
          "new_line_content": "    ttime=GetTimer();",
          "content_same": false
        },
        {
          "line": 834,
          "old_api": null,
          "new_api": "GetTimer",
          "old_text": null,
          "new_text": "GetTimer()",
          "old_line_content": "",
          "new_line_content": "    ttime=GetTimer()-ttime;",
          "content_same": false
        },
        {
          "line": 710,
          "old_api": null,
          "new_api": "eprintf",
          "old_text": null,
          "new_text": "eprintf(\"\\n\")",
          "old_line_content": "",
          "new_line_content": "\tif (DEBUG) eprintf(\"\\n\");",
          "content_same": false
        },
        {
          "line": 839,
          "old_api": null,
          "new_api": "malloc",
          "old_text": null,
          "new_text": "malloc(width*height)",
          "old_line_content": "",
          "new_line_content": "    abuffer = (unsigned char*)malloc(width*height);",
          "content_same": false
        },
        {
          "line": 712,
          "old_api": null,
          "new_api": "eprintf",
          "old_text": null,
          "new_text": "eprintf(\"\\n\")",
          "old_line_content": "    if(thickness==1.0)",
          "new_line_content": "    if (DEBUG) eprintf(\"\\n\");",
          "content_same": false
        },
        {
          "line": 842,
          "old_api": null,
          "new_api": "write_bitmap",
          "old_text": null,
          "new_text": "write_bitmap(abuffer, 'a')",
          "old_line_content": "",
          "new_line_content": "    write_bitmap(abuffer, 'a');",
          "content_same": false
        },
        {
          "line": 844,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(bbuffer)",
          "old_line_content": "    return 0;",
          "new_line_content": "    free(bbuffer);",
          "content_same": false
        },
        {
          "line": 845,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(abuffer)",
          "old_line_content": "}",
          "new_line_content": "    free(abuffer);",
          "content_same": false
        },
        {
          "line": 719,
          "old_api": null,
          "new_api": "outline",
          "old_text": null,
          "new_text": "outline(bbuffer, abuffer, width, height, om, o_r, o_w)",
          "old_line_content": "",
          "new_line_content": "      outline(bbuffer, abuffer, width, height, om, o_r, o_w);\t// solid outline",
          "content_same": false
        },
        {
          "line": 724,
          "old_api": null,
          "new_api": "GetTimer",
          "old_text": null,
          "new_text": "GetTimer()",
          "old_line_content": "",
          "new_line_content": "    ttime=GetTimer();",
          "content_same": false
        },
        {
          "line": 727,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\"gauss:   %7d us\\n\",ttime)",
          "old_line_content": "}",
          "new_line_content": "    printf(\"gauss:   %7d us\\n\",ttime);",
          "content_same": false
        },
        {
          "line": 729,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(g)",
          "old_line_content": "",
          "new_line_content": "    free(g);",
          "content_same": false
        },
        {
          "line": 730,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(om)",
          "old_line_content": "void usage() {",
          "new_line_content": "    free(om);",
          "content_same": false
        },
        {
          "line": 735,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\"Usage: %s [--outdir dir] [--append] [--unicode] [--blur b] [--outline o] encoding ppem font\\n\", command)",
          "old_line_content": "\t    \"  --outdir         output directory to place files.\\n\"",
          "new_line_content": "    printf(\"Usage: %s [--outdir dir] [--append] [--unicode] [--blur b] [--outline o] encoding ppem font\\n\", command);",
          "content_same": false
        },
        {
          "line": 736,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\"\\n\"\n\t    \"  Program creates 3 files: font.desc, <encoding>-a.raw, <encoding>-b.raw.\\n\"\n\t    \"\\n\"\n\t    \"  --outdir         output directory to place files.\\n\"\n\t    \"  --append         append results to existing font.desc, suppress info header.\\n\"\n\t    \"  --unicode        use Unicode in font.desc. This will work with -utf8 option of mplayer.\\n\"\n\t    \"  --blur b         specify blur radius, float.\\n\"\n\t    \"  --outline o      specify outline thickness, float.\\n\"\n\t    \"  encoding         must be an 8 bit encoding, like iso-8859-2, or path to custom encoding file (see README).\\n\"\n\t    \"                   To list encodings available on your system use iconv --list.\\n\"\n\t    \"  ppem             Font size in pixels (default 24), float.\\n\"\n\t    \"  font             Font file path. Any format supported by the freetype library (*.ttf, *.pfb, ...).\\n\"\n\t    )",
          "old_line_content": "\t    \"  --append         append results to existing font.desc, suppress info header.\\n\"",
          "new_line_content": "    printf(\"\\n\"",
          "content_same": false
        },
        {
          "line": 749,
          "old_api": null,
          "new_api": "exit",
          "old_text": null,
          "new_text": "exit(1)",
          "old_line_content": "void parse_args(int argc, char **argv) {",
          "new_line_content": "    exit(1);",
          "content_same": false
        },
        {
          "line": 757,
          "old_api": null,
          "new_api": "strrchr",
          "old_text": null,
          "new_text": "strrchr(argv[a], '/')",
          "old_line_content": "",
          "new_line_content": "    command = strrchr(argv[a], '/');",
          "content_same": false
        },
        {
          "line": 764,
          "old_api": null,
          "new_api": "usage",
          "old_text": null,
          "new_text": "usage()",
          "old_line_content": "    }",
          "new_line_content": "\tif (argc==0) usage();",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 771,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(argv[a], \"--unicode\")",
          "new_text": null,
          "old_line_content": "    if (argc>=1 && strcmp(argv[a], \"--unicode\")==0) {",
          "new_line_content": "\tappend_mode = 1;",
          "content_same": false
        },
        {
          "line": 776,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(argv[a], \"--blur\")",
          "new_text": null,
          "old_line_content": "    if (argc>=1 && strcmp(argv[a], \"--blur\")==0) {",
          "new_line_content": "\tunicode_desc = 1;",
          "content_same": false
        },
        {
          "line": 778,
          "old_api": "usage",
          "new_api": null,
          "old_text": "usage()",
          "new_text": null,
          "old_line_content": "\tif (argc==0) usage();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 660,
          "old_api": "exp",
          "new_api": null,
          "old_text": "exp(A * ((mx-r)*(mx-r)+(my-r)*(my-r)))",
          "new_text": null,
          "old_line_content": "\t    m[mx+my*w] = (unsigned)(exp(A * ((mx-r)*(mx-r)+(my-r)*(my-r))) * base + .5);",
          "new_line_content": "    int mx, my;",
          "content_same": false
        },
        {
          "line": 788,
          "old_api": "usage",
          "new_api": null,
          "old_text": "usage()",
          "new_text": null,
          "old_line_content": "\tif (argc==0) usage();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 662,
          "old_api": "eprintf",
          "new_api": null,
          "old_text": "eprintf(\"%3i \", m[mx+my*w])",
          "new_text": null,
          "old_line_content": "\t    if (DEBUG) eprintf(\"%3i \", m[mx+my*w]);",
          "new_line_content": "    for (my = 0; my<w; ++my) {",
          "content_same": false
        },
        {
          "line": 667,
          "old_api": "eprintf",
          "new_api": null,
          "old_text": "eprintf(\"A= %f\\n\", A)",
          "new_text": null,
          "old_line_content": "\teprintf(\"A= %f\\n\", A);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 801,
          "old_api": "strrchr",
          "new_api": null,
          "old_text": "strrchr(encoding, '/')",
          "new_text": null,
          "old_line_content": "    encoding_name = strrchr(encoding, '/');",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 676,
          "old_api": "ceil",
          "new_api": null,
          "old_text": "ceil(radius)",
          "new_text": null,
          "old_line_content": "    int const g_r = ceil(radius);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 677,
          "old_api": "ceil",
          "new_api": null,
          "old_text": "ceil(thickness)",
          "new_text": null,
          "old_line_content": "    int const o_r = ceil(thickness);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 807,
          "old_api": "atof",
          "new_api": null,
          "old_text": "atof(argv[a])",
          "new_text": null,
          "old_line_content": "    d = atof(argv[a]);",
          "new_line_content": "    else ++encoding_name;",
          "content_same": false
        },
        {
          "line": 685,
          "old_api": "malloc",
          "new_api": null,
          "old_text": "malloc(g_w * sizeof(unsigned))",
          "new_text": null,
          "old_line_content": "    unsigned *g = (unsigned*)malloc(g_w * sizeof(unsigned));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 686,
          "old_api": "malloc",
          "new_api": null,
          "old_text": "malloc(o_w*o_w * sizeof(unsigned))",
          "new_text": null,
          "old_line_content": "    unsigned *om = (unsigned*)malloc(o_w*o_w * sizeof(unsigned));",
          "new_line_content": "    int mx, my, i;",
          "content_same": false
        },
        {
          "line": 687,
          "old_api": "ERROR",
          "new_api": null,
          "old_text": "ERROR(\"malloc failed.\")",
          "new_text": null,
          "old_line_content": "    if (g==NULL || om==NULL) ERROR(\"malloc failed.\");",
          "new_line_content": "    unsigned volume = 0;\t\t// volume under Gaussian area is exactly -pi*base/A",
          "content_same": false
        },
        {
          "line": 819,
          "old_api": "parse_args",
          "new_api": null,
          "old_text": "parse_args(argc, argv)",
          "new_text": null,
          "old_line_content": "    parse_args(argc, argv);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 693,
          "old_api": "eprintf",
          "new_api": null,
          "old_text": "eprintf(\"%3i \", g[i])",
          "new_text": null,
          "old_line_content": "\tif (DEBUG) eprintf(\"%3i \", g[i]);",
          "new_line_content": "    // gaussian curve",
          "content_same": false
        },
        {
          "line": 821,
          "old_api": "ceil",
          "new_api": null,
          "old_text": "ceil(thickness)",
          "new_text": null,
          "old_line_content": "    padding = ceil(radius) + ceil(thickness);",
          "new_line_content": "int main(int argc, char **argv) {",
          "content_same": false
        },
        {
          "line": 696,
          "old_api": "eprintf",
          "new_api": null,
          "old_text": "eprintf(\"\\n\")",
          "new_text": null,
          "old_line_content": "    if (DEBUG) eprintf(\"\\n\");",
          "new_line_content": "\tvolume+= g[i];",
          "content_same": false
        },
        {
          "line": 824,
          "old_api": "prepare_charset",
          "new_api": null,
          "old_text": "prepare_charset()",
          "new_text": null,
          "old_line_content": "    prepare_charset();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 826,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"charset: %7d us\\n\",ttime)",
          "new_text": null,
          "old_line_content": "    printf(\"charset: %7d us\\n\",ttime);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 702,
          "old_api": "sqrt",
          "new_api": null,
          "old_text": "sqrt((mx-o_r)*(mx-o_r)+(my-o_r)*(my-o_r))",
          "new_text": null,
          "old_line_content": "\t    double d = thickness + 1 - sqrt((mx-o_r)*(mx-o_r)+(my-o_r)*(my-o_r));",
          "new_line_content": "    /* outline matrix */",
          "content_same": false
        },
        {
          "line": 831,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"render:  %7d us\\n\",ttime)",
          "new_text": null,
          "old_line_content": "    printf(\"render:  %7d us\\n\",ttime);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 704,
          "old_api": "eprintf",
          "new_api": null,
          "old_text": "eprintf(\"%3i \", om[mx+my*o_w])",
          "new_text": null,
          "old_line_content": "\t    if (DEBUG) eprintf(\"%3i \", om[mx+my*o_w]);",
          "new_line_content": "\tfor (mx = 0; mx<o_w; ++mx) {",
          "content_same": false
        },
        {
          "line": 836,
          "old_api": "ERROR",
          "new_api": null,
          "old_text": "ERROR(\"malloc failed.\")",
          "new_text": null,
          "old_line_content": "    if (abuffer==NULL) ERROR(\"malloc failed.\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 838,
          "old_api": "write_bitmap",
          "new_api": null,
          "old_text": "write_bitmap(abuffer, 'a')",
          "new_text": null,
          "old_line_content": "    write_bitmap(abuffer, 'a');",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 711,
          "old_api": "GetTimer",
          "new_api": null,
          "old_text": "GetTimer()",
          "new_text": null,
          "old_line_content": "    ttime=GetTimer();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 713,
          "old_api": "outline1",
          "new_api": null,
          "old_text": "outline1(bbuffer, abuffer, width, height)",
          "new_text": null,
          "old_line_content": "      outline1(bbuffer, abuffer, width, height);\t// FAST solid 1 pixel outline",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 718,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"outline: %7d us\\n\",ttime)",
          "new_text": null,
          "old_line_content": "    printf(\"outline: %7d us\\n\",ttime);",
          "new_line_content": "    else",
          "content_same": false
        },
        {
          "line": 720,
          "old_api": "GetTimer",
          "new_api": null,
          "old_text": "GetTimer()",
          "new_text": null,
          "old_line_content": "    ttime=GetTimer();",
          "new_line_content": "    //outline(bbuffer, abuffer, width, height, gm, g_r, g_w);\t// Gaussian outline",
          "content_same": false
        },
        {
          "line": 723,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"gauss:   %7d us\\n\",ttime)",
          "new_text": null,
          "old_line_content": "    printf(\"gauss:   %7d us\\n\",ttime);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 731,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"Usage: %s [--outdir dir] [--append] [--unicode] [--blur b] [--outline o] encoding ppem font\\n\", command)",
          "new_text": null,
          "old_line_content": "    printf(\"Usage: %s [--outdir dir] [--append] [--unicode] [--blur b] [--outline o] encoding ppem font\\n\", command);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 732,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"\\n\"\n\t    \"  Program creates 3 files: font.desc, <encoding>-a.raw, <encoding>-b.raw.\\n\"\n\t    \"\\n\"\n\t    \"  --outdir         output directory to place files.\\n\"\n\t    \"  --append         append results to existing font.desc, suppress info header.\\n\"\n\t    \"  --unicode        use Unicode in font.desc. This will work with -utf8 option of mplayer.\\n\"\n\t    \"  --blur b         specify blur radius, float.\\n\"\n\t    \"  --outline o      specify outline thickness, float.\\n\"\n\t    \"  encoding         must be an 8 bit encoding, like iso-8859-2, or path to custom encoding file (see README).\\n\"\n\t    \"                   To list encodings available on your system use iconv --list.\\n\"\n\t    \"  ppem             Font size in pixels (default 24), float.\\n\"\n\t    \"  font             Font file path. Any format supported by the freetype library (*.ttf, *.pfb, ...).\\n\"\n\t    )",
          "new_text": null,
          "old_line_content": "    printf(\"\\n\"",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 745,
          "old_api": "exit",
          "new_api": null,
          "old_text": "exit(1)",
          "new_text": null,
          "old_line_content": "    exit(1);",
          "new_line_content": "\t    \"                   To list encodings available on your system use iconv --list.\\n\"",
          "content_same": false
        },
        {
          "line": 753,
          "old_api": "strrchr",
          "new_api": null,
          "old_text": "strrchr(argv[a], '/')",
          "new_text": null,
          "old_line_content": "    command = strrchr(argv[a], '/');",
          "new_line_content": "void parse_args(int argc, char **argv) {",
          "content_same": false
        },
        {
          "line": 758,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(argv[a], \"--outdir\")",
          "new_text": null,
          "old_line_content": "    if (argc>=1 && strcmp(argv[a], \"--outdir\")==0) {",
          "new_line_content": "    if (command==NULL) command = argv[a];",
          "content_same": false
        },
        {
          "line": 760,
          "old_api": "usage",
          "new_api": null,
          "old_text": "usage()",
          "new_text": null,
          "old_line_content": "\tif (argc==0) usage();",
          "new_line_content": "    ++a; --argc;",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 28,
      "total_additions": 39,
      "total_deletions": 36,
      "total_api_changes": 103
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 9,
        "api_related_lines": 103,
        "non_api_lines": 6,
        "non_api_line_numbers": [
          530,
          531,
          532,
          533,
          539,
          540
        ]
      }
    },
    "api_calls_before": 167,
    "api_calls_after": 170,
    "diff_info": {
      "added_lines": 7,
      "removed_lines": 3,
      "total_diff_lines": 29
    }
  }
}
diff --git a/upb_msg.h b/upb_msg.h
index 54ca82d55..407daa1af 100644
--- a/upb_msg.h
+++ b/upb_msg.h
@@ -209,7 +209,7 @@ INLINE size_t upb_isset_offset(uint32_t field_index) {
   return field_index / 8;
 }
 
-INLINE size_t upb_isset_mask(uint32_t field_index) {
+INLINE uint8_t upb_isset_mask(uint32_t field_index) {
   return 1 << (field_index % 8);
 }
 

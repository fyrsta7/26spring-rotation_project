{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/protobuf/modified_file/588d5aa0dbee01c6caf51add7c7ed74edbe0c794",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/protobuf/modified_file/588d5aa0dbee01c6caf51add7c7ed74edbe0c794/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/protobuf/modified_file/588d5aa0dbee01c6caf51add7c7ed74edbe0c794/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/protobuf/modified_file/588d5aa0dbee01c6caf51add7c7ed74edbe0c794/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 687,
          "old_api": "upb_MessageDef_MiniTable",
          "new_api": "Arena_Get",
          "old_text": "upb_MessageDef_MiniTable(intern->desc->msgdef)",
          "new_text": "Arena_Get(&intern->arena)",
          "old_line_content": "  const upb_MiniTable* l = upb_MessageDef_MiniTable(intern->desc->msgdef);",
          "new_line_content": "  upb_Arena* arena = Arena_Get(&intern->arena);",
          "content_same": false
        },
        {
          "line": 696,
          "old_api": "upb_Arena_Malloc",
          "new_api": "zend_throw_exception_ex",
          "old_text": "upb_Arena_Malloc(arena, data_len)",
          "new_text": "zend_throw_exception_ex(NULL, 0, \"Error occurred during parsing\")",
          "old_line_content": "  data_copy = upb_Arena_Malloc(arena, data_len);",
          "new_line_content": "    zend_throw_exception_ex(NULL, 0, \"Error occurred during parsing\");",
          "content_same": false
        },
        {
          "line": 715,
          "old_api": "upb_Arena_New",
          "new_api": "upb_Encode",
          "old_text": "upb_Arena_New()",
          "new_text": "upb_Encode(intern->msg, l, 0, tmp_arena, &data, &size)",
          "old_line_content": "  upb_Arena* tmp_arena = upb_Arena_New();",
          "new_line_content": "      upb_Encode(intern->msg, l, 0, tmp_arena, &data, &size);",
          "content_same": false
        },
        {
          "line": 720,
          "old_api": "upb_Encode",
          "new_api": "upb_Arena_Free",
          "old_text": "upb_Encode(intern->msg, l, 0, tmp_arena, &data, &size)",
          "new_text": "upb_Arena_Free(tmp_arena)",
          "old_line_content": "      upb_Encode(intern->msg, l, 0, tmp_arena, &data, &size);",
          "new_line_content": "    upb_Arena_Free(tmp_arena);",
          "content_same": false
        },
        {
          "line": 724,
          "old_api": "zend_throw_exception_ex",
          "new_api": "RETVAL_STRINGL",
          "old_text": "zend_throw_exception_ex(NULL, 0, \"Error occurred during serialization\")",
          "new_text": "RETVAL_STRINGL(data, size)",
          "old_line_content": "    zend_throw_exception_ex(NULL, 0, \"Error occurred during serialization\");",
          "new_line_content": "  RETVAL_STRINGL(data, size);",
          "content_same": false
        },
        {
          "line": 756,
          "old_api": "memcpy",
          "new_api": "zend_throw_exception_ex",
          "old_text": "memcpy(data_copy, data, data_len)",
          "new_text": "zend_throw_exception_ex(NULL, 0, \"Error occurred during parsing: %s\",\n                            upb_Status_ErrorMessage(&status))",
          "old_line_content": "  memcpy(data_copy, data, data_len);",
          "new_line_content": "    zend_throw_exception_ex(NULL, 0, \"Error occurred during parsing: %s\",",
          "content_same": false
        },
        {
          "line": 787,
          "old_api": "ZEND_NUM_ARGS",
          "new_api": "DescriptorPool_GetSymbolTable",
          "old_text": "ZEND_NUM_ARGS()",
          "new_text": "DescriptorPool_GetSymbolTable()",
          "old_line_content": "  if (zend_parse_parameters(ZEND_NUM_ARGS(), \"|b\",",
          "new_line_content": "                        DescriptorPool_GetSymbolTable(), options, buf,",
          "content_same": false
        },
        {
          "line": 798,
          "old_api": "DescriptorPool_GetSymbolTable",
          "new_api": "malloc",
          "old_text": "DescriptorPool_GetSymbolTable()",
          "new_text": "malloc(size + 1)",
          "old_line_content": "                        DescriptorPool_GetSymbolTable(), options, buf,",
          "new_line_content": "    char* buf2 = malloc(size + 1);",
          "content_same": false
        },
        {
          "line": 802,
          "old_api": "zend_throw_exception_ex",
          "new_api": "RETVAL_STRINGL",
          "old_text": "zend_throw_exception_ex(NULL, 0,\n                            \"Error occurred during JSON serialization: %s\",\n                            upb_Status_ErrorMessage(&status))",
          "new_text": "RETVAL_STRINGL(buf2, size)",
          "old_line_content": "    zend_throw_exception_ex(NULL, 0,",
          "new_line_content": "    RETVAL_STRINGL(buf2, size);",
          "content_same": false
        },
        {
          "line": 846,
          "old_api": "upb_FieldDef_MessageSubDef",
          "new_api": "upb_MessageDef_FindFieldByNumber",
          "old_text": "upb_FieldDef_MessageSubDef(f)",
          "new_text": "upb_MessageDef_FindFieldByNumber(m, 1)",
          "old_line_content": "  if (!f || !IsWrapper(upb_FieldDef_MessageSubDef(f))) {",
          "new_line_content": "    const upb_FieldDef* val_f = upb_MessageDef_FindFieldByNumber(m, 1);",
          "content_same": false
        },
        {
          "line": 847,
          "old_api": "zend_throw_exception_ex",
          "new_api": "upb_Message_GetFieldByDef",
          "old_text": "zend_throw_exception_ex(NULL, 0, \"Message %s has no field %s\",\n                            upb_MessageDef_FullName(intern->desc->msgdef),\n                            member)",
          "new_text": "upb_Message_GetFieldByDef(wrapper, val_f)",
          "old_line_content": "    zend_throw_exception_ex(NULL, 0, \"Message %s has no field %s\",",
          "new_line_content": "    upb_MessageValue msgval = upb_Message_GetFieldByDef(wrapper, val_f);",
          "content_same": false
        },
        {
          "line": 896,
          "old_api": "upb_MessageDef_FindFieldByNameWithSize",
          "new_api": "ZVAL_DEREF",
          "old_text": "upb_MessageDef_FindFieldByNameWithSize(intern->desc->msgdef, member,\n                                             size)",
          "new_text": "ZVAL_DEREF(val)",
          "old_line_content": "  f = upb_MessageDef_FindFieldByNameWithSize(intern->desc->msgdef, member,",
          "new_line_content": "    ZVAL_DEREF(val);",
          "content_same": false
        },
        {
          "line": 899,
          "old_api": "upb_FieldDef_MessageSubDef",
          "new_api": "Z_TYPE_P",
          "old_text": "upb_FieldDef_MessageSubDef(f)",
          "new_text": "Z_TYPE_P(val)",
          "old_line_content": "  if (!f || !IsWrapper(upb_FieldDef_MessageSubDef(f))) {",
          "new_line_content": "  if (Z_TYPE_P(val) == IS_NULL) {",
          "content_same": false
        },
        {
          "line": 900,
          "old_api": "zend_throw_exception_ex",
          "new_api": "upb_Message_ClearFieldByDef",
          "old_text": "zend_throw_exception_ex(NULL, 0, \"Message %s has no field %s\",\n                            upb_MessageDef_FullName(intern->desc->msgdef),\n                            member)",
          "new_text": "upb_Message_ClearFieldByDef(intern->msg, f)",
          "old_line_content": "    zend_throw_exception_ex(NULL, 0, \"Message %s has no field %s\",",
          "new_line_content": "    upb_Message_ClearFieldByDef(intern->msg, f);",
          "content_same": false
        },
        {
          "line": 906,
          "old_api": "Z_ISREF_P",
          "new_api": "TypeInfo_Get",
          "old_text": "Z_ISREF_P(val)",
          "new_text": "TypeInfo_Get(val_f)",
          "old_line_content": "  if (Z_ISREF_P(val)) {",
          "new_line_content": "    if (!Convert_PhpToUpb(val, &msgval, TypeInfo_Get(val_f), arena)) {",
          "content_same": false
        },
        {
          "line": 910,
          "old_api": "Z_TYPE_P",
          "new_api": "upb_Message_Mutable",
          "old_text": "Z_TYPE_P(val)",
          "new_text": "upb_Message_Mutable(intern->msg, f, arena)",
          "old_line_content": "  if (Z_TYPE_P(val) == IS_NULL) {",
          "new_line_content": "    wrapper = upb_Message_Mutable(intern->msg, f, arena).msg;",
          "content_same": false
        },
        {
          "line": 911,
          "old_api": "upb_Message_ClearFieldByDef",
          "new_api": "upb_Message_SetFieldByDef",
          "old_text": "upb_Message_ClearFieldByDef(intern->msg, f)",
          "new_text": "upb_Message_SetFieldByDef(wrapper, val_f, msgval, arena)",
          "old_line_content": "    upb_Message_ClearFieldByDef(intern->msg, f);",
          "new_line_content": "    upb_Message_SetFieldByDef(wrapper, val_f, msgval, arena);",
          "content_same": false
        },
        {
          "line": 935,
          "old_api": "getThis",
          "new_api": "upb_MessageDef_FindOneofByNameWithSize",
          "old_text": "getThis()",
          "new_text": "upb_MessageDef_FindOneofByNameWithSize(intern->desc->msgdef, name, len)",
          "old_line_content": "  Message* intern = (Message*)Z_OBJ_P(getThis());",
          "new_line_content": "      upb_MessageDef_FindOneofByNameWithSize(intern->desc->msgdef, name, len);",
          "content_same": false
        },
        {
          "line": 973,
          "old_api": "getThis",
          "new_api": "php_error_docref",
          "old_text": "getThis()",
          "new_text": "php_error_docref(NULL, E_USER_ERROR,\n                     \"Internal error, no such oneof field %d\\n\",\n                     (int)field_num)",
          "old_line_content": "  Message* intern = (Message*)Z_OBJ_P(getThis());",
          "new_line_content": "    php_error_docref(NULL, E_USER_ERROR,",
          "content_same": false
        },
        {
          "line": 1006,
          "old_api": "getThis",
          "new_api": "upb_FieldDef_RealContainingOneof",
          "old_text": "getThis()",
          "new_text": "upb_FieldDef_RealContainingOneof(f)",
          "old_line_content": "  Message* intern = (Message*)Z_OBJ_P(getThis());",
          "new_line_content": "  if (!f || !upb_FieldDef_RealContainingOneof(f)) {",
          "content_same": false
        },
        {
          "line": 1018,
          "old_api": "php_error_docref",
          "new_api": "upb_Message_GetFieldByDef",
          "old_text": "php_error_docref(NULL, E_USER_ERROR,\n                     \"Internal error, no such oneof field %d\\n\",\n                     (int)field_num)",
          "new_text": "upb_Message_GetFieldByDef(intern->msg, f)",
          "old_line_content": "    php_error_docref(NULL, E_USER_ERROR,",
          "new_line_content": "    upb_MessageValue msgval = upb_Message_GetFieldByDef(intern->msg, f);",
          "content_same": false
        },
        {
          "line": 1060,
          "old_api": "Arena_Get",
          "new_api": "Z_TYPE_P",
          "old_text": "Arena_Get(&intern->arena)",
          "new_text": "Z_TYPE_P(val)",
          "old_line_content": "  upb_Arena* arena = Arena_Get(&intern->arena);",
          "new_line_content": "  if (upb_FieldDef_IsSubMessage(f) && Z_TYPE_P(val) == IS_NULL) {",
          "content_same": false
        },
        {
          "line": 1071,
          "old_api": "Z_TYPE_P",
          "new_api": "ZEND_BEGIN_ARG_INFO_EX",
          "old_text": "Z_TYPE_P(val)",
          "new_text": "ZEND_BEGIN_ARG_INFO_EX(arginfo_construct, 0, 0, 0)",
          "old_line_content": "  if (upb_FieldDef_IsSubMessage(f) && Z_TYPE_P(val) == IS_NULL) {",
          "new_line_content": "ZEND_BEGIN_ARG_INFO_EX(arginfo_construct, 0, 0, 0)",
          "content_same": false
        },
        {
          "line": 1072,
          "old_api": "upb_Message_ClearFieldByDef",
          "new_api": "ZEND_ARG_INFO",
          "old_text": "upb_Message_ClearFieldByDef(intern->msg, f)",
          "new_text": "ZEND_ARG_INFO(0, data)",
          "old_line_content": "    upb_Message_ClearFieldByDef(intern->msg, f);",
          "new_line_content": "  ZEND_ARG_INFO(0, data)",
          "content_same": false
        },
        {
          "line": 1082,
          "old_api": "ZEND_BEGIN_ARG_INFO_EX",
          "new_api": "ZEND_END_ARG_INFO",
          "old_text": "ZEND_BEGIN_ARG_INFO_EX(arginfo_construct, 0, 0, 0)",
          "new_text": "ZEND_END_ARG_INFO()",
          "old_line_content": "ZEND_BEGIN_ARG_INFO_EX(arginfo_construct, 0, 0, 0)",
          "new_line_content": "ZEND_END_ARG_INFO()",
          "content_same": false
        },
        {
          "line": 1084,
          "old_api": "ZEND_END_ARG_INFO",
          "new_api": "ZEND_BEGIN_ARG_INFO_EX",
          "old_text": "ZEND_END_ARG_INFO()",
          "new_text": "ZEND_BEGIN_ARG_INFO_EX(arginfo_read, 0, 0, 1)",
          "old_line_content": "ZEND_END_ARG_INFO()",
          "new_line_content": "ZEND_BEGIN_ARG_INFO_EX(arginfo_read, 0, 0, 1)",
          "content_same": false
        },
        {
          "line": 1086,
          "old_api": "ZEND_BEGIN_ARG_INFO_EX",
          "new_api": "ZEND_END_ARG_INFO",
          "old_text": "ZEND_BEGIN_ARG_INFO_EX(arginfo_mergeFrom, 0, 0, 1)",
          "new_text": "ZEND_END_ARG_INFO()",
          "old_line_content": "ZEND_BEGIN_ARG_INFO_EX(arginfo_mergeFrom, 0, 0, 1)",
          "new_line_content": "ZEND_END_ARG_INFO()",
          "content_same": false
        },
        {
          "line": 1088,
          "old_api": "ZEND_END_ARG_INFO",
          "new_api": "ZEND_BEGIN_ARG_INFO_EX",
          "old_text": "ZEND_END_ARG_INFO()",
          "new_text": "ZEND_BEGIN_ARG_INFO_EX(arginfo_write, 0, 0, 2)",
          "old_line_content": "ZEND_END_ARG_INFO()",
          "new_line_content": "ZEND_BEGIN_ARG_INFO_EX(arginfo_write, 0, 0, 2)",
          "content_same": false
        },
        {
          "line": 1090,
          "old_api": "ZEND_BEGIN_ARG_INFO_EX",
          "new_api": "ZEND_ARG_INFO",
          "old_text": "ZEND_BEGIN_ARG_INFO_EX(arginfo_mergeFromWithArg, 0, 0, 1)",
          "new_text": "ZEND_ARG_INFO(0, value)",
          "old_line_content": "ZEND_BEGIN_ARG_INFO_EX(arginfo_mergeFromWithArg, 0, 0, 1)",
          "new_line_content": "  ZEND_ARG_INFO(0, value)",
          "content_same": false
        },
        {
          "line": 1091,
          "old_api": "ZEND_ARG_INFO",
          "new_api": "ZEND_END_ARG_INFO",
          "old_text": "ZEND_ARG_INFO(0, data)",
          "new_text": "ZEND_END_ARG_INFO()",
          "old_line_content": "  ZEND_ARG_INFO(0, data)",
          "new_line_content": "ZEND_END_ARG_INFO()",
          "content_same": false
        },
        {
          "line": 1139,
          "old_api": "PBPHP_ASSERT",
          "new_api": "strlen",
          "old_text": "PBPHP_ASSERT(f)",
          "new_text": "strlen(TYPE_URL_PREFIX)",
          "old_line_content": "  PBPHP_ASSERT(f);",
          "new_line_content": "  size_t size = strlen(TYPE_URL_PREFIX);",
          "content_same": false
        },
        {
          "line": 1140,
          "old_api": "Arena_Get",
          "new_api": "memcmp",
          "old_text": "Arena_Get(&intern->arena)",
          "new_text": "memcmp(TYPE_URL_PREFIX, str->data, size)",
          "old_line_content": "  upb_Message_SetFieldByDef(intern->msg, f, val, Arena_Get(&intern->arena));",
          "new_line_content": "  if (str->size < size || memcmp(TYPE_URL_PREFIX, str->data, size) != 0) {",
          "content_same": false
        },
        {
          "line": 1150,
          "old_api": "strlen",
          "new_api": "memcmp",
          "old_text": "strlen(TYPE_URL_PREFIX)",
          "new_text": "memcmp(view.data, str, size)",
          "old_line_content": "  size_t size = strlen(TYPE_URL_PREFIX);",
          "new_line_content": "  return view.size == size && memcmp(view.data, str, size) == 0;",
          "content_same": false
        },
        {
          "line": 1180,
          "old_api": "upb_DefPool_FindMessageByNameWithSize",
          "new_api": "PBPHP_ASSERT",
          "old_text": "upb_DefPool_FindMessageByNameWithSize(symtab, type_url.data,\n                                            type_url.size)",
          "new_text": "PBPHP_ASSERT(desc->class_entry->create_object == Message_create)",
          "old_line_content": "  m = upb_DefPool_FindMessageByNameWithSize(symtab, type_url.data,",
          "new_line_content": "  PBPHP_ASSERT(desc->class_entry->create_object == Message_create);",
          "content_same": false
        },
        {
          "line": 1184,
          "old_api": "zend_throw_exception",
          "new_api": "ZVAL_OBJ",
          "old_text": "zend_throw_exception(\n        NULL, \"Specified message in any hasn't been added to descriptor pool\",\n        0)",
          "new_text": "ZVAL_OBJ(&ret, obj)",
          "old_line_content": "    zend_throw_exception(",
          "new_line_content": "  ZVAL_OBJ(&ret, obj);",
          "content_same": false
        },
        {
          "line": 1190,
          "old_api": "Descriptor_GetFromMessageDef",
          "new_api": "zend_throw_exception_ex",
          "old_text": "Descriptor_GetFromMessageDef(m)",
          "new_text": "zend_throw_exception_ex(NULL, 0, \"Error occurred during parsing\")",
          "old_line_content": "  desc = Descriptor_GetFromMessageDef(m);",
          "new_line_content": "    zend_throw_exception_ex(NULL, 0, \"Error occurred during parsing\");",
          "content_same": false
        },
        {
          "line": 1191,
          "old_api": "PBPHP_ASSERT",
          "new_api": "zval_dtor",
          "old_text": "PBPHP_ASSERT(desc->class_entry->create_object == Message_create)",
          "new_text": "zval_dtor(&ret)",
          "old_line_content": "  PBPHP_ASSERT(desc->class_entry->create_object == Message_create);",
          "new_line_content": "    zval_dtor(&ret);",
          "content_same": false
        },
        {
          "line": 1198,
          "old_api": "upb_Decode",
          "new_api": "RETURN_COPY_VALUE",
          "old_text": "upb_Decode(value.data, value.size, msg->msg,\n                 upb_MessageDef_MiniTable(desc->msgdef), NULL, 0,\n                 Arena_Get(&msg->arena))",
          "new_text": "RETURN_COPY_VALUE(&ret)",
          "old_line_content": "  if (upb_Decode(value.data, value.size, msg->msg,",
          "new_line_content": "  RETURN_COPY_VALUE(&ret);",
          "content_same": false
        },
        {
          "line": 1202,
          "old_api": "zval_dtor",
          "new_api": "getThis",
          "old_text": "zval_dtor(&ret)",
          "new_text": "getThis()",
          "old_line_content": "    zval_dtor(&ret);",
          "new_line_content": "  Message* intern = (Message*)Z_OBJ_P(getThis());",
          "content_same": false
        },
        {
          "line": 1227,
          "old_api": "zend_error",
          "new_api": "Message_checkEncodeStatus",
          "old_text": "zend_error(E_USER_ERROR, \"Given value is not an instance of Message.\")",
          "new_text": "Message_checkEncodeStatus(status)",
          "old_line_content": "    zend_error(E_USER_ERROR, \"Given value is not an instance of Message.\");",
          "new_line_content": "  if (!Message_checkEncodeStatus(status)) return;",
          "content_same": false
        },
        {
          "line": 1236,
          "old_api": "upb_MessageDef_MiniTable",
          "new_api": "strlen",
          "old_text": "upb_MessageDef_MiniTable(msg->desc->msgdef)",
          "new_text": "strlen(full_name)",
          "old_line_content": "      upb_Encode(msg->msg, upb_MessageDef_MiniTable(msg->desc->msgdef), 0,",
          "new_line_content": "  memcpy(buf + strlen(TYPE_URL_PREFIX), full_name, strlen(full_name));",
          "content_same": false
        },
        {
          "line": 1238,
          "old_api": "Message_checkEncodeStatus",
          "new_api": "StringVal",
          "old_text": "Message_checkEncodeStatus(status)",
          "new_text": "StringVal(type_url)",
          "old_line_content": "  if (!Message_checkEncodeStatus(status)) return;",
          "new_line_content": "  Message_setval(intern, \"type_url\", StringVal(type_url));",
          "content_same": false
        },
        {
          "line": 1243,
          "old_api": "upb_MessageDef_FullName",
          "new_api": "Message_getval",
          "old_text": "upb_MessageDef_FullName(msg->desc->msgdef)",
          "new_text": "Message_getval(intern, \"type_url\")",
          "old_line_content": "  full_name = upb_MessageDef_FullName(msg->desc->msgdef);",
          "new_line_content": "  upb_StringView type_url = Message_getval(intern, \"type_url\").str_val;",
          "content_same": false
        },
        {
          "line": 1247,
          "old_api": "strlen",
          "new_api": "ZEND_NUM_ARGS",
          "old_text": "strlen(full_name)",
          "new_text": "ZEND_NUM_ARGS()",
          "old_line_content": "  memcpy(buf + strlen(TYPE_URL_PREFIX), full_name, strlen(full_name));",
          "new_line_content": "  if (zend_parse_parameters(ZEND_NUM_ARGS(), \"C\", &klass) == FAILURE) {",
          "content_same": false
        },
        {
          "line": 1254,
          "old_api": "Message_getval",
          "new_api": "RETURN_BOOL",
          "old_text": "Message_getval(intern, \"type_url\")",
          "new_text": "RETURN_BOOL(false)",
          "old_line_content": "  upb_StringView type_url = Message_getval(intern, \"type_url\").str_val;",
          "new_line_content": "    RETURN_BOOL(false);",
          "content_same": false
        },
        {
          "line": 1258,
          "old_api": "ZEND_NUM_ARGS",
          "new_api": "upb_MessageDef_FullName",
          "old_text": "ZEND_NUM_ARGS()",
          "new_text": "upb_MessageDef_FullName(m)",
          "old_line_content": "  if (zend_parse_parameters(ZEND_NUM_ARGS(), \"C\", &klass) == FAILURE) {",
          "new_line_content": "              StrViewEq(type_url, upb_MessageDef_FullName(m)));",
          "content_same": false
        },
        {
          "line": 1262,
          "old_api": "NameMap_GetMessage",
          "new_api": "getThis",
          "old_text": "NameMap_GetMessage(klass)",
          "new_text": "getThis()",
          "old_line_content": "  m = NameMap_GetMessage(klass);",
          "new_line_content": "  Message* intern = (Message*)Z_OBJ_P(getThis());",
          "content_same": false
        },
        {
          "line": 1268,
          "old_api": "TryStripUrlPrefix",
          "new_api": "zend_string_release",
          "old_text": "TryStripUrlPrefix(&type_url)",
          "new_text": "zend_string_release(classname_str)",
          "old_line_content": "  RETURN_BOOL(TryStripUrlPrefix(&type_url) &&",
          "new_line_content": "  zend_string_release(classname_str);",
          "content_same": false
        },
        {
          "line": 1277,
          "old_api": "strlen",
          "new_api": "zend_error",
          "old_text": "strlen(classname)",
          "new_text": "zend_error(E_USER_ERROR, \"Expect DatetimeInterface.\")",
          "old_line_content": "      zend_string_init(classname, strlen(classname), 0);",
          "new_line_content": "    zend_error(E_USER_ERROR, \"Expect DatetimeInterface.\");",
          "content_same": false
        },
        {
          "line": 1286,
          "old_api": "ZEND_NUM_ARGS",
          "new_api": "ZVAL_STRING",
          "old_text": "ZEND_NUM_ARGS()",
          "new_text": "ZVAL_STRING(&function_name, \"date_timestamp_get\")",
          "old_line_content": "  if (zend_parse_parameters(ZEND_NUM_ARGS(), \"O\", &datetime,",
          "new_line_content": "    ZVAL_STRING(&function_name, \"date_timestamp_get\");",
          "content_same": false
        },
        {
          "line": 1288,
          "old_api": "zend_error",
          "new_api": "EG",
          "old_text": "zend_error(E_USER_ERROR, \"Expect DatetimeInterface.\")",
          "new_text": "EG(function_table)",
          "old_line_content": "    zend_error(E_USER_ERROR, \"Expect DatetimeInterface.\");",
          "new_line_content": "    if (call_user_function(EG(function_table), NULL, &function_name, &retval, 1,",
          "content_same": false
        },
        {
          "line": 1297,
          "old_api": "ZVAL_STRING",
          "new_api": "zval_dtor",
          "old_text": "ZVAL_STRING(&function_name, \"date_timestamp_get\")",
          "new_text": "zval_dtor(&function_name)",
          "old_line_content": "    ZVAL_STRING(&function_name, \"date_timestamp_get\");",
          "new_line_content": "    zval_dtor(&function_name);",
          "content_same": false
        },
        {
          "line": 1307,
          "old_api": "zval_dtor",
          "new_api": "ZVAL_STRING",
          "old_text": "zval_dtor(&retval)",
          "new_text": "ZVAL_STRING(&format_string, \"u\")",
          "old_line_content": "    zval_dtor(&retval);",
          "new_line_content": "    ZVAL_STRING(&format_string, \"u\");",
          "content_same": false
        },
        {
          "line": 1317,
          "old_api": "ZVAL_STRING",
          "new_api": "TypeInfo_FromType",
          "old_text": "ZVAL_STRING(&function_name, \"date_format\")",
          "new_text": "TypeInfo_FromType(kUpb_CType_Int32)",
          "old_line_content": "    ZVAL_STRING(&function_name, \"date_format\");",
          "new_line_content": "                          TypeInfo_FromType(kUpb_CType_Int32), NULL)) {",
          "content_same": false
        },
        {
          "line": 1318,
          "old_api": "ZVAL_STRING",
          "new_api": "zend_error",
          "old_text": "ZVAL_STRING(&format_string, \"u\")",
          "new_text": "zend_error(E_ERROR, \"Cannot format DateTime.\")",
          "old_line_content": "    ZVAL_STRING(&format_string, \"u\");",
          "new_line_content": "      zend_error(E_ERROR, \"Cannot format DateTime.\");",
          "content_same": false
        },
        {
          "line": 1325,
          "old_api": "EG",
          "new_api": "zval_dtor",
          "old_text": "EG(function_table)",
          "new_text": "zval_dtor(&function_name)",
          "old_line_content": "    if (call_user_function(EG(function_table), NULL, &function_name, &retval, 2,",
          "new_line_content": "    zval_dtor(&function_name);",
          "content_same": false
        },
        {
          "line": 1329,
          "old_api": "zend_error",
          "new_api": "Message_setval",
          "old_text": "zend_error(E_ERROR, \"Cannot format DateTime.\")",
          "new_text": "Message_setval(intern, \"seconds\", timestamp_seconds)",
          "old_line_content": "      zend_error(E_ERROR, \"Cannot format DateTime.\");",
          "new_line_content": "  Message_setval(intern, \"seconds\", timestamp_seconds);",
          "content_same": false
        },
        {
          "line": 1336,
          "old_api": "zval_dtor",
          "new_api": "getThis",
          "old_text": "zval_dtor(&function_name)",
          "new_text": "getThis()",
          "old_line_content": "    zval_dtor(&function_name);",
          "new_line_content": "  Message* intern = (Message*)Z_OBJ_P(getThis());",
          "content_same": false
        },
        {
          "line": 1337,
          "old_api": "zval_dtor",
          "new_api": "Message_getval",
          "old_text": "zval_dtor(&format_string)",
          "new_text": "Message_getval(intern, \"seconds\")",
          "old_line_content": "    zval_dtor(&format_string);",
          "new_line_content": "  upb_MessageValue seconds = Message_getval(intern, \"seconds\");",
          "content_same": false
        },
        {
          "line": 1353,
          "old_api": "snprintf",
          "new_api": "ZVAL_STRING",
          "old_text": "snprintf(formatted_time, sizeof(formatted_time), \"%\" PRId64 \".%06\" PRId32,\n           seconds.int64_val, nanos.int32_val / 1000)",
          "new_text": "ZVAL_STRING(&formatted_time_php, formatted_time)",
          "old_line_content": "  snprintf(formatted_time, sizeof(formatted_time), \"%\" PRId64 \".%06\" PRId32,",
          "new_line_content": "  ZVAL_STRING(&formatted_time_php, formatted_time);",
          "content_same": false
        },
        {
          "line": 1362,
          "old_api": "ZVAL_STRING",
          "new_api": "zend_error",
          "old_text": "ZVAL_STRING(&function_name, \"date_create_from_format\")",
          "new_text": "zend_error(E_ERROR, \"Cannot create DateTime.\")",
          "old_line_content": "  ZVAL_STRING(&function_name, \"date_create_from_format\");",
          "new_line_content": "    zend_error(E_ERROR, \"Cannot create DateTime.\");",
          "content_same": false
        },
        {
          "line": 1401,
          "old_api": "memcpy",
          "new_api": "WellKnownTypes_ModuleInit",
          "old_text": "memcpy(h, &std_object_handlers, sizeof(zend_object_handlers))",
          "new_text": "WellKnownTypes_ModuleInit()",
          "old_line_content": "  memcpy(h, &std_object_handlers, sizeof(zend_object_handlers));",
          "new_line_content": "  WellKnownTypes_ModuleInit(); /* From wkt.inc. */",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 1046,
          "old_api": null,
          "new_api": "getThis",
          "old_text": null,
          "new_text": "getThis()",
          "old_line_content": " *",
          "new_line_content": "  Message* intern = (Message*)Z_OBJ_P(getThis());",
          "content_same": false
        },
        {
          "line": 1049,
          "old_api": null,
          "new_api": "Arena_Get",
          "old_text": null,
          "new_text": "Arena_Get(&intern->arena)",
          "old_line_content": " *",
          "new_line_content": "  upb_Arena* arena = Arena_Get(&intern->arena);",
          "content_same": false
        },
        {
          "line": 1053,
          "old_api": null,
          "new_api": "ZEND_NUM_ARGS",
          "old_text": null,
          "new_text": "ZEND_NUM_ARGS()",
          "old_line_content": " * @param integer The field number we are setting.",
          "new_line_content": "  if (zend_parse_parameters(ZEND_NUM_ARGS(), \"lz\", &field_num, &val) ==",
          "content_same": false
        },
        {
          "line": 1058,
          "old_api": null,
          "new_api": "upb_MessageDef_FindFieldByNumber",
          "old_text": null,
          "new_text": "upb_MessageDef_FindFieldByNumber(intern->desc->msgdef, field_num)",
          "old_line_content": "  zend_long field_num;",
          "new_line_content": "  f = upb_MessageDef_FindFieldByNumber(intern->desc->msgdef, field_num);",
          "content_same": false
        },
        {
          "line": 1061,
          "old_api": null,
          "new_api": "upb_Message_ClearFieldByDef",
          "old_text": null,
          "new_text": "upb_Message_ClearFieldByDef(intern->msg, f)",
          "old_line_content": "  upb_MessageValue msgval;",
          "new_line_content": "    upb_Message_ClearFieldByDef(intern->msg, f);",
          "content_same": false
        },
        {
          "line": 1063,
          "old_api": null,
          "new_api": "TypeInfo_Get",
          "old_text": null,
          "new_text": "TypeInfo_Get(f)",
          "old_line_content": "",
          "new_line_content": "  } else if (!Convert_PhpToUpb(val, &msgval, TypeInfo_Get(f), arena)) {",
          "content_same": false
        },
        {
          "line": 1067,
          "old_api": null,
          "new_api": "upb_Message_SetFieldByDef",
          "old_text": null,
          "new_text": "upb_Message_SetFieldByDef(intern->msg, f, msgval, arena)",
          "old_line_content": "  }",
          "new_line_content": "  upb_Message_SetFieldByDef(intern->msg, f, msgval, arena);",
          "content_same": false
        },
        {
          "line": 1073,
          "old_api": null,
          "new_api": "ZEND_END_ARG_INFO",
          "old_text": null,
          "new_text": "ZEND_END_ARG_INFO()",
          "old_line_content": "    return;",
          "new_line_content": "ZEND_END_ARG_INFO()",
          "content_same": false
        },
        {
          "line": 1075,
          "old_api": null,
          "new_api": "ZEND_BEGIN_ARG_INFO_EX",
          "old_text": null,
          "new_text": "ZEND_BEGIN_ARG_INFO_EX(arginfo_mergeFrom, 0, 0, 1)",
          "old_line_content": "    return;",
          "new_line_content": "ZEND_BEGIN_ARG_INFO_EX(arginfo_mergeFrom, 0, 0, 1)",
          "content_same": false
        },
        {
          "line": 1076,
          "old_api": null,
          "new_api": "ZEND_ARG_INFO",
          "old_text": null,
          "new_text": "ZEND_ARG_INFO(0, data)",
          "old_line_content": "  }",
          "new_line_content": "  ZEND_ARG_INFO(0, data)",
          "content_same": false
        },
        {
          "line": 1077,
          "old_api": null,
          "new_api": "ZEND_END_ARG_INFO",
          "old_text": null,
          "new_text": "ZEND_END_ARG_INFO()",
          "old_line_content": "",
          "new_line_content": "ZEND_END_ARG_INFO()",
          "content_same": false
        },
        {
          "line": 1079,
          "old_api": null,
          "new_api": "ZEND_BEGIN_ARG_INFO_EX",
          "old_text": null,
          "new_text": "ZEND_BEGIN_ARG_INFO_EX(arginfo_mergeFromWithArg, 0, 0, 1)",
          "old_line_content": "}",
          "new_line_content": "ZEND_BEGIN_ARG_INFO_EX(arginfo_mergeFromWithArg, 0, 0, 1)",
          "content_same": false
        },
        {
          "line": 1080,
          "old_api": null,
          "new_api": "ZEND_ARG_INFO",
          "old_text": null,
          "new_text": "ZEND_ARG_INFO(0, data)",
          "old_line_content": "",
          "new_line_content": "  ZEND_ARG_INFO(0, data)",
          "content_same": false
        },
        {
          "line": 1081,
          "old_api": null,
          "new_api": "ZEND_ARG_INFO",
          "old_text": null,
          "new_text": "ZEND_ARG_INFO(0, arg)",
          "old_line_content": "// clang-format off",
          "new_line_content": "  ZEND_ARG_INFO(0, arg)",
          "content_same": false
        },
        {
          "line": 1085,
          "old_api": null,
          "new_api": "ZEND_ARG_INFO",
          "old_text": null,
          "new_text": "ZEND_ARG_INFO(0, field)",
          "old_line_content": "",
          "new_line_content": "  ZEND_ARG_INFO(0, field)",
          "content_same": false
        },
        {
          "line": 1089,
          "old_api": null,
          "new_api": "ZEND_ARG_INFO",
          "old_text": null,
          "new_text": "ZEND_ARG_INFO(0, field)",
          "old_line_content": "",
          "new_line_content": "  ZEND_ARG_INFO(0, field)",
          "content_same": false
        },
        {
          "line": 1119,
          "old_api": null,
          "new_api": "upb_MessageDef_FindFieldByName",
          "old_text": null,
          "new_text": "upb_MessageDef_FindFieldByName(intern->desc->msgdef, field_name)",
          "old_line_content": "  ZEND_FE_END",
          "new_line_content": "      upb_MessageDef_FindFieldByName(intern->desc->msgdef, field_name);",
          "content_same": false
        },
        {
          "line": 1120,
          "old_api": null,
          "new_api": "PBPHP_ASSERT",
          "old_text": null,
          "new_text": "PBPHP_ASSERT(f)",
          "old_line_content": "};",
          "new_line_content": "  PBPHP_ASSERT(f);",
          "content_same": false
        },
        {
          "line": 1121,
          "old_api": null,
          "new_api": "upb_Message_GetFieldByDef",
          "old_text": null,
          "new_text": "upb_Message_GetFieldByDef(intern->msg, f)",
          "old_line_content": "// clang-format on",
          "new_line_content": "  return upb_Message_GetFieldByDef(intern->msg, f);",
          "content_same": false
        },
        {
          "line": 1127,
          "old_api": null,
          "new_api": "upb_MessageDef_FindFieldByName",
          "old_text": null,
          "new_text": "upb_MessageDef_FindFieldByName(intern->desc->msgdef, field_name)",
          "old_line_content": "static upb_MessageValue Message_getval(Message* intern,",
          "new_line_content": "      upb_MessageDef_FindFieldByName(intern->desc->msgdef, field_name);",
          "content_same": false
        },
        {
          "line": 1128,
          "old_api": null,
          "new_api": "PBPHP_ASSERT",
          "old_text": null,
          "new_text": "PBPHP_ASSERT(f)",
          "old_line_content": "                                       const char* field_name) {",
          "new_line_content": "  PBPHP_ASSERT(f);",
          "content_same": false
        },
        {
          "line": 1129,
          "old_api": null,
          "new_api": "Arena_Get",
          "old_text": null,
          "new_text": "Arena_Get(&intern->arena)",
          "old_line_content": "  const upb_FieldDef* f =",
          "new_line_content": "  upb_Message_SetFieldByDef(intern->msg, f, val, Arena_Get(&intern->arena));",
          "content_same": false
        },
        {
          "line": 1149,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(str)",
          "old_line_content": "static bool TryStripUrlPrefix(upb_StringView* str) {",
          "new_line_content": "  size_t size = strlen(str);",
          "content_same": false
        },
        {
          "line": 1154,
          "old_api": null,
          "new_api": "getThis",
          "old_text": null,
          "new_text": "getThis()",
          "old_line_content": "  str->data += size;",
          "new_line_content": "  Message* intern = (Message*)Z_OBJ_P(getThis());",
          "content_same": false
        },
        {
          "line": 1155,
          "old_api": null,
          "new_api": "Message_getval",
          "old_text": null,
          "new_text": "Message_getval(intern, \"type_url\")",
          "old_line_content": "  str->size -= size;",
          "new_line_content": "  upb_StringView type_url = Message_getval(intern, \"type_url\").str_val;",
          "content_same": false
        },
        {
          "line": 1156,
          "old_api": null,
          "new_api": "Message_getval",
          "old_text": null,
          "new_text": "Message_getval(intern, \"value\")",
          "old_line_content": "  return true;",
          "new_line_content": "  upb_StringView value = Message_getval(intern, \"value\").str_val;",
          "content_same": false
        },
        {
          "line": 1157,
          "old_api": null,
          "new_api": "DescriptorPool_GetSymbolTable",
          "old_text": null,
          "new_text": "DescriptorPool_GetSymbolTable()",
          "old_line_content": "}",
          "new_line_content": "  upb_DefPool* symtab = DescriptorPool_GetSymbolTable();",
          "content_same": false
        },
        {
          "line": 1163,
          "old_api": null,
          "new_api": "TryStripUrlPrefix",
          "old_text": null,
          "new_text": "TryStripUrlPrefix(&type_url)",
          "old_line_content": "",
          "new_line_content": "  if (!TryStripUrlPrefix(&type_url)) {",
          "content_same": false
        },
        {
          "line": 1164,
          "old_api": null,
          "new_api": "zend_throw_exception",
          "old_text": null,
          "new_text": "zend_throw_exception(\n        NULL, \"Type url needs to be type.googleapis.com/fully-qualified\", 0)",
          "old_line_content": "PHP_METHOD(google_protobuf_Any, unpack) {",
          "new_line_content": "    zend_throw_exception(",
          "content_same": false
        },
        {
          "line": 1169,
          "old_api": null,
          "new_api": "upb_DefPool_FindMessageByNameWithSize",
          "old_text": null,
          "new_text": "upb_DefPool_FindMessageByNameWithSize(symtab, type_url.data,\n                                            type_url.size)",
          "old_line_content": "  const upb_MessageDef* m;",
          "new_line_content": "  m = upb_DefPool_FindMessageByNameWithSize(symtab, type_url.data,",
          "content_same": false
        },
        {
          "line": 1173,
          "old_api": null,
          "new_api": "zend_throw_exception",
          "old_text": null,
          "new_text": "zend_throw_exception(\n        NULL, \"Specified message in any hasn't been added to descriptor pool\",\n        0)",
          "old_line_content": "  // Ensure that type_url has TYPE_URL_PREFIX as a prefix.",
          "new_line_content": "    zend_throw_exception(",
          "content_same": false
        },
        {
          "line": 1179,
          "old_api": null,
          "new_api": "Descriptor_GetFromMessageDef",
          "old_text": null,
          "new_text": "Descriptor_GetFromMessageDef(m)",
          "old_line_content": "",
          "new_line_content": "  desc = Descriptor_GetFromMessageDef(m);",
          "content_same": false
        },
        {
          "line": 1181,
          "old_api": null,
          "new_api": "Message_create",
          "old_text": null,
          "new_text": "Message_create(desc->class_entry)",
          "old_line_content": "                                            type_url.size);",
          "new_line_content": "  zend_object* obj = Message_create(desc->class_entry);",
          "content_same": false
        },
        {
          "line": 1183,
          "old_api": null,
          "new_api": "Message_Initialize",
          "old_text": null,
          "new_text": "Message_Initialize(msg, desc)",
          "old_line_content": "  if (m == NULL) {",
          "new_line_content": "  Message_Initialize(msg, desc);",
          "content_same": false
        },
        {
          "line": 1187,
          "old_api": null,
          "new_api": "upb_Decode",
          "old_text": null,
          "new_text": "upb_Decode(value.data, value.size, msg->msg,\n                 upb_MessageDef_MiniTable(desc->msgdef), NULL, 0,\n                 Arena_Get(&msg->arena))",
          "old_line_content": "    return;",
          "new_line_content": "  if (upb_Decode(value.data, value.size, msg->msg,",
          "content_same": false
        },
        {
          "line": 1188,
          "old_api": null,
          "new_api": "upb_MessageDef_MiniTable",
          "old_text": null,
          "new_text": "upb_MessageDef_MiniTable(desc->msgdef)",
          "old_line_content": "  }",
          "new_line_content": "                 upb_MessageDef_MiniTable(desc->msgdef), NULL, 0,",
          "content_same": false
        },
        {
          "line": 1189,
          "old_api": null,
          "new_api": "Arena_Get",
          "old_text": null,
          "new_text": "Arena_Get(&msg->arena)",
          "old_line_content": "",
          "new_line_content": "                 Arena_Get(&msg->arena)) != kUpb_DecodeStatus_Ok) {",
          "content_same": false
        },
        {
          "line": 1196,
          "old_api": null,
          "new_api": "Arena_Get",
          "old_text": null,
          "new_text": "Arena_Get(&msg->arena)",
          "old_line_content": "",
          "new_line_content": "  upb_Arena_Fuse(Arena_Get(&intern->arena), Arena_Get(&msg->arena));",
          "content_same": false
        },
        {
          "line": 686,
          "old_api": null,
          "new_api": "upb_MessageDef_MiniTable",
          "old_text": null,
          "new_text": "upb_MessageDef_MiniTable(intern->desc->msgdef)",
          "old_line_content": "  zend_long data_len;",
          "new_line_content": "  const upb_MiniTable* l = upb_MessageDef_MiniTable(intern->desc->msgdef);",
          "content_same": false
        },
        {
          "line": 689,
          "old_api": null,
          "new_api": "ZEND_NUM_ARGS",
          "old_text": null,
          "new_text": "ZEND_NUM_ARGS()",
          "old_line_content": "",
          "new_line_content": "  if (zend_parse_parameters(ZEND_NUM_ARGS(), \"s\", &data, &data_len) ==",
          "content_same": false
        },
        {
          "line": 1203,
          "old_api": null,
          "new_api": "Arena_Get",
          "old_text": null,
          "new_text": "Arena_Get(&intern->arena)",
          "old_line_content": "    return;",
          "new_line_content": "  upb_Arena* arena = Arena_Get(&intern->arena);",
          "content_same": false
        },
        {
          "line": 694,
          "old_api": null,
          "new_api": "upb_Decode",
          "old_text": null,
          "new_text": "upb_Decode(data, data_len, intern->msg, l, NULL, 0, arena)",
          "old_line_content": "",
          "new_line_content": "  if (upb_Decode(data, data_len, intern->msg, l, NULL, 0, arena) !=",
          "content_same": false
        },
        {
          "line": 1211,
          "old_api": null,
          "new_api": "ZEND_NUM_ARGS",
          "old_text": null,
          "new_text": "ZEND_NUM_ARGS()",
          "old_line_content": "",
          "new_line_content": "  if (zend_parse_parameters(ZEND_NUM_ARGS(), \"o\", &val) == FAILURE) {",
          "content_same": false
        },
        {
          "line": 1215,
          "old_api": null,
          "new_api": "Z_OBJCE_P",
          "old_text": null,
          "new_text": "Z_OBJCE_P(val)",
          "old_line_content": "  zval* val;",
          "new_line_content": "  if (!instanceof_function(Z_OBJCE_P(val), message_ce)) {",
          "content_same": false
        },
        {
          "line": 1216,
          "old_api": null,
          "new_api": "zend_error",
          "old_text": null,
          "new_text": "zend_error(E_USER_ERROR, \"Given value is not an instance of Message.\")",
          "old_line_content": "  Message* msg;",
          "new_line_content": "    zend_error(E_USER_ERROR, \"Given value is not an instance of Message.\");",
          "content_same": false
        },
        {
          "line": 708,
          "old_api": null,
          "new_api": "getThis",
          "old_text": null,
          "new_text": "getThis()",
          "old_line_content": " *",
          "new_line_content": "  Message* intern = (Message*)Z_OBJ_P(getThis());",
          "content_same": false
        },
        {
          "line": 709,
          "old_api": null,
          "new_api": "upb_MessageDef_MiniTable",
          "old_text": null,
          "new_text": "upb_MessageDef_MiniTable(intern->desc->msgdef)",
          "old_line_content": " * Serializes this message instance to protobuf data.",
          "new_line_content": "  const upb_MiniTable* l = upb_MessageDef_MiniTable(intern->desc->msgdef);",
          "content_same": false
        },
        {
          "line": 710,
          "old_api": null,
          "new_api": "upb_Arena_New",
          "old_text": null,
          "new_text": "upb_Arena_New()",
          "old_line_content": " * @return string Serialized protobuf data.",
          "new_line_content": "  upb_Arena* tmp_arena = upb_Arena_New();",
          "content_same": false
        },
        {
          "line": 1220,
          "old_api": null,
          "new_api": "Z_OBJ_P",
          "old_text": null,
          "new_text": "Z_OBJ_P(val)",
          "old_line_content": "  char* buf;",
          "new_line_content": "  msg = (Message*)Z_OBJ_P(val);",
          "content_same": false
        },
        {
          "line": 1225,
          "old_api": null,
          "new_api": "upb_MessageDef_MiniTable",
          "old_text": null,
          "new_text": "upb_MessageDef_MiniTable(msg->desc->msgdef)",
          "old_line_content": "",
          "new_line_content": "      upb_Encode(msg->msg, upb_MessageDef_MiniTable(msg->desc->msgdef), 0,",
          "content_same": false
        },
        {
          "line": 716,
          "old_api": null,
          "new_api": "Message_checkEncodeStatus",
          "old_text": null,
          "new_text": "Message_checkEncodeStatus(status)",
          "old_line_content": "  char* data;",
          "new_line_content": "  if (!Message_checkEncodeStatus(status)) return;",
          "content_same": false
        },
        {
          "line": 1229,
          "old_api": null,
          "new_api": "StringVal",
          "old_text": null,
          "new_text": "StringVal(value)",
          "old_line_content": "  }",
          "new_line_content": "  Message_setval(intern, \"value\", StringVal(value));",
          "content_same": false
        },
        {
          "line": 719,
          "old_api": null,
          "new_api": "zend_throw_exception_ex",
          "old_text": null,
          "new_text": "zend_throw_exception_ex(NULL, 0, \"Error occurred during serialization\")",
          "old_line_content": "  upb_EncodeStatus status =",
          "new_line_content": "    zend_throw_exception_ex(NULL, 0, \"Error occurred during serialization\");",
          "content_same": false
        },
        {
          "line": 1232,
          "old_api": null,
          "new_api": "upb_MessageDef_FullName",
          "old_text": null,
          "new_text": "upb_MessageDef_FullName(msg->desc->msgdef)",
          "old_line_content": "",
          "new_line_content": "  full_name = upb_MessageDef_FullName(msg->desc->msgdef);",
          "content_same": false
        },
        {
          "line": 1233,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(full_name)",
          "old_line_content": "  // Serialize and set value.",
          "new_line_content": "  type_url.size = strlen(TYPE_URL_PREFIX) + strlen(full_name);",
          "content_same": false
        },
        {
          "line": 1234,
          "old_api": null,
          "new_api": "upb_Arena_Malloc",
          "old_text": null,
          "new_text": "upb_Arena_Malloc(arena, type_url.size + 1)",
          "old_line_content": "  char* pb;",
          "new_line_content": "  buf = upb_Arena_Malloc(arena, type_url.size + 1);",
          "content_same": false
        },
        {
          "line": 1235,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(TYPE_URL_PREFIX)",
          "old_line_content": "  upb_EncodeStatus status =",
          "new_line_content": "  memcpy(buf, TYPE_URL_PREFIX, strlen(TYPE_URL_PREFIX));",
          "content_same": false
        },
        {
          "line": 1242,
          "old_api": null,
          "new_api": "getThis",
          "old_text": null,
          "new_text": "getThis()",
          "old_line_content": "  // Set type url: type_url_prefix + fully_qualified_name",
          "new_line_content": "  Message* intern = (Message*)Z_OBJ_P(getThis());",
          "content_same": false
        },
        {
          "line": 735,
          "old_api": null,
          "new_api": "getThis",
          "old_text": null,
          "new_text": "getThis()",
          "old_line_content": " *",
          "new_line_content": "  Message* intern = (Message*)Z_OBJ_P(getThis());",
          "content_same": false
        },
        {
          "line": 738,
          "old_api": null,
          "new_api": "Arena_Get",
          "old_text": null,
          "new_text": "Arena_Get(&intern->arena)",
          "old_line_content": " */",
          "new_line_content": "  upb_Arena* arena = Arena_Get(&intern->arena);",
          "content_same": false
        },
        {
          "line": 1251,
          "old_api": null,
          "new_api": "NameMap_GetMessage",
          "old_text": null,
          "new_text": "NameMap_GetMessage(klass)",
          "old_line_content": "",
          "new_line_content": "  m = NameMap_GetMessage(klass);",
          "content_same": false
        },
        {
          "line": 743,
          "old_api": null,
          "new_api": "ZEND_NUM_ARGS",
          "old_text": null,
          "new_text": "ZEND_NUM_ARGS()",
          "old_line_content": "  zend_long data_len;",
          "new_line_content": "  if (zend_parse_parameters(ZEND_NUM_ARGS(), \"s|b\", &data, &data_len,",
          "content_same": false
        },
        {
          "line": 1257,
          "old_api": null,
          "new_api": "TryStripUrlPrefix",
          "old_text": null,
          "new_text": "TryStripUrlPrefix(&type_url)",
          "old_line_content": "",
          "new_line_content": "  RETURN_BOOL(TryStripUrlPrefix(&type_url) &&",
          "content_same": false
        },
        {
          "line": 752,
          "old_api": null,
          "new_api": "upb_Status_Clear",
          "old_text": null,
          "new_text": "upb_Status_Clear(&status)",
          "old_line_content": "  }",
          "new_line_content": "  upb_Status_Clear(&status);",
          "content_same": false
        },
        {
          "line": 753,
          "old_api": null,
          "new_api": "upb_JsonDecode",
          "old_text": null,
          "new_text": "upb_JsonDecode(data, data_len, intern->msg, intern->desc->msgdef,\n                      DescriptorPool_GetSymbolTable(), options, arena,\n                      &status)",
          "old_line_content": "",
          "new_line_content": "  if (!upb_JsonDecode(data, data_len, intern->msg, intern->desc->msgdef,",
          "content_same": false
        },
        {
          "line": 754,
          "old_api": null,
          "new_api": "DescriptorPool_GetSymbolTable",
          "old_text": null,
          "new_text": "DescriptorPool_GetSymbolTable()",
          "old_line_content": "  // TODO: avoid this copy when we can make the decoder copy.",
          "new_line_content": "                      DescriptorPool_GetSymbolTable(), options, arena,",
          "content_same": false
        },
        {
          "line": 1266,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(classname)",
          "old_line_content": "  }",
          "new_line_content": "      zend_string_init(classname, strlen(classname), 0);",
          "content_same": false
        },
        {
          "line": 1267,
          "old_api": null,
          "new_api": "zend_lookup_class",
          "old_text": null,
          "new_text": "zend_lookup_class(classname_str)",
          "old_line_content": "",
          "new_line_content": "  zend_class_entry* date_interface_ce = zend_lookup_class(classname_str);",
          "content_same": false
        },
        {
          "line": 757,
          "old_api": null,
          "new_api": "upb_Status_ErrorMessage",
          "old_text": null,
          "new_text": "upb_Status_ErrorMessage(&status)",
          "old_line_content": "  data_copy[data_len] = '\\0';",
          "new_line_content": "                            upb_Status_ErrorMessage(&status));",
          "content_same": false
        },
        {
          "line": 1271,
          "old_api": null,
          "new_api": "zend_error",
          "old_text": null,
          "new_text": "zend_error(E_ERROR, \"Make sure date extension is enabled.\")",
          "old_line_content": "",
          "new_line_content": "    zend_error(E_ERROR, \"Make sure date extension is enabled.\");",
          "content_same": false
        },
        {
          "line": 1275,
          "old_api": null,
          "new_api": "ZEND_NUM_ARGS",
          "old_text": null,
          "new_text": "ZEND_NUM_ARGS()",
          "old_line_content": "  const char* classname = \"\\\\DatetimeInterface\";",
          "new_line_content": "  if (zend_parse_parameters(ZEND_NUM_ARGS(), \"O\", &datetime,",
          "content_same": false
        },
        {
          "line": 769,
          "old_api": null,
          "new_api": "getThis",
          "old_text": null,
          "new_text": "getThis()",
          "old_line_content": "    return;",
          "new_line_content": "  Message* intern = (Message*)Z_OBJ_P(getThis());",
          "content_same": false
        },
        {
          "line": 776,
          "old_api": null,
          "new_api": "ZEND_NUM_ARGS",
          "old_text": null,
          "new_text": "ZEND_NUM_ARGS()",
          "old_line_content": " * Serializes this object to JSON.",
          "new_line_content": "  if (zend_parse_parameters(ZEND_NUM_ARGS(), \"|b\",",
          "content_same": false
        },
        {
          "line": 1290,
          "old_api": null,
          "new_api": "Convert_PhpToUpb",
          "old_text": null,
          "new_text": "Convert_PhpToUpb(&retval, &timestamp_seconds,\n                          TypeInfo_FromType(kUpb_CType_Int64), NULL)",
          "old_line_content": "  }",
          "new_line_content": "        !Convert_PhpToUpb(&retval, &timestamp_seconds,",
          "content_same": false
        },
        {
          "line": 1291,
          "old_api": null,
          "new_api": "TypeInfo_FromType",
          "old_text": null,
          "new_text": "TypeInfo_FromType(kUpb_CType_Int64)",
          "old_line_content": "",
          "new_line_content": "                          TypeInfo_FromType(kUpb_CType_Int64), NULL)) {",
          "content_same": false
        },
        {
          "line": 1292,
          "old_api": null,
          "new_api": "zend_error",
          "old_text": null,
          "new_text": "zend_error(E_ERROR, \"Cannot get timestamp from DateTime.\")",
          "old_line_content": "  upb_MessageValue timestamp_seconds;",
          "new_line_content": "      zend_error(E_ERROR, \"Cannot get timestamp from DateTime.\");",
          "content_same": false
        },
        {
          "line": 1296,
          "old_api": null,
          "new_api": "zval_dtor",
          "old_text": null,
          "new_text": "zval_dtor(&retval)",
          "old_line_content": "",
          "new_line_content": "    zval_dtor(&retval);",
          "content_same": false
        },
        {
          "line": 785,
          "old_api": null,
          "new_api": "upb_Status_Clear",
          "old_text": null,
          "new_text": "upb_Status_Clear(&status)",
          "old_line_content": "  upb_Status status;",
          "new_line_content": "  upb_Status_Clear(&status);",
          "content_same": false
        },
        {
          "line": 786,
          "old_api": null,
          "new_api": "upb_JsonEncode",
          "old_text": null,
          "new_text": "upb_JsonEncode(intern->msg, intern->desc->msgdef,\n                        DescriptorPool_GetSymbolTable(), options, buf,\n                        sizeof(buf), &status)",
          "old_line_content": "",
          "new_line_content": "  size = upb_JsonEncode(intern->msg, intern->desc->msgdef,",
          "content_same": false
        },
        {
          "line": 790,
          "old_api": null,
          "new_api": "upb_Status_IsOk",
          "old_text": null,
          "new_text": "upb_Status_IsOk(&status)",
          "old_line_content": "  }",
          "new_line_content": "  if (!upb_Status_IsOk(&status)) {",
          "content_same": false
        },
        {
          "line": 791,
          "old_api": null,
          "new_api": "zend_throw_exception_ex",
          "old_text": null,
          "new_text": "zend_throw_exception_ex(NULL, 0,\n                            \"Error occurred during JSON serialization: %s\",\n                            upb_Status_ErrorMessage(&status))",
          "old_line_content": "",
          "new_line_content": "    zend_throw_exception_ex(NULL, 0,",
          "content_same": false
        },
        {
          "line": 793,
          "old_api": null,
          "new_api": "upb_Status_ErrorMessage",
          "old_text": null,
          "new_text": "upb_Status_ErrorMessage(&status)",
          "old_line_content": "    options |= upb_JsonEncode_UseProtoNames;",
          "new_line_content": "                            upb_Status_ErrorMessage(&status));",
          "content_same": false
        },
        {
          "line": 1306,
          "old_api": null,
          "new_api": "ZVAL_STRING",
          "old_text": null,
          "new_text": "ZVAL_STRING(&function_name, \"date_format\")",
          "old_line_content": "",
          "new_line_content": "    ZVAL_STRING(&function_name, \"date_format\");",
          "content_same": false
        },
        {
          "line": 799,
          "old_api": null,
          "new_api": "upb_JsonEncode",
          "old_text": null,
          "new_text": "upb_JsonEncode(intern->msg, intern->desc->msgdef,\n                   DescriptorPool_GetSymbolTable(), options, buf2, size + 1,\n                   &status)",
          "old_line_content": "                        sizeof(buf), &status);",
          "new_line_content": "    upb_JsonEncode(intern->msg, intern->desc->msgdef,",
          "content_same": false
        },
        {
          "line": 800,
          "old_api": null,
          "new_api": "DescriptorPool_GetSymbolTable",
          "old_text": null,
          "new_text": "DescriptorPool_GetSymbolTable()",
          "old_line_content": "",
          "new_line_content": "                   DescriptorPool_GetSymbolTable(), options, buf2, size + 1,",
          "content_same": false
        },
        {
          "line": 1314,
          "old_api": null,
          "new_api": "EG",
          "old_text": null,
          "new_text": "EG(function_table)",
          "old_line_content": "    zval function_name;",
          "new_line_content": "    if (call_user_function(EG(function_table), NULL, &function_name, &retval, 2,",
          "content_same": false
        },
        {
          "line": 803,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(buf2)",
          "old_line_content": "                            \"Error occurred during JSON serialization: %s\",",
          "new_line_content": "    free(buf2);",
          "content_same": false
        },
        {
          "line": 1316,
          "old_api": null,
          "new_api": "Convert_PhpToUpb",
          "old_text": null,
          "new_text": "Convert_PhpToUpb(&retval, &timestamp_nanos,\n                          TypeInfo_FromType(kUpb_CType_Int32), NULL)",
          "old_line_content": "",
          "new_line_content": "        !Convert_PhpToUpb(&retval, &timestamp_nanos,",
          "content_same": false
        },
        {
          "line": 805,
          "old_api": null,
          "new_api": "RETVAL_STRINGL",
          "old_text": null,
          "new_text": "RETVAL_STRINGL(buf, size)",
          "old_line_content": "    return;",
          "new_line_content": "    RETVAL_STRINGL(buf, size);",
          "content_same": false
        },
        {
          "line": 1324,
          "old_api": null,
          "new_api": "zval_dtor",
          "old_text": null,
          "new_text": "zval_dtor(&retval)",
          "old_line_content": "",
          "new_line_content": "    zval_dtor(&retval);",
          "content_same": false
        },
        {
          "line": 1326,
          "old_api": null,
          "new_api": "zval_dtor",
          "old_text": null,
          "new_text": "zval_dtor(&format_string)",
          "old_line_content": "                           params) == FAILURE ||",
          "new_line_content": "    zval_dtor(&format_string);",
          "content_same": false
        },
        {
          "line": 1330,
          "old_api": null,
          "new_api": "Message_setval",
          "old_text": null,
          "new_text": "Message_setval(intern, \"nanos\", timestamp_nanos)",
          "old_line_content": "      return;",
          "new_line_content": "  Message_setval(intern, \"nanos\", timestamp_nanos);",
          "content_same": false
        },
        {
          "line": 1332,
          "old_api": null,
          "new_api": "RETURN_NULL",
          "old_text": null,
          "new_text": "RETURN_NULL()",
          "old_line_content": "",
          "new_line_content": "  RETURN_NULL();",
          "content_same": false
        },
        {
          "line": 823,
          "old_api": null,
          "new_api": "getThis",
          "old_text": null,
          "new_text": "getThis()",
          "old_line_content": " * Returns an unboxed value for the given field. This is called from generated",
          "new_line_content": "  Message* intern = (Message*)Z_OBJ_P(getThis());",
          "content_same": false
        },
        {
          "line": 1338,
          "old_api": null,
          "new_api": "Message_getval",
          "old_text": null,
          "new_text": "Message_getval(intern, \"nanos\")",
          "old_line_content": "  }",
          "new_line_content": "  upb_MessageValue nanos = Message_getval(intern, \"nanos\");",
          "content_same": false
        },
        {
          "line": 828,
          "old_api": null,
          "new_api": "ZEND_NUM_ARGS",
          "old_text": null,
          "new_text": "ZEND_NUM_ARGS()",
          "old_line_content": " *       return $this->readWrapperValue(\"double_value\");",
          "new_line_content": "  if (zend_parse_parameters(ZEND_NUM_ARGS(), \"s\", &member, &size) == FAILURE) {",
          "content_same": false
        },
        {
          "line": 1342,
          "old_api": null,
          "new_api": "snprintf",
          "old_text": null,
          "new_text": "snprintf(formatted_time, sizeof(formatted_time), \"%\" PRId64 \".%06\" PRId32,\n           seconds.int64_val, nanos.int32_val / 1000)",
          "old_line_content": "",
          "new_line_content": "  snprintf(formatted_time, sizeof(formatted_time), \"%\" PRId64 \".%06\" PRId32,",
          "content_same": false
        },
        {
          "line": 832,
          "old_api": null,
          "new_api": "upb_MessageDef_FindFieldByNameWithSize",
          "old_text": null,
          "new_text": "upb_MessageDef_FindFieldByNameWithSize(intern->desc->msgdef, member,\n                                             size)",
          "old_line_content": " */",
          "new_line_content": "  f = upb_MessageDef_FindFieldByNameWithSize(intern->desc->msgdef, member,",
          "content_same": false
        },
        {
          "line": 835,
          "old_api": null,
          "new_api": "upb_FieldDef_MessageSubDef",
          "old_text": null,
          "new_text": "upb_FieldDef_MessageSubDef(f)",
          "old_line_content": "  char* member;",
          "new_line_content": "  if (!f || !IsWrapper(upb_FieldDef_MessageSubDef(f))) {",
          "content_same": false
        },
        {
          "line": 836,
          "old_api": null,
          "new_api": "zend_throw_exception_ex",
          "old_text": null,
          "new_text": "zend_throw_exception_ex(NULL, 0, \"Message %s has no field %s\",\n                            upb_MessageDef_FullName(intern->desc->msgdef),\n                            member)",
          "old_line_content": "  const upb_FieldDef* f;",
          "new_line_content": "    zend_throw_exception_ex(NULL, 0, \"Message %s has no field %s\",",
          "content_same": false
        },
        {
          "line": 837,
          "old_api": null,
          "new_api": "upb_MessageDef_FullName",
          "old_text": null,
          "new_text": "upb_MessageDef_FullName(intern->desc->msgdef)",
          "old_line_content": "  zend_long size;",
          "new_line_content": "                            upb_MessageDef_FullName(intern->desc->msgdef),",
          "content_same": false
        },
        {
          "line": 1351,
          "old_api": null,
          "new_api": "ZVAL_STRING",
          "old_text": null,
          "new_text": "ZVAL_STRING(&function_name, \"date_create_from_format\")",
          "old_line_content": "  // Get formatted time string.",
          "new_line_content": "  ZVAL_STRING(&function_name, \"date_create_from_format\");",
          "content_same": false
        },
        {
          "line": 1352,
          "old_api": null,
          "new_api": "ZVAL_STRING",
          "old_text": null,
          "new_text": "ZVAL_STRING(&format_string, \"U.u\")",
          "old_line_content": "  char formatted_time[32];",
          "new_line_content": "  ZVAL_STRING(&format_string, \"U.u\");",
          "content_same": false
        },
        {
          "line": 842,
          "old_api": null,
          "new_api": "upb_Message_HasFieldByDef",
          "old_text": null,
          "new_text": "upb_Message_HasFieldByDef(intern->msg, f)",
          "old_line_content": "",
          "new_line_content": "  if (upb_Message_HasFieldByDef(intern->msg, f)) {",
          "content_same": false
        },
        {
          "line": 844,
          "old_api": null,
          "new_api": "upb_Message_GetFieldByDef",
          "old_text": null,
          "new_text": "upb_Message_GetFieldByDef(intern->msg, f)",
          "old_line_content": "                                             size);",
          "new_line_content": "        upb_Message_GetFieldByDef(intern->msg, f).msg_val;",
          "content_same": false
        },
        {
          "line": 845,
          "old_api": null,
          "new_api": "upb_FieldDef_MessageSubDef",
          "old_text": null,
          "new_text": "upb_FieldDef_MessageSubDef(f)",
          "old_line_content": "",
          "new_line_content": "    const upb_MessageDef* m = upb_FieldDef_MessageSubDef(f);",
          "content_same": false
        },
        {
          "line": 1360,
          "old_api": null,
          "new_api": "EG",
          "old_text": null,
          "new_text": "EG(function_table)",
          "old_line_content": "  zval formatted_time_php;",
          "new_line_content": "  if (call_user_function(EG(function_table), NULL, &function_name, &datetime, 2,",
          "content_same": false
        },
        {
          "line": 849,
          "old_api": null,
          "new_api": "TypeInfo_Get",
          "old_text": null,
          "new_text": "TypeInfo_Get(val_f)",
          "old_line_content": "                            member);",
          "new_line_content": "    Convert_UpbToPhp(msgval, &ret, TypeInfo_Get(val_f), &intern->arena);",
          "content_same": false
        },
        {
          "line": 850,
          "old_api": null,
          "new_api": "RETURN_COPY_VALUE",
          "old_text": null,
          "new_text": "RETURN_COPY_VALUE(&ret)",
          "old_line_content": "    return;",
          "new_line_content": "    RETURN_COPY_VALUE(&ret);",
          "content_same": false
        },
        {
          "line": 852,
          "old_api": null,
          "new_api": "RETURN_NULL",
          "old_text": null,
          "new_text": "RETURN_NULL()",
          "old_line_content": "",
          "new_line_content": "    RETURN_NULL();",
          "content_same": false
        },
        {
          "line": 1366,
          "old_api": null,
          "new_api": "zval_dtor",
          "old_text": null,
          "new_text": "zval_dtor(&function_name)",
          "old_line_content": "  zval params[2] = {",
          "new_line_content": "  zval_dtor(&function_name);",
          "content_same": false
        },
        {
          "line": 1367,
          "old_api": null,
          "new_api": "zval_dtor",
          "old_text": null,
          "new_text": "zval_dtor(&format_string)",
          "old_line_content": "      format_string,",
          "new_line_content": "  zval_dtor(&format_string);",
          "content_same": false
        },
        {
          "line": 1368,
          "old_api": null,
          "new_api": "zval_dtor",
          "old_text": null,
          "new_text": "zval_dtor(&formatted_time_php)",
          "old_line_content": "      formatted_time_php,",
          "new_line_content": "  zval_dtor(&formatted_time_php);",
          "content_same": false
        },
        {
          "line": 1370,
          "old_api": null,
          "new_api": "Z_OBJ",
          "old_text": null,
          "new_text": "Z_OBJ(datetime)",
          "old_line_content": "",
          "new_line_content": "  ZVAL_OBJ(return_value, Z_OBJ(datetime));",
          "content_same": false
        },
        {
          "line": 872,
          "old_api": null,
          "new_api": "getThis",
          "old_text": null,
          "new_text": "getThis()",
          "old_line_content": " *",
          "new_line_content": "  Message* intern = (Message*)Z_OBJ_P(getThis());",
          "content_same": false
        },
        {
          "line": 873,
          "old_api": null,
          "new_api": "Arena_Get",
          "old_text": null,
          "new_text": "Arena_Get(&intern->arena)",
          "old_line_content": " *",
          "new_line_content": "  upb_Arena* arena = Arena_Get(&intern->arena);",
          "content_same": false
        },
        {
          "line": 1384,
          "old_api": null,
          "new_api": "INIT_CLASS_ENTRY",
          "old_text": null,
          "new_text": "INIT_CLASS_ENTRY(tmp_ce, \"Google\\\\Protobuf\\\\Internal\\\\Message\",\n                   Message_methods)",
          "old_line_content": "#include \"wkt.inc\"",
          "new_line_content": "  INIT_CLASS_ENTRY(tmp_ce, \"Google\\\\Protobuf\\\\Internal\\\\Message\",",
          "content_same": false
        },
        {
          "line": 1387,
          "old_api": null,
          "new_api": "zend_register_internal_class",
          "old_text": null,
          "new_text": "zend_register_internal_class(&tmp_ce)",
          "old_line_content": " * Message_ModuleInit()",
          "new_line_content": "  message_ce = zend_register_internal_class(&tmp_ce);",
          "content_same": false
        },
        {
          "line": 1390,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(h, &std_object_handlers, sizeof(zend_object_handlers))",
          "old_line_content": " */",
          "new_line_content": "  memcpy(h, &std_object_handlers, sizeof(zend_object_handlers));",
          "content_same": false
        },
        {
          "line": 880,
          "old_api": null,
          "new_api": "ZEND_NUM_ARGS",
          "old_text": null,
          "new_text": "ZEND_NUM_ARGS()",
          "old_line_content": " * @param Unwrapped field value or null.",
          "new_line_content": "  if (zend_parse_parameters(ZEND_NUM_ARGS(), \"sz\", &member, &size, &val) ==",
          "content_same": false
        },
        {
          "line": 885,
          "old_api": null,
          "new_api": "upb_MessageDef_FindFieldByNameWithSize",
          "old_text": null,
          "new_text": "upb_MessageDef_FindFieldByNameWithSize(intern->desc->msgdef, member,\n                                             size)",
          "old_line_content": "  char* member;",
          "new_line_content": "  f = upb_MessageDef_FindFieldByNameWithSize(intern->desc->msgdef, member,",
          "content_same": false
        },
        {
          "line": 888,
          "old_api": null,
          "new_api": "upb_FieldDef_MessageSubDef",
          "old_text": null,
          "new_text": "upb_FieldDef_MessageSubDef(f)",
          "old_line_content": "  zend_long size;",
          "new_line_content": "  if (!f || !IsWrapper(upb_FieldDef_MessageSubDef(f))) {",
          "content_same": false
        },
        {
          "line": 889,
          "old_api": null,
          "new_api": "zend_throw_exception_ex",
          "old_text": null,
          "new_text": "zend_throw_exception_ex(NULL, 0, \"Message %s has no field %s\",\n                            upb_MessageDef_FullName(intern->desc->msgdef),\n                            member)",
          "old_line_content": "  zval* val;",
          "new_line_content": "    zend_throw_exception_ex(NULL, 0, \"Message %s has no field %s\",",
          "content_same": false
        },
        {
          "line": 890,
          "old_api": null,
          "new_api": "upb_MessageDef_FullName",
          "old_text": null,
          "new_text": "upb_MessageDef_FullName(intern->desc->msgdef)",
          "old_line_content": "",
          "new_line_content": "                            upb_MessageDef_FullName(intern->desc->msgdef),",
          "content_same": false
        },
        {
          "line": 895,
          "old_api": null,
          "new_api": "Z_ISREF_P",
          "old_text": null,
          "new_text": "Z_ISREF_P(val)",
          "old_line_content": "",
          "new_line_content": "  if (Z_ISREF_P(val)) {",
          "content_same": false
        },
        {
          "line": 902,
          "old_api": null,
          "new_api": "upb_FieldDef_MessageSubDef",
          "old_text": null,
          "new_text": "upb_FieldDef_MessageSubDef(f)",
          "old_line_content": "                            member);",
          "new_line_content": "    const upb_MessageDef* m = upb_FieldDef_MessageSubDef(f);",
          "content_same": false
        },
        {
          "line": 903,
          "old_api": null,
          "new_api": "upb_MessageDef_FindFieldByNumber",
          "old_text": null,
          "new_text": "upb_MessageDef_FindFieldByNumber(m, 1)",
          "old_line_content": "    return;",
          "new_line_content": "    const upb_FieldDef* val_f = upb_MessageDef_FindFieldByNumber(m, 1);",
          "content_same": false
        },
        {
          "line": 924,
          "old_api": null,
          "new_api": "getThis",
          "old_text": null,
          "new_text": "getThis()",
          "old_line_content": "}",
          "new_line_content": "  Message* intern = (Message*)Z_OBJ_P(getThis());",
          "content_same": false
        },
        {
          "line": 930,
          "old_api": null,
          "new_api": "ZEND_NUM_ARGS",
          "old_text": null,
          "new_text": "ZEND_NUM_ARGS()",
          "old_line_content": " * or otherwise the empty string.",
          "new_line_content": "  if (zend_parse_parameters(ZEND_NUM_ARGS(), \"s\", &name, &len) == FAILURE) {",
          "content_same": false
        },
        {
          "line": 938,
          "old_api": null,
          "new_api": "zend_throw_exception_ex",
          "old_text": null,
          "new_text": "zend_throw_exception_ex(NULL, 0, \"Message %s has no oneof %s\",\n                            upb_MessageDef_FullName(intern->desc->msgdef),\n                            name)",
          "old_line_content": "  char* name;",
          "new_line_content": "    zend_throw_exception_ex(NULL, 0, \"Message %s has no oneof %s\",",
          "content_same": false
        },
        {
          "line": 939,
          "old_api": null,
          "new_api": "upb_MessageDef_FullName",
          "old_text": null,
          "new_text": "upb_MessageDef_FullName(intern->desc->msgdef)",
          "old_line_content": "  zend_long len;",
          "new_line_content": "                            upb_MessageDef_FullName(intern->desc->msgdef),",
          "content_same": false
        },
        {
          "line": 944,
          "old_api": null,
          "new_api": "upb_Message_WhichOneof",
          "old_text": null,
          "new_text": "upb_Message_WhichOneof(intern->msg, oneof)",
          "old_line_content": "",
          "new_line_content": "  field = upb_Message_WhichOneof(intern->msg, oneof);",
          "content_same": false
        },
        {
          "line": 945,
          "old_api": null,
          "new_api": "upb_FieldDef_Name",
          "old_text": null,
          "new_text": "upb_FieldDef_Name(field)",
          "old_line_content": "  oneof =",
          "new_line_content": "  RETURN_STRING(field ? upb_FieldDef_Name(field) : \"\");",
          "content_same": false
        },
        {
          "line": 962,
          "old_api": null,
          "new_api": "getThis",
          "old_text": null,
          "new_text": "getThis()",
          "old_line_content": " * Returns the presence of the given oneof field, given a field number. Called",
          "new_line_content": "  Message* intern = (Message*)Z_OBJ_P(getThis());",
          "content_same": false
        },
        {
          "line": 966,
          "old_api": null,
          "new_api": "ZEND_NUM_ARGS",
          "old_text": null,
          "new_text": "ZEND_NUM_ARGS()",
          "old_line_content": " *    {",
          "new_line_content": "  if (zend_parse_parameters(ZEND_NUM_ARGS(), \"l\", &field_num) == FAILURE) {",
          "content_same": false
        },
        {
          "line": 970,
          "old_api": null,
          "new_api": "upb_MessageDef_FindFieldByNumber",
          "old_text": null,
          "new_text": "upb_MessageDef_FindFieldByNumber(intern->desc->msgdef, field_num)",
          "old_line_content": " * @return boolean",
          "new_line_content": "  f = upb_MessageDef_FindFieldByNumber(intern->desc->msgdef, field_num);",
          "content_same": false
        },
        {
          "line": 972,
          "old_api": null,
          "new_api": "upb_FieldDef_RealContainingOneof",
          "old_text": null,
          "new_text": "upb_FieldDef_RealContainingOneof(f)",
          "old_line_content": "PHP_METHOD(Message, hasOneof) {",
          "new_line_content": "  if (!f || !upb_FieldDef_RealContainingOneof(f)) {",
          "content_same": false
        },
        {
          "line": 978,
          "old_api": null,
          "new_api": "upb_Message_HasFieldByDef",
          "old_text": null,
          "new_text": "upb_Message_HasFieldByDef(intern->msg, f)",
          "old_line_content": "    return;",
          "new_line_content": "  RETVAL_BOOL(upb_Message_HasFieldByDef(intern->msg, f));",
          "content_same": false
        },
        {
          "line": 995,
          "old_api": null,
          "new_api": "getThis",
          "old_text": null,
          "new_text": "getThis()",
          "old_line_content": " * Returns the contents of the given oneof field, given a field number. Called",
          "new_line_content": "  Message* intern = (Message*)Z_OBJ_P(getThis());",
          "content_same": false
        },
        {
          "line": 1000,
          "old_api": null,
          "new_api": "ZEND_NUM_ARGS",
          "old_text": null,
          "new_text": "ZEND_NUM_ARGS()",
          "old_line_content": " *        return $this->readOneof(10);",
          "new_line_content": "  if (zend_parse_parameters(ZEND_NUM_ARGS(), \"l\", &field_num) == FAILURE) {",
          "content_same": false
        },
        {
          "line": 1004,
          "old_api": null,
          "new_api": "upb_MessageDef_FindFieldByNumber",
          "old_text": null,
          "new_text": "upb_MessageDef_FindFieldByNumber(intern->desc->msgdef, field_num)",
          "old_line_content": " */",
          "new_line_content": "  f = upb_MessageDef_FindFieldByNumber(intern->desc->msgdef, field_num);",
          "content_same": false
        },
        {
          "line": 1007,
          "old_api": null,
          "new_api": "php_error_docref",
          "old_text": null,
          "new_text": "php_error_docref(NULL, E_USER_ERROR,\n                     \"Internal error, no such oneof field %d\\n\",\n                     (int)field_num)",
          "old_line_content": "  zend_long field_num;",
          "new_line_content": "    php_error_docref(NULL, E_USER_ERROR,",
          "content_same": false
        },
        {
          "line": 1012,
          "old_api": null,
          "new_api": "upb_FieldDef_IsSubMessage",
          "old_text": null,
          "new_text": "upb_FieldDef_IsSubMessage(f)",
          "old_line_content": "    return;",
          "new_line_content": "  if (upb_FieldDef_IsSubMessage(f) &&",
          "content_same": false
        },
        {
          "line": 1013,
          "old_api": null,
          "new_api": "upb_Message_HasFieldByDef",
          "old_text": null,
          "new_text": "upb_Message_HasFieldByDef(intern->msg, f)",
          "old_line_content": "  }",
          "new_line_content": "      !upb_Message_HasFieldByDef(intern->msg, f)) {",
          "content_same": false
        },
        {
          "line": 1014,
          "old_api": null,
          "new_api": "RETURN_NULL",
          "old_text": null,
          "new_text": "RETURN_NULL()",
          "old_line_content": "",
          "new_line_content": "    RETURN_NULL();",
          "content_same": false
        },
        {
          "line": 1019,
          "old_api": null,
          "new_api": "TypeInfo_Get",
          "old_text": null,
          "new_text": "TypeInfo_Get(f)",
          "old_line_content": "                     \"Internal error, no such oneof field %d\\n\",",
          "new_line_content": "    Convert_UpbToPhp(msgval, &ret, TypeInfo_Get(f), &intern->arena);",
          "content_same": false
        },
        {
          "line": 1022,
          "old_api": null,
          "new_api": "RETURN_COPY_VALUE",
          "old_text": null,
          "new_text": "RETURN_COPY_VALUE(&ret)",
          "old_line_content": "",
          "new_line_content": "  RETURN_COPY_VALUE(&ret);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 1024,
          "old_api": "upb_Message_HasFieldByDef",
          "new_api": null,
          "old_text": "upb_Message_HasFieldByDef(intern->msg, f)",
          "new_text": null,
          "old_line_content": "      !upb_Message_HasFieldByDef(intern->msg, f)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1025,
          "old_api": "RETURN_NULL",
          "new_api": null,
          "old_text": "RETURN_NULL()",
          "new_text": null,
          "old_line_content": "    RETURN_NULL();",
          "new_line_content": "/**",
          "content_same": false
        },
        {
          "line": 1029,
          "old_api": "upb_Message_GetFieldByDef",
          "new_api": null,
          "old_text": "upb_Message_GetFieldByDef(intern->msg, f)",
          "new_text": null,
          "old_line_content": "    upb_MessageValue msgval = upb_Message_GetFieldByDef(intern->msg, f);",
          "new_line_content": " * from generated code methods such as:",
          "content_same": false
        },
        {
          "line": 1030,
          "old_api": "TypeInfo_Get",
          "new_api": null,
          "old_text": "TypeInfo_Get(f)",
          "new_text": null,
          "old_line_content": "    Convert_UpbToPhp(msgval, &ret, TypeInfo_Get(f), &intern->arena);",
          "new_line_content": " *",
          "content_same": false
        },
        {
          "line": 1033,
          "old_api": "RETURN_COPY_VALUE",
          "new_api": null,
          "old_text": "RETURN_COPY_VALUE(&ret)",
          "new_text": null,
          "old_line_content": "  RETURN_COPY_VALUE(&ret);",
          "new_line_content": " *       GPBUtil::checkMessage($var, \\Google\\Protobuf\\DoubleValue::class);",
          "content_same": false
        },
        {
          "line": 1057,
          "old_api": "getThis",
          "new_api": null,
          "old_text": "getThis()",
          "new_text": null,
          "old_line_content": "  Message* intern = (Message*)Z_OBJ_P(getThis());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1064,
          "old_api": "ZEND_NUM_ARGS",
          "new_api": null,
          "old_text": "ZEND_NUM_ARGS()",
          "new_text": null,
          "old_line_content": "  if (zend_parse_parameters(ZEND_NUM_ARGS(), \"lz\", &field_num, &val) ==",
          "new_line_content": "    return;",
          "content_same": false
        },
        {
          "line": 1069,
          "old_api": "upb_MessageDef_FindFieldByNumber",
          "new_api": null,
          "old_text": "upb_MessageDef_FindFieldByNumber(intern->desc->msgdef, field_num)",
          "new_text": null,
          "old_line_content": "  f = upb_MessageDef_FindFieldByNumber(intern->desc->msgdef, field_num);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1074,
          "old_api": "TypeInfo_Get",
          "new_api": null,
          "old_text": "TypeInfo_Get(f)",
          "new_text": null,
          "old_line_content": "  } else if (!Convert_PhpToUpb(val, &msgval, TypeInfo_Get(f), arena)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1078,
          "old_api": "upb_Message_SetFieldByDef",
          "new_api": null,
          "old_text": "upb_Message_SetFieldByDef(intern->msg, f, msgval, arena)",
          "new_text": null,
          "old_line_content": "  upb_Message_SetFieldByDef(intern->msg, f, msgval, arena);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1083,
          "old_api": "ZEND_ARG_INFO",
          "new_api": null,
          "old_text": "ZEND_ARG_INFO(0, data)",
          "new_text": null,
          "old_line_content": "  ZEND_ARG_INFO(0, data)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1087,
          "old_api": "ZEND_ARG_INFO",
          "new_api": null,
          "old_text": "ZEND_ARG_INFO(0, data)",
          "new_text": null,
          "old_line_content": "  ZEND_ARG_INFO(0, data)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1092,
          "old_api": "ZEND_ARG_INFO",
          "new_api": null,
          "old_text": "ZEND_ARG_INFO(0, arg)",
          "new_text": null,
          "old_line_content": "  ZEND_ARG_INFO(0, arg)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1093,
          "old_api": "ZEND_END_ARG_INFO",
          "new_api": null,
          "old_text": "ZEND_END_ARG_INFO()",
          "new_text": null,
          "old_line_content": "ZEND_END_ARG_INFO()",
          "new_line_content": "static zend_function_entry Message_methods[] = {",
          "content_same": false
        },
        {
          "line": 1095,
          "old_api": "ZEND_BEGIN_ARG_INFO_EX",
          "new_api": null,
          "old_text": "ZEND_BEGIN_ARG_INFO_EX(arginfo_read, 0, 0, 1)",
          "new_text": null,
          "old_line_content": "ZEND_BEGIN_ARG_INFO_EX(arginfo_read, 0, 0, 1)",
          "new_line_content": "  PHP_ME(Message, discardUnknownFields,  arginfo_void,      ZEND_ACC_PUBLIC)",
          "content_same": false
        },
        {
          "line": 1096,
          "old_api": "ZEND_ARG_INFO",
          "new_api": null,
          "old_text": "ZEND_ARG_INFO(0, field)",
          "new_text": null,
          "old_line_content": "  ZEND_ARG_INFO(0, field)",
          "new_line_content": "  PHP_ME(Message, serializeToString,     arginfo_void,      ZEND_ACC_PUBLIC)",
          "content_same": false
        },
        {
          "line": 1097,
          "old_api": "ZEND_END_ARG_INFO",
          "new_api": null,
          "old_text": "ZEND_END_ARG_INFO()",
          "new_text": null,
          "old_line_content": "ZEND_END_ARG_INFO()",
          "new_line_content": "  PHP_ME(Message, mergeFromString,       arginfo_mergeFrom, ZEND_ACC_PUBLIC)",
          "content_same": false
        },
        {
          "line": 1099,
          "old_api": "ZEND_BEGIN_ARG_INFO_EX",
          "new_api": null,
          "old_text": "ZEND_BEGIN_ARG_INFO_EX(arginfo_write, 0, 0, 2)",
          "new_text": null,
          "old_line_content": "ZEND_BEGIN_ARG_INFO_EX(arginfo_write, 0, 0, 2)",
          "new_line_content": "  PHP_ME(Message, mergeFromJsonString,   arginfo_mergeFromWithArg, ZEND_ACC_PUBLIC)",
          "content_same": false
        },
        {
          "line": 1100,
          "old_api": "ZEND_ARG_INFO",
          "new_api": null,
          "old_text": "ZEND_ARG_INFO(0, field)",
          "new_text": null,
          "old_line_content": "  ZEND_ARG_INFO(0, field)",
          "new_line_content": "  PHP_ME(Message, mergeFrom,             arginfo_mergeFrom, ZEND_ACC_PUBLIC)",
          "content_same": false
        },
        {
          "line": 1101,
          "old_api": "ZEND_ARG_INFO",
          "new_api": null,
          "old_text": "ZEND_ARG_INFO(0, value)",
          "new_text": null,
          "old_line_content": "  ZEND_ARG_INFO(0, value)",
          "new_line_content": "  PHP_ME(Message, readWrapperValue,      arginfo_read,      ZEND_ACC_PROTECTED)",
          "content_same": false
        },
        {
          "line": 1102,
          "old_api": "ZEND_END_ARG_INFO",
          "new_api": null,
          "old_text": "ZEND_END_ARG_INFO()",
          "new_text": null,
          "old_line_content": "ZEND_END_ARG_INFO()",
          "new_line_content": "  PHP_ME(Message, writeWrapperValue,     arginfo_write,     ZEND_ACC_PROTECTED)",
          "content_same": false
        },
        {
          "line": 1130,
          "old_api": "upb_MessageDef_FindFieldByName",
          "new_api": null,
          "old_text": "upb_MessageDef_FindFieldByName(intern->desc->msgdef, field_name)",
          "new_text": null,
          "old_line_content": "      upb_MessageDef_FindFieldByName(intern->desc->msgdef, field_name);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1131,
          "old_api": "PBPHP_ASSERT",
          "new_api": null,
          "old_text": "PBPHP_ASSERT(f)",
          "new_text": null,
          "old_line_content": "  PBPHP_ASSERT(f);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1132,
          "old_api": "upb_Message_GetFieldByDef",
          "new_api": null,
          "old_text": "upb_Message_GetFieldByDef(intern->msg, f)",
          "new_text": null,
          "old_line_content": "  return upb_Message_GetFieldByDef(intern->msg, f);",
          "new_line_content": "static upb_MessageValue StringVal(upb_StringView view) {",
          "content_same": false
        },
        {
          "line": 1138,
          "old_api": "upb_MessageDef_FindFieldByName",
          "new_api": null,
          "old_text": "upb_MessageDef_FindFieldByName(intern->desc->msgdef, field_name)",
          "new_text": null,
          "old_line_content": "      upb_MessageDef_FindFieldByName(intern->desc->msgdef, field_name);",
          "new_line_content": "static bool TryStripUrlPrefix(upb_StringView* str) {",
          "content_same": false
        },
        {
          "line": 1151,
          "old_api": "memcmp",
          "new_api": null,
          "old_text": "memcmp(TYPE_URL_PREFIX, str->data, size)",
          "new_text": null,
          "old_line_content": "  if (str->size < size || memcmp(TYPE_URL_PREFIX, str->data, size) != 0) {",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1160,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(str)",
          "new_text": null,
          "old_line_content": "  size_t size = strlen(str);",
          "new_line_content": "  zval ret;",
          "content_same": false
        },
        {
          "line": 1161,
          "old_api": "memcmp",
          "new_api": null,
          "old_text": "memcmp(view.data, str, size)",
          "new_text": null,
          "old_line_content": "  return view.size == size && memcmp(view.data, str, size) == 0;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1165,
          "old_api": "getThis",
          "new_api": null,
          "old_text": "getThis()",
          "new_text": null,
          "old_line_content": "  Message* intern = (Message*)Z_OBJ_P(getThis());",
          "new_line_content": "        NULL, \"Type url needs to be type.googleapis.com/fully-qualified\", 0);",
          "content_same": false
        },
        {
          "line": 1166,
          "old_api": "Message_getval",
          "new_api": null,
          "old_text": "Message_getval(intern, \"type_url\")",
          "new_text": null,
          "old_line_content": "  upb_StringView type_url = Message_getval(intern, \"type_url\").str_val;",
          "new_line_content": "    return;",
          "content_same": false
        },
        {
          "line": 1167,
          "old_api": "Message_getval",
          "new_api": null,
          "old_text": "Message_getval(intern, \"value\")",
          "new_text": null,
          "old_line_content": "  upb_StringView value = Message_getval(intern, \"value\").str_val;",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 1168,
          "old_api": "DescriptorPool_GetSymbolTable",
          "new_api": null,
          "old_text": "DescriptorPool_GetSymbolTable()",
          "new_text": null,
          "old_line_content": "  upb_DefPool* symtab = DescriptorPool_GetSymbolTable();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1174,
          "old_api": "TryStripUrlPrefix",
          "new_api": null,
          "old_text": "TryStripUrlPrefix(&type_url)",
          "new_text": null,
          "old_line_content": "  if (!TryStripUrlPrefix(&type_url)) {",
          "new_line_content": "        NULL, \"Specified message in any hasn't been added to descriptor pool\",",
          "content_same": false
        },
        {
          "line": 1175,
          "old_api": "zend_throw_exception",
          "new_api": null,
          "old_text": "zend_throw_exception(\n        NULL, \"Type url needs to be type.googleapis.com/fully-qualified\", 0)",
          "new_text": null,
          "old_line_content": "    zend_throw_exception(",
          "new_line_content": "        0);",
          "content_same": false
        },
        {
          "line": 1192,
          "old_api": "Message_create",
          "new_api": null,
          "old_text": "Message_create(desc->class_entry)",
          "new_text": null,
          "old_line_content": "  zend_object* obj = Message_create(desc->class_entry);",
          "new_line_content": "    return;",
          "content_same": false
        },
        {
          "line": 1194,
          "old_api": "Message_Initialize",
          "new_api": null,
          "old_text": "Message_Initialize(msg, desc)",
          "new_text": null,
          "old_line_content": "  Message_Initialize(msg, desc);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1195,
          "old_api": "ZVAL_OBJ",
          "new_api": null,
          "old_text": "ZVAL_OBJ(&ret, obj)",
          "new_text": null,
          "old_line_content": "  ZVAL_OBJ(&ret, obj);",
          "new_line_content": "  // Fuse since the parsed message could alias \"value\".",
          "content_same": false
        },
        {
          "line": 1199,
          "old_api": "upb_MessageDef_MiniTable",
          "new_api": null,
          "old_text": "upb_MessageDef_MiniTable(desc->msgdef)",
          "new_text": null,
          "old_line_content": "                 upb_MessageDef_MiniTable(desc->msgdef), NULL, 0,",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 688,
          "old_api": "Arena_Get",
          "new_api": null,
          "old_text": "Arena_Get(&intern->arena)",
          "new_text": null,
          "old_line_content": "  upb_Arena* arena = Arena_Get(&intern->arena);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1200,
          "old_api": "Arena_Get",
          "new_api": null,
          "old_text": "Arena_Get(&msg->arena)",
          "new_text": null,
          "old_line_content": "                 Arena_Get(&msg->arena)) != kUpb_DecodeStatus_Ok) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 690,
          "old_api": "ZEND_NUM_ARGS",
          "new_api": null,
          "old_text": "ZEND_NUM_ARGS()",
          "new_text": null,
          "old_line_content": "  if (zend_parse_parameters(ZEND_NUM_ARGS(), \"s\", &data, &data_len) ==",
          "new_line_content": "      FAILURE) {",
          "content_same": false
        },
        {
          "line": 1201,
          "old_api": "zend_throw_exception_ex",
          "new_api": null,
          "old_text": "zend_throw_exception_ex(NULL, 0, \"Error occurred during parsing\")",
          "new_text": null,
          "old_line_content": "    zend_throw_exception_ex(NULL, 0, \"Error occurred during parsing\");",
          "new_line_content": "PHP_METHOD(google_protobuf_Any, pack) {",
          "content_same": false
        },
        {
          "line": 1207,
          "old_api": "Arena_Get",
          "new_api": null,
          "old_text": "Arena_Get(&msg->arena)",
          "new_text": null,
          "old_line_content": "  upb_Arena_Fuse(Arena_Get(&intern->arena), Arena_Get(&msg->arena));",
          "new_line_content": "  upb_StringView type_url;",
          "content_same": false
        },
        {
          "line": 697,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(data_copy, data, data_len)",
          "new_text": null,
          "old_line_content": "  memcpy(data_copy, data, data_len);",
          "new_line_content": "    return;",
          "content_same": false
        },
        {
          "line": 1209,
          "old_api": "RETURN_COPY_VALUE",
          "new_api": null,
          "old_text": "RETURN_COPY_VALUE(&ret)",
          "new_text": null,
          "old_line_content": "  RETURN_COPY_VALUE(&ret);",
          "new_line_content": "  char* buf;",
          "content_same": false
        },
        {
          "line": 699,
          "old_api": "upb_Decode",
          "new_api": null,
          "old_text": "upb_Decode(data_copy, data_len, intern->msg, l, NULL, 0, arena)",
          "new_text": null,
          "old_line_content": "  if (upb_Decode(data_copy, data_len, intern->msg, l, NULL, 0, arena) !=",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 701,
          "old_api": "zend_throw_exception_ex",
          "new_api": null,
          "old_text": "zend_throw_exception_ex(NULL, 0, \"Error occurred during parsing\")",
          "new_text": null,
          "old_line_content": "    zend_throw_exception_ex(NULL, 0, \"Error occurred during parsing\");",
          "new_line_content": "/**",
          "content_same": false
        },
        {
          "line": 1213,
          "old_api": "getThis",
          "new_api": null,
          "old_text": "getThis()",
          "new_text": null,
          "old_line_content": "  Message* intern = (Message*)Z_OBJ_P(getThis());",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 1214,
          "old_api": "Arena_Get",
          "new_api": null,
          "old_text": "Arena_Get(&intern->arena)",
          "new_text": null,
          "old_line_content": "  upb_Arena* arena = Arena_Get(&intern->arena);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1222,
          "old_api": "ZEND_NUM_ARGS",
          "new_api": null,
          "old_text": "ZEND_NUM_ARGS()",
          "new_text": null,
          "old_line_content": "  if (zend_parse_parameters(ZEND_NUM_ARGS(), \"o\", &val) == FAILURE) {",
          "new_line_content": "  // Serialize and set value.",
          "content_same": false
        },
        {
          "line": 713,
          "old_api": "getThis",
          "new_api": null,
          "old_text": "getThis()",
          "new_text": null,
          "old_line_content": "  Message* intern = (Message*)Z_OBJ_P(getThis());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 714,
          "old_api": "upb_MessageDef_MiniTable",
          "new_api": null,
          "old_text": "upb_MessageDef_MiniTable(intern->desc->msgdef)",
          "new_text": null,
          "old_line_content": "  const upb_MiniTable* l = upb_MessageDef_MiniTable(intern->desc->msgdef);",
          "new_line_content": "  upb_EncodeStatus status =",
          "content_same": false
        },
        {
          "line": 1226,
          "old_api": "Z_OBJCE_P",
          "new_api": null,
          "old_text": "Z_OBJCE_P(val)",
          "new_text": null,
          "old_line_content": "  if (!instanceof_function(Z_OBJCE_P(val), message_ce)) {",
          "new_line_content": "                 arena, &pb, &value.size);",
          "content_same": false
        },
        {
          "line": 1231,
          "old_api": "Z_OBJ_P",
          "new_api": null,
          "old_text": "Z_OBJ_P(val)",
          "new_text": null,
          "old_line_content": "  msg = (Message*)Z_OBJ_P(val);",
          "new_line_content": "  // Set type url: type_url_prefix + fully_qualified_name",
          "content_same": false
        },
        {
          "line": 721,
          "old_api": "Message_checkEncodeStatus",
          "new_api": null,
          "old_text": "Message_checkEncodeStatus(status)",
          "new_text": null,
          "old_line_content": "  if (!Message_checkEncodeStatus(status)) return;",
          "new_line_content": "    return;",
          "content_same": false
        },
        {
          "line": 1240,
          "old_api": "StringVal",
          "new_api": null,
          "old_text": "StringVal(value)",
          "new_text": null,
          "old_line_content": "  Message_setval(intern, \"value\", StringVal(value));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 729,
          "old_api": "RETVAL_STRINGL",
          "new_api": null,
          "old_text": "RETVAL_STRINGL(data, size)",
          "new_text": null,
          "old_line_content": "  RETVAL_STRINGL(data, size);",
          "new_line_content": " * Message::mergeFromJsonString()",
          "content_same": false
        },
        {
          "line": 730,
          "old_api": "upb_Arena_Free",
          "new_api": null,
          "old_text": "upb_Arena_Free(tmp_arena)",
          "new_text": null,
          "old_line_content": "  upb_Arena_Free(tmp_arena);",
          "new_line_content": " *",
          "content_same": false
        },
        {
          "line": 1244,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(full_name)",
          "new_text": null,
          "old_line_content": "  type_url.size = strlen(TYPE_URL_PREFIX) + strlen(full_name);",
          "new_line_content": "  zend_class_entry* klass = NULL;",
          "content_same": false
        },
        {
          "line": 1245,
          "old_api": "upb_Arena_Malloc",
          "new_api": null,
          "old_text": "upb_Arena_Malloc(arena, type_url.size + 1)",
          "new_text": null,
          "old_line_content": "  buf = upb_Arena_Malloc(arena, type_url.size + 1);",
          "new_line_content": "  const upb_MessageDef* m;",
          "content_same": false
        },
        {
          "line": 1246,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(TYPE_URL_PREFIX)",
          "new_text": null,
          "old_line_content": "  memcpy(buf, TYPE_URL_PREFIX, strlen(TYPE_URL_PREFIX));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1249,
          "old_api": "StringVal",
          "new_api": null,
          "old_text": "StringVal(type_url)",
          "new_text": null,
          "old_line_content": "  Message_setval(intern, \"type_url\", StringVal(type_url));",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 740,
          "old_api": "getThis",
          "new_api": null,
          "old_text": "getThis()",
          "new_text": null,
          "old_line_content": "  Message* intern = (Message*)Z_OBJ_P(getThis());",
          "new_line_content": "  zend_bool ignore_json_unknown = false;",
          "content_same": false
        },
        {
          "line": 1253,
          "old_api": "getThis",
          "new_api": null,
          "old_text": "getThis()",
          "new_text": null,
          "old_line_content": "  Message* intern = (Message*)Z_OBJ_P(getThis());",
          "new_line_content": "  if (m == NULL) {",
          "content_same": false
        },
        {
          "line": 744,
          "old_api": "Arena_Get",
          "new_api": null,
          "old_text": "Arena_Get(&intern->arena)",
          "new_text": null,
          "old_line_content": "  upb_Arena* arena = Arena_Get(&intern->arena);",
          "new_line_content": "                            &ignore_json_unknown) == FAILURE) {",
          "content_same": false
        },
        {
          "line": 749,
          "old_api": "ZEND_NUM_ARGS",
          "new_api": null,
          "old_text": "ZEND_NUM_ARGS()",
          "new_text": null,
          "old_line_content": "  if (zend_parse_parameters(ZEND_NUM_ARGS(), \"s|b\", &data, &data_len,",
          "new_line_content": "    options |= upb_JsonDecode_IgnoreUnknown;",
          "content_same": false
        },
        {
          "line": 1265,
          "old_api": "RETURN_BOOL",
          "new_api": null,
          "old_text": "RETURN_BOOL(false)",
          "new_text": null,
          "old_line_content": "    RETURN_BOOL(false);",
          "new_line_content": "  zend_string* classname_str =",
          "content_same": false
        },
        {
          "line": 755,
          "old_api": "upb_Arena_Malloc",
          "new_api": null,
          "old_text": "upb_Arena_Malloc(arena, data_len + 1)",
          "new_text": null,
          "old_line_content": "  data_copy = upb_Arena_Malloc(arena, data_len + 1);",
          "new_line_content": "                      &status)) {",
          "content_same": false
        },
        {
          "line": 1269,
          "old_api": "upb_MessageDef_FullName",
          "new_api": null,
          "old_text": "upb_MessageDef_FullName(m)",
          "new_text": null,
          "old_line_content": "              StrViewEq(type_url, upb_MessageDef_FullName(m)));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1273,
          "old_api": "getThis",
          "new_api": null,
          "old_text": "getThis()",
          "new_text": null,
          "old_line_content": "  Message* intern = (Message*)Z_OBJ_P(getThis());",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 763,
          "old_api": "upb_Status_Clear",
          "new_api": null,
          "old_text": "upb_Status_Clear(&status)",
          "new_text": null,
          "old_line_content": "  upb_Status_Clear(&status);",
          "new_line_content": " * Message::serializeToJsonString()",
          "content_same": false
        },
        {
          "line": 764,
          "old_api": "upb_JsonDecode",
          "new_api": null,
          "old_text": "upb_JsonDecode(data_copy, data_len, intern->msg, intern->desc->msgdef,\n                      DescriptorPool_GetSymbolTable(), options, arena,\n                      &status)",
          "new_text": null,
          "old_line_content": "  if (!upb_JsonDecode(data_copy, data_len, intern->msg, intern->desc->msgdef,",
          "new_line_content": " *",
          "content_same": false
        },
        {
          "line": 765,
          "old_api": "DescriptorPool_GetSymbolTable",
          "new_api": null,
          "old_text": "DescriptorPool_GetSymbolTable()",
          "new_text": null,
          "old_line_content": "                      DescriptorPool_GetSymbolTable(), options, arena,",
          "new_line_content": " * Serializes this object to JSON.",
          "content_same": false
        },
        {
          "line": 1278,
          "old_api": "zend_lookup_class",
          "new_api": null,
          "old_text": "zend_lookup_class(classname_str)",
          "new_text": null,
          "old_line_content": "  zend_class_entry* date_interface_ce = zend_lookup_class(classname_str);",
          "new_line_content": "    return;",
          "content_same": false
        },
        {
          "line": 767,
          "old_api": "zend_throw_exception_ex",
          "new_api": null,
          "old_text": "zend_throw_exception_ex(NULL, 0, \"Error occurred during parsing: %s\",\n                            upb_Status_ErrorMessage(&status))",
          "new_text": null,
          "old_line_content": "    zend_throw_exception_ex(NULL, 0, \"Error occurred during parsing: %s\",",
          "new_line_content": " */",
          "content_same": false
        },
        {
          "line": 768,
          "old_api": "upb_Status_ErrorMessage",
          "new_api": null,
          "old_text": "upb_Status_ErrorMessage(&status)",
          "new_text": null,
          "old_line_content": "                            upb_Status_ErrorMessage(&status));",
          "new_line_content": "PHP_METHOD(Message, serializeToJsonString) {",
          "content_same": false
        },
        {
          "line": 1279,
          "old_api": "zend_string_release",
          "new_api": null,
          "old_text": "zend_string_release(classname_str)",
          "new_text": null,
          "old_line_content": "  zend_string_release(classname_str);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 1282,
          "old_api": "zend_error",
          "new_api": null,
          "old_text": "zend_error(E_ERROR, \"Make sure date extension is enabled.\")",
          "new_text": null,
          "old_line_content": "    zend_error(E_ERROR, \"Make sure date extension is enabled.\");",
          "new_line_content": "  {",
          "content_same": false
        },
        {
          "line": 780,
          "old_api": "getThis",
          "new_api": null,
          "old_text": "getThis()",
          "new_text": null,
          "old_line_content": "  Message* intern = (Message*)Z_OBJ_P(getThis());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1299,
          "old_api": "EG",
          "new_api": null,
          "old_text": "EG(function_table)",
          "new_text": null,
          "old_line_content": "    if (call_user_function(EG(function_table), NULL, &function_name, &retval, 1,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1301,
          "old_api": "Convert_PhpToUpb",
          "new_api": null,
          "old_text": "Convert_PhpToUpb(&retval, &timestamp_seconds,\n                          TypeInfo_FromType(kUpb_CType_Int64), NULL)",
          "new_text": null,
          "old_line_content": "        !Convert_PhpToUpb(&retval, &timestamp_seconds,",
          "new_line_content": "  {",
          "content_same": false
        },
        {
          "line": 1302,
          "old_api": "TypeInfo_FromType",
          "new_api": null,
          "old_text": "TypeInfo_FromType(kUpb_CType_Int64)",
          "new_text": null,
          "old_line_content": "                          TypeInfo_FromType(kUpb_CType_Int64), NULL)) {",
          "new_line_content": "    zval retval;",
          "content_same": false
        },
        {
          "line": 1303,
          "old_api": "zend_error",
          "new_api": null,
          "old_text": "zend_error(E_ERROR, \"Cannot get timestamp from DateTime.\")",
          "new_text": null,
          "old_line_content": "      zend_error(E_ERROR, \"Cannot get timestamp from DateTime.\");",
          "new_line_content": "    zval function_name;",
          "content_same": false
        },
        {
          "line": 796,
          "old_api": "upb_Status_Clear",
          "new_api": null,
          "old_text": "upb_Status_Clear(&status)",
          "new_text": null,
          "old_line_content": "  upb_Status_Clear(&status);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 797,
          "old_api": "upb_JsonEncode",
          "new_api": null,
          "old_text": "upb_JsonEncode(intern->msg, intern->desc->msgdef,\n                        DescriptorPool_GetSymbolTable(), options, buf,\n                        sizeof(buf), &status)",
          "new_text": null,
          "old_line_content": "  size = upb_JsonEncode(intern->msg, intern->desc->msgdef,",
          "new_line_content": "  if (size >= sizeof(buf)) {",
          "content_same": false
        },
        {
          "line": 1308,
          "old_api": "zval_dtor",
          "new_api": null,
          "old_text": "zval_dtor(&function_name)",
          "new_text": null,
          "old_line_content": "    zval_dtor(&function_name);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 801,
          "old_api": "upb_Status_IsOk",
          "new_api": null,
          "old_text": "upb_Status_IsOk(&status)",
          "new_text": null,
          "old_line_content": "  if (!upb_Status_IsOk(&status)) {",
          "new_line_content": "                   &status);",
          "content_same": false
        },
        {
          "line": 804,
          "old_api": "upb_Status_ErrorMessage",
          "new_api": null,
          "old_text": "upb_Status_ErrorMessage(&status)",
          "new_text": null,
          "old_line_content": "                            upb_Status_ErrorMessage(&status));",
          "new_line_content": "  } else {",
          "content_same": false
        },
        {
          "line": 809,
          "old_api": "malloc",
          "new_api": null,
          "old_text": "malloc(size + 1)",
          "new_text": null,
          "old_line_content": "    char* buf2 = malloc(size + 1);",
          "new_line_content": "/**",
          "content_same": false
        },
        {
          "line": 810,
          "old_api": "upb_JsonEncode",
          "new_api": null,
          "old_text": "upb_JsonEncode(intern->msg, intern->desc->msgdef,\n                   DescriptorPool_GetSymbolTable(), options, buf2, size + 1,\n                   &status)",
          "new_text": null,
          "old_line_content": "    upb_JsonEncode(intern->msg, intern->desc->msgdef,",
          "new_line_content": " * Message::readWrapperValue()",
          "content_same": false
        },
        {
          "line": 811,
          "old_api": "DescriptorPool_GetSymbolTable",
          "new_api": null,
          "old_text": "DescriptorPool_GetSymbolTable()",
          "new_text": null,
          "old_line_content": "                   DescriptorPool_GetSymbolTable(), options, buf2, size + 1,",
          "new_line_content": " *",
          "content_same": false
        },
        {
          "line": 813,
          "old_api": "RETVAL_STRINGL",
          "new_api": null,
          "old_text": "RETVAL_STRINGL(buf2, size)",
          "new_text": null,
          "old_line_content": "    RETVAL_STRINGL(buf2, size);",
          "new_line_content": " * methods for wrapper fields, eg.",
          "content_same": false
        },
        {
          "line": 814,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(buf2)",
          "new_text": null,
          "old_line_content": "    free(buf2);",
          "new_line_content": " *",
          "content_same": false
        },
        {
          "line": 1327,
          "old_api": "Convert_PhpToUpb",
          "new_api": null,
          "old_text": "Convert_PhpToUpb(&retval, &timestamp_nanos,\n                          TypeInfo_FromType(kUpb_CType_Int32), NULL)",
          "new_text": null,
          "old_line_content": "        !Convert_PhpToUpb(&retval, &timestamp_nanos,",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 816,
          "old_api": "RETVAL_STRINGL",
          "new_api": null,
          "old_text": "RETVAL_STRINGL(buf, size)",
          "new_text": null,
          "old_line_content": "    RETVAL_STRINGL(buf, size);",
          "new_line_content": " *   {",
          "content_same": false
        },
        {
          "line": 1328,
          "old_api": "TypeInfo_FromType",
          "new_api": null,
          "old_text": "TypeInfo_FromType(kUpb_CType_Int32)",
          "new_text": null,
          "old_line_content": "                          TypeInfo_FromType(kUpb_CType_Int32), NULL)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1335,
          "old_api": "zval_dtor",
          "new_api": null,
          "old_text": "zval_dtor(&retval)",
          "new_text": null,
          "old_line_content": "    zval_dtor(&retval);",
          "new_line_content": "PHP_METHOD(google_protobuf_Timestamp, toDateTime) {",
          "content_same": false
        },
        {
          "line": 1340,
          "old_api": "Message_setval",
          "new_api": null,
          "old_text": "Message_setval(intern, \"seconds\", timestamp_seconds)",
          "new_text": null,
          "old_line_content": "  Message_setval(intern, \"seconds\", timestamp_seconds);",
          "new_line_content": "  // Get formatted time string.",
          "content_same": false
        },
        {
          "line": 1341,
          "old_api": "Message_setval",
          "new_api": null,
          "old_text": "Message_setval(intern, \"nanos\", timestamp_nanos)",
          "new_text": null,
          "old_line_content": "  Message_setval(intern, \"nanos\", timestamp_nanos);",
          "new_line_content": "  char formatted_time[32];",
          "content_same": false
        },
        {
          "line": 1343,
          "old_api": "RETURN_NULL",
          "new_api": null,
          "old_text": "RETURN_NULL()",
          "new_text": null,
          "old_line_content": "  RETURN_NULL();",
          "new_line_content": "           seconds.int64_val, nanos.int32_val / 1000);",
          "content_same": false
        },
        {
          "line": 834,
          "old_api": "getThis",
          "new_api": null,
          "old_text": "getThis()",
          "new_text": null,
          "old_line_content": "  Message* intern = (Message*)Z_OBJ_P(getThis());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1347,
          "old_api": "getThis",
          "new_api": null,
          "old_text": "getThis()",
          "new_text": null,
          "old_line_content": "  Message* intern = (Message*)Z_OBJ_P(getThis());",
          "new_line_content": "  zval function_name;",
          "content_same": false
        },
        {
          "line": 1348,
          "old_api": "Message_getval",
          "new_api": null,
          "old_text": "Message_getval(intern, \"seconds\")",
          "new_text": null,
          "old_line_content": "  upb_MessageValue seconds = Message_getval(intern, \"seconds\");",
          "new_line_content": "  zval format_string;",
          "content_same": false
        },
        {
          "line": 1349,
          "old_api": "Message_getval",
          "new_api": null,
          "old_text": "Message_getval(intern, \"nanos\")",
          "new_text": null,
          "old_line_content": "  upb_MessageValue nanos = Message_getval(intern, \"nanos\");",
          "new_line_content": "  zval formatted_time_php;",
          "content_same": false
        },
        {
          "line": 839,
          "old_api": "ZEND_NUM_ARGS",
          "new_api": null,
          "old_text": "ZEND_NUM_ARGS()",
          "new_text": null,
          "old_line_content": "  if (zend_parse_parameters(ZEND_NUM_ARGS(), \"s\", &member, &size) == FAILURE) {",
          "new_line_content": "    return;",
          "content_same": false
        },
        {
          "line": 843,
          "old_api": "upb_MessageDef_FindFieldByNameWithSize",
          "new_api": null,
          "old_text": "upb_MessageDef_FindFieldByNameWithSize(intern->desc->msgdef, member,\n                                             size)",
          "new_text": null,
          "old_line_content": "  f = upb_MessageDef_FindFieldByNameWithSize(intern->desc->msgdef, member,",
          "new_line_content": "    const upb_Message* wrapper =",
          "content_same": false
        },
        {
          "line": 848,
          "old_api": "upb_MessageDef_FullName",
          "new_api": null,
          "old_text": "upb_MessageDef_FullName(intern->desc->msgdef)",
          "new_text": null,
          "old_line_content": "                            upb_MessageDef_FullName(intern->desc->msgdef),",
          "new_line_content": "    zval ret;",
          "content_same": false
        },
        {
          "line": 1363,
          "old_api": "ZVAL_STRING",
          "new_api": null,
          "old_text": "ZVAL_STRING(&format_string, \"U.u\")",
          "new_text": null,
          "old_line_content": "  ZVAL_STRING(&format_string, \"U.u\");",
          "new_line_content": "    return;",
          "content_same": false
        },
        {
          "line": 1364,
          "old_api": "ZVAL_STRING",
          "new_api": null,
          "old_text": "ZVAL_STRING(&formatted_time_php, formatted_time)",
          "new_text": null,
          "old_line_content": "  ZVAL_STRING(&formatted_time_php, formatted_time);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 853,
          "old_api": "upb_Message_HasFieldByDef",
          "new_api": null,
          "old_text": "upb_Message_HasFieldByDef(intern->msg, f)",
          "new_text": null,
          "old_line_content": "  if (upb_Message_HasFieldByDef(intern->msg, f)) {",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 855,
          "old_api": "upb_Message_GetFieldByDef",
          "new_api": null,
          "old_text": "upb_Message_GetFieldByDef(intern->msg, f)",
          "new_text": null,
          "old_line_content": "        upb_Message_GetFieldByDef(intern->msg, f).msg_val;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 856,
          "old_api": "upb_FieldDef_MessageSubDef",
          "new_api": null,
          "old_text": "upb_FieldDef_MessageSubDef(f)",
          "new_text": null,
          "old_line_content": "    const upb_MessageDef* m = upb_FieldDef_MessageSubDef(f);",
          "new_line_content": "/**",
          "content_same": false
        },
        {
          "line": 857,
          "old_api": "upb_MessageDef_FindFieldByNumber",
          "new_api": null,
          "old_text": "upb_MessageDef_FindFieldByNumber(m, 1)",
          "new_text": null,
          "old_line_content": "    const upb_FieldDef* val_f = upb_MessageDef_FindFieldByNumber(m, 1);",
          "new_line_content": " * Message::writeWrapperValue()",
          "content_same": false
        },
        {
          "line": 858,
          "old_api": "upb_Message_GetFieldByDef",
          "new_api": null,
          "old_text": "upb_Message_GetFieldByDef(wrapper, val_f)",
          "new_text": null,
          "old_line_content": "    upb_MessageValue msgval = upb_Message_GetFieldByDef(wrapper, val_f);",
          "new_line_content": " *",
          "content_same": false
        },
        {
          "line": 1371,
          "old_api": "EG",
          "new_api": null,
          "old_text": "EG(function_table)",
          "new_text": null,
          "old_line_content": "  if (call_user_function(EG(function_table), NULL, &function_name, &datetime, 2,",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 860,
          "old_api": "TypeInfo_Get",
          "new_api": null,
          "old_text": "TypeInfo_Get(val_f)",
          "new_text": null,
          "old_line_content": "    Convert_UpbToPhp(msgval, &ret, TypeInfo_Get(val_f), &intern->arena);",
          "new_line_content": " * generated methods for wrapper fields, eg.",
          "content_same": false
        },
        {
          "line": 861,
          "old_api": "RETURN_COPY_VALUE",
          "new_api": null,
          "old_text": "RETURN_COPY_VALUE(&ret)",
          "new_text": null,
          "old_line_content": "    RETURN_COPY_VALUE(&ret);",
          "new_line_content": " *",
          "content_same": false
        },
        {
          "line": 1373,
          "old_api": "zend_error",
          "new_api": null,
          "old_text": "zend_error(E_ERROR, \"Cannot create DateTime.\")",
          "new_text": null,
          "old_line_content": "    zend_error(E_ERROR, \"Cannot create DateTime.\");",
          "new_line_content": "#include \"wkt.inc\"",
          "content_same": false
        },
        {
          "line": 863,
          "old_api": "RETURN_NULL",
          "new_api": null,
          "old_text": "RETURN_NULL()",
          "new_text": null,
          "old_line_content": "    RETURN_NULL();",
          "new_line_content": " *   public function setDoubleValueUnwrapped($var)",
          "content_same": false
        },
        {
          "line": 1377,
          "old_api": "zval_dtor",
          "new_api": null,
          "old_text": "zval_dtor(&function_name)",
          "new_text": null,
          "old_line_content": "  zval_dtor(&function_name);",
          "new_line_content": " *",
          "content_same": false
        },
        {
          "line": 1378,
          "old_api": "zval_dtor",
          "new_api": null,
          "old_text": "zval_dtor(&format_string)",
          "new_text": null,
          "old_line_content": "  zval_dtor(&format_string);",
          "new_line_content": " * Called when the C extension is loaded to register all types.",
          "content_same": false
        },
        {
          "line": 1379,
          "old_api": "zval_dtor",
          "new_api": null,
          "old_text": "zval_dtor(&formatted_time_php)",
          "new_text": null,
          "old_line_content": "  zval_dtor(&formatted_time_php);",
          "new_line_content": " */",
          "content_same": false
        },
        {
          "line": 1381,
          "old_api": "Z_OBJ",
          "new_api": null,
          "old_text": "Z_OBJ(datetime)",
          "new_text": null,
          "old_line_content": "  ZVAL_OBJ(return_value, Z_OBJ(datetime));",
          "new_line_content": "  zend_class_entry tmp_ce;",
          "content_same": false
        },
        {
          "line": 883,
          "old_api": "getThis",
          "new_api": null,
          "old_text": "getThis()",
          "new_text": null,
          "old_line_content": "  Message* intern = (Message*)Z_OBJ_P(getThis());",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 884,
          "old_api": "Arena_Get",
          "new_api": null,
          "old_text": "Arena_Get(&intern->arena)",
          "new_text": null,
          "old_line_content": "  upb_Arena* arena = Arena_Get(&intern->arena);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1395,
          "old_api": "INIT_CLASS_ENTRY",
          "new_api": null,
          "old_text": "INIT_CLASS_ENTRY(tmp_ce, \"Google\\\\Protobuf\\\\Internal\\\\Message\",\n                   Message_methods)",
          "new_text": null,
          "old_line_content": "  INIT_CLASS_ENTRY(tmp_ce, \"Google\\\\Protobuf\\\\Internal\\\\Message\",",
          "new_line_content": "  h->has_property = Message_has_property;",
          "content_same": false
        },
        {
          "line": 1398,
          "old_api": "zend_register_internal_class",
          "new_api": null,
          "old_text": "zend_register_internal_class(&tmp_ce)",
          "new_text": null,
          "old_line_content": "  message_ce = zend_register_internal_class(&tmp_ce);",
          "new_line_content": "  h->get_property_ptr_ptr = Message_get_property_ptr_ptr;",
          "content_same": false
        },
        {
          "line": 891,
          "old_api": "ZEND_NUM_ARGS",
          "new_api": null,
          "old_text": "ZEND_NUM_ARGS()",
          "new_text": null,
          "old_line_content": "  if (zend_parse_parameters(ZEND_NUM_ARGS(), \"sz\", &member, &size, &val) ==",
          "new_line_content": "                            member);",
          "content_same": false
        },
        {
          "line": 1412,
          "old_api": "WellKnownTypes_ModuleInit",
          "new_api": null,
          "old_text": "WellKnownTypes_ModuleInit()",
          "new_text": null,
          "old_line_content": "  WellKnownTypes_ModuleInit(); /* From wkt.inc. */",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 901,
          "old_api": "upb_MessageDef_FullName",
          "new_api": null,
          "old_text": "upb_MessageDef_FullName(intern->desc->msgdef)",
          "new_text": null,
          "old_line_content": "                            upb_MessageDef_FullName(intern->desc->msgdef),",
          "new_line_content": "  } else {",
          "content_same": false
        },
        {
          "line": 907,
          "old_api": "ZVAL_DEREF",
          "new_api": null,
          "old_text": "ZVAL_DEREF(val)",
          "new_text": null,
          "old_line_content": "    ZVAL_DEREF(val);",
          "new_line_content": "      return;  // Error is already set.",
          "content_same": false
        },
        {
          "line": 913,
          "old_api": "upb_FieldDef_MessageSubDef",
          "new_api": null,
          "old_text": "upb_FieldDef_MessageSubDef(f)",
          "new_text": null,
          "old_line_content": "    const upb_MessageDef* m = upb_FieldDef_MessageSubDef(f);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 914,
          "old_api": "upb_MessageDef_FindFieldByNumber",
          "new_api": null,
          "old_text": "upb_MessageDef_FindFieldByNumber(m, 1)",
          "new_text": null,
          "old_line_content": "    const upb_FieldDef* val_f = upb_MessageDef_FindFieldByNumber(m, 1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 917,
          "old_api": "TypeInfo_Get",
          "new_api": null,
          "old_text": "TypeInfo_Get(val_f)",
          "new_text": null,
          "old_line_content": "    if (!Convert_PhpToUpb(val, &msgval, TypeInfo_Get(val_f), arena)) {",
          "new_line_content": " *",
          "content_same": false
        },
        {
          "line": 921,
          "old_api": "upb_Message_Mutable",
          "new_api": null,
          "old_text": "upb_Message_Mutable(intern->msg, f, arena)",
          "new_text": null,
          "old_line_content": "    wrapper = upb_Message_Mutable(intern->msg, f, arena).msg;",
          "new_line_content": " * @return string The field name in this oneof that is currently set.",
          "content_same": false
        },
        {
          "line": 922,
          "old_api": "upb_Message_SetFieldByDef",
          "new_api": null,
          "old_text": "upb_Message_SetFieldByDef(wrapper, val_f, msgval, arena)",
          "new_text": null,
          "old_line_content": "    upb_Message_SetFieldByDef(wrapper, val_f, msgval, arena);",
          "new_line_content": " */",
          "content_same": false
        },
        {
          "line": 941,
          "old_api": "ZEND_NUM_ARGS",
          "new_api": null,
          "old_text": "ZEND_NUM_ARGS()",
          "new_text": null,
          "old_line_content": "  if (zend_parse_parameters(ZEND_NUM_ARGS(), \"s\", &name, &len) == FAILURE) {",
          "new_line_content": "    return;",
          "content_same": false
        },
        {
          "line": 946,
          "old_api": "upb_MessageDef_FindOneofByNameWithSize",
          "new_api": null,
          "old_text": "upb_MessageDef_FindOneofByNameWithSize(intern->desc->msgdef, name, len)",
          "new_text": null,
          "old_line_content": "      upb_MessageDef_FindOneofByNameWithSize(intern->desc->msgdef, name, len);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 949,
          "old_api": "zend_throw_exception_ex",
          "new_api": null,
          "old_text": "zend_throw_exception_ex(NULL, 0, \"Message %s has no oneof %s\",\n                            upb_MessageDef_FullName(intern->desc->msgdef),\n                            name)",
          "new_text": null,
          "old_line_content": "    zend_throw_exception_ex(NULL, 0, \"Message %s has no oneof %s\",",
          "new_line_content": " * Message::hasOneof()",
          "content_same": false
        },
        {
          "line": 950,
          "old_api": "upb_MessageDef_FullName",
          "new_api": null,
          "old_text": "upb_MessageDef_FullName(intern->desc->msgdef)",
          "new_text": null,
          "old_line_content": "                            upb_MessageDef_FullName(intern->desc->msgdef),",
          "new_line_content": " *",
          "content_same": false
        },
        {
          "line": 955,
          "old_api": "upb_Message_WhichOneof",
          "new_api": null,
          "old_text": "upb_Message_WhichOneof(intern->msg, oneof)",
          "new_text": null,
          "old_line_content": "  field = upb_Message_WhichOneof(intern->msg, oneof);",
          "new_line_content": " *    {",
          "content_same": false
        },
        {
          "line": 956,
          "old_api": "upb_FieldDef_Name",
          "new_api": null,
          "old_text": "upb_FieldDef_Name(field)",
          "new_text": null,
          "old_line_content": "  RETURN_STRING(field ? upb_FieldDef_Name(field) : \"\");",
          "new_line_content": " *        return $this->hasOneof(10);",
          "content_same": false
        },
        {
          "line": 977,
          "old_api": "ZEND_NUM_ARGS",
          "new_api": null,
          "old_text": "ZEND_NUM_ARGS()",
          "new_text": null,
          "old_line_content": "  if (zend_parse_parameters(ZEND_NUM_ARGS(), \"l\", &field_num) == FAILURE) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 981,
          "old_api": "upb_MessageDef_FindFieldByNumber",
          "new_api": null,
          "old_text": "upb_MessageDef_FindFieldByNumber(intern->desc->msgdef, field_num)",
          "new_text": null,
          "old_line_content": "  f = upb_MessageDef_FindFieldByNumber(intern->desc->msgdef, field_num);",
          "new_line_content": "/**",
          "content_same": false
        },
        {
          "line": 983,
          "old_api": "upb_FieldDef_RealContainingOneof",
          "new_api": null,
          "old_text": "upb_FieldDef_RealContainingOneof(f)",
          "new_text": null,
          "old_line_content": "  if (!f || !upb_FieldDef_RealContainingOneof(f)) {",
          "new_line_content": " *",
          "content_same": false
        },
        {
          "line": 984,
          "old_api": "php_error_docref",
          "new_api": null,
          "old_text": "php_error_docref(NULL, E_USER_ERROR,\n                     \"Internal error, no such oneof field %d\\n\",\n                     (int)field_num)",
          "new_text": null,
          "old_line_content": "    php_error_docref(NULL, E_USER_ERROR,",
          "new_line_content": " * Returns the contents of the given oneof field, given a field number. Called",
          "content_same": false
        },
        {
          "line": 989,
          "old_api": "upb_Message_HasFieldByDef",
          "new_api": null,
          "old_text": "upb_Message_HasFieldByDef(intern->msg, f)",
          "new_text": null,
          "old_line_content": "  RETVAL_BOOL(upb_Message_HasFieldByDef(intern->msg, f));",
          "new_line_content": " *        return $this->readOneof(10);",
          "content_same": false
        },
        {
          "line": 1011,
          "old_api": "ZEND_NUM_ARGS",
          "new_api": null,
          "old_text": "ZEND_NUM_ARGS()",
          "new_text": null,
          "old_line_content": "  if (zend_parse_parameters(ZEND_NUM_ARGS(), \"l\", &field_num) == FAILURE) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1015,
          "old_api": "upb_MessageDef_FindFieldByNumber",
          "new_api": null,
          "old_text": "upb_MessageDef_FindFieldByNumber(intern->desc->msgdef, field_num)",
          "new_text": null,
          "old_line_content": "  f = upb_MessageDef_FindFieldByNumber(intern->desc->msgdef, field_num);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 1017,
          "old_api": "upb_FieldDef_RealContainingOneof",
          "new_api": null,
          "old_text": "upb_FieldDef_RealContainingOneof(f)",
          "new_text": null,
          "old_line_content": "  if (!f || !upb_FieldDef_RealContainingOneof(f)) {",
          "new_line_content": "  {",
          "content_same": false
        },
        {
          "line": 1023,
          "old_api": "upb_FieldDef_IsSubMessage",
          "new_api": null,
          "old_text": "upb_FieldDef_IsSubMessage(f)",
          "new_text": null,
          "old_line_content": "  if (upb_FieldDef_IsSubMessage(f) &&",
          "new_line_content": "}",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 62,
      "total_additions": 147,
      "total_deletions": 151,
      "total_api_changes": 360
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 15,
        "api_related_lines": 360,
        "non_api_lines": 5,
        "non_api_line_numbers": [
          742,
          685,
          758,
          695,
          698
        ]
      }
    },
    "api_calls_before": 437,
    "api_calls_after": 433,
    "diff_info": {
      "added_lines": 2,
      "removed_lines": 13,
      "total_diff_lines": 53
    }
  }
}
{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/protobuf/modified_file/fab7f928b5375a20fd8d33556632128e936ad436",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/protobuf/modified_file/fab7f928b5375a20fd8d33556632128e936ad436/before.cc",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/protobuf/modified_file/fab7f928b5375a20fd8d33556632128e936ad436/after.cc",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/protobuf/modified_file/fab7f928b5375a20fd8d33556632128e936ad436/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 3652,
          "old_api": "MustFlush",
          "new_api": "Flush",
          "old_text": "MustFlush(field)",
          "new_text": "Flush()",
          "old_line_content": "      if (eager_ || MustFlush(field)) {",
          "new_line_content": "        Flush();",
          "content_same": false
        },
        {
          "line": 3686,
          "old_api": "empty",
          "new_api": "GenerateSerializeOneofFields",
          "old_text": "v_.empty()",
          "new_text": "mg_->GenerateSerializeOneofFields(p_, v_)",
          "old_line_content": "      if (!v_.empty()) {",
          "new_line_content": "        mg_->GenerateSerializeOneofFields(p_, v_);",
          "content_same": false
        },
        {
          "line": 3687,
          "old_api": "GenerateSerializeOneofFields",
          "new_api": "clear",
          "old_text": "mg_->GenerateSerializeOneofFields(p_, v_)",
          "new_text": "v_.clear()",
          "old_line_content": "        mg_->GenerateSerializeOneofFields(p_, v_);",
          "new_line_content": "        v_.clear();",
          "content_same": false
        },
        {
          "line": 3696,
          "old_api": "empty",
          "new_api": "containing_oneof",
          "old_text": "v_.empty()",
          "new_text": "field->containing_oneof()",
          "old_line_content": "      return !v_.empty() &&",
          "new_line_content": "             v_[0]->containing_oneof() != field->containing_oneof();",
          "content_same": false
        },
        {
          "line": 3722,
          "old_api": "std::min(current_combined_range_.start, range->start)",
          "new_api": "std::max(current_combined_range_.end, range->end)",
          "old_text": "std::min(current_combined_range_.start, range->start)",
          "new_text": "std::max(current_combined_range_.end, range->end)",
          "old_line_content": "            std::min(current_combined_range_.start, range->start);",
          "new_line_content": "            std::max(current_combined_range_.end, range->end);",
          "content_same": false
        },
        {
          "line": 3769,
          "old_api": "extension_range_count",
          "new_api": "extension_range",
          "old_text": "descriptor_->extension_range_count()",
          "new_text": "descriptor_->extension_range(i)",
          "old_line_content": "  sorted_extensions.reserve(descriptor_->extension_range_count());",
          "new_line_content": "    sorted_extensions.push_back(descriptor_->extension_range(i));",
          "content_same": false
        },
        {
          "line": 3771,
          "old_api": "extension_range",
          "new_api": "end",
          "old_text": "descriptor_->extension_range(i)",
          "new_text": "sorted_extensions.end()",
          "old_line_content": "    sorted_extensions.push_back(descriptor_->extension_range(i));",
          "new_line_content": "  std::sort(sorted_extensions.begin(), sorted_extensions.end(),",
          "content_same": false
        },
        {
          "line": 3774,
          "old_api": "ExtensionRangeSorter",
          "new_api": "format",
          "old_text": "ExtensionRangeSorter()",
          "new_text": "format(\n        \"::_pbi::WeakFieldMap::FieldWriter field_writer(\"\n        \"$weak_field_map$);\\n\")",
          "old_line_content": "            ExtensionRangeSorter());",
          "new_line_content": "    format(",
          "content_same": false
        },
        {
          "line": 3792,
          "old_api": "size",
          "new_api": "field_count",
          "old_text": "sorted_extensions.size()",
          "new_text": "descriptor_->field_count()",
          "old_line_content": "         i < ordered_fields.size() || j < sorted_extensions.size();) {",
          "new_line_content": "          (i < descriptor_->field_count() &&",
          "content_same": false
        },
        {
          "line": 3793,
          "old_api": "size",
          "new_api": "number",
          "old_text": "sorted_extensions.size()",
          "new_text": "ordered_fields[i]->number()",
          "old_line_content": "      if ((j == sorted_extensions.size()) ||",
          "new_line_content": "           ordered_fields[i]->number() < sorted_extensions[j]->start)) {",
          "content_same": false
        },
        {
          "line": 3795,
          "old_api": "number",
          "new_api": "Flush",
          "old_text": "ordered_fields[i]->number()",
          "new_text": "re.Flush()",
          "old_line_content": "           ordered_fields[i]->number() < sorted_extensions[j]->start)) {",
          "new_line_content": "        re.Flush();",
          "content_same": false
        },
        {
          "line": 3797,
          "old_api": "Flush",
          "new_api": "ReplaceIfLarger",
          "old_text": "re.Flush()",
          "new_text": "largest_weak_field.ReplaceIfLarger(field)",
          "old_line_content": "        re.Flush();",
          "new_line_content": "          largest_weak_field.ReplaceIfLarger(field);",
          "content_same": false
        },
        {
          "line": 3798,
          "old_api": "weak",
          "new_api": "PrintFieldComment",
          "old_text": "field->options().weak()",
          "new_text": "PrintFieldComment(format, field)",
          "old_line_content": "        if (field->options().weak()) {",
          "new_line_content": "          PrintFieldComment(format, field);",
          "content_same": false
        },
        {
          "line": 3800,
          "old_api": "PrintFieldComment",
          "new_api": "Release",
          "old_text": "PrintFieldComment(format, field)",
          "new_text": "largest_weak_field.Release()",
          "old_line_content": "          PrintFieldComment(format, field);",
          "new_line_content": "          e.EmitIfNotNull(largest_weak_field.Release());",
          "content_same": false
        },
        {
          "line": 3806,
          "old_api": "Release",
          "new_api": "AddToRange",
          "old_text": "largest_weak_field.Release()",
          "new_text": "re.AddToRange(sorted_extensions[j++])",
          "old_line_content": "        e.EmitIfNotNull(largest_weak_field.Release());",
          "new_line_content": "        re.AddToRange(sorted_extensions[j++]);",
          "content_same": false
        },
        {
          "line": 3815,
          "old_api": "format",
          "new_api": "file",
          "old_text": "format(\"if (PROTOBUF_PREDICT_FALSE($have_unknown_fields$)) {\\n\")",
          "new_text": "descriptor_->file()",
          "old_line_content": "  format(\"if (PROTOBUF_PREDICT_FALSE($have_unknown_fields$)) {\\n\");",
          "new_line_content": "  if (UseUnknownFieldSet(descriptor_->file(), options_)) {",
          "content_same": false
        },
        {
          "line": 3816,
          "old_api": "Indent",
          "new_api": "format",
          "old_text": "format.Indent()",
          "new_text": "format(\n        \"target = \"\n        \"::_pbi::WireFormat::\"\n        \"InternalSerializeUnknownFieldsToArray(\\n\"\n        \"    $unknown_fields$, target, stream);\\n\")",
          "old_line_content": "  format.Indent();",
          "new_line_content": "    format(",
          "content_same": false
        },
        {
          "line": 3837,
          "old_api": "SortFieldsByNumber",
          "new_api": "end",
          "old_text": "SortFieldsByNumber(descriptor_)",
          "new_text": "ordered_fields.end()",
          "old_line_content": "      SortFieldsByNumber(descriptor_);",
          "new_line_content": "      std::remove_if(ordered_fields.begin(), ordered_fields.end(),",
          "content_same": false
        },
        {
          "line": 3839,
          "old_api": "end",
          "new_api": "IsFieldUsed",
          "old_text": "ordered_fields.end()",
          "new_text": "IsFieldUsed(f, options_)",
          "old_line_content": "      std::remove_if(ordered_fields.begin(), ordered_fields.end(),",
          "new_line_content": "                       return !IsFieldUsed(f, options_);",
          "content_same": false
        },
        {
          "line": 3841,
          "old_api": "IsFieldUsed",
          "new_api": "end",
          "old_text": "IsFieldUsed(f, options_)",
          "new_text": "ordered_fields.end()",
          "old_line_content": "                       return !IsFieldUsed(f, options_);",
          "new_line_content": "      ordered_fields.end());",
          "content_same": false
        },
        {
          "line": 3846,
          "old_api": "extension_range_count",
          "new_api": "extension_range",
          "old_text": "descriptor_->extension_range_count()",
          "new_text": "descriptor_->extension_range(i)",
          "old_line_content": "  sorted_extensions.reserve(descriptor_->extension_range_count());",
          "new_line_content": "    sorted_extensions.push_back(descriptor_->extension_range(i));",
          "content_same": false
        },
        {
          "line": 3848,
          "old_api": "extension_range",
          "new_api": "end",
          "old_text": "descriptor_->extension_range(i)",
          "new_text": "sorted_extensions.end()",
          "old_line_content": "    sorted_extensions.push_back(descriptor_->extension_range(i));",
          "new_line_content": "  std::sort(sorted_extensions.begin(), sorted_extensions.end(),",
          "content_same": false
        },
        {
          "line": 3851,
          "old_api": "ExtensionRangeSorter",
          "new_api": "size",
          "old_text": "ExtensionRangeSorter()",
          "new_text": "sorted_extensions.size()",
          "old_line_content": "            ExtensionRangeSorter());",
          "new_line_content": "  int num_fields = ordered_fields.size() + sorted_extensions.size();",
          "content_same": false
        },
        {
          "line": 3853,
          "old_api": "size",
          "new_api": "ABSL_CHECK_LT",
          "old_text": "sorted_extensions.size()",
          "new_text": "ABSL_CHECK_LT(num_fields, kLargePrime)",
          "old_line_content": "  int num_fields = ordered_fields.size() + sorted_extensions.size();",
          "new_line_content": "  ABSL_CHECK_LT(num_fields, kLargePrime)",
          "content_same": false
        },
        {
          "line": 3865,
          "old_api": "format",
          "new_api": "Indent",
          "old_text": "format(\"for (int i = $1$; i >= 0; i-- ) {\\n\", num_fields - 1)",
          "new_text": "format.Indent()",
          "old_line_content": "  format(\"for (int i = $1$; i >= 0; i-- ) {\\n\", num_fields - 1);",
          "new_line_content": "  format.Indent();",
          "content_same": false
        },
        {
          "line": 3874,
          "old_api": "Indent",
          "new_api": "GenerateSerializeOneField",
          "old_text": "format.Indent()",
          "new_text": "GenerateSerializeOneField(p, f, -1)",
          "old_line_content": "    format.Indent();",
          "new_line_content": "    GenerateSerializeOneField(p, f, -1);",
          "content_same": false
        },
        {
          "line": 3876,
          "old_api": "GenerateSerializeOneField",
          "new_api": "format",
          "old_text": "GenerateSerializeOneField(p, f, -1)",
          "new_text": "format(\"break;\\n\")",
          "old_line_content": "    GenerateSerializeOneField(p, f, -1);",
          "new_line_content": "    format(\"break;\\n\");",
          "content_same": false
        },
        {
          "line": 3885,
          "old_api": "Indent",
          "new_api": "GenerateSerializeOneExtensionRange",
          "old_text": "format.Indent()",
          "new_text": "GenerateSerializeOneExtensionRange(p, r)",
          "old_line_content": "    format.Indent();",
          "new_line_content": "    GenerateSerializeOneExtensionRange(p, r);",
          "content_same": false
        },
        {
          "line": 3887,
          "old_api": "GenerateSerializeOneExtensionRange",
          "new_api": "format",
          "old_text": "GenerateSerializeOneExtensionRange(p, r)",
          "new_text": "format(\"break;\\n\")",
          "old_line_content": "    GenerateSerializeOneExtensionRange(p, r);",
          "new_line_content": "    format(\"break;\\n\");",
          "content_same": false
        },
        {
          "line": 3899,
          "old_api": "format",
          "new_api": "Outdent",
          "old_text": "format(\"}\\n\")",
          "new_text": "format.Outdent()",
          "old_line_content": "  format(\"}\\n\");",
          "new_line_content": "  format.Outdent();",
          "content_same": false
        },
        {
          "line": 3904,
          "old_api": "format",
          "new_api": "file",
          "old_text": "format(\"if (PROTOBUF_PREDICT_FALSE($have_unknown_fields$)) {\\n\")",
          "new_text": "descriptor_->file()",
          "old_line_content": "  format(\"if (PROTOBUF_PREDICT_FALSE($have_unknown_fields$)) {\\n\");",
          "new_line_content": "  if (UseUnknownFieldSet(descriptor_->file(), options_)) {",
          "content_same": false
        },
        {
          "line": 3905,
          "old_api": "Indent",
          "new_api": "format",
          "old_text": "format.Indent()",
          "new_text": "format(\n        \"target = \"\n        \"::_pbi::WireFormat::\"\n        \"InternalSerializeUnknownFieldsToArray(\\n\"\n        \"    $unknown_fields$, target, stream);\\n\")",
          "old_line_content": "  format.Indent();",
          "new_line_content": "    format(",
          "content_same": false
        },
        {
          "line": 3941,
          "old_api": "message_set_wire_format",
          "new_api": "MessageSetByteSize",
          "old_text": "descriptor_->options().message_set_wire_format()",
          "new_text": "format(\n        \"::size_t $classname$::ByteSizeLong() const {\\n\"\n        \"$annotate_bytesize$\"\n        \"// @@protoc_insertion_point(message_set_byte_size_start:$full_name$)\\n\"\n        \"  ::size_t total_size = $extensions$.MessageSetByteSize();\\n\"\n        \"  if ($have_unknown_fields$) {\\n\"\n        \"    total_size += ::_pbi::\\n\"\n        \"        ComputeUnknownMessageSetItemsSize($unknown_fields$);\\n\"\n        \"  }\\n\"\n        \"  int cached_size = \"\n        \"::_pbi::ToCachedSize(total_size);\\n\"\n        \"  SetCachedSize(cached_size);\\n\"\n        \"  return total_size;\\n\"\n        \"}\\n\")",
          "old_line_content": "  if (descriptor_->options().message_set_wire_format()) {",
          "new_line_content": "    format(",
          "content_same": false
        },
        {
          "line": 3968,
          "old_api": "format",
          "new_api": "is_required",
          "old_text": "format(\"::size_t total_size = 0;\\n\")",
          "new_text": "field->is_required()",
          "old_line_content": "    format(\"::size_t total_size = 0;\\n\");",
          "new_line_content": "      if (field->is_required()) {",
          "content_same": false
        },
        {
          "line": 3970,
          "old_api": "is_required",
          "new_api": "get",
          "old_text": "field->is_required()",
          "new_text": "field_generators_.get(field).GenerateIfHasField(p)",
          "old_line_content": "      if (field->is_required()) {",
          "new_line_content": "        field_generators_.get(field).GenerateIfHasField(p);",
          "content_same": false
        },
        {
          "line": 3971,
          "old_api": "format",
          "new_api": "Indent",
          "old_text": "format(\"\\n\")",
          "new_text": "format.Indent()",
          "old_line_content": "        format(\"\\n\");",
          "new_line_content": "        format.Indent();",
          "content_same": false
        },
        {
          "line": 3972,
          "old_api": "get",
          "new_api": "PrintFieldComment",
          "old_text": "field_generators_.get(field).GenerateIfHasField(p)",
          "new_text": "PrintFieldComment(format, field)",
          "old_line_content": "        field_generators_.get(field).GenerateIfHasField(p);",
          "new_line_content": "        PrintFieldComment(format, field);",
          "content_same": false
        },
        {
          "line": 3973,
          "old_api": "Indent",
          "new_api": "get",
          "old_text": "format.Indent()",
          "new_text": "field_generators_.get(field).GenerateByteSize(p)",
          "old_line_content": "        format.Indent();",
          "new_line_content": "        field_generators_.get(field).GenerateByteSize(p);",
          "content_same": false
        },
        {
          "line": 3974,
          "old_api": "PrintFieldComment",
          "new_api": "Outdent",
          "old_text": "PrintFieldComment(format, field)",
          "new_text": "format.Outdent()",
          "old_line_content": "        PrintFieldComment(format, field);",
          "new_line_content": "        format.Outdent();",
          "content_same": false
        },
        {
          "line": 3975,
          "old_api": "get",
          "new_api": "format",
          "old_text": "field_generators_.get(field).GenerateByteSize(p)",
          "new_text": "format(\"}\\n\")",
          "old_line_content": "        field_generators_.get(field).GenerateByteSize(p);",
          "new_line_content": "        format(\"}\\n\");",
          "content_same": false
        },
        {
          "line": 4007,
          "old_api": "RequiredFieldsBitMask",
          "new_api": "ConditionalToCheckBitmasks",
          "old_text": "RequiredFieldsBitMask()",
          "new_text": "ConditionalToCheckBitmasks(masks_for_has_bits)",
          "old_line_content": "    const std::vector<uint32_t> masks_for_has_bits = RequiredFieldsBitMask();",
          "new_line_content": "           ConditionalToCheckBitmasks(masks_for_has_bits));",
          "content_same": false
        },
        {
          "line": 4008,
          "old_api": "format",
          "new_api": "Indent",
          "old_text": "format(\"if ($1$) {  // All required fields are present.\\n\",\n           ConditionalToCheckBitmasks(masks_for_has_bits))",
          "new_text": "format.Indent()",
          "old_line_content": "    format(\"if ($1$) {  // All required fields are present.\\n\",",
          "new_line_content": "    format.Indent();",
          "content_same": false
        },
        {
          "line": 4014,
          "old_api": "is_required",
          "new_api": "get",
          "old_text": "field->is_required()",
          "new_text": "field_generators_.get(field).GenerateByteSize(p)",
          "old_line_content": "      if (!field->is_required()) continue;",
          "new_line_content": "      field_generators_.get(field).GenerateByteSize(p);",
          "content_same": false
        },
        {
          "line": 4015,
          "old_api": "PrintFieldComment",
          "new_api": "format",
          "old_text": "PrintFieldComment(format, field)",
          "new_text": "format(\"\\n\")",
          "old_line_content": "      PrintFieldComment(format, field);",
          "new_line_content": "      format(\"\\n\");",
          "content_same": false
        },
        {
          "line": 4017,
          "old_api": "format",
          "new_api": "Outdent",
          "old_text": "format(\"\\n\")",
          "new_text": "format.Outdent()",
          "old_line_content": "      format(\"\\n\");",
          "new_line_content": "    format.Outdent();",
          "content_same": false
        },
        {
          "line": 4027,
          "old_api": "is_required",
          "new_api": "get",
          "old_text": "field->is_required()",
          "new_text": "field_generators_.get(field).GenerateIfHasField(p)",
          "old_line_content": "      if (!field->is_required()) continue;",
          "new_line_content": "      field_generators_.get(field).GenerateIfHasField(p);",
          "content_same": false
        },
        {
          "line": 4028,
          "old_api": "PrintFieldComment",
          "new_api": "Indent",
          "old_text": "PrintFieldComment(format, field)",
          "new_text": "format.Indent()",
          "old_line_content": "      PrintFieldComment(format, field);",
          "new_line_content": "      format.Indent();",
          "content_same": false
        },
        {
          "line": 4030,
          "old_api": "Indent",
          "new_api": "Outdent",
          "old_text": "format.Indent()",
          "new_text": "format.Outdent()",
          "old_line_content": "      format.Indent();",
          "new_line_content": "      format.Outdent();",
          "content_same": false
        },
        {
          "line": 4031,
          "old_api": "get",
          "new_api": "format",
          "old_text": "field_generators_.get(field).GenerateByteSize(p)",
          "new_text": "format(\"}\\n\")",
          "old_line_content": "      field_generators_.get(field).GenerateByteSize(p);",
          "new_line_content": "      format(\"}\\n\");",
          "content_same": false
        },
        {
          "line": 4065,
          "old_api": "GenChunkMask",
          "new_api": "absl::Hex(chunk_mask, absl::kZeroPad8)",
          "old_text": "GenChunkMask(chunk, has_bit_indices_)",
          "new_text": "absl::Hex(chunk_mask, absl::kZeroPad8)",
          "old_line_content": "      uint32_t chunk_mask = GenChunkMask(chunk, has_bit_indices_);",
          "new_line_content": "          absl::StrCat(absl::Hex(chunk_mask, absl::kZeroPad8));",
          "content_same": false
        },
        {
          "line": 4073,
          "old_api": "popcnt",
          "new_api": "front",
          "old_text": "popcnt(chunk_mask)",
          "new_text": "chunk.front()",
          "old_line_content": "      ABSL_DCHECK_GE(8, popcnt(chunk_mask));",
          "new_line_content": "      if (cached_has_word_index != HasWordIndex(chunk.front())) {",
          "content_same": false
        },
        {
          "line": 4075,
          "old_api": "front",
          "new_api": "format",
          "old_text": "chunk.front()",
          "new_text": "format(\"cached_has_bits = $has_bits$[$1$];\\n\", cached_has_word_index)",
          "old_line_content": "      if (cached_has_word_index != HasWordIndex(chunk.front())) {",
          "new_line_content": "        format(\"cached_has_bits = $has_bits$[$1$];\\n\", cached_has_word_index);",
          "content_same": false
        },
        {
          "line": 4089,
          "old_api": "PrintFieldComment",
          "new_api": "is_repeated",
          "old_text": "PrintFieldComment(format, field)",
          "new_text": "field->is_repeated()",
          "old_line_content": "      PrintFieldComment(format, field);",
          "new_line_content": "      if (field->is_repeated()) {",
          "content_same": false
        },
        {
          "line": 4129,
          "old_api": "OneOfRange",
          "new_api": "Indent",
          "old_text": "OneOfRange(descriptor_)",
          "new_text": "format.Indent()",
          "old_line_content": "  for (auto oneof : OneOfRange(descriptor_)) {",
          "new_line_content": "    format.Indent();",
          "content_same": false
        },
        {
          "line": 4130,
          "old_api": "name",
          "new_api": "FieldRange",
          "old_text": "oneof->name()",
          "new_text": "FieldRange(oneof)",
          "old_line_content": "    format(\"switch ($1$_case()) {\\n\", oneof->name());",
          "new_line_content": "    for (auto field : FieldRange(oneof)) {",
          "content_same": false
        },
        {
          "line": 4131,
          "old_api": "Indent",
          "new_api": "PrintFieldComment",
          "old_text": "format.Indent()",
          "new_text": "PrintFieldComment(format, field)",
          "old_line_content": "    format.Indent();",
          "new_line_content": "      PrintFieldComment(format, field);",
          "content_same": false
        },
        {
          "line": 4132,
          "old_api": "FieldRange",
          "new_api": "name",
          "old_text": "FieldRange(oneof)",
          "new_text": "field->name()",
          "old_line_content": "    for (auto field : FieldRange(oneof)) {",
          "new_line_content": "      format(\"case k$1$: {\\n\", UnderscoresToCamelCase(field->name(), true));",
          "content_same": false
        },
        {
          "line": 4133,
          "old_api": "PrintFieldComment",
          "new_api": "Indent",
          "old_text": "PrintFieldComment(format, field)",
          "new_text": "format.Indent()",
          "old_line_content": "      PrintFieldComment(format, field);",
          "new_line_content": "      format.Indent();",
          "content_same": false
        },
        {
          "line": 4134,
          "old_api": "name",
          "new_api": "get",
          "old_text": "field->name()",
          "new_text": "field_generators_.get(field).GenerateByteSize(p)",
          "old_line_content": "      format(\"case k$1$: {\\n\", UnderscoresToCamelCase(field->name(), true));",
          "new_line_content": "      field_generators_.get(field).GenerateByteSize(p);",
          "content_same": false
        },
        {
          "line": 4135,
          "old_api": "Indent",
          "new_api": "format",
          "old_text": "format.Indent()",
          "new_text": "format(\"break;\\n\")",
          "old_line_content": "      format.Indent();",
          "new_line_content": "      format(\"break;\\n\");",
          "content_same": false
        },
        {
          "line": 4136,
          "old_api": "get",
          "new_api": "Outdent",
          "old_text": "field_generators_.get(field).GenerateByteSize(p)",
          "new_text": "format.Outdent()",
          "old_line_content": "      field_generators_.get(field).GenerateByteSize(p);",
          "new_line_content": "      format.Outdent();",
          "content_same": false
        },
        {
          "line": 4139,
          "old_api": "format",
          "new_api": "name",
          "old_text": "format(\"}\\n\")",
          "new_text": "format(\n        \"case $1$_NOT_SET: {\\n\"\n        \"  break;\\n\"\n        \"}\\n\",\n        absl::AsciiStrToUpper(oneof->name()))",
          "old_line_content": "      format(\"}\\n\");",
          "new_line_content": "    format(",
          "content_same": false
        },
        {
          "line": 4145,
          "old_api": "name",
          "new_api": "format",
          "old_text": "oneof->name()",
          "new_text": "format(\"}\\n\")",
          "old_line_content": "        absl::AsciiStrToUpper(oneof->name()));",
          "new_line_content": "    format(\"}\\n\");",
          "content_same": false
        },
        {
          "line": 4185,
          "old_api": "HasSimpleBaseClass",
          "new_api": "format",
          "old_text": "HasSimpleBaseClass(descriptor_, options_)",
          "new_text": "format(\"bool $classname$::IsInitialized() const {\\n\")",
          "old_line_content": "  if (HasSimpleBaseClass(descriptor_, options_)) return;",
          "new_line_content": "  format(\"bool $classname$::IsInitialized() const {\\n\");",
          "content_same": false
        },
        {
          "line": 4188,
          "old_api": "Indent",
          "new_api": "extension_range_count",
          "old_text": "format.Indent()",
          "new_text": "descriptor_->extension_range_count()",
          "old_line_content": "  format.Indent();",
          "new_line_content": "  if (descriptor_->extension_range_count() > 0) {",
          "content_same": false
        },
        {
          "line": 4213,
          "old_api": "OneOfRange",
          "new_api": "FieldRange",
          "old_text": "OneOfRange(descriptor_)",
          "new_text": "FieldRange(oneof)",
          "old_line_content": "  for (auto oneof : OneOfRange(descriptor_)) {",
          "new_line_content": "    for (auto field : FieldRange(oneof)) {",
          "content_same": false
        },
        {
          "line": 4215,
          "old_api": "FieldRange",
          "new_api": "ShouldIgnoreRequiredFieldCheck",
          "old_text": "FieldRange(oneof)",
          "new_text": "ShouldIgnoreRequiredFieldCheck(field, options_)",
          "old_line_content": "    for (auto field : FieldRange(oneof)) {",
          "new_line_content": "          !ShouldIgnoreRequiredFieldCheck(field, options_) &&",
          "content_same": false
        },
        {
          "line": 4216,
          "old_api": "cpp_type",
          "new_api": "message_type",
          "old_text": "field->cpp_type()",
          "new_text": "field->message_type()",
          "old_line_content": "      if (field->cpp_type() == FieldDescriptor::CPPTYPE_MESSAGE &&",
          "new_line_content": "          scc_analyzer_->HasRequiredFields(field->message_type())) {",
          "content_same": false
        },
        {
          "line": 4228,
          "old_api": "name",
          "new_api": "FieldRange",
          "old_text": "oneof->name()",
          "new_text": "FieldRange(oneof)",
          "old_line_content": "    format(\"switch ($1$_case()) {\\n\", oneof->name());",
          "new_line_content": "    for (auto field : FieldRange(oneof)) {",
          "content_same": false
        },
        {
          "line": 4229,
          "old_api": "Indent",
          "new_api": "name",
          "old_text": "format.Indent()",
          "new_text": "field->name()",
          "old_line_content": "    format.Indent();",
          "new_line_content": "      format(\"case k$1$: {\\n\", UnderscoresToCamelCase(field->name(), true));",
          "content_same": false
        },
        {
          "line": 4230,
          "old_api": "FieldRange",
          "new_api": "Indent",
          "old_text": "FieldRange(oneof)",
          "new_text": "format.Indent()",
          "old_line_content": "    for (auto field : FieldRange(oneof)) {",
          "new_line_content": "      format.Indent();",
          "content_same": false
        },
        {
          "line": 4231,
          "old_api": "name",
          "new_api": "get",
          "old_text": "field->name()",
          "new_text": "field_generators_.get(field).GenerateIsInitialized(p)",
          "old_line_content": "      format(\"case k$1$: {\\n\", UnderscoresToCamelCase(field->name(), true));",
          "new_line_content": "      field_generators_.get(field).GenerateIsInitialized(p);",
          "content_same": false
        },
        {
          "line": 4232,
          "old_api": "Indent",
          "new_api": "format",
          "old_text": "format.Indent()",
          "new_text": "format(\"break;\\n\")",
          "old_line_content": "      format.Indent();",
          "new_line_content": "      format(\"break;\\n\");",
          "content_same": false
        },
        {
          "line": 4233,
          "old_api": "get",
          "new_api": "Outdent",
          "old_text": "field_generators_.get(field).GenerateIsInitialized(p)",
          "new_text": "format.Outdent()",
          "old_line_content": "      field_generators_.get(field).GenerateIsInitialized(p);",
          "new_line_content": "      format.Outdent();",
          "content_same": false
        },
        {
          "line": 4236,
          "old_api": "format",
          "new_api": "name",
          "old_text": "format(\"}\\n\")",
          "new_text": "format(\n        \"case $1$_NOT_SET: {\\n\"\n        \"  break;\\n\"\n        \"}\\n\",\n        absl::AsciiStrToUpper(oneof->name()))",
          "old_line_content": "      format(\"}\\n\");",
          "new_line_content": "    format(",
          "content_same": false
        },
        {
          "line": 4242,
          "old_api": "name",
          "new_api": "format",
          "old_text": "oneof->name()",
          "new_text": "format(\"}\\n\")",
          "old_line_content": "        absl::AsciiStrToUpper(oneof->name()));",
          "new_line_content": "    format(\"}\\n\");",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 4098,
          "old_api": null,
          "new_api": "EmitFieldNonDefaultCondition",
          "old_text": null,
          "new_text": "EmitFieldNonDefaultCondition(p, \"this->\", field)",
          "old_line_content": "        // Without field presence: field is serialized only if it has a",
          "new_line_content": "        have_enclosing_if = EmitFieldNonDefaultCondition(p, \"this->\", field);",
          "content_same": false
        },
        {
          "line": 4101,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "field_generators_.get(field).GenerateByteSize(p)",
          "old_line_content": "      }",
          "new_line_content": "      field_generators_.get(field).GenerateByteSize(p);",
          "content_same": false
        },
        {
          "line": 4104,
          "old_api": null,
          "new_api": "Outdent",
          "old_text": null,
          "new_text": "format.Outdent()",
          "old_line_content": "",
          "new_line_content": "        format.Outdent();",
          "content_same": false
        },
        {
          "line": 4105,
          "old_api": null,
          "new_api": "format",
          "old_text": null,
          "new_text": "format(\n            \"}\\n\"\n            \"\\n\")",
          "old_line_content": "      if (have_enclosing_if) {",
          "new_line_content": "        format(",
          "content_same": false
        },
        {
          "line": 4110,
          "old_api": null,
          "new_api": "format",
          "old_text": null,
          "new_text": "format(\"\\n\")",
          "old_line_content": "      }",
          "new_line_content": "        format(\"\\n\");",
          "content_same": false
        },
        {
          "line": 4115,
          "old_api": null,
          "new_api": "Outdent",
          "old_text": null,
          "new_text": "format.Outdent()",
          "old_line_content": "",
          "new_line_content": "      format.Outdent();",
          "content_same": false
        },
        {
          "line": 4116,
          "old_api": null,
          "new_api": "format",
          "old_text": null,
          "new_text": "format(\"}\\n\")",
          "old_line_content": "    if (have_outer_if) {",
          "new_line_content": "      format(\"}\\n\");",
          "content_same": false
        },
        {
          "line": 4119,
          "old_api": null,
          "new_api": "OnEndChunk",
          "old_text": null,
          "new_text": "cold_skipper.OnEndChunk(chunk_index, p)",
          "old_line_content": "    }",
          "new_line_content": "    if (cold_skipper.OnEndChunk(chunk_index, p)) {",
          "content_same": false
        },
        {
          "line": 4127,
          "old_api": null,
          "new_api": "OneOfRange",
          "old_text": null,
          "new_text": "OneOfRange(descriptor_)",
          "old_line_content": "  // Fields inside a oneof don't use _has_bits_ so we count them in a separate",
          "new_line_content": "  for (auto oneof : OneOfRange(descriptor_)) {",
          "content_same": false
        },
        {
          "line": 4128,
          "old_api": null,
          "new_api": "name",
          "old_text": null,
          "new_text": "oneof->name()",
          "old_line_content": "  // pass.",
          "new_line_content": "    format(\"switch ($1$_case()) {\\n\", oneof->name());",
          "content_same": false
        },
        {
          "line": 4143,
          "old_api": null,
          "new_api": "name",
          "old_text": null,
          "new_text": "oneof->name()",
          "old_line_content": "        \"  break;\\n\"",
          "new_line_content": "        absl::AsciiStrToUpper(oneof->name()));",
          "content_same": false
        },
        {
          "line": 4144,
          "old_api": null,
          "new_api": "Outdent",
          "old_text": null,
          "new_text": "format.Outdent()",
          "old_line_content": "        \"}\\n\",",
          "new_line_content": "    format.Outdent();",
          "content_same": false
        },
        {
          "line": 4150,
          "old_api": null,
          "new_api": "ByteSizeLong",
          "old_text": null,
          "new_text": "format(\"total_size += $weak_field_map$.ByteSizeLong();\\n\")",
          "old_line_content": "  if (num_weak_fields_) {",
          "new_line_content": "    format(\"total_size += $weak_field_map$.ByteSizeLong();\\n\");",
          "content_same": false
        },
        {
          "line": 4153,
          "old_api": null,
          "new_api": "file",
          "old_text": null,
          "new_text": "descriptor_->file()",
          "old_line_content": "  }",
          "new_line_content": "  if (UseUnknownFieldSet(descriptor_->file(), options_)) {",
          "content_same": false
        },
        {
          "line": 3644,
          "old_api": null,
          "new_api": "Flush",
          "old_text": null,
          "new_text": "Flush()",
          "old_line_content": "          cached_has_bit_index_(kNoHasbit) {}",
          "new_line_content": "    ~LazySerializerEmitter() { Flush(); }",
          "content_same": false
        },
        {
          "line": 4157,
          "old_api": null,
          "new_api": "format",
          "old_text": null,
          "new_text": "format(\n        \"return MaybeComputeUnknownFieldsSize(total_size, &$cached_size$);\\n\")",
          "old_line_content": "    // unknown fields in tail position. This allows for better code generation",
          "new_line_content": "    format(",
          "content_same": false
        },
        {
          "line": 4160,
          "old_api": null,
          "new_api": "format",
          "old_text": null,
          "new_text": "format(\"if (PROTOBUF_PREDICT_FALSE($have_unknown_fields$)) {\\n\")",
          "old_line_content": "        \"return MaybeComputeUnknownFieldsSize(total_size, &$cached_size$);\\n\");",
          "new_line_content": "    format(\"if (PROTOBUF_PREDICT_FALSE($have_unknown_fields$)) {\\n\");",
          "content_same": false
        },
        {
          "line": 4161,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "format(\"  total_size += $unknown_fields$.size();\\n\")",
          "old_line_content": "  } else {",
          "new_line_content": "    format(\"  total_size += $unknown_fields$.size();\\n\");",
          "content_same": false
        },
        {
          "line": 3651,
          "old_api": null,
          "new_api": "MustFlush",
          "old_text": null,
          "new_text": "MustFlush(field)",
          "old_line_content": "      Formatter format(p_);",
          "new_line_content": "      if (!field->has_presence() || MustFlush(field)) {",
          "content_same": false
        },
        {
          "line": 3654,
          "old_api": null,
          "new_api": "real_containing_oneof",
          "old_text": null,
          "new_text": "field->real_containing_oneof()",
          "old_line_content": "      }",
          "new_line_content": "      if (!field->real_containing_oneof()) {",
          "content_same": false
        },
        {
          "line": 3657,
          "old_api": null,
          "new_api": "has_presence",
          "old_text": null,
          "new_text": "field->has_presence()",
          "old_line_content": "",
          "new_line_content": "        if (HasHasbit(field) && field->has_presence()) {",
          "content_same": false
        },
        {
          "line": 4172,
          "old_api": null,
          "new_api": "format",
          "old_text": null,
          "new_text": "format(\n        \"int cached_size = ::_pbi::ToCachedSize(total_size);\\n\"\n        \"SetCachedSize(cached_size);\\n\"\n        \"return total_size;\\n\")",
          "old_line_content": "    // where even relaxed memory order might have perf impact to replace it with",
          "new_line_content": "    format(",
          "content_same": false
        },
        {
          "line": 3661,
          "old_api": null,
          "new_api": "index",
          "old_text": null,
          "new_text": "field->index()",
          "old_line_content": "          // allow us to determine whether this is going to be useful.",
          "new_line_content": "          int has_bit_index = mg_->has_bit_indices_[field->index()];",
          "content_same": false
        },
        {
          "line": 3666,
          "old_api": null,
          "new_api": "format",
          "old_text": null,
          "new_text": "format(\"cached_has_bits = _impl_._has_bits_[$1$];\\n\", new_index)",
          "old_line_content": "",
          "new_line_content": "            format(\"cached_has_bits = _impl_._has_bits_[$1$];\\n\", new_index);",
          "content_same": false
        },
        {
          "line": 4178,
          "old_api": null,
          "new_api": "Outdent",
          "old_text": null,
          "new_text": "format.Outdent()",
          "old_line_content": "  }",
          "new_line_content": "  format.Outdent();",
          "content_same": false
        },
        {
          "line": 4179,
          "old_api": null,
          "new_api": "format",
          "old_text": null,
          "new_text": "format(\"}\\n\")",
          "old_line_content": "",
          "new_line_content": "  format(\"}\\n\");",
          "content_same": false
        },
        {
          "line": 4183,
          "old_api": null,
          "new_api": "HasSimpleBaseClass",
          "old_text": null,
          "new_text": "HasSimpleBaseClass(descriptor_, options_)",
          "old_line_content": "",
          "new_line_content": "  if (HasSimpleBaseClass(descriptor_, options_)) return;",
          "content_same": false
        },
        {
          "line": 3672,
          "old_api": null,
          "new_api": "GenerateSerializeOneField",
          "old_text": null,
          "new_text": "mg_->GenerateSerializeOneField(p_, field, cached_has_bit_index_)",
          "old_line_content": "",
          "new_line_content": "        mg_->GenerateSerializeOneField(p_, field, cached_has_bit_index_);",
          "content_same": false
        },
        {
          "line": 3674,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "v_.push_back(field)",
          "old_line_content": "      } else {",
          "new_line_content": "        v_.push_back(field);",
          "content_same": false
        },
        {
          "line": 4186,
          "old_api": null,
          "new_api": "Indent",
          "old_text": null,
          "new_text": "format.Indent()",
          "old_line_content": "  Formatter format(p);",
          "new_line_content": "  format.Indent();",
          "content_same": false
        },
        {
          "line": 4189,
          "old_api": null,
          "new_api": "IsInitialized",
          "old_text": null,
          "new_text": "format(\n        \"if (!$extensions$.IsInitialized(internal_default_instance())) {\\n\"\n        \"  return false;\\n\"\n        \"}\\n\\n\")",
          "old_line_content": "",
          "new_line_content": "    format(",
          "content_same": false
        },
        {
          "line": 3680,
          "old_api": null,
          "new_api": "Emit",
          "old_text": null,
          "new_text": "Emit(field)",
          "old_line_content": "      if (field != nullptr) {",
          "new_line_content": "        Emit(field);",
          "content_same": false
        },
        {
          "line": 4196,
          "old_api": null,
          "new_api": "format",
          "old_text": null,
          "new_text": "format(\n        \"if (_Internal::MissingRequiredFields($has_bits$))\"\n        \" return false;\\n\")",
          "old_line_content": "",
          "new_line_content": "    format(",
          "content_same": false
        },
        {
          "line": 3685,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "v_.empty()",
          "old_line_content": "    void Flush() {",
          "new_line_content": "      if (!v_.empty()) {",
          "content_same": false
        },
        {
          "line": 4203,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "field_generators_.get(field).GenerateIsInitialized(p)",
          "old_line_content": "  // Now check that all non-oneof embedded messages are initialized.",
          "new_line_content": "    field_generators_.get(field).GenerateIsInitialized(p);",
          "content_same": false
        },
        {
          "line": 3695,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "v_.empty()",
          "old_line_content": "    bool MustFlush(const FieldDescriptor* field) {",
          "new_line_content": "      return !v_.empty() &&",
          "content_same": false
        },
        {
          "line": 4207,
          "old_api": null,
          "new_api": "IsInitialized",
          "old_text": null,
          "new_text": "format(\"if (!$weak_field_map$.IsInitialized()) return false;\\n\")",
          "old_line_content": "  if (num_weak_fields_) {",
          "new_line_content": "    format(\"if (!$weak_field_map$.IsInitialized()) return false;\\n\");",
          "content_same": false
        },
        {
          "line": 4211,
          "old_api": null,
          "new_api": "OneOfRange",
          "old_text": null,
          "new_text": "OneOfRange(descriptor_)",
          "old_line_content": "  // Go through the oneof fields, emitting a switch if any might have required",
          "new_line_content": "  for (auto oneof : OneOfRange(descriptor_)) {",
          "content_same": false
        },
        {
          "line": 4214,
          "old_api": null,
          "new_api": "cpp_type",
          "old_text": null,
          "new_text": "field->cpp_type()",
          "old_line_content": "    bool has_required_fields = false;",
          "new_line_content": "      if (field->cpp_type() == FieldDescriptor::CPPTYPE_MESSAGE &&",
          "content_same": false
        },
        {
          "line": 4226,
          "old_api": null,
          "new_api": "name",
          "old_text": null,
          "new_text": "oneof->name()",
          "old_line_content": "    }",
          "new_line_content": "    format(\"switch ($1$_case()) {\\n\", oneof->name());",
          "content_same": false
        },
        {
          "line": 4227,
          "old_api": null,
          "new_api": "Indent",
          "old_text": null,
          "new_text": "format.Indent()",
          "old_line_content": "",
          "new_line_content": "    format.Indent();",
          "content_same": false
        },
        {
          "line": 3720,
          "old_api": null,
          "new_api": "std::min(current_combined_range_.start, range->start)",
          "old_text": null,
          "new_text": "std::min(current_combined_range_.start, range->start)",
          "old_line_content": "      } else {",
          "new_line_content": "            std::min(current_combined_range_.start, range->start);",
          "content_same": false
        },
        {
          "line": 3728,
          "old_api": null,
          "new_api": "GenerateSerializeOneExtensionRange",
          "old_text": null,
          "new_text": "mg_->GenerateSerializeOneExtensionRange(p_, &current_combined_range_)",
          "old_line_content": "    void Flush() {",
          "new_line_content": "        mg_->GenerateSerializeOneExtensionRange(p_, &current_combined_range_);",
          "content_same": false
        },
        {
          "line": 4240,
          "old_api": null,
          "new_api": "name",
          "old_text": null,
          "new_text": "oneof->name()",
          "old_line_content": "        \"  break;\\n\"",
          "new_line_content": "        absl::AsciiStrToUpper(oneof->name()));",
          "content_same": false
        },
        {
          "line": 4241,
          "old_api": null,
          "new_api": "Outdent",
          "old_text": null,
          "new_text": "format.Outdent()",
          "old_line_content": "        \"}\\n\",",
          "new_line_content": "    format.Outdent();",
          "content_same": false
        },
        {
          "line": 4245,
          "old_api": null,
          "new_api": "Outdent",
          "old_text": null,
          "new_text": "format.Outdent()",
          "old_line_content": "  }",
          "new_line_content": "  format.Outdent();",
          "content_same": false
        },
        {
          "line": 4246,
          "old_api": null,
          "new_api": "format",
          "old_text": null,
          "new_text": "format(\n      \"  return true;\\n\"\n      \"}\\n\")",
          "old_line_content": "",
          "new_line_content": "  format(",
          "content_same": false
        },
        {
          "line": 3754,
          "old_api": null,
          "new_api": "number",
          "old_text": null,
          "new_text": "field->number()",
          "old_line_content": "    }",
          "new_line_content": "      if (field_ == nullptr || field_->number() < field->number()) {",
          "content_same": false
        },
        {
          "line": 3764,
          "old_api": null,
          "new_api": "SortFieldsByNumber",
          "old_text": null,
          "new_text": "SortFieldsByNumber(descriptor_)",
          "old_line_content": "",
          "new_line_content": "      SortFieldsByNumber(descriptor_);",
          "content_same": false
        },
        {
          "line": 3767,
          "old_api": null,
          "new_api": "extension_range_count",
          "old_text": null,
          "new_text": "descriptor_->extension_range_count()",
          "old_line_content": "",
          "new_line_content": "  sorted_extensions.reserve(descriptor_->extension_range_count());",
          "content_same": false
        },
        {
          "line": 3768,
          "old_api": null,
          "new_api": "extension_range_count",
          "old_text": null,
          "new_text": "descriptor_->extension_range_count()",
          "old_line_content": "  std::vector<const Descriptor::ExtensionRange*> sorted_extensions;",
          "new_line_content": "  for (int i = 0; i < descriptor_->extension_range_count(); ++i) {",
          "content_same": false
        },
        {
          "line": 3772,
          "old_api": null,
          "new_api": "ExtensionRangeSorter",
          "old_text": null,
          "new_text": "ExtensionRangeSorter()",
          "old_line_content": "  }",
          "new_line_content": "            ExtensionRangeSorter());",
          "content_same": false
        },
        {
          "line": 3779,
          "old_api": null,
          "new_api": "format",
          "old_text": null,
          "new_text": "format(\n      \"$uint32$ cached_has_bits = 0;\\n\"\n      \"(void) cached_has_bits;\\n\\n\")",
          "old_line_content": "  }",
          "new_line_content": "  format(",
          "content_same": false
        },
        {
          "line": 3790,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "sorted_extensions.size()",
          "old_line_content": "    int i, j;",
          "new_line_content": "         i < ordered_fields.size() || j < sorted_extensions.size();) {",
          "content_same": false
        },
        {
          "line": 3791,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "sorted_extensions.size()",
          "old_line_content": "    for (i = 0, j = 0;",
          "new_line_content": "      if ((j == sorted_extensions.size()) ||",
          "content_same": false
        },
        {
          "line": 3796,
          "old_api": null,
          "new_api": "weak",
          "old_text": null,
          "new_text": "field->options().weak()",
          "old_line_content": "        const FieldDescriptor* field = ordered_fields[i++];",
          "new_line_content": "        if (field->options().weak()) {",
          "content_same": false
        },
        {
          "line": 3801,
          "old_api": null,
          "new_api": "Emit",
          "old_text": null,
          "new_text": "e.Emit(field)",
          "old_line_content": "        } else {",
          "new_line_content": "          e.Emit(field);",
          "content_same": false
        },
        {
          "line": 3804,
          "old_api": null,
          "new_api": "Release",
          "old_text": null,
          "new_text": "largest_weak_field.Release()",
          "old_line_content": "        }",
          "new_line_content": "        e.EmitIfNotNull(largest_weak_field.Release());",
          "content_same": false
        },
        {
          "line": 3805,
          "old_api": null,
          "new_api": "Flush",
          "old_text": null,
          "new_text": "e.Flush()",
          "old_line_content": "      } else {",
          "new_line_content": "        e.Flush();",
          "content_same": false
        },
        {
          "line": 3809,
          "old_api": null,
          "new_api": "Flush",
          "old_text": null,
          "new_text": "re.Flush()",
          "old_line_content": "      }",
          "new_line_content": "    re.Flush();",
          "content_same": false
        },
        {
          "line": 3810,
          "old_api": null,
          "new_api": "Release",
          "old_text": null,
          "new_text": "largest_weak_field.Release()",
          "old_line_content": "    }",
          "new_line_content": "    e.EmitIfNotNull(largest_weak_field.Release());",
          "content_same": false
        },
        {
          "line": 3813,
          "old_api": null,
          "new_api": "format",
          "old_text": null,
          "new_text": "format(\"if (PROTOBUF_PREDICT_FALSE($have_unknown_fields$)) {\\n\")",
          "old_line_content": "  }",
          "new_line_content": "  format(\"if (PROTOBUF_PREDICT_FALSE($have_unknown_fields$)) {\\n\");",
          "content_same": false
        },
        {
          "line": 3814,
          "old_api": null,
          "new_api": "Indent",
          "old_text": null,
          "new_text": "format.Indent()",
          "old_line_content": "",
          "new_line_content": "  format.Indent();",
          "content_same": false
        },
        {
          "line": 3822,
          "old_api": null,
          "new_api": "data",
          "old_text": null,
          "new_text": "format(\n        \"target = stream->WriteRaw($unknown_fields$.data(),\\n\"\n        \"    static_cast<int>($unknown_fields$.size()), target);\\n\")",
          "old_line_content": "        \"    $unknown_fields$, target, stream);\\n\");",
          "new_line_content": "    format(",
          "content_same": false
        },
        {
          "line": 3826,
          "old_api": null,
          "new_api": "Outdent",
          "old_text": null,
          "new_text": "format.Outdent()",
          "old_line_content": "        \"    static_cast<int>($unknown_fields$.size()), target);\\n\");",
          "new_line_content": "  format.Outdent();",
          "content_same": false
        },
        {
          "line": 3827,
          "old_api": null,
          "new_api": "format",
          "old_text": null,
          "new_text": "format(\"}\\n\")",
          "old_line_content": "  }",
          "new_line_content": "  format(\"}\\n\");",
          "content_same": false
        },
        {
          "line": 3835,
          "old_api": null,
          "new_api": "SortFieldsByNumber",
          "old_text": null,
          "new_text": "SortFieldsByNumber(descriptor_)",
          "old_line_content": "",
          "new_line_content": "      SortFieldsByNumber(descriptor_);",
          "content_same": false
        },
        {
          "line": 3836,
          "old_api": null,
          "new_api": "erase",
          "old_text": null,
          "new_text": "ordered_fields.erase(\n      std::remove_if(ordered_fields.begin(), ordered_fields.end(),\n                     [this](const FieldDescriptor* f) {\n                       return !IsFieldUsed(f, options_);\n                     }),\n      ordered_fields.end())",
          "old_line_content": "  std::vector<const FieldDescriptor*> ordered_fields =",
          "new_line_content": "  ordered_fields.erase(",
          "content_same": false
        },
        {
          "line": 3844,
          "old_api": null,
          "new_api": "extension_range_count",
          "old_text": null,
          "new_text": "descriptor_->extension_range_count()",
          "old_line_content": "",
          "new_line_content": "  sorted_extensions.reserve(descriptor_->extension_range_count());",
          "content_same": false
        },
        {
          "line": 3845,
          "old_api": null,
          "new_api": "extension_range_count",
          "old_text": null,
          "new_text": "descriptor_->extension_range_count()",
          "old_line_content": "  std::vector<const Descriptor::ExtensionRange*> sorted_extensions;",
          "new_line_content": "  for (int i = 0; i < descriptor_->extension_range_count(); ++i) {",
          "content_same": false
        },
        {
          "line": 3849,
          "old_api": null,
          "new_api": "ExtensionRangeSorter",
          "old_text": null,
          "new_text": "ExtensionRangeSorter()",
          "old_line_content": "  }",
          "new_line_content": "            ExtensionRangeSorter());",
          "content_same": false
        },
        {
          "line": 3852,
          "old_api": null,
          "new_api": "constexpr",
          "old_text": null,
          "new_text": "constexpr",
          "old_line_content": "",
          "new_line_content": "  constexpr int kLargePrime = 1000003;",
          "content_same": false
        },
        {
          "line": 3858,
          "old_api": null,
          "new_api": "format",
          "old_text": null,
          "new_text": "format(\n        \"::_pbi::WeakFieldMap::FieldWriter field_writer(\"\n        \"$weak_field_map$);\\n\")",
          "old_line_content": "",
          "new_line_content": "    format(",
          "content_same": false
        },
        {
          "line": 3863,
          "old_api": null,
          "new_api": "format",
          "old_text": null,
          "new_text": "format(\"for (int i = $1$; i >= 0; i-- ) {\\n\", num_fields - 1)",
          "old_line_content": "  }",
          "new_line_content": "  format(\"for (int i = $1$; i >= 0; i-- ) {\\n\", num_fields - 1);",
          "content_same": false
        },
        {
          "line": 3866,
          "old_api": null,
          "new_api": "format",
          "old_text": null,
          "new_text": "format(\"switch(i) {\\n\")",
          "old_line_content": "",
          "new_line_content": "  format(\"switch(i) {\\n\");",
          "content_same": false
        },
        {
          "line": 3871,
          "old_api": null,
          "new_api": "format",
          "old_text": null,
          "new_text": "format(\"case $1$: {\\n\", index++)",
          "old_line_content": "  int index = 0;",
          "new_line_content": "    format(\"case $1$: {\\n\", index++);",
          "content_same": false
        },
        {
          "line": 3872,
          "old_api": null,
          "new_api": "Indent",
          "old_text": null,
          "new_text": "format.Indent()",
          "old_line_content": "  for (const auto* f : ordered_fields) {",
          "new_line_content": "    format.Indent();",
          "content_same": false
        },
        {
          "line": 3877,
          "old_api": null,
          "new_api": "Outdent",
          "old_text": null,
          "new_text": "format.Outdent()",
          "old_line_content": "",
          "new_line_content": "    format.Outdent();",
          "content_same": false
        },
        {
          "line": 3882,
          "old_api": null,
          "new_api": "format",
          "old_text": null,
          "new_text": "format(\"case $1$: {\\n\", index++)",
          "old_line_content": "",
          "new_line_content": "    format(\"case $1$: {\\n\", index++);",
          "content_same": false
        },
        {
          "line": 3883,
          "old_api": null,
          "new_api": "Indent",
          "old_text": null,
          "new_text": "format.Indent()",
          "old_line_content": "  for (const auto* r : sorted_extensions) {",
          "new_line_content": "    format.Indent();",
          "content_same": false
        },
        {
          "line": 3888,
          "old_api": null,
          "new_api": "Outdent",
          "old_text": null,
          "new_text": "format.Outdent()",
          "old_line_content": "",
          "new_line_content": "    format.Outdent();",
          "content_same": false
        },
        {
          "line": 3892,
          "old_api": null,
          "new_api": "format",
          "old_text": null,
          "new_text": "format(\n      \"default: {\\n\"\n      \"  $DCHK$(false) << \\\"Unexpected index: \\\" << i;\\n\"\n      \"}\\n\")",
          "old_line_content": "  }",
          "new_line_content": "  format(",
          "content_same": false
        },
        {
          "line": 3896,
          "old_api": null,
          "new_api": "Outdent",
          "old_text": null,
          "new_text": "format.Outdent()",
          "old_line_content": "      \"  $DCHK$(false) << \\\"Unexpected index: \\\" << i;\\n\"",
          "new_line_content": "  format.Outdent();",
          "content_same": false
        },
        {
          "line": 3897,
          "old_api": null,
          "new_api": "format",
          "old_text": null,
          "new_text": "format(\"}\\n\")",
          "old_line_content": "      \"}\\n\");",
          "new_line_content": "  format(\"}\\n\");",
          "content_same": false
        },
        {
          "line": 3900,
          "old_api": null,
          "new_api": "format",
          "old_text": null,
          "new_text": "format(\"}\\n\")",
          "old_line_content": "",
          "new_line_content": "  format(\"}\\n\");",
          "content_same": false
        },
        {
          "line": 3903,
          "old_api": null,
          "new_api": "Indent",
          "old_text": null,
          "new_text": "format.Indent()",
          "old_line_content": "",
          "new_line_content": "  format.Indent();",
          "content_same": false
        },
        {
          "line": 3911,
          "old_api": null,
          "new_api": "data",
          "old_text": null,
          "new_text": "format(\n        \"target = stream->WriteRaw($unknown_fields$.data(),\\n\"\n        \"    static_cast<int>($unknown_fields$.size()), target);\\n\")",
          "old_line_content": "        \"    $unknown_fields$, target, stream);\\n\");",
          "new_line_content": "    format(",
          "content_same": false
        },
        {
          "line": 3915,
          "old_api": null,
          "new_api": "Outdent",
          "old_text": null,
          "new_text": "format.Outdent()",
          "old_line_content": "        \"    static_cast<int>($unknown_fields$.size()), target);\\n\");",
          "new_line_content": "  format.Outdent();",
          "content_same": false
        },
        {
          "line": 3916,
          "old_api": null,
          "new_api": "format",
          "old_text": null,
          "new_text": "format(\"}\\n\")",
          "old_line_content": "  }",
          "new_line_content": "  format(\"}\\n\");",
          "content_same": false
        },
        {
          "line": 3920,
          "old_api": null,
          "new_api": "HasBitsSize",
          "old_text": null,
          "new_text": "HasBitsSize()",
          "old_line_content": "",
          "new_line_content": "  const int array_size = HasBitsSize();",
          "content_same": false
        },
        {
          "line": 3923,
          "old_api": null,
          "new_api": "FieldRange",
          "old_text": null,
          "new_text": "FieldRange(descriptor_)",
          "old_line_content": "  std::vector<uint32_t> masks(array_size, 0);",
          "new_line_content": "  for (auto field : FieldRange(descriptor_)) {",
          "content_same": false
        },
        {
          "line": 3924,
          "old_api": null,
          "new_api": "is_required",
          "old_text": null,
          "new_text": "field->is_required()",
          "old_line_content": "",
          "new_line_content": "    if (!field->is_required()) {",
          "content_same": false
        },
        {
          "line": 3928,
          "old_api": null,
          "new_api": "index",
          "old_text": null,
          "new_text": "field->index()",
          "old_line_content": "    }",
          "new_line_content": "    const int has_bit_index = has_bit_indices_[field->index()];",
          "content_same": false
        },
        {
          "line": 3929,
          "old_api": null,
          "new_api": "static_cast<uint32_t>(1)",
          "old_text": null,
          "new_text": "static_cast<uint32_t>(1)",
          "old_line_content": "",
          "new_line_content": "    masks[has_bit_index / 32] |= static_cast<uint32_t>(1)",
          "content_same": false
        },
        {
          "line": 3936,
          "old_api": null,
          "new_api": "HasSimpleBaseClass",
          "old_text": null,
          "new_text": "HasSimpleBaseClass(descriptor_, options_)",
          "old_line_content": "",
          "new_line_content": "  if (HasSimpleBaseClass(descriptor_, options_)) return;",
          "content_same": false
        },
        {
          "line": 3939,
          "old_api": null,
          "new_api": "message_set_wire_format",
          "old_text": null,
          "new_text": "descriptor_->options().message_set_wire_format()",
          "old_line_content": "  Formatter format(p);",
          "new_line_content": "  if (descriptor_->options().message_set_wire_format()) {",
          "content_same": false
        },
        {
          "line": 3961,
          "old_api": null,
          "new_api": "format",
          "old_text": null,
          "new_text": "format(\n        \"::size_t $classname$::RequiredFieldsByteSizeFallback() const {\\n\"\n        \"// @@protoc_insertion_point(required_fields_byte_size_fallback_start:\"\n        \"$full_name$)\\n\")",
          "old_line_content": "    // Emit a function (rarely used, we hope) that handles the required fields",
          "new_line_content": "    format(",
          "content_same": false
        },
        {
          "line": 3965,
          "old_api": null,
          "new_api": "Indent",
          "old_text": null,
          "new_text": "format.Indent()",
          "old_line_content": "        \"// @@protoc_insertion_point(required_fields_byte_size_fallback_start:\"",
          "new_line_content": "    format.Indent();",
          "content_same": false
        },
        {
          "line": 3966,
          "old_api": null,
          "new_api": "format",
          "old_text": null,
          "new_text": "format(\"::size_t total_size = 0;\\n\")",
          "old_line_content": "        \"$full_name$)\\n\");",
          "new_line_content": "    format(\"::size_t total_size = 0;\\n\");",
          "content_same": false
        },
        {
          "line": 3969,
          "old_api": null,
          "new_api": "format",
          "old_text": null,
          "new_text": "format(\"\\n\")",
          "old_line_content": "    for (auto field : optimized_order_) {",
          "new_line_content": "        format(\"\\n\");",
          "content_same": false
        },
        {
          "line": 3978,
          "old_api": null,
          "new_api": "format",
          "old_text": null,
          "new_text": "format(\n        \"\\n\"\n        \"return total_size;\\n\")",
          "old_line_content": "      }",
          "new_line_content": "    format(",
          "content_same": false
        },
        {
          "line": 3981,
          "old_api": null,
          "new_api": "Outdent",
          "old_text": null,
          "new_text": "format.Outdent()",
          "old_line_content": "        \"\\n\"",
          "new_line_content": "    format.Outdent();",
          "content_same": false
        },
        {
          "line": 3982,
          "old_api": null,
          "new_api": "format",
          "old_text": null,
          "new_text": "format(\"}\\n\")",
          "old_line_content": "        \"return total_size;\\n\");",
          "new_line_content": "    format(\"}\\n\");",
          "content_same": false
        },
        {
          "line": 3985,
          "old_api": null,
          "new_api": "format",
          "old_text": null,
          "new_text": "format(\n      \"::size_t $classname$::ByteSizeLong() const {\\n\"\n      \"$annotate_bytesize$\"\n      \"// @@protoc_insertion_point(message_byte_size_start:$full_name$)\\n\")",
          "old_line_content": "  }",
          "new_line_content": "  format(",
          "content_same": false
        },
        {
          "line": 3989,
          "old_api": null,
          "new_api": "Indent",
          "old_text": null,
          "new_text": "format.Indent()",
          "old_line_content": "      \"$annotate_bytesize$\"",
          "new_line_content": "  format.Indent();",
          "content_same": false
        },
        {
          "line": 3990,
          "old_api": null,
          "new_api": "format",
          "old_text": null,
          "new_text": "format(\n      \"::size_t total_size = 0;\\n\"\n      \"\\n\")",
          "old_line_content": "      \"// @@protoc_insertion_point(message_byte_size_start:$full_name$)\\n\");",
          "new_line_content": "  format(",
          "content_same": false
        },
        {
          "line": 3994,
          "old_api": null,
          "new_api": "extension_range_count",
          "old_text": null,
          "new_text": "descriptor_->extension_range_count()",
          "old_line_content": "      \"\\n\");",
          "new_line_content": "  if (descriptor_->extension_range_count() > 0) {",
          "content_same": false
        },
        {
          "line": 3995,
          "old_api": null,
          "new_api": "ByteSize",
          "old_text": null,
          "new_text": "format(\n        \"total_size += $extensions$.ByteSize();\\n\"\n        \"\\n\")",
          "old_line_content": "",
          "new_line_content": "    format(",
          "content_same": false
        },
        {
          "line": 4005,
          "old_api": null,
          "new_api": "RequiredFieldsBitMask",
          "old_text": null,
          "new_text": "RequiredFieldsBitMask()",
          "old_line_content": "  if (num_required_fields_ > 1) {",
          "new_line_content": "    const std::vector<uint32_t> masks_for_has_bits = RequiredFieldsBitMask();",
          "content_same": false
        },
        {
          "line": 4006,
          "old_api": null,
          "new_api": "format",
          "old_text": null,
          "new_text": "format(\"if ($1$) {  // All required fields are present.\\n\",\n           ConditionalToCheckBitmasks(masks_for_has_bits))",
          "old_line_content": "    // The fast path works if all required fields are present.",
          "new_line_content": "    format(\"if ($1$) {  // All required fields are present.\\n\",",
          "content_same": false
        },
        {
          "line": 4012,
          "old_api": null,
          "new_api": "is_required",
          "old_text": null,
          "new_text": "field->is_required()",
          "old_line_content": "    // fields that we need to potentially emit.",
          "new_line_content": "      if (!field->is_required()) continue;",
          "content_same": false
        },
        {
          "line": 4013,
          "old_api": null,
          "new_api": "PrintFieldComment",
          "old_text": null,
          "new_text": "PrintFieldComment(format, field)",
          "old_line_content": "    for (auto field : optimized_order_) {",
          "new_line_content": "      PrintFieldComment(format, field);",
          "content_same": false
        },
        {
          "line": 4018,
          "old_api": null,
          "new_api": "format",
          "old_text": null,
          "new_text": "format(\n        \"} else {\\n\"  // the slow path\n        \"  total_size += RequiredFieldsByteSizeFallback();\\n\"\n        \"}\\n\")",
          "old_line_content": "    }",
          "new_line_content": "    format(",
          "content_same": false
        },
        {
          "line": 4025,
          "old_api": null,
          "new_api": "is_required",
          "old_text": null,
          "new_text": "field->is_required()",
          "old_line_content": "    // num_required_fields_ <= 1: no need to be tricky",
          "new_line_content": "      if (!field->is_required()) continue;",
          "content_same": false
        },
        {
          "line": 4026,
          "old_api": null,
          "new_api": "PrintFieldComment",
          "old_text": null,
          "new_text": "PrintFieldComment(format, field)",
          "old_line_content": "    for (auto field : optimized_order_) {",
          "new_line_content": "      PrintFieldComment(format, field);",
          "content_same": false
        },
        {
          "line": 4035,
          "old_api": null,
          "new_api": "label",
          "old_text": null,
          "new_text": "CollectFields(\n      optimized_order_,\n      [&](const FieldDescriptor* a, const FieldDescriptor* b) -> bool {\n        return a->label() == b->label() && HasByteIndex(a) == HasByteIndex(b) &&\n               ShouldSplit(a, options_) == ShouldSplit(b, options_);\n      })",
          "old_line_content": "  }",
          "new_line_content": "  std::vector<std::vector<const FieldDescriptor*>> chunks = CollectFields(",
          "content_same": false
        },
        {
          "line": 4038,
          "old_api": null,
          "new_api": "HasByteIndex",
          "old_text": null,
          "new_text": "HasByteIndex(b)",
          "old_line_content": "      optimized_order_,",
          "new_line_content": "        return a->label() == b->label() && HasByteIndex(a) == HasByteIndex(b) &&",
          "content_same": false
        },
        {
          "line": 4039,
          "old_api": null,
          "new_api": "ShouldSplit",
          "old_text": null,
          "new_text": "ShouldSplit(b, options_)",
          "old_line_content": "      [&](const FieldDescriptor* a, const FieldDescriptor* b) -> bool {",
          "new_line_content": "               ShouldSplit(a, options_) == ShouldSplit(b, options_);",
          "content_same": false
        },
        {
          "line": 4043,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "chunks.end()",
          "old_line_content": "",
          "new_line_content": "  chunks.erase(std::remove_if(chunks.begin(), chunks.end(), IsRequired),",
          "content_same": false
        },
        {
          "line": 4044,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "chunks.end()",
          "old_line_content": "  // Remove chunks with required fields.",
          "new_line_content": "               chunks.end());",
          "content_same": false
        },
        {
          "line": 4050,
          "old_api": null,
          "new_api": "format",
          "old_text": null,
          "new_text": "format(\n      \"$uint32$ cached_has_bits = 0;\\n\"\n      \"// Prevent compiler warnings about cached_has_bits being unused\\n\"\n      \"(void) cached_has_bits;\\n\\n\")",
          "old_line_content": "  int cached_has_word_index = -1;",
          "new_line_content": "  format(",
          "content_same": false
        },
        {
          "line": 4055,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "chunks.size()",
          "old_line_content": "      \"(void) cached_has_bits;\\n\\n\");",
          "new_line_content": "  for (int chunk_index = 0; chunk_index < chunks.size(); chunk_index++) {",
          "content_same": false
        },
        {
          "line": 4058,
          "old_api": null,
          "new_api": "HasWordIndex",
          "old_text": null,
          "new_text": "HasWordIndex(chunk[0])",
          "old_line_content": "    const std::vector<const FieldDescriptor*>& chunk = chunks[chunk_index];",
          "new_line_content": "        chunk.size() > 1 && HasWordIndex(chunk[0]) != kNoHasbit;",
          "content_same": false
        },
        {
          "line": 4059,
          "old_api": null,
          "new_api": "OnStartChunk",
          "old_text": null,
          "new_text": "cold_skipper.OnStartChunk(chunk_index, cached_has_word_index, \"\", p)",
          "old_line_content": "    const bool have_outer_if =",
          "new_line_content": "    cold_skipper.OnStartChunk(chunk_index, cached_has_word_index, \"\", p);",
          "content_same": false
        },
        {
          "line": 4063,
          "old_api": null,
          "new_api": "GenChunkMask",
          "old_text": null,
          "new_text": "GenChunkMask(chunk, has_bit_indices_)",
          "old_line_content": "    if (have_outer_if) {",
          "new_line_content": "      uint32_t chunk_mask = GenChunkMask(chunk, has_bit_indices_);",
          "content_same": false
        },
        {
          "line": 4070,
          "old_api": null,
          "new_api": "popcnt",
          "old_text": null,
          "new_text": "popcnt(chunk_mask)",
          "old_line_content": "      // this chunk.  Due to field layout ordering, we may check",
          "new_line_content": "      ABSL_DCHECK_LE(2, popcnt(chunk_mask));",
          "content_same": false
        },
        {
          "line": 4071,
          "old_api": null,
          "new_api": "popcnt",
          "old_text": null,
          "new_text": "popcnt(chunk_mask)",
          "old_line_content": "      // _has_bits_[last_chunk * 8 / 32] multiple times.",
          "new_line_content": "      ABSL_DCHECK_GE(8, popcnt(chunk_mask));",
          "content_same": false
        },
        {
          "line": 4074,
          "old_api": null,
          "new_api": "front",
          "old_text": null,
          "new_text": "chunk.front()",
          "old_line_content": "",
          "new_line_content": "        cached_has_word_index = HasWordIndex(chunk.front());",
          "content_same": false
        },
        {
          "line": 4078,
          "old_api": null,
          "new_api": "Indent",
          "old_text": null,
          "new_text": "format.Indent()",
          "old_line_content": "      }",
          "new_line_content": "      format.Indent();",
          "content_same": false
        },
        {
          "line": 4082,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "chunk.size()",
          "old_line_content": "",
          "new_line_content": "    for (int j = 0; j < chunk.size(); j++) {",
          "content_same": false
        },
        {
          "line": 4087,
          "old_api": null,
          "new_api": "PrintFieldComment",
          "old_text": null,
          "new_text": "PrintFieldComment(format, field)",
          "old_line_content": "      bool need_extra_newline = false;",
          "new_line_content": "      PrintFieldComment(format, field);",
          "content_same": false
        },
        {
          "line": 4092,
          "old_api": null,
          "new_api": "HasHasbit",
          "old_text": null,
          "new_text": "HasHasbit(field)",
          "old_line_content": "        // No presence check is required.",
          "new_line_content": "      } else if (HasHasbit(field)) {",
          "content_same": false
        },
        {
          "line": 4093,
          "old_api": null,
          "new_api": "PrintPresenceCheck",
          "old_text": null,
          "new_text": "PrintPresenceCheck(field, has_bit_indices_, p, &cached_has_word_index)",
          "old_line_content": "        need_extra_newline = true;",
          "new_line_content": "        PrintPresenceCheck(field, has_bit_indices_, p, &cached_has_word_index);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 4100,
          "old_api": "EmitFieldNonDefaultCondition",
          "new_api": null,
          "old_text": "EmitFieldNonDefaultCondition(p, \"this->\", field)",
          "new_text": null,
          "old_line_content": "        have_enclosing_if = EmitFieldNonDefaultCondition(p, \"this->\", field);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4103,
          "old_api": "get",
          "new_api": null,
          "old_text": "field_generators_.get(field).GenerateByteSize(p)",
          "new_text": null,
          "old_line_content": "      field_generators_.get(field).GenerateByteSize(p);",
          "new_line_content": "      if (have_enclosing_if) {",
          "content_same": false
        },
        {
          "line": 4106,
          "old_api": "Outdent",
          "new_api": null,
          "old_text": "format.Outdent()",
          "new_text": null,
          "old_line_content": "        format.Outdent();",
          "new_line_content": "            \"}\\n\"",
          "content_same": false
        },
        {
          "line": 4107,
          "old_api": "format",
          "new_api": null,
          "old_text": "format(\n            \"}\\n\"\n            \"\\n\")",
          "new_text": null,
          "old_line_content": "        format(",
          "new_line_content": "            \"\\n\");",
          "content_same": false
        },
        {
          "line": 4112,
          "old_api": "format",
          "new_api": null,
          "old_text": "format(\"\\n\")",
          "new_text": null,
          "old_line_content": "        format(\"\\n\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4117,
          "old_api": "Outdent",
          "new_api": null,
          "old_text": "format.Outdent()",
          "new_text": null,
          "old_line_content": "      format.Outdent();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4118,
          "old_api": "format",
          "new_api": null,
          "old_text": "format(\"}\\n\")",
          "new_text": null,
          "old_line_content": "      format(\"}\\n\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4121,
          "old_api": "OnEndChunk",
          "new_api": null,
          "old_text": "cold_skipper.OnEndChunk(chunk_index, p)",
          "new_text": null,
          "old_line_content": "    if (cold_skipper.OnEndChunk(chunk_index, p)) {",
          "new_line_content": "      cached_has_word_index = -1;",
          "content_same": false
        },
        {
          "line": 4138,
          "old_api": "Outdent",
          "new_api": null,
          "old_text": "format.Outdent()",
          "new_text": null,
          "old_line_content": "      format.Outdent();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4141,
          "old_api": "name",
          "new_api": null,
          "old_text": "format(\n        \"case $1$_NOT_SET: {\\n\"\n        \"  break;\\n\"\n        \"}\\n\",\n        absl::AsciiStrToUpper(oneof->name()))",
          "new_text": null,
          "old_line_content": "    format(",
          "new_line_content": "        \"  break;\\n\"",
          "content_same": false
        },
        {
          "line": 4146,
          "old_api": "Outdent",
          "new_api": null,
          "old_text": "format.Outdent()",
          "new_text": null,
          "old_line_content": "    format.Outdent();",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 4147,
          "old_api": "format",
          "new_api": null,
          "old_text": "format(\"}\\n\")",
          "new_text": null,
          "old_line_content": "    format(\"}\\n\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4152,
          "old_api": "ByteSizeLong",
          "new_api": null,
          "old_text": "format(\"total_size += $weak_field_map$.ByteSizeLong();\\n\")",
          "new_text": null,
          "old_line_content": "    format(\"total_size += $weak_field_map$.ByteSizeLong();\\n\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3642,
          "old_api": "file",
          "new_api": null,
          "old_text": "mg->descriptor_->file()->syntax()",
          "new_text": null,
          "old_line_content": "          eager_(mg->descriptor_->file()->syntax() ==",
          "new_line_content": "          cached_has_bit_index_(kNoHasbit) {}",
          "content_same": false
        },
        {
          "line": 4155,
          "old_api": "file",
          "new_api": null,
          "old_text": "descriptor_->file()",
          "new_text": null,
          "old_line_content": "  if (UseUnknownFieldSet(descriptor_->file(), options_)) {",
          "new_line_content": "    // unknown fields in tail position. This allows for better code generation",
          "content_same": false
        },
        {
          "line": 3646,
          "old_api": "Flush",
          "new_api": null,
          "old_text": "Flush()",
          "new_text": null,
          "old_line_content": "    ~LazySerializerEmitter() { Flush(); }",
          "new_line_content": "    // If conditions allow, try to accumulate a run of fields from the same",
          "content_same": false
        },
        {
          "line": 4159,
          "old_api": "format",
          "new_api": null,
          "old_text": "format(\n        \"return MaybeComputeUnknownFieldsSize(total_size, &$cached_size$);\\n\")",
          "new_text": null,
          "old_line_content": "    format(",
          "new_line_content": "  } else {",
          "content_same": false
        },
        {
          "line": 4163,
          "old_api": "size",
          "new_api": null,
          "old_text": "format(\"  total_size += $unknown_fields$.size();\\n\")",
          "new_text": null,
          "old_line_content": "    format(\"  total_size += $unknown_fields$.size();\\n\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4164,
          "old_api": "format",
          "new_api": null,
          "old_text": "format(\"}\\n\")",
          "new_text": null,
          "old_line_content": "    format(\"}\\n\");",
          "new_line_content": "    // We update _cached_size_ even though this is a const method.  Because",
          "content_same": false
        },
        {
          "line": 3653,
          "old_api": "Flush",
          "new_api": null,
          "old_text": "Flush()",
          "new_text": null,
          "old_line_content": "        Flush();",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 3655,
          "old_api": "real_containing_oneof",
          "new_api": null,
          "old_text": "field->real_containing_oneof()",
          "new_text": null,
          "old_line_content": "      if (!field->real_containing_oneof()) {",
          "new_line_content": "        // TODO(ckennelly): Defer non-oneof fields similarly to oneof fields.",
          "content_same": false
        },
        {
          "line": 3658,
          "old_api": "is_repeated",
          "new_api": null,
          "old_text": "field->is_repeated()",
          "new_text": null,
          "old_line_content": "        if (!field->options().weak() && !field->is_repeated() && !eager_) {",
          "new_line_content": "          // We speculatively load the entire _has_bits_[index] contents, even",
          "content_same": false
        },
        {
          "line": 3662,
          "old_api": "index",
          "new_api": null,
          "old_text": "field->index()",
          "new_text": null,
          "old_line_content": "          int has_bit_index = mg_->has_bit_indices_[field->index()];",
          "new_line_content": "          if (cached_has_bit_index_ != has_bit_index / 32) {",
          "content_same": false
        },
        {
          "line": 4174,
          "old_api": "format",
          "new_api": null,
          "old_text": "format(\n        \"int cached_size = ::_pbi::ToCachedSize(total_size);\\n\"\n        \"SetCachedSize(cached_size);\\n\"\n        \"return total_size;\\n\")",
          "new_text": null,
          "old_line_content": "    format(",
          "new_line_content": "        \"SetCachedSize(cached_size);\\n\"",
          "content_same": false
        },
        {
          "line": 3667,
          "old_api": "format",
          "new_api": null,
          "old_text": "format(\"cached_has_bits = _impl_._has_bits_[$1$];\\n\", new_index)",
          "new_text": null,
          "old_line_content": "            format(\"cached_has_bits = _impl_._has_bits_[$1$];\\n\", new_index);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4180,
          "old_api": "Outdent",
          "new_api": null,
          "old_text": "format.Outdent()",
          "new_text": null,
          "old_line_content": "  format.Outdent();",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4181,
          "old_api": "format",
          "new_api": null,
          "old_text": "format(\"}\\n\")",
          "new_text": null,
          "old_line_content": "  format(\"}\\n\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3673,
          "old_api": "GenerateSerializeOneField",
          "new_api": null,
          "old_text": "mg_->GenerateSerializeOneField(p_, field, cached_has_bit_index_)",
          "new_text": null,
          "old_line_content": "        mg_->GenerateSerializeOneField(p_, field, cached_has_bit_index_);",
          "new_line_content": "      } else {",
          "content_same": false
        },
        {
          "line": 3675,
          "old_api": "push_back",
          "new_api": null,
          "old_text": "v_.push_back(field)",
          "new_text": null,
          "old_line_content": "        v_.push_back(field);",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 4187,
          "old_api": "format",
          "new_api": null,
          "old_text": "format(\"bool $classname$::IsInitialized() const {\\n\")",
          "new_text": null,
          "old_line_content": "  format(\"bool $classname$::IsInitialized() const {\\n\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4190,
          "old_api": "extension_range_count",
          "new_api": null,
          "old_text": "descriptor_->extension_range_count()",
          "new_text": null,
          "old_line_content": "  if (descriptor_->extension_range_count() > 0) {",
          "new_line_content": "        \"if (!$extensions$.IsInitialized(internal_default_instance())) {\\n\"",
          "content_same": false
        },
        {
          "line": 4191,
          "old_api": "IsInitialized",
          "new_api": null,
          "old_text": "format(\n        \"if (!$extensions$.IsInitialized(internal_default_instance())) {\\n\"\n        \"  return false;\\n\"\n        \"}\\n\\n\")",
          "new_text": null,
          "old_line_content": "    format(",
          "new_line_content": "        \"  return false;\\n\"",
          "content_same": false
        },
        {
          "line": 3681,
          "old_api": "Emit",
          "new_api": null,
          "old_text": "Emit(field)",
          "new_text": null,
          "old_line_content": "        Emit(field);",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 4198,
          "old_api": "format",
          "new_api": null,
          "old_text": "format(\n        \"if (_Internal::MissingRequiredFields($has_bits$))\"\n        \" return false;\\n\")",
          "new_text": null,
          "old_line_content": "    format(",
          "new_line_content": "        \" return false;\\n\");",
          "content_same": false
        },
        {
          "line": 3688,
          "old_api": "clear",
          "new_api": null,
          "old_text": "v_.clear()",
          "new_text": null,
          "old_line_content": "        v_.clear();",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 4205,
          "old_api": "get",
          "new_api": null,
          "old_text": "field_generators_.get(field).GenerateIsInitialized(p)",
          "new_text": null,
          "old_line_content": "    field_generators_.get(field).GenerateIsInitialized(p);",
          "new_line_content": "  if (num_weak_fields_) {",
          "content_same": false
        },
        {
          "line": 3697,
          "old_api": "containing_oneof",
          "new_api": null,
          "old_text": "field->containing_oneof()",
          "new_text": null,
          "old_line_content": "             v_[0]->containing_oneof() != field->containing_oneof();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4209,
          "old_api": "IsInitialized",
          "new_api": null,
          "old_text": "format(\"if (!$weak_field_map$.IsInitialized()) return false;\\n\")",
          "new_text": null,
          "old_line_content": "    format(\"if (!$weak_field_map$.IsInitialized()) return false;\\n\");",
          "new_line_content": "  // Go through the oneof fields, emitting a switch if any might have required",
          "content_same": false
        },
        {
          "line": 4217,
          "old_api": "ShouldIgnoreRequiredFieldCheck",
          "new_api": null,
          "old_text": "ShouldIgnoreRequiredFieldCheck(field, options_)",
          "new_text": null,
          "old_line_content": "          !ShouldIgnoreRequiredFieldCheck(field, options_) &&",
          "new_line_content": "        has_required_fields = true;",
          "content_same": false
        },
        {
          "line": 4218,
          "old_api": "message_type",
          "new_api": null,
          "old_text": "field->message_type()",
          "new_text": null,
          "old_line_content": "          scc_analyzer_->HasRequiredFields(field->message_type())) {",
          "new_line_content": "        break;",
          "content_same": false
        },
        {
          "line": 4235,
          "old_api": "Outdent",
          "new_api": null,
          "old_text": "format.Outdent()",
          "new_text": null,
          "old_line_content": "      format.Outdent();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3724,
          "old_api": "std::max(current_combined_range_.end, range->end)",
          "new_api": null,
          "old_text": "std::max(current_combined_range_.end, range->end)",
          "new_text": null,
          "old_line_content": "            std::max(current_combined_range_.end, range->end);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4238,
          "old_api": "name",
          "new_api": null,
          "old_text": "format(\n        \"case $1$_NOT_SET: {\\n\"\n        \"  break;\\n\"\n        \"}\\n\",\n        absl::AsciiStrToUpper(oneof->name()))",
          "new_text": null,
          "old_line_content": "    format(",
          "new_line_content": "        \"  break;\\n\"",
          "content_same": false
        },
        {
          "line": 3730,
          "old_api": "GenerateSerializeOneExtensionRange",
          "new_api": null,
          "old_text": "mg_->GenerateSerializeOneExtensionRange(p_, &current_combined_range_)",
          "new_text": null,
          "old_line_content": "        mg_->GenerateSerializeOneExtensionRange(p_, &current_combined_range_);",
          "new_line_content": "      has_current_range_ = false;",
          "content_same": false
        },
        {
          "line": 4243,
          "old_api": "Outdent",
          "new_api": null,
          "old_text": "format.Outdent()",
          "new_text": null,
          "old_line_content": "    format.Outdent();",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 4244,
          "old_api": "format",
          "new_api": null,
          "old_text": "format(\"}\\n\")",
          "new_text": null,
          "old_line_content": "    format(\"}\\n\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4247,
          "old_api": "Outdent",
          "new_api": null,
          "old_text": "format.Outdent()",
          "new_text": null,
          "old_line_content": "  format.Outdent();",
          "new_line_content": "      \"  return true;\\n\"",
          "content_same": false
        },
        {
          "line": 4248,
          "old_api": "format",
          "new_api": null,
          "old_text": "format(\n      \"  return true;\\n\"\n      \"}\\n\")",
          "new_text": null,
          "old_line_content": "  format(",
          "new_line_content": "      \"}\\n\");",
          "content_same": false
        },
        {
          "line": 3756,
          "old_api": "number",
          "new_api": null,
          "old_text": "field->number()",
          "new_text": null,
          "old_line_content": "      if (field_ == nullptr || field_->number() < field->number()) {",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 3766,
          "old_api": "SortFieldsByNumber",
          "new_api": null,
          "old_text": "SortFieldsByNumber(descriptor_)",
          "new_text": null,
          "old_line_content": "      SortFieldsByNumber(descriptor_);",
          "new_line_content": "  std::vector<const Descriptor::ExtensionRange*> sorted_extensions;",
          "content_same": false
        },
        {
          "line": 3770,
          "old_api": "extension_range_count",
          "new_api": null,
          "old_text": "descriptor_->extension_range_count()",
          "new_text": null,
          "old_line_content": "  for (int i = 0; i < descriptor_->extension_range_count(); ++i) {",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 3773,
          "old_api": "end",
          "new_api": null,
          "old_text": "sorted_extensions.end()",
          "new_text": null,
          "old_line_content": "  std::sort(sorted_extensions.begin(), sorted_extensions.end(),",
          "new_line_content": "  if (num_weak_fields_) {",
          "content_same": false
        },
        {
          "line": 3776,
          "old_api": "format",
          "new_api": null,
          "old_text": "format(\n        \"::_pbi::WeakFieldMap::FieldWriter field_writer(\"\n        \"$weak_field_map$);\\n\")",
          "new_text": null,
          "old_line_content": "    format(",
          "new_line_content": "        \"$weak_field_map$);\\n\");",
          "content_same": false
        },
        {
          "line": 3781,
          "old_api": "format",
          "new_api": null,
          "old_text": "format(\n      \"$uint32$ cached_has_bits = 0;\\n\"\n      \"(void) cached_has_bits;\\n\\n\")",
          "new_text": null,
          "old_line_content": "  format(",
          "new_line_content": "      \"(void) cached_has_bits;\\n\\n\");",
          "content_same": false
        },
        {
          "line": 3794,
          "old_api": "field_count",
          "new_api": null,
          "old_text": "descriptor_->field_count()",
          "new_text": null,
          "old_line_content": "          (i < descriptor_->field_count() &&",
          "new_line_content": "        const FieldDescriptor* field = ordered_fields[i++];",
          "content_same": false
        },
        {
          "line": 3799,
          "old_api": "ReplaceIfLarger",
          "new_api": null,
          "old_text": "largest_weak_field.ReplaceIfLarger(field)",
          "new_text": null,
          "old_line_content": "          largest_weak_field.ReplaceIfLarger(field);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 3802,
          "old_api": "Release",
          "new_api": null,
          "old_text": "largest_weak_field.Release()",
          "new_text": null,
          "old_line_content": "          e.EmitIfNotNull(largest_weak_field.Release());",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3803,
          "old_api": "Emit",
          "new_api": null,
          "old_text": "e.Emit(field)",
          "new_text": null,
          "old_line_content": "          e.Emit(field);",
          "new_line_content": "      } else {",
          "content_same": false
        },
        {
          "line": 3807,
          "old_api": "Flush",
          "new_api": null,
          "old_text": "e.Flush()",
          "new_text": null,
          "old_line_content": "        e.Flush();",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 3808,
          "old_api": "AddToRange",
          "new_api": null,
          "old_text": "re.AddToRange(sorted_extensions[j++])",
          "new_text": null,
          "old_line_content": "        re.AddToRange(sorted_extensions[j++]);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3811,
          "old_api": "Flush",
          "new_api": null,
          "old_text": "re.Flush()",
          "new_text": null,
          "old_line_content": "    re.Flush();",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 3812,
          "old_api": "Release",
          "new_api": null,
          "old_text": "largest_weak_field.Release()",
          "new_text": null,
          "old_line_content": "    e.EmitIfNotNull(largest_weak_field.Release());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3817,
          "old_api": "file",
          "new_api": null,
          "old_text": "descriptor_->file()",
          "new_text": null,
          "old_line_content": "  if (UseUnknownFieldSet(descriptor_->file(), options_)) {",
          "new_line_content": "        \"target = \"",
          "content_same": false
        },
        {
          "line": 3818,
          "old_api": "format",
          "new_api": null,
          "old_text": "format(\n        \"target = \"\n        \"::_pbi::WireFormat::\"\n        \"InternalSerializeUnknownFieldsToArray(\\n\"\n        \"    $unknown_fields$, target, stream);\\n\")",
          "new_text": null,
          "old_line_content": "    format(",
          "new_line_content": "        \"::_pbi::WireFormat::\"",
          "content_same": false
        },
        {
          "line": 3824,
          "old_api": "data",
          "new_api": null,
          "old_text": "format(\n        \"target = stream->WriteRaw($unknown_fields$.data(),\\n\"\n        \"    static_cast<int>($unknown_fields$.size()), target);\\n\")",
          "new_text": null,
          "old_line_content": "    format(",
          "new_line_content": "        \"    static_cast<int>($unknown_fields$.size()), target);\\n\");",
          "content_same": false
        },
        {
          "line": 3828,
          "old_api": "Outdent",
          "new_api": null,
          "old_text": "format.Outdent()",
          "new_text": null,
          "old_line_content": "  format.Outdent();",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3829,
          "old_api": "format",
          "new_api": null,
          "old_text": "format(\"}\\n\")",
          "new_text": null,
          "old_line_content": "  format(\"}\\n\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3838,
          "old_api": "erase",
          "new_api": null,
          "old_text": "ordered_fields.erase(\n      std::remove_if(ordered_fields.begin(), ordered_fields.end(),\n                     [this](const FieldDescriptor* f) {\n                       return !IsFieldUsed(f, options_);\n                     }),\n      ordered_fields.end())",
          "new_text": null,
          "old_line_content": "  ordered_fields.erase(",
          "new_line_content": "                     [this](const FieldDescriptor* f) {",
          "content_same": false
        },
        {
          "line": 3843,
          "old_api": "end",
          "new_api": null,
          "old_text": "ordered_fields.end()",
          "new_text": null,
          "old_line_content": "      ordered_fields.end());",
          "new_line_content": "  std::vector<const Descriptor::ExtensionRange*> sorted_extensions;",
          "content_same": false
        },
        {
          "line": 3847,
          "old_api": "extension_range_count",
          "new_api": null,
          "old_text": "descriptor_->extension_range_count()",
          "new_text": null,
          "old_line_content": "  for (int i = 0; i < descriptor_->extension_range_count(); ++i) {",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 3850,
          "old_api": "end",
          "new_api": null,
          "old_text": "sorted_extensions.end()",
          "new_text": null,
          "old_line_content": "  std::sort(sorted_extensions.begin(), sorted_extensions.end(),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3854,
          "old_api": "constexpr",
          "new_api": null,
          "old_text": "constexpr",
          "new_text": null,
          "old_line_content": "  constexpr int kLargePrime = 1000003;",
          "new_line_content": "      << \"Prime offset must be greater than the number of fields to ensure \"",
          "content_same": false
        },
        {
          "line": 3855,
          "old_api": "ABSL_CHECK_LT",
          "new_api": null,
          "old_text": "ABSL_CHECK_LT(num_fields, kLargePrime)",
          "new_text": null,
          "old_line_content": "  ABSL_CHECK_LT(num_fields, kLargePrime)",
          "new_line_content": "         \"those are coprime.\";",
          "content_same": false
        },
        {
          "line": 3860,
          "old_api": "format",
          "new_api": null,
          "old_text": "format(\n        \"::_pbi::WeakFieldMap::FieldWriter field_writer(\"\n        \"$weak_field_map$);\\n\")",
          "new_text": null,
          "old_line_content": "    format(",
          "new_line_content": "        \"$weak_field_map$);\\n\");",
          "content_same": false
        },
        {
          "line": 3868,
          "old_api": "format",
          "new_api": null,
          "old_text": "format(\"switch(i) {\\n\")",
          "new_text": null,
          "old_line_content": "  format(\"switch(i) {\\n\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3869,
          "old_api": "Indent",
          "new_api": null,
          "old_text": "format.Indent()",
          "new_text": null,
          "old_line_content": "  format.Indent();",
          "new_line_content": "  int index = 0;",
          "content_same": false
        },
        {
          "line": 3873,
          "old_api": "format",
          "new_api": null,
          "old_text": "format(\"case $1$: {\\n\", index++)",
          "new_text": null,
          "old_line_content": "    format(\"case $1$: {\\n\", index++);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3879,
          "old_api": "Outdent",
          "new_api": null,
          "old_text": "format.Outdent()",
          "new_text": null,
          "old_line_content": "    format.Outdent();",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 3880,
          "old_api": "format",
          "new_api": null,
          "old_text": "format(\"}\\n\")",
          "new_text": null,
          "old_line_content": "    format(\"}\\n\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3884,
          "old_api": "format",
          "new_api": null,
          "old_text": "format(\"case $1$: {\\n\", index++)",
          "new_text": null,
          "old_line_content": "    format(\"case $1$: {\\n\", index++);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3890,
          "old_api": "Outdent",
          "new_api": null,
          "old_text": "format.Outdent()",
          "new_text": null,
          "old_line_content": "    format.Outdent();",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 3891,
          "old_api": "format",
          "new_api": null,
          "old_text": "format(\"}\\n\")",
          "new_text": null,
          "old_line_content": "    format(\"}\\n\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3894,
          "old_api": "format",
          "new_api": null,
          "old_text": "format(\n      \"default: {\\n\"\n      \"  $DCHK$(false) << \\\"Unexpected index: \\\" << i;\\n\"\n      \"}\\n\")",
          "new_text": null,
          "old_line_content": "  format(",
          "new_line_content": "      \"  $DCHK$(false) << \\\"Unexpected index: \\\" << i;\\n\"",
          "content_same": false
        },
        {
          "line": 3898,
          "old_api": "Outdent",
          "new_api": null,
          "old_text": "format.Outdent()",
          "new_text": null,
          "old_line_content": "  format.Outdent();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3901,
          "old_api": "Outdent",
          "new_api": null,
          "old_text": "format.Outdent()",
          "new_text": null,
          "old_line_content": "  format.Outdent();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3906,
          "old_api": "file",
          "new_api": null,
          "old_text": "descriptor_->file()",
          "new_text": null,
          "old_line_content": "  if (UseUnknownFieldSet(descriptor_->file(), options_)) {",
          "new_line_content": "        \"target = \"",
          "content_same": false
        },
        {
          "line": 3907,
          "old_api": "format",
          "new_api": null,
          "old_text": "format(\n        \"target = \"\n        \"::_pbi::WireFormat::\"\n        \"InternalSerializeUnknownFieldsToArray(\\n\"\n        \"    $unknown_fields$, target, stream);\\n\")",
          "new_text": null,
          "old_line_content": "    format(",
          "new_line_content": "        \"::_pbi::WireFormat::\"",
          "content_same": false
        },
        {
          "line": 3913,
          "old_api": "data",
          "new_api": null,
          "old_text": "format(\n        \"target = stream->WriteRaw($unknown_fields$.data(),\\n\"\n        \"    static_cast<int>($unknown_fields$.size()), target);\\n\")",
          "new_text": null,
          "old_line_content": "    format(",
          "new_line_content": "        \"    static_cast<int>($unknown_fields$.size()), target);\\n\");",
          "content_same": false
        },
        {
          "line": 3917,
          "old_api": "Outdent",
          "new_api": null,
          "old_text": "format.Outdent()",
          "new_text": null,
          "old_line_content": "  format.Outdent();",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3918,
          "old_api": "format",
          "new_api": null,
          "old_text": "format(\"}\\n\")",
          "new_text": null,
          "old_line_content": "  format(\"}\\n\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3922,
          "old_api": "HasBitsSize",
          "new_api": null,
          "old_text": "HasBitsSize()",
          "new_text": null,
          "old_line_content": "  const int array_size = HasBitsSize();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3925,
          "old_api": "FieldRange",
          "new_api": null,
          "old_text": "FieldRange(descriptor_)",
          "new_text": null,
          "old_line_content": "  for (auto field : FieldRange(descriptor_)) {",
          "new_line_content": "      continue;",
          "content_same": false
        },
        {
          "line": 3926,
          "old_api": "is_required",
          "new_api": null,
          "old_text": "field->is_required()",
          "new_text": null,
          "old_line_content": "    if (!field->is_required()) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3930,
          "old_api": "index",
          "new_api": null,
          "old_text": "field->index()",
          "new_text": null,
          "old_line_content": "    const int has_bit_index = has_bit_indices_[field->index()];",
          "new_line_content": "                                 << (has_bit_index % 32);",
          "content_same": false
        },
        {
          "line": 3931,
          "old_api": "static_cast<uint32_t>(1)",
          "new_api": null,
          "old_text": "static_cast<uint32_t>(1)",
          "new_text": null,
          "old_line_content": "    masks[has_bit_index / 32] |= static_cast<uint32_t>(1)",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 3938,
          "old_api": "HasSimpleBaseClass",
          "new_api": null,
          "old_text": "HasSimpleBaseClass(descriptor_, options_)",
          "new_text": null,
          "old_line_content": "  if (HasSimpleBaseClass(descriptor_, options_)) return;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3943,
          "old_api": "MessageSetByteSize",
          "new_api": null,
          "old_text": "format(\n        \"::size_t $classname$::ByteSizeLong() const {\\n\"\n        \"$annotate_bytesize$\"\n        \"// @@protoc_insertion_point(message_set_byte_size_start:$full_name$)\\n\"\n        \"  ::size_t total_size = $extensions$.MessageSetByteSize();\\n\"\n        \"  if ($have_unknown_fields$) {\\n\"\n        \"    total_size += ::_pbi::\\n\"\n        \"        ComputeUnknownMessageSetItemsSize($unknown_fields$);\\n\"\n        \"  }\\n\"\n        \"  int cached_size = \"\n        \"::_pbi::ToCachedSize(total_size);\\n\"\n        \"  SetCachedSize(cached_size);\\n\"\n        \"  return total_size;\\n\"\n        \"}\\n\")",
          "new_text": null,
          "old_line_content": "    format(",
          "new_line_content": "        \"$annotate_bytesize$\"",
          "content_same": false
        },
        {
          "line": 3963,
          "old_api": "format",
          "new_api": null,
          "old_text": "format(\n        \"::size_t $classname$::RequiredFieldsByteSizeFallback() const {\\n\"\n        \"// @@protoc_insertion_point(required_fields_byte_size_fallback_start:\"\n        \"$full_name$)\\n\")",
          "new_text": null,
          "old_line_content": "    format(",
          "new_line_content": "        \"// @@protoc_insertion_point(required_fields_byte_size_fallback_start:\"",
          "content_same": false
        },
        {
          "line": 3967,
          "old_api": "Indent",
          "new_api": null,
          "old_text": "format.Indent()",
          "new_text": null,
          "old_line_content": "    format.Indent();",
          "new_line_content": "    for (auto field : optimized_order_) {",
          "content_same": false
        },
        {
          "line": 3976,
          "old_api": "Outdent",
          "new_api": null,
          "old_text": "format.Outdent()",
          "new_text": null,
          "old_line_content": "        format.Outdent();",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 3977,
          "old_api": "format",
          "new_api": null,
          "old_text": "format(\"}\\n\")",
          "new_text": null,
          "old_line_content": "        format(\"}\\n\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3980,
          "old_api": "format",
          "new_api": null,
          "old_text": "format(\n        \"\\n\"\n        \"return total_size;\\n\")",
          "new_text": null,
          "old_line_content": "    format(",
          "new_line_content": "        \"return total_size;\\n\");",
          "content_same": false
        },
        {
          "line": 3983,
          "old_api": "Outdent",
          "new_api": null,
          "old_text": "format.Outdent()",
          "new_text": null,
          "old_line_content": "    format.Outdent();",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 3984,
          "old_api": "format",
          "new_api": null,
          "old_text": "format(\"}\\n\")",
          "new_text": null,
          "old_line_content": "    format(\"}\\n\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3987,
          "old_api": "format",
          "new_api": null,
          "old_text": "format(\n      \"::size_t $classname$::ByteSizeLong() const {\\n\"\n      \"$annotate_bytesize$\"\n      \"// @@protoc_insertion_point(message_byte_size_start:$full_name$)\\n\")",
          "new_text": null,
          "old_line_content": "  format(",
          "new_line_content": "      \"$annotate_bytesize$\"",
          "content_same": false
        },
        {
          "line": 3991,
          "old_api": "Indent",
          "new_api": null,
          "old_text": "format.Indent()",
          "new_text": null,
          "old_line_content": "  format.Indent();",
          "new_line_content": "      \"::size_t total_size = 0;\\n\"",
          "content_same": false
        },
        {
          "line": 3992,
          "old_api": "format",
          "new_api": null,
          "old_text": "format(\n      \"::size_t total_size = 0;\\n\"\n      \"\\n\")",
          "new_text": null,
          "old_line_content": "  format(",
          "new_line_content": "      \"\\n\");",
          "content_same": false
        },
        {
          "line": 3996,
          "old_api": "extension_range_count",
          "new_api": null,
          "old_text": "descriptor_->extension_range_count()",
          "new_text": null,
          "old_line_content": "  if (descriptor_->extension_range_count() > 0) {",
          "new_line_content": "        \"total_size += $extensions$.ByteSize();\\n\"",
          "content_same": false
        },
        {
          "line": 3997,
          "old_api": "ByteSize",
          "new_api": null,
          "old_text": "format(\n        \"total_size += $extensions$.ByteSize();\\n\"\n        \"\\n\")",
          "new_text": null,
          "old_line_content": "    format(",
          "new_line_content": "        \"\\n\");",
          "content_same": false
        },
        {
          "line": 4009,
          "old_api": "ConditionalToCheckBitmasks",
          "new_api": null,
          "old_text": "ConditionalToCheckBitmasks(masks_for_has_bits)",
          "new_text": null,
          "old_line_content": "           ConditionalToCheckBitmasks(masks_for_has_bits));",
          "new_line_content": "    // Oneof fields cannot be required, so optimized_order_ contains all of the",
          "content_same": false
        },
        {
          "line": 4010,
          "old_api": "Indent",
          "new_api": null,
          "old_text": "format.Indent()",
          "new_text": null,
          "old_line_content": "    format.Indent();",
          "new_line_content": "    // fields that we need to potentially emit.",
          "content_same": false
        },
        {
          "line": 4016,
          "old_api": "get",
          "new_api": null,
          "old_text": "field_generators_.get(field).GenerateByteSize(p)",
          "new_text": null,
          "old_line_content": "      field_generators_.get(field).GenerateByteSize(p);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4019,
          "old_api": "Outdent",
          "new_api": null,
          "old_text": "format.Outdent()",
          "new_text": null,
          "old_line_content": "    format.Outdent();",
          "new_line_content": "        \"} else {\\n\"  // the slow path",
          "content_same": false
        },
        {
          "line": 4020,
          "old_api": "format",
          "new_api": null,
          "old_text": "format(\n        \"} else {\\n\"  // the slow path\n        \"  total_size += RequiredFieldsByteSizeFallback();\\n\"\n        \"}\\n\")",
          "new_text": null,
          "old_line_content": "    format(",
          "new_line_content": "        \"  total_size += RequiredFieldsByteSizeFallback();\\n\"",
          "content_same": false
        },
        {
          "line": 4032,
          "old_api": "Outdent",
          "new_api": null,
          "old_text": "format.Outdent()",
          "new_text": null,
          "old_line_content": "      format.Outdent();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4033,
          "old_api": "format",
          "new_api": null,
          "old_text": "format(\"}\\n\")",
          "new_text": null,
          "old_line_content": "      format(\"}\\n\");",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 4037,
          "old_api": "label",
          "new_api": null,
          "old_text": "CollectFields(\n      optimized_order_,\n      [&](const FieldDescriptor* a, const FieldDescriptor* b) -> bool {\n        return a->label() == b->label() && HasByteIndex(a) == HasByteIndex(b) &&\n               ShouldSplit(a, options_) == ShouldSplit(b, options_);\n      })",
          "new_text": null,
          "old_line_content": "  std::vector<std::vector<const FieldDescriptor*>> chunks = CollectFields(",
          "new_line_content": "      [&](const FieldDescriptor* a, const FieldDescriptor* b) -> bool {",
          "content_same": false
        },
        {
          "line": 4040,
          "old_api": "HasByteIndex",
          "new_api": null,
          "old_text": "HasByteIndex(b)",
          "new_text": null,
          "old_line_content": "        return a->label() == b->label() && HasByteIndex(a) == HasByteIndex(b) &&",
          "new_line_content": "      });",
          "content_same": false
        },
        {
          "line": 4041,
          "old_api": "ShouldSplit",
          "new_api": null,
          "old_text": "ShouldSplit(b, options_)",
          "new_text": null,
          "old_line_content": "               ShouldSplit(a, options_) == ShouldSplit(b, options_);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4045,
          "old_api": "end",
          "new_api": null,
          "old_text": "chunks.end()",
          "new_text": null,
          "old_line_content": "  chunks.erase(std::remove_if(chunks.begin(), chunks.end(), IsRequired),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4046,
          "old_api": "end",
          "new_api": null,
          "old_text": "chunks.end()",
          "new_text": null,
          "old_line_content": "               chunks.end());",
          "new_line_content": "  ColdChunkSkipper cold_skipper(descriptor_, options_, chunks, has_bit_indices_,",
          "content_same": false
        },
        {
          "line": 4052,
          "old_api": "format",
          "new_api": null,
          "old_text": "format(\n      \"$uint32$ cached_has_bits = 0;\\n\"\n      \"// Prevent compiler warnings about cached_has_bits being unused\\n\"\n      \"(void) cached_has_bits;\\n\\n\")",
          "new_text": null,
          "old_line_content": "  format(",
          "new_line_content": "      \"// Prevent compiler warnings about cached_has_bits being unused\\n\"",
          "content_same": false
        },
        {
          "line": 4057,
          "old_api": "size",
          "new_api": null,
          "old_text": "chunks.size()",
          "new_text": null,
          "old_line_content": "  for (int chunk_index = 0; chunk_index < chunks.size(); chunk_index++) {",
          "new_line_content": "    const bool have_outer_if =",
          "content_same": false
        },
        {
          "line": 4060,
          "old_api": "HasWordIndex",
          "new_api": null,
          "old_text": "HasWordIndex(chunk[0])",
          "new_text": null,
          "old_line_content": "        chunk.size() > 1 && HasWordIndex(chunk[0]) != kNoHasbit;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4061,
          "old_api": "OnStartChunk",
          "new_api": null,
          "old_text": "cold_skipper.OnStartChunk(chunk_index, cached_has_word_index, \"\", p)",
          "new_text": null,
          "old_line_content": "    cold_skipper.OnStartChunk(chunk_index, cached_has_word_index, \"\", p);",
          "new_line_content": "    if (have_outer_if) {",
          "content_same": false
        },
        {
          "line": 4067,
          "old_api": "absl::Hex(chunk_mask, absl::kZeroPad8)",
          "new_api": null,
          "old_text": "absl::Hex(chunk_mask, absl::kZeroPad8)",
          "new_text": null,
          "old_line_content": "          absl::StrCat(absl::Hex(chunk_mask, absl::kZeroPad8));",
          "new_line_content": "      // Check (up to) 8 has_bits at a time if we have more than one field in",
          "content_same": false
        },
        {
          "line": 4072,
          "old_api": "popcnt",
          "new_api": null,
          "old_text": "popcnt(chunk_mask)",
          "new_text": null,
          "old_line_content": "      ABSL_DCHECK_LE(2, popcnt(chunk_mask));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4076,
          "old_api": "front",
          "new_api": null,
          "old_text": "chunk.front()",
          "new_text": null,
          "old_line_content": "        cached_has_word_index = HasWordIndex(chunk.front());",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 4079,
          "old_api": "format",
          "new_api": null,
          "old_text": "format(\"if (cached_has_bits & 0x$1$u) {\\n\", chunk_mask_str)",
          "new_text": null,
          "old_line_content": "      format(\"if (cached_has_bits & 0x$1$u) {\\n\", chunk_mask_str);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4080,
          "old_api": "Indent",
          "new_api": null,
          "old_text": "format.Indent()",
          "new_text": null,
          "old_line_content": "      format.Indent();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4084,
          "old_api": "size",
          "new_api": null,
          "old_text": "chunk.size()",
          "new_text": null,
          "old_line_content": "    for (int j = 0; j < chunk.size(); j++) {",
          "new_line_content": "      bool have_enclosing_if = false;",
          "content_same": false
        },
        {
          "line": 4091,
          "old_api": "is_repeated",
          "new_api": null,
          "old_text": "field->is_repeated()",
          "new_text": null,
          "old_line_content": "      if (field->is_repeated()) {",
          "new_line_content": "        need_extra_newline = true;",
          "content_same": false
        },
        {
          "line": 4094,
          "old_api": "HasHasbit",
          "new_api": null,
          "old_text": "HasHasbit(field)",
          "new_text": null,
          "old_line_content": "      } else if (HasHasbit(field)) {",
          "new_line_content": "        have_enclosing_if = true;",
          "content_same": false
        },
        {
          "line": 4095,
          "old_api": "PrintPresenceCheck",
          "new_api": null,
          "old_text": "PrintPresenceCheck(field, has_bit_indices_, p, &cached_has_word_index)",
          "new_text": null,
          "old_line_content": "        PrintPresenceCheck(field, has_bit_indices_, p, &cached_has_word_index);",
          "new_line_content": "      } else {",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 76,
      "total_additions": 133,
      "total_deletions": 134,
      "total_api_changes": 343
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 8,
        "api_related_lines": 343,
        "non_api_lines": 3,
        "non_api_line_numbers": [
          3650,
          3643,
          3702
        ]
      }
    },
    "api_calls_before": 1660,
    "api_calls_after": 1658,
    "diff_info": {
      "added_lines": 3,
      "removed_lines": 5,
      "total_diff_lines": 39
    }
  }
}
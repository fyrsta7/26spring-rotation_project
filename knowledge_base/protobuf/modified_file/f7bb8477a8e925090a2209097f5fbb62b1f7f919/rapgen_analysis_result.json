{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/protobuf/modified_file/f7bb8477a8e925090a2209097f5fbb62b1f7f919",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/protobuf/modified_file/f7bb8477a8e925090a2209097f5fbb62b1f7f919/before.cc",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/protobuf/modified_file/f7bb8477a8e925090a2209097f5fbb62b1f7f919/after.cc",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/protobuf/modified_file/f7bb8477a8e925090a2209097f5fbb62b1f7f919/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 2866,
          "old_api": "JSGetterName",
          "new_api": "Print",
          "old_text": "JSGetterName(options, field)",
          "new_text": "printer->Print(\"      break;\\n\")",
          "old_line_content": "          \"name\", JSGetterName(options, field));",
          "new_line_content": "  printer->Print(\"      break;\\n\");",
          "content_same": false
        },
        {
          "line": 2909,
          "old_api": "field_count",
          "new_api": "IsExtendable",
          "old_text": "desc->field_count()",
          "new_text": "IsExtendable(desc)",
          "old_line_content": "  for (int i = 0; i < desc->field_count(); i++) {",
          "new_line_content": "  if (IsExtendable(desc)) {",
          "content_same": false
        },
        {
          "line": 2910,
          "old_api": "field",
          "new_api": "serializeBinaryExtensions",
          "old_text": "desc->field(i)",
          "new_text": "printer->Print(\n        \"  jspb.Message.serializeBinaryExtensions(this, writer,\\n\"\n        \"    $extobj$Binary, $class$.prototype.getExtension);\\n\",\n        \"extobj\", JSExtensionsObjectName(options, desc->file(), desc),\n        \"class\", GetPath(options, desc))",
          "old_line_content": "    GenerateClassSerializeBinaryField(options, printer, desc->field(i));",
          "new_line_content": "    printer->Print(",
          "content_same": false
        },
        {
          "line": 2913,
          "old_api": "IsExtendable",
          "new_api": "file",
          "old_text": "IsExtendable(desc)",
          "new_text": "desc->file()",
          "old_line_content": "  if (IsExtendable(desc)) {",
          "new_line_content": "        \"extobj\", JSExtensionsObjectName(options, desc->file(), desc),",
          "content_same": false
        },
        {
          "line": 2914,
          "old_api": "serializeBinaryExtensions",
          "new_api": "GetPath",
          "old_text": "printer->Print(\n        \"  jspb.Message.serializeBinaryExtensions(this, writer,\\n\"\n        \"    $extobj$Binary, $class$.prototype.getExtension);\\n\",\n        \"extobj\", JSExtensionsObjectName(options, desc->file(), desc),\n        \"class\", GetPath(options, desc))",
          "new_text": "GetPath(options, desc)",
          "old_line_content": "    printer->Print(",
          "new_line_content": "        \"class\", GetPath(options, desc));",
          "content_same": false
        },
        {
          "line": 2917,
          "old_api": "file",
          "new_api": "Print",
          "old_text": "desc->file()",
          "new_text": "printer->Print(\n      \"};\\n\"\n      \"\\n\"\n      \"\\n\")",
          "old_line_content": "        \"extobj\", JSExtensionsObjectName(options, desc->file(), desc),",
          "new_line_content": "  printer->Print(",
          "content_same": false
        },
        {
          "line": 2944,
          "old_api": "Print",
          "new_api": "is_map",
          "old_text": "printer->Print(\n        \"  f = this.get$name$($nolazy$);\\n\",\n        \"name\", JSGetterName(options, field, BYTES_U8),\n        // No lazy creation for maps containers -- fastpath the empty case.\n        \"nolazy\", (field->is_map()) ? \"true\" : \"\")",
          "new_text": "field->is_map()",
          "old_line_content": "    printer->Print(",
          "new_line_content": "        \"nolazy\", (field->is_map()) ? \"true\" : \"\");",
          "content_same": false
        },
        {
          "line": 2953,
          "old_api": "IsMap",
          "new_api": "Print",
          "old_text": "IsMap(options, field)",
          "new_text": "printer->Print(\n        \"  if (f.length > 0) {\\n\")",
          "old_line_content": "  if (IsMap(options, field)) {",
          "new_line_content": "    printer->Print(",
          "content_same": false
        },
        {
          "line": 2956,
          "old_api": "is_repeated",
          "new_api": "HasFieldPresence",
          "old_text": "field->is_repeated()",
          "new_text": "HasFieldPresence(options, field)",
          "old_line_content": "  } else if (field->is_repeated()) {",
          "new_line_content": "    if (HasFieldPresence(options, field)) {",
          "content_same": false
        },
        {
          "line": 2989,
          "old_api": "Print",
          "new_api": "assert",
          "old_text": "printer->Print(\n              \"  if (f.length > 0) {\\n\")",
          "new_text": "assert(false)",
          "old_line_content": "          printer->Print(",
          "new_line_content": "          assert(false);",
          "content_same": false
        },
        {
          "line": 3002,
          "old_api": "MapFieldValue",
          "new_api": "number",
          "old_text": "MapFieldValue(field)",
          "new_text": "field->number()",
          "old_line_content": "    const FieldDescriptor* value_field = MapFieldValue(field);",
          "new_line_content": "        \"index\", SimpleItoa(field->number()),",
          "content_same": false
        },
        {
          "line": 3003,
          "old_api": "serializeBinary",
          "new_api": "JSBinaryWriterMethodName",
          "old_text": "printer->Print(\n        \"    f.serializeBinary($index$, writer, \"\n                              \"$keyWriterFn$, $valueWriterFn$\",\n        \"index\", SimpleItoa(field->number()),\n        \"keyWriterFn\", JSBinaryWriterMethodName(options, key_field),\n        \"valueWriterFn\", JSBinaryWriterMethodName(options, value_field))",
          "new_text": "JSBinaryWriterMethodName(options, key_field)",
          "old_line_content": "    printer->Print(",
          "new_line_content": "        \"keyWriterFn\", JSBinaryWriterMethodName(options, key_field),",
          "content_same": false
        },
        {
          "line": 3006,
          "old_api": "number",
          "new_api": "type",
          "old_text": "field->number()",
          "new_text": "value_field->type()",
          "old_line_content": "        \"index\", SimpleItoa(field->number()),",
          "new_line_content": "    if (value_field->type() == FieldDescriptor::TYPE_MESSAGE) {",
          "content_same": false
        },
        {
          "line": 3007,
          "old_api": "JSBinaryWriterMethodName",
          "new_api": "Print",
          "old_text": "JSBinaryWriterMethodName(options, key_field)",
          "new_text": "printer->Print(\", $messageType$.serializeBinaryToWriter\",\n          \"messageType\", GetPath(options, value_field->message_type()))",
          "old_line_content": "        \"keyWriterFn\", JSBinaryWriterMethodName(options, key_field),",
          "new_line_content": "      printer->Print(\", $messageType$.serializeBinaryToWriter\",",
          "content_same": false
        },
        {
          "line": 3008,
          "old_api": "JSBinaryWriterMethodName",
          "new_api": "message_type",
          "old_text": "JSBinaryWriterMethodName(options, value_field)",
          "new_text": "value_field->message_type()",
          "old_line_content": "        \"valueWriterFn\", JSBinaryWriterMethodName(options, value_field));",
          "new_line_content": "          \"messageType\", GetPath(options, value_field->message_type()));",
          "content_same": false
        },
        {
          "line": 3017,
          "old_api": "Print",
          "new_api": "JSBinaryReadWriteMethodName",
          "old_text": "printer->Print(\n        \"    writer.write$method$(\\n\"\n        \"      $index$,\\n\"\n        \"      f\",\n        \"method\", JSBinaryReadWriteMethodName(field, /* is_writer = */ true),\n        \"index\", SimpleItoa(field->number()))",
          "new_text": "JSBinaryReadWriteMethodName(field, /* is_writer = */ true)",
          "old_line_content": "    printer->Print(",
          "new_line_content": "        \"method\", JSBinaryReadWriteMethodName(field, /* is_writer = */ true),",
          "content_same": false
        },
        {
          "line": 3021,
          "old_api": "JSBinaryReadWriteMethodName",
          "new_api": "IsMap",
          "old_text": "JSBinaryReadWriteMethodName(field, /* is_writer = */ true)",
          "new_text": "IsMap(options, field)",
          "old_line_content": "        \"method\", JSBinaryReadWriteMethodName(field, /* is_writer = */ true),",
          "new_line_content": "        !IsMap(options, field)) {",
          "content_same": false
        },
        {
          "line": 3022,
          "old_api": "number",
          "new_api": "Print",
          "old_text": "field->number()",
          "new_text": "printer->Print(\n          \",\\n\"\n          \"      $submsg$.serializeBinaryToWriter\\n\",\n        \"submsg\", SubmessageTypeRef(options, field))",
          "old_line_content": "        \"index\", SimpleItoa(field->number()));",
          "new_line_content": "      printer->Print(",
          "content_same": false
        },
        {
          "line": 3025,
          "old_api": "IsMap",
          "new_api": "SubmessageTypeRef",
          "old_text": "IsMap(options, field)",
          "new_text": "SubmessageTypeRef(options, field)",
          "old_line_content": "        !IsMap(options, field)) {",
          "new_line_content": "        \"submsg\", SubmessageTypeRef(options, field));",
          "content_same": false
        },
        {
          "line": 3051,
          "old_api": "GetPath",
          "new_api": "Print",
          "old_text": "GetPath(options, enumdesc)",
          "new_text": "printer->Print(\n        \"  $name$: $value$$comma$\\n\",\n        \"name\", ToEnumCase(value->name()),\n        \"value\", SimpleItoa(value->number()),\n        \"comma\", (i == enumdesc->value_count() - 1) ? \"\" : \",\")",
          "old_line_content": "      \"name\", GetPath(options, enumdesc));",
          "new_line_content": "    printer->Print(",
          "content_same": false
        },
        {
          "line": 3053,
          "old_api": "value_count",
          "new_api": "name",
          "old_text": "enumdesc->value_count()",
          "new_text": "value->name()",
          "old_line_content": "  for (int i = 0; i < enumdesc->value_count(); i++) {",
          "new_line_content": "        \"name\", ToEnumCase(value->name()),",
          "content_same": false
        },
        {
          "line": 3054,
          "old_api": "value",
          "new_api": "number",
          "old_text": "enumdesc->value(i)",
          "new_text": "value->number()",
          "old_line_content": "    const EnumValueDescriptor* value = enumdesc->value(i);",
          "new_line_content": "        \"value\", SimpleItoa(value->number()),",
          "content_same": false
        },
        {
          "line": 3055,
          "old_api": "Print",
          "new_api": "value_count",
          "old_text": "printer->Print(\n        \"  $name$: $value$$comma$\\n\",\n        \"name\", ToEnumCase(value->name()),\n        \"value\", SimpleItoa(value->number()),\n        \"comma\", (i == enumdesc->value_count() - 1) ? \"\" : \",\")",
          "new_text": "enumdesc->value_count()",
          "old_line_content": "    printer->Print(",
          "new_line_content": "        \"comma\", (i == enumdesc->value_count() - 1) ? \"\" : \",\");",
          "content_same": false
        },
        {
          "line": 3058,
          "old_api": "number",
          "new_api": "Print",
          "old_text": "value->number()",
          "new_text": "printer->Print(\n      \"};\\n\"\n      \"\\n\")",
          "old_line_content": "        \"value\", SimpleItoa(value->number()),",
          "new_line_content": "  printer->Print(",
          "content_same": false
        },
        {
          "line": 3071,
          "old_api": "extension_scope",
          "new_api": "ExtensionFieldInfo",
          "old_text": "field->extension_scope()",
          "new_text": "printer->Print(\n      \"\\n\"\n      \"/**\\n\"\n      \" * A tuple of {field number, class constructor} for the extension\\n\"\n      \" * field named `$name$`.\\n\"\n      \" * @type {!jspb.ExtensionFieldInfo.<$extensionType$>}\\n\"\n      \" */\\n\"\n      \"$class$.$name$ = new jspb.ExtensionFieldInfo(\\n\",\n      \"name\", JSObjectFieldName(options, field),\n      \"class\", extension_scope,\n      \"extensionType\", JSFieldTypeAnnotation(\n          options, field,\n          /* is_setter_argument = */ false,\n          /* force_present = */ true,\n          /* singular_if_not_packed = */ false))",
          "old_line_content": "      (field->extension_scope() ?",
          "new_line_content": "  printer->Print(",
          "content_same": false
        },
        {
          "line": 3098,
          "old_api": "number",
          "new_api": "cpp_type",
          "old_text": "field->number()",
          "new_text": "field->cpp_type()",
          "old_line_content": "      \"index\", SimpleItoa(field->number()),",
          "new_line_content": "      \"toObject\", (field->cpp_type() == FieldDescriptor::CPPTYPE_MESSAGE ?",
          "content_same": false
        },
        {
          "line": 3099,
          "old_api": "JSObjectFieldName",
          "new_api": "SubmessageTypeRef",
          "old_text": "JSObjectFieldName(options, field)",
          "new_text": "SubmessageTypeRef(options, field)",
          "old_line_content": "      \"name\", JSObjectFieldName(options, field),",
          "new_line_content": "                   (SubmessageTypeRef(options, field) + \".toObject\") :",
          "content_same": false
        },
        {
          "line": 3100,
          "old_api": "cpp_type",
          "new_api": "string",
          "old_text": "field->cpp_type()",
          "new_text": "string(\"null\")",
          "old_line_content": "      \"ctor\", (field->cpp_type() == FieldDescriptor::CPPTYPE_MESSAGE ?",
          "new_line_content": "                   string(\"null\")),",
          "content_same": false
        },
        {
          "line": 3101,
          "old_api": "string",
          "new_api": "is_repeated",
          "old_text": "string(\"null\")",
          "new_text": "field->is_repeated()",
          "old_line_content": "               SubmessageTypeRef(options, field) : string(\"null\")),",
          "new_line_content": "      \"repeated\", (field->is_repeated() ? \"1\" : \"0\"));",
          "content_same": false
        },
        {
          "line": 3104,
          "old_api": "string",
          "new_api": "ExtensionFieldBinaryInfo",
          "old_text": "string(\"null\")",
          "new_text": "printer->Print(\n        \"\\n\"\n        \"$extendName$Binary[$index$] = new jspb.ExtensionFieldBinaryInfo(\\n\"\n        \"    $class$.$name$,\\n\"\n        \"    $binaryReaderFn$,\\n\"\n        \"    $binaryWriterFn$,\\n\"\n        \"    $binaryMessageSerializeFn$,\\n\"\n        \"    $binaryMessageDeserializeFn$,\\n\",\n        \"extendName\", JSExtensionsObjectName(options, field->file(),\n                                             field->containing_type()),\n        \"index\", SimpleItoa(field->number()),\n        \"class\", extension_scope,\n        \"name\", JSObjectFieldName(options, field),\n        \"binaryReaderFn\", JSBinaryReaderMethodName(options, field),\n        \"binaryWriterFn\", JSBinaryWriterMethodName(options, field),\n        \"binaryMessageSerializeFn\",\n        (field->cpp_type() == FieldDescriptor::CPPTYPE_MESSAGE) ?\n        (SubmessageTypeRef(options, field) +\n         \".serializeBinaryToWriter\") : \"undefined\",\n        \"binaryMessageDeserializeFn\",\n        (field->cpp_type() == FieldDescriptor::CPPTYPE_MESSAGE) ?\n        (SubmessageTypeRef(options, field) +\n         \".deserializeBinaryFromReader\") : \"undefined\")",
          "old_line_content": "                   string(\"null\")),",
          "new_line_content": "    printer->Print(",
          "content_same": false
        },
        {
          "line": 3116,
          "old_api": "file",
          "new_api": "JSObjectFieldName",
          "old_text": "field->file()",
          "new_text": "JSObjectFieldName(options, field)",
          "old_line_content": "        \"extendName\", JSExtensionsObjectName(options, field->file(),",
          "new_line_content": "        \"name\", JSObjectFieldName(options, field),",
          "content_same": false
        },
        {
          "line": 3117,
          "old_api": "containing_type",
          "new_api": "JSBinaryReaderMethodName",
          "old_text": "field->containing_type()",
          "new_text": "JSBinaryReaderMethodName(options, field)",
          "old_line_content": "                                             field->containing_type()),",
          "new_line_content": "        \"binaryReaderFn\", JSBinaryReaderMethodName(options, field),",
          "content_same": false
        },
        {
          "line": 3118,
          "old_api": "number",
          "new_api": "JSBinaryWriterMethodName",
          "old_text": "field->number()",
          "new_text": "JSBinaryWriterMethodName(options, field)",
          "old_line_content": "        \"index\", SimpleItoa(field->number()),",
          "new_line_content": "        \"binaryWriterFn\", JSBinaryWriterMethodName(options, field),",
          "content_same": false
        },
        {
          "line": 3120,
          "old_api": "JSObjectFieldName",
          "new_api": "cpp_type",
          "old_text": "JSObjectFieldName(options, field)",
          "new_text": "field->cpp_type()",
          "old_line_content": "        \"name\", JSObjectFieldName(options, field),",
          "new_line_content": "        (field->cpp_type() == FieldDescriptor::CPPTYPE_MESSAGE) ?",
          "content_same": false
        },
        {
          "line": 3121,
          "old_api": "JSBinaryReaderMethodName",
          "new_api": "SubmessageTypeRef",
          "old_text": "JSBinaryReaderMethodName(options, field)",
          "new_text": "SubmessageTypeRef(options, field)",
          "old_line_content": "        \"binaryReaderFn\", JSBinaryReaderMethodName(options, field),",
          "new_line_content": "        (SubmessageTypeRef(options, field) +",
          "content_same": false
        },
        {
          "line": 3128,
          "old_api": "cpp_type",
          "new_api": "Print",
          "old_text": "field->cpp_type()",
          "new_text": "printer->Print(\n        \"    $isPacked$);\\n\",\n        \"isPacked\", (field->is_packed() ? \"true\" : \"false\"))",
          "old_line_content": "        (field->cpp_type() == FieldDescriptor::CPPTYPE_MESSAGE) ?",
          "new_line_content": "    printer->Print(",
          "content_same": false
        },
        {
          "line": 3142,
          "old_api": "file",
          "new_api": "JSObjectFieldName",
          "old_text": "field->file()",
          "new_text": "JSObjectFieldName(options, field)",
          "old_line_content": "      \"extendName\", JSExtensionsObjectName(options, field->file(),",
          "new_line_content": "      \"name\", JSObjectFieldName(options, field));",
          "content_same": false
        },
        {
          "line": 3258,
          "old_api": "end",
          "new_api": "GenerateFileAndDeps",
          "old_text": "files.end()",
          "new_text": "GenerateFileAndDeps(options, printer, files[i], &all_files, &generated)",
          "old_line_content": "  std::set<const FileDescriptor*> all_files(files.begin(), files.end());",
          "new_line_content": "    GenerateFileAndDeps(options, printer, files[i], &all_files, &generated);",
          "content_same": false
        },
        {
          "line": 3276,
          "old_api": "insert",
          "new_api": "dependency",
          "old_text": "generated->insert(root)",
          "new_text": "root->dependency(i)",
          "old_line_content": "  generated->insert(root);",
          "new_line_content": "    const FileDescriptor* dep = root->dependency(i);",
          "content_same": false
        },
        {
          "line": 3295,
          "old_api": "GenerateHeader",
          "new_api": "Print",
          "old_text": "GenerateHeader(options, printer)",
          "new_text": "printer->Print(\"var jspb = require('google-protobuf');\\n\")",
          "old_line_content": "  GenerateHeader(options, printer);",
          "new_line_content": "    printer->Print(\"var jspb = require('google-protobuf');\\n\");",
          "content_same": false
        },
        {
          "line": 3299,
          "old_api": "Print",
          "new_api": "dependency_count",
          "old_text": "printer->Print(\"var jspb = require('google-protobuf');\\n\")",
          "new_text": "file->dependency_count()",
          "old_line_content": "    printer->Print(\"var jspb = require('google-protobuf');\\n\");",
          "new_line_content": "    for (int i = 0; i < file->dependency_count(); i++) {",
          "content_same": false
        },
        {
          "line": 3300,
          "old_api": "Print",
          "new_api": "dependency",
          "old_text": "printer->Print(\"var goog = jspb;\\n\")",
          "new_text": "file->dependency(i)->name()",
          "old_line_content": "    printer->Print(\"var goog = jspb;\\n\");",
          "new_line_content": "      const string& name = file->dependency(i)->name();",
          "content_same": false
        },
        {
          "line": 3303,
          "old_api": "dependency_count",
          "new_api": "ModuleAlias",
          "old_text": "file->dependency_count()",
          "new_text": "ModuleAlias(name)",
          "old_line_content": "    for (int i = 0; i < file->dependency_count(); i++) {",
          "new_line_content": "          \"alias\", ModuleAlias(name),",
          "content_same": false
        },
        {
          "line": 3304,
          "old_api": "dependency",
          "new_api": "GetJSFilename",
          "old_text": "file->dependency(i)->name()",
          "new_text": "GetJSFilename(options, name)",
          "old_line_content": "      const string& name = file->dependency(i)->name();",
          "new_line_content": "          \"file\", GetRootPath(file->name(), name) + GetJSFilename(options, name));",
          "content_same": false
        },
        {
          "line": 3323,
          "old_api": "extension",
          "new_api": "FindProvidesForFile",
          "old_text": "file->extension(i)",
          "new_text": "FindProvidesForFile(options, printer, file, &provided)",
          "old_line_content": "                    JSObjectFieldName(options, file->extension(i)));",
          "new_line_content": "  FindProvidesForFile(options, printer, file, &provided);",
          "content_same": false
        },
        {
          "line": 3324,
          "old_api": "extension",
          "new_api": "GenerateProvides",
          "old_text": "file->extension(i)",
          "new_text": "GenerateProvides(options, printer, &provided)",
          "old_line_content": "    extensions.insert(file->extension(i));",
          "new_line_content": "  GenerateProvides(options, printer, &provided);",
          "content_same": false
        },
        {
          "line": 3328,
          "old_api": "GenerateProvides",
          "new_api": "GenerateRequiresForLibrary",
          "old_text": "GenerateProvides(options, printer, &provided)",
          "new_text": "GenerateRequiresForLibrary(options, printer, files, &provided)",
          "old_line_content": "  GenerateProvides(options, printer, &provided);",
          "new_line_content": "    GenerateRequiresForLibrary(options, printer, files, &provided);",
          "content_same": false
        },
        {
          "line": 3335,
          "old_api": "GenerateClassesAndEnums",
          "new_api": "begin",
          "old_text": "GenerateClassesAndEnums(options, printer, file)",
          "new_text": "extensions.begin()",
          "old_line_content": "  GenerateClassesAndEnums(options, printer, file);",
          "new_line_content": "  for (set<const FieldDescriptor*>::const_iterator it = extensions.begin();",
          "content_same": false
        },
        {
          "line": 3341,
          "old_api": "GenerateExtension",
          "new_api": "extend",
          "old_text": "GenerateExtension(options, printer, *it)",
          "new_text": "printer->Print(\"goog.object.extend(exports, $package$);\\n\",\n                   \"package\", GetPath(options, file))",
          "old_line_content": "    GenerateExtension(options, printer, *it);",
          "new_line_content": "    printer->Print(\"goog.object.extend(exports, $package$);\\n\",",
          "content_same": false
        },
        {
          "line": 3362,
          "old_api": "output_mode",
          "new_api": "Open",
          "old_text": "options.output_mode()",
          "new_text": "context->Open(filename)",
          "old_line_content": "  if (options.output_mode() == GeneratorOptions::kEverythingInOneFile) {",
          "new_line_content": "    google::protobuf::scoped_ptr<io::ZeroCopyOutputStream> output(context->Open(filename));",
          "content_same": false
        },
        {
          "line": 3376,
          "old_api": "push_back",
          "new_api": "GenerateHeader",
          "old_text": "extensions.push_back(extension)",
          "new_text": "GenerateHeader(options, &printer)",
          "old_line_content": "        extensions.push_back(extension);",
          "new_line_content": "    GenerateHeader(options, &printer);",
          "content_same": false
        },
        {
          "line": 3380,
          "old_api": "GenerateHeader",
          "new_api": "FindProvidesForFields",
          "old_text": "GenerateHeader(options, &printer)",
          "new_text": "FindProvidesForFields(options, &printer, extensions, &provided)",
          "old_line_content": "    GenerateHeader(options, &printer);",
          "new_line_content": "    FindProvidesForFields(options, &printer, extensions, &provided);",
          "content_same": false
        },
        {
          "line": 3383,
          "old_api": "FindProvides",
          "new_api": "GenerateRequiresForLibrary",
          "old_text": "FindProvides(options, &printer, files, &provided)",
          "new_text": "GenerateRequiresForLibrary(options, &printer, files, &provided)",
          "old_line_content": "    FindProvides(options, &printer, files, &provided);",
          "new_line_content": "    GenerateRequiresForLibrary(options, &printer, files, &provided);",
          "content_same": false
        },
        {
          "line": 3385,
          "old_api": "GenerateProvides",
          "new_api": "GenerateFilesInDepOrder",
          "old_text": "GenerateProvides(options, &printer, &provided)",
          "new_text": "GenerateFilesInDepOrder(options, &printer, files)",
          "old_line_content": "    GenerateProvides(options, &printer, &provided);",
          "new_line_content": "    GenerateFilesInDepOrder(options, &printer, files);",
          "content_same": false
        },
        {
          "line": 3387,
          "old_api": "GenerateRequiresForLibrary",
          "new_api": "size",
          "old_text": "GenerateRequiresForLibrary(options, &printer, files, &provided)",
          "new_text": "extensions.size()",
          "old_line_content": "    GenerateRequiresForLibrary(options, &printer, files, &provided);",
          "new_line_content": "    for (int i = 0; i < extensions.size(); i++) {",
          "content_same": false
        },
        {
          "line": 3389,
          "old_api": "GenerateFilesInDepOrder",
          "new_api": "GenerateExtension",
          "old_text": "GenerateFilesInDepOrder(options, &printer, files)",
          "new_text": "GenerateExtension(options, &printer, extensions[i])",
          "old_line_content": "    GenerateFilesInDepOrder(options, &printer, files);",
          "new_line_content": "        GenerateExtension(options, &printer, extensions[i]);",
          "content_same": false
        },
        {
          "line": 3393,
          "old_api": "GenerateExtension",
          "new_api": "failed",
          "old_text": "GenerateExtension(options, &printer, extensions[i])",
          "new_text": "printer.failed()",
          "old_line_content": "        GenerateExtension(options, &printer, extensions[i]);",
          "new_line_content": "    if (printer.failed()) {",
          "content_same": false
        },
        {
          "line": 3402,
          "old_api": "GenerateJspbAllowedSet",
          "new_api": "size",
          "old_text": "GenerateJspbAllowedSet(options, files, &allowed_set, error)",
          "new_text": "files.size()",
          "old_line_content": "    if (!GenerateJspbAllowedSet(options, files, &allowed_set, error)) {",
          "new_line_content": "    for (int i = 0; i < files.size(); i++) {",
          "content_same": false
        },
        {
          "line": 3406,
          "old_api": "size",
          "new_api": "count",
          "old_text": "files.size()",
          "new_text": "allowed_set.count(desc)",
          "old_line_content": "    for (int i = 0; i < files.size(); i++) {",
          "new_line_content": "        if (allowed_set.count(desc) == 0) {",
          "content_same": false
        },
        {
          "line": 3410,
          "old_api": "count",
          "new_api": "GetMessageFileName",
          "old_text": "allowed_set.count(desc)",
          "new_text": "GetMessageFileName(options, desc)",
          "old_line_content": "        if (allowed_set.count(desc) == 0) {",
          "new_line_content": "        string filename = GetMessageFileName(options, desc);",
          "content_same": false
        },
        {
          "line": 3414,
          "old_api": "GetMessageFileName",
          "new_api": "get",
          "old_text": "GetMessageFileName(options, desc)",
          "new_text": "output.get()",
          "old_line_content": "        string filename = GetMessageFileName(options, desc);",
          "new_line_content": "        io::Printer printer(output.get(), '$');",
          "content_same": false
        },
        {
          "line": 3416,
          "old_api": "Open",
          "new_api": "GenerateHeader",
          "old_text": "context->Open(filename)",
          "new_text": "GenerateHeader(options, &printer)",
          "old_line_content": "            context->Open(filename));",
          "new_line_content": "        GenerateHeader(options, &printer);",
          "content_same": false
        },
        {
          "line": 3420,
          "old_api": "GenerateHeader",
          "new_api": "GenerateProvides",
          "old_text": "GenerateHeader(options, &printer)",
          "new_text": "GenerateProvides(options, &printer, &provided)",
          "old_line_content": "        GenerateHeader(options, &printer);",
          "new_line_content": "        GenerateProvides(options, &printer, &provided);",
          "content_same": false
        },
        {
          "line": 3424,
          "old_api": "GenerateProvides",
          "new_api": "GenerateClass",
          "old_text": "GenerateProvides(options, &printer, &provided)",
          "new_text": "GenerateClass(options, &printer, desc)",
          "old_line_content": "        GenerateProvides(options, &printer, &provided);",
          "new_line_content": "        GenerateClass(options, &printer, desc);",
          "content_same": false
        },
        {
          "line": 3426,
          "old_api": "GenerateRequiresForMessage",
          "new_api": "failed",
          "old_text": "GenerateRequiresForMessage(options, &printer, desc, &provided)",
          "new_text": "printer.failed()",
          "old_line_content": "        GenerateRequiresForMessage(options, &printer, desc, &provided);",
          "new_line_content": "        if (printer.failed()) {",
          "content_same": false
        },
        {
          "line": 3430,
          "old_api": "failed",
          "new_api": "enum_type_count",
          "old_text": "printer.failed()",
          "new_text": "file->enum_type_count()",
          "old_line_content": "        if (printer.failed()) {",
          "new_line_content": "      for (int j = 0; j < file->enum_type_count(); j++) {",
          "content_same": false
        },
        {
          "line": 3436,
          "old_api": "count",
          "new_api": "GetEnumFileName",
          "old_text": "allowed_set.count(enumdesc)",
          "new_text": "GetEnumFileName(options, enumdesc)",
          "old_line_content": "        if (allowed_set.count(enumdesc) == 0) {",
          "new_line_content": "        string filename = GetEnumFileName(options, enumdesc);",
          "content_same": false
        },
        {
          "line": 3440,
          "old_api": "GetEnumFileName",
          "new_api": "get",
          "old_text": "GetEnumFileName(options, enumdesc)",
          "new_text": "output.get()",
          "old_line_content": "        string filename = GetEnumFileName(options, enumdesc);",
          "new_line_content": "        io::Printer printer(output.get(), '$');",
          "content_same": false
        },
        {
          "line": 3442,
          "old_api": "Open",
          "new_api": "GenerateHeader",
          "old_text": "context->Open(filename)",
          "new_text": "GenerateHeader(options, &printer)",
          "old_line_content": "            context->Open(filename));",
          "new_line_content": "        GenerateHeader(options, &printer);",
          "content_same": false
        },
        {
          "line": 3446,
          "old_api": "GenerateHeader",
          "new_api": "GenerateProvides",
          "old_text": "GenerateHeader(options, &printer)",
          "new_text": "GenerateProvides(options, &printer, &provided)",
          "old_line_content": "        GenerateHeader(options, &printer);",
          "new_line_content": "        GenerateProvides(options, &printer, &provided);",
          "content_same": false
        },
        {
          "line": 3449,
          "old_api": "FindProvidesForEnum",
          "new_api": "GenerateEnum",
          "old_text": "FindProvidesForEnum(options, &printer, enumdesc, &provided)",
          "new_text": "GenerateEnum(options, &printer, enumdesc)",
          "old_line_content": "        FindProvidesForEnum(options, &printer, enumdesc, &provided);",
          "new_line_content": "        GenerateEnum(options, &printer, enumdesc);",
          "content_same": false
        },
        {
          "line": 3451,
          "old_api": "GenerateTestOnly",
          "new_api": "failed",
          "old_text": "GenerateTestOnly(options, &printer)",
          "new_text": "printer.failed()",
          "old_line_content": "        GenerateTestOnly(options, &printer);",
          "new_line_content": "        if (printer.failed()) {",
          "content_same": false
        },
        {
          "line": 3461,
          "old_api": "count",
          "new_api": "Open",
          "old_text": "allowed_set.count(file)",
          "new_text": "context->Open(filename)",
          "old_line_content": "      if (allowed_set.count(file) == 1) {",
          "new_line_content": "            context->Open(filename));",
          "content_same": false
        },
        {
          "line": 3462,
          "old_api": "GetExtensionFileName",
          "new_api": "get",
          "old_text": "GetExtensionFileName(options, file)",
          "new_text": "output.get()",
          "old_line_content": "        string filename = GetExtensionFileName(options, file);",
          "new_line_content": "        GOOGLE_CHECK(output.get());",
          "content_same": false
        },
        {
          "line": 3465,
          "old_api": "Open",
          "new_api": "GenerateHeader",
          "old_text": "context->Open(filename)",
          "new_text": "GenerateHeader(options, &printer)",
          "old_line_content": "            context->Open(filename));",
          "new_line_content": "        GenerateHeader(options, &printer);",
          "content_same": false
        },
        {
          "line": 3476,
          "old_api": "extension",
          "new_api": "FindProvidesForFields",
          "old_text": "files[i]->extension(j)",
          "new_text": "FindProvidesForFields(options, &printer, fields, &provided)",
          "old_line_content": "            fields.push_back(files[i]->extension(j));",
          "new_line_content": "        FindProvidesForFields(options, &printer, fields, &provided);",
          "content_same": false
        },
        {
          "line": 3481,
          "old_api": "GenerateProvides",
          "new_api": "extension_count",
          "old_text": "GenerateProvides(options, &printer, &provided)",
          "new_text": "files[i]->extension_count()",
          "old_line_content": "        GenerateProvides(options, &printer, &provided);",
          "new_line_content": "        for (int j = 0; j < files[i]->extension_count(); j++) {",
          "content_same": false
        },
        {
          "line": 3482,
          "old_api": "GenerateTestOnly",
          "new_api": "extension",
          "old_text": "GenerateTestOnly(options, &printer)",
          "new_text": "files[i]->extension(j)",
          "old_line_content": "        GenerateTestOnly(options, &printer);",
          "new_line_content": "          if (ShouldGenerateExtension(files[i]->extension(j))) {",
          "content_same": false
        },
        {
          "line": 3483,
          "old_api": "GenerateRequiresForExtensions",
          "new_api": "extension",
          "old_text": "GenerateRequiresForExtensions(options, &printer, fields, &provided)",
          "new_text": "files[i]->extension(j)",
          "old_line_content": "        GenerateRequiresForExtensions(options, &printer, fields, &provided);",
          "new_line_content": "            GenerateExtension(options, &printer, files[i]->extension(j));",
          "content_same": false
        },
        {
          "line": 3495,
          "old_api": "size",
          "new_api": "name",
          "old_text": "files.size()",
          "new_text": "file->name()",
          "old_line_content": "    for (int i = 0; i < files.size(); i++) {",
          "new_line_content": "          options.output_dir + \"/\" + GetJSFilename(options, file->name());",
          "content_same": false
        },
        {
          "line": 3500,
          "old_api": "Open",
          "new_api": "GenerateFile",
          "old_text": "context->Open(filename)",
          "new_text": "GenerateFile(options, &printer, file)",
          "old_line_content": "      google::protobuf::scoped_ptr<io::ZeroCopyOutputStream> output(context->Open(filename));",
          "new_line_content": "      GenerateFile(options, &printer, file);",
          "content_same": false
        },
        {
          "line": 3502,
          "old_api": "get",
          "new_api": "failed",
          "old_text": "output.get()",
          "new_text": "printer.failed()",
          "old_line_content": "      io::Printer printer(output.get(), '$');",
          "new_line_content": "      if (printer.failed()) {",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 3079,
          "old_api": null,
          "new_api": "JSObjectFieldName",
          "old_text": null,
          "new_text": "JSObjectFieldName(options, field)",
          "old_line_content": "      \" * field named `$name$`.\\n\"",
          "new_line_content": "      \"name\", JSObjectFieldName(options, field),",
          "content_same": false
        },
        {
          "line": 3081,
          "old_api": null,
          "new_api": "JSFieldTypeAnnotation",
          "old_text": null,
          "new_text": "JSFieldTypeAnnotation(\n          options, field,\n          /* is_setter_argument = */ false,\n          /* force_present = */ true,\n          /* singular_if_not_packed = */ false)",
          "old_line_content": "      \" */\\n\"",
          "new_line_content": "      \"extensionType\", JSFieldTypeAnnotation(",
          "content_same": false
        },
        {
          "line": 3086,
          "old_api": null,
          "new_api": "Print",
          "old_text": null,
          "new_text": "printer->Print(\n      \"    $index$,\\n\"\n      \"    {$name$: 0},\\n\"\n      \"    $ctor$,\\n\"\n      \"     /** @type {?function((boolean|undefined),!jspb.Message=): \"\n      \"!Object} */ (\\n\"\n      \"         $toObject$),\\n\"\n      \"    $repeated$);\\n\",\n      \"index\", SimpleItoa(field->number()),\n      \"name\", JSObjectFieldName(options, field),\n      \"ctor\", (field->cpp_type() == FieldDescriptor::CPPTYPE_MESSAGE ?\n               SubmessageTypeRef(options, field) : string(\"null\")),\n      \"toObject\", (field->cpp_type() == FieldDescriptor::CPPTYPE_MESSAGE ?\n                   (SubmessageTypeRef(options, field) + \".toObject\") :\n                   string(\"null\")),\n      \"repeated\", (field->is_repeated() ? \"1\" : \"0\"))",
          "old_line_content": "          options, field,",
          "new_line_content": "  printer->Print(",
          "content_same": false
        },
        {
          "line": 3094,
          "old_api": null,
          "new_api": "number",
          "old_text": null,
          "new_text": "field->number()",
          "old_line_content": "      \"     /** @type {?function((boolean|undefined),!jspb.Message=): \"",
          "new_line_content": "      \"index\", SimpleItoa(field->number()),",
          "content_same": false
        },
        {
          "line": 3095,
          "old_api": null,
          "new_api": "JSObjectFieldName",
          "old_text": null,
          "new_text": "JSObjectFieldName(options, field)",
          "old_line_content": "      \"!Object} */ (\\n\"",
          "new_line_content": "      \"name\", JSObjectFieldName(options, field),",
          "content_same": false
        },
        {
          "line": 3096,
          "old_api": null,
          "new_api": "cpp_type",
          "old_text": null,
          "new_text": "field->cpp_type()",
          "old_line_content": "      \"         $toObject$),\\n\"",
          "new_line_content": "      \"ctor\", (field->cpp_type() == FieldDescriptor::CPPTYPE_MESSAGE ?",
          "content_same": false
        },
        {
          "line": 3097,
          "old_api": null,
          "new_api": "string",
          "old_text": null,
          "new_text": "string(\"null\")",
          "old_line_content": "      \"    $repeated$);\\n\",",
          "new_line_content": "               SubmessageTypeRef(options, field) : string(\"null\")),",
          "content_same": false
        },
        {
          "line": 3112,
          "old_api": null,
          "new_api": "file",
          "old_text": null,
          "new_text": "field->file()",
          "old_line_content": "        \"    $binaryReaderFn$,\\n\"",
          "new_line_content": "        \"extendName\", JSExtensionsObjectName(options, field->file(),",
          "content_same": false
        },
        {
          "line": 3113,
          "old_api": null,
          "new_api": "containing_type",
          "old_text": null,
          "new_text": "field->containing_type()",
          "old_line_content": "        \"    $binaryWriterFn$,\\n\"",
          "new_line_content": "                                             field->containing_type()),",
          "content_same": false
        },
        {
          "line": 3114,
          "old_api": null,
          "new_api": "number",
          "old_text": null,
          "new_text": "field->number()",
          "old_line_content": "        \"    $binaryMessageSerializeFn$,\\n\"",
          "new_line_content": "        \"index\", SimpleItoa(field->number()),",
          "content_same": false
        },
        {
          "line": 3130,
          "old_api": null,
          "new_api": "is_packed",
          "old_text": null,
          "new_text": "field->is_packed()",
          "old_line_content": "         \".deserializeBinaryFromReader\") : \"undefined\");",
          "new_line_content": "        \"isPacked\", (field->is_packed() ? \"true\" : \"false\"));",
          "content_same": false
        },
        {
          "line": 3133,
          "old_api": null,
          "new_api": "Print",
          "old_text": null,
          "new_text": "printer->Print(\n      \"// This registers the extension field with the extended class, so that\\n\"\n      \"// toObject() will function correctly.\\n\"\n      \"$extendName$[$index$] = $class$.$name$;\\n\"\n      \"\\n\",\n      \"extendName\", JSExtensionsObjectName(options, field->file(),\n                                           field->containing_type()),\n      \"index\", SimpleItoa(field->number()),\n      \"class\", extension_scope,\n      \"name\", JSObjectFieldName(options, field))",
          "old_line_content": "        \"    $isPacked$);\\n\",",
          "new_line_content": "  printer->Print(",
          "content_same": false
        },
        {
          "line": 3138,
          "old_api": null,
          "new_api": "file",
          "old_text": null,
          "new_text": "field->file()",
          "old_line_content": "      \"// This registers the extension field with the extended class, so that\\n\"",
          "new_line_content": "      \"extendName\", JSExtensionsObjectName(options, field->file(),",
          "content_same": false
        },
        {
          "line": 3139,
          "old_api": null,
          "new_api": "containing_type",
          "old_text": null,
          "new_text": "field->containing_type()",
          "old_line_content": "      \"// toObject() will function correctly.\\n\"",
          "new_line_content": "                                           field->containing_type()),",
          "content_same": false
        },
        {
          "line": 3140,
          "old_api": null,
          "new_api": "number",
          "old_text": null,
          "new_text": "field->number()",
          "old_line_content": "      \"$extendName$[$index$] = $class$.$name$;\\n\"",
          "new_line_content": "      \"index\", SimpleItoa(field->number()),",
          "content_same": false
        },
        {
          "line": 3148,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "options.size()",
          "old_line_content": "",
          "new_line_content": "  for (int i = 0; i < options.size(); i++) {",
          "content_same": false
        },
        {
          "line": 3195,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "options[i].second.empty()",
          "old_line_content": "      }",
          "new_line_content": "      if (!options[i].second.empty()) {",
          "content_same": false
        },
        {
          "line": 3201,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "options[i].second.empty()",
          "old_line_content": "        return false;",
          "new_line_content": "      if (!options[i].second.empty()) {",
          "content_same": false
        },
        {
          "line": 3218,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "library.empty()",
          "old_line_content": "    }",
          "new_line_content": "      (add_require_for_enums || testonly || !library.empty() ||",
          "content_same": false
        },
        {
          "line": 3240,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "library.empty()",
          "old_line_content": "    return kOneOutputFilePerInputFile;",
          "new_line_content": "  if (!library.empty()) {",
          "content_same": false
        },
        {
          "line": 3254,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "files.end()",
          "old_line_content": "    io::Printer* printer,",
          "new_line_content": "  std::set<const FileDescriptor*> all_files(files.begin(), files.end());",
          "content_same": false
        },
        {
          "line": 3257,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "files.size()",
          "old_line_content": "  // into a dep not specified in the user's command line.",
          "new_line_content": "  for (int i = 0; i < files.size(); i++) {",
          "content_same": false
        },
        {
          "line": 3269,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "generated->end()",
          "old_line_content": "    const FileDescriptor* root,",
          "new_line_content": "  if (generated->find(root) != generated->end()) {",
          "content_same": false
        },
        {
          "line": 3272,
          "old_api": null,
          "new_api": "insert",
          "old_text": null,
          "new_text": "generated->insert(root)",
          "old_line_content": "  // Skip if already generated.",
          "new_line_content": "  generated->insert(root);",
          "content_same": false
        },
        {
          "line": 3275,
          "old_api": null,
          "new_api": "dependency_count",
          "old_text": null,
          "new_text": "root->dependency_count()",
          "old_line_content": "  }",
          "new_line_content": "  for (int i = 0; i < root->dependency_count(); i++) {",
          "content_same": false
        },
        {
          "line": 3277,
          "old_api": null,
          "new_api": "GenerateFileAndDeps",
          "old_text": null,
          "new_text": "GenerateFileAndDeps(options, printer, dep, all_files, generated)",
          "old_line_content": "",
          "new_line_content": "    GenerateFileAndDeps(options, printer, dep, all_files, generated);",
          "content_same": false
        },
        {
          "line": 3283,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "all_files->end()",
          "old_line_content": "",
          "new_line_content": "  if (all_files->find(root) != all_files->end()) {",
          "content_same": false
        },
        {
          "line": 3284,
          "old_api": null,
          "new_api": "GenerateClassesAndEnums",
          "old_text": null,
          "new_text": "GenerateClassesAndEnums(options, printer, root)",
          "old_line_content": "  // Generate this file's content.  Only generate if the file is part of the",
          "new_line_content": "    GenerateClassesAndEnums(options, printer, root);",
          "content_same": false
        },
        {
          "line": 3291,
          "old_api": null,
          "new_api": "GenerateHeader",
          "old_text": null,
          "new_text": "GenerateHeader(options, printer)",
          "old_line_content": "",
          "new_line_content": "  GenerateHeader(options, printer);",
          "content_same": false
        },
        {
          "line": 3296,
          "old_api": null,
          "new_api": "Print",
          "old_text": null,
          "new_text": "printer->Print(\"var goog = jspb;\\n\")",
          "old_line_content": "",
          "new_line_content": "    printer->Print(\"var goog = jspb;\\n\");",
          "content_same": false
        },
        {
          "line": 3297,
          "old_api": null,
          "new_api": "Print",
          "old_text": null,
          "new_text": "printer->Print(\"var global = Function('return this')();\\n\\n\")",
          "old_line_content": "  // Generate \"require\" statements.",
          "new_line_content": "    printer->Print(\"var global = Function('return this')();\\n\\n\");",
          "content_same": false
        },
        {
          "line": 3310,
          "old_api": null,
          "new_api": "extension_count",
          "old_text": null,
          "new_text": "file->extension_count()",
          "old_line_content": "  }",
          "new_line_content": "  for (int i = 0; i < file->extension_count(); i++) {",
          "content_same": false
        },
        {
          "line": 3315,
          "old_api": null,
          "new_api": "extension",
          "old_text": null,
          "new_text": "file->extension(i)",
          "old_line_content": "    // We honor the jspb::ignore option here only when working with",
          "new_line_content": "        IgnoreField(file->extension(i))) {",
          "content_same": false
        },
        {
          "line": 3318,
          "old_api": null,
          "new_api": "GetPath",
          "old_text": null,
          "new_text": "GetPath(options, file)",
          "old_line_content": "    if (options.import_style == GeneratorOptions::kImportClosure &&",
          "new_line_content": "    provided.insert(GetPath(options, file) + \".\" +",
          "content_same": false
        },
        {
          "line": 3320,
          "old_api": null,
          "new_api": "extension",
          "old_text": null,
          "new_text": "file->extension(i)",
          "old_line_content": "      continue;",
          "new_line_content": "    extensions.insert(file->extension(i));",
          "content_same": false
        },
        {
          "line": 3326,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "files.push_back(file)",
          "old_line_content": "",
          "new_line_content": "  files.push_back(file);",
          "content_same": false
        },
        {
          "line": 3331,
          "old_api": null,
          "new_api": "GenerateClassesAndEnums",
          "old_text": null,
          "new_text": "GenerateClassesAndEnums(options, printer, file)",
          "old_line_content": "  if (options.import_style == GeneratorOptions::kImportClosure) {",
          "new_line_content": "  GenerateClassesAndEnums(options, printer, file);",
          "content_same": false
        },
        {
          "line": 3336,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "extensions.end()",
          "old_line_content": "",
          "new_line_content": "       it != extensions.end(); ++it) {",
          "content_same": false
        },
        {
          "line": 3337,
          "old_api": null,
          "new_api": "GenerateExtension",
          "old_text": null,
          "new_text": "GenerateExtension(options, printer, *it)",
          "old_line_content": "  // Generate code for top-level extensions. Extensions nested inside messages",
          "new_line_content": "    GenerateExtension(options, printer, *it);",
          "content_same": false
        },
        {
          "line": 3342,
          "old_api": null,
          "new_api": "GetPath",
          "old_text": null,
          "new_text": "GetPath(options, file)",
          "old_line_content": "  }",
          "new_line_content": "                   \"package\", GetPath(options, file));",
          "content_same": false
        },
        {
          "line": 3351,
          "old_api": null,
          "new_api": "ParseGeneratorParameter",
          "old_text": null,
          "new_text": "ParseGeneratorParameter(parameter, &option_pairs)",
          "old_line_content": "                            const string& parameter,",
          "new_line_content": "  ParseGeneratorParameter(parameter, &option_pairs);",
          "content_same": false
        },
        {
          "line": 3353,
          "old_api": null,
          "new_api": "ParseFromOptions",
          "old_text": null,
          "new_text": "options.ParseFromOptions(option_pairs, error)",
          "old_line_content": "                            string* error) const {",
          "new_line_content": "  if (!options.ParseFromOptions(option_pairs, error)) {",
          "content_same": false
        },
        {
          "line": 3358,
          "old_api": null,
          "new_api": "output_mode",
          "old_text": null,
          "new_text": "options.output_mode()",
          "old_line_content": "    return false;",
          "new_line_content": "  if (options.output_mode() == GeneratorOptions::kEverythingInOneFile) {",
          "content_same": false
        },
        {
          "line": 3361,
          "old_api": null,
          "new_api": "GetFileNameExtension",
          "old_text": null,
          "new_text": "options.GetFileNameExtension()",
          "old_line_content": "",
          "new_line_content": "                      options.GetFileNameExtension();",
          "content_same": false
        },
        {
          "line": 3363,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "output.get()",
          "old_line_content": "    // All output should go in a single file.",
          "new_line_content": "    GOOGLE_CHECK(output.get());",
          "content_same": false
        },
        {
          "line": 3364,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "output.get()",
          "old_line_content": "    string filename = options.output_dir + \"/\" + options.library +",
          "new_line_content": "    io::Printer printer(output.get(), '$');",
          "content_same": false
        },
        {
          "line": 2853,
          "old_api": null,
          "new_api": "Print",
          "old_text": null,
          "new_text": "printer->Print(\n          \"      msg.add$name$(value);\\n\", \"name\",\n          JSGetterName(options, field, BYTES_DEFAULT, /* drop_list = */ true))",
          "old_line_content": "      // Repeated fields receive a |value| one at at a time; append to array",
          "new_line_content": "      printer->Print(",
          "content_same": false
        },
        {
          "line": 2855,
          "old_api": null,
          "new_api": "JSGetterName",
          "old_text": null,
          "new_text": "JSGetterName(options, field, BYTES_DEFAULT, /* drop_list = */ true)",
          "old_line_content": "      // changing the array.",
          "new_line_content": "          JSGetterName(options, field, BYTES_DEFAULT, /* drop_list = */ true));",
          "content_same": false
        },
        {
          "line": 3369,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "files.size()",
          "old_line_content": "",
          "new_line_content": "    for (int i = 0; i < files.size(); i++) {",
          "content_same": false
        },
        {
          "line": 3370,
          "old_api": null,
          "new_api": "extension_count",
          "old_text": null,
          "new_text": "files[i]->extension_count()",
          "old_line_content": "    // Pull out all extensions -- we need these to generate all",
          "new_line_content": "      for (int j = 0; j < files[i]->extension_count(); j++) {",
          "content_same": false
        },
        {
          "line": 3371,
          "old_api": null,
          "new_api": "extension",
          "old_text": null,
          "new_text": "files[i]->extension(j)",
          "old_line_content": "    // provides/requires.",
          "new_line_content": "        const FieldDescriptor* extension = files[i]->extension(j);",
          "content_same": false
        },
        {
          "line": 2860,
          "old_api": null,
          "new_api": "Print",
          "old_text": null,
          "new_text": "printer->Print(\n          \"      msg.set$name$(value);\\n\",\n          \"name\", JSGetterName(options, field))",
          "old_line_content": "    } else {",
          "new_line_content": "      printer->Print(",
          "content_same": false
        },
        {
          "line": 3372,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "extensions.push_back(extension)",
          "old_line_content": "    vector<const FieldDescriptor*> extensions;",
          "new_line_content": "        extensions.push_back(extension);",
          "content_same": false
        },
        {
          "line": 2862,
          "old_api": null,
          "new_api": "JSGetterName",
          "old_text": null,
          "new_text": "JSGetterName(options, field)",
          "old_line_content": "      // as the field's value or as the array of all the field's values; set",
          "new_line_content": "          \"name\", JSGetterName(options, field));",
          "content_same": false
        },
        {
          "line": 3379,
          "old_api": null,
          "new_api": "FindProvides",
          "old_text": null,
          "new_text": "FindProvides(options, &printer, files, &provided)",
          "old_line_content": "",
          "new_line_content": "    FindProvides(options, &printer, files, &provided);",
          "content_same": false
        },
        {
          "line": 3381,
          "old_api": null,
          "new_api": "GenerateProvides",
          "old_text": null,
          "new_text": "GenerateProvides(options, &printer, &provided)",
          "old_line_content": "",
          "new_line_content": "    GenerateProvides(options, &printer, &provided);",
          "content_same": false
        },
        {
          "line": 3382,
          "old_api": null,
          "new_api": "GenerateTestOnly",
          "old_text": null,
          "new_text": "GenerateTestOnly(options, &printer)",
          "old_line_content": "    std::set<string> provided;",
          "new_line_content": "    GenerateTestOnly(options, &printer);",
          "content_same": false
        },
        {
          "line": 2872,
          "old_api": null,
          "new_api": "serializeBinaryToWriter",
          "old_text": null,
          "new_text": "printer->Print(\n      \"/**\\n\"\n      \" * Class method variant: serializes the given message to binary data\\n\"\n      \" * (in protobuf wire format), writing to the given BinaryWriter.\\n\"\n      \" * @param {!$class$} message\\n\"\n      \" * @param {!jspb.BinaryWriter} writer\\n\"\n      \" */\\n\"\n      \"$class$.serializeBinaryToWriter = function(message, \"\n      \"writer) {\\n\"\n      \"  message.serializeBinaryToWriter(writer);\\n\"\n      \"};\\n\"\n      \"\\n\"\n      \"\\n\"\n      \"/**\\n\"\n      \" * Serializes the message to binary data (in protobuf wire format).\\n\"\n      \" * @return {!Uint8Array}\\n\"\n      \" */\\n\"\n      \"$class$.prototype.serializeBinary = function() {\\n\"\n      \"  var writer = new jspb.BinaryWriter();\\n\"\n      \"  this.serializeBinaryToWriter(writer);\\n\"\n      \"  return writer.getResultBuffer();\\n\"\n      \"};\\n\"\n      \"\\n\"\n      \"\\n\"\n      \"/**\\n\"\n      \" * Serializes the message to binary data (in protobuf wire format),\\n\"\n      \" * writing to the given BinaryWriter.\\n\"\n      \" * @param {!jspb.BinaryWriter} writer\\n\"\n      \" */\\n\"\n      \"$class$.prototype.serializeBinaryToWriter = function (writer) {\\n\"\n      \"  var f = undefined;\\n\",\n      \"class\", GetPath(options, desc))",
          "old_line_content": "",
          "new_line_content": "  printer->Print(",
          "content_same": false
        },
        {
          "line": 3388,
          "old_api": null,
          "new_api": "ShouldGenerateExtension",
          "old_text": null,
          "new_text": "ShouldGenerateExtension(extensions[i])",
          "old_line_content": "",
          "new_line_content": "      if (ShouldGenerateExtension(extensions[i])) {",
          "content_same": false
        },
        {
          "line": 3396,
          "old_api": null,
          "new_api": "output_mode",
          "old_text": null,
          "new_text": "options.output_mode()",
          "old_line_content": "",
          "new_line_content": "  } else if (options.output_mode() == GeneratorOptions::kOneOutputFilePerType) {",
          "content_same": false
        },
        {
          "line": 3398,
          "old_api": null,
          "new_api": "GenerateJspbAllowedSet",
          "old_text": null,
          "new_text": "GenerateJspbAllowedSet(options, files, &allowed_set, error)",
          "old_line_content": "      return false;",
          "new_line_content": "    if (!GenerateJspbAllowedSet(options, files, &allowed_set, error)) {",
          "content_same": false
        },
        {
          "line": 3404,
          "old_api": null,
          "new_api": "message_type_count",
          "old_text": null,
          "new_text": "file->message_type_count()",
          "old_line_content": "    }",
          "new_line_content": "      for (int j = 0; j < file->message_type_count(); j++) {",
          "content_same": false
        },
        {
          "line": 3405,
          "old_api": null,
          "new_api": "message_type",
          "old_text": null,
          "new_text": "file->message_type(j)",
          "old_line_content": "",
          "new_line_content": "        const Descriptor* desc = file->message_type(j);",
          "content_same": false
        },
        {
          "line": 3412,
          "old_api": null,
          "new_api": "Open",
          "old_text": null,
          "new_text": "context->Open(filename)",
          "old_line_content": "        }",
          "new_line_content": "            context->Open(filename));",
          "content_same": false
        },
        {
          "line": 3413,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "output.get()",
          "old_line_content": "",
          "new_line_content": "        GOOGLE_CHECK(output.get());",
          "content_same": false
        },
        {
          "line": 2903,
          "old_api": null,
          "new_api": "GetPath",
          "old_text": null,
          "new_text": "GetPath(options, desc)",
          "old_line_content": "      \" * @param {!jspb.BinaryWriter} writer\\n\"",
          "new_line_content": "      \"class\", GetPath(options, desc));",
          "content_same": false
        },
        {
          "line": 2905,
          "old_api": null,
          "new_api": "field_count",
          "old_text": null,
          "new_text": "desc->field_count()",
          "old_line_content": "      \"$class$.prototype.serializeBinaryToWriter = function (writer) {\\n\"",
          "new_line_content": "  for (int i = 0; i < desc->field_count(); i++) {",
          "content_same": false
        },
        {
          "line": 2906,
          "old_api": null,
          "new_api": "field",
          "old_text": null,
          "new_text": "desc->field(i)",
          "old_line_content": "      \"  var f = undefined;\\n\",",
          "new_line_content": "    GenerateClassSerializeBinaryField(options, printer, desc->field(i));",
          "content_same": false
        },
        {
          "line": 3419,
          "old_api": null,
          "new_api": "FindProvidesForMessage",
          "old_text": null,
          "new_text": "FindProvidesForMessage(options, &printer, desc, &provided)",
          "old_line_content": "",
          "new_line_content": "        FindProvidesForMessage(options, &printer, desc, &provided);",
          "content_same": false
        },
        {
          "line": 3421,
          "old_api": null,
          "new_api": "GenerateTestOnly",
          "old_text": null,
          "new_text": "GenerateTestOnly(options, &printer)",
          "old_line_content": "",
          "new_line_content": "        GenerateTestOnly(options, &printer);",
          "content_same": false
        },
        {
          "line": 3422,
          "old_api": null,
          "new_api": "GenerateRequiresForMessage",
          "old_text": null,
          "new_text": "GenerateRequiresForMessage(options, &printer, desc, &provided)",
          "old_line_content": "        std::set<string> provided;",
          "new_line_content": "        GenerateRequiresForMessage(options, &printer, desc, &provided);",
          "content_same": false
        },
        {
          "line": 3431,
          "old_api": null,
          "new_api": "enum_type",
          "old_text": null,
          "new_text": "file->enum_type(j)",
          "old_line_content": "          return false;",
          "new_line_content": "        const EnumDescriptor* enumdesc = file->enum_type(j);",
          "content_same": false
        },
        {
          "line": 3432,
          "old_api": null,
          "new_api": "count",
          "old_text": null,
          "new_text": "allowed_set.count(enumdesc)",
          "old_line_content": "        }",
          "new_line_content": "        if (allowed_set.count(enumdesc) == 0) {",
          "content_same": false
        },
        {
          "line": 3438,
          "old_api": null,
          "new_api": "Open",
          "old_text": null,
          "new_text": "context->Open(filename)",
          "old_line_content": "        }",
          "new_line_content": "            context->Open(filename));",
          "content_same": false
        },
        {
          "line": 2927,
          "old_api": null,
          "new_api": "HasFieldPresence",
          "old_text": null,
          "new_text": "HasFieldPresence(options, field)",
          "old_line_content": "void Generator::GenerateClassSerializeBinaryField(",
          "new_line_content": "  if (HasFieldPresence(options, field) &&",
          "content_same": false
        },
        {
          "line": 2928,
          "old_api": null,
          "new_api": "cpp_type",
          "old_text": null,
          "new_text": "field->cpp_type()",
          "old_line_content": "    const GeneratorOptions& options,",
          "new_line_content": "      field->cpp_type() != FieldDescriptor::CPPTYPE_MESSAGE) {",
          "content_same": false
        },
        {
          "line": 2929,
          "old_api": null,
          "new_api": "JSFieldTypeAnnotation",
          "old_text": null,
          "new_text": "JSFieldTypeAnnotation(\n        options, field,\n        /* is_setter_argument = */ false,\n        /* force_present = */ false,\n        /* singular_if_not_packed = */ false,\n        /* bytes_mode = */ BYTES_DEFAULT)",
          "old_line_content": "    io::Printer* printer,",
          "new_line_content": "    string typed_annotation = JSFieldTypeAnnotation(",
          "content_same": false
        },
        {
          "line": 3439,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "output.get()",
          "old_line_content": "",
          "new_line_content": "        GOOGLE_CHECK(output.get());",
          "content_same": false
        },
        {
          "line": 3445,
          "old_api": null,
          "new_api": "FindProvidesForEnum",
          "old_text": null,
          "new_text": "FindProvidesForEnum(options, &printer, enumdesc, &provided)",
          "old_line_content": "",
          "new_line_content": "        FindProvidesForEnum(options, &printer, enumdesc, &provided);",
          "content_same": false
        },
        {
          "line": 2935,
          "old_api": null,
          "new_api": "getField",
          "old_text": null,
          "new_text": "printer->Print(\n        \"  f = /** @type {$type$} */ (jspb.Message.getField(this, $index$));\\n\",\n        \"index\", JSFieldIndex(field),\n        \"type\", typed_annotation)",
          "old_line_content": "        /* is_setter_argument = */ false,",
          "new_line_content": "    printer->Print(",
          "content_same": false
        },
        {
          "line": 3447,
          "old_api": null,
          "new_api": "GenerateTestOnly",
          "old_text": null,
          "new_text": "GenerateTestOnly(options, &printer)",
          "old_line_content": "",
          "new_line_content": "        GenerateTestOnly(options, &printer);",
          "content_same": false
        },
        {
          "line": 2937,
          "old_api": null,
          "new_api": "JSFieldIndex",
          "old_text": null,
          "new_text": "JSFieldIndex(field)",
          "old_line_content": "        /* singular_if_not_packed = */ false,",
          "new_line_content": "        \"index\", JSFieldIndex(field),",
          "content_same": false
        },
        {
          "line": 2940,
          "old_api": null,
          "new_api": "Print",
          "old_text": null,
          "new_text": "printer->Print(\n        \"  f = this.get$name$($nolazy$);\\n\",\n        \"name\", JSGetterName(options, field, BYTES_U8),\n        // No lazy creation for maps containers -- fastpath the empty case.\n        \"nolazy\", (field->is_map()) ? \"true\" : \"\")",
          "old_line_content": "        \"  f = /** @type {$type$} */ (jspb.Message.getField(this, $index$));\\n\",",
          "new_line_content": "    printer->Print(",
          "content_same": false
        },
        {
          "line": 2942,
          "old_api": null,
          "new_api": "JSGetterName",
          "old_text": null,
          "new_text": "JSGetterName(options, field, BYTES_U8)",
          "old_line_content": "        \"type\", typed_annotation);",
          "new_line_content": "        \"name\", JSGetterName(options, field, BYTES_U8),",
          "content_same": false
        },
        {
          "line": 3457,
          "old_api": null,
          "new_api": "count",
          "old_text": null,
          "new_text": "allowed_set.count(file)",
          "old_line_content": "        }",
          "new_line_content": "      if (allowed_set.count(file) == 1) {",
          "content_same": false
        },
        {
          "line": 3458,
          "old_api": null,
          "new_api": "GetExtensionFileName",
          "old_text": null,
          "new_text": "GetExtensionFileName(options, file)",
          "old_line_content": "      }",
          "new_line_content": "        string filename = GetExtensionFileName(options, file);",
          "content_same": false
        },
        {
          "line": 2949,
          "old_api": null,
          "new_api": "IsMap",
          "old_text": null,
          "new_text": "IsMap(options, field)",
          "old_line_content": "  }",
          "new_line_content": "  if (IsMap(options, field)) {",
          "content_same": false
        },
        {
          "line": 2950,
          "old_api": null,
          "new_api": "getLength",
          "old_text": null,
          "new_text": "printer->Print(\n        \"  if (f && f.getLength() > 0) {\\n\")",
          "old_line_content": "",
          "new_line_content": "    printer->Print(",
          "content_same": false
        },
        {
          "line": 3463,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "output.get()",
          "old_line_content": "",
          "new_line_content": "        io::Printer printer(output.get(), '$');",
          "content_same": false
        },
        {
          "line": 2952,
          "old_api": null,
          "new_api": "is_repeated",
          "old_text": null,
          "new_text": "field->is_repeated()",
          "old_line_content": "  // goes on the wire.",
          "new_line_content": "  } else if (field->is_repeated()) {",
          "content_same": false
        },
        {
          "line": 3470,
          "old_api": null,
          "new_api": "extension_count",
          "old_text": null,
          "new_text": "files[i]->extension_count()",
          "old_line_content": "",
          "new_line_content": "        for (int j = 0; j < files[i]->extension_count(); j++) {",
          "content_same": false
        },
        {
          "line": 3471,
          "old_api": null,
          "new_api": "extension",
          "old_text": null,
          "new_text": "files[i]->extension(j)",
          "old_line_content": "        std::set<string> provided;",
          "new_line_content": "          if (ShouldGenerateExtension(files[i]->extension(j))) {",
          "content_same": false
        },
        {
          "line": 3472,
          "old_api": null,
          "new_api": "extension",
          "old_text": null,
          "new_text": "files[i]->extension(j)",
          "old_line_content": "        vector<const FieldDescriptor*> fields;",
          "new_line_content": "            fields.push_back(files[i]->extension(j));",
          "content_same": false
        },
        {
          "line": 2963,
          "old_api": null,
          "new_api": "cpp_type",
          "old_text": null,
          "new_text": "field->cpp_type()",
          "old_line_content": "    } else {",
          "new_line_content": "      switch (field->cpp_type()) {",
          "content_same": false
        },
        {
          "line": 3477,
          "old_api": null,
          "new_api": "GenerateProvides",
          "old_text": null,
          "new_text": "GenerateProvides(options, &printer, &provided)",
          "old_line_content": "          }",
          "new_line_content": "        GenerateProvides(options, &printer, &provided);",
          "content_same": false
        },
        {
          "line": 3478,
          "old_api": null,
          "new_api": "GenerateTestOnly",
          "old_text": null,
          "new_text": "GenerateTestOnly(options, &printer)",
          "old_line_content": "        }",
          "new_line_content": "        GenerateTestOnly(options, &printer);",
          "content_same": false
        },
        {
          "line": 3479,
          "old_api": null,
          "new_api": "GenerateRequiresForExtensions",
          "old_text": null,
          "new_text": "GenerateRequiresForExtensions(options, &printer, fields, &provided)",
          "old_line_content": "",
          "new_line_content": "        GenerateRequiresForExtensions(options, &printer, fields, &provided);",
          "content_same": false
        },
        {
          "line": 2969,
          "old_api": null,
          "new_api": "Print",
          "old_text": null,
          "new_text": "printer->Print(\"  if (f !== 0) {\\n\")",
          "old_line_content": "        case FieldDescriptor::CPPTYPE_INT64:",
          "new_line_content": "            printer->Print(\"  if (f !== 0) {\\n\");",
          "content_same": false
        },
        {
          "line": 2977,
          "old_api": null,
          "new_api": "Print",
          "old_text": null,
          "new_text": "printer->Print(\n              \"  if (f !== 0.0) {\\n\")",
          "old_line_content": "",
          "new_line_content": "          printer->Print(",
          "content_same": false
        },
        {
          "line": 3491,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "files.size()",
          "old_line_content": "    }",
          "new_line_content": "    for (int i = 0; i < files.size(); i++) {",
          "content_same": false
        },
        {
          "line": 3496,
          "old_api": null,
          "new_api": "Open",
          "old_text": null,
          "new_text": "context->Open(filename)",
          "old_line_content": "      const google::protobuf::FileDescriptor* file = files[i];",
          "new_line_content": "      google::protobuf::scoped_ptr<io::ZeroCopyOutputStream> output(context->Open(filename));",
          "content_same": false
        },
        {
          "line": 3497,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "output.get()",
          "old_line_content": "",
          "new_line_content": "      GOOGLE_CHECK(output.get());",
          "content_same": false
        },
        {
          "line": 3498,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "output.get()",
          "old_line_content": "      string filename =",
          "new_line_content": "      io::Printer printer(output.get(), '$');",
          "content_same": false
        },
        {
          "line": 2996,
          "old_api": null,
          "new_api": "IsMap",
          "old_text": null,
          "new_text": "IsMap(options, field)",
          "old_line_content": "    }",
          "new_line_content": "  if (IsMap(options, field)) {",
          "content_same": false
        },
        {
          "line": 2997,
          "old_api": null,
          "new_api": "MapFieldKey",
          "old_text": null,
          "new_text": "MapFieldKey(field)",
          "old_line_content": "  }",
          "new_line_content": "    const FieldDescriptor* key_field = MapFieldKey(field);",
          "content_same": false
        },
        {
          "line": 2998,
          "old_api": null,
          "new_api": "MapFieldValue",
          "old_text": null,
          "new_text": "MapFieldValue(field)",
          "old_line_content": "",
          "new_line_content": "    const FieldDescriptor* value_field = MapFieldValue(field);",
          "content_same": false
        },
        {
          "line": 2999,
          "old_api": null,
          "new_api": "serializeBinary",
          "old_text": null,
          "new_text": "printer->Print(\n        \"    f.serializeBinary($index$, writer, \"\n                              \"$keyWriterFn$, $valueWriterFn$\",\n        \"index\", SimpleItoa(field->number()),\n        \"keyWriterFn\", JSBinaryWriterMethodName(options, key_field),\n        \"valueWriterFn\", JSBinaryWriterMethodName(options, value_field))",
          "old_line_content": "  // Write the field on the wire.",
          "new_line_content": "    printer->Print(",
          "content_same": false
        },
        {
          "line": 3004,
          "old_api": null,
          "new_api": "JSBinaryWriterMethodName",
          "old_text": null,
          "new_text": "JSBinaryWriterMethodName(options, value_field)",
          "old_line_content": "        \"    f.serializeBinary($index$, writer, \"",
          "new_line_content": "        \"valueWriterFn\", JSBinaryWriterMethodName(options, value_field));",
          "content_same": false
        },
        {
          "line": 3013,
          "old_api": null,
          "new_api": "Print",
          "old_text": null,
          "new_text": "printer->Print(\n        \"    writer.write$method$(\\n\"\n        \"      $index$,\\n\"\n        \"      f\",\n        \"method\", JSBinaryReadWriteMethodName(field, /* is_writer = */ true),\n        \"index\", SimpleItoa(field->number()))",
          "old_line_content": "    }",
          "new_line_content": "    printer->Print(",
          "content_same": false
        },
        {
          "line": 3018,
          "old_api": null,
          "new_api": "number",
          "old_text": null,
          "new_text": "field->number()",
          "old_line_content": "        \"    writer.write$method$(\\n\"",
          "new_line_content": "        \"index\", SimpleItoa(field->number()));",
          "content_same": false
        },
        {
          "line": 3020,
          "old_api": null,
          "new_api": "cpp_type",
          "old_text": null,
          "new_text": "field->cpp_type()",
          "old_line_content": "        \"      f\",",
          "new_line_content": "    if (field->cpp_type() == FieldDescriptor::CPPTYPE_MESSAGE &&",
          "content_same": false
        },
        {
          "line": 3027,
          "old_api": null,
          "new_api": "Print",
          "old_text": null,
          "new_text": "printer->Print(\"\\n\")",
          "old_line_content": "          \",\\n\"",
          "new_line_content": "      printer->Print(\"\\n\");",
          "content_same": false
        },
        {
          "line": 3030,
          "old_api": null,
          "new_api": "Print",
          "old_text": null,
          "new_text": "printer->Print(\n        \"    );\\n\")",
          "old_line_content": "    } else {",
          "new_line_content": "    printer->Print(",
          "content_same": false
        },
        {
          "line": 3035,
          "old_api": null,
          "new_api": "Print",
          "old_text": null,
          "new_text": "printer->Print(\n      \"  }\\n\")",
          "old_line_content": "        \"    );\\n\");",
          "new_line_content": "  printer->Print(",
          "content_same": false
        },
        {
          "line": 3042,
          "old_api": null,
          "new_api": "Print",
          "old_text": null,
          "new_text": "printer->Print(\n      \"/**\\n\"\n      \" * @enum {number}\\n\"\n      \" */\\n\"\n      \"$name$ = {\\n\",\n      \"name\", GetPath(options, enumdesc))",
          "old_line_content": "",
          "new_line_content": "  printer->Print(",
          "content_same": false
        },
        {
          "line": 3047,
          "old_api": null,
          "new_api": "GetPath",
          "old_text": null,
          "new_text": "GetPath(options, enumdesc)",
          "old_line_content": "      \"/**\\n\"",
          "new_line_content": "      \"name\", GetPath(options, enumdesc));",
          "content_same": false
        },
        {
          "line": 3049,
          "old_api": null,
          "new_api": "value_count",
          "old_text": null,
          "new_text": "enumdesc->value_count()",
          "old_line_content": "      \" */\\n\"",
          "new_line_content": "  for (int i = 0; i < enumdesc->value_count(); i++) {",
          "content_same": false
        },
        {
          "line": 3050,
          "old_api": null,
          "new_api": "value",
          "old_text": null,
          "new_text": "enumdesc->value(i)",
          "old_line_content": "      \"$name$ = {\\n\",",
          "new_line_content": "    const EnumValueDescriptor* value = enumdesc->value(i);",
          "content_same": false
        },
        {
          "line": 3067,
          "old_api": null,
          "new_api": "extension_scope",
          "old_text": null,
          "new_text": "field->extension_scope()",
          "old_line_content": "void Generator::GenerateExtension(const GeneratorOptions& options,",
          "new_line_content": "      (field->extension_scope() ?",
          "content_same": false
        },
        {
          "line": 3068,
          "old_api": null,
          "new_api": "extension_scope",
          "old_text": null,
          "new_text": "field->extension_scope()",
          "old_line_content": "                                  io::Printer* printer,",
          "new_line_content": "       GetPath(options, field->extension_scope()) :",
          "content_same": false
        },
        {
          "line": 3069,
          "old_api": null,
          "new_api": "file",
          "old_text": null,
          "new_text": "field->file()",
          "old_line_content": "                                  const FieldDescriptor* field) const {",
          "new_line_content": "       GetPath(options, field->file()));",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 3072,
          "old_api": "extension_scope",
          "new_api": null,
          "old_text": "field->extension_scope()",
          "new_text": null,
          "old_line_content": "       GetPath(options, field->extension_scope()) :",
          "new_line_content": "      \"\\n\"",
          "content_same": false
        },
        {
          "line": 3073,
          "old_api": "file",
          "new_api": null,
          "old_text": "field->file()",
          "new_text": null,
          "old_line_content": "       GetPath(options, field->file()));",
          "new_line_content": "      \"/**\\n\"",
          "content_same": false
        },
        {
          "line": 3075,
          "old_api": "ExtensionFieldInfo",
          "new_api": null,
          "old_text": "printer->Print(\n      \"\\n\"\n      \"/**\\n\"\n      \" * A tuple of {field number, class constructor} for the extension\\n\"\n      \" * field named `$name$`.\\n\"\n      \" * @type {!jspb.ExtensionFieldInfo.<$extensionType$>}\\n\"\n      \" */\\n\"\n      \"$class$.$name$ = new jspb.ExtensionFieldInfo(\\n\",\n      \"name\", JSObjectFieldName(options, field),\n      \"class\", extension_scope,\n      \"extensionType\", JSFieldTypeAnnotation(\n          options, field,\n          /* is_setter_argument = */ false,\n          /* force_present = */ true,\n          /* singular_if_not_packed = */ false))",
          "new_text": null,
          "old_line_content": "  printer->Print(",
          "new_line_content": "      \" * field named `$name$`.\\n\"",
          "content_same": false
        },
        {
          "line": 3083,
          "old_api": "JSObjectFieldName",
          "new_api": null,
          "old_text": "JSObjectFieldName(options, field)",
          "new_text": null,
          "old_line_content": "      \"name\", JSObjectFieldName(options, field),",
          "new_line_content": "          /* is_setter_argument = */ false,",
          "content_same": false
        },
        {
          "line": 3085,
          "old_api": "JSFieldTypeAnnotation",
          "new_api": null,
          "old_text": "JSFieldTypeAnnotation(\n          options, field,\n          /* is_setter_argument = */ false,\n          /* force_present = */ true,\n          /* singular_if_not_packed = */ false)",
          "new_text": null,
          "old_line_content": "      \"extensionType\", JSFieldTypeAnnotation(",
          "new_line_content": "          /* singular_if_not_packed = */ false));",
          "content_same": false
        },
        {
          "line": 3090,
          "old_api": "Print",
          "new_api": null,
          "old_text": "printer->Print(\n      \"    $index$,\\n\"\n      \"    {$name$: 0},\\n\"\n      \"    $ctor$,\\n\"\n      \"     /** @type {?function((boolean|undefined),!jspb.Message=): \"\n      \"!Object} */ (\\n\"\n      \"         $toObject$),\\n\"\n      \"    $repeated$);\\n\",\n      \"index\", SimpleItoa(field->number()),\n      \"name\", JSObjectFieldName(options, field),\n      \"ctor\", (field->cpp_type() == FieldDescriptor::CPPTYPE_MESSAGE ?\n               SubmessageTypeRef(options, field) : string(\"null\")),\n      \"toObject\", (field->cpp_type() == FieldDescriptor::CPPTYPE_MESSAGE ?\n                   (SubmessageTypeRef(options, field) + \".toObject\") :\n                   string(\"null\")),\n      \"repeated\", (field->is_repeated() ? \"1\" : \"0\"))",
          "new_text": null,
          "old_line_content": "  printer->Print(",
          "new_line_content": "      \"     /** @type {?function((boolean|undefined),!jspb.Message=): \"",
          "content_same": false
        },
        {
          "line": 3102,
          "old_api": "cpp_type",
          "new_api": null,
          "old_text": "field->cpp_type()",
          "new_text": null,
          "old_line_content": "      \"toObject\", (field->cpp_type() == FieldDescriptor::CPPTYPE_MESSAGE ?",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3103,
          "old_api": "SubmessageTypeRef",
          "new_api": null,
          "old_text": "SubmessageTypeRef(options, field)",
          "new_text": null,
          "old_line_content": "                   (SubmessageTypeRef(options, field) + \".toObject\") :",
          "new_line_content": "  if (options.binary) {",
          "content_same": false
        },
        {
          "line": 3105,
          "old_api": "is_repeated",
          "new_api": null,
          "old_text": "field->is_repeated()",
          "new_text": null,
          "old_line_content": "      \"repeated\", (field->is_repeated() ? \"1\" : \"0\"));",
          "new_line_content": "        \"\\n\"",
          "content_same": false
        },
        {
          "line": 3108,
          "old_api": "ExtensionFieldBinaryInfo",
          "new_api": null,
          "old_text": "printer->Print(\n        \"\\n\"\n        \"$extendName$Binary[$index$] = new jspb.ExtensionFieldBinaryInfo(\\n\"\n        \"    $class$.$name$,\\n\"\n        \"    $binaryReaderFn$,\\n\"\n        \"    $binaryWriterFn$,\\n\"\n        \"    $binaryMessageSerializeFn$,\\n\"\n        \"    $binaryMessageDeserializeFn$,\\n\",\n        \"extendName\", JSExtensionsObjectName(options, field->file(),\n                                             field->containing_type()),\n        \"index\", SimpleItoa(field->number()),\n        \"class\", extension_scope,\n        \"name\", JSObjectFieldName(options, field),\n        \"binaryReaderFn\", JSBinaryReaderMethodName(options, field),\n        \"binaryWriterFn\", JSBinaryWriterMethodName(options, field),\n        \"binaryMessageSerializeFn\",\n        (field->cpp_type() == FieldDescriptor::CPPTYPE_MESSAGE) ?\n        (SubmessageTypeRef(options, field) +\n         \".serializeBinaryToWriter\") : \"undefined\",\n        \"binaryMessageDeserializeFn\",\n        (field->cpp_type() == FieldDescriptor::CPPTYPE_MESSAGE) ?\n        (SubmessageTypeRef(options, field) +\n         \".deserializeBinaryFromReader\") : \"undefined\")",
          "new_text": null,
          "old_line_content": "    printer->Print(",
          "new_line_content": "        \"    $binaryReaderFn$,\\n\"",
          "content_same": false
        },
        {
          "line": 3122,
          "old_api": "JSBinaryWriterMethodName",
          "new_api": null,
          "old_text": "JSBinaryWriterMethodName(options, field)",
          "new_text": null,
          "old_line_content": "        \"binaryWriterFn\", JSBinaryWriterMethodName(options, field),",
          "new_line_content": "         \".serializeBinaryToWriter\") : \"undefined\",",
          "content_same": false
        },
        {
          "line": 3129,
          "old_api": "SubmessageTypeRef",
          "new_api": null,
          "old_text": "SubmessageTypeRef(options, field)",
          "new_text": null,
          "old_line_content": "        (SubmessageTypeRef(options, field) +",
          "new_line_content": "        \"    $isPacked$);\\n\",",
          "content_same": false
        },
        {
          "line": 3132,
          "old_api": "Print",
          "new_api": null,
          "old_text": "printer->Print(\n        \"    $isPacked$);\\n\",\n        \"isPacked\", (field->is_packed() ? \"true\" : \"false\"))",
          "new_text": null,
          "old_line_content": "    printer->Print(",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3134,
          "old_api": "is_packed",
          "new_api": null,
          "old_text": "field->is_packed()",
          "new_text": null,
          "old_line_content": "        \"isPacked\", (field->is_packed() ? \"true\" : \"false\"));",
          "new_line_content": "      \"// This registers the extension field with the extended class, so that\\n\"",
          "content_same": false
        },
        {
          "line": 3137,
          "old_api": "Print",
          "new_api": null,
          "old_text": "printer->Print(\n      \"// This registers the extension field with the extended class, so that\\n\"\n      \"// toObject() will function correctly.\\n\"\n      \"$extendName$[$index$] = $class$.$name$;\\n\"\n      \"\\n\",\n      \"extendName\", JSExtensionsObjectName(options, field->file(),\n                                           field->containing_type()),\n      \"index\", SimpleItoa(field->number()),\n      \"class\", extension_scope,\n      \"name\", JSObjectFieldName(options, field))",
          "new_text": null,
          "old_line_content": "  printer->Print(",
          "new_line_content": "      \"\\n\",",
          "content_same": false
        },
        {
          "line": 3143,
          "old_api": "containing_type",
          "new_api": null,
          "old_text": "field->containing_type()",
          "new_text": null,
          "old_line_content": "                                           field->containing_type()),",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3144,
          "old_api": "number",
          "new_api": null,
          "old_text": "field->number()",
          "new_text": null,
          "old_line_content": "      \"index\", SimpleItoa(field->number()),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3146,
          "old_api": "JSObjectFieldName",
          "new_api": null,
          "old_text": "JSObjectFieldName(options, field)",
          "new_text": null,
          "old_line_content": "      \"name\", JSObjectFieldName(options, field));",
          "new_line_content": "    const vector< pair< string, string > >& options,",
          "content_same": false
        },
        {
          "line": 3152,
          "old_api": "size",
          "new_api": null,
          "old_text": "options.size()",
          "new_text": null,
          "old_line_content": "  for (int i = 0; i < options.size(); i++) {",
          "new_line_content": "        return false;",
          "content_same": false
        },
        {
          "line": 3199,
          "old_api": "empty",
          "new_api": null,
          "old_text": "options[i].second.empty()",
          "new_text": null,
          "old_line_content": "      if (!options[i].second.empty()) {",
          "new_line_content": "      one_output_file_per_input_file = true;",
          "content_same": false
        },
        {
          "line": 3205,
          "old_api": "empty",
          "new_api": null,
          "old_text": "options[i].second.empty()",
          "new_text": null,
          "old_line_content": "      if (!options[i].second.empty()) {",
          "new_line_content": "      broken_proto3_semantics = true;",
          "content_same": false
        },
        {
          "line": 3222,
          "old_api": "empty",
          "new_api": null,
          "old_text": "library.empty()",
          "new_text": null,
          "old_line_content": "      (add_require_for_enums || testonly || !library.empty() ||",
          "new_line_content": "        \"The add_require_for_enums, testonly, library, error_on_name_conflict, \"",
          "content_same": false
        },
        {
          "line": 3244,
          "old_api": "empty",
          "new_api": null,
          "old_text": "library.empty()",
          "new_text": null,
          "old_line_content": "  if (!library.empty()) {",
          "new_line_content": "  // Otherwise, we create one output file per type.",
          "content_same": false
        },
        {
          "line": 3261,
          "old_api": "size",
          "new_api": null,
          "old_text": "files.size()",
          "new_text": null,
          "old_line_content": "  for (int i = 0; i < files.size(); i++) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3262,
          "old_api": "GenerateFileAndDeps",
          "new_api": null,
          "old_text": "GenerateFileAndDeps(options, printer, files[i], &all_files, &generated)",
          "new_text": null,
          "old_line_content": "    GenerateFileAndDeps(options, printer, files[i], &all_files, &generated);",
          "new_line_content": "void Generator::GenerateFileAndDeps(",
          "content_same": false
        },
        {
          "line": 3273,
          "old_api": "end",
          "new_api": null,
          "old_text": "generated->end()",
          "new_text": null,
          "old_line_content": "  if (generated->find(root) != generated->end()) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3279,
          "old_api": "dependency_count",
          "new_api": null,
          "old_text": "root->dependency_count()",
          "new_text": null,
          "old_line_content": "  for (int i = 0; i < root->dependency_count(); i++) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3280,
          "old_api": "dependency",
          "new_api": null,
          "old_text": "root->dependency(i)",
          "new_text": null,
          "old_line_content": "    const FileDescriptor* dep = root->dependency(i);",
          "new_line_content": "  // Generate this file's content.  Only generate if the file is part of the",
          "content_same": false
        },
        {
          "line": 3281,
          "old_api": "GenerateFileAndDeps",
          "new_api": null,
          "old_text": "GenerateFileAndDeps(options, printer, dep, all_files, generated)",
          "new_text": null,
          "old_line_content": "    GenerateFileAndDeps(options, printer, dep, all_files, generated);",
          "new_line_content": "  // original set requested to be generated; i.e., don't take all transitive",
          "content_same": false
        },
        {
          "line": 3287,
          "old_api": "end",
          "new_api": null,
          "old_text": "all_files->end()",
          "new_text": null,
          "old_line_content": "  if (all_files->find(root) != all_files->end()) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3288,
          "old_api": "GenerateClassesAndEnums",
          "new_api": null,
          "old_text": "GenerateClassesAndEnums(options, printer, root)",
          "new_text": null,
          "old_line_content": "    GenerateClassesAndEnums(options, printer, root);",
          "new_line_content": "void Generator::GenerateFile(const GeneratorOptions& options,",
          "content_same": false
        },
        {
          "line": 3305,
          "old_api": "Print",
          "new_api": null,
          "old_text": "printer->Print(\n          \"var $alias$ = require('$file$');\\n\",\n          \"alias\", ModuleAlias(name),\n          \"file\", GetRootPath(file->name(), name) + GetJSFilename(options, name))",
          "new_text": null,
          "old_line_content": "      printer->Print(",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3307,
          "old_api": "ModuleAlias",
          "new_api": null,
          "old_text": "ModuleAlias(name)",
          "new_text": null,
          "old_line_content": "          \"alias\", ModuleAlias(name),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3308,
          "old_api": "GetJSFilename",
          "new_api": null,
          "old_text": "GetJSFilename(options, name)",
          "new_text": null,
          "old_line_content": "          \"file\", GetRootPath(file->name(), name) + GetJSFilename(options, name));",
          "new_line_content": "  set<string> provided;",
          "content_same": false
        },
        {
          "line": 3314,
          "old_api": "extension_count",
          "new_api": null,
          "old_text": "file->extension_count()",
          "new_text": null,
          "old_line_content": "  for (int i = 0; i < file->extension_count(); i++) {",
          "new_line_content": "    if (options.import_style == GeneratorOptions::kImportClosure &&",
          "content_same": false
        },
        {
          "line": 3322,
          "old_api": "GetPath",
          "new_api": null,
          "old_text": "GetPath(options, file)",
          "new_text": null,
          "old_line_content": "    provided.insert(GetPath(options, file) + \".\" +",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3327,
          "old_api": "FindProvidesForFile",
          "new_api": null,
          "old_text": "FindProvidesForFile(options, printer, file, &provided)",
          "new_text": null,
          "old_line_content": "  FindProvidesForFile(options, printer, file, &provided);",
          "new_line_content": "  if (options.import_style == GeneratorOptions::kImportClosure) {",
          "content_same": false
        },
        {
          "line": 3330,
          "old_api": "push_back",
          "new_api": null,
          "old_text": "files.push_back(file)",
          "new_text": null,
          "old_line_content": "  files.push_back(file);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3332,
          "old_api": "GenerateRequiresForLibrary",
          "new_api": null,
          "old_text": "GenerateRequiresForLibrary(options, printer, files, &provided)",
          "new_text": null,
          "old_line_content": "    GenerateRequiresForLibrary(options, printer, files, &provided);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3339,
          "old_api": "begin",
          "new_api": null,
          "old_text": "extensions.begin()",
          "new_text": null,
          "old_line_content": "  for (set<const FieldDescriptor*>::const_iterator it = extensions.begin();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3340,
          "old_api": "end",
          "new_api": null,
          "old_text": "extensions.end()",
          "new_text": null,
          "old_line_content": "       it != extensions.end(); ++it) {",
          "new_line_content": "  if (options.import_style == GeneratorOptions::kImportCommonJs) {",
          "content_same": false
        },
        {
          "line": 3345,
          "old_api": "extend",
          "new_api": null,
          "old_text": "printer->Print(\"goog.object.extend(exports, $package$);\\n\",\n                   \"package\", GetPath(options, file))",
          "new_text": null,
          "old_line_content": "    printer->Print(\"goog.object.extend(exports, $package$);\\n\",",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3346,
          "old_api": "GetPath",
          "new_api": null,
          "old_text": "GetPath(options, file)",
          "new_text": null,
          "old_line_content": "                   \"package\", GetPath(options, file));",
          "new_line_content": "bool Generator::GenerateAll(const vector<const FileDescriptor*>& files,",
          "content_same": false
        },
        {
          "line": 3355,
          "old_api": "ParseGeneratorParameter",
          "new_api": null,
          "old_text": "ParseGeneratorParameter(parameter, &option_pairs)",
          "new_text": null,
          "old_line_content": "  ParseGeneratorParameter(parameter, &option_pairs);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 3357,
          "old_api": "ParseFromOptions",
          "new_api": null,
          "old_text": "options.ParseFromOptions(option_pairs, error)",
          "new_text": null,
          "old_line_content": "  if (!options.ParseFromOptions(option_pairs, error)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3365,
          "old_api": "GetFileNameExtension",
          "new_api": null,
          "old_text": "options.GetFileNameExtension()",
          "new_text": null,
          "old_line_content": "                      options.GetFileNameExtension();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3366,
          "old_api": "Open",
          "new_api": null,
          "old_text": "context->Open(filename)",
          "new_text": null,
          "old_line_content": "    google::protobuf::scoped_ptr<io::ZeroCopyOutputStream> output(context->Open(filename));",
          "new_line_content": "    // Pull out all extensions -- we need these to generate all",
          "content_same": false
        },
        {
          "line": 3367,
          "old_api": "get",
          "new_api": null,
          "old_text": "output.get()",
          "new_text": null,
          "old_line_content": "    GOOGLE_CHECK(output.get());",
          "new_line_content": "    // provides/requires.",
          "content_same": false
        },
        {
          "line": 2856,
          "old_api": "push",
          "new_api": null,
          "old_text": "printer->Print(\"      msg.get$name$().push(value);\\n\", \"name\",\n                     JSGetterName(options, field))",
          "new_text": null,
          "old_line_content": "      printer->Print(\"      msg.get$name$().push(value);\\n\", \"name\",",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 2857,
          "old_api": "JSGetterName",
          "new_api": null,
          "old_text": "JSGetterName(options, field)",
          "new_text": null,
          "old_line_content": "                     JSGetterName(options, field));",
          "new_line_content": "      // Singular fields, and packed repeated fields, receive a |value| either",
          "content_same": false
        },
        {
          "line": 2858,
          "old_api": "Print",
          "new_api": null,
          "old_text": "printer->Print(\"      msg.set$name$(msg.get$name$());\\n\", \"name\",\n                     JSGetterName(options, field))",
          "new_text": null,
          "old_line_content": "      printer->Print(\"      msg.set$name$(msg.get$name$());\\n\", \"name\",",
          "new_line_content": "      // as the field's value or as the array of all the field's values; set",
          "content_same": false
        },
        {
          "line": 2859,
          "old_api": "JSGetterName",
          "new_api": null,
          "old_text": "JSGetterName(options, field)",
          "new_text": null,
          "old_line_content": "                     JSGetterName(options, field));",
          "new_line_content": "      // this as the field's value directly.",
          "content_same": false
        },
        {
          "line": 3368,
          "old_api": "get",
          "new_api": null,
          "old_text": "output.get()",
          "new_text": null,
          "old_line_content": "    io::Printer printer(output.get(), '$');",
          "new_line_content": "    vector<const FieldDescriptor*> extensions;",
          "content_same": false
        },
        {
          "line": 3373,
          "old_api": "size",
          "new_api": null,
          "old_text": "files.size()",
          "new_text": null,
          "old_line_content": "    for (int i = 0; i < files.size(); i++) {",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 3374,
          "old_api": "extension_count",
          "new_api": null,
          "old_text": "files[i]->extension_count()",
          "new_text": null,
          "old_line_content": "      for (int j = 0; j < files[i]->extension_count(); j++) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3375,
          "old_api": "extension",
          "new_api": null,
          "old_text": "files[i]->extension(j)",
          "new_text": null,
          "old_line_content": "        const FieldDescriptor* extension = files[i]->extension(j);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2864,
          "old_api": "Print",
          "new_api": null,
          "old_text": "printer->Print(\n          \"      msg.set$name$(value);\\n\",\n          \"name\", JSGetterName(options, field))",
          "new_text": null,
          "old_line_content": "      printer->Print(",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 2870,
          "old_api": "Print",
          "new_api": null,
          "old_text": "printer->Print(\"      break;\\n\")",
          "new_text": null,
          "old_line_content": "  printer->Print(\"      break;\\n\");",
          "new_line_content": "                                             io::Printer* printer,",
          "content_same": false
        },
        {
          "line": 3384,
          "old_api": "FindProvidesForFields",
          "new_api": null,
          "old_text": "FindProvidesForFields(options, &printer, extensions, &provided)",
          "new_text": null,
          "old_line_content": "    FindProvidesForFields(options, &printer, extensions, &provided);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3386,
          "old_api": "GenerateTestOnly",
          "new_api": null,
          "old_text": "GenerateTestOnly(options, &printer)",
          "new_text": null,
          "old_line_content": "    GenerateTestOnly(options, &printer);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2876,
          "old_api": "serializeBinaryToWriter",
          "new_api": null,
          "old_text": "printer->Print(\n      \"/**\\n\"\n      \" * Class method variant: serializes the given message to binary data\\n\"\n      \" * (in protobuf wire format), writing to the given BinaryWriter.\\n\"\n      \" * @param {!$class$} message\\n\"\n      \" * @param {!jspb.BinaryWriter} writer\\n\"\n      \" */\\n\"\n      \"$class$.serializeBinaryToWriter = function(message, \"\n      \"writer) {\\n\"\n      \"  message.serializeBinaryToWriter(writer);\\n\"\n      \"};\\n\"\n      \"\\n\"\n      \"\\n\"\n      \"/**\\n\"\n      \" * Serializes the message to binary data (in protobuf wire format).\\n\"\n      \" * @return {!Uint8Array}\\n\"\n      \" */\\n\"\n      \"$class$.prototype.serializeBinary = function() {\\n\"\n      \"  var writer = new jspb.BinaryWriter();\\n\"\n      \"  this.serializeBinaryToWriter(writer);\\n\"\n      \"  return writer.getResultBuffer();\\n\"\n      \"};\\n\"\n      \"\\n\"\n      \"\\n\"\n      \"/**\\n\"\n      \" * Serializes the message to binary data (in protobuf wire format),\\n\"\n      \" * writing to the given BinaryWriter.\\n\"\n      \" * @param {!jspb.BinaryWriter} writer\\n\"\n      \" */\\n\"\n      \"$class$.prototype.serializeBinaryToWriter = function (writer) {\\n\"\n      \"  var f = undefined;\\n\",\n      \"class\", GetPath(options, desc))",
          "new_text": null,
          "old_line_content": "  printer->Print(",
          "new_line_content": "      \" * @param {!$class$} message\\n\"",
          "content_same": false
        },
        {
          "line": 3391,
          "old_api": "size",
          "new_api": null,
          "old_text": "extensions.size()",
          "new_text": null,
          "old_line_content": "    for (int i = 0; i < extensions.size(); i++) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3392,
          "old_api": "ShouldGenerateExtension",
          "new_api": null,
          "old_text": "ShouldGenerateExtension(extensions[i])",
          "new_text": null,
          "old_line_content": "      if (ShouldGenerateExtension(extensions[i])) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3397,
          "old_api": "failed",
          "new_api": null,
          "old_text": "printer.failed()",
          "new_text": null,
          "old_line_content": "    if (printer.failed()) {",
          "new_line_content": "    set<const void*> allowed_set;",
          "content_same": false
        },
        {
          "line": 3400,
          "old_api": "output_mode",
          "new_api": null,
          "old_text": "options.output_mode()",
          "new_text": null,
          "old_line_content": "  } else if (options.output_mode() == GeneratorOptions::kOneOutputFilePerType) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3408,
          "old_api": "message_type_count",
          "new_api": null,
          "old_text": "file->message_type_count()",
          "new_text": null,
          "old_line_content": "      for (int j = 0; j < file->message_type_count(); j++) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3409,
          "old_api": "message_type",
          "new_api": null,
          "old_text": "file->message_type(j)",
          "new_text": null,
          "old_line_content": "        const Descriptor* desc = file->message_type(j);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3417,
          "old_api": "get",
          "new_api": null,
          "old_text": "output.get()",
          "new_text": null,
          "old_line_content": "        GOOGLE_CHECK(output.get());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3418,
          "old_api": "get",
          "new_api": null,
          "old_text": "output.get()",
          "new_text": null,
          "old_line_content": "        io::Printer printer(output.get(), '$');",
          "new_line_content": "        std::set<string> provided;",
          "content_same": false
        },
        {
          "line": 2907,
          "old_api": "GetPath",
          "new_api": null,
          "old_text": "GetPath(options, desc)",
          "new_text": null,
          "old_line_content": "      \"class\", GetPath(options, desc));",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 3423,
          "old_api": "FindProvidesForMessage",
          "new_api": null,
          "old_text": "FindProvidesForMessage(options, &printer, desc, &provided)",
          "new_text": null,
          "old_line_content": "        FindProvidesForMessage(options, &printer, desc, &provided);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3425,
          "old_api": "GenerateTestOnly",
          "new_api": null,
          "old_text": "GenerateTestOnly(options, &printer)",
          "new_text": null,
          "old_line_content": "        GenerateTestOnly(options, &printer);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3428,
          "old_api": "GenerateClass",
          "new_api": null,
          "old_text": "GenerateClass(options, &printer, desc)",
          "new_text": null,
          "old_line_content": "        GenerateClass(options, &printer, desc);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2918,
          "old_api": "GetPath",
          "new_api": null,
          "old_text": "GetPath(options, desc)",
          "new_text": null,
          "old_line_content": "        \"class\", GetPath(options, desc));",
          "new_line_content": "      \"};\\n\"",
          "content_same": false
        },
        {
          "line": 2921,
          "old_api": "Print",
          "new_api": null,
          "old_text": "printer->Print(\n      \"};\\n\"\n      \"\\n\"\n      \"\\n\")",
          "new_text": null,
          "old_line_content": "  printer->Print(",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3434,
          "old_api": "enum_type_count",
          "new_api": null,
          "old_text": "file->enum_type_count()",
          "new_text": null,
          "old_line_content": "      for (int j = 0; j < file->enum_type_count(); j++) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3435,
          "old_api": "enum_type",
          "new_api": null,
          "old_text": "file->enum_type(j)",
          "new_text": null,
          "old_line_content": "        const EnumDescriptor* enumdesc = file->enum_type(j);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2931,
          "old_api": "HasFieldPresence",
          "new_api": null,
          "old_text": "HasFieldPresence(options, field)",
          "new_text": null,
          "old_line_content": "  if (HasFieldPresence(options, field) &&",
          "new_line_content": "        /* is_setter_argument = */ false,",
          "content_same": false
        },
        {
          "line": 2932,
          "old_api": "cpp_type",
          "new_api": null,
          "old_text": "field->cpp_type()",
          "new_text": null,
          "old_line_content": "      field->cpp_type() != FieldDescriptor::CPPTYPE_MESSAGE) {",
          "new_line_content": "        /* force_present = */ false,",
          "content_same": false
        },
        {
          "line": 2933,
          "old_api": "JSFieldTypeAnnotation",
          "new_api": null,
          "old_text": "JSFieldTypeAnnotation(\n        options, field,\n        /* is_setter_argument = */ false,\n        /* force_present = */ false,\n        /* singular_if_not_packed = */ false,\n        /* bytes_mode = */ BYTES_DEFAULT)",
          "new_text": null,
          "old_line_content": "    string typed_annotation = JSFieldTypeAnnotation(",
          "new_line_content": "        /* singular_if_not_packed = */ false,",
          "content_same": false
        },
        {
          "line": 3443,
          "old_api": "get",
          "new_api": null,
          "old_text": "output.get()",
          "new_text": null,
          "old_line_content": "        GOOGLE_CHECK(output.get());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3444,
          "old_api": "get",
          "new_api": null,
          "old_text": "output.get()",
          "new_text": null,
          "old_line_content": "        io::Printer printer(output.get(), '$');",
          "new_line_content": "        std::set<string> provided;",
          "content_same": false
        },
        {
          "line": 3450,
          "old_api": "GenerateProvides",
          "new_api": null,
          "old_text": "GenerateProvides(options, &printer, &provided)",
          "new_text": null,
          "old_line_content": "        GenerateProvides(options, &printer, &provided);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2939,
          "old_api": "getField",
          "new_api": null,
          "old_text": "printer->Print(\n        \"  f = /** @type {$type$} */ (jspb.Message.getField(this, $index$));\\n\",\n        \"index\", JSFieldIndex(field),\n        \"type\", typed_annotation)",
          "new_text": null,
          "old_line_content": "    printer->Print(",
          "new_line_content": "  } else {",
          "content_same": false
        },
        {
          "line": 2941,
          "old_api": "JSFieldIndex",
          "new_api": null,
          "old_text": "JSFieldIndex(field)",
          "new_text": null,
          "old_line_content": "        \"index\", JSFieldIndex(field),",
          "new_line_content": "        \"  f = this.get$name$($nolazy$);\\n\",",
          "content_same": false
        },
        {
          "line": 3453,
          "old_api": "GenerateEnum",
          "new_api": null,
          "old_text": "GenerateEnum(options, &printer, enumdesc)",
          "new_text": null,
          "old_line_content": "        GenerateEnum(options, &printer, enumdesc);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3455,
          "old_api": "failed",
          "new_api": null,
          "old_text": "printer.failed()",
          "new_text": null,
          "old_line_content": "        if (printer.failed()) {",
          "new_line_content": "      // File-level extensions (message-level extensions are generated under",
          "content_same": false
        },
        {
          "line": 2946,
          "old_api": "JSGetterName",
          "new_api": null,
          "old_text": "JSGetterName(options, field, BYTES_U8)",
          "new_text": null,
          "old_line_content": "        \"name\", JSGetterName(options, field, BYTES_U8),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2948,
          "old_api": "is_map",
          "new_api": null,
          "old_text": "field->is_map()",
          "new_text": null,
          "old_line_content": "        \"nolazy\", (field->is_map()) ? \"true\" : \"\");",
          "new_line_content": "  // goes on the wire.",
          "content_same": false
        },
        {
          "line": 2954,
          "old_api": "getLength",
          "new_api": null,
          "old_text": "printer->Print(\n        \"  if (f && f.getLength() > 0) {\\n\")",
          "new_text": null,
          "old_line_content": "    printer->Print(",
          "new_line_content": "        \"  if (f.length > 0) {\\n\");",
          "content_same": false
        },
        {
          "line": 3466,
          "old_api": "get",
          "new_api": null,
          "old_text": "output.get()",
          "new_text": null,
          "old_line_content": "        GOOGLE_CHECK(output.get());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3467,
          "old_api": "get",
          "new_api": null,
          "old_text": "output.get()",
          "new_text": null,
          "old_line_content": "        io::Printer printer(output.get(), '$');",
          "new_line_content": "        std::set<string> provided;",
          "content_same": false
        },
        {
          "line": 3469,
          "old_api": "GenerateHeader",
          "new_api": null,
          "old_text": "GenerateHeader(options, &printer)",
          "new_text": null,
          "old_line_content": "        GenerateHeader(options, &printer);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2960,
          "old_api": "HasFieldPresence",
          "new_api": null,
          "old_text": "HasFieldPresence(options, field)",
          "new_text": null,
          "old_line_content": "    if (HasFieldPresence(options, field)) {",
          "new_line_content": "      // No field presence: serialize onto the wire only if value is",
          "content_same": false
        },
        {
          "line": 2961,
          "old_api": "Print",
          "new_api": null,
          "old_text": "printer->Print(\n          \"  if (f != null) {\\n\")",
          "new_text": null,
          "old_line_content": "      printer->Print(",
          "new_line_content": "      // non-default.  Defaults are documented here:",
          "content_same": false
        },
        {
          "line": 3474,
          "old_api": "extension_count",
          "new_api": null,
          "old_text": "files[i]->extension_count()",
          "new_text": null,
          "old_line_content": "        for (int j = 0; j < files[i]->extension_count(); j++) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3475,
          "old_api": "extension",
          "new_api": null,
          "old_text": "files[i]->extension(j)",
          "new_text": null,
          "old_line_content": "          if (ShouldGenerateExtension(files[i]->extension(j))) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2967,
          "old_api": "cpp_type",
          "new_api": null,
          "old_text": "field->cpp_type()",
          "new_text": null,
          "old_line_content": "      switch (field->cpp_type()) {",
          "new_line_content": "        case FieldDescriptor::CPPTYPE_UINT64: {",
          "content_same": false
        },
        {
          "line": 3480,
          "old_api": "FindProvidesForFields",
          "new_api": null,
          "old_text": "FindProvidesForFields(options, &printer, fields, &provided)",
          "new_text": null,
          "old_line_content": "        FindProvidesForFields(options, &printer, fields, &provided);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2973,
          "old_api": "Print",
          "new_api": null,
          "old_text": "printer->Print(\"  if (f !== 0) {\\n\")",
          "new_text": null,
          "old_line_content": "            printer->Print(\"  if (f !== 0) {\\n\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3485,
          "old_api": "extension_count",
          "new_api": null,
          "old_text": "files[i]->extension_count()",
          "new_text": null,
          "old_line_content": "        for (int j = 0; j < files[i]->extension_count(); j++) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3486,
          "old_api": "extension",
          "new_api": null,
          "old_text": "files[i]->extension(j)",
          "new_text": null,
          "old_line_content": "          if (ShouldGenerateExtension(files[i]->extension(j))) {",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 3487,
          "old_api": "extension",
          "new_api": null,
          "old_text": "files[i]->extension(j)",
          "new_text": null,
          "old_line_content": "            GenerateExtension(options, &printer, files[i]->extension(j));",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3499,
          "old_api": "name",
          "new_api": null,
          "old_text": "file->name()",
          "new_text": null,
          "old_line_content": "          options.output_dir + \"/\" + GetJSFilename(options, file->name());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3501,
          "old_api": "get",
          "new_api": null,
          "old_text": "output.get()",
          "new_text": null,
          "old_line_content": "      GOOGLE_CHECK(output.get());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3504,
          "old_api": "GenerateFile",
          "new_api": null,
          "old_text": "GenerateFile(options, &printer, file)",
          "new_text": null,
          "old_line_content": "      GenerateFile(options, &printer, file);",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 2993,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(false)",
          "new_text": null,
          "old_line_content": "          assert(false);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 3506,
          "old_api": "failed",
          "new_api": null,
          "old_text": "printer.failed()",
          "new_text": null,
          "old_line_content": "      if (printer.failed()) {",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 3000,
          "old_api": "IsMap",
          "new_api": null,
          "old_text": "IsMap(options, field)",
          "new_text": null,
          "old_line_content": "  if (IsMap(options, field)) {",
          "new_line_content": "        \"    f.serializeBinary($index$, writer, \"",
          "content_same": false
        },
        {
          "line": 3001,
          "old_api": "MapFieldKey",
          "new_api": null,
          "old_text": "MapFieldKey(field)",
          "new_text": null,
          "old_line_content": "    const FieldDescriptor* key_field = MapFieldKey(field);",
          "new_line_content": "                              \"$keyWriterFn$, $valueWriterFn$\",",
          "content_same": false
        },
        {
          "line": 3010,
          "old_api": "type",
          "new_api": null,
          "old_text": "value_field->type()",
          "new_text": null,
          "old_line_content": "    if (value_field->type() == FieldDescriptor::TYPE_MESSAGE) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3012,
          "old_api": "message_type",
          "new_api": null,
          "old_text": "value_field->message_type()",
          "new_text": null,
          "old_line_content": "          \"messageType\", GetPath(options, value_field->message_type()));",
          "new_line_content": "  } else {",
          "content_same": false
        },
        {
          "line": 3015,
          "old_api": "Print",
          "new_api": null,
          "old_text": "printer->Print(\");\\n\")",
          "new_text": null,
          "old_line_content": "    printer->Print(\");\\n\");",
          "new_line_content": "        \"      $index$,\\n\"",
          "content_same": false
        },
        {
          "line": 3024,
          "old_api": "cpp_type",
          "new_api": null,
          "old_text": "field->cpp_type()",
          "new_text": null,
          "old_line_content": "    if (field->cpp_type() == FieldDescriptor::CPPTYPE_MESSAGE &&",
          "new_line_content": "          \"      $submsg$.serializeBinaryToWriter\\n\",",
          "content_same": false
        },
        {
          "line": 3026,
          "old_api": "Print",
          "new_api": null,
          "old_text": "printer->Print(\n          \",\\n\"\n          \"      $submsg$.serializeBinaryToWriter\\n\",\n        \"submsg\", SubmessageTypeRef(options, field))",
          "new_text": null,
          "old_line_content": "      printer->Print(",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 3029,
          "old_api": "SubmessageTypeRef",
          "new_api": null,
          "old_text": "SubmessageTypeRef(options, field)",
          "new_text": null,
          "old_line_content": "        \"submsg\", SubmessageTypeRef(options, field));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3031,
          "old_api": "Print",
          "new_api": null,
          "old_text": "printer->Print(\"\\n\")",
          "new_text": null,
          "old_line_content": "      printer->Print(\"\\n\");",
          "new_line_content": "        \"    );\\n\");",
          "content_same": false
        },
        {
          "line": 3034,
          "old_api": "Print",
          "new_api": null,
          "old_text": "printer->Print(\n        \"    );\\n\")",
          "new_text": null,
          "old_line_content": "    printer->Print(",
          "new_line_content": "  // Close the `if`.",
          "content_same": false
        },
        {
          "line": 3039,
          "old_api": "Print",
          "new_api": null,
          "old_text": "printer->Print(\n      \"  }\\n\")",
          "new_text": null,
          "old_line_content": "  printer->Print(",
          "new_line_content": "void Generator::GenerateEnum(const GeneratorOptions& options,",
          "content_same": false
        },
        {
          "line": 3046,
          "old_api": "Print",
          "new_api": null,
          "old_text": "printer->Print(\n      \"/**\\n\"\n      \" * @enum {number}\\n\"\n      \" */\\n\"\n      \"$name$ = {\\n\",\n      \"name\", GetPath(options, enumdesc))",
          "new_text": null,
          "old_line_content": "  printer->Print(",
          "new_line_content": "      \"$name$ = {\\n\",",
          "content_same": false
        },
        {
          "line": 3057,
          "old_api": "name",
          "new_api": null,
          "old_text": "value->name()",
          "new_text": null,
          "old_line_content": "        \"name\", ToEnumCase(value->name()),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3059,
          "old_api": "value_count",
          "new_api": null,
          "old_text": "enumdesc->value_count()",
          "new_text": null,
          "old_line_content": "        \"comma\", (i == enumdesc->value_count() - 1) ? \"\" : \",\");",
          "new_line_content": "      \"};\\n\"",
          "content_same": false
        },
        {
          "line": 3062,
          "old_api": "Print",
          "new_api": null,
          "old_text": "printer->Print(\n      \"};\\n\"\n      \"\\n\")",
          "new_text": null,
          "old_line_content": "  printer->Print(",
          "new_line_content": "",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 82,
      "total_additions": 121,
      "total_deletions": 123,
      "total_api_changes": 326
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 7,
        "api_related_lines": 326,
        "non_api_lines": 1,
        "non_api_line_numbers": [
          2854
        ]
      }
    },
    "api_calls_before": 1141,
    "api_calls_after": 1139,
    "diff_info": {
      "added_lines": 3,
      "removed_lines": 7,
      "total_diff_lines": 22
    }
  }
}
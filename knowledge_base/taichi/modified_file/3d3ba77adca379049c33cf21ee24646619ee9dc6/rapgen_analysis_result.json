{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/taichi/modified_file/3d3ba77adca379049c33cf21ee24646619ee9dc6",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/taichi/modified_file/3d3ba77adca379049c33cf21ee24646619ee9dc6/before.cpp",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/taichi/modified_file/3d3ba77adca379049c33cf21ee24646619ee9dc6/after.cpp",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/taichi/modified_file/3d3ba77adca379049c33cf21ee24646619ee9dc6/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 458,
          "old_api": "replace_with",
          "new_api": "bstmt->is<GetRootStmt>()",
          "old_text": "stmt->replace_with(stmt->operand)",
          "new_text": "bstmt->is<GetRootStmt>()",
          "old_line_content": "        stmt->replace_with(stmt->operand);",
          "new_line_content": "      if (bstmt->is<GetRootStmt>()) {",
          "content_same": false
        },
        {
          "line": 459,
          "old_api": "erase",
          "new_api": "get",
          "old_text": "stmt->parent->erase(current_stmt_id)",
          "new_text": "bstmt.get()",
          "old_line_content": "        stmt->parent->erase(current_stmt_id);",
          "new_line_content": "        stmt->replace_with(bstmt.get());",
          "content_same": false
        },
        {
          "line": 460,
          "old_api": "set_done",
          "new_api": "erase",
          "old_text": "set_done(stmt)",
          "new_text": "stmt->parent->erase(current_stmt_id)",
          "old_line_content": "        set_done(stmt);",
          "new_line_content": "        stmt->parent->erase(current_stmt_id);",
          "content_same": false
        },
        {
          "line": 468,
          "old_api": "typeid",
          "new_api": "is_done",
          "old_text": "typeid(*stmt)",
          "new_text": "is_done(stmt)",
          "old_line_content": "        if (typeid(bstmt_data) == typeid(*stmt)) {",
          "new_line_content": "    if (is_done(stmt))",
          "content_same": false
        },
        {
          "line": 472,
          "old_api": "get",
          "new_api": "replace_with",
          "old_text": "bstmt.get()",
          "new_text": "stmt->replace_with(stmt->operand)",
          "old_line_content": "            stmt->replace_with(bstmt.get());",
          "new_line_content": "        stmt->replace_with(stmt->operand);",
          "content_same": false
        },
        {
          "line": 474,
          "old_api": "IRModified",
          "new_api": "set_done",
          "old_text": "IRModified()",
          "new_text": "set_done(stmt)",
          "old_line_content": "            throw IRModified();",
          "new_line_content": "        set_done(stmt);",
          "content_same": false
        },
        {
          "line": 483,
          "old_api": "is_done",
          "new_api": "bstmt->as<UnaryOpStmt>()",
          "old_text": "is_done(stmt)",
          "new_text": "bstmt->as<UnaryOpStmt>()",
          "old_line_content": "    if (is_done(stmt))",
          "new_line_content": "          auto bstmt_ = bstmt->as<UnaryOpStmt>();",
          "content_same": false
        },
        {
          "line": 488,
          "old_api": "stmt->rhs->is<ConstStmt>()",
          "new_api": "IRModified",
          "old_text": "stmt->rhs->is<ConstStmt>()",
          "new_text": "IRModified()",
          "old_line_content": "      if (stmt->rhs->is<ConstStmt>()) {",
          "new_line_content": "            throw IRModified();",
          "content_same": false
        },
        {
          "line": 497,
          "old_api": "replace_with",
          "new_api": "is_done",
          "old_text": "stmt->replace_with(stmt->lhs)",
          "new_text": "is_done(stmt)",
          "old_line_content": "          stmt->replace_with(stmt->lhs);",
          "new_line_content": "    if (is_done(stmt))",
          "content_same": false
        },
        {
          "line": 511,
          "old_api": "get",
          "new_api": "replace_with",
          "old_text": "bstmt.get()",
          "new_text": "stmt->replace_with(stmt->lhs)",
          "old_line_content": "            stmt->replace_with(bstmt.get());",
          "new_line_content": "          stmt->replace_with(stmt->lhs);",
          "content_same": false
        },
        {
          "line": 522,
          "old_api": "is_done",
          "new_api": "bstmt->as<BinaryOpStmt>()",
          "old_text": "is_done(stmt)",
          "new_text": "bstmt->as<BinaryOpStmt>()",
          "old_line_content": "    if (is_done(stmt))",
          "new_line_content": "          auto bstmt_ = bstmt->as<BinaryOpStmt>();",
          "content_same": false
        },
        {
          "line": 532,
          "old_api": "get",
          "new_api": "set_done",
          "old_text": "bstmt.get()",
          "new_text": "set_done(stmt)",
          "old_line_content": "            stmt->replace_with(bstmt.get());",
          "new_line_content": "    set_done(stmt);",
          "content_same": false
        },
        {
          "line": 543,
          "old_api": "is_done",
          "new_api": "bstmt->as<TernaryOpStmt>()",
          "old_text": "is_done(stmt)",
          "new_text": "bstmt->as<TernaryOpStmt>()",
          "old_line_content": "    if (is_done(stmt))",
          "new_line_content": "          auto bstmt_ = bstmt->as<TernaryOpStmt>();",
          "content_same": false
        },
        {
          "line": 548,
          "old_api": "size",
          "new_api": "IRModified",
          "old_text": "loop_vars.size()",
          "new_text": "IRModified()",
          "old_line_content": "      for (int k = 0; k < (int)loop_vars.size(); k++) {",
          "new_line_content": "            throw IRModified();",
          "content_same": false
        },
        {
          "line": 553,
          "old_api": "size",
          "new_api": "set_done",
          "old_text": "current_struct_for->loop_vars.size()",
          "new_text": "set_done(stmt)",
          "old_line_content": "          if (k == (int)current_struct_for->loop_vars.size() - 1) {",
          "new_line_content": "    set_done(stmt);",
          "content_same": false
        },
        {
          "line": 568,
          "old_api": "insert_after_me",
          "new_api": "insert_before_me",
          "old_text": "stmt->insert_after_me(\n                  Stmt::make<IntegerOffsetStmt>(stmt, offset))",
          "new_text": "stmt->insert_before_me(\n                Stmt::make<LocalLoadStmt>(LocalAddress(loop_vars[k], 0)))",
          "old_line_content": "              auto offset_stmt = stmt->insert_after_me(",
          "new_line_content": "            auto load = stmt->insert_before_me(",
          "content_same": false
        },
        {
          "line": 569,
          "old_api": "Stmt::make<IntegerOffsetStmt>(stmt, offset)",
          "new_api": "LocalAddress",
          "old_text": "Stmt::make<IntegerOffsetStmt>(stmt, offset)",
          "new_text": "LocalAddress(loop_vars[k], 0)",
          "old_line_content": "                  Stmt::make<IntegerOffsetStmt>(stmt, offset));",
          "new_line_content": "                Stmt::make<LocalLoadStmt>(LocalAddress(loop_vars[k], 0)));",
          "content_same": false
        },
        {
          "line": 582,
          "old_api": "insert_before_me",
          "new_api": "insert_after_me",
          "old_text": "stmt->insert_before_me(\n                Stmt::make<ConstStmt>(TypedConstant(diff.low)))",
          "new_text": "stmt->insert_after_me(\n                  Stmt::make<IntegerOffsetStmt>(stmt, offset))",
          "old_line_content": "            auto constant = stmt->insert_before_me(",
          "new_line_content": "              auto offset_stmt = stmt->insert_after_me(",
          "content_same": false
        },
        {
          "line": 583,
          "old_api": "TypedConstant",
          "new_api": "Stmt::make<IntegerOffsetStmt>(stmt, offset)",
          "old_text": "TypedConstant(diff.low)",
          "new_text": "Stmt::make<IntegerOffsetStmt>(stmt, offset)",
          "old_line_content": "                Stmt::make<ConstStmt>(TypedConstant(diff.low)));",
          "new_line_content": "                  Stmt::make<IntegerOffsetStmt>(stmt, offset));",
          "content_same": false
        },
        {
          "line": 584,
          "old_api": "insert_before_me",
          "new_api": "replace_with",
          "old_text": "stmt->insert_before_me(\n                Stmt::make<BinaryOpStmt>(BinaryOpType::add, load, constant))",
          "new_text": "stmt->replace_with(offset_stmt)",
          "old_line_content": "            auto add = stmt->insert_before_me(",
          "new_line_content": "              stmt->replace_with(offset_stmt);",
          "content_same": false
        },
        {
          "line": 622,
          "old_api": "size",
          "new_api": "IRModified",
          "old_text": "a.size()",
          "new_text": "IRModified()",
          "old_line_content": "      for (int i = 0; i < (int)a.size(); i++) {",
          "new_line_content": "            throw IRModified();",
          "content_same": false
        },
        {
          "line": 651,
          "old_api": "bstmt->as<LinearizeStmt>()",
          "new_api": "insert_after_me",
          "old_text": "bstmt->as<LinearizeStmt>()",
          "new_text": "stmt->insert_after_me(\n          Stmt::make<IntegerOffsetStmt>(stmt, previous_offset->offset))",
          "old_line_content": "          auto bstmt_ = bstmt->as<LinearizeStmt>();",
          "new_line_content": "      auto offset_stmt = stmt->insert_after_me(",
          "content_same": false
        },
        {
          "line": 652,
          "old_api": "identical_vectors",
          "new_api": "Stmt::make<IntegerOffsetStmt>(stmt, previous_offset->offset)",
          "old_text": "identical_vectors(bstmt_->inputs, stmt->inputs)",
          "new_text": "Stmt::make<IntegerOffsetStmt>(stmt, previous_offset->offset)",
          "old_line_content": "          if (identical_vectors(bstmt_->inputs, stmt->inputs) &&",
          "new_line_content": "          Stmt::make<IntegerOffsetStmt>(stmt, previous_offset->offset));",
          "content_same": false
        },
        {
          "line": 654,
          "old_api": "get",
          "new_api": "back",
          "old_text": "bstmt.get()",
          "new_text": "stmt->inputs.back()",
          "old_line_content": "            stmt->replace_with(bstmt.get());",
          "new_line_content": "      stmt->inputs.back() = previous_offset->input;",
          "content_same": false
        },
        {
          "line": 655,
          "old_api": "erase",
          "new_api": "replace_with",
          "old_text": "stmt->parent->erase(current_stmt_id)",
          "new_text": "stmt->replace_with(offset_stmt)",
          "old_line_content": "            stmt->parent->erase(current_stmt_id);",
          "new_line_content": "      stmt->replace_with(offset_stmt);",
          "content_same": false
        },
        {
          "line": 656,
          "old_api": "IRModified",
          "new_api": "offset_stmt->as<IntegerOffsetStmt>()",
          "old_text": "IRModified()",
          "new_text": "offset_stmt->as<IntegerOffsetStmt>()",
          "old_line_content": "            throw IRModified();",
          "new_line_content": "      offset_stmt->as<IntegerOffsetStmt>()->input = stmt;",
          "content_same": false
        },
        {
          "line": 665,
          "old_api": "is_done",
          "new_api": "bstmt->as<LinearizeStmt>()",
          "old_text": "is_done(stmt)",
          "new_text": "bstmt->as<LinearizeStmt>()",
          "old_line_content": "    if (is_done(stmt))",
          "new_line_content": "          auto bstmt_ = bstmt->as<LinearizeStmt>();",
          "content_same": false
        },
        {
          "line": 668,
          "old_api": "stmt->input_index->is<IntegerOffsetStmt>()",
          "new_api": "get",
          "old_text": "stmt->input_index->is<IntegerOffsetStmt>()",
          "new_text": "bstmt.get()",
          "old_line_content": "    if (stmt->input_index->is<IntegerOffsetStmt>()) {",
          "new_line_content": "            stmt->replace_with(bstmt.get());",
          "content_same": false
        },
        {
          "line": 669,
          "old_api": "stmt->input_index->as<IntegerOffsetStmt>()",
          "new_api": "erase",
          "old_text": "stmt->input_index->as<IntegerOffsetStmt>()",
          "new_text": "stmt->parent->erase(current_stmt_id)",
          "old_line_content": "      auto previous_offset = stmt->input_index->as<IntegerOffsetStmt>();",
          "new_line_content": "            stmt->parent->erase(current_stmt_id);",
          "content_same": false
        },
        {
          "line": 675,
          "old_api": "TC_ASSERT",
          "new_api": "set_done",
          "old_text": "TC_ASSERT(snode->ch[i]->type == SNodeType::place)",
          "new_text": "set_done(stmt)",
          "old_line_content": "        TC_ASSERT(snode->ch[i]->type == SNodeType::place);",
          "new_line_content": "    set_done(stmt);",
          "content_same": false
        },
        {
          "line": 694,
          "old_api": "bstmt->as<SNodeLookupStmt>()",
          "new_api": "size",
          "old_text": "bstmt->as<SNodeLookupStmt>()",
          "new_text": "Stmt::make<IntegerOffsetStmt>(\n          stmt, previous_offset->offset * sizeof(int32) * (snode->ch.size()))",
          "old_line_content": "          auto bstmt_ = bstmt->as<SNodeLookupStmt>();",
          "new_line_content": "      auto offset_stmt = stmt->insert_after_me(Stmt::make<IntegerOffsetStmt>(",
          "content_same": false
        },
        {
          "line": 717,
          "old_api": "stmt->input_ptr->is<IntegerOffsetStmt>()",
          "new_api": "get",
          "old_text": "stmt->input_ptr->is<IntegerOffsetStmt>()",
          "new_text": "bstmt.get()",
          "old_line_content": "    if (stmt->input_ptr->is<IntegerOffsetStmt>()) {",
          "new_line_content": "            stmt->replace_with(bstmt.get());",
          "content_same": false
        },
        {
          "line": 718,
          "old_api": "stmt->input_ptr->as<IntegerOffsetStmt>()",
          "new_api": "erase",
          "old_text": "stmt->input_ptr->as<IntegerOffsetStmt>()",
          "new_text": "stmt->parent->erase(current_stmt_id)",
          "old_line_content": "      auto previous_offset = stmt->input_ptr->as<IntegerOffsetStmt>();",
          "new_line_content": "            stmt->parent->erase(current_stmt_id);",
          "content_same": false
        },
        {
          "line": 728,
          "old_api": "get",
          "new_api": "is_done",
          "old_text": "stmt->input_snode->ch[stmt->chid].get()",
          "new_text": "is_done(stmt)",
          "old_line_content": "      stmt->output_snode = stmt->input_snode->ch[stmt->chid].get();",
          "new_line_content": "    if (is_done(stmt))",
          "content_same": false
        },
        {
          "line": 743,
          "old_api": "erase",
          "new_api": "offset_stmt->as<IntegerOffsetStmt>()",
          "old_text": "stmt->parent->erase(current_stmt_id)",
          "new_text": "offset_stmt->as<IntegerOffsetStmt>()",
          "old_line_content": "            stmt->parent->erase(current_stmt_id);",
          "new_line_content": "      offset_stmt->as<IntegerOffsetStmt>()->input = stmt;",
          "content_same": false
        },
        {
          "line": 783,
          "old_api": "has_global_side_effect",
          "new_api": "stmt->is<AtomicOpStmt>()",
          "old_text": "clause[i]->has_global_side_effect()",
          "new_text": "stmt->is<AtomicOpStmt>()",
          "old_line_content": "                                clause[i]->has_global_side_effect();",
          "new_line_content": "    return stmt->is<GlobalStoreStmt>() || stmt->is<AtomicOpStmt>();",
          "content_same": false
        },
        {
          "line": 797,
          "old_api": "get",
          "new_api": "has_global_side_effect",
          "old_text": "clause[i].get()",
          "new_text": "clause[i]->has_global_side_effect()",
          "old_line_content": "        if (is_global_write(clause[i].get()) || has_side_effects) {",
          "new_line_content": "                                clause[i]->has_global_side_effect();",
          "content_same": false
        },
        {
          "line": 805,
          "old_api": "clause[i]->is<LocalStoreStmt>()",
          "new_api": "get",
          "old_text": "clause[i]->is<LocalStoreStmt>()",
          "new_text": "clause[i].get()",
          "old_line_content": "          } else if (clause[i]->is<LocalStoreStmt>()) {",
          "new_line_content": "        if (is_global_write(clause[i].get()) ||",
          "content_same": false
        },
        {
          "line": 806,
          "old_api": "clause[i]->as<LocalStoreStmt>()",
          "new_api": "clause[i]->is<LocalStoreStmt>()",
          "old_text": "clause[i]->as<LocalStoreStmt>()",
          "new_text": "clause[i]->is<LocalStoreStmt>()",
          "old_line_content": "            auto store = clause[i]->as<LocalStoreStmt>();",
          "new_line_content": "            clause[i]->is<LocalStoreStmt>() || !has_side_effects) {",
          "content_same": false
        },
        {
          "line": 820,
          "old_api": "std::move(clause[i])",
          "new_api": "clause[i]->as<LocalStoreStmt>()",
          "old_text": "std::move(clause[i])",
          "new_text": "clause[i]->as<LocalStoreStmt>()",
          "old_line_content": "            if_stmt->insert_before_me(std::move(clause[i]));",
          "new_line_content": "            auto store = clause[i]->as<LocalStoreStmt>();",
          "content_same": false
        },
        {
          "line": 822,
          "old_api": "std::move(clause[i])",
          "new_api": "width",
          "old_text": "std::move(clause[i])",
          "new_text": "store->width()",
          "old_line_content": "            if_stmt->insert_before_me(std::move(clause[i]));",
          "new_line_content": "            for (int l = 0; l < store->width(); l++) {",
          "content_same": false
        },
        {
          "line": 829,
          "old_api": "std::move(stmt)",
          "new_api": "Stmt::make<TernaryOpStmt>(TernaryOpType::select, if_stmt->cond,\n                                          true_branch ? store->data : load,\n                                          true_branch ? load : store->data)",
          "old_text": "std::move(stmt)",
          "new_text": "Stmt::make<TernaryOpStmt>(TernaryOpType::select, if_stmt->cond,\n                                          true_branch ? store->data : load,\n                                          true_branch ? load : store->data)",
          "old_line_content": "            clean_clause.push_back(std::move(stmt));",
          "new_line_content": "                Stmt::make<TernaryOpStmt>(TernaryOpType::select, if_stmt->cond,",
          "content_same": false
        },
        {
          "line": 834,
          "old_api": "std::move(clean_clause)",
          "new_api": "std::move(clause[i])",
          "old_text": "std::move(clean_clause)",
          "new_text": "std::move(clause[i])",
          "old_line_content": "        clause = std::move(clean_clause);",
          "new_line_content": "            if_stmt->insert_before_me(std::move(clause[i]));",
          "content_same": false
        },
        {
          "line": 859,
          "old_api": "IRModified",
          "new_api": "flatten",
          "old_text": "IRModified()",
          "new_text": "flatten(if_stmt->false_statements->statements, false)",
          "old_line_content": "        throw IRModified();",
          "new_line_content": "        flatten(if_stmt->false_statements->statements, false)) {",
          "content_same": false
        },
        {
          "line": 864,
          "old_api": "erase",
          "new_api": "empty",
          "old_text": "if_stmt->parent->erase(if_stmt)",
          "new_text": "if_stmt->true_statements->statements.empty()",
          "old_line_content": "      if_stmt->parent->erase(if_stmt);",
          "new_line_content": "      if (if_stmt->true_statements->statements.empty()) {",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 521,
          "old_api": null,
          "new_api": "typeid",
          "old_text": null,
          "new_text": "typeid(*stmt)",
          "old_line_content": "  void visit(TernaryOpStmt *stmt) override {",
          "new_line_content": "        if (typeid(bstmt_data) == typeid(*stmt)) {",
          "content_same": false
        },
        {
          "line": 525,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "bstmt.get()",
          "old_line_content": "      auto &bstmt = block->statements[i];",
          "new_line_content": "            stmt->replace_with(bstmt.get());",
          "content_same": false
        },
        {
          "line": 526,
          "old_api": null,
          "new_api": "erase",
          "old_text": null,
          "new_text": "stmt->parent->erase(current_stmt_id)",
          "old_line_content": "      if (stmt->ret_type == bstmt->ret_type) {",
          "new_line_content": "            stmt->parent->erase(current_stmt_id);",
          "content_same": false
        },
        {
          "line": 527,
          "old_api": null,
          "new_api": "IRModified",
          "old_text": null,
          "new_text": "IRModified()",
          "old_line_content": "        auto &bstmt_data = *bstmt;",
          "new_line_content": "            throw IRModified();",
          "content_same": false
        },
        {
          "line": 536,
          "old_api": null,
          "new_api": "is_done",
          "old_text": null,
          "new_text": "is_done(stmt)",
          "old_line_content": "        }",
          "new_line_content": "    if (is_done(stmt))",
          "content_same": false
        },
        {
          "line": 542,
          "old_api": null,
          "new_api": "typeid",
          "old_text": null,
          "new_text": "typeid(*stmt)",
          "old_line_content": "  void visit(OffsetAndExtractBitsStmt *stmt) override {",
          "new_line_content": "        if (typeid(bstmt_data) == typeid(*stmt)) {",
          "content_same": false
        },
        {
          "line": 546,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "bstmt.get()",
          "old_line_content": "    if (current_struct_for && !stmt->simplified) {",
          "new_line_content": "            stmt->replace_with(bstmt.get());",
          "content_same": false
        },
        {
          "line": 547,
          "old_api": null,
          "new_api": "erase",
          "old_text": null,
          "new_text": "stmt->parent->erase(current_stmt_id)",
          "old_line_content": "      auto &loop_vars = current_struct_for->loop_vars;",
          "new_line_content": "            stmt->parent->erase(current_stmt_id);",
          "content_same": false
        },
        {
          "line": 557,
          "old_api": null,
          "new_api": "is_done",
          "old_text": null,
          "new_text": "is_done(stmt)",
          "old_line_content": "            stmt->input = load;",
          "new_line_content": "    if (is_done(stmt))",
          "content_same": false
        },
        {
          "line": 562,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "loop_vars.size()",
          "old_line_content": "            if (current_struct_for->vectorize == 1)",
          "new_line_content": "      for (int k = 0; k < (int)loop_vars.size(); k++) {",
          "content_same": false
        },
        {
          "line": 563,
          "old_api": null,
          "new_api": "analysis::value_diff(stmt->input, 0,\n                                         current_struct_for->loop_vars[k])",
          "old_text": null,
          "new_text": "analysis::value_diff(stmt->input, 0,\n                                         current_struct_for->loop_vars[k])",
          "old_line_content": "              offset = diff.low;",
          "new_line_content": "        auto diff = analysis::value_diff(stmt->input, 0,",
          "content_same": false
        },
        {
          "line": 565,
          "old_api": null,
          "new_api": "certain",
          "old_text": null,
          "new_text": "diff.certain()",
          "old_line_content": "                current_struct_for->vectorize == bound) {",
          "new_line_content": "        if (diff.linear_related() && diff.certain()) {",
          "content_same": false
        },
        {
          "line": 567,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "current_struct_for->loop_vars.size()",
          "old_line_content": "              // dimension of the block",
          "new_line_content": "          if (k == (int)current_struct_for->loop_vars.size() - 1) {",
          "content_same": false
        },
        {
          "line": 586,
          "old_api": null,
          "new_api": "offset_stmt->as<IntegerOffsetStmt>()",
          "old_text": null,
          "new_text": "offset_stmt->as<IntegerOffsetStmt>()",
          "old_line_content": "            add->ret_type.data_type = DataType::i32;",
          "new_line_content": "              offset_stmt->as<IntegerOffsetStmt>()->input = stmt;",
          "content_same": false
        },
        {
          "line": 593,
          "old_api": null,
          "new_api": "insert_before_me",
          "old_text": null,
          "new_text": "stmt->insert_before_me(\n                Stmt::make<LocalLoadStmt>(LocalAddress(loop_vars[k], 0)))",
          "old_line_content": "    }",
          "new_line_content": "            auto load = stmt->insert_before_me(",
          "content_same": false
        },
        {
          "line": 594,
          "old_api": null,
          "new_api": "LocalAddress",
          "old_text": null,
          "new_text": "LocalAddress(loop_vars[k], 0)",
          "old_line_content": "",
          "new_line_content": "                Stmt::make<LocalLoadStmt>(LocalAddress(loop_vars[k], 0)));",
          "content_same": false
        },
        {
          "line": 596,
          "old_api": null,
          "new_api": "insert_before_me",
          "old_text": null,
          "new_text": "stmt->insert_before_me(\n                Stmt::make<ConstStmt>(TypedConstant(diff.low)))",
          "old_line_content": "    for (int i = 0; i < current_stmt_id; i++) {",
          "new_line_content": "            auto constant = stmt->insert_before_me(",
          "content_same": false
        },
        {
          "line": 597,
          "old_api": null,
          "new_api": "TypedConstant",
          "old_text": null,
          "new_text": "TypedConstant(diff.low)",
          "old_line_content": "      auto &bstmt = block->statements[i];",
          "new_line_content": "                Stmt::make<ConstStmt>(TypedConstant(diff.low)));",
          "content_same": false
        },
        {
          "line": 598,
          "old_api": null,
          "new_api": "insert_before_me",
          "old_text": null,
          "new_text": "stmt->insert_before_me(\n                Stmt::make<BinaryOpStmt>(BinaryOpType::add, load, constant))",
          "old_line_content": "      if (stmt->ret_type == bstmt->ret_type) {",
          "new_line_content": "            auto add = stmt->insert_before_me(",
          "content_same": false
        },
        {
          "line": 599,
          "old_api": null,
          "new_api": "Stmt::make<BinaryOpStmt>(BinaryOpType::add, load, constant)",
          "old_text": null,
          "new_text": "Stmt::make<BinaryOpStmt>(BinaryOpType::add, load, constant)",
          "old_line_content": "        auto &bstmt_data = *bstmt;",
          "new_line_content": "                Stmt::make<BinaryOpStmt>(BinaryOpType::add, load, constant));",
          "content_same": false
        },
        {
          "line": 604,
          "old_api": null,
          "new_api": "IRModified",
          "old_text": null,
          "new_text": "IRModified()",
          "old_line_content": "              bstmt_->bit_end == stmt->bit_end &&",
          "new_line_content": "          throw IRModified();",
          "content_same": false
        },
        {
          "line": 614,
          "old_api": null,
          "new_api": "typeid",
          "old_text": null,
          "new_text": "typeid(*stmt)",
          "old_line_content": "  }",
          "new_line_content": "        if (typeid(bstmt_data) == typeid(*stmt)) {",
          "content_same": false
        },
        {
          "line": 615,
          "old_api": null,
          "new_api": "bstmt->as<OffsetAndExtractBitsStmt>()",
          "old_text": null,
          "new_text": "bstmt->as<OffsetAndExtractBitsStmt>()",
          "old_line_content": "",
          "new_line_content": "          auto bstmt_ = bstmt->as<OffsetAndExtractBitsStmt>();",
          "content_same": false
        },
        {
          "line": 620,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "bstmt.get()",
          "old_line_content": "      return false;",
          "new_line_content": "            stmt->replace_with(bstmt.get());",
          "content_same": false
        },
        {
          "line": 621,
          "old_api": null,
          "new_api": "erase",
          "old_text": null,
          "new_text": "stmt->parent->erase(current_stmt_id)",
          "old_line_content": "    } else {",
          "new_line_content": "            stmt->parent->erase(current_stmt_id);",
          "content_same": false
        },
        {
          "line": 627,
          "old_api": null,
          "new_api": "set_done",
          "old_text": null,
          "new_text": "set_done(stmt)",
          "old_line_content": "    return true;",
          "new_line_content": "    set_done(stmt);",
          "content_same": false
        },
        {
          "line": 633,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "b.size()",
          "old_line_content": "",
          "new_line_content": "    if (a.size() != b.size()) {",
          "content_same": false
        },
        {
          "line": 636,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "a.size()",
          "old_line_content": "      // push forward offset",
          "new_line_content": "      for (int i = 0; i < (int)a.size(); i++) {",
          "content_same": false
        },
        {
          "line": 645,
          "old_api": null,
          "new_api": "is_done",
          "old_text": null,
          "new_text": "is_done(stmt)",
          "old_line_content": "",
          "new_line_content": "    if (is_done(stmt))",
          "content_same": false
        },
        {
          "line": 648,
          "old_api": null,
          "new_api": "back",
          "old_text": null,
          "new_text": "stmt->inputs.back()->is<IntegerOffsetStmt>()",
          "old_line_content": "      if (stmt->ret_type == bstmt->ret_type) {",
          "new_line_content": "    if (stmt->inputs.size() && stmt->inputs.back()->is<IntegerOffsetStmt>()) {",
          "content_same": false
        },
        {
          "line": 649,
          "old_api": null,
          "new_api": "back",
          "old_text": null,
          "new_text": "stmt->inputs.back()->as<IntegerOffsetStmt>()",
          "old_line_content": "        auto &bstmt_data = *bstmt;",
          "new_line_content": "      auto previous_offset = stmt->inputs.back()->as<IntegerOffsetStmt>();",
          "content_same": false
        },
        {
          "line": 657,
          "old_api": null,
          "new_api": "IRModified",
          "old_text": null,
          "new_text": "IRModified()",
          "old_line_content": "          }",
          "new_line_content": "      throw IRModified();",
          "content_same": false
        },
        {
          "line": 664,
          "old_api": null,
          "new_api": "typeid",
          "old_text": null,
          "new_text": "typeid(*stmt)",
          "old_line_content": "  void visit(SNodeLookupStmt *stmt) override {",
          "new_line_content": "        if (typeid(bstmt_data) == typeid(*stmt)) {",
          "content_same": false
        },
        {
          "line": 666,
          "old_api": null,
          "new_api": "identical_vectors",
          "old_text": null,
          "new_text": "identical_vectors(bstmt_->inputs, stmt->inputs)",
          "old_line_content": "      return;",
          "new_line_content": "          if (identical_vectors(bstmt_->inputs, stmt->inputs) &&",
          "content_same": false
        },
        {
          "line": 667,
          "old_api": null,
          "new_api": "identical_vectors",
          "old_text": null,
          "new_text": "identical_vectors(bstmt_->strides, stmt->strides)",
          "old_line_content": "",
          "new_line_content": "              identical_vectors(bstmt_->strides, stmt->strides)) {",
          "content_same": false
        },
        {
          "line": 670,
          "old_api": null,
          "new_api": "IRModified",
          "old_text": null,
          "new_text": "IRModified()",
          "old_line_content": "      // push forward offset",
          "new_line_content": "            throw IRModified();",
          "content_same": false
        },
        {
          "line": 679,
          "old_api": null,
          "new_api": "is_done",
          "old_text": null,
          "new_text": "is_done(stmt)",
          "old_line_content": "",
          "new_line_content": "    if (is_done(stmt))",
          "content_same": false
        },
        {
          "line": 682,
          "old_api": null,
          "new_api": "stmt->input_index->is<IntegerOffsetStmt>()",
          "old_text": null,
          "new_text": "stmt->input_index->is<IntegerOffsetStmt>()",
          "old_line_content": "",
          "new_line_content": "    if (stmt->input_index->is<IntegerOffsetStmt>()) {",
          "content_same": false
        },
        {
          "line": 683,
          "old_api": null,
          "new_api": "stmt->input_index->as<IntegerOffsetStmt>()",
          "old_text": null,
          "new_text": "stmt->input_index->as<IntegerOffsetStmt>()",
          "old_line_content": "      stmt->input_index = previous_offset->input;",
          "new_line_content": "      auto previous_offset = stmt->input_index->as<IntegerOffsetStmt>();",
          "content_same": false
        },
        {
          "line": 688,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "snode->ch.size()",
          "old_line_content": "",
          "new_line_content": "      for (int i = 0; i < (int)snode->ch.size(); i++) {",
          "content_same": false
        },
        {
          "line": 689,
          "old_api": null,
          "new_api": "TC_ASSERT",
          "old_text": null,
          "new_text": "TC_ASSERT(snode->ch[i]->type == SNodeType::place)",
          "old_line_content": "    for (int i = 0; i < current_stmt_id; i++) {",
          "new_line_content": "        TC_ASSERT(snode->ch[i]->type == SNodeType::place);",
          "content_same": false
        },
        {
          "line": 690,
          "old_api": null,
          "new_api": "TC_ASSERT",
          "old_text": null,
          "new_text": "TC_ASSERT(snode->ch[i]->dt == DataType::i32 ||\n                  snode->ch[i]->dt == DataType::f32)",
          "old_line_content": "      auto &bstmt = block->statements[i];",
          "new_line_content": "        TC_ASSERT(snode->ch[i]->dt == DataType::i32 ||",
          "content_same": false
        },
        {
          "line": 695,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "snode->ch.size()",
          "old_line_content": "          if (bstmt_->snode == stmt->snode &&",
          "new_line_content": "          stmt, previous_offset->offset * sizeof(int32) * (snode->ch.size())));",
          "content_same": false
        },
        {
          "line": 698,
          "old_api": null,
          "new_api": "replace_with",
          "old_text": null,
          "new_text": "stmt->replace_with(offset_stmt)",
          "old_line_content": "              // identical_vectors(bstmt_->global_indices,",
          "new_line_content": "      stmt->replace_with(offset_stmt);",
          "content_same": false
        },
        {
          "line": 699,
          "old_api": null,
          "new_api": "offset_stmt->as<IntegerOffsetStmt>()",
          "old_text": null,
          "new_text": "offset_stmt->as<IntegerOffsetStmt>()",
          "old_line_content": "              // stmt->global_indices)",
          "new_line_content": "      offset_stmt->as<IntegerOffsetStmt>()->input = stmt;",
          "content_same": false
        },
        {
          "line": 700,
          "old_api": null,
          "new_api": "IRModified",
          "old_text": null,
          "new_text": "IRModified()",
          "old_line_content": "              // && no need for the above line. As long as input_index are the",
          "new_line_content": "      throw IRModified();",
          "content_same": false
        },
        {
          "line": 707,
          "old_api": null,
          "new_api": "typeid",
          "old_text": null,
          "new_text": "typeid(*stmt)",
          "old_line_content": "        }",
          "new_line_content": "        if (typeid(bstmt_data) == typeid(*stmt)) {",
          "content_same": false
        },
        {
          "line": 708,
          "old_api": null,
          "new_api": "bstmt->as<SNodeLookupStmt>()",
          "old_text": null,
          "new_text": "bstmt->as<SNodeLookupStmt>()",
          "old_line_content": "      }",
          "new_line_content": "          auto bstmt_ = bstmt->as<SNodeLookupStmt>();",
          "content_same": false
        },
        {
          "line": 719,
          "old_api": null,
          "new_api": "IRModified",
          "old_text": null,
          "new_text": "IRModified()",
          "old_line_content": "      // push forward offset",
          "new_line_content": "            throw IRModified();",
          "content_same": false
        },
        {
          "line": 724,
          "old_api": null,
          "new_api": "set_done",
          "old_text": null,
          "new_text": "set_done(stmt)",
          "old_line_content": "",
          "new_line_content": "    set_done(stmt);",
          "content_same": false
        },
        {
          "line": 731,
          "old_api": null,
          "new_api": "stmt->input_ptr->is<IntegerOffsetStmt>()",
          "old_text": null,
          "new_text": "stmt->input_ptr->is<IntegerOffsetStmt>()",
          "old_line_content": "    }",
          "new_line_content": "    if (stmt->input_ptr->is<IntegerOffsetStmt>()) {",
          "content_same": false
        },
        {
          "line": 732,
          "old_api": null,
          "new_api": "stmt->input_ptr->as<IntegerOffsetStmt>()",
          "old_text": null,
          "new_text": "stmt->input_ptr->as<IntegerOffsetStmt>()",
          "old_line_content": "",
          "new_line_content": "      auto previous_offset = stmt->input_ptr->as<IntegerOffsetStmt>();",
          "content_same": false
        },
        {
          "line": 736,
          "old_api": null,
          "new_api": "Stmt::make<IntegerOffsetStmt>(\n          stmt, stmt->chid * sizeof(int32) + previous_offset->offset)",
          "old_text": null,
          "new_text": "Stmt::make<IntegerOffsetStmt>(\n          stmt, stmt->chid * sizeof(int32) + previous_offset->offset)",
          "old_line_content": "        auto &bstmt_data = *bstmt;",
          "new_line_content": "      auto offset_stmt = stmt->insert_after_me(Stmt::make<IntegerOffsetStmt>(",
          "content_same": false
        },
        {
          "line": 740,
          "old_api": null,
          "new_api": "replace_with",
          "old_text": null,
          "new_text": "stmt->replace_with(offset_stmt)",
          "old_line_content": "              bstmt_->input_snode == stmt->input_snode &&",
          "new_line_content": "      stmt->replace_with(offset_stmt);",
          "content_same": false
        },
        {
          "line": 751,
          "old_api": null,
          "new_api": "typeid",
          "old_text": null,
          "new_text": "typeid(*stmt)",
          "old_line_content": "",
          "new_line_content": "        if (typeid(bstmt_data) == typeid(*stmt)) {",
          "content_same": false
        },
        {
          "line": 752,
          "old_api": null,
          "new_api": "bstmt->as<GetChStmt>()",
          "old_text": null,
          "new_text": "bstmt->as<GetChStmt>()",
          "old_line_content": "  void visit(AtomicOpStmt *stmt) override {",
          "new_line_content": "          auto bstmt_ = bstmt->as<GetChStmt>();",
          "content_same": false
        },
        {
          "line": 756,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "bstmt.get()",
          "old_line_content": "  void visit(PrintStmt *stmt) override {",
          "new_line_content": "            stmt->replace_with(bstmt.get());",
          "content_same": false
        },
        {
          "line": 757,
          "old_api": null,
          "new_api": "erase",
          "old_text": null,
          "new_text": "stmt->parent->erase(current_stmt_id)",
          "old_line_content": "    return;",
          "new_line_content": "            stmt->parent->erase(current_stmt_id);",
          "content_same": false
        },
        {
          "line": 758,
          "old_api": null,
          "new_api": "IRModified",
          "old_text": null,
          "new_text": "IRModified()",
          "old_line_content": "  }",
          "new_line_content": "            throw IRModified();",
          "content_same": false
        },
        {
          "line": 763,
          "old_api": null,
          "new_api": "set_done",
          "old_text": null,
          "new_text": "set_done(stmt)",
          "old_line_content": "",
          "new_line_content": "    set_done(stmt);",
          "content_same": false
        },
        {
          "line": 795,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "clause.size()",
          "old_line_content": "          plain_clause = false;",
          "new_line_content": "      for (int i = 0; i < (int)clause.size(); i++) {",
          "content_same": false
        },
        {
          "line": 796,
          "old_api": null,
          "new_api": "is_container_statement",
          "old_text": null,
          "new_text": "clause[i]->is_container_statement()",
          "old_line_content": "        }",
          "new_line_content": "        bool has_side_effects = clause[i]->is_container_statement() ||",
          "content_same": false
        },
        {
          "line": 799,
          "old_api": null,
          "new_api": "clause[i]->is<GlobalLoadStmt>()",
          "old_text": null,
          "new_text": "clause[i]->is<GlobalLoadStmt>()",
          "old_line_content": "        }",
          "new_line_content": "        if (global_state_changed && clause[i]->is<GlobalLoadStmt>()) {",
          "content_same": false
        },
        {
          "line": 811,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "clause[i].get()",
          "old_line_content": "            auto load =",
          "new_line_content": "        if (is_global_write(clause[i].get()) || has_side_effects) {",
          "content_same": false
        },
        {
          "line": 816,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "clause.size()",
          "old_line_content": "                                          true_branch ? store->data : load,",
          "new_line_content": "        for (int i = 0; i < (int)clause.size(); i++) {",
          "content_same": false
        },
        {
          "line": 817,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "clause[i].get()",
          "old_line_content": "                                          true_branch ? load : store->data));",
          "new_line_content": "          if (is_global_write(clause[i].get())) {",
          "content_same": false
        },
        {
          "line": 819,
          "old_api": null,
          "new_api": "clause[i]->is<LocalStoreStmt>()",
          "old_text": null,
          "new_text": "clause[i]->is<LocalStoreStmt>()",
          "old_line_content": "            store->data = select;",
          "new_line_content": "          } else if (clause[i]->is<LocalStoreStmt>()) {",
          "content_same": false
        },
        {
          "line": 821,
          "old_api": null,
          "new_api": "LaneAttribute<LocalAddress>()",
          "old_text": null,
          "new_text": "LaneAttribute<LocalAddress>()",
          "old_line_content": "          } else {",
          "new_line_content": "            auto lanes = LaneAttribute<LocalAddress>();",
          "content_same": false
        },
        {
          "line": 823,
          "old_api": null,
          "new_api": "LocalAddress",
          "old_text": null,
          "new_text": "LocalAddress(store->ptr, l)",
          "old_line_content": "          }",
          "new_line_content": "              lanes.push_back(LocalAddress(store->ptr, l));",
          "content_same": false
        },
        {
          "line": 826,
          "old_api": null,
          "new_api": "Stmt::make<LocalLoadStmt>(lanes)",
          "old_text": null,
          "new_text": "Stmt::make<LocalLoadStmt>(lanes)",
          "old_line_content": "        bool reduced = false;",
          "new_line_content": "                if_stmt->insert_before_me(Stmt::make<LocalLoadStmt>(lanes));",
          "content_same": false
        },
        {
          "line": 827,
          "old_api": null,
          "new_api": "infer_type",
          "old_text": null,
          "new_text": "load->infer_type()",
          "old_line_content": "        for (auto &&stmt : clause) {",
          "new_line_content": "            load->infer_type();",
          "content_same": false
        },
        {
          "line": 828,
          "old_api": null,
          "new_api": "insert_before_me",
          "old_text": null,
          "new_text": "if_stmt->insert_before_me(\n                Stmt::make<TernaryOpStmt>(TernaryOpType::select, if_stmt->cond,\n                                          true_branch ? store->data : load,\n                                          true_branch ? load : store->data))",
          "old_line_content": "          if (stmt != nullptr) {",
          "new_line_content": "            auto select = if_stmt->insert_before_me(",
          "content_same": false
        },
        {
          "line": 832,
          "old_api": null,
          "new_api": "infer_type",
          "old_text": null,
          "new_text": "select->infer_type()",
          "old_line_content": "          }",
          "new_line_content": "            select->infer_type();",
          "content_same": false
        },
        {
          "line": 836,
          "old_api": null,
          "new_api": "std::move(clause[i])",
          "old_text": null,
          "new_text": "std::move(clause[i])",
          "old_line_content": "      }",
          "new_line_content": "            if_stmt->insert_before_me(std::move(clause[i]));",
          "content_same": false
        },
        {
          "line": 839,
          "old_api": null,
          "new_api": "std::vector<pStmt>()",
          "old_text": null,
          "new_text": "std::vector<pStmt>()",
          "old_line_content": "",
          "new_line_content": "        auto clean_clause = std::vector<pStmt>();",
          "content_same": false
        },
        {
          "line": 843,
          "old_api": null,
          "new_api": "std::move(stmt)",
          "old_text": null,
          "new_text": "std::move(stmt)",
          "old_line_content": "    }",
          "new_line_content": "            clean_clause.push_back(std::move(stmt));",
          "content_same": false
        },
        {
          "line": 848,
          "old_api": null,
          "new_api": "std::move(clean_clause)",
          "old_text": null,
          "new_text": "std::move(clean_clause)",
          "old_line_content": "",
          "new_line_content": "        clause = std::move(clean_clause);",
          "content_same": false
        },
        {
          "line": 855,
          "old_api": null,
          "new_api": "flatten",
          "old_text": null,
          "new_text": "flatten(if_stmt->true_statements->statements, true)",
          "old_line_content": "",
          "new_line_content": "        flatten(if_stmt->true_statements->statements, true)) {",
          "content_same": false
        },
        {
          "line": 856,
          "old_api": null,
          "new_api": "IRModified",
          "old_text": null,
          "new_text": "IRModified()",
          "old_line_content": "    if (if_stmt->false_statements) {",
          "new_line_content": "      throw IRModified();",
          "content_same": false
        },
        {
          "line": 860,
          "old_api": null,
          "new_api": "IRModified",
          "old_text": null,
          "new_text": "IRModified()",
          "old_line_content": "      }",
          "new_line_content": "      throw IRModified();",
          "content_same": false
        },
        {
          "line": 866,
          "old_api": null,
          "new_api": "IRModified",
          "old_text": null,
          "new_text": "IRModified()",
          "old_line_content": "    }",
          "new_line_content": "        throw IRModified();",
          "content_same": false
        },
        {
          "line": 871,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "if_stmt->false_statements->statements.empty()",
          "old_line_content": "  }",
          "new_line_content": "      if (if_stmt->false_statements->statements.empty()) {",
          "content_same": false
        },
        {
          "line": 873,
          "old_api": null,
          "new_api": "IRModified",
          "old_text": null,
          "new_text": "IRModified()",
          "old_line_content": "  void visit(OffloadedStmt *stmt) override {",
          "new_line_content": "        throw IRModified();",
          "content_same": false
        },
        {
          "line": 878,
          "old_api": null,
          "new_api": "erase",
          "old_text": null,
          "new_text": "if_stmt->parent->erase(if_stmt)",
          "old_line_content": "    }",
          "new_line_content": "      if_stmt->parent->erase(if_stmt);",
          "content_same": false
        },
        {
          "line": 879,
          "old_api": null,
          "new_api": "IRModified",
          "old_text": null,
          "new_text": "IRModified()",
          "old_line_content": "  }",
          "new_line_content": "      throw IRModified();",
          "content_same": false
        },
        {
          "line": 889,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "stmt->body->statements.empty()",
          "old_line_content": "    allow_undefined_visitor = true;",
          "new_line_content": "        stmt->body->statements.empty()) {",
          "content_same": false
        },
        {
          "line": 890,
          "old_api": null,
          "new_api": "erase",
          "old_text": null,
          "new_text": "stmt->parent->erase(stmt)",
          "old_line_content": "    invoke_default_visitor = true;",
          "new_line_content": "      stmt->parent->erase(stmt);",
          "content_same": false
        },
        {
          "line": 891,
          "old_api": null,
          "new_api": "IRModified",
          "old_text": null,
          "new_text": "IRModified()",
          "old_line_content": "    current_struct_for = nullptr;",
          "new_line_content": "      throw IRModified();",
          "content_same": false
        },
        {
          "line": 906,
          "old_api": null,
          "new_api": "accept",
          "old_text": null,
          "new_text": "node->accept(this)",
          "old_line_content": "    for (auto &stmt : block->statements) {",
          "new_line_content": "    node->accept(this);",
          "content_same": false
        },
        {
          "line": 921,
          "old_api": null,
          "new_api": "accept",
          "old_text": null,
          "new_text": "stmt->accept(this)",
          "old_line_content": "",
          "new_line_content": "      stmt->accept(this);",
          "content_same": false
        },
        {
          "line": 927,
          "old_api": null,
          "new_api": "accept",
          "old_text": null,
          "new_text": "if_stmt->true_statements->accept(this)",
          "old_line_content": "  }",
          "new_line_content": "      if_stmt->true_statements->accept(this);",
          "content_same": false
        },
        {
          "line": 929,
          "old_api": null,
          "new_api": "accept",
          "old_text": null,
          "new_text": "if_stmt->false_statements->accept(this)",
          "old_line_content": "  void visit(WhileStmt *stmt) override {",
          "new_line_content": "      if_stmt->false_statements->accept(this);",
          "content_same": false
        },
        {
          "line": 933,
          "old_api": null,
          "new_api": "accept",
          "old_text": null,
          "new_text": "for_stmt->body->accept(this)",
          "old_line_content": "  void visit(OffloadedStmt *stmt) override {",
          "new_line_content": "    for_stmt->body->accept(this);",
          "content_same": false
        },
        {
          "line": 937,
          "old_api": null,
          "new_api": "TC_ASSERT",
          "old_text": null,
          "new_text": "TC_ASSERT(current_struct_for == nullptr)",
          "old_line_content": "};",
          "new_line_content": "    TC_ASSERT(current_struct_for == nullptr);",
          "content_same": false
        },
        {
          "line": 939,
          "old_api": null,
          "new_api": "accept",
          "old_text": null,
          "new_text": "for_stmt->body->accept(this)",
          "old_line_content": "namespace irpass {",
          "new_line_content": "    for_stmt->body->accept(this);",
          "content_same": false
        },
        {
          "line": 944,
          "old_api": null,
          "new_api": "accept",
          "old_text": null,
          "new_text": "stmt->body->accept(this)",
          "old_line_content": "    if (!pass.modified)",
          "new_line_content": "    stmt->body->accept(this);",
          "content_same": false
        },
        {
          "line": 949,
          "old_api": null,
          "new_api": "accept",
          "old_text": null,
          "new_text": "stmt->body->accept(this)",
          "old_line_content": "void full_simplify(IRNode *root) {",
          "new_line_content": "      stmt->body->accept(this);",
          "content_same": false
        },
        {
          "line": 964,
          "old_api": null,
          "new_api": "constant_fold",
          "old_text": null,
          "new_text": "constant_fold(root)",
          "old_line_content": "",
          "new_line_content": "  constant_fold(root);",
          "content_same": false
        },
        {
          "line": 965,
          "old_api": null,
          "new_api": "die",
          "old_text": null,
          "new_text": "die(root)",
          "old_line_content": "",
          "new_line_content": "  die(root);",
          "content_same": false
        },
        {
          "line": 966,
          "old_api": null,
          "new_api": "simplify",
          "old_text": null,
          "new_text": "simplify(root)",
          "old_line_content": "",
          "new_line_content": "  simplify(root);",
          "content_same": false
        },
        {
          "line": 461,
          "old_api": null,
          "new_api": "IRModified",
          "old_text": null,
          "new_text": "IRModified()",
          "old_line_content": "        return;",
          "new_line_content": "        throw IRModified();",
          "content_same": false
        },
        {
          "line": 464,
          "old_api": null,
          "new_api": "set_done",
          "old_text": null,
          "new_text": "set_done(stmt)",
          "old_line_content": "    for (int i = 0; i < current_stmt_id; i++) {",
          "new_line_content": "    set_done(stmt);",
          "content_same": false
        },
        {
          "line": 482,
          "old_api": null,
          "new_api": "typeid",
          "old_text": null,
          "new_text": "typeid(*stmt)",
          "old_line_content": "  void visit(BinaryOpStmt *stmt) override {",
          "new_line_content": "        if (typeid(bstmt_data) == typeid(*stmt)) {",
          "content_same": false
        },
        {
          "line": 484,
          "old_api": null,
          "new_api": "same_operation",
          "old_text": null,
          "new_text": "bstmt_->same_operation(stmt)",
          "old_line_content": "      return;",
          "new_line_content": "          if (bstmt_->same_operation(stmt) &&",
          "content_same": false
        },
        {
          "line": 486,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "bstmt.get()",
          "old_line_content": "         stmt->op_type == BinaryOpType::sub) &&",
          "new_line_content": "            stmt->replace_with(bstmt.get());",
          "content_same": false
        },
        {
          "line": 487,
          "old_api": null,
          "new_api": "erase",
          "old_text": null,
          "new_text": "stmt->parent->erase(current_stmt_id)",
          "old_line_content": "        stmt->ret_type.data_type == DataType::i32) {",
          "new_line_content": "            stmt->parent->erase(current_stmt_id);",
          "content_same": false
        },
        {
          "line": 493,
          "old_api": null,
          "new_api": "set_done",
          "old_text": null,
          "new_text": "set_done(stmt)",
          "old_line_content": "            all_zero = false;",
          "new_line_content": "    set_done(stmt);",
          "content_same": false
        },
        {
          "line": 502,
          "old_api": null,
          "new_api": "stmt->rhs->is<ConstStmt>()",
          "old_text": null,
          "new_text": "stmt->rhs->is<ConstStmt>()",
          "old_line_content": "    }",
          "new_line_content": "      if (stmt->rhs->is<ConstStmt>()) {",
          "content_same": false
        },
        {
          "line": 503,
          "old_api": null,
          "new_api": "stmt->rhs->as<ConstStmt>()",
          "old_text": null,
          "new_text": "stmt->rhs->as<ConstStmt>()",
          "old_line_content": "    for (int i = 0; i < current_stmt_id; i++) {",
          "new_line_content": "        auto stmt_ = stmt->rhs->as<ConstStmt>();",
          "content_same": false
        },
        {
          "line": 505,
          "old_api": null,
          "new_api": "width",
          "old_text": null,
          "new_text": "stmt_->width()",
          "old_line_content": "      if (stmt->ret_type == bstmt->ret_type) {",
          "new_line_content": "        for (int l = 0; l < stmt_->width(); l++) {",
          "content_same": false
        },
        {
          "line": 506,
          "old_api": null,
          "new_api": "val_int32",
          "old_text": null,
          "new_text": "stmt_->val[l].val_int32()",
          "old_line_content": "        auto &bstmt_data = *bstmt;",
          "new_line_content": "          if (stmt_->val[l].val_int32() != 0) {",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 518,
          "old_api": "set_done",
          "new_api": null,
          "old_text": "set_done(stmt)",
          "new_text": null,
          "old_line_content": "    set_done(stmt);",
          "new_line_content": "      auto &bstmt = block->statements[i];",
          "content_same": false
        },
        {
          "line": 528,
          "old_api": "typeid",
          "new_api": null,
          "old_text": "typeid(*stmt)",
          "new_text": null,
          "old_line_content": "        if (typeid(bstmt_data) == typeid(*stmt)) {",
          "new_line_content": "          }",
          "content_same": false
        },
        {
          "line": 529,
          "old_api": "bstmt->as<TernaryOpStmt>()",
          "new_api": null,
          "old_text": "bstmt->as<TernaryOpStmt>()",
          "new_text": null,
          "old_line_content": "          auto bstmt_ = bstmt->as<TernaryOpStmt>();",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 533,
          "old_api": "erase",
          "new_api": null,
          "old_text": "stmt->parent->erase(current_stmt_id)",
          "new_text": null,
          "old_line_content": "            stmt->parent->erase(current_stmt_id);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 534,
          "old_api": "IRModified",
          "new_api": null,
          "old_text": "IRModified()",
          "new_text": null,
          "old_line_content": "            throw IRModified();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 539,
          "old_api": "set_done",
          "new_api": null,
          "old_text": "set_done(stmt)",
          "new_text": null,
          "old_line_content": "    set_done(stmt);",
          "new_line_content": "      auto &bstmt = block->statements[i];",
          "content_same": false
        },
        {
          "line": 549,
          "old_api": "analysis::value_diff(stmt->input, 0,\n                                         current_struct_for->loop_vars[k])",
          "new_api": null,
          "old_text": "analysis::value_diff(stmt->input, 0,\n                                         current_struct_for->loop_vars[k])",
          "new_text": null,
          "old_line_content": "        auto diff = analysis::value_diff(stmt->input, 0,",
          "new_line_content": "          }",
          "content_same": false
        },
        {
          "line": 551,
          "old_api": "certain",
          "new_api": null,
          "old_text": "diff.certain()",
          "new_text": null,
          "old_line_content": "        if (diff.linear_related() && diff.certain()) {",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 554,
          "old_api": "insert_before_me",
          "new_api": null,
          "old_text": "stmt->insert_before_me(\n                Stmt::make<LocalLoadStmt>(LocalAddress(loop_vars[k], 0)))",
          "new_text": null,
          "old_line_content": "            auto load = stmt->insert_before_me(",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 555,
          "old_api": "LocalAddress",
          "new_api": null,
          "old_text": "LocalAddress(loop_vars[k], 0)",
          "new_text": null,
          "old_line_content": "                Stmt::make<LocalLoadStmt>(LocalAddress(loop_vars[k], 0)));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 570,
          "old_api": "replace_with",
          "new_api": null,
          "old_text": "stmt->replace_with(offset_stmt)",
          "new_text": null,
          "old_line_content": "              stmt->replace_with(offset_stmt);",
          "new_line_content": "            load->ret_type.data_type = DataType::i32;",
          "content_same": false
        },
        {
          "line": 572,
          "old_api": "offset_stmt->as<IntegerOffsetStmt>()",
          "new_api": null,
          "old_text": "offset_stmt->as<IntegerOffsetStmt>()",
          "new_text": null,
          "old_line_content": "              offset_stmt->as<IntegerOffsetStmt>()->input = stmt;",
          "new_line_content": "            int64 bound = 1LL << stmt->bit_end;",
          "content_same": false
        },
        {
          "line": 579,
          "old_api": "insert_before_me",
          "new_api": null,
          "old_text": "stmt->insert_before_me(\n                Stmt::make<LocalLoadStmt>(LocalAddress(loop_vars[k], 0)))",
          "new_text": null,
          "old_line_content": "            auto load = stmt->insert_before_me(",
          "new_line_content": "                current_struct_for->vectorize == bound) {",
          "content_same": false
        },
        {
          "line": 580,
          "old_api": "LocalAddress",
          "new_api": null,
          "old_text": "LocalAddress(loop_vars[k], 0)",
          "new_text": null,
          "old_line_content": "                Stmt::make<LocalLoadStmt>(LocalAddress(loop_vars[k], 0)));",
          "new_line_content": "              // TODO: take care of cases where vectorization width != z",
          "content_same": false
        },
        {
          "line": 585,
          "old_api": "Stmt::make<BinaryOpStmt>(BinaryOpType::add, load, constant)",
          "new_api": null,
          "old_text": "Stmt::make<BinaryOpStmt>(BinaryOpType::add, load, constant)",
          "new_text": null,
          "old_line_content": "                Stmt::make<BinaryOpStmt>(BinaryOpType::add, load, constant));",
          "new_line_content": "              // fix the offset stmt operand",
          "content_same": false
        },
        {
          "line": 590,
          "old_api": "IRModified",
          "new_api": null,
          "old_text": "IRModified()",
          "new_text": null,
          "old_line_content": "          throw IRModified();",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 600,
          "old_api": "typeid",
          "new_api": null,
          "old_text": "typeid(*stmt)",
          "new_text": null,
          "old_line_content": "        if (typeid(bstmt_data) == typeid(*stmt)) {",
          "new_line_content": "            add->ret_type.data_type = DataType::i32;",
          "content_same": false
        },
        {
          "line": 601,
          "old_api": "bstmt->as<OffsetAndExtractBitsStmt>()",
          "new_api": null,
          "old_text": "bstmt->as<OffsetAndExtractBitsStmt>()",
          "new_text": null,
          "old_line_content": "          auto bstmt_ = bstmt->as<OffsetAndExtractBitsStmt>();",
          "new_line_content": "            stmt->input = add;",
          "content_same": false
        },
        {
          "line": 606,
          "old_api": "get",
          "new_api": null,
          "old_text": "bstmt.get()",
          "new_text": null,
          "old_line_content": "            stmt->replace_with(bstmt.get());",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 607,
          "old_api": "erase",
          "new_api": null,
          "old_text": "stmt->parent->erase(current_stmt_id)",
          "new_text": null,
          "old_line_content": "            stmt->parent->erase(current_stmt_id);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 608,
          "old_api": "IRModified",
          "new_api": null,
          "old_text": "IRModified()",
          "new_text": null,
          "old_line_content": "            throw IRModified();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 613,
          "old_api": "set_done",
          "new_api": null,
          "old_text": "set_done(stmt)",
          "new_text": null,
          "old_line_content": "    set_done(stmt);",
          "new_line_content": "        auto &bstmt_data = *bstmt;",
          "content_same": false
        },
        {
          "line": 619,
          "old_api": "size",
          "new_api": null,
          "old_text": "b.size()",
          "new_text": null,
          "old_line_content": "    if (a.size() != b.size()) {",
          "new_line_content": "              bstmt_->offset == stmt->offset) {",
          "content_same": false
        },
        {
          "line": 631,
          "old_api": "is_done",
          "new_api": null,
          "old_text": "is_done(stmt)",
          "new_text": null,
          "old_line_content": "    if (is_done(stmt))",
          "new_line_content": "  static bool identical_vectors(const std::vector<T> &a,",
          "content_same": false
        },
        {
          "line": 634,
          "old_api": "back",
          "new_api": null,
          "old_text": "stmt->inputs.back()->is<IntegerOffsetStmt>()",
          "new_text": null,
          "old_line_content": "    if (stmt->inputs.size() && stmt->inputs.back()->is<IntegerOffsetStmt>()) {",
          "new_line_content": "      return false;",
          "content_same": false
        },
        {
          "line": 635,
          "old_api": "back",
          "new_api": null,
          "old_text": "stmt->inputs.back()->as<IntegerOffsetStmt>()",
          "new_text": null,
          "old_line_content": "      auto previous_offset = stmt->inputs.back()->as<IntegerOffsetStmt>();",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 637,
          "old_api": "insert_after_me",
          "new_api": null,
          "old_text": "stmt->insert_after_me(\n          Stmt::make<IntegerOffsetStmt>(stmt, previous_offset->offset))",
          "new_text": null,
          "old_line_content": "      auto offset_stmt = stmt->insert_after_me(",
          "new_line_content": "        if (a[i] != b[i])",
          "content_same": false
        },
        {
          "line": 638,
          "old_api": "Stmt::make<IntegerOffsetStmt>(stmt, previous_offset->offset)",
          "new_api": null,
          "old_text": "Stmt::make<IntegerOffsetStmt>(stmt, previous_offset->offset)",
          "new_text": null,
          "old_line_content": "          Stmt::make<IntegerOffsetStmt>(stmt, previous_offset->offset));",
          "new_line_content": "          return false;",
          "content_same": false
        },
        {
          "line": 640,
          "old_api": "back",
          "new_api": null,
          "old_text": "stmt->inputs.back()",
          "new_text": null,
          "old_line_content": "      stmt->inputs.back() = previous_offset->input;",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 641,
          "old_api": "replace_with",
          "new_api": null,
          "old_text": "stmt->replace_with(offset_stmt)",
          "new_text": null,
          "old_line_content": "      stmt->replace_with(offset_stmt);",
          "new_line_content": "    return true;",
          "content_same": false
        },
        {
          "line": 642,
          "old_api": "offset_stmt->as<IntegerOffsetStmt>()",
          "new_api": null,
          "old_text": "offset_stmt->as<IntegerOffsetStmt>()",
          "new_text": null,
          "old_line_content": "      offset_stmt->as<IntegerOffsetStmt>()->input = stmt;",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 643,
          "old_api": "IRModified",
          "new_api": null,
          "old_text": "IRModified()",
          "new_text": null,
          "old_line_content": "      throw IRModified();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 650,
          "old_api": "typeid",
          "new_api": null,
          "old_text": "typeid(*stmt)",
          "new_text": null,
          "old_line_content": "        if (typeid(bstmt_data) == typeid(*stmt)) {",
          "new_line_content": "      // push forward offset",
          "content_same": false
        },
        {
          "line": 653,
          "old_api": "identical_vectors",
          "new_api": null,
          "old_text": "identical_vectors(bstmt_->strides, stmt->strides)",
          "new_text": null,
          "old_line_content": "              identical_vectors(bstmt_->strides, stmt->strides)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 661,
          "old_api": "set_done",
          "new_api": null,
          "old_text": "set_done(stmt)",
          "new_text": null,
          "old_line_content": "    set_done(stmt);",
          "new_line_content": "      auto &bstmt = block->statements[i];",
          "content_same": false
        },
        {
          "line": 674,
          "old_api": "size",
          "new_api": null,
          "old_text": "snode->ch.size()",
          "new_text": null,
          "old_line_content": "      for (int i = 0; i < (int)snode->ch.size(); i++) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 676,
          "old_api": "TC_ASSERT",
          "new_api": null,
          "old_text": "TC_ASSERT(snode->ch[i]->dt == DataType::i32 ||\n                  snode->ch[i]->dt == DataType::f32)",
          "new_text": null,
          "old_line_content": "        TC_ASSERT(snode->ch[i]->dt == DataType::i32 ||",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 680,
          "old_api": "size",
          "new_api": null,
          "old_text": "Stmt::make<IntegerOffsetStmt>(\n          stmt, previous_offset->offset * sizeof(int32) * (snode->ch.size()))",
          "new_text": null,
          "old_line_content": "      auto offset_stmt = stmt->insert_after_me(Stmt::make<IntegerOffsetStmt>(",
          "new_line_content": "      return;",
          "content_same": false
        },
        {
          "line": 681,
          "old_api": "size",
          "new_api": null,
          "old_text": "snode->ch.size()",
          "new_text": null,
          "old_line_content": "          stmt, previous_offset->offset * sizeof(int32) * (snode->ch.size())));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 684,
          "old_api": "replace_with",
          "new_api": null,
          "old_text": "stmt->replace_with(offset_stmt)",
          "new_text": null,
          "old_line_content": "      stmt->replace_with(offset_stmt);",
          "new_line_content": "      // push forward offset",
          "content_same": false
        },
        {
          "line": 685,
          "old_api": "offset_stmt->as<IntegerOffsetStmt>()",
          "new_api": null,
          "old_text": "offset_stmt->as<IntegerOffsetStmt>()",
          "new_text": null,
          "old_line_content": "      offset_stmt->as<IntegerOffsetStmt>()->input = stmt;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 686,
          "old_api": "IRModified",
          "new_api": null,
          "old_text": "IRModified()",
          "new_text": null,
          "old_line_content": "      throw IRModified();",
          "new_line_content": "      auto snode = stmt->snode;",
          "content_same": false
        },
        {
          "line": 693,
          "old_api": "typeid",
          "new_api": null,
          "old_text": "typeid(*stmt)",
          "new_text": null,
          "old_line_content": "        if (typeid(bstmt_data) == typeid(*stmt)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 703,
          "old_api": "get",
          "new_api": null,
          "old_text": "bstmt.get()",
          "new_text": null,
          "old_line_content": "            stmt->replace_with(bstmt.get());",
          "new_line_content": "    for (int i = 0; i < current_stmt_id; i++) {",
          "content_same": false
        },
        {
          "line": 704,
          "old_api": "erase",
          "new_api": null,
          "old_text": "stmt->parent->erase(current_stmt_id)",
          "new_text": null,
          "old_line_content": "            stmt->parent->erase(current_stmt_id);",
          "new_line_content": "      auto &bstmt = block->statements[i];",
          "content_same": false
        },
        {
          "line": 705,
          "old_api": "IRModified",
          "new_api": null,
          "old_text": "IRModified()",
          "new_text": null,
          "old_line_content": "            throw IRModified();",
          "new_line_content": "      if (stmt->ret_type == bstmt->ret_type) {",
          "content_same": false
        },
        {
          "line": 710,
          "old_api": "set_done",
          "new_api": null,
          "old_text": "set_done(stmt)",
          "new_text": null,
          "old_line_content": "    set_done(stmt);",
          "new_line_content": "              bstmt_->input_snode == stmt->input_snode &&",
          "content_same": false
        },
        {
          "line": 714,
          "old_api": "is_done",
          "new_api": null,
          "old_text": "is_done(stmt)",
          "new_text": null,
          "old_line_content": "    if (is_done(stmt))",
          "new_line_content": "              // && no need for the above line. As long as input_index are the",
          "content_same": false
        },
        {
          "line": 722,
          "old_api": "Stmt::make<IntegerOffsetStmt>(\n          stmt, stmt->chid * sizeof(int32) + previous_offset->offset)",
          "new_api": null,
          "old_text": "Stmt::make<IntegerOffsetStmt>(\n          stmt, stmt->chid * sizeof(int32) + previous_offset->offset)",
          "new_text": null,
          "old_line_content": "      auto offset_stmt = stmt->insert_after_me(Stmt::make<IntegerOffsetStmt>(",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 726,
          "old_api": "replace_with",
          "new_api": null,
          "old_text": "stmt->replace_with(offset_stmt)",
          "new_text": null,
          "old_line_content": "      stmt->replace_with(offset_stmt);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 729,
          "old_api": "offset_stmt->as<IntegerOffsetStmt>()",
          "new_api": null,
          "old_text": "offset_stmt->as<IntegerOffsetStmt>()",
          "new_text": null,
          "old_line_content": "      offset_stmt->as<IntegerOffsetStmt>()->input = stmt;",
          "new_line_content": "      return;",
          "content_same": false
        },
        {
          "line": 730,
          "old_api": "IRModified",
          "new_api": null,
          "old_text": "IRModified()",
          "new_text": null,
          "old_line_content": "      throw IRModified();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 737,
          "old_api": "typeid",
          "new_api": null,
          "old_text": "typeid(*stmt)",
          "new_text": null,
          "old_line_content": "        if (typeid(bstmt_data) == typeid(*stmt)) {",
          "new_line_content": "          stmt, stmt->chid * sizeof(int32) + previous_offset->offset));",
          "content_same": false
        },
        {
          "line": 738,
          "old_api": "bstmt->as<GetChStmt>()",
          "new_api": null,
          "old_text": "bstmt->as<GetChStmt>()",
          "new_text": null,
          "old_line_content": "          auto bstmt_ = bstmt->as<GetChStmt>();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 749,
          "old_api": "set_done",
          "new_api": null,
          "old_text": "set_done(stmt)",
          "new_text": null,
          "old_line_content": "    set_done(stmt);",
          "new_line_content": "      if (stmt->ret_type == bstmt->ret_type) {",
          "content_same": false
        },
        {
          "line": 769,
          "old_api": "stmt->is<AtomicOpStmt>()",
          "new_api": null,
          "old_text": "stmt->is<AtomicOpStmt>()",
          "new_text": null,
          "old_line_content": "    return stmt->is<GlobalStoreStmt>() || stmt->is<AtomicOpStmt>();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 781,
          "old_api": "size",
          "new_api": null,
          "old_text": "clause.size()",
          "new_text": null,
          "old_line_content": "      for (int i = 0; i < (int)clause.size(); i++) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 782,
          "old_api": "is_container_statement",
          "new_api": null,
          "old_text": "clause[i]->is_container_statement()",
          "new_text": null,
          "old_line_content": "        bool has_side_effects = clause[i]->is_container_statement() ||",
          "new_line_content": "  static bool is_global_write(Stmt *stmt) {",
          "content_same": false
        },
        {
          "line": 785,
          "old_api": "clause[i]->is<GlobalLoadStmt>()",
          "new_api": null,
          "old_text": "clause[i]->is<GlobalLoadStmt>()",
          "new_text": null,
          "old_line_content": "        if (global_state_changed && clause[i]->is<GlobalLoadStmt>()) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 791,
          "old_api": "get",
          "new_api": null,
          "old_text": "clause[i].get()",
          "new_text": null,
          "old_line_content": "        if (is_global_write(clause[i].get()) ||",
          "new_line_content": "      // Keep only global atomics/store, and other statements that have no",
          "content_same": false
        },
        {
          "line": 792,
          "old_api": "clause[i]->is<LocalStoreStmt>()",
          "new_api": null,
          "old_text": "clause[i]->is<LocalStoreStmt>()",
          "new_text": null,
          "old_line_content": "            clause[i]->is<LocalStoreStmt>() || !has_side_effects) {",
          "new_line_content": "      // global side effects. LocalStore is kept and specially treated later.",
          "content_same": false
        },
        {
          "line": 802,
          "old_api": "size",
          "new_api": null,
          "old_text": "clause.size()",
          "new_text": null,
          "old_line_content": "        for (int i = 0; i < (int)clause.size(); i++) {",
          "new_line_content": "          plain_clause = false;",
          "content_same": false
        },
        {
          "line": 803,
          "old_api": "get",
          "new_api": null,
          "old_text": "clause[i].get()",
          "new_text": null,
          "old_line_content": "          if (is_global_write(clause[i].get())) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 807,
          "old_api": "LaneAttribute<LocalAddress>()",
          "new_api": null,
          "old_text": "LaneAttribute<LocalAddress>()",
          "new_text": null,
          "old_line_content": "            auto lanes = LaneAttribute<LocalAddress>();",
          "new_line_content": "          // This stmt can be kept.",
          "content_same": false
        },
        {
          "line": 808,
          "old_api": "width",
          "new_api": null,
          "old_text": "store->width()",
          "new_text": null,
          "old_line_content": "            for (int l = 0; l < store->width(); l++) {",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 809,
          "old_api": "LocalAddress",
          "new_api": null,
          "old_text": "LocalAddress(store->ptr, l)",
          "new_text": null,
          "old_line_content": "              lanes.push_back(LocalAddress(store->ptr, l));",
          "new_line_content": "          plain_clause = false;",
          "content_same": false
        },
        {
          "line": 812,
          "old_api": "Stmt::make<LocalLoadStmt>(lanes)",
          "new_api": null,
          "old_text": "Stmt::make<LocalLoadStmt>(lanes)",
          "new_text": null,
          "old_line_content": "                if_stmt->insert_before_me(Stmt::make<LocalLoadStmt>(lanes));",
          "new_line_content": "          global_state_changed = true;",
          "content_same": false
        },
        {
          "line": 813,
          "old_api": "infer_type",
          "new_api": null,
          "old_text": "load->infer_type()",
          "new_text": null,
          "old_line_content": "            load->infer_type();",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 814,
          "old_api": "insert_before_me",
          "new_api": null,
          "old_text": "if_stmt->insert_before_me(\n                Stmt::make<TernaryOpStmt>(TernaryOpType::select, if_stmt->cond,\n                                          true_branch ? store->data : load,\n                                          true_branch ? load : store->data))",
          "new_text": null,
          "old_line_content": "            auto select = if_stmt->insert_before_me(",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 815,
          "old_api": "Stmt::make<TernaryOpStmt>(TernaryOpType::select, if_stmt->cond,\n                                          true_branch ? store->data : load,\n                                          true_branch ? load : store->data)",
          "new_api": null,
          "old_text": "Stmt::make<TernaryOpStmt>(TernaryOpType::select, if_stmt->cond,\n                                          true_branch ? store->data : load,\n                                          true_branch ? load : store->data)",
          "new_text": null,
          "old_line_content": "                Stmt::make<TernaryOpStmt>(TernaryOpType::select, if_stmt->cond,",
          "new_line_content": "      if (plain_clause) {",
          "content_same": false
        },
        {
          "line": 818,
          "old_api": "infer_type",
          "new_api": null,
          "old_text": "select->infer_type()",
          "new_text": null,
          "old_line_content": "            select->infer_type();",
          "new_line_content": "            // do nothing. Keep the statement.",
          "content_same": false
        },
        {
          "line": 825,
          "old_api": "std::vector<pStmt>()",
          "new_api": null,
          "old_text": "std::vector<pStmt>()",
          "new_text": null,
          "old_line_content": "        auto clean_clause = std::vector<pStmt>();",
          "new_line_content": "            auto load =",
          "content_same": false
        },
        {
          "line": 841,
          "old_api": "flatten",
          "new_api": null,
          "old_text": "flatten(if_stmt->true_statements->statements, true)",
          "new_text": null,
          "old_line_content": "        flatten(if_stmt->true_statements->statements, true)) {",
          "new_line_content": "        for (auto &&stmt : clause) {",
          "content_same": false
        },
        {
          "line": 842,
          "old_api": "IRModified",
          "new_api": null,
          "old_text": "IRModified()",
          "new_text": null,
          "old_line_content": "      throw IRModified();",
          "new_line_content": "          if (stmt != nullptr) {",
          "content_same": false
        },
        {
          "line": 845,
          "old_api": "flatten",
          "new_api": null,
          "old_text": "flatten(if_stmt->false_statements->statements, false)",
          "new_text": null,
          "old_line_content": "        flatten(if_stmt->false_statements->statements, false)) {",
          "new_line_content": "            reduced = true;",
          "content_same": false
        },
        {
          "line": 846,
          "old_api": "IRModified",
          "new_api": null,
          "old_text": "IRModified()",
          "new_text": null,
          "old_line_content": "      throw IRModified();",
          "new_line_content": "          }",
          "content_same": false
        },
        {
          "line": 850,
          "old_api": "empty",
          "new_api": null,
          "old_text": "if_stmt->true_statements->statements.empty()",
          "new_text": null,
          "old_line_content": "      if (if_stmt->true_statements->statements.empty()) {",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 852,
          "old_api": "IRModified",
          "new_api": null,
          "old_text": "IRModified()",
          "new_text": null,
          "old_line_content": "        throw IRModified();",
          "new_line_content": "    };",
          "content_same": false
        },
        {
          "line": 857,
          "old_api": "empty",
          "new_api": null,
          "old_text": "if_stmt->false_statements->statements.empty()",
          "new_text": null,
          "old_line_content": "      if (if_stmt->false_statements->statements.empty()) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 865,
          "old_api": "IRModified",
          "new_api": null,
          "old_text": "IRModified()",
          "new_text": null,
          "old_line_content": "      throw IRModified();",
          "new_line_content": "        if_stmt->true_statements = nullptr;",
          "content_same": false
        },
        {
          "line": 875,
          "old_api": "empty",
          "new_api": null,
          "old_text": "stmt->body->statements.empty()",
          "new_text": null,
          "old_line_content": "        stmt->body->statements.empty()) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 876,
          "old_api": "erase",
          "new_api": null,
          "old_text": "stmt->parent->erase(stmt)",
          "new_text": null,
          "old_line_content": "      stmt->parent->erase(stmt);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 877,
          "old_api": "IRModified",
          "new_api": null,
          "old_text": "IRModified()",
          "new_text": null,
          "old_line_content": "      throw IRModified();",
          "new_line_content": "    if (!if_stmt->true_statements && !if_stmt->false_statements) {",
          "content_same": false
        },
        {
          "line": 892,
          "old_api": "accept",
          "new_api": null,
          "old_text": "node->accept(this)",
          "new_text": null,
          "old_line_content": "    node->accept(this);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 907,
          "old_api": "accept",
          "new_api": null,
          "old_text": "stmt->accept(this)",
          "new_text": null,
          "old_line_content": "      stmt->accept(this);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 913,
          "old_api": "accept",
          "new_api": null,
          "old_text": "if_stmt->true_statements->accept(this)",
          "new_text": null,
          "old_line_content": "      if_stmt->true_statements->accept(this);",
          "new_line_content": "        BasicBlockSimplify _(block, visited, current_struct_for);",
          "content_same": false
        },
        {
          "line": 915,
          "old_api": "accept",
          "new_api": null,
          "old_text": "if_stmt->false_statements->accept(this)",
          "new_text": null,
          "old_line_content": "      if_stmt->false_statements->accept(this);",
          "new_line_content": "        modified = true;",
          "content_same": false
        },
        {
          "line": 919,
          "old_api": "accept",
          "new_api": null,
          "old_text": "for_stmt->body->accept(this)",
          "new_text": null,
          "old_line_content": "    for_stmt->body->accept(this);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 923,
          "old_api": "TC_ASSERT",
          "new_api": null,
          "old_text": "TC_ASSERT(current_struct_for == nullptr)",
          "new_text": null,
          "old_line_content": "    TC_ASSERT(current_struct_for == nullptr);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 925,
          "old_api": "accept",
          "new_api": null,
          "old_text": "for_stmt->body->accept(this)",
          "new_text": null,
          "old_line_content": "    for_stmt->body->accept(this);",
          "new_line_content": "  void visit(IfStmt *if_stmt) override {",
          "content_same": false
        },
        {
          "line": 930,
          "old_api": "accept",
          "new_api": null,
          "old_text": "stmt->body->accept(this)",
          "new_text": null,
          "old_line_content": "    stmt->body->accept(this);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 935,
          "old_api": "accept",
          "new_api": null,
          "old_text": "stmt->body->accept(this)",
          "new_text": null,
          "old_line_content": "      stmt->body->accept(this);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 950,
          "old_api": "constant_fold",
          "new_api": null,
          "old_text": "constant_fold(root)",
          "new_text": null,
          "old_line_content": "  constant_fold(root);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 951,
          "old_api": "die",
          "new_api": null,
          "old_text": "die(root)",
          "new_text": null,
          "old_line_content": "  die(root);",
          "new_line_content": "};",
          "content_same": false
        },
        {
          "line": 952,
          "old_api": "simplify",
          "new_api": null,
          "old_text": "simplify(root)",
          "new_text": null,
          "old_line_content": "  simplify(root);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 469,
          "old_api": "bstmt->as<UnaryOpStmt>()",
          "new_api": null,
          "old_text": "bstmt->as<UnaryOpStmt>()",
          "new_text": null,
          "old_line_content": "          auto bstmt_ = bstmt->as<UnaryOpStmt>();",
          "new_line_content": "      return;",
          "content_same": false
        },
        {
          "line": 470,
          "old_api": "same_operation",
          "new_api": null,
          "old_text": "bstmt_->same_operation(stmt)",
          "new_text": null,
          "old_line_content": "          if (bstmt_->same_operation(stmt) &&",
          "new_line_content": "    if (stmt->op_type == UnaryOpType::cast) {",
          "content_same": false
        },
        {
          "line": 479,
          "old_api": "set_done",
          "new_api": null,
          "old_text": "set_done(stmt)",
          "new_text": null,
          "old_line_content": "    set_done(stmt);",
          "new_line_content": "      auto &bstmt = block->statements[i];",
          "content_same": false
        },
        {
          "line": 489,
          "old_api": "stmt->rhs->as<ConstStmt>()",
          "new_api": null,
          "old_text": "stmt->rhs->as<ConstStmt>()",
          "new_text": null,
          "old_line_content": "        auto stmt_ = stmt->rhs->as<ConstStmt>();",
          "new_line_content": "          }",
          "content_same": false
        },
        {
          "line": 491,
          "old_api": "width",
          "new_api": null,
          "old_text": "stmt_->width()",
          "new_text": null,
          "old_line_content": "        for (int l = 0; l < stmt_->width(); l++) {",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 492,
          "old_api": "val_int32",
          "new_api": null,
          "old_text": "stmt_->val[l].val_int32()",
          "new_text": null,
          "old_line_content": "          if (stmt_->val[l].val_int32() != 0) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 498,
          "old_api": "erase",
          "new_api": null,
          "old_text": "stmt->parent->erase(current_stmt_id)",
          "new_text": null,
          "old_line_content": "          stmt->parent->erase(current_stmt_id);",
          "new_line_content": "      return;",
          "content_same": false
        },
        {
          "line": 499,
          "old_api": "IRModified",
          "new_api": null,
          "old_text": "IRModified()",
          "new_text": null,
          "old_line_content": "          throw IRModified();",
          "new_line_content": "    if ((stmt->op_type == BinaryOpType::add ||",
          "content_same": false
        },
        {
          "line": 507,
          "old_api": "typeid",
          "new_api": null,
          "old_text": "typeid(*stmt)",
          "new_text": null,
          "old_line_content": "        if (typeid(bstmt_data) == typeid(*stmt)) {",
          "new_line_content": "            all_zero = false;",
          "content_same": false
        },
        {
          "line": 508,
          "old_api": "bstmt->as<BinaryOpStmt>()",
          "new_api": null,
          "old_text": "bstmt->as<BinaryOpStmt>()",
          "new_text": null,
          "old_line_content": "          auto bstmt_ = bstmt->as<BinaryOpStmt>();",
          "new_line_content": "          }",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 45,
      "total_additions": 111,
      "total_deletions": 105,
      "total_api_changes": 261
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 14,
        "api_related_lines": 261,
        "non_api_lines": 9,
        "non_api_line_numbers": [
          453,
          454,
          455,
          456,
          457,
          462,
          463,
          465,
          466
        ]
      }
    },
    "api_calls_before": 336,
    "api_calls_after": 343,
    "diff_info": {
      "added_lines": 14,
      "removed_lines": 0,
      "total_diff_lines": 26
    }
  }
}
{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/vlc/modified_file/4edfcab6467425963a5ca2964c83a17a7ec1b060",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/vlc/modified_file/4edfcab6467425963a5ca2964c83a17a7ec1b060/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/vlc/modified_file/4edfcab6467425963a5ca2964c83a17a7ec1b060/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/vlc/modified_file/4edfcab6467425963a5ca2964c83a17a7ec1b060/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 411,
          "old_api": "IDirect3DDevice9_CreateOffscreenPlainSurface",
          "new_api": "unlikely",
          "old_text": "IDirect3DDevice9_CreateOffscreenPlainSurface(vd->sys->d3ddev,\n                                                          vd->fmt.i_width,\n                                                          vd->fmt.i_height,\n                                                          format,\n                                                          D3DPOOL_DEFAULT,\n                                                          &picsys->surface,\n                                                          NULL)",
          "new_text": "unlikely(picsys == NULL)",
          "old_line_content": "        HRESULT hr = IDirect3DDevice9_CreateOffscreenPlainSurface(vd->sys->d3ddev,",
          "new_line_content": "        if (unlikely(picsys == NULL))",
          "content_same": false
        },
        {
          "line": 442,
          "old_api": "is_d3d9_opaque",
          "new_api": "memset",
          "old_text": "is_d3d9_opaque( vd->fmt.i_chroma )",
          "new_text": "memset(&pool_cfg, 0, sizeof(pool_cfg))",
          "old_line_content": "    if( !is_d3d9_opaque( vd->fmt.i_chroma ) )",
          "new_line_content": "    memset(&pool_cfg, 0, sizeof(pool_cfg));",
          "content_same": false
        },
        {
          "line": 473,
          "old_api": "IDirect3DDevice9_TestCooperativeLevel",
          "new_api": "Direct3D9UnlockSurface",
          "old_text": "IDirect3DDevice9_TestCooperativeLevel(sys->d3ddev)",
          "new_text": "Direct3D9UnlockSurface(picture)",
          "old_line_content": "    HRESULT hr = IDirect3DDevice9_TestCooperativeLevel(sys->d3ddev);",
          "new_line_content": "        Direct3D9UnlockSurface(picture);",
          "content_same": false
        },
        {
          "line": 476,
          "old_api": "vout_display_SendEventPicturesInvalid",
          "new_api": "IDirect3DDevice9_TestCooperativeLevel",
          "old_text": "vout_display_SendEventPicturesInvalid(vd)",
          "new_text": "IDirect3DDevice9_TestCooperativeLevel(sys->d3ddev)",
          "old_line_content": "            vout_display_SendEventPicturesInvalid(vd);",
          "new_line_content": "    HRESULT hr = IDirect3DDevice9_TestCooperativeLevel(sys->d3ddev);",
          "content_same": false
        },
        {
          "line": 497,
          "old_api": "Direct3D9RenderScene",
          "new_api": "Direct3D9ImportSubpicture",
          "old_text": "Direct3D9RenderScene(vd, &picture_region,\n                            subpicture_region_count, subpicture_region)",
          "new_text": "Direct3D9ImportSubpicture(vd, &subpicture_region_count, &subpicture_region,\n                                     subpicture)",
          "old_line_content": "        Direct3D9RenderScene(vd, &picture_region,",
          "new_line_content": "            Direct3D9ImportSubpicture(vd, &subpicture_region_count, &subpicture_region,",
          "content_same": false
        },
        {
          "line": 500,
          "old_api": "Direct3D9DeleteRegions",
          "new_api": "Direct3D9RenderScene",
          "old_text": "Direct3D9DeleteRegions(sys->d3dregion_count, sys->d3dregion)",
          "new_text": "Direct3D9RenderScene(vd, &picture_region,\n                            subpicture_region_count, subpicture_region)",
          "old_line_content": "        Direct3D9DeleteRegions(sys->d3dregion_count, sys->d3dregion);",
          "new_line_content": "        Direct3D9RenderScene(vd, &picture_region,",
          "content_same": false
        },
        {
          "line": 528,
          "old_api": "IDirect3DDevice9_Present",
          "new_api": "IDirect3DDevice9Ex_PresentEx",
          "old_text": "IDirect3DDevice9_Present(d3ddev, &src, &dst, NULL, NULL)",
          "new_text": "IDirect3DDevice9Ex_PresentEx(d3ddev, &src, &dst, NULL, NULL, 0)",
          "old_line_content": "        hr = IDirect3DDevice9_Present(d3ddev, &src, &dst, NULL, NULL);",
          "new_line_content": "        hr = IDirect3DDevice9Ex_PresentEx(d3ddev, &src, &dst, NULL, NULL, 0);",
          "content_same": false
        },
        {
          "line": 531,
          "old_api": "msg_Dbg",
          "new_api": "IDirect3DDevice9_Present",
          "old_text": "msg_Dbg(vd, \"Failed IDirect3DDevice9_Present: 0x%0lx\", hr)",
          "new_text": "IDirect3DDevice9_Present(d3ddev, &src, &dst, NULL, NULL)",
          "old_line_content": "        msg_Dbg(vd, \"Failed IDirect3DDevice9_Present: 0x%0lx\", hr);",
          "new_line_content": "        hr = IDirect3DDevice9_Present(d3ddev, &src, &dst, NULL, NULL);",
          "content_same": false
        },
        {
          "line": 539,
          "old_api": "subpicture_Delete",
          "new_api": "Direct3D9LockSurface",
          "old_text": "subpicture_Delete(subpicture)",
          "new_text": "Direct3D9LockSurface(picture)",
          "old_line_content": "        subpicture_Delete(subpicture);",
          "new_line_content": "        Direct3D9LockSurface(picture);",
          "content_same": false
        },
        {
          "line": 566,
          "old_api": "vlc_mutex_lock",
          "new_api": "EventThreadStop",
          "old_text": "vlc_mutex_lock(&sys->lock)",
          "new_text": "EventThreadStop(sys->sys.event)",
          "old_line_content": "    vlc_mutex_lock(&sys->lock);",
          "new_line_content": "    EventThreadStop(sys->sys.event);",
          "content_same": false
        },
        {
          "line": 569,
          "old_api": "vlc_mutex_unlock",
          "new_api": "vlc_mutex_lock",
          "old_text": "vlc_mutex_unlock(&sys->lock)",
          "new_text": "vlc_mutex_lock(&sys->lock)",
          "old_line_content": "    vlc_mutex_unlock(&sys->lock);",
          "new_line_content": "    vlc_mutex_lock(&sys->lock);",
          "content_same": false
        },
        {
          "line": 651,
          "old_api": "vlc_mutex_lock",
          "new_api": "CommonManage",
          "old_text": "vlc_mutex_lock(&sys->lock)",
          "new_text": "CommonManage(vd)",
          "old_line_content": "    vlc_mutex_lock(&sys->lock);",
          "new_line_content": "    CommonManage(vd);",
          "content_same": false
        },
        {
          "line": 654,
          "old_api": "vlc_mutex_unlock",
          "new_api": "vlc_mutex_lock",
          "old_text": "vlc_mutex_unlock(&sys->lock)",
          "new_text": "vlc_mutex_lock(&sys->lock)",
          "old_line_content": "    vlc_mutex_unlock(&sys->lock);",
          "new_line_content": "    vlc_mutex_lock(&sys->lock);",
          "content_same": false
        },
        {
          "line": 753,
          "old_api": "msg_Err",
          "new_api": "ZeroMemory",
          "old_text": "msg_Err(vd, \"Could not read adapter capabilities. (hr=0x%0lx)\", hr)",
          "new_text": "ZeroMemory(&sys->d3dcaps, sizeof(sys->d3dcaps))",
          "old_line_content": "       msg_Err(vd, \"Could not read adapter capabilities. (hr=0x%0lx)\", hr);",
          "new_line_content": "    ZeroMemory(&sys->d3dcaps, sizeof(sys->d3dcaps));",
          "content_same": false
        },
        {
          "line": 814,
          "old_api": "msg_Err",
          "new_api": "IDirect3D9_GetAdapterDisplayMode",
          "old_text": "msg_Err(vd, \"Could not read adapter display mode. (hr=0x%0lx)\", hr)",
          "new_text": "IDirect3D9_GetAdapterDisplayMode(sys->d3dobj,\n                                                  D3DADAPTER_DEFAULT, &d3ddm)",
          "old_line_content": "       msg_Err(vd, \"Could not read adapter display mode. (hr=0x%0lx)\", hr);",
          "new_line_content": "    HRESULT hr = IDirect3D9_GetAdapterDisplayMode(sys->d3dobj,",
          "content_same": false
        },
        {
          "line": 870,
          "old_api": "strstr",
          "new_api": "IDirect3D9_GetAdapterCount",
          "old_text": "strstr(Identifier.Description,\"PerfHUD\")",
          "new_text": "IDirect3D9_GetAdapterCount(d3dobj)",
          "old_line_content": "        if (SUCCEEDED(Res) && strstr(Identifier.Description,\"PerfHUD\") != 0) {",
          "new_line_content": "    for (UINT Adapter=0; Adapter< IDirect3D9_GetAdapterCount(d3dobj); ++Adapter) {",
          "content_same": false
        },
        {
          "line": 883,
          "old_api": "msg_Dbg",
          "new_api": "IDirect3D9_GetAdapterIdentifier",
          "old_text": "msg_Dbg(vd, \"Direct3d9 Device: %s %lu %lu %lu\", d3dai.Description,\n                d3dai.VendorId, d3dai.DeviceId, d3dai.Revision )",
          "new_text": "IDirect3D9_GetAdapterIdentifier(d3dobj,AdapterToUse,0, &d3dai)",
          "old_line_content": "        msg_Dbg(vd, \"Direct3d9 Device: %s %lu %lu %lu\", d3dai.Description,",
          "new_line_content": "    if (FAILED(IDirect3D9_GetAdapterIdentifier(d3dobj,AdapterToUse,0, &d3dai))) {",
          "content_same": false
        },
        {
          "line": 932,
          "old_api": "msg_Err",
          "new_api": "UpdateRects",
          "old_text": "msg_Err(vd, \"Failed to allocate resources\")",
          "new_text": "UpdateRects(vd, NULL, NULL, true)",
          "old_line_content": "        msg_Err(vd, \"Failed to allocate resources\");",
          "new_line_content": "    UpdateRects(vd, NULL, NULL, true);",
          "content_same": false
        },
        {
          "line": 953,
          "old_api": "IDirect3DDevice9_Release",
          "new_api": "Direct3D9DestroyResources",
          "old_text": "IDirect3DDevice9_Release(sys->d3ddev)",
          "new_text": "Direct3D9DestroyResources(vd)",
          "old_line_content": "       IDirect3DDevice9_Release(sys->d3ddev);",
          "new_line_content": "    Direct3D9DestroyResources(vd);",
          "content_same": false
        },
        {
          "line": 978,
          "old_api": "IDirect3DDevice9_Reset",
          "new_api": "IDirect3DDevice9Ex_ResetEx",
          "old_text": "IDirect3DDevice9_Reset(d3ddev, &sys->d3dpp)",
          "new_text": "IDirect3DDevice9Ex_ResetEx(d3ddev, &sys->d3dpp, NULL)",
          "old_line_content": "        hr = IDirect3DDevice9_Reset(d3ddev, &sys->d3dpp);",
          "new_line_content": "        hr = IDirect3DDevice9Ex_ResetEx(d3ddev, &sys->d3dpp, NULL);",
          "content_same": false
        },
        {
          "line": 981,
          "old_api": "msg_Err",
          "new_api": "IDirect3DDevice9_Reset",
          "old_text": "msg_Err(vd, \"IDirect3DDevice9_Reset failed! (hr=0x%0lx)\", hr)",
          "new_text": "IDirect3DDevice9_Reset(d3ddev, &sys->d3dpp)",
          "old_line_content": "        msg_Err(vd, \"IDirect3DDevice9_Reset failed! (hr=0x%0lx)\", hr);",
          "new_line_content": "        hr = IDirect3DDevice9_Reset(d3ddev, &sys->d3dpp);",
          "content_same": false
        },
        {
          "line": 988,
          "old_api": "Direct3D9CreateResources",
          "new_api": "UpdateRects",
          "old_text": "Direct3D9CreateResources(vd, &vd->fmt)",
          "new_text": "UpdateRects(vd, NULL, NULL, true)",
          "old_line_content": "    if (Direct3D9CreateResources(vd, &vd->fmt)) {",
          "new_line_content": "    UpdateRects(vd, NULL, NULL, true);",
          "content_same": false
        },
        {
          "line": 1013,
          "old_api": "Direct3D9CreateShaders",
          "new_api": "msg_Err",
          "old_text": "Direct3D9CreateShaders(vd)",
          "new_text": "msg_Err(vd, \"Direct3D scene initialization failed !\")",
          "old_line_content": "    if (Direct3D9CreateShaders(vd)) {",
          "new_line_content": "        msg_Err(vd, \"Direct3D scene initialization failed !\");",
          "content_same": false
        },
        {
          "line": 1058,
          "old_api": "SUCCEEDED",
          "new_api": "IDirect3D9_CheckDeviceFormat",
          "old_text": "SUCCEEDED(hr)",
          "new_text": "IDirect3D9_CheckDeviceFormat(d3dobj, D3DADAPTER_DEFAULT,\n                                      D3DDEVTYPE_HAL, dst, 0,\n                                      D3DRTYPE_SURFACE, src)",
          "old_line_content": "    if (SUCCEEDED(hr)) {",
          "new_line_content": "    hr = IDirect3D9_CheckDeviceFormat(d3dobj, D3DADAPTER_DEFAULT,",
          "content_same": false
        },
        {
          "line": 1108,
          "old_api": "vlc_fourcc_GetYUVFallback",
          "new_api": "is_d3d9_opaque",
          "old_text": "vlc_fourcc_GetYUVFallback(chroma)",
          "new_text": "is_d3d9_opaque(chroma)",
          "old_line_content": "            list = vlc_fourcc_GetYUVFallback(chroma);",
          "new_line_content": "        if (pass == 0 && is_d3d9_opaque(chroma))",
          "content_same": false
        },
        {
          "line": 1110,
          "old_api": "vlc_fourcc_GetRGBFallback",
          "new_api": "vlc_fourcc_IsYUV",
          "old_text": "vlc_fourcc_GetRGBFallback(chroma)",
          "new_text": "vlc_fourcc_IsYUV(chroma)",
          "old_line_content": "            list = vlc_fourcc_GetRGBFallback(chroma);",
          "new_line_content": "        else if (pass == 0 && hardware_scale_ok && sys->allow_hw_yuv && vlc_fourcc_IsYUV(chroma))",
          "content_same": false
        },
        {
          "line": 1124,
          "old_api": "msg_Dbg",
          "new_api": "msg_Warn",
          "old_text": "msg_Dbg(vd, \"selected surface pixel format is %s\",\n                            format->name)",
          "new_text": "msg_Warn(vd, \"trying surface pixel format: %s\",\n                         format->name)",
          "old_line_content": "                    msg_Dbg(vd, \"selected surface pixel format is %s\",",
          "new_line_content": "                msg_Warn(vd, \"trying surface pixel format: %s\",",
          "content_same": false
        },
        {
          "line": 1219,
          "old_api": "IDirect3DDevice9_SetRenderState",
          "new_api": "D3DCOLOR_XRGB",
          "old_text": "IDirect3DDevice9_SetRenderState(d3ddev, D3DRS_CULLMODE, D3DCULL_NONE)",
          "new_text": "D3DCOLOR_XRGB(255,255,255)",
          "old_line_content": "    IDirect3DDevice9_SetRenderState(d3ddev, D3DRS_CULLMODE, D3DCULL_NONE);",
          "new_line_content": "    IDirect3DDevice9_SetRenderState(d3ddev, D3DRS_AMBIENT, D3DCOLOR_XRGB(255,255,255));",
          "content_same": false
        },
        {
          "line": 1252,
          "old_api": "msg_Dbg",
          "new_api": "IDirect3DDevice9_SetTextureStageState",
          "old_text": "msg_Dbg(vd, \"Direct3D9 scene created successfully\")",
          "new_text": "IDirect3DDevice9_SetTextureStageState(d3ddev, 0, D3DTSS_ALPHAARG1,D3DTA_TEXTURE)",
          "old_line_content": "    msg_Dbg(vd, \"Direct3D9 scene created successfully\");",
          "new_line_content": "    IDirect3DDevice9_SetTextureStageState(d3ddev, 0, D3DTSS_ALPHAARG1,D3DTA_TEXTURE);",
          "content_same": false
        },
        {
          "line": 1312,
          "old_api": "FAILED",
          "new_api": "OurD3DXCompileShader",
          "old_text": "FAILED(hr)",
          "new_text": "OurD3DXCompileShader(shader_source, source_length, NULL, NULL,\n                \"main\", \"ps_3_0\", shader_flags, &compiled_shader, &error_msgs, NULL)",
          "old_line_content": "    if (FAILED(hr)) {",
          "new_line_content": "    HRESULT hr = OurD3DXCompileShader(shader_source, source_length, NULL, NULL,",
          "content_same": false
        },
        {
          "line": 1315,
          "old_api": "ID3DXBuffer_GetBufferPointer",
          "new_api": "FAILED",
          "old_text": "ID3DXBuffer_GetBufferPointer(error_msgs)",
          "new_text": "FAILED(hr)",
          "old_line_content": "            msg_Warn(vd, \"HLSL Compilation Error: %s\", (char*)ID3DXBuffer_GetBufferPointer(error_msgs));",
          "new_line_content": "    if (FAILED(hr)) {",
          "content_same": false
        },
        {
          "line": 1316,
          "old_api": "ID3DXBuffer_Release",
          "new_api": "msg_Warn",
          "old_text": "ID3DXBuffer_Release(error_msgs)",
          "new_text": "msg_Warn(vd, \"D3DXCompileShader Error (hr=0x%0lx)\", hr)",
          "old_line_content": "            ID3DXBuffer_Release(error_msgs);",
          "new_line_content": "        msg_Warn(vd, \"D3DXCompileShader Error (hr=0x%0lx)\", hr);",
          "content_same": false
        },
        {
          "line": 1331,
          "old_api": "msg_Warn",
          "new_api": "ID3DXBuffer_Release",
          "old_text": "msg_Warn(vd, \"IDirect3DDevice9_CreatePixelShader error (hr=0x%0lx)\", hr)",
          "new_text": "ID3DXBuffer_Release(error_msgs)",
          "old_line_content": "        msg_Warn(vd, \"IDirect3DDevice9_CreatePixelShader error (hr=0x%0lx)\", hr);",
          "new_line_content": "        ID3DXBuffer_Release(error_msgs);",
          "content_same": false
        },
        {
          "line": 1371,
          "old_api": "var_InheritString",
          "new_api": "strcmp",
          "old_text": "var_InheritString(vd, \"direct3d9-shader-file\")",
          "new_text": "strcmp(selected_shader, SELECTED_SHADER_FILE)",
          "old_line_content": "        char *filepath = var_InheritString(vd, \"direct3d9-shader-file\");",
          "new_line_content": "        if (strcmp(selected_shader, SELECTED_SHADER_FILE))",
          "content_same": false
        },
        {
          "line": 1374,
          "old_api": "free",
          "new_api": "var_InheritString",
          "old_text": "free(filepath)",
          "new_text": "var_InheritString(vd, \"direct3d9-shader-file\")",
          "old_line_content": "            free(filepath);",
          "new_line_content": "        char *filepath = var_InheritString(vd, \"direct3d9-shader-file\");",
          "content_same": false
        },
        {
          "line": 1381,
          "old_api": "fseek",
          "new_api": "fopen",
          "old_text": "fseek(fs, 0, SEEK_END)",
          "new_text": "fopen(filepath, \"rb\")",
          "old_line_content": "        int ret = fseek(fs, 0, SEEK_END);",
          "new_line_content": "        fs = fopen(filepath, \"rb\");",
          "content_same": false
        },
        {
          "line": 1384,
          "old_api": "ftell",
          "new_api": "fseek",
          "old_text": "ftell(fs)",
          "new_text": "fseek(fs, 0, SEEK_END)",
          "old_line_content": "        long length = ftell(fs);",
          "new_line_content": "        int ret = fseek(fs, 0, SEEK_END);",
          "content_same": false
        },
        {
          "line": 1387,
          "old_api": "rewind",
          "new_api": "ftell",
          "old_text": "rewind(fs)",
          "new_text": "ftell(fs)",
          "old_line_content": "        rewind(fs);",
          "new_line_content": "        long length = ftell(fs);",
          "content_same": false
        },
        {
          "line": 1391,
          "old_api": "fread",
          "new_api": "malloc",
          "old_text": "fread(shader_source_file, length, 1, fs)",
          "new_text": "malloc(sizeof(*shader_source_file) * length)",
          "old_line_content": "        ret = fread(shader_source_file, length, 1, fs);",
          "new_line_content": "        shader_source_file = malloc(sizeof(*shader_source_file) * length);",
          "content_same": false
        },
        {
          "line": 1394,
          "old_api": "Direct3D9CompileShader",
          "new_api": "fread",
          "old_text": "Direct3D9CompileShader(vd, shader_source_file, length)",
          "new_text": "fread(shader_source_file, length, 1, fs)",
          "old_line_content": "        ret = Direct3D9CompileShader(vd, shader_source_file, length);",
          "new_line_content": "        ret = fread(shader_source_file, length, 1, fs);",
          "content_same": false
        },
        {
          "line": 1410,
          "old_api": "fclose",
          "new_api": "free",
          "old_text": "fclose(fs)",
          "new_text": "free(selected_shader)",
          "old_line_content": "        fclose(fs);",
          "new_line_content": "    free(selected_shader);",
          "content_same": false
        },
        {
          "line": 1569,
          "old_api": "msg_Dbg",
          "new_api": "IDirect3DDevice9_StretchRect",
          "old_text": "msg_Dbg(vd, \"Failed IDirect3DDevice9_StretchRect: source 0x%p 0x%0lx\",\n                (LPVOID)source, hr)",
          "new_text": "IDirect3DDevice9_StretchRect(sys->d3ddev, source, &vd->sys->sys.rect_src, destination, NULL, D3DTEXF_NONE)",
          "old_line_content": "        msg_Dbg(vd, \"Failed IDirect3DDevice9_StretchRect: source 0x%p 0x%0lx\",",
          "new_line_content": "    hr = IDirect3DDevice9_StretchRect(sys->d3ddev, source, &vd->sys->sys.rect_src, destination, NULL, D3DTEXF_NONE);",
          "content_same": false
        },
        {
          "line": 1680,
          "old_api": "msg_Err",
          "new_api": "FAILED",
          "old_text": "msg_Err(vd, \"Failed to lock the texture\")",
          "new_text": "FAILED(hr)",
          "old_line_content": "            msg_Err(vd, \"Failed to lock the texture\");",
          "new_line_content": "            if (FAILED(hr))",
          "content_same": false
        },
        {
          "line": 1718,
          "old_api": "memcpy",
          "new_api": "msg_Dbg",
          "old_text": "memcpy(vertex, region->vertex, sizeof(region->vertex))",
          "new_text": "msg_Dbg(vd, \"Failed IDirect3DVertexBuffer9_Lock: 0x%0lx\", hr)",
          "old_line_content": "    memcpy(vertex, region->vertex, sizeof(region->vertex));",
          "new_line_content": "        msg_Dbg(vd, \"Failed IDirect3DVertexBuffer9_Lock: 0x%0lx\", hr);",
          "content_same": false
        },
        {
          "line": 1721,
          "old_api": "msg_Dbg",
          "new_api": "memcpy",
          "old_text": "msg_Dbg(vd, \"Failed IDirect3DVertexBuffer9_Unlock: 0x%0lx\", hr)",
          "new_text": "memcpy(vertex, region->vertex, sizeof(region->vertex))",
          "old_line_content": "        msg_Dbg(vd, \"Failed IDirect3DVertexBuffer9_Unlock: 0x%0lx\", hr);",
          "new_line_content": "    memcpy(vertex, region->vertex, sizeof(region->vertex));",
          "content_same": false
        },
        {
          "line": 1741,
          "old_api": "FAILED",
          "new_api": "IDirect3DDevice9_SetPixelShader",
          "old_text": "FAILED(hr)",
          "new_text": "IDirect3DDevice9_SetPixelShader(d3ddev, sys->d3dx_shader)",
          "old_line_content": "            if (FAILED(hr)) {",
          "new_line_content": "            hr = IDirect3DDevice9_SetPixelShader(d3ddev, sys->d3dx_shader);",
          "content_same": false
        },
        {
          "line": 1797,
          "old_api": "msg_Dbg",
          "new_api": "IDirect3DDevice9_Clear",
          "old_text": "msg_Dbg(vd, \"Failed IDirect3DDevice9_Clear: 0x%0lx\", hr)",
          "new_text": "IDirect3DDevice9_Clear(d3ddev, 0, NULL, D3DCLEAR_TARGET,\n                                  D3DCOLOR_XRGB(0, 0, 0), 1.0f, 0)",
          "old_line_content": "            msg_Dbg(vd, \"Failed IDirect3DDevice9_Clear: 0x%0lx\", hr);",
          "new_line_content": "        hr = IDirect3DDevice9_Clear(d3ddev, 0, NULL, D3DCLEAR_TARGET,",
          "content_same": false
        },
        {
          "line": 1813,
          "old_api": "IDirect3DDevice9_SetRenderState",
          "new_api": "Direct3D9RenderRegion",
          "old_text": "IDirect3DDevice9_SetRenderState(d3ddev, D3DRS_ALPHABLENDENABLE, TRUE)",
          "new_text": "Direct3D9RenderRegion(vd, picture, true)",
          "old_line_content": "        IDirect3DDevice9_SetRenderState(d3ddev, D3DRS_ALPHABLENDENABLE, TRUE);",
          "new_line_content": "    Direct3D9RenderRegion(vd, picture, true);",
          "content_same": false
        },
        {
          "line": 1820,
          "old_api": "IDirect3DDevice9_SetRenderState",
          "new_api": "Direct3D9RenderRegion",
          "old_text": "IDirect3DDevice9_SetRenderState(d3ddev, D3DRS_ALPHABLENDENABLE, FALSE)",
          "new_text": "Direct3D9RenderRegion(vd, r, false)",
          "old_line_content": "        IDirect3DDevice9_SetRenderState(d3ddev, D3DRS_ALPHABLENDENABLE, FALSE);",
          "new_line_content": "            Direct3D9RenderRegion(vd, r, false);",
          "content_same": false
        },
        {
          "line": 1823,
          "old_api": "IDirect3DDevice9_EndScene",
          "new_api": "IDirect3DDevice9_SetRenderState",
          "old_text": "IDirect3DDevice9_EndScene(d3ddev)",
          "new_text": "IDirect3DDevice9_SetRenderState(d3ddev, D3DRS_ALPHABLENDENABLE, FALSE)",
          "old_line_content": "    hr = IDirect3DDevice9_EndScene(d3ddev);",
          "new_line_content": "        IDirect3DDevice9_SetRenderState(d3ddev, D3DRS_ALPHABLENDENABLE, FALSE);",
          "content_same": false
        },
        {
          "line": 1843,
          "old_api": "vlc_mutex_lock",
          "new_api": "VLC_UNUSED",
          "old_text": "vlc_mutex_lock(&sys->lock)",
          "new_text": "VLC_UNUSED(oldval)",
          "old_line_content": "    vlc_mutex_lock(&sys->lock);",
          "new_line_content": "    VLC_UNUSED(oldval);",
          "content_same": false
        },
        {
          "line": 1864,
          "old_api": "strdup",
          "new_api": "xrealloc",
          "old_text": "strdup(builtin_shaders[i].name)",
          "new_text": "xrealloc(ctx->values, (ctx->count + num_shaders + 1) * sizeof(char *))",
          "old_line_content": "        ctx->values[ctx->count] = strdup(builtin_shaders[i].name);",
          "new_line_content": "    ctx->values = xrealloc(ctx->values, (ctx->count + num_shaders + 1) * sizeof(char *));",
          "content_same": false
        },
        {
          "line": 1865,
          "old_api": "strdup",
          "new_api": "xrealloc",
          "old_text": "strdup(builtin_shaders[i].name)",
          "new_text": "xrealloc(ctx->descs, (ctx->count + num_shaders + 1) * sizeof(char *))",
          "old_line_content": "        ctx->descs[ctx->count] = strdup(builtin_shaders[i].name);",
          "new_line_content": "    ctx->descs = xrealloc(ctx->descs, (ctx->count + num_shaders + 1) * sizeof(char *));",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 1024,
          "old_api": null,
          "new_api": "IDirect3D9_CheckDeviceFormat",
          "old_text": null,
          "new_text": "IDirect3D9_CheckDeviceFormat(sys->d3dobj,\n                                                   D3DADAPTER_DEFAULT,\n                                                   D3DDEVTYPE_HAL,\n                                                   sys->d3dpp.BackBufferFormat,\n                                                   D3DUSAGE_DYNAMIC,\n                                                   D3DRTYPE_TEXTURE,\n                                                   fmt)",
          "old_line_content": "                                                   sys->d3dpp.BackBufferFormat,",
          "new_line_content": "        if (SUCCEEDED(IDirect3D9_CheckDeviceFormat(sys->d3dobj,",
          "content_same": false
        },
        {
          "line": 514,
          "old_api": null,
          "new_api": "picture_Release",
          "old_text": null,
          "new_text": "picture_Release(picture)",
          "old_line_content": "        return;",
          "new_line_content": "        picture_Release(picture);",
          "content_same": false
        },
        {
          "line": 516,
          "old_api": null,
          "new_api": "subpicture_Delete",
          "old_text": null,
          "new_text": "subpicture_Delete(subpicture)",
          "old_line_content": "",
          "new_line_content": "            subpicture_Delete(subpicture);",
          "content_same": false
        },
        {
          "line": 1540,
          "old_api": null,
          "new_api": "D3DCOLOR_ARGB",
          "old_text": null,
          "new_text": "D3DCOLOR_ARGB(alpha, 255, 255, 255)",
          "old_line_content": "",
          "new_line_content": "        vertices[i].diffuse = D3DCOLOR_ARGB(alpha, 255, 255, 255);",
          "content_same": false
        },
        {
          "line": 1042,
          "old_api": null,
          "new_api": "Direct3D9DestroyScene",
          "old_text": null,
          "new_text": "Direct3D9DestroyScene(vd)",
          "old_line_content": "}",
          "new_line_content": "    Direct3D9DestroyScene(vd);",
          "content_same": false
        },
        {
          "line": 1043,
          "old_api": null,
          "new_api": "picture_pool_Release",
          "old_text": null,
          "new_text": "picture_pool_Release(vd->sys->sys.pool)",
          "old_line_content": "",
          "new_line_content": "    picture_pool_Release(vd->sys->sys.pool);",
          "content_same": false
        },
        {
          "line": 1044,
          "old_api": null,
          "new_api": "Direct3D9DestroyShaders",
          "old_text": null,
          "new_text": "Direct3D9DestroyShaders(vd)",
          "old_line_content": "/**",
          "new_line_content": "    Direct3D9DestroyShaders(vd);",
          "content_same": false
        },
        {
          "line": 533,
          "old_api": null,
          "new_api": "FAILED",
          "old_text": null,
          "new_text": "FAILED(hr)",
          "old_line_content": "",
          "new_line_content": "    if (FAILED(hr)) {",
          "content_same": false
        },
        {
          "line": 534,
          "old_api": null,
          "new_api": "msg_Dbg",
          "old_text": null,
          "new_text": "msg_Dbg(vd, \"Failed IDirect3DDevice9_Present: 0x%0lx\", hr)",
          "old_line_content": "    /* XXX See Prepare() */",
          "new_line_content": "        msg_Dbg(vd, \"Failed IDirect3DDevice9_Present: 0x%0lx\", hr);",
          "content_same": false
        },
        {
          "line": 1555,
          "old_api": null,
          "new_api": "msg_Dbg",
          "old_text": null,
          "new_text": "msg_Dbg(vd, \"no surface to render?\")",
          "old_line_content": "",
          "new_line_content": "        msg_Dbg(vd, \"no surface to render?\");",
          "content_same": false
        },
        {
          "line": 1561,
          "old_api": null,
          "new_api": "IDirect3DTexture9_GetSurfaceLevel",
          "old_text": null,
          "new_text": "IDirect3DTexture9_GetSurfaceLevel(sys->d3dtex, 0, &destination)",
          "old_line_content": "        return VLC_EGENERIC;",
          "new_line_content": "    hr = IDirect3DTexture9_GetSurfaceLevel(sys->d3dtex, 0, &destination);",
          "content_same": false
        },
        {
          "line": 538,
          "old_api": null,
          "new_api": "is_d3d9_opaque",
          "old_text": null,
          "new_text": "is_d3d9_opaque(picture->format.i_chroma)",
          "old_line_content": "    if (subpicture)",
          "new_line_content": "    if ( !is_d3d9_opaque(picture->format.i_chroma) )",
          "content_same": false
        },
        {
          "line": 1562,
          "old_api": null,
          "new_api": "FAILED",
          "old_text": null,
          "new_text": "FAILED(hr)",
          "old_line_content": "    }",
          "new_line_content": "    if (FAILED(hr)) {",
          "content_same": false
        },
        {
          "line": 540,
          "old_api": null,
          "new_api": "picture_Release",
          "old_text": null,
          "new_text": "picture_Release(picture)",
          "old_line_content": "",
          "new_line_content": "    picture_Release(picture);",
          "content_same": false
        },
        {
          "line": 1563,
          "old_api": null,
          "new_api": "msg_Dbg",
          "old_text": null,
          "new_text": "msg_Dbg(vd, \"Failed IDirect3DTexture9_GetSurfaceLevel: 0x%0lx\", hr)",
          "old_line_content": "",
          "new_line_content": "        msg_Dbg(vd, \"Failed IDirect3DTexture9_GetSurfaceLevel: 0x%0lx\", hr);",
          "content_same": false
        },
        {
          "line": 542,
          "old_api": null,
          "new_api": "subpicture_Delete",
          "old_text": null,
          "new_text": "subpicture_Delete(subpicture)",
          "old_line_content": "}",
          "new_line_content": "        subpicture_Delete(subpicture);",
          "content_same": false
        },
        {
          "line": 544,
          "old_api": null,
          "new_api": "CommonDisplay",
          "old_text": null,
          "new_text": "CommonDisplay(vd)",
          "old_line_content": "{",
          "new_line_content": "    CommonDisplay(vd);",
          "content_same": false
        },
        {
          "line": 1570,
          "old_api": null,
          "new_api": "IDirect3DSurface9_Release",
          "old_text": null,
          "new_text": "IDirect3DSurface9_Release(destination)",
          "old_line_content": "                (LPVOID)source, hr);",
          "new_line_content": "    IDirect3DSurface9_Release(destination);",
          "content_same": false
        },
        {
          "line": 1571,
          "old_api": null,
          "new_api": "FAILED",
          "old_text": null,
          "new_text": "FAILED(hr)",
          "old_line_content": "        return VLC_EGENERIC;",
          "new_line_content": "    if (FAILED(hr)) {",
          "content_same": false
        },
        {
          "line": 548,
          "old_api": null,
          "new_api": "Direct3D9Reset",
          "old_text": null,
          "new_text": "Direct3D9Reset(vd)",
          "old_line_content": "{",
          "new_line_content": "    return Direct3D9Reset(vd);",
          "content_same": false
        },
        {
          "line": 1061,
          "old_api": null,
          "new_api": "SUCCEEDED",
          "old_text": null,
          "new_text": "SUCCEEDED(hr)",
          "old_line_content": "        */",
          "new_line_content": "    if (SUCCEEDED(hr)) {",
          "content_same": false
        },
        {
          "line": 1572,
          "old_api": null,
          "new_api": "msg_Dbg",
          "old_text": null,
          "new_text": "msg_Dbg(vd, \"Failed IDirect3DDevice9_StretchRect: source 0x%p 0x%0lx\",\n                (LPVOID)source, hr)",
          "old_line_content": "    }",
          "new_line_content": "        msg_Dbg(vd, \"Failed IDirect3DDevice9_StretchRect: source 0x%p 0x%0lx\",",
          "content_same": false
        },
        {
          "line": 1065,
          "old_api": null,
          "new_api": "IDirect3D9_CheckDeviceFormatConversion",
          "old_text": null,
          "new_text": "IDirect3D9_CheckDeviceFormatConversion(d3dobj,\n                                                    D3DADAPTER_DEFAULT,\n                                                    D3DDEVTYPE_HAL,\n                                                    src, dst)",
          "old_line_content": "                                                    src, dst);",
          "new_line_content": "        hr = IDirect3D9_CheckDeviceFormatConversion(d3dobj,",
          "content_same": false
        },
        {
          "line": 1579,
          "old_api": null,
          "new_api": "Direct3D9SetupVertices",
          "old_text": null,
          "new_text": "Direct3D9SetupVertices(region->vertex, &vd->sys->sys.rect_src, &vd->sys->sys.rect_src_clipped,\n                           &vd->sys->sys.rect_dest_clipped, 255, vd->fmt.orientation)",
          "old_line_content": "}",
          "new_line_content": "    Direct3D9SetupVertices(region->vertex, &vd->sys->sys.rect_src, &vd->sys->sys.rect_src_clipped,",
          "content_same": false
        },
        {
          "line": 1070,
          "old_api": null,
          "new_api": "SUCCEEDED",
          "old_text": null,
          "new_text": "SUCCEEDED(hr)",
          "old_line_content": "        return VLC_EGENERIC;",
          "new_line_content": "    if (!SUCCEEDED(hr)) {",
          "content_same": false
        },
        {
          "line": 560,
          "old_api": null,
          "new_api": "GetWindowPlacement",
          "old_text": null,
          "new_text": "GetWindowPlacement(sys->sys.hparent ? sys->sys.hparent : sys->sys.hwnd, &wp)",
          "old_line_content": "",
          "new_line_content": "        GetWindowPlacement(sys->sys.hparent ? sys->sys.hparent : sys->sys.hwnd, &wp);",
          "content_same": false
        },
        {
          "line": 1072,
          "old_api": null,
          "new_api": "msg_Err",
          "old_text": null,
          "new_text": "msg_Err(vd, \"Could not query adapter supported formats. (hr=0x%0lx)\", hr)",
          "old_line_content": "    return VLC_SUCCESS;",
          "new_line_content": "            msg_Err(vd, \"Could not query adapter supported formats. (hr=0x%0lx)\", hr);",
          "content_same": false
        },
        {
          "line": 1588,
          "old_api": null,
          "new_api": "IDirect3DTexture9_Release",
          "old_text": null,
          "new_text": "IDirect3DTexture9_Release(region[i].texture)",
          "old_line_content": "}",
          "new_line_content": "            IDirect3DTexture9_Release(region[i].texture);",
          "content_same": false
        },
        {
          "line": 565,
          "old_api": null,
          "new_api": "Direct3D9Close",
          "old_text": null,
          "new_text": "Direct3D9Close(vd)",
          "old_line_content": "    /* */",
          "new_line_content": "    Direct3D9Close(vd);",
          "content_same": false
        },
        {
          "line": 1590,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(region)",
          "old_line_content": "static void Direct3D9ImportSubpicture(vout_display_t *vd,",
          "new_line_content": "    free(region);",
          "content_same": false
        },
        {
          "line": 1083,
          "old_api": null,
          "new_api": "MAKEFOURCC",
          "old_text": null,
          "new_text": "MAKEFOURCC('N','V','1','2')",
          "old_line_content": "    { \"UYVY\",       D3DFMT_UYVY,    VLC_CODEC_UYVY,  0,0,0 },",
          "new_line_content": "    { \"NV12\",       MAKEFOURCC('N','V','1','2'),    VLC_CODEC_NV12,  0,0,0 },",
          "content_same": false
        },
        {
          "line": 572,
          "old_api": null,
          "new_api": "vlc_mutex_unlock",
          "old_text": null,
          "new_text": "vlc_mutex_unlock(&sys->lock)",
          "old_line_content": "    event_cfg_t cfg;",
          "new_line_content": "    vlc_mutex_unlock(&sys->lock);",
          "content_same": false
        },
        {
          "line": 1084,
          "old_api": null,
          "new_api": "MAKEFOURCC",
          "old_text": null,
          "new_text": "MAKEFOURCC('N','V','1','2')",
          "old_line_content": "    { \"YUY2\",       D3DFMT_YUY2,    VLC_CODEC_YUYV,  0,0,0 },",
          "new_line_content": "    { \"DXA9\",       MAKEFOURCC('N','V','1','2'),    VLC_CODEC_D3D9_OPAQUE,  0,0,0 },",
          "content_same": false
        },
        {
          "line": 1085,
          "old_api": null,
          "new_api": "MAKEFOURCC",
          "old_text": null,
          "new_text": "MAKEFOURCC('P','0','1','0')",
          "old_line_content": "    { \"X8R8G8B8\",   D3DFMT_X8R8G8B8,VLC_CODEC_RGB32, 0xff0000, 0x00ff00, 0x0000ff },",
          "new_line_content": "    { \"DXA9_10\",    MAKEFOURCC('P','0','1','0'),    VLC_CODEC_D3D9_OPAQUE_10B,  0,0,0 },",
          "content_same": false
        },
        {
          "line": 576,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(&cfg, 0, sizeof(cfg))",
          "old_line_content": "        cfg.x      = sys->desktop_save.win.left;",
          "new_line_content": "    memset(&cfg, 0, sizeof(cfg));",
          "content_same": false
        },
        {
          "line": 1604,
          "old_api": null,
          "new_api": "calloc",
          "old_text": null,
          "new_text": "calloc(count, sizeof(**region))",
          "old_line_content": "        return;",
          "new_line_content": "    *region    = calloc(count, sizeof(**region));",
          "content_same": false
        },
        {
          "line": 586,
          "old_api": null,
          "new_api": "EventThreadStart",
          "old_text": null,
          "new_text": "EventThreadStart(sys->sys.event, &hwnd, &cfg)",
          "old_line_content": "    }",
          "new_line_content": "    if (EventThreadStart(sys->sys.event, &hwnd, &cfg)) {",
          "content_same": false
        },
        {
          "line": 587,
          "old_api": null,
          "new_api": "msg_Err",
          "old_text": null,
          "new_text": "msg_Err(vd, \"Failed to restart event thread\")",
          "old_line_content": "    sys->sys.parent_window = hwnd.parent_window;",
          "new_line_content": "        msg_Err(vd, \"Failed to restart event thread\");",
          "content_same": false
        },
        {
          "line": 595,
          "old_api": null,
          "new_api": "SetRectEmpty",
          "old_text": null,
          "new_text": "SetRectEmpty(&sys->sys.rect_parent)",
          "old_line_content": "    video_format_t fmt;",
          "new_line_content": "    SetRectEmpty(&sys->sys.rect_parent);",
          "content_same": false
        },
        {
          "line": 599,
          "old_api": null,
          "new_api": "Direct3D9Open",
          "old_text": null,
          "new_text": "Direct3D9Open(vd, &fmt)",
          "old_line_content": "        return VLC_EGENERIC;",
          "new_line_content": "    if (Direct3D9Open(vd, &fmt)) {",
          "content_same": false
        },
        {
          "line": 600,
          "old_api": null,
          "new_api": "CommonClean",
          "old_text": null,
          "new_text": "CommonClean(vd)",
          "old_line_content": "    }",
          "new_line_content": "        CommonClean(vd);",
          "content_same": false
        },
        {
          "line": 601,
          "old_api": null,
          "new_api": "msg_Err",
          "old_text": null,
          "new_text": "msg_Err(vd, \"Failed to reopen device\")",
          "old_line_content": "    vd->fmt = fmt;",
          "new_line_content": "        msg_Err(vd, \"Failed to reopen device\");",
          "content_same": false
        },
        {
          "line": 1111,
          "old_api": null,
          "new_api": "vlc_fourcc_GetYUVFallback",
          "old_text": null,
          "new_text": "vlc_fourcc_GetYUVFallback(chroma)",
          "old_line_content": "        else",
          "new_line_content": "            list = vlc_fourcc_GetYUVFallback(chroma);",
          "content_same": false
        },
        {
          "line": 1113,
          "old_api": null,
          "new_api": "vlc_fourcc_GetRGBFallback",
          "old_text": null,
          "new_text": "vlc_fourcc_GetRGBFallback(chroma)",
          "old_line_content": "",
          "new_line_content": "            list = vlc_fourcc_GetRGBFallback(chroma);",
          "content_same": false
        },
        {
          "line": 1623,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(cache, 0, sizeof(*cache))",
          "old_line_content": "        }",
          "new_line_content": "                memset(cache, 0, sizeof(*cache));",
          "content_same": false
        },
        {
          "line": 1631,
          "old_api": null,
          "new_api": "IDirect3DDevice9_CreateTexture",
          "old_text": null,
          "new_text": "IDirect3DDevice9_CreateTexture(sys->d3ddev,\n                                                d3dr->width, d3dr->height,\n                                                1,\n                                                D3DUSAGE_DYNAMIC,\n                                                d3dr->format,\n                                                D3DPOOL_DEFAULT,\n                                                &d3dr->texture,\n                                                NULL)",
          "old_line_content": "                                                D3DUSAGE_DYNAMIC,",
          "new_line_content": "            hr = IDirect3DDevice9_CreateTexture(sys->d3ddev,",
          "content_same": false
        },
        {
          "line": 610,
          "old_api": null,
          "new_api": "vout_display_SendEventFullscreen",
          "old_text": null,
          "new_text": "vout_display_SendEventFullscreen(vd, false)",
          "old_line_content": "    } else {",
          "new_line_content": "            vout_display_SendEventFullscreen(vd, false);",
          "content_same": false
        },
        {
          "line": 612,
          "old_api": null,
          "new_api": "vout_display_SendWindowState",
          "old_text": null,
          "new_text": "vout_display_SendWindowState(vd, VOUT_WINDOW_STATE_NORMAL)",
          "old_line_content": "        if (sys->desktop_save.is_fullscreen)",
          "new_line_content": "            vout_display_SendWindowState(vd, VOUT_WINDOW_STATE_NORMAL);",
          "content_same": false
        },
        {
          "line": 1126,
          "old_api": null,
          "new_api": "Direct3D9CheckConversion",
          "old_text": null,
          "new_text": "Direct3D9CheckConversion(vd, format->format, target)",
          "old_line_content": "                    return format;",
          "new_line_content": "                if (!Direct3D9CheckConversion(vd, format->format, target)) {",
          "content_same": false
        },
        {
          "line": 1127,
          "old_api": null,
          "new_api": "msg_Dbg",
          "old_text": null,
          "new_text": "msg_Dbg(vd, \"selected surface pixel format is %s\",\n                            format->name)",
          "old_line_content": "                }",
          "new_line_content": "                    msg_Dbg(vd, \"selected surface pixel format is %s\",",
          "content_same": false
        },
        {
          "line": 616,
          "old_api": null,
          "new_api": "vout_display_SendEventFullscreen",
          "old_text": null,
          "new_text": "vout_display_SendEventFullscreen(vd, true)",
          "old_line_content": "    }",
          "new_line_content": "            vout_display_SendEventFullscreen(vd, true);",
          "content_same": false
        },
        {
          "line": 1639,
          "old_api": null,
          "new_api": "FAILED",
          "old_text": null,
          "new_text": "FAILED(hr)",
          "old_line_content": "                        d3dr->width, d3dr->height, hr);",
          "new_line_content": "            if (FAILED(hr)) {",
          "content_same": false
        },
        {
          "line": 618,
          "old_api": null,
          "new_api": "vout_display_SendWindowState",
          "old_text": null,
          "new_text": "vout_display_SendWindowState(vd, VOUT_WINDOW_STATE_ABOVE)",
          "old_line_content": "}",
          "new_line_content": "            vout_display_SendWindowState(vd, VOUT_WINDOW_STATE_ABOVE);",
          "content_same": false
        },
        {
          "line": 1641,
          "old_api": null,
          "new_api": "msg_Err",
          "old_text": null,
          "new_text": "msg_Err(vd, \"Failed to create %dx%d texture for OSD (hr=0x%0lx)\",\n                        d3dr->width, d3dr->height, hr)",
          "old_line_content": "            }",
          "new_line_content": "                msg_Err(vd, \"Failed to create %dx%d texture for OSD (hr=0x%0lx)\",",
          "content_same": false
        },
        {
          "line": 1646,
          "old_api": null,
          "new_api": "msg_Dbg",
          "old_text": null,
          "new_text": "msg_Dbg(vd, \"Created %dx%d texture for OSD\",\n                    r->fmt.i_width, r->fmt.i_height)",
          "old_line_content": "        }",
          "new_line_content": "            msg_Dbg(vd, \"Created %dx%d texture for OSD\",",
          "content_same": false
        },
        {
          "line": 1652,
          "old_api": null,
          "new_api": "IDirect3DTexture9_LockRect",
          "old_text": null,
          "new_text": "IDirect3DTexture9_LockRect(d3dr->texture, 0, &lock, NULL, 0)",
          "old_line_content": "            int       dst_pitch  = lock.Pitch;",
          "new_line_content": "        hr = IDirect3DTexture9_LockRect(d3dr->texture, 0, &lock, NULL, 0);",
          "content_same": false
        },
        {
          "line": 1653,
          "old_api": null,
          "new_api": "SUCCEEDED",
          "old_text": null,
          "new_text": "SUCCEEDED(hr)",
          "old_line_content": "            uint8_t  *src_data   = r->p_picture->p->p_pixels;",
          "new_line_content": "        if (SUCCEEDED(hr)) {",
          "content_same": false
        },
        {
          "line": 630,
          "old_api": null,
          "new_api": "ControlResetDevice",
          "old_text": null,
          "new_text": "ControlResetDevice(vd)",
          "old_line_content": "            }",
          "new_line_content": "            if (ControlResetDevice(vd)) {",
          "content_same": false
        },
        {
          "line": 631,
          "old_api": null,
          "new_api": "msg_Err",
          "old_text": null,
          "new_text": "msg_Err(vd, \"Failed to reset device\")",
          "old_line_content": "            sys->reset_device = false;",
          "new_line_content": "                msg_Err(vd, \"Failed to reset device\");",
          "content_same": false
        },
        {
          "line": 636,
          "old_api": null,
          "new_api": "ControlReopenDevice",
          "old_text": null,
          "new_text": "ControlReopenDevice(vd)",
          "old_line_content": "            }",
          "new_line_content": "            if (ControlReopenDevice(vd)) {",
          "content_same": false
        },
        {
          "line": 637,
          "old_api": null,
          "new_api": "msg_Err",
          "old_text": null,
          "new_text": "msg_Err(vd, \"Failed to reopen device\")",
          "old_line_content": "            sys->reopen_device = false;",
          "new_line_content": "                msg_Err(vd, \"Failed to reopen device\");",
          "content_same": false
        },
        {
          "line": 1661,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(dst_data, src_data, r->fmt.i_height * dst_pitch)",
          "old_line_content": "                    for (unsigned y = 0; y < r->fmt.i_height; y++) {",
          "new_line_content": "                    memcpy(dst_data, src_data, r->fmt.i_height * dst_pitch);",
          "content_same": false
        },
        {
          "line": 1663,
          "old_api": null,
          "new_api": "__MIN",
          "old_text": null,
          "new_text": "__MIN(dst_pitch, r->p_picture->p->i_pitch)",
          "old_line_content": "                    }",
          "new_line_content": "                    int copy_pitch = __MIN(dst_pitch, r->p_picture->p->i_pitch);",
          "content_same": false
        },
        {
          "line": 1152,
          "old_api": null,
          "new_api": "IDirect3DDevice9_CreateTexture",
          "old_text": null,
          "new_text": "IDirect3DDevice9_CreateTexture(d3ddev,\n                                        fmt->i_width,\n                                        fmt->i_height,\n                                        1,\n                                        D3DUSAGE_RENDERTARGET,\n                                        sys->d3dpp.BackBufferFormat,\n                                        D3DPOOL_DEFAULT,\n                                        &d3dtex,\n                                        NULL)",
          "old_line_content": "                                        1,",
          "new_line_content": "    hr = IDirect3DDevice9_CreateTexture(d3ddev,",
          "content_same": false
        },
        {
          "line": 1665,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(&dst_data[y * dst_pitch], &src_data[y * src_pitch], copy_pitch)",
          "old_line_content": "            } else {",
          "new_line_content": "                        memcpy(&dst_data[y * dst_pitch], &src_data[y * src_pitch], copy_pitch);",
          "content_same": false
        },
        {
          "line": 644,
          "old_api": null,
          "new_api": "CommonControl",
          "old_text": null,
          "new_text": "CommonControl(vd, query, args)",
          "old_line_content": "static void Manage (vout_display_t *vd)",
          "new_line_content": "        return CommonControl(vd, query, args);",
          "content_same": false
        },
        {
          "line": 1669,
          "old_api": null,
          "new_api": "__MIN",
          "old_text": null,
          "new_text": "__MIN(dst_pitch, r->p_picture->p->i_pitch)",
          "old_line_content": "                        dst_data[y * dst_pitch + x + 0] = src_data[y * src_pitch + x + 2];",
          "new_line_content": "                int copy_pitch = __MIN(dst_pitch, r->p_picture->p->i_pitch);",
          "content_same": false
        },
        {
          "line": 1161,
          "old_api": null,
          "new_api": "FAILED",
          "old_text": null,
          "new_text": "FAILED(hr)",
          "old_line_content": "    }",
          "new_line_content": "    if (FAILED(hr)) {",
          "content_same": false
        },
        {
          "line": 1162,
          "old_api": null,
          "new_api": "msg_Err",
          "old_text": null,
          "new_text": "msg_Err(vd, \"Failed to create texture. (hr=0x%lx)\", hr)",
          "old_line_content": "",
          "new_line_content": "        msg_Err(vd, \"Failed to create texture. (hr=0x%lx)\", hr);",
          "content_same": false
        },
        {
          "line": 1167,
          "old_api": null,
          "new_api": "msg_Dbg",
          "old_text": null,
          "new_text": "msg_Dbg(vd, \"Direct3D created texture: %ix%i\",\n                fmt->i_width, fmt->i_height)",
          "old_line_content": "",
          "new_line_content": "    msg_Dbg(vd, \"Direct3D created texture: %ix%i\",",
          "content_same": false
        },
        {
          "line": 1679,
          "old_api": null,
          "new_api": "IDirect3DTexture9_UnlockRect",
          "old_text": null,
          "new_text": "IDirect3DTexture9_UnlockRect(d3dr->texture, 0)",
          "old_line_content": "        } else {",
          "new_line_content": "            hr = IDirect3DTexture9_UnlockRect(d3dr->texture, 0);",
          "content_same": false
        },
        {
          "line": 657,
          "old_api": null,
          "new_api": "vlc_mutex_unlock",
          "old_text": null,
          "new_text": "vlc_mutex_unlock(&sys->lock)",
          "old_line_content": "        sys->reopen_device = true;",
          "new_line_content": "    vlc_mutex_unlock(&sys->lock);",
          "content_same": false
        },
        {
          "line": 1681,
          "old_api": null,
          "new_api": "msg_Err",
          "old_text": null,
          "new_text": "msg_Err(vd, \"Failed to unlock the texture\")",
          "old_line_content": "        }",
          "new_line_content": "                msg_Err(vd, \"Failed to unlock the texture\");",
          "content_same": false
        },
        {
          "line": 1683,
          "old_api": null,
          "new_api": "msg_Err",
          "old_text": null,
          "new_text": "msg_Err(vd, \"Failed to lock the texture\")",
          "old_line_content": "        /* Map the subpicture to sys->sys.rect_dest */",
          "new_line_content": "            msg_Err(vd, \"Failed to lock the texture\");",
          "content_same": false
        },
        {
          "line": 661,
          "old_api": null,
          "new_api": "vout_display_SendEventPicturesInvalid",
          "old_text": null,
          "new_text": "vout_display_SendEventPicturesInvalid(vd)",
          "old_line_content": "    /* Position Change */",
          "new_line_content": "        vout_display_SendEventPicturesInvalid(vd);",
          "content_same": false
        },
        {
          "line": 1175,
          "old_api": null,
          "new_api": "IDirect3DDevice9_CreateVertexBuffer",
          "old_text": null,
          "new_text": "IDirect3DDevice9_CreateVertexBuffer(d3ddev,\n                                             sizeof(CUSTOMVERTEX)*4,\n                                             D3DUSAGE_DYNAMIC|D3DUSAGE_WRITEONLY,\n                                             D3DFVF_CUSTOMVERTEX,\n                                             D3DPOOL_DEFAULT,\n                                             &d3dvtc,\n                                             NULL)",
          "old_line_content": "                                             D3DFVF_CUSTOMVERTEX,",
          "new_line_content": "    hr = IDirect3DDevice9_CreateVertexBuffer(d3ddev,",
          "content_same": false
        },
        {
          "line": 670,
          "old_api": null,
          "new_api": "GetClientRect",
          "old_text": null,
          "new_text": "GetClientRect(p_sys->sys.hvideownd, &rect)",
          "old_line_content": "",
          "new_line_content": "        GetClientRect(p_sys->sys.hvideownd, &rect);",
          "content_same": false
        },
        {
          "line": 1182,
          "old_api": null,
          "new_api": "FAILED",
          "old_text": null,
          "new_text": "FAILED(hr)",
          "old_line_content": "        return VLC_EGENERIC;",
          "new_line_content": "    if (FAILED(hr)) {",
          "content_same": false
        },
        {
          "line": 1183,
          "old_api": null,
          "new_api": "msg_Err",
          "old_text": null,
          "new_text": "msg_Err(vd, \"Failed to create vertex buffer. (hr=0x%lx)\", hr)",
          "old_line_content": "    }",
          "new_line_content": "        msg_Err(vd, \"Failed to create vertex buffer. (hr=0x%lx)\", hr);",
          "content_same": false
        },
        {
          "line": 1184,
          "old_api": null,
          "new_api": "IDirect3DTexture9_Release",
          "old_text": null,
          "new_text": "IDirect3DTexture9_Release(d3dtex)",
          "old_line_content": "",
          "new_line_content": "        IDirect3DTexture9_Release(d3dtex);",
          "content_same": false
        },
        {
          "line": 1696,
          "old_api": null,
          "new_api": "Direct3D9SetupVertices",
          "old_text": null,
          "new_text": "Direct3D9SetupVertices(d3dr->vertex, NULL, NULL,\n                              &dst, subpicture->i_alpha * r->i_alpha / 255, ORIENT_NORMAL)",
          "old_line_content": "}",
          "new_line_content": "        Direct3D9SetupVertices(d3dr->vertex, NULL, NULL,",
          "content_same": false
        },
        {
          "line": 676,
          "old_api": null,
          "new_api": "msg_Dbg",
          "old_text": null,
          "new_text": "msg_Dbg(vd, \"resizing device back buffers to (%lux%lu)\", width, height)",
          "old_line_content": "                return VLC_EGENERIC;",
          "new_line_content": "            msg_Dbg(vd, \"resizing device back buffers to (%lux%lu)\", width, height);",
          "content_same": false
        },
        {
          "line": 678,
          "old_api": null,
          "new_api": "Direct3D9ResetDevice",
          "old_text": null,
          "new_text": "Direct3D9ResetDevice(vd, width, height)",
          "old_line_content": "#endif",
          "new_line_content": "            if (VLC_SUCCESS != Direct3D9ResetDevice(vd, width, height))",
          "content_same": false
        },
        {
          "line": 1199,
          "old_api": null,
          "new_api": "IDirect3DDevice9_SetSamplerState",
          "old_text": null,
          "new_text": "IDirect3DDevice9_SetSamplerState(d3ddev, 0, D3DSAMP_ADDRESSU, D3DTADDRESS_CLAMP)",
          "old_line_content": "    // Set linear filtering quality",
          "new_line_content": "    IDirect3DDevice9_SetSamplerState(d3ddev, 0, D3DSAMP_ADDRESSU, D3DTADDRESS_CLAMP);",
          "content_same": false
        },
        {
          "line": 1200,
          "old_api": null,
          "new_api": "IDirect3DDevice9_SetSamplerState",
          "old_text": null,
          "new_text": "IDirect3DDevice9_SetSamplerState(d3ddev, 0, D3DSAMP_ADDRESSV, D3DTADDRESS_CLAMP)",
          "old_line_content": "    if (sys->d3dcaps.TextureFilterCaps & D3DPTFILTERCAPS_MINFLINEAR) {",
          "new_line_content": "    IDirect3DDevice9_SetSamplerState(d3ddev, 0, D3DSAMP_ADDRESSV, D3DTADDRESS_CLAMP);",
          "content_same": false
        },
        {
          "line": 692,
          "old_api": null,
          "new_api": "TEXT",
          "old_text": null,
          "new_text": "TEXT(\"D3dx9_%d.dll\")",
          "old_line_content": "            break;",
          "new_line_content": "        _sntprintf(filename, 16, TEXT(\"D3dx9_%d.dll\"), i);",
          "content_same": false
        },
        {
          "line": 693,
          "old_api": null,
          "new_api": "LoadLibrary",
          "old_text": null,
          "new_text": "LoadLibrary(filename)",
          "old_line_content": "    }",
          "new_line_content": "        instance = LoadLibrary(filename);",
          "content_same": false
        },
        {
          "line": 1716,
          "old_api": null,
          "new_api": "IDirect3DVertexBuffer9_Lock",
          "old_text": null,
          "new_text": "IDirect3DVertexBuffer9_Lock(d3dvtc, 0, 0, &vertex, D3DLOCK_DISCARD)",
          "old_line_content": "        return -1;",
          "new_line_content": "    hr = IDirect3DVertexBuffer9_Lock(d3dvtc, 0, 0, &vertex, D3DLOCK_DISCARD);",
          "content_same": false
        },
        {
          "line": 1717,
          "old_api": null,
          "new_api": "FAILED",
          "old_text": null,
          "new_text": "FAILED(hr)",
          "old_line_content": "    }",
          "new_line_content": "    if (FAILED(hr)) {",
          "content_same": false
        },
        {
          "line": 1208,
          "old_api": null,
          "new_api": "IDirect3DDevice9_SetSamplerState",
          "old_text": null,
          "new_text": "IDirect3DDevice9_SetSamplerState(d3ddev, 0, D3DSAMP_MINFILTER, D3DTEXF_POINT)",
          "old_line_content": "        //msg_Dbg(vd, \"Using D3DTEXF_LINEAR for magnification\");",
          "new_line_content": "        IDirect3DDevice9_SetSamplerState(d3ddev, 0, D3DSAMP_MINFILTER, D3DTEXF_POINT);",
          "content_same": false
        },
        {
          "line": 1722,
          "old_api": null,
          "new_api": "IDirect3DVertexBuffer9_Unlock",
          "old_text": null,
          "new_text": "IDirect3DVertexBuffer9_Unlock(d3dvtc)",
          "old_line_content": "        return -1;",
          "new_line_content": "    hr = IDirect3DVertexBuffer9_Unlock(d3dvtc);",
          "content_same": false
        },
        {
          "line": 1723,
          "old_api": null,
          "new_api": "FAILED",
          "old_text": null,
          "new_text": "FAILED(hr)",
          "old_line_content": "    }",
          "new_line_content": "    if (FAILED(hr)) {",
          "content_same": false
        },
        {
          "line": 1724,
          "old_api": null,
          "new_api": "msg_Dbg",
          "old_text": null,
          "new_text": "msg_Dbg(vd, \"Failed IDirect3DVertexBuffer9_Unlock: 0x%0lx\", hr)",
          "old_line_content": "",
          "new_line_content": "        msg_Dbg(vd, \"Failed IDirect3DVertexBuffer9_Unlock: 0x%0lx\", hr);",
          "content_same": false
        },
        {
          "line": 1215,
          "old_api": null,
          "new_api": "IDirect3DDevice9_SetSamplerState",
          "old_text": null,
          "new_text": "IDirect3DDevice9_SetSamplerState(d3ddev, 0, D3DSAMP_MAGFILTER, D3DTEXF_POINT)",
          "old_line_content": "    // set maximum ambient light",
          "new_line_content": "        IDirect3DDevice9_SetSamplerState(d3ddev, 0, D3DSAMP_MAGFILTER, D3DTEXF_POINT);",
          "content_same": false
        },
        {
          "line": 707,
          "old_api": null,
          "new_api": "TEXT",
          "old_text": null,
          "new_text": "TEXT(\"D3D9.DLL\")",
          "old_line_content": "        return VLC_EGENERIC;",
          "new_line_content": "    sys->hd3d9_dll = LoadLibrary(TEXT(\"D3D9.DLL\"));",
          "content_same": false
        },
        {
          "line": 1732,
          "old_api": null,
          "new_api": "IDirect3DDevice9_SetTexture",
          "old_text": null,
          "new_text": "IDirect3DDevice9_SetTexture(d3ddev, 0, (LPDIRECT3DBASETEXTURE9)d3dtex)",
          "old_line_content": "        return -1;",
          "new_line_content": "    hr = IDirect3DDevice9_SetTexture(d3ddev, 0, (LPDIRECT3DBASETEXTURE9)d3dtex);",
          "content_same": false
        },
        {
          "line": 709,
          "old_api": null,
          "new_api": "msg_Warn",
          "old_text": null,
          "new_text": "msg_Warn(vd, \"cannot load d3d9.dll, aborting\")",
          "old_line_content": "",
          "new_line_content": "        msg_Warn(vd, \"cannot load d3d9.dll, aborting\");",
          "content_same": false
        },
        {
          "line": 1733,
          "old_api": null,
          "new_api": "FAILED",
          "old_text": null,
          "new_text": "FAILED(hr)",
          "old_line_content": "    }",
          "new_line_content": "    if (FAILED(hr)) {",
          "content_same": false
        },
        {
          "line": 1734,
          "old_api": null,
          "new_api": "msg_Dbg",
          "old_text": null,
          "new_text": "msg_Dbg(vd, \"Failed IDirect3DDevice9_SetTexture: 0x%0lx\", hr)",
          "old_line_content": "",
          "new_line_content": "        msg_Dbg(vd, \"Failed IDirect3DDevice9_SetTexture: 0x%0lx\", hr);",
          "content_same": false
        },
        {
          "line": 715,
          "old_api": null,
          "new_api": "GetProcAddress",
          "old_text": null,
          "new_text": "GetProcAddress(sys->hd3d9_dll, \"Direct3DCreate9\")",
          "old_line_content": "        return VLC_EGENERIC;",
          "new_line_content": "        (void *)GetProcAddress(sys->hd3d9_dll, \"Direct3DCreate9\");",
          "content_same": false
        },
        {
          "line": 717,
          "old_api": null,
          "new_api": "msg_Err",
          "old_text": null,
          "new_text": "msg_Err(vd, \"Cannot locate reference to Direct3DCreate9 ABI in DLL\")",
          "old_line_content": "",
          "new_line_content": "        msg_Err(vd, \"Cannot locate reference to Direct3DCreate9 ABI in DLL\");",
          "content_same": false
        },
        {
          "line": 1743,
          "old_api": null,
          "new_api": "IDirect3DDevice9_SetPixelShaderConstantF",
          "old_text": null,
          "new_text": "IDirect3DDevice9_SetPixelShaderConstantF(d3ddev, 0, shader_data, 1)",
          "old_line_content": "                return -1;",
          "new_line_content": "            hr = IDirect3DDevice9_SetPixelShaderConstantF(d3ddev, 0, shader_data, 1);",
          "content_same": false
        },
        {
          "line": 1744,
          "old_api": null,
          "new_api": "FAILED",
          "old_text": null,
          "new_text": "FAILED(hr)",
          "old_line_content": "            }",
          "new_line_content": "            if (FAILED(hr)) {",
          "content_same": false
        },
        {
          "line": 1745,
          "old_api": null,
          "new_api": "msg_Dbg",
          "old_text": null,
          "new_text": "msg_Dbg(vd, \"Failed IDirect3DDevice9_SetPixelShaderConstantF: 0x%0lx\", hr)",
          "old_line_content": "        }",
          "new_line_content": "                msg_Dbg(vd, \"Failed IDirect3DDevice9_SetPixelShaderConstantF: 0x%0lx\", hr);",
          "content_same": false
        },
        {
          "line": 723,
          "old_api": null,
          "new_api": "GetProcAddress",
          "old_text": null,
          "new_text": "GetProcAddress(sys->hd3d9_dll, \"Direct3DCreate9Ex\")",
          "old_line_content": "    if (OurDirect3DCreate9Ex) {",
          "new_line_content": "        (void *)GetProcAddress(sys->hd3d9_dll, \"Direct3DCreate9Ex\");",
          "content_same": false
        },
        {
          "line": 1237,
          "old_api": null,
          "new_api": "IDirect3DDevice9_SetRenderState",
          "old_text": null,
          "new_text": "IDirect3DDevice9_SetRenderState(d3ddev, D3DRS_ALPHABLENDENABLE, FALSE)",
          "old_line_content": "",
          "new_line_content": "    IDirect3DDevice9_SetRenderState(d3ddev, D3DRS_ALPHABLENDENABLE, FALSE);",
          "content_same": false
        },
        {
          "line": 1238,
          "old_api": null,
          "new_api": "IDirect3DDevice9_SetRenderState",
          "old_text": null,
          "new_text": "IDirect3DDevice9_SetRenderState(d3ddev, D3DRS_SRCBLEND,D3DBLEND_SRCALPHA)",
          "old_line_content": "    if (sys->d3dcaps.AlphaCmpCaps & D3DPCMPCAPS_GREATER) {",
          "new_line_content": "    IDirect3DDevice9_SetRenderState(d3ddev, D3DRS_SRCBLEND,D3DBLEND_SRCALPHA);",
          "content_same": false
        },
        {
          "line": 1750,
          "old_api": null,
          "new_api": "IDirect3DDevice9_SetPixelShader",
          "old_text": null,
          "new_text": "IDirect3DDevice9_SetPixelShader(d3ddev, NULL)",
          "old_line_content": "            return -1;",
          "new_line_content": "            hr = IDirect3DDevice9_SetPixelShader(d3ddev, NULL);",
          "content_same": false
        },
        {
          "line": 728,
          "old_api": null,
          "new_api": "OurDirect3DCreate9Ex",
          "old_text": null,
          "new_text": "OurDirect3DCreate9Ex(D3D_SDK_VERSION, &d3d9exobj)",
          "old_line_content": "            sys->d3dobj = (LPDIRECT3D9)d3d9exobj;",
          "new_line_content": "        HRESULT hr = OurDirect3DCreate9Ex(D3D_SDK_VERSION, &d3d9exobj);",
          "content_same": false
        },
        {
          "line": 729,
          "old_api": null,
          "new_api": "FAILED",
          "old_text": null,
          "new_text": "FAILED(hr)",
          "old_line_content": "            sys->use_d3d9ex = true;",
          "new_line_content": "        if(!FAILED(hr)) {",
          "content_same": false
        },
        {
          "line": 730,
          "old_api": null,
          "new_api": "msg_Dbg",
          "old_text": null,
          "new_text": "msg_Dbg(vd, \"Using Direct3D9 Extended API!\")",
          "old_line_content": "        }",
          "new_line_content": "            msg_Dbg(vd, \"Using Direct3D9 Extended API!\");",
          "content_same": false
        },
        {
          "line": 1242,
          "old_api": null,
          "new_api": "IDirect3DDevice9_SetRenderState",
          "old_text": null,
          "new_text": "IDirect3DDevice9_SetRenderState(d3ddev, D3DRS_ALPHATESTENABLE,TRUE)",
          "old_line_content": "    }",
          "new_line_content": "        IDirect3DDevice9_SetRenderState(d3ddev, D3DRS_ALPHATESTENABLE,TRUE);",
          "content_same": false
        },
        {
          "line": 1243,
          "old_api": null,
          "new_api": "IDirect3DDevice9_SetRenderState",
          "old_text": null,
          "new_text": "IDirect3DDevice9_SetRenderState(d3ddev, D3DRS_ALPHAREF, 0x00)",
          "old_line_content": "",
          "new_line_content": "        IDirect3DDevice9_SetRenderState(d3ddev, D3DRS_ALPHAREF, 0x00);",
          "content_same": false
        },
        {
          "line": 1244,
          "old_api": null,
          "new_api": "IDirect3DDevice9_SetRenderState",
          "old_text": null,
          "new_text": "IDirect3DDevice9_SetRenderState(d3ddev, D3DRS_ALPHAFUNC,D3DCMP_GREATER)",
          "old_line_content": "    // Set texture states",
          "new_line_content": "        IDirect3DDevice9_SetRenderState(d3ddev, D3DRS_ALPHAFUNC,D3DCMP_GREATER);",
          "content_same": false
        },
        {
          "line": 1751,
          "old_api": null,
          "new_api": "FAILED",
          "old_text": null,
          "new_text": "FAILED(hr)",
          "old_line_content": "        }",
          "new_line_content": "        if (FAILED(hr)) {",
          "content_same": false
        },
        {
          "line": 1752,
          "old_api": null,
          "new_api": "msg_Dbg",
          "old_text": null,
          "new_text": "msg_Dbg(vd, \"Failed IDirect3DDevice9_SetPixelShader: 0x%0lx\", hr)",
          "old_line_content": "    }",
          "new_line_content": "            msg_Dbg(vd, \"Failed IDirect3DDevice9_SetPixelShader: 0x%0lx\", hr);",
          "content_same": false
        },
        {
          "line": 1758,
          "old_api": null,
          "new_api": "IDirect3DDevice9_SetStreamSource",
          "old_text": null,
          "new_text": "IDirect3DDevice9_SetStreamSource(d3ddev, 0, d3dvtc, 0, sizeof(CUSTOMVERTEX))",
          "old_line_content": "        return -1;",
          "new_line_content": "    hr = IDirect3DDevice9_SetStreamSource(d3ddev, 0, d3dvtc, 0, sizeof(CUSTOMVERTEX));",
          "content_same": false
        },
        {
          "line": 1759,
          "old_api": null,
          "new_api": "FAILED",
          "old_text": null,
          "new_text": "FAILED(hr)",
          "old_line_content": "    }",
          "new_line_content": "    if (FAILED(hr)) {",
          "content_same": false
        },
        {
          "line": 738,
          "old_api": null,
          "new_api": "OurDirect3DCreate9",
          "old_text": null,
          "new_text": "OurDirect3DCreate9(D3D_SDK_VERSION)",
          "old_line_content": "            return VLC_EGENERIC;",
          "new_line_content": "        LPDIRECT3D9 d3dobj = OurDirect3DCreate9(D3D_SDK_VERSION);",
          "content_same": false
        },
        {
          "line": 1251,
          "old_api": null,
          "new_api": "IDirect3DDevice9_SetTextureStageState",
          "old_text": null,
          "new_text": "IDirect3DDevice9_SetTextureStageState(d3ddev, 0, D3DTSS_ALPHAOP, D3DTOP_MODULATE)",
          "old_line_content": "",
          "new_line_content": "    IDirect3DDevice9_SetTextureStageState(d3ddev, 0, D3DTSS_ALPHAOP, D3DTOP_MODULATE);",
          "content_same": false
        },
        {
          "line": 740,
          "old_api": null,
          "new_api": "msg_Err",
          "old_text": null,
          "new_text": "msg_Err(vd, \"Could not create Direct3D9 instance.\")",
          "old_line_content": "        sys->d3dobj = d3dobj;",
          "new_line_content": "            msg_Err(vd, \"Could not create Direct3D9 instance.\");",
          "content_same": false
        },
        {
          "line": 1253,
          "old_api": null,
          "new_api": "IDirect3DDevice9_SetTextureStageState",
          "old_text": null,
          "new_text": "IDirect3DDevice9_SetTextureStageState(d3ddev, 0, D3DTSS_ALPHAARG2,D3DTA_DIFFUSE)",
          "old_line_content": "",
          "new_line_content": "    IDirect3DDevice9_SetTextureStageState(d3ddev, 0, D3DTSS_ALPHAARG2,D3DTA_DIFFUSE);",
          "content_same": false
        },
        {
          "line": 1760,
          "old_api": null,
          "new_api": "msg_Dbg",
          "old_text": null,
          "new_text": "msg_Dbg(vd, \"Failed IDirect3DDevice9_SetStreamSource: 0x%0lx\", hr)",
          "old_line_content": "",
          "new_line_content": "        msg_Dbg(vd, \"Failed IDirect3DDevice9_SetStreamSource: 0x%0lx\", hr);",
          "content_same": false
        },
        {
          "line": 1255,
          "old_api": null,
          "new_api": "msg_Dbg",
          "old_text": null,
          "new_text": "msg_Dbg(vd, \"Direct3D9 scene created successfully\")",
          "old_line_content": "}",
          "new_line_content": "    msg_Dbg(vd, \"Direct3D9 scene created successfully\");",
          "content_same": false
        },
        {
          "line": 1765,
          "old_api": null,
          "new_api": "IDirect3DDevice9_SetFVF",
          "old_text": null,
          "new_text": "IDirect3DDevice9_SetFVF(d3ddev, D3DFVF_CUSTOMVERTEX)",
          "old_line_content": "        return -1;",
          "new_line_content": "    hr = IDirect3DDevice9_SetFVF(d3ddev, D3DFVF_CUSTOMVERTEX);",
          "content_same": false
        },
        {
          "line": 1766,
          "old_api": null,
          "new_api": "FAILED",
          "old_text": null,
          "new_text": "FAILED(hr)",
          "old_line_content": "    }",
          "new_line_content": "    if (FAILED(hr)) {",
          "content_same": false
        },
        {
          "line": 746,
          "old_api": null,
          "new_api": "Direct3D9LoadShaderLibrary",
          "old_text": null,
          "new_text": "Direct3D9LoadShaderLibrary()",
          "old_line_content": "",
          "new_line_content": "    sys->hd3d9x_dll = Direct3D9LoadShaderLibrary();",
          "content_same": false
        },
        {
          "line": 1767,
          "old_api": null,
          "new_api": "msg_Dbg",
          "old_text": null,
          "new_text": "msg_Dbg(vd, \"Failed IDirect3DDevice9_SetFVF: 0x%0lx\", hr)",
          "old_line_content": "",
          "new_line_content": "        msg_Dbg(vd, \"Failed IDirect3DDevice9_SetFVF: 0x%0lx\", hr);",
          "content_same": false
        },
        {
          "line": 748,
          "old_api": null,
          "new_api": "msg_Warn",
          "old_text": null,
          "new_text": "msg_Warn(vd, \"cannot load Direct3D9 Shader Library; HLSL pixel shading will be disabled.\")",
          "old_line_content": "    ** Get device capabilities",
          "new_line_content": "        msg_Warn(vd, \"cannot load Direct3D9 Shader Library; HLSL pixel shading will be disabled.\");",
          "content_same": false
        },
        {
          "line": 1772,
          "old_api": null,
          "new_api": "IDirect3DDevice9_DrawPrimitive",
          "old_text": null,
          "new_text": "IDirect3DDevice9_DrawPrimitive(d3ddev, D3DPT_TRIANGLEFAN, 0, 2)",
          "old_line_content": "        return -1;",
          "new_line_content": "    hr = IDirect3DDevice9_DrawPrimitive(d3ddev, D3DPT_TRIANGLEFAN, 0, 2);",
          "content_same": false
        },
        {
          "line": 1773,
          "old_api": null,
          "new_api": "FAILED",
          "old_text": null,
          "new_text": "FAILED(hr)",
          "old_line_content": "    }",
          "new_line_content": "    if (FAILED(hr)) {",
          "content_same": false
        },
        {
          "line": 1774,
          "old_api": null,
          "new_api": "msg_Dbg",
          "old_text": null,
          "new_text": "msg_Dbg(vd, \"Failed IDirect3DDevice9_DrawPrimitive: 0x%0lx\", hr)",
          "old_line_content": "    return 0;",
          "new_line_content": "        msg_Dbg(vd, \"Failed IDirect3DDevice9_DrawPrimitive: 0x%0lx\", hr);",
          "content_same": false
        },
        {
          "line": 754,
          "old_api": null,
          "new_api": "IDirect3D9_GetDeviceCaps",
          "old_text": null,
          "new_text": "IDirect3D9_GetDeviceCaps(sys->d3dobj, D3DADAPTER_DEFAULT, D3DDEVTYPE_HAL, &sys->d3dcaps)",
          "old_line_content": "       return VLC_EGENERIC;",
          "new_line_content": "    HRESULT hr = IDirect3D9_GetDeviceCaps(sys->d3dobj, D3DADAPTER_DEFAULT, D3DDEVTYPE_HAL, &sys->d3dcaps);",
          "content_same": false
        },
        {
          "line": 755,
          "old_api": null,
          "new_api": "FAILED",
          "old_text": null,
          "new_text": "FAILED(hr)",
          "old_line_content": "    }",
          "new_line_content": "    if (FAILED(hr)) {",
          "content_same": false
        },
        {
          "line": 756,
          "old_api": null,
          "new_api": "msg_Err",
          "old_text": null,
          "new_text": "msg_Err(vd, \"Could not read adapter capabilities. (hr=0x%0lx)\", hr)",
          "old_line_content": "",
          "new_line_content": "       msg_Err(vd, \"Could not read adapter capabilities. (hr=0x%0lx)\", hr);",
          "content_same": false
        },
        {
          "line": 1267,
          "old_api": null,
          "new_api": "Direct3D9DeleteRegions",
          "old_text": null,
          "new_text": "Direct3D9DeleteRegions(sys->d3dregion_count, sys->d3dregion)",
          "old_line_content": "    if (d3dvtc)",
          "new_line_content": "    Direct3D9DeleteRegions(sys->d3dregion_count, sys->d3dregion);",
          "content_same": false
        },
        {
          "line": 1271,
          "old_api": null,
          "new_api": "IDirect3DVertexBuffer9_Release",
          "old_text": null,
          "new_text": "IDirect3DVertexBuffer9_Release(d3dvtc)",
          "old_line_content": "    if (d3dtex)",
          "new_line_content": "        IDirect3DVertexBuffer9_Release(d3dvtc);",
          "content_same": false
        },
        {
          "line": 1275,
          "old_api": null,
          "new_api": "IDirect3DTexture9_Release",
          "old_text": null,
          "new_text": "IDirect3DTexture9_Release(d3dtex)",
          "old_line_content": "    sys->d3dtex = NULL;",
          "new_line_content": "        IDirect3DTexture9_Release(d3dtex);",
          "content_same": false
        },
        {
          "line": 764,
          "old_api": null,
          "new_api": "msg_Err",
          "old_text": null,
          "new_text": "msg_Err(vd, \"Device does not support stretching from textures.\")",
          "old_line_content": "",
          "new_line_content": "        msg_Err(vd, \"Device does not support stretching from textures.\");",
          "content_same": false
        },
        {
          "line": 771,
          "old_api": null,
          "new_api": "msg_Err",
          "old_text": null,
          "new_text": "msg_Err(vd, \"Textures too large %ux%u max possible: %ux%u\",\n                vd->fmt.i_width, vd->fmt.i_height,\n                (unsigned) sys->d3dcaps.MaxTextureWidth,\n                (unsigned) sys->d3dcaps.MaxTextureHeight)",
          "old_line_content": "                (unsigned) sys->d3dcaps.MaxTextureHeight);",
          "new_line_content": "        msg_Err(vd, \"Textures too large %ux%u max possible: %ux%u\",",
          "content_same": false
        },
        {
          "line": 1283,
          "old_api": null,
          "new_api": "msg_Dbg",
          "old_text": null,
          "new_text": "msg_Dbg(vd, \"Direct3D9 scene released successfully\")",
          "old_line_content": "static int Direct3D9CompileShader(vout_display_t *vd, const char *shader_source, size_t source_length)",
          "new_line_content": "    msg_Dbg(vd, \"Direct3D9 scene released successfully\");",
          "content_same": false
        },
        {
          "line": 1798,
          "old_api": null,
          "new_api": "D3DCOLOR_XRGB",
          "old_text": null,
          "new_text": "D3DCOLOR_XRGB(0, 0, 0)",
          "old_line_content": "            return;",
          "new_line_content": "                                  D3DCOLOR_XRGB(0, 0, 0), 1.0f, 0);",
          "content_same": false
        },
        {
          "line": 1799,
          "old_api": null,
          "new_api": "FAILED",
          "old_text": null,
          "new_text": "FAILED(hr)",
          "old_line_content": "        }",
          "new_line_content": "        if (FAILED(hr)) {",
          "content_same": false
        },
        {
          "line": 1800,
          "old_api": null,
          "new_api": "msg_Dbg",
          "old_text": null,
          "new_text": "msg_Dbg(vd, \"Failed IDirect3DDevice9_Clear: 0x%0lx\", hr)",
          "old_line_content": "        sys->clear_scene = false;",
          "new_line_content": "            msg_Dbg(vd, \"Failed IDirect3DDevice9_Clear: 0x%0lx\", hr);",
          "content_same": false
        },
        {
          "line": 1807,
          "old_api": null,
          "new_api": "IDirect3DDevice9_BeginScene",
          "old_text": null,
          "new_text": "IDirect3DDevice9_BeginScene(d3ddev)",
          "old_line_content": "        return;",
          "new_line_content": "    hr = IDirect3DDevice9_BeginScene(d3ddev);",
          "content_same": false
        },
        {
          "line": 1808,
          "old_api": null,
          "new_api": "FAILED",
          "old_text": null,
          "new_text": "FAILED(hr)",
          "old_line_content": "    }",
          "new_line_content": "    if (FAILED(hr)) {",
          "content_same": false
        },
        {
          "line": 1809,
          "old_api": null,
          "new_api": "msg_Dbg",
          "old_text": null,
          "new_text": "msg_Dbg(vd, \"Failed IDirect3DDevice9_BeginScene: 0x%0lx\", hr)",
          "old_line_content": "",
          "new_line_content": "        msg_Dbg(vd, \"Failed IDirect3DDevice9_BeginScene: 0x%0lx\", hr);",
          "content_same": false
        },
        {
          "line": 789,
          "old_api": null,
          "new_api": "IDirect3D9_Release",
          "old_text": null,
          "new_text": "IDirect3D9_Release(sys->d3dobj)",
          "old_line_content": "    if (sys->hd3d9x_dll)",
          "new_line_content": "       IDirect3D9_Release(sys->d3dobj);",
          "content_same": false
        },
        {
          "line": 791,
          "old_api": null,
          "new_api": "FreeLibrary",
          "old_text": null,
          "new_text": "FreeLibrary(sys->hd3d9_dll)",
          "old_line_content": "",
          "new_line_content": "        FreeLibrary(sys->hd3d9_dll);",
          "content_same": false
        },
        {
          "line": 1304,
          "old_api": null,
          "new_api": "msg_Warn",
          "old_text": null,
          "new_text": "msg_Warn(vd, \"Cannot locate reference to D3DXCompileShader; pixel shading will be disabled\")",
          "old_line_content": "",
          "new_line_content": "        msg_Warn(vd, \"Cannot locate reference to D3DXCompileShader; pixel shading will be disabled\");",
          "content_same": false
        },
        {
          "line": 793,
          "old_api": null,
          "new_api": "FreeLibrary",
          "old_text": null,
          "new_text": "FreeLibrary(sys->hd3d9x_dll)",
          "old_line_content": "    sys->hd3d9_dll = NULL;",
          "new_line_content": "        FreeLibrary(sys->hd3d9x_dll);",
          "content_same": false
        },
        {
          "line": 1816,
          "old_api": null,
          "new_api": "IDirect3DDevice9_SetRenderState",
          "old_text": null,
          "new_text": "IDirect3DDevice9_SetRenderState(d3ddev, D3DRS_ALPHABLENDENABLE, TRUE)",
          "old_line_content": "        if (r->texture)",
          "new_line_content": "        IDirect3DDevice9_SetRenderState(d3ddev, D3DRS_ALPHABLENDENABLE, TRUE);",
          "content_same": false
        },
        {
          "line": 1826,
          "old_api": null,
          "new_api": "IDirect3DDevice9_EndScene",
          "old_text": null,
          "new_text": "IDirect3DDevice9_EndScene(d3ddev)",
          "old_line_content": "        return;",
          "new_line_content": "    hr = IDirect3DDevice9_EndScene(d3ddev);",
          "content_same": false
        },
        {
          "line": 1827,
          "old_api": null,
          "new_api": "FAILED",
          "old_text": null,
          "new_text": "FAILED(hr)",
          "old_line_content": "    }",
          "new_line_content": "    if (FAILED(hr)) {",
          "content_same": false
        },
        {
          "line": 1828,
          "old_api": null,
          "new_api": "msg_Dbg",
          "old_text": null,
          "new_text": "msg_Dbg(vd, \"Failed IDirect3DDevice9_EndScene: 0x%0lx\", hr)",
          "old_line_content": "}",
          "new_line_content": "        msg_Dbg(vd, \"Failed IDirect3DDevice9_EndScene: 0x%0lx\", hr);",
          "content_same": false
        },
        {
          "line": 1318,
          "old_api": null,
          "new_api": "ID3DXBuffer_GetBufferPointer",
          "old_text": null,
          "new_text": "ID3DXBuffer_GetBufferPointer(error_msgs)",
          "old_line_content": "        return VLC_EGENERIC;",
          "new_line_content": "            msg_Warn(vd, \"HLSL Compilation Error: %s\", (char*)ID3DXBuffer_GetBufferPointer(error_msgs));",
          "content_same": false
        },
        {
          "line": 1319,
          "old_api": null,
          "new_api": "ID3DXBuffer_Release",
          "old_text": null,
          "new_text": "ID3DXBuffer_Release(error_msgs)",
          "old_line_content": "    }",
          "new_line_content": "            ID3DXBuffer_Release(error_msgs);",
          "content_same": false
        },
        {
          "line": 1324,
          "old_api": null,
          "new_api": "IDirect3DDevice9_CreatePixelShader",
          "old_text": null,
          "new_text": "IDirect3DDevice9_CreatePixelShader(sys->d3ddev,\n            ID3DXBuffer_GetBufferPointer(compiled_shader),\n            &sys->d3dx_shader)",
          "old_line_content": "",
          "new_line_content": "    hr = IDirect3DDevice9_CreatePixelShader(sys->d3ddev,",
          "content_same": false
        },
        {
          "line": 1325,
          "old_api": null,
          "new_api": "ID3DXBuffer_GetBufferPointer",
          "old_text": null,
          "new_text": "ID3DXBuffer_GetBufferPointer(compiled_shader)",
          "old_line_content": "    if (compiled_shader)",
          "new_line_content": "            ID3DXBuffer_GetBufferPointer(compiled_shader),",
          "content_same": false
        },
        {
          "line": 816,
          "old_api": null,
          "new_api": "FAILED",
          "old_text": null,
          "new_text": "FAILED(hr)",
          "old_line_content": "    }",
          "new_line_content": "    if (FAILED(hr)) {",
          "content_same": false
        },
        {
          "line": 817,
          "old_api": null,
          "new_api": "msg_Err",
          "old_text": null,
          "new_text": "msg_Err(vd, \"Could not read adapter display mode. (hr=0x%0lx)\", hr)",
          "old_line_content": "",
          "new_line_content": "       msg_Err(vd, \"Could not read adapter display mode. (hr=0x%0lx)\", hr);",
          "content_same": false
        },
        {
          "line": 1329,
          "old_api": null,
          "new_api": "ID3DXBuffer_Release",
          "old_text": null,
          "new_text": "ID3DXBuffer_Release(compiled_shader)",
          "old_line_content": "",
          "new_line_content": "        ID3DXBuffer_Release(compiled_shader);",
          "content_same": false
        },
        {
          "line": 1842,
          "old_api": null,
          "new_api": "VLC_UNUSED",
          "old_text": null,
          "new_text": "VLC_UNUSED(psz_cmd)",
          "old_line_content": "",
          "new_line_content": "    VLC_UNUSED(psz_cmd);",
          "content_same": false
        },
        {
          "line": 1844,
          "old_api": null,
          "new_api": "VLC_UNUSED",
          "old_text": null,
          "new_text": "VLC_UNUSED(p_data)",
          "old_line_content": "    const bool ch_desktop = !sys->desktop_requested != !newval.b_bool;",
          "new_line_content": "    VLC_UNUSED(p_data);",
          "content_same": false
        },
        {
          "line": 1333,
          "old_api": null,
          "new_api": "FAILED",
          "old_text": null,
          "new_text": "FAILED(hr)",
          "old_line_content": "    }",
          "new_line_content": "    if (FAILED(hr)) {",
          "content_same": false
        },
        {
          "line": 1334,
          "old_api": null,
          "new_api": "msg_Warn",
          "old_text": null,
          "new_text": "msg_Warn(vd, \"IDirect3DDevice9_CreatePixelShader error (hr=0x%0lx)\", hr)",
          "old_line_content": "    return VLC_SUCCESS;",
          "new_line_content": "        msg_Warn(vd, \"IDirect3DDevice9_CreatePixelShader error (hr=0x%0lx)\", hr);",
          "content_same": false
        },
        {
          "line": 823,
          "old_api": null,
          "new_api": "ZeroMemory",
          "old_text": null,
          "new_text": "ZeroMemory(d3dpp, sizeof(D3DPRESENT_PARAMETERS))",
          "old_line_content": "    d3dpp->hDeviceWindow          = vd->sys->sys.hvideownd;",
          "new_line_content": "    ZeroMemory(d3dpp, sizeof(D3DPRESENT_PARAMETERS));",
          "content_same": false
        },
        {
          "line": 1846,
          "old_api": null,
          "new_api": "vlc_mutex_lock",
          "old_text": null,
          "new_text": "vlc_mutex_lock(&sys->lock)",
          "old_line_content": "    sys->desktop_requested = newval.b_bool;",
          "new_line_content": "    vlc_mutex_lock(&sys->lock);",
          "content_same": false
        },
        {
          "line": 1850,
          "old_api": null,
          "new_api": "vlc_mutex_unlock",
          "old_text": null,
          "new_text": "vlc_mutex_unlock(&sys->lock)",
          "old_line_content": "",
          "new_line_content": "    vlc_mutex_unlock(&sys->lock);",
          "content_same": false
        },
        {
          "line": 827,
          "old_api": null,
          "new_api": "GetSystemMetrics",
          "old_text": null,
          "new_text": "GetSystemMetrics(SM_CXVIRTUALSCREEN)",
          "old_line_content": "                                          d3ddm.Height);",
          "new_line_content": "    d3dpp->BackBufferWidth        = __MAX((unsigned int)GetSystemMetrics(SM_CXVIRTUALSCREEN),",
          "content_same": false
        },
        {
          "line": 829,
          "old_api": null,
          "new_api": "GetSystemMetrics",
          "old_text": null,
          "new_text": "GetSystemMetrics(SM_CYVIRTUALSCREEN)",
          "old_line_content": "    d3dpp->MultiSampleType        = D3DMULTISAMPLE_NONE;",
          "new_line_content": "    d3dpp->BackBufferHeight       = __MAX((unsigned int)GetSystemMetrics(SM_CYVIRTUALSCREEN),",
          "content_same": false
        },
        {
          "line": 1350,
          "old_api": null,
          "new_api": "var_InheritString",
          "old_text": null,
          "new_text": "var_InheritString(vd, \"direct3d9-shader\")",
          "old_line_content": "",
          "new_line_content": "    char *selected_shader = var_InheritString(vd, \"direct3d9-shader\");",
          "content_same": false
        },
        {
          "line": 1867,
          "old_api": null,
          "new_api": "strdup",
          "old_text": null,
          "new_text": "strdup(builtin_shaders[i].name)",
          "old_line_content": "    }",
          "new_line_content": "        ctx->values[ctx->count] = strdup(builtin_shaders[i].name);",
          "content_same": false
        },
        {
          "line": 1359,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(selected_shader, builtin_shaders[i].name)",
          "old_line_content": "        }",
          "new_line_content": "        if (!strcmp(selected_shader, builtin_shaders[i].name)) {",
          "content_same": false
        },
        {
          "line": 1871,
          "old_api": null,
          "new_api": "strdup",
          "old_text": null,
          "new_text": "strdup(SELECTED_SHADER_FILE)",
          "old_line_content": "}",
          "new_line_content": "    ctx->values[ctx->count] = strdup(SELECTED_SHADER_FILE);",
          "content_same": false
        },
        {
          "line": 1872,
          "old_api": null,
          "new_api": "strdup",
          "old_text": null,
          "new_text": "strdup(SELECTED_SHADER_FILE)",
          "old_line_content": "",
          "new_line_content": "    ctx->descs[ctx->count] = strdup(SELECTED_SHADER_FILE);",
          "content_same": false
        },
        {
          "line": 1367,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(shader_source_builtin)",
          "old_line_content": "    } else {",
          "new_line_content": "        int err = Direct3D9CompileShader(vd, shader_source_builtin, strlen(shader_source_builtin));",
          "content_same": false
        },
        {
          "line": 1880,
          "old_api": null,
          "new_api": "VLC_UNUSED",
          "old_text": null,
          "new_text": "VLC_UNUSED(object)",
          "old_line_content": "    enum_context_t ctx = { NULL, NULL, 0 };",
          "new_line_content": "    VLC_UNUSED(object);",
          "content_same": false
        },
        {
          "line": 1881,
          "old_api": null,
          "new_api": "VLC_UNUSED",
          "old_text": null,
          "new_text": "VLC_UNUSED(name)",
          "old_line_content": "",
          "new_line_content": "    VLC_UNUSED(name);",
          "content_same": false
        },
        {
          "line": 860,
          "old_api": null,
          "new_api": "Direct3D9FillPresentationParameters",
          "old_text": null,
          "new_text": "Direct3D9FillPresentationParameters(vd)",
          "old_line_content": "",
          "new_line_content": "    if (Direct3D9FillPresentationParameters(vd))",
          "content_same": false
        },
        {
          "line": 1885,
          "old_api": null,
          "new_api": "ListShaders",
          "old_text": null,
          "new_text": "ListShaders(&ctx)",
          "old_line_content": "    *descs = ctx.descs;",
          "new_line_content": "    ListShaders(&ctx);",
          "content_same": false
        },
        {
          "line": 1377,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(filepath)",
          "old_line_content": "        /* Open file, find its size with fseek/ftell and read its content in a buffer. */",
          "new_line_content": "            free(filepath);",
          "content_same": false
        },
        {
          "line": 872,
          "old_api": null,
          "new_api": "IDirect3D9_GetAdapterIdentifier",
          "old_text": null,
          "new_text": "IDirect3D9_GetAdapterIdentifier(d3dobj,Adapter,0,&Identifier)",
          "old_line_content": "            DeviceType = D3DDEVTYPE_REF;",
          "new_line_content": "        HRESULT Res = IDirect3D9_GetAdapterIdentifier(d3dobj,Adapter,0,&Identifier);",
          "content_same": false
        },
        {
          "line": 873,
          "old_api": null,
          "new_api": "strstr",
          "old_text": null,
          "new_text": "strstr(Identifier.Description,\"PerfHUD\")",
          "old_line_content": "            break;",
          "new_line_content": "        if (SUCCEEDED(Res) && strstr(Identifier.Description,\"PerfHUD\") != 0) {",
          "content_same": false
        },
        {
          "line": 1390,
          "old_api": null,
          "new_api": "rewind",
          "old_text": null,
          "new_text": "rewind(fs)",
          "old_line_content": "            goto error;",
          "new_line_content": "        rewind(fs);",
          "content_same": false
        },
        {
          "line": 884,
          "old_api": null,
          "new_api": "msg_Warn",
          "old_text": null,
          "new_text": "msg_Warn(vd, \"IDirect3D9_GetAdapterIdentifier failed\")",
          "old_line_content": "                d3dai.VendorId, d3dai.DeviceId, d3dai.Revision );",
          "new_line_content": "        msg_Warn(vd, \"IDirect3D9_GetAdapterIdentifier failed\");",
          "content_same": false
        },
        {
          "line": 1397,
          "old_api": null,
          "new_api": "Direct3D9CompileShader",
          "old_text": null,
          "new_text": "Direct3D9CompileShader(vd, shader_source_file, length)",
          "old_line_content": "    }",
          "new_line_content": "        ret = Direct3D9CompileShader(vd, shader_source_file, length);",
          "content_same": false
        },
        {
          "line": 886,
          "old_api": null,
          "new_api": "msg_Dbg",
          "old_text": null,
          "new_text": "msg_Dbg(vd, \"Direct3d9 Device: %s %lu %lu %lu\", d3dai.Description,\n                d3dai.VendorId, d3dai.DeviceId, d3dai.Revision )",
          "old_line_content": "",
          "new_line_content": "        msg_Dbg(vd, \"Direct3d9 Device: %s %lu %lu %lu\", d3dai.Description,",
          "content_same": false
        },
        {
          "line": 1402,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(selected_shader)",
          "old_line_content": "",
          "new_line_content": "    free(selected_shader);",
          "content_same": false
        },
        {
          "line": 1403,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(shader_source_file)",
          "old_line_content": "    return VLC_SUCCESS;",
          "new_line_content": "    free(shader_source_file);",
          "content_same": false
        },
        {
          "line": 1404,
          "old_api": null,
          "new_api": "fclose",
          "old_text": null,
          "new_text": "fclose(fs)",
          "old_line_content": "",
          "new_line_content": "    fclose(fs);",
          "content_same": false
        },
        {
          "line": 894,
          "old_api": null,
          "new_api": "IDirect3D9Ex_CreateDeviceEx",
          "old_text": null,
          "new_text": "IDirect3D9Ex_CreateDeviceEx((LPDIRECT3D9EX)d3dobj, AdapterToUse,\n                                         DeviceType, sys->sys.hvideownd,\n                                         D3DCREATE_SOFTWARE_VERTEXPROCESSING|\n                                         D3DCREATE_MULTITHREADED,\n                                         &sys->d3dpp, NULL, &d3ddevex)",
          "old_line_content": "                                         D3DCREATE_MULTITHREADED,",
          "new_line_content": "        hr = IDirect3D9Ex_CreateDeviceEx((LPDIRECT3D9EX)d3dobj, AdapterToUse,",
          "content_same": false
        },
        {
          "line": 1409,
          "old_api": null,
          "new_api": "Direct3D9DestroyShaders",
          "old_text": null,
          "new_text": "Direct3D9DestroyShaders(vd)",
          "old_line_content": "    if (fs)",
          "new_line_content": "    Direct3D9DestroyShaders(vd);",
          "content_same": false
        },
        {
          "line": 1411,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(shader_source_file)",
          "old_line_content": "    return VLC_EGENERIC;",
          "new_line_content": "    free(shader_source_file);",
          "content_same": false
        },
        {
          "line": 1413,
          "old_api": null,
          "new_api": "fclose",
          "old_text": null,
          "new_text": "fclose(fs)",
          "old_line_content": "",
          "new_line_content": "        fclose(fs);",
          "content_same": false
        },
        {
          "line": 390,
          "old_api": null,
          "new_api": "calloc",
          "old_text": null,
          "new_text": "calloc(count, sizeof(*pictures))",
          "old_line_content": "",
          "new_line_content": "    pictures = calloc(count, sizeof(*pictures));",
          "content_same": false
        },
        {
          "line": 902,
          "old_api": null,
          "new_api": "IDirect3D9_CreateDevice",
          "old_text": null,
          "new_text": "IDirect3D9_CreateDevice(d3dobj, AdapterToUse,\n                                     DeviceType, sys->sys.hvideownd,\n                                     D3DCREATE_SOFTWARE_VERTEXPROCESSING|\n                                     D3DCREATE_MULTITHREADED,\n                                     &sys->d3dpp, &d3ddev)",
          "old_line_content": "                                     D3DCREATE_MULTITHREADED,",
          "new_line_content": "        hr = IDirect3D9_CreateDevice(d3dobj, AdapterToUse,",
          "content_same": false
        },
        {
          "line": 1422,
          "old_api": null,
          "new_api": "IDirect3DPixelShader9_Release",
          "old_text": null,
          "new_text": "IDirect3DPixelShader9_Release(sys->d3dx_shader)",
          "old_line_content": "",
          "new_line_content": "        IDirect3DPixelShader9_Release(sys->d3dx_shader);",
          "content_same": false
        },
        {
          "line": 401,
          "old_api": null,
          "new_api": "MAKEFOURCC",
          "old_text": null,
          "new_text": "MAKEFOURCC('N','V','1','2')",
          "old_line_content": "        format = vd->sys->d3dtexture_format->format;",
          "new_line_content": "        format = MAKEFOURCC('N','V','1','2');",
          "content_same": false
        },
        {
          "line": 916,
          "old_api": null,
          "new_api": "Direct3DFindFormat",
          "old_text": null,
          "new_text": "Direct3DFindFormat(vd, fmt->i_chroma, sys->d3dpp.BackBufferFormat)",
          "old_line_content": "        return VLC_EGENERIC;",
          "new_line_content": "    const d3d_format_t *d3dfmt = Direct3DFindFormat(vd, fmt->i_chroma, sys->d3dpp.BackBufferFormat);",
          "content_same": false
        },
        {
          "line": 918,
          "old_api": null,
          "new_api": "msg_Err",
          "old_text": null,
          "new_text": "msg_Err(vd, \"surface pixel format is not supported.\")",
          "old_line_content": "    fmt->i_chroma = d3dfmt->fourcc;",
          "new_line_content": "        msg_Err(vd, \"surface pixel format is not supported.\");",
          "content_same": false
        },
        {
          "line": 410,
          "old_api": null,
          "new_api": "malloc",
          "old_text": null,
          "new_text": "malloc(sizeof(*picsys))",
          "old_line_content": "",
          "new_line_content": "        picture_sys_t *picsys = malloc(sizeof(*picsys));",
          "content_same": false
        },
        {
          "line": 414,
          "old_api": null,
          "new_api": "IDirect3DDevice9_CreateOffscreenPlainSurface",
          "old_text": null,
          "new_text": "IDirect3DDevice9_CreateOffscreenPlainSurface(vd->sys->d3ddev,\n                                                          vd->fmt.i_width,\n                                                          vd->fmt.i_height,\n                                                          format,\n                                                          D3DPOOL_DEFAULT,\n                                                          &picsys->surface,\n                                                          NULL)",
          "old_line_content": "                                                          format,",
          "new_line_content": "        HRESULT hr = IDirect3DDevice9_CreateOffscreenPlainSurface(vd->sys->d3ddev,",
          "content_same": false
        },
        {
          "line": 927,
          "old_api": null,
          "new_api": "FAILED",
          "old_text": null,
          "new_text": "FAILED(hr)",
          "old_line_content": "    }",
          "new_line_content": "    if (FAILED(hr)) {",
          "content_same": false
        },
        {
          "line": 928,
          "old_api": null,
          "new_api": "msg_Err",
          "old_text": null,
          "new_text": "msg_Err(vd, \"Could not create the D3D9 device! (hr=0x%0lx)\", hr)",
          "old_line_content": "",
          "new_line_content": "       msg_Err(vd, \"Could not create the D3D9 device! (hr=0x%0lx)\", hr);",
          "content_same": false
        },
        {
          "line": 421,
          "old_api": null,
          "new_api": "FAILED",
          "old_text": null,
          "new_text": "FAILED(hr)",
          "old_line_content": "           goto error;",
          "new_line_content": "        if (FAILED(hr)) {",
          "content_same": false
        },
        {
          "line": 422,
          "old_api": null,
          "new_api": "msg_Err",
          "old_text": null,
          "new_text": "msg_Err(vd, \"Failed to allocate surface %d (hr=0x%0lx)\", picture_count, hr)",
          "old_line_content": "        }",
          "new_line_content": "           msg_Err(vd, \"Failed to allocate surface %d (hr=0x%0lx)\", picture_count, hr);",
          "content_same": false
        },
        {
          "line": 423,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(picsys)",
          "old_line_content": "",
          "new_line_content": "           free(picsys);",
          "content_same": false
        },
        {
          "line": 934,
          "old_api": null,
          "new_api": "Direct3D9CreateResources",
          "old_text": null,
          "new_text": "Direct3D9CreateResources(vd, fmt)",
          "old_line_content": "    }",
          "new_line_content": "    if (Direct3D9CreateResources(vd, fmt)) {",
          "content_same": false
        },
        {
          "line": 935,
          "old_api": null,
          "new_api": "msg_Err",
          "old_text": null,
          "new_text": "msg_Err(vd, \"Failed to allocate resources\")",
          "old_line_content": "",
          "new_line_content": "        msg_Err(vd, \"Failed to allocate resources\");",
          "content_same": false
        },
        {
          "line": 940,
          "old_api": null,
          "new_api": "EventThreadUpdateTitle",
          "old_text": null,
          "new_text": "EventThreadUpdateTitle(sys->sys.event, VOUT_TITLE \" (Direct3D9 output)\")",
          "old_line_content": "    return VLC_SUCCESS;",
          "new_line_content": "    EventThreadUpdateTitle(sys->sys.event, VOUT_TITLE \" (Direct3D9 output)\");",
          "content_same": false
        },
        {
          "line": 942,
          "old_api": null,
          "new_api": "msg_Dbg",
          "old_text": null,
          "new_text": "msg_Dbg(vd, \"Direct3D9 device adapter successfully initialized\")",
          "old_line_content": "",
          "new_line_content": "    msg_Dbg(vd, \"Direct3D9 device adapter successfully initialized\");",
          "content_same": false
        },
        {
          "line": 432,
          "old_api": null,
          "new_api": "picture_NewFromResource",
          "old_text": null,
          "new_text": "picture_NewFromResource(&vd->fmt, &resource)",
          "old_line_content": "            goto error;",
          "new_line_content": "        picture_t *picture = picture_NewFromResource(&vd->fmt, &resource);",
          "content_same": false
        },
        {
          "line": 433,
          "old_api": null,
          "new_api": "unlikely",
          "old_text": null,
          "new_text": "unlikely(picture == NULL)",
          "old_line_content": "        }",
          "new_line_content": "        if (unlikely(picture == NULL)) {",
          "content_same": false
        },
        {
          "line": 434,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(picsys)",
          "old_line_content": "",
          "new_line_content": "            free(picsys);",
          "content_same": false
        },
        {
          "line": 956,
          "old_api": null,
          "new_api": "IDirect3DDevice9_Release",
          "old_text": null,
          "new_text": "IDirect3DDevice9_Release(sys->d3ddev)",
          "old_line_content": "}",
          "new_line_content": "       IDirect3DDevice9_Release(sys->d3ddev);",
          "content_same": false
        },
        {
          "line": 445,
          "old_api": null,
          "new_api": "is_d3d9_opaque",
          "old_text": null,
          "new_text": "is_d3d9_opaque( vd->fmt.i_chroma )",
          "old_line_content": "        pool_cfg.unlock = Direct3D9UnlockSurface;",
          "new_line_content": "    if( !is_d3d9_opaque( vd->fmt.i_chroma ) )",
          "content_same": false
        },
        {
          "line": 451,
          "old_api": null,
          "new_api": "picture_pool_NewExtended",
          "old_text": null,
          "new_text": "picture_pool_NewExtended( &pool_cfg )",
          "old_line_content": "    if (vd->sys->sys.pool == NULL && pictures) {",
          "new_line_content": "    vd->sys->sys.pool = picture_pool_NewExtended( &pool_cfg );",
          "content_same": false
        },
        {
          "line": 456,
          "old_api": null,
          "new_api": "DestroyPicture",
          "old_text": null,
          "new_text": "DestroyPicture(pictures[i])",
          "old_line_content": "    return vd->sys->sys.pool;",
          "new_line_content": "            DestroyPicture(pictures[i]);",
          "content_same": false
        },
        {
          "line": 968,
          "old_api": null,
          "new_api": "Direct3D9FillPresentationParameters",
          "old_text": null,
          "new_text": "Direct3D9FillPresentationParameters(vd)",
          "old_line_content": "    /* release all D3D objects */",
          "new_line_content": "    if (Direct3D9FillPresentationParameters(vd))",
          "content_same": false
        },
        {
          "line": 458,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(pictures)",
          "old_line_content": "",
          "new_line_content": "    free(pictures);",
          "content_same": false
        },
        {
          "line": 972,
          "old_api": null,
          "new_api": "Direct3D9DestroyResources",
          "old_text": null,
          "new_text": "Direct3D9DestroyResources(vd)",
          "old_line_content": "    HRESULT hr;",
          "new_line_content": "    Direct3D9DestroyResources(vd);",
          "content_same": false
        },
        {
          "line": 983,
          "old_api": null,
          "new_api": "FAILED",
          "old_text": null,
          "new_text": "FAILED(hr)",
          "old_line_content": "    }",
          "new_line_content": "    if (FAILED(hr)) {",
          "content_same": false
        },
        {
          "line": 472,
          "old_api": null,
          "new_api": "is_d3d9_opaque",
          "old_text": null,
          "new_text": "is_d3d9_opaque(picture->format.i_chroma)",
          "old_line_content": "    /* check if device is still available */",
          "new_line_content": "    if ( !is_d3d9_opaque(picture->format.i_chroma) )",
          "content_same": false
        },
        {
          "line": 984,
          "old_api": null,
          "new_api": "msg_Err",
          "old_text": null,
          "new_text": "msg_Err(vd, \"IDirect3DDevice9_Reset failed! (hr=0x%0lx)\", hr)",
          "old_line_content": "",
          "new_line_content": "        msg_Err(vd, \"IDirect3DDevice9_Reset failed! (hr=0x%0lx)\", hr);",
          "content_same": false
        },
        {
          "line": 477,
          "old_api": null,
          "new_api": "FAILED",
          "old_text": null,
          "new_text": "FAILED(hr)",
          "old_line_content": "            sys->reset_device = true;",
          "new_line_content": "    if (FAILED(hr)) {",
          "content_same": false
        },
        {
          "line": 479,
          "old_api": null,
          "new_api": "vout_display_SendEventPicturesInvalid",
          "old_text": null,
          "new_text": "vout_display_SendEventPicturesInvalid(vd)",
          "old_line_content": "        }",
          "new_line_content": "            vout_display_SendEventPicturesInvalid(vd);",
          "content_same": false
        },
        {
          "line": 991,
          "old_api": null,
          "new_api": "Direct3D9CreateResources",
          "old_text": null,
          "new_text": "Direct3D9CreateResources(vd, &vd->fmt)",
          "old_line_content": "    }",
          "new_line_content": "    if (Direct3D9CreateResources(vd, &vd->fmt)) {",
          "content_same": false
        },
        {
          "line": 992,
          "old_api": null,
          "new_api": "msg_Dbg",
          "old_text": null,
          "new_text": "msg_Dbg(vd, \"Direct3D9CreateResources failed !\")",
          "old_line_content": "    return VLC_SUCCESS;",
          "new_line_content": "        msg_Dbg(vd, \"Direct3D9CreateResources failed !\");",
          "content_same": false
        },
        {
          "line": 1513,
          "old_api": null,
          "new_api": "orientationVertexOrder",
          "old_text": null,
          "new_text": "orientationVertexOrder(orientation, vertex_order)",
          "old_line_content": "        vertices[i].x  = vertices_coords[vertex_order[i]][0];",
          "new_line_content": "    orientationVertexOrder(orientation, vertex_order);",
          "content_same": false
        },
        {
          "line": 491,
          "old_api": null,
          "new_api": "Direct3D9ImportPicture",
          "old_text": null,
          "new_text": "Direct3D9ImportPicture(vd, &picture_region, surface)",
          "old_line_content": "        int subpicture_region_count     = 0;",
          "new_line_content": "    if (!Direct3D9ImportPicture(vd, &picture_region, surface)) {",
          "content_same": false
        },
        {
          "line": 1012,
          "old_api": null,
          "new_api": "Direct3D9CreateScene",
          "old_text": null,
          "new_text": "Direct3D9CreateScene(vd, fmt)",
          "old_line_content": "    }",
          "new_line_content": "    if (Direct3D9CreateScene(vd, fmt)) {",
          "content_same": false
        },
        {
          "line": 503,
          "old_api": null,
          "new_api": "Direct3D9DeleteRegions",
          "old_text": null,
          "new_text": "Direct3D9DeleteRegions(sys->d3dregion_count, sys->d3dregion)",
          "old_line_content": "    }",
          "new_line_content": "        Direct3D9DeleteRegions(sys->d3dregion_count, sys->d3dregion);",
          "content_same": false
        },
        {
          "line": 1016,
          "old_api": null,
          "new_api": "Direct3D9CreateShaders",
          "old_text": null,
          "new_text": "Direct3D9CreateShaders(vd)",
          "old_line_content": "    }",
          "new_line_content": "    if (Direct3D9CreateShaders(vd)) {",
          "content_same": false
        },
        {
          "line": 1018,
          "old_api": null,
          "new_api": "msg_Warn",
          "old_text": null,
          "new_text": "msg_Warn(vd, \"Direct3D shaders initialization failed !\")",
          "old_line_content": "    sys->d3dregion_format = D3DFMT_UNKNOWN;",
          "new_line_content": "        msg_Warn(vd, \"Direct3D shaders initialization failed !\");",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 513,
          "old_api": "subpicture_Delete",
          "new_api": null,
          "old_text": "subpicture_Delete(subpicture)",
          "new_text": null,
          "old_line_content": "            subpicture_Delete(subpicture);",
          "new_line_content": "    if (sys->lost_not_ready) {",
          "content_same": false
        },
        {
          "line": 1537,
          "old_api": "D3DCOLOR_ARGB",
          "new_api": null,
          "old_text": "D3DCOLOR_ARGB(alpha, 255, 255, 255)",
          "new_text": null,
          "old_line_content": "        vertices[i].diffuse = D3DCOLOR_ARGB(alpha, 255, 255, 255);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 525,
          "old_api": "IDirect3DDevice9Ex_PresentEx",
          "new_api": null,
          "old_text": "IDirect3DDevice9Ex_PresentEx(d3ddev, &src, &dst, NULL, NULL, 0)",
          "new_text": null,
          "old_line_content": "        hr = IDirect3DDevice9Ex_PresentEx(d3ddev, &src, &dst, NULL, NULL, 0);",
          "new_line_content": "    HRESULT hr;",
          "content_same": false
        },
        {
          "line": 1039,
          "old_api": "Direct3D9DestroyScene",
          "new_api": null,
          "old_text": "Direct3D9DestroyScene(vd)",
          "new_text": null,
          "old_line_content": "    Direct3D9DestroyScene(vd);",
          "new_line_content": " */",
          "content_same": false
        },
        {
          "line": 1040,
          "old_api": "picture_pool_Release",
          "new_api": null,
          "old_text": "picture_pool_Release(vd->sys->sys.pool)",
          "new_text": null,
          "old_line_content": "    picture_pool_Release(vd->sys->sys.pool);",
          "new_line_content": "static void Direct3D9DestroyResources(vout_display_t *vd)",
          "content_same": false
        },
        {
          "line": 1041,
          "old_api": "Direct3D9DestroyShaders",
          "new_api": null,
          "old_text": "Direct3D9DestroyShaders(vd)",
          "new_text": null,
          "old_line_content": "    Direct3D9DestroyShaders(vd);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 530,
          "old_api": "FAILED",
          "new_api": null,
          "old_text": "FAILED(hr)",
          "new_text": null,
          "old_line_content": "    if (FAILED(hr)) {",
          "new_line_content": "        LPDIRECT3DDEVICE9 d3ddev = sys->d3ddev;",
          "content_same": false
        },
        {
          "line": 1552,
          "old_api": "msg_Dbg",
          "new_api": null,
          "old_text": "msg_Dbg(vd, \"no surface to render?\")",
          "new_text": null,
          "old_line_content": "        msg_Dbg(vd, \"no surface to render?\");",
          "new_line_content": "    HRESULT hr;",
          "content_same": false
        },
        {
          "line": 1558,
          "old_api": "IDirect3DTexture9_GetSurfaceLevel",
          "new_api": null,
          "old_text": "IDirect3DTexture9_GetSurfaceLevel(sys->d3dtex, 0, &destination)",
          "new_text": null,
          "old_line_content": "    hr = IDirect3DTexture9_GetSurfaceLevel(sys->d3dtex, 0, &destination);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 535,
          "old_api": "is_d3d9_opaque",
          "new_api": null,
          "old_text": "is_d3d9_opaque(picture->format.i_chroma)",
          "new_text": null,
          "old_line_content": "    if ( !is_d3d9_opaque(picture->format.i_chroma) )",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 536,
          "old_api": "Direct3D9LockSurface",
          "new_api": null,
          "old_text": "Direct3D9LockSurface(picture)",
          "new_text": null,
          "old_line_content": "        Direct3D9LockSurface(picture);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 537,
          "old_api": "picture_Release",
          "new_api": null,
          "old_text": "picture_Release(picture)",
          "new_text": null,
          "old_line_content": "    picture_Release(picture);",
          "new_line_content": "    /* XXX See Prepare() */",
          "content_same": false
        },
        {
          "line": 1559,
          "old_api": "FAILED",
          "new_api": null,
          "old_text": "FAILED(hr)",
          "new_text": null,
          "old_line_content": "    if (FAILED(hr)) {",
          "new_line_content": "    /* retrieve texture top-level surface */",
          "content_same": false
        },
        {
          "line": 1560,
          "old_api": "msg_Dbg",
          "new_api": null,
          "old_text": "msg_Dbg(vd, \"Failed IDirect3DTexture9_GetSurfaceLevel: 0x%0lx\", hr)",
          "new_text": null,
          "old_line_content": "        msg_Dbg(vd, \"Failed IDirect3DTexture9_GetSurfaceLevel: 0x%0lx\", hr);",
          "new_line_content": "    LPDIRECT3DSURFACE9 destination;",
          "content_same": false
        },
        {
          "line": 541,
          "old_api": "CommonDisplay",
          "new_api": null,
          "old_text": "CommonDisplay(vd)",
          "new_text": null,
          "old_line_content": "    CommonDisplay(vd);",
          "new_line_content": "    if (subpicture)",
          "content_same": false
        },
        {
          "line": 1566,
          "old_api": "IDirect3DDevice9_StretchRect",
          "new_api": null,
          "old_text": "IDirect3DDevice9_StretchRect(sys->d3ddev, source, &vd->sys->sys.rect_src, destination, NULL, D3DTEXF_NONE)",
          "new_text": null,
          "old_line_content": "    hr = IDirect3DDevice9_StretchRect(sys->d3ddev, source, &vd->sys->sys.rect_src, destination, NULL, D3DTEXF_NONE);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1055,
          "old_api": "IDirect3D9_CheckDeviceFormat",
          "new_api": null,
          "old_text": "IDirect3D9_CheckDeviceFormat(d3dobj, D3DADAPTER_DEFAULT,\n                                      D3DDEVTYPE_HAL, dst, 0,\n                                      D3DRTYPE_SURFACE, src)",
          "new_text": null,
          "old_line_content": "    hr = IDirect3D9_CheckDeviceFormat(d3dobj, D3DADAPTER_DEFAULT,",
          "new_line_content": "    HRESULT hr;",
          "content_same": false
        },
        {
          "line": 1567,
          "old_api": "IDirect3DSurface9_Release",
          "new_api": null,
          "old_text": "IDirect3DSurface9_Release(destination)",
          "new_text": null,
          "old_line_content": "    IDirect3DSurface9_Release(destination);",
          "new_line_content": "    /* Copy picture surface into texture surface",
          "content_same": false
        },
        {
          "line": 545,
          "old_api": "Direct3D9Reset",
          "new_api": null,
          "old_text": "Direct3D9Reset(vd)",
          "new_text": null,
          "old_line_content": "    return Direct3D9Reset(vd);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1568,
          "old_api": "FAILED",
          "new_api": null,
          "old_text": "FAILED(hr)",
          "new_text": null,
          "old_line_content": "    if (FAILED(hr)) {",
          "new_line_content": "     * color space conversion happen here */",
          "content_same": false
        },
        {
          "line": 1062,
          "old_api": "IDirect3D9_CheckDeviceFormatConversion",
          "new_api": null,
          "old_text": "IDirect3D9_CheckDeviceFormatConversion(d3dobj,\n                                                    D3DADAPTER_DEFAULT,\n                                                    D3DDEVTYPE_HAL,\n                                                    src, dst)",
          "new_text": null,
          "old_line_content": "        hr = IDirect3D9_CheckDeviceFormatConversion(d3dobj,",
          "new_line_content": "        /* test whether device can perform color-conversion",
          "content_same": false
        },
        {
          "line": 1576,
          "old_api": "Direct3D9SetupVertices",
          "new_api": null,
          "old_text": "Direct3D9SetupVertices(region->vertex, &vd->sys->sys.rect_src, &vd->sys->sys.rect_src_clipped,\n                           &vd->sys->sys.rect_dest_clipped, 255, vd->fmt.orientation)",
          "new_text": null,
          "old_line_content": "    Direct3D9SetupVertices(region->vertex, &vd->sys->sys.rect_src, &vd->sys->sys.rect_src_clipped,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1067,
          "old_api": "SUCCEEDED",
          "new_api": null,
          "old_text": "SUCCEEDED(hr)",
          "new_text": null,
          "old_line_content": "    if (!SUCCEEDED(hr)) {",
          "new_line_content": "                                                    D3DDEVTYPE_HAL,",
          "content_same": false
        },
        {
          "line": 557,
          "old_api": "GetWindowPlacement",
          "new_api": null,
          "old_text": "GetWindowPlacement(sys->sys.hparent ? sys->sys.hparent : sys->sys.hwnd, &wp)",
          "new_text": null,
          "old_line_content": "        GetWindowPlacement(sys->sys.hparent ? sys->sys.hparent : sys->sys.hwnd, &wp);",
          "new_line_content": "        sys->desktop_save.is_on_top     = sys->sys.is_on_top;",
          "content_same": false
        },
        {
          "line": 1069,
          "old_api": "msg_Err",
          "new_api": null,
          "old_text": "msg_Err(vd, \"Could not query adapter supported formats. (hr=0x%0lx)\", hr)",
          "new_text": null,
          "old_line_content": "            msg_Err(vd, \"Could not query adapter supported formats. (hr=0x%0lx)\", hr);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1585,
          "old_api": "IDirect3DTexture9_Release",
          "new_api": null,
          "old_text": "IDirect3DTexture9_Release(region[i].texture)",
          "new_text": null,
          "old_line_content": "            IDirect3DTexture9_Release(region[i].texture);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 562,
          "old_api": "Direct3D9Close",
          "new_api": null,
          "old_text": "Direct3D9Close(vd)",
          "new_text": null,
          "old_line_content": "    Direct3D9Close(vd);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 563,
          "old_api": "EventThreadStop",
          "new_api": null,
          "old_text": "EventThreadStop(sys->sys.event)",
          "new_text": null,
          "old_line_content": "    EventThreadStop(sys->sys.event);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1587,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(region)",
          "new_text": null,
          "old_line_content": "    free(region);",
          "new_line_content": "        if (region[i].texture)",
          "content_same": false
        },
        {
          "line": 1077,
          "old_api": "MAKEFOURCC",
          "new_api": null,
          "old_text": "MAKEFOURCC('Y','V','1','2')",
          "new_text": null,
          "old_line_content": "    { \"YV12\",       MAKEFOURCC('Y','V','1','2'),    VLC_CODEC_YV12,  0,0,0 },",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1078,
          "old_api": "MAKEFOURCC",
          "new_api": null,
          "old_text": "MAKEFOURCC('Y','V','1','2')",
          "new_text": null,
          "old_line_content": "    { \"YV12\",       MAKEFOURCC('Y','V','1','2'),    VLC_CODEC_I420,  0,0,0 },",
          "new_line_content": "static const d3d_format_t d3d_formats[] = {",
          "content_same": false
        },
        {
          "line": 1079,
          "old_api": "MAKEFOURCC",
          "new_api": null,
          "old_text": "MAKEFOURCC('Y','V','1','2')",
          "new_text": null,
          "old_line_content": "    { \"YV12\",       MAKEFOURCC('Y','V','1','2'),    VLC_CODEC_J420,  0,0,0 },",
          "new_line_content": "    /* YV12 is always used for planar 420, the planes are then swapped in Lock() */",
          "content_same": false
        },
        {
          "line": 573,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(&cfg, 0, sizeof(cfg))",
          "new_text": null,
          "old_line_content": "    memset(&cfg, 0, sizeof(cfg));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1601,
          "old_api": "calloc",
          "new_api": null,
          "old_text": "calloc(count, sizeof(**region))",
          "new_text": null,
          "old_line_content": "    *region    = calloc(count, sizeof(**region));",
          "new_line_content": "        count++;",
          "content_same": false
        },
        {
          "line": 583,
          "old_api": "EventThreadStart",
          "new_api": null,
          "old_text": "EventThreadStart(sys->sys.event, &hwnd, &cfg)",
          "new_text": null,
          "old_line_content": "    if (EventThreadStart(sys->sys.event, &hwnd, &cfg)) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 584,
          "old_api": "msg_Err",
          "new_api": null,
          "old_text": "msg_Err(vd, \"Failed to restart event thread\")",
          "new_text": null,
          "old_line_content": "        msg_Err(vd, \"Failed to restart event thread\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 592,
          "old_api": "SetRectEmpty",
          "new_api": null,
          "old_text": "SetRectEmpty(&sys->sys.rect_parent)",
          "new_text": null,
          "old_line_content": "    SetRectEmpty(&sys->sys.rect_parent);",
          "new_line_content": "    sys->sys.hwnd          = hwnd.hwnd;",
          "content_same": false
        },
        {
          "line": 1105,
          "old_api": "is_d3d9_opaque",
          "new_api": null,
          "old_text": "is_d3d9_opaque(chroma)",
          "new_text": null,
          "old_line_content": "        if (pass == 0 && is_d3d9_opaque(chroma))",
          "new_line_content": "        const vlc_fourcc_t *list;",
          "content_same": false
        },
        {
          "line": 1107,
          "old_api": "vlc_fourcc_IsYUV",
          "new_api": null,
          "old_text": "vlc_fourcc_IsYUV(chroma)",
          "new_text": null,
          "old_line_content": "        else if (pass == 0 && hardware_scale_ok && sys->allow_hw_yuv && vlc_fourcc_IsYUV(chroma))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 596,
          "old_api": "Direct3D9Open",
          "new_api": null,
          "old_text": "Direct3D9Open(vd, &fmt)",
          "new_text": null,
          "old_line_content": "    if (Direct3D9Open(vd, &fmt)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 597,
          "old_api": "CommonClean",
          "new_api": null,
          "old_text": "CommonClean(vd)",
          "new_text": null,
          "old_line_content": "        CommonClean(vd);",
          "new_line_content": "    /* */",
          "content_same": false
        },
        {
          "line": 598,
          "old_api": "msg_Err",
          "new_api": null,
          "old_text": "msg_Err(vd, \"Failed to reopen device\")",
          "new_text": null,
          "old_line_content": "        msg_Err(vd, \"Failed to reopen device\");",
          "new_line_content": "    video_format_t fmt;",
          "content_same": false
        },
        {
          "line": 1620,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(cache, 0, sizeof(*cache))",
          "new_text": null,
          "old_line_content": "                memset(cache, 0, sizeof(*cache));",
          "new_line_content": "                cache->width  == r->fmt.i_width &&",
          "content_same": false
        },
        {
          "line": 1628,
          "old_api": "IDirect3DDevice9_CreateTexture",
          "new_api": null,
          "old_text": "IDirect3DDevice9_CreateTexture(sys->d3ddev,\n                                                d3dr->width, d3dr->height,\n                                                1,\n                                                D3DUSAGE_DYNAMIC,\n                                                d3dr->format,\n                                                D3DPOOL_DEFAULT,\n                                                &d3dr->texture,\n                                                NULL)",
          "new_text": null,
          "old_line_content": "            hr = IDirect3DDevice9_CreateTexture(sys->d3ddev,",
          "new_line_content": "            d3dr->format = sys->d3dregion_format;",
          "content_same": false
        },
        {
          "line": 607,
          "old_api": "vout_display_SendEventFullscreen",
          "new_api": null,
          "old_text": "vout_display_SendEventFullscreen(vd, false)",
          "new_text": null,
          "old_line_content": "            vout_display_SendEventFullscreen(vd, false);",
          "new_line_content": "    if (sys->sys.use_desktop) {",
          "content_same": false
        },
        {
          "line": 609,
          "old_api": "vout_display_SendWindowState",
          "new_api": null,
          "old_text": "vout_display_SendWindowState(vd, VOUT_WINDOW_STATE_NORMAL)",
          "new_text": null,
          "old_line_content": "            vout_display_SendWindowState(vd, VOUT_WINDOW_STATE_NORMAL);",
          "new_line_content": "        if (sys->desktop_save.is_fullscreen)",
          "content_same": false
        },
        {
          "line": 1121,
          "old_api": "msg_Warn",
          "new_api": null,
          "old_text": "msg_Warn(vd, \"trying surface pixel format: %s\",\n                         format->name)",
          "new_text": null,
          "old_line_content": "                msg_Warn(vd, \"trying surface pixel format: %s\",",
          "new_line_content": "                if (format->fourcc != list[i])",
          "content_same": false
        },
        {
          "line": 1123,
          "old_api": "Direct3D9CheckConversion",
          "new_api": null,
          "old_text": "Direct3D9CheckConversion(vd, format->format, target)",
          "new_text": null,
          "old_line_content": "                if (!Direct3D9CheckConversion(vd, format->format, target)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1636,
          "old_api": "FAILED",
          "new_api": null,
          "old_text": "FAILED(hr)",
          "new_text": null,
          "old_line_content": "            if (FAILED(hr)) {",
          "new_line_content": "                                                D3DPOOL_DEFAULT,",
          "content_same": false
        },
        {
          "line": 613,
          "old_api": "vout_display_SendEventFullscreen",
          "new_api": null,
          "old_text": "vout_display_SendEventFullscreen(vd, true)",
          "new_text": null,
          "old_line_content": "            vout_display_SendEventFullscreen(vd, true);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 1638,
          "old_api": "msg_Err",
          "new_api": null,
          "old_text": "msg_Err(vd, \"Failed to create %dx%d texture for OSD (hr=0x%0lx)\",\n                        d3dr->width, d3dr->height, hr)",
          "new_text": null,
          "old_line_content": "                msg_Err(vd, \"Failed to create %dx%d texture for OSD (hr=0x%0lx)\",",
          "new_line_content": "                                                NULL);",
          "content_same": false
        },
        {
          "line": 615,
          "old_api": "vout_display_SendWindowState",
          "new_api": null,
          "old_text": "vout_display_SendWindowState(vd, VOUT_WINDOW_STATE_ABOVE)",
          "new_text": null,
          "old_line_content": "            vout_display_SendWindowState(vd, VOUT_WINDOW_STATE_ABOVE);",
          "new_line_content": "        if (sys->desktop_save.is_fullscreen)",
          "content_same": false
        },
        {
          "line": 1643,
          "old_api": "msg_Dbg",
          "new_api": null,
          "old_text": "msg_Dbg(vd, \"Created %dx%d texture for OSD\",\n                    r->fmt.i_width, r->fmt.i_height)",
          "new_text": null,
          "old_line_content": "            msg_Dbg(vd, \"Created %dx%d texture for OSD\",",
          "new_line_content": "                continue;",
          "content_same": false
        },
        {
          "line": 1649,
          "old_api": "IDirect3DTexture9_LockRect",
          "new_api": null,
          "old_text": "IDirect3DTexture9_LockRect(d3dr->texture, 0, &lock, NULL, 0)",
          "new_text": null,
          "old_line_content": "        hr = IDirect3DTexture9_LockRect(d3dr->texture, 0, &lock, NULL, 0);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1650,
          "old_api": "SUCCEEDED",
          "new_api": null,
          "old_text": "SUCCEEDED(hr)",
          "new_text": null,
          "old_line_content": "        if (SUCCEEDED(hr)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 627,
          "old_api": "ControlResetDevice",
          "new_api": null,
          "old_text": "ControlResetDevice(vd)",
          "new_text": null,
          "old_line_content": "            if (ControlResetDevice(vd)) {",
          "new_line_content": "    case VOUT_DISPLAY_RESET_PICTURES:",
          "content_same": false
        },
        {
          "line": 628,
          "old_api": "msg_Err",
          "new_api": null,
          "old_text": "msg_Err(vd, \"Failed to reset device\")",
          "new_text": null,
          "old_line_content": "                msg_Err(vd, \"Failed to reset device\");",
          "new_line_content": "        /* FIXME what to do here in case of failure */",
          "content_same": false
        },
        {
          "line": 633,
          "old_api": "ControlReopenDevice",
          "new_api": null,
          "old_text": "ControlReopenDevice(vd)",
          "new_text": null,
          "old_line_content": "            if (ControlReopenDevice(vd)) {",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 634,
          "old_api": "msg_Err",
          "new_api": null,
          "old_text": "msg_Err(vd, \"Failed to reopen device\")",
          "new_text": null,
          "old_line_content": "                msg_Err(vd, \"Failed to reopen device\");",
          "new_line_content": "            sys->reset_device = false;",
          "content_same": false
        },
        {
          "line": 1658,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(dst_data, src_data, r->fmt.i_height * dst_pitch)",
          "new_text": null,
          "old_line_content": "                    memcpy(dst_data, src_data, r->fmt.i_height * dst_pitch);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1660,
          "old_api": "__MIN",
          "new_api": null,
          "old_text": "__MIN(dst_pitch, r->p_picture->p->i_pitch)",
          "new_text": null,
          "old_line_content": "                    int copy_pitch = __MIN(dst_pitch, r->p_picture->p->i_pitch);",
          "new_line_content": "                if (dst_pitch == r->p_picture->p->i_pitch) {",
          "content_same": false
        },
        {
          "line": 1149,
          "old_api": "IDirect3DDevice9_CreateTexture",
          "new_api": null,
          "old_text": "IDirect3DDevice9_CreateTexture(d3ddev,\n                                        fmt->i_width,\n                                        fmt->i_height,\n                                        1,\n                                        D3DUSAGE_RENDERTARGET,\n                                        sys->d3dpp.BackBufferFormat,\n                                        D3DPOOL_DEFAULT,\n                                        &d3dtex,\n                                        NULL)",
          "new_text": null,
          "old_line_content": "    hr = IDirect3DDevice9_CreateTexture(d3ddev,",
          "new_line_content": "     * which would usually be a RGB format",
          "content_same": false
        },
        {
          "line": 1662,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(&dst_data[y * dst_pitch], &src_data[y * src_pitch], copy_pitch)",
          "new_text": null,
          "old_line_content": "                        memcpy(&dst_data[y * dst_pitch], &src_data[y * src_pitch], copy_pitch);",
          "new_line_content": "                } else {",
          "content_same": false
        },
        {
          "line": 641,
          "old_api": "CommonControl",
          "new_api": null,
          "old_text": "CommonControl(vd, query, args)",
          "new_text": null,
          "old_line_content": "        return CommonControl(vd, query, args);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1666,
          "old_api": "__MIN",
          "new_api": null,
          "old_text": "__MIN(dst_pitch, r->p_picture->p->i_pitch)",
          "new_text": null,
          "old_line_content": "                int copy_pitch = __MIN(dst_pitch, r->p_picture->p->i_pitch);",
          "new_line_content": "                    }",
          "content_same": false
        },
        {
          "line": 1158,
          "old_api": "FAILED",
          "new_api": null,
          "old_text": "FAILED(hr)",
          "new_text": null,
          "old_line_content": "    if (FAILED(hr)) {",
          "new_line_content": "                                        D3DPOOL_DEFAULT,",
          "content_same": false
        },
        {
          "line": 1159,
          "old_api": "msg_Err",
          "new_api": null,
          "old_text": "msg_Err(vd, \"Failed to create texture. (hr=0x%lx)\", hr)",
          "new_text": null,
          "old_line_content": "        msg_Err(vd, \"Failed to create texture. (hr=0x%lx)\", hr);",
          "new_line_content": "                                        &d3dtex,",
          "content_same": false
        },
        {
          "line": 648,
          "old_api": "CommonManage",
          "new_api": null,
          "old_text": "CommonManage(vd)",
          "new_text": null,
          "old_line_content": "    CommonManage(vd);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1164,
          "old_api": "msg_Dbg",
          "new_api": null,
          "old_text": "msg_Dbg(vd, \"Direct3D created texture: %ix%i\",\n                fmt->i_width, fmt->i_height)",
          "new_text": null,
          "old_line_content": "    msg_Dbg(vd, \"Direct3D created texture: %ix%i\",",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1676,
          "old_api": "IDirect3DTexture9_UnlockRect",
          "new_api": null,
          "old_text": "IDirect3DTexture9_UnlockRect(d3dr->texture, 0)",
          "new_text": null,
          "old_line_content": "            hr = IDirect3DTexture9_UnlockRect(d3dr->texture, 0);",
          "new_line_content": "                    }",
          "content_same": false
        },
        {
          "line": 1677,
          "old_api": "FAILED",
          "new_api": null,
          "old_text": "FAILED(hr)",
          "new_text": null,
          "old_line_content": "            if (FAILED(hr))",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 1678,
          "old_api": "msg_Err",
          "new_api": null,
          "old_text": "msg_Err(vd, \"Failed to unlock the texture\")",
          "new_text": null,
          "old_line_content": "                msg_Err(vd, \"Failed to unlock the texture\");",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 658,
          "old_api": "vout_display_SendEventPicturesInvalid",
          "new_api": null,
          "old_text": "vout_display_SendEventPicturesInvalid(vd)",
          "new_text": null,
          "old_line_content": "        vout_display_SendEventPicturesInvalid(vd);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1172,
          "old_api": "IDirect3DDevice9_CreateVertexBuffer",
          "new_api": null,
          "old_text": "IDirect3DDevice9_CreateVertexBuffer(d3ddev,\n                                             sizeof(CUSTOMVERTEX)*4,\n                                             D3DUSAGE_DYNAMIC|D3DUSAGE_WRITEONLY,\n                                             D3DFVF_CUSTOMVERTEX,\n                                             D3DPOOL_DEFAULT,\n                                             &d3dvtc,\n                                             NULL)",
          "new_text": null,
          "old_line_content": "    hr = IDirect3DDevice9_CreateVertexBuffer(d3ddev,",
          "new_line_content": "    ** Create a vertex buffer for use when rendering scene",
          "content_same": false
        },
        {
          "line": 667,
          "old_api": "GetClientRect",
          "new_api": null,
          "old_text": "GetClientRect(p_sys->sys.hvideownd, &rect)",
          "new_text": null,
          "old_line_content": "        GetClientRect(p_sys->sys.hvideownd, &rect);",
          "new_line_content": "        RECT rect;",
          "content_same": false
        },
        {
          "line": 1179,
          "old_api": "FAILED",
          "new_api": null,
          "old_text": "FAILED(hr)",
          "new_text": null,
          "old_line_content": "    if (FAILED(hr)) {",
          "new_line_content": "                                             D3DPOOL_DEFAULT,",
          "content_same": false
        },
        {
          "line": 1180,
          "old_api": "msg_Err",
          "new_api": null,
          "old_text": "msg_Err(vd, \"Failed to create vertex buffer. (hr=0x%lx)\", hr)",
          "new_text": null,
          "old_line_content": "        msg_Err(vd, \"Failed to create vertex buffer. (hr=0x%lx)\", hr);",
          "new_line_content": "                                             &d3dvtc,",
          "content_same": false
        },
        {
          "line": 1181,
          "old_api": "IDirect3DTexture9_Release",
          "new_api": null,
          "old_text": "IDirect3DTexture9_Release(d3dtex)",
          "new_text": null,
          "old_line_content": "        IDirect3DTexture9_Release(d3dtex);",
          "new_line_content": "                                             NULL);",
          "content_same": false
        },
        {
          "line": 1693,
          "old_api": "Direct3D9SetupVertices",
          "new_api": null,
          "old_text": "Direct3D9SetupVertices(d3dr->vertex, NULL, NULL,\n                              &dst, subpicture->i_alpha * r->i_alpha / 255, ORIENT_NORMAL)",
          "new_text": null,
          "old_line_content": "        Direct3D9SetupVertices(d3dr->vertex, NULL, NULL,",
          "new_line_content": "        dst.right  = dst.left + scale_w * r->fmt.i_width,",
          "content_same": false
        },
        {
          "line": 673,
          "old_api": "msg_Dbg",
          "new_api": null,
          "old_text": "msg_Dbg(vd, \"resizing device back buffers to (%lux%lu)\", width, height)",
          "new_text": null,
          "old_line_content": "            msg_Dbg(vd, \"resizing device back buffers to (%lux%lu)\", width, height);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 675,
          "old_api": "Direct3D9ResetDevice",
          "new_api": null,
          "old_text": "Direct3D9ResetDevice(vd, width, height)",
          "new_text": null,
          "old_line_content": "            if (VLC_SUCCESS != Direct3D9ResetDevice(vd, width, height))",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 1196,
          "old_api": "IDirect3DDevice9_SetSamplerState",
          "new_api": null,
          "old_text": "IDirect3DDevice9_SetSamplerState(d3ddev, 0, D3DSAMP_ADDRESSU, D3DTADDRESS_CLAMP)",
          "new_text": null,
          "old_line_content": "    IDirect3DDevice9_SetSamplerState(d3ddev, 0, D3DSAMP_ADDRESSU, D3DTADDRESS_CLAMP);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1197,
          "old_api": "IDirect3DDevice9_SetSamplerState",
          "new_api": null,
          "old_text": "IDirect3DDevice9_SetSamplerState(d3ddev, 0, D3DSAMP_ADDRESSV, D3DTADDRESS_CLAMP)",
          "new_text": null,
          "old_line_content": "    IDirect3DDevice9_SetSamplerState(d3ddev, 0, D3DSAMP_ADDRESSV, D3DTADDRESS_CLAMP);",
          "new_line_content": "    // Texture coordinates outside the range [0.0, 1.0] are set",
          "content_same": false
        },
        {
          "line": 689,
          "old_api": "TEXT",
          "new_api": null,
          "old_text": "TEXT(\"D3dx9_%d.dll\")",
          "new_text": null,
          "old_line_content": "        _sntprintf(filename, 16, TEXT(\"D3dx9_%d.dll\"), i);",
          "new_line_content": "    HINSTANCE instance = NULL;",
          "content_same": false
        },
        {
          "line": 690,
          "old_api": "LoadLibrary",
          "new_api": null,
          "old_text": "LoadLibrary(filename)",
          "new_text": null,
          "old_line_content": "        instance = LoadLibrary(filename);",
          "new_line_content": "    for (int i = 43; i > 23; --i) {",
          "content_same": false
        },
        {
          "line": 1202,
          "old_api": "IDirect3DDevice9_SetSamplerState",
          "new_api": null,
          "old_text": "IDirect3DDevice9_SetSamplerState(d3ddev, 0, D3DSAMP_MINFILTER, D3DTEXF_LINEAR)",
          "new_text": null,
          "old_line_content": "        IDirect3DDevice9_SetSamplerState(d3ddev, 0, D3DSAMP_MINFILTER, D3DTEXF_LINEAR);",
          "new_line_content": "    // Set linear filtering quality",
          "content_same": false
        },
        {
          "line": 1713,
          "old_api": "IDirect3DVertexBuffer9_Lock",
          "new_api": null,
          "old_text": "IDirect3DVertexBuffer9_Lock(d3dvtc, 0, 0, &vertex, D3DLOCK_DISCARD)",
          "new_text": null,
          "old_line_content": "    hr = IDirect3DVertexBuffer9_Lock(d3dvtc, 0, 0, &vertex, D3DLOCK_DISCARD);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1714,
          "old_api": "FAILED",
          "new_api": null,
          "old_text": "FAILED(hr)",
          "new_text": null,
          "old_line_content": "    if (FAILED(hr)) {",
          "new_line_content": "    /* Import vertices */",
          "content_same": false
        },
        {
          "line": 1715,
          "old_api": "msg_Dbg",
          "new_api": null,
          "old_text": "msg_Dbg(vd, \"Failed IDirect3DVertexBuffer9_Lock: 0x%0lx\", hr)",
          "new_text": null,
          "old_line_content": "        msg_Dbg(vd, \"Failed IDirect3DVertexBuffer9_Lock: 0x%0lx\", hr);",
          "new_line_content": "    void *vertex;",
          "content_same": false
        },
        {
          "line": 1719,
          "old_api": "IDirect3DVertexBuffer9_Unlock",
          "new_api": null,
          "old_text": "IDirect3DVertexBuffer9_Unlock(d3dvtc)",
          "new_text": null,
          "old_line_content": "    hr = IDirect3DVertexBuffer9_Unlock(d3dvtc);",
          "new_line_content": "        return -1;",
          "content_same": false
        },
        {
          "line": 1720,
          "old_api": "FAILED",
          "new_api": null,
          "old_text": "FAILED(hr)",
          "new_text": null,
          "old_line_content": "    if (FAILED(hr)) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1209,
          "old_api": "IDirect3DDevice9_SetSamplerState",
          "new_api": null,
          "old_text": "IDirect3DDevice9_SetSamplerState(d3ddev, 0, D3DSAMP_MAGFILTER, D3DTEXF_LINEAR)",
          "new_text": null,
          "old_line_content": "        IDirect3DDevice9_SetSamplerState(d3ddev, 0, D3DSAMP_MAGFILTER, D3DTEXF_LINEAR);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 704,
          "old_api": "TEXT",
          "new_api": null,
          "old_text": "TEXT(\"D3D9.DLL\")",
          "new_text": null,
          "old_line_content": "    sys->hd3d9_dll = LoadLibrary(TEXT(\"D3D9.DLL\"));",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1216,
          "old_api": "D3DCOLOR_XRGB",
          "new_api": null,
          "old_text": "D3DCOLOR_XRGB(255,255,255)",
          "new_text": null,
          "old_line_content": "    IDirect3DDevice9_SetRenderState(d3ddev, D3DRS_AMBIENT, D3DCOLOR_XRGB(255,255,255));",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 706,
          "old_api": "msg_Warn",
          "new_api": null,
          "old_text": "msg_Warn(vd, \"cannot load d3d9.dll, aborting\")",
          "new_text": null,
          "old_line_content": "        msg_Warn(vd, \"cannot load d3d9.dll, aborting\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1729,
          "old_api": "IDirect3DDevice9_SetTexture",
          "new_api": null,
          "old_text": "IDirect3DDevice9_SetTexture(d3ddev, 0, (LPDIRECT3DBASETEXTURE9)d3dtex)",
          "new_text": null,
          "old_line_content": "    hr = IDirect3DDevice9_SetTexture(d3ddev, 0, (LPDIRECT3DBASETEXTURE9)d3dtex);",
          "new_line_content": "    // which govern how textures get blended together (in the case of multiple",
          "content_same": false
        },
        {
          "line": 1730,
          "old_api": "FAILED",
          "new_api": null,
          "old_text": "FAILED(hr)",
          "new_text": null,
          "old_line_content": "    if (FAILED(hr)) {",
          "new_line_content": "    // textures) and lighting information. In this case, we are modulating",
          "content_same": false
        },
        {
          "line": 1731,
          "old_api": "msg_Dbg",
          "new_api": null,
          "old_text": "msg_Dbg(vd, \"Failed IDirect3DDevice9_SetTexture: 0x%0lx\", hr)",
          "new_text": null,
          "old_line_content": "        msg_Dbg(vd, \"Failed IDirect3DDevice9_SetTexture: 0x%0lx\", hr);",
          "new_line_content": "    // (blending) our texture with the diffuse color of the vertices.",
          "content_same": false
        },
        {
          "line": 712,
          "old_api": "GetProcAddress",
          "new_api": null,
          "old_text": "GetProcAddress(sys->hd3d9_dll, \"Direct3DCreate9\")",
          "new_text": null,
          "old_line_content": "        (void *)GetProcAddress(sys->hd3d9_dll, \"Direct3DCreate9\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 714,
          "old_api": "msg_Err",
          "new_api": null,
          "old_text": "msg_Err(vd, \"Cannot locate reference to Direct3DCreate9 ABI in DLL\")",
          "new_text": null,
          "old_line_content": "        msg_Err(vd, \"Cannot locate reference to Direct3DCreate9 ABI in DLL\");",
          "new_line_content": "    OurDirect3DCreate9 =",
          "content_same": false
        },
        {
          "line": 1738,
          "old_api": "IDirect3DDevice9_SetPixelShader",
          "new_api": null,
          "old_text": "IDirect3DDevice9_SetPixelShader(d3ddev, sys->d3dx_shader)",
          "new_text": null,
          "old_line_content": "            hr = IDirect3DDevice9_SetPixelShader(d3ddev, sys->d3dx_shader);",
          "new_line_content": "    if (sys->d3dx_shader) {",
          "content_same": false
        },
        {
          "line": 1740,
          "old_api": "IDirect3DDevice9_SetPixelShaderConstantF",
          "new_api": null,
          "old_text": "IDirect3DDevice9_SetPixelShaderConstantF(d3ddev, 0, shader_data, 1)",
          "new_text": null,
          "old_line_content": "            hr = IDirect3DDevice9_SetPixelShaderConstantF(d3ddev, 0, shader_data, 1);",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 1742,
          "old_api": "msg_Dbg",
          "new_api": null,
          "old_text": "msg_Dbg(vd, \"Failed IDirect3DDevice9_SetPixelShaderConstantF: 0x%0lx\", hr)",
          "new_text": null,
          "old_line_content": "                msg_Dbg(vd, \"Failed IDirect3DDevice9_SetPixelShaderConstantF: 0x%0lx\", hr);",
          "new_line_content": "            float shader_data[4] = { region->width, region->height, 0, 0 };",
          "content_same": false
        },
        {
          "line": 720,
          "old_api": "GetProcAddress",
          "new_api": null,
          "old_text": "GetProcAddress(sys->hd3d9_dll, \"Direct3DCreate9Ex\")",
          "new_text": null,
          "old_line_content": "        (void *)GetProcAddress(sys->hd3d9_dll, \"Direct3DCreate9Ex\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1235,
          "old_api": "IDirect3DDevice9_SetRenderState",
          "new_api": null,
          "old_text": "IDirect3DDevice9_SetRenderState(d3ddev, D3DRS_SRCBLEND,D3DBLEND_SRCALPHA)",
          "new_text": null,
          "old_line_content": "    IDirect3DDevice9_SetRenderState(d3ddev, D3DRS_SRCBLEND,D3DBLEND_SRCALPHA);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1236,
          "old_api": "IDirect3DDevice9_SetRenderState",
          "new_api": null,
          "old_text": "IDirect3DDevice9_SetRenderState(d3ddev, D3DRS_DESTBLEND,D3DBLEND_INVSRCALPHA)",
          "new_text": null,
          "old_line_content": "    IDirect3DDevice9_SetRenderState(d3ddev, D3DRS_DESTBLEND,D3DBLEND_INVSRCALPHA);",
          "new_line_content": "    // manage blending",
          "content_same": false
        },
        {
          "line": 725,
          "old_api": "OurDirect3DCreate9Ex",
          "new_api": null,
          "old_text": "OurDirect3DCreate9Ex(D3D_SDK_VERSION, &d3d9exobj)",
          "new_text": null,
          "old_line_content": "        HRESULT hr = OurDirect3DCreate9Ex(D3D_SDK_VERSION, &d3d9exobj);",
          "new_line_content": "    /* Create the D3D object. */",
          "content_same": false
        },
        {
          "line": 726,
          "old_api": "FAILED",
          "new_api": null,
          "old_text": "FAILED(hr)",
          "new_text": null,
          "old_line_content": "        if(!FAILED(hr)) {",
          "new_line_content": "    if (OurDirect3DCreate9Ex) {",
          "content_same": false
        },
        {
          "line": 727,
          "old_api": "msg_Dbg",
          "new_api": null,
          "old_text": "msg_Dbg(vd, \"Using Direct3D9 Extended API!\")",
          "new_text": null,
          "old_line_content": "            msg_Dbg(vd, \"Using Direct3D9 Extended API!\");",
          "new_line_content": "        LPDIRECT3D9EX d3d9exobj;",
          "content_same": false
        },
        {
          "line": 1240,
          "old_api": "IDirect3DDevice9_SetRenderState",
          "new_api": null,
          "old_text": "IDirect3DDevice9_SetRenderState(d3ddev, D3DRS_ALPHAREF, 0x00)",
          "new_text": null,
          "old_line_content": "        IDirect3DDevice9_SetRenderState(d3ddev, D3DRS_ALPHAREF, 0x00);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1241,
          "old_api": "IDirect3DDevice9_SetRenderState",
          "new_api": null,
          "old_text": "IDirect3DDevice9_SetRenderState(d3ddev, D3DRS_ALPHAFUNC,D3DCMP_GREATER)",
          "new_text": null,
          "old_line_content": "        IDirect3DDevice9_SetRenderState(d3ddev, D3DRS_ALPHAFUNC,D3DCMP_GREATER);",
          "new_line_content": "    if (sys->d3dcaps.AlphaCmpCaps & D3DPCMPCAPS_GREATER) {",
          "content_same": false
        },
        {
          "line": 1747,
          "old_api": "IDirect3DDevice9_SetPixelShader",
          "new_api": null,
          "old_text": "IDirect3DDevice9_SetPixelShader(d3ddev, NULL)",
          "new_text": null,
          "old_line_content": "            hr = IDirect3DDevice9_SetPixelShader(d3ddev, NULL);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1748,
          "old_api": "FAILED",
          "new_api": null,
          "old_text": "FAILED(hr)",
          "new_text": null,
          "old_line_content": "        if (FAILED(hr)) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1749,
          "old_api": "msg_Dbg",
          "new_api": null,
          "old_text": "msg_Dbg(vd, \"Failed IDirect3DDevice9_SetPixelShader: 0x%0lx\", hr)",
          "new_text": null,
          "old_line_content": "            msg_Dbg(vd, \"Failed IDirect3DDevice9_SetPixelShader: 0x%0lx\", hr);",
          "new_line_content": "        else /* Disable any existing pixel shader. */",
          "content_same": false
        },
        {
          "line": 1245,
          "old_api": "IDirect3DDevice9_SetTextureStageState",
          "new_api": null,
          "old_text": "IDirect3DDevice9_SetTextureStageState(d3ddev, 0, D3DTSS_COLOROP,D3DTOP_SELECTARG1)",
          "new_text": null,
          "old_line_content": "    IDirect3DDevice9_SetTextureStageState(d3ddev, 0, D3DTSS_COLOROP,D3DTOP_SELECTARG1);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1246,
          "old_api": "IDirect3DDevice9_SetTextureStageState",
          "new_api": null,
          "old_text": "IDirect3DDevice9_SetTextureStageState(d3ddev, 0, D3DTSS_COLORARG1,D3DTA_TEXTURE)",
          "new_text": null,
          "old_line_content": "    IDirect3DDevice9_SetTextureStageState(d3ddev, 0, D3DTSS_COLORARG1,D3DTA_TEXTURE);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 735,
          "old_api": "OurDirect3DCreate9",
          "new_api": null,
          "old_text": "OurDirect3DCreate9(D3D_SDK_VERSION)",
          "new_text": null,
          "old_line_content": "        LPDIRECT3D9 d3dobj = OurDirect3DCreate9(D3D_SDK_VERSION);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1755,
          "old_api": "IDirect3DDevice9_SetStreamSource",
          "new_api": null,
          "old_text": "IDirect3DDevice9_SetStreamSource(d3ddev, 0, d3dvtc, 0, sizeof(CUSTOMVERTEX))",
          "new_text": null,
          "old_line_content": "    hr = IDirect3DDevice9_SetStreamSource(d3ddev, 0, d3dvtc, 0, sizeof(CUSTOMVERTEX));",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 737,
          "old_api": "msg_Err",
          "new_api": null,
          "old_text": "msg_Err(vd, \"Could not create Direct3D9 instance.\")",
          "new_text": null,
          "old_line_content": "            msg_Err(vd, \"Could not create Direct3D9 instance.\");",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 1250,
          "old_api": "IDirect3DDevice9_SetTextureStageState",
          "new_api": null,
          "old_text": "IDirect3DDevice9_SetTextureStageState(d3ddev, 0, D3DTSS_ALPHAARG2,D3DTA_DIFFUSE)",
          "new_text": null,
          "old_line_content": "    IDirect3DDevice9_SetTextureStageState(d3ddev, 0, D3DTSS_ALPHAARG2,D3DTA_DIFFUSE);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1756,
          "old_api": "FAILED",
          "new_api": null,
          "old_text": "FAILED(hr)",
          "new_text": null,
          "old_line_content": "    if (FAILED(hr)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1757,
          "old_api": "msg_Dbg",
          "new_api": null,
          "old_text": "msg_Dbg(vd, \"Failed IDirect3DDevice9_SetStreamSource: 0x%0lx\", hr)",
          "new_text": null,
          "old_line_content": "        msg_Dbg(vd, \"Failed IDirect3DDevice9_SetStreamSource: 0x%0lx\", hr);",
          "new_line_content": "    // Render the vertex buffer contents",
          "content_same": false
        },
        {
          "line": 1762,
          "old_api": "IDirect3DDevice9_SetFVF",
          "new_api": null,
          "old_text": "IDirect3DDevice9_SetFVF(d3ddev, D3DFVF_CUSTOMVERTEX)",
          "new_text": null,
          "old_line_content": "    hr = IDirect3DDevice9_SetFVF(d3ddev, D3DFVF_CUSTOMVERTEX);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1763,
          "old_api": "FAILED",
          "new_api": null,
          "old_text": "FAILED(hr)",
          "new_text": null,
          "old_line_content": "    if (FAILED(hr)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 743,
          "old_api": "Direct3D9LoadShaderLibrary",
          "new_api": null,
          "old_text": "Direct3D9LoadShaderLibrary()",
          "new_text": null,
          "old_line_content": "    sys->hd3d9x_dll = Direct3D9LoadShaderLibrary();",
          "new_line_content": "        sys->d3dobj = d3dobj;",
          "content_same": false
        },
        {
          "line": 1764,
          "old_api": "msg_Dbg",
          "new_api": null,
          "old_text": "msg_Dbg(vd, \"Failed IDirect3DDevice9_SetFVF: 0x%0lx\", hr)",
          "new_text": null,
          "old_line_content": "        msg_Dbg(vd, \"Failed IDirect3DDevice9_SetFVF: 0x%0lx\", hr);",
          "new_line_content": "    // we use FVF instead of vertex shader",
          "content_same": false
        },
        {
          "line": 745,
          "old_api": "msg_Warn",
          "new_api": null,
          "old_text": "msg_Warn(vd, \"cannot load Direct3D9 Shader Library; HLSL pixel shading will be disabled.\")",
          "new_text": null,
          "old_line_content": "        msg_Warn(vd, \"cannot load Direct3D9 Shader Library; HLSL pixel shading will be disabled.\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1769,
          "old_api": "IDirect3DDevice9_DrawPrimitive",
          "new_api": null,
          "old_text": "IDirect3DDevice9_DrawPrimitive(d3ddev, D3DPT_TRIANGLEFAN, 0, 2)",
          "new_text": null,
          "old_line_content": "    hr = IDirect3DDevice9_DrawPrimitive(d3ddev, D3DPT_TRIANGLEFAN, 0, 2);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1770,
          "old_api": "FAILED",
          "new_api": null,
          "old_text": "FAILED(hr)",
          "new_text": null,
          "old_line_content": "    if (FAILED(hr)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1771,
          "old_api": "msg_Dbg",
          "new_api": null,
          "old_text": "msg_Dbg(vd, \"Failed IDirect3DDevice9_DrawPrimitive: 0x%0lx\", hr)",
          "new_text": null,
          "old_line_content": "        msg_Dbg(vd, \"Failed IDirect3DDevice9_DrawPrimitive: 0x%0lx\", hr);",
          "new_line_content": "    // draw rectangle",
          "content_same": false
        },
        {
          "line": 750,
          "old_api": "ZeroMemory",
          "new_api": null,
          "old_text": "ZeroMemory(&sys->d3dcaps, sizeof(sys->d3dcaps))",
          "new_text": null,
          "old_line_content": "    ZeroMemory(&sys->d3dcaps, sizeof(sys->d3dcaps));",
          "new_line_content": "    /*",
          "content_same": false
        },
        {
          "line": 751,
          "old_api": "IDirect3D9_GetDeviceCaps",
          "new_api": null,
          "old_text": "IDirect3D9_GetDeviceCaps(sys->d3dobj, D3DADAPTER_DEFAULT, D3DDEVTYPE_HAL, &sys->d3dcaps)",
          "new_text": null,
          "old_line_content": "    HRESULT hr = IDirect3D9_GetDeviceCaps(sys->d3dobj, D3DADAPTER_DEFAULT, D3DDEVTYPE_HAL, &sys->d3dcaps);",
          "new_line_content": "    ** Get device capabilities",
          "content_same": false
        },
        {
          "line": 752,
          "old_api": "FAILED",
          "new_api": null,
          "old_text": "FAILED(hr)",
          "new_text": null,
          "old_line_content": "    if (FAILED(hr)) {",
          "new_line_content": "    */",
          "content_same": false
        },
        {
          "line": 1264,
          "old_api": "Direct3D9DeleteRegions",
          "new_api": null,
          "old_text": "Direct3D9DeleteRegions(sys->d3dregion_count, sys->d3dregion)",
          "new_text": null,
          "old_line_content": "    Direct3D9DeleteRegions(sys->d3dregion_count, sys->d3dregion);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1268,
          "old_api": "IDirect3DVertexBuffer9_Release",
          "new_api": null,
          "old_text": "IDirect3DVertexBuffer9_Release(d3dvtc)",
          "new_text": null,
          "old_line_content": "        IDirect3DVertexBuffer9_Release(d3dvtc);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1272,
          "old_api": "IDirect3DTexture9_Release",
          "new_api": null,
          "old_text": "IDirect3DTexture9_Release(d3dtex)",
          "new_text": null,
          "old_line_content": "        IDirect3DTexture9_Release(d3dtex);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 761,
          "old_api": "msg_Err",
          "new_api": null,
          "old_text": "msg_Err(vd, \"Device does not support stretching from textures.\")",
          "new_text": null,
          "old_line_content": "        msg_Err(vd, \"Device does not support stretching from textures.\");",
          "new_line_content": "    if (!(sys->d3dcaps.DevCaps2 & D3DDEVCAPS2_CAN_STRETCHRECT_FROM_TEXTURES) ||",
          "content_same": false
        },
        {
          "line": 768,
          "old_api": "msg_Err",
          "new_api": null,
          "old_text": "msg_Err(vd, \"Textures too large %ux%u max possible: %ux%u\",\n                vd->fmt.i_width, vd->fmt.i_height,\n                (unsigned) sys->d3dcaps.MaxTextureWidth,\n                (unsigned) sys->d3dcaps.MaxTextureHeight)",
          "new_text": null,
          "old_line_content": "        msg_Err(vd, \"Textures too large %ux%u max possible: %ux%u\",",
          "new_line_content": "    if ( vd->fmt.i_width > sys->d3dcaps.MaxTextureWidth ||",
          "content_same": false
        },
        {
          "line": 1280,
          "old_api": "msg_Dbg",
          "new_api": null,
          "old_text": "msg_Dbg(vd, \"Direct3D9 scene released successfully\")",
          "new_text": null,
          "old_line_content": "    msg_Dbg(vd, \"Direct3D9 scene released successfully\");",
          "new_line_content": "    sys->d3dregion_count = 0;",
          "content_same": false
        },
        {
          "line": 1794,
          "old_api": "IDirect3DDevice9_Clear",
          "new_api": null,
          "old_text": "IDirect3DDevice9_Clear(d3ddev, 0, NULL, D3DCLEAR_TARGET,\n                                  D3DCOLOR_XRGB(0, 0, 0), 1.0f, 0)",
          "new_text": null,
          "old_line_content": "        hr = IDirect3DDevice9_Clear(d3ddev, 0, NULL, D3DCLEAR_TARGET,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1795,
          "old_api": "D3DCOLOR_XRGB",
          "new_api": null,
          "old_text": "D3DCOLOR_XRGB(0, 0, 0)",
          "new_text": null,
          "old_line_content": "                                  D3DCOLOR_XRGB(0, 0, 0), 1.0f, 0);",
          "new_line_content": "    if (sys->clear_scene) {",
          "content_same": false
        },
        {
          "line": 1796,
          "old_api": "FAILED",
          "new_api": null,
          "old_text": "FAILED(hr)",
          "new_text": null,
          "old_line_content": "        if (FAILED(hr)) {",
          "new_line_content": "        /* Clear the backbuffer and the zbuffer */",
          "content_same": false
        },
        {
          "line": 1804,
          "old_api": "IDirect3DDevice9_BeginScene",
          "new_api": null,
          "old_text": "IDirect3DDevice9_BeginScene(d3ddev)",
          "new_text": null,
          "old_line_content": "    hr = IDirect3DDevice9_BeginScene(d3ddev);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1805,
          "old_api": "FAILED",
          "new_api": null,
          "old_text": "FAILED(hr)",
          "new_text": null,
          "old_line_content": "    if (FAILED(hr)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1806,
          "old_api": "msg_Dbg",
          "new_api": null,
          "old_text": "msg_Dbg(vd, \"Failed IDirect3DDevice9_BeginScene: 0x%0lx\", hr)",
          "new_text": null,
          "old_line_content": "        msg_Dbg(vd, \"Failed IDirect3DDevice9_BeginScene: 0x%0lx\", hr);",
          "new_line_content": "    // Begin the scene",
          "content_same": false
        },
        {
          "line": 786,
          "old_api": "IDirect3D9_Release",
          "new_api": null,
          "old_text": "IDirect3D9_Release(sys->d3dobj)",
          "new_text": null,
          "old_line_content": "       IDirect3D9_Release(sys->d3dobj);",
          "new_line_content": "    vout_display_sys_t *sys = vd->sys;",
          "content_same": false
        },
        {
          "line": 1810,
          "old_api": "Direct3D9RenderRegion",
          "new_api": null,
          "old_text": "Direct3D9RenderRegion(vd, picture, true)",
          "new_text": null,
          "old_line_content": "    Direct3D9RenderRegion(vd, picture, true);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 788,
          "old_api": "FreeLibrary",
          "new_api": null,
          "old_text": "FreeLibrary(sys->hd3d9_dll)",
          "new_text": null,
          "old_line_content": "        FreeLibrary(sys->hd3d9_dll);",
          "new_line_content": "    if (sys->d3dobj)",
          "content_same": false
        },
        {
          "line": 1301,
          "old_api": "msg_Warn",
          "new_api": null,
          "old_text": "msg_Warn(vd, \"Cannot locate reference to D3DXCompileShader; pixel shading will be disabled\")",
          "new_text": null,
          "old_line_content": "        msg_Warn(vd, \"Cannot locate reference to D3DXCompileShader; pixel shading will be disabled\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 790,
          "old_api": "FreeLibrary",
          "new_api": null,
          "old_text": "FreeLibrary(sys->hd3d9x_dll)",
          "new_text": null,
          "old_line_content": "        FreeLibrary(sys->hd3d9x_dll);",
          "new_line_content": "    if (sys->hd3d9_dll)",
          "content_same": false
        },
        {
          "line": 1817,
          "old_api": "Direct3D9RenderRegion",
          "new_api": null,
          "old_text": "Direct3D9RenderRegion(vd, r, false)",
          "new_text": null,
          "old_line_content": "            Direct3D9RenderRegion(vd, r, false);",
          "new_line_content": "    for (int i = 0; i < subpicture_count; i++) {",
          "content_same": false
        },
        {
          "line": 1309,
          "old_api": "OurD3DXCompileShader",
          "new_api": null,
          "old_text": "OurD3DXCompileShader(shader_source, source_length, NULL, NULL,\n                \"main\", \"ps_3_0\", shader_flags, &compiled_shader, &error_msgs, NULL)",
          "new_text": null,
          "old_line_content": "    HRESULT hr = OurD3DXCompileShader(shader_source, source_length, NULL, NULL,",
          "new_line_content": "    LPD3DXBUFFER compiled_shader = NULL;",
          "content_same": false
        },
        {
          "line": 1824,
          "old_api": "FAILED",
          "new_api": null,
          "old_text": "FAILED(hr)",
          "new_text": null,
          "old_line_content": "    if (FAILED(hr)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1313,
          "old_api": "msg_Warn",
          "new_api": null,
          "old_text": "msg_Warn(vd, \"D3DXCompileShader Error (hr=0x%0lx)\", hr)",
          "new_text": null,
          "old_line_content": "        msg_Warn(vd, \"D3DXCompileShader Error (hr=0x%0lx)\", hr);",
          "new_line_content": "                \"main\", \"ps_3_0\", shader_flags, &compiled_shader, &error_msgs, NULL);",
          "content_same": false
        },
        {
          "line": 1825,
          "old_api": "msg_Dbg",
          "new_api": null,
          "old_text": "msg_Dbg(vd, \"Failed IDirect3DDevice9_EndScene: 0x%0lx\", hr)",
          "new_text": null,
          "old_line_content": "        msg_Dbg(vd, \"Failed IDirect3DDevice9_EndScene: 0x%0lx\", hr);",
          "new_line_content": "    // End the scene",
          "content_same": false
        },
        {
          "line": 1321,
          "old_api": "IDirect3DDevice9_CreatePixelShader",
          "new_api": null,
          "old_text": "IDirect3DDevice9_CreatePixelShader(sys->d3ddev,\n            ID3DXBuffer_GetBufferPointer(compiled_shader),\n            &sys->d3dx_shader)",
          "new_text": null,
          "old_line_content": "    hr = IDirect3DDevice9_CreatePixelShader(sys->d3ddev,",
          "new_line_content": "        return VLC_EGENERIC;",
          "content_same": false
        },
        {
          "line": 1322,
          "old_api": "ID3DXBuffer_GetBufferPointer",
          "new_api": null,
          "old_text": "ID3DXBuffer_GetBufferPointer(compiled_shader)",
          "new_text": null,
          "old_line_content": "            ID3DXBuffer_GetBufferPointer(compiled_shader),",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 811,
          "old_api": "IDirect3D9_GetAdapterDisplayMode",
          "new_api": null,
          "old_text": "IDirect3D9_GetAdapterDisplayMode(sys->d3dobj,\n                                                  D3DADAPTER_DEFAULT, &d3ddm)",
          "new_text": null,
          "old_line_content": "    HRESULT hr = IDirect3D9_GetAdapterDisplayMode(sys->d3dobj,",
          "new_line_content": "    ** buffer of the same format",
          "content_same": false
        },
        {
          "line": 813,
          "old_api": "FAILED",
          "new_api": null,
          "old_text": "FAILED(hr)",
          "new_text": null,
          "old_line_content": "    if (FAILED(hr)) {",
          "new_line_content": "    D3DDISPLAYMODE d3ddm;",
          "content_same": false
        },
        {
          "line": 1326,
          "old_api": "ID3DXBuffer_Release",
          "new_api": null,
          "old_text": "ID3DXBuffer_Release(compiled_shader)",
          "new_text": null,
          "old_line_content": "        ID3DXBuffer_Release(compiled_shader);",
          "new_line_content": "            &sys->d3dx_shader);",
          "content_same": false
        },
        {
          "line": 1839,
          "old_api": "VLC_UNUSED",
          "new_api": null,
          "old_text": "VLC_UNUSED(psz_cmd)",
          "new_text": null,
          "old_line_content": "    VLC_UNUSED(psz_cmd);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1328,
          "old_api": "ID3DXBuffer_Release",
          "new_api": null,
          "old_text": "ID3DXBuffer_Release(error_msgs)",
          "new_text": null,
          "old_line_content": "        ID3DXBuffer_Release(error_msgs);",
          "new_line_content": "    if (compiled_shader)",
          "content_same": false
        },
        {
          "line": 1840,
          "old_api": "VLC_UNUSED",
          "new_api": null,
          "old_text": "VLC_UNUSED(oldval)",
          "new_text": null,
          "old_line_content": "    VLC_UNUSED(oldval);",
          "new_line_content": "    vout_display_t *vd = (vout_display_t *)object;",
          "content_same": false
        },
        {
          "line": 1330,
          "old_api": "FAILED",
          "new_api": null,
          "old_text": "FAILED(hr)",
          "new_text": null,
          "old_line_content": "    if (FAILED(hr)) {",
          "new_line_content": "    if (error_msgs)",
          "content_same": false
        },
        {
          "line": 1841,
          "old_api": "VLC_UNUSED",
          "new_api": null,
          "old_text": "VLC_UNUSED(p_data)",
          "new_text": null,
          "old_line_content": "    VLC_UNUSED(p_data);",
          "new_line_content": "    vout_display_sys_t *sys = vd->sys;",
          "content_same": false
        },
        {
          "line": 820,
          "old_api": "ZeroMemory",
          "new_api": null,
          "old_text": "ZeroMemory(d3dpp, sizeof(D3DPRESENT_PARAMETERS))",
          "new_text": null,
          "old_line_content": "    ZeroMemory(d3dpp, sizeof(D3DPRESENT_PARAMETERS));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1847,
          "old_api": "vlc_mutex_unlock",
          "new_api": null,
          "old_text": "vlc_mutex_unlock(&sys->lock)",
          "new_text": null,
          "old_line_content": "    vlc_mutex_unlock(&sys->lock);",
          "new_line_content": "    const bool ch_desktop = !sys->desktop_requested != !newval.b_bool;",
          "content_same": false
        },
        {
          "line": 824,
          "old_api": "GetSystemMetrics",
          "new_api": null,
          "old_text": "GetSystemMetrics(SM_CXVIRTUALSCREEN)",
          "new_text": null,
          "old_line_content": "    d3dpp->BackBufferWidth        = __MAX((unsigned int)GetSystemMetrics(SM_CXVIRTUALSCREEN),",
          "new_line_content": "    d3dpp->Flags                  = D3DPRESENTFLAG_VIDEO;",
          "content_same": false
        },
        {
          "line": 826,
          "old_api": "GetSystemMetrics",
          "new_api": null,
          "old_text": "GetSystemMetrics(SM_CYVIRTUALSCREEN)",
          "new_text": null,
          "old_line_content": "    d3dpp->BackBufferHeight       = __MAX((unsigned int)GetSystemMetrics(SM_CYVIRTUALSCREEN),",
          "new_line_content": "    d3dpp->hDeviceWindow          = vd->sys->sys.hvideownd;",
          "content_same": false
        },
        {
          "line": 1347,
          "old_api": "var_InheritString",
          "new_api": null,
          "old_text": "var_InheritString(vd, \"direct3d9-shader\")",
          "new_text": null,
          "old_line_content": "    char *selected_shader = var_InheritString(vd, \"direct3d9-shader\");",
          "new_line_content": "        return VLC_EGENERIC;",
          "content_same": false
        },
        {
          "line": 1861,
          "old_api": "xrealloc",
          "new_api": null,
          "old_text": "xrealloc(ctx->values, (ctx->count + num_shaders + 1) * sizeof(char *))",
          "new_text": null,
          "old_line_content": "    ctx->values = xrealloc(ctx->values, (ctx->count + num_shaders + 1) * sizeof(char *));",
          "new_line_content": "static void ListShaders(enum_context_t *ctx)",
          "content_same": false
        },
        {
          "line": 1862,
          "old_api": "xrealloc",
          "new_api": null,
          "old_text": "xrealloc(ctx->descs, (ctx->count + num_shaders + 1) * sizeof(char *))",
          "new_text": null,
          "old_line_content": "    ctx->descs = xrealloc(ctx->descs, (ctx->count + num_shaders + 1) * sizeof(char *));",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1356,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(selected_shader, builtin_shaders[i].name)",
          "new_text": null,
          "old_line_content": "        if (!strcmp(selected_shader, builtin_shaders[i].name)) {",
          "new_line_content": "    FILE *fs = NULL;",
          "content_same": false
        },
        {
          "line": 1869,
          "old_api": "strdup",
          "new_api": null,
          "old_text": "strdup(SELECTED_SHADER_FILE)",
          "new_text": null,
          "old_line_content": "    ctx->descs[ctx->count] = strdup(SELECTED_SHADER_FILE);",
          "new_line_content": "        ctx->count++;",
          "content_same": false
        },
        {
          "line": 1364,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(shader_source_builtin)",
          "new_text": null,
          "old_line_content": "        int err = Direct3D9CompileShader(vd, shader_source_builtin, strlen(shader_source_builtin));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1877,
          "old_api": "VLC_UNUSED",
          "new_api": null,
          "old_text": "VLC_UNUSED(object)",
          "new_text": null,
          "old_line_content": "    VLC_UNUSED(object);",
          "new_line_content": "static int FindShadersCallback(vlc_object_t *object, const char *name,",
          "content_same": false
        },
        {
          "line": 1878,
          "old_api": "VLC_UNUSED",
          "new_api": null,
          "old_text": "VLC_UNUSED(name)",
          "new_text": null,
          "old_line_content": "    VLC_UNUSED(name);",
          "new_line_content": "                               char ***values, char ***descs)",
          "content_same": false
        },
        {
          "line": 1368,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(selected_shader, SELECTED_SHADER_FILE)",
          "new_text": null,
          "old_line_content": "        if (strcmp(selected_shader, SELECTED_SHADER_FILE))",
          "new_line_content": "        if (err)",
          "content_same": false
        },
        {
          "line": 857,
          "old_api": "Direct3D9FillPresentationParameters",
          "new_api": null,
          "old_text": "Direct3D9FillPresentationParameters(vd)",
          "new_text": null,
          "old_line_content": "    if (Direct3D9FillPresentationParameters(vd))",
          "new_line_content": "    vout_display_sys_t *sys = vd->sys;",
          "content_same": false
        },
        {
          "line": 1882,
          "old_api": "ListShaders",
          "new_api": null,
          "old_text": "ListShaders(&ctx)",
          "new_text": null,
          "old_line_content": "    ListShaders(&ctx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1378,
          "old_api": "fopen",
          "new_api": null,
          "old_text": "fopen(filepath, \"rb\")",
          "new_text": null,
          "old_line_content": "        fs = fopen(filepath, \"rb\");",
          "new_line_content": "            goto error;",
          "content_same": false
        },
        {
          "line": 867,
          "old_api": "IDirect3D9_GetAdapterCount",
          "new_api": null,
          "old_text": "IDirect3D9_GetAdapterCount(d3dobj)",
          "new_text": null,
          "old_line_content": "    for (UINT Adapter=0; Adapter< IDirect3D9_GetAdapterCount(d3dobj); ++Adapter) {",
          "new_line_content": "#ifndef NDEBUG",
          "content_same": false
        },
        {
          "line": 869,
          "old_api": "IDirect3D9_GetAdapterIdentifier",
          "new_api": null,
          "old_text": "IDirect3D9_GetAdapterIdentifier(d3dobj,Adapter,0,&Identifier)",
          "new_text": null,
          "old_line_content": "        HRESULT Res = IDirect3D9_GetAdapterIdentifier(d3dobj,Adapter,0,&Identifier);",
          "new_line_content": "    // If it is present, override default settings",
          "content_same": false
        },
        {
          "line": 1388,
          "old_api": "malloc",
          "new_api": null,
          "old_text": "malloc(sizeof(*shader_source_file) * length)",
          "new_text": null,
          "old_line_content": "        shader_source_file = malloc(sizeof(*shader_source_file) * length);",
          "new_line_content": "        if (length == -1 || length >= MAX_SHADER_FILE_SIZE)",
          "content_same": false
        },
        {
          "line": 880,
          "old_api": "IDirect3D9_GetAdapterIdentifier",
          "new_api": null,
          "old_text": "IDirect3D9_GetAdapterIdentifier(d3dobj,AdapterToUse,0, &d3dai)",
          "new_text": null,
          "old_line_content": "    if (FAILED(IDirect3D9_GetAdapterIdentifier(d3dobj,AdapterToUse,0, &d3dai))) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 881,
          "old_api": "msg_Warn",
          "new_api": null,
          "old_text": "msg_Warn(vd, \"IDirect3D9_GetAdapterIdentifier failed\")",
          "new_text": null,
          "old_line_content": "        msg_Warn(vd, \"IDirect3D9_GetAdapterIdentifier failed\");",
          "new_line_content": "    /* */",
          "content_same": false
        },
        {
          "line": 1399,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(selected_shader)",
          "new_text": null,
          "old_line_content": "    free(selected_shader);",
          "new_line_content": "            goto error;",
          "content_same": false
        },
        {
          "line": 1400,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(shader_source_file)",
          "new_text": null,
          "old_line_content": "    free(shader_source_file);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1401,
          "old_api": "fclose",
          "new_api": null,
          "old_text": "fclose(fs)",
          "new_text": null,
          "old_line_content": "    fclose(fs);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 891,
          "old_api": "IDirect3D9Ex_CreateDeviceEx",
          "new_api": null,
          "old_text": "IDirect3D9Ex_CreateDeviceEx((LPDIRECT3D9EX)d3dobj, AdapterToUse,\n                                         DeviceType, sys->sys.hvideownd,\n                                         D3DCREATE_SOFTWARE_VERTEXPROCESSING|\n                                         D3DCREATE_MULTITHREADED,\n                                         &sys->d3dpp, NULL, &d3ddevex)",
          "new_text": null,
          "old_line_content": "        hr = IDirect3D9Ex_CreateDeviceEx((LPDIRECT3D9EX)d3dobj, AdapterToUse,",
          "new_line_content": "    HRESULT hr;",
          "content_same": false
        },
        {
          "line": 1406,
          "old_api": "Direct3D9DestroyShaders",
          "new_api": null,
          "old_text": "Direct3D9DestroyShaders(vd)",
          "new_text": null,
          "old_line_content": "    Direct3D9DestroyShaders(vd);",
          "new_line_content": "    return VLC_SUCCESS;",
          "content_same": false
        },
        {
          "line": 1407,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(selected_shader)",
          "new_text": null,
          "old_line_content": "    free(selected_shader);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1408,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(shader_source_file)",
          "new_text": null,
          "old_line_content": "    free(shader_source_file);",
          "new_line_content": "error:",
          "content_same": false
        },
        {
          "line": 387,
          "old_api": "calloc",
          "new_api": null,
          "old_text": "calloc(count, sizeof(*pictures))",
          "new_text": null,
          "old_line_content": "    pictures = calloc(count, sizeof(*pictures));",
          "new_line_content": "    if ( vd->sys->sys.pool != NULL )",
          "content_same": false
        },
        {
          "line": 899,
          "old_api": "IDirect3D9_CreateDevice",
          "new_api": null,
          "old_text": "IDirect3D9_CreateDevice(d3dobj, AdapterToUse,\n                                     DeviceType, sys->sys.hvideownd,\n                                     D3DCREATE_SOFTWARE_VERTEXPROCESSING|\n                                     D3DCREATE_MULTITHREADED,\n                                     &sys->d3dpp, &d3ddev)",
          "new_text": null,
          "old_line_content": "        hr = IDirect3D9_CreateDevice(d3dobj, AdapterToUse,",
          "new_line_content": "        sys->d3ddev = (LPDIRECT3DDEVICE9)d3ddevex;",
          "content_same": false
        },
        {
          "line": 395,
          "old_api": "MAKEFOURCC",
          "new_api": null,
          "old_text": "MAKEFOURCC('P','0','1','0')",
          "new_text": null,
          "old_line_content": "        format = MAKEFOURCC('P','0','1','0');",
          "new_line_content": "    switch (vd->fmt.i_chroma)",
          "content_same": false
        },
        {
          "line": 1419,
          "old_api": "IDirect3DPixelShader9_Release",
          "new_api": null,
          "old_text": "IDirect3DPixelShader9_Release(sys->d3dx_shader)",
          "new_text": null,
          "old_line_content": "        IDirect3DPixelShader9_Release(sys->d3dx_shader);",
          "new_line_content": "    vout_display_sys_t *sys = vd->sys;",
          "content_same": false
        },
        {
          "line": 913,
          "old_api": "Direct3DFindFormat",
          "new_api": null,
          "old_text": "Direct3DFindFormat(vd, fmt->i_chroma, sys->d3dpp.BackBufferFormat)",
          "new_text": null,
          "old_line_content": "    const d3d_format_t *d3dfmt = Direct3DFindFormat(vd, fmt->i_chroma, sys->d3dpp.BackBufferFormat);",
          "new_line_content": "    /* Find the appropriate D3DFORMAT for the render chroma, the format will be the closest to",
          "content_same": false
        },
        {
          "line": 915,
          "old_api": "msg_Err",
          "new_api": null,
          "old_text": "msg_Err(vd, \"surface pixel format is not supported.\")",
          "new_text": null,
          "old_line_content": "        msg_Err(vd, \"surface pixel format is not supported.\");",
          "new_line_content": "     * typically support more formats than textures */",
          "content_same": false
        },
        {
          "line": 407,
          "old_api": "malloc",
          "new_api": null,
          "old_text": "malloc(sizeof(*picsys))",
          "new_text": null,
          "old_line_content": "        picture_sys_t *picsys = malloc(sizeof(*picsys));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 408,
          "old_api": "unlikely",
          "new_api": null,
          "old_text": "unlikely(picsys == NULL)",
          "new_text": null,
          "old_line_content": "        if (unlikely(picsys == NULL))",
          "new_line_content": "    for (picture_count = 0; picture_count < count; ++picture_count)",
          "content_same": false
        },
        {
          "line": 924,
          "old_api": "FAILED",
          "new_api": null,
          "old_text": "FAILED(hr)",
          "new_text": null,
          "old_line_content": "    if (FAILED(hr)) {",
          "new_line_content": "    fmt->i_bmask  = d3dfmt->bmask;",
          "content_same": false
        },
        {
          "line": 925,
          "old_api": "msg_Err",
          "new_api": null,
          "old_text": "msg_Err(vd, \"Could not create the D3D9 device! (hr=0x%0lx)\", hr)",
          "new_text": null,
          "old_line_content": "       msg_Err(vd, \"Could not create the D3D9 device! (hr=0x%0lx)\", hr);",
          "new_line_content": "    sys->d3dtexture_format = d3dfmt;",
          "content_same": false
        },
        {
          "line": 929,
          "old_api": "UpdateRects",
          "new_api": null,
          "old_text": "UpdateRects(vd, NULL, NULL, true)",
          "new_text": null,
          "old_line_content": "    UpdateRects(vd, NULL, NULL, true);",
          "new_line_content": "       return VLC_EGENERIC;",
          "content_same": false
        },
        {
          "line": 418,
          "old_api": "FAILED",
          "new_api": null,
          "old_text": "FAILED(hr)",
          "new_text": null,
          "old_line_content": "        if (FAILED(hr)) {",
          "new_line_content": "                                                          D3DPOOL_DEFAULT,",
          "content_same": false
        },
        {
          "line": 419,
          "old_api": "msg_Err",
          "new_api": null,
          "old_text": "msg_Err(vd, \"Failed to allocate surface %d (hr=0x%0lx)\", picture_count, hr)",
          "new_text": null,
          "old_line_content": "           msg_Err(vd, \"Failed to allocate surface %d (hr=0x%0lx)\", picture_count, hr);",
          "new_line_content": "                                                          &picsys->surface,",
          "content_same": false
        },
        {
          "line": 420,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(picsys)",
          "new_text": null,
          "old_line_content": "           free(picsys);",
          "new_line_content": "                                                          NULL);",
          "content_same": false
        },
        {
          "line": 931,
          "old_api": "Direct3D9CreateResources",
          "new_api": null,
          "old_text": "Direct3D9CreateResources(vd, fmt)",
          "new_text": null,
          "old_line_content": "    if (Direct3D9CreateResources(vd, fmt)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 937,
          "old_api": "EventThreadUpdateTitle",
          "new_api": null,
          "old_text": "EventThreadUpdateTitle(sys->sys.event, VOUT_TITLE \" (Direct3D9 output)\")",
          "new_text": null,
          "old_line_content": "    EventThreadUpdateTitle(sys->sys.event, VOUT_TITLE \" (Direct3D9 output)\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 939,
          "old_api": "msg_Dbg",
          "new_api": null,
          "old_text": "msg_Dbg(vd, \"Direct3D9 device adapter successfully initialized\")",
          "new_text": null,
          "old_line_content": "    msg_Dbg(vd, \"Direct3D9 device adapter successfully initialized\");",
          "new_line_content": "    /* Change the window title bar text */",
          "content_same": false
        },
        {
          "line": 429,
          "old_api": "picture_NewFromResource",
          "new_api": null,
          "old_text": "picture_NewFromResource(&vd->fmt, &resource)",
          "new_text": null,
          "old_line_content": "        picture_t *picture = picture_NewFromResource(&vd->fmt, &resource);",
          "new_line_content": "            .pf_destroy = DestroyPicture,",
          "content_same": false
        },
        {
          "line": 430,
          "old_api": "unlikely",
          "new_api": null,
          "old_text": "unlikely(picture == NULL)",
          "new_text": null,
          "old_line_content": "        if (unlikely(picture == NULL)) {",
          "new_line_content": "        };",
          "content_same": false
        },
        {
          "line": 431,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(picsys)",
          "new_text": null,
          "old_line_content": "            free(picsys);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 950,
          "old_api": "Direct3D9DestroyResources",
          "new_api": null,
          "old_text": "Direct3D9DestroyResources(vd)",
          "new_text": null,
          "old_line_content": "    Direct3D9DestroyResources(vd);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 439,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(&pool_cfg, 0, sizeof(pool_cfg))",
          "new_text": null,
          "old_line_content": "    memset(&pool_cfg, 0, sizeof(pool_cfg));",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 448,
          "old_api": "picture_pool_NewExtended",
          "new_api": null,
          "old_text": "picture_pool_NewExtended( &pool_cfg )",
          "new_text": null,
          "old_line_content": "    vd->sys->sys.pool = picture_pool_NewExtended( &pool_cfg );",
          "new_line_content": "        pool_cfg.unlock = Direct3D9UnlockSurface;",
          "content_same": false
        },
        {
          "line": 453,
          "old_api": "DestroyPicture",
          "new_api": null,
          "old_text": "DestroyPicture(pictures[i])",
          "new_text": null,
          "old_line_content": "            DestroyPicture(pictures[i]);",
          "new_line_content": "error:",
          "content_same": false
        },
        {
          "line": 965,
          "old_api": "Direct3D9FillPresentationParameters",
          "new_api": null,
          "old_text": "Direct3D9FillPresentationParameters(vd)",
          "new_text": null,
          "old_line_content": "    if (Direct3D9FillPresentationParameters(vd))",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 455,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(pictures)",
          "new_text": null,
          "old_line_content": "    free(pictures);",
          "new_line_content": "        for (unsigned i=0;i<picture_count; ++i)",
          "content_same": false
        },
        {
          "line": 969,
          "old_api": "Direct3D9DestroyResources",
          "new_api": null,
          "old_text": "Direct3D9DestroyResources(vd)",
          "new_text": null,
          "old_line_content": "    Direct3D9DestroyResources(vd);",
          "new_line_content": "        return VLC_EGENERIC;",
          "content_same": false
        },
        {
          "line": 975,
          "old_api": "IDirect3DDevice9Ex_ResetEx",
          "new_api": null,
          "old_text": "IDirect3DDevice9Ex_ResetEx(d3ddev, &sys->d3dpp, NULL)",
          "new_text": null,
          "old_line_content": "        hr = IDirect3DDevice9Ex_ResetEx(d3ddev, &sys->d3dpp, NULL);",
          "new_line_content": "    HRESULT hr;",
          "content_same": false
        },
        {
          "line": 980,
          "old_api": "FAILED",
          "new_api": null,
          "old_text": "FAILED(hr)",
          "new_text": null,
          "old_line_content": "    if (FAILED(hr)) {",
          "new_line_content": "        LPDIRECT3DDEVICE9 d3ddev = sys->d3ddev;",
          "content_same": false
        },
        {
          "line": 469,
          "old_api": "is_d3d9_opaque",
          "new_api": null,
          "old_text": "is_d3d9_opaque(picture->format.i_chroma)",
          "new_text": null,
          "old_line_content": "    if ( !is_d3d9_opaque(picture->format.i_chroma) )",
          "new_line_content": "     *  The clean way would be to release the picture (and ensure that",
          "content_same": false
        },
        {
          "line": 470,
          "old_api": "Direct3D9UnlockSurface",
          "new_api": null,
          "old_text": "Direct3D9UnlockSurface(picture)",
          "new_text": null,
          "old_line_content": "        Direct3D9UnlockSurface(picture);",
          "new_line_content": "     * the vout doesn't keep a reference). But because of the vout",
          "content_same": false
        },
        {
          "line": 985,
          "old_api": "UpdateRects",
          "new_api": null,
          "old_text": "UpdateRects(vd, NULL, NULL, true)",
          "new_text": null,
          "old_line_content": "    UpdateRects(vd, NULL, NULL, true);",
          "new_line_content": "        return VLC_EGENERIC;",
          "content_same": false
        },
        {
          "line": 474,
          "old_api": "FAILED",
          "new_api": null,
          "old_text": "FAILED(hr)",
          "new_text": null,
          "old_line_content": "    if (FAILED(hr)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 989,
          "old_api": "msg_Dbg",
          "new_api": null,
          "old_text": "msg_Dbg(vd, \"Direct3D9CreateResources failed !\")",
          "new_text": null,
          "old_line_content": "        msg_Dbg(vd, \"Direct3D9CreateResources failed !\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1510,
          "old_api": "orientationVertexOrder",
          "new_api": null,
          "old_text": "orientationVertexOrder(orientation, vertex_order)",
          "new_text": null,
          "old_line_content": "    orientationVertexOrder(orientation, vertex_order);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 488,
          "old_api": "Direct3D9ImportPicture",
          "new_api": null,
          "old_text": "Direct3D9ImportPicture(vd, &picture_region, surface)",
          "new_text": null,
          "old_line_content": "    if (!Direct3D9ImportPicture(vd, &picture_region, surface)) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 494,
          "old_api": "Direct3D9ImportSubpicture",
          "new_api": null,
          "old_text": "Direct3D9ImportSubpicture(vd, &subpicture_region_count, &subpicture_region,\n                                     subpicture)",
          "new_text": null,
          "old_line_content": "            Direct3D9ImportSubpicture(vd, &subpicture_region_count, &subpicture_region,",
          "new_line_content": "        int subpicture_region_count     = 0;",
          "content_same": false
        },
        {
          "line": 1009,
          "old_api": "Direct3D9CreateScene",
          "new_api": null,
          "old_text": "Direct3D9CreateScene(vd, fmt)",
          "new_text": null,
          "old_line_content": "    if (Direct3D9CreateScene(vd, fmt)) {",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1010,
          "old_api": "msg_Err",
          "new_api": null,
          "old_text": "msg_Err(vd, \"Direct3D scene initialization failed !\")",
          "new_text": null,
          "old_line_content": "        msg_Err(vd, \"Direct3D scene initialization failed !\");",
          "new_line_content": "    vout_display_sys_t *sys = vd->sys;",
          "content_same": false
        },
        {
          "line": 1015,
          "old_api": "msg_Warn",
          "new_api": null,
          "old_text": "msg_Warn(vd, \"Direct3D shaders initialization failed !\")",
          "new_text": null,
          "old_line_content": "        msg_Warn(vd, \"Direct3D shaders initialization failed !\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1021,
          "old_api": "IDirect3D9_CheckDeviceFormat",
          "new_api": null,
          "old_text": "IDirect3D9_CheckDeviceFormat(sys->d3dobj,\n                                                   D3DADAPTER_DEFAULT,\n                                                   D3DDEVTYPE_HAL,\n                                                   sys->d3dpp.BackBufferFormat,\n                                                   D3DUSAGE_DYNAMIC,\n                                                   D3DRTYPE_TEXTURE,\n                                                   fmt)",
          "new_text": null,
          "old_line_content": "        if (SUCCEEDED(IDirect3D9_CheckDeviceFormat(sys->d3dobj,",
          "new_line_content": "    sys->d3dregion_format = D3DFMT_UNKNOWN;",
          "content_same": false
        },
        {
          "line": 511,
          "old_api": "picture_Release",
          "new_api": null,
          "old_text": "picture_Release(picture)",
          "new_text": null,
          "old_line_content": "        picture_Release(picture);",
          "new_line_content": "    vout_display_sys_t *sys = vd->sys;",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 53,
      "total_additions": 235,
      "total_deletions": 235,
      "total_api_changes": 523
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 3,
        "api_related_lines": 523,
        "non_api_lines": 2,
        "non_api_line_numbers": [
          388,
          389
        ]
      }
    },
    "api_calls_before": 368,
    "api_calls_after": 368,
    "diff_info": {
      "added_lines": 3,
      "removed_lines": 0,
      "total_diff_lines": 15
    }
  }
}
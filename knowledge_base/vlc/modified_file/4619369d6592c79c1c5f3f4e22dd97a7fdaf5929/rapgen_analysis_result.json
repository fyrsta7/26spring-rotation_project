{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/vlc/modified_file/4619369d6592c79c1c5f3f4e22dd97a7fdaf5929",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/vlc/modified_file/4619369d6592c79c1c5f3f4e22dd97a7fdaf5929/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/vlc/modified_file/4619369d6592c79c1c5f3f4e22dd97a7fdaf5929/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/vlc/modified_file/4619369d6592c79c1c5f3f4e22dd97a7fdaf5929/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 136,
          "old_api": "subpicture_region_New",
          "new_api": "subpicture_region_ForPicture",
          "old_text": "subpicture_region_New( &fmt_out )",
          "new_text": "subpicture_region_ForPicture( &fmt_out, p_pip )",
          "old_line_content": "    p_subpic->p_region = subpicture_region_New( &fmt_out );",
          "new_line_content": "    p_subpic->p_region = subpicture_region_ForPicture( &fmt_out, p_pip );",
          "content_same": false
        },
        {
          "line": 166,
          "old_api": "pf_validate",
          "new_api": "subpicture_region_ChainDelete",
          "old_text": "p_upd->pf_validate( p_subpicture,\n                          !video_format_IsSimilar( p_fmt_src,\n                                                   &p_private->src ), p_fmt_src,\n                          !video_format_IsSimilar( p_fmt_dst,\n                                                   &p_private->dst ), p_fmt_dst,\n                          i_ts )",
          "new_text": "subpicture_region_ChainDelete( p_subpicture->p_region )",
          "old_line_content": "    if( !p_upd->pf_validate( p_subpicture,",
          "new_line_content": "    subpicture_region_ChainDelete( p_subpicture->p_region );",
          "content_same": false
        },
        {
          "line": 169,
          "old_api": "video_format_IsSimilar",
          "new_api": "pf_update",
          "old_text": "video_format_IsSimilar( p_fmt_dst,\n                                                   &p_private->dst )",
          "new_text": "p_upd->pf_update( p_subpicture, p_fmt_src, p_fmt_dst, i_ts )",
          "old_line_content": "                          !video_format_IsSimilar( p_fmt_dst,",
          "new_line_content": "    p_upd->pf_update( p_subpicture, p_fmt_src, p_fmt_dst, i_ts );",
          "content_same": false
        },
        {
          "line": 174,
          "old_api": "subpicture_region_ChainDelete",
          "new_api": "video_format_Copy",
          "old_text": "subpicture_region_ChainDelete( p_subpicture->p_region )",
          "new_text": "video_format_Copy( &p_private->src, p_fmt_src )",
          "old_line_content": "    subpicture_region_ChainDelete( p_subpicture->p_region );",
          "new_line_content": "    video_format_Copy( &p_private->src, p_fmt_src );",
          "content_same": false
        },
        {
          "line": 317,
          "old_api": "assert",
          "new_api": "msg_Err",
          "old_text": "assert(src && !src->b_fade && src->b_absolute)",
          "new_text": "msg_Err(blend, \"blending %4.4s to %4.4s failed\",\n                    (char *)&blend->fmt_in.video.i_chroma,\n                    (char *)&blend->fmt_out.video.i_chroma )",
          "old_line_content": "    assert(src && !src->b_fade && src->b_absolute);",
          "new_line_content": "            msg_Err(blend, \"blending %4.4s to %4.4s failed\",",
          "content_same": false
        },
        {
          "line": 339,
          "old_api": "unlikely",
          "new_api": "text_segment_Copy",
          "old_text": "unlikely(!p_region_dst)",
          "new_text": "text_segment_Copy( p_region_src->p_text )",
          "old_line_content": "    if (unlikely(!p_region_dst))",
          "new_line_content": "    p_region_dst->p_text = text_segment_Copy( p_region_src->p_text );",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 137,
          "old_api": null,
          "new_api": "picture_Release",
          "old_text": null,
          "new_text": "picture_Release( p_pip )",
          "old_line_content": "    if( p_subpic->p_region )",
          "new_line_content": "    picture_Release( p_pip );",
          "content_same": false
        },
        {
          "line": 265,
          "old_api": null,
          "new_api": "subpicture_region_NewInternal",
          "old_text": null,
          "new_text": "subpicture_region_NewInternal( p_fmt )",
          "old_line_content": "    return p_region;",
          "new_line_content": "    subpicture_region_t *p_region = subpicture_region_NewInternal( p_fmt );",
          "content_same": false
        },
        {
          "line": 269,
          "old_api": null,
          "new_api": "picture_Hold",
          "old_text": null,
          "new_text": "picture_Hold(pic)",
          "old_line_content": "{",
          "new_line_content": "    p_region->p_picture = picture_Hold(pic);",
          "content_same": false
        },
        {
          "line": 141,
          "old_api": null,
          "new_api": "subpicture_Delete",
          "old_text": null,
          "new_text": "subpicture_Delete(p_subpic)",
          "old_line_content": "    }",
          "new_line_content": "        subpicture_Delete(p_subpic);",
          "content_same": false
        },
        {
          "line": 280,
          "old_api": null,
          "new_api": "subpicture_region_private_Delete",
          "old_text": null,
          "new_text": "subpicture_region_private_Delete( p_region->p_private )",
          "old_line_content": "}",
          "new_line_content": "        subpicture_region_private_Delete( p_region->p_private );",
          "content_same": false
        },
        {
          "line": 283,
          "old_api": null,
          "new_api": "picture_Release",
          "old_text": null,
          "new_text": "picture_Release( p_region->p_picture )",
          "old_line_content": "{",
          "new_line_content": "        picture_Release( p_region->p_picture );",
          "content_same": false
        },
        {
          "line": 285,
          "old_api": null,
          "new_api": "text_segment_ChainDelete",
          "old_text": null,
          "new_text": "text_segment_ChainDelete( p_region->p_text )",
          "old_line_content": "        return;",
          "new_line_content": "    text_segment_ChainDelete( p_region->p_text );",
          "content_same": false
        },
        {
          "line": 286,
          "old_api": null,
          "new_api": "video_format_Clean",
          "old_text": null,
          "new_text": "video_format_Clean( &p_region->fmt )",
          "old_line_content": "",
          "new_line_content": "    video_format_Clean( &p_region->fmt );",
          "content_same": false
        },
        {
          "line": 287,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free( p_region )",
          "old_line_content": "    if( p_region->p_private )",
          "new_line_content": "    free( p_region );",
          "content_same": false
        },
        {
          "line": 158,
          "old_api": null,
          "new_api": "pf_validate",
          "old_text": null,
          "new_text": "p_upd->pf_validate( p_subpicture,\n                          !video_format_IsSimilar( p_fmt_src,\n                                                   &p_private->src ), p_fmt_src,\n                          !video_format_IsSimilar( p_fmt_dst,\n                                                   &p_private->dst ), p_fmt_dst,\n                          i_ts )",
          "old_line_content": "                        const video_format_t *p_fmt_dst,",
          "new_line_content": "    if( !p_upd->pf_validate( p_subpicture,",
          "content_same": false
        },
        {
          "line": 161,
          "old_api": null,
          "new_api": "video_format_IsSimilar",
          "old_text": null,
          "new_text": "video_format_IsSimilar( p_fmt_dst,\n                                                   &p_private->dst )",
          "old_line_content": "    subpicture_updater_t *p_upd = &p_subpicture->updater;",
          "new_line_content": "                          !video_format_IsSimilar( p_fmt_dst,",
          "content_same": false
        },
        {
          "line": 159,
          "old_api": null,
          "new_api": "video_format_IsSimilar",
          "old_text": null,
          "new_text": "video_format_IsSimilar( p_fmt_src,\n                                                   &p_private->src )",
          "old_line_content": "                        vlc_tick_t i_ts )",
          "new_line_content": "                          !video_format_IsSimilar( p_fmt_src,",
          "content_same": false
        },
        {
          "line": 296,
          "old_api": null,
          "new_api": "subpicture_region_Delete",
          "old_text": null,
          "new_text": "subpicture_region_Delete( p_head )",
          "old_line_content": "}",
          "new_line_content": "        subpicture_region_Delete( p_head );",
          "content_same": false
        },
        {
          "line": 171,
          "old_api": null,
          "new_api": "video_format_Clean",
          "old_text": null,
          "new_text": "video_format_Clean( &p_private->src )",
          "old_line_content": "                          i_ts ) )",
          "new_line_content": "    video_format_Clean( &p_private->src );",
          "content_same": false
        },
        {
          "line": 172,
          "old_api": null,
          "new_api": "video_format_Clean",
          "old_text": null,
          "new_text": "video_format_Clean( &p_private->dst )",
          "old_line_content": "        return;",
          "new_line_content": "    video_format_Clean( &p_private->dst );",
          "content_same": false
        },
        {
          "line": 175,
          "old_api": null,
          "new_api": "video_format_Copy",
          "old_text": null,
          "new_text": "video_format_Copy( &p_private->dst, p_fmt_dst )",
          "old_line_content": "    p_subpicture->p_region = NULL;",
          "new_line_content": "    video_format_Copy( &p_private->dst, p_fmt_dst );",
          "content_same": false
        },
        {
          "line": 181,
          "old_api": null,
          "new_api": "malloc",
          "old_text": null,
          "new_text": "malloc( sizeof(*p_private) )",
          "old_line_content": "",
          "new_line_content": "    subpicture_region_private_t *p_private = malloc( sizeof(*p_private) );",
          "content_same": false
        },
        {
          "line": 309,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(src && !src->b_fade && src->b_absolute)",
          "old_line_content": "",
          "new_line_content": "    assert(src && !src->b_fade && src->b_absolute);",
          "content_same": false
        },
        {
          "line": 312,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(r->p_picture && r->i_align == 0)",
          "old_line_content": "unsigned picture_BlendSubpicture(picture_t *dst,",
          "new_line_content": "        assert(r->p_picture && r->i_align == 0);",
          "content_same": false
        },
        {
          "line": 313,
          "old_api": null,
          "new_api": "filter_ConfigureBlend",
          "old_text": null,
          "new_text": "filter_ConfigureBlend(blend, dst->format.i_width,\n                                  dst->format.i_height,  &r->fmt)",
          "old_line_content": "                                 vlc_blender_t *blend, subpicture_t *src)",
          "new_line_content": "        if (filter_ConfigureBlend(blend, dst->format.i_width,",
          "content_same": false
        },
        {
          "line": 186,
          "old_api": null,
          "new_api": "video_format_Copy",
          "old_text": null,
          "new_text": "video_format_Copy( &p_private->fmt, p_fmt )",
          "old_line_content": "",
          "new_line_content": "    if ( video_format_Copy( &p_private->fmt, p_fmt ) != VLC_SUCCESS )",
          "content_same": false
        },
        {
          "line": 315,
          "old_api": null,
          "new_api": "filter_Blend",
          "old_text": null,
          "new_text": "filter_Blend(blend, dst, r->i_x, r->i_y, r->p_picture,\n                         src->i_alpha * r->i_alpha / 255)",
          "old_line_content": "    unsigned done = 0;",
          "new_line_content": "         || filter_Blend(blend, dst, r->i_x, r->i_y, r->p_picture,",
          "content_same": false
        },
        {
          "line": 188,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free( p_private )",
          "old_line_content": "{",
          "new_line_content": "        free( p_private );",
          "content_same": false
        },
        {
          "line": 199,
          "old_api": null,
          "new_api": "picture_Release",
          "old_text": null,
          "new_text": "picture_Release( p_private->p_picture )",
          "old_line_content": "",
          "new_line_content": "        picture_Release( p_private->p_picture );",
          "content_same": false
        },
        {
          "line": 200,
          "old_api": null,
          "new_api": "video_format_Clean",
          "old_text": null,
          "new_text": "video_format_Clean( &p_private->fmt )",
          "old_line_content": "    p_private->p_picture = NULL;",
          "new_line_content": "    video_format_Clean( &p_private->fmt );",
          "content_same": false
        },
        {
          "line": 201,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free( p_private )",
          "old_line_content": "    return p_private;",
          "new_line_content": "    free( p_private );",
          "content_same": false
        },
        {
          "line": 330,
          "old_api": null,
          "new_api": "subpicture_region_New",
          "old_text": null,
          "new_text": "subpicture_region_New(&p_region_src->fmt)",
          "old_line_content": "    }",
          "new_line_content": "    subpicture_region_t *p_region_dst = subpicture_region_New(&p_region_src->fmt);",
          "content_same": false
        },
        {
          "line": 331,
          "old_api": null,
          "new_api": "unlikely",
          "old_text": null,
          "new_text": "unlikely(!p_region_dst)",
          "old_line_content": "    return done;",
          "new_line_content": "    if (unlikely(!p_region_dst))",
          "content_same": false
        },
        {
          "line": 206,
          "old_api": null,
          "new_api": "calloc",
          "old_text": null,
          "new_text": "calloc( 1, sizeof(*p_region ) )",
          "old_line_content": "    if( p_private->p_picture )",
          "new_line_content": "    subpicture_region_t *p_region = calloc( 1, sizeof(*p_region ) );",
          "content_same": false
        },
        {
          "line": 215,
          "old_api": null,
          "new_api": "video_format_Copy",
          "old_text": null,
          "new_text": "video_format_Copy( &p_region->fmt, p_fmt )",
          "old_line_content": "    if( !p_region )",
          "new_line_content": "        video_format_Copy( &p_region->fmt, p_fmt );",
          "content_same": false
        },
        {
          "line": 343,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(p_region_dst->p_picture->p[i].p_pixels,\n               p_region_src->p_picture->p[i].p_pixels,\n               p_region_src->p_picture->p[i].i_lines * p_region_src->p_picture->p[i].i_pitch)",
          "old_line_content": "    p_region_dst->i_y      = p_region_src->i_y;",
          "new_line_content": "        memcpy(p_region_dst->p_picture->p[i].p_pixels,",
          "content_same": false
        },
        {
          "line": 219,
          "old_api": null,
          "new_api": "calloc",
          "old_text": null,
          "new_text": "calloc( 1, sizeof(*p_region->fmt.p_palette) )",
          "old_line_content": "    p_region->zoom_v.den = p_region->zoom_v.num = 1;",
          "new_line_content": "            p_region->fmt.p_palette = calloc( 1, sizeof(*p_region->fmt.p_palette) );",
          "content_same": false
        },
        {
          "line": 222,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free( p_region )",
          "old_line_content": "    {",
          "new_line_content": "                free( p_region );",
          "content_same": false
        },
        {
          "line": 242,
          "old_api": null,
          "new_api": "subpicture_region_NewInternal",
          "old_text": null,
          "new_text": "subpicture_region_NewInternal( p_fmt )",
          "old_line_content": "    p_region->b_balanced_text = true;",
          "new_line_content": "        subpicture_region_NewInternal( p_fmt );",
          "content_same": false
        },
        {
          "line": 249,
          "old_api": null,
          "new_api": "picture_NewFromFormat",
          "old_text": null,
          "new_text": "picture_NewFromFormat( p_fmt )",
          "old_line_content": "    subpicture_region_t *p_region =",
          "new_line_content": "    p_region->p_picture = picture_NewFromFormat( p_fmt );",
          "content_same": false
        },
        {
          "line": 252,
          "old_api": null,
          "new_api": "video_format_Clean",
          "old_text": null,
          "new_text": "video_format_Clean( &p_region->fmt )",
          "old_line_content": "        return NULL;",
          "new_line_content": "        video_format_Clean( &p_region->fmt );",
          "content_same": false
        },
        {
          "line": 253,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free( p_region )",
          "old_line_content": "",
          "new_line_content": "        free( p_region );",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 257,
          "old_api": "picture_NewFromFormat",
          "new_api": null,
          "old_text": "picture_NewFromFormat( p_fmt )",
          "new_text": null,
          "old_line_content": "    p_region->p_picture = picture_NewFromFormat( p_fmt );",
          "new_line_content": "    return p_region;",
          "content_same": false
        },
        {
          "line": 260,
          "old_api": "video_format_Clean",
          "new_api": null,
          "old_text": "video_format_Clean( &p_region->fmt )",
          "new_text": null,
          "old_line_content": "        video_format_Clean( &p_region->fmt );",
          "new_line_content": "subpicture_region_t *subpicture_region_ForPicture( const video_format_t *p_fmt, picture_t *pic )",
          "content_same": false
        },
        {
          "line": 261,
          "old_api": "free",
          "new_api": null,
          "old_text": "free( p_region )",
          "new_text": null,
          "old_line_content": "        free( p_region );",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 139,
          "old_api": "picture_Release",
          "new_api": null,
          "old_text": "picture_Release( p_subpic->p_region->p_picture )",
          "new_text": null,
          "old_line_content": "        picture_Release( p_subpic->p_region->p_picture );",
          "new_line_content": "    if (p_subpic->p_region == NULL)",
          "content_same": false
        },
        {
          "line": 144,
          "old_api": "picture_Release",
          "new_api": null,
          "old_text": "picture_Release( p_pip )",
          "new_text": null,
          "old_line_content": "        picture_Release( p_pip );",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 273,
          "old_api": "subpicture_region_NewInternal",
          "new_api": null,
          "old_text": "subpicture_region_NewInternal( p_fmt )",
          "new_text": null,
          "old_line_content": "    subpicture_region_t *p_region = subpicture_region_NewInternal( p_fmt );",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 149,
          "old_api": "subpicture_Delete",
          "new_api": null,
          "old_text": "subpicture_Delete(p_subpic)",
          "new_text": null,
          "old_line_content": "        subpicture_Delete(p_subpic);",
          "new_line_content": "                        const video_format_t *p_fmt_src,",
          "content_same": false
        },
        {
          "line": 277,
          "old_api": "picture_Hold",
          "new_api": null,
          "old_text": "picture_Hold(pic)",
          "new_text": null,
          "old_line_content": "    p_region->p_picture = picture_Hold(pic);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 288,
          "old_api": "subpicture_region_private_Delete",
          "new_api": null,
          "old_text": "subpicture_region_private_Delete( p_region->p_private )",
          "new_text": null,
          "old_line_content": "        subpicture_region_private_Delete( p_region->p_private );",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 291,
          "old_api": "picture_Release",
          "new_api": null,
          "old_text": "picture_Release( p_region->p_picture )",
          "new_text": null,
          "old_line_content": "        picture_Release( p_region->p_picture );",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 293,
          "old_api": "text_segment_ChainDelete",
          "new_api": null,
          "old_text": "text_segment_ChainDelete( p_region->p_text )",
          "new_text": null,
          "old_line_content": "    text_segment_ChainDelete( p_region->p_text );",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 294,
          "old_api": "video_format_Clean",
          "new_api": null,
          "old_text": "video_format_Clean( &p_region->fmt )",
          "new_text": null,
          "old_line_content": "    video_format_Clean( &p_region->fmt );",
          "new_line_content": "        subpicture_region_t *p_next = p_head->p_next;",
          "content_same": false
        },
        {
          "line": 167,
          "old_api": "video_format_IsSimilar",
          "new_api": null,
          "old_text": "video_format_IsSimilar( p_fmt_src,\n                                                   &p_private->src )",
          "new_text": null,
          "old_line_content": "                          !video_format_IsSimilar( p_fmt_src,",
          "new_line_content": "    p_subpicture->p_region = NULL;",
          "content_same": false
        },
        {
          "line": 295,
          "old_api": "free",
          "new_api": null,
          "old_text": "free( p_region )",
          "new_text": null,
          "old_line_content": "    free( p_region );",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 304,
          "old_api": "subpicture_region_Delete",
          "new_api": null,
          "old_text": "subpicture_region_Delete( p_head )",
          "new_text": null,
          "old_line_content": "        subpicture_region_Delete( p_head );",
          "new_line_content": "unsigned picture_BlendSubpicture(picture_t *dst,",
          "content_same": false
        },
        {
          "line": 177,
          "old_api": "pf_update",
          "new_api": null,
          "old_text": "p_upd->pf_update( p_subpicture, p_fmt_src, p_fmt_dst, i_ts )",
          "new_text": null,
          "old_line_content": "    p_upd->pf_update( p_subpicture, p_fmt_src, p_fmt_dst, i_ts );",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 179,
          "old_api": "video_format_Clean",
          "new_api": null,
          "old_text": "video_format_Clean( &p_private->src )",
          "new_text": null,
          "old_line_content": "    video_format_Clean( &p_private->src );",
          "new_line_content": "subpicture_region_private_t *subpicture_region_private_New( video_format_t *p_fmt )",
          "content_same": false
        },
        {
          "line": 180,
          "old_api": "video_format_Clean",
          "new_api": null,
          "old_text": "video_format_Clean( &p_private->dst )",
          "new_text": null,
          "old_line_content": "    video_format_Clean( &p_private->dst );",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 182,
          "old_api": "video_format_Copy",
          "new_api": null,
          "old_text": "video_format_Copy( &p_private->src, p_fmt_src )",
          "new_text": null,
          "old_line_content": "    video_format_Copy( &p_private->src, p_fmt_src );",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 183,
          "old_api": "video_format_Copy",
          "new_api": null,
          "old_text": "video_format_Copy( &p_private->dst, p_fmt_dst )",
          "new_text": null,
          "old_line_content": "    video_format_Copy( &p_private->dst, p_fmt_dst );",
          "new_line_content": "    if( !p_private )",
          "content_same": false
        },
        {
          "line": 189,
          "old_api": "malloc",
          "new_api": null,
          "old_text": "malloc( sizeof(*p_private) )",
          "new_text": null,
          "old_line_content": "    subpicture_region_private_t *p_private = malloc( sizeof(*p_private) );",
          "new_line_content": "        return NULL;",
          "content_same": false
        },
        {
          "line": 320,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(r->p_picture && r->i_align == 0)",
          "new_text": null,
          "old_line_content": "        assert(r->p_picture && r->i_align == 0);",
          "new_line_content": "        else",
          "content_same": false
        },
        {
          "line": 321,
          "old_api": "filter_ConfigureBlend",
          "new_api": null,
          "old_text": "filter_ConfigureBlend(blend, dst->format.i_width,\n                                  dst->format.i_height,  &r->fmt)",
          "new_text": null,
          "old_line_content": "        if (filter_ConfigureBlend(blend, dst->format.i_width,",
          "new_line_content": "            done++;",
          "content_same": false
        },
        {
          "line": 194,
          "old_api": "video_format_Copy",
          "new_api": null,
          "old_text": "video_format_Copy( &p_private->fmt, p_fmt )",
          "new_text": null,
          "old_line_content": "    if ( video_format_Copy( &p_private->fmt, p_fmt ) != VLC_SUCCESS )",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 323,
          "old_api": "filter_Blend",
          "new_api": null,
          "old_text": "filter_Blend(blend, dst, r->i_x, r->i_y, r->p_picture,\n                         src->i_alpha * r->i_alpha / 255)",
          "new_text": null,
          "old_line_content": "         || filter_Blend(blend, dst, r->i_x, r->i_y, r->p_picture,",
          "new_line_content": "    return done;",
          "content_same": false
        },
        {
          "line": 196,
          "old_api": "free",
          "new_api": null,
          "old_text": "free( p_private )",
          "new_text": null,
          "old_line_content": "        free( p_private );",
          "new_line_content": "void subpicture_region_private_Delete( subpicture_region_private_t *p_private )",
          "content_same": false
        },
        {
          "line": 325,
          "old_api": "msg_Err",
          "new_api": null,
          "old_text": "msg_Err(blend, \"blending %4.4s to %4.4s failed\",\n                    (char *)&blend->fmt_in.video.i_chroma,\n                    (char *)&blend->fmt_out.video.i_chroma )",
          "new_text": null,
          "old_line_content": "            msg_Err(blend, \"blending %4.4s to %4.4s failed\",",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 207,
          "old_api": "picture_Release",
          "new_api": null,
          "old_text": "picture_Release( p_private->p_picture )",
          "new_text": null,
          "old_line_content": "        picture_Release( p_private->p_picture );",
          "new_line_content": "    if( !p_region )",
          "content_same": false
        },
        {
          "line": 208,
          "old_api": "video_format_Clean",
          "new_api": null,
          "old_text": "video_format_Clean( &p_private->fmt )",
          "new_text": null,
          "old_line_content": "    video_format_Clean( &p_private->fmt );",
          "new_line_content": "        return NULL;",
          "content_same": false
        },
        {
          "line": 209,
          "old_api": "free",
          "new_api": null,
          "old_text": "free( p_private )",
          "new_text": null,
          "old_line_content": "    free( p_private );",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 338,
          "old_api": "subpicture_region_New",
          "new_api": null,
          "old_text": "subpicture_region_New(&p_region_src->fmt)",
          "new_text": null,
          "old_line_content": "    subpicture_region_t *p_region_dst = subpicture_region_New(&p_region_src->fmt);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 214,
          "old_api": "calloc",
          "new_api": null,
          "old_text": "calloc( 1, sizeof(*p_region ) )",
          "new_text": null,
          "old_line_content": "    subpicture_region_t *p_region = calloc( 1, sizeof(*p_region ) );",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 347,
          "old_api": "text_segment_Copy",
          "new_api": null,
          "old_text": "text_segment_Copy( p_region_src->p_text )",
          "new_text": null,
          "old_line_content": "    p_region_dst->p_text = text_segment_Copy( p_region_src->p_text );",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 223,
          "old_api": "video_format_Copy",
          "new_api": null,
          "old_text": "video_format_Copy( &p_region->fmt, p_fmt )",
          "new_text": null,
          "old_line_content": "        video_format_Copy( &p_region->fmt, p_fmt );",
          "new_line_content": "                return NULL;",
          "content_same": false
        },
        {
          "line": 351,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(p_region_dst->p_picture->p[i].p_pixels,\n               p_region_src->p_picture->p[i].p_pixels,\n               p_region_src->p_picture->p[i].i_lines * p_region_src->p_picture->p[i].i_pitch)",
          "new_text": null,
          "old_line_content": "        memcpy(p_region_dst->p_picture->p[i].p_pixels,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 227,
          "old_api": "calloc",
          "new_api": null,
          "old_text": "calloc( 1, sizeof(*p_region->fmt.p_palette) )",
          "new_text": null,
          "old_line_content": "            p_region->fmt.p_palette = calloc( 1, sizeof(*p_region->fmt.p_palette) );",
          "new_line_content": "    else",
          "content_same": false
        },
        {
          "line": 230,
          "old_api": "free",
          "new_api": null,
          "old_text": "free( p_region )",
          "new_text": null,
          "old_line_content": "                free( p_region );",
          "new_line_content": "        p_region->fmt.p_palette = NULL;",
          "content_same": false
        },
        {
          "line": 250,
          "old_api": "subpicture_region_NewInternal",
          "new_api": null,
          "old_text": "subpicture_region_NewInternal( p_fmt )",
          "new_text": null,
          "old_line_content": "        subpicture_region_NewInternal( p_fmt );",
          "new_line_content": "    if( !p_region->p_picture )",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 6,
      "total_additions": 37,
      "total_deletions": 38,
      "total_api_changes": 81
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 10,
        "api_related_lines": 81,
        "non_api_lines": 5,
        "non_api_line_numbers": [
          138,
          140,
          142,
          143,
          145
        ]
      }
    },
    "api_calls_before": 60,
    "api_calls_after": 59,
    "diff_info": {
      "added_lines": 2,
      "removed_lines": 10,
      "total_diff_lines": 24
    }
  }
}
{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/vlc/modified_file/4bfd2cf0156562abba5713c37dfdf1451d1d044b",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/vlc/modified_file/4bfd2cf0156562abba5713c37dfdf1451d1d044b/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/vlc/modified_file/4bfd2cf0156562abba5713c37dfdf1451d1d044b/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/vlc/modified_file/4bfd2cf0156562abba5713c37dfdf1451d1d044b/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 482,
          "old_api": "post_mt",
          "new_api": "var_InheritBool",
          "old_text": "post_mt( p_sys )",
          "new_text": "var_InheritBool(p_dec, \"low-delay\")",
          "old_line_content": "    post_mt( p_sys );",
          "new_line_content": "    if( var_InheritBool(p_dec, \"low-delay\") )",
          "content_same": false
        },
        {
          "line": 556,
          "old_api": "var_CreateGetInteger",
          "new_api": "var_CreateGetBool",
          "old_text": "var_CreateGetInteger( p_dec, \"avcodec-skiploopfilter\" )",
          "new_text": "var_CreateGetBool( p_dec, \"grayscale\" )",
          "old_line_content": "    i_val = var_CreateGetInteger( p_dec, \"avcodec-skiploopfilter\" );",
          "new_line_content": "    if( var_CreateGetBool( p_dec, \"grayscale\" ) )",
          "content_same": false
        },
        {
          "line": 618,
          "old_api": "__MIN",
          "new_api": "vlc_GetCPUCount",
          "old_text": "__MIN( i_thread_count, 6 )",
          "new_text": "vlc_GetCPUCount()",
          "old_line_content": "        i_thread_count = __MIN( i_thread_count, 6 );",
          "new_line_content": "        i_thread_count = vlc_GetCPUCount();",
          "content_same": false
        },
        {
          "line": 624,
          "old_api": "msg_Dbg",
          "new_api": "__MIN",
          "old_text": "msg_Dbg( p_dec, \"allowing %d thread(s) for decoding\", i_thread_count )",
          "new_text": "__MIN( i_thread_count, 6 )",
          "old_line_content": "    msg_Dbg( p_dec, \"allowing %d thread(s) for decoding\", i_thread_count );",
          "new_line_content": "        i_thread_count = __MIN( i_thread_count, 6 );",
          "content_same": false
        },
        {
          "line": 684,
          "old_api": "free",
          "new_api": "ffmpeg_InitCodec",
          "old_text": "free( p_sys )",
          "new_text": "ffmpeg_InitCodec( p_dec )",
          "old_line_content": "        free( p_sys );",
          "new_line_content": "    ffmpeg_InitCodec( p_dec );",
          "content_same": false
        },
        {
          "line": 722,
          "old_api": "wait_mt",
          "new_api": "decoder_AbortPictures",
          "old_text": "wait_mt( p_sys )",
          "new_text": "decoder_AbortPictures( p_dec, true )",
          "old_line_content": "    wait_mt( p_sys );",
          "new_line_content": "    decoder_AbortPictures( p_dec, true );",
          "content_same": false
        },
        {
          "line": 964,
          "old_api": "cc_Extract",
          "new_api": "decoder_UpdateVideoFormat",
          "old_text": "cc_Extract( &p_sys->cc, CC_PAYLOAD_RAW, true, p_avcc->data, p_avcc->size )",
          "new_text": "decoder_UpdateVideoFormat( p_dec )",
          "old_line_content": "        cc_Extract( &p_sys->cc, CC_PAYLOAD_RAW, true, p_avcc->data, p_avcc->size );",
          "new_line_content": "    if (format_changed && decoder_UpdateVideoFormat( p_dec ))",
          "content_same": false
        },
        {
          "line": 967,
          "old_api": "block_Alloc",
          "new_api": "av_frame_get_side_data",
          "old_text": "block_Alloc( p_sys->cc.i_data )",
          "new_text": "av_frame_get_side_data( frame, AV_FRAME_DATA_A53_CC )",
          "old_line_content": "            block_t *p_cc = block_Alloc( p_sys->cc.i_data );",
          "new_line_content": "    const AVFrameSideData *p_avcc = av_frame_get_side_data( frame, AV_FRAME_DATA_A53_CC );",
          "content_same": false
        },
        {
          "line": 970,
          "old_api": "memcpy",
          "new_api": "cc_Extract",
          "old_text": "memcpy( p_cc->p_buffer, p_sys->cc.p_data, p_sys->cc.i_data )",
          "new_text": "cc_Extract( &p_sys->cc, CC_PAYLOAD_RAW, true, p_avcc->data, p_avcc->size )",
          "old_line_content": "                memcpy( p_cc->p_buffer, p_sys->cc.p_data, p_sys->cc.i_data );",
          "new_line_content": "        cc_Extract( &p_sys->cc, CC_PAYLOAD_RAW, true, p_avcc->data, p_avcc->size );",
          "content_same": false
        },
        {
          "line": 1056,
          "old_api": "memset",
          "new_api": "block_Realloc",
          "old_text": "memset( p_block->p_buffer + p_block->i_buffer, 0,\n                FF_INPUT_BUFFER_PADDING_SIZE )",
          "new_text": "block_Realloc( p_block, 0,\n                            p_block->i_buffer + FF_INPUT_BUFFER_PADDING_SIZE )",
          "old_line_content": "        memset( p_block->p_buffer + p_block->i_buffer, 0,",
          "new_line_content": "        p_block = block_Realloc( p_block, 0,",
          "content_same": false
        },
        {
          "line": 1078,
          "old_api": "TO_AV_TS",
          "new_api": "av_init_packet",
          "old_text": "TO_AV_TS(p_block->i_dts)",
          "new_text": "av_init_packet( &pkt )",
          "old_line_content": "                pkt.dts = p_block->i_dts != VLC_TICK_INVALID ? TO_AV_TS(p_block->i_dts) : AV_NOPTS_VALUE;",
          "new_line_content": "            av_init_packet( &pkt );",
          "content_same": false
        },
        {
          "line": 1133,
          "old_api": "unlikely",
          "new_api": "avcodec_send_packet",
          "old_text": "unlikely(frame == NULL)",
          "new_text": "avcodec_send_packet( p_context, NULL )",
          "old_line_content": "        if (unlikely(frame == NULL))",
          "new_line_content": "                 avcodec_send_packet( p_context, NULL );",
          "content_same": false
        },
        {
          "line": 1139,
          "old_api": "avcodec_receive_frame",
          "new_api": "unlikely",
          "old_text": "avcodec_receive_frame(p_context, frame)",
          "new_text": "unlikely(frame == NULL)",
          "old_line_content": "        int ret = avcodec_receive_frame(p_context, frame);",
          "new_line_content": "        if (unlikely(frame == NULL))",
          "content_same": false
        },
        {
          "line": 1153,
          "old_api": "wait_mt",
          "new_api": "av_frame_free",
          "old_text": "wait_mt( p_sys )",
          "new_text": "av_frame_free(&frame)",
          "old_line_content": "        wait_mt( p_sys );",
          "new_line_content": "            av_frame_free(&frame);",
          "content_same": false
        },
        {
          "line": 1188,
          "old_api": "date_Set",
          "new_api": "date_Get",
          "old_text": "date_Set( &p_sys->pts, i_pts )",
          "new_text": "date_Get( &p_sys->pts )",
          "old_line_content": "            date_Set( &p_sys->pts, i_pts );",
          "new_line_content": "            i_pts = date_Get( &p_sys->pts );",
          "content_same": false
        },
        {
          "line": 1190,
          "old_api": "interpolate_next_pts",
          "new_api": "FROM_AV_TS",
          "old_text": "interpolate_next_pts(p_dec, frame)",
          "new_text": "FROM_AV_TS(av_pts)",
          "old_line_content": "        const vlc_tick_t i_next_pts = interpolate_next_pts(p_dec, frame);",
          "new_line_content": "            i_pts = FROM_AV_TS(av_pts);",
          "content_same": false
        },
        {
          "line": 1224,
          "old_api": "memcpy",
          "new_api": "av_frame_free",
          "old_text": "memcpy( p_palette->palette, frame->data[1], AVPALETTE_SIZE )",
          "new_text": "av_frame_free(&frame)",
          "old_line_content": "            memcpy( p_palette->palette, frame->data[1], AVPALETTE_SIZE );",
          "new_line_content": "                av_frame_free(&frame);",
          "content_same": false
        },
        {
          "line": 1229,
          "old_api": "av_frame_free",
          "new_api": "assert",
          "old_text": "av_frame_free(&frame)",
          "new_text": "assert( frame->data[1] != NULL )",
          "old_line_content": "                av_frame_free(&frame);",
          "new_line_content": "            assert( frame->data[1] != NULL );",
          "content_same": false
        },
        {
          "line": 1246,
          "old_api": "av_frame_free",
          "new_api": "lavc_UpdateVideoFormat",
          "old_text": "av_frame_free(&frame)",
          "new_text": "lavc_UpdateVideoFormat(p_dec, p_context, p_context->pix_fmt,\n                                       p_context->pix_fmt)",
          "old_line_content": "                av_frame_free(&frame);",
          "new_line_content": "             && lavc_UpdateVideoFormat(p_dec, p_context, p_context->pix_fmt,",
          "content_same": false
        },
        {
          "line": 1315,
          "old_api": "avcodec_flush_buffers",
          "new_api": "picture_Release",
          "old_text": "avcodec_flush_buffers( p_sys->p_context )",
          "new_text": "picture_Release( p_pic )",
          "old_line_content": "        avcodec_flush_buffers( p_sys->p_context );",
          "new_line_content": "            picture_Release( p_pic );",
          "content_same": false
        },
        {
          "line": 1339,
          "old_api": "cc_Flush",
          "new_api": "DecodeBlock",
          "old_text": "cc_Flush( &p_sys->cc )",
          "new_text": "DecodeBlock( p_dec, NULL )",
          "old_line_content": "        cc_Flush( &p_sys->cc );",
          "new_line_content": "            DecodeBlock( p_dec, NULL );",
          "content_same": false
        },
        {
          "line": 1370,
          "old_api": "wait_mt",
          "new_api": "post_mt",
          "old_text": "wait_mt( p_sys )",
          "new_text": "post_mt( p_sys )",
          "old_line_content": "    wait_mt( p_sys );",
          "new_line_content": "    post_mt( p_sys );",
          "content_same": false
        },
        {
          "line": 1378,
          "old_api": "vlc_va_Delete",
          "new_api": "cc_Flush",
          "old_text": "vlc_va_Delete( p_sys->p_va, &hwaccel_context )",
          "new_text": "cc_Flush( &p_sys->cc )",
          "old_line_content": "        vlc_va_Delete( p_sys->p_va, &hwaccel_context );",
          "new_line_content": "    cc_Flush( &p_sys->cc );",
          "content_same": false
        },
        {
          "line": 1381,
          "old_api": "free",
          "new_api": "avcodec_free_context",
          "old_text": "free( p_sys )",
          "new_text": "avcodec_free_context( &ctx )",
          "old_line_content": "    free( p_sys );",
          "new_line_content": "    avcodec_free_context( &ctx );",
          "content_same": false
        },
        {
          "line": 1406,
          "old_api": "memset",
          "new_api": "av_malloc",
          "old_text": "memset( &p[4], 0, 8 )",
          "new_text": "av_malloc( p_sys->p_context->extradata_size +\n                       FF_INPUT_BUFFER_PADDING_SIZE )",
          "old_line_content": "        memset( &p[4], 0, 8 );",
          "new_line_content": "            av_malloc( p_sys->p_context->extradata_size +",
          "content_same": false
        },
        {
          "line": 1411,
          "old_api": "strncmp",
          "new_api": "memcpy",
          "old_text": "strncmp( (char*)&p[0x56], \"SMI \", 4 )",
          "new_text": "memcpy( &p[0],  \"SVQ3\", 4 )",
          "old_line_content": "            strncmp( (char*)&p[0x56], \"SMI \", 4 ) )",
          "new_line_content": "        memcpy( &p[0],  \"SVQ3\", 4 );",
          "content_same": false
        },
        {
          "line": 1417,
          "old_api": "GetDWBE",
          "new_api": "strncmp",
          "old_text": "GetDWBE( psz )",
          "new_text": "strncmp( (char*)&p[0x56], \"SMI \", 4 )",
          "old_line_content": "                uint_fast32_t atom_size = GetDWBE( psz );",
          "new_line_content": "            strncmp( (char*)&p[0x56], \"SMI \", 4 ) )",
          "content_same": false
        },
        {
          "line": 1423,
          "old_api": "strncmp",
          "new_api": "GetDWBE",
          "old_text": "strncmp( (char*)&psz[4], \"SMI \", 4 )",
          "new_text": "GetDWBE( psz )",
          "old_line_content": "                if( !strncmp( (char*)&psz[4], \"SMI \", 4 ) )",
          "new_line_content": "                uint_fast32_t atom_size = GetDWBE( psz );",
          "content_same": false
        },
        {
          "line": 1469,
          "old_api": "msg_Err",
          "new_api": "decoder_NewPicture",
          "old_text": "msg_Err(dec, \"hardware acceleration picture allocation failed\")",
          "new_text": "decoder_NewPicture(dec)",
          "old_line_content": "        msg_Err(dec, \"hardware acceleration picture allocation failed\");",
          "new_line_content": "    picture_t *pic = decoder_NewPicture(dec);",
          "content_same": false
        },
        {
          "line": 1473,
          "old_api": "assert",
          "new_api": "vlc_va_Get",
          "old_text": "assert(frame->data[0] != NULL)",
          "new_text": "vlc_va_Get(va, pic, &frame->data[0])",
          "old_line_content": "    assert(frame->data[0] != NULL);",
          "new_line_content": "    if (vlc_va_Get(va, pic, &frame->data[0]))",
          "content_same": false
        },
        {
          "line": 1479,
          "old_api": "unlikely",
          "new_api": "assert",
          "old_text": "unlikely(frame->buf[0] == NULL)",
          "new_text": "assert(frame->data[0] != NULL)",
          "old_line_content": "    if (unlikely(frame->buf[0] == NULL))",
          "new_line_content": "    assert(frame->data[0] != NULL);",
          "content_same": false
        },
        {
          "line": 1515,
          "old_api": "atomic_exchange",
          "new_api": "assert",
          "old_text": "atomic_exchange(&sys->b_dr_failure, true)",
          "new_text": "assert(pic->p[0].i_lines >= height)",
          "old_line_content": "            if (!atomic_exchange(&sys->b_dr_failure, true))",
          "new_line_content": "    assert(pic->p[0].i_lines >= height);",
          "content_same": false
        },
        {
          "line": 1522,
          "old_api": "atomic_exchange",
          "new_api": "msg_Warn",
          "old_text": "atomic_exchange(&sys->b_dr_failure, true)",
          "new_text": "msg_Warn(dec, \"plane %d: pitch not aligned (%d%%%d): disabling direct rendering\",\n                         i, pic->p[i].i_pitch, aligns[i])",
          "old_line_content": "            if (!atomic_exchange(&sys->b_dr_failure, true))",
          "new_line_content": "                msg_Warn(dec, \"plane %d: pitch not aligned (%d%%%d): disabling direct rendering\",",
          "content_same": false
        },
        {
          "line": 1529,
          "old_api": "assert",
          "new_api": "msg_Warn",
          "old_text": "assert(pic->i_planes < PICTURE_PLANE_MAX)",
          "new_text": "msg_Warn(dec, \"plane %d not aligned: disabling direct rendering\", i)",
          "old_line_content": "    assert(pic->i_planes < PICTURE_PLANE_MAX);",
          "new_line_content": "                msg_Warn(dec, \"plane %d not aligned: disabling direct rendering\", i);",
          "content_same": false
        },
        {
          "line": 1547,
          "old_api": "picture_Hold",
          "new_api": "unlikely",
          "old_text": "picture_Hold(pic)",
          "new_text": "unlikely(frame->buf[i] == NULL)",
          "old_line_content": "        picture_Hold(pic);",
          "new_line_content": "        if (unlikely(frame->buf[i] == NULL))",
          "content_same": false
        },
        {
          "line": 1553,
          "old_api": "picture_Release",
          "new_api": "picture_Hold",
          "old_text": "picture_Release(pic)",
          "new_text": "picture_Hold(pic)",
          "old_line_content": "    picture_Release(pic);",
          "new_line_content": "        picture_Hold(pic);",
          "content_same": false
        },
        {
          "line": 1585,
          "old_api": "avcodec_default_get_buffer2",
          "new_api": "wait_mt",
          "old_text": "avcodec_default_get_buffer2(ctx, frame, flags)",
          "new_text": "wait_mt(sys)",
          "old_line_content": "            return avcodec_default_get_buffer2(ctx, frame, flags);",
          "new_line_content": "    wait_mt(sys);",
          "content_same": false
        },
        {
          "line": 1591,
          "old_api": "lavc_UpdateVideoFormat",
          "new_api": "avcodec_default_get_buffer2",
          "old_text": "lavc_UpdateVideoFormat(dec, ctx, ctx->pix_fmt, ctx->pix_fmt)",
          "new_text": "avcodec_default_get_buffer2(ctx, frame, flags)",
          "old_line_content": "        if (lavc_UpdateVideoFormat(dec, ctx, ctx->pix_fmt, ctx->pix_fmt))",
          "new_line_content": "            return avcodec_default_get_buffer2(ctx, frame, flags);",
          "content_same": false
        },
        {
          "line": 1597,
          "old_api": "post_mt",
          "new_api": "lavc_UpdateVideoFormat",
          "old_text": "post_mt(sys)",
          "new_text": "lavc_UpdateVideoFormat(dec, ctx, ctx->pix_fmt, ctx->pix_fmt)",
          "old_line_content": "    post_mt(sys);",
          "new_line_content": "        if (lavc_UpdateVideoFormat(dec, ctx, ctx->pix_fmt, ctx->pix_fmt))",
          "content_same": false
        },
        {
          "line": 1606,
          "old_api": "avcodec_default_get_buffer2",
          "new_api": "lavc_va_GetFrame",
          "old_text": "avcodec_default_get_buffer2(ctx, frame, flags)",
          "new_text": "lavc_va_GetFrame(ctx, frame)",
          "old_line_content": "        ret = avcodec_default_get_buffer2(ctx, frame, flags);",
          "new_line_content": "        return lavc_va_GetFrame(ctx, frame);",
          "content_same": false
        },
        {
          "line": 1691,
          "old_api": "wait_mt",
          "new_api": "msg_Warn",
          "old_text": "wait_mt(p_sys)",
          "new_text": "msg_Warn(p_dec, \"thread type %d: disabling hardware acceleration\",\n                 p_context->active_thread_type)",
          "old_line_content": "    wait_mt(p_sys);",
          "new_line_content": "        msg_Warn(p_dec, \"thread type %d: disabling hardware acceleration\",",
          "content_same": false
        },
        {
          "line": 1728,
          "old_api": "decoder_NewPicture",
          "new_api": "av_pix_fmt_desc_get",
          "old_text": "decoder_NewPicture(p_dec)",
          "new_text": "av_pix_fmt_desc_get(hwfmt)",
          "old_line_content": "        picture_t *test_pic = decoder_NewPicture(p_dec);",
          "new_line_content": "        const AVPixFmtDescriptor *dsc = av_pix_fmt_desc_get(hwfmt);",
          "content_same": false
        },
        {
          "line": 1729,
          "old_api": "assert",
          "new_api": "msg_Dbg",
          "old_text": "assert(!test_pic || test_pic->format.i_chroma == p_dec->fmt_out.video.i_chroma)",
          "new_text": "msg_Dbg(p_dec, \"trying format %s\", dsc ? dsc->name : \"unknown\")",
          "old_line_content": "        assert(!test_pic || test_pic->format.i_chroma == p_dec->fmt_out.video.i_chroma);",
          "new_line_content": "        msg_Dbg(p_dec, \"trying format %s\", dsc ? dsc->name : \"unknown\");",
          "content_same": false
        },
        {
          "line": 1730,
          "old_api": "VLC_OBJECT",
          "new_api": "lavc_UpdateVideoFormat",
          "old_text": "VLC_OBJECT(p_dec)",
          "new_text": "lavc_UpdateVideoFormat(p_dec, p_context, hwfmt, swfmt)",
          "old_line_content": "        vlc_va_t *va = vlc_va_New(VLC_OBJECT(p_dec), p_context, hwfmt,",
          "new_line_content": "        if (lavc_UpdateVideoFormat(p_dec, p_context, hwfmt, swfmt))",
          "content_same": false
        },
        {
          "line": 1734,
          "old_api": "picture_Release",
          "new_api": "decoder_NewPicture",
          "old_text": "picture_Release(test_pic)",
          "new_text": "decoder_NewPicture(p_dec)",
          "old_line_content": "            picture_Release(test_pic);",
          "new_line_content": "        picture_t *test_pic = decoder_NewPicture(p_dec);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 1545,
          "old_api": null,
          "new_api": "av_buffer_create",
          "old_text": null,
          "new_text": "av_buffer_create(data, size, lavc_ReleaseFrame,\n                                         pic, 0)",
          "old_line_content": "            goto error;",
          "new_line_content": "        frame->buf[i] = av_buffer_create(data, size, lavc_ReleaseFrame,",
          "content_same": false
        },
        {
          "line": 526,
          "old_api": null,
          "new_api": "ffmpeg_AllocContext",
          "old_text": null,
          "new_text": "ffmpeg_AllocContext( p_dec, &p_codec )",
          "old_line_content": "    /* Allocate the memory needed to store the decoder's structure */",
          "new_line_content": "    AVCodecContext *p_context = ffmpeg_AllocContext( p_dec, &p_codec );",
          "content_same": false
        },
        {
          "line": 1550,
          "old_api": null,
          "new_api": "av_buffer_unref",
          "old_text": null,
          "new_text": "av_buffer_unref(&frame->buf[--i])",
          "old_line_content": "    frame->opaque = pic;",
          "new_line_content": "                av_buffer_unref(&frame->buf[--i]);",
          "content_same": false
        },
        {
          "line": 1041,
          "old_api": null,
          "new_api": "filter_earlydropped_blocks",
          "old_text": null,
          "new_text": "filter_earlydropped_blocks( p_dec, p_block )",
          "old_line_content": "    }",
          "new_line_content": "            p_block = filter_earlydropped_blocks( p_dec, p_block );",
          "content_same": false
        },
        {
          "line": 533,
          "old_api": null,
          "new_api": "calloc",
          "old_text": null,
          "new_text": "calloc( 1, sizeof(*p_sys) )",
          "old_line_content": "",
          "new_line_content": "    decoder_sys_t *p_sys = calloc( 1, sizeof(*p_sys) );",
          "content_same": false
        },
        {
          "line": 534,
          "old_api": null,
          "new_api": "unlikely",
          "old_text": null,
          "new_text": "unlikely(p_sys == NULL)",
          "old_line_content": "    p_dec->p_sys = p_sys;",
          "new_line_content": "    if( unlikely(p_sys == NULL) )",
          "content_same": false
        },
        {
          "line": 1559,
          "old_api": null,
          "new_api": "picture_Release",
          "old_text": null,
          "new_text": "picture_Release(pic)",
          "old_line_content": "",
          "new_line_content": "    picture_Release(pic);",
          "content_same": false
        },
        {
          "line": 1046,
          "old_api": null,
          "new_api": "__MAX",
          "old_text": null,
          "new_text": "__MAX( p_context->skip_frame, AVDISCARD_NONREF )",
          "old_line_content": "    /* Don't forget that libavcodec requires a little more bytes",
          "new_line_content": "        p_context->skip_frame = __MAX( p_context->skip_frame, AVDISCARD_NONREF );",
          "content_same": false
        },
        {
          "line": 536,
          "old_api": null,
          "new_api": "avcodec_free_context",
          "old_text": null,
          "new_text": "avcodec_free_context( &p_context )",
          "old_line_content": "    p_sys->p_codec = p_codec;",
          "new_line_content": "        avcodec_free_context( &p_context );",
          "content_same": false
        },
        {
          "line": 1558,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(pic->i_planes > 0)",
          "old_line_content": "}",
          "new_line_content": "    assert(pic->i_planes > 0);",
          "content_same": false
        },
        {
          "line": 1562,
          "old_api": null,
          "new_api": "picture_Release",
          "old_text": null,
          "new_text": "picture_Release(pic)",
          "old_line_content": " *",
          "new_line_content": "    picture_Release(pic);",
          "content_same": false
        },
        {
          "line": 544,
          "old_api": null,
          "new_api": "vlc_sem_init",
          "old_text": null,
          "new_text": "vlc_sem_init( &p_sys->sem_mt, 0 )",
          "old_line_content": "    /*  ***** Get configuration of ffmpeg plugin ***** */",
          "new_line_content": "    vlc_sem_init( &p_sys->sem_mt, 0 );",
          "content_same": false
        },
        {
          "line": 547,
          "old_api": null,
          "new_api": "ffmpeg_CodecTag",
          "old_text": null,
          "new_text": "ffmpeg_CodecTag( p_dec->fmt_in.i_original_fourcc ?\n                                p_dec->fmt_in.i_original_fourcc : p_dec->fmt_in.i_codec )",
          "old_line_content": "    p_context->err_recognition =",
          "new_line_content": "    p_context->codec_tag = ffmpeg_CodecTag( p_dec->fmt_in.i_original_fourcc ?",
          "content_same": false
        },
        {
          "line": 1062,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset( p_block->p_buffer + p_block->i_buffer, 0,\n                FF_INPUT_BUFFER_PADDING_SIZE )",
          "old_line_content": "",
          "new_line_content": "        memset( p_block->p_buffer + p_block->i_buffer, 0,",
          "content_same": false
        },
        {
          "line": 552,
          "old_api": null,
          "new_api": "var_InheritInteger",
          "old_text": null,
          "new_text": "var_InheritInteger( p_dec, \"avcodec-workaround-bugs\" )",
          "old_line_content": "",
          "new_line_content": "        var_InheritInteger( p_dec, \"avcodec-workaround-bugs\" );",
          "content_same": false
        },
        {
          "line": 554,
          "old_api": null,
          "new_api": "var_InheritInteger",
          "old_text": null,
          "new_text": "var_InheritInteger( p_dec, \"avcodec-error-resilience\" )",
          "old_line_content": "    p_context->flags |= AV_CODEC_FLAG_OUTPUT_CORRUPT;",
          "new_line_content": "        var_InheritInteger( p_dec, \"avcodec-error-resilience\" );",
          "content_same": false
        },
        {
          "line": 1073,
          "old_api": null,
          "new_api": "post_mt",
          "old_text": null,
          "new_text": "post_mt( p_sys )",
          "old_line_content": "            if( p_block && p_block->i_buffer > 0 )",
          "new_line_content": "        post_mt( p_sys );",
          "content_same": false
        },
        {
          "line": 562,
          "old_api": null,
          "new_api": "var_CreateGetInteger",
          "old_text": null,
          "new_text": "var_CreateGetInteger( p_dec, \"avcodec-skiploopfilter\" )",
          "old_line_content": "",
          "new_line_content": "    i_val = var_CreateGetInteger( p_dec, \"avcodec-skiploopfilter\" );",
          "content_same": false
        },
        {
          "line": 1590,
          "old_api": null,
          "new_api": "post_mt",
          "old_text": null,
          "new_text": "post_mt(sys)",
          "old_line_content": "         * to protect p_dec->fmt_out. */",
          "new_line_content": "            post_mt(sys);",
          "content_same": false
        },
        {
          "line": 569,
          "old_api": null,
          "new_api": "var_CreateGetBool",
          "old_text": null,
          "new_text": "var_CreateGetBool( p_dec, \"avcodec-fast\" )",
          "old_line_content": "",
          "new_line_content": "    if( var_CreateGetBool( p_dec, \"avcodec-fast\" ) )",
          "content_same": false
        },
        {
          "line": 1083,
          "old_api": null,
          "new_api": "TO_AV_TS",
          "old_text": null,
          "new_text": "TO_AV_TS(p_block->i_pts)",
          "old_line_content": "                pkt.data = NULL;",
          "new_line_content": "                pkt.pts = p_block->i_pts != VLC_TICK_INVALID ? TO_AV_TS(p_block->i_pts) : AV_NOPTS_VALUE;",
          "content_same": false
        },
        {
          "line": 1084,
          "old_api": null,
          "new_api": "TO_AV_TS",
          "old_text": null,
          "new_text": "TO_AV_TS(p_block->i_dts)",
          "old_line_content": "                pkt.size = 0;",
          "new_line_content": "                pkt.dts = p_block->i_dts != VLC_TICK_INVALID ? TO_AV_TS(p_block->i_dts) : AV_NOPTS_VALUE;",
          "content_same": false
        },
        {
          "line": 573,
          "old_api": null,
          "new_api": "var_CreateGetBool",
          "old_text": null,
          "new_text": "var_CreateGetBool( p_dec, \"avcodec-hurry-up\" )",
          "old_line_content": "    else if( i_val == 2 ) p_sys->i_skip_frame = AVDISCARD_BIDIR;",
          "new_line_content": "    p_sys->b_hurry_up = var_CreateGetBool( p_dec, \"avcodec-hurry-up\" );",
          "content_same": false
        },
        {
          "line": 574,
          "old_api": null,
          "new_api": "var_CreateGetBool",
          "old_text": null,
          "new_text": "var_CreateGetBool( p_dec, \"avcodec-corrupted\" )",
          "old_line_content": "    else if( i_val == 1 ) p_sys->i_skip_frame = AVDISCARD_NONREF;",
          "new_line_content": "    p_sys->b_show_corrupted = var_CreateGetBool( p_dec, \"avcodec-corrupted\" );",
          "content_same": false
        },
        {
          "line": 1599,
          "old_api": null,
          "new_api": "post_mt",
          "old_text": null,
          "new_text": "post_mt(sys)",
          "old_line_content": "    if (sys->p_va != NULL)",
          "new_line_content": "            post_mt(sys);",
          "content_same": false
        },
        {
          "line": 576,
          "old_api": null,
          "new_api": "var_CreateGetInteger",
          "old_text": null,
          "new_text": "var_CreateGetInteger( p_dec, \"avcodec-skip-frame\" )",
          "old_line_content": "    else p_sys->i_skip_frame = AVDISCARD_DEFAULT;",
          "new_line_content": "    i_val = var_CreateGetInteger( p_dec, \"avcodec-skip-frame\" );",
          "content_same": false
        },
        {
          "line": 1603,
          "old_api": null,
          "new_api": "post_mt",
          "old_text": null,
          "new_text": "post_mt(sys)",
          "old_line_content": "     * so we need to check for direct rendering again. */",
          "new_line_content": "    post_mt(sys);",
          "content_same": false
        },
        {
          "line": 585,
          "old_api": null,
          "new_api": "var_CreateGetInteger",
          "old_text": null,
          "new_text": "var_CreateGetInteger( p_dec, \"avcodec-skip-idct\" )",
          "old_line_content": "    else p_context->skip_idct = AVDISCARD_DEFAULT;",
          "new_line_content": "    i_val = var_CreateGetInteger( p_dec, \"avcodec-skip-idct\" );",
          "content_same": false
        },
        {
          "line": 1097,
          "old_api": null,
          "new_api": "av_packet_new_side_data",
          "old_text": null,
          "new_text": "av_packet_new_side_data(&pkt, AV_PKT_DATA_PALETTE, AVPALETTE_SIZE)",
          "old_line_content": "",
          "new_line_content": "                uint8_t *pal = av_packet_new_side_data(&pkt, AV_PKT_DATA_PALETTE, AVPALETTE_SIZE);",
          "content_same": false
        },
        {
          "line": 1099,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(pal, p_dec->fmt_in.video.p_palette->palette, AVPALETTE_SIZE)",
          "old_line_content": "            if( p_block )",
          "new_line_content": "                    memcpy(pal, p_dec->fmt_in.video.p_palette->palette, AVPALETTE_SIZE);",
          "content_same": false
        },
        {
          "line": 1610,
          "old_api": null,
          "new_api": "lavc_dr_GetFrame",
          "old_text": null,
          "new_text": "lavc_dr_GetFrame(ctx, frame)",
          "old_line_content": "static enum PixelFormat ffmpeg_GetFormat( AVCodecContext *p_context,",
          "new_line_content": "    int ret = lavc_dr_GetFrame(ctx, frame);",
          "content_same": false
        },
        {
          "line": 1612,
          "old_api": null,
          "new_api": "avcodec_default_get_buffer2",
          "old_text": null,
          "new_text": "avcodec_default_get_buffer2(ctx, frame, flags)",
          "old_line_content": "{",
          "new_line_content": "        ret = avcodec_default_get_buffer2(ctx, frame, flags);",
          "content_same": false
        },
        {
          "line": 595,
          "old_api": null,
          "new_api": "atomic_init",
          "old_text": null,
          "new_text": "atomic_init(&p_sys->b_dr_failure, false)",
          "old_line_content": "        p_sys->p_codec->id != AV_CODEC_ID_CINEPAK )",
          "new_line_content": "    atomic_init(&p_sys->b_dr_failure, false);",
          "content_same": false
        },
        {
          "line": 596,
          "old_api": null,
          "new_api": "var_CreateGetBool",
          "old_text": null,
          "new_text": "var_CreateGetBool( p_dec, \"avcodec-dr\" )",
          "old_line_content": "    {",
          "new_line_content": "    if( var_CreateGetBool( p_dec, \"avcodec-dr\" ) &&",
          "content_same": false
        },
        {
          "line": 1111,
          "old_api": null,
          "new_api": "avcodec_send_packet",
          "old_text": null,
          "new_text": "avcodec_send_packet(p_context, &pkt)",
          "old_line_content": "                    b_error = true;",
          "new_line_content": "            int ret = avcodec_send_packet(p_context, &pkt);",
          "content_same": false
        },
        {
          "line": 1112,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(EAGAIN)",
          "old_line_content": "                }",
          "new_line_content": "            if( ret != 0 && ret != AVERROR(EAGAIN) )",
          "content_same": false
        },
        {
          "line": 1624,
          "old_api": null,
          "new_api": "avcodec_default_get_format",
          "old_text": null,
          "new_text": "avcodec_default_get_format(p_context, pi_fmt)",
          "old_line_content": "        if (dsc == NULL)",
          "new_line_content": "    enum PixelFormat swfmt = avcodec_default_get_format(p_context, pi_fmt);",
          "content_same": false
        },
        {
          "line": 1114,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(EINVAL)",
          "old_line_content": "                break;",
          "new_line_content": "                if (ret == AVERROR(ENOMEM) || ret == AVERROR(EINVAL))",
          "content_same": false
        },
        {
          "line": 1116,
          "old_api": null,
          "new_api": "msg_Err",
          "old_text": null,
          "new_text": "msg_Err(p_dec, \"avcodec_send_packet critical error\")",
          "old_line_content": "",
          "new_line_content": "                    msg_Err(p_dec, \"avcodec_send_packet critical error\");",
          "content_same": false
        },
        {
          "line": 1629,
          "old_api": null,
          "new_api": "av_pix_fmt_desc_get",
          "old_text": null,
          "new_text": "av_pix_fmt_desc_get(pi_fmt[i])",
          "old_line_content": "                 hwaccel ? \"hard\" : \"soft\", pi_fmt[i], dsc->name );",
          "new_line_content": "        const AVPixFmtDescriptor *dsc = av_pix_fmt_desc_get(pi_fmt[i]);",
          "content_same": false
        },
        {
          "line": 1119,
          "old_api": null,
          "new_api": "av_packet_unref",
          "old_text": null,
          "new_text": "av_packet_unref( &pkt )",
          "old_line_content": "            p_frame_info->b_display = b_need_output_picture;",
          "new_line_content": "                av_packet_unref( &pkt );",
          "content_same": false
        },
        {
          "line": 1634,
          "old_api": null,
          "new_api": "msg_Dbg",
          "old_text": null,
          "new_text": "msg_Dbg( p_dec, \"available %sware decoder output format %d (%s)\",\n                 hwaccel ? \"hard\" : \"soft\", pi_fmt[i], dsc->name )",
          "old_line_content": "    if (p_sys->pix_fmt == AV_PIX_FMT_NONE)",
          "new_line_content": "        msg_Dbg( p_dec, \"available %sware decoder output format %d (%s)\",",
          "content_same": false
        },
        {
          "line": 615,
          "old_api": null,
          "new_api": "var_InheritInteger",
          "old_text": null,
          "new_text": "var_InheritInteger( p_dec, \"avcodec-threads\" )",
          "old_line_content": "",
          "new_line_content": "    int i_thread_count = var_InheritInteger( p_dec, \"avcodec-threads\" );",
          "content_same": false
        },
        {
          "line": 1128,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(EAGAIN)",
          "old_line_content": "                 b_drained = true;",
          "new_line_content": "            i_used = ret != AVERROR(EAGAIN) ? pkt.size : 0;",
          "content_same": false
        },
        {
          "line": 1129,
          "old_api": null,
          "new_api": "av_packet_unref",
          "old_text": null,
          "new_text": "av_packet_unref( &pkt )",
          "old_line_content": "            }",
          "new_line_content": "            av_packet_unref( &pkt );",
          "content_same": false
        },
        {
          "line": 1647,
          "old_api": null,
          "new_api": "lavc_GetVideoFormat",
          "old_text": null,
          "new_text": "lavc_GetVideoFormat(p_dec, &fmt, p_context, p_sys->pix_fmt, swfmt)",
          "old_line_content": "         fmt.i_height != p_dec->fmt_out.video.i_height)",
          "new_line_content": "     if (lavc_GetVideoFormat(p_dec, &fmt, p_context, p_sys->pix_fmt, swfmt) != 0)",
          "content_same": false
        },
        {
          "line": 626,
          "old_api": null,
          "new_api": "__MIN",
          "old_text": null,
          "new_text": "__MIN( i_thread_count, p_codec->id == AV_CODEC_ID_HEVC ? 10 : 6 )",
          "old_line_content": "    p_context->thread_safe_callbacks = true;",
          "new_line_content": "        i_thread_count = __MIN( i_thread_count, p_codec->id == AV_CODEC_ID_HEVC ? 10 : 6 );",
          "content_same": false
        },
        {
          "line": 1138,
          "old_api": null,
          "new_api": "av_frame_alloc",
          "old_text": null,
          "new_text": "av_frame_alloc()",
          "old_line_content": "",
          "new_line_content": "        AVFrame *frame = av_frame_alloc();",
          "content_same": false
        },
        {
          "line": 629,
          "old_api": null,
          "new_api": "__MIN",
          "old_text": null,
          "new_text": "__MIN( i_thread_count, p_codec->id == AV_CODEC_ID_HEVC ? 32 : 16 )",
          "old_line_content": "    {",
          "new_line_content": "    i_thread_count = __MIN( i_thread_count, p_codec->id == AV_CODEC_ID_HEVC ? 32 : 16 );",
          "content_same": false
        },
        {
          "line": 630,
          "old_api": null,
          "new_api": "msg_Dbg",
          "old_text": null,
          "new_text": "msg_Dbg( p_dec, \"allowing %d thread(s) for decoding\", i_thread_count )",
          "old_line_content": "        case AV_CODEC_ID_MPEG4:",
          "new_line_content": "    msg_Dbg( p_dec, \"allowing %d thread(s) for decoding\", i_thread_count );",
          "content_same": false
        },
        {
          "line": 1145,
          "old_api": null,
          "new_api": "avcodec_receive_frame",
          "old_text": null,
          "new_text": "avcodec_receive_frame(p_context, frame)",
          "old_line_content": "                b_error = true;",
          "new_line_content": "        int ret = avcodec_receive_frame(p_context, frame);",
          "content_same": false
        },
        {
          "line": 1146,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(EAGAIN)",
          "old_line_content": "            }",
          "new_line_content": "        if( ret != 0 && ret != AVERROR(EAGAIN) )",
          "content_same": false
        },
        {
          "line": 1148,
          "old_api": null,
          "new_api": "AVERROR",
          "old_text": null,
          "new_text": "AVERROR(EINVAL)",
          "old_line_content": "            if( ret == AVERROR_EOF )",
          "new_line_content": "            if (ret == AVERROR(ENOMEM) || ret == AVERROR(EINVAL))",
          "content_same": false
        },
        {
          "line": 1661,
          "old_api": null,
          "new_api": "msg_Dbg",
          "old_text": null,
          "new_text": "msg_Dbg(p_dec, \"mismatched profile level %d/%d was %d/%d\", p_context->profile,\n                 p_context->level, p_sys->profile, p_sys->level)",
          "old_line_content": "        if (pi_fmt[i] == p_sys->pix_fmt)",
          "new_line_content": "         msg_Dbg(p_dec, \"mismatched profile level %d/%d was %d/%d\", p_context->profile,",
          "content_same": false
        },
        {
          "line": 1150,
          "old_api": null,
          "new_api": "msg_Err",
          "old_text": null,
          "new_text": "msg_Err(p_dec, \"avcodec_receive_frame critical error\")",
          "old_line_content": "        }",
          "new_line_content": "                msg_Err(p_dec, \"avcodec_receive_frame critical error\");",
          "content_same": false
        },
        {
          "line": 1669,
          "old_api": null,
          "new_api": "msg_Dbg",
          "old_text": null,
          "new_text": "msg_Dbg(p_dec, \"reusing decoder output format %d\", pi_fmt[i])",
          "old_line_content": "    {",
          "new_line_content": "            msg_Dbg(p_dec, \"reusing decoder output format %d\", pi_fmt[i]);",
          "content_same": false
        },
        {
          "line": 1159,
          "old_api": null,
          "new_api": "wait_mt",
          "old_text": null,
          "new_text": "wait_mt( p_sys )",
          "old_line_content": "            p_block->i_buffer -= i_used;",
          "new_line_content": "        wait_mt( p_sys );",
          "content_same": false
        },
        {
          "line": 1676,
          "old_api": null,
          "new_api": "msg_Err",
          "old_text": null,
          "new_text": "msg_Err(p_dec, \"existing hardware acceleration cannot be reused\")",
          "old_line_content": "    p_sys->level = p_context->level;",
          "new_line_content": "        msg_Err(p_dec, \"existing hardware acceleration cannot be reused\");",
          "content_same": false
        },
        {
          "line": 1677,
          "old_api": null,
          "new_api": "vlc_va_Delete",
          "old_text": null,
          "new_text": "vlc_va_Delete(p_sys->p_va, &p_context->hwaccel_context)",
          "old_line_content": "",
          "new_line_content": "        vlc_va_Delete(p_sys->p_va, &p_context->hwaccel_context);",
          "content_same": false
        },
        {
          "line": 658,
          "old_api": null,
          "new_api": "date_Init",
          "old_text": null,
          "new_text": "date_Init(&p_sys->pts, 1, 30001)",
          "old_line_content": "",
          "new_line_content": "    date_Init(&p_sys->pts, 1, 30001);",
          "content_same": false
        },
        {
          "line": 1171,
          "old_api": null,
          "new_api": "av_frame_free",
          "old_text": null,
          "new_text": "av_frame_free(&frame)",
          "old_line_content": "        if( p_frame_info->b_eos )",
          "new_line_content": "            av_frame_free(&frame);",
          "content_same": false
        },
        {
          "line": 666,
          "old_api": null,
          "new_api": "GetVlcChroma",
          "old_text": null,
          "new_text": "GetVlcChroma( &p_dec->fmt_out.video, p_context->pix_fmt )",
          "old_line_content": "",
          "new_line_content": "    if( GetVlcChroma( &p_dec->fmt_out.video, p_context->pix_fmt ) != VLC_SUCCESS )",
          "content_same": false
        },
        {
          "line": 1697,
          "old_api": null,
          "new_api": "wait_mt",
          "old_text": null,
          "new_text": "wait_mt(p_sys)",
          "old_line_content": "        AV_PIX_FMT_DXVA2_VLD,",
          "new_line_content": "    wait_mt(p_sys);",
          "content_same": false
        },
        {
          "line": 677,
          "old_api": null,
          "new_api": "malloc",
          "old_text": null,
          "new_text": "malloc( sizeof(video_palette_t) )",
          "old_line_content": "    /* ***** init this codec with special data ***** */",
          "new_line_content": "        p_dec->fmt_out.video.p_palette = malloc( sizeof(video_palette_t) );",
          "content_same": false
        },
        {
          "line": 1194,
          "old_api": null,
          "new_api": "date_Set",
          "old_text": null,
          "new_text": "date_Set( &p_sys->pts, i_pts )",
          "old_line_content": "",
          "new_line_content": "            date_Set( &p_sys->pts, i_pts );",
          "content_same": false
        },
        {
          "line": 1196,
          "old_api": null,
          "new_api": "interpolate_next_pts",
          "old_text": null,
          "new_text": "interpolate_next_pts(p_dec, frame)",
          "old_line_content": "           ( !p_sys->p_va && !frame->linesize[0] ) ||",
          "new_line_content": "        const vlc_tick_t i_next_pts = interpolate_next_pts(p_dec, frame);",
          "content_same": false
        },
        {
          "line": 1198,
          "old_api": null,
          "new_api": "vlc_tick_now",
          "old_text": null,
          "new_text": "vlc_tick_now()",
          "old_line_content": "             !p_sys->b_show_corrupted ) )",
          "new_line_content": "        update_late_frame_count( p_dec, p_block, vlc_tick_now(), i_pts,",
          "content_same": false
        },
        {
          "line": 687,
          "old_api": null,
          "new_api": "OpenVideoCodec",
          "old_text": null,
          "new_text": "OpenVideoCodec( p_dec )",
          "old_line_content": "    }",
          "new_line_content": "    if( OpenVideoCodec( p_dec ) < 0 )",
          "content_same": false
        },
        {
          "line": 689,
          "old_api": null,
          "new_api": "vlc_sem_destroy",
          "old_text": null,
          "new_text": "vlc_sem_destroy( &p_sys->sem_mt )",
          "old_line_content": "    p_dec->pf_decode = DecodeVideo;",
          "new_line_content": "        vlc_sem_destroy( &p_sys->sem_mt );",
          "content_same": false
        },
        {
          "line": 690,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free( p_sys )",
          "old_line_content": "    p_dec->pf_flush  = Flush;",
          "new_line_content": "        free( p_sys );",
          "content_same": false
        },
        {
          "line": 691,
          "old_api": null,
          "new_api": "avcodec_free_context",
          "old_text": null,
          "new_text": "avcodec_free_context( &p_context )",
          "old_line_content": "",
          "new_line_content": "        avcodec_free_context( &p_context );",
          "content_same": false
        },
        {
          "line": 1206,
          "old_api": null,
          "new_api": "av_frame_free",
          "old_text": null,
          "new_text": "av_frame_free(&frame)",
          "old_line_content": "        {",
          "new_line_content": "            av_frame_free(&frame);",
          "content_same": false
        },
        {
          "line": 1720,
          "old_api": null,
          "new_api": "vlc_va_GetChroma",
          "old_text": null,
          "new_text": "vlc_va_GetChroma(hwfmt, swfmt)",
          "old_line_content": "            continue;",
          "new_line_content": "        p_dec->fmt_out.video.i_chroma = vlc_va_GetChroma(hwfmt, swfmt);",
          "content_same": false
        },
        {
          "line": 1725,
          "old_api": null,
          "new_api": "msg_Err",
          "old_text": null,
          "new_text": "msg_Err(p_dec, \"unspecified video dimensions\")",
          "old_line_content": "            continue; /* Unsupported brand of hardware acceleration */",
          "new_line_content": "            msg_Err(p_dec, \"unspecified video dimensions\");",
          "content_same": false
        },
        {
          "line": 1216,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert( p_dec->fmt_out.video.i_chroma != VLC_CODEC_RGBP )",
          "old_line_content": "            {",
          "new_line_content": "            assert( p_dec->fmt_out.video.i_chroma != VLC_CODEC_RGBP );",
          "content_same": false
        },
        {
          "line": 1220,
          "old_api": null,
          "new_api": "malloc",
          "old_text": null,
          "new_text": "malloc( sizeof(video_palette_t) )",
          "old_line_content": "            }",
          "new_line_content": "                      = malloc( sizeof(video_palette_t) );",
          "content_same": false
        },
        {
          "line": 1732,
          "old_api": null,
          "new_api": "post_mt",
          "old_text": null,
          "new_text": "post_mt(p_sys)",
          "old_line_content": "                                  test_pic ? test_pic->p_sys : NULL);",
          "new_line_content": "        post_mt(p_sys);",
          "content_same": false
        },
        {
          "line": 1735,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(!test_pic || test_pic->format.i_chroma == p_dec->fmt_out.video.i_chroma)",
          "old_line_content": "        if (va == NULL)",
          "new_line_content": "        assert(!test_pic || test_pic->format.i_chroma == p_dec->fmt_out.video.i_chroma);",
          "content_same": false
        },
        {
          "line": 1736,
          "old_api": null,
          "new_api": "VLC_OBJECT",
          "old_text": null,
          "new_text": "VLC_OBJECT(p_dec)",
          "old_line_content": "        {",
          "new_line_content": "        vlc_va_t *va = vlc_va_New(VLC_OBJECT(p_dec), p_context, hwfmt,",
          "content_same": false
        },
        {
          "line": 714,
          "old_api": null,
          "new_api": "date_Set",
          "old_text": null,
          "new_text": "date_Set(&p_sys->pts, VLC_TICK_INVALID)",
          "old_line_content": "     * for a picture. This will avoid a deadlock between avcodec_flush_buffers",
          "new_line_content": "    date_Set(&p_sys->pts, VLC_TICK_INVALID); /* To make sure we recover properly */",
          "content_same": false
        },
        {
          "line": 1740,
          "old_api": null,
          "new_api": "picture_Release",
          "old_text": null,
          "new_text": "picture_Release(test_pic)",
          "old_line_content": "",
          "new_line_content": "            picture_Release(test_pic);",
          "content_same": false
        },
        {
          "line": 717,
          "old_api": null,
          "new_api": "cc_Flush",
          "old_text": null,
          "new_text": "cc_Flush( &p_sys->cc )",
          "old_line_content": "",
          "new_line_content": "    cc_Flush( &p_sys->cc );",
          "content_same": false
        },
        {
          "line": 1230,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy( p_palette->palette, frame->data[1], AVPALETTE_SIZE )",
          "old_line_content": "                continue;",
          "new_line_content": "            memcpy( p_palette->palette, frame->data[1], AVPALETTE_SIZE );",
          "content_same": false
        },
        {
          "line": 1743,
          "old_api": null,
          "new_api": "wait_mt",
          "old_text": null,
          "new_text": "wait_mt(p_sys)",
          "old_line_content": "        p_context->draw_horiz_band = NULL;",
          "new_line_content": "            wait_mt(p_sys);",
          "content_same": false
        },
        {
          "line": 1233,
          "old_api": null,
          "new_api": "decoder_UpdateVideoFormat",
          "old_text": null,
          "new_text": "decoder_UpdateVideoFormat( p_dec )",
          "old_line_content": "",
          "new_line_content": "            if( decoder_UpdateVideoFormat( p_dec ) )",
          "content_same": false
        },
        {
          "line": 1235,
          "old_api": null,
          "new_api": "av_frame_free",
          "old_text": null,
          "new_text": "av_frame_free(&frame)",
          "old_line_content": "        if( p_pic == NULL )",
          "new_line_content": "                av_frame_free(&frame);",
          "content_same": false
        },
        {
          "line": 724,
          "old_api": null,
          "new_api": "post_mt",
          "old_text": null,
          "new_text": "post_mt( p_sys )",
          "old_line_content": "    /* Reset cancel state to false */",
          "new_line_content": "    post_mt( p_sys );",
          "content_same": false
        },
        {
          "line": 726,
          "old_api": null,
          "new_api": "avcodec_is_open",
          "old_text": null,
          "new_text": "avcodec_is_open( p_context )",
          "old_line_content": "}",
          "new_line_content": "    if( avcodec_is_open( p_context ) )",
          "content_same": false
        },
        {
          "line": 727,
          "old_api": null,
          "new_api": "avcodec_flush_buffers",
          "old_text": null,
          "new_text": "avcodec_flush_buffers( p_context )",
          "old_line_content": "",
          "new_line_content": "        avcodec_flush_buffers( p_context );",
          "content_same": false
        },
        {
          "line": 728,
          "old_api": null,
          "new_api": "wait_mt",
          "old_text": null,
          "new_text": "wait_mt( p_sys )",
          "old_line_content": "static block_t * filter_earlydropped_blocks( decoder_t *p_dec, block_t *block )",
          "new_line_content": "    wait_mt( p_sys );",
          "content_same": false
        },
        {
          "line": 1753,
          "old_api": null,
          "new_api": "post_mt",
          "old_text": null,
          "new_text": "post_mt(p_sys)",
          "old_line_content": "",
          "new_line_content": "    post_mt(p_sys);",
          "content_same": false
        },
        {
          "line": 731,
          "old_api": null,
          "new_api": "decoder_AbortPictures",
          "old_text": null,
          "new_text": "decoder_AbortPictures( p_dec, false )",
          "old_line_content": "",
          "new_line_content": "    decoder_AbortPictures( p_dec, false );",
          "content_same": false
        },
        {
          "line": 1248,
          "old_api": null,
          "new_api": "decoder_NewPicture",
          "old_text": null,
          "new_text": "decoder_NewPicture(p_dec)",
          "old_line_content": "            }",
          "new_line_content": "                p_pic = decoder_NewPicture(p_dec);",
          "content_same": false
        },
        {
          "line": 1252,
          "old_api": null,
          "new_api": "av_frame_free",
          "old_text": null,
          "new_text": "av_frame_free(&frame)",
          "old_line_content": "            {",
          "new_line_content": "                av_frame_free(&frame);",
          "content_same": false
        },
        {
          "line": 1257,
          "old_api": null,
          "new_api": "lavc_CopyPicture",
          "old_text": null,
          "new_text": "lavc_CopyPicture( p_dec, p_pic, frame )",
          "old_line_content": "        }",
          "new_line_content": "            if( lavc_CopyPicture( p_dec, p_pic, frame ) != VLC_SUCCESS )",
          "content_same": false
        },
        {
          "line": 1259,
          "old_api": null,
          "new_api": "av_frame_free",
          "old_text": null,
          "new_text": "av_frame_free(&frame)",
          "old_line_content": "        {",
          "new_line_content": "                av_frame_free(&frame);",
          "content_same": false
        },
        {
          "line": 1260,
          "old_api": null,
          "new_api": "picture_Release",
          "old_text": null,
          "new_text": "picture_Release( p_pic )",
          "old_line_content": "            /* Some codecs can return the same frame multiple times. By the",
          "new_line_content": "                picture_Release( p_pic );",
          "content_same": false
        },
        {
          "line": 1271,
          "old_api": null,
          "new_api": "picture_Clone",
          "old_text": null,
          "new_text": "picture_Clone( p_pic )",
          "old_line_content": "        }",
          "new_line_content": "            p_pic = picture_Clone( p_pic );",
          "content_same": false
        },
        {
          "line": 1272,
          "old_api": null,
          "new_api": "unlikely",
          "old_text": null,
          "new_text": "unlikely(p_pic == NULL)",
          "old_line_content": "",
          "new_line_content": "            if( unlikely(p_pic == NULL) )",
          "content_same": false
        },
        {
          "line": 1274,
          "old_api": null,
          "new_api": "av_frame_free",
          "old_text": null,
          "new_text": "av_frame_free(&frame)",
          "old_line_content": "        {",
          "new_line_content": "                av_frame_free(&frame);",
          "content_same": false
        },
        {
          "line": 769,
          "old_api": null,
          "new_api": "msg_Err",
          "old_text": null,
          "new_text": "msg_Err( p_dec, \"more than %\"PRId64\" frames of late video -> \"\n                            \"dropping frame (computer too slow ?)\",\n                     p_sys->p_context->reordered_opaque - p_sys->i_last_output_frame )",
          "old_line_content": "            p_sys->i_late_frames--;",
          "new_line_content": "            msg_Err( p_dec, \"more than %\"PRId64\" frames of late video -> \"",
          "content_same": false
        },
        {
          "line": 773,
          "old_api": null,
          "new_api": "date_Set",
          "old_text": null,
          "new_text": "date_Set( &p_sys->pts, VLC_TICK_INVALID )",
          "old_line_content": "",
          "new_line_content": "            date_Set( &p_sys->pts, VLC_TICK_INVALID ); /* To make sure we recover properly */",
          "content_same": false
        },
        {
          "line": 774,
          "old_api": null,
          "new_api": "block_Release",
          "old_text": null,
          "new_text": "block_Release( block )",
          "old_line_content": "    return block;",
          "new_line_content": "            block_Release( block );",
          "content_same": false
        },
        {
          "line": 789,
          "old_api": null,
          "new_api": "date_Get",
          "old_text": null,
          "new_text": "date_Get( &p_sys->pts )",
          "old_line_content": "",
          "new_line_content": "        date_Get( &p_sys->pts ) == VLC_TICK_INVALID )",
          "content_same": false
        },
        {
          "line": 1301,
          "old_api": null,
          "new_api": "DecodeSidedata",
          "old_text": null,
          "new_text": "DecodeSidedata(p_dec, frame, p_pic)",
          "old_line_content": "        if (i_pts != VLC_TICK_INVALID)",
          "new_line_content": "        if (DecodeSidedata(p_dec, frame, p_pic))",
          "content_same": false
        },
        {
          "line": 1304,
          "old_api": null,
          "new_api": "av_frame_free",
          "old_text": null,
          "new_text": "av_frame_free(&frame)",
          "old_line_content": "                p_pic->b_still = true;",
          "new_line_content": "        av_frame_free(&frame);",
          "content_same": false
        },
        {
          "line": 797,
          "old_api": null,
          "new_api": "date_Increment",
          "old_text": null,
          "new_text": "date_Increment( &p_sys->pts, i_tick + frame->repeat_pict )",
          "old_line_content": "{",
          "new_line_content": "    return date_Increment( &p_sys->pts, i_tick + frame->repeat_pict );",
          "content_same": false
        },
        {
          "line": 1312,
          "old_api": null,
          "new_api": "decoder_QueueVideo",
          "old_text": null,
          "new_text": "decoder_QueueVideo( p_dec, p_pic )",
          "old_line_content": "",
          "new_line_content": "            decoder_QueueVideo( p_dec, p_pic );",
          "content_same": false
        },
        {
          "line": 808,
          "old_api": null,
          "new_api": "decoder_GetDisplayDate",
          "old_text": null,
          "new_text": "decoder_GetDisplayDate( p_dec, i_pts )",
          "old_line_content": "   {",
          "new_line_content": "       i_display_date = decoder_GetDisplayDate( p_dec, i_pts );",
          "content_same": false
        },
        {
          "line": 1321,
          "old_api": null,
          "new_api": "avcodec_flush_buffers",
          "old_text": null,
          "new_text": "avcodec_flush_buffers( p_sys->p_context )",
          "old_line_content": "}",
          "new_line_content": "        avcodec_flush_buffers( p_sys->p_context );",
          "content_same": false
        },
        {
          "line": 811,
          "old_api": null,
          "new_api": "VLC_TICK_FROM_MS",
          "old_text": null,
          "new_text": "VLC_TICK_FROM_MS(20)",
          "old_line_content": "       {",
          "new_line_content": "                          ? (i_next_pts - i_pts) / 2 : VLC_TICK_FROM_MS(20);",
          "content_same": false
        },
        {
          "line": 1324,
          "old_api": null,
          "new_api": "block_Release",
          "old_text": null,
          "new_text": "block_Release( p_block )",
          "old_line_content": "{",
          "new_line_content": "        block_Release( p_block );",
          "content_same": false
        },
        {
          "line": 1344,
          "old_api": null,
          "new_api": "date_Set",
          "old_text": null,
          "new_text": "date_Set( &p_sys->pts, VLC_TICK_INVALID )",
          "old_line_content": "            p_block = NULL; /* output only */",
          "new_line_content": "        date_Set( &p_sys->pts, VLC_TICK_INVALID ); /* To make sure we recover properly */",
          "content_same": false
        },
        {
          "line": 1345,
          "old_api": null,
          "new_api": "cc_Flush",
          "old_text": null,
          "new_text": "cc_Flush( &p_sys->cc )",
          "old_line_content": "        }",
          "new_line_content": "        cc_Flush( &p_sys->cc );",
          "content_same": false
        },
        {
          "line": 1349,
          "old_api": null,
          "new_api": "block_Release",
          "old_text": null,
          "new_text": "block_Release( p_block )",
          "old_line_content": "}",
          "new_line_content": "            block_Release( p_block );",
          "content_same": false
        },
        {
          "line": 1354,
          "old_api": null,
          "new_api": "DecodeBlock",
          "old_text": null,
          "new_text": "DecodeBlock( p_dec, pp_block )",
          "old_line_content": " * This function is called when the thread ends after a successful",
          "new_line_content": "    return DecodeBlock( p_dec, pp_block );",
          "content_same": false
        },
        {
          "line": 845,
          "old_api": null,
          "new_api": "av_frame_get_side_data",
          "old_text": null,
          "new_text": "av_frame_get_side_data( frame,\n                                    AV_FRAME_DATA_MASTERING_DISPLAY_METADATA )",
          "old_line_content": "        if ( hdr_meta->has_luminance )",
          "new_line_content": "            av_frame_get_side_data( frame,",
          "content_same": false
        },
        {
          "line": 855,
          "old_api": null,
          "new_api": "FROM_AVRAT",
          "old_text": null,
          "new_text": "FROM_AVRAT(ST2086_LUMA_FACTOR, hdr_meta->max_luminance)",
          "old_line_content": "#define ST2086_RED   2",
          "new_line_content": "                    FROM_AVRAT(ST2086_LUMA_FACTOR, hdr_meta->max_luminance);",
          "content_same": false
        },
        {
          "line": 857,
          "old_api": null,
          "new_api": "FROM_AVRAT",
          "old_text": null,
          "new_text": "FROM_AVRAT(ST2086_LUMA_FACTOR, hdr_meta->min_luminance)",
          "old_line_content": "#define ST2086_BLUE  1",
          "new_line_content": "                    FROM_AVRAT(ST2086_LUMA_FACTOR, hdr_meta->min_luminance);",
          "content_same": false
        },
        {
          "line": 1373,
          "old_api": null,
          "new_api": "avcodec_is_open",
          "old_text": null,
          "new_text": "avcodec_is_open( ctx )",
          "old_line_content": "",
          "new_line_content": "    if( avcodec_is_open( ctx ) )",
          "content_same": false
        },
        {
          "line": 1374,
          "old_api": null,
          "new_api": "avcodec_flush_buffers",
          "old_text": null,
          "new_text": "avcodec_flush_buffers( ctx )",
          "old_line_content": "    hwaccel_context = ctx->hwaccel_context;",
          "new_line_content": "        avcodec_flush_buffers( ctx );",
          "content_same": false
        },
        {
          "line": 1376,
          "old_api": null,
          "new_api": "wait_mt",
          "old_text": null,
          "new_text": "wait_mt( p_sys )",
          "old_line_content": "",
          "new_line_content": "    wait_mt( p_sys );",
          "content_same": false
        },
        {
          "line": 1384,
          "old_api": null,
          "new_api": "vlc_va_Delete",
          "old_text": null,
          "new_text": "vlc_va_Delete( p_sys->p_va, &hwaccel_context )",
          "old_line_content": "/*****************************************************************************",
          "new_line_content": "        vlc_va_Delete( p_sys->p_va, &hwaccel_context );",
          "content_same": false
        },
        {
          "line": 1386,
          "old_api": null,
          "new_api": "vlc_sem_destroy",
          "old_text": null,
          "new_text": "vlc_sem_destroy( &p_sys->sem_mt )",
          "old_line_content": " *****************************************************************************/",
          "new_line_content": "    vlc_sem_destroy( &p_sys->sem_mt );",
          "content_same": false
        },
        {
          "line": 1387,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free( p_sys )",
          "old_line_content": "static void ffmpeg_InitCodec( decoder_t *p_dec )",
          "new_line_content": "    free( p_sys );",
          "content_same": false
        },
        {
          "line": 879,
          "old_api": null,
          "new_api": "FROM_AVRAT",
          "old_text": null,
          "new_text": "FROM_AVRAT(ST2086_PRIM_FACTOR, hdr_meta->display_primaries[LAV_BLUE][1])",
          "old_line_content": "",
          "new_line_content": "                    FROM_AVRAT(ST2086_PRIM_FACTOR, hdr_meta->display_primaries[LAV_BLUE][1]);",
          "content_same": false
        },
        {
          "line": 881,
          "old_api": null,
          "new_api": "FROM_AVRAT",
          "old_text": null,
          "new_text": "FROM_AVRAT(ST2086_PRIM_FACTOR, hdr_meta->white_point[0])",
          "old_line_content": "                     &p_pic->format.mastering,",
          "new_line_content": "                    FROM_AVRAT(ST2086_PRIM_FACTOR, hdr_meta->white_point[0]);",
          "content_same": false
        },
        {
          "line": 883,
          "old_api": null,
          "new_api": "FROM_AVRAT",
          "old_text": null,
          "new_text": "FROM_AVRAT(ST2086_PRIM_FACTOR, hdr_meta->white_point[1])",
          "old_line_content": "        {",
          "new_line_content": "                    FROM_AVRAT(ST2086_PRIM_FACTOR, hdr_meta->white_point[1]);",
          "content_same": false
        },
        {
          "line": 886,
          "old_api": null,
          "new_api": "memcmp",
          "old_text": null,
          "new_text": "memcmp( &p_dec->fmt_out.video.mastering,\n                     &p_pic->format.mastering,\n                     sizeof(p_pic->format.mastering) )",
          "old_line_content": "        }",
          "new_line_content": "        if ( memcmp( &p_dec->fmt_out.video.mastering,",
          "content_same": false
        },
        {
          "line": 898,
          "old_api": null,
          "new_api": "av_frame_get_side_data",
          "old_text": null,
          "new_text": "av_frame_get_side_data( frame,\n                                    AV_FRAME_DATA_CONTENT_LIGHT_LEVEL )",
          "old_line_content": "        p_pic->format.lighting.MaxCLL = light_meta->MaxCLL;",
          "new_line_content": "            av_frame_get_side_data( frame,",
          "content_same": false
        },
        {
          "line": 1412,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset( &p[4], 0, 8 )",
          "old_line_content": "        {",
          "new_line_content": "        memset( &p[4], 0, 8 );",
          "content_same": false
        },
        {
          "line": 1413,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy( &p[12], p_dec->fmt_in.p_extra, i_size )",
          "old_line_content": "            uint8_t *psz = &p[0x52];",
          "new_line_content": "        memcpy( &p[12], p_dec->fmt_in.p_extra, i_size );",
          "content_same": false
        },
        {
          "line": 906,
          "old_api": null,
          "new_api": "memcmp",
          "old_text": null,
          "new_text": "memcmp( &p_dec->fmt_out.video.lighting,\n                     &p_pic->format.lighting,\n                     sizeof(p_pic->format.lighting) )",
          "old_line_content": "        }",
          "new_line_content": "        if ( memcmp( &p_dec->fmt_out.video.lighting,",
          "content_same": false
        },
        {
          "line": 917,
          "old_api": null,
          "new_api": "av_frame_get_side_data",
          "old_text": null,
          "new_text": "av_frame_get_side_data( frame,\n                                    AV_FRAME_DATA_STEREO3D )",
          "old_line_content": "        switch (stereo_data->type)",
          "new_line_content": "            av_frame_get_side_data( frame,",
          "content_same": false
        },
        {
          "line": 1429,
          "old_api": null,
          "new_api": "strncmp",
          "old_text": null,
          "new_text": "strncmp( (char*)&psz[4], \"SMI \", 4 )",
          "old_line_content": "",
          "new_line_content": "                if( !strncmp( (char*)&psz[4], \"SMI \", 4 ) )",
          "content_same": false
        },
        {
          "line": 1431,
          "old_api": null,
          "new_api": "memmove",
          "old_text": null,
          "new_text": "memmove( &p[0x52], psz,\n                             &p[p_sys->p_context->extradata_size] - psz )",
          "old_line_content": "            }",
          "new_line_content": "                    memmove( &p[0x52], psz,",
          "content_same": false
        },
        {
          "line": 1444,
          "old_api": null,
          "new_api": "av_malloc",
          "old_text": null,
          "new_text": "av_malloc( i_size + FF_INPUT_BUFFER_PADDING_SIZE )",
          "old_line_content": "                    0, FF_INPUT_BUFFER_PADDING_SIZE );",
          "new_line_content": "            av_malloc( i_size + FF_INPUT_BUFFER_PADDING_SIZE );",
          "content_same": false
        },
        {
          "line": 1447,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy( p_sys->p_context->extradata,\n                    p_dec->fmt_in.p_extra, i_size )",
          "old_line_content": "}",
          "new_line_content": "            memcpy( p_sys->p_context->extradata,",
          "content_same": false
        },
        {
          "line": 1449,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset( p_sys->p_context->extradata + i_size,\n                    0, FF_INPUT_BUFFER_PADDING_SIZE )",
          "old_line_content": "static void lavc_ReleaseFrame(void *opaque, uint8_t *data)",
          "new_line_content": "            memset( p_sys->p_context->extradata + i_size,",
          "content_same": false
        },
        {
          "line": 1460,
          "old_api": null,
          "new_api": "picture_Release",
          "old_text": null,
          "new_text": "picture_Release(picture)",
          "old_line_content": "    decoder_sys_t *p_sys = dec->p_sys;",
          "new_line_content": "    picture_Release(picture);",
          "content_same": false
        },
        {
          "line": 1475,
          "old_api": null,
          "new_api": "msg_Err",
          "old_text": null,
          "new_text": "msg_Err(dec, \"hardware acceleration picture allocation failed\")",
          "old_line_content": "     * data[3] actually contains the format-specific surface handle. */",
          "new_line_content": "        msg_Err(dec, \"hardware acceleration picture allocation failed\");",
          "content_same": false
        },
        {
          "line": 1476,
          "old_api": null,
          "new_api": "picture_Release",
          "old_text": null,
          "new_text": "picture_Release(pic)",
          "old_line_content": "    frame->data[3] = frame->data[0];",
          "new_line_content": "        picture_Release(pic);",
          "content_same": false
        },
        {
          "line": 1484,
          "old_api": null,
          "new_api": "av_buffer_create",
          "old_text": null,
          "new_text": "av_buffer_create(frame->data[0], 0, lavc_ReleaseFrame, pic, 0)",
          "old_line_content": "",
          "new_line_content": "    frame->buf[0] = av_buffer_create(frame->data[0], 0, lavc_ReleaseFrame, pic, 0);",
          "content_same": false
        },
        {
          "line": 973,
          "old_api": null,
          "new_api": "block_Alloc",
          "old_text": null,
          "new_text": "block_Alloc( p_sys->cc.i_data )",
          "old_line_content": "                else",
          "new_line_content": "            block_t *p_cc = block_Alloc( p_sys->cc.i_data );",
          "content_same": false
        },
        {
          "line": 1485,
          "old_api": null,
          "new_api": "unlikely",
          "old_text": null,
          "new_text": "unlikely(frame->buf[0] == NULL)",
          "old_line_content": "    frame->opaque = pic;",
          "new_line_content": "    if (unlikely(frame->buf[0] == NULL))",
          "content_same": false
        },
        {
          "line": 1487,
          "old_api": null,
          "new_api": "lavc_ReleaseFrame",
          "old_text": null,
          "new_text": "lavc_ReleaseFrame(pic, frame->data[0])",
          "old_line_content": "}",
          "new_line_content": "        lavc_ReleaseFrame(pic, frame->data[0]);",
          "content_same": false
        },
        {
          "line": 976,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy( p_cc->p_buffer, p_sys->cc.p_data, p_sys->cc.i_data )",
          "old_line_content": "                desc.i_608_channels = p_sys->cc.i_608channels;",
          "new_line_content": "                memcpy( p_cc->p_buffer, p_sys->cc.p_data, p_sys->cc.i_data );",
          "content_same": false
        },
        {
          "line": 985,
          "old_api": null,
          "new_api": "decoder_QueueCc",
          "old_text": null,
          "new_text": "decoder_QueueCc( p_dec, p_cc, &desc )",
          "old_line_content": "}",
          "new_line_content": "                decoder_QueueCc( p_dec, p_cc, &desc );",
          "content_same": false
        },
        {
          "line": 987,
          "old_api": null,
          "new_api": "cc_Flush",
          "old_text": null,
          "new_text": "cc_Flush( &p_sys->cc )",
          "old_line_content": "/*****************************************************************************",
          "new_line_content": "            cc_Flush( &p_sys->cc );",
          "content_same": false
        },
        {
          "line": 1503,
          "old_api": null,
          "new_api": "decoder_NewPicture",
          "old_text": null,
          "new_text": "decoder_NewPicture(dec)",
          "old_line_content": "    int aligns[AV_NUM_DATA_POINTERS];",
          "new_line_content": "    picture_t *pic = decoder_NewPicture(dec);",
          "content_same": false
        },
        {
          "line": 1511,
          "old_api": null,
          "new_api": "avcodec_align_dimensions2",
          "old_text": null,
          "new_text": "avcodec_align_dimensions2(ctx, &width, &height, aligns)",
          "old_line_content": "    for (int i = 0; i < pic->i_planes; i++)",
          "new_line_content": "    avcodec_align_dimensions2(ctx, &width, &height, aligns);",
          "content_same": false
        },
        {
          "line": 488,
          "old_api": null,
          "new_api": "post_mt",
          "old_text": null,
          "new_text": "post_mt( p_sys )",
          "old_line_content": "    switch( ctx->active_thread_type )",
          "new_line_content": "    post_mt( p_sys );",
          "content_same": false
        },
        {
          "line": 489,
          "old_api": null,
          "new_api": "ffmpeg_OpenCodec",
          "old_text": null,
          "new_text": "ffmpeg_OpenCodec( p_dec, ctx, codec )",
          "old_line_content": "    {",
          "new_line_content": "    ret = ffmpeg_OpenCodec( p_dec, ctx, codec );",
          "content_same": false
        },
        {
          "line": 490,
          "old_api": null,
          "new_api": "wait_mt",
          "old_text": null,
          "new_text": "wait_mt( p_sys )",
          "old_line_content": "        case FF_THREAD_FRAME:",
          "new_line_content": "    wait_mt( p_sys );",
          "content_same": false
        },
        {
          "line": 1514,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(pic->p[0].i_pitch >= width * pic->p[0].i_pixel_pitch)",
          "old_line_content": "        {",
          "new_line_content": "    assert(pic->p[0].i_pitch >= width * pic->p[0].i_pixel_pitch);",
          "content_same": false
        },
        {
          "line": 497,
          "old_api": null,
          "new_api": "msg_Dbg",
          "old_text": null,
          "new_text": "msg_Dbg( p_dec, \"using frame thread mode with %d threads\",\n                     ctx->thread_count )",
          "old_line_content": "            break;",
          "new_line_content": "            msg_Dbg( p_dec, \"using frame thread mode with %d threads\",",
          "content_same": false
        },
        {
          "line": 1010,
          "old_api": null,
          "new_api": "ffmpeg_InitCodec",
          "old_text": null,
          "new_text": "ffmpeg_InitCodec( p_dec )",
          "old_line_content": "    if(!p_block && !(p_sys->p_codec->capabilities & AV_CODEC_CAP_DELAY) )",
          "new_line_content": "        ffmpeg_InitCodec( p_dec );",
          "content_same": false
        },
        {
          "line": 1011,
          "old_api": null,
          "new_api": "avcodec_is_open",
          "old_text": null,
          "new_text": "avcodec_is_open( p_context )",
          "old_line_content": "        return VLCDEC_SUCCESS;",
          "new_line_content": "        if( !avcodec_is_open( p_context ) )",
          "content_same": false
        },
        {
          "line": 1012,
          "old_api": null,
          "new_api": "OpenVideoCodec",
          "old_text": null,
          "new_text": "OpenVideoCodec( p_dec )",
          "old_line_content": "",
          "new_line_content": "            OpenVideoCodec( p_dec );",
          "content_same": false
        },
        {
          "line": 501,
          "old_api": null,
          "new_api": "msg_Dbg",
          "old_text": null,
          "new_text": "msg_Dbg( p_dec, \"using slice thread mode with %d threads\",\n                     ctx->thread_count )",
          "old_line_content": "            break;",
          "new_line_content": "            msg_Dbg( p_dec, \"using slice thread mode with %d threads\",",
          "content_same": false
        },
        {
          "line": 1521,
          "old_api": null,
          "new_api": "atomic_exchange",
          "old_text": null,
          "new_text": "atomic_exchange(&sys->b_dr_failure, true)",
          "old_line_content": "        {",
          "new_line_content": "            if (!atomic_exchange(&sys->b_dr_failure, true))",
          "content_same": false
        },
        {
          "line": 1528,
          "old_api": null,
          "new_api": "atomic_exchange",
          "old_text": null,
          "new_text": "atomic_exchange(&sys->b_dr_failure, true)",
          "old_line_content": "    /* Allocate buffer references and initialize planes */",
          "new_line_content": "            if (!atomic_exchange(&sys->b_dr_failure, true))",
          "content_same": false
        },
        {
          "line": 506,
          "old_api": null,
          "new_api": "msg_Warn",
          "old_text": null,
          "new_text": "msg_Warn( p_dec, \"failed to enable threaded decoding\" )",
          "old_line_content": "    }",
          "new_line_content": "                msg_Warn( p_dec, \"failed to enable threaded decoding\" );",
          "content_same": false
        },
        {
          "line": 1019,
          "old_api": null,
          "new_api": "avcodec_is_open",
          "old_text": null,
          "new_text": "avcodec_is_open( p_context )",
          "old_line_content": "",
          "new_line_content": "    if( !avcodec_is_open( p_context ) )",
          "content_same": false
        },
        {
          "line": 509,
          "old_api": null,
          "new_api": "msg_Warn",
          "old_text": null,
          "new_text": "msg_Warn( p_dec, \"using unknown thread mode with %d threads\",\n                      ctx->thread_count )",
          "old_line_content": "",
          "new_line_content": "            msg_Warn( p_dec, \"using unknown thread mode with %d threads\",",
          "content_same": false
        },
        {
          "line": 1022,
          "old_api": null,
          "new_api": "block_Release",
          "old_text": null,
          "new_text": "block_Release( p_block )",
          "old_line_content": "    if( !p_block || !(p_block->i_flags & BLOCK_FLAG_PREROLL) )",
          "new_line_content": "            block_Release( p_block );",
          "content_same": false
        },
        {
          "line": 1535,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(pic->i_planes < PICTURE_PLANE_MAX)",
          "old_line_content": "        int size = pic->p[i].i_pitch * pic->p[i].i_lines;",
          "new_line_content": "    assert(pic->i_planes < PICTURE_PLANE_MAX);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 1539,
          "old_api": "av_buffer_create",
          "new_api": null,
          "old_text": "av_buffer_create(data, size, lavc_ReleaseFrame,\n                                         pic, 0)",
          "new_text": null,
          "old_line_content": "        frame->buf[i] = av_buffer_create(data, size, lavc_ReleaseFrame,",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 1541,
          "old_api": "unlikely",
          "new_api": null,
          "old_text": "unlikely(frame->buf[i] == NULL)",
          "new_text": null,
          "old_line_content": "        if (unlikely(frame->buf[i] == NULL))",
          "new_line_content": "        int size = pic->p[i].i_pitch * pic->p[i].i_lines;",
          "content_same": false
        },
        {
          "line": 520,
          "old_api": "ffmpeg_AllocContext",
          "new_api": null,
          "old_text": "ffmpeg_AllocContext( p_dec, &p_codec )",
          "new_text": null,
          "old_line_content": "    AVCodecContext *p_context = ffmpeg_AllocContext( p_dec, &p_codec );",
          "new_line_content": " * opened (done after the first decoded frame).",
          "content_same": false
        },
        {
          "line": 1544,
          "old_api": "av_buffer_unref",
          "new_api": null,
          "old_text": "av_buffer_unref(&frame->buf[--i])",
          "new_text": null,
          "old_line_content": "                av_buffer_unref(&frame->buf[--i]);",
          "new_line_content": "        frame->linesize[i] = pic->p[i].i_pitch;",
          "content_same": false
        },
        {
          "line": 1035,
          "old_api": "filter_earlydropped_blocks",
          "new_api": null,
          "old_text": "filter_earlydropped_blocks( p_dec, p_block )",
          "new_text": null,
          "old_line_content": "            p_block = filter_earlydropped_blocks( p_dec, p_block );",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 527,
          "old_api": "calloc",
          "new_api": null,
          "old_text": "calloc( 1, sizeof(*p_sys) )",
          "new_text": null,
          "old_line_content": "    decoder_sys_t *p_sys = calloc( 1, sizeof(*p_sys) );",
          "new_line_content": "    if( p_context == NULL )",
          "content_same": false
        },
        {
          "line": 528,
          "old_api": "unlikely",
          "new_api": null,
          "old_text": "unlikely(p_sys == NULL)",
          "new_text": null,
          "old_line_content": "    if( unlikely(p_sys == NULL) )",
          "new_line_content": "        return VLC_EGENERIC;",
          "content_same": false
        },
        {
          "line": 1040,
          "old_api": "__MAX",
          "new_api": null,
          "old_text": "__MAX( p_context->skip_frame, AVDISCARD_NONREF )",
          "new_text": null,
          "old_line_content": "        p_context->skip_frame = __MAX( p_context->skip_frame, AVDISCARD_NONREF );",
          "new_line_content": "        if( p_dec->b_frame_drop_allowed )",
          "content_same": false
        },
        {
          "line": 530,
          "old_api": "avcodec_free_context",
          "new_api": null,
          "old_text": "avcodec_free_context( &p_context )",
          "new_text": null,
          "old_line_content": "        avcodec_free_context( &p_context );",
          "new_line_content": "    int i_val;",
          "content_same": false
        },
        {
          "line": 1552,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(pic->i_planes > 0)",
          "new_text": null,
          "old_line_content": "    assert(pic->i_planes > 0);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1556,
          "old_api": "picture_Release",
          "new_api": null,
          "old_text": "picture_Release(pic)",
          "new_text": null,
          "old_line_content": "    picture_Release(pic);",
          "new_line_content": "    frame->opaque = pic;",
          "content_same": false
        },
        {
          "line": 1050,
          "old_api": "block_Realloc",
          "new_api": null,
          "old_text": "block_Realloc( p_block, 0,\n                            p_block->i_buffer + FF_INPUT_BUFFER_PADDING_SIZE )",
          "new_text": null,
          "old_line_content": "        p_block = block_Realloc( p_block, 0,",
          "new_line_content": "     * Do the actual decoding now */",
          "content_same": false
        },
        {
          "line": 538,
          "old_api": "vlc_sem_init",
          "new_api": null,
          "old_text": "vlc_sem_init( &p_sys->sem_mt, 0 )",
          "new_text": null,
          "old_line_content": "    vlc_sem_init( &p_sys->sem_mt, 0 );",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 541,
          "old_api": "ffmpeg_CodecTag",
          "new_api": null,
          "old_text": "ffmpeg_CodecTag( p_dec->fmt_in.i_original_fourcc ?\n                                p_dec->fmt_in.i_original_fourcc : p_dec->fmt_in.i_codec )",
          "new_text": null,
          "old_line_content": "    p_context->codec_tag = ffmpeg_CodecTag( p_dec->fmt_in.i_original_fourcc ?",
          "new_line_content": "    p_sys->p_context = p_context;",
          "content_same": false
        },
        {
          "line": 546,
          "old_api": "var_InheritInteger",
          "new_api": null,
          "old_text": "var_InheritInteger( p_dec, \"avcodec-workaround-bugs\" )",
          "new_text": null,
          "old_line_content": "        var_InheritInteger( p_dec, \"avcodec-workaround-bugs\" );",
          "new_line_content": "    /* ***** Fill p_context with init values ***** */",
          "content_same": false
        },
        {
          "line": 548,
          "old_api": "var_InheritInteger",
          "new_api": null,
          "old_text": "var_InheritInteger( p_dec, \"avcodec-error-resilience\" )",
          "new_text": null,
          "old_line_content": "        var_InheritInteger( p_dec, \"avcodec-error-resilience\" );",
          "new_line_content": "                                p_dec->fmt_in.i_original_fourcc : p_dec->fmt_in.i_codec );",
          "content_same": false
        },
        {
          "line": 550,
          "old_api": "var_CreateGetBool",
          "new_api": null,
          "old_text": "var_CreateGetBool( p_dec, \"grayscale\" )",
          "new_text": null,
          "old_line_content": "    if( var_CreateGetBool( p_dec, \"grayscale\" ) )",
          "new_line_content": "    /*  ***** Get configuration of ffmpeg plugin ***** */",
          "content_same": false
        },
        {
          "line": 1067,
          "old_api": "post_mt",
          "new_api": null,
          "old_text": "post_mt( p_sys )",
          "new_text": null,
          "old_line_content": "        post_mt( p_sys );",
          "new_line_content": "    bool b_drained = false;",
          "content_same": false
        },
        {
          "line": 1579,
          "old_api": "wait_mt",
          "new_api": null,
          "old_text": "wait_mt(sys)",
          "new_text": null,
          "old_line_content": "    wait_mt(sys);",
          "new_line_content": "        frame->data[i] = NULL;",
          "content_same": false
        },
        {
          "line": 1072,
          "old_api": "av_init_packet",
          "new_api": null,
          "old_text": "av_init_packet( &pkt )",
          "new_text": null,
          "old_line_content": "            av_init_packet( &pkt );",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1584,
          "old_api": "post_mt",
          "new_api": null,
          "old_text": "post_mt(sys)",
          "new_text": null,
          "old_line_content": "            post_mt(sys);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 563,
          "old_api": "var_CreateGetBool",
          "new_api": null,
          "old_text": "var_CreateGetBool( p_dec, \"avcodec-fast\" )",
          "new_text": null,
          "old_line_content": "    if( var_CreateGetBool( p_dec, \"avcodec-fast\" ) )",
          "new_line_content": "    if( i_val >= 4 ) p_context->skip_loop_filter = AVDISCARD_ALL;",
          "content_same": false
        },
        {
          "line": 1077,
          "old_api": "TO_AV_TS",
          "new_api": null,
          "old_text": "TO_AV_TS(p_block->i_pts)",
          "new_text": null,
          "old_line_content": "                pkt.pts = p_block->i_pts != VLC_TICK_INVALID ? TO_AV_TS(p_block->i_pts) : AV_NOPTS_VALUE;",
          "new_line_content": "            AVPacket pkt;",
          "content_same": false
        },
        {
          "line": 567,
          "old_api": "var_CreateGetBool",
          "new_api": null,
          "old_text": "var_CreateGetBool( p_dec, \"avcodec-hurry-up\" )",
          "new_text": null,
          "old_line_content": "    p_sys->b_hurry_up = var_CreateGetBool( p_dec, \"avcodec-hurry-up\" );",
          "new_line_content": "    else p_context->skip_loop_filter = AVDISCARD_DEFAULT;",
          "content_same": false
        },
        {
          "line": 568,
          "old_api": "var_CreateGetBool",
          "new_api": null,
          "old_text": "var_CreateGetBool( p_dec, \"avcodec-corrupted\" )",
          "new_text": null,
          "old_line_content": "    p_sys->b_show_corrupted = var_CreateGetBool( p_dec, \"avcodec-corrupted\" );",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1593,
          "old_api": "post_mt",
          "new_api": null,
          "old_text": "post_mt(sys)",
          "new_text": null,
          "old_line_content": "            post_mt(sys);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 570,
          "old_api": "var_CreateGetInteger",
          "new_api": null,
          "old_text": "var_CreateGetInteger( p_dec, \"avcodec-skip-frame\" )",
          "new_text": null,
          "old_line_content": "    i_val = var_CreateGetInteger( p_dec, \"avcodec-skip-frame\" );",
          "new_line_content": "        p_context->flags2 |= AV_CODEC_FLAG2_FAST;",
          "content_same": false
        },
        {
          "line": 1600,
          "old_api": "lavc_va_GetFrame",
          "new_api": null,
          "old_text": "lavc_va_GetFrame(ctx, frame)",
          "new_text": null,
          "old_line_content": "        return lavc_va_GetFrame(ctx, frame);",
          "new_line_content": "            return -1;",
          "content_same": false
        },
        {
          "line": 579,
          "old_api": "var_CreateGetInteger",
          "new_api": null,
          "old_text": "var_CreateGetInteger( p_dec, \"avcodec-skip-idct\" )",
          "new_text": null,
          "old_line_content": "    i_val = var_CreateGetInteger( p_dec, \"avcodec-skip-idct\" );",
          "new_line_content": "    else if( i_val == 2 ) p_sys->i_skip_frame = AVDISCARD_BIDIR;",
          "content_same": false
        },
        {
          "line": 1091,
          "old_api": "av_packet_new_side_data",
          "new_api": null,
          "old_text": "av_packet_new_side_data(&pkt, AV_PKT_DATA_PALETTE, AVPALETTE_SIZE)",
          "new_text": null,
          "old_line_content": "                uint8_t *pal = av_packet_new_side_data(&pkt, AV_PKT_DATA_PALETTE, AVPALETTE_SIZE);",
          "new_line_content": "                b_drain = false;",
          "content_same": false
        },
        {
          "line": 1093,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(pal, p_dec->fmt_in.video.p_palette->palette, AVPALETTE_SIZE)",
          "new_text": null,
          "old_line_content": "                    memcpy(pal, p_dec->fmt_in.video.p_palette->palette, AVPALETTE_SIZE);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1604,
          "old_api": "lavc_dr_GetFrame",
          "new_api": null,
          "old_text": "lavc_dr_GetFrame(ctx, frame)",
          "new_text": null,
          "old_line_content": "    int ret = lavc_dr_GetFrame(ctx, frame);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 589,
          "old_api": "atomic_init",
          "new_api": null,
          "old_text": "atomic_init(&p_sys->b_dr_failure, false)",
          "new_text": null,
          "old_line_content": "    atomic_init(&p_sys->b_dr_failure, false);",
          "new_line_content": "    else if( i_val == 1 ) p_context->skip_idct = AVDISCARD_NONREF;",
          "content_same": false
        },
        {
          "line": 590,
          "old_api": "var_CreateGetBool",
          "new_api": null,
          "old_text": "var_CreateGetBool( p_dec, \"avcodec-dr\" )",
          "new_text": null,
          "old_line_content": "    if( var_CreateGetBool( p_dec, \"avcodec-dr\" ) &&",
          "new_line_content": "    else if( i_val == -1 ) p_context->skip_idct = AVDISCARD_NONE;",
          "content_same": false
        },
        {
          "line": 1105,
          "old_api": "avcodec_send_packet",
          "new_api": null,
          "old_text": "avcodec_send_packet(p_context, &pkt)",
          "new_text": null,
          "old_line_content": "            int ret = avcodec_send_packet(p_context, &pkt);",
          "new_line_content": "            if( p_block )",
          "content_same": false
        },
        {
          "line": 1106,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(EAGAIN)",
          "new_text": null,
          "old_line_content": "            if( ret != 0 && ret != AVERROR(EAGAIN) )",
          "new_line_content": "            {",
          "content_same": false
        },
        {
          "line": 1618,
          "old_api": "avcodec_default_get_format",
          "new_api": null,
          "old_text": "avcodec_default_get_format(p_context, pi_fmt)",
          "new_text": null,
          "old_line_content": "    enum PixelFormat swfmt = avcodec_default_get_format(p_context, pi_fmt);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1108,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(EINVAL)",
          "new_text": null,
          "old_line_content": "                if (ret == AVERROR(ENOMEM) || ret == AVERROR(EINVAL))",
          "new_line_content": "                p_block->i_dts = VLC_TICK_INVALID;",
          "content_same": false
        },
        {
          "line": 1110,
          "old_api": "msg_Err",
          "new_api": null,
          "old_text": "msg_Err(p_dec, \"avcodec_send_packet critical error\")",
          "new_text": null,
          "old_line_content": "                    msg_Err(p_dec, \"avcodec_send_packet critical error\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1623,
          "old_api": "av_pix_fmt_desc_get",
          "new_api": null,
          "old_text": "av_pix_fmt_desc_get(pi_fmt[i])",
          "new_text": null,
          "old_line_content": "        const AVPixFmtDescriptor *dsc = av_pix_fmt_desc_get(pi_fmt[i]);",
          "new_line_content": "    /* Enumerate available formats */",
          "content_same": false
        },
        {
          "line": 1113,
          "old_api": "av_packet_unref",
          "new_api": null,
          "old_text": "av_packet_unref( &pkt )",
          "new_text": null,
          "old_line_content": "                av_packet_unref( &pkt );",
          "new_line_content": "            {",
          "content_same": false
        },
        {
          "line": 1628,
          "old_api": "msg_Dbg",
          "new_api": null,
          "old_text": "msg_Dbg( p_dec, \"available %sware decoder output format %d (%s)\",\n                 hwaccel ? \"hard\" : \"soft\", pi_fmt[i], dsc->name )",
          "new_text": null,
          "old_line_content": "        msg_Dbg( p_dec, \"available %sware decoder output format %d (%s)\",",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 609,
          "old_api": "var_InheritInteger",
          "new_api": null,
          "old_text": "var_InheritInteger( p_dec, \"avcodec-threads\" )",
          "new_text": null,
          "old_line_content": "    int i_thread_count = var_InheritInteger( p_dec, \"avcodec-threads\" );",
          "new_line_content": "    /* Always use our get_buffer wrapper so we can calculate the",
          "content_same": false
        },
        {
          "line": 1122,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(EAGAIN)",
          "new_text": null,
          "old_line_content": "            i_used = ret != AVERROR(EAGAIN) ? pkt.size : 0;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1123,
          "old_api": "av_packet_unref",
          "new_api": null,
          "old_text": "av_packet_unref( &pkt )",
          "new_text": null,
          "old_line_content": "            av_packet_unref( &pkt );",
          "new_line_content": "            struct frame_info_s *p_frame_info = &p_sys->frame_info[p_context->reordered_opaque % FRAME_INFO_DEPTH];",
          "content_same": false
        },
        {
          "line": 612,
          "old_api": "vlc_GetCPUCount",
          "new_api": null,
          "old_text": "vlc_GetCPUCount()",
          "new_text": null,
          "old_line_content": "        i_thread_count = vlc_GetCPUCount();",
          "new_line_content": "    p_context->opaque = p_dec;",
          "content_same": false
        },
        {
          "line": 1127,
          "old_api": "avcodec_send_packet",
          "new_api": null,
          "old_text": "avcodec_send_packet( p_context, NULL )",
          "new_text": null,
          "old_line_content": "                 avcodec_send_packet( p_context, NULL );",
          "new_line_content": "            p_context->reordered_opaque++;",
          "content_same": false
        },
        {
          "line": 1641,
          "old_api": "lavc_GetVideoFormat",
          "new_api": null,
          "old_text": "lavc_GetVideoFormat(p_dec, &fmt, p_context, p_sys->pix_fmt, swfmt)",
          "new_text": null,
          "old_line_content": "     if (lavc_GetVideoFormat(p_dec, &fmt, p_context, p_sys->pix_fmt, swfmt) != 0)",
          "new_line_content": "        goto no_reuse;",
          "content_same": false
        },
        {
          "line": 1643,
          "old_api": "msg_Dbg",
          "new_api": null,
          "old_text": "msg_Dbg(p_dec, \"get format failed\")",
          "new_text": null,
          "old_line_content": "         msg_Dbg(p_dec, \"get format failed\");",
          "new_line_content": "    /* If the format did not actually change (e.g. seeking), try to reuse the",
          "content_same": false
        },
        {
          "line": 620,
          "old_api": "__MIN",
          "new_api": null,
          "old_text": "__MIN( i_thread_count, p_codec->id == AV_CODEC_ID_HEVC ? 10 : 6 )",
          "new_text": null,
          "old_line_content": "        i_thread_count = __MIN( i_thread_count, p_codec->id == AV_CODEC_ID_HEVC ? 10 : 6 );",
          "new_line_content": "            i_thread_count++;",
          "content_same": false
        },
        {
          "line": 1132,
          "old_api": "av_frame_alloc",
          "new_api": null,
          "old_text": "av_frame_alloc()",
          "new_text": null,
          "old_line_content": "        AVFrame *frame = av_frame_alloc();",
          "new_line_content": "            {",
          "content_same": false
        },
        {
          "line": 623,
          "old_api": "__MIN",
          "new_api": null,
          "old_text": "__MIN( i_thread_count, p_codec->id == AV_CODEC_ID_HEVC ? 32 : 16 )",
          "new_text": null,
          "old_line_content": "    i_thread_count = __MIN( i_thread_count, p_codec->id == AV_CODEC_ID_HEVC ? 32 : 16 );",
          "new_line_content": "#if VLC_WINSTORE_APP",
          "content_same": false
        },
        {
          "line": 1140,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(EAGAIN)",
          "new_text": null,
          "old_line_content": "        if( ret != 0 && ret != AVERROR(EAGAIN) )",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 1142,
          "old_api": "AVERROR",
          "new_api": null,
          "old_text": "AVERROR(EINVAL)",
          "new_text": null,
          "old_line_content": "            if (ret == AVERROR(ENOMEM) || ret == AVERROR(EINVAL))",
          "new_line_content": "            break;",
          "content_same": false
        },
        {
          "line": 1144,
          "old_api": "msg_Err",
          "new_api": null,
          "old_text": "msg_Err(p_dec, \"avcodec_receive_frame critical error\")",
          "new_text": null,
          "old_line_content": "                msg_Err(p_dec, \"avcodec_receive_frame critical error\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1147,
          "old_api": "av_frame_free",
          "new_api": null,
          "old_text": "av_frame_free(&frame)",
          "new_text": null,
          "old_line_content": "            av_frame_free(&frame);",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 1663,
          "old_api": "msg_Dbg",
          "new_api": null,
          "old_text": "msg_Dbg(p_dec, \"reusing decoder output format %d\", pi_fmt[i])",
          "new_text": null,
          "old_line_content": "            msg_Dbg(p_dec, \"reusing decoder output format %d\", pi_fmt[i]);",
          "new_line_content": "         goto no_reuse;",
          "content_same": false
        },
        {
          "line": 1670,
          "old_api": "msg_Err",
          "new_api": null,
          "old_text": "msg_Err(p_dec, \"existing hardware acceleration cannot be reused\")",
          "new_text": null,
          "old_line_content": "        msg_Err(p_dec, \"existing hardware acceleration cannot be reused\");",
          "new_line_content": "            return p_sys->pix_fmt;",
          "content_same": false
        },
        {
          "line": 1671,
          "old_api": "vlc_va_Delete",
          "new_api": null,
          "old_text": "vlc_va_Delete(p_sys->p_va, &p_context->hwaccel_context)",
          "new_text": null,
          "old_line_content": "        vlc_va_Delete(p_sys->p_va, &p_context->hwaccel_context);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 652,
          "old_api": "date_Init",
          "new_api": null,
          "old_text": "date_Init(&p_sys->pts, 1, 30001)",
          "new_text": null,
          "old_line_content": "    date_Init(&p_sys->pts, 1, 30001);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1165,
          "old_api": "av_frame_free",
          "new_api": null,
          "old_text": "av_frame_free(&frame)",
          "new_text": null,
          "old_line_content": "            av_frame_free(&frame);",
          "new_line_content": "            p_block->i_buffer -= i_used;",
          "content_same": false
        },
        {
          "line": 660,
          "old_api": "GetVlcChroma",
          "new_api": null,
          "old_text": "GetVlcChroma( &p_dec->fmt_out.video, p_context->pix_fmt )",
          "new_text": null,
          "old_line_content": "    if( GetVlcChroma( &p_dec->fmt_out.video, p_context->pix_fmt ) != VLC_SUCCESS )",
          "new_line_content": "    p_sys->i_late_frames = 0;",
          "content_same": false
        },
        {
          "line": 1685,
          "old_api": "msg_Warn",
          "new_api": null,
          "old_text": "msg_Warn(p_dec, \"thread type %d: disabling hardware acceleration\",\n                 p_context->active_thread_type)",
          "new_text": null,
          "old_line_content": "        msg_Warn(p_dec, \"thread type %d: disabling hardware acceleration\",",
          "new_line_content": "        return swfmt;",
          "content_same": false
        },
        {
          "line": 1182,
          "old_api": "date_Get",
          "new_api": null,
          "old_text": "date_Get( &p_sys->pts )",
          "new_text": null,
          "old_line_content": "            i_pts = date_Get( &p_sys->pts );",
          "new_line_content": "        int64_t av_pts = frame->pts == AV_NOPTS_VALUE ? frame->pkt_dts : frame->pts;",
          "content_same": false
        },
        {
          "line": 671,
          "old_api": "malloc",
          "new_api": null,
          "old_text": "malloc( sizeof(video_palette_t) )",
          "new_text": null,
          "old_line_content": "        p_dec->fmt_out.video.p_palette = malloc( sizeof(video_palette_t) );",
          "new_line_content": "    p_dec->fmt_out.i_codec = p_dec->fmt_out.video.i_chroma;",
          "content_same": false
        },
        {
          "line": 1184,
          "old_api": "FROM_AV_TS",
          "new_api": null,
          "old_text": "FROM_AV_TS(av_pts)",
          "new_text": null,
          "old_line_content": "            i_pts = FROM_AV_TS(av_pts);",
          "new_line_content": "        int64_t av_pts = frame->pkt_pts;",
          "content_same": false
        },
        {
          "line": 678,
          "old_api": "ffmpeg_InitCodec",
          "new_api": null,
          "old_text": "ffmpeg_InitCodec( p_dec )",
          "new_text": null,
          "old_line_content": "    ffmpeg_InitCodec( p_dec );",
          "new_line_content": "        if( p_dec->fmt_out.video.p_palette )",
          "content_same": false
        },
        {
          "line": 1192,
          "old_api": "vlc_tick_now",
          "new_api": null,
          "old_text": "vlc_tick_now()",
          "new_text": null,
          "old_line_content": "        update_late_frame_count( p_dec, p_block, vlc_tick_now(), i_pts,",
          "new_line_content": "        /* Interpolate the next PTS */",
          "content_same": false
        },
        {
          "line": 681,
          "old_api": "OpenVideoCodec",
          "new_api": null,
          "old_text": "OpenVideoCodec( p_dec )",
          "new_text": null,
          "old_line_content": "    if( OpenVideoCodec( p_dec ) < 0 )",
          "new_line_content": "        p_sys->palette_sent = true;",
          "content_same": false
        },
        {
          "line": 683,
          "old_api": "vlc_sem_destroy",
          "new_api": null,
          "old_text": "vlc_sem_destroy( &p_sys->sem_mt )",
          "new_text": null,
          "old_line_content": "        vlc_sem_destroy( &p_sys->sem_mt );",
          "new_line_content": "    /* ***** init this codec with special data ***** */",
          "content_same": false
        },
        {
          "line": 685,
          "old_api": "avcodec_free_context",
          "new_api": null,
          "old_text": "avcodec_free_context( &p_context )",
          "new_text": null,
          "old_line_content": "        avcodec_free_context( &p_context );",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1200,
          "old_api": "av_frame_free",
          "new_api": null,
          "old_text": "av_frame_free(&frame)",
          "new_text": null,
          "old_line_content": "            av_frame_free(&frame);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1714,
          "old_api": "vlc_va_GetChroma",
          "new_api": null,
          "old_text": "vlc_va_GetChroma(hwfmt, swfmt)",
          "new_text": null,
          "old_line_content": "        p_dec->fmt_out.video.i_chroma = vlc_va_GetChroma(hwfmt, swfmt);",
          "new_line_content": "            if( hwfmts[i] == pi_fmt[j] )",
          "content_same": false
        },
        {
          "line": 1719,
          "old_api": "msg_Err",
          "new_api": null,
          "old_text": "msg_Err(p_dec, \"unspecified video dimensions\")",
          "new_text": null,
          "old_line_content": "            msg_Err(p_dec, \"unspecified video dimensions\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1210,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert( p_dec->fmt_out.video.i_chroma != VLC_CODEC_RGBP )",
          "new_text": null,
          "old_line_content": "            assert( p_dec->fmt_out.video.i_chroma != VLC_CODEC_RGBP );",
          "new_line_content": "        if( p_context->pix_fmt == AV_PIX_FMT_PAL8",
          "content_same": false
        },
        {
          "line": 1722,
          "old_api": "av_pix_fmt_desc_get",
          "new_api": null,
          "old_text": "av_pix_fmt_desc_get(hwfmt)",
          "new_text": null,
          "old_line_content": "        const AVPixFmtDescriptor *dsc = av_pix_fmt_desc_get(hwfmt);",
          "new_line_content": "            continue; /* Unknown brand of hardware acceleration */",
          "content_same": false
        },
        {
          "line": 1723,
          "old_api": "msg_Dbg",
          "new_api": null,
          "old_text": "msg_Dbg(p_dec, \"trying format %s\", dsc ? dsc->name : \"unknown\")",
          "new_text": null,
          "old_line_content": "        msg_Dbg(p_dec, \"trying format %s\", dsc ? dsc->name : \"unknown\");",
          "new_line_content": "        if (p_context->width == 0 || p_context->height == 0)",
          "content_same": false
        },
        {
          "line": 1724,
          "old_api": "lavc_UpdateVideoFormat",
          "new_api": null,
          "old_text": "lavc_UpdateVideoFormat(p_dec, p_context, hwfmt, swfmt)",
          "new_text": null,
          "old_line_content": "        if (lavc_UpdateVideoFormat(p_dec, p_context, hwfmt, swfmt))",
          "new_line_content": "        {   /* should never happen */",
          "content_same": false
        },
        {
          "line": 1214,
          "old_api": "malloc",
          "new_api": null,
          "old_text": "malloc( sizeof(video_palette_t) )",
          "new_text": null,
          "old_line_content": "                      = malloc( sizeof(video_palette_t) );",
          "new_line_content": "             * fmt_out palette and change the fmt_out chroma to request a new",
          "content_same": false
        },
        {
          "line": 1726,
          "old_api": "post_mt",
          "new_api": null,
          "old_text": "post_mt(p_sys)",
          "new_text": null,
          "old_line_content": "        post_mt(p_sys);",
          "new_line_content": "            continue;",
          "content_same": false
        },
        {
          "line": 1218,
          "old_api": "av_frame_free",
          "new_api": null,
          "old_text": "av_frame_free(&frame)",
          "new_text": null,
          "old_line_content": "                av_frame_free(&frame);",
          "new_line_content": "            video_palette_t *p_palette;",
          "content_same": false
        },
        {
          "line": 708,
          "old_api": "date_Set",
          "new_api": null,
          "old_text": "date_Set(&p_sys->pts, VLC_TICK_INVALID)",
          "new_text": null,
          "old_line_content": "    date_Set(&p_sys->pts, VLC_TICK_INVALID); /* To make sure we recover properly */",
          "new_line_content": " *****************************************************************************/",
          "content_same": false
        },
        {
          "line": 711,
          "old_api": "cc_Flush",
          "new_api": null,
          "old_text": "cc_Flush( &p_sys->cc )",
          "new_text": null,
          "old_line_content": "    cc_Flush( &p_sys->cc );",
          "new_line_content": "    decoder_sys_t *p_sys = p_dec->p_sys;",
          "content_same": false
        },
        {
          "line": 1223,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert( frame->data[1] != NULL )",
          "new_text": null,
          "old_line_content": "            assert( frame->data[1] != NULL );",
          "new_line_content": "                b_error = true;",
          "content_same": false
        },
        {
          "line": 1737,
          "old_api": "wait_mt",
          "new_api": null,
          "old_text": "wait_mt(p_sys)",
          "new_text": null,
          "old_line_content": "            wait_mt(p_sys);",
          "new_line_content": "                                  &p_dec->fmt_in,",
          "content_same": false
        },
        {
          "line": 1227,
          "old_api": "decoder_UpdateVideoFormat",
          "new_api": null,
          "old_text": "decoder_UpdateVideoFormat( p_dec )",
          "new_text": null,
          "old_line_content": "            if( decoder_UpdateVideoFormat( p_dec ) )",
          "new_line_content": "            static_assert( sizeof(p_palette->palette) == AVPALETTE_SIZE,",
          "content_same": false
        },
        {
          "line": 716,
          "old_api": "decoder_AbortPictures",
          "new_api": null,
          "old_text": "decoder_AbortPictures( p_dec, true )",
          "new_text": null,
          "old_line_content": "    decoder_AbortPictures( p_dec, true );",
          "new_line_content": "    p_sys->framedrop = FRAMEDROP_NONE;",
          "content_same": false
        },
        {
          "line": 718,
          "old_api": "post_mt",
          "new_api": null,
          "old_text": "post_mt( p_sys )",
          "new_text": null,
          "old_line_content": "    post_mt( p_sys );",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 720,
          "old_api": "avcodec_is_open",
          "new_api": null,
          "old_text": "avcodec_is_open( p_context )",
          "new_text": null,
          "old_line_content": "    if( avcodec_is_open( p_context ) )",
          "new_line_content": "     * for a picture. This will avoid a deadlock between avcodec_flush_buffers",
          "content_same": false
        },
        {
          "line": 721,
          "old_api": "avcodec_flush_buffers",
          "new_api": null,
          "old_text": "avcodec_flush_buffers( p_context )",
          "new_text": null,
          "old_line_content": "        avcodec_flush_buffers( p_context );",
          "new_line_content": "     * and workers threads */",
          "content_same": false
        },
        {
          "line": 1747,
          "old_api": "post_mt",
          "new_api": null,
          "old_text": "post_mt(p_sys)",
          "new_text": null,
          "old_line_content": "    post_mt(p_sys);",
          "new_line_content": "        p_sys->p_va = va;",
          "content_same": false
        },
        {
          "line": 725,
          "old_api": "decoder_AbortPictures",
          "new_api": null,
          "old_text": "decoder_AbortPictures( p_dec, false )",
          "new_text": null,
          "old_line_content": "    decoder_AbortPictures( p_dec, false );",
          "new_line_content": "    /* do not flush buffers if codec hasn't been opened (theora/vorbis/VC1) */",
          "content_same": false
        },
        {
          "line": 1240,
          "old_api": "lavc_UpdateVideoFormat",
          "new_api": null,
          "old_text": "lavc_UpdateVideoFormat(p_dec, p_context, p_context->pix_fmt,\n                                       p_context->pix_fmt)",
          "new_text": null,
          "old_line_content": "             && lavc_UpdateVideoFormat(p_dec, p_context, p_context->pix_fmt,",
          "new_line_content": "        picture_t *p_pic = frame->opaque;",
          "content_same": false
        },
        {
          "line": 1242,
          "old_api": "decoder_NewPicture",
          "new_api": null,
          "old_text": "decoder_NewPicture(p_dec)",
          "new_text": null,
          "old_line_content": "                p_pic = decoder_NewPicture(p_dec);",
          "new_line_content": "        {   /* When direct rendering is not used, get_format() and get_buffer()",
          "content_same": false
        },
        {
          "line": 1251,
          "old_api": "lavc_CopyPicture",
          "new_api": null,
          "old_text": "lavc_CopyPicture( p_dec, p_pic, frame )",
          "new_text": null,
          "old_line_content": "            if( lavc_CopyPicture( p_dec, p_pic, frame ) != VLC_SUCCESS )",
          "new_line_content": "            {",
          "content_same": false
        },
        {
          "line": 1253,
          "old_api": "av_frame_free",
          "new_api": null,
          "old_text": "av_frame_free(&frame)",
          "new_text": null,
          "old_line_content": "                av_frame_free(&frame);",
          "new_line_content": "                break;",
          "content_same": false
        },
        {
          "line": 1254,
          "old_api": "picture_Release",
          "new_api": null,
          "old_text": "picture_Release( p_pic )",
          "new_text": null,
          "old_line_content": "                picture_Release( p_pic );",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1265,
          "old_api": "picture_Clone",
          "new_api": null,
          "old_text": "picture_Clone( p_pic )",
          "new_text": null,
          "old_line_content": "            p_pic = picture_Clone( p_pic );",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 1266,
          "old_api": "unlikely",
          "new_api": null,
          "old_text": "unlikely(p_pic == NULL)",
          "new_text": null,
          "old_line_content": "            if( unlikely(p_pic == NULL) )",
          "new_line_content": "            /* Some codecs can return the same frame multiple times. By the",
          "content_same": false
        },
        {
          "line": 1268,
          "old_api": "av_frame_free",
          "new_api": null,
          "old_text": "av_frame_free(&frame)",
          "new_text": null,
          "old_line_content": "                av_frame_free(&frame);",
          "new_line_content": "             * too late to clone the underlying picture. So clone proactively.",
          "content_same": false
        },
        {
          "line": 763,
          "old_api": "msg_Err",
          "new_api": null,
          "old_text": "msg_Err( p_dec, \"more than %\"PRId64\" frames of late video -> \"\n                            \"dropping frame (computer too slow ?)\",\n                     p_sys->p_context->reordered_opaque - p_sys->i_last_output_frame )",
          "new_text": null,
          "old_line_content": "            msg_Err( p_dec, \"more than %\"PRId64\" frames of late video -> \"",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 767,
          "old_api": "date_Set",
          "new_api": null,
          "old_text": "date_Set( &p_sys->pts, VLC_TICK_INVALID )",
          "new_text": null,
          "old_line_content": "            date_Set( &p_sys->pts, VLC_TICK_INVALID ); /* To make sure we recover properly */",
          "new_line_content": "        if( !(block->i_flags & BLOCK_FLAG_TYPE_I) )",
          "content_same": false
        },
        {
          "line": 768,
          "old_api": "block_Release",
          "new_api": null,
          "old_text": "block_Release( block )",
          "new_text": null,
          "old_line_content": "            block_Release( block );",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 783,
          "old_api": "date_Get",
          "new_api": null,
          "old_text": "date_Get( &p_sys->pts )",
          "new_text": null,
          "old_line_content": "        date_Get( &p_sys->pts ) == VLC_TICK_INVALID )",
          "new_line_content": "static vlc_tick_t interpolate_next_pts( decoder_t *p_dec, AVFrame *frame )",
          "content_same": false
        },
        {
          "line": 1295,
          "old_api": "DecodeSidedata",
          "new_api": null,
          "old_text": "DecodeSidedata(p_dec, frame, p_pic)",
          "new_text": null,
          "old_line_content": "        if (DecodeSidedata(p_dec, frame, p_pic))",
          "new_line_content": "        /* Hack to force display of still pictures */",
          "content_same": false
        },
        {
          "line": 1298,
          "old_api": "av_frame_free",
          "new_api": null,
          "old_text": "av_frame_free(&frame)",
          "new_text": null,
          "old_line_content": "        av_frame_free(&frame);",
          "new_line_content": "        p_pic->b_progressive = !frame->interlaced_frame;",
          "content_same": false
        },
        {
          "line": 791,
          "old_api": "date_Increment",
          "new_api": null,
          "old_text": "date_Increment( &p_sys->pts, i_tick + frame->repeat_pict )",
          "new_text": null,
          "old_line_content": "    return date_Increment( &p_sys->pts, i_tick + frame->repeat_pict );",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1306,
          "old_api": "decoder_QueueVideo",
          "new_api": null,
          "old_text": "decoder_QueueVideo( p_dec, p_pic )",
          "new_text": null,
          "old_line_content": "            decoder_QueueVideo( p_dec, p_pic );",
          "new_line_content": "        /* Send decoded frame to vout */",
          "content_same": false
        },
        {
          "line": 1309,
          "old_api": "picture_Release",
          "new_api": null,
          "old_text": "picture_Release( p_pic )",
          "new_text": null,
          "old_line_content": "            picture_Release( p_pic );",
          "new_line_content": "            if(p_frame_info->b_eos)",
          "content_same": false
        },
        {
          "line": 802,
          "old_api": "decoder_GetDisplayDate",
          "new_api": null,
          "old_text": "decoder_GetDisplayDate( p_dec, i_pts )",
          "new_text": null,
          "old_line_content": "       i_display_date = decoder_GetDisplayDate( p_dec, i_pts );",
          "new_line_content": "                                     vlc_tick_t i_next_pts, int64_t i_fnum )",
          "content_same": false
        },
        {
          "line": 805,
          "old_api": "VLC_TICK_FROM_MS",
          "new_api": null,
          "old_text": "VLC_TICK_FROM_MS(20)",
          "new_text": null,
          "old_line_content": "                          ? (i_next_pts - i_pts) / 2 : VLC_TICK_FROM_MS(20);",
          "new_line_content": "   /* Update frame late count (except when doing preroll) */",
          "content_same": false
        },
        {
          "line": 1318,
          "old_api": "block_Release",
          "new_api": null,
          "old_text": "block_Release( p_block )",
          "new_text": null,
          "old_line_content": "        block_Release( p_block );",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1333,
          "old_api": "DecodeBlock",
          "new_api": null,
          "old_text": "DecodeBlock( p_dec, NULL )",
          "new_text": null,
          "old_line_content": "            DecodeBlock( p_dec, NULL );",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1338,
          "old_api": "date_Set",
          "new_api": null,
          "old_text": "date_Set( &p_sys->pts, VLC_TICK_INVALID )",
          "new_text": null,
          "old_line_content": "        date_Set( &p_sys->pts, VLC_TICK_INVALID ); /* To make sure we recover properly */",
          "new_line_content": "        if( p_block->i_flags & BLOCK_FLAG_DISCONTINUITY )",
          "content_same": false
        },
        {
          "line": 1343,
          "old_api": "block_Release",
          "new_api": null,
          "old_text": "block_Release( p_block )",
          "new_text": null,
          "old_line_content": "            block_Release( p_block );",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1348,
          "old_api": "DecodeBlock",
          "new_api": null,
          "old_text": "DecodeBlock( p_dec, pp_block )",
          "new_text": null,
          "old_line_content": "    return DecodeBlock( p_dec, pp_block );",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 839,
          "old_api": "av_frame_get_side_data",
          "new_api": null,
          "old_text": "av_frame_get_side_data( frame,\n                                    AV_FRAME_DATA_MASTERING_DISPLAY_METADATA )",
          "new_text": null,
          "old_line_content": "            av_frame_get_side_data( frame,",
          "new_line_content": "    bool format_changed = false;",
          "content_same": false
        },
        {
          "line": 849,
          "old_api": "FROM_AVRAT",
          "new_api": null,
          "old_text": "FROM_AVRAT(ST2086_LUMA_FACTOR, hdr_meta->max_luminance)",
          "new_text": null,
          "old_line_content": "                    FROM_AVRAT(ST2086_LUMA_FACTOR, hdr_meta->max_luminance);",
          "new_line_content": "        const AVMasteringDisplayMetadata *hdr_meta =",
          "content_same": false
        },
        {
          "line": 851,
          "old_api": "FROM_AVRAT",
          "new_api": null,
          "old_text": "FROM_AVRAT(ST2086_LUMA_FACTOR, hdr_meta->min_luminance)",
          "new_text": null,
          "old_line_content": "                    FROM_AVRAT(ST2086_LUMA_FACTOR, hdr_meta->min_luminance);",
          "new_line_content": "        if ( hdr_meta->has_luminance )",
          "content_same": false
        },
        {
          "line": 1364,
          "old_api": "post_mt",
          "new_api": null,
          "old_text": "post_mt( p_sys )",
          "new_text": null,
          "old_line_content": "    post_mt( p_sys );",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1367,
          "old_api": "avcodec_is_open",
          "new_api": null,
          "old_text": "avcodec_is_open( ctx )",
          "new_text": null,
          "old_line_content": "    if( avcodec_is_open( ctx ) )",
          "new_line_content": "    AVCodecContext *ctx = p_sys->p_context;",
          "content_same": false
        },
        {
          "line": 1368,
          "old_api": "avcodec_flush_buffers",
          "new_api": null,
          "old_text": "avcodec_flush_buffers( ctx )",
          "new_text": null,
          "old_line_content": "        avcodec_flush_buffers( ctx );",
          "new_line_content": "    void *hwaccel_context;",
          "content_same": false
        },
        {
          "line": 1372,
          "old_api": "cc_Flush",
          "new_api": null,
          "old_text": "cc_Flush( &p_sys->cc )",
          "new_text": null,
          "old_line_content": "    cc_Flush( &p_sys->cc );",
          "new_line_content": "    /* do not flush buffers if codec hasn't been opened (theora/vorbis/VC1) */",
          "content_same": false
        },
        {
          "line": 863,
          "old_api": "FROM_AVRAT",
          "new_api": null,
          "old_text": "FROM_AVRAT(ST2086_PRIM_FACTOR, hdr_meta->display_primaries[LAV_RED][0])",
          "new_text": null,
          "old_line_content": "                    FROM_AVRAT(ST2086_PRIM_FACTOR, hdr_meta->display_primaries[LAV_RED][0]);",
          "new_line_content": "#define ST2086_BLUE  1",
          "content_same": false
        },
        {
          "line": 1375,
          "old_api": "avcodec_free_context",
          "new_api": null,
          "old_text": "avcodec_free_context( &ctx )",
          "new_text": null,
          "old_line_content": "    avcodec_free_context( &ctx );",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 865,
          "old_api": "FROM_AVRAT",
          "new_api": null,
          "old_text": "FROM_AVRAT(ST2086_PRIM_FACTOR, hdr_meta->display_primaries[LAV_RED][1])",
          "new_text": null,
          "old_line_content": "                    FROM_AVRAT(ST2086_PRIM_FACTOR, hdr_meta->display_primaries[LAV_RED][1]);",
          "new_line_content": "#define LAV_GREEN  1",
          "content_same": false
        },
        {
          "line": 867,
          "old_api": "FROM_AVRAT",
          "new_api": null,
          "old_text": "FROM_AVRAT(ST2086_PRIM_FACTOR, hdr_meta->display_primaries[LAV_GREEN][0])",
          "new_text": null,
          "old_line_content": "                    FROM_AVRAT(ST2086_PRIM_FACTOR, hdr_meta->display_primaries[LAV_GREEN][0]);",
          "new_line_content": "#define ST2086_PRIM_FACTOR 50000",
          "content_same": false
        },
        {
          "line": 1380,
          "old_api": "vlc_sem_destroy",
          "new_api": null,
          "old_text": "vlc_sem_destroy( &p_sys->sem_mt )",
          "new_text": null,
          "old_line_content": "    vlc_sem_destroy( &p_sys->sem_mt );",
          "new_line_content": "    hwaccel_context = ctx->hwaccel_context;",
          "content_same": false
        },
        {
          "line": 880,
          "old_api": "memcmp",
          "new_api": null,
          "old_text": "memcmp( &p_dec->fmt_out.video.mastering,\n                     &p_pic->format.mastering,\n                     sizeof(p_pic->format.mastering) )",
          "new_text": null,
          "old_line_content": "        if ( memcmp( &p_dec->fmt_out.video.mastering,",
          "new_line_content": "            p_pic->format.mastering.white_point[0] =",
          "content_same": false
        },
        {
          "line": 1400,
          "old_api": "av_malloc",
          "new_api": null,
          "old_text": "av_malloc( p_sys->p_context->extradata_size +\n                       FF_INPUT_BUFFER_PADDING_SIZE )",
          "new_text": null,
          "old_line_content": "            av_malloc( p_sys->p_context->extradata_size +",
          "new_line_content": "    if( p_sys->p_codec->id == AV_CODEC_ID_SVQ3 )",
          "content_same": false
        },
        {
          "line": 892,
          "old_api": "av_frame_get_side_data",
          "new_api": null,
          "old_text": "av_frame_get_side_data( frame,\n                                    AV_FRAME_DATA_CONTENT_LIGHT_LEVEL )",
          "new_text": null,
          "old_line_content": "            av_frame_get_side_data( frame,",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1405,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy( &p[0],  \"SVQ3\", 4 )",
          "new_text": null,
          "old_line_content": "        memcpy( &p[0],  \"SVQ3\", 4 );",
          "new_line_content": "        p = p_sys->p_context->extradata =",
          "content_same": false
        },
        {
          "line": 1407,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy( &p[12], p_dec->fmt_in.p_extra, i_size )",
          "new_text": null,
          "old_line_content": "        memcpy( &p[12], p_dec->fmt_in.p_extra, i_size );",
          "new_line_content": "                       FF_INPUT_BUFFER_PADDING_SIZE );",
          "content_same": false
        },
        {
          "line": 900,
          "old_api": "memcmp",
          "new_api": null,
          "old_text": "memcmp( &p_dec->fmt_out.video.lighting,\n                     &p_pic->format.lighting,\n                     sizeof(p_pic->format.lighting) )",
          "new_text": null,
          "old_line_content": "        if ( memcmp( &p_dec->fmt_out.video.lighting,",
          "new_line_content": "    if ( metadata_lt )",
          "content_same": false
        },
        {
          "line": 911,
          "old_api": "av_frame_get_side_data",
          "new_api": null,
          "old_text": "av_frame_get_side_data( frame,\n                                    AV_FRAME_DATA_STEREO3D )",
          "new_text": null,
          "old_line_content": "            av_frame_get_side_data( frame,",
          "new_line_content": "            format_changed = true;",
          "content_same": false
        },
        {
          "line": 1425,
          "old_api": "memmove",
          "new_api": null,
          "old_text": "memmove( &p[0x52], psz,\n                             &p[p_sys->p_context->extradata_size] - psz )",
          "new_text": null,
          "old_line_content": "                    memmove( &p[0x52], psz,",
          "new_line_content": "                {",
          "content_same": false
        },
        {
          "line": 1438,
          "old_api": "av_malloc",
          "new_api": null,
          "old_text": "av_malloc( i_size + FF_INPUT_BUFFER_PADDING_SIZE )",
          "new_text": null,
          "old_line_content": "            av_malloc( i_size + FF_INPUT_BUFFER_PADDING_SIZE );",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1441,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy( p_sys->p_context->extradata,\n                    p_dec->fmt_in.p_extra, i_size )",
          "new_text": null,
          "old_line_content": "            memcpy( p_sys->p_context->extradata,",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 1443,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset( p_sys->p_context->extradata + i_size,\n                    0, FF_INPUT_BUFFER_PADDING_SIZE )",
          "new_text": null,
          "old_line_content": "            memset( p_sys->p_context->extradata + i_size,",
          "new_line_content": "        p_sys->p_context->extradata =",
          "content_same": false
        },
        {
          "line": 1454,
          "old_api": "picture_Release",
          "new_api": null,
          "old_text": "picture_Release(picture)",
          "new_text": null,
          "old_line_content": "    picture_Release(picture);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1463,
          "old_api": "decoder_NewPicture",
          "new_api": null,
          "old_text": "decoder_NewPicture(dec)",
          "new_text": null,
          "old_line_content": "    picture_t *pic = decoder_NewPicture(dec);",
          "new_line_content": "static int lavc_va_GetFrame(struct AVCodecContext *ctx, AVFrame *frame)",
          "content_same": false
        },
        {
          "line": 1467,
          "old_api": "vlc_va_Get",
          "new_api": null,
          "old_text": "vlc_va_Get(va, pic, &frame->data[0])",
          "new_text": null,
          "old_line_content": "    if (vlc_va_Get(va, pic, &frame->data[0]))",
          "new_line_content": "    vlc_va_t *va = p_sys->p_va;",
          "content_same": false
        },
        {
          "line": 958,
          "old_api": "decoder_UpdateVideoFormat",
          "new_api": null,
          "old_text": "decoder_UpdateVideoFormat( p_dec )",
          "new_text": null,
          "old_line_content": "    if (format_changed && decoder_UpdateVideoFormat( p_dec ))",
          "new_line_content": "            format_changed = true;",
          "content_same": false
        },
        {
          "line": 1470,
          "old_api": "picture_Release",
          "new_api": null,
          "old_text": "picture_Release(pic)",
          "new_text": null,
          "old_line_content": "        picture_Release(pic);",
          "new_line_content": "    if (pic == NULL)",
          "content_same": false
        },
        {
          "line": 961,
          "old_api": "av_frame_get_side_data",
          "new_api": null,
          "old_text": "av_frame_get_side_data( frame, AV_FRAME_DATA_A53_CC )",
          "new_text": null,
          "old_line_content": "    const AVFrameSideData *p_avcc = av_frame_get_side_data( frame, AV_FRAME_DATA_A53_CC );",
          "new_line_content": "    else",
          "content_same": false
        },
        {
          "line": 1478,
          "old_api": "av_buffer_create",
          "new_api": null,
          "old_text": "av_buffer_create(frame->data[0], 0, lavc_ReleaseFrame, pic, 0)",
          "new_text": null,
          "old_line_content": "    frame->buf[0] = av_buffer_create(frame->data[0], 0, lavc_ReleaseFrame, pic, 0);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1481,
          "old_api": "lavc_ReleaseFrame",
          "new_api": null,
          "old_text": "lavc_ReleaseFrame(pic, frame->data[0])",
          "new_text": null,
          "old_line_content": "        lavc_ReleaseFrame(pic, frame->data[0]);",
          "new_line_content": "     * data[3] actually contains the format-specific surface handle. */",
          "content_same": false
        },
        {
          "line": 979,
          "old_api": "decoder_QueueCc",
          "new_api": null,
          "old_text": "decoder_QueueCc( p_dec, p_cc, &desc )",
          "new_text": null,
          "old_line_content": "                decoder_QueueCc( p_dec, p_cc, &desc );",
          "new_line_content": "                else",
          "content_same": false
        },
        {
          "line": 981,
          "old_api": "cc_Flush",
          "new_api": null,
          "old_text": "cc_Flush( &p_sys->cc )",
          "new_text": null,
          "old_line_content": "            cc_Flush( &p_sys->cc );",
          "new_line_content": "                decoder_cc_desc_t desc;",
          "content_same": false
        },
        {
          "line": 1497,
          "old_api": "decoder_NewPicture",
          "new_api": null,
          "old_text": "decoder_NewPicture(dec)",
          "new_text": null,
          "old_line_content": "    picture_t *pic = decoder_NewPicture(dec);",
          "new_line_content": "    decoder_t *dec = ctx->opaque;",
          "content_same": false
        },
        {
          "line": 1505,
          "old_api": "avcodec_align_dimensions2",
          "new_api": null,
          "old_text": "avcodec_align_dimensions2(ctx, &width, &height, aligns)",
          "new_text": null,
          "old_line_content": "    avcodec_align_dimensions2(ctx, &width, &height, aligns);",
          "new_line_content": "        return -1;",
          "content_same": false
        },
        {
          "line": 483,
          "old_api": "ffmpeg_OpenCodec",
          "new_api": null,
          "old_text": "ffmpeg_OpenCodec( p_dec, ctx, codec )",
          "new_text": null,
          "old_line_content": "    ret = ffmpeg_OpenCodec( p_dec, ctx, codec );",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 484,
          "old_api": "wait_mt",
          "new_api": null,
          "old_text": "wait_mt( p_sys )",
          "new_text": null,
          "old_line_content": "    wait_mt( p_sys );",
          "new_line_content": "        ctx->flags |= AV_CODEC_FLAG_LOW_DELAY;",
          "content_same": false
        },
        {
          "line": 1508,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(pic->p[0].i_pitch >= width * pic->p[0].i_pixel_pitch)",
          "new_text": null,
          "old_line_content": "    assert(pic->p[0].i_pitch >= width * pic->p[0].i_pixel_pitch);",
          "new_line_content": "    int height = frame->height;",
          "content_same": false
        },
        {
          "line": 1509,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(pic->p[0].i_lines >= height)",
          "new_text": null,
          "old_line_content": "    assert(pic->p[0].i_lines >= height);",
          "new_line_content": "    int aligns[AV_NUM_DATA_POINTERS];",
          "content_same": false
        },
        {
          "line": 491,
          "old_api": "msg_Dbg",
          "new_api": null,
          "old_text": "msg_Dbg( p_dec, \"using frame thread mode with %d threads\",\n                     ctx->thread_count )",
          "new_text": null,
          "old_line_content": "            msg_Dbg( p_dec, \"using frame thread mode with %d threads\",",
          "new_line_content": "    if( ret < 0 )",
          "content_same": false
        },
        {
          "line": 1004,
          "old_api": "ffmpeg_InitCodec",
          "new_api": null,
          "old_text": "ffmpeg_InitCodec( p_dec )",
          "new_text": null,
          "old_line_content": "        ffmpeg_InitCodec( p_dec );",
          "new_line_content": "    bool b_error = false;",
          "content_same": false
        },
        {
          "line": 1005,
          "old_api": "avcodec_is_open",
          "new_api": null,
          "old_text": "avcodec_is_open( p_context )",
          "new_text": null,
          "old_line_content": "        if( !avcodec_is_open( p_context ) )",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1006,
          "old_api": "OpenVideoCodec",
          "new_api": null,
          "old_text": "OpenVideoCodec( p_dec )",
          "new_text": null,
          "old_line_content": "            OpenVideoCodec( p_dec );",
          "new_line_content": "    block_t *p_block;",
          "content_same": false
        },
        {
          "line": 495,
          "old_api": "msg_Dbg",
          "new_api": null,
          "old_text": "msg_Dbg( p_dec, \"using slice thread mode with %d threads\",\n                     ctx->thread_count )",
          "new_text": null,
          "old_line_content": "            msg_Dbg( p_dec, \"using slice thread mode with %d threads\",",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 1516,
          "old_api": "msg_Warn",
          "new_api": null,
          "old_text": "msg_Warn(dec, \"plane %d: pitch not aligned (%d%%%d): disabling direct rendering\",\n                         i, pic->p[i].i_pitch, aligns[i])",
          "new_text": null,
          "old_line_content": "                msg_Warn(dec, \"plane %d: pitch not aligned (%d%%%d): disabling direct rendering\",",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1523,
          "old_api": "msg_Warn",
          "new_api": null,
          "old_text": "msg_Warn(dec, \"plane %d not aligned: disabling direct rendering\", i)",
          "new_text": null,
          "old_line_content": "                msg_Warn(dec, \"plane %d not aligned: disabling direct rendering\", i);",
          "new_line_content": "                         i, pic->p[i].i_pitch, aligns[i]);",
          "content_same": false
        },
        {
          "line": 500,
          "old_api": "msg_Warn",
          "new_api": null,
          "old_text": "msg_Warn( p_dec, \"failed to enable threaded decoding\" )",
          "new_text": null,
          "old_line_content": "                msg_Warn( p_dec, \"failed to enable threaded decoding\" );",
          "new_line_content": "        case FF_THREAD_SLICE:",
          "content_same": false
        },
        {
          "line": 1013,
          "old_api": "avcodec_is_open",
          "new_api": null,
          "old_text": "avcodec_is_open( p_context )",
          "new_text": null,
          "old_line_content": "    if( !avcodec_is_open( p_context ) )",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 503,
          "old_api": "msg_Warn",
          "new_api": null,
          "old_text": "msg_Warn( p_dec, \"using unknown thread mode with %d threads\",\n                      ctx->thread_count )",
          "new_text": null,
          "old_line_content": "            msg_Warn( p_dec, \"using unknown thread mode with %d threads\",",
          "new_line_content": "            break;",
          "content_same": false
        },
        {
          "line": 1016,
          "old_api": "block_Release",
          "new_api": null,
          "old_text": "block_Release( p_block )",
          "new_text": null,
          "old_line_content": "            block_Release( p_block );",
          "new_line_content": "    if(!p_block && !(p_sys->p_codec->capabilities & AV_CODEC_CAP_DELAY) )",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 45,
      "total_additions": 167,
      "total_deletions": 166,
      "total_api_changes": 378
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 6,
        "api_related_lines": 378,
        "non_api_lines": 3,
        "non_api_line_numbers": [
          485,
          486,
          487
        ]
      }
    },
    "api_calls_before": 250,
    "api_calls_after": 251,
    "diff_info": {
      "added_lines": 6,
      "removed_lines": 0,
      "total_diff_lines": 18
    }
  }
}
{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/vlc/modified_file/4e3c5758fdd0f14e97143b36b2c68a12b95dc1b1",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/vlc/modified_file/4e3c5758fdd0f14e97143b36b2c68a12b95dc1b1/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/vlc/modified_file/4e3c5758fdd0f14e97143b36b2c68a12b95dc1b1/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/vlc/modified_file/4e3c5758fdd0f14e97143b36b2c68a12b95dc1b1/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 235,
          "old_api": "_",
          "new_api": "var_AddCallback",
          "old_text": "_(\"Wallpaper\")",
          "new_text": "var_AddCallback(vd, \"video-wallpaper\", WallpaperCallback, NULL)",
          "old_line_content": "    var_Change(vd, \"video-wallpaper\", VLC_VAR_SETTEXT, _(\"Wallpaper\"));",
          "new_line_content": "    var_AddCallback(vd, \"video-wallpaper\", WallpaperCallback, NULL);",
          "content_same": false
        },
        {
          "line": 250,
          "old_api": "DirectXClose",
          "new_api": "FreeLibrary",
          "old_text": "DirectXClose(vd)",
          "new_text": "FreeLibrary(sys->hddraw_dll)",
          "old_line_content": "    DirectXClose(vd);",
          "new_line_content": "        FreeLibrary(sys->hddraw_dll);",
          "content_same": false
        },
        {
          "line": 251,
          "old_api": "CommonClean",
          "new_api": "free",
          "old_text": "CommonClean(vd)",
          "new_text": "free(sys)",
          "old_line_content": "    CommonClean(vd);",
          "new_line_content": "    free(sys);",
          "content_same": false
        },
        {
          "line": 265,
          "old_api": "vlc_mutex_destroy",
          "new_api": "WallpaperChange",
          "old_text": "vlc_mutex_destroy(&sys->lock)",
          "new_text": "WallpaperChange(vd, false)",
          "old_line_content": "    vlc_mutex_destroy(&sys->lock);",
          "new_line_content": "    WallpaperChange(vd, false);",
          "content_same": false
        },
        {
          "line": 272,
          "old_api": "CommonClean",
          "new_api": "FreeLibrary",
          "old_text": "CommonClean(vd)",
          "new_text": "FreeLibrary(sys->hddraw_dll)",
          "old_line_content": "    CommonClean(vd);",
          "new_line_content": "        FreeLibrary(sys->hddraw_dll);",
          "content_same": false
        },
        {
          "line": 293,
          "old_api": "IDirectDrawSurface2_IsLost",
          "new_api": "DirectXUpdateOverlay",
          "old_text": "IDirectDrawSurface2_IsLost(sys->display)",
          "new_text": "DirectXUpdateOverlay(vd, NULL)",
          "old_line_content": "    if (IDirectDrawSurface2_IsLost(sys->display) == DDERR_SURFACELOST) {",
          "new_line_content": "                DirectXUpdateOverlay(vd, NULL);",
          "content_same": false
        },
        {
          "line": 300,
          "old_api": "DirectXUpdateOverlay",
          "new_api": "DirectXUnlock",
          "old_text": "DirectXUpdateOverlay(vd, NULL)",
          "new_text": "DirectXUnlock(picture)",
          "old_line_content": "        DirectXUpdateOverlay(vd, NULL);",
          "new_line_content": "    DirectXUnlock(picture);",
          "content_same": false
        },
        {
          "line": 308,
          "old_api": "IDirectDrawSurface2_Flip",
          "new_api": "msg_Warn",
          "old_text": "IDirectDrawSurface2_Flip(p_sys->front_surface,\n                                                  NULL, DDFLIP_WAIT)",
          "new_text": "msg_Warn(vd, \"could not flip overlay (error %li)\", hr)",
          "old_line_content": "            HRESULT hr = IDirectDrawSurface2_Flip(p_sys->front_surface,",
          "new_line_content": "                msg_Warn(vd, \"could not flip overlay (error %li)\", hr);",
          "content_same": false
        },
        {
          "line": 328,
          "old_api": "DirectXLock",
          "new_api": "IDirectDraw_WaitForVerticalBlank",
          "old_text": "DirectXLock(picture)",
          "new_text": "IDirectDraw_WaitForVerticalBlank(sys->ddobject,\n                                         DDWAITVB_BLOCKBEGIN, NULL)",
          "old_line_content": "    DirectXLock(picture);",
          "new_line_content": "        IDirectDraw_WaitForVerticalBlank(sys->ddobject,",
          "content_same": false
        },
        {
          "line": 331,
          "old_api": "IDirectDraw_WaitForVerticalBlank",
          "new_api": "CreateSolidBrush",
          "old_text": "IDirectDraw_WaitForVerticalBlank(sys->ddobject,\n                                         DDWAITVB_BLOCKBEGIN, NULL)",
          "new_text": "CreateSolidBrush(sys->i_rgb_colorkey)",
          "old_line_content": "        IDirectDraw_WaitForVerticalBlank(sys->ddobject,",
          "new_line_content": "            HBRUSH brush = CreateSolidBrush(sys->i_rgb_colorkey);",
          "content_same": false
        },
        {
          "line": 336,
          "old_api": "SetClassLongPtr",
          "new_api": "CommonDisplay",
          "old_text": "SetClassLongPtr(sys->sys.hvideownd, GCLP_HBRBACKGROUND, (LONG_PTR)brush)",
          "new_text": "CommonDisplay(vd)",
          "old_line_content": "            SetClassLongPtr(sys->sys.hvideownd, GCLP_HBRBACKGROUND, (LONG_PTR)brush);",
          "new_line_content": "    CommonDisplay(vd);",
          "content_same": false
        },
        {
          "line": 363,
          "old_api": "WallpaperChange",
          "new_api": "DirectXOpen",
          "old_text": "WallpaperChange(vd, false)",
          "new_text": "DirectXOpen(vd, fmt)",
          "old_line_content": "            WallpaperChange(vd, false);",
          "new_line_content": "        return DirectXOpen(vd, fmt);",
          "content_same": false
        },
        {
          "line": 366,
          "old_api": "DirectXOpen",
          "new_api": "CommonControl",
          "old_text": "DirectXOpen(vd, fmt)",
          "new_text": "CommonControl(vd, query, args)",
          "old_line_content": "        return DirectXOpen(vd, fmt);",
          "new_line_content": "        return CommonControl(vd, query, args);",
          "content_same": false
        },
        {
          "line": 381,
          "old_api": "DirectXUpdateOverlay",
          "new_api": "MonitorFromWindow",
          "old_text": "DirectXUpdateOverlay(vd, NULL)",
          "new_text": "MonitorFromWindow(sys->sys.hwnd, MONITOR_DEFAULTTONEAREST)",
          "old_line_content": "            DirectXUpdateOverlay(vd, NULL);",
          "new_line_content": "        HMONITOR hmon = MonitorFromWindow(sys->sys.hwnd, MONITOR_DEFAULTTONEAREST);",
          "content_same": false
        },
        {
          "line": 397,
          "old_api": "vlc_mutex_unlock",
          "new_api": "WallpaperChange",
          "old_text": "vlc_mutex_unlock(&sys->lock)",
          "new_text": "WallpaperChange(vd, wallpaper_requested)",
          "old_line_content": "    vlc_mutex_unlock(&sys->lock);",
          "new_line_content": "        WallpaperChange(vd, wallpaper_requested);",
          "content_same": false
        },
        {
          "line": 423,
          "old_api": "assert",
          "new_api": "DirectXOpenDDraw",
          "old_text": "assert(!sys->clipper)",
          "new_text": "DirectXOpenDDraw(vd)",
          "old_line_content": "    assert(!sys->clipper);",
          "new_line_content": "    if (DirectXOpenDDraw(vd)) {",
          "content_same": false
        },
        {
          "line": 433,
          "old_api": "msg_Err",
          "new_api": "UpdateRects",
          "old_text": "msg_Err(vd, \"cannot initialize DirectX DirectDraw\")",
          "new_text": "UpdateRects(vd, true)",
          "old_line_content": "        msg_Err(vd, \"cannot initialize DirectX DirectDraw\");",
          "new_line_content": "    UpdateRects(vd, true);",
          "content_same": false
        },
        {
          "line": 436,
          "old_api": "UpdateRects",
          "new_api": "DirectXCreatePool",
          "old_text": "UpdateRects(vd, true)",
          "new_text": "DirectXCreatePool(vd, &sys->sys.use_overlay, fmt)",
          "old_line_content": "    UpdateRects(vd, true);",
          "new_line_content": "    if (DirectXCreatePool(vd, &sys->sys.use_overlay, fmt)) {",
          "content_same": false
        },
        {
          "line": 446,
          "old_api": "DirectXUpdateOverlay",
          "new_api": "EventThreadUseOverlay",
          "old_text": "DirectXUpdateOverlay(vd, NULL)",
          "new_text": "EventThreadUseOverlay(sys->sys.event, sys->sys.use_overlay)",
          "old_line_content": "        DirectXUpdateOverlay(vd, NULL);",
          "new_line_content": "        EventThreadUseOverlay(sys->sys.event, sys->sys.use_overlay);",
          "content_same": false
        },
        {
          "line": 492,
          "old_api": "var_GetString",
          "new_api": "strcmp",
          "old_text": "var_GetString(vd, \"directx-device\")",
          "new_text": "strcmp(psz_drivername, device)",
          "old_line_content": "    char *device = var_GetString(vd, \"directx-device\");",
          "new_line_content": "    if (device && *device && !strcmp(psz_drivername, device)) {",
          "content_same": false
        },
        {
          "line": 504,
          "old_api": "IntersectRect",
          "new_api": "msg_Dbg",
          "old_text": "IntersectRect(&rect, &rect, &monitor_info.rcWork)",
          "new_text": "msg_Dbg(vd, \"DirectXEnumCallback: setting window \"\n                            \"position to %ld,%ld\", rect.left, rect.top)",
          "old_line_content": "            if (!IntersectRect(&rect, &rect, &monitor_info.rcWork)) {",
          "new_line_content": "                msg_Dbg(vd, \"DirectXEnumCallback: setting window \"",
          "content_same": false
        },
        {
          "line": 516,
          "old_api": "free",
          "new_api": "msg_Dbg",
          "old_text": "free(device)",
          "new_text": "msg_Dbg(vd, \"selecting %s, %s\", psz_desc, psz_drivername)",
          "old_line_content": "    free(device);",
          "new_line_content": "        msg_Dbg(vd, \"selecting %s, %s\", psz_desc, psz_drivername);",
          "content_same": false
        },
        {
          "line": 519,
          "old_api": "msg_Dbg",
          "new_api": "malloc",
          "old_text": "msg_Dbg(vd, \"selecting %s, %s\", psz_desc, psz_drivername)",
          "new_text": "malloc(sizeof(*guid))",
          "old_line_content": "        msg_Dbg(vd, \"selecting %s, %s\", psz_desc, psz_drivername);",
          "new_line_content": "        sys->display_driver = malloc(sizeof(*guid));",
          "content_same": false
        },
        {
          "line": 617,
          "old_api": "GetProcAddress",
          "new_api": "var_GetString",
          "old_text": "GetProcAddress(sys->hddraw_dll, DIRECTDRAWENUMERATEEX_NAME)",
          "new_text": "var_GetString(vd, \"directx-device\")",
          "old_line_content": "      (void *)GetProcAddress(sys->hddraw_dll, DIRECTDRAWENUMERATEEX_NAME);",
          "new_line_content": "        char *device = var_GetString(vd, \"directx-device\");",
          "content_same": false
        },
        {
          "line": 620,
          "old_api": "var_GetString",
          "new_api": "free",
          "old_text": "var_GetString(vd, \"directx-device\")",
          "new_text": "free(device)",
          "old_line_content": "        char *device = var_GetString(vd, \"directx-device\");",
          "new_line_content": "            free(device);",
          "content_same": false
        },
        {
          "line": 623,
          "old_api": "free",
          "new_api": "MonitorFromWindow",
          "old_text": "free(device)",
          "new_text": "MonitorFromWindow(sys->sys.hwnd, MONITOR_DEFAULTTONEAREST)",
          "old_line_content": "            free(device);",
          "new_line_content": "        sys->hmonitor = MonitorFromWindow(sys->sys.hwnd, MONITOR_DEFAULTTONEAREST);",
          "content_same": false
        },
        {
          "line": 626,
          "old_api": "MonitorFromWindow",
          "new_api": "OurDirectDrawEnumerateEx",
          "old_text": "MonitorFromWindow(sys->sys.hwnd, MONITOR_DEFAULTTONEAREST)",
          "new_text": "OurDirectDrawEnumerateEx(DirectXOpenDDrawCallback,\n                                 vd, DDENUM_ATTACHEDSECONDARYDEVICES)",
          "old_line_content": "        sys->hmonitor = MonitorFromWindow(sys->sys.hwnd, MONITOR_DEFAULTTONEAREST);",
          "new_line_content": "        OurDirectDrawEnumerateEx(DirectXOpenDDrawCallback,",
          "content_same": false
        },
        {
          "line": 643,
          "old_api": "IDirectDraw_QueryInterface",
          "new_api": "IDirectDraw_Release",
          "old_text": "IDirectDraw_QueryInterface(ddobject, &IID_IDirectDraw2,\n                                    &ptr)",
          "new_text": "IDirectDraw_Release(ddobject)",
          "old_line_content": "    hr = IDirectDraw_QueryInterface(ddobject, &IID_IDirectDraw2,",
          "new_line_content": "    IDirectDraw_Release(ddobject);",
          "content_same": false
        },
        {
          "line": 646,
          "old_api": "IDirectDraw_Release",
          "new_api": "msg_Err",
          "old_text": "IDirectDraw_Release(ddobject)",
          "new_text": "msg_Err(vd, \"cannot get IDirectDraw2 interface\")",
          "old_line_content": "    IDirectDraw_Release(ddobject);",
          "new_line_content": "        msg_Err(vd, \"cannot get IDirectDraw2 interface\");",
          "content_same": false
        },
        {
          "line": 673,
          "old_api": "GetSystemMetrics",
          "new_api": "msg_Dbg",
          "old_text": "GetSystemMetrics(SM_CYSCREEN)",
          "new_text": "msg_Dbg(vd, \"screen dimensions (%lix%li,%lix%li)\",\n            sys->sys.rect_display.left,\n            sys->sys.rect_display.top,\n            sys->sys.rect_display.right,\n            sys->sys.rect_display.bottom)",
          "old_line_content": "        sys->sys.rect_display.bottom = GetSystemMetrics(SM_CYSCREEN);",
          "new_line_content": "    msg_Dbg(vd, \"screen dimensions (%lix%li,%lix%li)\",",
          "content_same": false
        },
        {
          "line": 729,
          "old_api": "IDirectDrawSurface_SetClipper",
          "new_api": "msg_Warn",
          "old_text": "IDirectDrawSurface_SetClipper(sys->display, sys->clipper)",
          "new_text": "msg_Warn(vd, \"cannot attach clipper to surface (error %li)\", hr)",
          "old_line_content": "    hr = IDirectDrawSurface_SetClipper(sys->display, sys->clipper);",
          "new_line_content": "        msg_Warn(vd, \"cannot attach clipper to surface (error %li)\", hr);",
          "content_same": false
        },
        {
          "line": 826,
          "old_api": "IDirectDrawSurface_QueryInterface",
          "new_api": "IDirectDrawSurface_Release",
          "old_text": "IDirectDrawSurface_QueryInterface(display, &IID_IDirectDrawSurface2,\n                                           &ptr)",
          "new_text": "IDirectDrawSurface_Release(display)",
          "old_line_content": "    hr = IDirectDrawSurface_QueryInterface(display, &IID_IDirectDrawSurface2,",
          "new_line_content": "    IDirectDrawSurface_Release(display);",
          "content_same": false
        },
        {
          "line": 829,
          "old_api": "IDirectDrawSurface_Release",
          "new_api": "msg_Err",
          "old_text": "IDirectDrawSurface_Release(display)",
          "new_text": "msg_Err(vd, \"cannot query IDirectDrawSurface2 interface (error %li)\", hr)",
          "old_line_content": "    IDirectDrawSurface_Release(display);",
          "new_line_content": "        msg_Err(vd, \"cannot query IDirectDrawSurface2 interface (error %li)\", hr);",
          "content_same": false
        },
        {
          "line": 852,
          "old_api": "IDirectDrawClipper_Release",
          "new_api": "IDirectDrawSurface2_Release",
          "old_text": "IDirectDrawClipper_Release(sys->clipper)",
          "new_text": "IDirectDrawSurface2_Release(sys->display)",
          "old_line_content": "        IDirectDrawClipper_Release(sys->clipper);",
          "new_line_content": "        IDirectDrawSurface2_Release(sys->display);",
          "content_same": false
        },
        {
          "line": 912,
          "old_api": "IDirectDraw2_CreateSurface",
          "new_api": "msg_Dbg",
          "old_text": "IDirectDraw2_CreateSurface(sys->ddobject, &ddsd, &surface_v1, NULL)",
          "new_text": "msg_Dbg(vd, \"failed to create a DirectDrawSurface with invalid caps %lx\", ddsd.ddsCaps.dwCaps)",
          "old_line_content": "    HRESULT hr = IDirectDraw2_CreateSurface(sys->ddobject, &ddsd, &surface_v1, NULL);",
          "new_line_content": "        msg_Dbg(vd, \"failed to create a DirectDrawSurface with invalid caps %lx\", ddsd.ddsCaps.dwCaps);",
          "content_same": false
        },
        {
          "line": 925,
          "old_api": "IDirectDrawSurface_QueryInterface",
          "new_api": "IDirectDrawSurface_Release",
          "old_text": "IDirectDrawSurface_QueryInterface(surface_v1,\n                                           &IID_IDirectDrawSurface2,\n                                           (LPVOID *)surface)",
          "new_text": "IDirectDrawSurface_Release(surface_v1)",
          "old_line_content": "    hr = IDirectDrawSurface_QueryInterface(surface_v1,",
          "new_line_content": "    IDirectDrawSurface_Release(surface_v1);",
          "content_same": false
        },
        {
          "line": 1000,
          "old_api": "DirectXLockSurface",
          "new_api": "DirectXUnlockSurface",
          "old_text": "DirectXLockSurface(front_surface, surface, NULL)",
          "new_text": "DirectXUnlockSurface(front_surface, surface)",
          "old_line_content": "    if (DirectXLockSurface(front_surface, surface, NULL))",
          "new_line_content": "    DirectXUnlockSurface(front_surface, surface);",
          "content_same": false
        },
        {
          "line": 1055,
          "old_api": "DirectXCreateSurface",
          "new_api": "msg_Dbg",
          "old_text": "DirectXCreateSurface(vd, &front_surface, fmt, fourcc, true, false, 0)",
          "new_text": "msg_Dbg(vd, \"YUV overlay surface (%4.4s) created successfully\", (const char *)&fourcc)",
          "old_line_content": "        ret = DirectXCreateSurface(vd, &front_surface, fmt, fourcc, true, false, 0);",
          "new_line_content": "    msg_Dbg(vd, \"YUV overlay surface (%4.4s) created successfully\", (const char *)&fourcc);",
          "content_same": false
        },
        {
          "line": 1063,
          "old_api": "ZeroMemory",
          "new_api": "msg_Warn",
          "old_text": "ZeroMemory(&dds_caps, sizeof(dds_caps))",
          "new_text": "msg_Warn(vd, \"Failed to get surface back buffer\")",
          "old_line_content": "    ZeroMemory(&dds_caps, sizeof(dds_caps));",
          "new_line_content": "        msg_Warn(vd, \"Failed to get surface back buffer\");",
          "content_same": false
        },
        {
          "line": 1102,
          "old_api": "IDirectDraw2_GetFourCCCodes",
          "new_api": "calloc",
          "old_text": "IDirectDraw2_GetFourCCCodes(sys->ddobject, &count, NULL)",
          "new_text": "calloc(count, sizeof(*list))",
          "old_line_content": "    if (IDirectDraw2_GetFourCCCodes(sys->ddobject, &count, NULL) != DD_OK)",
          "new_line_content": "    DWORD *list = calloc(count, sizeof(*list));",
          "content_same": false
        },
        {
          "line": 1105,
          "old_api": "calloc",
          "new_api": "IDirectDraw2_GetFourCCCodes",
          "old_text": "calloc(count, sizeof(*list))",
          "new_text": "IDirectDraw2_GetFourCCCodes(sys->ddobject, &count, list)",
          "old_line_content": "    DWORD *list = calloc(count, sizeof(*list));",
          "new_line_content": "    if (IDirectDraw2_GetFourCCCodes(sys->ddobject, &count, list) != DD_OK) {",
          "content_same": false
        },
        {
          "line": 1125,
          "old_api": "msg_Dbg",
          "new_api": "DirectXDestroySurface",
          "old_text": "msg_Dbg(vd, \"YUV plain surface (%4.4s) created successfully\", (const char *)&fourcc)",
          "new_text": "DirectXDestroySurface(surface)",
          "old_line_content": "    msg_Dbg(vd, \"YUV plain surface (%4.4s) created successfully\", (const char *)&fourcc);",
          "new_line_content": "        DirectXDestroySurface(surface);",
          "content_same": false
        },
        {
          "line": 1147,
          "old_api": "ZeroMemory",
          "new_api": "IDirectDrawSurface2_GetPixelFormat",
          "old_text": "ZeroMemory(&ddpfPixelFormat, sizeof(ddpfPixelFormat))",
          "new_text": "IDirectDrawSurface2_GetPixelFormat(sys->display, &ddpfPixelFormat)",
          "old_line_content": "    ZeroMemory(&ddpfPixelFormat, sizeof(ddpfPixelFormat));",
          "new_line_content": "    IDirectDrawSurface2_GetPixelFormat(sys->display, &ddpfPixelFormat);",
          "content_same": false
        },
        {
          "line": 1182,
          "old_api": "DirectXCreateSurface",
          "new_api": "msg_Dbg",
          "old_text": "DirectXCreateSurface(vd, &surface, fmt, 0, false, true, 0)",
          "new_text": "msg_Dbg(vd, \"RGB plain surface (%4.4s) created successfully\", (const char *)&fmt->i_chroma)",
          "old_line_content": "        ret = DirectXCreateSurface(vd, &surface, fmt, 0, false, true, 0);",
          "new_line_content": "    msg_Dbg(vd, \"RGB plain surface (%4.4s) created successfully\", (const char *)&fmt->i_chroma);",
          "content_same": false
        },
        {
          "line": 1185,
          "old_api": "msg_Dbg",
          "new_api": "DirectXDestroySurface",
          "old_text": "msg_Dbg(vd, \"RGB plain surface (%4.4s) created successfully\", (const char *)&fmt->i_chroma)",
          "new_text": "DirectXDestroySurface(surface)",
          "old_line_content": "    msg_Dbg(vd, \"RGB plain surface (%4.4s) created successfully\", (const char *)&fmt->i_chroma);",
          "new_line_content": "        DirectXDestroySurface(surface);",
          "content_same": false
        },
        {
          "line": 1229,
          "old_api": "DirectXCreatePictureResourceYuvOverlay",
          "new_api": "msg_Dbg",
          "old_text": "DirectXCreatePictureResourceYuvOverlay(vd, fmt, fourcc)",
          "new_text": "msg_Dbg(vd, \"Failed to create YUV overlay surface %4.4s\", (const char*)&fourcc)",
          "old_line_content": "                    if (DirectXCreatePictureResourceYuvOverlay(vd, fmt, fourcc))",
          "new_line_content": "                        msg_Dbg(vd, \"Failed to create YUV overlay surface %4.4s\", (const char*)&fourcc);",
          "content_same": false
        },
        {
          "line": 1237,
          "old_api": "DirectXCreatePictureResourceYuv",
          "new_api": "msg_Dbg",
          "old_text": "DirectXCreatePictureResourceYuv(vd, fmt, fourcc)",
          "new_text": "msg_Dbg(vd, \"Failed to create YUV surface %4.4s\", (const char*)&fourcc)",
          "old_line_content": "                    if (DirectXCreatePictureResourceYuv(vd, fmt, fourcc))",
          "new_line_content": "                        msg_Dbg(vd, \"Failed to create YUV surface %4.4s\", (const char*)&fourcc);",
          "content_same": false
        },
        {
          "line": 1261,
          "old_api": "DirectXDestroySurface",
          "new_api": "picture_Release",
          "old_text": "DirectXDestroySurface(sys->picsys->surface)",
          "new_text": "picture_Release(sys->picsys->fallback)",
          "old_line_content": "        DirectXDestroySurface(sys->picsys->surface);",
          "new_line_content": "        picture_Release(sys->picsys->fallback);",
          "content_same": false
        },
        {
          "line": 1304,
          "old_api": "picture_NewFromResource",
          "new_api": "free",
          "old_text": "picture_NewFromResource(fmt, &resource)",
          "new_text": "free(sys->picsys)",
          "old_line_content": "    picture_t *picture = picture_NewFromResource(fmt, &resource);",
          "new_line_content": "        free(sys->picsys);",
          "content_same": false
        },
        {
          "line": 1319,
          "old_api": "picture_pool_NewExtended",
          "new_api": "DirectXDestroyPictureResource",
          "old_text": "picture_pool_NewExtended(&cfg)",
          "new_text": "DirectXDestroyPictureResource(vd)",
          "old_line_content": "    sys->sys.pool = picture_pool_NewExtended(&cfg);",
          "new_line_content": "        DirectXDestroyPictureResource(vd);",
          "content_same": false
        },
        {
          "line": 1438,
          "old_api": "ListView_GetBkColor",
          "new_api": "ListView_SetBkColor",
          "old_text": "ListView_GetBkColor(hwnd)",
          "new_text": "ListView_SetBkColor(hwnd,     sys->i_rgb_colorkey)",
          "old_line_content": "        sys->color_bkg    = ListView_GetBkColor(hwnd);",
          "new_line_content": "        ListView_SetBkColor(hwnd,     sys->i_rgb_colorkey);",
          "content_same": false
        },
        {
          "line": 1439,
          "old_api": "ListView_GetTextBkColor",
          "new_api": "ListView_SetTextBkColor",
          "old_text": "ListView_GetTextBkColor(hwnd)",
          "new_text": "ListView_SetTextBkColor(hwnd, sys->i_rgb_colorkey)",
          "old_line_content": "        sys->color_bkgtxt = ListView_GetTextBkColor(hwnd);",
          "new_line_content": "        ListView_SetTextBkColor(hwnd, sys->i_rgb_colorkey);",
          "content_same": false
        },
        {
          "line": 1450,
          "old_api": "UpdateWindow",
          "new_api": "DirectXUpdateOverlay",
          "old_text": "UpdateWindow(hwnd)",
          "new_text": "DirectXUpdateOverlay(vd, NULL)",
          "old_line_content": "    UpdateWindow(hwnd);",
          "new_line_content": "      DirectXUpdateOverlay(vd, NULL);",
          "content_same": false
        },
        {
          "line": 1488,
          "old_api": "VLC_UNUSED",
          "new_api": "xrealloc",
          "old_text": "VLC_UNUSED(hmon)",
          "new_text": "xrealloc(ctx->values, (ctx->count + 1) * sizeof(char *))",
          "old_line_content": "    VLC_UNUSED(guid); VLC_UNUSED(desc); VLC_UNUSED(hmon);",
          "new_line_content": "    ctx->values = xrealloc(ctx->values, (ctx->count + 1) * sizeof(char *));",
          "content_same": false
        },
        {
          "line": 1491,
          "old_api": "xrealloc",
          "new_api": "strdup",
          "old_text": "xrealloc(ctx->values, (ctx->count + 1) * sizeof(char *))",
          "new_text": "strdup(psz_drivername)",
          "old_line_content": "    ctx->values = xrealloc(ctx->values, (ctx->count + 1) * sizeof(char *));",
          "new_line_content": "    ctx->values[ctx->count] = strdup(psz_drivername);",
          "content_same": false
        },
        {
          "line": 1492,
          "old_api": "xrealloc",
          "new_api": "strdup",
          "old_text": "xrealloc(ctx->descs, (ctx->count + 1) * sizeof(char *))",
          "new_text": "strdup(psz_drivername)",
          "old_line_content": "    ctx->descs = xrealloc(ctx->descs, (ctx->count + 1) * sizeof(char *));",
          "new_line_content": "    ctx->descs[ctx->count] = strdup(psz_drivername);",
          "content_same": false
        },
        {
          "line": 1505,
          "old_api": "xmalloc",
          "new_api": "_",
          "old_text": "xmalloc(sizeof(char *))",
          "new_text": "_(\"Default\")",
          "old_line_content": "    ctx.values = xmalloc(sizeof(char *));",
          "new_line_content": "    ctx.descs[0] = strdup(_(\"Default\"));",
          "content_same": false
        },
        {
          "line": 1522,
          "old_api": "FreeLibrary",
          "new_api": "VLC_UNUSED",
          "old_text": "FreeLibrary(hddraw_dll)",
          "new_text": "VLC_UNUSED(name)",
          "old_line_content": "        FreeLibrary(hddraw_dll);",
          "new_line_content": "    VLC_UNUSED(name);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 513,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(device)",
          "old_line_content": "        }",
          "new_line_content": "    free(device);",
          "content_same": false
        },
        {
          "line": 518,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(sys->display_driver)",
          "old_line_content": "    if (hmon == sys->hmonitor) {",
          "new_line_content": "        free(sys->display_driver);",
          "content_same": false
        },
        {
          "line": 1036,
          "old_api": null,
          "new_api": "var_InheritBool",
          "old_text": null,
          "new_text": "var_InheritBool(vd, \"directx-3buffering\")",
          "old_line_content": "{",
          "new_line_content": "    bool allow_3buf    = var_InheritBool(vd, \"directx-3buffering\");",
          "content_same": false
        },
        {
          "line": 1049,
          "old_api": null,
          "new_api": "DirectXCreateSurface",
          "old_text": null,
          "new_text": "DirectXCreateSurface(vd, &front_surface, fmt, fourcc, true, false, 2)",
          "old_line_content": "        /* Triple buffering rocks! it doesn't have any processing overhead",
          "new_line_content": "        ret = DirectXCreateSurface(vd, &front_surface, fmt, fourcc, true, false, 2);",
          "content_same": false
        },
        {
          "line": 539,
          "old_api": null,
          "new_api": "ZeroMemory",
          "old_text": null,
          "new_text": "ZeroMemory(&ddcaps, sizeof(ddcaps))",
          "old_line_content": "    /* This is just an indication of whether or not we'll support overlay,",
          "new_line_content": "    ZeroMemory(&ddcaps, sizeof(ddcaps));",
          "content_same": false
        },
        {
          "line": 541,
          "old_api": null,
          "new_api": "IDirectDraw2_GetCaps",
          "old_text": null,
          "new_text": "IDirectDraw2_GetCaps(sys->ddobject, &ddcaps, NULL)",
          "old_line_content": "    DDCAPS ddcaps;",
          "new_line_content": "    HRESULT hr = IDirectDraw2_GetCaps(sys->ddobject, &ddcaps, NULL);",
          "content_same": false
        },
        {
          "line": 543,
          "old_api": null,
          "new_api": "msg_Warn",
          "old_text": null,
          "new_text": "msg_Warn(vd, \"cannot get caps\")",
          "old_line_content": "    ddcaps.dwSize = sizeof(ddcaps);",
          "new_line_content": "        msg_Warn(vd, \"cannot get caps\");",
          "content_same": false
        },
        {
          "line": 1060,
          "old_api": null,
          "new_api": "ZeroMemory",
          "old_text": null,
          "new_text": "ZeroMemory(&dds_caps, sizeof(dds_caps))",
          "old_line_content": "    /* Get the back buffer */",
          "new_line_content": "    ZeroMemory(&dds_caps, sizeof(dds_caps));",
          "content_same": false
        },
        {
          "line": 1062,
          "old_api": null,
          "new_api": "IDirectDrawSurface2_GetAttachedSurface",
          "old_text": null,
          "new_text": "IDirectDrawSurface2_GetAttachedSurface(front_surface, &dds_caps, &surface)",
          "old_line_content": "    DDSCAPS dds_caps;",
          "new_line_content": "    if (IDirectDrawSurface2_GetAttachedSurface(front_surface, &dds_caps, &surface) != DD_OK) {",
          "content_same": false
        },
        {
          "line": 1068,
          "old_api": null,
          "new_api": "DirectXCheckLockingSurface",
          "old_text": null,
          "new_text": "DirectXCheckLockingSurface(front_surface, surface)",
          "old_line_content": "        surface = front_surface;",
          "new_line_content": "    if (DirectXCheckLockingSurface(front_surface, surface)) {",
          "content_same": false
        },
        {
          "line": 1069,
          "old_api": null,
          "new_api": "DirectXDestroySurface",
          "old_text": null,
          "new_text": "DirectXDestroySurface(front_surface)",
          "old_line_content": "    }",
          "new_line_content": "        DirectXDestroySurface(front_surface);",
          "content_same": false
        },
        {
          "line": 568,
          "old_api": null,
          "new_api": "msg_Dbg",
          "old_text": null,
          "new_text": "msg_Dbg(vd, \"DirectDraw Capabilities: overlay=%i yuvoverlay=%i \"\n                \"can_deinterlace_overlay=%i colorkey=%i stretch=%i \"\n                \"bltfourcc=%i\",\n                has_overlay, has_overlay_fourcc, can_deinterlace,\n                has_color_key, can_stretch, sys->can_blit_fourcc)",
          "old_line_content": "    /* Determine overlay destination size alignment */",
          "new_line_content": "    msg_Dbg(vd, \"DirectDraw Capabilities: overlay=%i yuvoverlay=%i \"",
          "content_same": false
        },
        {
          "line": 1086,
          "old_api": null,
          "new_api": "var_InheritBool",
          "old_text": null,
          "new_text": "var_InheritBool(vd, \"directx-use-sysmem\")",
          "old_line_content": "{",
          "new_line_content": "    bool allow_sysmem  = var_InheritBool(vd, \"directx-use-sysmem\");",
          "content_same": false
        },
        {
          "line": 584,
          "old_api": null,
          "new_api": "msg_Dbg",
          "old_text": null,
          "new_text": "msg_Dbg(vd,\n                \"align_boundary_src=%i,%i align_boundary_dest=%i,%i \"\n                \"align_size_src=%i,%i align_size_dest=%i,%i\",\n                align_boundary_src,  vd->sys->sys.i_align_src_boundary,\n                align_boundary_dest, vd->sys->sys.i_align_dest_boundary,\n                align_size_src,  vd->sys->sys.i_align_src_size,\n                align_size_dest, vd->sys->sys.i_align_dest_size)",
          "old_line_content": "        if (align_size_dest)",
          "new_line_content": "        msg_Dbg(vd,",
          "content_same": false
        },
        {
          "line": 1099,
          "old_api": null,
          "new_api": "IDirectDraw2_GetFourCCCodes",
          "old_text": null,
          "new_text": "IDirectDraw2_GetFourCCCodes(sys->ddobject, &count, NULL)",
          "old_line_content": "     * because a few buggy drivers don't mind creating the surface",
          "new_line_content": "    if (IDirectDraw2_GetFourCCCodes(sys->ddobject, &count, NULL) != DD_OK)",
          "content_same": false
        },
        {
          "line": 1106,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(list)",
          "old_line_content": "    if (!list)",
          "new_line_content": "        free(list);",
          "content_same": false
        },
        {
          "line": 1114,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(list)",
          "old_line_content": "        if (list[index] == fourcc)",
          "new_line_content": "    free(list);",
          "content_same": false
        },
        {
          "line": 605,
          "old_api": null,
          "new_api": "GetProcAddress",
          "old_text": null,
          "new_text": "GetProcAddress(sys->hddraw_dll, \"DirectDrawCreate\")",
          "old_line_content": "    /* */",
          "new_line_content": "        (void *)GetProcAddress(sys->hddraw_dll, \"DirectDrawCreate\");",
          "content_same": false
        },
        {
          "line": 607,
          "old_api": null,
          "new_api": "msg_Err",
          "old_text": null,
          "new_text": "msg_Err(vd, \"DirectXInitDDraw failed GetProcAddress\")",
          "old_line_content": "    OurDirectDrawCreate =",
          "new_line_content": "        msg_Err(vd, \"DirectXInitDDraw failed GetProcAddress\");",
          "content_same": false
        },
        {
          "line": 1120,
          "old_api": null,
          "new_api": "DirectXCreateSurface",
          "old_text": null,
          "new_text": "DirectXCreateSurface(vd, &surface, fmt, fourcc, false, allow_sysmem, 0)",
          "old_line_content": "",
          "new_line_content": "    if (DirectXCreateSurface(vd, &surface, fmt, fourcc, false, allow_sysmem, 0))",
          "content_same": false
        },
        {
          "line": 1122,
          "old_api": null,
          "new_api": "msg_Dbg",
          "old_text": null,
          "new_text": "msg_Dbg(vd, \"YUV plain surface (%4.4s) created successfully\", (const char *)&fourcc)",
          "old_line_content": "    LPDIRECTDRAWSURFACE2 surface;",
          "new_line_content": "    msg_Dbg(vd, \"YUV plain surface (%4.4s) created successfully\", (const char *)&fourcc);",
          "content_same": false
        },
        {
          "line": 612,
          "old_api": null,
          "new_api": "HRESULT (WINAPI *OurDirectDrawEnumerateEx)(LPDDENUMCALLBACKEXA, LPVOID, DWORD)",
          "old_text": null,
          "new_text": "HRESULT (WINAPI *OurDirectDrawEnumerateEx)(LPDDENUMCALLBACKEXA, LPVOID, DWORD)",
          "old_line_content": "    }",
          "new_line_content": "    HRESULT (WINAPI *OurDirectDrawEnumerateEx)(LPDDENUMCALLBACKEXA, LPVOID, DWORD);",
          "content_same": false
        },
        {
          "line": 1124,
          "old_api": null,
          "new_api": "DirectXCheckLockingSurface",
          "old_text": null,
          "new_text": "DirectXCheckLockingSurface(surface, surface)",
          "old_line_content": "        return VLC_EGENERIC;",
          "new_line_content": "    if (DirectXCheckLockingSurface(surface, surface)) {",
          "content_same": false
        },
        {
          "line": 614,
          "old_api": null,
          "new_api": "GetProcAddress",
          "old_text": null,
          "new_text": "GetProcAddress(sys->hddraw_dll, DIRECTDRAWENUMERATEEX_NAME)",
          "old_line_content": "    /* */",
          "new_line_content": "      (void *)GetProcAddress(sys->hddraw_dll, DIRECTDRAWENUMERATEEX_NAME);",
          "content_same": false
        },
        {
          "line": 619,
          "old_api": null,
          "new_api": "msg_Dbg",
          "old_text": null,
          "new_text": "msg_Dbg(vd, \"directx-device: %s\", device)",
          "old_line_content": "    if (OurDirectDrawEnumerateEx) {",
          "new_line_content": "            msg_Dbg(vd, \"directx-device: %s\", device);",
          "content_same": false
        },
        {
          "line": 1140,
          "old_api": null,
          "new_api": "var_InheritBool",
          "old_text": null,
          "new_text": "var_InheritBool(vd, \"directx-use-sysmem\")",
          "old_line_content": "                                           video_format_t *fmt)",
          "new_line_content": "    bool allow_sysmem  = var_InheritBool(vd, \"directx-use-sysmem\");",
          "content_same": false
        },
        {
          "line": 632,
          "old_api": null,
          "new_api": "OurDirectDrawCreate",
          "old_text": null,
          "new_text": "OurDirectDrawCreate(sys->display_driver, &ddobject, NULL)",
          "old_line_content": "",
          "new_line_content": "    hr = OurDirectDrawCreate(sys->display_driver, &ddobject, NULL);",
          "content_same": false
        },
        {
          "line": 1144,
          "old_api": null,
          "new_api": "ZeroMemory",
          "old_text": null,
          "new_text": "ZeroMemory(&ddpfPixelFormat, sizeof(ddpfPixelFormat))",
          "old_line_content": "",
          "new_line_content": "    ZeroMemory(&ddpfPixelFormat, sizeof(ddpfPixelFormat));",
          "content_same": false
        },
        {
          "line": 634,
          "old_api": null,
          "new_api": "msg_Err",
          "old_text": null,
          "new_text": "msg_Err(vd, \"DirectXInitDDraw cannot initialize DDraw\")",
          "old_line_content": "    LPDIRECTDRAW ddobject;",
          "new_line_content": "        msg_Err(vd, \"DirectXInitDDraw cannot initialize DDraw\");",
          "content_same": false
        },
        {
          "line": 640,
          "old_api": null,
          "new_api": "IDirectDraw_QueryInterface",
          "old_text": null,
          "new_text": "IDirectDraw_QueryInterface(ddobject, &IID_IDirectDraw2,\n                                    &ptr)",
          "old_line_content": "",
          "new_line_content": "    hr = IDirectDraw_QueryInterface(ddobject, &IID_IDirectDraw2,",
          "content_same": false
        },
        {
          "line": 654,
          "old_api": null,
          "new_api": "IDirectDraw2_SetCooperativeLevel",
          "old_text": null,
          "new_text": "IDirectDraw2_SetCooperativeLevel(sys->ddobject, NULL, DDSCL_NORMAL)",
          "old_line_content": "",
          "new_line_content": "    hr = IDirectDraw2_SetCooperativeLevel(sys->ddobject, NULL, DDSCL_NORMAL);",
          "content_same": false
        },
        {
          "line": 656,
          "old_api": null,
          "new_api": "msg_Err",
          "old_text": null,
          "new_text": "msg_Err(vd, \"cannot set direct draw cooperative level\")",
          "old_line_content": "     * display */",
          "new_line_content": "        msg_Err(vd, \"cannot set direct draw cooperative level\");",
          "content_same": false
        },
        {
          "line": 1168,
          "old_api": null,
          "new_api": "msg_Err",
          "old_text": null,
          "new_text": "msg_Err(vd, \"unknown screen depth\")",
          "old_line_content": "        fmt->i_chroma = VLC_CODEC_RGB32;",
          "new_line_content": "        msg_Err(vd, \"unknown screen depth\");",
          "content_same": false
        },
        {
          "line": 664,
          "old_api": null,
          "new_api": "GetMonitorInfoA",
          "old_text": null,
          "new_text": "GetMonitorInfoA(vd->sys->hmonitor, &monitor_info)",
          "old_line_content": "    if (sys->hmonitor) {",
          "new_line_content": "        GetMonitorInfoA(vd->sys->hmonitor, &monitor_info);",
          "content_same": false
        },
        {
          "line": 1177,
          "old_api": null,
          "new_api": "DirectXCreateSurface",
          "old_text": null,
          "new_text": "DirectXCreateSurface(vd, &surface, fmt, 0, false, allow_sysmem, 0)",
          "old_line_content": "",
          "new_line_content": "    int ret = DirectXCreateSurface(vd, &surface, fmt, 0, false, allow_sysmem, 0);",
          "content_same": false
        },
        {
          "line": 1179,
          "old_api": null,
          "new_api": "DirectXCreateSurface",
          "old_text": null,
          "new_text": "DirectXCreateSurface(vd, &surface, fmt, 0, false, true, 0)",
          "old_line_content": "    LPDIRECTDRAWSURFACE2 surface;",
          "new_line_content": "        ret = DirectXCreateSurface(vd, &surface, fmt, 0, false, true, 0);",
          "content_same": false
        },
        {
          "line": 669,
          "old_api": null,
          "new_api": "GetSystemMetrics",
          "old_text": null,
          "new_text": "GetSystemMetrics(SM_CXSCREEN)",
          "old_line_content": "    } else {",
          "new_line_content": "        sys->sys.rect_display.right  = GetSystemMetrics(SM_CXSCREEN);",
          "content_same": false
        },
        {
          "line": 670,
          "old_api": null,
          "new_api": "GetSystemMetrics",
          "old_text": null,
          "new_text": "GetSystemMetrics(SM_CYSCREEN)",
          "old_line_content": "        sys->sys.rect_display.left   = 0;",
          "new_line_content": "        sys->sys.rect_display.bottom = GetSystemMetrics(SM_CYSCREEN);",
          "content_same": false
        },
        {
          "line": 1184,
          "old_api": null,
          "new_api": "DirectXCheckLockingSurface",
          "old_text": null,
          "new_text": "DirectXCheckLockingSurface(surface, surface)",
          "old_line_content": "        return VLC_EGENERIC;",
          "new_line_content": "    if (DirectXCheckLockingSurface(surface, surface)) {",
          "content_same": false
        },
        {
          "line": 680,
          "old_api": null,
          "new_api": "DirectXGetDDrawCaps",
          "old_text": null,
          "new_text": "DirectXGetDDrawCaps(vd)",
          "old_line_content": "            sys->sys.rect_display.bottom);",
          "new_line_content": "    DirectXGetDDrawCaps(vd);",
          "content_same": false
        },
        {
          "line": 689,
          "old_api": null,
          "new_api": "IDirectDraw2_Release",
          "old_text": null,
          "new_text": "IDirectDraw2_Release(sys->ddobject)",
          "old_line_content": "{",
          "new_line_content": "        IDirectDraw2_Release(sys->ddobject);",
          "content_same": false
        },
        {
          "line": 1204,
          "old_api": null,
          "new_api": "calloc",
          "old_text": null,
          "new_text": "calloc(1, sizeof(*picsys))",
          "old_line_content": "    vout_display_sys_t *sys = vd->sys;",
          "new_line_content": "    picture_sys_t *picsys = calloc(1, sizeof(*picsys));",
          "content_same": false
        },
        {
          "line": 693,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(sys->display_driver)",
          "old_line_content": "",
          "new_line_content": "    free(sys->display_driver);",
          "content_same": false
        },
        {
          "line": 1205,
          "old_api": null,
          "new_api": "unlikely",
          "old_text": null,
          "new_text": "unlikely(picsys == NULL)",
          "old_line_content": "",
          "new_line_content": "    if (unlikely(picsys == NULL))",
          "content_same": false
        },
        {
          "line": 1211,
          "old_api": null,
          "new_api": "vlc_fourcc_IsYUV",
          "old_text": null,
          "new_text": "vlc_fourcc_IsYUV(fmt->i_chroma)",
          "old_line_content": "",
          "new_line_content": "                         vlc_fourcc_IsYUV(fmt->i_chroma) &&",
          "content_same": false
        },
        {
          "line": 1212,
          "old_api": null,
          "new_api": "var_InheritBool",
          "old_text": null,
          "new_text": "var_InheritBool(vd, \"directx-hw-yuv\")",
          "old_line_content": "    /* */",
          "new_line_content": "                         var_InheritBool(vd, \"directx-hw-yuv\");",
          "content_same": false
        },
        {
          "line": 1213,
          "old_api": null,
          "new_api": "var_InheritBool",
          "old_text": null,
          "new_text": "var_InheritBool(vd, \"directx-overlay\")",
          "old_line_content": "    bool allow_hw_yuv  = sys->can_blit_fourcc &&",
          "new_line_content": "    bool allow_overlay = var_InheritBool(vd, \"directx-overlay\");",
          "content_same": false
        },
        {
          "line": 1217,
          "old_api": null,
          "new_api": "vlc_fourcc_GetYUVFallback",
          "old_text": null,
          "new_text": "vlc_fourcc_GetYUVFallback(fmt->i_chroma)",
          "old_line_content": "",
          "new_line_content": "        const vlc_fourcc_t *list = vlc_fourcc_GetYUVFallback(fmt->i_chroma);",
          "content_same": false
        },
        {
          "line": 1221,
          "old_api": null,
          "new_api": "DirectXGetFourcc",
          "old_text": null,
          "new_text": "DirectXGetFourcc(list[i])",
          "old_line_content": "        /*  Try with overlay first */",
          "new_line_content": "                const DWORD fourcc = DirectXGetFourcc(list[i]);",
          "content_same": false
        },
        {
          "line": 712,
          "old_api": null,
          "new_api": "IDirectDraw2_CreateClipper",
          "old_text": null,
          "new_text": "IDirectDraw2_CreateClipper(sys->ddobject, 0, &sys->clipper, NULL)",
          "old_line_content": "    HRESULT hr;",
          "new_line_content": "    hr = IDirectDraw2_CreateClipper(sys->ddobject, 0, &sys->clipper, NULL);",
          "content_same": false
        },
        {
          "line": 714,
          "old_api": null,
          "new_api": "msg_Warn",
          "old_text": null,
          "new_text": "msg_Warn(vd, \"cannot create clipper (error %li)\", hr)",
          "old_line_content": "    /* Create the clipper */",
          "new_line_content": "        msg_Warn(vd, \"cannot create clipper (error %li)\", hr);",
          "content_same": false
        },
        {
          "line": 1226,
          "old_api": null,
          "new_api": "DirectXCreatePictureResourceYuvOverlay",
          "old_text": null,
          "new_text": "DirectXCreatePictureResourceYuvOverlay(vd, fmt, fourcc)",
          "old_line_content": "                    continue;",
          "new_line_content": "                    if (DirectXCreatePictureResourceYuvOverlay(vd, fmt, fourcc))",
          "content_same": false
        },
        {
          "line": 719,
          "old_api": null,
          "new_api": "IDirectDrawClipper_SetHWnd",
          "old_text": null,
          "new_text": "IDirectDrawClipper_SetHWnd(sys->clipper, 0, sys->sys.hvideownd)",
          "old_line_content": "    }",
          "new_line_content": "    hr = IDirectDrawClipper_SetHWnd(sys->clipper, 0, sys->sys.hvideownd);",
          "content_same": false
        },
        {
          "line": 721,
          "old_api": null,
          "new_api": "msg_Warn",
          "old_text": null,
          "new_text": "msg_Warn(vd, \"cannot attach clipper to window (error %li)\", hr)",
          "old_line_content": "    /* Associate the clipper to the window */",
          "new_line_content": "        msg_Warn(vd, \"cannot attach clipper to window (error %li)\", hr);",
          "content_same": false
        },
        {
          "line": 1234,
          "old_api": null,
          "new_api": "DirectXCreatePictureResourceYuv",
          "old_text": null,
          "new_text": "DirectXCreatePictureResourceYuv(vd, fmt, fourcc)",
          "old_line_content": "                        continue;",
          "new_line_content": "                    if (DirectXCreatePictureResourceYuv(vd, fmt, fourcc))",
          "content_same": false
        },
        {
          "line": 726,
          "old_api": null,
          "new_api": "IDirectDrawSurface_SetClipper",
          "old_text": null,
          "new_text": "IDirectDrawSurface_SetClipper(sys->display, sys->clipper)",
          "old_line_content": "    }",
          "new_line_content": "    hr = IDirectDrawSurface_SetClipper(sys->display, sys->clipper);",
          "content_same": false
        },
        {
          "line": 737,
          "old_api": null,
          "new_api": "IDirectDrawClipper_Release",
          "old_text": null,
          "new_text": "IDirectDrawClipper_Release(sys->clipper)",
          "old_line_content": "",
          "new_line_content": "        IDirectDrawClipper_Release(sys->clipper);",
          "content_same": false
        },
        {
          "line": 1251,
          "old_api": null,
          "new_api": "DirectXCreatePictureResourceRgb",
          "old_text": null,
          "new_text": "DirectXCreatePictureResourceRgb(vd, fmt)",
          "old_line_content": "    }",
          "new_line_content": "    return DirectXCreatePictureResourceRgb(vd, fmt);",
          "content_same": false
        },
        {
          "line": 229,
          "old_api": null,
          "new_api": "vlc_mutex_init",
          "old_text": null,
          "new_text": "vlc_mutex_init(&sys->lock)",
          "old_line_content": "    /* Interaction TODO support starting with wallpaper mode */",
          "new_line_content": "    vlc_mutex_init(&sys->lock);",
          "content_same": false
        },
        {
          "line": 234,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"Wallpaper\")",
          "old_line_content": "",
          "new_line_content": "    var_Change(vd, \"video-wallpaper\", VLC_VAR_SETTEXT, _(\"Wallpaper\"));",
          "content_same": false
        },
        {
          "line": 1258,
          "old_api": null,
          "new_api": "DirectXDestroySurface",
          "old_text": null,
          "new_text": "DirectXDestroySurface(sys->picsys->surface)",
          "old_line_content": "    vout_display_sys_t *sys = vd->sys;",
          "new_line_content": "        DirectXDestroySurface(sys->picsys->surface);",
          "content_same": false
        },
        {
          "line": 1259,
          "old_api": null,
          "new_api": "DirectXDestroySurface",
          "old_text": null,
          "new_text": "DirectXDestroySurface(sys->picsys->front_surface)",
          "old_line_content": "",
          "new_line_content": "    DirectXDestroySurface(sys->picsys->front_surface);",
          "content_same": false
        },
        {
          "line": 237,
          "old_api": null,
          "new_api": "video_format_Clean",
          "old_text": null,
          "new_text": "video_format_Clean(fmtp)",
          "old_line_content": "",
          "new_line_content": "    video_format_Clean(fmtp);",
          "content_same": false
        },
        {
          "line": 238,
          "old_api": null,
          "new_api": "video_format_Copy",
          "old_text": null,
          "new_text": "video_format_Copy(fmtp, &fmt)",
          "old_line_content": "    /* Setup vout_display now that everything is fine */",
          "new_line_content": "    video_format_Copy(fmtp, &fmt);",
          "content_same": false
        },
        {
          "line": 752,
          "old_api": null,
          "new_api": "IDirectDrawSurface2_Lock",
          "old_text": null,
          "new_text": "IDirectDrawSurface2_Lock(sys->display, NULL, &ddsd, DDLOCK_WAIT, NULL)",
          "old_line_content": "    /* */",
          "new_line_content": "    hr = IDirectDrawSurface2_Lock(sys->display, NULL, &ddsd, DDLOCK_WAIT, NULL);",
          "content_same": false
        },
        {
          "line": 1268,
          "old_api": null,
          "new_api": "DirectXLockSurface",
          "old_text": null,
          "new_text": "DirectXLockSurface(p_sys->front_surface,\n                           p_sys->surface, &ddsd)",
          "old_line_content": "{",
          "new_line_content": "    if (DirectXLockSurface(p_sys->front_surface,",
          "content_same": false
        },
        {
          "line": 1270,
          "old_api": null,
          "new_api": "CommonUpdatePicture",
          "old_text": null,
          "new_text": "CommonUpdatePicture(picture, &p_sys->fallback, NULL, 0)",
          "old_line_content": "    DDSURFACEDESC ddsd;",
          "new_line_content": "        return CommonUpdatePicture(picture, &p_sys->fallback, NULL, 0);",
          "content_same": false
        },
        {
          "line": 247,
          "old_api": null,
          "new_api": "DirectXClose",
          "old_text": null,
          "new_text": "DirectXClose(vd)",
          "old_line_content": "    return VLC_SUCCESS;",
          "new_line_content": "    DirectXClose(vd);",
          "content_same": false
        },
        {
          "line": 1272,
          "old_api": null,
          "new_api": "CommonUpdatePicture",
          "old_text": null,
          "new_text": "CommonUpdatePicture(picture, NULL, ddsd.lpSurface, ddsd.lPitch)",
          "old_line_content": "                           p_sys->surface, &ddsd))",
          "new_line_content": "    CommonUpdatePicture(picture, NULL, ddsd.lpSurface, ddsd.lPitch);",
          "content_same": false
        },
        {
          "line": 248,
          "old_api": null,
          "new_api": "CommonClean",
          "old_text": null,
          "new_text": "CommonClean(vd)",
          "old_line_content": "",
          "new_line_content": "    CommonClean(vd);",
          "content_same": false
        },
        {
          "line": 1278,
          "old_api": null,
          "new_api": "DirectXUnlockSurface",
          "old_text": null,
          "new_text": "DirectXUnlockSurface(p_sys->front_surface,\n                         p_sys->surface)",
          "old_line_content": "static void DirectXUnlock(picture_t *picture)",
          "new_line_content": "    DirectXUnlockSurface(p_sys->front_surface,",
          "content_same": false
        },
        {
          "line": 1283,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(picture->p_sys)",
          "old_line_content": "}",
          "new_line_content": "    free(picture->p_sys);",
          "content_same": false
        },
        {
          "line": 261,
          "old_api": null,
          "new_api": "var_DelCallback",
          "old_text": null,
          "new_text": "var_DelCallback(vd, \"video-wallpaper\", WallpaperCallback, NULL)",
          "old_line_content": "{",
          "new_line_content": "    var_DelCallback(vd, \"video-wallpaper\", WallpaperCallback, NULL);",
          "content_same": false
        },
        {
          "line": 262,
          "old_api": null,
          "new_api": "vlc_mutex_destroy",
          "old_text": null,
          "new_text": "vlc_mutex_destroy(&sys->lock)",
          "old_line_content": "    vout_display_sys_t *sys = vd->sys;",
          "new_line_content": "    vlc_mutex_destroy(&sys->lock);",
          "content_same": false
        },
        {
          "line": 776,
          "old_api": null,
          "new_api": "IDirectDrawSurface2_Unlock",
          "old_text": null,
          "new_text": "IDirectDrawSurface2_Unlock(sys->display, NULL)",
          "old_line_content": "        *(uint32_t *)ddsd.lpSurface = *color;",
          "new_line_content": "    IDirectDrawSurface2_Unlock(sys->display, NULL);",
          "content_same": false
        },
        {
          "line": 267,
          "old_api": null,
          "new_api": "DirectXClose",
          "old_text": null,
          "new_text": "DirectXClose(vd)",
          "old_line_content": "    /* Make sure the wallpaper is restored */",
          "new_line_content": "    DirectXClose(vd);",
          "content_same": false
        },
        {
          "line": 269,
          "old_api": null,
          "new_api": "CommonClean",
          "old_text": null,
          "new_text": "CommonClean(vd)",
          "old_line_content": "",
          "new_line_content": "    CommonClean(vd);",
          "content_same": false
        },
        {
          "line": 781,
          "old_api": null,
          "new_api": "IDirectDrawSurface2_GetDC",
          "old_text": null,
          "new_text": "IDirectDrawSurface2_GetDC(sys->display, &hdc)",
          "old_line_content": "    /* */",
          "new_line_content": "    if (IDirectDrawSurface2_GetDC(sys->display, &hdc) == DD_OK) {",
          "content_same": false
        },
        {
          "line": 782,
          "old_api": null,
          "new_api": "GetPixel",
          "old_text": null,
          "new_text": "GetPixel(hdc, 0, 0)",
          "old_line_content": "    HDC hdc;",
          "new_line_content": "        rgb = GetPixel(hdc, 0, 0);",
          "content_same": false
        },
        {
          "line": 783,
          "old_api": null,
          "new_api": "IDirectDrawSurface2_ReleaseDC",
          "old_text": null,
          "new_text": "IDirectDrawSurface2_ReleaseDC(sys->display, hdc)",
          "old_line_content": "    COLORREF rgb;",
          "new_line_content": "        IDirectDrawSurface2_ReleaseDC(sys->display, hdc);",
          "content_same": false
        },
        {
          "line": 273,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(sys)",
          "old_line_content": "",
          "new_line_content": "    free(sys);",
          "content_same": false
        },
        {
          "line": 1294,
          "old_api": null,
          "new_api": "DirectXCreatePictureResource",
          "old_text": null,
          "new_text": "DirectXCreatePictureResource(vd, use_overlay, fmt)",
          "old_line_content": "    /* */",
          "new_line_content": "    if (DirectXCreatePictureResource(vd, use_overlay, fmt))",
          "content_same": false
        },
        {
          "line": 1301,
          "old_api": null,
          "new_api": "picture_NewFromResource",
          "old_text": null,
          "new_text": "picture_NewFromResource(fmt, &resource)",
          "old_line_content": "    picture_resource_t resource = {",
          "new_line_content": "    picture_t *picture = picture_NewFromResource(fmt, &resource);",
          "content_same": false
        },
        {
          "line": 278,
          "old_api": null,
          "new_api": "VLC_UNUSED",
          "old_text": null,
          "new_text": "VLC_UNUSED(count)",
          "old_line_content": "",
          "new_line_content": "    VLC_UNUSED(count);",
          "content_same": false
        },
        {
          "line": 790,
          "old_api": null,
          "new_api": "IDirectDrawSurface2_Lock",
          "old_text": null,
          "new_text": "IDirectDrawSurface2_Lock(sys->display, NULL, &ddsd, DDLOCK_WAIT, NULL)",
          "old_line_content": "",
          "new_line_content": "    if (IDirectDrawSurface2_Lock(sys->display, NULL, &ddsd, DDLOCK_WAIT, NULL) == DD_OK) {",
          "content_same": false
        },
        {
          "line": 792,
          "old_api": null,
          "new_api": "IDirectDrawSurface2_Unlock",
          "old_text": null,
          "new_text": "IDirectDrawSurface2_Unlock(sys->display, NULL)",
          "old_line_content": "    ddsd.dwSize = sizeof(ddsd);",
          "new_line_content": "        IDirectDrawSurface2_Unlock(sys->display, NULL);",
          "content_same": false
        },
        {
          "line": 1303,
          "old_api": null,
          "new_api": "DirectXDestroyPictureResource",
          "old_text": null,
          "new_text": "DirectXDestroyPictureResource(vd)",
          "old_line_content": "    };",
          "new_line_content": "        DirectXDestroyPictureResource(vd);",
          "content_same": false
        },
        {
          "line": 286,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(sys->display)",
          "old_line_content": "    vout_display_sys_t *sys = vd->sys;",
          "new_line_content": "    assert(sys->display);",
          "content_same": false
        },
        {
          "line": 1310,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(&cfg, 0, sizeof(cfg))",
          "old_line_content": "",
          "new_line_content": "    memset(&cfg, 0, sizeof(cfg));",
          "content_same": false
        },
        {
          "line": 290,
          "old_api": null,
          "new_api": "IDirectDrawSurface2_IsLost",
          "old_text": null,
          "new_text": "IDirectDrawSurface2_IsLost(sys->display)",
          "old_line_content": "",
          "new_line_content": "    if (IDirectDrawSurface2_IsLost(sys->display) == DDERR_SURFACELOST) {",
          "content_same": false
        },
        {
          "line": 291,
          "old_api": null,
          "new_api": "IDirectDrawSurface2_Restore",
          "old_text": null,
          "new_text": "IDirectDrawSurface2_Restore(sys->display)",
          "old_line_content": "    /* Our surface can be lost so be sure to check this",
          "new_line_content": "        if (IDirectDrawSurface2_Restore(sys->display) == DD_OK) {",
          "content_same": false
        },
        {
          "line": 1316,
          "old_api": null,
          "new_api": "picture_pool_NewExtended",
          "old_text": null,
          "new_text": "picture_pool_NewExtended(&cfg)",
          "old_line_content": "    cfg.lock          = DirectXLock;",
          "new_line_content": "    sys->sys.pool = picture_pool_NewExtended(&cfg);",
          "content_same": false
        },
        {
          "line": 1318,
          "old_api": null,
          "new_api": "picture_Release",
          "old_text": null,
          "new_text": "picture_Release(picture)",
          "old_line_content": "",
          "new_line_content": "        picture_Release(picture);",
          "content_same": false
        },
        {
          "line": 297,
          "old_api": null,
          "new_api": "DirectXUpdateOverlay",
          "old_text": null,
          "new_text": "DirectXUpdateOverlay(vd, NULL)",
          "old_line_content": "        }",
          "new_line_content": "        DirectXUpdateOverlay(vd, NULL);",
          "content_same": false
        },
        {
          "line": 810,
          "old_api": null,
          "new_api": "ZeroMemory",
          "old_text": null,
          "new_text": "ZeroMemory(&ddsd, sizeof(ddsd))",
          "old_line_content": "    /* Now get the primary surface. This surface is what you actually see",
          "new_line_content": "    ZeroMemory(&ddsd, sizeof(ddsd));",
          "content_same": false
        },
        {
          "line": 816,
          "old_api": null,
          "new_api": "IDirectDraw2_CreateSurface",
          "old_text": null,
          "new_text": "IDirectDraw2_CreateSurface(sys->ddobject, &ddsd, &display, NULL)",
          "old_line_content": "    ddsd.ddsCaps.dwCaps = DDSCAPS_PRIMARYSURFACE;",
          "new_line_content": "    hr = IDirectDraw2_CreateSurface(sys->ddobject, &ddsd, &display, NULL);",
          "content_same": false
        },
        {
          "line": 305,
          "old_api": null,
          "new_api": "IDirectDrawSurface2_Flip",
          "old_text": null,
          "new_text": "IDirectDrawSurface2_Flip(p_sys->front_surface,\n                                                  NULL, DDFLIP_WAIT)",
          "old_line_content": "    if (sys->sys.use_overlay) {",
          "new_line_content": "            HRESULT hr = IDirectDrawSurface2_Flip(p_sys->front_surface,",
          "content_same": false
        },
        {
          "line": 818,
          "old_api": null,
          "new_api": "msg_Err",
          "old_text": null,
          "new_text": "msg_Err(vd, \"cannot get primary surface (error %li)\", hr)",
          "old_line_content": "    LPDIRECTDRAWSURFACE display;",
          "new_line_content": "        msg_Err(vd, \"cannot get primary surface (error %li)\", hr);",
          "content_same": false
        },
        {
          "line": 1329,
          "old_api": null,
          "new_api": "DirectXDestroyPictureResource",
          "old_text": null,
          "new_text": "DirectXDestroyPictureResource(vd)",
          "old_line_content": "    vout_display_sys_t *sys = vd->sys;",
          "new_line_content": "        DirectXDestroyPictureResource(vd);",
          "content_same": false
        },
        {
          "line": 1330,
          "old_api": null,
          "new_api": "picture_pool_Release",
          "old_text": null,
          "new_text": "picture_pool_Release(sys->sys.pool)",
          "old_line_content": "",
          "new_line_content": "        picture_pool_Release(sys->sys.pool);",
          "content_same": false
        },
        {
          "line": 823,
          "old_api": null,
          "new_api": "IDirectDrawSurface_QueryInterface",
          "old_text": null,
          "new_text": "IDirectDrawSurface_QueryInterface(display, &IID_IDirectDrawSurface2,\n                                           &ptr)",
          "old_line_content": "    }",
          "new_line_content": "    hr = IDirectDrawSurface_QueryInterface(display, &IID_IDirectDrawSurface2,",
          "content_same": false
        },
        {
          "line": 313,
          "old_api": null,
          "new_api": "ZeroMemory",
          "old_text": null,
          "new_text": "ZeroMemory(&ddbltfx, sizeof(ddbltfx))",
          "old_line_content": "    } else {",
          "new_line_content": "        ZeroMemory(&ddbltfx, sizeof(ddbltfx));",
          "content_same": false
        },
        {
          "line": 317,
          "old_api": null,
          "new_api": "IDirectDrawSurface2_Blt",
          "old_text": null,
          "new_text": "IDirectDrawSurface2_Blt(sys->display,\n                                             &sys->sys.rect_dest_clipped,\n                                             p_sys->surface,\n                                             &sys->sys.rect_src_clipped,\n                                             DDBLT_ASYNC, &ddbltfx)",
          "old_line_content": "        ddbltfx.dwSize = sizeof(ddbltfx);",
          "new_line_content": "        HRESULT hr = IDirectDrawSurface2_Blt(sys->display,",
          "content_same": false
        },
        {
          "line": 323,
          "old_api": null,
          "new_api": "msg_Warn",
          "old_text": null,
          "new_text": "msg_Warn(vd, \"could not blit surface (error %li)\", hr)",
          "old_line_content": "                                             &sys->sys.rect_src_clipped,",
          "new_line_content": "            msg_Warn(vd, \"could not blit surface (error %li)\", hr);",
          "content_same": false
        },
        {
          "line": 836,
          "old_api": null,
          "new_api": "DirectXCreateClipper",
          "old_text": null,
          "new_text": "DirectXCreateClipper(vd)",
          "old_line_content": "    sys->display = ptr;",
          "new_line_content": "    DirectXCreateClipper(vd);",
          "content_same": false
        },
        {
          "line": 325,
          "old_api": null,
          "new_api": "DirectXLock",
          "old_text": null,
          "new_text": "DirectXLock(picture)",
          "old_line_content": "        if (hr != DD_OK)",
          "new_line_content": "    DirectXLock(picture);",
          "content_same": false
        },
        {
          "line": 840,
          "old_api": null,
          "new_api": "DirectXFindColorkey",
          "old_text": null,
          "new_text": "DirectXFindColorkey(vd, &sys->i_colorkey)",
          "old_line_content": "",
          "new_line_content": "    sys->i_rgb_colorkey = DirectXFindColorkey(vd, &sys->i_colorkey);",
          "content_same": false
        },
        {
          "line": 1354,
          "old_api": null,
          "new_api": "AlignRect",
          "old_text": null,
          "new_text": "AlignRect(&src, sys->sys.i_align_src_boundary, sys->sys.i_align_src_size)",
          "old_line_content": "        src.top    = vd->source.i_y_offset;",
          "new_line_content": "        AlignRect(&src, sys->sys.i_align_src_boundary, sys->sys.i_align_src_size);",
          "content_same": false
        },
        {
          "line": 333,
          "old_api": null,
          "new_api": "SetClassLongPtr",
          "old_text": null,
          "new_text": "SetClassLongPtr(sys->sys.hvideownd, GCLP_HBRBACKGROUND, (LONG_PTR)brush)",
          "old_line_content": "        if (sys->sys.use_overlay) {",
          "new_line_content": "            SetClassLongPtr(sys->sys.hvideownd, GCLP_HBRBACKGROUND, (LONG_PTR)brush);",
          "content_same": false
        },
        {
          "line": 849,
          "old_api": null,
          "new_api": "IDirectDrawClipper_Release",
          "old_text": null,
          "new_text": "IDirectDrawClipper_Release(sys->clipper)",
          "old_line_content": "    vout_display_sys_t *sys = vd->sys;",
          "new_line_content": "        IDirectDrawClipper_Release(sys->clipper);",
          "content_same": false
        },
        {
          "line": 338,
          "old_api": null,
          "new_api": "Manage",
          "old_text": null,
          "new_text": "Manage(vd)",
          "old_line_content": "    }",
          "new_line_content": "    Manage(vd);",
          "content_same": false
        },
        {
          "line": 1361,
          "old_api": null,
          "new_api": "vout_display_PlacePicture",
          "old_text": null,
          "new_text": "vout_display_PlacePicture(&place, &vd->source, &cfg)",
          "old_line_content": "        cfg.display.height = sys->sys.rect_display.bottom;",
          "new_line_content": "        vout_display_PlacePicture(&place, &vd->source, &cfg);",
          "content_same": false
        },
        {
          "line": 347,
          "old_api": null,
          "new_api": "va_arg",
          "old_text": null,
          "new_text": "va_arg(args, const vout_display_cfg_t *)",
          "old_line_content": "    switch (query) {",
          "new_line_content": "        const vout_display_cfg_t *cfg = va_arg(args, const vout_display_cfg_t *);",
          "content_same": false
        },
        {
          "line": 348,
          "old_api": null,
          "new_api": "va_arg",
          "old_text": null,
          "new_text": "va_arg(args, video_format_t *)",
          "old_line_content": "    case VOUT_DISPLAY_RESET_PICTURES:",
          "new_line_content": "        video_format_t *fmt = va_arg(args, video_format_t *);",
          "content_same": false
        },
        {
          "line": 349,
          "old_api": null,
          "new_api": "DirectXClose",
          "old_text": null,
          "new_text": "DirectXClose(vd)",
          "old_line_content": "    {",
          "new_line_content": "        DirectXClose(vd);",
          "content_same": false
        },
        {
          "line": 353,
          "old_api": null,
          "new_api": "vlc_mutex_lock",
          "old_text": null,
          "new_text": "vlc_mutex_lock(&sys->lock)",
          "old_line_content": "        /* Make sure the wallpaper is restored */",
          "new_line_content": "            vlc_mutex_lock(&sys->lock);",
          "content_same": false
        },
        {
          "line": 1380,
          "old_api": null,
          "new_api": "AlignRect",
          "old_text": null,
          "new_text": "AlignRect(&dst, sys->sys.i_align_dest_boundary, sys->sys.i_align_dest_size)",
          "old_line_content": "        dst.top    = sys->sys.rect_display.top  + place.y;",
          "new_line_content": "        AlignRect(&dst, sys->sys.i_align_dest_boundary, sys->sys.i_align_dest_size);",
          "content_same": false
        },
        {
          "line": 358,
          "old_api": null,
          "new_api": "vlc_mutex_unlock",
          "old_text": null,
          "new_text": "vlc_mutex_unlock(&sys->lock)",
          "old_line_content": "                sys->ch_wallpaper = true;",
          "new_line_content": "            vlc_mutex_unlock(&sys->lock);",
          "content_same": false
        },
        {
          "line": 360,
          "old_api": null,
          "new_api": "WallpaperChange",
          "old_text": null,
          "new_text": "WallpaperChange(vd, false)",
          "old_line_content": "            }",
          "new_line_content": "            WallpaperChange(vd, false);",
          "content_same": false
        },
        {
          "line": 880,
          "old_api": null,
          "new_api": "ZeroMemory",
          "old_text": null,
          "new_text": "ZeroMemory(&ddsd, sizeof(ddsd))",
          "old_line_content": "",
          "new_line_content": "    ZeroMemory(&ddsd, sizeof(ddsd));",
          "content_same": false
        },
        {
          "line": 1394,
          "old_api": null,
          "new_api": "ZeroMemory",
          "old_text": null,
          "new_text": "ZeroMemory(&ddofx, sizeof(ddofx))",
          "old_line_content": "",
          "new_line_content": "    ZeroMemory(&ddofx, sizeof(ddofx));",
          "content_same": false
        },
        {
          "line": 373,
          "old_api": null,
          "new_api": "CommonManage",
          "old_text": null,
          "new_text": "CommonManage(vd)",
          "old_line_content": "{",
          "new_line_content": "    CommonManage(vd);",
          "content_same": false
        },
        {
          "line": 1399,
          "old_api": null,
          "new_api": "IDirectDrawSurface2_UpdateOverlay",
          "old_text": null,
          "new_text": "IDirectDrawSurface2_UpdateOverlay(surface,\n                                                   &src, sys->display, &dst,\n                                                   DDOVER_SHOW | DDOVER_KEYDESTOVERRIDE | DDOVER_DDFX,\n                                                   &ddofx)",
          "old_line_content": "    ddofx.dckDestColorkey.dwColorSpaceLowValue = sys->i_colorkey;",
          "new_line_content": "    HRESULT hr = IDirectDrawSurface2_UpdateOverlay(surface,",
          "content_same": false
        },
        {
          "line": 378,
          "old_api": null,
          "new_api": "DirectXUpdateOverlay",
          "old_text": null,
          "new_text": "DirectXUpdateOverlay(vd, NULL)",
          "old_line_content": "    if (sys->sys.changes & DX_POSITION_CHANGE) {",
          "new_line_content": "            DirectXUpdateOverlay(vd, NULL);",
          "content_same": false
        },
        {
          "line": 1406,
          "old_api": null,
          "new_api": "msg_Warn",
          "old_text": null,
          "new_text": "msg_Warn(vd, \"DirectDrawUpdateOverlay cannot move/resize overlay. (hr=0x%lX)\", hr)",
          "old_line_content": "    sys->restore_overlay = hr != DD_OK;",
          "new_line_content": "        msg_Warn(vd, \"DirectDrawUpdateOverlay cannot move/resize overlay. (hr=0x%lX)\", hr);",
          "content_same": false
        },
        {
          "line": 383,
          "old_api": null,
          "new_api": "vout_display_SendEventPicturesInvalid",
          "old_text": null,
          "new_text": "vout_display_SendEventPicturesInvalid(vd)",
          "old_line_content": "        /* Check if we are still on the same monitor */",
          "new_line_content": "            vout_display_SendEventPicturesInvalid(vd);",
          "content_same": false
        },
        {
          "line": 390,
          "old_api": null,
          "new_api": "vlc_mutex_lock",
          "old_text": null,
          "new_text": "vlc_mutex_lock(&sys->lock)",
          "old_line_content": "    }",
          "new_line_content": "    vlc_mutex_lock(&sys->lock);",
          "content_same": false
        },
        {
          "line": 394,
          "old_api": null,
          "new_api": "vlc_mutex_unlock",
          "old_text": null,
          "new_text": "vlc_mutex_unlock(&sys->lock)",
          "old_line_content": "    const bool ch_wallpaper = sys->ch_wallpaper;",
          "new_line_content": "    vlc_mutex_unlock(&sys->lock);",
          "content_same": false
        },
        {
          "line": 1420,
          "old_api": null,
          "new_api": "_T",
          "old_text": null,
          "new_text": "_T(\"Progman\")",
          "old_line_content": "    if (!sys->use_wallpaper == !use_wallpaper)",
          "new_line_content": "    HWND hwnd = FindWindow(_T(\"Progman\"), NULL);",
          "content_same": false
        },
        {
          "line": 909,
          "old_api": null,
          "new_api": "IDirectDraw2_CreateSurface",
          "old_text": null,
          "new_text": "IDirectDraw2_CreateSurface(sys->ddobject, &ddsd, &surface_v1, NULL)",
          "old_line_content": "",
          "new_line_content": "    HRESULT hr = IDirectDraw2_CreateSurface(sys->ddobject, &ddsd, &surface_v1, NULL);",
          "content_same": false
        },
        {
          "line": 1422,
          "old_api": null,
          "new_api": "_T",
          "old_text": null,
          "new_text": "_T(\"SHELLDLL_DefView\")",
          "old_line_content": "",
          "new_line_content": "        hwnd = FindWindowEx(hwnd, NULL, _T(\"SHELLDLL_DefView\"), NULL);",
          "content_same": false
        },
        {
          "line": 1424,
          "old_api": null,
          "new_api": "_T",
          "old_text": null,
          "new_text": "_T(\"SysListView32\")",
          "old_line_content": "    if (hwnd)",
          "new_line_content": "        hwnd = FindWindowEx(hwnd, NULL, _T(\"SysListView32\"), NULL);",
          "content_same": false
        },
        {
          "line": 401,
          "old_api": null,
          "new_api": "DirectXUpdateOverlay",
          "old_text": null,
          "new_text": "DirectXUpdateOverlay(vd, NULL)",
          "old_line_content": "",
          "new_line_content": "        DirectXUpdateOverlay(vd, NULL);",
          "content_same": false
        },
        {
          "line": 1426,
          "old_api": null,
          "new_api": "msg_Warn",
          "old_text": null,
          "new_text": "msg_Warn(vd, \"couldn't find \\\"SysListView32\\\" window, \"\n                     \"wallpaper mode not supported\")",
          "old_line_content": "    if (hwnd)",
          "new_line_content": "        msg_Warn(vd, \"couldn't find \\\"SysListView32\\\" window, \"",
          "content_same": false
        },
        {
          "line": 917,
          "old_api": null,
          "new_api": "msg_Dbg",
          "old_text": null,
          "new_text": "msg_Dbg(vd, \"failed to create a DirectDrawSurface (error %li)\", hr)",
          "old_line_content": "    }",
          "new_line_content": "        msg_Dbg(vd, \"failed to create a DirectDrawSurface (error %li)\", hr);",
          "content_same": false
        },
        {
          "line": 1431,
          "old_api": null,
          "new_api": "msg_Dbg",
          "old_text": null,
          "new_text": "msg_Dbg(vd, \"wallpaper mode %s\", use_wallpaper ? \"enabled\" : \"disabled\")",
          "old_line_content": "        return;",
          "new_line_content": "    msg_Dbg(vd, \"wallpaper mode %s\", use_wallpaper ? \"enabled\" : \"disabled\");",
          "content_same": false
        },
        {
          "line": 922,
          "old_api": null,
          "new_api": "IDirectDrawSurface_QueryInterface",
          "old_text": null,
          "new_text": "IDirectDrawSurface_QueryInterface(surface_v1,\n                                           &IID_IDirectDrawSurface2,\n                                           (LPVOID *)surface)",
          "old_line_content": "    }",
          "new_line_content": "    hr = IDirectDrawSurface_QueryInterface(surface_v1,",
          "content_same": false
        },
        {
          "line": 1435,
          "old_api": null,
          "new_api": "ListView_GetBkColor",
          "old_text": null,
          "new_text": "ListView_GetBkColor(hwnd)",
          "old_line_content": "    sys->use_wallpaper = use_wallpaper;",
          "new_line_content": "        sys->color_bkg    = ListView_GetBkColor(hwnd);",
          "content_same": false
        },
        {
          "line": 1436,
          "old_api": null,
          "new_api": "ListView_GetTextBkColor",
          "old_text": null,
          "new_text": "ListView_GetTextBkColor(hwnd)",
          "old_line_content": "",
          "new_line_content": "        sys->color_bkgtxt = ListView_GetTextBkColor(hwnd);",
          "content_same": false
        },
        {
          "line": 927,
          "old_api": null,
          "new_api": "msg_Err",
          "old_text": null,
          "new_text": "msg_Err(vd, \"cannot query IDirectDrawSurface2 interface (error %li)\", hr)",
          "old_line_content": "                                           (LPVOID *)surface);",
          "new_line_content": "        msg_Err(vd, \"cannot query IDirectDrawSurface2 interface (error %li)\", hr);",
          "content_same": false
        },
        {
          "line": 418,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(!sys->ddobject)",
          "old_line_content": "{",
          "new_line_content": "    assert(!sys->ddobject);",
          "content_same": false
        },
        {
          "line": 419,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(!sys->display)",
          "old_line_content": "    vout_display_sys_t *sys = vd->sys;",
          "new_line_content": "    assert(!sys->display);",
          "content_same": false
        },
        {
          "line": 420,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(!sys->clipper)",
          "old_line_content": "",
          "new_line_content": "    assert(!sys->clipper);",
          "content_same": false
        },
        {
          "line": 934,
          "old_api": null,
          "new_api": "DirectXUpdateOverlay",
          "old_text": null,
          "new_text": "DirectXUpdateOverlay(vd, *surface)",
          "old_line_content": "    if (use_overlay) {",
          "new_line_content": "        if (DirectXUpdateOverlay(vd, *surface)) {",
          "content_same": false
        },
        {
          "line": 935,
          "old_api": null,
          "new_api": "IDirectDrawSurface2_Release",
          "old_text": null,
          "new_text": "IDirectDrawSurface2_Release(*surface)",
          "old_line_content": "        /* Check the overlay is useable as some graphics cards allow creating",
          "new_line_content": "            IDirectDrawSurface2_Release(*surface);",
          "content_same": false
        },
        {
          "line": 424,
          "old_api": null,
          "new_api": "msg_Err",
          "old_text": null,
          "new_text": "msg_Err(vd, \"cannot initialize DirectX DirectDraw\")",
          "old_line_content": "",
          "new_line_content": "        msg_Err(vd, \"cannot initialize DirectX DirectDraw\");",
          "content_same": false
        },
        {
          "line": 936,
          "old_api": null,
          "new_api": "msg_Err",
          "old_text": null,
          "new_text": "msg_Err(vd, \"overlay unuseable (might already be in use)\")",
          "old_line_content": "         * several overlays but only one can be used at one time. */",
          "new_line_content": "            msg_Err(vd, \"overlay unuseable (might already be in use)\");",
          "content_same": false
        },
        {
          "line": 1446,
          "old_api": null,
          "new_api": "InvalidateRect",
          "old_text": null,
          "new_text": "InvalidateRect(hwnd, NULL, TRUE)",
          "old_line_content": "    }",
          "new_line_content": "    InvalidateRect(hwnd, NULL, TRUE);",
          "content_same": false
        },
        {
          "line": 1447,
          "old_api": null,
          "new_api": "UpdateWindow",
          "old_text": null,
          "new_text": "UpdateWindow(hwnd)",
          "old_line_content": "",
          "new_line_content": "    UpdateWindow(hwnd);",
          "content_same": false
        },
        {
          "line": 429,
          "old_api": null,
          "new_api": "DirectXOpenDisplay",
          "old_text": null,
          "new_text": "DirectXOpenDisplay(vd)",
          "old_line_content": "    }",
          "new_line_content": "    if (DirectXOpenDisplay(vd)) {",
          "content_same": false
        },
        {
          "line": 430,
          "old_api": null,
          "new_api": "msg_Err",
          "old_text": null,
          "new_text": "msg_Err(vd, \"cannot initialize DirectX DirectDraw\")",
          "old_line_content": "",
          "new_line_content": "        msg_Err(vd, \"cannot initialize DirectX DirectDraw\");",
          "content_same": false
        },
        {
          "line": 946,
          "old_api": null,
          "new_api": "IDirectDrawSurface2_Release",
          "old_text": null,
          "new_text": "IDirectDrawSurface2_Release(surface)",
          "old_line_content": "",
          "new_line_content": "    IDirectDrawSurface2_Release(surface);",
          "content_same": false
        },
        {
          "line": 1459,
          "old_api": null,
          "new_api": "VLC_UNUSED",
          "old_text": null,
          "new_text": "VLC_UNUSED(data)",
          "old_line_content": "{",
          "new_line_content": "    VLC_UNUSED(cmd); VLC_UNUSED(oldval); VLC_UNUSED(data);",
          "content_same": false
        },
        {
          "line": 437,
          "old_api": null,
          "new_api": "msg_Err",
          "old_text": null,
          "new_text": "msg_Err(vd, \"cannot create any DirectX surface\")",
          "old_line_content": "",
          "new_line_content": "        msg_Err(vd, \"cannot create any DirectX surface\");",
          "content_same": false
        },
        {
          "line": 1461,
          "old_api": null,
          "new_api": "vlc_mutex_lock",
          "old_text": null,
          "new_text": "vlc_mutex_lock(&sys->lock)",
          "old_line_content": "    vout_display_sys_t *sys = vd->sys;",
          "new_line_content": "    vlc_mutex_lock(&sys->lock);",
          "content_same": false
        },
        {
          "line": 1465,
          "old_api": null,
          "new_api": "vlc_mutex_unlock",
          "old_text": null,
          "new_text": "vlc_mutex_unlock(&sys->lock)",
          "old_line_content": "    const bool ch_wallpaper = !sys->wallpaper_requested != !newval.b_bool;",
          "new_line_content": "    vlc_mutex_unlock(&sys->lock);",
          "content_same": false
        },
        {
          "line": 443,
          "old_api": null,
          "new_api": "DirectXUpdateOverlay",
          "old_text": null,
          "new_text": "DirectXUpdateOverlay(vd, NULL)",
          "old_line_content": "",
          "new_line_content": "        DirectXUpdateOverlay(vd, NULL);",
          "content_same": false
        },
        {
          "line": 961,
          "old_api": null,
          "new_api": "ZeroMemory",
          "old_text": null,
          "new_text": "ZeroMemory(ddsd, sizeof(*ddsd))",
          "old_line_content": "    if (!ddsd)",
          "new_line_content": "    ZeroMemory(ddsd, sizeof(*ddsd));",
          "content_same": false
        },
        {
          "line": 963,
          "old_api": null,
          "new_api": "IDirectDrawSurface2_Lock",
          "old_text": null,
          "new_text": "IDirectDrawSurface2_Lock(surface, NULL, ddsd, DDLOCK_NOSYSLOCK | DDLOCK_WAIT, NULL)",
          "old_line_content": "",
          "new_line_content": "    hr = IDirectDrawSurface2_Lock(surface, NULL, ddsd, DDLOCK_NOSYSLOCK | DDLOCK_WAIT, NULL);",
          "content_same": false
        },
        {
          "line": 452,
          "old_api": null,
          "new_api": "vlc_fourcc_IsYUV",
          "old_text": null,
          "new_text": "vlc_fourcc_IsYUV(fmt->i_chroma)",
          "old_line_content": "        const char *fallback;",
          "new_line_content": "        else if (vlc_fourcc_IsYUV(fmt->i_chroma))",
          "content_same": false
        },
        {
          "line": 456,
          "old_api": null,
          "new_api": "EventThreadUpdateTitle",
          "old_text": null,
          "new_text": "EventThreadUpdateTitle(sys->sys.event, fallback)",
          "old_line_content": "            fallback = VOUT_TITLE \" (hardware YUV DirectX output)\";",
          "new_line_content": "        EventThreadUpdateTitle(sys->sys.event, fallback);",
          "content_same": false
        },
        {
          "line": 968,
          "old_api": null,
          "new_api": "IDirectDrawSurface2_Lock",
          "old_text": null,
          "new_text": "IDirectDrawSurface2_Lock(surface, NULL, ddsd, DDLOCK_WAIT, NULL)",
          "old_line_content": "        if (hr == DDERR_INVALIDPARAMS) {",
          "new_line_content": "            hr = IDirectDrawSurface2_Lock(surface, NULL, ddsd, DDLOCK_WAIT, NULL);",
          "content_same": false
        },
        {
          "line": 1485,
          "old_api": null,
          "new_api": "VLC_UNUSED",
          "old_text": null,
          "new_text": "VLC_UNUSED(hmon)",
          "old_line_content": "{",
          "new_line_content": "    VLC_UNUSED(guid); VLC_UNUSED(desc); VLC_UNUSED(hmon);",
          "content_same": false
        },
        {
          "line": 463,
          "old_api": null,
          "new_api": "DirectXDestroyPool",
          "old_text": null,
          "new_text": "DirectXDestroyPool(vd)",
          "old_line_content": "}",
          "new_line_content": "    DirectXDestroyPool(vd);",
          "content_same": false
        },
        {
          "line": 464,
          "old_api": null,
          "new_api": "DirectXCloseDisplay",
          "old_text": null,
          "new_text": "DirectXCloseDisplay(vd)",
          "old_line_content": "static void DirectXClose(vout_display_t *vd)",
          "new_line_content": "    DirectXCloseDisplay(vd);",
          "content_same": false
        },
        {
          "line": 465,
          "old_api": null,
          "new_api": "DirectXCloseDDraw",
          "old_text": null,
          "new_text": "DirectXCloseDDraw(vd)",
          "old_line_content": "{",
          "new_line_content": "    DirectXCloseDDraw(vd);",
          "content_same": false
        },
        {
          "line": 977,
          "old_api": null,
          "new_api": "IDirectDrawSurface2_Restore",
          "old_text": null,
          "new_text": "IDirectDrawSurface2_Restore(front_surface)",
          "old_line_content": "            /* When using overlays with back-buffers, we need to restore",
          "new_line_content": "                IDirectDrawSurface2_Restore(front_surface);",
          "content_same": false
        },
        {
          "line": 979,
          "old_api": null,
          "new_api": "IDirectDrawSurface2_Restore",
          "old_text": null,
          "new_text": "IDirectDrawSurface2_Restore(surface)",
          "old_line_content": "            if (front_surface != surface)",
          "new_line_content": "                IDirectDrawSurface2_Restore(surface);",
          "content_same": false
        },
        {
          "line": 1489,
          "old_api": null,
          "new_api": "xrealloc",
          "old_text": null,
          "new_text": "xrealloc(ctx->descs, (ctx->count + 1) * sizeof(char *))",
          "old_line_content": "",
          "new_line_content": "    ctx->descs = xrealloc(ctx->descs, (ctx->count + 1) * sizeof(char *));",
          "content_same": false
        },
        {
          "line": 981,
          "old_api": null,
          "new_api": "IDirectDrawSurface2_Lock",
          "old_text": null,
          "new_text": "IDirectDrawSurface2_Lock(surface, NULL, ddsd, DDLOCK_WAIT, NULL)",
          "old_line_content": "            else",
          "new_line_content": "            hr = IDirectDrawSurface2_Lock(surface, NULL, ddsd, DDLOCK_WAIT, NULL);",
          "content_same": false
        },
        {
          "line": 1502,
          "old_api": null,
          "new_api": "xmalloc",
          "old_text": null,
          "new_text": "xmalloc(sizeof(char *))",
          "old_line_content": "{",
          "new_line_content": "    ctx.values = xmalloc(sizeof(char *));",
          "content_same": false
        },
        {
          "line": 991,
          "old_api": null,
          "new_api": "VLC_UNUSED",
          "old_text": null,
          "new_text": "VLC_UNUSED(front_surface)",
          "old_line_content": "static void DirectXUnlockSurface(LPDIRECTDRAWSURFACE2 front_surface,",
          "new_line_content": "    VLC_UNUSED(front_surface);",
          "content_same": false
        },
        {
          "line": 992,
          "old_api": null,
          "new_api": "IDirectDrawSurface2_Unlock",
          "old_text": null,
          "new_text": "IDirectDrawSurface2_Unlock(surface, NULL)",
          "old_line_content": "                                 LPDIRECTDRAWSURFACE2 surface)",
          "new_line_content": "    IDirectDrawSurface2_Unlock(surface, NULL);",
          "content_same": false
        },
        {
          "line": 1503,
          "old_api": null,
          "new_api": "xmalloc",
          "old_text": null,
          "new_text": "xmalloc(sizeof(char *))",
          "old_line_content": "    enum_context_t ctx;",
          "new_line_content": "    ctx.descs = xmalloc(sizeof(char *));",
          "content_same": false
        },
        {
          "line": 1504,
          "old_api": null,
          "new_api": "strdup",
          "old_text": null,
          "new_text": "strdup(\"\")",
          "old_line_content": "",
          "new_line_content": "    ctx.values[0] = strdup(\"\");",
          "content_same": false
        },
        {
          "line": 997,
          "old_api": null,
          "new_api": "DirectXLockSurface",
          "old_text": null,
          "new_text": "DirectXLockSurface(front_surface, surface, NULL)",
          "old_line_content": "static int DirectXCheckLockingSurface(LPDIRECTDRAWSURFACE2 front_surface,",
          "new_line_content": "    if (DirectXLockSurface(front_surface, surface, NULL))",
          "content_same": false
        },
        {
          "line": 1509,
          "old_api": null,
          "new_api": "_T",
          "old_text": null,
          "new_text": "_T(\"DDRAW.DLL\")",
          "old_line_content": "    ctx.count = 1;",
          "new_line_content": "    HINSTANCE hddraw_dll = LoadLibrary(_T(\"DDRAW.DLL\"));",
          "content_same": false
        },
        {
          "line": 487,
          "old_api": null,
          "new_api": "msg_Dbg",
          "old_text": null,
          "new_text": "msg_Dbg(vd, \"DirectXEnumCallback: %s, %s\", psz_desc, psz_drivername)",
          "old_line_content": "    char *psz_drivername = drivername;",
          "new_line_content": "    msg_Dbg(vd, \"DirectXEnumCallback: %s, %s\", psz_desc, psz_drivername);",
          "content_same": false
        },
        {
          "line": 489,
          "old_api": null,
          "new_api": "var_GetString",
          "old_text": null,
          "new_text": "var_GetString(vd, \"directx-device\")",
          "old_line_content": "",
          "new_line_content": "    char *device = var_GetString(vd, \"directx-device\");",
          "content_same": false
        },
        {
          "line": 1513,
          "old_api": null,
          "new_api": "HRESULT (WINAPI *OurDirectDrawEnumerateEx)(LPDDENUMCALLBACKEXA,\n                                                   LPVOID, DWORD)",
          "old_text": null,
          "new_text": "HRESULT (WINAPI *OurDirectDrawEnumerateEx)(LPDDENUMCALLBACKEXA,\n                                                   LPVOID, DWORD)",
          "old_line_content": "    if (hddraw_dll != NULL)",
          "new_line_content": "        HRESULT (WINAPI *OurDirectDrawEnumerateEx)(LPDDENUMCALLBACKEXA,",
          "content_same": false
        },
        {
          "line": 1515,
          "old_api": null,
          "new_api": "GetProcAddress",
          "old_text": null,
          "new_text": "GetProcAddress(hddraw_dll, DIRECTDRAWENUMERATEEX_NAME)",
          "old_line_content": "        /* Enumerate displays */",
          "new_line_content": "              (void *)GetProcAddress(hddraw_dll, DIRECTDRAWENUMERATEEX_NAME);",
          "content_same": false
        },
        {
          "line": 1517,
          "old_api": null,
          "new_api": "OurDirectDrawEnumerateEx",
          "old_text": null,
          "new_text": "OurDirectDrawEnumerateEx(DirectXEnumCallback2, &ctx,\n                                     DDENUM_ATTACHEDSECONDARYDEVICES)",
          "old_line_content": "                                                   LPVOID, DWORD) =",
          "new_line_content": "            OurDirectDrawEnumerateEx(DirectXEnumCallback2, &ctx,",
          "content_same": false
        },
        {
          "line": 1519,
          "old_api": null,
          "new_api": "FreeLibrary",
          "old_text": null,
          "new_text": "FreeLibrary(hddraw_dll)",
          "old_line_content": "        if (OurDirectDrawEnumerateEx != NULL)",
          "new_line_content": "        FreeLibrary(hddraw_dll);",
          "content_same": false
        },
        {
          "line": 496,
          "old_api": null,
          "new_api": "GetMonitorInfoA",
          "old_text": null,
          "new_text": "GetMonitorInfoA(hmon, &monitor_info)",
          "old_line_content": "        MONITORINFO monitor_info;",
          "new_line_content": "        if (GetMonitorInfoA(hmon, &monitor_info)) {",
          "content_same": false
        },
        {
          "line": 500,
          "old_api": null,
          "new_api": "GetWindowRect",
          "old_text": null,
          "new_text": "GetWindowRect(sys->sys.hwnd, &rect)",
          "old_line_content": "            RECT rect;",
          "new_line_content": "            GetWindowRect(sys->sys.hwnd, &rect);",
          "content_same": false
        },
        {
          "line": 501,
          "old_api": null,
          "new_api": "IntersectRect",
          "old_text": null,
          "new_text": "IntersectRect(&rect, &rect, &monitor_info.rcWork)",
          "old_line_content": "",
          "new_line_content": "            if (!IntersectRect(&rect, &rect, &monitor_info.rcWork)) {",
          "content_same": false
        },
        {
          "line": 1014,
          "old_api": null,
          "new_api": "MAKEFOURCC",
          "old_text": null,
          "new_text": "MAKEFOURCC('Y','U','Y','2')",
          "old_line_content": "static DWORD DirectXGetFourcc(vlc_fourcc_t codec)",
          "new_line_content": "        { VLC_CODEC_YUYV, MAKEFOURCC('Y','U','Y','2') },",
          "content_same": false
        },
        {
          "line": 1015,
          "old_api": null,
          "new_api": "MAKEFOURCC",
          "old_text": null,
          "new_text": "MAKEFOURCC('U','Y','V','Y')",
          "old_line_content": "{",
          "new_line_content": "        { VLC_CODEC_UYVY, MAKEFOURCC('U','Y','V','Y') },",
          "content_same": false
        },
        {
          "line": 1016,
          "old_api": null,
          "new_api": "MAKEFOURCC",
          "old_text": null,
          "new_text": "MAKEFOURCC('Y','V','Y','U')",
          "old_line_content": "    static const dx_format_t dx_formats[] = {",
          "new_line_content": "        { VLC_CODEC_YVYU, MAKEFOURCC('Y','V','Y','U') },",
          "content_same": false
        },
        {
          "line": 506,
          "old_api": null,
          "new_api": "SetWindowPos",
          "old_text": null,
          "new_text": "SetWindowPos(sys->sys.hwnd, NULL,\n                             rect.left, rect.top, 0, 0,\n                             SWP_NOSIZE | SWP_NOZORDER | SWP_NOACTIVATE)",
          "old_line_content": "                rect.top = monitor_info.rcWork.top;",
          "new_line_content": "                SetWindowPos(sys->sys.hwnd, NULL,",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 509,
          "old_api": "SetWindowPos",
          "new_api": null,
          "old_text": "SetWindowPos(sys->sys.hwnd, NULL,\n                             rect.left, rect.top, 0, 0,\n                             SWP_NOSIZE | SWP_NOZORDER | SWP_NOACTIVATE)",
          "new_text": null,
          "old_line_content": "                SetWindowPos(sys->sys.hwnd, NULL,",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 521,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(sys->display_driver)",
          "new_text": null,
          "old_line_content": "        free(sys->display_driver);",
          "new_line_content": "            *sys->display_driver = *guid;",
          "content_same": false
        },
        {
          "line": 522,
          "old_api": "malloc",
          "new_api": null,
          "old_text": "malloc(sizeof(*guid))",
          "new_text": null,
          "old_line_content": "        sys->display_driver = malloc(sizeof(*guid));",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1039,
          "old_api": "var_InheritBool",
          "new_api": null,
          "old_text": "var_InheritBool(vd, \"directx-3buffering\")",
          "new_text": null,
          "old_line_content": "    bool allow_3buf    = var_InheritBool(vd, \"directx-3buffering\");",
          "new_line_content": "     * into it because accessing video memory directly is way to slow (remember",
          "content_same": false
        },
        {
          "line": 542,
          "old_api": "ZeroMemory",
          "new_api": null,
          "old_text": "ZeroMemory(&ddcaps, sizeof(ddcaps))",
          "new_text": null,
          "old_line_content": "    ZeroMemory(&ddcaps, sizeof(ddcaps));",
          "new_line_content": "    if (hr != DD_OK) {",
          "content_same": false
        },
        {
          "line": 544,
          "old_api": "IDirectDraw2_GetCaps",
          "new_api": null,
          "old_text": "IDirectDraw2_GetCaps(sys->ddobject, &ddcaps, NULL)",
          "new_text": null,
          "old_line_content": "    HRESULT hr = IDirectDraw2_GetCaps(sys->ddobject, &ddcaps, NULL);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 546,
          "old_api": "msg_Warn",
          "new_api": null,
          "old_text": "msg_Warn(vd, \"cannot get caps\")",
          "new_text": null,
          "old_line_content": "        msg_Warn(vd, \"cannot get caps\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1058,
          "old_api": "msg_Dbg",
          "new_api": null,
          "old_text": "msg_Dbg(vd, \"YUV overlay surface (%4.4s) created successfully\", (const char *)&fourcc)",
          "new_text": null,
          "old_line_content": "    msg_Dbg(vd, \"YUV overlay surface (%4.4s) created successfully\", (const char *)&fourcc);",
          "new_line_content": "    LPDIRECTDRAWSURFACE2 surface;",
          "content_same": false
        },
        {
          "line": 1065,
          "old_api": "IDirectDrawSurface2_GetAttachedSurface",
          "new_api": null,
          "old_text": "IDirectDrawSurface2_GetAttachedSurface(front_surface, &dds_caps, &surface)",
          "new_text": null,
          "old_line_content": "    if (IDirectDrawSurface2_GetAttachedSurface(front_surface, &dds_caps, &surface) != DD_OK) {",
          "new_line_content": "        surface = front_surface;",
          "content_same": false
        },
        {
          "line": 1066,
          "old_api": "msg_Warn",
          "new_api": null,
          "old_text": "msg_Warn(vd, \"Failed to get surface back buffer\")",
          "new_text": null,
          "old_line_content": "        msg_Warn(vd, \"Failed to get surface back buffer\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1071,
          "old_api": "DirectXCheckLockingSurface",
          "new_api": null,
          "old_text": "DirectXCheckLockingSurface(front_surface, surface)",
          "new_text": null,
          "old_line_content": "    if (DirectXCheckLockingSurface(front_surface, surface)) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1072,
          "old_api": "DirectXDestroySurface",
          "new_api": null,
          "old_text": "DirectXDestroySurface(front_surface)",
          "new_text": null,
          "old_line_content": "        DirectXDestroySurface(front_surface);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 571,
          "old_api": "msg_Dbg",
          "new_api": null,
          "old_text": "msg_Dbg(vd, \"DirectDraw Capabilities: overlay=%i yuvoverlay=%i \"\n                \"can_deinterlace_overlay=%i colorkey=%i stretch=%i \"\n                \"bltfourcc=%i\",\n                has_overlay, has_overlay_fourcc, can_deinterlace,\n                has_color_key, can_stretch, sys->can_blit_fourcc)",
          "new_text": null,
          "old_line_content": "    msg_Dbg(vd, \"DirectDraw Capabilities: overlay=%i yuvoverlay=%i \"",
          "new_line_content": "                has_overlay, has_overlay_fourcc, can_deinterlace,",
          "content_same": false
        },
        {
          "line": 1089,
          "old_api": "var_InheritBool",
          "new_api": null,
          "old_text": "var_InheritBool(vd, \"directx-use-sysmem\")",
          "new_text": null,
          "old_line_content": "    bool allow_sysmem  = var_InheritBool(vd, \"directx-use-sysmem\");",
          "new_line_content": "     * surface. This surface will reside in video memory because there's a",
          "content_same": false
        },
        {
          "line": 587,
          "old_api": "msg_Dbg",
          "new_api": null,
          "old_text": "msg_Dbg(vd,\n                \"align_boundary_src=%i,%i align_boundary_dest=%i,%i \"\n                \"align_size_src=%i,%i align_size_dest=%i,%i\",\n                align_boundary_src,  vd->sys->sys.i_align_src_boundary,\n                align_boundary_dest, vd->sys->sys.i_align_dest_boundary,\n                align_size_src,  vd->sys->sys.i_align_src_size,\n                align_size_dest, vd->sys->sys.i_align_dest_size)",
          "new_text": null,
          "old_line_content": "        msg_Dbg(vd,",
          "new_line_content": "                align_boundary_src,  vd->sys->sys.i_align_src_boundary,",
          "content_same": false
        },
        {
          "line": 1108,
          "old_api": "IDirectDraw2_GetFourCCCodes",
          "new_api": null,
          "old_text": "IDirectDraw2_GetFourCCCodes(sys->ddobject, &count, list)",
          "new_text": null,
          "old_line_content": "    if (IDirectDraw2_GetFourCCCodes(sys->ddobject, &count, list) != DD_OK) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1109,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(list)",
          "new_text": null,
          "old_line_content": "        free(list);",
          "new_line_content": "    unsigned index;",
          "content_same": false
        },
        {
          "line": 1117,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(list)",
          "new_text": null,
          "old_line_content": "    free(list);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 608,
          "old_api": "GetProcAddress",
          "new_api": null,
          "old_text": "GetProcAddress(sys->hddraw_dll, \"DirectDrawCreate\")",
          "new_text": null,
          "old_line_content": "        (void *)GetProcAddress(sys->hddraw_dll, \"DirectDrawCreate\");",
          "new_line_content": "        return VLC_EGENERIC;",
          "content_same": false
        },
        {
          "line": 610,
          "old_api": "msg_Err",
          "new_api": null,
          "old_text": "msg_Err(vd, \"DirectXInitDDraw failed GetProcAddress\")",
          "new_text": null,
          "old_line_content": "        msg_Err(vd, \"DirectXInitDDraw failed GetProcAddress\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1123,
          "old_api": "DirectXCreateSurface",
          "new_api": null,
          "old_text": "DirectXCreateSurface(vd, &surface, fmt, fourcc, false, allow_sysmem, 0)",
          "new_text": null,
          "old_line_content": "    if (DirectXCreateSurface(vd, &surface, fmt, fourcc, false, allow_sysmem, 0))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1127,
          "old_api": "DirectXCheckLockingSurface",
          "new_api": null,
          "old_text": "DirectXCheckLockingSurface(surface, surface)",
          "new_text": null,
          "old_line_content": "    if (DirectXCheckLockingSurface(surface, surface)) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1128,
          "old_api": "DirectXDestroySurface",
          "new_api": null,
          "old_text": "DirectXDestroySurface(surface)",
          "new_text": null,
          "old_line_content": "        DirectXDestroySurface(surface);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 615,
          "old_api": "HRESULT (WINAPI *OurDirectDrawEnumerateEx)(LPDDENUMCALLBACKEXA, LPVOID, DWORD)",
          "new_api": null,
          "old_text": "HRESULT (WINAPI *OurDirectDrawEnumerateEx)(LPDDENUMCALLBACKEXA, LPVOID, DWORD)",
          "new_text": null,
          "old_line_content": "    HRESULT (WINAPI *OurDirectDrawEnumerateEx)(LPDDENUMCALLBACKEXA, LPVOID, DWORD);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 622,
          "old_api": "msg_Dbg",
          "new_api": null,
          "old_text": "msg_Dbg(vd, \"directx-device: %s\", device)",
          "new_text": null,
          "old_line_content": "            msg_Dbg(vd, \"directx-device: %s\", device);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 629,
          "old_api": "OurDirectDrawEnumerateEx",
          "new_api": null,
          "old_text": "OurDirectDrawEnumerateEx(DirectXOpenDDrawCallback,\n                                 vd, DDENUM_ATTACHEDSECONDARYDEVICES)",
          "new_text": null,
          "old_line_content": "        OurDirectDrawEnumerateEx(DirectXOpenDDrawCallback,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1143,
          "old_api": "var_InheritBool",
          "new_api": null,
          "old_text": "var_InheritBool(vd, \"directx-use-sysmem\")",
          "new_text": null,
          "old_line_content": "    bool allow_sysmem  = var_InheritBool(vd, \"directx-use-sysmem\");",
          "new_line_content": "    DDPIXELFORMAT ddpfPixelFormat;",
          "content_same": false
        },
        {
          "line": 635,
          "old_api": "OurDirectDrawCreate",
          "new_api": null,
          "old_text": "OurDirectDrawCreate(sys->display_driver, &ddobject, NULL)",
          "new_text": null,
          "old_line_content": "    hr = OurDirectDrawCreate(sys->display_driver, &ddobject, NULL);",
          "new_line_content": "        return VLC_EGENERIC;",
          "content_same": false
        },
        {
          "line": 637,
          "old_api": "msg_Err",
          "new_api": null,
          "old_text": "msg_Err(vd, \"DirectXInitDDraw cannot initialize DDraw\")",
          "new_text": null,
          "old_line_content": "        msg_Err(vd, \"DirectXInitDDraw cannot initialize DDraw\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1150,
          "old_api": "IDirectDrawSurface2_GetPixelFormat",
          "new_api": null,
          "old_text": "IDirectDrawSurface2_GetPixelFormat(sys->display, &ddpfPixelFormat)",
          "new_text": null,
          "old_line_content": "    IDirectDrawSurface2_GetPixelFormat(sys->display, &ddpfPixelFormat);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 649,
          "old_api": "msg_Err",
          "new_api": null,
          "old_text": "msg_Err(vd, \"cannot get IDirectDraw2 interface\")",
          "new_text": null,
          "old_line_content": "        msg_Err(vd, \"cannot get IDirectDraw2 interface\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 657,
          "old_api": "IDirectDraw2_SetCooperativeLevel",
          "new_api": null,
          "old_text": "IDirectDraw2_SetCooperativeLevel(sys->ddobject, NULL, DDSCL_NORMAL)",
          "new_text": null,
          "old_line_content": "    hr = IDirectDraw2_SetCooperativeLevel(sys->ddobject, NULL, DDSCL_NORMAL);",
          "new_line_content": "        return VLC_EGENERIC;",
          "content_same": false
        },
        {
          "line": 659,
          "old_api": "msg_Err",
          "new_api": null,
          "old_text": "msg_Err(vd, \"cannot set direct draw cooperative level\")",
          "new_text": null,
          "old_line_content": "        msg_Err(vd, \"cannot set direct draw cooperative level\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1171,
          "old_api": "msg_Err",
          "new_api": null,
          "old_text": "msg_Err(vd, \"unknown screen depth\")",
          "new_text": null,
          "old_line_content": "        msg_Err(vd, \"unknown screen depth\");",
          "new_line_content": "    fmt->i_rmask = ddpfPixelFormat.dwRBitMask;",
          "content_same": false
        },
        {
          "line": 667,
          "old_api": "GetMonitorInfoA",
          "new_api": null,
          "old_text": "GetMonitorInfoA(vd->sys->hmonitor, &monitor_info)",
          "new_text": null,
          "old_line_content": "        GetMonitorInfoA(vd->sys->hmonitor, &monitor_info);",
          "new_line_content": "        sys->sys.rect_display.left   = 0;",
          "content_same": false
        },
        {
          "line": 1180,
          "old_api": "DirectXCreateSurface",
          "new_api": null,
          "old_text": "DirectXCreateSurface(vd, &surface, fmt, 0, false, allow_sysmem, 0)",
          "new_text": null,
          "old_line_content": "    int ret = DirectXCreateSurface(vd, &surface, fmt, 0, false, allow_sysmem, 0);",
          "new_line_content": "    if (ret)",
          "content_same": false
        },
        {
          "line": 672,
          "old_api": "GetSystemMetrics",
          "new_api": null,
          "old_text": "GetSystemMetrics(SM_CXSCREEN)",
          "new_text": null,
          "old_line_content": "        sys->sys.rect_display.right  = GetSystemMetrics(SM_CXSCREEN);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1187,
          "old_api": "DirectXCheckLockingSurface",
          "new_api": null,
          "old_text": "DirectXCheckLockingSurface(surface, surface)",
          "new_text": null,
          "old_line_content": "    if (DirectXCheckLockingSurface(surface, surface)) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 676,
          "old_api": "msg_Dbg",
          "new_api": null,
          "old_text": "msg_Dbg(vd, \"screen dimensions (%lix%li,%lix%li)\",\n            sys->sys.rect_display.left,\n            sys->sys.rect_display.top,\n            sys->sys.rect_display.right,\n            sys->sys.rect_display.bottom)",
          "new_text": null,
          "old_line_content": "    msg_Dbg(vd, \"screen dimensions (%lix%li,%lix%li)\",",
          "new_line_content": "            sys->sys.rect_display.right,",
          "content_same": false
        },
        {
          "line": 1188,
          "old_api": "DirectXDestroySurface",
          "new_api": null,
          "old_text": "DirectXDestroySurface(surface)",
          "new_text": null,
          "old_line_content": "        DirectXDestroySurface(surface);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 683,
          "old_api": "DirectXGetDDrawCaps",
          "new_api": null,
          "old_text": "DirectXGetDDrawCaps(vd)",
          "new_text": null,
          "old_line_content": "    DirectXGetDDrawCaps(vd);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 692,
          "old_api": "IDirectDraw2_Release",
          "new_api": null,
          "old_text": "IDirectDraw2_Release(sys->ddobject)",
          "new_text": null,
          "old_line_content": "        IDirectDraw2_Release(sys->ddobject);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1207,
          "old_api": "calloc",
          "new_api": null,
          "old_text": "calloc(1, sizeof(*picsys))",
          "new_text": null,
          "old_line_content": "    picture_sys_t *picsys = calloc(1, sizeof(*picsys));",
          "new_line_content": "    sys->picsys = picsys;",
          "content_same": false
        },
        {
          "line": 696,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(sys->display_driver)",
          "new_text": null,
          "old_line_content": "    free(sys->display_driver);",
          "new_line_content": "    sys->hmonitor = NULL;",
          "content_same": false
        },
        {
          "line": 1208,
          "old_api": "unlikely",
          "new_api": null,
          "old_text": "unlikely(picsys == NULL)",
          "new_text": null,
          "old_line_content": "    if (unlikely(picsys == NULL))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1214,
          "old_api": "vlc_fourcc_IsYUV",
          "new_api": null,
          "old_text": "vlc_fourcc_IsYUV(fmt->i_chroma)",
          "new_text": null,
          "old_line_content": "                         vlc_fourcc_IsYUV(fmt->i_chroma) &&",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1215,
          "old_api": "var_InheritBool",
          "new_api": null,
          "old_text": "var_InheritBool(vd, \"directx-hw-yuv\")",
          "new_text": null,
          "old_line_content": "                         var_InheritBool(vd, \"directx-hw-yuv\");",
          "new_line_content": "    /* Try to use an yuv surface */",
          "content_same": false
        },
        {
          "line": 1216,
          "old_api": "var_InheritBool",
          "new_api": null,
          "old_text": "var_InheritBool(vd, \"directx-overlay\")",
          "new_text": null,
          "old_line_content": "    bool allow_overlay = var_InheritBool(vd, \"directx-overlay\");",
          "new_line_content": "    if (allow_hw_yuv) {",
          "content_same": false
        },
        {
          "line": 1220,
          "old_api": "vlc_fourcc_GetYUVFallback",
          "new_api": null,
          "old_text": "vlc_fourcc_GetYUVFallback(fmt->i_chroma)",
          "new_text": null,
          "old_line_content": "        const vlc_fourcc_t *list = vlc_fourcc_GetYUVFallback(fmt->i_chroma);",
          "new_line_content": "            for (unsigned i = 0; list[i] != 0; i++) {",
          "content_same": false
        },
        {
          "line": 1224,
          "old_api": "DirectXGetFourcc",
          "new_api": null,
          "old_text": "DirectXGetFourcc(list[i])",
          "new_text": null,
          "old_line_content": "                const DWORD fourcc = DirectXGetFourcc(list[i]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 715,
          "old_api": "IDirectDraw2_CreateClipper",
          "new_api": null,
          "old_text": "IDirectDraw2_CreateClipper(sys->ddobject, 0, &sys->clipper, NULL)",
          "new_text": null,
          "old_line_content": "    hr = IDirectDraw2_CreateClipper(sys->ddobject, 0, &sys->clipper, NULL);",
          "new_line_content": "        goto error;",
          "content_same": false
        },
        {
          "line": 717,
          "old_api": "msg_Warn",
          "new_api": null,
          "old_text": "msg_Warn(vd, \"cannot create clipper (error %li)\", hr)",
          "new_text": null,
          "old_line_content": "        msg_Warn(vd, \"cannot create clipper (error %li)\", hr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1232,
          "old_api": "msg_Dbg",
          "new_api": null,
          "old_text": "msg_Dbg(vd, \"Failed to create YUV overlay surface %4.4s\", (const char*)&fourcc)",
          "new_text": null,
          "old_line_content": "                        msg_Dbg(vd, \"Failed to create YUV overlay surface %4.4s\", (const char*)&fourcc);",
          "new_line_content": "                    }",
          "content_same": false
        },
        {
          "line": 722,
          "old_api": "IDirectDrawClipper_SetHWnd",
          "new_api": null,
          "old_text": "IDirectDrawClipper_SetHWnd(sys->clipper, 0, sys->sys.hvideownd)",
          "new_text": null,
          "old_line_content": "    hr = IDirectDrawClipper_SetHWnd(sys->clipper, 0, sys->sys.hvideownd);",
          "new_line_content": "        goto error;",
          "content_same": false
        },
        {
          "line": 724,
          "old_api": "msg_Warn",
          "new_api": null,
          "old_text": "msg_Warn(vd, \"cannot attach clipper to window (error %li)\", hr)",
          "new_text": null,
          "old_line_content": "        msg_Warn(vd, \"cannot attach clipper to window (error %li)\", hr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1240,
          "old_api": "msg_Dbg",
          "new_api": null,
          "old_text": "msg_Dbg(vd, \"Failed to create YUV surface %4.4s\", (const char*)&fourcc)",
          "new_text": null,
          "old_line_content": "                        msg_Dbg(vd, \"Failed to create YUV surface %4.4s\", (const char*)&fourcc);",
          "new_line_content": "                    }",
          "content_same": false
        },
        {
          "line": 732,
          "old_api": "msg_Warn",
          "new_api": null,
          "old_text": "msg_Warn(vd, \"cannot attach clipper to surface (error %li)\", hr)",
          "new_text": null,
          "old_line_content": "        msg_Warn(vd, \"cannot attach clipper to surface (error %li)\", hr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 740,
          "old_api": "IDirectDrawClipper_Release",
          "new_api": null,
          "old_text": "IDirectDrawClipper_Release(sys->clipper)",
          "new_text": null,
          "old_line_content": "        IDirectDrawClipper_Release(sys->clipper);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 230,
          "old_api": "vlc_mutex_init",
          "new_api": null,
          "old_text": "vlc_mutex_init(&sys->lock)",
          "new_text": null,
          "old_line_content": "    vlc_mutex_init(&sys->lock);",
          "new_line_content": "    sys->ch_wallpaper = sys->use_wallpaper;",
          "content_same": false
        },
        {
          "line": 1254,
          "old_api": "DirectXCreatePictureResourceRgb",
          "new_api": null,
          "old_text": "DirectXCreatePictureResourceRgb(vd, fmt)",
          "new_text": null,
          "old_line_content": "    return DirectXCreatePictureResourceRgb(vd, fmt);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 236,
          "old_api": "var_AddCallback",
          "new_api": null,
          "old_text": "var_AddCallback(vd, \"video-wallpaper\", WallpaperCallback, NULL)",
          "new_text": null,
          "old_line_content": "    var_AddCallback(vd, \"video-wallpaper\", WallpaperCallback, NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1262,
          "old_api": "DirectXDestroySurface",
          "new_api": null,
          "old_text": "DirectXDestroySurface(sys->picsys->front_surface)",
          "new_text": null,
          "old_line_content": "    DirectXDestroySurface(sys->picsys->front_surface);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 239,
          "old_api": "video_format_Clean",
          "new_api": null,
          "old_text": "video_format_Clean(fmtp)",
          "new_text": null,
          "old_line_content": "    video_format_Clean(fmtp);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 240,
          "old_api": "video_format_Copy",
          "new_api": null,
          "old_text": "video_format_Copy(fmtp, &fmt)",
          "new_text": null,
          "old_line_content": "    video_format_Copy(fmtp, &fmt);",
          "new_line_content": "    vd->pool    = Pool;",
          "content_same": false
        },
        {
          "line": 1264,
          "old_api": "picture_Release",
          "new_api": null,
          "old_text": "picture_Release(sys->picsys->fallback)",
          "new_text": null,
          "old_line_content": "        picture_Release(sys->picsys->fallback);",
          "new_line_content": "static int DirectXLock(picture_t *picture)",
          "content_same": false
        },
        {
          "line": 755,
          "old_api": "IDirectDrawSurface2_Lock",
          "new_api": null,
          "old_text": "IDirectDrawSurface2_Lock(sys->display, NULL, &ddsd, DDLOCK_WAIT, NULL)",
          "new_text": null,
          "old_line_content": "    hr = IDirectDrawSurface2_Lock(sys->display, NULL, &ddsd, DDLOCK_WAIT, NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1271,
          "old_api": "DirectXLockSurface",
          "new_api": null,
          "old_text": "DirectXLockSurface(p_sys->front_surface,\n                           p_sys->surface, &ddsd)",
          "new_text": null,
          "old_line_content": "    if (DirectXLockSurface(p_sys->front_surface,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1273,
          "old_api": "CommonUpdatePicture",
          "new_api": null,
          "old_text": "CommonUpdatePicture(picture, &p_sys->fallback, NULL, 0)",
          "new_text": null,
          "old_line_content": "        return CommonUpdatePicture(picture, &p_sys->fallback, NULL, 0);",
          "new_line_content": "    return VLC_SUCCESS;",
          "content_same": false
        },
        {
          "line": 1275,
          "old_api": "CommonUpdatePicture",
          "new_api": null,
          "old_text": "CommonUpdatePicture(picture, NULL, ddsd.lpSurface, ddsd.lPitch)",
          "new_text": null,
          "old_line_content": "    CommonUpdatePicture(picture, NULL, ddsd.lpSurface, ddsd.lPitch);",
          "new_line_content": "static void DirectXUnlock(picture_t *picture)",
          "content_same": false
        },
        {
          "line": 253,
          "old_api": "FreeLibrary",
          "new_api": null,
          "old_text": "FreeLibrary(sys->hddraw_dll)",
          "new_text": null,
          "old_line_content": "        FreeLibrary(sys->hddraw_dll);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 254,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(sys)",
          "new_text": null,
          "old_line_content": "    free(sys);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1281,
          "old_api": "DirectXUnlockSurface",
          "new_api": null,
          "old_text": "DirectXUnlockSurface(p_sys->front_surface,\n                         p_sys->surface)",
          "new_text": null,
          "old_line_content": "    DirectXUnlockSurface(p_sys->front_surface,",
          "new_line_content": "static void DirectXDestroyPicture(picture_t *picture)",
          "content_same": false
        },
        {
          "line": 1286,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(picture->p_sys)",
          "new_text": null,
          "old_line_content": "    free(picture->p_sys);",
          "new_line_content": "static int DirectXCreatePool(vout_display_t *vd,",
          "content_same": false
        },
        {
          "line": 264,
          "old_api": "var_DelCallback",
          "new_api": null,
          "old_text": "var_DelCallback(vd, \"video-wallpaper\", WallpaperCallback, NULL)",
          "new_text": null,
          "old_line_content": "    var_DelCallback(vd, \"video-wallpaper\", WallpaperCallback, NULL);",
          "new_line_content": "    /* Make sure the wallpaper is restored */",
          "content_same": false
        },
        {
          "line": 779,
          "old_api": "IDirectDrawSurface2_Unlock",
          "new_api": null,
          "old_text": "IDirectDrawSurface2_Unlock(sys->display, NULL)",
          "new_text": null,
          "old_line_content": "    IDirectDrawSurface2_Unlock(sys->display, NULL);",
          "new_line_content": "    HDC hdc;",
          "content_same": false
        },
        {
          "line": 268,
          "old_api": "WallpaperChange",
          "new_api": null,
          "old_text": "WallpaperChange(vd, false)",
          "new_text": null,
          "old_line_content": "    WallpaperChange(vd, false);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 270,
          "old_api": "DirectXClose",
          "new_api": null,
          "old_text": "DirectXClose(vd)",
          "new_text": null,
          "old_line_content": "    DirectXClose(vd);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 784,
          "old_api": "IDirectDrawSurface2_GetDC",
          "new_api": null,
          "old_text": "IDirectDrawSurface2_GetDC(sys->display, &hdc)",
          "new_text": null,
          "old_line_content": "    if (IDirectDrawSurface2_GetDC(sys->display, &hdc) == DD_OK) {",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 785,
          "old_api": "GetPixel",
          "new_api": null,
          "old_text": "GetPixel(hdc, 0, 0)",
          "new_text": null,
          "old_line_content": "        rgb = GetPixel(hdc, 0, 0);",
          "new_line_content": "        rgb = 0;",
          "content_same": false
        },
        {
          "line": 786,
          "old_api": "IDirectDrawSurface2_ReleaseDC",
          "new_api": null,
          "old_text": "IDirectDrawSurface2_ReleaseDC(sys->display, hdc)",
          "new_text": null,
          "old_line_content": "        IDirectDrawSurface2_ReleaseDC(sys->display, hdc);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 275,
          "old_api": "FreeLibrary",
          "new_api": null,
          "old_text": "FreeLibrary(sys->hddraw_dll)",
          "new_text": null,
          "old_line_content": "        FreeLibrary(sys->hddraw_dll);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 276,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(sys)",
          "new_text": null,
          "old_line_content": "    free(sys);",
          "new_line_content": "static picture_pool_t *Pool(vout_display_t *vd, unsigned count)",
          "content_same": false
        },
        {
          "line": 1297,
          "old_api": "DirectXCreatePictureResource",
          "new_api": null,
          "old_text": "DirectXCreatePictureResource(vd, use_overlay, fmt)",
          "new_text": null,
          "old_line_content": "    if (DirectXCreatePictureResource(vd, use_overlay, fmt))",
          "new_line_content": "    /* Create the associated picture */",
          "content_same": false
        },
        {
          "line": 281,
          "old_api": "VLC_UNUSED",
          "new_api": null,
          "old_text": "VLC_UNUSED(count)",
          "new_text": null,
          "old_line_content": "    VLC_UNUSED(count);",
          "new_line_content": "static void Display(vout_display_t *vd, picture_t *picture)",
          "content_same": false
        },
        {
          "line": 793,
          "old_api": "IDirectDrawSurface2_Lock",
          "new_api": null,
          "old_text": "IDirectDrawSurface2_Lock(sys->display, NULL, &ddsd, DDLOCK_WAIT, NULL)",
          "new_text": null,
          "old_line_content": "    if (IDirectDrawSurface2_Lock(sys->display, NULL, &ddsd, DDLOCK_WAIT, NULL) == DD_OK) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 795,
          "old_api": "IDirectDrawSurface2_Unlock",
          "new_api": null,
          "old_text": "IDirectDrawSurface2_Unlock(sys->display, NULL)",
          "new_text": null,
          "old_line_content": "        IDirectDrawSurface2_Unlock(sys->display, NULL);",
          "new_line_content": "    return rgb;",
          "content_same": false
        },
        {
          "line": 1306,
          "old_api": "DirectXDestroyPictureResource",
          "new_api": null,
          "old_text": "DirectXDestroyPictureResource(vd)",
          "new_text": null,
          "old_line_content": "        DirectXDestroyPictureResource(vd);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1307,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(sys->picsys)",
          "new_text": null,
          "old_line_content": "        free(sys->picsys);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 289,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(sys->display)",
          "new_text": null,
          "old_line_content": "    assert(sys->display);",
          "new_line_content": "     * and restore it if need be */",
          "content_same": false
        },
        {
          "line": 1313,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(&cfg, 0, sizeof(cfg))",
          "new_text": null,
          "old_line_content": "    memset(&cfg, 0, sizeof(cfg));",
          "new_line_content": "    cfg.lock          = DirectXLock;",
          "content_same": false
        },
        {
          "line": 294,
          "old_api": "IDirectDrawSurface2_Restore",
          "new_api": null,
          "old_text": "IDirectDrawSurface2_Restore(sys->display)",
          "new_text": null,
          "old_line_content": "        if (IDirectDrawSurface2_Restore(sys->display) == DD_OK) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 296,
          "old_api": "DirectXUpdateOverlay",
          "new_api": null,
          "old_text": "DirectXUpdateOverlay(vd, NULL)",
          "new_text": null,
          "old_line_content": "                DirectXUpdateOverlay(vd, NULL);",
          "new_line_content": "    if (sys->restore_overlay)",
          "content_same": false
        },
        {
          "line": 1321,
          "old_api": "picture_Release",
          "new_api": null,
          "old_text": "picture_Release(picture)",
          "new_text": null,
          "old_line_content": "        picture_Release(picture);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1322,
          "old_api": "DirectXDestroyPictureResource",
          "new_api": null,
          "old_text": "DirectXDestroyPictureResource(vd)",
          "new_text": null,
          "old_line_content": "        DirectXDestroyPictureResource(vd);",
          "new_line_content": "    return VLC_SUCCESS;",
          "content_same": false
        },
        {
          "line": 813,
          "old_api": "ZeroMemory",
          "new_api": null,
          "old_text": "ZeroMemory(&ddsd, sizeof(ddsd))",
          "new_text": null,
          "old_line_content": "    ZeroMemory(&ddsd, sizeof(ddsd));",
          "new_line_content": "    ddsd.ddsCaps.dwCaps = DDSCAPS_PRIMARYSURFACE;",
          "content_same": false
        },
        {
          "line": 303,
          "old_api": "DirectXUnlock",
          "new_api": null,
          "old_text": "DirectXUnlock(picture)",
          "new_text": null,
          "old_line_content": "    DirectXUnlock(picture);",
          "new_line_content": "        /* Flip the overlay buffers if we are using back buffers */",
          "content_same": false
        },
        {
          "line": 819,
          "old_api": "IDirectDraw2_CreateSurface",
          "new_api": null,
          "old_text": "IDirectDraw2_CreateSurface(sys->ddobject, &ddsd, &display, NULL)",
          "new_text": null,
          "old_line_content": "    hr = IDirectDraw2_CreateSurface(sys->ddobject, &ddsd, &display, NULL);",
          "new_line_content": "        return VLC_EGENERIC;",
          "content_same": false
        },
        {
          "line": 1332,
          "old_api": "DirectXDestroyPictureResource",
          "new_api": null,
          "old_text": "DirectXDestroyPictureResource(vd)",
          "new_text": null,
          "old_line_content": "        DirectXDestroyPictureResource(vd);",
          "new_line_content": "    sys->sys.pool = NULL;",
          "content_same": false
        },
        {
          "line": 821,
          "old_api": "msg_Err",
          "new_api": null,
          "old_text": "msg_Err(vd, \"cannot get primary surface (error %li)\", hr)",
          "new_text": null,
          "old_line_content": "        msg_Err(vd, \"cannot get primary surface (error %li)\", hr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1333,
          "old_api": "picture_pool_Release",
          "new_api": null,
          "old_text": "picture_pool_Release(sys->sys.pool)",
          "new_text": null,
          "old_line_content": "        picture_pool_Release(sys->sys.pool);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 311,
          "old_api": "msg_Warn",
          "new_api": null,
          "old_text": "msg_Warn(vd, \"could not flip overlay (error %li)\", hr)",
          "new_text": null,
          "old_line_content": "                msg_Warn(vd, \"could not flip overlay (error %li)\", hr);",
          "new_line_content": "        /* Blit video surface to display with the NOTEARING option */",
          "content_same": false
        },
        {
          "line": 316,
          "old_api": "ZeroMemory",
          "new_api": null,
          "old_text": "ZeroMemory(&ddbltfx, sizeof(ddbltfx))",
          "new_text": null,
          "old_line_content": "        ZeroMemory(&ddbltfx, sizeof(ddbltfx));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 320,
          "old_api": "IDirectDrawSurface2_Blt",
          "new_api": null,
          "old_text": "IDirectDrawSurface2_Blt(sys->display,\n                                             &sys->sys.rect_dest_clipped,\n                                             p_sys->surface,\n                                             &sys->sys.rect_src_clipped,\n                                             DDBLT_ASYNC, &ddbltfx)",
          "new_text": null,
          "old_line_content": "        HRESULT hr = IDirectDrawSurface2_Blt(sys->display,",
          "new_line_content": "                                             &sys->sys.rect_src_clipped,",
          "content_same": false
        },
        {
          "line": 832,
          "old_api": "msg_Err",
          "new_api": null,
          "old_text": "msg_Err(vd, \"cannot query IDirectDrawSurface2 interface (error %li)\", hr)",
          "new_text": null,
          "old_line_content": "        msg_Err(vd, \"cannot query IDirectDrawSurface2 interface (error %li)\", hr);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 326,
          "old_api": "msg_Warn",
          "new_api": null,
          "old_text": "msg_Warn(vd, \"could not blit surface (error %li)\", hr)",
          "new_text": null,
          "old_line_content": "            msg_Warn(vd, \"could not blit surface (error %li)\", hr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 839,
          "old_api": "DirectXCreateClipper",
          "new_api": null,
          "old_text": "DirectXCreateClipper(vd)",
          "new_text": null,
          "old_line_content": "    DirectXCreateClipper(vd);",
          "new_line_content": "    sys->i_colorkey = 1;",
          "content_same": false
        },
        {
          "line": 843,
          "old_api": "DirectXFindColorkey",
          "new_api": null,
          "old_text": "DirectXFindColorkey(vd, &sys->i_colorkey)",
          "new_text": null,
          "old_line_content": "    sys->i_rgb_colorkey = DirectXFindColorkey(vd, &sys->i_colorkey);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1357,
          "old_api": "AlignRect",
          "new_api": null,
          "old_text": "AlignRect(&src, sys->sys.i_align_src_boundary, sys->sys.i_align_src_size)",
          "new_text": null,
          "old_line_content": "        AlignRect(&src, sys->sys.i_align_src_boundary, sys->sys.i_align_src_size);",
          "new_line_content": "        cfg.display.width  = sys->sys.rect_display.right;",
          "content_same": false
        },
        {
          "line": 334,
          "old_api": "CreateSolidBrush",
          "new_api": null,
          "old_text": "CreateSolidBrush(sys->i_rgb_colorkey)",
          "new_text": null,
          "old_line_content": "            HBRUSH brush = CreateSolidBrush(sys->i_rgb_colorkey);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 339,
          "old_api": "CommonDisplay",
          "new_api": null,
          "old_text": "CommonDisplay(vd)",
          "new_text": null,
          "old_line_content": "    CommonDisplay(vd);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1364,
          "old_api": "vout_display_PlacePicture",
          "new_api": null,
          "old_text": "vout_display_PlacePicture(&place, &vd->source, &cfg)",
          "new_text": null,
          "old_line_content": "        vout_display_PlacePicture(&place, &vd->source, &cfg);",
          "new_line_content": "            place.width += -place.x;",
          "content_same": false
        },
        {
          "line": 341,
          "old_api": "Manage",
          "new_api": null,
          "old_text": "Manage(vd)",
          "new_text": null,
          "old_line_content": "    Manage(vd);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 855,
          "old_api": "IDirectDrawSurface2_Release",
          "new_api": null,
          "old_text": "IDirectDrawSurface2_Release(sys->display)",
          "new_text": null,
          "old_line_content": "        IDirectDrawSurface2_Release(sys->display);",
          "new_line_content": "    sys->display = NULL;",
          "content_same": false
        },
        {
          "line": 350,
          "old_api": "va_arg",
          "new_api": null,
          "old_text": "va_arg(args, const vout_display_cfg_t *)",
          "new_text": null,
          "old_line_content": "        const vout_display_cfg_t *cfg = va_arg(args, const vout_display_cfg_t *);",
          "new_line_content": "        /* Make sure the wallpaper is restored */",
          "content_same": false
        },
        {
          "line": 351,
          "old_api": "va_arg",
          "new_api": null,
          "old_text": "va_arg(args, video_format_t *)",
          "new_text": null,
          "old_line_content": "        video_format_t *fmt = va_arg(args, video_format_t *);",
          "new_line_content": "        if (sys->use_wallpaper) {",
          "content_same": false
        },
        {
          "line": 352,
          "old_api": "DirectXClose",
          "new_api": null,
          "old_text": "DirectXClose(vd)",
          "new_text": null,
          "old_line_content": "        DirectXClose(vd);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 356,
          "old_api": "vlc_mutex_lock",
          "new_api": null,
          "old_text": "vlc_mutex_lock(&sys->lock)",
          "new_text": null,
          "old_line_content": "            vlc_mutex_lock(&sys->lock);",
          "new_line_content": "                sys->wallpaper_requested = true;",
          "content_same": false
        },
        {
          "line": 1383,
          "old_api": "AlignRect",
          "new_api": null,
          "old_text": "AlignRect(&dst, sys->sys.i_align_dest_boundary, sys->sys.i_align_dest_size)",
          "new_text": null,
          "old_line_content": "        AlignRect(&dst, sys->sys.i_align_dest_boundary, sys->sys.i_align_dest_size);",
          "new_line_content": "    if (!surface) {",
          "content_same": false
        },
        {
          "line": 361,
          "old_api": "vlc_mutex_unlock",
          "new_api": null,
          "old_text": "vlc_mutex_unlock(&sys->lock)",
          "new_text": null,
          "old_line_content": "            vlc_mutex_unlock(&sys->lock);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 369,
          "old_api": "CommonControl",
          "new_api": null,
          "old_text": "CommonControl(vd, query, args)",
          "new_text": null,
          "old_line_content": "        return CommonControl(vd, query, args);",
          "new_line_content": "static void Manage(vout_display_t *vd)",
          "content_same": false
        },
        {
          "line": 883,
          "old_api": "ZeroMemory",
          "new_api": null,
          "old_text": "ZeroMemory(&ddsd, sizeof(ddsd))",
          "new_text": null,
          "old_line_content": "    ZeroMemory(&ddsd, sizeof(ddsd));",
          "new_line_content": "    ddsd.dwFlags  = DDSD_HEIGHT | DDSD_WIDTH;",
          "content_same": false
        },
        {
          "line": 1397,
          "old_api": "ZeroMemory",
          "new_api": null,
          "old_text": "ZeroMemory(&ddofx, sizeof(ddofx))",
          "new_text": null,
          "old_line_content": "    ZeroMemory(&ddofx, sizeof(ddofx));",
          "new_line_content": "    ddofx.dckDestColorkey.dwColorSpaceHighValue = sys->i_colorkey;",
          "content_same": false
        },
        {
          "line": 376,
          "old_api": "CommonManage",
          "new_api": null,
          "old_text": "CommonManage(vd)",
          "new_text": null,
          "old_line_content": "    CommonManage(vd);",
          "new_line_content": "        /* Update overlay */",
          "content_same": false
        },
        {
          "line": 1402,
          "old_api": "IDirectDrawSurface2_UpdateOverlay",
          "new_api": null,
          "old_text": "IDirectDrawSurface2_UpdateOverlay(surface,\n                                                   &src, sys->display, &dst,\n                                                   DDOVER_SHOW | DDOVER_KEYDESTOVERRIDE | DDOVER_DDFX,\n                                                   &ddofx)",
          "new_text": null,
          "old_line_content": "    HRESULT hr = IDirectDrawSurface2_UpdateOverlay(surface,",
          "new_line_content": "                                                   &ddofx);",
          "content_same": false
        },
        {
          "line": 384,
          "old_api": "MonitorFromWindow",
          "new_api": null,
          "old_text": "MonitorFromWindow(sys->sys.hwnd, MONITOR_DEFAULTTONEAREST)",
          "new_text": null,
          "old_line_content": "        HMONITOR hmon = MonitorFromWindow(sys->sys.hwnd, MONITOR_DEFAULTTONEAREST);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1409,
          "old_api": "msg_Warn",
          "new_api": null,
          "old_text": "msg_Warn(vd, \"DirectDrawUpdateOverlay cannot move/resize overlay. (hr=0x%lX)\", hr)",
          "new_text": null,
          "old_line_content": "        msg_Warn(vd, \"DirectDrawUpdateOverlay cannot move/resize overlay. (hr=0x%lX)\", hr);",
          "new_line_content": "    return VLC_SUCCESS;",
          "content_same": false
        },
        {
          "line": 386,
          "old_api": "vout_display_SendEventPicturesInvalid",
          "new_api": null,
          "old_text": "vout_display_SendEventPicturesInvalid(vd)",
          "new_text": null,
          "old_line_content": "            vout_display_SendEventPicturesInvalid(vd);",
          "new_line_content": "        sys->sys.changes &= ~DX_POSITION_CHANGE;",
          "content_same": false
        },
        {
          "line": 393,
          "old_api": "vlc_mutex_lock",
          "new_api": null,
          "old_text": "vlc_mutex_lock(&sys->lock)",
          "new_text": null,
          "old_line_content": "    vlc_mutex_lock(&sys->lock);",
          "new_line_content": "    sys->ch_wallpaper = false;",
          "content_same": false
        },
        {
          "line": 1423,
          "old_api": "_T",
          "new_api": null,
          "old_text": "_T(\"Progman\")",
          "new_text": null,
          "old_line_content": "    HWND hwnd = FindWindow(_T(\"Progman\"), NULL);",
          "new_line_content": "    if (hwnd)",
          "content_same": false
        },
        {
          "line": 400,
          "old_api": "WallpaperChange",
          "new_api": null,
          "old_text": "WallpaperChange(vd, wallpaper_requested)",
          "new_text": null,
          "old_line_content": "        WallpaperChange(vd, wallpaper_requested);",
          "new_line_content": "    if (sys->restore_overlay)",
          "content_same": false
        },
        {
          "line": 1425,
          "old_api": "_T",
          "new_api": null,
          "old_text": "_T(\"SHELLDLL_DefView\")",
          "new_text": null,
          "old_line_content": "        hwnd = FindWindowEx(hwnd, NULL, _T(\"SHELLDLL_DefView\"), NULL);",
          "new_line_content": "    if (!hwnd) {",
          "content_same": false
        },
        {
          "line": 915,
          "old_api": "msg_Dbg",
          "new_api": null,
          "old_text": "msg_Dbg(vd, \"failed to create a DirectDrawSurface with invalid caps %lx\", ddsd.ddsCaps.dwCaps)",
          "new_text": null,
          "old_line_content": "        msg_Dbg(vd, \"failed to create a DirectDrawSurface with invalid caps %lx\", ddsd.ddsCaps.dwCaps);",
          "new_line_content": "    if (hr != DD_OK)",
          "content_same": false
        },
        {
          "line": 404,
          "old_api": "DirectXUpdateOverlay",
          "new_api": null,
          "old_text": "DirectXUpdateOverlay(vd, NULL)",
          "new_text": null,
          "old_line_content": "        DirectXUpdateOverlay(vd, NULL);",
          "new_line_content": "/* */",
          "content_same": false
        },
        {
          "line": 1427,
          "old_api": "_T",
          "new_api": null,
          "old_text": "_T(\"SysListView32\")",
          "new_text": null,
          "old_line_content": "        hwnd = FindWindowEx(hwnd, NULL, _T(\"SysListView32\"), NULL);",
          "new_line_content": "                     \"wallpaper mode not supported\");",
          "content_same": false
        },
        {
          "line": 1429,
          "old_api": "msg_Warn",
          "new_api": null,
          "old_text": "msg_Warn(vd, \"couldn't find \\\"SysListView32\\\" window, \"\n                     \"wallpaper mode not supported\")",
          "new_text": null,
          "old_line_content": "        msg_Warn(vd, \"couldn't find \\\"SysListView32\\\" window, \"",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 920,
          "old_api": "msg_Dbg",
          "new_api": null,
          "old_text": "msg_Dbg(vd, \"failed to create a DirectDrawSurface (error %li)\", hr)",
          "new_text": null,
          "old_line_content": "        msg_Dbg(vd, \"failed to create a DirectDrawSurface (error %li)\", hr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1434,
          "old_api": "msg_Dbg",
          "new_api": null,
          "old_text": "msg_Dbg(vd, \"wallpaper mode %s\", use_wallpaper ? \"enabled\" : \"disabled\")",
          "new_text": null,
          "old_line_content": "    msg_Dbg(vd, \"wallpaper mode %s\", use_wallpaper ? \"enabled\" : \"disabled\");",
          "new_line_content": "    if (sys->use_wallpaper) {",
          "content_same": false
        },
        {
          "line": 928,
          "old_api": "IDirectDrawSurface_Release",
          "new_api": null,
          "old_text": "IDirectDrawSurface_Release(surface_v1)",
          "new_text": null,
          "old_line_content": "    IDirectDrawSurface_Release(surface_v1);",
          "new_line_content": "        return VLC_EGENERIC;",
          "content_same": false
        },
        {
          "line": 930,
          "old_api": "msg_Err",
          "new_api": null,
          "old_text": "msg_Err(vd, \"cannot query IDirectDrawSurface2 interface (error %li)\", hr)",
          "new_text": null,
          "old_line_content": "        msg_Err(vd, \"cannot query IDirectDrawSurface2 interface (error %li)\", hr);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1444,
          "old_api": "ListView_SetBkColor",
          "new_api": null,
          "old_text": "ListView_SetBkColor(hwnd,     sys->color_bkg)",
          "new_text": null,
          "old_line_content": "        ListView_SetBkColor(hwnd,     sys->color_bkg);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 421,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(!sys->ddobject)",
          "new_text": null,
          "old_line_content": "    assert(!sys->ddobject);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 422,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(!sys->display)",
          "new_text": null,
          "old_line_content": "    assert(!sys->display);",
          "new_line_content": "    /* Initialise DirectDraw */",
          "content_same": false
        },
        {
          "line": 1445,
          "old_api": "ListView_SetTextBkColor",
          "new_api": null,
          "old_text": "ListView_SetTextBkColor(hwnd, sys->color_bkgtxt)",
          "new_text": null,
          "old_line_content": "        ListView_SetTextBkColor(hwnd, sys->color_bkgtxt);",
          "new_line_content": "    /* Update desktop */",
          "content_same": false
        },
        {
          "line": 937,
          "old_api": "DirectXUpdateOverlay",
          "new_api": null,
          "old_text": "DirectXUpdateOverlay(vd, *surface)",
          "new_text": null,
          "old_line_content": "        if (DirectXUpdateOverlay(vd, *surface)) {",
          "new_line_content": "            return VLC_EGENERIC;",
          "content_same": false
        },
        {
          "line": 426,
          "old_api": "DirectXOpenDDraw",
          "new_api": null,
          "old_text": "DirectXOpenDDraw(vd)",
          "new_text": null,
          "old_line_content": "    if (DirectXOpenDDraw(vd)) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 427,
          "old_api": "msg_Err",
          "new_api": null,
          "old_text": "msg_Err(vd, \"cannot initialize DirectX DirectDraw\")",
          "new_text": null,
          "old_line_content": "        msg_Err(vd, \"cannot initialize DirectX DirectDraw\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 938,
          "old_api": "IDirectDrawSurface2_Release",
          "new_api": null,
          "old_text": "IDirectDrawSurface2_Release(*surface)",
          "new_text": null,
          "old_line_content": "            IDirectDrawSurface2_Release(*surface);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 939,
          "old_api": "msg_Err",
          "new_api": null,
          "old_text": "msg_Err(vd, \"overlay unuseable (might already be in use)\")",
          "new_text": null,
          "old_line_content": "            msg_Err(vd, \"overlay unuseable (might already be in use)\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1449,
          "old_api": "InvalidateRect",
          "new_api": null,
          "old_text": "InvalidateRect(hwnd, NULL, TRUE)",
          "new_text": null,
          "old_line_content": "    InvalidateRect(hwnd, NULL, TRUE);",
          "new_line_content": "    if (sys->sys.use_overlay)",
          "content_same": false
        },
        {
          "line": 1453,
          "old_api": "DirectXUpdateOverlay",
          "new_api": null,
          "old_text": "DirectXUpdateOverlay(vd, NULL)",
          "new_text": null,
          "old_line_content": "      DirectXUpdateOverlay(vd, NULL);",
          "new_line_content": "/* */",
          "content_same": false
        },
        {
          "line": 432,
          "old_api": "DirectXOpenDisplay",
          "new_api": null,
          "old_text": "DirectXOpenDisplay(vd)",
          "new_text": null,
          "old_line_content": "    if (DirectXOpenDisplay(vd)) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 949,
          "old_api": "IDirectDrawSurface2_Release",
          "new_api": null,
          "old_text": "IDirectDrawSurface2_Release(surface)",
          "new_text": null,
          "old_line_content": "    IDirectDrawSurface2_Release(surface);",
          "new_line_content": " * This function locks a surface and get the surface descriptor.",
          "content_same": false
        },
        {
          "line": 1462,
          "old_api": "VLC_UNUSED",
          "new_api": null,
          "old_text": "VLC_UNUSED(data)",
          "new_text": null,
          "old_line_content": "    VLC_UNUSED(cmd); VLC_UNUSED(oldval); VLC_UNUSED(data);",
          "new_line_content": "    const bool ch_wallpaper = !sys->wallpaper_requested != !newval.b_bool;",
          "content_same": false
        },
        {
          "line": 439,
          "old_api": "DirectXCreatePool",
          "new_api": null,
          "old_text": "DirectXCreatePool(vd, &sys->sys.use_overlay, fmt)",
          "new_text": null,
          "old_line_content": "    if (DirectXCreatePool(vd, &sys->sys.use_overlay, fmt)) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 440,
          "old_api": "msg_Err",
          "new_api": null,
          "old_text": "msg_Err(vd, \"cannot create any DirectX surface\")",
          "new_text": null,
          "old_line_content": "        msg_Err(vd, \"cannot create any DirectX surface\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1464,
          "old_api": "vlc_mutex_lock",
          "new_api": null,
          "old_text": "vlc_mutex_lock(&sys->lock)",
          "new_text": null,
          "old_line_content": "    vlc_mutex_lock(&sys->lock);",
          "new_line_content": "    sys->wallpaper_requested = newval.b_bool;",
          "content_same": false
        },
        {
          "line": 1468,
          "old_api": "vlc_mutex_unlock",
          "new_api": null,
          "old_text": "vlc_mutex_unlock(&sys->lock)",
          "new_text": null,
          "old_line_content": "    vlc_mutex_unlock(&sys->lock);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 449,
          "old_api": "EventThreadUseOverlay",
          "new_api": null,
          "old_text": "EventThreadUseOverlay(sys->sys.event, sys->sys.use_overlay)",
          "new_text": null,
          "old_line_content": "        EventThreadUseOverlay(sys->sys.event, sys->sys.use_overlay);",
          "new_line_content": "        const char *fallback;",
          "content_same": false
        },
        {
          "line": 964,
          "old_api": "ZeroMemory",
          "new_api": null,
          "old_text": "ZeroMemory(ddsd, sizeof(*ddsd))",
          "new_text": null,
          "old_line_content": "    ZeroMemory(ddsd, sizeof(*ddsd));",
          "new_line_content": "    if (hr != DD_OK) {",
          "content_same": false
        },
        {
          "line": 966,
          "old_api": "IDirectDrawSurface2_Lock",
          "new_api": null,
          "old_text": "IDirectDrawSurface2_Lock(surface, NULL, ddsd, DDLOCK_NOSYSLOCK | DDLOCK_WAIT, NULL)",
          "new_text": null,
          "old_line_content": "    hr = IDirectDrawSurface2_Lock(surface, NULL, ddsd, DDLOCK_NOSYSLOCK | DDLOCK_WAIT, NULL);",
          "new_line_content": "            /* DirectX 3 doesn't support the DDLOCK_NOSYSLOCK flag, resulting",
          "content_same": false
        },
        {
          "line": 455,
          "old_api": "vlc_fourcc_IsYUV",
          "new_api": null,
          "old_text": "vlc_fourcc_IsYUV(fmt->i_chroma)",
          "new_text": null,
          "old_line_content": "        else if (vlc_fourcc_IsYUV(fmt->i_chroma))",
          "new_line_content": "            fallback = VOUT_TITLE \" (software RGB DirectX output)\";",
          "content_same": false
        },
        {
          "line": 459,
          "old_api": "EventThreadUpdateTitle",
          "new_api": null,
          "old_text": "EventThreadUpdateTitle(sys->sys.event, fallback)",
          "new_text": null,
          "old_line_content": "        EventThreadUpdateTitle(sys->sys.event, fallback);",
          "new_line_content": "    return VLC_SUCCESS;",
          "content_same": false
        },
        {
          "line": 971,
          "old_api": "IDirectDrawSurface2_Lock",
          "new_api": null,
          "old_text": "IDirectDrawSurface2_Lock(surface, NULL, ddsd, DDLOCK_WAIT, NULL)",
          "new_text": null,
          "old_line_content": "            hr = IDirectDrawSurface2_Lock(surface, NULL, ddsd, DDLOCK_WAIT, NULL);",
          "new_line_content": "            /* Your surface can be lost so be sure",
          "content_same": false
        },
        {
          "line": 466,
          "old_api": "DirectXDestroyPool",
          "new_api": null,
          "old_text": "DirectXDestroyPool(vd)",
          "new_text": null,
          "old_line_content": "    DirectXDestroyPool(vd);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 467,
          "old_api": "DirectXCloseDisplay",
          "new_api": null,
          "old_text": "DirectXCloseDisplay(vd)",
          "new_text": null,
          "old_line_content": "    DirectXCloseDisplay(vd);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 468,
          "old_api": "DirectXCloseDDraw",
          "new_api": null,
          "old_text": "DirectXCloseDDraw(vd)",
          "new_text": null,
          "old_line_content": "    DirectXCloseDDraw(vd);",
          "new_line_content": "/* */",
          "content_same": false
        },
        {
          "line": 980,
          "old_api": "IDirectDrawSurface2_Restore",
          "new_api": null,
          "old_text": "IDirectDrawSurface2_Restore(front_surface)",
          "new_text": null,
          "old_line_content": "                IDirectDrawSurface2_Restore(front_surface);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 982,
          "old_api": "IDirectDrawSurface2_Restore",
          "new_api": null,
          "old_text": "IDirectDrawSurface2_Restore(surface)",
          "new_text": null,
          "old_line_content": "                IDirectDrawSurface2_Restore(surface);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1494,
          "old_api": "strdup",
          "new_api": null,
          "old_text": "strdup(psz_drivername)",
          "new_text": null,
          "old_line_content": "    ctx->values[ctx->count] = strdup(psz_drivername);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 984,
          "old_api": "IDirectDrawSurface2_Lock",
          "new_api": null,
          "old_text": "IDirectDrawSurface2_Lock(surface, NULL, ddsd, DDLOCK_WAIT, NULL)",
          "new_text": null,
          "old_line_content": "            hr = IDirectDrawSurface2_Lock(surface, NULL, ddsd, DDLOCK_WAIT, NULL);",
          "new_line_content": "            return VLC_EGENERIC;",
          "content_same": false
        },
        {
          "line": 1495,
          "old_api": "strdup",
          "new_api": null,
          "old_text": "strdup(psz_drivername)",
          "new_text": null,
          "old_line_content": "    ctx->descs[ctx->count] = strdup(psz_drivername);",
          "new_line_content": "    return TRUE; /* Keep enumerating */",
          "content_same": false
        },
        {
          "line": 994,
          "old_api": "VLC_UNUSED",
          "new_api": null,
          "old_text": "VLC_UNUSED(front_surface)",
          "new_text": null,
          "old_line_content": "    VLC_UNUSED(front_surface);",
          "new_line_content": "static int DirectXCheckLockingSurface(LPDIRECTDRAWSURFACE2 front_surface,",
          "content_same": false
        },
        {
          "line": 995,
          "old_api": "IDirectDrawSurface2_Unlock",
          "new_api": null,
          "old_text": "IDirectDrawSurface2_Unlock(surface, NULL)",
          "new_text": null,
          "old_line_content": "    IDirectDrawSurface2_Unlock(surface, NULL);",
          "new_line_content": "                                      LPDIRECTDRAWSURFACE2 surface)",
          "content_same": false
        },
        {
          "line": 1506,
          "old_api": "xmalloc",
          "new_api": null,
          "old_text": "xmalloc(sizeof(char *))",
          "new_text": null,
          "old_line_content": "    ctx.descs = xmalloc(sizeof(char *));",
          "new_line_content": "    ctx.count = 1;",
          "content_same": false
        },
        {
          "line": 1507,
          "old_api": "strdup",
          "new_api": null,
          "old_text": "strdup(\"\")",
          "new_text": null,
          "old_line_content": "    ctx.values[0] = strdup(\"\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1508,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"Default\")",
          "new_text": null,
          "old_line_content": "    ctx.descs[0] = strdup(_(\"Default\"));",
          "new_line_content": "    /* Load direct draw DLL */",
          "content_same": false
        },
        {
          "line": 1512,
          "old_api": "_T",
          "new_api": null,
          "old_text": "_T(\"DDRAW.DLL\")",
          "new_text": null,
          "old_line_content": "    HINSTANCE hddraw_dll = LoadLibrary(_T(\"DDRAW.DLL\"));",
          "new_line_content": "        /* Enumerate displays */",
          "content_same": false
        },
        {
          "line": 490,
          "old_api": "msg_Dbg",
          "new_api": null,
          "old_text": "msg_Dbg(vd, \"DirectXEnumCallback: %s, %s\", psz_desc, psz_drivername)",
          "new_text": null,
          "old_line_content": "    msg_Dbg(vd, \"DirectXEnumCallback: %s, %s\", psz_desc, psz_drivername);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1003,
          "old_api": "DirectXUnlockSurface",
          "new_api": null,
          "old_text": "DirectXUnlockSurface(front_surface, surface)",
          "new_text": null,
          "old_line_content": "    DirectXUnlockSurface(front_surface, surface);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1516,
          "old_api": "HRESULT (WINAPI *OurDirectDrawEnumerateEx)(LPDDENUMCALLBACKEXA,\n                                                   LPVOID, DWORD)",
          "new_api": null,
          "old_text": "HRESULT (WINAPI *OurDirectDrawEnumerateEx)(LPDDENUMCALLBACKEXA,\n                                                   LPVOID, DWORD)",
          "new_text": null,
          "old_line_content": "        HRESULT (WINAPI *OurDirectDrawEnumerateEx)(LPDDENUMCALLBACKEXA,",
          "new_line_content": "        if (OurDirectDrawEnumerateEx != NULL)",
          "content_same": false
        },
        {
          "line": 1518,
          "old_api": "GetProcAddress",
          "new_api": null,
          "old_text": "GetProcAddress(hddraw_dll, DIRECTDRAWENUMERATEEX_NAME)",
          "new_text": null,
          "old_line_content": "              (void *)GetProcAddress(hddraw_dll, DIRECTDRAWENUMERATEEX_NAME);",
          "new_line_content": "                                     DDENUM_ATTACHEDSECONDARYDEVICES);",
          "content_same": false
        },
        {
          "line": 495,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(psz_drivername, device)",
          "new_text": null,
          "old_line_content": "    if (device && *device && !strcmp(psz_drivername, device)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1520,
          "old_api": "OurDirectDrawEnumerateEx",
          "new_api": null,
          "old_text": "OurDirectDrawEnumerateEx(DirectXEnumCallback2, &ctx,\n                                     DDENUM_ATTACHEDSECONDARYDEVICES)",
          "new_text": null,
          "old_line_content": "            OurDirectDrawEnumerateEx(DirectXEnumCallback2, &ctx,",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 499,
          "old_api": "GetMonitorInfoA",
          "new_api": null,
          "old_text": "GetMonitorInfoA(hmon, &monitor_info)",
          "new_text": null,
          "old_line_content": "        if (GetMonitorInfoA(hmon, &monitor_info)) {",
          "new_line_content": "            /* Move window to the right screen */",
          "content_same": false
        },
        {
          "line": 1525,
          "old_api": "VLC_UNUSED",
          "new_api": null,
          "old_text": "VLC_UNUSED(name)",
          "new_text": null,
          "old_line_content": "    VLC_UNUSED(name);",
          "new_line_content": "    *descs = ctx.descs;",
          "content_same": false
        },
        {
          "line": 503,
          "old_api": "GetWindowRect",
          "new_api": null,
          "old_text": "GetWindowRect(sys->sys.hwnd, &rect)",
          "new_text": null,
          "old_line_content": "            GetWindowRect(sys->sys.hwnd, &rect);",
          "new_line_content": "                rect.top = monitor_info.rcWork.top;",
          "content_same": false
        },
        {
          "line": 507,
          "old_api": "msg_Dbg",
          "new_api": null,
          "old_text": "msg_Dbg(vd, \"DirectXEnumCallback: setting window \"\n                            \"position to %ld,%ld\", rect.left, rect.top)",
          "new_text": null,
          "old_line_content": "                msg_Dbg(vd, \"DirectXEnumCallback: setting window \"",
          "new_line_content": "                             rect.left, rect.top, 0, 0,",
          "content_same": false
        },
        {
          "line": 1020,
          "old_api": "MAKEFOURCC",
          "new_api": null,
          "old_text": "MAKEFOURCC('Y','V','1','2')",
          "new_text": null,
          "old_line_content": "        { VLC_CODEC_YV12, MAKEFOURCC('Y','V','1','2') },",
          "new_line_content": "        { 0, 0 }",
          "content_same": false
        },
        {
          "line": 1021,
          "old_api": "MAKEFOURCC",
          "new_api": null,
          "old_text": "MAKEFOURCC('Y','V','1','2')",
          "new_text": null,
          "old_line_content": "        { VLC_CODEC_I420, MAKEFOURCC('Y','V','1','2') },",
          "new_line_content": "    };",
          "content_same": false
        },
        {
          "line": 1022,
          "old_api": "MAKEFOURCC",
          "new_api": null,
          "old_text": "MAKEFOURCC('Y','V','1','2')",
          "new_text": null,
          "old_line_content": "        { VLC_CODEC_J420, MAKEFOURCC('Y','V','1','2') },",
          "new_line_content": "",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 58,
      "total_additions": 190,
      "total_deletions": 190,
      "total_api_changes": 438
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 7,
        "api_related_lines": 438,
        "non_api_lines": 6,
        "non_api_line_numbers": [
          224,
          225,
          226,
          227,
          241,
          223
        ]
      }
    },
    "api_calls_before": 292,
    "api_calls_after": 292,
    "diff_info": {
      "added_lines": 4,
      "removed_lines": 7,
      "total_diff_lines": 32
    }
  }
}
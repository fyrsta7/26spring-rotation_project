{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/vlc/modified_file/693cddd703c3dd9781fb9aa4157f76aeaf834513",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/vlc/modified_file/693cddd703c3dd9781fb9aa4157f76aeaf834513/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/vlc/modified_file/693cddd703c3dd9781fb9aa4157f76aeaf834513/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/vlc/modified_file/693cddd703c3dd9781fb9aa4157f76aeaf834513/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 374,
          "old_api": "subpicture_region_New",
          "new_api": "subpicture_region_ForPicture",
          "old_text": "subpicture_region_New( &fmt )",
          "new_text": "subpicture_region_ForPicture( &fmt, p_pic )",
          "old_line_content": "    p_region = subpicture_region_New( &fmt );",
          "new_line_content": "    p_region = subpicture_region_ForPicture( &fmt, p_pic );",
          "content_same": false
        },
        {
          "line": 424,
          "old_api": "picture_Copy",
          "new_api": "vlc_mutex_lock",
          "old_text": "picture_Copy( p_dst, p_src )",
          "new_text": "vlc_mutex_lock( &p_sys->lock )",
          "old_line_content": "    picture_Copy( p_dst, p_src );",
          "new_line_content": "    vlc_mutex_lock( &p_sys->lock );",
          "content_same": false
        },
        {
          "line": 473,
          "old_api": "filter_Blend",
          "new_api": "msg_Err",
          "old_text": "filter_Blend( p_sys->p_blend, p_dst, p_sys->i_pos_x, p_sys->i_pos_y,\n                          p_pic, i_alpha )",
          "new_text": "msg_Err( p_filter, \"failed to blend a picture\" )",
          "old_line_content": "            filter_Blend( p_sys->p_blend, p_dst, p_sys->i_pos_x, p_sys->i_pos_y,",
          "new_line_content": "            msg_Err( p_filter, \"failed to blend a picture\" );",
          "content_same": false
        },
        {
          "line": 476,
          "old_api": "msg_Err",
          "new_api": "vlc_mutex_unlock",
          "old_text": "msg_Err( p_filter, \"failed to blend a picture\" )",
          "new_text": "vlc_mutex_unlock( &p_sys->lock )",
          "old_line_content": "            msg_Err( p_filter, \"failed to blend a picture\" );",
          "new_line_content": "    vlc_mutex_unlock( &p_sys->lock );",
          "content_same": false
        },
        {
          "line": 479,
          "old_api": "vlc_mutex_unlock",
          "new_api": "picture_Release",
          "old_text": "vlc_mutex_unlock( &p_sys->lock )",
          "new_text": "picture_Release( p_src )",
          "old_line_content": "    vlc_mutex_unlock( &p_sys->lock );",
          "new_line_content": "    picture_Release( p_src );",
          "content_same": false
        },
        {
          "line": 515,
          "old_api": "vlc_mouse_GetMotion",
          "new_api": "VLC_CLIP",
          "old_text": "vlc_mouse_GetMotion( &i_dx, &i_dy, p_old, p_new )",
          "new_text": "VLC_CLIP( p_sys->i_pos_y + i_dy, 0,\n                                    (int)p_filter->fmt_in.video.i_height - i_logo_h )",
          "old_line_content": "            vlc_mouse_GetMotion( &i_dx, &i_dy, p_old, p_new );",
          "new_line_content": "            p_sys->i_pos_y = VLC_CLIP( p_sys->i_pos_y + i_dy, 0,",
          "content_same": false
        },
        {
          "line": 543,
          "old_api": "vlc_mutex_lock",
          "new_api": "LogoListUnload",
          "old_text": "vlc_mutex_lock( &p_sys->lock )",
          "new_text": "LogoListUnload( p_list )",
          "old_line_content": "    vlc_mutex_lock( &p_sys->lock );",
          "new_line_content": "        LogoListUnload( p_list );",
          "content_same": false
        },
        {
          "line": 544,
          "old_api": "strcmp",
          "new_api": "LogoListLoad",
          "old_text": "strcmp( psz_var, \"logo-file\" )",
          "new_text": "LogoListLoad( p_this, p_list, newval.psz_string )",
          "old_line_content": "    if( !strcmp( psz_var, \"logo-file\" ) )",
          "new_line_content": "        LogoListLoad( p_this, p_list, newval.psz_string );",
          "content_same": false
        },
        {
          "line": 546,
          "old_api": "LogoListUnload",
          "new_api": "strcmp",
          "old_text": "LogoListUnload( p_list )",
          "new_text": "strcmp( psz_var, \"logo-x\" )",
          "old_line_content": "        LogoListUnload( p_list );",
          "new_line_content": "    else if ( !strcmp( psz_var, \"logo-x\" ) )",
          "content_same": false
        },
        {
          "line": 588,
          "old_api": "video_format_Init",
          "new_api": "image_ReadUrl",
          "old_text": "video_format_Init( &fmt_out, VLC_CODEC_YUVA )",
          "new_text": "image_ReadUrl( p_image, psz_url, &fmt_out )",
          "old_line_content": "    video_format_Init( &fmt_out, VLC_CODEC_YUVA );",
          "new_line_content": "    picture_t *p_pic = image_ReadUrl( p_image, psz_url, &fmt_out );",
          "content_same": false
        },
        {
          "line": 590,
          "old_api": "vlc_path2uri",
          "new_api": "image_HandlerDelete",
          "old_text": "vlc_path2uri( psz_filename, NULL )",
          "new_text": "image_HandlerDelete( p_image )",
          "old_line_content": "    char *psz_url = vlc_path2uri( psz_filename, NULL );",
          "new_line_content": "    image_HandlerDelete( p_image );",
          "content_same": false
        },
        {
          "line": 591,
          "old_api": "image_ReadUrl",
          "new_api": "video_format_Clean",
          "old_text": "image_ReadUrl( p_image, psz_url, &fmt_out )",
          "new_text": "video_format_Clean( &fmt_out )",
          "old_line_content": "    picture_t *p_pic = image_ReadUrl( p_image, psz_url, &fmt_out );",
          "new_line_content": "    video_format_Clean( &fmt_out );",
          "content_same": false
        },
        {
          "line": 667,
          "old_api": "LoadPicture",
          "new_api": "msg_Warn",
          "old_text": "LoadPicture( p_this, psz_list )",
          "new_text": "msg_Warn( p_this, \"error while loading logo %s, will be skipped\",\n                      psz_list )",
          "old_line_content": "        p_logo[i].p_pic = LoadPicture( p_this, psz_list );",
          "new_line_content": "            msg_Warn( p_this, \"error while loading logo %s, will be skipped\",",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 512,
          "old_api": null,
          "new_api": "vlc_mouse_GetMotion",
          "old_text": null,
          "new_text": "vlc_mouse_GetMotion( &i_dx, &i_dy, p_old, p_new )",
          "old_line_content": "        if( p_sys->b_mouse_grab )",
          "new_line_content": "            vlc_mouse_GetMotion( &i_dx, &i_dy, p_old, p_new );",
          "content_same": false
        },
        {
          "line": 513,
          "old_api": null,
          "new_api": "VLC_CLIP",
          "old_text": null,
          "new_text": "VLC_CLIP( p_sys->i_pos_x + i_dx, 0,\n                                    (int)p_filter->fmt_in.video.i_width  - i_logo_w )",
          "old_line_content": "        {",
          "new_line_content": "            p_sys->i_pos_x = VLC_CLIP( p_sys->i_pos_x + i_dx, 0,",
          "content_same": false
        },
        {
          "line": 640,
          "old_api": null,
          "new_api": "strchr",
          "old_text": null,
          "new_text": "strchr( psz_list, ',' )",
          "old_line_content": "    for( unsigned i = 0; i < p_logo_list->i_count; i++ )",
          "new_line_content": "        char *p_c2 = strchr( psz_list, ',' );",
          "content_same": false
        },
        {
          "line": 521,
          "old_api": null,
          "new_api": "vlc_mutex_unlock",
          "old_text": null,
          "new_text": "vlc_mutex_unlock( &p_sys->lock )",
          "old_line_content": "",
          "new_line_content": "            vlc_mutex_unlock( &p_sys->lock );",
          "content_same": false
        },
        {
          "line": 649,
          "old_api": null,
          "new_api": "atoi",
          "old_text": null,
          "new_text": "atoi( p_c2+1 )",
          "old_line_content": "        {",
          "new_line_content": "                p_logo[i].i_delay = atoi( p_c2+1 );",
          "content_same": false
        },
        {
          "line": 651,
          "old_api": null,
          "new_api": "strchr",
          "old_text": null,
          "new_text": "strchr( p_c2+1, ',' )",
          "old_line_content": "            if( p_c2[1] != ',' && p_c2[1] != ';' && p_c2[1] != '\\0' )",
          "new_line_content": "            if( ( p_c2 = strchr( p_c2+1, ',' ) )",
          "content_same": false
        },
        {
          "line": 525,
          "old_api": null,
          "new_api": "vlc_mutex_unlock",
          "old_text": null,
          "new_text": "vlc_mutex_unlock( &p_sys->lock )",
          "old_line_content": "            return VLC_EGENERIC;",
          "new_line_content": "    vlc_mutex_unlock( &p_sys->lock );",
          "content_same": false
        },
        {
          "line": 653,
          "old_api": null,
          "new_api": "atoi",
          "old_text": null,
          "new_text": "atoi( p_c2 + 1 )",
          "old_line_content": "            *p_c2 = '\\0';",
          "new_line_content": "                p_logo[i].i_alpha = atoi( p_c2 + 1 );",
          "content_same": false
        },
        {
          "line": 404,
          "old_api": null,
          "new_api": "vlc_mutex_unlock",
          "old_text": null,
          "new_text": "vlc_mutex_unlock( &p_sys->lock )",
          "old_line_content": "                       p_logo->i_alpha : p_list->i_alpha );",
          "new_line_content": "    vlc_mutex_unlock( &p_sys->lock );",
          "content_same": false
        },
        {
          "line": 662,
          "old_api": null,
          "new_api": "msg_Dbg",
          "old_text": null,
          "new_text": "msg_Dbg( p_this, \"logo file name %s, delay %d, alpha %d\",\n                 psz_list, p_logo[i].i_delay, p_logo[i].i_alpha )",
          "old_line_content": "                *p_c = '\\0';",
          "new_line_content": "        msg_Dbg( p_this, \"logo file name %s, delay %d, alpha %d\",",
          "content_same": false
        },
        {
          "line": 536,
          "old_api": null,
          "new_api": "VLC_UNUSED",
          "old_text": null,
          "new_text": "VLC_UNUSED(oldval)",
          "old_line_content": "static int LogoCallback( vlc_object_t *p_this, char const *psz_var,",
          "new_line_content": "    VLC_UNUSED(oldval);",
          "content_same": false
        },
        {
          "line": 664,
          "old_api": null,
          "new_api": "LoadPicture",
          "old_text": null,
          "new_text": "LoadPicture( p_this, psz_list )",
          "old_line_content": "",
          "new_line_content": "        p_logo[i].p_pic = LoadPicture( p_this, psz_list );",
          "content_same": false
        },
        {
          "line": 540,
          "old_api": null,
          "new_api": "vlc_mutex_lock",
          "old_text": null,
          "new_text": "vlc_mutex_lock( &p_sys->lock )",
          "old_line_content": "    filter_sys_t *p_sys = p_data;",
          "new_line_content": "    vlc_mutex_lock( &p_sys->lock );",
          "content_same": false
        },
        {
          "line": 541,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp( psz_var, \"logo-file\" )",
          "old_line_content": "    logo_list_t *p_list = &p_sys->list;",
          "new_line_content": "    if( !strcmp( psz_var, \"logo-file\" ) )",
          "content_same": false
        },
        {
          "line": 417,
          "old_api": null,
          "new_api": "filter_NewPicture",
          "old_text": null,
          "new_text": "filter_NewPicture( p_filter )",
          "old_line_content": "    filter_sys_t *p_sys = p_filter->p_sys;",
          "new_line_content": "    picture_t *p_dst = filter_NewPicture( p_filter );",
          "content_same": false
        },
        {
          "line": 421,
          "old_api": null,
          "new_api": "picture_Copy",
          "old_text": null,
          "new_text": "picture_Copy( p_dst, p_src )",
          "old_line_content": "    if( !p_dst )",
          "new_line_content": "    picture_Copy( p_dst, p_src );",
          "content_same": false
        },
        {
          "line": 550,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp( psz_var, \"logo-y\" )",
          "old_line_content": "    {",
          "new_line_content": "    else if ( !strcmp( psz_var, \"logo-y\" ) )",
          "content_same": false
        },
        {
          "line": 678,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free( psz_original )",
          "old_line_content": "    /* initialize so that on the first update it will wrap back to 0 */",
          "new_line_content": "    free( psz_original );",
          "content_same": false
        },
        {
          "line": 554,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp( psz_var, \"logo-position\" )",
          "old_line_content": "    {",
          "new_line_content": "    else if ( !strcmp( psz_var, \"logo-position\" ) )",
          "content_same": false
        },
        {
          "line": 428,
          "old_api": null,
          "new_api": "LogoListNext",
          "old_text": null,
          "new_text": "LogoListNext( p_list, p_src->date )",
          "old_line_content": "",
          "new_line_content": "        p_logo = LogoListNext( p_list, p_src->date );",
          "content_same": false
        },
        {
          "line": 558,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp( psz_var, \"logo-opacity\" )",
          "old_line_content": "    {",
          "new_line_content": "    else if ( !strcmp( psz_var, \"logo-opacity\" ) )",
          "content_same": false
        },
        {
          "line": 430,
          "old_api": null,
          "new_api": "LogoListCurrent",
          "old_text": null,
          "new_text": "LogoListCurrent( p_list )",
          "old_line_content": "    if( p_list->i_next_pic < p_src->date )",
          "new_line_content": "        p_logo = LogoListCurrent( p_list );",
          "content_same": false
        },
        {
          "line": 560,
          "old_api": null,
          "new_api": "VLC_CLIP",
          "old_text": null,
          "new_text": "VLC_CLIP( newval.i_int, 0, 255 )",
          "old_line_content": "    }",
          "new_line_content": "        p_list->i_alpha = VLC_CLIP( newval.i_int, 0, 255 );",
          "content_same": false
        },
        {
          "line": 562,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp( psz_var, \"logo-repeat\" )",
          "old_line_content": "    {",
          "new_line_content": "    else if ( !strcmp( psz_var, \"logo-repeat\" ) )",
          "content_same": false
        },
        {
          "line": 691,
          "old_api": null,
          "new_api": "picture_Release",
          "old_text": null,
          "new_text": "picture_Release( p_logo->p_pic )",
          "old_line_content": "        logo_t *p_logo = &p_list->p_logo[i];",
          "new_line_content": "            picture_Release( p_logo->p_pic );",
          "content_same": false
        },
        {
          "line": 693,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free( p_list->p_logo )",
          "old_line_content": "        if( p_logo->p_pic )",
          "new_line_content": "    free( p_list->p_logo );",
          "content_same": false
        },
        {
          "line": 567,
          "old_api": null,
          "new_api": "vlc_mutex_unlock",
          "old_text": null,
          "new_text": "vlc_mutex_unlock( &p_sys->lock )",
          "old_line_content": "        p_list->i_repeat = newval.i_int;",
          "new_line_content": "    vlc_mutex_unlock( &p_sys->lock );",
          "content_same": false
        },
        {
          "line": 703,
          "old_api": null,
          "new_api": "LogoListCurrent",
          "old_text": null,
          "new_text": "LogoListCurrent( p_list )",
          "old_line_content": "{",
          "new_line_content": "    logo_t *p_logo = LogoListCurrent( p_list );",
          "content_same": false
        },
        {
          "line": 705,
          "old_api": null,
          "new_api": "VLC_TICK_FROM_MS",
          "old_text": null,
          "new_text": "VLC_TICK_FROM_MS( p_logo->i_delay != -1 ?\n                          p_logo->i_delay : p_list->i_delay )",
          "old_line_content": "",
          "new_line_content": "    p_list->i_next_pic = i_date + VLC_TICK_FROM_MS( p_logo->i_delay != -1 ?",
          "content_same": false
        },
        {
          "line": 580,
          "old_api": null,
          "new_api": "image_HandlerCreate",
          "old_text": null,
          "new_text": "image_HandlerCreate( p_this )",
          "old_line_content": "    if( !psz_filename )",
          "new_line_content": "    image_handler_t *p_image = image_HandlerCreate( p_this );",
          "content_same": false
        },
        {
          "line": 585,
          "old_api": null,
          "new_api": "video_format_Init",
          "old_text": null,
          "new_text": "video_format_Init( &fmt_out, VLC_CODEC_YUVA )",
          "old_line_content": "        return NULL;",
          "new_line_content": "    video_format_Init( &fmt_out, VLC_CODEC_YUVA );",
          "content_same": false
        },
        {
          "line": 587,
          "old_api": null,
          "new_api": "vlc_path2uri",
          "old_text": null,
          "new_text": "vlc_path2uri( psz_filename, NULL )",
          "old_line_content": "    video_format_t fmt_out;",
          "new_line_content": "    char *psz_url = vlc_path2uri( psz_filename, NULL );",
          "content_same": false
        },
        {
          "line": 459,
          "old_api": null,
          "new_api": "msg_Warn",
          "old_text": null,
          "new_text": "msg_Warn( p_filter,\n                \"logo(%ix%i) doesn't fit into video(%ix%i)\",\n                p_fmt->i_visible_width, p_fmt->i_visible_height,\n                i_dst_w,i_dst_h )",
          "old_line_content": "",
          "new_line_content": "            msg_Warn( p_filter,",
          "content_same": false
        },
        {
          "line": 589,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free( psz_url )",
          "old_line_content": "",
          "new_line_content": "    free( psz_url );",
          "content_same": false
        },
        {
          "line": 469,
          "old_api": null,
          "new_api": "filter_ConfigureBlend",
          "old_text": null,
          "new_text": "filter_ConfigureBlend( p_sys->p_blend, i_dst_w, i_dst_h, p_fmt )",
          "old_line_content": "",
          "new_line_content": "        if( filter_ConfigureBlend( p_sys->p_blend, i_dst_w, i_dst_h, p_fmt ) ||",
          "content_same": false
        },
        {
          "line": 470,
          "old_api": null,
          "new_api": "filter_Blend",
          "old_text": null,
          "new_text": "filter_Blend( p_sys->p_blend, p_dst, p_sys->i_pos_x, p_sys->i_pos_y,\n                          p_pic, i_alpha )",
          "old_line_content": "        /* */",
          "new_line_content": "            filter_Blend( p_sys->p_blend, p_dst, p_sys->i_pos_x, p_sys->i_pos_y,",
          "content_same": false
        },
        {
          "line": 614,
          "old_api": null,
          "new_api": "strdup",
          "old_text": null,
          "new_text": "strdup( psz_filename )",
          "old_line_content": "    p_logo_list->i_counter = 0;",
          "new_line_content": "    psz_original = psz_list = strdup( psz_filename );",
          "content_same": false
        },
        {
          "line": 488,
          "old_api": null,
          "new_api": "vlc_mutex_lock",
          "old_text": null,
          "new_text": "vlc_mutex_lock( &p_sys->lock )",
          "old_line_content": "{",
          "new_line_content": "    vlc_mutex_lock( &p_sys->lock );",
          "content_same": false
        },
        {
          "line": 489,
          "old_api": null,
          "new_api": "LogoListCurrent",
          "old_text": null,
          "new_text": "LogoListCurrent( &p_sys->list )",
          "old_line_content": "    filter_sys_t *p_sys = p_filter->p_sys;",
          "new_line_content": "    logo_t *p_logo = LogoListCurrent( &p_sys->list );",
          "content_same": false
        },
        {
          "line": 504,
          "old_api": null,
          "new_api": "vlc_mouse_HasPressed",
          "old_text": null,
          "new_text": "vlc_mouse_HasPressed( p_old, p_new, MOUSE_BUTTON_LEFT )",
          "old_line_content": "                            p_new->i_y >= p_sys->i_pos_y &&",
          "new_line_content": "        if( b_over && vlc_mouse_HasPressed( p_old, p_new, MOUSE_BUTTON_LEFT ) )",
          "content_same": false
        },
        {
          "line": 621,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen( psz_list )",
          "old_line_content": "",
          "new_line_content": "    for( unsigned i = 0; i < strlen( psz_list ); i++ )",
          "content_same": false
        },
        {
          "line": 628,
          "old_api": null,
          "new_api": "calloc",
          "old_text": null,
          "new_text": "calloc( p_logo_list->i_count, sizeof(*p_logo) )",
          "old_line_content": "    }",
          "new_line_content": "    p_logo              = calloc( p_logo_list->i_count, sizeof(*p_logo) );",
          "content_same": false
        },
        {
          "line": 632,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free( psz_list )",
          "old_line_content": "",
          "new_line_content": "        free( psz_list );",
          "content_same": false
        },
        {
          "line": 506,
          "old_api": null,
          "new_api": "vlc_mouse_HasReleased",
          "old_text": null,
          "new_text": "vlc_mouse_HasReleased( p_old, p_new, MOUSE_BUTTON_LEFT )",
          "old_line_content": "",
          "new_line_content": "        else if( vlc_mouse_HasReleased( p_old, p_new, MOUSE_BUTTON_LEFT ) )",
          "content_same": false
        },
        {
          "line": 639,
          "old_api": null,
          "new_api": "strchr",
          "old_text": null,
          "new_text": "strchr( psz_list, ';' )",
          "old_line_content": "    /* Fill the data */",
          "new_line_content": "        char *p_c  = strchr( psz_list, ';' );",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 384,
          "old_api": "picture_Copy",
          "new_api": null,
          "old_text": "picture_Copy( p_region->p_picture, p_pic )",
          "new_text": null,
          "old_line_content": "    picture_Copy( p_region->p_picture, p_pic );",
          "new_line_content": "    if( p_sys->i_pos < 0 )",
          "content_same": false
        },
        {
          "line": 642,
          "old_api": "strchr",
          "new_api": null,
          "old_text": "strchr( psz_list, ';' )",
          "new_text": null,
          "old_line_content": "        char *p_c  = strchr( psz_list, ';' );",
          "new_line_content": "        p_logo[i].i_alpha = -1; /* use default settings */",
          "content_same": false
        },
        {
          "line": 643,
          "old_api": "strchr",
          "new_api": null,
          "old_text": "strchr( psz_list, ',' )",
          "new_text": null,
          "old_line_content": "        char *p_c2 = strchr( psz_list, ',' );",
          "new_line_content": "        p_logo[i].i_delay = -1; /* use default settings */",
          "content_same": false
        },
        {
          "line": 516,
          "old_api": "VLC_CLIP",
          "new_api": null,
          "old_text": "VLC_CLIP( p_sys->i_pos_x + i_dx, 0,\n                                    (int)p_filter->fmt_in.video.i_width  - i_logo_w )",
          "new_text": null,
          "old_line_content": "            p_sys->i_pos_x = VLC_CLIP( p_sys->i_pos_x + i_dx, 0,",
          "new_line_content": "                                    (int)p_filter->fmt_in.video.i_height - i_logo_h );",
          "content_same": false
        },
        {
          "line": 518,
          "old_api": "VLC_CLIP",
          "new_api": null,
          "old_text": "VLC_CLIP( p_sys->i_pos_y + i_dy, 0,\n                                    (int)p_filter->fmt_in.video.i_height - i_logo_h )",
          "new_text": null,
          "old_line_content": "            p_sys->i_pos_y = VLC_CLIP( p_sys->i_pos_y + i_dy, 0,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 524,
          "old_api": "vlc_mutex_unlock",
          "new_api": null,
          "old_text": "vlc_mutex_unlock( &p_sys->lock )",
          "new_text": null,
          "old_line_content": "            vlc_mutex_unlock( &p_sys->lock );",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 652,
          "old_api": "atoi",
          "new_api": null,
          "old_text": "atoi( p_c2+1 )",
          "new_text": null,
          "old_line_content": "                p_logo[i].i_delay = atoi( p_c2+1 );",
          "new_line_content": "                && ( p_c2 < p_c || !p_c ) && p_c2[1] != ';' && p_c2[1] != '\\0' )",
          "content_same": false
        },
        {
          "line": 654,
          "old_api": "strchr",
          "new_api": null,
          "old_text": "strchr( p_c2+1, ',' )",
          "new_text": null,
          "old_line_content": "            if( ( p_c2 = strchr( p_c2+1, ',' ) )",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 528,
          "old_api": "vlc_mutex_unlock",
          "new_api": null,
          "old_text": "vlc_mutex_unlock( &p_sys->lock )",
          "new_text": null,
          "old_line_content": "    vlc_mutex_unlock( &p_sys->lock );",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 656,
          "old_api": "atoi",
          "new_api": null,
          "old_text": "atoi( p_c2 + 1 )",
          "new_text": null,
          "old_line_content": "                p_logo[i].i_alpha = atoi( p_c2 + 1 );",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 407,
          "old_api": "vlc_mutex_unlock",
          "new_api": null,
          "old_text": "vlc_mutex_unlock( &p_sys->lock )",
          "new_text": null,
          "old_line_content": "    vlc_mutex_unlock( &p_sys->lock );",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 665,
          "old_api": "msg_Dbg",
          "new_api": null,
          "old_text": "msg_Dbg( p_this, \"logo file name %s, delay %d, alpha %d\",\n                 psz_list, p_logo[i].i_delay, p_logo[i].i_alpha )",
          "new_text": null,
          "old_line_content": "        msg_Dbg( p_this, \"logo file name %s, delay %d, alpha %d\",",
          "new_line_content": "        if( !p_logo[i].p_pic )",
          "content_same": false
        },
        {
          "line": 539,
          "old_api": "VLC_UNUSED",
          "new_api": null,
          "old_text": "VLC_UNUSED(oldval)",
          "new_text": null,
          "old_line_content": "    VLC_UNUSED(oldval);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 670,
          "old_api": "msg_Warn",
          "new_api": null,
          "old_text": "msg_Warn( p_this, \"error while loading logo %s, will be skipped\",\n                      psz_list )",
          "new_text": null,
          "old_line_content": "            msg_Warn( p_this, \"error while loading logo %s, will be skipped\",",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 547,
          "old_api": "LogoListLoad",
          "new_api": null,
          "old_text": "LogoListLoad( p_this, p_list, newval.psz_string )",
          "new_text": null,
          "old_line_content": "        LogoListLoad( p_this, p_list, newval.psz_string );",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 420,
          "old_api": "filter_NewPicture",
          "new_api": null,
          "old_text": "filter_NewPicture( p_filter )",
          "new_text": null,
          "old_line_content": "    picture_t *p_dst = filter_NewPicture( p_filter );",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 549,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp( psz_var, \"logo-x\" )",
          "new_text": null,
          "old_line_content": "    else if ( !strcmp( psz_var, \"logo-x\" ) )",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 553,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp( psz_var, \"logo-y\" )",
          "new_text": null,
          "old_line_content": "    else if ( !strcmp( psz_var, \"logo-y\" ) )",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 681,
          "old_api": "free",
          "new_api": null,
          "old_text": "free( psz_original )",
          "new_text": null,
          "old_line_content": "    free( psz_original );",
          "new_line_content": "/**",
          "content_same": false
        },
        {
          "line": 427,
          "old_api": "vlc_mutex_lock",
          "new_api": null,
          "old_text": "vlc_mutex_lock( &p_sys->lock )",
          "new_text": null,
          "old_line_content": "    vlc_mutex_lock( &p_sys->lock );",
          "new_line_content": "    if( p_list->i_next_pic < p_src->date )",
          "content_same": false
        },
        {
          "line": 557,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp( psz_var, \"logo-position\" )",
          "new_text": null,
          "old_line_content": "    else if ( !strcmp( psz_var, \"logo-position\" ) )",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 431,
          "old_api": "LogoListNext",
          "new_api": null,
          "old_text": "LogoListNext( p_list, p_src->date )",
          "new_text": null,
          "old_line_content": "        p_logo = LogoListNext( p_list, p_src->date );",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 561,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp( psz_var, \"logo-opacity\" )",
          "new_text": null,
          "old_line_content": "    else if ( !strcmp( psz_var, \"logo-opacity\" ) )",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 433,
          "old_api": "LogoListCurrent",
          "new_api": null,
          "old_text": "LogoListCurrent( p_list )",
          "new_text": null,
          "old_line_content": "        p_logo = LogoListCurrent( p_list );",
          "new_line_content": "    const picture_t *p_pic = p_logo->p_pic;",
          "content_same": false
        },
        {
          "line": 563,
          "old_api": "VLC_CLIP",
          "new_api": null,
          "old_text": "VLC_CLIP( newval.i_int, 0, 255 )",
          "new_text": null,
          "old_line_content": "        p_list->i_alpha = VLC_CLIP( newval.i_int, 0, 255 );",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 565,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp( psz_var, \"logo-repeat\" )",
          "new_text": null,
          "old_line_content": "    else if ( !strcmp( psz_var, \"logo-repeat\" ) )",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 694,
          "old_api": "picture_Release",
          "new_api": null,
          "old_text": "picture_Release( p_logo->p_pic )",
          "new_text": null,
          "old_line_content": "            picture_Release( p_logo->p_pic );",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 696,
          "old_api": "free",
          "new_api": null,
          "old_text": "free( p_list->p_logo )",
          "new_text": null,
          "old_line_content": "    free( p_list->p_logo );",
          "new_line_content": "/**",
          "content_same": false
        },
        {
          "line": 570,
          "old_api": "vlc_mutex_unlock",
          "new_api": null,
          "old_text": "vlc_mutex_unlock( &p_sys->lock )",
          "new_text": null,
          "old_line_content": "    vlc_mutex_unlock( &p_sys->lock );",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 706,
          "old_api": "LogoListCurrent",
          "new_api": null,
          "old_text": "LogoListCurrent( p_list )",
          "new_text": null,
          "old_line_content": "    logo_t *p_logo = LogoListCurrent( p_list );",
          "new_line_content": "                          p_logo->i_delay : p_list->i_delay );",
          "content_same": false
        },
        {
          "line": 708,
          "old_api": "VLC_TICK_FROM_MS",
          "new_api": null,
          "old_text": "VLC_TICK_FROM_MS( p_logo->i_delay != -1 ?\n                          p_logo->i_delay : p_list->i_delay )",
          "new_text": null,
          "old_line_content": "    p_list->i_next_pic = i_date + VLC_TICK_FROM_MS( p_logo->i_delay != -1 ?",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 583,
          "old_api": "image_HandlerCreate",
          "new_api": null,
          "old_text": "image_HandlerCreate( p_this )",
          "new_text": null,
          "old_line_content": "    image_handler_t *p_image = image_HandlerCreate( p_this );",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 462,
          "old_api": "msg_Warn",
          "new_api": null,
          "old_text": "msg_Warn( p_filter,\n                \"logo(%ix%i) doesn't fit into video(%ix%i)\",\n                p_fmt->i_visible_width, p_fmt->i_visible_height,\n                i_dst_w,i_dst_h )",
          "new_text": null,
          "old_line_content": "            msg_Warn( p_filter,",
          "new_line_content": "                i_dst_w,i_dst_h );",
          "content_same": false
        },
        {
          "line": 592,
          "old_api": "free",
          "new_api": null,
          "old_text": "free( psz_url )",
          "new_text": null,
          "old_line_content": "    free( psz_url );",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 593,
          "old_api": "image_HandlerDelete",
          "new_api": null,
          "old_text": "image_HandlerDelete( p_image )",
          "new_text": null,
          "old_line_content": "    image_HandlerDelete( p_image );",
          "new_line_content": "    return p_pic;",
          "content_same": false
        },
        {
          "line": 594,
          "old_api": "video_format_Clean",
          "new_api": null,
          "old_text": "video_format_Clean( &fmt_out )",
          "new_text": null,
          "old_line_content": "    video_format_Clean( &fmt_out );",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 507,
          "old_api": "vlc_mouse_HasPressed",
          "new_api": null,
          "old_text": "vlc_mouse_HasPressed( p_old, p_new, MOUSE_BUTTON_LEFT )",
          "new_text": null,
          "old_line_content": "        if( b_over && vlc_mouse_HasPressed( p_old, p_new, MOUSE_BUTTON_LEFT ) )",
          "new_line_content": "            p_sys->b_mouse_grab = false;",
          "content_same": false
        },
        {
          "line": 472,
          "old_api": "filter_ConfigureBlend",
          "new_api": null,
          "old_text": "filter_ConfigureBlend( p_sys->p_blend, i_dst_w, i_dst_h, p_fmt )",
          "new_text": null,
          "old_line_content": "        if( filter_ConfigureBlend( p_sys->p_blend, i_dst_w, i_dst_h, p_fmt ) ||",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 482,
          "old_api": "picture_Release",
          "new_api": null,
          "old_text": "picture_Release( p_src )",
          "new_text": null,
          "old_line_content": "    picture_Release( p_src );",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 617,
          "old_api": "strdup",
          "new_api": null,
          "old_text": "strdup( psz_filename )",
          "new_text": null,
          "old_line_content": "    psz_original = psz_list = strdup( psz_filename );",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 491,
          "old_api": "vlc_mutex_lock",
          "new_api": null,
          "old_text": "vlc_mutex_lock( &p_sys->lock )",
          "new_text": null,
          "old_line_content": "    vlc_mutex_lock( &p_sys->lock );",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 492,
          "old_api": "LogoListCurrent",
          "new_api": null,
          "old_text": "LogoListCurrent( &p_sys->list )",
          "new_text": null,
          "old_line_content": "    logo_t *p_logo = LogoListCurrent( &p_sys->list );",
          "new_line_content": "    if( p_pic )",
          "content_same": false
        },
        {
          "line": 624,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen( psz_list )",
          "new_text": null,
          "old_line_content": "    for( unsigned i = 0; i < strlen( psz_list ); i++ )",
          "new_line_content": "            p_logo_list->i_count++;",
          "content_same": false
        },
        {
          "line": 631,
          "old_api": "calloc",
          "new_api": null,
          "old_text": "calloc( p_logo_list->i_count, sizeof(*p_logo) )",
          "new_text": null,
          "old_line_content": "    p_logo              = calloc( p_logo_list->i_count, sizeof(*p_logo) );",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 635,
          "old_api": "free",
          "new_api": null,
          "old_text": "free( psz_list )",
          "new_text": null,
          "old_line_content": "        free( psz_list );",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 509,
          "old_api": "vlc_mouse_HasReleased",
          "new_api": null,
          "old_text": "vlc_mouse_HasReleased( p_old, p_new, MOUSE_BUTTON_LEFT )",
          "new_text": null,
          "old_line_content": "        else if( vlc_mouse_HasReleased( p_old, p_new, MOUSE_BUTTON_LEFT ) )",
          "new_line_content": "        if( p_sys->b_mouse_grab )",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 13,
      "total_additions": 45,
      "total_deletions": 46,
      "total_api_changes": 104
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 4,
        "api_related_lines": 104,
        "non_api_lines": 2,
        "non_api_line_numbers": [
          385,
          383
        ]
      }
    },
    "api_calls_before": 118,
    "api_calls_after": 117,
    "diff_info": {
      "added_lines": 1,
      "removed_lines": 4,
      "total_diff_lines": 24
    }
  }
}
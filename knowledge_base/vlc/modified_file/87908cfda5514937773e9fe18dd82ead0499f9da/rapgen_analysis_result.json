{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/vlc/modified_file/87908cfda5514937773e9fe18dd82ead0499f9da",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/vlc/modified_file/87908cfda5514937773e9fe18dd82ead0499f9da/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/vlc/modified_file/87908cfda5514937773e9fe18dd82ead0499f9da/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/vlc/modified_file/87908cfda5514937773e9fe18dd82ead0499f9da/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 642,
          "old_api": "msg_Dbg",
          "new_api": "aout_FifoReset",
          "old_text": "msg_Dbg( p_aout,\n                 \"audio output is starving (no input), playing silence\" )",
          "new_text": "aout_FifoReset( &p->fifo )",
          "old_line_content": "            msg_Dbg( p_aout,",
          "new_line_content": "        aout_FifoReset( &p->fifo );",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 672,
          "old_api": null,
          "new_api": "msg_Warn",
          "old_text": null,
          "new_text": "msg_Warn( p_aout, \"output date isn't PTS date, requesting \"\n                  \"resampling (%\"PRId64\")\", delta )",
          "old_line_content": "",
          "new_line_content": "        msg_Warn( p_aout, \"output date isn't PTS date, requesting \"",
          "content_same": false
        },
        {
          "line": 675,
          "old_api": null,
          "new_api": "aout_FifoMoveDates (&p->partial, delta)",
          "old_text": null,
          "new_text": "aout_FifoMoveDates (&p->partial, delta)",
          "old_line_content": "#warning FIXME: feed back to input for resampling!!!",
          "new_line_content": "        aout_FifoMoveDates (&p->partial, delta);",
          "content_same": false
        },
        {
          "line": 644,
          "old_api": null,
          "new_api": "msg_Dbg",
          "old_text": null,
          "new_text": "msg_Dbg( p_aout,\n                 \"audio output is starving (no input), playing silence\" )",
          "old_line_content": "        p_aout->starving = true;",
          "new_line_content": "            msg_Dbg( p_aout,",
          "content_same": false
        },
        {
          "line": 676,
          "old_api": null,
          "new_api": "aout_FifoMoveDates (p_fifo, delta)",
          "old_text": null,
          "new_text": "aout_FifoMoveDates (p_fifo, delta)",
          "old_line_content": "    }",
          "new_line_content": "        aout_FifoMoveDates (p_fifo, delta);",
          "content_same": false
        },
        {
          "line": 680,
          "old_api": null,
          "new_api": "vlc_mutex_unlock",
          "old_text": null,
          "new_text": "vlc_mutex_unlock( &p->lock )",
          "old_line_content": "}",
          "new_line_content": "    vlc_mutex_unlock( &p->lock );",
          "content_same": false
        },
        {
          "line": 658,
          "old_api": null,
          "new_api": "msg_Dbg",
          "old_text": null,
          "new_text": "msg_Dbg( p_aout, \"audio output is starving (%\"PRId64\"), \"\n                     \"playing silence\", -delta )",
          "old_line_content": "        p->starving = true;",
          "new_line_content": "            msg_Dbg( p_aout, \"audio output is starving (%\"PRId64\"), \"",
          "content_same": false
        },
        {
          "line": 629,
          "old_api": null,
          "new_api": "msg_Dbg",
          "old_text": null,
          "new_text": "msg_Dbg( p_aout, \"audio output is too slow (%\"PRId64\")",
          "old_line_content": "                 p_buffer->i_length );",
          "new_line_content": "        msg_Dbg( p_aout, \"audio output is too slow (%\"PRId64\"), \"",
          "content_same": false
        },
        {
          "line": 632,
          "old_api": null,
          "new_api": "aout_FifoPop",
          "old_text": null,
          "new_text": "aout_FifoPop( p_fifo )",
          "old_line_content": "",
          "new_line_content": "        aout_BufferFree( aout_FifoPop( p_fifo ) );",
          "content_same": false
        },
        {
          "line": 666,
          "old_api": null,
          "new_api": "aout_FifoPop",
          "old_text": null,
          "new_text": "aout_FifoPop( p_fifo )",
          "old_line_content": "    if( !b_can_sleek",
          "new_line_content": "    p_buffer = aout_FifoPop( p_fifo );",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 640,
          "old_api": "aout_FifoReset",
          "new_api": null,
          "old_text": "aout_FifoReset( &p->fifo )",
          "new_text": null,
          "old_line_content": "        aout_FifoReset( &p->fifo );",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 673,
          "old_api": "aout_FifoMoveDates (&p->partial, delta)",
          "new_api": null,
          "old_text": "aout_FifoMoveDates (&p->partial, delta)",
          "new_text": null,
          "old_line_content": "        aout_FifoMoveDates (&p->partial, delta);",
          "new_line_content": "                  \"resampling (%\"PRId64\")\", delta );",
          "content_same": false
        },
        {
          "line": 674,
          "old_api": "aout_FifoMoveDates (p_fifo, delta)",
          "new_api": null,
          "old_text": "aout_FifoMoveDates (p_fifo, delta)",
          "new_text": null,
          "old_line_content": "        aout_FifoMoveDates (p_fifo, delta);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 678,
          "old_api": "vlc_mutex_unlock",
          "new_api": null,
          "old_text": "vlc_mutex_unlock( &p->lock )",
          "new_text": null,
          "old_line_content": "    vlc_mutex_unlock( &p->lock );",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 656,
          "old_api": "msg_Dbg",
          "new_api": null,
          "old_text": "msg_Dbg( p_aout, \"audio output is starving (%\"PRId64\"), \"\n                     \"playing silence\", -delta )",
          "new_text": null,
          "old_line_content": "            msg_Dbg( p_aout, \"audio output is starving (%\"PRId64\"), \"",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 627,
          "old_api": "msg_Dbg",
          "new_api": null,
          "old_text": "msg_Dbg( p_aout, \"audio output is too slow (%\"PRId64\")",
          "new_text": null,
          "old_line_content": "        msg_Dbg( p_aout, \"audio output is too slow (%\"PRId64\"), \"",
          "new_line_content": "     && p_buffer->i_pts < (b_can_sleek ? start_date : now) - AOUT_MAX_PTS_DELAY )",
          "content_same": false
        },
        {
          "line": 630,
          "old_api": "aout_FifoPop",
          "new_api": null,
          "old_text": "aout_FifoPop( p_fifo )",
          "new_text": null,
          "old_line_content": "        aout_BufferFree( aout_FifoPop( p_fifo ) );",
          "new_line_content": "                 \"trashing %\"PRId64\"us\", now - p_buffer->i_pts,",
          "content_same": false
        },
        {
          "line": 664,
          "old_api": "aout_FifoPop",
          "new_api": null,
          "old_text": "aout_FifoPop( p_fifo )",
          "new_text": null,
          "old_line_content": "    p_buffer = aout_FifoPop( p_fifo );",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 670,
          "old_api": "msg_Warn",
          "new_api": null,
          "old_text": "msg_Warn( p_aout, \"output date isn't PTS date, requesting \"\n                  \"resampling (%\"PRId64\")\", delta )",
          "new_text": null,
          "old_line_content": "        msg_Warn( p_aout, \"output date isn't PTS date, requesting \"",
          "new_line_content": "    {",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 1,
      "total_additions": 9,
      "total_deletions": 9,
      "total_api_changes": 19
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 3,
        "api_related_lines": 19,
        "non_api_lines": 3,
        "non_api_line_numbers": [
          616,
          620,
          621
        ]
      }
    },
    "api_calls_before": 137,
    "api_calls_after": 137,
    "diff_info": {
      "added_lines": 3,
      "removed_lines": 1,
      "total_diff_lines": 19
    }
  }
}
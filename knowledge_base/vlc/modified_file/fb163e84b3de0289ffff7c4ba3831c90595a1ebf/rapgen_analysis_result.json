{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/vlc/modified_file/fb163e84b3de0289ffff7c4ba3831c90595a1ebf",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/vlc/modified_file/fb163e84b3de0289ffff7c4ba3831c90595a1ebf/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/vlc/modified_file/fb163e84b3de0289ffff7c4ba3831c90595a1ebf/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/vlc/modified_file/fb163e84b3de0289ffff7c4ba3831c90595a1ebf/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 1199,
          "old_api": "var_Create",
          "new_api": "var_Get",
          "old_text": "var_Create( p_enc->p_libvlc, \"pthread_win32_count\", VLC_VAR_INTEGER )",
          "new_text": "var_Get( p_enc->p_libvlc, \"pthread_win32_mutex\", &lock )",
          "old_line_content": "    var_Create( p_enc->p_libvlc, \"pthread_win32_count\", VLC_VAR_INTEGER );",
          "new_line_content": "    var_Get( p_enc->p_libvlc, \"pthread_win32_mutex\", &lock );",
          "content_same": false
        },
        {
          "line": 1200,
          "old_api": "var_Get",
          "new_api": "vlc_mutex_lock",
          "old_text": "var_Get( p_enc->p_libvlc, \"pthread_win32_count\", &count )",
          "new_text": "vlc_mutex_lock( lock.p_address )",
          "old_line_content": "    var_Get( p_enc->p_libvlc, \"pthread_win32_count\", &count );",
          "new_line_content": "    vlc_mutex_lock( lock.p_address );",
          "content_same": false
        },
        {
          "line": 1207,
          "old_api": "msg_Warn",
          "new_api": "msg_Dbg",
          "old_text": "msg_Warn( p_enc, \"pthread Win32 Initialization failed\" )",
          "new_text": "msg_Dbg( p_enc, \"initializing pthread-win32\" )",
          "old_line_content": "            msg_Warn( p_enc, \"pthread Win32 Initialization failed\" );",
          "new_line_content": "        msg_Dbg( p_enc, \"initializing pthread-win32\" );",
          "content_same": false
        },
        {
          "line": 1208,
          "old_api": "vlc_mutex_unlock",
          "new_api": "pthread_win32_thread_attach_np",
          "old_text": "vlc_mutex_unlock( lock.p_address )",
          "new_text": "pthread_win32_thread_attach_np()",
          "old_line_content": "            vlc_mutex_unlock( lock.p_address );",
          "new_line_content": "        if( !pthread_win32_process_attach_np() || !pthread_win32_thread_attach_np() )   ",
          "content_same": false
        },
        {
          "line": 1355,
          "old_api": "var_Create",
          "new_api": "var_Get",
          "old_text": "var_Create( p_enc->p_libvlc, \"pthread_win32_count\", VLC_VAR_INTEGER )",
          "new_text": "var_Get( p_enc->p_libvlc, \"pthread_win32_mutex\", &lock )",
          "old_line_content": "    var_Create( p_enc->p_libvlc, \"pthread_win32_count\", VLC_VAR_INTEGER );",
          "new_line_content": "    var_Get( p_enc->p_libvlc, \"pthread_win32_mutex\", &lock );",
          "content_same": false
        },
        {
          "line": 1356,
          "old_api": "var_Get",
          "new_api": "vlc_mutex_lock",
          "old_text": "var_Get( p_enc->p_libvlc, \"pthread_win32_count\", &count )",
          "new_text": "vlc_mutex_lock( lock.p_address )",
          "old_line_content": "    var_Get( p_enc->p_libvlc, \"pthread_win32_count\", &count );",
          "new_line_content": "    vlc_mutex_lock( lock.p_address );",
          "content_same": false
        },
        {
          "line": 1358,
          "old_api": "var_Set",
          "new_api": "var_Create",
          "old_text": "var_Set( p_enc->p_libvlc, \"pthread_win32_count\", count )",
          "new_text": "var_Create( p_enc->p_libvlc, \"pthread_win32_count\", VLC_VAR_INTEGER )",
          "old_line_content": "    var_Set( p_enc->p_libvlc, \"pthread_win32_count\", count );",
          "new_line_content": "    var_Create( p_enc->p_libvlc, \"pthread_win32_count\", VLC_VAR_INTEGER );",
          "content_same": false
        },
        {
          "line": 1366,
          "old_api": "vlc_mutex_unlock",
          "new_api": "pthread_win32_process_detach_np",
          "old_text": "vlc_mutex_unlock( lock.p_address )",
          "new_text": "pthread_win32_process_detach_np()",
          "old_line_content": "    vlc_mutex_unlock( lock.p_address );",
          "new_line_content": "        pthread_win32_process_detach_np();",
          "content_same": false
        },
        {
          "line": 1369,
          "old_api": "free",
          "new_api": "vlc_mutex_unlock",
          "old_text": "free( p_sys->p_buffer )",
          "new_text": "vlc_mutex_unlock( lock.p_address )",
          "old_line_content": "    free( p_sys->p_buffer );",
          "new_line_content": "    vlc_mutex_unlock( lock.p_address );",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 1285,
          "old_api": null,
          "new_api": "x264_nal_encode",
          "old_text": null,
          "new_text": "x264_nal_encode( p_sys->p_buffer + i_out, &i_size, 1, &nal[i] )",
          "old_line_content": "    }",
          "new_line_content": "        x264_nal_encode( p_sys->p_buffer + i_out, &i_size, 1, &nal[i] );",
          "content_same": false
        },
        {
          "line": 1290,
          "old_api": null,
          "new_api": "block_New",
          "old_text": null,
          "new_text": "block_New( p_enc, i_out )",
          "old_line_content": "    if( pic.i_type == X264_TYPE_IDR || pic.i_type == X264_TYPE_I )",
          "new_line_content": "    p_block = block_New( p_enc, i_out );",
          "content_same": false
        },
        {
          "line": 1291,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy( p_block->p_buffer, p_sys->p_buffer, i_out )",
          "old_line_content": "        p_block->i_flags |= BLOCK_FLAG_TYPE_I;",
          "new_line_content": "    memcpy( p_block->p_buffer, p_sys->p_buffer, i_out );",
          "content_same": false
        },
        {
          "line": 1301,
          "old_api": null,
          "new_api": "I64C",
          "old_text": null,
          "new_text": "I64C(1000000)",
          "old_line_content": "",
          "new_line_content": "    p_block->i_length = I64C(1000000) *",
          "content_same": false
        },
        {
          "line": 1177,
          "old_api": null,
          "new_api": "var_Get",
          "old_text": null,
          "new_text": "var_Get( p_enc, SOUT_CFG_PREFIX \"stats\", &val )",
          "old_line_content": "    if( val.psz_string )",
          "new_line_content": "    var_Get( p_enc, SOUT_CFG_PREFIX \"stats\", &val );",
          "content_same": false
        },
        {
          "line": 1185,
          "old_api": null,
          "new_api": "var_Get",
          "old_text": null,
          "new_text": "var_Get( p_enc, SOUT_CFG_PREFIX \"pass\", &val )",
          "old_line_content": "    if( val.i_int > 0 && val.i_int <= 3 )",
          "new_line_content": "    var_Get( p_enc, SOUT_CFG_PREFIX \"pass\", &val );",
          "content_same": false
        },
        {
          "line": 1198,
          "old_api": null,
          "new_api": "var_Create",
          "old_text": null,
          "new_text": "var_Create( p_enc->p_libvlc, \"pthread_win32_mutex\", VLC_VAR_MUTEX )",
          "old_line_content": "",
          "new_line_content": "    var_Create( p_enc->p_libvlc, \"pthread_win32_mutex\", VLC_VAR_MUTEX );",
          "content_same": false
        },
        {
          "line": 1202,
          "old_api": null,
          "new_api": "var_Create",
          "old_text": null,
          "new_text": "var_Create( p_enc->p_libvlc, \"pthread_win32_count\", VLC_VAR_INTEGER )",
          "old_line_content": "    if( count.i_int == 0 )",
          "new_line_content": "    var_Create( p_enc->p_libvlc, \"pthread_win32_count\", VLC_VAR_INTEGER );",
          "content_same": false
        },
        {
          "line": 1203,
          "old_api": null,
          "new_api": "var_Get",
          "old_text": null,
          "new_text": "var_Get( p_enc->p_libvlc, \"pthread_win32_count\", &count )",
          "old_line_content": "    {   ",
          "new_line_content": "    var_Get( p_enc->p_libvlc, \"pthread_win32_count\", &count );",
          "content_same": false
        },
        {
          "line": 1210,
          "old_api": null,
          "new_api": "msg_Warn",
          "old_text": null,
          "new_text": "msg_Warn( p_enc, \"pthread Win32 Initialization failed\" )",
          "old_line_content": "        }",
          "new_line_content": "            msg_Warn( p_enc, \"pthread Win32 Initialization failed\" );",
          "content_same": false
        },
        {
          "line": 1211,
          "old_api": null,
          "new_api": "vlc_mutex_unlock",
          "old_text": null,
          "new_text": "vlc_mutex_unlock( lock.p_address )",
          "old_line_content": "    }",
          "new_line_content": "            vlc_mutex_unlock( lock.p_address );",
          "content_same": false
        },
        {
          "line": 1217,
          "old_api": null,
          "new_api": "var_Set",
          "old_text": null,
          "new_text": "var_Set( p_enc->p_libvlc, \"pthread_win32_count\", count )",
          "old_line_content": "#endif",
          "new_line_content": "    var_Set( p_enc->p_libvlc, \"pthread_win32_count\", count );",
          "content_same": false
        },
        {
          "line": 1218,
          "old_api": null,
          "new_api": "vlc_mutex_unlock",
          "old_text": null,
          "new_text": "vlc_mutex_unlock( lock.p_address )",
          "old_line_content": "",
          "new_line_content": "    vlc_mutex_unlock( lock.p_address );",
          "content_same": false
        },
        {
          "line": 1347,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free( p_sys->psz_stat_name )",
          "old_line_content": "",
          "new_line_content": "        free( p_sys->psz_stat_name );",
          "content_same": false
        },
        {
          "line": 1349,
          "old_api": null,
          "new_api": "x264_encoder_close",
          "old_text": null,
          "new_text": "x264_encoder_close( p_sys->h )",
          "old_line_content": "    vlc_value_t lock, count;",
          "new_line_content": "    x264_encoder_close( p_sys->h );",
          "content_same": false
        },
        {
          "line": 1223,
          "old_api": null,
          "new_api": "x264_encoder_open",
          "old_text": null,
          "new_text": "x264_encoder_open( &p_sys->param )",
          "old_line_content": "    p_sys->i_buffer = 4 * p_enc->fmt_in.video.i_width *",
          "new_line_content": "    p_sys->h = x264_encoder_open( &p_sys->param );",
          "content_same": false
        },
        {
          "line": 1354,
          "old_api": null,
          "new_api": "var_Create",
          "old_text": null,
          "new_text": "var_Create( p_enc->p_libvlc, \"pthread_win32_mutex\", VLC_VAR_MUTEX )",
          "old_line_content": "",
          "new_line_content": "    var_Create( p_enc->p_libvlc, \"pthread_win32_mutex\", VLC_VAR_MUTEX );",
          "content_same": false
        },
        {
          "line": 1228,
          "old_api": null,
          "new_api": "malloc",
          "old_text": null,
          "new_text": "malloc( p_sys->i_buffer )",
          "old_line_content": "    p_enc->fmt_out.i_extra = 0;",
          "new_line_content": "    p_sys->p_buffer = malloc( p_sys->i_buffer );",
          "content_same": false
        },
        {
          "line": 1359,
          "old_api": null,
          "new_api": "var_Get",
          "old_text": null,
          "new_text": "var_Get( p_enc->p_libvlc, \"pthread_win32_count\", &count )",
          "old_line_content": "",
          "new_line_content": "    var_Get( p_enc->p_libvlc, \"pthread_win32_count\", &count );",
          "content_same": false
        },
        {
          "line": 1361,
          "old_api": null,
          "new_api": "var_Set",
          "old_text": null,
          "new_text": "var_Set( p_enc->p_libvlc, \"pthread_win32_count\", count )",
          "old_line_content": "    {   ",
          "new_line_content": "    var_Set( p_enc->p_libvlc, \"pthread_win32_count\", count );",
          "content_same": false
        },
        {
          "line": 1234,
          "old_api": null,
          "new_api": "x264_encoder_headers",
          "old_text": null,
          "new_text": "x264_encoder_headers( p_sys->h, &nal, &i_nal )",
          "old_line_content": "        int i_size = p_sys->i_buffer;",
          "new_line_content": "    x264_encoder_headers( p_sys->h, &nal, &i_nal );",
          "content_same": false
        },
        {
          "line": 1365,
          "old_api": null,
          "new_api": "pthread_win32_thread_detach_np",
          "old_text": null,
          "new_text": "pthread_win32_thread_detach_np()",
          "old_line_content": "    }",
          "new_line_content": "        pthread_win32_thread_detach_np();",
          "content_same": false
        },
        {
          "line": 1239,
          "old_api": null,
          "new_api": "x264_nal_encode",
          "old_text": null,
          "new_text": "x264_nal_encode( p_sys->p_buffer, &i_size, 1, &nal[i] )",
          "old_line_content": "",
          "new_line_content": "        x264_nal_encode( p_sys->p_buffer, &i_size, 1, &nal[i] );",
          "content_same": false
        },
        {
          "line": 1367,
          "old_api": null,
          "new_api": "msg_Dbg",
          "old_text": null,
          "new_text": "msg_Dbg( p_enc, \"pthread-win32 deinitialized\" )",
          "old_line_content": "#endif",
          "new_line_content": "        msg_Dbg( p_enc, \"pthread-win32 deinitialized\" );",
          "content_same": false
        },
        {
          "line": 1241,
          "old_api": null,
          "new_api": "realloc",
          "old_text": null,
          "new_text": "realloc( p_enc->fmt_out.p_extra, p_enc->fmt_out.i_extra + i_size )",
          "old_line_content": "            p_sys->p_buffer, i_size );",
          "new_line_content": "        p_enc->fmt_out.p_extra = realloc( p_enc->fmt_out.p_extra, p_enc->fmt_out.i_extra + i_size );",
          "content_same": false
        },
        {
          "line": 1243,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy( (uint8_t*)p_enc->fmt_out.p_extra + p_enc->fmt_out.i_extra,\n            p_sys->p_buffer, i_size )",
          "old_line_content": "        p_enc->fmt_out.i_extra += i_size;",
          "new_line_content": "        memcpy( (uint8_t*)p_enc->fmt_out.p_extra + p_enc->fmt_out.i_extra,",
          "content_same": false
        },
        {
          "line": 1372,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free( p_sys->p_buffer )",
          "old_line_content": "",
          "new_line_content": "    free( p_sys->p_buffer );",
          "content_same": false
        },
        {
          "line": 1373,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free( p_sys )",
          "old_line_content": "",
          "new_line_content": "    free( p_sys );",
          "content_same": false
        },
        {
          "line": 1264,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset( &pic, 0, sizeof( x264_picture_t ) )",
          "old_line_content": "    pic.img.i_plane = p_pict->i_planes;",
          "new_line_content": "    memset( &pic, 0, sizeof( x264_picture_t ) );",
          "content_same": false
        },
        {
          "line": 1275,
          "old_api": null,
          "new_api": "x264_encoder_encode",
          "old_text": null,
          "new_text": "x264_encoder_encode( p_sys->h, &nal, &i_nal, &pic, &pic )",
          "old_line_content": "#endif",
          "new_line_content": "    x264_encoder_encode( p_sys->h, &nal, &i_nal, &pic, &pic );",
          "content_same": false
        },
        {
          "line": 1277,
          "old_api": null,
          "new_api": "x264_encoder_encode",
          "old_text": null,
          "new_text": "x264_encoder_encode( p_sys->h, &nal, &i_nal, &pic )",
          "old_line_content": "    if( !i_nal ) return NULL;",
          "new_line_content": "    x264_encoder_encode( p_sys->h, &nal, &i_nal, &pic );",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 1282,
          "old_api": "x264_nal_encode",
          "new_api": null,
          "old_text": "x264_nal_encode( p_sys->p_buffer + i_out, &i_size, 1, &nal[i] )",
          "new_text": null,
          "old_line_content": "        x264_nal_encode( p_sys->p_buffer + i_out, &i_size, 1, &nal[i] );",
          "new_line_content": "    for( i = 0, i_out = 0; i < i_nal; i++ )",
          "content_same": false
        },
        {
          "line": 1287,
          "old_api": "block_New",
          "new_api": null,
          "old_text": "block_New( p_enc, i_out )",
          "new_text": null,
          "old_line_content": "    p_block = block_New( p_enc, i_out );",
          "new_line_content": "        i_out += i_size;",
          "content_same": false
        },
        {
          "line": 1288,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy( p_block->p_buffer, p_sys->p_buffer, i_out )",
          "new_text": null,
          "old_line_content": "    memcpy( p_block->p_buffer, p_sys->p_buffer, i_out );",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1298,
          "old_api": "I64C",
          "new_api": null,
          "old_text": "I64C(1000000)",
          "new_text": null,
          "old_line_content": "    p_block->i_length = I64C(1000000) *",
          "new_line_content": "        p_block->i_flags |= BLOCK_FLAG_TYPE_B;",
          "content_same": false
        },
        {
          "line": 1176,
          "old_api": "var_Get",
          "new_api": null,
          "old_text": "var_Get( p_enc, SOUT_CFG_PREFIX \"stats\", &val )",
          "new_text": null,
          "old_line_content": "    var_Get( p_enc, SOUT_CFG_PREFIX \"stats\", &val );",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1184,
          "old_api": "var_Get",
          "new_api": null,
          "old_text": "var_Get( p_enc, SOUT_CFG_PREFIX \"pass\", &val )",
          "new_text": null,
          "old_line_content": "    var_Get( p_enc, SOUT_CFG_PREFIX \"pass\", &val );",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1195,
          "old_api": "var_Create",
          "new_api": null,
          "old_text": "var_Create( p_enc->p_libvlc, \"pthread_win32_mutex\", VLC_VAR_MUTEX )",
          "new_text": null,
          "old_line_content": "    var_Create( p_enc->p_libvlc, \"pthread_win32_mutex\", VLC_VAR_MUTEX );",
          "new_line_content": "#ifdef PTW32_STATIC_LIB",
          "content_same": false
        },
        {
          "line": 1196,
          "old_api": "var_Get",
          "new_api": null,
          "old_text": "var_Get( p_enc->p_libvlc, \"pthread_win32_mutex\", &lock )",
          "new_text": null,
          "old_line_content": "    var_Get( p_enc->p_libvlc, \"pthread_win32_mutex\", &lock );",
          "new_line_content": "    vlc_value_t lock, count;",
          "content_same": false
        },
        {
          "line": 1197,
          "old_api": "vlc_mutex_lock",
          "new_api": null,
          "old_text": "vlc_mutex_lock( lock.p_address )",
          "new_text": null,
          "old_line_content": "    vlc_mutex_lock( lock.p_address );",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1204,
          "old_api": "msg_Dbg",
          "new_api": null,
          "old_text": "msg_Dbg( p_enc, \"initializing pthread-win32\" )",
          "new_text": null,
          "old_line_content": "        msg_Dbg( p_enc, \"initializing pthread-win32\" );",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1205,
          "old_api": "pthread_win32_thread_attach_np",
          "new_api": null,
          "old_text": "pthread_win32_thread_attach_np()",
          "new_text": null,
          "old_line_content": "        if( !pthread_win32_process_attach_np() || !pthread_win32_thread_attach_np() )   ",
          "new_line_content": "    if( count.i_int == 0 )",
          "content_same": false
        },
        {
          "line": 1214,
          "old_api": "var_Set",
          "new_api": null,
          "old_text": "var_Set( p_enc->p_libvlc, \"pthread_win32_count\", count )",
          "new_text": null,
          "old_line_content": "    var_Set( p_enc->p_libvlc, \"pthread_win32_count\", count );",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1215,
          "old_api": "vlc_mutex_unlock",
          "new_api": null,
          "old_text": "vlc_mutex_unlock( lock.p_address )",
          "new_text": null,
          "old_line_content": "    vlc_mutex_unlock( lock.p_address );",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1344,
          "old_api": "free",
          "new_api": null,
          "old_text": "free( p_sys->psz_stat_name )",
          "new_text": null,
          "old_line_content": "        free( p_sys->psz_stat_name );",
          "new_line_content": "    encoder_sys_t *p_sys = p_enc->p_sys;",
          "content_same": false
        },
        {
          "line": 1346,
          "old_api": "x264_encoder_close",
          "new_api": null,
          "old_text": "x264_encoder_close( p_sys->h )",
          "new_text": null,
          "old_line_content": "    x264_encoder_close( p_sys->h );",
          "new_line_content": "    if( p_sys->psz_stat_name )",
          "content_same": false
        },
        {
          "line": 1220,
          "old_api": "x264_encoder_open",
          "new_api": null,
          "old_text": "x264_encoder_open( &p_sys->param )",
          "new_text": null,
          "old_line_content": "    p_sys->h = x264_encoder_open( &p_sys->param );",
          "new_line_content": "#endif",
          "content_same": false
        },
        {
          "line": 1351,
          "old_api": "var_Create",
          "new_api": null,
          "old_text": "var_Create( p_enc->p_libvlc, \"pthread_win32_mutex\", VLC_VAR_MUTEX )",
          "new_text": null,
          "old_line_content": "    var_Create( p_enc->p_libvlc, \"pthread_win32_mutex\", VLC_VAR_MUTEX );",
          "new_line_content": "#ifdef PTW32_STATIC_LIB",
          "content_same": false
        },
        {
          "line": 1352,
          "old_api": "var_Get",
          "new_api": null,
          "old_text": "var_Get( p_enc->p_libvlc, \"pthread_win32_mutex\", &lock )",
          "new_text": null,
          "old_line_content": "    var_Get( p_enc->p_libvlc, \"pthread_win32_mutex\", &lock );",
          "new_line_content": "    vlc_value_t lock, count;",
          "content_same": false
        },
        {
          "line": 1225,
          "old_api": "malloc",
          "new_api": null,
          "old_text": "malloc( p_sys->i_buffer )",
          "new_text": null,
          "old_line_content": "    p_sys->p_buffer = malloc( p_sys->i_buffer );",
          "new_line_content": "    /* alloc mem */",
          "content_same": false
        },
        {
          "line": 1353,
          "old_api": "vlc_mutex_lock",
          "new_api": null,
          "old_text": "vlc_mutex_lock( lock.p_address )",
          "new_text": null,
          "old_line_content": "    vlc_mutex_lock( lock.p_address );",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1231,
          "old_api": "x264_encoder_headers",
          "new_api": null,
          "old_text": "x264_encoder_headers( p_sys->h, &nal, &i_nal )",
          "new_text": null,
          "old_line_content": "    x264_encoder_headers( p_sys->h, &nal, &i_nal );",
          "new_line_content": "    p_enc->fmt_out.i_extra = 0;",
          "content_same": false
        },
        {
          "line": 1362,
          "old_api": "pthread_win32_thread_detach_np",
          "new_api": null,
          "old_text": "pthread_win32_thread_detach_np()",
          "new_text": null,
          "old_line_content": "        pthread_win32_thread_detach_np();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1363,
          "old_api": "pthread_win32_process_detach_np",
          "new_api": null,
          "old_text": "pthread_win32_process_detach_np()",
          "new_text": null,
          "old_line_content": "        pthread_win32_process_detach_np();",
          "new_line_content": "    if( count.i_int == 0 )",
          "content_same": false
        },
        {
          "line": 1236,
          "old_api": "x264_nal_encode",
          "new_api": null,
          "old_text": "x264_nal_encode( p_sys->p_buffer, &i_size, 1, &nal[i] )",
          "new_text": null,
          "old_line_content": "        x264_nal_encode( p_sys->p_buffer, &i_size, 1, &nal[i] );",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 1364,
          "old_api": "msg_Dbg",
          "new_api": null,
          "old_text": "msg_Dbg( p_enc, \"pthread-win32 deinitialized\" )",
          "new_text": null,
          "old_line_content": "        msg_Dbg( p_enc, \"pthread-win32 deinitialized\" );",
          "new_line_content": "    {   ",
          "content_same": false
        },
        {
          "line": 1238,
          "old_api": "realloc",
          "new_api": null,
          "old_text": "realloc( p_enc->fmt_out.p_extra, p_enc->fmt_out.i_extra + i_size )",
          "new_text": null,
          "old_line_content": "        p_enc->fmt_out.p_extra = realloc( p_enc->fmt_out.p_extra, p_enc->fmt_out.i_extra + i_size );",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1240,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy( (uint8_t*)p_enc->fmt_out.p_extra + p_enc->fmt_out.i_extra,\n            p_sys->p_buffer, i_size )",
          "new_text": null,
          "old_line_content": "        memcpy( (uint8_t*)p_enc->fmt_out.p_extra + p_enc->fmt_out.i_extra,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1370,
          "old_api": "free",
          "new_api": null,
          "old_text": "free( p_sys )",
          "new_text": null,
          "old_line_content": "    free( p_sys );",
          "new_line_content": "#endif",
          "content_same": false
        },
        {
          "line": 1261,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset( &pic, 0, sizeof( x264_picture_t ) )",
          "new_text": null,
          "old_line_content": "    memset( &pic, 0, sizeof( x264_picture_t ) );",
          "new_line_content": "    int i_nal, i_out, i;",
          "content_same": false
        },
        {
          "line": 1272,
          "old_api": "x264_encoder_encode",
          "new_api": null,
          "old_text": "x264_encoder_encode( p_sys->h, &nal, &i_nal, &pic, &pic )",
          "new_text": null,
          "old_line_content": "    x264_encoder_encode( p_sys->h, &nal, &i_nal, &pic, &pic );",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1274,
          "old_api": "x264_encoder_encode",
          "new_api": null,
          "old_text": "x264_encoder_encode( p_sys->h, &nal, &i_nal, &pic )",
          "new_text": null,
          "old_line_content": "    x264_encoder_encode( p_sys->h, &nal, &i_nal, &pic );",
          "new_line_content": "#if X264_BUILD >= 0x0013",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 9,
      "total_additions": 31,
      "total_deletions": 31,
      "total_api_changes": 71
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 11,
        "api_related_lines": 71,
        "non_api_lines": 11,
        "non_api_line_numbers": [
          1191,
          1192,
          1193,
          1194,
          1168,
          1169,
          1170,
          1171,
          1172,
          1173,
          1174
        ]
      }
    },
    "api_calls_before": 257,
    "api_calls_after": 257,
    "diff_info": {
      "added_lines": 9,
      "removed_lines": 6,
      "total_diff_lines": 35
    }
  }
}
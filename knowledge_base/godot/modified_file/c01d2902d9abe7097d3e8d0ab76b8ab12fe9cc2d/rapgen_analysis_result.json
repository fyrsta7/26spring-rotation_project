{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/godot/modified_file/c01d2902d9abe7097d3e8d0ab76b8ab12fe9cc2d",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/godot/modified_file/c01d2902d9abe7097d3e8d0ab76b8ab12fe9cc2d/before.cpp",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/godot/modified_file/c01d2902d9abe7097d3e8d0ab76b8ab12fe9cc2d/after.cpp",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/godot/modified_file/c01d2902d9abe7097d3e8d0ab76b8ab12fe9cc2d/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 355,
          "old_api": "MAX",
          "new_api": "abs",
          "old_text": "MAX(max_time_remaining, remaining)",
          "new_text": "abs(blend_points[i].position - blend_pos)",
          "old_line_content": "\t\t\t\tmax_time_remaining = MAX(max_time_remaining, remaining);",
          "new_line_content": "\t\t\tdouble d = abs(blend_points[i].position - blend_pos);",
          "content_same": false
        },
        {
          "line": 404,
          "old_api": "set_parameter",
          "new_api": "itos",
          "old_text": "set_parameter(this->length_internal, cur_length_internal)",
          "new_text": "itos(i)",
          "old_line_content": "\tset_parameter(this->length_internal, cur_length_internal);",
          "new_line_content": "\t\tblend_points[i].name = itos(i);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 387,
          "old_api": null,
          "new_api": "blend_node",
          "old_text": null,
          "new_text": "blend_node(blend_points[i].name, blend_points[i].node, p_time, p_seek, p_is_external_seeking, 0, FILTER_IGNORE, true)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\t\tblend_node(blend_points[i].name, blend_points[i].node, p_time, p_seek, p_is_external_seeking, 0, FILTER_IGNORE, true);",
          "content_same": false
        },
        {
          "line": 393,
          "old_api": null,
          "new_api": "set_parameter",
          "old_text": null,
          "new_text": "set_parameter(this->closest, cur_closest)",
          "old_line_content": "",
          "new_line_content": "\tset_parameter(this->closest, cur_closest);",
          "content_same": false
        },
        {
          "line": 394,
          "old_api": null,
          "new_api": "set_parameter",
          "old_text": null,
          "new_text": "set_parameter(this->length_internal, cur_length_internal)",
          "old_line_content": "\t\tif (sync) {",
          "new_line_content": "\tset_parameter(this->length_internal, cur_length_internal);",
          "content_same": false
        },
        {
          "line": 366,
          "old_api": null,
          "new_api": "static_cast<Ref<AnimationNodeAnimation>>(blend_points[cur_closest].node)",
          "old_text": null,
          "new_text": "static_cast<Ref<AnimationNodeAnimation>>(blend_points[cur_closest].node)",
          "old_line_content": "\t\t\tif (d < new_closest_dist) {",
          "new_line_content": "\t\t\t\tRef<AnimationNodeAnimation> na_c = static_cast<Ref<AnimationNodeAnimation>>(blend_points[cur_closest].node);",
          "content_same": false
        },
        {
          "line": 367,
          "old_api": null,
          "new_api": "static_cast<Ref<AnimationNodeAnimation>>(blend_points[new_closest].node)",
          "old_text": null,
          "new_text": "static_cast<Ref<AnimationNodeAnimation>>(blend_points[new_closest].node)",
          "old_line_content": "\t\t\t\tnew_closest = i;",
          "new_line_content": "\t\t\t\tRef<AnimationNodeAnimation> na_n = static_cast<Ref<AnimationNodeAnimation>>(blend_points[new_closest].node);",
          "content_same": false
        },
        {
          "line": 368,
          "old_api": null,
          "new_api": "is_null",
          "old_text": null,
          "new_text": "na_n.is_null()",
          "old_line_content": "\t\t\t\tnew_closest_dist = d;",
          "new_line_content": "\t\t\t\tif (!na_c.is_null() && !na_n.is_null()) {",
          "content_same": false
        },
        {
          "line": 369,
          "old_api": null,
          "new_api": "is_backward",
          "old_text": null,
          "new_text": "na_c->is_backward()",
          "old_line_content": "\t\t\t}",
          "new_line_content": "\t\t\t\t\tna_n->set_backward(na_c->is_backward());",
          "content_same": false
        },
        {
          "line": 372,
          "old_api": null,
          "new_api": "blend_node",
          "old_text": null,
          "new_text": "blend_node(blend_points[cur_closest].name, blend_points[cur_closest].node, p_time, false, p_is_external_seeking, 0.0, FILTER_IGNORE, true)",
          "old_line_content": "\t\tif (new_closest != cur_closest && new_closest != -1) {",
          "new_line_content": "\t\t\t\tfrom = cur_length_internal - blend_node(blend_points[cur_closest].name, blend_points[cur_closest].node, p_time, false, p_is_external_seeking, 0.0, FILTER_IGNORE, true);",
          "content_same": false
        },
        {
          "line": 375,
          "old_api": null,
          "new_api": "blend_node",
          "old_text": null,
          "new_text": "blend_node(blend_points[new_closest].name, blend_points[new_closest].node, from, true, p_is_external_seeking, 1.0, FILTER_IGNORE, true)",
          "old_line_content": "\t\t\t\t//for ping-pong loop",
          "new_line_content": "\t\t\tmax_time_remaining = blend_node(blend_points[new_closest].name, blend_points[new_closest].node, from, true, p_is_external_seeking, 1.0, FILTER_IGNORE, true);",
          "content_same": false
        },
        {
          "line": 344,
          "old_api": null,
          "new_api": "blend_node",
          "old_text": null,
          "new_text": "blend_node(blend_points[i].name, blend_points[i].node, p_time, p_seek, p_is_external_seeking, weights[i], FILTER_IGNORE, true)",
          "old_line_content": "\t\t\tfloat blend_higher = blend_percentage;",
          "new_line_content": "\t\t\t\tdouble remaining = blend_node(blend_points[i].name, blend_points[i].node, p_time, p_seek, p_is_external_seeking, weights[i], FILTER_IGNORE, true);",
          "content_same": false
        },
        {
          "line": 345,
          "old_api": null,
          "new_api": "MAX",
          "old_text": null,
          "new_text": "MAX(max_time_remaining, remaining)",
          "old_line_content": "",
          "new_line_content": "\t\t\t\tmax_time_remaining = MAX(max_time_remaining, remaining);",
          "content_same": false
        },
        {
          "line": 347,
          "old_api": null,
          "new_api": "blend_node",
          "old_text": null,
          "new_text": "blend_node(blend_points[i].name, blend_points[i].node, p_time, p_seek, p_is_external_seeking, 0, FILTER_IGNORE, true)",
          "old_line_content": "\t\t\tweights[point_higher] = blend_higher;",
          "new_line_content": "\t\t\t\tblend_node(blend_points[i].name, blend_points[i].node, p_time, p_seek, p_is_external_seeking, 0, FILTER_IGNORE, true);",
          "content_same": false
        },
        {
          "line": 381,
          "old_api": null,
          "new_api": "blend_node",
          "old_text": null,
          "new_text": "blend_node(blend_points[cur_closest].name, blend_points[cur_closest].node, p_time, p_seek, p_is_external_seeking, 1.0, FILTER_IGNORE, true)",
          "old_line_content": "\t\t\t\t//see how much animation remains",
          "new_line_content": "\t\t\tmax_time_remaining = blend_node(blend_points[cur_closest].name, blend_points[cur_closest].node, p_time, p_seek, p_is_external_seeking, 1.0, FILTER_IGNORE, true);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 385,
          "old_api": "blend_node",
          "new_api": null,
          "old_text": "blend_node(blend_points[new_closest].name, blend_points[new_closest].node, from, true, p_is_external_seeking, 1.0, FILTER_IGNORE, true)",
          "new_text": null,
          "old_line_content": "\t\t\tmax_time_remaining = blend_node(blend_points[new_closest].name, blend_points[new_closest].node, from, true, p_is_external_seeking, 1.0, FILTER_IGNORE, true);",
          "new_line_content": "\t\t\tfor (int i = 0; i < blend_points_used; i++) {",
          "content_same": false
        },
        {
          "line": 354,
          "old_api": "blend_node",
          "new_api": null,
          "old_text": "blend_node(blend_points[i].name, blend_points[i].node, p_time, p_seek, p_is_external_seeking, weights[i], FILTER_IGNORE, true)",
          "new_text": null,
          "old_line_content": "\t\t\t\tdouble remaining = blend_node(blend_points[i].name, blend_points[i].node, p_time, p_seek, p_is_external_seeking, weights[i], FILTER_IGNORE, true);",
          "new_line_content": "\t\tfor (int i = 0; i < blend_points_used; i++) {",
          "content_same": false
        },
        {
          "line": 414,
          "old_api": "itos",
          "new_api": null,
          "old_text": "itos(i)",
          "new_text": null,
          "old_line_content": "\t\tblend_points[i].name = itos(i);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 357,
          "old_api": "blend_node",
          "new_api": null,
          "old_text": "blend_node(blend_points[i].name, blend_points[i].node, p_time, p_seek, p_is_external_seeking, 0, FILTER_IGNORE, true)",
          "new_text": null,
          "old_line_content": "\t\t\t\tblend_node(blend_points[i].name, blend_points[i].node, p_time, p_seek, p_is_external_seeking, 0, FILTER_IGNORE, true);",
          "new_line_content": "\t\t\t\tnew_closest = i;",
          "content_same": false
        },
        {
          "line": 391,
          "old_api": "blend_node",
          "new_api": null,
          "old_text": "blend_node(blend_points[cur_closest].name, blend_points[cur_closest].node, p_time, p_seek, p_is_external_seeking, 1.0, FILTER_IGNORE, true)",
          "new_text": null,
          "old_line_content": "\t\t\tmax_time_remaining = blend_node(blend_points[cur_closest].name, blend_points[cur_closest].node, p_time, p_seek, p_is_external_seeking, 1.0, FILTER_IGNORE, true);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 365,
          "old_api": "abs",
          "new_api": null,
          "old_text": "abs(blend_points[i].position - blend_pos)",
          "new_text": null,
          "old_line_content": "\t\t\tdouble d = abs(blend_points[i].position - blend_pos);",
          "new_line_content": "\t\t\t\t//for ping-pong loop",
          "content_same": false
        },
        {
          "line": 397,
          "old_api": "blend_node",
          "new_api": null,
          "old_text": "blend_node(blend_points[i].name, blend_points[i].node, p_time, p_seek, p_is_external_seeking, 0, FILTER_IGNORE, true)",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tblend_node(blend_points[i].name, blend_points[i].node, p_time, p_seek, p_is_external_seeking, 0, FILTER_IGNORE, true);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 403,
          "old_api": "set_parameter",
          "new_api": null,
          "old_text": "set_parameter(this->closest, cur_closest)",
          "new_text": null,
          "old_line_content": "\tset_parameter(this->closest, cur_closest);",
          "new_line_content": "\tfor (int i = 0; i < MAX_BLEND_POINTS; i++) {",
          "content_same": false
        },
        {
          "line": 376,
          "old_api": "static_cast<Ref<AnimationNodeAnimation>>(blend_points[cur_closest].node)",
          "new_api": null,
          "old_text": "static_cast<Ref<AnimationNodeAnimation>>(blend_points[cur_closest].node)",
          "new_text": null,
          "old_line_content": "\t\t\t\tRef<AnimationNodeAnimation> na_c = static_cast<Ref<AnimationNodeAnimation>>(blend_points[cur_closest].node);",
          "new_line_content": "\t\t\tcur_length_internal = from + max_time_remaining;",
          "content_same": false
        },
        {
          "line": 377,
          "old_api": "static_cast<Ref<AnimationNodeAnimation>>(blend_points[new_closest].node)",
          "new_api": null,
          "old_text": "static_cast<Ref<AnimationNodeAnimation>>(blend_points[new_closest].node)",
          "new_text": null,
          "old_line_content": "\t\t\t\tRef<AnimationNodeAnimation> na_n = static_cast<Ref<AnimationNodeAnimation>>(blend_points[new_closest].node);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 378,
          "old_api": "is_null",
          "new_api": null,
          "old_text": "na_n.is_null()",
          "new_text": null,
          "old_line_content": "\t\t\t\tif (!na_c.is_null() && !na_n.is_null()) {",
          "new_line_content": "\t\t\tcur_closest = new_closest;",
          "content_same": false
        },
        {
          "line": 379,
          "old_api": "is_backward",
          "new_api": null,
          "old_text": "na_c->is_backward()",
          "new_text": null,
          "old_line_content": "\t\t\t\t\tna_n->set_backward(na_c->is_backward());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 382,
          "old_api": "blend_node",
          "new_api": null,
          "old_text": "blend_node(blend_points[cur_closest].name, blend_points[cur_closest].node, p_time, false, p_is_external_seeking, 0.0, FILTER_IGNORE, true)",
          "new_text": null,
          "old_line_content": "\t\t\t\tfrom = cur_length_internal - blend_node(blend_points[cur_closest].name, blend_points[cur_closest].node, p_time, false, p_is_external_seeking, 0.0, FILTER_IGNORE, true);",
          "new_line_content": "\t\t}",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 2,
      "total_additions": 13,
      "total_deletions": 13,
      "total_api_changes": 28
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 17,
        "api_related_lines": 28,
        "non_api_lines": 17,
        "non_api_line_numbers": [
          322,
          291,
          292,
          301,
          303,
          304,
          305,
          306,
          307,
          310,
          311,
          312,
          313,
          314,
          315,
          316,
          317
        ]
      }
    },
    "api_calls_before": 152,
    "api_calls_after": 152,
    "diff_info": {
      "added_lines": 5,
      "removed_lines": 15,
      "total_diff_lines": 46
    }
  }
}
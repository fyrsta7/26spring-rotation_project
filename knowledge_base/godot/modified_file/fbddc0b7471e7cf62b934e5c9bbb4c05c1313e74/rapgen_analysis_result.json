{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/godot/modified_file/fbddc0b7471e7cf62b934e5c9bbb4c05c1313e74",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/godot/modified_file/fbddc0b7471e7cf62b934e5c9bbb4c05c1313e74/before.cpp",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/godot/modified_file/fbddc0b7471e7cf62b934e5c9bbb4c05c1313e74/after.cpp",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/godot/modified_file/fbddc0b7471e7cf62b934e5c9bbb4c05c1313e74/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 115,
          "old_api": "set_pos",
          "new_api": "TTR",
          "old_text": "set_pos(new_ofs)",
          "new_text": "TTR(\"ParallaxLayer node only works when set as child of a ParallaxBackground node.\")",
          "old_line_content": "\tset_pos(new_ofs);",
          "new_line_content": "\t\treturn TTR(\"ParallaxLayer node only works when set as child of a ParallaxBackground node.\");",
          "content_same": false
        },
        {
          "line": 124,
          "old_api": "get_parent",
          "new_api": "_MD",
          "old_text": "get_parent()->cast_to<ParallaxBackground>()",
          "new_text": "_MD(\"get_motion_scale\")",
          "old_line_content": "\tif (!get_parent() || !get_parent()->cast_to<ParallaxBackground>()) {",
          "new_line_content": "\tObjectTypeDB::bind_method(_MD(\"get_motion_scale\"),&ParallaxLayer::get_motion_scale);",
          "content_same": false
        },
        {
          "line": 125,
          "old_api": "TTR",
          "new_api": "_MD",
          "old_text": "TTR(\"ParallaxLayer node only works when set as child of a ParallaxBackground node.\")",
          "new_text": "_MD(\"set_mirroring\",\"mirror\")",
          "old_line_content": "\t\treturn TTR(\"ParallaxLayer node only works when set as child of a ParallaxBackground node.\");",
          "new_line_content": "\tObjectTypeDB::bind_method(_MD(\"set_mirroring\",\"mirror\"),&ParallaxLayer::set_mirroring);",
          "content_same": false
        },
        {
          "line": 128,
          "old_api": "String",
          "new_api": "_SCS",
          "old_text": "String()",
          "new_text": "_SCS(\"get_motion_scale\")",
          "old_line_content": "\treturn String();",
          "new_line_content": "\tADD_PROPERTY( PropertyInfo(Variant::VECTOR2,\"motion/scale\"),_SCS(\"set_motion_scale\"),_SCS(\"get_motion_scale\"));",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 96,
          "old_api": null,
          "new_api": "fmod",
          "old_text": null,
          "new_text": "fmod(new_ofs.x,den)",
          "old_line_content": "\t\twhile( new_ofs.x>=0) {",
          "new_line_content": "\t\tnew_ofs.x = fmod(new_ofs.x,den) - (mirroring.x > 0 ? den : 0);",
          "content_same": false
        },
        {
          "line": 129,
          "old_api": null,
          "new_api": "_SCS",
          "old_text": null,
          "new_text": "_SCS(\"get_mirroring\")",
          "old_line_content": "}",
          "new_line_content": "\tADD_PROPERTY( PropertyInfo(Variant::VECTOR2,\"motion/mirroring\"),_SCS(\"set_mirroring\"),_SCS(\"get_mirroring\"));",
          "content_same": false
        },
        {
          "line": 101,
          "old_api": null,
          "new_api": "fmod",
          "old_text": null,
          "new_text": "fmod(new_ofs.y,den)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\tnew_ofs.y = fmod(new_ofs.y,den) - (mirroring.y > 0 ? den : 0);",
          "content_same": false
        },
        {
          "line": 137,
          "old_api": null,
          "new_api": "Size2",
          "old_text": null,
          "new_text": "Size2(1,1)",
          "old_line_content": "",
          "new_line_content": "\tmotion_scale=Size2(1,1);",
          "content_same": false
        },
        {
          "line": 105,
          "old_api": null,
          "new_api": "set_pos",
          "old_text": null,
          "new_text": "set_pos(new_ofs)",
          "old_line_content": "",
          "new_line_content": "\tset_pos(new_ofs);",
          "content_same": false
        },
        {
          "line": 106,
          "old_api": null,
          "new_api": "Vector2",
          "old_text": null,
          "new_text": "Vector2(1,1)",
          "old_line_content": "\t\twhile( new_ofs.y>=0) {",
          "new_line_content": "\tset_scale(Vector2(1,1)*p_scale);",
          "content_same": false
        },
        {
          "line": 114,
          "old_api": null,
          "new_api": "get_parent",
          "old_text": null,
          "new_text": "get_parent()->cast_to<ParallaxBackground>()",
          "old_line_content": "",
          "new_line_content": "\tif (!get_parent() || !get_parent()->cast_to<ParallaxBackground>()) {",
          "content_same": false
        },
        {
          "line": 118,
          "old_api": null,
          "new_api": "String",
          "old_text": null,
          "new_text": "String()",
          "old_line_content": "",
          "new_line_content": "\treturn String();",
          "content_same": false
        },
        {
          "line": 123,
          "old_api": null,
          "new_api": "_MD",
          "old_text": null,
          "new_text": "_MD(\"set_motion_scale\",\"scale\")",
          "old_line_content": "",
          "new_line_content": "\tObjectTypeDB::bind_method(_MD(\"set_motion_scale\",\"scale\"),&ParallaxLayer::set_motion_scale);",
          "content_same": false
        },
        {
          "line": 126,
          "old_api": null,
          "new_api": "_MD",
          "old_text": null,
          "new_text": "_MD(\"get_mirroring\")",
          "old_line_content": "\t}",
          "new_line_content": "\tObjectTypeDB::bind_method(_MD(\"get_mirroring\"),&ParallaxLayer::get_mirroring);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 133,
          "old_api": "_MD",
          "new_api": null,
          "old_text": "_MD(\"set_motion_scale\",\"scale\")",
          "new_text": null,
          "old_line_content": "\tObjectTypeDB::bind_method(_MD(\"set_motion_scale\",\"scale\"),&ParallaxLayer::set_motion_scale);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 134,
          "old_api": "_MD",
          "new_api": null,
          "old_text": "_MD(\"get_motion_scale\")",
          "new_text": null,
          "old_line_content": "\tObjectTypeDB::bind_method(_MD(\"get_motion_scale\"),&ParallaxLayer::get_motion_scale);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 135,
          "old_api": "_MD",
          "new_api": null,
          "old_text": "_MD(\"set_mirroring\",\"mirror\")",
          "new_text": null,
          "old_line_content": "\tObjectTypeDB::bind_method(_MD(\"set_mirroring\",\"mirror\"),&ParallaxLayer::set_mirroring);",
          "new_line_content": "ParallaxLayer::ParallaxLayer()",
          "content_same": false
        },
        {
          "line": 136,
          "old_api": "_MD",
          "new_api": null,
          "old_text": "_MD(\"get_mirroring\")",
          "new_text": null,
          "old_line_content": "\tObjectTypeDB::bind_method(_MD(\"get_mirroring\"),&ParallaxLayer::get_mirroring);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 138,
          "old_api": "_SCS",
          "new_api": null,
          "old_text": "_SCS(\"get_motion_scale\")",
          "new_text": null,
          "old_line_content": "\tADD_PROPERTY( PropertyInfo(Variant::VECTOR2,\"motion/scale\"),_SCS(\"set_motion_scale\"),_SCS(\"get_motion_scale\"));",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 139,
          "old_api": "_SCS",
          "new_api": null,
          "old_text": "_SCS(\"get_mirroring\")",
          "new_text": null,
          "old_line_content": "\tADD_PROPERTY( PropertyInfo(Variant::VECTOR2,\"motion/mirroring\"),_SCS(\"set_mirroring\"),_SCS(\"get_mirroring\"));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 147,
          "old_api": "Size2",
          "new_api": null,
          "old_text": "Size2(1,1)",
          "new_text": null,
          "old_line_content": "\tmotion_scale=Size2(1,1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 116,
          "old_api": "Vector2",
          "new_api": null,
          "old_text": "Vector2(1,1)",
          "new_text": null,
          "old_line_content": "\tset_scale(Vector2(1,1)*p_scale);",
          "new_line_content": "\t}",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 4,
      "total_additions": 10,
      "total_deletions": 8,
      "total_api_changes": 22
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 14,
        "api_related_lines": 22,
        "non_api_lines": 10,
        "non_api_line_numbers": [
          97,
          98,
          99,
          100,
          107,
          108,
          109,
          110,
          111,
          95
        ]
      }
    },
    "api_calls_before": 40,
    "api_calls_after": 42,
    "diff_info": {
      "added_lines": 4,
      "removed_lines": 14,
      "total_diff_lines": 33
    }
  }
}
{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/godot/modified_file/789b39248a755995c351f63d9c49da60ff9e1405",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/godot/modified_file/789b39248a755995c351f63d9c49da60ff9e1405/before.cpp",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/godot/modified_file/789b39248a755995c351f63d9c49da60ff9e1405/after.cpp",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/godot/modified_file/789b39248a755995c351f63d9c49da60ff9e1405/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 156,
          "old_api": "instantiate",
          "new_api": "has",
          "old_text": "new_pose.instantiate()",
          "new_text": "poses.has(p_action_name)",
          "old_line_content": "\tnew_pose.instantiate();",
          "new_line_content": "\tif (poses.has(p_action_name)) {",
          "content_same": false
        },
        {
          "line": 159,
          "old_api": "set_transform",
          "new_api": "instantiate",
          "old_text": "new_pose->set_transform(p_transform)",
          "new_text": "new_pose.instantiate()",
          "old_line_content": "\tnew_pose->set_transform(p_transform);",
          "new_line_content": "\t\tnew_pose.instantiate();",
          "content_same": false
        },
        {
          "line": 165,
          "old_api": "SNAME",
          "new_api": "set_transform",
          "old_text": "SNAME(\"pose_changed\")",
          "new_text": "new_pose->set_transform(p_transform)",
          "old_line_content": "\temit_signal(SNAME(\"pose_changed\"), new_pose);",
          "new_line_content": "\tnew_pose->set_transform(p_transform);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 163,
          "old_api": null,
          "new_api": "set_name",
          "old_text": null,
          "new_text": "new_pose->set_name(p_action_name)",
          "old_line_content": "",
          "new_line_content": "\tnew_pose->set_name(p_action_name);",
          "content_same": false
        },
        {
          "line": 164,
          "old_api": null,
          "new_api": "set_has_tracking_data",
          "old_text": null,
          "new_text": "new_pose->set_has_tracking_data(true)",
          "old_line_content": "\tposes[p_action_name] = new_pose;",
          "new_line_content": "\tnew_pose->set_has_tracking_data(true);",
          "content_same": false
        },
        {
          "line": 166,
          "old_api": null,
          "new_api": "set_linear_velocity",
          "old_text": null,
          "new_text": "new_pose->set_linear_velocity(p_linear_velocity)",
          "old_line_content": "",
          "new_line_content": "\tnew_pose->set_linear_velocity(p_linear_velocity);",
          "content_same": false
        },
        {
          "line": 167,
          "old_api": null,
          "new_api": "set_angular_velocity",
          "old_text": null,
          "new_text": "new_pose->set_angular_velocity(p_angular_velocity)",
          "old_line_content": "\t// TODO discuss whether we also want to create and emit an InputEventXRPose event",
          "new_line_content": "\tnew_pose->set_angular_velocity(p_angular_velocity);",
          "content_same": false
        },
        {
          "line": 199,
          "old_api": null,
          "new_api": "get_type",
          "old_text": null,
          "new_text": "p_value.get_type()",
          "old_line_content": "\t\t\t\t} else {",
          "new_line_content": "\t\tswitch (p_value.get_type()) {",
          "content_same": false
        },
        {
          "line": 168,
          "old_api": null,
          "new_api": "set_tracking_confidence",
          "old_text": null,
          "new_text": "new_pose->set_tracking_confidence(p_tracking_confidence)",
          "old_line_content": "}",
          "new_line_content": "\tnew_pose->set_tracking_confidence(p_tracking_confidence);",
          "content_same": false
        },
        {
          "line": 170,
          "old_api": null,
          "new_api": "SNAME",
          "old_text": null,
          "new_text": "SNAME(\"pose_changed\")",
          "old_line_content": "Variant XRPositionalTracker::get_input(const StringName &p_action_name) const {",
          "new_line_content": "\temit_signal(SNAME(\"pose_changed\"), new_pose);",
          "content_same": false
        },
        {
          "line": 203,
          "old_api": null,
          "new_api": "SNAME",
          "old_text": null,
          "new_text": "SNAME(\"button_pressed\")",
          "old_line_content": "\t\t\t\t// TODO discuss whether we also want to create and emit an InputEventXRButton event",
          "new_line_content": "\t\t\t\t\temit_signal(SNAME(\"button_pressed\"), p_action_name);",
          "content_same": false
        },
        {
          "line": 205,
          "old_api": null,
          "new_api": "SNAME",
          "old_text": null,
          "new_text": "SNAME(\"button_released\")",
          "old_line_content": "\t\t\tcase Variant::FLOAT: {",
          "new_line_content": "\t\t\t\t\temit_signal(SNAME(\"button_released\"), p_action_name);",
          "content_same": false
        },
        {
          "line": 176,
          "old_api": null,
          "new_api": "has",
          "old_text": null,
          "new_text": "inputs.has(p_action_name)",
          "old_line_content": "}",
          "new_line_content": "\tif (inputs.has(p_action_name)) {",
          "content_same": false
        },
        {
          "line": 179,
          "old_api": null,
          "new_api": "Variant",
          "old_text": null,
          "new_text": "Variant()",
          "old_line_content": "\tbool changed = false;",
          "new_line_content": "\t\treturn Variant();",
          "content_same": false
        },
        {
          "line": 216,
          "old_api": null,
          "new_api": "SNAME",
          "old_text": null,
          "new_text": "SNAME(\"input_vector2_changed\")",
          "old_line_content": "\t\t\t\t// ???",
          "new_line_content": "\t\t\t\temit_signal(SNAME(\"input_vector2_changed\"), p_action_name, p_value);",
          "content_same": false
        },
        {
          "line": 188,
          "old_api": null,
          "new_api": "has",
          "old_text": null,
          "new_text": "inputs.has(p_action_name)",
          "old_line_content": "",
          "new_line_content": "\tif (inputs.has(p_action_name)) {",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 160,
          "old_api": "set_linear_velocity",
          "new_api": null,
          "old_text": "new_pose->set_linear_velocity(p_linear_velocity)",
          "new_text": null,
          "old_line_content": "\tnew_pose->set_linear_velocity(p_linear_velocity);",
          "new_line_content": "\t\tposes[p_action_name] = new_pose;",
          "content_same": false
        },
        {
          "line": 161,
          "old_api": "set_angular_velocity",
          "new_api": null,
          "old_text": "new_pose->set_angular_velocity(p_angular_velocity)",
          "new_text": null,
          "old_line_content": "\tnew_pose->set_angular_velocity(p_angular_velocity);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 162,
          "old_api": "set_tracking_confidence",
          "new_api": null,
          "old_text": "new_pose->set_tracking_confidence(p_tracking_confidence)",
          "new_text": null,
          "old_line_content": "\tnew_pose->set_tracking_confidence(p_tracking_confidence);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 194,
          "old_api": "get_type",
          "new_api": null,
          "old_text": "p_value.get_type()",
          "new_text": null,
          "old_line_content": "\t\tswitch (p_value.get_type()) {",
          "new_line_content": "\tif (changed) {",
          "content_same": false
        },
        {
          "line": 198,
          "old_api": "SNAME",
          "new_api": null,
          "old_text": "SNAME(\"button_pressed\")",
          "new_text": null,
          "old_line_content": "\t\t\t\t\temit_signal(SNAME(\"button_pressed\"), p_action_name);",
          "new_line_content": "\t\t// emit signals to let the rest of the world know",
          "content_same": false
        },
        {
          "line": 200,
          "old_api": "SNAME",
          "new_api": null,
          "old_text": "SNAME(\"button_released\")",
          "new_text": null,
          "old_line_content": "\t\t\t\t\temit_signal(SNAME(\"button_released\"), p_action_name);",
          "new_line_content": "\t\t\tcase Variant::BOOL: {",
          "content_same": false
        },
        {
          "line": 171,
          "old_api": "has",
          "new_api": null,
          "old_text": "inputs.has(p_action_name)",
          "new_text": null,
          "old_line_content": "\tif (inputs.has(p_action_name)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 174,
          "old_api": "Variant",
          "new_api": null,
          "old_text": "Variant()",
          "new_text": null,
          "old_line_content": "\t\treturn Variant();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 206,
          "old_api": "SNAME",
          "new_api": null,
          "old_text": "SNAME(\"input_float_changed\")",
          "new_text": null,
          "old_line_content": "\t\t\t\temit_signal(SNAME(\"input_float_changed\"), p_action_name, p_value);",
          "new_line_content": "\t\t\t\t}",
          "content_same": false
        },
        {
          "line": 183,
          "old_api": "has",
          "new_api": null,
          "old_text": "inputs.has(p_action_name)",
          "new_text": null,
          "old_line_content": "\tif (inputs.has(p_action_name)) {",
          "new_line_content": "void XRPositionalTracker::set_input(const StringName &p_action_name, const Variant &p_value) {",
          "content_same": false
        },
        {
          "line": 157,
          "old_api": "set_name",
          "new_api": null,
          "old_text": "new_pose->set_name(p_action_name)",
          "new_text": null,
          "old_line_content": "\tnew_pose->set_name(p_action_name);",
          "new_line_content": "\t\tnew_pose = poses[p_action_name];",
          "content_same": false
        },
        {
          "line": 158,
          "old_api": "set_has_tracking_data",
          "new_api": null,
          "old_text": "new_pose->set_has_tracking_data(true)",
          "new_text": null,
          "old_line_content": "\tnew_pose->set_has_tracking_data(true);",
          "new_line_content": "\t} else {",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 3,
      "total_additions": 13,
      "total_deletions": 12,
      "total_api_changes": 28
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 9,
        "api_related_lines": 28,
        "non_api_lines": 1,
        "non_api_line_numbers": [
          172
        ]
      }
    },
    "api_calls_before": 94,
    "api_calls_after": 95,
    "diff_info": {
      "added_lines": 8,
      "removed_lines": 3,
      "total_diff_lines": 50
    }
  }
}
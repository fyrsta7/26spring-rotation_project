{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/godot/modified_file/6ce47d9b51f6f540a8d3b6aece32ec0efdf2a37f",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/godot/modified_file/6ce47d9b51f6f540a8d3b6aece32ec0efdf2a37f/before.cpp",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/godot/modified_file/6ce47d9b51f6f540a8d3b6aece32ec0efdf2a37f/after.cpp",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/godot/modified_file/6ce47d9b51f6f540a8d3b6aece32ec0efdf2a37f/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 155,
          "old_api": "get_parent",
          "new_api": "_MD",
          "old_text": "get_parent()->cast_to<ParallaxBackground>()",
          "new_text": "_MD(\"set_motion_offset\",\"offset\")",
          "old_line_content": "\tif (!get_parent() || !get_parent()->cast_to<ParallaxBackground>()) {",
          "new_line_content": "\tObjectTypeDB::bind_method(_MD(\"set_motion_offset\",\"offset\"),&ParallaxLayer::set_motion_offset);",
          "content_same": false
        },
        {
          "line": 156,
          "old_api": "TTR",
          "new_api": "_MD",
          "old_text": "TTR(\"ParallaxLayer node only works when set as child of a ParallaxBackground node.\")",
          "new_text": "_MD(\"get_motion_offset\")",
          "old_line_content": "\t\treturn TTR(\"ParallaxLayer node only works when set as child of a ParallaxBackground node.\");",
          "new_line_content": "\tObjectTypeDB::bind_method(_MD(\"get_motion_offset\"),&ParallaxLayer::get_motion_offset);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 160,
          "old_api": null,
          "new_api": "_SCS",
          "old_text": null,
          "new_text": "_SCS(\"get_motion_scale\")",
          "old_line_content": "}",
          "new_line_content": "\tADD_PROPERTY( PropertyInfo(Variant::VECTOR2,\"motion/scale\"),_SCS(\"set_motion_scale\"),_SCS(\"get_motion_scale\"));",
          "content_same": false
        },
        {
          "line": 161,
          "old_api": null,
          "new_api": "_SCS",
          "old_text": null,
          "new_text": "_SCS(\"get_motion_offset\")",
          "old_line_content": "",
          "new_line_content": "\tADD_PROPERTY( PropertyInfo(Variant::VECTOR2,\"motion/offset\"),_SCS(\"set_motion_offset\"),_SCS(\"get_motion_offset\"));",
          "content_same": false
        },
        {
          "line": 162,
          "old_api": null,
          "new_api": "_SCS",
          "old_text": null,
          "new_text": "_SCS(\"get_mirroring\")",
          "old_line_content": "void ParallaxLayer::_bind_methods() {",
          "new_line_content": "\tADD_PROPERTY( PropertyInfo(Variant::VECTOR2,\"motion/mirroring\"),_SCS(\"set_mirroring\"),_SCS(\"get_mirroring\"));",
          "content_same": false
        },
        {
          "line": 132,
          "old_api": null,
          "new_api": "ceil",
          "old_text": null,
          "new_text": "ceil(new_ofs.y/den)",
          "old_line_content": "\t\t}",
          "new_line_content": "\t\tnew_ofs.y -= den*ceil(new_ofs.y/den);",
          "content_same": false
        },
        {
          "line": 135,
          "old_api": null,
          "new_api": "set_pos",
          "old_text": null,
          "new_text": "set_pos(new_ofs)",
          "old_line_content": "\tif (mirroring.y) {",
          "new_line_content": "\tset_pos(new_ofs);",
          "content_same": false
        },
        {
          "line": 136,
          "old_api": null,
          "new_api": "Vector2",
          "old_text": null,
          "new_text": "Vector2(1,1)",
          "old_line_content": "",
          "new_line_content": "\tset_scale(Vector2(1,1)*p_scale);",
          "content_same": false
        },
        {
          "line": 170,
          "old_api": null,
          "new_api": "Size2",
          "old_text": null,
          "new_text": "Size2(1,1)",
          "old_line_content": "",
          "new_line_content": "\tmotion_scale=Size2(1,1);",
          "content_same": false
        },
        {
          "line": 144,
          "old_api": null,
          "new_api": "get_parent",
          "old_text": null,
          "new_text": "get_parent()->cast_to<ParallaxBackground>()",
          "old_line_content": "",
          "new_line_content": "\tif (!get_parent() || !get_parent()->cast_to<ParallaxBackground>()) {",
          "content_same": false
        },
        {
          "line": 145,
          "old_api": null,
          "new_api": "TTR",
          "old_text": null,
          "new_text": "TTR(\"ParallaxLayer node only works when set as child of a ParallaxBackground node.\")",
          "old_line_content": "",
          "new_line_content": "\t\treturn TTR(\"ParallaxLayer node only works when set as child of a ParallaxBackground node.\");",
          "content_same": false
        },
        {
          "line": 148,
          "old_api": null,
          "new_api": "String",
          "old_text": null,
          "new_text": "String()",
          "old_line_content": "",
          "new_line_content": "\treturn String();",
          "content_same": false
        },
        {
          "line": 153,
          "old_api": null,
          "new_api": "_MD",
          "old_text": null,
          "new_text": "_MD(\"set_motion_scale\",\"scale\")",
          "old_line_content": "String ParallaxLayer::get_configuration_warning() const {",
          "new_line_content": "\tObjectTypeDB::bind_method(_MD(\"set_motion_scale\",\"scale\"),&ParallaxLayer::set_motion_scale);",
          "content_same": false
        },
        {
          "line": 154,
          "old_api": null,
          "new_api": "_MD",
          "old_text": null,
          "new_text": "_MD(\"get_motion_scale\")",
          "old_line_content": "",
          "new_line_content": "\tObjectTypeDB::bind_method(_MD(\"get_motion_scale\"),&ParallaxLayer::get_motion_scale);",
          "content_same": false
        },
        {
          "line": 157,
          "old_api": null,
          "new_api": "_MD",
          "old_text": null,
          "new_text": "_MD(\"set_mirroring\",\"mirror\")",
          "old_line_content": "\t}",
          "new_line_content": "\tObjectTypeDB::bind_method(_MD(\"set_mirroring\",\"mirror\"),&ParallaxLayer::set_mirroring);",
          "content_same": false
        },
        {
          "line": 158,
          "old_api": null,
          "new_api": "_MD",
          "old_text": null,
          "new_text": "_MD(\"get_mirroring\")",
          "old_line_content": "",
          "new_line_content": "\tObjectTypeDB::bind_method(_MD(\"get_mirroring\"),&ParallaxLayer::get_mirroring);",
          "content_same": false
        },
        {
          "line": 127,
          "old_api": null,
          "new_api": "ceil",
          "old_text": null,
          "new_text": "ceil(new_ofs.x/den)",
          "old_line_content": "\t\twhile( new_ofs.x>=0) {",
          "new_line_content": "\t\tnew_ofs.x -= den*ceil(new_ofs.x/den);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 164,
          "old_api": "_MD",
          "new_api": null,
          "old_text": "_MD(\"set_motion_scale\",\"scale\")",
          "new_text": null,
          "old_line_content": "\tObjectTypeDB::bind_method(_MD(\"set_motion_scale\",\"scale\"),&ParallaxLayer::set_motion_scale);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 165,
          "old_api": "_MD",
          "new_api": null,
          "old_text": "_MD(\"get_motion_scale\")",
          "new_text": null,
          "old_line_content": "\tObjectTypeDB::bind_method(_MD(\"get_motion_scale\"),&ParallaxLayer::get_motion_scale);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 166,
          "old_api": "_MD",
          "new_api": null,
          "old_text": "_MD(\"set_motion_offset\",\"offset\")",
          "new_text": null,
          "old_line_content": "\tObjectTypeDB::bind_method(_MD(\"set_motion_offset\",\"offset\"),&ParallaxLayer::set_motion_offset);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 167,
          "old_api": "_MD",
          "new_api": null,
          "old_text": "_MD(\"get_motion_offset\")",
          "new_text": null,
          "old_line_content": "\tObjectTypeDB::bind_method(_MD(\"get_motion_offset\"),&ParallaxLayer::get_motion_offset);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 168,
          "old_api": "_MD",
          "new_api": null,
          "old_text": "_MD(\"set_mirroring\",\"mirror\")",
          "new_text": null,
          "old_line_content": "\tObjectTypeDB::bind_method(_MD(\"set_mirroring\",\"mirror\"),&ParallaxLayer::set_mirroring);",
          "new_line_content": "ParallaxLayer::ParallaxLayer()",
          "content_same": false
        },
        {
          "line": 169,
          "old_api": "_MD",
          "new_api": null,
          "old_text": "_MD(\"get_mirroring\")",
          "new_text": null,
          "old_line_content": "\tObjectTypeDB::bind_method(_MD(\"get_mirroring\"),&ParallaxLayer::get_mirroring);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 171,
          "old_api": "_SCS",
          "new_api": null,
          "old_text": "_SCS(\"get_motion_scale\")",
          "new_text": null,
          "old_line_content": "\tADD_PROPERTY( PropertyInfo(Variant::VECTOR2,\"motion/scale\"),_SCS(\"set_motion_scale\"),_SCS(\"get_motion_scale\"));",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 172,
          "old_api": "_SCS",
          "new_api": null,
          "old_text": "_SCS(\"get_motion_offset\")",
          "new_text": null,
          "old_line_content": "\tADD_PROPERTY( PropertyInfo(Variant::VECTOR2,\"motion/offset\"),_SCS(\"set_motion_offset\"),_SCS(\"get_motion_offset\"));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 173,
          "old_api": "_SCS",
          "new_api": null,
          "old_text": "_SCS(\"get_mirroring\")",
          "new_text": null,
          "old_line_content": "\tADD_PROPERTY( PropertyInfo(Variant::VECTOR2,\"motion/mirroring\"),_SCS(\"set_mirroring\"),_SCS(\"get_mirroring\"));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 146,
          "old_api": "set_pos",
          "new_api": null,
          "old_text": "set_pos(new_ofs)",
          "new_text": null,
          "old_line_content": "\tset_pos(new_ofs);",
          "new_line_content": "\t}",
          "content_same": false
        },
        {
          "line": 147,
          "old_api": "Vector2",
          "new_api": null,
          "old_text": "Vector2(1,1)",
          "new_text": null,
          "old_line_content": "\tset_scale(Vector2(1,1)*p_scale);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 181,
          "old_api": "Size2",
          "new_api": null,
          "old_text": "Size2(1,1)",
          "new_text": null,
          "old_line_content": "\tmotion_scale=Size2(1,1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 159,
          "old_api": "String",
          "new_api": null,
          "old_text": "String()",
          "new_text": null,
          "old_line_content": "\treturn String();",
          "new_line_content": "",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 2,
      "total_additions": 15,
      "total_deletions": 13,
      "total_api_changes": 30
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 15,
        "api_related_lines": 30,
        "non_api_lines": 11,
        "non_api_line_numbers": [
          128,
          129,
          130,
          131,
          137,
          138,
          139,
          140,
          141,
          142,
          126
        ]
      }
    },
    "api_calls_before": 60,
    "api_calls_after": 62,
    "diff_info": {
      "added_lines": 4,
      "removed_lines": 15,
      "total_diff_lines": 36
    }
  }
}
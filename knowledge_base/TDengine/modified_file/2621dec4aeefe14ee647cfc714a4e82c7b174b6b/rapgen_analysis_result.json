{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/TDengine/modified_file/2621dec4aeefe14ee647cfc714a4e82c7b174b6b",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/TDengine/modified_file/2621dec4aeefe14ee647cfc714a4e82c7b174b6b/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/TDengine/modified_file/2621dec4aeefe14ee647cfc714a4e82c7b174b6b/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/TDengine/modified_file/2621dec4aeefe14ee647cfc714a4e82c7b174b6b/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 1601,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": "doMinMaxHelper",
          "old_text": "GET_ROWCELL_INTERBUF(pEntryInfo)",
          "new_text": "doMinMaxHelper(pCtx, 1)",
          "old_line_content": "  SMinmaxResInfo* pRes = GET_ROWCELL_INTERBUF(pEntryInfo);",
          "new_line_content": "  int32_t numOfElems = doMinMaxHelper(pCtx, 1);",
          "content_same": false
        },
        {
          "line": 1617,
          "old_api": "setSelectivityValue",
          "new_api": "GET_RES_INFO",
          "old_text": "setSelectivityValue(pCtx, pBlock, &pRes->tuplePos, currentRow)",
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "    setSelectivityValue(pCtx, pBlock, &pRes->tuplePos, currentRow);",
          "new_line_content": "  SResultRowEntryInfo* pEntryInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 1619,
          "old_api": "setSelectivityValue",
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": "setSelectivityValue(pCtx, pBlock, &pRes->nullTuplePos, currentRow)",
          "new_text": "GET_ROWCELL_INTERBUF(pEntryInfo)",
          "old_line_content": "    setSelectivityValue(pCtx, pBlock, &pRes->nullTuplePos, currentRow);",
          "new_line_content": "  SMinmaxResInfo* pRes = GET_ROWCELL_INTERBUF(pEntryInfo);",
          "content_same": false
        },
        {
          "line": 1635,
          "old_api": "colDataAppendNULL",
          "new_api": "setSelectivityValue",
          "old_text": "colDataAppendNULL(pDstCol, rowIndex)",
          "new_text": "setSelectivityValue(pCtx, pBlock, &pRes->tuplePos, currentRow)",
          "old_line_content": "    colDataAppendNULL(pDstCol, rowIndex);",
          "new_line_content": "    setSelectivityValue(pCtx, pBlock, &pRes->tuplePos, currentRow);",
          "content_same": false
        },
        {
          "line": 1716,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": "taosArrayGet",
          "old_text": "GET_ROWCELL_INTERBUF(pDResInfo)",
          "new_text": "taosArrayGet(pCtx->pDstBlock->pDataBlock, dstSlotId)",
          "old_line_content": "  SMinmaxResInfo*      pDBuf = GET_ROWCELL_INTERBUF(pDResInfo);",
          "new_line_content": "    SColumnInfoData* pDstCol = taosArrayGet(pCtx->pDstBlock->pDataBlock, dstSlotId);",
          "content_same": false
        },
        {
          "line": 1719,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": "colDataIsNull_s",
          "old_text": "GET_ROWCELL_INTERBUF(pSResInfo)",
          "new_text": "colDataIsNull_s(pSrcCol, rowIndex)",
          "old_line_content": "  SMinmaxResInfo*      pSBuf = GET_ROWCELL_INTERBUF(pSResInfo);",
          "new_line_content": "    if (colDataIsNull_s(pSrcCol, rowIndex) == true) {",
          "content_same": false
        },
        {
          "line": 1734,
          "old_api": "TMAX",
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": "TMAX(pDResInfo->numOfRes, pSResInfo->numOfRes)",
          "new_text": "GET_ROWCELL_INTERBUF(pDResInfo)",
          "old_line_content": "  pDResInfo->numOfRes = TMAX(pDResInfo->numOfRes, pSResInfo->numOfRes);",
          "new_line_content": "  SMinmaxResInfo*      pDBuf = GET_ROWCELL_INTERBUF(pDResInfo);",
          "content_same": false
        },
        {
          "line": 1758,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": "minMaxCombine",
          "old_text": "GET_ROWCELL_INTERBUF(pResultInfo)",
          "new_text": "minMaxCombine(pDestCtx, pSourceCtx, 1)",
          "old_line_content": "  SStddevRes* pRes = GET_ROWCELL_INTERBUF(pResultInfo);",
          "new_line_content": "  return minMaxCombine(pDestCtx, pSourceCtx, 1);",
          "content_same": false
        },
        {
          "line": 1788,
          "old_api": "colDataIsNull_f",
          "new_api": "GET_RES_INFO",
          "old_text": "colDataIsNull_f(pCol->nullbitmap, i)",
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "        if (pCol->hasNull && colDataIsNull_f(pCol->nullbitmap, i)) {",
          "new_line_content": "  SStddevRes* pStddevRes = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "content_same": false
        },
        {
          "line": 1945,
          "old_api": "GET_RES_INFO",
          "new_api": "colDataIsNull_f",
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": "colDataIsNull_f(pCol->nullbitmap, i)",
          "old_line_content": "  SET_VAL(GET_RES_INFO(pCtx), numOfElem, 1);",
          "new_line_content": "        if (pCol->hasNull && colDataIsNull_f(pCol->nullbitmap, i)) {",
          "content_same": false
        },
        {
          "line": 2007,
          "old_api": "LIST_STDDEV_SUB_N",
          "new_api": "GET_RES_INFO",
          "old_text": "LIST_STDDEV_SUB_N(pStddevRes->isum, int32_t)",
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "      LIST_STDDEV_SUB_N(pStddevRes->isum, int32_t);",
          "new_line_content": "  SStddevRes* pStddevRes = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "content_same": false
        },
        {
          "line": 2049,
          "old_api": "GET_RES_INFO",
          "new_api": "LIST_STDDEV_SUB_N",
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": "LIST_STDDEV_SUB_N(pStddevRes->dsum, float)",
          "old_line_content": "  SStddevRes*           pStddevRes = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "new_line_content": "      LIST_STDDEV_SUB_N(pStddevRes->dsum, float);",
          "content_same": false
        },
        {
          "line": 2053,
          "old_api": "IS_SIGNED_NUMERIC_TYPE",
          "new_api": "LIST_STDDEV_SUB_N",
          "old_text": "IS_SIGNED_NUMERIC_TYPE(type)",
          "new_text": "LIST_STDDEV_SUB_N(pStddevRes->dsum, double)",
          "old_line_content": "  if (IS_SIGNED_NUMERIC_TYPE(type)) {",
          "new_line_content": "      LIST_STDDEV_SUB_N(pStddevRes->dsum, double);",
          "content_same": false
        },
        {
          "line": 2061,
          "old_api": "fabs",
          "new_api": "GET_RES_INFO",
          "old_text": "fabs(pStddevRes->quadraticDSum / ((double)pStddevRes->count) - avg * avg)",
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "    pStddevRes->result = sqrt(fabs(pStddevRes->quadraticDSum / ((double)pStddevRes->count) - avg * avg));",
          "new_line_content": "  SET_VAL(GET_RES_INFO(pCtx), numOfElem, 1);",
          "content_same": false
        },
        {
          "line": 2073,
          "old_api": "GET_RES_INFO",
          "new_api": "fabs",
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": "fabs(pStddevRes->quadraticISum / ((double)pStddevRes->count) - avg * avg)",
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "    pStddevRes->result = sqrt(fabs(pStddevRes->quadraticISum / ((double)pStddevRes->count) - avg * avg));",
          "content_same": false
        },
        {
          "line": 2074,
          "old_api": "GET_RES_INFO",
          "new_api": "IS_UNSIGNED_NUMERIC_TYPE",
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": "IS_UNSIGNED_NUMERIC_TYPE(type)",
          "old_line_content": "  SStddevRes*          pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "new_line_content": "  } else if (IS_UNSIGNED_NUMERIC_TYPE(type)) {",
          "content_same": false
        },
        {
          "line": 2076,
          "old_api": "taosMemoryCalloc",
          "new_api": "fabs",
          "old_text": "taosMemoryCalloc(resultBytes + VARSTR_HEADER_SIZE, sizeof(char))",
          "new_text": "fabs(pStddevRes->quadraticUSum / ((double)pStddevRes->count) - avg * avg)",
          "old_line_content": "  char*                res = taosMemoryCalloc(resultBytes + VARSTR_HEADER_SIZE, sizeof(char));",
          "new_line_content": "    pStddevRes->result = sqrt(fabs(pStddevRes->quadraticUSum / ((double)pStddevRes->count) - avg * avg));",
          "content_same": false
        },
        {
          "line": 2079,
          "old_api": "varDataSetLen",
          "new_api": "fabs",
          "old_text": "varDataSetLen(res, resultBytes)",
          "new_text": "fabs(pStddevRes->quadraticDSum / ((double)pStddevRes->count) - avg * avg)",
          "old_line_content": "  varDataSetLen(res, resultBytes);",
          "new_line_content": "    pStddevRes->result = sqrt(fabs(pStddevRes->quadraticDSum / ((double)pStddevRes->count) - avg * avg));",
          "content_same": false
        },
        {
          "line": 2084,
          "old_api": "colDataAppend",
          "new_api": "GET_RES_INFO",
          "old_text": "colDataAppend(pCol, pBlock->info.rows, res, false)",
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  colDataAppend(pCol, pBlock->info.rows, res, false);",
          "new_line_content": "    GET_RES_INFO(pCtx)->numOfRes = 0;",
          "content_same": false
        },
        {
          "line": 2092,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": "GET_RES_INFO",
          "old_text": "GET_ROWCELL_INTERBUF(pDResInfo)",
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  SStddevRes*          pDBuf = GET_ROWCELL_INTERBUF(pDResInfo);",
          "new_line_content": "  SStddevRes*          pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "content_same": false
        },
        {
          "line": 2094,
          "old_api": "GET_RES_INFO",
          "new_api": "taosMemoryCalloc",
          "old_text": "GET_RES_INFO(pSourceCtx)",
          "new_text": "taosMemoryCalloc(resultBytes + VARSTR_HEADER_SIZE, sizeof(char))",
          "old_line_content": "  SResultRowEntryInfo* pSResInfo = GET_RES_INFO(pSourceCtx);",
          "new_line_content": "  char*                res = taosMemoryCalloc(resultBytes + VARSTR_HEADER_SIZE, sizeof(char));",
          "content_same": false
        },
        {
          "line": 2109,
          "old_api": "TMAX",
          "new_api": "GET_RES_INFO",
          "old_text": "TMAX(pDResInfo->numOfRes, pSResInfo->numOfRes)",
          "new_text": "GET_RES_INFO(pDestCtx)",
          "old_line_content": "  pDResInfo->numOfRes = TMAX(pDResInfo->numOfRes, pSResInfo->numOfRes);",
          "new_line_content": "  SResultRowEntryInfo* pDResInfo = GET_RES_INFO(pDestCtx);",
          "content_same": false
        },
        {
          "line": 2127,
          "old_api": "IS_FLOAT_TYPE",
          "new_api": "TMAX",
          "old_text": "IS_FLOAT_TYPE(pCtx->param[2].param.nType)",
          "new_text": "TMAX(pDResInfo->numOfRes, pSResInfo->numOfRes)",
          "old_line_content": "  pInfo->stepVal = IS_FLOAT_TYPE(pCtx->param[2].param.nType) ? pCtx->param[2].param.d : (double)pCtx->param[2].param.i;",
          "new_line_content": "  pDResInfo->numOfRes = TMAX(pDResInfo->numOfRes, pSResInfo->numOfRes);",
          "content_same": false
        },
        {
          "line": 2155,
          "old_api": "LEASTSQR_CAL",
          "new_api": "GET_RES_INFO",
          "old_text": "LEASTSQR_CAL(param, x, plist, i, pInfo->stepVal)",
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "        LEASTSQR_CAL(param, x, plist, i, pInfo->stepVal);",
          "new_line_content": "  SLeastSQRInfo* pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "content_same": false
        },
        {
          "line": 2180,
          "old_api": "LEASTSQR_CAL",
          "new_api": "colDataIsNull_f",
          "old_text": "LEASTSQR_CAL(param, x, plist, i, pInfo->stepVal)",
          "new_text": "colDataIsNull_f(pCol->nullbitmap, i)",
          "old_line_content": "        LEASTSQR_CAL(param, x, plist, i, pInfo->stepVal);",
          "new_line_content": "        if (pCol->hasNull && colDataIsNull_f(pCol->nullbitmap, i)) {",
          "content_same": false
        },
        {
          "line": 2193,
          "old_api": "LEASTSQR_CAL",
          "new_api": "colDataIsNull_f",
          "old_text": "LEASTSQR_CAL(param, x, plist, i, pInfo->stepVal)",
          "new_text": "colDataIsNull_f(pCol->nullbitmap, i)",
          "old_line_content": "        LEASTSQR_CAL(param, x, plist, i, pInfo->stepVal);",
          "new_line_content": "        if (pCol->hasNull && colDataIsNull_f(pCol->nullbitmap, i)) {",
          "content_same": false
        },
        {
          "line": 2230,
          "old_api": "LEASTSQR_CAL",
          "new_api": "colDataIsNull_f",
          "old_text": "LEASTSQR_CAL(param, x, plist, i, pInfo->stepVal)",
          "new_text": "colDataIsNull_f(pCol->nullbitmap, i)",
          "old_line_content": "        LEASTSQR_CAL(param, x, plist, i, pInfo->stepVal);",
          "new_line_content": "        if (pCol->hasNull && colDataIsNull_f(pCol->nullbitmap, i)) {",
          "content_same": false
        },
        {
          "line": 2243,
          "old_api": "LEASTSQR_CAL",
          "new_api": "colDataIsNull_f",
          "old_text": "LEASTSQR_CAL(param, x, plist, i, pInfo->stepVal)",
          "new_text": "colDataIsNull_f(pCol->nullbitmap, i)",
          "old_line_content": "        LEASTSQR_CAL(param, x, plist, i, pInfo->stepVal);",
          "new_line_content": "        if (pCol->hasNull && colDataIsNull_f(pCol->nullbitmap, i)) {",
          "content_same": false
        },
        {
          "line": 2256,
          "old_api": "LEASTSQR_CAL",
          "new_api": "colDataIsNull_f",
          "old_text": "LEASTSQR_CAL(param, x, plist, i, pInfo->stepVal)",
          "new_text": "colDataIsNull_f(pCol->nullbitmap, i)",
          "old_line_content": "        LEASTSQR_CAL(param, x, plist, i, pInfo->stepVal);",
          "new_line_content": "        if (pCol->hasNull && colDataIsNull_f(pCol->nullbitmap, i)) {",
          "content_same": false
        },
        {
          "line": 2269,
          "old_api": "LEASTSQR_CAL",
          "new_api": "colDataIsNull_f",
          "old_text": "LEASTSQR_CAL(param, x, plist, i, pInfo->stepVal)",
          "new_text": "colDataIsNull_f(pCol->nullbitmap, i)",
          "old_line_content": "        LEASTSQR_CAL(param, x, plist, i, pInfo->stepVal);",
          "new_line_content": "        if (pCol->hasNull && colDataIsNull_f(pCol->nullbitmap, i)) {",
          "content_same": false
        },
        {
          "line": 2274,
          "old_api": "GET_RES_INFO",
          "new_api": "LEASTSQR_CAL",
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": "LEASTSQR_CAL(param, x, plist, i, pInfo->stepVal)",
          "old_line_content": "      GET_RES_INFO(pCtx)->isNullRes = 1;",
          "new_line_content": "        LEASTSQR_CAL(param, x, plist, i, pInfo->stepVal);",
          "content_same": false
        },
        {
          "line": 2313,
          "old_api": "colDataAppendNULL",
          "new_api": "taosArrayGet",
          "old_text": "colDataAppendNULL(pCol, currentRow)",
          "new_text": "taosArrayGet(pBlock->pDataBlock, slotId)",
          "old_line_content": "    colDataAppendNULL(pCol, currentRow);",
          "new_line_content": "  SColumnInfoData*     pCol = taosArrayGet(pBlock->pDataBlock, slotId);",
          "content_same": false
        },
        {
          "line": 2345,
          "old_api": "GET_RES_INFO",
          "new_api": "varDataSetLen",
          "old_text": "GET_RES_INFO(pSourceCtx)",
          "new_text": "varDataSetLen(buf, len)",
          "old_line_content": "  SResultRowEntryInfo* pSResInfo = GET_RES_INFO(pSourceCtx);",
          "new_line_content": "  varDataSetLen(buf, len);",
          "content_same": false
        },
        {
          "line": 2374,
          "old_api": "SET_DOUBLE_VAL",
          "new_api": "TMAX",
          "old_text": "SET_DOUBLE_VAL(&pInfo->maxval, -DBL_MAX)",
          "new_text": "TMAX(pDResInfo->numOfRes, pSResInfo->numOfRes)",
          "old_line_content": "  SET_DOUBLE_VAL(&pInfo->maxval, -DBL_MAX);",
          "new_line_content": "  pDResInfo->numOfRes = TMAX(pDResInfo->numOfRes, pSResInfo->numOfRes);",
          "content_same": false
        },
        {
          "line": 2408,
          "old_api": "GET_INT64_VAL",
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": "GET_INT64_VAL(&pAgg->min)",
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "        tmin = (double)GET_INT64_VAL(&pAgg->min);",
          "new_line_content": "  SPercentileInfo* pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 2431,
          "old_api": "colDataIsNull_f",
          "new_api": "IS_UNSIGNED_NUMERIC_TYPE",
          "old_text": "colDataIsNull_f(pCol->nullbitmap, i)",
          "new_text": "IS_UNSIGNED_NUMERIC_TYPE(type)",
          "old_line_content": "        if (colDataIsNull_f(pCol->nullbitmap, i)) {",
          "new_line_content": "      } else if (IS_UNSIGNED_NUMERIC_TYPE(type)) {",
          "content_same": false
        },
        {
          "line": 2440,
          "old_api": "SET_DOUBLE_VAL",
          "new_api": "GET_DOUBLE_VAL",
          "old_text": "SET_DOUBLE_VAL(&pInfo->minval, v)",
          "new_text": "GET_DOUBLE_VAL(&pInfo->maxval)",
          "old_line_content": "          SET_DOUBLE_VAL(&pInfo->minval, v);",
          "new_line_content": "      if (GET_DOUBLE_VAL(&pInfo->maxval) < tmax) {",
          "content_same": false
        },
        {
          "line": 2458,
          "old_api": "colDataGetData",
          "new_api": "SET_DOUBLE_VAL",
          "old_text": "colDataGetData(pCol, i)",
          "new_text": "SET_DOUBLE_VAL(&pInfo->minval, v)",
          "old_line_content": "      char* data = colDataGetData(pCol, i);",
          "new_line_content": "          SET_DOUBLE_VAL(&pInfo->minval, v);",
          "content_same": false
        },
        {
          "line": 2472,
          "old_api": "IS_UNSIGNED_NUMERIC_TYPE",
          "new_api": "colDataIsNull_f",
          "old_text": "IS_UNSIGNED_NUMERIC_TYPE(pVal->nType)",
          "new_text": "colDataIsNull_f(pCol->nullbitmap, i)",
          "old_line_content": "      (IS_SIGNED_NUMERIC_TYPE(pVal->nType) ? pVal->i : (IS_UNSIGNED_NUMERIC_TYPE(pVal->nType) ? pVal->u : pVal->d));",
          "new_line_content": "      if (colDataIsNull_f(pCol->nullbitmap, i)) {",
          "content_same": false
        },
        {
          "line": 2490,
          "old_api": "TMAX",
          "new_api": "IS_UNSIGNED_NUMERIC_TYPE",
          "old_text": "TMAX(bytesHist, bytesDigest)",
          "new_text": "IS_UNSIGNED_NUMERIC_TYPE(pVal->nType)",
          "old_line_content": "  pEnv->calcMemSize = TMAX(bytesHist, bytesDigest);",
          "new_line_content": "      (IS_SIGNED_NUMERIC_TYPE(pVal->nType) ? pVal->i : (IS_UNSIGNED_NUMERIC_TYPE(pVal->nType) ? pVal->u : pVal->d));",
          "content_same": false
        },
        {
          "line": 2497,
          "old_api": "TDIGEST_SIZE",
          "new_api": "getPercentile",
          "old_text": "TDIGEST_SIZE(COMPRESSION)",
          "new_text": "getPercentile(pMemBucket, v)",
          "old_line_content": "  int32_t bytesDigest = (int32_t)(sizeof(SAPercentileInfo) + TDIGEST_SIZE(COMPRESSION));",
          "new_line_content": "    SET_DOUBLE_VAL(&ppInfo->result, getPercentile(pMemBucket, v));",
          "content_same": false
        },
        {
          "line": 2586,
          "old_api": "qDebug",
          "new_api": "buildTDigestInfo",
          "old_text": "qDebug(\"%s before add %d elements into histogram, total:%\" PRId64 \", numOfEntry:%d, pHisto:%p, elems: %p\",\n           __FUNCTION__, numOfElems, pInfo->pHisto->numOfElems, pInfo->pHisto->numOfEntries, pInfo->pHisto,\n           pInfo->pHisto->elems)",
          "new_text": "buildTDigestInfo(pInfo)",
          "old_line_content": "    qDebug(\"%s before add %d elements into histogram, total:%\" PRId64 \", numOfEntry:%d, pHisto:%p, elems: %p\",",
          "new_line_content": "    buildTDigestInfo(pInfo);",
          "content_same": false
        },
        {
          "line": 2598,
          "old_api": "tHistogramAdd",
          "new_api": "tdigestAdd",
          "old_text": "tHistogramAdd(&pInfo->pHisto, v)",
          "new_text": "tdigestAdd(pInfo->pTDigest, v, w)",
          "old_line_content": "      tHistogramAdd(&pInfo->pHisto, v);",
          "new_line_content": "      tdigestAdd(pInfo->pTDigest, v, w);",
          "content_same": false
        },
        {
          "line": 2632,
          "old_api": "buildHistogramInfo",
          "new_api": "buildTDigestInfo",
          "old_text": "buildHistogramInfo(pInput)",
          "new_text": "buildTDigestInfo(pInput)",
          "old_line_content": "    buildHistogramInfo(pInput);",
          "new_line_content": "    buildTDigestInfo(pInput);",
          "content_same": false
        },
        {
          "line": 2641,
          "old_api": "memcpy",
          "new_api": "tdigestAutoFill",
          "old_text": "memcpy(pHisto, pInput->pHisto, sizeof(SHistogramInfo) + sizeof(SHistBin) * (MAX_HISTOGRAM_BIN + 1))",
          "new_text": "tdigestAutoFill(pTDigest, COMPRESSION)",
          "old_line_content": "      memcpy(pHisto, pInput->pHisto, sizeof(SHistogramInfo) + sizeof(SHistBin) * (MAX_HISTOGRAM_BIN + 1));",
          "new_line_content": "    tdigestAutoFill(pTDigest, COMPRESSION);",
          "content_same": false
        },
        {
          "line": 2644,
          "old_api": "qDebug",
          "new_api": "TDIGEST_SIZE",
          "old_text": "qDebug(\"%s merge histo, total:%\" PRId64 \", entry:%d, %p\", __FUNCTION__, pHisto->numOfElems, pHisto->numOfEntries,\n             pHisto)",
          "new_text": "TDIGEST_SIZE(COMPRESSION)",
          "old_line_content": "      qDebug(\"%s merge histo, total:%\" PRId64 \", entry:%d, %p\", __FUNCTION__, pHisto->numOfElems, pHisto->numOfEntries,",
          "new_line_content": "      memcpy(pTDigest, pInput->pTDigest, (size_t)TDIGEST_SIZE(COMPRESSION));",
          "content_same": false
        },
        {
          "line": 2655,
          "old_api": "qDebug",
          "new_api": "buildHistogramInfo",
          "old_text": "qDebug(\"%s merge histo, total:%\" PRId64 \", entry:%d, %p\", __FUNCTION__, pHisto->numOfElems, pHisto->numOfEntries,\n             pHisto)",
          "new_text": "buildHistogramInfo(pOutput)",
          "old_line_content": "      qDebug(\"%s merge histo, total:%\" PRId64 \", entry:%d, %p\", __FUNCTION__, pHisto->numOfElems, pHisto->numOfEntries,",
          "new_line_content": "    buildHistogramInfo(pOutput);",
          "content_same": false
        },
        {
          "line": 2670,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": "memcpy",
          "old_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "new_text": "memcpy(pHisto, pRes, sizeof(SHistogramInfo) + sizeof(SHistBin) * MAX_HISTOGRAM_BIN)",
          "old_line_content": "  SAPercentileInfo* pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "new_line_content": "      memcpy(pHisto, pRes, sizeof(SHistogramInfo) + sizeof(SHistBin) * MAX_HISTOGRAM_BIN);",
          "content_same": false
        },
        {
          "line": 2696,
          "old_api": "buildTDigestInfo",
          "new_api": "varDataVal",
          "old_text": "buildTDigestInfo(pInfo)",
          "new_text": "varDataVal(data)",
          "old_line_content": "    buildTDigestInfo(pInfo);",
          "new_line_content": "    SAPercentileInfo* pInputInfo = (SAPercentileInfo*)varDataVal(data);",
          "content_same": false
        },
        {
          "line": 2697,
          "old_api": "tdigestAutoFill",
          "new_api": "apercentileTransferInfo",
          "old_text": "tdigestAutoFill(pInfo->pTDigest, COMPRESSION)",
          "new_text": "apercentileTransferInfo(pInputInfo, pInfo)",
          "old_line_content": "    tdigestAutoFill(pInfo->pTDigest, COMPRESSION);",
          "new_line_content": "    apercentileTransferInfo(pInputInfo, pInfo);",
          "content_same": false
        },
        {
          "line": 2705,
          "old_api": "buildHistogramInfo",
          "new_api": "SET_VAL",
          "old_text": "buildHistogramInfo(pInfo)",
          "new_text": "SET_VAL(pResInfo, 1, 1)",
          "old_line_content": "    buildHistogramInfo(pInfo);",
          "new_line_content": "  SET_VAL(pResInfo, 1, 1);",
          "content_same": false
        },
        {
          "line": 2711,
          "old_api": "tHistogramUniform",
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": "tHistogramUniform(pInfo->pHisto, ratio, 1)",
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "      double* res = tHistogramUniform(pInfo->pHisto, ratio, 1);",
          "new_line_content": "  SAPercentileInfo*    pInfo = (SAPercentileInfo*)GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 2714,
          "old_api": "taosMemoryFree",
          "new_api": "buildTDigestInfo",
          "old_text": "taosMemoryFree(res)",
          "new_text": "buildTDigestInfo(pInfo)",
          "old_line_content": "      taosMemoryFree(res);",
          "new_line_content": "    buildTDigestInfo(pInfo);",
          "content_same": false
        },
        {
          "line": 2723,
          "old_api": "functionFinalize",
          "new_api": "buildHistogramInfo",
          "old_text": "functionFinalize(pCtx, pBlock)",
          "new_text": "buildHistogramInfo(pInfo)",
          "old_line_content": "  return functionFinalize(pCtx, pBlock);",
          "new_line_content": "    buildHistogramInfo(pInfo);",
          "content_same": false
        },
        {
          "line": 2746,
          "old_api": "taosMemoryFree",
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": "taosMemoryFree(res)",
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "  taosMemoryFree(res);",
          "new_line_content": "  SAPercentileInfo*    pInfo = (SAPercentileInfo*)GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 2752,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": "varDataVal",
          "old_text": "GET_ROWCELL_INTERBUF(pDResInfo)",
          "new_text": "varDataVal(res)",
          "old_line_content": "  SAPercentileInfo*    pDBuf = GET_ROWCELL_INTERBUF(pDResInfo);",
          "new_line_content": "    memcpy(varDataVal(res), pInfo, resultBytes);",
          "content_same": false
        },
        {
          "line": 2755,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": "varDataVal",
          "old_text": "GET_ROWCELL_INTERBUF(pSResInfo)",
          "new_text": "varDataVal(res)",
          "old_line_content": "  SAPercentileInfo*    pSBuf = GET_ROWCELL_INTERBUF(pSResInfo);",
          "new_line_content": "    memcpy(varDataVal(res), pInfo, resultBytes);",
          "content_same": false
        },
        {
          "line": 2760,
          "old_api": "TMAX",
          "new_api": "taosArrayGet",
          "old_text": "TMAX(pDResInfo->numOfRes, pSResInfo->numOfRes)",
          "new_text": "taosArrayGet(pBlock->pDataBlock, slotId)",
          "old_line_content": "  pDResInfo->numOfRes = TMAX(pDResInfo->numOfRes, pSResInfo->numOfRes);",
          "new_line_content": "  SColumnInfoData* pCol = taosArrayGet(pBlock->pDataBlock, slotId);",
          "content_same": false
        },
        {
          "line": 2840,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": "colDataGetData",
          "old_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "new_text": "colDataGetData(pTsColInfo, rowIndex)",
          "old_line_content": "  SFirstLastRes*       pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "new_line_content": "  return *(TSKEY*)colDataGetData(pTsColInfo, rowIndex);",
          "content_same": false
        },
        {
          "line": 2858,
          "old_api": "GET_RES_INFO",
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "  SFirstLastRes*       pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 2876,
          "old_api": "getRowPTs",
          "new_api": "GET_RES_INFO",
          "old_text": "getRowPTs(pInput->pPTS, 0)",
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  TSKEY startKey = getRowPTs(pInput->pPTS, 0);",
          "new_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 2877,
          "old_api": "getRowPTs",
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": "getRowPTs(pInput->pPTS, pInput->totalRows - 1)",
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "  TSKEY endKey = getRowPTs(pInput->pPTS, pInput->totalRows - 1);",
          "new_line_content": "  SFirstLastRes*       pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 2940,
          "old_api": "getRowPTs",
          "new_api": "colDataGetData",
          "old_text": "getRowPTs(pInput->pPTS, i)",
          "new_text": "colDataGetData(pInputCol, i)",
          "old_line_content": "    TSKEY cts = getRowPTs(pInput->pPTS, i);",
          "new_line_content": "      char* data = colDataGetData(pInputCol, i);",
          "content_same": false
        },
        {
          "line": 2951,
          "old_api": "SET_VAL",
          "new_api": "colDataIsNull",
          "old_text": "SET_VAL(pResInfo, numOfElems, 1)",
          "new_text": "colDataIsNull(pInputCol, pInput->totalRows, i, pColAgg)",
          "old_line_content": "  SET_VAL(pResInfo, numOfElems, 1);",
          "new_line_content": "    if (pInputCol->hasNull && colDataIsNull(pInputCol, pInput->totalRows, i, pColAgg)) {",
          "content_same": false
        },
        {
          "line": 2958,
          "old_api": "GET_RES_INFO",
          "new_api": "getRowPTs",
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": "getRowPTs(pInput->pPTS, i)",
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "    TSKEY cts = getRowPTs(pInput->pPTS, i);",
          "content_same": false
        },
        {
          "line": 2996,
          "old_api": "doSaveCurrentVal",
          "new_api": "getRowPTs",
          "old_text": "doSaveCurrentVal(pCtx, i, cts, type, data)",
          "new_text": "getRowPTs(pInput->pPTS, 0)",
          "old_line_content": "        doSaveCurrentVal(pCtx, i, cts, type, data);",
          "new_line_content": "  TSKEY startKey = getRowPTs(pInput->pPTS, 0);",
          "content_same": false
        },
        {
          "line": 3012,
          "old_api": "doSaveCurrentVal",
          "new_api": "getRowPTs",
          "old_text": "doSaveCurrentVal(pCtx, i, cts, type, data)",
          "new_text": "getRowPTs(pInput->pPTS, i)",
          "old_line_content": "        doSaveCurrentVal(pCtx, i, cts, type, data);",
          "new_line_content": "      TSKEY cts = getRowPTs(pInput->pPTS, i);",
          "content_same": false
        },
        {
          "line": 3028,
          "old_api": "doSaveCurrentVal",
          "new_api": "getRowPTs",
          "old_text": "doSaveCurrentVal(pCtx, i, cts, type, data)",
          "new_text": "getRowPTs(pInput->pPTS, i)",
          "old_line_content": "      doSaveCurrentVal(pCtx, i, cts, type, data);",
          "new_line_content": "      TSKEY cts = getRowPTs(pInput->pPTS, i);",
          "content_same": false
        },
        {
          "line": 3037,
          "old_api": "SET_VAL",
          "new_api": "colDataIsNull",
          "old_text": "SET_VAL(pResInfo, numOfElems, 1)",
          "new_text": "colDataIsNull(pInputCol, pInput->totalRows, i, pColAgg)",
          "old_line_content": "  SET_VAL(pResInfo, numOfElems, 1);",
          "new_line_content": "    if (pInputCol->hasNull && colDataIsNull(pInputCol, pInput->totalRows, i, pColAgg)) {",
          "content_same": false
        },
        {
          "line": 3077,
          "old_api": "varDataVal",
          "new_api": "memcpy",
          "old_text": "varDataVal(data)",
          "new_text": "memcpy(pOutput->buf, pInput->buf, pOutput->bytes)",
          "old_line_content": "    SFirstLastRes* pInputInfo = (SFirstLastRes*)varDataVal(data);",
          "new_line_content": "  memcpy(pOutput->buf, pInput->buf, pOutput->bytes);",
          "content_same": false
        },
        {
          "line": 3078,
          "old_api": "firstLastTransferInfo",
          "new_api": "firstlastSaveTupleData",
          "old_text": "firstLastTransferInfo(pCtx, pInputInfo, pInfo, isFirstQuery, i)",
          "new_text": "firstlastSaveTupleData(pCtx->pSrcBlock, rowIndex, pCtx, pOutput)",
          "old_line_content": "    firstLastTransferInfo(pCtx, pInputInfo, pInfo, isFirstQuery, i);",
          "new_line_content": "  firstlastSaveTupleData(pCtx->pSrcBlock, rowIndex, pCtx, pOutput);",
          "content_same": false
        },
        {
          "line": 3088,
          "old_api": "firstLastFunctionMergeImpl",
          "new_api": "GET_RES_INFO",
          "old_text": "firstLastFunctionMergeImpl(pCtx, true)",
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "int32_t firstFunctionMerge(SqlFunctionCtx* pCtx) { return firstLastFunctionMergeImpl(pCtx, true); }",
          "new_line_content": "  SFirstLastRes* pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "content_same": false
        },
        {
          "line": 3094,
          "old_api": "taosArrayGet",
          "new_api": "colDataGetData",
          "old_text": "taosArrayGet(pBlock->pDataBlock, slotId)",
          "new_text": "colDataGetData(pCol, i)",
          "old_line_content": "  SColumnInfoData* pCol = taosArrayGet(pBlock->pDataBlock, slotId);",
          "new_line_content": "    char*          data = colDataGetData(pCol, i);",
          "content_same": false
        },
        {
          "line": 3096,
          "old_api": "GET_RES_INFO",
          "new_api": "firstLastTransferInfo",
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": "firstLastTransferInfo(pCtx, pInputInfo, pInfo, isFirstQuery, i)",
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "    firstLastTransferInfo(pCtx, pInputInfo, pInfo, isFirstQuery, i);",
          "content_same": false
        },
        {
          "line": 3112,
          "old_api": "getFirstLastInfoSize",
          "new_api": "taosArrayGet",
          "old_text": "getFirstLastInfoSize(pRes->bytes)",
          "new_text": "taosArrayGet(pBlock->pDataBlock, slotId)",
          "old_line_content": "  int32_t resultBytes = getFirstLastInfoSize(pRes->bytes);",
          "new_line_content": "  SColumnInfoData* pCol = taosArrayGet(pBlock->pDataBlock, slotId);",
          "content_same": false
        },
        {
          "line": 3118,
          "old_api": "varDataSetLen",
          "new_api": "colDataAppend",
          "old_text": "varDataSetLen(res, resultBytes)",
          "new_text": "colDataAppend(pCol, pBlock->info.rows, pRes->buf, pRes->isNull || pResInfo->isNullRes)",
          "old_line_content": "  varDataSetLen(res, resultBytes);",
          "new_line_content": "  colDataAppend(pCol, pBlock->info.rows, pRes->buf, pRes->isNull || pResInfo->isNullRes);",
          "content_same": false
        },
        {
          "line": 3121,
          "old_api": "taosArrayGet",
          "new_api": "setSelectivityValue",
          "old_text": "taosArrayGet(pBlock->pDataBlock, slotId)",
          "new_text": "setSelectivityValue(pCtx, pBlock, &pRes->pos, pBlock->info.rows)",
          "old_line_content": "  SColumnInfoData* pCol = taosArrayGet(pBlock->pDataBlock, slotId);",
          "new_line_content": "  setSelectivityValue(pCtx, pBlock, &pRes->pos, pBlock->info.rows);",
          "content_same": false
        },
        {
          "line": 3133,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": "taosMemoryCalloc",
          "old_text": "GET_ROWCELL_INTERBUF(pDResInfo)",
          "new_text": "taosMemoryCalloc(resultBytes + VARSTR_HEADER_SIZE, sizeof(char))",
          "old_line_content": "  SFirstLastRes*       pDBuf = GET_ROWCELL_INTERBUF(pDResInfo);",
          "new_line_content": "  char* res = taosMemoryCalloc(resultBytes + VARSTR_HEADER_SIZE, sizeof(char));",
          "content_same": false
        },
        {
          "line": 3136,
          "old_api": "GET_RES_INFO",
          "new_api": "varDataSetLen",
          "old_text": "GET_RES_INFO(pSourceCtx)",
          "new_text": "varDataSetLen(res, resultBytes)",
          "old_line_content": "  SResultRowEntryInfo* pSResInfo = GET_RES_INFO(pSourceCtx);",
          "new_line_content": "  varDataSetLen(res, resultBytes);",
          "content_same": false
        },
        {
          "line": 3151,
          "old_api": "colDataIsNull_s",
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": "colDataIsNull_s(pInputCol, rowIndex)",
          "new_text": "GET_ROWCELL_INTERBUF(pDResInfo)",
          "old_line_content": "  if (colDataIsNull_s(pInputCol, rowIndex)) {",
          "new_line_content": "  SFirstLastRes*       pDBuf = GET_ROWCELL_INTERBUF(pDResInfo);",
          "content_same": false
        },
        {
          "line": 3182,
          "old_api": "getRowPTs",
          "new_api": "firstlastSaveTupleData",
          "old_text": "getRowPTs(pInput->pPTS, pInput->totalRows - 1)",
          "new_text": "firstlastSaveTupleData(pCtx->pSrcBlock, rowIndex, pCtx, pInfo)",
          "old_line_content": "  TSKEY endKey = getRowPTs(pInput->pPTS, pInput->totalRows - 1);",
          "new_line_content": "  firstlastSaveTupleData(pCtx->pSrcBlock, rowIndex, pCtx, pInfo);",
          "content_same": false
        },
        {
          "line": 3191,
          "old_api": "colDataGetData",
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": "colDataGetData(pInputCol, i)",
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "      char* data = colDataGetData(pInputCol, i);",
          "new_line_content": "  SFirstLastRes*       pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 3380,
          "old_api": "colDataSetNull_f",
          "new_api": "GET_RES_INFO",
          "old_text": "colDataSetNull_f(pOutput->nullbitmap, pos)",
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "          colDataSetNull_f(pOutput->nullbitmap, pos);",
          "new_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 3398,
          "old_api": "doSetPrevVal",
          "new_api": "colDataSetNull_f",
          "old_text": "doSetPrevVal(pDiffInfo, pInputCol->info.type, pv)",
          "new_text": "colDataSetNull_f(pOutput->nullbitmap, pos)",
          "old_line_content": "        doSetPrevVal(pDiffInfo, pInputCol->info.type, pv);",
          "new_line_content": "          colDataSetNull_f(pOutput->nullbitmap, pos);",
          "content_same": false
        },
        {
          "line": 3416,
          "old_api": "colDataGetData",
          "new_api": "doSetPrevVal",
          "old_text": "colDataGetData(pInputCol, i)",
          "new_text": "doSetPrevVal(pDiffInfo, pInputCol->info.type, pv)",
          "old_line_content": "      char* pv = colDataGetData(pInputCol, i);",
          "new_line_content": "        doSetPrevVal(pDiffInfo, pInputCol->info.type, pv);",
          "content_same": false
        },
        {
          "line": 3482,
          "old_api": "getTopBotOutputInfo",
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": "getTopBotOutputInfo(pCtx)",
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "  STopBotRes* pRes = getTopBotOutputInfo(pCtx);",
          "new_line_content": "  STopBotRes*          pRes = GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 3505,
          "old_api": "GET_RES_INFO",
          "new_api": "colDataIsNull_f",
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": "colDataIsNull_f(pCol->nullbitmap, i)",
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "    if (pCol->hasNull && colDataIsNull_f(pCol->nullbitmap, i)) {",
          "content_same": false
        },
        {
          "line": 3510,
          "old_api": "getTopBotOutputInfo",
          "new_api": "colDataGetData",
          "old_text": "getTopBotOutputInfo(pCtx)",
          "new_text": "colDataGetData(pCol, i)",
          "old_line_content": "  STopBotRes* pRes = getTopBotOutputInfo(pCtx);",
          "new_line_content": "    char* data = colDataGetData(pCol, i);",
          "content_same": false
        },
        {
          "line": 3515,
          "old_api": "colDataIsNull_f",
          "new_api": "saveTupleData",
          "old_text": "colDataIsNull_f(pCol->nullbitmap, i)",
          "new_text": "saveTupleData(pCtx, pInput->startRowIndex, pCtx->pSrcBlock, NULL)",
          "old_line_content": "    if (pCol->hasNull && colDataIsNull_f(pCol->nullbitmap, i)) {",
          "new_line_content": "    pRes->nullTuplePos = saveTupleData(pCtx, pInput->startRowIndex, pCtx->pSrcBlock, NULL);",
          "content_same": false
        },
        {
          "line": 3538,
          "old_api": "IS_SIGNED_NUMERIC_TYPE",
          "new_api": "colDataGetData",
          "old_text": "IS_SIGNED_NUMERIC_TYPE(type)",
          "new_text": "colDataGetData(pCol, i)",
          "old_line_content": "  if (IS_SIGNED_NUMERIC_TYPE(type)) {",
          "new_line_content": "    char* data = colDataGetData(pCol, i);",
          "content_same": false
        },
        {
          "line": 3585,
          "old_api": "taosheapsort",
          "new_api": "assert",
          "old_text": "taosheapsort((void*)pItems, sizeof(STopBotResItem), pEntryInfo->numOfRes, (const void*)&type, topBotResComparFn,\n                 !isTopQuery)",
          "new_text": "assert(pItems != NULL)",
          "old_line_content": "    taosheapsort((void*)pItems, sizeof(STopBotResItem), pEntryInfo->numOfRes, (const void*)&type, topBotResComparFn,",
          "new_line_content": "  assert(pItems != NULL);",
          "content_same": false
        },
        {
          "line": 3606,
          "old_api": "taosheapadjust",
          "new_api": "IS_SIGNED_NUMERIC_TYPE",
          "old_text": "taosheapadjust((void*)pItems, sizeof(STopBotResItem), 0, pEntryInfo->numOfRes - 1, (const void*)&type,\n                     topBotResComparFn, NULL, !isTopQuery)",
          "new_text": "IS_SIGNED_NUMERIC_TYPE(type)",
          "old_line_content": "      taosheapadjust((void*)pItems, sizeof(STopBotResItem), 0, pEntryInfo->numOfRes - 1, (const void*)&type,",
          "new_line_content": "    if ((isTopQuery && ((IS_SIGNED_NUMERIC_TYPE(type) && val.i > pItems[0].v.i) ||",
          "content_same": false
        },
        {
          "line": 3656,
          "old_api": "getNewBufPage",
          "new_api": "varDataTLen",
          "old_text": "getNewBufPage(pHandle->pBuf, &pHandle->currentPage)",
          "new_text": "varDataTLen(p)",
          "old_line_content": "      pPage = getNewBufPage(pHandle->pBuf, &pHandle->currentPage);",
          "new_line_content": "      memcpy(pStart + offset, p, (pCol->info.type == TSDB_DATA_TYPE_JSON) ? getJsonValueLen(p) : varDataTLen(p));",
          "content_same": false
        },
        {
          "line": 3677,
          "old_api": "ASSERT",
          "new_api": "getBufPage",
          "old_text": "ASSERT(0)",
          "new_text": "getBufPage(pHandle->pBuf, pHandle->currentPage)",
          "old_line_content": "      ASSERT(0);",
          "new_line_content": "      pPage = getBufPage(pHandle->pBuf, pHandle->currentPage);",
          "content_same": false
        },
        {
          "line": 3694,
          "old_api": "taosMemoryMalloc",
          "new_api": "streamStateFuncPut",
          "old_text": "taosMemoryMalloc(pCtx->subsidiaries.rowLen)",
          "new_text": "streamStateFuncPut(pHandle->pState, pKey, pBuf, length)",
          "old_line_content": "    pCtx->subsidiaries.buf = taosMemoryMalloc(pCtx->subsidiaries.rowLen);",
          "new_line_content": "    if (streamStateFuncPut(pHandle->pState, pKey, pBuf, length) < 0) {",
          "content_same": false
        },
        {
          "line": 3716,
          "old_api": "doUpdateTupleData",
          "new_api": "doSaveTupleData",
          "old_text": "doUpdateTupleData(&pCtx->saveHandle, buf, pCtx->subsidiaries.rowLen, pPos)",
          "new_text": "doSaveTupleData(&pCtx->saveHandle, buf, pCtx->subsidiaries.rowLen, pKey)",
          "old_line_content": "  doUpdateTupleData(&pCtx->saveHandle, buf, pCtx->subsidiaries.rowLen, pPos);",
          "new_line_content": "  return doSaveTupleData(&pCtx->saveHandle, buf, pCtx->subsidiaries.rowLen, pKey);",
          "content_same": false
        },
        {
          "line": 3722,
          "old_api": "getBufPage",
          "new_api": "memcpy",
          "old_text": "getBufPage(pHandle->pBuf, pPos->pageId)",
          "new_text": "memcpy(pPage->data + pPos->offset, pBuf, length)",
          "old_line_content": "    SFilePage* pPage = getBufPage(pHandle->pBuf, pPos->pageId);",
          "new_line_content": "    memcpy(pPage->data + pPos->offset, pBuf, length);",
          "content_same": false
        },
        {
          "line": 3740,
          "old_api": "getTopBotOutputInfo",
          "new_api": "getBufPage",
          "old_text": "getTopBotOutputInfo(pCtx)",
          "new_text": "getBufPage(pHandle->pBuf, pPos->pageId)",
          "old_line_content": "  STopBotRes*          pRes = getTopBotOutputInfo(pCtx);",
          "new_line_content": "    SFilePage* pPage = getBufPage(pHandle->pBuf, pPos->pageId);",
          "content_same": false
        },
        {
          "line": 3758,
          "old_api": "colDataAppend",
          "new_api": "getTopBotOutputInfo",
          "old_text": "colDataAppend(pCol, currentRow, (const char*)&v, false)",
          "new_text": "getTopBotOutputInfo(pCtx)",
          "old_line_content": "      colDataAppend(pCol, currentRow, (const char*)&v, false);",
          "new_line_content": "  STopBotRes*          pRes = getTopBotOutputInfo(pCtx);",
          "content_same": false
        },
        {
          "line": 3763,
          "old_api": "qDebug",
          "new_api": "taosArrayGet",
          "old_text": "qDebug(\"page_finalize i:%d,item:%p,pageId:%d, offset:%d\\n\", i, pItem, pItem->tuplePos.pageId,\n           pItem->tuplePos.offset)",
          "new_text": "taosArrayGet(pBlock->pDataBlock, slotId)",
          "old_line_content": "    qDebug(\"page_finalize i:%d,item:%p,pageId:%d, offset:%d\\n\", i, pItem, pItem->tuplePos.pageId,",
          "new_line_content": "  SColumnInfoData* pCol = taosArrayGet(pBlock->pDataBlock, slotId);",
          "content_same": false
        },
        {
          "line": 3792,
          "old_api": "IS_FLOAT_TYPE",
          "new_api": "GET_RES_INFO",
          "old_text": "IS_FLOAT_TYPE(type)",
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "                        (IS_FLOAT_TYPE(type) && pSourceItem->v.d > pItems[0].v.d))) ||",
          "new_line_content": "  SResultRowEntryInfo* pEntryInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 3793,
          "old_api": "IS_SIGNED_NUMERIC_TYPE",
          "new_api": "getTopBotOutputInfo",
          "old_text": "IS_SIGNED_NUMERIC_TYPE(type)",
          "new_text": "getTopBotOutputInfo(pCtx)",
          "old_line_content": "        (!isTopQuery && ((IS_SIGNED_NUMERIC_TYPE(type) && pSourceItem->v.i < pItems[0].v.i) ||",
          "new_line_content": "  STopBotRes*          pRes = getTopBotOutputInfo(pCtx);",
          "content_same": false
        },
        {
          "line": 3795,
          "old_api": "IS_FLOAT_TYPE",
          "new_api": "assert",
          "old_text": "IS_FLOAT_TYPE(type)",
          "new_text": "assert(pItems != NULL)",
          "old_line_content": "                         (IS_FLOAT_TYPE(type) && pSourceItem->v.d < pItems[0].v.d)))) {",
          "new_line_content": "  assert(pItems != NULL);",
          "content_same": false
        },
        {
          "line": 3803,
          "old_api": "taosheapadjust",
          "new_api": "replaceTupleData",
          "old_text": "taosheapadjust((void*)pItems, sizeof(STopBotResItem), 0, pEntryInfo->numOfRes - 1, (const void*)&type,\n                     topBotResComparFn, NULL, !isTopQuery)",
          "new_text": "replaceTupleData(&pItem->tuplePos, &pSourceItem->tuplePos)",
          "old_line_content": "      taosheapadjust((void*)pItems, sizeof(STopBotResItem), 0, pEntryInfo->numOfRes - 1, (const void*)&type,",
          "new_line_content": "    replaceTupleData(&pItem->tuplePos, &pSourceItem->tuplePos);",
          "content_same": false
        },
        {
          "line": 3810,
          "old_api": "GET_RES_INFO",
          "new_api": "IS_FLOAT_TYPE",
          "old_text": "GET_RES_INFO(pSourceCtx)",
          "new_text": "IS_FLOAT_TYPE(type)",
          "old_line_content": "  SResultRowEntryInfo* pSResInfo = GET_RES_INFO(pSourceCtx);",
          "new_line_content": "                        (IS_FLOAT_TYPE(type) && pSourceItem->v.d > pItems[0].v.d))) ||",
          "content_same": false
        },
        {
          "line": 3811,
          "old_api": "getTopBotOutputInfo",
          "new_api": "IS_SIGNED_NUMERIC_TYPE",
          "old_text": "getTopBotOutputInfo(pSourceCtx)",
          "new_text": "IS_SIGNED_NUMERIC_TYPE(type)",
          "old_line_content": "  STopBotRes*          pSBuf = getTopBotOutputInfo(pSourceCtx);",
          "new_line_content": "        (!isTopQuery && ((IS_SIGNED_NUMERIC_TYPE(type) && pSourceItem->v.i < pItems[0].v.i) ||",
          "content_same": false
        },
        {
          "line": 3820,
          "old_api": "GET_RES_INFO",
          "new_api": "replaceTupleData",
          "old_text": "GET_RES_INFO(pSourceCtx)",
          "new_text": "replaceTupleData(&pItem->tuplePos, &pSourceItem->tuplePos)",
          "old_line_content": "  SResultRowEntryInfo* pSResInfo = GET_RES_INFO(pSourceCtx);",
          "new_line_content": "      replaceTupleData(&pItem->tuplePos, &pSourceItem->tuplePos);",
          "content_same": false
        },
        {
          "line": 3821,
          "old_api": "getTopBotOutputInfo",
          "new_api": "taosheapadjust",
          "old_text": "getTopBotOutputInfo(pSourceCtx)",
          "new_text": "taosheapadjust((void*)pItems, sizeof(STopBotResItem), 0, pEntryInfo->numOfRes - 1, (const void*)&type,\n                     topBotResComparFn, NULL, !isTopQuery)",
          "old_line_content": "  STopBotRes*          pSBuf = getTopBotOutputInfo(pSourceCtx);",
          "new_line_content": "      taosheapadjust((void*)pItems, sizeof(STopBotResItem), 0, pEntryInfo->numOfRes - 1, (const void*)&type,",
          "content_same": false
        },
        {
          "line": 3842,
          "old_api": "SET_DOUBLE_VAL",
          "new_api": "addResult",
          "old_text": "SET_DOUBLE_VAL(&pInfo->min, DBL_MAX)",
          "new_text": "addResult(pDestCtx, pSBuf->pItems + i, type, false)",
          "old_line_content": "  SET_DOUBLE_VAL(&pInfo->min, DBL_MAX);",
          "new_line_content": "    addResult(pDestCtx, pSBuf->pItems + i, type, false);",
          "content_same": false
        },
        {
          "line": 3889,
          "old_api": "colDataIsNull_f",
          "new_api": "GET_UINT64_VAL",
          "old_text": "colDataIsNull_f(pCol->nullbitmap, i)",
          "new_text": "GET_UINT64_VAL(&pAgg->min)",
          "old_line_content": "      if (colDataIsNull_f(pCol->nullbitmap, i)) {",
          "new_line_content": "      tmin = (double)GET_UINT64_VAL(&pAgg->min);",
          "content_same": false
        },
        {
          "line": 3893,
          "old_api": "colDataGetData",
          "new_api": "GET_DOUBLE_VAL",
          "old_text": "colDataGetData(pCol, i)",
          "new_text": "GET_DOUBLE_VAL(&pInfo->min)",
          "old_line_content": "      char* data = colDataGetData(pCol, i);",
          "new_line_content": "    if (GET_DOUBLE_VAL(&pInfo->min) > tmin) {",
          "content_same": false
        },
        {
          "line": 3911,
          "old_api": "GET_RES_INFO",
          "new_api": "colDataGetData",
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": "colDataGetData(pCol, i)",
          "old_line_content": "  SET_VAL(GET_RES_INFO(pCtx), numOfElems, 1);",
          "new_line_content": "      char* data = colDataGetData(pCol, i);",
          "content_same": false
        },
        {
          "line": 3958,
          "old_api": "GET_RES_INFO",
          "new_api": "varDataVal",
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": "varDataVal(data)",
          "old_line_content": "    GET_RES_INFO(pCtx)->isNullRes = 1;",
          "new_line_content": "    SSpreadInfo* pInputInfo = (SSpreadInfo*)varDataVal(data);",
          "content_same": false
        },
        {
          "line": 3960,
          "old_api": "functionFinalize",
          "new_api": "spreadTransferInfo",
          "old_text": "functionFinalize(pCtx, pBlock)",
          "new_text": "spreadTransferInfo(pInputInfo, pInfo)",
          "old_line_content": "  return functionFinalize(pCtx, pBlock);",
          "new_line_content": "      spreadTransferInfo(pInputInfo, pInfo);",
          "content_same": false
        },
        {
          "line": 3983,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": "GET_RES_INFO",
          "old_text": "GET_ROWCELL_INTERBUF(pDResInfo)",
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  SSpreadInfo*         pDBuf = GET_ROWCELL_INTERBUF(pDResInfo);",
          "new_line_content": "  SSpreadInfo*         pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "content_same": false
        },
        {
          "line": 3985,
          "old_api": "GET_RES_INFO",
          "new_api": "taosMemoryCalloc",
          "old_text": "GET_RES_INFO(pSourceCtx)",
          "new_text": "taosMemoryCalloc(resultBytes + VARSTR_HEADER_SIZE, sizeof(char))",
          "old_line_content": "  SResultRowEntryInfo* pSResInfo = GET_RES_INFO(pSourceCtx);",
          "new_line_content": "  char*                res = taosMemoryCalloc(resultBytes + VARSTR_HEADER_SIZE, sizeof(char));",
          "content_same": false
        },
        {
          "line": 3987,
          "old_api": "spreadTransferInfo",
          "new_api": "varDataVal",
          "old_text": "spreadTransferInfo(pSBuf, pDBuf)",
          "new_text": "varDataVal(res)",
          "old_line_content": "  spreadTransferInfo(pSBuf, pDBuf);",
          "new_line_content": "  memcpy(varDataVal(res), pInfo, resultBytes);",
          "content_same": false
        },
        {
          "line": 3988,
          "old_api": "TMAX",
          "new_api": "varDataSetLen",
          "old_text": "TMAX(pDResInfo->numOfRes, pSResInfo->numOfRes)",
          "new_text": "varDataSetLen(res, resultBytes)",
          "old_line_content": "  pDResInfo->numOfRes = TMAX(pDResInfo->numOfRes, pSResInfo->numOfRes);",
          "new_line_content": "  varDataSetLen(res, resultBytes);",
          "content_same": false
        },
        {
          "line": 4001,
          "old_api": "functionSetup",
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": "functionSetup(pCtx, pResultInfo)",
          "new_text": "GET_ROWCELL_INTERBUF(pDResInfo)",
          "old_line_content": "  if (!functionSetup(pCtx, pResultInfo)) {",
          "new_line_content": "  SSpreadInfo*         pDBuf = GET_ROWCELL_INTERBUF(pDResInfo);",
          "content_same": false
        },
        {
          "line": 4005,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": "spreadTransferInfo",
          "old_text": "GET_ROWCELL_INTERBUF(pResultInfo)",
          "new_text": "spreadTransferInfo(pSBuf, pDBuf)",
          "old_line_content": "  SElapsedInfo* pInfo = GET_ROWCELL_INTERBUF(pResultInfo);",
          "new_line_content": "  spreadTransferInfo(pSBuf, pDBuf);",
          "content_same": false
        },
        {
          "line": 4137,
          "old_api": "GET_RES_INFO",
          "new_api": "colDataGetData",
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": "colDataGetData(pCol, i)",
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "    char*         data = colDataGetData(pCol, i);",
          "content_same": false
        },
        {
          "line": 4138,
          "old_api": "GET_RES_INFO",
          "new_api": "varDataVal",
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": "varDataVal(data)",
          "old_line_content": "  SElapsedInfo*        pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "new_line_content": "    SElapsedInfo* pInputInfo = (SElapsedInfo*)varDataVal(data);",
          "content_same": false
        },
        {
          "line": 4139,
          "old_api": "getElapsedInfoSize",
          "new_api": "elapsedTransferInfo",
          "old_text": "getElapsedInfoSize()",
          "new_text": "elapsedTransferInfo(pInputInfo, pInfo)",
          "old_line_content": "  int32_t              resultBytes = getElapsedInfoSize();",
          "new_line_content": "    elapsedTransferInfo(pInputInfo, pInfo);",
          "content_same": false
        },
        {
          "line": 4142,
          "old_api": "varDataVal",
          "new_api": "GET_RES_INFO",
          "old_text": "varDataVal(res)",
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  memcpy(varDataVal(res), pInfo, resultBytes);",
          "new_line_content": "  SET_VAL(GET_RES_INFO(pCtx), 1, 1);",
          "content_same": false
        },
        {
          "line": 4156,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": "GET_RES_INFO",
          "old_text": "GET_ROWCELL_INTERBUF(pDResInfo)",
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  SElapsedInfo*        pDBuf = GET_ROWCELL_INTERBUF(pDResInfo);",
          "new_line_content": "  SElapsedInfo*        pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "content_same": false
        },
        {
          "line": 4158,
          "old_api": "GET_RES_INFO",
          "new_api": "taosMemoryCalloc",
          "old_text": "GET_RES_INFO(pSourceCtx)",
          "new_text": "taosMemoryCalloc(resultBytes + VARSTR_HEADER_SIZE, sizeof(char))",
          "old_line_content": "  SResultRowEntryInfo* pSResInfo = GET_RES_INFO(pSourceCtx);",
          "new_line_content": "  char*                res = taosMemoryCalloc(resultBytes + VARSTR_HEADER_SIZE, sizeof(char));",
          "content_same": false
        },
        {
          "line": 4161,
          "old_api": "elapsedTransferInfo",
          "new_api": "varDataSetLen",
          "old_text": "elapsedTransferInfo(pSBuf, pDBuf)",
          "new_text": "varDataSetLen(res, resultBytes)",
          "old_line_content": "  elapsedTransferInfo(pSBuf, pDBuf);",
          "new_line_content": "  varDataSetLen(res, resultBytes);",
          "content_same": false
        },
        {
          "line": 4180,
          "old_api": "strcasecmp",
          "new_api": "TMAX",
          "old_text": "strcasecmp(binTypeStr, \"linear_bin\")",
          "new_text": "TMAX(pDResInfo->numOfRes, pSResInfo->numOfRes)",
          "old_line_content": "  } else if (strcasecmp(binTypeStr, \"linear_bin\") == 0) {",
          "new_line_content": "  pDResInfo->numOfRes = TMAX(pDResInfo->numOfRes, pSResInfo->numOfRes);",
          "content_same": false
        },
        {
          "line": 4196,
          "old_api": "cJSON_GetArraySize",
          "new_api": "strcasecmp",
          "old_text": "cJSON_GetArraySize(binDesc)",
          "new_text": "strcasecmp(binTypeStr, \"user_input\")",
          "old_line_content": "    int32_t numOfParams = cJSON_GetArraySize(binDesc);",
          "new_line_content": "  if (strcasecmp(binTypeStr, \"user_input\") == 0) {",
          "content_same": false
        },
        {
          "line": 4234,
          "old_api": "taosMemoryFree",
          "new_api": "isinf",
          "old_text": "taosMemoryFree(intervals)",
          "new_text": "isinf(width->valuedouble)",
          "old_line_content": "        taosMemoryFree(intervals);",
          "new_line_content": "    if (isinf(start->valuedouble) || (width != NULL && isinf(width->valuedouble)) ||",
          "content_same": false
        },
        {
          "line": 4248,
          "old_api": "taosMemoryFree",
          "new_api": "taosMemoryCalloc",
          "old_text": "taosMemoryFree(intervals)",
          "new_text": "taosMemoryCalloc(numOfBins, sizeof(double))",
          "old_line_content": "        taosMemoryFree(intervals);",
          "new_line_content": "    intervals = taosMemoryCalloc(numOfBins, sizeof(double));",
          "content_same": false
        },
        {
          "line": 4274,
          "old_api": "TSWAP",
          "new_api": "pow",
          "old_text": "TSWAP(intervals[0], intervals[numOfBins - 1])",
          "new_text": "pow(factor->valuedouble, i * 1.0)",
          "old_line_content": "        TSWAP(intervals[0], intervals[numOfBins - 1]);",
          "new_line_content": "        intervals[startIndex] = start->valuedouble * pow(factor->valuedouble, i * 1.0);",
          "content_same": false
        },
        {
          "line": 4282,
          "old_api": "taosMemoryCalloc",
          "new_api": "taosMemoryFree",
          "old_text": "taosMemoryCalloc(numOfBins, sizeof(double))",
          "new_text": "taosMemoryFree(intervals)",
          "old_line_content": "    intervals = taosMemoryCalloc(numOfBins, sizeof(double));",
          "new_line_content": "      taosMemoryFree(intervals);",
          "content_same": false
        },
        {
          "line": 4292,
          "old_api": "taosMemoryFree",
          "new_api": "TSWAP",
          "old_text": "taosMemoryFree(intervals)",
          "new_text": "TSWAP(intervals[0], intervals[numOfBins - 1])",
          "old_line_content": "        taosMemoryFree(intervals);",
          "new_line_content": "        TSWAP(intervals[0], intervals[numOfBins - 1]);",
          "content_same": false
        },
        {
          "line": 4332,
          "old_api": "varDataVal",
          "new_api": "taosMemoryFree",
          "old_text": "varDataVal(pCtx->param[2].param.pz)",
          "new_text": "taosMemoryFree(intervals)",
          "old_line_content": "  char*   binDesc = varDataVal(pCtx->param[2].param.pz);",
          "new_line_content": "  taosMemoryFree(intervals);",
          "content_same": false
        },
        {
          "line": 4337,
          "old_api": "getHistogramBinDesc",
          "new_api": "functionSetup",
          "old_text": "getHistogramBinDesc(pInfo, binDesc, binType, (bool)normalized)",
          "new_text": "functionSetup(pCtx, pResultInfo)",
          "old_line_content": "  if (!getHistogramBinDesc(pInfo, binDesc, binType, (bool)normalized)) {",
          "new_line_content": "  if (!functionSetup(pCtx, pResultInfo)) {",
          "content_same": false
        },
        {
          "line": 4363,
          "old_api": "colDataGetData",
          "new_api": "GET_RES_INFO",
          "old_text": "colDataGetData(pCol, i)",
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "    char*  data = colDataGetData(pCol, i);",
          "new_line_content": "  SHistoFuncInfo* pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "content_same": false
        },
        {
          "line": 4402,
          "old_api": "ASSERT",
          "new_api": "histogramFunctionImpl",
          "old_text": "ASSERT(pCol->info.type == TSDB_DATA_TYPE_BINARY)",
          "new_text": "histogramFunctionImpl(pCtx, false)",
          "old_line_content": "  ASSERT(pCol->info.type == TSDB_DATA_TYPE_BINARY);",
          "new_line_content": "int32_t histogramFunction(SqlFunctionCtx* pCtx) { return histogramFunctionImpl(pCtx, false); }",
          "content_same": false
        },
        {
          "line": 4404,
          "old_api": "GET_RES_INFO",
          "new_api": "histogramFunctionImpl",
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": "histogramFunctionImpl(pCtx, true)",
          "old_line_content": "  SHistoFuncInfo* pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "new_line_content": "int32_t histogramFunctionPartial(SqlFunctionCtx* pCtx) { return histogramFunctionImpl(pCtx, true); }",
          "content_same": false
        },
        {
          "line": 4420,
          "old_api": "GET_RES_INFO",
          "new_api": "ASSERT",
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": "ASSERT(pCol->info.type == TSDB_DATA_TYPE_BINARY)",
          "old_line_content": "  SHistoFuncInfo*      pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "new_line_content": "  ASSERT(pCol->info.type == TSDB_DATA_TYPE_BINARY);",
          "content_same": false
        },
        {
          "line": 4422,
          "old_api": "taosArrayGet",
          "new_api": "GET_RES_INFO",
          "old_text": "taosArrayGet(pBlock->pDataBlock, slotId)",
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  SColumnInfoData*     pCol = taosArrayGet(pBlock->pDataBlock, slotId);",
          "new_line_content": "  SHistoFuncInfo* pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "content_same": false
        },
        {
          "line": 4440,
          "old_api": "varDataVal",
          "new_api": "taosArrayGet",
          "old_text": "varDataVal(buf)",
          "new_text": "taosArrayGet(pBlock->pDataBlock, slotId)",
          "old_line_content": "      len = sprintf(varDataVal(buf), \"{\\\"lower_bin\\\":%g, \\\"upper_bin\\\":%g, \\\"count\\\":%\" PRId64 \"}\",",
          "new_line_content": "  SColumnInfoData*     pCol = taosArrayGet(pBlock->pDataBlock, slotId);",
          "content_same": false
        },
        {
          "line": 4458,
          "old_api": "taosMemoryCalloc",
          "new_api": "varDataVal",
          "old_text": "taosMemoryCalloc(resultBytes + VARSTR_HEADER_SIZE, sizeof(char))",
          "new_text": "varDataVal(buf)",
          "old_line_content": "  char*                res = taosMemoryCalloc(resultBytes + VARSTR_HEADER_SIZE, sizeof(char));",
          "new_line_content": "      len = sprintf(varDataVal(buf), \"{\\\"lower_bin\\\":%g, \\\"upper_bin\\\":%g, \\\"count\\\":%\" PRId64 \"}\",",
          "content_same": false
        },
        {
          "line": 4461,
          "old_api": "varDataSetLen",
          "new_api": "varDataVal",
          "old_text": "varDataSetLen(res, resultBytes)",
          "new_text": "varDataVal(buf)",
          "old_line_content": "  varDataSetLen(res, resultBytes);",
          "new_line_content": "      len = sprintf(varDataVal(buf), \"{\\\"lower_bin\\\":%g, \\\"upper_bin\\\":%g, \\\"count\\\":%lf}\", pInfo->bins[i].lower,",
          "content_same": false
        },
        {
          "line": 4464,
          "old_api": "taosArrayGet",
          "new_api": "varDataSetLen",
          "old_text": "taosArrayGet(pBlock->pDataBlock, slotId)",
          "new_text": "varDataSetLen(buf, len)",
          "old_line_content": "  SColumnInfoData* pCol = taosArrayGet(pBlock->pDataBlock, slotId);",
          "new_line_content": "    varDataSetLen(buf, len);",
          "content_same": false
        },
        {
          "line": 4474,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": "GET_RES_INFO",
          "old_text": "GET_ROWCELL_INTERBUF(pDResInfo)",
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  SHistoFuncInfo*      pDBuf = GET_ROWCELL_INTERBUF(pDResInfo);",
          "new_line_content": "  SHistoFuncInfo*      pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "content_same": false
        },
        {
          "line": 4476,
          "old_api": "GET_RES_INFO",
          "new_api": "taosMemoryCalloc",
          "old_text": "GET_RES_INFO(pSourceCtx)",
          "new_text": "taosMemoryCalloc(resultBytes + VARSTR_HEADER_SIZE, sizeof(char))",
          "old_line_content": "  SResultRowEntryInfo* pSResInfo = GET_RES_INFO(pSourceCtx);",
          "new_line_content": "  char*                res = taosMemoryCalloc(resultBytes + VARSTR_HEADER_SIZE, sizeof(char));",
          "content_same": false
        },
        {
          "line": 4479,
          "old_api": "histogramTransferInfo",
          "new_api": "varDataSetLen",
          "old_text": "histogramTransferInfo(pSBuf, pDBuf)",
          "new_text": "varDataSetLen(res, resultBytes)",
          "old_line_content": "  histogramTransferInfo(pSBuf, pDBuf);",
          "new_line_content": "  varDataSetLen(res, resultBytes);",
          "content_same": false
        },
        {
          "line": 4614,
          "old_api": "GET_RES_INFO",
          "new_api": "IS_VAR_DATA_TYPE",
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": "IS_VAR_DATA_TYPE(type)",
          "old_line_content": "    SET_VAL(GET_RES_INFO(pCtx), 1, 1);",
          "new_line_content": "    if (IS_VAR_DATA_TYPE(type)) {",
          "content_same": false
        },
        {
          "line": 4632,
          "old_api": "ASSERT",
          "new_api": "GET_RES_INFO",
          "old_text": "ASSERT(pCol->info.type == TSDB_DATA_TYPE_BINARY)",
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  ASSERT(pCol->info.type == TSDB_DATA_TYPE_BINARY);",
          "new_line_content": "    SET_VAL(GET_RES_INFO(pCtx), 1, 1);",
          "content_same": false
        },
        {
          "line": 4657,
          "old_api": "hllCountCnt",
          "new_api": "colDataGetData",
          "old_text": "hllCountCnt(pHllInfo->buckets)",
          "new_text": "colDataGetData(pCol, i)",
          "old_line_content": "  pHllInfo->result = hllCountCnt(pHllInfo->buckets);",
          "new_line_content": "    char*     data = colDataGetData(pCol, i);",
          "content_same": false
        },
        {
          "line": 4672,
          "old_api": "varDataSetLen",
          "new_api": "GET_RES_INFO",
          "old_text": "varDataSetLen(res, resultBytes)",
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  varDataSetLen(res, resultBytes);",
          "new_line_content": "  SResultRowEntryInfo* pInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 4675,
          "old_api": "taosArrayGet",
          "new_api": "hllCountCnt",
          "old_text": "taosArrayGet(pBlock->pDataBlock, slotId)",
          "new_text": "hllCountCnt(pHllInfo->buckets)",
          "old_line_content": "  SColumnInfoData* pCol = taosArrayGet(pBlock->pDataBlock, slotId);",
          "new_line_content": "  pHllInfo->result = hllCountCnt(pHllInfo->buckets);",
          "content_same": false
        },
        {
          "line": 4685,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": "GET_RES_INFO",
          "old_text": "GET_ROWCELL_INTERBUF(pDResInfo)",
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  SHLLInfo*            pDBuf = GET_ROWCELL_INTERBUF(pDResInfo);",
          "new_line_content": "  SHLLInfo*            pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "content_same": false
        },
        {
          "line": 4687,
          "old_api": "GET_RES_INFO",
          "new_api": "taosMemoryCalloc",
          "old_text": "GET_RES_INFO(pSourceCtx)",
          "new_text": "taosMemoryCalloc(resultBytes + VARSTR_HEADER_SIZE, sizeof(char))",
          "old_line_content": "  SResultRowEntryInfo* pSResInfo = GET_RES_INFO(pSourceCtx);",
          "new_line_content": "  char*                res = taosMemoryCalloc(resultBytes + VARSTR_HEADER_SIZE, sizeof(char));",
          "content_same": false
        },
        {
          "line": 4690,
          "old_api": "hllTransferInfo",
          "new_api": "varDataSetLen",
          "old_text": "hllTransferInfo(pSBuf, pDBuf)",
          "new_text": "varDataSetLen(res, resultBytes)",
          "old_line_content": "  hllTransferInfo(pSBuf, pDBuf);",
          "new_line_content": "  varDataSetLen(res, resultBytes);",
          "content_same": false
        },
        {
          "line": 4703,
          "old_api": "strncasecmp",
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": "strncasecmp(opStr, \"LT\", 2)",
          "new_text": "GET_ROWCELL_INTERBUF(pDResInfo)",
          "old_line_content": "  if (strncasecmp(opStr, \"LT\", 2) == 0) {",
          "new_line_content": "  SHLLInfo*            pDBuf = GET_ROWCELL_INTERBUF(pDResInfo);",
          "content_same": false
        },
        {
          "line": 4705,
          "old_api": "strncasecmp",
          "new_api": "GET_RES_INFO",
          "old_text": "strncasecmp(opStr, \"GT\", 2)",
          "new_text": "GET_RES_INFO(pSourceCtx)",
          "old_line_content": "  } else if (strncasecmp(opStr, \"GT\", 2) == 0) {",
          "new_line_content": "  SResultRowEntryInfo* pSResInfo = GET_RES_INFO(pSourceCtx);",
          "content_same": false
        },
        {
          "line": 4709,
          "old_api": "strncasecmp",
          "new_api": "TMAX",
          "old_text": "strncasecmp(opStr, \"GE\", 2)",
          "new_text": "TMAX(pDResInfo->numOfRes, pSResInfo->numOfRes)",
          "old_line_content": "  } else if (strncasecmp(opStr, \"GE\", 2) == 0) {",
          "new_line_content": "  pDResInfo->numOfRes = TMAX(pDResInfo->numOfRes, pSResInfo->numOfRes);",
          "content_same": false
        },
        {
          "line": 4723,
          "old_api": "colDataGetData",
          "new_api": "strncasecmp",
          "old_text": "colDataGetData(pCol, index)",
          "new_text": "strncasecmp(opStr, \"GT\", 2)",
          "old_line_content": "  char* data = colDataGetData(pCol, index);",
          "new_line_content": "  } else if (strncasecmp(opStr, \"GT\", 2) == 0) {",
          "content_same": false
        },
        {
          "line": 4727,
          "old_api": "STATE_COMP",
          "new_api": "strncasecmp",
          "old_text": "STATE_COMP(op, v, param)",
          "new_text": "strncasecmp(opStr, \"GE\", 2)",
          "old_line_content": "      STATE_COMP(op, v, param);",
          "new_line_content": "  } else if (strncasecmp(opStr, \"GE\", 2) == 0) {",
          "content_same": false
        },
        {
          "line": 4801,
          "old_api": "colDataAppendNULL",
          "new_api": "GET_RES_INFO",
          "old_text": "colDataAppendNULL(pOutput, i)",
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "      colDataAppendNULL(pOutput, i);",
          "new_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 4892,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": "colDataAppend",
          "old_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "new_text": "colDataAppend(pOutput, pCtx->offset + numOfElems - 1, (char*)&output, false)",
          "old_line_content": "  SSumRes*             pSumRes = GET_ROWCELL_INTERBUF(pResInfo);",
          "new_line_content": "    colDataAppend(pOutput, pCtx->offset + numOfElems - 1, (char*)&output, false);",
          "content_same": false
        },
        {
          "line": 4909,
          "old_api": "colDataGetData",
          "new_api": "GET_RES_INFO",
          "old_text": "colDataGetData(pInputCol, i)",
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "    char* data = colDataGetData(pInputCol, i);",
          "new_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 4910,
          "old_api": "IS_SIGNED_NUMERIC_TYPE",
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": "IS_SIGNED_NUMERIC_TYPE(type)",
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "    if (IS_SIGNED_NUMERIC_TYPE(type)) {",
          "new_line_content": "  SSumRes*             pSumRes = GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 4928,
          "old_api": "colDataAppend",
          "new_api": "IS_SIGNED_NUMERIC_TYPE",
          "old_text": "colDataAppend(pOutput, pos, (char*)&pSumRes->dsum, false)",
          "new_text": "IS_SIGNED_NUMERIC_TYPE(type)",
          "old_line_content": "        colDataAppend(pOutput, pos, (char*)&pSumRes->dsum, false);",
          "new_line_content": "    if (IS_SIGNED_NUMERIC_TYPE(type)) {",
          "content_same": false
        },
        {
          "line": 4967,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": "functionSetup",
          "old_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "new_text": "functionSetup(pCtx, pResultInfo)",
          "old_line_content": "  SMavgInfo*           pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "new_line_content": "  if (!functionSetup(pCtx, pResultInfo)) {",
          "content_same": false
        },
        {
          "line": 4985,
          "old_api": "colDataGetData",
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": "colDataGetData(pInputCol, i)",
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "    char*  data = colDataGetData(pInputCol, i);",
          "new_line_content": "  SMavgInfo*           pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 5003,
          "old_api": "isnan",
          "new_api": "colDataGetData",
          "old_text": "isnan(result)",
          "new_text": "colDataGetData(pInputCol, i)",
          "old_line_content": "      if (isinf(result) || isnan(result)) {",
          "new_line_content": "    char*  data = colDataGetData(pInputCol, i);",
          "content_same": false
        },
        {
          "line": 5045,
          "old_api": "functionSetup",
          "new_api": "GET_RES_INFO",
          "old_text": "functionSetup(pCtx, pResultInfo)",
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  if (!functionSetup(pCtx, pResultInfo)) {",
          "new_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 5090,
          "old_api": "getSampleOutputInfo",
          "new_api": "sampleAssignResult",
          "old_text": "getSampleOutputInfo(pCtx)",
          "new_text": "sampleAssignResult(pInfo, data, pInfo->numSampled)",
          "old_line_content": "  SSampleInfo*         pInfo = getSampleOutputInfo(pCtx);",
          "new_line_content": "    sampleAssignResult(pInfo, data, pInfo->numSampled);",
          "content_same": false
        },
        {
          "line": 5096,
          "old_api": "colDataIsNull_s",
          "new_api": "taosRand",
          "old_text": "colDataIsNull_s(pInputCol, i)",
          "new_text": "taosRand()",
          "old_line_content": "    if (colDataIsNull_s(pInputCol, i)) {",
          "new_line_content": "    int32_t j = taosRand() % (pInfo->totalPoints);",
          "content_same": false
        },
        {
          "line": 5100,
          "old_api": "colDataGetData",
          "new_api": "updateTupleData",
          "old_text": "colDataGetData(pInputCol, i)",
          "new_text": "updateTupleData(pCtx, index, pCtx->pSrcBlock, &pInfo->tuplePos[j])",
          "old_line_content": "    char* data = colDataGetData(pInputCol, i);",
          "new_line_content": "        updateTupleData(pCtx, index, pCtx->pSrcBlock, &pInfo->tuplePos[j]);",
          "content_same": false
        },
        {
          "line": 5114,
          "old_api": "GET_RES_INFO",
          "new_api": "colDataIsNull_s",
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": "colDataIsNull_s(pInputCol, i)",
          "old_line_content": "  SResultRowEntryInfo* pEntryInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "    if (colDataIsNull_s(pInputCol, i)) {",
          "content_same": false
        },
        {
          "line": 5215,
          "old_api": "GET_RES_INFO",
          "new_api": "compareInt64Val",
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": "compareInt64Val(&d1->timestamp, &d2->timestamp)",
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "  return compareInt64Val(&d1->timestamp, &d2->timestamp);",
          "content_same": false
        },
        {
          "line": 5261,
          "old_api": "taosArrayGet",
          "new_api": "colDataAppend",
          "old_text": "taosArrayGet(pBlock->pDataBlock, slotId)",
          "new_text": "colDataAppend(pOutput, pos, pItem->data, false)",
          "old_line_content": "  SColumnInfoData* pCol = taosArrayGet(pBlock->pDataBlock, slotId);",
          "new_line_content": "      colDataAppend(pOutput, pos, pItem->data, false);",
          "content_same": false
        },
        {
          "line": 5285,
          "old_api": "functionSetup",
          "new_api": "colDataAppend",
          "old_text": "functionSetup(pCtx, pResInfo)",
          "new_text": "colDataAppend(pCol, currentRow, pItem->data, false)",
          "old_line_content": "  if (!functionSetup(pCtx, pResInfo)) {",
          "new_line_content": "    colDataAppend(pCol, currentRow, pItem->data, false);",
          "content_same": false
        },
        {
          "line": 5337,
          "old_api": "GET_RES_INFO",
          "new_api": "varDataTLen",
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": "varDataTLen(data)",
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "  int32_t      hashKeyBytes = IS_VAR_DATA_TYPE(pInfo->colType) ? varDataTLen(data) : pInfo->colBytes;",
          "content_same": false
        },
        {
          "line": 5338,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": "taosHashGet",
          "old_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "new_text": "taosHashGet(pInfo->pHash, data, hashKeyBytes)",
          "old_line_content": "  SUniqueInfo*         pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "new_line_content": "  SUniqueItem* pHashItem = taosHashGet(pInfo->pHash, data, hashKeyBytes);",
          "content_same": false
        },
        {
          "line": 5381,
          "old_api": "functionSetup",
          "new_api": "colDataAppend",
          "old_text": "functionSetup(pCtx, pResInfo)",
          "new_text": "colDataAppend(pOutput, i, pItem->data, false)",
          "old_line_content": "  if (!functionSetup(pCtx, pResInfo)) {",
          "new_line_content": "      colDataAppend(pOutput, i, pItem->data, false);",
          "content_same": false
        },
        {
          "line": 5399,
          "old_api": "taosHashGet",
          "new_api": "functionSetup",
          "old_text": "taosHashGet(pInfo->pHash, data, hashKeyBytes)",
          "new_text": "functionSetup(pCtx, pResInfo)",
          "old_line_content": "  SModeItem** pHashItem = taosHashGet(pInfo->pHash, data, hashKeyBytes);",
          "new_line_content": "  if (!functionSetup(pCtx, pResInfo)) {",
          "content_same": false
        },
        {
          "line": 5403,
          "old_api": "memcpy",
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": "memcpy(pItem->data, data, hashKeyBytes)",
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "    memcpy(pItem->data, data, hashKeyBytes);",
          "new_line_content": "  SModeInfo* pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 5463,
          "old_api": "colDataAppend",
          "new_api": "GET_RES_INFO",
          "old_text": "colDataAppend(pCol, currentRow, pResItem->data, false)",
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "    colDataAppend(pCol, currentRow, pResItem->data, false);",
          "new_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 5483,
          "old_api": "GET_RES_INFO",
          "new_api": "colDataAppendNULL",
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": "colDataAppendNULL(pCol, currentRow)",
          "old_line_content": "  STwaInfo* pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "new_line_content": "    colDataAppendNULL(pCol, currentRow);",
          "content_same": false
        },
        {
          "line": 5524,
          "old_api": "colDataIsNull_f",
          "new_api": "GET_RES_INFO",
          "old_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "      if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "new_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 5530,
          "old_api": "colDataGetData",
          "new_api": "IS_NULL_TYPE",
          "old_text": "colDataGetData(pInputCol, i)",
          "new_text": "IS_NULL_TYPE(pInputCol->info.type)",
          "old_line_content": "      GET_TYPED_DATA(last->val, double, pInputCol->info.type, colDataGetData(pInputCol, i));",
          "new_line_content": "  if (IS_NULL_TYPE(pInputCol->info.type)) {",
          "content_same": false
        },
        {
          "line": 5540,
          "old_api": "colDataIsNull_f",
          "new_api": "ASSERT",
          "old_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "new_text": "ASSERT(last->key == INT64_MIN)",
          "old_line_content": "      if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "new_line_content": "    ASSERT(last->key == INT64_MIN);",
          "content_same": false
        },
        {
          "line": 5777,
          "old_api": "GET_RES_INFO",
          "new_api": "SET_VAL",
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": "SET_VAL(pResInfo, 1, 1)",
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "  SET_VAL(pResInfo, 1, 1);",
          "content_same": false
        },
        {
          "line": 5865,
          "old_api": "tListLen",
          "new_api": "tEncoderInit",
          "old_text": "tListLen(pInfo->blockRowsHisto)",
          "new_text": "tEncoderInit(&encoder, buf, bufLen)",
          "old_line_content": "  for (int32_t i = 0; i < tListLen(pInfo->blockRowsHisto); ++i) {",
          "new_line_content": "  tEncoderInit(&encoder, buf, bufLen);",
          "content_same": false
        },
        {
          "line": 5872,
          "old_api": "tEncoderClear",
          "new_api": "tEncodeU32",
          "old_text": "tEncoderClear(&encoder)",
          "new_text": "tEncodeU32(&encoder, pInfo->numOfTables)",
          "old_line_content": "  tEncoderClear(&encoder);",
          "new_line_content": "  if (tEncodeU32(&encoder, pInfo->numOfTables) < 0) return -1;",
          "content_same": false
        },
        {
          "line": 5878,
          "old_api": "tDecoderInit",
          "new_api": "tEncodeI32",
          "old_text": "tDecoderInit(&decoder, buf, bufLen)",
          "new_text": "tEncodeI32(&encoder, pInfo->defMaxRows)",
          "old_line_content": "  tDecoderInit(&decoder, buf, bufLen);",
          "new_line_content": "  if (tEncodeI32(&encoder, pInfo->defMaxRows) < 0) return -1;",
          "content_same": false
        },
        {
          "line": 5880,
          "old_api": "tStartDecode",
          "new_api": "tEncodeU32",
          "old_text": "tStartDecode(&decoder)",
          "new_text": "tEncodeU32(&encoder, pInfo->numOfInmemRows)",
          "old_line_content": "  if (tStartDecode(&decoder) < 0) return -1;",
          "new_line_content": "  if (tEncodeU32(&encoder, pInfo->numOfInmemRows) < 0) return -1;",
          "content_same": false
        },
        {
          "line": 5881,
          "old_api": "tDecodeU32",
          "new_api": "tEncodeU32",
          "old_text": "tDecodeU32(&decoder, &pInfo->rowSize)",
          "new_text": "tEncodeU32(&encoder, pInfo->numOfSmallBlocks)",
          "old_line_content": "  if (tDecodeU32(&decoder, &pInfo->rowSize) < 0) return -1;",
          "new_line_content": "  if (tEncodeU32(&encoder, pInfo->numOfSmallBlocks) < 0) return -1;",
          "content_same": false
        },
        {
          "line": 5883,
          "old_api": "tDecodeU16",
          "new_api": "tListLen",
          "old_text": "tDecodeU16(&decoder, &pInfo->numOfFiles)",
          "new_text": "tListLen(pInfo->blockRowsHisto)",
          "old_line_content": "  if (tDecodeU16(&decoder, &pInfo->numOfFiles) < 0) return -1;",
          "new_line_content": "  for (int32_t i = 0; i < tListLen(pInfo->blockRowsHisto); ++i) {",
          "content_same": false
        },
        {
          "line": 5884,
          "old_api": "tDecodeU32",
          "new_api": "tEncodeI32",
          "old_text": "tDecodeU32(&decoder, &pInfo->numOfBlocks)",
          "new_text": "tEncodeI32(&encoder, pInfo->blockRowsHisto[i])",
          "old_line_content": "  if (tDecodeU32(&decoder, &pInfo->numOfBlocks) < 0) return -1;",
          "new_line_content": "    if (tEncodeI32(&encoder, pInfo->blockRowsHisto[i]) < 0) return -1;",
          "content_same": false
        },
        {
          "line": 5887,
          "old_api": "tDecodeU64",
          "new_api": "tEndEncode",
          "old_text": "tDecodeU64(&decoder, &pInfo->totalSize)",
          "new_text": "tEndEncode(&encoder)",
          "old_line_content": "  if (tDecodeU64(&decoder, &pInfo->totalSize) < 0) return -1;",
          "new_line_content": "  tEndEncode(&encoder);",
          "content_same": false
        },
        {
          "line": 5890,
          "old_api": "tDecodeI32",
          "new_api": "tEncoderClear",
          "old_text": "tDecodeI32(&decoder, &pInfo->minRows)",
          "new_text": "tEncoderClear(&encoder)",
          "old_line_content": "  if (tDecodeI32(&decoder, &pInfo->minRows) < 0) return -1;",
          "new_line_content": "  tEncoderClear(&encoder);",
          "content_same": false
        },
        {
          "line": 5896,
          "old_api": "tListLen",
          "new_api": "tDecoderInit",
          "old_text": "tListLen(pInfo->blockRowsHisto)",
          "new_text": "tDecoderInit(&decoder, buf, bufLen)",
          "old_line_content": "  for (int32_t i = 0; i < tListLen(pInfo->blockRowsHisto); ++i) {",
          "new_line_content": "  tDecoderInit(&decoder, buf, bufLen);",
          "content_same": false
        },
        {
          "line": 5905,
          "old_api": "GET_RES_INFO",
          "new_api": "tDecodeU64",
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": "tDecodeU64(&decoder, &pInfo->totalSize)",
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "  if (tDecodeU64(&decoder, &pInfo->totalSize) < 0) return -1;",
          "content_same": false
        },
        {
          "line": 5906,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": "tDecodeU64",
          "old_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "new_text": "tDecodeU64(&decoder, &pInfo->totalRows)",
          "old_line_content": "  STableBlockDistInfo* pData = GET_ROWCELL_INTERBUF(pResInfo);",
          "new_line_content": "  if (tDecodeU64(&decoder, &pInfo->totalRows) < 0) return -1;",
          "content_same": false
        },
        {
          "line": 5908,
          "old_api": "taosArrayGet",
          "new_api": "tDecodeI32",
          "old_text": "taosArrayGet(pBlock->pDataBlock, 0)",
          "new_text": "tDecodeI32(&decoder, &pInfo->minRows)",
          "old_line_content": "  SColumnInfoData* pColInfo = taosArrayGet(pBlock->pDataBlock, 0);",
          "new_line_content": "  if (tDecodeI32(&decoder, &pInfo->minRows) < 0) return -1;",
          "content_same": false
        },
        {
          "line": 5923,
          "old_api": "colDataAppend",
          "new_api": "GET_RES_INFO",
          "old_text": "colDataAppend(pColInfo, row++, st, false)",
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  colDataAppend(pColInfo, row++, st, false);",
          "new_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 5935,
          "old_api": "colDataAppend",
          "new_api": "sprintf",
          "old_text": "colDataAppend(pColInfo, row++, st, false)",
          "new_text": "sprintf(st + VARSTR_HEADER_SIZE,\n                        \"Total_Blocks=[%d] Total_Size=[%.2f Kb] Average_size=[%.2f Kb] Compression_Ratio=[%.2f %c]\",\n                        pData->numOfBlocks, pData->totalSize / 1024.0, ((double)pData->totalSize) / pData->numOfBlocks,\n                        pData->totalSize * 100 / totalRawSize, '%')",
          "old_line_content": "  colDataAppend(pColInfo, row++, st, false);",
          "new_line_content": "  int32_t len = sprintf(st + VARSTR_HEADER_SIZE,",
          "content_same": false
        },
        {
          "line": 5984,
          "old_api": "varDataSetLen",
          "new_api": "tListLen",
          "old_text": "varDataSetLen(st, len)",
          "new_text": "tListLen(pData->blockRowsHisto)",
          "old_line_content": "    varDataSetLen(st, len);",
          "new_line_content": "  for (int32_t i = 0; i < tListLen(pData->blockRowsHisto); ++i) {",
          "content_same": false
        },
        {
          "line": 5985,
          "old_api": "colDataAppend",
          "new_api": "sprintf",
          "old_text": "colDataAppend(pColInfo, row++, st, false)",
          "new_text": "sprintf(st + VARSTR_HEADER_SIZE, \"%04d |\", pData->defMinRows + bucketRange * i)",
          "old_line_content": "    colDataAppend(pColInfo, row++, st, false);",
          "new_line_content": "    len = sprintf(st + VARSTR_HEADER_SIZE, \"%04d |\", pData->defMinRows + bucketRange * i);",
          "content_same": false
        },
        {
          "line": 6237,
          "old_api": "colDataGetData",
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": "colDataGetData(pInputCol, startIndex)",
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "  char* data = colDataGetData(pInputCol, startIndex);",
          "new_line_content": "  SGroupKeyInfo*       pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 6256,
          "old_api": "GET_RES_INFO",
          "new_api": "IS_VAR_DATA_TYPE",
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": "IS_VAR_DATA_TYPE(pInputCol->info.type)",
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "  if (IS_VAR_DATA_TYPE(pInputCol->info.type)) {",
          "content_same": false
        },
        {
          "line": 6258,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": "varDataTLen",
          "old_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "new_text": "varDataTLen(data)",
          "old_line_content": "  SGroupKeyInfo* pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "new_line_content": "           (pInputCol->info.type == TSDB_DATA_TYPE_JSON) ? getJsonValueLen(data) : varDataTLen(data));",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 6147,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "    numOfElems++;",
          "new_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 6148,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "",
          "new_line_content": "  SRateInfo*           pRateInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 4111,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  SColumnInfoData*      pCol = pInput->pData[0];",
          "new_line_content": "  SET_VAL(GET_RES_INFO(pCtx), numOfElems, 1);",
          "content_same": false
        },
        {
          "line": 6161,
          "old_api": null,
          "new_api": "colDataIsNull_f",
          "old_text": null,
          "new_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "old_line_content": "        pRateInfo->firstValue = pRateInfo->lastValue;",
          "new_line_content": "    if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "content_same": false
        },
        {
          "line": 2067,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  }",
          "new_line_content": "  SStddevRes*           pStddevRes = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "content_same": false
        },
        {
          "line": 6167,
          "old_api": null,
          "new_api": "colDataGetData",
          "old_text": null,
          "new_text": "colDataGetData(pInputCol, i)",
          "old_line_content": "",
          "new_line_content": "    char*  data = colDataGetData(pInputCol, i);",
          "content_same": false
        },
        {
          "line": 2071,
          "old_api": null,
          "new_api": "IS_SIGNED_NUMERIC_TYPE",
          "old_text": null,
          "new_text": "IS_SIGNED_NUMERIC_TYPE(type)",
          "old_line_content": "",
          "new_line_content": "  if (IS_SIGNED_NUMERIC_TYPE(type)) {",
          "content_same": false
        },
        {
          "line": 4130,
          "old_api": null,
          "new_api": "ASSERT",
          "old_text": null,
          "new_text": "ASSERT(pCol->info.type == TSDB_DATA_TYPE_BINARY)",
          "old_line_content": "  double        result = (double)pInfo->max - (double)pInfo->min;",
          "new_line_content": "  ASSERT(pCol->info.type == TSDB_DATA_TYPE_BINARY);",
          "content_same": false
        },
        {
          "line": 2083,
          "old_api": null,
          "new_api": "isnan",
          "old_text": null,
          "new_text": "isnan(pStddevRes->result)",
          "old_line_content": "",
          "new_line_content": "  if (isinf(pStddevRes->result) || isnan(pStddevRes->result)) {",
          "content_same": false
        },
        {
          "line": 4132,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  pInfo->result = result / pInfo->timeUnit;",
          "new_line_content": "  SElapsedInfo* pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "content_same": false
        },
        {
          "line": 2087,
          "old_api": null,
          "new_api": "functionFinalize",
          "old_text": null,
          "new_text": "functionFinalize(pCtx, pBlock)",
          "old_line_content": "  return pResInfo->numOfRes;",
          "new_line_content": "  return functionFinalize(pCtx, pBlock);",
          "content_same": false
        },
        {
          "line": 2093,
          "old_api": null,
          "new_api": "getStddevInfoSize",
          "old_text": null,
          "new_text": "getStddevInfoSize()",
          "old_line_content": "",
          "new_line_content": "  int32_t              resultBytes = getStddevInfoSize();",
          "content_same": false
        },
        {
          "line": 2096,
          "old_api": null,
          "new_api": "varDataVal",
          "old_text": null,
          "new_text": "varDataVal(res)",
          "old_line_content": "  int16_t              type = pDBuf->type == TSDB_DATA_TYPE_NULL ? pSBuf->type : pDBuf->type;",
          "new_line_content": "  memcpy(varDataVal(res), pInfo, resultBytes);",
          "content_same": false
        },
        {
          "line": 2097,
          "old_api": null,
          "new_api": "varDataSetLen",
          "old_text": null,
          "new_text": "varDataSetLen(res, resultBytes)",
          "old_line_content": "",
          "new_line_content": "  varDataSetLen(res, resultBytes);",
          "content_same": false
        },
        {
          "line": 4147,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "",
          "new_line_content": "  SElapsedInfo* pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "content_same": false
        },
        {
          "line": 2100,
          "old_api": null,
          "new_api": "taosArrayGet",
          "old_text": null,
          "new_text": "taosArrayGet(pBlock->pDataBlock, slotId)",
          "old_line_content": "    pDBuf->quadraticISum += pSBuf->quadraticISum;",
          "new_line_content": "  SColumnInfoData* pCol = taosArrayGet(pBlock->pDataBlock, slotId);",
          "content_same": false
        },
        {
          "line": 6195,
          "old_api": null,
          "new_api": "SET_VAL",
          "old_text": null,
          "new_text": "SET_VAL(pResInfo, numOfElems, 1)",
          "old_line_content": "  int64_t duration = pRateInfo->lastKey - pRateInfo->firstKey;",
          "new_line_content": "  SET_VAL(pResInfo, numOfElems, 1);",
          "content_same": false
        },
        {
          "line": 2102,
          "old_api": null,
          "new_api": "colDataAppend",
          "old_text": null,
          "new_text": "colDataAppend(pCol, pBlock->info.rows, res, false)",
          "old_line_content": "    pDBuf->usum += pSBuf->usum;",
          "new_line_content": "  colDataAppend(pCol, pBlock->info.rows, res, false);",
          "content_same": false
        },
        {
          "line": 4151,
          "old_api": null,
          "new_api": "functionFinalize",
          "old_text": null,
          "new_text": "functionFinalize(pCtx, pBlock)",
          "old_line_content": "  return pResInfo->numOfRes;",
          "new_line_content": "  return functionFinalize(pCtx, pBlock);",
          "content_same": false
        },
        {
          "line": 2104,
          "old_api": null,
          "new_api": "taosMemoryFree",
          "old_text": null,
          "new_text": "taosMemoryFree(res)",
          "old_line_content": "  } else {",
          "new_line_content": "  taosMemoryFree(res);",
          "content_same": false
        },
        {
          "line": 4157,
          "old_api": null,
          "new_api": "getElapsedInfoSize",
          "old_text": null,
          "new_text": "getElapsedInfoSize()",
          "old_line_content": "",
          "new_line_content": "  int32_t              resultBytes = getElapsedInfoSize();",
          "content_same": false
        },
        {
          "line": 2110,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pDResInfo)",
          "old_line_content": "  pDResInfo->isNullRes &= pSResInfo->isNullRes;",
          "new_line_content": "  SStddevRes*          pDBuf = GET_ROWCELL_INTERBUF(pDResInfo);",
          "content_same": false
        },
        {
          "line": 2112,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pSourceCtx)",
          "old_line_content": "}",
          "new_line_content": "  SResultRowEntryInfo* pSResInfo = GET_RES_INFO(pSourceCtx);",
          "content_same": false
        },
        {
          "line": 2113,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pSResInfo)",
          "old_line_content": "",
          "new_line_content": "  SStddevRes*          pSBuf = GET_ROWCELL_INTERBUF(pSResInfo);",
          "content_same": false
        },
        {
          "line": 4160,
          "old_api": null,
          "new_api": "varDataVal",
          "old_text": null,
          "new_text": "varDataVal(res)",
          "old_line_content": "",
          "new_line_content": "  memcpy(varDataVal(res), pInfo, resultBytes);",
          "content_same": false
        },
        {
          "line": 2116,
          "old_api": null,
          "new_api": "IS_SIGNED_NUMERIC_TYPE",
          "old_text": null,
          "new_text": "IS_SIGNED_NUMERIC_TYPE(type)",
          "old_line_content": "  return true;",
          "new_line_content": "  if (IS_SIGNED_NUMERIC_TYPE(type)) {",
          "content_same": false
        },
        {
          "line": 4164,
          "old_api": null,
          "new_api": "taosArrayGet",
          "old_text": null,
          "new_text": "taosArrayGet(pBlock->pDataBlock, slotId)",
          "old_line_content": "  return TSDB_CODE_SUCCESS;",
          "new_line_content": "  SColumnInfoData* pCol = taosArrayGet(pBlock->pDataBlock, slotId);",
          "content_same": false
        },
        {
          "line": 4166,
          "old_api": null,
          "new_api": "colDataAppend",
          "old_text": null,
          "new_text": "colDataAppend(pCol, pBlock->info.rows, res, false)",
          "old_line_content": "",
          "new_line_content": "  colDataAppend(pCol, pBlock->info.rows, res, false);",
          "content_same": false
        },
        {
          "line": 2119,
          "old_api": null,
          "new_api": "IS_UNSIGNED_NUMERIC_TYPE",
          "old_text": null,
          "new_text": "IS_UNSIGNED_NUMERIC_TYPE(type)",
          "old_line_content": "bool leastSQRFunctionSetup(SqlFunctionCtx* pCtx, SResultRowEntryInfo* pResultInfo) {",
          "new_line_content": "  } else if (IS_UNSIGNED_NUMERIC_TYPE(type)) {",
          "content_same": false
        },
        {
          "line": 4168,
          "old_api": null,
          "new_api": "taosMemoryFree",
          "old_text": null,
          "new_text": "taosMemoryFree(res)",
          "old_line_content": "  return (int32_t)sizeof(SHistoFuncInfo) + HISTOGRAM_MAX_BINS_NUM * sizeof(SHistoFuncBin);",
          "new_line_content": "  taosMemoryFree(res);",
          "content_same": false
        },
        {
          "line": 4173,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pDestCtx)",
          "old_line_content": "  return true;",
          "new_line_content": "  SResultRowEntryInfo* pDResInfo = GET_RES_INFO(pDestCtx);",
          "content_same": false
        },
        {
          "line": 4174,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pDResInfo)",
          "old_line_content": "}",
          "new_line_content": "  SElapsedInfo*        pDBuf = GET_ROWCELL_INTERBUF(pDResInfo);",
          "content_same": false
        },
        {
          "line": 6223,
          "old_api": null,
          "new_api": "taosArrayGet",
          "old_text": null,
          "new_text": "taosArrayGet(pBlock->pDataBlock, slotId)",
          "old_line_content": "",
          "new_line_content": "  SColumnInfoData* pCol = taosArrayGet(pBlock->pDataBlock, slotId);",
          "content_same": false
        },
        {
          "line": 4176,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pSourceCtx)",
          "old_line_content": "static int8_t getHistogramBinType(char* binTypeStr) {",
          "new_line_content": "  SResultRowEntryInfo* pSResInfo = GET_RES_INFO(pSourceCtx);",
          "content_same": false
        },
        {
          "line": 4177,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pSResInfo)",
          "old_line_content": "  int8_t binType;",
          "new_line_content": "  SElapsedInfo*        pSBuf = GET_ROWCELL_INTERBUF(pSResInfo);",
          "content_same": false
        },
        {
          "line": 6225,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "",
          "new_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 4179,
          "old_api": null,
          "new_api": "elapsedTransferInfo",
          "old_text": null,
          "new_text": "elapsedTransferInfo(pSBuf, pDBuf)",
          "old_line_content": "    binType = USER_INPUT_BIN;",
          "new_line_content": "  elapsedTransferInfo(pSBuf, pDBuf);",
          "content_same": false
        },
        {
          "line": 6228,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "    goto _group_key_over;",
          "new_line_content": "  SRateInfo* pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 6229,
          "old_api": null,
          "new_api": "TSDB_TICK_PER_SECOND",
          "old_text": null,
          "new_text": "TSDB_TICK_PER_SECOND(pCtx->param[1].param.i)",
          "old_line_content": "  }",
          "new_line_content": "  double     result = doCalcRate(pInfo, (double)TSDB_TICK_PER_SECOND(pCtx->param[1].param.i));",
          "content_same": false
        },
        {
          "line": 6230,
          "old_api": null,
          "new_api": "colDataAppend",
          "old_text": null,
          "new_text": "colDataAppend(pCol, pBlock->info.rows, (const char*)&result, pResInfo->isNullRes)",
          "old_line_content": "",
          "new_line_content": "  colDataAppend(pCol, pBlock->info.rows, (const char*)&result, pResInfo->isNullRes);",
          "content_same": false
        },
        {
          "line": 2138,
          "old_api": null,
          "new_api": "functionSetup",
          "old_text": null,
          "new_text": "functionSetup(pCtx, pResultInfo)",
          "old_line_content": "",
          "new_line_content": "  if (!functionSetup(pCtx, pResultInfo)) {",
          "content_same": false
        },
        {
          "line": 6236,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "",
          "new_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 2142,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResultInfo)",
          "old_line_content": "  double x = pInfo->startVal;",
          "new_line_content": "  SLeastSQRInfo* pInfo = GET_ROWCELL_INTERBUF(pResultInfo);",
          "content_same": false
        },
        {
          "line": 2144,
          "old_api": null,
          "new_api": "IS_FLOAT_TYPE",
          "old_text": null,
          "new_text": "IS_FLOAT_TYPE(pCtx->param[1].param.nType)",
          "old_line_content": "  int32_t start = pInput->startRowIndex;",
          "new_line_content": "  pInfo->startVal = IS_FLOAT_TYPE(pCtx->param[1].param.nType) ? pCtx->param[1].param.d : (double)pCtx->param[1].param.i;",
          "content_same": false
        },
        {
          "line": 2145,
          "old_api": null,
          "new_api": "IS_FLOAT_TYPE",
          "old_text": null,
          "new_text": "IS_FLOAT_TYPE(pCtx->param[2].param.nType)",
          "old_line_content": "  int32_t numOfRows = pInput->numOfRows;",
          "new_line_content": "  pInfo->stepVal = IS_FLOAT_TYPE(pCtx->param[2].param.nType) ? pCtx->param[2].param.d : (double)pCtx->param[2].param.i;",
          "content_same": false
        },
        {
          "line": 4198,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(binTypeStr, \"linear_bin\")",
          "old_line_content": "    if (numOfParams != 4) {",
          "new_line_content": "  } else if (strcasecmp(binTypeStr, \"linear_bin\") == 0) {",
          "content_same": false
        },
        {
          "line": 4200,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(binTypeStr, \"log_bin\")",
          "old_line_content": "    }",
          "new_line_content": "  } else if (strcasecmp(binTypeStr, \"log_bin\") == 0) {",
          "content_same": false
        },
        {
          "line": 6249,
          "old_api": null,
          "new_api": "colDataIsNull_s",
          "old_text": null,
          "new_text": "colDataIsNull_s(pInputCol, startIndex)",
          "old_line_content": "  return TSDB_CODE_SUCCESS;",
          "new_line_content": "  if (colDataIsNull_s(pInputCol, startIndex)) {",
          "content_same": false
        },
        {
          "line": 6255,
          "old_api": null,
          "new_api": "colDataGetData",
          "old_text": null,
          "new_text": "colDataGetData(pInputCol, startIndex)",
          "old_line_content": "",
          "new_line_content": "  char* data = colDataGetData(pInputCol, startIndex);",
          "content_same": false
        },
        {
          "line": 6257,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(pInfo->data, data,\n           (pInputCol->info.type == TSDB_DATA_TYPE_JSON) ? getJsonValueLen(data) : varDataTLen(data))",
          "old_line_content": "",
          "new_line_content": "    memcpy(pInfo->data, data,",
          "content_same": false
        },
        {
          "line": 4210,
          "old_api": null,
          "new_api": "cJSON_Parse",
          "old_text": null,
          "new_text": "cJSON_Parse(binDescStr)",
          "old_line_content": "    }",
          "new_line_content": "  cJSON*  binDesc = cJSON_Parse(binDescStr);",
          "content_same": false
        },
        {
          "line": 6260,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(pInfo->data, data, pInputCol->info.bytes)",
          "old_line_content": "  if (pInfo->hasResult) {",
          "new_line_content": "    memcpy(pInfo->data, data, pInputCol->info.bytes);",
          "content_same": false
        },
        {
          "line": 4213,
          "old_api": null,
          "new_api": "cJSON_IsObject",
          "old_text": null,
          "new_text": "cJSON_IsObject(binDesc)",
          "old_line_content": "      return false;",
          "new_line_content": "  if (cJSON_IsObject(binDesc)) { /* linaer/log bins */",
          "content_same": false
        },
        {
          "line": 4214,
          "old_api": null,
          "new_api": "cJSON_GetArraySize",
          "old_text": null,
          "new_text": "cJSON_GetArraySize(binDesc)",
          "old_line_content": "    }",
          "new_line_content": "    int32_t numOfParams = cJSON_GetArraySize(binDesc);",
          "content_same": false
        },
        {
          "line": 2169,
          "old_api": null,
          "new_api": "colDataIsNull_f",
          "old_text": null,
          "new_text": "colDataIsNull_f(pCol->nullbitmap, i)",
          "old_line_content": "      break;",
          "new_line_content": "        if (pCol->hasNull && colDataIsNull_f(pCol->nullbitmap, i)) {",
          "content_same": false
        },
        {
          "line": 6266,
          "old_api": null,
          "new_api": "SET_VAL",
          "old_text": null,
          "new_text": "SET_VAL(pResInfo, 1, 1)",
          "old_line_content": "    pResInfo->numOfRes = 0;",
          "new_line_content": "  SET_VAL(pResInfo, 1, 1);",
          "content_same": false
        },
        {
          "line": 4220,
          "old_api": null,
          "new_api": "cJSON_GetObjectItem",
          "old_text": null,
          "new_text": "cJSON_GetObjectItem(binDesc, \"start\")",
          "old_line_content": "",
          "new_line_content": "    cJSON* start = cJSON_GetObjectItem(binDesc, \"start\");",
          "content_same": false
        },
        {
          "line": 4221,
          "old_api": null,
          "new_api": "cJSON_GetObjectItem",
          "old_text": null,
          "new_text": "cJSON_GetObjectItem(binDesc, \"factor\")",
          "old_line_content": "    int32_t counter = (int32_t)count->valueint;",
          "new_line_content": "    cJSON* factor = cJSON_GetObjectItem(binDesc, \"factor\");",
          "content_same": false
        },
        {
          "line": 2173,
          "old_api": null,
          "new_api": "LEASTSQR_CAL",
          "old_text": null,
          "new_text": "LEASTSQR_CAL(param, x, plist, i, pInfo->stepVal)",
          "old_line_content": "      int32_t* plist = (int32_t*)pCol->pData;",
          "new_line_content": "        LEASTSQR_CAL(param, x, plist, i, pInfo->stepVal);",
          "content_same": false
        },
        {
          "line": 4222,
          "old_api": null,
          "new_api": "cJSON_GetObjectItem",
          "old_text": null,
          "new_text": "cJSON_GetObjectItem(binDesc, \"width\")",
          "old_line_content": "    if (infinity->valueint == false) {",
          "new_line_content": "    cJSON* width = cJSON_GetObjectItem(binDesc, \"width\");",
          "content_same": false
        },
        {
          "line": 4224,
          "old_api": null,
          "new_api": "cJSON_GetObjectItem",
          "old_text": null,
          "new_text": "cJSON_GetObjectItem(binDesc, \"infinity\")",
          "old_line_content": "      numOfBins = counter + 1;",
          "new_line_content": "    cJSON* infinity = cJSON_GetObjectItem(binDesc, \"infinity\");",
          "content_same": false
        },
        {
          "line": 6272,
          "old_api": null,
          "new_api": "taosArrayGet",
          "old_text": null,
          "new_text": "taosArrayGet(pBlock->pDataBlock, slotId)",
          "old_line_content": "int32_t cachedLastRowFunction(SqlFunctionCtx* pCtx) {",
          "new_line_content": "  SColumnInfoData* pCol = taosArrayGet(pBlock->pDataBlock, slotId);",
          "content_same": false
        },
        {
          "line": 4226,
          "old_api": null,
          "new_api": "cJSON_IsBool",
          "old_text": null,
          "new_text": "cJSON_IsBool(infinity)",
          "old_line_content": "      startIndex = 1;",
          "new_line_content": "    if (!cJSON_IsNumber(start) || !cJSON_IsNumber(count) || !cJSON_IsBool(infinity)) {",
          "content_same": false
        },
        {
          "line": 6274,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "",
          "new_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 4223,
          "old_api": null,
          "new_api": "cJSON_GetObjectItem",
          "old_text": null,
          "new_text": "cJSON_GetObjectItem(binDesc, \"count\")",
          "old_line_content": "      startIndex = 0;",
          "new_line_content": "    cJSON* count = cJSON_GetObjectItem(binDesc, \"count\");",
          "content_same": false
        },
        {
          "line": 2185,
          "old_api": null,
          "new_api": "LEASTSQR_CAL",
          "old_text": null,
          "new_text": "LEASTSQR_CAL(param, x, plist, i, pInfo->stepVal)",
          "old_line_content": "    case TSDB_DATA_TYPE_BIGINT: {",
          "new_line_content": "        LEASTSQR_CAL(param, x, plist, i, pInfo->stepVal);",
          "content_same": false
        },
        {
          "line": 6281,
          "old_api": null,
          "new_api": "colDataAppend",
          "old_text": null,
          "new_text": "colDataAppend(pCol, currentRow, pInfo->data, pInfo->isNull ? true : false)",
          "old_line_content": "  int32_t bytes = pInputCol->info.bytes;",
          "new_line_content": "      colDataAppend(pCol, currentRow, pInfo->data, pInfo->isNull ? true : false);",
          "content_same": false
        },
        {
          "line": 4235,
          "old_api": null,
          "new_api": "isinf",
          "old_text": null,
          "new_text": "isinf(count->valuedouble)",
          "old_line_content": "        return false;",
          "new_line_content": "        (factor != NULL && isinf(factor->valuedouble)) || (count != NULL && isinf(count->valuedouble))) {",
          "content_same": false
        },
        {
          "line": 6293,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "    }",
          "new_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 2198,
          "old_api": null,
          "new_api": "LEASTSQR_CAL",
          "old_text": null,
          "new_text": "LEASTSQR_CAL(param, x, plist, i, pInfo->stepVal)",
          "old_line_content": "    case TSDB_DATA_TYPE_UTINYINT: {",
          "new_line_content": "        LEASTSQR_CAL(param, x, plist, i, pInfo->stepVal);",
          "content_same": false
        },
        {
          "line": 6294,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "  }",
          "new_line_content": "  SFirstLastRes*       pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 4249,
          "old_api": null,
          "new_api": "cJSON_IsNumber",
          "old_text": null,
          "new_text": "cJSON_IsNumber(width)",
          "old_line_content": "        return false;",
          "new_line_content": "    if (cJSON_IsNumber(width) && factor == NULL && binType == LINEAR_BIN) {",
          "content_same": false
        },
        {
          "line": 2206,
          "old_api": null,
          "new_api": "colDataIsNull_f",
          "old_text": null,
          "new_text": "colDataIsNull_f(pCol->nullbitmap, i)",
          "old_line_content": "      }",
          "new_line_content": "        if (pCol->hasNull && colDataIsNull_f(pCol->nullbitmap, i)) {",
          "content_same": false
        },
        {
          "line": 6306,
          "old_api": null,
          "new_api": "colDataGetData",
          "old_text": null,
          "new_text": "colDataGetData(pInputCol, i)",
          "old_line_content": "",
          "new_line_content": "    char* data = colDataGetData(pInputCol, i);",
          "content_same": false
        },
        {
          "line": 2211,
          "old_api": null,
          "new_api": "LEASTSQR_CAL",
          "old_text": null,
          "new_text": "LEASTSQR_CAL(param, x, plist, i, pInfo->stepVal)",
          "old_line_content": "      for (int32_t i = start; i < numOfRows + pInput->startRowIndex; ++i) {",
          "new_line_content": "        LEASTSQR_CAL(param, x, plist, i, pInfo->stepVal);",
          "content_same": false
        },
        {
          "line": 6307,
          "old_api": null,
          "new_api": "getRowPTs",
          "old_text": null,
          "new_text": "getRowPTs(pInput->pPTS, i)",
          "old_line_content": "",
          "new_line_content": "    TSKEY cts = getRowPTs(pInput->pPTS, i);",
          "content_same": false
        },
        {
          "line": 6309,
          "old_api": null,
          "new_api": "doSaveLastrow",
          "old_text": null,
          "new_text": "doSaveLastrow(pCtx, data, i, cts, pInfo)",
          "old_line_content": "",
          "new_line_content": "      doSaveLastrow(pCtx, data, i, cts, pInfo);",
          "content_same": false
        },
        {
          "line": 4263,
          "old_api": null,
          "new_api": "cJSON_IsNumber",
          "old_text": null,
          "new_text": "cJSON_IsNumber(factor)",
          "old_line_content": "    } else {",
          "new_line_content": "    } else if (cJSON_IsNumber(factor) && width == NULL && binType == LOG_BIN) {",
          "content_same": false
        },
        {
          "line": 4266,
          "old_api": null,
          "new_api": "taosMemoryFree",
          "old_text": null,
          "new_text": "taosMemoryFree(intervals)",
          "old_line_content": "    }",
          "new_line_content": "        taosMemoryFree(intervals);",
          "content_same": false
        },
        {
          "line": 2219,
          "old_api": null,
          "new_api": "colDataIsNull_f",
          "old_text": null,
          "new_text": "colDataIsNull_f(pCol->nullbitmap, i)",
          "old_line_content": "      break;",
          "new_line_content": "        if (pCol->hasNull && colDataIsNull_f(pCol->nullbitmap, i)) {",
          "content_same": false
        },
        {
          "line": 6314,
          "old_api": null,
          "new_api": "SET_VAL",
          "old_text": null,
          "new_text": "SET_VAL(pResInfo, numOfElems, 1)",
          "old_line_content": "",
          "new_line_content": "  SET_VAL(pResInfo, numOfElems, 1);",
          "content_same": false
        },
        {
          "line": 4270,
          "old_api": null,
          "new_api": "taosMemoryFree",
          "old_text": null,
          "new_text": "taosMemoryFree(intervals)",
          "old_line_content": "      intervals[numOfBins - 1] = INFINITY;",
          "new_line_content": "        taosMemoryFree(intervals);",
          "content_same": false
        },
        {
          "line": 2223,
          "old_api": null,
          "new_api": "LEASTSQR_CAL",
          "old_text": null,
          "new_text": "LEASTSQR_CAL(param, x, plist, i, pInfo->stepVal)",
          "old_line_content": "      uint32_t* plist = (uint32_t*)pCol->pData;",
          "new_line_content": "        LEASTSQR_CAL(param, x, plist, i, pInfo->stepVal);",
          "content_same": false
        },
        {
          "line": 4275,
          "old_api": null,
          "new_api": "isinf",
          "old_text": null,
          "new_text": "isinf(intervals[startIndex])",
          "old_line_content": "      }",
          "new_line_content": "        if (isinf(intervals[startIndex])) {",
          "content_same": false
        },
        {
          "line": 4276,
          "old_api": null,
          "new_api": "taosMemoryFree",
          "old_text": null,
          "new_text": "taosMemoryFree(intervals)",
          "old_line_content": "    }",
          "new_line_content": "          taosMemoryFree(intervals);",
          "content_same": false
        },
        {
          "line": 2235,
          "old_api": null,
          "new_api": "LEASTSQR_CAL",
          "old_text": null,
          "new_text": "LEASTSQR_CAL(param, x, plist, i, pInfo->stepVal)",
          "old_line_content": "    case TSDB_DATA_TYPE_UBIGINT: {",
          "new_line_content": "        LEASTSQR_CAL(param, x, plist, i, pInfo->stepVal);",
          "content_same": false
        },
        {
          "line": 4290,
          "old_api": null,
          "new_api": "ASSERT",
          "old_text": null,
          "new_text": "ASSERT(numOfBins >= 4)",
          "old_line_content": "      intervals[i] = bin->valuedouble;",
          "new_line_content": "      ASSERT(numOfBins >= 4);",
          "content_same": false
        },
        {
          "line": 4295,
          "old_api": null,
          "new_api": "cJSON_IsArray",
          "old_text": null,
          "new_text": "cJSON_IsArray(binDesc)",
          "old_line_content": "      if (i != 0 && intervals[i] <= intervals[i - 1]) {",
          "new_line_content": "  } else if (cJSON_IsArray(binDesc)) { /* user input bins */",
          "content_same": false
        },
        {
          "line": 2248,
          "old_api": null,
          "new_api": "LEASTSQR_CAL",
          "old_text": null,
          "new_text": "LEASTSQR_CAL(param, x, plist, i, pInfo->stepVal)",
          "old_line_content": "    case TSDB_DATA_TYPE_FLOAT: {",
          "new_line_content": "        LEASTSQR_CAL(param, x, plist, i, pInfo->stepVal);",
          "content_same": false
        },
        {
          "line": 4299,
          "old_api": null,
          "new_api": "cJSON_GetArraySize",
          "old_text": null,
          "new_text": "cJSON_GetArraySize(binDesc)",
          "old_line_content": "      bin = bin->next;",
          "new_line_content": "    numOfBins = cJSON_GetArraySize(binDesc);",
          "content_same": false
        },
        {
          "line": 4300,
          "old_api": null,
          "new_api": "taosMemoryCalloc",
          "old_text": null,
          "new_text": "taosMemoryCalloc(numOfBins, sizeof(double))",
          "old_line_content": "      i++;",
          "new_line_content": "    intervals = taosMemoryCalloc(numOfBins, sizeof(double));",
          "content_same": false
        },
        {
          "line": 4303,
          "old_api": null,
          "new_api": "taosMemoryFree",
          "old_text": null,
          "new_text": "taosMemoryFree(intervals)",
          "old_line_content": "    return false;",
          "new_line_content": "      taosMemoryFree(intervals);",
          "content_same": false
        },
        {
          "line": 2261,
          "old_api": null,
          "new_api": "LEASTSQR_CAL",
          "old_text": null,
          "new_text": "LEASTSQR_CAL(param, x, plist, i, pInfo->stepVal)",
          "old_line_content": "    case TSDB_DATA_TYPE_DOUBLE: {",
          "new_line_content": "        LEASTSQR_CAL(param, x, plist, i, pInfo->stepVal);",
          "content_same": false
        },
        {
          "line": 4309,
          "old_api": null,
          "new_api": "cJSON_IsNumber",
          "old_text": null,
          "new_text": "cJSON_IsNumber(bin)",
          "old_line_content": "    pInfo->bins[i].lower = intervals[i] < intervals[i + 1] ? intervals[i] : intervals[i + 1];",
          "new_line_content": "      if (!cJSON_IsNumber(bin)) {",
          "content_same": false
        },
        {
          "line": 4310,
          "old_api": null,
          "new_api": "taosMemoryFree",
          "old_text": null,
          "new_text": "taosMemoryFree(intervals)",
          "old_line_content": "    pInfo->bins[i].upper = intervals[i + 1] > intervals[i] ? intervals[i + 1] : intervals[i];",
          "new_line_content": "        taosMemoryFree(intervals);",
          "content_same": false
        },
        {
          "line": 2282,
          "old_api": null,
          "new_api": "colDataIsNull_f",
          "old_text": null,
          "new_text": "colDataIsNull_f(pCol->nullbitmap, i)",
          "old_line_content": "",
          "new_line_content": "        if (pCol->hasNull && colDataIsNull_f(pCol->nullbitmap, i)) {",
          "content_same": false
        },
        {
          "line": 2287,
          "old_api": null,
          "new_api": "LEASTSQR_CAL",
          "old_text": null,
          "new_text": "LEASTSQR_CAL(param, x, plist, i, pInfo->stepVal)",
          "old_line_content": "",
          "new_line_content": "        LEASTSQR_CAL(param, x, plist, i, pInfo->stepVal);",
          "content_same": false
        },
        {
          "line": 4341,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResultInfo)",
          "old_line_content": "  return true;",
          "new_line_content": "  SHistoFuncInfo* pInfo = GET_ROWCELL_INTERBUF(pResultInfo);",
          "content_same": false
        },
        {
          "line": 4346,
          "old_api": null,
          "new_api": "varDataVal",
          "old_text": null,
          "new_text": "varDataVal(pCtx->param[1].param.pz)",
          "old_line_content": "",
          "new_line_content": "  int8_t binType = getHistogramBinType(varDataVal(pCtx->param[1].param.pz));",
          "content_same": false
        },
        {
          "line": 4350,
          "old_api": null,
          "new_api": "varDataVal",
          "old_text": null,
          "new_text": "varDataVal(pCtx->param[2].param.pz)",
          "old_line_content": "  int32_t type = pInput->pData[0]->info.type;",
          "new_line_content": "  char*   binDesc = varDataVal(pCtx->param[2].param.pz);",
          "content_same": false
        },
        {
          "line": 2304,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  double(*param)[3] = pInfo->matrix;",
          "new_line_content": "  SET_VAL(GET_RES_INFO(pCtx), numOfElem, 1);",
          "content_same": false
        },
        {
          "line": 4355,
          "old_api": null,
          "new_api": "getHistogramBinDesc",
          "old_text": null,
          "new_text": "getHistogramBinDesc(pInfo, binDesc, binType, (bool)normalized)",
          "old_line_content": "  int32_t numOfElems = 0;",
          "new_line_content": "  if (!getHistogramBinDesc(pInfo, binDesc, binType, (bool)normalized)) {",
          "content_same": false
        },
        {
          "line": 2310,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  double param02 = param[0][2] - param[1][2] * (param[0][1] / param[1][1]);",
          "new_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 2311,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "",
          "new_line_content": "  SLeastSQRInfo*       pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "content_same": false
        },
        {
          "line": 2318,
          "old_api": null,
          "new_api": "colDataAppendNULL",
          "old_text": null,
          "new_text": "colDataAppendNULL(pCol, currentRow)",
          "old_line_content": "  double param12 = param[1][2] - param02 * (param[1][0] / param00);",
          "new_line_content": "    colDataAppendNULL(pCol, currentRow);",
          "content_same": false
        },
        {
          "line": 4375,
          "old_api": null,
          "new_api": "colDataIsNull_f",
          "old_text": null,
          "new_text": "colDataIsNull_f(pCol->nullbitmap, i)",
          "old_line_content": "",
          "new_line_content": "    if (pCol->hasNull && colDataIsNull_f(pCol->nullbitmap, i)) {",
          "content_same": false
        },
        {
          "line": 2331,
          "old_api": null,
          "new_api": "colDataAppendNULL",
          "old_text": null,
          "new_text": "colDataAppendNULL(pCol, currentRow)",
          "old_line_content": "  return pResInfo->numOfRes;",
          "new_line_content": "    colDataAppendNULL(pCol, currentRow);",
          "content_same": false
        },
        {
          "line": 4381,
          "old_api": null,
          "new_api": "colDataGetData",
          "old_text": null,
          "new_text": "colDataGetData(pCol, i)",
          "old_line_content": "  return TSDB_CODE_SUCCESS;",
          "new_line_content": "    char*  data = colDataGetData(pCol, i);",
          "content_same": false
        },
        {
          "line": 2344,
          "old_api": null,
          "new_api": "varDataVal",
          "old_text": null,
          "new_text": "varDataVal(buf)",
          "old_line_content": "",
          "new_line_content": "      snprintf(varDataVal(buf), sizeof(buf) - VARSTR_HEADER_SIZE, \"{slop:%.6lf, intercept:%.6lf}\", param02, param12);",
          "content_same": false
        },
        {
          "line": 2347,
          "old_api": null,
          "new_api": "colDataAppend",
          "old_text": null,
          "new_text": "colDataAppend(pCol, currentRow, buf, pResInfo->isNullRes)",
          "old_line_content": "  double(*pSparam)[3] = pSBuf->matrix;",
          "new_line_content": "  colDataAppend(pCol, currentRow, buf, pResInfo->isNullRes);",
          "content_same": false
        },
        {
          "line": 4395,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "    pOutput->bins[k].count += pInput->bins[k].count;",
          "new_line_content": "    GET_RES_INFO(pCtx)->numOfRes = pInfo->numOfBins;",
          "content_same": false
        },
        {
          "line": 4397,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "}",
          "new_line_content": "    GET_RES_INFO(pCtx)->numOfRes = 1;",
          "content_same": false
        },
        {
          "line": 2358,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pDestCtx)",
          "old_line_content": "  return TSDB_CODE_SUCCESS;",
          "new_line_content": "  SResultRowEntryInfo* pDResInfo = GET_RES_INFO(pDestCtx);",
          "content_same": false
        },
        {
          "line": 2359,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pDResInfo)",
          "old_line_content": "}",
          "new_line_content": "  SLeastSQRInfo*       pDBuf = GET_ROWCELL_INTERBUF(pDResInfo);",
          "content_same": false
        },
        {
          "line": 2363,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pSourceCtx)",
          "old_line_content": "  return true;",
          "new_line_content": "  SResultRowEntryInfo* pSResInfo = GET_RES_INFO(pSourceCtx);",
          "content_same": false
        },
        {
          "line": 2364,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pSResInfo)",
          "old_line_content": "}",
          "new_line_content": "  SLeastSQRInfo*       pSBuf = GET_ROWCELL_INTERBUF(pSResInfo);",
          "content_same": false
        },
        {
          "line": 4427,
          "old_api": null,
          "new_api": "colDataGetData",
          "old_text": null,
          "new_text": "colDataGetData(pCol, i)",
          "old_line_content": "    for (int32_t k = 0; k < pResInfo->numOfRes; ++k) {",
          "new_line_content": "    char*           data = colDataGetData(pCol, i);",
          "content_same": false
        },
        {
          "line": 4428,
          "old_api": null,
          "new_api": "varDataVal",
          "old_text": null,
          "new_text": "varDataVal(data)",
          "old_line_content": "      if (pInfo->totalCount != 0) {",
          "new_line_content": "    SHistoFuncInfo* pInputInfo = (SHistoFuncInfo*)varDataVal(data);",
          "content_same": false
        },
        {
          "line": 4429,
          "old_api": null,
          "new_api": "histogramTransferInfo",
          "old_text": null,
          "new_text": "histogramTransferInfo(pInputInfo, pInfo)",
          "old_line_content": "        pInfo->bins[k].percentage = pInfo->bins[k].count / (double)pInfo->totalCount;",
          "new_line_content": "    histogramTransferInfo(pInputInfo, pInfo);",
          "content_same": false
        },
        {
          "line": 4432,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "      }",
          "new_line_content": "  SET_VAL(GET_RES_INFO(pCtx), pInfo->numOfBins, pInfo->numOfBins);",
          "content_same": false
        },
        {
          "line": 2385,
          "old_api": null,
          "new_api": "functionSetup",
          "old_text": null,
          "new_text": "functionSetup(pCtx, pResultInfo)",
          "old_line_content": "  SColumnDataAgg*       pAgg = pInput->pColumnDataAgg[0];",
          "new_line_content": "  if (!functionSetup(pCtx, pResultInfo)) {",
          "content_same": false
        },
        {
          "line": 4437,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "    int32_t len;",
          "new_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 4438,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "    char    buf[512] = {0};",
          "new_line_content": "  SHistoFuncInfo*      pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "content_same": false
        },
        {
          "line": 2391,
          "old_api": null,
          "new_api": "SET_DOUBLE_VAL",
          "old_text": null,
          "new_text": "SET_DOUBLE_VAL(&pInfo->minval, DBL_MAX)",
          "old_line_content": "  if (pCtx->scanFlag == REPEAT_SCAN && pInfo->stage == 0) {",
          "new_line_content": "  SET_DOUBLE_VAL(&pInfo->minval, DBL_MAX);",
          "content_same": false
        },
        {
          "line": 2392,
          "old_api": null,
          "new_api": "SET_DOUBLE_VAL",
          "old_text": null,
          "new_text": "SET_DOUBLE_VAL(&pInfo->maxval, -DBL_MAX)",
          "old_line_content": "    pInfo->stage += 1;",
          "new_line_content": "  SET_DOUBLE_VAL(&pInfo->maxval, -DBL_MAX);",
          "content_same": false
        },
        {
          "line": 2400,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "    }",
          "new_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 2417,
          "old_api": null,
          "new_api": "tMemBucketCreate",
          "old_text": null,
          "new_text": "tMemBucketCreate(pCol->info.bytes, type, pInfo->minval, pInfo->maxval)",
          "old_line_content": "",
          "new_line_content": "      pInfo->pMemBucket = tMemBucketCreate(pCol->info.bytes, type, pInfo->minval, pInfo->maxval);",
          "content_same": false
        },
        {
          "line": 4465,
          "old_api": null,
          "new_api": "colDataAppend",
          "old_text": null,
          "new_text": "colDataAppend(pCol, currentRow, buf, false)",
          "old_line_content": "",
          "new_line_content": "    colDataAppend(pCol, currentRow, buf, false);",
          "content_same": false
        },
        {
          "line": 2425,
          "old_api": null,
          "new_api": "IS_SIGNED_NUMERIC_TYPE",
          "old_text": null,
          "new_text": "IS_SIGNED_NUMERIC_TYPE(type)",
          "old_line_content": "",
          "new_line_content": "      if (IS_SIGNED_NUMERIC_TYPE(type)) {",
          "content_same": false
        },
        {
          "line": 2426,
          "old_api": null,
          "new_api": "GET_INT64_VAL",
          "old_text": null,
          "new_text": "GET_INT64_VAL(&pAgg->min)",
          "old_line_content": "      pInfo->numOfElems += (pInput->numOfRows - pAgg->numOfNull);",
          "new_line_content": "        tmin = (double)GET_INT64_VAL(&pAgg->min);",
          "content_same": false
        },
        {
          "line": 2427,
          "old_api": null,
          "new_api": "GET_INT64_VAL",
          "old_text": null,
          "new_text": "GET_INT64_VAL(&pAgg->max)",
          "old_line_content": "    } else {",
          "new_line_content": "        tmax = (double)GET_INT64_VAL(&pAgg->max);",
          "content_same": false
        },
        {
          "line": 2428,
          "old_api": null,
          "new_api": "IS_FLOAT_TYPE",
          "old_text": null,
          "new_text": "IS_FLOAT_TYPE(type)",
          "old_line_content": "      // check the valid data one by one",
          "new_line_content": "      } else if (IS_FLOAT_TYPE(type)) {",
          "content_same": false
        },
        {
          "line": 2429,
          "old_api": null,
          "new_api": "GET_DOUBLE_VAL",
          "old_text": null,
          "new_text": "GET_DOUBLE_VAL(&pAgg->min)",
          "old_line_content": "      int32_t start = pInput->startRowIndex;",
          "new_line_content": "        tmin = GET_DOUBLE_VAL(&pAgg->min);",
          "content_same": false
        },
        {
          "line": 2430,
          "old_api": null,
          "new_api": "GET_DOUBLE_VAL",
          "old_text": null,
          "new_text": "GET_DOUBLE_VAL(&pAgg->max)",
          "old_line_content": "      for (int32_t i = start; i < pInput->numOfRows + start; ++i) {",
          "new_line_content": "        tmax = GET_DOUBLE_VAL(&pAgg->max);",
          "content_same": false
        },
        {
          "line": 4478,
          "old_api": null,
          "new_api": "varDataVal",
          "old_text": null,
          "new_text": "varDataVal(res)",
          "old_line_content": "",
          "new_line_content": "  memcpy(varDataVal(res), pInfo, resultBytes);",
          "content_same": false
        },
        {
          "line": 2432,
          "old_api": null,
          "new_api": "GET_UINT64_VAL",
          "old_text": null,
          "new_text": "GET_UINT64_VAL(&pAgg->min)",
          "old_line_content": "          continue;",
          "new_line_content": "        tmin = (double)GET_UINT64_VAL(&pAgg->min);",
          "content_same": false
        },
        {
          "line": 2433,
          "old_api": null,
          "new_api": "GET_UINT64_VAL",
          "old_text": null,
          "new_text": "GET_UINT64_VAL(&pAgg->max)",
          "old_line_content": "        }",
          "new_line_content": "        tmax = (double)GET_UINT64_VAL(&pAgg->max);",
          "content_same": false
        },
        {
          "line": 4482,
          "old_api": null,
          "new_api": "taosArrayGet",
          "old_text": null,
          "new_text": "taosArrayGet(pBlock->pDataBlock, slotId)",
          "old_line_content": "  return TSDB_CODE_SUCCESS;",
          "new_line_content": "  SColumnInfoData* pCol = taosArrayGet(pBlock->pDataBlock, slotId);",
          "content_same": false
        },
        {
          "line": 4475,
          "old_api": null,
          "new_api": "getHistogramInfoSize",
          "old_text": null,
          "new_text": "getHistogramInfoSize()",
          "old_line_content": "",
          "new_line_content": "  int32_t              resultBytes = getHistogramInfoSize();",
          "content_same": false
        },
        {
          "line": 2436,
          "old_api": null,
          "new_api": "GET_DOUBLE_VAL",
          "old_text": null,
          "new_text": "GET_DOUBLE_VAL(&pInfo->minval)",
          "old_line_content": "",
          "new_line_content": "      if (GET_DOUBLE_VAL(&pInfo->minval) > tmin) {",
          "content_same": false
        },
        {
          "line": 2437,
          "old_api": null,
          "new_api": "SET_DOUBLE_VAL",
          "old_text": null,
          "new_text": "SET_DOUBLE_VAL(&pInfo->minval, tmin)",
          "old_line_content": "        double v = 0;",
          "new_line_content": "        SET_DOUBLE_VAL(&pInfo->minval, tmin);",
          "content_same": false
        },
        {
          "line": 4484,
          "old_api": null,
          "new_api": "colDataAppend",
          "old_text": null,
          "new_text": "colDataAppend(pCol, pBlock->info.rows, res, false)",
          "old_line_content": "",
          "new_line_content": "  colDataAppend(pCol, pBlock->info.rows, res, false);",
          "content_same": false
        },
        {
          "line": 4486,
          "old_api": null,
          "new_api": "taosMemoryFree",
          "old_text": null,
          "new_text": "taosMemoryFree(res)",
          "old_line_content": "",
          "new_line_content": "  taosMemoryFree(res);",
          "content_same": false
        },
        {
          "line": 2441,
          "old_api": null,
          "new_api": "SET_DOUBLE_VAL",
          "old_text": null,
          "new_text": "SET_DOUBLE_VAL(&pInfo->maxval, tmax)",
          "old_line_content": "        }",
          "new_line_content": "        SET_DOUBLE_VAL(&pInfo->maxval, tmax);",
          "content_same": false
        },
        {
          "line": 4491,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pDestCtx)",
          "old_line_content": "",
          "new_line_content": "  SResultRowEntryInfo* pDResInfo = GET_RES_INFO(pDestCtx);",
          "content_same": false
        },
        {
          "line": 4492,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pDResInfo)",
          "old_line_content": "static uint8_t hllCountNum(void* data, int32_t bytes, int32_t* buk) {",
          "new_line_content": "  SHistoFuncInfo*      pDBuf = GET_ROWCELL_INTERBUF(pDResInfo);",
          "content_same": false
        },
        {
          "line": 4494,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pSourceCtx)",
          "old_line_content": "  int32_t  index = hash & HLL_BUCKET_MASK;",
          "new_line_content": "  SResultRowEntryInfo* pSResInfo = GET_RES_INFO(pSourceCtx);",
          "content_same": false
        },
        {
          "line": 4495,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pSResInfo)",
          "old_line_content": "  hash >>= HLL_BUCKET_BITS;",
          "new_line_content": "  SHistoFuncInfo*      pSBuf = GET_ROWCELL_INTERBUF(pSResInfo);",
          "content_same": false
        },
        {
          "line": 2449,
          "old_api": null,
          "new_api": "colDataIsNull_f",
          "old_text": null,
          "new_text": "colDataIsNull_f(pCol->nullbitmap, i)",
          "old_line_content": "    }",
          "new_line_content": "        if (colDataIsNull_f(pCol->nullbitmap, i)) {",
          "content_same": false
        },
        {
          "line": 4497,
          "old_api": null,
          "new_api": "histogramTransferInfo",
          "old_text": null,
          "new_text": "histogramTransferInfo(pSBuf, pDBuf)",
          "old_line_content": "  uint64_t bit = 1;",
          "new_line_content": "  histogramTransferInfo(pSBuf, pDBuf);",
          "content_same": false
        },
        {
          "line": 4498,
          "old_api": null,
          "new_api": "TMAX",
          "old_text": null,
          "new_text": "TMAX(pDResInfo->numOfRes, pSResInfo->numOfRes)",
          "old_line_content": "  uint8_t  count = 1;",
          "new_line_content": "  pDResInfo->numOfRes = TMAX(pDResInfo->numOfRes, pSResInfo->numOfRes);",
          "content_same": false
        },
        {
          "line": 2453,
          "old_api": null,
          "new_api": "colDataGetData",
          "old_text": null,
          "new_text": "colDataGetData(pCol, i)",
          "old_line_content": "    for (int32_t i = start; i < pInput->numOfRows + start; ++i) {",
          "new_line_content": "        char* data = colDataGetData(pCol, i);",
          "content_same": false
        },
        {
          "line": 2457,
          "old_api": null,
          "new_api": "GET_DOUBLE_VAL",
          "old_text": null,
          "new_text": "GET_DOUBLE_VAL(&pInfo->minval)",
          "old_line_content": "",
          "new_line_content": "        if (v < GET_DOUBLE_VAL(&pInfo->minval)) {",
          "content_same": false
        },
        {
          "line": 2461,
          "old_api": null,
          "new_api": "GET_DOUBLE_VAL",
          "old_text": null,
          "new_text": "GET_DOUBLE_VAL(&pInfo->maxval)",
          "old_line_content": "    }",
          "new_line_content": "        if (v > GET_DOUBLE_VAL(&pInfo->maxval)) {",
          "content_same": false
        },
        {
          "line": 2462,
          "old_api": null,
          "new_api": "SET_DOUBLE_VAL",
          "old_text": null,
          "new_text": "SET_DOUBLE_VAL(&pInfo->maxval, v)",
          "old_line_content": "",
          "new_line_content": "          SET_DOUBLE_VAL(&pInfo->maxval, v);",
          "content_same": false
        },
        {
          "line": 4511,
          "old_api": null,
          "new_api": "MurmurHash3_64",
          "old_text": null,
          "new_text": "MurmurHash3_64(data, bytes)",
          "old_line_content": "  for (int32_t j = 0; j < HLL_BUCKETS >> 3; j++) {",
          "new_line_content": "  uint64_t hash = MurmurHash3_64(data, bytes);",
          "content_same": false
        },
        {
          "line": 2476,
          "old_api": null,
          "new_api": "colDataGetData",
          "old_text": null,
          "new_text": "colDataGetData(pCol, i)",
          "old_line_content": "",
          "new_line_content": "      char* data = colDataGetData(pCol, i);",
          "content_same": false
        },
        {
          "line": 2478,
          "old_api": null,
          "new_api": "tMemBucketPut",
          "old_text": null,
          "new_text": "tMemBucketPut(pInfo->pMemBucket, data, 1)",
          "old_line_content": "  if (pMemBucket != NULL && pMemBucket->total > 0) {  // check for null",
          "new_line_content": "      tMemBucketPut(pInfo->pMemBucket, data, 1);",
          "content_same": false
        },
        {
          "line": 2481,
          "old_api": null,
          "new_api": "SET_VAL",
          "old_text": null,
          "new_text": "SET_VAL(pResInfo, numOfElems, 1)",
          "old_line_content": "",
          "new_line_content": "    SET_VAL(pResInfo, numOfElems, 1);",
          "content_same": false
        },
        {
          "line": 2492,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "}",
          "new_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 2493,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "",
          "new_line_content": "  SPercentileInfo*     ppInfo = (SPercentileInfo*)GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 2500,
          "old_api": null,
          "new_api": "tMemBucketDestroy",
          "old_text": null,
          "new_text": "tMemBucketDestroy(pMemBucket)",
          "old_line_content": "",
          "new_line_content": "  tMemBucketDestroy(pMemBucket);",
          "content_same": false
        },
        {
          "line": 2501,
          "old_api": null,
          "new_api": "functionFinalize",
          "old_text": null,
          "new_text": "functionFinalize(pCtx, pBlock)",
          "old_line_content": "static int8_t getApercentileAlgo(char* algoStr) {",
          "new_line_content": "  return functionFinalize(pCtx, pBlock);",
          "content_same": false
        },
        {
          "line": 4552,
          "old_api": null,
          "new_api": "sqrt",
          "old_text": null,
          "new_text": "sqrt(x)",
          "old_line_content": "  } while (zPrime != z);",
          "new_line_content": "    x = sqrt(x);",
          "content_same": false
        },
        {
          "line": 2507,
          "old_api": null,
          "new_api": "TDIGEST_SIZE",
          "old_text": null,
          "new_text": "TDIGEST_SIZE(COMPRESSION)",
          "old_line_content": "  } else {",
          "new_line_content": "  int32_t bytesDigest = (int32_t)(sizeof(SAPercentileInfo) + TDIGEST_SIZE(COMPRESSION));",
          "content_same": false
        },
        {
          "line": 2508,
          "old_api": null,
          "new_api": "TMAX",
          "old_text": null,
          "new_text": "TMAX(bytesHist, bytesDigest)",
          "old_line_content": "    algoType = APERCT_ALGO_UNKNOWN;",
          "new_line_content": "  pEnv->calcMemSize = TMAX(bytesHist, bytesDigest);",
          "content_same": false
        },
        {
          "line": 4555,
          "old_api": null,
          "new_api": "pow",
          "old_text": null,
          "new_text": "pow(1 - x, 2)",
          "old_line_content": "",
          "new_line_content": "    z -= pow(1 - x, 2) * y;",
          "content_same": false
        },
        {
          "line": 2515,
          "old_api": null,
          "new_api": "TDIGEST_SIZE",
          "old_text": null,
          "new_text": "TDIGEST_SIZE(COMPRESSION)",
          "old_line_content": "  pInfo->pHisto = (SHistogramInfo*)((char*)pInfo + sizeof(SAPercentileInfo));",
          "new_line_content": "  int32_t bytesDigest = (int32_t)(sizeof(SAPercentileInfo) + TDIGEST_SIZE(COMPRESSION));",
          "content_same": false
        },
        {
          "line": 2516,
          "old_api": null,
          "new_api": "TMAX",
          "old_text": null,
          "new_text": "TMAX(bytesHist, bytesDigest)",
          "old_line_content": "  pInfo->pHisto->elems = (SHistBin*)((char*)pInfo->pHisto + sizeof(SHistogramInfo));",
          "new_line_content": "  return TMAX(bytesHist, bytesDigest);",
          "content_same": false
        },
        {
          "line": 2521,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(algoStr, \"default\")",
          "old_line_content": "}",
          "new_line_content": "  if (strcasecmp(algoStr, \"default\") == 0) {",
          "content_same": false
        },
        {
          "line": 2523,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(algoStr, \"t-digest\")",
          "old_line_content": "bool apercentileFunctionSetup(SqlFunctionCtx* pCtx, SResultRowEntryInfo* pResultInfo) {",
          "new_line_content": "  } else if (strcasecmp(algoStr, \"t-digest\") == 0) {",
          "content_same": false
        },
        {
          "line": 4579,
          "old_api": null,
          "new_api": "hllBucketHisto",
          "old_text": null,
          "new_text": "hllBucketHisto(buckets, buckethisto)",
          "old_line_content": "  SColumnInfoData*      pCol = pInput->pData[0];",
          "new_line_content": "  hllBucketHisto(buckets, buckethisto);",
          "content_same": false
        },
        {
          "line": 4581,
          "old_api": null,
          "new_api": "hllTau",
          "old_text": null,
          "new_text": "hllTau((m - buckethisto[HLL_DATA_BITS + 1]) / (double)m)",
          "old_line_content": "  int32_t type = pCol->info.type;",
          "new_line_content": "  double z = m * hllTau((m - buckethisto[HLL_DATA_BITS + 1]) / (double)m);",
          "content_same": false
        },
        {
          "line": 4587,
          "old_api": null,
          "new_api": "hllSigma",
          "old_text": null,
          "new_text": "hllSigma(buckethisto[0] / (double)m)",
          "old_line_content": "  int32_t numOfElems = 0;",
          "new_line_content": "  z += m * hllSigma(buckethisto[0] / (double)m);",
          "content_same": false
        },
        {
          "line": 4588,
          "old_api": null,
          "new_api": "llroundl",
          "old_text": null,
          "new_text": "llroundl(HLL_ALPHA_INF * m * m / z)",
          "old_line_content": "  for (int32_t i = start; i < numOfRows + start; ++i) {",
          "new_line_content": "  double E = (double)llroundl(HLL_ALPHA_INF * m * m / z);",
          "content_same": false
        },
        {
          "line": 2542,
          "old_api": null,
          "new_api": "functionSetup",
          "old_text": null,
          "new_text": "functionSetup(pCtx, pResultInfo)",
          "old_line_content": "",
          "new_line_content": "  if (!functionSetup(pCtx, pResultInfo)) {",
          "content_same": false
        },
        {
          "line": 2546,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResultInfo)",
          "old_line_content": "  } else {",
          "new_line_content": "  SAPercentileInfo* pInfo = GET_ROWCELL_INTERBUF(pResultInfo);",
          "content_same": false
        },
        {
          "line": 4594,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "",
          "new_line_content": "  SHLLInfo* pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "content_same": false
        },
        {
          "line": 2550,
          "old_api": null,
          "new_api": "IS_UNSIGNED_NUMERIC_TYPE",
          "old_text": null,
          "new_text": "IS_UNSIGNED_NUMERIC_TYPE(pVal->nType)",
          "old_line_content": "           pInfo->pHisto->numOfElems, pInfo->pHisto->numOfEntries, pInfo->pHisto, pInfo->pHisto->elems);",
          "new_line_content": "      (IS_SIGNED_NUMERIC_TYPE(pVal->nType) ? pVal->i : (IS_UNSIGNED_NUMERIC_TYPE(pVal->nType) ? pVal->u : pVal->d));",
          "content_same": false
        },
        {
          "line": 2555,
          "old_api": null,
          "new_api": "varDataVal",
          "old_text": null,
          "new_text": "varDataVal(pCtx->param[2].param.pz)",
          "old_line_content": "",
          "new_line_content": "    pInfo->algo = getApercentileAlgo(varDataVal(pCtx->param[2].param.pz));",
          "content_same": false
        },
        {
          "line": 4607,
          "old_api": null,
          "new_api": "colDataIsNull_s",
          "old_text": null,
          "new_text": "colDataIsNull_s(pCol, i)",
          "old_line_content": "  }",
          "new_line_content": "    if (pCol->hasNull && colDataIsNull_s(pCol, i)) {",
          "content_same": false
        },
        {
          "line": 2563,
          "old_api": null,
          "new_api": "tdigestNewFrom",
          "old_text": null,
          "new_text": "tdigestNewFrom(tmp, COMPRESSION)",
          "old_line_content": "",
          "new_line_content": "    pInfo->pTDigest = tdigestNewFrom(tmp, COMPRESSION);",
          "content_same": false
        },
        {
          "line": 2565,
          "old_api": null,
          "new_api": "buildHistogramInfo",
          "old_text": null,
          "new_text": "buildHistogramInfo(pInfo)",
          "old_line_content": "",
          "new_line_content": "    buildHistogramInfo(pInfo);",
          "content_same": false
        },
        {
          "line": 2566,
          "old_api": null,
          "new_api": "tHistogramCreateFrom",
          "old_text": null,
          "new_text": "tHistogramCreateFrom(tmp, MAX_HISTOGRAM_BIN)",
          "old_line_content": "  int32_t start = pInput->startRowIndex;",
          "new_line_content": "    pInfo->pHisto = tHistogramCreateFrom(tmp, MAX_HISTOGRAM_BIN);",
          "content_same": false
        },
        {
          "line": 2567,
          "old_api": null,
          "new_api": "qDebug",
          "old_text": null,
          "new_text": "qDebug(\"%s set up histogram, numOfElems:%\" PRId64 \", numOfEntry:%d, pHisto:%p, elems:%p\", __FUNCTION__,\n           pInfo->pHisto->numOfElems, pInfo->pHisto->numOfEntries, pInfo->pHisto, pInfo->pHisto->elems)",
          "old_line_content": "  if (pInfo->algo == APERCT_ALGO_TDIGEST) {",
          "new_line_content": "    qDebug(\"%s set up histogram, numOfElems:%\" PRId64 \", numOfEntry:%d, pHisto:%p, elems:%p\", __FUNCTION__,",
          "content_same": false
        },
        {
          "line": 4613,
          "old_api": null,
          "new_api": "colDataGetData",
          "old_text": null,
          "new_text": "colDataGetData(pCol, i)",
          "old_line_content": "  } else {",
          "new_line_content": "    char* data = colDataGetData(pCol, i);",
          "content_same": false
        },
        {
          "line": 4615,
          "old_api": null,
          "new_api": "varDataLen",
          "old_text": null,
          "new_text": "varDataLen(data)",
          "old_line_content": "  }",
          "new_line_content": "      bytes = varDataLen(data);",
          "content_same": false
        },
        {
          "line": 4616,
          "old_api": null,
          "new_api": "varDataVal",
          "old_text": null,
          "new_text": "varDataVal(data)",
          "old_line_content": "",
          "new_line_content": "      data = varDataVal(data);",
          "content_same": false
        },
        {
          "line": 4620,
          "old_api": null,
          "new_api": "hllCountNum",
          "old_text": null,
          "new_text": "hllCountNum(data, bytes, &index)",
          "old_line_content": "static void hllTransferInfo(SHLLInfo* pInput, SHLLInfo* pOutput) {",
          "new_line_content": "    uint8_t count = hllCountNum(data, bytes, &index);",
          "content_same": false
        },
        {
          "line": 2576,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "",
          "new_line_content": "  SResultRowEntryInfo*  pResInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 2582,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "  } else {",
          "new_line_content": "  SAPercentileInfo* pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 4630,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  SInputColumnInfoData* pInput = &pCtx->input;",
          "new_line_content": "    SET_VAL(GET_RES_INFO(pCtx), 0, 1);",
          "content_same": false
        },
        {
          "line": 2587,
          "old_api": null,
          "new_api": "tdigestAutoFill",
          "old_text": null,
          "new_text": "tdigestAutoFill(pInfo->pTDigest, COMPRESSION)",
          "old_line_content": "           __FUNCTION__, numOfElems, pInfo->pHisto->numOfElems, pInfo->pHisto->numOfEntries, pInfo->pHisto,",
          "new_line_content": "    tdigestAutoFill(pInfo->pTDigest, COMPRESSION);",
          "content_same": false
        },
        {
          "line": 2589,
          "old_api": null,
          "new_api": "colDataIsNull_f",
          "old_text": null,
          "new_text": "colDataIsNull_f(pCol->nullbitmap, i)",
          "old_line_content": "    for (int32_t i = start; i < pInput->numOfRows + start; ++i) {",
          "new_line_content": "      if (colDataIsNull_f(pCol->nullbitmap, i)) {",
          "content_same": false
        },
        {
          "line": 2593,
          "old_api": null,
          "new_api": "colDataGetData",
          "old_text": null,
          "new_text": "colDataGetData(pCol, i)",
          "old_line_content": "      numOfElems += 1;",
          "new_line_content": "      char* data = colDataGetData(pCol, i);",
          "content_same": false
        },
        {
          "line": 4650,
          "old_api": null,
          "new_api": "ASSERT",
          "old_text": null,
          "new_text": "ASSERT(pCol->info.type == TSDB_DATA_TYPE_BINARY)",
          "old_line_content": "  return TSDB_CODE_SUCCESS;",
          "new_line_content": "  ASSERT(pCol->info.type == TSDB_DATA_TYPE_BINARY);",
          "content_same": false
        },
        {
          "line": 2603,
          "old_api": null,
          "new_api": "buildHistogramInfo",
          "old_text": null,
          "new_text": "buildHistogramInfo(pInfo)",
          "old_line_content": "           pInfo->pHisto->elems);",
          "new_line_content": "    buildHistogramInfo(pInfo);",
          "content_same": false
        },
        {
          "line": 2604,
          "old_api": null,
          "new_api": "qDebug",
          "old_text": null,
          "new_text": "qDebug(\"%s before add %d elements into histogram, total:%\" PRId64 \", numOfEntry:%d, pHisto:%p, elems: %p\",\n           __FUNCTION__, numOfElems, pInfo->pHisto->numOfElems, pInfo->pHisto->numOfEntries, pInfo->pHisto,\n           pInfo->pHisto->elems)",
          "old_line_content": "  }",
          "new_line_content": "    qDebug(\"%s before add %d elements into histogram, total:%\" PRId64 \", numOfEntry:%d, pHisto:%p, elems: %p\",",
          "content_same": false
        },
        {
          "line": 4652,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "",
          "new_line_content": "  SHLLInfo* pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "content_same": false
        },
        {
          "line": 2608,
          "old_api": null,
          "new_api": "colDataIsNull_f",
          "old_text": null,
          "new_text": "colDataIsNull_f(pCol->nullbitmap, i)",
          "old_line_content": "}",
          "new_line_content": "      if (colDataIsNull_f(pCol->nullbitmap, i)) {",
          "content_same": false
        },
        {
          "line": 4658,
          "old_api": null,
          "new_api": "varDataVal",
          "old_text": null,
          "new_text": "varDataVal(data)",
          "old_line_content": "  if (tsCountAlwaysReturnValue && pHllInfo->result == 0) {",
          "new_line_content": "    SHLLInfo* pInputInfo = (SHLLInfo*)varDataVal(data);",
          "content_same": false
        },
        {
          "line": 4659,
          "old_api": null,
          "new_api": "hllTransferInfo",
          "old_text": null,
          "new_text": "hllTransferInfo(pInputInfo, pInfo)",
          "old_line_content": "    pInfo->numOfRes = 1;",
          "new_line_content": "    hllTransferInfo(pInputInfo, pInfo);",
          "content_same": false
        },
        {
          "line": 2612,
          "old_api": null,
          "new_api": "colDataGetData",
          "old_text": null,
          "new_text": "colDataGetData(pCol, i)",
          "old_line_content": "  pOutput->algo = pInput->algo;",
          "new_line_content": "      char* data = colDataGetData(pCol, i);",
          "content_same": false
        },
        {
          "line": 4663,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "}",
          "new_line_content": "    SET_VAL(GET_RES_INFO(pCtx), 0, 1);",
          "content_same": false
        },
        {
          "line": 2616,
          "old_api": null,
          "new_api": "tHistogramAdd",
          "old_text": null,
          "new_text": "tHistogramAdd(&pInfo->pHisto, v)",
          "old_line_content": "",
          "new_line_content": "      tHistogramAdd(&pInfo->pHisto, v);",
          "content_same": false
        },
        {
          "line": 4665,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "int32_t hllPartialFinalize(SqlFunctionCtx* pCtx, SSDataBlock* pBlock) {",
          "new_line_content": "    SET_VAL(GET_RES_INFO(pCtx), 1, 1);",
          "content_same": false
        },
        {
          "line": 2619,
          "old_api": null,
          "new_api": "qDebug",
          "old_text": null,
          "new_text": "qDebug(\"%s after add %d elements into histogram, total:%\" PRId64 \", numOfEntry:%d, pHisto:%p, elems: %p\",\n           __FUNCTION__, numOfElems, pInfo->pHisto->numOfElems, pInfo->pHisto->numOfEntries, pInfo->pHisto,\n           pInfo->pHisto->elems)",
          "old_line_content": "    }",
          "new_line_content": "    qDebug(\"%s after add %d elements into histogram, total:%\" PRId64 \", numOfEntry:%d, pHisto:%p, elems: %p\",",
          "content_same": false
        },
        {
          "line": 2624,
          "old_api": null,
          "new_api": "SET_VAL",
          "old_text": null,
          "new_text": "SET_VAL(pResInfo, numOfElems, 1)",
          "old_line_content": "",
          "new_line_content": "  SET_VAL(pResInfo, numOfElems, 1);",
          "content_same": false
        },
        {
          "line": 4674,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  int32_t          slotId = pCtx->pExpr->base.resSchema.slotId;",
          "new_line_content": "  SHLLInfo* pHllInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "content_same": false
        },
        {
          "line": 4680,
          "old_api": null,
          "new_api": "functionFinalize",
          "old_text": null,
          "new_text": "functionFinalize(pCtx, pBlock)",
          "old_line_content": "  return pResInfo->numOfRes;",
          "new_line_content": "  return functionFinalize(pCtx, pBlock);",
          "content_same": false
        },
        {
          "line": 2633,
          "old_api": null,
          "new_api": "tdigestAutoFill",
          "old_text": null,
          "new_text": "tdigestAutoFill(pInput->pTDigest, COMPRESSION)",
          "old_line_content": "    if (pInput->pHisto->numOfElems <= 0) {",
          "new_line_content": "    tdigestAutoFill(pInput->pTDigest, COMPRESSION);",
          "content_same": false
        },
        {
          "line": 4686,
          "old_api": null,
          "new_api": "getHLLInfoSize",
          "old_text": null,
          "new_text": "getHLLInfoSize()",
          "old_line_content": "",
          "new_line_content": "  int32_t              resultBytes = getHLLInfoSize();",
          "content_same": false
        },
        {
          "line": 2639,
          "old_api": null,
          "new_api": "buildTDigestInfo",
          "old_text": null,
          "new_text": "buildTDigestInfo(pOutput)",
          "old_line_content": "",
          "new_line_content": "    buildTDigestInfo(pOutput);",
          "content_same": false
        },
        {
          "line": 4689,
          "old_api": null,
          "new_api": "varDataVal",
          "old_text": null,
          "new_text": "varDataVal(res)",
          "old_line_content": "",
          "new_line_content": "  memcpy(varDataVal(res), pInfo, resultBytes);",
          "content_same": false
        },
        {
          "line": 2645,
          "old_api": null,
          "new_api": "tdigestAutoFill",
          "old_text": null,
          "new_text": "tdigestAutoFill(pTDigest, COMPRESSION)",
          "old_line_content": "             pHisto);",
          "new_line_content": "      tdigestAutoFill(pTDigest, COMPRESSION);",
          "content_same": false
        },
        {
          "line": 4693,
          "old_api": null,
          "new_api": "taosArrayGet",
          "old_text": null,
          "new_text": "taosArrayGet(pBlock->pDataBlock, slotId)",
          "old_line_content": "  return TSDB_CODE_SUCCESS;",
          "new_line_content": "  SColumnInfoData* pCol = taosArrayGet(pBlock->pDataBlock, slotId);",
          "content_same": false
        },
        {
          "line": 2647,
          "old_api": null,
          "new_api": "tdigestMerge",
          "old_text": null,
          "new_text": "tdigestMerge(pTDigest, pInput->pTDigest)",
          "old_line_content": "      pHisto->elems = (SHistBin*)((char*)pHisto + sizeof(SHistogramInfo));",
          "new_line_content": "      tdigestMerge(pTDigest, pInput->pTDigest);",
          "content_same": false
        },
        {
          "line": 4695,
          "old_api": null,
          "new_api": "colDataAppend",
          "old_text": null,
          "new_text": "colDataAppend(pCol, pBlock->info.rows, res, false)",
          "old_line_content": "",
          "new_line_content": "  colDataAppend(pCol, pBlock->info.rows, res, false);",
          "content_same": false
        },
        {
          "line": 4697,
          "old_api": null,
          "new_api": "taosMemoryFree",
          "old_text": null,
          "new_text": "taosMemoryFree(res)",
          "old_line_content": "  pEnv->calcMemSize = sizeof(SStateInfo);",
          "new_line_content": "  taosMemoryFree(res);",
          "content_same": false
        },
        {
          "line": 2650,
          "old_api": null,
          "new_api": "buildHistogramInfo",
          "old_text": null,
          "new_text": "buildHistogramInfo(pInput)",
          "old_line_content": "",
          "new_line_content": "    buildHistogramInfo(pInput);",
          "content_same": false
        },
        {
          "line": 4702,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pDestCtx)",
          "old_line_content": "  int8_t opType;",
          "new_line_content": "  SResultRowEntryInfo* pDResInfo = GET_RES_INFO(pDestCtx);",
          "content_same": false
        },
        {
          "line": 4706,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pSResInfo)",
          "old_line_content": "    opType = STATE_OPER_GT;",
          "new_line_content": "  SHLLInfo*            pSBuf = GET_ROWCELL_INTERBUF(pSResInfo);",
          "content_same": false
        },
        {
          "line": 2659,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(pHisto, pInput->pHisto, sizeof(SHistogramInfo) + sizeof(SHistBin) * (MAX_HISTOGRAM_BIN + 1))",
          "old_line_content": "  }",
          "new_line_content": "      memcpy(pHisto, pInput->pHisto, sizeof(SHistogramInfo) + sizeof(SHistBin) * (MAX_HISTOGRAM_BIN + 1));",
          "content_same": false
        },
        {
          "line": 4708,
          "old_api": null,
          "new_api": "hllTransferInfo",
          "old_text": null,
          "new_text": "hllTransferInfo(pSBuf, pDBuf)",
          "old_line_content": "    opType = STATE_OPER_LE;",
          "new_line_content": "  hllTransferInfo(pSBuf, pDBuf);",
          "content_same": false
        },
        {
          "line": 2662,
          "old_api": null,
          "new_api": "qDebug",
          "old_text": null,
          "new_text": "qDebug(\"%s merge histo, total:%\" PRId64 \", entry:%d, %p\", __FUNCTION__, pHisto->numOfElems, pHisto->numOfEntries,\n             pHisto)",
          "old_line_content": "int32_t apercentileFunctionMerge(SqlFunctionCtx* pCtx) {",
          "new_line_content": "      qDebug(\"%s merge histo, total:%\" PRId64 \", entry:%d, %p\", __FUNCTION__, pHisto->numOfElems, pHisto->numOfEntries,",
          "content_same": false
        },
        {
          "line": 2666,
          "old_api": null,
          "new_api": "qDebug",
          "old_text": null,
          "new_text": "qDebug(\"%s input histogram, elem:%\" PRId64 \", entry:%d, %p\", __FUNCTION__, pHisto->numOfElems,\n             pHisto->numOfEntries, pInput->pHisto)",
          "old_line_content": "",
          "new_line_content": "      qDebug(\"%s input histogram, elem:%\" PRId64 \", entry:%d, %p\", __FUNCTION__, pHisto->numOfElems,",
          "content_same": false
        },
        {
          "line": 2669,
          "old_api": null,
          "new_api": "tHistogramMerge",
          "old_text": null,
          "new_text": "tHistogramMerge(pHisto, pInput->pHisto, MAX_HISTOGRAM_BIN)",
          "old_line_content": "",
          "new_line_content": "      SHistogramInfo* pRes = tHistogramMerge(pHisto, pInput->pHisto, MAX_HISTOGRAM_BIN);",
          "content_same": false
        },
        {
          "line": 2673,
          "old_api": null,
          "new_api": "qDebug",
          "old_text": null,
          "new_text": "qDebug(\"%s merge histo, total:%\" PRId64 \", entry:%d, %p\", __FUNCTION__, pHisto->numOfElems, pHisto->numOfEntries,\n             pHisto)",
          "old_line_content": "",
          "new_line_content": "      qDebug(\"%s merge histo, total:%\" PRId64 \", entry:%d, %p\", __FUNCTION__, pHisto->numOfElems, pHisto->numOfEntries,",
          "content_same": false
        },
        {
          "line": 4721,
          "old_api": null,
          "new_api": "strncasecmp",
          "old_text": null,
          "new_text": "strncasecmp(opStr, \"LT\", 2)",
          "old_line_content": "",
          "new_line_content": "  if (strncasecmp(opStr, \"LT\", 2) == 0) {",
          "content_same": false
        },
        {
          "line": 2675,
          "old_api": null,
          "new_api": "tHistogramDestroy",
          "old_text": null,
          "new_text": "tHistogramDestroy(&pRes)",
          "old_line_content": "  for (int32_t i = start; i < start + pInput->numOfRows; ++i) {",
          "new_line_content": "      tHistogramDestroy(&pRes);",
          "content_same": false
        },
        {
          "line": 4725,
          "old_api": null,
          "new_api": "strncasecmp",
          "old_text": null,
          "new_text": "strncasecmp(opStr, \"LE\", 2)",
          "old_line_content": "    case TSDB_DATA_TYPE_TINYINT: {",
          "new_line_content": "  } else if (strncasecmp(opStr, \"LE\", 2) == 0) {",
          "content_same": false
        },
        {
          "line": 2681,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "",
          "new_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 4729,
          "old_api": null,
          "new_api": "strncasecmp",
          "old_text": null,
          "new_text": "strncasecmp(opStr, \"NE\", 2)",
          "old_line_content": "    }",
          "new_line_content": "  } else if (strncasecmp(opStr, \"NE\", 2) == 0) {",
          "content_same": false
        },
        {
          "line": 4731,
          "old_api": null,
          "new_api": "strncasecmp",
          "old_text": null,
          "new_text": "strncasecmp(opStr, \"EQ\", 2)",
          "old_line_content": "      uint8_t v = *(uint8_t*)data;",
          "new_line_content": "  } else if (strncasecmp(opStr, \"EQ\", 2) == 0) {",
          "content_same": false
        },
        {
          "line": 2686,
          "old_api": null,
          "new_api": "ASSERT",
          "old_text": null,
          "new_text": "ASSERT(pCol->info.type == TSDB_DATA_TYPE_BINARY)",
          "old_line_content": "",
          "new_line_content": "  ASSERT(pCol->info.type == TSDB_DATA_TYPE_BINARY);",
          "content_same": false
        },
        {
          "line": 2688,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "  return TSDB_CODE_SUCCESS;",
          "new_line_content": "  SAPercentileInfo* pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 2690,
          "old_api": null,
          "new_api": "qDebug",
          "old_text": null,
          "new_text": "qDebug(\"%s total %d rows will merge, %p\", __FUNCTION__, pInput->numOfRows, pInfo->pHisto)",
          "old_line_content": "",
          "new_line_content": "  qDebug(\"%s total %d rows will merge, %p\", __FUNCTION__, pInput->numOfRows, pInfo->pHisto);",
          "content_same": false
        },
        {
          "line": 4741,
          "old_api": null,
          "new_api": "colDataGetData",
          "old_text": null,
          "new_text": "colDataGetData(pCol, index)",
          "old_line_content": "      uint16_t v = *(uint16_t*)data;",
          "new_line_content": "  char* data = colDataGetData(pCol, index);",
          "content_same": false
        },
        {
          "line": 2694,
          "old_api": null,
          "new_api": "colDataGetData",
          "old_text": null,
          "new_text": "colDataGetData(pCol, i)",
          "old_line_content": "",
          "new_line_content": "    char* data = colDataGetData(pCol, i);",
          "content_same": false
        },
        {
          "line": 4745,
          "old_api": null,
          "new_api": "STATE_COMP",
          "old_text": null,
          "new_text": "STATE_COMP(op, v, param)",
          "old_line_content": "    case TSDB_DATA_TYPE_INT: {",
          "new_line_content": "      STATE_COMP(op, v, param);",
          "content_same": false
        },
        {
          "line": 2701,
          "old_api": null,
          "new_api": "qDebug",
          "old_text": null,
          "new_text": "qDebug(\"%s after merge, total:%\" PRId64 \", numOfEntry:%d, %p\", __FUNCTION__, pInfo->pHisto->numOfElems,\n           pInfo->pHisto->numOfEntries, pInfo->pHisto)",
          "old_line_content": "      // setNull(pCtx->pOutput, pCtx->outputType, pCtx->outputBytes);",
          "new_line_content": "    qDebug(\"%s after merge, total:%\" PRId64 \", numOfEntry:%d, %p\", __FUNCTION__, pInfo->pHisto->numOfElems,",
          "content_same": false
        },
        {
          "line": 4750,
          "old_api": null,
          "new_api": "STATE_COMP",
          "old_text": null,
          "new_text": "STATE_COMP(op, v, param)",
          "old_line_content": "    case TSDB_DATA_TYPE_UINT: {",
          "new_line_content": "      STATE_COMP(op, v, param);",
          "content_same": false
        },
        {
          "line": 4755,
          "old_api": null,
          "new_api": "STATE_COMP",
          "old_text": null,
          "new_text": "STATE_COMP(op, v, param)",
          "old_line_content": "    case TSDB_DATA_TYPE_BIGINT: {",
          "new_line_content": "      STATE_COMP(op, v, param);",
          "content_same": false
        },
        {
          "line": 2710,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "      double  ratio[] = {pInfo->percent};",
          "new_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 4760,
          "old_api": null,
          "new_api": "STATE_COMP",
          "old_text": null,
          "new_text": "STATE_COMP(op, v, param)",
          "old_line_content": "    case TSDB_DATA_TYPE_UBIGINT: {",
          "new_line_content": "      STATE_COMP(op, v, param);",
          "content_same": false
        },
        {
          "line": 2715,
          "old_api": null,
          "new_api": "tdigestAutoFill",
          "old_text": null,
          "new_text": "tdigestAutoFill(pInfo->pTDigest, COMPRESSION)",
          "old_line_content": "    } else {  // no need to free",
          "new_line_content": "    tdigestAutoFill(pInfo->pTDigest, COMPRESSION);",
          "content_same": false
        },
        {
          "line": 2717,
          "old_api": null,
          "new_api": "tdigestQuantile",
          "old_text": null,
          "new_text": "tdigestQuantile(pInfo->pTDigest, pInfo->percent / 100)",
          "old_line_content": "      // return TSDB_CODE_SUCCESS;",
          "new_line_content": "      pInfo->result = tdigestQuantile(pInfo->pTDigest, pInfo->percent / 100);",
          "content_same": false
        },
        {
          "line": 4765,
          "old_api": null,
          "new_api": "STATE_COMP",
          "old_text": null,
          "new_text": "STATE_COMP(op, v, param)",
          "old_line_content": "    case TSDB_DATA_TYPE_FLOAT: {",
          "new_line_content": "      STATE_COMP(op, v, param);",
          "content_same": false
        },
        {
          "line": 4770,
          "old_api": null,
          "new_api": "STATE_COMP",
          "old_text": null,
          "new_text": "STATE_COMP(op, v, param)",
          "old_line_content": "    case TSDB_DATA_TYPE_DOUBLE: {",
          "new_line_content": "      STATE_COMP(op, v, param);",
          "content_same": false
        },
        {
          "line": 2725,
          "old_api": null,
          "new_api": "qDebug",
          "old_text": null,
          "new_text": "qDebug(\"%s get the final res, elements:%\" PRId64 \", numOfEntry:%d, pHisto:%p, elems:%p\", __FUNCTION__,\n             pInfo->pHisto->numOfElems, pInfo->pHisto->numOfEntries, pInfo->pHisto, pInfo->pHisto->elems)",
          "old_line_content": "",
          "new_line_content": "      qDebug(\"%s get the final res, elements:%\" PRId64 \", numOfEntry:%d, pHisto:%p, elems:%p\", __FUNCTION__,",
          "content_same": false
        },
        {
          "line": 4775,
          "old_api": null,
          "new_api": "STATE_COMP",
          "old_text": null,
          "new_text": "STATE_COMP(op, v, param)",
          "old_line_content": "    default: {",
          "new_line_content": "      STATE_COMP(op, v, param);",
          "content_same": false
        },
        {
          "line": 2729,
          "old_api": null,
          "new_api": "tHistogramUniform",
          "old_text": null,
          "new_text": "tHistogramUniform(pInfo->pHisto, ratio, 1)",
          "old_line_content": "",
          "new_line_content": "      double* res = tHistogramUniform(pInfo->pHisto, ratio, 1);",
          "content_same": false
        },
        {
          "line": 2732,
          "old_api": null,
          "new_api": "taosMemoryFree",
          "old_text": null,
          "new_text": "taosMemoryFree(res)",
          "old_line_content": "",
          "new_line_content": "      taosMemoryFree(res);",
          "content_same": false
        },
        {
          "line": 4780,
          "old_api": null,
          "new_api": "STATE_COMP",
          "old_text": null,
          "new_text": "STATE_COMP(op, v, param)",
          "old_line_content": "}",
          "new_line_content": "      STATE_COMP(op, v, param);",
          "content_same": false
        },
        {
          "line": 2736,
          "old_api": null,
          "new_api": "qDebug",
          "old_text": null,
          "new_text": "qDebug(\"%s get the final res, elements:%\" PRId64 \", numOfEntry:%d. result is null\", __FUNCTION__,\n             pInfo->pHisto->numOfElems, pInfo->pHisto->numOfEntries)",
          "old_line_content": "  } else {",
          "new_line_content": "      qDebug(\"%s get the final res, elements:%\" PRId64 \", numOfEntry:%d. result is null\", __FUNCTION__,",
          "content_same": false
        },
        {
          "line": 4785,
          "old_api": null,
          "new_api": "STATE_COMP",
          "old_text": null,
          "new_text": "STATE_COMP(op, v, param)",
          "old_line_content": "",
          "new_line_content": "      STATE_COMP(op, v, param);",
          "content_same": false
        },
        {
          "line": 2741,
          "old_api": null,
          "new_api": "functionFinalize",
          "old_text": null,
          "new_text": "functionFinalize(pCtx, pBlock)",
          "old_line_content": "  int32_t          slotId = pCtx->pExpr->base.resSchema.slotId;",
          "new_line_content": "  return functionFinalize(pCtx, pBlock);",
          "content_same": false
        },
        {
          "line": 4790,
          "old_api": null,
          "new_api": "STATE_COMP",
          "old_text": null,
          "new_text": "STATE_COMP(op, v, param)",
          "old_line_content": "  int32_t          numOfElems = 0;",
          "new_line_content": "      STATE_COMP(op, v, param);",
          "content_same": false
        },
        {
          "line": 2745,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "",
          "new_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 4794,
          "old_api": null,
          "new_api": "ASSERT",
          "old_text": null,
          "new_text": "ASSERT(0)",
          "old_line_content": "  if (STATE_OPER_INVALID == op) {",
          "new_line_content": "      ASSERT(0);",
          "content_same": false
        },
        {
          "line": 2748,
          "old_api": null,
          "new_api": "getApercentileMaxSize",
          "old_text": null,
          "new_text": "getApercentileMaxSize()",
          "old_line_content": "}",
          "new_line_content": "  int32_t resultBytes = getApercentileMaxSize();",
          "content_same": false
        },
        {
          "line": 2749,
          "old_api": null,
          "new_api": "taosMemoryCalloc",
          "old_text": null,
          "new_text": "taosMemoryCalloc(resultBytes + VARSTR_HEADER_SIZE, sizeof(char))",
          "old_line_content": "",
          "new_line_content": "  char*   res = taosMemoryCalloc(resultBytes + VARSTR_HEADER_SIZE, sizeof(char));",
          "content_same": false
        },
        {
          "line": 2753,
          "old_api": null,
          "new_api": "varDataSetLen",
          "old_text": null,
          "new_text": "varDataSetLen(res, resultBytes)",
          "old_line_content": "",
          "new_line_content": "    varDataSetLen(res, resultBytes);",
          "content_same": false
        },
        {
          "line": 4802,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "      // handle selectivity",
          "new_line_content": "  SStateInfo*          pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 2756,
          "old_api": null,
          "new_api": "varDataSetLen",
          "old_text": null,
          "new_text": "varDataSetLen(res, resultBytes)",
          "old_line_content": "",
          "new_line_content": "    varDataSetLen(res, resultBytes);",
          "content_same": false
        },
        {
          "line": 2762,
          "old_api": null,
          "new_api": "colDataAppend",
          "old_text": null,
          "new_text": "colDataAppend(pCol, pBlock->info.rows, res, false)",
          "old_line_content": "  return TSDB_CODE_SUCCESS;",
          "new_line_content": "  colDataAppend(pCol, pBlock->info.rows, res, false);",
          "content_same": false
        },
        {
          "line": 4811,
          "old_api": null,
          "new_api": "varDataVal",
          "old_text": null,
          "new_text": "varDataVal(pCtx->param[1].param.pz)",
          "old_line_content": "    int64_t output = -1;",
          "new_line_content": "  int8_t op = getStateOpType(varDataVal(pCtx->param[1].param.pz));",
          "content_same": false
        },
        {
          "line": 2764,
          "old_api": null,
          "new_api": "taosMemoryFree",
          "old_text": null,
          "new_text": "taosMemoryFree(res)",
          "old_line_content": "",
          "new_line_content": "  taosMemoryFree(res);",
          "content_same": false
        },
        {
          "line": 2769,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pDestCtx)",
          "old_line_content": "  if (pEntry == NULL) {",
          "new_line_content": "  SResultRowEntryInfo* pDResInfo = GET_RES_INFO(pDestCtx);",
          "content_same": false
        },
        {
          "line": 2770,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pDResInfo)",
          "old_line_content": "    return FUNC_DATA_REQUIRED_DATA_LOAD;",
          "new_line_content": "  SAPercentileInfo*    pDBuf = GET_ROWCELL_INTERBUF(pDResInfo);",
          "content_same": false
        },
        {
          "line": 4818,
          "old_api": null,
          "new_api": "colDataIsNull_f",
          "old_text": null,
          "new_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "old_line_content": "",
          "new_line_content": "    if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "content_same": false
        },
        {
          "line": 2772,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pSourceCtx)",
          "old_line_content": "",
          "new_line_content": "  SResultRowEntryInfo* pSResInfo = GET_RES_INFO(pSourceCtx);",
          "content_same": false
        },
        {
          "line": 4819,
          "old_api": null,
          "new_api": "colDataAppendNULL",
          "old_text": null,
          "new_text": "colDataAppendNULL(pOutput, i)",
          "old_line_content": "    // handle selectivity",
          "new_line_content": "      colDataAppendNULL(pOutput, i);",
          "content_same": false
        },
        {
          "line": 4822,
          "old_api": null,
          "new_api": "appendSelectivityValue",
          "old_text": null,
          "new_text": "appendSelectivityValue(pCtx, i, pCtx->offset + numOfElems - 1)",
          "old_line_content": "    }",
          "new_line_content": "        appendSelectivityValue(pCtx, i, pCtx->offset + numOfElems - 1);",
          "content_same": false
        },
        {
          "line": 2775,
          "old_api": null,
          "new_api": "qDebug",
          "old_text": null,
          "new_text": "qDebug(\"%s start to combine apercentile, %p\", __FUNCTION__, pDBuf->pHisto)",
          "old_line_content": "    return FUNC_DATA_REQUIRED_NOT_LOAD;",
          "new_line_content": "  qDebug(\"%s start to combine apercentile, %p\", __FUNCTION__, pDBuf->pHisto);",
          "content_same": false
        },
        {
          "line": 2777,
          "old_api": null,
          "new_api": "apercentileTransferInfo",
          "old_text": null,
          "new_text": "apercentileTransferInfo(pSBuf, pDBuf)",
          "old_line_content": "    return FUNC_DATA_REQUIRED_DATA_LOAD;",
          "new_line_content": "  apercentileTransferInfo(pSBuf, pDBuf);",
          "content_same": false
        },
        {
          "line": 2778,
          "old_api": null,
          "new_api": "TMAX",
          "old_text": null,
          "new_text": "TMAX(pDResInfo->numOfRes, pSResInfo->numOfRes)",
          "old_line_content": "  }",
          "new_line_content": "  pDResInfo->numOfRes = TMAX(pDResInfo->numOfRes, pSResInfo->numOfRes);",
          "content_same": false
        },
        {
          "line": 4827,
          "old_api": null,
          "new_api": "checkStateOp",
          "old_text": null,
          "new_text": "checkStateOp(op, pInputCol, i, pCtx->param[2].param)",
          "old_line_content": "",
          "new_line_content": "    bool ret = checkStateOp(op, pInputCol, i, pCtx->param[2].param);",
          "content_same": false
        },
        {
          "line": 4835,
          "old_api": null,
          "new_api": "colDataAppend",
          "old_text": null,
          "new_text": "colDataAppend(pOutput, pCtx->offset + numOfElems - 1, (char*)&output, false)",
          "old_line_content": "  SColumnInfoData* pInputCol = pInput->pData[0];",
          "new_line_content": "    colDataAppend(pOutput, pCtx->offset + numOfElems - 1, (char*)&output, false);",
          "content_same": false
        },
        {
          "line": 2791,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pEntry)",
          "old_line_content": "    return FUNC_DATA_REQUIRED_NOT_LOAD;",
          "new_line_content": "  SFirstLastRes* pResult = GET_ROWCELL_INTERBUF(pEntry);",
          "content_same": false
        },
        {
          "line": 4839,
          "old_api": null,
          "new_api": "appendSelectivityValue",
          "old_text": null,
          "new_text": "appendSelectivityValue(pCtx, i, pCtx->offset + numOfElems - 1)",
          "old_line_content": "",
          "new_line_content": "      appendSelectivityValue(pCtx, i, pCtx->offset + numOfElems - 1);",
          "content_same": false
        },
        {
          "line": 4847,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  if (STATE_OPER_INVALID == op) {",
          "new_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 4848,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "    return 0;",
          "new_line_content": "  SStateInfo*          pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 2807,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pEntry)",
          "old_line_content": "  pEnv->calcMemSize = pNode->node.resType.bytes;",
          "new_line_content": "  SFirstLastRes* pResult = GET_ROWCELL_INTERBUF(pEntry);",
          "content_same": false
        },
        {
          "line": 4864,
          "old_api": null,
          "new_api": "varDataVal",
          "old_text": null,
          "new_text": "varDataVal(pCtx->param[1].param.pz)",
          "old_line_content": "    if (ret) {",
          "new_line_content": "  int8_t op = getStateOpType(varDataVal(pCtx->param[1].param.pz));",
          "content_same": false
        },
        {
          "line": 2818,
          "old_api": null,
          "new_api": "nodesListGetNode",
          "old_text": null,
          "new_text": "nodesListGetNode(pFunc->pParameterList, 0)",
          "old_line_content": "  if (pTsColInfo == NULL) {",
          "new_line_content": "  SColumnNode* pNode = (SColumnNode*)nodesListGetNode(pFunc->pParameterList, 0);",
          "content_same": false
        },
        {
          "line": 2819,
          "old_api": null,
          "new_api": "getFirstLastInfoSize",
          "old_text": null,
          "new_text": "getFirstLastInfoSize(pNode->node.resType.bytes)",
          "old_line_content": "    return 0;",
          "new_line_content": "  pEnv->calcMemSize = getFirstLastInfoSize(pNode->node.resType.bytes);",
          "content_same": false
        },
        {
          "line": 4871,
          "old_api": null,
          "new_api": "colDataIsNull_f",
          "old_text": null,
          "new_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "old_line_content": "    } else {",
          "new_line_content": "    if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "content_same": false
        },
        {
          "line": 2824,
          "old_api": null,
          "new_api": "nodesListGetNode",
          "old_text": null,
          "new_text": "nodesListGetNode(pFunc->pParameterList, 0)",
          "old_line_content": "",
          "new_line_content": "  SColumnNode* pNode = (SColumnNode*)nodesListGetNode(pFunc->pParameterList, 0);",
          "content_same": false
        },
        {
          "line": 4872,
          "old_api": null,
          "new_api": "colDataAppendNULL",
          "old_text": null,
          "new_text": "colDataAppendNULL(pOutput, i)",
          "old_line_content": "      pInfo->durationStart = 0;",
          "new_line_content": "      colDataAppendNULL(pOutput, i);",
          "content_same": false
        },
        {
          "line": 4875,
          "old_api": null,
          "new_api": "appendSelectivityValue",
          "old_text": null,
          "new_text": "appendSelectivityValue(pCtx, i, pCtx->offset + numOfElems - 1)",
          "old_line_content": "",
          "new_line_content": "        appendSelectivityValue(pCtx, i, pCtx->offset + numOfElems - 1);",
          "content_same": false
        },
        {
          "line": 2830,
          "old_api": null,
          "new_api": "nodesListGetNode",
          "old_text": null,
          "new_text": "nodesListGetNode(pFunc->pParameterList, 0)",
          "old_line_content": "",
          "new_line_content": "  SColumnNode* pNode = (SColumnNode*)nodesListGetNode(pFunc->pParameterList, 0);",
          "content_same": false
        },
        {
          "line": 4880,
          "old_api": null,
          "new_api": "checkStateOp",
          "old_text": null,
          "new_text": "checkStateOp(op, pInputCol, i, pCtx->param[2].param)",
          "old_line_content": "  }",
          "new_line_content": "    bool    ret = checkStateOp(op, pInputCol, i, pCtx->param[2].param);",
          "content_same": false
        },
        {
          "line": 4896,
          "old_api": null,
          "new_api": "appendSelectivityValue",
          "old_text": null,
          "new_text": "appendSelectivityValue(pCtx, i, pCtx->offset + numOfElems - 1)",
          "old_line_content": "  SColumnInfoData* pInputCol = pInput->pData[0];",
          "new_line_content": "      appendSelectivityValue(pCtx, i, pCtx->offset + numOfElems - 1);",
          "content_same": false
        },
        {
          "line": 2850,
          "old_api": null,
          "new_api": "saveTupleData",
          "old_text": null,
          "new_text": "saveTupleData(pCtx, rowIndex, pSrcBlock, NULL)",
          "old_line_content": "  pInfo->hasResult = true;",
          "new_line_content": "    pInfo->pos = saveTupleData(pCtx, rowIndex, pSrcBlock, NULL);",
          "content_same": false
        },
        {
          "line": 2852,
          "old_api": null,
          "new_api": "updateTupleData",
          "old_text": null,
          "new_text": "updateTupleData(pCtx, rowIndex, pSrcBlock, &pInfo->pos)",
          "old_line_content": "",
          "new_line_content": "    updateTupleData(pCtx, rowIndex, pSrcBlock, &pInfo->pos);",
          "content_same": false
        },
        {
          "line": 2857,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "",
          "new_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 2860,
          "old_api": null,
          "new_api": "IS_VAR_DATA_TYPE",
          "old_text": null,
          "new_text": "IS_VAR_DATA_TYPE(type)",
          "old_line_content": "",
          "new_line_content": "  if (IS_VAR_DATA_TYPE(type)) {",
          "content_same": false
        },
        {
          "line": 2861,
          "old_api": null,
          "new_api": "varDataTLen",
          "old_text": null,
          "new_text": "varDataTLen(pData)",
          "old_line_content": "  SInputColumnInfoData* pInput = &pCtx->input;",
          "new_line_content": "    pInfo->bytes = varDataTLen(pData);",
          "content_same": false
        },
        {
          "line": 2864,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(pInfo->buf, pData, pInfo->bytes)",
          "old_line_content": "  pInfo->bytes = pInputCol->info.bytes;",
          "new_line_content": "  memcpy(pInfo->buf, pData, pInfo->bytes);",
          "content_same": false
        },
        {
          "line": 2866,
          "old_api": null,
          "new_api": "firstlastSaveTupleData",
          "old_text": null,
          "new_text": "firstlastSaveTupleData(pCtx->pSrcBlock, rowIndex, pCtx, pInfo)",
          "old_line_content": "  // All null data column, return directly.",
          "new_line_content": "  firstlastSaveTupleData(pCtx->pSrcBlock, rowIndex, pCtx, pInfo);",
          "content_same": false
        },
        {
          "line": 4922,
          "old_api": null,
          "new_api": "colDataIsNull_f",
          "old_text": null,
          "new_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "old_line_content": "      GET_TYPED_DATA(v, double, type, data);",
          "new_line_content": "    if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "content_same": false
        },
        {
          "line": 4927,
          "old_api": null,
          "new_api": "colDataGetData",
          "old_text": null,
          "new_text": "colDataGetData(pInputCol, i)",
          "old_line_content": "      } else {",
          "new_line_content": "    char* data = colDataGetData(pInputCol, i);",
          "content_same": false
        },
        {
          "line": 4932,
          "old_api": null,
          "new_api": "colDataAppend",
          "old_text": null,
          "new_text": "colDataAppend(pOutput, pos, (char*)&pSumRes->isum, false)",
          "old_line_content": "    // handle selectivity",
          "new_line_content": "      colDataAppend(pOutput, pos, (char*)&pSumRes->isum, false);",
          "content_same": false
        },
        {
          "line": 4933,
          "old_api": null,
          "new_api": "IS_UNSIGNED_NUMERIC_TYPE",
          "old_text": null,
          "new_text": "IS_UNSIGNED_NUMERIC_TYPE(type)",
          "old_line_content": "    if (pCtx->subsidiaries.num > 0) {",
          "new_line_content": "    } else if (IS_UNSIGNED_NUMERIC_TYPE(type)) {",
          "content_same": false
        },
        {
          "line": 2886,
          "old_api": null,
          "new_api": "ASSERT",
          "old_text": null,
          "new_text": "ASSERT(pInputCol->hasNull == true)",
          "old_line_content": "    if (pResInfo->numOfRes > 0) {",
          "new_line_content": "    ASSERT(pInputCol->hasNull == true);",
          "content_same": false
        },
        {
          "line": 2888,
          "old_api": null,
          "new_api": "firstlastSaveTupleData",
          "old_text": null,
          "new_text": "firstlastSaveTupleData(pCtx->pSrcBlock, pInput->startRowIndex, pCtx, pInfo)",
          "old_line_content": "        return TSDB_CODE_SUCCESS;",
          "new_line_content": "    firstlastSaveTupleData(pCtx->pSrcBlock, pInput->startRowIndex, pCtx, pInfo);",
          "content_same": false
        },
        {
          "line": 4937,
          "old_api": null,
          "new_api": "colDataAppend",
          "old_text": null,
          "new_text": "colDataAppend(pOutput, pos, (char*)&pSumRes->usum, false)",
          "old_line_content": "    numOfElems++;",
          "new_line_content": "      colDataAppend(pOutput, pos, (char*)&pSumRes->usum, false);",
          "content_same": false
        },
        {
          "line": 4938,
          "old_api": null,
          "new_api": "IS_FLOAT_TYPE",
          "old_text": null,
          "new_text": "IS_FLOAT_TYPE(type)",
          "old_line_content": "  }",
          "new_line_content": "    } else if (IS_FLOAT_TYPE(type)) {",
          "content_same": false
        },
        {
          "line": 2894,
          "old_api": null,
          "new_api": "getRowPTs",
          "old_text": null,
          "new_text": "getRowPTs(pInput->pPTS, 0)",
          "old_line_content": "        continue;",
          "new_line_content": "  TSKEY startKey = getRowPTs(pInput->pPTS, 0);",
          "content_same": false
        },
        {
          "line": 2895,
          "old_api": null,
          "new_api": "getRowPTs",
          "old_text": null,
          "new_text": "getRowPTs(pInput->pPTS, pInput->totalRows - 1)",
          "old_line_content": "      }",
          "new_line_content": "  TSKEY endKey = getRowPTs(pInput->pPTS, pInput->totalRows - 1);",
          "content_same": false
        },
        {
          "line": 4943,
          "old_api": null,
          "new_api": "isnan",
          "old_text": null,
          "new_text": "isnan(pSumRes->dsum)",
          "old_line_content": "bool getMavgFuncEnv(SFunctionNode* UNUSED_PARAM(pFunc), SFuncExecEnv* pEnv) {",
          "new_line_content": "      if (isinf(pSumRes->dsum) || isnan(pSumRes->dsum)) {",
          "content_same": false
        },
        {
          "line": 4944,
          "old_api": null,
          "new_api": "colDataAppendNULL",
          "old_text": null,
          "new_text": "colDataAppendNULL(pOutput, pos)",
          "old_line_content": "  pEnv->calcMemSize = sizeof(SMavgInfo) + MAVG_MAX_POINTS_NUM * sizeof(double);",
          "new_line_content": "        colDataAppendNULL(pOutput, pos);",
          "content_same": false
        },
        {
          "line": 4946,
          "old_api": null,
          "new_api": "colDataAppend",
          "old_text": null,
          "new_text": "colDataAppend(pOutput, pos, (char*)&pSumRes->dsum, false)",
          "old_line_content": "}",
          "new_line_content": "        colDataAppend(pOutput, pos, (char*)&pSumRes->dsum, false);",
          "content_same": false
        },
        {
          "line": 4952,
          "old_api": null,
          "new_api": "appendSelectivityValue",
          "old_text": null,
          "new_text": "appendSelectivityValue(pCtx, i, pos)",
          "old_line_content": "",
          "new_line_content": "      appendSelectivityValue(pCtx, i, pos);",
          "content_same": false
        },
        {
          "line": 2911,
          "old_api": null,
          "new_api": "colDataIsNull",
          "old_text": null,
          "new_text": "colDataIsNull(pInputCol, pInput->totalRows, i, pColAgg)",
          "old_line_content": "        return TSDB_CODE_SUCCESS;",
          "new_line_content": "      if (pInputCol->hasNull && colDataIsNull(pInputCol, pInput->totalRows, i, pColAgg)) {",
          "content_same": false
        },
        {
          "line": 2917,
          "old_api": null,
          "new_api": "colDataGetData",
          "old_text": null,
          "new_text": "colDataGetData(pInputCol, i)",
          "old_line_content": "        continue;",
          "new_line_content": "      char* data = colDataGetData(pInputCol, i);",
          "content_same": false
        },
        {
          "line": 2918,
          "old_api": null,
          "new_api": "getRowPTs",
          "old_text": null,
          "new_text": "getRowPTs(pInput->pPTS, i)",
          "old_line_content": "      }",
          "new_line_content": "      TSKEY cts = getRowPTs(pInput->pPTS, i);",
          "content_same": false
        },
        {
          "line": 2920,
          "old_api": null,
          "new_api": "doSaveCurrentVal",
          "old_text": null,
          "new_text": "doSaveCurrentVal(pCtx, i, cts, pInputCol->info.type, data)",
          "old_line_content": "      numOfElems++;",
          "new_line_content": "        doSaveCurrentVal(pCtx, i, cts, pInputCol->info.type, data);",
          "content_same": false
        },
        {
          "line": 4971,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResultInfo)",
          "old_line_content": "  SColumnInfoData* pInputCol = pInput->pData[0];",
          "new_line_content": "  SMavgInfo* pInfo = GET_ROWCELL_INTERBUF(pResultInfo);",
          "content_same": false
        },
        {
          "line": 2934,
          "old_api": null,
          "new_api": "colDataIsNull",
          "old_text": null,
          "new_text": "colDataIsNull(pInputCol, pInput->totalRows, i, pColAgg)",
          "old_line_content": "      continue;",
          "new_line_content": "      if (pInputCol->hasNull && colDataIsNull(pInputCol, pInput->totalRows, i, pColAgg)) {",
          "content_same": false
        },
        {
          "line": 4984,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "",
          "new_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 2941,
          "old_api": null,
          "new_api": "getRowPTs",
          "old_text": null,
          "new_text": "getRowPTs(pInput->pPTS, i)",
          "old_line_content": "    if (pResInfo->numOfRes == 0 || pInfo->ts > cts) {",
          "new_line_content": "      TSKEY cts = getRowPTs(pInput->pPTS, i);",
          "content_same": false
        },
        {
          "line": 2944,
          "old_api": null,
          "new_api": "doSaveCurrentVal",
          "old_text": null,
          "new_text": "doSaveCurrentVal(pCtx, i, cts, pInputCol->info.type, data)",
          "old_line_content": "    }",
          "new_line_content": "        doSaveCurrentVal(pCtx, i, cts, pInputCol->info.type, data);",
          "content_same": false
        },
        {
          "line": 4998,
          "old_api": null,
          "new_api": "colDataIsNull_f",
          "old_text": null,
          "new_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "old_line_content": "      }",
          "new_line_content": "    if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "content_same": false
        },
        {
          "line": 2957,
          "old_api": null,
          "new_api": "colDataGetData",
          "old_text": null,
          "new_text": "colDataGetData(pInputCol, i)",
          "old_line_content": "",
          "new_line_content": "    char* data = colDataGetData(pInputCol, i);",
          "content_same": false
        },
        {
          "line": 2960,
          "old_api": null,
          "new_api": "doSaveCurrentVal",
          "old_text": null,
          "new_text": "doSaveCurrentVal(pCtx, i, cts, pInputCol->info.type, data)",
          "old_line_content": "",
          "new_line_content": "      doSaveCurrentVal(pCtx, i, cts, pInputCol->info.type, data);",
          "content_same": false
        },
        {
          "line": 2967,
          "old_api": null,
          "new_api": "firstlastSaveTupleData",
          "old_text": null,
          "new_text": "firstlastSaveTupleData(pCtx->pSrcBlock, pInput->startRowIndex, pCtx, pInfo)",
          "old_line_content": "",
          "new_line_content": "    firstlastSaveTupleData(pCtx->pSrcBlock, pInput->startRowIndex, pCtx, pInfo);",
          "content_same": false
        },
        {
          "line": 2969,
          "old_api": null,
          "new_api": "SET_VAL",
          "old_text": null,
          "new_text": "SET_VAL(pResInfo, numOfElems, 1)",
          "old_line_content": "  if (pInput->colDataAggIsSet && (pInput->pColumnDataAgg[0]->numOfNull == pInput->totalRows)) {",
          "new_line_content": "  SET_VAL(pResInfo, numOfElems, 1);",
          "content_same": false
        },
        {
          "line": 5021,
          "old_api": null,
          "new_api": "isnan",
          "old_text": null,
          "new_text": "isnan(result)",
          "old_line_content": "  }",
          "new_line_content": "      if (isinf(result) || isnan(result)) {",
          "content_same": false
        },
        {
          "line": 5022,
          "old_api": null,
          "new_api": "colDataAppendNULL",
          "old_text": null,
          "new_text": "colDataAppendNULL(pOutput, pos)",
          "old_line_content": "",
          "new_line_content": "        colDataAppendNULL(pOutput, pos);",
          "content_same": false
        },
        {
          "line": 2976,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  SColumnDataAgg* pColAgg = (pInput->colDataAggIsSet) ? pInput->pColumnDataAgg[0] : NULL;",
          "new_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 2977,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "",
          "new_line_content": "  SFirstLastRes*       pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 5024,
          "old_api": null,
          "new_api": "colDataAppend",
          "old_text": null,
          "new_text": "colDataAppend(pOutput, pos, (char*)&result, false)",
          "old_line_content": "}",
          "new_line_content": "        colDataAppend(pOutput, pos, (char*)&result, false);",
          "content_same": false
        },
        {
          "line": 5029,
          "old_api": null,
          "new_api": "appendSelectivityValue",
          "old_text": null,
          "new_text": "appendSelectivityValue(pCtx, i, pos)",
          "old_line_content": "",
          "new_line_content": "        appendSelectivityValue(pCtx, i, pos);",
          "content_same": false
        },
        {
          "line": 2988,
          "old_api": null,
          "new_api": "ASSERT",
          "old_text": null,
          "new_text": "ASSERT(pInputCol->hasNull == true)",
          "old_line_content": "        continue;",
          "new_line_content": "    ASSERT(pInputCol->hasNull == true);",
          "content_same": false
        },
        {
          "line": 2990,
          "old_api": null,
          "new_api": "firstlastSaveTupleData",
          "old_text": null,
          "new_text": "firstlastSaveTupleData(pCtx->pSrcBlock, pInput->startRowIndex, pCtx, pInfo)",
          "old_line_content": "",
          "new_line_content": "    firstlastSaveTupleData(pCtx->pSrcBlock, pInput->startRowIndex, pCtx, pInfo);",
          "content_same": false
        },
        {
          "line": 2997,
          "old_api": null,
          "new_api": "getRowPTs",
          "old_text": null,
          "new_text": "getRowPTs(pInput->pPTS, pInput->totalRows - 1)",
          "old_line_content": "      }",
          "new_line_content": "  TSKEY endKey = getRowPTs(pInput->pPTS, pInput->totalRows - 1);",
          "content_same": false
        },
        {
          "line": 5046,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "    return false;",
          "new_line_content": "  SSampleInfo*         pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 3005,
          "old_api": null,
          "new_api": "colDataIsNull",
          "old_text": null,
          "new_text": "colDataIsNull(pInputCol, pInput->totalRows, i, pColAgg)",
          "old_line_content": "      }",
          "new_line_content": "      if (pInputCol->hasNull && colDataIsNull(pInputCol, pInput->totalRows, i, pColAgg)) {",
          "content_same": false
        },
        {
          "line": 5055,
          "old_api": null,
          "new_api": "nodesListGetNode",
          "old_text": null,
          "new_text": "nodesListGetNode(pFunc->pParameterList, 0)",
          "old_line_content": "  pInfo->colType = pCtx->resDataInfo.type;",
          "new_line_content": "  SColumnNode* pCol = (SColumnNode*)nodesListGetNode(pFunc->pParameterList, 0);",
          "content_same": false
        },
        {
          "line": 5056,
          "old_api": null,
          "new_api": "nodesListGetNode",
          "old_text": null,
          "new_text": "nodesListGetNode(pFunc->pParameterList, 1)",
          "old_line_content": "  pInfo->colBytes = pCtx->resDataInfo.bytes;",
          "new_line_content": "  SValueNode*  pVal = (SValueNode*)nodesListGetNode(pFunc->pParameterList, 1);",
          "content_same": false
        },
        {
          "line": 3011,
          "old_api": null,
          "new_api": "colDataGetData",
          "old_text": null,
          "new_text": "colDataGetData(pInputCol, i)",
          "old_line_content": "      if (pResInfo->numOfRes == 0 || pInfo->ts < cts) {",
          "new_line_content": "      char* data = colDataGetData(pInputCol, i);",
          "content_same": false
        },
        {
          "line": 3014,
          "old_api": null,
          "new_api": "doSaveCurrentVal",
          "old_text": null,
          "new_text": "doSaveCurrentVal(pCtx, i, cts, type, data)",
          "old_line_content": "      break;",
          "new_line_content": "        doSaveCurrentVal(pCtx, i, cts, type, data);",
          "content_same": false
        },
        {
          "line": 5063,
          "old_api": null,
          "new_api": "functionSetup",
          "old_text": null,
          "new_text": "functionSetup(pCtx, pResultInfo)",
          "old_line_content": "}",
          "new_line_content": "  if (!functionSetup(pCtx, pResultInfo)) {",
          "content_same": false
        },
        {
          "line": 5067,
          "old_api": null,
          "new_api": "taosSafeRand",
          "old_text": null,
          "new_text": "taosSafeRand()",
          "old_line_content": "}",
          "new_line_content": "  taosSeedRand(taosSafeRand());",
          "content_same": false
        },
        {
          "line": 3021,
          "old_api": null,
          "new_api": "colDataIsNull",
          "old_text": null,
          "new_text": "colDataIsNull(pInputCol, pInput->totalRows, i, pColAgg)",
          "old_line_content": "    }",
          "new_line_content": "      if (pInputCol->hasNull && colDataIsNull(pInputCol, pInput->totalRows, i, pColAgg)) {",
          "content_same": false
        },
        {
          "line": 5069,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResultInfo)",
          "old_line_content": "static void doReservoirSample(SqlFunctionCtx* pCtx, SSampleInfo* pInfo, char* data, int32_t index) {",
          "new_line_content": "  SSampleInfo* pInfo = GET_ROWCELL_INTERBUF(pResultInfo);",
          "content_same": false
        },
        {
          "line": 3027,
          "old_api": null,
          "new_api": "colDataGetData",
          "old_text": null,
          "new_text": "colDataGetData(pInputCol, i)",
          "old_line_content": "    if (pResInfo->numOfRes == 0 || pInfo->ts < cts) {",
          "new_line_content": "      char* data = colDataGetData(pInputCol, i);",
          "content_same": false
        },
        {
          "line": 3030,
          "old_api": null,
          "new_api": "doSaveCurrentVal",
          "old_text": null,
          "new_text": "doSaveCurrentVal(pCtx, i, cts, type, data)",
          "old_line_content": "    }",
          "new_line_content": "        doSaveCurrentVal(pCtx, i, cts, type, data);",
          "content_same": false
        },
        {
          "line": 5084,
          "old_api": null,
          "new_api": "assignVal",
          "old_text": null,
          "new_text": "assignVal(pInfo->data + index * pInfo->colBytes, data, pInfo->colBytes, pInfo->colType)",
          "old_line_content": "    }",
          "new_line_content": "  assignVal(pInfo->data + index * pInfo->colBytes, data, pInfo->colBytes, pInfo->colType);",
          "content_same": false
        },
        {
          "line": 3043,
          "old_api": null,
          "new_api": "colDataGetData",
          "old_text": null,
          "new_text": "colDataGetData(pInputCol, i)",
          "old_line_content": "  if (pOutput->hasResult) {",
          "new_line_content": "    char* data = colDataGetData(pInputCol, i);",
          "content_same": false
        },
        {
          "line": 3044,
          "old_api": null,
          "new_api": "getRowPTs",
          "old_text": null,
          "new_text": "getRowPTs(pInput->pPTS, i)",
          "old_line_content": "    if (isFirst) {",
          "new_line_content": "    TSKEY cts = getRowPTs(pInput->pPTS, i);",
          "content_same": false
        },
        {
          "line": 5092,
          "old_api": null,
          "new_api": "saveTupleData",
          "old_text": null,
          "new_text": "saveTupleData(pCtx, index, pCtx->pSrcBlock, NULL)",
          "old_line_content": "  SInputColumnInfoData* pInput = &pCtx->input;",
          "new_line_content": "      pInfo->tuplePos[pInfo->numSampled] = saveTupleData(pCtx, index, pCtx->pSrcBlock, NULL);",
          "content_same": false
        },
        {
          "line": 3046,
          "old_api": null,
          "new_api": "doSaveCurrentVal",
          "old_text": null,
          "new_text": "doSaveCurrentVal(pCtx, i, cts, type, data)",
          "old_line_content": "        return;",
          "new_line_content": "      doSaveCurrentVal(pCtx, i, cts, type, data);",
          "content_same": false
        },
        {
          "line": 5098,
          "old_api": null,
          "new_api": "sampleAssignResult",
          "old_text": null,
          "new_text": "sampleAssignResult(pInfo, data, j)",
          "old_line_content": "    }",
          "new_line_content": "      sampleAssignResult(pInfo, data, j);",
          "content_same": false
        },
        {
          "line": 3053,
          "old_api": null,
          "new_api": "firstlastSaveTupleData",
          "old_text": null,
          "new_text": "firstlastSaveTupleData(pCtx->pSrcBlock, pInput->startRowIndex, pCtx, pInfo)",
          "old_line_content": "  }",
          "new_line_content": "    firstlastSaveTupleData(pCtx->pSrcBlock, pInput->startRowIndex, pCtx, pInfo);",
          "content_same": false
        },
        {
          "line": 3055,
          "old_api": null,
          "new_api": "SET_VAL",
          "old_text": null,
          "new_text": "SET_VAL(pResInfo, numOfElems, 1)",
          "old_line_content": "  pOutput->isNull = pInput->isNull;",
          "new_line_content": "  SET_VAL(pResInfo, numOfElems, 1);",
          "content_same": false
        },
        {
          "line": 5107,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  }",
          "new_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 5108,
          "old_api": null,
          "new_api": "getSampleOutputInfo",
          "old_text": null,
          "new_text": "getSampleOutputInfo(pCtx)",
          "old_line_content": "",
          "new_line_content": "  SSampleInfo*         pInfo = getSampleOutputInfo(pCtx);",
          "content_same": false
        },
        {
          "line": 5118,
          "old_api": null,
          "new_api": "colDataGetData",
          "old_text": null,
          "new_text": "colDataGetData(pInputCol, i)",
          "old_line_content": "",
          "new_line_content": "    char* data = colDataGetData(pInputCol, i);",
          "content_same": false
        },
        {
          "line": 5119,
          "old_api": null,
          "new_api": "doReservoirSample",
          "old_text": null,
          "new_text": "doReservoirSample(pCtx, pInfo, data, i)",
          "old_line_content": "  int32_t          slotId = pCtx->pExpr->base.resSchema.slotId;",
          "new_line_content": "    doReservoirSample(pCtx, pInfo, data, i);",
          "content_same": false
        },
        {
          "line": 5123,
          "old_api": null,
          "new_api": "saveTupleData",
          "old_text": null,
          "new_text": "saveTupleData(pCtx, pInput->startRowIndex, pCtx->pSrcBlock, NULL)",
          "old_line_content": "  if (pInfo->numSampled == 0) {",
          "new_line_content": "    pInfo->nullTuplePos = saveTupleData(pCtx, pInput->startRowIndex, pCtx->pSrcBlock, NULL);",
          "content_same": false
        },
        {
          "line": 5127,
          "old_api": null,
          "new_api": "SET_VAL",
          "old_text": null,
          "new_text": "SET_VAL(pResInfo, pInfo->numSampled, pInfo->numSampled)",
          "old_line_content": "  }",
          "new_line_content": "  SET_VAL(pResInfo, pInfo->numSampled, pInfo->numSampled);",
          "content_same": false
        },
        {
          "line": 5132,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "",
          "new_line_content": "  SResultRowEntryInfo* pEntryInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 3086,
          "old_api": null,
          "new_api": "ASSERT",
          "old_text": null,
          "new_text": "ASSERT(pCol->info.type == TSDB_DATA_TYPE_BINARY)",
          "old_line_content": "}",
          "new_line_content": "  ASSERT(pCol->info.type == TSDB_DATA_TYPE_BINARY);",
          "content_same": false
        },
        {
          "line": 5134,
          "old_api": null,
          "new_api": "getSampleOutputInfo",
          "old_text": null,
          "new_text": "getSampleOutputInfo(pCtx)",
          "old_line_content": "}",
          "new_line_content": "  SSampleInfo* pInfo = getSampleOutputInfo(pCtx);",
          "content_same": false
        },
        {
          "line": 5138,
          "old_api": null,
          "new_api": "taosArrayGet",
          "old_text": null,
          "new_text": "taosArrayGet(pBlock->pDataBlock, slotId)",
          "old_line_content": "#if 0",
          "new_line_content": "  SColumnInfoData* pCol = taosArrayGet(pBlock->pDataBlock, slotId);",
          "content_same": false
        },
        {
          "line": 5142,
          "old_api": null,
          "new_api": "colDataAppendNULL",
          "old_text": null,
          "new_text": "colDataAppendNULL(pCol, currentRow)",
          "old_line_content": "  pEnv->calcMemSize = sizeof(STailInfo) + numOfPoints * (POINTER_BYTES + sizeof(STailItem) + pCol->node.resType.bytes);",
          "new_line_content": "    colDataAppendNULL(pCol, currentRow);",
          "content_same": false
        },
        {
          "line": 3095,
          "old_api": null,
          "new_api": "varDataVal",
          "old_text": null,
          "new_text": "varDataVal(data)",
          "old_line_content": "",
          "new_line_content": "    SFirstLastRes* pInputInfo = (SFirstLastRes*)varDataVal(data);",
          "content_same": false
        },
        {
          "line": 5143,
          "old_api": null,
          "new_api": "setSelectivityValue",
          "old_text": null,
          "new_text": "setSelectivityValue(pCtx, pBlock, &pInfo->nullTuplePos, currentRow)",
          "old_line_content": "#endif",
          "new_line_content": "    setSelectivityValue(pCtx, pBlock, &pInfo->nullTuplePos, currentRow);",
          "content_same": false
        },
        {
          "line": 5147,
          "old_api": null,
          "new_api": "colDataAppend",
          "old_text": null,
          "new_text": "colDataAppend(pCol, currentRow + i, pInfo->data + i * pInfo->colBytes, false)",
          "old_line_content": "bool tailFunctionSetup(SqlFunctionCtx* pCtx, SResultRowEntryInfo* pResultInfo) {",
          "new_line_content": "    colDataAppend(pCol, currentRow + i, pInfo->data + i * pInfo->colBytes, false);",
          "content_same": false
        },
        {
          "line": 5148,
          "old_api": null,
          "new_api": "setSelectivityValue",
          "old_text": null,
          "new_text": "setSelectivityValue(pCtx, pBlock, &pInfo->tuplePos[i], currentRow + i)",
          "old_line_content": "#if 0",
          "new_line_content": "    setSelectivityValue(pCtx, pBlock, &pInfo->tuplePos[i], currentRow + i);",
          "content_same": false
        },
        {
          "line": 3102,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  // handle selectivity",
          "new_line_content": "  SET_VAL(GET_RES_INFO(pCtx), numOfElems, 1);",
          "content_same": false
        },
        {
          "line": 3106,
          "old_api": null,
          "new_api": "firstLastFunctionMergeImpl",
          "old_text": null,
          "new_text": "firstLastFunctionMergeImpl(pCtx, true)",
          "old_line_content": "}",
          "new_line_content": "int32_t firstFunctionMerge(SqlFunctionCtx* pCtx) { return firstLastFunctionMergeImpl(pCtx, true); }",
          "content_same": false
        },
        {
          "line": 3108,
          "old_api": null,
          "new_api": "firstLastFunctionMergeImpl",
          "old_text": null,
          "new_text": "firstLastFunctionMergeImpl(pCtx, false)",
          "old_line_content": "int32_t firstLastPartialFinalize(SqlFunctionCtx* pCtx, SSDataBlock* pBlock) {",
          "new_line_content": "int32_t lastFunctionMerge(SqlFunctionCtx* pCtx) { return firstLastFunctionMergeImpl(pCtx, false); }",
          "content_same": false
        },
        {
          "line": 5157,
          "old_api": null,
          "new_api": "nodesListGetNode",
          "old_text": null,
          "new_text": "nodesListGetNode(pFunc->pParameterList, 0)",
          "old_line_content": "    pInfo->offset = pCtx->param[2].param.i;",
          "new_line_content": "  SColumnNode* pCol = (SColumnNode*)nodesListGetNode(pFunc->pParameterList, 0);",
          "content_same": false
        },
        {
          "line": 5158,
          "old_api": null,
          "new_api": "nodesListGetNode",
          "old_text": null,
          "new_text": "nodesListGetNode(pFunc->pParameterList, 1)",
          "old_line_content": "  } else {",
          "new_line_content": "  SValueNode*  pVal = (SValueNode*)nodesListGetNode(pFunc->pParameterList, 1);",
          "content_same": false
        },
        {
          "line": 3114,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  // todo check for failure",
          "new_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 3117,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "",
          "new_line_content": "  SFirstLastRes* pRes = GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 5167,
          "old_api": null,
          "new_api": "functionSetup",
          "old_text": null,
          "new_text": "functionSetup(pCtx, pResultInfo)",
          "old_line_content": "",
          "new_line_content": "  if (!functionSetup(pCtx, pResultInfo)) {",
          "content_same": false
        },
        {
          "line": 5171,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResultInfo)",
          "old_line_content": "  size_t unitSize = sizeof(STailItem) + pInfo->colBytes;",
          "new_line_content": "  STailInfo* pInfo = GET_ROWCELL_INTERBUF(pResultInfo);",
          "content_same": false
        },
        {
          "line": 3127,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  return 1;",
          "new_line_content": "  SResultRowEntryInfo* pEntryInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 3128,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pEntryInfo)",
          "old_line_content": "}",
          "new_line_content": "  SFirstLastRes*       pRes = GET_ROWCELL_INTERBUF(pEntryInfo);",
          "content_same": false
        },
        {
          "line": 3130,
          "old_api": null,
          "new_api": "getFirstLastInfoSize",
          "old_text": null,
          "new_text": "getFirstLastInfoSize(pRes->bytes)",
          "old_line_content": "// todo rewrite:",
          "new_line_content": "  int32_t resultBytes = getFirstLastInfoSize(pRes->bytes);",
          "content_same": false
        },
        {
          "line": 3134,
          "old_api": null,
          "new_api": "varDataVal",
          "old_text": null,
          "new_text": "varDataVal(res)",
          "old_line_content": "  int32_t              bytes = pDBuf->bytes;",
          "new_line_content": "  memcpy(varDataVal(res), pRes, resultBytes);",
          "content_same": false
        },
        {
          "line": 3139,
          "old_api": null,
          "new_api": "taosArrayGet",
          "old_text": null,
          "new_text": "taosArrayGet(pBlock->pDataBlock, slotId)",
          "old_line_content": "  if (pSResInfo->numOfRes != 0 && (pDResInfo->numOfRes == 0 || pDBuf->ts < pSBuf->ts)) {",
          "new_line_content": "  SColumnInfoData* pCol = taosArrayGet(pBlock->pDataBlock, slotId);",
          "content_same": false
        },
        {
          "line": 3141,
          "old_api": null,
          "new_api": "colDataAppend",
          "old_text": null,
          "new_text": "colDataAppend(pCol, pBlock->info.rows, res, false)",
          "old_line_content": "    pDBuf->ts = pSBuf->ts;",
          "new_line_content": "  colDataAppend(pCol, pBlock->info.rows, res, false);",
          "content_same": false
        },
        {
          "line": 3142,
          "old_api": null,
          "new_api": "setSelectivityValue",
          "old_text": null,
          "new_text": "setSelectivityValue(pCtx, pBlock, &pRes->pos, pBlock->info.rows)",
          "old_line_content": "    pDResInfo->numOfRes = 1;",
          "new_line_content": "  setSelectivityValue(pCtx, pBlock, &pRes->pos, pBlock->info.rows);",
          "content_same": false
        },
        {
          "line": 3144,
          "old_api": null,
          "new_api": "taosMemoryFree",
          "old_text": null,
          "new_text": "taosMemoryFree(res)",
          "old_line_content": "  return TSDB_CODE_SUCCESS;",
          "new_line_content": "  taosMemoryFree(res);",
          "content_same": false
        },
        {
          "line": 3150,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pDestCtx)",
          "old_line_content": "",
          "new_line_content": "  SResultRowEntryInfo* pDResInfo = GET_RES_INFO(pDestCtx);",
          "content_same": false
        },
        {
          "line": 3154,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pSourceCtx)",
          "old_line_content": "    pInfo->isNull = false;",
          "new_line_content": "  SResultRowEntryInfo* pSResInfo = GET_RES_INFO(pSourceCtx);",
          "content_same": false
        },
        {
          "line": 3155,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pSResInfo)",
          "old_line_content": "",
          "new_line_content": "  SFirstLastRes*       pSBuf = GET_ROWCELL_INTERBUF(pSResInfo);",
          "content_same": false
        },
        {
          "line": 3158,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(pDBuf->buf, pSBuf->buf, bytes)",
          "old_line_content": "    }",
          "new_line_content": "    memcpy(pDBuf->buf, pSBuf->buf, bytes);",
          "content_same": false
        },
        {
          "line": 5206,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(pItem->data, data, colBytes)",
          "old_line_content": "  } else if (pList[0]->timestamp < ts) {",
          "new_line_content": "    memcpy(pItem->data, data, colBytes);",
          "content_same": false
        },
        {
          "line": 3169,
          "old_api": null,
          "new_api": "colDataIsNull_s",
          "old_text": null,
          "new_text": "colDataIsNull_s(pInputCol, rowIndex)",
          "old_line_content": "int32_t lastRowFunction(SqlFunctionCtx* pCtx) {",
          "new_line_content": "  if (colDataIsNull_s(pInputCol, rowIndex)) {",
          "content_same": false
        },
        {
          "line": 5221,
          "old_api": null,
          "new_api": "tailAssignResult",
          "old_text": null,
          "new_text": "tailAssignResult(pList[pInfo->numAdded], data, pInfo->colBytes, ts, isNull)",
          "old_line_content": "  SColumnInfoData* pInputCol = pInput->pData[0];",
          "new_line_content": "    tailAssignResult(pList[pInfo->numAdded], data, pInfo->colBytes, ts, isNull);",
          "content_same": false
        },
        {
          "line": 3174,
          "old_api": null,
          "new_api": "IS_VAR_DATA_TYPE",
          "old_text": null,
          "new_text": "IS_VAR_DATA_TYPE(pInputCol->info.type)",
          "old_line_content": "",
          "new_line_content": "    if (IS_VAR_DATA_TYPE(pInputCol->info.type)) {",
          "content_same": false
        },
        {
          "line": 3175,
          "old_api": null,
          "new_api": "varDataTLen",
          "old_text": null,
          "new_text": "varDataTLen(pData)",
          "old_line_content": "  SInputColumnInfoData* pInput = &pCtx->input;",
          "new_line_content": "      pInfo->bytes = varDataTLen(pData);",
          "content_same": false
        },
        {
          "line": 5222,
          "old_api": null,
          "new_api": "taosheapsort",
          "old_text": null,
          "new_text": "taosheapsort((void*)pList, sizeof(STailItem**), pInfo->numAdded + 1, NULL, tailCompFn, 0)",
          "old_line_content": "  SColumnInfoData* pOutput = (SColumnInfoData*)pCtx->pOutput;",
          "new_line_content": "    taosheapsort((void*)pList, sizeof(STailItem**), pInfo->numAdded + 1, NULL, tailCompFn, 0);",
          "content_same": false
        },
        {
          "line": 5225,
          "old_api": null,
          "new_api": "tailAssignResult",
          "old_text": null,
          "new_text": "tailAssignResult(pList[0], data, pInfo->colBytes, ts, isNull)",
          "old_line_content": "  if (pInfo->offset >= pInput->numOfRows) {",
          "new_line_content": "    tailAssignResult(pList[0], data, pInfo->colBytes, ts, isNull);",
          "content_same": false
        },
        {
          "line": 3178,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(pInfo->buf, pData, pInfo->bytes)",
          "old_line_content": "  int32_t bytes = pInputCol->info.bytes;",
          "new_line_content": "    memcpy(pInfo->buf, pData, pInfo->bytes);",
          "content_same": false
        },
        {
          "line": 5226,
          "old_api": null,
          "new_api": "taosheapadjust",
          "old_text": null,
          "new_text": "taosheapadjust((void*)pList, sizeof(STailItem**), 0, pInfo->numOfPoints - 1, NULL, tailCompFn, NULL, 0)",
          "old_line_content": "    return 0;",
          "new_line_content": "    taosheapadjust((void*)pList, sizeof(STailItem**), 0, pInfo->numOfPoints - 1, NULL, tailCompFn, NULL, 0);",
          "content_same": false
        },
        {
          "line": 5233,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  }",
          "new_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 5234,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "",
          "new_line_content": "  STailInfo*           pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 3190,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "    for (int32_t i = pInput->numOfRows + pInput->startRowIndex - 1; i >= pInput->startRowIndex; --i) {",
          "new_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 5246,
          "old_api": null,
          "new_api": "TMIN",
          "old_text": null,
          "new_text": "TMIN(pInfo->numOfPoints, pInput->numOfRows - pInfo->offset)",
          "old_line_content": "",
          "new_line_content": "    pInfo->numOfPoints = TMIN(pInfo->numOfPoints, pInput->numOfRows - pInfo->offset);",
          "content_same": false
        },
        {
          "line": 3199,
          "old_api": null,
          "new_api": "getRowPTs",
          "old_text": null,
          "new_text": "getRowPTs(pInput->pPTS, 0)",
          "old_line_content": "      break;",
          "new_line_content": "  TSKEY startKey = getRowPTs(pInput->pPTS, 0);",
          "content_same": false
        },
        {
          "line": 3200,
          "old_api": null,
          "new_api": "getRowPTs",
          "old_text": null,
          "new_text": "getRowPTs(pInput->pPTS, pInput->totalRows - 1)",
          "old_line_content": "    }",
          "new_line_content": "  TSKEY endKey = getRowPTs(pInput->pPTS, pInput->totalRows - 1);",
          "content_same": false
        },
        {
          "line": 5249,
          "old_api": null,
          "new_api": "colDataGetData",
          "old_text": null,
          "new_text": "colDataGetData(pInputCol, i)",
          "old_line_content": "  return 0;",
          "new_line_content": "    char* data = colDataGetData(pInputCol, i);",
          "content_same": false
        },
        {
          "line": 5250,
          "old_api": null,
          "new_api": "colDataIsNull_s",
          "old_text": null,
          "new_text": "colDataIsNull_s(pInputCol, i)",
          "old_line_content": "}",
          "new_line_content": "    doTailAdd(pInfo, data, tsList[i], colDataIsNull_s(pInputCol, i));",
          "content_same": false
        },
        {
          "line": 5253,
          "old_api": null,
          "new_api": "taosqsort",
          "old_text": null,
          "new_text": "taosqsort(pInfo->pItems, pInfo->numOfPoints, POINTER_BYTES, NULL, tailCompFn)",
          "old_line_content": "#if 0",
          "new_line_content": "  taosqsort(pInfo->pItems, pInfo->numOfPoints, POINTER_BYTES, NULL, tailCompFn);",
          "content_same": false
        },
        {
          "line": 3209,
          "old_api": null,
          "new_api": "colDataGetData",
          "old_text": null,
          "new_text": "colDataGetData(pInputCol, i)",
          "old_line_content": "      }",
          "new_line_content": "      char* data = colDataGetData(pInputCol, i);",
          "content_same": false
        },
        {
          "line": 3210,
          "old_api": null,
          "new_api": "getRowPTs",
          "old_text": null,
          "new_text": "getRowPTs(pInput->pPTS, i)",
          "old_line_content": "      break;",
          "new_line_content": "      TSKEY cts = getRowPTs(pInput->pPTS, i);",
          "content_same": false
        },
        {
          "line": 5259,
          "old_api": null,
          "new_api": "colDataAppendNULL",
          "old_text": null,
          "new_text": "colDataAppendNULL(pOutput, pos)",
          "old_line_content": "  int32_t slotId = pCtx->pExpr->base.resSchema.slotId;",
          "new_line_content": "      colDataAppendNULL(pOutput, pos);",
          "content_same": false
        },
        {
          "line": 3214,
          "old_api": null,
          "new_api": "doSaveLastrow",
          "old_text": null,
          "new_text": "doSaveLastrow(pCtx, data, i, cts, pInfo)",
          "old_line_content": "  for (int32_t i = pInput->startRowIndex; i < pInput->numOfRows + pInput->startRowIndex; ++i) {",
          "new_line_content": "        doSaveLastrow(pCtx, data, i, cts, pInfo);",
          "content_same": false
        },
        {
          "line": 3221,
          "old_api": null,
          "new_api": "colDataGetData",
          "old_text": null,
          "new_text": "colDataGetData(pInputCol, i)",
          "old_line_content": "      pResInfo->numOfRes = 1;",
          "new_line_content": "      char* data = colDataGetData(pInputCol, i);",
          "content_same": false
        },
        {
          "line": 3222,
          "old_api": null,
          "new_api": "getRowPTs",
          "old_text": null,
          "new_text": "getRowPTs(pInput->pPTS, i)",
          "old_line_content": "    }",
          "new_line_content": "      TSKEY cts = getRowPTs(pInput->pPTS, i);",
          "content_same": false
        },
        {
          "line": 5272,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "#endif",
          "new_line_content": "  SResultRowEntryInfo* pEntryInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 5273,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pEntryInfo)",
          "old_line_content": "  return 0;",
          "new_line_content": "  STailInfo*           pInfo = GET_ROWCELL_INTERBUF(pEntryInfo);",
          "content_same": false
        },
        {
          "line": 3226,
          "old_api": null,
          "new_api": "doSaveLastrow",
          "old_text": null,
          "new_text": "doSaveLastrow(pCtx, data, i, cts, pInfo)",
          "old_line_content": "",
          "new_line_content": "        doSaveLastrow(pCtx, data, i, cts, pInfo);",
          "content_same": false
        },
        {
          "line": 5279,
          "old_api": null,
          "new_api": "taosArrayGet",
          "old_text": null,
          "new_text": "taosArrayGet(pBlock->pDataBlock, slotId)",
          "old_line_content": "#endif",
          "new_line_content": "  SColumnInfoData* pCol = taosArrayGet(pBlock->pDataBlock, slotId);",
          "content_same": false
        },
        {
          "line": 3233,
          "old_api": null,
          "new_api": "colDataGetData",
          "old_text": null,
          "new_text": "colDataGetData(pInputCol, i)",
          "old_line_content": "  return true;",
          "new_line_content": "    char* data = colDataGetData(pInputCol, i);",
          "content_same": false
        },
        {
          "line": 3234,
          "old_api": null,
          "new_api": "getRowPTs",
          "old_text": null,
          "new_text": "getRowPTs(pInput->pPTS, i)",
          "old_line_content": "}",
          "new_line_content": "    TSKEY cts = getRowPTs(pInput->pPTS, i);",
          "content_same": false
        },
        {
          "line": 3238,
          "old_api": null,
          "new_api": "doSaveLastrow",
          "old_text": null,
          "new_text": "doSaveLastrow(pCtx, data, i, cts, pInfo)",
          "old_line_content": "    return false;",
          "new_line_content": "      doSaveLastrow(pCtx, data, i, cts, pInfo);",
          "content_same": false
        },
        {
          "line": 3245,
          "old_api": null,
          "new_api": "SET_VAL",
          "old_text": null,
          "new_text": "SET_VAL(pResInfo, numOfElems, 1)",
          "old_line_content": "    pDiffInfo->ignoreNegative = pCtx->param[1].param.i;  // TODO set correct param",
          "new_line_content": "  SET_VAL(pResInfo, numOfElems, 1);",
          "content_same": false
        },
        {
          "line": 3255,
          "old_api": null,
          "new_api": "functionSetup",
          "old_text": null,
          "new_text": "functionSetup(pCtx, pResInfo)",
          "old_line_content": "  switch (type) {",
          "new_line_content": "  if (!functionSetup(pCtx, pResInfo)) {",
          "content_same": false
        },
        {
          "line": 5303,
          "old_api": null,
          "new_api": "functionSetup",
          "old_text": null,
          "new_text": "functionSetup(pCtx, pResInfo)",
          "old_line_content": "static void doUniqueAdd(SUniqueInfo* pInfo, char* data, TSKEY ts, bool isNull) {",
          "new_line_content": "  if (!functionSetup(pCtx, pResInfo)) {",
          "content_same": false
        },
        {
          "line": 3259,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "    case TSDB_DATA_TYPE_TINYINT:",
          "new_line_content": "  SDiffInfo* pDiffInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 5307,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "    SUniqueItem* pItem = (SUniqueItem*)(pInfo->pItems + pInfo->numOfPoints * size);",
          "new_line_content": "  SUniqueInfo* pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 5312,
          "old_api": null,
          "new_api": "taosHashClear",
          "old_text": null,
          "new_text": "taosHashClear(pInfo->pHash)",
          "old_line_content": "      pInfo->hasNull = true;",
          "new_line_content": "    taosHashClear(pInfo->pHash);",
          "content_same": false
        },
        {
          "line": 5314,
          "old_api": null,
          "new_api": "taosGetDefaultHashFunction",
          "old_text": null,
          "new_text": "taosGetDefaultHashFunction(TSDB_DATA_TYPE_BINARY)",
          "old_line_content": "      pItem->timestamp = ts;",
          "new_line_content": "    pInfo->pHash = taosHashInit(64, taosGetDefaultHashFunction(TSDB_DATA_TYPE_BINARY), true, HASH_NO_LOCK);",
          "content_same": false
        },
        {
          "line": 5343,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(pItem->data, data, pInfo->colBytes)",
          "old_line_content": "  SColumnInfoData* pInputCol = pInput->pData[0];",
          "new_line_content": "    memcpy(pItem->data, data, pInfo->colBytes);",
          "content_same": false
        },
        {
          "line": 3297,
          "old_api": null,
          "new_api": "ASSERT",
          "old_text": null,
          "new_text": "ASSERT(0)",
          "old_line_content": "      break;",
          "new_line_content": "      ASSERT(0);",
          "content_same": false
        },
        {
          "line": 5345,
          "old_api": null,
          "new_api": "taosHashPut",
          "old_text": null,
          "new_text": "taosHashPut(pInfo->pHash, data, hashKeyBytes, (char*)pItem, sizeof(SUniqueItem*))",
          "old_line_content": "  SColumnInfoData* pOutput = (SColumnInfoData*)pCtx->pOutput;",
          "new_line_content": "    taosHashPut(pInfo->pHash, data, hashKeyBytes, (char*)pItem, sizeof(SUniqueItem*));",
          "content_same": false
        },
        {
          "line": 5355,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "    }",
          "new_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 5356,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "  }",
          "new_line_content": "  SUniqueInfo*         pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 3309,
          "old_api": null,
          "new_api": "colDataSetNull_f",
          "old_text": null,
          "new_text": "colDataSetNull_f(pOutput->nullbitmap, pos)",
          "old_line_content": "      break;",
          "new_line_content": "        colDataSetNull_f(pOutput->nullbitmap, pos);",
          "content_same": false
        },
        {
          "line": 3311,
          "old_api": null,
          "new_api": "colDataAppendInt64",
          "old_text": null,
          "new_text": "colDataAppendInt64(pOutput, pos, &delta)",
          "old_line_content": "    case TSDB_DATA_TYPE_SMALLINT: {",
          "new_line_content": "        colDataAppendInt64(pOutput, pos, &delta);",
          "content_same": false
        },
        {
          "line": 5367,
          "old_api": null,
          "new_api": "colDataGetData",
          "old_text": null,
          "new_text": "colDataGetData(pInputCol, i)",
          "old_line_content": "    }",
          "new_line_content": "    char* data = colDataGetData(pInputCol, i);",
          "content_same": false
        },
        {
          "line": 5368,
          "old_api": null,
          "new_api": "colDataIsNull_s",
          "old_text": null,
          "new_text": "colDataIsNull_s(pInputCol, i)",
          "old_line_content": "  }",
          "new_line_content": "    doUniqueAdd(pInfo, data, tsList[i], colDataIsNull_s(pInputCol, i));",
          "content_same": false
        },
        {
          "line": 3322,
          "old_api": null,
          "new_api": "colDataSetNull_f",
          "old_text": null,
          "new_text": "colDataSetNull_f(pOutput->nullbitmap, pos)",
          "old_line_content": "    case TSDB_DATA_TYPE_TIMESTAMP:",
          "new_line_content": "        colDataSetNull_f(pOutput->nullbitmap, pos);",
          "content_same": false
        },
        {
          "line": 5371,
          "old_api": null,
          "new_api": "taosHashCleanup",
          "old_text": null,
          "new_text": "taosHashCleanup(pInfo->pHash)",
          "old_line_content": "#endif",
          "new_line_content": "      taosHashCleanup(pInfo->pHash);",
          "content_same": false
        },
        {
          "line": 3324,
          "old_api": null,
          "new_api": "colDataAppendInt64",
          "old_text": null,
          "new_text": "colDataAppendInt64(pOutput, pos, &delta)",
          "old_line_content": "      int64_t v = *(int64_t*)pv;",
          "new_line_content": "        colDataAppendInt64(pOutput, pos, &delta);",
          "content_same": false
        },
        {
          "line": 5379,
          "old_api": null,
          "new_api": "colDataAppendNULL",
          "old_text": null,
          "new_text": "colDataAppendNULL(pOutput, i)",
          "old_line_content": "",
          "new_line_content": "      colDataAppendNULL(pOutput, i);",
          "content_same": false
        },
        {
          "line": 3333,
          "old_api": null,
          "new_api": "colDataSetNull_f",
          "old_text": null,
          "new_text": "colDataSetNull_f(pOutput->nullbitmap, pos)",
          "old_line_content": "    }",
          "new_line_content": "        colDataSetNull_f(pOutput->nullbitmap, pos);",
          "content_same": false
        },
        {
          "line": 3335,
          "old_api": null,
          "new_api": "colDataAppendInt64",
          "old_text": null,
          "new_text": "colDataAppendInt64(pOutput, pos, &delta)",
          "old_line_content": "      float  v = *(float*)pv;",
          "new_line_content": "        colDataAppendInt64(pOutput, pos, &delta);",
          "content_same": false
        },
        {
          "line": 5384,
          "old_api": null,
          "new_api": "colDataAppendInt64",
          "old_text": null,
          "new_text": "colDataAppendInt64(pTsOutput, i, &pItem->timestamp)",
          "old_line_content": "",
          "new_line_content": "      colDataAppendInt64(pTsOutput, i, &pItem->timestamp);",
          "content_same": false
        },
        {
          "line": 3345,
          "old_api": null,
          "new_api": "colDataSetNull_f",
          "old_text": null,
          "new_text": "colDataSetNull_f(pOutput->nullbitmap, pos)",
          "old_line_content": "    case TSDB_DATA_TYPE_DOUBLE: {",
          "new_line_content": "        colDataSetNull_f(pOutput->nullbitmap, pos);",
          "content_same": false
        },
        {
          "line": 3347,
          "old_api": null,
          "new_api": "colDataAppendInt64",
          "old_text": null,
          "new_text": "colDataAppendInt64(pOutput, pos, &delta)",
          "old_line_content": "      double delta = factor * (v - pDiffInfo->prev.d64);                               // direct previous may be null",
          "new_line_content": "        colDataAppendInt64(pOutput, pos, &delta);",
          "content_same": false
        },
        {
          "line": 3355,
          "old_api": null,
          "new_api": "isnan",
          "old_text": null,
          "new_text": "isnan(delta)",
          "old_line_content": "    }",
          "new_line_content": "      if ((delta < 0 && pDiffInfo->ignoreNegative) || isinf(delta) || isnan(delta)) {  // check for overflow",
          "content_same": false
        },
        {
          "line": 3356,
          "old_api": null,
          "new_api": "colDataSetNull_f",
          "old_text": null,
          "new_text": "colDataSetNull_f(pOutput->nullbitmap, pos)",
          "old_line_content": "    default:",
          "new_line_content": "        colDataSetNull_f(pOutput->nullbitmap, pos);",
          "content_same": false
        },
        {
          "line": 3358,
          "old_api": null,
          "new_api": "colDataAppendDouble",
          "old_text": null,
          "new_text": "colDataAppendDouble(pOutput, pos, &delta)",
          "old_line_content": "  }",
          "new_line_content": "        colDataAppendDouble(pOutput, pos, &delta);",
          "content_same": false
        },
        {
          "line": 5408,
          "old_api": null,
          "new_api": "taosHashClear",
          "old_text": null,
          "new_text": "taosHashClear(pInfo->pHash)",
          "old_line_content": "  } else {",
          "new_line_content": "    taosHashClear(pInfo->pHash);",
          "content_same": false
        },
        {
          "line": 5410,
          "old_api": null,
          "new_api": "taosGetDefaultHashFunction",
          "old_text": null,
          "new_text": "taosGetDefaultHashFunction(TSDB_DATA_TYPE_BINARY)",
          "old_line_content": "  }",
          "new_line_content": "    pInfo->pHash = taosHashInit(64, taosGetDefaultHashFunction(TSDB_DATA_TYPE_BINARY), true, HASH_NO_LOCK);",
          "content_same": false
        },
        {
          "line": 3366,
          "old_api": null,
          "new_api": "isnan",
          "old_text": null,
          "new_text": "isnan(delta)",
          "old_line_content": "",
          "new_line_content": "      if ((delta < 0 && pDiffInfo->ignoreNegative) || isinf(delta) || isnan(delta)) {  // check for overflow",
          "content_same": false
        },
        {
          "line": 3367,
          "old_api": null,
          "new_api": "colDataSetNull_f",
          "old_text": null,
          "new_text": "colDataSetNull_f(pOutput->nullbitmap, pos)",
          "old_line_content": "  SColumnInfoData* pInputCol = pInput->pData[0];",
          "new_line_content": "        colDataSetNull_f(pOutput->nullbitmap, pos);",
          "content_same": false
        },
        {
          "line": 5416,
          "old_api": null,
          "new_api": "varDataTLen",
          "old_text": null,
          "new_text": "varDataTLen(data)",
          "old_line_content": "",
          "new_line_content": "  int32_t     hashKeyBytes = IS_STR_DATA_TYPE(pInfo->colType) ? varDataTLen(data) : pInfo->colBytes;",
          "content_same": false
        },
        {
          "line": 3369,
          "old_api": null,
          "new_api": "colDataAppendDouble",
          "old_text": null,
          "new_text": "colDataAppendDouble(pOutput, pos, &delta)",
          "old_line_content": "  int32_t numOfElems = 0;",
          "new_line_content": "        colDataAppendDouble(pOutput, pos, &delta);",
          "content_same": false
        },
        {
          "line": 5417,
          "old_api": null,
          "new_api": "taosHashGet",
          "old_text": null,
          "new_text": "taosHashGet(pInfo->pHash, data, hashKeyBytes)",
          "old_line_content": "  SInputColumnInfoData* pInput = &pCtx->input;",
          "new_line_content": "  SModeItem** pHashItem = taosHashGet(pInfo->pHash, data, hashKeyBytes);",
          "content_same": false
        },
        {
          "line": 5421,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(pItem->data, data, hashKeyBytes)",
          "old_line_content": "",
          "new_line_content": "    memcpy(pItem->data, data, hashKeyBytes);",
          "content_same": false
        },
        {
          "line": 3375,
          "old_api": null,
          "new_api": "ASSERT",
          "old_text": null,
          "new_text": "ASSERT(0)",
          "old_line_content": "    for (int32_t i = pInput->startRowIndex; i < pInput->numOfRows + pInput->startRowIndex; i += 1) {",
          "new_line_content": "      ASSERT(0);",
          "content_same": false
        },
        {
          "line": 5424,
          "old_api": null,
          "new_api": "taosHashPut",
          "old_text": null,
          "new_text": "taosHashPut(pInfo->pHash, data, hashKeyBytes, &pItem, sizeof(SModeItem*))",
          "old_line_content": "  for (int32_t i = pInput->startRowIndex; i < pInput->numOfRows + pInput->startRowIndex; ++i) {",
          "new_line_content": "    taosHashPut(pInfo->pHash, data, hashKeyBytes, &pItem, sizeof(SModeItem*));",
          "content_same": false
        },
        {
          "line": 3381,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "",
          "new_line_content": "  SDiffInfo*           pDiffInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 5432,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "",
          "new_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 5433,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "    if (sizeof(SModeInfo) + pInfo->numOfPoints * (sizeof(SModeItem) + pInfo->colBytes) >= MODE_MAX_RESULT_SIZE) {",
          "new_line_content": "  SModeInfo*           pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 5443,
          "old_api": null,
          "new_api": "colDataGetData",
          "old_text": null,
          "new_text": "colDataGetData(pInputCol, i)",
          "old_line_content": "",
          "new_line_content": "    char* data = colDataGetData(pInputCol, i);",
          "content_same": false
        },
        {
          "line": 3396,
          "old_api": null,
          "new_api": "colDataIsNull_f",
          "old_text": null,
          "new_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "old_line_content": "        numOfElems++;",
          "new_line_content": "      if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "content_same": false
        },
        {
          "line": 5444,
          "old_api": null,
          "new_api": "colDataIsNull_s",
          "old_text": null,
          "new_text": "colDataIsNull_s(pInputCol, i)",
          "old_line_content": "int32_t modeFinalize(SqlFunctionCtx* pCtx, SSDataBlock* pBlock) {",
          "new_line_content": "    if (colDataIsNull_s(pInputCol, i)) {",
          "content_same": false
        },
        {
          "line": 5449,
          "old_api": null,
          "new_api": "doModeAdd",
          "old_text": null,
          "new_text": "doModeAdd(pInfo, data)",
          "old_line_content": "  int32_t              currentRow = pBlock->info.rows;",
          "new_line_content": "    doModeAdd(pInfo, data);",
          "content_same": false
        },
        {
          "line": 5452,
          "old_api": null,
          "new_api": "taosHashCleanup",
          "old_text": null,
          "new_text": "taosHashCleanup(pInfo->pHash)",
          "old_line_content": "  int32_t maxCount = 0;",
          "new_line_content": "      taosHashCleanup(pInfo->pHash);",
          "content_same": false
        },
        {
          "line": 3405,
          "old_api": null,
          "new_api": "colDataGetData",
          "old_text": null,
          "new_text": "colDataGetData(pInputCol, i)",
          "old_line_content": "      int32_t pos = startOffset + numOfElems;",
          "new_line_content": "      char* pv = colDataGetData(pInputCol, i);",
          "content_same": false
        },
        {
          "line": 3408,
          "old_api": null,
          "new_api": "doHandleDiff",
          "old_text": null,
          "new_text": "doHandleDiff(pDiffInfo, pInputCol->info.type, pv, pOutput, pos, pCtx->order)",
          "old_line_content": "        if (pDiffInfo->includeNull) {",
          "new_line_content": "        doHandleDiff(pDiffInfo, pInputCol->info.type, pv, pOutput, pos, pCtx->order);",
          "content_same": false
        },
        {
          "line": 5457,
          "old_api": null,
          "new_api": "SET_VAL",
          "old_text": null,
          "new_text": "SET_VAL(pResInfo, numOfElems, 1)",
          "old_line_content": "      resIndex = i;",
          "new_line_content": "  SET_VAL(pResInfo, numOfElems, 1);",
          "content_same": false
        },
        {
          "line": 3411,
          "old_api": null,
          "new_api": "appendSelectivityValue",
          "old_text": null,
          "new_text": "appendSelectivityValue(pCtx, i, pos)",
          "old_line_content": "          numOfElems += 1;",
          "new_line_content": "          appendSelectivityValue(pCtx, i, pos);",
          "content_same": false
        },
        {
          "line": 5464,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "  } else {",
          "new_line_content": "  SModeInfo*           pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 5466,
          "old_api": null,
          "new_api": "taosArrayGet",
          "old_text": null,
          "new_text": "taosArrayGet(pBlock->pDataBlock, slotId)",
          "old_line_content": "  }",
          "new_line_content": "  SColumnInfoData*     pCol = taosArrayGet(pBlock->pDataBlock, slotId);",
          "content_same": false
        },
        {
          "line": 3425,
          "old_api": null,
          "new_api": "colDataIsNull_f",
          "old_text": null,
          "new_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "old_line_content": "",
          "new_line_content": "      if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "content_same": false
        },
        {
          "line": 3427,
          "old_api": null,
          "new_api": "colDataSetNull_f",
          "old_text": null,
          "new_text": "colDataSetNull_f(pOutput->nullbitmap, pos)",
          "old_line_content": "      } else {",
          "new_line_content": "          colDataSetNull_f(pOutput->nullbitmap, pos);",
          "content_same": false
        },
        {
          "line": 5481,
          "old_api": null,
          "new_api": "colDataAppend",
          "old_text": null,
          "new_text": "colDataAppend(pCol, currentRow, pResItem->data, false)",
          "old_line_content": "  }",
          "new_line_content": "    colDataAppend(pCol, currentRow, pResItem->data, false);",
          "content_same": false
        },
        {
          "line": 3434,
          "old_api": null,
          "new_api": "colDataGetData",
          "old_text": null,
          "new_text": "colDataGetData(pInputCol, i)",
          "old_line_content": "",
          "new_line_content": "      char* pv = colDataGetData(pInputCol, i);",
          "content_same": false
        },
        {
          "line": 3438,
          "old_api": null,
          "new_api": "doHandleDiff",
          "old_text": null,
          "new_text": "doHandleDiff(pDiffInfo, pInputCol->info.type, pv, pOutput, pos, pCtx->order)",
          "old_line_content": "",
          "new_line_content": "        doHandleDiff(pDiffInfo, pInputCol->info.type, pv, pOutput, pos, pCtx->order);",
          "content_same": false
        },
        {
          "line": 5486,
          "old_api": null,
          "new_api": "taosHashCleanup",
          "old_text": null,
          "new_text": "taosHashCleanup(pInfo->pHash)",
          "old_line_content": "  pInfo->win = TSWINDOW_INITIALIZER;",
          "new_line_content": "  taosHashCleanup(pInfo->pHash);",
          "content_same": false
        },
        {
          "line": 3441,
          "old_api": null,
          "new_api": "appendSelectivityValue",
          "old_text": null,
          "new_text": "appendSelectivityValue(pCtx, i, pos)",
          "old_line_content": "bool getTopBotFuncEnv(SFunctionNode* pFunc, SFuncExecEnv* pEnv) {",
          "new_line_content": "          appendSelectivityValue(pCtx, i, pos);",
          "content_same": false
        },
        {
          "line": 3446,
          "old_api": null,
          "new_api": "doSetPrevVal",
          "old_text": null,
          "new_text": "doSetPrevVal(pDiffInfo, pInputCol->info.type, pv)",
          "old_line_content": "",
          "new_line_content": "        doSetPrevVal(pDiffInfo, pInputCol->info.type, pv);",
          "content_same": false
        },
        {
          "line": 5497,
          "old_api": null,
          "new_api": "functionSetup",
          "old_text": null,
          "new_text": "functionSetup(pCtx, pResultInfo)",
          "old_line_content": "  return val;",
          "new_line_content": "  if (!functionSetup(pCtx, pResultInfo)) {",
          "content_same": false
        },
        {
          "line": 5501,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  SInputColumnInfoData* pInput = &pCtx->input;",
          "new_line_content": "  STwaInfo* pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "content_same": false
        },
        {
          "line": 3460,
          "old_api": null,
          "new_api": "nodesListGetNode",
          "old_text": null,
          "new_text": "nodesListGetNode(pFunc->pParameterList, 1)",
          "old_line_content": "}",
          "new_line_content": "  SValueNode* pkNode = (SValueNode*)nodesListGetNode(pFunc->pParameterList, 1);",
          "content_same": false
        },
        {
          "line": 3466,
          "old_api": null,
          "new_api": "functionSetup",
          "old_text": null,
          "new_text": "functionSetup(pCtx, pResInfo)",
          "old_line_content": "",
          "new_line_content": "  if (!functionSetup(pCtx, pResInfo)) {",
          "content_same": false
        },
        {
          "line": 3470,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "static void doAddIntoResult(SqlFunctionCtx* pCtx, void* pData, int32_t rowIndex, SSDataBlock* pSrcBlock, uint16_t type,",
          "new_line_content": "  STopBotRes*           pRes = GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 5526,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "      }",
          "new_line_content": "  STwaInfo* pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 3481,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "",
          "new_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 5542,
          "old_api": null,
          "new_api": "colDataIsNull_f",
          "old_text": null,
          "new_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "old_line_content": "      }",
          "new_line_content": "      if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "content_same": false
        },
        {
          "line": 3495,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "",
          "new_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 3500,
          "old_api": null,
          "new_api": "getTopBotOutputInfo",
          "old_text": null,
          "new_text": "getTopBotOutputInfo(pCtx)",
          "old_line_content": "  return TSDB_CODE_SUCCESS;",
          "new_line_content": "  STopBotRes* pRes = getTopBotOutputInfo(pCtx);",
          "content_same": false
        },
        {
          "line": 5548,
          "old_api": null,
          "new_api": "colDataGetData",
          "old_text": null,
          "new_text": "colDataGetData(pInputCol, i)",
          "old_line_content": "      pInfo->win.skey = last->key;",
          "new_line_content": "      GET_TYPED_DATA(last->val, double, pInputCol->info.type, colDataGetData(pInputCol, i));",
          "content_same": false
        },
        {
          "line": 5550,
          "old_api": null,
          "new_api": "twa_get_area",
          "old_text": null,
          "new_text": "twa_get_area(pCtx->start, *last)",
          "old_line_content": "      i += 1;",
          "new_line_content": "      pInfo->dOutput += twa_get_area(pCtx->start, *last);",
          "content_same": false
        },
        {
          "line": 5558,
          "old_api": null,
          "new_api": "colDataIsNull_f",
          "old_text": null,
          "new_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "old_line_content": "  switch (pInputCol->info.type) {",
          "new_line_content": "      if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "content_same": false
        },
        {
          "line": 3511,
          "old_api": null,
          "new_api": "doAddIntoResult",
          "old_text": null,
          "new_text": "doAddIntoResult(pCtx, data, i, pCtx->pSrcBlock, pRes->type, pInput->uid, pResInfo, true)",
          "old_line_content": "  pRes->type = pInput->pData[0]->info.type;",
          "new_line_content": "    doAddIntoResult(pCtx, data, i, pCtx->pSrcBlock, pRes->type, pInput->uid, pResInfo, true);",
          "content_same": false
        },
        {
          "line": 5564,
          "old_api": null,
          "new_api": "colDataGetData",
          "old_text": null,
          "new_text": "colDataGetData(pInputCol, i)",
          "old_line_content": "        }",
          "new_line_content": "      GET_TYPED_DATA(last->val, double, pInputCol->info.type, colDataGetData(pInputCol, i));",
          "content_same": false
        },
        {
          "line": 3523,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "",
          "new_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 3528,
          "old_api": null,
          "new_api": "getTopBotOutputInfo",
          "old_text": null,
          "new_text": "getTopBotOutputInfo(pCtx)",
          "old_line_content": "",
          "new_line_content": "  STopBotRes* pRes = getTopBotOutputInfo(pCtx);",
          "content_same": false
        },
        {
          "line": 5578,
          "old_api": null,
          "new_api": "colDataGetData",
          "old_text": null,
          "new_text": "colDataGetData(pInputCol, 0)",
          "old_line_content": "    case TSDB_DATA_TYPE_SMALLINT: {",
          "new_line_content": "      int8_t* val = (int8_t*)colDataGetData(pInputCol, 0);",
          "content_same": false
        },
        {
          "line": 5580,
          "old_api": null,
          "new_api": "colDataIsNull_f",
          "old_text": null,
          "new_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "old_line_content": "      for (; i < pInput->numOfRows + pInput->startRowIndex; i += 1) {",
          "new_line_content": "        if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "content_same": false
        },
        {
          "line": 3533,
          "old_api": null,
          "new_api": "colDataIsNull_f",
          "old_text": null,
          "new_text": "colDataIsNull_f(pCol->nullbitmap, i)",
          "old_line_content": "  uint16_t type = *(uint16_t*)param;",
          "new_line_content": "    if (pCol->hasNull && colDataIsNull_f(pCol->nullbitmap, i)) {",
          "content_same": false
        },
        {
          "line": 5585,
          "old_api": null,
          "new_api": "INIT_INTP_POINT",
          "old_text": null,
          "new_text": "INIT_INTP_POINT(st, tsList[i], val[i])",
          "old_line_content": "",
          "new_line_content": "        INIT_INTP_POINT(st, tsList[i], val[i]);",
          "content_same": false
        },
        {
          "line": 3539,
          "old_api": null,
          "new_api": "doAddIntoResult",
          "old_text": null,
          "new_text": "doAddIntoResult(pCtx, data, i, pCtx->pSrcBlock, pRes->type, pInput->uid, pResInfo, false)",
          "old_line_content": "    if (val1->v.i == val2->v.i) {",
          "new_line_content": "    doAddIntoResult(pCtx, data, i, pCtx->pSrcBlock, pRes->type, pInput->uid, pResInfo, false);",
          "content_same": false
        },
        {
          "line": 5590,
          "old_api": null,
          "new_api": "twa_get_area",
          "old_text": null,
          "new_text": "twa_get_area(pInfo->p, st)",
          "old_line_content": "",
          "new_line_content": "        pInfo->dOutput += twa_get_area(pInfo->p, st);",
          "content_same": false
        },
        {
          "line": 3543,
          "old_api": null,
          "new_api": "saveTupleData",
          "old_text": null,
          "new_text": "saveTupleData(pCtx, pInput->startRowIndex, pCtx->pSrcBlock, NULL)",
          "old_line_content": "    return (val1->v.i > val2->v.i) ? 1 : -1;",
          "new_line_content": "    pRes->nullTuplePos = saveTupleData(pCtx, pInput->startRowIndex, pCtx->pSrcBlock, NULL);",
          "content_same": false
        },
        {
          "line": 3556,
          "old_api": null,
          "new_api": "IS_SIGNED_NUMERIC_TYPE",
          "old_text": null,
          "new_text": "IS_SIGNED_NUMERIC_TYPE(type)",
          "old_line_content": "  return (val1->v.d > val2->v.d) ? 1 : -1;",
          "new_line_content": "  if (IS_SIGNED_NUMERIC_TYPE(type)) {",
          "content_same": false
        },
        {
          "line": 3562,
          "old_api": null,
          "new_api": "IS_UNSIGNED_NUMERIC_TYPE",
          "old_text": null,
          "new_text": "IS_UNSIGNED_NUMERIC_TYPE(type)",
          "old_line_content": "",
          "new_line_content": "  } else if (IS_UNSIGNED_NUMERIC_TYPE(type)) {",
          "content_same": false
        },
        {
          "line": 3579,
          "old_api": null,
          "new_api": "getTopBotOutputInfo",
          "old_text": null,
          "new_text": "getTopBotOutputInfo(pCtx)",
          "old_line_content": "#ifdef BUF_PAGE_DEBUG",
          "new_line_content": "  STopBotRes* pRes = getTopBotOutputInfo(pCtx);",
          "content_same": false
        },
        {
          "line": 3582,
          "old_api": null,
          "new_api": "taosVariantCreateFromBinary",
          "old_text": null,
          "new_text": "taosVariantCreateFromBinary(&val, pData, tDataTypes[type].bytes, type)",
          "old_line_content": "#endif",
          "new_line_content": "  taosVariantCreateFromBinary(&val, pData, tDataTypes[type].bytes, type);",
          "content_same": false
        },
        {
          "line": 3595,
          "old_api": null,
          "new_api": "saveTupleData",
          "old_text": null,
          "new_text": "saveTupleData(pCtx, rowIndex, pSrcBlock, NULL)",
          "old_line_content": "      STopBotResItem* pItem = &pItems[0];",
          "new_line_content": "      pItem->tuplePos = saveTupleData(pCtx, rowIndex, pSrcBlock, NULL);",
          "content_same": false
        },
        {
          "line": 3598,
          "old_api": null,
          "new_api": "qDebug",
          "old_text": null,
          "new_text": "qDebug(\"page_saveTuple i:%d, item:%p,pageId:%d, offset:%d\\n\", pEntryInfo->numOfRes, pItem, pItem->tuplePos.pageId,\n           pItem->tuplePos.offset)",
          "old_line_content": "",
          "new_line_content": "    qDebug(\"page_saveTuple i:%d, item:%p,pageId:%d, offset:%d\\n\", pEntryInfo->numOfRes, pItem, pItem->tuplePos.pageId,",
          "content_same": false
        },
        {
          "line": 3603,
          "old_api": null,
          "new_api": "taosheapsort",
          "old_text": null,
          "new_text": "taosheapsort((void*)pItems, sizeof(STopBotResItem), pEntryInfo->numOfRes, (const void*)&type, topBotResComparFn,\n                 !isTopQuery)",
          "old_line_content": "#ifdef BUF_PAGE_DEBUG",
          "new_line_content": "    taosheapsort((void*)pItems, sizeof(STopBotResItem), pEntryInfo->numOfRes, (const void*)&type, topBotResComparFn,",
          "content_same": false
        },
        {
          "line": 3607,
          "old_api": null,
          "new_api": "IS_UNSIGNED_NUMERIC_TYPE",
          "old_text": null,
          "new_text": "IS_UNSIGNED_NUMERIC_TYPE(type)",
          "old_line_content": "                     topBotResComparFn, NULL, !isTopQuery);",
          "new_line_content": "                        (IS_UNSIGNED_NUMERIC_TYPE(type) && val.u > pItems[0].v.u) ||",
          "content_same": false
        },
        {
          "line": 3608,
          "old_api": null,
          "new_api": "IS_FLOAT_TYPE",
          "old_text": null,
          "new_text": "IS_FLOAT_TYPE(type)",
          "old_line_content": "    }",
          "new_line_content": "                        (IS_FLOAT_TYPE(type) && val.d > pItems[0].v.d))) ||",
          "content_same": false
        },
        {
          "line": 3609,
          "old_api": null,
          "new_api": "IS_SIGNED_NUMERIC_TYPE",
          "old_text": null,
          "new_text": "IS_SIGNED_NUMERIC_TYPE(type)",
          "old_line_content": "  }",
          "new_line_content": "        (!isTopQuery && ((IS_SIGNED_NUMERIC_TYPE(type) && val.i < pItems[0].v.i) ||",
          "content_same": false
        },
        {
          "line": 3610,
          "old_api": null,
          "new_api": "IS_UNSIGNED_NUMERIC_TYPE",
          "old_text": null,
          "new_text": "IS_UNSIGNED_NUMERIC_TYPE(type)",
          "old_line_content": "}",
          "new_line_content": "                         (IS_UNSIGNED_NUMERIC_TYPE(type) && val.u < pItems[0].v.u) ||",
          "content_same": false
        },
        {
          "line": 3611,
          "old_api": null,
          "new_api": "IS_FLOAT_TYPE",
          "old_text": null,
          "new_text": "IS_FLOAT_TYPE(type)",
          "old_line_content": "",
          "new_line_content": "                         (IS_FLOAT_TYPE(type) && val.d < pItems[0].v.d)))) {",
          "content_same": false
        },
        {
          "line": 1566,
          "old_api": null,
          "new_api": "updateTupleData",
          "old_text": null,
          "new_text": "updateTupleData(pCtx, i, pCtx->pSrcBlock, &pBuf->tuplePos)",
          "old_line_content": "          }",
          "new_line_content": "            updateTupleData(pCtx, i, pCtx->pSrcBlock, &pBuf->tuplePos);",
          "content_same": false
        },
        {
          "line": 3619,
          "old_api": null,
          "new_api": "updateTupleData",
          "old_text": null,
          "new_text": "updateTupleData(pCtx, rowIndex, pSrcBlock, &pItem->tuplePos)",
          "old_line_content": "                         char* buf) {",
          "new_line_content": "        updateTupleData(pCtx, rowIndex, pSrcBlock, &pItem->tuplePos);",
          "content_same": false
        },
        {
          "line": 3622,
          "old_api": null,
          "new_api": "qDebug",
          "old_text": null,
          "new_text": "qDebug(\"page_copyTuple pageId:%d, offset:%d\", pItem->tuplePos.pageId, pItem->tuplePos.offset)",
          "old_line_content": "",
          "new_line_content": "      qDebug(\"page_copyTuple pageId:%d, offset:%d\", pItem->tuplePos.pageId, pItem->tuplePos.offset);",
          "content_same": false
        },
        {
          "line": 1575,
          "old_api": null,
          "new_api": "updateTupleData",
          "old_text": null,
          "new_text": "updateTupleData(pCtx, i, pCtx->pSrcBlock, &pBuf->tuplePos)",
          "old_line_content": "  if (numOfElems == 0 && pCtx->subsidiaries.num > 0 && !pBuf->nullTupleSaved) {",
          "new_line_content": "              updateTupleData(pCtx, i, pCtx->pSrcBlock, &pBuf->tuplePos);",
          "content_same": false
        },
        {
          "line": 3624,
          "old_api": null,
          "new_api": "taosheapadjust",
          "old_text": null,
          "new_text": "taosheapadjust((void*)pItems, sizeof(STopBotResItem), 0, pEntryInfo->numOfRes - 1, (const void*)&type,\n                     topBotResComparFn, NULL, !isTopQuery)",
          "old_line_content": "  for (int32_t i = 0; i < pSubsidiaryies->num; ++i) {",
          "new_line_content": "      taosheapadjust((void*)pItems, sizeof(STopBotResItem), 0, pEntryInfo->numOfRes - 1, (const void*)&type,",
          "content_same": false
        },
        {
          "line": 1582,
          "old_api": null,
          "new_api": "updateTupleData",
          "old_text": null,
          "new_text": "updateTupleData(pCtx, i, pCtx->pSrcBlock, &pBuf->tuplePos)",
          "old_line_content": "int32_t minFunction(SqlFunctionCtx* pCtx) {",
          "new_line_content": "              updateTupleData(pCtx, i, pCtx->pSrcBlock, &pBuf->tuplePos);",
          "content_same": false
        },
        {
          "line": 1594,
          "old_api": null,
          "new_api": "saveTupleData",
          "old_text": null,
          "new_text": "saveTupleData(pCtx, pInput->startRowIndex, pCtx->pSrcBlock, NULL)",
          "old_line_content": "static void setNullSelectivityValue(SqlFunctionCtx* pCtx, SSDataBlock* pBlock, int32_t rowIndex);",
          "new_line_content": "    pBuf->nullTuplePos = saveTupleData(pCtx, pInput->startRowIndex, pCtx->pSrcBlock, NULL);",
          "content_same": false
        },
        {
          "line": 3648,
          "old_api": null,
          "new_api": "taosArrayGet",
          "old_text": null,
          "new_text": "taosArrayGet(pSrcBlock->pDataBlock, srcSlotId)",
          "old_line_content": "",
          "new_line_content": "    SColumnInfoData* pCol = taosArrayGet(pSrcBlock->pDataBlock, srcSlotId);",
          "content_same": false
        },
        {
          "line": 3649,
          "old_api": null,
          "new_api": "colDataIsNull_s",
          "old_text": null,
          "new_text": "colDataIsNull_s(pCol, rowIndex)",
          "old_line_content": "static STuplePos doSaveTupleData(SSerializeDataHandle* pHandle, const void* pBuf, size_t length,",
          "new_line_content": "    if ((nullList[i] = colDataIsNull_s(pCol, rowIndex)) == true) {",
          "content_same": false
        },
        {
          "line": 1602,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "",
          "new_line_content": "  SET_VAL(GET_RES_INFO(pCtx), numOfElems, 1);",
          "content_same": false
        },
        {
          "line": 3654,
          "old_api": null,
          "new_api": "colDataGetData",
          "old_text": null,
          "new_text": "colDataGetData(pCol, rowIndex)",
          "old_line_content": "",
          "new_line_content": "    char* p = colDataGetData(pCol, rowIndex);",
          "content_same": false
        },
        {
          "line": 1607,
          "old_api": null,
          "new_api": "doMinMaxHelper",
          "old_text": null,
          "new_text": "doMinMaxHelper(pCtx, 0)",
          "old_line_content": "  pEntryInfo->isNullRes = (pEntryInfo->numOfRes == 0) ? 1 : 0;",
          "new_line_content": "  int32_t numOfElems = doMinMaxHelper(pCtx, 0);",
          "content_same": false
        },
        {
          "line": 1608,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "",
          "new_line_content": "  SET_VAL(GET_RES_INFO(pCtx), numOfElems, 1);",
          "content_same": false
        },
        {
          "line": 3655,
          "old_api": null,
          "new_api": "IS_VAR_DATA_TYPE",
          "old_text": null,
          "new_text": "IS_VAR_DATA_TYPE(pCol->info.type)",
          "old_line_content": "    if (pHandle->currentPage == -1) {",
          "new_line_content": "    if (IS_VAR_DATA_TYPE(pCol->info.type)) {",
          "content_same": false
        },
        {
          "line": 3658,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(pStart + offset, p, pCol->info.bytes)",
          "old_line_content": "    } else {",
          "new_line_content": "      memcpy(pStart + offset, p, pCol->info.bytes);",
          "content_same": false
        },
        {
          "line": 1624,
          "old_api": null,
          "new_api": "taosArrayGet",
          "old_text": null,
          "new_text": "taosArrayGet(pBlock->pDataBlock, slotId)",
          "old_line_content": "",
          "new_line_content": "  SColumnInfoData* pCol = taosArrayGet(pBlock->pDataBlock, slotId);",
          "content_same": false
        },
        {
          "line": 3674,
          "old_api": null,
          "new_api": "getNewBufPage",
          "old_text": null,
          "new_text": "getNewBufPage(pHandle->pBuf, &pHandle->currentPage)",
          "old_line_content": "  } else {",
          "new_line_content": "      pPage = getNewBufPage(pHandle->pBuf, &pHandle->currentPage);",
          "content_same": false
        },
        {
          "line": 1629,
          "old_api": null,
          "new_api": "colDataAppend",
          "old_text": null,
          "new_text": "colDataAppend(pCol, currentRow, (const char*)&v, pEntryInfo->isNullRes)",
          "old_line_content": "",
          "new_line_content": "    colDataAppend(pCol, currentRow, (const char*)&v, pEntryInfo->isNullRes);",
          "content_same": false
        },
        {
          "line": 3678,
          "old_api": null,
          "new_api": "getBufPageSize",
          "old_text": null,
          "new_text": "getBufPageSize(pHandle->pBuf)",
          "old_line_content": "    }",
          "new_line_content": "      if (pPage->num + length > getBufPageSize(pHandle->pBuf)) {",
          "content_same": false
        },
        {
          "line": 1631,
          "old_api": null,
          "new_api": "colDataAppend",
          "old_text": null,
          "new_text": "colDataAppend(pCol, currentRow, (const char*)&pRes->v, pEntryInfo->isNullRes)",
          "old_line_content": "    SqlFunctionCtx* pc = pCtx->subsidiaries.pCtx[j];",
          "new_line_content": "    colDataAppend(pCol, currentRow, (const char*)&pRes->v, pEntryInfo->isNullRes);",
          "content_same": false
        },
        {
          "line": 3680,
          "old_api": null,
          "new_api": "releaseBufPage",
          "old_text": null,
          "new_text": "releaseBufPage(pHandle->pBuf, pPage)",
          "old_line_content": "  }",
          "new_line_content": "        releaseBufPage(pHandle->pBuf, pPage);",
          "content_same": false
        },
        {
          "line": 3681,
          "old_api": null,
          "new_api": "getNewBufPage",
          "old_text": null,
          "new_text": "getNewBufPage(pHandle->pBuf, &pHandle->currentPage)",
          "old_line_content": "",
          "new_line_content": "        pPage = getNewBufPage(pHandle->pBuf, &pHandle->currentPage);",
          "content_same": false
        },
        {
          "line": 1637,
          "old_api": null,
          "new_api": "setSelectivityValue",
          "old_text": null,
          "new_text": "setSelectivityValue(pCtx, pBlock, &pRes->nullTuplePos, currentRow)",
          "old_line_content": "}",
          "new_line_content": "    setSelectivityValue(pCtx, pBlock, &pRes->nullTuplePos, currentRow);",
          "content_same": false
        },
        {
          "line": 3687,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(pPage->data + pPage->num, pBuf, length)",
          "old_line_content": "    int32_t rowLen = 0;",
          "new_line_content": "    memcpy(pPage->data + pPage->num, pBuf, length);",
          "content_same": false
        },
        {
          "line": 3690,
          "old_api": null,
          "new_api": "setBufPageDirty",
          "old_text": null,
          "new_text": "setBufPageDirty(pPage, true)",
          "old_line_content": "      rowLen += pc->pExpr->base.resSchema.bytes;",
          "new_line_content": "    setBufPageDirty(pPage, true);",
          "content_same": false
        },
        {
          "line": 3691,
          "old_api": null,
          "new_api": "releaseBufPage",
          "old_text": null,
          "new_text": "releaseBufPage(pHandle->pBuf, pPage)",
          "old_line_content": "    }",
          "new_line_content": "    releaseBufPage(pHandle->pBuf, pPage);",
          "content_same": false
        },
        {
          "line": 5741,
          "old_api": null,
          "new_api": "colDataGetData",
          "old_text": null,
          "new_text": "colDataGetData(pInputCol, 0)",
          "old_line_content": "    default:",
          "new_line_content": "      uint64_t* val = (uint64_t*)colDataGetData(pInputCol, 0);",
          "content_same": false
        },
        {
          "line": 3695,
          "old_api": null,
          "new_api": "ASSERT",
          "old_text": null,
          "new_text": "ASSERT(0)",
          "old_line_content": "  }",
          "new_line_content": "      ASSERT(0);",
          "content_same": false
        },
        {
          "line": 5743,
          "old_api": null,
          "new_api": "colDataIsNull_f",
          "old_text": null,
          "new_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "old_line_content": "  }",
          "new_line_content": "        if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "content_same": false
        },
        {
          "line": 1652,
          "old_api": null,
          "new_api": "taosArrayGet",
          "old_text": null,
          "new_text": "taosArrayGet(pBlock->pDataBlock, dstSlotId)",
          "old_line_content": "      // todo set the offset value to optimize the performance.",
          "new_line_content": "    SColumnInfoData* pDstCol = taosArrayGet(pBlock->pDataBlock, dstSlotId);",
          "content_same": false
        },
        {
          "line": 1653,
          "old_api": null,
          "new_api": "colDataAppendNULL",
          "old_text": null,
          "new_text": "colDataAppendNULL(pDstCol, rowIndex)",
          "old_line_content": "      for (int32_t j = 0; j < numOfCols; ++j) {",
          "new_line_content": "    colDataAppendNULL(pDstCol, rowIndex);",
          "content_same": false
        },
        {
          "line": 5748,
          "old_api": null,
          "new_api": "INIT_INTP_POINT",
          "old_text": null,
          "new_text": "INIT_INTP_POINT(st, tsList[i], val[i])",
          "old_line_content": "    pInfo->p = pCtx->end;",
          "new_line_content": "        INIT_INTP_POINT(st, tsList[i], val[i]);",
          "content_same": false
        },
        {
          "line": 5753,
          "old_api": null,
          "new_api": "twa_get_area",
          "old_text": null,
          "new_text": "twa_get_area(pInfo->p, st)",
          "old_line_content": "",
          "new_line_content": "        pInfo->dOutput += twa_get_area(pInfo->p, st);",
          "content_same": false
        },
        {
          "line": 3712,
          "old_api": null,
          "new_api": "taosMemoryMalloc",
          "old_text": null,
          "new_text": "taosMemoryMalloc(pCtx->subsidiaries.rowLen)",
          "old_line_content": "}",
          "new_line_content": "    pCtx->subsidiaries.buf = taosMemoryMalloc(pCtx->subsidiaries.rowLen);",
          "content_same": false
        },
        {
          "line": 1665,
          "old_api": null,
          "new_api": "loadTupleData",
          "old_text": null,
          "new_text": "loadTupleData(pCtx, pTuplePos)",
          "old_line_content": "      }",
          "new_line_content": "      const char* p = loadTupleData(pCtx, pTuplePos);",
          "content_same": false
        },
        {
          "line": 5760,
          "old_api": null,
          "new_api": "ASSERT",
          "old_text": null,
          "new_text": "ASSERT(0)",
          "old_line_content": "  return TSDB_CODE_SUCCESS;",
          "new_line_content": "      ASSERT(0);",
          "content_same": false
        },
        {
          "line": 5765,
          "old_api": null,
          "new_api": "twa_get_area",
          "old_text": null,
          "new_text": "twa_get_area(pInfo->p, pCtx->end)",
          "old_line_content": " * by next input data. The TWA function only applies to each table, so no merge procedure",
          "new_line_content": "    pInfo->dOutput += twa_get_area(pInfo->p, pCtx->end);",
          "content_same": false
        },
        {
          "line": 3721,
          "old_api": null,
          "new_api": "getBufPage",
          "old_text": null,
          "new_text": "getBufPage(pHandle->pBuf, pPos->pageId)",
          "old_line_content": "  if (pHandle->pBuf != NULL) {",
          "new_line_content": "    SFilePage* pPage = getBufPage(pHandle->pBuf, pPos->pageId);",
          "content_same": false
        },
        {
          "line": 1675,
          "old_api": null,
          "new_api": "taosArrayGet",
          "old_text": null,
          "new_text": "taosArrayGet(pBlock->pDataBlock, dstSlotId)",
          "old_line_content": "}",
          "new_line_content": "        SColumnInfoData* pDstCol = taosArrayGet(pBlock->pDataBlock, dstSlotId);",
          "content_same": false
        },
        {
          "line": 1676,
          "old_api": null,
          "new_api": "ASSERT",
          "old_text": null,
          "new_text": "ASSERT(pc->pExpr->base.resSchema.bytes == pDstCol->info.bytes)",
          "old_line_content": "",
          "new_line_content": "        ASSERT(pc->pExpr->base.resSchema.bytes == pDstCol->info.bytes);",
          "content_same": false
        },
        {
          "line": 3723,
          "old_api": null,
          "new_api": "setBufPageDirty",
          "old_text": null,
          "new_text": "setBufPageDirty(pPage, true)",
          "old_line_content": "    char*      p = pPage->data + pPos->offset;",
          "new_line_content": "    setBufPageDirty(pPage, true);",
          "content_same": false
        },
        {
          "line": 1678,
          "old_api": null,
          "new_api": "colDataAppendNULL",
          "old_text": null,
          "new_text": "colDataAppendNULL(pDstCol, rowIndex)",
          "old_line_content": "// from intermediate disk based buf page",
          "new_line_content": "          colDataAppendNULL(pDstCol, rowIndex);",
          "content_same": false
        },
        {
          "line": 3726,
          "old_api": null,
          "new_api": "streamStateFuncPut",
          "old_text": null,
          "new_text": "streamStateFuncPut(pHandle->pState, &pPos->streamTupleKey, pBuf, length)",
          "old_line_content": "  } else {",
          "new_line_content": "    streamStateFuncPut(pHandle->pState, &pPos->streamTupleKey, pBuf, length);",
          "content_same": false
        },
        {
          "line": 1680,
          "old_api": null,
          "new_api": "colDataAppend",
          "old_text": null,
          "new_text": "colDataAppend(pDstCol, rowIndex, pStart, false)",
          "old_line_content": "  if (pCtx->subsidiaries.num <= 0) {",
          "new_line_content": "          colDataAppend(pDstCol, rowIndex, pStart, false);",
          "content_same": false
        },
        {
          "line": 3733,
          "old_api": null,
          "new_api": "serializeTupleData",
          "old_text": null,
          "new_text": "serializeTupleData(pSrcBlock, rowIndex, &pCtx->subsidiaries, pCtx->subsidiaries.buf)",
          "old_line_content": "",
          "new_line_content": "  char* buf = serializeTupleData(pSrcBlock, rowIndex, &pCtx->subsidiaries, pCtx->subsidiaries.buf);",
          "content_same": false
        },
        {
          "line": 3734,
          "old_api": null,
          "new_api": "doUpdateTupleData",
          "old_text": null,
          "new_text": "doUpdateTupleData(&pCtx->saveHandle, buf, pCtx->subsidiaries.rowLen, pPos)",
          "old_line_content": "static const char* loadTupleData(SqlFunctionCtx* pCtx, const STuplePos* pPos) {",
          "new_line_content": "  doUpdateTupleData(&pCtx->saveHandle, buf, pCtx->subsidiaries.rowLen, pPos);",
          "content_same": false
        },
        {
          "line": 3742,
          "old_api": null,
          "new_api": "releaseBufPage",
          "old_text": null,
          "new_text": "releaseBufPage(pHandle->pBuf, pPage)",
          "old_line_content": "  int16_t type = pCtx->pExpr->base.resSchema.type;",
          "new_line_content": "    releaseBufPage(pHandle->pBuf, pPage);",
          "content_same": false
        },
        {
          "line": 3747,
          "old_api": null,
          "new_api": "streamStateFuncGet",
          "old_text": null,
          "new_text": "streamStateFuncGet(pHandle->pState, &pPos->streamTupleKey, &value, &vLen)",
          "old_line_content": "  // todo assign the tag value and the corresponding row data",
          "new_line_content": "    streamStateFuncGet(pHandle->pState, &pPos->streamTupleKey, &value, &vLen);",
          "content_same": false
        },
        {
          "line": 5795,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "bool blockDistSetup(SqlFunctionCtx* pCtx, SResultRowEntryInfo* pResultInfo) {",
          "new_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 5797,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "    return false;",
          "new_line_content": "  STwaInfo* pInfo = (STwaInfo*)GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 3753,
          "old_api": null,
          "new_api": "doLoadTupleData",
          "old_text": null,
          "new_text": "doLoadTupleData(&pCtx->saveHandle, pPos)",
          "old_line_content": "  }",
          "new_line_content": "  return doLoadTupleData(&pCtx->saveHandle, pPos);",
          "content_same": false
        },
        {
          "line": 1709,
          "old_api": null,
          "new_api": "taosArrayGet",
          "old_text": null,
          "new_text": "taosArrayGet(pCtx->pSrcBlock->pDataBlock, srcSlotId)",
          "old_line_content": "void replaceTupleData(STuplePos* pDestPos, STuplePos* pSourcePos) {",
          "new_line_content": "    SColumnInfoData* pSrcCol = taosArrayGet(pCtx->pSrcBlock->pDataBlock, srcSlotId);",
          "content_same": false
        },
        {
          "line": 3757,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "      float v = pItem->v.d;",
          "new_line_content": "  SResultRowEntryInfo* pEntryInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 1711,
          "old_api": null,
          "new_api": "colDataGetData",
          "old_text": null,
          "new_text": "colDataGetData(pSrcCol, rowIndex)",
          "old_line_content": "  *pDestPos = *pSourcePos;",
          "new_line_content": "    char* pData = colDataGetData(pSrcCol, rowIndex);",
          "content_same": false
        },
        {
          "line": 5810,
          "old_api": null,
          "new_api": "functionFinalize",
          "old_text": null,
          "new_text": "functionFinalize(pCtx, pBlock)",
          "old_line_content": "",
          "new_line_content": "  return functionFinalize(pCtx, pBlock);",
          "content_same": false
        },
        {
          "line": 1717,
          "old_api": null,
          "new_api": "ASSERT",
          "old_text": null,
          "new_text": "ASSERT(pc->pExpr->base.resSchema.bytes == pDstCol->info.bytes)",
          "old_line_content": "",
          "new_line_content": "    ASSERT(pc->pExpr->base.resSchema.bytes == pDstCol->info.bytes);",
          "content_same": false
        },
        {
          "line": 5814,
          "old_api": null,
          "new_api": "functionSetup",
          "old_text": null,
          "new_text": "functionSetup(pCtx, pResultInfo)",
          "old_line_content": "",
          "new_line_content": "  if (!functionSetup(pCtx, pResultInfo)) {",
          "content_same": false
        },
        {
          "line": 1720,
          "old_api": null,
          "new_api": "colDataAppendNULL",
          "old_text": null,
          "new_text": "colDataAppendNULL(pDstCol, pos)",
          "old_line_content": "  int16_t              type = pDBuf->type == TSDB_DATA_TYPE_NULL ? pSBuf->type : pDBuf->type;",
          "new_line_content": "      colDataAppendNULL(pDstCol, pos);",
          "content_same": false
        },
        {
          "line": 3768,
          "old_api": null,
          "new_api": "colDataAppendNULL",
          "old_text": null,
          "new_text": "colDataAppendNULL(pCol, currentRow)",
          "old_line_content": "  }",
          "new_line_content": "    colDataAppendNULL(pCol, currentRow);",
          "content_same": false
        },
        {
          "line": 1722,
          "old_api": null,
          "new_api": "colDataAppend",
          "old_text": null,
          "new_text": "colDataAppend(pDstCol, pos, pData, false)",
          "old_line_content": "    if (pSBuf->assign && ((((*(double*)&pDBuf->v) < (*(double*)&pSBuf->v)) ^ isMinFunc) || !pDBuf->assign)) {",
          "new_line_content": "      colDataAppend(pDstCol, pos, pData, false);",
          "content_same": false
        },
        {
          "line": 3769,
          "old_api": null,
          "new_api": "setSelectivityValue",
          "old_text": null,
          "new_text": "setSelectivityValue(pCtx, pBlock, &pRes->nullTuplePos, currentRow)",
          "old_line_content": "",
          "new_line_content": "    setSelectivityValue(pCtx, pBlock, &pRes->nullTuplePos, currentRow);",
          "content_same": false
        },
        {
          "line": 5818,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  pDistInfo->numOfBlocks += p1.numOfBlocks;",
          "new_line_content": "  STableBlockDistInfo* pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "content_same": false
        },
        {
          "line": 1728,
          "old_api": null,
          "new_api": "releaseSource",
          "old_text": null,
          "new_text": "releaseSource(pDestPos)",
          "old_line_content": "    if (pSBuf->assign && (((pDBuf->v < pSBuf->v) ^ isMinFunc) || !pDBuf->assign)) {",
          "new_line_content": "  releaseSource(pDestPos);",
          "content_same": false
        },
        {
          "line": 3776,
          "old_api": null,
          "new_api": "colDataAppend",
          "old_text": null,
          "new_text": "colDataAppend(pCol, currentRow, (const char*)&v, false)",
          "old_line_content": "  STopBotResItem*      pItems = pRes->pItems;",
          "new_line_content": "      colDataAppend(pCol, currentRow, (const char*)&v, false);",
          "content_same": false
        },
        {
          "line": 3778,
          "old_api": null,
          "new_api": "colDataAppend",
          "old_text": null,
          "new_text": "colDataAppend(pCol, currentRow, (const char*)&pItem->v.i, false)",
          "old_line_content": "",
          "new_line_content": "      colDataAppend(pCol, currentRow, (const char*)&pItem->v.i, false);",
          "content_same": false
        },
        {
          "line": 1733,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pDestCtx)",
          "old_line_content": "  }",
          "new_line_content": "  SResultRowEntryInfo* pDResInfo = GET_RES_INFO(pDestCtx);",
          "content_same": false
        },
        {
          "line": 3781,
          "old_api": null,
          "new_api": "qDebug",
          "old_text": null,
          "new_text": "qDebug(\"page_finalize i:%d,item:%p,pageId:%d, offset:%d\\n\", i, pItem, pItem->tuplePos.pageId,\n           pItem->tuplePos.offset)",
          "old_line_content": "    STopBotResItem* pItem = &pItems[pEntryInfo->numOfRes];",
          "new_line_content": "    qDebug(\"page_finalize i:%d,item:%p,pageId:%d, offset:%d\\n\", i, pItem, pItem->tuplePos.pageId,",
          "content_same": false
        },
        {
          "line": 5829,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "",
          "new_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 1736,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pSourceCtx)",
          "old_line_content": "  return TSDB_CODE_SUCCESS;",
          "new_line_content": "  SResultRowEntryInfo* pSResInfo = GET_RES_INFO(pSourceCtx);",
          "content_same": false
        },
        {
          "line": 1737,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pSResInfo)",
          "old_line_content": "}",
          "new_line_content": "  SMinmaxResInfo*      pSBuf = GET_ROWCELL_INTERBUF(pSResInfo);",
          "content_same": false
        },
        {
          "line": 3784,
          "old_api": null,
          "new_api": "setSelectivityValue",
          "old_text": null,
          "new_text": "setSelectivityValue(pCtx, pBlock, &pRes->pItems[i].tuplePos, currentRow)",
          "old_line_content": "    pItem->tuplePos.pageId = -1;",
          "new_line_content": "    setSelectivityValue(pCtx, pBlock, &pRes->pItems[i].tuplePos, currentRow);",
          "content_same": false
        },
        {
          "line": 1739,
          "old_api": null,
          "new_api": "IS_FLOAT_TYPE",
          "old_text": null,
          "new_text": "IS_FLOAT_TYPE(type)",
          "old_line_content": "int32_t minCombine(SqlFunctionCtx* pDestCtx, SqlFunctionCtx* pSourceCtx) {",
          "new_line_content": "  if (IS_FLOAT_TYPE(type)) {",
          "content_same": false
        },
        {
          "line": 5831,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "    pDistInfo->minRows = p1.minRows;",
          "new_line_content": "  STableBlockDistInfo* pDistInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 5834,
          "old_api": null,
          "new_api": "varDataLen",
          "old_text": null,
          "new_text": "varDataLen(pInputCol->pData)",
          "old_line_content": "    pDistInfo->maxRows = p1.maxRows;",
          "new_line_content": "  tDeserializeBlockDistInfo(varDataVal(pInputCol->pData), varDataLen(pInputCol->pData), &p1);",
          "content_same": false
        },
        {
          "line": 1742,
          "old_api": null,
          "new_api": "replaceTupleData",
          "old_text": null,
          "new_text": "replaceTupleData(&pDBuf->tuplePos, &pSBuf->tuplePos)",
          "old_line_content": "int32_t maxCombine(SqlFunctionCtx* pDestCtx, SqlFunctionCtx* pSourceCtx) {",
          "new_line_content": "      replaceTupleData(&pDBuf->tuplePos, &pSBuf->tuplePos);",
          "content_same": false
        },
        {
          "line": 1748,
          "old_api": null,
          "new_api": "replaceTupleData",
          "old_text": null,
          "new_text": "replaceTupleData(&pDBuf->tuplePos, &pSBuf->tuplePos)",
          "old_line_content": "bool getStddevFuncEnv(SFunctionNode* pFunc, SFuncExecEnv* pEnv) {",
          "new_line_content": "      replaceTupleData(&pDBuf->tuplePos, &pSBuf->tuplePos);",
          "content_same": false
        },
        {
          "line": 1752,
          "old_api": null,
          "new_api": "TMAX",
          "old_text": null,
          "new_text": "TMAX(pDResInfo->numOfRes, pSResInfo->numOfRes)",
          "old_line_content": "",
          "new_line_content": "  pDResInfo->numOfRes = TMAX(pDResInfo->numOfRes, pSResInfo->numOfRes);",
          "content_same": false
        },
        {
          "line": 3805,
          "old_api": null,
          "new_api": "taosheapsort",
          "old_text": null,
          "new_text": "taosheapsort((void*)pItems, sizeof(STopBotResItem), pEntryInfo->numOfRes, (const void*)&type, topBotResComparFn,\n                 !isTopQuery)",
          "old_line_content": "    }",
          "new_line_content": "    taosheapsort((void*)pItems, sizeof(STopBotResItem), pEntryInfo->numOfRes, (const void*)&type, topBotResComparFn,",
          "content_same": false
        },
        {
          "line": 5855,
          "old_api": null,
          "new_api": "tListLen",
          "old_text": null,
          "new_text": "tListLen(pDistInfo->blockRowsHisto)",
          "old_line_content": "",
          "new_line_content": "  for (int32_t i = 0; i < tListLen(pDistInfo->blockRowsHisto); ++i) {",
          "content_same": false
        },
        {
          "line": 3808,
          "old_api": null,
          "new_api": "IS_SIGNED_NUMERIC_TYPE",
          "old_text": null,
          "new_text": "IS_SIGNED_NUMERIC_TYPE(type)",
          "old_line_content": "",
          "new_line_content": "    if ((isTopQuery && ((IS_SIGNED_NUMERIC_TYPE(type) && pSourceItem->v.i > pItems[0].v.i) ||",
          "content_same": false
        },
        {
          "line": 1761,
          "old_api": null,
          "new_api": "minMaxCombine",
          "old_text": null,
          "new_text": "minMaxCombine(pDestCtx, pSourceCtx, 0)",
          "old_line_content": "}",
          "new_line_content": "  return minMaxCombine(pDestCtx, pSourceCtx, 0);",
          "content_same": false
        },
        {
          "line": 3809,
          "old_api": null,
          "new_api": "IS_UNSIGNED_NUMERIC_TYPE",
          "old_text": null,
          "new_text": "IS_UNSIGNED_NUMERIC_TYPE(type)",
          "old_line_content": "int32_t topCombine(SqlFunctionCtx* pDestCtx, SqlFunctionCtx* pSourceCtx) {",
          "new_line_content": "                        (IS_UNSIGNED_NUMERIC_TYPE(type) && pSourceItem->v.u > pItems[0].v.u) ||",
          "content_same": false
        },
        {
          "line": 3812,
          "old_api": null,
          "new_api": "IS_UNSIGNED_NUMERIC_TYPE",
          "old_text": null,
          "new_text": "IS_UNSIGNED_NUMERIC_TYPE(type)",
          "old_line_content": "  int16_t              type = pSBuf->type;",
          "new_line_content": "                         (IS_UNSIGNED_NUMERIC_TYPE(type) && pSourceItem->v.u < pItems[0].v.u) ||",
          "content_same": false
        },
        {
          "line": 3813,
          "old_api": null,
          "new_api": "IS_FLOAT_TYPE",
          "old_text": null,
          "new_text": "IS_FLOAT_TYPE(type)",
          "old_line_content": "  for (int32_t i = 0; i < pSResInfo->numOfRes; i++) {",
          "new_line_content": "                         (IS_FLOAT_TYPE(type) && pSourceItem->v.d < pItems[0].v.d)))) {",
          "content_same": false
        },
        {
          "line": 5867,
          "old_api": null,
          "new_api": "tStartEncode",
          "old_text": null,
          "new_text": "tStartEncode(&encoder)",
          "old_line_content": "  }",
          "new_line_content": "  if (tStartEncode(&encoder) < 0) return -1;",
          "content_same": false
        },
        {
          "line": 1772,
          "old_api": null,
          "new_api": "functionSetup",
          "old_text": null,
          "new_text": "functionSetup(pCtx, pResultInfo)",
          "old_line_content": "",
          "new_line_content": "  if (!functionSetup(pCtx, pResultInfo)) {",
          "content_same": false
        },
        {
          "line": 5868,
          "old_api": null,
          "new_api": "tEncodeU32",
          "old_text": null,
          "new_text": "tEncodeU32(&encoder, pInfo->rowSize)",
          "old_line_content": "",
          "new_line_content": "  if (tEncodeU32(&encoder, pInfo->rowSize) < 0) return -1;",
          "content_same": false
        },
        {
          "line": 5870,
          "old_api": null,
          "new_api": "tEncodeU16",
          "old_text": null,
          "new_text": "tEncodeU16(&encoder, pInfo->numOfFiles)",
          "old_line_content": "",
          "new_line_content": "  if (tEncodeU16(&encoder, pInfo->numOfFiles) < 0) return -1;",
          "content_same": false
        },
        {
          "line": 5871,
          "old_api": null,
          "new_api": "tEncodeU32",
          "old_text": null,
          "new_text": "tEncodeU32(&encoder, pInfo->numOfBlocks)",
          "old_line_content": "  int32_t tlen = encoder.pos;",
          "new_line_content": "  if (tEncodeU32(&encoder, pInfo->numOfBlocks) < 0) return -1;",
          "content_same": false
        },
        {
          "line": 1776,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResultInfo)",
          "old_line_content": "  int32_t start = pInput->startRowIndex;",
          "new_line_content": "  SStddevRes* pRes = GET_ROWCELL_INTERBUF(pResultInfo);",
          "content_same": false
        },
        {
          "line": 1777,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(pRes, 0, sizeof(SStddevRes))",
          "old_line_content": "  int32_t numOfRows = pInput->numOfRows;",
          "new_line_content": "  memset(pRes, 0, sizeof(SStddevRes));",
          "content_same": false
        },
        {
          "line": 5874,
          "old_api": null,
          "new_api": "tEncodeU64",
          "old_text": null,
          "new_text": "tEncodeU64(&encoder, pInfo->totalSize)",
          "old_line_content": "}",
          "new_line_content": "  if (tEncodeU64(&encoder, pInfo->totalSize) < 0) return -1;",
          "content_same": false
        },
        {
          "line": 5875,
          "old_api": null,
          "new_api": "tEncodeU64",
          "old_text": null,
          "new_text": "tEncodeU64(&encoder, pInfo->totalRows)",
          "old_line_content": "",
          "new_line_content": "  if (tEncodeU64(&encoder, pInfo->totalRows) < 0) return -1;",
          "content_same": false
        },
        {
          "line": 3828,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pSourceCtx)",
          "old_line_content": "",
          "new_line_content": "  SResultRowEntryInfo* pSResInfo = GET_RES_INFO(pSourceCtx);",
          "content_same": false
        },
        {
          "line": 3829,
          "old_api": null,
          "new_api": "getTopBotOutputInfo",
          "old_text": null,
          "new_text": "getTopBotOutputInfo(pSourceCtx)",
          "old_line_content": "int32_t getSpreadInfoSize() { return (int32_t)sizeof(SSpreadInfo); }",
          "new_line_content": "  STopBotRes*          pSBuf = getTopBotOutputInfo(pSourceCtx);",
          "content_same": false
        },
        {
          "line": 5876,
          "old_api": null,
          "new_api": "tEncodeI32",
          "old_text": null,
          "new_text": "tEncodeI32(&encoder, pInfo->maxRows)",
          "old_line_content": "int32_t tDeserializeBlockDistInfo(void* buf, int32_t bufLen, STableBlockDistInfo* pInfo) {",
          "new_line_content": "  if (tEncodeI32(&encoder, pInfo->maxRows) < 0) return -1;",
          "content_same": false
        },
        {
          "line": 5877,
          "old_api": null,
          "new_api": "tEncodeI32",
          "old_text": null,
          "new_text": "tEncodeI32(&encoder, pInfo->minRows)",
          "old_line_content": "  SDecoder decoder = {0};",
          "new_line_content": "  if (tEncodeI32(&encoder, pInfo->minRows) < 0) return -1;",
          "content_same": false
        },
        {
          "line": 3832,
          "old_api": null,
          "new_api": "addResult",
          "old_text": null,
          "new_text": "addResult(pDestCtx, pSBuf->pItems + i, type, true)",
          "old_line_content": "  pEnv->calcMemSize = sizeof(SSpreadInfo);",
          "new_line_content": "    addResult(pDestCtx, pSBuf->pItems + i, type, true);",
          "content_same": false
        },
        {
          "line": 5879,
          "old_api": null,
          "new_api": "tEncodeI32",
          "old_text": null,
          "new_text": "tEncodeI32(&encoder, pInfo->defMinRows)",
          "old_line_content": "",
          "new_line_content": "  if (tEncodeI32(&encoder, pInfo->defMinRows) < 0) return -1;",
          "content_same": false
        },
        {
          "line": 3838,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pSourceCtx)",
          "old_line_content": "    return false;",
          "new_line_content": "  SResultRowEntryInfo* pSResInfo = GET_RES_INFO(pSourceCtx);",
          "content_same": false
        },
        {
          "line": 3839,
          "old_api": null,
          "new_api": "getTopBotOutputInfo",
          "old_text": null,
          "new_text": "getTopBotOutputInfo(pSourceCtx)",
          "old_line_content": "  }",
          "new_line_content": "  STopBotRes*          pSBuf = getTopBotOutputInfo(pSourceCtx);",
          "content_same": false
        },
        {
          "line": 1797,
          "old_api": null,
          "new_api": "IS_NULL_TYPE",
          "old_text": null,
          "new_text": "IS_NULL_TYPE(type)",
          "old_line_content": "",
          "new_line_content": "  if (IS_NULL_TYPE(type)) {",
          "content_same": false
        },
        {
          "line": 5898,
          "old_api": null,
          "new_api": "tStartDecode",
          "old_text": null,
          "new_text": "tStartDecode(&decoder)",
          "old_line_content": "  }",
          "new_line_content": "  if (tStartDecode(&decoder) < 0) return -1;",
          "content_same": false
        },
        {
          "line": 5899,
          "old_api": null,
          "new_api": "tDecodeU32",
          "old_text": null,
          "new_text": "tDecodeU32(&decoder, &pInfo->rowSize)",
          "old_line_content": "",
          "new_line_content": "  if (tDecodeU32(&decoder, &pInfo->rowSize) < 0) return -1;",
          "content_same": false
        },
        {
          "line": 5901,
          "old_api": null,
          "new_api": "tDecodeU16",
          "old_text": null,
          "new_text": "tDecodeU16(&decoder, &pInfo->numOfFiles)",
          "old_line_content": "  return 0;",
          "new_line_content": "  if (tDecodeU16(&decoder, &pInfo->numOfFiles) < 0) return -1;",
          "content_same": false
        },
        {
          "line": 1806,
          "old_api": null,
          "new_api": "colDataIsNull_f",
          "old_text": null,
          "new_text": "colDataIsNull_f(pCol->nullbitmap, i)",
          "old_line_content": "        }",
          "new_line_content": "        if (pCol->hasNull && colDataIsNull_f(pCol->nullbitmap, i)) {",
          "content_same": false
        },
        {
          "line": 3855,
          "old_api": null,
          "new_api": "functionSetup",
          "old_text": null,
          "new_text": "functionSetup(pCtx, pResultInfo)",
          "old_line_content": "",
          "new_line_content": "  if (!functionSetup(pCtx, pResultInfo)) {",
          "content_same": false
        },
        {
          "line": 5902,
          "old_api": null,
          "new_api": "tDecodeU32",
          "old_text": null,
          "new_text": "tDecodeU32(&decoder, &pInfo->numOfBlocks)",
          "old_line_content": "}",
          "new_line_content": "  if (tDecodeU32(&decoder, &pInfo->numOfBlocks) < 0) return -1;",
          "content_same": false
        },
        {
          "line": 5903,
          "old_api": null,
          "new_api": "tDecodeU32",
          "old_text": null,
          "new_text": "tDecodeU32(&decoder, &pInfo->numOfTables)",
          "old_line_content": "",
          "new_line_content": "  if (tDecodeU32(&decoder, &pInfo->numOfTables) < 0) return -1;",
          "content_same": false
        },
        {
          "line": 3859,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResultInfo)",
          "old_line_content": "    numOfElems = pInput->numOfRows - pAgg->numOfNull;",
          "new_line_content": "  SSpreadInfo* pInfo = GET_ROWCELL_INTERBUF(pResultInfo);",
          "content_same": false
        },
        {
          "line": 3860,
          "old_api": null,
          "new_api": "SET_DOUBLE_VAL",
          "old_text": null,
          "new_text": "SET_DOUBLE_VAL(&pInfo->min, DBL_MAX)",
          "old_line_content": "    if (numOfElems == 0) {",
          "new_line_content": "  SET_DOUBLE_VAL(&pInfo->min, DBL_MAX);",
          "content_same": false
        },
        {
          "line": 3861,
          "old_api": null,
          "new_api": "SET_DOUBLE_VAL",
          "old_text": null,
          "new_text": "SET_DOUBLE_VAL(&pInfo->max, -DBL_MAX)",
          "old_line_content": "      goto _spread_over;",
          "new_line_content": "  SET_DOUBLE_VAL(&pInfo->max, -DBL_MAX);",
          "content_same": false
        },
        {
          "line": 5907,
          "old_api": null,
          "new_api": "tDecodeI32",
          "old_text": null,
          "new_text": "tDecodeI32(&decoder, &pInfo->maxRows)",
          "old_line_content": "",
          "new_line_content": "  if (tDecodeI32(&decoder, &pInfo->maxRows) < 0) return -1;",
          "content_same": false
        },
        {
          "line": 5909,
          "old_api": null,
          "new_api": "tDecodeI32",
          "old_text": null,
          "new_text": "tDecodeI32(&decoder, &pInfo->defMaxRows)",
          "old_line_content": "",
          "new_line_content": "  if (tDecodeI32(&decoder, &pInfo->defMaxRows) < 0) return -1;",
          "content_same": false
        },
        {
          "line": 5910,
          "old_api": null,
          "new_api": "tDecodeI32",
          "old_text": null,
          "new_text": "tDecodeI32(&decoder, &pInfo->defMinRows)",
          "old_line_content": "  if (pData->totalRows == 0) {",
          "new_line_content": "  if (tDecodeI32(&decoder, &pInfo->defMinRows) < 0) return -1;",
          "content_same": false
        },
        {
          "line": 5911,
          "old_api": null,
          "new_api": "tDecodeU32",
          "old_text": null,
          "new_text": "tDecodeU32(&decoder, &pInfo->numOfInmemRows)",
          "old_line_content": "    pData->minRows = 0;",
          "new_line_content": "  if (tDecodeU32(&decoder, &pInfo->numOfInmemRows) < 0) return -1;",
          "content_same": false
        },
        {
          "line": 5912,
          "old_api": null,
          "new_api": "tDecodeU32",
          "old_text": null,
          "new_text": "tDecodeU32(&decoder, &pInfo->numOfSmallBlocks)",
          "old_line_content": "  }",
          "new_line_content": "  if (tDecodeU32(&decoder, &pInfo->numOfSmallBlocks) < 0) return -1;",
          "content_same": false
        },
        {
          "line": 5914,
          "old_api": null,
          "new_api": "tListLen",
          "old_text": null,
          "new_text": "tListLen(pInfo->blockRowsHisto)",
          "old_line_content": "  int32_t row = 0;",
          "new_line_content": "  for (int32_t i = 0; i < tListLen(pInfo->blockRowsHisto); ++i) {",
          "content_same": false
        },
        {
          "line": 5915,
          "old_api": null,
          "new_api": "tDecodeI32",
          "old_text": null,
          "new_text": "tDecodeI32(&decoder, &pInfo->blockRowsHisto[i])",
          "old_line_content": "  char    st[256] = {0};",
          "new_line_content": "    if (tDecodeI32(&decoder, &pInfo->blockRowsHisto[i]) < 0) return -1;",
          "content_same": false
        },
        {
          "line": 1822,
          "old_api": null,
          "new_api": "colDataIsNull_f",
          "old_text": null,
          "new_text": "colDataIsNull_f(pCol->nullbitmap, i)",
          "old_line_content": "",
          "new_line_content": "        if (pCol->hasNull && colDataIsNull_f(pCol->nullbitmap, i)) {",
          "content_same": false
        },
        {
          "line": 5918,
          "old_api": null,
          "new_api": "tDecoderClear",
          "old_text": null,
          "new_text": "tDecoderClear(&decoder)",
          "old_line_content": "                        \"Total_Blocks=[%d] Total_Size=[%.2f Kb] Average_size=[%.2f Kb] Compression_Ratio=[%.2f %c]\",",
          "new_line_content": "  tDecoderClear(&decoder);",
          "content_same": false
        },
        {
          "line": 3874,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "",
          "new_line_content": "  SSpreadInfo* pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "content_same": false
        },
        {
          "line": 5924,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "",
          "new_line_content": "  STableBlockDistInfo* pData = GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 5926,
          "old_api": null,
          "new_api": "taosArrayGet",
          "old_text": null,
          "new_text": "taosArrayGet(pBlock->pDataBlock, 0)",
          "old_line_content": "  if (pData->numOfBlocks > 0) {",
          "new_line_content": "  SColumnInfoData* pColInfo = taosArrayGet(pBlock->pDataBlock, 0);",
          "content_same": false
        },
        {
          "line": 3882,
          "old_api": null,
          "new_api": "IS_SIGNED_NUMERIC_TYPE",
          "old_text": null,
          "new_text": "IS_SIGNED_NUMERIC_TYPE(type)",
          "old_line_content": "",
          "new_line_content": "    if (IS_SIGNED_NUMERIC_TYPE(type)) {",
          "content_same": false
        },
        {
          "line": 3883,
          "old_api": null,
          "new_api": "GET_INT64_VAL",
          "old_text": null,
          "new_text": "GET_INT64_VAL(&pAgg->min)",
          "old_line_content": "  } else {  // computing based on the true data block",
          "new_line_content": "      tmin = (double)GET_INT64_VAL(&pAgg->min);",
          "content_same": false
        },
        {
          "line": 3884,
          "old_api": null,
          "new_api": "GET_INT64_VAL",
          "old_text": null,
          "new_text": "GET_INT64_VAL(&pAgg->max)",
          "old_line_content": "    SColumnInfoData* pCol = pInput->pData[0];",
          "new_line_content": "      tmax = (double)GET_INT64_VAL(&pAgg->max);",
          "content_same": false
        },
        {
          "line": 1837,
          "old_api": null,
          "new_api": "colDataIsNull_f",
          "old_text": null,
          "new_text": "colDataIsNull_f(pCol->nullbitmap, i)",
          "old_line_content": "        }",
          "new_line_content": "        if (pCol->hasNull && colDataIsNull_f(pCol->nullbitmap, i)) {",
          "content_same": false
        },
        {
          "line": 3885,
          "old_api": null,
          "new_api": "IS_FLOAT_TYPE",
          "old_text": null,
          "new_text": "IS_FLOAT_TYPE(type)",
          "old_line_content": "",
          "new_line_content": "    } else if (IS_FLOAT_TYPE(type)) {",
          "content_same": false
        },
        {
          "line": 3886,
          "old_api": null,
          "new_api": "GET_DOUBLE_VAL",
          "old_text": null,
          "new_text": "GET_DOUBLE_VAL(&pAgg->min)",
          "old_line_content": "    int32_t start = pInput->startRowIndex;",
          "new_line_content": "      tmin = GET_DOUBLE_VAL(&pAgg->min);",
          "content_same": false
        },
        {
          "line": 3887,
          "old_api": null,
          "new_api": "GET_DOUBLE_VAL",
          "old_text": null,
          "new_text": "GET_DOUBLE_VAL(&pAgg->max)",
          "old_line_content": "    // check the valid data one by one",
          "new_line_content": "      tmax = GET_DOUBLE_VAL(&pAgg->max);",
          "content_same": false
        },
        {
          "line": 3888,
          "old_api": null,
          "new_api": "IS_UNSIGNED_NUMERIC_TYPE",
          "old_text": null,
          "new_text": "IS_UNSIGNED_NUMERIC_TYPE(type)",
          "old_line_content": "    for (int32_t i = start; i < pInput->numOfRows + start; ++i) {",
          "new_line_content": "    } else if (IS_UNSIGNED_NUMERIC_TYPE(type)) {",
          "content_same": false
        },
        {
          "line": 3890,
          "old_api": null,
          "new_api": "GET_UINT64_VAL",
          "old_text": null,
          "new_text": "GET_UINT64_VAL(&pAgg->max)",
          "old_line_content": "        continue;",
          "new_line_content": "      tmax = (double)GET_UINT64_VAL(&pAgg->max);",
          "content_same": false
        },
        {
          "line": 3894,
          "old_api": null,
          "new_api": "SET_DOUBLE_VAL",
          "old_text": null,
          "new_text": "SET_DOUBLE_VAL(&pInfo->min, tmin)",
          "old_line_content": "",
          "new_line_content": "      SET_DOUBLE_VAL(&pInfo->min, tmin);",
          "content_same": false
        },
        {
          "line": 5948,
          "old_api": null,
          "new_api": "sprintf",
          "old_text": null,
          "new_text": "sprintf(st + VARSTR_HEADER_SIZE,\n                \"Total_Rows=[%\" PRId64 \"] Inmem_Rows=[%d] MinRows=[%d] MaxRows=[%d] Average_Rows=[%\" PRId64 \"]\",\n                pData->totalRows, pData->numOfInmemRows, pData->minRows, pData->maxRows, avgRows)",
          "old_line_content": "  int32_t maxVal = 0;",
          "new_line_content": "  len = sprintf(st + VARSTR_HEADER_SIZE,",
          "content_same": false
        },
        {
          "line": 1853,
          "old_api": null,
          "new_api": "colDataIsNull_f",
          "old_text": null,
          "new_text": "colDataIsNull_f(pCol->nullbitmap, i)",
          "old_line_content": "",
          "new_line_content": "        if (pCol->hasNull && colDataIsNull_f(pCol->nullbitmap, i)) {",
          "content_same": false
        },
        {
          "line": 5952,
          "old_api": null,
          "new_api": "varDataSetLen",
          "old_text": null,
          "new_text": "varDataSetLen(st, len)",
          "old_line_content": "      maxVal = pData->blockRowsHisto[i];",
          "new_line_content": "  varDataSetLen(st, len);",
          "content_same": false
        },
        {
          "line": 5953,
          "old_api": null,
          "new_api": "colDataAppend",
          "old_text": null,
          "new_text": "colDataAppend(pColInfo, row++, st, false)",
          "old_line_content": "    }",
          "new_line_content": "  colDataAppend(pColInfo, row++, st, false);",
          "content_same": false
        },
        {
          "line": 3907,
          "old_api": null,
          "new_api": "colDataIsNull_f",
          "old_text": null,
          "new_text": "colDataIsNull_f(pCol->nullbitmap, i)",
          "old_line_content": "  }",
          "new_line_content": "      if (colDataIsNull_f(pCol->nullbitmap, i)) {",
          "content_same": false
        },
        {
          "line": 5955,
          "old_api": null,
          "new_api": "sprintf",
          "old_text": null,
          "new_text": "sprintf(st + VARSTR_HEADER_SIZE, \"Total_Tables=[%d] Total_Files=[%d] Total_Vgroups=[%d]\", pData->numOfTables,\n                pData->numOfFiles, 0)",
          "old_line_content": "    if (minVal > pData->blockRowsHisto[i]) {",
          "new_line_content": "  len = sprintf(st + VARSTR_HEADER_SIZE, \"Total_Tables=[%d] Total_Files=[%d] Total_Vgroups=[%d]\", pData->numOfTables,",
          "content_same": false
        },
        {
          "line": 5958,
          "old_api": null,
          "new_api": "varDataSetLen",
          "old_text": null,
          "new_text": "varDataSetLen(st, len)",
          "old_line_content": "  }",
          "new_line_content": "  varDataSetLen(st, len);",
          "content_same": false
        },
        {
          "line": 5959,
          "old_api": null,
          "new_api": "colDataAppend",
          "old_text": null,
          "new_text": "colDataAppend(pColInfo, row++, st, false)",
          "old_line_content": "",
          "new_line_content": "  colDataAppend(pColInfo, row++, st, false);",
          "content_same": false
        },
        {
          "line": 5961,
          "old_api": null,
          "new_api": "sprintf",
          "old_text": null,
          "new_text": "sprintf(st + VARSTR_HEADER_SIZE,\n                \"--------------------------------------------------------------------------------\")",
          "old_line_content": "  double factor = pData->numOfBlocks / 80.0;",
          "new_line_content": "  len = sprintf(st + VARSTR_HEADER_SIZE,",
          "content_same": false
        },
        {
          "line": 3915,
          "old_api": null,
          "new_api": "GET_DOUBLE_VAL",
          "old_text": null,
          "new_text": "GET_DOUBLE_VAL(&pInfo->min)",
          "old_line_content": "",
          "new_line_content": "      if (v < GET_DOUBLE_VAL(&pInfo->min)) {",
          "content_same": false
        },
        {
          "line": 1868,
          "old_api": null,
          "new_api": "colDataIsNull_f",
          "old_text": null,
          "new_text": "colDataIsNull_f(pCol->nullbitmap, i)",
          "old_line_content": "        }",
          "new_line_content": "        if (pCol->hasNull && colDataIsNull_f(pCol->nullbitmap, i)) {",
          "content_same": false
        },
        {
          "line": 3916,
          "old_api": null,
          "new_api": "SET_DOUBLE_VAL",
          "old_text": null,
          "new_text": "SET_DOUBLE_VAL(&pInfo->min, v)",
          "old_line_content": "  return TSDB_CODE_SUCCESS;",
          "new_line_content": "        SET_DOUBLE_VAL(&pInfo->min, v);",
          "content_same": false
        },
        {
          "line": 5963,
          "old_api": null,
          "new_api": "varDataSetLen",
          "old_text": null,
          "new_text": "varDataSetLen(st, len)",
          "old_line_content": "  int32_t numOfBuckets = sizeof(pData->blockRowsHisto) / sizeof(pData->blockRowsHisto[0]);",
          "new_line_content": "  varDataSetLen(st, len);",
          "content_same": false
        },
        {
          "line": 3919,
          "old_api": null,
          "new_api": "GET_DOUBLE_VAL",
          "old_text": null,
          "new_text": "GET_DOUBLE_VAL(&pInfo->max)",
          "old_line_content": "static void spreadTransferInfo(SSpreadInfo* pInput, SSpreadInfo* pOutput) {",
          "new_line_content": "      if (v > GET_DOUBLE_VAL(&pInfo->max)) {",
          "content_same": false
        },
        {
          "line": 3920,
          "old_api": null,
          "new_api": "SET_DOUBLE_VAL",
          "old_text": null,
          "new_text": "SET_DOUBLE_VAL(&pInfo->max, v)",
          "old_line_content": "  pOutput->hasResult = pInput->hasResult;",
          "new_line_content": "        SET_DOUBLE_VAL(&pInfo->max, v);",
          "content_same": false
        },
        {
          "line": 5964,
          "old_api": null,
          "new_api": "colDataAppend",
          "old_text": null,
          "new_text": "colDataAppend(pColInfo, row++, st, false)",
          "old_line_content": "  int32_t bucketRange = (pData->defMaxRows - pData->defMinRows) / numOfBuckets;",
          "new_line_content": "  colDataAppend(pColInfo, row++, st, false);",
          "content_same": false
        },
        {
          "line": 5968,
          "old_api": null,
          "new_api": "tListLen",
          "old_text": null,
          "new_text": "tListLen(pData->blockRowsHisto)",
          "old_line_content": "",
          "new_line_content": "  for (int32_t i = 0; i < tListLen(pData->blockRowsHisto); ++i) {",
          "content_same": false
        },
        {
          "line": 3929,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "",
          "new_line_content": "  SET_VAL(GET_RES_INFO(pCtx), numOfElems, 1);",
          "content_same": false
        },
        {
          "line": 1884,
          "old_api": null,
          "new_api": "colDataIsNull_f",
          "old_text": null,
          "new_text": "colDataIsNull_f(pCol->nullbitmap, i)",
          "old_line_content": "",
          "new_line_content": "        if (pCol->hasNull && colDataIsNull_f(pCol->nullbitmap, i)) {",
          "content_same": false
        },
        {
          "line": 5993,
          "old_api": null,
          "new_api": "sprintf",
          "old_text": null,
          "new_text": "sprintf(st + VARSTR_HEADER_SIZE + len, \"%c\", '|')",
          "old_line_content": "  return true;",
          "new_line_content": "      int32_t x = sprintf(st + VARSTR_HEADER_SIZE + len, \"%c\", '|');",
          "content_same": false
        },
        {
          "line": 1899,
          "old_api": null,
          "new_api": "colDataIsNull_f",
          "old_text": null,
          "new_text": "colDataIsNull_f(pCol->nullbitmap, i)",
          "old_line_content": "        }",
          "new_line_content": "        if (pCol->hasNull && colDataIsNull_f(pCol->nullbitmap, i)) {",
          "content_same": false
        },
        {
          "line": 3951,
          "old_api": null,
          "new_api": "ASSERT",
          "old_text": null,
          "new_text": "ASSERT(pCol->info.type == TSDB_DATA_TYPE_BINARY)",
          "old_line_content": "}",
          "new_line_content": "  ASSERT(pCol->info.type == TSDB_DATA_TYPE_BINARY);",
          "content_same": false
        },
        {
          "line": 5999,
          "old_api": null,
          "new_api": "sprintf",
          "old_text": null,
          "new_text": "sprintf(st + VARSTR_HEADER_SIZE + len, \"  %d (%.2f%c)\", pData->blockRowsHisto[i], v, '%')",
          "old_line_content": "  }",
          "new_line_content": "      len += sprintf(st + VARSTR_HEADER_SIZE + len, \"  %d (%.2f%c)\", pData->blockRowsHisto[i], v, '%');",
          "content_same": false
        },
        {
          "line": 3953,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "int32_t spreadFinalize(SqlFunctionCtx* pCtx, SSDataBlock* pBlock) {",
          "new_line_content": "  SSpreadInfo* pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "content_same": false
        },
        {
          "line": 6002,
          "old_api": null,
          "new_api": "varDataSetLen",
          "old_text": null,
          "new_text": "varDataSetLen(st, len)",
          "old_line_content": "",
          "new_line_content": "    varDataSetLen(st, len);",
          "content_same": false
        },
        {
          "line": 6003,
          "old_api": null,
          "new_api": "colDataAppend",
          "old_text": null,
          "new_text": "colDataAppend(pColInfo, row++, st, false)",
          "old_line_content": "  pDerivInfo->ignoreNegative = pCtx->param[2].param.i;",
          "new_line_content": "    colDataAppend(pColInfo, row++, st, false);",
          "content_same": false
        },
        {
          "line": 3957,
          "old_api": null,
          "new_api": "colDataGetData",
          "old_text": null,
          "new_text": "colDataGetData(pCol, i)",
          "old_line_content": "  } else {",
          "new_line_content": "    char*        data = colDataGetData(pCol, i);",
          "content_same": false
        },
        {
          "line": 1915,
          "old_api": null,
          "new_api": "colDataIsNull_f",
          "old_text": null,
          "new_text": "colDataIsNull_f(pCol->nullbitmap, i)",
          "old_line_content": "",
          "new_line_content": "        if (pCol->hasNull && colDataIsNull_f(pCol->nullbitmap, i)) {",
          "content_same": false
        },
        {
          "line": 6015,
          "old_api": null,
          "new_api": "functionSetup",
          "old_text": null,
          "new_text": "functionSetup(pCtx, pResInfo)",
          "old_line_content": "  SColumnInfoData*      pInputCol = pInput->pData[0];",
          "new_line_content": "  if (!functionSetup(pCtx, pResInfo)) {",
          "content_same": false
        },
        {
          "line": 6019,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "  SColumnInfoData* pTsOutput = pCtx->pTsOutput;",
          "new_line_content": "  SDerivInfo* pDerivInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 3972,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  int32_t          slotId = pCtx->pExpr->base.resSchema.slotId;",
          "new_line_content": "  SSpreadInfo* pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "content_same": false
        },
        {
          "line": 3974,
          "old_api": null,
          "new_api": "SET_DOUBLE_VAL",
          "old_text": null,
          "new_text": "SET_DOUBLE_VAL(&pInfo->result, pInfo->max - pInfo->min)",
          "old_line_content": "",
          "new_line_content": "    SET_DOUBLE_VAL(&pInfo->result, pInfo->max - pInfo->min);",
          "content_same": false
        },
        {
          "line": 3976,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "",
          "new_line_content": "    GET_RES_INFO(pCtx)->isNullRes = 1;",
          "content_same": false
        },
        {
          "line": 1930,
          "old_api": null,
          "new_api": "colDataIsNull_f",
          "old_text": null,
          "new_text": "colDataIsNull_f(pCol->nullbitmap, i)",
          "old_line_content": "",
          "new_line_content": "        if (pCol->hasNull && colDataIsNull_f(pCol->nullbitmap, i)) {",
          "content_same": false
        },
        {
          "line": 3978,
          "old_api": null,
          "new_api": "functionFinalize",
          "old_text": null,
          "new_text": "functionFinalize(pCtx, pBlock)",
          "old_line_content": "  return pResInfo->numOfRes;",
          "new_line_content": "  return functionFinalize(pCtx, pBlock);",
          "content_same": false
        },
        {
          "line": 6029,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "        continue;",
          "new_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 6030,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "      }",
          "new_line_content": "  SDerivInfo*          pDerivInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 3984,
          "old_api": null,
          "new_api": "getSpreadInfoSize",
          "old_text": null,
          "new_text": "getSpreadInfoSize()",
          "old_line_content": "",
          "new_line_content": "  int32_t              resultBytes = getSpreadInfoSize();",
          "content_same": false
        },
        {
          "line": 3991,
          "old_api": null,
          "new_api": "taosArrayGet",
          "old_text": null,
          "new_text": "taosArrayGet(pBlock->pDataBlock, slotId)",
          "old_line_content": "}",
          "new_line_content": "  SColumnInfoData* pCol = taosArrayGet(pBlock->pDataBlock, slotId);",
          "content_same": false
        },
        {
          "line": 3993,
          "old_api": null,
          "new_api": "colDataAppend",
          "old_text": null,
          "new_text": "colDataAppend(pCol, pBlock->info.rows, res, false)",
          "old_line_content": "int32_t getElapsedInfoSize() { return (int32_t)sizeof(SElapsedInfo); }",
          "new_line_content": "  colDataAppend(pCol, pBlock->info.rows, res, false);",
          "content_same": false
        },
        {
          "line": 3995,
          "old_api": null,
          "new_api": "taosMemoryFree",
          "old_text": null,
          "new_text": "taosMemoryFree(res)",
          "old_line_content": "bool getElapsedFuncEnv(SFunctionNode* UNUSED_PARAM(pFunc), SFuncExecEnv* pEnv) {",
          "new_line_content": "  taosMemoryFree(res);",
          "content_same": false
        },
        {
          "line": 6046,
          "old_api": null,
          "new_api": "colDataIsNull_f",
          "old_text": null,
          "new_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "old_line_content": "          }",
          "new_line_content": "      if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "content_same": false
        },
        {
          "line": 4000,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pDestCtx)",
          "old_line_content": "bool elapsedFunctionSetup(SqlFunctionCtx* pCtx, SResultRowEntryInfo* pResultInfo) {",
          "new_line_content": "  SResultRowEntryInfo* pDResInfo = GET_RES_INFO(pDestCtx);",
          "content_same": false
        },
        {
          "line": 4003,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pSourceCtx)",
          "old_line_content": "  }",
          "new_line_content": "  SResultRowEntryInfo* pSResInfo = GET_RES_INFO(pSourceCtx);",
          "content_same": false
        },
        {
          "line": 4004,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pSResInfo)",
          "old_line_content": "",
          "new_line_content": "  SSpreadInfo*         pSBuf = GET_ROWCELL_INTERBUF(pSResInfo);",
          "content_same": false
        },
        {
          "line": 4006,
          "old_api": null,
          "new_api": "TMAX",
          "old_text": null,
          "new_text": "TMAX(pDResInfo->numOfRes, pSResInfo->numOfRes)",
          "old_line_content": "  pInfo->result = 0;",
          "new_line_content": "  pDResInfo->numOfRes = TMAX(pDResInfo->numOfRes, pSResInfo->numOfRes);",
          "content_same": false
        },
        {
          "line": 1963,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "}",
          "new_line_content": "  SET_VAL(GET_RES_INFO(pCtx), numOfElem, 1);",
          "content_same": false
        },
        {
          "line": 6060,
          "old_api": null,
          "new_api": "isnan",
          "old_text": null,
          "new_text": "isnan(r)",
          "old_line_content": "",
          "new_line_content": "          if (isinf(r) || isnan(r)) {",
          "content_same": false
        },
        {
          "line": 6061,
          "old_api": null,
          "new_api": "colDataAppendNULL",
          "old_text": null,
          "new_text": "colDataAppendNULL(pOutput, pos)",
          "old_line_content": "      pDerivInfo->prevValue = v;",
          "new_line_content": "            colDataAppendNULL(pOutput, pos);",
          "content_same": false
        },
        {
          "line": 6063,
          "old_api": null,
          "new_api": "colDataAppend",
          "old_text": null,
          "new_text": "colDataAppend(pOutput, pos, (const char*)&r, false)",
          "old_line_content": "    }",
          "new_line_content": "            colDataAppend(pOutput, pos, (const char*)&r, false);",
          "content_same": false
        },
        {
          "line": 1969,
          "old_api": null,
          "new_api": "IS_SIGNED_NUMERIC_TYPE",
          "old_text": null,
          "new_text": "IS_SIGNED_NUMERIC_TYPE(pOutput->type)",
          "old_line_content": "",
          "new_line_content": "  if (IS_SIGNED_NUMERIC_TYPE(pOutput->type)) {",
          "content_same": false
        },
        {
          "line": 4019,
          "old_api": null,
          "new_api": "functionSetup",
          "old_text": null,
          "new_text": "functionSetup(pCtx, pResultInfo)",
          "old_line_content": "int32_t elapsedFunction(SqlFunctionCtx* pCtx) {",
          "new_line_content": "  if (!functionSetup(pCtx, pResultInfo)) {",
          "content_same": false
        },
        {
          "line": 1972,
          "old_api": null,
          "new_api": "IS_UNSIGNED_NUMERIC_TYPE",
          "old_text": null,
          "new_text": "IS_UNSIGNED_NUMERIC_TYPE(pOutput->type)",
          "old_line_content": "  for (int32_t i = pInput->startRowIndex; i < pInput->startRowIndex + pInput->numOfRows; ++i) {",
          "new_line_content": "  } else if (IS_UNSIGNED_NUMERIC_TYPE(pOutput->type)) {",
          "content_same": false
        },
        {
          "line": 6067,
          "old_api": null,
          "new_api": "colDataAppendInt64",
          "old_text": null,
          "new_text": "colDataAppendInt64(pTsOutput, pos, &tsList[i])",
          "old_line_content": "        continue;",
          "new_line_content": "            colDataAppendInt64(pTsOutput, pos, &tsList[i]);",
          "content_same": false
        },
        {
          "line": 4023,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResultInfo)",
          "old_line_content": "  SInputColumnInfoData* pInput = &pCtx->input;",
          "new_line_content": "  SElapsedInfo* pInfo = GET_ROWCELL_INTERBUF(pResultInfo);",
          "content_same": false
        },
        {
          "line": 6072,
          "old_api": null,
          "new_api": "appendSelectivityValue",
          "old_text": null,
          "new_text": "appendSelectivityValue(pCtx, i, pos)",
          "old_line_content": "",
          "new_line_content": "            appendSelectivityValue(pCtx, i, pos);",
          "content_same": false
        },
        {
          "line": 1986,
          "old_api": null,
          "new_api": "ASSERT",
          "old_text": null,
          "new_text": "ASSERT(pCol->info.type == TSDB_DATA_TYPE_BINARY)",
          "old_line_content": "  SInputColumnInfoData* pInput = &pCtx->input;",
          "new_line_content": "  ASSERT(pCol->info.type == TSDB_DATA_TYPE_BINARY);",
          "content_same": false
        },
        {
          "line": 1988,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "",
          "new_line_content": "  SStddevRes* pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "content_same": false
        },
        {
          "line": 6084,
          "old_api": null,
          "new_api": "colDataIsNull_f",
          "old_text": null,
          "new_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "old_line_content": "          }",
          "new_line_content": "      if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "content_same": false
        },
        {
          "line": 1991,
          "old_api": null,
          "new_api": "colDataGetData",
          "old_text": null,
          "new_text": "colDataGetData(pCol, i)",
          "old_line_content": "  // computing based on the true data block",
          "new_line_content": "    char*       data = colDataGetData(pCol, i);",
          "content_same": false
        },
        {
          "line": 1992,
          "old_api": null,
          "new_api": "varDataVal",
          "old_text": null,
          "new_text": "varDataVal(data)",
          "old_line_content": "  SColumnInfoData* pCol = pInput->pData[0];",
          "new_line_content": "    SStddevRes* pInputInfo = (SStddevRes*)varDataVal(data);",
          "content_same": false
        },
        {
          "line": 1993,
          "old_api": null,
          "new_api": "stddevTransferInfo",
          "old_text": null,
          "new_text": "stddevTransferInfo(pInputInfo, pInfo)",
          "old_line_content": "",
          "new_line_content": "    stddevTransferInfo(pInputInfo, pInfo);",
          "content_same": false
        },
        {
          "line": 1996,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "",
          "new_line_content": "  SET_VAL(GET_RES_INFO(pCtx), 1, 1);",
          "content_same": false
        },
        {
          "line": 4044,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  } else {  // computing based on the true data block",
          "new_line_content": "  SElapsedInfo* pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "content_same": false
        },
        {
          "line": 6098,
          "old_api": null,
          "new_api": "isnan",
          "old_text": null,
          "new_text": "isnan(r)",
          "old_line_content": "",
          "new_line_content": "          if (isinf(r) || isnan(r)) {",
          "content_same": false
        },
        {
          "line": 6099,
          "old_api": null,
          "new_api": "colDataAppendNULL",
          "old_text": null,
          "new_text": "colDataAppendNULL(pOutput, pos)",
          "old_line_content": "      pDerivInfo->prevValue = v;",
          "new_line_content": "            colDataAppendNULL(pOutput, pos);",
          "content_same": false
        },
        {
          "line": 4053,
          "old_api": null,
          "new_api": "GET_INT64_VAL",
          "old_text": null,
          "new_text": "GET_INT64_VAL(&pAgg->min)",
          "old_line_content": "        }",
          "new_line_content": "      pInfo->min = GET_INT64_VAL(&pAgg->min);",
          "content_same": false
        },
        {
          "line": 4054,
          "old_api": null,
          "new_api": "GET_INT64_VAL",
          "old_text": null,
          "new_text": "GET_INT64_VAL(&pAgg->max)",
          "old_line_content": "      }",
          "new_line_content": "      pInfo->max = GET_INT64_VAL(&pAgg->max);",
          "content_same": false
        },
        {
          "line": 6101,
          "old_api": null,
          "new_api": "colDataAppend",
          "old_text": null,
          "new_text": "colDataAppend(pOutput, pos, (const char*)&r, false)",
          "old_line_content": "    }",
          "new_line_content": "            colDataAppend(pOutput, pos, (const char*)&r, false);",
          "content_same": false
        },
        {
          "line": 4057,
          "old_api": null,
          "new_api": "GET_INT64_VAL",
          "old_text": null,
          "new_text": "GET_INT64_VAL(&pAgg->max)",
          "old_line_content": "",
          "new_line_content": "        pInfo->max = GET_INT64_VAL(&pAgg->max);",
          "content_same": false
        },
        {
          "line": 6105,
          "old_api": null,
          "new_api": "colDataAppendInt64",
          "old_text": null,
          "new_text": "colDataAppendInt64(pTsOutput, pos, &pDerivInfo->prevTs)",
          "old_line_content": "}",
          "new_line_content": "            colDataAppendInt64(pTsOutput, pos, &pDerivInfo->prevTs);",
          "content_same": false
        },
        {
          "line": 4059,
          "old_api": null,
          "new_api": "GET_INT64_VAL",
          "old_text": null,
          "new_text": "GET_INT64_VAL(&pAgg->min)",
          "old_line_content": "",
          "new_line_content": "        pInfo->min = GET_INT64_VAL(&pAgg->min);",
          "content_same": false
        },
        {
          "line": 6110,
          "old_api": null,
          "new_api": "appendSelectivityValue",
          "old_text": null,
          "new_text": "appendSelectivityValue(pCtx, i, pos)",
          "old_line_content": "}",
          "new_line_content": "            appendSelectivityValue(pCtx, i, pos);",
          "content_same": false
        },
        {
          "line": 2017,
          "old_api": null,
          "new_api": "LIST_STDDEV_SUB_N",
          "old_text": null,
          "new_text": "LIST_STDDEV_SUB_N(pStddevRes->isum, int8_t)",
          "old_line_content": "    }",
          "new_line_content": "      LIST_STDDEV_SUB_N(pStddevRes->isum, int8_t);",
          "content_same": false
        },
        {
          "line": 2021,
          "old_api": null,
          "new_api": "LIST_STDDEV_SUB_N",
          "old_text": null,
          "new_text": "LIST_STDDEV_SUB_N(pStddevRes->isum, int16_t)",
          "old_line_content": "    }",
          "new_line_content": "      LIST_STDDEV_SUB_N(pStddevRes->isum, int16_t);",
          "content_same": false
        },
        {
          "line": 2025,
          "old_api": null,
          "new_api": "LIST_STDDEV_SUB_N",
          "old_text": null,
          "new_text": "LIST_STDDEV_SUB_N(pStddevRes->isum, int32_t)",
          "old_line_content": "    }",
          "new_line_content": "      LIST_STDDEV_SUB_N(pStddevRes->isum, int32_t);",
          "content_same": false
        },
        {
          "line": 2029,
          "old_api": null,
          "new_api": "LIST_STDDEV_SUB_N",
          "old_text": null,
          "new_text": "LIST_STDDEV_SUB_N(pStddevRes->isum, int64_t)",
          "old_line_content": "    }",
          "new_line_content": "      LIST_STDDEV_SUB_N(pStddevRes->isum, int64_t);",
          "content_same": false
        },
        {
          "line": 4079,
          "old_api": null,
          "new_api": "colDataGetData",
          "old_text": null,
          "new_text": "colDataGetData(pCol, 0)",
          "old_line_content": "        pInfo->min = pCtx->start.key;",
          "new_line_content": "    TSKEY*  ptsList = (int64_t*)colDataGetData(pCol, 0);",
          "content_same": false
        },
        {
          "line": 2033,
          "old_api": null,
          "new_api": "LIST_STDDEV_SUB_N",
          "old_text": null,
          "new_text": "LIST_STDDEV_SUB_N(pStddevRes->isum, uint8_t)",
          "old_line_content": "    }",
          "new_line_content": "      LIST_STDDEV_SUB_N(pStddevRes->isum, uint8_t);",
          "content_same": false
        },
        {
          "line": 6131,
          "old_api": null,
          "new_api": "functionSetup",
          "old_text": null,
          "new_text": "functionSetup(pCtx, pResInfo)",
          "old_line_content": "",
          "new_line_content": "  if (!functionSetup(pCtx, pResInfo)) {",
          "content_same": false
        },
        {
          "line": 2037,
          "old_api": null,
          "new_api": "LIST_STDDEV_SUB_N",
          "old_text": null,
          "new_text": "LIST_STDDEV_SUB_N(pStddevRes->isum, uint16_t)",
          "old_line_content": "    }",
          "new_line_content": "      LIST_STDDEV_SUB_N(pStddevRes->isum, uint16_t);",
          "content_same": false
        },
        {
          "line": 6135,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "  SColumnInfoData* pOutput = (SColumnInfoData*)pCtx->pOutput;",
          "new_line_content": "  SRateInfo* pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 2041,
          "old_api": null,
          "new_api": "LIST_STDDEV_SUB_N",
          "old_text": null,
          "new_text": "LIST_STDDEV_SUB_N(pStddevRes->isum, uint32_t)",
          "old_line_content": "",
          "new_line_content": "      LIST_STDDEV_SUB_N(pStddevRes->isum, uint32_t);",
          "content_same": false
        },
        {
          "line": 2045,
          "old_api": null,
          "new_api": "LIST_STDDEV_SUB_N",
          "old_text": null,
          "new_text": "LIST_STDDEV_SUB_N(pStddevRes->isum, uint64_t)",
          "old_line_content": "}",
          "new_line_content": "      LIST_STDDEV_SUB_N(pStddevRes->isum, uint64_t);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 6149,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pInputCol, i)",
          "new_text": null,
          "old_line_content": "    char*  data = colDataGetData(pInputCol, i);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2055,
          "old_api": "fabs",
          "new_api": null,
          "old_text": "fabs(pStddevRes->quadraticISum / ((double)pStddevRes->count) - avg * avg)",
          "new_text": null,
          "old_line_content": "    pStddevRes->result = sqrt(fabs(pStddevRes->quadraticISum / ((double)pStddevRes->count) - avg * avg));",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2056,
          "old_api": "IS_UNSIGNED_NUMERIC_TYPE",
          "new_api": null,
          "old_text": "IS_UNSIGNED_NUMERIC_TYPE(type)",
          "new_text": null,
          "old_line_content": "  } else if (IS_UNSIGNED_NUMERIC_TYPE(type)) {",
          "new_line_content": "    default:",
          "content_same": false
        },
        {
          "line": 2058,
          "old_api": "fabs",
          "new_api": null,
          "old_text": "fabs(pStddevRes->quadraticUSum / ((double)pStddevRes->count) - avg * avg)",
          "new_text": null,
          "old_line_content": "    pStddevRes->result = sqrt(fabs(pStddevRes->quadraticUSum / ((double)pStddevRes->count) - avg * avg));",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 4112,
          "old_api": "ASSERT",
          "new_api": null,
          "old_text": "ASSERT(pCol->info.type == TSDB_DATA_TYPE_BINARY)",
          "new_text": null,
          "old_line_content": "  ASSERT(pCol->info.type == TSDB_DATA_TYPE_BINARY);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2065,
          "old_api": "isnan",
          "new_api": null,
          "old_text": "isnan(pStddevRes->result)",
          "new_text": null,
          "old_line_content": "  if (isinf(pStddevRes->result) || isnan(pStddevRes->result)) {",
          "new_line_content": "int32_t stddevFinalize(SqlFunctionCtx* pCtx, SSDataBlock* pBlock) {",
          "content_same": false
        },
        {
          "line": 2066,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "    GET_RES_INFO(pCtx)->numOfRes = 0;",
          "new_line_content": "  SInputColumnInfoData* pInput = &pCtx->input;",
          "content_same": false
        },
        {
          "line": 4114,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SElapsedInfo* pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2069,
          "old_api": "functionFinalize",
          "new_api": null,
          "old_text": "functionFinalize(pCtx, pBlock)",
          "new_text": null,
          "old_line_content": "  return functionFinalize(pCtx, pBlock);",
          "new_line_content": "  double                avg;",
          "content_same": false
        },
        {
          "line": 4119,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pCol, i)",
          "new_text": null,
          "old_line_content": "    char*         data = colDataGetData(pCol, i);",
          "new_line_content": "    pOutput->min = pInput->min;",
          "content_same": false
        },
        {
          "line": 4120,
          "old_api": "varDataVal",
          "new_api": null,
          "old_text": "varDataVal(data)",
          "new_text": null,
          "old_line_content": "    SElapsedInfo* pInputInfo = (SElapsedInfo*)varDataVal(data);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 4121,
          "old_api": "elapsedTransferInfo",
          "new_api": null,
          "old_text": "elapsedTransferInfo(pInputInfo, pInfo)",
          "new_text": null,
          "old_line_content": "    elapsedTransferInfo(pInputInfo, pInfo);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2075,
          "old_api": "getStddevInfoSize",
          "new_api": null,
          "old_text": "getStddevInfoSize()",
          "new_text": null,
          "old_line_content": "  int32_t              resultBytes = getStddevInfoSize();",
          "new_line_content": "    avg = pStddevRes->usum / ((double)pStddevRes->count);",
          "content_same": false
        },
        {
          "line": 4124,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SET_VAL(GET_RES_INFO(pCtx), 1, 1);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 2078,
          "old_api": "varDataVal",
          "new_api": null,
          "old_text": "varDataVal(res)",
          "new_text": null,
          "old_line_content": "  memcpy(varDataVal(res), pInfo, resultBytes);",
          "new_line_content": "    avg = pStddevRes->dsum / ((double)pStddevRes->count);",
          "content_same": false
        },
        {
          "line": 4129,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SElapsedInfo* pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "new_line_content": "  SColumnInfoData*      pCol = pInput->pData[0];",
          "content_same": false
        },
        {
          "line": 2082,
          "old_api": "taosArrayGet",
          "new_api": null,
          "old_text": "taosArrayGet(pBlock->pDataBlock, slotId)",
          "new_text": null,
          "old_line_content": "  SColumnInfoData* pCol = taosArrayGet(pBlock->pDataBlock, slotId);",
          "new_line_content": "  // check for overflow",
          "content_same": false
        },
        {
          "line": 6177,
          "old_api": "SET_VAL",
          "new_api": null,
          "old_text": "SET_VAL(pResInfo, numOfElems, 1)",
          "new_text": null,
          "old_line_content": "  SET_VAL(pResInfo, numOfElems, 1);",
          "new_line_content": "    if (tsList[i] > pRateInfo->lastKey) {",
          "content_same": false
        },
        {
          "line": 4133,
          "old_api": "functionFinalize",
          "new_api": null,
          "old_text": "functionFinalize(pCtx, pBlock)",
          "new_text": null,
          "old_line_content": "  return functionFinalize(pCtx, pBlock);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2086,
          "old_api": "taosMemoryFree",
          "new_api": null,
          "old_text": "taosMemoryFree(res)",
          "new_text": null,
          "old_line_content": "  taosMemoryFree(res);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4140,
          "old_api": "taosMemoryCalloc",
          "new_api": null,
          "old_text": "taosMemoryCalloc(resultBytes + VARSTR_HEADER_SIZE, sizeof(char))",
          "new_text": null,
          "old_line_content": "  char*                res = taosMemoryCalloc(resultBytes + VARSTR_HEADER_SIZE, sizeof(char));",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 2095,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": null,
          "old_text": "GET_ROWCELL_INTERBUF(pSResInfo)",
          "new_text": null,
          "old_line_content": "  SStddevRes*          pSBuf = GET_ROWCELL_INTERBUF(pSResInfo);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4143,
          "old_api": "varDataSetLen",
          "new_api": null,
          "old_text": "varDataSetLen(res, resultBytes)",
          "new_text": null,
          "old_line_content": "  varDataSetLen(res, resultBytes);",
          "new_line_content": "  return TSDB_CODE_SUCCESS;",
          "content_same": false
        },
        {
          "line": 2098,
          "old_api": "IS_SIGNED_NUMERIC_TYPE",
          "new_api": null,
          "old_text": "IS_SIGNED_NUMERIC_TYPE(type)",
          "new_text": null,
          "old_line_content": "  if (IS_SIGNED_NUMERIC_TYPE(type)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4146,
          "old_api": "taosArrayGet",
          "new_api": null,
          "old_text": "taosArrayGet(pBlock->pDataBlock, slotId)",
          "new_text": null,
          "old_line_content": "  SColumnInfoData* pCol = taosArrayGet(pBlock->pDataBlock, slotId);",
          "new_line_content": "int32_t elapsedFinalize(SqlFunctionCtx* pCtx, SSDataBlock* pBlock) {",
          "content_same": false
        },
        {
          "line": 4148,
          "old_api": "colDataAppend",
          "new_api": null,
          "old_text": "colDataAppend(pCol, pBlock->info.rows, res, false)",
          "new_text": null,
          "old_line_content": "  colDataAppend(pCol, pBlock->info.rows, res, false);",
          "new_line_content": "  double        result = (double)pInfo->max - (double)pInfo->min;",
          "content_same": false
        },
        {
          "line": 2101,
          "old_api": "IS_UNSIGNED_NUMERIC_TYPE",
          "new_api": null,
          "old_text": "IS_UNSIGNED_NUMERIC_TYPE(type)",
          "new_text": null,
          "old_line_content": "  } else if (IS_UNSIGNED_NUMERIC_TYPE(type)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4150,
          "old_api": "taosMemoryFree",
          "new_api": null,
          "old_text": "taosMemoryFree(res)",
          "new_text": null,
          "old_line_content": "  taosMemoryFree(res);",
          "new_line_content": "  pInfo->result = result / pInfo->timeUnit;",
          "content_same": false
        },
        {
          "line": 6205,
          "old_api": "taosArrayGet",
          "new_api": null,
          "old_text": "taosArrayGet(pBlock->pDataBlock, slotId)",
          "new_text": null,
          "old_line_content": "  SColumnInfoData* pCol = taosArrayGet(pBlock->pDataBlock, slotId);",
          "new_line_content": "  double diff = 0;",
          "content_same": false
        },
        {
          "line": 4159,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": null,
          "old_text": "GET_ROWCELL_INTERBUF(pSResInfo)",
          "new_text": null,
          "old_line_content": "  SElapsedInfo*        pSBuf = GET_ROWCELL_INTERBUF(pSResInfo);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6207,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "  // value between two values.",
          "content_same": false
        },
        {
          "line": 4162,
          "old_api": "TMAX",
          "new_api": null,
          "old_text": "TMAX(pDResInfo->numOfRes, pSResInfo->numOfRes)",
          "new_text": null,
          "old_line_content": "  pDResInfo->numOfRes = TMAX(pDResInfo->numOfRes, pSResInfo->numOfRes);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6210,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": null,
          "old_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "new_text": null,
          "old_line_content": "  SRateInfo* pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "new_line_content": "    diff -= pRateInfo->firstValue;",
          "content_same": false
        },
        {
          "line": 6211,
          "old_api": "TSDB_TICK_PER_SECOND",
          "new_api": null,
          "old_text": "TSDB_TICK_PER_SECOND(pCtx->param[1].param.i)",
          "new_text": null,
          "old_line_content": "  double     result = doCalcRate(pInfo, (double)TSDB_TICK_PER_SECOND(pCtx->param[1].param.i));",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 6212,
          "old_api": "colDataAppend",
          "new_api": null,
          "old_text": "colDataAppend(pCol, pBlock->info.rows, (const char*)&result, pResInfo->isNullRes)",
          "new_text": null,
          "old_line_content": "  colDataAppend(pCol, pBlock->info.rows, (const char*)&result, pResInfo->isNullRes);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2120,
          "old_api": "functionSetup",
          "new_api": null,
          "old_text": "functionSetup(pCtx, pResultInfo)",
          "new_text": null,
          "old_line_content": "  if (!functionSetup(pCtx, pResultInfo)) {",
          "new_line_content": "    pDBuf->usum += pSBuf->usum;",
          "content_same": false
        },
        {
          "line": 6218,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "  return (duration > 0) ? ((double)diff) / (duration / tickPerSec) : 0.0;",
          "content_same": false
        },
        {
          "line": 6219,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": null,
          "old_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "new_text": null,
          "old_line_content": "  SGroupKeyInfo*       pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2124,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": null,
          "old_text": "GET_ROWCELL_INTERBUF(pResultInfo)",
          "new_text": null,
          "old_line_content": "  SLeastSQRInfo* pInfo = GET_ROWCELL_INTERBUF(pResultInfo);",
          "new_line_content": "    pDBuf->quadraticDSum += pSBuf->quadraticDSum;",
          "content_same": false
        },
        {
          "line": 2126,
          "old_api": "IS_FLOAT_TYPE",
          "new_api": null,
          "old_text": "IS_FLOAT_TYPE(pCtx->param[1].param.nType)",
          "new_text": null,
          "old_line_content": "  pInfo->startVal = IS_FLOAT_TYPE(pCtx->param[1].param.nType) ? pCtx->param[1].param.d : (double)pCtx->param[1].param.i;",
          "new_line_content": "  pDBuf->count += pSBuf->count;",
          "content_same": false
        },
        {
          "line": 4178,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(binTypeStr, \"user_input\")",
          "new_text": null,
          "old_line_content": "  if (strcasecmp(binTypeStr, \"user_input\") == 0) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4182,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(binTypeStr, \"log_bin\")",
          "new_text": null,
          "old_line_content": "  } else if (strcasecmp(binTypeStr, \"log_bin\") == 0) {",
          "new_line_content": "  return TSDB_CODE_SUCCESS;",
          "content_same": false
        },
        {
          "line": 6231,
          "old_api": "colDataIsNull_s",
          "new_api": null,
          "old_text": "colDataIsNull_s(pInputCol, startIndex)",
          "new_text": null,
          "old_line_content": "  if (colDataIsNull_s(pInputCol, startIndex)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2137,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SLeastSQRInfo* pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "new_line_content": "bool leastSQRFunctionSetup(SqlFunctionCtx* pCtx, SResultRowEntryInfo* pResultInfo) {",
          "content_same": false
        },
        {
          "line": 6238,
          "old_api": "IS_VAR_DATA_TYPE",
          "new_api": null,
          "old_text": "IS_VAR_DATA_TYPE(pInputCol->info.type)",
          "new_text": null,
          "old_line_content": "  if (IS_VAR_DATA_TYPE(pInputCol->info.type)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6239,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(pInfo->data, data,\n           (pInputCol->info.type == TSDB_DATA_TYPE_JSON) ? getJsonValueLen(data) : varDataTLen(data))",
          "new_text": null,
          "old_line_content": "    memcpy(pInfo->data, data,",
          "new_line_content": "  SInputColumnInfoData* pInput = &pCtx->input;",
          "content_same": false
        },
        {
          "line": 4192,
          "old_api": "cJSON_Parse",
          "new_api": null,
          "old_text": "cJSON_Parse(binDescStr)",
          "new_text": null,
          "old_line_content": "  cJSON*  binDesc = cJSON_Parse(binDescStr);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6240,
          "old_api": "varDataTLen",
          "new_api": null,
          "old_text": "varDataTLen(data)",
          "new_text": null,
          "old_line_content": "           (pInputCol->info.type == TSDB_DATA_TYPE_JSON) ? getJsonValueLen(data) : varDataTLen(data));",
          "new_line_content": "  SColumnInfoData*      pInputCol = pInput->pData[0];",
          "content_same": false
        },
        {
          "line": 6242,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(pInfo->data, data, pInputCol->info.bytes)",
          "new_text": null,
          "old_line_content": "    memcpy(pInfo->data, data, pInputCol->info.bytes);",
          "new_line_content": "  int32_t startIndex = pInput->startRowIndex;",
          "content_same": false
        },
        {
          "line": 4195,
          "old_api": "cJSON_IsObject",
          "new_api": null,
          "old_text": "cJSON_IsObject(binDesc)",
          "new_text": null,
          "old_line_content": "  if (cJSON_IsObject(binDesc)) { /* linaer/log bins */",
          "new_line_content": "  int8_t binType;",
          "content_same": false
        },
        {
          "line": 2151,
          "old_api": "colDataIsNull_f",
          "new_api": null,
          "old_text": "colDataIsNull_f(pCol->nullbitmap, i)",
          "new_text": null,
          "old_line_content": "        if (pCol->hasNull && colDataIsNull_f(pCol->nullbitmap, i)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6248,
          "old_api": "SET_VAL",
          "new_api": null,
          "old_text": "SET_VAL(pResInfo, 1, 1)",
          "new_text": null,
          "old_line_content": "  SET_VAL(pResInfo, 1, 1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4202,
          "old_api": "cJSON_GetObjectItem",
          "new_api": null,
          "old_text": "cJSON_GetObjectItem(binDesc, \"start\")",
          "new_text": null,
          "old_line_content": "    cJSON* start = cJSON_GetObjectItem(binDesc, \"start\");",
          "new_line_content": "  } else {",
          "content_same": false
        },
        {
          "line": 4203,
          "old_api": "cJSON_GetObjectItem",
          "new_api": null,
          "old_text": "cJSON_GetObjectItem(binDesc, \"factor\")",
          "new_text": null,
          "old_line_content": "    cJSON* factor = cJSON_GetObjectItem(binDesc, \"factor\");",
          "new_line_content": "    binType = UNKNOWN_BIN;",
          "content_same": false
        },
        {
          "line": 4204,
          "old_api": "cJSON_GetObjectItem",
          "new_api": null,
          "old_text": "cJSON_GetObjectItem(binDesc, \"width\")",
          "new_text": null,
          "old_line_content": "    cJSON* width = cJSON_GetObjectItem(binDesc, \"width\");",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 4205,
          "old_api": "cJSON_GetObjectItem",
          "new_api": null,
          "old_text": "cJSON_GetObjectItem(binDesc, \"count\")",
          "new_text": null,
          "old_line_content": "    cJSON* count = cJSON_GetObjectItem(binDesc, \"count\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4206,
          "old_api": "cJSON_GetObjectItem",
          "new_api": null,
          "old_text": "cJSON_GetObjectItem(binDesc, \"infinity\")",
          "new_text": null,
          "old_line_content": "    cJSON* infinity = cJSON_GetObjectItem(binDesc, \"infinity\");",
          "new_line_content": "  return binType;",
          "content_same": false
        },
        {
          "line": 6254,
          "old_api": "taosArrayGet",
          "new_api": null,
          "old_text": "taosArrayGet(pBlock->pDataBlock, slotId)",
          "new_text": null,
          "old_line_content": "  SColumnInfoData* pCol = taosArrayGet(pBlock->pDataBlock, slotId);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4208,
          "old_api": "cJSON_IsBool",
          "new_api": null,
          "old_text": "cJSON_IsBool(infinity)",
          "new_text": null,
          "old_line_content": "    if (!cJSON_IsNumber(start) || !cJSON_IsNumber(count) || !cJSON_IsBool(infinity)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2162,
          "old_api": "colDataIsNull_f",
          "new_api": null,
          "old_text": "colDataIsNull_f(pCol->nullbitmap, i)",
          "new_text": null,
          "old_line_content": "        if (pCol->hasNull && colDataIsNull_f(pCol->nullbitmap, i)) {",
          "new_line_content": "  int32_t start = pInput->startRowIndex;",
          "content_same": false
        },
        {
          "line": 6263,
          "old_api": "colDataAppend",
          "new_api": null,
          "old_text": "colDataAppend(pCol, currentRow, pInfo->data, pInfo->isNull ? true : false)",
          "new_text": null,
          "old_line_content": "      colDataAppend(pCol, currentRow, pInfo->data, pInfo->isNull ? true : false);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2167,
          "old_api": "LEASTSQR_CAL",
          "new_api": null,
          "old_text": "LEASTSQR_CAL(param, x, plist, i, pInfo->stepVal)",
          "new_text": null,
          "old_line_content": "        LEASTSQR_CAL(param, x, plist, i, pInfo->stepVal);",
          "new_line_content": "      int8_t* plist = (int8_t*)pCol->pData;",
          "content_same": false
        },
        {
          "line": 4216,
          "old_api": "isinf",
          "new_api": null,
          "old_text": "isinf(width->valuedouble)",
          "new_text": null,
          "old_line_content": "    if (isinf(start->valuedouble) || (width != NULL && isinf(width->valuedouble)) ||",
          "new_line_content": "    if (numOfParams != 4) {",
          "content_same": false
        },
        {
          "line": 4217,
          "old_api": "isinf",
          "new_api": null,
          "old_text": "isinf(count->valuedouble)",
          "new_text": null,
          "old_line_content": "        (factor != NULL && isinf(factor->valuedouble)) || (count != NULL && isinf(count->valuedouble))) {",
          "new_line_content": "      return false;",
          "content_same": false
        },
        {
          "line": 2175,
          "old_api": "colDataIsNull_f",
          "new_api": null,
          "old_text": "colDataIsNull_f(pCol->nullbitmap, i)",
          "new_text": null,
          "old_line_content": "        if (pCol->hasNull && colDataIsNull_f(pCol->nullbitmap, i)) {",
          "new_line_content": "      break;",
          "content_same": false
        },
        {
          "line": 6275,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4230,
          "old_api": "taosMemoryCalloc",
          "new_api": null,
          "old_text": "taosMemoryCalloc(numOfBins, sizeof(double))",
          "new_text": null,
          "old_line_content": "    intervals = taosMemoryCalloc(numOfBins, sizeof(double));",
          "new_line_content": "    if (count->valueint <= 0 || count->valueint > 1000) {  // limit count to 1000",
          "content_same": false
        },
        {
          "line": 4231,
          "old_api": "cJSON_IsNumber",
          "new_api": null,
          "old_text": "cJSON_IsNumber(width)",
          "new_text": null,
          "old_line_content": "    if (cJSON_IsNumber(width) && factor == NULL && binType == LINEAR_BIN) {",
          "new_line_content": "      return false;",
          "content_same": false
        },
        {
          "line": 2188,
          "old_api": "colDataIsNull_f",
          "new_api": null,
          "old_text": "colDataIsNull_f(pCol->nullbitmap, i)",
          "new_text": null,
          "old_line_content": "        if (pCol->hasNull && colDataIsNull_f(pCol->nullbitmap, i)) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4239,
          "old_api": "isinf",
          "new_api": null,
          "old_text": "isinf(intervals[startIndex])",
          "new_text": null,
          "old_line_content": "        if (isinf(intervals[startIndex])) {",
          "new_line_content": "    int32_t counter = (int32_t)count->valueint;",
          "content_same": false
        },
        {
          "line": 4240,
          "old_api": "taosMemoryFree",
          "new_api": null,
          "old_text": "taosMemoryFree(intervals)",
          "new_text": null,
          "old_line_content": "          taosMemoryFree(intervals);",
          "new_line_content": "    if (infinity->valueint == false) {",
          "content_same": false
        },
        {
          "line": 6288,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pInputCol, i)",
          "new_text": null,
          "old_line_content": "    char* data = colDataGetData(pInputCol, i);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 6289,
          "old_api": "getRowPTs",
          "new_api": null,
          "old_text": "getRowPTs(pInput->pPTS, i)",
          "new_text": null,
          "old_line_content": "    TSKEY cts = getRowPTs(pInput->pPTS, i);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6291,
          "old_api": "doSaveLastrow",
          "new_api": null,
          "old_text": "doSaveLastrow(pCtx, data, i, cts, pInfo)",
          "new_text": null,
          "old_line_content": "      doSaveLastrow(pCtx, data, i, cts, pInfo);",
          "new_line_content": "  int32_t numOfElems = 0;",
          "content_same": false
        },
        {
          "line": 4245,
          "old_api": "cJSON_IsNumber",
          "new_api": null,
          "old_text": "cJSON_IsNumber(factor)",
          "new_text": null,
          "old_line_content": "    } else if (cJSON_IsNumber(factor) && width == NULL && binType == LOG_BIN) {",
          "new_line_content": "      numOfBins = counter + 3;",
          "content_same": false
        },
        {
          "line": 6296,
          "old_api": "SET_VAL",
          "new_api": null,
          "old_text": "SET_VAL(pResInfo, numOfElems, 1)",
          "new_text": null,
          "old_line_content": "  SET_VAL(pResInfo, numOfElems, 1);",
          "new_line_content": "  SInputColumnInfoData* pInput = &pCtx->input;",
          "content_same": false
        },
        {
          "line": 2201,
          "old_api": "colDataIsNull_f",
          "new_api": null,
          "old_text": "colDataIsNull_f(pCol->nullbitmap, i)",
          "new_text": null,
          "old_line_content": "        if (pCol->hasNull && colDataIsNull_f(pCol->nullbitmap, i)) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2205,
          "old_api": "LEASTSQR_CAL",
          "new_api": null,
          "old_text": "LEASTSQR_CAL(param, x, plist, i, pInfo->stepVal)",
          "new_text": null,
          "old_line_content": "        LEASTSQR_CAL(param, x, plist, i, pInfo->stepVal);",
          "new_line_content": "      for (int32_t i = start; i < numOfRows + pInput->startRowIndex; ++i) {",
          "content_same": false
        },
        {
          "line": 4256,
          "old_api": "pow",
          "new_api": null,
          "old_text": "pow(factor->valuedouble, i * 1.0)",
          "new_text": null,
          "old_line_content": "        intervals[startIndex] = start->valuedouble * pow(factor->valuedouble, i * 1.0);",
          "new_line_content": "        intervals[startIndex] = start->valuedouble + i * width->valuedouble;",
          "content_same": false
        },
        {
          "line": 2212,
          "old_api": "colDataIsNull_f",
          "new_api": null,
          "old_text": "colDataIsNull_f(pCol->nullbitmap, i)",
          "new_text": null,
          "old_line_content": "        if (pCol->hasNull && colDataIsNull_f(pCol->nullbitmap, i)) {",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 4264,
          "old_api": "taosMemoryFree",
          "new_api": null,
          "old_text": "taosMemoryFree(intervals)",
          "new_text": null,
          "old_line_content": "      taosMemoryFree(intervals);",
          "new_line_content": "      // log bin process",
          "content_same": false
        },
        {
          "line": 2217,
          "old_api": "LEASTSQR_CAL",
          "new_api": null,
          "old_text": "LEASTSQR_CAL(param, x, plist, i, pInfo->stepVal)",
          "new_text": null,
          "old_line_content": "        LEASTSQR_CAL(param, x, plist, i, pInfo->stepVal);",
          "new_line_content": "      uint8_t* plist = (uint8_t*)pCol->pData;",
          "content_same": false
        },
        {
          "line": 4272,
          "old_api": "ASSERT",
          "new_api": null,
          "old_text": "ASSERT(numOfBins >= 4)",
          "new_text": null,
          "old_line_content": "      ASSERT(numOfBins >= 4);",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 2225,
          "old_api": "colDataIsNull_f",
          "new_api": null,
          "old_text": "colDataIsNull_f(pCol->nullbitmap, i)",
          "new_text": null,
          "old_line_content": "        if (pCol->hasNull && colDataIsNull_f(pCol->nullbitmap, i)) {",
          "new_line_content": "      break;",
          "content_same": false
        },
        {
          "line": 4277,
          "old_api": "cJSON_IsArray",
          "new_api": null,
          "old_text": "cJSON_IsArray(binDesc)",
          "new_text": null,
          "old_line_content": "  } else if (cJSON_IsArray(binDesc)) { /* user input bins */",
          "new_line_content": "          return false;",
          "content_same": false
        },
        {
          "line": 4281,
          "old_api": "cJSON_GetArraySize",
          "new_api": null,
          "old_text": "cJSON_GetArraySize(binDesc)",
          "new_text": null,
          "old_line_content": "    numOfBins = cJSON_GetArraySize(binDesc);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 4285,
          "old_api": "taosMemoryFree",
          "new_api": null,
          "old_text": "taosMemoryFree(intervals)",
          "new_text": null,
          "old_line_content": "      taosMemoryFree(intervals);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2238,
          "old_api": "colDataIsNull_f",
          "new_api": null,
          "old_text": "colDataIsNull_f(pCol->nullbitmap, i)",
          "new_text": null,
          "old_line_content": "        if (pCol->hasNull && colDataIsNull_f(pCol->nullbitmap, i)) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4291,
          "old_api": "cJSON_IsNumber",
          "new_api": null,
          "old_text": "cJSON_IsNumber(bin)",
          "new_text": null,
          "old_line_content": "      if (!cJSON_IsNumber(bin)) {",
          "new_line_content": "      if (intervals[1] > intervals[numOfBins - 2]) {",
          "content_same": false
        },
        {
          "line": 4296,
          "old_api": "taosMemoryFree",
          "new_api": null,
          "old_text": "taosMemoryFree(intervals)",
          "new_text": null,
          "old_line_content": "        taosMemoryFree(intervals);",
          "new_line_content": "    if (binType != USER_INPUT_BIN) {",
          "content_same": false
        },
        {
          "line": 2251,
          "old_api": "colDataIsNull_f",
          "new_api": null,
          "old_text": "colDataIsNull_f(pCol->nullbitmap, i)",
          "new_text": null,
          "old_line_content": "        if (pCol->hasNull && colDataIsNull_f(pCol->nullbitmap, i)) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2264,
          "old_api": "colDataIsNull_f",
          "new_api": null,
          "old_text": "colDataIsNull_f(pCol->nullbitmap, i)",
          "new_text": null,
          "old_line_content": "        if (pCol->hasNull && colDataIsNull_f(pCol->nullbitmap, i)) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4319,
          "old_api": "functionSetup",
          "new_api": null,
          "old_text": "functionSetup(pCtx, pResultInfo)",
          "new_text": null,
          "old_line_content": "  if (!functionSetup(pCtx, pResultInfo)) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4323,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": null,
          "old_text": "GET_ROWCELL_INTERBUF(pResultInfo)",
          "new_text": null,
          "old_line_content": "  SHistoFuncInfo* pInfo = GET_ROWCELL_INTERBUF(pResultInfo);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4328,
          "old_api": "varDataVal",
          "new_api": null,
          "old_text": "varDataVal(pCtx->param[1].param.pz)",
          "new_text": null,
          "old_line_content": "  int8_t binType = getHistogramBinType(varDataVal(pCtx->param[1].param.pz));",
          "new_line_content": "    pInfo->bins[i].upper = intervals[i + 1] > intervals[i] ? intervals[i + 1] : intervals[i];",
          "content_same": false
        },
        {
          "line": 2286,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SET_VAL(GET_RES_INFO(pCtx), numOfElem, 1);",
          "new_line_content": "        numOfElem++;",
          "content_same": false
        },
        {
          "line": 2293,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SLeastSQRInfo*       pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "new_line_content": "      numOfElem = 1;",
          "content_same": false
        },
        {
          "line": 2295,
          "old_api": "taosArrayGet",
          "new_api": null,
          "old_text": "taosArrayGet(pBlock->pDataBlock, slotId)",
          "new_text": null,
          "old_line_content": "  SColumnInfoData*     pCol = taosArrayGet(pBlock->pDataBlock, slotId);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4345,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SHistoFuncInfo* pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2300,
          "old_api": "colDataAppendNULL",
          "new_api": null,
          "old_text": "colDataAppendNULL(pCol, currentRow)",
          "new_text": null,
          "old_line_content": "    colDataAppendNULL(pCol, currentRow);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4357,
          "old_api": "colDataIsNull_f",
          "new_api": null,
          "old_text": "colDataIsNull_f(pCol->nullbitmap, i)",
          "new_text": null,
          "old_line_content": "    if (pCol->hasNull && colDataIsNull_f(pCol->nullbitmap, i)) {",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 2326,
          "old_api": "varDataVal",
          "new_api": null,
          "old_text": "varDataVal(buf)",
          "new_text": null,
          "old_line_content": "      snprintf(varDataVal(buf), sizeof(buf) - VARSTR_HEADER_SIZE, \"{slop:%.6lf, intercept:%.6lf}\", param02, param12);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2327,
          "old_api": "varDataSetLen",
          "new_api": null,
          "old_text": "varDataSetLen(buf, len)",
          "new_text": null,
          "old_line_content": "  varDataSetLen(buf, len);",
          "new_line_content": "  double param00 = param[0][0] - param[1][0] * (param[0][1] / param[1][1]);",
          "content_same": false
        },
        {
          "line": 2329,
          "old_api": "colDataAppend",
          "new_api": null,
          "old_text": "colDataAppend(pCol, currentRow, buf, pResInfo->isNullRes)",
          "new_text": null,
          "old_line_content": "  colDataAppend(pCol, currentRow, buf, pResInfo->isNullRes);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4377,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "    GET_RES_INFO(pCtx)->numOfRes = pInfo->numOfBins;",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4379,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "    GET_RES_INFO(pCtx)->numOfRes = 1;",
          "new_line_content": "    numOfElems++;",
          "content_same": false
        },
        {
          "line": 4384,
          "old_api": "histogramFunctionImpl",
          "new_api": null,
          "old_text": "histogramFunctionImpl(pCtx, false)",
          "new_text": null,
          "old_line_content": "int32_t histogramFunction(SqlFunctionCtx* pCtx) { return histogramFunctionImpl(pCtx, false); }",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4386,
          "old_api": "histogramFunctionImpl",
          "new_api": null,
          "old_text": "histogramFunctionImpl(pCtx, true)",
          "new_text": null,
          "old_line_content": "int32_t histogramFunctionPartial(SqlFunctionCtx* pCtx) { return histogramFunctionImpl(pCtx, true); }",
          "new_line_content": "      if (v > pInfo->bins[k].lower && v <= pInfo->bins[k].upper) {",
          "content_same": false
        },
        {
          "line": 2340,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pDestCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pDResInfo = GET_RES_INFO(pDestCtx);",
          "new_line_content": "  param12 /= param[1][1];",
          "content_same": false
        },
        {
          "line": 2341,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": null,
          "old_text": "GET_ROWCELL_INTERBUF(pDResInfo)",
          "new_text": null,
          "old_line_content": "  SLeastSQRInfo*       pDBuf = GET_ROWCELL_INTERBUF(pDResInfo);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2346,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": null,
          "old_text": "GET_ROWCELL_INTERBUF(pSResInfo)",
          "new_text": null,
          "old_line_content": "  SLeastSQRInfo*       pSBuf = GET_ROWCELL_INTERBUF(pSResInfo);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2356,
          "old_api": "TMAX",
          "new_api": null,
          "old_text": "TMAX(pDResInfo->numOfRes, pSResInfo->numOfRes)",
          "new_text": null,
          "old_line_content": "  pDResInfo->numOfRes = TMAX(pDResInfo->numOfRes, pSResInfo->numOfRes);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4409,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pCol, i)",
          "new_text": null,
          "old_line_content": "    char*           data = colDataGetData(pCol, i);",
          "new_line_content": "  pOutput->totalCount += pInput->totalCount;",
          "content_same": false
        },
        {
          "line": 4410,
          "old_api": "varDataVal",
          "new_api": null,
          "old_text": "varDataVal(data)",
          "new_text": null,
          "old_line_content": "    SHistoFuncInfo* pInputInfo = (SHistoFuncInfo*)varDataVal(data);",
          "new_line_content": "  for (int32_t k = 0; k < pOutput->numOfBins; ++k) {",
          "content_same": false
        },
        {
          "line": 4411,
          "old_api": "histogramTransferInfo",
          "new_api": null,
          "old_text": "histogramTransferInfo(pInputInfo, pInfo)",
          "new_text": null,
          "old_line_content": "    histogramTransferInfo(pInputInfo, pInfo);",
          "new_line_content": "    pOutput->bins[k].lower = pInput->bins[k].lower;",
          "content_same": false
        },
        {
          "line": 4414,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SET_VAL(GET_RES_INFO(pCtx), pInfo->numOfBins, pInfo->numOfBins);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 2367,
          "old_api": "functionSetup",
          "new_api": null,
          "old_text": "functionSetup(pCtx, pResultInfo)",
          "new_text": null,
          "old_line_content": "  if (!functionSetup(pCtx, pResultInfo)) {",
          "new_line_content": "    pDparam[0][0] += pDBuf->startVal * pDBuf->startVal;",
          "content_same": false
        },
        {
          "line": 4419,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "  SColumnInfoData*      pCol = pInput->pData[0];",
          "content_same": false
        },
        {
          "line": 2372,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": null,
          "old_text": "GET_ROWCELL_INTERBUF(pResultInfo)",
          "new_text": null,
          "old_line_content": "  SPercentileInfo* pInfo = GET_ROWCELL_INTERBUF(pResultInfo);",
          "new_line_content": "  pDparam[1][2] += pSparam[1][2];",
          "content_same": false
        },
        {
          "line": 2373,
          "old_api": "SET_DOUBLE_VAL",
          "new_api": null,
          "old_text": "SET_DOUBLE_VAL(&pInfo->minval, DBL_MAX)",
          "new_text": null,
          "old_line_content": "  SET_DOUBLE_VAL(&pInfo->minval, DBL_MAX);",
          "new_line_content": "  pDBuf->num += pSBuf->num;",
          "content_same": false
        },
        {
          "line": 2382,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4443,
          "old_api": "varDataVal",
          "new_api": null,
          "old_text": "varDataVal(buf)",
          "new_text": null,
          "old_line_content": "      len = sprintf(varDataVal(buf), \"{\\\"lower_bin\\\":%g, \\\"upper_bin\\\":%g, \\\"count\\\":%lf}\", pInfo->bins[i].lower,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4446,
          "old_api": "varDataSetLen",
          "new_api": null,
          "old_text": "varDataSetLen(buf, len)",
          "new_text": null,
          "old_line_content": "    varDataSetLen(buf, len);",
          "new_line_content": "      if (pInfo->totalCount != 0) {",
          "content_same": false
        },
        {
          "line": 2399,
          "old_api": "tMemBucketCreate",
          "new_api": null,
          "old_text": "tMemBucketCreate(pCol->info.bytes, type, pInfo->minval, pInfo->maxval)",
          "new_text": null,
          "old_line_content": "      pInfo->pMemBucket = tMemBucketCreate(pCol->info.bytes, type, pInfo->minval, pInfo->maxval);",
          "new_line_content": "  int32_t              numOfElems = 0;",
          "content_same": false
        },
        {
          "line": 4447,
          "old_api": "colDataAppend",
          "new_api": null,
          "old_text": "colDataAppend(pCol, currentRow, buf, false)",
          "new_text": null,
          "old_line_content": "    colDataAppend(pCol, currentRow, buf, false);",
          "new_line_content": "        pInfo->bins[k].percentage = pInfo->bins[k].count / (double)pInfo->totalCount;",
          "content_same": false
        },
        {
          "line": 2407,
          "old_api": "IS_SIGNED_NUMERIC_TYPE",
          "new_api": null,
          "old_text": "IS_SIGNED_NUMERIC_TYPE(type)",
          "new_text": null,
          "old_line_content": "      if (IS_SIGNED_NUMERIC_TYPE(type)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4455,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "    int32_t len;",
          "content_same": false
        },
        {
          "line": 2409,
          "old_api": "GET_INT64_VAL",
          "new_api": null,
          "old_text": "GET_INT64_VAL(&pAgg->max)",
          "new_text": null,
          "old_line_content": "        tmax = (double)GET_INT64_VAL(&pAgg->max);",
          "new_line_content": "  if (pCtx->scanFlag == REPEAT_SCAN && pInfo->stage == 0) {",
          "content_same": false
        },
        {
          "line": 2410,
          "old_api": "IS_FLOAT_TYPE",
          "new_api": null,
          "old_text": "IS_FLOAT_TYPE(type)",
          "new_text": null,
          "old_line_content": "      } else if (IS_FLOAT_TYPE(type)) {",
          "new_line_content": "    pInfo->stage += 1;",
          "content_same": false
        },
        {
          "line": 2411,
          "old_api": "GET_DOUBLE_VAL",
          "new_api": null,
          "old_text": "GET_DOUBLE_VAL(&pAgg->min)",
          "new_text": null,
          "old_line_content": "        tmin = GET_DOUBLE_VAL(&pAgg->min);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2412,
          "old_api": "GET_DOUBLE_VAL",
          "new_api": null,
          "old_text": "GET_DOUBLE_VAL(&pAgg->max)",
          "new_text": null,
          "old_line_content": "        tmax = GET_DOUBLE_VAL(&pAgg->max);",
          "new_line_content": "    // all data are null, set it completed",
          "content_same": false
        },
        {
          "line": 2413,
          "old_api": "IS_UNSIGNED_NUMERIC_TYPE",
          "new_api": null,
          "old_text": "IS_UNSIGNED_NUMERIC_TYPE(type)",
          "new_text": null,
          "old_line_content": "      } else if (IS_UNSIGNED_NUMERIC_TYPE(type)) {",
          "new_line_content": "    if (pInfo->numOfElems == 0) {",
          "content_same": false
        },
        {
          "line": 2414,
          "old_api": "GET_UINT64_VAL",
          "new_api": null,
          "old_text": "GET_UINT64_VAL(&pAgg->min)",
          "new_text": null,
          "old_line_content": "        tmin = (double)GET_UINT64_VAL(&pAgg->min);",
          "new_line_content": "      pResInfo->complete = true;",
          "content_same": false
        },
        {
          "line": 2415,
          "old_api": "GET_UINT64_VAL",
          "new_api": null,
          "old_text": "GET_UINT64_VAL(&pAgg->max)",
          "new_text": null,
          "old_line_content": "        tmax = (double)GET_UINT64_VAL(&pAgg->max);",
          "new_line_content": "      return 0;",
          "content_same": false
        },
        {
          "line": 4456,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SHistoFuncInfo*      pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "new_line_content": "    char    buf[512] = {0};",
          "content_same": false
        },
        {
          "line": 4460,
          "old_api": "varDataVal",
          "new_api": null,
          "old_text": "varDataVal(res)",
          "new_text": null,
          "old_line_content": "  memcpy(varDataVal(res), pInfo, resultBytes);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 2418,
          "old_api": "GET_DOUBLE_VAL",
          "new_api": null,
          "old_text": "GET_DOUBLE_VAL(&pInfo->minval)",
          "new_text": null,
          "old_line_content": "      if (GET_DOUBLE_VAL(&pInfo->minval) > tmin) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2419,
          "old_api": "SET_DOUBLE_VAL",
          "new_api": null,
          "old_text": "SET_DOUBLE_VAL(&pInfo->minval, tmin)",
          "new_text": null,
          "old_line_content": "        SET_DOUBLE_VAL(&pInfo->minval, tmin);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 4466,
          "old_api": "colDataAppend",
          "new_api": null,
          "old_text": "colDataAppend(pCol, pBlock->info.rows, res, false)",
          "new_text": null,
          "old_line_content": "  colDataAppend(pCol, pBlock->info.rows, res, false);",
          "new_line_content": "    currentRow++;",
          "content_same": false
        },
        {
          "line": 4468,
          "old_api": "taosMemoryFree",
          "new_api": null,
          "old_text": "taosMemoryFree(res)",
          "new_text": null,
          "old_line_content": "  taosMemoryFree(res);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2422,
          "old_api": "GET_DOUBLE_VAL",
          "new_api": null,
          "old_text": "GET_DOUBLE_VAL(&pInfo->maxval)",
          "new_text": null,
          "old_line_content": "      if (GET_DOUBLE_VAL(&pInfo->maxval) < tmax) {",
          "new_line_content": "  if (pInfo->stage == 0) {",
          "content_same": false
        },
        {
          "line": 2423,
          "old_api": "SET_DOUBLE_VAL",
          "new_api": null,
          "old_text": "SET_DOUBLE_VAL(&pInfo->maxval, tmax)",
          "new_text": null,
          "old_line_content": "        SET_DOUBLE_VAL(&pInfo->maxval, tmax);",
          "new_line_content": "    if (pCtx->input.colDataAggIsSet) {",
          "content_same": false
        },
        {
          "line": 4477,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": null,
          "old_text": "GET_ROWCELL_INTERBUF(pSResInfo)",
          "new_text": null,
          "old_line_content": "  SHistoFuncInfo*      pSBuf = GET_ROWCELL_INTERBUF(pSResInfo);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4480,
          "old_api": "TMAX",
          "new_api": null,
          "old_text": "TMAX(pDResInfo->numOfRes, pSResInfo->numOfRes)",
          "new_text": null,
          "old_line_content": "  pDResInfo->numOfRes = TMAX(pDResInfo->numOfRes, pSResInfo->numOfRes);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2435,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pCol, i)",
          "new_text": null,
          "old_line_content": "        char* data = colDataGetData(pCol, i);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2439,
          "old_api": "GET_DOUBLE_VAL",
          "new_api": null,
          "old_text": "GET_DOUBLE_VAL(&pInfo->minval)",
          "new_text": null,
          "old_line_content": "        if (v < GET_DOUBLE_VAL(&pInfo->minval)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2443,
          "old_api": "GET_DOUBLE_VAL",
          "new_api": null,
          "old_text": "GET_DOUBLE_VAL(&pInfo->maxval)",
          "new_text": null,
          "old_line_content": "        if (v > GET_DOUBLE_VAL(&pInfo->maxval)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2444,
          "old_api": "SET_DOUBLE_VAL",
          "new_api": null,
          "old_text": "SET_DOUBLE_VAL(&pInfo->maxval, v)",
          "new_text": null,
          "old_line_content": "          SET_DOUBLE_VAL(&pInfo->maxval, v);",
          "new_line_content": "      pInfo->numOfElems += (pInput->numOfRows - pAgg->numOfNull);",
          "content_same": false
        },
        {
          "line": 4493,
          "old_api": "MurmurHash3_64",
          "new_api": null,
          "old_text": "MurmurHash3_64(data, bytes)",
          "new_text": null,
          "old_line_content": "  uint64_t hash = MurmurHash3_64(data, bytes);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2454,
          "old_api": "colDataIsNull_f",
          "new_api": null,
          "old_text": "colDataIsNull_f(pCol->nullbitmap, i)",
          "new_text": null,
          "old_line_content": "      if (colDataIsNull_f(pCol->nullbitmap, i)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2460,
          "old_api": "tMemBucketPut",
          "new_api": null,
          "old_text": "tMemBucketPut(pInfo->pMemBucket, data, 1)",
          "new_text": null,
          "old_line_content": "      tMemBucketPut(pInfo->pMemBucket, data, 1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2463,
          "old_api": "SET_VAL",
          "new_api": null,
          "old_text": "SET_VAL(pResInfo, numOfElems, 1)",
          "new_text": null,
          "old_line_content": "    SET_VAL(pResInfo, numOfElems, 1);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2474,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 2475,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": null,
          "old_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "new_text": null,
          "old_line_content": "  SPercentileInfo*     ppInfo = (SPercentileInfo*)GET_ROWCELL_INTERBUF(pResInfo);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2479,
          "old_api": "getPercentile",
          "new_api": null,
          "old_text": "getPercentile(pMemBucket, v)",
          "new_text": null,
          "old_line_content": "    SET_DOUBLE_VAL(&ppInfo->result, getPercentile(pMemBucket, v));",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2482,
          "old_api": "tMemBucketDestroy",
          "new_api": null,
          "old_text": "tMemBucketDestroy(pMemBucket)",
          "new_text": null,
          "old_line_content": "  tMemBucketDestroy(pMemBucket);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 2483,
          "old_api": "functionFinalize",
          "new_api": null,
          "old_text": "functionFinalize(pCtx, pBlock)",
          "new_text": null,
          "old_line_content": "  return functionFinalize(pCtx, pBlock);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4534,
          "old_api": "sqrt",
          "new_api": null,
          "old_text": "sqrt(x)",
          "new_text": null,
          "old_line_content": "    x = sqrt(x);",
          "new_line_content": "      bucketHisto[bytes[0]]++;",
          "content_same": false
        },
        {
          "line": 2489,
          "old_api": "TDIGEST_SIZE",
          "new_api": null,
          "old_text": "TDIGEST_SIZE(COMPRESSION)",
          "new_text": null,
          "old_line_content": "  int32_t bytesDigest = (int32_t)(sizeof(SAPercentileInfo) + TDIGEST_SIZE(COMPRESSION));",
          "new_line_content": "  double    v =",
          "content_same": false
        },
        {
          "line": 4537,
          "old_api": "pow",
          "new_api": null,
          "old_text": "pow(1 - x, 2)",
          "new_text": null,
          "old_line_content": "    z -= pow(1 - x, 2) * y;",
          "new_line_content": "      bucketHisto[bytes[3]]++;",
          "content_same": false
        },
        {
          "line": 2498,
          "old_api": "TMAX",
          "new_api": null,
          "old_text": "TMAX(bytesHist, bytesDigest)",
          "new_text": null,
          "old_line_content": "  return TMAX(bytesHist, bytesDigest);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 2503,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(algoStr, \"default\")",
          "new_text": null,
          "old_line_content": "  if (strcasecmp(algoStr, \"default\") == 0) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2505,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(algoStr, \"t-digest\")",
          "new_text": null,
          "old_line_content": "  } else if (strcasecmp(algoStr, \"t-digest\") == 0) {",
          "new_line_content": "  int32_t bytesHist =",
          "content_same": false
        },
        {
          "line": 4561,
          "old_api": "hllBucketHisto",
          "new_api": null,
          "old_text": "hllBucketHisto(buckets, buckethisto)",
          "new_text": null,
          "old_line_content": "  hllBucketHisto(buckets, buckethisto);",
          "new_line_content": "  if (x == 1.0) return INFINITY;",
          "content_same": false
        },
        {
          "line": 4563,
          "old_api": "hllTau",
          "new_api": null,
          "old_text": "hllTau((m - buckethisto[HLL_DATA_BITS + 1]) / (double)m)",
          "new_text": null,
          "old_line_content": "  double z = m * hllTau((m - buckethisto[HLL_DATA_BITS + 1]) / (double)m);",
          "new_line_content": "  double y = 1;",
          "content_same": false
        },
        {
          "line": 4569,
          "old_api": "hllSigma",
          "new_api": null,
          "old_text": "hllSigma(buckethisto[0] / (double)m)",
          "new_text": null,
          "old_line_content": "  z += m * hllSigma(buckethisto[0] / (double)m);",
          "new_line_content": "    y += y;",
          "content_same": false
        },
        {
          "line": 4570,
          "old_api": "llroundl",
          "new_api": null,
          "old_text": "llroundl(HLL_ALPHA_INF * m * m / z)",
          "new_text": null,
          "old_line_content": "  double E = (double)llroundl(HLL_ALPHA_INF * m * m / z);",
          "new_line_content": "  } while (zPrime != z);",
          "content_same": false
        },
        {
          "line": 2524,
          "old_api": "functionSetup",
          "new_api": null,
          "old_text": "functionSetup(pCtx, pResultInfo)",
          "new_text": null,
          "old_line_content": "  if (!functionSetup(pCtx, pResultInfo)) {",
          "new_line_content": "    algoType = APERCT_ALGO_TDIGEST;",
          "content_same": false
        },
        {
          "line": 2528,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": null,
          "old_text": "GET_ROWCELL_INTERBUF(pResultInfo)",
          "new_text": null,
          "old_line_content": "  SAPercentileInfo* pInfo = GET_ROWCELL_INTERBUF(pResultInfo);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4576,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SHLLInfo* pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "new_line_content": "static uint64_t hllCountCnt(uint8_t* buckets) {",
          "content_same": false
        },
        {
          "line": 2532,
          "old_api": "IS_UNSIGNED_NUMERIC_TYPE",
          "new_api": null,
          "old_text": "IS_UNSIGNED_NUMERIC_TYPE(pVal->nType)",
          "new_text": null,
          "old_line_content": "      (IS_SIGNED_NUMERIC_TYPE(pVal->nType) ? pVal->i : (IS_UNSIGNED_NUMERIC_TYPE(pVal->nType) ? pVal->u : pVal->d));",
          "new_line_content": "static void buildHistogramInfo(SAPercentileInfo* pInfo) {",
          "content_same": false
        },
        {
          "line": 2537,
          "old_api": "varDataVal",
          "new_api": null,
          "old_text": "varDataVal(pCtx->param[2].param.pz)",
          "new_text": null,
          "old_line_content": "    pInfo->algo = getApercentileAlgo(varDataVal(pCtx->param[2].param.pz));",
          "new_line_content": "static void buildTDigestInfo(SAPercentileInfo* pInfo) {",
          "content_same": false
        },
        {
          "line": 4589,
          "old_api": "colDataIsNull_s",
          "new_api": null,
          "old_text": "colDataIsNull_s(pCol, i)",
          "new_text": null,
          "old_line_content": "    if (pCol->hasNull && colDataIsNull_s(pCol, i)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2545,
          "old_api": "tdigestNewFrom",
          "new_api": null,
          "old_text": "tdigestNewFrom(tmp, COMPRESSION)",
          "new_text": null,
          "old_line_content": "    pInfo->pTDigest = tdigestNewFrom(tmp, COMPRESSION);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2547,
          "old_api": "buildHistogramInfo",
          "new_api": null,
          "old_text": "buildHistogramInfo(pInfo)",
          "new_text": null,
          "old_line_content": "    buildHistogramInfo(pInfo);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2548,
          "old_api": "tHistogramCreateFrom",
          "new_api": null,
          "old_text": "tHistogramCreateFrom(tmp, MAX_HISTOGRAM_BIN)",
          "new_text": null,
          "old_line_content": "    pInfo->pHisto = tHistogramCreateFrom(tmp, MAX_HISTOGRAM_BIN);",
          "new_line_content": "  SVariant* pVal = &pCtx->param[1].param;",
          "content_same": false
        },
        {
          "line": 2549,
          "old_api": "qDebug",
          "new_api": null,
          "old_text": "qDebug(\"%s set up histogram, numOfElems:%\" PRId64 \", numOfEntry:%d, pHisto:%p, elems:%p\", __FUNCTION__,\n           pInfo->pHisto->numOfElems, pInfo->pHisto->numOfEntries, pInfo->pHisto, pInfo->pHisto->elems)",
          "new_text": null,
          "old_line_content": "    qDebug(\"%s set up histogram, numOfElems:%\" PRId64 \", numOfEntry:%d, pHisto:%p, elems:%p\", __FUNCTION__,",
          "new_line_content": "  pInfo->percent =",
          "content_same": false
        },
        {
          "line": 4595,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pCol, i)",
          "new_text": null,
          "old_line_content": "    char* data = colDataGetData(pCol, i);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4596,
          "old_api": "IS_VAR_DATA_TYPE",
          "new_api": null,
          "old_text": "IS_VAR_DATA_TYPE(type)",
          "new_text": null,
          "old_line_content": "    if (IS_VAR_DATA_TYPE(type)) {",
          "new_line_content": "  SInputColumnInfoData* pInput = &pCtx->input;",
          "content_same": false
        },
        {
          "line": 4597,
          "old_api": "varDataLen",
          "new_api": null,
          "old_text": "varDataLen(data)",
          "new_text": null,
          "old_line_content": "      bytes = varDataLen(data);",
          "new_line_content": "  SColumnInfoData*      pCol = pInput->pData[0];",
          "content_same": false
        },
        {
          "line": 4598,
          "old_api": "varDataVal",
          "new_api": null,
          "old_text": "varDataVal(data)",
          "new_text": null,
          "old_line_content": "      data = varDataVal(data);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4602,
          "old_api": "hllCountNum",
          "new_api": null,
          "old_text": "hllCountNum(data, bytes, &index)",
          "new_text": null,
          "old_line_content": "    uint8_t count = hllCountNum(data, bytes, &index);",
          "new_line_content": "  int32_t start = pInput->startRowIndex;",
          "content_same": false
        },
        {
          "line": 2558,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo*  pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2564,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": null,
          "old_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "new_text": null,
          "old_line_content": "  SAPercentileInfo* pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "new_line_content": "  } else {",
          "content_same": false
        },
        {
          "line": 4612,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "    SET_VAL(GET_RES_INFO(pCtx), 0, 1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2568,
          "old_api": "buildTDigestInfo",
          "new_api": null,
          "old_text": "buildTDigestInfo(pInfo)",
          "new_text": null,
          "old_line_content": "    buildTDigestInfo(pInfo);",
          "new_line_content": "           pInfo->pHisto->numOfElems, pInfo->pHisto->numOfEntries, pInfo->pHisto, pInfo->pHisto->elems);",
          "content_same": false
        },
        {
          "line": 2569,
          "old_api": "tdigestAutoFill",
          "new_api": null,
          "old_text": "tdigestAutoFill(pInfo->pTDigest, COMPRESSION)",
          "new_text": null,
          "old_line_content": "    tdigestAutoFill(pInfo->pTDigest, COMPRESSION);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 2571,
          "old_api": "colDataIsNull_f",
          "new_api": null,
          "old_text": "colDataIsNull_f(pCol->nullbitmap, i)",
          "new_text": null,
          "old_line_content": "      if (colDataIsNull_f(pCol->nullbitmap, i)) {",
          "new_line_content": "  return true;",
          "content_same": false
        },
        {
          "line": 2575,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pCol, i)",
          "new_text": null,
          "old_line_content": "      char* data = colDataGetData(pCol, i);",
          "new_line_content": "  int32_t               numOfElems = 0;",
          "content_same": false
        },
        {
          "line": 2580,
          "old_api": "tdigestAdd",
          "new_api": null,
          "old_text": "tdigestAdd(pInfo->pTDigest, v, w)",
          "new_text": null,
          "old_line_content": "      tdigestAdd(pInfo->pTDigest, v, w);",
          "new_line_content": "  int32_t          type = pCol->info.type;",
          "content_same": false
        },
        {
          "line": 2585,
          "old_api": "buildHistogramInfo",
          "new_api": null,
          "old_text": "buildHistogramInfo(pInfo)",
          "new_text": null,
          "old_line_content": "    buildHistogramInfo(pInfo);",
          "new_line_content": "  if (pInfo->algo == APERCT_ALGO_TDIGEST) {",
          "content_same": false
        },
        {
          "line": 4634,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SHLLInfo* pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2590,
          "old_api": "colDataIsNull_f",
          "new_api": null,
          "old_text": "colDataIsNull_f(pCol->nullbitmap, i)",
          "new_text": null,
          "old_line_content": "      if (colDataIsNull_f(pCol->nullbitmap, i)) {",
          "new_line_content": "        continue;",
          "content_same": false
        },
        {
          "line": 4639,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pCol, i)",
          "new_text": null,
          "old_line_content": "    char*     data = colDataGetData(pCol, i);",
          "new_line_content": "  for (int32_t k = 0; k < HLL_BUCKETS; ++k) {",
          "content_same": false
        },
        {
          "line": 4640,
          "old_api": "varDataVal",
          "new_api": null,
          "old_text": "varDataVal(data)",
          "new_text": null,
          "old_line_content": "    SHLLInfo* pInputInfo = (SHLLInfo*)varDataVal(data);",
          "new_line_content": "    if (pOutput->buckets[k] < pInput->buckets[k]) {",
          "content_same": false
        },
        {
          "line": 4641,
          "old_api": "hllTransferInfo",
          "new_api": null,
          "old_text": "hllTransferInfo(pInputInfo, pInfo)",
          "new_text": null,
          "old_line_content": "    hllTransferInfo(pInputInfo, pInfo);",
          "new_line_content": "      pOutput->buckets[k] = pInput->buckets[k];",
          "content_same": false
        },
        {
          "line": 2594,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pCol, i)",
          "new_text": null,
          "old_line_content": "      char* data = colDataGetData(pCol, i);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4645,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "    SET_VAL(GET_RES_INFO(pCtx), 0, 1);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4647,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "    SET_VAL(GET_RES_INFO(pCtx), 1, 1);",
          "new_line_content": "int32_t hllFunctionMerge(SqlFunctionCtx* pCtx) {",
          "content_same": false
        },
        {
          "line": 2601,
          "old_api": "qDebug",
          "new_api": null,
          "old_text": "qDebug(\"%s after add %d elements into histogram, total:%\" PRId64 \", numOfEntry:%d, pHisto:%p, elems: %p\",\n           __FUNCTION__, numOfElems, pInfo->pHisto->numOfElems, pInfo->pHisto->numOfEntries, pInfo->pHisto,\n           pInfo->pHisto->elems)",
          "new_text": null,
          "old_line_content": "    qDebug(\"%s after add %d elements into histogram, total:%\" PRId64 \", numOfEntry:%d, pHisto:%p, elems: %p\",",
          "new_line_content": "    // might be a race condition here that pHisto can be overwritten or setup function",
          "content_same": false
        },
        {
          "line": 2606,
          "old_api": "SET_VAL",
          "new_api": null,
          "old_text": "SET_VAL(pResInfo, numOfElems, 1)",
          "new_text": null,
          "old_line_content": "  SET_VAL(pResInfo, numOfElems, 1);",
          "new_line_content": "           pInfo->pHisto->elems);",
          "content_same": false
        },
        {
          "line": 4654,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "  int32_t start = pInput->startRowIndex;",
          "content_same": false
        },
        {
          "line": 4656,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SHLLInfo* pHllInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "new_line_content": "  for (int32_t i = start; i < start + pInput->numOfRows; ++i) {",
          "content_same": false
        },
        {
          "line": 2614,
          "old_api": "buildTDigestInfo",
          "new_api": null,
          "old_text": "buildTDigestInfo(pInput)",
          "new_text": null,
          "old_line_content": "    buildTDigestInfo(pInput);",
          "new_line_content": "      double v = 0;",
          "content_same": false
        },
        {
          "line": 2615,
          "old_api": "tdigestAutoFill",
          "new_api": null,
          "old_text": "tdigestAutoFill(pInput->pTDigest, COMPRESSION)",
          "new_text": null,
          "old_line_content": "    tdigestAutoFill(pInput->pTDigest, COMPRESSION);",
          "new_line_content": "      GET_TYPED_DATA(v, double, type, data);",
          "content_same": false
        },
        {
          "line": 4662,
          "old_api": "functionFinalize",
          "new_api": null,
          "old_text": "functionFinalize(pCtx, pBlock)",
          "new_text": null,
          "old_line_content": "  return functionFinalize(pCtx, pBlock);",
          "new_line_content": "  if (pInfo->totalCount == 0 && !tsCountAlwaysReturnValue) {",
          "content_same": false
        },
        {
          "line": 4666,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 4667,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SHLLInfo*            pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4668,
          "old_api": "getHLLInfoSize",
          "new_api": null,
          "old_text": "getHLLInfoSize()",
          "new_text": null,
          "old_line_content": "  int32_t              resultBytes = getHLLInfoSize();",
          "new_line_content": "  return TSDB_CODE_SUCCESS;",
          "content_same": false
        },
        {
          "line": 2621,
          "old_api": "buildTDigestInfo",
          "new_api": null,
          "old_text": "buildTDigestInfo(pOutput)",
          "new_text": null,
          "old_line_content": "    buildTDigestInfo(pOutput);",
          "new_line_content": "           pInfo->pHisto->elems);",
          "content_same": false
        },
        {
          "line": 4669,
          "old_api": "taosMemoryCalloc",
          "new_api": null,
          "old_text": "taosMemoryCalloc(resultBytes + VARSTR_HEADER_SIZE, sizeof(char))",
          "new_text": null,
          "old_line_content": "  char*                res = taosMemoryCalloc(resultBytes + VARSTR_HEADER_SIZE, sizeof(char));",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2623,
          "old_api": "tdigestAutoFill",
          "new_api": null,
          "old_text": "tdigestAutoFill(pTDigest, COMPRESSION)",
          "new_text": null,
          "old_line_content": "    tdigestAutoFill(pTDigest, COMPRESSION);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4671,
          "old_api": "varDataVal",
          "new_api": null,
          "old_text": "varDataVal(res)",
          "new_text": null,
          "old_line_content": "  memcpy(varDataVal(res), pInfo, resultBytes);",
          "new_line_content": "int32_t hllFinalize(SqlFunctionCtx* pCtx, SSDataBlock* pBlock) {",
          "content_same": false
        },
        {
          "line": 2626,
          "old_api": "TDIGEST_SIZE",
          "new_api": null,
          "old_text": "TDIGEST_SIZE(COMPRESSION)",
          "new_text": null,
          "old_line_content": "      memcpy(pTDigest, pInput->pTDigest, (size_t)TDIGEST_SIZE(COMPRESSION));",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2627,
          "old_api": "tdigestAutoFill",
          "new_api": null,
          "old_text": "tdigestAutoFill(pTDigest, COMPRESSION)",
          "new_text": null,
          "old_line_content": "      tdigestAutoFill(pTDigest, COMPRESSION);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2629,
          "old_api": "tdigestMerge",
          "new_api": null,
          "old_text": "tdigestMerge(pTDigest, pInput->pTDigest)",
          "new_text": null,
          "old_line_content": "      tdigestMerge(pTDigest, pInput->pTDigest);",
          "new_line_content": "  pOutput->percent = pInput->percent;",
          "content_same": false
        },
        {
          "line": 4677,
          "old_api": "colDataAppend",
          "new_api": null,
          "old_text": "colDataAppend(pCol, pBlock->info.rows, res, false)",
          "new_text": null,
          "old_line_content": "  colDataAppend(pCol, pBlock->info.rows, res, false);",
          "new_line_content": "    pInfo->numOfRes = 1;",
          "content_same": false
        },
        {
          "line": 4679,
          "old_api": "taosMemoryFree",
          "new_api": null,
          "old_text": "taosMemoryFree(res)",
          "new_text": null,
          "old_line_content": "  taosMemoryFree(res);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2637,
          "old_api": "buildHistogramInfo",
          "new_api": null,
          "old_text": "buildHistogramInfo(pOutput)",
          "new_text": null,
          "old_line_content": "    buildHistogramInfo(pOutput);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4688,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": null,
          "old_text": "GET_ROWCELL_INTERBUF(pSResInfo)",
          "new_text": null,
          "old_line_content": "  SHLLInfo*            pSBuf = GET_ROWCELL_INTERBUF(pSResInfo);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4691,
          "old_api": "TMAX",
          "new_api": null,
          "old_text": "TMAX(pDResInfo->numOfRes, pSResInfo->numOfRes)",
          "new_text": null,
          "old_line_content": "  pDResInfo->numOfRes = TMAX(pDResInfo->numOfRes, pSResInfo->numOfRes);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2648,
          "old_api": "qDebug",
          "new_api": null,
          "old_text": "qDebug(\"%s input histogram, elem:%\" PRId64 \", entry:%d, %p\", __FUNCTION__, pHisto->numOfElems,\n             pHisto->numOfEntries, pInput->pHisto)",
          "new_text": null,
          "old_line_content": "      qDebug(\"%s input histogram, elem:%\" PRId64 \", entry:%d, %p\", __FUNCTION__, pHisto->numOfElems,",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2651,
          "old_api": "tHistogramMerge",
          "new_api": null,
          "old_text": "tHistogramMerge(pHisto, pInput->pHisto, MAX_HISTOGRAM_BIN)",
          "new_text": null,
          "old_line_content": "      SHistogramInfo* pRes = tHistogramMerge(pHisto, pInput->pHisto, MAX_HISTOGRAM_BIN);",
          "new_line_content": "    if (pInput->pHisto->numOfElems <= 0) {",
          "content_same": false
        },
        {
          "line": 2652,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(pHisto, pRes, sizeof(SHistogramInfo) + sizeof(SHistBin) * MAX_HISTOGRAM_BIN)",
          "new_text": null,
          "old_line_content": "      memcpy(pHisto, pRes, sizeof(SHistogramInfo) + sizeof(SHistBin) * MAX_HISTOGRAM_BIN);",
          "new_line_content": "      return;",
          "content_same": false
        },
        {
          "line": 2657,
          "old_api": "tHistogramDestroy",
          "new_api": null,
          "old_text": "tHistogramDestroy(&pRes)",
          "new_text": null,
          "old_line_content": "      tHistogramDestroy(&pRes);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4707,
          "old_api": "strncasecmp",
          "new_api": null,
          "old_text": "strncasecmp(opStr, \"LE\", 2)",
          "new_text": null,
          "old_line_content": "  } else if (strncasecmp(opStr, \"LE\", 2) == 0) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2663,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "             pHisto);",
          "content_same": false
        },
        {
          "line": 4711,
          "old_api": "strncasecmp",
          "new_api": null,
          "old_text": "strncasecmp(opStr, \"NE\", 2)",
          "new_text": null,
          "old_line_content": "  } else if (strncasecmp(opStr, \"NE\", 2) == 0) {",
          "new_line_content": "  return TSDB_CODE_SUCCESS;",
          "content_same": false
        },
        {
          "line": 4713,
          "old_api": "strncasecmp",
          "new_api": null,
          "old_text": "strncasecmp(opStr, \"EQ\", 2)",
          "new_text": null,
          "old_line_content": "  } else if (strncasecmp(opStr, \"EQ\", 2) == 0) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2668,
          "old_api": "ASSERT",
          "new_api": null,
          "old_text": "ASSERT(pCol->info.type == TSDB_DATA_TYPE_BINARY)",
          "new_text": null,
          "old_line_content": "  ASSERT(pCol->info.type == TSDB_DATA_TYPE_BINARY);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2672,
          "old_api": "qDebug",
          "new_api": null,
          "old_text": "qDebug(\"%s total %d rows will merge, %p\", __FUNCTION__, pInput->numOfRows, pInfo->pHisto)",
          "new_text": null,
          "old_line_content": "  qDebug(\"%s total %d rows will merge, %p\", __FUNCTION__, pInput->numOfRows, pInfo->pHisto);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2676,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pCol, i)",
          "new_text": null,
          "old_line_content": "    char* data = colDataGetData(pCol, i);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2678,
          "old_api": "varDataVal",
          "new_api": null,
          "old_text": "varDataVal(data)",
          "new_text": null,
          "old_line_content": "    SAPercentileInfo* pInputInfo = (SAPercentileInfo*)varDataVal(data);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2679,
          "old_api": "apercentileTransferInfo",
          "new_api": null,
          "old_text": "apercentileTransferInfo(pInputInfo, pInfo)",
          "new_text": null,
          "old_line_content": "    apercentileTransferInfo(pInputInfo, pInfo);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2683,
          "old_api": "qDebug",
          "new_api": null,
          "old_text": "qDebug(\"%s after merge, total:%\" PRId64 \", numOfEntry:%d, %p\", __FUNCTION__, pInfo->pHisto->numOfElems,\n           pInfo->pHisto->numOfEntries, pInfo->pHisto)",
          "new_text": null,
          "old_line_content": "    qDebug(\"%s after merge, total:%\" PRId64 \", numOfEntry:%d, %p\", __FUNCTION__, pInfo->pHisto->numOfElems,",
          "new_line_content": "  SInputColumnInfoData* pInput = &pCtx->input;",
          "content_same": false
        },
        {
          "line": 4732,
          "old_api": "STATE_COMP",
          "new_api": null,
          "old_text": "STATE_COMP(op, v, param)",
          "new_text": null,
          "old_line_content": "      STATE_COMP(op, v, param);",
          "new_line_content": "    opType = STATE_OPER_EQ;",
          "content_same": false
        },
        {
          "line": 2687,
          "old_api": "SET_VAL",
          "new_api": null,
          "old_text": "SET_VAL(pResInfo, 1, 1)",
          "new_text": null,
          "old_line_content": "  SET_VAL(pResInfo, 1, 1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4737,
          "old_api": "STATE_COMP",
          "new_api": null,
          "old_text": "STATE_COMP(op, v, param)",
          "new_text": null,
          "old_line_content": "      STATE_COMP(op, v, param);",
          "new_line_content": "  return opType;",
          "content_same": false
        },
        {
          "line": 2692,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "  int32_t start = pInput->startRowIndex;",
          "content_same": false
        },
        {
          "line": 2693,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": null,
          "old_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "new_text": null,
          "old_line_content": "  SAPercentileInfo*    pInfo = (SAPercentileInfo*)GET_ROWCELL_INTERBUF(pResInfo);",
          "new_line_content": "  for (int32_t i = start; i < start + pInput->numOfRows; ++i) {",
          "content_same": false
        },
        {
          "line": 4742,
          "old_api": "STATE_COMP",
          "new_api": null,
          "old_text": "STATE_COMP(op, v, param)",
          "new_text": null,
          "old_line_content": "      STATE_COMP(op, v, param);",
          "new_line_content": "  switch (pCol->info.type) {",
          "content_same": false
        },
        {
          "line": 2699,
          "old_api": "tdigestQuantile",
          "new_api": null,
          "old_text": "tdigestQuantile(pInfo->pTDigest, pInfo->percent / 100)",
          "new_text": null,
          "old_line_content": "      pInfo->result = tdigestQuantile(pInfo->pTDigest, pInfo->percent / 100);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4747,
          "old_api": "STATE_COMP",
          "new_api": null,
          "old_text": "STATE_COMP(op, v, param)",
          "new_text": null,
          "old_line_content": "      STATE_COMP(op, v, param);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4752,
          "old_api": "STATE_COMP",
          "new_api": null,
          "old_text": "STATE_COMP(op, v, param)",
          "new_text": null,
          "old_line_content": "      STATE_COMP(op, v, param);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2707,
          "old_api": "qDebug",
          "new_api": null,
          "old_text": "qDebug(\"%s get the final res, elements:%\" PRId64 \", numOfEntry:%d, pHisto:%p, elems:%p\", __FUNCTION__,\n             pInfo->pHisto->numOfElems, pInfo->pHisto->numOfEntries, pInfo->pHisto, pInfo->pHisto->elems)",
          "new_text": null,
          "old_line_content": "      qDebug(\"%s get the final res, elements:%\" PRId64 \", numOfEntry:%d, pHisto:%p, elems:%p\", __FUNCTION__,",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4757,
          "old_api": "STATE_COMP",
          "new_api": null,
          "old_text": "STATE_COMP(op, v, param)",
          "new_text": null,
          "old_line_content": "      STATE_COMP(op, v, param);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4762,
          "old_api": "STATE_COMP",
          "new_api": null,
          "old_text": "STATE_COMP(op, v, param)",
          "new_text": null,
          "old_line_content": "      STATE_COMP(op, v, param);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2718,
          "old_api": "qDebug",
          "new_api": null,
          "old_text": "qDebug(\"%s get the final res, elements:%\" PRId64 \", numOfEntry:%d. result is null\", __FUNCTION__,\n             pInfo->pHisto->numOfElems, pInfo->pHisto->numOfEntries)",
          "new_text": null,
          "old_line_content": "      qDebug(\"%s get the final res, elements:%\" PRId64 \", numOfEntry:%d. result is null\", __FUNCTION__,",
          "new_line_content": "    } else {  // no need to free",
          "content_same": false
        },
        {
          "line": 4767,
          "old_api": "STATE_COMP",
          "new_api": null,
          "old_text": "STATE_COMP(op, v, param)",
          "new_text": null,
          "old_line_content": "      STATE_COMP(op, v, param);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4772,
          "old_api": "STATE_COMP",
          "new_api": null,
          "old_text": "STATE_COMP(op, v, param)",
          "new_text": null,
          "old_line_content": "      STATE_COMP(op, v, param);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2727,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2728,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": null,
          "old_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "new_text": null,
          "old_line_content": "  SAPercentileInfo*    pInfo = (SAPercentileInfo*)GET_ROWCELL_INTERBUF(pResInfo);",
          "new_line_content": "      double  ratio[] = {pInfo->percent};",
          "content_same": false
        },
        {
          "line": 4776,
          "old_api": "ASSERT",
          "new_api": null,
          "old_text": "ASSERT(0)",
          "new_text": null,
          "old_line_content": "      ASSERT(0);",
          "new_line_content": "      break;",
          "content_same": false
        },
        {
          "line": 2730,
          "old_api": "getApercentileMaxSize",
          "new_api": null,
          "old_text": "getApercentileMaxSize()",
          "new_text": null,
          "old_line_content": "  int32_t resultBytes = getApercentileMaxSize();",
          "new_line_content": "      pInfo->result = *res;",
          "content_same": false
        },
        {
          "line": 2731,
          "old_api": "taosMemoryCalloc",
          "new_api": null,
          "old_text": "taosMemoryCalloc(resultBytes + VARSTR_HEADER_SIZE, sizeof(char))",
          "new_text": null,
          "old_line_content": "  char*   res = taosMemoryCalloc(resultBytes + VARSTR_HEADER_SIZE, sizeof(char));",
          "new_line_content": "      // memcpy(pCtx->pOutput, res, sizeof(double));",
          "content_same": false
        },
        {
          "line": 2734,
          "old_api": "varDataVal",
          "new_api": null,
          "old_text": "varDataVal(res)",
          "new_text": null,
          "old_line_content": "    memcpy(varDataVal(res), pInfo, resultBytes);",
          "new_line_content": "      // setNull(pCtx->pOutput, pCtx->outputType, pCtx->outputBytes);",
          "content_same": false
        },
        {
          "line": 2735,
          "old_api": "varDataSetLen",
          "new_api": null,
          "old_text": "varDataSetLen(res, resultBytes)",
          "new_text": null,
          "old_line_content": "    varDataSetLen(res, resultBytes);",
          "new_line_content": "      // return TSDB_CODE_SUCCESS;",
          "content_same": false
        },
        {
          "line": 4783,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "    case TSDB_DATA_TYPE_FLOAT: {",
          "content_same": false
        },
        {
          "line": 2737,
          "old_api": "varDataVal",
          "new_api": null,
          "old_text": "varDataVal(res)",
          "new_text": null,
          "old_line_content": "    memcpy(varDataVal(res), pInfo, resultBytes);",
          "new_line_content": "             pInfo->pHisto->numOfElems, pInfo->pHisto->numOfEntries);",
          "content_same": false
        },
        {
          "line": 2738,
          "old_api": "varDataSetLen",
          "new_api": null,
          "old_text": "varDataSetLen(res, resultBytes)",
          "new_text": null,
          "old_line_content": "    varDataSetLen(res, resultBytes);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4784,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": null,
          "old_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "new_text": null,
          "old_line_content": "  SStateInfo*          pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "new_line_content": "      float v = *(float*)data;",
          "content_same": false
        },
        {
          "line": 2742,
          "old_api": "taosArrayGet",
          "new_api": null,
          "old_text": "taosArrayGet(pBlock->pDataBlock, slotId)",
          "new_text": null,
          "old_line_content": "  SColumnInfoData* pCol = taosArrayGet(pBlock->pDataBlock, slotId);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2744,
          "old_api": "colDataAppend",
          "new_api": null,
          "old_text": "colDataAppend(pCol, pBlock->info.rows, res, false)",
          "new_text": null,
          "old_line_content": "  colDataAppend(pCol, pBlock->info.rows, res, false);",
          "new_line_content": "int32_t apercentilePartialFinalize(SqlFunctionCtx* pCtx, SSDataBlock* pBlock) {",
          "content_same": false
        },
        {
          "line": 4793,
          "old_api": "varDataVal",
          "new_api": null,
          "old_text": "varDataVal(pCtx->param[1].param.pz)",
          "new_text": null,
          "old_line_content": "  int8_t op = getStateOpType(varDataVal(pCtx->param[1].param.pz));",
          "new_line_content": "    default: {",
          "content_same": false
        },
        {
          "line": 2751,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pDestCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pDResInfo = GET_RES_INFO(pDestCtx);",
          "new_line_content": "  if (pInfo->algo == APERCT_ALGO_TDIGEST) {",
          "content_same": false
        },
        {
          "line": 4800,
          "old_api": "colDataIsNull_f",
          "new_api": null,
          "old_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "new_text": null,
          "old_line_content": "    if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "new_line_content": "int32_t stateCountFunction(SqlFunctionCtx* pCtx) {",
          "content_same": false
        },
        {
          "line": 2754,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pSourceCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pSResInfo = GET_RES_INFO(pSourceCtx);",
          "new_line_content": "  } else {",
          "content_same": false
        },
        {
          "line": 4804,
          "old_api": "appendSelectivityValue",
          "new_api": null,
          "old_text": "appendSelectivityValue(pCtx, i, pCtx->offset + numOfElems - 1)",
          "new_text": null,
          "old_line_content": "        appendSelectivityValue(pCtx, i, pCtx->offset + numOfElems - 1);",
          "new_line_content": "  SInputColumnInfoData* pInput = &pCtx->input;",
          "content_same": false
        },
        {
          "line": 2757,
          "old_api": "qDebug",
          "new_api": null,
          "old_text": "qDebug(\"%s start to combine apercentile, %p\", __FUNCTION__, pDBuf->pHisto)",
          "new_text": null,
          "old_line_content": "  qDebug(\"%s start to combine apercentile, %p\", __FUNCTION__, pDBuf->pHisto);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 2759,
          "old_api": "apercentileTransferInfo",
          "new_api": null,
          "old_text": "apercentileTransferInfo(pSBuf, pDBuf)",
          "new_text": null,
          "old_line_content": "  apercentileTransferInfo(pSBuf, pDBuf);",
          "new_line_content": "  int32_t          slotId = pCtx->pExpr->base.resSchema.slotId;",
          "content_same": false
        },
        {
          "line": 4809,
          "old_api": "checkStateOp",
          "new_api": null,
          "old_text": "checkStateOp(op, pInputCol, i, pCtx->param[2].param)",
          "new_text": null,
          "old_line_content": "    bool ret = checkStateOp(op, pInputCol, i, pCtx->param[2].param);",
          "new_line_content": "  SColumnInfoData* pOutput = (SColumnInfoData*)pCtx->pOutput;",
          "content_same": false
        },
        {
          "line": 4817,
          "old_api": "colDataAppend",
          "new_api": null,
          "old_text": "colDataAppend(pOutput, pCtx->offset + numOfElems - 1, (char*)&output, false)",
          "new_text": null,
          "old_line_content": "    colDataAppend(pOutput, pCtx->offset + numOfElems - 1, (char*)&output, false);",
          "new_line_content": "    numOfElems++;",
          "content_same": false
        },
        {
          "line": 4821,
          "old_api": "appendSelectivityValue",
          "new_api": null,
          "old_text": "appendSelectivityValue(pCtx, i, pCtx->offset + numOfElems - 1)",
          "new_text": null,
          "old_line_content": "      appendSelectivityValue(pCtx, i, pCtx->offset + numOfElems - 1);",
          "new_line_content": "      if (pCtx->subsidiaries.num > 0) {",
          "content_same": false
        },
        {
          "line": 4829,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "    int64_t output = -1;",
          "content_same": false
        },
        {
          "line": 4830,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": null,
          "old_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "new_text": null,
          "old_line_content": "  SStateInfo*          pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "new_line_content": "    if (ret) {",
          "content_same": false
        },
        {
          "line": 2789,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": null,
          "old_text": "GET_ROWCELL_INTERBUF(pEntry)",
          "new_text": null,
          "old_line_content": "  SFirstLastRes* pResult = GET_ROWCELL_INTERBUF(pEntry);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 4846,
          "old_api": "varDataVal",
          "new_api": null,
          "old_text": "varDataVal(pCtx->param[1].param.pz)",
          "new_text": null,
          "old_line_content": "  int8_t op = getStateOpType(varDataVal(pCtx->param[1].param.pz));",
          "new_line_content": "int32_t stateDurationFunction(SqlFunctionCtx* pCtx) {",
          "content_same": false
        },
        {
          "line": 2800,
          "old_api": "nodesListGetNode",
          "new_api": null,
          "old_text": "nodesListGetNode(pFunc->pParameterList, 0)",
          "new_text": null,
          "old_line_content": "  SColumnNode* pNode = (SColumnNode*)nodesListGetNode(pFunc->pParameterList, 0);",
          "new_line_content": "  SResultRowEntryInfo* pEntry = (SResultRowEntryInfo*)pRes;",
          "content_same": false
        },
        {
          "line": 2801,
          "old_api": "getFirstLastInfoSize",
          "new_api": null,
          "old_text": "getFirstLastInfoSize(pNode->node.resType.bytes)",
          "new_text": null,
          "old_line_content": "  pEnv->calcMemSize = getFirstLastInfoSize(pNode->node.resType.bytes);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4853,
          "old_api": "colDataIsNull_f",
          "new_api": null,
          "old_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "new_text": null,
          "old_line_content": "    if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "new_line_content": "  SColumnInfoData* pInputCol = pInput->pData[0];",
          "content_same": false
        },
        {
          "line": 2806,
          "old_api": "nodesListGetNode",
          "new_api": null,
          "old_text": "nodesListGetNode(pFunc->pParameterList, 0)",
          "new_text": null,
          "old_line_content": "  SColumnNode* pNode = (SColumnNode*)nodesListGetNode(pFunc->pParameterList, 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4854,
          "old_api": "colDataAppendNULL",
          "new_api": null,
          "old_text": "colDataAppendNULL(pOutput, i)",
          "new_text": null,
          "old_line_content": "      colDataAppendNULL(pOutput, i);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4857,
          "old_api": "appendSelectivityValue",
          "new_api": null,
          "old_text": "appendSelectivityValue(pCtx, i, pCtx->offset + numOfElems - 1)",
          "new_text": null,
          "old_line_content": "        appendSelectivityValue(pCtx, i, pCtx->offset + numOfElems - 1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2812,
          "old_api": "nodesListGetNode",
          "new_api": null,
          "old_text": "nodesListGetNode(pFunc->pParameterList, 0)",
          "new_text": null,
          "old_line_content": "  SColumnNode* pNode = (SColumnNode*)nodesListGetNode(pFunc->pParameterList, 0);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 4862,
          "old_api": "checkStateOp",
          "new_api": null,
          "old_text": "checkStateOp(op, pInputCol, i, pCtx->param[2].param)",
          "new_text": null,
          "old_line_content": "    bool    ret = checkStateOp(op, pInputCol, i, pCtx->param[2].param);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 2822,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pTsColInfo, rowIndex)",
          "new_text": null,
          "old_line_content": "  return *(TSKEY*)colDataGetData(pTsColInfo, rowIndex);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4874,
          "old_api": "colDataAppend",
          "new_api": null,
          "old_text": "colDataAppend(pOutput, pCtx->offset + numOfElems - 1, (char*)&output, false)",
          "new_text": null,
          "old_line_content": "    colDataAppend(pOutput, pCtx->offset + numOfElems - 1, (char*)&output, false);",
          "new_line_content": "      if (pCtx->subsidiaries.num > 0) {",
          "content_same": false
        },
        {
          "line": 4878,
          "old_api": "appendSelectivityValue",
          "new_api": null,
          "old_text": "appendSelectivityValue(pCtx, i, pCtx->offset + numOfElems - 1)",
          "new_text": null,
          "old_line_content": "      appendSelectivityValue(pCtx, i, pCtx->offset + numOfElems - 1);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2832,
          "old_api": "saveTupleData",
          "new_api": null,
          "old_text": "saveTupleData(pCtx, rowIndex, pSrcBlock, NULL)",
          "new_text": null,
          "old_line_content": "    pInfo->pos = saveTupleData(pCtx, rowIndex, pSrcBlock, NULL);",
          "new_line_content": "  return true;",
          "content_same": false
        },
        {
          "line": 2834,
          "old_api": "updateTupleData",
          "new_api": null,
          "old_text": "updateTupleData(pCtx, rowIndex, pSrcBlock, &pInfo->pos)",
          "new_text": null,
          "old_line_content": "    updateTupleData(pCtx, rowIndex, pSrcBlock, &pInfo->pos);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2839,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2842,
          "old_api": "IS_VAR_DATA_TYPE",
          "new_api": null,
          "old_text": "IS_VAR_DATA_TYPE(type)",
          "new_text": null,
          "old_line_content": "  if (IS_VAR_DATA_TYPE(type)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2843,
          "old_api": "varDataTLen",
          "new_api": null,
          "old_text": "varDataTLen(pData)",
          "new_text": null,
          "old_line_content": "    pInfo->bytes = varDataTLen(pData);",
          "new_line_content": "static void firstlastSaveTupleData(const SSDataBlock* pSrcBlock, int32_t rowIndex, SqlFunctionCtx* pCtx,",
          "content_same": false
        },
        {
          "line": 4891,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2846,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(pInfo->buf, pData, pInfo->bytes)",
          "new_text": null,
          "old_line_content": "  memcpy(pInfo->buf, pData, pInfo->bytes);",
          "new_line_content": "    return;",
          "content_same": false
        },
        {
          "line": 2848,
          "old_api": "firstlastSaveTupleData",
          "new_api": null,
          "old_text": "firstlastSaveTupleData(pCtx->pSrcBlock, rowIndex, pCtx, pInfo)",
          "new_text": null,
          "old_line_content": "  firstlastSaveTupleData(pCtx->pSrcBlock, rowIndex, pCtx, pInfo);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4904,
          "old_api": "colDataIsNull_f",
          "new_api": null,
          "old_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "new_text": null,
          "old_line_content": "    if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "new_line_content": "  pEnv->calcMemSize = sizeof(SSumRes);",
          "content_same": false
        },
        {
          "line": 2859,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": null,
          "old_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "new_text": null,
          "old_line_content": "  SFirstLastRes*       pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4914,
          "old_api": "colDataAppend",
          "new_api": null,
          "old_text": "colDataAppend(pOutput, pos, (char*)&pSumRes->isum, false)",
          "new_text": null,
          "old_line_content": "      colDataAppend(pOutput, pos, (char*)&pSumRes->isum, false);",
          "new_line_content": "  SColumnInfoData* pInputCol = pInput->pData[0];",
          "content_same": false
        },
        {
          "line": 4915,
          "old_api": "IS_UNSIGNED_NUMERIC_TYPE",
          "new_api": null,
          "old_text": "IS_UNSIGNED_NUMERIC_TYPE(type)",
          "new_text": null,
          "old_line_content": "    } else if (IS_UNSIGNED_NUMERIC_TYPE(type)) {",
          "new_line_content": "  SColumnInfoData* pOutput = (SColumnInfoData*)pCtx->pOutput;",
          "content_same": false
        },
        {
          "line": 2868,
          "old_api": "ASSERT",
          "new_api": null,
          "old_text": "ASSERT(pInputCol->hasNull == true)",
          "new_text": null,
          "old_line_content": "    ASSERT(pInputCol->hasNull == true);",
          "new_line_content": "  pInfo->hasResult = true;",
          "content_same": false
        },
        {
          "line": 2870,
          "old_api": "firstlastSaveTupleData",
          "new_api": null,
          "old_text": "firstlastSaveTupleData(pCtx->pSrcBlock, pInput->startRowIndex, pCtx, pInfo)",
          "new_text": null,
          "old_line_content": "    firstlastSaveTupleData(pCtx->pSrcBlock, pInput->startRowIndex, pCtx, pInfo);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4919,
          "old_api": "colDataAppend",
          "new_api": null,
          "old_text": "colDataAppend(pOutput, pos, (char*)&pSumRes->usum, false)",
          "new_text": null,
          "old_line_content": "      colDataAppend(pOutput, pos, (char*)&pSumRes->usum, false);",
          "new_line_content": "  int32_t startOffset = pCtx->offset;",
          "content_same": false
        },
        {
          "line": 4920,
          "old_api": "IS_FLOAT_TYPE",
          "new_api": null,
          "old_text": "IS_FLOAT_TYPE(type)",
          "new_text": null,
          "old_line_content": "    } else if (IS_FLOAT_TYPE(type)) {",
          "new_line_content": "  for (int32_t i = pInput->startRowIndex; i < pInput->numOfRows + pInput->startRowIndex; i += 1) {",
          "content_same": false
        },
        {
          "line": 4925,
          "old_api": "isnan",
          "new_api": null,
          "old_text": "isnan(pSumRes->dsum)",
          "new_text": null,
          "old_line_content": "      if (isinf(pSumRes->dsum) || isnan(pSumRes->dsum)) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4926,
          "old_api": "colDataAppendNULL",
          "new_api": null,
          "old_text": "colDataAppendNULL(pOutput, pos)",
          "new_text": null,
          "old_line_content": "        colDataAppendNULL(pOutput, pos);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4934,
          "old_api": "appendSelectivityValue",
          "new_api": null,
          "old_text": "appendSelectivityValue(pCtx, i, pos)",
          "new_text": null,
          "old_line_content": "      appendSelectivityValue(pCtx, i, pos);",
          "new_line_content": "      uint64_t v;",
          "content_same": false
        },
        {
          "line": 2893,
          "old_api": "colDataIsNull",
          "new_api": null,
          "old_text": "colDataIsNull(pInputCol, pInput->totalRows, i, pColAgg)",
          "new_text": null,
          "old_line_content": "      if (pInputCol->hasNull && colDataIsNull(pInputCol, pInput->totalRows, i, pColAgg)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2899,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pInputCol, i)",
          "new_text": null,
          "old_line_content": "      char* data = colDataGetData(pInputCol, i);",
          "new_line_content": "  //  please ref. to the comment in lastRowFunction for the reason why disabling the opt version of last/first function.",
          "content_same": false
        },
        {
          "line": 2900,
          "old_api": "getRowPTs",
          "new_api": null,
          "old_text": "getRowPTs(pInput->pPTS, i)",
          "new_text": null,
          "old_line_content": "      TSKEY cts = getRowPTs(pInput->pPTS, i);",
          "new_line_content": "  //  we will use this opt implementation in an new version that is only available in scan subplan",
          "content_same": false
        },
        {
          "line": 4949,
          "old_api": "functionSetup",
          "new_api": null,
          "old_text": "functionSetup(pCtx, pResultInfo)",
          "new_text": null,
          "old_line_content": "  if (!functionSetup(pCtx, pResultInfo)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2902,
          "old_api": "doSaveCurrentVal",
          "new_api": null,
          "old_text": "doSaveCurrentVal(pCtx, i, cts, pInputCol->info.type, data)",
          "new_text": null,
          "old_line_content": "        doSaveCurrentVal(pCtx, i, cts, pInputCol->info.type, data);",
          "new_line_content": "  if (blockDataOrder == TSDB_ORDER_ASC) {",
          "content_same": false
        },
        {
          "line": 4953,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": null,
          "old_text": "GET_ROWCELL_INTERBUF(pResultInfo)",
          "new_text": null,
          "old_line_content": "  SMavgInfo* pInfo = GET_ROWCELL_INTERBUF(pResultInfo);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2916,
          "old_api": "colDataIsNull",
          "new_api": null,
          "old_text": "colDataIsNull(pInputCol, pInput->totalRows, i, pColAgg)",
          "new_text": null,
          "old_line_content": "      if (pInputCol->hasNull && colDataIsNull(pInputCol, pInput->totalRows, i, pColAgg)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4966,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "bool mavgFunctionSetup(SqlFunctionCtx* pCtx, SResultRowEntryInfo* pResultInfo) {",
          "content_same": false
        },
        {
          "line": 2922,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pInputCol, i)",
          "new_text": null,
          "old_line_content": "      char* data = colDataGetData(pInputCol, i);",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 2923,
          "old_api": "getRowPTs",
          "new_api": null,
          "old_text": "getRowPTs(pInput->pPTS, i)",
          "new_text": null,
          "old_line_content": "      TSKEY cts = getRowPTs(pInput->pPTS, i);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2926,
          "old_api": "doSaveCurrentVal",
          "new_api": null,
          "old_text": "doSaveCurrentVal(pCtx, i, cts, pInputCol->info.type, data)",
          "new_text": null,
          "old_line_content": "        doSaveCurrentVal(pCtx, i, cts, pInputCol->info.type, data);",
          "new_line_content": "    // all data needs to be check.",
          "content_same": false
        },
        {
          "line": 4980,
          "old_api": "colDataIsNull_f",
          "new_api": null,
          "old_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "new_text": null,
          "old_line_content": "    if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "new_line_content": "  return true;",
          "content_same": false
        },
        {
          "line": 2933,
          "old_api": "colDataIsNull",
          "new_api": null,
          "old_text": "colDataIsNull(pInputCol, pInput->totalRows, i, pColAgg)",
          "new_text": null,
          "old_line_content": "    if (pInputCol->hasNull && colDataIsNull(pInputCol, pInput->totalRows, i, pColAgg)) {",
          "new_line_content": "    for (int32_t i = pInput->numOfRows + pInput->startRowIndex - 1; i >= pInput->startRowIndex; --i) {",
          "content_same": false
        },
        {
          "line": 2939,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pInputCol, i)",
          "new_text": null,
          "old_line_content": "    char* data = colDataGetData(pInputCol, i);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2942,
          "old_api": "doSaveCurrentVal",
          "new_api": null,
          "old_text": "doSaveCurrentVal(pCtx, i, cts, pInputCol->info.type, data)",
          "new_text": null,
          "old_line_content": "      doSaveCurrentVal(pCtx, i, cts, pInputCol->info.type, data);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2949,
          "old_api": "firstlastSaveTupleData",
          "new_api": null,
          "old_text": "firstlastSaveTupleData(pCtx->pSrcBlock, pInput->startRowIndex, pCtx, pInfo)",
          "new_text": null,
          "old_line_content": "    firstlastSaveTupleData(pCtx->pSrcBlock, pInput->startRowIndex, pCtx, pInfo);",
          "new_line_content": "#else",
          "content_same": false
        },
        {
          "line": 5004,
          "old_api": "colDataAppendNULL",
          "new_api": null,
          "old_text": "colDataAppendNULL(pOutput, pos)",
          "new_text": null,
          "old_line_content": "        colDataAppendNULL(pOutput, pos);",
          "new_line_content": "    double v;",
          "content_same": false
        },
        {
          "line": 5006,
          "old_api": "colDataAppend",
          "new_api": null,
          "old_text": "colDataAppend(pOutput, pos, (char*)&result, false)",
          "new_text": null,
          "old_line_content": "        colDataAppend(pOutput, pos, (char*)&result, false);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2959,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": null,
          "old_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "new_text": null,
          "old_line_content": "  SFirstLastRes*       pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "new_line_content": "    if (pResInfo->numOfRes == 0 || pInfo->ts > cts) {",
          "content_same": false
        },
        {
          "line": 5011,
          "old_api": "appendSelectivityValue",
          "new_api": null,
          "old_text": "appendSelectivityValue(pCtx, i, pos)",
          "new_text": null,
          "old_line_content": "        appendSelectivityValue(pCtx, i, pos);",
          "new_line_content": "      if (!pInfo->pointsMeet && (pInfo->pos == pInfo->numOfPoints - 1)) {",
          "content_same": false
        },
        {
          "line": 2970,
          "old_api": "ASSERT",
          "new_api": null,
          "old_text": "ASSERT(pInputCol->hasNull == true)",
          "new_text": null,
          "old_line_content": "    ASSERT(pInputCol->hasNull == true);",
          "new_line_content": "  return TSDB_CODE_SUCCESS;",
          "content_same": false
        },
        {
          "line": 2972,
          "old_api": "firstlastSaveTupleData",
          "new_api": null,
          "old_text": "firstlastSaveTupleData(pCtx->pSrcBlock, pInput->startRowIndex, pCtx, pInfo)",
          "new_text": null,
          "old_line_content": "    firstlastSaveTupleData(pCtx->pSrcBlock, pInput->startRowIndex, pCtx, pInfo);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2978,
          "old_api": "getRowPTs",
          "new_api": null,
          "old_text": "getRowPTs(pInput->pPTS, 0)",
          "new_text": null,
          "old_line_content": "  TSKEY startKey = getRowPTs(pInput->pPTS, 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2979,
          "old_api": "getRowPTs",
          "new_api": null,
          "old_text": "getRowPTs(pInput->pPTS, pInput->totalRows - 1)",
          "new_text": null,
          "old_line_content": "  TSKEY endKey = getRowPTs(pInput->pPTS, pInput->totalRows - 1);",
          "new_line_content": "  SInputColumnInfoData* pInput = &pCtx->input;",
          "content_same": false
        },
        {
          "line": 5027,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "      // handle selectivity",
          "content_same": false
        },
        {
          "line": 5028,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": null,
          "old_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "new_text": null,
          "old_line_content": "  SSampleInfo*         pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "new_line_content": "      if (pCtx->subsidiaries.num > 0) {",
          "content_same": false
        },
        {
          "line": 2987,
          "old_api": "colDataIsNull",
          "new_api": null,
          "old_text": "colDataIsNull(pInputCol, pInput->totalRows, i, pColAgg)",
          "new_text": null,
          "old_line_content": "      if (pInputCol->hasNull && colDataIsNull(pInputCol, pInput->totalRows, i, pColAgg)) {",
          "new_line_content": "  if (pInput->colDataAggIsSet && (pInput->pColumnDataAgg[0]->numOfNull == pInput->totalRows)) {",
          "content_same": false
        },
        {
          "line": 5037,
          "old_api": "nodesListGetNode",
          "new_api": null,
          "old_text": "nodesListGetNode(pFunc->pParameterList, 0)",
          "new_text": null,
          "old_line_content": "  SColumnNode* pCol = (SColumnNode*)nodesListGetNode(pFunc->pParameterList, 0);",
          "new_line_content": "      pInfo->pos = 0;",
          "content_same": false
        },
        {
          "line": 5038,
          "old_api": "nodesListGetNode",
          "new_api": null,
          "old_text": "nodesListGetNode(pFunc->pParameterList, 1)",
          "new_text": null,
          "old_line_content": "  SValueNode*  pVal = (SValueNode*)nodesListGetNode(pFunc->pParameterList, 1);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2993,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pInputCol, i)",
          "new_text": null,
          "old_line_content": "      char* data = colDataGetData(pInputCol, i);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2994,
          "old_api": "getRowPTs",
          "new_api": null,
          "old_text": "getRowPTs(pInput->pPTS, i)",
          "new_text": null,
          "old_line_content": "      TSKEY cts = getRowPTs(pInput->pPTS, i);",
          "new_line_content": "  SColumnDataAgg* pColAgg = (pInput->colDataAggIsSet) ? pInput->pColumnDataAgg[0] : NULL;",
          "content_same": false
        },
        {
          "line": 5049,
          "old_api": "taosSafeRand",
          "new_api": null,
          "old_text": "taosSafeRand()",
          "new_text": null,
          "old_line_content": "  taosSeedRand(taosSafeRand());",
          "new_line_content": "  pInfo->tuplePos = (STuplePos*)((char*)pInfo + sizeof(SSampleInfo) + pInfo->samples * pInfo->colBytes);",
          "content_same": false
        },
        {
          "line": 3003,
          "old_api": "colDataIsNull",
          "new_api": null,
          "old_text": "colDataIsNull(pInputCol, pInput->totalRows, i, pColAgg)",
          "new_text": null,
          "old_line_content": "      if (pInputCol->hasNull && colDataIsNull(pInputCol, pInput->totalRows, i, pColAgg)) {",
          "new_line_content": "  if (blockDataOrder == TSDB_ORDER_ASC) {",
          "content_same": false
        },
        {
          "line": 5051,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": null,
          "old_text": "GET_ROWCELL_INTERBUF(pResultInfo)",
          "new_text": null,
          "old_line_content": "  SSampleInfo* pInfo = GET_ROWCELL_INTERBUF(pResultInfo);",
          "new_line_content": "  return pInfo;",
          "content_same": false
        },
        {
          "line": 3009,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pInputCol, i)",
          "new_text": null,
          "old_line_content": "      char* data = colDataGetData(pInputCol, i);",
          "new_line_content": "      numOfElems++;",
          "content_same": false
        },
        {
          "line": 3010,
          "old_api": "getRowPTs",
          "new_api": null,
          "old_text": "getRowPTs(pInput->pPTS, i)",
          "new_text": null,
          "old_line_content": "      TSKEY cts = getRowPTs(pInput->pPTS, i);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5066,
          "old_api": "assignVal",
          "new_api": null,
          "old_text": "assignVal(pInfo->data + index * pInfo->colBytes, data, pInfo->colBytes, pInfo->colType)",
          "new_text": null,
          "old_line_content": "  assignVal(pInfo->data + index * pInfo->colBytes, data, pInfo->colBytes, pInfo->colType);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3019,
          "old_api": "colDataIsNull",
          "new_api": null,
          "old_text": "colDataIsNull(pInputCol, pInput->totalRows, i, pColAgg)",
          "new_text": null,
          "old_line_content": "    if (pInputCol->hasNull && colDataIsNull(pInputCol, pInput->totalRows, i, pColAgg)) {",
          "new_line_content": "  } else {  // descending order",
          "content_same": false
        },
        {
          "line": 5072,
          "old_api": "sampleAssignResult",
          "new_api": null,
          "old_text": "sampleAssignResult(pInfo, data, pInfo->numSampled)",
          "new_text": null,
          "old_line_content": "    sampleAssignResult(pInfo, data, pInfo->numSampled);",
          "new_line_content": "  pInfo->numSampled = 0;",
          "content_same": false
        },
        {
          "line": 3025,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pInputCol, i)",
          "new_text": null,
          "old_line_content": "    char* data = colDataGetData(pInputCol, i);",
          "new_line_content": "      numOfElems++;",
          "content_same": false
        },
        {
          "line": 3026,
          "old_api": "getRowPTs",
          "new_api": null,
          "old_text": "getRowPTs(pInput->pPTS, i)",
          "new_text": null,
          "old_line_content": "    TSKEY cts = getRowPTs(pInput->pPTS, i);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5074,
          "old_api": "saveTupleData",
          "new_api": null,
          "old_text": "saveTupleData(pCtx, index, pCtx->pSrcBlock, NULL)",
          "new_text": null,
          "old_line_content": "      pInfo->tuplePos[pInfo->numSampled] = saveTupleData(pCtx, index, pCtx->pSrcBlock, NULL);",
          "new_line_content": "  pInfo->colBytes = pCtx->resDataInfo.bytes;",
          "content_same": false
        },
        {
          "line": 5078,
          "old_api": "taosRand",
          "new_api": null,
          "old_text": "taosRand()",
          "new_text": null,
          "old_line_content": "    int32_t j = taosRand() % (pInfo->totalPoints);",
          "new_line_content": "  pInfo->tuplePos = (STuplePos*)((char*)pInfo + sizeof(SSampleInfo) + pInfo->samples * pInfo->colBytes);",
          "content_same": false
        },
        {
          "line": 5080,
          "old_api": "sampleAssignResult",
          "new_api": null,
          "old_text": "sampleAssignResult(pInfo, data, j)",
          "new_text": null,
          "old_line_content": "      sampleAssignResult(pInfo, data, j);",
          "new_line_content": "  return true;",
          "content_same": false
        },
        {
          "line": 5082,
          "old_api": "updateTupleData",
          "new_api": null,
          "old_text": "updateTupleData(pCtx, index, pCtx->pSrcBlock, &pInfo->tuplePos[j])",
          "new_text": null,
          "old_line_content": "        updateTupleData(pCtx, index, pCtx->pSrcBlock, &pInfo->tuplePos[j]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3035,
          "old_api": "firstlastSaveTupleData",
          "new_api": null,
          "old_text": "firstlastSaveTupleData(pCtx->pSrcBlock, pInput->startRowIndex, pCtx, pInfo)",
          "new_text": null,
          "old_line_content": "    firstlastSaveTupleData(pCtx->pSrcBlock, pInput->startRowIndex, pCtx, pInfo);",
          "new_line_content": "#else",
          "content_same": false
        },
        {
          "line": 5089,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "  if (pInfo->numSampled < pInfo->samples) {",
          "content_same": false
        },
        {
          "line": 5101,
          "old_api": "doReservoirSample",
          "new_api": null,
          "old_text": "doReservoirSample(pCtx, pInfo, data, i)",
          "new_text": null,
          "old_line_content": "    doReservoirSample(pCtx, pInfo, data, i);",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 5105,
          "old_api": "saveTupleData",
          "new_api": null,
          "old_text": "saveTupleData(pCtx, pInput->startRowIndex, pCtx->pSrcBlock, NULL)",
          "new_text": null,
          "old_line_content": "    pInfo->nullTuplePos = saveTupleData(pCtx, pInput->startRowIndex, pCtx->pSrcBlock, NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3059,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(pOutput->buf, pInput->buf, pOutput->bytes)",
          "new_text": null,
          "old_line_content": "  memcpy(pOutput->buf, pInput->buf, pOutput->bytes);",
          "new_line_content": "static void firstLastTransferInfo(SqlFunctionCtx* pCtx, SFirstLastRes* pInput, SFirstLastRes* pOutput, bool isFirst,",
          "content_same": false
        },
        {
          "line": 3060,
          "old_api": "firstlastSaveTupleData",
          "new_api": null,
          "old_text": "firstlastSaveTupleData(pCtx->pSrcBlock, rowIndex, pCtx, pOutput)",
          "new_text": null,
          "old_line_content": "  firstlastSaveTupleData(pCtx->pSrcBlock, rowIndex, pCtx, pOutput);",
          "new_line_content": "                                  int32_t rowIndex) {",
          "content_same": false
        },
        {
          "line": 5109,
          "old_api": "SET_VAL",
          "new_api": null,
          "old_text": "SET_VAL(pResInfo, pInfo->numSampled, pInfo->numSampled)",
          "new_text": null,
          "old_line_content": "  SET_VAL(pResInfo, pInfo->numSampled, pInfo->numSampled);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3068,
          "old_api": "ASSERT",
          "new_api": null,
          "old_text": "ASSERT(pCol->info.type == TSDB_DATA_TYPE_BINARY)",
          "new_text": null,
          "old_line_content": "  ASSERT(pCol->info.type == TSDB_DATA_TYPE_BINARY);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 5116,
          "old_api": "getSampleOutputInfo",
          "new_api": null,
          "old_text": "getSampleOutputInfo(pCtx)",
          "new_text": null,
          "old_line_content": "  SSampleInfo* pInfo = getSampleOutputInfo(pCtx);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3070,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SFirstLastRes* pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5120,
          "old_api": "taosArrayGet",
          "new_api": null,
          "old_text": "taosArrayGet(pBlock->pDataBlock, slotId)",
          "new_text": null,
          "old_line_content": "  SColumnInfoData* pCol = taosArrayGet(pBlock->pDataBlock, slotId);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 3076,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pCol, i)",
          "new_text": null,
          "old_line_content": "    char*          data = colDataGetData(pCol, i);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5124,
          "old_api": "colDataAppendNULL",
          "new_api": null,
          "old_text": "colDataAppendNULL(pCol, currentRow)",
          "new_text": null,
          "old_line_content": "    colDataAppendNULL(pCol, currentRow);",
          "new_line_content": "    pInfo->nullTupleSaved = true;",
          "content_same": false
        },
        {
          "line": 5125,
          "old_api": "setSelectivityValue",
          "new_api": null,
          "old_text": "setSelectivityValue(pCtx, pBlock, &pInfo->nullTuplePos, currentRow)",
          "new_text": null,
          "old_line_content": "    setSelectivityValue(pCtx, pBlock, &pInfo->nullTuplePos, currentRow);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 5129,
          "old_api": "colDataAppend",
          "new_api": null,
          "old_text": "colDataAppend(pCol, currentRow + i, pInfo->data + i * pInfo->colBytes, false)",
          "new_text": null,
          "old_line_content": "    colDataAppend(pCol, currentRow + i, pInfo->data + i * pInfo->colBytes, false);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 5130,
          "old_api": "setSelectivityValue",
          "new_api": null,
          "old_text": "setSelectivityValue(pCtx, pBlock, &pInfo->tuplePos[i], currentRow + i)",
          "new_text": null,
          "old_line_content": "    setSelectivityValue(pCtx, pBlock, &pInfo->tuplePos[i], currentRow + i);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3084,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SET_VAL(GET_RES_INFO(pCtx), numOfElems, 1);",
          "new_line_content": "  SInputColumnInfoData* pInput = &pCtx->input;",
          "content_same": false
        },
        {
          "line": 3090,
          "old_api": "firstLastFunctionMergeImpl",
          "new_api": null,
          "old_text": "firstLastFunctionMergeImpl(pCtx, false)",
          "new_text": null,
          "old_line_content": "int32_t lastFunctionMerge(SqlFunctionCtx* pCtx) { return firstLastFunctionMergeImpl(pCtx, false); }",
          "new_line_content": "  int32_t start = pInput->startRowIndex;",
          "content_same": false
        },
        {
          "line": 5139,
          "old_api": "nodesListGetNode",
          "new_api": null,
          "old_text": "nodesListGetNode(pFunc->pParameterList, 0)",
          "new_text": null,
          "old_line_content": "  SColumnNode* pCol = (SColumnNode*)nodesListGetNode(pFunc->pParameterList, 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5140,
          "old_api": "nodesListGetNode",
          "new_api": null,
          "old_text": "nodesListGetNode(pFunc->pParameterList, 1)",
          "new_text": null,
          "old_line_content": "  SValueNode*  pVal = (SValueNode*)nodesListGetNode(pFunc->pParameterList, 1);",
          "new_line_content": "  int32_t currentRow = pBlock->info.rows;",
          "content_same": false
        },
        {
          "line": 3099,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": null,
          "old_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "new_text": null,
          "old_line_content": "  SFirstLastRes* pRes = GET_ROWCELL_INTERBUF(pResInfo);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3100,
          "old_api": "colDataAppend",
          "new_api": null,
          "old_text": "colDataAppend(pCol, pBlock->info.rows, pRes->buf, pRes->isNull || pResInfo->isNullRes)",
          "new_text": null,
          "old_line_content": "  colDataAppend(pCol, pBlock->info.rows, pRes->buf, pRes->isNull || pResInfo->isNullRes);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 5149,
          "old_api": "functionSetup",
          "new_api": null,
          "old_text": "functionSetup(pCtx, pResultInfo)",
          "new_text": null,
          "old_line_content": "  if (!functionSetup(pCtx, pResultInfo)) {",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 3103,
          "old_api": "setSelectivityValue",
          "new_api": null,
          "old_text": "setSelectivityValue(pCtx, pBlock, &pRes->pos, pBlock->info.rows)",
          "new_text": null,
          "old_line_content": "  setSelectivityValue(pCtx, pBlock, &pRes->pos, pBlock->info.rows);",
          "new_line_content": "  return TSDB_CODE_SUCCESS;",
          "content_same": false
        },
        {
          "line": 5153,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": null,
          "old_text": "GET_ROWCELL_INTERBUF(pResultInfo)",
          "new_text": null,
          "old_line_content": "  STailInfo* pInfo = GET_ROWCELL_INTERBUF(pResultInfo);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3109,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pEntryInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3110,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": null,
          "old_text": "GET_ROWCELL_INTERBUF(pEntryInfo)",
          "new_text": null,
          "old_line_content": "  SFirstLastRes*       pRes = GET_ROWCELL_INTERBUF(pEntryInfo);",
          "new_line_content": "int32_t firstLastFinalize(SqlFunctionCtx* pCtx, SSDataBlock* pBlock) {",
          "content_same": false
        },
        {
          "line": 3115,
          "old_api": "taosMemoryCalloc",
          "new_api": null,
          "old_text": "taosMemoryCalloc(resultBytes + VARSTR_HEADER_SIZE, sizeof(char))",
          "new_text": null,
          "old_line_content": "  char* res = taosMemoryCalloc(resultBytes + VARSTR_HEADER_SIZE, sizeof(char));",
          "new_line_content": "  pResInfo->isNullRes = (pResInfo->numOfRes == 0) ? 1 : 0;",
          "content_same": false
        },
        {
          "line": 3116,
          "old_api": "varDataVal",
          "new_api": null,
          "old_text": "varDataVal(res)",
          "new_text": null,
          "old_line_content": "  memcpy(varDataVal(res), pRes, resultBytes);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3123,
          "old_api": "colDataAppend",
          "new_api": null,
          "old_text": "colDataAppend(pCol, pBlock->info.rows, res, false)",
          "new_text": null,
          "old_line_content": "  colDataAppend(pCol, pBlock->info.rows, res, false);",
          "new_line_content": "  return pResInfo->numOfRes;",
          "content_same": false
        },
        {
          "line": 3124,
          "old_api": "setSelectivityValue",
          "new_api": null,
          "old_text": "setSelectivityValue(pCtx, pBlock, &pRes->pos, pBlock->info.rows)",
          "new_text": null,
          "old_line_content": "  setSelectivityValue(pCtx, pBlock, &pRes->pos, pBlock->info.rows);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3126,
          "old_api": "taosMemoryFree",
          "new_api": null,
          "old_text": "taosMemoryFree(res)",
          "new_text": null,
          "old_line_content": "  taosMemoryFree(res);",
          "new_line_content": "int32_t firstLastPartialFinalize(SqlFunctionCtx* pCtx, SSDataBlock* pBlock) {",
          "content_same": false
        },
        {
          "line": 3132,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pDestCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pDResInfo = GET_RES_INFO(pDestCtx);",
          "new_line_content": "  // todo check for failure",
          "content_same": false
        },
        {
          "line": 3137,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": null,
          "old_text": "GET_ROWCELL_INTERBUF(pSResInfo)",
          "new_text": null,
          "old_line_content": "  SFirstLastRes*       pSBuf = GET_ROWCELL_INTERBUF(pSResInfo);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3140,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(pDBuf->buf, pSBuf->buf, bytes)",
          "new_text": null,
          "old_line_content": "    memcpy(pDBuf->buf, pSBuf->buf, bytes);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5188,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(pItem->data, data, colBytes)",
          "new_text": null,
          "old_line_content": "    memcpy(pItem->data, data, colBytes);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5197,
          "old_api": "compareInt64Val",
          "new_api": null,
          "old_text": "compareInt64Val(&d1->timestamp, &d2->timestamp)",
          "new_text": null,
          "old_line_content": "  return compareInt64Val(&d1->timestamp, &d2->timestamp);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 5203,
          "old_api": "tailAssignResult",
          "new_api": null,
          "old_text": "tailAssignResult(pList[pInfo->numAdded], data, pInfo->colBytes, ts, isNull)",
          "new_text": null,
          "old_line_content": "    tailAssignResult(pList[pInfo->numAdded], data, pInfo->colBytes, ts, isNull);",
          "new_line_content": "    pItem->isNull = true;",
          "content_same": false
        },
        {
          "line": 3156,
          "old_api": "IS_VAR_DATA_TYPE",
          "new_api": null,
          "old_text": "IS_VAR_DATA_TYPE(pInputCol->info.type)",
          "new_text": null,
          "old_line_content": "    if (IS_VAR_DATA_TYPE(pInputCol->info.type)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3157,
          "old_api": "varDataTLen",
          "new_api": null,
          "old_text": "varDataTLen(pData)",
          "new_text": null,
          "old_line_content": "      pInfo->bytes = varDataTLen(pData);",
          "new_line_content": "  if (pSResInfo->numOfRes != 0 && (pDResInfo->numOfRes == 0 || pDBuf->ts < pSBuf->ts)) {",
          "content_same": false
        },
        {
          "line": 5204,
          "old_api": "taosheapsort",
          "new_api": null,
          "old_text": "taosheapsort((void*)pList, sizeof(STailItem**), pInfo->numAdded + 1, NULL, tailCompFn, 0)",
          "new_text": null,
          "old_line_content": "    taosheapsort((void*)pList, sizeof(STailItem**), pInfo->numAdded + 1, NULL, tailCompFn, 0);",
          "new_line_content": "  } else {",
          "content_same": false
        },
        {
          "line": 5207,
          "old_api": "tailAssignResult",
          "new_api": null,
          "old_text": "tailAssignResult(pList[0], data, pInfo->colBytes, ts, isNull)",
          "new_text": null,
          "old_line_content": "    tailAssignResult(pList[0], data, pInfo->colBytes, ts, isNull);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 3160,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(pInfo->buf, pData, pInfo->bytes)",
          "new_text": null,
          "old_line_content": "    memcpy(pInfo->buf, pData, pInfo->bytes);",
          "new_line_content": "    pDResInfo->numOfRes = 1;",
          "content_same": false
        },
        {
          "line": 5208,
          "old_api": "taosheapadjust",
          "new_api": null,
          "old_text": "taosheapadjust((void*)pList, sizeof(STailItem**), 0, pInfo->numOfPoints - 1, NULL, tailCompFn, NULL, 0)",
          "new_text": null,
          "old_line_content": "    taosheapadjust((void*)pList, sizeof(STailItem**), 0, pInfo->numOfPoints - 1, NULL, tailCompFn, NULL, 0);",
          "new_line_content": "#endif",
          "content_same": false
        },
        {
          "line": 3164,
          "old_api": "firstlastSaveTupleData",
          "new_api": null,
          "old_text": "firstlastSaveTupleData(pCtx->pSrcBlock, rowIndex, pCtx, pInfo)",
          "new_text": null,
          "old_line_content": "  firstlastSaveTupleData(pCtx->pSrcBlock, rowIndex, pCtx, pInfo);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5216,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": null,
          "old_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "new_text": null,
          "old_line_content": "  STailInfo*           pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3172,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "    pInfo->isNull = false;",
          "content_same": false
        },
        {
          "line": 3173,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": null,
          "old_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "new_text": null,
          "old_line_content": "  SFirstLastRes*       pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5228,
          "old_api": "TMIN",
          "new_api": null,
          "old_text": "TMIN(pInfo->numOfPoints, pInput->numOfRows - pInfo->offset)",
          "new_text": null,
          "old_line_content": "    pInfo->numOfPoints = TMIN(pInfo->numOfPoints, pInput->numOfRows - pInfo->offset);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3181,
          "old_api": "getRowPTs",
          "new_api": null,
          "old_text": "getRowPTs(pInput->pPTS, 0)",
          "new_text": null,
          "old_line_content": "  TSKEY startKey = getRowPTs(pInput->pPTS, 0);",
          "new_line_content": "  pInfo->ts = cts;",
          "content_same": false
        },
        {
          "line": 5231,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pInputCol, i)",
          "new_text": null,
          "old_line_content": "    char* data = colDataGetData(pInputCol, i);",
          "new_line_content": "int32_t tailFunction(SqlFunctionCtx* pCtx) {",
          "content_same": false
        },
        {
          "line": 5232,
          "old_api": "colDataIsNull_s",
          "new_api": null,
          "old_text": "colDataIsNull_s(pInputCol, i)",
          "new_text": null,
          "old_line_content": "    doTailAdd(pInfo, data, tsList[i], colDataIsNull_s(pInputCol, i));",
          "new_line_content": "#if 0",
          "content_same": false
        },
        {
          "line": 5235,
          "old_api": "taosqsort",
          "new_api": null,
          "old_text": "taosqsort(pInfo->pItems, pInfo->numOfPoints, POINTER_BYTES, NULL, tailCompFn)",
          "new_text": null,
          "old_line_content": "  taosqsort(pInfo->pItems, pInfo->numOfPoints, POINTER_BYTES, NULL, tailCompFn);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3192,
          "old_api": "getRowPTs",
          "new_api": null,
          "old_text": "getRowPTs(pInput->pPTS, i)",
          "new_text": null,
          "old_line_content": "      TSKEY cts = getRowPTs(pInput->pPTS, i);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5241,
          "old_api": "colDataAppendNULL",
          "new_api": null,
          "old_text": "colDataAppendNULL(pOutput, pos)",
          "new_text": null,
          "old_line_content": "      colDataAppendNULL(pOutput, pos);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5243,
          "old_api": "colDataAppend",
          "new_api": null,
          "old_text": "colDataAppend(pOutput, pos, pItem->data, false)",
          "new_text": null,
          "old_line_content": "      colDataAppend(pOutput, pos, pItem->data, false);",
          "new_line_content": "  if (pInfo->offset >= pInput->numOfRows) {",
          "content_same": false
        },
        {
          "line": 3196,
          "old_api": "doSaveLastrow",
          "new_api": null,
          "old_text": "doSaveLastrow(pCtx, data, i, cts, pInfo)",
          "new_text": null,
          "old_line_content": "        doSaveLastrow(pCtx, data, i, cts, pInfo);",
          "new_line_content": "  int32_t bytes = pInputCol->info.bytes;",
          "content_same": false
        },
        {
          "line": 3203,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pInputCol, i)",
          "new_text": null,
          "old_line_content": "      char* data = colDataGetData(pInputCol, i);",
          "new_line_content": "  int32_t blockDataOrder = (startKey <= endKey) ? TSDB_ORDER_ASC : TSDB_ORDER_DESC;",
          "content_same": false
        },
        {
          "line": 3204,
          "old_api": "getRowPTs",
          "new_api": null,
          "old_text": "getRowPTs(pInput->pPTS, i)",
          "new_text": null,
          "old_line_content": "      TSKEY cts = getRowPTs(pInput->pPTS, i);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5254,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pEntryInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5255,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": null,
          "old_text": "GET_ROWCELL_INTERBUF(pEntryInfo)",
          "new_text": null,
          "old_line_content": "  STailInfo*           pInfo = GET_ROWCELL_INTERBUF(pEntryInfo);",
          "new_line_content": "  for (int32_t i = 0; i < pInfo->numOfPoints; ++i) {",
          "content_same": false
        },
        {
          "line": 3208,
          "old_api": "doSaveLastrow",
          "new_api": null,
          "old_text": "doSaveLastrow(pCtx, data, i, cts, pInfo)",
          "new_text": null,
          "old_line_content": "        doSaveLastrow(pCtx, data, i, cts, pInfo);",
          "new_line_content": "    for (int32_t i = pInput->numOfRows + pInput->startRowIndex - 1; i >= pInput->startRowIndex; --i) {",
          "content_same": false
        },
        {
          "line": 3215,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pInputCol, i)",
          "new_text": null,
          "old_line_content": "    char* data = colDataGetData(pInputCol, i);",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 3216,
          "old_api": "getRowPTs",
          "new_api": null,
          "old_text": "getRowPTs(pInput->pPTS, i)",
          "new_text": null,
          "old_line_content": "    TSKEY cts = getRowPTs(pInput->pPTS, i);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5267,
          "old_api": "colDataAppend",
          "new_api": null,
          "old_text": "colDataAppend(pCol, currentRow, pItem->data, false)",
          "new_text": null,
          "old_line_content": "    colDataAppend(pCol, currentRow, pItem->data, false);",
          "new_line_content": "  return 0;",
          "content_same": false
        },
        {
          "line": 3220,
          "old_api": "doSaveLastrow",
          "new_api": null,
          "old_text": "doSaveLastrow(pCtx, data, i, cts, pInfo)",
          "new_text": null,
          "old_line_content": "      doSaveLastrow(pCtx, data, i, cts, pInfo);",
          "new_line_content": "    for (int32_t i = pInput->startRowIndex; i < pInput->numOfRows + pInput->startRowIndex; ++i) {",
          "content_same": false
        },
        {
          "line": 3227,
          "old_api": "SET_VAL",
          "new_api": null,
          "old_text": "SET_VAL(pResInfo, numOfElems, 1)",
          "new_text": null,
          "old_line_content": "  SET_VAL(pResInfo, numOfElems, 1);",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 3237,
          "old_api": "functionSetup",
          "new_api": null,
          "old_text": "functionSetup(pCtx, pResInfo)",
          "new_text": null,
          "old_line_content": "  if (!functionSetup(pCtx, pResInfo)) {",
          "new_line_content": "    if (pResInfo->numOfRes == 0 || pInfo->ts < cts) {",
          "content_same": false
        },
        {
          "line": 3241,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": null,
          "old_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "new_text": null,
          "old_line_content": "  SDiffInfo* pDiffInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 5289,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": null,
          "old_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "new_text": null,
          "old_line_content": "  SUniqueInfo* pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "new_line_content": "  return pEntryInfo->numOfRes;",
          "content_same": false
        },
        {
          "line": 5294,
          "old_api": "taosHashClear",
          "new_api": null,
          "old_text": "taosHashClear(pInfo->pHash)",
          "new_text": null,
          "old_line_content": "    taosHashClear(pInfo->pHash);",
          "new_line_content": "bool getUniqueFuncEnv(SFunctionNode* pFunc, SFuncExecEnv* pEnv) {",
          "content_same": false
        },
        {
          "line": 5296,
          "old_api": "taosGetDefaultHashFunction",
          "new_api": null,
          "old_text": "taosGetDefaultHashFunction(TSDB_DATA_TYPE_BINARY)",
          "new_text": null,
          "old_line_content": "    pInfo->pHash = taosHashInit(64, taosGetDefaultHashFunction(TSDB_DATA_TYPE_BINARY), true, HASH_NO_LOCK);",
          "new_line_content": "  pEnv->calcMemSize = sizeof(SUniqueInfo) + UNIQUE_MAX_RESULT_SIZE;",
          "content_same": false
        },
        {
          "line": 5319,
          "old_api": "varDataTLen",
          "new_api": null,
          "old_text": "varDataTLen(data)",
          "new_text": null,
          "old_line_content": "  int32_t      hashKeyBytes = IS_VAR_DATA_TYPE(pInfo->colType) ? varDataTLen(data) : pInfo->colBytes;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5320,
          "old_api": "taosHashGet",
          "new_api": null,
          "old_text": "taosHashGet(pInfo->pHash, data, hashKeyBytes)",
          "new_text": null,
          "old_line_content": "  SUniqueItem* pHashItem = taosHashGet(pInfo->pHash, data, hashKeyBytes);",
          "new_line_content": "#if 0",
          "content_same": false
        },
        {
          "line": 5325,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(pItem->data, data, pInfo->colBytes)",
          "new_text": null,
          "old_line_content": "    memcpy(pItem->data, data, pInfo->colBytes);",
          "new_line_content": "    SUniqueItem* pItem = (SUniqueItem*)(pInfo->pItems + pInfo->numOfPoints * size);",
          "content_same": false
        },
        {
          "line": 3279,
          "old_api": "ASSERT",
          "new_api": null,
          "old_text": "ASSERT(0)",
          "new_text": null,
          "old_line_content": "      ASSERT(0);",
          "new_line_content": "      break;",
          "content_same": false
        },
        {
          "line": 5327,
          "old_api": "taosHashPut",
          "new_api": null,
          "old_text": "taosHashPut(pInfo->pHash, data, hashKeyBytes, (char*)pItem, sizeof(SUniqueItem*))",
          "new_text": null,
          "old_line_content": "    taosHashPut(pInfo->pHash, data, hashKeyBytes, (char*)pItem, sizeof(SUniqueItem*));",
          "new_line_content": "      pItem->timestamp = ts;",
          "content_same": false
        },
        {
          "line": 3291,
          "old_api": "colDataSetNull_f",
          "new_api": null,
          "old_text": "colDataSetNull_f(pOutput->nullbitmap, pos)",
          "new_text": null,
          "old_line_content": "        colDataSetNull_f(pOutput->nullbitmap, pos);",
          "new_line_content": "      pDiffInfo->prev.d64 = *(float*)pv;",
          "content_same": false
        },
        {
          "line": 3293,
          "old_api": "colDataAppendInt64",
          "new_api": null,
          "old_text": "colDataAppendInt64(pOutput, pos, &delta)",
          "new_text": null,
          "old_line_content": "        colDataAppendInt64(pOutput, pos, &delta);",
          "new_line_content": "    case TSDB_DATA_TYPE_DOUBLE:",
          "content_same": false
        },
        {
          "line": 5349,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pInputCol, i)",
          "new_text": null,
          "old_line_content": "    char* data = colDataGetData(pInputCol, i);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 5350,
          "old_api": "colDataIsNull_s",
          "new_api": null,
          "old_text": "colDataIsNull_s(pInputCol, i)",
          "new_text": null,
          "old_line_content": "    doUniqueAdd(pInfo, data, tsList[i], colDataIsNull_s(pInputCol, i));",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3304,
          "old_api": "colDataSetNull_f",
          "new_api": null,
          "old_text": "colDataSetNull_f(pOutput->nullbitmap, pos)",
          "new_text": null,
          "old_line_content": "        colDataSetNull_f(pOutput->nullbitmap, pos);",
          "new_line_content": "  switch (type) {",
          "content_same": false
        },
        {
          "line": 5353,
          "old_api": "taosHashCleanup",
          "new_api": null,
          "old_text": "taosHashCleanup(pInfo->pHash)",
          "new_text": null,
          "old_line_content": "      taosHashCleanup(pInfo->pHash);",
          "new_line_content": "int32_t uniqueFunction(SqlFunctionCtx* pCtx) {",
          "content_same": false
        },
        {
          "line": 3306,
          "old_api": "colDataAppendInt64",
          "new_api": null,
          "old_text": "colDataAppendInt64(pOutput, pos, &delta)",
          "new_text": null,
          "old_line_content": "        colDataAppendInt64(pOutput, pos, &delta);",
          "new_line_content": "      int32_t v = *(int32_t*)pv;",
          "content_same": false
        },
        {
          "line": 5361,
          "old_api": "colDataAppendNULL",
          "new_api": null,
          "old_text": "colDataAppendNULL(pOutput, i)",
          "new_text": null,
          "old_line_content": "      colDataAppendNULL(pOutput, i);",
          "new_line_content": "  SColumnInfoData* pInputCol = pInput->pData[0];",
          "content_same": false
        },
        {
          "line": 3315,
          "old_api": "colDataSetNull_f",
          "new_api": null,
          "old_text": "colDataSetNull_f(pOutput->nullbitmap, pos)",
          "new_text": null,
          "old_line_content": "        colDataSetNull_f(pOutput->nullbitmap, pos);",
          "new_line_content": "      break;",
          "content_same": false
        },
        {
          "line": 5363,
          "old_api": "colDataAppend",
          "new_api": null,
          "old_text": "colDataAppend(pOutput, i, pItem->data, false)",
          "new_text": null,
          "old_line_content": "      colDataAppend(pOutput, i, pItem->data, false);",
          "new_line_content": "  SColumnInfoData* pOutput = (SColumnInfoData*)pCtx->pOutput;",
          "content_same": false
        },
        {
          "line": 3317,
          "old_api": "colDataAppendInt64",
          "new_api": null,
          "old_text": "colDataAppendInt64(pOutput, pos, &delta)",
          "new_text": null,
          "old_line_content": "        colDataAppendInt64(pOutput, pos, &delta);",
          "new_line_content": "    case TSDB_DATA_TYPE_BOOL:",
          "content_same": false
        },
        {
          "line": 5366,
          "old_api": "colDataAppendInt64",
          "new_api": null,
          "old_text": "colDataAppendInt64(pTsOutput, i, &pItem->timestamp)",
          "new_text": null,
          "old_line_content": "      colDataAppendInt64(pTsOutput, i, &pItem->timestamp);",
          "new_line_content": "  for (int32_t i = pInput->startRowIndex; i < pInput->numOfRows + pInput->startRowIndex; ++i) {",
          "content_same": false
        },
        {
          "line": 3327,
          "old_api": "colDataSetNull_f",
          "new_api": null,
          "old_text": "colDataSetNull_f(pOutput->nullbitmap, pos)",
          "new_text": null,
          "old_line_content": "        colDataSetNull_f(pOutput->nullbitmap, pos);",
          "new_line_content": "      break;",
          "content_same": false
        },
        {
          "line": 3329,
          "old_api": "colDataAppendInt64",
          "new_api": null,
          "old_text": "colDataAppendInt64(pOutput, pos, &delta)",
          "new_text": null,
          "old_line_content": "        colDataAppendInt64(pOutput, pos, &delta);",
          "new_line_content": "    case TSDB_DATA_TYPE_SMALLINT: {",
          "content_same": false
        },
        {
          "line": 3337,
          "old_api": "isnan",
          "new_api": null,
          "old_text": "isnan(delta)",
          "new_text": null,
          "old_line_content": "      if ((delta < 0 && pDiffInfo->ignoreNegative) || isinf(delta) || isnan(delta)) {  // check for overflow",
          "new_line_content": "      pDiffInfo->prev.i64 = v;",
          "content_same": false
        },
        {
          "line": 3338,
          "old_api": "colDataSetNull_f",
          "new_api": null,
          "old_text": "colDataSetNull_f(pOutput->nullbitmap, pos)",
          "new_text": null,
          "old_line_content": "        colDataSetNull_f(pOutput->nullbitmap, pos);",
          "new_line_content": "      break;",
          "content_same": false
        },
        {
          "line": 5385,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": null,
          "old_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "new_text": null,
          "old_line_content": "  SModeInfo* pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3340,
          "old_api": "colDataAppendDouble",
          "new_api": null,
          "old_text": "colDataAppendDouble(pOutput, pos, &delta)",
          "new_text": null,
          "old_line_content": "        colDataAppendDouble(pOutput, pos, &delta);",
          "new_line_content": "    case TSDB_DATA_TYPE_TIMESTAMP:",
          "content_same": false
        },
        {
          "line": 5390,
          "old_api": "taosHashClear",
          "new_api": null,
          "old_text": "taosHashClear(pInfo->pHash)",
          "new_text": null,
          "old_line_content": "    taosHashClear(pInfo->pHash);",
          "new_line_content": "  return 0;",
          "content_same": false
        },
        {
          "line": 5392,
          "old_api": "taosGetDefaultHashFunction",
          "new_api": null,
          "old_text": "taosGetDefaultHashFunction(TSDB_DATA_TYPE_BINARY)",
          "new_text": null,
          "old_line_content": "    pInfo->pHash = taosHashInit(64, taosGetDefaultHashFunction(TSDB_DATA_TYPE_BINARY), true, HASH_NO_LOCK);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3348,
          "old_api": "isnan",
          "new_api": null,
          "old_text": "isnan(delta)",
          "new_text": null,
          "old_line_content": "      if ((delta < 0 && pDiffInfo->ignoreNegative) || isinf(delta) || isnan(delta)) {  // check for overflow",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 3349,
          "old_api": "colDataSetNull_f",
          "new_api": null,
          "old_text": "colDataSetNull_f(pOutput->nullbitmap, pos)",
          "new_text": null,
          "old_line_content": "        colDataSetNull_f(pOutput->nullbitmap, pos);",
          "new_line_content": "      pDiffInfo->prev.i64 = v;",
          "content_same": false
        },
        {
          "line": 5398,
          "old_api": "varDataTLen",
          "new_api": null,
          "old_text": "varDataTLen(data)",
          "new_text": null,
          "old_line_content": "  int32_t     hashKeyBytes = IS_STR_DATA_TYPE(pInfo->colType) ? varDataTLen(data) : pInfo->colBytes;",
          "new_line_content": "bool modeFunctionSetup(SqlFunctionCtx* pCtx, SResultRowEntryInfo* pResInfo) {",
          "content_same": false
        },
        {
          "line": 3351,
          "old_api": "colDataAppendDouble",
          "new_api": null,
          "old_text": "colDataAppendDouble(pOutput, pos, &delta)",
          "new_text": null,
          "old_line_content": "        colDataAppendDouble(pOutput, pos, &delta);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3357,
          "old_api": "ASSERT",
          "new_api": null,
          "old_text": "ASSERT(0)",
          "new_text": null,
          "old_line_content": "      ASSERT(0);",
          "new_line_content": "      } else {",
          "content_same": false
        },
        {
          "line": 5406,
          "old_api": "taosHashPut",
          "new_api": null,
          "old_text": "taosHashPut(pInfo->pHash, data, hashKeyBytes, &pItem, sizeof(SModeItem*))",
          "new_text": null,
          "old_line_content": "    taosHashPut(pInfo->pHash, data, hashKeyBytes, &pItem, sizeof(SModeItem*));",
          "new_line_content": "  pInfo->colBytes = pCtx->resDataInfo.bytes;",
          "content_same": false
        },
        {
          "line": 3362,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3363,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": null,
          "old_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "new_text": null,
          "old_line_content": "  SDiffInfo*           pDiffInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "new_line_content": "    case TSDB_DATA_TYPE_DOUBLE: {",
          "content_same": false
        },
        {
          "line": 5414,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5415,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": null,
          "old_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "new_text": null,
          "old_line_content": "  SModeInfo*           pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "new_line_content": "static void doModeAdd(SModeInfo* pInfo, char* data) {",
          "content_same": false
        },
        {
          "line": 5425,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pInputCol, i)",
          "new_text": null,
          "old_line_content": "    char* data = colDataGetData(pInputCol, i);",
          "new_line_content": "    pInfo->numOfPoints++;",
          "content_same": false
        },
        {
          "line": 3378,
          "old_api": "colDataIsNull_f",
          "new_api": null,
          "old_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "new_text": null,
          "old_line_content": "      if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5426,
          "old_api": "colDataIsNull_s",
          "new_api": null,
          "old_text": "colDataIsNull_s(pInputCol, i)",
          "new_text": null,
          "old_line_content": "    if (colDataIsNull_s(pInputCol, i)) {",
          "new_line_content": "  } else {",
          "content_same": false
        },
        {
          "line": 5431,
          "old_api": "doModeAdd",
          "new_api": null,
          "old_text": "doModeAdd(pInfo, data)",
          "new_text": null,
          "old_line_content": "    doModeAdd(pInfo, data);",
          "new_line_content": "int32_t modeFunction(SqlFunctionCtx* pCtx) {",
          "content_same": false
        },
        {
          "line": 5434,
          "old_api": "taosHashCleanup",
          "new_api": null,
          "old_text": "taosHashCleanup(pInfo->pHash)",
          "new_text": null,
          "old_line_content": "      taosHashCleanup(pInfo->pHash);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3387,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pInputCol, i)",
          "new_text": null,
          "old_line_content": "      char* pv = colDataGetData(pInputCol, i);",
          "new_line_content": "  int32_t numOfElems = 0;",
          "content_same": false
        },
        {
          "line": 3390,
          "old_api": "doHandleDiff",
          "new_api": null,
          "old_text": "doHandleDiff(pDiffInfo, pInputCol->info.type, pv, pOutput, pos, pCtx->order)",
          "new_text": null,
          "old_line_content": "        doHandleDiff(pDiffInfo, pInputCol->info.type, pv, pOutput, pos, pCtx->order);",
          "new_line_content": "  SColumnInfoData* pOutput = (SColumnInfoData*)pCtx->pOutput;",
          "content_same": false
        },
        {
          "line": 5439,
          "old_api": "SET_VAL",
          "new_api": null,
          "old_text": "SET_VAL(pResInfo, numOfElems, 1)",
          "new_text": null,
          "old_line_content": "  SET_VAL(pResInfo, numOfElems, 1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3393,
          "old_api": "appendSelectivityValue",
          "new_api": null,
          "old_text": "appendSelectivityValue(pCtx, i, pos)",
          "new_text": null,
          "old_line_content": "          appendSelectivityValue(pCtx, i, pos);",
          "new_line_content": "    for (int32_t i = pInput->startRowIndex; i < pInput->numOfRows + pInput->startRowIndex; i += 1) {",
          "content_same": false
        },
        {
          "line": 5445,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "      continue;",
          "content_same": false
        },
        {
          "line": 5446,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": null,
          "old_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "new_text": null,
          "old_line_content": "  SModeInfo*           pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5448,
          "old_api": "taosArrayGet",
          "new_api": null,
          "old_text": "taosArrayGet(pBlock->pDataBlock, slotId)",
          "new_text": null,
          "old_line_content": "  SColumnInfoData*     pCol = taosArrayGet(pBlock->pDataBlock, slotId);",
          "new_line_content": "    numOfElems++;",
          "content_same": false
        },
        {
          "line": 3407,
          "old_api": "colDataIsNull_f",
          "new_api": null,
          "old_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "new_text": null,
          "old_line_content": "      if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "new_line_content": "      if (pDiffInfo->hasPrev) {",
          "content_same": false
        },
        {
          "line": 3409,
          "old_api": "colDataSetNull_f",
          "new_api": null,
          "old_text": "colDataSetNull_f(pOutput->nullbitmap, pos)",
          "new_text": null,
          "old_line_content": "          colDataSetNull_f(pOutput->nullbitmap, pos);",
          "new_line_content": "        // handle selectivity",
          "content_same": false
        },
        {
          "line": 5465,
          "old_api": "colDataAppendNULL",
          "new_api": null,
          "old_text": "colDataAppendNULL(pCol, currentRow)",
          "new_text": null,
          "old_line_content": "    colDataAppendNULL(pCol, currentRow);",
          "new_line_content": "  int32_t              slotId = pCtx->pExpr->base.resSchema.slotId;",
          "content_same": false
        },
        {
          "line": 3420,
          "old_api": "doHandleDiff",
          "new_api": null,
          "old_text": "doHandleDiff(pDiffInfo, pInputCol->info.type, pv, pOutput, pos, pCtx->order)",
          "new_text": null,
          "old_line_content": "        doHandleDiff(pDiffInfo, pInputCol->info.type, pv, pOutput, pos, pCtx->order);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5468,
          "old_api": "taosHashCleanup",
          "new_api": null,
          "old_text": "taosHashCleanup(pInfo->pHash)",
          "new_text": null,
          "old_line_content": "  taosHashCleanup(pInfo->pHash);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3423,
          "old_api": "appendSelectivityValue",
          "new_api": null,
          "old_text": "appendSelectivityValue(pCtx, i, pos)",
          "new_text": null,
          "old_line_content": "          appendSelectivityValue(pCtx, i, pos);",
          "new_line_content": "      int32_t pos = startOffset + numOfElems;",
          "content_same": false
        },
        {
          "line": 3428,
          "old_api": "doSetPrevVal",
          "new_api": null,
          "old_text": "doSetPrevVal(pDiffInfo, pInputCol->info.type, pv)",
          "new_text": null,
          "old_line_content": "        doSetPrevVal(pDiffInfo, pInputCol->info.type, pv);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5479,
          "old_api": "functionSetup",
          "new_api": null,
          "old_text": "functionSetup(pCtx, pResultInfo)",
          "new_text": null,
          "old_line_content": "  if (!functionSetup(pCtx, pResultInfo)) {",
          "new_line_content": "  if (maxCount != 0) {",
          "content_same": false
        },
        {
          "line": 3442,
          "old_api": "nodesListGetNode",
          "new_api": null,
          "old_text": "nodesListGetNode(pFunc->pParameterList, 1)",
          "new_text": null,
          "old_line_content": "  SValueNode* pkNode = (SValueNode*)nodesListGetNode(pFunc->pParameterList, 1);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3448,
          "old_api": "functionSetup",
          "new_api": null,
          "old_text": "functionSetup(pCtx, pResInfo)",
          "new_text": null,
          "old_line_content": "  if (!functionSetup(pCtx, pResInfo)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3452,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": null,
          "old_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "new_text": null,
          "old_line_content": "  STopBotRes*           pRes = GET_ROWCELL_INTERBUF(pResInfo);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5506,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 5508,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": null,
          "old_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "new_text": null,
          "old_line_content": "  STwaInfo* pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "new_line_content": "static double twa_get_area(SPoint1 s, SPoint1 e) {",
          "content_same": false
        },
        {
          "line": 3463,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3464,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": null,
          "old_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "new_text": null,
          "old_line_content": "  STopBotRes*          pRes = GET_ROWCELL_INTERBUF(pResInfo);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5512,
          "old_api": "IS_NULL_TYPE",
          "new_api": null,
          "old_text": "IS_NULL_TYPE(pInputCol->info.type)",
          "new_text": null,
          "old_line_content": "  if (IS_NULL_TYPE(pInputCol->info.type)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5522,
          "old_api": "ASSERT",
          "new_api": null,
          "old_text": "ASSERT(last->key == INT64_MIN)",
          "new_text": null,
          "old_line_content": "    ASSERT(last->key == INT64_MIN);",
          "new_line_content": "  TSKEY* tsList = (int64_t*)pInput->pPTS->pData;",
          "content_same": false
        },
        {
          "line": 3477,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "  return true;",
          "content_same": false
        },
        {
          "line": 5532,
          "old_api": "twa_get_area",
          "new_api": null,
          "old_text": "twa_get_area(pCtx->start, *last)",
          "new_text": null,
          "old_line_content": "      pInfo->dOutput += twa_get_area(pCtx->start, *last);",
          "new_line_content": "    goto _twa_over;",
          "content_same": false
        },
        {
          "line": 3487,
          "old_api": "colDataIsNull_f",
          "new_api": null,
          "old_text": "colDataIsNull_f(pCol->nullbitmap, i)",
          "new_text": null,
          "old_line_content": "    if (pCol->hasNull && colDataIsNull_f(pCol->nullbitmap, i)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3492,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pCol, i)",
          "new_text": null,
          "old_line_content": "    char* data = colDataGetData(pCol, i);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3493,
          "old_api": "doAddIntoResult",
          "new_api": null,
          "old_text": "doAddIntoResult(pCtx, data, i, pCtx->pSrcBlock, pRes->type, pInput->uid, pResInfo, true)",
          "new_text": null,
          "old_line_content": "    doAddIntoResult(pCtx, data, i, pCtx->pSrcBlock, pRes->type, pInput->uid, pResInfo, true);",
          "new_line_content": "int32_t topFunction(SqlFunctionCtx* pCtx) {",
          "content_same": false
        },
        {
          "line": 3497,
          "old_api": "saveTupleData",
          "new_api": null,
          "old_text": "saveTupleData(pCtx, pInput->startRowIndex, pCtx->pSrcBlock, NULL)",
          "new_text": null,
          "old_line_content": "    pRes->nullTuplePos = saveTupleData(pCtx, pInput->startRowIndex, pCtx->pSrcBlock, NULL);",
          "new_line_content": "  SInputColumnInfoData* pInput = &pCtx->input;",
          "content_same": false
        },
        {
          "line": 5546,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pInputCol, i)",
          "new_text": null,
          "old_line_content": "      GET_TYPED_DATA(last->val, double, pInputCol->info.type, colDataGetData(pInputCol, i));",
          "new_line_content": "      last->key = tsList[i];",
          "content_same": false
        },
        {
          "line": 5560,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pInputCol, 0)",
          "new_text": null,
          "old_line_content": "      int8_t* val = (int8_t*)colDataGetData(pInputCol, 0);",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 5562,
          "old_api": "colDataIsNull_f",
          "new_api": null,
          "old_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "new_text": null,
          "old_line_content": "        if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "new_line_content": "      last->key = tsList[i];",
          "content_same": false
        },
        {
          "line": 5567,
          "old_api": "INIT_INTP_POINT",
          "new_api": null,
          "old_text": "INIT_INTP_POINT(st, tsList[i], val[i])",
          "new_text": null,
          "old_line_content": "        INIT_INTP_POINT(st, tsList[i], val[i]);",
          "new_line_content": "      numOfElems++;",
          "content_same": false
        },
        {
          "line": 3520,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pCol, i)",
          "new_text": null,
          "old_line_content": "    char* data = colDataGetData(pCol, i);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3521,
          "old_api": "doAddIntoResult",
          "new_api": null,
          "old_text": "doAddIntoResult(pCtx, data, i, pCtx->pSrcBlock, pRes->type, pInput->uid, pResInfo, false)",
          "new_text": null,
          "old_line_content": "    doAddIntoResult(pCtx, data, i, pCtx->pSrcBlock, pRes->type, pInput->uid, pResInfo, false);",
          "new_line_content": "int32_t bottomFunction(SqlFunctionCtx* pCtx) {",
          "content_same": false
        },
        {
          "line": 5572,
          "old_api": "twa_get_area",
          "new_api": null,
          "old_text": "twa_get_area(pInfo->p, st)",
          "new_text": null,
          "old_line_content": "        pInfo->dOutput += twa_get_area(pInfo->p, st);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3525,
          "old_api": "saveTupleData",
          "new_api": null,
          "old_text": "saveTupleData(pCtx, pInput->startRowIndex, pCtx->pSrcBlock, NULL)",
          "new_text": null,
          "old_line_content": "    pRes->nullTuplePos = saveTupleData(pCtx, pInput->startRowIndex, pCtx->pSrcBlock, NULL);",
          "new_line_content": "  SInputColumnInfoData* pInput = &pCtx->input;",
          "content_same": false
        },
        {
          "line": 5579,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pInputCol, 0)",
          "new_text": null,
          "old_line_content": "      int16_t* val = (int16_t*)colDataGetData(pInputCol, 0);",
          "new_line_content": "      for (; i < pInput->numOfRows + pInput->startRowIndex; i += 1) {",
          "content_same": false
        },
        {
          "line": 5581,
          "old_api": "colDataIsNull_f",
          "new_api": null,
          "old_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "new_text": null,
          "old_line_content": "        if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "new_line_content": "          continue;",
          "content_same": false
        },
        {
          "line": 5586,
          "old_api": "INIT_INTP_POINT",
          "new_api": null,
          "old_text": "INIT_INTP_POINT(st, tsList[i], val[i])",
          "new_text": null,
          "old_line_content": "        INIT_INTP_POINT(st, tsList[i], val[i]);",
          "new_line_content": "        if (pInfo->p.key == st.key) {",
          "content_same": false
        },
        {
          "line": 5591,
          "old_api": "twa_get_area",
          "new_api": null,
          "old_text": "twa_get_area(pInfo->p, st)",
          "new_text": null,
          "old_line_content": "        pInfo->dOutput += twa_get_area(pInfo->p, st);",
          "new_line_content": "        pInfo->p = st;",
          "content_same": false
        },
        {
          "line": 3544,
          "old_api": "IS_UNSIGNED_NUMERIC_TYPE",
          "new_api": null,
          "old_text": "IS_UNSIGNED_NUMERIC_TYPE(type)",
          "new_text": null,
          "old_line_content": "  } else if (IS_UNSIGNED_NUMERIC_TYPE(type)) {",
          "new_line_content": "    pRes->nullTupleSaved = true;",
          "content_same": false
        },
        {
          "line": 3561,
          "old_api": "getTopBotOutputInfo",
          "new_api": null,
          "old_text": "getTopBotOutputInfo(pCtx)",
          "new_text": null,
          "old_line_content": "  STopBotRes* pRes = getTopBotOutputInfo(pCtx);",
          "new_line_content": "    return (val1->v.i > val2->v.i) ? 1 : -1;",
          "content_same": false
        },
        {
          "line": 3564,
          "old_api": "taosVariantCreateFromBinary",
          "new_api": null,
          "old_text": "taosVariantCreateFromBinary(&val, pData, tDataTypes[type].bytes, type)",
          "new_text": null,
          "old_line_content": "  taosVariantCreateFromBinary(&val, pData, tDataTypes[type].bytes, type);",
          "new_line_content": "      return 0;",
          "content_same": false
        },
        {
          "line": 3567,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(pItems != NULL)",
          "new_text": null,
          "old_line_content": "  assert(pItems != NULL);",
          "new_line_content": "    return (val1->v.u > val2->v.u) ? 1 : -1;",
          "content_same": false
        },
        {
          "line": 3577,
          "old_api": "saveTupleData",
          "new_api": null,
          "old_text": "saveTupleData(pCtx, rowIndex, pSrcBlock, NULL)",
          "new_text": null,
          "old_line_content": "      pItem->tuplePos = saveTupleData(pCtx, rowIndex, pSrcBlock, NULL);",
          "new_line_content": "void doAddIntoResult(SqlFunctionCtx* pCtx, void* pData, int32_t rowIndex, SSDataBlock* pSrcBlock, uint16_t type,",
          "content_same": false
        },
        {
          "line": 3580,
          "old_api": "qDebug",
          "new_api": null,
          "old_text": "qDebug(\"page_saveTuple i:%d, item:%p,pageId:%d, offset:%d\\n\", pEntryInfo->numOfRes, pItem, pItem->tuplePos.pageId,\n           pItem->tuplePos.offset)",
          "new_text": null,
          "old_line_content": "    qDebug(\"page_saveTuple i:%d, item:%p,pageId:%d, offset:%d\\n\", pEntryInfo->numOfRes, pItem, pItem->tuplePos.pageId,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3588,
          "old_api": "IS_SIGNED_NUMERIC_TYPE",
          "new_api": null,
          "old_text": "IS_SIGNED_NUMERIC_TYPE(type)",
          "new_text": null,
          "old_line_content": "    if ((isTopQuery && ((IS_SIGNED_NUMERIC_TYPE(type) && val.i > pItems[0].v.i) ||",
          "new_line_content": "  if (pEntryInfo->numOfRes < pRes->maxSize) {",
          "content_same": false
        },
        {
          "line": 3589,
          "old_api": "IS_UNSIGNED_NUMERIC_TYPE",
          "new_api": null,
          "old_text": "IS_UNSIGNED_NUMERIC_TYPE(type)",
          "new_text": null,
          "old_line_content": "                        (IS_UNSIGNED_NUMERIC_TYPE(type) && val.u > pItems[0].v.u) ||",
          "new_line_content": "    STopBotResItem* pItem = &pItems[pEntryInfo->numOfRes];",
          "content_same": false
        },
        {
          "line": 3590,
          "old_api": "IS_FLOAT_TYPE",
          "new_api": null,
          "old_text": "IS_FLOAT_TYPE(type)",
          "new_text": null,
          "old_line_content": "                        (IS_FLOAT_TYPE(type) && val.d > pItems[0].v.d))) ||",
          "new_line_content": "    pItem->v = val;",
          "content_same": false
        },
        {
          "line": 3591,
          "old_api": "IS_SIGNED_NUMERIC_TYPE",
          "new_api": null,
          "old_text": "IS_SIGNED_NUMERIC_TYPE(type)",
          "new_text": null,
          "old_line_content": "        (!isTopQuery && ((IS_SIGNED_NUMERIC_TYPE(type) && val.i < pItems[0].v.i) ||",
          "new_line_content": "    pItem->uid = uid;",
          "content_same": false
        },
        {
          "line": 3592,
          "old_api": "IS_UNSIGNED_NUMERIC_TYPE",
          "new_api": null,
          "old_text": "IS_UNSIGNED_NUMERIC_TYPE(type)",
          "new_text": null,
          "old_line_content": "                         (IS_UNSIGNED_NUMERIC_TYPE(type) && val.u < pItems[0].v.u) ||",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3593,
          "old_api": "IS_FLOAT_TYPE",
          "new_api": null,
          "old_text": "IS_FLOAT_TYPE(type)",
          "new_text": null,
          "old_line_content": "                         (IS_FLOAT_TYPE(type) && val.d < pItems[0].v.d)))) {",
          "new_line_content": "    // save the data of this tuple",
          "content_same": false
        },
        {
          "line": 3601,
          "old_api": "updateTupleData",
          "new_api": null,
          "old_text": "updateTupleData(pCtx, rowIndex, pSrcBlock, &pItem->tuplePos)",
          "new_text": null,
          "old_line_content": "        updateTupleData(pCtx, rowIndex, pSrcBlock, &pItem->tuplePos);",
          "new_line_content": "    // allocate the buffer and keep the data of this row into the new allocated buffer",
          "content_same": false
        },
        {
          "line": 3604,
          "old_api": "qDebug",
          "new_api": null,
          "old_text": "qDebug(\"page_copyTuple pageId:%d, offset:%d\", pItem->tuplePos.pageId, pItem->tuplePos.offset)",
          "new_text": null,
          "old_line_content": "      qDebug(\"page_copyTuple pageId:%d, offset:%d\", pItem->tuplePos.pageId, pItem->tuplePos.offset);",
          "new_line_content": "                 !isTopQuery);",
          "content_same": false
        },
        {
          "line": 1565,
          "old_api": "updateTupleData",
          "new_api": null,
          "old_text": "updateTupleData(pCtx, i, pCtx->pSrcBlock, &pBuf->tuplePos)",
          "new_text": null,
          "old_line_content": "            updateTupleData(pCtx, i, pCtx->pSrcBlock, &pBuf->tuplePos);",
          "new_line_content": "          if (pCtx->subsidiaries.num > 0) {",
          "content_same": false
        },
        {
          "line": 1576,
          "old_api": "saveTupleData",
          "new_api": null,
          "old_text": "saveTupleData(pCtx, pInput->startRowIndex, pCtx->pSrcBlock, NULL)",
          "new_text": null,
          "old_line_content": "    pBuf->nullTuplePos = saveTupleData(pCtx, pInput->startRowIndex, pCtx->pSrcBlock, NULL);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 3630,
          "old_api": "taosArrayGet",
          "new_api": null,
          "old_text": "taosArrayGet(pSrcBlock->pDataBlock, srcSlotId)",
          "new_text": null,
          "old_line_content": "    SColumnInfoData* pCol = taosArrayGet(pSrcBlock->pDataBlock, srcSlotId);",
          "new_line_content": "/*",
          "content_same": false
        },
        {
          "line": 1583,
          "old_api": "doMinMaxHelper",
          "new_api": null,
          "old_text": "doMinMaxHelper(pCtx, 1)",
          "new_text": null,
          "old_line_content": "  int32_t numOfElems = doMinMaxHelper(pCtx, 1);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1584,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SET_VAL(GET_RES_INFO(pCtx), numOfElems, 1);",
          "new_line_content": "          }",
          "content_same": false
        },
        {
          "line": 3631,
          "old_api": "colDataIsNull_s",
          "new_api": null,
          "old_text": "colDataIsNull_s(pCol, rowIndex)",
          "new_text": null,
          "old_line_content": "    if ((nullList[i] = colDataIsNull_s(pCol, rowIndex)) == true) {",
          "new_line_content": " * +------------------------------------+--------------+--------------+",
          "content_same": false
        },
        {
          "line": 3636,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pCol, rowIndex)",
          "new_text": null,
          "old_line_content": "    char* p = colDataGetData(pCol, rowIndex);",
          "new_line_content": "void* serializeTupleData(const SSDataBlock* pSrcBlock, int32_t rowIndex, SSubsidiaryResInfo* pSubsidiaryies,",
          "content_same": false
        },
        {
          "line": 1589,
          "old_api": "doMinMaxHelper",
          "new_api": null,
          "old_text": "doMinMaxHelper(pCtx, 0)",
          "new_text": null,
          "old_line_content": "  int32_t numOfElems = doMinMaxHelper(pCtx, 0);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1590,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SET_VAL(GET_RES_INFO(pCtx), numOfElems, 1);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 3637,
          "old_api": "IS_VAR_DATA_TYPE",
          "new_api": null,
          "old_text": "IS_VAR_DATA_TYPE(pCol->info.type)",
          "new_text": null,
          "old_line_content": "    if (IS_VAR_DATA_TYPE(pCol->info.type)) {",
          "new_line_content": "                         char* buf) {",
          "content_same": false
        },
        {
          "line": 3638,
          "old_api": "varDataTLen",
          "new_api": null,
          "old_text": "varDataTLen(p)",
          "new_text": null,
          "old_line_content": "      memcpy(pStart + offset, p, (pCol->info.type == TSDB_DATA_TYPE_JSON) ? getJsonValueLen(p) : varDataTLen(p));",
          "new_line_content": "  char* nullList = buf;",
          "content_same": false
        },
        {
          "line": 3640,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(pStart + offset, p, pCol->info.bytes)",
          "new_text": null,
          "old_line_content": "      memcpy(pStart + offset, p, pCol->info.bytes);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1599,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pEntryInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1606,
          "old_api": "taosArrayGet",
          "new_api": null,
          "old_text": "taosArrayGet(pBlock->pDataBlock, slotId)",
          "new_text": null,
          "old_line_content": "  SColumnInfoData* pCol = taosArrayGet(pBlock->pDataBlock, slotId);",
          "new_line_content": "int32_t maxFunction(SqlFunctionCtx* pCtx) {",
          "content_same": false
        },
        {
          "line": 1611,
          "old_api": "colDataAppend",
          "new_api": null,
          "old_text": "colDataAppend(pCol, currentRow, (const char*)&v, pEntryInfo->isNullRes)",
          "new_text": null,
          "old_line_content": "    colDataAppend(pCol, currentRow, (const char*)&v, pEntryInfo->isNullRes);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3659,
          "old_api": "getBufPage",
          "new_api": null,
          "old_text": "getBufPage(pHandle->pBuf, pHandle->currentPage)",
          "new_text": null,
          "old_line_content": "      pPage = getBufPage(pHandle->pBuf, pHandle->currentPage);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1613,
          "old_api": "colDataAppend",
          "new_api": null,
          "old_text": "colDataAppend(pCol, currentRow, (const char*)&pRes->v, pEntryInfo->isNullRes)",
          "new_text": null,
          "old_line_content": "    colDataAppend(pCol, currentRow, (const char*)&pRes->v, pEntryInfo->isNullRes);",
          "new_line_content": "static void setSelectivityValue(SqlFunctionCtx* pCtx, SSDataBlock* pBlock, const STuplePos* pTuplePos,",
          "content_same": false
        },
        {
          "line": 3660,
          "old_api": "getBufPageSize",
          "new_api": null,
          "old_text": "getBufPageSize(pHandle->pBuf)",
          "new_text": null,
          "old_line_content": "      if (pPage->num + length > getBufPageSize(pHandle->pBuf)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3662,
          "old_api": "releaseBufPage",
          "new_api": null,
          "old_text": "releaseBufPage(pHandle->pBuf, pPage)",
          "new_text": null,
          "old_line_content": "        releaseBufPage(pHandle->pBuf, pPage);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 3663,
          "old_api": "getNewBufPage",
          "new_api": null,
          "old_text": "getNewBufPage(pHandle->pBuf, &pHandle->currentPage)",
          "new_text": null,
          "old_line_content": "        pPage = getNewBufPage(pHandle->pBuf, &pHandle->currentPage);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3669,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(pPage->data + pPage->num, pBuf, length)",
          "new_text": null,
          "old_line_content": "    memcpy(pPage->data + pPage->num, pBuf, length);",
          "new_line_content": "  STuplePos p = {0};",
          "content_same": false
        },
        {
          "line": 3672,
          "old_api": "setBufPageDirty",
          "new_api": null,
          "old_text": "setBufPageDirty(pPage, true)",
          "new_text": null,
          "old_line_content": "    setBufPageDirty(pPage, true);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3673,
          "old_api": "releaseBufPage",
          "new_api": null,
          "old_text": "releaseBufPage(pHandle->pBuf, pPage)",
          "new_text": null,
          "old_line_content": "    releaseBufPage(pHandle->pBuf, pPage);",
          "new_line_content": "    if (pHandle->currentPage == -1) {",
          "content_same": false
        },
        {
          "line": 3676,
          "old_api": "streamStateFuncPut",
          "new_api": null,
          "old_text": "streamStateFuncPut(pHandle->pState, pKey, pBuf, length)",
          "new_text": null,
          "old_line_content": "    if (streamStateFuncPut(pHandle->pState, pKey, pBuf, length) < 0) {",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 1634,
          "old_api": "taosArrayGet",
          "new_api": null,
          "old_text": "taosArrayGet(pBlock->pDataBlock, dstSlotId)",
          "new_text": null,
          "old_line_content": "    SColumnInfoData* pDstCol = taosArrayGet(pBlock->pDataBlock, dstSlotId);",
          "new_line_content": "  if (pEntryInfo->numOfRes > 0) {",
          "content_same": false
        },
        {
          "line": 5742,
          "old_api": "ASSERT",
          "new_api": null,
          "old_text": "ASSERT(0)",
          "new_text": null,
          "old_line_content": "      ASSERT(0);",
          "new_line_content": "      for (; i < pInput->numOfRows + pInput->startRowIndex; i += 1) {",
          "content_same": false
        },
        {
          "line": 1647,
          "old_api": "loadTupleData",
          "new_api": null,
          "old_text": "loadTupleData(pCtx, pTuplePos)",
          "new_text": null,
          "old_line_content": "      const char* p = loadTupleData(pCtx, pTuplePos);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3697,
          "old_api": "serializeTupleData",
          "new_api": null,
          "old_text": "serializeTupleData(pSrcBlock, rowIndex, &pCtx->subsidiaries, pCtx->subsidiaries.buf)",
          "new_text": null,
          "old_line_content": "  char* buf = serializeTupleData(pSrcBlock, rowIndex, &pCtx->subsidiaries, pCtx->subsidiaries.buf);",
          "new_line_content": "    p.streamTupleKey = *pKey;",
          "content_same": false
        },
        {
          "line": 3698,
          "old_api": "doSaveTupleData",
          "new_api": null,
          "old_text": "doSaveTupleData(&pCtx->saveHandle, buf, pCtx->subsidiaries.rowLen, pKey)",
          "new_text": null,
          "old_line_content": "  return doSaveTupleData(&pCtx->saveHandle, buf, pCtx->subsidiaries.rowLen, pKey);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 5747,
          "old_api": "twa_get_area",
          "new_api": null,
          "old_text": "twa_get_area(pInfo->p, pCtx->end)",
          "new_text": null,
          "old_line_content": "    pInfo->dOutput += twa_get_area(pInfo->p, pCtx->end);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3703,
          "old_api": "getBufPage",
          "new_api": null,
          "old_text": "getBufPage(pHandle->pBuf, pPos->pageId)",
          "new_text": null,
          "old_line_content": "    SFilePage* pPage = getBufPage(pHandle->pBuf, pPos->pageId);",
          "new_line_content": "STuplePos saveTupleData(SqlFunctionCtx* pCtx, int32_t rowIndex, const SSDataBlock* pSrcBlock, const STupleKey* pKey) {",
          "content_same": false
        },
        {
          "line": 3704,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(pPage->data + pPos->offset, pBuf, length)",
          "new_text": null,
          "old_line_content": "    memcpy(pPage->data + pPos->offset, pBuf, length);",
          "new_line_content": "  if (pCtx->subsidiaries.rowLen == 0) {",
          "content_same": false
        },
        {
          "line": 1657,
          "old_api": "taosArrayGet",
          "new_api": null,
          "old_text": "taosArrayGet(pBlock->pDataBlock, dstSlotId)",
          "new_text": null,
          "old_line_content": "        SColumnInfoData* pDstCol = taosArrayGet(pBlock->pDataBlock, dstSlotId);",
          "new_line_content": "void setSelectivityValue(SqlFunctionCtx* pCtx, SSDataBlock* pBlock, const STuplePos* pTuplePos, int32_t rowIndex) {",
          "content_same": false
        },
        {
          "line": 1658,
          "old_api": "ASSERT",
          "new_api": null,
          "old_text": "ASSERT(pc->pExpr->base.resSchema.bytes == pDstCol->info.bytes)",
          "new_text": null,
          "old_line_content": "        ASSERT(pc->pExpr->base.resSchema.bytes == pDstCol->info.bytes);",
          "new_line_content": "  if (pCtx->subsidiaries.num <= 0) {",
          "content_same": false
        },
        {
          "line": 3705,
          "old_api": "setBufPageDirty",
          "new_api": null,
          "old_text": "setBufPageDirty(pPage, true)",
          "new_text": null,
          "old_line_content": "    setBufPageDirty(pPage, true);",
          "new_line_content": "    int32_t rowLen = 0;",
          "content_same": false
        },
        {
          "line": 1660,
          "old_api": "colDataAppendNULL",
          "new_api": null,
          "old_text": "colDataAppendNULL(pDstCol, rowIndex)",
          "new_text": null,
          "old_line_content": "          colDataAppendNULL(pDstCol, rowIndex);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 3706,
          "old_api": "releaseBufPage",
          "new_api": null,
          "old_text": "releaseBufPage(pHandle->pBuf, pPage)",
          "new_text": null,
          "old_line_content": "    releaseBufPage(pHandle->pBuf, pPage);",
          "new_line_content": "    for (int32_t j = 0; j < pCtx->subsidiaries.num; ++j) {",
          "content_same": false
        },
        {
          "line": 1662,
          "old_api": "colDataAppend",
          "new_api": null,
          "old_text": "colDataAppend(pDstCol, rowIndex, pStart, false)",
          "new_text": null,
          "old_line_content": "          colDataAppend(pDstCol, rowIndex, pStart, false);",
          "new_line_content": "  if (pCtx->saveHandle.pBuf != NULL) {",
          "content_same": false
        },
        {
          "line": 3708,
          "old_api": "streamStateFuncPut",
          "new_api": null,
          "old_text": "streamStateFuncPut(pHandle->pState, &pPos->streamTupleKey, pBuf, length)",
          "new_text": null,
          "old_line_content": "    streamStateFuncPut(pHandle->pState, &pPos->streamTupleKey, pBuf, length);",
          "new_line_content": "      rowLen += pc->pExpr->base.resSchema.bytes;",
          "content_same": false
        },
        {
          "line": 5759,
          "old_api": "SET_VAL",
          "new_api": null,
          "old_text": "SET_VAL(pResInfo, 1, 1)",
          "new_text": null,
          "old_line_content": "  SET_VAL(pResInfo, 1, 1);",
          "new_line_content": "    default:",
          "content_same": false
        },
        {
          "line": 3729,
          "old_api": "streamStateFuncGet",
          "new_api": null,
          "old_text": "streamStateFuncGet(pHandle->pState, &pPos->streamTupleKey, &value, &vLen)",
          "new_text": null,
          "old_line_content": "    streamStateFuncGet(pHandle->pState, &pPos->streamTupleKey, &value, &vLen);",
          "new_line_content": "  return TSDB_CODE_SUCCESS;",
          "content_same": false
        },
        {
          "line": 5779,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": null,
          "old_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "new_text": null,
          "old_line_content": "  STwaInfo* pInfo = (STwaInfo*)GET_ROWCELL_INTERBUF(pResInfo);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3735,
          "old_api": "doLoadTupleData",
          "new_api": null,
          "old_text": "doLoadTupleData(&pCtx->saveHandle, pPos)",
          "new_text": null,
          "old_line_content": "  return doLoadTupleData(&pCtx->saveHandle, pPos);",
          "new_line_content": "  return TSDB_CODE_SUCCESS;",
          "content_same": false
        },
        {
          "line": 1691,
          "old_api": "taosArrayGet",
          "new_api": null,
          "old_text": "taosArrayGet(pCtx->pSrcBlock->pDataBlock, srcSlotId)",
          "new_text": null,
          "old_line_content": "    SColumnInfoData* pSrcCol = taosArrayGet(pCtx->pSrcBlock->pDataBlock, srcSlotId);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 3739,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pEntryInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "  if (pHandle->pBuf != NULL) {",
          "content_same": false
        },
        {
          "line": 1693,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pSrcCol, rowIndex)",
          "new_text": null,
          "old_line_content": "    char* pData = colDataGetData(pSrcCol, rowIndex);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 5792,
          "old_api": "functionFinalize",
          "new_api": null,
          "old_text": "functionFinalize(pCtx, pBlock)",
          "new_text": null,
          "old_line_content": "  return functionFinalize(pCtx, pBlock);",
          "new_line_content": "// }",
          "content_same": false
        },
        {
          "line": 3745,
          "old_api": "taosArrayGet",
          "new_api": null,
          "old_text": "taosArrayGet(pBlock->pDataBlock, slotId)",
          "new_text": null,
          "old_line_content": "  SColumnInfoData* pCol = taosArrayGet(pBlock->pDataBlock, slotId);",
          "new_line_content": "    void*   value = NULL;",
          "content_same": false
        },
        {
          "line": 1698,
          "old_api": "taosArrayGet",
          "new_api": null,
          "old_text": "taosArrayGet(pCtx->pDstBlock->pDataBlock, dstSlotId)",
          "new_text": null,
          "old_line_content": "    SColumnInfoData* pDstCol = taosArrayGet(pCtx->pDstBlock->pDataBlock, dstSlotId);",
          "new_line_content": "  if (pCtx->subsidiaries.num <= 0) {",
          "content_same": false
        },
        {
          "line": 1699,
          "old_api": "ASSERT",
          "new_api": null,
          "old_text": "ASSERT(pc->pExpr->base.resSchema.bytes == pDstCol->info.bytes)",
          "new_text": null,
          "old_line_content": "    ASSERT(pc->pExpr->base.resSchema.bytes == pDstCol->info.bytes);",
          "new_line_content": "    return;",
          "content_same": false
        },
        {
          "line": 5796,
          "old_api": "functionSetup",
          "new_api": null,
          "old_text": "functionSetup(pCtx, pResultInfo)",
          "new_text": null,
          "old_line_content": "  if (!functionSetup(pCtx, pResultInfo)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1701,
          "old_api": "colDataIsNull_s",
          "new_api": null,
          "old_text": "colDataIsNull_s(pSrcCol, rowIndex)",
          "new_text": null,
          "old_line_content": "    if (colDataIsNull_s(pSrcCol, rowIndex) == true) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1702,
          "old_api": "colDataAppendNULL",
          "new_api": null,
          "old_text": "colDataAppendNULL(pDstCol, pos)",
          "new_text": null,
          "old_line_content": "      colDataAppendNULL(pDstCol, pos);",
          "new_line_content": "  for (int32_t j = 0; j < pCtx->subsidiaries.num; ++j) {",
          "content_same": false
        },
        {
          "line": 3750,
          "old_api": "colDataAppendNULL",
          "new_api": null,
          "old_text": "colDataAppendNULL(pCol, currentRow)",
          "new_text": null,
          "old_line_content": "    colDataAppendNULL(pCol, currentRow);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1704,
          "old_api": "colDataAppend",
          "new_api": null,
          "old_text": "colDataAppend(pDstCol, pos, pData, false)",
          "new_text": null,
          "old_line_content": "      colDataAppend(pDstCol, pos, pData, false);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3751,
          "old_api": "setSelectivityValue",
          "new_api": null,
          "old_text": "setSelectivityValue(pCtx, pBlock, &pRes->nullTuplePos, currentRow)",
          "new_text": null,
          "old_line_content": "    setSelectivityValue(pCtx, pBlock, &pRes->nullTuplePos, currentRow);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5800,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  STableBlockDistInfo* pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "new_line_content": "  } else {",
          "content_same": false
        },
        {
          "line": 1710,
          "old_api": "releaseSource",
          "new_api": null,
          "old_text": "releaseSource(pDestPos)",
          "new_text": null,
          "old_line_content": "  releaseSource(pDestPos);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3760,
          "old_api": "colDataAppend",
          "new_api": null,
          "old_text": "colDataAppend(pCol, currentRow, (const char*)&pItem->v.i, false)",
          "new_text": null,
          "old_line_content": "      colDataAppend(pCol, currentRow, (const char*)&pItem->v.i, false);",
          "new_line_content": "  int16_t type = pCtx->pExpr->base.resSchema.type;",
          "content_same": false
        },
        {
          "line": 1715,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pDestCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pDResInfo = GET_RES_INFO(pDestCtx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5811,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 5813,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": null,
          "old_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "new_text": null,
          "old_line_content": "  STableBlockDistInfo* pDistInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "new_line_content": "bool blockDistSetup(SqlFunctionCtx* pCtx, SResultRowEntryInfo* pResultInfo) {",
          "content_same": false
        },
        {
          "line": 1718,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pSourceCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pSResInfo = GET_RES_INFO(pSourceCtx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3766,
          "old_api": "setSelectivityValue",
          "new_api": null,
          "old_text": "setSelectivityValue(pCtx, pBlock, &pRes->pItems[i].tuplePos, currentRow)",
          "new_text": null,
          "old_line_content": "    setSelectivityValue(pCtx, pBlock, &pRes->pItems[i].tuplePos, currentRow);",
          "new_line_content": "  int32_t currentRow = pBlock->info.rows;",
          "content_same": false
        },
        {
          "line": 5816,
          "old_api": "varDataLen",
          "new_api": null,
          "old_text": "varDataLen(pInputCol->pData)",
          "new_text": null,
          "old_line_content": "  tDeserializeBlockDistInfo(varDataVal(pInputCol->pData), varDataLen(pInputCol->pData), &p1);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 1721,
          "old_api": "IS_FLOAT_TYPE",
          "new_api": null,
          "old_text": "IS_FLOAT_TYPE(type)",
          "new_text": null,
          "old_line_content": "  if (IS_FLOAT_TYPE(type)) {",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 1724,
          "old_api": "replaceTupleData",
          "new_api": null,
          "old_text": "replaceTupleData(&pDBuf->tuplePos, &pSBuf->tuplePos)",
          "new_text": null,
          "old_line_content": "      replaceTupleData(&pDBuf->tuplePos, &pSBuf->tuplePos);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 3774,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pEntryInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "    if (type == TSDB_DATA_TYPE_FLOAT) {",
          "content_same": false
        },
        {
          "line": 3775,
          "old_api": "getTopBotOutputInfo",
          "new_api": null,
          "old_text": "getTopBotOutputInfo(pCtx)",
          "new_text": null,
          "old_line_content": "  STopBotRes*          pRes = getTopBotOutputInfo(pCtx);",
          "new_line_content": "      float v = pItem->v.d;",
          "content_same": false
        },
        {
          "line": 3777,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(pItems != NULL)",
          "new_text": null,
          "old_line_content": "  assert(pItems != NULL);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 1730,
          "old_api": "replaceTupleData",
          "new_api": null,
          "old_text": "replaceTupleData(&pDBuf->tuplePos, &pSBuf->tuplePos)",
          "new_text": null,
          "old_line_content": "      replaceTupleData(&pDBuf->tuplePos, &pSBuf->tuplePos);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3785,
          "old_api": "replaceTupleData",
          "new_api": null,
          "old_text": "replaceTupleData(&pItem->tuplePos, &pSourceItem->tuplePos)",
          "new_text": null,
          "old_line_content": "    replaceTupleData(&pItem->tuplePos, &pSourceItem->tuplePos);",
          "new_line_content": "    currentRow += 1;",
          "content_same": false
        },
        {
          "line": 3787,
          "old_api": "taosheapsort",
          "new_api": null,
          "old_text": "taosheapsort((void*)pItems, sizeof(STopBotResItem), pEntryInfo->numOfRes, (const void*)&type, topBotResComparFn,\n                 !isTopQuery)",
          "new_text": null,
          "old_line_content": "    taosheapsort((void*)pItems, sizeof(STopBotResItem), pEntryInfo->numOfRes, (const void*)&type, topBotResComparFn,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1740,
          "old_api": "minMaxCombine",
          "new_api": null,
          "old_text": "minMaxCombine(pDestCtx, pSourceCtx, 1)",
          "new_text": null,
          "old_line_content": "  return minMaxCombine(pDestCtx, pSourceCtx, 1);",
          "new_line_content": "    if (pSBuf->assign && ((((*(double*)&pDBuf->v) < (*(double*)&pSBuf->v)) ^ isMinFunc) || !pDBuf->assign)) {",
          "content_same": false
        },
        {
          "line": 5837,
          "old_api": "tListLen",
          "new_api": null,
          "old_text": "tListLen(pDistInfo->blockRowsHisto)",
          "new_text": null,
          "old_line_content": "  for (int32_t i = 0; i < tListLen(pDistInfo->blockRowsHisto); ++i) {",
          "new_line_content": "  pDistInfo->numOfTables += p1.numOfTables;",
          "content_same": false
        },
        {
          "line": 3790,
          "old_api": "IS_SIGNED_NUMERIC_TYPE",
          "new_api": null,
          "old_text": "IS_SIGNED_NUMERIC_TYPE(type)",
          "new_text": null,
          "old_line_content": "    if ((isTopQuery && ((IS_SIGNED_NUMERIC_TYPE(type) && pSourceItem->v.i > pItems[0].v.i) ||",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1743,
          "old_api": "minMaxCombine",
          "new_api": null,
          "old_text": "minMaxCombine(pDestCtx, pSourceCtx, 0)",
          "new_text": null,
          "old_line_content": "  return minMaxCombine(pDestCtx, pSourceCtx, 0);",
          "new_line_content": "      pDBuf->assign = true;",
          "content_same": false
        },
        {
          "line": 3791,
          "old_api": "IS_UNSIGNED_NUMERIC_TYPE",
          "new_api": null,
          "old_text": "IS_UNSIGNED_NUMERIC_TYPE(type)",
          "new_text": null,
          "old_line_content": "                        (IS_UNSIGNED_NUMERIC_TYPE(type) && pSourceItem->v.u > pItems[0].v.u) ||",
          "new_line_content": "void addResult(SqlFunctionCtx* pCtx, STopBotResItem* pSourceItem, int16_t type, bool isTopQuery) {",
          "content_same": false
        },
        {
          "line": 3794,
          "old_api": "IS_UNSIGNED_NUMERIC_TYPE",
          "new_api": null,
          "old_text": "IS_UNSIGNED_NUMERIC_TYPE(type)",
          "new_text": null,
          "old_line_content": "                         (IS_UNSIGNED_NUMERIC_TYPE(type) && pSourceItem->v.u < pItems[0].v.u) ||",
          "new_line_content": "  STopBotResItem*      pItems = pRes->pItems;",
          "content_same": false
        },
        {
          "line": 5847,
          "old_api": "tEncoderInit",
          "new_api": null,
          "old_text": "tEncoderInit(&encoder, buf, bufLen)",
          "new_text": null,
          "old_line_content": "  tEncoderInit(&encoder, buf, bufLen);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5849,
          "old_api": "tStartEncode",
          "new_api": null,
          "old_text": "tStartEncode(&encoder)",
          "new_text": null,
          "old_line_content": "  if (tStartEncode(&encoder) < 0) return -1;",
          "new_line_content": "    pDistInfo->minRows = p1.minRows;",
          "content_same": false
        },
        {
          "line": 1754,
          "old_api": "functionSetup",
          "new_api": null,
          "old_text": "functionSetup(pCtx, pResultInfo)",
          "new_text": null,
          "old_line_content": "  if (!functionSetup(pCtx, pResultInfo)) {",
          "new_line_content": "  return TSDB_CODE_SUCCESS;",
          "content_same": false
        },
        {
          "line": 3802,
          "old_api": "replaceTupleData",
          "new_api": null,
          "old_text": "replaceTupleData(&pItem->tuplePos, &pSourceItem->tuplePos)",
          "new_text": null,
          "old_line_content": "      replaceTupleData(&pItem->tuplePos, &pSourceItem->tuplePos);",
          "new_line_content": "    pItem->tuplePos.pageId = -1;",
          "content_same": false
        },
        {
          "line": 5850,
          "old_api": "tEncodeU32",
          "new_api": null,
          "old_text": "tEncodeU32(&encoder, pInfo->rowSize)",
          "new_text": null,
          "old_line_content": "  if (tEncodeU32(&encoder, pInfo->rowSize) < 0) return -1;",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 5852,
          "old_api": "tEncodeU16",
          "new_api": null,
          "old_text": "tEncodeU16(&encoder, pInfo->numOfFiles)",
          "new_text": null,
          "old_line_content": "  if (tEncodeU16(&encoder, pInfo->numOfFiles) < 0) return -1;",
          "new_line_content": "    pDistInfo->maxRows = p1.maxRows;",
          "content_same": false
        },
        {
          "line": 5853,
          "old_api": "tEncodeU32",
          "new_api": null,
          "old_text": "tEncodeU32(&encoder, pInfo->numOfBlocks)",
          "new_text": null,
          "old_line_content": "  if (tEncodeU32(&encoder, pInfo->numOfBlocks) < 0) return -1;",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 1759,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(pRes, 0, sizeof(SStddevRes))",
          "new_text": null,
          "old_line_content": "  memset(pRes, 0, sizeof(SStddevRes));",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 5854,
          "old_api": "tEncodeU32",
          "new_api": null,
          "old_text": "tEncodeU32(&encoder, pInfo->numOfTables)",
          "new_text": null,
          "old_line_content": "  if (tEncodeU32(&encoder, pInfo->numOfTables) < 0) return -1;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5856,
          "old_api": "tEncodeU64",
          "new_api": null,
          "old_text": "tEncodeU64(&encoder, pInfo->totalSize)",
          "new_text": null,
          "old_line_content": "  if (tEncodeU64(&encoder, pInfo->totalSize) < 0) return -1;",
          "new_line_content": "    pDistInfo->blockRowsHisto[i] += p1.blockRowsHisto[i];",
          "content_same": false
        },
        {
          "line": 5857,
          "old_api": "tEncodeU64",
          "new_api": null,
          "old_text": "tEncodeU64(&encoder, pInfo->totalRows)",
          "new_text": null,
          "old_line_content": "  if (tEncodeU64(&encoder, pInfo->totalRows) < 0) return -1;",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 5858,
          "old_api": "tEncodeI32",
          "new_api": null,
          "old_text": "tEncodeI32(&encoder, pInfo->maxRows)",
          "new_text": null,
          "old_line_content": "  if (tEncodeI32(&encoder, pInfo->maxRows) < 0) return -1;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5859,
          "old_api": "tEncodeI32",
          "new_api": null,
          "old_text": "tEncodeI32(&encoder, pInfo->minRows)",
          "new_text": null,
          "old_line_content": "  if (tEncodeI32(&encoder, pInfo->minRows) < 0) return -1;",
          "new_line_content": "  pResInfo->numOfRes = BLOCK_DIST_RESULT_ROWS;  // default output rows",
          "content_same": false
        },
        {
          "line": 5860,
          "old_api": "tEncodeI32",
          "new_api": null,
          "old_text": "tEncodeI32(&encoder, pInfo->defMaxRows)",
          "new_text": null,
          "old_line_content": "  if (tEncodeI32(&encoder, pInfo->defMaxRows) < 0) return -1;",
          "new_line_content": "  return TSDB_CODE_SUCCESS;",
          "content_same": false
        },
        {
          "line": 3814,
          "old_api": "addResult",
          "new_api": null,
          "old_text": "addResult(pDestCtx, pSBuf->pItems + i, type, true)",
          "new_text": null,
          "old_line_content": "    addResult(pDestCtx, pSBuf->pItems + i, type, true);",
          "new_line_content": "      // replace the old data and the coresponding tuple data",
          "content_same": false
        },
        {
          "line": 5863,
          "old_api": "tEncodeU32",
          "new_api": null,
          "old_text": "tEncodeU32(&encoder, pInfo->numOfSmallBlocks)",
          "new_text": null,
          "old_line_content": "  if (tEncodeU32(&encoder, pInfo->numOfSmallBlocks) < 0) return -1;",
          "new_line_content": "int32_t tSerializeBlockDistInfo(void* buf, int32_t bufLen, const STableBlockDistInfo* pInfo) {",
          "content_same": false
        },
        {
          "line": 5861,
          "old_api": "tEncodeI32",
          "new_api": null,
          "old_text": "tEncodeI32(&encoder, pInfo->defMinRows)",
          "new_text": null,
          "old_line_content": "  if (tEncodeI32(&encoder, pInfo->defMinRows) < 0) return -1;",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 5862,
          "old_api": "tEncodeU32",
          "new_api": null,
          "old_text": "tEncodeU32(&encoder, pInfo->numOfInmemRows)",
          "new_text": null,
          "old_line_content": "  if (tEncodeU32(&encoder, pInfo->numOfInmemRows) < 0) return -1;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1770,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SStddevRes* pStddevRes = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5866,
          "old_api": "tEncodeI32",
          "new_api": null,
          "old_text": "tEncodeI32(&encoder, pInfo->blockRowsHisto[i])",
          "new_text": null,
          "old_line_content": "    if (tEncodeI32(&encoder, pInfo->blockRowsHisto[i]) < 0) return -1;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5869,
          "old_api": "tEndEncode",
          "new_api": null,
          "old_text": "tEndEncode(&encoder)",
          "new_text": null,
          "old_line_content": "  tEndEncode(&encoder);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3824,
          "old_api": "addResult",
          "new_api": null,
          "old_text": "addResult(pDestCtx, pSBuf->pItems + i, type, false)",
          "new_text": null,
          "old_line_content": "    addResult(pDestCtx, pSBuf->pItems + i, type, false);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 1779,
          "old_api": "IS_NULL_TYPE",
          "new_api": null,
          "old_text": "IS_NULL_TYPE(type)",
          "new_text": null,
          "old_line_content": "  if (IS_NULL_TYPE(type)) {",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3837,
          "old_api": "functionSetup",
          "new_api": null,
          "old_text": "functionSetup(pCtx, pResultInfo)",
          "new_text": null,
          "old_line_content": "  if (!functionSetup(pCtx, pResultInfo)) {",
          "new_line_content": "int32_t bottomCombine(SqlFunctionCtx* pDestCtx, SqlFunctionCtx* pSourceCtx) {",
          "content_same": false
        },
        {
          "line": 5885,
          "old_api": "tDecodeU32",
          "new_api": null,
          "old_text": "tDecodeU32(&decoder, &pInfo->numOfTables)",
          "new_text": null,
          "old_line_content": "  if (tDecodeU32(&decoder, &pInfo->numOfTables) < 0) return -1;",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 5888,
          "old_api": "tDecodeU64",
          "new_api": null,
          "old_text": "tDecodeU64(&decoder, &pInfo->totalRows)",
          "new_text": null,
          "old_line_content": "  if (tDecodeU64(&decoder, &pInfo->totalRows) < 0) return -1;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3841,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": null,
          "old_text": "GET_ROWCELL_INTERBUF(pResultInfo)",
          "new_text": null,
          "old_line_content": "  SSpreadInfo* pInfo = GET_ROWCELL_INTERBUF(pResultInfo);",
          "new_line_content": "  for (int32_t i = 0; i < pSResInfo->numOfRes; i++) {",
          "content_same": false
        },
        {
          "line": 5889,
          "old_api": "tDecodeI32",
          "new_api": null,
          "old_text": "tDecodeI32(&decoder, &pInfo->maxRows)",
          "new_text": null,
          "old_line_content": "  if (tDecodeI32(&decoder, &pInfo->maxRows) < 0) return -1;",
          "new_line_content": "  int32_t tlen = encoder.pos;",
          "content_same": false
        },
        {
          "line": 3843,
          "old_api": "SET_DOUBLE_VAL",
          "new_api": null,
          "old_text": "SET_DOUBLE_VAL(&pInfo->max, -DBL_MAX)",
          "new_text": null,
          "old_line_content": "  SET_DOUBLE_VAL(&pInfo->max, -DBL_MAX);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 5891,
          "old_api": "tDecodeI32",
          "new_api": null,
          "old_text": "tDecodeI32(&decoder, &pInfo->defMaxRows)",
          "new_text": null,
          "old_line_content": "  if (tDecodeI32(&decoder, &pInfo->defMaxRows) < 0) return -1;",
          "new_line_content": "  return tlen;",
          "content_same": false
        },
        {
          "line": 5892,
          "old_api": "tDecodeI32",
          "new_api": null,
          "old_text": "tDecodeI32(&decoder, &pInfo->defMinRows)",
          "new_text": null,
          "old_line_content": "  if (tDecodeI32(&decoder, &pInfo->defMinRows) < 0) return -1;",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 5893,
          "old_api": "tDecodeU32",
          "new_api": null,
          "old_text": "tDecodeU32(&decoder, &pInfo->numOfInmemRows)",
          "new_text": null,
          "old_line_content": "  if (tDecodeU32(&decoder, &pInfo->numOfInmemRows) < 0) return -1;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5894,
          "old_api": "tDecodeU32",
          "new_api": null,
          "old_text": "tDecodeU32(&decoder, &pInfo->numOfSmallBlocks)",
          "new_text": null,
          "old_line_content": "  if (tDecodeU32(&decoder, &pInfo->numOfSmallBlocks) < 0) return -1;",
          "new_line_content": "int32_t tDeserializeBlockDistInfo(void* buf, int32_t bufLen, STableBlockDistInfo* pInfo) {",
          "content_same": false
        },
        {
          "line": 5897,
          "old_api": "tDecodeI32",
          "new_api": null,
          "old_text": "tDecodeI32(&decoder, &pInfo->blockRowsHisto[i])",
          "new_text": null,
          "old_line_content": "    if (tDecodeI32(&decoder, &pInfo->blockRowsHisto[i]) < 0) return -1;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1804,
          "old_api": "colDataIsNull_f",
          "new_api": null,
          "old_text": "colDataIsNull_f(pCol->nullbitmap, i)",
          "new_text": null,
          "old_line_content": "        if (pCol->hasNull && colDataIsNull_f(pCol->nullbitmap, i)) {",
          "new_line_content": "      int8_t* plist = (int8_t*)pCol->pData;",
          "content_same": false
        },
        {
          "line": 5900,
          "old_api": "tDecoderClear",
          "new_api": null,
          "old_text": "tDecoderClear(&decoder)",
          "new_text": null,
          "old_line_content": "  tDecoderClear(&decoder);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3856,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SSpreadInfo* pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "new_line_content": "    return false;",
          "content_same": false
        },
        {
          "line": 3864,
          "old_api": "IS_SIGNED_NUMERIC_TYPE",
          "new_api": null,
          "old_text": "IS_SIGNED_NUMERIC_TYPE(type)",
          "new_text": null,
          "old_line_content": "    if (IS_SIGNED_NUMERIC_TYPE(type)) {",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3865,
          "old_api": "GET_INT64_VAL",
          "new_api": null,
          "old_text": "GET_INT64_VAL(&pAgg->min)",
          "new_text": null,
          "old_line_content": "      tmin = (double)GET_INT64_VAL(&pAgg->min);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3866,
          "old_api": "GET_INT64_VAL",
          "new_api": null,
          "old_text": "GET_INT64_VAL(&pAgg->max)",
          "new_text": null,
          "old_line_content": "      tmax = (double)GET_INT64_VAL(&pAgg->max);",
          "new_line_content": "int32_t spreadFunction(SqlFunctionCtx* pCtx) {",
          "content_same": false
        },
        {
          "line": 1819,
          "old_api": "colDataIsNull_f",
          "new_api": null,
          "old_text": "colDataIsNull_f(pCol->nullbitmap, i)",
          "new_text": null,
          "old_line_content": "        if (pCol->hasNull && colDataIsNull_f(pCol->nullbitmap, i)) {",
          "new_line_content": "    case TSDB_DATA_TYPE_SMALLINT: {",
          "content_same": false
        },
        {
          "line": 3867,
          "old_api": "IS_FLOAT_TYPE",
          "new_api": null,
          "old_text": "IS_FLOAT_TYPE(type)",
          "new_text": null,
          "old_line_content": "    } else if (IS_FLOAT_TYPE(type)) {",
          "new_line_content": "  int32_t numOfElems = 0;",
          "content_same": false
        },
        {
          "line": 3868,
          "old_api": "GET_DOUBLE_VAL",
          "new_api": null,
          "old_text": "GET_DOUBLE_VAL(&pAgg->min)",
          "new_text": null,
          "old_line_content": "      tmin = GET_DOUBLE_VAL(&pAgg->min);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3869,
          "old_api": "GET_DOUBLE_VAL",
          "new_api": null,
          "old_text": "GET_DOUBLE_VAL(&pAgg->max)",
          "new_text": null,
          "old_line_content": "      tmax = GET_DOUBLE_VAL(&pAgg->max);",
          "new_line_content": "  // Only the pre-computing information loaded and actual data does not loaded",
          "content_same": false
        },
        {
          "line": 3870,
          "old_api": "IS_UNSIGNED_NUMERIC_TYPE",
          "new_api": null,
          "old_text": "IS_UNSIGNED_NUMERIC_TYPE(type)",
          "new_text": null,
          "old_line_content": "    } else if (IS_UNSIGNED_NUMERIC_TYPE(type)) {",
          "new_line_content": "  SInputColumnInfoData* pInput = &pCtx->input;",
          "content_same": false
        },
        {
          "line": 3871,
          "old_api": "GET_UINT64_VAL",
          "new_api": null,
          "old_text": "GET_UINT64_VAL(&pAgg->min)",
          "new_text": null,
          "old_line_content": "      tmin = (double)GET_UINT64_VAL(&pAgg->min);",
          "new_line_content": "  SColumnDataAgg*       pAgg = pInput->pColumnDataAgg[0];",
          "content_same": false
        },
        {
          "line": 3872,
          "old_api": "GET_UINT64_VAL",
          "new_api": null,
          "old_text": "GET_UINT64_VAL(&pAgg->max)",
          "new_text": null,
          "old_line_content": "      tmax = (double)GET_UINT64_VAL(&pAgg->max);",
          "new_line_content": "  int32_t               type = pInput->pData[0]->info.type;",
          "content_same": false
        },
        {
          "line": 5917,
          "old_api": "sprintf",
          "new_api": null,
          "old_text": "sprintf(st + VARSTR_HEADER_SIZE,\n                        \"Total_Blocks=[%d] Total_Size=[%.2f Kb] Average_size=[%.2f Kb] Compression_Ratio=[%.2f %c]\",\n                        pData->numOfBlocks, pData->totalSize / 1024.0, ((double)pData->totalSize) / pData->numOfBlocks,\n                        pData->totalSize * 100 / totalRawSize, '%')",
          "new_text": null,
          "old_line_content": "  int32_t len = sprintf(st + VARSTR_HEADER_SIZE,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3875,
          "old_api": "GET_DOUBLE_VAL",
          "new_api": null,
          "old_text": "GET_DOUBLE_VAL(&pInfo->min)",
          "new_text": null,
          "old_line_content": "    if (GET_DOUBLE_VAL(&pInfo->min) > tmin) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3876,
          "old_api": "SET_DOUBLE_VAL",
          "new_api": null,
          "old_text": "SET_DOUBLE_VAL(&pInfo->min, tmin)",
          "new_text": null,
          "old_line_content": "      SET_DOUBLE_VAL(&pInfo->min, tmin);",
          "new_line_content": "  if (pInput->colDataAggIsSet) {",
          "content_same": false
        },
        {
          "line": 5922,
          "old_api": "varDataSetLen",
          "new_api": null,
          "old_text": "varDataSetLen(st, len)",
          "new_text": null,
          "old_line_content": "  varDataSetLen(st, len);",
          "new_line_content": "int32_t blockDistFinalize(SqlFunctionCtx* pCtx, SSDataBlock* pBlock) {",
          "content_same": false
        },
        {
          "line": 3879,
          "old_api": "GET_DOUBLE_VAL",
          "new_api": null,
          "old_text": "GET_DOUBLE_VAL(&pInfo->max)",
          "new_text": null,
          "old_line_content": "    if (GET_DOUBLE_VAL(&pInfo->max) < tmax) {",
          "new_line_content": "      goto _spread_over;",
          "content_same": false
        },
        {
          "line": 3880,
          "old_api": "SET_DOUBLE_VAL",
          "new_api": null,
          "old_text": "SET_DOUBLE_VAL(&pInfo->max, tmax)",
          "new_text": null,
          "old_line_content": "      SET_DOUBLE_VAL(&pInfo->max, tmax);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 5930,
          "old_api": "sprintf",
          "new_api": null,
          "old_text": "sprintf(st + VARSTR_HEADER_SIZE,\n                \"Total_Rows=[%\" PRId64 \"] Inmem_Rows=[%d] MinRows=[%d] MaxRows=[%d] Average_Rows=[%\" PRId64 \"]\",\n                pData->totalRows, pData->numOfInmemRows, pData->minRows, pData->maxRows, avgRows)",
          "new_text": null,
          "old_line_content": "  len = sprintf(st + VARSTR_HEADER_SIZE,",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 1835,
          "old_api": "colDataIsNull_f",
          "new_api": null,
          "old_text": "colDataIsNull_f(pCol->nullbitmap, i)",
          "new_text": null,
          "old_line_content": "        if (pCol->hasNull && colDataIsNull_f(pCol->nullbitmap, i)) {",
          "new_line_content": "      int32_t* plist = (int32_t*)pCol->pData;",
          "content_same": false
        },
        {
          "line": 5934,
          "old_api": "varDataSetLen",
          "new_api": null,
          "old_text": "varDataSetLen(st, len)",
          "new_text": null,
          "old_line_content": "  varDataSetLen(st, len);",
          "new_line_content": "  double  totalRawSize = pData->totalRows * pData->rowSize;",
          "content_same": false
        },
        {
          "line": 5937,
          "old_api": "sprintf",
          "new_api": null,
          "old_text": "sprintf(st + VARSTR_HEADER_SIZE, \"Total_Tables=[%d] Total_Files=[%d] Total_Vgroups=[%d]\", pData->numOfTables,\n                pData->numOfFiles, 0)",
          "new_text": null,
          "old_line_content": "  len = sprintf(st + VARSTR_HEADER_SIZE, \"Total_Tables=[%d] Total_Files=[%d] Total_Vgroups=[%d]\", pData->numOfTables,",
          "new_line_content": "                        pData->numOfBlocks, pData->totalSize / 1024.0, ((double)pData->totalSize) / pData->numOfBlocks,",
          "content_same": false
        },
        {
          "line": 5943,
          "old_api": "sprintf",
          "new_api": null,
          "old_text": "sprintf(st + VARSTR_HEADER_SIZE,\n                \"--------------------------------------------------------------------------------\")",
          "new_text": null,
          "old_line_content": "  len = sprintf(st + VARSTR_HEADER_SIZE,",
          "new_line_content": "  int64_t avgRows = 0;",
          "content_same": false
        },
        {
          "line": 5945,
          "old_api": "varDataSetLen",
          "new_api": null,
          "old_text": "varDataSetLen(st, len)",
          "new_text": null,
          "old_line_content": "  varDataSetLen(st, len);",
          "new_line_content": "    avgRows = pData->totalRows / pData->numOfBlocks;",
          "content_same": false
        },
        {
          "line": 1850,
          "old_api": "colDataIsNull_f",
          "new_api": null,
          "old_text": "colDataIsNull_f(pCol->nullbitmap, i)",
          "new_text": null,
          "old_line_content": "        if (pCol->hasNull && colDataIsNull_f(pCol->nullbitmap, i)) {",
          "new_line_content": "    case TSDB_DATA_TYPE_BIGINT: {",
          "content_same": false
        },
        {
          "line": 5946,
          "old_api": "colDataAppend",
          "new_api": null,
          "old_text": "colDataAppend(pColInfo, row++, st, false)",
          "new_text": null,
          "old_line_content": "  colDataAppend(pColInfo, row++, st, false);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 3901,
          "old_api": "GET_DOUBLE_VAL",
          "new_api": null,
          "old_text": "GET_DOUBLE_VAL(&pInfo->max)",
          "new_text": null,
          "old_line_content": "      if (v > GET_DOUBLE_VAL(&pInfo->max)) {",
          "new_line_content": "  } else {  // computing based on the true data block",
          "content_same": false
        },
        {
          "line": 3902,
          "old_api": "SET_DOUBLE_VAL",
          "new_api": null,
          "old_text": "SET_DOUBLE_VAL(&pInfo->max, v)",
          "new_text": null,
          "old_line_content": "        SET_DOUBLE_VAL(&pInfo->max, v);",
          "new_line_content": "    SColumnInfoData* pCol = pInput->pData[0];",
          "content_same": false
        },
        {
          "line": 5950,
          "old_api": "tListLen",
          "new_api": null,
          "old_text": "tListLen(pData->blockRowsHisto)",
          "new_text": null,
          "old_line_content": "  for (int32_t i = 0; i < tListLen(pData->blockRowsHisto); ++i) {",
          "new_line_content": "                pData->totalRows, pData->numOfInmemRows, pData->minRows, pData->maxRows, avgRows);",
          "content_same": false
        },
        {
          "line": 1866,
          "old_api": "colDataIsNull_f",
          "new_api": null,
          "old_text": "colDataIsNull_f(pCol->nullbitmap, i)",
          "new_text": null,
          "old_line_content": "        if (pCol->hasNull && colDataIsNull_f(pCol->nullbitmap, i)) {",
          "new_line_content": "      uint8_t* plist = (uint8_t*)pCol->pData;",
          "content_same": false
        },
        {
          "line": 5966,
          "old_api": "tListLen",
          "new_api": null,
          "old_text": "tListLen(pData->blockRowsHisto)",
          "new_text": null,
          "old_line_content": "  for (int32_t i = 0; i < tListLen(pData->blockRowsHisto); ++i) {",
          "new_line_content": "  int32_t maxVal = 0;",
          "content_same": false
        },
        {
          "line": 5967,
          "old_api": "sprintf",
          "new_api": null,
          "old_text": "sprintf(st + VARSTR_HEADER_SIZE, \"%04d |\", pData->defMinRows + bucketRange * i)",
          "new_text": null,
          "old_line_content": "    len = sprintf(st + VARSTR_HEADER_SIZE, \"%04d |\", pData->defMinRows + bucketRange * i);",
          "new_line_content": "  int32_t minVal = INT32_MAX;",
          "content_same": false
        },
        {
          "line": 5975,
          "old_api": "sprintf",
          "new_api": null,
          "old_text": "sprintf(st + VARSTR_HEADER_SIZE + len, \"%c\", '|')",
          "new_text": null,
          "old_line_content": "      int32_t x = sprintf(st + VARSTR_HEADER_SIZE + len, \"%c\", '|');",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1881,
          "old_api": "colDataIsNull_f",
          "new_api": null,
          "old_text": "colDataIsNull_f(pCol->nullbitmap, i)",
          "new_text": null,
          "old_line_content": "        if (pCol->hasNull && colDataIsNull_f(pCol->nullbitmap, i)) {",
          "new_line_content": "    case TSDB_DATA_TYPE_USMALLINT: {",
          "content_same": false
        },
        {
          "line": 3933,
          "old_api": "ASSERT",
          "new_api": null,
          "old_text": "ASSERT(pCol->info.type == TSDB_DATA_TYPE_BINARY)",
          "new_text": null,
          "old_line_content": "  ASSERT(pCol->info.type == TSDB_DATA_TYPE_BINARY);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5981,
          "old_api": "sprintf",
          "new_api": null,
          "old_text": "sprintf(st + VARSTR_HEADER_SIZE + len, \"  %d (%.2f%c)\", pData->blockRowsHisto[i], v, '%')",
          "new_text": null,
          "old_line_content": "      len += sprintf(st + VARSTR_HEADER_SIZE + len, \"  %d (%.2f%c)\", pData->blockRowsHisto[i], v, '%');",
          "new_line_content": "  int32_t numOfBuckets = sizeof(pData->blockRowsHisto) / sizeof(pData->blockRowsHisto[0]);",
          "content_same": false
        },
        {
          "line": 3935,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SSpreadInfo* pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3939,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pCol, i)",
          "new_text": null,
          "old_line_content": "    char*        data = colDataGetData(pCol, i);",
          "new_line_content": "  if (pInput->max > pOutput->max) {",
          "content_same": false
        },
        {
          "line": 3940,
          "old_api": "varDataVal",
          "new_api": null,
          "old_text": "varDataVal(data)",
          "new_text": null,
          "old_line_content": "    SSpreadInfo* pInputInfo = (SSpreadInfo*)varDataVal(data);",
          "new_line_content": "    pOutput->max = pInput->max;",
          "content_same": false
        },
        {
          "line": 3942,
          "old_api": "spreadTransferInfo",
          "new_api": null,
          "old_text": "spreadTransferInfo(pInputInfo, pInfo)",
          "new_text": null,
          "old_line_content": "      spreadTransferInfo(pInputInfo, pInfo);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1897,
          "old_api": "colDataIsNull_f",
          "new_api": null,
          "old_text": "colDataIsNull_f(pCol->nullbitmap, i)",
          "new_text": null,
          "old_line_content": "        if (pCol->hasNull && colDataIsNull_f(pCol->nullbitmap, i)) {",
          "new_line_content": "      uint32_t* plist = (uint32_t*)pCol->pData;",
          "content_same": false
        },
        {
          "line": 3947,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "    GET_RES_INFO(pCtx)->numOfRes = 1;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5997,
          "old_api": "functionSetup",
          "new_api": null,
          "old_text": "functionSetup(pCtx, pResInfo)",
          "new_text": null,
          "old_line_content": "  if (!functionSetup(pCtx, pResInfo)) {",
          "new_line_content": "    if (num > 0) {",
          "content_same": false
        },
        {
          "line": 6001,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": null,
          "old_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "new_text": null,
          "old_line_content": "  SDerivInfo* pDerivInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3954,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SSpreadInfo* pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3956,
          "old_api": "SET_DOUBLE_VAL",
          "new_api": null,
          "old_text": "SET_DOUBLE_VAL(&pInfo->result, pInfo->max - pInfo->min)",
          "new_text": null,
          "old_line_content": "    SET_DOUBLE_VAL(&pInfo->result, pInfo->max - pInfo->min);",
          "new_line_content": "  for (int32_t i = start; i < start + pInput->numOfRows; ++i) {",
          "content_same": false
        },
        {
          "line": 1912,
          "old_api": "colDataIsNull_f",
          "new_api": null,
          "old_text": "colDataIsNull_f(pCol->nullbitmap, i)",
          "new_text": null,
          "old_line_content": "        if (pCol->hasNull && colDataIsNull_f(pCol->nullbitmap, i)) {",
          "new_line_content": "    case TSDB_DATA_TYPE_UBIGINT: {",
          "content_same": false
        },
        {
          "line": 6011,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "  return true;",
          "content_same": false
        },
        {
          "line": 3964,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "  if (pInfo->hasResult) {",
          "content_same": false
        },
        {
          "line": 6012,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": null,
          "old_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "new_text": null,
          "old_line_content": "  SDerivInfo*          pDerivInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3966,
          "old_api": "getSpreadInfoSize",
          "new_api": null,
          "old_text": "getSpreadInfoSize()",
          "new_text": null,
          "old_line_content": "  int32_t              resultBytes = getSpreadInfoSize();",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 3967,
          "old_api": "taosMemoryCalloc",
          "new_api": null,
          "old_text": "taosMemoryCalloc(resultBytes + VARSTR_HEADER_SIZE, sizeof(char))",
          "new_text": null,
          "old_line_content": "  char*                res = taosMemoryCalloc(resultBytes + VARSTR_HEADER_SIZE, sizeof(char));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3969,
          "old_api": "varDataVal",
          "new_api": null,
          "old_text": "varDataVal(res)",
          "new_text": null,
          "old_line_content": "  memcpy(varDataVal(res), pInfo, resultBytes);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3970,
          "old_api": "varDataSetLen",
          "new_api": null,
          "old_text": "varDataSetLen(res, resultBytes)",
          "new_text": null,
          "old_line_content": "  varDataSetLen(res, resultBytes);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3973,
          "old_api": "taosArrayGet",
          "new_api": null,
          "old_text": "taosArrayGet(pBlock->pDataBlock, slotId)",
          "new_text": null,
          "old_line_content": "  SColumnInfoData* pCol = taosArrayGet(pBlock->pDataBlock, slotId);",
          "new_line_content": "  if (pInfo->hasResult == true) {",
          "content_same": false
        },
        {
          "line": 1927,
          "old_api": "colDataIsNull_f",
          "new_api": null,
          "old_text": "colDataIsNull_f(pCol->nullbitmap, i)",
          "new_text": null,
          "old_line_content": "        if (pCol->hasNull && colDataIsNull_f(pCol->nullbitmap, i)) {",
          "new_line_content": "    case TSDB_DATA_TYPE_FLOAT: {",
          "content_same": false
        },
        {
          "line": 3975,
          "old_api": "colDataAppend",
          "new_api": null,
          "old_text": "colDataAppend(pCol, pBlock->info.rows, res, false)",
          "new_text": null,
          "old_line_content": "  colDataAppend(pCol, pBlock->info.rows, res, false);",
          "new_line_content": "  } else {",
          "content_same": false
        },
        {
          "line": 3977,
          "old_api": "taosMemoryFree",
          "new_api": null,
          "old_text": "taosMemoryFree(res)",
          "new_text": null,
          "old_line_content": "  taosMemoryFree(res);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 6028,
          "old_api": "colDataIsNull_f",
          "new_api": null,
          "old_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "new_text": null,
          "old_line_content": "      if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "new_line_content": "int32_t derivativeFunction(SqlFunctionCtx* pCtx) {",
          "content_same": false
        },
        {
          "line": 3986,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": null,
          "old_text": "GET_ROWCELL_INTERBUF(pSResInfo)",
          "new_text": null,
          "old_line_content": "  SSpreadInfo*         pSBuf = GET_ROWCELL_INTERBUF(pSResInfo);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4457,
          "old_api": "getHistogramInfoSize",
          "new_api": null,
          "old_text": "getHistogramInfoSize()",
          "new_text": null,
          "old_line_content": "  int32_t              resultBytes = getHistogramInfoSize();",
          "new_line_content": "    if (!pInfo->normalized) {",
          "content_same": false
        },
        {
          "line": 6042,
          "old_api": "isnan",
          "new_api": null,
          "old_text": "isnan(r)",
          "new_text": null,
          "old_line_content": "          if (isinf(r) || isnan(r)) {",
          "new_line_content": "  double v = 0;",
          "content_same": false
        },
        {
          "line": 6043,
          "old_api": "colDataAppendNULL",
          "new_api": null,
          "old_text": "colDataAppendNULL(pOutput, pos)",
          "new_text": null,
          "old_line_content": "            colDataAppendNULL(pOutput, pos);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6045,
          "old_api": "colDataAppend",
          "new_api": null,
          "old_text": "colDataAppend(pOutput, pos, (const char*)&r, false)",
          "new_text": null,
          "old_line_content": "            colDataAppend(pOutput, pos, (const char*)&r, false);",
          "new_line_content": "    for (; i < pInput->numOfRows + pInput->startRowIndex; i += 1) {",
          "content_same": false
        },
        {
          "line": 1951,
          "old_api": "IS_SIGNED_NUMERIC_TYPE",
          "new_api": null,
          "old_text": "IS_SIGNED_NUMERIC_TYPE(pOutput->type)",
          "new_text": null,
          "old_line_content": "  if (IS_SIGNED_NUMERIC_TYPE(pOutput->type)) {",
          "new_line_content": "        pStddevRes->dsum += plist[i];",
          "content_same": false
        },
        {
          "line": 6049,
          "old_api": "colDataAppendInt64",
          "new_api": null,
          "old_text": "colDataAppendInt64(pTsOutput, pos, &tsList[i])",
          "new_text": null,
          "old_line_content": "            colDataAppendInt64(pTsOutput, pos, &tsList[i]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1954,
          "old_api": "IS_UNSIGNED_NUMERIC_TYPE",
          "new_api": null,
          "old_text": "IS_UNSIGNED_NUMERIC_TYPE(pOutput->type)",
          "new_text": null,
          "old_line_content": "  } else if (IS_UNSIGNED_NUMERIC_TYPE(pOutput->type)) {",
          "new_line_content": "      break;",
          "content_same": false
        },
        {
          "line": 6054,
          "old_api": "appendSelectivityValue",
          "new_api": null,
          "old_text": "appendSelectivityValue(pCtx, i, pos)",
          "new_text": null,
          "old_line_content": "            appendSelectivityValue(pCtx, i, pos);",
          "new_line_content": "      if (!pDerivInfo->valueSet) {  // initial value is not set yet",
          "content_same": false
        },
        {
          "line": 1968,
          "old_api": "ASSERT",
          "new_api": null,
          "old_text": "ASSERT(pCol->info.type == TSDB_DATA_TYPE_BINARY)",
          "new_text": null,
          "old_line_content": "  ASSERT(pCol->info.type == TSDB_DATA_TYPE_BINARY);",
          "new_line_content": "  pOutput->type = pInput->type;",
          "content_same": false
        },
        {
          "line": 1970,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SStddevRes* pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "new_line_content": "    pOutput->quadraticISum += pInput->quadraticISum;",
          "content_same": false
        },
        {
          "line": 6066,
          "old_api": "colDataIsNull_f",
          "new_api": null,
          "old_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "new_text": null,
          "old_line_content": "      if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "new_line_content": "          if (pTsOutput != NULL) {",
          "content_same": false
        },
        {
          "line": 1973,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pCol, i)",
          "new_text": null,
          "old_line_content": "    char*       data = colDataGetData(pCol, i);",
          "new_line_content": "    pOutput->quadraticUSum += pInput->quadraticUSum;",
          "content_same": false
        },
        {
          "line": 1974,
          "old_api": "varDataVal",
          "new_api": null,
          "old_text": "varDataVal(data)",
          "new_text": null,
          "old_line_content": "    SStddevRes* pInputInfo = (SStddevRes*)varDataVal(data);",
          "new_line_content": "    pOutput->usum += pInput->usum;",
          "content_same": false
        },
        {
          "line": 1975,
          "old_api": "stddevTransferInfo",
          "new_api": null,
          "old_text": "stddevTransferInfo(pInputInfo, pInfo)",
          "new_text": null,
          "old_line_content": "    stddevTransferInfo(pInputInfo, pInfo);",
          "new_line_content": "  } else {",
          "content_same": false
        },
        {
          "line": 1978,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SET_VAL(GET_RES_INFO(pCtx), 1, 1);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 4026,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SElapsedInfo* pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "new_line_content": "  pInfo->max = 0;",
          "content_same": false
        },
        {
          "line": 6080,
          "old_api": "isnan",
          "new_api": null,
          "old_text": "isnan(r)",
          "new_text": null,
          "old_line_content": "          if (isinf(r) || isnan(r)) {",
          "new_line_content": "      pDerivInfo->prevTs = tsList[i];",
          "content_same": false
        },
        {
          "line": 6081,
          "old_api": "colDataAppendNULL",
          "new_api": null,
          "old_text": "colDataAppendNULL(pOutput, pos)",
          "new_text": null,
          "old_line_content": "            colDataAppendNULL(pOutput, pos);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4035,
          "old_api": "GET_INT64_VAL",
          "new_api": null,
          "old_text": "GET_INT64_VAL(&pAgg->min)",
          "new_text": null,
          "old_line_content": "      pInfo->min = GET_INT64_VAL(&pAgg->min);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 4036,
          "old_api": "GET_INT64_VAL",
          "new_api": null,
          "old_text": "GET_INT64_VAL(&pAgg->max)",
          "new_text": null,
          "old_line_content": "      pInfo->max = GET_INT64_VAL(&pAgg->max);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1989,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SStddevRes* pStddevRes = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6083,
          "old_api": "colDataAppend",
          "new_api": null,
          "old_text": "colDataAppend(pOutput, pos, (const char*)&r, false)",
          "new_text": null,
          "old_line_content": "            colDataAppend(pOutput, pos, (const char*)&r, false);",
          "new_line_content": "    for (; i < pInput->numOfRows + pInput->startRowIndex; i += 1) {",
          "content_same": false
        },
        {
          "line": 4039,
          "old_api": "GET_INT64_VAL",
          "new_api": null,
          "old_text": "GET_INT64_VAL(&pAgg->max)",
          "new_text": null,
          "old_line_content": "        pInfo->max = GET_INT64_VAL(&pAgg->max);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6087,
          "old_api": "colDataAppendInt64",
          "new_api": null,
          "old_text": "colDataAppendInt64(pTsOutput, pos, &pDerivInfo->prevTs)",
          "new_text": null,
          "old_line_content": "            colDataAppendInt64(pTsOutput, pos, &pDerivInfo->prevTs);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4041,
          "old_api": "GET_INT64_VAL",
          "new_api": null,
          "old_text": "GET_INT64_VAL(&pAgg->min)",
          "new_text": null,
          "old_line_content": "        pInfo->min = GET_INT64_VAL(&pAgg->min);",
          "new_line_content": "  SInputColumnInfoData* pInput = &pCtx->input;",
          "content_same": false
        },
        {
          "line": 6092,
          "old_api": "appendSelectivityValue",
          "new_api": null,
          "old_text": "appendSelectivityValue(pCtx, i, pos)",
          "new_text": null,
          "old_line_content": "            appendSelectivityValue(pCtx, i, pos);",
          "new_line_content": "      if (!pDerivInfo->valueSet) {  // initial value is not set yet",
          "content_same": false
        },
        {
          "line": 1999,
          "old_api": "LIST_STDDEV_SUB_N",
          "new_api": null,
          "old_text": "LIST_STDDEV_SUB_N(pStddevRes->isum, int8_t)",
          "new_text": null,
          "old_line_content": "      LIST_STDDEV_SUB_N(pStddevRes->isum, int8_t);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2003,
          "old_api": "LIST_STDDEV_SUB_N",
          "new_api": null,
          "old_text": "LIST_STDDEV_SUB_N(pStddevRes->isum, int16_t)",
          "new_text": null,
          "old_line_content": "      LIST_STDDEV_SUB_N(pStddevRes->isum, int16_t);",
          "new_line_content": "  // Only the pre-computing information loaded and actual data does not loaded",
          "content_same": false
        },
        {
          "line": 2011,
          "old_api": "LIST_STDDEV_SUB_N",
          "new_api": null,
          "old_text": "LIST_STDDEV_SUB_N(pStddevRes->isum, int64_t)",
          "new_text": null,
          "old_line_content": "      LIST_STDDEV_SUB_N(pStddevRes->isum, int64_t);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4061,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pCol, 0)",
          "new_text": null,
          "old_line_content": "    TSKEY*  ptsList = (int64_t*)colDataGetData(pCol, 0);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2015,
          "old_api": "LIST_STDDEV_SUB_N",
          "new_api": null,
          "old_text": "LIST_STDDEV_SUB_N(pStddevRes->isum, uint8_t)",
          "new_text": null,
          "old_line_content": "      LIST_STDDEV_SUB_N(pStddevRes->isum, uint8_t);",
          "new_line_content": "  switch (type) {",
          "content_same": false
        },
        {
          "line": 6113,
          "old_api": "functionSetup",
          "new_api": null,
          "old_text": "functionSetup(pCtx, pResInfo)",
          "new_text": null,
          "old_line_content": "  if (!functionSetup(pCtx, pResInfo)) {",
          "new_line_content": "          numOfElems++;",
          "content_same": false
        },
        {
          "line": 2019,
          "old_api": "LIST_STDDEV_SUB_N",
          "new_api": null,
          "old_text": "LIST_STDDEV_SUB_N(pStddevRes->isum, uint16_t)",
          "new_text": null,
          "old_line_content": "      LIST_STDDEV_SUB_N(pStddevRes->isum, uint16_t);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6117,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": null,
          "old_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "new_text": null,
          "old_line_content": "  SRateInfo* pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "new_line_content": "      pDerivInfo->prevValue = v;",
          "content_same": false
        },
        {
          "line": 2023,
          "old_api": "LIST_STDDEV_SUB_N",
          "new_api": null,
          "old_text": "LIST_STDDEV_SUB_N(pStddevRes->isum, uint32_t)",
          "new_text": null,
          "old_line_content": "      LIST_STDDEV_SUB_N(pStddevRes->isum, uint32_t);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2027,
          "old_api": "LIST_STDDEV_SUB_N",
          "new_api": null,
          "old_text": "LIST_STDDEV_SUB_N(pStddevRes->isum, uint64_t)",
          "new_text": null,
          "old_line_content": "      LIST_STDDEV_SUB_N(pStddevRes->isum, uint64_t);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2031,
          "old_api": "LIST_STDDEV_SUB_N",
          "new_api": null,
          "old_text": "LIST_STDDEV_SUB_N(pStddevRes->dsum, float)",
          "new_text": null,
          "old_line_content": "      LIST_STDDEV_SUB_N(pStddevRes->dsum, float);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 6129,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6130,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": null,
          "old_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "new_text": null,
          "old_line_content": "  SRateInfo*           pRateInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "new_line_content": "bool irateFuncSetup(SqlFunctionCtx* pCtx, SResultRowEntryInfo* pResInfo) {",
          "content_same": false
        },
        {
          "line": 2035,
          "old_api": "LIST_STDDEV_SUB_N",
          "new_api": null,
          "old_text": "LIST_STDDEV_SUB_N(pStddevRes->dsum, double)",
          "new_text": null,
          "old_line_content": "      LIST_STDDEV_SUB_N(pStddevRes->dsum, double);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2043,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SET_VAL(GET_RES_INFO(pCtx), numOfElem, 1);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4093,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SET_VAL(GET_RES_INFO(pCtx), numOfElems, 1);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 6143,
          "old_api": "colDataIsNull_f",
          "new_api": null,
          "old_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "new_text": null,
          "old_line_content": "    if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "new_line_content": "  return true;",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 208,
      "total_additions": 739,
      "total_deletions": 737,
      "total_api_changes": 1684
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 18,
        "api_related_lines": 1684,
        "non_api_lines": 13,
        "non_api_line_numbers": [
          1569,
          1570,
          1571,
          1572,
          1573,
          1574,
          1577,
          1578,
          1579,
          1580,
          1581,
          1585,
          1558
        ]
      }
    },
    "api_calls_before": 1298,
    "api_calls_after": 1300,
    "diff_info": {
      "added_lines": 18,
      "removed_lines": 0,
      "total_diff_lines": 37
    }
  }
}
{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/TDengine/modified_file/459bed5f86fd60bc1d615d40fe04a3d08e7c6c1c",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/TDengine/modified_file/459bed5f86fd60bc1d615d40fe04a3d08e7c6c1c/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/TDengine/modified_file/459bed5f86fd60bc1d615d40fe04a3d08e7c6c1c/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/TDengine/modified_file/459bed5f86fd60bc1d615d40fe04a3d08e7c6c1c/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 3018,
          "old_api": "getRowPTs",
          "new_api": "colDataGetData",
          "old_text": "getRowPTs(pInput->pPTS, i)",
          "new_text": "colDataGetData(pInputCol, i)",
          "old_line_content": "    TSKEY cts = getRowPTs(pInput->pPTS, i);",
          "new_line_content": "    char* data = colDataGetData(pInputCol, i);",
          "content_same": false
        },
        {
          "line": 3038,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": "GET_RES_INFO",
          "old_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  SFirstLastRes*       pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "new_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 3073,
          "old_api": "getRowPTs",
          "new_api": "colDataGetData",
          "old_text": "getRowPTs(pInput->pPTS, i)",
          "new_text": "colDataGetData(pInputCol, i)",
          "old_line_content": "      TSKEY cts = getRowPTs(pInput->pPTS, i);",
          "new_line_content": "      char* data = colDataGetData(pInputCol, i);",
          "content_same": false
        },
        {
          "line": 3089,
          "old_api": "getRowPTs",
          "new_api": "colDataGetData",
          "old_text": "getRowPTs(pInput->pPTS, i)",
          "new_text": "colDataGetData(pInputCol, i)",
          "old_line_content": "      TSKEY cts = getRowPTs(pInput->pPTS, i);",
          "new_line_content": "      char* data = colDataGetData(pInputCol, i);",
          "content_same": false
        },
        {
          "line": 3141,
          "old_api": "firstlastSaveTupleData",
          "new_api": "memcpy",
          "old_text": "firstlastSaveTupleData(pCtx->pSrcBlock, rowIndex, pCtx, pOutput)",
          "new_text": "memcpy(pOutput->buf, pInput->buf, pOutput->bytes)",
          "old_line_content": "  firstlastSaveTupleData(pCtx->pSrcBlock, rowIndex, pCtx, pOutput);",
          "new_line_content": "  memcpy(pOutput->buf, pInput->buf, pOutput->bytes);",
          "content_same": false
        },
        {
          "line": 3158,
          "old_api": "varDataVal",
          "new_api": "colDataGetData",
          "old_text": "varDataVal(data)",
          "new_text": "colDataGetData(pCol, i)",
          "old_line_content": "    SFirstLastRes* pInputInfo = (SFirstLastRes*)varDataVal(data);",
          "new_line_content": "    char*          data = colDataGetData(pCol, i);",
          "content_same": false
        },
        {
          "line": 3159,
          "old_api": "firstLastTransferInfo",
          "new_api": "varDataVal",
          "old_text": "firstLastTransferInfo(pCtx, pInputInfo, pInfo, isFirstQuery, i)",
          "new_text": "varDataVal(data)",
          "old_line_content": "    firstLastTransferInfo(pCtx, pInputInfo, pInfo, isFirstQuery, i);",
          "new_line_content": "    SFirstLastRes* pInputInfo = (SFirstLastRes*)varDataVal(data);",
          "content_same": false
        },
        {
          "line": 3181,
          "old_api": "colDataAppend",
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": "colDataAppend(pCol, pBlock->info.rows, pRes->buf, pRes->isNull || pResInfo->isNullRes)",
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "  colDataAppend(pCol, pBlock->info.rows, pRes->buf, pRes->isNull || pResInfo->isNullRes);",
          "new_line_content": "  SFirstLastRes* pRes = GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 3191,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": "GET_RES_INFO",
          "old_text": "GET_ROWCELL_INTERBUF(pEntryInfo)",
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  SFirstLastRes*       pRes = GET_ROWCELL_INTERBUF(pEntryInfo);",
          "new_line_content": "  SResultRowEntryInfo* pEntryInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 3197,
          "old_api": "varDataVal",
          "new_api": "taosMemoryCalloc",
          "old_text": "varDataVal(res)",
          "new_text": "taosMemoryCalloc(resultBytes + VARSTR_HEADER_SIZE, sizeof(char))",
          "old_line_content": "  memcpy(varDataVal(res), pRes, resultBytes);",
          "new_line_content": "  char* res = taosMemoryCalloc(resultBytes + VARSTR_HEADER_SIZE, sizeof(char));",
          "content_same": false
        },
        {
          "line": 3205,
          "old_api": "setSelectivityValue",
          "new_api": "colDataAppend",
          "old_text": "setSelectivityValue(pCtx, pBlock, &pRes->pos, pBlock->info.rows)",
          "new_text": "colDataAppend(pCol, pBlock->info.rows, res, false)",
          "old_line_content": "  setSelectivityValue(pCtx, pBlock, &pRes->pos, pBlock->info.rows);",
          "new_line_content": "  colDataAppend(pCol, pBlock->info.rows, res, false);",
          "content_same": false
        },
        {
          "line": 3214,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": "GET_RES_INFO",
          "old_text": "GET_ROWCELL_INTERBUF(pDResInfo)",
          "new_text": "GET_RES_INFO(pDestCtx)",
          "old_line_content": "  SFirstLastRes*       pDBuf = GET_ROWCELL_INTERBUF(pDResInfo);",
          "new_line_content": "  SResultRowEntryInfo* pDResInfo = GET_RES_INFO(pDestCtx);",
          "content_same": false
        },
        {
          "line": 3218,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": "GET_RES_INFO",
          "old_text": "GET_ROWCELL_INTERBUF(pSResInfo)",
          "new_text": "GET_RES_INFO(pSourceCtx)",
          "old_line_content": "  SFirstLastRes*       pSBuf = GET_ROWCELL_INTERBUF(pSResInfo);",
          "new_line_content": "  SResultRowEntryInfo* pSResInfo = GET_RES_INFO(pSourceCtx);",
          "content_same": false
        },
        {
          "line": 3238,
          "old_api": "varDataTLen",
          "new_api": "IS_VAR_DATA_TYPE",
          "old_text": "varDataTLen(pData)",
          "new_text": "IS_VAR_DATA_TYPE(pInputCol->info.type)",
          "old_line_content": "      pInfo->bytes = varDataTLen(pData);",
          "new_line_content": "    if (IS_VAR_DATA_TYPE(pInputCol->info.type)) {",
          "content_same": false
        },
        {
          "line": 3254,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": "GET_RES_INFO",
          "old_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  SFirstLastRes*       pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "new_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 3273,
          "old_api": "getRowPTs",
          "new_api": "colDataGetData",
          "old_text": "getRowPTs(pInput->pPTS, i)",
          "new_text": "colDataGetData(pInputCol, i)",
          "old_line_content": "      TSKEY cts = getRowPTs(pInput->pPTS, i);",
          "new_line_content": "      char* data = colDataGetData(pInputCol, i);",
          "content_same": false
        },
        {
          "line": 3285,
          "old_api": "getRowPTs",
          "new_api": "colDataGetData",
          "old_text": "getRowPTs(pInput->pPTS, i)",
          "new_text": "colDataGetData(pInputCol, i)",
          "old_line_content": "      TSKEY cts = getRowPTs(pInput->pPTS, i);",
          "new_line_content": "      char* data = colDataGetData(pInputCol, i);",
          "content_same": false
        },
        {
          "line": 3421,
          "old_api": "colDataSetNull_f",
          "new_api": "isnan",
          "old_text": "colDataSetNull_f(pOutput->nullbitmap, pos)",
          "new_text": "isnan(delta)",
          "old_line_content": "        colDataSetNull_f(pOutput->nullbitmap, pos);",
          "new_line_content": "      if ((delta < 0 && pDiffInfo->ignoreNegative) || isinf(delta) || isnan(delta)) {  // check for overflow",
          "content_same": false
        },
        {
          "line": 3432,
          "old_api": "colDataSetNull_f",
          "new_api": "isnan",
          "old_text": "colDataSetNull_f(pOutput->nullbitmap, pos)",
          "new_text": "isnan(delta)",
          "old_line_content": "        colDataSetNull_f(pOutput->nullbitmap, pos);",
          "new_line_content": "      if ((delta < 0 && pDiffInfo->ignoreNegative) || isinf(delta) || isnan(delta)) {  // check for overflow",
          "content_same": false
        },
        {
          "line": 3446,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": "GET_RES_INFO",
          "old_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  SDiffInfo*           pDiffInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "new_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 3547,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": "GET_RES_INFO",
          "old_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  STopBotRes*          pRes = GET_ROWCELL_INTERBUF(pResInfo);",
          "new_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 3576,
          "old_api": "doAddIntoResult",
          "new_api": "colDataGetData",
          "old_text": "doAddIntoResult(pCtx, data, i, pCtx->pSrcBlock, pRes->type, pInput->uid, pResInfo, true)",
          "new_text": "colDataGetData(pCol, i)",
          "old_line_content": "    doAddIntoResult(pCtx, data, i, pCtx->pSrcBlock, pRes->type, pInput->uid, pResInfo, true);",
          "new_line_content": "    char* data = colDataGetData(pCol, i);",
          "content_same": false
        },
        {
          "line": 3604,
          "old_api": "doAddIntoResult",
          "new_api": "colDataGetData",
          "old_text": "doAddIntoResult(pCtx, data, i, pCtx->pSrcBlock, pRes->type, pInput->uid, pResInfo, false)",
          "new_text": "colDataGetData(pCol, i)",
          "old_line_content": "    doAddIntoResult(pCtx, data, i, pCtx->pSrcBlock, pRes->type, pInput->uid, pResInfo, false);",
          "new_line_content": "    char* data = colDataGetData(pCol, i);",
          "content_same": false
        },
        {
          "line": 3672,
          "old_api": "IS_UNSIGNED_NUMERIC_TYPE",
          "new_api": "IS_SIGNED_NUMERIC_TYPE",
          "old_text": "IS_UNSIGNED_NUMERIC_TYPE(type)",
          "new_text": "IS_SIGNED_NUMERIC_TYPE(type)",
          "old_line_content": "                        (IS_UNSIGNED_NUMERIC_TYPE(type) && val.u > pItems[0].v.u) ||",
          "new_line_content": "    if ((isTopQuery && ((IS_SIGNED_NUMERIC_TYPE(type) && val.i > pItems[0].v.i) ||",
          "content_same": false
        },
        {
          "line": 3673,
          "old_api": "IS_FLOAT_TYPE",
          "new_api": "IS_UNSIGNED_NUMERIC_TYPE",
          "old_text": "IS_FLOAT_TYPE(type)",
          "new_text": "IS_UNSIGNED_NUMERIC_TYPE(type)",
          "old_line_content": "                        (IS_FLOAT_TYPE(type) && val.d > pItems[0].v.d))) ||",
          "new_line_content": "                        (IS_UNSIGNED_NUMERIC_TYPE(type) && val.u > pItems[0].v.u) ||",
          "content_same": false
        },
        {
          "line": 3674,
          "old_api": "IS_SIGNED_NUMERIC_TYPE",
          "new_api": "IS_FLOAT_TYPE",
          "old_text": "IS_SIGNED_NUMERIC_TYPE(type)",
          "new_text": "IS_FLOAT_TYPE(type)",
          "old_line_content": "        (!isTopQuery && ((IS_SIGNED_NUMERIC_TYPE(type) && val.i < pItems[0].v.i) ||",
          "new_line_content": "                        (IS_FLOAT_TYPE(type) && val.d > pItems[0].v.d))) ||",
          "content_same": false
        },
        {
          "line": 3675,
          "old_api": "IS_UNSIGNED_NUMERIC_TYPE",
          "new_api": "IS_SIGNED_NUMERIC_TYPE",
          "old_text": "IS_UNSIGNED_NUMERIC_TYPE(type)",
          "new_text": "IS_SIGNED_NUMERIC_TYPE(type)",
          "old_line_content": "                         (IS_UNSIGNED_NUMERIC_TYPE(type) && val.u < pItems[0].v.u) ||",
          "new_line_content": "        (!isTopQuery && ((IS_SIGNED_NUMERIC_TYPE(type) && val.i < pItems[0].v.i) ||",
          "content_same": false
        },
        {
          "line": 3676,
          "old_api": "IS_FLOAT_TYPE",
          "new_api": "IS_UNSIGNED_NUMERIC_TYPE",
          "old_text": "IS_FLOAT_TYPE(type)",
          "new_text": "IS_UNSIGNED_NUMERIC_TYPE(type)",
          "old_line_content": "                         (IS_FLOAT_TYPE(type) && val.d < pItems[0].v.d)))) {",
          "new_line_content": "                         (IS_UNSIGNED_NUMERIC_TYPE(type) && val.u < pItems[0].v.u) ||",
          "content_same": false
        },
        {
          "line": 3714,
          "old_api": "colDataIsNull_s",
          "new_api": "taosArrayGet",
          "old_text": "colDataIsNull_s(pCol, rowIndex)",
          "new_text": "taosArrayGet(pSrcBlock->pDataBlock, srcSlotId)",
          "old_line_content": "    if ((nullList[i] = colDataIsNull_s(pCol, rowIndex)) == true) {",
          "new_line_content": "    SColumnInfoData* pCol = taosArrayGet(pSrcBlock->pDataBlock, srcSlotId);",
          "content_same": false
        },
        {
          "line": 3720,
          "old_api": "IS_VAR_DATA_TYPE",
          "new_api": "colDataGetData",
          "old_text": "IS_VAR_DATA_TYPE(pCol->info.type)",
          "new_text": "colDataGetData(pCol, rowIndex)",
          "old_line_content": "    if (IS_VAR_DATA_TYPE(pCol->info.type)) {",
          "new_line_content": "    char* p = colDataGetData(pCol, rowIndex);",
          "content_same": false
        },
        {
          "line": 3721,
          "old_api": "varDataTLen",
          "new_api": "IS_VAR_DATA_TYPE",
          "old_text": "varDataTLen(p)",
          "new_text": "IS_VAR_DATA_TYPE(pCol->info.type)",
          "old_line_content": "      memcpy(pStart + offset, p, (pCol->info.type == TSDB_DATA_TYPE_JSON) ? getJsonValueLen(p) : varDataTLen(p));",
          "new_line_content": "    if (IS_VAR_DATA_TYPE(pCol->info.type)) {",
          "content_same": false
        },
        {
          "line": 3743,
          "old_api": "getBufPageSize",
          "new_api": "getBufPage",
          "old_text": "getBufPageSize(pHandle->pBuf)",
          "new_text": "getBufPage(pHandle->pBuf, pHandle->currentPage)",
          "old_line_content": "      if (pPage->num + length > getBufPageSize(pHandle->pBuf)) {",
          "new_line_content": "      pPage = getBufPage(pHandle->pBuf, pHandle->currentPage);",
          "content_same": false
        },
        {
          "line": 3746,
          "old_api": "getNewBufPage",
          "new_api": "releaseBufPage",
          "old_text": "getNewBufPage(pHandle->pBuf, &pHandle->currentPage)",
          "new_text": "releaseBufPage(pHandle->pBuf, pPage)",
          "old_line_content": "        pPage = getNewBufPage(pHandle->pBuf, &pHandle->currentPage);",
          "new_line_content": "        releaseBufPage(pHandle->pBuf, pPage);",
          "content_same": false
        },
        {
          "line": 3756,
          "old_api": "releaseBufPage",
          "new_api": "setBufPageDirty",
          "old_text": "releaseBufPage(pHandle->pBuf, pPage)",
          "new_text": "setBufPageDirty(pPage, true)",
          "old_line_content": "    releaseBufPage(pHandle->pBuf, pPage);",
          "new_line_content": "    setBufPageDirty(pPage, true);",
          "content_same": false
        },
        {
          "line": 3760,
          "old_api": "ASSERT",
          "new_api": "streamStateFuncPut",
          "old_text": "ASSERT(0)",
          "new_text": "streamStateFuncPut(pHandle->pState, pKey, pBuf, length)",
          "old_line_content": "      ASSERT(0);",
          "new_line_content": "    if (streamStateFuncPut(pHandle->pState, pKey, pBuf, length) < 0) {",
          "content_same": false
        },
        {
          "line": 3781,
          "old_api": "doSaveTupleData",
          "new_api": "serializeTupleData",
          "old_text": "doSaveTupleData(&pCtx->saveHandle, buf, pCtx->subsidiaries.rowLen, pKey)",
          "new_text": "serializeTupleData(pSrcBlock, rowIndex, &pCtx->subsidiaries, pCtx->subsidiaries.buf)",
          "old_line_content": "  return doSaveTupleData(&pCtx->saveHandle, buf, pCtx->subsidiaries.rowLen, pKey);",
          "new_line_content": "  char* buf = serializeTupleData(pSrcBlock, rowIndex, &pCtx->subsidiaries, pCtx->subsidiaries.buf);",
          "content_same": false
        },
        {
          "line": 3787,
          "old_api": "memcpy",
          "new_api": "getBufPage",
          "old_text": "memcpy(pPage->data + pPos->offset, pBuf, length)",
          "new_text": "getBufPage(pHandle->pBuf, pPos->pageId)",
          "old_line_content": "    memcpy(pPage->data + pPos->offset, pBuf, length);",
          "new_line_content": "    SFilePage* pPage = getBufPage(pHandle->pBuf, pPos->pageId);",
          "content_same": false
        },
        {
          "line": 3788,
          "old_api": "setBufPageDirty",
          "new_api": "memcpy",
          "old_text": "setBufPageDirty(pPage, true)",
          "new_text": "memcpy(pPage->data + pPos->offset, pBuf, length)",
          "old_line_content": "    setBufPageDirty(pPage, true);",
          "new_line_content": "    memcpy(pPage->data + pPos->offset, pBuf, length);",
          "content_same": false
        },
        {
          "line": 3789,
          "old_api": "releaseBufPage",
          "new_api": "setBufPageDirty",
          "old_text": "releaseBufPage(pHandle->pBuf, pPage)",
          "new_text": "setBufPageDirty(pPage, true)",
          "old_line_content": "    releaseBufPage(pHandle->pBuf, pPage);",
          "new_line_content": "    setBufPageDirty(pPage, true);",
          "content_same": false
        },
        {
          "line": 3799,
          "old_api": "doUpdateTupleData",
          "new_api": "serializeTupleData",
          "old_text": "doUpdateTupleData(&pCtx->saveHandle, buf, pCtx->subsidiaries.rowLen, pPos)",
          "new_text": "serializeTupleData(pSrcBlock, rowIndex, &pCtx->subsidiaries, pCtx->subsidiaries.buf)",
          "old_line_content": "  doUpdateTupleData(&pCtx->saveHandle, buf, pCtx->subsidiaries.rowLen, pPos);",
          "new_line_content": "  char* buf = serializeTupleData(pSrcBlock, rowIndex, &pCtx->subsidiaries, pCtx->subsidiaries.buf);",
          "content_same": false
        },
        {
          "line": 3823,
          "old_api": "getTopBotOutputInfo",
          "new_api": "GET_RES_INFO",
          "old_text": "getTopBotOutputInfo(pCtx)",
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  STopBotRes*          pRes = getTopBotOutputInfo(pCtx);",
          "new_line_content": "  SResultRowEntryInfo* pEntryInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 3834,
          "old_api": "setSelectivityValue",
          "new_api": "colDataAppendNULL",
          "old_text": "setSelectivityValue(pCtx, pBlock, &pRes->nullTuplePos, currentRow)",
          "new_text": "colDataAppendNULL(pCol, currentRow)",
          "old_line_content": "    setSelectivityValue(pCtx, pBlock, &pRes->nullTuplePos, currentRow);",
          "new_line_content": "    colDataAppendNULL(pCol, currentRow);",
          "content_same": false
        },
        {
          "line": 3858,
          "old_api": "getTopBotOutputInfo",
          "new_api": "GET_RES_INFO",
          "old_text": "getTopBotOutputInfo(pCtx)",
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  STopBotRes*          pRes = getTopBotOutputInfo(pCtx);",
          "new_line_content": "  SResultRowEntryInfo* pEntryInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 3874,
          "old_api": "IS_UNSIGNED_NUMERIC_TYPE",
          "new_api": "IS_SIGNED_NUMERIC_TYPE",
          "old_text": "IS_UNSIGNED_NUMERIC_TYPE(type)",
          "new_text": "IS_SIGNED_NUMERIC_TYPE(type)",
          "old_line_content": "                        (IS_UNSIGNED_NUMERIC_TYPE(type) && pSourceItem->v.u > pItems[0].v.u) ||",
          "new_line_content": "    if ((isTopQuery && ((IS_SIGNED_NUMERIC_TYPE(type) && pSourceItem->v.i > pItems[0].v.i) ||",
          "content_same": false
        },
        {
          "line": 3875,
          "old_api": "IS_FLOAT_TYPE",
          "new_api": "IS_UNSIGNED_NUMERIC_TYPE",
          "old_text": "IS_FLOAT_TYPE(type)",
          "new_text": "IS_UNSIGNED_NUMERIC_TYPE(type)",
          "old_line_content": "                        (IS_FLOAT_TYPE(type) && pSourceItem->v.d > pItems[0].v.d))) ||",
          "new_line_content": "                        (IS_UNSIGNED_NUMERIC_TYPE(type) && pSourceItem->v.u > pItems[0].v.u) ||",
          "content_same": false
        },
        {
          "line": 3876,
          "old_api": "IS_SIGNED_NUMERIC_TYPE",
          "new_api": "IS_FLOAT_TYPE",
          "old_text": "IS_SIGNED_NUMERIC_TYPE(type)",
          "new_text": "IS_FLOAT_TYPE(type)",
          "old_line_content": "        (!isTopQuery && ((IS_SIGNED_NUMERIC_TYPE(type) && pSourceItem->v.i < pItems[0].v.i) ||",
          "new_line_content": "                        (IS_FLOAT_TYPE(type) && pSourceItem->v.d > pItems[0].v.d))) ||",
          "content_same": false
        },
        {
          "line": 3877,
          "old_api": "IS_UNSIGNED_NUMERIC_TYPE",
          "new_api": "IS_SIGNED_NUMERIC_TYPE",
          "old_text": "IS_UNSIGNED_NUMERIC_TYPE(type)",
          "new_text": "IS_SIGNED_NUMERIC_TYPE(type)",
          "old_line_content": "                         (IS_UNSIGNED_NUMERIC_TYPE(type) && pSourceItem->v.u < pItems[0].v.u) ||",
          "new_line_content": "        (!isTopQuery && ((IS_SIGNED_NUMERIC_TYPE(type) && pSourceItem->v.i < pItems[0].v.i) ||",
          "content_same": false
        },
        {
          "line": 3878,
          "old_api": "IS_FLOAT_TYPE",
          "new_api": "IS_UNSIGNED_NUMERIC_TYPE",
          "old_text": "IS_FLOAT_TYPE(type)",
          "new_text": "IS_UNSIGNED_NUMERIC_TYPE(type)",
          "old_line_content": "                         (IS_FLOAT_TYPE(type) && pSourceItem->v.d < pItems[0].v.d)))) {",
          "new_line_content": "                         (IS_UNSIGNED_NUMERIC_TYPE(type) && pSourceItem->v.u < pItems[0].v.u) ||",
          "content_same": false
        },
        {
          "line": 3886,
          "old_api": "taosheapadjust",
          "new_api": "replaceTupleData",
          "old_text": "taosheapadjust((void*)pItems, sizeof(STopBotResItem), 0, pEntryInfo->numOfRes - 1, (const void*)&type,\n                     topBotResComparFn, NULL, !isTopQuery)",
          "new_text": "replaceTupleData(&pItem->tuplePos, &pSourceItem->tuplePos)",
          "old_line_content": "      taosheapadjust((void*)pItems, sizeof(STopBotResItem), 0, pEntryInfo->numOfRes - 1, (const void*)&type,",
          "new_line_content": "      replaceTupleData(&pItem->tuplePos, &pSourceItem->tuplePos);",
          "content_same": false
        },
        {
          "line": 3894,
          "old_api": "getTopBotOutputInfo",
          "new_api": "GET_RES_INFO",
          "old_text": "getTopBotOutputInfo(pSourceCtx)",
          "new_text": "GET_RES_INFO(pSourceCtx)",
          "old_line_content": "  STopBotRes*          pSBuf = getTopBotOutputInfo(pSourceCtx);",
          "new_line_content": "  SResultRowEntryInfo* pSResInfo = GET_RES_INFO(pSourceCtx);",
          "content_same": false
        },
        {
          "line": 3904,
          "old_api": "getTopBotOutputInfo",
          "new_api": "GET_RES_INFO",
          "old_text": "getTopBotOutputInfo(pSourceCtx)",
          "new_text": "GET_RES_INFO(pSourceCtx)",
          "old_line_content": "  STopBotRes*          pSBuf = getTopBotOutputInfo(pSourceCtx);",
          "new_line_content": "  SResultRowEntryInfo* pSResInfo = GET_RES_INFO(pSourceCtx);",
          "content_same": false
        },
        {
          "line": 3925,
          "old_api": "SET_DOUBLE_VAL",
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": "SET_DOUBLE_VAL(&pInfo->min, DBL_MAX)",
          "new_text": "GET_ROWCELL_INTERBUF(pResultInfo)",
          "old_line_content": "  SET_DOUBLE_VAL(&pInfo->min, DBL_MAX);",
          "new_line_content": "  SSpreadInfo* pInfo = GET_ROWCELL_INTERBUF(pResultInfo);",
          "content_same": false
        },
        {
          "line": 3948,
          "old_api": "GET_INT64_VAL",
          "new_api": "IS_SIGNED_NUMERIC_TYPE",
          "old_text": "GET_INT64_VAL(&pAgg->min)",
          "new_text": "IS_SIGNED_NUMERIC_TYPE(type)",
          "old_line_content": "      tmin = (double)GET_INT64_VAL(&pAgg->min);",
          "new_line_content": "    if (IS_SIGNED_NUMERIC_TYPE(type)) {",
          "content_same": false
        },
        {
          "line": 3950,
          "old_api": "IS_FLOAT_TYPE",
          "new_api": "GET_INT64_VAL",
          "old_text": "IS_FLOAT_TYPE(type)",
          "new_text": "GET_INT64_VAL(&pAgg->max)",
          "old_line_content": "    } else if (IS_FLOAT_TYPE(type)) {",
          "new_line_content": "      tmax = (double)GET_INT64_VAL(&pAgg->max);",
          "content_same": false
        },
        {
          "line": 3951,
          "old_api": "GET_DOUBLE_VAL",
          "new_api": "IS_FLOAT_TYPE",
          "old_text": "GET_DOUBLE_VAL(&pAgg->min)",
          "new_text": "IS_FLOAT_TYPE(type)",
          "old_line_content": "      tmin = GET_DOUBLE_VAL(&pAgg->min);",
          "new_line_content": "    } else if (IS_FLOAT_TYPE(type)) {",
          "content_same": false
        },
        {
          "line": 3953,
          "old_api": "IS_UNSIGNED_NUMERIC_TYPE",
          "new_api": "GET_DOUBLE_VAL",
          "old_text": "IS_UNSIGNED_NUMERIC_TYPE(type)",
          "new_text": "GET_DOUBLE_VAL(&pAgg->max)",
          "old_line_content": "    } else if (IS_UNSIGNED_NUMERIC_TYPE(type)) {",
          "new_line_content": "      tmax = GET_DOUBLE_VAL(&pAgg->max);",
          "content_same": false
        },
        {
          "line": 3954,
          "old_api": "GET_UINT64_VAL",
          "new_api": "IS_UNSIGNED_NUMERIC_TYPE",
          "old_text": "GET_UINT64_VAL(&pAgg->min)",
          "new_text": "IS_UNSIGNED_NUMERIC_TYPE(type)",
          "old_line_content": "      tmin = (double)GET_UINT64_VAL(&pAgg->min);",
          "new_line_content": "    } else if (IS_UNSIGNED_NUMERIC_TYPE(type)) {",
          "content_same": false
        },
        {
          "line": 3959,
          "old_api": "SET_DOUBLE_VAL",
          "new_api": "GET_DOUBLE_VAL",
          "old_text": "SET_DOUBLE_VAL(&pInfo->min, tmin)",
          "new_text": "GET_DOUBLE_VAL(&pInfo->min)",
          "old_line_content": "      SET_DOUBLE_VAL(&pInfo->min, tmin);",
          "new_line_content": "    if (GET_DOUBLE_VAL(&pInfo->min) > tmin) {",
          "content_same": false
        },
        {
          "line": 3963,
          "old_api": "SET_DOUBLE_VAL",
          "new_api": "GET_DOUBLE_VAL",
          "old_text": "SET_DOUBLE_VAL(&pInfo->max, tmax)",
          "new_text": "GET_DOUBLE_VAL(&pInfo->max)",
          "old_line_content": "      SET_DOUBLE_VAL(&pInfo->max, tmax);",
          "new_line_content": "    if (GET_DOUBLE_VAL(&pInfo->max) < tmax) {",
          "content_same": false
        },
        {
          "line": 3981,
          "old_api": "SET_DOUBLE_VAL",
          "new_api": "GET_DOUBLE_VAL",
          "old_text": "SET_DOUBLE_VAL(&pInfo->min, v)",
          "new_text": "GET_DOUBLE_VAL(&pInfo->min)",
          "old_line_content": "        SET_DOUBLE_VAL(&pInfo->min, v);",
          "new_line_content": "      if (v < GET_DOUBLE_VAL(&pInfo->min)) {",
          "content_same": false
        },
        {
          "line": 3985,
          "old_api": "SET_DOUBLE_VAL",
          "new_api": "GET_DOUBLE_VAL",
          "old_text": "SET_DOUBLE_VAL(&pInfo->max, v)",
          "new_text": "GET_DOUBLE_VAL(&pInfo->max)",
          "old_line_content": "        SET_DOUBLE_VAL(&pInfo->max, v);",
          "new_line_content": "      if (v > GET_DOUBLE_VAL(&pInfo->max)) {",
          "content_same": false
        },
        {
          "line": 4023,
          "old_api": "varDataVal",
          "new_api": "colDataGetData",
          "old_text": "varDataVal(data)",
          "new_text": "colDataGetData(pCol, i)",
          "old_line_content": "    SSpreadInfo* pInputInfo = (SSpreadInfo*)varDataVal(data);",
          "new_line_content": "    char*        data = colDataGetData(pCol, i);",
          "content_same": false
        },
        {
          "line": 4049,
          "old_api": "getSpreadInfoSize",
          "new_api": "GET_RES_INFO",
          "old_text": "getSpreadInfoSize()",
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  int32_t              resultBytes = getSpreadInfoSize();",
          "new_line_content": "  SSpreadInfo*         pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "content_same": false
        },
        {
          "line": 4050,
          "old_api": "taosMemoryCalloc",
          "new_api": "getSpreadInfoSize",
          "old_text": "taosMemoryCalloc(resultBytes + VARSTR_HEADER_SIZE, sizeof(char))",
          "new_text": "getSpreadInfoSize()",
          "old_line_content": "  char*                res = taosMemoryCalloc(resultBytes + VARSTR_HEADER_SIZE, sizeof(char));",
          "new_line_content": "  int32_t              resultBytes = getSpreadInfoSize();",
          "content_same": false
        },
        {
          "line": 4053,
          "old_api": "varDataSetLen",
          "new_api": "varDataVal",
          "old_text": "varDataSetLen(res, resultBytes)",
          "new_text": "varDataVal(res)",
          "old_line_content": "  varDataSetLen(res, resultBytes);",
          "new_line_content": "  memcpy(varDataVal(res), pInfo, resultBytes);",
          "content_same": false
        },
        {
          "line": 4066,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": "GET_RES_INFO",
          "old_text": "GET_ROWCELL_INTERBUF(pDResInfo)",
          "new_text": "GET_RES_INFO(pDestCtx)",
          "old_line_content": "  SSpreadInfo*         pDBuf = GET_ROWCELL_INTERBUF(pDResInfo);",
          "new_line_content": "  SResultRowEntryInfo* pDResInfo = GET_RES_INFO(pDestCtx);",
          "content_same": false
        },
        {
          "line": 4069,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": "GET_RES_INFO",
          "old_text": "GET_ROWCELL_INTERBUF(pSResInfo)",
          "new_text": "GET_RES_INFO(pSourceCtx)",
          "old_line_content": "  SSpreadInfo*         pSBuf = GET_ROWCELL_INTERBUF(pSResInfo);",
          "new_line_content": "  SResultRowEntryInfo* pSResInfo = GET_RES_INFO(pSourceCtx);",
          "content_same": false
        },
        {
          "line": 4070,
          "old_api": "spreadTransferInfo",
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": "spreadTransferInfo(pSBuf, pDBuf)",
          "new_text": "GET_ROWCELL_INTERBUF(pSResInfo)",
          "old_line_content": "  spreadTransferInfo(pSBuf, pDBuf);",
          "new_line_content": "  SSpreadInfo*         pSBuf = GET_ROWCELL_INTERBUF(pSResInfo);",
          "content_same": false
        },
        {
          "line": 4071,
          "old_api": "TMAX",
          "new_api": "spreadTransferInfo",
          "old_text": "TMAX(pDResInfo->numOfRes, pSResInfo->numOfRes)",
          "new_text": "spreadTransferInfo(pSBuf, pDBuf)",
          "old_line_content": "  pDResInfo->numOfRes = TMAX(pDResInfo->numOfRes, pSResInfo->numOfRes);",
          "new_line_content": "  spreadTransferInfo(pSBuf, pDBuf);",
          "content_same": false
        },
        {
          "line": 4203,
          "old_api": "varDataVal",
          "new_api": "colDataGetData",
          "old_text": "varDataVal(data)",
          "new_text": "colDataGetData(pCol, i)",
          "old_line_content": "    SElapsedInfo* pInputInfo = (SElapsedInfo*)varDataVal(data);",
          "new_line_content": "    char*         data = colDataGetData(pCol, i);",
          "content_same": false
        },
        {
          "line": 4204,
          "old_api": "elapsedTransferInfo",
          "new_api": "varDataVal",
          "old_text": "elapsedTransferInfo(pInputInfo, pInfo)",
          "new_text": "varDataVal(data)",
          "old_line_content": "    elapsedTransferInfo(pInputInfo, pInfo);",
          "new_line_content": "    SElapsedInfo* pInputInfo = (SElapsedInfo*)varDataVal(data);",
          "content_same": false
        },
        {
          "line": 4222,
          "old_api": "getElapsedInfoSize",
          "new_api": "GET_RES_INFO",
          "old_text": "getElapsedInfoSize()",
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  int32_t              resultBytes = getElapsedInfoSize();",
          "new_line_content": "  SElapsedInfo*        pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "content_same": false
        },
        {
          "line": 4223,
          "old_api": "taosMemoryCalloc",
          "new_api": "getElapsedInfoSize",
          "old_text": "taosMemoryCalloc(resultBytes + VARSTR_HEADER_SIZE, sizeof(char))",
          "new_text": "getElapsedInfoSize()",
          "old_line_content": "  char*                res = taosMemoryCalloc(resultBytes + VARSTR_HEADER_SIZE, sizeof(char));",
          "new_line_content": "  int32_t              resultBytes = getElapsedInfoSize();",
          "content_same": false
        },
        {
          "line": 4226,
          "old_api": "varDataSetLen",
          "new_api": "varDataVal",
          "old_text": "varDataSetLen(res, resultBytes)",
          "new_text": "varDataVal(res)",
          "old_line_content": "  varDataSetLen(res, resultBytes);",
          "new_line_content": "  memcpy(varDataVal(res), pInfo, resultBytes);",
          "content_same": false
        },
        {
          "line": 4239,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": "GET_RES_INFO",
          "old_text": "GET_ROWCELL_INTERBUF(pDResInfo)",
          "new_text": "GET_RES_INFO(pDestCtx)",
          "old_line_content": "  SElapsedInfo*        pDBuf = GET_ROWCELL_INTERBUF(pDResInfo);",
          "new_line_content": "  SResultRowEntryInfo* pDResInfo = GET_RES_INFO(pDestCtx);",
          "content_same": false
        },
        {
          "line": 4242,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": "GET_RES_INFO",
          "old_text": "GET_ROWCELL_INTERBUF(pSResInfo)",
          "new_text": "GET_RES_INFO(pSourceCtx)",
          "old_line_content": "  SElapsedInfo*        pSBuf = GET_ROWCELL_INTERBUF(pSResInfo);",
          "new_line_content": "  SResultRowEntryInfo* pSResInfo = GET_RES_INFO(pSourceCtx);",
          "content_same": false
        },
        {
          "line": 4245,
          "old_api": "TMAX",
          "new_api": "elapsedTransferInfo",
          "old_text": "TMAX(pDResInfo->numOfRes, pSResInfo->numOfRes)",
          "new_text": "elapsedTransferInfo(pSBuf, pDBuf)",
          "old_line_content": "  pDResInfo->numOfRes = TMAX(pDResInfo->numOfRes, pSResInfo->numOfRes);",
          "new_line_content": "  elapsedTransferInfo(pSBuf, pDBuf);",
          "content_same": false
        },
        {
          "line": 4279,
          "old_api": "cJSON_GetArraySize",
          "new_api": "cJSON_IsObject",
          "old_text": "cJSON_GetArraySize(binDesc)",
          "new_text": "cJSON_IsObject(binDesc)",
          "old_line_content": "    int32_t numOfParams = cJSON_GetArraySize(binDesc);",
          "new_line_content": "  if (cJSON_IsObject(binDesc)) { /* linaer/log bins */",
          "content_same": false
        },
        {
          "line": 4314,
          "old_api": "cJSON_IsNumber",
          "new_api": "taosMemoryCalloc",
          "old_text": "cJSON_IsNumber(width)",
          "new_text": "taosMemoryCalloc(numOfBins, sizeof(double))",
          "old_line_content": "    if (cJSON_IsNumber(width) && factor == NULL && binType == LINEAR_BIN) {",
          "new_line_content": "    intervals = taosMemoryCalloc(numOfBins, sizeof(double));",
          "content_same": false
        },
        {
          "line": 4323,
          "old_api": "taosMemoryFree",
          "new_api": "isinf",
          "old_text": "taosMemoryFree(intervals)",
          "new_text": "isinf(intervals[startIndex])",
          "old_line_content": "          taosMemoryFree(intervals);",
          "new_line_content": "        if (isinf(intervals[startIndex])) {",
          "content_same": false
        },
        {
          "line": 4340,
          "old_api": "isinf",
          "new_api": "pow",
          "old_text": "isinf(intervals[startIndex])",
          "new_text": "pow(factor->valuedouble, i * 1.0)",
          "old_line_content": "        if (isinf(intervals[startIndex])) {",
          "new_line_content": "        intervals[startIndex] = start->valuedouble * pow(factor->valuedouble, i * 1.0);",
          "content_same": false
        },
        {
          "line": 4341,
          "old_api": "taosMemoryFree",
          "new_api": "isinf",
          "old_text": "taosMemoryFree(intervals)",
          "new_text": "isinf(intervals[startIndex])",
          "old_line_content": "          taosMemoryFree(intervals);",
          "new_line_content": "        if (isinf(intervals[startIndex])) {",
          "content_same": false
        },
        {
          "line": 4365,
          "old_api": "taosMemoryCalloc",
          "new_api": "cJSON_GetArraySize",
          "old_text": "taosMemoryCalloc(numOfBins, sizeof(double))",
          "new_text": "cJSON_GetArraySize(binDesc)",
          "old_line_content": "    intervals = taosMemoryCalloc(numOfBins, sizeof(double));",
          "new_line_content": "    numOfBins = cJSON_GetArraySize(binDesc);",
          "content_same": false
        },
        {
          "line": 4375,
          "old_api": "taosMemoryFree",
          "new_api": "cJSON_IsNumber",
          "old_text": "taosMemoryFree(intervals)",
          "new_text": "cJSON_IsNumber(bin)",
          "old_line_content": "        taosMemoryFree(intervals);",
          "new_line_content": "      if (!cJSON_IsNumber(bin)) {",
          "content_same": false
        },
        {
          "line": 4493,
          "old_api": "varDataVal",
          "new_api": "colDataGetData",
          "old_text": "varDataVal(data)",
          "new_text": "colDataGetData(pCol, i)",
          "old_line_content": "    SHistoFuncInfo* pInputInfo = (SHistoFuncInfo*)varDataVal(data);",
          "new_line_content": "    char*           data = colDataGetData(pCol, i);",
          "content_same": false
        },
        {
          "line": 4494,
          "old_api": "histogramTransferInfo",
          "new_api": "varDataVal",
          "old_text": "histogramTransferInfo(pInputInfo, pInfo)",
          "new_text": "varDataVal(data)",
          "old_line_content": "    histogramTransferInfo(pInputInfo, pInfo);",
          "new_line_content": "    SHistoFuncInfo* pInputInfo = (SHistoFuncInfo*)varDataVal(data);",
          "content_same": false
        },
        {
          "line": 4530,
          "old_api": "colDataAppend",
          "new_api": "varDataSetLen",
          "old_text": "colDataAppend(pCol, currentRow, buf, false)",
          "new_text": "varDataSetLen(buf, len)",
          "old_line_content": "    colDataAppend(pCol, currentRow, buf, false);",
          "new_line_content": "    varDataSetLen(buf, len);",
          "content_same": false
        },
        {
          "line": 4540,
          "old_api": "getHistogramInfoSize",
          "new_api": "GET_RES_INFO",
          "old_text": "getHistogramInfoSize()",
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  int32_t              resultBytes = getHistogramInfoSize();",
          "new_line_content": "  SHistoFuncInfo*      pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "content_same": false
        },
        {
          "line": 4541,
          "old_api": "taosMemoryCalloc",
          "new_api": "getHistogramInfoSize",
          "old_text": "taosMemoryCalloc(resultBytes + VARSTR_HEADER_SIZE, sizeof(char))",
          "new_text": "getHistogramInfoSize()",
          "old_line_content": "  char*                res = taosMemoryCalloc(resultBytes + VARSTR_HEADER_SIZE, sizeof(char));",
          "new_line_content": "  int32_t              resultBytes = getHistogramInfoSize();",
          "content_same": false
        },
        {
          "line": 4544,
          "old_api": "varDataSetLen",
          "new_api": "varDataVal",
          "old_text": "varDataSetLen(res, resultBytes)",
          "new_text": "varDataVal(res)",
          "old_line_content": "  varDataSetLen(res, resultBytes);",
          "new_line_content": "  memcpy(varDataVal(res), pInfo, resultBytes);",
          "content_same": false
        },
        {
          "line": 4557,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": "GET_RES_INFO",
          "old_text": "GET_ROWCELL_INTERBUF(pDResInfo)",
          "new_text": "GET_RES_INFO(pDestCtx)",
          "old_line_content": "  SHistoFuncInfo*      pDBuf = GET_ROWCELL_INTERBUF(pDResInfo);",
          "new_line_content": "  SResultRowEntryInfo* pDResInfo = GET_RES_INFO(pDestCtx);",
          "content_same": false
        },
        {
          "line": 4560,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": "GET_RES_INFO",
          "old_text": "GET_ROWCELL_INTERBUF(pSResInfo)",
          "new_text": "GET_RES_INFO(pSourceCtx)",
          "old_line_content": "  SHistoFuncInfo*      pSBuf = GET_ROWCELL_INTERBUF(pSResInfo);",
          "new_line_content": "  SResultRowEntryInfo* pSResInfo = GET_RES_INFO(pSourceCtx);",
          "content_same": false
        },
        {
          "line": 4563,
          "old_api": "TMAX",
          "new_api": "histogramTransferInfo",
          "old_text": "TMAX(pDResInfo->numOfRes, pSResInfo->numOfRes)",
          "new_text": "histogramTransferInfo(pSBuf, pDBuf)",
          "old_line_content": "  pDResInfo->numOfRes = TMAX(pDResInfo->numOfRes, pSResInfo->numOfRes);",
          "new_line_content": "  histogramTransferInfo(pSBuf, pDBuf);",
          "content_same": false
        },
        {
          "line": 4653,
          "old_api": "llroundl",
          "new_api": "hllSigma",
          "old_text": "llroundl(HLL_ALPHA_INF * m * m / z)",
          "new_text": "hllSigma(buckethisto[0] / (double)m)",
          "old_line_content": "  double E = (double)llroundl(HLL_ALPHA_INF * m * m / z);",
          "new_line_content": "  z += m * hllSigma(buckethisto[0] / (double)m);",
          "content_same": false
        },
        {
          "line": 4679,
          "old_api": "IS_VAR_DATA_TYPE",
          "new_api": "colDataGetData",
          "old_text": "IS_VAR_DATA_TYPE(type)",
          "new_text": "colDataGetData(pCol, i)",
          "old_line_content": "    if (IS_VAR_DATA_TYPE(type)) {",
          "new_line_content": "    char* data = colDataGetData(pCol, i);",
          "content_same": false
        },
        {
          "line": 4680,
          "old_api": "varDataLen",
          "new_api": "IS_VAR_DATA_TYPE",
          "old_text": "varDataLen(data)",
          "new_text": "IS_VAR_DATA_TYPE(type)",
          "old_line_content": "      bytes = varDataLen(data);",
          "new_line_content": "    if (IS_VAR_DATA_TYPE(type)) {",
          "content_same": false
        },
        {
          "line": 4681,
          "old_api": "varDataVal",
          "new_api": "varDataLen",
          "old_text": "varDataVal(data)",
          "new_text": "varDataLen(data)",
          "old_line_content": "      data = varDataVal(data);",
          "new_line_content": "      bytes = varDataLen(data);",
          "content_same": false
        },
        {
          "line": 4723,
          "old_api": "varDataVal",
          "new_api": "colDataGetData",
          "old_text": "varDataVal(data)",
          "new_text": "colDataGetData(pCol, i)",
          "old_line_content": "    SHLLInfo* pInputInfo = (SHLLInfo*)varDataVal(data);",
          "new_line_content": "    char*     data = colDataGetData(pCol, i);",
          "content_same": false
        },
        {
          "line": 4724,
          "old_api": "hllTransferInfo",
          "new_api": "varDataVal",
          "old_text": "hllTransferInfo(pInputInfo, pInfo)",
          "new_text": "varDataVal(data)",
          "old_line_content": "    hllTransferInfo(pInputInfo, pInfo);",
          "new_line_content": "    SHLLInfo* pInputInfo = (SHLLInfo*)varDataVal(data);",
          "content_same": false
        },
        {
          "line": 4740,
          "old_api": "hllCountCnt",
          "new_api": "GET_RES_INFO",
          "old_text": "hllCountCnt(pHllInfo->buckets)",
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  pHllInfo->result = hllCountCnt(pHllInfo->buckets);",
          "new_line_content": "  SHLLInfo* pHllInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "content_same": false
        },
        {
          "line": 4751,
          "old_api": "getHLLInfoSize",
          "new_api": "GET_RES_INFO",
          "old_text": "getHLLInfoSize()",
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  int32_t              resultBytes = getHLLInfoSize();",
          "new_line_content": "  SHLLInfo*            pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "content_same": false
        },
        {
          "line": 4752,
          "old_api": "taosMemoryCalloc",
          "new_api": "getHLLInfoSize",
          "old_text": "taosMemoryCalloc(resultBytes + VARSTR_HEADER_SIZE, sizeof(char))",
          "new_text": "getHLLInfoSize()",
          "old_line_content": "  char*                res = taosMemoryCalloc(resultBytes + VARSTR_HEADER_SIZE, sizeof(char));",
          "new_line_content": "  int32_t              resultBytes = getHLLInfoSize();",
          "content_same": false
        },
        {
          "line": 4755,
          "old_api": "varDataSetLen",
          "new_api": "varDataVal",
          "old_text": "varDataSetLen(res, resultBytes)",
          "new_text": "varDataVal(res)",
          "old_line_content": "  varDataSetLen(res, resultBytes);",
          "new_line_content": "  memcpy(varDataVal(res), pInfo, resultBytes);",
          "content_same": false
        },
        {
          "line": 4768,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": "GET_RES_INFO",
          "old_text": "GET_ROWCELL_INTERBUF(pDResInfo)",
          "new_text": "GET_RES_INFO(pDestCtx)",
          "old_line_content": "  SHLLInfo*            pDBuf = GET_ROWCELL_INTERBUF(pDResInfo);",
          "new_line_content": "  SResultRowEntryInfo* pDResInfo = GET_RES_INFO(pDestCtx);",
          "content_same": false
        },
        {
          "line": 4771,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": "GET_RES_INFO",
          "old_text": "GET_ROWCELL_INTERBUF(pSResInfo)",
          "new_text": "GET_RES_INFO(pSourceCtx)",
          "old_line_content": "  SHLLInfo*            pSBuf = GET_ROWCELL_INTERBUF(pSResInfo);",
          "new_line_content": "  SResultRowEntryInfo* pSResInfo = GET_RES_INFO(pSourceCtx);",
          "content_same": false
        },
        {
          "line": 4774,
          "old_api": "TMAX",
          "new_api": "hllTransferInfo",
          "old_text": "TMAX(pDResInfo->numOfRes, pSResInfo->numOfRes)",
          "new_text": "hllTransferInfo(pSBuf, pDBuf)",
          "old_line_content": "  pDResInfo->numOfRes = TMAX(pDResInfo->numOfRes, pSResInfo->numOfRes);",
          "new_line_content": "  hllTransferInfo(pSBuf, pDBuf);",
          "content_same": false
        },
        {
          "line": 4867,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": "GET_RES_INFO",
          "old_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  SStateInfo*          pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "new_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 4884,
          "old_api": "colDataAppendNULL",
          "new_api": "colDataIsNull_f",
          "old_text": "colDataAppendNULL(pOutput, i)",
          "new_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "old_line_content": "      colDataAppendNULL(pOutput, i);",
          "new_line_content": "    if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "content_same": false
        },
        {
          "line": 4913,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": "GET_RES_INFO",
          "old_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  SStateInfo*          pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "new_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 4937,
          "old_api": "colDataAppendNULL",
          "new_api": "colDataIsNull_f",
          "old_text": "colDataAppendNULL(pOutput, i)",
          "new_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "old_line_content": "      colDataAppendNULL(pOutput, i);",
          "new_line_content": "    if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "content_same": false
        },
        {
          "line": 4975,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": "GET_RES_INFO",
          "old_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  SSumRes*             pSumRes = GET_ROWCELL_INTERBUF(pResInfo);",
          "new_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 4993,
          "old_api": "IS_SIGNED_NUMERIC_TYPE",
          "new_api": "colDataGetData",
          "old_text": "IS_SIGNED_NUMERIC_TYPE(type)",
          "new_text": "colDataGetData(pInputCol, i)",
          "old_line_content": "    if (IS_SIGNED_NUMERIC_TYPE(type)) {",
          "new_line_content": "    char* data = colDataGetData(pInputCol, i);",
          "content_same": false
        },
        {
          "line": 4998,
          "old_api": "IS_UNSIGNED_NUMERIC_TYPE",
          "new_api": "colDataAppend",
          "old_text": "IS_UNSIGNED_NUMERIC_TYPE(type)",
          "new_text": "colDataAppend(pOutput, pos, (char*)&pSumRes->isum, false)",
          "old_line_content": "    } else if (IS_UNSIGNED_NUMERIC_TYPE(type)) {",
          "new_line_content": "      colDataAppend(pOutput, pos, (char*)&pSumRes->isum, false);",
          "content_same": false
        },
        {
          "line": 5003,
          "old_api": "IS_FLOAT_TYPE",
          "new_api": "colDataAppend",
          "old_text": "IS_FLOAT_TYPE(type)",
          "new_text": "colDataAppend(pOutput, pos, (char*)&pSumRes->usum, false)",
          "old_line_content": "    } else if (IS_FLOAT_TYPE(type)) {",
          "new_line_content": "      colDataAppend(pOutput, pos, (char*)&pSumRes->usum, false);",
          "content_same": false
        },
        {
          "line": 5009,
          "old_api": "colDataAppendNULL",
          "new_api": "isnan",
          "old_text": "colDataAppendNULL(pOutput, pos)",
          "new_text": "isnan(pSumRes->dsum)",
          "old_line_content": "        colDataAppendNULL(pOutput, pos);",
          "new_line_content": "      if (isinf(pSumRes->dsum) || isnan(pSumRes->dsum)) {",
          "content_same": false
        },
        {
          "line": 5050,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": "GET_RES_INFO",
          "old_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  SMavgInfo*           pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "new_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 5087,
          "old_api": "colDataAppendNULL",
          "new_api": "isnan",
          "old_text": "colDataAppendNULL(pOutput, pos)",
          "new_text": "isnan(result)",
          "old_line_content": "        colDataAppendNULL(pOutput, pos);",
          "new_line_content": "      if (isinf(result) || isnan(result)) {",
          "content_same": false
        },
        {
          "line": 5111,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": "GET_RES_INFO",
          "old_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  SSampleInfo*         pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "new_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 5173,
          "old_api": "getSampleOutputInfo",
          "new_api": "GET_RES_INFO",
          "old_text": "getSampleOutputInfo(pCtx)",
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  SSampleInfo*         pInfo = getSampleOutputInfo(pCtx);",
          "new_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 5184,
          "old_api": "doReservoirSample",
          "new_api": "colDataGetData",
          "old_text": "doReservoirSample(pCtx, pInfo, data, i)",
          "new_text": "colDataGetData(pInputCol, i)",
          "old_line_content": "    doReservoirSample(pCtx, pInfo, data, i);",
          "new_line_content": "    char* data = colDataGetData(pInputCol, i);",
          "content_same": false
        },
        {
          "line": 5208,
          "old_api": "setSelectivityValue",
          "new_api": "colDataAppendNULL",
          "old_text": "setSelectivityValue(pCtx, pBlock, &pInfo->nullTuplePos, currentRow)",
          "new_text": "colDataAppendNULL(pCol, currentRow)",
          "old_line_content": "    setSelectivityValue(pCtx, pBlock, &pInfo->nullTuplePos, currentRow);",
          "new_line_content": "    colDataAppendNULL(pCol, currentRow);",
          "content_same": false
        },
        {
          "line": 5213,
          "old_api": "setSelectivityValue",
          "new_api": "colDataAppend",
          "old_text": "setSelectivityValue(pCtx, pBlock, &pInfo->tuplePos[i], currentRow + i)",
          "new_text": "colDataAppend(pCol, currentRow + i, pInfo->data + i * pInfo->colBytes, false)",
          "old_line_content": "    setSelectivityValue(pCtx, pBlock, &pInfo->tuplePos[i], currentRow + i);",
          "new_line_content": "    colDataAppend(pCol, currentRow + i, pInfo->data + i * pInfo->colBytes, false);",
          "content_same": false
        },
        {
          "line": 5287,
          "old_api": "taosheapsort",
          "new_api": "tailAssignResult",
          "old_text": "taosheapsort((void*)pList, sizeof(STailItem**), pInfo->numAdded + 1, NULL, tailCompFn, 0)",
          "new_text": "tailAssignResult(pList[pInfo->numAdded], data, pInfo->colBytes, ts, isNull)",
          "old_line_content": "    taosheapsort((void*)pList, sizeof(STailItem**), pInfo->numAdded + 1, NULL, tailCompFn, 0);",
          "new_line_content": "    tailAssignResult(pList[pInfo->numAdded], data, pInfo->colBytes, ts, isNull);",
          "content_same": false
        },
        {
          "line": 5291,
          "old_api": "taosheapadjust",
          "new_api": "tailAssignResult",
          "old_text": "taosheapadjust((void*)pList, sizeof(STailItem**), 0, pInfo->numOfPoints - 1, NULL, tailCompFn, NULL, 0)",
          "new_text": "tailAssignResult(pList[0], data, pInfo->colBytes, ts, isNull)",
          "old_line_content": "    taosheapadjust((void*)pList, sizeof(STailItem**), 0, pInfo->numOfPoints - 1, NULL, tailCompFn, NULL, 0);",
          "new_line_content": "    tailAssignResult(pList[0], data, pInfo->colBytes, ts, isNull);",
          "content_same": false
        },
        {
          "line": 5299,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": "GET_RES_INFO",
          "old_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  STailInfo*           pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "new_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 5315,
          "old_api": "colDataIsNull_s",
          "new_api": "colDataGetData",
          "old_text": "colDataIsNull_s(pInputCol, i)",
          "new_text": "colDataGetData(pInputCol, i)",
          "old_line_content": "    doTailAdd(pInfo, data, tsList[i], colDataIsNull_s(pInputCol, i));",
          "new_line_content": "    char* data = colDataGetData(pInputCol, i);",
          "content_same": false
        },
        {
          "line": 5338,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": "GET_RES_INFO",
          "old_text": "GET_ROWCELL_INTERBUF(pEntryInfo)",
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  STailInfo*           pInfo = GET_ROWCELL_INTERBUF(pEntryInfo);",
          "new_line_content": "  SResultRowEntryInfo* pEntryInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 5403,
          "old_api": "taosHashGet",
          "new_api": "varDataTLen",
          "old_text": "taosHashGet(pInfo->pHash, data, hashKeyBytes)",
          "new_text": "varDataTLen(data)",
          "old_line_content": "  SUniqueItem* pHashItem = taosHashGet(pInfo->pHash, data, hashKeyBytes);",
          "new_line_content": "  int32_t      hashKeyBytes = IS_VAR_DATA_TYPE(pInfo->colType) ? varDataTLen(data) : pInfo->colBytes;",
          "content_same": false
        },
        {
          "line": 5421,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": "GET_RES_INFO",
          "old_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  SUniqueInfo*         pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "new_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 5433,
          "old_api": "colDataIsNull_s",
          "new_api": "colDataGetData",
          "old_text": "colDataIsNull_s(pInputCol, i)",
          "new_text": "colDataGetData(pInputCol, i)",
          "old_line_content": "    doUniqueAdd(pInfo, data, tsList[i], colDataIsNull_s(pInputCol, i));",
          "new_line_content": "    char* data = colDataGetData(pInputCol, i);",
          "content_same": false
        },
        {
          "line": 5485,
          "old_api": "taosHashGet",
          "new_api": "varDataTLen",
          "old_text": "taosHashGet(pInfo->pHash, data, hashKeyBytes)",
          "new_text": "varDataTLen(data)",
          "old_line_content": "  SModeItem** pHashItem = taosHashGet(pInfo->pHash, data, hashKeyBytes);",
          "new_line_content": "  int32_t     hashKeyBytes = IS_STR_DATA_TYPE(pInfo->colType) ? varDataTLen(data) : pInfo->colBytes;",
          "content_same": false
        },
        {
          "line": 5508,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": "GET_RES_INFO",
          "old_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  SModeInfo*           pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "new_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 5519,
          "old_api": "colDataIsNull_s",
          "new_api": "colDataGetData",
          "old_text": "colDataIsNull_s(pInputCol, i)",
          "new_text": "colDataGetData(pInputCol, i)",
          "old_line_content": "    if (colDataIsNull_s(pInputCol, i)) {",
          "new_line_content": "    char* data = colDataGetData(pInputCol, i);",
          "content_same": false
        },
        {
          "line": 5544,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": "GET_RES_INFO",
          "old_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  SModeInfo*           pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "new_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 5562,
          "old_api": "setSelectivityValue",
          "new_api": "colDataAppend",
          "old_text": "setSelectivityValue(pCtx, pBlock, &pResItem->tuplePos, currentRow)",
          "new_text": "colDataAppend(pCol, currentRow, pResItem->data, false)",
          "old_line_content": "    setSelectivityValue(pCtx, pBlock, &pResItem->tuplePos, currentRow);",
          "new_line_content": "    colDataAppend(pCol, currentRow, pResItem->data, false);",
          "content_same": false
        },
        {
          "line": 5565,
          "old_api": "setSelectivityValue",
          "new_api": "colDataAppendNULL",
          "old_text": "setSelectivityValue(pCtx, pBlock, &pInfo->nullTuplePos, currentRow)",
          "new_text": "colDataAppendNULL(pCol, currentRow)",
          "old_line_content": "    setSelectivityValue(pCtx, pBlock, &pInfo->nullTuplePos, currentRow);",
          "new_line_content": "    colDataAppendNULL(pCol, currentRow);",
          "content_same": false
        },
        {
          "line": 5950,
          "old_api": "tEncodeU32",
          "new_api": "tStartEncode",
          "old_text": "tEncodeU32(&encoder, pInfo->rowSize)",
          "new_text": "tStartEncode(&encoder)",
          "old_line_content": "  if (tEncodeU32(&encoder, pInfo->rowSize) < 0) return -1;",
          "new_line_content": "  if (tStartEncode(&encoder) < 0) return -1;",
          "content_same": false
        },
        {
          "line": 5953,
          "old_api": "tEncodeU32",
          "new_api": "tEncodeU16",
          "old_text": "tEncodeU32(&encoder, pInfo->numOfBlocks)",
          "new_text": "tEncodeU16(&encoder, pInfo->numOfFiles)",
          "old_line_content": "  if (tEncodeU32(&encoder, pInfo->numOfBlocks) < 0) return -1;",
          "new_line_content": "  if (tEncodeU16(&encoder, pInfo->numOfFiles) < 0) return -1;",
          "content_same": false
        },
        {
          "line": 5958,
          "old_api": "tEncodeI32",
          "new_api": "tEncodeU64",
          "old_text": "tEncodeI32(&encoder, pInfo->maxRows)",
          "new_text": "tEncodeU64(&encoder, pInfo->totalRows)",
          "old_line_content": "  if (tEncodeI32(&encoder, pInfo->maxRows) < 0) return -1;",
          "new_line_content": "  if (tEncodeU64(&encoder, pInfo->totalRows) < 0) return -1;",
          "content_same": false
        },
        {
          "line": 5962,
          "old_api": "tEncodeU32",
          "new_api": "tEncodeI32",
          "old_text": "tEncodeU32(&encoder, pInfo->numOfInmemRows)",
          "new_text": "tEncodeI32(&encoder, pInfo->defMinRows)",
          "old_line_content": "  if (tEncodeU32(&encoder, pInfo->numOfInmemRows) < 0) return -1;",
          "new_line_content": "  if (tEncodeI32(&encoder, pInfo->defMinRows) < 0) return -1;",
          "content_same": false
        },
        {
          "line": 5966,
          "old_api": "tEncodeI32",
          "new_api": "tListLen",
          "old_text": "tEncodeI32(&encoder, pInfo->blockRowsHisto[i])",
          "new_text": "tListLen(pInfo->blockRowsHisto)",
          "old_line_content": "    if (tEncodeI32(&encoder, pInfo->blockRowsHisto[i]) < 0) return -1;",
          "new_line_content": "  for (int32_t i = 0; i < tListLen(pInfo->blockRowsHisto); ++i) {",
          "content_same": false
        },
        {
          "line": 5981,
          "old_api": "tDecodeU32",
          "new_api": "tStartDecode",
          "old_text": "tDecodeU32(&decoder, &pInfo->rowSize)",
          "new_text": "tStartDecode(&decoder)",
          "old_line_content": "  if (tDecodeU32(&decoder, &pInfo->rowSize) < 0) return -1;",
          "new_line_content": "  if (tStartDecode(&decoder) < 0) return -1;",
          "content_same": false
        },
        {
          "line": 5984,
          "old_api": "tDecodeU32",
          "new_api": "tDecodeU16",
          "old_text": "tDecodeU32(&decoder, &pInfo->numOfBlocks)",
          "new_text": "tDecodeU16(&decoder, &pInfo->numOfFiles)",
          "old_line_content": "  if (tDecodeU32(&decoder, &pInfo->numOfBlocks) < 0) return -1;",
          "new_line_content": "  if (tDecodeU16(&decoder, &pInfo->numOfFiles) < 0) return -1;",
          "content_same": false
        },
        {
          "line": 5989,
          "old_api": "tDecodeI32",
          "new_api": "tDecodeU64",
          "old_text": "tDecodeI32(&decoder, &pInfo->maxRows)",
          "new_text": "tDecodeU64(&decoder, &pInfo->totalRows)",
          "old_line_content": "  if (tDecodeI32(&decoder, &pInfo->maxRows) < 0) return -1;",
          "new_line_content": "  if (tDecodeU64(&decoder, &pInfo->totalRows) < 0) return -1;",
          "content_same": false
        },
        {
          "line": 5993,
          "old_api": "tDecodeU32",
          "new_api": "tDecodeI32",
          "old_text": "tDecodeU32(&decoder, &pInfo->numOfInmemRows)",
          "new_text": "tDecodeI32(&decoder, &pInfo->defMinRows)",
          "old_line_content": "  if (tDecodeU32(&decoder, &pInfo->numOfInmemRows) < 0) return -1;",
          "new_line_content": "  if (tDecodeI32(&decoder, &pInfo->defMinRows) < 0) return -1;",
          "content_same": false
        },
        {
          "line": 5997,
          "old_api": "tDecodeI32",
          "new_api": "tListLen",
          "old_text": "tDecodeI32(&decoder, &pInfo->blockRowsHisto[i])",
          "new_text": "tListLen(pInfo->blockRowsHisto)",
          "old_line_content": "    if (tDecodeI32(&decoder, &pInfo->blockRowsHisto[i]) < 0) return -1;",
          "new_line_content": "  for (int32_t i = 0; i < tListLen(pInfo->blockRowsHisto); ++i) {",
          "content_same": false
        },
        {
          "line": 6006,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": "GET_RES_INFO",
          "old_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  STableBlockDistInfo* pData = GET_ROWCELL_INTERBUF(pResInfo);",
          "new_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 6023,
          "old_api": "colDataAppend",
          "new_api": "varDataSetLen",
          "old_text": "colDataAppend(pColInfo, row++, st, false)",
          "new_text": "varDataSetLen(st, len)",
          "old_line_content": "  colDataAppend(pColInfo, row++, st, false);",
          "new_line_content": "  varDataSetLen(st, len);",
          "content_same": false
        },
        {
          "line": 6035,
          "old_api": "colDataAppend",
          "new_api": "varDataSetLen",
          "old_text": "colDataAppend(pColInfo, row++, st, false)",
          "new_text": "varDataSetLen(st, len)",
          "old_line_content": "  colDataAppend(pColInfo, row++, st, false);",
          "new_line_content": "  varDataSetLen(st, len);",
          "content_same": false
        },
        {
          "line": 6041,
          "old_api": "colDataAppend",
          "new_api": "varDataSetLen",
          "old_text": "colDataAppend(pColInfo, row++, st, false)",
          "new_text": "varDataSetLen(st, len)",
          "old_line_content": "  colDataAppend(pColInfo, row++, st, false);",
          "new_line_content": "  varDataSetLen(st, len);",
          "content_same": false
        },
        {
          "line": 6046,
          "old_api": "colDataAppend",
          "new_api": "varDataSetLen",
          "old_text": "colDataAppend(pColInfo, row++, st, false)",
          "new_text": "varDataSetLen(st, len)",
          "old_line_content": "  colDataAppend(pColInfo, row++, st, false);",
          "new_line_content": "  varDataSetLen(st, len);",
          "content_same": false
        },
        {
          "line": 6067,
          "old_api": "sprintf",
          "new_api": "tListLen",
          "old_text": "sprintf(st + VARSTR_HEADER_SIZE, \"%04d |\", pData->defMinRows + bucketRange * i)",
          "new_text": "tListLen(pData->blockRowsHisto)",
          "old_line_content": "    len = sprintf(st + VARSTR_HEADER_SIZE, \"%04d |\", pData->defMinRows + bucketRange * i);",
          "new_line_content": "  for (int32_t i = 0; i < tListLen(pData->blockRowsHisto); ++i) {",
          "content_same": false
        },
        {
          "line": 6085,
          "old_api": "colDataAppend",
          "new_api": "varDataSetLen",
          "old_text": "colDataAppend(pColInfo, row++, st, false)",
          "new_text": "varDataSetLen(st, len)",
          "old_line_content": "    colDataAppend(pColInfo, row++, st, false);",
          "new_line_content": "    varDataSetLen(st, len);",
          "content_same": false
        },
        {
          "line": 6112,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": "GET_RES_INFO",
          "old_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  SDerivInfo*          pDerivInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "new_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 6143,
          "old_api": "colDataAppendNULL",
          "new_api": "isnan",
          "old_text": "colDataAppendNULL(pOutput, pos)",
          "new_text": "isnan(r)",
          "old_line_content": "            colDataAppendNULL(pOutput, pos);",
          "new_line_content": "          if (isinf(r) || isnan(r)) {",
          "content_same": false
        },
        {
          "line": 6181,
          "old_api": "colDataAppendNULL",
          "new_api": "isnan",
          "old_text": "colDataAppendNULL(pOutput, pos)",
          "new_text": "isnan(r)",
          "old_line_content": "            colDataAppendNULL(pOutput, pos);",
          "new_line_content": "          if (isinf(r) || isnan(r)) {",
          "content_same": false
        },
        {
          "line": 6230,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": "GET_RES_INFO",
          "old_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  SRateInfo*           pRateInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "new_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 6311,
          "old_api": "TSDB_TICK_PER_SECOND",
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": "TSDB_TICK_PER_SECOND(pCtx->param[1].param.i)",
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "  double     result = doCalcRate(pInfo, (double)TSDB_TICK_PER_SECOND(pCtx->param[1].param.i));",
          "new_line_content": "  SRateInfo* pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 6312,
          "old_api": "colDataAppend",
          "new_api": "TSDB_TICK_PER_SECOND",
          "old_text": "colDataAppend(pCol, pBlock->info.rows, (const char*)&result, pResInfo->isNullRes)",
          "new_text": "TSDB_TICK_PER_SECOND(pCtx->param[1].param.i)",
          "old_line_content": "  colDataAppend(pCol, pBlock->info.rows, (const char*)&result, pResInfo->isNullRes);",
          "new_line_content": "  double     result = doCalcRate(pInfo, (double)TSDB_TICK_PER_SECOND(pCtx->param[1].param.i));",
          "content_same": false
        },
        {
          "line": 6319,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": "GET_RES_INFO",
          "old_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  SGroupKeyInfo*       pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "new_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 6338,
          "old_api": "IS_VAR_DATA_TYPE",
          "new_api": "colDataGetData",
          "old_text": "IS_VAR_DATA_TYPE(pInputCol->info.type)",
          "new_text": "colDataGetData(pInputCol, startIndex)",
          "old_line_content": "  if (IS_VAR_DATA_TYPE(pInputCol->info.type)) {",
          "new_line_content": "  char* data = colDataGetData(pInputCol, startIndex);",
          "content_same": false
        },
        {
          "line": 6339,
          "old_api": "memcpy",
          "new_api": "IS_VAR_DATA_TYPE",
          "old_text": "memcpy(pInfo->data, data,\n           (pInputCol->info.type == TSDB_DATA_TYPE_JSON) ? getJsonValueLen(data) : varDataTLen(data))",
          "new_text": "IS_VAR_DATA_TYPE(pInputCol->info.type)",
          "old_line_content": "    memcpy(pInfo->data, data,",
          "new_line_content": "  if (IS_VAR_DATA_TYPE(pInputCol->info.type)) {",
          "content_same": false
        },
        {
          "line": 6340,
          "old_api": "varDataTLen",
          "new_api": "memcpy",
          "old_text": "varDataTLen(data)",
          "new_text": "memcpy(pInfo->data, data,\n           (pInputCol->info.type == TSDB_DATA_TYPE_JSON) ? getJsonValueLen(data) : varDataTLen(data))",
          "old_line_content": "           (pInputCol->info.type == TSDB_DATA_TYPE_JSON) ? getJsonValueLen(data) : varDataTLen(data));",
          "new_line_content": "    memcpy(pInfo->data, data,",
          "content_same": false
        },
        {
          "line": 6376,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": "GET_RES_INFO",
          "old_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  SFirstLastRes*       pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "new_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 6389,
          "old_api": "getRowPTs",
          "new_api": "colDataGetData",
          "old_text": "getRowPTs(pInput->pPTS, i)",
          "new_text": "colDataGetData(pInputCol, i)",
          "old_line_content": "    TSKEY cts = getRowPTs(pInput->pPTS, i);",
          "new_line_content": "    char* data = colDataGetData(pInputCol, i);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 6144,
          "old_api": null,
          "new_api": "colDataAppendNULL",
          "old_text": null,
          "new_text": "colDataAppendNULL(pOutput, pos)",
          "old_line_content": "          } else {",
          "new_line_content": "            colDataAppendNULL(pOutput, pos);",
          "content_same": false
        },
        {
          "line": 6146,
          "old_api": null,
          "new_api": "colDataAppend",
          "old_text": null,
          "new_text": "colDataAppend(pOutput, pos, (const char*)&r, false)",
          "old_line_content": "          }",
          "new_line_content": "            colDataAppend(pOutput, pos, (const char*)&r, false);",
          "content_same": false
        },
        {
          "line": 6150,
          "old_api": null,
          "new_api": "colDataAppendInt64",
          "old_text": null,
          "new_text": "colDataAppendInt64(pTsOutput, pos, &tsList[i])",
          "old_line_content": "          }",
          "new_line_content": "            colDataAppendInt64(pTsOutput, pos, &tsList[i]);",
          "content_same": false
        },
        {
          "line": 6155,
          "old_api": null,
          "new_api": "appendSelectivityValue",
          "old_text": null,
          "new_text": "appendSelectivityValue(pCtx, i, pos)",
          "old_line_content": "          }",
          "new_line_content": "            appendSelectivityValue(pCtx, i, pos);",
          "content_same": false
        },
        {
          "line": 4110,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "",
          "new_line_content": "  SElapsedInfo* pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "content_same": false
        },
        {
          "line": 6167,
          "old_api": null,
          "new_api": "colDataIsNull_f",
          "old_text": null,
          "new_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "old_line_content": "        continue;",
          "new_line_content": "      if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "content_same": false
        },
        {
          "line": 4120,
          "old_api": null,
          "new_api": "GET_INT64_VAL",
          "old_text": null,
          "new_text": "GET_INT64_VAL(&pAgg->max)",
          "old_line_content": "    } else {",
          "new_line_content": "      pInfo->max = GET_INT64_VAL(&pAgg->max);",
          "content_same": false
        },
        {
          "line": 4123,
          "old_api": null,
          "new_api": "GET_INT64_VAL",
          "old_text": null,
          "new_text": "GET_INT64_VAL(&pAgg->max)",
          "old_line_content": "      } else {",
          "new_line_content": "        pInfo->max = GET_INT64_VAL(&pAgg->max);",
          "content_same": false
        },
        {
          "line": 4125,
          "old_api": null,
          "new_api": "GET_INT64_VAL",
          "old_text": null,
          "new_text": "GET_INT64_VAL(&pAgg->min)",
          "old_line_content": "      }",
          "new_line_content": "        pInfo->min = GET_INT64_VAL(&pAgg->min);",
          "content_same": false
        },
        {
          "line": 6182,
          "old_api": null,
          "new_api": "colDataAppendNULL",
          "old_text": null,
          "new_text": "colDataAppendNULL(pOutput, pos)",
          "old_line_content": "          } else {",
          "new_line_content": "            colDataAppendNULL(pOutput, pos);",
          "content_same": false
        },
        {
          "line": 6184,
          "old_api": null,
          "new_api": "colDataAppend",
          "old_text": null,
          "new_text": "colDataAppend(pOutput, pos, (const char*)&r, false)",
          "old_line_content": "          }",
          "new_line_content": "            colDataAppend(pOutput, pos, (const char*)&r, false);",
          "content_same": false
        },
        {
          "line": 6188,
          "old_api": null,
          "new_api": "colDataAppendInt64",
          "old_text": null,
          "new_text": "colDataAppendInt64(pTsOutput, pos, &pDerivInfo->prevTs)",
          "old_line_content": "          }",
          "new_line_content": "            colDataAppendInt64(pTsOutput, pos, &pDerivInfo->prevTs);",
          "content_same": false
        },
        {
          "line": 4145,
          "old_api": null,
          "new_api": "colDataGetData",
          "old_text": null,
          "new_text": "colDataGetData(pCol, 0)",
          "old_line_content": "    if (pCtx->order == TSDB_ORDER_DESC) {",
          "new_line_content": "    TSKEY*  ptsList = (int64_t*)colDataGetData(pCol, 0);",
          "content_same": false
        },
        {
          "line": 6193,
          "old_api": null,
          "new_api": "appendSelectivityValue",
          "old_text": null,
          "new_text": "appendSelectivityValue(pCtx, i, pos)",
          "old_line_content": "          }",
          "new_line_content": "            appendSelectivityValue(pCtx, i, pos);",
          "content_same": false
        },
        {
          "line": 6214,
          "old_api": null,
          "new_api": "functionSetup",
          "old_text": null,
          "new_text": "functionSetup(pCtx, pResInfo)",
          "old_line_content": "    return false;  // not initialized since it has been initialized",
          "new_line_content": "  if (!functionSetup(pCtx, pResInfo)) {",
          "content_same": false
        },
        {
          "line": 6218,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "",
          "new_line_content": "  SRateInfo* pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 4177,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "",
          "new_line_content": "  SET_VAL(GET_RES_INFO(pCtx), numOfElems, 1);",
          "content_same": false
        },
        {
          "line": 6231,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "",
          "new_line_content": "  SRateInfo*           pRateInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 4196,
          "old_api": null,
          "new_api": "ASSERT",
          "old_text": null,
          "new_text": "ASSERT(pCol->info.type == TSDB_DATA_TYPE_BINARY)",
          "old_line_content": "",
          "new_line_content": "  ASSERT(pCol->info.type == TSDB_DATA_TYPE_BINARY);",
          "content_same": false
        },
        {
          "line": 6244,
          "old_api": null,
          "new_api": "colDataIsNull_f",
          "old_text": null,
          "new_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "old_line_content": "      continue;",
          "new_line_content": "    if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "content_same": false
        },
        {
          "line": 4198,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "",
          "new_line_content": "  SElapsedInfo* pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "content_same": false
        },
        {
          "line": 6250,
          "old_api": null,
          "new_api": "colDataGetData",
          "old_text": null,
          "new_text": "colDataGetData(pInputCol, i)",
          "old_line_content": "    double v = 0;",
          "new_line_content": "    char*  data = colDataGetData(pInputCol, i);",
          "content_same": false
        },
        {
          "line": 4205,
          "old_api": null,
          "new_api": "elapsedTransferInfo",
          "old_text": null,
          "new_text": "elapsedTransferInfo(pInputInfo, pInfo)",
          "old_line_content": "  }",
          "new_line_content": "    elapsedTransferInfo(pInputInfo, pInfo);",
          "content_same": false
        },
        {
          "line": 4208,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  return TSDB_CODE_SUCCESS;",
          "new_line_content": "  SET_VAL(GET_RES_INFO(pCtx), 1, 1);",
          "content_same": false
        },
        {
          "line": 4213,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  double        result = (double)pInfo->max - (double)pInfo->min;",
          "new_line_content": "  SElapsedInfo* pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "content_same": false
        },
        {
          "line": 4217,
          "old_api": null,
          "new_api": "functionFinalize",
          "old_text": null,
          "new_text": "functionFinalize(pCtx, pBlock)",
          "old_line_content": "}",
          "new_line_content": "  return functionFinalize(pCtx, pBlock);",
          "content_same": false
        },
        {
          "line": 4224,
          "old_api": null,
          "new_api": "taosMemoryCalloc",
          "old_text": null,
          "new_text": "taosMemoryCalloc(resultBytes + VARSTR_HEADER_SIZE, sizeof(char))",
          "old_line_content": "",
          "new_line_content": "  char*                res = taosMemoryCalloc(resultBytes + VARSTR_HEADER_SIZE, sizeof(char));",
          "content_same": false
        },
        {
          "line": 4227,
          "old_api": null,
          "new_api": "varDataSetLen",
          "old_text": null,
          "new_text": "varDataSetLen(res, resultBytes)",
          "old_line_content": "",
          "new_line_content": "  varDataSetLen(res, resultBytes);",
          "content_same": false
        },
        {
          "line": 4230,
          "old_api": null,
          "new_api": "taosArrayGet",
          "old_text": null,
          "new_text": "taosArrayGet(pBlock->pDataBlock, slotId)",
          "old_line_content": "",
          "new_line_content": "  SColumnInfoData* pCol = taosArrayGet(pBlock->pDataBlock, slotId);",
          "content_same": false
        },
        {
          "line": 6278,
          "old_api": null,
          "new_api": "SET_VAL",
          "old_text": null,
          "new_text": "SET_VAL(pResInfo, numOfElems, 1)",
          "old_line_content": "  return TSDB_CODE_SUCCESS;",
          "new_line_content": "  SET_VAL(pResInfo, numOfElems, 1);",
          "content_same": false
        },
        {
          "line": 4232,
          "old_api": null,
          "new_api": "colDataAppend",
          "old_text": null,
          "new_text": "colDataAppend(pCol, pBlock->info.rows, res, false)",
          "old_line_content": "",
          "new_line_content": "  colDataAppend(pCol, pBlock->info.rows, res, false);",
          "content_same": false
        },
        {
          "line": 4234,
          "old_api": null,
          "new_api": "taosMemoryFree",
          "old_text": null,
          "new_text": "taosMemoryFree(res)",
          "old_line_content": "  return pResInfo->numOfRes;",
          "new_line_content": "  taosMemoryFree(res);",
          "content_same": false
        },
        {
          "line": 4240,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pDResInfo)",
          "old_line_content": "",
          "new_line_content": "  SElapsedInfo*        pDBuf = GET_ROWCELL_INTERBUF(pDResInfo);",
          "content_same": false
        },
        {
          "line": 4243,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pSResInfo)",
          "old_line_content": "",
          "new_line_content": "  SElapsedInfo*        pSBuf = GET_ROWCELL_INTERBUF(pSResInfo);",
          "content_same": false
        },
        {
          "line": 4246,
          "old_api": null,
          "new_api": "TMAX",
          "old_text": null,
          "new_text": "TMAX(pDResInfo->numOfRes, pSResInfo->numOfRes)",
          "old_line_content": "  pDResInfo->isNullRes &= pSResInfo->isNullRes;",
          "new_line_content": "  pDResInfo->numOfRes = TMAX(pDResInfo->numOfRes, pSResInfo->numOfRes);",
          "content_same": false
        },
        {
          "line": 6306,
          "old_api": null,
          "new_api": "taosArrayGet",
          "old_text": null,
          "new_text": "taosArrayGet(pBlock->pDataBlock, slotId)",
          "old_line_content": "",
          "new_line_content": "  SColumnInfoData* pCol = taosArrayGet(pBlock->pDataBlock, slotId);",
          "content_same": false
        },
        {
          "line": 6308,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  pResInfo->isNullRes = (pResInfo->numOfRes == 0) ? 1 : 0;",
          "new_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 4262,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(binTypeStr, \"user_input\")",
          "old_line_content": "    binType = USER_INPUT_BIN;",
          "new_line_content": "  if (strcasecmp(binTypeStr, \"user_input\") == 0) {",
          "content_same": false
        },
        {
          "line": 4264,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(binTypeStr, \"linear_bin\")",
          "old_line_content": "    binType = LINEAR_BIN;",
          "new_line_content": "  } else if (strcasecmp(binTypeStr, \"linear_bin\") == 0) {",
          "content_same": false
        },
        {
          "line": 6313,
          "old_api": null,
          "new_api": "colDataAppend",
          "old_text": null,
          "new_text": "colDataAppend(pCol, pBlock->info.rows, (const char*)&result, pResInfo->isNullRes)",
          "old_line_content": "",
          "new_line_content": "  colDataAppend(pCol, pBlock->info.rows, (const char*)&result, pResInfo->isNullRes);",
          "content_same": false
        },
        {
          "line": 4266,
          "old_api": null,
          "new_api": "strcasecmp",
          "old_text": null,
          "new_text": "strcasecmp(binTypeStr, \"log_bin\")",
          "old_line_content": "    binType = LOG_BIN;",
          "new_line_content": "  } else if (strcasecmp(binTypeStr, \"log_bin\") == 0) {",
          "content_same": false
        },
        {
          "line": 6320,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "",
          "new_line_content": "  SGroupKeyInfo*       pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 4276,
          "old_api": null,
          "new_api": "cJSON_Parse",
          "old_text": null,
          "new_text": "cJSON_Parse(binDescStr)",
          "old_line_content": "  int32_t numOfBins;",
          "new_line_content": "  cJSON*  binDesc = cJSON_Parse(binDescStr);",
          "content_same": false
        },
        {
          "line": 4280,
          "old_api": null,
          "new_api": "cJSON_GetArraySize",
          "old_text": null,
          "new_text": "cJSON_GetArraySize(binDesc)",
          "old_line_content": "    int32_t startIndex;",
          "new_line_content": "    int32_t numOfParams = cJSON_GetArraySize(binDesc);",
          "content_same": false
        },
        {
          "line": 6332,
          "old_api": null,
          "new_api": "colDataIsNull_s",
          "old_text": null,
          "new_text": "colDataIsNull_s(pInputCol, startIndex)",
          "old_line_content": "    pInfo->isNull = true;",
          "new_line_content": "  if (colDataIsNull_s(pInputCol, startIndex)) {",
          "content_same": false
        },
        {
          "line": 4290,
          "old_api": null,
          "new_api": "cJSON_GetObjectItem",
          "old_text": null,
          "new_text": "cJSON_GetObjectItem(binDesc, \"infinity\")",
          "old_line_content": "",
          "new_line_content": "    cJSON* infinity = cJSON_GetObjectItem(binDesc, \"infinity\");",
          "content_same": false
        },
        {
          "line": 4292,
          "old_api": null,
          "new_api": "cJSON_IsBool",
          "old_text": null,
          "new_text": "cJSON_IsBool(infinity)",
          "old_line_content": "      return false;",
          "new_line_content": "    if (!cJSON_IsNumber(start) || !cJSON_IsNumber(count) || !cJSON_IsBool(infinity)) {",
          "content_same": false
        },
        {
          "line": 6341,
          "old_api": null,
          "new_api": "varDataTLen",
          "old_text": null,
          "new_text": "varDataTLen(data)",
          "old_line_content": "  } else {",
          "new_line_content": "           (pInputCol->info.type == TSDB_DATA_TYPE_JSON) ? getJsonValueLen(data) : varDataTLen(data));",
          "content_same": false
        },
        {
          "line": 6343,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(pInfo->data, data, pInputCol->info.bytes)",
          "old_line_content": "  }",
          "new_line_content": "    memcpy(pInfo->data, data, pInputCol->info.bytes);",
          "content_same": false
        },
        {
          "line": 4301,
          "old_api": null,
          "new_api": "isinf",
          "old_text": null,
          "new_text": "isinf(count->valuedouble)",
          "old_line_content": "      return false;",
          "new_line_content": "        (factor != NULL && isinf(factor->valuedouble)) || (count != NULL && isinf(count->valuedouble))) {",
          "content_same": false
        },
        {
          "line": 6349,
          "old_api": null,
          "new_api": "SET_VAL",
          "old_text": null,
          "new_text": "SET_VAL(pResInfo, 1, 1)",
          "old_line_content": "  return TSDB_CODE_SUCCESS;",
          "new_line_content": "  SET_VAL(pResInfo, 1, 1);",
          "content_same": false
        },
        {
          "line": 6355,
          "old_api": null,
          "new_api": "taosArrayGet",
          "old_text": null,
          "new_text": "taosArrayGet(pBlock->pDataBlock, slotId)",
          "old_line_content": "",
          "new_line_content": "  SColumnInfoData* pCol = taosArrayGet(pBlock->pDataBlock, slotId);",
          "content_same": false
        },
        {
          "line": 6357,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "",
          "new_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 6359,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "",
          "new_line_content": "  SGroupKeyInfo* pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 4315,
          "old_api": null,
          "new_api": "cJSON_IsNumber",
          "old_text": null,
          "new_text": "cJSON_IsNumber(width)",
          "old_line_content": "      // linear bin process",
          "new_line_content": "    if (cJSON_IsNumber(width) && factor == NULL && binType == LINEAR_BIN) {",
          "content_same": false
        },
        {
          "line": 6364,
          "old_api": null,
          "new_api": "colDataAppend",
          "old_text": null,
          "new_text": "colDataAppend(pCol, currentRow, pInfo->data, pInfo->isNull ? true : false)",
          "old_line_content": "    }",
          "new_line_content": "      colDataAppend(pCol, currentRow, pInfo->data, pInfo->isNull ? true : false);",
          "content_same": false
        },
        {
          "line": 4318,
          "old_api": null,
          "new_api": "taosMemoryFree",
          "old_text": null,
          "new_text": "taosMemoryFree(intervals)",
          "old_line_content": "        return false;",
          "new_line_content": "        taosMemoryFree(intervals);",
          "content_same": false
        },
        {
          "line": 4324,
          "old_api": null,
          "new_api": "taosMemoryFree",
          "old_text": null,
          "new_text": "taosMemoryFree(intervals)",
          "old_line_content": "          return false;",
          "new_line_content": "          taosMemoryFree(intervals);",
          "content_same": false
        },
        {
          "line": 4329,
          "old_api": null,
          "new_api": "cJSON_IsNumber",
          "old_text": null,
          "new_text": "cJSON_IsNumber(factor)",
          "old_line_content": "      // log bin process",
          "new_line_content": "    } else if (cJSON_IsNumber(factor) && width == NULL && binType == LOG_BIN) {",
          "content_same": false
        },
        {
          "line": 6377,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "",
          "new_line_content": "  SFirstLastRes*       pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 4332,
          "old_api": null,
          "new_api": "taosMemoryFree",
          "old_text": null,
          "new_text": "taosMemoryFree(intervals)",
          "old_line_content": "        return false;",
          "new_line_content": "        taosMemoryFree(intervals);",
          "content_same": false
        },
        {
          "line": 4336,
          "old_api": null,
          "new_api": "taosMemoryFree",
          "old_text": null,
          "new_text": "taosMemoryFree(intervals)",
          "old_line_content": "        return false;",
          "new_line_content": "        taosMemoryFree(intervals);",
          "content_same": false
        },
        {
          "line": 4342,
          "old_api": null,
          "new_api": "taosMemoryFree",
          "old_text": null,
          "new_text": "taosMemoryFree(intervals)",
          "old_line_content": "          return false;",
          "new_line_content": "          taosMemoryFree(intervals);",
          "content_same": false
        },
        {
          "line": 6390,
          "old_api": null,
          "new_api": "getRowPTs",
          "old_text": null,
          "new_text": "getRowPTs(pInput->pPTS, i)",
          "old_line_content": "    if (pResInfo->numOfRes == 0 || pInfo->ts < cts) {",
          "new_line_content": "    TSKEY cts = getRowPTs(pInput->pPTS, i);",
          "content_same": false
        },
        {
          "line": 6392,
          "old_api": null,
          "new_api": "doSaveLastrow",
          "old_text": null,
          "new_text": "doSaveLastrow(pCtx, data, i, cts, pInfo)",
          "old_line_content": "      pResInfo->numOfRes = 1;",
          "new_line_content": "      doSaveLastrow(pCtx, data, i, cts, pInfo);",
          "content_same": false
        },
        {
          "line": 4348,
          "old_api": null,
          "new_api": "taosMemoryFree",
          "old_text": null,
          "new_text": "taosMemoryFree(intervals)",
          "old_line_content": "      return false;",
          "new_line_content": "      taosMemoryFree(intervals);",
          "content_same": false
        },
        {
          "line": 6397,
          "old_api": null,
          "new_api": "SET_VAL",
          "old_text": null,
          "new_text": "SET_VAL(pResInfo, numOfElems, 1)",
          "old_line_content": "  return TSDB_CODE_SUCCESS;",
          "new_line_content": "  SET_VAL(pResInfo, numOfElems, 1);",
          "content_same": false
        },
        {
          "line": 4356,
          "old_api": null,
          "new_api": "ASSERT",
          "old_text": null,
          "new_text": "ASSERT(numOfBins >= 4)",
          "old_line_content": "      if (intervals[1] > intervals[numOfBins - 2]) {",
          "new_line_content": "      ASSERT(numOfBins >= 4);",
          "content_same": false
        },
        {
          "line": 4358,
          "old_api": null,
          "new_api": "TSWAP",
          "old_text": null,
          "new_text": "TSWAP(intervals[0], intervals[numOfBins - 1])",
          "old_line_content": "      }",
          "new_line_content": "        TSWAP(intervals[0], intervals[numOfBins - 1]);",
          "content_same": false
        },
        {
          "line": 4361,
          "old_api": null,
          "new_api": "cJSON_IsArray",
          "old_text": null,
          "new_text": "cJSON_IsArray(binDesc)",
          "old_line_content": "    if (binType != USER_INPUT_BIN) {",
          "new_line_content": "  } else if (cJSON_IsArray(binDesc)) { /* user input bins */",
          "content_same": false
        },
        {
          "line": 4366,
          "old_api": null,
          "new_api": "taosMemoryCalloc",
          "old_text": null,
          "new_text": "taosMemoryCalloc(numOfBins, sizeof(double))",
          "old_line_content": "    cJSON* bin = binDesc->child;",
          "new_line_content": "    intervals = taosMemoryCalloc(numOfBins, sizeof(double));",
          "content_same": false
        },
        {
          "line": 4369,
          "old_api": null,
          "new_api": "taosMemoryFree",
          "old_text": null,
          "new_text": "taosMemoryFree(intervals)",
          "old_line_content": "      return false;",
          "new_line_content": "      taosMemoryFree(intervals);",
          "content_same": false
        },
        {
          "line": 4376,
          "old_api": null,
          "new_api": "taosMemoryFree",
          "old_text": null,
          "new_text": "taosMemoryFree(intervals)",
          "old_line_content": "        return false;",
          "new_line_content": "        taosMemoryFree(intervals);",
          "content_same": false
        },
        {
          "line": 4380,
          "old_api": null,
          "new_api": "taosMemoryFree",
          "old_text": null,
          "new_text": "taosMemoryFree(intervals)",
          "old_line_content": "        return false;",
          "new_line_content": "        taosMemoryFree(intervals);",
          "content_same": false
        },
        {
          "line": 4398,
          "old_api": null,
          "new_api": "taosMemoryFree",
          "old_text": null,
          "new_text": "taosMemoryFree(intervals)",
          "old_line_content": "  return true;",
          "new_line_content": "  taosMemoryFree(intervals);",
          "content_same": false
        },
        {
          "line": 4403,
          "old_api": null,
          "new_api": "functionSetup",
          "old_text": null,
          "new_text": "functionSetup(pCtx, pResultInfo)",
          "old_line_content": "    return false;",
          "new_line_content": "  if (!functionSetup(pCtx, pResultInfo)) {",
          "content_same": false
        },
        {
          "line": 4407,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResultInfo)",
          "old_line_content": "  pInfo->numOfBins = 0;",
          "new_line_content": "  SHistoFuncInfo* pInfo = GET_ROWCELL_INTERBUF(pResultInfo);",
          "content_same": false
        },
        {
          "line": 4412,
          "old_api": null,
          "new_api": "varDataVal",
          "old_text": null,
          "new_text": "varDataVal(pCtx->param[1].param.pz)",
          "old_line_content": "  if (binType == UNKNOWN_BIN) {",
          "new_line_content": "  int8_t binType = getHistogramBinType(varDataVal(pCtx->param[1].param.pz));",
          "content_same": false
        },
        {
          "line": 4416,
          "old_api": null,
          "new_api": "varDataVal",
          "old_text": null,
          "new_text": "varDataVal(pCtx->param[2].param.pz)",
          "old_line_content": "  int64_t normalized = pCtx->param[3].param.i;",
          "new_line_content": "  char*   binDesc = varDataVal(pCtx->param[2].param.pz);",
          "content_same": false
        },
        {
          "line": 4421,
          "old_api": null,
          "new_api": "getHistogramBinDesc",
          "old_text": null,
          "new_text": "getHistogramBinDesc(pInfo, binDesc, binType, (bool)normalized)",
          "old_line_content": "    return false;",
          "new_line_content": "  if (!getHistogramBinDesc(pInfo, binDesc, binType, (bool)normalized)) {",
          "content_same": false
        },
        {
          "line": 4429,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "",
          "new_line_content": "  SHistoFuncInfo* pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "content_same": false
        },
        {
          "line": 4441,
          "old_api": null,
          "new_api": "colDataIsNull_f",
          "old_text": null,
          "new_text": "colDataIsNull_f(pCol->nullbitmap, i)",
          "old_line_content": "      continue;",
          "new_line_content": "    if (pCol->hasNull && colDataIsNull_f(pCol->nullbitmap, i)) {",
          "content_same": false
        },
        {
          "line": 4447,
          "old_api": null,
          "new_api": "colDataGetData",
          "old_text": null,
          "new_text": "colDataGetData(pCol, i)",
          "old_line_content": "    double v;",
          "new_line_content": "    char*  data = colDataGetData(pCol, i);",
          "content_same": false
        },
        {
          "line": 4461,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  } else {",
          "new_line_content": "    GET_RES_INFO(pCtx)->numOfRes = pInfo->numOfBins;",
          "content_same": false
        },
        {
          "line": 4463,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  }",
          "new_line_content": "    GET_RES_INFO(pCtx)->numOfRes = 1;",
          "content_same": false
        },
        {
          "line": 4468,
          "old_api": null,
          "new_api": "histogramFunctionImpl",
          "old_text": null,
          "new_text": "histogramFunctionImpl(pCtx, false)",
          "old_line_content": "",
          "new_line_content": "int32_t histogramFunction(SqlFunctionCtx* pCtx) { return histogramFunctionImpl(pCtx, false); }",
          "content_same": false
        },
        {
          "line": 4470,
          "old_api": null,
          "new_api": "histogramFunctionImpl",
          "old_text": null,
          "new_text": "histogramFunctionImpl(pCtx, true)",
          "old_line_content": "",
          "new_line_content": "int32_t histogramFunctionPartial(SqlFunctionCtx* pCtx) { return histogramFunctionImpl(pCtx, true); }",
          "content_same": false
        },
        {
          "line": 4486,
          "old_api": null,
          "new_api": "ASSERT",
          "old_text": null,
          "new_text": "ASSERT(pCol->info.type == TSDB_DATA_TYPE_BINARY)",
          "old_line_content": "",
          "new_line_content": "  ASSERT(pCol->info.type == TSDB_DATA_TYPE_BINARY);",
          "content_same": false
        },
        {
          "line": 4488,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "",
          "new_line_content": "  SHistoFuncInfo* pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "content_same": false
        },
        {
          "line": 4495,
          "old_api": null,
          "new_api": "histogramTransferInfo",
          "old_text": null,
          "new_text": "histogramTransferInfo(pInputInfo, pInfo)",
          "old_line_content": "  }",
          "new_line_content": "    histogramTransferInfo(pInputInfo, pInfo);",
          "content_same": false
        },
        {
          "line": 4498,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  return TSDB_CODE_SUCCESS;",
          "new_line_content": "  SET_VAL(GET_RES_INFO(pCtx), pInfo->numOfBins, pInfo->numOfBins);",
          "content_same": false
        },
        {
          "line": 4504,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  int32_t              slotId = pCtx->pExpr->base.resSchema.slotId;",
          "new_line_content": "  SHistoFuncInfo*      pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "content_same": false
        },
        {
          "line": 4506,
          "old_api": null,
          "new_api": "taosArrayGet",
          "old_text": null,
          "new_text": "taosArrayGet(pBlock->pDataBlock, slotId)",
          "old_line_content": "",
          "new_line_content": "  SColumnInfoData*     pCol = taosArrayGet(pBlock->pDataBlock, slotId);",
          "content_same": false
        },
        {
          "line": 4524,
          "old_api": null,
          "new_api": "varDataVal",
          "old_text": null,
          "new_text": "varDataVal(buf)",
          "old_line_content": "                    pInfo->bins[i].lower, pInfo->bins[i].upper, pInfo->bins[i].count);",
          "new_line_content": "      len = sprintf(varDataVal(buf), \"{\\\"lower_bin\\\":%g, \\\"upper_bin\\\":%g, \\\"count\\\":%\" PRId64 \"}\",",
          "content_same": false
        },
        {
          "line": 4527,
          "old_api": null,
          "new_api": "varDataVal",
          "old_text": null,
          "new_text": "varDataVal(buf)",
          "old_line_content": "                    pInfo->bins[i].upper, pInfo->bins[i].percentage);",
          "new_line_content": "      len = sprintf(varDataVal(buf), \"{\\\"lower_bin\\\":%g, \\\"upper_bin\\\":%g, \\\"count\\\":%lf}\", pInfo->bins[i].lower,",
          "content_same": false
        },
        {
          "line": 4531,
          "old_api": null,
          "new_api": "colDataAppend",
          "old_text": null,
          "new_text": "colDataAppend(pCol, currentRow, buf, false)",
          "old_line_content": "    currentRow++;",
          "new_line_content": "    colDataAppend(pCol, currentRow, buf, false);",
          "content_same": false
        },
        {
          "line": 4542,
          "old_api": null,
          "new_api": "taosMemoryCalloc",
          "old_text": null,
          "new_text": "taosMemoryCalloc(resultBytes + VARSTR_HEADER_SIZE, sizeof(char))",
          "old_line_content": "",
          "new_line_content": "  char*                res = taosMemoryCalloc(resultBytes + VARSTR_HEADER_SIZE, sizeof(char));",
          "content_same": false
        },
        {
          "line": 4545,
          "old_api": null,
          "new_api": "varDataSetLen",
          "old_text": null,
          "new_text": "varDataSetLen(res, resultBytes)",
          "old_line_content": "",
          "new_line_content": "  varDataSetLen(res, resultBytes);",
          "content_same": false
        },
        {
          "line": 4548,
          "old_api": null,
          "new_api": "taosArrayGet",
          "old_text": null,
          "new_text": "taosArrayGet(pBlock->pDataBlock, slotId)",
          "old_line_content": "",
          "new_line_content": "  SColumnInfoData* pCol = taosArrayGet(pBlock->pDataBlock, slotId);",
          "content_same": false
        },
        {
          "line": 4550,
          "old_api": null,
          "new_api": "colDataAppend",
          "old_text": null,
          "new_text": "colDataAppend(pCol, pBlock->info.rows, res, false)",
          "old_line_content": "",
          "new_line_content": "  colDataAppend(pCol, pBlock->info.rows, res, false);",
          "content_same": false
        },
        {
          "line": 4552,
          "old_api": null,
          "new_api": "taosMemoryFree",
          "old_text": null,
          "new_text": "taosMemoryFree(res)",
          "old_line_content": "  return pResInfo->numOfRes;",
          "new_line_content": "  taosMemoryFree(res);",
          "content_same": false
        },
        {
          "line": 4558,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pDResInfo)",
          "old_line_content": "",
          "new_line_content": "  SHistoFuncInfo*      pDBuf = GET_ROWCELL_INTERBUF(pDResInfo);",
          "content_same": false
        },
        {
          "line": 4561,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pSResInfo)",
          "old_line_content": "",
          "new_line_content": "  SHistoFuncInfo*      pSBuf = GET_ROWCELL_INTERBUF(pSResInfo);",
          "content_same": false
        },
        {
          "line": 4564,
          "old_api": null,
          "new_api": "TMAX",
          "old_text": null,
          "new_text": "TMAX(pDResInfo->numOfRes, pSResInfo->numOfRes)",
          "old_line_content": "  pDResInfo->isNullRes &= pSResInfo->isNullRes;",
          "new_line_content": "  pDResInfo->numOfRes = TMAX(pDResInfo->numOfRes, pSResInfo->numOfRes);",
          "content_same": false
        },
        {
          "line": 4577,
          "old_api": null,
          "new_api": "MurmurHash3_64",
          "old_text": null,
          "new_text": "MurmurHash3_64(data, bytes)",
          "old_line_content": "  int32_t  index = hash & HLL_BUCKET_MASK;",
          "new_line_content": "  uint64_t hash = MurmurHash3_64(data, bytes);",
          "content_same": false
        },
        {
          "line": 4618,
          "old_api": null,
          "new_api": "sqrt",
          "old_text": null,
          "new_text": "sqrt(x)",
          "old_line_content": "    zPrime = z;",
          "new_line_content": "    x = sqrt(x);",
          "content_same": false
        },
        {
          "line": 4621,
          "old_api": null,
          "new_api": "pow",
          "old_text": null,
          "new_text": "pow(1 - x, 2)",
          "old_line_content": "  } while (zPrime != z);",
          "new_line_content": "    z -= pow(1 - x, 2) * y;",
          "content_same": false
        },
        {
          "line": 4645,
          "old_api": null,
          "new_api": "hllBucketHisto",
          "old_text": null,
          "new_text": "hllBucketHisto(buckets, buckethisto)",
          "old_line_content": "",
          "new_line_content": "  hllBucketHisto(buckets, buckethisto);",
          "content_same": false
        },
        {
          "line": 4647,
          "old_api": null,
          "new_api": "hllTau",
          "old_text": null,
          "new_text": "hllTau((m - buckethisto[HLL_DATA_BITS + 1]) / (double)m)",
          "old_line_content": "  for (int j = HLL_DATA_BITS; j >= 1; --j) {",
          "new_line_content": "  double z = m * hllTau((m - buckethisto[HLL_DATA_BITS + 1]) / (double)m);",
          "content_same": false
        },
        {
          "line": 4654,
          "old_api": null,
          "new_api": "llroundl",
          "old_text": null,
          "new_text": "llroundl(HLL_ALPHA_INF * m * m / z)",
          "old_line_content": "",
          "new_line_content": "  double E = (double)llroundl(HLL_ALPHA_INF * m * m / z);",
          "content_same": false
        },
        {
          "line": 4660,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "",
          "new_line_content": "  SHLLInfo* pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "content_same": false
        },
        {
          "line": 4673,
          "old_api": null,
          "new_api": "colDataIsNull_s",
          "old_text": null,
          "new_text": "colDataIsNull_s(pCol, i)",
          "old_line_content": "      continue;",
          "new_line_content": "    if (pCol->hasNull && colDataIsNull_s(pCol, i)) {",
          "content_same": false
        },
        {
          "line": 4682,
          "old_api": null,
          "new_api": "varDataVal",
          "old_text": null,
          "new_text": "varDataVal(data)",
          "old_line_content": "    }",
          "new_line_content": "      data = varDataVal(data);",
          "content_same": false
        },
        {
          "line": 4686,
          "old_api": null,
          "new_api": "hllCountNum",
          "old_text": null,
          "new_text": "hllCountNum(data, bytes, &index)",
          "old_line_content": "    uint8_t oldcount = pInfo->buckets[index];",
          "new_line_content": "    uint8_t count = hllCountNum(data, bytes, &index);",
          "content_same": false
        },
        {
          "line": 4696,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  } else {",
          "new_line_content": "    SET_VAL(GET_RES_INFO(pCtx), 0, 1);",
          "content_same": false
        },
        {
          "line": 4698,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  }",
          "new_line_content": "    SET_VAL(GET_RES_INFO(pCtx), 1, 1);",
          "content_same": false
        },
        {
          "line": 4716,
          "old_api": null,
          "new_api": "ASSERT",
          "old_text": null,
          "new_text": "ASSERT(pCol->info.type == TSDB_DATA_TYPE_BINARY)",
          "old_line_content": "",
          "new_line_content": "  ASSERT(pCol->info.type == TSDB_DATA_TYPE_BINARY);",
          "content_same": false
        },
        {
          "line": 4718,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "",
          "new_line_content": "  SHLLInfo* pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "content_same": false
        },
        {
          "line": 4725,
          "old_api": null,
          "new_api": "hllTransferInfo",
          "old_text": null,
          "new_text": "hllTransferInfo(pInputInfo, pInfo)",
          "old_line_content": "  }",
          "new_line_content": "    hllTransferInfo(pInputInfo, pInfo);",
          "content_same": false
        },
        {
          "line": 4729,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  } else {",
          "new_line_content": "    SET_VAL(GET_RES_INFO(pCtx), 0, 1);",
          "content_same": false
        },
        {
          "line": 4731,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  }",
          "new_line_content": "    SET_VAL(GET_RES_INFO(pCtx), 1, 1);",
          "content_same": false
        },
        {
          "line": 4738,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "",
          "new_line_content": "  SResultRowEntryInfo* pInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 4741,
          "old_api": null,
          "new_api": "hllCountCnt",
          "old_text": null,
          "new_text": "hllCountCnt(pHllInfo->buckets)",
          "old_line_content": "  if (tsCountAlwaysReturnValue && pHllInfo->result == 0) {",
          "new_line_content": "  pHllInfo->result = hllCountCnt(pHllInfo->buckets);",
          "content_same": false
        },
        {
          "line": 4746,
          "old_api": null,
          "new_api": "functionFinalize",
          "old_text": null,
          "new_text": "functionFinalize(pCtx, pBlock)",
          "old_line_content": "}",
          "new_line_content": "  return functionFinalize(pCtx, pBlock);",
          "content_same": false
        },
        {
          "line": 4753,
          "old_api": null,
          "new_api": "taosMemoryCalloc",
          "old_text": null,
          "new_text": "taosMemoryCalloc(resultBytes + VARSTR_HEADER_SIZE, sizeof(char))",
          "old_line_content": "",
          "new_line_content": "  char*                res = taosMemoryCalloc(resultBytes + VARSTR_HEADER_SIZE, sizeof(char));",
          "content_same": false
        },
        {
          "line": 4756,
          "old_api": null,
          "new_api": "varDataSetLen",
          "old_text": null,
          "new_text": "varDataSetLen(res, resultBytes)",
          "old_line_content": "",
          "new_line_content": "  varDataSetLen(res, resultBytes);",
          "content_same": false
        },
        {
          "line": 4759,
          "old_api": null,
          "new_api": "taosArrayGet",
          "old_text": null,
          "new_text": "taosArrayGet(pBlock->pDataBlock, slotId)",
          "old_line_content": "",
          "new_line_content": "  SColumnInfoData* pCol = taosArrayGet(pBlock->pDataBlock, slotId);",
          "content_same": false
        },
        {
          "line": 4761,
          "old_api": null,
          "new_api": "colDataAppend",
          "old_text": null,
          "new_text": "colDataAppend(pCol, pBlock->info.rows, res, false)",
          "old_line_content": "",
          "new_line_content": "  colDataAppend(pCol, pBlock->info.rows, res, false);",
          "content_same": false
        },
        {
          "line": 4763,
          "old_api": null,
          "new_api": "taosMemoryFree",
          "old_text": null,
          "new_text": "taosMemoryFree(res)",
          "old_line_content": "  return pResInfo->numOfRes;",
          "new_line_content": "  taosMemoryFree(res);",
          "content_same": false
        },
        {
          "line": 4769,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pDResInfo)",
          "old_line_content": "",
          "new_line_content": "  SHLLInfo*            pDBuf = GET_ROWCELL_INTERBUF(pDResInfo);",
          "content_same": false
        },
        {
          "line": 4772,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pSResInfo)",
          "old_line_content": "",
          "new_line_content": "  SHLLInfo*            pSBuf = GET_ROWCELL_INTERBUF(pSResInfo);",
          "content_same": false
        },
        {
          "line": 4775,
          "old_api": null,
          "new_api": "TMAX",
          "old_text": null,
          "new_text": "TMAX(pDResInfo->numOfRes, pSResInfo->numOfRes)",
          "old_line_content": "  pDResInfo->isNullRes &= pSResInfo->isNullRes;",
          "new_line_content": "  pDResInfo->numOfRes = TMAX(pDResInfo->numOfRes, pSResInfo->numOfRes);",
          "content_same": false
        },
        {
          "line": 4787,
          "old_api": null,
          "new_api": "strncasecmp",
          "old_text": null,
          "new_text": "strncasecmp(opStr, \"LT\", 2)",
          "old_line_content": "    opType = STATE_OPER_LT;",
          "new_line_content": "  if (strncasecmp(opStr, \"LT\", 2) == 0) {",
          "content_same": false
        },
        {
          "line": 4789,
          "old_api": null,
          "new_api": "strncasecmp",
          "old_text": null,
          "new_text": "strncasecmp(opStr, \"GT\", 2)",
          "old_line_content": "    opType = STATE_OPER_GT;",
          "new_line_content": "  } else if (strncasecmp(opStr, \"GT\", 2) == 0) {",
          "content_same": false
        },
        {
          "line": 4791,
          "old_api": null,
          "new_api": "strncasecmp",
          "old_text": null,
          "new_text": "strncasecmp(opStr, \"LE\", 2)",
          "old_line_content": "    opType = STATE_OPER_LE;",
          "new_line_content": "  } else if (strncasecmp(opStr, \"LE\", 2) == 0) {",
          "content_same": false
        },
        {
          "line": 4793,
          "old_api": null,
          "new_api": "strncasecmp",
          "old_text": null,
          "new_text": "strncasecmp(opStr, \"GE\", 2)",
          "old_line_content": "    opType = STATE_OPER_GE;",
          "new_line_content": "  } else if (strncasecmp(opStr, \"GE\", 2) == 0) {",
          "content_same": false
        },
        {
          "line": 4795,
          "old_api": null,
          "new_api": "strncasecmp",
          "old_text": null,
          "new_text": "strncasecmp(opStr, \"NE\", 2)",
          "old_line_content": "    opType = STATE_OPER_NE;",
          "new_line_content": "  } else if (strncasecmp(opStr, \"NE\", 2) == 0) {",
          "content_same": false
        },
        {
          "line": 4797,
          "old_api": null,
          "new_api": "strncasecmp",
          "old_text": null,
          "new_text": "strncasecmp(opStr, \"EQ\", 2)",
          "old_line_content": "    opType = STATE_OPER_EQ;",
          "new_line_content": "  } else if (strncasecmp(opStr, \"EQ\", 2) == 0) {",
          "content_same": false
        },
        {
          "line": 4807,
          "old_api": null,
          "new_api": "colDataGetData",
          "old_text": null,
          "new_text": "colDataGetData(pCol, index)",
          "old_line_content": "  switch (pCol->info.type) {",
          "new_line_content": "  char* data = colDataGetData(pCol, index);",
          "content_same": false
        },
        {
          "line": 4811,
          "old_api": null,
          "new_api": "STATE_COMP",
          "old_text": null,
          "new_text": "STATE_COMP(op, v, param)",
          "old_line_content": "      break;",
          "new_line_content": "      STATE_COMP(op, v, param);",
          "content_same": false
        },
        {
          "line": 4816,
          "old_api": null,
          "new_api": "STATE_COMP",
          "old_text": null,
          "new_text": "STATE_COMP(op, v, param)",
          "old_line_content": "      break;",
          "new_line_content": "      STATE_COMP(op, v, param);",
          "content_same": false
        },
        {
          "line": 4821,
          "old_api": null,
          "new_api": "STATE_COMP",
          "old_text": null,
          "new_text": "STATE_COMP(op, v, param)",
          "old_line_content": "      break;",
          "new_line_content": "      STATE_COMP(op, v, param);",
          "content_same": false
        },
        {
          "line": 4826,
          "old_api": null,
          "new_api": "STATE_COMP",
          "old_text": null,
          "new_text": "STATE_COMP(op, v, param)",
          "old_line_content": "      break;",
          "new_line_content": "      STATE_COMP(op, v, param);",
          "content_same": false
        },
        {
          "line": 4831,
          "old_api": null,
          "new_api": "STATE_COMP",
          "old_text": null,
          "new_text": "STATE_COMP(op, v, param)",
          "old_line_content": "      break;",
          "new_line_content": "      STATE_COMP(op, v, param);",
          "content_same": false
        },
        {
          "line": 4836,
          "old_api": null,
          "new_api": "STATE_COMP",
          "old_text": null,
          "new_text": "STATE_COMP(op, v, param)",
          "old_line_content": "      break;",
          "new_line_content": "      STATE_COMP(op, v, param);",
          "content_same": false
        },
        {
          "line": 4841,
          "old_api": null,
          "new_api": "STATE_COMP",
          "old_text": null,
          "new_text": "STATE_COMP(op, v, param)",
          "old_line_content": "      break;",
          "new_line_content": "      STATE_COMP(op, v, param);",
          "content_same": false
        },
        {
          "line": 4846,
          "old_api": null,
          "new_api": "STATE_COMP",
          "old_text": null,
          "new_text": "STATE_COMP(op, v, param)",
          "old_line_content": "      break;",
          "new_line_content": "      STATE_COMP(op, v, param);",
          "content_same": false
        },
        {
          "line": 4851,
          "old_api": null,
          "new_api": "STATE_COMP",
          "old_text": null,
          "new_text": "STATE_COMP(op, v, param)",
          "old_line_content": "      break;",
          "new_line_content": "      STATE_COMP(op, v, param);",
          "content_same": false
        },
        {
          "line": 4856,
          "old_api": null,
          "new_api": "STATE_COMP",
          "old_text": null,
          "new_text": "STATE_COMP(op, v, param)",
          "old_line_content": "      break;",
          "new_line_content": "      STATE_COMP(op, v, param);",
          "content_same": false
        },
        {
          "line": 4860,
          "old_api": null,
          "new_api": "ASSERT",
          "old_text": null,
          "new_text": "ASSERT(0)",
          "old_line_content": "    }",
          "new_line_content": "      ASSERT(0);",
          "content_same": false
        },
        {
          "line": 4868,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "",
          "new_line_content": "  SStateInfo*          pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 4877,
          "old_api": null,
          "new_api": "varDataVal",
          "old_text": null,
          "new_text": "varDataVal(pCtx->param[1].param.pz)",
          "old_line_content": "  if (STATE_OPER_INVALID == op) {",
          "new_line_content": "  int8_t op = getStateOpType(varDataVal(pCtx->param[1].param.pz));",
          "content_same": false
        },
        {
          "line": 4885,
          "old_api": null,
          "new_api": "colDataAppendNULL",
          "old_text": null,
          "new_text": "colDataAppendNULL(pOutput, i)",
          "old_line_content": "      // handle selectivity",
          "new_line_content": "      colDataAppendNULL(pOutput, i);",
          "content_same": false
        },
        {
          "line": 4888,
          "old_api": null,
          "new_api": "appendSelectivityValue",
          "old_text": null,
          "new_text": "appendSelectivityValue(pCtx, i, pCtx->offset + numOfElems - 1)",
          "old_line_content": "      }",
          "new_line_content": "        appendSelectivityValue(pCtx, i, pCtx->offset + numOfElems - 1);",
          "content_same": false
        },
        {
          "line": 4893,
          "old_api": null,
          "new_api": "checkStateOp",
          "old_text": null,
          "new_text": "checkStateOp(op, pInputCol, i, pCtx->param[2].param)",
          "old_line_content": "",
          "new_line_content": "    bool ret = checkStateOp(op, pInputCol, i, pCtx->param[2].param);",
          "content_same": false
        },
        {
          "line": 4901,
          "old_api": null,
          "new_api": "colDataAppend",
          "old_text": null,
          "new_text": "colDataAppend(pOutput, pCtx->offset + numOfElems - 1, (char*)&output, false)",
          "old_line_content": "",
          "new_line_content": "    colDataAppend(pOutput, pCtx->offset + numOfElems - 1, (char*)&output, false);",
          "content_same": false
        },
        {
          "line": 4905,
          "old_api": null,
          "new_api": "appendSelectivityValue",
          "old_text": null,
          "new_text": "appendSelectivityValue(pCtx, i, pCtx->offset + numOfElems - 1)",
          "old_line_content": "    }",
          "new_line_content": "      appendSelectivityValue(pCtx, i, pCtx->offset + numOfElems - 1);",
          "content_same": false
        },
        {
          "line": 4914,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "",
          "new_line_content": "  SStateInfo*          pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 4930,
          "old_api": null,
          "new_api": "varDataVal",
          "old_text": null,
          "new_text": "varDataVal(pCtx->param[1].param.pz)",
          "old_line_content": "  if (STATE_OPER_INVALID == op) {",
          "new_line_content": "  int8_t op = getStateOpType(varDataVal(pCtx->param[1].param.pz));",
          "content_same": false
        },
        {
          "line": 4938,
          "old_api": null,
          "new_api": "colDataAppendNULL",
          "old_text": null,
          "new_text": "colDataAppendNULL(pOutput, i)",
          "old_line_content": "      // handle selectivity",
          "new_line_content": "      colDataAppendNULL(pOutput, i);",
          "content_same": false
        },
        {
          "line": 4941,
          "old_api": null,
          "new_api": "appendSelectivityValue",
          "old_text": null,
          "new_text": "appendSelectivityValue(pCtx, i, pCtx->offset + numOfElems - 1)",
          "old_line_content": "      }",
          "new_line_content": "        appendSelectivityValue(pCtx, i, pCtx->offset + numOfElems - 1);",
          "content_same": false
        },
        {
          "line": 4946,
          "old_api": null,
          "new_api": "checkStateOp",
          "old_text": null,
          "new_text": "checkStateOp(op, pInputCol, i, pCtx->param[2].param)",
          "old_line_content": "    int64_t output = -1;",
          "new_line_content": "    bool    ret = checkStateOp(op, pInputCol, i, pCtx->param[2].param);",
          "content_same": false
        },
        {
          "line": 4958,
          "old_api": null,
          "new_api": "colDataAppend",
          "old_text": null,
          "new_text": "colDataAppend(pOutput, pCtx->offset + numOfElems - 1, (char*)&output, false)",
          "old_line_content": "",
          "new_line_content": "    colDataAppend(pOutput, pCtx->offset + numOfElems - 1, (char*)&output, false);",
          "content_same": false
        },
        {
          "line": 4962,
          "old_api": null,
          "new_api": "appendSelectivityValue",
          "old_text": null,
          "new_text": "appendSelectivityValue(pCtx, i, pCtx->offset + numOfElems - 1)",
          "old_line_content": "    }",
          "new_line_content": "      appendSelectivityValue(pCtx, i, pCtx->offset + numOfElems - 1);",
          "content_same": false
        },
        {
          "line": 4976,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "",
          "new_line_content": "  SSumRes*             pSumRes = GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 4988,
          "old_api": null,
          "new_api": "colDataIsNull_f",
          "old_text": null,
          "new_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "old_line_content": "      // colDataAppendNULL(pOutput, i);",
          "new_line_content": "    if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "content_same": false
        },
        {
          "line": 4994,
          "old_api": null,
          "new_api": "IS_SIGNED_NUMERIC_TYPE",
          "old_text": null,
          "new_text": "IS_SIGNED_NUMERIC_TYPE(type)",
          "old_line_content": "      int64_t v;",
          "new_line_content": "    if (IS_SIGNED_NUMERIC_TYPE(type)) {",
          "content_same": false
        },
        {
          "line": 4999,
          "old_api": null,
          "new_api": "IS_UNSIGNED_NUMERIC_TYPE",
          "old_text": null,
          "new_text": "IS_UNSIGNED_NUMERIC_TYPE(type)",
          "old_line_content": "      uint64_t v;",
          "new_line_content": "    } else if (IS_UNSIGNED_NUMERIC_TYPE(type)) {",
          "content_same": false
        },
        {
          "line": 5004,
          "old_api": null,
          "new_api": "IS_FLOAT_TYPE",
          "old_text": null,
          "new_text": "IS_FLOAT_TYPE(type)",
          "old_line_content": "      double v;",
          "new_line_content": "    } else if (IS_FLOAT_TYPE(type)) {",
          "content_same": false
        },
        {
          "line": 5010,
          "old_api": null,
          "new_api": "colDataAppendNULL",
          "old_text": null,
          "new_text": "colDataAppendNULL(pOutput, pos)",
          "old_line_content": "      } else {",
          "new_line_content": "        colDataAppendNULL(pOutput, pos);",
          "content_same": false
        },
        {
          "line": 5012,
          "old_api": null,
          "new_api": "colDataAppend",
          "old_text": null,
          "new_text": "colDataAppend(pOutput, pos, (char*)&pSumRes->dsum, false)",
          "old_line_content": "      }",
          "new_line_content": "        colDataAppend(pOutput, pos, (char*)&pSumRes->dsum, false);",
          "content_same": false
        },
        {
          "line": 5018,
          "old_api": null,
          "new_api": "appendSelectivityValue",
          "old_text": null,
          "new_text": "appendSelectivityValue(pCtx, i, pos)",
          "old_line_content": "    }",
          "new_line_content": "      appendSelectivityValue(pCtx, i, pos);",
          "content_same": false
        },
        {
          "line": 5033,
          "old_api": null,
          "new_api": "functionSetup",
          "old_text": null,
          "new_text": "functionSetup(pCtx, pResultInfo)",
          "old_line_content": "    return false;",
          "new_line_content": "  if (!functionSetup(pCtx, pResultInfo)) {",
          "content_same": false
        },
        {
          "line": 5037,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResultInfo)",
          "old_line_content": "  pInfo->pos = 0;",
          "new_line_content": "  SMavgInfo* pInfo = GET_ROWCELL_INTERBUF(pResultInfo);",
          "content_same": false
        },
        {
          "line": 5051,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "",
          "new_line_content": "  SMavgInfo*           pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 3012,
          "old_api": null,
          "new_api": "colDataIsNull",
          "old_text": null,
          "new_text": "colDataIsNull(pInputCol, pInput->totalRows, i, pColAgg)",
          "old_line_content": "      continue;",
          "new_line_content": "    if (pInputCol->hasNull && colDataIsNull(pInputCol, pInput->totalRows, i, pColAgg)) {",
          "content_same": false
        },
        {
          "line": 5064,
          "old_api": null,
          "new_api": "colDataIsNull_f",
          "old_text": null,
          "new_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "old_line_content": "      // colDataAppendNULL(pOutput, i);",
          "new_line_content": "    if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "content_same": false
        },
        {
          "line": 3021,
          "old_api": null,
          "new_api": "doSaveCurrentVal",
          "old_text": null,
          "new_text": "doSaveCurrentVal(pCtx, i, cts, pInputCol->info.type, data)",
          "old_line_content": "      pResInfo->numOfRes = 1;",
          "new_line_content": "      doSaveCurrentVal(pCtx, i, cts, pInputCol->info.type, data);",
          "content_same": false
        },
        {
          "line": 5069,
          "old_api": null,
          "new_api": "colDataGetData",
          "old_text": null,
          "new_text": "colDataGetData(pInputCol, i)",
          "old_line_content": "    double v;",
          "new_line_content": "    char*  data = colDataGetData(pInputCol, i);",
          "content_same": false
        },
        {
          "line": 3029,
          "old_api": null,
          "new_api": "firstlastSaveTupleData",
          "old_text": null,
          "new_text": "firstlastSaveTupleData(pCtx->pSrcBlock, pInput->startRowIndex, pCtx, pInfo)",
          "old_line_content": "  }",
          "new_line_content": "    firstlastSaveTupleData(pCtx->pSrcBlock, pInput->startRowIndex, pCtx, pInfo);",
          "content_same": false
        },
        {
          "line": 3031,
          "old_api": null,
          "new_api": "SET_VAL",
          "old_text": null,
          "new_text": "SET_VAL(pResInfo, numOfElems, 1)",
          "old_line_content": "  return TSDB_CODE_SUCCESS;",
          "new_line_content": "  SET_VAL(pResInfo, numOfElems, 1);",
          "content_same": false
        },
        {
          "line": 3039,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "",
          "new_line_content": "  SFirstLastRes*       pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 5088,
          "old_api": null,
          "new_api": "colDataAppendNULL",
          "old_text": null,
          "new_text": "colDataAppendNULL(pOutput, pos)",
          "old_line_content": "      } else {",
          "new_line_content": "        colDataAppendNULL(pOutput, pos);",
          "content_same": false
        },
        {
          "line": 5090,
          "old_api": null,
          "new_api": "colDataAppend",
          "old_text": null,
          "new_text": "colDataAppend(pOutput, pos, (char*)&result, false)",
          "old_line_content": "      }",
          "new_line_content": "        colDataAppend(pOutput, pos, (char*)&result, false);",
          "content_same": false
        },
        {
          "line": 5095,
          "old_api": null,
          "new_api": "appendSelectivityValue",
          "old_text": null,
          "new_text": "appendSelectivityValue(pCtx, i, pos)",
          "old_line_content": "      }",
          "new_line_content": "        appendSelectivityValue(pCtx, i, pos);",
          "content_same": false
        },
        {
          "line": 3050,
          "old_api": null,
          "new_api": "ASSERT",
          "old_text": null,
          "new_text": "ASSERT(pInputCol->hasNull == true)",
          "old_line_content": "    // save selectivity value for column consisted of all null values",
          "new_line_content": "    ASSERT(pInputCol->hasNull == true);",
          "content_same": false
        },
        {
          "line": 3052,
          "old_api": null,
          "new_api": "firstlastSaveTupleData",
          "old_text": null,
          "new_text": "firstlastSaveTupleData(pCtx->pSrcBlock, pInput->startRowIndex, pCtx, pInfo)",
          "old_line_content": "    return 0;",
          "new_line_content": "    firstlastSaveTupleData(pCtx->pSrcBlock, pInput->startRowIndex, pCtx, pInfo);",
          "content_same": false
        },
        {
          "line": 3059,
          "old_api": null,
          "new_api": "getRowPTs",
          "old_text": null,
          "new_text": "getRowPTs(pInput->pPTS, pInput->totalRows - 1)",
          "old_line_content": "",
          "new_line_content": "  TSKEY endKey = getRowPTs(pInput->pPTS, pInput->totalRows - 1);",
          "content_same": false
        },
        {
          "line": 5112,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "",
          "new_line_content": "  SSampleInfo*         pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 3067,
          "old_api": null,
          "new_api": "colDataIsNull",
          "old_text": null,
          "new_text": "colDataIsNull(pInputCol, pInput->totalRows, i, pColAgg)",
          "old_line_content": "        continue;",
          "new_line_content": "      if (pInputCol->hasNull && colDataIsNull(pInputCol, pInput->totalRows, i, pColAgg)) {",
          "content_same": false
        },
        {
          "line": 3074,
          "old_api": null,
          "new_api": "getRowPTs",
          "old_text": null,
          "new_text": "getRowPTs(pInput->pPTS, i)",
          "old_line_content": "      if (pResInfo->numOfRes == 0 || pInfo->ts < cts) {",
          "new_line_content": "      TSKEY cts = getRowPTs(pInput->pPTS, i);",
          "content_same": false
        },
        {
          "line": 5122,
          "old_api": null,
          "new_api": "nodesListGetNode",
          "old_text": null,
          "new_text": "nodesListGetNode(pFunc->pParameterList, 1)",
          "old_line_content": "  int32_t      numOfSamples = pVal->datum.i;",
          "new_line_content": "  SValueNode*  pVal = (SValueNode*)nodesListGetNode(pFunc->pParameterList, 1);",
          "content_same": false
        },
        {
          "line": 3076,
          "old_api": null,
          "new_api": "doSaveCurrentVal",
          "old_text": null,
          "new_text": "doSaveCurrentVal(pCtx, i, cts, type, data)",
          "old_line_content": "      }",
          "new_line_content": "        doSaveCurrentVal(pCtx, i, cts, type, data);",
          "content_same": false
        },
        {
          "line": 5129,
          "old_api": null,
          "new_api": "functionSetup",
          "old_text": null,
          "new_text": "functionSetup(pCtx, pResultInfo)",
          "old_line_content": "    return false;",
          "new_line_content": "  if (!functionSetup(pCtx, pResultInfo)) {",
          "content_same": false
        },
        {
          "line": 3083,
          "old_api": null,
          "new_api": "colDataIsNull",
          "old_text": null,
          "new_text": "colDataIsNull(pInputCol, pInput->totalRows, i, pColAgg)",
          "old_line_content": "        continue;",
          "new_line_content": "      if (pInputCol->hasNull && colDataIsNull(pInputCol, pInput->totalRows, i, pColAgg)) {",
          "content_same": false
        },
        {
          "line": 5133,
          "old_api": null,
          "new_api": "taosSafeRand",
          "old_text": null,
          "new_text": "taosSafeRand()",
          "old_line_content": "",
          "new_line_content": "  taosSeedRand(taosSafeRand());",
          "content_same": false
        },
        {
          "line": 5135,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResultInfo)",
          "old_line_content": "  pInfo->samples = pCtx->param[1].param.i;",
          "new_line_content": "  SSampleInfo* pInfo = GET_ROWCELL_INTERBUF(pResultInfo);",
          "content_same": false
        },
        {
          "line": 3090,
          "old_api": null,
          "new_api": "getRowPTs",
          "old_text": null,
          "new_text": "getRowPTs(pInput->pPTS, i)",
          "old_line_content": "      if (pResInfo->numOfRes == 0 || pInfo->ts < cts) {",
          "new_line_content": "      TSKEY cts = getRowPTs(pInput->pPTS, i);",
          "content_same": false
        },
        {
          "line": 3092,
          "old_api": null,
          "new_api": "doSaveCurrentVal",
          "old_text": null,
          "new_text": "doSaveCurrentVal(pCtx, i, cts, type, data)",
          "old_line_content": "      }",
          "new_line_content": "        doSaveCurrentVal(pCtx, i, cts, type, data);",
          "content_same": false
        },
        {
          "line": 3100,
          "old_api": null,
          "new_api": "colDataIsNull",
          "old_text": null,
          "new_text": "colDataIsNull(pInputCol, pInput->totalRows, i, pColAgg)",
          "old_line_content": "      continue;",
          "new_line_content": "    if (pInputCol->hasNull && colDataIsNull(pInputCol, pInput->totalRows, i, pColAgg)) {",
          "content_same": false
        },
        {
          "line": 5150,
          "old_api": null,
          "new_api": "assignVal",
          "old_text": null,
          "new_text": "assignVal(pInfo->data + index * pInfo->colBytes, data, pInfo->colBytes, pInfo->colType)",
          "old_line_content": "}",
          "new_line_content": "  assignVal(pInfo->data + index * pInfo->colBytes, data, pInfo->colBytes, pInfo->colType);",
          "content_same": false
        },
        {
          "line": 3106,
          "old_api": null,
          "new_api": "colDataGetData",
          "old_text": null,
          "new_text": "colDataGetData(pInputCol, i)",
          "old_line_content": "    TSKEY cts = pts[i];",
          "new_line_content": "    char* data = colDataGetData(pInputCol, i);",
          "content_same": false
        },
        {
          "line": 5156,
          "old_api": null,
          "new_api": "sampleAssignResult",
          "old_text": null,
          "new_text": "sampleAssignResult(pInfo, data, pInfo->numSampled)",
          "old_line_content": "    if (pCtx->subsidiaries.num > 0) {",
          "new_line_content": "    sampleAssignResult(pInfo, data, pInfo->numSampled);",
          "content_same": false
        },
        {
          "line": 3109,
          "old_api": null,
          "new_api": "doSaveCurrentVal",
          "old_text": null,
          "new_text": "doSaveCurrentVal(pCtx, i, cts, type, data)",
          "old_line_content": "      pResInfo->numOfRes = 1;",
          "new_line_content": "      doSaveCurrentVal(pCtx, i, cts, type, data);",
          "content_same": false
        },
        {
          "line": 5158,
          "old_api": null,
          "new_api": "saveTupleData",
          "old_text": null,
          "new_text": "saveTupleData(pCtx, index, pCtx->pSrcBlock, NULL)",
          "old_line_content": "    }",
          "new_line_content": "      pInfo->tuplePos[pInfo->numSampled] = saveTupleData(pCtx, index, pCtx->pSrcBlock, NULL);",
          "content_same": false
        },
        {
          "line": 5162,
          "old_api": null,
          "new_api": "taosRand",
          "old_text": null,
          "new_text": "taosRand()",
          "old_line_content": "    if (j < pInfo->samples) {",
          "new_line_content": "    int32_t j = taosRand() % (pInfo->totalPoints);",
          "content_same": false
        },
        {
          "line": 5164,
          "old_api": null,
          "new_api": "sampleAssignResult",
          "old_text": null,
          "new_text": "sampleAssignResult(pInfo, data, j)",
          "old_line_content": "      if (pCtx->subsidiaries.num > 0) {",
          "new_line_content": "      sampleAssignResult(pInfo, data, j);",
          "content_same": false
        },
        {
          "line": 3117,
          "old_api": null,
          "new_api": "firstlastSaveTupleData",
          "old_text": null,
          "new_text": "firstlastSaveTupleData(pCtx->pSrcBlock, pInput->startRowIndex, pCtx, pInfo)",
          "old_line_content": "  }",
          "new_line_content": "    firstlastSaveTupleData(pCtx->pSrcBlock, pInput->startRowIndex, pCtx, pInfo);",
          "content_same": false
        },
        {
          "line": 5166,
          "old_api": null,
          "new_api": "updateTupleData",
          "old_text": null,
          "new_text": "updateTupleData(pCtx, index, pCtx->pSrcBlock, &pInfo->tuplePos[j])",
          "old_line_content": "      }",
          "new_line_content": "        updateTupleData(pCtx, index, pCtx->pSrcBlock, &pInfo->tuplePos[j]);",
          "content_same": false
        },
        {
          "line": 3119,
          "old_api": null,
          "new_api": "SET_VAL",
          "old_text": null,
          "new_text": "SET_VAL(pResInfo, numOfElems, 1)",
          "old_line_content": "  return TSDB_CODE_SUCCESS;",
          "new_line_content": "  SET_VAL(pResInfo, numOfElems, 1);",
          "content_same": false
        },
        {
          "line": 5174,
          "old_api": null,
          "new_api": "getSampleOutputInfo",
          "old_text": null,
          "new_text": "getSampleOutputInfo(pCtx)",
          "old_line_content": "",
          "new_line_content": "  SSampleInfo*         pInfo = getSampleOutputInfo(pCtx);",
          "content_same": false
        },
        {
          "line": 5180,
          "old_api": null,
          "new_api": "colDataIsNull_s",
          "old_text": null,
          "new_text": "colDataIsNull_s(pInputCol, i)",
          "old_line_content": "      continue;",
          "new_line_content": "    if (colDataIsNull_s(pInputCol, i)) {",
          "content_same": false
        },
        {
          "line": 5185,
          "old_api": null,
          "new_api": "doReservoirSample",
          "old_text": null,
          "new_text": "doReservoirSample(pCtx, pInfo, data, i)",
          "old_line_content": "  }",
          "new_line_content": "    doReservoirSample(pCtx, pInfo, data, i);",
          "content_same": false
        },
        {
          "line": 5189,
          "old_api": null,
          "new_api": "saveTupleData",
          "old_text": null,
          "new_text": "saveTupleData(pCtx, pInput->startRowIndex, pCtx->pSrcBlock, NULL)",
          "old_line_content": "    pInfo->nullTupleSaved = true;",
          "new_line_content": "    pInfo->nullTuplePos = saveTupleData(pCtx, pInput->startRowIndex, pCtx->pSrcBlock, NULL);",
          "content_same": false
        },
        {
          "line": 3142,
          "old_api": null,
          "new_api": "firstlastSaveTupleData",
          "old_text": null,
          "new_text": "firstlastSaveTupleData(pCtx->pSrcBlock, rowIndex, pCtx, pOutput)",
          "old_line_content": "",
          "new_line_content": "  firstlastSaveTupleData(pCtx->pSrcBlock, rowIndex, pCtx, pOutput);",
          "content_same": false
        },
        {
          "line": 5193,
          "old_api": null,
          "new_api": "SET_VAL",
          "old_text": null,
          "new_text": "SET_VAL(pResInfo, pInfo->numSampled, pInfo->numSampled)",
          "old_line_content": "  return TSDB_CODE_SUCCESS;",
          "new_line_content": "  SET_VAL(pResInfo, pInfo->numSampled, pInfo->numSampled);",
          "content_same": false
        },
        {
          "line": 3150,
          "old_api": null,
          "new_api": "ASSERT",
          "old_text": null,
          "new_text": "ASSERT(pCol->info.type == TSDB_DATA_TYPE_BINARY)",
          "old_line_content": "",
          "new_line_content": "  ASSERT(pCol->info.type == TSDB_DATA_TYPE_BINARY);",
          "content_same": false
        },
        {
          "line": 5198,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "",
          "new_line_content": "  SResultRowEntryInfo* pEntryInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 3152,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "",
          "new_line_content": "  SFirstLastRes* pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "content_same": false
        },
        {
          "line": 5200,
          "old_api": null,
          "new_api": "getSampleOutputInfo",
          "old_text": null,
          "new_text": "getSampleOutputInfo(pCtx)",
          "old_line_content": "  pEntryInfo->complete = true;",
          "new_line_content": "  SSampleInfo* pInfo = getSampleOutputInfo(pCtx);",
          "content_same": false
        },
        {
          "line": 5204,
          "old_api": null,
          "new_api": "taosArrayGet",
          "old_text": null,
          "new_text": "taosArrayGet(pBlock->pDataBlock, slotId)",
          "old_line_content": "",
          "new_line_content": "  SColumnInfoData* pCol = taosArrayGet(pBlock->pDataBlock, slotId);",
          "content_same": false
        },
        {
          "line": 3160,
          "old_api": null,
          "new_api": "firstLastTransferInfo",
          "old_text": null,
          "new_text": "firstLastTransferInfo(pCtx, pInputInfo, pInfo, isFirstQuery, i)",
          "old_line_content": "    if (!numOfElems) {",
          "new_line_content": "    firstLastTransferInfo(pCtx, pInputInfo, pInfo, isFirstQuery, i);",
          "content_same": false
        },
        {
          "line": 5209,
          "old_api": null,
          "new_api": "setSelectivityValue",
          "old_text": null,
          "new_text": "setSelectivityValue(pCtx, pBlock, &pInfo->nullTuplePos, currentRow)",
          "old_line_content": "    return pInfo->numSampled;",
          "new_line_content": "    setSelectivityValue(pCtx, pBlock, &pInfo->nullTuplePos, currentRow);",
          "content_same": false
        },
        {
          "line": 3166,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  return TSDB_CODE_SUCCESS;",
          "new_line_content": "  SET_VAL(GET_RES_INFO(pCtx), numOfElems, 1);",
          "content_same": false
        },
        {
          "line": 5214,
          "old_api": null,
          "new_api": "setSelectivityValue",
          "old_text": null,
          "new_text": "setSelectivityValue(pCtx, pBlock, &pInfo->tuplePos[i], currentRow + i)",
          "old_line_content": "  }",
          "new_line_content": "    setSelectivityValue(pCtx, pBlock, &pInfo->tuplePos[i], currentRow + i);",
          "content_same": false
        },
        {
          "line": 3170,
          "old_api": null,
          "new_api": "firstLastFunctionMergeImpl",
          "old_text": null,
          "new_text": "firstLastFunctionMergeImpl(pCtx, true)",
          "old_line_content": "",
          "new_line_content": "int32_t firstFunctionMerge(SqlFunctionCtx* pCtx) { return firstLastFunctionMergeImpl(pCtx, true); }",
          "content_same": false
        },
        {
          "line": 3172,
          "old_api": null,
          "new_api": "firstLastFunctionMergeImpl",
          "old_text": null,
          "new_text": "firstLastFunctionMergeImpl(pCtx, false)",
          "old_line_content": "",
          "new_line_content": "int32_t lastFunctionMerge(SqlFunctionCtx* pCtx) { return firstLastFunctionMergeImpl(pCtx, false); }",
          "content_same": false
        },
        {
          "line": 3176,
          "old_api": null,
          "new_api": "taosArrayGet",
          "old_text": null,
          "new_text": "taosArrayGet(pBlock->pDataBlock, slotId)",
          "old_line_content": "",
          "new_line_content": "  SColumnInfoData* pCol = taosArrayGet(pBlock->pDataBlock, slotId);",
          "content_same": false
        },
        {
          "line": 5224,
          "old_api": null,
          "new_api": "nodesListGetNode",
          "old_text": null,
          "new_text": "nodesListGetNode(pFunc->pParameterList, 1)",
          "old_line_content": "  int32_t      numOfPoints = pVal->datum.i;",
          "new_line_content": "  SValueNode*  pVal = (SValueNode*)nodesListGetNode(pFunc->pParameterList, 1);",
          "content_same": false
        },
        {
          "line": 3178,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  pResInfo->isNullRes = (pResInfo->numOfRes == 0) ? 1 : 0;",
          "new_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 3182,
          "old_api": null,
          "new_api": "colDataAppend",
          "old_text": null,
          "new_text": "colDataAppend(pCol, pBlock->info.rows, pRes->buf, pRes->isNull || pResInfo->isNullRes)",
          "old_line_content": "",
          "new_line_content": "  colDataAppend(pCol, pBlock->info.rows, pRes->buf, pRes->isNull || pResInfo->isNullRes);",
          "content_same": false
        },
        {
          "line": 3185,
          "old_api": null,
          "new_api": "setSelectivityValue",
          "old_text": null,
          "new_text": "setSelectivityValue(pCtx, pBlock, &pRes->pos, pBlock->info.rows)",
          "old_line_content": "",
          "new_line_content": "  setSelectivityValue(pCtx, pBlock, &pRes->pos, pBlock->info.rows);",
          "content_same": false
        },
        {
          "line": 5233,
          "old_api": null,
          "new_api": "functionSetup",
          "old_text": null,
          "new_text": "functionSetup(pCtx, pResultInfo)",
          "old_line_content": "    return false;",
          "new_line_content": "  if (!functionSetup(pCtx, pResultInfo)) {",
          "content_same": false
        },
        {
          "line": 5237,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResultInfo)",
          "old_line_content": "  pInfo->numAdded = 0;",
          "new_line_content": "  STailInfo* pInfo = GET_ROWCELL_INTERBUF(pResultInfo);",
          "content_same": false
        },
        {
          "line": 3192,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pEntryInfo)",
          "old_line_content": "",
          "new_line_content": "  SFirstLastRes*       pRes = GET_ROWCELL_INTERBUF(pEntryInfo);",
          "content_same": false
        },
        {
          "line": 3194,
          "old_api": null,
          "new_api": "getFirstLastInfoSize",
          "old_text": null,
          "new_text": "getFirstLastInfoSize(pRes->bytes)",
          "old_line_content": "",
          "new_line_content": "  int32_t resultBytes = getFirstLastInfoSize(pRes->bytes);",
          "content_same": false
        },
        {
          "line": 3198,
          "old_api": null,
          "new_api": "varDataVal",
          "old_text": null,
          "new_text": "varDataVal(res)",
          "old_line_content": "",
          "new_line_content": "  memcpy(varDataVal(res), pRes, resultBytes);",
          "content_same": false
        },
        {
          "line": 3200,
          "old_api": null,
          "new_api": "varDataSetLen",
          "old_text": null,
          "new_text": "varDataSetLen(res, resultBytes)",
          "old_line_content": "",
          "new_line_content": "  varDataSetLen(res, resultBytes);",
          "content_same": false
        },
        {
          "line": 3203,
          "old_api": null,
          "new_api": "taosArrayGet",
          "old_text": null,
          "new_text": "taosArrayGet(pBlock->pDataBlock, slotId)",
          "old_line_content": "",
          "new_line_content": "  SColumnInfoData* pCol = taosArrayGet(pBlock->pDataBlock, slotId);",
          "content_same": false
        },
        {
          "line": 3206,
          "old_api": null,
          "new_api": "setSelectivityValue",
          "old_text": null,
          "new_text": "setSelectivityValue(pCtx, pBlock, &pRes->pos, pBlock->info.rows)",
          "old_line_content": "",
          "new_line_content": "  setSelectivityValue(pCtx, pBlock, &pRes->pos, pBlock->info.rows);",
          "content_same": false
        },
        {
          "line": 3208,
          "old_api": null,
          "new_api": "taosMemoryFree",
          "old_text": null,
          "new_text": "taosMemoryFree(res)",
          "old_line_content": "  return 1;",
          "new_line_content": "  taosMemoryFree(res);",
          "content_same": false
        },
        {
          "line": 3215,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pDResInfo)",
          "old_line_content": "  int32_t              bytes = pDBuf->bytes;",
          "new_line_content": "  SFirstLastRes*       pDBuf = GET_ROWCELL_INTERBUF(pDResInfo);",
          "content_same": false
        },
        {
          "line": 3219,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pSResInfo)",
          "old_line_content": "",
          "new_line_content": "  SFirstLastRes*       pSBuf = GET_ROWCELL_INTERBUF(pSResInfo);",
          "content_same": false
        },
        {
          "line": 3222,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(pDBuf->buf, pSBuf->buf, bytes)",
          "old_line_content": "    pDBuf->ts = pSBuf->ts;",
          "new_line_content": "    memcpy(pDBuf->buf, pSBuf->buf, bytes);",
          "content_same": false
        },
        {
          "line": 5272,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(pItem->data, data, colBytes)",
          "old_line_content": "  }",
          "new_line_content": "    memcpy(pItem->data, data, colBytes);",
          "content_same": false
        },
        {
          "line": 3233,
          "old_api": null,
          "new_api": "colDataIsNull_s",
          "old_text": null,
          "new_text": "colDataIsNull_s(pInputCol, rowIndex)",
          "old_line_content": "    pInfo->isNull = true;",
          "new_line_content": "  if (colDataIsNull_s(pInputCol, rowIndex)) {",
          "content_same": false
        },
        {
          "line": 5281,
          "old_api": null,
          "new_api": "compareInt64Val",
          "old_text": null,
          "new_text": "compareInt64Val(&d1->timestamp, &d2->timestamp)",
          "old_line_content": "}",
          "new_line_content": "  return compareInt64Val(&d1->timestamp, &d2->timestamp);",
          "content_same": false
        },
        {
          "line": 3239,
          "old_api": null,
          "new_api": "varDataTLen",
          "old_text": null,
          "new_text": "varDataTLen(pData)",
          "old_line_content": "    }",
          "new_line_content": "      pInfo->bytes = varDataTLen(pData);",
          "content_same": false
        },
        {
          "line": 5288,
          "old_api": null,
          "new_api": "taosheapsort",
          "old_text": null,
          "new_text": "taosheapsort((void*)pList, sizeof(STailItem**), pInfo->numAdded + 1, NULL, tailCompFn, 0)",
          "old_line_content": "    pInfo->numAdded++;",
          "new_line_content": "    taosheapsort((void*)pList, sizeof(STailItem**), pInfo->numAdded + 1, NULL, tailCompFn, 0);",
          "content_same": false
        },
        {
          "line": 3242,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(pInfo->buf, pData, pInfo->bytes)",
          "old_line_content": "  }",
          "new_line_content": "    memcpy(pInfo->buf, pData, pInfo->bytes);",
          "content_same": false
        },
        {
          "line": 5292,
          "old_api": null,
          "new_api": "taosheapadjust",
          "old_text": null,
          "new_text": "taosheapadjust((void*)pList, sizeof(STailItem**), 0, pInfo->numOfPoints - 1, NULL, tailCompFn, NULL, 0)",
          "old_line_content": "  }",
          "new_line_content": "    taosheapadjust((void*)pList, sizeof(STailItem**), 0, pInfo->numOfPoints - 1, NULL, tailCompFn, NULL, 0);",
          "content_same": false
        },
        {
          "line": 3246,
          "old_api": null,
          "new_api": "firstlastSaveTupleData",
          "old_text": null,
          "new_text": "firstlastSaveTupleData(pCtx->pSrcBlock, rowIndex, pCtx, pInfo)",
          "old_line_content": "",
          "new_line_content": "  firstlastSaveTupleData(pCtx->pSrcBlock, rowIndex, pCtx, pInfo);",
          "content_same": false
        },
        {
          "line": 5300,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "",
          "new_line_content": "  STailInfo*           pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 3255,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "",
          "new_line_content": "  SFirstLastRes*       pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 3264,
          "old_api": null,
          "new_api": "getRowPTs",
          "old_text": null,
          "new_text": "getRowPTs(pInput->pPTS, pInput->totalRows - 1)",
          "old_line_content": "",
          "new_line_content": "  TSKEY endKey = getRowPTs(pInput->pPTS, pInput->totalRows - 1);",
          "content_same": false
        },
        {
          "line": 5312,
          "old_api": null,
          "new_api": "TMIN",
          "old_text": null,
          "new_text": "TMIN(pInfo->numOfPoints, pInput->numOfRows - pInfo->offset)",
          "old_line_content": "  }",
          "new_line_content": "    pInfo->numOfPoints = TMIN(pInfo->numOfPoints, pInput->numOfRows - pInfo->offset);",
          "content_same": false
        },
        {
          "line": 5316,
          "old_api": null,
          "new_api": "colDataIsNull_s",
          "old_text": null,
          "new_text": "colDataIsNull_s(pInputCol, i)",
          "old_line_content": "  }",
          "new_line_content": "    doTailAdd(pInfo, data, tsList[i], colDataIsNull_s(pInputCol, i));",
          "content_same": false
        },
        {
          "line": 5319,
          "old_api": null,
          "new_api": "taosqsort",
          "old_text": null,
          "new_text": "taosqsort(pInfo->pItems, pInfo->numOfPoints, POINTER_BYTES, NULL, tailCompFn)",
          "old_line_content": "",
          "new_line_content": "  taosqsort(pInfo->pItems, pInfo->numOfPoints, POINTER_BYTES, NULL, tailCompFn);",
          "content_same": false
        },
        {
          "line": 3274,
          "old_api": null,
          "new_api": "getRowPTs",
          "old_text": null,
          "new_text": "getRowPTs(pInput->pPTS, i)",
          "old_line_content": "      numOfElems++;",
          "new_line_content": "      TSKEY cts = getRowPTs(pInput->pPTS, i);",
          "content_same": false
        },
        {
          "line": 5325,
          "old_api": null,
          "new_api": "colDataAppendNULL",
          "old_text": null,
          "new_text": "colDataAppendNULL(pOutput, pos)",
          "old_line_content": "    } else {",
          "new_line_content": "      colDataAppendNULL(pOutput, pos);",
          "content_same": false
        },
        {
          "line": 3278,
          "old_api": null,
          "new_api": "doSaveLastrow",
          "old_text": null,
          "new_text": "doSaveLastrow(pCtx, data, i, cts, pInfo)",
          "old_line_content": "      }",
          "new_line_content": "        doSaveLastrow(pCtx, data, i, cts, pInfo);",
          "content_same": false
        },
        {
          "line": 5327,
          "old_api": null,
          "new_api": "colDataAppend",
          "old_text": null,
          "new_text": "colDataAppend(pOutput, pos, pItem->data, false)",
          "old_line_content": "    }",
          "new_line_content": "      colDataAppend(pOutput, pos, pItem->data, false);",
          "content_same": false
        },
        {
          "line": 3286,
          "old_api": null,
          "new_api": "getRowPTs",
          "old_text": null,
          "new_text": "getRowPTs(pInput->pPTS, i)",
          "old_line_content": "      numOfElems++;",
          "new_line_content": "      TSKEY cts = getRowPTs(pInput->pPTS, i);",
          "content_same": false
        },
        {
          "line": 3290,
          "old_api": null,
          "new_api": "doSaveLastrow",
          "old_text": null,
          "new_text": "doSaveLastrow(pCtx, data, i, cts, pInfo)",
          "old_line_content": "      }",
          "new_line_content": "        doSaveLastrow(pCtx, data, i, cts, pInfo);",
          "content_same": false
        },
        {
          "line": 5339,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pEntryInfo)",
          "old_line_content": "  pEntryInfo->complete = true;",
          "new_line_content": "  STailInfo*           pInfo = GET_ROWCELL_INTERBUF(pEntryInfo);",
          "content_same": false
        },
        {
          "line": 5345,
          "old_api": null,
          "new_api": "taosArrayGet",
          "old_text": null,
          "new_text": "taosArrayGet(pBlock->pDataBlock, slotId)",
          "old_line_content": "",
          "new_line_content": "  SColumnInfoData* pCol = taosArrayGet(pBlock->pDataBlock, slotId);",
          "content_same": false
        },
        {
          "line": 3299,
          "old_api": null,
          "new_api": "colDataGetData",
          "old_text": null,
          "new_text": "colDataGetData(pInputCol, i)",
          "old_line_content": "    TSKEY cts = pts[i];",
          "new_line_content": "    char* data = colDataGetData(pInputCol, i);",
          "content_same": false
        },
        {
          "line": 5351,
          "old_api": null,
          "new_api": "colDataAppend",
          "old_text": null,
          "new_text": "colDataAppend(pCol, currentRow, pItem->data, false)",
          "old_line_content": "    currentRow += 1;",
          "new_line_content": "    colDataAppend(pCol, currentRow, pItem->data, false);",
          "content_same": false
        },
        {
          "line": 3304,
          "old_api": null,
          "new_api": "doSaveLastrow",
          "old_text": null,
          "new_text": "doSaveLastrow(pCtx, data, i, cts, pInfo)",
          "old_line_content": "      pResInfo->numOfRes = 1;",
          "new_line_content": "      doSaveLastrow(pCtx, data, i, cts, pInfo);",
          "content_same": false
        },
        {
          "line": 3311,
          "old_api": null,
          "new_api": "SET_VAL",
          "old_text": null,
          "new_text": "SET_VAL(pResInfo, numOfElems, 1)",
          "old_line_content": "  return TSDB_CODE_SUCCESS;",
          "new_line_content": "  SET_VAL(pResInfo, numOfElems, 1);",
          "content_same": false
        },
        {
          "line": 3321,
          "old_api": null,
          "new_api": "functionSetup",
          "old_text": null,
          "new_text": "functionSetup(pCtx, pResInfo)",
          "old_line_content": "    return false;",
          "new_line_content": "  if (!functionSetup(pCtx, pResInfo)) {",
          "content_same": false
        },
        {
          "line": 5369,
          "old_api": null,
          "new_api": "functionSetup",
          "old_text": null,
          "new_text": "functionSetup(pCtx, pResInfo)",
          "old_line_content": "    return false;",
          "new_line_content": "  if (!functionSetup(pCtx, pResInfo)) {",
          "content_same": false
        },
        {
          "line": 3325,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "  pDiffInfo->hasPrev = false;",
          "new_line_content": "  SDiffInfo* pDiffInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 5373,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "  pInfo->numOfPoints = 0;",
          "new_line_content": "  SUniqueInfo* pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 5378,
          "old_api": null,
          "new_api": "taosHashClear",
          "old_text": null,
          "new_text": "taosHashClear(pInfo->pHash)",
          "old_line_content": "  } else {",
          "new_line_content": "    taosHashClear(pInfo->pHash);",
          "content_same": false
        },
        {
          "line": 5380,
          "old_api": null,
          "new_api": "taosGetDefaultHashFunction",
          "old_text": null,
          "new_text": "taosGetDefaultHashFunction(TSDB_DATA_TYPE_BINARY)",
          "old_line_content": "  }",
          "new_line_content": "    pInfo->pHash = taosHashInit(64, taosGetDefaultHashFunction(TSDB_DATA_TYPE_BINARY), true, HASH_NO_LOCK);",
          "content_same": false
        },
        {
          "line": 5404,
          "old_api": null,
          "new_api": "taosHashGet",
          "old_text": null,
          "new_text": "taosHashGet(pInfo->pHash, data, hashKeyBytes)",
          "old_line_content": "  if (pHashItem == NULL) {",
          "new_line_content": "  SUniqueItem* pHashItem = taosHashGet(pInfo->pHash, data, hashKeyBytes);",
          "content_same": false
        },
        {
          "line": 5409,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(pItem->data, data, pInfo->colBytes)",
          "old_line_content": "",
          "new_line_content": "    memcpy(pItem->data, data, pInfo->colBytes);",
          "content_same": false
        },
        {
          "line": 3363,
          "old_api": null,
          "new_api": "ASSERT",
          "old_text": null,
          "new_text": "ASSERT(0)",
          "old_line_content": "  }",
          "new_line_content": "      ASSERT(0);",
          "content_same": false
        },
        {
          "line": 5411,
          "old_api": null,
          "new_api": "taosHashPut",
          "old_text": null,
          "new_text": "taosHashPut(pInfo->pHash, data, hashKeyBytes, (char*)pItem, sizeof(SUniqueItem*))",
          "old_line_content": "    pInfo->numOfPoints++;",
          "new_line_content": "    taosHashPut(pInfo->pHash, data, hashKeyBytes, (char*)pItem, sizeof(SUniqueItem*));",
          "content_same": false
        },
        {
          "line": 5422,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "",
          "new_line_content": "  SUniqueInfo*         pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 3375,
          "old_api": null,
          "new_api": "colDataSetNull_f",
          "old_text": null,
          "new_text": "colDataSetNull_f(pOutput->nullbitmap, pos)",
          "old_line_content": "      } else {",
          "new_line_content": "        colDataSetNull_f(pOutput->nullbitmap, pos);",
          "content_same": false
        },
        {
          "line": 3377,
          "old_api": null,
          "new_api": "colDataAppendInt64",
          "old_text": null,
          "new_text": "colDataAppendInt64(pOutput, pos, &delta)",
          "old_line_content": "      }",
          "new_line_content": "        colDataAppendInt64(pOutput, pos, &delta);",
          "content_same": false
        },
        {
          "line": 5434,
          "old_api": null,
          "new_api": "colDataIsNull_s",
          "old_text": null,
          "new_text": "colDataIsNull_s(pInputCol, i)",
          "old_line_content": "",
          "new_line_content": "    doUniqueAdd(pInfo, data, tsList[i], colDataIsNull_s(pInputCol, i));",
          "content_same": false
        },
        {
          "line": 3388,
          "old_api": null,
          "new_api": "colDataSetNull_f",
          "old_text": null,
          "new_text": "colDataSetNull_f(pOutput->nullbitmap, pos)",
          "old_line_content": "      } else {",
          "new_line_content": "        colDataSetNull_f(pOutput->nullbitmap, pos);",
          "content_same": false
        },
        {
          "line": 5437,
          "old_api": null,
          "new_api": "taosHashCleanup",
          "old_text": null,
          "new_text": "taosHashCleanup(pInfo->pHash)",
          "old_line_content": "      return 0;",
          "new_line_content": "      taosHashCleanup(pInfo->pHash);",
          "content_same": false
        },
        {
          "line": 3390,
          "old_api": null,
          "new_api": "colDataAppendInt64",
          "old_text": null,
          "new_text": "colDataAppendInt64(pOutput, pos, &delta)",
          "old_line_content": "      }",
          "new_line_content": "        colDataAppendInt64(pOutput, pos, &delta);",
          "content_same": false
        },
        {
          "line": 5445,
          "old_api": null,
          "new_api": "colDataAppendNULL",
          "old_text": null,
          "new_text": "colDataAppendNULL(pOutput, i)",
          "old_line_content": "    } else {",
          "new_line_content": "      colDataAppendNULL(pOutput, i);",
          "content_same": false
        },
        {
          "line": 3399,
          "old_api": null,
          "new_api": "colDataSetNull_f",
          "old_text": null,
          "new_text": "colDataSetNull_f(pOutput->nullbitmap, pos)",
          "old_line_content": "      } else {",
          "new_line_content": "        colDataSetNull_f(pOutput->nullbitmap, pos);",
          "content_same": false
        },
        {
          "line": 5447,
          "old_api": null,
          "new_api": "colDataAppend",
          "old_text": null,
          "new_text": "colDataAppend(pOutput, i, pItem->data, false)",
          "old_line_content": "    }",
          "new_line_content": "      colDataAppend(pOutput, i, pItem->data, false);",
          "content_same": false
        },
        {
          "line": 3401,
          "old_api": null,
          "new_api": "colDataAppendInt64",
          "old_text": null,
          "new_text": "colDataAppendInt64(pOutput, pos, &delta)",
          "old_line_content": "      }",
          "new_line_content": "        colDataAppendInt64(pOutput, pos, &delta);",
          "content_same": false
        },
        {
          "line": 5450,
          "old_api": null,
          "new_api": "colDataAppendInt64",
          "old_text": null,
          "new_text": "colDataAppendInt64(pTsOutput, i, &pItem->timestamp)",
          "old_line_content": "    }",
          "new_line_content": "      colDataAppendInt64(pTsOutput, i, &pItem->timestamp);",
          "content_same": false
        },
        {
          "line": 3411,
          "old_api": null,
          "new_api": "colDataSetNull_f",
          "old_text": null,
          "new_text": "colDataSetNull_f(pOutput->nullbitmap, pos)",
          "old_line_content": "      } else {",
          "new_line_content": "        colDataSetNull_f(pOutput->nullbitmap, pos);",
          "content_same": false
        },
        {
          "line": 3413,
          "old_api": null,
          "new_api": "colDataAppendInt64",
          "old_text": null,
          "new_text": "colDataAppendInt64(pOutput, pos, &delta)",
          "old_line_content": "      }",
          "new_line_content": "        colDataAppendInt64(pOutput, pos, &delta);",
          "content_same": false
        },
        {
          "line": 5465,
          "old_api": null,
          "new_api": "functionSetup",
          "old_text": null,
          "new_text": "functionSetup(pCtx, pResInfo)",
          "old_line_content": "    return false;",
          "new_line_content": "  if (!functionSetup(pCtx, pResInfo)) {",
          "content_same": false
        },
        {
          "line": 5469,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "  pInfo->numOfPoints = 0;",
          "new_line_content": "  SModeInfo* pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 3422,
          "old_api": null,
          "new_api": "colDataSetNull_f",
          "old_text": null,
          "new_text": "colDataSetNull_f(pOutput->nullbitmap, pos)",
          "old_line_content": "      } else {",
          "new_line_content": "        colDataSetNull_f(pOutput->nullbitmap, pos);",
          "content_same": false
        },
        {
          "line": 3424,
          "old_api": null,
          "new_api": "colDataAppendDouble",
          "old_text": null,
          "new_text": "colDataAppendDouble(pOutput, pos, &delta)",
          "old_line_content": "      }",
          "new_line_content": "        colDataAppendDouble(pOutput, pos, &delta);",
          "content_same": false
        },
        {
          "line": 5474,
          "old_api": null,
          "new_api": "taosHashClear",
          "old_text": null,
          "new_text": "taosHashClear(pInfo->pHash)",
          "old_line_content": "  } else {",
          "new_line_content": "    taosHashClear(pInfo->pHash);",
          "content_same": false
        },
        {
          "line": 5476,
          "old_api": null,
          "new_api": "taosGetDefaultHashFunction",
          "old_text": null,
          "new_text": "taosGetDefaultHashFunction(TSDB_DATA_TYPE_BINARY)",
          "old_line_content": "  }",
          "new_line_content": "    pInfo->pHash = taosHashInit(64, taosGetDefaultHashFunction(TSDB_DATA_TYPE_BINARY), true, HASH_NO_LOCK);",
          "content_same": false
        },
        {
          "line": 3433,
          "old_api": null,
          "new_api": "colDataSetNull_f",
          "old_text": null,
          "new_text": "colDataSetNull_f(pOutput->nullbitmap, pos)",
          "old_line_content": "      } else {",
          "new_line_content": "        colDataSetNull_f(pOutput->nullbitmap, pos);",
          "content_same": false
        },
        {
          "line": 3435,
          "old_api": null,
          "new_api": "colDataAppendDouble",
          "old_text": null,
          "new_text": "colDataAppendDouble(pOutput, pos, &delta)",
          "old_line_content": "      }",
          "new_line_content": "        colDataAppendDouble(pOutput, pos, &delta);",
          "content_same": false
        },
        {
          "line": 5486,
          "old_api": null,
          "new_api": "taosHashGet",
          "old_text": null,
          "new_text": "taosHashGet(pInfo->pHash, data, hashKeyBytes)",
          "old_line_content": "  if (pHashItem == NULL) {",
          "new_line_content": "  SModeItem** pHashItem = taosHashGet(pInfo->pHash, data, hashKeyBytes);",
          "content_same": false
        },
        {
          "line": 3441,
          "old_api": null,
          "new_api": "ASSERT",
          "old_text": null,
          "new_text": "ASSERT(0)",
          "old_line_content": "  }",
          "new_line_content": "      ASSERT(0);",
          "content_same": false
        },
        {
          "line": 5490,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(pItem->data, data, hashKeyBytes)",
          "old_line_content": "    pItem->count += 1;",
          "new_line_content": "    memcpy(pItem->data, data, hashKeyBytes);",
          "content_same": false
        },
        {
          "line": 5494,
          "old_api": null,
          "new_api": "saveTupleData",
          "old_text": null,
          "new_text": "saveTupleData(pCtx, rowIndex, pCtx->pSrcBlock, NULL)",
          "old_line_content": "    }",
          "new_line_content": "      pItem->tuplePos = saveTupleData(pCtx, rowIndex, pCtx->pSrcBlock, NULL);",
          "content_same": false
        },
        {
          "line": 3447,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "",
          "new_line_content": "  SDiffInfo*           pDiffInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 5497,
          "old_api": null,
          "new_api": "taosHashPut",
          "old_text": null,
          "new_text": "taosHashPut(pInfo->pHash, data, hashKeyBytes, &pItem, sizeof(SModeItem*))",
          "old_line_content": "    pInfo->numOfPoints++;",
          "new_line_content": "    taosHashPut(pInfo->pHash, data, hashKeyBytes, &pItem, sizeof(SModeItem*));",
          "content_same": false
        },
        {
          "line": 5502,
          "old_api": null,
          "new_api": "updateTupleData",
          "old_text": null,
          "new_text": "updateTupleData(pCtx, rowIndex, pCtx->pSrcBlock, &((*pHashItem)->tuplePos))",
          "old_line_content": "    }",
          "new_line_content": "      updateTupleData(pCtx, rowIndex, pCtx->pSrcBlock, &((*pHashItem)->tuplePos));",
          "content_same": false
        },
        {
          "line": 5509,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "",
          "new_line_content": "  SModeInfo*           pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 3462,
          "old_api": null,
          "new_api": "colDataIsNull_f",
          "old_text": null,
          "new_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "old_line_content": "        if (pDiffInfo->includeNull) {",
          "new_line_content": "      if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "content_same": false
        },
        {
          "line": 3464,
          "old_api": null,
          "new_api": "colDataSetNull_f",
          "old_text": null,
          "new_text": "colDataSetNull_f(pOutput->nullbitmap, pos)",
          "old_line_content": "",
          "new_line_content": "          colDataSetNull_f(pOutput->nullbitmap, pos);",
          "content_same": false
        },
        {
          "line": 3471,
          "old_api": null,
          "new_api": "colDataGetData",
          "old_text": null,
          "new_text": "colDataGetData(pInputCol, i)",
          "old_line_content": "",
          "new_line_content": "      char* pv = colDataGetData(pInputCol, i);",
          "content_same": false
        },
        {
          "line": 5520,
          "old_api": null,
          "new_api": "colDataIsNull_s",
          "old_text": null,
          "new_text": "colDataIsNull_s(pInputCol, i)",
          "old_line_content": "      continue;",
          "new_line_content": "    if (colDataIsNull_s(pInputCol, i)) {",
          "content_same": false
        },
        {
          "line": 3474,
          "old_api": null,
          "new_api": "doHandleDiff",
          "old_text": null,
          "new_text": "doHandleDiff(pDiffInfo, pInputCol->info.type, pv, pOutput, pos, pCtx->order)",
          "old_line_content": "        // handle selectivity",
          "new_line_content": "        doHandleDiff(pDiffInfo, pInputCol->info.type, pv, pOutput, pos, pCtx->order);",
          "content_same": false
        },
        {
          "line": 3477,
          "old_api": null,
          "new_api": "appendSelectivityValue",
          "old_text": null,
          "new_text": "appendSelectivityValue(pCtx, i, pos)",
          "old_line_content": "        }",
          "new_line_content": "          appendSelectivityValue(pCtx, i, pos);",
          "content_same": false
        },
        {
          "line": 5525,
          "old_api": null,
          "new_api": "doModeAdd",
          "old_text": null,
          "new_text": "doModeAdd(pInfo, i, pCtx, data)",
          "old_line_content": "",
          "new_line_content": "    doModeAdd(pInfo, i, pCtx, data);",
          "content_same": false
        },
        {
          "line": 5528,
          "old_api": null,
          "new_api": "taosHashCleanup",
          "old_text": null,
          "new_text": "taosHashCleanup(pInfo->pHash)",
          "old_line_content": "      return TSDB_CODE_OUT_OF_MEMORY;",
          "new_line_content": "      taosHashCleanup(pInfo->pHash);",
          "content_same": false
        },
        {
          "line": 3482,
          "old_api": null,
          "new_api": "doSetPrevVal",
          "old_text": null,
          "new_text": "doSetPrevVal(pDiffInfo, pInputCol->info.type, pv)",
          "old_line_content": "      }",
          "new_line_content": "        doSetPrevVal(pDiffInfo, pInputCol->info.type, pv);",
          "content_same": false
        },
        {
          "line": 5534,
          "old_api": null,
          "new_api": "saveTupleData",
          "old_text": null,
          "new_text": "saveTupleData(pCtx, pInput->startRowIndex, pCtx->pSrcBlock, NULL)",
          "old_line_content": "    pInfo->nullTupleSaved = true;",
          "new_line_content": "    pInfo->nullTuplePos = saveTupleData(pCtx, pInput->startRowIndex, pCtx->pSrcBlock, NULL);",
          "content_same": false
        },
        {
          "line": 5538,
          "old_api": null,
          "new_api": "SET_VAL",
          "old_text": null,
          "new_text": "SET_VAL(pResInfo, numOfElems, 1)",
          "old_line_content": "",
          "new_line_content": "  SET_VAL(pResInfo, numOfElems, 1);",
          "content_same": false
        },
        {
          "line": 3491,
          "old_api": null,
          "new_api": "colDataIsNull_f",
          "old_text": null,
          "new_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "old_line_content": "        if (pDiffInfo->includeNull) {",
          "new_line_content": "      if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "content_same": false
        },
        {
          "line": 3493,
          "old_api": null,
          "new_api": "colDataSetNull_f",
          "old_text": null,
          "new_text": "colDataSetNull_f(pOutput->nullbitmap, pos)",
          "old_line_content": "",
          "new_line_content": "          colDataSetNull_f(pOutput->nullbitmap, pos);",
          "content_same": false
        },
        {
          "line": 5545,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "  int32_t              slotId = pCtx->pExpr->base.resSchema.slotId;",
          "new_line_content": "  SModeInfo*           pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 5547,
          "old_api": null,
          "new_api": "taosArrayGet",
          "old_text": null,
          "new_text": "taosArrayGet(pBlock->pDataBlock, slotId)",
          "old_line_content": "  int32_t              currentRow = pBlock->info.rows;",
          "new_line_content": "  SColumnInfoData*     pCol = taosArrayGet(pBlock->pDataBlock, slotId);",
          "content_same": false
        },
        {
          "line": 3500,
          "old_api": null,
          "new_api": "colDataGetData",
          "old_text": null,
          "new_text": "colDataGetData(pInputCol, i)",
          "old_line_content": "",
          "new_line_content": "      char* pv = colDataGetData(pInputCol, i);",
          "content_same": false
        },
        {
          "line": 3504,
          "old_api": null,
          "new_api": "doHandleDiff",
          "old_text": null,
          "new_text": "doHandleDiff(pDiffInfo, pInputCol->info.type, pv, pOutput, pos, pCtx->order)",
          "old_line_content": "        // handle selectivity",
          "new_line_content": "        doHandleDiff(pDiffInfo, pInputCol->info.type, pv, pOutput, pos, pCtx->order);",
          "content_same": false
        },
        {
          "line": 3507,
          "old_api": null,
          "new_api": "appendSelectivityValue",
          "old_text": null,
          "new_text": "appendSelectivityValue(pCtx, i, pos)",
          "old_line_content": "        }",
          "new_line_content": "          appendSelectivityValue(pCtx, i, pos);",
          "content_same": false
        },
        {
          "line": 3512,
          "old_api": null,
          "new_api": "doSetPrevVal",
          "old_text": null,
          "new_text": "doSetPrevVal(pDiffInfo, pInputCol->info.type, pv)",
          "old_line_content": "      }",
          "new_line_content": "        doSetPrevVal(pDiffInfo, pInputCol->info.type, pv);",
          "content_same": false
        },
        {
          "line": 5563,
          "old_api": null,
          "new_api": "setSelectivityValue",
          "old_text": null,
          "new_text": "setSelectivityValue(pCtx, pBlock, &pResItem->tuplePos, currentRow)",
          "old_line_content": "  } else {",
          "new_line_content": "    setSelectivityValue(pCtx, pBlock, &pResItem->tuplePos, currentRow);",
          "content_same": false
        },
        {
          "line": 5566,
          "old_api": null,
          "new_api": "setSelectivityValue",
          "old_text": null,
          "new_text": "setSelectivityValue(pCtx, pBlock, &pInfo->nullTuplePos, currentRow)",
          "old_line_content": "  }",
          "new_line_content": "    setSelectivityValue(pCtx, pBlock, &pInfo->nullTuplePos, currentRow);",
          "content_same": false
        },
        {
          "line": 5569,
          "old_api": null,
          "new_api": "taosHashCleanup",
          "old_text": null,
          "new_text": "taosHashCleanup(pInfo->pHash)",
          "old_line_content": "",
          "new_line_content": "  taosHashCleanup(pInfo->pHash);",
          "content_same": false
        },
        {
          "line": 3526,
          "old_api": null,
          "new_api": "nodesListGetNode",
          "old_text": null,
          "new_text": "nodesListGetNode(pFunc->pParameterList, 1)",
          "old_line_content": "  pEnv->calcMemSize = sizeof(STopBotRes) + pkNode->datum.i * sizeof(STopBotResItem);",
          "new_line_content": "  SValueNode* pkNode = (SValueNode*)nodesListGetNode(pFunc->pParameterList, 1);",
          "content_same": false
        },
        {
          "line": 3532,
          "old_api": null,
          "new_api": "functionSetup",
          "old_text": null,
          "new_text": "functionSetup(pCtx, pResInfo)",
          "old_line_content": "    return false;",
          "new_line_content": "  if (!functionSetup(pCtx, pResInfo)) {",
          "content_same": false
        },
        {
          "line": 5580,
          "old_api": null,
          "new_api": "functionSetup",
          "old_text": null,
          "new_text": "functionSetup(pCtx, pResultInfo)",
          "old_line_content": "    return false;",
          "new_line_content": "  if (!functionSetup(pCtx, pResultInfo)) {",
          "content_same": false
        },
        {
          "line": 3536,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "  SInputColumnInfoData* pInput = &pCtx->input;",
          "new_line_content": "  STopBotRes*           pRes = GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 5584,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  pInfo->isNull = false;",
          "new_line_content": "  STwaInfo* pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "content_same": false
        },
        {
          "line": 3548,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "  pRes->pItems = (STopBotResItem*)((char*)pRes + sizeof(STopBotRes));",
          "new_line_content": "  STopBotRes*          pRes = GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 5607,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "",
          "new_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 3561,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "",
          "new_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 5609,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "  SPoint1*  last = &pInfo->p;",
          "new_line_content": "  STwaInfo* pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 5613,
          "old_api": null,
          "new_api": "IS_NULL_TYPE",
          "old_text": null,
          "new_text": "IS_NULL_TYPE(pInputCol->info.type)",
          "old_line_content": "    pInfo->isNull = true;",
          "new_line_content": "  if (IS_NULL_TYPE(pInputCol->info.type)) {",
          "content_same": false
        },
        {
          "line": 3566,
          "old_api": null,
          "new_api": "getTopBotOutputInfo",
          "old_text": null,
          "new_text": "getTopBotOutputInfo(pCtx)",
          "old_line_content": "  pRes->type = pInput->pData[0]->info.type;",
          "new_line_content": "  STopBotRes* pRes = getTopBotOutputInfo(pCtx);",
          "content_same": false
        },
        {
          "line": 3571,
          "old_api": null,
          "new_api": "colDataIsNull_f",
          "old_text": null,
          "new_text": "colDataIsNull_f(pCol->nullbitmap, i)",
          "old_line_content": "      continue;",
          "new_line_content": "    if (pCol->hasNull && colDataIsNull_f(pCol->nullbitmap, i)) {",
          "content_same": false
        },
        {
          "line": 5623,
          "old_api": null,
          "new_api": "ASSERT",
          "old_text": null,
          "new_text": "ASSERT(last->key == INT64_MIN)",
          "old_line_content": "    for (; i < pInput->numOfRows + pInput->startRowIndex; ++i) {",
          "new_line_content": "    ASSERT(last->key == INT64_MIN);",
          "content_same": false
        },
        {
          "line": 3577,
          "old_api": null,
          "new_api": "doAddIntoResult",
          "old_text": null,
          "new_text": "doAddIntoResult(pCtx, data, i, pCtx->pSrcBlock, pRes->type, pInput->uid, pResInfo, true)",
          "old_line_content": "  }",
          "new_line_content": "    doAddIntoResult(pCtx, data, i, pCtx->pSrcBlock, pRes->type, pInput->uid, pResInfo, true);",
          "content_same": false
        },
        {
          "line": 5625,
          "old_api": null,
          "new_api": "colDataIsNull_f",
          "old_text": null,
          "new_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "old_line_content": "        continue;",
          "new_line_content": "      if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "content_same": false
        },
        {
          "line": 3581,
          "old_api": null,
          "new_api": "saveTupleData",
          "old_text": null,
          "new_text": "saveTupleData(pCtx, pInput->startRowIndex, pCtx->pSrcBlock, NULL)",
          "old_line_content": "    pRes->nullTupleSaved = true;",
          "new_line_content": "    pRes->nullTuplePos = saveTupleData(pCtx, pInput->startRowIndex, pCtx->pSrcBlock, NULL);",
          "content_same": false
        },
        {
          "line": 5631,
          "old_api": null,
          "new_api": "colDataGetData",
          "old_text": null,
          "new_text": "colDataGetData(pInputCol, i)",
          "old_line_content": "",
          "new_line_content": "      GET_TYPED_DATA(last->val, double, pInputCol->info.type, colDataGetData(pInputCol, i));",
          "content_same": false
        },
        {
          "line": 5633,
          "old_api": null,
          "new_api": "twa_get_area",
          "old_text": null,
          "new_text": "twa_get_area(pCtx->start, *last)",
          "old_line_content": "      pInfo->win.skey = pCtx->start.key;",
          "new_line_content": "      pInfo->dOutput += twa_get_area(pCtx->start, *last);",
          "content_same": false
        },
        {
          "line": 3589,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "",
          "new_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 5641,
          "old_api": null,
          "new_api": "colDataIsNull_f",
          "old_text": null,
          "new_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "old_line_content": "        continue;",
          "new_line_content": "      if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "content_same": false
        },
        {
          "line": 3594,
          "old_api": null,
          "new_api": "getTopBotOutputInfo",
          "old_text": null,
          "new_text": "getTopBotOutputInfo(pCtx)",
          "old_line_content": "  pRes->type = pInput->pData[0]->info.type;",
          "new_line_content": "  STopBotRes* pRes = getTopBotOutputInfo(pCtx);",
          "content_same": false
        },
        {
          "line": 3599,
          "old_api": null,
          "new_api": "colDataIsNull_f",
          "old_text": null,
          "new_text": "colDataIsNull_f(pCol->nullbitmap, i)",
          "old_line_content": "      continue;",
          "new_line_content": "    if (pCol->hasNull && colDataIsNull_f(pCol->nullbitmap, i)) {",
          "content_same": false
        },
        {
          "line": 5647,
          "old_api": null,
          "new_api": "colDataGetData",
          "old_text": null,
          "new_text": "colDataGetData(pInputCol, i)",
          "old_line_content": "",
          "new_line_content": "      GET_TYPED_DATA(last->val, double, pInputCol->info.type, colDataGetData(pInputCol, i));",
          "content_same": false
        },
        {
          "line": 3605,
          "old_api": null,
          "new_api": "doAddIntoResult",
          "old_text": null,
          "new_text": "doAddIntoResult(pCtx, data, i, pCtx->pSrcBlock, pRes->type, pInput->uid, pResInfo, false)",
          "old_line_content": "  }",
          "new_line_content": "    doAddIntoResult(pCtx, data, i, pCtx->pSrcBlock, pRes->type, pInput->uid, pResInfo, false);",
          "content_same": false
        },
        {
          "line": 3609,
          "old_api": null,
          "new_api": "saveTupleData",
          "old_text": null,
          "new_text": "saveTupleData(pCtx, pInput->startRowIndex, pCtx->pSrcBlock, NULL)",
          "old_line_content": "    pRes->nullTupleSaved = true;",
          "new_line_content": "    pRes->nullTuplePos = saveTupleData(pCtx, pInput->startRowIndex, pCtx->pSrcBlock, NULL);",
          "content_same": false
        },
        {
          "line": 5661,
          "old_api": null,
          "new_api": "colDataGetData",
          "old_text": null,
          "new_text": "colDataGetData(pInputCol, 0)",
          "old_line_content": "      for (; i < pInput->numOfRows + pInput->startRowIndex; i += 1) {",
          "new_line_content": "      int8_t* val = (int8_t*)colDataGetData(pInputCol, 0);",
          "content_same": false
        },
        {
          "line": 5663,
          "old_api": null,
          "new_api": "colDataIsNull_f",
          "old_text": null,
          "new_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "old_line_content": "          continue;",
          "new_line_content": "        if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "content_same": false
        },
        {
          "line": 5668,
          "old_api": null,
          "new_api": "INIT_INTP_POINT",
          "old_text": null,
          "new_text": "INIT_INTP_POINT(st, tsList[i], val[i])",
          "old_line_content": "        if (pInfo->p.key == st.key) {",
          "new_line_content": "        INIT_INTP_POINT(st, tsList[i], val[i]);",
          "content_same": false
        },
        {
          "line": 3622,
          "old_api": null,
          "new_api": "IS_SIGNED_NUMERIC_TYPE",
          "old_text": null,
          "new_text": "IS_SIGNED_NUMERIC_TYPE(type)",
          "old_line_content": "    if (val1->v.i == val2->v.i) {",
          "new_line_content": "  if (IS_SIGNED_NUMERIC_TYPE(type)) {",
          "content_same": false
        },
        {
          "line": 5673,
          "old_api": null,
          "new_api": "twa_get_area",
          "old_text": null,
          "new_text": "twa_get_area(pInfo->p, st)",
          "old_line_content": "        pInfo->p = st;",
          "new_line_content": "        pInfo->dOutput += twa_get_area(pInfo->p, st);",
          "content_same": false
        },
        {
          "line": 3628,
          "old_api": null,
          "new_api": "IS_UNSIGNED_NUMERIC_TYPE",
          "old_text": null,
          "new_text": "IS_UNSIGNED_NUMERIC_TYPE(type)",
          "old_line_content": "    if (val1->v.u == val2->v.u) {",
          "new_line_content": "  } else if (IS_UNSIGNED_NUMERIC_TYPE(type)) {",
          "content_same": false
        },
        {
          "line": 5680,
          "old_api": null,
          "new_api": "colDataGetData",
          "old_text": null,
          "new_text": "colDataGetData(pInputCol, 0)",
          "old_line_content": "      for (; i < pInput->numOfRows + pInput->startRowIndex; i += 1) {",
          "new_line_content": "      int16_t* val = (int16_t*)colDataGetData(pInputCol, 0);",
          "content_same": false
        },
        {
          "line": 5682,
          "old_api": null,
          "new_api": "colDataIsNull_f",
          "old_text": null,
          "new_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "old_line_content": "          continue;",
          "new_line_content": "        if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "content_same": false
        },
        {
          "line": 5687,
          "old_api": null,
          "new_api": "INIT_INTP_POINT",
          "old_text": null,
          "new_text": "INIT_INTP_POINT(st, tsList[i], val[i])",
          "old_line_content": "        if (pInfo->p.key == st.key) {",
          "new_line_content": "        INIT_INTP_POINT(st, tsList[i], val[i]);",
          "content_same": false
        },
        {
          "line": 5692,
          "old_api": null,
          "new_api": "twa_get_area",
          "old_text": null,
          "new_text": "twa_get_area(pInfo->p, st)",
          "old_line_content": "        pInfo->p = st;",
          "new_line_content": "        pInfo->dOutput += twa_get_area(pInfo->p, st);",
          "content_same": false
        },
        {
          "line": 3645,
          "old_api": null,
          "new_api": "getTopBotOutputInfo",
          "old_text": null,
          "new_text": "getTopBotOutputInfo(pCtx)",
          "old_line_content": "",
          "new_line_content": "  STopBotRes* pRes = getTopBotOutputInfo(pCtx);",
          "content_same": false
        },
        {
          "line": 3648,
          "old_api": null,
          "new_api": "taosVariantCreateFromBinary",
          "old_text": null,
          "new_text": "taosVariantCreateFromBinary(&val, pData, tDataTypes[type].bytes, type)",
          "old_line_content": "",
          "new_line_content": "  taosVariantCreateFromBinary(&val, pData, tDataTypes[type].bytes, type);",
          "content_same": false
        },
        {
          "line": 5698,
          "old_api": null,
          "new_api": "colDataGetData",
          "old_text": null,
          "new_text": "colDataGetData(pInputCol, 0)",
          "old_line_content": "      for (; i < pInput->numOfRows + pInput->startRowIndex; i += 1) {",
          "new_line_content": "      int32_t* val = (int32_t*)colDataGetData(pInputCol, 0);",
          "content_same": false
        },
        {
          "line": 3651,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(pItems != NULL)",
          "old_line_content": "",
          "new_line_content": "  assert(pItems != NULL);",
          "content_same": false
        },
        {
          "line": 5700,
          "old_api": null,
          "new_api": "colDataIsNull_f",
          "old_text": null,
          "new_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "old_line_content": "          continue;",
          "new_line_content": "        if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "content_same": false
        },
        {
          "line": 5705,
          "old_api": null,
          "new_api": "INIT_INTP_POINT",
          "old_text": null,
          "new_text": "INIT_INTP_POINT(st, tsList[i], val[i])",
          "old_line_content": "        if (pInfo->p.key == st.key) {",
          "new_line_content": "        INIT_INTP_POINT(st, tsList[i], val[i]);",
          "content_same": false
        },
        {
          "line": 3661,
          "old_api": null,
          "new_api": "saveTupleData",
          "old_text": null,
          "new_text": "saveTupleData(pCtx, rowIndex, pSrcBlock, NULL)",
          "old_line_content": "    }",
          "new_line_content": "      pItem->tuplePos = saveTupleData(pCtx, rowIndex, pSrcBlock, NULL);",
          "content_same": false
        },
        {
          "line": 5710,
          "old_api": null,
          "new_api": "twa_get_area",
          "old_text": null,
          "new_text": "twa_get_area(pInfo->p, st)",
          "old_line_content": "        pInfo->p = st;",
          "new_line_content": "        pInfo->dOutput += twa_get_area(pInfo->p, st);",
          "content_same": false
        },
        {
          "line": 3664,
          "old_api": null,
          "new_api": "qDebug",
          "old_text": null,
          "new_text": "qDebug(\"page_saveTuple i:%d, item:%p,pageId:%d, offset:%d\\n\", pEntryInfo->numOfRes, pItem, pItem->tuplePos.pageId,\n           pItem->tuplePos.offset)",
          "old_line_content": "           pItem->tuplePos.offset);",
          "new_line_content": "    qDebug(\"page_saveTuple i:%d, item:%p,pageId:%d, offset:%d\\n\", pEntryInfo->numOfRes, pItem, pItem->tuplePos.pageId,",
          "content_same": false
        },
        {
          "line": 5716,
          "old_api": null,
          "new_api": "colDataGetData",
          "old_text": null,
          "new_text": "colDataGetData(pInputCol, 0)",
          "old_line_content": "      for (; i < pInput->numOfRows + pInput->startRowIndex; i += 1) {",
          "new_line_content": "      int64_t* val = (int64_t*)colDataGetData(pInputCol, 0);",
          "content_same": false
        },
        {
          "line": 3669,
          "old_api": null,
          "new_api": "taosheapsort",
          "old_text": null,
          "new_text": "taosheapsort((void*)pItems, sizeof(STopBotResItem), pEntryInfo->numOfRes, (const void*)&type, topBotResComparFn,\n                 !isTopQuery)",
          "old_line_content": "                 !isTopQuery);",
          "new_line_content": "    taosheapsort((void*)pItems, sizeof(STopBotResItem), pEntryInfo->numOfRes, (const void*)&type, topBotResComparFn,",
          "content_same": false
        },
        {
          "line": 5718,
          "old_api": null,
          "new_api": "colDataIsNull_f",
          "old_text": null,
          "new_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "old_line_content": "          continue;",
          "new_line_content": "        if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "content_same": false
        },
        {
          "line": 5723,
          "old_api": null,
          "new_api": "INIT_INTP_POINT",
          "old_text": null,
          "new_text": "INIT_INTP_POINT(st, tsList[i], val[i])",
          "old_line_content": "        if (pInfo->p.key == st.key) {",
          "new_line_content": "        INIT_INTP_POINT(st, tsList[i], val[i]);",
          "content_same": false
        },
        {
          "line": 3677,
          "old_api": null,
          "new_api": "IS_FLOAT_TYPE",
          "old_text": null,
          "new_text": "IS_FLOAT_TYPE(type)",
          "old_line_content": "      // replace the old data and the coresponding tuple data",
          "new_line_content": "                         (IS_FLOAT_TYPE(type) && val.d < pItems[0].v.d)))) {",
          "content_same": false
        },
        {
          "line": 5728,
          "old_api": null,
          "new_api": "twa_get_area",
          "old_text": null,
          "new_text": "twa_get_area(pInfo->p, st)",
          "old_line_content": "        pInfo->p = st;",
          "new_line_content": "        pInfo->dOutput += twa_get_area(pInfo->p, st);",
          "content_same": false
        },
        {
          "line": 3685,
          "old_api": null,
          "new_api": "updateTupleData",
          "old_text": null,
          "new_text": "updateTupleData(pCtx, rowIndex, pSrcBlock, &pItem->tuplePos)",
          "old_line_content": "      }",
          "new_line_content": "        updateTupleData(pCtx, rowIndex, pSrcBlock, &pItem->tuplePos);",
          "content_same": false
        },
        {
          "line": 5734,
          "old_api": null,
          "new_api": "colDataGetData",
          "old_text": null,
          "new_text": "colDataGetData(pInputCol, 0)",
          "old_line_content": "      for (; i < pInput->numOfRows + pInput->startRowIndex; i += 1) {",
          "new_line_content": "      float* val = (float*)colDataGetData(pInputCol, 0);",
          "content_same": false
        },
        {
          "line": 3688,
          "old_api": null,
          "new_api": "qDebug",
          "old_text": null,
          "new_text": "qDebug(\"page_copyTuple pageId:%d, offset:%d\", pItem->tuplePos.pageId, pItem->tuplePos.offset)",
          "old_line_content": "#endif",
          "new_line_content": "      qDebug(\"page_copyTuple pageId:%d, offset:%d\", pItem->tuplePos.pageId, pItem->tuplePos.offset);",
          "content_same": false
        },
        {
          "line": 5736,
          "old_api": null,
          "new_api": "colDataIsNull_f",
          "old_text": null,
          "new_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "old_line_content": "          continue;",
          "new_line_content": "        if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "content_same": false
        },
        {
          "line": 3690,
          "old_api": null,
          "new_api": "taosheapadjust",
          "old_text": null,
          "new_text": "taosheapadjust((void*)pItems, sizeof(STopBotResItem), 0, pEntryInfo->numOfRes - 1, (const void*)&type,\n                     topBotResComparFn, NULL, !isTopQuery)",
          "old_line_content": "                     topBotResComparFn, NULL, !isTopQuery);",
          "new_line_content": "      taosheapadjust((void*)pItems, sizeof(STopBotResItem), 0, pEntryInfo->numOfRes - 1, (const void*)&type,",
          "content_same": false
        },
        {
          "line": 5741,
          "old_api": null,
          "new_api": "INIT_INTP_POINT",
          "old_text": null,
          "new_text": "INIT_INTP_POINT(st, tsList[i], val[i])",
          "old_line_content": "        if (pInfo->p.key == st.key) {",
          "new_line_content": "        INIT_INTP_POINT(st, tsList[i], val[i]);",
          "content_same": false
        },
        {
          "line": 5746,
          "old_api": null,
          "new_api": "twa_get_area",
          "old_text": null,
          "new_text": "twa_get_area(pInfo->p, st)",
          "old_line_content": "        pInfo->p = st;",
          "new_line_content": "        pInfo->dOutput += twa_get_area(pInfo->p, st);",
          "content_same": false
        },
        {
          "line": 5752,
          "old_api": null,
          "new_api": "colDataGetData",
          "old_text": null,
          "new_text": "colDataGetData(pInputCol, 0)",
          "old_line_content": "      for (; i < pInput->numOfRows + pInput->startRowIndex; i += 1) {",
          "new_line_content": "      double* val = (double*)colDataGetData(pInputCol, 0);",
          "content_same": false
        },
        {
          "line": 5754,
          "old_api": null,
          "new_api": "colDataIsNull_f",
          "old_text": null,
          "new_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "old_line_content": "          continue;",
          "new_line_content": "        if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "content_same": false
        },
        {
          "line": 5759,
          "old_api": null,
          "new_api": "INIT_INTP_POINT",
          "old_text": null,
          "new_text": "INIT_INTP_POINT(st, tsList[i], val[i])",
          "old_line_content": "        if (pInfo->p.key == st.key) {",
          "new_line_content": "        INIT_INTP_POINT(st, tsList[i], val[i]);",
          "content_same": false
        },
        {
          "line": 3715,
          "old_api": null,
          "new_api": "colDataIsNull_s",
          "old_text": null,
          "new_text": "colDataIsNull_s(pCol, rowIndex)",
          "old_line_content": "      offset += pCol->info.bytes;",
          "new_line_content": "    if ((nullList[i] = colDataIsNull_s(pCol, rowIndex)) == true) {",
          "content_same": false
        },
        {
          "line": 5764,
          "old_api": null,
          "new_api": "twa_get_area",
          "old_text": null,
          "new_text": "twa_get_area(pInfo->p, st)",
          "old_line_content": "        pInfo->p = st;",
          "new_line_content": "        pInfo->dOutput += twa_get_area(pInfo->p, st);",
          "content_same": false
        },
        {
          "line": 3722,
          "old_api": null,
          "new_api": "varDataTLen",
          "old_text": null,
          "new_text": "varDataTLen(p)",
          "old_line_content": "    } else {",
          "new_line_content": "      memcpy(pStart + offset, p, (pCol->info.type == TSDB_DATA_TYPE_JSON) ? getJsonValueLen(p) : varDataTLen(p));",
          "content_same": false
        },
        {
          "line": 5770,
          "old_api": null,
          "new_api": "colDataGetData",
          "old_text": null,
          "new_text": "colDataGetData(pInputCol, 0)",
          "old_line_content": "      for (; i < pInput->numOfRows + pInput->startRowIndex; i += 1) {",
          "new_line_content": "      uint8_t* val = (uint8_t*)colDataGetData(pInputCol, 0);",
          "content_same": false
        },
        {
          "line": 3724,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(pStart + offset, p, pCol->info.bytes)",
          "old_line_content": "    }",
          "new_line_content": "      memcpy(pStart + offset, p, pCol->info.bytes);",
          "content_same": false
        },
        {
          "line": 5772,
          "old_api": null,
          "new_api": "colDataIsNull_f",
          "old_text": null,
          "new_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "old_line_content": "          continue;",
          "new_line_content": "        if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "content_same": false
        },
        {
          "line": 5777,
          "old_api": null,
          "new_api": "INIT_INTP_POINT",
          "old_text": null,
          "new_text": "INIT_INTP_POINT(st, tsList[i], val[i])",
          "old_line_content": "        if (pInfo->p.key == st.key) {",
          "new_line_content": "        INIT_INTP_POINT(st, tsList[i], val[i]);",
          "content_same": false
        },
        {
          "line": 5782,
          "old_api": null,
          "new_api": "twa_get_area",
          "old_text": null,
          "new_text": "twa_get_area(pInfo->p, st)",
          "old_line_content": "        pInfo->p = st;",
          "new_line_content": "        pInfo->dOutput += twa_get_area(pInfo->p, st);",
          "content_same": false
        },
        {
          "line": 3740,
          "old_api": null,
          "new_api": "getNewBufPage",
          "old_text": null,
          "new_text": "getNewBufPage(pHandle->pBuf, &pHandle->currentPage)",
          "old_line_content": "      pPage->num = sizeof(SFilePage);",
          "new_line_content": "      pPage = getNewBufPage(pHandle->pBuf, &pHandle->currentPage);",
          "content_same": false
        },
        {
          "line": 5788,
          "old_api": null,
          "new_api": "colDataGetData",
          "old_text": null,
          "new_text": "colDataGetData(pInputCol, 0)",
          "old_line_content": "      for (; i < pInput->numOfRows + pInput->startRowIndex; i += 1) {",
          "new_line_content": "      uint16_t* val = (uint16_t*)colDataGetData(pInputCol, 0);",
          "content_same": false
        },
        {
          "line": 5790,
          "old_api": null,
          "new_api": "colDataIsNull_f",
          "old_text": null,
          "new_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "old_line_content": "          continue;",
          "new_line_content": "        if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "content_same": false
        },
        {
          "line": 3744,
          "old_api": null,
          "new_api": "getBufPageSize",
          "old_text": null,
          "new_text": "getBufPageSize(pHandle->pBuf)",
          "old_line_content": "        // current page is all used, let's prepare a new buffer page",
          "new_line_content": "      if (pPage->num + length > getBufPageSize(pHandle->pBuf)) {",
          "content_same": false
        },
        {
          "line": 3747,
          "old_api": null,
          "new_api": "getNewBufPage",
          "old_text": null,
          "new_text": "getNewBufPage(pHandle->pBuf, &pHandle->currentPage)",
          "old_line_content": "        pPage->num = sizeof(SFilePage);",
          "new_line_content": "        pPage = getNewBufPage(pHandle->pBuf, &pHandle->currentPage);",
          "content_same": false
        },
        {
          "line": 5795,
          "old_api": null,
          "new_api": "INIT_INTP_POINT",
          "old_text": null,
          "new_text": "INIT_INTP_POINT(st, tsList[i], val[i])",
          "old_line_content": "        if (pInfo->p.key == st.key) {",
          "new_line_content": "        INIT_INTP_POINT(st, tsList[i], val[i]);",
          "content_same": false
        },
        {
          "line": 5800,
          "old_api": null,
          "new_api": "twa_get_area",
          "old_text": null,
          "new_text": "twa_get_area(pInfo->p, st)",
          "old_line_content": "        pInfo->p = st;",
          "new_line_content": "        pInfo->dOutput += twa_get_area(pInfo->p, st);",
          "content_same": false
        },
        {
          "line": 3753,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(pPage->data + pPage->num, pBuf, length)",
          "old_line_content": "",
          "new_line_content": "    memcpy(pPage->data + pPage->num, pBuf, length);",
          "content_same": false
        },
        {
          "line": 3757,
          "old_api": null,
          "new_api": "releaseBufPage",
          "old_text": null,
          "new_text": "releaseBufPage(pHandle->pBuf, pPage)",
          "old_line_content": "  } else {",
          "new_line_content": "    releaseBufPage(pHandle->pBuf, pPage);",
          "content_same": false
        },
        {
          "line": 5806,
          "old_api": null,
          "new_api": "colDataGetData",
          "old_text": null,
          "new_text": "colDataGetData(pInputCol, 0)",
          "old_line_content": "      for (; i < pInput->numOfRows + pInput->startRowIndex; i += 1) {",
          "new_line_content": "      uint32_t* val = (uint32_t*)colDataGetData(pInputCol, 0);",
          "content_same": false
        },
        {
          "line": 5808,
          "old_api": null,
          "new_api": "colDataIsNull_f",
          "old_text": null,
          "new_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "old_line_content": "          continue;",
          "new_line_content": "        if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "content_same": false
        },
        {
          "line": 3761,
          "old_api": null,
          "new_api": "ASSERT",
          "old_text": null,
          "new_text": "ASSERT(0)",
          "old_line_content": "    }",
          "new_line_content": "      ASSERT(0);",
          "content_same": false
        },
        {
          "line": 5813,
          "old_api": null,
          "new_api": "INIT_INTP_POINT",
          "old_text": null,
          "new_text": "INIT_INTP_POINT(st, tsList[i], val[i])",
          "old_line_content": "        if (pInfo->p.key == st.key) {",
          "new_line_content": "        INIT_INTP_POINT(st, tsList[i], val[i]);",
          "content_same": false
        },
        {
          "line": 5818,
          "old_api": null,
          "new_api": "twa_get_area",
          "old_text": null,
          "new_text": "twa_get_area(pInfo->p, st)",
          "old_line_content": "        pInfo->p = st;",
          "new_line_content": "        pInfo->dOutput += twa_get_area(pInfo->p, st);",
          "content_same": false
        },
        {
          "line": 5824,
          "old_api": null,
          "new_api": "colDataGetData",
          "old_text": null,
          "new_text": "colDataGetData(pInputCol, 0)",
          "old_line_content": "      for (; i < pInput->numOfRows + pInput->startRowIndex; i += 1) {",
          "new_line_content": "      uint64_t* val = (uint64_t*)colDataGetData(pInputCol, 0);",
          "content_same": false
        },
        {
          "line": 3778,
          "old_api": null,
          "new_api": "taosMemoryMalloc",
          "old_text": null,
          "new_text": "taosMemoryMalloc(pCtx->subsidiaries.rowLen)",
          "old_line_content": "  }",
          "new_line_content": "    pCtx->subsidiaries.buf = taosMemoryMalloc(pCtx->subsidiaries.rowLen);",
          "content_same": false
        },
        {
          "line": 5826,
          "old_api": null,
          "new_api": "colDataIsNull_f",
          "old_text": null,
          "new_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "old_line_content": "          continue;",
          "new_line_content": "        if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "content_same": false
        },
        {
          "line": 3782,
          "old_api": null,
          "new_api": "doSaveTupleData",
          "old_text": null,
          "new_text": "doSaveTupleData(&pCtx->saveHandle, buf, pCtx->subsidiaries.rowLen, pKey)",
          "old_line_content": "}",
          "new_line_content": "  return doSaveTupleData(&pCtx->saveHandle, buf, pCtx->subsidiaries.rowLen, pKey);",
          "content_same": false
        },
        {
          "line": 5831,
          "old_api": null,
          "new_api": "INIT_INTP_POINT",
          "old_text": null,
          "new_text": "INIT_INTP_POINT(st, tsList[i], val[i])",
          "old_line_content": "        if (pInfo->p.key == st.key) {",
          "new_line_content": "        INIT_INTP_POINT(st, tsList[i], val[i]);",
          "content_same": false
        },
        {
          "line": 5836,
          "old_api": null,
          "new_api": "twa_get_area",
          "old_text": null,
          "new_text": "twa_get_area(pInfo->p, st)",
          "old_line_content": "        pInfo->p = st;",
          "new_line_content": "        pInfo->dOutput += twa_get_area(pInfo->p, st);",
          "content_same": false
        },
        {
          "line": 3790,
          "old_api": null,
          "new_api": "releaseBufPage",
          "old_text": null,
          "new_text": "releaseBufPage(pHandle->pBuf, pPage)",
          "old_line_content": "  } else {",
          "new_line_content": "    releaseBufPage(pHandle->pBuf, pPage);",
          "content_same": false
        },
        {
          "line": 3792,
          "old_api": null,
          "new_api": "streamStateFuncPut",
          "old_text": null,
          "new_text": "streamStateFuncPut(pHandle->pState, &pPos->streamTupleKey, pBuf, length)",
          "old_line_content": "  }",
          "new_line_content": "    streamStateFuncPut(pHandle->pState, &pPos->streamTupleKey, pBuf, length);",
          "content_same": false
        },
        {
          "line": 5843,
          "old_api": null,
          "new_api": "ASSERT",
          "old_text": null,
          "new_text": "ASSERT(0)",
          "old_line_content": "  }",
          "new_line_content": "      ASSERT(0);",
          "content_same": false
        },
        {
          "line": 3800,
          "old_api": null,
          "new_api": "doUpdateTupleData",
          "old_text": null,
          "new_text": "doUpdateTupleData(&pCtx->saveHandle, buf, pCtx->subsidiaries.rowLen, pPos)",
          "old_line_content": "  return TSDB_CODE_SUCCESS;",
          "new_line_content": "  doUpdateTupleData(&pCtx->saveHandle, buf, pCtx->subsidiaries.rowLen, pPos);",
          "content_same": false
        },
        {
          "line": 5848,
          "old_api": null,
          "new_api": "twa_get_area",
          "old_text": null,
          "new_text": "twa_get_area(pInfo->p, pCtx->end)",
          "old_line_content": "    pInfo->p = pCtx->end;",
          "new_line_content": "    pInfo->dOutput += twa_get_area(pInfo->p, pCtx->end);",
          "content_same": false
        },
        {
          "line": 3806,
          "old_api": null,
          "new_api": "getBufPage",
          "old_text": null,
          "new_text": "getBufPage(pHandle->pBuf, pPos->pageId)",
          "old_line_content": "    char*      p = pPage->data + pPos->offset;",
          "new_line_content": "    SFilePage* pPage = getBufPage(pHandle->pBuf, pPos->pageId);",
          "content_same": false
        },
        {
          "line": 3808,
          "old_api": null,
          "new_api": "releaseBufPage",
          "old_text": null,
          "new_text": "releaseBufPage(pHandle->pBuf, pPage)",
          "old_line_content": "    return p;",
          "new_line_content": "    releaseBufPage(pHandle->pBuf, pPage);",
          "content_same": false
        },
        {
          "line": 5860,
          "old_api": null,
          "new_api": "SET_VAL",
          "old_text": null,
          "new_text": "SET_VAL(pResInfo, 1, 1)",
          "old_line_content": "  return TSDB_CODE_SUCCESS;",
          "new_line_content": "  SET_VAL(pResInfo, 1, 1);",
          "content_same": false
        },
        {
          "line": 3813,
          "old_api": null,
          "new_api": "streamStateFuncGet",
          "old_text": null,
          "new_text": "streamStateFuncGet(pHandle->pState, &pPos->streamTupleKey, &value, &vLen)",
          "old_line_content": "    return (char*)value;",
          "new_line_content": "    streamStateFuncGet(pHandle->pState, &pPos->streamTupleKey, &value, &vLen);",
          "content_same": false
        },
        {
          "line": 3819,
          "old_api": null,
          "new_api": "doLoadTupleData",
          "old_text": null,
          "new_text": "doLoadTupleData(&pCtx->saveHandle, pPos)",
          "old_line_content": "}",
          "new_line_content": "  return doLoadTupleData(&pCtx->saveHandle, pPos);",
          "content_same": false
        },
        {
          "line": 3824,
          "old_api": null,
          "new_api": "getTopBotOutputInfo",
          "old_text": null,
          "new_text": "getTopBotOutputInfo(pCtx)",
          "old_line_content": "",
          "new_line_content": "  STopBotRes*          pRes = getTopBotOutputInfo(pCtx);",
          "content_same": false
        },
        {
          "line": 3829,
          "old_api": null,
          "new_api": "taosArrayGet",
          "old_text": null,
          "new_text": "taosArrayGet(pBlock->pDataBlock, slotId)",
          "old_line_content": "",
          "new_line_content": "  SColumnInfoData* pCol = taosArrayGet(pBlock->pDataBlock, slotId);",
          "content_same": false
        },
        {
          "line": 5878,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "",
          "new_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 5880,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "  if (pInfo->isNull == true) {",
          "new_line_content": "  STwaInfo* pInfo = (STwaInfo*)GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 3835,
          "old_api": null,
          "new_api": "setSelectivityValue",
          "old_text": null,
          "new_text": "setSelectivityValue(pCtx, pBlock, &pRes->nullTuplePos, currentRow)",
          "old_line_content": "    return pEntryInfo->numOfRes;",
          "new_line_content": "    setSelectivityValue(pCtx, pBlock, &pRes->nullTuplePos, currentRow);",
          "content_same": false
        },
        {
          "line": 3842,
          "old_api": null,
          "new_api": "colDataAppend",
          "old_text": null,
          "new_text": "colDataAppend(pCol, currentRow, (const char*)&v, false)",
          "old_line_content": "    } else {",
          "new_line_content": "      colDataAppend(pCol, currentRow, (const char*)&v, false);",
          "content_same": false
        },
        {
          "line": 3844,
          "old_api": null,
          "new_api": "colDataAppend",
          "old_text": null,
          "new_text": "colDataAppend(pCol, currentRow, (const char*)&pItem->v.i, false)",
          "old_line_content": "    }",
          "new_line_content": "      colDataAppend(pCol, currentRow, (const char*)&pItem->v.i, false);",
          "content_same": false
        },
        {
          "line": 5893,
          "old_api": null,
          "new_api": "functionFinalize",
          "old_text": null,
          "new_text": "functionFinalize(pCtx, pBlock)",
          "old_line_content": "}",
          "new_line_content": "  return functionFinalize(pCtx, pBlock);",
          "content_same": false
        },
        {
          "line": 3847,
          "old_api": null,
          "new_api": "qDebug",
          "old_text": null,
          "new_text": "qDebug(\"page_finalize i:%d,item:%p,pageId:%d, offset:%d\\n\", i, pItem, pItem->tuplePos.pageId,\n           pItem->tuplePos.offset)",
          "old_line_content": "           pItem->tuplePos.offset);",
          "new_line_content": "    qDebug(\"page_finalize i:%d,item:%p,pageId:%d, offset:%d\\n\", i, pItem, pItem->tuplePos.pageId,",
          "content_same": false
        },
        {
          "line": 5897,
          "old_api": null,
          "new_api": "functionSetup",
          "old_text": null,
          "new_text": "functionSetup(pCtx, pResultInfo)",
          "old_line_content": "    return false;",
          "new_line_content": "  if (!functionSetup(pCtx, pResultInfo)) {",
          "content_same": false
        },
        {
          "line": 3850,
          "old_api": null,
          "new_api": "setSelectivityValue",
          "old_text": null,
          "new_text": "setSelectivityValue(pCtx, pBlock, &pRes->pItems[i].tuplePos, currentRow)",
          "old_line_content": "    currentRow += 1;",
          "new_line_content": "    setSelectivityValue(pCtx, pBlock, &pRes->pItems[i].tuplePos, currentRow);",
          "content_same": false
        },
        {
          "line": 5901,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  pInfo->minRows = INT32_MAX;",
          "new_line_content": "  STableBlockDistInfo* pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "content_same": false
        },
        {
          "line": 3859,
          "old_api": null,
          "new_api": "getTopBotOutputInfo",
          "old_text": null,
          "new_text": "getTopBotOutputInfo(pCtx)",
          "old_line_content": "  STopBotResItem*      pItems = pRes->pItems;",
          "new_line_content": "  STopBotRes*          pRes = getTopBotOutputInfo(pCtx);",
          "content_same": false
        },
        {
          "line": 3861,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(pItems != NULL)",
          "old_line_content": "",
          "new_line_content": "  assert(pItems != NULL);",
          "content_same": false
        },
        {
          "line": 5912,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "",
          "new_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "content_same": false
        },
        {
          "line": 5914,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "",
          "new_line_content": "  STableBlockDistInfo* pDistInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 3869,
          "old_api": null,
          "new_api": "replaceTupleData",
          "old_text": null,
          "new_text": "replaceTupleData(&pItem->tuplePos, &pSourceItem->tuplePos)",
          "old_line_content": "    pEntryInfo->numOfRes++;",
          "new_line_content": "    replaceTupleData(&pItem->tuplePos, &pSourceItem->tuplePos);",
          "content_same": false
        },
        {
          "line": 5917,
          "old_api": null,
          "new_api": "varDataLen",
          "old_text": null,
          "new_text": "varDataLen(pInputCol->pData)",
          "old_line_content": "",
          "new_line_content": "  tDeserializeBlockDistInfo(varDataVal(pInputCol->pData), varDataLen(pInputCol->pData), &p1);",
          "content_same": false
        },
        {
          "line": 3871,
          "old_api": null,
          "new_api": "taosheapsort",
          "old_text": null,
          "new_text": "taosheapsort((void*)pItems, sizeof(STopBotResItem), pEntryInfo->numOfRes, (const void*)&type, topBotResComparFn,\n                 !isTopQuery)",
          "old_line_content": "                 !isTopQuery);",
          "new_line_content": "    taosheapsort((void*)pItems, sizeof(STopBotResItem), pEntryInfo->numOfRes, (const void*)&type, topBotResComparFn,",
          "content_same": false
        },
        {
          "line": 3879,
          "old_api": null,
          "new_api": "IS_FLOAT_TYPE",
          "old_text": null,
          "new_text": "IS_FLOAT_TYPE(type)",
          "old_line_content": "      // replace the old data and the coresponding tuple data",
          "new_line_content": "                         (IS_FLOAT_TYPE(type) && pSourceItem->v.d < pItems[0].v.d)))) {",
          "content_same": false
        },
        {
          "line": 3887,
          "old_api": null,
          "new_api": "taosheapadjust",
          "old_text": null,
          "new_text": "taosheapadjust((void*)pItems, sizeof(STopBotResItem), 0, pEntryInfo->numOfRes - 1, (const void*)&type,\n                     topBotResComparFn, NULL, !isTopQuery)",
          "old_line_content": "                     topBotResComparFn, NULL, !isTopQuery);",
          "new_line_content": "      taosheapadjust((void*)pItems, sizeof(STopBotResItem), 0, pEntryInfo->numOfRes - 1, (const void*)&type,",
          "content_same": false
        },
        {
          "line": 5938,
          "old_api": null,
          "new_api": "tListLen",
          "old_text": null,
          "new_text": "tListLen(pDistInfo->blockRowsHisto)",
          "old_line_content": "    pDistInfo->blockRowsHisto[i] += p1.blockRowsHisto[i];",
          "new_line_content": "  for (int32_t i = 0; i < tListLen(pDistInfo->blockRowsHisto); ++i) {",
          "content_same": false
        },
        {
          "line": 3895,
          "old_api": null,
          "new_api": "getTopBotOutputInfo",
          "old_text": null,
          "new_text": "getTopBotOutputInfo(pSourceCtx)",
          "old_line_content": "  int16_t              type = pSBuf->type;",
          "new_line_content": "  STopBotRes*          pSBuf = getTopBotOutputInfo(pSourceCtx);",
          "content_same": false
        },
        {
          "line": 3898,
          "old_api": null,
          "new_api": "addResult",
          "old_text": null,
          "new_text": "addResult(pDestCtx, pSBuf->pItems + i, type, true)",
          "old_line_content": "  }",
          "new_line_content": "    addResult(pDestCtx, pSBuf->pItems + i, type, true);",
          "content_same": false
        },
        {
          "line": 5948,
          "old_api": null,
          "new_api": "tEncoderInit",
          "old_text": null,
          "new_text": "tEncoderInit(&encoder, buf, bufLen)",
          "old_line_content": "",
          "new_line_content": "  tEncoderInit(&encoder, buf, bufLen);",
          "content_same": false
        },
        {
          "line": 5951,
          "old_api": null,
          "new_api": "tEncodeU32",
          "old_text": null,
          "new_text": "tEncodeU32(&encoder, pInfo->rowSize)",
          "old_line_content": "",
          "new_line_content": "  if (tEncodeU32(&encoder, pInfo->rowSize) < 0) return -1;",
          "content_same": false
        },
        {
          "line": 3905,
          "old_api": null,
          "new_api": "getTopBotOutputInfo",
          "old_text": null,
          "new_text": "getTopBotOutputInfo(pSourceCtx)",
          "old_line_content": "  int16_t              type = pSBuf->type;",
          "new_line_content": "  STopBotRes*          pSBuf = getTopBotOutputInfo(pSourceCtx);",
          "content_same": false
        },
        {
          "line": 5955,
          "old_api": null,
          "new_api": "tEncodeU32",
          "old_text": null,
          "new_text": "tEncodeU32(&encoder, pInfo->numOfTables)",
          "old_line_content": "",
          "new_line_content": "  if (tEncodeU32(&encoder, pInfo->numOfTables) < 0) return -1;",
          "content_same": false
        },
        {
          "line": 3908,
          "old_api": null,
          "new_api": "addResult",
          "old_text": null,
          "new_text": "addResult(pDestCtx, pSBuf->pItems + i, type, false)",
          "old_line_content": "  }",
          "new_line_content": "    addResult(pDestCtx, pSBuf->pItems + i, type, false);",
          "content_same": false
        },
        {
          "line": 5964,
          "old_api": null,
          "new_api": "tEncodeU32",
          "old_text": null,
          "new_text": "tEncodeU32(&encoder, pInfo->numOfSmallBlocks)",
          "old_line_content": "",
          "new_line_content": "  if (tEncodeU32(&encoder, pInfo->numOfSmallBlocks) < 0) return -1;",
          "content_same": false
        },
        {
          "line": 5967,
          "old_api": null,
          "new_api": "tEncodeI32",
          "old_text": null,
          "new_text": "tEncodeI32(&encoder, pInfo->blockRowsHisto[i])",
          "old_line_content": "  }",
          "new_line_content": "    if (tEncodeI32(&encoder, pInfo->blockRowsHisto[i]) < 0) return -1;",
          "content_same": false
        },
        {
          "line": 3921,
          "old_api": null,
          "new_api": "functionSetup",
          "old_text": null,
          "new_text": "functionSetup(pCtx, pResultInfo)",
          "old_line_content": "    return false;",
          "new_line_content": "  if (!functionSetup(pCtx, pResultInfo)) {",
          "content_same": false
        },
        {
          "line": 5970,
          "old_api": null,
          "new_api": "tEndEncode",
          "old_text": null,
          "new_text": "tEndEncode(&encoder)",
          "old_line_content": "",
          "new_line_content": "  tEndEncode(&encoder);",
          "content_same": false
        },
        {
          "line": 5973,
          "old_api": null,
          "new_api": "tEncoderClear",
          "old_text": null,
          "new_text": "tEncoderClear(&encoder)",
          "old_line_content": "  return tlen;",
          "new_line_content": "  tEncoderClear(&encoder);",
          "content_same": false
        },
        {
          "line": 3927,
          "old_api": null,
          "new_api": "SET_DOUBLE_VAL",
          "old_text": null,
          "new_text": "SET_DOUBLE_VAL(&pInfo->max, -DBL_MAX)",
          "old_line_content": "  pInfo->hasResult = false;",
          "new_line_content": "  SET_DOUBLE_VAL(&pInfo->max, -DBL_MAX);",
          "content_same": false
        },
        {
          "line": 5979,
          "old_api": null,
          "new_api": "tDecoderInit",
          "old_text": null,
          "new_text": "tDecoderInit(&decoder, buf, bufLen)",
          "old_line_content": "",
          "new_line_content": "  tDecoderInit(&decoder, buf, bufLen);",
          "content_same": false
        },
        {
          "line": 5982,
          "old_api": null,
          "new_api": "tDecodeU32",
          "old_text": null,
          "new_text": "tDecodeU32(&decoder, &pInfo->rowSize)",
          "old_line_content": "",
          "new_line_content": "  if (tDecodeU32(&decoder, &pInfo->rowSize) < 0) return -1;",
          "content_same": false
        },
        {
          "line": 5986,
          "old_api": null,
          "new_api": "tDecodeU32",
          "old_text": null,
          "new_text": "tDecodeU32(&decoder, &pInfo->numOfTables)",
          "old_line_content": "",
          "new_line_content": "  if (tDecodeU32(&decoder, &pInfo->numOfTables) < 0) return -1;",
          "content_same": false
        },
        {
          "line": 3940,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "",
          "new_line_content": "  SSpreadInfo* pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "content_same": false
        },
        {
          "line": 5995,
          "old_api": null,
          "new_api": "tDecodeU32",
          "old_text": null,
          "new_text": "tDecodeU32(&decoder, &pInfo->numOfSmallBlocks)",
          "old_line_content": "",
          "new_line_content": "  if (tDecodeU32(&decoder, &pInfo->numOfSmallBlocks) < 0) return -1;",
          "content_same": false
        },
        {
          "line": 5998,
          "old_api": null,
          "new_api": "tDecodeI32",
          "old_text": null,
          "new_text": "tDecodeI32(&decoder, &pInfo->blockRowsHisto[i])",
          "old_line_content": "  }",
          "new_line_content": "    if (tDecodeI32(&decoder, &pInfo->blockRowsHisto[i]) < 0) return -1;",
          "content_same": false
        },
        {
          "line": 6001,
          "old_api": null,
          "new_api": "tDecoderClear",
          "old_text": null,
          "new_text": "tDecoderClear(&decoder)",
          "old_line_content": "  return 0;",
          "new_line_content": "  tDecoderClear(&decoder);",
          "content_same": false
        },
        {
          "line": 3956,
          "old_api": null,
          "new_api": "GET_UINT64_VAL",
          "old_text": null,
          "new_text": "GET_UINT64_VAL(&pAgg->max)",
          "old_line_content": "    }",
          "new_line_content": "      tmax = (double)GET_UINT64_VAL(&pAgg->max);",
          "content_same": false
        },
        {
          "line": 6007,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "",
          "new_line_content": "  STableBlockDistInfo* pData = GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 3960,
          "old_api": null,
          "new_api": "SET_DOUBLE_VAL",
          "old_text": null,
          "new_text": "SET_DOUBLE_VAL(&pInfo->min, tmin)",
          "old_line_content": "    }",
          "new_line_content": "      SET_DOUBLE_VAL(&pInfo->min, tmin);",
          "content_same": false
        },
        {
          "line": 6009,
          "old_api": null,
          "new_api": "taosArrayGet",
          "old_text": null,
          "new_text": "taosArrayGet(pBlock->pDataBlock, 0)",
          "old_line_content": "",
          "new_line_content": "  SColumnInfoData* pColInfo = taosArrayGet(pBlock->pDataBlock, 0);",
          "content_same": false
        },
        {
          "line": 3964,
          "old_api": null,
          "new_api": "SET_DOUBLE_VAL",
          "old_text": null,
          "new_text": "SET_DOUBLE_VAL(&pInfo->max, tmax)",
          "old_line_content": "    }",
          "new_line_content": "      SET_DOUBLE_VAL(&pInfo->max, tmax);",
          "content_same": false
        },
        {
          "line": 6018,
          "old_api": null,
          "new_api": "sprintf",
          "old_text": null,
          "new_text": "sprintf(st + VARSTR_HEADER_SIZE,\n                        \"Total_Blocks=[%d] Total_Size=[%.2f Kb] Average_size=[%.2f Kb] Compression_Ratio=[%.2f %c]\",\n                        pData->numOfBlocks, pData->totalSize / 1024.0, ((double)pData->totalSize) / pData->numOfBlocks,\n                        pData->totalSize * 100 / totalRawSize, '%')",
          "old_line_content": "                        \"Total_Blocks=[%d] Total_Size=[%.2f Kb] Average_size=[%.2f Kb] Compression_Ratio=[%.2f %c]\",",
          "new_line_content": "  int32_t len = sprintf(st + VARSTR_HEADER_SIZE,",
          "content_same": false
        },
        {
          "line": 3973,
          "old_api": null,
          "new_api": "colDataIsNull_f",
          "old_text": null,
          "new_text": "colDataIsNull_f(pCol->nullbitmap, i)",
          "old_line_content": "        continue;",
          "new_line_content": "      if (colDataIsNull_f(pCol->nullbitmap, i)) {",
          "content_same": false
        },
        {
          "line": 6024,
          "old_api": null,
          "new_api": "colDataAppend",
          "old_text": null,
          "new_text": "colDataAppend(pColInfo, row++, st, false)",
          "old_line_content": "",
          "new_line_content": "  colDataAppend(pColInfo, row++, st, false);",
          "content_same": false
        },
        {
          "line": 3977,
          "old_api": null,
          "new_api": "colDataGetData",
          "old_text": null,
          "new_text": "colDataGetData(pCol, i)",
          "old_line_content": "",
          "new_line_content": "      char* data = colDataGetData(pCol, i);",
          "content_same": false
        },
        {
          "line": 3982,
          "old_api": null,
          "new_api": "SET_DOUBLE_VAL",
          "old_text": null,
          "new_text": "SET_DOUBLE_VAL(&pInfo->min, v)",
          "old_line_content": "      }",
          "new_line_content": "        SET_DOUBLE_VAL(&pInfo->min, v);",
          "content_same": false
        },
        {
          "line": 6031,
          "old_api": null,
          "new_api": "sprintf",
          "old_text": null,
          "new_text": "sprintf(st + VARSTR_HEADER_SIZE,\n                \"Total_Rows=[%\" PRId64 \"] Inmem_Rows=[%d] MinRows=[%d] MaxRows=[%d] Average_Rows=[%\" PRId64 \"]\",\n                pData->totalRows, pData->numOfInmemRows, pData->minRows, pData->maxRows, avgRows)",
          "old_line_content": "                \"Total_Rows=[%\" PRId64 \"] Inmem_Rows=[%d] MinRows=[%d] MaxRows=[%d] Average_Rows=[%\" PRId64 \"]\",",
          "new_line_content": "  len = sprintf(st + VARSTR_HEADER_SIZE,",
          "content_same": false
        },
        {
          "line": 3986,
          "old_api": null,
          "new_api": "SET_DOUBLE_VAL",
          "old_text": null,
          "new_text": "SET_DOUBLE_VAL(&pInfo->max, v)",
          "old_line_content": "      }",
          "new_line_content": "        SET_DOUBLE_VAL(&pInfo->max, v);",
          "content_same": false
        },
        {
          "line": 6036,
          "old_api": null,
          "new_api": "colDataAppend",
          "old_text": null,
          "new_text": "colDataAppend(pColInfo, row++, st, false)",
          "old_line_content": "",
          "new_line_content": "  colDataAppend(pColInfo, row++, st, false);",
          "content_same": false
        },
        {
          "line": 6038,
          "old_api": null,
          "new_api": "sprintf",
          "old_text": null,
          "new_text": "sprintf(st + VARSTR_HEADER_SIZE, \"Total_Tables=[%d] Total_Files=[%d] Total_Vgroups=[%d]\", pData->numOfTables,\n                pData->numOfFiles, 0)",
          "old_line_content": "                pData->numOfFiles, 0);",
          "new_line_content": "  len = sprintf(st + VARSTR_HEADER_SIZE, \"Total_Tables=[%d] Total_Files=[%d] Total_Vgroups=[%d]\", pData->numOfTables,",
          "content_same": false
        },
        {
          "line": 6042,
          "old_api": null,
          "new_api": "colDataAppend",
          "old_text": null,
          "new_text": "colDataAppend(pColInfo, row++, st, false)",
          "old_line_content": "",
          "new_line_content": "  colDataAppend(pColInfo, row++, st, false);",
          "content_same": false
        },
        {
          "line": 3995,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  if (numOfElems > 0) {",
          "new_line_content": "  SET_VAL(GET_RES_INFO(pCtx), numOfElems, 1);",
          "content_same": false
        },
        {
          "line": 6044,
          "old_api": null,
          "new_api": "sprintf",
          "old_text": null,
          "new_text": "sprintf(st + VARSTR_HEADER_SIZE,\n                \"--------------------------------------------------------------------------------\")",
          "old_line_content": "                \"--------------------------------------------------------------------------------\");",
          "new_line_content": "  len = sprintf(st + VARSTR_HEADER_SIZE,",
          "content_same": false
        },
        {
          "line": 6047,
          "old_api": null,
          "new_api": "colDataAppend",
          "old_text": null,
          "new_text": "colDataAppend(pColInfo, row++, st, false)",
          "old_line_content": "",
          "new_line_content": "  colDataAppend(pColInfo, row++, st, false);",
          "content_same": false
        },
        {
          "line": 6051,
          "old_api": null,
          "new_api": "tListLen",
          "old_text": null,
          "new_text": "tListLen(pData->blockRowsHisto)",
          "old_line_content": "    if (maxVal < pData->blockRowsHisto[i]) {",
          "new_line_content": "  for (int32_t i = 0; i < tListLen(pData->blockRowsHisto); ++i) {",
          "content_same": false
        },
        {
          "line": 4017,
          "old_api": null,
          "new_api": "ASSERT",
          "old_text": null,
          "new_text": "ASSERT(pCol->info.type == TSDB_DATA_TYPE_BINARY)",
          "old_line_content": "",
          "new_line_content": "  ASSERT(pCol->info.type == TSDB_DATA_TYPE_BINARY);",
          "content_same": false
        },
        {
          "line": 4019,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "",
          "new_line_content": "  SSpreadInfo* pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "content_same": false
        },
        {
          "line": 6068,
          "old_api": null,
          "new_api": "sprintf",
          "old_text": null,
          "new_text": "sprintf(st + VARSTR_HEADER_SIZE, \"%04d |\", pData->defMinRows + bucketRange * i)",
          "old_line_content": "",
          "new_line_content": "    len = sprintf(st + VARSTR_HEADER_SIZE, \"%04d |\", pData->defMinRows + bucketRange * i);",
          "content_same": false
        },
        {
          "line": 4024,
          "old_api": null,
          "new_api": "varDataVal",
          "old_text": null,
          "new_text": "varDataVal(data)",
          "old_line_content": "    if (pInputInfo->hasResult) {",
          "new_line_content": "    SSpreadInfo* pInputInfo = (SSpreadInfo*)varDataVal(data);",
          "content_same": false
        },
        {
          "line": 4026,
          "old_api": null,
          "new_api": "spreadTransferInfo",
          "old_text": null,
          "new_text": "spreadTransferInfo(pInputInfo, pInfo)",
          "old_line_content": "    }",
          "new_line_content": "      spreadTransferInfo(pInputInfo, pInfo);",
          "content_same": false
        },
        {
          "line": 6076,
          "old_api": null,
          "new_api": "sprintf",
          "old_text": null,
          "new_text": "sprintf(st + VARSTR_HEADER_SIZE + len, \"%c\", '|')",
          "old_line_content": "      len += x;",
          "new_line_content": "      int32_t x = sprintf(st + VARSTR_HEADER_SIZE + len, \"%c\", '|');",
          "content_same": false
        },
        {
          "line": 4031,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  }",
          "new_line_content": "    GET_RES_INFO(pCtx)->numOfRes = 1;",
          "content_same": false
        },
        {
          "line": 6082,
          "old_api": null,
          "new_api": "sprintf",
          "old_text": null,
          "new_text": "sprintf(st + VARSTR_HEADER_SIZE + len, \"  %d (%.2f%c)\", pData->blockRowsHisto[i], v, '%')",
          "old_line_content": "    }",
          "new_line_content": "      len += sprintf(st + VARSTR_HEADER_SIZE + len, \"  %d (%.2f%c)\", pData->blockRowsHisto[i], v, '%');",
          "content_same": false
        },
        {
          "line": 4038,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  if (pInfo->hasResult == true) {",
          "new_line_content": "  SSpreadInfo* pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "content_same": false
        },
        {
          "line": 6086,
          "old_api": null,
          "new_api": "colDataAppend",
          "old_text": null,
          "new_text": "colDataAppend(pColInfo, row++, st, false)",
          "old_line_content": "  }",
          "new_line_content": "    colDataAppend(pColInfo, row++, st, false);",
          "content_same": false
        },
        {
          "line": 4040,
          "old_api": null,
          "new_api": "SET_DOUBLE_VAL",
          "old_text": null,
          "new_text": "SET_DOUBLE_VAL(&pInfo->result, pInfo->max - pInfo->min)",
          "old_line_content": "  } else {",
          "new_line_content": "    SET_DOUBLE_VAL(&pInfo->result, pInfo->max - pInfo->min);",
          "content_same": false
        },
        {
          "line": 4042,
          "old_api": null,
          "new_api": "GET_RES_INFO",
          "old_text": null,
          "new_text": "GET_RES_INFO(pCtx)",
          "old_line_content": "  }",
          "new_line_content": "    GET_RES_INFO(pCtx)->isNullRes = 1;",
          "content_same": false
        },
        {
          "line": 4044,
          "old_api": null,
          "new_api": "functionFinalize",
          "old_text": null,
          "new_text": "functionFinalize(pCtx, pBlock)",
          "old_line_content": "}",
          "new_line_content": "  return functionFinalize(pCtx, pBlock);",
          "content_same": false
        },
        {
          "line": 6098,
          "old_api": null,
          "new_api": "functionSetup",
          "old_text": null,
          "new_text": "functionSetup(pCtx, pResInfo)",
          "old_line_content": "    return false;  // not initialized since it has been initialized",
          "new_line_content": "  if (!functionSetup(pCtx, pResInfo)) {",
          "content_same": false
        },
        {
          "line": 4051,
          "old_api": null,
          "new_api": "taosMemoryCalloc",
          "old_text": null,
          "new_text": "taosMemoryCalloc(resultBytes + VARSTR_HEADER_SIZE, sizeof(char))",
          "old_line_content": "",
          "new_line_content": "  char*                res = taosMemoryCalloc(resultBytes + VARSTR_HEADER_SIZE, sizeof(char));",
          "content_same": false
        },
        {
          "line": 4054,
          "old_api": null,
          "new_api": "varDataSetLen",
          "old_text": null,
          "new_text": "varDataSetLen(res, resultBytes)",
          "old_line_content": "",
          "new_line_content": "  varDataSetLen(res, resultBytes);",
          "content_same": false
        },
        {
          "line": 6102,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "",
          "new_line_content": "  SDerivInfo* pDerivInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 4057,
          "old_api": null,
          "new_api": "taosArrayGet",
          "old_text": null,
          "new_text": "taosArrayGet(pBlock->pDataBlock, slotId)",
          "old_line_content": "",
          "new_line_content": "  SColumnInfoData* pCol = taosArrayGet(pBlock->pDataBlock, slotId);",
          "content_same": false
        },
        {
          "line": 4059,
          "old_api": null,
          "new_api": "colDataAppend",
          "old_text": null,
          "new_text": "colDataAppend(pCol, pBlock->info.rows, res, false)",
          "old_line_content": "",
          "new_line_content": "  colDataAppend(pCol, pBlock->info.rows, res, false);",
          "content_same": false
        },
        {
          "line": 4061,
          "old_api": null,
          "new_api": "taosMemoryFree",
          "old_text": null,
          "new_text": "taosMemoryFree(res)",
          "old_line_content": "  return pResInfo->numOfRes;",
          "new_line_content": "  taosMemoryFree(res);",
          "content_same": false
        },
        {
          "line": 6113,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "old_line_content": "",
          "new_line_content": "  SDerivInfo*          pDerivInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "content_same": false
        },
        {
          "line": 4067,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pDResInfo)",
          "old_line_content": "",
          "new_line_content": "  SSpreadInfo*         pDBuf = GET_ROWCELL_INTERBUF(pDResInfo);",
          "content_same": false
        },
        {
          "line": 4072,
          "old_api": null,
          "new_api": "TMAX",
          "old_text": null,
          "new_text": "TMAX(pDResInfo->numOfRes, pSResInfo->numOfRes)",
          "old_line_content": "  pDResInfo->isNullRes &= pSResInfo->isNullRes;",
          "new_line_content": "  pDResInfo->numOfRes = TMAX(pDResInfo->numOfRes, pSResInfo->numOfRes);",
          "content_same": false
        },
        {
          "line": 6129,
          "old_api": null,
          "new_api": "colDataIsNull_f",
          "old_text": null,
          "new_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "old_line_content": "        continue;",
          "new_line_content": "      if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "content_same": false
        },
        {
          "line": 4085,
          "old_api": null,
          "new_api": "functionSetup",
          "old_text": null,
          "new_text": "functionSetup(pCtx, pResultInfo)",
          "old_line_content": "    return false;",
          "new_line_content": "  if (!functionSetup(pCtx, pResultInfo)) {",
          "content_same": false
        },
        {
          "line": 4089,
          "old_api": null,
          "new_api": "GET_ROWCELL_INTERBUF",
          "old_text": null,
          "new_text": "GET_ROWCELL_INTERBUF(pResultInfo)",
          "old_line_content": "  pInfo->result = 0;",
          "new_line_content": "  SElapsedInfo* pInfo = GET_ROWCELL_INTERBUF(pResultInfo);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 6145,
          "old_api": "colDataAppend",
          "new_api": null,
          "old_text": "colDataAppend(pOutput, pos, (const char*)&r, false)",
          "new_text": null,
          "old_line_content": "            colDataAppend(pOutput, pos, (const char*)&r, false);",
          "new_line_content": "          } else {",
          "content_same": false
        },
        {
          "line": 6149,
          "old_api": "colDataAppendInt64",
          "new_api": null,
          "old_text": "colDataAppendInt64(pTsOutput, pos, &tsList[i])",
          "new_text": null,
          "old_line_content": "            colDataAppendInt64(pTsOutput, pos, &tsList[i]);",
          "new_line_content": "          if (pTsOutput != NULL) {",
          "content_same": false
        },
        {
          "line": 6154,
          "old_api": "appendSelectivityValue",
          "new_api": null,
          "old_text": "appendSelectivityValue(pCtx, i, pos)",
          "new_text": null,
          "old_line_content": "            appendSelectivityValue(pCtx, i, pos);",
          "new_line_content": "          if (pCtx->subsidiaries.num > 0) {",
          "content_same": false
        },
        {
          "line": 4109,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SElapsedInfo* pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4118,
          "old_api": "GET_INT64_VAL",
          "new_api": null,
          "old_text": "GET_INT64_VAL(&pAgg->min)",
          "new_text": null,
          "old_line_content": "      pInfo->min = GET_INT64_VAL(&pAgg->min);",
          "new_line_content": "    if (pInfo->min == TSKEY_MAX) {",
          "content_same": false
        },
        {
          "line": 6166,
          "old_api": "colDataIsNull_f",
          "new_api": null,
          "old_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "new_text": null,
          "old_line_content": "      if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "new_line_content": "    for (; i < pInput->numOfRows + pInput->startRowIndex; i += 1) {",
          "content_same": false
        },
        {
          "line": 4122,
          "old_api": "GET_INT64_VAL",
          "new_api": null,
          "old_text": "GET_INT64_VAL(&pAgg->max)",
          "new_text": null,
          "old_line_content": "        pInfo->max = GET_INT64_VAL(&pAgg->max);",
          "new_line_content": "      if (pCtx->order == TSDB_ORDER_ASC) {",
          "content_same": false
        },
        {
          "line": 4124,
          "old_api": "GET_INT64_VAL",
          "new_api": null,
          "old_text": "GET_INT64_VAL(&pAgg->min)",
          "new_text": null,
          "old_line_content": "        pInfo->min = GET_INT64_VAL(&pAgg->min);",
          "new_line_content": "      } else {",
          "content_same": false
        },
        {
          "line": 6180,
          "old_api": "isnan",
          "new_api": null,
          "old_text": "isnan(r)",
          "new_text": null,
          "old_line_content": "          if (isinf(r) || isnan(r)) {",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 6183,
          "old_api": "colDataAppend",
          "new_api": null,
          "old_text": "colDataAppend(pOutput, pos, (const char*)&r, false)",
          "new_text": null,
          "old_line_content": "            colDataAppend(pOutput, pos, (const char*)&r, false);",
          "new_line_content": "          } else {",
          "content_same": false
        },
        {
          "line": 6187,
          "old_api": "colDataAppendInt64",
          "new_api": null,
          "old_text": "colDataAppendInt64(pTsOutput, pos, &pDerivInfo->prevTs)",
          "new_text": null,
          "old_line_content": "            colDataAppendInt64(pTsOutput, pos, &pDerivInfo->prevTs);",
          "new_line_content": "          if (pTsOutput != NULL) {",
          "content_same": false
        },
        {
          "line": 4144,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pCol, 0)",
          "new_text": null,
          "old_line_content": "    TSKEY*  ptsList = (int64_t*)colDataGetData(pCol, 0);",
          "new_line_content": "    int32_t start = pInput->startRowIndex;",
          "content_same": false
        },
        {
          "line": 6192,
          "old_api": "appendSelectivityValue",
          "new_api": null,
          "old_text": "appendSelectivityValue(pCtx, i, pos)",
          "new_text": null,
          "old_line_content": "            appendSelectivityValue(pCtx, i, pos);",
          "new_line_content": "          if (pCtx->subsidiaries.num > 0) {",
          "content_same": false
        },
        {
          "line": 6213,
          "old_api": "functionSetup",
          "new_api": null,
          "old_text": "functionSetup(pCtx, pResInfo)",
          "new_text": null,
          "old_line_content": "  if (!functionSetup(pCtx, pResInfo)) {",
          "new_line_content": "bool irateFuncSetup(SqlFunctionCtx* pCtx, SResultRowEntryInfo* pResInfo) {",
          "content_same": false
        },
        {
          "line": 6217,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": null,
          "old_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "new_text": null,
          "old_line_content": "  SRateInfo* pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4176,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SET_VAL(GET_RES_INFO(pCtx), numOfElems, 1);",
          "new_line_content": "  // data in the check operation are all null, not output",
          "content_same": false
        },
        {
          "line": 6229,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "int32_t irateFunction(SqlFunctionCtx* pCtx) {",
          "content_same": false
        },
        {
          "line": 4195,
          "old_api": "ASSERT",
          "new_api": null,
          "old_text": "ASSERT(pCol->info.type == TSDB_DATA_TYPE_BINARY)",
          "new_text": null,
          "old_line_content": "  ASSERT(pCol->info.type == TSDB_DATA_TYPE_BINARY);",
          "new_line_content": "  SColumnInfoData*      pCol = pInput->pData[0];",
          "content_same": false
        },
        {
          "line": 6243,
          "old_api": "colDataIsNull_f",
          "new_api": null,
          "old_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "new_text": null,
          "old_line_content": "    if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "new_line_content": "  for (int32_t i = pInput->startRowIndex; i < pInput->numOfRows + pInput->startRowIndex; i += 1) {",
          "content_same": false
        },
        {
          "line": 4197,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SElapsedInfo* pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6249,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pInputCol, i)",
          "new_text": null,
          "old_line_content": "    char*  data = colDataGetData(pInputCol, i);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4202,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pCol, i)",
          "new_text": null,
          "old_line_content": "    char*         data = colDataGetData(pCol, i);",
          "new_line_content": "  for (int32_t i = start; i < start + pInput->numOfRows; ++i) {",
          "content_same": false
        },
        {
          "line": 4207,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SET_VAL(GET_RES_INFO(pCtx), 1, 1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4212,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SElapsedInfo* pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "new_line_content": "int32_t elapsedFinalize(SqlFunctionCtx* pCtx, SSDataBlock* pBlock) {",
          "content_same": false
        },
        {
          "line": 4216,
          "old_api": "functionFinalize",
          "new_api": null,
          "old_text": "functionFinalize(pCtx, pBlock)",
          "new_text": null,
          "old_line_content": "  return functionFinalize(pCtx, pBlock);",
          "new_line_content": "  pInfo->result = result / pInfo->timeUnit;",
          "content_same": false
        },
        {
          "line": 4220,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "int32_t elapsedPartialFinalize(SqlFunctionCtx* pCtx, SSDataBlock* pBlock) {",
          "content_same": false
        },
        {
          "line": 4225,
          "old_api": "varDataVal",
          "new_api": null,
          "old_text": "varDataVal(res)",
          "new_text": null,
          "old_line_content": "  memcpy(varDataVal(res), pInfo, resultBytes);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4229,
          "old_api": "taosArrayGet",
          "new_api": null,
          "old_text": "taosArrayGet(pBlock->pDataBlock, slotId)",
          "new_text": null,
          "old_line_content": "  SColumnInfoData* pCol = taosArrayGet(pBlock->pDataBlock, slotId);",
          "new_line_content": "  int32_t          slotId = pCtx->pExpr->base.resSchema.slotId;",
          "content_same": false
        },
        {
          "line": 6277,
          "old_api": "SET_VAL",
          "new_api": null,
          "old_text": "SET_VAL(pResInfo, numOfElems, 1)",
          "new_text": null,
          "old_line_content": "  SET_VAL(pResInfo, numOfElems, 1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4231,
          "old_api": "colDataAppend",
          "new_api": null,
          "old_text": "colDataAppend(pCol, pBlock->info.rows, res, false)",
          "new_text": null,
          "old_line_content": "  colDataAppend(pCol, pBlock->info.rows, res, false);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4233,
          "old_api": "taosMemoryFree",
          "new_api": null,
          "old_text": "taosMemoryFree(res)",
          "new_text": null,
          "old_line_content": "  taosMemoryFree(res);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4238,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pDestCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pDResInfo = GET_RES_INFO(pDestCtx);",
          "new_line_content": "int32_t elapsedCombine(SqlFunctionCtx* pDestCtx, SqlFunctionCtx* pSourceCtx) {",
          "content_same": false
        },
        {
          "line": 4241,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pSourceCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pSResInfo = GET_RES_INFO(pSourceCtx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4244,
          "old_api": "elapsedTransferInfo",
          "new_api": null,
          "old_text": "elapsedTransferInfo(pSBuf, pDBuf)",
          "new_text": null,
          "old_line_content": "  elapsedTransferInfo(pSBuf, pDBuf);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6305,
          "old_api": "taosArrayGet",
          "new_api": null,
          "old_text": "taosArrayGet(pBlock->pDataBlock, slotId)",
          "new_text": null,
          "old_line_content": "  SColumnInfoData* pCol = taosArrayGet(pBlock->pDataBlock, slotId);",
          "new_line_content": "  int32_t          slotId = pCtx->pExpr->base.resSchema.slotId;",
          "content_same": false
        },
        {
          "line": 6307,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4261,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(binTypeStr, \"user_input\")",
          "new_text": null,
          "old_line_content": "  if (strcasecmp(binTypeStr, \"user_input\") == 0) {",
          "new_line_content": "  int8_t binType;",
          "content_same": false
        },
        {
          "line": 6310,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": null,
          "old_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "new_text": null,
          "old_line_content": "  SRateInfo* pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4263,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(binTypeStr, \"linear_bin\")",
          "new_text": null,
          "old_line_content": "  } else if (strcasecmp(binTypeStr, \"linear_bin\") == 0) {",
          "new_line_content": "    binType = USER_INPUT_BIN;",
          "content_same": false
        },
        {
          "line": 4265,
          "old_api": "strcasecmp",
          "new_api": null,
          "old_text": "strcasecmp(binTypeStr, \"log_bin\")",
          "new_text": null,
          "old_line_content": "  } else if (strcasecmp(binTypeStr, \"log_bin\") == 0) {",
          "new_line_content": "    binType = LINEAR_BIN;",
          "content_same": false
        },
        {
          "line": 6318,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "int32_t groupKeyFunction(SqlFunctionCtx* pCtx) {",
          "content_same": false
        },
        {
          "line": 4275,
          "old_api": "cJSON_Parse",
          "new_api": null,
          "old_text": "cJSON_Parse(binDescStr)",
          "new_text": null,
          "old_line_content": "  cJSON*  binDesc = cJSON_Parse(binDescStr);",
          "new_line_content": "static bool getHistogramBinDesc(SHistoFuncInfo* pInfo, char* binDescStr, int8_t binType, bool normalized) {",
          "content_same": false
        },
        {
          "line": 4278,
          "old_api": "cJSON_IsObject",
          "new_api": null,
          "old_text": "cJSON_IsObject(binDesc)",
          "new_text": null,
          "old_line_content": "  if (cJSON_IsObject(binDesc)) { /* linaer/log bins */",
          "new_line_content": "  double* intervals;",
          "content_same": false
        },
        {
          "line": 6331,
          "old_api": "colDataIsNull_s",
          "new_api": null,
          "old_text": "colDataIsNull_s(pInputCol, startIndex)",
          "new_text": null,
          "old_line_content": "  if (colDataIsNull_s(pInputCol, startIndex)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4285,
          "old_api": "cJSON_GetObjectItem",
          "new_api": null,
          "old_text": "cJSON_GetObjectItem(binDesc, \"start\")",
          "new_text": null,
          "old_line_content": "    cJSON* start = cJSON_GetObjectItem(binDesc, \"start\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6337,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pInputCol, startIndex)",
          "new_text": null,
          "old_line_content": "  char* data = colDataGetData(pInputCol, startIndex);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4291,
          "old_api": "cJSON_IsBool",
          "new_api": null,
          "old_text": "cJSON_IsBool(infinity)",
          "new_text": null,
          "old_line_content": "    if (!cJSON_IsNumber(start) || !cJSON_IsNumber(count) || !cJSON_IsBool(infinity)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6342,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(pInfo->data, data, pInputCol->info.bytes)",
          "new_text": null,
          "old_line_content": "    memcpy(pInfo->data, data, pInputCol->info.bytes);",
          "new_line_content": "  } else {",
          "content_same": false
        },
        {
          "line": 4299,
          "old_api": "isinf",
          "new_api": null,
          "old_text": "isinf(width->valuedouble)",
          "new_text": null,
          "old_line_content": "    if (isinf(start->valuedouble) || (width != NULL && isinf(width->valuedouble)) ||",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6348,
          "old_api": "SET_VAL",
          "new_api": null,
          "old_text": "SET_VAL(pResInfo, 1, 1)",
          "new_text": null,
          "old_line_content": "  SET_VAL(pResInfo, 1, 1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6354,
          "old_api": "taosArrayGet",
          "new_api": null,
          "old_text": "taosArrayGet(pBlock->pDataBlock, slotId)",
          "new_text": null,
          "old_line_content": "  SColumnInfoData* pCol = taosArrayGet(pBlock->pDataBlock, slotId);",
          "new_line_content": "  int32_t          slotId = pCtx->pExpr->base.resSchema.slotId;",
          "content_same": false
        },
        {
          "line": 6356,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6358,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": null,
          "old_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "new_text": null,
          "old_line_content": "  SGroupKeyInfo* pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4313,
          "old_api": "taosMemoryCalloc",
          "new_api": null,
          "old_text": "taosMemoryCalloc(numOfBins, sizeof(double))",
          "new_text": null,
          "old_line_content": "    intervals = taosMemoryCalloc(numOfBins, sizeof(double));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6363,
          "old_api": "colDataAppend",
          "new_api": null,
          "old_text": "colDataAppend(pCol, currentRow, pInfo->data, pInfo->isNull ? true : false)",
          "new_text": null,
          "old_line_content": "      colDataAppend(pCol, currentRow, pInfo->data, pInfo->isNull ? true : false);",
          "new_line_content": "    for (; currentRow < pBlock->info.rows + pResInfo->numOfRes; ++currentRow) {",
          "content_same": false
        },
        {
          "line": 4317,
          "old_api": "taosMemoryFree",
          "new_api": null,
          "old_text": "taosMemoryFree(intervals)",
          "new_text": null,
          "old_line_content": "        taosMemoryFree(intervals);",
          "new_line_content": "      if (width->valuedouble == 0) {",
          "content_same": false
        },
        {
          "line": 4322,
          "old_api": "isinf",
          "new_api": null,
          "old_text": "isinf(intervals[startIndex])",
          "new_text": null,
          "old_line_content": "        if (isinf(intervals[startIndex])) {",
          "new_line_content": "        intervals[startIndex] = start->valuedouble + i * width->valuedouble;",
          "content_same": false
        },
        {
          "line": 6375,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4328,
          "old_api": "cJSON_IsNumber",
          "new_api": null,
          "old_text": "cJSON_IsNumber(factor)",
          "new_text": null,
          "old_line_content": "    } else if (cJSON_IsNumber(factor) && width == NULL && binType == LOG_BIN) {",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 4331,
          "old_api": "taosMemoryFree",
          "new_api": null,
          "old_text": "taosMemoryFree(intervals)",
          "new_text": null,
          "old_line_content": "        taosMemoryFree(intervals);",
          "new_line_content": "      if (start->valuedouble == 0) {",
          "content_same": false
        },
        {
          "line": 4335,
          "old_api": "taosMemoryFree",
          "new_api": null,
          "old_text": "taosMemoryFree(intervals)",
          "new_text": null,
          "old_line_content": "        taosMemoryFree(intervals);",
          "new_line_content": "      if (factor->valuedouble < 0 || factor->valuedouble == 0 || factor->valuedouble == 1) {",
          "content_same": false
        },
        {
          "line": 4339,
          "old_api": "pow",
          "new_api": null,
          "old_text": "pow(factor->valuedouble, i * 1.0)",
          "new_text": null,
          "old_line_content": "        intervals[startIndex] = start->valuedouble * pow(factor->valuedouble, i * 1.0);",
          "new_line_content": "      for (int i = 0; i < counter + 1; ++i) {",
          "content_same": false
        },
        {
          "line": 6388,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pInputCol, i)",
          "new_text": null,
          "old_line_content": "    char* data = colDataGetData(pInputCol, i);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6391,
          "old_api": "doSaveLastrow",
          "new_api": null,
          "old_text": "doSaveLastrow(pCtx, data, i, cts, pInfo)",
          "new_text": null,
          "old_line_content": "      doSaveLastrow(pCtx, data, i, cts, pInfo);",
          "new_line_content": "    if (pResInfo->numOfRes == 0 || pInfo->ts < cts) {",
          "content_same": false
        },
        {
          "line": 4347,
          "old_api": "taosMemoryFree",
          "new_api": null,
          "old_text": "taosMemoryFree(intervals)",
          "new_text": null,
          "old_line_content": "      taosMemoryFree(intervals);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 6396,
          "old_api": "SET_VAL",
          "new_api": null,
          "old_text": "SET_VAL(pResInfo, numOfElems, 1)",
          "new_text": null,
          "old_line_content": "  SET_VAL(pResInfo, numOfElems, 1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4355,
          "old_api": "ASSERT",
          "new_api": null,
          "old_text": "ASSERT(numOfBins >= 4)",
          "new_text": null,
          "old_line_content": "      ASSERT(numOfBins >= 4);",
          "new_line_content": "      // in case of desc bin orders, -inf/inf should be swapped",
          "content_same": false
        },
        {
          "line": 4357,
          "old_api": "TSWAP",
          "new_api": null,
          "old_text": "TSWAP(intervals[0], intervals[numOfBins - 1])",
          "new_text": null,
          "old_line_content": "        TSWAP(intervals[0], intervals[numOfBins - 1]);",
          "new_line_content": "      if (intervals[1] > intervals[numOfBins - 2]) {",
          "content_same": false
        },
        {
          "line": 4360,
          "old_api": "cJSON_IsArray",
          "new_api": null,
          "old_text": "cJSON_IsArray(binDesc)",
          "new_text": null,
          "old_line_content": "  } else if (cJSON_IsArray(binDesc)) { /* user input bins */",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4364,
          "old_api": "cJSON_GetArraySize",
          "new_api": null,
          "old_text": "cJSON_GetArraySize(binDesc)",
          "new_text": null,
          "old_line_content": "    numOfBins = cJSON_GetArraySize(binDesc);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4368,
          "old_api": "taosMemoryFree",
          "new_api": null,
          "old_text": "taosMemoryFree(intervals)",
          "new_text": null,
          "old_line_content": "      taosMemoryFree(intervals);",
          "new_line_content": "    if (bin == NULL) {",
          "content_same": false
        },
        {
          "line": 4374,
          "old_api": "cJSON_IsNumber",
          "new_api": null,
          "old_text": "cJSON_IsNumber(bin)",
          "new_text": null,
          "old_line_content": "      if (!cJSON_IsNumber(bin)) {",
          "new_line_content": "      intervals[i] = bin->valuedouble;",
          "content_same": false
        },
        {
          "line": 4379,
          "old_api": "taosMemoryFree",
          "new_api": null,
          "old_text": "taosMemoryFree(intervals)",
          "new_text": null,
          "old_line_content": "        taosMemoryFree(intervals);",
          "new_line_content": "      if (i != 0 && intervals[i] <= intervals[i - 1]) {",
          "content_same": false
        },
        {
          "line": 4397,
          "old_api": "taosMemoryFree",
          "new_api": null,
          "old_text": "taosMemoryFree(intervals)",
          "new_text": null,
          "old_line_content": "  taosMemoryFree(intervals);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4402,
          "old_api": "functionSetup",
          "new_api": null,
          "old_text": "functionSetup(pCtx, pResultInfo)",
          "new_text": null,
          "old_line_content": "  if (!functionSetup(pCtx, pResultInfo)) {",
          "new_line_content": "bool histogramFunctionSetup(SqlFunctionCtx* pCtx, SResultRowEntryInfo* pResultInfo) {",
          "content_same": false
        },
        {
          "line": 4406,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": null,
          "old_text": "GET_ROWCELL_INTERBUF(pResultInfo)",
          "new_text": null,
          "old_line_content": "  SHistoFuncInfo* pInfo = GET_ROWCELL_INTERBUF(pResultInfo);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4411,
          "old_api": "varDataVal",
          "new_api": null,
          "old_text": "varDataVal(pCtx->param[1].param.pz)",
          "new_text": null,
          "old_line_content": "  int8_t binType = getHistogramBinType(varDataVal(pCtx->param[1].param.pz));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4415,
          "old_api": "varDataVal",
          "new_api": null,
          "old_text": "varDataVal(pCtx->param[2].param.pz)",
          "new_text": null,
          "old_line_content": "  char*   binDesc = varDataVal(pCtx->param[2].param.pz);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 4420,
          "old_api": "getHistogramBinDesc",
          "new_api": null,
          "old_text": "getHistogramBinDesc(pInfo, binDesc, binType, (bool)normalized)",
          "new_text": null,
          "old_line_content": "  if (!getHistogramBinDesc(pInfo, binDesc, binType, (bool)normalized)) {",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 4428,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SHistoFuncInfo* pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "new_line_content": "static int32_t histogramFunctionImpl(SqlFunctionCtx* pCtx, bool isPartial) {",
          "content_same": false
        },
        {
          "line": 4440,
          "old_api": "colDataIsNull_f",
          "new_api": null,
          "old_text": "colDataIsNull_f(pCol->nullbitmap, i)",
          "new_text": null,
          "old_line_content": "    if (pCol->hasNull && colDataIsNull_f(pCol->nullbitmap, i)) {",
          "new_line_content": "  for (int32_t i = start; i < numOfRows + start; ++i) {",
          "content_same": false
        },
        {
          "line": 4446,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pCol, i)",
          "new_text": null,
          "old_line_content": "    char*  data = colDataGetData(pCol, i);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4460,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "    GET_RES_INFO(pCtx)->numOfRes = pInfo->numOfBins;",
          "new_line_content": "  if (!isPartial) {",
          "content_same": false
        },
        {
          "line": 4462,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "    GET_RES_INFO(pCtx)->numOfRes = 1;",
          "new_line_content": "  } else {",
          "content_same": false
        },
        {
          "line": 4467,
          "old_api": "histogramFunctionImpl",
          "new_api": null,
          "old_text": "histogramFunctionImpl(pCtx, false)",
          "new_text": null,
          "old_line_content": "int32_t histogramFunction(SqlFunctionCtx* pCtx) { return histogramFunctionImpl(pCtx, false); }",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4469,
          "old_api": "histogramFunctionImpl",
          "new_api": null,
          "old_text": "histogramFunctionImpl(pCtx, true)",
          "new_text": null,
          "old_line_content": "int32_t histogramFunctionPartial(SqlFunctionCtx* pCtx) { return histogramFunctionImpl(pCtx, true); }",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4485,
          "old_api": "ASSERT",
          "new_api": null,
          "old_text": "ASSERT(pCol->info.type == TSDB_DATA_TYPE_BINARY)",
          "new_text": null,
          "old_line_content": "  ASSERT(pCol->info.type == TSDB_DATA_TYPE_BINARY);",
          "new_line_content": "  SColumnInfoData*      pCol = pInput->pData[0];",
          "content_same": false
        },
        {
          "line": 4487,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SHistoFuncInfo* pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4492,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pCol, i)",
          "new_text": null,
          "old_line_content": "    char*           data = colDataGetData(pCol, i);",
          "new_line_content": "  for (int32_t i = start; i < start + pInput->numOfRows; ++i) {",
          "content_same": false
        },
        {
          "line": 4497,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SET_VAL(GET_RES_INFO(pCtx), pInfo->numOfBins, pInfo->numOfBins);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4502,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "int32_t histogramFinalize(SqlFunctionCtx* pCtx, SSDataBlock* pBlock) {",
          "content_same": false
        },
        {
          "line": 4505,
          "old_api": "taosArrayGet",
          "new_api": null,
          "old_text": "taosArrayGet(pBlock->pDataBlock, slotId)",
          "new_text": null,
          "old_line_content": "  SColumnInfoData*     pCol = taosArrayGet(pBlock->pDataBlock, slotId);",
          "new_line_content": "  int32_t              slotId = pCtx->pExpr->base.resSchema.slotId;",
          "content_same": false
        },
        {
          "line": 4523,
          "old_api": "varDataVal",
          "new_api": null,
          "old_text": "varDataVal(buf)",
          "new_text": null,
          "old_line_content": "      len = sprintf(varDataVal(buf), \"{\\\"lower_bin\\\":%g, \\\"upper_bin\\\":%g, \\\"count\\\":%\" PRId64 \"}\",",
          "new_line_content": "    if (!pInfo->normalized) {",
          "content_same": false
        },
        {
          "line": 4526,
          "old_api": "varDataVal",
          "new_api": null,
          "old_text": "varDataVal(buf)",
          "new_text": null,
          "old_line_content": "      len = sprintf(varDataVal(buf), \"{\\\"lower_bin\\\":%g, \\\"upper_bin\\\":%g, \\\"count\\\":%lf}\", pInfo->bins[i].lower,",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 4529,
          "old_api": "varDataSetLen",
          "new_api": null,
          "old_text": "varDataSetLen(buf, len)",
          "new_text": null,
          "old_line_content": "    varDataSetLen(buf, len);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4538,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "int32_t histogramPartialFinalize(SqlFunctionCtx* pCtx, SSDataBlock* pBlock) {",
          "content_same": false
        },
        {
          "line": 4543,
          "old_api": "varDataVal",
          "new_api": null,
          "old_text": "varDataVal(res)",
          "new_text": null,
          "old_line_content": "  memcpy(varDataVal(res), pInfo, resultBytes);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4547,
          "old_api": "taosArrayGet",
          "new_api": null,
          "old_text": "taosArrayGet(pBlock->pDataBlock, slotId)",
          "new_text": null,
          "old_line_content": "  SColumnInfoData* pCol = taosArrayGet(pBlock->pDataBlock, slotId);",
          "new_line_content": "  int32_t          slotId = pCtx->pExpr->base.resSchema.slotId;",
          "content_same": false
        },
        {
          "line": 4549,
          "old_api": "colDataAppend",
          "new_api": null,
          "old_text": "colDataAppend(pCol, pBlock->info.rows, res, false)",
          "new_text": null,
          "old_line_content": "  colDataAppend(pCol, pBlock->info.rows, res, false);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4551,
          "old_api": "taosMemoryFree",
          "new_api": null,
          "old_text": "taosMemoryFree(res)",
          "new_text": null,
          "old_line_content": "  taosMemoryFree(res);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4556,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pDestCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pDResInfo = GET_RES_INFO(pDestCtx);",
          "new_line_content": "int32_t histogramCombine(SqlFunctionCtx* pDestCtx, SqlFunctionCtx* pSourceCtx) {",
          "content_same": false
        },
        {
          "line": 4559,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pSourceCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pSResInfo = GET_RES_INFO(pSourceCtx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4562,
          "old_api": "histogramTransferInfo",
          "new_api": null,
          "old_text": "histogramTransferInfo(pSBuf, pDBuf)",
          "new_text": null,
          "old_line_content": "  histogramTransferInfo(pSBuf, pDBuf);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4576,
          "old_api": "MurmurHash3_64",
          "new_api": null,
          "old_text": "MurmurHash3_64(data, bytes)",
          "new_text": null,
          "old_line_content": "  uint64_t hash = MurmurHash3_64(data, bytes);",
          "new_line_content": "static uint8_t hllCountNum(void* data, int32_t bytes, int32_t* buk) {",
          "content_same": false
        },
        {
          "line": 4617,
          "old_api": "sqrt",
          "new_api": null,
          "old_text": "sqrt(x)",
          "new_text": null,
          "old_line_content": "    x = sqrt(x);",
          "new_line_content": "  do {",
          "content_same": false
        },
        {
          "line": 4620,
          "old_api": "pow",
          "new_api": null,
          "old_text": "pow(1 - x, 2)",
          "new_text": null,
          "old_line_content": "    z -= pow(1 - x, 2) * y;",
          "new_line_content": "    y *= 0.5;",
          "content_same": false
        },
        {
          "line": 4644,
          "old_api": "hllBucketHisto",
          "new_api": null,
          "old_text": "hllBucketHisto(buckets, buckethisto)",
          "new_text": null,
          "old_line_content": "  hllBucketHisto(buckets, buckethisto);",
          "new_line_content": "  int32_t buckethisto[64] = {0};",
          "content_same": false
        },
        {
          "line": 4646,
          "old_api": "hllTau",
          "new_api": null,
          "old_text": "hllTau((m - buckethisto[HLL_DATA_BITS + 1]) / (double)m)",
          "new_text": null,
          "old_line_content": "  double z = m * hllTau((m - buckethisto[HLL_DATA_BITS + 1]) / (double)m);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4652,
          "old_api": "hllSigma",
          "new_api": null,
          "old_text": "hllSigma(buckethisto[0] / (double)m)",
          "new_text": null,
          "old_line_content": "  z += m * hllSigma(buckethisto[0] / (double)m);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4659,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SHLLInfo* pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "new_line_content": "int32_t hllFunction(SqlFunctionCtx* pCtx) {",
          "content_same": false
        },
        {
          "line": 4672,
          "old_api": "colDataIsNull_s",
          "new_api": null,
          "old_text": "colDataIsNull_s(pCol, i)",
          "new_text": null,
          "old_line_content": "    if (pCol->hasNull && colDataIsNull_s(pCol, i)) {",
          "new_line_content": "  for (int32_t i = start; i < numOfRows + start; ++i) {",
          "content_same": false
        },
        {
          "line": 4678,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pCol, i)",
          "new_text": null,
          "old_line_content": "    char* data = colDataGetData(pCol, i);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4685,
          "old_api": "hllCountNum",
          "new_api": null,
          "old_text": "hllCountNum(data, bytes, &index)",
          "new_text": null,
          "old_line_content": "    uint8_t count = hllCountNum(data, bytes, &index);",
          "new_line_content": "    int32_t index = 0;",
          "content_same": false
        },
        {
          "line": 4695,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "    SET_VAL(GET_RES_INFO(pCtx), 0, 1);",
          "new_line_content": "  if (pInfo->totalCount == 0 && !tsCountAlwaysReturnValue) {",
          "content_same": false
        },
        {
          "line": 4697,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "    SET_VAL(GET_RES_INFO(pCtx), 1, 1);",
          "new_line_content": "  } else {",
          "content_same": false
        },
        {
          "line": 4715,
          "old_api": "ASSERT",
          "new_api": null,
          "old_text": "ASSERT(pCol->info.type == TSDB_DATA_TYPE_BINARY)",
          "new_text": null,
          "old_line_content": "  ASSERT(pCol->info.type == TSDB_DATA_TYPE_BINARY);",
          "new_line_content": "  SColumnInfoData*      pCol = pInput->pData[0];",
          "content_same": false
        },
        {
          "line": 4717,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SHLLInfo* pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4722,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pCol, i)",
          "new_text": null,
          "old_line_content": "    char*     data = colDataGetData(pCol, i);",
          "new_line_content": "  for (int32_t i = start; i < start + pInput->numOfRows; ++i) {",
          "content_same": false
        },
        {
          "line": 4728,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "    SET_VAL(GET_RES_INFO(pCtx), 0, 1);",
          "new_line_content": "  if (pInfo->totalCount == 0 && !tsCountAlwaysReturnValue) {",
          "content_same": false
        },
        {
          "line": 4730,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "    SET_VAL(GET_RES_INFO(pCtx), 1, 1);",
          "new_line_content": "  } else {",
          "content_same": false
        },
        {
          "line": 4737,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "int32_t hllFinalize(SqlFunctionCtx* pCtx, SSDataBlock* pBlock) {",
          "content_same": false
        },
        {
          "line": 4739,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SHLLInfo* pHllInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4745,
          "old_api": "functionFinalize",
          "new_api": null,
          "old_text": "functionFinalize(pCtx, pBlock)",
          "new_text": null,
          "old_line_content": "  return functionFinalize(pCtx, pBlock);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4749,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "int32_t hllPartialFinalize(SqlFunctionCtx* pCtx, SSDataBlock* pBlock) {",
          "content_same": false
        },
        {
          "line": 4754,
          "old_api": "varDataVal",
          "new_api": null,
          "old_text": "varDataVal(res)",
          "new_text": null,
          "old_line_content": "  memcpy(varDataVal(res), pInfo, resultBytes);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4758,
          "old_api": "taosArrayGet",
          "new_api": null,
          "old_text": "taosArrayGet(pBlock->pDataBlock, slotId)",
          "new_text": null,
          "old_line_content": "  SColumnInfoData* pCol = taosArrayGet(pBlock->pDataBlock, slotId);",
          "new_line_content": "  int32_t          slotId = pCtx->pExpr->base.resSchema.slotId;",
          "content_same": false
        },
        {
          "line": 4760,
          "old_api": "colDataAppend",
          "new_api": null,
          "old_text": "colDataAppend(pCol, pBlock->info.rows, res, false)",
          "new_text": null,
          "old_line_content": "  colDataAppend(pCol, pBlock->info.rows, res, false);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4762,
          "old_api": "taosMemoryFree",
          "new_api": null,
          "old_text": "taosMemoryFree(res)",
          "new_text": null,
          "old_line_content": "  taosMemoryFree(res);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4767,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pDestCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pDResInfo = GET_RES_INFO(pDestCtx);",
          "new_line_content": "int32_t hllCombine(SqlFunctionCtx* pDestCtx, SqlFunctionCtx* pSourceCtx) {",
          "content_same": false
        },
        {
          "line": 4770,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pSourceCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pSResInfo = GET_RES_INFO(pSourceCtx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4773,
          "old_api": "hllTransferInfo",
          "new_api": null,
          "old_text": "hllTransferInfo(pSBuf, pDBuf)",
          "new_text": null,
          "old_line_content": "  hllTransferInfo(pSBuf, pDBuf);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4786,
          "old_api": "strncasecmp",
          "new_api": null,
          "old_text": "strncasecmp(opStr, \"LT\", 2)",
          "new_text": null,
          "old_line_content": "  if (strncasecmp(opStr, \"LT\", 2) == 0) {",
          "new_line_content": "  int8_t opType;",
          "content_same": false
        },
        {
          "line": 4788,
          "old_api": "strncasecmp",
          "new_api": null,
          "old_text": "strncasecmp(opStr, \"GT\", 2)",
          "new_text": null,
          "old_line_content": "  } else if (strncasecmp(opStr, \"GT\", 2) == 0) {",
          "new_line_content": "    opType = STATE_OPER_LT;",
          "content_same": false
        },
        {
          "line": 4790,
          "old_api": "strncasecmp",
          "new_api": null,
          "old_text": "strncasecmp(opStr, \"LE\", 2)",
          "new_text": null,
          "old_line_content": "  } else if (strncasecmp(opStr, \"LE\", 2) == 0) {",
          "new_line_content": "    opType = STATE_OPER_GT;",
          "content_same": false
        },
        {
          "line": 4792,
          "old_api": "strncasecmp",
          "new_api": null,
          "old_text": "strncasecmp(opStr, \"GE\", 2)",
          "new_text": null,
          "old_line_content": "  } else if (strncasecmp(opStr, \"GE\", 2) == 0) {",
          "new_line_content": "    opType = STATE_OPER_LE;",
          "content_same": false
        },
        {
          "line": 4794,
          "old_api": "strncasecmp",
          "new_api": null,
          "old_text": "strncasecmp(opStr, \"NE\", 2)",
          "new_text": null,
          "old_line_content": "  } else if (strncasecmp(opStr, \"NE\", 2) == 0) {",
          "new_line_content": "    opType = STATE_OPER_GE;",
          "content_same": false
        },
        {
          "line": 4796,
          "old_api": "strncasecmp",
          "new_api": null,
          "old_text": "strncasecmp(opStr, \"EQ\", 2)",
          "new_text": null,
          "old_line_content": "  } else if (strncasecmp(opStr, \"EQ\", 2) == 0) {",
          "new_line_content": "    opType = STATE_OPER_NE;",
          "content_same": false
        },
        {
          "line": 4806,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pCol, index)",
          "new_text": null,
          "old_line_content": "  char* data = colDataGetData(pCol, index);",
          "new_line_content": "static bool checkStateOp(int8_t op, SColumnInfoData* pCol, int32_t index, SVariant param) {",
          "content_same": false
        },
        {
          "line": 4810,
          "old_api": "STATE_COMP",
          "new_api": null,
          "old_text": "STATE_COMP(op, v, param)",
          "new_text": null,
          "old_line_content": "      STATE_COMP(op, v, param);",
          "new_line_content": "      int8_t v = *(int8_t*)data;",
          "content_same": false
        },
        {
          "line": 4815,
          "old_api": "STATE_COMP",
          "new_api": null,
          "old_text": "STATE_COMP(op, v, param)",
          "new_text": null,
          "old_line_content": "      STATE_COMP(op, v, param);",
          "new_line_content": "      uint8_t v = *(uint8_t*)data;",
          "content_same": false
        },
        {
          "line": 4820,
          "old_api": "STATE_COMP",
          "new_api": null,
          "old_text": "STATE_COMP(op, v, param)",
          "new_text": null,
          "old_line_content": "      STATE_COMP(op, v, param);",
          "new_line_content": "      int16_t v = *(int16_t*)data;",
          "content_same": false
        },
        {
          "line": 4825,
          "old_api": "STATE_COMP",
          "new_api": null,
          "old_text": "STATE_COMP(op, v, param)",
          "new_text": null,
          "old_line_content": "      STATE_COMP(op, v, param);",
          "new_line_content": "      uint16_t v = *(uint16_t*)data;",
          "content_same": false
        },
        {
          "line": 4830,
          "old_api": "STATE_COMP",
          "new_api": null,
          "old_text": "STATE_COMP(op, v, param)",
          "new_text": null,
          "old_line_content": "      STATE_COMP(op, v, param);",
          "new_line_content": "      int32_t v = *(int32_t*)data;",
          "content_same": false
        },
        {
          "line": 4835,
          "old_api": "STATE_COMP",
          "new_api": null,
          "old_text": "STATE_COMP(op, v, param)",
          "new_text": null,
          "old_line_content": "      STATE_COMP(op, v, param);",
          "new_line_content": "      uint32_t v = *(uint32_t*)data;",
          "content_same": false
        },
        {
          "line": 4840,
          "old_api": "STATE_COMP",
          "new_api": null,
          "old_text": "STATE_COMP(op, v, param)",
          "new_text": null,
          "old_line_content": "      STATE_COMP(op, v, param);",
          "new_line_content": "      int64_t v = *(int64_t*)data;",
          "content_same": false
        },
        {
          "line": 4845,
          "old_api": "STATE_COMP",
          "new_api": null,
          "old_text": "STATE_COMP(op, v, param)",
          "new_text": null,
          "old_line_content": "      STATE_COMP(op, v, param);",
          "new_line_content": "      uint64_t v = *(uint64_t*)data;",
          "content_same": false
        },
        {
          "line": 4850,
          "old_api": "STATE_COMP",
          "new_api": null,
          "old_text": "STATE_COMP(op, v, param)",
          "new_text": null,
          "old_line_content": "      STATE_COMP(op, v, param);",
          "new_line_content": "      float v = *(float*)data;",
          "content_same": false
        },
        {
          "line": 4855,
          "old_api": "STATE_COMP",
          "new_api": null,
          "old_text": "STATE_COMP(op, v, param)",
          "new_text": null,
          "old_line_content": "      STATE_COMP(op, v, param);",
          "new_line_content": "      double v = *(double*)data;",
          "content_same": false
        },
        {
          "line": 4859,
          "old_api": "ASSERT",
          "new_api": null,
          "old_text": "ASSERT(0)",
          "new_text": null,
          "old_line_content": "      ASSERT(0);",
          "new_line_content": "    default: {",
          "content_same": false
        },
        {
          "line": 4866,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "int32_t stateCountFunction(SqlFunctionCtx* pCtx) {",
          "content_same": false
        },
        {
          "line": 4876,
          "old_api": "varDataVal",
          "new_api": null,
          "old_text": "varDataVal(pCtx->param[1].param.pz)",
          "new_text": null,
          "old_line_content": "  int8_t op = getStateOpType(varDataVal(pCtx->param[1].param.pz));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4883,
          "old_api": "colDataIsNull_f",
          "new_api": null,
          "old_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "new_text": null,
          "old_line_content": "    if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "new_line_content": "    numOfElems++;",
          "content_same": false
        },
        {
          "line": 4887,
          "old_api": "appendSelectivityValue",
          "new_api": null,
          "old_text": "appendSelectivityValue(pCtx, i, pCtx->offset + numOfElems - 1)",
          "new_text": null,
          "old_line_content": "        appendSelectivityValue(pCtx, i, pCtx->offset + numOfElems - 1);",
          "new_line_content": "      if (pCtx->subsidiaries.num > 0) {",
          "content_same": false
        },
        {
          "line": 4892,
          "old_api": "checkStateOp",
          "new_api": null,
          "old_text": "checkStateOp(op, pInputCol, i, pCtx->param[2].param)",
          "new_text": null,
          "old_line_content": "    bool ret = checkStateOp(op, pInputCol, i, pCtx->param[2].param);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4900,
          "old_api": "colDataAppend",
          "new_api": null,
          "old_text": "colDataAppend(pOutput, pCtx->offset + numOfElems - 1, (char*)&output, false)",
          "new_text": null,
          "old_line_content": "    colDataAppend(pOutput, pCtx->offset + numOfElems - 1, (char*)&output, false);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4904,
          "old_api": "appendSelectivityValue",
          "new_api": null,
          "old_text": "appendSelectivityValue(pCtx, i, pCtx->offset + numOfElems - 1)",
          "new_text": null,
          "old_line_content": "      appendSelectivityValue(pCtx, i, pCtx->offset + numOfElems - 1);",
          "new_line_content": "    if (pCtx->subsidiaries.num > 0) {",
          "content_same": false
        },
        {
          "line": 4912,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "int32_t stateDurationFunction(SqlFunctionCtx* pCtx) {",
          "content_same": false
        },
        {
          "line": 4929,
          "old_api": "varDataVal",
          "new_api": null,
          "old_text": "varDataVal(pCtx->param[1].param.pz)",
          "new_text": null,
          "old_line_content": "  int8_t op = getStateOpType(varDataVal(pCtx->param[1].param.pz));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4936,
          "old_api": "colDataIsNull_f",
          "new_api": null,
          "old_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "new_text": null,
          "old_line_content": "    if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "new_line_content": "    numOfElems++;",
          "content_same": false
        },
        {
          "line": 4940,
          "old_api": "appendSelectivityValue",
          "new_api": null,
          "old_text": "appendSelectivityValue(pCtx, i, pCtx->offset + numOfElems - 1)",
          "new_text": null,
          "old_line_content": "        appendSelectivityValue(pCtx, i, pCtx->offset + numOfElems - 1);",
          "new_line_content": "      if (pCtx->subsidiaries.num > 0) {",
          "content_same": false
        },
        {
          "line": 4945,
          "old_api": "checkStateOp",
          "new_api": null,
          "old_text": "checkStateOp(op, pInputCol, i, pCtx->param[2].param)",
          "new_text": null,
          "old_line_content": "    bool    ret = checkStateOp(op, pInputCol, i, pCtx->param[2].param);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4957,
          "old_api": "colDataAppend",
          "new_api": null,
          "old_text": "colDataAppend(pOutput, pCtx->offset + numOfElems - 1, (char*)&output, false)",
          "new_text": null,
          "old_line_content": "    colDataAppend(pOutput, pCtx->offset + numOfElems - 1, (char*)&output, false);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4961,
          "old_api": "appendSelectivityValue",
          "new_api": null,
          "old_text": "appendSelectivityValue(pCtx, i, pCtx->offset + numOfElems - 1)",
          "new_text": null,
          "old_line_content": "      appendSelectivityValue(pCtx, i, pCtx->offset + numOfElems - 1);",
          "new_line_content": "    if (pCtx->subsidiaries.num > 0) {",
          "content_same": false
        },
        {
          "line": 4974,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "int32_t csumFunction(SqlFunctionCtx* pCtx) {",
          "content_same": false
        },
        {
          "line": 4987,
          "old_api": "colDataIsNull_f",
          "new_api": null,
          "old_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "new_text": null,
          "old_line_content": "    if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "new_line_content": "    int32_t pos = startOffset + numOfElems;",
          "content_same": false
        },
        {
          "line": 4992,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pInputCol, i)",
          "new_text": null,
          "old_line_content": "    char* data = colDataGetData(pInputCol, i);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4997,
          "old_api": "colDataAppend",
          "new_api": null,
          "old_text": "colDataAppend(pOutput, pos, (char*)&pSumRes->isum, false)",
          "new_text": null,
          "old_line_content": "      colDataAppend(pOutput, pos, (char*)&pSumRes->isum, false);",
          "new_line_content": "      pSumRes->isum += v;",
          "content_same": false
        },
        {
          "line": 5002,
          "old_api": "colDataAppend",
          "new_api": null,
          "old_text": "colDataAppend(pOutput, pos, (char*)&pSumRes->usum, false)",
          "new_text": null,
          "old_line_content": "      colDataAppend(pOutput, pos, (char*)&pSumRes->usum, false);",
          "new_line_content": "      pSumRes->usum += v;",
          "content_same": false
        },
        {
          "line": 5008,
          "old_api": "isnan",
          "new_api": null,
          "old_text": "isnan(pSumRes->dsum)",
          "new_text": null,
          "old_line_content": "      if (isinf(pSumRes->dsum) || isnan(pSumRes->dsum)) {",
          "new_line_content": "      // check for overflow",
          "content_same": false
        },
        {
          "line": 5011,
          "old_api": "colDataAppend",
          "new_api": null,
          "old_text": "colDataAppend(pOutput, pos, (char*)&pSumRes->dsum, false)",
          "new_text": null,
          "old_line_content": "        colDataAppend(pOutput, pos, (char*)&pSumRes->dsum, false);",
          "new_line_content": "      } else {",
          "content_same": false
        },
        {
          "line": 5017,
          "old_api": "appendSelectivityValue",
          "new_api": null,
          "old_text": "appendSelectivityValue(pCtx, i, pos)",
          "new_text": null,
          "old_line_content": "      appendSelectivityValue(pCtx, i, pos);",
          "new_line_content": "    if (pCtx->subsidiaries.num > 0) {",
          "content_same": false
        },
        {
          "line": 5032,
          "old_api": "functionSetup",
          "new_api": null,
          "old_text": "functionSetup(pCtx, pResultInfo)",
          "new_text": null,
          "old_line_content": "  if (!functionSetup(pCtx, pResultInfo)) {",
          "new_line_content": "bool mavgFunctionSetup(SqlFunctionCtx* pCtx, SResultRowEntryInfo* pResultInfo) {",
          "content_same": false
        },
        {
          "line": 5036,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": null,
          "old_text": "GET_ROWCELL_INTERBUF(pResultInfo)",
          "new_text": null,
          "old_line_content": "  SMavgInfo* pInfo = GET_ROWCELL_INTERBUF(pResultInfo);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5049,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "int32_t mavgFunction(SqlFunctionCtx* pCtx) {",
          "content_same": false
        },
        {
          "line": 3011,
          "old_api": "colDataIsNull",
          "new_api": null,
          "old_text": "colDataIsNull(pInputCol, pInput->totalRows, i, pColAgg)",
          "new_text": null,
          "old_line_content": "    if (pInputCol->hasNull && colDataIsNull(pInputCol, pInput->totalRows, i, pColAgg)) {",
          "new_line_content": "  for (int32_t i = pInput->startRowIndex; i < pInput->startRowIndex + pInput->numOfRows; ++i) {",
          "content_same": false
        },
        {
          "line": 5063,
          "old_api": "colDataIsNull_f",
          "new_api": null,
          "old_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "new_text": null,
          "old_line_content": "    if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "new_line_content": "    int32_t pos = startOffset + numOfElems;",
          "content_same": false
        },
        {
          "line": 3017,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pInputCol, i)",
          "new_text": null,
          "old_line_content": "    char* data = colDataGetData(pInputCol, i);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3020,
          "old_api": "doSaveCurrentVal",
          "new_api": null,
          "old_text": "doSaveCurrentVal(pCtx, i, cts, pInputCol->info.type, data)",
          "new_text": null,
          "old_line_content": "      doSaveCurrentVal(pCtx, i, cts, pInputCol->info.type, data);",
          "new_line_content": "    if (pResInfo->numOfRes == 0 || pInfo->ts > cts) {",
          "content_same": false
        },
        {
          "line": 5068,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pInputCol, i)",
          "new_text": null,
          "old_line_content": "    char*  data = colDataGetData(pInputCol, i);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3028,
          "old_api": "firstlastSaveTupleData",
          "new_api": null,
          "old_text": "firstlastSaveTupleData(pCtx->pSrcBlock, pInput->startRowIndex, pCtx, pInfo)",
          "new_text": null,
          "old_line_content": "    firstlastSaveTupleData(pCtx->pSrcBlock, pInput->startRowIndex, pCtx, pInfo);",
          "new_line_content": "    // save selectivity value for column consisted of all null values",
          "content_same": false
        },
        {
          "line": 3030,
          "old_api": "SET_VAL",
          "new_api": null,
          "old_text": "SET_VAL(pResInfo, numOfElems, 1)",
          "new_text": null,
          "old_line_content": "  SET_VAL(pResInfo, numOfElems, 1);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 3037,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5086,
          "old_api": "isnan",
          "new_api": null,
          "old_text": "isnan(result)",
          "new_text": null,
          "old_line_content": "      if (isinf(result) || isnan(result)) {",
          "new_line_content": "      // check for overflow",
          "content_same": false
        },
        {
          "line": 5089,
          "old_api": "colDataAppend",
          "new_api": null,
          "old_text": "colDataAppend(pOutput, pos, (char*)&result, false)",
          "new_text": null,
          "old_line_content": "        colDataAppend(pOutput, pos, (char*)&result, false);",
          "new_line_content": "      } else {",
          "content_same": false
        },
        {
          "line": 5094,
          "old_api": "appendSelectivityValue",
          "new_api": null,
          "old_text": "appendSelectivityValue(pCtx, i, pos)",
          "new_text": null,
          "old_line_content": "        appendSelectivityValue(pCtx, i, pos);",
          "new_line_content": "      if (pCtx->subsidiaries.num > 0) {",
          "content_same": false
        },
        {
          "line": 3049,
          "old_api": "ASSERT",
          "new_api": null,
          "old_text": "ASSERT(pInputCol->hasNull == true)",
          "new_text": null,
          "old_line_content": "    ASSERT(pInputCol->hasNull == true);",
          "new_line_content": "  if (pInput->colDataAggIsSet && (pInput->pColumnDataAgg[0]->numOfNull == pInput->totalRows)) {",
          "content_same": false
        },
        {
          "line": 3051,
          "old_api": "firstlastSaveTupleData",
          "new_api": null,
          "old_text": "firstlastSaveTupleData(pCtx->pSrcBlock, pInput->startRowIndex, pCtx, pInfo)",
          "new_text": null,
          "old_line_content": "    firstlastSaveTupleData(pCtx->pSrcBlock, pInput->startRowIndex, pCtx, pInfo);",
          "new_line_content": "    // save selectivity value for column consisted of all null values",
          "content_same": false
        },
        {
          "line": 3057,
          "old_api": "getRowPTs",
          "new_api": null,
          "old_text": "getRowPTs(pInput->pPTS, 0)",
          "new_text": null,
          "old_line_content": "  TSKEY startKey = getRowPTs(pInput->pPTS, 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5110,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "static SSampleInfo* getSampleOutputInfo(SqlFunctionCtx* pCtx) {",
          "content_same": false
        },
        {
          "line": 3066,
          "old_api": "colDataIsNull",
          "new_api": null,
          "old_text": "colDataIsNull(pInputCol, pInput->totalRows, i, pColAgg)",
          "new_text": null,
          "old_line_content": "      if (pInputCol->hasNull && colDataIsNull(pInputCol, pInput->totalRows, i, pColAgg)) {",
          "new_line_content": "    for (int32_t i = pInput->numOfRows + pInput->startRowIndex - 1; i >= pInput->startRowIndex; --i) {",
          "content_same": false
        },
        {
          "line": 3072,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pInputCol, i)",
          "new_text": null,
          "old_line_content": "      char* data = colDataGetData(pInputCol, i);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5120,
          "old_api": "nodesListGetNode",
          "new_api": null,
          "old_text": "nodesListGetNode(pFunc->pParameterList, 0)",
          "new_text": null,
          "old_line_content": "  SColumnNode* pCol = (SColumnNode*)nodesListGetNode(pFunc->pParameterList, 0);",
          "new_line_content": "bool getSampleFuncEnv(SFunctionNode* pFunc, SFuncExecEnv* pEnv) {",
          "content_same": false
        },
        {
          "line": 3075,
          "old_api": "doSaveCurrentVal",
          "new_api": null,
          "old_text": "doSaveCurrentVal(pCtx, i, cts, type, data)",
          "new_text": null,
          "old_line_content": "        doSaveCurrentVal(pCtx, i, cts, type, data);",
          "new_line_content": "      if (pResInfo->numOfRes == 0 || pInfo->ts < cts) {",
          "content_same": false
        },
        {
          "line": 5128,
          "old_api": "functionSetup",
          "new_api": null,
          "old_text": "functionSetup(pCtx, pResultInfo)",
          "new_text": null,
          "old_line_content": "  if (!functionSetup(pCtx, pResultInfo)) {",
          "new_line_content": "bool sampleFunctionSetup(SqlFunctionCtx* pCtx, SResultRowEntryInfo* pResultInfo) {",
          "content_same": false
        },
        {
          "line": 3082,
          "old_api": "colDataIsNull",
          "new_api": null,
          "old_text": "colDataIsNull(pInputCol, pInput->totalRows, i, pColAgg)",
          "new_text": null,
          "old_line_content": "      if (pInputCol->hasNull && colDataIsNull(pInputCol, pInput->totalRows, i, pColAgg)) {",
          "new_line_content": "    for (int32_t i = pInput->startRowIndex; i < pInput->numOfRows + pInput->startRowIndex; ++i) {",
          "content_same": false
        },
        {
          "line": 5132,
          "old_api": "taosSafeRand",
          "new_api": null,
          "old_text": "taosSafeRand()",
          "new_text": null,
          "old_line_content": "  taosSeedRand(taosSafeRand());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5134,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": null,
          "old_text": "GET_ROWCELL_INTERBUF(pResultInfo)",
          "new_text": null,
          "old_line_content": "  SSampleInfo* pInfo = GET_ROWCELL_INTERBUF(pResultInfo);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3088,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pInputCol, i)",
          "new_text": null,
          "old_line_content": "      char* data = colDataGetData(pInputCol, i);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3091,
          "old_api": "doSaveCurrentVal",
          "new_api": null,
          "old_text": "doSaveCurrentVal(pCtx, i, cts, type, data)",
          "new_text": null,
          "old_line_content": "        doSaveCurrentVal(pCtx, i, cts, type, data);",
          "new_line_content": "      if (pResInfo->numOfRes == 0 || pInfo->ts < cts) {",
          "content_same": false
        },
        {
          "line": 3099,
          "old_api": "colDataIsNull",
          "new_api": null,
          "old_text": "colDataIsNull(pInputCol, pInput->totalRows, i, pColAgg)",
          "new_text": null,
          "old_line_content": "    if (pInputCol->hasNull && colDataIsNull(pInputCol, pInput->totalRows, i, pColAgg)) {",
          "new_line_content": "  for (int32_t i = pInput->startRowIndex; i < pInput->numOfRows + pInput->startRowIndex; ++i) {",
          "content_same": false
        },
        {
          "line": 5149,
          "old_api": "assignVal",
          "new_api": null,
          "old_text": "assignVal(pInfo->data + index * pInfo->colBytes, data, pInfo->colBytes, pInfo->colType)",
          "new_text": null,
          "old_line_content": "  assignVal(pInfo->data + index * pInfo->colBytes, data, pInfo->colBytes, pInfo->colType);",
          "new_line_content": "static void sampleAssignResult(SSampleInfo* pInfo, char* data, int32_t index) {",
          "content_same": false
        },
        {
          "line": 3105,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pInputCol, i)",
          "new_text": null,
          "old_line_content": "    char* data = colDataGetData(pInputCol, i);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5155,
          "old_api": "sampleAssignResult",
          "new_api": null,
          "old_text": "sampleAssignResult(pInfo, data, pInfo->numSampled)",
          "new_text": null,
          "old_line_content": "    sampleAssignResult(pInfo, data, pInfo->numSampled);",
          "new_line_content": "  if (pInfo->numSampled < pInfo->samples) {",
          "content_same": false
        },
        {
          "line": 3108,
          "old_api": "doSaveCurrentVal",
          "new_api": null,
          "old_text": "doSaveCurrentVal(pCtx, i, cts, type, data)",
          "new_text": null,
          "old_line_content": "      doSaveCurrentVal(pCtx, i, cts, type, data);",
          "new_line_content": "    if (pResInfo->numOfRes == 0 || pInfo->ts < cts) {",
          "content_same": false
        },
        {
          "line": 5157,
          "old_api": "saveTupleData",
          "new_api": null,
          "old_text": "saveTupleData(pCtx, index, pCtx->pSrcBlock, NULL)",
          "new_text": null,
          "old_line_content": "      pInfo->tuplePos[pInfo->numSampled] = saveTupleData(pCtx, index, pCtx->pSrcBlock, NULL);",
          "new_line_content": "    if (pCtx->subsidiaries.num > 0) {",
          "content_same": false
        },
        {
          "line": 5161,
          "old_api": "taosRand",
          "new_api": null,
          "old_text": "taosRand()",
          "new_text": null,
          "old_line_content": "    int32_t j = taosRand() % (pInfo->totalPoints);",
          "new_line_content": "  } else {",
          "content_same": false
        },
        {
          "line": 5163,
          "old_api": "sampleAssignResult",
          "new_api": null,
          "old_text": "sampleAssignResult(pInfo, data, j)",
          "new_text": null,
          "old_line_content": "      sampleAssignResult(pInfo, data, j);",
          "new_line_content": "    if (j < pInfo->samples) {",
          "content_same": false
        },
        {
          "line": 3116,
          "old_api": "firstlastSaveTupleData",
          "new_api": null,
          "old_text": "firstlastSaveTupleData(pCtx->pSrcBlock, pInput->startRowIndex, pCtx, pInfo)",
          "new_text": null,
          "old_line_content": "    firstlastSaveTupleData(pCtx->pSrcBlock, pInput->startRowIndex, pCtx, pInfo);",
          "new_line_content": "  if (numOfElems == 0) {",
          "content_same": false
        },
        {
          "line": 5165,
          "old_api": "updateTupleData",
          "new_api": null,
          "old_text": "updateTupleData(pCtx, index, pCtx->pSrcBlock, &pInfo->tuplePos[j])",
          "new_text": null,
          "old_line_content": "        updateTupleData(pCtx, index, pCtx->pSrcBlock, &pInfo->tuplePos[j]);",
          "new_line_content": "      if (pCtx->subsidiaries.num > 0) {",
          "content_same": false
        },
        {
          "line": 3118,
          "old_api": "SET_VAL",
          "new_api": null,
          "old_text": "SET_VAL(pResInfo, numOfElems, 1)",
          "new_text": null,
          "old_line_content": "  SET_VAL(pResInfo, numOfElems, 1);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 5172,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "int32_t sampleFunction(SqlFunctionCtx* pCtx) {",
          "content_same": false
        },
        {
          "line": 5179,
          "old_api": "colDataIsNull_s",
          "new_api": null,
          "old_text": "colDataIsNull_s(pInputCol, i)",
          "new_text": null,
          "old_line_content": "    if (colDataIsNull_s(pInputCol, i)) {",
          "new_line_content": "  for (int32_t i = pInput->startRowIndex; i < pInput->numOfRows + pInput->startRowIndex; i += 1) {",
          "content_same": false
        },
        {
          "line": 5183,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pInputCol, i)",
          "new_text": null,
          "old_line_content": "    char* data = colDataGetData(pInputCol, i);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3140,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(pOutput->buf, pInput->buf, pOutput->bytes)",
          "new_text": null,
          "old_line_content": "  memcpy(pOutput->buf, pInput->buf, pOutput->bytes);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5188,
          "old_api": "saveTupleData",
          "new_api": null,
          "old_text": "saveTupleData(pCtx, pInput->startRowIndex, pCtx->pSrcBlock, NULL)",
          "new_text": null,
          "old_line_content": "    pInfo->nullTuplePos = saveTupleData(pCtx, pInput->startRowIndex, pCtx->pSrcBlock, NULL);",
          "new_line_content": "  if (pInfo->numSampled == 0 && pCtx->subsidiaries.num > 0 && !pInfo->nullTupleSaved) {",
          "content_same": false
        },
        {
          "line": 5192,
          "old_api": "SET_VAL",
          "new_api": null,
          "old_text": "SET_VAL(pResInfo, pInfo->numSampled, pInfo->numSampled)",
          "new_text": null,
          "old_line_content": "  SET_VAL(pResInfo, pInfo->numSampled, pInfo->numSampled);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3149,
          "old_api": "ASSERT",
          "new_api": null,
          "old_text": "ASSERT(pCol->info.type == TSDB_DATA_TYPE_BINARY)",
          "new_text": null,
          "old_line_content": "  ASSERT(pCol->info.type == TSDB_DATA_TYPE_BINARY);",
          "new_line_content": "  SColumnInfoData*      pCol = pInput->pData[0];",
          "content_same": false
        },
        {
          "line": 5197,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pEntryInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "int32_t sampleFinalize(SqlFunctionCtx* pCtx, SSDataBlock* pBlock) {",
          "content_same": false
        },
        {
          "line": 3151,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SFirstLastRes* pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5199,
          "old_api": "getSampleOutputInfo",
          "new_api": null,
          "old_text": "getSampleOutputInfo(pCtx)",
          "new_text": null,
          "old_line_content": "  SSampleInfo* pInfo = getSampleOutputInfo(pCtx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5203,
          "old_api": "taosArrayGet",
          "new_api": null,
          "old_text": "taosArrayGet(pBlock->pDataBlock, slotId)",
          "new_text": null,
          "old_line_content": "  SColumnInfoData* pCol = taosArrayGet(pBlock->pDataBlock, slotId);",
          "new_line_content": "  int32_t          slotId = pCtx->pExpr->base.resSchema.slotId;",
          "content_same": false
        },
        {
          "line": 3157,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pCol, i)",
          "new_text": null,
          "old_line_content": "    char*          data = colDataGetData(pCol, i);",
          "new_line_content": "  for (int32_t i = start; i < start + pInput->numOfRows; ++i) {",
          "content_same": false
        },
        {
          "line": 5207,
          "old_api": "colDataAppendNULL",
          "new_api": null,
          "old_text": "colDataAppendNULL(pCol, currentRow)",
          "new_text": null,
          "old_line_content": "    colDataAppendNULL(pCol, currentRow);",
          "new_line_content": "  if (pInfo->numSampled == 0) {",
          "content_same": false
        },
        {
          "line": 5212,
          "old_api": "colDataAppend",
          "new_api": null,
          "old_text": "colDataAppend(pCol, currentRow + i, pInfo->data + i * pInfo->colBytes, false)",
          "new_text": null,
          "old_line_content": "    colDataAppend(pCol, currentRow + i, pInfo->data + i * pInfo->colBytes, false);",
          "new_line_content": "  for (int32_t i = 0; i < pInfo->numSampled; ++i) {",
          "content_same": false
        },
        {
          "line": 3165,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SET_VAL(GET_RES_INFO(pCtx), numOfElems, 1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3169,
          "old_api": "firstLastFunctionMergeImpl",
          "new_api": null,
          "old_text": "firstLastFunctionMergeImpl(pCtx, true)",
          "new_text": null,
          "old_line_content": "int32_t firstFunctionMerge(SqlFunctionCtx* pCtx) { return firstLastFunctionMergeImpl(pCtx, true); }",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3171,
          "old_api": "firstLastFunctionMergeImpl",
          "new_api": null,
          "old_text": "firstLastFunctionMergeImpl(pCtx, false)",
          "new_text": null,
          "old_line_content": "int32_t lastFunctionMerge(SqlFunctionCtx* pCtx) { return firstLastFunctionMergeImpl(pCtx, false); }",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5222,
          "old_api": "nodesListGetNode",
          "new_api": null,
          "old_text": "nodesListGetNode(pFunc->pParameterList, 0)",
          "new_text": null,
          "old_line_content": "  SColumnNode* pCol = (SColumnNode*)nodesListGetNode(pFunc->pParameterList, 0);",
          "new_line_content": "#if 0",
          "content_same": false
        },
        {
          "line": 3175,
          "old_api": "taosArrayGet",
          "new_api": null,
          "old_text": "taosArrayGet(pBlock->pDataBlock, slotId)",
          "new_text": null,
          "old_line_content": "  SColumnInfoData* pCol = taosArrayGet(pBlock->pDataBlock, slotId);",
          "new_line_content": "  int32_t          slotId = pCtx->pExpr->base.resSchema.slotId;",
          "content_same": false
        },
        {
          "line": 3177,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3180,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": null,
          "old_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "new_text": null,
          "old_line_content": "  SFirstLastRes* pRes = GET_ROWCELL_INTERBUF(pResInfo);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3184,
          "old_api": "setSelectivityValue",
          "new_api": null,
          "old_text": "setSelectivityValue(pCtx, pBlock, &pRes->pos, pBlock->info.rows)",
          "new_text": null,
          "old_line_content": "  setSelectivityValue(pCtx, pBlock, &pRes->pos, pBlock->info.rows);",
          "new_line_content": "  // handle selectivity",
          "content_same": false
        },
        {
          "line": 5232,
          "old_api": "functionSetup",
          "new_api": null,
          "old_text": "functionSetup(pCtx, pResultInfo)",
          "new_text": null,
          "old_line_content": "  if (!functionSetup(pCtx, pResultInfo)) {",
          "new_line_content": "#if 0",
          "content_same": false
        },
        {
          "line": 5236,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": null,
          "old_text": "GET_ROWCELL_INTERBUF(pResultInfo)",
          "new_text": null,
          "old_line_content": "  STailInfo* pInfo = GET_ROWCELL_INTERBUF(pResultInfo);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3190,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pEntryInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "int32_t firstLastPartialFinalize(SqlFunctionCtx* pCtx, SSDataBlock* pBlock) {",
          "content_same": false
        },
        {
          "line": 3193,
          "old_api": "getFirstLastInfoSize",
          "new_api": null,
          "old_text": "getFirstLastInfoSize(pRes->bytes)",
          "new_text": null,
          "old_line_content": "  int32_t resultBytes = getFirstLastInfoSize(pRes->bytes);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3196,
          "old_api": "taosMemoryCalloc",
          "new_api": null,
          "old_text": "taosMemoryCalloc(resultBytes + VARSTR_HEADER_SIZE, sizeof(char))",
          "new_text": null,
          "old_line_content": "  char* res = taosMemoryCalloc(resultBytes + VARSTR_HEADER_SIZE, sizeof(char));",
          "new_line_content": "  // todo check for failure",
          "content_same": false
        },
        {
          "line": 3199,
          "old_api": "varDataSetLen",
          "new_api": null,
          "old_text": "varDataSetLen(res, resultBytes)",
          "new_text": null,
          "old_line_content": "  varDataSetLen(res, resultBytes);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3202,
          "old_api": "taosArrayGet",
          "new_api": null,
          "old_text": "taosArrayGet(pBlock->pDataBlock, slotId)",
          "new_text": null,
          "old_line_content": "  SColumnInfoData* pCol = taosArrayGet(pBlock->pDataBlock, slotId);",
          "new_line_content": "  int32_t          slotId = pCtx->pExpr->base.resSchema.slotId;",
          "content_same": false
        },
        {
          "line": 3204,
          "old_api": "colDataAppend",
          "new_api": null,
          "old_text": "colDataAppend(pCol, pBlock->info.rows, res, false)",
          "new_text": null,
          "old_line_content": "  colDataAppend(pCol, pBlock->info.rows, res, false);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3207,
          "old_api": "taosMemoryFree",
          "new_api": null,
          "old_text": "taosMemoryFree(res)",
          "new_text": null,
          "old_line_content": "  taosMemoryFree(res);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3213,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pDestCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pDResInfo = GET_RES_INFO(pDestCtx);",
          "new_line_content": "int32_t lastCombine(SqlFunctionCtx* pDestCtx, SqlFunctionCtx* pSourceCtx) {",
          "content_same": false
        },
        {
          "line": 3217,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pSourceCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pSResInfo = GET_RES_INFO(pSourceCtx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3221,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(pDBuf->buf, pSBuf->buf, bytes)",
          "new_text": null,
          "old_line_content": "    memcpy(pDBuf->buf, pSBuf->buf, bytes);",
          "new_line_content": "  if (pSResInfo->numOfRes != 0 && (pDResInfo->numOfRes == 0 || pDBuf->ts < pSBuf->ts)) {",
          "content_same": false
        },
        {
          "line": 5271,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(pItem->data, data, colBytes)",
          "new_text": null,
          "old_line_content": "    memcpy(pItem->data, data, colBytes);",
          "new_line_content": "    pItem->isNull = false;",
          "content_same": false
        },
        {
          "line": 3232,
          "old_api": "colDataIsNull_s",
          "new_api": null,
          "old_text": "colDataIsNull_s(pInputCol, rowIndex)",
          "new_text": null,
          "old_line_content": "  if (colDataIsNull_s(pInputCol, rowIndex)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5280,
          "old_api": "compareInt64Val",
          "new_api": null,
          "old_text": "compareInt64Val(&d1->timestamp, &d2->timestamp)",
          "new_text": null,
          "old_line_content": "  return compareInt64Val(&d1->timestamp, &d2->timestamp);",
          "new_line_content": "  STailItem* d2 = *(STailItem**)p2;",
          "content_same": false
        },
        {
          "line": 3237,
          "old_api": "IS_VAR_DATA_TYPE",
          "new_api": null,
          "old_text": "IS_VAR_DATA_TYPE(pInputCol->info.type)",
          "new_text": null,
          "old_line_content": "    if (IS_VAR_DATA_TYPE(pInputCol->info.type)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5286,
          "old_api": "tailAssignResult",
          "new_api": null,
          "old_text": "tailAssignResult(pList[pInfo->numAdded], data, pInfo->colBytes, ts, isNull)",
          "new_text": null,
          "old_line_content": "    tailAssignResult(pList[pInfo->numAdded], data, pInfo->colBytes, ts, isNull);",
          "new_line_content": "  if (pInfo->numAdded < pInfo->numOfPoints) {",
          "content_same": false
        },
        {
          "line": 3241,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(pInfo->buf, pData, pInfo->bytes)",
          "new_text": null,
          "old_line_content": "    memcpy(pInfo->buf, pData, pInfo->bytes);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5290,
          "old_api": "tailAssignResult",
          "new_api": null,
          "old_text": "tailAssignResult(pList[0], data, pInfo->colBytes, ts, isNull)",
          "new_text": null,
          "old_line_content": "    tailAssignResult(pList[0], data, pInfo->colBytes, ts, isNull);",
          "new_line_content": "  } else if (pList[0]->timestamp < ts) {",
          "content_same": false
        },
        {
          "line": 3245,
          "old_api": "firstlastSaveTupleData",
          "new_api": null,
          "old_text": "firstlastSaveTupleData(pCtx->pSrcBlock, rowIndex, pCtx, pInfo)",
          "new_text": null,
          "old_line_content": "  firstlastSaveTupleData(pCtx->pSrcBlock, rowIndex, pCtx, pInfo);",
          "new_line_content": "  pInfo->ts = cts;",
          "content_same": false
        },
        {
          "line": 5298,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "#if 0",
          "content_same": false
        },
        {
          "line": 3253,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3262,
          "old_api": "getRowPTs",
          "new_api": null,
          "old_text": "getRowPTs(pInput->pPTS, 0)",
          "new_text": null,
          "old_line_content": "  TSKEY startKey = getRowPTs(pInput->pPTS, 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5311,
          "old_api": "TMIN",
          "new_api": null,
          "old_text": "TMIN(pInfo->numOfPoints, pInput->numOfRows - pInfo->offset)",
          "new_text": null,
          "old_line_content": "    pInfo->numOfPoints = TMIN(pInfo->numOfPoints, pInput->numOfRows - pInfo->offset);",
          "new_line_content": "  } else {",
          "content_same": false
        },
        {
          "line": 5314,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pInputCol, i)",
          "new_text": null,
          "old_line_content": "    char* data = colDataGetData(pInputCol, i);",
          "new_line_content": "  for (int32_t i = pInput->startRowIndex; i < pInput->numOfRows + pInput->startRowIndex - pInfo->offset; i += 1) {",
          "content_same": false
        },
        {
          "line": 5318,
          "old_api": "taosqsort",
          "new_api": null,
          "old_text": "taosqsort(pInfo->pItems, pInfo->numOfPoints, POINTER_BYTES, NULL, tailCompFn)",
          "new_text": null,
          "old_line_content": "  taosqsort(pInfo->pItems, pInfo->numOfPoints, POINTER_BYTES, NULL, tailCompFn);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3272,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pInputCol, i)",
          "new_text": null,
          "old_line_content": "      char* data = colDataGetData(pInputCol, i);",
          "new_line_content": "    for (int32_t i = pInput->numOfRows + pInput->startRowIndex - 1; i >= pInput->startRowIndex; --i) {",
          "content_same": false
        },
        {
          "line": 5324,
          "old_api": "colDataAppendNULL",
          "new_api": null,
          "old_text": "colDataAppendNULL(pOutput, pos)",
          "new_text": null,
          "old_line_content": "      colDataAppendNULL(pOutput, pos);",
          "new_line_content": "    if (pItem->isNull) {",
          "content_same": false
        },
        {
          "line": 3277,
          "old_api": "doSaveLastrow",
          "new_api": null,
          "old_text": "doSaveLastrow(pCtx, data, i, cts, pInfo)",
          "new_text": null,
          "old_line_content": "        doSaveLastrow(pCtx, data, i, cts, pInfo);",
          "new_line_content": "      if (pResInfo->numOfRes == 0 || pInfo->ts < cts) {",
          "content_same": false
        },
        {
          "line": 5326,
          "old_api": "colDataAppend",
          "new_api": null,
          "old_text": "colDataAppend(pOutput, pos, pItem->data, false)",
          "new_text": null,
          "old_line_content": "      colDataAppend(pOutput, pos, pItem->data, false);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 3284,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pInputCol, i)",
          "new_text": null,
          "old_line_content": "      char* data = colDataGetData(pInputCol, i);",
          "new_line_content": "    for (int32_t i = pInput->startRowIndex; i < pInput->numOfRows + pInput->startRowIndex; ++i) {",
          "content_same": false
        },
        {
          "line": 3289,
          "old_api": "doSaveLastrow",
          "new_api": null,
          "old_text": "doSaveLastrow(pCtx, data, i, cts, pInfo)",
          "new_text": null,
          "old_line_content": "        doSaveLastrow(pCtx, data, i, cts, pInfo);",
          "new_line_content": "      if (pResInfo->numOfRes == 0 || pInfo->ts < cts) {",
          "content_same": false
        },
        {
          "line": 5337,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pEntryInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "#if 0",
          "content_same": false
        },
        {
          "line": 5344,
          "old_api": "taosArrayGet",
          "new_api": null,
          "old_text": "taosArrayGet(pBlock->pDataBlock, slotId)",
          "new_text": null,
          "old_line_content": "  SColumnInfoData* pCol = taosArrayGet(pBlock->pDataBlock, slotId);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3298,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pInputCol, i)",
          "new_text": null,
          "old_line_content": "    char* data = colDataGetData(pInputCol, i);",
          "new_line_content": "  for (int32_t i = pInput->startRowIndex; i < pInput->numOfRows + pInput->startRowIndex; ++i) {",
          "content_same": false
        },
        {
          "line": 5350,
          "old_api": "colDataAppend",
          "new_api": null,
          "old_text": "colDataAppend(pCol, currentRow, pItem->data, false)",
          "new_text": null,
          "old_line_content": "    colDataAppend(pCol, currentRow, pItem->data, false);",
          "new_line_content": "    STailItem* pItem = pInfo->pItems[i];",
          "content_same": false
        },
        {
          "line": 3303,
          "old_api": "doSaveLastrow",
          "new_api": null,
          "old_text": "doSaveLastrow(pCtx, data, i, cts, pInfo)",
          "new_text": null,
          "old_line_content": "      doSaveLastrow(pCtx, data, i, cts, pInfo);",
          "new_line_content": "    if (pResInfo->numOfRes == 0 || pInfo->ts < cts) {",
          "content_same": false
        },
        {
          "line": 3310,
          "old_api": "SET_VAL",
          "new_api": null,
          "old_text": "SET_VAL(pResInfo, numOfElems, 1)",
          "new_text": null,
          "old_line_content": "  SET_VAL(pResInfo, numOfElems, 1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3320,
          "old_api": "functionSetup",
          "new_api": null,
          "old_text": "functionSetup(pCtx, pResInfo)",
          "new_text": null,
          "old_line_content": "  if (!functionSetup(pCtx, pResInfo)) {",
          "new_line_content": "bool diffFunctionSetup(SqlFunctionCtx* pCtx, SResultRowEntryInfo* pResInfo) {",
          "content_same": false
        },
        {
          "line": 5368,
          "old_api": "functionSetup",
          "new_api": null,
          "old_text": "functionSetup(pCtx, pResInfo)",
          "new_text": null,
          "old_line_content": "  if (!functionSetup(pCtx, pResInfo)) {",
          "new_line_content": "#if 0",
          "content_same": false
        },
        {
          "line": 3324,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": null,
          "old_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "new_text": null,
          "old_line_content": "  SDiffInfo* pDiffInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5372,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": null,
          "old_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "new_text": null,
          "old_line_content": "  SUniqueInfo* pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5377,
          "old_api": "taosHashClear",
          "new_api": null,
          "old_text": "taosHashClear(pInfo->pHash)",
          "new_text": null,
          "old_line_content": "    taosHashClear(pInfo->pHash);",
          "new_line_content": "  if (pInfo->pHash != NULL) {",
          "content_same": false
        },
        {
          "line": 5379,
          "old_api": "taosGetDefaultHashFunction",
          "new_api": null,
          "old_text": "taosGetDefaultHashFunction(TSDB_DATA_TYPE_BINARY)",
          "new_text": null,
          "old_line_content": "    pInfo->pHash = taosHashInit(64, taosGetDefaultHashFunction(TSDB_DATA_TYPE_BINARY), true, HASH_NO_LOCK);",
          "new_line_content": "  } else {",
          "content_same": false
        },
        {
          "line": 5402,
          "old_api": "varDataTLen",
          "new_api": null,
          "old_text": "varDataTLen(data)",
          "new_text": null,
          "old_line_content": "  int32_t      hashKeyBytes = IS_VAR_DATA_TYPE(pInfo->colType) ? varDataTLen(data) : pInfo->colBytes;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5408,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(pItem->data, data, pInfo->colBytes)",
          "new_text": null,
          "old_line_content": "    memcpy(pItem->data, data, pInfo->colBytes);",
          "new_line_content": "    pItem->timestamp = ts;",
          "content_same": false
        },
        {
          "line": 3362,
          "old_api": "ASSERT",
          "new_api": null,
          "old_text": "ASSERT(0)",
          "new_text": null,
          "old_line_content": "      ASSERT(0);",
          "new_line_content": "    default:",
          "content_same": false
        },
        {
          "line": 5410,
          "old_api": "taosHashPut",
          "new_api": null,
          "old_text": "taosHashPut(pInfo->pHash, data, hashKeyBytes, (char*)pItem, sizeof(SUniqueItem*))",
          "new_text": null,
          "old_line_content": "    taosHashPut(pInfo->pHash, data, hashKeyBytes, (char*)pItem, sizeof(SUniqueItem*));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5420,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "#if 0",
          "content_same": false
        },
        {
          "line": 3374,
          "old_api": "colDataSetNull_f",
          "new_api": null,
          "old_text": "colDataSetNull_f(pOutput->nullbitmap, pos)",
          "new_text": null,
          "old_line_content": "        colDataSetNull_f(pOutput->nullbitmap, pos);",
          "new_line_content": "      if (delta < 0 && pDiffInfo->ignoreNegative) {",
          "content_same": false
        },
        {
          "line": 3376,
          "old_api": "colDataAppendInt64",
          "new_api": null,
          "old_text": "colDataAppendInt64(pOutput, pos, &delta)",
          "new_text": null,
          "old_line_content": "        colDataAppendInt64(pOutput, pos, &delta);",
          "new_line_content": "      } else {",
          "content_same": false
        },
        {
          "line": 5432,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pInputCol, i)",
          "new_text": null,
          "old_line_content": "    char* data = colDataGetData(pInputCol, i);",
          "new_line_content": "  for (int32_t i = pInput->startRowIndex; i < pInput->numOfRows + pInput->startRowIndex; ++i) {",
          "content_same": false
        },
        {
          "line": 3387,
          "old_api": "colDataSetNull_f",
          "new_api": null,
          "old_text": "colDataSetNull_f(pOutput->nullbitmap, pos)",
          "new_text": null,
          "old_line_content": "        colDataSetNull_f(pOutput->nullbitmap, pos);",
          "new_line_content": "      if (delta < 0 && pDiffInfo->ignoreNegative) {",
          "content_same": false
        },
        {
          "line": 5436,
          "old_api": "taosHashCleanup",
          "new_api": null,
          "old_text": "taosHashCleanup(pInfo->pHash)",
          "new_text": null,
          "old_line_content": "      taosHashCleanup(pInfo->pHash);",
          "new_line_content": "    if (sizeof(SUniqueInfo) + pInfo->numOfPoints * (sizeof(SUniqueItem) + pInfo->colBytes) >= UNIQUE_MAX_RESULT_SIZE) {",
          "content_same": false
        },
        {
          "line": 3389,
          "old_api": "colDataAppendInt64",
          "new_api": null,
          "old_text": "colDataAppendInt64(pOutput, pos, &delta)",
          "new_text": null,
          "old_line_content": "        colDataAppendInt64(pOutput, pos, &delta);",
          "new_line_content": "      } else {",
          "content_same": false
        },
        {
          "line": 5444,
          "old_api": "colDataAppendNULL",
          "new_api": null,
          "old_text": "colDataAppendNULL(pOutput, i)",
          "new_text": null,
          "old_line_content": "      colDataAppendNULL(pOutput, i);",
          "new_line_content": "    if (pItem->isNull == true) {",
          "content_same": false
        },
        {
          "line": 3398,
          "old_api": "colDataSetNull_f",
          "new_api": null,
          "old_text": "colDataSetNull_f(pOutput->nullbitmap, pos)",
          "new_text": null,
          "old_line_content": "        colDataSetNull_f(pOutput->nullbitmap, pos);",
          "new_line_content": "      if (delta < 0 && pDiffInfo->ignoreNegative) {",
          "content_same": false
        },
        {
          "line": 5446,
          "old_api": "colDataAppend",
          "new_api": null,
          "old_text": "colDataAppend(pOutput, i, pItem->data, false)",
          "new_text": null,
          "old_line_content": "      colDataAppend(pOutput, i, pItem->data, false);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 3400,
          "old_api": "colDataAppendInt64",
          "new_api": null,
          "old_text": "colDataAppendInt64(pOutput, pos, &delta)",
          "new_text": null,
          "old_line_content": "        colDataAppendInt64(pOutput, pos, &delta);",
          "new_line_content": "      } else {",
          "content_same": false
        },
        {
          "line": 5449,
          "old_api": "colDataAppendInt64",
          "new_api": null,
          "old_text": "colDataAppendInt64(pTsOutput, i, &pItem->timestamp)",
          "new_text": null,
          "old_line_content": "      colDataAppendInt64(pTsOutput, i, &pItem->timestamp);",
          "new_line_content": "    if (pTsOutput != NULL) {",
          "content_same": false
        },
        {
          "line": 3410,
          "old_api": "colDataSetNull_f",
          "new_api": null,
          "old_text": "colDataSetNull_f(pOutput->nullbitmap, pos)",
          "new_text": null,
          "old_line_content": "        colDataSetNull_f(pOutput->nullbitmap, pos);",
          "new_line_content": "      if (delta < 0 && pDiffInfo->ignoreNegative) {",
          "content_same": false
        },
        {
          "line": 3412,
          "old_api": "colDataAppendInt64",
          "new_api": null,
          "old_text": "colDataAppendInt64(pOutput, pos, &delta)",
          "new_text": null,
          "old_line_content": "        colDataAppendInt64(pOutput, pos, &delta);",
          "new_line_content": "      } else {",
          "content_same": false
        },
        {
          "line": 5464,
          "old_api": "functionSetup",
          "new_api": null,
          "old_text": "functionSetup(pCtx, pResInfo)",
          "new_text": null,
          "old_line_content": "  if (!functionSetup(pCtx, pResInfo)) {",
          "new_line_content": "bool modeFunctionSetup(SqlFunctionCtx* pCtx, SResultRowEntryInfo* pResInfo) {",
          "content_same": false
        },
        {
          "line": 3420,
          "old_api": "isnan",
          "new_api": null,
          "old_text": "isnan(delta)",
          "new_text": null,
          "old_line_content": "      if ((delta < 0 && pDiffInfo->ignoreNegative) || isinf(delta) || isnan(delta)) {  // check for overflow",
          "new_line_content": "      double delta = factor * (v - pDiffInfo->prev.d64);                               // direct previous may be null",
          "content_same": false
        },
        {
          "line": 5468,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": null,
          "old_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "new_text": null,
          "old_line_content": "  SModeInfo* pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3423,
          "old_api": "colDataAppendDouble",
          "new_api": null,
          "old_text": "colDataAppendDouble(pOutput, pos, &delta)",
          "new_text": null,
          "old_line_content": "        colDataAppendDouble(pOutput, pos, &delta);",
          "new_line_content": "      } else {",
          "content_same": false
        },
        {
          "line": 5473,
          "old_api": "taosHashClear",
          "new_api": null,
          "old_text": "taosHashClear(pInfo->pHash)",
          "new_text": null,
          "old_line_content": "    taosHashClear(pInfo->pHash);",
          "new_line_content": "  if (pInfo->pHash != NULL) {",
          "content_same": false
        },
        {
          "line": 5475,
          "old_api": "taosGetDefaultHashFunction",
          "new_api": null,
          "old_text": "taosGetDefaultHashFunction(TSDB_DATA_TYPE_BINARY)",
          "new_text": null,
          "old_line_content": "    pInfo->pHash = taosHashInit(64, taosGetDefaultHashFunction(TSDB_DATA_TYPE_BINARY), true, HASH_NO_LOCK);",
          "new_line_content": "  } else {",
          "content_same": false
        },
        {
          "line": 3431,
          "old_api": "isnan",
          "new_api": null,
          "old_text": "isnan(delta)",
          "new_text": null,
          "old_line_content": "      if ((delta < 0 && pDiffInfo->ignoreNegative) || isinf(delta) || isnan(delta)) {  // check for overflow",
          "new_line_content": "      double delta = factor * (v - pDiffInfo->prev.d64);                               // direct previous may be null",
          "content_same": false
        },
        {
          "line": 3434,
          "old_api": "colDataAppendDouble",
          "new_api": null,
          "old_text": "colDataAppendDouble(pOutput, pos, &delta)",
          "new_text": null,
          "old_line_content": "        colDataAppendDouble(pOutput, pos, &delta);",
          "new_line_content": "      } else {",
          "content_same": false
        },
        {
          "line": 5484,
          "old_api": "varDataTLen",
          "new_api": null,
          "old_text": "varDataTLen(data)",
          "new_text": null,
          "old_line_content": "  int32_t     hashKeyBytes = IS_STR_DATA_TYPE(pInfo->colType) ? varDataTLen(data) : pInfo->colBytes;",
          "new_line_content": "static void doModeAdd(SModeInfo* pInfo, int32_t rowIndex, SqlFunctionCtx* pCtx, char* data) {",
          "content_same": false
        },
        {
          "line": 3440,
          "old_api": "ASSERT",
          "new_api": null,
          "old_text": "ASSERT(0)",
          "new_text": null,
          "old_line_content": "      ASSERT(0);",
          "new_line_content": "    default:",
          "content_same": false
        },
        {
          "line": 5489,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(pItem->data, data, hashKeyBytes)",
          "new_text": null,
          "old_line_content": "    memcpy(pItem->data, data, hashKeyBytes);",
          "new_line_content": "    SModeItem* pItem = (SModeItem*)(pInfo->pItems + pInfo->numOfPoints * size);",
          "content_same": false
        },
        {
          "line": 3445,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "int32_t diffFunction(SqlFunctionCtx* pCtx) {",
          "content_same": false
        },
        {
          "line": 5493,
          "old_api": "saveTupleData",
          "new_api": null,
          "old_text": "saveTupleData(pCtx, rowIndex, pCtx->pSrcBlock, NULL)",
          "new_text": null,
          "old_line_content": "      pItem->tuplePos = saveTupleData(pCtx, rowIndex, pCtx->pSrcBlock, NULL);",
          "new_line_content": "    if (pCtx->subsidiaries.num > 0) {",
          "content_same": false
        },
        {
          "line": 5496,
          "old_api": "taosHashPut",
          "new_api": null,
          "old_text": "taosHashPut(pInfo->pHash, data, hashKeyBytes, &pItem, sizeof(SModeItem*))",
          "new_text": null,
          "old_line_content": "    taosHashPut(pInfo->pHash, data, hashKeyBytes, &pItem, sizeof(SModeItem*));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5501,
          "old_api": "updateTupleData",
          "new_api": null,
          "old_text": "updateTupleData(pCtx, rowIndex, pCtx->pSrcBlock, &((*pHashItem)->tuplePos))",
          "new_text": null,
          "old_line_content": "      updateTupleData(pCtx, rowIndex, pCtx->pSrcBlock, &((*pHashItem)->tuplePos));",
          "new_line_content": "    if (pCtx->subsidiaries.num > 0) {",
          "content_same": false
        },
        {
          "line": 5507,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "int32_t modeFunction(SqlFunctionCtx* pCtx) {",
          "content_same": false
        },
        {
          "line": 3461,
          "old_api": "colDataIsNull_f",
          "new_api": null,
          "old_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "new_text": null,
          "old_line_content": "      if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3463,
          "old_api": "colDataSetNull_f",
          "new_api": null,
          "old_text": "colDataSetNull_f(pOutput->nullbitmap, pos)",
          "new_text": null,
          "old_line_content": "          colDataSetNull_f(pOutput->nullbitmap, pos);",
          "new_line_content": "        if (pDiffInfo->includeNull) {",
          "content_same": false
        },
        {
          "line": 3470,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pInputCol, i)",
          "new_text": null,
          "old_line_content": "      char* pv = colDataGetData(pInputCol, i);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5518,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pInputCol, i)",
          "new_text": null,
          "old_line_content": "    char* data = colDataGetData(pInputCol, i);",
          "new_line_content": "  for (int32_t i = pInput->startRowIndex; i < pInput->numOfRows + pInput->startRowIndex; ++i) {",
          "content_same": false
        },
        {
          "line": 3473,
          "old_api": "doHandleDiff",
          "new_api": null,
          "old_text": "doHandleDiff(pDiffInfo, pInputCol->info.type, pv, pOutput, pos, pCtx->order)",
          "new_text": null,
          "old_line_content": "        doHandleDiff(pDiffInfo, pInputCol->info.type, pv, pOutput, pos, pCtx->order);",
          "new_line_content": "      if (pDiffInfo->hasPrev) {",
          "content_same": false
        },
        {
          "line": 3476,
          "old_api": "appendSelectivityValue",
          "new_api": null,
          "old_text": "appendSelectivityValue(pCtx, i, pos)",
          "new_text": null,
          "old_line_content": "          appendSelectivityValue(pCtx, i, pos);",
          "new_line_content": "        if (pCtx->subsidiaries.num > 0) {",
          "content_same": false
        },
        {
          "line": 5524,
          "old_api": "doModeAdd",
          "new_api": null,
          "old_text": "doModeAdd(pInfo, i, pCtx, data)",
          "new_text": null,
          "old_line_content": "    doModeAdd(pInfo, i, pCtx, data);",
          "new_line_content": "    numOfElems++;",
          "content_same": false
        },
        {
          "line": 5527,
          "old_api": "taosHashCleanup",
          "new_api": null,
          "old_text": "taosHashCleanup(pInfo->pHash)",
          "new_text": null,
          "old_line_content": "      taosHashCleanup(pInfo->pHash);",
          "new_line_content": "    if (sizeof(SModeInfo) + pInfo->numOfPoints * (sizeof(SModeItem) + pInfo->colBytes) >= MODE_MAX_RESULT_SIZE) {",
          "content_same": false
        },
        {
          "line": 3481,
          "old_api": "doSetPrevVal",
          "new_api": null,
          "old_text": "doSetPrevVal(pDiffInfo, pInputCol->info.type, pv)",
          "new_text": null,
          "old_line_content": "        doSetPrevVal(pDiffInfo, pInputCol->info.type, pv);",
          "new_line_content": "      } else {",
          "content_same": false
        },
        {
          "line": 5533,
          "old_api": "saveTupleData",
          "new_api": null,
          "old_text": "saveTupleData(pCtx, pInput->startRowIndex, pCtx->pSrcBlock, NULL)",
          "new_text": null,
          "old_line_content": "    pInfo->nullTuplePos = saveTupleData(pCtx, pInput->startRowIndex, pCtx->pSrcBlock, NULL);",
          "new_line_content": "  if (numOfElems == 0 && pCtx->subsidiaries.num > 0 && !pInfo->nullTupleSaved) {",
          "content_same": false
        },
        {
          "line": 5537,
          "old_api": "SET_VAL",
          "new_api": null,
          "old_text": "SET_VAL(pResInfo, numOfElems, 1)",
          "new_text": null,
          "old_line_content": "  SET_VAL(pResInfo, numOfElems, 1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3490,
          "old_api": "colDataIsNull_f",
          "new_api": null,
          "old_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "new_text": null,
          "old_line_content": "      if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3492,
          "old_api": "colDataSetNull_f",
          "new_api": null,
          "old_text": "colDataSetNull_f(pOutput->nullbitmap, pos)",
          "new_text": null,
          "old_line_content": "          colDataSetNull_f(pOutput->nullbitmap, pos);",
          "new_line_content": "        if (pDiffInfo->includeNull) {",
          "content_same": false
        },
        {
          "line": 5543,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "int32_t modeFinalize(SqlFunctionCtx* pCtx, SSDataBlock* pBlock) {",
          "content_same": false
        },
        {
          "line": 5546,
          "old_api": "taosArrayGet",
          "new_api": null,
          "old_text": "taosArrayGet(pBlock->pDataBlock, slotId)",
          "new_text": null,
          "old_line_content": "  SColumnInfoData*     pCol = taosArrayGet(pBlock->pDataBlock, slotId);",
          "new_line_content": "  int32_t              slotId = pCtx->pExpr->base.resSchema.slotId;",
          "content_same": false
        },
        {
          "line": 3499,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pInputCol, i)",
          "new_text": null,
          "old_line_content": "      char* pv = colDataGetData(pInputCol, i);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3503,
          "old_api": "doHandleDiff",
          "new_api": null,
          "old_text": "doHandleDiff(pDiffInfo, pInputCol->info.type, pv, pOutput, pos, pCtx->order)",
          "new_text": null,
          "old_line_content": "        doHandleDiff(pDiffInfo, pInputCol->info.type, pv, pOutput, pos, pCtx->order);",
          "new_line_content": "      if (pDiffInfo->hasPrev) {",
          "content_same": false
        },
        {
          "line": 3506,
          "old_api": "appendSelectivityValue",
          "new_api": null,
          "old_text": "appendSelectivityValue(pCtx, i, pos)",
          "new_text": null,
          "old_line_content": "          appendSelectivityValue(pCtx, i, pos);",
          "new_line_content": "        if (pCtx->subsidiaries.num > 0) {",
          "content_same": false
        },
        {
          "line": 3511,
          "old_api": "doSetPrevVal",
          "new_api": null,
          "old_text": "doSetPrevVal(pDiffInfo, pInputCol->info.type, pv)",
          "new_text": null,
          "old_line_content": "        doSetPrevVal(pDiffInfo, pInputCol->info.type, pv);",
          "new_line_content": "      } else {",
          "content_same": false
        },
        {
          "line": 5561,
          "old_api": "colDataAppend",
          "new_api": null,
          "old_text": "colDataAppend(pCol, currentRow, pResItem->data, false)",
          "new_text": null,
          "old_line_content": "    colDataAppend(pCol, currentRow, pResItem->data, false);",
          "new_line_content": "    SModeItem* pResItem = (SModeItem*)(pInfo->pItems + resIndex * (sizeof(SModeItem) + pInfo->colBytes));",
          "content_same": false
        },
        {
          "line": 5564,
          "old_api": "colDataAppendNULL",
          "new_api": null,
          "old_text": "colDataAppendNULL(pCol, currentRow)",
          "new_text": null,
          "old_line_content": "    colDataAppendNULL(pCol, currentRow);",
          "new_line_content": "  } else {",
          "content_same": false
        },
        {
          "line": 5568,
          "old_api": "taosHashCleanup",
          "new_api": null,
          "old_text": "taosHashCleanup(pInfo->pHash)",
          "new_text": null,
          "old_line_content": "  taosHashCleanup(pInfo->pHash);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3525,
          "old_api": "nodesListGetNode",
          "new_api": null,
          "old_text": "nodesListGetNode(pFunc->pParameterList, 1)",
          "new_text": null,
          "old_line_content": "  SValueNode* pkNode = (SValueNode*)nodesListGetNode(pFunc->pParameterList, 1);",
          "new_line_content": "bool getTopBotFuncEnv(SFunctionNode* pFunc, SFuncExecEnv* pEnv) {",
          "content_same": false
        },
        {
          "line": 3531,
          "old_api": "functionSetup",
          "new_api": null,
          "old_text": "functionSetup(pCtx, pResInfo)",
          "new_text": null,
          "old_line_content": "  if (!functionSetup(pCtx, pResInfo)) {",
          "new_line_content": "bool topBotFunctionSetup(SqlFunctionCtx* pCtx, SResultRowEntryInfo* pResInfo) {",
          "content_same": false
        },
        {
          "line": 5579,
          "old_api": "functionSetup",
          "new_api": null,
          "old_text": "functionSetup(pCtx, pResultInfo)",
          "new_text": null,
          "old_line_content": "  if (!functionSetup(pCtx, pResultInfo)) {",
          "new_line_content": "bool twaFunctionSetup(SqlFunctionCtx* pCtx, SResultRowEntryInfo* pResultInfo) {",
          "content_same": false
        },
        {
          "line": 3535,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": null,
          "old_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "new_text": null,
          "old_line_content": "  STopBotRes*           pRes = GET_ROWCELL_INTERBUF(pResInfo);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5583,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  STwaInfo* pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3546,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "static STopBotRes* getTopBotOutputInfo(SqlFunctionCtx* pCtx) {",
          "content_same": false
        },
        {
          "line": 5606,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3560,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "  int32_t              numOfElems = 0;",
          "content_same": false
        },
        {
          "line": 5608,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": null,
          "old_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "new_text": null,
          "old_line_content": "  STwaInfo* pInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5612,
          "old_api": "IS_NULL_TYPE",
          "new_api": null,
          "old_text": "IS_NULL_TYPE(pInputCol->info.type)",
          "new_text": null,
          "old_line_content": "  if (IS_NULL_TYPE(pInputCol->info.type)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3565,
          "old_api": "getTopBotOutputInfo",
          "new_api": null,
          "old_text": "getTopBotOutputInfo(pCtx)",
          "new_text": null,
          "old_line_content": "  STopBotRes* pRes = getTopBotOutputInfo(pCtx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3570,
          "old_api": "colDataIsNull_f",
          "new_api": null,
          "old_text": "colDataIsNull_f(pCol->nullbitmap, i)",
          "new_text": null,
          "old_line_content": "    if (pCol->hasNull && colDataIsNull_f(pCol->nullbitmap, i)) {",
          "new_line_content": "  for (int32_t i = start; i < pInput->numOfRows + start; ++i) {",
          "content_same": false
        },
        {
          "line": 5622,
          "old_api": "ASSERT",
          "new_api": null,
          "old_text": "ASSERT(last->key == INT64_MIN)",
          "new_text": null,
          "old_line_content": "    ASSERT(last->key == INT64_MIN);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3575,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pCol, i)",
          "new_text": null,
          "old_line_content": "    char* data = colDataGetData(pCol, i);",
          "new_line_content": "    numOfElems++;",
          "content_same": false
        },
        {
          "line": 5624,
          "old_api": "colDataIsNull_f",
          "new_api": null,
          "old_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "new_text": null,
          "old_line_content": "      if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "new_line_content": "    for (; i < pInput->numOfRows + pInput->startRowIndex; ++i) {",
          "content_same": false
        },
        {
          "line": 3580,
          "old_api": "saveTupleData",
          "new_api": null,
          "old_text": "saveTupleData(pCtx, pInput->startRowIndex, pCtx->pSrcBlock, NULL)",
          "new_text": null,
          "old_line_content": "    pRes->nullTuplePos = saveTupleData(pCtx, pInput->startRowIndex, pCtx->pSrcBlock, NULL);",
          "new_line_content": "  if (numOfElems == 0 && pCtx->subsidiaries.num > 0 && !pRes->nullTupleSaved) {",
          "content_same": false
        },
        {
          "line": 5630,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pInputCol, i)",
          "new_text": null,
          "old_line_content": "      GET_TYPED_DATA(last->val, double, pInputCol->info.type, colDataGetData(pInputCol, i));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5632,
          "old_api": "twa_get_area",
          "new_api": null,
          "old_text": "twa_get_area(pCtx->start, *last)",
          "new_text": null,
          "old_line_content": "      pInfo->dOutput += twa_get_area(pCtx->start, *last);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3588,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "  int32_t              numOfElems = 0;",
          "content_same": false
        },
        {
          "line": 5640,
          "old_api": "colDataIsNull_f",
          "new_api": null,
          "old_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "new_text": null,
          "old_line_content": "      if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "new_line_content": "    for (; i < pInput->numOfRows + pInput->startRowIndex; ++i) {",
          "content_same": false
        },
        {
          "line": 3593,
          "old_api": "getTopBotOutputInfo",
          "new_api": null,
          "old_text": "getTopBotOutputInfo(pCtx)",
          "new_text": null,
          "old_line_content": "  STopBotRes* pRes = getTopBotOutputInfo(pCtx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3598,
          "old_api": "colDataIsNull_f",
          "new_api": null,
          "old_text": "colDataIsNull_f(pCol->nullbitmap, i)",
          "new_text": null,
          "old_line_content": "    if (pCol->hasNull && colDataIsNull_f(pCol->nullbitmap, i)) {",
          "new_line_content": "  for (int32_t i = start; i < pInput->numOfRows + start; ++i) {",
          "content_same": false
        },
        {
          "line": 5646,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pInputCol, i)",
          "new_text": null,
          "old_line_content": "      GET_TYPED_DATA(last->val, double, pInputCol->info.type, colDataGetData(pInputCol, i));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3603,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pCol, i)",
          "new_text": null,
          "old_line_content": "    char* data = colDataGetData(pCol, i);",
          "new_line_content": "    numOfElems++;",
          "content_same": false
        },
        {
          "line": 3608,
          "old_api": "saveTupleData",
          "new_api": null,
          "old_text": "saveTupleData(pCtx, pInput->startRowIndex, pCtx->pSrcBlock, NULL)",
          "new_text": null,
          "old_line_content": "    pRes->nullTuplePos = saveTupleData(pCtx, pInput->startRowIndex, pCtx->pSrcBlock, NULL);",
          "new_line_content": "  if (numOfElems == 0 && pCtx->subsidiaries.num > 0 && !pRes->nullTupleSaved) {",
          "content_same": false
        },
        {
          "line": 5660,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pInputCol, 0)",
          "new_text": null,
          "old_line_content": "      int8_t* val = (int8_t*)colDataGetData(pInputCol, 0);",
          "new_line_content": "    case TSDB_DATA_TYPE_TINYINT: {",
          "content_same": false
        },
        {
          "line": 5662,
          "old_api": "colDataIsNull_f",
          "new_api": null,
          "old_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "new_text": null,
          "old_line_content": "        if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "new_line_content": "      for (; i < pInput->numOfRows + pInput->startRowIndex; i += 1) {",
          "content_same": false
        },
        {
          "line": 5667,
          "old_api": "INIT_INTP_POINT",
          "new_api": null,
          "old_text": "INIT_INTP_POINT(st, tsList[i], val[i])",
          "new_text": null,
          "old_line_content": "        INIT_INTP_POINT(st, tsList[i], val[i]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3621,
          "old_api": "IS_SIGNED_NUMERIC_TYPE",
          "new_api": null,
          "old_text": "IS_SIGNED_NUMERIC_TYPE(type)",
          "new_text": null,
          "old_line_content": "  if (IS_SIGNED_NUMERIC_TYPE(type)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5672,
          "old_api": "twa_get_area",
          "new_api": null,
          "old_text": "twa_get_area(pInfo->p, st)",
          "new_text": null,
          "old_line_content": "        pInfo->dOutput += twa_get_area(pInfo->p, st);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3627,
          "old_api": "IS_UNSIGNED_NUMERIC_TYPE",
          "new_api": null,
          "old_text": "IS_UNSIGNED_NUMERIC_TYPE(type)",
          "new_text": null,
          "old_line_content": "  } else if (IS_UNSIGNED_NUMERIC_TYPE(type)) {",
          "new_line_content": "    return (val1->v.i > val2->v.i) ? 1 : -1;",
          "content_same": false
        },
        {
          "line": 5679,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pInputCol, 0)",
          "new_text": null,
          "old_line_content": "      int16_t* val = (int16_t*)colDataGetData(pInputCol, 0);",
          "new_line_content": "    case TSDB_DATA_TYPE_SMALLINT: {",
          "content_same": false
        },
        {
          "line": 5681,
          "old_api": "colDataIsNull_f",
          "new_api": null,
          "old_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "new_text": null,
          "old_line_content": "        if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "new_line_content": "      for (; i < pInput->numOfRows + pInput->startRowIndex; i += 1) {",
          "content_same": false
        },
        {
          "line": 5686,
          "old_api": "INIT_INTP_POINT",
          "new_api": null,
          "old_text": "INIT_INTP_POINT(st, tsList[i], val[i])",
          "new_text": null,
          "old_line_content": "        INIT_INTP_POINT(st, tsList[i], val[i]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5691,
          "old_api": "twa_get_area",
          "new_api": null,
          "old_text": "twa_get_area(pInfo->p, st)",
          "new_text": null,
          "old_line_content": "        pInfo->dOutput += twa_get_area(pInfo->p, st);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3644,
          "old_api": "getTopBotOutputInfo",
          "new_api": null,
          "old_text": "getTopBotOutputInfo(pCtx)",
          "new_text": null,
          "old_line_content": "  STopBotRes* pRes = getTopBotOutputInfo(pCtx);",
          "new_line_content": "                     uint64_t uid, SResultRowEntryInfo* pEntryInfo, bool isTopQuery) {",
          "content_same": false
        },
        {
          "line": 3647,
          "old_api": "taosVariantCreateFromBinary",
          "new_api": null,
          "old_text": "taosVariantCreateFromBinary(&val, pData, tDataTypes[type].bytes, type)",
          "new_text": null,
          "old_line_content": "  taosVariantCreateFromBinary(&val, pData, tDataTypes[type].bytes, type);",
          "new_line_content": "  SVariant val = {0};",
          "content_same": false
        },
        {
          "line": 5697,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pInputCol, 0)",
          "new_text": null,
          "old_line_content": "      int32_t* val = (int32_t*)colDataGetData(pInputCol, 0);",
          "new_line_content": "    case TSDB_DATA_TYPE_INT: {",
          "content_same": false
        },
        {
          "line": 3650,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(pItems != NULL)",
          "new_text": null,
          "old_line_content": "  assert(pItems != NULL);",
          "new_line_content": "  STopBotResItem* pItems = pRes->pItems;",
          "content_same": false
        },
        {
          "line": 5699,
          "old_api": "colDataIsNull_f",
          "new_api": null,
          "old_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "new_text": null,
          "old_line_content": "        if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "new_line_content": "      for (; i < pInput->numOfRows + pInput->startRowIndex; i += 1) {",
          "content_same": false
        },
        {
          "line": 5704,
          "old_api": "INIT_INTP_POINT",
          "new_api": null,
          "old_text": "INIT_INTP_POINT(st, tsList[i], val[i])",
          "new_text": null,
          "old_line_content": "        INIT_INTP_POINT(st, tsList[i], val[i]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3660,
          "old_api": "saveTupleData",
          "new_api": null,
          "old_text": "saveTupleData(pCtx, rowIndex, pSrcBlock, NULL)",
          "new_text": null,
          "old_line_content": "      pItem->tuplePos = saveTupleData(pCtx, rowIndex, pSrcBlock, NULL);",
          "new_line_content": "    if (pCtx->subsidiaries.num > 0) {",
          "content_same": false
        },
        {
          "line": 5709,
          "old_api": "twa_get_area",
          "new_api": null,
          "old_text": "twa_get_area(pInfo->p, st)",
          "new_text": null,
          "old_line_content": "        pInfo->dOutput += twa_get_area(pInfo->p, st);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3663,
          "old_api": "qDebug",
          "new_api": null,
          "old_text": "qDebug(\"page_saveTuple i:%d, item:%p,pageId:%d, offset:%d\\n\", pEntryInfo->numOfRes, pItem, pItem->tuplePos.pageId,\n           pItem->tuplePos.offset)",
          "new_text": null,
          "old_line_content": "    qDebug(\"page_saveTuple i:%d, item:%p,pageId:%d, offset:%d\\n\", pEntryInfo->numOfRes, pItem, pItem->tuplePos.pageId,",
          "new_line_content": "#ifdef BUF_PAGE_DEBUG",
          "content_same": false
        },
        {
          "line": 5715,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pInputCol, 0)",
          "new_text": null,
          "old_line_content": "      int64_t* val = (int64_t*)colDataGetData(pInputCol, 0);",
          "new_line_content": "    case TSDB_DATA_TYPE_BIGINT: {",
          "content_same": false
        },
        {
          "line": 3668,
          "old_api": "taosheapsort",
          "new_api": null,
          "old_text": "taosheapsort((void*)pItems, sizeof(STopBotResItem), pEntryInfo->numOfRes, (const void*)&type, topBotResComparFn,\n                 !isTopQuery)",
          "new_text": null,
          "old_line_content": "    taosheapsort((void*)pItems, sizeof(STopBotResItem), pEntryInfo->numOfRes, (const void*)&type, topBotResComparFn,",
          "new_line_content": "    pEntryInfo->numOfRes++;",
          "content_same": false
        },
        {
          "line": 5717,
          "old_api": "colDataIsNull_f",
          "new_api": null,
          "old_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "new_text": null,
          "old_line_content": "        if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "new_line_content": "      for (; i < pInput->numOfRows + pInput->startRowIndex; i += 1) {",
          "content_same": false
        },
        {
          "line": 3671,
          "old_api": "IS_SIGNED_NUMERIC_TYPE",
          "new_api": null,
          "old_text": "IS_SIGNED_NUMERIC_TYPE(type)",
          "new_text": null,
          "old_line_content": "    if ((isTopQuery && ((IS_SIGNED_NUMERIC_TYPE(type) && val.i > pItems[0].v.i) ||",
          "new_line_content": "  } else {  // replace the minimum value in the result",
          "content_same": false
        },
        {
          "line": 5722,
          "old_api": "INIT_INTP_POINT",
          "new_api": null,
          "old_text": "INIT_INTP_POINT(st, tsList[i], val[i])",
          "new_text": null,
          "old_line_content": "        INIT_INTP_POINT(st, tsList[i], val[i]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5727,
          "old_api": "twa_get_area",
          "new_api": null,
          "old_text": "twa_get_area(pInfo->p, st)",
          "new_text": null,
          "old_line_content": "        pInfo->dOutput += twa_get_area(pInfo->p, st);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3684,
          "old_api": "updateTupleData",
          "new_api": null,
          "old_text": "updateTupleData(pCtx, rowIndex, pSrcBlock, &pItem->tuplePos)",
          "new_text": null,
          "old_line_content": "        updateTupleData(pCtx, rowIndex, pSrcBlock, &pItem->tuplePos);",
          "new_line_content": "      if (pCtx->subsidiaries.num > 0) {",
          "content_same": false
        },
        {
          "line": 5733,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pInputCol, 0)",
          "new_text": null,
          "old_line_content": "      float* val = (float*)colDataGetData(pInputCol, 0);",
          "new_line_content": "    case TSDB_DATA_TYPE_FLOAT: {",
          "content_same": false
        },
        {
          "line": 3687,
          "old_api": "qDebug",
          "new_api": null,
          "old_text": "qDebug(\"page_copyTuple pageId:%d, offset:%d\", pItem->tuplePos.pageId, pItem->tuplePos.offset)",
          "new_text": null,
          "old_line_content": "      qDebug(\"page_copyTuple pageId:%d, offset:%d\", pItem->tuplePos.pageId, pItem->tuplePos.offset);",
          "new_line_content": "#ifdef BUF_PAGE_DEBUG",
          "content_same": false
        },
        {
          "line": 5735,
          "old_api": "colDataIsNull_f",
          "new_api": null,
          "old_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "new_text": null,
          "old_line_content": "        if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "new_line_content": "      for (; i < pInput->numOfRows + pInput->startRowIndex; i += 1) {",
          "content_same": false
        },
        {
          "line": 3689,
          "old_api": "taosheapadjust",
          "new_api": null,
          "old_text": "taosheapadjust((void*)pItems, sizeof(STopBotResItem), 0, pEntryInfo->numOfRes - 1, (const void*)&type,\n                     topBotResComparFn, NULL, !isTopQuery)",
          "new_text": null,
          "old_line_content": "      taosheapadjust((void*)pItems, sizeof(STopBotResItem), 0, pEntryInfo->numOfRes - 1, (const void*)&type,",
          "new_line_content": "#endif",
          "content_same": false
        },
        {
          "line": 5740,
          "old_api": "INIT_INTP_POINT",
          "new_api": null,
          "old_text": "INIT_INTP_POINT(st, tsList[i], val[i])",
          "new_text": null,
          "old_line_content": "        INIT_INTP_POINT(st, tsList[i], val[i]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5745,
          "old_api": "twa_get_area",
          "new_api": null,
          "old_text": "twa_get_area(pInfo->p, st)",
          "new_text": null,
          "old_line_content": "        pInfo->dOutput += twa_get_area(pInfo->p, st);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5751,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pInputCol, 0)",
          "new_text": null,
          "old_line_content": "      double* val = (double*)colDataGetData(pInputCol, 0);",
          "new_line_content": "    case TSDB_DATA_TYPE_DOUBLE: {",
          "content_same": false
        },
        {
          "line": 5753,
          "old_api": "colDataIsNull_f",
          "new_api": null,
          "old_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "new_text": null,
          "old_line_content": "        if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "new_line_content": "      for (; i < pInput->numOfRows + pInput->startRowIndex; i += 1) {",
          "content_same": false
        },
        {
          "line": 5758,
          "old_api": "INIT_INTP_POINT",
          "new_api": null,
          "old_text": "INIT_INTP_POINT(st, tsList[i], val[i])",
          "new_text": null,
          "old_line_content": "        INIT_INTP_POINT(st, tsList[i], val[i]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3713,
          "old_api": "taosArrayGet",
          "new_api": null,
          "old_text": "taosArrayGet(pSrcBlock->pDataBlock, srcSlotId)",
          "new_text": null,
          "old_line_content": "    SColumnInfoData* pCol = taosArrayGet(pSrcBlock->pDataBlock, srcSlotId);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5763,
          "old_api": "twa_get_area",
          "new_api": null,
          "old_text": "twa_get_area(pInfo->p, st)",
          "new_text": null,
          "old_line_content": "        pInfo->dOutput += twa_get_area(pInfo->p, st);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3719,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pCol, rowIndex)",
          "new_text": null,
          "old_line_content": "    char* p = colDataGetData(pCol, rowIndex);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5769,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pInputCol, 0)",
          "new_text": null,
          "old_line_content": "      uint8_t* val = (uint8_t*)colDataGetData(pInputCol, 0);",
          "new_line_content": "    case TSDB_DATA_TYPE_UTINYINT: {",
          "content_same": false
        },
        {
          "line": 3723,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(pStart + offset, p, pCol->info.bytes)",
          "new_text": null,
          "old_line_content": "      memcpy(pStart + offset, p, pCol->info.bytes);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 5771,
          "old_api": "colDataIsNull_f",
          "new_api": null,
          "old_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "new_text": null,
          "old_line_content": "        if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "new_line_content": "      for (; i < pInput->numOfRows + pInput->startRowIndex; i += 1) {",
          "content_same": false
        },
        {
          "line": 5776,
          "old_api": "INIT_INTP_POINT",
          "new_api": null,
          "old_text": "INIT_INTP_POINT(st, tsList[i], val[i])",
          "new_text": null,
          "old_line_content": "        INIT_INTP_POINT(st, tsList[i], val[i]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5781,
          "old_api": "twa_get_area",
          "new_api": null,
          "old_text": "twa_get_area(pInfo->p, st)",
          "new_text": null,
          "old_line_content": "        pInfo->dOutput += twa_get_area(pInfo->p, st);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3739,
          "old_api": "getNewBufPage",
          "new_api": null,
          "old_text": "getNewBufPage(pHandle->pBuf, &pHandle->currentPage)",
          "new_text": null,
          "old_line_content": "      pPage = getNewBufPage(pHandle->pBuf, &pHandle->currentPage);",
          "new_line_content": "    if (pHandle->currentPage == -1) {",
          "content_same": false
        },
        {
          "line": 5787,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pInputCol, 0)",
          "new_text": null,
          "old_line_content": "      uint16_t* val = (uint16_t*)colDataGetData(pInputCol, 0);",
          "new_line_content": "    case TSDB_DATA_TYPE_USMALLINT: {",
          "content_same": false
        },
        {
          "line": 5789,
          "old_api": "colDataIsNull_f",
          "new_api": null,
          "old_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "new_text": null,
          "old_line_content": "        if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "new_line_content": "      for (; i < pInput->numOfRows + pInput->startRowIndex; i += 1) {",
          "content_same": false
        },
        {
          "line": 3742,
          "old_api": "getBufPage",
          "new_api": null,
          "old_text": "getBufPage(pHandle->pBuf, pHandle->currentPage)",
          "new_text": null,
          "old_line_content": "      pPage = getBufPage(pHandle->pBuf, pHandle->currentPage);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 3745,
          "old_api": "releaseBufPage",
          "new_api": null,
          "old_text": "releaseBufPage(pHandle->pBuf, pPage)",
          "new_text": null,
          "old_line_content": "        releaseBufPage(pHandle->pBuf, pPage);",
          "new_line_content": "        // current page is all used, let's prepare a new buffer page",
          "content_same": false
        },
        {
          "line": 5794,
          "old_api": "INIT_INTP_POINT",
          "new_api": null,
          "old_text": "INIT_INTP_POINT(st, tsList[i], val[i])",
          "new_text": null,
          "old_line_content": "        INIT_INTP_POINT(st, tsList[i], val[i]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5799,
          "old_api": "twa_get_area",
          "new_api": null,
          "old_text": "twa_get_area(pInfo->p, st)",
          "new_text": null,
          "old_line_content": "        pInfo->dOutput += twa_get_area(pInfo->p, st);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3752,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(pPage->data + pPage->num, pBuf, length)",
          "new_text": null,
          "old_line_content": "    memcpy(pPage->data + pPage->num, pBuf, length);",
          "new_line_content": "    p = (STuplePos){.pageId = pHandle->currentPage, .offset = pPage->num};",
          "content_same": false
        },
        {
          "line": 3755,
          "old_api": "setBufPageDirty",
          "new_api": null,
          "old_text": "setBufPageDirty(pPage, true)",
          "new_text": null,
          "old_line_content": "    setBufPageDirty(pPage, true);",
          "new_line_content": "    pPage->num += length;",
          "content_same": false
        },
        {
          "line": 5805,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pInputCol, 0)",
          "new_text": null,
          "old_line_content": "      uint32_t* val = (uint32_t*)colDataGetData(pInputCol, 0);",
          "new_line_content": "    case TSDB_DATA_TYPE_UINT: {",
          "content_same": false
        },
        {
          "line": 3759,
          "old_api": "streamStateFuncPut",
          "new_api": null,
          "old_text": "streamStateFuncPut(pHandle->pState, pKey, pBuf, length)",
          "new_text": null,
          "old_line_content": "    if (streamStateFuncPut(pHandle->pState, pKey, pBuf, length) < 0) {",
          "new_line_content": "    // other tuple save policy",
          "content_same": false
        },
        {
          "line": 5807,
          "old_api": "colDataIsNull_f",
          "new_api": null,
          "old_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "new_text": null,
          "old_line_content": "        if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "new_line_content": "      for (; i < pInput->numOfRows + pInput->startRowIndex; i += 1) {",
          "content_same": false
        },
        {
          "line": 5812,
          "old_api": "INIT_INTP_POINT",
          "new_api": null,
          "old_text": "INIT_INTP_POINT(st, tsList[i], val[i])",
          "new_text": null,
          "old_line_content": "        INIT_INTP_POINT(st, tsList[i], val[i]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5817,
          "old_api": "twa_get_area",
          "new_api": null,
          "old_text": "twa_get_area(pInfo->p, st)",
          "new_text": null,
          "old_line_content": "        pInfo->dOutput += twa_get_area(pInfo->p, st);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5823,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pInputCol, 0)",
          "new_text": null,
          "old_line_content": "      uint64_t* val = (uint64_t*)colDataGetData(pInputCol, 0);",
          "new_line_content": "    case TSDB_DATA_TYPE_UBIGINT: {",
          "content_same": false
        },
        {
          "line": 3777,
          "old_api": "taosMemoryMalloc",
          "new_api": null,
          "old_text": "taosMemoryMalloc(pCtx->subsidiaries.rowLen)",
          "new_text": null,
          "old_line_content": "    pCtx->subsidiaries.buf = taosMemoryMalloc(pCtx->subsidiaries.rowLen);",
          "new_line_content": "    pCtx->subsidiaries.rowLen = rowLen + pCtx->subsidiaries.num * sizeof(bool);",
          "content_same": false
        },
        {
          "line": 5825,
          "old_api": "colDataIsNull_f",
          "new_api": null,
          "old_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "new_text": null,
          "old_line_content": "        if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "new_line_content": "      for (; i < pInput->numOfRows + pInput->startRowIndex; i += 1) {",
          "content_same": false
        },
        {
          "line": 3780,
          "old_api": "serializeTupleData",
          "new_api": null,
          "old_text": "serializeTupleData(pSrcBlock, rowIndex, &pCtx->subsidiaries, pCtx->subsidiaries.buf)",
          "new_text": null,
          "old_line_content": "  char* buf = serializeTupleData(pSrcBlock, rowIndex, &pCtx->subsidiaries, pCtx->subsidiaries.buf);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5830,
          "old_api": "INIT_INTP_POINT",
          "new_api": null,
          "old_text": "INIT_INTP_POINT(st, tsList[i], val[i])",
          "new_text": null,
          "old_line_content": "        INIT_INTP_POINT(st, tsList[i], val[i]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3786,
          "old_api": "getBufPage",
          "new_api": null,
          "old_text": "getBufPage(pHandle->pBuf, pPos->pageId)",
          "new_text": null,
          "old_line_content": "    SFilePage* pPage = getBufPage(pHandle->pBuf, pPos->pageId);",
          "new_line_content": "  if (pHandle->pBuf != NULL) {",
          "content_same": false
        },
        {
          "line": 5835,
          "old_api": "twa_get_area",
          "new_api": null,
          "old_text": "twa_get_area(pInfo->p, st)",
          "new_text": null,
          "old_line_content": "        pInfo->dOutput += twa_get_area(pInfo->p, st);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3791,
          "old_api": "streamStateFuncPut",
          "new_api": null,
          "old_text": "streamStateFuncPut(pHandle->pState, &pPos->streamTupleKey, pBuf, length)",
          "new_text": null,
          "old_line_content": "    streamStateFuncPut(pHandle->pState, &pPos->streamTupleKey, pBuf, length);",
          "new_line_content": "  } else {",
          "content_same": false
        },
        {
          "line": 5842,
          "old_api": "ASSERT",
          "new_api": null,
          "old_text": "ASSERT(0)",
          "new_text": null,
          "old_line_content": "      ASSERT(0);",
          "new_line_content": "    default:",
          "content_same": false
        },
        {
          "line": 3798,
          "old_api": "serializeTupleData",
          "new_api": null,
          "old_text": "serializeTupleData(pSrcBlock, rowIndex, &pCtx->subsidiaries, pCtx->subsidiaries.buf)",
          "new_text": null,
          "old_line_content": "  char* buf = serializeTupleData(pSrcBlock, rowIndex, &pCtx->subsidiaries, pCtx->subsidiaries.buf);",
          "new_line_content": "static int32_t updateTupleData(SqlFunctionCtx* pCtx, int32_t rowIndex, const SSDataBlock* pSrcBlock, STuplePos* pPos) {",
          "content_same": false
        },
        {
          "line": 5847,
          "old_api": "twa_get_area",
          "new_api": null,
          "old_text": "twa_get_area(pInfo->p, pCtx->end)",
          "new_text": null,
          "old_line_content": "    pInfo->dOutput += twa_get_area(pInfo->p, pCtx->end);",
          "new_line_content": "  if (pCtx->end.key != INT64_MIN) {",
          "content_same": false
        },
        {
          "line": 3805,
          "old_api": "getBufPage",
          "new_api": null,
          "old_text": "getBufPage(pHandle->pBuf, pPos->pageId)",
          "new_text": null,
          "old_line_content": "    SFilePage* pPage = getBufPage(pHandle->pBuf, pPos->pageId);",
          "new_line_content": "  if (pHandle->pBuf != NULL) {",
          "content_same": false
        },
        {
          "line": 3807,
          "old_api": "releaseBufPage",
          "new_api": null,
          "old_text": "releaseBufPage(pHandle->pBuf, pPage)",
          "new_text": null,
          "old_line_content": "    releaseBufPage(pHandle->pBuf, pPage);",
          "new_line_content": "    char*      p = pPage->data + pPos->offset;",
          "content_same": false
        },
        {
          "line": 5859,
          "old_api": "SET_VAL",
          "new_api": null,
          "old_text": "SET_VAL(pResInfo, 1, 1)",
          "new_text": null,
          "old_line_content": "  SET_VAL(pResInfo, 1, 1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3812,
          "old_api": "streamStateFuncGet",
          "new_api": null,
          "old_text": "streamStateFuncGet(pHandle->pState, &pPos->streamTupleKey, &value, &vLen)",
          "new_text": null,
          "old_line_content": "    streamStateFuncGet(pHandle->pState, &pPos->streamTupleKey, &value, &vLen);",
          "new_line_content": "    int32_t vLen;",
          "content_same": false
        },
        {
          "line": 3818,
          "old_api": "doLoadTupleData",
          "new_api": null,
          "old_text": "doLoadTupleData(&pCtx->saveHandle, pPos)",
          "new_text": null,
          "old_line_content": "  return doLoadTupleData(&pCtx->saveHandle, pPos);",
          "new_line_content": "static const char* loadTupleData(SqlFunctionCtx* pCtx, const STuplePos* pPos) {",
          "content_same": false
        },
        {
          "line": 3822,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pEntryInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "int32_t topBotFinalize(SqlFunctionCtx* pCtx, SSDataBlock* pBlock) {",
          "content_same": false
        },
        {
          "line": 3828,
          "old_api": "taosArrayGet",
          "new_api": null,
          "old_text": "taosArrayGet(pBlock->pDataBlock, slotId)",
          "new_text": null,
          "old_line_content": "  SColumnInfoData* pCol = taosArrayGet(pBlock->pDataBlock, slotId);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5877,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "int32_t twaFinalize(struct SqlFunctionCtx* pCtx, SSDataBlock* pBlock) {",
          "content_same": false
        },
        {
          "line": 5879,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": null,
          "old_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "new_text": null,
          "old_line_content": "  STwaInfo* pInfo = (STwaInfo*)GET_ROWCELL_INTERBUF(pResInfo);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3833,
          "old_api": "colDataAppendNULL",
          "new_api": null,
          "old_text": "colDataAppendNULL(pCol, currentRow)",
          "new_text": null,
          "old_line_content": "    colDataAppendNULL(pCol, currentRow);",
          "new_line_content": "  if (pEntryInfo->numOfRes <= 0) {",
          "content_same": false
        },
        {
          "line": 3841,
          "old_api": "colDataAppend",
          "new_api": null,
          "old_text": "colDataAppend(pCol, currentRow, (const char*)&v, false)",
          "new_text": null,
          "old_line_content": "      colDataAppend(pCol, currentRow, (const char*)&v, false);",
          "new_line_content": "      float v = pItem->v.d;",
          "content_same": false
        },
        {
          "line": 3843,
          "old_api": "colDataAppend",
          "new_api": null,
          "old_text": "colDataAppend(pCol, currentRow, (const char*)&pItem->v.i, false)",
          "new_text": null,
          "old_line_content": "      colDataAppend(pCol, currentRow, (const char*)&pItem->v.i, false);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 5892,
          "old_api": "functionFinalize",
          "new_api": null,
          "old_text": "functionFinalize(pCtx, pBlock)",
          "new_text": null,
          "old_line_content": "  return functionFinalize(pCtx, pBlock);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3846,
          "old_api": "qDebug",
          "new_api": null,
          "old_text": "qDebug(\"page_finalize i:%d,item:%p,pageId:%d, offset:%d\\n\", i, pItem, pItem->tuplePos.pageId,\n           pItem->tuplePos.offset)",
          "new_text": null,
          "old_line_content": "    qDebug(\"page_finalize i:%d,item:%p,pageId:%d, offset:%d\\n\", i, pItem, pItem->tuplePos.pageId,",
          "new_line_content": "#ifdef BUF_PAGE_DEBUG",
          "content_same": false
        },
        {
          "line": 5896,
          "old_api": "functionSetup",
          "new_api": null,
          "old_text": "functionSetup(pCtx, pResultInfo)",
          "new_text": null,
          "old_line_content": "  if (!functionSetup(pCtx, pResultInfo)) {",
          "new_line_content": "bool blockDistSetup(SqlFunctionCtx* pCtx, SResultRowEntryInfo* pResultInfo) {",
          "content_same": false
        },
        {
          "line": 3849,
          "old_api": "setSelectivityValue",
          "new_api": null,
          "old_text": "setSelectivityValue(pCtx, pBlock, &pRes->pItems[i].tuplePos, currentRow)",
          "new_text": null,
          "old_line_content": "    setSelectivityValue(pCtx, pBlock, &pRes->pItems[i].tuplePos, currentRow);",
          "new_line_content": "#endif",
          "content_same": false
        },
        {
          "line": 5900,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  STableBlockDistInfo* pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3857,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pEntryInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "void addResult(SqlFunctionCtx* pCtx, STopBotResItem* pSourceItem, int16_t type, bool isTopQuery) {",
          "content_same": false
        },
        {
          "line": 3860,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(pItems != NULL)",
          "new_text": null,
          "old_line_content": "  assert(pItems != NULL);",
          "new_line_content": "  STopBotResItem*      pItems = pRes->pItems;",
          "content_same": false
        },
        {
          "line": 5911,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5913,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": null,
          "old_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "new_text": null,
          "old_line_content": "  STableBlockDistInfo* pDistInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3868,
          "old_api": "replaceTupleData",
          "new_api": null,
          "old_text": "replaceTupleData(&pItem->tuplePos, &pSourceItem->tuplePos)",
          "new_text": null,
          "old_line_content": "    replaceTupleData(&pItem->tuplePos, &pSourceItem->tuplePos);",
          "new_line_content": "    pItem->tuplePos.pageId = -1;",
          "content_same": false
        },
        {
          "line": 5916,
          "old_api": "varDataLen",
          "new_api": null,
          "old_text": "varDataLen(pInputCol->pData)",
          "new_text": null,
          "old_line_content": "  tDeserializeBlockDistInfo(varDataVal(pInputCol->pData), varDataLen(pInputCol->pData), &p1);",
          "new_line_content": "  STableBlockDistInfo p1 = {0};",
          "content_same": false
        },
        {
          "line": 3870,
          "old_api": "taosheapsort",
          "new_api": null,
          "old_text": "taosheapsort((void*)pItems, sizeof(STopBotResItem), pEntryInfo->numOfRes, (const void*)&type, topBotResComparFn,\n                 !isTopQuery)",
          "new_text": null,
          "old_line_content": "    taosheapsort((void*)pItems, sizeof(STopBotResItem), pEntryInfo->numOfRes, (const void*)&type, topBotResComparFn,",
          "new_line_content": "    pEntryInfo->numOfRes++;",
          "content_same": false
        },
        {
          "line": 3873,
          "old_api": "IS_SIGNED_NUMERIC_TYPE",
          "new_api": null,
          "old_text": "IS_SIGNED_NUMERIC_TYPE(type)",
          "new_text": null,
          "old_line_content": "    if ((isTopQuery && ((IS_SIGNED_NUMERIC_TYPE(type) && pSourceItem->v.i > pItems[0].v.i) ||",
          "new_line_content": "  } else {  // replace the minimum value in the result",
          "content_same": false
        },
        {
          "line": 3885,
          "old_api": "replaceTupleData",
          "new_api": null,
          "old_text": "replaceTupleData(&pItem->tuplePos, &pSourceItem->tuplePos)",
          "new_text": null,
          "old_line_content": "      replaceTupleData(&pItem->tuplePos, &pSourceItem->tuplePos);",
          "new_line_content": "      // save the data of this tuple by over writing the old data",
          "content_same": false
        },
        {
          "line": 5937,
          "old_api": "tListLen",
          "new_api": null,
          "old_text": "tListLen(pDistInfo->blockRowsHisto)",
          "new_text": null,
          "old_line_content": "  for (int32_t i = 0; i < tListLen(pDistInfo->blockRowsHisto); ++i) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3893,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pSourceCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pSResInfo = GET_RES_INFO(pSourceCtx);",
          "new_line_content": "int32_t topCombine(SqlFunctionCtx* pDestCtx, SqlFunctionCtx* pSourceCtx) {",
          "content_same": false
        },
        {
          "line": 3897,
          "old_api": "addResult",
          "new_api": null,
          "old_text": "addResult(pDestCtx, pSBuf->pItems + i, type, true)",
          "new_text": null,
          "old_line_content": "    addResult(pDestCtx, pSBuf->pItems + i, type, true);",
          "new_line_content": "  for (int32_t i = 0; i < pSResInfo->numOfRes; i++) {",
          "content_same": false
        },
        {
          "line": 5947,
          "old_api": "tEncoderInit",
          "new_api": null,
          "old_text": "tEncoderInit(&encoder, buf, bufLen)",
          "new_text": null,
          "old_line_content": "  tEncoderInit(&encoder, buf, bufLen);",
          "new_line_content": "  SEncoder encoder = {0};",
          "content_same": false
        },
        {
          "line": 5949,
          "old_api": "tStartEncode",
          "new_api": null,
          "old_text": "tStartEncode(&encoder)",
          "new_text": null,
          "old_line_content": "  if (tStartEncode(&encoder) < 0) return -1;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3903,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pSourceCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pSResInfo = GET_RES_INFO(pSourceCtx);",
          "new_line_content": "int32_t bottomCombine(SqlFunctionCtx* pDestCtx, SqlFunctionCtx* pSourceCtx) {",
          "content_same": false
        },
        {
          "line": 5952,
          "old_api": "tEncodeU16",
          "new_api": null,
          "old_text": "tEncodeU16(&encoder, pInfo->numOfFiles)",
          "new_text": null,
          "old_line_content": "  if (tEncodeU16(&encoder, pInfo->numOfFiles) < 0) return -1;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3907,
          "old_api": "addResult",
          "new_api": null,
          "old_text": "addResult(pDestCtx, pSBuf->pItems + i, type, false)",
          "new_text": null,
          "old_line_content": "    addResult(pDestCtx, pSBuf->pItems + i, type, false);",
          "new_line_content": "  for (int32_t i = 0; i < pSResInfo->numOfRes; i++) {",
          "content_same": false
        },
        {
          "line": 5956,
          "old_api": "tEncodeU64",
          "new_api": null,
          "old_text": "tEncodeU64(&encoder, pInfo->totalSize)",
          "new_text": null,
          "old_line_content": "  if (tEncodeU64(&encoder, pInfo->totalSize) < 0) return -1;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5965,
          "old_api": "tListLen",
          "new_api": null,
          "old_text": "tListLen(pInfo->blockRowsHisto)",
          "new_text": null,
          "old_line_content": "  for (int32_t i = 0; i < tListLen(pInfo->blockRowsHisto); ++i) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3920,
          "old_api": "functionSetup",
          "new_api": null,
          "old_text": "functionSetup(pCtx, pResultInfo)",
          "new_text": null,
          "old_line_content": "  if (!functionSetup(pCtx, pResultInfo)) {",
          "new_line_content": "bool spreadFunctionSetup(SqlFunctionCtx* pCtx, SResultRowEntryInfo* pResultInfo) {",
          "content_same": false
        },
        {
          "line": 5969,
          "old_api": "tEndEncode",
          "new_api": null,
          "old_text": "tEndEncode(&encoder)",
          "new_text": null,
          "old_line_content": "  tEndEncode(&encoder);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3924,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": null,
          "old_text": "GET_ROWCELL_INTERBUF(pResultInfo)",
          "new_text": null,
          "old_line_content": "  SSpreadInfo* pInfo = GET_ROWCELL_INTERBUF(pResultInfo);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5972,
          "old_api": "tEncoderClear",
          "new_api": null,
          "old_text": "tEncoderClear(&encoder)",
          "new_text": null,
          "old_line_content": "  tEncoderClear(&encoder);",
          "new_line_content": "  int32_t tlen = encoder.pos;",
          "content_same": false
        },
        {
          "line": 5978,
          "old_api": "tDecoderInit",
          "new_api": null,
          "old_text": "tDecoderInit(&decoder, buf, bufLen)",
          "new_text": null,
          "old_line_content": "  tDecoderInit(&decoder, buf, bufLen);",
          "new_line_content": "  SDecoder decoder = {0};",
          "content_same": false
        },
        {
          "line": 5980,
          "old_api": "tStartDecode",
          "new_api": null,
          "old_text": "tStartDecode(&decoder)",
          "new_text": null,
          "old_line_content": "  if (tStartDecode(&decoder) < 0) return -1;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5983,
          "old_api": "tDecodeU16",
          "new_api": null,
          "old_text": "tDecodeU16(&decoder, &pInfo->numOfFiles)",
          "new_text": null,
          "old_line_content": "  if (tDecodeU16(&decoder, &pInfo->numOfFiles) < 0) return -1;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3939,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SSpreadInfo* pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5987,
          "old_api": "tDecodeU64",
          "new_api": null,
          "old_text": "tDecodeU64(&decoder, &pInfo->totalSize)",
          "new_text": null,
          "old_line_content": "  if (tDecodeU64(&decoder, &pInfo->totalSize) < 0) return -1;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3947,
          "old_api": "IS_SIGNED_NUMERIC_TYPE",
          "new_api": null,
          "old_text": "IS_SIGNED_NUMERIC_TYPE(type)",
          "new_text": null,
          "old_line_content": "    if (IS_SIGNED_NUMERIC_TYPE(type)) {",
          "new_line_content": "    double tmin = 0.0, tmax = 0.0;",
          "content_same": false
        },
        {
          "line": 5996,
          "old_api": "tListLen",
          "new_api": null,
          "old_text": "tListLen(pInfo->blockRowsHisto)",
          "new_text": null,
          "old_line_content": "  for (int32_t i = 0; i < tListLen(pInfo->blockRowsHisto); ++i) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6000,
          "old_api": "tDecoderClear",
          "new_api": null,
          "old_text": "tDecoderClear(&decoder)",
          "new_text": null,
          "old_line_content": "  tDecoderClear(&decoder);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6005,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "int32_t blockDistFinalize(SqlFunctionCtx* pCtx, SSDataBlock* pBlock) {",
          "content_same": false
        },
        {
          "line": 3958,
          "old_api": "GET_DOUBLE_VAL",
          "new_api": null,
          "old_text": "GET_DOUBLE_VAL(&pInfo->min)",
          "new_text": null,
          "old_line_content": "    if (GET_DOUBLE_VAL(&pInfo->min) > tmin) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6008,
          "old_api": "taosArrayGet",
          "new_api": null,
          "old_text": "taosArrayGet(pBlock->pDataBlock, 0)",
          "new_text": null,
          "old_line_content": "  SColumnInfoData* pColInfo = taosArrayGet(pBlock->pDataBlock, 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3962,
          "old_api": "GET_DOUBLE_VAL",
          "new_api": null,
          "old_text": "GET_DOUBLE_VAL(&pInfo->max)",
          "new_text": null,
          "old_line_content": "    if (GET_DOUBLE_VAL(&pInfo->max) < tmax) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6017,
          "old_api": "sprintf",
          "new_api": null,
          "old_text": "sprintf(st + VARSTR_HEADER_SIZE,\n                        \"Total_Blocks=[%d] Total_Size=[%.2f Kb] Average_size=[%.2f Kb] Compression_Ratio=[%.2f %c]\",\n                        pData->numOfBlocks, pData->totalSize / 1024.0, ((double)pData->totalSize) / pData->numOfBlocks,\n                        pData->totalSize * 100 / totalRawSize, '%')",
          "new_text": null,
          "old_line_content": "  int32_t len = sprintf(st + VARSTR_HEADER_SIZE,",
          "new_line_content": "  double  totalRawSize = pData->totalRows * pData->rowSize;",
          "content_same": false
        },
        {
          "line": 3972,
          "old_api": "colDataIsNull_f",
          "new_api": null,
          "old_text": "colDataIsNull_f(pCol->nullbitmap, i)",
          "new_text": null,
          "old_line_content": "      if (colDataIsNull_f(pCol->nullbitmap, i)) {",
          "new_line_content": "    for (int32_t i = start; i < pInput->numOfRows + start; ++i) {",
          "content_same": false
        },
        {
          "line": 6022,
          "old_api": "varDataSetLen",
          "new_api": null,
          "old_text": "varDataSetLen(st, len)",
          "new_text": null,
          "old_line_content": "  varDataSetLen(st, len);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3976,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pCol, i)",
          "new_text": null,
          "old_line_content": "      char* data = colDataGetData(pCol, i);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3980,
          "old_api": "GET_DOUBLE_VAL",
          "new_api": null,
          "old_text": "GET_DOUBLE_VAL(&pInfo->min)",
          "new_text": null,
          "old_line_content": "      if (v < GET_DOUBLE_VAL(&pInfo->min)) {",
          "new_line_content": "      GET_TYPED_DATA(v, double, type, data);",
          "content_same": false
        },
        {
          "line": 6030,
          "old_api": "sprintf",
          "new_api": null,
          "old_text": "sprintf(st + VARSTR_HEADER_SIZE,\n                \"Total_Rows=[%\" PRId64 \"] Inmem_Rows=[%d] MinRows=[%d] MaxRows=[%d] Average_Rows=[%\" PRId64 \"]\",\n                pData->totalRows, pData->numOfInmemRows, pData->minRows, pData->maxRows, avgRows)",
          "new_text": null,
          "old_line_content": "  len = sprintf(st + VARSTR_HEADER_SIZE,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3984,
          "old_api": "GET_DOUBLE_VAL",
          "new_api": null,
          "old_text": "GET_DOUBLE_VAL(&pInfo->max)",
          "new_text": null,
          "old_line_content": "      if (v > GET_DOUBLE_VAL(&pInfo->max)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6034,
          "old_api": "varDataSetLen",
          "new_api": null,
          "old_text": "varDataSetLen(st, len)",
          "new_text": null,
          "old_line_content": "  varDataSetLen(st, len);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6037,
          "old_api": "sprintf",
          "new_api": null,
          "old_text": "sprintf(st + VARSTR_HEADER_SIZE, \"Total_Tables=[%d] Total_Files=[%d] Total_Vgroups=[%d]\", pData->numOfTables,\n                pData->numOfFiles, 0)",
          "new_text": null,
          "old_line_content": "  len = sprintf(st + VARSTR_HEADER_SIZE, \"Total_Tables=[%d] Total_Files=[%d] Total_Vgroups=[%d]\", pData->numOfTables,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6040,
          "old_api": "varDataSetLen",
          "new_api": null,
          "old_text": "varDataSetLen(st, len)",
          "new_text": null,
          "old_line_content": "  varDataSetLen(st, len);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3994,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SET_VAL(GET_RES_INFO(pCtx), numOfElems, 1);",
          "new_line_content": "  // data in the check operation are all null, not output",
          "content_same": false
        },
        {
          "line": 6043,
          "old_api": "sprintf",
          "new_api": null,
          "old_text": "sprintf(st + VARSTR_HEADER_SIZE,\n                \"--------------------------------------------------------------------------------\")",
          "new_text": null,
          "old_line_content": "  len = sprintf(st + VARSTR_HEADER_SIZE,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6045,
          "old_api": "varDataSetLen",
          "new_api": null,
          "old_text": "varDataSetLen(st, len)",
          "new_text": null,
          "old_line_content": "  varDataSetLen(st, len);",
          "new_line_content": "                \"--------------------------------------------------------------------------------\");",
          "content_same": false
        },
        {
          "line": 6050,
          "old_api": "tListLen",
          "new_api": null,
          "old_text": "tListLen(pData->blockRowsHisto)",
          "new_text": null,
          "old_line_content": "  for (int32_t i = 0; i < tListLen(pData->blockRowsHisto); ++i) {",
          "new_line_content": "  int32_t minVal = INT32_MAX;",
          "content_same": false
        },
        {
          "line": 4016,
          "old_api": "ASSERT",
          "new_api": null,
          "old_text": "ASSERT(pCol->info.type == TSDB_DATA_TYPE_BINARY)",
          "new_text": null,
          "old_line_content": "  ASSERT(pCol->info.type == TSDB_DATA_TYPE_BINARY);",
          "new_line_content": "  SColumnInfoData*      pCol = pInput->pData[0];",
          "content_same": false
        },
        {
          "line": 4018,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SSpreadInfo* pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6066,
          "old_api": "tListLen",
          "new_api": null,
          "old_text": "tListLen(pData->blockRowsHisto)",
          "new_text": null,
          "old_line_content": "  for (int32_t i = 0; i < tListLen(pData->blockRowsHisto); ++i) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4022,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pCol, i)",
          "new_text": null,
          "old_line_content": "    char*        data = colDataGetData(pCol, i);",
          "new_line_content": "  for (int32_t i = start; i < start + pInput->numOfRows; ++i) {",
          "content_same": false
        },
        {
          "line": 4025,
          "old_api": "spreadTransferInfo",
          "new_api": null,
          "old_text": "spreadTransferInfo(pInputInfo, pInfo)",
          "new_text": null,
          "old_line_content": "      spreadTransferInfo(pInputInfo, pInfo);",
          "new_line_content": "    if (pInputInfo->hasResult) {",
          "content_same": false
        },
        {
          "line": 6075,
          "old_api": "sprintf",
          "new_api": null,
          "old_text": "sprintf(st + VARSTR_HEADER_SIZE + len, \"%c\", '|')",
          "new_text": null,
          "old_line_content": "      int32_t x = sprintf(st + VARSTR_HEADER_SIZE + len, \"%c\", '|');",
          "new_line_content": "    for (int32_t j = 0; j < num; ++j) {",
          "content_same": false
        },
        {
          "line": 4030,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "    GET_RES_INFO(pCtx)->numOfRes = 1;",
          "new_line_content": "  if (pInfo->hasResult) {",
          "content_same": false
        },
        {
          "line": 6081,
          "old_api": "sprintf",
          "new_api": null,
          "old_text": "sprintf(st + VARSTR_HEADER_SIZE + len, \"  %d (%.2f%c)\", pData->blockRowsHisto[i], v, '%')",
          "new_text": null,
          "old_line_content": "      len += sprintf(st + VARSTR_HEADER_SIZE + len, \"  %d (%.2f%c)\", pData->blockRowsHisto[i], v, '%');",
          "new_line_content": "      double v = pData->blockRowsHisto[i] * 100.0 / pData->numOfBlocks;",
          "content_same": false
        },
        {
          "line": 6084,
          "old_api": "varDataSetLen",
          "new_api": null,
          "old_text": "varDataSetLen(st, len)",
          "new_text": null,
          "old_line_content": "    varDataSetLen(st, len);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4037,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SSpreadInfo* pInfo = GET_ROWCELL_INTERBUF(GET_RES_INFO(pCtx));",
          "new_line_content": "int32_t spreadFinalize(SqlFunctionCtx* pCtx, SSDataBlock* pBlock) {",
          "content_same": false
        },
        {
          "line": 4039,
          "old_api": "SET_DOUBLE_VAL",
          "new_api": null,
          "old_text": "SET_DOUBLE_VAL(&pInfo->result, pInfo->max - pInfo->min)",
          "new_text": null,
          "old_line_content": "    SET_DOUBLE_VAL(&pInfo->result, pInfo->max - pInfo->min);",
          "new_line_content": "  if (pInfo->hasResult == true) {",
          "content_same": false
        },
        {
          "line": 4041,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "    GET_RES_INFO(pCtx)->isNullRes = 1;",
          "new_line_content": "  } else {",
          "content_same": false
        },
        {
          "line": 4043,
          "old_api": "functionFinalize",
          "new_api": null,
          "old_text": "functionFinalize(pCtx, pBlock)",
          "new_text": null,
          "old_line_content": "  return functionFinalize(pCtx, pBlock);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 4047,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "int32_t spreadPartialFinalize(SqlFunctionCtx* pCtx, SSDataBlock* pBlock) {",
          "content_same": false
        },
        {
          "line": 6097,
          "old_api": "functionSetup",
          "new_api": null,
          "old_text": "functionSetup(pCtx, pResInfo)",
          "new_text": null,
          "old_line_content": "  if (!functionSetup(pCtx, pResInfo)) {",
          "new_line_content": "bool derivativeFuncSetup(SqlFunctionCtx* pCtx, SResultRowEntryInfo* pResInfo) {",
          "content_same": false
        },
        {
          "line": 4052,
          "old_api": "varDataVal",
          "new_api": null,
          "old_text": "varDataVal(res)",
          "new_text": null,
          "old_line_content": "  memcpy(varDataVal(res), pInfo, resultBytes);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6101,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": null,
          "old_text": "GET_ROWCELL_INTERBUF(pResInfo)",
          "new_text": null,
          "old_line_content": "  SDerivInfo* pDerivInfo = GET_ROWCELL_INTERBUF(pResInfo);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4056,
          "old_api": "taosArrayGet",
          "new_api": null,
          "old_text": "taosArrayGet(pBlock->pDataBlock, slotId)",
          "new_text": null,
          "old_line_content": "  SColumnInfoData* pCol = taosArrayGet(pBlock->pDataBlock, slotId);",
          "new_line_content": "  int32_t          slotId = pCtx->pExpr->base.resSchema.slotId;",
          "content_same": false
        },
        {
          "line": 4058,
          "old_api": "colDataAppend",
          "new_api": null,
          "old_text": "colDataAppend(pCol, pBlock->info.rows, res, false)",
          "new_text": null,
          "old_line_content": "  colDataAppend(pCol, pBlock->info.rows, res, false);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4060,
          "old_api": "taosMemoryFree",
          "new_api": null,
          "old_text": "taosMemoryFree(res)",
          "new_text": null,
          "old_line_content": "  taosMemoryFree(res);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6111,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pResInfo = GET_RES_INFO(pCtx);",
          "new_line_content": "int32_t derivativeFunction(SqlFunctionCtx* pCtx) {",
          "content_same": false
        },
        {
          "line": 4065,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pDestCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pDResInfo = GET_RES_INFO(pDestCtx);",
          "new_line_content": "int32_t spreadCombine(SqlFunctionCtx* pDestCtx, SqlFunctionCtx* pSourceCtx) {",
          "content_same": false
        },
        {
          "line": 4068,
          "old_api": "GET_RES_INFO",
          "new_api": null,
          "old_text": "GET_RES_INFO(pSourceCtx)",
          "new_text": null,
          "old_line_content": "  SResultRowEntryInfo* pSResInfo = GET_RES_INFO(pSourceCtx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6128,
          "old_api": "colDataIsNull_f",
          "new_api": null,
          "old_text": "colDataIsNull_f(pInputCol->nullbitmap, i)",
          "new_text": null,
          "old_line_content": "      if (colDataIsNull_f(pInputCol->nullbitmap, i)) {",
          "new_line_content": "    for (; i < pInput->numOfRows + pInput->startRowIndex; i += 1) {",
          "content_same": false
        },
        {
          "line": 4084,
          "old_api": "functionSetup",
          "new_api": null,
          "old_text": "functionSetup(pCtx, pResultInfo)",
          "new_text": null,
          "old_line_content": "  if (!functionSetup(pCtx, pResultInfo)) {",
          "new_line_content": "bool elapsedFunctionSetup(SqlFunctionCtx* pCtx, SResultRowEntryInfo* pResultInfo) {",
          "content_same": false
        },
        {
          "line": 4088,
          "old_api": "GET_ROWCELL_INTERBUF",
          "new_api": null,
          "old_text": "GET_ROWCELL_INTERBUF(pResultInfo)",
          "new_text": null,
          "old_line_content": "  SElapsedInfo* pInfo = GET_ROWCELL_INTERBUF(pResultInfo);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 6142,
          "old_api": "isnan",
          "new_api": null,
          "old_text": "isnan(r)",
          "new_text": null,
          "old_line_content": "          if (isinf(r) || isnan(r)) {",
          "new_line_content": "        } else {",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 165,
      "total_additions": 517,
      "total_deletions": 518,
      "total_api_changes": 1200
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 3,
        "api_related_lines": 1200,
        "non_api_lines": 2,
        "non_api_line_numbers": [
          3010,
          3019
        ]
      }
    },
    "api_calls_before": 1312,
    "api_calls_after": 1311,
    "diff_info": {
      "added_lines": 2,
      "removed_lines": 1,
      "total_diff_lines": 22
    }
  }
}
{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/TDengine/modified_file/e1140d4c1566973cbb5b32d28c0a2226b9de0fff",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/TDengine/modified_file/e1140d4c1566973cbb5b32d28c0a2226b9de0fff/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/TDengine/modified_file/e1140d4c1566973cbb5b32d28c0a2226b9de0fff/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/TDengine/modified_file/e1140d4c1566973cbb5b32d28c0a2226b9de0fff/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 226,
          "old_api": "colDataAppend",
          "new_api": "colDataSetVal",
          "old_text": "colDataAppend(pDst, pResBlock->info.rows, (char*)&isFilled, false)",
          "new_text": "colDataSetVal(pDst, rows, (char*)&pSliceInfo->current, false)",
          "old_line_content": "      colDataAppend(pDst, pResBlock->info.rows, (char*)&isFilled, false);",
          "new_line_content": "      colDataSetVal(pDst, rows, (char*)&pSliceInfo->current, false);",
          "content_same": false
        },
        {
          "line": 228,
          "old_api": "isInterpFunc",
          "new_api": "isIsfilledPseudoColumn",
          "old_text": "isInterpFunc(pExprInfo)",
          "new_text": "isIsfilledPseudoColumn(pExprInfo)",
          "old_line_content": "    } else if (!isInterpFunc(pExprInfo)) {",
          "new_line_content": "    } else if (isIsfilledPseudoColumn(pExprInfo)) {",
          "content_same": false
        },
        {
          "line": 232,
          "old_api": "taosArrayGet",
          "new_api": "isInterpFunc",
          "old_text": "taosArrayGet(pSrcBlock->pDataBlock, srcSlot)",
          "new_text": "isInterpFunc(pExprInfo)",
          "old_line_content": "          SColumnInfoData* pSrc = taosArrayGet(pSrcBlock->pDataBlock, srcSlot);",
          "new_line_content": "    } else if (!isInterpFunc(pExprInfo)) {",
          "content_same": false
        },
        {
          "line": 239,
          "old_api": "colDataGetData",
          "new_api": "colDataSetNULL",
          "old_text": "colDataGetData(pSrc, index)",
          "new_text": "colDataSetNULL(pDst, pResBlock->info.rows)",
          "old_line_content": "          char* v = colDataGetData(pSrc, index);",
          "new_line_content": "            colDataSetNULL(pDst, pResBlock->info.rows);",
          "content_same": false
        },
        {
          "line": 278,
          "old_api": "IS_BOOLEAN_TYPE",
          "new_api": "IS_SIGNED_NUMERIC_TYPE",
          "old_text": "IS_BOOLEAN_TYPE(pDst->info.type)",
          "new_text": "IS_SIGNED_NUMERIC_TYPE(pDst->info.type)",
          "old_line_content": "        } else if (IS_BOOLEAN_TYPE(pDst->info.type)) {",
          "new_line_content": "        } else if (IS_SIGNED_NUMERIC_TYPE(pDst->info.type)) {",
          "content_same": false
        },
        {
          "line": 312,
          "old_api": "taosMemoryCalloc",
          "new_api": "colDataSetNULL",
          "old_text": "taosMemoryCalloc(pLinearInfo->bytes, 1)",
          "new_text": "colDataSetNULL(pDst, rows)",
          "old_line_content": "        current.val = taosMemoryCalloc(pLinearInfo->bytes, 1);",
          "new_line_content": "          colDataSetNULL(pDst, rows);",
          "content_same": false
        },
        {
          "line": 316,
          "old_api": "taosMemoryFree",
          "new_api": "taosMemoryCalloc",
          "old_text": "taosMemoryFree(current.val)",
          "new_text": "taosMemoryCalloc(pLinearInfo->bytes, 1)",
          "old_line_content": "        taosMemoryFree(current.val);",
          "new_line_content": "        current.val = taosMemoryCalloc(pLinearInfo->bytes, 1);",
          "content_same": false
        },
        {
          "line": 329,
          "old_api": "colDataSetNULL",
          "new_api": "taosArrayGet",
          "old_text": "colDataSetNULL(pDst, rows)",
          "new_text": "taosArrayGet(pSliceInfo->pPrevRow, srcSlot)",
          "old_line_content": "          colDataSetNULL(pDst, rows);",
          "new_line_content": "        SGroupKeys* pkey = taosArrayGet(pSliceInfo->pPrevRow, srcSlot);",
          "content_same": false
        },
        {
          "line": 344,
          "old_api": "colDataSetNULL",
          "new_api": "taosArrayGet",
          "old_text": "colDataSetNULL(pDst, rows)",
          "new_text": "taosArrayGet(pSliceInfo->pNextRow, srcSlot)",
          "old_line_content": "          colDataSetNULL(pDst, rows);",
          "new_line_content": "        SGroupKeys* pkey = taosArrayGet(pSliceInfo->pNextRow, srcSlot);",
          "content_same": false
        },
        {
          "line": 373,
          "old_api": "isIsfilledPseudoColumn",
          "new_api": "taosArrayGet",
          "old_text": "isIsfilledPseudoColumn(pExprInfo)",
          "new_text": "taosArrayGet(pResBlock->pDataBlock, dstSlot)",
          "old_line_content": "    } else if (isIsfilledPseudoColumn(pExprInfo)) {",
          "new_line_content": "    SColumnInfoData* pDst = taosArrayGet(pResBlock->pDataBlock, dstSlot);",
          "content_same": false
        },
        {
          "line": 375,
          "old_api": "colDataSetVal",
          "new_api": "isIrowtsPseudoColumn",
          "old_text": "colDataSetVal(pDst, pResBlock->info.rows, (char*)&isFilled, false)",
          "new_text": "isIrowtsPseudoColumn(pExprInfo)",
          "old_line_content": "      colDataSetVal(pDst, pResBlock->info.rows, (char*)&isFilled, false);",
          "new_line_content": "    if (isIrowtsPseudoColumn(pExprInfo)) {",
          "content_same": false
        },
        {
          "line": 385,
          "old_api": "colDataGetData",
          "new_api": "colDataSetNULL",
          "old_text": "colDataGetData(pSrc, index)",
          "new_text": "colDataSetNULL(pDst, pResBlock->info.rows)",
          "old_line_content": "      char* v = colDataGetData(pSrc, index);",
          "new_line_content": "        colDataSetNULL(pDst, pResBlock->info.rows);",
          "content_same": false
        },
        {
          "line": 494,
          "old_api": "taosMemoryCalloc",
          "new_api": "isGroupKeyFunc",
          "old_text": "taosMemoryCalloc(1, pInfo->pPrevGroupKey->bytes)",
          "new_text": "isGroupKeyFunc(pExprInfo)",
          "old_line_content": "      pInfo->pPrevGroupKey->pData = taosMemoryCalloc(1, pInfo->pPrevGroupKey->bytes);",
          "new_line_content": "    if (isGroupKeyFunc(pExprInfo)) {",
          "content_same": false
        },
        {
          "line": 592,
          "old_api": "T_LONG_JMP",
          "new_api": "colDataGetData",
          "old_text": "T_LONG_JMP(pTaskInfo->env, TSDB_CODE_FUNC_DUP_TIMESTAMP)",
          "new_text": "colDataGetData(pTsCol, i)",
          "old_line_content": "      T_LONG_JMP(pTaskInfo->env, TSDB_CODE_FUNC_DUP_TIMESTAMP);",
          "new_line_content": "    int64_t ts = *(int64_t*)colDataGetData(pTsCol, i);",
          "content_same": false
        },
        {
          "line": 606,
          "old_api": "taosTimeAdd",
          "new_api": "doKeepPrevRows",
          "old_text": "taosTimeAdd(pSliceInfo->current, pInterval->interval, pInterval->intervalUnit, pInterval->precision)",
          "new_text": "doKeepPrevRows(pSliceInfo, pBlock, i)",
          "old_line_content": "          taosTimeAdd(pSliceInfo->current, pInterval->interval, pInterval->intervalUnit, pInterval->precision);",
          "new_line_content": "      doKeepPrevRows(pSliceInfo, pBlock, i);",
          "content_same": false
        },
        {
          "line": 617,
          "old_api": "doKeepNextRows",
          "new_api": "doKeepLinearInfo",
          "old_text": "doKeepNextRows(pSliceInfo, pBlock, i + 1)",
          "new_text": "doKeepLinearInfo(pSliceInfo, pBlock, i)",
          "old_line_content": "        doKeepNextRows(pSliceInfo, pBlock, i + 1);",
          "new_line_content": "      doKeepLinearInfo(pSliceInfo, pBlock, i);",
          "content_same": false
        },
        {
          "line": 621,
          "old_api": "genInterpolationResult",
          "new_api": "doKeepNextRows",
          "old_text": "genInterpolationResult(pSliceInfo, &pOperator->exprSupp, pResBlock, pBlock, i, false)",
          "new_text": "doKeepNextRows(pSliceInfo, pBlock, i + 1)",
          "old_line_content": "            if (!genInterpolationResult(pSliceInfo, &pOperator->exprSupp, pResBlock, pBlock, i, false) &&",
          "new_line_content": "        doKeepNextRows(pSliceInfo, pBlock, i + 1);",
          "content_same": false
        },
        {
          "line": 625,
          "old_api": "taosTimeAdd",
          "new_api": "genInterpolationResult",
          "old_text": "taosTimeAdd(pSliceInfo->current, pInterval->interval, pInterval->intervalUnit,\n                                                pInterval->precision)",
          "new_text": "genInterpolationResult(pSliceInfo, &pOperator->exprSupp, pResBlock, pBlock, i, false)",
          "old_line_content": "              pSliceInfo->current = taosTimeAdd(pSliceInfo->current, pInterval->interval, pInterval->intervalUnit,",
          "new_line_content": "            if (!genInterpolationResult(pSliceInfo, &pOperator->exprSupp, pResBlock, pBlock, i, false) &&",
          "content_same": false
        },
        {
          "line": 641,
          "old_api": "doKeepNextRows",
          "new_api": "doKeepPrevRows",
          "old_text": "doKeepNextRows(pSliceInfo, pBlock, i)",
          "new_text": "doKeepPrevRows(pSliceInfo, pBlock, i)",
          "old_line_content": "      doKeepNextRows(pSliceInfo, pBlock, i);",
          "new_line_content": "        doKeepPrevRows(pSliceInfo, pBlock, i);",
          "content_same": false
        },
        {
          "line": 645,
          "old_api": "genInterpolationResult",
          "new_api": "doKeepNextRows",
          "old_text": "genInterpolationResult(pSliceInfo, &pOperator->exprSupp, pResBlock, pBlock, i, true)",
          "new_text": "doKeepNextRows(pSliceInfo, pBlock, i)",
          "old_line_content": "        if (!genInterpolationResult(pSliceInfo, &pOperator->exprSupp, pResBlock, pBlock, i, true) &&",
          "new_line_content": "      doKeepNextRows(pSliceInfo, pBlock, i);",
          "content_same": false
        },
        {
          "line": 690,
          "old_api": "colDataIsNull_s",
          "new_api": "isGroupKeyFunc",
          "old_text": "colDataIsNull_s(pSrc, 0)",
          "new_text": "isGroupKeyFunc(pExprInfo)",
          "old_line_content": "      if (colDataIsNull_s(pSrc, 0)) {",
          "new_line_content": "    if (isGroupKeyFunc(pExprInfo)) {",
          "content_same": false
        },
        {
          "line": 699,
          "old_api": "memcpy",
          "new_api": "colDataGetData",
          "old_text": "memcpy(pGroupKey->pData, v, pGroupKey->bytes)",
          "new_text": "colDataGetData(pSrc, 0)",
          "old_line_content": "        memcpy(pGroupKey->pData, v, pGroupKey->bytes);",
          "new_line_content": "      char* v = colDataGetData(pSrc, 0);",
          "content_same": false
        },
        {
          "line": 733,
          "old_api": "setInputDataBlock",
          "new_api": "blockDataCleanup",
          "old_text": "setInputDataBlock(pSup, pSliceInfo->pNextGroupRes, order, MAIN_SCAN, true)",
          "new_text": "blockDataCleanup(pResBlock)",
          "old_line_content": "      setInputDataBlock(pSup, pSliceInfo->pNextGroupRes, order, MAIN_SCAN, true);",
          "new_line_content": "  blockDataCleanup(pResBlock);",
          "content_same": false
        },
        {
          "line": 767,
          "old_api": "setInputDataBlock",
          "new_api": "T_LONG_JMP",
          "old_text": "setInputDataBlock(pSup, pBlock, order, MAIN_SCAN, true)",
          "new_text": "T_LONG_JMP(pTaskInfo->env, code)",
          "old_line_content": "      setInputDataBlock(pSup, pBlock, order, MAIN_SCAN, true);",
          "new_line_content": "        T_LONG_JMP(pTaskInfo->env, code);",
          "content_same": false
        },
        {
          "line": 786,
          "old_api": "setTaskStatus",
          "new_api": "resetTimesliceInfo",
          "old_text": "setTaskStatus(pOperator->pTaskInfo, TASK_COMPLETED)",
          "new_text": "resetTimesliceInfo(pSliceInfo)",
          "old_line_content": "  setTaskStatus(pOperator->pTaskInfo, TASK_COMPLETED);",
          "new_line_content": "    resetTimesliceInfo(pSliceInfo);",
          "content_same": false
        },
        {
          "line": 829,
          "old_api": "createFillColInfo",
          "new_api": "extractColumnFromColumnNode",
          "old_text": "createFillColInfo(pExprInfo, numOfExprs, NULL, 0, (SNodeListNode*)pInterpPhyNode->pFillValues)",
          "new_text": "extractColumnFromColumnNode((SColumnNode*)pInterpPhyNode->pTimeSeries)",
          "old_line_content": "  pInfo->pFillColInfo = createFillColInfo(pExprInfo, numOfExprs, NULL, 0, (SNodeListNode*)pInterpPhyNode->pFillValues);",
          "new_line_content": "  pInfo->tsCol = extractColumnFromColumnNode((SColumnNode*)pInterpPhyNode->pTimeSeries);",
          "content_same": false
        },
        {
          "line": 831,
          "old_api": "createDataBlockFromDescNode",
          "new_api": "initResultSizeInfo",
          "old_text": "createDataBlockFromDescNode(pPhyNode->pOutputDataBlockDesc)",
          "new_text": "initResultSizeInfo(&pOperator->resultInfo, 4096)",
          "old_line_content": "  pInfo->pRes = createDataBlockFromDescNode(pPhyNode->pOutputDataBlockDesc);",
          "new_line_content": "  initResultSizeInfo(&pOperator->resultInfo, 4096);",
          "content_same": false
        },
        {
          "line": 854,
          "old_api": "appendDownstream",
          "new_api": "createOperatorFpSet",
          "old_text": "appendDownstream(pOperator, &downstream, 1)",
          "new_text": "createOperatorFpSet(optrDummyOpenFn, doTimeslice, NULL, destroyTimeSliceOperatorInfo, optrDefaultBufFn, NULL)",
          "old_line_content": "  code = appendDownstream(pOperator, &downstream, 1);",
          "new_line_content": "      createOperatorFpSet(optrDummyOpenFn, doTimeslice, NULL, destroyTimeSliceOperatorInfo, optrDefaultBufFn, NULL);",
          "content_same": false
        },
        {
          "line": 858,
          "old_api": "taosMemoryFree",
          "new_api": "appendDownstream",
          "old_text": "taosMemoryFree(pInfo)",
          "new_text": "appendDownstream(pOperator, &downstream, 1)",
          "old_line_content": "  taosMemoryFree(pInfo);",
          "new_line_content": "  code = appendDownstream(pOperator, &downstream, 1);",
          "content_same": false
        },
        {
          "line": 871,
          "old_api": "taosMemoryFree",
          "new_api": "blockDataDestroy",
          "old_text": "taosMemoryFree(pKey->pData)",
          "new_text": "blockDataDestroy(pInfo->pRes)",
          "old_line_content": "    taosMemoryFree(pKey->pData);",
          "new_line_content": "  pInfo->pRes = blockDataDestroy(pInfo->pRes);",
          "content_same": false
        },
        {
          "line": 873,
          "old_api": "taosArrayDestroy",
          "new_api": "taosArrayGetSize",
          "old_text": "taosArrayDestroy(pInfo->pPrevRow)",
          "new_text": "taosArrayGetSize(pInfo->pPrevRow)",
          "old_line_content": "  taosArrayDestroy(pInfo->pPrevRow);",
          "new_line_content": "  for (int32_t i = 0; i < taosArrayGetSize(pInfo->pPrevRow); ++i) {",
          "content_same": false
        },
        {
          "line": 875,
          "old_api": "taosArrayGetSize",
          "new_api": "taosMemoryFree",
          "old_text": "taosArrayGetSize(pInfo->pNextRow)",
          "new_text": "taosMemoryFree(pKey->pData)",
          "old_line_content": "  for (int32_t i = 0; i < taosArrayGetSize(pInfo->pNextRow); ++i) {",
          "new_line_content": "    taosMemoryFree(pKey->pData);",
          "content_same": false
        },
        {
          "line": 877,
          "old_api": "taosMemoryFree",
          "new_api": "taosArrayDestroy",
          "old_text": "taosMemoryFree(pKey->pData)",
          "new_text": "taosArrayDestroy(pInfo->pPrevRow)",
          "old_line_content": "    taosMemoryFree(pKey->pData);",
          "new_line_content": "  taosArrayDestroy(pInfo->pPrevRow);",
          "content_same": false
        },
        {
          "line": 879,
          "old_api": "taosArrayDestroy",
          "new_api": "taosArrayGetSize",
          "old_text": "taosArrayDestroy(pInfo->pNextRow)",
          "new_text": "taosArrayGetSize(pInfo->pNextRow)",
          "old_line_content": "  taosArrayDestroy(pInfo->pNextRow);",
          "new_line_content": "  for (int32_t i = 0; i < taosArrayGetSize(pInfo->pNextRow); ++i) {",
          "content_same": false
        },
        {
          "line": 881,
          "old_api": "taosArrayGetSize",
          "new_api": "taosMemoryFree",
          "old_text": "taosArrayGetSize(pInfo->pLinearInfo)",
          "new_text": "taosMemoryFree(pKey->pData)",
          "old_line_content": "  for (int32_t i = 0; i < taosArrayGetSize(pInfo->pLinearInfo); ++i) {",
          "new_line_content": "    taosMemoryFree(pKey->pData);",
          "content_same": false
        },
        {
          "line": 883,
          "old_api": "taosMemoryFree",
          "new_api": "taosArrayDestroy",
          "old_text": "taosMemoryFree(pKey->start.val)",
          "new_text": "taosArrayDestroy(pInfo->pNextRow)",
          "old_line_content": "    taosMemoryFree(pKey->start.val);",
          "new_line_content": "  taosArrayDestroy(pInfo->pNextRow);",
          "content_same": false
        },
        {
          "line": 886,
          "old_api": "taosArrayDestroy",
          "new_api": "taosArrayGet",
          "old_text": "taosArrayDestroy(pInfo->pLinearInfo)",
          "new_text": "taosArrayGet(pInfo->pLinearInfo, i)",
          "old_line_content": "  taosArrayDestroy(pInfo->pLinearInfo);",
          "new_line_content": "    SFillLinearInfo* pKey = taosArrayGet(pInfo->pLinearInfo, i);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 512,
          "old_api": null,
          "new_api": "initNextRowsKeeper",
          "old_text": null,
          "new_text": "initNextRowsKeeper(pInfo, pBlock)",
          "old_line_content": "",
          "new_line_content": "  code = initNextRowsKeeper(pInfo, pBlock);",
          "content_same": false
        },
        {
          "line": 517,
          "old_api": null,
          "new_api": "initFillLinearInfo",
          "old_text": null,
          "new_text": "initFillLinearInfo(pInfo, pBlock)",
          "old_line_content": "",
          "new_line_content": "  code = initFillLinearInfo(pInfo, pBlock);",
          "content_same": false
        },
        {
          "line": 522,
          "old_api": null,
          "new_api": "initGroupKeyKeeper",
          "old_text": null,
          "new_text": "initGroupKeyKeeper(pInfo, pExprSup)",
          "old_line_content": "",
          "new_line_content": "  code = initGroupKeyKeeper(pInfo, pExprSup);",
          "content_same": false
        },
        {
          "line": 536,
          "old_api": null,
          "new_api": "taosArrayGetSize",
          "old_text": null,
          "new_text": "taosArrayGetSize(pInfo->pLinearInfo)",
          "old_line_content": "",
          "new_line_content": "  for (int32_t i = 0; i < taosArrayGetSize(pInfo->pLinearInfo); ++i) {",
          "content_same": false
        },
        {
          "line": 537,
          "old_api": null,
          "new_api": "taosArrayGet",
          "old_text": null,
          "new_text": "taosArrayGet(pInfo->pPrevRow, i)",
          "old_line_content": "  pInfo->isPrevRowSet = false;",
          "new_line_content": "    SGroupKeys *pKey = taosArrayGet(pInfo->pPrevRow, i);",
          "content_same": false
        },
        {
          "line": 551,
          "old_api": null,
          "new_api": "taosArrayGetSize",
          "old_text": null,
          "new_text": "taosArrayGetSize(pInfo->pLinearInfo)",
          "old_line_content": "",
          "new_line_content": "  for (int32_t i = 0; i < taosArrayGetSize(pInfo->pLinearInfo); ++i) {",
          "content_same": false
        },
        {
          "line": 552,
          "old_api": null,
          "new_api": "taosArrayGet",
          "old_text": null,
          "new_text": "taosArrayGet(pInfo->pPrevRow, i)",
          "old_line_content": "  pInfo->isNextRowSet = false;",
          "new_line_content": "    SGroupKeys *pKey = taosArrayGet(pInfo->pPrevRow, i);",
          "content_same": false
        },
        {
          "line": 566,
          "old_api": null,
          "new_api": "taosArrayGetSize",
          "old_text": null,
          "new_text": "taosArrayGetSize(pInfo->pLinearInfo)",
          "old_line_content": "    pLinearInfo->isStartSet = false;",
          "new_line_content": "  for (int32_t i = 0; i < taosArrayGetSize(pInfo->pLinearInfo); ++i) {",
          "content_same": false
        },
        {
          "line": 567,
          "old_api": null,
          "new_api": "taosArrayGet",
          "old_text": null,
          "new_text": "taosArrayGet(pInfo->pLinearInfo, i)",
          "old_line_content": "    pLinearInfo->isEndSet = false;",
          "new_line_content": "    SFillLinearInfo *pLinearInfo = taosArrayGet(pInfo->pLinearInfo, i);",
          "content_same": false
        },
        {
          "line": 578,
          "old_api": null,
          "new_api": "resetPrevRowsKeeper",
          "old_text": null,
          "new_text": "resetPrevRowsKeeper(pInfo)",
          "old_line_content": "  return TSDB_CODE_SUCCESS;",
          "new_line_content": "  resetPrevRowsKeeper(pInfo);",
          "content_same": false
        },
        {
          "line": 579,
          "old_api": null,
          "new_api": "resetNextRowsKeeper",
          "old_text": null,
          "new_text": "resetNextRowsKeeper(pInfo)",
          "old_line_content": "}",
          "new_line_content": "  resetNextRowsKeeper(pInfo);",
          "content_same": false
        },
        {
          "line": 580,
          "old_api": null,
          "new_api": "resetFillLinearInfo",
          "old_text": null,
          "new_text": "resetFillLinearInfo(pInfo)",
          "old_line_content": "",
          "new_line_content": "  resetFillLinearInfo(pInfo);",
          "content_same": false
        },
        {
          "line": 590,
          "old_api": null,
          "new_api": "taosArrayGet",
          "old_text": null,
          "new_text": "taosArrayGet(pBlock->pDataBlock, pSliceInfo->tsCol.slotId)",
          "old_line_content": "    // check for duplicate timestamps",
          "new_line_content": "  SColumnInfoData* pTsCol = taosArrayGet(pBlock->pDataBlock, pSliceInfo->tsCol.slotId);",
          "content_same": false
        },
        {
          "line": 595,
          "old_api": null,
          "new_api": "checkDuplicateTimestamps",
          "old_text": null,
          "new_text": "checkDuplicateTimestamps(pSliceInfo, pTsCol, i, pBlock->info.rows)",
          "old_line_content": "    if (pSliceInfo->current > pSliceInfo->win.ekey) {",
          "new_line_content": "    if (checkDuplicateTimestamps(pSliceInfo, pTsCol, i, pBlock->info.rows)) {",
          "content_same": false
        },
        {
          "line": 596,
          "old_api": null,
          "new_api": "T_LONG_JMP",
          "old_text": null,
          "new_text": "T_LONG_JMP(pTaskInfo->env, TSDB_CODE_FUNC_DUP_TIMESTAMP)",
          "old_line_content": "      break;",
          "new_line_content": "      T_LONG_JMP(pTaskInfo->env, TSDB_CODE_FUNC_DUP_TIMESTAMP);",
          "content_same": false
        },
        {
          "line": 604,
          "old_api": null,
          "new_api": "addCurrentRowToResult",
          "old_text": null,
          "new_text": "addCurrentRowToResult(pSliceInfo, &pOperator->exprSupp, pResBlock, pBlock, i)",
          "old_line_content": "",
          "new_line_content": "      addCurrentRowToResult(pSliceInfo, &pOperator->exprSupp, pResBlock, pBlock, i);",
          "content_same": false
        },
        {
          "line": 607,
          "old_api": null,
          "new_api": "doKeepLinearInfo",
          "old_text": null,
          "new_text": "doKeepLinearInfo(pSliceInfo, pBlock, i)",
          "old_line_content": "      if (pSliceInfo->current > pSliceInfo->win.ekey) {",
          "new_line_content": "      doKeepLinearInfo(pSliceInfo, pBlock, i);",
          "content_same": false
        },
        {
          "line": 610,
          "old_api": null,
          "new_api": "taosTimeAdd",
          "old_text": null,
          "new_text": "taosTimeAdd(pSliceInfo->current, pInterval->interval, pInterval->intervalUnit, pInterval->precision)",
          "old_line_content": "    } else if (ts < pSliceInfo->current) {",
          "new_line_content": "          taosTimeAdd(pSliceInfo->current, pInterval->interval, pInterval->intervalUnit, pInterval->precision);",
          "content_same": false
        },
        {
          "line": 616,
          "old_api": null,
          "new_api": "doKeepPrevRows",
          "old_text": null,
          "new_text": "doKeepPrevRows(pSliceInfo, pBlock, i)",
          "old_line_content": "        // in case of interpolation window starts and ends between two datapoints, fill(next) need to interpolate",
          "new_line_content": "      doKeepPrevRows(pSliceInfo, pBlock, i);",
          "content_same": false
        },
        {
          "line": 622,
          "old_api": null,
          "new_api": "colDataGetData",
          "old_text": null,
          "new_text": "colDataGetData(pTsCol, i + 1)",
          "old_line_content": "                pSliceInfo->fillType == TSDB_FILL_LINEAR) {",
          "new_line_content": "        int64_t nextTs = *(int64_t*)colDataGetData(pTsCol, i + 1);",
          "content_same": false
        },
        {
          "line": 629,
          "old_api": null,
          "new_api": "taosTimeAdd",
          "old_text": null,
          "new_text": "taosTimeAdd(pSliceInfo->current, pInterval->interval, pInterval->intervalUnit,\n                                                pInterval->precision)",
          "old_line_content": "",
          "new_line_content": "              pSliceInfo->current = taosTimeAdd(pSliceInfo->current, pInterval->interval, pInterval->intervalUnit,",
          "content_same": false
        },
        {
          "line": 646,
          "old_api": null,
          "new_api": "doKeepLinearInfo",
          "old_text": null,
          "new_text": "doKeepLinearInfo(pSliceInfo, pBlock, i)",
          "old_line_content": "            pSliceInfo->fillType == TSDB_FILL_LINEAR) {",
          "new_line_content": "      doKeepLinearInfo(pSliceInfo, pBlock, i);",
          "content_same": false
        },
        {
          "line": 649,
          "old_api": null,
          "new_api": "genInterpolationResult",
          "old_text": null,
          "new_text": "genInterpolationResult(pSliceInfo, &pOperator->exprSupp, pResBlock, pBlock, i, true)",
          "old_line_content": "          pSliceInfo->current =",
          "new_line_content": "        if (!genInterpolationResult(pSliceInfo, &pOperator->exprSupp, pResBlock, pBlock, i, true) &&",
          "content_same": false
        },
        {
          "line": 654,
          "old_api": null,
          "new_api": "taosTimeAdd",
          "old_text": null,
          "new_text": "taosTimeAdd(pSliceInfo->current, pInterval->interval, pInterval->intervalUnit, pInterval->precision)",
          "old_line_content": "      // add current row if timestamp match",
          "new_line_content": "              taosTimeAdd(pSliceInfo->current, pInterval->interval, pInterval->intervalUnit, pInterval->precision);",
          "content_same": false
        },
        {
          "line": 660,
          "old_api": null,
          "new_api": "addCurrentRowToResult",
          "old_text": null,
          "new_text": "addCurrentRowToResult(pSliceInfo, &pOperator->exprSupp, pResBlock, pBlock, i)",
          "old_line_content": "      }",
          "new_line_content": "        addCurrentRowToResult(pSliceInfo, &pOperator->exprSupp, pResBlock, pBlock, i);",
          "content_same": false
        },
        {
          "line": 663,
          "old_api": null,
          "new_api": "taosTimeAdd",
          "old_text": null,
          "new_text": "taosTimeAdd(pSliceInfo->current, pInterval->interval, pInterval->intervalUnit, pInterval->precision)",
          "old_line_content": "      if (pSliceInfo->current > pSliceInfo->win.ekey) {",
          "new_line_content": "            taosTimeAdd(pSliceInfo->current, pInterval->interval, pInterval->intervalUnit, pInterval->precision);",
          "content_same": false
        },
        {
          "line": 665,
          "old_api": null,
          "new_api": "doKeepPrevRows",
          "old_text": null,
          "new_text": "doKeepPrevRows(pSliceInfo, pBlock, i)",
          "old_line_content": "      }",
          "new_line_content": "      doKeepPrevRows(pSliceInfo, pBlock, i);",
          "content_same": false
        },
        {
          "line": 680,
          "old_api": null,
          "new_api": "genInterpolationResult",
          "old_text": null,
          "new_text": "genInterpolationResult(pSliceInfo, &pOperator->exprSupp, pResBlock, NULL, index, false)",
          "old_line_content": "}",
          "new_line_content": "    genInterpolationResult(pSliceInfo, &pOperator->exprSupp, pResBlock, NULL, index, false);",
          "content_same": false
        },
        {
          "line": 682,
          "old_api": null,
          "new_api": "taosTimeAdd",
          "old_text": null,
          "new_text": "taosTimeAdd(pSliceInfo->current, pInterval->interval, pInterval->intervalUnit, pInterval->precision)",
          "old_line_content": "static void copyPrevGroupKey(SExprSupp* pExprSup, SGroupKeys* pGroupKey, SSDataBlock* pSrcBlock) {",
          "new_line_content": "        taosTimeAdd(pSliceInfo->current, pInterval->interval, pInterval->intervalUnit, pInterval->precision);",
          "content_same": false
        },
        {
          "line": 692,
          "old_api": null,
          "new_api": "taosArrayGet",
          "old_text": null,
          "new_text": "taosArrayGet(pSrcBlock->pDataBlock, srcSlot)",
          "old_line_content": "        break;",
          "new_line_content": "      SColumnInfoData* pSrc = taosArrayGet(pSrcBlock->pDataBlock, srcSlot);",
          "content_same": false
        },
        {
          "line": 694,
          "old_api": null,
          "new_api": "colDataIsNull_s",
          "old_text": null,
          "new_text": "colDataIsNull_s(pSrc, 0)",
          "old_line_content": "",
          "new_line_content": "      if (colDataIsNull_s(pSrc, 0)) {",
          "content_same": false
        },
        {
          "line": 700,
          "old_api": null,
          "new_api": "IS_VAR_DATA_TYPE",
          "old_text": null,
          "new_text": "IS_VAR_DATA_TYPE(pGroupKey->type)",
          "old_line_content": "      }",
          "new_line_content": "      if (IS_VAR_DATA_TYPE(pGroupKey->type)) {",
          "content_same": false
        },
        {
          "line": 701,
          "old_api": null,
          "new_api": "varDataTLen",
          "old_text": null,
          "new_text": "varDataTLen(v)",
          "old_line_content": "",
          "new_line_content": "        memcpy(pGroupKey->pData, v, varDataTLen(v));",
          "content_same": false
        },
        {
          "line": 191,
          "old_api": null,
          "new_api": "colDataGetData",
          "old_text": null,
          "new_text": "colDataGetData(pTsCol, curIndex + 1)",
          "old_line_content": "  }",
          "new_line_content": "    int64_t nextTs = *(int64_t*)colDataGetData(pTsCol, curIndex + 1);",
          "content_same": false
        },
        {
          "line": 703,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(pGroupKey->pData, v, pGroupKey->bytes)",
          "old_line_content": "      break;",
          "new_line_content": "        memcpy(pGroupKey->pData, v, pGroupKey->bytes);",
          "content_same": false
        },
        {
          "line": 715,
          "old_api": null,
          "new_api": "resetKeeperInfo",
          "old_text": null,
          "new_text": "resetKeeperInfo(pSliceInfo)",
          "old_line_content": "  if (pOperator->status == OP_EXEC_DONE) {",
          "new_line_content": "  resetKeeperInfo(pSliceInfo);",
          "content_same": false
        },
        {
          "line": 213,
          "old_api": null,
          "new_api": "timeSliceEnsureBlockCapacity",
          "old_text": null,
          "new_text": "timeSliceEnsureBlockCapacity(pSliceInfo, pResBlock)",
          "old_line_content": "  // output the result",
          "new_line_content": "  timeSliceEnsureBlockCapacity(pSliceInfo, pResBlock);",
          "content_same": false
        },
        {
          "line": 223,
          "old_api": null,
          "new_api": "taosArrayGet",
          "old_text": null,
          "new_text": "taosArrayGet(pResBlock->pDataBlock, dstSlot)",
          "old_line_content": "      continue;",
          "new_line_content": "    SColumnInfoData* pDst = taosArrayGet(pResBlock->pDataBlock, dstSlot);",
          "content_same": false
        },
        {
          "line": 225,
          "old_api": null,
          "new_api": "isIrowtsPseudoColumn",
          "old_text": null,
          "new_text": "isIrowtsPseudoColumn(pExprInfo)",
          "old_line_content": "      bool isFilled = true;",
          "new_line_content": "    if (isIrowtsPseudoColumn(pExprInfo)) {",
          "content_same": false
        },
        {
          "line": 737,
          "old_api": null,
          "new_api": "setInputDataBlock",
          "old_text": null,
          "new_text": "setInputDataBlock(pSup, pSliceInfo->pNextGroupRes, order, MAIN_SCAN, true)",
          "old_line_content": "    }",
          "new_line_content": "      setInputDataBlock(pSup, pSliceInfo->pNextGroupRes, order, MAIN_SCAN, true);",
          "content_same": false
        },
        {
          "line": 738,
          "old_api": null,
          "new_api": "doTimesliceImpl",
          "old_text": null,
          "new_text": "doTimesliceImpl(pOperator, pSliceInfo, pSliceInfo->pNextGroupRes, pTaskInfo)",
          "old_line_content": "",
          "new_line_content": "      doTimesliceImpl(pOperator, pSliceInfo, pSliceInfo->pNextGroupRes, pTaskInfo);",
          "content_same": false
        },
        {
          "line": 739,
          "old_api": null,
          "new_api": "copyPrevGroupKey",
          "old_text": null,
          "new_text": "copyPrevGroupKey(&pOperator->exprSupp, pSliceInfo->pPrevGroupKey, pSliceInfo->pNextGroupRes)",
          "old_line_content": "    while (1) {",
          "new_line_content": "      copyPrevGroupKey(&pOperator->exprSupp, pSliceInfo->pPrevGroupKey, pSliceInfo->pNextGroupRes);",
          "content_same": false
        },
        {
          "line": 230,
          "old_api": null,
          "new_api": "colDataAppend",
          "old_text": null,
          "new_text": "colDataAppend(pDst, pResBlock->info.rows, (char*)&isFilled, false)",
          "old_line_content": "        if (pSrcBlock != NULL) {",
          "new_line_content": "      colDataAppend(pDst, pResBlock->info.rows, (char*)&isFilled, false);",
          "content_same": false
        },
        {
          "line": 744,
          "old_api": null,
          "new_api": "getNextFn",
          "old_text": null,
          "new_text": "downstream->fpSet.getNextFn(downstream)",
          "old_line_content": "      }",
          "new_line_content": "      SSDataBlock* pBlock = downstream->fpSet.getNextFn(downstream);",
          "content_same": false
        },
        {
          "line": 233,
          "old_api": null,
          "new_api": "isGroupKeyFunc",
          "old_text": null,
          "new_text": "isGroupKeyFunc(pExprInfo)",
          "old_line_content": "",
          "new_line_content": "      if (isGroupKeyFunc(pExprInfo)) {",
          "content_same": false
        },
        {
          "line": 746,
          "old_api": null,
          "new_api": "setOperatorCompleted",
          "old_text": null,
          "new_text": "setOperatorCompleted(pOperator)",
          "old_line_content": "      if (pSliceInfo->groupId == 0 && pBlock->info.id.groupId != 0) {",
          "new_line_content": "        setOperatorCompleted(pOperator);",
          "content_same": false
        },
        {
          "line": 236,
          "old_api": null,
          "new_api": "taosArrayGet",
          "old_text": null,
          "new_text": "taosArrayGet(pSrcBlock->pDataBlock, srcSlot)",
          "old_line_content": "            continue;",
          "new_line_content": "          SColumnInfoData* pSrc = taosArrayGet(pSrcBlock->pDataBlock, srcSlot);",
          "content_same": false
        },
        {
          "line": 238,
          "old_api": null,
          "new_api": "colDataIsNull_s",
          "old_text": null,
          "new_text": "colDataIsNull_s(pSrc, index)",
          "old_line_content": "",
          "new_line_content": "          if (colDataIsNull_s(pSrc, index)) {",
          "content_same": false
        },
        {
          "line": 243,
          "old_api": null,
          "new_api": "colDataGetData",
          "old_text": null,
          "new_text": "colDataGetData(pSrc, index)",
          "old_line_content": "          SGroupKeys* pkey = pSliceInfo->pPrevGroupKey;",
          "new_line_content": "          char* v = colDataGetData(pSrc, index);",
          "content_same": false
        },
        {
          "line": 244,
          "old_api": null,
          "new_api": "colDataSetVal",
          "old_text": null,
          "new_text": "colDataSetVal(pDst, pResBlock->info.rows, v, false)",
          "old_line_content": "          if (pkey->isNull == false) {",
          "new_line_content": "          colDataSetVal(pDst, pResBlock->info.rows, v, false);",
          "content_same": false
        },
        {
          "line": 249,
          "old_api": null,
          "new_api": "colDataSetVal",
          "old_text": null,
          "new_text": "colDataSetVal(pDst, rows, pkey->pData, false)",
          "old_line_content": "        }",
          "new_line_content": "            colDataSetVal(pDst, rows, pkey->pData, false);",
          "content_same": false
        },
        {
          "line": 762,
          "old_api": null,
          "new_api": "projectApplyFunctions",
          "old_text": null,
          "new_text": "projectApplyFunctions(pExprSup->pExprInfo, pBlock, pBlock, pExprSup->pCtx, pExprSup->numOfExprs, NULL)",
          "old_line_content": "      if (code != TSDB_CODE_SUCCESS) {",
          "new_line_content": "        projectApplyFunctions(pExprSup->pExprInfo, pBlock, pBlock, pExprSup->pCtx, pExprSup->numOfExprs, NULL);",
          "content_same": false
        },
        {
          "line": 251,
          "old_api": null,
          "new_api": "colDataSetNULL",
          "old_text": null,
          "new_text": "colDataSetNULL(pDst, rows)",
          "old_line_content": "      continue;",
          "new_line_content": "            colDataSetNULL(pDst, rows);",
          "content_same": false
        },
        {
          "line": 765,
          "old_api": null,
          "new_api": "initKeeperInfo",
          "old_text": null,
          "new_text": "initKeeperInfo(pSliceInfo, pBlock, &pOperator->exprSupp)",
          "old_line_content": "",
          "new_line_content": "      int32_t code = initKeeperInfo(pSliceInfo, pBlock, &pOperator->exprSupp);",
          "content_same": false
        },
        {
          "line": 771,
          "old_api": null,
          "new_api": "setInputDataBlock",
          "old_text": null,
          "new_text": "setInputDataBlock(pSup, pBlock, order, MAIN_SCAN, true)",
          "old_line_content": "",
          "new_line_content": "      setInputDataBlock(pSup, pBlock, order, MAIN_SCAN, true);",
          "content_same": false
        },
        {
          "line": 772,
          "old_api": null,
          "new_api": "doTimesliceImpl",
          "old_text": null,
          "new_text": "doTimesliceImpl(pOperator, pSliceInfo, pBlock, pTaskInfo)",
          "old_line_content": "    // check if need to interpolate after last datablock",
          "new_line_content": "      doTimesliceImpl(pOperator, pSliceInfo, pBlock, pTaskInfo);",
          "content_same": false
        },
        {
          "line": 773,
          "old_api": null,
          "new_api": "copyPrevGroupKey",
          "old_text": null,
          "new_text": "copyPrevGroupKey(&pOperator->exprSupp, pSliceInfo->pPrevGroupKey, pBlock)",
          "old_line_content": "    // except for fill(next), fill(linear)",
          "new_line_content": "      copyPrevGroupKey(&pOperator->exprSupp, pSliceInfo->pPrevGroupKey, pBlock);",
          "content_same": false
        },
        {
          "line": 262,
          "old_api": null,
          "new_api": "colDataSetNULL",
          "old_text": null,
          "new_text": "colDataSetNULL(pDst, rows)",
          "old_line_content": "      case TSDB_FILL_SET_VALUE:",
          "new_line_content": "        colDataSetNULL(pDst, rows);",
          "content_same": false
        },
        {
          "line": 778,
          "old_api": null,
          "new_api": "genInterpAfterDataBlock",
          "old_text": null,
          "new_text": "genInterpAfterDataBlock(pSliceInfo, pOperator, 0)",
          "old_line_content": "      break;",
          "new_line_content": "    genInterpAfterDataBlock(pSliceInfo, pOperator, 0);",
          "content_same": false
        },
        {
          "line": 780,
          "old_api": null,
          "new_api": "doFilter",
          "old_text": null,
          "new_text": "doFilter(pResBlock, pOperator->exprSupp.pFilterInfo, NULL)",
          "old_line_content": "",
          "new_line_content": "    doFilter(pResBlock, pOperator->exprSupp.pFilterInfo, NULL);",
          "content_same": false
        },
        {
          "line": 790,
          "old_api": null,
          "new_api": "setTaskStatus",
          "old_text": null,
          "new_text": "setTaskStatus(pOperator->pTaskInfo, TASK_COMPLETED)",
          "old_line_content": "",
          "new_line_content": "  setTaskStatus(pOperator->pTaskInfo, TASK_COMPLETED);",
          "content_same": false
        },
        {
          "line": 281,
          "old_api": null,
          "new_api": "colDataSetVal",
          "old_text": null,
          "new_text": "colDataSetVal(pDst, rows, (char*)&v, false)",
          "old_line_content": "            GET_TYPED_DATA(v, bool, pVar->nType, &pVar->i);",
          "new_line_content": "          colDataSetVal(pDst, rows, (char*)&v, false);",
          "content_same": false
        },
        {
          "line": 282,
          "old_api": null,
          "new_api": "IS_BOOLEAN_TYPE",
          "old_text": null,
          "new_text": "IS_BOOLEAN_TYPE(pDst->info.type)",
          "old_line_content": "          } else {",
          "new_line_content": "        } else if (IS_BOOLEAN_TYPE(pDst->info.type)) {",
          "content_same": false
        },
        {
          "line": 284,
          "old_api": null,
          "new_api": "IS_VAR_DATA_TYPE",
          "old_text": null,
          "new_text": "IS_VAR_DATA_TYPE(pVar->nType)",
          "old_line_content": "          }",
          "new_line_content": "          if (!IS_VAR_DATA_TYPE(pVar->nType)) {",
          "content_same": false
        },
        {
          "line": 287,
          "old_api": null,
          "new_api": "varDataVal",
          "old_text": null,
          "new_text": "varDataVal(pVar->pz)",
          "old_line_content": "        break;",
          "new_line_content": "            v = taosStr2Int8(varDataVal(pVar->pz), NULL, 10);",
          "content_same": false
        },
        {
          "line": 799,
          "old_api": null,
          "new_api": "taosMemoryCalloc",
          "old_text": null,
          "new_text": "taosMemoryCalloc(1, sizeof(STimeSliceOperatorInfo))",
          "old_line_content": "  }",
          "new_line_content": "  STimeSliceOperatorInfo* pInfo = taosMemoryCalloc(1, sizeof(STimeSliceOperatorInfo));",
          "content_same": false
        },
        {
          "line": 289,
          "old_api": null,
          "new_api": "colDataSetVal",
          "old_text": null,
          "new_text": "colDataSetVal(pDst, rows, (char*)&v, false)",
          "old_line_content": "",
          "new_line_content": "          colDataSetVal(pDst, rows, (char*)&v, false);",
          "content_same": false
        },
        {
          "line": 800,
          "old_api": null,
          "new_api": "taosMemoryCalloc",
          "old_text": null,
          "new_text": "taosMemoryCalloc(1, sizeof(SOperatorInfo))",
          "old_line_content": "",
          "new_line_content": "  SOperatorInfo*          pOperator = taosMemoryCalloc(1, sizeof(SOperatorInfo));",
          "content_same": false
        },
        {
          "line": 295,
          "old_api": null,
          "new_api": "taosArrayGet",
          "old_text": null,
          "new_text": "taosArrayGet(pSliceInfo->pLinearInfo, srcSlot)",
          "old_line_content": "        SPoint current = {.key = pSliceInfo->current};",
          "new_line_content": "        SFillLinearInfo* pLinearInfo = taosArrayGet(pSliceInfo->pLinearInfo, srcSlot);",
          "content_same": false
        },
        {
          "line": 809,
          "old_api": null,
          "new_api": "createExprInfo",
          "old_text": null,
          "new_text": "createExprInfo(pInterpPhyNode->pFuncs, NULL, &numOfExprs)",
          "old_line_content": "  }",
          "new_line_content": "  SExprInfo* pExprInfo = createExprInfo(pInterpPhyNode->pFuncs, NULL, &numOfExprs);",
          "content_same": false
        },
        {
          "line": 810,
          "old_api": null,
          "new_api": "initExprSupp",
          "old_text": null,
          "new_text": "initExprSupp(pSup, pExprInfo, numOfExprs)",
          "old_line_content": "",
          "new_line_content": "  int32_t    code = initExprSupp(pSup, pExprInfo, numOfExprs);",
          "content_same": false
        },
        {
          "line": 817,
          "old_api": null,
          "new_api": "createExprInfo",
          "old_text": null,
          "new_text": "createExprInfo(pInterpPhyNode->pExprs, NULL, &num)",
          "old_line_content": "    }",
          "new_line_content": "    SExprInfo* pScalarExprInfo = createExprInfo(pInterpPhyNode->pExprs, NULL, &num);",
          "content_same": false
        },
        {
          "line": 818,
          "old_api": null,
          "new_api": "initExprSupp",
          "old_text": null,
          "new_text": "initExprSupp(&pInfo->scalarSup, pScalarExprInfo, num)",
          "old_line_content": "  }",
          "new_line_content": "    code = initExprSupp(&pInfo->scalarSup, pScalarExprInfo, num);",
          "content_same": false
        },
        {
          "line": 824,
          "old_api": null,
          "new_api": "filterInitFromNode",
          "old_text": null,
          "new_text": "filterInitFromNode((SNode*)pInterpPhyNode->node.pConditions, &pOperator->exprSupp.pFilterInfo, 0)",
          "old_line_content": "",
          "new_line_content": "  code = filterInitFromNode((SNode*)pInterpPhyNode->node.pConditions, &pOperator->exprSupp.pFilterInfo, 0);",
          "content_same": false
        },
        {
          "line": 317,
          "old_api": null,
          "new_api": "taosGetLinearInterpolationVal",
          "old_text": null,
          "new_text": "taosGetLinearInterpolationVal(&current, pLinearInfo->type, &start, &end, pLinearInfo->type)",
          "old_line_content": "        break;",
          "new_line_content": "        taosGetLinearInterpolationVal(&current, pLinearInfo->type, &start, &end, pLinearInfo->type);",
          "content_same": false
        },
        {
          "line": 318,
          "old_api": null,
          "new_api": "colDataSetVal",
          "old_text": null,
          "new_text": "colDataSetVal(pDst, rows, (char*)current.val, false)",
          "old_line_content": "      }",
          "new_line_content": "        colDataSetVal(pDst, rows, (char*)current.val, false);",
          "content_same": false
        },
        {
          "line": 830,
          "old_api": null,
          "new_api": "convertFillType",
          "old_text": null,
          "new_text": "convertFillType(pInterpPhyNode->fillMode)",
          "old_line_content": "  pInfo->pLinearInfo = NULL;",
          "new_line_content": "  pInfo->fillType = convertFillType(pInterpPhyNode->fillMode);",
          "content_same": false
        },
        {
          "line": 320,
          "old_api": null,
          "new_api": "taosMemoryFree",
          "old_text": null,
          "new_text": "taosMemoryFree(current.val)",
          "old_line_content": "        if (!pSliceInfo->isPrevRowSet) {",
          "new_line_content": "        taosMemoryFree(current.val);",
          "content_same": false
        },
        {
          "line": 833,
          "old_api": null,
          "new_api": "createFillColInfo",
          "old_text": null,
          "new_text": "createFillColInfo(pExprInfo, numOfExprs, NULL, 0, (SNodeListNode*)pInterpPhyNode->pFillValues)",
          "old_line_content": "  pInfo->interval.interval = pInterpPhyNode->interval;",
          "new_line_content": "  pInfo->pFillColInfo = createFillColInfo(pExprInfo, numOfExprs, NULL, 0, (SNodeListNode*)pInterpPhyNode->pFillValues);",
          "content_same": false
        },
        {
          "line": 835,
          "old_api": null,
          "new_api": "createDataBlockFromDescNode",
          "old_text": null,
          "new_text": "createDataBlockFromDescNode(pPhyNode->pOutputDataBlockDesc)",
          "old_line_content": "  pInfo->prevTsSet = false;",
          "new_line_content": "  pInfo->pRes = createDataBlockFromDescNode(pPhyNode->pOutputDataBlockDesc);",
          "content_same": false
        },
        {
          "line": 331,
          "old_api": null,
          "new_api": "colDataSetVal",
          "old_text": null,
          "new_text": "colDataSetVal(pDst, rows, pkey->pData, false)",
          "old_line_content": "        break;",
          "new_line_content": "          colDataSetVal(pDst, rows, pkey->pData, false);",
          "content_same": false
        },
        {
          "line": 333,
          "old_api": null,
          "new_api": "colDataSetNULL",
          "old_text": null,
          "new_text": "colDataSetNULL(pDst, rows)",
          "old_line_content": "",
          "new_line_content": "          colDataSetNULL(pDst, rows);",
          "content_same": false
        },
        {
          "line": 851,
          "old_api": null,
          "new_api": "setOperatorInfo",
          "old_text": null,
          "new_text": "setOperatorInfo(pOperator, \"TimeSliceOperator\", QUERY_NODE_PHYSICAL_PLAN_INTERP_FUNC, false, OP_NOT_OPENED, pInfo,\n                  pTaskInfo)",
          "old_line_content": "",
          "new_line_content": "  setOperatorInfo(pOperator, \"TimeSliceOperator\", QUERY_NODE_PHYSICAL_PLAN_INTERP_FUNC, false, OP_NOT_OPENED, pInfo,",
          "content_same": false
        },
        {
          "line": 856,
          "old_api": null,
          "new_api": "blockDataEnsureCapacity",
          "old_text": null,
          "new_text": "blockDataEnsureCapacity(pInfo->pRes, pOperator->resultInfo.capacity)",
          "old_line_content": "",
          "new_line_content": "  blockDataEnsureCapacity(pInfo->pRes, pOperator->resultInfo.capacity);",
          "content_same": false
        },
        {
          "line": 346,
          "old_api": null,
          "new_api": "colDataSetVal",
          "old_text": null,
          "new_text": "colDataSetVal(pDst, rows, pkey->pData, false)",
          "old_line_content": "        break;",
          "new_line_content": "          colDataSetVal(pDst, rows, pkey->pData, false);",
          "content_same": false
        },
        {
          "line": 348,
          "old_api": null,
          "new_api": "colDataSetNULL",
          "old_text": null,
          "new_text": "colDataSetNULL(pDst, rows)",
          "old_line_content": "",
          "new_line_content": "          colDataSetNULL(pDst, rows);",
          "content_same": false
        },
        {
          "line": 862,
          "old_api": null,
          "new_api": "taosMemoryFree",
          "old_text": null,
          "new_text": "taosMemoryFree(pInfo)",
          "old_line_content": "}",
          "new_line_content": "  taosMemoryFree(pInfo);",
          "content_same": false
        },
        {
          "line": 863,
          "old_api": null,
          "new_api": "taosMemoryFree",
          "old_text": null,
          "new_text": "taosMemoryFree(pOperator)",
          "old_line_content": "",
          "new_line_content": "  taosMemoryFree(pOperator);",
          "content_same": false
        },
        {
          "line": 874,
          "old_api": null,
          "new_api": "taosArrayGet",
          "old_text": null,
          "new_text": "taosArrayGet(pInfo->pPrevRow, i)",
          "old_line_content": "",
          "new_line_content": "    SGroupKeys* pKey = taosArrayGet(pInfo->pPrevRow, i);",
          "content_same": false
        },
        {
          "line": 368,
          "old_api": null,
          "new_api": "timeSliceEnsureBlockCapacity",
          "old_text": null,
          "new_text": "timeSliceEnsureBlockCapacity(pSliceInfo, pResBlock)",
          "old_line_content": "    int32_t          dstSlot = pExprInfo->base.resSchema.slotId;",
          "new_line_content": "  timeSliceEnsureBlockCapacity(pSliceInfo, pResBlock);",
          "content_same": false
        },
        {
          "line": 880,
          "old_api": null,
          "new_api": "taosArrayGet",
          "old_text": null,
          "new_text": "taosArrayGet(pInfo->pNextRow, i)",
          "old_line_content": "",
          "new_line_content": "    SGroupKeys* pKey = taosArrayGet(pInfo->pNextRow, i);",
          "content_same": false
        },
        {
          "line": 885,
          "old_api": null,
          "new_api": "taosArrayGetSize",
          "old_text": null,
          "new_text": "taosArrayGetSize(pInfo->pLinearInfo)",
          "old_line_content": "  }",
          "new_line_content": "  for (int32_t i = 0; i < taosArrayGetSize(pInfo->pLinearInfo); ++i) {",
          "content_same": false
        },
        {
          "line": 887,
          "old_api": null,
          "new_api": "taosMemoryFree",
          "old_text": null,
          "new_text": "taosMemoryFree(pKey->start.val)",
          "old_line_content": "",
          "new_line_content": "    taosMemoryFree(pKey->start.val);",
          "content_same": false
        },
        {
          "line": 376,
          "old_api": null,
          "new_api": "colDataSetVal",
          "old_text": null,
          "new_text": "colDataSetVal(pDst, pResBlock->info.rows, (char*)&pSliceInfo->current, false)",
          "old_line_content": "    } else {",
          "new_line_content": "      colDataSetVal(pDst, pResBlock->info.rows, (char*)&pSliceInfo->current, false);",
          "content_same": false
        },
        {
          "line": 377,
          "old_api": null,
          "new_api": "isIsfilledPseudoColumn",
          "old_text": null,
          "new_text": "isIsfilledPseudoColumn(pExprInfo)",
          "old_line_content": "      int32_t       srcSlot = pExprInfo->base.pParam[0].pCol->slotId;",
          "new_line_content": "    } else if (isIsfilledPseudoColumn(pExprInfo)) {",
          "content_same": false
        },
        {
          "line": 890,
          "old_api": null,
          "new_api": "taosArrayDestroy",
          "old_text": null,
          "new_text": "taosArrayDestroy(pInfo->pLinearInfo)",
          "old_line_content": "",
          "new_line_content": "  taosArrayDestroy(pInfo->pLinearInfo);",
          "content_same": false
        },
        {
          "line": 379,
          "old_api": null,
          "new_api": "colDataSetVal",
          "old_text": null,
          "new_text": "colDataSetVal(pDst, pResBlock->info.rows, (char*)&isFilled, false)",
          "old_line_content": "",
          "new_line_content": "      colDataSetVal(pDst, pResBlock->info.rows, (char*)&isFilled, false);",
          "content_same": false
        },
        {
          "line": 892,
          "old_api": null,
          "new_api": "taosMemoryFree",
          "old_text": null,
          "new_text": "taosMemoryFree(pInfo->pPrevGroupKey->pData)",
          "old_line_content": "",
          "new_line_content": "  taosMemoryFree(pInfo->pPrevGroupKey->pData);",
          "content_same": false
        },
        {
          "line": 893,
          "old_api": null,
          "new_api": "taosMemoryFree",
          "old_text": null,
          "new_text": "taosMemoryFree(pInfo->pPrevGroupKey)",
          "old_line_content": "  for (int32_t i = 0; i < pInfo->pFillColInfo->numOfFillExpr; ++i) {",
          "new_line_content": "  taosMemoryFree(pInfo->pPrevGroupKey);",
          "content_same": false
        },
        {
          "line": 382,
          "old_api": null,
          "new_api": "taosArrayGet",
          "old_text": null,
          "new_text": "taosArrayGet(pSrcBlock->pDataBlock, srcSlot)",
          "old_line_content": "        continue;",
          "new_line_content": "      SColumnInfoData* pSrc = taosArrayGet(pSrcBlock->pDataBlock, srcSlot);",
          "content_same": false
        },
        {
          "line": 895,
          "old_api": null,
          "new_api": "cleanupExprSupp",
          "old_text": null,
          "new_text": "cleanupExprSupp(&pInfo->scalarSup)",
          "old_line_content": "  }",
          "new_line_content": "  cleanupExprSupp(&pInfo->scalarSup);",
          "content_same": false
        },
        {
          "line": 384,
          "old_api": null,
          "new_api": "colDataIsNull_s",
          "old_text": null,
          "new_text": "colDataIsNull_s(pSrc, index)",
          "old_line_content": "",
          "new_line_content": "      if (colDataIsNull_s(pSrc, index)) {",
          "content_same": false
        },
        {
          "line": 898,
          "old_api": null,
          "new_api": "taosVariantDestroy",
          "old_text": null,
          "new_text": "taosVariantDestroy(&pInfo->pFillColInfo[i].fillVal)",
          "old_line_content": "}",
          "new_line_content": "    taosVariantDestroy(&pInfo->pFillColInfo[i].fillVal);",
          "content_same": false
        },
        {
          "line": 900,
          "old_api": null,
          "new_api": "taosMemoryFree",
          "old_text": null,
          "new_text": "taosMemoryFree(pInfo->pFillColInfo)",
          "old_line_content": "",
          "new_line_content": "  taosMemoryFree(pInfo->pFillColInfo);",
          "content_same": false
        },
        {
          "line": 389,
          "old_api": null,
          "new_api": "colDataGetData",
          "old_text": null,
          "new_text": "colDataGetData(pSrc, index)",
          "old_line_content": "",
          "new_line_content": "      char* v = colDataGetData(pSrc, index);",
          "content_same": false
        },
        {
          "line": 390,
          "old_api": null,
          "new_api": "colDataSetVal",
          "old_text": null,
          "new_text": "colDataSetVal(pDst, pResBlock->info.rows, v, false)",
          "old_line_content": "  pResBlock->info.rows += 1;",
          "new_line_content": "      colDataSetVal(pDst, pResBlock->info.rows, v, false);",
          "content_same": false
        },
        {
          "line": 901,
          "old_api": null,
          "new_api": "taosMemoryFreeClear",
          "old_text": null,
          "new_text": "taosMemoryFreeClear(param)",
          "old_line_content": "",
          "new_line_content": "  taosMemoryFreeClear(param);",
          "content_same": false
        },
        {
          "line": 403,
          "old_api": null,
          "new_api": "taosArrayInit",
          "old_text": null,
          "new_text": "taosArrayInit(4, sizeof(SGroupKeys))",
          "old_line_content": "",
          "new_line_content": "  pInfo->pPrevRow = taosArrayInit(4, sizeof(SGroupKeys));",
          "content_same": false
        },
        {
          "line": 408,
          "old_api": null,
          "new_api": "taosArrayGetSize",
          "old_text": null,
          "new_text": "taosArrayGetSize(pBlock->pDataBlock)",
          "old_line_content": "    SGroupKeys key = {0};",
          "new_line_content": "  int32_t numOfCols = taosArrayGetSize(pBlock->pDataBlock);",
          "content_same": false
        },
        {
          "line": 410,
          "old_api": null,
          "new_api": "taosArrayGet",
          "old_text": null,
          "new_text": "taosArrayGet(pBlock->pDataBlock, i)",
          "old_line_content": "    key.type = pColInfo->info.type;",
          "new_line_content": "    SColumnInfoData* pColInfo = taosArrayGet(pBlock->pDataBlock, i);",
          "content_same": false
        },
        {
          "line": 416,
          "old_api": null,
          "new_api": "taosMemoryCalloc",
          "old_text": null,
          "new_text": "taosMemoryCalloc(1, pColInfo->info.bytes)",
          "old_line_content": "  pInfo->isPrevRowSet = false;",
          "new_line_content": "    key.pData = taosMemoryCalloc(1, pColInfo->info.bytes);",
          "content_same": false
        },
        {
          "line": 417,
          "old_api": null,
          "new_api": "taosArrayPush",
          "old_text": null,
          "new_text": "taosArrayPush(pInfo->pPrevRow, &key)",
          "old_line_content": "",
          "new_line_content": "    taosArrayPush(pInfo->pPrevRow, &key);",
          "content_same": false
        },
        {
          "line": 430,
          "old_api": null,
          "new_api": "taosArrayInit",
          "old_text": null,
          "new_text": "taosArrayInit(4, sizeof(SGroupKeys))",
          "old_line_content": "",
          "new_line_content": "  pInfo->pNextRow = taosArrayInit(4, sizeof(SGroupKeys));",
          "content_same": false
        },
        {
          "line": 435,
          "old_api": null,
          "new_api": "taosArrayGetSize",
          "old_text": null,
          "new_text": "taosArrayGetSize(pBlock->pDataBlock)",
          "old_line_content": "    SGroupKeys key = {0};",
          "new_line_content": "  int32_t numOfCols = taosArrayGetSize(pBlock->pDataBlock);",
          "content_same": false
        },
        {
          "line": 437,
          "old_api": null,
          "new_api": "taosArrayGet",
          "old_text": null,
          "new_text": "taosArrayGet(pBlock->pDataBlock, i)",
          "old_line_content": "    key.type = pColInfo->info.type;",
          "new_line_content": "    SColumnInfoData* pColInfo = taosArrayGet(pBlock->pDataBlock, i);",
          "content_same": false
        },
        {
          "line": 443,
          "old_api": null,
          "new_api": "taosMemoryCalloc",
          "old_text": null,
          "new_text": "taosMemoryCalloc(1, pColInfo->info.bytes)",
          "old_line_content": "  pInfo->isNextRowSet = false;",
          "new_line_content": "    key.pData = taosMemoryCalloc(1, pColInfo->info.bytes);",
          "content_same": false
        },
        {
          "line": 444,
          "old_api": null,
          "new_api": "taosArrayPush",
          "old_text": null,
          "new_text": "taosArrayPush(pInfo->pNextRow, &key)",
          "old_line_content": "",
          "new_line_content": "    taosArrayPush(pInfo->pNextRow, &key);",
          "content_same": false
        },
        {
          "line": 457,
          "old_api": null,
          "new_api": "taosArrayInit",
          "old_text": null,
          "new_text": "taosArrayInit(4, sizeof(SFillLinearInfo))",
          "old_line_content": "",
          "new_line_content": "  pInfo->pLinearInfo = taosArrayInit(4, sizeof(SFillLinearInfo));",
          "content_same": false
        },
        {
          "line": 462,
          "old_api": null,
          "new_api": "taosArrayGetSize",
          "old_text": null,
          "new_text": "taosArrayGetSize(pBlock->pDataBlock)",
          "old_line_content": "    SFillLinearInfo linearInfo = {0};",
          "new_line_content": "  int32_t numOfCols = taosArrayGetSize(pBlock->pDataBlock);",
          "content_same": false
        },
        {
          "line": 464,
          "old_api": null,
          "new_api": "taosArrayGet",
          "old_text": null,
          "new_text": "taosArrayGet(pBlock->pDataBlock, i)",
          "old_line_content": "    linearInfo.end.key = INT64_MIN;",
          "new_line_content": "    SColumnInfoData* pColInfo = taosArrayGet(pBlock->pDataBlock, i);",
          "content_same": false
        },
        {
          "line": 469,
          "old_api": null,
          "new_api": "taosMemoryCalloc",
          "old_text": null,
          "new_text": "taosMemoryCalloc(1, pColInfo->info.bytes)",
          "old_line_content": "    linearInfo.type = pColInfo->info.type;",
          "new_line_content": "    linearInfo.start.val = taosMemoryCalloc(1, pColInfo->info.bytes);",
          "content_same": false
        },
        {
          "line": 470,
          "old_api": null,
          "new_api": "taosMemoryCalloc",
          "old_text": null,
          "new_text": "taosMemoryCalloc(1, pColInfo->info.bytes)",
          "old_line_content": "    linearInfo.bytes = pColInfo->info.bytes;",
          "new_line_content": "    linearInfo.end.val = taosMemoryCalloc(1, pColInfo->info.bytes);",
          "content_same": false
        },
        {
          "line": 475,
          "old_api": null,
          "new_api": "taosArrayPush",
          "old_text": null,
          "new_text": "taosArrayPush(pInfo->pLinearInfo, &linearInfo)",
          "old_line_content": "}",
          "new_line_content": "    taosArrayPush(pInfo->pLinearInfo, &linearInfo);",
          "content_same": false
        },
        {
          "line": 486,
          "old_api": null,
          "new_api": "taosMemoryCalloc",
          "old_text": null,
          "new_text": "taosMemoryCalloc(1, sizeof(SGroupKeys))",
          "old_line_content": "",
          "new_line_content": "  pInfo->pPrevGroupKey = taosMemoryCalloc(1, sizeof(SGroupKeys));",
          "content_same": false
        },
        {
          "line": 498,
          "old_api": null,
          "new_api": "taosMemoryCalloc",
          "old_text": null,
          "new_text": "taosMemoryCalloc(1, pInfo->pPrevGroupKey->bytes)",
          "old_line_content": "  return TSDB_CODE_SUCCESS;",
          "new_line_content": "      pInfo->pPrevGroupKey->pData = taosMemoryCalloc(1, pInfo->pPrevGroupKey->bytes);",
          "content_same": false
        },
        {
          "line": 507,
          "old_api": null,
          "new_api": "initPrevRowsKeeper",
          "old_text": null,
          "new_text": "initPrevRowsKeeper(pInfo, pBlock)",
          "old_line_content": "",
          "new_line_content": "  code = initPrevRowsKeeper(pInfo, pBlock);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 513,
          "old_api": "initFillLinearInfo",
          "new_api": null,
          "old_text": "initFillLinearInfo(pInfo, pBlock)",
          "new_text": null,
          "old_line_content": "  code = initFillLinearInfo(pInfo, pBlock);",
          "new_line_content": "  if (code != TSDB_CODE_SUCCESS) {",
          "content_same": false
        },
        {
          "line": 518,
          "old_api": "initGroupKeyKeeper",
          "new_api": null,
          "old_text": "initGroupKeyKeeper(pInfo, pExprSup)",
          "new_text": null,
          "old_line_content": "  code = initGroupKeyKeeper(pInfo, pExprSup);",
          "new_line_content": "  if (code != TSDB_CODE_SUCCESS) {",
          "content_same": false
        },
        {
          "line": 532,
          "old_api": "taosArrayGetSize",
          "new_api": null,
          "old_text": "taosArrayGetSize(pInfo->pLinearInfo)",
          "new_text": null,
          "old_line_content": "  for (int32_t i = 0; i < taosArrayGetSize(pInfo->pLinearInfo); ++i) {",
          "new_line_content": "  if (pInfo->pPrevRow == NULL) {",
          "content_same": false
        },
        {
          "line": 533,
          "old_api": "taosArrayGet",
          "new_api": null,
          "old_text": "taosArrayGet(pInfo->pPrevRow, i)",
          "new_text": null,
          "old_line_content": "    SGroupKeys *pKey = taosArrayGet(pInfo->pPrevRow, i);",
          "new_line_content": "    return TSDB_CODE_SUCCESS;",
          "content_same": false
        },
        {
          "line": 547,
          "old_api": "taosArrayGetSize",
          "new_api": null,
          "old_text": "taosArrayGetSize(pInfo->pLinearInfo)",
          "new_text": null,
          "old_line_content": "  for (int32_t i = 0; i < taosArrayGetSize(pInfo->pLinearInfo); ++i) {",
          "new_line_content": "  if (pInfo->pNextRow == NULL) {",
          "content_same": false
        },
        {
          "line": 548,
          "old_api": "taosArrayGet",
          "new_api": null,
          "old_text": "taosArrayGet(pInfo->pPrevRow, i)",
          "new_text": null,
          "old_line_content": "    SGroupKeys *pKey = taosArrayGet(pInfo->pPrevRow, i);",
          "new_line_content": "    return TSDB_CODE_SUCCESS;",
          "content_same": false
        },
        {
          "line": 562,
          "old_api": "taosArrayGetSize",
          "new_api": null,
          "old_text": "taosArrayGetSize(pInfo->pLinearInfo)",
          "new_text": null,
          "old_line_content": "  for (int32_t i = 0; i < taosArrayGetSize(pInfo->pLinearInfo); ++i) {",
          "new_line_content": "  if (pInfo->pLinearInfo == NULL) {",
          "content_same": false
        },
        {
          "line": 563,
          "old_api": "taosArrayGet",
          "new_api": null,
          "old_text": "taosArrayGet(pInfo->pLinearInfo, i)",
          "new_text": null,
          "old_line_content": "    SFillLinearInfo *pLinearInfo = taosArrayGet(pInfo->pLinearInfo, i);",
          "new_line_content": "    return TSDB_CODE_SUCCESS;",
          "content_same": false
        },
        {
          "line": 574,
          "old_api": "resetPrevRowsKeeper",
          "new_api": null,
          "old_text": "resetPrevRowsKeeper(pInfo)",
          "new_text": null,
          "old_line_content": "  resetPrevRowsKeeper(pInfo);",
          "new_line_content": "  return TSDB_CODE_SUCCESS;",
          "content_same": false
        },
        {
          "line": 575,
          "old_api": "resetNextRowsKeeper",
          "new_api": null,
          "old_text": "resetNextRowsKeeper(pInfo)",
          "new_text": null,
          "old_line_content": "  resetNextRowsKeeper(pInfo);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 576,
          "old_api": "resetFillLinearInfo",
          "new_api": null,
          "old_text": "resetFillLinearInfo(pInfo)",
          "new_text": null,
          "old_line_content": "  resetFillLinearInfo(pInfo);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 586,
          "old_api": "taosArrayGet",
          "new_api": null,
          "old_text": "taosArrayGet(pBlock->pDataBlock, pSliceInfo->tsCol.slotId)",
          "new_text": null,
          "old_line_content": "  SColumnInfoData* pTsCol = taosArrayGet(pBlock->pDataBlock, pSliceInfo->tsCol.slotId);",
          "new_line_content": "                            SExecTaskInfo* pTaskInfo) {",
          "content_same": false
        },
        {
          "line": 588,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pTsCol, i)",
          "new_text": null,
          "old_line_content": "    int64_t ts = *(int64_t*)colDataGetData(pTsCol, i);",
          "new_line_content": "  SInterval*   pInterval = &pSliceInfo->interval;",
          "content_same": false
        },
        {
          "line": 591,
          "old_api": "checkDuplicateTimestamps",
          "new_api": null,
          "old_text": "checkDuplicateTimestamps(pSliceInfo, pTsCol, i, pBlock->info.rows)",
          "new_text": null,
          "old_line_content": "    if (checkDuplicateTimestamps(pSliceInfo, pTsCol, i, pBlock->info.rows)) {",
          "new_line_content": "  for (int32_t i = 0; i < pBlock->info.rows; ++i) {",
          "content_same": false
        },
        {
          "line": 600,
          "old_api": "addCurrentRowToResult",
          "new_api": null,
          "old_text": "addCurrentRowToResult(pSliceInfo, &pOperator->exprSupp, pResBlock, pBlock, i)",
          "new_text": null,
          "old_line_content": "      addCurrentRowToResult(pSliceInfo, &pOperator->exprSupp, pResBlock, pBlock, i);",
          "new_line_content": "      break;",
          "content_same": false
        },
        {
          "line": 602,
          "old_api": "doKeepPrevRows",
          "new_api": null,
          "old_text": "doKeepPrevRows(pSliceInfo, pBlock, i)",
          "new_text": null,
          "old_line_content": "      doKeepPrevRows(pSliceInfo, pBlock, i);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 603,
          "old_api": "doKeepLinearInfo",
          "new_api": null,
          "old_text": "doKeepLinearInfo(pSliceInfo, pBlock, i)",
          "new_text": null,
          "old_line_content": "      doKeepLinearInfo(pSliceInfo, pBlock, i);",
          "new_line_content": "    if (ts == pSliceInfo->current) {",
          "content_same": false
        },
        {
          "line": 612,
          "old_api": "doKeepPrevRows",
          "new_api": null,
          "old_text": "doKeepPrevRows(pSliceInfo, pBlock, i)",
          "new_text": null,
          "old_line_content": "      doKeepPrevRows(pSliceInfo, pBlock, i);",
          "new_line_content": "        break;",
          "content_same": false
        },
        {
          "line": 613,
          "old_api": "doKeepLinearInfo",
          "new_api": null,
          "old_text": "doKeepLinearInfo(pSliceInfo, pBlock, i)",
          "new_text": null,
          "old_line_content": "      doKeepLinearInfo(pSliceInfo, pBlock, i);",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 618,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pTsCol, i + 1)",
          "new_text": null,
          "old_line_content": "        int64_t nextTs = *(int64_t*)colDataGetData(pTsCol, i + 1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 637,
          "old_api": "doKeepPrevRows",
          "new_api": null,
          "old_text": "doKeepPrevRows(pSliceInfo, pBlock, i)",
          "new_text": null,
          "old_line_content": "        doKeepPrevRows(pSliceInfo, pBlock, i);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 642,
          "old_api": "doKeepLinearInfo",
          "new_api": null,
          "old_text": "doKeepLinearInfo(pSliceInfo, pBlock, i)",
          "new_text": null,
          "old_line_content": "      doKeepLinearInfo(pSliceInfo, pBlock, i);",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 650,
          "old_api": "taosTimeAdd",
          "new_api": null,
          "old_text": "taosTimeAdd(pSliceInfo->current, pInterval->interval, pInterval->intervalUnit, pInterval->precision)",
          "new_text": null,
          "old_line_content": "              taosTimeAdd(pSliceInfo->current, pInterval->interval, pInterval->intervalUnit, pInterval->precision);",
          "new_line_content": "            pSliceInfo->fillType == TSDB_FILL_LINEAR) {",
          "content_same": false
        },
        {
          "line": 656,
          "old_api": "addCurrentRowToResult",
          "new_api": null,
          "old_text": "addCurrentRowToResult(pSliceInfo, &pOperator->exprSupp, pResBlock, pBlock, i)",
          "new_text": null,
          "old_line_content": "        addCurrentRowToResult(pSliceInfo, &pOperator->exprSupp, pResBlock, pBlock, i);",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 659,
          "old_api": "taosTimeAdd",
          "new_api": null,
          "old_text": "taosTimeAdd(pSliceInfo->current, pInterval->interval, pInterval->intervalUnit, pInterval->precision)",
          "new_text": null,
          "old_line_content": "            taosTimeAdd(pSliceInfo->current, pInterval->interval, pInterval->intervalUnit, pInterval->precision);",
          "new_line_content": "      if (ts == pSliceInfo->current && pSliceInfo->current <= pSliceInfo->win.ekey) {",
          "content_same": false
        },
        {
          "line": 661,
          "old_api": "doKeepPrevRows",
          "new_api": null,
          "old_text": "doKeepPrevRows(pSliceInfo, pBlock, i)",
          "new_text": null,
          "old_line_content": "      doKeepPrevRows(pSliceInfo, pBlock, i);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 676,
          "old_api": "genInterpolationResult",
          "new_api": null,
          "old_text": "genInterpolationResult(pSliceInfo, &pOperator->exprSupp, pResBlock, NULL, index, false)",
          "new_text": null,
          "old_line_content": "    genInterpolationResult(pSliceInfo, &pOperator->exprSupp, pResBlock, NULL, index, false);",
          "new_line_content": "  SInterval*   pInterval = &pSliceInfo->interval;",
          "content_same": false
        },
        {
          "line": 678,
          "old_api": "taosTimeAdd",
          "new_api": null,
          "old_text": "taosTimeAdd(pSliceInfo->current, pInterval->interval, pInterval->intervalUnit, pInterval->precision)",
          "new_text": null,
          "old_line_content": "        taosTimeAdd(pSliceInfo->current, pInterval->interval, pInterval->intervalUnit, pInterval->precision);",
          "new_line_content": "  while (pSliceInfo->current <= pSliceInfo->win.ekey && pSliceInfo->fillType != TSDB_FILL_NEXT &&",
          "content_same": false
        },
        {
          "line": 686,
          "old_api": "isGroupKeyFunc",
          "new_api": null,
          "old_text": "isGroupKeyFunc(pExprInfo)",
          "new_text": null,
          "old_line_content": "    if (isGroupKeyFunc(pExprInfo)) {",
          "new_line_content": "static void copyPrevGroupKey(SExprSupp* pExprSup, SGroupKeys* pGroupKey, SSDataBlock* pSrcBlock) {",
          "content_same": false
        },
        {
          "line": 688,
          "old_api": "taosArrayGet",
          "new_api": null,
          "old_text": "taosArrayGet(pSrcBlock->pDataBlock, srcSlot)",
          "new_text": null,
          "old_line_content": "      SColumnInfoData* pSrc = taosArrayGet(pSrcBlock->pDataBlock, srcSlot);",
          "new_line_content": "    SExprInfo* pExprInfo = &pExprSup->pExprInfo[j];",
          "content_same": false
        },
        {
          "line": 695,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pSrc, 0)",
          "new_text": null,
          "old_line_content": "      char* v = colDataGetData(pSrc, 0);",
          "new_line_content": "        pGroupKey->isNull = true;",
          "content_same": false
        },
        {
          "line": 696,
          "old_api": "IS_VAR_DATA_TYPE",
          "new_api": null,
          "old_text": "IS_VAR_DATA_TYPE(pGroupKey->type)",
          "new_text": null,
          "old_line_content": "      if (IS_VAR_DATA_TYPE(pGroupKey->type)) {",
          "new_line_content": "        break;",
          "content_same": false
        },
        {
          "line": 697,
          "old_api": "varDataTLen",
          "new_api": null,
          "old_text": "varDataTLen(v)",
          "new_text": null,
          "old_line_content": "        memcpy(pGroupKey->pData, v, varDataTLen(v));",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 187,
          "old_api": "colDataGetData",
          "new_api": null,
          "old_text": "colDataGetData(pTsCol, curIndex + 1)",
          "new_text": null,
          "old_line_content": "    int64_t nextTs = *(int64_t*)colDataGetData(pTsCol, curIndex + 1);",
          "new_line_content": "  pSliceInfo->prevTsSet = true;",
          "content_same": false
        },
        {
          "line": 711,
          "old_api": "resetKeeperInfo",
          "new_api": null,
          "old_text": "resetKeeperInfo(pSliceInfo)",
          "new_text": null,
          "old_line_content": "  resetKeeperInfo(pSliceInfo);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 209,
          "old_api": "timeSliceEnsureBlockCapacity",
          "new_api": null,
          "old_text": "timeSliceEnsureBlockCapacity(pSliceInfo, pResBlock)",
          "new_text": null,
          "old_line_content": "  timeSliceEnsureBlockCapacity(pSliceInfo, pResBlock);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 729,
          "old_api": "blockDataCleanup",
          "new_api": null,
          "old_text": "blockDataCleanup(pResBlock)",
          "new_text": null,
          "old_line_content": "  blockDataCleanup(pResBlock);",
          "new_line_content": "  int32_t        order = TSDB_ORDER_ASC;",
          "content_same": false
        },
        {
          "line": 219,
          "old_api": "taosArrayGet",
          "new_api": null,
          "old_text": "taosArrayGet(pResBlock->pDataBlock, dstSlot)",
          "new_text": null,
          "old_line_content": "    SColumnInfoData* pDst = taosArrayGet(pResBlock->pDataBlock, dstSlot);",
          "new_line_content": "  for (int32_t j = 0; j < pExprSup->numOfExprs; ++j) {",
          "content_same": false
        },
        {
          "line": 221,
          "old_api": "isIrowtsPseudoColumn",
          "new_api": null,
          "old_text": "isIrowtsPseudoColumn(pExprInfo)",
          "new_text": null,
          "old_line_content": "    if (isIrowtsPseudoColumn(pExprInfo)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 222,
          "old_api": "colDataSetVal",
          "new_api": null,
          "old_text": "colDataSetVal(pDst, rows, (char*)&pSliceInfo->current, false)",
          "new_text": null,
          "old_line_content": "      colDataSetVal(pDst, rows, (char*)&pSliceInfo->current, false);",
          "new_line_content": "    int32_t       dstSlot = pExprInfo->base.resSchema.slotId;",
          "content_same": false
        },
        {
          "line": 734,
          "old_api": "doTimesliceImpl",
          "new_api": null,
          "old_text": "doTimesliceImpl(pOperator, pSliceInfo, pSliceInfo->pNextGroupRes, pTaskInfo)",
          "new_text": null,
          "old_line_content": "      doTimesliceImpl(pOperator, pSliceInfo, pSliceInfo->pNextGroupRes, pTaskInfo);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 224,
          "old_api": "isIsfilledPseudoColumn",
          "new_api": null,
          "old_text": "isIsfilledPseudoColumn(pExprInfo)",
          "new_text": null,
          "old_line_content": "    } else if (isIsfilledPseudoColumn(pExprInfo)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 735,
          "old_api": "copyPrevGroupKey",
          "new_api": null,
          "old_text": "copyPrevGroupKey(&pOperator->exprSupp, pSliceInfo->pPrevGroupKey, pSliceInfo->pNextGroupRes)",
          "new_text": null,
          "old_line_content": "      copyPrevGroupKey(&pOperator->exprSupp, pSliceInfo->pPrevGroupKey, pSliceInfo->pNextGroupRes);",
          "new_line_content": "  while (1) {",
          "content_same": false
        },
        {
          "line": 740,
          "old_api": "getNextFn",
          "new_api": null,
          "old_text": "downstream->fpSet.getNextFn(downstream)",
          "new_text": null,
          "old_line_content": "      SSDataBlock* pBlock = downstream->fpSet.getNextFn(downstream);",
          "new_line_content": "      pSliceInfo->pNextGroupRes = NULL;",
          "content_same": false
        },
        {
          "line": 229,
          "old_api": "isGroupKeyFunc",
          "new_api": null,
          "old_text": "isGroupKeyFunc(pExprInfo)",
          "new_text": null,
          "old_line_content": "      if (isGroupKeyFunc(pExprInfo)) {",
          "new_line_content": "      bool isFilled = true;",
          "content_same": false
        },
        {
          "line": 742,
          "old_api": "setOperatorCompleted",
          "new_api": null,
          "old_text": "setOperatorCompleted(pOperator)",
          "new_text": null,
          "old_line_content": "        setOperatorCompleted(pOperator);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 234,
          "old_api": "colDataIsNull_s",
          "new_api": null,
          "old_text": "colDataIsNull_s(pSrc, index)",
          "new_text": null,
          "old_line_content": "          if (colDataIsNull_s(pSrc, index)) {",
          "new_line_content": "        if (pSrcBlock != NULL) {",
          "content_same": false
        },
        {
          "line": 235,
          "old_api": "colDataSetNULL",
          "new_api": null,
          "old_text": "colDataSetNULL(pDst, pResBlock->info.rows)",
          "new_text": null,
          "old_line_content": "            colDataSetNULL(pDst, pResBlock->info.rows);",
          "new_line_content": "          int32_t       srcSlot = pExprInfo->base.pParam[0].pCol->slotId;",
          "content_same": false
        },
        {
          "line": 240,
          "old_api": "colDataSetVal",
          "new_api": null,
          "old_text": "colDataSetVal(pDst, pResBlock->info.rows, v, false)",
          "new_text": null,
          "old_line_content": "          colDataSetVal(pDst, pResBlock->info.rows, v, false);",
          "new_line_content": "            continue;",
          "content_same": false
        },
        {
          "line": 245,
          "old_api": "colDataSetVal",
          "new_api": null,
          "old_text": "colDataSetVal(pDst, rows, pkey->pData, false)",
          "new_text": null,
          "old_line_content": "            colDataSetVal(pDst, rows, pkey->pData, false);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 758,
          "old_api": "projectApplyFunctions",
          "new_api": null,
          "old_text": "projectApplyFunctions(pExprSup->pExprInfo, pBlock, pBlock, pExprSup->pCtx, pExprSup->numOfExprs, NULL)",
          "new_text": null,
          "old_line_content": "        projectApplyFunctions(pExprSup->pExprInfo, pBlock, pBlock, pExprSup->pCtx, pExprSup->numOfExprs, NULL);",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 247,
          "old_api": "colDataSetNULL",
          "new_api": null,
          "old_text": "colDataSetNULL(pDst, rows)",
          "new_text": null,
          "old_line_content": "            colDataSetNULL(pDst, rows);",
          "new_line_content": "          SGroupKeys* pkey = pSliceInfo->pPrevGroupKey;",
          "content_same": false
        },
        {
          "line": 761,
          "old_api": "initKeeperInfo",
          "new_api": null,
          "old_text": "initKeeperInfo(pSliceInfo, pBlock, &pOperator->exprSupp)",
          "new_text": null,
          "old_line_content": "      int32_t code = initKeeperInfo(pSliceInfo, pBlock, &pOperator->exprSupp);",
          "new_line_content": "        SExprSupp* pExprSup = &pSliceInfo->scalarSup;",
          "content_same": false
        },
        {
          "line": 763,
          "old_api": "T_LONG_JMP",
          "new_api": null,
          "old_text": "T_LONG_JMP(pTaskInfo->env, code)",
          "new_text": null,
          "old_line_content": "        T_LONG_JMP(pTaskInfo->env, code);",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 768,
          "old_api": "doTimesliceImpl",
          "new_api": null,
          "old_text": "doTimesliceImpl(pOperator, pSliceInfo, pBlock, pTaskInfo)",
          "new_text": null,
          "old_line_content": "      doTimesliceImpl(pOperator, pSliceInfo, pBlock, pTaskInfo);",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 769,
          "old_api": "copyPrevGroupKey",
          "new_api": null,
          "old_text": "copyPrevGroupKey(&pOperator->exprSupp, pSliceInfo->pPrevGroupKey, pBlock)",
          "new_text": null,
          "old_line_content": "      copyPrevGroupKey(&pOperator->exprSupp, pSliceInfo->pPrevGroupKey, pBlock);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 258,
          "old_api": "colDataSetNULL",
          "new_api": null,
          "old_text": "colDataSetNULL(pDst, rows)",
          "new_text": null,
          "old_line_content": "        colDataSetNULL(pDst, rows);",
          "new_line_content": "    int32_t srcSlot = pExprInfo->base.pParam[0].pCol->slotId;",
          "content_same": false
        },
        {
          "line": 774,
          "old_api": "genInterpAfterDataBlock",
          "new_api": null,
          "old_text": "genInterpAfterDataBlock(pSliceInfo, pOperator, 0)",
          "new_text": null,
          "old_line_content": "    genInterpAfterDataBlock(pSliceInfo, pOperator, 0);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 776,
          "old_api": "doFilter",
          "new_api": null,
          "old_text": "doFilter(pResBlock, pOperator->exprSupp.pFilterInfo, NULL)",
          "new_text": null,
          "old_line_content": "    doFilter(pResBlock, pOperator->exprSupp.pFilterInfo, NULL);",
          "new_line_content": "    // check if need to interpolate after last datablock",
          "content_same": false
        },
        {
          "line": 269,
          "old_api": "colDataSetVal",
          "new_api": null,
          "old_text": "colDataSetVal(pDst, rows, (char*)&v, false)",
          "new_text": null,
          "old_line_content": "          colDataSetVal(pDst, rows, (char*)&v, false);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 782,
          "old_api": "resetTimesliceInfo",
          "new_api": null,
          "old_text": "resetTimesliceInfo(pSliceInfo)",
          "new_text": null,
          "old_line_content": "    resetTimesliceInfo(pSliceInfo);",
          "new_line_content": "      break;",
          "content_same": false
        },
        {
          "line": 274,
          "old_api": "IS_SIGNED_NUMERIC_TYPE",
          "new_api": null,
          "old_text": "IS_SIGNED_NUMERIC_TYPE(pDst->info.type)",
          "new_text": null,
          "old_line_content": "        } else if (IS_SIGNED_NUMERIC_TYPE(pDst->info.type)) {",
          "new_line_content": "        } else if (pDst->info.type == TSDB_DATA_TYPE_DOUBLE) {",
          "content_same": false
        },
        {
          "line": 280,
          "old_api": "IS_VAR_DATA_TYPE",
          "new_api": null,
          "old_text": "IS_VAR_DATA_TYPE(pVar->nType)",
          "new_text": null,
          "old_line_content": "          if (!IS_VAR_DATA_TYPE(pVar->nType)) {",
          "new_line_content": "          GET_TYPED_DATA(v, int64_t, pVar->nType, &pVar->i);",
          "content_same": false
        },
        {
          "line": 283,
          "old_api": "varDataVal",
          "new_api": null,
          "old_text": "varDataVal(pVar->pz)",
          "new_text": null,
          "old_line_content": "            v = taosStr2Int8(varDataVal(pVar->pz), NULL, 10);",
          "new_line_content": "          bool v = false;",
          "content_same": false
        },
        {
          "line": 795,
          "old_api": "taosMemoryCalloc",
          "new_api": null,
          "old_text": "taosMemoryCalloc(1, sizeof(STimeSliceOperatorInfo))",
          "new_text": null,
          "old_line_content": "  STimeSliceOperatorInfo* pInfo = taosMemoryCalloc(1, sizeof(STimeSliceOperatorInfo));",
          "new_line_content": "  return pResBlock->info.rows == 0 ? NULL : pResBlock;",
          "content_same": false
        },
        {
          "line": 285,
          "old_api": "colDataSetVal",
          "new_api": null,
          "old_text": "colDataSetVal(pDst, rows, (char*)&v, false)",
          "new_text": null,
          "old_line_content": "          colDataSetVal(pDst, rows, (char*)&v, false);",
          "new_line_content": "            GET_TYPED_DATA(v, bool, pVar->nType, &pVar->i);",
          "content_same": false
        },
        {
          "line": 796,
          "old_api": "taosMemoryCalloc",
          "new_api": null,
          "old_text": "taosMemoryCalloc(1, sizeof(SOperatorInfo))",
          "new_text": null,
          "old_line_content": "  SOperatorInfo*          pOperator = taosMemoryCalloc(1, sizeof(SOperatorInfo));",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 291,
          "old_api": "taosArrayGet",
          "new_api": null,
          "old_text": "taosArrayGet(pSliceInfo->pLinearInfo, srcSlot)",
          "new_text": null,
          "old_line_content": "        SFillLinearInfo* pLinearInfo = taosArrayGet(pSliceInfo->pLinearInfo, srcSlot);",
          "new_line_content": "        break;",
          "content_same": false
        },
        {
          "line": 805,
          "old_api": "createExprInfo",
          "new_api": null,
          "old_text": "createExprInfo(pInterpPhyNode->pFuncs, NULL, &numOfExprs)",
          "new_text": null,
          "old_line_content": "  SExprInfo* pExprInfo = createExprInfo(pInterpPhyNode->pFuncs, NULL, &numOfExprs);",
          "new_line_content": "  SInterpFuncPhysiNode* pInterpPhyNode = (SInterpFuncPhysiNode*)pPhyNode;",
          "content_same": false
        },
        {
          "line": 806,
          "old_api": "initExprSupp",
          "new_api": null,
          "old_text": "initExprSupp(pSup, pExprInfo, numOfExprs)",
          "new_text": null,
          "old_line_content": "  int32_t    code = initExprSupp(pSup, pExprInfo, numOfExprs);",
          "new_line_content": "  SExprSupp*            pSup = &pOperator->exprSupp;",
          "content_same": false
        },
        {
          "line": 813,
          "old_api": "createExprInfo",
          "new_api": null,
          "old_text": "createExprInfo(pInterpPhyNode->pExprs, NULL, &num)",
          "new_text": null,
          "old_line_content": "    SExprInfo* pScalarExprInfo = createExprInfo(pInterpPhyNode->pExprs, NULL, &num);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 814,
          "old_api": "initExprSupp",
          "new_api": null,
          "old_text": "initExprSupp(&pInfo->scalarSup, pScalarExprInfo, num)",
          "new_text": null,
          "old_line_content": "    code = initExprSupp(&pInfo->scalarSup, pScalarExprInfo, num);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 308,
          "old_api": "colDataSetNULL",
          "new_api": null,
          "old_text": "colDataSetNULL(pDst, rows)",
          "new_text": null,
          "old_line_content": "          colDataSetNULL(pDst, rows);",
          "new_line_content": "          break;",
          "content_same": false
        },
        {
          "line": 820,
          "old_api": "filterInitFromNode",
          "new_api": null,
          "old_text": "filterInitFromNode((SNode*)pInterpPhyNode->node.pConditions, &pOperator->exprSupp.pFilterInfo, 0)",
          "new_text": null,
          "old_line_content": "  code = filterInitFromNode((SNode*)pInterpPhyNode->node.pConditions, &pOperator->exprSupp.pFilterInfo, 0);",
          "new_line_content": "      goto _error;",
          "content_same": false
        },
        {
          "line": 313,
          "old_api": "taosGetLinearInterpolationVal",
          "new_api": null,
          "old_text": "taosGetLinearInterpolationVal(&current, pLinearInfo->type, &start, &end, pLinearInfo->type)",
          "new_text": null,
          "old_line_content": "        taosGetLinearInterpolationVal(&current, pLinearInfo->type, &start, &end, pLinearInfo->type);",
          "new_line_content": "          break;",
          "content_same": false
        },
        {
          "line": 314,
          "old_api": "colDataSetVal",
          "new_api": null,
          "old_text": "colDataSetVal(pDst, rows, (char*)current.val, false)",
          "new_text": null,
          "old_line_content": "        colDataSetVal(pDst, rows, (char*)current.val, false);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 825,
          "old_api": "extractColumnFromColumnNode",
          "new_api": null,
          "old_text": "extractColumnFromColumnNode((SColumnNode*)pInterpPhyNode->pTimeSeries)",
          "new_text": null,
          "old_line_content": "  pInfo->tsCol = extractColumnFromColumnNode((SColumnNode*)pInterpPhyNode->pTimeSeries);",
          "new_line_content": "  if (code != TSDB_CODE_SUCCESS) {",
          "content_same": false
        },
        {
          "line": 826,
          "old_api": "convertFillType",
          "new_api": null,
          "old_text": "convertFillType(pInterpPhyNode->fillMode)",
          "new_text": null,
          "old_line_content": "  pInfo->fillType = convertFillType(pInterpPhyNode->fillMode);",
          "new_line_content": "    goto _error;",
          "content_same": false
        },
        {
          "line": 827,
          "old_api": "initResultSizeInfo",
          "new_api": null,
          "old_text": "initResultSizeInfo(&pOperator->resultInfo, 4096)",
          "new_text": null,
          "old_line_content": "  initResultSizeInfo(&pOperator->resultInfo, 4096);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 325,
          "old_api": "taosArrayGet",
          "new_api": null,
          "old_text": "taosArrayGet(pSliceInfo->pPrevRow, srcSlot)",
          "new_text": null,
          "old_line_content": "        SGroupKeys* pkey = taosArrayGet(pSliceInfo->pPrevRow, srcSlot);",
          "new_line_content": "          hasInterp = false;",
          "content_same": false
        },
        {
          "line": 327,
          "old_api": "colDataSetVal",
          "new_api": null,
          "old_text": "colDataSetVal(pDst, rows, pkey->pData, false)",
          "new_text": null,
          "old_line_content": "          colDataSetVal(pDst, rows, pkey->pData, false);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 847,
          "old_api": "setOperatorInfo",
          "new_api": null,
          "old_text": "setOperatorInfo(pOperator, \"TimeSliceOperator\", QUERY_NODE_PHYSICAL_PLAN_INTERP_FUNC, false, OP_NOT_OPENED, pInfo,\n                  pTaskInfo)",
          "new_text": null,
          "old_line_content": "  setOperatorInfo(pOperator, \"TimeSliceOperator\", QUERY_NODE_PHYSICAL_PLAN_INTERP_FUNC, false, OP_NOT_OPENED, pInfo,",
          "new_line_content": "    pScanInfo->base.cond.twindows = pInfo->win;",
          "content_same": false
        },
        {
          "line": 850,
          "old_api": "createOperatorFpSet",
          "new_api": null,
          "old_text": "createOperatorFpSet(optrDummyOpenFn, doTimeslice, NULL, destroyTimeSliceOperatorInfo, optrDefaultBufFn, NULL)",
          "new_text": null,
          "old_line_content": "      createOperatorFpSet(optrDummyOpenFn, doTimeslice, NULL, destroyTimeSliceOperatorInfo, optrDefaultBufFn, NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 340,
          "old_api": "taosArrayGet",
          "new_api": null,
          "old_text": "taosArrayGet(pSliceInfo->pNextRow, srcSlot)",
          "new_text": null,
          "old_line_content": "        SGroupKeys* pkey = taosArrayGet(pSliceInfo->pNextRow, srcSlot);",
          "new_line_content": "          hasInterp = false;",
          "content_same": false
        },
        {
          "line": 852,
          "old_api": "blockDataEnsureCapacity",
          "new_api": null,
          "old_text": "blockDataEnsureCapacity(pInfo->pRes, pOperator->resultInfo.capacity)",
          "new_text": null,
          "old_line_content": "  blockDataEnsureCapacity(pInfo->pRes, pOperator->resultInfo.capacity);",
          "new_line_content": "                  pTaskInfo);",
          "content_same": false
        },
        {
          "line": 342,
          "old_api": "colDataSetVal",
          "new_api": null,
          "old_text": "colDataSetVal(pDst, rows, pkey->pData, false)",
          "new_text": null,
          "old_line_content": "          colDataSetVal(pDst, rows, pkey->pData, false);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 859,
          "old_api": "taosMemoryFree",
          "new_api": null,
          "old_text": "taosMemoryFree(pOperator)",
          "new_text": null,
          "old_line_content": "  taosMemoryFree(pOperator);",
          "new_line_content": "  return pOperator;",
          "content_same": false
        },
        {
          "line": 867,
          "old_api": "blockDataDestroy",
          "new_api": null,
          "old_text": "blockDataDestroy(pInfo->pRes)",
          "new_text": null,
          "old_line_content": "  pInfo->pRes = blockDataDestroy(pInfo->pRes);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 869,
          "old_api": "taosArrayGetSize",
          "new_api": null,
          "old_text": "taosArrayGetSize(pInfo->pPrevRow)",
          "new_text": null,
          "old_line_content": "  for (int32_t i = 0; i < taosArrayGetSize(pInfo->pPrevRow); ++i) {",
          "new_line_content": "  STimeSliceOperatorInfo* pInfo = (STimeSliceOperatorInfo*)param;",
          "content_same": false
        },
        {
          "line": 870,
          "old_api": "taosArrayGet",
          "new_api": null,
          "old_text": "taosArrayGet(pInfo->pPrevRow, i)",
          "new_text": null,
          "old_line_content": "    SGroupKeys* pKey = taosArrayGet(pInfo->pPrevRow, i);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 364,
          "old_api": "timeSliceEnsureBlockCapacity",
          "new_api": null,
          "old_text": "timeSliceEnsureBlockCapacity(pSliceInfo, pResBlock)",
          "new_text": null,
          "old_line_content": "  timeSliceEnsureBlockCapacity(pSliceInfo, pResBlock);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 876,
          "old_api": "taosArrayGet",
          "new_api": null,
          "old_text": "taosArrayGet(pInfo->pNextRow, i)",
          "new_text": null,
          "old_line_content": "    SGroupKeys* pKey = taosArrayGet(pInfo->pNextRow, i);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 369,
          "old_api": "taosArrayGet",
          "new_api": null,
          "old_text": "taosArrayGet(pResBlock->pDataBlock, dstSlot)",
          "new_text": null,
          "old_line_content": "    SColumnInfoData* pDst = taosArrayGet(pResBlock->pDataBlock, dstSlot);",
          "new_line_content": "  for (int32_t j = 0; j < pExprSup->numOfExprs; ++j) {",
          "content_same": false
        },
        {
          "line": 882,
          "old_api": "taosArrayGet",
          "new_api": null,
          "old_text": "taosArrayGet(pInfo->pLinearInfo, i)",
          "new_text": null,
          "old_line_content": "    SFillLinearInfo* pKey = taosArrayGet(pInfo->pLinearInfo, i);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 371,
          "old_api": "isIrowtsPseudoColumn",
          "new_api": null,
          "old_text": "isIrowtsPseudoColumn(pExprInfo)",
          "new_text": null,
          "old_line_content": "    if (isIrowtsPseudoColumn(pExprInfo)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 372,
          "old_api": "colDataSetVal",
          "new_api": null,
          "old_text": "colDataSetVal(pDst, pResBlock->info.rows, (char*)&pSliceInfo->current, false)",
          "new_text": null,
          "old_line_content": "      colDataSetVal(pDst, pResBlock->info.rows, (char*)&pSliceInfo->current, false);",
          "new_line_content": "    int32_t          dstSlot = pExprInfo->base.resSchema.slotId;",
          "content_same": false
        },
        {
          "line": 884,
          "old_api": "taosMemoryFree",
          "new_api": null,
          "old_text": "taosMemoryFree(pKey->end.val)",
          "new_text": null,
          "old_line_content": "    taosMemoryFree(pKey->end.val);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 889,
          "old_api": "taosMemoryFree",
          "new_api": null,
          "old_text": "taosMemoryFree(pInfo->pPrevGroupKey)",
          "new_text": null,
          "old_line_content": "  taosMemoryFree(pInfo->pPrevGroupKey);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 378,
          "old_api": "taosArrayGet",
          "new_api": null,
          "old_text": "taosArrayGet(pSrcBlock->pDataBlock, srcSlot)",
          "new_text": null,
          "old_line_content": "      SColumnInfoData* pSrc = taosArrayGet(pSrcBlock->pDataBlock, srcSlot);",
          "new_line_content": "      bool isFilled = false;",
          "content_same": false
        },
        {
          "line": 891,
          "old_api": "cleanupExprSupp",
          "new_api": null,
          "old_text": "cleanupExprSupp(&pInfo->scalarSup)",
          "new_text": null,
          "old_line_content": "  cleanupExprSupp(&pInfo->scalarSup);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 380,
          "old_api": "colDataIsNull_s",
          "new_api": null,
          "old_text": "colDataIsNull_s(pSrc, index)",
          "new_text": null,
          "old_line_content": "      if (colDataIsNull_s(pSrc, index)) {",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 381,
          "old_api": "colDataSetNULL",
          "new_api": null,
          "old_text": "colDataSetNULL(pDst, pResBlock->info.rows)",
          "new_text": null,
          "old_line_content": "        colDataSetNULL(pDst, pResBlock->info.rows);",
          "new_line_content": "      int32_t       srcSlot = pExprInfo->base.pParam[0].pCol->slotId;",
          "content_same": false
        },
        {
          "line": 894,
          "old_api": "taosVariantDestroy",
          "new_api": null,
          "old_text": "taosVariantDestroy(&pInfo->pFillColInfo[i].fillVal)",
          "new_text": null,
          "old_line_content": "    taosVariantDestroy(&pInfo->pFillColInfo[i].fillVal);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 896,
          "old_api": "taosMemoryFree",
          "new_api": null,
          "old_text": "taosMemoryFree(pInfo->pFillColInfo)",
          "new_text": null,
          "old_line_content": "  taosMemoryFree(pInfo->pFillColInfo);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 897,
          "old_api": "taosMemoryFreeClear",
          "new_api": null,
          "old_text": "taosMemoryFreeClear(param)",
          "new_text": null,
          "old_line_content": "  taosMemoryFreeClear(param);",
          "new_line_content": "  for (int32_t i = 0; i < pInfo->pFillColInfo->numOfFillExpr; ++i) {",
          "content_same": false
        },
        {
          "line": 386,
          "old_api": "colDataSetVal",
          "new_api": null,
          "old_text": "colDataSetVal(pDst, pResBlock->info.rows, v, false)",
          "new_text": null,
          "old_line_content": "      colDataSetVal(pDst, pResBlock->info.rows, v, false);",
          "new_line_content": "        continue;",
          "content_same": false
        },
        {
          "line": 399,
          "old_api": "taosArrayInit",
          "new_api": null,
          "old_text": "taosArrayInit(4, sizeof(SGroupKeys))",
          "new_text": null,
          "old_line_content": "  pInfo->pPrevRow = taosArrayInit(4, sizeof(SGroupKeys));",
          "new_line_content": "  if (pInfo->pPrevRow != NULL) {",
          "content_same": false
        },
        {
          "line": 404,
          "old_api": "taosArrayGetSize",
          "new_api": null,
          "old_text": "taosArrayGetSize(pBlock->pDataBlock)",
          "new_text": null,
          "old_line_content": "  int32_t numOfCols = taosArrayGetSize(pBlock->pDataBlock);",
          "new_line_content": "  if (pInfo->pPrevRow == NULL) {",
          "content_same": false
        },
        {
          "line": 406,
          "old_api": "taosArrayGet",
          "new_api": null,
          "old_text": "taosArrayGet(pBlock->pDataBlock, i)",
          "new_text": null,
          "old_line_content": "    SColumnInfoData* pColInfo = taosArrayGet(pBlock->pDataBlock, i);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 412,
          "old_api": "taosMemoryCalloc",
          "new_api": null,
          "old_text": "taosMemoryCalloc(1, pColInfo->info.bytes)",
          "new_text": null,
          "old_line_content": "    key.pData = taosMemoryCalloc(1, pColInfo->info.bytes);",
          "new_line_content": "    SGroupKeys key = {0};",
          "content_same": false
        },
        {
          "line": 413,
          "old_api": "taosArrayPush",
          "new_api": null,
          "old_text": "taosArrayPush(pInfo->pPrevRow, &key)",
          "new_text": null,
          "old_line_content": "    taosArrayPush(pInfo->pPrevRow, &key);",
          "new_line_content": "    key.bytes = pColInfo->info.bytes;",
          "content_same": false
        },
        {
          "line": 426,
          "old_api": "taosArrayInit",
          "new_api": null,
          "old_text": "taosArrayInit(4, sizeof(SGroupKeys))",
          "new_text": null,
          "old_line_content": "  pInfo->pNextRow = taosArrayInit(4, sizeof(SGroupKeys));",
          "new_line_content": "  if (pInfo->pNextRow != NULL) {",
          "content_same": false
        },
        {
          "line": 431,
          "old_api": "taosArrayGetSize",
          "new_api": null,
          "old_text": "taosArrayGetSize(pBlock->pDataBlock)",
          "new_text": null,
          "old_line_content": "  int32_t numOfCols = taosArrayGetSize(pBlock->pDataBlock);",
          "new_line_content": "  if (pInfo->pNextRow == NULL) {",
          "content_same": false
        },
        {
          "line": 433,
          "old_api": "taosArrayGet",
          "new_api": null,
          "old_text": "taosArrayGet(pBlock->pDataBlock, i)",
          "new_text": null,
          "old_line_content": "    SColumnInfoData* pColInfo = taosArrayGet(pBlock->pDataBlock, i);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 439,
          "old_api": "taosMemoryCalloc",
          "new_api": null,
          "old_text": "taosMemoryCalloc(1, pColInfo->info.bytes)",
          "new_text": null,
          "old_line_content": "    key.pData = taosMemoryCalloc(1, pColInfo->info.bytes);",
          "new_line_content": "    SGroupKeys key = {0};",
          "content_same": false
        },
        {
          "line": 440,
          "old_api": "taosArrayPush",
          "new_api": null,
          "old_text": "taosArrayPush(pInfo->pNextRow, &key)",
          "new_text": null,
          "old_line_content": "    taosArrayPush(pInfo->pNextRow, &key);",
          "new_line_content": "    key.bytes = pColInfo->info.bytes;",
          "content_same": false
        },
        {
          "line": 453,
          "old_api": "taosArrayInit",
          "new_api": null,
          "old_text": "taosArrayInit(4, sizeof(SFillLinearInfo))",
          "new_text": null,
          "old_line_content": "  pInfo->pLinearInfo = taosArrayInit(4, sizeof(SFillLinearInfo));",
          "new_line_content": "  if (pInfo->pLinearInfo != NULL) {",
          "content_same": false
        },
        {
          "line": 458,
          "old_api": "taosArrayGetSize",
          "new_api": null,
          "old_text": "taosArrayGetSize(pBlock->pDataBlock)",
          "new_text": null,
          "old_line_content": "  int32_t numOfCols = taosArrayGetSize(pBlock->pDataBlock);",
          "new_line_content": "  if (pInfo->pLinearInfo == NULL) {",
          "content_same": false
        },
        {
          "line": 460,
          "old_api": "taosArrayGet",
          "new_api": null,
          "old_text": "taosArrayGet(pBlock->pDataBlock, i)",
          "new_text": null,
          "old_line_content": "    SColumnInfoData* pColInfo = taosArrayGet(pBlock->pDataBlock, i);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 465,
          "old_api": "taosMemoryCalloc",
          "new_api": null,
          "old_text": "taosMemoryCalloc(1, pColInfo->info.bytes)",
          "new_text": null,
          "old_line_content": "    linearInfo.start.val = taosMemoryCalloc(1, pColInfo->info.bytes);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 466,
          "old_api": "taosMemoryCalloc",
          "new_api": null,
          "old_text": "taosMemoryCalloc(1, pColInfo->info.bytes)",
          "new_text": null,
          "old_line_content": "    linearInfo.end.val = taosMemoryCalloc(1, pColInfo->info.bytes);",
          "new_line_content": "    SFillLinearInfo linearInfo = {0};",
          "content_same": false
        },
        {
          "line": 471,
          "old_api": "taosArrayPush",
          "new_api": null,
          "old_text": "taosArrayPush(pInfo->pLinearInfo, &linearInfo)",
          "new_text": null,
          "old_line_content": "    taosArrayPush(pInfo->pLinearInfo, &linearInfo);",
          "new_line_content": "    linearInfo.isStartSet = false;",
          "content_same": false
        },
        {
          "line": 482,
          "old_api": "taosMemoryCalloc",
          "new_api": null,
          "old_text": "taosMemoryCalloc(1, sizeof(SGroupKeys))",
          "new_text": null,
          "old_line_content": "  pInfo->pPrevGroupKey = taosMemoryCalloc(1, sizeof(SGroupKeys));",
          "new_line_content": "  if (pInfo->pPrevGroupKey != NULL) {",
          "content_same": false
        },
        {
          "line": 490,
          "old_api": "isGroupKeyFunc",
          "new_api": null,
          "old_text": "isGroupKeyFunc(pExprInfo)",
          "new_text": null,
          "old_line_content": "    if (isGroupKeyFunc(pExprInfo)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 503,
          "old_api": "initPrevRowsKeeper",
          "new_api": null,
          "old_text": "initPrevRowsKeeper(pInfo, pBlock)",
          "new_text": null,
          "old_line_content": "  code = initPrevRowsKeeper(pInfo, pBlock);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 508,
          "old_api": "initNextRowsKeeper",
          "new_api": null,
          "old_text": "initNextRowsKeeper(pInfo, pBlock)",
          "new_text": null,
          "old_line_content": "  code = initNextRowsKeeper(pInfo, pBlock);",
          "new_line_content": "  if (code != TSDB_CODE_SUCCESS) {",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 37,
      "total_additions": 126,
      "total_deletions": 126,
      "total_api_changes": 289
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 6,
        "api_related_lines": 289,
        "non_api_lines": 6,
        "non_api_line_numbers": [
          179,
          180,
          181,
          182,
          186,
          190
        ]
      }
    },
    "api_calls_before": 226,
    "api_calls_after": 226,
    "diff_info": {
      "added_lines": 5,
      "removed_lines": 1,
      "total_diff_lines": 25
    }
  }
}
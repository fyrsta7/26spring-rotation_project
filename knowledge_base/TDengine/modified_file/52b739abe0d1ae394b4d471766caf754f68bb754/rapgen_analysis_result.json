{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/TDengine/modified_file/52b739abe0d1ae394b4d471766caf754f68bb754",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/TDengine/modified_file/52b739abe0d1ae394b4d471766caf754f68bb754/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/TDengine/modified_file/52b739abe0d1ae394b4d471766caf754f68bb754/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/TDengine/modified_file/52b739abe0d1ae394b4d471766caf754f68bb754/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 751,
          "old_api": "tscGetQueryInfoDetail",
          "new_api": "tStrGetToken",
          "old_text": "tscGetQueryInfoDetail(pCmd, 0)",
          "new_text": "tStrGetToken(sql, &index, false)",
          "old_line_content": "  SQueryInfo *pQueryInfo = tscGetQueryInfoDetail(pCmd, 0);",
          "new_line_content": "  tableToken = tStrGetToken(sql, &index, false);",
          "content_same": false
        },
        {
          "line": 785,
          "old_api": "tStrGetToken",
          "new_api": "tscGetMetaInfo",
          "old_text": "tStrGetToken(sql, &index, false)",
          "new_text": "tscGetMetaInfo(pQueryInfo, TABLE_INDEX)",
          "old_line_content": "    sToken = tStrGetToken(sql, &index, false);",
          "new_line_content": "  STableMetaInfo* pTableMetaInfo = tscGetMetaInfo(pQueryInfo, TABLE_INDEX);",
          "content_same": false
        },
        {
          "line": 797,
          "old_api": "tStrGetToken",
          "new_api": "tscGetMetaInfo",
          "old_text": "tStrGetToken(sql, &index, false)",
          "new_text": "tscGetMetaInfo(pQueryInfo, STABLE_INDEX)",
          "old_line_content": "    sToken = tStrGetToken(sql, &index, false);",
          "new_line_content": "    STableMetaInfo *pSTableMetaInfo = tscGetMetaInfo(pQueryInfo, STABLE_INDEX);",
          "content_same": false
        },
        {
          "line": 806,
          "old_api": "tscSetTableFullName",
          "new_api": "tscGetTableMeta",
          "old_text": "tscSetTableFullName(pSTableMetaInfo, &sToken, pSql)",
          "new_text": "tscGetTableMeta(pSql, pSTableMetaInfo)",
          "old_line_content": "    code = tscSetTableFullName(pSTableMetaInfo, &sToken, pSql);",
          "new_line_content": "    code = tscGetTableMeta(pSql, pSTableMetaInfo);",
          "content_same": false
        },
        {
          "line": 811,
          "old_api": "tNameExtractFullName",
          "new_api": "UTIL_TABLE_IS_SUPER_TABLE",
          "old_text": "tNameExtractFullName(&pSTableMetaInfo->name, pCmd->tagData.name)",
          "new_text": "UTIL_TABLE_IS_SUPER_TABLE(pSTableMetaInfo)",
          "old_line_content": "    tNameExtractFullName(&pSTableMetaInfo->name, pCmd->tagData.name);",
          "new_line_content": "    if (!UTIL_TABLE_IS_SUPER_TABLE(pSTableMetaInfo)) {",
          "content_same": false
        },
        {
          "line": 819,
          "old_api": "UTIL_TABLE_IS_SUPER_TABLE",
          "new_api": "tscGetNumOfTags",
          "old_text": "UTIL_TABLE_IS_SUPER_TABLE(pSTableMetaInfo)",
          "new_text": "tscGetNumOfTags(pSTableMetaInfo->pTableMeta)",
          "old_line_content": "    if (!UTIL_TABLE_IS_SUPER_TABLE(pSTableMetaInfo)) {",
          "new_line_content": "    tscSetBoundColumnInfo(&spd, pTagSchema, tscGetNumOfTags(pSTableMetaInfo->pTableMeta));",
          "content_same": false
        },
        {
          "line": 824,
          "old_api": "tscGetTableInfo",
          "new_api": "tscInvalidSQLErrMsg",
          "old_text": "tscGetTableInfo(pSTableMetaInfo->pTableMeta)",
          "new_text": "tscInvalidSQLErrMsg(pCmd->payload, \"keyword TAGS expected\", sToken.z)",
          "old_line_content": "    STableComInfo tinfo = tscGetTableInfo(pSTableMetaInfo->pTableMeta);",
          "new_line_content": "      return tscInvalidSQLErrMsg(pCmd->payload, \"keyword TAGS expected\", sToken.z);",
          "content_same": false
        },
        {
          "line": 842,
          "old_api": "parseBoundColumns",
          "new_api": "tStrGetToken",
          "old_text": "parseBoundColumns(pCmd, &spd, pTagSchema, sql, &end)",
          "new_text": "tStrGetToken(sql, &index, false)",
          "old_line_content": "      code = parseBoundColumns(pCmd, &spd, pTagSchema, sql, &end);",
          "new_line_content": "      sToken = tStrGetToken(sql, &index, false);",
          "content_same": false
        },
        {
          "line": 857,
          "old_api": "tStrGetToken",
          "new_api": "tdInitKVRowBuilder",
          "old_text": "tStrGetToken(sql, &index, false)",
          "new_text": "tdInitKVRowBuilder(&kvRowBuilder)",
          "old_line_content": "    sToken = tStrGetToken(sql, &index, false);",
          "new_line_content": "    if (tdInitKVRowBuilder(&kvRowBuilder) < 0) {",
          "content_same": false
        },
        {
          "line": 865,
          "old_api": "tdInitKVRowBuilder",
          "new_api": "tStrGetToken",
          "old_text": "tdInitKVRowBuilder(&kvRowBuilder)",
          "new_text": "tStrGetToken(sql, &index, true)",
          "old_line_content": "    if (tdInitKVRowBuilder(&kvRowBuilder) < 0) {",
          "new_line_content": "      sToken = tStrGetToken(sql, &index, true);",
          "content_same": false
        },
        {
          "line": 898,
          "old_api": "tdAddColToKVRow",
          "new_api": "tscInvalidSQLErrMsg",
          "old_text": "tdAddColToKVRow(&kvRowBuilder, pSchema->colId, pSchema->type, tagVal)",
          "new_text": "tscInvalidSQLErrMsg(pCmd->payload, \"tag value expected\", NULL)",
          "old_line_content": "      tdAddColToKVRow(&kvRowBuilder, pSchema->colId, pSchema->type, tagVal);",
          "new_line_content": "      return tscInvalidSQLErrMsg(pCmd->payload, \"tag value expected\", NULL);",
          "content_same": false
        },
        {
          "line": 904,
          "old_api": "tdDestroyKVRowBuilder",
          "new_api": "tscInvalidSQLErrMsg",
          "old_text": "tdDestroyKVRowBuilder(&kvRowBuilder)",
          "new_text": "tscInvalidSQLErrMsg(pCmd->payload, \"tag value expected\", NULL)",
          "old_line_content": "    tdDestroyKVRowBuilder(&kvRowBuilder);",
          "new_line_content": "      return tscInvalidSQLErrMsg(pCmd->payload, \"tag value expected\", NULL);",
          "content_same": false
        },
        {
          "line": 912,
          "old_api": "tscInvalidSQLErrMsg",
          "new_api": "kvRowCpy",
          "old_text": "tscInvalidSQLErrMsg(pCmd->payload, \"tag value expected\", NULL)",
          "new_text": "kvRowCpy(pTag, row)",
          "old_line_content": "      return tscInvalidSQLErrMsg(pCmd->payload, \"tag value expected\", NULL);",
          "new_line_content": "    kvRowCpy(pTag, row);",
          "content_same": false
        },
        {
          "line": 920,
          "old_api": "kvRowCpy",
          "new_api": "tscSQLSyntaxErrMsg",
          "old_text": "kvRowCpy(pTag, row)",
          "new_text": "tscSQLSyntaxErrMsg(pCmd->payload, \") expected\", sToken.z)",
          "old_line_content": "    kvRowCpy(pTag, row);",
          "new_line_content": "      return tscSQLSyntaxErrMsg(pCmd->payload, \") expected\", sToken.z);",
          "content_same": false
        },
        {
          "line": 928,
          "old_api": "tscSQLSyntaxErrMsg",
          "new_api": "tStrGetToken",
          "old_text": "tscSQLSyntaxErrMsg(pCmd->payload, \") expected\", sToken.z)",
          "new_text": "tStrGetToken(sql, &index, false)",
          "old_line_content": "      return tscSQLSyntaxErrMsg(pCmd->payload, \") expected\", sToken.z);",
          "new_line_content": "    sToken = tStrGetToken(sql, &index, false);",
          "content_same": false
        },
        {
          "line": 1026,
          "old_api": "memset",
          "new_api": "tStrGetToken",
          "old_text": "memset(pColInfo->boundedColumns, 0, sizeof(int32_t) * pColInfo->numOfCols)",
          "new_text": "tStrGetToken(str, &index, false)",
          "old_line_content": "  memset(pColInfo->boundedColumns, 0, sizeof(int32_t) * pColInfo->numOfCols);",
          "new_line_content": "  SStrToken sToken = tStrGetToken(str, &index, false);",
          "content_same": false
        },
        {
          "line": 1191,
          "old_api": "tStrGetToken",
          "new_api": "tscGetTableInfo",
          "old_text": "tStrGetToken(str, &index, false)",
          "new_text": "tscGetTableInfo(pTableMetaInfo->pTableMeta)",
          "old_line_content": "    sToken = tStrGetToken(str, &index, false);",
          "new_line_content": "    STableComInfo tinfo = tscGetTableInfo(pTableMetaInfo->pTableMeta);",
          "content_same": false
        },
        {
          "line": 1246,
          "old_api": "doParseInsertStatement",
          "new_api": "validateDataSource",
          "old_text": "doParseInsertStatement(pCmd, &str, dataBuf, &totalNum)",
          "new_text": "validateDataSource(pCmd, DATA_FROM_SQL_STRING, sToken.z)",
          "old_line_content": "        code = doParseInsertStatement(pCmd, &str, dataBuf, &totalNum);",
          "new_line_content": "        if (validateDataSource(pCmd, DATA_FROM_SQL_STRING, sToken.z) != TSDB_CODE_SUCCESS) {",
          "content_same": false
        },
        {
          "line": 1259,
          "old_api": "tscGetDataBlockFromList",
          "new_api": "parseBoundColumns",
          "old_text": "tscGetDataBlockFromList(pCmd->pTableBlockHashList, pTableMeta->id.uid, TSDB_DEFAULT_PAYLOAD_SIZE,\n                                              sizeof(SSubmitBlk), tinfo.rowSize, &pTableMetaInfo->name, pTableMeta,\n                                              &dataBuf, NULL)",
          "new_text": "parseBoundColumns(pCmd, &dataBuf->boundColumnInfo, pSchema, bindedColumns, NULL)",
          "old_line_content": "        int32_t ret = tscGetDataBlockFromList(pCmd->pTableBlockHashList, pTableMeta->id.uid, TSDB_DEFAULT_PAYLOAD_SIZE,",
          "new_line_content": "        code = parseBoundColumns(pCmd, &dataBuf->boundColumnInfo, pSchema, bindedColumns, NULL);",
          "content_same": false
        },
        {
          "line": 1318,
          "old_api": "tStrGetToken",
          "new_api": "TSDB_QUERY_SET_TYPE",
          "old_text": "tStrGetToken(pSql->sqlstr, &index, false)",
          "new_text": "TSDB_QUERY_SET_TYPE(pQueryInfo->type, TSDB_QUERY_TYPE_INSERT | pCmd->insertType)",
          "old_line_content": "  SStrToken sToken = tStrGetToken(pSql->sqlstr, &index, false);",
          "new_line_content": "  TSDB_QUERY_SET_TYPE(pQueryInfo->type, TSDB_QUERY_TYPE_INSERT | pCmd->insertType);",
          "content_same": false
        },
        {
          "line": 1342,
          "old_api": "tscDebug",
          "new_api": "tscIsInsertData",
          "old_text": "tscDebug(\"0x%\"PRIx64\" resume to parse sql: %s\", pSql->self, pCmd->curSql)",
          "new_text": "tscIsInsertData(pSql->sqlstr)",
          "old_line_content": "    tscDebug(\"0x%\"PRIx64\" resume to parse sql: %s\", pSql->self, pCmd->curSql);",
          "new_line_content": "  if (tscIsInsertData(pSql->sqlstr)) {",
          "content_same": false
        },
        {
          "line": 1366,
          "old_api": "tsInsertInitialCheck",
          "new_api": "tscResetSqlCmd",
          "old_text": "tsInsertInitialCheck(pSql)",
          "new_text": "tscResetSqlCmd(pCmd, true)",
          "old_line_content": "      if ((ret = tsInsertInitialCheck(pSql)) == TSDB_CODE_SUCCESS) {",
          "new_line_content": "      tscResetSqlCmd(pCmd, true);",
          "content_same": false
        },
        {
          "line": 1371,
          "old_api": "qSqlParse",
          "new_api": "SqlInfoDestroy",
          "old_text": "qSqlParse(pSql->sqlstr)",
          "new_text": "SqlInfoDestroy(&SQLInfo)",
          "old_line_content": "    SSqlInfo SQLInfo = qSqlParse(pSql->sqlstr);",
          "new_line_content": "    SqlInfoDestroy(&SQLInfo);",
          "content_same": false
        },
        {
          "line": 1397,
          "old_api": "tscGetTableMetaInfoFromCmd",
          "new_api": "tscMergeTableDataBlocks",
          "old_text": "tscGetTableMetaInfoFromCmd(pCmd, pCmd->clauseIndex, 0)",
          "new_text": "tscMergeTableDataBlocks(pSql, true)",
          "old_line_content": "  STableMeta *pTableMeta = tscGetTableMetaInfoFromCmd(pCmd, pCmd->clauseIndex, 0)->pTableMeta;",
          "new_line_content": "  if ((code = tscMergeTableDataBlocks(pSql, true)) != TSDB_CODE_SUCCESS) {",
          "content_same": false
        },
        {
          "line": 1402,
          "old_api": "tscInvalidSQLErrMsg",
          "new_api": "tscCopyDataBlockToPayload",
          "old_text": "tscInvalidSQLErrMsg(pCmd->payload, \"too many rows in sql, total number of rows should be less than 32767\", NULL)",
          "new_text": "tscCopyDataBlockToPayload(pSql, pDataBlock)",
          "old_line_content": "    return tscInvalidSQLErrMsg(pCmd->payload, \"too many rows in sql, total number of rows should be less than 32767\", NULL);",
          "new_line_content": "  if ((code = tscCopyDataBlockToPayload(pSql, pDataBlock)) != TSDB_CODE_SUCCESS) {",
          "content_same": false
        },
        {
          "line": 1477,
          "old_api": "tscGetDataBlockFromList",
          "new_api": "calloc",
          "old_text": "tscGetDataBlockFromList(pCmd->pTableBlockHashList, pTableMeta->id.uid, TSDB_PAYLOAD_SIZE, sizeof(SSubmitBlk),\n                              tinfo.rowSize, &pTableMetaInfo->name, pTableMeta, &pTableDataBlock, NULL)",
          "new_text": "calloc(1, TSDB_MAX_BYTES_PER_ROW)",
          "old_line_content": "      tscGetDataBlockFromList(pCmd->pTableBlockHashList, pTableMeta->id.uid, TSDB_PAYLOAD_SIZE, sizeof(SSubmitBlk),",
          "new_line_content": "  tokenBuf = calloc(1, TSDB_MAX_BYTES_PER_ROW);",
          "content_same": false
        },
        {
          "line": 1523,
          "old_api": "doPackSendDataBlock",
          "new_api": "tfree",
          "old_text": "doPackSendDataBlock(pSql, count, pTableDataBlock)",
          "new_text": "tfree(pSupporter)",
          "old_line_content": "      code = doPackSendDataBlock(pSql, count, pTableDataBlock);",
          "new_line_content": "      tfree(pSupporter);",
          "content_same": false
        },
        {
          "line": 1530,
          "old_api": "taos_free_result",
          "new_api": "*pParentSql->fp)(pParentSql->param, pParentSql, v)",
          "old_text": "taos_free_result(pSql)",
          "new_text": "*pParentSql->fp)(pParentSql->param, pParentSql, v)",
          "old_line_content": "      taos_free_result(pSql);",
          "new_line_content": "      (*pParentSql->fp)(pParentSql->param, pParentSql, v);",
          "content_same": false
        },
        {
          "line": 1538,
          "old_api": "*pParentSql->fp)(pParentSql->param, pParentSql, v)",
          "new_api": "taos_free_result",
          "old_text": "*pParentSql->fp)(pParentSql->param, pParentSql, v)",
          "new_text": "taos_free_result(pSql)",
          "old_line_content": "      (*pParentSql->fp)(pParentSql->param, pParentSql, v);",
          "new_line_content": "  taos_free_result(pSql);",
          "content_same": false
        },
        {
          "line": 1559,
          "old_api": "strlen",
          "new_api": "TAOS_SYSTEM_ERROR",
          "old_text": "strlen(pCmd->payload)",
          "new_text": "TAOS_SYSTEM_ERROR(errno)",
          "old_line_content": "  assert(pCmd->dataSourceType == DATA_FROM_DATA_FILE  && strlen(pCmd->payload) != 0);",
          "new_line_content": "    pSql->res.code = TAOS_SYSTEM_ERROR(errno);",
          "content_same": false
        },
        {
          "line": 1562,
          "old_api": "createSubqueryObj",
          "new_api": "tfree",
          "old_text": "createSubqueryObj(pSql, 0, parseFileSendDataBlock, pSupporter, TSDB_SQL_INSERT, NULL)",
          "new_text": "tfree(pSupporter)",
          "old_line_content": "  SSqlObj *pNew = createSubqueryObj(pSql, 0, parseFileSendDataBlock, pSupporter, TSDB_SQL_INSERT, NULL);",
          "new_line_content": "    tfree(pSupporter);",
          "content_same": false
        },
        {
          "line": 1571,
          "old_api": "taos_free_result",
          "new_api": "parseFileSendDataBlock",
          "old_text": "taos_free_result(pNew)",
          "new_text": "parseFileSendDataBlock(pSupporter, pNew, TSDB_CODE_SUCCESS)",
          "old_line_content": "    taos_free_result(pNew);",
          "new_line_content": "  parseFileSendDataBlock(pSupporter, pNew, TSDB_CODE_SUCCESS);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 1536,
          "old_api": null,
          "new_api": "tfree",
          "old_text": null,
          "new_text": "tfree(tokenBuf)",
          "old_line_content": "      // all data has been sent to vnode, call user function",
          "new_line_content": "  tfree(tokenBuf);",
          "content_same": false
        },
        {
          "line": 1537,
          "old_api": null,
          "new_api": "tfree",
          "old_text": null,
          "new_text": "tfree(line)",
          "old_line_content": "      int32_t v = (code != TSDB_CODE_SUCCESS) ? code : (int32_t)pParentSql->res.numOfRows;",
          "new_line_content": "  tfree(line);",
          "content_same": false
        },
        {
          "line": 1539,
          "old_api": null,
          "new_api": "tfree",
          "old_text": null,
          "new_text": "tfree(pSupporter)",
          "old_line_content": "      return;",
          "new_line_content": "  tfree(pSupporter);",
          "content_same": false
        },
        {
          "line": 1540,
          "old_api": null,
          "new_api": "fclose",
          "old_text": null,
          "new_text": "fclose(fp)",
          "old_line_content": "    }",
          "new_line_content": "  fclose(fp);",
          "content_same": false
        },
        {
          "line": 1030,
          "old_api": null,
          "new_api": "tscInvalidSQLErrMsg",
          "old_text": null,
          "new_text": "tscInvalidSQLErrMsg(pCmd->payload, \"( is expected\", sToken.z)",
          "old_line_content": "",
          "new_line_content": "    code = tscInvalidSQLErrMsg(pCmd->payload, \"( is expected\", sToken.z);",
          "content_same": false
        },
        {
          "line": 1542,
          "old_api": null,
          "new_api": "tscAsyncResultOnError",
          "old_text": null,
          "new_text": "tscAsyncResultOnError(pParentSql)",
          "old_line_content": "",
          "new_line_content": "  tscAsyncResultOnError(pParentSql);",
          "content_same": false
        },
        {
          "line": 1036,
          "old_api": null,
          "new_api": "tStrGetToken",
          "old_text": null,
          "new_text": "tStrGetToken(str, &index, false)",
          "old_line_content": "",
          "new_line_content": "    sToken = tStrGetToken(str, &index, false);",
          "content_same": false
        },
        {
          "line": 1551,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(pCmd->payload)",
          "old_line_content": "}",
          "new_line_content": "  assert(pCmd->dataSourceType == DATA_FROM_DATA_FILE  && strlen(pCmd->payload) != 0);",
          "content_same": false
        },
        {
          "line": 1040,
          "old_api": null,
          "new_api": "tscDequoteAndTrimToken",
          "old_text": null,
          "new_text": "tscDequoteAndTrimToken(&sToken)",
          "old_line_content": "  }",
          "new_line_content": "      tscDequoteAndTrimToken(&sToken);",
          "content_same": false
        },
        {
          "line": 1553,
          "old_api": null,
          "new_api": "calloc",
          "old_text": null,
          "new_text": "calloc(1, sizeof(SImportFileSupport))",
          "old_line_content": "void tscImportDataFromFile(SSqlObj *pSql) {",
          "new_line_content": "  SImportFileSupport *pSupporter = calloc(1, sizeof(SImportFileSupport));",
          "content_same": false
        },
        {
          "line": 1554,
          "old_api": null,
          "new_api": "createSubqueryObj",
          "old_text": null,
          "new_text": "createSubqueryObj(pSql, 0, parseFileSendDataBlock, pSupporter, TSDB_SQL_INSERT, NULL)",
          "old_line_content": "  SSqlCmd *pCmd = &pSql->cmd;",
          "new_line_content": "  SSqlObj *pNew = createSubqueryObj(pSql, 0, parseFileSendDataBlock, pSupporter, TSDB_SQL_INSERT, NULL);",
          "content_same": false
        },
        {
          "line": 1557,
          "old_api": null,
          "new_api": "fopen",
          "old_text": null,
          "new_text": "fopen(pCmd->payload, \"rb\")",
          "old_line_content": "  }",
          "new_line_content": "  FILE *fp = fopen(pCmd->payload, \"rb\");",
          "content_same": false
        },
        {
          "line": 1560,
          "old_api": null,
          "new_api": "tstrerror",
          "old_text": null,
          "new_text": "tstrerror(pSql->res.code)",
          "old_line_content": "",
          "new_line_content": "    tscError(\"0x%\"PRIx64\" failed to open file %s to load data from file, code:%s\", pSql->self, pCmd->payload, tstrerror(pSql->res.code));",
          "content_same": false
        },
        {
          "line": 1563,
          "old_api": null,
          "new_api": "taos_free_result",
          "old_text": null,
          "new_text": "taos_free_result(pNew)",
          "old_line_content": "  pCmd->count = 1;",
          "new_line_content": "    taos_free_result(pNew);",
          "content_same": false
        },
        {
          "line": 1564,
          "old_api": null,
          "new_api": "tscAsyncResultOnError",
          "old_text": null,
          "new_text": "tscAsyncResultOnError(pSql)",
          "old_line_content": "",
          "new_line_content": "    tscAsyncResultOnError(pSql);",
          "content_same": false
        },
        {
          "line": 1055,
          "old_api": null,
          "new_api": "strlen",
          "old_text": null,
          "new_text": "strlen(pSchema[t].name)",
          "old_line_content": "",
          "new_line_content": "      if (strncmp(sToken.z, pSchema[t].name, sToken.n) == 0 && strlen(pSchema[t].name) == sToken.n) {",
          "content_same": false
        },
        {
          "line": 1057,
          "old_api": null,
          "new_api": "tscInvalidSQLErrMsg",
          "old_text": null,
          "new_text": "tscInvalidSQLErrMsg(pCmd->payload, \"duplicated column name\", sToken.z)",
          "old_line_content": "    }",
          "new_line_content": "          code = tscInvalidSQLErrMsg(pCmd->payload, \"duplicated column name\", sToken.z);",
          "content_same": false
        },
        {
          "line": 1070,
          "old_api": null,
          "new_api": "tscInvalidSQLErrMsg",
          "old_text": null,
          "new_text": "tscInvalidSQLErrMsg(pCmd->payload, \"invalid column/tag name\", sToken.z)",
          "old_line_content": "        pColInfo->boundedColumns[pColInfo->numOfBound] = t;",
          "new_line_content": "      code = tscInvalidSQLErrMsg(pCmd->payload, \"invalid column/tag name\", sToken.z);",
          "content_same": false
        },
        {
          "line": 1075,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(&pColInfo->boundedColumns[pColInfo->numOfBound], 0 , sizeof(int32_t) * (pColInfo->numOfCols - pColInfo->numOfBound))",
          "old_line_content": "    }",
          "new_line_content": "  memset(&pColInfo->boundedColumns[pColInfo->numOfBound], 0 , sizeof(int32_t) * (pColInfo->numOfCols - pColInfo->numOfBound));",
          "content_same": false
        },
        {
          "line": 1096,
          "old_api": null,
          "new_api": "tscGetQueryInfoDetail",
          "old_text": null,
          "new_text": "tscGetQueryInfoDetail(pCmd, 0)",
          "old_line_content": " */",
          "new_line_content": "  SQueryInfo *pQueryInfo = tscGetQueryInfoDetail(pCmd, 0);",
          "content_same": false
        },
        {
          "line": 1097,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(pQueryInfo != NULL)",
          "old_line_content": "int tsParseInsertSql(SSqlObj *pSql) {",
          "new_line_content": "  assert(pQueryInfo != NULL);",
          "content_same": false
        },
        {
          "line": 1099,
          "old_api": null,
          "new_api": "tscGetMetaInfo",
          "old_text": null,
          "new_text": "tscGetMetaInfo(pQueryInfo, 0)",
          "old_line_content": "  char* str = pCmd->curSql;",
          "new_line_content": "  STableMetaInfo *pTableMetaInfo = (pQueryInfo->numOfTables == 0)? tscAddEmptyMetaInfo(pQueryInfo):tscGetMetaInfo(pQueryInfo, 0);",
          "content_same": false
        },
        {
          "line": 1106,
          "old_api": null,
          "new_api": "tscAllocPayload",
          "old_text": null,
          "new_text": "tscAllocPayload(pCmd, TSDB_DEFAULT_PAYLOAD_SIZE)",
          "old_line_content": "",
          "new_line_content": "  if ((code = tscAllocPayload(pCmd, TSDB_DEFAULT_PAYLOAD_SIZE)) != TSDB_CODE_SUCCESS) {",
          "content_same": false
        },
        {
          "line": 1111,
          "old_api": null,
          "new_api": "taosGetDefaultHashFunction",
          "old_text": null,
          "new_text": "taosGetDefaultHashFunction(TSDB_DATA_TYPE_BIGINT)",
          "old_line_content": "    return code;",
          "new_line_content": "    pCmd->pTableBlockHashList = taosHashInit(128, taosGetDefaultHashFunction(TSDB_DATA_TYPE_BIGINT), true, false);",
          "content_same": false
        },
        {
          "line": 1120,
          "old_api": null,
          "new_api": "tscDebug",
          "old_text": null,
          "new_text": "tscDebug(\"0x%\"PRIx64\" create data block list hashList:%p\", pSql->self, pCmd->pTableBlockHashList)",
          "old_line_content": "    if (NULL == pCmd->pTableBlockHashList) {",
          "new_line_content": "  tscDebug(\"0x%\"PRIx64\" create data block list hashList:%p\", pSql->self, pCmd->pTableBlockHashList);",
          "content_same": false
        },
        {
          "line": 1124,
          "old_api": null,
          "new_api": "tStrGetToken",
          "old_text": null,
          "new_text": "tStrGetToken(str, &index, false)",
          "old_line_content": "  } else {",
          "new_line_content": "    SStrToken sToken = tStrGetToken(str, &index, false);",
          "content_same": false
        },
        {
          "line": 1153,
          "old_api": null,
          "new_api": "validateTableName",
          "old_text": null,
          "new_text": "validateTableName(sToken.z, sToken.n, &sTblToken)",
          "old_line_content": "      }",
          "new_line_content": "    if (validateTableName(sToken.z, sToken.n, &sTblToken) != TSDB_CODE_SUCCESS) {",
          "content_same": false
        },
        {
          "line": 1154,
          "old_api": null,
          "new_api": "tscInvalidSQLErrMsg",
          "old_text": null,
          "new_text": "tscInvalidSQLErrMsg(pCmd->payload, \"table name invalid\", sToken.z)",
          "old_line_content": "    }",
          "new_line_content": "      code = tscInvalidSQLErrMsg(pCmd->payload, \"table name invalid\", sToken.z);",
          "content_same": false
        },
        {
          "line": 1158,
          "old_api": null,
          "new_api": "tscSetTableFullName",
          "old_text": null,
          "new_text": "tscSetTableFullName(pTableMetaInfo, &sTblToken, pSql)",
          "old_line_content": "    SStrToken sTblToken;",
          "new_line_content": "    if ((code = tscSetTableFullName(pTableMetaInfo, &sTblToken, pSql)) != TSDB_CODE_SUCCESS) {",
          "content_same": false
        },
        {
          "line": 1163,
          "old_api": null,
          "new_api": "tscCheckIfCreateTable",
          "old_text": null,
          "new_text": "tscCheckIfCreateTable(&str, pSql, &bindedColumns)",
          "old_line_content": "      goto _clean;",
          "new_line_content": "    if ((code = tscCheckIfCreateTable(&str, pSql, &bindedColumns)) != TSDB_CODE_SUCCESS) {",
          "content_same": false
        },
        {
          "line": 1172,
          "old_api": null,
          "new_api": "tstrerror",
          "old_text": null,
          "new_text": "tstrerror(code)",
          "old_line_content": "      /*",
          "new_line_content": "      tscError(\"0x%\"PRIx64\" async insert parse error, code:%s\", pSql->self, tstrerror(code));",
          "content_same": false
        },
        {
          "line": 1177,
          "old_api": null,
          "new_api": "UTIL_TABLE_IS_SUPER_TABLE",
          "old_text": null,
          "new_text": "UTIL_TABLE_IS_SUPER_TABLE(pTableMetaInfo)",
          "old_line_content": "        return code;",
          "new_line_content": "    if (UTIL_TABLE_IS_SUPER_TABLE(pTableMetaInfo)) {",
          "content_same": false
        },
        {
          "line": 1178,
          "old_api": null,
          "new_api": "tscInvalidSQLErrMsg",
          "old_text": null,
          "new_text": "tscInvalidSQLErrMsg(pCmd->payload, \"insert data into super table is not supported\", NULL)",
          "old_line_content": "      }",
          "new_line_content": "      code = tscInvalidSQLErrMsg(pCmd->payload, \"insert data into super table is not supported\", NULL);",
          "content_same": false
        },
        {
          "line": 1183,
          "old_api": null,
          "new_api": "tStrGetToken",
          "old_text": null,
          "new_text": "tStrGetToken(str, &index, false)",
          "old_line_content": "    }",
          "new_line_content": "    sToken = tStrGetToken(str, &index, false);",
          "content_same": false
        },
        {
          "line": 1187,
          "old_api": null,
          "new_api": "tscInvalidSQLErrMsg",
          "old_text": null,
          "new_text": "tscInvalidSQLErrMsg(pCmd->payload, \"keyword VALUES or FILE required\", sToken.z)",
          "old_line_content": "      goto _clean;",
          "new_line_content": "      code = tscInvalidSQLErrMsg(pCmd->payload, \"keyword VALUES or FILE required\", sToken.z);",
          "content_same": false
        },
        {
          "line": 1193,
          "old_api": null,
          "new_api": "validateDataSource",
          "old_text": null,
          "new_text": "validateDataSource(pCmd, DATA_FROM_DATA_FILE, sToken.z)",
          "old_line_content": "",
          "new_line_content": "      if (validateDataSource(pCmd, DATA_FROM_DATA_FILE, sToken.z) != TSDB_CODE_SUCCESS) {",
          "content_same": false
        },
        {
          "line": 1198,
          "old_api": null,
          "new_api": "tStrGetToken",
          "old_text": null,
          "new_text": "tStrGetToken(str, &index, false)",
          "old_line_content": "",
          "new_line_content": "      sToken = tStrGetToken(str, &index, false);",
          "content_same": false
        },
        {
          "line": 1200,
          "old_api": null,
          "new_api": "tscInvalidSQLErrMsg",
          "old_text": null,
          "new_text": "tscInvalidSQLErrMsg(pCmd->payload, \"file path is required following keyword FILE\", sToken.z)",
          "old_line_content": "    if (sToken.type == TK_FILE) {",
          "new_line_content": "        code = tscInvalidSQLErrMsg(pCmd->payload, \"file path is required following keyword FILE\", sToken.z);",
          "content_same": false
        },
        {
          "line": 1205,
          "old_api": null,
          "new_api": "tscInvalidSQLErrMsg",
          "old_text": null,
          "new_text": "tscInvalidSQLErrMsg(pCmd->payload, \"file path is required following keyword FILE\", sToken.z)",
          "old_line_content": "      index = 0;",
          "new_line_content": "        code = tscInvalidSQLErrMsg(pCmd->payload, \"file path is required following keyword FILE\", sToken.z);",
          "content_same": false
        },
        {
          "line": 1209,
          "old_api": null,
          "new_api": "strncpy",
          "old_text": null,
          "new_text": "strncpy(pCmd->payload, sToken.z, sToken.n)",
          "old_line_content": "        goto _clean;",
          "new_line_content": "      strncpy(pCmd->payload, sToken.z, sToken.n);",
          "content_same": false
        },
        {
          "line": 1210,
          "old_api": null,
          "new_api": "strdequote",
          "old_text": null,
          "new_text": "strdequote(pCmd->payload)",
          "old_line_content": "      }",
          "new_line_content": "      strdequote(pCmd->payload);",
          "content_same": false
        },
        {
          "line": 1214,
          "old_api": null,
          "new_api": "wordexp",
          "old_text": null,
          "new_text": "wordexp(pCmd->payload, &full_path, 0)",
          "old_line_content": "        goto _clean;",
          "new_line_content": "      if (wordexp(pCmd->payload, &full_path, 0) != 0) {",
          "content_same": false
        },
        {
          "line": 1215,
          "old_api": null,
          "new_api": "tscInvalidSQLErrMsg",
          "old_text": null,
          "new_text": "tscInvalidSQLErrMsg(pCmd->payload, \"invalid filename\", sToken.z)",
          "old_line_content": "      }",
          "new_line_content": "        code = tscInvalidSQLErrMsg(pCmd->payload, \"invalid filename\", sToken.z);",
          "content_same": false
        },
        {
          "line": 1219,
          "old_api": null,
          "new_api": "tstrncpy",
          "old_text": null,
          "new_text": "tstrncpy(pCmd->payload, full_path.we_wordv[0], pCmd->allocSize)",
          "old_line_content": "",
          "new_line_content": "      tstrncpy(pCmd->payload, full_path.we_wordv[0], pCmd->allocSize);",
          "content_same": false
        },
        {
          "line": 1220,
          "old_api": null,
          "new_api": "wordfree",
          "old_text": null,
          "new_text": "wordfree(&full_path)",
          "old_line_content": "      // todo refactor extract method",
          "new_line_content": "      wordfree(&full_path);",
          "content_same": false
        },
        {
          "line": 711,
          "old_api": null,
          "new_api": "tsParseValues",
          "old_text": null,
          "new_text": "tsParseValues(str, dataBuf, maxNumOfRows, pCmd, &numOfRows, tmpTokenBuf)",
          "old_line_content": "  }",
          "new_line_content": "  code = tsParseValues(str, dataBuf, maxNumOfRows, pCmd, &numOfRows, tmpTokenBuf);",
          "content_same": false
        },
        {
          "line": 1226,
          "old_api": null,
          "new_api": "validateDataSource",
          "old_text": null,
          "new_text": "validateDataSource(pCmd, DATA_FROM_SQL_STRING, sToken.z)",
          "old_line_content": "",
          "new_line_content": "        if (validateDataSource(pCmd, DATA_FROM_SQL_STRING, sToken.z) != TSDB_CODE_SUCCESS) {",
          "content_same": false
        },
        {
          "line": 1231,
          "old_api": null,
          "new_api": "tscGetDataBlockFromList",
          "old_text": null,
          "new_text": "tscGetDataBlockFromList(pCmd->pTableBlockHashList, pTableMeta->id.uid, TSDB_DEFAULT_PAYLOAD_SIZE,\n                                              sizeof(SSubmitBlk), tinfo.rowSize, &pTableMetaInfo->name, pTableMeta,\n                                              &dataBuf, NULL)",
          "old_line_content": "      if (bindedColumns == NULL) {",
          "new_line_content": "        int32_t ret = tscGetDataBlockFromList(pCmd->pTableBlockHashList, pTableMeta->id.uid, TSDB_DEFAULT_PAYLOAD_SIZE,",
          "content_same": false
        },
        {
          "line": 722,
          "old_api": null,
          "new_api": "tsSetBlockInfo",
          "old_text": null,
          "new_text": "tsSetBlockInfo(pBlocks, dataBuf->pTableMeta, numOfRows)",
          "old_line_content": "    SParamInfo *param = dataBuf->params + i;",
          "new_line_content": "  code = tsSetBlockInfo(pBlocks, dataBuf->pTableMeta, numOfRows);",
          "content_same": false
        },
        {
          "line": 724,
          "old_api": null,
          "new_api": "tscInvalidSQLErrMsg",
          "old_text": null,
          "new_text": "tscInvalidSQLErrMsg(pCmd->payload, \"too many rows in sql, total number of rows should be less than 32767\", *str)",
          "old_line_content": "      param->idx = pCmd->numOfParams++;",
          "new_line_content": "    tscInvalidSQLErrMsg(pCmd->payload, \"too many rows in sql, total number of rows should be less than 32767\", *str);",
          "content_same": false
        },
        {
          "line": 1238,
          "old_api": null,
          "new_api": "doParseInsertStatement",
          "old_text": null,
          "new_text": "doParseInsertStatement(pCmd, &str, dataBuf, &totalNum)",
          "old_line_content": "        STableDataBlocks *dataBuf = NULL;",
          "new_line_content": "        code = doParseInsertStatement(pCmd, &str, dataBuf, &totalNum);",
          "content_same": false
        },
        {
          "line": 1244,
          "old_api": null,
          "new_api": "tscGetTableMetaInfoFromCmd",
          "old_text": null,
          "new_text": "tscGetTableMetaInfoFromCmd(pCmd, pCmd->clauseIndex, 0)",
          "old_line_content": "        }",
          "new_line_content": "        STableMeta *pTableMeta = tscGetTableMetaInfoFromCmd(pCmd, pCmd->clauseIndex, 0)->pTableMeta;",
          "content_same": false
        },
        {
          "line": 1251,
          "old_api": null,
          "new_api": "tscGetDataBlockFromList",
          "old_text": null,
          "new_text": "tscGetDataBlockFromList(pCmd->pTableBlockHashList, pTableMeta->id.uid, TSDB_DEFAULT_PAYLOAD_SIZE,\n                                              sizeof(SSubmitBlk), tinfo.rowSize, &pTableMetaInfo->name, pTableMeta,\n                                              &dataBuf, NULL)",
          "old_line_content": "        // insert into tablename(col1, col2,..., coln) values(v1, v2,... vn);",
          "new_line_content": "        int32_t ret = tscGetDataBlockFromList(pCmd->pTableBlockHashList, pTableMeta->id.uid, TSDB_DEFAULT_PAYLOAD_SIZE,",
          "content_same": false
        },
        {
          "line": 743,
          "old_api": null,
          "new_api": "tscGetQueryInfoDetail",
          "old_text": null,
          "new_text": "tscGetQueryInfoDetail(pCmd, 0)",
          "old_line_content": "  SStrToken sToken = {0};",
          "new_line_content": "  SQueryInfo *pQueryInfo = tscGetQueryInfoDetail(pCmd, 0);",
          "content_same": false
        },
        {
          "line": 1258,
          "old_api": null,
          "new_api": "tscGetTableSchema",
          "old_text": null,
          "new_text": "tscGetTableSchema(pTableMeta)",
          "old_line_content": "        STableDataBlocks *dataBuf = NULL;",
          "new_line_content": "        SSchema *pSchema = tscGetTableSchema(pTableMeta);",
          "content_same": false
        },
        {
          "line": 1265,
          "old_api": null,
          "new_api": "tscInvalidSQLErrMsg",
          "old_text": null,
          "new_text": "tscInvalidSQLErrMsg(pCmd->payload, \"primary timestamp column can not be null\", NULL)",
          "old_line_content": "",
          "new_line_content": "          code = tscInvalidSQLErrMsg(pCmd->payload, \"primary timestamp column can not be null\", NULL);",
          "content_same": false
        },
        {
          "line": 756,
          "old_api": null,
          "new_api": "tStrGetToken",
          "old_text": null,
          "new_text": "tStrGetToken(sql, &index, false)",
          "old_line_content": "  ",
          "new_line_content": "  sToken = tStrGetToken(sql, &index, false);",
          "content_same": false
        },
        {
          "line": 1270,
          "old_api": null,
          "new_api": "tscInvalidSQLErrMsg",
          "old_text": null,
          "new_text": "tscInvalidSQLErrMsg(pCmd->payload, \"keyword VALUES is expected\", sToken.z)",
          "old_line_content": "        }",
          "new_line_content": "          code = tscInvalidSQLErrMsg(pCmd->payload, \"keyword VALUES is expected\", sToken.z);",
          "content_same": false
        },
        {
          "line": 1274,
          "old_api": null,
          "new_api": "doParseInsertStatement",
          "old_text": null,
          "new_text": "doParseInsertStatement(pCmd, &str, dataBuf, &totalNum)",
          "old_line_content": "          goto _clean;",
          "new_line_content": "        code = doParseInsertStatement(pCmd, &str, dataBuf, &totalNum);",
          "content_same": false
        },
        {
          "line": 767,
          "old_api": null,
          "new_api": "tStrGetToken",
          "old_text": null,
          "new_text": "tStrGetToken(sql, &index, false)",
          "old_line_content": "  int32_t numOfColList = 0;",
          "new_line_content": "      sToken = tStrGetToken(sql, &index, false);",
          "content_same": false
        },
        {
          "line": 1287,
          "old_api": null,
          "new_api": "taosHashGetSize",
          "old_text": null,
          "new_text": "taosHashGetSize(pCmd->pTableBlockHashList)",
          "old_line_content": "    }",
          "new_line_content": "  if (taosHashGetSize(pCmd->pTableBlockHashList) > 0) { // merge according to vgId",
          "content_same": false
        },
        {
          "line": 1288,
          "old_api": null,
          "new_api": "tscMergeTableDataBlocks",
          "old_text": null,
          "new_text": "tscMergeTableDataBlocks(pSql, true)",
          "old_line_content": "  }",
          "new_line_content": "    if ((code = tscMergeTableDataBlocks(pSql, true)) != TSDB_CODE_SUCCESS) {",
          "content_same": false
        },
        {
          "line": 777,
          "old_api": null,
          "new_api": "tStrGetToken",
          "old_text": null,
          "new_text": "tStrGetToken(sql, &index, false)",
          "old_line_content": "      if (sToken.type == TK_RP) {",
          "new_line_content": "    sToken = tStrGetToken(sql, &index, false);",
          "content_same": false
        },
        {
          "line": 789,
          "old_api": null,
          "new_api": "tStrGetToken",
          "old_text": null,
          "new_text": "tStrGetToken(sql, &index, false)",
          "old_line_content": "  if (numOfColList == 0 && (*boundColumn) != NULL) {",
          "new_line_content": "    sToken = tStrGetToken(sql, &index, false);",
          "content_same": false
        },
        {
          "line": 794,
          "old_api": null,
          "new_api": "tscAddEmptyMetaInfo",
          "old_text": null,
          "new_text": "tscAddEmptyMetaInfo(pQueryInfo)",
          "old_line_content": "  ",
          "new_line_content": "      tscAddEmptyMetaInfo(pQueryInfo);",
          "content_same": false
        },
        {
          "line": 798,
          "old_api": null,
          "new_api": "tscSetTableFullName",
          "old_text": null,
          "new_text": "tscSetTableFullName(pSTableMetaInfo, &sToken, pSql)",
          "old_line_content": "    sql += index;",
          "new_line_content": "    code = tscSetTableFullName(pSTableMetaInfo, &sToken, pSql);",
          "content_same": false
        },
        {
          "line": 1310,
          "old_api": null,
          "new_api": "tStrGetToken",
          "old_text": null,
          "new_text": "tStrGetToken(pSql->sqlstr, &index, false)",
          "old_line_content": "int tsInsertInitialCheck(SSqlObj *pSql) {",
          "new_line_content": "  SStrToken sToken = tStrGetToken(pSql->sqlstr, &index, false);",
          "content_same": false
        },
        {
          "line": 1311,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(sToken.type == TK_INSERT || sToken.type == TK_IMPORT)",
          "old_line_content": "  if (!pSql->pTscObj->writeAuth) {",
          "new_line_content": "  assert(sToken.type == TK_INSERT || sToken.type == TK_IMPORT);",
          "content_same": false
        },
        {
          "line": 803,
          "old_api": null,
          "new_api": "tNameExtractFullName",
          "old_text": null,
          "new_text": "tNameExtractFullName(&pSTableMetaInfo->name, pCmd->tagData.name)",
          "old_line_content": "    }",
          "new_line_content": "    tNameExtractFullName(&pSTableMetaInfo->name, pCmd->tagData.name);",
          "content_same": false
        },
        {
          "line": 1316,
          "old_api": null,
          "new_api": "tscGetQueryInfoDetailSafely",
          "old_text": null,
          "new_text": "tscGetQueryInfoDetailSafely(pCmd, pCmd->clauseIndex)",
          "old_line_content": "  SSqlCmd *pCmd = &pSql->cmd;",
          "new_line_content": "  SQueryInfo *pQueryInfo = tscGetQueryInfoDetailSafely(pCmd, pCmd->clauseIndex);",
          "content_same": false
        },
        {
          "line": 1320,
          "old_api": null,
          "new_api": "tStrGetToken",
          "old_text": null,
          "new_text": "tStrGetToken(pSql->sqlstr, &index, false)",
          "old_line_content": "",
          "new_line_content": "  sToken = tStrGetToken(pSql->sqlstr, &index, false);",
          "content_same": false
        },
        {
          "line": 1322,
          "old_api": null,
          "new_api": "tscInvalidSQLErrMsg",
          "old_text": null,
          "new_text": "tscInvalidSQLErrMsg(pCmd->payload, \"keyword INTO is expected\", sToken.z)",
          "old_line_content": "  pCmd->command = TSDB_SQL_INSERT;",
          "new_line_content": "    return tscInvalidSQLErrMsg(pCmd->payload, \"keyword INTO is expected\", sToken.z);",
          "content_same": false
        },
        {
          "line": 812,
          "old_api": null,
          "new_api": "tscInvalidSQLErrMsg",
          "old_text": null,
          "new_text": "tscInvalidSQLErrMsg(pCmd->payload, \"create table only from super table is allowed\", sToken.z)",
          "old_line_content": "    pCmd->tagData.dataLen = 0;",
          "new_line_content": "      return tscInvalidSQLErrMsg(pCmd->payload, \"create table only from super table is allowed\", sToken.z);",
          "content_same": false
        },
        {
          "line": 815,
          "old_api": null,
          "new_api": "tscGetTableTagSchema",
          "old_text": null,
          "new_text": "tscGetTableTagSchema(pSTableMetaInfo->pTableMeta)",
          "old_line_content": "    if (code != TSDB_CODE_SUCCESS) {",
          "new_line_content": "    SSchema *pTagSchema = tscGetTableTagSchema(pSTableMetaInfo->pTableMeta);",
          "content_same": false
        },
        {
          "line": 816,
          "old_api": null,
          "new_api": "tscGetTableInfo",
          "old_text": null,
          "new_text": "tscGetTableInfo(pSTableMetaInfo->pTableMeta)",
          "old_line_content": "      return code;",
          "new_line_content": "    STableComInfo tinfo = tscGetTableInfo(pSTableMetaInfo->pTableMeta);",
          "content_same": false
        },
        {
          "line": 822,
          "old_api": null,
          "new_api": "tStrGetToken",
          "old_text": null,
          "new_text": "tStrGetToken(sql, &index, false)",
          "old_line_content": "",
          "new_line_content": "    sToken = tStrGetToken(sql, &index, false);",
          "content_same": false
        },
        {
          "line": 1334,
          "old_api": null,
          "new_api": "tscDebug",
          "old_text": null,
          "new_text": "tscDebug(\"0x%\"PRIx64\" resume to parse sql: %s\", pSql->self, pCmd->curSql)",
          "old_line_content": "  return TSDB_CODE_SUCCESS;",
          "new_line_content": "    tscDebug(\"0x%\"PRIx64\" resume to parse sql: %s\", pSql->self, pCmd->curSql);",
          "content_same": false
        },
        {
          "line": 1337,
          "old_api": null,
          "new_api": "tscAllocPayload",
          "old_text": null,
          "new_text": "tscAllocPayload(&pSql->cmd, TSDB_DEFAULT_PAYLOAD_SIZE)",
          "old_line_content": "int tsParseSql(SSqlObj *pSql, bool initial) {",
          "new_line_content": "  ret = tscAllocPayload(&pSql->cmd, TSDB_DEFAULT_PAYLOAD_SIZE);",
          "content_same": false
        },
        {
          "line": 1343,
          "old_api": null,
          "new_api": "tsInsertInitialCheck",
          "old_text": null,
          "new_text": "tsInsertInitialCheck(pSql)",
          "old_line_content": "  }",
          "new_line_content": "    if (initial && ((ret = tsInsertInitialCheck(pSql)) != TSDB_CODE_SUCCESS)) {",
          "content_same": false
        },
        {
          "line": 834,
          "old_api": null,
          "new_api": "parseBoundColumns",
          "old_text": null,
          "new_text": "parseBoundColumns(pCmd, &spd, pTagSchema, sql, &end)",
          "old_line_content": "",
          "new_line_content": "      code = parseBoundColumns(pCmd, &spd, pTagSchema, sql, &end);",
          "content_same": false
        },
        {
          "line": 1349,
          "old_api": null,
          "new_api": "tsParseInsertSql",
          "old_text": null,
          "new_text": "tsParseInsertSql(pSql)",
          "old_line_content": "",
          "new_line_content": "    ret = tsParseInsertSql(pSql);",
          "content_same": false
        },
        {
          "line": 1354,
          "old_api": null,
          "new_api": "tscResetSqlCmd",
          "old_text": null,
          "new_text": "tscResetSqlCmd(pCmd, true)",
          "old_line_content": "",
          "new_line_content": "      tscResetSqlCmd(pCmd, true);",
          "content_same": false
        },
        {
          "line": 1358,
          "old_api": null,
          "new_api": "tsInsertInitialCheck",
          "old_text": null,
          "new_text": "tsInsertInitialCheck(pSql)",
          "old_line_content": "    if (/*(sqlstr == NULL) || */(pSql->parseRetry >= 1) ||",
          "new_line_content": "      if ((ret = tsInsertInitialCheck(pSql)) == TSDB_CODE_SUCCESS) {",
          "content_same": false
        },
        {
          "line": 1359,
          "old_api": null,
          "new_api": "tsParseInsertSql",
          "old_text": null,
          "new_text": "tsParseInsertSql(pSql)",
          "old_line_content": "        (ret != TSDB_CODE_TSC_SQL_SYNTAX_ERROR && ret != TSDB_CODE_TSC_INVALID_SQL)) {",
          "new_line_content": "        ret = tsParseInsertSql(pSql);",
          "content_same": false
        },
        {
          "line": 849,
          "old_api": null,
          "new_api": "tStrGetToken",
          "old_text": null,
          "new_text": "tStrGetToken(sql, &index, false)",
          "old_line_content": "      index = 0;  // keywords of \"TAGS\"",
          "new_line_content": "    sToken = tStrGetToken(sql, &index, false);",
          "content_same": false
        },
        {
          "line": 1363,
          "old_api": null,
          "new_api": "qSqlParse",
          "old_text": null,
          "new_text": "qSqlParse(pSql->sqlstr)",
          "old_line_content": "//      free(pSql->sqlstr);",
          "new_line_content": "    SSqlInfo SQLInfo = qSqlParse(pSql->sqlstr);",
          "content_same": false
        },
        {
          "line": 1364,
          "old_api": null,
          "new_api": "tscToSQLCmd",
          "old_text": null,
          "new_text": "tscToSQLCmd(pSql, &SQLInfo)",
          "old_line_content": "//      pSql->sqlstr = sqlstr;",
          "new_line_content": "    ret = tscToSQLCmd(pSql, &SQLInfo);",
          "content_same": false
        },
        {
          "line": 853,
          "old_api": null,
          "new_api": "tscInvalidSQLErrMsg",
          "old_text": null,
          "new_text": "tscInvalidSQLErrMsg(pCmd->payload, \"( is expected\", sToken.z)",
          "old_line_content": "      sql += index;",
          "new_line_content": "      return tscInvalidSQLErrMsg(pCmd->payload, \"( is expected\", sToken.z);",
          "content_same": false
        },
        {
          "line": 1368,
          "old_api": null,
          "new_api": "tscToSQLCmd",
          "old_text": null,
          "new_text": "tscToSQLCmd(pSql, &SQLInfo)",
          "old_line_content": "      }",
          "new_line_content": "      ret = tscToSQLCmd(pSql, &SQLInfo);",
          "content_same": false
        },
        {
          "line": 869,
          "old_api": null,
          "new_api": "tdDestroyKVRowBuilder",
          "old_text": null,
          "new_text": "tdDestroyKVRowBuilder(&kvRowBuilder)",
          "old_line_content": "    for (int i = 0; i < spd.numOfBound; ++i) {",
          "new_line_content": "        tdDestroyKVRowBuilder(&kvRowBuilder);",
          "content_same": false
        },
        {
          "line": 1388,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(pCmd->numOfClause == 1)",
          "old_line_content": "  return ret;",
          "new_line_content": "  assert(pCmd->numOfClause == 1);",
          "content_same": false
        },
        {
          "line": 1389,
          "old_api": null,
          "new_api": "tscGetTableMetaInfoFromCmd",
          "old_text": null,
          "new_text": "tscGetTableMetaInfoFromCmd(pCmd, pCmd->clauseIndex, 0)",
          "old_line_content": "}",
          "new_line_content": "  STableMeta *pTableMeta = tscGetTableMetaInfoFromCmd(pCmd, pCmd->clauseIndex, 0)->pTableMeta;",
          "content_same": false
        },
        {
          "line": 1392,
          "old_api": null,
          "new_api": "tsSetBlockInfo",
          "old_text": null,
          "new_text": "tsSetBlockInfo(pBlocks, pTableMeta, numOfRows)",
          "old_line_content": "  int32_t  code = TSDB_CODE_SUCCESS;",
          "new_line_content": "  code = tsSetBlockInfo(pBlocks, pTableMeta, numOfRows);",
          "content_same": false
        },
        {
          "line": 1394,
          "old_api": null,
          "new_api": "tscInvalidSQLErrMsg",
          "old_text": null,
          "new_text": "tscInvalidSQLErrMsg(pCmd->payload, \"too many rows in sql, total number of rows should be less than 32767\", NULL)",
          "old_line_content": "  pSql->res.numOfRows = 0;",
          "new_line_content": "    return tscInvalidSQLErrMsg(pCmd->payload, \"too many rows in sql, total number of rows should be less than 32767\", NULL);",
          "content_same": false
        },
        {
          "line": 884,
          "old_api": null,
          "new_api": "tsParseOneColumn",
          "old_text": null,
          "new_text": "tsParseOneColumn(pSchema, &sToken, tagVal, pCmd->payload, &sql, false, tinfo.precision)",
          "old_line_content": "",
          "new_line_content": "      code = tsParseOneColumn(pSchema, &sToken, tagVal, pCmd->payload, &sql, false, tinfo.precision);",
          "content_same": false
        },
        {
          "line": 886,
          "old_api": null,
          "new_api": "tdDestroyKVRowBuilder",
          "old_text": null,
          "new_text": "tdDestroyKVRowBuilder(&kvRowBuilder)",
          "old_line_content": "      if (TK_STRING == sToken.type) {",
          "new_line_content": "        tdDestroyKVRowBuilder(&kvRowBuilder);",
          "content_same": false
        },
        {
          "line": 1401,
          "old_api": null,
          "new_api": "taosArrayGetP",
          "old_text": null,
          "new_text": "taosArrayGetP(pCmd->pDataBlocks, 0)",
          "old_line_content": "  if (code != TSDB_CODE_SUCCESS) {",
          "new_line_content": "  STableDataBlocks *pDataBlock = taosArrayGetP(pCmd->pDataBlocks, 0);",
          "content_same": false
        },
        {
          "line": 890,
          "old_api": null,
          "new_api": "tdAddColToKVRow",
          "old_text": null,
          "new_text": "tdAddColToKVRow(&kvRowBuilder, pSchema->colId, pSchema->type, tagVal)",
          "old_line_content": "",
          "new_line_content": "      tdAddColToKVRow(&kvRowBuilder, pSchema->colId, pSchema->type, tagVal);",
          "content_same": false
        },
        {
          "line": 893,
          "old_api": null,
          "new_api": "tscDestroyBoundColumnInfo",
          "old_text": null,
          "new_text": "tscDestroyBoundColumnInfo(&spd)",
          "old_line_content": "      if (code != TSDB_CODE_SUCCESS) {",
          "new_line_content": "    tscDestroyBoundColumnInfo(&spd);",
          "content_same": false
        },
        {
          "line": 1406,
          "old_api": null,
          "new_api": "tscProcessSql",
          "old_text": null,
          "new_text": "tscProcessSql(pSql)",
          "old_line_content": "    return code;",
          "new_line_content": "  return tscProcessSql(pSql);",
          "content_same": false
        },
        {
          "line": 895,
          "old_api": null,
          "new_api": "tdGetKVRowFromBuilder",
          "old_text": null,
          "new_text": "tdGetKVRowFromBuilder(&kvRowBuilder)",
          "old_line_content": "        return code;",
          "new_line_content": "    SKVRow row = tdGetKVRowFromBuilder(&kvRowBuilder);",
          "content_same": false
        },
        {
          "line": 896,
          "old_api": null,
          "new_api": "tdDestroyKVRowBuilder",
          "old_text": null,
          "new_text": "tdDestroyKVRowBuilder(&kvRowBuilder)",
          "old_line_content": "      }",
          "new_line_content": "    tdDestroyKVRowBuilder(&kvRowBuilder);",
          "content_same": false
        },
        {
          "line": 900,
          "old_api": null,
          "new_api": "tdSortKVRowByColIdx",
          "old_text": null,
          "new_text": "tdSortKVRowByColIdx(row)",
          "old_line_content": "",
          "new_line_content": "    tdSortKVRowByColIdx(row);",
          "content_same": false
        },
        {
          "line": 902,
          "old_api": null,
          "new_api": "kvRowLen",
          "old_text": null,
          "new_text": "kvRowLen(row)",
          "old_line_content": "",
          "new_line_content": "    pCmd->tagData.dataLen = kvRowLen(row);",
          "content_same": false
        },
        {
          "line": 1415,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(param != NULL && tres != NULL)",
          "old_line_content": "}",
          "new_line_content": "  assert(param != NULL && tres != NULL);",
          "content_same": false
        },
        {
          "line": 907,
          "old_api": null,
          "new_api": "realloc",
          "old_text": null,
          "new_text": "realloc(pCmd->tagData.data, pCmd->tagData.dataLen)",
          "old_line_content": "    }",
          "new_line_content": "    char* pTag = realloc(pCmd->tagData.data, pCmd->tagData.dataLen);",
          "content_same": false
        },
        {
          "line": 913,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(row)",
          "old_line_content": "    }",
          "new_line_content": "    free(row);",
          "content_same": false
        },
        {
          "line": 917,
          "old_api": null,
          "new_api": "tStrGetToken",
          "old_text": null,
          "new_text": "tStrGetToken(sql, &index, false)",
          "old_line_content": "      return TSDB_CODE_TSC_OUT_OF_MEMORY;",
          "new_line_content": "    sToken = tStrGetToken(sql, &index, false);",
          "content_same": false
        },
        {
          "line": 1437,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(pSql->res.numOfRows == 0)",
          "old_line_content": "",
          "new_line_content": "    assert(pSql->res.numOfRows == 0);",
          "content_same": false
        },
        {
          "line": 1438,
          "old_api": null,
          "new_api": "fseek",
          "old_text": null,
          "new_text": "fseek(fp, 0, SEEK_SET)",
          "old_line_content": "  SSqlObj *pParentSql = pSupporter->pSql;",
          "new_line_content": "    int32_t ret = fseek(fp, 0, SEEK_SET);",
          "content_same": false
        },
        {
          "line": 1440,
          "old_api": null,
          "new_api": "tstrerror",
          "old_text": null,
          "new_text": "tstrerror(errno)",
          "old_line_content": "",
          "new_line_content": "      tscError(\"0x%\"PRIx64\" failed to seek SEEK_SET since:%s\", pSql->self, tstrerror(errno));",
          "content_same": false
        },
        {
          "line": 1441,
          "old_api": null,
          "new_api": "TAOS_SYSTEM_ERROR",
          "old_text": null,
          "new_text": "TAOS_SYSTEM_ERROR(errno)",
          "old_line_content": "  int32_t code = pSql->res.code;",
          "new_line_content": "      code = TAOS_SYSTEM_ERROR(errno);",
          "content_same": false
        },
        {
          "line": 933,
          "old_api": null,
          "new_api": "tscSQLSyntaxErrMsg",
          "old_text": null,
          "new_text": "tscSQLSyntaxErrMsg(pCmd->payload, \"bind columns again\", sToken.z)",
          "old_line_content": "     * (normal_col1, normal_col2) values(normal_col1_val, normal_col2_val);",
          "new_line_content": "        return tscSQLSyntaxErrMsg(pCmd->payload, \"bind columns again\", sToken.z);",
          "content_same": false
        },
        {
          "line": 1451,
          "old_api": null,
          "new_api": "tscGetTableMetaInfoFromCmd",
          "old_text": null,
          "new_text": "tscGetTableMetaInfoFromCmd(pCmd, pCmd->clauseIndex, 0)",
          "old_line_content": "    }",
          "new_line_content": "  STableMetaInfo *pTableMetaInfo = tscGetTableMetaInfoFromCmd(pCmd, pCmd->clauseIndex, 0);",
          "content_same": false
        },
        {
          "line": 940,
          "old_api": null,
          "new_api": "tStrGetToken",
          "old_text": null,
          "new_text": "tStrGetToken(sql, &index, false)",
          "old_line_content": "      if (*boundColumn != NULL) {",
          "new_line_content": "        sToken = tStrGetToken(sql, &index, false);",
          "content_same": false
        },
        {
          "line": 1453,
          "old_api": null,
          "new_api": "tscGetTableInfo",
          "old_text": null,
          "new_text": "tscGetTableInfo(pTableMeta)",
          "old_line_content": "    goto _error;",
          "new_line_content": "  STableComInfo   tinfo = tscGetTableInfo(pTableMeta);",
          "content_same": false
        },
        {
          "line": 1455,
          "old_api": null,
          "new_api": "destroyTableNameList",
          "old_text": null,
          "new_text": "destroyTableNameList(pCmd)",
          "old_line_content": "",
          "new_line_content": "  destroyTableNameList(pCmd);",
          "content_same": false
        },
        {
          "line": 1457,
          "old_api": null,
          "new_api": "tscDestroyBlockArrayList",
          "old_text": null,
          "new_text": "tscDestroyBlockArrayList(pCmd->pDataBlocks)",
          "old_line_content": "  pParentSql->res.numOfRows += pSql->res.numOfRows;",
          "new_line_content": "  pCmd->pDataBlocks = tscDestroyBlockArrayList(pCmd->pDataBlocks);",
          "content_same": false
        },
        {
          "line": 1460,
          "old_api": null,
          "new_api": "taosGetDefaultHashFunction",
          "old_text": null,
          "new_text": "taosGetDefaultHashFunction(TSDB_DATA_TYPE_BIGINT)",
          "old_line_content": "  STableMeta *    pTableMeta = pTableMetaInfo->pTableMeta;",
          "new_line_content": "    pCmd->pTableBlockHashList = taosHashInit(16, taosGetDefaultHashFunction(TSDB_DATA_TYPE_BIGINT), true, false);",
          "content_same": false
        },
        {
          "line": 954,
          "old_api": null,
          "new_api": "tStrGetToken",
          "old_text": null,
          "new_text": "tStrGetToken(sql, &index, false)",
          "old_line_content": "        sql += index;",
          "new_line_content": "      sToken = tStrGetToken(sql, &index, false);",
          "content_same": false
        },
        {
          "line": 1469,
          "old_api": null,
          "new_api": "tscGetDataBlockFromList",
          "old_text": null,
          "new_text": "tscGetDataBlockFromList(pCmd->pTableBlockHashList, pTableMeta->id.uid, TSDB_PAYLOAD_SIZE, sizeof(SSubmitBlk),\n                              tinfo.rowSize, &pTableMetaInfo->name, pTableMeta, &pTableDataBlock, NULL)",
          "old_line_content": "    if (pCmd->pTableBlockHashList == NULL) {",
          "new_line_content": "      tscGetDataBlockFromList(pCmd->pTableBlockHashList, pTableMeta->id.uid, TSDB_PAYLOAD_SIZE, sizeof(SSubmitBlk),",
          "content_same": false
        },
        {
          "line": 959,
          "old_api": null,
          "new_api": "tscValidateName",
          "old_text": null,
          "new_text": "tscValidateName(&tableToken)",
          "old_line_content": "        return TSDB_CODE_TSC_INVALID_SQL;",
          "new_line_content": "    if (tscValidateName(&tableToken) != TSDB_CODE_SUCCESS) {",
          "content_same": false
        },
        {
          "line": 960,
          "old_api": null,
          "new_api": "tscInvalidSQLErrMsg",
          "old_text": null,
          "new_text": "tscInvalidSQLErrMsg(pCmd->payload, \"invalid table name\", *sqlstr)",
          "old_line_content": "      }",
          "new_line_content": "      return tscInvalidSQLErrMsg(pCmd->payload, \"invalid table name\", *sqlstr);",
          "content_same": false
        },
        {
          "line": 963,
          "old_api": null,
          "new_api": "tscSetTableFullName",
          "old_text": null,
          "new_text": "tscSetTableFullName(pTableMetaInfo, &tableToken, pSql)",
          "old_line_content": "    }",
          "new_line_content": "    int32_t ret = tscSetTableFullName(pTableMetaInfo, &tableToken, pSql);",
          "content_same": false
        },
        {
          "line": 1476,
          "old_api": null,
          "new_api": "tscAllocateMemIfNeed",
          "old_text": null,
          "new_text": "tscAllocateMemIfNeed(pTableDataBlock, tinfo.rowSize, &maxRows)",
          "old_line_content": "  int32_t           ret =",
          "new_line_content": "  tscAllocateMemIfNeed(pTableDataBlock, tinfo.rowSize, &maxRows);",
          "content_same": false
        },
        {
          "line": 1483,
          "old_api": null,
          "new_api": "tgetline",
          "old_text": null,
          "new_text": "tgetline(&line, &n, fp)",
          "old_line_content": "",
          "new_line_content": "  while ((readLen = tgetline(&line, &n, fp)) != -1) {",
          "content_same": false
        },
        {
          "line": 972,
          "old_api": null,
          "new_api": "tscGetTableMetaEx",
          "old_text": null,
          "new_text": "tscGetTableMetaEx(pSql, pTableMetaInfo, true)",
          "old_line_content": "    if (ret != TSDB_CODE_SUCCESS) {",
          "new_line_content": "    code = tscGetTableMetaEx(pSql, pTableMetaInfo, true);",
          "content_same": false
        },
        {
          "line": 1493,
          "old_api": null,
          "new_api": "strtolower",
          "old_text": null,
          "new_text": "strtolower(line, line)",
          "old_line_content": "      line[--readLen] = 0;",
          "new_line_content": "    strtolower(line, line);",
          "content_same": false
        },
        {
          "line": 984,
          "old_api": null,
          "new_api": "tscGetTableMetaEx",
          "old_text": null,
          "new_text": "tscGetTableMetaEx(pSql, pTableMetaInfo, false)",
          "old_line_content": "    ",
          "new_line_content": "    code = tscGetTableMetaEx(pSql, pTableMetaInfo, false);",
          "content_same": false
        },
        {
          "line": 1496,
          "old_api": null,
          "new_api": "tsParseOneRow",
          "old_text": null,
          "new_text": "tsParseOneRow(&lineptr, pTableDataBlock, pCmd, tinfo.precision, &len, tokenBuf)",
          "old_line_content": "    if (readLen == 0) {",
          "new_line_content": "    code = tsParseOneRow(&lineptr, pTableDataBlock, pCmd, tinfo.precision, &len, tokenBuf);",
          "content_same": false
        },
        {
          "line": 986,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(code == TSDB_CODE_TSC_ACTION_IN_PROGRESS)",
          "old_line_content": "    sql = sToken.z;",
          "new_line_content": "      assert(code == TSDB_CODE_TSC_ACTION_IN_PROGRESS);",
          "content_same": false
        },
        {
          "line": 996,
          "old_api": null,
          "new_api": "tstrncpy",
          "old_text": null,
          "new_text": "tstrncpy(psTblToken->z, tblName, TSDB_TABLE_FNAME_LEN)",
          "old_line_content": "  }",
          "new_line_content": "  tstrncpy(psTblToken->z, tblName, TSDB_TABLE_FNAME_LEN);",
          "content_same": false
        },
        {
          "line": 1509,
          "old_api": null,
          "new_api": "tfree",
          "old_text": null,
          "new_text": "tfree(tokenBuf)",
          "old_line_content": "",
          "new_line_content": "  tfree(tokenBuf);",
          "content_same": false
        },
        {
          "line": 1510,
          "old_api": null,
          "new_api": "tfree",
          "old_text": null,
          "new_text": "tfree(line)",
          "old_line_content": "    pTableDataBlock->size += len;",
          "new_line_content": "  tfree(line);",
          "content_same": false
        },
        {
          "line": 1000,
          "old_api": null,
          "new_api": "tSQLGetToken",
          "old_text": null,
          "new_text": "tSQLGetToken(psTblToken->z, &psTblToken->type)",
          "old_line_content": "  return code;",
          "new_line_content": "  tSQLGetToken(psTblToken->z, &psTblToken->type);",
          "content_same": false
        },
        {
          "line": 1002,
          "old_api": null,
          "new_api": "tscValidateName",
          "old_text": null,
          "new_text": "tscValidateName(psTblToken)",
          "old_line_content": "",
          "new_line_content": "  return tscValidateName(psTblToken);",
          "content_same": false
        },
        {
          "line": 1515,
          "old_api": null,
          "new_api": "doPackSendDataBlock",
          "old_text": null,
          "new_text": "doPackSendDataBlock(pSql, count, pTableDataBlock)",
          "old_line_content": "  }",
          "new_line_content": "      code = doPackSendDataBlock(pSql, count, pTableDataBlock);",
          "content_same": false
        },
        {
          "line": 1007,
          "old_api": null,
          "new_api": "tscInvalidSQLErrMsg",
          "old_text": null,
          "new_text": "tscInvalidSQLErrMsg(pCmd->payload, \"keyword VALUES and FILE are not allowed to mix up\", sql)",
          "old_line_content": "  psTblToken->type = TK_ID;",
          "new_line_content": "    return tscInvalidSQLErrMsg(pCmd->payload, \"keyword VALUES and FILE are not allowed to mix up\", sql);",
          "content_same": false
        },
        {
          "line": 1522,
          "old_api": null,
          "new_api": "taos_free_result",
          "old_text": null,
          "new_text": "taos_free_result(pSql)",
          "old_line_content": "    if (count > 0) {",
          "new_line_content": "      taos_free_result(pSql);",
          "content_same": false
        },
        {
          "line": 1524,
          "old_api": null,
          "new_api": "fclose",
          "old_text": null,
          "new_text": "fclose(fp)",
          "old_line_content": "      if (code == TSDB_CODE_SUCCESS) {",
          "new_line_content": "      fclose(fp);",
          "content_same": false
        },
        {
          "line": 1018,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(pColInfo->boundedColumns, 0, sizeof(int32_t) * pColInfo->numOfCols)",
          "old_line_content": "  pCmd->dataSourceType = type;",
          "new_line_content": "  memset(pColInfo->boundedColumns, 0, sizeof(int32_t) * pColInfo->numOfCols);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 1544,
          "old_api": "tfree",
          "new_api": null,
          "old_text": "tfree(tokenBuf)",
          "new_text": null,
          "old_line_content": "  tfree(tokenBuf);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1545,
          "old_api": "tfree",
          "new_api": null,
          "old_text": "tfree(line)",
          "new_text": null,
          "old_line_content": "  tfree(line);",
          "new_line_content": "void tscImportDataFromFile(SSqlObj *pSql) {",
          "content_same": false
        },
        {
          "line": 1034,
          "old_api": "tStrGetToken",
          "new_api": null,
          "old_text": "tStrGetToken(str, &index, false)",
          "new_text": null,
          "old_line_content": "  SStrToken sToken = tStrGetToken(str, &index, false);",
          "new_line_content": "  while (1) {",
          "content_same": false
        },
        {
          "line": 1546,
          "old_api": "taos_free_result",
          "new_api": null,
          "old_text": "taos_free_result(pSql)",
          "new_text": null,
          "old_line_content": "  taos_free_result(pSql);",
          "new_line_content": "  SSqlCmd *pCmd = &pSql->cmd;",
          "content_same": false
        },
        {
          "line": 1547,
          "old_api": "tfree",
          "new_api": null,
          "old_text": "tfree(pSupporter)",
          "new_text": null,
          "old_line_content": "  tfree(pSupporter);",
          "new_line_content": "  if (pCmd->command != TSDB_SQL_INSERT) {",
          "content_same": false
        },
        {
          "line": 1548,
          "old_api": "fclose",
          "new_api": null,
          "old_text": "fclose(fp)",
          "new_text": null,
          "old_line_content": "  fclose(fp);",
          "new_line_content": "    return;",
          "content_same": false
        },
        {
          "line": 1038,
          "old_api": "tscInvalidSQLErrMsg",
          "new_api": null,
          "old_text": "tscInvalidSQLErrMsg(pCmd->payload, \"( is expected\", sToken.z)",
          "new_text": null,
          "old_line_content": "    code = tscInvalidSQLErrMsg(pCmd->payload, \"( is expected\", sToken.z);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1550,
          "old_api": "tscAsyncResultOnError",
          "new_api": null,
          "old_text": "tscAsyncResultOnError(pParentSql)",
          "new_text": null,
          "old_line_content": "  tscAsyncResultOnError(pParentSql);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1044,
          "old_api": "tStrGetToken",
          "new_api": null,
          "old_text": "tStrGetToken(str, &index, false)",
          "new_text": null,
          "old_line_content": "    sToken = tStrGetToken(str, &index, false);",
          "new_line_content": "      if (end != NULL) {  // set the end position",
          "content_same": false
        },
        {
          "line": 1048,
          "old_api": "tscDequoteAndTrimToken",
          "new_api": null,
          "old_text": "tscDequoteAndTrimToken(&sToken)",
          "new_text": null,
          "old_line_content": "      tscDequoteAndTrimToken(&sToken);",
          "new_line_content": "      break;",
          "content_same": false
        },
        {
          "line": 1561,
          "old_api": "calloc",
          "new_api": null,
          "old_text": "calloc(1, sizeof(SImportFileSupport))",
          "new_text": null,
          "old_line_content": "  SImportFileSupport *pSupporter = calloc(1, sizeof(SImportFileSupport));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1565,
          "old_api": "fopen",
          "new_api": null,
          "old_text": "fopen(pCmd->payload, \"rb\")",
          "new_text": null,
          "old_line_content": "  FILE *fp = fopen(pCmd->payload, \"rb\");",
          "new_line_content": "    return;",
          "content_same": false
        },
        {
          "line": 1567,
          "old_api": "TAOS_SYSTEM_ERROR",
          "new_api": null,
          "old_text": "TAOS_SYSTEM_ERROR(errno)",
          "new_text": null,
          "old_line_content": "    pSql->res.code = TAOS_SYSTEM_ERROR(errno);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1568,
          "old_api": "tstrerror",
          "new_api": null,
          "old_text": "tstrerror(pSql->res.code)",
          "new_text": null,
          "old_line_content": "    tscError(\"0x%\"PRIx64\" failed to open file %s to load data from file, code:%s\", pSql->self, pCmd->payload, tstrerror(pSql->res.code));",
          "new_line_content": "  pSupporter->pSql = pSql;",
          "content_same": false
        },
        {
          "line": 1570,
          "old_api": "tfree",
          "new_api": null,
          "old_text": "tfree(pSupporter)",
          "new_text": null,
          "old_line_content": "    tfree(pSupporter);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1572,
          "old_api": "tscAsyncResultOnError",
          "new_api": null,
          "old_text": "tscAsyncResultOnError(pSql)",
          "new_text": null,
          "old_line_content": "    tscAsyncResultOnError(pSql);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1063,
          "old_api": "strlen",
          "new_api": null,
          "old_text": "strlen(pSchema[t].name)",
          "new_text": null,
          "old_line_content": "      if (strncmp(sToken.z, pSchema[t].name, sToken.n) == 0 && strlen(pSchema[t].name) == sToken.n) {",
          "new_line_content": "        pColInfo->numOfBound += 1;",
          "content_same": false
        },
        {
          "line": 1065,
          "old_api": "tscInvalidSQLErrMsg",
          "new_api": null,
          "old_text": "tscInvalidSQLErrMsg(pCmd->payload, \"duplicated column name\", sToken.z)",
          "new_text": null,
          "old_line_content": "          code = tscInvalidSQLErrMsg(pCmd->payload, \"duplicated column name\", sToken.z);",
          "new_line_content": "        break;",
          "content_same": false
        },
        {
          "line": 1579,
          "old_api": "parseFileSendDataBlock",
          "new_api": null,
          "old_text": "parseFileSendDataBlock(pSupporter, pNew, TSDB_CODE_SUCCESS)",
          "new_text": null,
          "old_line_content": "  parseFileSendDataBlock(pSupporter, pNew, TSDB_CODE_SUCCESS);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1078,
          "old_api": "tscInvalidSQLErrMsg",
          "new_api": null,
          "old_text": "tscInvalidSQLErrMsg(pCmd->payload, \"invalid column/tag name\", sToken.z)",
          "new_text": null,
          "old_line_content": "      code = tscInvalidSQLErrMsg(pCmd->payload, \"invalid column/tag name\", sToken.z);",
          "new_line_content": "  _clean:",
          "content_same": false
        },
        {
          "line": 1083,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(&pColInfo->boundedColumns[pColInfo->numOfBound], 0 , sizeof(int32_t) * (pColInfo->numOfCols - pColInfo->numOfBound))",
          "new_text": null,
          "old_line_content": "  memset(&pColInfo->boundedColumns[pColInfo->numOfBound], 0 , sizeof(int32_t) * (pColInfo->numOfCols - pColInfo->numOfBound));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1104,
          "old_api": "tscGetQueryInfoDetail",
          "new_api": null,
          "old_text": "tscGetQueryInfoDetail(pCmd, 0)",
          "new_text": null,
          "old_line_content": "  SQueryInfo *pQueryInfo = tscGetQueryInfoDetail(pCmd, 0);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 1105,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(pQueryInfo != NULL)",
          "new_text": null,
          "old_line_content": "  assert(pQueryInfo != NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1107,
          "old_api": "tscGetMetaInfo",
          "new_api": null,
          "old_text": "tscGetMetaInfo(pQueryInfo, 0)",
          "new_text": null,
          "old_line_content": "  STableMetaInfo *pTableMetaInfo = (pQueryInfo->numOfTables == 0)? tscAddEmptyMetaInfo(pQueryInfo):tscGetMetaInfo(pQueryInfo, 0);",
          "new_line_content": "    return code;",
          "content_same": false
        },
        {
          "line": 1114,
          "old_api": "tscAllocPayload",
          "new_api": null,
          "old_text": "tscAllocPayload(pCmd, TSDB_DEFAULT_PAYLOAD_SIZE)",
          "new_text": null,
          "old_line_content": "  if ((code = tscAllocPayload(pCmd, TSDB_DEFAULT_PAYLOAD_SIZE)) != TSDB_CODE_SUCCESS) {",
          "new_line_content": "      goto _clean;",
          "content_same": false
        },
        {
          "line": 1119,
          "old_api": "taosGetDefaultHashFunction",
          "new_api": null,
          "old_text": "taosGetDefaultHashFunction(TSDB_DATA_TYPE_BIGINT)",
          "new_text": null,
          "old_line_content": "    pCmd->pTableBlockHashList = taosHashInit(128, taosGetDefaultHashFunction(TSDB_DATA_TYPE_BIGINT), true, false);",
          "new_line_content": "  ",
          "content_same": false
        },
        {
          "line": 1128,
          "old_api": "tscDebug",
          "new_api": null,
          "old_text": "tscDebug(\"0x%\"PRIx64\" create data block list hashList:%p\", pSql->self, pCmd->pTableBlockHashList)",
          "new_text": null,
          "old_line_content": "  tscDebug(\"0x%\"PRIx64\" create data block list hashList:%p\", pSql->self, pCmd->pTableBlockHashList);",
          "new_line_content": "      /*",
          "content_same": false
        },
        {
          "line": 1132,
          "old_api": "tStrGetToken",
          "new_api": null,
          "old_text": "tStrGetToken(str, &index, false)",
          "new_text": null,
          "old_line_content": "    SStrToken sToken = tStrGetToken(str, &index, false);",
          "new_line_content": "      if (pCmd->dataSourceType == DATA_FROM_DATA_FILE) {",
          "content_same": false
        },
        {
          "line": 1161,
          "old_api": "validateTableName",
          "new_api": null,
          "old_text": "validateTableName(sToken.z, sToken.n, &sTblToken)",
          "new_text": null,
          "old_line_content": "    if (validateTableName(sToken.z, sToken.n, &sTblToken) != TSDB_CODE_SUCCESS) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1162,
          "old_api": "tscInvalidSQLErrMsg",
          "new_api": null,
          "old_text": "tscInvalidSQLErrMsg(pCmd->payload, \"table name invalid\", sToken.z)",
          "new_text": null,
          "old_line_content": "      code = tscInvalidSQLErrMsg(pCmd->payload, \"table name invalid\", sToken.z);",
          "new_line_content": "    char *bindedColumns = NULL;",
          "content_same": false
        },
        {
          "line": 1166,
          "old_api": "tscSetTableFullName",
          "new_api": null,
          "old_text": "tscSetTableFullName(pTableMetaInfo, &sTblToken, pSql)",
          "new_text": null,
          "old_line_content": "    if ((code = tscSetTableFullName(pTableMetaInfo, &sTblToken, pSql)) != TSDB_CODE_SUCCESS) {",
          "new_line_content": "       * And during the getTableMetaCallback function, the sql string will be parsed from the paused position.",
          "content_same": false
        },
        {
          "line": 1171,
          "old_api": "tscCheckIfCreateTable",
          "new_api": null,
          "old_text": "tscCheckIfCreateTable(&str, pSql, &bindedColumns)",
          "new_text": null,
          "old_line_content": "    if ((code = tscCheckIfCreateTable(&str, pSql, &bindedColumns)) != TSDB_CODE_SUCCESS) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1180,
          "old_api": "tstrerror",
          "new_api": null,
          "old_text": "tstrerror(code)",
          "new_text": null,
          "old_line_content": "      tscError(\"0x%\"PRIx64\" async insert parse error, code:%s\", pSql->self, tstrerror(code));",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1185,
          "old_api": "UTIL_TABLE_IS_SUPER_TABLE",
          "new_api": null,
          "old_text": "UTIL_TABLE_IS_SUPER_TABLE(pTableMetaInfo)",
          "new_text": null,
          "old_line_content": "    if (UTIL_TABLE_IS_SUPER_TABLE(pTableMetaInfo)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1186,
          "old_api": "tscInvalidSQLErrMsg",
          "new_api": null,
          "old_text": "tscInvalidSQLErrMsg(pCmd->payload, \"insert data into super table is not supported\", NULL)",
          "new_text": null,
          "old_line_content": "      code = tscInvalidSQLErrMsg(pCmd->payload, \"insert data into super table is not supported\", NULL);",
          "new_line_content": "    if (sToken.n == 0 || (sToken.type != TK_FILE && sToken.type != TK_VALUES)) {",
          "content_same": false
        },
        {
          "line": 1195,
          "old_api": "tscInvalidSQLErrMsg",
          "new_api": null,
          "old_text": "tscInvalidSQLErrMsg(pCmd->payload, \"keyword VALUES or FILE required\", sToken.z)",
          "new_text": null,
          "old_line_content": "      code = tscInvalidSQLErrMsg(pCmd->payload, \"keyword VALUES or FILE required\", sToken.z);",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 1199,
          "old_api": "tscGetTableInfo",
          "new_api": null,
          "old_text": "tscGetTableInfo(pTableMetaInfo->pTableMeta)",
          "new_text": null,
          "old_line_content": "    STableComInfo tinfo = tscGetTableInfo(pTableMetaInfo->pTableMeta);",
          "new_line_content": "      if (sToken.type != TK_STRING && sToken.type != TK_ID) {",
          "content_same": false
        },
        {
          "line": 1201,
          "old_api": "validateDataSource",
          "new_api": null,
          "old_text": "validateDataSource(pCmd, DATA_FROM_DATA_FILE, sToken.z)",
          "new_text": null,
          "old_line_content": "      if (validateDataSource(pCmd, DATA_FROM_DATA_FILE, sToken.z) != TSDB_CODE_SUCCESS) {",
          "new_line_content": "        goto _clean;",
          "content_same": false
        },
        {
          "line": 1206,
          "old_api": "tStrGetToken",
          "new_api": null,
          "old_text": "tStrGetToken(str, &index, false)",
          "new_text": null,
          "old_line_content": "      sToken = tStrGetToken(str, &index, false);",
          "new_line_content": "        goto _clean;",
          "content_same": false
        },
        {
          "line": 1208,
          "old_api": "tscInvalidSQLErrMsg",
          "new_api": null,
          "old_text": "tscInvalidSQLErrMsg(pCmd->payload, \"file path is required following keyword FILE\", sToken.z)",
          "new_text": null,
          "old_line_content": "        code = tscInvalidSQLErrMsg(pCmd->payload, \"file path is required following keyword FILE\", sToken.z);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1213,
          "old_api": "tscInvalidSQLErrMsg",
          "new_api": null,
          "old_text": "tscInvalidSQLErrMsg(pCmd->payload, \"file path is required following keyword FILE\", sToken.z)",
          "new_text": null,
          "old_line_content": "        code = tscInvalidSQLErrMsg(pCmd->payload, \"file path is required following keyword FILE\", sToken.z);",
          "new_line_content": "      wordexp_t full_path;",
          "content_same": false
        },
        {
          "line": 1217,
          "old_api": "strncpy",
          "new_api": null,
          "old_text": "strncpy(pCmd->payload, sToken.z, sToken.n)",
          "new_text": null,
          "old_line_content": "      strncpy(pCmd->payload, sToken.z, sToken.n);",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 1218,
          "old_api": "strdequote",
          "new_api": null,
          "old_text": "strdequote(pCmd->payload)",
          "new_text": null,
          "old_line_content": "      strdequote(pCmd->payload);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 708,
          "old_api": "calloc",
          "new_api": null,
          "old_text": "calloc(1, 16*1024)",
          "new_text": null,
          "old_line_content": "  char  *tmpTokenBuf = calloc(1, 16*1024);  // used for deleting Escape character: \\\\, \\', \\\"",
          "new_line_content": "  char tmpTokenBuf[16*1024] = {0};  // used for deleting Escape character: \\\\, \\', \\\"",
          "content_same": false
        },
        {
          "line": 1222,
          "old_api": "wordexp",
          "new_api": null,
          "old_text": "wordexp(pCmd->payload, &full_path, 0)",
          "new_text": null,
          "old_line_content": "      if (wordexp(pCmd->payload, &full_path, 0) != 0) {",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 1223,
          "old_api": "tscInvalidSQLErrMsg",
          "new_api": null,
          "old_text": "tscInvalidSQLErrMsg(pCmd->payload, \"invalid filename\", sToken.z)",
          "new_text": null,
          "old_line_content": "        code = tscInvalidSQLErrMsg(pCmd->payload, \"invalid filename\", sToken.z);",
          "new_line_content": "      if (bindedColumns == NULL) {",
          "content_same": false
        },
        {
          "line": 714,
          "old_api": "tsParseValues",
          "new_api": null,
          "old_text": "tsParseValues(str, dataBuf, maxNumOfRows, pCmd, &numOfRows, tmpTokenBuf)",
          "new_text": null,
          "old_line_content": "  code = tsParseValues(str, dataBuf, maxNumOfRows, pCmd, &numOfRows, tmpTokenBuf);",
          "new_line_content": "    SParamInfo *param = dataBuf->params + i;",
          "content_same": false
        },
        {
          "line": 1227,
          "old_api": "tstrncpy",
          "new_api": null,
          "old_text": "tstrncpy(pCmd->payload, full_path.we_wordv[0], pCmd->allocSize)",
          "new_text": null,
          "old_line_content": "      tstrncpy(pCmd->payload, full_path.we_wordv[0], pCmd->allocSize);",
          "new_line_content": "          goto _clean;",
          "content_same": false
        },
        {
          "line": 716,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(tmpTokenBuf)",
          "new_text": null,
          "old_line_content": "  free(tmpTokenBuf);",
          "new_line_content": "      param->idx = pCmd->numOfParams++;",
          "content_same": false
        },
        {
          "line": 1228,
          "old_api": "wordfree",
          "new_api": null,
          "old_text": "wordfree(&full_path)",
          "new_text": null,
          "old_line_content": "      wordfree(&full_path);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1234,
          "old_api": "validateDataSource",
          "new_api": null,
          "old_text": "validateDataSource(pCmd, DATA_FROM_SQL_STRING, sToken.z)",
          "new_text": null,
          "old_line_content": "        if (validateDataSource(pCmd, DATA_FROM_SQL_STRING, sToken.z) != TSDB_CODE_SUCCESS) {",
          "new_line_content": "        if (ret != TSDB_CODE_SUCCESS) {",
          "content_same": false
        },
        {
          "line": 1239,
          "old_api": "tscGetDataBlockFromList",
          "new_api": null,
          "old_text": "tscGetDataBlockFromList(pCmd->pTableBlockHashList, pTableMeta->id.uid, TSDB_DEFAULT_PAYLOAD_SIZE,\n                                              sizeof(SSubmitBlk), tinfo.rowSize, &pTableMetaInfo->name, pTableMeta,\n                                              &dataBuf, NULL)",
          "new_text": null,
          "old_line_content": "        int32_t ret = tscGetDataBlockFromList(pCmd->pTableBlockHashList, pTableMeta->id.uid, TSDB_DEFAULT_PAYLOAD_SIZE,",
          "new_line_content": "        if (code != TSDB_CODE_SUCCESS) {",
          "content_same": false
        },
        {
          "line": 730,
          "old_api": "tsSetBlockInfo",
          "new_api": null,
          "old_text": "tsSetBlockInfo(pBlocks, dataBuf->pTableMeta, numOfRows)",
          "new_text": null,
          "old_line_content": "  code = tsSetBlockInfo(pBlocks, dataBuf->pTableMeta, numOfRows);",
          "new_line_content": "  return TSDB_CODE_SUCCESS;",
          "content_same": false
        },
        {
          "line": 732,
          "old_api": "tscInvalidSQLErrMsg",
          "new_api": null,
          "old_text": "tscInvalidSQLErrMsg(pCmd->payload, \"too many rows in sql, total number of rows should be less than 32767\", *str)",
          "new_text": null,
          "old_line_content": "    tscInvalidSQLErrMsg(pCmd->payload, \"too many rows in sql, total number of rows should be less than 32767\", *str);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1252,
          "old_api": "tscGetTableMetaInfoFromCmd",
          "new_api": null,
          "old_text": "tscGetTableMetaInfoFromCmd(pCmd, pCmd->clauseIndex, 0)",
          "new_text": null,
          "old_line_content": "        STableMeta *pTableMeta = tscGetTableMetaInfoFromCmd(pCmd, pCmd->clauseIndex, 0)->pTableMeta;",
          "new_line_content": "                                              sizeof(SSubmitBlk), tinfo.rowSize, &pTableMetaInfo->name, pTableMeta,",
          "content_same": false
        },
        {
          "line": 1254,
          "old_api": "validateDataSource",
          "new_api": null,
          "old_text": "validateDataSource(pCmd, DATA_FROM_SQL_STRING, sToken.z)",
          "new_text": null,
          "old_line_content": "        if (validateDataSource(pCmd, DATA_FROM_SQL_STRING, sToken.z) != TSDB_CODE_SUCCESS) {",
          "new_line_content": "        if (ret != TSDB_CODE_SUCCESS) {",
          "content_same": false
        },
        {
          "line": 1266,
          "old_api": "tscGetTableSchema",
          "new_api": null,
          "old_text": "tscGetTableSchema(pTableMeta)",
          "new_text": null,
          "old_line_content": "        SSchema *pSchema = tscGetTableSchema(pTableMeta);",
          "new_line_content": "          goto _clean;",
          "content_same": false
        },
        {
          "line": 1267,
          "old_api": "parseBoundColumns",
          "new_api": null,
          "old_text": "parseBoundColumns(pCmd, &dataBuf->boundColumnInfo, pSchema, bindedColumns, NULL)",
          "new_text": null,
          "old_line_content": "        code = parseBoundColumns(pCmd, &dataBuf->boundColumnInfo, pSchema, bindedColumns, NULL);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 759,
          "old_api": "tStrGetToken",
          "new_api": null,
          "old_text": "tStrGetToken(sql, &index, false)",
          "new_text": null,
          "old_line_content": "  tableToken = tStrGetToken(sql, &index, false);",
          "new_line_content": "  int32_t numOfColList = 0;",
          "content_same": false
        },
        {
          "line": 1273,
          "old_api": "tscInvalidSQLErrMsg",
          "new_api": null,
          "old_text": "tscInvalidSQLErrMsg(pCmd->payload, \"primary timestamp column can not be null\", NULL)",
          "new_text": null,
          "old_line_content": "          code = tscInvalidSQLErrMsg(pCmd->payload, \"primary timestamp column can not be null\", NULL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 764,
          "old_api": "tStrGetToken",
          "new_api": null,
          "old_text": "tStrGetToken(sql, &index, false)",
          "new_text": null,
          "old_line_content": "  sToken = tStrGetToken(sql, &index, false);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1278,
          "old_api": "tscInvalidSQLErrMsg",
          "new_api": null,
          "old_text": "tscInvalidSQLErrMsg(pCmd->payload, \"keyword VALUES is expected\", sToken.z)",
          "new_text": null,
          "old_line_content": "          code = tscInvalidSQLErrMsg(pCmd->payload, \"keyword VALUES is expected\", sToken.z);",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 1282,
          "old_api": "doParseInsertStatement",
          "new_api": null,
          "old_text": "doParseInsertStatement(pCmd, &str, dataBuf, &totalNum)",
          "new_text": null,
          "old_line_content": "        code = doParseInsertStatement(pCmd, &str, dataBuf, &totalNum);",
          "new_line_content": "  // we need to keep the data blocks if there are parameters in the sql",
          "content_same": false
        },
        {
          "line": 775,
          "old_api": "tStrGetToken",
          "new_api": null,
          "old_text": "tStrGetToken(sql, &index, false)",
          "new_text": null,
          "old_line_content": "      sToken = tStrGetToken(sql, &index, false);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1295,
          "old_api": "taosHashGetSize",
          "new_api": null,
          "old_text": "taosHashGetSize(pCmd->pTableBlockHashList)",
          "new_text": null,
          "old_line_content": "  if (taosHashGetSize(pCmd->pTableBlockHashList) > 0) { // merge according to vgId",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1296,
          "old_api": "tscMergeTableDataBlocks",
          "new_api": null,
          "old_text": "tscMergeTableDataBlocks(pSql, true)",
          "new_text": null,
          "old_line_content": "    if ((code = tscMergeTableDataBlocks(pSql, true)) != TSDB_CODE_SUCCESS) {",
          "new_line_content": "_clean:",
          "content_same": false
        },
        {
          "line": 793,
          "old_api": "tscGetMetaInfo",
          "new_api": null,
          "old_text": "tscGetMetaInfo(pQueryInfo, TABLE_INDEX)",
          "new_text": null,
          "old_line_content": "  STableMetaInfo* pTableMetaInfo = tscGetMetaInfo(pQueryInfo, TABLE_INDEX);",
          "new_line_content": "    if (pQueryInfo->numOfTables < 2) {",
          "content_same": false
        },
        {
          "line": 802,
          "old_api": "tscAddEmptyMetaInfo",
          "new_api": null,
          "old_text": "tscAddEmptyMetaInfo(pQueryInfo)",
          "new_text": null,
          "old_line_content": "      tscAddEmptyMetaInfo(pQueryInfo);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 805,
          "old_api": "tscGetMetaInfo",
          "new_api": null,
          "old_text": "tscGetMetaInfo(pQueryInfo, STABLE_INDEX)",
          "new_text": null,
          "old_line_content": "    STableMetaInfo *pSTableMetaInfo = tscGetMetaInfo(pQueryInfo, STABLE_INDEX);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1319,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(sToken.type == TK_INSERT || sToken.type == TK_IMPORT)",
          "new_text": null,
          "old_line_content": "  assert(sToken.type == TK_INSERT || sToken.type == TK_IMPORT);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1324,
          "old_api": "tscGetQueryInfoDetailSafely",
          "new_api": null,
          "old_text": "tscGetQueryInfoDetailSafely(pCmd, pCmd->clauseIndex)",
          "new_text": null,
          "old_line_content": "  SQueryInfo *pQueryInfo = tscGetQueryInfoDetailSafely(pCmd, pCmd->clauseIndex);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 814,
          "old_api": "tscGetTableMeta",
          "new_api": null,
          "old_text": "tscGetTableMeta(pSql, pSTableMetaInfo)",
          "new_text": null,
          "old_line_content": "    code = tscGetTableMeta(pSql, pSTableMetaInfo);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1326,
          "old_api": "TSDB_QUERY_SET_TYPE",
          "new_api": null,
          "old_text": "TSDB_QUERY_SET_TYPE(pQueryInfo->type, TSDB_QUERY_TYPE_INSERT | pCmd->insertType)",
          "new_text": null,
          "old_line_content": "  TSDB_QUERY_SET_TYPE(pQueryInfo->type, TSDB_QUERY_TYPE_INSERT | pCmd->insertType);",
          "new_line_content": "  return TSDB_CODE_SUCCESS;",
          "content_same": false
        },
        {
          "line": 1328,
          "old_api": "tStrGetToken",
          "new_api": null,
          "old_text": "tStrGetToken(pSql->sqlstr, &index, false)",
          "new_text": null,
          "old_line_content": "  sToken = tStrGetToken(pSql->sqlstr, &index, false);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1330,
          "old_api": "tscInvalidSQLErrMsg",
          "new_api": null,
          "old_text": "tscInvalidSQLErrMsg(pCmd->payload, \"keyword INTO is expected\", sToken.z)",
          "new_text": null,
          "old_line_content": "    return tscInvalidSQLErrMsg(pCmd->payload, \"keyword INTO is expected\", sToken.z);",
          "new_line_content": "  int32_t ret = TSDB_CODE_SUCCESS;",
          "content_same": false
        },
        {
          "line": 820,
          "old_api": "tscInvalidSQLErrMsg",
          "new_api": null,
          "old_text": "tscInvalidSQLErrMsg(pCmd->payload, \"create table only from super table is allowed\", sToken.z)",
          "new_text": null,
          "old_line_content": "      return tscInvalidSQLErrMsg(pCmd->payload, \"create table only from super table is allowed\", sToken.z);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 823,
          "old_api": "tscGetTableTagSchema",
          "new_api": null,
          "old_text": "tscGetTableTagSchema(pSTableMetaInfo->pTableMeta)",
          "new_text": null,
          "old_line_content": "    SSchema *pTagSchema = tscGetTableTagSchema(pSTableMetaInfo->pTableMeta);",
          "new_line_content": "    if (sToken.type != TK_TAGS && sToken.type != TK_LP) {",
          "content_same": false
        },
        {
          "line": 827,
          "old_api": "tscGetNumOfTags",
          "new_api": null,
          "old_text": "tscGetNumOfTags(pSTableMetaInfo->pTableMeta)",
          "new_text": null,
          "old_line_content": "    tscSetBoundColumnInfo(&spd, pTagSchema, tscGetNumOfTags(pSTableMetaInfo->pTableMeta));",
          "new_line_content": "    // parse the bound tags column",
          "content_same": false
        },
        {
          "line": 830,
          "old_api": "tStrGetToken",
          "new_api": null,
          "old_text": "tStrGetToken(sql, &index, false)",
          "new_text": null,
          "old_line_content": "    sToken = tStrGetToken(sql, &index, false);",
          "new_line_content": "       * insert into tablename (col1, col2,..., coln) using superTableName (tagName1, tagName2, ..., tagNamen)",
          "content_same": false
        },
        {
          "line": 832,
          "old_api": "tscInvalidSQLErrMsg",
          "new_api": null,
          "old_text": "tscInvalidSQLErrMsg(pCmd->payload, \"keyword TAGS expected\", sToken.z)",
          "new_text": null,
          "old_line_content": "      return tscInvalidSQLErrMsg(pCmd->payload, \"keyword TAGS expected\", sToken.z);",
          "new_line_content": "       */",
          "content_same": false
        },
        {
          "line": 1345,
          "old_api": "tscAllocPayload",
          "new_api": null,
          "old_text": "tscAllocPayload(&pSql->cmd, TSDB_DEFAULT_PAYLOAD_SIZE)",
          "new_text": null,
          "old_line_content": "  ret = tscAllocPayload(&pSql->cmd, TSDB_DEFAULT_PAYLOAD_SIZE);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1350,
          "old_api": "tscIsInsertData",
          "new_api": null,
          "old_text": "tscIsInsertData(pSql->sqlstr)",
          "new_text": null,
          "old_line_content": "  if (tscIsInsertData(pSql->sqlstr)) {",
          "new_line_content": "    if (/*(sqlstr == NULL) || */(pSql->parseRetry >= 1) ||",
          "content_same": false
        },
        {
          "line": 1351,
          "old_api": "tsInsertInitialCheck",
          "new_api": null,
          "old_text": "tsInsertInitialCheck(pSql)",
          "new_text": null,
          "old_line_content": "    if (initial && ((ret = tsInsertInitialCheck(pSql)) != TSDB_CODE_SUCCESS)) {",
          "new_line_content": "        (ret != TSDB_CODE_TSC_SQL_SYNTAX_ERROR && ret != TSDB_CODE_TSC_INVALID_SQL)) {",
          "content_same": false
        },
        {
          "line": 1357,
          "old_api": "tsParseInsertSql",
          "new_api": null,
          "old_text": "tsParseInsertSql(pSql)",
          "new_text": null,
          "old_line_content": "    ret = tsParseInsertSql(pSql);",
          "new_line_content": "      pSql->parseRetry++;",
          "content_same": false
        },
        {
          "line": 850,
          "old_api": "tStrGetToken",
          "new_api": null,
          "old_text": "tStrGetToken(sql, &index, false)",
          "new_text": null,
          "old_line_content": "      sToken = tStrGetToken(sql, &index, false);",
          "new_line_content": "    sql += index;",
          "content_same": false
        },
        {
          "line": 1362,
          "old_api": "tscResetSqlCmd",
          "new_api": null,
          "old_text": "tscResetSqlCmd(pCmd, true)",
          "new_text": null,
          "old_line_content": "      tscResetSqlCmd(pCmd, true);",
          "new_line_content": "  } else {",
          "content_same": false
        },
        {
          "line": 1367,
          "old_api": "tsParseInsertSql",
          "new_api": null,
          "old_text": "tsParseInsertSql(pSql)",
          "new_text": null,
          "old_line_content": "        ret = tsParseInsertSql(pSql);",
          "new_line_content": "      pSql->parseRetry++;",
          "content_same": false
        },
        {
          "line": 1372,
          "old_api": "tscToSQLCmd",
          "new_api": null,
          "old_text": "tscToSQLCmd(pSql, &SQLInfo)",
          "new_text": null,
          "old_line_content": "    ret = tscToSQLCmd(pSql, &SQLInfo);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 861,
          "old_api": "tscInvalidSQLErrMsg",
          "new_api": null,
          "old_text": "tscInvalidSQLErrMsg(pCmd->payload, \"( is expected\", sToken.z)",
          "new_text": null,
          "old_line_content": "      return tscInvalidSQLErrMsg(pCmd->payload, \"( is expected\", sToken.z);",
          "new_line_content": "    for (int i = 0; i < spd.numOfBound; ++i) {",
          "content_same": false
        },
        {
          "line": 1374,
          "old_api": "tscResetSqlCmd",
          "new_api": null,
          "old_text": "tscResetSqlCmd(pCmd, true)",
          "new_text": null,
          "old_line_content": "      tscResetSqlCmd(pCmd, true);",
          "new_line_content": "  /*",
          "content_same": false
        },
        {
          "line": 1376,
          "old_api": "tscToSQLCmd",
          "new_api": null,
          "old_text": "tscToSQLCmd(pSql, &SQLInfo)",
          "new_text": null,
          "old_line_content": "      ret = tscToSQLCmd(pSql, &SQLInfo);",
          "new_line_content": "   * so do NOT use pRes->code to determine if the getTableMeta function",
          "content_same": false
        },
        {
          "line": 1379,
          "old_api": "SqlInfoDestroy",
          "new_api": null,
          "old_text": "SqlInfoDestroy(&SQLInfo)",
          "new_text": null,
          "old_line_content": "    SqlInfoDestroy(&SQLInfo);",
          "new_line_content": "   */",
          "content_same": false
        },
        {
          "line": 873,
          "old_api": "tStrGetToken",
          "new_api": null,
          "old_text": "tStrGetToken(sql, &index, true)",
          "new_text": null,
          "old_line_content": "      sToken = tStrGetToken(sql, &index, true);",
          "new_line_content": "      if (sToken.n == 0 || sToken.type == TK_RP) {",
          "content_same": false
        },
        {
          "line": 877,
          "old_api": "tdDestroyKVRowBuilder",
          "new_api": null,
          "old_text": "tdDestroyKVRowBuilder(&kvRowBuilder)",
          "new_text": null,
          "old_line_content": "        tdDestroyKVRowBuilder(&kvRowBuilder);",
          "new_line_content": "      // Remove quotation marks",
          "content_same": false
        },
        {
          "line": 1396,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(pCmd->numOfClause == 1)",
          "new_text": null,
          "old_line_content": "  assert(pCmd->numOfClause == 1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1400,
          "old_api": "tsSetBlockInfo",
          "new_api": null,
          "old_text": "tsSetBlockInfo(pBlocks, pTableMeta, numOfRows)",
          "new_text": null,
          "old_line_content": "  code = tsSetBlockInfo(pBlocks, pTableMeta, numOfRows);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 892,
          "old_api": "tsParseOneColumn",
          "new_api": null,
          "old_text": "tsParseOneColumn(pSchema, &sToken, tagVal, pCmd->payload, &sql, false, tinfo.precision)",
          "new_text": null,
          "old_line_content": "      code = tsParseOneColumn(pSchema, &sToken, tagVal, pCmd->payload, &sql, false, tinfo.precision);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1405,
          "old_api": "tscMergeTableDataBlocks",
          "new_api": null,
          "old_text": "tscMergeTableDataBlocks(pSql, true)",
          "new_text": null,
          "old_line_content": "  if ((code = tscMergeTableDataBlocks(pSql, true)) != TSDB_CODE_SUCCESS) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 894,
          "old_api": "tdDestroyKVRowBuilder",
          "new_api": null,
          "old_text": "tdDestroyKVRowBuilder(&kvRowBuilder)",
          "new_text": null,
          "old_line_content": "        tdDestroyKVRowBuilder(&kvRowBuilder);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1409,
          "old_api": "taosArrayGetP",
          "new_api": null,
          "old_text": "taosArrayGetP(pCmd->pDataBlocks, 0)",
          "new_text": null,
          "old_line_content": "  STableDataBlocks *pDataBlock = taosArrayGetP(pCmd->pDataBlocks, 0);",
          "new_line_content": "typedef struct SImportFileSupport {",
          "content_same": false
        },
        {
          "line": 1410,
          "old_api": "tscCopyDataBlockToPayload",
          "new_api": null,
          "old_text": "tscCopyDataBlockToPayload(pSql, pDataBlock)",
          "new_text": null,
          "old_line_content": "  if ((code = tscCopyDataBlockToPayload(pSql, pDataBlock)) != TSDB_CODE_SUCCESS) {",
          "new_line_content": "  SSqlObj *pSql;",
          "content_same": false
        },
        {
          "line": 901,
          "old_api": "tscDestroyBoundColumnInfo",
          "new_api": null,
          "old_text": "tscDestroyBoundColumnInfo(&spd)",
          "new_text": null,
          "old_line_content": "    tscDestroyBoundColumnInfo(&spd);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1414,
          "old_api": "tscProcessSql",
          "new_api": null,
          "old_text": "tscProcessSql(pSql)",
          "new_text": null,
          "old_line_content": "  return tscProcessSql(pSql);",
          "new_line_content": "static void parseFileSendDataBlock(void *param, TAOS_RES *tres, int32_t numOfRows) {",
          "content_same": false
        },
        {
          "line": 903,
          "old_api": "tdGetKVRowFromBuilder",
          "new_api": null,
          "old_text": "tdGetKVRowFromBuilder(&kvRowBuilder)",
          "new_text": null,
          "old_line_content": "    SKVRow row = tdGetKVRowFromBuilder(&kvRowBuilder);",
          "new_line_content": "    if (pCmd->tagData.dataLen <= 0){",
          "content_same": false
        },
        {
          "line": 906,
          "old_api": "tscInvalidSQLErrMsg",
          "new_api": null,
          "old_text": "tscInvalidSQLErrMsg(pCmd->payload, \"tag value expected\", NULL)",
          "new_text": null,
          "old_line_content": "      return tscInvalidSQLErrMsg(pCmd->payload, \"tag value expected\", NULL);",
          "new_line_content": "    ",
          "content_same": false
        },
        {
          "line": 908,
          "old_api": "tdSortKVRowByColIdx",
          "new_api": null,
          "old_text": "tdSortKVRowByColIdx(row)",
          "new_text": null,
          "old_line_content": "    tdSortKVRowByColIdx(row);",
          "new_line_content": "    if (pTag == NULL) {",
          "content_same": false
        },
        {
          "line": 910,
          "old_api": "kvRowLen",
          "new_api": null,
          "old_text": "kvRowLen(row)",
          "new_text": null,
          "old_line_content": "    pCmd->tagData.dataLen = kvRowLen(row);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1423,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(param != NULL && tres != NULL)",
          "new_text": null,
          "old_line_content": "  assert(param != NULL && tres != NULL);",
          "new_line_content": "  FILE *  fp   = NULL;",
          "content_same": false
        },
        {
          "line": 915,
          "old_api": "realloc",
          "new_api": null,
          "old_text": "realloc(pCmd->tagData.data, pCmd->tagData.dataLen)",
          "new_text": null,
          "old_line_content": "    char* pTag = realloc(pCmd->tagData.data, pCmd->tagData.dataLen);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 921,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(row)",
          "new_text": null,
          "old_line_content": "    free(row);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 925,
          "old_api": "tStrGetToken",
          "new_api": null,
          "old_text": "tStrGetToken(sql, &index, false)",
          "new_text": null,
          "old_line_content": "    sToken = tStrGetToken(sql, &index, false);",
          "new_line_content": "     * (normal_col1, normal_col2) values(normal_col1_val, normal_col2_val);",
          "content_same": false
        },
        {
          "line": 1445,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(pSql->res.numOfRows == 0)",
          "new_text": null,
          "old_line_content": "    assert(pSql->res.numOfRows == 0);",
          "new_line_content": "    goto _error;",
          "content_same": false
        },
        {
          "line": 1446,
          "old_api": "fseek",
          "new_api": null,
          "old_text": "fseek(fp, 0, SEEK_SET)",
          "new_text": null,
          "old_line_content": "    int32_t ret = fseek(fp, 0, SEEK_SET);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 936,
          "old_api": "tStrGetToken",
          "new_api": null,
          "old_text": "tStrGetToken(sql, &index, false)",
          "new_text": null,
          "old_line_content": "    sToken = tStrGetToken(sql, &index, false);",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 1448,
          "old_api": "tstrerror",
          "new_api": null,
          "old_text": "tstrerror(errno)",
          "new_text": null,
          "old_line_content": "      tscError(\"0x%\"PRIx64\" failed to seek SEEK_SET since:%s\", pSql->self, tstrerror(errno));",
          "new_line_content": "  // accumulate the total submit records",
          "content_same": false
        },
        {
          "line": 1449,
          "old_api": "TAOS_SYSTEM_ERROR",
          "new_api": null,
          "old_text": "TAOS_SYSTEM_ERROR(errno)",
          "new_text": null,
          "old_line_content": "      code = TAOS_SYSTEM_ERROR(errno);",
          "new_line_content": "  pParentSql->res.numOfRows += pSql->res.numOfRows;",
          "content_same": false
        },
        {
          "line": 941,
          "old_api": "tscSQLSyntaxErrMsg",
          "new_api": null,
          "old_text": "tscSQLSyntaxErrMsg(pCmd->payload, \"bind columns again\", sToken.z)",
          "new_text": null,
          "old_line_content": "        return tscSQLSyntaxErrMsg(pCmd->payload, \"bind columns again\", sToken.z);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1459,
          "old_api": "tscGetTableMetaInfoFromCmd",
          "new_api": null,
          "old_text": "tscGetTableMetaInfoFromCmd(pCmd, pCmd->clauseIndex, 0)",
          "new_text": null,
          "old_line_content": "  STableMetaInfo *pTableMetaInfo = tscGetTableMetaInfoFromCmd(pCmd, pCmd->clauseIndex, 0);",
          "new_line_content": "  if (pCmd->pTableBlockHashList == NULL) {",
          "content_same": false
        },
        {
          "line": 948,
          "old_api": "tStrGetToken",
          "new_api": null,
          "old_text": "tStrGetToken(sql, &index, false)",
          "new_text": null,
          "old_line_content": "        sToken = tStrGetToken(sql, &index, false);",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 1461,
          "old_api": "tscGetTableInfo",
          "new_api": null,
          "old_text": "tscGetTableInfo(pTableMeta)",
          "new_text": null,
          "old_line_content": "  STableComInfo   tinfo = tscGetTableInfo(pTableMeta);",
          "new_line_content": "    if (pCmd->pTableBlockHashList == NULL) {",
          "content_same": false
        },
        {
          "line": 1463,
          "old_api": "destroyTableNameList",
          "new_api": null,
          "old_text": "destroyTableNameList(pCmd)",
          "new_text": null,
          "old_line_content": "  destroyTableNameList(pCmd);",
          "new_line_content": "      goto _error;",
          "content_same": false
        },
        {
          "line": 1465,
          "old_api": "tscDestroyBlockArrayList",
          "new_api": null,
          "old_text": "tscDestroyBlockArrayList(pCmd->pDataBlocks)",
          "new_text": null,
          "old_line_content": "  pCmd->pDataBlocks = tscDestroyBlockArrayList(pCmd->pDataBlocks);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 1468,
          "old_api": "taosGetDefaultHashFunction",
          "new_api": null,
          "old_text": "taosGetDefaultHashFunction(TSDB_DATA_TYPE_BIGINT)",
          "new_text": null,
          "old_line_content": "    pCmd->pTableBlockHashList = taosHashInit(16, taosGetDefaultHashFunction(TSDB_DATA_TYPE_BIGINT), true, false);",
          "new_line_content": "  int32_t           ret =",
          "content_same": false
        },
        {
          "line": 962,
          "old_api": "tStrGetToken",
          "new_api": null,
          "old_text": "tStrGetToken(sql, &index, false)",
          "new_text": null,
          "old_line_content": "      sToken = tStrGetToken(sql, &index, false);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 967,
          "old_api": "tscValidateName",
          "new_api": null,
          "old_text": "tscValidateName(&tableToken)",
          "new_text": null,
          "old_line_content": "    if (tscValidateName(&tableToken) != TSDB_CODE_SUCCESS) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 968,
          "old_api": "tscInvalidSQLErrMsg",
          "new_api": null,
          "old_text": "tscInvalidSQLErrMsg(pCmd->payload, \"invalid table name\", *sqlstr)",
          "new_text": null,
          "old_line_content": "      return tscInvalidSQLErrMsg(pCmd->payload, \"invalid table name\", *sqlstr);",
          "new_line_content": "    if (sql == NULL) {",
          "content_same": false
        },
        {
          "line": 971,
          "old_api": "tscSetTableFullName",
          "new_api": null,
          "old_text": "tscSetTableFullName(pTableMetaInfo, &tableToken, pSql)",
          "new_text": null,
          "old_line_content": "    int32_t ret = tscSetTableFullName(pTableMetaInfo, &tableToken, pSql);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1484,
          "old_api": "tscAllocateMemIfNeed",
          "new_api": null,
          "old_text": "tscAllocateMemIfNeed(pTableDataBlock, tinfo.rowSize, &maxRows)",
          "new_text": null,
          "old_line_content": "  tscAllocateMemIfNeed(pTableDataBlock, tinfo.rowSize, &maxRows);",
          "new_line_content": "    if (('\\r' == line[readLen - 1]) || ('\\n' == line[readLen - 1])) {",
          "content_same": false
        },
        {
          "line": 1485,
          "old_api": "calloc",
          "new_api": null,
          "old_text": "calloc(1, TSDB_MAX_BYTES_PER_ROW)",
          "new_text": null,
          "old_line_content": "  tokenBuf = calloc(1, TSDB_MAX_BYTES_PER_ROW);",
          "new_line_content": "      line[--readLen] = 0;",
          "content_same": false
        },
        {
          "line": 1491,
          "old_api": "tgetline",
          "new_api": null,
          "old_text": "tgetline(&line, &n, fp)",
          "new_text": null,
          "old_line_content": "  while ((readLen = tgetline(&line, &n, fp)) != -1) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 980,
          "old_api": "tscGetTableMetaEx",
          "new_api": null,
          "old_text": "tscGetTableMetaEx(pSql, pTableMetaInfo, true)",
          "new_text": null,
          "old_line_content": "    code = tscGetTableMetaEx(pSql, pTableMetaInfo, true);",
          "new_line_content": "    if (sql == NULL) {",
          "content_same": false
        },
        {
          "line": 1501,
          "old_api": "strtolower",
          "new_api": null,
          "old_text": "strtolower(line, line)",
          "new_text": null,
          "old_line_content": "    strtolower(line, line);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 992,
          "old_api": "tscGetTableMetaEx",
          "new_api": null,
          "old_text": "tscGetTableMetaEx(pSql, pTableMetaInfo, false)",
          "new_text": null,
          "old_line_content": "    code = tscGetTableMetaEx(pSql, pTableMetaInfo, false);",
          "new_line_content": "  return code;",
          "content_same": false
        },
        {
          "line": 1504,
          "old_api": "tsParseOneRow",
          "new_api": null,
          "old_text": "tsParseOneRow(&lineptr, pTableDataBlock, pCmd, tinfo.precision, &len, tokenBuf)",
          "new_text": null,
          "old_line_content": "    code = tsParseOneRow(&lineptr, pTableDataBlock, pCmd, tinfo.precision, &len, tokenBuf);",
          "new_line_content": "    if (++count >= maxRows) {",
          "content_same": false
        },
        {
          "line": 994,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(code == TSDB_CODE_TSC_ACTION_IN_PROGRESS)",
          "new_text": null,
          "old_line_content": "      assert(code == TSDB_CODE_TSC_ACTION_IN_PROGRESS);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1004,
          "old_api": "tstrncpy",
          "new_api": null,
          "old_text": "tstrncpy(psTblToken->z, tblName, TSDB_TABLE_FNAME_LEN)",
          "new_text": null,
          "old_line_content": "  tstrncpy(psTblToken->z, tblName, TSDB_TABLE_FNAME_LEN);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1517,
          "old_api": "tfree",
          "new_api": null,
          "old_text": "tfree(tokenBuf)",
          "new_text": null,
          "old_line_content": "  tfree(tokenBuf);",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 1518,
          "old_api": "tfree",
          "new_api": null,
          "old_text": "tfree(line)",
          "new_text": null,
          "old_line_content": "  tfree(line);",
          "new_line_content": "      } else {",
          "content_same": false
        },
        {
          "line": 1008,
          "old_api": "tSQLGetToken",
          "new_api": null,
          "old_text": "tSQLGetToken(psTblToken->z, &psTblToken->type)",
          "new_text": null,
          "old_line_content": "  tSQLGetToken(psTblToken->z, &psTblToken->type);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 1010,
          "old_api": "tscValidateName",
          "new_api": null,
          "old_text": "tscValidateName(psTblToken)",
          "new_text": null,
          "old_line_content": "  return tscValidateName(psTblToken);",
          "new_line_content": "  pCmd->dataSourceType = type;",
          "content_same": false
        },
        {
          "line": 1015,
          "old_api": "tscInvalidSQLErrMsg",
          "new_api": null,
          "old_text": "tscInvalidSQLErrMsg(pCmd->payload, \"keyword VALUES and FILE are not allowed to mix up\", sql)",
          "new_text": null,
          "old_line_content": "    return tscInvalidSQLErrMsg(pCmd->payload, \"keyword VALUES and FILE are not allowed to mix up\", sql);",
          "new_line_content": "    char* str, char **end) {",
          "content_same": false
        },
        {
          "line": 1531,
          "old_api": "tfree",
          "new_api": null,
          "old_text": "tfree(pSupporter)",
          "new_text": null,
          "old_line_content": "      tfree(pSupporter);",
          "new_line_content": "      return;",
          "content_same": false
        },
        {
          "line": 1532,
          "old_api": "fclose",
          "new_api": null,
          "old_text": "fclose(fp)",
          "new_text": null,
          "old_line_content": "      fclose(fp);",
          "new_line_content": "    }",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 32,
      "total_additions": 141,
      "total_deletions": 143,
      "total_api_changes": 316
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 9,
        "api_related_lines": 316,
        "non_api_lines": 6,
        "non_api_line_numbers": [
          709,
          710,
          717,
          718,
          719,
          720
        ]
      }
    },
    "api_calls_before": 303,
    "api_calls_after": 301,
    "diff_info": {
      "added_lines": 1,
      "removed_lines": 9,
      "total_diff_lines": 26
    }
  }
}
{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/aseprite/modified_file/54fddf7cc39a9caaf90395293dc813374a4f645f",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/aseprite/modified_file/54fddf7cc39a9caaf90395293dc813374a4f645f/before.cpp",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/aseprite/modified_file/54fddf7cc39a9caaf90395293dc813374a4f645f/after.cpp",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/aseprite/modified_file/54fddf7cc39a9caaf90395293dc813374a4f645f/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": true,
    "api_changes": {
      "replacements": [
        {
          "line": 529,
          "old_api": "fseek",
          "new_api": "fputl",
          "old_text": "fseek(f, chunk->start+6, SEEK_SET)",
          "new_text": "fputl(0, f)",
          "old_line_content": "  fseek(f, chunk->start+6, SEEK_SET);",
          "new_line_content": "  fputl(0, f);",
          "content_same": false
        },
        {
          "line": 538,
          "old_api": "fputl",
          "new_api": "fseek",
          "old_text": "fputl(chunk_size, f)",
          "new_text": "fseek(f, chunk->start, SEEK_SET)",
          "old_line_content": "  fputl(chunk_size, f);",
          "new_line_content": "  fseek(f, chunk->start, SEEK_SET);",
          "content_same": false
        },
        {
          "line": 539,
          "old_api": "fputw",
          "new_api": "fputl",
          "old_text": "fputw(chunk->type, f)",
          "new_text": "fputl(chunk_size, f)",
          "old_line_content": "  fputw(chunk->type, f);",
          "new_line_content": "  fputl(chunk_size, f);",
          "content_same": false
        },
        {
          "line": 540,
          "old_api": "fseek",
          "new_api": "fputw",
          "old_text": "fseek(f, chunk_end, SEEK_SET)",
          "new_text": "fputw(chunk->type, f)",
          "old_line_content": "  fseek(f, chunk_end, SEEK_SET);",
          "new_line_content": "  fputw(chunk->type, f);",
          "content_same": false
        },
        {
          "line": 552,
          "old_api": "size",
          "new_api": "fputc",
          "old_text": "pal->size()",
          "new_text": "fputc(0, f)",
          "old_line_content": "  fputc(pal->size() == 256 ? 0: pal->size(), f); // number of colors",
          "new_line_content": "  fputc(0, f);                                   // skip 0 colors",
          "content_same": false
        },
        {
          "line": 554,
          "old_api": "getEntry",
          "new_api": "size",
          "old_text": "pal->getEntry(c)",
          "new_text": "pal->size()",
          "old_line_content": "    color = pal->getEntry(c);",
          "new_line_content": "  for (c=0; c<pal->size(); c++) {",
          "content_same": false
        },
        {
          "line": 555,
          "old_api": "rgba_getr",
          "new_api": "getEntry",
          "old_text": "rgba_getr(color)",
          "new_text": "pal->getEntry(c)",
          "old_line_content": "    fputc(rgba_getr(color), f);",
          "new_line_content": "    color = pal->getEntry(c);",
          "content_same": false
        },
        {
          "line": 556,
          "old_api": "rgba_getg",
          "new_api": "rgba_getr",
          "old_text": "rgba_getg(color)",
          "new_text": "rgba_getr(color)",
          "old_line_content": "    fputc(rgba_getg(color), f);",
          "new_line_content": "    fputc(rgba_getr(color), f);",
          "content_same": false
        },
        {
          "line": 557,
          "old_api": "rgba_getb",
          "new_api": "rgba_getg",
          "old_text": "rgba_getb(color)",
          "new_text": "rgba_getg(color)",
          "old_line_content": "    fputc(rgba_getb(color), f);",
          "new_line_content": "    fputc(rgba_getg(color), f);",
          "content_same": false
        },
        {
          "line": 566,
          "old_api": "fputl",
          "new_api": "size",
          "old_text": "fputl(from, f)",
          "new_text": "pal->size()",
          "old_line_content": "  fputl(from, f);",
          "new_line_content": "  fputl(pal->size(), f);",
          "content_same": false
        },
        {
          "line": 568,
          "old_api": "ase_file_write_padding",
          "new_api": "fputl",
          "old_text": "ase_file_write_padding(f, 8)",
          "new_text": "fputl(to, f)",
          "old_line_content": "  ase_file_write_padding(f, 8);",
          "new_line_content": "  fputl(to, f);",
          "content_same": false
        },
        {
          "line": 574,
          "old_api": "rgba_getr",
          "new_api": "fputw",
          "old_text": "rgba_getr(color)",
          "new_text": "fputw(0, f)",
          "old_line_content": "    fputc(rgba_getr(color), f);",
          "new_line_content": "    fputw(0, f);                // Entry flags (without name)",
          "content_same": false
        },
        {
          "line": 575,
          "old_api": "rgba_getg",
          "new_api": "rgba_getr",
          "old_text": "rgba_getg(color)",
          "new_text": "rgba_getr(color)",
          "old_line_content": "    fputc(rgba_getg(color), f);",
          "new_line_content": "    fputc(rgba_getr(color), f);",
          "content_same": false
        },
        {
          "line": 576,
          "old_api": "rgba_getb",
          "new_api": "rgba_getg",
          "old_text": "rgba_getb(color)",
          "new_text": "rgba_getg(color)",
          "old_line_content": "    fputc(rgba_getb(color), f);",
          "new_line_content": "    fputc(rgba_getg(color), f);",
          "content_same": false
        },
        {
          "line": 577,
          "old_api": "rgba_geta",
          "new_api": "rgba_getb",
          "old_text": "rgba_geta(color)",
          "new_text": "rgba_getb(color)",
          "old_line_content": "    fputc(rgba_geta(color), f);",
          "new_line_content": "    fputc(rgba_getb(color), f);",
          "content_same": false
        },
        {
          "line": 587,
          "old_api": "static_cast<int>(doc::LayerFlags::PersistentFlagsMask)",
          "new_api": "flags",
          "old_text": "static_cast<int>(doc::LayerFlags::PersistentFlagsMask)",
          "new_text": "layer->flags()",
          "old_line_content": "        static_cast<int>(doc::LayerFlags::PersistentFlagsMask), f);",
          "new_line_content": "  fputw(static_cast<int>(layer->flags()) &",
          "content_same": false
        },
        {
          "line": 591,
          "old_api": "isGroup",
          "new_api": "isImage",
          "old_text": "layer->isGroup()",
          "new_text": "layer->isImage()",
          "old_line_content": "         (layer->isGroup() ? ASE_FILE_LAYER_GROUP: -1)), f);",
          "new_line_content": "  fputw((layer->isImage() ? ASE_FILE_LAYER_IMAGE:",
          "content_same": false
        },
        {
          "line": 599,
          "old_api": "blendMode",
          "new_api": "fputw",
          "old_text": "static_cast<const LayerImage*>(layer)->blendMode()",
          "new_text": "fputw(0, f)",
          "old_line_content": "  fputw(layer->isImage() ? (int)static_cast<const LayerImage*>(layer)->blendMode(): 0, f);",
          "new_line_content": "  fputw(0, f);",
          "content_same": false
        },
        {
          "line": 600,
          "old_api": "opacity",
          "new_api": "blendMode",
          "old_text": "static_cast<const LayerImage*>(layer)->opacity()",
          "new_text": "static_cast<const LayerImage*>(layer)->blendMode()",
          "old_line_content": "  fputc(layer->isImage() ? (int)static_cast<const LayerImage*>(layer)->opacity(): 0, f);",
          "new_line_content": "  fputw(layer->isImage() ? (int)static_cast<const LayerImage*>(layer)->blendMode(): 0, f);",
          "content_same": false
        },
        {
          "line": 625,
          "old_api": "rgba_getg",
          "new_api": "rgba_getr",
          "old_text": "rgba_getg(c)",
          "new_text": "rgba_getr(c)",
          "old_line_content": "    fputc(rgba_getg(c), f);",
          "new_line_content": "    fputc(rgba_getr(c), f);",
          "content_same": false
        },
        {
          "line": 626,
          "old_api": "rgba_getb",
          "new_api": "rgba_getg",
          "old_text": "rgba_getb(c)",
          "new_text": "rgba_getg(c)",
          "old_line_content": "    fputc(rgba_getb(c), f);",
          "new_line_content": "    fputc(rgba_getg(c), f);",
          "content_same": false
        },
        {
          "line": 627,
          "old_api": "rgba_geta",
          "new_api": "rgba_getb",
          "old_text": "rgba_geta(c)",
          "new_text": "rgba_getb(c)",
          "old_line_content": "    fputc(rgba_geta(c), f);",
          "new_line_content": "    fputc(rgba_getb(c), f);",
          "content_same": false
        },
        {
          "line": 633,
          "old_api": "rgba_getg",
          "new_api": "rgba_getr",
          "old_text": "rgba_getg(*address)",
          "new_text": "rgba_getr(*address)",
          "old_line_content": "      *(buffer++) = rgba_getg(*address);",
          "new_line_content": "      *(buffer++) = rgba_getr(*address);",
          "content_same": false
        },
        {
          "line": 634,
          "old_api": "rgba_getb",
          "new_api": "rgba_getg",
          "old_text": "rgba_getb(*address)",
          "new_text": "rgba_getg(*address)",
          "old_line_content": "      *(buffer++) = rgba_getb(*address);",
          "new_line_content": "      *(buffer++) = rgba_getg(*address);",
          "content_same": false
        },
        {
          "line": 635,
          "old_api": "rgba_geta",
          "new_api": "rgba_getb",
          "old_text": "rgba_geta(*address)",
          "new_text": "rgba_getb(*address)",
          "old_line_content": "      *(buffer++) = rgba_geta(*address);",
          "new_line_content": "      *(buffer++) = rgba_getb(*address);",
          "content_same": false
        },
        {
          "line": 646,
          "old_api": "graya_geta",
          "new_api": "graya_getv",
          "old_text": "graya_geta(c)",
          "new_text": "graya_getv(c)",
          "old_line_content": "    fputc(graya_geta(c), f);",
          "new_line_content": "    fputc(graya_getv(c), f);",
          "content_same": false
        },
        {
          "line": 652,
          "old_api": "graya_geta",
          "new_api": "graya_getv",
          "old_text": "graya_geta(*address)",
          "new_text": "graya_getv(*address)",
          "old_line_content": "      *(buffer++) = graya_geta(*address);",
          "new_line_content": "      *(buffer++) = graya_getv(*address);",
          "content_same": false
        },
        {
          "line": 681,
          "old_api": "width",
          "new_api": "height",
          "old_text": "image->width()",
          "new_text": "image->height()",
          "old_line_content": "    for (x=0; x<image->width(); x++)",
          "new_line_content": "  for (y=0; y<image->height(); y++)",
          "content_same": false
        },
        {
          "line": 682,
          "old_api": "get_pixel_fast<ImageTraits>(image, x, y)",
          "new_api": "width",
          "old_text": "get_pixel_fast<ImageTraits>(image, x, y)",
          "new_text": "image->width()",
          "old_line_content": "      pixel_io.write_pixel(f, get_pixel_fast<ImageTraits>(image, x, y));",
          "new_line_content": "    for (x=0; x<image->width(); x++)",
          "content_same": false
        },
        {
          "line": 714,
          "old_api": "height",
          "new_api": "size",
          "old_text": "image->height()",
          "new_text": "scanline.size()",
          "old_line_content": "    int flush = (y == image->height()-1 ? Z_FINISH: Z_NO_FLUSH);",
          "new_line_content": "    zstream.avail_in = scanline.size();",
          "content_same": false
        },
        {
          "line": 728,
          "old_api": "ferror",
          "new_api": "fwrite",
          "old_text": "ferror(f)",
          "new_text": "fwrite(&compressed[0], 1, output_bytes, f)",
          "old_line_content": "            || ferror(f))",
          "new_line_content": "        if ((fwrite(&compressed[0], 1, output_bytes, f) != (size_t)output_bytes)",
          "content_same": false
        },
        {
          "line": 729,
          "old_api": "base::Exception(\"Error writing compressed image pixels.\\n\")",
          "new_api": "ferror",
          "old_text": "base::Exception(\"Error writing compressed image pixels.\\n\")",
          "new_text": "ferror(f)",
          "old_line_content": "          throw base::Exception(\"Error writing compressed image pixels.\\n\");",
          "new_line_content": "            || ferror(f))",
          "content_same": false
        },
        {
          "line": 759,
          "old_api": "cel",
          "new_api": "frame",
          "old_text": "layer->cel(i)",
          "new_text": "cel->frame()",
          "old_line_content": "      link = layer->cel(i);",
          "new_line_content": "    for (frame_t i=firstFrame; i<=cel->frame(); ++i) {",
          "content_same": false
        },
        {
          "line": 760,
          "old_api": "image",
          "new_api": "cel",
          "old_text": "cel->image()->id()",
          "new_text": "layer->cel(i)",
          "old_line_content": "      if (link && link->image()->id() == cel->image()->id())",
          "new_line_content": "      link = layer->cel(i);",
          "content_same": false
        },
        {
          "line": 770,
          "old_api": "x",
          "new_api": "fputw",
          "old_text": "cel->x()",
          "new_text": "fputw(layer_index, f)",
          "old_line_content": "  fputw(cel->x(), f);",
          "new_line_content": "  fputw(layer_index, f);",
          "content_same": false
        },
        {
          "line": 771,
          "old_api": "y",
          "new_api": "x",
          "old_text": "cel->y()",
          "new_text": "cel->x()",
          "old_line_content": "  fputw(cel->y(), f);",
          "new_line_content": "  fputw(cel->x(), f);",
          "content_same": false
        },
        {
          "line": 772,
          "old_api": "opacity",
          "new_api": "y",
          "old_text": "cel->opacity()",
          "new_text": "cel->y()",
          "old_line_content": "  fputc(cel->opacity(), f);",
          "new_line_content": "  fputw(cel->y(), f);",
          "content_same": false
        },
        {
          "line": 773,
          "old_api": "fputw",
          "new_api": "opacity",
          "old_text": "fputw(cel_type, f)",
          "new_text": "cel->opacity()",
          "old_line_content": "  fputw(cel_type, f);",
          "new_line_content": "  fputc(cel->opacity(), f);",
          "content_same": false
        },
        {
          "line": 774,
          "old_api": "ase_file_write_padding",
          "new_api": "fputw",
          "old_text": "ase_file_write_padding(f, 7)",
          "new_text": "fputw(cel_type, f)",
          "old_line_content": "  ase_file_write_padding(f, 7);",
          "new_line_content": "  fputw(cel_type, f);",
          "content_same": false
        },
        {
          "line": 784,
          "old_api": "height",
          "new_api": "width",
          "old_text": "image->height()",
          "new_text": "image->width()",
          "old_line_content": "        fputw(image->height(), f);",
          "new_line_content": "        fputw(image->width(), f);",
          "content_same": false
        },
        {
          "line": 821,
          "old_api": "height",
          "new_api": "width",
          "old_text": "image->height()",
          "new_text": "image->width()",
          "old_line_content": "        fputw(image->height(), f);",
          "new_line_content": "        fputw(image->width(), f);",
          "content_same": false
        },
        {
          "line": 860,
          "old_api": "fixmath::ftofix(bounds.x)",
          "new_api": "fputl",
          "old_text": "fixmath::ftofix(bounds.x)",
          "new_text": "fputl(ASE_CEL_EXTRA_FLAG_PRECISE_BOUNDS, f)",
          "old_line_content": "  fputl(fixmath::ftofix(bounds.x), f);",
          "new_line_content": "  fputl(ASE_CEL_EXTRA_FLAG_PRECISE_BOUNDS, f);",
          "content_same": false
        },
        {
          "line": 861,
          "old_api": "fixmath::ftofix(bounds.y)",
          "new_api": "fixmath::ftofix(bounds.x)",
          "old_text": "fixmath::ftofix(bounds.y)",
          "new_text": "fixmath::ftofix(bounds.x)",
          "old_line_content": "  fputl(fixmath::ftofix(bounds.y), f);",
          "new_line_content": "  fputl(fixmath::ftofix(bounds.x), f);",
          "content_same": false
        },
        {
          "line": 862,
          "old_api": "fixmath::ftofix(bounds.w)",
          "new_api": "fixmath::ftofix(bounds.y)",
          "old_text": "fixmath::ftofix(bounds.w)",
          "new_text": "fixmath::ftofix(bounds.y)",
          "old_line_content": "  fputl(fixmath::ftofix(bounds.w), f);",
          "new_line_content": "  fputl(fixmath::ftofix(bounds.y), f);",
          "content_same": false
        },
        {
          "line": 863,
          "old_api": "fixmath::ftofix(bounds.h)",
          "new_api": "fixmath::ftofix(bounds.w)",
          "old_text": "fixmath::ftofix(bounds.h)",
          "new_text": "fixmath::ftofix(bounds.w)",
          "old_line_content": "  fputl(fixmath::ftofix(bounds.h), f);",
          "new_line_content": "  fputl(fixmath::ftofix(bounds.w), f);",
          "content_same": false
        },
        {
          "line": 864,
          "old_api": "ase_file_write_padding",
          "new_api": "fixmath::ftofix(bounds.h)",
          "old_text": "ase_file_write_padding(f, 16)",
          "new_text": "fixmath::ftofix(bounds.h)",
          "old_line_content": "  ase_file_write_padding(f, 16);",
          "new_line_content": "  fputl(fixmath::ftofix(bounds.h), f);",
          "content_same": false
        },
        {
          "line": 894,
          "old_api": "hasGamma",
          "new_api": "fputw",
          "old_text": "cs->hasGamma()",
          "new_text": "fputw(type, f)",
          "old_line_content": "  fputw(cs->hasGamma() ? ASE_COLOR_PROFILE_FLAG_GAMMA: 0, f);",
          "new_line_content": "  fputw(type, f);",
          "content_same": false
        },
        {
          "line": 898,
          "old_api": "gamma",
          "new_api": "hasGamma",
          "old_text": "cs->gamma()",
          "new_text": "cs->hasGamma()",
          "old_line_content": "    gamma = fixmath::ftofix(cs->gamma());",
          "new_line_content": "  if (cs->hasGamma())",
          "content_same": false
        },
        {
          "line": 899,
          "old_api": "fputl",
          "new_api": "gamma",
          "old_text": "fputl(gamma, f)",
          "new_text": "cs->gamma()",
          "old_line_content": "  fputl(gamma, f);",
          "new_line_content": "    gamma = fixmath::ftofix(cs->gamma());",
          "content_same": false
        },
        {
          "line": 900,
          "old_api": "ase_file_write_padding",
          "new_api": "fputl",
          "old_text": "ase_file_write_padding(f, 8)",
          "new_text": "fputl(gamma, f)",
          "old_line_content": "  ase_file_write_padding(f, 8);",
          "new_line_content": "  fputl(gamma, f);",
          "content_same": false
        },
        {
          "line": 903,
          "old_api": "iccSize",
          "new_api": "type",
          "old_text": "cs->iccSize()",
          "new_text": "cs->type()",
          "old_line_content": "    const size_t size = cs->iccSize();",
          "new_line_content": "  if (cs->type() == gfx::ColorSpace::ICC) {",
          "content_same": false
        },
        {
          "line": 904,
          "old_api": "iccData",
          "new_api": "iccSize",
          "old_text": "cs->iccData()",
          "new_text": "cs->iccSize()",
          "old_line_content": "    const void* data = cs->iccData();",
          "new_line_content": "    const size_t size = cs->iccSize();",
          "content_same": false
        },
        {
          "line": 905,
          "old_api": "fputl",
          "new_api": "iccData",
          "old_text": "fputl(size, f)",
          "new_text": "cs->iccData()",
          "old_line_content": "    fputl(size, f);",
          "new_line_content": "    const void* data = cs->iccData();",
          "content_same": false
        },
        {
          "line": 923,
          "old_api": "ase_file_write_padding",
          "new_api": "fputw",
          "old_text": "ase_file_write_padding(f, 8)",
          "new_text": "fputw(bounds.h, f)",
          "old_line_content": "  ase_file_write_padding(f, 8);",
          "new_line_content": "  fputw(bounds.h, f);",
          "content_same": false
        },
        {
          "line": 952,
          "old_api": "toFrame",
          "new_api": "fromFrame",
          "old_text": "tag->toFrame()",
          "new_text": "tag->fromFrame()",
          "old_line_content": "        tag->toFrame() < fromFrame)",
          "new_line_content": "    if (tag->fromFrame() > toFrame ||",
          "content_same": false
        },
        {
          "line": 958,
          "old_api": "fputl",
          "new_api": "fputw",
          "old_text": "fputl(0, f)",
          "new_text": "fputw(ntags, f)",
          "old_line_content": "  fputl(0, f);  // 8 reserved bytes",
          "new_line_content": "  fputw(ntags, f);",
          "content_same": false
        },
        {
          "line": 963,
          "old_api": "toFrame",
          "new_api": "fromFrame",
          "old_text": "tag->toFrame()",
          "new_text": "tag->fromFrame()",
          "old_line_content": "        tag->toFrame() < fromFrame)",
          "new_line_content": "    if (tag->fromFrame() > toFrame ||",
          "content_same": false
        },
        {
          "line": 967,
          "old_api": "toFrame",
          "new_api": "fromFrame",
          "old_text": "tag->toFrame()",
          "new_text": "tag->fromFrame()",
          "old_line_content": "    frame_t to = base::clamp(tag->toFrame()-fromFrame, from, toFrame-fromFrame);",
          "new_line_content": "    frame_t from = base::clamp(tag->fromFrame()-fromFrame, 0, toFrame-fromFrame);",
          "content_same": false
        },
        {
          "line": 971,
          "old_api": "aniDir",
          "new_api": "fputw",
          "old_text": "tag->aniDir()",
          "new_text": "fputw(to, f)",
          "old_line_content": "    fputc((int)tag->aniDir(), f);",
          "new_line_content": "    fputw(to, f);",
          "content_same": false
        },
        {
          "line": 979,
          "old_api": "fputc",
          "new_api": "color",
          "old_text": "fputc(0, f)",
          "new_text": "tag->color()",
          "old_line_content": "    fputc(0, f);",
          "new_line_content": "    fputc(doc::rgba_getb(tag->color()), f);",
          "content_same": false
        },
        {
          "line": 1021,
          "old_api": "userData",
          "new_api": "isEmpty",
          "old_text": "slice->userData()",
          "new_text": "slice->userData().isEmpty()",
          "old_line_content": "      ase_file_write_user_data_chunk(f, frame_header, &slice->userData());",
          "new_line_content": "    if (!slice->userData().isEmpty())",
          "content_same": false
        },
        {
          "line": 1033,
          "old_api": "empty",
          "new_api": "range",
          "old_text": "range.empty()",
          "new_text": "slice->range(fromFrame, toFrame)",
          "old_line_content": "  ASSERT(!range.empty());",
          "new_line_content": "  auto range = slice->range(fromFrame, toFrame);",
          "content_same": false
        },
        {
          "line": 1039,
          "old_api": "hasPivot",
          "new_api": "hasCenter",
          "old_text": "key->hasPivot()",
          "new_text": "key->hasCenter()",
          "old_line_content": "      if (key->hasPivot()) flags |= ASE_SLICE_FLAG_HAS_PIVOT_POINT;",
          "new_line_content": "      if (key->hasCenter()) flags |= ASE_SLICE_FLAG_HAS_CENTER_BOUNDS;",
          "content_same": false
        },
        {
          "line": 1044,
          "old_api": "fputl",
          "new_api": "countKeys",
          "old_text": "fputl(flags, f)",
          "new_text": "range.countKeys()",
          "old_line_content": "  fputl(flags, f);                         // flags",
          "new_line_content": "  fputl(range.countKeys(), f);             // number of keys",
          "content_same": false
        },
        {
          "line": 1046,
          "old_api": "name",
          "new_api": "fputl",
          "old_text": "slice->name()",
          "new_text": "fputl(0, f)",
          "old_line_content": "  ase_file_write_string(f, slice->name()); // slice name",
          "new_line_content": "  fputl(0, f);                             // 4 bytes reserved",
          "content_same": false
        },
        {
          "line": 1053,
          "old_api": "bounds",
          "new_api": "fputl",
          "old_text": "key->bounds()",
          "new_text": "fputl(frame, f)",
          "old_line_content": "      fputl((int32_t)(key ? key->bounds().x: 0), f);",
          "new_line_content": "      fputl(frame, f);",
          "content_same": false
        },
        {
          "line": 1060,
          "old_api": "center",
          "new_api": "hasCenter",
          "old_text": "key->center()",
          "new_text": "key->hasCenter()",
          "old_line_content": "          fputl((int32_t)key->center().x, f);",
          "new_line_content": "        if (key && key->hasCenter()) {",
          "content_same": false
        },
        {
          "line": 1075,
          "old_api": "pivot",
          "new_api": "hasPivot",
          "old_text": "key->pivot()",
          "new_text": "key->hasPivot()",
          "old_line_content": "          fputl((int32_t)key->pivot().x, f);",
          "new_line_content": "        if (key && key->hasPivot()) {",
          "content_same": false
        },
        {
          "line": 1093,
          "old_api": "isGroup",
          "new_api": "layers",
          "old_text": "child->isGroup()",
          "new_text": "group->layers()",
          "old_line_content": "    if (child->isGroup())",
          "new_line_content": "  for (Layer* child : group->layers()) {",
          "content_same": false
        },
        {
          "line": 1102,
          "old_api": "layers",
          "new_api": "sprite",
          "old_text": "group->layers()",
          "new_text": "group->sprite()->root()",
          "old_line_content": "  LayerList list = group->layers();",
          "new_line_content": "  LayerGroup* root = group->sprite()->root();",
          "content_same": false
        },
        {
          "line": 1106,
          "old_api": "static_cast<LayerGroup*>(child)",
          "new_api": "isGroup",
          "old_text": "static_cast<LayerGroup*>(child)",
          "new_text": "child->isGroup()",
          "old_line_content": "      ase_ungroup_all(static_cast<LayerGroup*>(child));",
          "new_line_content": "    if (child->isGroup()) {",
          "content_same": false
        },
        {
          "line": 1107,
          "old_api": "removeLayer",
          "new_api": "static_cast<LayerGroup*>(child)",
          "old_text": "group->removeLayer(child)",
          "new_text": "static_cast<LayerGroup*>(child)",
          "old_line_content": "      group->removeLayer(child);",
          "new_line_content": "      ase_ungroup_all(static_cast<LayerGroup*>(child));",
          "content_same": false
        },
        {
          "line": 1114,
          "old_api": "empty",
          "new_api": "parent",
          "old_text": "name.empty()",
          "new_text": "layer->parent()",
          "old_line_content": "          if (!name.empty())",
          "new_line_content": "        for (Layer* layer=child; layer!=root; layer=layer->parent()) {",
          "content_same": false
        },
        {
          "line": 1115,
          "old_api": "insert",
          "new_api": "empty",
          "old_text": "name.insert(0, \"-\")",
          "new_text": "name.empty()",
          "old_line_content": "            name.insert(0, \"-\");",
          "new_line_content": "          if (!name.empty())",
          "content_same": false
        },
        {
          "line": 1116,
          "old_api": "name",
          "new_api": "insert",
          "old_text": "layer->name()",
          "new_text": "name.insert(0, \"-\")",
          "old_line_content": "          name.insert(0, layer->name());",
          "new_line_content": "            name.insert(0, \"-\");",
          "content_same": false
        },
        {
          "line": 1122,
          "old_api": "addLayer",
          "new_api": "removeLayer",
          "old_text": "root->addLayer(child)",
          "new_text": "group->removeLayer(child)",
          "old_line_content": "      root->addLayer(child);",
          "new_line_content": "      group->removeLayer(child);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 1034,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "range.empty()",
          "old_line_content": "",
          "new_line_content": "  ASSERT(!range.empty());",
          "content_same": false
        },
        {
          "line": 1040,
          "old_api": null,
          "new_api": "hasPivot",
          "old_text": null,
          "new_text": "key->hasPivot()",
          "old_line_content": "    }",
          "new_line_content": "      if (key->hasPivot()) flags |= ASE_SLICE_FLAG_HAS_PIVOT_POINT;",
          "content_same": false
        },
        {
          "line": 530,
          "old_api": null,
          "new_api": "fputw",
          "old_text": null,
          "new_text": "fputw(0, f)",
          "old_line_content": "}",
          "new_line_content": "  fputw(0, f);",
          "content_same": false
        },
        {
          "line": 535,
          "old_api": null,
          "new_api": "ftell",
          "old_text": null,
          "new_text": "ftell(f)",
          "old_line_content": "  int chunk_size = chunk_end - chunk->start;",
          "new_line_content": "  int chunk_end = ftell(f);",
          "content_same": false
        },
        {
          "line": 1047,
          "old_api": null,
          "new_api": "name",
          "old_text": null,
          "new_text": "slice->name()",
          "old_line_content": "",
          "new_line_content": "  ase_file_write_string(f, slice->name()); // slice name",
          "content_same": false
        },
        {
          "line": 541,
          "old_api": null,
          "new_api": "fseek",
          "old_text": null,
          "new_text": "fseek(f, chunk_end, SEEK_SET)",
          "old_line_content": "}",
          "new_line_content": "  fseek(f, chunk_end, SEEK_SET);",
          "content_same": false
        },
        {
          "line": 1057,
          "old_api": null,
          "new_api": "bounds",
          "old_text": null,
          "new_text": "key->bounds()",
          "old_line_content": "",
          "new_line_content": "      fputl(key ? key->bounds().h: 0, f);",
          "content_same": false
        },
        {
          "line": 549,
          "old_api": null,
          "new_api": "fputw",
          "old_text": null,
          "new_text": "fputw(1, f)",
          "old_line_content": "",
          "new_line_content": "  fputw(1, f);                  // Number of packets",
          "content_same": false
        },
        {
          "line": 1064,
          "old_api": null,
          "new_api": "center",
          "old_text": null,
          "new_text": "key->center()",
          "old_line_content": "        }",
          "new_line_content": "          fputl(key->center().h, f);",
          "content_same": false
        },
        {
          "line": 558,
          "old_api": null,
          "new_api": "rgba_getb",
          "old_text": null,
          "new_text": "rgba_getb(color)",
          "old_line_content": "  }",
          "new_line_content": "    fputc(rgba_getb(color), f);",
          "content_same": false
        },
        {
          "line": 1070,
          "old_api": null,
          "new_api": "fputl",
          "old_text": null,
          "new_text": "fputl(0, f)",
          "old_line_content": "        }",
          "new_line_content": "          fputl(0, f);",
          "content_same": false
        },
        {
          "line": 1077,
          "old_api": null,
          "new_api": "pivot",
          "old_text": null,
          "new_text": "key->pivot()",
          "old_line_content": "        }",
          "new_line_content": "          fputl((int32_t)key->pivot().y, f);",
          "content_same": false
        },
        {
          "line": 569,
          "old_api": null,
          "new_api": "ase_file_write_padding",
          "old_text": null,
          "new_text": "ase_file_write_padding(f, 8)",
          "old_line_content": "",
          "new_line_content": "  ase_file_write_padding(f, 8);",
          "content_same": false
        },
        {
          "line": 1081,
          "old_api": null,
          "new_api": "fputl",
          "old_text": null,
          "new_text": "fputl(0, f)",
          "old_line_content": "        }",
          "new_line_content": "          fputl(0, f);",
          "content_same": false
        },
        {
          "line": 572,
          "old_api": null,
          "new_api": "getEntry",
          "old_text": null,
          "new_text": "pal->getEntry(c)",
          "old_line_content": "    // TODO add support to save palette entry name",
          "new_line_content": "    color_t color = pal->getEntry(c);",
          "content_same": false
        },
        {
          "line": 578,
          "old_api": null,
          "new_api": "rgba_geta",
          "old_text": null,
          "new_text": "rgba_geta(color)",
          "old_line_content": "  }",
          "new_line_content": "    fputc(rgba_geta(color), f);",
          "content_same": false
        },
        {
          "line": 1094,
          "old_api": null,
          "new_api": "isGroup",
          "old_text": null,
          "new_text": "child->isGroup()",
          "old_line_content": "      return true;",
          "new_line_content": "    if (child->isGroup())",
          "content_same": false
        },
        {
          "line": 588,
          "old_api": null,
          "new_api": "static_cast<int>(doc::LayerFlags::PersistentFlagsMask)",
          "old_text": null,
          "new_text": "static_cast<int>(doc::LayerFlags::PersistentFlagsMask)",
          "old_line_content": "",
          "new_line_content": "        static_cast<int>(doc::LayerFlags::PersistentFlagsMask), f);",
          "content_same": false
        },
        {
          "line": 1103,
          "old_api": null,
          "new_api": "layers",
          "old_text": null,
          "new_text": "group->layers()",
          "old_line_content": "",
          "new_line_content": "  LayerList list = group->layers();",
          "content_same": false
        },
        {
          "line": 592,
          "old_api": null,
          "new_api": "isGroup",
          "old_text": null,
          "new_text": "layer->isGroup()",
          "old_line_content": "",
          "new_line_content": "         (layer->isGroup() ? ASE_FILE_LAYER_GROUP: -1)), f);",
          "content_same": false
        },
        {
          "line": 595,
          "old_api": null,
          "new_api": "fputw",
          "old_text": null,
          "new_text": "fputw(child_level, f)",
          "old_line_content": "",
          "new_line_content": "  fputw(child_level, f);",
          "content_same": false
        },
        {
          "line": 1108,
          "old_api": null,
          "new_api": "removeLayer",
          "old_text": null,
          "new_text": "group->removeLayer(child)",
          "old_line_content": "    }",
          "new_line_content": "      group->removeLayer(child);",
          "content_same": false
        },
        {
          "line": 601,
          "old_api": null,
          "new_api": "opacity",
          "old_text": null,
          "new_text": "static_cast<const LayerImage*>(layer)->opacity()",
          "old_line_content": "",
          "new_line_content": "  fputc(layer->isImage() ? (int)static_cast<const LayerImage*>(layer)->opacity(): 0, f);",
          "content_same": false
        },
        {
          "line": 604,
          "old_api": null,
          "new_api": "ase_file_write_padding",
          "old_text": null,
          "new_text": "ase_file_write_padding(f, 3)",
          "old_line_content": "",
          "new_line_content": "  ase_file_write_padding(f, 3);",
          "content_same": false
        },
        {
          "line": 1117,
          "old_api": null,
          "new_api": "name",
          "old_text": null,
          "new_text": "layer->name()",
          "old_line_content": "        }",
          "new_line_content": "          name.insert(0, layer->name());",
          "content_same": false
        },
        {
          "line": 607,
          "old_api": null,
          "new_api": "name",
          "old_text": null,
          "new_text": "layer->name()",
          "old_line_content": "}",
          "new_line_content": "  ase_file_write_string(f, layer->name());",
          "content_same": false
        },
        {
          "line": 1119,
          "old_api": null,
          "new_api": "setName",
          "old_text": null,
          "new_text": "child->setName(name)",
          "old_line_content": "      }",
          "new_line_content": "        child->setName(name);",
          "content_same": false
        },
        {
          "line": 1123,
          "old_api": null,
          "new_api": "addLayer",
          "old_text": null,
          "new_text": "root->addLayer(child)",
          "old_line_content": "    }",
          "new_line_content": "      root->addLayer(child);",
          "content_same": false
        },
        {
          "line": 1128,
          "old_api": null,
          "new_api": "layersCount",
          "old_text": null,
          "new_text": "group->layersCount()",
          "old_line_content": "    delete group;",
          "new_line_content": "    ASSERT(group->layersCount() == 0);",
          "content_same": false
        },
        {
          "line": 628,
          "old_api": null,
          "new_api": "rgba_geta",
          "old_text": null,
          "new_text": "rgba_geta(c)",
          "old_line_content": "  }",
          "new_line_content": "    fputc(rgba_geta(c), f);",
          "content_same": false
        },
        {
          "line": 636,
          "old_api": null,
          "new_api": "rgba_geta",
          "old_text": null,
          "new_text": "rgba_geta(*address)",
          "old_line_content": "      ++address;",
          "new_line_content": "      *(buffer++) = rgba_geta(*address);",
          "content_same": false
        },
        {
          "line": 647,
          "old_api": null,
          "new_api": "graya_geta",
          "old_text": null,
          "new_text": "graya_geta(c)",
          "old_line_content": "  }",
          "new_line_content": "    fputc(graya_geta(c), f);",
          "content_same": false
        },
        {
          "line": 653,
          "old_api": null,
          "new_api": "graya_geta",
          "old_text": null,
          "new_text": "graya_geta(*address)",
          "old_line_content": "      ++address;",
          "new_line_content": "      *(buffer++) = graya_geta(*address);",
          "content_same": false
        },
        {
          "line": 663,
          "old_api": null,
          "new_api": "fputc",
          "old_text": null,
          "new_text": "fputc(c, f)",
          "old_line_content": "  }",
          "new_line_content": "    fputc(c, f);",
          "content_same": false
        },
        {
          "line": 667,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(buffer, address, w)",
          "old_line_content": "  }",
          "new_line_content": "    memcpy(buffer, address, w);",
          "content_same": false
        },
        {
          "line": 683,
          "old_api": null,
          "new_api": "get_pixel_fast<ImageTraits>(image, x, y)",
          "old_text": null,
          "new_text": "get_pixel_fast<ImageTraits>(image, x, y)",
          "old_line_content": "}",
          "new_line_content": "      pixel_io.write_pixel(f, get_pixel_fast<ImageTraits>(image, x, y));",
          "content_same": false
        },
        {
          "line": 700,
          "old_api": null,
          "new_api": "deflateInit",
          "old_text": null,
          "new_text": "deflateInit(&zstream, Z_DEFAULT_COMPRESSION)",
          "old_line_content": "  if (err != Z_OK)",
          "new_line_content": "  err = deflateInit(&zstream, Z_DEFAULT_COMPRESSION);",
          "content_same": false
        },
        {
          "line": 702,
          "old_api": null,
          "new_api": "base::Exception(\"ZLib error %d in deflateInit().\", err)",
          "old_text": null,
          "new_text": "base::Exception(\"ZLib error %d in deflateInit().\", err)",
          "old_line_content": "",
          "new_line_content": "    throw base::Exception(\"ZLib error %d in deflateInit().\", err);",
          "content_same": false
        },
        {
          "line": 704,
          "old_api": null,
          "new_api": "width",
          "old_text": null,
          "new_text": "image->width()",
          "old_line_content": "  std::vector<uint8_t> compressed(4096);",
          "new_line_content": "  std::vector<uint8_t> scanline(ImageTraits::getRowStrideBytes(image->width()));",
          "content_same": false
        },
        {
          "line": 707,
          "old_api": null,
          "new_api": "height",
          "old_text": null,
          "new_text": "image->height()",
          "old_line_content": "    typename ImageTraits::address_t address =",
          "new_line_content": "  for (y=0; y<image->height(); y++) {",
          "content_same": false
        },
        {
          "line": 709,
          "old_api": null,
          "new_api": "getPixelAddress",
          "old_text": null,
          "new_text": "image->getPixelAddress(0, y)",
          "old_line_content": "",
          "new_line_content": "      (typename ImageTraits::address_t)image->getPixelAddress(0, y);",
          "content_same": false
        },
        {
          "line": 711,
          "old_api": null,
          "new_api": "width",
          "old_text": null,
          "new_text": "image->width()",
          "old_line_content": "",
          "new_line_content": "    pixel_io.write_scanline(address, image->width(), &scanline[0]);",
          "content_same": false
        },
        {
          "line": 715,
          "old_api": null,
          "new_api": "height",
          "old_text": null,
          "new_text": "image->height()",
          "old_line_content": "",
          "new_line_content": "    int flush = (y == image->height()-1 ? Z_FINISH: Z_NO_FLUSH);",
          "content_same": false
        },
        {
          "line": 719,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "compressed.size()",
          "old_line_content": "",
          "new_line_content": "      zstream.avail_out = compressed.size();",
          "content_same": false
        },
        {
          "line": 722,
          "old_api": null,
          "new_api": "deflate",
          "old_text": null,
          "new_text": "deflate(&zstream, flush)",
          "old_line_content": "      if (err != Z_OK && err != Z_STREAM_END && err != Z_BUF_ERROR)",
          "new_line_content": "      err = deflate(&zstream, flush);",
          "content_same": false
        },
        {
          "line": 724,
          "old_api": null,
          "new_api": "base::Exception(\"ZLib error %d in deflate().\", err)",
          "old_text": null,
          "new_text": "base::Exception(\"ZLib error %d in deflate().\", err)",
          "old_line_content": "",
          "new_line_content": "        throw base::Exception(\"ZLib error %d in deflate().\", err);",
          "content_same": false
        },
        {
          "line": 726,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "compressed.size()",
          "old_line_content": "      if (output_bytes > 0) {",
          "new_line_content": "      int output_bytes = compressed.size() - zstream.avail_out;",
          "content_same": false
        },
        {
          "line": 730,
          "old_api": null,
          "new_api": "base::Exception(\"Error writing compressed image pixels.\\n\")",
          "old_text": null,
          "new_text": "base::Exception(\"Error writing compressed image pixels.\\n\")",
          "old_line_content": "      }",
          "new_line_content": "          throw base::Exception(\"Error writing compressed image pixels.\\n\");",
          "content_same": false
        },
        {
          "line": 735,
          "old_api": null,
          "new_api": "deflateEnd",
          "old_text": null,
          "new_text": "deflateEnd(&zstream)",
          "old_line_content": "  if (err != Z_OK)",
          "new_line_content": "  err = deflateEnd(&zstream);",
          "content_same": false
        },
        {
          "line": 737,
          "old_api": null,
          "new_api": "base::Exception(\"ZLib error %d in deflateEnd().\", err)",
          "old_text": null,
          "new_text": "base::Exception(\"ZLib error %d in deflateEnd().\", err)",
          "old_line_content": "}",
          "new_line_content": "    throw base::Exception(\"ZLib error %d in deflateEnd().\", err);",
          "content_same": false
        },
        {
          "line": 753,
          "old_api": null,
          "new_api": "link",
          "old_text": null,
          "new_text": "cel->link()",
          "old_line_content": "",
          "new_line_content": "  const Cel* link = cel->link();",
          "content_same": false
        },
        {
          "line": 757,
          "old_api": null,
          "new_api": "frame",
          "old_text": null,
          "new_text": "link->frame()",
          "old_line_content": "    link = nullptr;",
          "new_line_content": "  if (link && link->frame() < firstFrame) {",
          "content_same": false
        },
        {
          "line": 761,
          "old_api": null,
          "new_api": "image",
          "old_text": null,
          "new_text": "cel->image()->id()",
          "old_line_content": "        break;",
          "new_line_content": "      if (link && link->image()->id() == cel->image()->id())",
          "content_same": false
        },
        {
          "line": 775,
          "old_api": null,
          "new_api": "ase_file_write_padding",
          "old_text": null,
          "new_text": "ase_file_write_padding(f, 7)",
          "old_line_content": "",
          "new_line_content": "  ase_file_write_padding(f, 7);",
          "content_same": false
        },
        {
          "line": 780,
          "old_api": null,
          "new_api": "image",
          "old_text": null,
          "new_text": "cel->image()",
          "old_line_content": "",
          "new_line_content": "      const Image* image = cel->image();",
          "content_same": false
        },
        {
          "line": 785,
          "old_api": null,
          "new_api": "height",
          "old_text": null,
          "new_text": "image->height()",
          "old_line_content": "",
          "new_line_content": "        fputw(image->height(), f);",
          "content_same": false
        },
        {
          "line": 788,
          "old_api": null,
          "new_api": "pixelFormat",
          "old_text": null,
          "new_text": "image->pixelFormat()",
          "old_line_content": "",
          "new_line_content": "        switch (image->pixelFormat()) {",
          "content_same": false
        },
        {
          "line": 791,
          "old_api": null,
          "new_api": "write_raw_image<RgbTraits>(f, image)",
          "old_text": null,
          "new_text": "write_raw_image<RgbTraits>(f, image)",
          "old_line_content": "            break;",
          "new_line_content": "            write_raw_image<RgbTraits>(f, image);",
          "content_same": false
        },
        {
          "line": 795,
          "old_api": null,
          "new_api": "write_raw_image<GrayscaleTraits>(f, image)",
          "old_text": null,
          "new_text": "write_raw_image<GrayscaleTraits>(f, image)",
          "old_line_content": "            break;",
          "new_line_content": "            write_raw_image<GrayscaleTraits>(f, image);",
          "content_same": false
        },
        {
          "line": 799,
          "old_api": null,
          "new_api": "write_raw_image<IndexedTraits>(f, image)",
          "old_text": null,
          "new_text": "write_raw_image<IndexedTraits>(f, image)",
          "old_line_content": "            break;",
          "new_line_content": "            write_raw_image<IndexedTraits>(f, image);",
          "content_same": false
        },
        {
          "line": 806,
          "old_api": null,
          "new_api": "fputw",
          "old_text": null,
          "new_text": "fputw(0, f)",
          "old_line_content": "      }",
          "new_line_content": "        fputw(0, f);",
          "content_same": false
        },
        {
          "line": 813,
          "old_api": null,
          "new_api": "frame",
          "old_text": null,
          "new_text": "link->frame()",
          "old_line_content": "      break;",
          "new_line_content": "      fputw(link->frame()-firstFrame, f);",
          "content_same": false
        },
        {
          "line": 817,
          "old_api": null,
          "new_api": "image",
          "old_text": null,
          "new_text": "cel->image()",
          "old_line_content": "",
          "new_line_content": "      const Image* image = cel->image();",
          "content_same": false
        },
        {
          "line": 822,
          "old_api": null,
          "new_api": "height",
          "old_text": null,
          "new_text": "image->height()",
          "old_line_content": "",
          "new_line_content": "        fputw(image->height(), f);",
          "content_same": false
        },
        {
          "line": 825,
          "old_api": null,
          "new_api": "pixelFormat",
          "old_text": null,
          "new_text": "image->pixelFormat()",
          "old_line_content": "",
          "new_line_content": "        switch (image->pixelFormat()) {",
          "content_same": false
        },
        {
          "line": 828,
          "old_api": null,
          "new_api": "write_compressed_image<RgbTraits>(f, image)",
          "old_text": null,
          "new_text": "write_compressed_image<RgbTraits>(f, image)",
          "old_line_content": "            break;",
          "new_line_content": "            write_compressed_image<RgbTraits>(f, image);",
          "content_same": false
        },
        {
          "line": 832,
          "old_api": null,
          "new_api": "write_compressed_image<GrayscaleTraits>(f, image)",
          "old_text": null,
          "new_text": "write_compressed_image<GrayscaleTraits>(f, image)",
          "old_line_content": "            break;",
          "new_line_content": "            write_compressed_image<GrayscaleTraits>(f, image);",
          "content_same": false
        },
        {
          "line": 836,
          "old_api": null,
          "new_api": "write_compressed_image<IndexedTraits>(f, image)",
          "old_text": null,
          "new_text": "write_compressed_image<IndexedTraits>(f, image)",
          "old_line_content": "            break;",
          "new_line_content": "            write_compressed_image<IndexedTraits>(f, image);",
          "content_same": false
        },
        {
          "line": 843,
          "old_api": null,
          "new_api": "fputw",
          "old_text": null,
          "new_text": "fputw(0, f)",
          "old_line_content": "      }",
          "new_line_content": "        fputw(0, f);",
          "content_same": false
        },
        {
          "line": 856,
          "old_api": null,
          "new_api": "layer",
          "old_text": null,
          "new_text": "cel->layer()->isReference()",
          "old_line_content": "",
          "new_line_content": "  ASSERT(cel->layer()->isReference());",
          "content_same": false
        },
        {
          "line": 858,
          "old_api": null,
          "new_api": "boundsF",
          "old_text": null,
          "new_text": "cel->boundsF()",
          "old_line_content": "",
          "new_line_content": "  gfx::RectF bounds = cel->boundsF();",
          "content_same": false
        },
        {
          "line": 865,
          "old_api": null,
          "new_api": "ase_file_write_padding",
          "old_text": null,
          "new_text": "ase_file_write_padding(f, 16)",
          "old_line_content": "}",
          "new_line_content": "  ase_file_write_padding(f, 16);",
          "content_same": false
        },
        {
          "line": 872,
          "old_api": null,
          "new_api": "colorSpace",
          "old_text": null,
          "new_text": "sprite->colorSpace()",
          "old_line_content": "  if (!cs)                      // No color",
          "new_line_content": "  const gfx::ColorSpaceRef& cs = sprite->colorSpace();",
          "content_same": false
        },
        {
          "line": 877,
          "old_api": null,
          "new_api": "type",
          "old_text": null,
          "new_text": "cs->type()",
          "old_line_content": "",
          "new_line_content": "  switch (cs->type()) {",
          "content_same": false
        },
        {
          "line": 889,
          "old_api": null,
          "new_api": "ASSERT",
          "old_text": null,
          "new_text": "ASSERT(false)",
          "old_line_content": "      return;",
          "new_line_content": "      ASSERT(false);            // Unknown color profile",
          "content_same": false
        },
        {
          "line": 895,
          "old_api": null,
          "new_api": "hasGamma",
          "old_text": null,
          "new_text": "cs->hasGamma()",
          "old_line_content": "",
          "new_line_content": "  fputw(cs->hasGamma() ? ASE_COLOR_PROFILE_FLAG_GAMMA: 0, f);",
          "content_same": false
        },
        {
          "line": 901,
          "old_api": null,
          "new_api": "ase_file_write_padding",
          "old_text": null,
          "new_text": "ase_file_write_padding(f, 8)",
          "old_line_content": "",
          "new_line_content": "  ase_file_write_padding(f, 8);",
          "content_same": false
        },
        {
          "line": 906,
          "old_api": null,
          "new_api": "fputl",
          "old_text": null,
          "new_text": "fputl(size, f)",
          "old_line_content": "    if (size && data)",
          "new_line_content": "    fputl(size, f);",
          "content_same": false
        },
        {
          "line": 908,
          "old_api": null,
          "new_api": "fwrite",
          "old_text": null,
          "new_text": "fwrite(data, 1, size, f)",
          "old_line_content": "  }",
          "new_line_content": "      fwrite(data, 1, size, f);",
          "content_same": false
        },
        {
          "line": 924,
          "old_api": null,
          "new_api": "ase_file_write_padding",
          "old_text": null,
          "new_text": "ase_file_write_padding(f, 8)",
          "old_line_content": "",
          "new_line_content": "  ase_file_write_padding(f, 8);",
          "content_same": false
        },
        {
          "line": 927,
          "old_api": null,
          "new_api": "name",
          "old_text": null,
          "new_text": "mask->name()",
          "old_line_content": "",
          "new_line_content": "  ase_file_write_string(f, mask->name());",
          "content_same": false
        },
        {
          "line": 934,
          "old_api": null,
          "new_api": "bitmap",
          "old_text": null,
          "new_text": "mask->bitmap()",
          "old_line_content": "          byte |= (1<<(7-c));",
          "new_line_content": "        if (get_pixel(mask->bitmap(), u*8+c, v))",
          "content_same": false
        },
        {
          "line": 936,
          "old_api": null,
          "new_api": "fputc",
          "old_text": null,
          "new_text": "fputc(byte, f)",
          "old_line_content": "    }",
          "new_line_content": "      fputc(byte, f);",
          "content_same": false
        },
        {
          "line": 953,
          "old_api": null,
          "new_api": "toFrame",
          "old_text": null,
          "new_text": "tag->toFrame()",
          "old_line_content": "      continue;",
          "new_line_content": "        tag->toFrame() < fromFrame)",
          "content_same": false
        },
        {
          "line": 960,
          "old_api": null,
          "new_api": "fputl",
          "old_text": null,
          "new_text": "fputl(0, f)",
          "old_line_content": "",
          "new_line_content": "  fputl(0, f);",
          "content_same": false
        },
        {
          "line": 964,
          "old_api": null,
          "new_api": "toFrame",
          "old_text": null,
          "new_text": "tag->toFrame()",
          "old_line_content": "      continue;",
          "new_line_content": "        tag->toFrame() < fromFrame)",
          "content_same": false
        },
        {
          "line": 968,
          "old_api": null,
          "new_api": "toFrame",
          "old_text": null,
          "new_text": "tag->toFrame()",
          "old_line_content": "",
          "new_line_content": "    frame_t to = base::clamp(tag->toFrame()-fromFrame, from, toFrame-fromFrame);",
          "content_same": false
        },
        {
          "line": 972,
          "old_api": null,
          "new_api": "aniDir",
          "old_text": null,
          "new_text": "tag->aniDir()",
          "old_line_content": "",
          "new_line_content": "    fputc((int)tag->aniDir(), f);",
          "content_same": false
        },
        {
          "line": 975,
          "old_api": null,
          "new_api": "fputl",
          "old_text": null,
          "new_text": "fputl(0, f)",
          "old_line_content": "",
          "new_line_content": "    fputl(0, f);",
          "content_same": false
        },
        {
          "line": 980,
          "old_api": null,
          "new_api": "fputc",
          "old_text": null,
          "new_text": "fputc(0, f)",
          "old_line_content": "",
          "new_line_content": "    fputc(0, f);",
          "content_same": false
        },
        {
          "line": 982,
          "old_api": null,
          "new_api": "name",
          "old_text": null,
          "new_text": "tag->name()",
          "old_line_content": "  }",
          "new_line_content": "    ase_file_write_string(f, tag->name());",
          "content_same": false
        },
        {
          "line": 991,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "userData->text().empty()",
          "old_line_content": "    flags |= ASE_USER_DATA_FLAG_HAS_TEXT;",
          "new_line_content": "  if (!userData->text().empty())",
          "content_same": false
        },
        {
          "line": 993,
          "old_api": null,
          "new_api": "color",
          "old_text": null,
          "new_text": "userData->color()",
          "old_line_content": "    flags |= ASE_USER_DATA_FLAG_HAS_COLOR;",
          "new_line_content": "  if (doc::rgba_geta(userData->color()))",
          "content_same": false
        },
        {
          "line": 995,
          "old_api": null,
          "new_api": "fputl",
          "old_text": null,
          "new_text": "fputl(flags, f)",
          "old_line_content": "",
          "new_line_content": "  fputl(flags, f);",
          "content_same": false
        },
        {
          "line": 998,
          "old_api": null,
          "new_api": "text",
          "old_text": null,
          "new_text": "userData->text()",
          "old_line_content": "",
          "new_line_content": "    ase_file_write_string(f, userData->text());",
          "content_same": false
        },
        {
          "line": 1004,
          "old_api": null,
          "new_api": "color",
          "old_text": null,
          "new_text": "userData->color()",
          "old_line_content": "  }",
          "new_line_content": "    fputc(doc::rgba_geta(userData->color()), f);",
          "content_same": false
        },
        {
          "line": 1015,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "slice->range(fromFrame, toFrame).empty()",
          "old_line_content": "      continue;",
          "new_line_content": "    if (slice->range(fromFrame, toFrame).empty())",
          "content_same": false
        },
        {
          "line": 1018,
          "old_api": null,
          "new_api": "ase_file_write_slice_chunk",
          "old_text": null,
          "new_text": "ase_file_write_slice_chunk(f, frame_header, slice,\n                               fromFrame, toFrame)",
          "old_line_content": "                               fromFrame, toFrame);",
          "new_line_content": "    ase_file_write_slice_chunk(f, frame_header, slice,",
          "content_same": false
        },
        {
          "line": 1022,
          "old_api": null,
          "new_api": "userData",
          "old_text": null,
          "new_text": "slice->userData()",
          "old_line_content": "  }",
          "new_line_content": "      ase_file_write_user_data_chunk(f, frame_header, &slice->userData());",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 1032,
          "old_api": "range",
          "new_api": null,
          "old_text": "slice->range(fromFrame, toFrame)",
          "new_text": null,
          "old_line_content": "  auto range = slice->range(fromFrame, toFrame);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1038,
          "old_api": "hasCenter",
          "new_api": null,
          "old_text": "key->hasCenter()",
          "new_text": null,
          "old_line_content": "      if (key->hasCenter()) flags |= ASE_SLICE_FLAG_HAS_CENTER_BOUNDS;",
          "new_line_content": "    if (key) {",
          "content_same": false
        },
        {
          "line": 1043,
          "old_api": "countKeys",
          "new_api": null,
          "old_text": "range.countKeys()",
          "new_text": null,
          "old_line_content": "  fputl(range.countKeys(), f);             // number of keys",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 534,
          "old_api": "ftell",
          "new_api": null,
          "old_text": "ftell(f)",
          "new_text": null,
          "old_line_content": "  int chunk_end = ftell(f);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 537,
          "old_api": "fseek",
          "new_api": null,
          "old_text": "fseek(f, chunk->start, SEEK_SET)",
          "new_text": null,
          "old_line_content": "  fseek(f, chunk->start, SEEK_SET);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1052,
          "old_api": "fputl",
          "new_api": null,
          "old_text": "fputl(frame, f)",
          "new_text": null,
          "old_line_content": "      fputl(frame, f);",
          "new_line_content": "    if (frame == fromFrame || key != oldKey) {",
          "content_same": false
        },
        {
          "line": 1059,
          "old_api": "hasCenter",
          "new_api": null,
          "old_text": "key->hasCenter()",
          "new_text": null,
          "old_line_content": "        if (key && key->hasCenter()) {",
          "new_line_content": "      if (flags & ASE_SLICE_FLAG_HAS_CENTER_BOUNDS) {",
          "content_same": false
        },
        {
          "line": 548,
          "old_api": "fputw",
          "new_api": null,
          "old_text": "fputw(1, f)",
          "new_text": null,
          "old_line_content": "  fputw(1, f);                  // Number of packets",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 551,
          "old_api": "fputc",
          "new_api": null,
          "old_text": "fputc(0, f)",
          "new_text": null,
          "old_line_content": "  fputc(0, f);                                   // skip 0 colors",
          "new_line_content": "  // First packet",
          "content_same": false
        },
        {
          "line": 1066,
          "old_api": "fputl",
          "new_api": null,
          "old_text": "fputl(0, f)",
          "new_text": null,
          "old_line_content": "          fputl(0, f);",
          "new_line_content": "        else {",
          "content_same": false
        },
        {
          "line": 1074,
          "old_api": "hasPivot",
          "new_api": null,
          "old_text": "key->hasPivot()",
          "new_text": null,
          "old_line_content": "        if (key && key->hasPivot()) {",
          "new_line_content": "      if (flags & ASE_SLICE_FLAG_HAS_PIVOT_POINT) {",
          "content_same": false
        },
        {
          "line": 565,
          "old_api": "size",
          "new_api": null,
          "old_text": "pal->size()",
          "new_text": null,
          "old_line_content": "  fputl(pal->size(), f);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1079,
          "old_api": "fputl",
          "new_api": null,
          "old_text": "fputl(0, f)",
          "new_text": null,
          "old_line_content": "          fputl(0, f);",
          "new_line_content": "        else {",
          "content_same": false
        },
        {
          "line": 571,
          "old_api": "getEntry",
          "new_api": null,
          "old_text": "pal->getEntry(c)",
          "new_text": null,
          "old_line_content": "    color_t color = pal->getEntry(c);",
          "new_line_content": "  for (int c=from; c<=to; ++c) {",
          "content_same": false
        },
        {
          "line": 573,
          "old_api": "fputw",
          "new_api": null,
          "old_text": "fputw(0, f)",
          "new_text": null,
          "old_line_content": "    fputw(0, f);                // Entry flags (without name)",
          "new_line_content": "    // TODO add support to save palette entry name",
          "content_same": false
        },
        {
          "line": 1092,
          "old_api": "layers",
          "new_api": null,
          "old_text": "group->layers()",
          "new_text": null,
          "old_line_content": "  for (Layer* child : group->layers()) {",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 586,
          "old_api": "flags",
          "new_api": null,
          "old_text": "layer->flags()",
          "new_text": null,
          "old_line_content": "  fputw(static_cast<int>(layer->flags()) &",
          "new_line_content": "  // Flags",
          "content_same": false
        },
        {
          "line": 1101,
          "old_api": "sprite",
          "new_api": null,
          "old_text": "group->sprite()->root()",
          "new_text": null,
          "old_line_content": "  LayerGroup* root = group->sprite()->root();",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 590,
          "old_api": "isImage",
          "new_api": null,
          "old_text": "layer->isImage()",
          "new_text": null,
          "old_line_content": "  fputw((layer->isImage() ? ASE_FILE_LAYER_IMAGE:",
          "new_line_content": "  // Layer type",
          "content_same": false
        },
        {
          "line": 1105,
          "old_api": "isGroup",
          "new_api": null,
          "old_text": "child->isGroup()",
          "new_text": null,
          "old_line_content": "    if (child->isGroup()) {",
          "new_line_content": "  for (Layer* child : list) {",
          "content_same": false
        },
        {
          "line": 594,
          "old_api": "fputw",
          "new_api": null,
          "old_text": "fputw(child_level, f)",
          "new_text": null,
          "old_line_content": "  fputw(child_level, f);",
          "new_line_content": "  // Layer child level",
          "content_same": false
        },
        {
          "line": 597,
          "old_api": "fputw",
          "new_api": null,
          "old_text": "fputw(0, f)",
          "new_text": null,
          "old_line_content": "  fputw(0, f);",
          "new_line_content": "  // Default width & height, and blend mode",
          "content_same": false
        },
        {
          "line": 1113,
          "old_api": "parent",
          "new_api": null,
          "old_text": "layer->parent()",
          "new_text": null,
          "old_line_content": "        for (Layer* layer=child; layer!=root; layer=layer->parent()) {",
          "new_line_content": "        std::string name;",
          "content_same": false
        },
        {
          "line": 603,
          "old_api": "ase_file_write_padding",
          "new_api": null,
          "old_text": "ase_file_write_padding(f, 3)",
          "new_text": null,
          "old_line_content": "  ase_file_write_padding(f, 3);",
          "new_line_content": "  // Padding",
          "content_same": false
        },
        {
          "line": 606,
          "old_api": "name",
          "new_api": null,
          "old_text": "layer->name()",
          "new_text": null,
          "old_line_content": "  ase_file_write_string(f, layer->name());",
          "new_line_content": "  // Layer name",
          "content_same": false
        },
        {
          "line": 1118,
          "old_api": "setName",
          "new_api": null,
          "old_text": "child->setName(name)",
          "new_text": null,
          "old_line_content": "        child->setName(name);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1121,
          "old_api": "removeLayer",
          "new_api": null,
          "old_text": "group->removeLayer(child)",
          "new_text": null,
          "old_line_content": "      group->removeLayer(child);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1127,
          "old_api": "layersCount",
          "new_api": null,
          "old_text": "group->layersCount()",
          "new_text": null,
          "old_line_content": "    ASSERT(group->layersCount() == 0);",
          "new_line_content": "  if (group != root) {",
          "content_same": false
        },
        {
          "line": 624,
          "old_api": "rgba_getr",
          "new_api": null,
          "old_text": "rgba_getr(c)",
          "new_text": null,
          "old_line_content": "    fputc(rgba_getr(c), f);",
          "new_line_content": "  void write_pixel(FILE* f, RgbTraits::pixel_t c) {",
          "content_same": false
        },
        {
          "line": 632,
          "old_api": "rgba_getr",
          "new_api": null,
          "old_text": "rgba_getr(*address)",
          "new_text": null,
          "old_line_content": "      *(buffer++) = rgba_getr(*address);",
          "new_line_content": "    for (int x=0; x<w; ++x) {",
          "content_same": false
        },
        {
          "line": 645,
          "old_api": "graya_getv",
          "new_api": null,
          "old_text": "graya_getv(c)",
          "new_text": null,
          "old_line_content": "    fputc(graya_getv(c), f);",
          "new_line_content": "  void write_pixel(FILE* f, GrayscaleTraits::pixel_t c) {",
          "content_same": false
        },
        {
          "line": 651,
          "old_api": "graya_getv",
          "new_api": null,
          "old_text": "graya_getv(*address)",
          "new_text": null,
          "old_line_content": "      *(buffer++) = graya_getv(*address);",
          "new_line_content": "    for (int x=0; x<w; ++x) {",
          "content_same": false
        },
        {
          "line": 662,
          "old_api": "fputc",
          "new_api": null,
          "old_text": "fputc(c, f)",
          "new_text": null,
          "old_line_content": "    fputc(c, f);",
          "new_line_content": "  void write_pixel(FILE* f, IndexedTraits::pixel_t c) {",
          "content_same": false
        },
        {
          "line": 666,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(buffer, address, w)",
          "new_text": null,
          "old_line_content": "    memcpy(buffer, address, w);",
          "new_line_content": "  {",
          "content_same": false
        },
        {
          "line": 680,
          "old_api": "height",
          "new_api": null,
          "old_text": "image->height()",
          "new_text": null,
          "old_line_content": "  for (y=0; y<image->height(); y++)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 699,
          "old_api": "deflateInit",
          "new_api": null,
          "old_text": "deflateInit(&zstream, Z_DEFAULT_COMPRESSION)",
          "new_text": null,
          "old_line_content": "  err = deflateInit(&zstream, Z_DEFAULT_COMPRESSION);",
          "new_line_content": "  zstream.opaque = (voidpf)0;",
          "content_same": false
        },
        {
          "line": 701,
          "old_api": "base::Exception(\"ZLib error %d in deflateInit().\", err)",
          "new_api": null,
          "old_text": "base::Exception(\"ZLib error %d in deflateInit().\", err)",
          "new_text": null,
          "old_line_content": "    throw base::Exception(\"ZLib error %d in deflateInit().\", err);",
          "new_line_content": "  if (err != Z_OK)",
          "content_same": false
        },
        {
          "line": 703,
          "old_api": "width",
          "new_api": null,
          "old_text": "image->width()",
          "new_text": null,
          "old_line_content": "  std::vector<uint8_t> scanline(ImageTraits::getRowStrideBytes(image->width()));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 706,
          "old_api": "height",
          "new_api": null,
          "old_text": "image->height()",
          "new_text": null,
          "old_line_content": "  for (y=0; y<image->height(); y++) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 708,
          "old_api": "getPixelAddress",
          "new_api": null,
          "old_text": "image->getPixelAddress(0, y)",
          "new_text": null,
          "old_line_content": "      (typename ImageTraits::address_t)image->getPixelAddress(0, y);",
          "new_line_content": "    typename ImageTraits::address_t address =",
          "content_same": false
        },
        {
          "line": 710,
          "old_api": "width",
          "new_api": null,
          "old_text": "image->width()",
          "new_text": null,
          "old_line_content": "    pixel_io.write_scanline(address, image->width(), &scanline[0]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 713,
          "old_api": "size",
          "new_api": null,
          "old_text": "scanline.size()",
          "new_text": null,
          "old_line_content": "    zstream.avail_in = scanline.size();",
          "new_line_content": "    zstream.next_in = (Bytef*)&scanline[0];",
          "content_same": false
        },
        {
          "line": 718,
          "old_api": "size",
          "new_api": null,
          "old_text": "compressed.size()",
          "new_text": null,
          "old_line_content": "      zstream.avail_out = compressed.size();",
          "new_line_content": "      zstream.next_out = (Bytef*)&compressed[0];",
          "content_same": false
        },
        {
          "line": 721,
          "old_api": "deflate",
          "new_api": null,
          "old_text": "deflate(&zstream, flush)",
          "new_text": null,
          "old_line_content": "      err = deflate(&zstream, flush);",
          "new_line_content": "      // Compress",
          "content_same": false
        },
        {
          "line": 723,
          "old_api": "base::Exception(\"ZLib error %d in deflate().\", err)",
          "new_api": null,
          "old_text": "base::Exception(\"ZLib error %d in deflate().\", err)",
          "new_text": null,
          "old_line_content": "        throw base::Exception(\"ZLib error %d in deflate().\", err);",
          "new_line_content": "      if (err != Z_OK && err != Z_STREAM_END && err != Z_BUF_ERROR)",
          "content_same": false
        },
        {
          "line": 725,
          "old_api": "size",
          "new_api": null,
          "old_text": "compressed.size()",
          "new_text": null,
          "old_line_content": "      int output_bytes = compressed.size() - zstream.avail_out;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 727,
          "old_api": "fwrite",
          "new_api": null,
          "old_text": "fwrite(&compressed[0], 1, output_bytes, f)",
          "new_text": null,
          "old_line_content": "        if ((fwrite(&compressed[0], 1, output_bytes, f) != (size_t)output_bytes)",
          "new_line_content": "      if (output_bytes > 0) {",
          "content_same": false
        },
        {
          "line": 734,
          "old_api": "deflateEnd",
          "new_api": null,
          "old_text": "deflateEnd(&zstream)",
          "new_text": null,
          "old_line_content": "  err = deflateEnd(&zstream);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 736,
          "old_api": "base::Exception(\"ZLib error %d in deflateEnd().\", err)",
          "new_api": null,
          "old_text": "base::Exception(\"ZLib error %d in deflateEnd().\", err)",
          "new_text": null,
          "old_line_content": "    throw base::Exception(\"ZLib error %d in deflateEnd().\", err);",
          "new_line_content": "  if (err != Z_OK)",
          "content_same": false
        },
        {
          "line": 752,
          "old_api": "link",
          "new_api": null,
          "old_text": "cel->link()",
          "new_text": null,
          "old_line_content": "  const Cel* link = cel->link();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 756,
          "old_api": "frame",
          "new_api": null,
          "old_text": "link->frame()",
          "new_text": null,
          "old_line_content": "  if (link && link->frame() < firstFrame) {",
          "new_line_content": "  // first linked cel that is inside the ROI.",
          "content_same": false
        },
        {
          "line": 758,
          "old_api": "frame",
          "new_api": null,
          "old_text": "cel->frame()",
          "new_text": null,
          "old_line_content": "    for (frame_t i=firstFrame; i<=cel->frame(); ++i) {",
          "new_line_content": "    link = nullptr;",
          "content_same": false
        },
        {
          "line": 769,
          "old_api": "fputw",
          "new_api": null,
          "old_text": "fputw(layer_index, f)",
          "new_text": null,
          "old_line_content": "  fputw(layer_index, f);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 779,
          "old_api": "image",
          "new_api": null,
          "old_text": "cel->image()",
          "new_text": null,
          "old_line_content": "      const Image* image = cel->image();",
          "new_line_content": "    case ASE_FILE_RAW_CEL: {",
          "content_same": false
        },
        {
          "line": 783,
          "old_api": "width",
          "new_api": null,
          "old_text": "image->width()",
          "new_text": null,
          "old_line_content": "        fputw(image->width(), f);",
          "new_line_content": "        // Width and height",
          "content_same": false
        },
        {
          "line": 787,
          "old_api": "pixelFormat",
          "new_api": null,
          "old_text": "image->pixelFormat()",
          "new_text": null,
          "old_line_content": "        switch (image->pixelFormat()) {",
          "new_line_content": "        // Pixel data",
          "content_same": false
        },
        {
          "line": 790,
          "old_api": "write_raw_image<RgbTraits>(f, image)",
          "new_api": null,
          "old_text": "write_raw_image<RgbTraits>(f, image)",
          "new_text": null,
          "old_line_content": "            write_raw_image<RgbTraits>(f, image);",
          "new_line_content": "          case IMAGE_RGB:",
          "content_same": false
        },
        {
          "line": 794,
          "old_api": "write_raw_image<GrayscaleTraits>(f, image)",
          "new_api": null,
          "old_text": "write_raw_image<GrayscaleTraits>(f, image)",
          "new_text": null,
          "old_line_content": "            write_raw_image<GrayscaleTraits>(f, image);",
          "new_line_content": "          case IMAGE_GRAYSCALE:",
          "content_same": false
        },
        {
          "line": 798,
          "old_api": "write_raw_image<IndexedTraits>(f, image)",
          "new_api": null,
          "old_text": "write_raw_image<IndexedTraits>(f, image)",
          "new_text": null,
          "old_line_content": "            write_raw_image<IndexedTraits>(f, image);",
          "new_line_content": "          case IMAGE_INDEXED:",
          "content_same": false
        },
        {
          "line": 804,
          "old_api": "fputw",
          "new_api": null,
          "old_text": "fputw(0, f)",
          "new_text": null,
          "old_line_content": "        fputw(0, f);",
          "new_line_content": "        // Width and height",
          "content_same": false
        },
        {
          "line": 812,
          "old_api": "frame",
          "new_api": null,
          "old_text": "link->frame()",
          "new_text": null,
          "old_line_content": "      fputw(link->frame()-firstFrame, f);",
          "new_line_content": "      // Linked cel to another frame",
          "content_same": false
        },
        {
          "line": 816,
          "old_api": "image",
          "new_api": null,
          "old_text": "cel->image()",
          "new_text": null,
          "old_line_content": "      const Image* image = cel->image();",
          "new_line_content": "    case ASE_FILE_COMPRESSED_CEL: {",
          "content_same": false
        },
        {
          "line": 820,
          "old_api": "width",
          "new_api": null,
          "old_text": "image->width()",
          "new_text": null,
          "old_line_content": "        fputw(image->width(), f);",
          "new_line_content": "        // Width and height",
          "content_same": false
        },
        {
          "line": 824,
          "old_api": "pixelFormat",
          "new_api": null,
          "old_text": "image->pixelFormat()",
          "new_text": null,
          "old_line_content": "        switch (image->pixelFormat()) {",
          "new_line_content": "        // Pixel data",
          "content_same": false
        },
        {
          "line": 827,
          "old_api": "write_compressed_image<RgbTraits>(f, image)",
          "new_api": null,
          "old_text": "write_compressed_image<RgbTraits>(f, image)",
          "new_text": null,
          "old_line_content": "            write_compressed_image<RgbTraits>(f, image);",
          "new_line_content": "          case IMAGE_RGB:",
          "content_same": false
        },
        {
          "line": 831,
          "old_api": "write_compressed_image<GrayscaleTraits>(f, image)",
          "new_api": null,
          "old_text": "write_compressed_image<GrayscaleTraits>(f, image)",
          "new_text": null,
          "old_line_content": "            write_compressed_image<GrayscaleTraits>(f, image);",
          "new_line_content": "          case IMAGE_GRAYSCALE:",
          "content_same": false
        },
        {
          "line": 835,
          "old_api": "write_compressed_image<IndexedTraits>(f, image)",
          "new_api": null,
          "old_text": "write_compressed_image<IndexedTraits>(f, image)",
          "new_text": null,
          "old_line_content": "            write_compressed_image<IndexedTraits>(f, image);",
          "new_line_content": "          case IMAGE_INDEXED:",
          "content_same": false
        },
        {
          "line": 841,
          "old_api": "fputw",
          "new_api": null,
          "old_text": "fputw(0, f)",
          "new_text": null,
          "old_line_content": "        fputw(0, f);",
          "new_line_content": "        // Width and height",
          "content_same": false
        },
        {
          "line": 855,
          "old_api": "layer",
          "new_api": null,
          "old_text": "cel->layer()->isReference()",
          "new_text": null,
          "old_line_content": "  ASSERT(cel->layer()->isReference());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 857,
          "old_api": "boundsF",
          "new_api": null,
          "old_text": "cel->boundsF()",
          "new_text": null,
          "old_line_content": "  gfx::RectF bounds = cel->boundsF();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 859,
          "old_api": "fputl",
          "new_api": null,
          "old_text": "fputl(ASE_CEL_EXTRA_FLAG_PRECISE_BOUNDS, f)",
          "new_text": null,
          "old_line_content": "  fputl(ASE_CEL_EXTRA_FLAG_PRECISE_BOUNDS, f);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 871,
          "old_api": "colorSpace",
          "new_api": null,
          "old_text": "sprite->colorSpace()",
          "new_text": null,
          "old_line_content": "  const gfx::ColorSpaceRef& cs = sprite->colorSpace();",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 876,
          "old_api": "type",
          "new_api": null,
          "old_text": "cs->type()",
          "new_text": null,
          "old_line_content": "  switch (cs->type()) {",
          "new_line_content": "  int type = ASE_FILE_NO_COLOR_PROFILE;",
          "content_same": false
        },
        {
          "line": 888,
          "old_api": "ASSERT",
          "new_api": null,
          "old_text": "ASSERT(false)",
          "new_text": null,
          "old_line_content": "      ASSERT(false);            // Unknown color profile",
          "new_line_content": "    default:",
          "content_same": false
        },
        {
          "line": 893,
          "old_api": "fputw",
          "new_api": null,
          "old_text": "fputw(type, f)",
          "new_text": null,
          "old_line_content": "  fputw(type, f);",
          "new_line_content": "  ChunkWriter chunk(f, frame_header, ASE_FILE_CHUNK_COLOR_PROFILE);",
          "content_same": false
        },
        {
          "line": 897,
          "old_api": "hasGamma",
          "new_api": null,
          "old_text": "cs->hasGamma()",
          "new_text": null,
          "old_line_content": "  if (cs->hasGamma())",
          "new_line_content": "  fixmath::fixed gamma = 0;",
          "content_same": false
        },
        {
          "line": 902,
          "old_api": "type",
          "new_api": null,
          "old_text": "cs->type()",
          "new_text": null,
          "old_line_content": "  if (cs->type() == gfx::ColorSpace::ICC) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 907,
          "old_api": "fwrite",
          "new_api": null,
          "old_text": "fwrite(data, 1, size, f)",
          "new_text": null,
          "old_line_content": "      fwrite(data, 1, size, f);",
          "new_line_content": "    if (size && data)",
          "content_same": false
        },
        {
          "line": 919,
          "old_api": "fputw",
          "new_api": null,
          "old_text": "fputw(bounds.x, f)",
          "new_text": null,
          "old_line_content": "  fputw(bounds.x, f);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 926,
          "old_api": "name",
          "new_api": null,
          "old_text": "mask->name()",
          "new_text": null,
          "old_line_content": "  ase_file_write_string(f, mask->name());",
          "new_line_content": "  // Name",
          "content_same": false
        },
        {
          "line": 933,
          "old_api": "bitmap",
          "new_api": null,
          "old_text": "mask->bitmap()",
          "new_text": null,
          "old_line_content": "        if (get_pixel(mask->bitmap(), u*8+c, v))",
          "new_line_content": "      for (c=0; c<8; c++)",
          "content_same": false
        },
        {
          "line": 935,
          "old_api": "fputc",
          "new_api": null,
          "old_text": "fputc(byte, f)",
          "new_text": null,
          "old_line_content": "      fputc(byte, f);",
          "new_line_content": "          byte |= (1<<(7-c));",
          "content_same": false
        },
        {
          "line": 951,
          "old_api": "fromFrame",
          "new_api": null,
          "old_text": "tag->fromFrame()",
          "new_text": null,
          "old_line_content": "    if (tag->fromFrame() > toFrame ||",
          "new_line_content": "    // Skip tags that are outside of the given ROI",
          "content_same": false
        },
        {
          "line": 957,
          "old_api": "fputw",
          "new_api": null,
          "old_text": "fputw(ntags, f)",
          "new_text": null,
          "old_line_content": "  fputw(ntags, f);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 962,
          "old_api": "fromFrame",
          "new_api": null,
          "old_text": "tag->fromFrame()",
          "new_text": null,
          "old_line_content": "    if (tag->fromFrame() > toFrame ||",
          "new_line_content": "  for (const Tag* tag : *tags) {",
          "content_same": false
        },
        {
          "line": 966,
          "old_api": "fromFrame",
          "new_api": null,
          "old_text": "tag->fromFrame()",
          "new_text": null,
          "old_line_content": "    frame_t from = base::clamp(tag->fromFrame()-fromFrame, 0, toFrame-fromFrame);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 969,
          "old_api": "fputw",
          "new_api": null,
          "old_text": "fputw(from, f)",
          "new_text": null,
          "old_line_content": "    fputw(from, f);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 973,
          "old_api": "fputl",
          "new_api": null,
          "old_text": "fputl(0, f)",
          "new_text": null,
          "old_line_content": "    fputl(0, f);  // 8 reserved bytes",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 976,
          "old_api": "color",
          "new_api": null,
          "old_text": "tag->color()",
          "new_text": null,
          "old_line_content": "    fputc(doc::rgba_getr(tag->color()), f);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 981,
          "old_api": "name",
          "new_api": null,
          "old_text": "tag->name()",
          "new_text": null,
          "old_line_content": "    ase_file_write_string(f, tag->name());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 990,
          "old_api": "empty",
          "new_api": null,
          "old_text": "userData->text().empty()",
          "new_text": null,
          "old_line_content": "  if (!userData->text().empty())",
          "new_line_content": "  int flags = 0;",
          "content_same": false
        },
        {
          "line": 992,
          "old_api": "color",
          "new_api": null,
          "old_text": "userData->color()",
          "new_text": null,
          "old_line_content": "  if (doc::rgba_geta(userData->color()))",
          "new_line_content": "    flags |= ASE_USER_DATA_FLAG_HAS_TEXT;",
          "content_same": false
        },
        {
          "line": 994,
          "old_api": "fputl",
          "new_api": null,
          "old_text": "fputl(flags, f)",
          "new_text": null,
          "old_line_content": "  fputl(flags, f);",
          "new_line_content": "    flags |= ASE_USER_DATA_FLAG_HAS_COLOR;",
          "content_same": false
        },
        {
          "line": 997,
          "old_api": "text",
          "new_api": null,
          "old_text": "userData->text()",
          "new_text": null,
          "old_line_content": "    ase_file_write_string(f, userData->text());",
          "new_line_content": "  if (flags & ASE_USER_DATA_FLAG_HAS_TEXT)",
          "content_same": false
        },
        {
          "line": 1000,
          "old_api": "color",
          "new_api": null,
          "old_text": "userData->color()",
          "new_text": null,
          "old_line_content": "    fputc(doc::rgba_getr(userData->color()), f);",
          "new_line_content": "  if (flags & ASE_USER_DATA_FLAG_HAS_COLOR) {",
          "content_same": false
        },
        {
          "line": 1014,
          "old_api": "empty",
          "new_api": null,
          "old_text": "slice->range(fromFrame, toFrame).empty()",
          "new_text": null,
          "old_line_content": "    if (slice->range(fromFrame, toFrame).empty())",
          "new_line_content": "    // Skip slices that are outside of the given ROI",
          "content_same": false
        },
        {
          "line": 1017,
          "old_api": "ase_file_write_slice_chunk",
          "new_api": null,
          "old_text": "ase_file_write_slice_chunk(f, frame_header, slice,\n                               fromFrame, toFrame)",
          "new_text": null,
          "old_line_content": "    ase_file_write_slice_chunk(f, frame_header, slice,",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1020,
          "old_api": "isEmpty",
          "new_api": null,
          "old_text": "slice->userData().isEmpty()",
          "new_text": null,
          "old_line_content": "    if (!slice->userData().isEmpty())",
          "new_line_content": "",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 76,
      "total_additions": 99,
      "total_deletions": 98,
      "total_api_changes": 273
    },
    "non_api_changes": {
      "has_non_api_changes": false,
      "evidence": {
        "total_diff_lines": 2,
        "api_related_lines": 273,
        "non_api_lines": 0,
        "non_api_line_numbers": []
      }
    },
    "api_calls_before": 485,
    "api_calls_after": 486,
    "diff_info": {
      "added_lines": 2,
      "removed_lines": 1,
      "total_diff_lines": 15
    }
  }
}
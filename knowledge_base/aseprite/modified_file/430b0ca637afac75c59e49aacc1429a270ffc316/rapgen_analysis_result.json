{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/aseprite/modified_file/430b0ca637afac75c59e49aacc1429a270ffc316",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/aseprite/modified_file/430b0ca637afac75c59e49aacc1429a270ffc316/before.cpp",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/aseprite/modified_file/430b0ca637afac75c59e49aacc1429a270ffc316/after.cpp",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/aseprite/modified_file/430b0ca637afac75c59e49aacc1429a270ffc316/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 133,
          "old_api": "put_pixel_fast<ImageTraits>(dst, 2*x,   2*y,   (C == A && C != D && A != B ? A: P))",
          "new_api": "get_pixel_fast<ImageTraits>(src, x, y-1)",
          "old_text": "put_pixel_fast<ImageTraits>(dst, 2*x,   2*y,   (C == A && C != D && A != B ? A: P))",
          "new_text": "get_pixel_fast<ImageTraits>(src, x, y-1)",
          "old_line_content": "      put_pixel_fast<ImageTraits>(dst, 2*x,   2*y,   (C == A && C != D && A != B ? A: P));",
          "new_line_content": "      A = (y > 0 ? get_pixel_fast<ImageTraits>(src, x, y-1): P);",
          "content_same": false
        },
        {
          "line": 134,
          "old_api": "put_pixel_fast<ImageTraits>(dst, 2*x+1, 2*y,   (A == B && A != C && B != D ? B: P))",
          "new_api": "get_pixel_fast<ImageTraits>(src, x+1, y)",
          "old_text": "put_pixel_fast<ImageTraits>(dst, 2*x+1, 2*y,   (A == B && A != C && B != D ? B: P))",
          "new_text": "get_pixel_fast<ImageTraits>(src, x+1, y)",
          "old_line_content": "      put_pixel_fast<ImageTraits>(dst, 2*x+1, 2*y,   (A == B && A != C && B != D ? B: P));",
          "new_line_content": "      B = (x < src_w-1 ? get_pixel_fast<ImageTraits>(src, x+1, y): P);",
          "content_same": false
        },
        {
          "line": 135,
          "old_api": "put_pixel_fast<ImageTraits>(dst, 2*x,   2*y+1, (D == C && D != B && C != A ? C: P))",
          "new_api": "get_pixel_fast<ImageTraits>(src, x-1, y)",
          "old_text": "put_pixel_fast<ImageTraits>(dst, 2*x,   2*y+1, (D == C && D != B && C != A ? C: P))",
          "new_text": "get_pixel_fast<ImageTraits>(src, x-1, y)",
          "old_line_content": "      put_pixel_fast<ImageTraits>(dst, 2*x,   2*y+1, (D == C && D != B && C != A ? C: P));",
          "new_line_content": "      C = (x > 0 ? get_pixel_fast<ImageTraits>(src, x-1, y): P);",
          "content_same": false
        },
        {
          "line": 136,
          "old_api": "put_pixel_fast<ImageTraits>(dst, 2*x+1, 2*y+1, (B == D && B != A && D != C ? D: P))",
          "new_api": "get_pixel_fast<ImageTraits>(src, x, y+1)",
          "old_text": "put_pixel_fast<ImageTraits>(dst, 2*x+1, 2*y+1, (B == D && B != A && D != C ? D: P))",
          "new_text": "get_pixel_fast<ImageTraits>(src, x, y+1)",
          "old_line_content": "      put_pixel_fast<ImageTraits>(dst, 2*x+1, 2*y+1, (B == D && B != A && D != C ? D: P));",
          "new_line_content": "      D = (y < src_h-1 ? get_pixel_fast<ImageTraits>(src, x, y+1): P);",
          "content_same": false
        },
        {
          "line": 159,
          "old_api": "reset",
          "new_api": "image_scale2x_tpl<IndexedTraits>(dst, src, src_w, src_h)",
          "old_text": "buf1.reset(new ImageBuffer(1))",
          "new_text": "image_scale2x_tpl<IndexedTraits>(dst, src, src_w, src_h)",
          "old_line_content": "  if (!buf1) buf1.reset(new ImageBuffer(1));",
          "new_line_content": "    case IMAGE_INDEXED:   image_scale2x_tpl<IndexedTraits>(dst, src, src_w, src_h); break;",
          "content_same": false
        },
        {
          "line": 160,
          "old_api": "reset",
          "new_api": "image_scale2x_tpl<BitmapTraits>(dst, src, src_w, src_h)",
          "old_text": "buf2.reset(new ImageBuffer(1))",
          "new_text": "image_scale2x_tpl<BitmapTraits>(dst, src, src_w, src_h)",
          "old_line_content": "  if (!buf2) buf2.reset(new ImageBuffer(1));",
          "new_line_content": "    case IMAGE_BITMAP:    image_scale2x_tpl<BitmapTraits>(dst, src, src_w, src_h); break;",
          "content_same": false
        },
        {
          "line": 171,
          "old_api": "pixelFormat",
          "new_api": "reset",
          "old_text": "bmp->pixelFormat()",
          "new_text": "buf2.reset(new ImageBuffer(1))",
          "old_line_content": "  base::UniquePtr<Image> bmp_copy(Image::create(bmp->pixelFormat(), rot_width*scale, rot_height*scale, buf1));",
          "new_line_content": "  if (!buf2) buf2.reset(new ImageBuffer(1));",
          "content_same": false
        },
        {
          "line": 172,
          "old_api": "height",
          "new_api": "reset",
          "old_text": "spr->height()",
          "new_text": "buf3.reset(new ImageBuffer(1))",
          "old_line_content": "  base::UniquePtr<Image> tmp_copy(Image::create(spr->pixelFormat(), spr->width()*scale, spr->height()*scale, buf2));",
          "new_line_content": "  if (!buf3) buf3.reset(new ImageBuffer(1));",
          "content_same": false
        },
        {
          "line": 175,
          "old_api": "maskColor",
          "new_api": "MAX",
          "old_text": "spr->maskColor()",
          "new_text": "MAX(x3, x4)",
          "old_line_content": "  color_t maskColor = spr->maskColor();",
          "new_line_content": "  int xmax = MAX(x1, MAX(x2, MAX(x3, x4)));",
          "content_same": false
        },
        {
          "line": 177,
          "old_api": "setMaskColor",
          "new_api": "MAX",
          "old_text": "bmp_copy->setMaskColor(maskColor)",
          "new_text": "MAX(y3, y4)",
          "old_line_content": "  bmp_copy->setMaskColor(maskColor);",
          "new_line_content": "  int ymax = MAX(y1, MAX(y2, MAX(y3, y4)));",
          "content_same": false
        },
        {
          "line": 182,
          "old_api": "clear",
          "new_api": "pixelFormat",
          "old_text": "spr_copy->clear(maskColor)",
          "new_text": "bmp->pixelFormat()",
          "old_line_content": "  spr_copy->clear(maskColor);",
          "new_line_content": "  base::UniquePtr<Image> bmp_copy(Image::create(bmp->pixelFormat(), rot_width*scale, rot_height*scale, buf1));",
          "content_same": false
        },
        {
          "line": 183,
          "old_api": "bounds",
          "new_api": "height",
          "old_text": "spr->bounds()",
          "new_text": "spr->height()",
          "old_line_content": "  spr_copy->copy(spr, gfx::Clip(spr->bounds()));",
          "new_line_content": "  base::UniquePtr<Image> tmp_copy(Image::create(spr->pixelFormat(), spr->width()*scale, spr->height()*scale, buf2));",
          "content_same": false
        },
        {
          "line": 186,
          "old_api": "clear_image",
          "new_api": "maskColor",
          "old_text": "clear_image(tmp_copy, maskColor)",
          "new_text": "spr->maskColor()",
          "old_line_content": "    clear_image(tmp_copy, maskColor);",
          "new_line_content": "  color_t maskColor = spr->maskColor();",
          "content_same": false
        },
        {
          "line": 188,
          "old_api": "bounds",
          "new_api": "setMaskColor",
          "old_text": "tmp_copy->bounds()",
          "new_text": "bmp_copy->setMaskColor(maskColor)",
          "old_line_content": "    spr_copy->copy(tmp_copy, gfx::Clip(tmp_copy->bounds()));",
          "new_line_content": "  bmp_copy->setMaskColor(maskColor);",
          "content_same": false
        },
        {
          "line": 197,
          "old_api": "height",
          "new_api": "clear_image",
          "old_text": "bmp_copy->height()",
          "new_text": "clear_image(tmp_copy, maskColor)",
          "old_line_content": "    xmin, ymin, bmp_copy->width()/scale, bmp_copy->height()/scale);",
          "new_line_content": "    clear_image(tmp_copy, maskColor);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 132,
          "old_api": null,
          "new_api": "get_pixel_fast<ImageTraits>(src, x, y)",
          "old_text": null,
          "new_text": "get_pixel_fast<ImageTraits>(src, x, y)",
          "old_line_content": "",
          "new_line_content": "      P = get_pixel_fast<ImageTraits>(src, x, y);",
          "content_same": false
        },
        {
          "line": 156,
          "old_api": null,
          "new_api": "pixelFormat",
          "old_text": null,
          "new_text": "src->pixelFormat()",
          "old_line_content": "{",
          "new_line_content": "  switch (src->pixelFormat()) {",
          "content_same": false
        },
        {
          "line": 157,
          "old_api": null,
          "new_api": "image_scale2x_tpl<RgbTraits>(dst, src, src_w, src_h)",
          "old_text": null,
          "new_text": "image_scale2x_tpl<RgbTraits>(dst, src, src_w, src_h)",
          "old_line_content": "  static ImageBufferPtr buf1, buf2, buf3; // TODO non-thread safe",
          "new_line_content": "    case IMAGE_RGB:       image_scale2x_tpl<RgbTraits>(dst, src, src_w, src_h); break;",
          "content_same": false
        },
        {
          "line": 158,
          "old_api": null,
          "new_api": "image_scale2x_tpl<GrayscaleTraits>(dst, src, src_w, src_h)",
          "old_text": null,
          "new_text": "image_scale2x_tpl<GrayscaleTraits>(dst, src, src_w, src_h)",
          "old_line_content": "",
          "new_line_content": "    case IMAGE_GRAYSCALE: image_scale2x_tpl<GrayscaleTraits>(dst, src, src_w, src_h); break;",
          "content_same": false
        },
        {
          "line": 170,
          "old_api": null,
          "new_api": "reset",
          "old_text": null,
          "new_text": "buf1.reset(new ImageBuffer(1))",
          "old_line_content": "  int scale = 8;",
          "new_line_content": "  if (!buf1) buf1.reset(new ImageBuffer(1));",
          "content_same": false
        },
        {
          "line": 174,
          "old_api": null,
          "new_api": "MIN",
          "old_text": null,
          "new_text": "MIN(x3, x4)",
          "old_line_content": "",
          "new_line_content": "  int xmin = MIN(x1, MIN(x2, MIN(x3, x4)));",
          "content_same": false
        },
        {
          "line": 176,
          "old_api": null,
          "new_api": "MIN",
          "old_text": null,
          "new_text": "MIN(y3, y4)",
          "old_line_content": "",
          "new_line_content": "  int ymin = MIN(y1, MIN(y2, MIN(y3, y4)));",
          "content_same": false
        },
        {
          "line": 184,
          "old_api": null,
          "new_api": "height",
          "old_text": null,
          "new_text": "spr->height()",
          "old_line_content": "",
          "new_line_content": "  base::UniquePtr<Image> spr_copy(Image::create(spr->pixelFormat(), spr->width()*scale, spr->height()*scale, buf3));",
          "content_same": false
        },
        {
          "line": 189,
          "old_api": null,
          "new_api": "setMaskColor",
          "old_text": null,
          "new_text": "tmp_copy->setMaskColor(maskColor)",
          "old_line_content": "  }",
          "new_line_content": "  tmp_copy->setMaskColor(maskColor);",
          "content_same": false
        },
        {
          "line": 190,
          "old_api": null,
          "new_api": "setMaskColor",
          "old_text": null,
          "new_text": "spr_copy->setMaskColor(maskColor)",
          "old_line_content": "",
          "new_line_content": "  spr_copy->setMaskColor(maskColor);",
          "content_same": false
        },
        {
          "line": 192,
          "old_api": null,
          "new_api": "maskColor",
          "old_text": null,
          "new_text": "bmp->maskColor()",
          "old_line_content": "    bmp_copy, spr_copy,",
          "new_line_content": "  bmp_copy->clear(bmp->maskColor());",
          "content_same": false
        },
        {
          "line": 193,
          "old_api": null,
          "new_api": "clear",
          "old_text": null,
          "new_text": "spr_copy->clear(maskColor)",
          "old_line_content": "    (x1-xmin)*scale, (y1-ymin)*scale, (x2-xmin)*scale, (y2-ymin)*scale,",
          "new_line_content": "  spr_copy->clear(maskColor);",
          "content_same": false
        },
        {
          "line": 194,
          "old_api": null,
          "new_api": "bounds",
          "old_text": null,
          "new_text": "spr->bounds()",
          "old_line_content": "    (x3-xmin)*scale, (y3-ymin)*scale, (x4-xmin)*scale, (y4-ymin)*scale);",
          "new_line_content": "  spr_copy->copy(spr, gfx::Clip(spr->bounds()));",
          "content_same": false
        },
        {
          "line": 198,
          "old_api": null,
          "new_api": "height",
          "old_text": null,
          "new_text": "spr->height()",
          "old_line_content": "}",
          "new_line_content": "    image_scale2x(tmp_copy, spr_copy, spr->width()*(1<<i), spr->height()*(1<<i));",
          "content_same": false
        },
        {
          "line": 199,
          "old_api": null,
          "new_api": "bounds",
          "old_text": null,
          "new_text": "tmp_copy->bounds()",
          "old_line_content": "",
          "new_line_content": "    spr_copy->copy(tmp_copy, gfx::Clip(tmp_copy->bounds()));",
          "content_same": false
        },
        {
          "line": 202,
          "old_api": null,
          "new_api": "doc::algorithm::parallelogram(\n    bmp_copy, spr_copy,\n    (x1-xmin)*scale, (y1-ymin)*scale, (x2-xmin)*scale, (y2-ymin)*scale,\n    (x3-xmin)*scale, (y3-ymin)*scale, (x4-xmin)*scale, (y4-ymin)*scale)",
          "old_text": null,
          "new_text": "doc::algorithm::parallelogram(\n    bmp_copy, spr_copy,\n    (x1-xmin)*scale, (y1-ymin)*scale, (x2-xmin)*scale, (y2-ymin)*scale,\n    (x3-xmin)*scale, (y3-ymin)*scale, (x4-xmin)*scale, (y4-ymin)*scale)",
          "old_line_content": "",
          "new_line_content": "  doc::algorithm::parallelogram(",
          "content_same": false
        },
        {
          "line": 207,
          "old_api": null,
          "new_api": "width",
          "old_text": null,
          "new_text": "doc::algorithm::scale_image(bmp, bmp_copy,\n    xmin, ymin, bmp_copy->width()/scale, bmp_copy->height()/scale)",
          "old_line_content": "",
          "new_line_content": "  doc::algorithm::scale_image(bmp, bmp_copy,",
          "content_same": false
        },
        {
          "line": 208,
          "old_api": null,
          "new_api": "height",
          "old_text": null,
          "new_text": "bmp_copy->height()",
          "old_line_content": "",
          "new_line_content": "    xmin, ymin, bmp_copy->width()/scale, bmp_copy->height()/scale);",
          "content_same": false
        },
        {
          "line": 124,
          "old_api": null,
          "new_api": "gfx::Rect(0, 0, src_w*2, src_h*2)",
          "old_text": null,
          "new_text": "gfx::Rect(0, 0, src_w*2, src_h*2)",
          "old_line_content": "  color_t c[5];",
          "new_line_content": "  LockImageBits<ImageTraits> dstBits(dst, gfx::Rect(0, 0, src_w*2, src_h*2));",
          "content_same": false
        },
        {
          "line": 125,
          "old_api": null,
          "new_api": "begin",
          "old_text": null,
          "new_text": "dstBits.begin()",
          "old_line_content": "  for (int y=0; y<src_h; ++y) {",
          "new_line_content": "  auto dstIt = dstBits.begin();",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 128,
          "old_api": "get_pixel_fast<ImageTraits>(src, x, y-1)",
          "new_api": null,
          "old_text": "get_pixel_fast<ImageTraits>(src, x, y-1)",
          "new_text": null,
          "old_line_content": "      A = (y > 0 ? get_pixel_fast<ImageTraits>(src, x, y-1): P);",
          "new_line_content": "  color_t c[5];",
          "content_same": false
        },
        {
          "line": 129,
          "old_api": "get_pixel_fast<ImageTraits>(src, x+1, y)",
          "new_api": null,
          "old_text": "get_pixel_fast<ImageTraits>(src, x+1, y)",
          "new_text": null,
          "old_line_content": "      B = (x < src_w-1 ? get_pixel_fast<ImageTraits>(src, x+1, y): P);",
          "new_line_content": "  for (int y=0; y<src_h; ++y) {",
          "content_same": false
        },
        {
          "line": 130,
          "old_api": "get_pixel_fast<ImageTraits>(src, x-1, y)",
          "new_api": null,
          "old_text": "get_pixel_fast<ImageTraits>(src, x-1, y)",
          "new_text": null,
          "old_line_content": "      C = (x > 0 ? get_pixel_fast<ImageTraits>(src, x-1, y): P);",
          "new_line_content": "    dstIt2 += src_w*2;",
          "content_same": false
        },
        {
          "line": 131,
          "old_api": "get_pixel_fast<ImageTraits>(src, x, y+1)",
          "new_api": null,
          "old_text": "get_pixel_fast<ImageTraits>(src, x, y+1)",
          "new_text": null,
          "old_line_content": "      D = (y < src_h-1 ? get_pixel_fast<ImageTraits>(src, x, y+1): P);",
          "new_line_content": "    for (int x=0; x<src_w; ++x) {",
          "content_same": false
        },
        {
          "line": 145,
          "old_api": "pixelFormat",
          "new_api": null,
          "old_text": "src->pixelFormat()",
          "new_text": null,
          "old_line_content": "  switch (src->pixelFormat()) {",
          "new_line_content": "      *dstIt2 = (B == D && B != A && D != C ? D: P);",
          "content_same": false
        },
        {
          "line": 146,
          "old_api": "image_scale2x_tpl<RgbTraits>(dst, src, src_w, src_h)",
          "new_api": null,
          "old_text": "image_scale2x_tpl<RgbTraits>(dst, src, src_w, src_h)",
          "new_text": null,
          "old_line_content": "    case IMAGE_RGB:       image_scale2x_tpl<RgbTraits>(dst, src, src_w, src_h); break;",
          "new_line_content": "      ++dstIt2;",
          "content_same": false
        },
        {
          "line": 147,
          "old_api": "image_scale2x_tpl<GrayscaleTraits>(dst, src, src_w, src_h)",
          "new_api": null,
          "old_text": "image_scale2x_tpl<GrayscaleTraits>(dst, src, src_w, src_h)",
          "new_text": null,
          "old_line_content": "    case IMAGE_GRAYSCALE: image_scale2x_tpl<GrayscaleTraits>(dst, src, src_w, src_h); break;",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 148,
          "old_api": "image_scale2x_tpl<IndexedTraits>(dst, src, src_w, src_h)",
          "new_api": null,
          "old_text": "image_scale2x_tpl<IndexedTraits>(dst, src, src_w, src_h)",
          "new_text": null,
          "old_line_content": "    case IMAGE_INDEXED:   image_scale2x_tpl<IndexedTraits>(dst, src, src_w, src_h); break;",
          "new_line_content": "    dstIt += src_w*2;",
          "content_same": false
        },
        {
          "line": 149,
          "old_api": "image_scale2x_tpl<BitmapTraits>(dst, src, src_w, src_h)",
          "new_api": null,
          "old_text": "image_scale2x_tpl<BitmapTraits>(dst, src, src_w, src_h)",
          "new_text": null,
          "old_line_content": "    case IMAGE_BITMAP:    image_scale2x_tpl<BitmapTraits>(dst, src, src_w, src_h); break;",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 161,
          "old_api": "reset",
          "new_api": null,
          "old_text": "buf3.reset(new ImageBuffer(1))",
          "new_text": null,
          "old_line_content": "  if (!buf3) buf3.reset(new ImageBuffer(1));",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 163,
          "old_api": "MIN",
          "new_api": null,
          "old_text": "MIN(x3, x4)",
          "new_text": null,
          "old_line_content": "  int xmin = MIN(x1, MIN(x2, MIN(x3, x4)));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 164,
          "old_api": "MAX",
          "new_api": null,
          "old_text": "MAX(x3, x4)",
          "new_text": null,
          "old_line_content": "  int xmax = MAX(x1, MAX(x2, MAX(x3, x4)));",
          "new_line_content": "void rotsprite_image(Image* bmp, Image* spr,",
          "content_same": false
        },
        {
          "line": 165,
          "old_api": "MIN",
          "new_api": null,
          "old_text": "MIN(y3, y4)",
          "new_text": null,
          "old_line_content": "  int ymin = MIN(y1, MIN(y2, MIN(y3, y4)));",
          "new_line_content": "  int x1, int y1, int x2, int y2,",
          "content_same": false
        },
        {
          "line": 166,
          "old_api": "MAX",
          "new_api": null,
          "old_text": "MAX(y3, y4)",
          "new_text": null,
          "old_line_content": "  int ymax = MAX(y1, MAX(y2, MAX(y3, y4)));",
          "new_line_content": "  int x3, int y3, int x4, int y4)",
          "content_same": false
        },
        {
          "line": 173,
          "old_api": "height",
          "new_api": null,
          "old_text": "spr->height()",
          "new_text": null,
          "old_line_content": "  base::UniquePtr<Image> spr_copy(Image::create(spr->pixelFormat(), spr->width()*scale, spr->height()*scale, buf3));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 178,
          "old_api": "setMaskColor",
          "new_api": null,
          "old_text": "tmp_copy->setMaskColor(maskColor)",
          "new_text": null,
          "old_line_content": "  tmp_copy->setMaskColor(maskColor);",
          "new_line_content": "  int rot_width = xmax - xmin + 1;",
          "content_same": false
        },
        {
          "line": 179,
          "old_api": "setMaskColor",
          "new_api": null,
          "old_text": "spr_copy->setMaskColor(maskColor)",
          "new_text": null,
          "old_line_content": "  spr_copy->setMaskColor(maskColor);",
          "new_line_content": "  int rot_height = ymax - ymin + 1;",
          "content_same": false
        },
        {
          "line": 181,
          "old_api": "maskColor",
          "new_api": null,
          "old_text": "bmp->maskColor()",
          "new_text": null,
          "old_line_content": "  bmp_copy->clear(bmp->maskColor());",
          "new_line_content": "  int scale = 8;",
          "content_same": false
        },
        {
          "line": 187,
          "old_api": "height",
          "new_api": null,
          "old_text": "spr->height()",
          "new_text": null,
          "old_line_content": "    image_scale2x(tmp_copy, spr_copy, spr->width()*(1<<i), spr->height()*(1<<i));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 191,
          "old_api": "doc::algorithm::parallelogram(\n    bmp_copy, spr_copy,\n    (x1-xmin)*scale, (y1-ymin)*scale, (x2-xmin)*scale, (y2-ymin)*scale,\n    (x3-xmin)*scale, (y3-ymin)*scale, (x4-xmin)*scale, (y4-ymin)*scale)",
          "new_api": null,
          "old_text": "doc::algorithm::parallelogram(\n    bmp_copy, spr_copy,\n    (x1-xmin)*scale, (y1-ymin)*scale, (x2-xmin)*scale, (y2-ymin)*scale,\n    (x3-xmin)*scale, (y3-ymin)*scale, (x4-xmin)*scale, (y4-ymin)*scale)",
          "new_text": null,
          "old_line_content": "  doc::algorithm::parallelogram(",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 196,
          "old_api": "width",
          "new_api": null,
          "old_text": "doc::algorithm::scale_image(bmp, bmp_copy,\n    xmin, ymin, bmp_copy->width()/scale, bmp_copy->height()/scale)",
          "new_text": null,
          "old_line_content": "  doc::algorithm::scale_image(bmp, bmp_copy,",
          "new_line_content": "  for (int i=0; i<3; ++i) {",
          "content_same": false
        },
        {
          "line": 127,
          "old_api": "get_pixel_fast<ImageTraits>(src, x, y)",
          "new_api": null,
          "old_text": "get_pixel_fast<ImageTraits>(src, x, y)",
          "new_text": null,
          "old_line_content": "      P = get_pixel_fast<ImageTraits>(src, x, y);",
          "new_line_content": "",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 15,
      "total_additions": 20,
      "total_deletions": 22,
      "total_api_changes": 57
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 19,
        "api_related_lines": 57,
        "non_api_lines": 8,
        "non_api_line_numbers": [
          138,
          139,
          140,
          141,
          142,
          143,
          144,
          126
        ]
      }
    },
    "api_calls_before": 78,
    "api_calls_after": 76,
    "diff_info": {
      "added_lines": 15,
      "removed_lines": 4,
      "total_diff_lines": 41
    }
  }
}
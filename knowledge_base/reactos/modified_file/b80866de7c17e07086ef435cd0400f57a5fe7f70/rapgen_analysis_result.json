{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/reactos/modified_file/b80866de7c17e07086ef435cd0400f57a5fe7f70",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/reactos/modified_file/b80866de7c17e07086ef435cd0400f57a5fe7f70/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/reactos/modified_file/b80866de7c17e07086ef435cd0400f57a5fe7f70/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/reactos/modified_file/b80866de7c17e07086ef435cd0400f57a5fe7f70/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 333,
          "old_api": "DIB_GetSource",
          "new_api": "DIB_DoRop",
          "old_text": "DIB_GetSource(BltInfo->SourceSurface, SourceX + (DestX - BltInfo->DestRect.left), SourceY, BltInfo->XlateSourceToDest)",
          "new_text": "DIB_DoRop(BltInfo->Rop4, Dest, Source, Pattern)",
          "old_line_content": "               Source = DIB_GetSource(BltInfo->SourceSurface, SourceX + (DestX - BltInfo->DestRect.left), SourceY, BltInfo->XlateSourceToDest);",
          "new_line_content": "            DIB_8BPP_PutPixel(BltInfo->DestSurface, DestX, DestY, DIB_DoRop(BltInfo->Rop4, Dest, Source, Pattern) & 0xFFFF);",
          "content_same": false
        },
        {
          "line": 501,
          "old_api": "average8",
          "new_api": "ExFreePool",
          "old_text": "average8(ScanLine[x], ScanLineAhead[x])",
          "new_text": "ExFreePool(ScanLine)",
          "old_line_content": "        ScanLine[x] = average8(ScanLine[x], ScanLineAhead[x]);",
          "new_line_content": "        ExFreePool(ScanLine);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 132,
          "old_api": null,
          "new_api": "RtlMoveMemory",
          "old_text": null,
          "new_text": "RtlMoveMemory(DestBits, SourceBits, BltInfo->DestRect.right - BltInfo->DestRect.left)",
          "old_line_content": "\t      }",
          "new_line_content": "\t\tRtlMoveMemory(DestBits, SourceBits, BltInfo->DestRect.right - BltInfo->DestRect.left);",
          "content_same": false
        },
        {
          "line": 516,
          "old_api": null,
          "new_api": "ScaleLineAvg8",
          "old_text": null,
          "new_text": "ScaleLineAvg8(ScanLine, Source, SourceRect->right - SourceRect->left, DestRect->right - DestRect->left)",
          "old_line_content": "    E += FractPart;",
          "new_line_content": "    ScaleLineAvg8(ScanLine, Source, SourceRect->right - SourceRect->left, DestRect->right - DestRect->left);",
          "content_same": false
        },
        {
          "line": 518,
          "old_api": null,
          "new_api": "FinalCopy8",
          "old_text": null,
          "new_text": "FinalCopy8(Target, ScanLine, ClipSpans, ClipSpansCount, &SpanIndex, DestY, DestRect)",
          "old_line_content": "      E -= DestRect->bottom - DestRect->top;",
          "new_line_content": "    if (! FinalCopy8(Target, ScanLine, ClipSpans, ClipSpansCount, &SpanIndex, DestY, DestRect))",
          "content_same": false
        },
        {
          "line": 263,
          "old_api": null,
          "new_api": "ROP_USES_SOURCE",
          "old_text": null,
          "new_text": "ROP_USES_SOURCE(BltInfo->Rop4)",
          "old_line_content": "   ULONG SourceX, SourceY;",
          "new_line_content": "   UsesSource = ROP_USES_SOURCE(BltInfo->Rop4);",
          "content_same": false
        },
        {
          "line": 264,
          "old_api": null,
          "new_api": "ROP_USES_PATTERN",
          "old_text": null,
          "new_text": "ROP_USES_PATTERN(BltInfo->Rop4)",
          "old_line_content": "   ULONG PatternY = 0;",
          "new_line_content": "   UsesPattern = ROP_USES_PATTERN(BltInfo->Rop4);",
          "content_same": false
        },
        {
          "line": 521,
          "old_api": null,
          "new_api": "ExFreePool",
          "old_text": null,
          "new_text": "ExFreePool(ClipSpans)",
          "old_line_content": "  } /* while */",
          "new_line_content": "        ExFreePool(ClipSpans);",
          "content_same": false
        },
        {
          "line": 522,
          "old_api": null,
          "new_api": "ExFreePool",
          "old_text": null,
          "new_text": "ExFreePool(ScanLine)",
          "old_line_content": "",
          "new_line_content": "        ExFreePool(ScanLine);",
          "content_same": false
        },
        {
          "line": 523,
          "old_api": null,
          "new_api": "ExFreePool",
          "old_text": null,
          "new_text": "ExFreePool(ScanLineAhead)",
          "old_line_content": "  if (skip > 0 && Source != PrevSource)",
          "new_line_content": "        ExFreePool(ScanLineAhead);",
          "content_same": false
        },
        {
          "line": 532,
          "old_api": null,
          "new_api": "ExFreePool",
          "old_text": null,
          "new_text": "ExFreePool(ScanLineAhead)",
          "old_line_content": "        return TRUE;",
          "new_line_content": "  ExFreePool(ScanLineAhead);",
          "content_same": false
        },
        {
          "line": 150,
          "old_api": null,
          "new_api": "XLATEOBJ_iXlate",
          "old_text": null,
          "new_text": "XLATEOBJ_iXlate(BltInfo->XlateSourceToDest, *SourceBits++)",
          "old_line_content": "\t    SourceLine = BltInfo->SourceSurface->pvScan0 + (BltInfo->SourcePoint.y * BltInfo->SourceSurface->lDelta) + BltInfo->SourcePoint.x;",
          "new_line_content": "\t\t    *DestBits++ = XLATEOBJ_iXlate(BltInfo->XlateSourceToDest, *SourceBits++);",
          "content_same": false
        },
        {
          "line": 543,
          "old_api": null,
          "new_api": "DPRINT",
          "old_text": null,
          "new_text": "DPRINT(\"DIB_8BPP_StretchBlt: Source BPP: %u, srcRect: (%d,%d)-(%d,%d), dstRect: (%d,%d)-(%d,%d)\\n\",\n     BitsPerFormat(SourceSurf->iBitmapFormat), SourceRect->left, SourceRect->top, SourceRect->right, SourceRect->bottom,\n     DestRect->left, DestRect->top, DestRect->right, DestRect->bottom)",
          "old_line_content": "}",
          "new_line_content": "  DPRINT(\"DIB_8BPP_StretchBlt: Source BPP: %u, srcRect: (%d,%d)-(%d,%d), dstRect: (%d,%d)-(%d,%d)\\n\",",
          "content_same": false
        },
        {
          "line": 416,
          "old_api": null,
          "new_api": "max",
          "old_text": null,
          "new_text": "max(ClipSpans[*SpanIndex].X, DestRect->left)",
          "old_line_content": "          /* No more spans, everything else is clipped away, we're done */",
          "new_line_content": "          Left = max(ClipSpans[*SpanIndex].X, DestRect->left);",
          "content_same": false
        },
        {
          "line": 289,
          "old_api": null,
          "new_api": "PULONG)(\n         BltInfo->DestSurface->pvScan0 +\n         BltInfo->DestRect.left +\n         DestY * BltInfo->DestSurface->lDelta)",
          "old_text": null,
          "new_text": "PULONG)(\n         BltInfo->DestSurface->pvScan0 +\n         BltInfo->DestRect.left +\n         DestY * BltInfo->DestSurface->lDelta)",
          "old_line_content": "                   (BltInfo->Brush->iSolidColor << 16) |",
          "new_line_content": "      DestBits = (PULONG)(",
          "content_same": false
        },
        {
          "line": 417,
          "old_api": null,
          "new_api": "min",
          "old_text": null,
          "new_text": "min(ClipSpans[*SpanIndex].X + ClipSpans[*SpanIndex].Width, DestRect->right)",
          "old_line_content": "          return FALSE;",
          "new_line_content": "          Right = min(ClipSpans[*SpanIndex].X + ClipSpans[*SpanIndex].Width, DestRect->right);",
          "content_same": false
        },
        {
          "line": 418,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(Target + Left - DestRect->left, Source + Left - DestRect->left,\n                 (Right - Left) * sizeof(PIXEL))",
          "old_line_content": "        }",
          "new_line_content": "          memcpy(Target + Left - DestRect->left, Source + Left - DestRect->left,",
          "content_same": false
        },
        {
          "line": 544,
          "old_api": null,
          "new_api": "BitsPerFormat",
          "old_text": null,
          "new_text": "BitsPerFormat(SourceSurf->iBitmapFormat)",
          "old_line_content": "",
          "new_line_content": "     BitsPerFormat(SourceSurf->iBitmapFormat), SourceRect->left, SourceRect->top, SourceRect->right, SourceRect->bottom,",
          "content_same": false
        },
        {
          "line": 166,
          "old_api": null,
          "new_api": "XLATEOBJ_iXlate",
          "old_text": null,
          "new_text": "XLATEOBJ_iXlate(BltInfo->XlateSourceToDest, *SourceBits++)",
          "old_line_content": "\t    SourceLine = BltInfo->SourceSurface->pvScan0 + ((BltInfo->SourcePoint.y + BltInfo->DestRect.bottom - BltInfo->DestRect.top - 1) * BltInfo->SourceSurface->lDelta) + BltInfo->SourcePoint.x;",
          "new_line_content": "\t\t    *DestBits++ = XLATEOBJ_iXlate(BltInfo->XlateSourceToDest, *SourceBits++);",
          "content_same": false
        },
        {
          "line": 41,
          "old_api": null,
          "new_api": "memset",
          "old_text": null,
          "new_text": "memset(SurfObj->pvScan0 + y * SurfObj->lDelta + x1, (BYTE) c, x2 - x1)",
          "old_line_content": "  PBYTE byteaddr = SurfObj->pvScan0 + y * SurfObj->lDelta;",
          "new_line_content": "  memset(SurfObj->pvScan0 + y * SurfObj->lDelta + x1, (BYTE) c, x2 - x1);",
          "content_same": false
        },
        {
          "line": 300,
          "old_api": null,
          "new_api": "DIB_GetSource",
          "old_text": null,
          "new_text": "DIB_GetSource(BltInfo->SourceSurface, SourceX + (DestX - BltInfo->DestRect.left), SourceY, BltInfo->XlateSourceToDest)",
          "old_line_content": "         DestY * BltInfo->DestSurface->lDelta);",
          "new_line_content": "            Source = DIB_GetSource(BltInfo->SourceSurface, SourceX + (DestX - BltInfo->DestRect.left), SourceY, BltInfo->XlateSourceToDest);",
          "content_same": false
        },
        {
          "line": 301,
          "old_api": null,
          "new_api": "DIB_GetSource",
          "old_text": null,
          "new_text": "DIB_GetSource(BltInfo->SourceSurface, SourceX + (DestX - BltInfo->DestRect.left) + 1, SourceY, BltInfo->XlateSourceToDest)",
          "old_line_content": "",
          "new_line_content": "            Source |= DIB_GetSource(BltInfo->SourceSurface, SourceX + (DestX - BltInfo->DestRect.left) + 1, SourceY, BltInfo->XlateSourceToDest) << 8;",
          "content_same": false
        },
        {
          "line": 302,
          "old_api": null,
          "new_api": "DIB_GetSource",
          "old_text": null,
          "new_text": "DIB_GetSource(BltInfo->SourceSurface, SourceX + (DestX - BltInfo->DestRect.left) + 2, SourceY, BltInfo->XlateSourceToDest)",
          "old_line_content": "      for (DestX = BltInfo->DestRect.left; DestX < RoundedRight; DestX += 4, DestBits++)",
          "new_line_content": "            Source |= DIB_GetSource(BltInfo->SourceSurface, SourceX + (DestX - BltInfo->DestRect.left) + 2, SourceY, BltInfo->XlateSourceToDest) << 16;",
          "content_same": false
        },
        {
          "line": 303,
          "old_api": null,
          "new_api": "DIB_GetSource",
          "old_text": null,
          "new_text": "DIB_GetSource(BltInfo->SourceSurface, SourceX + (DestX - BltInfo->DestRect.left) + 3, SourceY, BltInfo->XlateSourceToDest)",
          "old_line_content": "      {",
          "new_line_content": "            Source |= DIB_GetSource(BltInfo->SourceSurface, SourceX + (DestX - BltInfo->DestRect.left) + 3, SourceY, BltInfo->XlateSourceToDest) << 24;",
          "content_same": false
        },
        {
          "line": 559,
          "old_api": null,
          "new_api": "ScaleRectAvg8",
          "old_text": null,
          "new_text": "ScaleRectAvg8(DestSurf, SourceSurf, DestRect, SourceRect, MaskOrigin, BrushOrigin,\n                             ClipRegion, ColorTranslation, Mode)",
          "old_line_content": "      case BMF_16BPP:",
          "new_line_content": "        return ScaleRectAvg8(DestSurf, SourceSurf, DestRect, SourceRect, MaskOrigin, BrushOrigin,",
          "content_same": false
        },
        {
          "line": 564,
          "old_api": null,
          "new_api": "BitsPerFormat",
          "old_text": null,
          "new_text": "BitsPerFormat(SourceSurf->iBitmapFormat)",
          "old_line_content": "      break;",
          "new_line_content": "         DPRINT1(\"DIB_8BPP_StretchBlt: Unhandled Source BPP: %u\\n\", BitsPerFormat(SourceSurf->iBitmapFormat));",
          "content_same": false
        },
        {
          "line": 314,
          "old_api": null,
          "new_api": "DIB_DoRop",
          "old_text": null,
          "new_text": "DIB_DoRop(BltInfo->Rop4, Dest, Source, Pattern)",
          "old_line_content": "         if (BltInfo->PatternSurface)",
          "new_line_content": "         *DestBits = DIB_DoRop(BltInfo->Rop4, Dest, Source, Pattern);\t    ",
          "content_same": false
        },
        {
          "line": 187,
          "old_api": null,
          "new_api": "XLATEOBJ_iXlate",
          "old_text": null,
          "new_text": "XLATEOBJ_iXlate(BltInfo->XlateSourceToDest, xColor)",
          "old_line_content": "      for (j = BltInfo->DestRect.top; j < BltInfo->DestRect.bottom; j++)",
          "new_line_content": "          *DestBits = XLATEOBJ_iXlate(BltInfo->XlateSourceToDest, xColor);",
          "content_same": false
        },
        {
          "line": 321,
          "old_api": null,
          "new_api": "DIB_8BPP_GetPixel",
          "old_text": null,
          "new_text": "DIB_8BPP_GetPixel(BltInfo->DestSurface, DestX, DestY)",
          "old_line_content": "",
          "new_line_content": "            Dest = DIB_8BPP_GetPixel(BltInfo->DestSurface, DestX, DestY);",
          "content_same": false
        },
        {
          "line": 325,
          "old_api": null,
          "new_api": "DIB_GetSource",
          "old_text": null,
          "new_text": "DIB_GetSource(BltInfo->SourceSurface, SourceX + (DestX - BltInfo->DestRect.left), SourceY, BltInfo->XlateSourceToDest)",
          "old_line_content": "      if (DestX < BltInfo->DestRect.right)",
          "new_line_content": "               Source = DIB_GetSource(BltInfo->SourceSurface, SourceX + (DestX - BltInfo->DestRect.left), SourceY, BltInfo->XlateSourceToDest);",
          "content_same": false
        },
        {
          "line": 455,
          "old_api": null,
          "new_api": "ClipobjToSpans",
          "old_text": null,
          "new_text": "ClipobjToSpans(&ClipSpans, &ClipSpansCount, ClipRegion, DestRect)",
          "old_line_content": "  PIXEL *PrevSourceAhead = NULL;",
          "new_line_content": "  if (! ClipobjToSpans(&ClipSpans, &ClipSpansCount, ClipRegion, DestRect))",
          "content_same": false
        },
        {
          "line": 330,
          "old_api": null,
          "new_api": "DIB_GetSource",
          "old_text": null,
          "new_text": "DIB_GetSource(BltInfo->PatternSurface, (DestX + BltInfo->BrushOrigin.x) % BltInfo->PatternSurface->sizlBitmap.cx, PatternY, BltInfo->XlatePatternToDest)",
          "old_line_content": "            ",
          "new_line_content": "               Pattern = DIB_GetSource(BltInfo->PatternSurface, (DestX + BltInfo->BrushOrigin.x) % BltInfo->PatternSurface->sizlBitmap.cx, PatternY, BltInfo->XlatePatternToDest);",
          "content_same": false
        },
        {
          "line": 462,
          "old_api": null,
          "new_api": "ASSERT",
          "old_text": null,
          "new_text": "ASSERT(NULL == ClipSpans)",
          "old_line_content": "",
          "new_line_content": "      ASSERT(NULL == ClipSpans);",
          "content_same": false
        },
        {
          "line": 79,
          "old_api": null,
          "new_api": "DIB_1BPP_GetPixel",
          "old_text": null,
          "new_text": "DIB_1BPP_GetPixel(BltInfo->SourceSurface, sx, sy)",
          "old_line_content": "      sx = BltInfo->SourcePoint.x;",
          "new_line_content": "          if(DIB_1BPP_GetPixel(BltInfo->SourceSurface, sx, sy) == 0)",
          "content_same": false
        },
        {
          "line": 81,
          "old_api": null,
          "new_api": "XLATEOBJ_iXlate",
          "old_text": null,
          "new_text": "XLATEOBJ_iXlate(BltInfo->XlateSourceToDest, 0)",
          "old_line_content": "",
          "new_line_content": "            DIB_8BPP_PutPixel(BltInfo->DestSurface, i, j, XLATEOBJ_iXlate(BltInfo->XlateSourceToDest, 0));",
          "content_same": false
        },
        {
          "line": 594,
          "old_api": null,
          "new_api": "DIB_GetSourceIndex",
          "old_text": null,
          "new_text": "DIB_GetSourceIndex(SourceSurf, SourceX++, SourceY)",
          "old_line_content": "  {",
          "new_line_content": "      Source = DIB_GetSourceIndex(SourceSurf, SourceX++, SourceY);",
          "content_same": false
        },
        {
          "line": 83,
          "old_api": null,
          "new_api": "XLATEOBJ_iXlate",
          "old_text": null,
          "new_text": "XLATEOBJ_iXlate(BltInfo->XlateSourceToDest, 1)",
          "old_line_content": "      {",
          "new_line_content": "            DIB_8BPP_PutPixel(BltInfo->DestSurface, i, j, XLATEOBJ_iXlate(BltInfo->XlateSourceToDest, 1));",
          "content_same": false
        },
        {
          "line": 211,
          "old_api": null,
          "new_api": "XLATEOBJ_iXlate",
          "old_text": null,
          "new_text": "XLATEOBJ_iXlate(BltInfo->XlateSourceToDest, xColor)",
          "old_line_content": "        SourceBits = SourceLine;",
          "new_line_content": "          *DestBits = XLATEOBJ_iXlate(BltInfo->XlateSourceToDest, xColor);",
          "content_same": false
        },
        {
          "line": 468,
          "old_api": null,
          "new_api": "ExAllocatePool",
          "old_text": null,
          "new_text": "ExAllocatePool(PagedPool, (DestRect->right - DestRect->left) * sizeof(PIXEL))",
          "old_line_content": "    {",
          "new_line_content": "  ScanLine = (PIXEL*)ExAllocatePool(PagedPool, (DestRect->right - DestRect->left) * sizeof(PIXEL));",
          "content_same": false
        },
        {
          "line": 469,
          "old_api": null,
          "new_api": "ExAllocatePool",
          "old_text": null,
          "new_text": "ExAllocatePool(PagedPool, (DestRect->right - DestRect->left) * sizeof(PIXEL))",
          "old_line_content": "      /* No clip spans == empty clipping region, everything clipped away */",
          "new_line_content": "  ScanLineAhead = (PIXEL *)ExAllocatePool(PagedPool, (DestRect->right - DestRect->left) * sizeof(PIXEL));",
          "content_same": false
        },
        {
          "line": 598,
          "old_api": null,
          "new_api": "XLATEOBJ_iXlate",
          "old_text": null,
          "new_text": "XLATEOBJ_iXlate(ColorTranslation, Source)",
          "old_line_content": "    for (X = DestRect->left; X < RoundedRight; X += 4, DestBits++)",
          "new_line_content": "        Dest |= (XLATEOBJ_iXlate(ColorTranslation, Source) & 0xFF);",
          "content_same": false
        },
        {
          "line": 601,
          "old_api": null,
          "new_api": "DIB_GetSourceIndex",
          "old_text": null,
          "new_text": "DIB_GetSourceIndex(SourceSurf, SourceX++, SourceY)",
          "old_line_content": "      ",
          "new_line_content": "      Source = DIB_GetSourceIndex(SourceSurf, SourceX++, SourceY);",
          "content_same": false
        },
        {
          "line": 605,
          "old_api": null,
          "new_api": "XLATEOBJ_iXlate",
          "old_text": null,
          "new_text": "XLATEOBJ_iXlate(ColorTranslation, Source)",
          "old_line_content": "        Dest &= 0xFFFFFF00;",
          "new_line_content": "        Dest |= ((XLATEOBJ_iXlate(ColorTranslation, Source) << 8) & 0xFF00);",
          "content_same": false
        },
        {
          "line": 608,
          "old_api": null,
          "new_api": "DIB_GetSourceIndex",
          "old_text": null,
          "new_text": "DIB_GetSourceIndex(SourceSurf, SourceX++, SourceY)",
          "old_line_content": "",
          "new_line_content": "      Source = DIB_GetSourceIndex(SourceSurf, SourceX++, SourceY);",
          "content_same": false
        },
        {
          "line": 484,
          "old_api": null,
          "new_api": "ScaleLineAvg8",
          "old_text": null,
          "new_text": "ScaleLineAvg8(ScanLine, Source, SourceRect->right - SourceRect->left, DestRect->right - DestRect->left)",
          "old_line_content": "        /* the next scan line has already been scaled and stored in",
          "new_line_content": "        ScaleLineAvg8(ScanLine, Source, SourceRect->right - SourceRect->left, DestRect->right - DestRect->left);",
          "content_same": false
        },
        {
          "line": 612,
          "old_api": null,
          "new_api": "XLATEOBJ_iXlate",
          "old_text": null,
          "new_text": "XLATEOBJ_iXlate(ColorTranslation, Source)",
          "old_line_content": "        Dest &= 0xFFFF00FF;",
          "new_line_content": "        Dest |= ((XLATEOBJ_iXlate(ColorTranslation, Source) << 16) & 0xFF0000);",
          "content_same": false
        },
        {
          "line": 102,
          "old_api": null,
          "new_api": "XLATEOBJ_iXlate",
          "old_text": null,
          "new_text": "XLATEOBJ_iXlate(BltInfo->XlateSourceToDest,\n              (*SourceLine_4BPP & altnotmask[f1]) >> (4 * (1 - f1)))",
          "old_line_content": "      for (j=BltInfo->DestRect.top; j<BltInfo->DestRect.bottom; j++)",
          "new_line_content": "          xColor = XLATEOBJ_iXlate(BltInfo->XlateSourceToDest,",
          "content_same": false
        },
        {
          "line": 615,
          "old_api": null,
          "new_api": "DIB_GetSourceIndex",
          "old_text": null,
          "new_text": "DIB_GetSourceIndex(SourceSurf, SourceX++, SourceY)",
          "old_line_content": "      ",
          "new_line_content": "      Source = DIB_GetSourceIndex(SourceSurf, SourceX++, SourceY);",
          "content_same": false
        },
        {
          "line": 104,
          "old_api": null,
          "new_api": "DIB_8BPP_PutPixel",
          "old_text": null,
          "new_text": "DIB_8BPP_PutPixel(BltInfo->DestSurface, i, j, xColor)",
          "old_line_content": "        SourceLine_4BPP = SourceBits_4BPP;",
          "new_line_content": "          DIB_8BPP_PutPixel(BltInfo->DestSurface, i, j, xColor);",
          "content_same": false
        },
        {
          "line": 233,
          "old_api": null,
          "new_api": "XLATEOBJ_iXlate",
          "old_text": null,
          "new_text": "XLATEOBJ_iXlate(BltInfo->XlateSourceToDest, xColor)",
          "old_line_content": "      for (j = BltInfo->DestRect.top; j < BltInfo->DestRect.bottom; j++)",
          "new_line_content": "          *DestBits = XLATEOBJ_iXlate(BltInfo->XlateSourceToDest, xColor);",
          "content_same": false
        },
        {
          "line": 491,
          "old_api": null,
          "new_api": "ScaleLineAvg8",
          "old_text": null,
          "new_text": "ScaleLineAvg8(ScanLineAhead, (PIXEL *)((BYTE *)Source + SourceSurf->lDelta), SourceRect->right - SourceRect->left, DestRect->right - DestRect->left)",
          "old_line_content": "      } else {",
          "new_line_content": "      ScaleLineAvg8(ScanLineAhead, (PIXEL *)((BYTE *)Source + SourceSurf->lDelta), SourceRect->right - SourceRect->left, DestRect->right - DestRect->left);",
          "content_same": false
        },
        {
          "line": 619,
          "old_api": null,
          "new_api": "XLATEOBJ_iXlate",
          "old_text": null,
          "new_text": "XLATEOBJ_iXlate(ColorTranslation, Source)",
          "old_line_content": "        Dest &= 0xFF00FFFF;",
          "new_line_content": "        Dest |= ((XLATEOBJ_iXlate(ColorTranslation, Source) << 24) & 0xFF000000);",
          "content_same": false
        },
        {
          "line": 493,
          "old_api": null,
          "new_api": "average8",
          "old_text": null,
          "new_text": "average8(ScanLine[x], ScanLineAhead[x])",
          "old_line_content": "      } /* if */",
          "new_line_content": "        ScanLine[x] = average8(ScanLine[x], ScanLineAhead[x]);",
          "content_same": false
        },
        {
          "line": 497,
          "old_api": null,
          "new_api": "FinalCopy8",
          "old_text": null,
          "new_text": "FinalCopy8(Target, ScanLine, ClipSpans, ClipSpansCount, &SpanIndex, DestY, DestRect)",
          "old_line_content": "    if (E >= Mid && PrevSourceAhead != (PIXEL *)((BYTE *)Source + SourceSurf->lDelta)) {",
          "new_line_content": "    if (! FinalCopy8(Target, ScanLine, ClipSpans, ClipSpansCount, &SpanIndex, DestY, DestRect))",
          "content_same": false
        },
        {
          "line": 244,
          "old_api": null,
          "new_api": "BitsPerFormat",
          "old_text": null,
          "new_text": "BitsPerFormat(BltInfo->SourceSurface->iBitmapFormat)",
          "old_line_content": "        }",
          "new_line_content": "      DPRINT1(\"DIB_8BPP_Bitblt: Unhandled Source BPP: %u\\n\", BitsPerFormat(BltInfo->SourceSurface->iBitmapFormat));",
          "content_same": false
        },
        {
          "line": 500,
          "old_api": null,
          "new_api": "ExFreePool",
          "old_text": null,
          "new_text": "ExFreePool(ClipSpans)",
          "old_line_content": "      for (x = 0; x < DestRect->right - DestRect->left; x++)",
          "new_line_content": "        ExFreePool(ClipSpans);",
          "content_same": false
        },
        {
          "line": 502,
          "old_api": null,
          "new_api": "ExFreePool",
          "old_text": null,
          "new_text": "ExFreePool(ScanLineAhead)",
          "old_line_content": "      PrevSourceAhead = (PIXEL *)((BYTE *)Source + SourceSurf->lDelta);",
          "new_line_content": "        ExFreePool(ScanLineAhead);",
          "content_same": false
        },
        {
          "line": 629,
          "old_api": null,
          "new_api": "DIB_GetSourceIndex",
          "old_text": null,
          "new_text": "DIB_GetSourceIndex(SourceSurf, SourceX++, SourceY)",
          "old_line_content": "",
          "new_line_content": "        Source = DIB_GetSourceIndex(SourceSurf, SourceX++, SourceY);",
          "content_same": false
        },
        {
          "line": 632,
          "old_api": null,
          "new_api": "XLATEOBJ_iXlate",
          "old_text": null,
          "new_text": "XLATEOBJ_iXlate(ColorTranslation, Source)",
          "old_line_content": "    ",
          "new_line_content": "          *((BYTE*)DestBits) = (BYTE)(XLATEOBJ_iXlate(ColorTranslation, Source) & 0xFF);",
          "content_same": false
        },
        {
          "line": 121,
          "old_api": null,
          "new_api": "RtlMoveMemory",
          "old_text": null,
          "new_text": "RtlMoveMemory(DestBits, SourceBits, BltInfo->DestRect.right - BltInfo->DestRect.left)",
          "old_line_content": "    case BMF_8BPP:",
          "new_line_content": "\t\tRtlMoveMemory(DestBits, SourceBits, BltInfo->DestRect.right - BltInfo->DestRect.left);",
          "content_same": false
        },
        {
          "line": 634,
          "old_api": null,
          "new_api": "PULONG)((ULONG_PTR)DestBits + 1)",
          "old_text": null,
          "new_text": "PULONG)((ULONG_PTR)DestBits + 1)",
          "old_line_content": "    {",
          "new_line_content": "        DestBits = (PULONG)((ULONG_PTR)DestBits + 1);",
          "content_same": false
        },
        {
          "line": 382,
          "old_api": null,
          "new_api": "average8",
          "old_text": null,
          "new_text": "average8(p, *(Source+1))",
          "old_line_content": "  PIXEL p;",
          "new_line_content": "      p = average8(p, *(Source+1));",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 640,
          "old_api": "XLATEOBJ_iXlate",
          "new_api": null,
          "old_text": "XLATEOBJ_iXlate(ColorTranslation, Source)",
          "new_text": null,
          "old_line_content": "          *((BYTE*)DestBits) = (BYTE)(XLATEOBJ_iXlate(ColorTranslation, Source) & 0xFF);",
          "new_line_content": "  return TRUE;",
          "content_same": false
        },
        {
          "line": 129,
          "old_api": "RtlMoveMemory",
          "new_api": null,
          "old_text": "RtlMoveMemory(DestBits, SourceBits, BltInfo->DestRect.right - BltInfo->DestRect.left)",
          "new_text": null,
          "old_line_content": "\t\tRtlMoveMemory(DestBits, SourceBits, BltInfo->DestRect.right - BltInfo->DestRect.left);",
          "new_line_content": "\t    DestBits = BltInfo->DestSurface->pvScan0 + ((BltInfo->DestRect.bottom - 1) * BltInfo->DestSurface->lDelta) + BltInfo->DestRect.left;",
          "content_same": false
        },
        {
          "line": 642,
          "old_api": "PULONG)((ULONG_PTR)DestBits + 1)",
          "new_api": null,
          "old_text": "PULONG)((ULONG_PTR)DestBits + 1)",
          "new_text": null,
          "old_line_content": "        DestBits = (PULONG)((ULONG_PTR)DestBits + 1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 509,
          "old_api": "ExFreePool",
          "new_api": null,
          "old_text": "ExFreePool(ScanLine)",
          "new_text": null,
          "old_line_content": "        ExFreePool(ScanLine);",
          "new_line_content": "    if (E >= DestRect->bottom - DestRect->top) {",
          "content_same": false
        },
        {
          "line": 390,
          "old_api": "average8",
          "new_api": null,
          "old_text": "average8(p, *(Source+1))",
          "new_text": null,
          "old_line_content": "      p = average8(p, *(Source+1));",
          "new_line_content": "  } /* while */",
          "content_same": false
        },
        {
          "line": 140,
          "old_api": "RtlMoveMemory",
          "new_api": null,
          "old_text": "RtlMoveMemory(DestBits, SourceBits, BltInfo->DestRect.right - BltInfo->DestRect.left)",
          "new_text": null,
          "old_line_content": "\t\tRtlMoveMemory(DestBits, SourceBits, BltInfo->DestRect.right - BltInfo->DestRect.left);",
          "new_line_content": "\tif (BltInfo->DestRect.top < BltInfo->SourcePoint.y)",
          "content_same": false
        },
        {
          "line": 524,
          "old_api": "ScaleLineAvg8",
          "new_api": null,
          "old_text": "ScaleLineAvg8(ScanLine, Source, SourceRect->right - SourceRect->left, DestRect->right - DestRect->left)",
          "new_text": null,
          "old_line_content": "    ScaleLineAvg8(ScanLine, Source, SourceRect->right - SourceRect->left, DestRect->right - DestRect->left);",
          "new_line_content": "        return TRUE;",
          "content_same": false
        },
        {
          "line": 526,
          "old_api": "FinalCopy8",
          "new_api": null,
          "old_text": "FinalCopy8(Target, ScanLine, ClipSpans, ClipSpansCount, &SpanIndex, DestY, DestRect)",
          "new_text": null,
          "old_line_content": "    if (! FinalCopy8(Target, ScanLine, ClipSpans, ClipSpansCount, &SpanIndex, DestY, DestRect))",
          "new_line_content": "    DestY++;",
          "content_same": false
        },
        {
          "line": 271,
          "old_api": "ROP_USES_SOURCE",
          "new_api": null,
          "old_text": "ROP_USES_SOURCE(BltInfo->Rop4)",
          "new_text": null,
          "old_line_content": "   UsesSource = ROP_USES_SOURCE(BltInfo->Rop4);",
          "new_line_content": "   {",
          "content_same": false
        },
        {
          "line": 272,
          "old_api": "ROP_USES_PATTERN",
          "new_api": null,
          "old_text": "ROP_USES_PATTERN(BltInfo->Rop4)",
          "new_text": null,
          "old_line_content": "   UsesPattern = ROP_USES_PATTERN(BltInfo->Rop4);",
          "new_line_content": "      if (BltInfo->PatternSurface)",
          "content_same": false
        },
        {
          "line": 529,
          "old_api": "ExFreePool",
          "new_api": null,
          "old_text": "ExFreePool(ClipSpans)",
          "new_text": null,
          "old_line_content": "        ExFreePool(ClipSpans);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 538,
          "old_api": "ExFreePool",
          "new_api": null,
          "old_text": "ExFreePool(ClipSpans)",
          "new_text": null,
          "old_line_content": "  ExFreePool(ClipSpans);",
          "new_line_content": "                            RECTL* DestRect, RECTL *SourceRect,",
          "content_same": false
        },
        {
          "line": 539,
          "old_api": "ExFreePool",
          "new_api": null,
          "old_text": "ExFreePool(ScanLine)",
          "new_text": null,
          "old_line_content": "  ExFreePool(ScanLine);",
          "new_line_content": "                            POINTL* MaskOrigin, POINTL BrushOrigin,",
          "content_same": false
        },
        {
          "line": 540,
          "old_api": "ExFreePool",
          "new_api": null,
          "old_text": "ExFreePool(ScanLineAhead)",
          "new_text": null,
          "old_line_content": "  ExFreePool(ScanLineAhead);",
          "new_line_content": "                            CLIPOBJ *ClipRegion, XLATEOBJ *ColorTranslation,",
          "content_same": false
        },
        {
          "line": 158,
          "old_api": "XLATEOBJ_iXlate",
          "new_api": null,
          "old_text": "XLATEOBJ_iXlate(BltInfo->XlateSourceToDest, *SourceBits++)",
          "new_text": null,
          "old_line_content": "\t\t    *DestBits++ = XLATEOBJ_iXlate(BltInfo->XlateSourceToDest, *SourceBits++);",
          "new_line_content": "\t    SourceLine = BltInfo->SourceSurface->pvScan0 + ((BltInfo->SourcePoint.y + BltInfo->DestRect.bottom - BltInfo->DestRect.top - 1) * BltInfo->SourceSurface->lDelta) + BltInfo->SourcePoint.x;",
          "content_same": false
        },
        {
          "line": 551,
          "old_api": "DPRINT",
          "new_api": null,
          "old_text": "DPRINT(\"DIB_8BPP_StretchBlt: Source BPP: %u, srcRect: (%d,%d)-(%d,%d), dstRect: (%d,%d)-(%d,%d)\\n\",\n     BitsPerFormat(SourceSurf->iBitmapFormat), SourceRect->left, SourceRect->top, SourceRect->right, SourceRect->bottom,\n     DestRect->left, DestRect->top, DestRect->right, DestRect->bottom)",
          "new_text": null,
          "old_line_content": "  DPRINT(\"DIB_8BPP_StretchBlt: Source BPP: %u, srcRect: (%d,%d)-(%d,%d), dstRect: (%d,%d)-(%d,%d)\\n\",",
          "new_line_content": "      case BMF_16BPP:",
          "content_same": false
        },
        {
          "line": 424,
          "old_api": "max",
          "new_api": null,
          "old_text": "max(ClipSpans[*SpanIndex].X, DestRect->left)",
          "new_text": null,
          "old_line_content": "          Left = max(ClipSpans[*SpanIndex].X, DestRect->left);",
          "new_line_content": "          /* No more spans, everything else is clipped away, we're done */",
          "content_same": false
        },
        {
          "line": 297,
          "old_api": "PULONG)(\n         BltInfo->DestSurface->pvScan0 +\n         BltInfo->DestRect.left +\n         DestY * BltInfo->DestSurface->lDelta)",
          "new_api": null,
          "old_text": "PULONG)(\n         BltInfo->DestSurface->pvScan0 +\n         BltInfo->DestRect.left +\n         DestY * BltInfo->DestSurface->lDelta)",
          "new_text": null,
          "old_line_content": "      DestBits = (PULONG)(",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 425,
          "old_api": "min",
          "new_api": null,
          "old_text": "min(ClipSpans[*SpanIndex].X + ClipSpans[*SpanIndex].Width, DestRect->right)",
          "new_text": null,
          "old_line_content": "          Right = min(ClipSpans[*SpanIndex].X + ClipSpans[*SpanIndex].Width, DestRect->right);",
          "new_line_content": "          return FALSE;",
          "content_same": false
        },
        {
          "line": 426,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(Target + Left - DestRect->left, Source + Left - DestRect->left,\n                 (Right - Left) * sizeof(PIXEL))",
          "new_text": null,
          "old_line_content": "          memcpy(Target + Left - DestRect->left, Source + Left - DestRect->left,",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 552,
          "old_api": "BitsPerFormat",
          "new_api": null,
          "old_text": "BitsPerFormat(SourceSurf->iBitmapFormat)",
          "new_text": null,
          "old_line_content": "     BitsPerFormat(SourceSurf->iBitmapFormat), SourceRect->left, SourceRect->top, SourceRect->right, SourceRect->bottom,",
          "new_line_content": "      case BMF_24BPP:",
          "content_same": false
        },
        {
          "line": 174,
          "old_api": "XLATEOBJ_iXlate",
          "new_api": null,
          "old_text": "XLATEOBJ_iXlate(BltInfo->XlateSourceToDest, *SourceBits++)",
          "new_text": null,
          "old_line_content": "\t\t    *DestBits++ = XLATEOBJ_iXlate(BltInfo->XlateSourceToDest, *SourceBits++);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 567,
          "old_api": "ScaleRectAvg8",
          "new_api": null,
          "old_text": "ScaleRectAvg8(DestSurf, SourceSurf, DestRect, SourceRect, MaskOrigin, BrushOrigin,\n                             ClipRegion, ColorTranslation, Mode)",
          "new_text": null,
          "old_line_content": "        return ScaleRectAvg8(DestSurf, SourceSurf, DestRect, SourceRect, MaskOrigin, BrushOrigin,",
          "new_line_content": "    ",
          "content_same": false
        },
        {
          "line": 316,
          "old_api": "DIB_GetSource",
          "new_api": null,
          "old_text": "DIB_GetSource(BltInfo->PatternSurface, (DestX + BltInfo->BrushOrigin.x) % BltInfo->PatternSurface->sizlBitmap.cx, PatternY, BltInfo->XlatePatternToDest)",
          "new_text": null,
          "old_line_content": "            Pattern = DIB_GetSource(BltInfo->PatternSurface, (DestX + BltInfo->BrushOrigin.x) % BltInfo->PatternSurface->sizlBitmap.cx, PatternY, BltInfo->XlatePatternToDest);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 317,
          "old_api": "DIB_GetSource",
          "new_api": null,
          "old_text": "DIB_GetSource(BltInfo->PatternSurface, (DestX + BltInfo->BrushOrigin.x + 1) % BltInfo->PatternSurface->sizlBitmap.cx, PatternY, BltInfo->XlatePatternToDest)",
          "new_text": null,
          "old_line_content": "            Pattern |= DIB_GetSource(BltInfo->PatternSurface, (DestX + BltInfo->BrushOrigin.x + 1) % BltInfo->PatternSurface->sizlBitmap.cx, PatternY, BltInfo->XlatePatternToDest) << 8;",
          "new_line_content": "      if (DestX < BltInfo->DestRect.right)",
          "content_same": false
        },
        {
          "line": 318,
          "old_api": "DIB_GetSource",
          "new_api": null,
          "old_text": "DIB_GetSource(BltInfo->PatternSurface, (DestX + BltInfo->BrushOrigin.x + 2) % BltInfo->PatternSurface->sizlBitmap.cx, PatternY, BltInfo->XlatePatternToDest)",
          "new_text": null,
          "old_line_content": "            Pattern |= DIB_GetSource(BltInfo->PatternSurface, (DestX + BltInfo->BrushOrigin.x + 2) % BltInfo->PatternSurface->sizlBitmap.cx, PatternY, BltInfo->XlatePatternToDest) << 16;",
          "new_line_content": "      {",
          "content_same": false
        },
        {
          "line": 319,
          "old_api": "DIB_GetSource",
          "new_api": null,
          "old_text": "DIB_GetSource(BltInfo->PatternSurface, (DestX + BltInfo->BrushOrigin.x + 3) % BltInfo->PatternSurface->sizlBitmap.cx, PatternY, BltInfo->XlatePatternToDest)",
          "new_text": null,
          "old_line_content": "            Pattern |= DIB_GetSource(BltInfo->PatternSurface, (DestX + BltInfo->BrushOrigin.x + 3) % BltInfo->PatternSurface->sizlBitmap.cx, PatternY, BltInfo->XlatePatternToDest) << 24;",
          "new_line_content": "         for (; DestX < BltInfo->DestRect.right; DestX++)",
          "content_same": false
        },
        {
          "line": 572,
          "old_api": "BitsPerFormat",
          "new_api": null,
          "old_text": "BitsPerFormat(SourceSurf->iBitmapFormat)",
          "new_text": null,
          "old_line_content": "         DPRINT1(\"DIB_8BPP_StretchBlt: Unhandled Source BPP: %u\\n\", BitsPerFormat(SourceSurf->iBitmapFormat));",
          "new_line_content": "DIB_8BPP_TransparentBlt(SURFOBJ *DestSurf, SURFOBJ *SourceSurf,",
          "content_same": false
        },
        {
          "line": 322,
          "old_api": "DIB_DoRop",
          "new_api": null,
          "old_text": "DIB_DoRop(BltInfo->Rop4, Dest, Source, Pattern)",
          "new_text": null,
          "old_line_content": "         *DestBits = DIB_DoRop(BltInfo->Rop4, Dest, Source, Pattern);\t    ",
          "new_line_content": "            ",
          "content_same": false
        },
        {
          "line": 195,
          "old_api": "XLATEOBJ_iXlate",
          "new_api": null,
          "old_text": "XLATEOBJ_iXlate(BltInfo->XlateSourceToDest, xColor)",
          "new_text": null,
          "old_line_content": "          *DestBits = XLATEOBJ_iXlate(BltInfo->XlateSourceToDest, xColor);",
          "new_line_content": "      break;",
          "content_same": false
        },
        {
          "line": 329,
          "old_api": "DIB_8BPP_GetPixel",
          "new_api": null,
          "old_text": "DIB_8BPP_GetPixel(BltInfo->DestSurface, DestX, DestY)",
          "new_text": null,
          "old_line_content": "            Dest = DIB_8BPP_GetPixel(BltInfo->DestSurface, DestX, DestY);",
          "new_line_content": "            {",
          "content_same": false
        },
        {
          "line": 463,
          "old_api": "ClipobjToSpans",
          "new_api": null,
          "old_text": "ClipobjToSpans(&ClipSpans, &ClipSpansCount, ClipRegion, DestRect)",
          "new_text": null,
          "old_line_content": "  if (! ClipobjToSpans(&ClipSpans, &ClipSpansCount, ClipRegion, DestRect))",
          "new_line_content": "      return TRUE;",
          "content_same": false
        },
        {
          "line": 338,
          "old_api": "DIB_GetSource",
          "new_api": null,
          "old_text": "DIB_GetSource(BltInfo->PatternSurface, (DestX + BltInfo->BrushOrigin.x) % BltInfo->PatternSurface->sizlBitmap.cx, PatternY, BltInfo->XlatePatternToDest)",
          "new_text": null,
          "old_line_content": "               Pattern = DIB_GetSource(BltInfo->PatternSurface, (DestX + BltInfo->BrushOrigin.x) % BltInfo->PatternSurface->sizlBitmap.cx, PatternY, BltInfo->XlatePatternToDest);",
          "new_line_content": "      if (BltInfo->PatternSurface)",
          "content_same": false
        },
        {
          "line": 341,
          "old_api": "DIB_DoRop",
          "new_api": null,
          "old_text": "DIB_DoRop(BltInfo->Rop4, Dest, Source, Pattern)",
          "new_text": null,
          "old_line_content": "            DIB_8BPP_PutPixel(BltInfo->DestSurface, DestX, DestY, DIB_DoRop(BltInfo->Rop4, Dest, Source, Pattern) & 0xFFFF);",
          "new_line_content": "         PatternY %= BltInfo->PatternSurface->sizlBitmap.cy;",
          "content_same": false
        },
        {
          "line": 470,
          "old_api": "ASSERT",
          "new_api": null,
          "old_text": "ASSERT(NULL == ClipSpans)",
          "new_text": null,
          "old_line_content": "      ASSERT(NULL == ClipSpans);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 87,
          "old_api": "DIB_1BPP_GetPixel",
          "new_api": null,
          "old_text": "DIB_1BPP_GetPixel(BltInfo->SourceSurface, sx, sy)",
          "new_text": null,
          "old_line_content": "          if(DIB_1BPP_GetPixel(BltInfo->SourceSurface, sx, sy) == 0)",
          "new_line_content": "        sy++;",
          "content_same": false
        },
        {
          "line": 89,
          "old_api": "XLATEOBJ_iXlate",
          "new_api": null,
          "old_text": "XLATEOBJ_iXlate(BltInfo->XlateSourceToDest, 0)",
          "new_text": null,
          "old_line_content": "            DIB_8BPP_PutPixel(BltInfo->DestSurface, i, j, XLATEOBJ_iXlate(BltInfo->XlateSourceToDest, 0));",
          "new_line_content": "      break;",
          "content_same": false
        },
        {
          "line": 602,
          "old_api": "DIB_GetSourceIndex",
          "new_api": null,
          "old_text": "DIB_GetSourceIndex(SourceSurf, SourceX++, SourceY)",
          "new_text": null,
          "old_line_content": "      Source = DIB_GetSourceIndex(SourceSurf, SourceX++, SourceY);",
          "new_line_content": "      if(Source != iTransColor)",
          "content_same": false
        },
        {
          "line": 219,
          "old_api": "XLATEOBJ_iXlate",
          "new_api": null,
          "old_text": "XLATEOBJ_iXlate(BltInfo->XlateSourceToDest, xColor)",
          "new_text": null,
          "old_line_content": "          *DestBits = XLATEOBJ_iXlate(BltInfo->XlateSourceToDest, xColor);",
          "new_line_content": "      break;",
          "content_same": false
        },
        {
          "line": 91,
          "old_api": "XLATEOBJ_iXlate",
          "new_api": null,
          "old_text": "XLATEOBJ_iXlate(BltInfo->XlateSourceToDest, 1)",
          "new_text": null,
          "old_line_content": "            DIB_8BPP_PutPixel(BltInfo->DestSurface, i, j, XLATEOBJ_iXlate(BltInfo->XlateSourceToDest, 1));",
          "new_line_content": "    case BMF_4BPP:",
          "content_same": false
        },
        {
          "line": 476,
          "old_api": "ExAllocatePool",
          "new_api": null,
          "old_text": "ExAllocatePool(PagedPool, (DestRect->right - DestRect->left) * sizeof(PIXEL))",
          "new_text": null,
          "old_line_content": "  ScanLine = (PIXEL*)ExAllocatePool(PagedPool, (DestRect->right - DestRect->left) * sizeof(PIXEL));",
          "new_line_content": "        /* the next scan line has already been scaled and stored in",
          "content_same": false
        },
        {
          "line": 477,
          "old_api": "ExAllocatePool",
          "new_api": null,
          "old_text": "ExAllocatePool(PagedPool, (DestRect->right - DestRect->left) * sizeof(PIXEL))",
          "new_text": null,
          "old_line_content": "  ScanLineAhead = (PIXEL *)ExAllocatePool(PagedPool, (DestRect->right - DestRect->left) * sizeof(PIXEL));",
          "new_line_content": "         * ScanLineAhead; swap the buffers that ScanLine and ScanLineAhead",
          "content_same": false
        },
        {
          "line": 606,
          "old_api": "XLATEOBJ_iXlate",
          "new_api": null,
          "old_text": "XLATEOBJ_iXlate(ColorTranslation, Source)",
          "new_text": null,
          "old_line_content": "        Dest |= (XLATEOBJ_iXlate(ColorTranslation, Source) & 0xFF);",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 609,
          "old_api": "DIB_GetSourceIndex",
          "new_api": null,
          "old_text": "DIB_GetSourceIndex(SourceSurf, SourceX++, SourceY)",
          "new_text": null,
          "old_line_content": "      Source = DIB_GetSourceIndex(SourceSurf, SourceX++, SourceY);",
          "new_line_content": "      if(Source != iTransColor)",
          "content_same": false
        },
        {
          "line": 613,
          "old_api": "XLATEOBJ_iXlate",
          "new_api": null,
          "old_text": "XLATEOBJ_iXlate(ColorTranslation, Source)",
          "new_text": null,
          "old_line_content": "        Dest |= ((XLATEOBJ_iXlate(ColorTranslation, Source) << 8) & 0xFF00);",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 616,
          "old_api": "DIB_GetSourceIndex",
          "new_api": null,
          "old_text": "DIB_GetSourceIndex(SourceSurf, SourceX++, SourceY)",
          "new_text": null,
          "old_line_content": "      Source = DIB_GetSourceIndex(SourceSurf, SourceX++, SourceY);",
          "new_line_content": "      if(Source != iTransColor)",
          "content_same": false
        },
        {
          "line": 492,
          "old_api": "ScaleLineAvg8",
          "new_api": null,
          "old_text": "ScaleLineAvg8(ScanLine, Source, SourceRect->right - SourceRect->left, DestRect->right - DestRect->left)",
          "new_text": null,
          "old_line_content": "        ScaleLineAvg8(ScanLine, Source, SourceRect->right - SourceRect->left, DestRect->right - DestRect->left);",
          "new_line_content": "      for (x = 0; x < DestRect->right - DestRect->left; x++)",
          "content_same": false
        },
        {
          "line": 620,
          "old_api": "XLATEOBJ_iXlate",
          "new_api": null,
          "old_text": "XLATEOBJ_iXlate(ColorTranslation, Source)",
          "new_text": null,
          "old_line_content": "        Dest |= ((XLATEOBJ_iXlate(ColorTranslation, Source) << 16) & 0xFF0000);",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 110,
          "old_api": "XLATEOBJ_iXlate",
          "new_api": null,
          "old_text": "XLATEOBJ_iXlate(BltInfo->XlateSourceToDest,\n              (*SourceLine_4BPP & altnotmask[f1]) >> (4 * (1 - f1)))",
          "new_text": null,
          "old_line_content": "          xColor = XLATEOBJ_iXlate(BltInfo->XlateSourceToDest,",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 623,
          "old_api": "DIB_GetSourceIndex",
          "new_api": null,
          "old_text": "DIB_GetSourceIndex(SourceSurf, SourceX++, SourceY)",
          "new_text": null,
          "old_line_content": "      Source = DIB_GetSourceIndex(SourceSurf, SourceX++, SourceY);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 112,
          "old_api": "DIB_8BPP_PutPixel",
          "new_api": null,
          "old_text": "DIB_8BPP_PutPixel(BltInfo->DestSurface, i, j, xColor)",
          "new_text": null,
          "old_line_content": "          DIB_8BPP_PutPixel(BltInfo->DestSurface, i, j, xColor);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 241,
          "old_api": "XLATEOBJ_iXlate",
          "new_api": null,
          "old_text": "XLATEOBJ_iXlate(BltInfo->XlateSourceToDest, xColor)",
          "new_text": null,
          "old_line_content": "          *DestBits = XLATEOBJ_iXlate(BltInfo->XlateSourceToDest, xColor);",
          "new_line_content": "      break;",
          "content_same": false
        },
        {
          "line": 499,
          "old_api": "ScaleLineAvg8",
          "new_api": null,
          "old_text": "ScaleLineAvg8(ScanLineAhead, (PIXEL *)((BYTE *)Source + SourceSurf->lDelta), SourceRect->right - SourceRect->left, DestRect->right - DestRect->left)",
          "new_text": null,
          "old_line_content": "      ScaleLineAvg8(ScanLineAhead, (PIXEL *)((BYTE *)Source + SourceSurf->lDelta), SourceRect->right - SourceRect->left, DestRect->right - DestRect->left);",
          "new_line_content": "        /* No more spans, everything else is clipped away, we're done */",
          "content_same": false
        },
        {
          "line": 627,
          "old_api": "XLATEOBJ_iXlate",
          "new_api": null,
          "old_text": "XLATEOBJ_iXlate(ColorTranslation, Source)",
          "new_text": null,
          "old_line_content": "        Dest |= ((XLATEOBJ_iXlate(ColorTranslation, Source) << 24) & 0xFF000000);",
          "new_line_content": "      for (; X < DestRect->right; X++)",
          "content_same": false
        },
        {
          "line": 252,
          "old_api": "BitsPerFormat",
          "new_api": null,
          "old_text": "BitsPerFormat(BltInfo->SourceSurface->iBitmapFormat)",
          "new_text": null,
          "old_line_content": "      DPRINT1(\"DIB_8BPP_Bitblt: Unhandled Source BPP: %u\\n\", BitsPerFormat(BltInfo->SourceSurface->iBitmapFormat));",
          "new_line_content": "DIB_8BPP_BitBlt(PBLTINFO BltInfo)",
          "content_same": false
        },
        {
          "line": 505,
          "old_api": "FinalCopy8",
          "new_api": null,
          "old_text": "FinalCopy8(Target, ScanLine, ClipSpans, ClipSpansCount, &SpanIndex, DestY, DestRect)",
          "new_text": null,
          "old_line_content": "    if (! FinalCopy8(Target, ScanLine, ClipSpans, ClipSpansCount, &SpanIndex, DestY, DestRect))",
          "new_line_content": "    DestY++;",
          "content_same": false
        },
        {
          "line": 508,
          "old_api": "ExFreePool",
          "new_api": null,
          "old_text": "ExFreePool(ClipSpans)",
          "new_text": null,
          "old_line_content": "        ExFreePool(ClipSpans);",
          "new_line_content": "    E += FractPart;",
          "content_same": false
        },
        {
          "line": 637,
          "old_api": "DIB_GetSourceIndex",
          "new_api": null,
          "old_text": "DIB_GetSourceIndex(SourceSurf, SourceX++, SourceY)",
          "new_text": null,
          "old_line_content": "        Source = DIB_GetSourceIndex(SourceSurf, SourceX++, SourceY);",
          "new_line_content": "    SourceY++;",
          "content_same": false
        },
        {
          "line": 510,
          "old_api": "ExFreePool",
          "new_api": null,
          "old_text": "ExFreePool(ScanLineAhead)",
          "new_text": null,
          "old_line_content": "        ExFreePool(ScanLineAhead);",
          "new_line_content": "      E -= DestRect->bottom - DestRect->top;",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 2,
      "total_additions": 60,
      "total_deletions": 59,
      "total_api_changes": 121
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 9,
        "api_related_lines": 121,
        "non_api_lines": 8,
        "non_api_line_numbers": [
          42,
          43,
          44,
          45,
          46,
          47,
          48,
          49
        ]
      }
    },
    "api_calls_before": 74,
    "api_calls_after": 75,
    "diff_info": {
      "added_lines": 1,
      "removed_lines": 9,
      "total_diff_lines": 22
    }
  }
}
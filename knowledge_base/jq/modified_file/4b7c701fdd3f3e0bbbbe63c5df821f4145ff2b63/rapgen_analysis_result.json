{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/jq/modified_file/4b7c701fdd3f3e0bbbbe63c5df821f4145ff2b63",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/jq/modified_file/4b7c701fdd3f3e0bbbbe63c5df821f4145ff2b63/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/jq/modified_file/4b7c701fdd3f3e0bbbbe63c5df821f4145ff2b63/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/jq/modified_file/4b7c701fdd3f3e0bbbbe63c5df821f4145ff2b63/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 663,
          "old_api": "stack_push",
          "new_api": "frame_current",
          "old_text": "stack_push(jq, input)",
          "new_text": "frame_current(jq)",
          "old_line_content": "      stack_push(jq, input);",
          "new_line_content": "        stack_ptr retdata = frame_current(jq)->retdata;",
          "content_same": false
        },
        {
          "line": 669,
          "old_api": "frame_current",
          "new_api": "frame_push",
          "old_text": "frame_current(jq)",
          "new_text": "frame_push(jq, cl, pc + 2, nclosures)",
          "old_line_content": "      assert(jq->stk_top == frame_current(jq)->retdata);",
          "new_line_content": "        new_frame = frame_push(jq, cl, pc + 2, nclosures);",
          "content_same": false
        },
        {
          "line": 674,
          "old_api": "frame_pop",
          "new_api": "stack_push",
          "old_text": "frame_pop(jq)",
          "new_text": "stack_push(jq, input)",
          "old_line_content": "        frame_pop(jq);",
          "new_line_content": "      stack_push(jq, input);",
          "content_same": false
        },
        {
          "line": 679,
          "old_api": "stack_save",
          "new_api": "stack_pop",
          "old_text": "stack_save(jq, pc - 1, spos)",
          "new_text": "stack_pop(jq)",
          "old_line_content": "        stack_save(jq, pc - 1, spos);",
          "new_line_content": "      jv value = stack_pop(jq);",
          "content_same": false
        },
        {
          "line": 685,
          "old_api": "ON_BACKTRACK",
          "new_api": "frame_pop",
          "old_text": "ON_BACKTRACK(RET)",
          "new_text": "frame_pop(jq)",
          "old_line_content": "    case ON_BACKTRACK(RET): {",
          "new_line_content": "        frame_pop(jq);",
          "content_same": false
        },
        {
          "line": 735,
          "old_api": "frame_push",
          "new_api": "jv_nomem_handler",
          "old_text": "frame_push(jq, top, 0, 0)",
          "new_text": "jv_nomem_handler(nomem_handler, data)",
          "old_line_content": "  struct frame* top_frame = frame_push(jq, top, 0, 0);",
          "new_line_content": "  jv_nomem_handler(nomem_handler, data);",
          "content_same": false
        },
        {
          "line": 766,
          "old_api": "strlen",
          "new_api": "jq_reset",
          "old_text": "strlen(str)",
          "new_text": "jq_reset(old_jq)",
          "old_line_content": "  locfile_init(&locations, jq, str, strlen(str));",
          "new_line_content": "  jq_reset(old_jq);",
          "content_same": false
        },
        {
          "line": 770,
          "old_api": "bytecode_free",
          "new_api": "jv_mem_free",
          "old_text": "bytecode_free(jq->bc)",
          "new_text": "jv_mem_free(old_jq)",
          "old_line_content": "    bytecode_free(jq->bc);",
          "new_line_content": "  jv_mem_free(old_jq);",
          "content_same": false
        },
        {
          "line": 775,
          "old_api": "jv_copy",
          "new_api": "jv_get_kind",
          "old_text": "jv_copy(args)",
          "new_text": "jv_get_kind(args)",
          "old_line_content": "    for (int i=0; i<jv_array_length(jv_copy(args)); i++) {",
          "new_line_content": "  assert(jv_get_kind(args) == JV_KIND_ARRAY);",
          "content_same": false
        },
        {
          "line": 777,
          "old_api": "jv_string",
          "new_api": "strlen",
          "old_text": "jv_string(\"name\")",
          "new_text": "strlen(str)",
          "old_line_content": "      jv name = jv_object_get(jv_copy(arg), jv_string(\"name\"));",
          "new_line_content": "  locfile_init(&locations, jq, str, strlen(str));",
          "content_same": false
        },
        {
          "line": 779,
          "old_api": "jv_string_value",
          "new_api": "jq_reset",
          "old_text": "jv_string_value(name)",
          "new_text": "jq_reset(jq)",
          "old_line_content": "      program = gen_var_binding(gen_const(value), jv_string_value(name), program);",
          "new_line_content": "  jq_reset(jq);",
          "content_same": false
        },
        {
          "line": 784,
          "old_api": "block_compile",
          "new_api": "jq_parse",
          "old_text": "block_compile(program, &locations, &jq->bc)",
          "new_text": "jq_parse(&locations, &program)",
          "old_line_content": "      nerrors = block_compile(program, &locations, &jq->bc);",
          "new_line_content": "  int nerrors = jq_parse(&locations, &program);",
          "content_same": false
        },
        {
          "line": 787,
          "old_api": "jv_free",
          "new_api": "jv_copy",
          "old_text": "jv_free(args)",
          "new_text": "jv_copy(args)",
          "old_line_content": "  jv_free(args);",
          "new_line_content": "      jv arg = jv_array_get(jv_copy(args), i);",
          "content_same": false
        },
        {
          "line": 789,
          "old_api": "jv_string_fmt",
          "new_api": "jv_string",
          "old_text": "jv_string_fmt(\"%d compile %s\", nerrors,\n                         nerrors > 1 ? \"errors\" : \"error\")",
          "new_text": "jv_string(\"value\")",
          "old_line_content": "    jv s = jv_string_fmt(\"%d compile %s\", nerrors,",
          "new_line_content": "      jv value = jv_object_get(arg, jv_string(\"value\"));",
          "content_same": false
        },
        {
          "line": 793,
          "old_api": "jv_is_valid",
          "new_api": "builtins_bind",
          "old_text": "jv_is_valid(s)",
          "new_text": "builtins_bind(jq, &program)",
          "old_line_content": "    else if (!jv_is_valid(s))",
          "new_line_content": "    nerrors = builtins_bind(jq, &program);",
          "content_same": false
        },
        {
          "line": 804,
          "old_api": "jv_array",
          "new_api": "jv_is_valid",
          "old_text": "jv_array()",
          "new_text": "jv_is_valid(s)",
          "old_line_content": "  return jq_compile_args(jq, str, jv_array());",
          "new_line_content": "    else if (!jv_is_valid(s))",
          "content_same": false
        },
        {
          "line": 808,
          "old_api": "dump_disassembly",
          "new_api": "jv_free",
          "old_text": "dump_disassembly(indent, jq->bc)",
          "new_text": "jv_free(s)",
          "old_line_content": "  dump_disassembly(indent, jq->bc);",
          "new_line_content": "    jv_free(s);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 774,
          "old_api": null,
          "new_api": "jv_nomem_handler",
          "old_text": null,
          "new_text": "jv_nomem_handler(jq->nomem_handler, jq->nomem_handler_data)",
          "old_line_content": "  if (nerrors == 0) {",
          "new_line_content": "  jv_nomem_handler(jq->nomem_handler, jq->nomem_handler_data);",
          "content_same": false
        },
        {
          "line": 781,
          "old_api": null,
          "new_api": "bytecode_free",
          "old_text": null,
          "new_text": "bytecode_free(jq->bc)",
          "old_line_content": "    }",
          "new_line_content": "    bytecode_free(jq->bc);",
          "content_same": false
        },
        {
          "line": 786,
          "old_api": null,
          "new_api": "jv_copy",
          "old_text": null,
          "new_text": "jv_copy(args)",
          "old_line_content": "  }",
          "new_line_content": "    for (int i=0; i<jv_array_length(jv_copy(args)); i++) {",
          "content_same": false
        },
        {
          "line": 659,
          "old_api": null,
          "new_api": "make_closure",
          "old_text": null,
          "new_text": "make_closure(jq, pc)",
          "old_line_content": "                                           pc + 2, nclosures);",
          "new_line_content": "      struct closure cl = make_closure(jq, pc);",
          "content_same": false
        },
        {
          "line": 660,
          "old_api": null,
          "new_api": "frame_current",
          "old_text": null,
          "new_text": "frame_current(jq)",
          "old_line_content": "      new_frame->retdata = jq->stk_top;",
          "new_line_content": "      if (nclosures == 0 && *(pc + 2) == RET && frame_current(jq)->bc == cl.bc) {",
          "content_same": false
        },
        {
          "line": 788,
          "old_api": null,
          "new_api": "jv_string",
          "old_text": null,
          "new_text": "jv_string(\"name\")",
          "old_line_content": "  if (nerrors) {",
          "new_line_content": "      jv name = jv_object_get(jv_copy(arg), jv_string(\"name\"));",
          "content_same": false
        },
        {
          "line": 662,
          "old_api": null,
          "new_api": "frame_current",
          "old_text": null,
          "new_text": "frame_current(jq)",
          "old_line_content": "      pc = new_frame->bc->code;",
          "new_line_content": "        retaddr = frame_current(jq)->retaddr;",
          "content_same": false
        },
        {
          "line": 790,
          "old_api": null,
          "new_api": "jv_string_value",
          "old_text": null,
          "new_text": "jv_string_value(name)",
          "old_line_content": "                         nerrors > 1 ? \"errors\" : \"error\");",
          "new_line_content": "      program = gen_var_binding(gen_const(value), jv_string_value(name), program);",
          "content_same": false
        },
        {
          "line": 664,
          "old_api": null,
          "new_api": "frame_pop",
          "old_text": null,
          "new_text": "frame_pop(jq)",
          "old_line_content": "      break;",
          "new_line_content": "        frame_pop(jq);",
          "content_same": false
        },
        {
          "line": 665,
          "old_api": null,
          "new_api": "frame_push",
          "old_text": null,
          "new_text": "frame_push(jq, cl, pc + 2, 0)",
          "old_line_content": "    }",
          "new_line_content": "        new_frame = frame_push(jq, cl, pc + 2, 0);",
          "content_same": false
        },
        {
          "line": 791,
          "old_api": null,
          "new_api": "jv_free",
          "old_text": null,
          "new_text": "jv_free(name)",
          "old_line_content": "    if (jq->err_cb != NULL)",
          "new_line_content": "      jv_free(name);",
          "content_same": false
        },
        {
          "line": 795,
          "old_api": null,
          "new_api": "block_compile",
          "old_text": null,
          "new_text": "block_compile(program, &locations, &jq->bc)",
          "old_line_content": "    else",
          "new_line_content": "      nerrors = block_compile(program, &locations, &jq->bc);",
          "content_same": false
        },
        {
          "line": 798,
          "old_api": null,
          "new_api": "jv_free",
          "old_text": null,
          "new_text": "jv_free(args)",
          "old_line_content": "  }",
          "new_line_content": "  jv_free(args);",
          "content_same": false
        },
        {
          "line": 800,
          "old_api": null,
          "new_api": "jv_string_fmt",
          "old_text": null,
          "new_text": "jv_string_fmt(\"%d compile %s\", nerrors,\n                         nerrors > 1 ? \"errors\" : \"error\")",
          "old_line_content": "  return jq->bc != NULL;",
          "new_line_content": "    jv s = jv_string_fmt(\"%d compile %s\", nerrors,",
          "content_same": false
        },
        {
          "line": 803,
          "old_api": null,
          "new_api": "err_cb",
          "old_text": null,
          "new_text": "jq->err_cb(jq->err_cb_data, s)",
          "old_line_content": "int jq_compile(jq_state *jq, const char* str) {",
          "new_line_content": "      jq->err_cb(jq->err_cb_data, s);",
          "content_same": false
        },
        {
          "line": 805,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(errno)",
          "old_line_content": "}",
          "new_line_content": "      fprintf(stderr, \"Error formatting jq compilation errors: %s\\n\", strerror(errno));",
          "content_same": false
        },
        {
          "line": 807,
          "old_api": null,
          "new_api": "jv_string_value",
          "old_text": null,
          "new_text": "jv_string_value(s)",
          "old_line_content": "void jq_dump_disassembly(jq_state *jq, int indent) {",
          "new_line_content": "      fprintf(stderr, \"%s\\n\", jv_string_value(s));",
          "content_same": false
        },
        {
          "line": 680,
          "old_api": null,
          "new_api": "frame_current",
          "old_text": null,
          "new_text": "frame_current(jq)",
          "old_line_content": "        return value;",
          "new_line_content": "      assert(jq->stk_top == frame_current(jq)->retdata);",
          "content_same": false
        },
        {
          "line": 681,
          "old_api": null,
          "new_api": "frame_current",
          "old_text": null,
          "new_text": "frame_current(jq)",
          "old_line_content": "      }",
          "new_line_content": "      uint16_t* retaddr = frame_current(jq)->retaddr;",
          "content_same": false
        },
        {
          "line": 810,
          "old_api": null,
          "new_api": "locfile_free",
          "old_text": null,
          "new_text": "locfile_free(&locations)",
          "old_line_content": "",
          "new_line_content": "  locfile_free(&locations);",
          "content_same": false
        },
        {
          "line": 815,
          "old_api": null,
          "new_api": "jv_array",
          "old_text": null,
          "new_text": "jv_array()",
          "old_line_content": "",
          "new_line_content": "  return jq_compile_args(jq, str, jv_array());",
          "content_same": false
        },
        {
          "line": 688,
          "old_api": null,
          "new_api": "stack_get_pos",
          "old_text": null,
          "new_text": "stack_get_pos(jq)",
          "old_line_content": "    }",
          "new_line_content": "        struct stack_pos spos = stack_get_pos(jq);",
          "content_same": false
        },
        {
          "line": 689,
          "old_api": null,
          "new_api": "jv_null",
          "old_text": null,
          "new_text": "jv_null()",
          "old_line_content": "    }",
          "new_line_content": "        stack_push(jq, jv_null());",
          "content_same": false
        },
        {
          "line": 690,
          "old_api": null,
          "new_api": "stack_save",
          "old_text": null,
          "new_text": "stack_save(jq, pc - 1, spos)",
          "old_line_content": "  }",
          "new_line_content": "        stack_save(jq, pc - 1, spos);",
          "content_same": false
        },
        {
          "line": 819,
          "old_api": null,
          "new_api": "dump_disassembly",
          "old_text": null,
          "new_text": "dump_disassembly(indent, jq->bc)",
          "old_line_content": "",
          "new_line_content": "  dump_disassembly(indent, jq->bc);",
          "content_same": false
        },
        {
          "line": 693,
          "old_api": null,
          "new_api": "stack_push",
          "old_text": null,
          "new_text": "stack_push(jq, value)",
          "old_line_content": "jq_state *jq_init(void) {",
          "new_line_content": "      stack_push(jq, value);",
          "content_same": false
        },
        {
          "line": 696,
          "old_api": null,
          "new_api": "ON_BACKTRACK",
          "old_text": null,
          "new_text": "ON_BACKTRACK(RET)",
          "old_line_content": "  if (jq == NULL)",
          "new_line_content": "    case ON_BACKTRACK(RET): {",
          "content_same": false
        },
        {
          "line": 706,
          "old_api": null,
          "new_api": "jv_mem_alloc_unguarded",
          "old_text": null,
          "new_text": "jv_mem_alloc_unguarded(sizeof(*jq))",
          "old_line_content": "  jq->err_cb = NULL;",
          "new_line_content": "  jq = jv_mem_alloc_unguarded(sizeof(*jq));",
          "content_same": false
        },
        {
          "line": 712,
          "old_api": null,
          "new_api": "stack_init",
          "old_text": null,
          "new_text": "stack_init(&jq->stk)",
          "old_line_content": "",
          "new_line_content": "  stack_init(&jq->stk);",
          "content_same": false
        },
        {
          "line": 720,
          "old_api": null,
          "new_api": "jv_null",
          "old_text": null,
          "new_text": "jv_null()",
          "old_line_content": "  *data = jq->err_cb_data;",
          "new_line_content": "  jq->path = jv_null();",
          "content_same": false
        },
        {
          "line": 742,
          "old_api": null,
          "new_api": "jv_nomem_handler",
          "old_text": null,
          "new_text": "jv_nomem_handler(jq->nomem_handler, jq->nomem_handler_data)",
          "old_line_content": "    jq->debug_trace_enabled = 1;",
          "new_line_content": "  jv_nomem_handler(jq->nomem_handler, jq->nomem_handler_data);",
          "content_same": false
        },
        {
          "line": 743,
          "old_api": null,
          "new_api": "jq_reset",
          "old_text": null,
          "new_text": "jq_reset(jq)",
          "old_line_content": "  } else {",
          "new_line_content": "  jq_reset(jq);",
          "content_same": false
        },
        {
          "line": 746,
          "old_api": null,
          "new_api": "frame_push",
          "old_text": null,
          "new_text": "frame_push(jq, top, 0, 0)",
          "old_line_content": "  jq->initial_execution = 1;",
          "new_line_content": "  struct frame* top_frame = frame_push(jq, top, 0, 0);",
          "content_same": false
        },
        {
          "line": 750,
          "old_api": null,
          "new_api": "stack_push",
          "old_text": null,
          "new_text": "stack_push(jq, input)",
          "old_line_content": "  jq_state *old_jq = *jq;",
          "new_line_content": "  stack_push(jq, input);",
          "content_same": false
        },
        {
          "line": 751,
          "old_api": null,
          "new_api": "stack_get_pos",
          "old_text": null,
          "new_text": "stack_get_pos(jq)",
          "old_line_content": "  if (old_jq == NULL)",
          "new_line_content": "  stack_save(jq, jq->bc->code, stack_get_pos(jq));",
          "content_same": false
        },
        {
          "line": 767,
          "old_api": null,
          "new_api": "bytecode_free",
          "old_text": null,
          "new_text": "bytecode_free(old_jq->bc)",
          "old_line_content": "  block program;",
          "new_line_content": "  bytecode_free(old_jq->bc);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 768,
          "old_api": "jq_reset",
          "new_api": null,
          "old_text": "jq_reset(jq)",
          "new_text": null,
          "old_line_content": "  jq_reset(jq);",
          "new_line_content": "  old_jq->bc = 0;",
          "content_same": false
        },
        {
          "line": 773,
          "old_api": "jq_parse",
          "new_api": null,
          "old_text": "jq_parse(&locations, &program)",
          "new_text": null,
          "old_line_content": "  int nerrors = jq_parse(&locations, &program);",
          "new_line_content": "int jq_compile_args(jq_state *jq, const char* str, jv args) {",
          "content_same": false
        },
        {
          "line": 776,
          "old_api": "jv_copy",
          "new_api": null,
          "old_text": "jv_copy(args)",
          "new_text": null,
          "old_line_content": "      jv arg = jv_array_get(jv_copy(args), i);",
          "new_line_content": "  struct locfile locations;",
          "content_same": false
        },
        {
          "line": 778,
          "old_api": "jv_string",
          "new_api": null,
          "old_text": "jv_string(\"value\")",
          "new_text": null,
          "old_line_content": "      jv value = jv_object_get(arg, jv_string(\"value\"));",
          "new_line_content": "  block program;",
          "content_same": false
        },
        {
          "line": 780,
          "old_api": "jv_free",
          "new_api": null,
          "old_text": "jv_free(name)",
          "new_text": null,
          "old_line_content": "      jv_free(name);",
          "new_line_content": "  if (jq->bc) {",
          "content_same": false
        },
        {
          "line": 782,
          "old_api": "builtins_bind",
          "new_api": null,
          "old_text": "builtins_bind(jq, &program)",
          "new_text": null,
          "old_line_content": "    nerrors = builtins_bind(jq, &program);",
          "new_line_content": "    jq->bc = 0;",
          "content_same": false
        },
        {
          "line": 658,
          "old_api": "make_closure",
          "new_api": null,
          "old_text": "make_closure(jq, pc)",
          "new_text": null,
          "old_line_content": "      struct frame* new_frame = frame_push(jq, make_closure(jq, pc),",
          "new_line_content": "      struct frame* new_frame;",
          "content_same": false
        },
        {
          "line": 792,
          "old_api": "err_cb",
          "new_api": null,
          "old_text": "jq->err_cb(jq->err_cb_data, s)",
          "new_text": null,
          "old_line_content": "      jq->err_cb(jq->err_cb_data, s);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 794,
          "old_api": "strerror",
          "new_api": null,
          "old_text": "strerror(errno)",
          "new_text": null,
          "old_line_content": "      fprintf(stderr, \"Error formatting jq compilation errors: %s\\n\", strerror(errno));",
          "new_line_content": "    if (nerrors == 0) {",
          "content_same": false
        },
        {
          "line": 668,
          "old_api": "stack_pop",
          "new_api": null,
          "old_text": "stack_pop(jq)",
          "new_text": null,
          "old_line_content": "      jv value = stack_pop(jq);",
          "new_line_content": "        retaddr = pc + 2 + nclosures*2;",
          "content_same": false
        },
        {
          "line": 796,
          "old_api": "jv_string_value",
          "new_api": null,
          "old_text": "jv_string_value(s)",
          "new_text": null,
          "old_line_content": "      fprintf(stderr, \"%s\\n\", jv_string_value(s));",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 670,
          "old_api": "frame_current",
          "new_api": null,
          "old_text": "frame_current(jq)",
          "new_text": null,
          "old_line_content": "      uint16_t* retaddr = frame_current(jq)->retaddr;",
          "new_line_content": "        new_frame->retdata = jq->stk_top;",
          "content_same": false
        },
        {
          "line": 797,
          "old_api": "jv_free",
          "new_api": null,
          "old_text": "jv_free(s)",
          "new_text": null,
          "old_line_content": "    jv_free(s);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 799,
          "old_api": "locfile_free",
          "new_api": null,
          "old_text": "locfile_free(&locations)",
          "new_text": null,
          "old_line_content": "  locfile_free(&locations);",
          "new_line_content": "  if (nerrors) {",
          "content_same": false
        },
        {
          "line": 677,
          "old_api": "stack_get_pos",
          "new_api": null,
          "old_text": "stack_get_pos(jq)",
          "new_text": null,
          "old_line_content": "        struct stack_pos spos = stack_get_pos(jq);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 678,
          "old_api": "jv_null",
          "new_api": null,
          "old_text": "jv_null()",
          "new_text": null,
          "old_line_content": "        stack_push(jq, jv_null());",
          "new_line_content": "    case RET: {",
          "content_same": false
        },
        {
          "line": 682,
          "old_api": "stack_push",
          "new_api": null,
          "old_text": "stack_push(jq, value)",
          "new_text": null,
          "old_line_content": "      stack_push(jq, value);",
          "new_line_content": "      if (retaddr) {",
          "content_same": false
        },
        {
          "line": 695,
          "old_api": "jv_mem_alloc_unguarded",
          "new_api": null,
          "old_text": "jv_mem_alloc_unguarded(sizeof(*jq))",
          "new_text": null,
          "old_line_content": "  jq = jv_mem_alloc_unguarded(sizeof(*jq));",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 701,
          "old_api": "stack_init",
          "new_api": null,
          "old_text": "stack_init(&jq->stk)",
          "new_text": null,
          "old_line_content": "  stack_init(&jq->stk);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 709,
          "old_api": "jv_null",
          "new_api": null,
          "old_text": "jv_null()",
          "new_text": null,
          "old_line_content": "  jq->path = jv_null();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 724,
          "old_api": "jv_nomem_handler",
          "new_api": null,
          "old_text": "jv_nomem_handler(nomem_handler, data)",
          "new_text": null,
          "old_line_content": "  jv_nomem_handler(nomem_handler, data);",
          "new_line_content": "void jq_set_error_cb(jq_state *jq, jq_err_cb cb, void *data) {",
          "content_same": false
        },
        {
          "line": 731,
          "old_api": "jv_nomem_handler",
          "new_api": null,
          "old_text": "jv_nomem_handler(jq->nomem_handler, jq->nomem_handler_data)",
          "new_text": null,
          "old_line_content": "  jv_nomem_handler(jq->nomem_handler, jq->nomem_handler_data);",
          "new_line_content": "  *data = jq->err_cb_data;",
          "content_same": false
        },
        {
          "line": 732,
          "old_api": "jq_reset",
          "new_api": null,
          "old_text": "jq_reset(jq)",
          "new_text": null,
          "old_line_content": "  jq_reset(jq);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 739,
          "old_api": "stack_push",
          "new_api": null,
          "old_text": "stack_push(jq, input)",
          "new_text": null,
          "old_line_content": "  stack_push(jq, input);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 740,
          "old_api": "stack_get_pos",
          "new_api": null,
          "old_text": "stack_get_pos(jq)",
          "new_text": null,
          "old_line_content": "  stack_save(jq, jq->bc->code, stack_get_pos(jq));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 755,
          "old_api": "jq_reset",
          "new_api": null,
          "old_text": "jq_reset(old_jq)",
          "new_text": null,
          "old_line_content": "  jq_reset(old_jq);",
          "new_line_content": "    jq->debug_trace_enabled = 0;",
          "content_same": false
        },
        {
          "line": 756,
          "old_api": "bytecode_free",
          "new_api": null,
          "old_text": "bytecode_free(old_jq->bc)",
          "new_text": null,
          "old_line_content": "  bytecode_free(old_jq->bc);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 759,
          "old_api": "jv_mem_free",
          "new_api": null,
          "old_text": "jv_mem_free(old_jq)",
          "new_text": null,
          "old_line_content": "  jv_mem_free(old_jq);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 763,
          "old_api": "jv_nomem_handler",
          "new_api": null,
          "old_text": "jv_nomem_handler(jq->nomem_handler, jq->nomem_handler_data)",
          "new_text": null,
          "old_line_content": "  jv_nomem_handler(jq->nomem_handler, jq->nomem_handler_data);",
          "new_line_content": "    return;",
          "content_same": false
        },
        {
          "line": 764,
          "old_api": "jv_get_kind",
          "new_api": null,
          "old_text": "jv_get_kind(args)",
          "new_text": null,
          "old_line_content": "  assert(jv_get_kind(args) == JV_KIND_ARRAY);",
          "new_line_content": "  *jq = NULL;",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 17,
      "total_additions": 36,
      "total_deletions": 30,
      "total_api_changes": 83
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 15,
        "api_related_lines": 83,
        "non_api_lines": 5,
        "non_api_line_numbers": [
          657,
          661,
          666,
          667,
          671
        ]
      }
    },
    "api_calls_before": 354,
    "api_calls_after": 359,
    "diff_info": {
      "added_lines": 15,
      "removed_lines": 4,
      "total_diff_lines": 31
    }
  }
}
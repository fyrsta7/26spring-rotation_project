{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/qBittorrent/modified_file/5986c1dbc9fca180ed089646719f962f3aa28402",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/qBittorrent/modified_file/5986c1dbc9fca180ed089646719f962f3aa28402/before.cpp",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/qBittorrent/modified_file/5986c1dbc9fca180ed089646719f962f3aa28402/after.cpp",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/qBittorrent/modified_file/5986c1dbc9fca180ed089646719f962f3aa28402/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 583,
          "old_api": "isDigit",
          "new_api": "at",
          "old_text": "Char.isDigit();\n  ",
          "new_text": "t.at(posR);\n  ",
          "old_line_content": "      bool leftCharIsDigit = leftChar.isDigit();",
          "new_line_content": "      QChar rightChar = right.at(posR);",
          "content_same": false
        },
        {
          "line": 600,
          "old_api": "at",
          "new_api": "size",
          "old_text": ".at(posL).isDigit())\n  ",
          "new_text": ".size()) {\n",
          "old_line_content": "      if (left.at(posL).isDigit())",
          "new_line_content": "    while (posL < left.size()) {",
          "content_same": false
        },
        {
          "line": 607,
          "old_api": "clear",
          "new_api": "toInt",
          "old_text": ".clear();\n\n ",
          "new_text": ".toInt();\n  ",
          "old_line_content": "    temp.clear();",
          "new_line_content": "    int numL = temp.toInt();",
          "content_same": false
        },
        {
          "line": 610,
          "old_api": "at",
          "new_api": "size",
          "old_text": "t.at(posR).isDigit())\n  ",
          "new_text": "t.size()) {\n",
          "old_line_content": "      if (right.at(posR).isDigit())",
          "new_line_content": "    while (posR < right.size()) {",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 608,
          "old_api": null,
          "new_api": "clear",
          "old_text": null,
          "new_text": ".clear();\n\n ",
          "old_line_content": "",
          "new_line_content": "    temp.clear();",
          "content_same": false
        },
        {
          "line": 642,
          "old_api": null,
          "new_api": ":pow(10.0, precision);",
          "old_text": null,
          "new_text": ":pow(10.0, precision);\n  ",
          "old_line_content": "  if (localized)",
          "new_line_content": "  double prec = std::pow(10.0, precision);",
          "content_same": false
        },
        {
          "line": 579,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "t.size())\n  ",
          "old_line_content": "        return false; // No data",
          "new_line_content": "      if (posL == left.size() || posR == right.size())",
          "content_same": false
        },
        {
          "line": 612,
          "old_api": null,
          "new_api": "at",
          "old_text": null,
          "new_text": "t.at(posR);\n  ",
          "old_line_content": "      else",
          "new_line_content": "        temp += right.at(posR);",
          "content_same": false
        },
        {
          "line": 644,
          "old_api": null,
          "new_api": ":floor(n*prec)/pre",
          "old_text": null,
          "new_text": ":floor(n*prec)/pre",
          "old_line_content": "  else",
          "new_line_content": "    return QLocale::system().toString(std::floor(n*prec)/prec, 'f', precision);",
          "content_same": false
        },
        {
          "line": 646,
          "old_api": null,
          "new_api": ":floor(n*prec)/pre",
          "old_text": null,
          "new_text": ":floor(n*prec)/pre",
          "old_line_content": "}",
          "new_line_content": "    return QString::number(std::floor(n*prec)/prec, 'f', precision);",
          "content_same": false
        },
        {
          "line": 675,
          "old_api": null,
          "new_api": "perThread::msleep(msecs);\n}",
          "old_text": null,
          "new_text": "perThread::msleep(msecs);\n}\n",
          "old_line_content": "}",
          "new_line_content": "  SleeperThread::msleep(msecs);",
          "content_same": false
        },
        {
          "line": 585,
          "old_api": null,
          "new_api": "isDigit",
          "old_text": null,
          "new_text": "tChar.isDigit();\n  ",
          "old_line_content": "      if (leftCharIsDigit != rightCharIsDigit)",
          "new_line_content": "      bool rightCharIsDigit = rightChar.isDigit();",
          "content_same": false
        },
        {
          "line": 617,
          "old_api": null,
          "new_api": "toInt",
          "old_text": null,
          "new_text": ".toInt();\n\n ",
          "old_line_content": "",
          "new_line_content": "    int numR = temp.toInt();",
          "content_same": false
        },
        {
          "line": 557,
          "old_api": null,
          "new_api": "replace",
          "old_text": null,
          "new_text": "lt.replace(reURL, \"\\\\1<a href=\\\"\\\\2\\\">\\\\2</a>\");\n\n ",
          "old_line_content": "",
          "new_line_content": "  result.replace(reURL, \"\\\\1<a href=\\\"\\\\2\\\">\\\\2</a>\");",
          "content_same": false
        },
        {
          "line": 654,
          "old_api": null,
          "new_api": "ngth",
          "old_text": null,
          "new_text": "ngth();\n\n ",
          "old_line_content": "",
          "new_line_content": "  int lengthB = b.length();",
          "content_same": false
        },
        {
          "line": 561,
          "old_api": null,
          "new_api": "replace",
          "old_text": null,
          "new_text": "lt.replace(reNoScheme, \"<a href=\\\"http://\\\\1\\\">\");\n\n ",
          "old_line_content": "",
          "new_line_content": "  result.replace(reNoScheme, \"<a href=\\\"http://\\\\1\\\">\");",
          "content_same": false
        },
        {
          "line": 568,
          "old_api": null,
          "new_api": "toString",
          "old_text": null,
          "new_text": "eTime::fromTime_t(t).toString(Qt::DefaultLocaleLongDate);\n}\n",
          "old_line_content": "}",
          "new_line_content": "  return QDateTime::fromTime_t(t).toString(Qt::DefaultLocaleLongDate);",
          "content_same": false
        },
        {
          "line": 602,
          "old_api": null,
          "new_api": "at",
          "old_text": null,
          "new_text": ".at(posL);\n  ",
          "old_line_content": "      else",
          "new_line_content": "        temp += left.at(posL);",
          "content_same": false
        },
        {
          "line": 669,
          "old_api": null,
          "new_api": "ead::msleep(msecs);",
          "old_text": null,
          "new_text": "ead::msleep(msecs);\n  ",
          "old_line_content": "    }",
          "new_line_content": "      QThread::msleep(msecs);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 609,
          "old_api": "size",
          "new_api": null,
          "old_text": "t.size()) {\n",
          "new_text": null,
          "old_line_content": "    while (posR < right.size()) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 578,
          "old_api": "size",
          "new_api": null,
          "old_text": "t.size())\n  ",
          "new_text": null,
          "old_line_content": "      if (posL == left.size() || posR == right.size())",
          "new_line_content": "    for (;;) {",
          "content_same": false
        },
        {
          "line": 641,
          "old_api": ":pow(10.0, precision);",
          "new_api": null,
          "old_text": ":pow(10.0, precision);\n  ",
          "new_text": null,
          "old_line_content": "  double prec = std::pow(10.0, precision);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 643,
          "old_api": ":floor(n*prec)/pre",
          "new_api": null,
          "old_text": ":floor(n*prec)/pre",
          "new_text": null,
          "old_line_content": "    return QLocale::system().toString(std::floor(n*prec)/prec, 'f', precision);",
          "new_line_content": "  if (localized)",
          "content_same": false
        },
        {
          "line": 581,
          "old_api": "at",
          "new_api": null,
          "old_text": ".at(posL);\n  ",
          "new_text": null,
          "old_line_content": "      QChar leftChar = left.at(posL);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 599,
          "old_api": "size",
          "new_api": null,
          "old_text": ".size()) {\n",
          "new_text": null,
          "old_line_content": "    while (posL < left.size()) {",
          "new_line_content": "    QString temp;",
          "content_same": false
        },
        {
          "line": 645,
          "old_api": ":floor(n*prec)/pre",
          "new_api": null,
          "old_text": ":floor(n*prec)/pre",
          "new_text": null,
          "old_line_content": "    return QString::number(std::floor(n*prec)/prec, 'f', precision);",
          "new_line_content": "  else",
          "content_same": false
        },
        {
          "line": 616,
          "old_api": "toInt",
          "new_api": null,
          "old_text": ".toInt();\n\n ",
          "new_text": null,
          "old_line_content": "    int numR = temp.toInt();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 674,
          "old_api": "perThread::msleep(msecs);\n}",
          "new_api": null,
          "old_text": "perThread::msleep(msecs);\n}\n",
          "new_text": null,
          "old_line_content": "  SleeperThread::msleep(msecs);",
          "new_line_content": "void misc::msleep(unsigned long msecs) {",
          "content_same": false
        },
        {
          "line": 556,
          "old_api": "replace",
          "new_api": null,
          "old_text": "lt.replace(reURL, \"\\\\1<a href=\\\"\\\\2\\\">\\\\2</a>\");\n\n ",
          "new_text": null,
          "old_line_content": "  result.replace(reURL, \"\\\\1<a href=\\\"\\\\2\\\">\\\\2</a>\");",
          "new_line_content": "  // Capture links",
          "content_same": false
        },
        {
          "line": 652,
          "old_api": "ngth",
          "new_api": null,
          "old_text": "ngth();\n  ",
          "new_text": null,
          "old_line_content": "  int lengthA = a.length();",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 560,
          "old_api": "replace",
          "new_api": null,
          "old_text": "lt.replace(reNoScheme, \"<a href=\\\"http://\\\\1\\\">\");\n\n ",
          "new_text": null,
          "old_line_content": "  result.replace(reNoScheme, \"<a href=\\\"http://\\\\1\\\">\");",
          "new_line_content": "  static QRegExp reNoScheme(\"<a\\\\s+href=\\\"(?!http(s?))([a-zA-Z0-9\\\\?%=&/_\\\\.-:#]+)\\\\s*\\\">\");",
          "content_same": false
        },
        {
          "line": 567,
          "old_api": "toString",
          "new_api": null,
          "old_text": "eTime::fromTime_t(t).toString(Qt::DefaultLocaleLongDate);\n}\n",
          "new_text": null,
          "old_line_content": "  return QDateTime::fromTime_t(t).toString(Qt::DefaultLocaleLongDate);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 668,
          "old_api": "ead::msleep(msecs);",
          "new_api": null,
          "old_text": "ead::msleep(msecs);\n  ",
          "new_text": null,
          "old_line_content": "      QThread::msleep(msecs);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 606,
          "old_api": "toInt",
          "new_api": null,
          "old_text": ".toInt();\n  ",
          "new_text": null,
          "old_line_content": "    int numL = temp.toInt();",
          "new_line_content": "    }",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 4,
      "total_additions": 15,
      "total_deletions": 15,
      "total_api_changes": 34
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 4,
        "api_related_lines": 34,
        "non_api_lines": 3,
        "non_api_line_numbers": [
          508,
          509,
          559
        ]
      }
    },
    "api_calls_before": 226,
    "api_calls_after": 226,
    "diff_info": {
      "added_lines": 3,
      "removed_lines": 2,
      "total_diff_lines": 24
    }
  }
}
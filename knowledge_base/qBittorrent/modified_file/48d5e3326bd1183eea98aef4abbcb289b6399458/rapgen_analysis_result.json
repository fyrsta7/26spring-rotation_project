{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/qBittorrent/modified_file/48d5e3326bd1183eea98aef4abbcb289b6399458",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/qBittorrent/modified_file/48d5e3326bd1183eea98aef4abbcb289b6399458/before.cpp",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/qBittorrent/modified_file/48d5e3326bd1183eea98aef4abbcb289b6399458/after.cpp",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/qBittorrent/modified_file/48d5e3326bd1183eea98aef4abbcb289b6399458/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": true,
    "api_changes": {
      "replacements": [
        {
          "line": 64,
          "old_api": "setSortIndicator",
          "new_api": "setUniformRowHeights",
          "old_text": "header()->setSortIndicator(0, Qt::AscendingOrder)",
          "new_text": "setUniformRowHeights(true)",
          "old_line_content": "    header()->setSortIndicator(0, Qt::AscendingOrder);",
          "new_line_content": "    setUniformRowHeights(true);",
          "content_same": false
        },
        {
          "line": 65,
          "old_api": "setFirstSectionMovable",
          "new_api": "setSortIndicator",
          "old_text": "header()->setFirstSectionMovable(true)",
          "new_text": "header()->setSortIndicator(0, Qt::AscendingOrder)",
          "old_line_content": "    header()->setFirstSectionMovable(true);",
          "new_line_content": "    header()->setSortIndicator(0, Qt::AscendingOrder);",
          "content_same": false
        },
        {
          "line": 66,
          "old_api": "setContextMenuPolicy",
          "new_api": "setFirstSectionMovable",
          "old_text": "header()->setContextMenuPolicy(Qt::CustomContextMenu)",
          "new_text": "header()->setFirstSectionMovable(true)",
          "old_line_content": "    header()->setContextMenuPolicy(Qt::CustomContextMenu);",
          "new_line_content": "    header()->setFirstSectionMovable(true);",
          "content_same": false
        },
        {
          "line": 76,
          "old_api": "QTreeView::setModel(m_filterModel)",
          "new_api": "setSourceModel",
          "old_text": "QTreeView::setModel(m_filterModel)",
          "new_text": "m_filterModel->setSourceModel(m_model)",
          "old_line_content": "    QTreeView::setModel(m_filterModel);",
          "new_line_content": "    m_filterModel->setSourceModel(m_model);",
          "content_same": false
        },
        {
          "line": 82,
          "old_api": "connect",
          "new_api": "qOverload<const QModelIndex &>(&QAbstractItemView::edit)",
          "old_text": "connect(this, &QAbstractItemView::doubleClicked, this, &TorrentContentWidget::onItemDoubleClicked)",
          "new_text": "qOverload<const QModelIndex &>(&QAbstractItemView::edit)",
          "old_line_content": "    connect(this, &QAbstractItemView::doubleClicked, this, &TorrentContentWidget::onItemDoubleClicked);",
          "new_line_content": "    connect(this, &QAbstractItemView::clicked, this, qOverload<const QModelIndex &>(&QAbstractItemView::edit));",
          "content_same": false
        },
        {
          "line": 84,
          "old_api": "header",
          "new_api": "connect",
          "old_text": "header()",
          "new_text": "connect(this, &QWidget::customContextMenuRequested, this, &TorrentContentWidget::displayContextMenu)",
          "old_line_content": "    connect(header(), &QWidget::customContextMenuRequested, this, &TorrentContentWidget::displayColumnHeaderMenu);",
          "new_line_content": "    connect(this, &QWidget::customContextMenuRequested, this, &TorrentContentWidget::displayContextMenu);",
          "content_same": false
        },
        {
          "line": 116,
          "old_api": "refresh",
          "new_api": "setUpdatesEnabled",
          "old_text": "m_model->refresh()",
          "new_text": "setUpdatesEnabled(false)",
          "old_line_content": "    m_model->refresh();",
          "new_line_content": "    setUpdatesEnabled(false);",
          "content_same": false
        },
        {
          "line": 117,
          "old_api": "setUpdatesEnabled",
          "new_api": "refresh",
          "old_text": "setUpdatesEnabled(true)",
          "new_text": "m_model->refresh()",
          "old_line_content": "    setUpdatesEnabled(true);",
          "new_line_content": "    m_model->refresh();",
          "content_same": false
        },
        {
          "line": 149,
          "old_api": "data",
          "new_api": "parent",
          "old_text": "i.data().toString()",
          "new_text": "i.parent()",
          "old_line_content": "        path = Path(i.data().toString()) / path;",
          "new_line_content": "    for (QModelIndex i = index; i.isValid(); i = i.parent())",
          "content_same": false
        },
        {
          "line": 156,
          "old_api": "QRegularExpression",
          "new_api": "Utils::String::wildcardToRegexPattern(patternText)",
          "old_text": "QRegularExpression(pattern, QRegularExpression::CaseInsensitiveOption)",
          "new_text": "Utils::String::wildcardToRegexPattern(patternText)",
          "old_line_content": "    m_filterModel->setFilterRegularExpression(QRegularExpression(pattern, QRegularExpression::CaseInsensitiveOption));",
          "new_line_content": "    const QString pattern = Utils::String::wildcardToRegexPattern(patternText);",
          "content_same": false
        },
        {
          "line": 157,
          "old_api": "isEmpty",
          "new_api": "QRegularExpression",
          "old_text": "patternText.isEmpty()",
          "new_text": "QRegularExpression(pattern, QRegularExpression::CaseInsensitiveOption)",
          "old_line_content": "    if (patternText.isEmpty())",
          "new_line_content": "    m_filterModel->setFilterRegularExpression(QRegularExpression(pattern, QRegularExpression::CaseInsensitiveOption));",
          "content_same": false
        },
        {
          "line": 160,
          "old_api": "index",
          "new_api": "collapseAll",
          "old_text": "m_filterModel->index(0, 0)",
          "new_text": "collapseAll()",
          "old_line_content": "        expand(m_filterModel->index(0, 0));",
          "new_line_content": "        collapseAll();",
          "content_same": false
        },
        {
          "line": 171,
          "old_api": "index",
          "new_api": "rowCount",
          "old_text": "model()->index(i, TorrentContentModelItem::COL_NAME)",
          "new_text": "model()->rowCount()",
          "old_line_content": "        model()->setData(model()->index(i, TorrentContentModelItem::COL_NAME), Qt::Checked, Qt::CheckStateRole);",
          "new_line_content": "    for (int i = 0; i < model()->rowCount(); ++i)",
          "content_same": false
        },
        {
          "line": 177,
          "old_api": "index",
          "new_api": "rowCount",
          "old_text": "model()->index(i, TorrentContentModelItem::COL_NAME)",
          "new_text": "model()->rowCount()",
          "old_line_content": "        model()->setData(model()->index(i, TorrentContentModelItem::COL_NAME), Qt::Unchecked, Qt::CheckStateRole);",
          "new_line_content": "    for (int i = 0; i < model()->rowCount(); ++i)",
          "content_same": false
        },
        {
          "line": 191,
          "old_api": "isValid",
          "new_api": "data",
          "old_text": "value.isValid()",
          "new_text": "currentNameCell().data(Qt::CheckStateRole)",
          "old_line_content": "    if (!value.isValid())",
          "new_line_content": "    const QVariant value = currentNameCell().data(Qt::CheckStateRole);",
          "content_same": false
        },
        {
          "line": 208,
          "old_api": "size",
          "new_api": "selectedRows",
          "old_text": "selectedIndexes.size()",
          "new_text": "selectionModel()->selectedRows(0)",
          "old_line_content": "    if (selectedIndexes.size() != 1)",
          "new_line_content": "    const QModelIndexList selectedIndexes = selectionModel()->selectedRows(0);",
          "content_same": false
        },
        {
          "line": 212,
          "old_api": "isValid",
          "new_api": "first",
          "old_text": "modelIndex.isValid()",
          "new_text": "selectedIndexes.first()",
          "old_line_content": "    if (!modelIndex.isValid())",
          "new_line_content": "    const QPersistentModelIndex modelIndex = selectedIndexes.first();",
          "content_same": false
        },
        {
          "line": 219,
          "old_api": "data",
          "new_api": "tr",
          "old_text": "modelIndex.data().toString()",
          "new_text": "tr(\"New name:\")",
          "old_line_content": "            , modelIndex.data().toString(), &ok, isFile).trimmed();",
          "new_line_content": "    QString newName = AutoExpandableDialog::getText(this, tr(\"Renaming\"), tr(\"New name:\"), QLineEdit::Normal",
          "content_same": false
        },
        {
          "line": 220,
          "old_api": "isValid",
          "new_api": "data",
          "old_text": "modelIndex.isValid()",
          "new_text": "modelIndex.data().toString()",
          "old_line_content": "    if (!ok || !modelIndex.isValid())",
          "new_line_content": "            , modelIndex.data().toString(), &ok, isFile).trimmed();",
          "content_same": false
        },
        {
          "line": 271,
          "old_api": "size",
          "new_api": "selectedRows",
          "old_text": "selectedIndexes.size()",
          "new_text": "selectionModel()->selectedRows(0)",
          "old_line_content": "    if (selectedIndexes.size() != 1)",
          "new_line_content": "    const QModelIndexList selectedIndexes = selectionModel()->selectedRows(0);",
          "content_same": false
        },
        {
          "line": 284,
          "old_api": "isValid",
          "new_api": "currentIndex",
          "old_text": "current.isValid()",
          "new_text": "currentIndex()",
          "old_line_content": "    if (!current.isValid())",
          "new_line_content": "    const QModelIndex current = currentIndex();",
          "content_same": false
        },
        {
          "line": 297,
          "old_api": "setToolTipsVisible",
          "new_api": "setAttribute",
          "old_text": "menu->setToolTipsVisible(true)",
          "new_text": "menu->setAttribute(Qt::WA_DeleteOnClose)",
          "old_line_content": "    menu->setToolTipsVisible(true);",
          "new_line_content": "    menu->setAttribute(Qt::WA_DeleteOnClose);",
          "content_same": false
        },
        {
          "line": 305,
          "old_api": "addAction",
          "new_api": "toString",
          "old_text": "menu->addAction(columnName, this, [this, i](bool checked)\n            {\n                setColumnHidden(i, !checked);\n\n                if (checked && (columnWidth(i) <= 5))\n                    resizeColumnToContents(i);\n\n                emit stateChanged();\n            })",
          "new_text": "model()->headerData(i, Qt::Horizontal, Qt::DisplayRole).toString()",
          "old_line_content": "            QAction *action = menu->addAction(columnName, this, [this, i](bool checked)",
          "new_line_content": "            const auto columnName = model()->headerData(i, Qt::Horizontal, Qt::DisplayRole).toString();",
          "content_same": false
        },
        {
          "line": 310,
          "old_api": "resizeColumnToContents",
          "new_api": "columnWidth",
          "old_text": "resizeColumnToContents(i)",
          "new_text": "columnWidth(i)",
          "old_line_content": "                    resizeColumnToContents(i);",
          "new_line_content": "                if (checked && (columnWidth(i) <= 5))",
          "content_same": false
        },
        {
          "line": 315,
          "old_api": "isColumnHidden",
          "new_api": "setCheckable",
          "old_text": "isColumnHidden(i)",
          "new_text": "action->setCheckable(true)",
          "old_line_content": "            action->setChecked(!isColumnHidden(i));",
          "new_line_content": "            action->setCheckable(true);",
          "content_same": false
        },
        {
          "line": 329,
          "old_api": "resizeColumnToContents",
          "new_api": "isColumnHidden",
          "old_text": "resizeColumnToContents(i)",
          "new_text": "isColumnHidden(i)",
          "old_line_content": "                resizeColumnToContents(i);",
          "new_line_content": "            if (!isColumnHidden(i))",
          "content_same": false
        },
        {
          "line": 342,
          "old_api": "empty",
          "new_api": "selectedRows",
          "old_text": "selectedRows.empty()",
          "new_text": "selectionModel()->selectedRows(0)",
          "old_line_content": "    if (selectedRows.empty())",
          "new_line_content": "    const QModelIndexList selectedRows = selectionModel()->selectedRows(0);",
          "content_same": false
        },
        {
          "line": 355,
          "old_api": "openItem",
          "new_api": "tr",
          "old_text": "openItem(index)",
          "new_text": "tr(\"Open\")",
          "old_line_content": "                            , this, [this, index]() { openItem(index); });",
          "new_line_content": "            menu->addAction(UIThemeManager::instance()->getIcon(u\"folder-documents\"_s), tr(\"Open\")",
          "content_same": false
        },
        {
          "line": 356,
          "old_api": "tr",
          "new_api": "openItem",
          "old_text": "tr(\"Open containing folder\")",
          "new_text": "openItem(index)",
          "old_line_content": "            menu->addAction(UIThemeManager::instance()->getIcon(u\"directory\"_s), tr(\"Open containing folder\")",
          "new_line_content": "                            , this, [this, index]() { openItem(index); });",
          "content_same": false
        },
        {
          "line": 357,
          "old_api": "openParentFolder",
          "new_api": "tr",
          "old_text": "openParentFolder(index)",
          "new_text": "tr(\"Open containing folder\")",
          "old_line_content": "                            , this, [this, index]() { openParentFolder(index); });",
          "new_line_content": "            menu->addAction(UIThemeManager::instance()->getIcon(u\"directory\"_s), tr(\"Open containing folder\")",
          "content_same": false
        },
        {
          "line": 382,
          "old_api": "tr",
          "new_api": "addSeparator",
          "old_text": "tr(\"By shown file order\")",
          "new_text": "subMenu->addSeparator()",
          "old_line_content": "        subMenu->addAction(tr(\"By shown file order\"), this, &TorrentContentWidget::applyPrioritiesByOrder);",
          "new_line_content": "        subMenu->addSeparator();",
          "content_same": false
        },
        {
          "line": 403,
          "old_api": "tr",
          "new_api": "addSeparator",
          "old_text": "tr(\"Priority by shown file order\")",
          "new_text": "menu->addSeparator()",
          "old_line_content": "        menu->addAction(tr(\"Priority by shown file order\"), this, &TorrentContentWidget::applyPrioritiesByOrder);",
          "new_line_content": "        menu->addSeparator();",
          "content_same": false
        },
        {
          "line": 411,
          "old_api": "close",
          "new_api": "setActiveAction",
          "old_text": "menu->close()",
          "new_text": "menu->setActiveAction(nullptr)",
          "old_line_content": "        menu->close();",
          "new_line_content": "        menu->setActiveAction(nullptr);",
          "content_same": false
        },
        {
          "line": 423,
          "old_api": "getFullPath",
          "new_api": "contentHandler",
          "old_text": "getFullPath(index)",
          "new_text": "m_model->contentHandler()->flushCache()",
          "old_line_content": "    Utils::Gui::openPath(getFullPath(index));",
          "new_line_content": "    m_model->contentHandler()->flushCache();  // Flush data",
          "content_same": false
        },
        {
          "line": 429,
          "old_api": "contentHandler",
          "new_api": "getFullPath",
          "old_text": "m_model->contentHandler()->flushCache()",
          "new_text": "getFullPath(index)",
          "old_line_content": "    m_model->contentHandler()->flushCache();  // Flush data",
          "new_line_content": "    const Path path = getFullPath(index);",
          "content_same": false
        },
        {
          "line": 440,
          "old_api": "getFileIndex",
          "new_api": "contentHandler",
          "old_text": "getFileIndex(index)",
          "new_text": "m_model->contentHandler()",
          "old_line_content": "    if (const int fileIdx = getFileIndex(index); fileIdx >= 0)",
          "new_line_content": "    const auto *contentHandler = m_model->contentHandler();",
          "content_same": false
        },
        {
          "line": 454,
          "old_api": "hasMetadata",
          "new_api": "contentHandler",
          "old_text": "contentHandler->hasMetadata()",
          "new_text": "m_model->contentHandler()",
          "old_line_content": "    Q_ASSERT(contentHandler && contentHandler->hasMetadata());",
          "new_line_content": "    const auto *contentHandler = m_model->contentHandler();",
          "content_same": false
        },
        {
          "line": 471,
          "old_api": "setExpanded",
          "new_api": "index",
          "old_text": "setExpanded(currentIndex, true)",
          "new_text": "model()->index(0, 0, currentIndex)",
          "old_line_content": "        setExpanded(currentIndex, true);",
          "new_line_content": "        currentIndex = model()->index(0, 0, currentIndex);",
          "content_same": false
        },
        {
          "line": 481,
          "old_api": "globalPosition",
          "new_api": "accept",
          "old_text": "event->globalPosition()",
          "new_text": "event->accept()",
          "old_line_content": "        QWheelEvent scrollHEvent {event->position(), event->globalPosition()",
          "new_line_content": "        event->accept();",
          "content_same": false
        },
        {
          "line": 482,
          "old_api": "buttons",
          "new_api": "globalPosition",
          "old_text": "event->buttons()",
          "new_text": "event->globalPosition()",
          "old_line_content": "                    , event->pixelDelta(), event->angleDelta().transposed(), event->buttons()",
          "new_line_content": "        QWheelEvent scrollHEvent {event->position(), event->globalPosition()",
          "content_same": false
        },
        {
          "line": 483,
          "old_api": "source",
          "new_api": "buttons",
          "old_text": "event->source()",
          "new_text": "event->buttons()",
          "old_line_content": "                    , event->modifiers(), event->phase(), event->inverted(), event->source()};",
          "new_line_content": "                    , event->pixelDelta(), event->angleDelta().transposed(), event->buttons()",
          "content_same": false
        },
        {
          "line": 484,
          "old_api": "QTreeView::wheelEvent(&scrollHEvent)",
          "new_api": "source",
          "old_text": "QTreeView::wheelEvent(&scrollHEvent)",
          "new_text": "event->source()",
          "old_line_content": "        QTreeView::wheelEvent(&scrollHEvent);",
          "new_line_content": "                    , event->modifiers(), event->phase(), event->inverted(), event->source()};",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 67,
          "old_api": null,
          "new_api": "setContextMenuPolicy",
          "old_text": null,
          "new_text": "header()->setContextMenuPolicy(Qt::CustomContextMenu)",
          "old_line_content": "",
          "new_line_content": "    header()->setContextMenuPolicy(Qt::CustomContextMenu);",
          "content_same": false
        },
        {
          "line": 70,
          "old_api": null,
          "new_api": "connect",
          "old_text": null,
          "new_text": "connect(m_model, &TorrentContentModel::renameFailed, this, [this](const QString &errorMessage)\n    {\n        RaisedMessageBox::warning(this, tr(\"Rename error\"), errorMessage, QMessageBox::Ok);\n    })",
          "old_line_content": "    {",
          "new_line_content": "    connect(m_model, &TorrentContentModel::renameFailed, this, [this](const QString &errorMessage)",
          "content_same": false
        },
        {
          "line": 72,
          "old_api": null,
          "new_api": "tr",
          "old_text": null,
          "new_text": "tr(\"Rename error\")",
          "old_line_content": "    });",
          "new_line_content": "        RaisedMessageBox::warning(this, tr(\"Rename error\"), errorMessage, QMessageBox::Ok);",
          "content_same": false
        },
        {
          "line": 77,
          "old_api": null,
          "new_api": "QTreeView::setModel(m_filterModel)",
          "old_text": null,
          "new_text": "QTreeView::setModel(m_filterModel)",
          "old_line_content": "",
          "new_line_content": "    QTreeView::setModel(m_filterModel);",
          "content_same": false
        },
        {
          "line": 80,
          "old_api": null,
          "new_api": "setItemDelegate",
          "old_text": null,
          "new_text": "setItemDelegate(itemDelegate)",
          "old_line_content": "",
          "new_line_content": "    setItemDelegate(itemDelegate);",
          "content_same": false
        },
        {
          "line": 88,
          "old_api": null,
          "new_api": "header",
          "old_text": null,
          "new_text": "header()",
          "old_line_content": "",
          "new_line_content": "    connect(header(), &QHeaderView::sortIndicatorChanged, this, &TorrentContentWidget::stateChanged);",
          "content_same": false
        },
        {
          "line": 91,
          "old_api": null,
          "new_api": "connect",
          "old_text": null,
          "new_text": "connect(renameFileHotkey, &QShortcut::activated, this, &TorrentContentWidget::renameSelectedFile)",
          "old_line_content": "    const auto *openFileHotkeyReturn = new QShortcut(Qt::Key_Return, this, nullptr, nullptr, Qt::WidgetShortcut);",
          "new_line_content": "    connect(renameFileHotkey, &QShortcut::activated, this, &TorrentContentWidget::renameSelectedFile);",
          "content_same": false
        },
        {
          "line": 93,
          "old_api": null,
          "new_api": "connect",
          "old_text": null,
          "new_text": "connect(openFileHotkeyReturn, &QShortcut::activated, this, &TorrentContentWidget::openSelectedFile)",
          "old_line_content": "    const auto *openFileHotkeyEnter = new QShortcut(Qt::Key_Enter, this, nullptr, nullptr, Qt::WidgetShortcut);",
          "new_line_content": "    connect(openFileHotkeyReturn, &QShortcut::activated, this, &TorrentContentWidget::openSelectedFile);",
          "content_same": false
        },
        {
          "line": 95,
          "old_api": null,
          "new_api": "connect",
          "old_text": null,
          "new_text": "connect(openFileHotkeyEnter, &QShortcut::activated, this, &TorrentContentWidget::openSelectedFile)",
          "old_line_content": "",
          "new_line_content": "    connect(openFileHotkeyEnter, &QShortcut::activated, this, &TorrentContentWidget::openSelectedFile);",
          "content_same": false
        },
        {
          "line": 97,
          "old_api": null,
          "new_api": "model",
          "old_text": null,
          "new_text": "model()",
          "old_line_content": "}",
          "new_line_content": "    connect(model(), &QAbstractItemModel::modelReset, this, &TorrentContentWidget::expandRecursively);",
          "content_same": false
        },
        {
          "line": 102,
          "old_api": null,
          "new_api": "setContentHandler",
          "old_text": null,
          "new_text": "m_model->setContentHandler(contentHandler)",
          "old_line_content": "    if (!contentHandler)",
          "new_line_content": "    m_model->setContentHandler(contentHandler);",
          "content_same": false
        },
        {
          "line": 106,
          "old_api": null,
          "new_api": "expandRecursively",
          "old_text": null,
          "new_text": "expandRecursively()",
          "old_line_content": "}",
          "new_line_content": "    expandRecursively();",
          "content_same": false
        },
        {
          "line": 111,
          "old_api": null,
          "new_api": "contentHandler",
          "old_text": null,
          "new_text": "m_model->contentHandler()",
          "old_line_content": "}",
          "new_line_content": "    return m_model->contentHandler();",
          "content_same": false
        },
        {
          "line": 118,
          "old_api": null,
          "new_api": "setUpdatesEnabled",
          "old_text": null,
          "new_text": "setUpdatesEnabled(true)",
          "old_line_content": "}",
          "new_line_content": "    setUpdatesEnabled(true);",
          "content_same": false
        },
        {
          "line": 143,
          "old_api": null,
          "new_api": "getFileIndex",
          "old_text": null,
          "new_text": "m_filterModel->getFileIndex(index)",
          "old_line_content": "}",
          "new_line_content": "    return m_filterModel->getFileIndex(index);",
          "content_same": false
        },
        {
          "line": 150,
          "old_api": null,
          "new_api": "data",
          "old_text": null,
          "new_text": "i.data().toString()",
          "old_line_content": "    return path;",
          "new_line_content": "        path = Path(i.data().toString()) / path;",
          "content_same": false
        },
        {
          "line": 158,
          "old_api": null,
          "new_api": "isEmpty",
          "old_text": null,
          "new_text": "patternText.isEmpty()",
          "old_line_content": "    {",
          "new_line_content": "    if (patternText.isEmpty())",
          "content_same": false
        },
        {
          "line": 161,
          "old_api": null,
          "new_api": "index",
          "old_text": null,
          "new_text": "m_filterModel->index(0, 0)",
          "old_line_content": "    }",
          "new_line_content": "        expand(m_filterModel->index(0, 0));",
          "content_same": false
        },
        {
          "line": 165,
          "old_api": null,
          "new_api": "expandAll",
          "old_text": null,
          "new_text": "expandAll()",
          "old_line_content": "    }",
          "new_line_content": "        expandAll();",
          "content_same": false
        },
        {
          "line": 172,
          "old_api": null,
          "new_api": "index",
          "old_text": null,
          "new_text": "model()->index(i, TorrentContentModelItem::COL_NAME)",
          "old_line_content": "}",
          "new_line_content": "        model()->setData(model()->index(i, TorrentContentModelItem::COL_NAME), Qt::Checked, Qt::CheckStateRole);",
          "content_same": false
        },
        {
          "line": 178,
          "old_api": null,
          "new_api": "index",
          "old_text": null,
          "new_text": "model()->index(i, TorrentContentModelItem::COL_NAME)",
          "old_line_content": "}",
          "new_line_content": "        model()->setData(model()->index(i, TorrentContentModelItem::COL_NAME), Qt::Unchecked, Qt::CheckStateRole);",
          "content_same": false
        },
        {
          "line": 183,
          "old_api": null,
          "new_api": "key",
          "old_text": null,
          "new_text": "event->key()",
          "old_line_content": "    {",
          "new_line_content": "    if ((event->key() != Qt::Key_Space) && (event->key() != Qt::Key_Select))",
          "content_same": false
        },
        {
          "line": 185,
          "old_api": null,
          "new_api": "QTreeView::keyPressEvent(event)",
          "old_text": null,
          "new_text": "QTreeView::keyPressEvent(event)",
          "old_line_content": "        return;",
          "new_line_content": "        QTreeView::keyPressEvent(event);",
          "content_same": false
        },
        {
          "line": 189,
          "old_api": null,
          "new_api": "accept",
          "old_text": null,
          "new_text": "event->accept()",
          "old_line_content": "",
          "new_line_content": "    event->accept();",
          "content_same": false
        },
        {
          "line": 192,
          "old_api": null,
          "new_api": "isValid",
          "old_text": null,
          "new_text": "value.isValid()",
          "old_line_content": "    {",
          "new_line_content": "    if (!value.isValid())",
          "content_same": false
        },
        {
          "line": 194,
          "old_api": null,
          "new_api": "Q_ASSERT",
          "old_text": null,
          "new_text": "Q_ASSERT(false)",
          "old_line_content": "        return;",
          "new_line_content": "        Q_ASSERT(false);",
          "content_same": false
        },
        {
          "line": 198,
          "old_api": null,
          "new_api": "toInt",
          "old_text": null,
          "new_text": "value.toInt()",
          "old_line_content": "                                 ? Qt::Unchecked : Qt::Checked;",
          "new_line_content": "    const Qt::CheckState state = (static_cast<Qt::CheckState>(value.toInt()) == Qt::Checked)",
          "content_same": false
        },
        {
          "line": 200,
          "old_api": null,
          "new_api": "selectedRows",
          "old_text": null,
          "new_text": "selectionModel()->selectedRows(TorrentContentModelItem::COL_NAME)",
          "old_line_content": "",
          "new_line_content": "    const QModelIndexList selection = selectionModel()->selectedRows(TorrentContentModelItem::COL_NAME);",
          "content_same": false
        },
        {
          "line": 203,
          "old_api": null,
          "new_api": "setData",
          "old_text": null,
          "new_text": "model()->setData(index, state, Qt::CheckStateRole)",
          "old_line_content": "}",
          "new_line_content": "        model()->setData(index, state, Qt::CheckStateRole);",
          "content_same": false
        },
        {
          "line": 209,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "selectedIndexes.size()",
          "old_line_content": "        return;",
          "new_line_content": "    if (selectedIndexes.size() != 1)",
          "content_same": false
        },
        {
          "line": 213,
          "old_api": null,
          "new_api": "isValid",
          "old_text": null,
          "new_text": "modelIndex.isValid()",
          "old_line_content": "        return;",
          "new_line_content": "    if (!modelIndex.isValid())",
          "content_same": false
        },
        {
          "line": 217,
          "old_api": null,
          "new_api": "itemType",
          "old_text": null,
          "new_text": "m_filterModel->itemType(modelIndex)",
          "old_line_content": "    bool ok = false;",
          "new_line_content": "    const bool isFile = (m_filterModel->itemType(modelIndex) == TorrentContentModelItem::FileType);",
          "content_same": false
        },
        {
          "line": 221,
          "old_api": null,
          "new_api": "isValid",
          "old_text": null,
          "new_text": "modelIndex.isValid()",
          "old_line_content": "        return;",
          "new_line_content": "    if (!ok || !modelIndex.isValid())",
          "content_same": false
        },
        {
          "line": 224,
          "old_api": null,
          "new_api": "setData",
          "old_text": null,
          "new_text": "model()->setData(modelIndex, newName)",
          "old_line_content": "}",
          "new_line_content": "    model()->setData(modelIndex, newName);",
          "content_same": false
        },
        {
          "line": 229,
          "old_api": null,
          "new_api": "selectedRows",
          "old_text": null,
          "new_text": "selectionModel()->selectedRows(0)",
          "old_line_content": "    for (const QModelIndex &index : selectedRows)",
          "new_line_content": "    const QModelIndexList selectedRows = selectionModel()->selectedRows(0);",
          "content_same": false
        },
        {
          "line": 232,
          "old_api": null,
          "new_api": "static_cast<int>(priority)",
          "old_text": null,
          "new_text": "static_cast<int>(priority)",
          "old_line_content": "    }",
          "new_line_content": "        model()->setData(index.sibling(index.row(), Priority), static_cast<int>(priority));",
          "content_same": false
        },
        {
          "line": 242,
          "old_api": null,
          "new_api": "selectedRows",
          "old_text": null,
          "new_text": "selectionModel()->selectedRows(0)",
          "old_line_content": "",
          "new_line_content": "    const QModelIndexList selectedRows = selectionModel()->selectedRows(0);",
          "content_same": false
        },
        {
          "line": 245,
          "old_api": null,
          "new_api": "length",
          "old_text": null,
          "new_text": "selectedRows.length()",
          "old_line_content": "",
          "new_line_content": "    const auto priorityGroupSize = std::max<qsizetype>((selectedRows.length() / priorityGroups), 1);",
          "content_same": false
        },
        {
          "line": 247,
          "old_api": null,
          "new_api": "length",
          "old_text": null,
          "new_text": "selectedRows.length()",
          "old_line_content": "    {",
          "new_line_content": "    for (qsizetype i = 0; i < selectedRows.length(); ++i)",
          "content_same": false
        },
        {
          "line": 265,
          "old_api": null,
          "new_api": "static_cast<int>(priority)",
          "old_text": null,
          "new_text": "static_cast<int>(priority)",
          "old_line_content": "    }",
          "new_line_content": "        model()->setData(index.sibling(index.row(), Priority), static_cast<int>(priority));",
          "content_same": false
        },
        {
          "line": 272,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "selectedIndexes.size()",
          "old_line_content": "        return;",
          "new_line_content": "    if (selectedIndexes.size() != 1)",
          "content_same": false
        },
        {
          "line": 274,
          "old_api": null,
          "new_api": "first",
          "old_text": null,
          "new_text": "selectedIndexes.first()",
          "old_line_content": "}",
          "new_line_content": "    openItem(selectedIndexes.first());",
          "content_same": false
        },
        {
          "line": 277,
          "old_api": null,
          "new_api": "maybe_unused",
          "old_text": null,
          "new_text": "maybe_unused",
          "old_line_content": "{",
          "new_line_content": "void TorrentContentWidget::setModel([[maybe_unused]] QAbstractItemModel *model)",
          "content_same": false
        },
        {
          "line": 279,
          "old_api": null,
          "new_api": "Q_ASSERT_X",
          "old_text": null,
          "new_text": "Q_ASSERT_X(false, Q_FUNC_INFO, \"Changing the model of TorrentContentWidget is not allowed.\")",
          "old_line_content": "}",
          "new_line_content": "    Q_ASSERT_X(false, Q_FUNC_INFO, \"Changing the model of TorrentContentWidget is not allowed.\");",
          "content_same": false
        },
        {
          "line": 285,
          "old_api": null,
          "new_api": "isValid",
          "old_text": null,
          "new_text": "current.isValid()",
          "old_line_content": "    {",
          "new_line_content": "    if (!current.isValid())",
          "content_same": false
        },
        {
          "line": 287,
          "old_api": null,
          "new_api": "Q_ASSERT",
          "old_text": null,
          "new_text": "Q_ASSERT(false)",
          "old_line_content": "        return {};",
          "new_line_content": "        Q_ASSERT(false);",
          "content_same": false
        },
        {
          "line": 291,
          "old_api": null,
          "new_api": "siblingAtColumn",
          "old_text": null,
          "new_text": "current.siblingAtColumn(TorrentContentModelItem::COL_NAME)",
          "old_line_content": "}",
          "new_line_content": "    return current.siblingAtColumn(TorrentContentModelItem::COL_NAME);",
          "content_same": false
        },
        {
          "line": 298,
          "old_api": null,
          "new_api": "setToolTipsVisible",
          "old_text": null,
          "new_text": "menu->setToolTipsVisible(true)",
          "old_line_content": "",
          "new_line_content": "    menu->setToolTipsVisible(true);",
          "content_same": false
        },
        {
          "line": 302,
          "old_api": null,
          "new_api": "tr",
          "old_text": null,
          "new_text": "tr(\"Column visibility\")",
          "old_line_content": "        for (int i = 0; i < TorrentContentModelItem::NB_COL; ++i)",
          "new_line_content": "        menu->setTitle(tr(\"Column visibility\"));",
          "content_same": false
        },
        {
          "line": 306,
          "old_api": null,
          "new_api": "addAction",
          "old_text": null,
          "new_text": "menu->addAction(columnName, this, [this, i](bool checked)\n            {\n                setColumnHidden(i, !checked);\n\n                if (checked && (columnWidth(i) <= 5))\n                    resizeColumnToContents(i);\n\n                emit stateChanged();\n            })",
          "old_line_content": "            {",
          "new_line_content": "            QAction *action = menu->addAction(columnName, this, [this, i](bool checked)",
          "content_same": false
        },
        {
          "line": 308,
          "old_api": null,
          "new_api": "setColumnHidden",
          "old_text": null,
          "new_text": "setColumnHidden(i, !checked)",
          "old_line_content": "",
          "new_line_content": "                setColumnHidden(i, !checked);",
          "content_same": false
        },
        {
          "line": 311,
          "old_api": null,
          "new_api": "resizeColumnToContents",
          "old_text": null,
          "new_text": "resizeColumnToContents(i)",
          "old_line_content": "",
          "new_line_content": "                    resizeColumnToContents(i);",
          "content_same": false
        },
        {
          "line": 316,
          "old_api": null,
          "new_api": "isColumnHidden",
          "old_text": null,
          "new_text": "isColumnHidden(i)",
          "old_line_content": "",
          "new_line_content": "            action->setChecked(!isColumnHidden(i));",
          "content_same": false
        },
        {
          "line": 319,
          "old_api": null,
          "new_api": "setEnabled",
          "old_text": null,
          "new_text": "action->setEnabled(false)",
          "old_line_content": "        }",
          "new_line_content": "                action->setEnabled(false);",
          "content_same": false
        },
        {
          "line": 322,
          "old_api": null,
          "new_api": "addSeparator",
          "old_text": null,
          "new_text": "menu->addSeparator()",
          "old_line_content": "    }",
          "new_line_content": "        menu->addSeparator();",
          "content_same": false
        },
        {
          "line": 325,
          "old_api": null,
          "new_api": "tr",
          "old_text": null,
          "new_text": "tr(\"Resize columns\")",
          "old_line_content": "    {",
          "new_line_content": "    QAction *resizeAction = menu->addAction(tr(\"Resize columns\"), this, [this]()",
          "content_same": false
        },
        {
          "line": 327,
          "old_api": null,
          "new_api": "count",
          "old_text": null,
          "new_text": "header()->count()",
          "old_line_content": "        {",
          "new_line_content": "        for (int i = 0, count = header()->count(); i < count; ++i)",
          "content_same": false
        },
        {
          "line": 330,
          "old_api": null,
          "new_api": "resizeColumnToContents",
          "old_text": null,
          "new_text": "resizeColumnToContents(i)",
          "old_line_content": "        }",
          "new_line_content": "                resizeColumnToContents(i);",
          "content_same": false
        },
        {
          "line": 335,
          "old_api": null,
          "new_api": "tr",
          "old_text": null,
          "new_text": "tr(\"Resize all non-hidden columns to the size of their contents\")",
          "old_line_content": "",
          "new_line_content": "    resizeAction->setToolTip(tr(\"Resize all non-hidden columns to the size of their contents\"));",
          "content_same": false
        },
        {
          "line": 337,
          "old_api": null,
          "new_api": "QCursor::pos()",
          "old_text": null,
          "new_text": "QCursor::pos()",
          "old_line_content": "}",
          "new_line_content": "    menu->popup(QCursor::pos());",
          "content_same": false
        },
        {
          "line": 343,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "selectedRows.empty()",
          "old_line_content": "        return;",
          "new_line_content": "    if (selectedRows.empty())",
          "content_same": false
        },
        {
          "line": 347,
          "old_api": null,
          "new_api": "setAttribute",
          "old_text": null,
          "new_text": "menu->setAttribute(Qt::WA_DeleteOnClose)",
          "old_line_content": "",
          "new_line_content": "    menu->setAttribute(Qt::WA_DeleteOnClose);",
          "content_same": false
        },
        {
          "line": 349,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "selectedRows.size()",
          "old_line_content": "    {",
          "new_line_content": "    if (selectedRows.size() == 1)",
          "content_same": false
        },
        {
          "line": 353,
          "old_api": null,
          "new_api": "isEmpty",
          "old_text": null,
          "new_text": "contentHandler()->actualStorageLocation().isEmpty()",
          "old_line_content": "        {",
          "new_line_content": "        if (!contentHandler()->actualStorageLocation().isEmpty())",
          "content_same": false
        },
        {
          "line": 358,
          "old_api": null,
          "new_api": "openParentFolder",
          "old_text": null,
          "new_text": "openParentFolder(index)",
          "old_line_content": "        }",
          "new_line_content": "                            , this, [this, index]() { openParentFolder(index); });",
          "content_same": false
        },
        {
          "line": 360,
          "old_api": null,
          "new_api": "tr",
          "old_text": null,
          "new_text": "tr(\"Rename...\")",
          "old_line_content": "                        , this, &TorrentContentWidget::renameSelectedFile);",
          "new_line_content": "        menu->addAction(UIThemeManager::instance()->getIcon(u\"edit-rename\"_s), tr(\"Rename...\")",
          "content_same": false
        },
        {
          "line": 362,
          "old_api": null,
          "new_api": "addSeparator",
          "old_text": null,
          "new_text": "menu->addSeparator()",
          "old_line_content": "",
          "new_line_content": "        menu->addSeparator();",
          "content_same": false
        },
        {
          "line": 364,
          "old_api": null,
          "new_api": "tr",
          "old_text": null,
          "new_text": "tr(\"Priority\")",
          "old_line_content": "",
          "new_line_content": "        QMenu *subMenu = menu->addMenu(tr(\"Priority\"));",
          "content_same": false
        },
        {
          "line": 366,
          "old_api": null,
          "new_api": "tr",
          "old_text": null,
          "new_text": "tr(\"Do not download\")",
          "old_line_content": "        {",
          "new_line_content": "        subMenu->addAction(tr(\"Do not download\"), this, [this]",
          "content_same": false
        },
        {
          "line": 368,
          "old_api": null,
          "new_api": "applyPriorities",
          "old_text": null,
          "new_text": "applyPriorities(BitTorrent::DownloadPriority::Ignored)",
          "old_line_content": "        });",
          "new_line_content": "            applyPriorities(BitTorrent::DownloadPriority::Ignored);",
          "content_same": false
        },
        {
          "line": 370,
          "old_api": null,
          "new_api": "tr",
          "old_text": null,
          "new_text": "tr(\"Normal\")",
          "old_line_content": "        {",
          "new_line_content": "        subMenu->addAction(tr(\"Normal\"), this, [this]",
          "content_same": false
        },
        {
          "line": 372,
          "old_api": null,
          "new_api": "applyPriorities",
          "old_text": null,
          "new_text": "applyPriorities(BitTorrent::DownloadPriority::Normal)",
          "old_line_content": "        });",
          "new_line_content": "            applyPriorities(BitTorrent::DownloadPriority::Normal);",
          "content_same": false
        },
        {
          "line": 374,
          "old_api": null,
          "new_api": "tr",
          "old_text": null,
          "new_text": "tr(\"High\")",
          "old_line_content": "        {",
          "new_line_content": "        subMenu->addAction(tr(\"High\"), this, [this]",
          "content_same": false
        },
        {
          "line": 376,
          "old_api": null,
          "new_api": "applyPriorities",
          "old_text": null,
          "new_text": "applyPriorities(BitTorrent::DownloadPriority::High)",
          "old_line_content": "        });",
          "new_line_content": "            applyPriorities(BitTorrent::DownloadPriority::High);",
          "content_same": false
        },
        {
          "line": 378,
          "old_api": null,
          "new_api": "tr",
          "old_text": null,
          "new_text": "tr(\"Maximum\")",
          "old_line_content": "        {",
          "new_line_content": "        subMenu->addAction(tr(\"Maximum\"), this, [this]",
          "content_same": false
        },
        {
          "line": 380,
          "old_api": null,
          "new_api": "applyPriorities",
          "old_text": null,
          "new_text": "applyPriorities(BitTorrent::DownloadPriority::Maximum)",
          "old_line_content": "        });",
          "new_line_content": "            applyPriorities(BitTorrent::DownloadPriority::Maximum);",
          "content_same": false
        },
        {
          "line": 383,
          "old_api": null,
          "new_api": "tr",
          "old_text": null,
          "new_text": "tr(\"By shown file order\")",
          "old_line_content": "    }",
          "new_line_content": "        subMenu->addAction(tr(\"By shown file order\"), this, &TorrentContentWidget::applyPrioritiesByOrder);",
          "content_same": false
        },
        {
          "line": 387,
          "old_api": null,
          "new_api": "tr",
          "old_text": null,
          "new_text": "tr(\"Do not download\")",
          "old_line_content": "        {",
          "new_line_content": "        menu->addAction(tr(\"Do not download\"), this, [this]",
          "content_same": false
        },
        {
          "line": 389,
          "old_api": null,
          "new_api": "applyPriorities",
          "old_text": null,
          "new_text": "applyPriorities(BitTorrent::DownloadPriority::Ignored)",
          "old_line_content": "        });",
          "new_line_content": "            applyPriorities(BitTorrent::DownloadPriority::Ignored);",
          "content_same": false
        },
        {
          "line": 391,
          "old_api": null,
          "new_api": "tr",
          "old_text": null,
          "new_text": "tr(\"Normal priority\")",
          "old_line_content": "        {",
          "new_line_content": "        menu->addAction(tr(\"Normal priority\"), this, [this]",
          "content_same": false
        },
        {
          "line": 393,
          "old_api": null,
          "new_api": "applyPriorities",
          "old_text": null,
          "new_text": "applyPriorities(BitTorrent::DownloadPriority::Normal)",
          "old_line_content": "        });",
          "new_line_content": "            applyPriorities(BitTorrent::DownloadPriority::Normal);",
          "content_same": false
        },
        {
          "line": 395,
          "old_api": null,
          "new_api": "tr",
          "old_text": null,
          "new_text": "tr(\"High priority\")",
          "old_line_content": "        {",
          "new_line_content": "        menu->addAction(tr(\"High priority\"), this, [this]",
          "content_same": false
        },
        {
          "line": 397,
          "old_api": null,
          "new_api": "applyPriorities",
          "old_text": null,
          "new_text": "applyPriorities(BitTorrent::DownloadPriority::High)",
          "old_line_content": "        });",
          "new_line_content": "            applyPriorities(BitTorrent::DownloadPriority::High);",
          "content_same": false
        },
        {
          "line": 399,
          "old_api": null,
          "new_api": "tr",
          "old_text": null,
          "new_text": "tr(\"Maximum priority\")",
          "old_line_content": "        {",
          "new_line_content": "        menu->addAction(tr(\"Maximum priority\"), this, [this]",
          "content_same": false
        },
        {
          "line": 401,
          "old_api": null,
          "new_api": "applyPriorities",
          "old_text": null,
          "new_text": "applyPriorities(BitTorrent::DownloadPriority::Maximum)",
          "old_line_content": "        });",
          "new_line_content": "            applyPriorities(BitTorrent::DownloadPriority::Maximum);",
          "content_same": false
        },
        {
          "line": 404,
          "old_api": null,
          "new_api": "tr",
          "old_text": null,
          "new_text": "tr(\"Priority by shown file order\")",
          "old_line_content": "    }",
          "new_line_content": "        menu->addAction(tr(\"Priority by shown file order\"), this, &TorrentContentWidget::applyPrioritiesByOrder);",
          "content_same": false
        },
        {
          "line": 409,
          "old_api": null,
          "new_api": "model",
          "old_text": null,
          "new_text": "model()",
          "old_line_content": "    {",
          "new_line_content": "    connect(model(), &QAbstractItemModel::modelAboutToBeReset, menu, [menu]()",
          "content_same": false
        },
        {
          "line": 412,
          "old_api": null,
          "new_api": "close",
          "old_text": null,
          "new_text": "menu->close()",
          "old_line_content": "    });",
          "new_line_content": "        menu->close();",
          "content_same": false
        },
        {
          "line": 415,
          "old_api": null,
          "new_api": "QCursor::pos()",
          "old_text": null,
          "new_text": "QCursor::pos()",
          "old_line_content": "}",
          "new_line_content": "    menu->popup(QCursor::pos());",
          "content_same": false
        },
        {
          "line": 420,
          "old_api": null,
          "new_api": "isValid",
          "old_text": null,
          "new_text": "index.isValid()",
          "old_line_content": "        return;",
          "new_line_content": "    if (!index.isValid())",
          "content_same": false
        },
        {
          "line": 424,
          "old_api": null,
          "new_api": "getFullPath",
          "old_text": null,
          "new_text": "getFullPath(index)",
          "old_line_content": "}",
          "new_line_content": "    Utils::Gui::openPath(getFullPath(index));",
          "content_same": false
        },
        {
          "line": 430,
          "old_api": null,
          "new_api": "contentHandler",
          "old_text": null,
          "new_text": "m_model->contentHandler()->flushCache()",
          "old_line_content": "#ifdef Q_OS_MACOS",
          "new_line_content": "    m_model->contentHandler()->flushCache();  // Flush data",
          "content_same": false
        },
        {
          "line": 432,
          "old_api": null,
          "new_api": "MacUtils::openFiles({path})",
          "old_text": null,
          "new_text": "MacUtils::openFiles({path})",
          "old_line_content": "#else",
          "new_line_content": "    MacUtils::openFiles({path});",
          "content_same": false
        },
        {
          "line": 434,
          "old_api": null,
          "new_api": "Utils::Gui::openFolderSelect(path)",
          "old_text": null,
          "new_text": "Utils::Gui::openFolderSelect(path)",
          "old_line_content": "#endif",
          "new_line_content": "    Utils::Gui::openFolderSelect(path);",
          "content_same": false
        },
        {
          "line": 441,
          "old_api": null,
          "new_api": "getFileIndex",
          "old_text": null,
          "new_text": "getFileIndex(index)",
          "old_line_content": "    {",
          "new_line_content": "    if (const int fileIdx = getFileIndex(index); fileIdx >= 0)",
          "content_same": false
        },
        {
          "line": 443,
          "old_api": null,
          "new_api": "actualFilePath",
          "old_text": null,
          "new_text": "contentHandler->actualFilePath(fileIdx)",
          "old_line_content": "        return fullPath;",
          "new_line_content": "        const Path fullPath = contentHandler->actualStorageLocation() / contentHandler->actualFilePath(fileIdx);",
          "content_same": false
        },
        {
          "line": 448,
          "old_api": null,
          "new_api": "getItemPath",
          "old_text": null,
          "new_text": "getItemPath(index)",
          "old_line_content": "    return fullPath;",
          "new_line_content": "    const Path fullPath = contentHandler->actualStorageLocation() / getItemPath(index);",
          "content_same": false
        },
        {
          "line": 455,
          "old_api": null,
          "new_api": "hasMetadata",
          "old_text": null,
          "new_text": "contentHandler->hasMetadata()",
          "old_line_content": "",
          "new_line_content": "    Q_ASSERT(contentHandler && contentHandler->hasMetadata());",
          "content_same": false
        },
        {
          "line": 457,
          "old_api": null,
          "new_api": "hasMetadata",
          "old_text": null,
          "new_text": "contentHandler->hasMetadata()",
          "old_line_content": "        return;",
          "new_line_content": "    if (Q_UNLIKELY(!contentHandler || !contentHandler->hasMetadata()))",
          "content_same": false
        },
        {
          "line": 461,
          "old_api": null,
          "new_api": "renameSelectedFile",
          "old_text": null,
          "new_text": "renameSelectedFile()",
          "old_line_content": "    else",
          "new_line_content": "        renameSelectedFile();",
          "content_same": false
        },
        {
          "line": 463,
          "old_api": null,
          "new_api": "openItem",
          "old_text": null,
          "new_text": "openItem(index)",
          "old_line_content": "}",
          "new_line_content": "        openItem(index);",
          "content_same": false
        },
        {
          "line": 469,
          "old_api": null,
          "new_api": "rowCount",
          "old_text": null,
          "new_text": "model()->rowCount(currentIndex)",
          "old_line_content": "    {",
          "new_line_content": "    while (model()->rowCount(currentIndex) == 1)",
          "content_same": false
        },
        {
          "line": 472,
          "old_api": null,
          "new_api": "setExpanded",
          "old_text": null,
          "new_text": "setExpanded(currentIndex, true)",
          "old_line_content": "    }",
          "new_line_content": "        setExpanded(currentIndex, true);",
          "content_same": false
        },
        {
          "line": 478,
          "old_api": null,
          "new_api": "modifiers",
          "old_text": null,
          "new_text": "event->modifiers()",
          "old_line_content": "    {",
          "new_line_content": "    if (event->modifiers() & Qt::ShiftModifier)",
          "content_same": false
        },
        {
          "line": 485,
          "old_api": null,
          "new_api": "QTreeView::wheelEvent(&scrollHEvent)",
          "old_text": null,
          "new_text": "QTreeView::wheelEvent(&scrollHEvent)",
          "old_line_content": "        return;",
          "new_line_content": "        QTreeView::wheelEvent(&scrollHEvent);",
          "content_same": false
        },
        {
          "line": 489,
          "old_api": null,
          "new_api": "QTreeView::wheelEvent(event)",
          "old_text": null,
          "new_text": "QTreeView::wheelEvent(event)",
          "old_line_content": "}",
          "new_line_content": "    QTreeView::wheelEvent(event);  // event delegated to base class",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 69,
          "old_api": "connect",
          "new_api": null,
          "old_text": "connect(m_model, &TorrentContentModel::renameFailed, this, [this](const QString &errorMessage)\n    {\n        RaisedMessageBox::warning(this, tr(\"Rename error\"), errorMessage, QMessageBox::Ok);\n    })",
          "new_text": null,
          "old_line_content": "    connect(m_model, &TorrentContentModel::renameFailed, this, [this](const QString &errorMessage)",
          "new_line_content": "    m_model = new TorrentContentModel(this);",
          "content_same": false
        },
        {
          "line": 71,
          "old_api": "tr",
          "new_api": null,
          "old_text": "tr(\"Rename error\")",
          "new_text": null,
          "old_line_content": "        RaisedMessageBox::warning(this, tr(\"Rename error\"), errorMessage, QMessageBox::Ok);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 75,
          "old_api": "setSourceModel",
          "new_api": null,
          "old_text": "m_filterModel->setSourceModel(m_model)",
          "new_text": null,
          "old_line_content": "    m_filterModel->setSourceModel(m_model);",
          "new_line_content": "    m_filterModel = new TorrentContentFilterModel(this);",
          "content_same": false
        },
        {
          "line": 79,
          "old_api": "setItemDelegate",
          "new_api": null,
          "old_text": "setItemDelegate(itemDelegate)",
          "new_text": null,
          "old_line_content": "    setItemDelegate(itemDelegate);",
          "new_line_content": "    auto *itemDelegate = new TorrentContentItemDelegate(this);",
          "content_same": false
        },
        {
          "line": 81,
          "old_api": "qOverload<const QModelIndex &>(&QAbstractItemView::edit)",
          "new_api": null,
          "old_text": "qOverload<const QModelIndex &>(&QAbstractItemView::edit)",
          "new_text": null,
          "old_line_content": "    connect(this, &QAbstractItemView::clicked, this, qOverload<const QModelIndex &>(&QAbstractItemView::edit));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 90,
          "old_api": "connect",
          "new_api": null,
          "old_text": "connect(renameFileHotkey, &QShortcut::activated, this, &TorrentContentWidget::renameSelectedFile)",
          "new_text": null,
          "old_line_content": "    connect(renameFileHotkey, &QShortcut::activated, this, &TorrentContentWidget::renameSelectedFile);",
          "new_line_content": "    const auto *renameFileHotkey = new QShortcut(Qt::Key_F2, this, nullptr, nullptr, Qt::WidgetShortcut);",
          "content_same": false
        },
        {
          "line": 92,
          "old_api": "connect",
          "new_api": null,
          "old_text": "connect(openFileHotkeyReturn, &QShortcut::activated, this, &TorrentContentWidget::openSelectedFile)",
          "new_text": null,
          "old_line_content": "    connect(openFileHotkeyReturn, &QShortcut::activated, this, &TorrentContentWidget::openSelectedFile);",
          "new_line_content": "    const auto *openFileHotkeyReturn = new QShortcut(Qt::Key_Return, this, nullptr, nullptr, Qt::WidgetShortcut);",
          "content_same": false
        },
        {
          "line": 94,
          "old_api": "connect",
          "new_api": null,
          "old_text": "connect(openFileHotkeyEnter, &QShortcut::activated, this, &TorrentContentWidget::openSelectedFile)",
          "new_text": null,
          "old_line_content": "    connect(openFileHotkeyEnter, &QShortcut::activated, this, &TorrentContentWidget::openSelectedFile);",
          "new_line_content": "    const auto *openFileHotkeyEnter = new QShortcut(Qt::Key_Enter, this, nullptr, nullptr, Qt::WidgetShortcut);",
          "content_same": false
        },
        {
          "line": 96,
          "old_api": "model",
          "new_api": null,
          "old_text": "model()",
          "new_text": null,
          "old_line_content": "    connect(model(), &QAbstractItemModel::modelReset, this, &TorrentContentWidget::expandRecursively);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 101,
          "old_api": "setContentHandler",
          "new_api": null,
          "old_text": "m_model->setContentHandler(contentHandler)",
          "new_text": null,
          "old_line_content": "    m_model->setContentHandler(contentHandler);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 105,
          "old_api": "expandRecursively",
          "new_api": null,
          "old_text": "expandRecursively()",
          "new_text": null,
          "old_line_content": "    expandRecursively();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 110,
          "old_api": "contentHandler",
          "new_api": null,
          "old_text": "m_model->contentHandler()",
          "new_text": null,
          "old_line_content": "    return m_model->contentHandler();",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 115,
          "old_api": "setUpdatesEnabled",
          "new_api": null,
          "old_text": "setUpdatesEnabled(false)",
          "new_text": null,
          "old_line_content": "    setUpdatesEnabled(false);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 142,
          "old_api": "getFileIndex",
          "new_api": null,
          "old_text": "m_filterModel->getFileIndex(index)",
          "new_text": null,
          "old_line_content": "    return m_filterModel->getFileIndex(index);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 148,
          "old_api": "parent",
          "new_api": null,
          "old_text": "i.parent()",
          "new_text": null,
          "old_line_content": "    for (QModelIndex i = index; i.isValid(); i = i.parent())",
          "new_line_content": "    Path path;",
          "content_same": false
        },
        {
          "line": 155,
          "old_api": "Utils::String::wildcardToRegexPattern(patternText)",
          "new_api": null,
          "old_text": "Utils::String::wildcardToRegexPattern(patternText)",
          "new_text": null,
          "old_line_content": "    const QString pattern = Utils::String::wildcardToRegexPattern(patternText);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 159,
          "old_api": "collapseAll",
          "new_api": null,
          "old_text": "collapseAll()",
          "new_text": null,
          "old_line_content": "        collapseAll();",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 164,
          "old_api": "expandAll",
          "new_api": null,
          "old_text": "expandAll()",
          "new_text": null,
          "old_line_content": "        expandAll();",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 170,
          "old_api": "rowCount",
          "new_api": null,
          "old_text": "model()->rowCount()",
          "new_text": null,
          "old_line_content": "    for (int i = 0; i < model()->rowCount(); ++i)",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 176,
          "old_api": "rowCount",
          "new_api": null,
          "old_text": "model()->rowCount()",
          "new_text": null,
          "old_line_content": "    for (int i = 0; i < model()->rowCount(); ++i)",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 182,
          "old_api": "key",
          "new_api": null,
          "old_text": "event->key()",
          "new_text": null,
          "old_line_content": "    if ((event->key() != Qt::Key_Space) && (event->key() != Qt::Key_Select))",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 184,
          "old_api": "QTreeView::keyPressEvent(event)",
          "new_api": null,
          "old_text": "QTreeView::keyPressEvent(event)",
          "new_text": null,
          "old_line_content": "        QTreeView::keyPressEvent(event);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 188,
          "old_api": "accept",
          "new_api": null,
          "old_text": "event->accept()",
          "new_text": null,
          "old_line_content": "    event->accept();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 190,
          "old_api": "data",
          "new_api": null,
          "old_text": "currentNameCell().data(Qt::CheckStateRole)",
          "new_text": null,
          "old_line_content": "    const QVariant value = currentNameCell().data(Qt::CheckStateRole);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 193,
          "old_api": "Q_ASSERT",
          "new_api": null,
          "old_text": "Q_ASSERT(false)",
          "new_text": null,
          "old_line_content": "        Q_ASSERT(false);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 197,
          "old_api": "toInt",
          "new_api": null,
          "old_text": "value.toInt()",
          "new_text": null,
          "old_line_content": "    const Qt::CheckState state = (static_cast<Qt::CheckState>(value.toInt()) == Qt::Checked)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 199,
          "old_api": "selectedRows",
          "new_api": null,
          "old_text": "selectionModel()->selectedRows(TorrentContentModelItem::COL_NAME)",
          "new_text": null,
          "old_line_content": "    const QModelIndexList selection = selectionModel()->selectedRows(TorrentContentModelItem::COL_NAME);",
          "new_line_content": "                                 ? Qt::Unchecked : Qt::Checked;",
          "content_same": false
        },
        {
          "line": 202,
          "old_api": "setData",
          "new_api": null,
          "old_text": "model()->setData(index, state, Qt::CheckStateRole)",
          "new_text": null,
          "old_line_content": "        model()->setData(index, state, Qt::CheckStateRole);",
          "new_line_content": "    for (const QModelIndex &index : selection)",
          "content_same": false
        },
        {
          "line": 207,
          "old_api": "selectedRows",
          "new_api": null,
          "old_text": "selectionModel()->selectedRows(0)",
          "new_text": null,
          "old_line_content": "    const QModelIndexList selectedIndexes = selectionModel()->selectedRows(0);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 211,
          "old_api": "first",
          "new_api": null,
          "old_text": "selectedIndexes.first()",
          "new_text": null,
          "old_line_content": "    const QPersistentModelIndex modelIndex = selectedIndexes.first();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 216,
          "old_api": "itemType",
          "new_api": null,
          "old_text": "m_filterModel->itemType(modelIndex)",
          "new_text": null,
          "old_line_content": "    const bool isFile = (m_filterModel->itemType(modelIndex) == TorrentContentModelItem::FileType);",
          "new_line_content": "    // Ask for new name",
          "content_same": false
        },
        {
          "line": 218,
          "old_api": "tr",
          "new_api": null,
          "old_text": "tr(\"New name:\")",
          "new_text": null,
          "old_line_content": "    QString newName = AutoExpandableDialog::getText(this, tr(\"Renaming\"), tr(\"New name:\"), QLineEdit::Normal",
          "new_line_content": "    bool ok = false;",
          "content_same": false
        },
        {
          "line": 223,
          "old_api": "setData",
          "new_api": null,
          "old_text": "model()->setData(modelIndex, newName)",
          "new_text": null,
          "old_line_content": "    model()->setData(modelIndex, newName);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 228,
          "old_api": "selectedRows",
          "new_api": null,
          "old_text": "selectionModel()->selectedRows(0)",
          "new_text": null,
          "old_line_content": "    const QModelIndexList selectedRows = selectionModel()->selectedRows(0);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 231,
          "old_api": "static_cast<int>(priority)",
          "new_api": null,
          "old_text": "static_cast<int>(priority)",
          "new_text": null,
          "old_line_content": "        model()->setData(index.sibling(index.row(), Priority), static_cast<int>(priority));",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 241,
          "old_api": "selectedRows",
          "new_api": null,
          "old_text": "selectionModel()->selectedRows(0)",
          "new_text": null,
          "old_line_content": "    const QModelIndexList selectedRows = selectionModel()->selectedRows(0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 244,
          "old_api": "length",
          "new_api": null,
          "old_text": "selectedRows.length()",
          "new_text": null,
          "old_line_content": "    const auto priorityGroupSize = std::max<qsizetype>((selectedRows.length() / priorityGroups), 1);",
          "new_line_content": "    const qsizetype priorityGroups = 3;",
          "content_same": false
        },
        {
          "line": 246,
          "old_api": "length",
          "new_api": null,
          "old_text": "selectedRows.length()",
          "new_text": null,
          "old_line_content": "    for (qsizetype i = 0; i < selectedRows.length(); ++i)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 264,
          "old_api": "static_cast<int>(priority)",
          "new_api": null,
          "old_text": "static_cast<int>(priority)",
          "new_text": null,
          "old_line_content": "        model()->setData(index.sibling(index.row(), Priority), static_cast<int>(priority));",
          "new_line_content": "        const QModelIndex &index = selectedRows[i];",
          "content_same": false
        },
        {
          "line": 270,
          "old_api": "selectedRows",
          "new_api": null,
          "old_text": "selectionModel()->selectedRows(0)",
          "new_text": null,
          "old_line_content": "    const QModelIndexList selectedIndexes = selectionModel()->selectedRows(0);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 273,
          "old_api": "first",
          "new_api": null,
          "old_text": "selectedIndexes.first()",
          "new_text": null,
          "old_line_content": "    openItem(selectedIndexes.first());",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 276,
          "old_api": "maybe_unused",
          "new_api": null,
          "old_text": "maybe_unused",
          "new_text": null,
          "old_line_content": "void TorrentContentWidget::setModel([[maybe_unused]] QAbstractItemModel *model)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 278,
          "old_api": "Q_ASSERT_X",
          "new_api": null,
          "old_text": "Q_ASSERT_X(false, Q_FUNC_INFO, \"Changing the model of TorrentContentWidget is not allowed.\")",
          "new_text": null,
          "old_line_content": "    Q_ASSERT_X(false, Q_FUNC_INFO, \"Changing the model of TorrentContentWidget is not allowed.\");",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 283,
          "old_api": "currentIndex",
          "new_api": null,
          "old_text": "currentIndex()",
          "new_text": null,
          "old_line_content": "    const QModelIndex current = currentIndex();",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 286,
          "old_api": "Q_ASSERT",
          "new_api": null,
          "old_text": "Q_ASSERT(false)",
          "new_text": null,
          "old_line_content": "        Q_ASSERT(false);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 290,
          "old_api": "siblingAtColumn",
          "new_api": null,
          "old_text": "current.siblingAtColumn(TorrentContentModelItem::COL_NAME)",
          "new_text": null,
          "old_line_content": "    return current.siblingAtColumn(TorrentContentModelItem::COL_NAME);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 296,
          "old_api": "setAttribute",
          "new_api": null,
          "old_text": "menu->setAttribute(Qt::WA_DeleteOnClose)",
          "new_text": null,
          "old_line_content": "    menu->setAttribute(Qt::WA_DeleteOnClose);",
          "new_line_content": "    QMenu *menu = new QMenu(this);",
          "content_same": false
        },
        {
          "line": 301,
          "old_api": "tr",
          "new_api": null,
          "old_text": "tr(\"Column visibility\")",
          "new_text": null,
          "old_line_content": "        menu->setTitle(tr(\"Column visibility\"));",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 304,
          "old_api": "toString",
          "new_api": null,
          "old_text": "model()->headerData(i, Qt::Horizontal, Qt::DisplayRole).toString()",
          "new_text": null,
          "old_line_content": "            const auto columnName = model()->headerData(i, Qt::Horizontal, Qt::DisplayRole).toString();",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 307,
          "old_api": "setColumnHidden",
          "new_api": null,
          "old_text": "setColumnHidden(i, !checked)",
          "new_text": null,
          "old_line_content": "                setColumnHidden(i, !checked);",
          "new_line_content": "            {",
          "content_same": false
        },
        {
          "line": 309,
          "old_api": "columnWidth",
          "new_api": null,
          "old_text": "columnWidth(i)",
          "new_text": null,
          "old_line_content": "                if (checked && (columnWidth(i) <= 5))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 314,
          "old_api": "setCheckable",
          "new_api": null,
          "old_text": "action->setCheckable(true)",
          "new_text": null,
          "old_line_content": "            action->setCheckable(true);",
          "new_line_content": "            });",
          "content_same": false
        },
        {
          "line": 318,
          "old_api": "setEnabled",
          "new_api": null,
          "old_text": "action->setEnabled(false)",
          "new_text": null,
          "old_line_content": "                action->setEnabled(false);",
          "new_line_content": "            if (i == TorrentContentModelItem::COL_NAME)",
          "content_same": false
        },
        {
          "line": 321,
          "old_api": "addSeparator",
          "new_api": null,
          "old_text": "menu->addSeparator()",
          "new_text": null,
          "old_line_content": "        menu->addSeparator();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 324,
          "old_api": "tr",
          "new_api": null,
          "old_text": "tr(\"Resize columns\")",
          "new_text": null,
          "old_line_content": "    QAction *resizeAction = menu->addAction(tr(\"Resize columns\"), this, [this]()",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 326,
          "old_api": "count",
          "new_api": null,
          "old_text": "header()->count()",
          "new_text": null,
          "old_line_content": "        for (int i = 0, count = header()->count(); i < count; ++i)",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 328,
          "old_api": "isColumnHidden",
          "new_api": null,
          "old_text": "isColumnHidden(i)",
          "new_text": null,
          "old_line_content": "            if (!isColumnHidden(i))",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 334,
          "old_api": "tr",
          "new_api": null,
          "old_text": "tr(\"Resize all non-hidden columns to the size of their contents\")",
          "new_text": null,
          "old_line_content": "    resizeAction->setToolTip(tr(\"Resize all non-hidden columns to the size of their contents\"));",
          "new_line_content": "    });",
          "content_same": false
        },
        {
          "line": 336,
          "old_api": "QCursor::pos()",
          "new_api": null,
          "old_text": "QCursor::pos()",
          "new_text": null,
          "old_line_content": "    menu->popup(QCursor::pos());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 341,
          "old_api": "selectedRows",
          "new_api": null,
          "old_text": "selectionModel()->selectedRows(0)",
          "new_text": null,
          "old_line_content": "    const QModelIndexList selectedRows = selectionModel()->selectedRows(0);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 346,
          "old_api": "setAttribute",
          "new_api": null,
          "old_text": "menu->setAttribute(Qt::WA_DeleteOnClose)",
          "new_text": null,
          "old_line_content": "    menu->setAttribute(Qt::WA_DeleteOnClose);",
          "new_line_content": "    QMenu *menu = new QMenu(this);",
          "content_same": false
        },
        {
          "line": 348,
          "old_api": "size",
          "new_api": null,
          "old_text": "selectedRows.size()",
          "new_text": null,
          "old_line_content": "    if (selectedRows.size() == 1)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 352,
          "old_api": "isEmpty",
          "new_api": null,
          "old_text": "contentHandler()->actualStorageLocation().isEmpty()",
          "new_text": null,
          "old_line_content": "        if (!contentHandler()->actualStorageLocation().isEmpty())",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 354,
          "old_api": "tr",
          "new_api": null,
          "old_text": "tr(\"Open\")",
          "new_text": null,
          "old_line_content": "            menu->addAction(UIThemeManager::instance()->getIcon(u\"folder-documents\"_s), tr(\"Open\")",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 359,
          "old_api": "tr",
          "new_api": null,
          "old_text": "tr(\"Rename...\")",
          "new_text": null,
          "old_line_content": "        menu->addAction(UIThemeManager::instance()->getIcon(u\"edit-rename\"_s), tr(\"Rename...\")",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 361,
          "old_api": "addSeparator",
          "new_api": null,
          "old_text": "menu->addSeparator()",
          "new_text": null,
          "old_line_content": "        menu->addSeparator();",
          "new_line_content": "                        , this, &TorrentContentWidget::renameSelectedFile);",
          "content_same": false
        },
        {
          "line": 363,
          "old_api": "tr",
          "new_api": null,
          "old_text": "tr(\"Priority\")",
          "new_text": null,
          "old_line_content": "        QMenu *subMenu = menu->addMenu(tr(\"Priority\"));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 365,
          "old_api": "tr",
          "new_api": null,
          "old_text": "tr(\"Do not download\")",
          "new_text": null,
          "old_line_content": "        subMenu->addAction(tr(\"Do not download\"), this, [this]",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 367,
          "old_api": "applyPriorities",
          "new_api": null,
          "old_text": "applyPriorities(BitTorrent::DownloadPriority::Ignored)",
          "new_text": null,
          "old_line_content": "            applyPriorities(BitTorrent::DownloadPriority::Ignored);",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 369,
          "old_api": "tr",
          "new_api": null,
          "old_text": "tr(\"Normal\")",
          "new_text": null,
          "old_line_content": "        subMenu->addAction(tr(\"Normal\"), this, [this]",
          "new_line_content": "        });",
          "content_same": false
        },
        {
          "line": 371,
          "old_api": "applyPriorities",
          "new_api": null,
          "old_text": "applyPriorities(BitTorrent::DownloadPriority::Normal)",
          "new_text": null,
          "old_line_content": "            applyPriorities(BitTorrent::DownloadPriority::Normal);",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 373,
          "old_api": "tr",
          "new_api": null,
          "old_text": "tr(\"High\")",
          "new_text": null,
          "old_line_content": "        subMenu->addAction(tr(\"High\"), this, [this]",
          "new_line_content": "        });",
          "content_same": false
        },
        {
          "line": 375,
          "old_api": "applyPriorities",
          "new_api": null,
          "old_text": "applyPriorities(BitTorrent::DownloadPriority::High)",
          "new_text": null,
          "old_line_content": "            applyPriorities(BitTorrent::DownloadPriority::High);",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 377,
          "old_api": "tr",
          "new_api": null,
          "old_text": "tr(\"Maximum\")",
          "new_text": null,
          "old_line_content": "        subMenu->addAction(tr(\"Maximum\"), this, [this]",
          "new_line_content": "        });",
          "content_same": false
        },
        {
          "line": 379,
          "old_api": "applyPriorities",
          "new_api": null,
          "old_text": "applyPriorities(BitTorrent::DownloadPriority::Maximum)",
          "new_text": null,
          "old_line_content": "            applyPriorities(BitTorrent::DownloadPriority::Maximum);",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 381,
          "old_api": "addSeparator",
          "new_api": null,
          "old_text": "subMenu->addSeparator()",
          "new_text": null,
          "old_line_content": "        subMenu->addSeparator();",
          "new_line_content": "        });",
          "content_same": false
        },
        {
          "line": 386,
          "old_api": "tr",
          "new_api": null,
          "old_text": "tr(\"Do not download\")",
          "new_text": null,
          "old_line_content": "        menu->addAction(tr(\"Do not download\"), this, [this]",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 388,
          "old_api": "applyPriorities",
          "new_api": null,
          "old_text": "applyPriorities(BitTorrent::DownloadPriority::Ignored)",
          "new_text": null,
          "old_line_content": "            applyPriorities(BitTorrent::DownloadPriority::Ignored);",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 390,
          "old_api": "tr",
          "new_api": null,
          "old_text": "tr(\"Normal priority\")",
          "new_text": null,
          "old_line_content": "        menu->addAction(tr(\"Normal priority\"), this, [this]",
          "new_line_content": "        });",
          "content_same": false
        },
        {
          "line": 392,
          "old_api": "applyPriorities",
          "new_api": null,
          "old_text": "applyPriorities(BitTorrent::DownloadPriority::Normal)",
          "new_text": null,
          "old_line_content": "            applyPriorities(BitTorrent::DownloadPriority::Normal);",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 394,
          "old_api": "tr",
          "new_api": null,
          "old_text": "tr(\"High priority\")",
          "new_text": null,
          "old_line_content": "        menu->addAction(tr(\"High priority\"), this, [this]",
          "new_line_content": "        });",
          "content_same": false
        },
        {
          "line": 396,
          "old_api": "applyPriorities",
          "new_api": null,
          "old_text": "applyPriorities(BitTorrent::DownloadPriority::High)",
          "new_text": null,
          "old_line_content": "            applyPriorities(BitTorrent::DownloadPriority::High);",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 398,
          "old_api": "tr",
          "new_api": null,
          "old_text": "tr(\"Maximum priority\")",
          "new_text": null,
          "old_line_content": "        menu->addAction(tr(\"Maximum priority\"), this, [this]",
          "new_line_content": "        });",
          "content_same": false
        },
        {
          "line": 400,
          "old_api": "applyPriorities",
          "new_api": null,
          "old_text": "applyPriorities(BitTorrent::DownloadPriority::Maximum)",
          "new_text": null,
          "old_line_content": "            applyPriorities(BitTorrent::DownloadPriority::Maximum);",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 402,
          "old_api": "addSeparator",
          "new_api": null,
          "old_text": "menu->addSeparator()",
          "new_text": null,
          "old_line_content": "        menu->addSeparator();",
          "new_line_content": "        });",
          "content_same": false
        },
        {
          "line": 408,
          "old_api": "model",
          "new_api": null,
          "old_text": "model()",
          "new_text": null,
          "old_line_content": "    connect(model(), &QAbstractItemModel::modelAboutToBeReset, menu, [menu]()",
          "new_line_content": "    // so we just close menu when an appropriate model is reset",
          "content_same": false
        },
        {
          "line": 410,
          "old_api": "setActiveAction",
          "new_api": null,
          "old_text": "menu->setActiveAction(nullptr)",
          "new_text": null,
          "old_line_content": "        menu->setActiveAction(nullptr);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 414,
          "old_api": "QCursor::pos()",
          "new_api": null,
          "old_text": "QCursor::pos()",
          "new_text": null,
          "old_line_content": "    menu->popup(QCursor::pos());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 419,
          "old_api": "isValid",
          "new_api": null,
          "old_text": "index.isValid()",
          "new_text": null,
          "old_line_content": "    if (!index.isValid())",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 422,
          "old_api": "contentHandler",
          "new_api": null,
          "old_text": "m_model->contentHandler()->flushCache()",
          "new_text": null,
          "old_line_content": "    m_model->contentHandler()->flushCache();  // Flush data",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 428,
          "old_api": "getFullPath",
          "new_api": null,
          "old_text": "getFullPath(index)",
          "new_text": null,
          "old_line_content": "    const Path path = getFullPath(index);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 431,
          "old_api": "MacUtils::openFiles({path})",
          "new_api": null,
          "old_text": "MacUtils::openFiles({path})",
          "new_text": null,
          "old_line_content": "    MacUtils::openFiles({path});",
          "new_line_content": "#ifdef Q_OS_MACOS",
          "content_same": false
        },
        {
          "line": 433,
          "old_api": "Utils::Gui::openFolderSelect(path)",
          "new_api": null,
          "old_text": "Utils::Gui::openFolderSelect(path)",
          "new_text": null,
          "old_line_content": "    Utils::Gui::openFolderSelect(path);",
          "new_line_content": "#else",
          "content_same": false
        },
        {
          "line": 439,
          "old_api": "contentHandler",
          "new_api": null,
          "old_text": "m_model->contentHandler()",
          "new_text": null,
          "old_line_content": "    const auto *contentHandler = m_model->contentHandler();",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 442,
          "old_api": "actualFilePath",
          "new_api": null,
          "old_text": "contentHandler->actualFilePath(fileIdx)",
          "new_text": null,
          "old_line_content": "        const Path fullPath = contentHandler->actualStorageLocation() / contentHandler->actualFilePath(fileIdx);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 447,
          "old_api": "getItemPath",
          "new_api": null,
          "old_text": "getItemPath(index)",
          "new_text": null,
          "old_line_content": "    const Path fullPath = contentHandler->actualStorageLocation() / getItemPath(index);",
          "new_line_content": "    // folder type",
          "content_same": false
        },
        {
          "line": 453,
          "old_api": "contentHandler",
          "new_api": null,
          "old_text": "m_model->contentHandler()",
          "new_text": null,
          "old_line_content": "    const auto *contentHandler = m_model->contentHandler();",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 456,
          "old_api": "hasMetadata",
          "new_api": null,
          "old_text": "contentHandler->hasMetadata()",
          "new_text": null,
          "old_line_content": "    if (Q_UNLIKELY(!contentHandler || !contentHandler->hasMetadata()))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 460,
          "old_api": "renameSelectedFile",
          "new_api": null,
          "old_text": "renameSelectedFile()",
          "new_text": null,
          "old_line_content": "        renameSelectedFile();",
          "new_line_content": "    if (m_doubleClickAction == DoubleClickAction::Rename)",
          "content_same": false
        },
        {
          "line": 462,
          "old_api": "openItem",
          "new_api": null,
          "old_text": "openItem(index)",
          "new_text": null,
          "old_line_content": "        openItem(index);",
          "new_line_content": "    else",
          "content_same": false
        },
        {
          "line": 468,
          "old_api": "rowCount",
          "new_api": null,
          "old_text": "model()->rowCount(currentIndex)",
          "new_text": null,
          "old_line_content": "    while (model()->rowCount(currentIndex) == 1)",
          "new_line_content": "    QModelIndex currentIndex;",
          "content_same": false
        },
        {
          "line": 470,
          "old_api": "index",
          "new_api": null,
          "old_text": "model()->index(0, 0, currentIndex)",
          "new_text": null,
          "old_line_content": "        currentIndex = model()->index(0, 0, currentIndex);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 477,
          "old_api": "modifiers",
          "new_api": null,
          "old_text": "event->modifiers()",
          "new_text": null,
          "old_line_content": "    if (event->modifiers() & Qt::ShiftModifier)",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 480,
          "old_api": "accept",
          "new_api": null,
          "old_text": "event->accept()",
          "new_text": null,
          "old_line_content": "        event->accept();",
          "new_line_content": "        // Shift + scroll = horizontal scroll",
          "content_same": false
        },
        {
          "line": 488,
          "old_api": "QTreeView::wheelEvent(event)",
          "new_api": null,
          "old_text": "QTreeView::wheelEvent(event)",
          "new_text": null,
          "old_line_content": "    QTreeView::wheelEvent(event);  // event delegated to base class",
          "new_line_content": "",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 42,
      "total_additions": 106,
      "total_deletions": 105,
      "total_api_changes": 253
    },
    "non_api_changes": {
      "has_non_api_changes": false,
      "evidence": {
        "total_diff_lines": 1,
        "api_related_lines": 253,
        "non_api_lines": 0,
        "non_api_line_numbers": []
      }
    },
    "api_calls_before": 249,
    "api_calls_after": 250,
    "diff_info": {
      "added_lines": 1,
      "removed_lines": 0,
      "total_diff_lines": 13
    }
  }
}